[{"tags": ["ruby-on-rails", "ruby", "git"], "answers": [{"comments": [{"owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "edited": false, "score": 0, "creation_date": 1498696618, "post_id": 44814543, "comment_id": 76609666, "body": "As this is an older Ruby/Rails version, you may consider adding <a href=\"https://github.com/presidentbeef/brakeman\" rel=\"nofollow noreferrer\">Brakeman</a> to your CI/CD pipeline..."}], "tags": [], "owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "is_accepted": false, "score": 1, "last_activity_date": 1498696259, "creation_date": 1498696259, "answer_id": 44814543, "question_id": 44814218, "link": "https://stackoverflow.com/questions/44814218/fixing-or-adding-features-to-a-rails-server-in-production/44814543#44814543", "title": "Fixing (or adding features to) a Rails server in production", "body": "<p>Although the complexity of this type of operation varies quite a bit, usually based on the complexity of the application itself, I think a few generalizations can be made. </p>\n\n<p><strong>Tests</strong></p>\n\n<p>Obviously, do not break any existing tests. Write tests for you new functionality, even if they are the first tests in the application.</p>\n\n<p><strong>Data</strong></p>\n\n<p>Ideally, you will have data to work with that very closely mirrors your production data. In some cases (CMS) this may be an actual dump of the production database and assets, restored locally. In other cases (billing portal for a hospital), you will probably need to rely on well-constructed seed data. Once your automated tests pass, you can perform manual QA against the (possibly simulated) production data. </p>\n\n<p><strong>Staging</strong></p>\n\n<p>If you do not have a staging environment that 100% mirrors your production environment, set one up now. This should be set up as close as you possibly can to your production environment, using the database guidelines from above. Merge your feature branch into staging prior to merging it into production. This will allow you to do a final QA test in a near-production environment. This can be used to test not only new application features, but new server versions, ruby version, etc.</p>\n\n<p><strong>CI/CD</strong></p>\n\n<p>It is becoming very common to use CI/CD to automate the testing and deployment of feature branches. This can help enforce code quality guidelines. It can also allow you to run the tests in an environment that matches production, for extra peace of mind.</p>\n\n<p><strong>Backups</strong></p>\n\n<p>Obviously, even with all of this, things can still go wrong. Keeping up-to-date backups is vital, for worst case scenarios.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user5494880"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498696259, "creation_date": 1498693563, "question_id": 44814218, "link": "https://stackoverflow.com/questions/44814218/fixing-or-adding-features-to-a-rails-server-in-production", "title": "Fixing (or adding features to) a Rails server in production", "body": "<p>I would like to know what the best practice is for taking a ruby on rails application in production and adding a feature to it or debugging a broken feature?</p>\n\n<p>What I mean is, say you have a working application and you have lots of people using it. You want to add a new feature to this app. You clone your application to your local machine. Create a new feature (or w/e) branch.</p>\n\n<p>Now what do you change/do so you don't destroy your database and so you are able to test and debug this application on your local machine?</p>\n\n<p><em>Also, let's say this is an older rails application with an older ruby version.</em></p>\n\n<p>I would also like to note that I am having trouble finding any information this and am willing to read books and lots of text to learn if it is a very involved task.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "django", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1498694566, "post_id": 44813931, "comment_id": 76609164, "body": "It&#39;s not clear at all what the relationship is between the Django app and your app, and whether it even matters. Is there a reason this has a [django] tag? Is your Django app still relevant? Are you replacing or co-existing? In other words, can you refactor the Rails model to be more &quot;Rails-ey&quot;?"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1498694698, "post_id": 44813931, "comment_id": 76609196, "body": "Also, it would help if you provide more actual context (i.e. code). What are your pertinent models or table structures?"}], "owner": {"reputation": 2597, "user_id": 1329321, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/c3c2bc221f92e4a674ac01510cf900f0?s=128&d=identicon&r=PG", "display_name": "Mike Manfrin", "link": "https://stackoverflow.com/users/1329321/mike-manfrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 63, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1498691472, "creation_date": 1498691472, "question_id": 44813931, "link": "https://stackoverflow.com/questions/44813931/has-many-polymorphic-relationship-where-our-type-field-is-an-int", "title": "has_many polymorphic relationship where our _type field is an int?", "body": "<p>We have an app in Rails 4 (but soon to be Rails 5) that has a polymorphic log class that we inherited from a Django app.</p>\n\n<p>In a traditional polymorphic relation, the objects would have source_type and source_id, which would be things like <code>'some_class'</code> and <code>123</code>. </p>\n\n<p>In our little model, we have <code>content_type</code> and <code>content_id</code> which unfortunately map to two ints, where the int in <code>content_type</code> further points to a <code>ContentType</code> model that -- to further complicate things -- dont map to Rails-ey types (<code>'some_type'</code> but rather django-ey <code>'some type class'</code>. </p>\n\n<p>It's a mess.</p>\n\n<p>Is there any way to override the value used in looking in a polymorphic association (e.g. instead of using <code>'some_class'</code>, use <code>11</code>) -- but just for the association? There is an answer for a <a href=\"https://stackoverflow.com/questions/6131311/polymorphic-assocations-using-integer-id-type-fields\">problem somewhat similar</a> to ours, but it is 4 years old and it overrides association_class. We still use some of this strange Django voodoo elsewhere in our codebase, so overrides feel like they'd cause more problems than solve. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498692634, "post_id": 44813879, "comment_id": 76608734, "body": "Could you add to your question the view from where <code>evento_params</code> is getting the data?"}, {"owner": {"reputation": 111, "user_id": 3630282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c34fa8a2240e57d0732142034b61ab53?s=128&d=identicon&r=PG", "display_name": "Luis Flores", "link": "https://stackoverflow.com/users/3630282/luis-flores"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498697639, "post_id": 44813879, "comment_id": 76609867, "body": "I think you just figured it out based on your answer, just edited the question to be more explicit on the view that routes to the eventos#programa method/action which is the one connecting to evento_params. I hope I got your question right."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498698949, "post_id": 44813879, "comment_id": 76610142, "body": "As i understood, <code>forma_prog.html.erb</code> sends the data to <code>eventos#programa</code>, correct? If so, then you are missing data in your form. Check updated answer for a more detailed explanation."}, {"owner": {"reputation": 111, "user_id": 3630282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c34fa8a2240e57d0732142034b61ab53?s=128&d=identicon&r=PG", "display_name": "Luis Flores", "link": "https://stackoverflow.com/users/3630282/luis-flores"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498711173, "post_id": 44813879, "comment_id": 76612993, "body": "That&#39;s correct, but in my mind, at least that&#39;s what I pretend but may be failing, is that forma_prog.html.erb sets general parameters for eventos#programa to generate the model records according to those parameters, you may see that I am generating dates in the range defined in the form for the teams belonging to the trainer (Entrenador) selected in the form. I see your updated answer but the forma_prog.html.erb is not supposed to set the Evento model params but to set up boundary parameters for the controller action to generate the records params, is that possible?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498739177, "post_id": 44813879, "comment_id": 76630190, "body": "I understand now, and yes, you can create an <code>Evento</code> without explicity sending its attributes in the form, but it wont work in the way you are doing it, that is, using <i>strong params</i> (since <code>params</code> will only contain information sent by the form). So you need to set all <code>Evento</code> attributes manually. I can now see how you are setting <code>fecha</code> and <code>id</code>, but what about the other attributes (e.g. <code>tipoEvento</code>, <code>comment</code>, <code>registrado</code>, etc.), where is that information?"}], "answers": [{"comments": [{"owner": {"reputation": 111, "user_id": 3630282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c34fa8a2240e57d0732142034b61ab53?s=128&d=identicon&r=PG", "display_name": "Luis Flores", "link": "https://stackoverflow.com/users/3630282/luis-flores"}, "edited": false, "score": 0, "creation_date": 1498766916, "post_id": 44814087, "comment_id": 76648731, "body": "I did this in the eventos#programa action: &#39;@evento = Evento.new(parametros_evento)&#39; and defined the parametros_evento method in the private section to return the evento hash with all the required attributes. Thanks."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1498698832, "last_edit_date": 1498698832, "creation_date": 1498692551, "answer_id": 44814087, "question_id": 44813879, "link": "https://stackoverflow.com/questions/44813879/generate-several-model-rows-from-a-date-range-in-rails-5-0-0-1/44814087#44814087", "title": "Generate several model rows from a date range in rails 5.0.0.1", "body": "<p>You are correct, the <strong>first problem</strong> is that <code>form_tag</code> doesn't group all <code>evento</code> values in one key, as you are expecting.</p>\n\n<p>This can be solved using <code>form_for</code> but, if you would like to keep <code>form_tag</code>, just rename the inputs with <code>evento[attribute]</code>.</p>\n\n<p>Where <code>attribute</code> is the name of the parameter/field (e.g. <code>evento[fecha]</code> for your input <code>fecha</code>).</p>\n\n<p>After fixing the above, the error you mention will go away, but will another one will be raised because none of the attributes needed to create an <code>Evento</code> is sent in your <code>form</code>.</p>\n\n<p>So, the <strong>second problem</strong> is that the <code>form</code> is not sending all the parameters; you can see those needed parameters in <code>evento_params</code> method:</p>\n\n<pre><code>def evento_params\n  params.require(:evento).permit(:fecha, :tipoEvento, :equipo_id, :comment, :registrado, :asistencias_attributes =&gt; [:evento_id, :player_id, :tipo, :comment])\nend\n</code></pre>\n\n<p>This means that <code>evento_params</code> is expecting a <em>Parameters</em> hash with this structure:</p>\n\n<pre><code>{\n  \"utf8\"=&gt;\"\u2713\",\n  \"authenticity_token\"=&gt;\"...\",\n  \"evento\"=&gt;{\n    \"fecha\"=&gt;\"...\",\n    \"tipoEvento\"=&gt;\"...\",\n    \"equipo_id\"=&gt;\"...\",\n    \"comment\"=&gt;\"...\",\n    \"registrado\"=&gt;\"...\",\n    \"asistencias_attributes\"=&gt;[\n      {\n        evento_id=&gt;\"...\",\n        player_id=&gt;\"...\",\n        tipo=&gt;\"...\",\n        comment=&gt; \"...\"\n      }\n    ],\n  \"commit\"=&gt;\"Create events\"\n}\n</code></pre>\n\n<p>To fix this, you either need to send all those missing parameters, or adjust <code>evento_params</code> method to use only the ones sent by the <code>form</code>.</p>\n"}], "owner": {"reputation": 111, "user_id": 3630282, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/c34fa8a2240e57d0732142034b61ab53?s=128&d=identicon&r=PG", "display_name": "Luis Flores", "link": "https://stackoverflow.com/users/3630282/luis-flores"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 44814087, "answer_count": 1, "score": 0, "last_activity_date": 1498698832, "creation_date": 1498691082, "last_edit_date": 1498697442, "question_id": 44813879, "link": "https://stackoverflow.com/questions/44813879/generate-several-model-rows-from-a-date-range-in-rails-5-0-0-1", "title": "Generate several model rows from a date range in rails 5.0.0.1", "body": "<p>I want to generate several scheduled events from a date range on selected days input in a form for a specific trainer, The Evento model is: </p>\n\n<pre><code>class Evento &lt; ApplicationRecord\n  belongs_to :equipo\n  has_many :asistencias, dependent: :destroy\n  accepts_nested_attributes_for :asistencias\n  scope :done, -&gt; { where(registrado: true) }\n  validates :equipo_id, :fecha, :tipoEvento, presence: true\nend\n</code></pre>\n\n<p>so I have a view at 'app/views/eventos/forma_prog.html.erb' which includes a form to get the parameters to define the date range like this:</p>\n\n<pre><code>&lt;% provide(:title, \"Entrenamientos\") %&gt;\n&lt;div class=\"col-sm-6 col-sm-offset-3\"&gt;\n  &lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n  &lt;h1&gt;Programaci\u00f3n de Entrenamientos&lt;/h1&gt;\n\n  &lt;%= form_tag(programa_path) do %&gt;\n    &lt;% dias = [] %&gt;\n    &lt;%= label_tag(:entrenador, \"Trainer:\") %&gt;\n    &lt;%= select_tag :entrenador, \n       options_from_collection_for_select(@entrenadores, \"id\", \"name\"), \n       prompt: \"Select the trainer\", class: 'form-control' %&gt;\n    &lt;b&gt;Days:&lt;/b&gt;\n    &lt;div class=\"well\"&gt;\n      &lt;% @dias.each_with_index do |day, index| %&gt;\n        &lt;%= label_tag day, day, class: \"checkbox-inline nopadding\"; %&gt;\n        &lt;%= check_box_tag 'dias[]', index, checked = false, class: \n         \"nopadding\" %&gt;  |\n      &lt;% end %&gt;\n    &lt;/div&gt;\n    &lt;%= label_tag(:inicio, \"Starting Date:\") %&gt;\n    &lt;%= date_field_tag :inicio, class: 'form-control' %&gt;\n    &lt;%= label_tag(:final, \"Ending Date:\") %&gt;\n    &lt;%= date_field_tag :final, class: 'form-control' %&gt;\n    &lt;%= submit_tag \"Create events\", class: \"btn btn-default\" %&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>It works fine and returns params:</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\",\n \"authenticity_token\"=&gt;\"10BsOFEsCvO...==\",\n \"entrenador\"=&gt;\"2\",\n \"dias\"=&gt;[\"2\", \"4\"],    # Being Tuesday and Thursday\n \"inicio\"=&gt;\"2017-06-28\",\n \"final\"=&gt;\"2017-06-30\",\n \"commit\"=&gt;\"Create events\"}\n</code></pre>\n\n<p>The controller action that generates the form is: eventos#forma_prog</p>\n\n<pre><code># GET /eventos/forma_prog\ndef forma_prog\n  @entrenadores = User.all\n  @dias = %w[Dom Lun Mar Mie Jue Vie Sab]\n  @evento = Evento.new\nend\n</code></pre>\n\n<p>And the controller action that is supposed to create the events is eventos#programa:</p>\n\n<pre><code># POST /eventos/programa\ndef programa\n  entrenador = User.find(params[:entrenador])\n  inicio = Date.parse(params[:inicio])\n  final = Date.parse(params[:final])\n  dias = params[:dias].map! {|ele| ele.to_i }\n  @tipoEvento = \"Entrenamiento\"\n\n  entrenador.equipos.each do |equipo|\n    for @fecha in (inicio..final) do\n      if dias.include?(@fecha.wday)\n        @equipo_id = equipo.id\n        @evento = Evento.new(evento_params)\n        if !@evento.save\n          flash[:error] = \"No ha sido posible crear los eventos.\"\n          redirect_to root_path\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>When I click the submit button I get an error saying <strong>param is missing or the value is empty: evento</strong> and the app console points to the eventos#evento_params:</p>\n\n<pre><code># Never trust big bad internet, always use strong params\ndef evento_params\n  params.require(:evento).permit(:fecha, :tipoEvento, :equipo_id, :comment, :registrado, :asistencias_attributes =&gt; [:evento_id, :player_id, :tipo, :comment])\nend\n</code></pre>\n\n<p>I can see that the <strong>params.require(:evento)</strong> part is the problem and I guess it has something to do with the 'form_tag' I chose instead a 'form_for @evento' But I did this way because I think the form is not fully related with the @evento object for the model, please help me here...</p>\n"}, {"tags": ["ruby", "appium", "appium-ios"], "comments": [{"owner": {"reputation": 790, "user_id": 2525053, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2c015a2fbc80167042f71daf9ce4c199?s=128&d=identicon&r=PG&f=1", "display_name": "Harish Talanki", "link": "https://stackoverflow.com/users/2525053/harish-talanki"}, "edited": false, "score": 0, "creation_date": 1498690671, "post_id": 44813736, "comment_id": 76608214, "body": "Can you add some logs? With this information, its difficult to provide an answer."}], "answers": [{"tags": [], "owner": {"reputation": 983, "user_id": 6744397, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_RLenB3xeA/AAAAAAAAAAI/AAAAAAAAAoQ/3Bq9Qa_5yNQ/photo.jpg?sz=128", "display_name": "Anish Pillai", "link": "https://stackoverflow.com/users/6744397/anish-pillai"}, "is_accepted": false, "score": 0, "last_activity_date": 1498699907, "creation_date": 1498699907, "answer_id": 44814987, "question_id": 44813736, "link": "https://stackoverflow.com/questions/44813736/appium-ios-is-finding-thousands-of-elements-before-it-clicks-freezing-the-test/44814987#44814987", "title": "Appium iOS is finding thousands of elements before it clicks freezing the test", "body": "<p>Not sure if its possible. iOS provides the full list of items on the screen. So if you have a scrollable view, and say it has 1000 items, then Appium will get all the items even though only few will be visible on the screen at a time.</p>\n\n<p>One thing that can be done is to avoid using xpath as much as possible. And then to adsk dev to add automation ids to all the controls. This way, even if you need to use xpath, the list can be narrowed down as you get a very targetted list based on automation ids.</p>\n\n<p>Another thing that can be done is (only if you want to verify if element exists) get the page source once. then just search for the value in the page source text. This will speed up execution a lot, but only where you want to check if element exists.</p>\n"}], "owner": {"reputation": 81, "user_id": 4355621, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-rBrnRU0zwB0/AAAAAAAAAAI/AAAAAAAAAMA/i1NvkZrPa5U/photo.jpg?sz=128", "display_name": "Jesse Fish", "link": "https://stackoverflow.com/users/4355621/jesse-fish"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 193, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1499794999, "creation_date": 1498690180, "last_edit_date": 1499794999, "question_id": 44813736, "link": "https://stackoverflow.com/questions/44813736/appium-ios-is-finding-thousands-of-elements-before-it-clicks-freezing-the-test", "title": "Appium iOS is finding thousands of elements before it clicks freezing the test", "body": "<p>I have a page in my application that has a tutorial overlay. I want appium to just tap the screen to get rid of the overlay and then continue doing tests. For some reason the tap command I send never happens and the test times out. I'm not explicitly waiting more than 2 seconds to initiate the tap and from what I can tell the tap is sent but just doesn't happen.</p>\n\n<p>Thank you for any help you can give regarding this issue. I'm already attempting to work with my devs on this but so far we've not been able to come up with a solution.</p>\n\n<p>Appium Logs (This is the moment the appium project runs in to the screen with the overlay and multiple users):</p>\n\n<pre><code>[debug] [JSONWP Proxy] Got response with status 200: {\"status\":0,\"id\":\"446B2970-66EA-4795-846E-250B55EFABC0\",\"value\":\"\",\"sessionId\":\"C0E25E26-64C1-4E83-BEB5-5CA7CE029299\"}\n[JSONWP Proxy] Replacing sessionId C0E25E26-64C1-4E83-BEB5-5CA7CE029299 with 83022946-db67-4a8c-bdbe-4b1f203a2763\n[HTTP] &lt;-- POST /wd/hub/session/83022946-db67-4a8c-bdbe-4b1f203a2763/element/446B2970-66EA-4795-846E-250B55EFABC0/click 200 548 ms - 118 \n[HTTP] --&gt; POST /wd/hub/session/83022946-db67-4a8c-bdbe-4b1f203a2763/touch/perform {\"actions\":[{\"action\":\"tap\",\"options\":{\"x\":0.5,\"y\":0.5,\"count\":1}},{\"action\":\"release\"}]}\n[debug] [MJSONWP] Calling AppiumDriver.performTouch() with args: [[{\"action\":\"tap\",\"options\":{\"x\":0.5,\"y\":0.5,\"count\":1}},{\"action\":\"release\"}],\"83022946-db67-4a8c-bdbe-4b1f203a2763\"]\n[debug] [XCUITest] Executing command 'performTouch'\n[debug] [XCUITest] Received the following touch action: tap(options={\"x\":0.5,\"y\":0.5,\"count\":1})-release\n[debug] [XCUITest] Found matching gesture: tap\n[debug] [JSONWP Proxy] Proxying [POST /wda/tap/0] to [POST http://localhost:8100/session/C0E25E26-64C1-4E83-BEB5-5CA7CE029299/wda/tap/0] with body: {\"x\":0.5,\"y\":0.5}\n[BaseDriver] Shutting down because we waited 60 seconds for a command\n[Appium] Closing session, cause was 'New Command Timeout of 60 seconds expired. Try customizing the timeout using the 'newCommandTimeout' desired capability'\n[Appium] Removing session 7d24454e-3b9f-434c-a43a-d1f301b1802f from our master session list\n[XCUITest] Shutting down sub-processes\n[debug] [XCUITest] Found WDA derived data folder: '/Users/jessefish/Library/Developer/Xcode/DerivedData/WebDriverAgent-brdadhpuduowllgivnnvuygpwhzy'\n[XCUITest] Setting '755' permissions to '/Users/jessefish/Library/Developer/Xcode/DerivedData/WebDriverAgent-brdadhpuduowllgivnnvuygpwhzy/Logs/Test/Attachments' folder\n[debug] [XCUITest] Found WDA derived data folder: '/Users/jessefish/Library/Developer/Xcode/DerivedData/WebDriverAgent-dikkwtrisltbeobjmfvpthwwekvs'\n[XCUITest] Setting '755' permissions to '/Users/jessefish/Library/Developer/Xcode/DerivedData/WebDriverAgent-dikkwtrisltbeobjmfvpthwwekvs/Logs/Test/Attachments' folder\n[debug] [XCUITest] Not clearing log files. Use `clearSystemFiles` capability to turn on.\n[debug] [iOSLog] Stopping iOS log capture\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "model", "delayed-job"], "comments": [{"owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "edited": false, "score": 0, "creation_date": 1498698266, "post_id": 44813625, "comment_id": 76610012, "body": "Is <code>puts &quot;#{agreement.reviser_user_id}&quot;</code> showing something?"}, {"owner": {"reputation": 437, "user_id": 4643020, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10152761017948295/picture?type=large", "display_name": "Michael Lombardo", "link": "https://stackoverflow.com/users/4643020/michael-lombardo"}, "reply_to_user": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "edited": false, "score": 0, "creation_date": 1498700598, "post_id": 44813625, "comment_id": 76610508, "body": "does not show anything. So am i calling agreement wrong when calling the method? its not bringing the <code>agreement</code> over from <code>perform</code> to the <code>create_notification_expired</code> method"}, {"owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "edited": false, "score": 0, "creation_date": 1498701112, "post_id": 44813625, "comment_id": 76610636, "body": "did you check if agreement is nil before calling the <code>create_notification_expired</code> method ?"}], "answers": [{"tags": [], "owner": {"reputation": 631, "user_id": 8157532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bde8f29e12331c4a81c873acfc77cc?s=128&d=identicon&r=PG&f=1", "display_name": "ucpuzz", "link": "https://stackoverflow.com/users/8157532/ucpuzz"}, "is_accepted": true, "score": 1, "last_activity_date": 1498713636, "last_edit_date": 1498713636, "creation_date": 1498710650, "answer_id": 44816374, "question_id": 44813625, "link": "https://stackoverflow.com/questions/44813625/activerecordrecordinvalid-validation-failed-notified-by-cant-be-blank/44816374#44816374", "title": "ActiveRecord::RecordInvalid: Validation failed: Notified by can&#39;t be blank", "body": "<p>'Notification.create!' method takes in only model attributes and its values. 'notified_by' is not an attribute of Notification, instead it is an association. Remove this line, 'notified_by: agreement.reviser_user' inside of 'Notification.create!', the error may disappear. </p>\n\n<p>It is also possible 'agreement.reviser_user_id' is nil, another possibility for an error.</p>\n\n<p>notification object is being linked to user using this line 'notified_by_id: agreement.reviser_user_id', so no need for this, 'notified_by: agreement.reviser_user'</p>\n"}], "owner": {"reputation": 437, "user_id": 4643020, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10152761017948295/picture?type=large", "display_name": "Michael Lombardo", "link": "https://stackoverflow.com/users/4643020/michael-lombardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1350, "favorite_count": 0, "accepted_answer_id": 44816374, "answer_count": 1, "score": 0, "last_activity_date": 1498713636, "creation_date": 1498689523, "question_id": 44813625, "link": "https://stackoverflow.com/questions/44813625/activerecordrecordinvalid-validation-failed-notified-by-cant-be-blank", "title": "ActiveRecord::RecordInvalid: Validation failed: Notified by can&#39;t be blank", "body": "<p>I see this error a lot on google, but my case is a little different. Im using delayed_job and Im getting an error when it runs.  <code>notified_by</code> and <code>user</code> are both two separate users. Now the validation error is on <code>notified_by</code>. I made a belongs_to in the notification controller for <code>notified_by</code>.</p>\n\n<p>my delayed_job model <code>check_expired.rb</code></p>\n\n<pre class=\"lang-rails prettyprint-override\"><code>class CheckExpired &lt; Struct.new(:agreement_id)\n\n    def perform\n\n        agreement = Agreement.find(agreement_id)\n\n        if agreement.accepted == false\n\n            agreement.update_attributes expired: true\n            create_notification_expired agreement\n        end\n\n\n    end\n\n\n\n    def create_notification_expired(agreement)  \n\n   puts \"method was called\"\n   puts \"#{agreement.reviser_user_id}\"\n    Notification.create!(user_id: agreement.user_id,\n                        notified_by_id: agreement.reviser_user_id,\n                        agreement_id: agreement.id,\n                        notified_by: agreement.reviser_user,\n                        description: \"Your agreement has expired you have not been charged\",\n                        identifier: agreement.id,\n                        notice_type: 'expired')\n\n\n\n    end \n\n\nend\n</code></pre>\n\n<p>My notification model</p>\n\n<pre class=\"lang-rails prettyprint-override\"><code>class Notification &lt; ActiveRecord::Base\n  belongs_to :notified_by, class_name: 'User'  \n  belongs_to :user\n\n\n  belongs_to :reservation\n  belongs_to :offer\n  belongs_to :agreement\n\n\n  validates :user_id, :notified_by_id, :identifier, :notice_type, presence: true\n\nend\n</code></pre>\n\n<p>all in all, <code>notified_by</code> is showing validation error.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "edited": false, "score": 0, "creation_date": 1498688954, "post_id": 44813470, "comment_id": 76607710, "body": "&quot;Driver is not a module&quot; - it&#39;s a class, see <a href=\"https://github.com/SeleniumHQ/selenium/blob/master/rb/lib/selenium/webdriver/common/driver.rb#L31\" rel=\"nofollow noreferrer\">the source</a>"}, {"owner": {"reputation": 2229, "user_id": 3081519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e712d26a7a4f4df188be626eb520c88f?s=128&d=identicon&r=PG&f=1", "display_name": "user3081519", "link": "https://stackoverflow.com/users/3081519/user3081519"}, "reply_to_user": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "edited": false, "score": 0, "creation_date": 1498689209, "post_id": 44813470, "comment_id": 76607804, "body": "@wiesion Yes, I can see that as I have stated above. Thus, my question. The dude did exactly the same thing and wrote an article about it. It works for him and I don&#39;t understand why."}, {"owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "edited": false, "score": 0, "creation_date": 1498689258, "post_id": 44813470, "comment_id": 76607820, "body": "The article mentions that you should organize your Monkey patches in custom files and <code>{Target}.include</code> (Look for the comment <code># Actually monkey-patch DateTime</code>) them somewhere. That&#39;s the only time he mentions it, but it&#39;s a requirement."}, {"owner": {"reputation": 2133, "user_id": 3820185, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6XZmR.jpg?s=128&g=1", "display_name": "wiesion", "link": "https://stackoverflow.com/users/3820185/wiesion"}, "edited": false, "score": 0, "creation_date": 1498689595, "post_id": 44813470, "comment_id": 76607928, "body": "In your case you should put your monkey patch within <code>&#47;lib&#47;core_extensions&#47;selenium&#47;web_driver&#47;driver&#47;cookie_manag&zwnj;&#8203;ement.rb</code> and within an initializer (Make sure that at that point Selenium was loaded) do the include on the target Class/Module. You could also check <a href=\"https://stackoverflow.com/questions/5654517/in-ruby-on-rails-to-extend-the-string-class-where-should-the-code-be-put-in\">this post</a>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1498722098, "post_id": 44813470, "comment_id": 76618188, "body": "What do you mean by &quot;why does it not happen to the dude in the article&quot;? Where in the article does he define a <code>Selenium::WebDriver::Driver</code> module?"}, {"owner": {"reputation": 2229, "user_id": 3081519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e712d26a7a4f4df188be626eb520c88f?s=128&d=identicon&r=PG&f=1", "display_name": "user3081519", "link": "https://stackoverflow.com/users/3081519/user3081519"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1498756758, "post_id": 44813470, "comment_id": 76643135, "body": "@J&#246;rgWMittag No, he doesn&#39;t. But an attentive reader may notice that he uses DateTime class."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1498762244, "post_id": 44813470, "comment_id": 76646278, "body": "No, he uses a <code>CoreExtensions::DateTime</code> module which is completely different from the <code>::DateTime</code> class."}, {"owner": {"reputation": 2229, "user_id": 3081519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e712d26a7a4f4df188be626eb520c88f?s=128&d=identicon&r=PG&f=1", "display_name": "user3081519", "link": "https://stackoverflow.com/users/3081519/user3081519"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1498770670, "post_id": 44813470, "comment_id": 76650648, "body": "@J&#246;rgWMittag he uses module DateTime to monkey patch DateTime class."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1498773596, "post_id": 44813470, "comment_id": 76651859, "body": "Yes, he includes the <code>CoreExtensions::DateTime</code> module into the <code>::DateTime</code> class. There&#39;s nothing special about that. <i>You</i> are trying to change the <i>existing</i> <code>Selenium::WebDriver::Driver</code> class into a module, and that is not allowed."}, {"owner": {"reputation": 2229, "user_id": 3081519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e712d26a7a4f4df188be626eb520c88f?s=128&d=identicon&r=PG&f=1", "display_name": "user3081519", "link": "https://stackoverflow.com/users/3081519/user3081519"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1498775391, "post_id": 44813470, "comment_id": 76652446, "body": "@J&#246;rgWMittag ooohhh! Now it all makes sense. Thanks for this conversation!"}], "answers": [{"tags": [], "owner": {"reputation": 2229, "user_id": 3081519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e712d26a7a4f4df188be626eb520c88f?s=128&d=identicon&r=PG&f=1", "display_name": "user3081519", "link": "https://stackoverflow.com/users/3081519/user3081519"}, "is_accepted": true, "score": 0, "last_activity_date": 1498690480, "creation_date": 1498690480, "answer_id": 44813792, "question_id": 44813470, "link": "https://stackoverflow.com/questions/44813470/proper-monkey-patching-using-modules-in-ruby/44813792#44813792", "title": "Proper Monkey Patching Using Modules in Ruby", "body": "<p>Ok, so using this answer <a href=\"https://stackoverflow.com/questions/4470108/when-monkey-patching-a-method-can-you-call-the-overridden-method-from-the-new-i\">When monkey patching a method, can you call the overridden method from the new implementation?</a></p>\n\n<p>I came up with:</p>\n\n<pre><code>require 'selenium-webdriver'\n\nmodule CookieManagement\n  def get_and_save(url)\n    puts \"You told me to get, so I am getting\"\n    get(url)\n  end\nend\n\n\nclass Selenium::WebDriver::Driver\n  include CookieManagement\nend\n</code></pre>\n\n<p>Which I then <code>require_relative</code> instead of standard selenium-webdriver gem in the .rb files that need that functionality.  </p>\n"}], "owner": {"reputation": 2229, "user_id": 3081519, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/e712d26a7a4f4df188be626eb520c88f?s=128&d=identicon&r=PG&f=1", "display_name": "user3081519", "link": "https://stackoverflow.com/users/3081519/user3081519"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 523, "favorite_count": 0, "accepted_answer_id": 44813792, "answer_count": 1, "score": 1, "last_activity_date": 1498774356, "creation_date": 1498688548, "last_edit_date": 1498774356, "question_id": 44813470, "link": "https://stackoverflow.com/questions/44813470/proper-monkey-patching-using-modules-in-ruby", "title": "Proper Monkey Patching Using Modules in Ruby", "body": "<p>I want to make a monkey patch for a selenium ruby gem. </p>\n\n<p>Here is the <a href=\"http://www.justinweiss.com/articles/3-ways-to-monkey-patch-without-making-a-mess/\" rel=\"nofollow noreferrer\">article</a> that I am following.</p>\n\n<p>However, when I do define my own code:</p>\n\n<pre><code>module Selenium\n  module WebDriver\n    module Driver\n      module CookieManagement\n        # This is the same as Driver.get, but I just want it to save all the domains it goes to in an easily accessible variable\n        def get_and_save(url)\n          puts \"You've asked me to get, so I am getting\"\n          get(url)\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>Uncaught exception: Driver is not a module\n</code></pre>\n\n<p>I understand that this happens because I already have a Driver class defined, so that's ok. But then how does it not happen to the dude in the article and more importantly, what's the accepted workaround then?</p>\n\n<p><strong><em>UPDATE</em></strong></p>\n\n<p>I guess my bad for not including the line of code where I do include that causes the above error. </p>\n\n<pre><code>Selenium::WebDriver::Driver.include Selenium::WebDriver::Driver::CookieManagement\n</code></pre>\n\n<p>Also, it's plain ruby. <strong>No rails involved.</strong> </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "active-model-serializers"], "answers": [{"comments": [{"owner": {"reputation": 5115, "user_id": 602210, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/637a0e1f50816d88828e0db32918a9fb?s=128&d=identicon&r=PG", "display_name": "Zack Shapiro", "link": "https://stackoverflow.com/users/602210/zack-shapiro"}, "edited": false, "score": 0, "creation_date": 1498688527, "post_id": 44813354, "comment_id": 76607571, "body": "Perfect. Thanks so much Ursus"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 5115, "user_id": 602210, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/637a0e1f50816d88828e0db32918a9fb?s=128&d=identicon&r=PG", "display_name": "Zack Shapiro", "link": "https://stackoverflow.com/users/602210/zack-shapiro"}, "edited": false, "score": 0, "creation_date": 1498689150, "post_id": 44813354, "comment_id": 76607785, "body": "My pleasure Sir :)"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 6, "last_activity_date": 1498687879, "creation_date": 1498687879, "answer_id": 44813354, "question_id": 44813341, "link": "https://stackoverflow.com/questions/44813341/rails-nomethoderror-undefined-method-includes-for-user0x007f62dbbe62f8/44813354#44813354", "title": "Rails NoMethodError: undefined method `includes&#39; for #&lt;User:0x007f62dbbe62f8&gt;", "body": "<p>Change</p>\n\n<pre><code>@user = User.find_by_id(params[:user_id]).includes(:sectors, :slots)\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@user = User.includes(:sectors, :slots).find_by_id(params[:user_id])\n</code></pre>\n\n<p>Point is you have to call <code>includes</code> on a class (that inherits from <code>ActiveRecord::Base</code>/<code>ApplicationRecord</code>), not a single user object.</p>\n"}], "owner": {"reputation": 5115, "user_id": 602210, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/637a0e1f50816d88828e0db32918a9fb?s=128&d=identicon&r=PG", "display_name": "Zack Shapiro", "link": "https://stackoverflow.com/users/602210/zack-shapiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1848, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1498687879, "creation_date": 1498687810, "question_id": 44813341, "link": "https://stackoverflow.com/questions/44813341/rails-nomethoderror-undefined-method-includes-for-user0x007f62dbbe62f8", "title": "Rails NoMethodError: undefined method `includes&#39; for #&lt;User:0x007f62dbbe62f8&gt;", "body": "<p>I'm using the <code>active_model_serializers</code> gem in my Rails 5 app. I created a few serializer files in <code>/app/seralizers</code>, <code>user_serializer.rb</code>, <code>sector_serializer.rb</code>, and <code>slot_serializer.rb</code> .</p>\n\n<pre><code>class UserSerializer &lt; ActiveModel::Serializer\n    attributes :id, :first_name, :last_name, :email, :phone, :admin, :auth_token, :organization_id\n\n    has_many :sectors\n    has_many :slots\n    has_many :elements\nend\n\nclass SectorSerializer &lt; ActiveModel::Serializer\n    attributes :id, :user_id, :sector_number, :title\n\n    belongs_to :user\n    has_many :slots\n    has_many :elements\nend\n\nclass SlotSerializer &lt; ActiveModel::Serializer\n    attributes :id, :user_id, :sector_id, :sector_number, :title, :slot_number\n\n    belongs_to :user\n    belongs_to :sector\n    has_many :elements\nend\n</code></pre>\n\n<p>And in my controller code, I have:</p>\n\n<pre><code>class Api::V1::UsersController &lt; API::V1::BaseController\n  respond_to :json\n\n  def sky\n      @user = User.find_by_id(params[:user_id]).includes(:sectors, :slots)\n\n      if @user\n        render json: @user\n      else\n          raise \"Unable to get Sky\"\n      end\n  end\nend\n</code></pre>\n\n<p>My server is throwing an error at the line where I do the <code>.includes</code> and I can't figure out why.</p>\n\n<p>Any help is appreciated. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498688647, "post_id": 44813233, "comment_id": 76607610, "body": "Please post your <code>Portfolio</code> model."}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1498689056, "post_id": 44813233, "comment_id": 76607753, "body": "Wellcome to SO, try to provide all the information about your question (in this case the complete error message would be helpful)."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1498693123, "post_id": 44813233, "comment_id": 76608836, "body": "I fixed your indentation, which revealed the fact that your <code>show</code> action is outside of the class. You&#39;ll want to fix that and then see if the problem persists."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1499160328, "post_id": 44813233, "comment_id": 76781217, "body": "<a href=\"https://stackoverflow.com/help/someone-answers\">stackoverflow.com/help/someone-answers</a>"}], "answers": [{"tags": [], "owner": {"reputation": 693, "user_id": 6608034, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tuD0f.jpg?s=128&g=1", "display_name": "Vivek", "link": "https://stackoverflow.com/users/6608034/vivek"}, "is_accepted": false, "score": 0, "last_activity_date": 1498722080, "creation_date": 1498722080, "answer_id": 44819081, "question_id": 44813233, "link": "https://stackoverflow.com/questions/44813233/private-method-main-image-called-for-nilnilclass-how-to-fix/44819081#44819081", "title": "private method `main_image&#39; called for nil:NilClass? how to fix", "body": "<p>Add <code>show</code> action</p>\n\n<pre><code>def show\n  @portfolio_item = Portfolio.find(params[:id])\nend\n</code></pre>\n\n<p>In your <code>portfolios_controller</code> </p>\n"}, {"tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1498731160, "creation_date": 1498731160, "answer_id": 44822291, "question_id": 44813233, "link": "https://stackoverflow.com/questions/44813233/private-method-main-image-called-for-nilnilclass-how-to-fix/44822291#44822291", "title": "private method `main_image&#39; called for nil:NilClass? how to fix", "body": "<blockquote>\n  <p>private method `main_image' called for nil:NilClass?</p>\n</blockquote>\n\n<p>You are <strong>ending the class</strong> <code>PortfoliosController</code> before <code>show</code> method, so it lost the scope. Put it <strong>inside</strong> the <code>PortfoliosController</code></p>\n\n<pre><code>def update\n  @portfolio_item = Portfolio.find(params[:id])\n  respond_to do |format|\n    if @portfolio_item.update(params.require(:portfolio).permit(:title, :subtitle, :body))\n      format.html { redirect_to portfolios_path, notice: 'The record successfully updated.' }\n    else\n      format.html { render :edit }\n    end\n  end\nend \n\ndef show\n   @portfolio_item = Portfolio.find(params[:id])\nend\nend #class end\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8228640, "user_type": "registered", "profile_image": "https://graph.facebook.com/1888922751347885/picture?type=large", "display_name": "Parker Stringer", "link": "https://stackoverflow.com/users/8228640/parker-stringer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 39, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498731160, "creation_date": 1498687256, "last_edit_date": 1498708009, "question_id": 44813233, "link": "https://stackoverflow.com/questions/44813233/private-method-main-image-called-for-nilnilclass-how-to-fix", "title": "private method `main_image&#39; called for nil:NilClass? how to fix", "body": "<p>portfolios_controller.rb</p>\n\n<pre><code>class PortfoliosController &lt; ApplicationController\n  def index\n    @portfolio_items = Portfolio.all \n  end\n\n  def new\n    @portfolio_item =Portfolio.new\n  end\n\n  def create\n    @portfolio_item =Portfolio.new(params.require(:portfolio).permit(:title, :subtitle, :body))\n\n    respond_to do |format|\n      if @portfolio_item.save\n        format.html { redirect_to portfolios_path, notice: 'Your Portfolio Item is now live.' }\n        format.json { render :show, status: :created, location: @blog }\n      else\n        format.html { render :new }\n        format.json { render json: @blog.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def edit\n    @portfolio_item = Portfolio.find(params[:id])\n  end\n\n  def update\n    @portfolio_item = Portfolio.find(params[:id])\n    respond_to do |format|\n      if @portfolio_item.update(params.require(:portfolio).permit(:title, :subtitle, :body))\n        format.html { redirect_to portfolios_path, notice: 'The record successfully updated.' }\n      else\n        format.html { render :edit }\n      end\n    end\n  end \nend\n\ndef show\n   @portfolio_item = Portfolio.find(params[:id])\nend\n</code></pre>\n\n<hr>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;%= image_tag @portfolio_item.main_image %&gt;\n\n&lt;h1&gt;&lt;%= @portfolio_item.title %&gt;&lt;/h1&gt;\n\n&lt;em&gt;&lt;%= @portfolio_item.subtitle %&gt;&lt;/em&gt;\n\n&lt;p&gt;&lt;%= @portfolio_item.body %&gt;&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["ruby", "math", "methods", "operator-keyword", "overwrite"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8228362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4eb7096dc4e9537b984c9e9c39469b?s=128&d=identicon&r=PG&f=1", "display_name": "Interested Person", "link": "https://stackoverflow.com/users/8228362/interested-person"}, "edited": false, "score": 0, "creation_date": 1498687676, "post_id": 44813014, "comment_id": 76607276, "body": "Does this mean <code>+</code> is always a method in ruby whereas <code>=</code> is either a part of a method name or a standalone for assignment?"}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "reply_to_user": {"reputation": 1, "user_id": 8228362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4eb7096dc4e9537b984c9e9c39469b?s=128&d=identicon&r=PG&f=1", "display_name": "Interested Person", "link": "https://stackoverflow.com/users/8228362/interested-person"}, "edited": false, "score": 0, "creation_date": 1498748355, "post_id": 44813014, "comment_id": 76637716, "body": "Yes. <code>=</code> is part of a method name if left-hand side is something like <code>object.method</code>. Otherwise it&#39;s simply an assignment."}], "tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1498686150, "creation_date": 1498686150, "answer_id": 44813014, "question_id": 44812674, "link": "https://stackoverflow.com/questions/44812674/ruby-method-name-with-arithmetic-operators-and-like/44813014#44813014", "title": "Ruby method name with Arithmetic Operators: + - * \\ and =, like +=", "body": "<p>You can not. <code>a += b</code> is a shorthand for <code>a = a + b</code> and it <em>always</em> assigns back to <code>a</code>, and you can't redefine assignment, because it is not a method.</p>\n"}], "owner": {"reputation": 1, "user_id": 8228362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cd4eb7096dc4e9537b984c9e9c39469b?s=128&d=identicon&r=PG&f=1", "display_name": "Interested Person", "link": "https://stackoverflow.com/users/8228362/interested-person"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 73, "favorite_count": 0, "closed_date": 1498686316, "answer_count": 1, "score": -1, "last_activity_date": 1498690334, "creation_date": 1498684619, "last_edit_date": 1498690334, "question_id": 44812674, "link": "https://stackoverflow.com/questions/44812674/ruby-method-name-with-arithmetic-operators-and-like", "closed_reason": "Duplicate", "title": "Ruby method name with Arithmetic Operators: + - * \\ and =, like +=", "body": "<p>I have an ADT (Abstract Data Type) and for that I wrote a method <code>+(other)</code>.\n<code>+(other)</code> returns a new ADT.</p>\n\n<p>If I use it like:</p>\n\n<pre><code>adt += otherAdt\n</code></pre>\n\n<p>It will be overwrite <code>adt</code>.</p>\n\n<p>But now I want to write a method with name <code>+=(other)</code> to change <code>adt</code> instead of create a new one.</p>\n\n<p>I try to name my method <code>+=(other)</code> and get an error.</p>\n\n<p>My alternative is to name it <code>plus=(other)</code>.</p>\n\n<p>I know that if I have two arrays <code>aArr</code> and <code>bArr</code> and write:</p>\n\n<pre><code>aArr += bArr\n</code></pre>\n\n<p>That <code>aArr</code> is a new array with the elements of <code>aArr</code> and <code>bArr</code> and thus has a new Object-ID.</p>\n\n<p>So, is there a way to overwrite <code>+=</code>, <code>-=</code>, <code>*=</code> and <code>*=</code> in Ruby?\nAnd if so, how would it look like?  </p>\n\n<p><strong>Edit: I asked a question below @Mladen Jablanovi\u0107's answer.</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "file-upload", "shrine"], "answers": [{"tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 1, "last_activity_date": 1498685084, "creation_date": 1498685084, "answer_id": 44812784, "question_id": 44812403, "link": "https://stackoverflow.com/questions/44812403/rails-testing-file-upload-validation-shrine-gem-at-model-spec/44812784#44812784", "title": "Rails: Testing file upload validation (Shrine gem) at model spec", "body": "<p>Rather than routing uploads through <code>Rack::Test::UploadedFile</code>, create the attachment meta-data record directly using a fixture or factory or directly in the test. The end result should be that you have the attachment meta data (which is what is constructed when you upload a file) that references your file without having to run it through the upload code. I'm not sure about the specifics of doing this with Shrine, but this technique works well with libraries like Paperclip. In Shrine it looks like this will mean constructing a <code>Shrine::UploadedFile</code> record directly that references your file.</p>\n"}, {"comments": [{"owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "edited": false, "score": 0, "creation_date": 1499083608, "post_id": 44866167, "comment_id": 76748267, "body": "That is great! Thank you very much."}], "tags": [], "owner": {"reputation": 7938, "user_id": 988414, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/376e4eb9dc6c2e33d1330262edc4f109?s=128&d=identicon&r=PG", "display_name": "janko-m", "link": "https://stackoverflow.com/users/988414/janko-m"}, "is_accepted": true, "score": 4, "last_activity_date": 1513046485, "last_edit_date": 1513046485, "creation_date": 1498950929, "answer_id": 44866167, "question_id": 44812403, "link": "https://stackoverflow.com/questions/44812403/rails-testing-file-upload-validation-shrine-gem-at-model-spec/44866167#44866167", "title": "Rails: Testing file upload validation (Shrine gem) at model spec", "body": "<p>I would recommend that you test metadata extraction and validation separately. The metadata extraction you need to test with real IOs, but for validation tests you can assign a cached file with the desired metadata which doesn't have to actually exist.</p>\n\n<pre><code>RSpec.describe ImageUploader do\n  def uploaded_file(metadata = {})\n    Shrine.uploaded_file(\n      \"id\"       =&gt; \"123\",\n      \"storage\"  =&gt; \"cache\",\n      \"metadata\" =&gt; {\"mime_type\" =&gt; \"image/jpeg\", \"size\" =&gt; 100}.merge(metadata)\n    )\n  end\n\n  let(:share_image) do\n    FactoryGirl.build(:share_image, image: uploaded_file(metadata).to_json)\n  end\n\n  let(:metadata) { Hash.new }\n\n  describe \"validations\" do\n    before(:each) { share_image.valid? }\n\n    context \"when image is correct\" do\n      it \"passes\" do\n        expect(share_image.errors).to be_empty\n      end\n    end\n\n    context \"when extension is correct but MIME types isn't\" do\n      let(:metadata) { Hash[\"filename\" =&gt; \"image.jpg\", mime_type =&gt; \"text/plain\"] }\n\n      it \"fails\" do\n        expect(share_image.errors[:image].to_s).to include(\"isn't of allowed type\")\n      end\n    end\n\n    context \"when file is larger than 10MB\" do\n      let(:metadata) { Hash[\"size\" =&gt; 11 * 1024 * 1024] }\n\n      it \"fails\" do\n        expect(share_image.errors[:image].to_s).to include(\"too large\")\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1871, "favorite_count": 1, "accepted_answer_id": 44866167, "answer_count": 2, "score": 2, "last_activity_date": 1513046485, "creation_date": 1498683334, "last_edit_date": 1499266736, "question_id": 44812403, "link": "https://stackoverflow.com/questions/44812403/rails-testing-file-upload-validation-shrine-gem-at-model-spec", "title": "Rails: Testing file upload validation (Shrine gem) at model spec", "body": "<p>The following code tests image validation within a model spec in a Rails 4.2 app with RSpec 3.5 and the <a href=\"https://github.com/janko-m/shrine\" rel=\"nofollow noreferrer\">Shrine gem</a> for file uploads. </p>\n\n<p>My questions are:</p>\n\n<ul>\n<li>Can you think of a way to improve the following tests or a better way to test those validations?</li>\n<li>How to improve the speed of the file size validation test? If possible, I'd like to test it without actually having to upload a >10mb file.</li>\n</ul>\n\n<p>Other aspects of the file upload setup are tested in controller and feature specs, which are irrelevant to this question.</p>\n\n<pre><code>RSpec.describe ShareImage, :type =&gt; :model do\n  describe \"#image\", :focus do\n    let(:image_file) do\n      # Could not get fixture_file_upload to work, but that's irrelevant\n      Rack::Test::UploadedFile.new(File.join(\n        ActionController::TestCase.fixture_path, 'files', filename))\n    end\n    let(:share_image) { FactoryGirl.build(:share_image, image: image_file) }\n    before(:each) { share_image.valid? }\n\n    context \"with a valid image file\" do\n      let(:filename) { 'image-valid.jpg' }\n      it \"attaches the image to this record\" do\n        expect(share_image.image.metadata[\"filename\"]).to eq filename\n      end\n    end\n\n    context \"with JPG extension and 'text/plain' media type\" do\n      let(:filename) { 'image-with-text-media-type.jpg' }\n      it \"is invalid\" do\n        expect(share_image.errors[:image].to_s).to include(\"invalid file type\")\n      end\n    end\n\n    # TODO: Refactor the following test (it takes ~50 seconds to run)\n    context \"with a &gt;10mb image file\" do\n      let(:filename) { 'image-11mb.jpg' }\n      it \"is invalid\" do\n        expect(share_image.errors[:image].to_s).to include(\"too large\")\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1498683276, "creation_date": 1498683276, "answer_id": 44812389, "question_id": 44812063, "link": "https://stackoverflow.com/questions/44812063/recipe-compile-error-errnoenoent-no-such-file-or-directory-rb-sysopen/44812389#44812389", "title": "Recipe Compile Error - Errno::ENOENT - No such file or directory @ rb_sysopen", "body": "<p>Check out <a href=\"https://coderanger.net/two-pass/\" rel=\"nofollow noreferrer\">https://coderanger.net/two-pass/</a> for the full explanation, but tl;dr Chef runs in two passes and at the time that <code>File.open</code> runs, the <code>remote_file</code> resource has only be queued and not actually done anything yet. You don't give enough context here on what you're doing with the file data to say what the correct fix is, but some are outlined in my blog post.</p>\n"}], "owner": {"reputation": 465, "user_id": 4590308, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/GaZQX.jpg?s=128&g=1", "display_name": "Paymon Wang-Lotfi", "link": "https://stackoverflow.com/users/4590308/paymon-wang-lotfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1014, "favorite_count": 0, "accepted_answer_id": 44812389, "answer_count": 1, "score": 1, "last_activity_date": 1498683276, "creation_date": 1498682020, "question_id": 44812063, "link": "https://stackoverflow.com/questions/44812063/recipe-compile-error-errnoenoent-no-such-file-or-directory-rb-sysopen", "title": "Recipe Compile Error - Errno::ENOENT - No such file or directory @ rb_sysopen", "body": "<p>First time working with ruby and chef.  I have the following code, the last 4 lines throw the error in the title:</p>\n\n<pre><code>#call bamboo REST to get latest build number, save xml data as xml.txt\nremote_file 'D:/git/chef/cookbooks/java-8-upgrade/xml.txt' do\n  source 'http://REST-API-URL'\n  #enter login credentials for bamboo\n  headers( \"Authorization\"=&gt;\"Basic #{ Base64.encode64(\"username:password\").gsub(\"\\n\", \"\") }\" )\n  action :create    \nend\n\nbegin\nfile = File.open(\"D:/git/chef/cookbooks/java-8-upgrade/xml.txt\", 'rb')\ncontents = file.read\nend\n</code></pre>\n\n<p>What's strange is if I remove the last 4 lines entirely the xml.txt file is created fine, which makes me think that the remote_file call is asynchronous and somehow my begin-end block is being executed before the file has time to download.  Is there a way to wait until the file has downloaded before executing the code?  </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 2, "creation_date": 1498682084, "post_id": 44811928, "comment_id": 76604760, "body": "I there a reason why you don&#39;t want to use <code>[&quot;A&quot;, &quot;B&quot;, &quot;B&quot;, &quot;C&quot;, &quot;c&quot;, &quot;A&quot;, &quot;D&quot;, &quot;D&quot;].uniq</code>?"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 1, "creation_date": 1498682513, "post_id": 44811928, "comment_id": 76604961, "body": "@katafrakt, it will remove <code>A</code>, as I understand OP wants to take element if next isn&#39;t equal to it"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "edited": false, "score": 0, "creation_date": 1498682598, "post_id": 44811928, "comment_id": 76605000, "body": "@katafrakt: The question is  a bit unclear, but it looks like the OP only wants to compact <i>consecutive</i> runs of equal elements."}, {"owner": {"reputation": 172, "user_id": 6831572, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d0bdcbb13d6f5b35393b736e4d030f44?s=128&d=identicon&r=PG&f=1", "display_name": "Zonet", "link": "https://stackoverflow.com/users/6831572/zonet"}, "edited": false, "score": 0, "creation_date": 1498682985, "post_id": 44811928, "comment_id": 76605180, "body": "Yes, because I don&#39;t wish to return only the unique values. I only want the element to be deleted if it is equal to the previous element. In the example you have quoted, I wish to retain both entries equal to &quot;A&quot;."}, {"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "edited": false, "score": 1, "creation_date": 1498686465, "post_id": 44811928, "comment_id": 76606779, "body": "Your method is not working because <code>arr.index(x)</code> will always return the index of the first matching element. Please note my answer for details"}], "answers": [{"comments": [{"owner": {"reputation": 172, "user_id": 6831572, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d0bdcbb13d6f5b35393b736e4d030f44?s=128&d=identicon&r=PG&f=1", "display_name": "Zonet", "link": "https://stackoverflow.com/users/6831572/zonet"}, "edited": false, "score": 0, "creation_date": 1498683333, "post_id": 44812037, "comment_id": 76605373, "body": "That solution is perfect, thank you Alex. I forgot all about <code>with_index</code>.  I don&#39;t want to sound daft, but I&#39;m still not 100% certain why my example didn&#39;t work.  What I thought would happen is:       <i>A != B, so shovel into a;</i>     <i>B == B, so don&#39;t shovel into a;</i>    <i>B != C, so shovel into a.</i>  Do you see what I mean?   And thanks again, all your examples are super useful. :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1498687355, "post_id": 44812037, "comment_id": 76607153, "body": "<a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-delete_if\" rel=\"nofollow noreferrer\">Array#delete_if</a> is the same as <code>Array#reject!</code>, which provides a clue to how your initial method can be changed to avoid mutating <code>arr</code>. :-)"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": true, "score": 3, "last_activity_date": 1498740939, "last_edit_date": 1498740939, "creation_date": 1498681919, "answer_id": 44812037, "question_id": 44811928, "link": "https://stackoverflow.com/questions/44811928/detect-if-the-following-value-in-array-is-a-duplicate/44812037#44812037", "title": "Detect if the following value in array is a duplicate", "body": "<p>First at all, here is simpler solution:</p>\n\n<pre><code>&gt; arr.delete_if.with_index { |e, ind| e == arr[ind+1] }\n#=&gt; [\"A\", \"B\", \"C\", \"c\", \"A\", \"D\"]\n</code></pre>\n\n<p>But, this solution will mutate <code>arr</code>.\nHere are one-line solutions without mutates:</p>\n\n<pre><code>arr.each_with_index.with_object([]) { |(e, ind), res| res &lt;&lt; e if e != arr[ind+1] }\narr.each_with_object([]) { |e, res| res &lt;&lt; e if res.last != e }\n</code></pre>\n\n<p>Your problem in this line: <code>a &lt;&lt; x unless x == arr[following_value]</code>\nYou say: put this <code>element</code> into <code>result</code> if <code>next element</code> isn't equal to it. So, instead, you can say something like: <em>put this element to result if the last element of the result isn't equal to it</em>:</p>\n\n<pre><code>arr.each do |x|\n  a &lt;&lt; x unless a.last == x\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 172, "user_id": 6831572, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d0bdcbb13d6f5b35393b736e4d030f44?s=128&d=identicon&r=PG&f=1", "display_name": "Zonet", "link": "https://stackoverflow.com/users/6831572/zonet"}, "edited": false, "score": 0, "creation_date": 1498686712, "post_id": 44812518, "comment_id": 76606884, "body": "Gabriel, both of your solutions are also great. Additionally, thank you so much for explaining why my method wasn&#39;t working! It was driving me crazy haha. I really appreciate the explanation. +1"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1498690444, "post_id": 44812518, "comment_id": 76608154, "body": "about <code>arr.index(x)</code> - it&#39;s wrong, as you can see, OP define <code>following_value</code> as <code>arr.index(x) + 1</code> and than: <code>x == arr[following_value]</code> :)"}, {"owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1498740656, "post_id": 44812518, "comment_id": 76631368, "body": "@AlexGolubenko <code>arr.index(x)</code> for the first <code>&quot;B&quot;</code> is <code>1</code> so <code>following_value</code> is <code>2</code> (<code>1 + 1</code>). And <code>arr.index(x)</code> for the second <code>&quot;B&quot;</code> is also <code>1</code> so <code>following_value</code> is <code>2</code> (<code>1 + 1</code>) too. As I said <code>arr.index(x)</code> returns index of first object for which block is true, and therefore you can&#39;t use this method in this case - that&#39;s what went wrong with OP method."}], "tags": [], "owner": {"reputation": 10255, "user_id": 1155142, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/c680db41999d478ca34d1a77a470e30d?s=128&d=identicon&r=PG", "display_name": "gabrielhilal", "link": "https://stackoverflow.com/users/1155142/gabrielhilal"}, "is_accepted": false, "score": 2, "last_activity_date": 1498686279, "last_edit_date": 1498686279, "creation_date": 1498683859, "answer_id": 44812518, "question_id": 44811928, "link": "https://stackoverflow.com/questions/44811928/detect-if-the-following-value-in-array-is-a-duplicate/44812518#44812518", "title": "Detect if the following value in array is a duplicate", "body": "<p>I would use <a href=\"https://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-select\" rel=\"nofollow noreferrer\">select</a>, so you could do something like:</p>\n\n<pre><code>a = [\"A\", \"B\", \"B\", \"C\", \"c\", \"A\", \"D\", \"D\"]\n\n# without mutation\nb = a.select.with_index { |e, i| a[i+1] != e }\na #=&gt; [\"A\", \"B\", \"B\", \"C\", \"c\", \"A\", \"D\", \"D\"]\nb #=&gt; [\"A\", \"B\", \"C\", \"c\", \"A\", \"D\"]\n\n# with mutation\na.select!.with_index { |e, i| a[i+1] != e }\na #=&gt; [\"A\", \"B\", \"C\", \"c\", \"A\", \"D\"]\n</code></pre>\n\n<p>BTW your method is not working because <code>arr.index(x)</code> <a href=\"https://apidock.com/ruby/Array/index\" rel=\"nofollow noreferrer\">returns index of first object for which block is true</a>:</p>\n\n<pre><code>arr = [\"A\", \"B\", \"B\", \"C\", \"c\", \"A\", \"D\", \"D\"]\narr.each do |x|\n  puts \"#{x} has index #{arr.index(x)}\"\nend\nA has index 0\nB has index 1\nB has index 1 # you were expecting 2\nC has index 3\nc has index 4\nA has index 0 # you were expecting 5\nD has index 6\nD has index 6 # you were expecting 7\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 1, "last_activity_date": 1498687555, "creation_date": 1498687555, "answer_id": 44813285, "question_id": 44811928, "link": "https://stackoverflow.com/questions/44811928/detect-if-the-following-value-in-array-is-a-duplicate/44813285#44813285", "title": "Detect if the following value in array is a duplicate", "body": "<p>Here's a succinct alternative:</p>\n\n<pre><code>arr = [\"A\", \"B\", \"B\", \"C\", \"c\", \"A\", \"D\", \"D\"]\n\narr.chunk(&amp;:itself).map(&amp;:first)\n# =&gt; [\"A\", \"B\", \"C\", \"c\", \"A\", \"D\"]\n</code></pre>\n\n<p>See it on repl.it: <a href=\"https://repl.it/JGV4/1\" rel=\"nofollow noreferrer\">https://repl.it/JGV4/1</a></p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1498865331, "last_edit_date": 1498865331, "creation_date": 1498690468, "answer_id": 44813791, "question_id": 44811928, "link": "https://stackoverflow.com/questions/44811928/detect-if-the-following-value-in-array-is-a-duplicate/44813791#44813791", "title": "Detect if the following value in array is a duplicate", "body": "<p>Derived from <a href=\"https://stackoverflow.com/a/44788219/5101493\" title=\"How do I find the first two consecutive elements in my array of numbers?\">this</a> answer by <a href=\"https://stackoverflow.com/users/256970,\" title=\"The Legend\">Cary Swoveland</a>:</p>\n\n<pre><code>def remove_consecs ar\n  enum = ar.each\n  loop.with_object([]) do |_, arr|\n    curr = enum.next\n    nxt = arr.last || enum.peek\n    arr &lt;&lt; curr if curr != nxt\n  end\nend\n\nremove_consecs [\"A\", \"B\", \"B\", 'D', \"C\", \"c\", \"A\", \"D\", \"D\"]\n#=&gt; [\"A\", \"B\", \"D\", \"C\", \"c\", \"A\", \"D\"]\n</code></pre>\n"}], "owner": {"reputation": 172, "user_id": 6831572, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/d0bdcbb13d6f5b35393b736e4d030f44?s=128&d=identicon&r=PG&f=1", "display_name": "Zonet", "link": "https://stackoverflow.com/users/6831572/zonet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "accepted_answer_id": 44812037, "answer_count": 4, "score": 0, "last_activity_date": 1498865331, "creation_date": 1498681444, "last_edit_date": 1498683961, "question_id": 44811928, "link": "https://stackoverflow.com/questions/44811928/detect-if-the-following-value-in-array-is-a-duplicate", "title": "Detect if the following value in array is a duplicate", "body": "<p>I'm looking to make a method which detects if the following value in an array is a duplicate, and deletes it if so. It should work for both strings and integers.</p>\n\n<p>For example, given the Array: </p>\n\n<pre><code>arr = [\"A\", \"B\", \"B\", \"C\", \"c\", \"A\", \"D\", \"D\"]\n</code></pre>\n\n<p>Return:</p>\n\n<pre><code>arr = [\"A\", \"B\", \"C\", \"c\", \"A\", \"D\"]\n</code></pre>\n\n<p>I tried creating an empty Array <code>a</code>, and shovelling the values in, providing the following value was not equal to the current one. I attempted this like so:</p>\n\n<pre><code>arr.each do |x|\n  following_value = arr.index(x) + 1\n  a &lt;&lt; x unless x == arr[following_value]\nend\n</code></pre>\n\n<p>Unfortunately, instead of shovelling one of the duplicate values into the array, it shovelled neither.</p>\n\n<pre><code>arr = [\"A\", \"C\", \"c\", \"A\"] \n</code></pre>\n\n<p>Can anybody help? Bonus points for telling me exactly what went wrong with my method.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "shopify"], "answers": [{"comments": [{"owner": {"reputation": 2473, "user_id": 5481714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8258ffa13cee232e0da6c87f5d1bb32f?s=128&d=identicon&r=PG&f=1", "display_name": "kawnah", "link": "https://stackoverflow.com/users/5481714/kawnah"}, "edited": false, "score": 0, "creation_date": 1498773654, "post_id": 44817580, "comment_id": 76651877, "body": "Oh I see got it!"}], "tags": [], "owner": {"reputation": 631, "user_id": 8157532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bde8f29e12331c4a81c873acfc77cc?s=128&d=identicon&r=PG&f=1", "display_name": "ucpuzz", "link": "https://stackoverflow.com/users/8157532/ucpuzz"}, "is_accepted": true, "score": 1, "last_activity_date": 1498716805, "creation_date": 1498716805, "answer_id": 44817580, "question_id": 44811615, "link": "https://stackoverflow.com/questions/44811615/shopify-ruby-prevent-a-discount-from-being-used-unless-its-a-specific-singula/44817580#44817580", "title": "Shopify/Ruby - prevent a discount from being used unless it&#39;s a specific singular code", "body": "<p>Your case syntax is incorrect, case is used like below:</p>\n\n<pre><code># a is variable, if a contains val1 it goes to first when, if val2 it goes to second when, if neithr it goes to else\ncase a\nwhen 'val1'\nwhen 'val2'\nelse\nend\n</code></pre>\n\n<p>Other ways of using case is listed <a href=\"https://stackoverflow.com/questions/5114584/how-to-use-ruby-case-when-with-inequalities\">here</a></p>\n\n<p>Applying correct case syntax to first approach:</p>\n\n<pre><code>productid = 1234567890\n\nInput.cart.line_items.each do |line_item|\n product = line_item.variant.product\n puts product.id\n next if product.gift_card?\n next unless product.id == ma770id\n case Input.cart.discount_code\n when 'yesdiscount'\n      #code here if yesdiscount is discount_code\n else \n  Input.cart.discount_code.reject({message: \"Cannot be used with this product\"})\n end\nend\n</code></pre>\n"}], "owner": {"reputation": 2473, "user_id": 5481714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8258ffa13cee232e0da6c87f5d1bb32f?s=128&d=identicon&r=PG&f=1", "display_name": "kawnah", "link": "https://stackoverflow.com/users/5481714/kawnah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 768, "favorite_count": 0, "accepted_answer_id": 44817580, "answer_count": 1, "score": 1, "last_activity_date": 1498716805, "creation_date": 1498680249, "question_id": 44811615, "link": "https://stackoverflow.com/questions/44811615/shopify-ruby-prevent-a-discount-from-being-used-unless-its-a-specific-singula", "title": "Shopify/Ruby - prevent a discount from being used unless it&#39;s a specific singular code", "body": "<p>I currently have a working Shopify/Ruby script that blocks discount codes if a certain product is in the cart. It looks like this:</p>\n\n<pre><code>productid = 1234567890\n\nInput.cart.line_items.each do |line_item|\n  product = line_item.variant.product\n  puts product.id\n  next if product.gift_card?\n  next unless product.id == productid\n  case Input.cart.discount_code\n  when CartDiscount::Percentage\n    Input.cart.discount_code.reject({message: \"Cannot be used with This Product\"})\n  when CartDiscount::FixedAmount\n    Input.cart.discount_code.reject({message: \"Cannot be used with this product\"})\n  when CartDiscount::Shipping\n    Input.cart.discount_code.reject({message: \"Cannot be used with this product\"})\n  end\nend\n\nOutput.cart = Input.cart\n</code></pre>\n\n<p>I want to change it now to still deny using discount codes on this given product, but allow it if a very specific discount code is used. I tried the following 2 approaches:</p>\n\n<h1>1:</h1>\n\n<pre><code>productid = 1234567890\n\nInput.cart.line_items.each do |line_item|\n  product = line_item.variant.product\n  puts product.id\n  next if product.gift_card?\n  next unless product.id == ma770id\n  case Input.cart.discount_code\n  when cart.discount_code != 'yesdiscount'\n    Input.cart.discount_code.reject({message: \"Cannot be used with this product\"})\n  end\nend\n\n\nOutput.cart = Input.cart\n</code></pre>\n\n<h1>2:</h1>\n\n<pre><code>productid = 1234567890\n\nInput.cart.line_items.each do |line_item|\n  product = line_item.variant.product\n  puts product.id\n  next if product.gift_card?\n  next unless product.id == productid\n  case Input.cart.discount_code != 'yesdiscount'\n  when CartDiscount::Percentage\n    Input.cart.discount_code.reject({message: \"Cannot be used with This Product\"})\n  when CartDiscount::FixedAmount\n    Input.cart.discount_code.reject({message: \"Cannot be used with this product\"})\n  when CartDiscount::Shipping\n    Input.cart.discount_code.reject({message: \"Cannot be used with this product\"})\n  end\nend\n\nOutput.cart = Input.cart\n</code></pre>\n\n<p>When I insert a code that is <em>not</em> <code>yesdiscount</code> the discount still applies even though I have a check to see if the code is not equal to the approved code. </p>\n\n<p>My first thought was syntax, but have confirmed that the not equal operator is in fact <code>!=</code>. What is logically happening here that is causing discounts to accept, even though I'm checking for it to not be the one I want to work?</p>\n"}, {"tags": ["html", "ruby", "postgresql", "sinatra", "pgadmin"], "comments": [{"owner": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 1, "creation_date": 1498676439, "post_id": 44810513, "comment_id": 76601544, "body": "As the documentation states, UPDATE does not use AND between values. <code>SET some=1, other=2, third=3...</code>"}, {"owner": {"reputation": 33, "user_id": 7753034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd5b683446fe579dd853e4e56b6d72e5?s=128&d=identicon&r=PG&f=1", "display_name": "athill16", "link": "https://stackoverflow.com/users/7753034/athill16"}, "reply_to_user": {"reputation": 26680, "user_id": 1806780, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/NCB41.jpg?s=128&g=1", "display_name": "Sami Kuhmonen", "link": "https://stackoverflow.com/users/1806780/sami-kuhmonen"}, "edited": false, "score": 0, "creation_date": 1498677739, "post_id": 44810513, "comment_id": 76602263, "body": "@SamiKuhmonen that works perfectly. Thank you!"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1498678045, "post_id": 44810513, "comment_id": 76602429, "body": "Please please please do not do this in such a manner what would you do if i placed this in the <i>&quot;HTML input field&quot;</i> for fj_description   <code>&quot;&#39;; DELETE FROM products;--</code>"}, {"owner": {"reputation": 33, "user_id": 7753034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd5b683446fe579dd853e4e56b6d72e5?s=128&d=identicon&r=PG&f=1", "display_name": "athill16", "link": "https://stackoverflow.com/users/7753034/athill16"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1498678505, "post_id": 44810513, "comment_id": 76602676, "body": "@engineersmnky the only people able to access the page that you can do that are administrators. It is not reachable by a customer."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1498678789, "post_id": 44810513, "comment_id": 76602825, "body": "@athill16 that should not matter security is not to protect from customers it is to protect the data. Maybe an administrator is having a bad day or maybe he doesn&#39;t know SQL and some one asks for their personalization to read &quot;MY Names&#39;; DROP TABLE products--&quot; <b>NEVER TRUST USER INPUT</b> regardless of the user"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 7753034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd5b683446fe579dd853e4e56b6d72e5?s=128&d=identicon&r=PG&f=1", "display_name": "athill16", "link": "https://stackoverflow.com/users/7753034/athill16"}, "edited": false, "score": 0, "creation_date": 1498677792, "post_id": 44810559, "comment_id": 76602298, "body": "Thanks, I changed the &quot;AND&#39;s&quot; to commas without changing the quotes and it was all I needed to fix it."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 33, "user_id": 7753034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd5b683446fe579dd853e4e56b6d72e5?s=128&d=identicon&r=PG&f=1", "display_name": "athill16", "link": "https://stackoverflow.com/users/7753034/athill16"}, "edited": false, "score": 0, "creation_date": 1498678187, "post_id": 44810559, "comment_id": 76602504, "body": "I&#39;ve edited the answer to clarify it, thanks @athill16."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1498678090, "last_edit_date": 1498678090, "creation_date": 1498676442, "answer_id": 44810559, "question_id": 44810513, "link": "https://stackoverflow.com/questions/44810513/sql-statement-to-update-multiple-columns-with-multiple-where-conditions/44810559#44810559", "title": "SQL Statement to update multiple columns with multiple where conditions", "body": "<p>Try using comma instead <code>AND</code>:</p>\n\n<pre><code>\"UPDATE products \n SET product_description = '#{fj_description}',\n   personalization = '#{fj_personalization}',\n   product_photo = '#{fj_product_photo}',\n   order_information = '#{fj_order_information}' \n WHERE campaign_name = '#{camp_name}' \n AND product_type = 'fleecejacket'\"\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 7753034, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/dd5b683446fe579dd853e4e56b6d72e5?s=128&d=identicon&r=PG&f=1", "display_name": "athill16", "link": "https://stackoverflow.com/users/7753034/athill16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 44810559, "answer_count": 1, "score": 1, "last_activity_date": 1498678090, "creation_date": 1498676282, "question_id": 44810513, "link": "https://stackoverflow.com/questions/44810513/sql-statement-to-update-multiple-columns-with-multiple-where-conditions", "title": "SQL Statement to update multiple columns with multiple where conditions", "body": "<p>So I have the following SQL statement:     </p>\n\n<pre><code>db.exec(\"UPDATE products SET product_description = '#{fj_description}' AND personalization = '#{fj_personalization}' AND product_photo = '#{fj_product_photo}' AND order_information = '#{fj_order_information}' WHERE campaign_name = '#{camp_name}' AND product_type = 'fleecejacket'\")\n</code></pre>\n\n<p>All of the variables are returning the correct text that's retrieved from an HTML input field, so it seems to be something wrong with the sql statement. When I try to update the database, I get this error:</p>\n\n<pre><code>PG::InvalidTextRepresentation at /update_products\nERROR: invalid input syntax for type boolean: \"soft, midweight fleece\" LINE 1: UPDATE products SET product_description = 'soft, midweight f... ^\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498717978, "post_id": 44810378, "comment_id": 76615671, "body": "Because the logger you create in your tests is ignored. Nobody uses it. Model writes to its own logger."}], "answers": [{"tags": [], "owner": {"reputation": 631, "user_id": 8157532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bde8f29e12331c4a81c873acfc77cc?s=128&d=identicon&r=PG&f=1", "display_name": "ucpuzz", "link": "https://stackoverflow.com/users/8157532/ucpuzz"}, "is_accepted": true, "score": 1, "last_activity_date": 1498717753, "creation_date": 1498717753, "answer_id": 44817831, "question_id": 44810378, "link": "https://stackoverflow.com/questions/44810378/why-does-the-rails-logger-write-to-the-same-log-file-in-development-and-test/44817831#44817831", "title": "Why does the Rails.logger write to the same log file in development and test?", "body": "<p>This line \"Logger.new('log/go_job_errors.log')\" in the model instructs to log model errors to this file 'log/go_job_errors.log'. Irrespective of environment, the model errors are always logged here 'log/go_job_errors.log'</p>\n\n<p>In your tests, you start with this line 'Logger.new('log/go_job_errors_test.log')', this line creates a new log file. And when your test calls the model, the model calls 'log_error(code_location)', but that method only logs to 'log/go_job_errors.log'.</p>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 453, "favorite_count": 0, "accepted_answer_id": 44817831, "answer_count": 1, "score": 0, "last_activity_date": 1498717753, "creation_date": 1498675796, "last_edit_date": 1498676546, "question_id": 44810378, "link": "https://stackoverflow.com/questions/44810378/why-does-the-rails-logger-write-to-the-same-log-file-in-development-and-test", "title": "Why does the Rails.logger write to the same log file in development and test?", "body": "<p>I have the following model test:</p>\n\n<pre><code>  describe 'Checking for errors' do\n    it 'should check for any jobs that have errors and log them' do\n      logger = Logger.new('log/go_job_errors_test.log')\n      code_location = create(:code_location_with_best_code_set)\n      code_location.jobs &lt;&lt; create(:complete_job, status: 3, exception: 'I failed to complete')\n      CodeLocationJobFeeder.create(code_location_id: code_location.id, url: code_location.repository.url, status: 2)\n      CodeLocationJobFeeder.check_for_errors(1)\n      logger.expects(:info).with(\"I failed to complete\")\n    end\n</code></pre>\n\n<p>With the following model code:</p>\n\n<pre><code>def check_for_errors(amount)\n  processed.limit(amount).each do |code_location_job_feeder|\n    code_location = CodeLocation.includes(:jobs).find(code_location_job_feeder.code_location_id)\n    log_error(code_location) unless code_location.jobs.last.status != 3\n  end\nend\n\nprivate\n\ndef log_error(code_location)\n  logger = Logger.new('log/go_job_errors.log')\n  failed_job = code_location.jobs.last\n  logger.info do\n    \"Job #{failed_job.id} with code location: #{code_location.id} failed. Exception: #{failed_job.exception}\"\n  end\nend\n</code></pre>\n\n<p>The gist of the test is that when I execute <code>CodeLocationJobFeeder.check_for_errors</code> I'll have a separate log file that will tell me all the info that I want concerning some errors. This works fine in development and I get the file that I want. However when I run the test, I get output in both <code>log/go_job_errors_test.log</code> and <code>log/go_job_errors.log</code> with the following output:</p>\n\n<pre><code>log/go_job_errors.log\n\n[2017-06-28T18:23:46.164141 #29604]  INFO -- : Job 40 with code location: 93 failed. Exception: I failed to complete\n</code></pre>\n\n<p>This is the content that I want but in the wrong file. Here is the second file:</p>\n\n<pre><code> log/go_job_error_test.log\n\n # Logfile created on 2017-06-28 18:40:59 +0000 by logger.rb/47272\n</code></pre>\n\n<p>The correct file with the wrong content.</p>\n\n<p>I've been trying to apply this s.o. answer <a href=\"https://stackoverflow.com/questions/11770552/how-to-get-rails-logger-printing-to-the-console-stdout-when-running-rspec/32628272#32628272\">Logger test</a> but it doesn't seem to be working too great. Can someone help point out what I'm doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv", "model", "mapping"], "comments": [{"owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "edited": false, "score": 0, "creation_date": 1498679438, "post_id": 44810277, "comment_id": 76603187, "body": "if the columns match the Student class attributes, why do you need all the columns and why do you need the columns in order?"}, {"owner": {"reputation": 39, "user_id": 7544033, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c56ecc9ed4b392bcb98d070b155a21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Reef Rashid", "link": "https://stackoverflow.com/users/7544033/reef-rashid"}, "reply_to_user": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "edited": false, "score": 0, "creation_date": 1498679546, "post_id": 44810277, "comment_id": 76603246, "body": "The attribute of the student might have the name &quot;major&quot; but the column&#39;s name is &quot;Undergraduate major&quot;, so it can&#39;t recognize the field &quot;Undergraduate major&quot; because it only knows the field &quot;major&quot;"}, {"owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "edited": false, "score": 0, "creation_date": 1498679620, "post_id": 44810277, "comment_id": 76603297, "body": "you are right, sorry"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 7544033, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c56ecc9ed4b392bcb98d070b155a21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Reef Rashid", "link": "https://stackoverflow.com/users/7544033/reef-rashid"}, "edited": false, "score": 0, "creation_date": 1498681363, "post_id": 44811524, "comment_id": 76604349, "body": "Hi! Thanks, I think this solution should work, but I&#39;m running into the following error: &quot;Unknown attribute &quot; for Student&quot;.  It seems like it&#39;s reading &quot; as an attribute, but the csv file has not &quot; as an attribute.  Any idea what could be going on?"}, {"owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "reply_to_user": {"reputation": 39, "user_id": 7544033, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c56ecc9ed4b392bcb98d070b155a21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Reef Rashid", "link": "https://stackoverflow.com/users/7544033/reef-rashid"}, "edited": false, "score": 0, "creation_date": 1498682131, "post_id": 44811524, "comment_id": 76604780, "body": "I think you are mapping a column to an attribute that does not exist in Student"}, {"owner": {"reputation": 39, "user_id": 7544033, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c56ecc9ed4b392bcb98d070b155a21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Reef Rashid", "link": "https://stackoverflow.com/users/7544033/reef-rashid"}, "edited": false, "score": 0, "creation_date": 1498682488, "post_id": 44811524, "comment_id": 76604955, "body": "Yeah, I just realized that, thanks!  Can you explain to me how this would behave if there was an attribute that exists in some csv files but not others.  Let&#39;s say some csv file include the attribute &quot;minor&quot; and some csv files have this column while others don&#39;t.  For the files that do not have this column, will the &quot;minor&quot; attribute just be set to null?"}, {"owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "reply_to_user": {"reputation": 39, "user_id": 7544033, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c56ecc9ed4b392bcb98d070b155a21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Reef Rashid", "link": "https://stackoverflow.com/users/7544033/reef-rashid"}, "edited": false, "score": 0, "creation_date": 1498682745, "post_id": 44811524, "comment_id": 76605073, "body": "Yes, the attributes you don&#39;t have in te csv will be set to nil (or its default value). The order is not important. You only need to have a MAP const with all the possibilities."}, {"owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "reply_to_user": {"reputation": 39, "user_id": 7544033, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c56ecc9ed4b392bcb98d070b155a21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Reef Rashid", "link": "https://stackoverflow.com/users/7544033/reef-rashid"}, "edited": false, "score": 0, "creation_date": 1498751004, "post_id": 44811524, "comment_id": 76639680, "body": "If my answer solved your problem, please check it as the correct answer."}, {"owner": {"reputation": 7071, "user_id": 549010, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/181219cd20b8036ef8ec45b94aed6474?s=128&d=identicon&r=PG", "display_name": "Roger", "link": "https://stackoverflow.com/users/549010/roger"}, "edited": false, "score": 1, "creation_date": 1525157172, "post_id": 44811524, "comment_id": 87241920, "body": "Isn&#39;t this very slow, if you need to do 100K records ??"}], "tags": [], "owner": {"reputation": 4206, "user_id": 1329461, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/meIoL.png?s=128&g=1", "display_name": "Leantraxxx", "link": "https://stackoverflow.com/users/1329461/leantraxxx"}, "is_accepted": false, "score": 1, "last_activity_date": 1498679904, "creation_date": 1498679904, "answer_id": 44811524, "question_id": 44810277, "link": "https://stackoverflow.com/questions/44810277/mapping-csv-columns-to-model/44811524#44811524", "title": "Mapping csv columns to model?", "body": "<p>You can do something like this to map the columns with attributes:</p>\n\n<pre><code>MAP = {\n  \"Undegraduate Major\" =&gt; :major,\n  \"First Name\" =&gt; :first_name,\n  \"Last Name\" =&gt; :last_name,\n  \"Class Year\" =&gt; :class_year,\n  \"Undergraduate Minor\" =&gt; :minor,\n  \"Major\" =&gt; :major,\n  \"Minor\" =&gt; :minor,\n  \"Class_year\" =&gt; :class_year\n}\n\nCSV.foreach(file.path, headers: true) do |row|\n  data = {}\n\n  row.to_hash.each do |k, v|\n    key = MAP[k]\n    data[key] = v\n  end\n\n  Student.create! data\nend\n</code></pre>\n"}], "owner": {"reputation": 39, "user_id": 7544033, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c56ecc9ed4b392bcb98d070b155a21bb?s=128&d=identicon&r=PG&f=1", "display_name": "Reef Rashid", "link": "https://stackoverflow.com/users/7544033/reef-rashid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1185, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498679904, "creation_date": 1498675423, "question_id": 44810277, "link": "https://stackoverflow.com/questions/44810277/mapping-csv-columns-to-model", "title": "Mapping csv columns to model?", "body": "<p>I'm creating a database of students and have the following code to read a csv file with headers and store each of the non-header lines as a student object.  </p>\n\n<pre><code>class Student &lt; ApplicationRecord\n     def self.import(file)\n          CSV.foreach(file.path, headers: true) do |row|\n                Student.create! row.to_hash\n          end\n     end\nend \n</code></pre>\n\n<p>My issue is that the csv files I need to import can be of different formats.  Some might have headers organized like: </p>\n\n<p>Undegraduate Major | First Name | Last Name |  Class Year |  Undergraduate Minor</p>\n\n<p>First_name  |  Last_name  | Major  | Minor </p>\n\n<p>First_name | Last_name | Class_year</p>\n\n<p>As you can see, not all of the fields might be present, and they definitely might not be in the same order.  How can I deal with this?  </p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1498671972, "post_id": 44809332, "comment_id": 76598890, "body": "Does the string include the <code>&quot;</code> character?"}, {"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 2, "creation_date": 1498672467, "post_id": 44809332, "comment_id": 76599183, "body": "In general, parsing XML should be done with an XML parser. Regex can be used for quick and dirty solutions, but be advised that they can be tripped up by otherwise valid XML."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1498673102, "post_id": 44809332, "comment_id": 76599548, "body": "<a href=\"https://stackoverflow.com/questions/1732348/regex-match-open-tags-except-xhtml-self-contained-tags/1732454#1732454\">Don&#39;t parse XML with regular expressions</a>!"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1498673375, "post_id": 44809332, "comment_id": 76599712, "body": "<a href=\"https://blog.engineyard.com/2010/getting-started-with-nokogiri\" rel=\"nofollow noreferrer\">blog.engineyard.com/2010/getting-started-with-nokogiri</a>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1498675243, "post_id": 44809332, "comment_id": 76600793, "body": "see this <a href=\"https://stackoverflow.com/questions/10799136/get-text-directly-inside-a-tag-in-nokogiri\">question</a> also. Not sure if this is good code but you can do <code>require &#39;nokogiri&#39;; Nokogiri::XML(str).at_xpath(&#39;planKey&#47;key&#47;text()&#39;).to_s #=&gt; &quot;OR-J8U&quot;</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1498684612, "post_id": 44809332, "comment_id": 76605952, "body": "<code>What is the regex I have to write to get the center part OR-J8U?</code> What do you mean by the center part? Like, which center part do you mean <code>&quot;&lt;planKey&gt;asdf&lt;key&gt;OR-J8U&lt;asdf&gt;asdf&lt;&#47;asdf&gt;asdf&lt;&#47;key&gt;&lt;&#47;planKe&zwnj;&#8203;y&gt;&quot;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 2, "last_activity_date": 1506228007, "last_edit_date": 1506228007, "creation_date": 1498672036, "answer_id": 44809381, "question_id": 44809332, "link": "https://stackoverflow.com/questions/44809332/using-a-ruby-regular-expression/44809381#44809381", "title": "Using a ruby regular expression", "body": "<p>Use the following:</p>\n\n<pre><code>str = \"&lt;planKey&gt;&lt;key&gt;OR-J8U&lt;/key&gt;&lt;/planKey&gt;\"\nstr[/(?&lt;=\\&lt;key\\&gt;).*(?=\\&lt;\\/key\\&gt;)/]\n #=&gt; \"OR-J8U\" \n</code></pre>\n\n<p>This captures anything in between opening and closing 'key' tags using lookahead and lookbehinds</p>\n"}, {"tags": [], "owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "is_accepted": false, "score": 1, "last_activity_date": 1498672866, "creation_date": 1498672866, "answer_id": 44809581, "question_id": 44809332, "link": "https://stackoverflow.com/questions/44809332/using-a-ruby-regular-expression/44809581#44809581", "title": "Using a ruby regular expression", "body": "<p>If you want to get the string <code>OR-J8U</code> then you could simply use that string in the regular expression; the <code>-</code> character has to be escaped:</p>\n\n<pre><code>/OR\\-J8U/\n</code></pre>\n\n<hr>\n\n<p>Though, I believe you want any string that is enclosed within <code>&lt;planKey&gt;&lt;key&gt;</code> and <code>&lt;/key&gt;&lt;/planKey&gt;</code>. In that case ice's answer is useful if you allow for an empty string:</p>\n\n<pre><code>/(?&lt;=\\&lt;key\\&gt;).*(?=\\&lt;\\/key\\&gt;)/\n</code></pre>\n\n<p>If you don't allow for an empty string, replace the <code>*</code> with <code>+</code>:</p>\n\n<pre><code>/(?&lt;=\\&lt;key\\&gt;).*(?=\\&lt;\\/key\\&gt;)/\n</code></pre>\n\n<hr>\n\n<p>If you prefer a more general approach (any string enclosed within any tags), then I believe the common opinion is not to use a regular expression. Instead consider using an HTML parser. On SO you can find some questions and answers in that regard.</p>\n"}], "owner": {"reputation": 465, "user_id": 4590308, "user_type": "registered", "accept_rate": 23, "profile_image": "https://i.stack.imgur.com/GaZQX.jpg?s=128&g=1", "display_name": "Paymon Wang-Lotfi", "link": "https://stackoverflow.com/users/4590308/paymon-wang-lotfi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "answer_count": 2, "score": -4, "last_activity_date": 1506228007, "creation_date": 1498671846, "question_id": 44809332, "link": "https://stackoverflow.com/questions/44809332/using-a-ruby-regular-expression", "title": "Using a ruby regular expression", "body": "<p>I'm completely new to Ruby so I was just wondering if someone could help me out.</p>\n\n<p>I have the following String:</p>\n\n<pre><code>\"&lt;planKey&gt;&lt;key&gt;OR-J8U&lt;/key&gt;&lt;/planKey&gt;\"\n</code></pre>\n\n<p>What is the regex I have to write to get the center part OR-J8U?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "edited": false, "score": 0, "creation_date": 1498672048, "post_id": 44809277, "comment_id": 76598938, "body": "is the file Task.rb exists in app/model folder?"}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1498672163, "post_id": 44809277, "comment_id": 76599009, "body": "Do you have change you <code>Task</code> model?"}, {"owner": {"reputation": 1551, "user_id": 5007300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d11148e73509997d34aca3951e1e62db?s=128&d=identicon&r=PG&f=1", "display_name": "myhouse", "link": "https://stackoverflow.com/users/5007300/myhouse"}, "edited": false, "score": 0, "creation_date": 1498679770, "post_id": 44809277, "comment_id": 76603384, "body": "Yes I have a task model."}, {"owner": {"reputation": 1551, "user_id": 5007300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d11148e73509997d34aca3951e1e62db?s=128&d=identicon&r=PG&f=1", "display_name": "myhouse", "link": "https://stackoverflow.com/users/5007300/myhouse"}, "reply_to_user": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "edited": false, "score": 0, "creation_date": 1498710050, "post_id": 44809277, "comment_id": 76612716, "body": "@Alejandro Montilla No. However, for some reason it started working again. I change some JavaScript stuff and I did a <code>bundle exec rake assets:precompile RAILS_ENV=production</code> and then I restarted passenger and the problem came back."}, {"owner": {"reputation": 3004, "user_id": 5830036, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/B2b06.png?s=128&g=1", "display_name": "Mayur Shah", "link": "https://stackoverflow.com/users/5830036/mayur-shah"}, "edited": false, "score": 0, "creation_date": 1498712429, "post_id": 44809277, "comment_id": 76613377, "body": "@myhouse try this one <code>Rails.application.eager_load!</code>"}, {"owner": {"reputation": 1551, "user_id": 5007300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d11148e73509997d34aca3951e1e62db?s=128&d=identicon&r=PG&f=1", "display_name": "myhouse", "link": "https://stackoverflow.com/users/5007300/myhouse"}, "edited": false, "score": 0, "creation_date": 1498714187, "post_id": 44809277, "comment_id": 76613972, "body": "I found the solution by doing &#39;spring stop&#39;"}], "answers": [{"comments": [{"owner": {"reputation": 1551, "user_id": 5007300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d11148e73509997d34aca3951e1e62db?s=128&d=identicon&r=PG&f=1", "display_name": "myhouse", "link": "https://stackoverflow.com/users/5007300/myhouse"}, "edited": false, "score": 0, "creation_date": 1498679829, "post_id": 44809410, "comment_id": 76603430, "body": "I have this. I am using rails 5.1"}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 1, "last_activity_date": 1498672132, "last_edit_date": 1592644375, "creation_date": 1498672132, "answer_id": 44809410, "question_id": 44809277, "link": "https://stackoverflow.com/questions/44809277/cannot-load-my-model-in-console-rails/44809410#44809410", "title": "Cannot load my model in console rails", "body": "<p>Create a file <code>task.rb</code> in <code>app/models</code> folder:</p>\n<h1>app/model/task.rb</h1>\n<pre><code>class Task &lt; ActiveRecord::Base\n  \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1551, "user_id": 5007300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d11148e73509997d34aca3951e1e62db?s=128&d=identicon&r=PG&f=1", "display_name": "myhouse", "link": "https://stackoverflow.com/users/5007300/myhouse"}, "edited": false, "score": 0, "creation_date": 1498710181, "post_id": 44812257, "comment_id": 76612749, "body": "I just reply to Alejandro. Yes, my model is behaving weird. I restarted the application and for some reason the console cannot read the model but the page can."}], "tags": [], "owner": {"reputation": 3868, "user_id": 2482094, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/81a0ecf0c7d4d429fafbdbbba490f38c?s=128&d=identicon&r=PG", "display_name": "Piotr Galas", "link": "https://stackoverflow.com/users/2482094/piotr-galas"}, "is_accepted": false, "score": 0, "last_activity_date": 1498682739, "creation_date": 1498682739, "answer_id": 44812257, "question_id": 44809277, "link": "https://stackoverflow.com/questions/44809277/cannot-load-my-model-in-console-rails/44812257#44812257", "title": "Cannot load my model in console rails", "body": "<p>That mean for some reason rails did not load file where your model(class name) live.</p>\n\n<p>If your \"page\" work I suppose that you change something  in application but not restart your production(production work on old code). @Alejandro Montilla  ask about changes but you didn answer</p>\n"}, {"tags": [], "owner": {"reputation": 1551, "user_id": 5007300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d11148e73509997d34aca3951e1e62db?s=128&d=identicon&r=PG&f=1", "display_name": "myhouse", "link": "https://stackoverflow.com/users/5007300/myhouse"}, "is_accepted": true, "score": 15, "last_activity_date": 1498842804, "last_edit_date": 1498842804, "creation_date": 1498711337, "answer_id": 44816491, "question_id": 44809277, "link": "https://stackoverflow.com/questions/44809277/cannot-load-my-model-in-console-rails/44816491#44816491", "title": "Cannot load my model in console rails", "body": "<p>I finally found out the solution for the problem. It was Spring causing the issue. I provided the link to the StackOverflow question down below.</p>\n\n<p>I had to run in the terminal:</p>\n\n<pre><code>spring stop\n</code></pre>\n\n<p>Now when I start my console it can read my models.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/39438109/rails-console-in-production-nameerror-uninitialized-constant\">The link I found for solution is here</a></p>\n"}], "owner": {"reputation": 1551, "user_id": 5007300, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d11148e73509997d34aca3951e1e62db?s=128&d=identicon&r=PG&f=1", "display_name": "myhouse", "link": "https://stackoverflow.com/users/5007300/myhouse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1934, "favorite_count": 0, "accepted_answer_id": 44816491, "answer_count": 3, "score": 3, "last_activity_date": 1498842804, "creation_date": 1498671679, "last_edit_date": 1498842647, "question_id": 44809277, "link": "https://stackoverflow.com/questions/44809277/cannot-load-my-model-in-console-rails", "title": "Cannot load my model in console rails", "body": "<p>I tried to view what is on my Tasks table and all of the sudden I am now getting a <code>uninitialized constant</code> error. I cannot think why this is happening. The page is working fine. By the way, I do have a task.rb in my model.</p>\n\n<pre><code>server@server:~/www/railsapp/$ rails c production\nRunning via Spring preloader in process 27137\nLoading production environment (Rails 5.1.1)\nirb(main):001:0&gt; ActiveRecord::Base.connection.tables\n   (0.3ms)  SET NAMES utf8,  @@SESSION.sql_mode = CONCAT(CONCAT(@@sql_mode, ',STRICT_ALL_TABLES'), ',NO_AUTO_VALUE_ON_ZERO'),  @@SESSION.sql_auto_is_null = 0, @@SESSION.wait_timeout = 2147483\n=&gt; [\"ar_internal_metadata\", \"schema_migrations\", \"tasks\", \"users\"]\nirb(main):002:0&gt; Task.all\nNameError: uninitialized constant Task\n    from (irb):2\nirb(main):003:0&gt; \n</code></pre>\n\n<p><b>I posted the solution for my problem below</b></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "date", "localdate"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 8054234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mbQ3p.png?s=128&g=1", "display_name": "Dando Mando Nogger", "link": "https://stackoverflow.com/users/8054234/dando-mando-nogger"}, "edited": false, "score": 0, "creation_date": 1498672250, "post_id": 44809270, "comment_id": 76599064, "body": "it worked, but how do I add hours and minutes to it?"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 137, "user_id": 8054234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mbQ3p.png?s=128&g=1", "display_name": "Dando Mando Nogger", "link": "https://stackoverflow.com/users/8054234/dando-mando-nogger"}, "edited": false, "score": 0, "creation_date": 1498672312, "post_id": 44809270, "comment_id": 76599099, "body": "replace <code>$(&#39;#datepicker&#39;).datepicker({format: &#39;dd&#47;mm&#47;yyyy&#39;});</code> with <code>$(&#39;#datepicker&#39;).datepicker({format: &#39;dd&#47;mm&#47;yyyy H:M&#39;});</code>"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 137, "user_id": 8054234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mbQ3p.png?s=128&g=1", "display_name": "Dando Mando Nogger", "link": "https://stackoverflow.com/users/8054234/dando-mando-nogger"}, "edited": false, "score": 0, "creation_date": 1498672469, "post_id": 44809270, "comment_id": 76599184, "body": "try <code>dateFormat: &#39;dd&#47;mm&#47;yyyy HH:MM:ss&#39;</code>"}, {"owner": {"reputation": 137, "user_id": 8054234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mbQ3p.png?s=128&g=1", "display_name": "Dando Mando Nogger", "link": "https://stackoverflow.com/users/8054234/dando-mando-nogger"}, "edited": false, "score": 0, "creation_date": 1498672577, "post_id": 44809270, "comment_id": 76599248, "body": "still only shows dd/mm/yyyy, it doesnt show the hour minute or seconds"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 137, "user_id": 8054234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mbQ3p.png?s=128&g=1", "display_name": "Dando Mando Nogger", "link": "https://stackoverflow.com/users/8054234/dando-mando-nogger"}, "edited": false, "score": 0, "creation_date": 1498672961, "post_id": 44809270, "comment_id": 76599471, "body": "Try to change date_field to datetime_field"}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": true, "score": 0, "last_activity_date": 1498672543, "last_edit_date": 1498672543, "creation_date": 1498671653, "answer_id": 44809270, "question_id": 44809175, "link": "https://stackoverflow.com/questions/44809175/how-to-change-rails-datetime-field-defaults/44809270#44809270", "title": "how to change rails datetime_field defaults?", "body": "<p>Try below code:</p>\n\n<pre><code>&lt;%= f.date_field :Inicio, as: :date, value: f.object.try(:strftime,\"%d/%m/%Y\"), class: 'form-control' %&gt;\n</code></pre>\n\n<p>You can also use this gem: <a href=\"https://github.com/Nerian/bootstrap-datepicker-rails\" rel=\"nofollow noreferrer\">https://github.com/Nerian/bootstrap-datepicker-rails</a>\non your gemfile.rb</p>\n\n<pre><code>gem 'bootstrap-datepicker-rails'\n</code></pre>\n\n<p><strong>then bundle install and restart rails server</strong></p>\n\n<p>then add this line to <strong>app/assets/stylesheets/application.css</strong></p>\n\n<pre><code>*= require bootstrap-datepicker\n</code></pre>\n\n<p>and add this line to <strong>app/assets/javascripts/application.js</strong></p>\n\n<pre><code>//= require bootstrap-datepicker\n</code></pre>\n\n<p>and to use this in your form:</p>\n\n<pre><code>&lt;%= f.date_field :Inicio, :id =&gt; \"datepicker\" %&gt;\n</code></pre>\n\n<p><strong>and add this javascript on the same view of your form</strong></p>\n\n<pre><code>&lt;script&gt;\n  $('#datepicker').datepicker({format: 'dd/mm/yyyy  HH:MM:ss'});\n&lt;/script&gt;\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 8054234, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mbQ3p.png?s=128&g=1", "display_name": "Dando Mando Nogger", "link": "https://stackoverflow.com/users/8054234/dando-mando-nogger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 44809270, "answer_count": 1, "score": 0, "last_activity_date": 1498672543, "creation_date": 1498671234, "last_edit_date": 1498671613, "question_id": 44809175, "link": "https://stackoverflow.com/questions/44809175/how-to-change-rails-datetime-field-defaults", "title": "how to change rails datetime_field defaults?", "body": "<p>Me and my co-workers were testing my web app. And, in the form in my computer/local/dev and server/production it shows the date format <code>dd/mm/yyyy 00:00</code> and for my coworkers <code>mm/dd/yyyy 00:00 am/pm</code> with the same local chrome settings and computer settings.  </p>\n\n<ul>\n<li>why is this? </li>\n<li>and how can I change this for all users? if possible.</li>\n</ul>\n\n<p>piece of code:</p>\n\n<pre><code>&lt;div class=\"mini_jumbotron\"&gt;\n                &lt;div class=\"mini_text\"&gt;Inicio&lt;%= image_tag(\"calendar.png\", :class =&gt; \"calendar\")%&gt;\n                  &lt;/div&gt; &lt;br&gt;\n                &lt;/div&gt;\n              &lt;%= f.datetime_field :Inicio %&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "debugging", "intellij-idea", "remote-debugging"], "comments": [{"owner": {"reputation": 81, "user_id": 3298111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160b74745332bb4bf47e1761d5c86ce6?s=128&d=identicon&r=PG&f=1", "display_name": "websusk", "link": "https://stackoverflow.com/users/3298111/websusk"}, "edited": false, "score": 0, "creation_date": 1498675453, "post_id": 44808824, "comment_id": 76600925, "body": "So I got rid of the <code>listener</code> gem, and commented out the<code>config.file_watcher = ActiveSupport::EventedFileUpdateChecker</code> to get rid of that dependency, now I run I get the same error but coming from Puma."}, {"owner": {"reputation": 81, "user_id": 3298111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160b74745332bb4bf47e1761d5c86ce6?s=128&d=identicon&r=PG&f=1", "display_name": "websusk", "link": "https://stackoverflow.com/users/3298111/websusk"}, "edited": false, "score": 0, "creation_date": 1498676050, "post_id": 44808824, "comment_id": 76601299, "body": "Previous comment seems to point to JRuby itself, any thoughts?  JRuby Util.java definitely does not include &#39;thread-start&#39;.  Am I even using the right debugging libraries at this point?"}], "owner": {"reputation": 81, "user_id": 3298111, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/160b74745332bb4bf47e1761d5c86ce6?s=128&d=identicon&r=PG&f=1", "display_name": "websusk", "link": "https://stackoverflow.com/users/3298111/websusk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 357, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1498670008, "creation_date": 1498670008, "question_id": 44808824, "link": "https://stackoverflow.com/questions/44808824/remote-debugging-jruby-in-docker-from-intellij", "title": "Remote Debugging JRuby in Docker from IntelliJ", "body": "<p>I have a Ruby On Rails (JRuby) project running in Puma web server running from within a local Docker container. I'm trying to debug the application from IntelliJ running on the same host using Ruby Remote configuration. </p>\n\n<p>Outside of my application Gems, I have added the following to the test/development group:</p>\n\n<pre><code>gem 'ruby-debug-base'\ngem 'ruby-debug-ide'\n</code></pre>\n\n<p>When I run the command inside the Docker container via my startup script, I am using this command:</p>\n\n<pre><code>exec bundle exec rdebug-ide --host 0.0.0.0 --port 1234 --dispatcher-port 26162 -- /usr/local/bundle/gems/puma-3.5.2-java/bin/puma -C /var/www/apps/app1/config/puma.rb\n</code></pre>\n\n<p>When I start my container, I get the following output which seems like the debugger starts up correctly:</p>\n\n<pre><code>Fast Debugger (ruby-debug-ide 0.6.0, ruby-debug-base 0.10.3.2, file filtering is not supported) listens on 0.0.0.0:1234\n</code></pre>\n\n<p>When I run the remote debugging in IntelliJ, it seems to start Puma at that time, then it fails with what seems to be a conflict or call into <code>listen</code> gem (which I'm using listen '~> 3.1.5').  I see this output, as it seems to not support the event.</p>\n\n<pre><code>Puma starting in single mode...\n* Version 3.5.2 (jruby 9.1.2.0 - ruby 2.3.0), codename: Amateur Raccoon Rocketry\n* Min threads: 0, max threads: 16\n* Environment: development\nException in thread \"Ruby-0-Thread-2: /usr/local/bundle/gems/listen-3.1.5/lib/listen/internals/thread_pool.rb:6\" java.lang.IllegalArgumentException: unknown event type: thread-begin\n     at org.jruby.debug.Util.typeForEvent(Util.java:122)\n     at org.jruby.debug.DebugEventHook.eventHandler(DebugEventHook.java:97)\n     at org.jruby.runtime.EventHook.event(EventHook.java:30)\n     at org.jruby.Ruby.callEventHooks(Ruby.java:3231)\n     at org.jruby.runtime.ThreadContext.trace(ThreadContext.java:641)\n     at org.jruby.internal.runtime.RubyRunnable.run(RubyRunnable.java:103)\n     at java.lang.Thread.run(Thread.java:745)\nException in thread \"Ruby-0-Thread-3: /usr/local/bundle/gems/listen-3.1.5/lib/listen/internals/thread_pool.rb:6\" java.lang.IllegalArgumentException: unknown event type: thread-begin\n     at org.jruby.debug.Util.typeForEvent(Util.java:122)\n     at org.jruby.debug.DebugEventHook.eventHandler(DebugEventHook.java:97)\n     at org.jruby.runtime.EventHook.event(EventHook.java:30)\n     at org.jruby.Ruby.callEventHooks(Ruby.java:3231)\n     at org.jruby.runtime.ThreadContext.trace(ThreadContext.java:641)\n     at org.jruby.internal.runtime.RubyRunnable.run(RubyRunnable.java:103)\n     at java.lang.Thread.run(Thread.java:745)\n! Unable to load application: Timeout::Error: execution expired\nTimeout::Error: execution expired\n</code></pre>\n\n<p>I've tried different versions and no matter what I try I seem to be getting this same thing.  Are there limitations to Ruby remote debugging, is this not compatible with <code>listen</code> gem?</p>\n\n<p>I'm using Puma 3.5.2 (platform:jruby), Listen 3.1.5, Ruby 2.3.1p112, JRuby 9.1.2.0, and Ruby 2.3.0.  I'm also running on a VirtualBox VM running Linux Mint, if that makes any difference.  I'm relatively new to Ruby on Rails coming from a Java background, so this could be a newbie thing I'm missing.  </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1498671903, "post_id": 44808061, "comment_id": 76598849, "body": "your first example is actually more equivalent to <code>C.instance_eval { extend M }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1498670774, "post_id": 44808306, "comment_id": 76598180, "body": "Or, to make it closer to original code, <code>class &lt;&lt; D; self; end.instance_eval {}</code>."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1498672120, "post_id": 44808306, "comment_id": 76598982, "body": "<i>&quot;so your include line is equivalent to C.singleton_class.include(M)&quot;</i> not necessarily true. This actually injects M into <code>C</code> call hierarchy e.g. <code>C.ancestors #=&gt; [C, M, Object, Kernel, BasicObject]</code> where as the initial implementation is actually more equivalent to <code>C.extend(M)</code>"}, {"owner": {"reputation": 67, "user_id": 6045297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a06d384dfb68a3c515cb395931c73?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Spence", "link": "https://stackoverflow.com/users/6045297/tim-spence"}, "edited": false, "score": 0, "creation_date": 1498734612, "post_id": 44808306, "comment_id": 76626713, "body": "Thanks very much, that&#39;s very helpful! I think then my confusion might actually be the behaviour of include: In both of the cases, if I had used <code>def foo; :foo; end</code> directly instead of <code>include M</code>, I believe it would have defined C.foo rather than C.new.foo. I find this disparity between include and direct definition surprising"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 67, "user_id": 6045297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a06d384dfb68a3c515cb395931c73?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Spence", "link": "https://stackoverflow.com/users/6045297/tim-spence"}, "edited": false, "score": 0, "creation_date": 1498746582, "post_id": 44808306, "comment_id": 76636233, "body": "@TimSpence You&#39;re right, <a href=\"https://repl.it/JHYu\" rel=\"nofollow noreferrer\">that&#39;s what it would have done</a>. I agree that the disparity is surprising."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 2, "last_activity_date": 1498668589, "last_edit_date": 1498668589, "creation_date": 1498668236, "answer_id": 44808306, "question_id": 44808061, "link": "https://stackoverflow.com/questions/44808061/behaviour-of-instance-eval/44808306#44808306", "title": "Behaviour of instance_eval", "body": "<p>In each of these cases, what object are you calling <code>include</code> on? In your first example, you're calling <code>include</code> on C's singleton class:</p>\n\n<pre><code>class C\n  class &lt;&lt; self\n    p self == C.singleton_class\n    include M\n  end\nend\n# =&gt; true\n\np C.foo\n# =&gt; :foo\n</code></pre>\n\n<p>...so your <code>include</code> line is equivalent to <code>C.singleton_class.include(M)</code>.</p>\n\n<p>In your second example, however, you're calling <code>include</code> on C itself:</p>\n\n<pre><code>class C\nend\nC.instance_eval do\n  p self == C\n  include M\nend\n# =&gt; true\n\np C.foo\n# =&gt; NoMethodError: undefined method `foo' for C:Class\n\np C.new.foo\n# =&gt; :foo\n</code></pre>\n\n<p>...so you're doing the equivalent of <code>C.include(M)</code>, which is the same as:</p>\n\n<pre><code>class C\n  p self == C\n  include M\nend\n# =&gt; true\n\np C.new.foo\n# =&gt; :foo\n</code></pre>\n\n<p>What <em>would</em> work like you want would be to call <code>instance_eval</code> on C's singleton class:</p>\n\n<pre><code>class D\nend\nD.singleton_class.instance_eval do\n  p self == D.singleton_class\n  include M\nend\n# =&gt; true\n\np D.foo\n# =&gt; :foo\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1498670899, "post_id": 44808527, "comment_id": 76598247, "body": "Your first three paragraphs talk about <code>class_eval</code>; your answer would benefit by some example code that actually uses <code>class_eval</code>."}, {"owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1498671068, "post_id": 44808527, "comment_id": 76598346, "body": "sure Jordan I will"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1498671695, "post_id": 44808527, "comment_id": 76598738, "body": "You did not address inclusion at all which seems to be the premise of the post. e.g. Why inclusion in <code>class &lt;&lt; self</code> extends the class but inclusion inside <code>instance_eval</code> does not"}], "tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": false, "score": 0, "last_activity_date": 1498671884, "last_edit_date": 1498671884, "creation_date": 1498668973, "answer_id": 44808527, "question_id": 44808061, "link": "https://stackoverflow.com/questions/44808061/behaviour-of-instance-eval/44808527#44808527", "title": "Behaviour of instance_eval", "body": "<p><code>Module#class_eval()</code> is very different from <code>Object#instance_eval()</code>. The <code>instance_eval()</code> only changes <code>self</code>, while <code>class_eval()</code> changes both <code>self</code> and the <code>current class</code>.</p>\n\n<p>Unlike in your example, you can alter class_instance vars using <code>instance_eval</code> though, because they are in the object scope as <code>MyClass</code> is a singleton instance of class <code>Class</code>.</p>\n\n<pre><code>class MyClass\n  @class_instance_var = 100\n  @@class_var = 100\n\n  def self.disp\n    @class_instance_var\n  end\n\n  def self.class_var\n    @@class_var\n  end\n\n\n  def some_inst_method\n    12\n  end\nend\n\nMyClass.instance_eval do\n  @class_instance_var = 500\n\n  def self.cls_method\n    @@class_var = 200\n    'Class method added'\n  end\n\n  def inst_method\n    :inst\n  end\nend\n\nMyClass.disp\n#=&gt; 500\n\nMyClass.cls_method\n#=&gt; 'Class method added'\n\nMyClass.class_var\n#=&gt; 100\n\nMyClass.new.inst_method\n# undefined method `inst_method' for #&lt;MyClass:0x0055d8e4baf320&gt;\n</code></pre>\n\n<h2>In simple language.</h2>\n\n<p>If you have a look in the upper class defn code as an interpreter, you notice that there are two scopes <code>class scope</code> and <code>object scope</code>. <strong>class vars</strong> and <strong>instance methods</strong> are accessible from <code>object scope</code> and does not fall under jurisdiction of <code>instance_eval()</code> so it skips such codes.</p>\n\n<p>Why? because, as the name suggests, its supposed to alter the <code>Class</code>'s instance(MyClass)'s properties not other object's properties like <code>MyClass</code>'s any object's properties. Also, class variables don\u2019t really belong to classes\u2014they belong to class hierarchies.</p>\n\n<hr>\n\n<p>If you want to open an object that is not a class, then you can\nsafely use <code>instance_eval()</code>. But, if you want to open a class definition and define methods with <code>def</code> or <code>include</code> some module, then <code>class_eval()</code> should be your pick. </p>\n\n<p>By changing the <code>current class</code>, <code>class_eval()</code> effectively reopens the class, just like the <code>class</code> keyword does. And, this is what you are trying to achieve in this question.</p>\n\n<pre><code>MyClass.class_eval do\n  def inst_method\n    :inst\n  end\nend\n\nMyClass.new.inst_method\n#=&gt; :inst\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6045297, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d45a06d384dfb68a3c515cb395931c73?s=128&d=identicon&r=PG&f=1", "display_name": "Tim Spence", "link": "https://stackoverflow.com/users/6045297/tim-spence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1501526256, "creation_date": 1498667390, "last_edit_date": 1501526256, "question_id": 44808061, "link": "https://stackoverflow.com/questions/44808061/behaviour-of-instance-eval", "title": "Behaviour of instance_eval", "body": "<p>My understanding of <code>instance_eval</code> was that if I have module M then the following were equivalent:</p>\n\n<pre><code>module M\n  def foo\n    :foo\n  end\nend\n\nclass C\n  class &lt;&lt; self\n    include M\n  end\nend\nputs C.foo\n</code></pre>\n\n<p>equivalent to:</p>\n\n<pre><code>module M\n  def foo\n    :foo\n  end\nend\n\nclass C\nend\nC.instance_eval do\n  include M\nend\nputs C.foo\n</code></pre>\n\n<p>However, the first example prints <code>:foo</code> and the second throws a <code>NoMethodError</code>? (Ruby 2.3.0)</p>\n\n<p>In both cases above, if I had replaced:</p>\n\n<pre><code>include M\n</code></pre>\n\n<p>with:</p>\n\n<pre><code>def foo\n  :foo\nend\n</code></pre>\n\n<p>ie directly defining the method rather than including a module then both cases would have resulted in a <code>C.foo</code> method being defined. Should I be surprised at this difference between include and defining the method directly?\nOr does it ever even make sense to call include within the context of <code>instance_eval</code>? Should it only ever be called within a <code>class_eval</code>?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1498667733, "post_id": 44807972, "comment_id": 76596347, "body": "Are the numbers always single-digit?"}, {"owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1498668154, "post_id": 44807972, "comment_id": 76596613, "body": "No, i may be double or triple."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1498669271, "post_id": 44807972, "comment_id": 76597284, "body": "Do it step by step: <b>1)</b> extract <code>&quot;3-7&quot;</code> and <code>&quot;9&quot;</code>, <b>2)</b> Figure out how to convert <code>&quot;3-7&quot;</code> to <code>[&#39;3&#39;,&#39;4&#39;,&#39;5&#39;,&#39;6&#39;,&#39;7&#39;]</code>, <b>3)</b> combine the results"}], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "edited": false, "score": 0, "creation_date": 1498668217, "post_id": 44808165, "comment_id": 76596663, "body": "Thank you but there is extra number <code>8</code> which shouldn&#39;t be there."}, {"owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "edited": false, "score": 0, "creation_date": 1498670826, "post_id": 44808165, "comment_id": 76598213, "body": "Is the a way where we can include both <code>Test: 1</code>(with space between Test: and 1)  and <code>Test:1</code> (without space between Test: and 1)?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1498670974, "post_id": 44808165, "comment_id": 76598290, "body": "I think you can do away with the ternary altogether."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "edited": false, "score": 0, "creation_date": 1498671883, "post_id": 44808165, "comment_id": 76598842, "body": "@Kavincat Yes, adding an additional <code>map</code> to the result of <code>scan</code>, and changing the <i>space</i> in regex. Check updated answer."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1498672009, "post_id": 44808165, "comment_id": 76598919, "body": "@ice\u30c4 I also thought of that, but <code>Range.new</code> need 2..3 arguments, so won&#39;t work for all cases."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1498675270, "post_id": 44808165, "comment_id": 76600816, "body": "<code>flat_map { |r| Range.new(*r.split(&#39;-&#39;).values_at(0, -1)).to_a }</code> would work for both, <code>a-b</code> notation and single values."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498675565, "post_id": 44808165, "comment_id": 76601004, "body": "@Stefan Great, thank you! I wanted to get rid of the ternary but couldn&#39;t figure out how. I&#39;ll update my answer."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1498677586, "post_id": 44808165, "comment_id": 76602185, "body": "Using a capture you can get rid of <code>.map(&amp;:strip)</code>: <code>.scan(&#47;Test:\\s*([ 0-9-]+)&#47;).flat_map {|r,| ... }</code>. Personally, though, I&#39;d use two captures and get rid of the whole <code>split(&#39;-&#39;)</code> thing: <code>test.join.scan(&#47;Test:\\s*(\\d+)(?:-(\\d+))?&#47;).flat_map {|m,n| (m..n||m).to_a }</code>"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1498678308, "post_id": 44808165, "comment_id": 76602574, "body": "@JordanRunning Thanks for your suggestion, i like it better than my original answer. I updated my answer, but your solution may well be posted as another answer (i&#39;ll rollback if you decide to add it)."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1498678763, "post_id": 44808165, "comment_id": 76602809, "body": "@Gerry I&#39;m pretty happy with my answer without <code>join</code>, so you&#39;re welcome to it."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 4, "last_activity_date": 1498678145, "last_edit_date": 1498678145, "creation_date": 1498667782, "answer_id": 44808165, "question_id": 44807972, "link": "https://stackoverflow.com/questions/44807972/how-to-extract-number-from-array-of-string-i-m-using-regex/44808165#44808165", "title": "How to extract number from array of string? (I m using regex)", "body": "<p>You could create a new <code>Range</code> for each <em>range</em> found (i.e <code>N-N</code>) using the splat operator (i.e. <code>*</code>) and combine the results, like this <sup>1</sup>:</p>\n\n<pre><code>test.join.scan(/(?&lt;=Test: )[0-9-]+/)\n         .flat_map { |r| Range.new(*r.split('-').values_at(0, -1)).to_a }\n#=&gt; [\"3\", \"4\", \"5\", \"6\", \"7\", \"9\"]\n</code></pre>\n\n<p>This will work for both examples.</p>\n\n<p><sup>1</sup> <em>Notice the the <strong>added <code>-</code></strong> next to <code>0-9</code> in the regex.</em></p>\n\n<blockquote>\n  <p>Is the a way where we can include both <code>Test: 1</code> (with space between\n  Test: and 1) and <code>Test:1</code> (without space between Test: and 1)?</p>\n</blockquote>\n\n<p>Yes, update your regex (change where <em>space</em> is placed) and add an additional <code>map</code> to get rid of those spaces:</p>\n\n<pre><code>test.join\n    .scan(/(?&lt;=Test:)[ 0-9-]+/)\n    .map(&amp;:strip)\n    .flat_map { |r| Range.new(*r.split('-').values_at(0, -1)).to_a }\n</code></pre>\n\n<p>And here's shortened option using two captures in the regex, as <a href=\"https://stackoverflow.com/questions/44807972/how-to-extract-number-from-array-of-string-i-m-using-regex/44808165?noredirect=1#comment76602185_44808165\">suggested by Jordan</a>.</p>\n\n<pre><code>test.join\n    .scan(/Test:\\s*(\\d+)(?:-(\\d+))?/)\n    .flat_map { |m,n| (m..n||m).to_a }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 4, "creation_date": 1498672597, "post_id": 44808978, "comment_id": 76599262, "body": "Interesting and neat solution! BTW, you could get the exact desired output  (strings instead of numbers) removing <code>to_i</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1498676444, "post_id": 44808978, "comment_id": 76601549, "body": "Since the OP wants an array of strings, you could shorten it to <code>m.upto(n || m).to_a</code>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498676751, "post_id": 44808978, "comment_id": 76601736, "body": "@Gerry, Stefan: Thanks for your suggestions; I&#39;ve updated my answer."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 2, "creation_date": 1498683289, "post_id": 44808978, "comment_id": 76605351, "body": "I really enjoyed this answer especially the &quot;succinct&quot; version. So just for fun Benchmarks available at <a href=\"https://repl.it/JFwT/16\" rel=\"nofollow noreferrer\">repl.it/JFwT/16</a>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1498685746, "post_id": 44808978, "comment_id": 76606465, "body": "@engineersmnky It was fun to write. I&#39;m not surprised by the benchmark result. <code>Array#join</code> is pretty well-optimized."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1498686007, "post_id": 44808978, "comment_id": 76606584, "body": "Surprisingly well optimized to the point where it is faster than <code>inspect</code>"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 5, "last_activity_date": 1498678471, "last_edit_date": 1498678471, "creation_date": 1498670547, "answer_id": 44808978, "question_id": 44807972, "link": "https://stackoverflow.com/questions/44807972/how-to-extract-number-from-array-of-string-i-m-using-regex/44808978#44808978", "title": "How to extract number from array of string? (I m using regex)", "body": "<p>There are a lot of ways you could solve this. I'd probably do it this way:</p>\n\n<pre><code>test.flat_map do |s|\n  _, m, n = *s.match(/Test:\\s*(\\d+)(?:-(\\d+))?/)\n  m ? (m..n||m).to_a : []\nend\n</code></pre>\n\n<p>See it in action on repl.it: <a href=\"https://repl.it/JFwT/13\" rel=\"nofollow noreferrer\">https://repl.it/JFwT/13</a></p>\n\n<p>Or, more succinctly:</p>\n\n<pre><code>test.flat_map {|s| s.match(/Test:\\s*(\\d+)(?:-(\\d+))?/) { $1..($2||$1) }.to_a }\n</code></pre>\n\n<p><a href=\"https://repl.it/JFwT/11\" rel=\"nofollow noreferrer\">https://repl.it/JFwT/11</a></p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1498673023, "creation_date": 1498673023, "answer_id": 44809629, "question_id": 44807972, "link": "https://stackoverflow.com/questions/44807972/how-to-extract-number-from-array-of-string-i-m-using-regex/44809629#44809629", "title": "How to extract number from array of string? (I m using regex)", "body": "<p>Just out of curiosity:</p>\n\n<pre><code>test.\n  join.\n  scan(/(?&lt;=Test: )[\\d-]+/).\n  map { |e| e.gsub(/\\A\\d+\\Z/) { |m| \"#{m}..#{m}\" }.gsub('-', '..') }.\n  map(&amp;method(:eval)).\n  flat_map(&amp;:to_a)\n</code></pre>\n"}], "owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 44808165, "answer_count": 3, "score": 1, "last_activity_date": 1498678471, "creation_date": 1498667163, "last_edit_date": 1498669045, "question_id": 44807972, "link": "https://stackoverflow.com/questions/44807972/how-to-extract-number-from-array-of-string-i-m-using-regex", "title": "How to extract number from array of string? (I m using regex)", "body": "<p>I have a array of string</p>\n\n<pre><code>test= [\"ChangeServer&lt;br/&gt;Test: 3-7&lt;br/&gt;PinCode:DFSFSDFB04008&lt;br/&gt;ShipCode:DFADFSDFSDM-000D3&lt;br/&gt;SomeCode:sdfsdf\", \"werwerwe\", \"adfsdfsd\", \n\"sdfsdfsdfsd&lt;br/&gt;Test: 9&lt;br/&gt;PinCode:ADFSDF4NS0&lt;br/&gt;ShipCode:FADFSDFD-9ZM170&lt;br/&gt;\"]\n</code></pre>\n\n<p>I want to grab the number after <code>Test:</code> which in the above array of string are <code>3</code>, <code>4</code>, <code>5</code>, <code>6</code>, <code>7</code> ( range 3-7) and <code>9</code></p>\n\n<p><strong>Desired output:</strong></p>\n\n<pre><code>[\"3\",\"4\",\"5\",\"6\",\"7\",\"9\"]\n</code></pre>\n\n<p>What I tried so far</p>\n\n<pre><code>test.join.scan(/(?&lt;=Test: )[0-9]+/)\n=&gt; [\"3\", \"7\"]\n</code></pre>\n\n<p>How to deal with range?</p>\n\n<p>Second test case:</p>\n\n<pre><code>    test= [\"ChangeServer&lt;br/&gt;Test: 3-7&lt;br/&gt;PinCode:DFSFSDFB04008&lt;br/&gt;ShipCode:DFADFSDFSDM-000D3&lt;br/&gt;SomeCode:sdfsdf\", \"werwerwe\", \"adfsdfsd\", \n\"sdfsdfsdfsd&lt;br/&gt;Test: 9&lt;br/&gt;PinCode:ADFSDF4NS0&lt;br/&gt;ShipCode:FADFSDFD-9ZM170&lt;br/&gt;\", \"sdfsdfsdfsd&lt;br/&gt;Test: 15-18&lt;br/&gt;PinCode:ADFSDF4NS0&lt;br/&gt;ShipCode:FADFSDFD-9ZM170&lt;br/&gt;\"]\n</code></pre>\n\n<p>Desired output:</p>\n\n<pre><code>[\"3\",\"4\",\"5\",\"6\",\"7\",\"9\",\"15\",\"16\",\"17\",\"18\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3.2", "jobs", "clockwork"], "comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1498667407, "post_id": 44807339, "comment_id": 76596144, "body": "maybe it calculates <code>17:50</code> plus one hours is <code>18:50</code> then it will wait for the <code>**:00</code> and that will be <code>19:00</code>, but I never used the gem and I do not have enough info.. could you give us more info please ? thanks"}, {"owner": {"reputation": 23, "user_id": 4610674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCkrO.png?s=128&g=1", "display_name": "bl0ck3d", "link": "https://stackoverflow.com/users/4610674/bl0ck3d"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1498671868, "post_id": 44807339, "comment_id": 76598836, "body": "Thanks @FabrizioBertoglio, what info do you need exactly? You can see more info about this gem here: <a href=\"https://github.com/Rykian/clockwork\" rel=\"nofollow noreferrer\">github.com/Rykian/clockwork</a>"}, {"owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "edited": false, "score": 0, "creation_date": 1514616207, "post_id": 44807339, "comment_id": 83033436, "body": "Hello @bl0ck3d - I wasn&#39;t able to replicate this locally, and in fact it worked fine for me. The logic for when an event triggers is pretty clearly outlined here (<a href=\"https://github.com/Rykian/clockwork/blob/master/lib/clockwork/event.rb#L65\" rel=\"nofollow noreferrer\">github.com/Rykian/clockwork/blob/master/lib/clockwork/&hellip;</a>). Do you by any chance have <code>skip_first_run</code> set to <code>true</code>? That would exhibit exactly this sort of behavior. If not, could you share your <code>clock.rb</code> file?"}], "owner": {"reputation": 23, "user_id": 4610674, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YCkrO.png?s=128&g=1", "display_name": "bl0ck3d", "link": "https://stackoverflow.com/users/4610674/bl0ck3d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498665123, "creation_date": 1498665123, "question_id": 44807339, "link": "https://stackoverflow.com/questions/44807339/clockwork-wont-run-a-job-in-the-closest-full-hour", "title": "Clockwork won&#39;t run a job in the closest full hour", "body": "<p>I'm using clockwork for running a job every full hour (**:00), like this:</p>\n\n<pre><code>every(1.hour, 'auto lock', :at =&gt; '**:00')\n</code></pre>\n\n<p>But if a add an item for the job, for example at 17:50, the job will run for this item only at 19:00 and not at 18:00 as expected.</p>\n\n<p>What could be the problem?</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rest"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498666591, "post_id": 44807484, "comment_id": 76595637, "body": "How does this answer the question stated?"}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498667051, "post_id": 44807484, "comment_id": 76595917, "body": "It tells you how. &quot;You&#39;ll need to parse and organise the response first before iterating through it.&quot;, explains the error and gives an advice for the syntax used. You can go ahead and complete it by querying the API, figuring out the response and writing it here, instead of wasting time commenting on a perfectly fine answer for a vague question."}], "tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": false, "score": -1, "last_activity_date": 1498665570, "creation_date": 1498665570, "answer_id": 44807484, "question_id": 44806904, "link": "https://stackoverflow.com/questions/44806904/typeerror-no-implicit-conversion-of-string-into-integer/44807484#44807484", "title": "TypeError - no implicit conversion of String into Integer", "body": "<p>You should check the api response on your console to see what you're getting and go from there.</p>\n\n<pre><code>def new\n  ...etc\n  puts @techcrunch\nend\n</code></pre>\n\n<p>or even inside the view, before everything <code>&lt;%= @techcrunch %&gt;</code>\nYou're probably looping through a string and not an object, and the error comes from it being a string and when you call [\"urlImage\"] it should be an integer indicating an index and not a string (\"urlImage\"). You'll need to parse and organise the response first before iterating through it.</p>\n\n<p>Also, you can just call: </p>\n\n<pre><code>if @techcrunch.blank?\n</code></pre>\n\n<p>instead of .nil? &amp;&amp; == []</p>\n"}, {"comments": [{"owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "edited": false, "score": 0, "creation_date": 1498667242, "post_id": 44807774, "comment_id": 76596047, "body": ",Thank you for your quick response.I tried replacing techcrunch.articles[0][&quot;url&quot;].now I am getting error like  &quot;undefined method `articles&#39; for [&quot;status&quot;, &quot;ok&quot;]:Array&quot;"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "edited": false, "score": 0, "creation_date": 1498667347, "post_id": 44807774, "comment_id": 76596114, "body": "Oh, sorry, please see an update: you should iterate over articles in the first place."}, {"owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "edited": false, "score": 0, "creation_date": 1498670049, "post_id": 44807774, "comment_id": 76597755, "body": ",Thanks a ton. your solution has fixed my problem."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1498667320, "last_edit_date": 1498667320, "creation_date": 1498666562, "answer_id": 44807774, "question_id": 44806904, "link": "https://stackoverflow.com/questions/44806904/typeerror-no-implicit-conversion-of-string-into-integer/44807774#44807774", "title": "TypeError - no implicit conversion of String into Integer", "body": "<p>The problem is here:</p>\n\n<pre><code>techcrunch.articles[\"url\"]\n</code></pre>\n\n<p><code>techcrunch[\"articles\"]</code> is an array. You might want to iterate through articles:</p>\n\n<pre><code>&lt;% @techcrunch[\"articles\"].each do |techcrunch| %&gt;\n</code></pre>\n\n<p>and remove <code>.articles</code>:</p>\n\n<pre><code>techcrunch[\"url\"]\n</code></pre>\n\n<p>from where it failed.</p>\n"}], "owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2970, "favorite_count": 1, "accepted_answer_id": 44807774, "answer_count": 2, "score": 0, "last_activity_date": 1498667320, "creation_date": 1498663949, "question_id": 44806904, "link": "https://stackoverflow.com/questions/44806904/typeerror-no-implicit-conversion-of-string-into-integer", "title": "TypeError - no implicit conversion of String into Integer", "body": "<p>Excuse me for the noob question.</p>\n\n<p>I am using <a href=\"https://newsapi.org/\" rel=\"nofollow noreferrer\">https://newsapi.org/</a> in my rails app and I am using httparty gem.</p>\n\n<pre><code>def news\n    @techcrunch = HTTParty.get('https://newsapi.org/v1/articles?source=techcrunch&amp;apiKey=766c2f65e93c477451455xxxxxxxxxxx',\n    :headers =&gt;{'Content-Type' =&gt; 'application/json'} )\n    respond_to :html, :json \nend   \n</code></pre>\n\n<p>news.html.erb</p>\n\n<pre><code>    &lt;% if (@techcrunch.nil? or @techcrunch== []) %&gt;\n    &lt;p&gt; &lt;h2&gt;No news found.. Sorry&lt;/h2&gt;&lt;/p&gt;\n    &lt;% else %&gt;\n      &lt;% @techcrunch.each do |techcrunch| %&gt;\n          &lt;td&gt;&lt;%= link_to(image_tag(techcrunch[\"urlToImage\"], height: '100', width: '100'), techcrunch.articles[\"url\"])%&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= link_to(techcrunch[\"title\"], techcrunch[\"url\"]) %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= techcrunch[\"publishedAt\"] %&gt;&lt;/td&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>I am now getting an error </p>\n\n<blockquote>\n  <p>no implicit conversion of String into Integer</p>\n</blockquote>\n\n<p>in the line</p>\n\n<pre><code>&lt;td&gt;&lt;%= link_to(image_tag(techcrunch[\"urlToImage\"], height: '100', width: '100'), techcrunch.articles[\"url\"])%&gt;&lt;/td&gt;\n</code></pre>\n\n<p>I checked the API in postman and the response is as below</p>\n\n<pre><code>{\n    \"status\": \"ok\",\n    \"source\": \"techcrunch\",\n    \"sortBy\": \"top\",\n    \"articles\": [\n        {\n            \"author\": \"Matthew Panzarino\",\n            \"title\": \"Apple Music\u2019s first new personalized playlist wants you to\u00a0Chill\",\n            \"description\": \"This week Apple is beginning to roll out the first new personalized playlist under Apple Music\u2019s \u2018For You\u2019 section. The playlist, entitled \u2018Chill\u2019..\",\n            \"url\": \"https://techcrunch.com/2017/06/27/apple-musics-first-new-personalized-playlist-wants-you-to-chill/\",\n            \"urlToImage\": \"https://tctechcrunch2011.files.wordpress.com/2017/06/img_0021.jpg?w=764&amp;h=400&amp;crop=1\",\n            \"publishedAt\": \"2017-06-28T02:45:58Z\"\n        },\n\n\n        {\n            \"author\": \"Josh Constine\",\n            \"title\": \"Facebook now has 2 billion monthly users\u2026 and\u00a0responsibility\",\n            \"description\": \"Thirteen years after launching and less than five years after hitting 1 billion, Facebook now has 2 billion monthly active users. If getting to 1 billion was..\",\n            \"url\": \"https://techcrunch.com/2017/06/27/facebook-2-billion-users/\",\n            \"urlToImage\": \"https://tctechcrunch2011.files.wordpress.com/2017/06/facebook-users-snapchat-twitter-youtube-whatsapp-instagram-wechat-qq.png?w=764&amp;h=400&amp;crop=1\",\n            \"publishedAt\": \"2017-06-27T17:06:05Z\"\n        }\n    ]\n}\n</code></pre>\n\n<p>How can I display all the articles using news.html.erb?</p>\n\n<p>Any help is Highly Appreciated.Thanks in Advance!</p>\n"}, {"tags": ["ruby", "timeout"], "comments": [{"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "edited": false, "score": 0, "creation_date": 1498669054, "post_id": 44806592, "comment_id": 76597163, "body": "About which exactly library are your talking about? (url would be helpful)"}, {"owner": {"reputation": 3, "user_id": 4217974, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DIuJLhEP7rQ/AAAAAAAAAAI/AAAAAAAAFmI/i_mgxMegdIo/photo.jpg?sz=128", "display_name": "jau", "link": "https://stackoverflow.com/users/4217974/jau"}, "reply_to_user": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "edited": false, "score": 0, "creation_date": 1498821158, "post_id": 44806592, "comment_id": 76670261, "body": "I&#39;m using the Ruby gems. I think this is what I&#39;m referring to: <a href=\"https://github.com/rest-client/rest-client/tree/v1.6.7\" rel=\"nofollow noreferrer\">github.com/rest-client/rest-client/tree/v1.6.7</a> <a href=\"http://www.rubydoc.info/gems/rest-client/1.6.7/\" rel=\"nofollow noreferrer\">rubydoc.info/gems/rest-client/1.6.7</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1956, "user_id": 682901, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/866bd5cf066ac2959a7d53c91ac68991?s=128&d=identicon&r=PG", "display_name": "EasyCo", "link": "https://stackoverflow.com/users/682901/easyco"}, "is_accepted": true, "score": 1, "last_activity_date": 1508819968, "creation_date": 1508819968, "answer_id": 46902316, "question_id": 44806592, "link": "https://stackoverflow.com/questions/44806592/ruby-restclient-default-timeout/46902316#46902316", "title": "ruby restclient default timeout", "body": "<p><a href=\"https://github.com/rest-client/rest-client#timeouts\" rel=\"nofollow noreferrer\">From the docs</a>:</p>\n\n<blockquote>\n  <p>By default the timeout for a request is 60 seconds.</p>\n</blockquote>\n\n<p>I only had a quick look at the source but I suspect the timeout value comes from Net::HTTP on which it depends rather than RestClient.</p>\n"}], "owner": {"reputation": 3, "user_id": 4217974, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-DIuJLhEP7rQ/AAAAAAAAAAI/AAAAAAAAFmI/i_mgxMegdIo/photo.jpg?sz=128", "display_name": "jau", "link": "https://stackoverflow.com/users/4217974/jau"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1546, "favorite_count": 0, "accepted_answer_id": 46902316, "answer_count": 1, "score": 0, "last_activity_date": 1508819968, "creation_date": 1498663109, "question_id": 44806592, "link": "https://stackoverflow.com/questions/44806592/ruby-restclient-default-timeout", "title": "ruby restclient default timeout", "body": "<p>I was looking through the RestClient library, and trying to find the default timeout values. In v1.6.7, I see only a <code>open_timeout</code> and a <code>timeout</code>, but they seem to be only available within the library itself. </p>\n\n<p>Looking through the library code, I am unable to determine what the default values are for these timeouts, nor was I able to figure out how to debug and have it spit out these values. Anyone know how I can get the library to output what these values are?</p>\n\n<p>Part of my issue is most likely due to my beginner knowledge of Ruby, apologies!</p>\n"}, {"tags": ["ruby", "stdin"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1498672085, "post_id": 44806216, "comment_id": 76598959, "body": "FYI, I&#39;ve opened a <a href=\"https://bugs.ruby-lang.org/issues/13693\" rel=\"nofollow noreferrer\">feature request</a> for this issue."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 2, "creation_date": 1498679960, "post_id": 44806216, "comment_id": 76603507, "body": "FWIW Ruby 2.4 Enumerable#sum method is optimized for this, so <code>(1..5000000).sum</code> returns almost instantly."}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1498706205, "post_id": 44806216, "comment_id": 76611751, "body": "May I ask why the down vote so that I may either correct this question or future questions? Was there something unclear or not useful here for other Ruby novices?"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498663186, "post_id": 44806590, "comment_id": 76593129, "body": "Yep, I think that&#39;s it."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498663212, "post_id": 44806590, "comment_id": 76593149, "body": "You could also do <code>seq 1 5000000  | tail</code> :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498663421, "post_id": 44806590, "comment_id": 76593323, "body": "And to overcome this, one could use <code>s+=$_.to_f.to_i</code>"}, {"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1498663676, "post_id": 44806590, "comment_id": 76593508, "body": "I think this is correct. How to maintain arbitrary precision of arbitrary precision that Ruby supports though?"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1498663699, "post_id": 44806590, "comment_id": 76593521, "body": "I wish I could work out why $_ is reading the last line read as a string conversion in exponential format. It&#39;s like something Excel would do."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498664602, "post_id": 44806590, "comment_id": 76594190, "body": "It could be interesting to test on FreeBSD, I believe there is a FreeBSD version of <code>seq</code> in MacOS and it for unknown reason behaves that way. Also, would you mind to try <code>alias | grep seq</code>?"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498664747, "post_id": 44806590, "comment_id": 76594306, "body": "@mudasobwa <code>alias | grep seq</code> no result"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498665618, "post_id": 44806590, "comment_id": 76595016, "body": "OK, after some investigation I got FreeBSD\u2019s <code>seq</code> <i>always</i> uses <code>%g</code> format (as by <a href=\"https://stackoverflow.com/questions/tagged/c\">c</a>\u2019s <code>format</code>.) GNU/Linux guesses the format basing on arguments."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498669655, "post_id": 44806590, "comment_id": 76597510, "body": "<code>to_int</code> doesn&#39;t work, because that methods doesn&#39;t exist (hence the <code>NoMethodError</code>). The correct method is <code>Integer($_)</code>, which results in <code>ArgumentError: invalid value for Integer(): &quot;5e+06&quot;</code>"}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": true, "score": 5, "last_activity_date": 1498664424, "last_edit_date": 1498664424, "creation_date": 1498663106, "answer_id": 44806590, "question_id": 44806216, "link": "https://stackoverflow.com/questions/44806216/ruby-sum-stdin-integers/44806590#44806590", "title": "Ruby sum stdin integers", "body": "<p>I'm not sure that this is a 100% answer, but I notice that:</p>\n\n<pre><code>seq 500000 500001 | ruby -lne 'BEGIN{}\n                             puts $_\n                             END{} '\n500000\n500001\n</code></pre>\n\n<p>... but ...</p>\n\n<pre><code>seq 5000000 5000001 | ruby -lne 'BEGIN{}\n                             puts $_\n                             END{} '\n5e+06\n5e+06\n</code></pre>\n\n<p>... so the \"relaxed\" approach that #to_i takes to converting the values to integers will still work ...</p>\n\n<pre><code>seq 5000000 5000001 | ruby -lne 'BEGIN{}\n                             puts $_.to_i\n                             END{} '\n5\n5\n</code></pre>\n\n<p>... but the more strict #to_int will not</p>\n\n<pre><code>seq 5000000 5000001 | ruby -lne 'BEGIN{}\n                             puts $_.to_int\n                             END{} '\n-e:2:in `&lt;main&gt;': undefined method `to_int' for \"5e+06\":String (NoMethodError)\n</code></pre>\n\n<p>Edit: I also notice:</p>\n\n<pre><code>seq 5000000 5000001\n\n5e+06\n5e+06\n</code></pre>\n\n<p>So an <code>-f</code> flag has to be passed to seq to get integer format.</p>\n\n<p>Edit again:</p>\n\n<p>final answer:</p>\n\n<pre><code>seq -f %f 1 5000000 | ruby -lne 'BEGIN{s=0}\n                                  s+=$_.to_i\n                                 END{puts s} '\n\n12500002500000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1498816553, "creation_date": 1498816553, "answer_id": 44843667, "question_id": 44806216, "link": "https://stackoverflow.com/questions/44806216/ruby-sum-stdin-integers/44843667#44843667", "title": "Ruby sum stdin integers", "body": "<p>To explain the e-notation output, the OS X man page for <a href=\"https://developer.apple.com/legacy/library/documentation/Darwin/Reference/ManPages/man1/seq.1.html\" rel=\"nofollow noreferrer\"><code>seq</code></a> gives some insight:</p>\n\n<blockquote>\n  <p>Use a <em>printf(3)</em> style <strong>format</strong> to print each number. [...] The default is <code>%g</code>.</p>\n</blockquote>\n\n<p>Therefore, <code>seq</code>'s output is equivalent to Ruby's:</p>\n\n<pre><code>sprintf('%g', 100000)\n#=&gt; \"100000\"\n\nsprintf('%g', 1000000)\n#=&gt; \"1e+06\"\n</code></pre>\n"}], "owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 44806590, "answer_count": 2, "score": 3, "last_activity_date": 1498816553, "creation_date": 1498662147, "last_edit_date": 1498815562, "question_id": 44806216, "link": "https://stackoverflow.com/questions/44806216/ruby-sum-stdin-integers", "title": "Ruby sum stdin integers", "body": "<p>I have:</p>\n\n<pre><code>$ ruby -v\nruby 2.0.0p648 (2015-12-16 revision 53162) [universal.x86_64-darwin16]\n</code></pre>\n\n<p>Suppose you have a sequence of integers <code>1..n</code> a ruby novice would sum the sequence like so:</p>\n\n<pre><code>$ ruby -e 's=0\n     for i in 1..500000\n        s+=i\n     end\n     puts s'\n125000250000\n</code></pre>\n\n<p>Now suppose that I have the same sequence that comes from the <code>stdin</code>:</p>\n\n<pre><code>$ seq 1 500000 | ruby -lne 'BEGIN{s=0}\n                            s+=$_.to_i\n                            END{puts s} '   \n125000250000\n</code></pre>\n\n<p>So far so good. </p>\n\n<p>Now increase the terminal value from 500,000 to 5,000,000:</p>\n\n<pre><code>$ ruby -e 's=0\n         for i in 1..5000000\n            s+=i\n         end\n         puts s'\n12500002500000   &lt;=== CORRECT\n\n$ seq 1 5000000 | ruby -lne 'BEGIN{s=0}\n                             s+=$_.to_i\n                             END{puts s} '\n500009500025     &lt;=== WRONG!\n</code></pre>\n\n<p>It produces a different sum.</p>\n\n<p><code>awk</code> and <code>perl</code> both produce the correct result with the same sequence:</p>\n\n<pre><code>$ seq 1 5000000 | awk '{s+=$1} END{print s}'\n12500002500000\n$ seq 1 5000000 | perl -nle '$s+=$_; END{print $s}'\n12500002500000\n</code></pre>\n\n<p>Why is ruby producing the incorrect sum? I don't think it is overflow since <code>awk</code> and <code>perl</code> are working correctly on the same input. </p>\n\n<hr>\n\n<p><strong>Conclusions:</strong></p>\n\n<p>Thank you David Aldridge for diagnosing this. </p>\n\n<ol>\n<li><p>OS X and BSD <code>seq</code> converts to a float output at 1,000,000 while GNU <code>seq</code> supports arbitrary precision integers. OS X <code>seq</code> is useless as a source of integers greater than 1,000,000. Example on OS X:</p>\n\n<pre><code>$ seq  999999 1000002\n999999\n1e+06\n1e+06\n1e+06\n</code></pre></li>\n<li><p>The ruby method <code>.to_i</code> silently converts a partial string to an integer and that was the 'bug' in this case. Example:</p>\n\n<pre><code>irb(main):002:0&gt; '5e+06'.to_i\n#=&gt; 5\n</code></pre></li>\n<li><p>The 'correct' line in the script is to either use <code>$_.to_f.to_i</code> to use floats or to use <code>Integer($_)</code> to not have the script fail silently. <code>awk</code> and <code>perl</code> parse 5e+06 into a float, and <code>ruby</code> does not implicitly: </p>\n\n<pre><code>$ echo '5e+06' | awk '{print $1+0}'\n5000000\n$ echo '5e+06' | ruby -lne 'print $_.to_i+0'\n5\n</code></pre></li>\n<li><p>And thanks to Stefan Sch\u00fc\u00dfler for opening a Ruby <a href=\"https://bugs.ruby-lang.org/issues/13693\" rel=\"nofollow noreferrer\">feature request</a> regarding <code>.to_i</code> behavior. </p></li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498662038, "post_id": 44805946, "comment_id": 76592225, "body": "Please edit your question an post the relevant code (i.e. view and controller)."}, {"owner": {"reputation": 6105, "user_id": 1700874, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ad36477949cfd7db659cd4420537911c?s=128&d=identicon&r=PG&f=1", "display_name": "The Whiz of Oz", "link": "https://stackoverflow.com/users/1700874/the-whiz-of-oz"}, "edited": false, "score": 0, "creation_date": 1498662074, "post_id": 44805946, "comment_id": 76592250, "body": "Welcome to SO :) You need to post your current code here. Not all of it, just the crucial part. Also, a quick spell check won&#39;t hurt."}, {"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 0, "creation_date": 1498662716, "post_id": 44805946, "comment_id": 76592749, "body": "IMO it&#39;s probably easiest to assign the relevant cells a class and use javascript to do the styling."}, {"owner": {"reputation": 13, "user_id": 8220950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WTjL39OZejg/AAAAAAAAAAI/AAAAAAAABxs/9e0vh7ItZz4/photo.jpg?sz=128", "display_name": "Bobby Bonchev", "link": "https://stackoverflow.com/users/8220950/bobby-bonchev"}, "edited": false, "score": 0, "creation_date": 1498673138, "post_id": 44805946, "comment_id": 76599571, "body": "I edited my question, sorry for the mistakes"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8220950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WTjL39OZejg/AAAAAAAAAAI/AAAAAAAABxs/9e0vh7ItZz4/photo.jpg?sz=128", "display_name": "Bobby Bonchev", "link": "https://stackoverflow.com/users/8220950/bobby-bonchev"}, "edited": false, "score": 0, "creation_date": 1498675249, "post_id": 44809862, "comment_id": 76600797, "body": "I am writing down as I read, thanks for the great answer! Every new piece of info is important in the early stages!  Regards, B"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 13, "user_id": 8220950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WTjL39OZejg/AAAAAAAAAAI/AAAAAAAABxs/9e0vh7ItZz4/photo.jpg?sz=128", "display_name": "Bobby Bonchev", "link": "https://stackoverflow.com/users/8220950/bobby-bonchev"}, "edited": false, "score": 0, "creation_date": 1498676498, "post_id": 44809862, "comment_id": 76601589, "body": "@BobbyBonchev Glad to help! If it works, please don&#39;t forget to accept the answer (by clicking the tick). :) Happy coding!"}, {"owner": {"reputation": 13, "user_id": 8220950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WTjL39OZejg/AAAAAAAAAAI/AAAAAAAABxs/9e0vh7ItZz4/photo.jpg?sz=128", "display_name": "Bobby Bonchev", "link": "https://stackoverflow.com/users/8220950/bobby-bonchev"}, "edited": false, "score": 1, "creation_date": 1498682989, "post_id": 44809862, "comment_id": 76605182, "body": "thanks once again for the tip! Happy coding to you too!"}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 0, "last_activity_date": 1498674297, "last_edit_date": 1498674297, "creation_date": 1498673884, "answer_id": 44809862, "question_id": 44805946, "link": "https://stackoverflow.com/questions/44805946/styling-table-cell-different-colors-depending-on-the-cell-value-using-erb-ruby/44809862#44809862", "title": "Styling table cell different colors depending on the cell value using erb - ruby on rails", "body": "<p>I think the simplest solution will be to create CSS classes for each action, something for example:</p>\n\n<pre><code>&lt;style&gt;\n  .none    { background-color: blue; }\n  .hit     { background-color: red; }\n  .miss    { background-color: yellow; }\n  .ship    { background-color: white; }\n  .special { background-color: green; }\n&lt;/style&gt;\n</code></pre>\n\n<p>And then just add the action (i.e. <code>@grid[row][column]['action']</code>) in the <code>class</code> attribute for <code>td</code> tag:</p>\n\n<pre><code>&lt;% for column in 0..9 %&gt;\n  &lt;td class=\"&lt;%= @grid[row][column]['action'] %&gt;\"&gt;&lt;/td&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<hr>\n\n<p>Not related to your question, but worth noting: You should also opt to use <code>each</code> instead of <code>for</code>, is more idiomatic.</p>\n\n<p>For example, your view code could be refactored to:</p>\n\n<pre><code>&lt;table class=\"table table-striped table-bordered\"&gt;\n  &lt;% (0..9).each do |row| %&gt;\n    &lt;tr&gt;\n      &lt;% (0..9).each do |column| %&gt;\n        &lt;td class=\"&lt;%= @grid[row][column]['action'] %&gt;\"&gt;&lt;/td&gt;\n      &lt;% end %&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8220950, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-WTjL39OZejg/AAAAAAAAAAI/AAAAAAAABxs/9e0vh7ItZz4/photo.jpg?sz=128", "display_name": "Bobby Bonchev", "link": "https://stackoverflow.com/users/8220950/bobby-bonchev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 44809862, "answer_count": 1, "score": -1, "last_activity_date": 1498674297, "creation_date": 1498661533, "last_edit_date": 1498673426, "question_id": 44805946, "link": "https://stackoverflow.com/questions/44805946/styling-table-cell-different-colors-depending-on-the-cell-value-using-erb-ruby", "title": "Styling table cell different colors depending on the cell value using erb - ruby on rails", "body": "<p>I am currently doing the board for a battleship game on ruby on rails. \nI am stuck on how to change the color of the table cell (depending which of the values in the array @actions is inside. I tryed using case statement and if'statement in the html.erb  but I cant work out the right syntax. And another thing I am wondering: should I do a helper method for this and use it in the html, instead of coding in there?</p>\n\n<p>Here is the controller: </p>\n\n<pre><code>class BoardsController &lt; ApplicationController\n  def new\n      @actions = ['none', 'hit', 'miss', 'ship', 'special']\n      @grid = []\n      for row in 0..9\n          @grid.push([])\n          for column in 0..9\n            @grid[row].push({\n                'action' =&gt; @actions.sample\n            })\n          end\n      end\n  end\nend\n</code></pre>\n\n<p>Here is the view:</p>\n\n<pre><code>&lt;table class=\"table table-striped table-bordered\"&gt;\n    &lt;% for row in 0..9 %&gt;\n        &lt;tr&gt;\n            &lt;% for column in 0..9 %&gt;\n                &lt;td&gt;\n                    &lt;%= @grid[row][column]['action'] %&gt;\n                &lt;/td&gt;\n            &lt;% end %&gt;\n        &lt;/tr&gt;\n    &lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n"}, {"tags": ["ruby", "capistrano", "unicorn"], "answers": [{"tags": [], "owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "is_accepted": true, "score": 1, "last_activity_date": 1498725467, "creation_date": 1498725467, "answer_id": 44820146, "question_id": 44805200, "link": "https://stackoverflow.com/questions/44805200/unicorn-downs-for-few-seconds-after-usr2-and-quit-signals-should-not/44820146#44820146", "title": "Unicorn downs for few seconds after USR2 and QUIT signals (Should not)", "body": "<p>This is an expected behavior:</p>\n\n<blockquote>\n  <p>Supervisord requires the unicorn process to not daemonize. Also sending SIGUSR2 to unicorn causes the old master to die. Since <em>supervisord watches the old master</em> <strong>this will cause it to consider the application as exited</strong>, even tho it's running with a new process id. <strong>Finally Supervisor will try to restart the application, and fail to do so because all sockets are in use by the new unicorn master.</strong></p>\n</blockquote>\n\n<p>Solution:</p>\n\n<ol>\n<li>Either use -D option and start your unicorn rails app yourself without systemd/supervisord. Then USR2 will work.</li>\n<li>Or use unicornherder for wrapper. This will do the job for you. No downtime.</li>\n</ol>\n\n<p>See link: <a href=\"https://weluse.de/blog/zero-downtime-deployments-with-unicorn-and-supervisord.html\" rel=\"nofollow noreferrer\">Unicorn + Systemd/Supervisord &amp; Zero Downtime = unicornherder</a></p>\n"}], "owner": {"reputation": 1315, "user_id": 7412183, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/a73ddfb4eba2ce63e534ab68317210dc?s=128&d=identicon&r=PG&f=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/7412183/dennis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "accepted_answer_id": 44820146, "answer_count": 1, "score": 0, "last_activity_date": 1498725467, "creation_date": 1498659613, "last_edit_date": 1498659994, "question_id": 44805200, "link": "https://stackoverflow.com/questions/44805200/unicorn-downs-for-few-seconds-after-usr2-and-quit-signals-should-not", "title": "Unicorn downs for few seconds after USR2 and QUIT signals (Should not)", "body": "<p>I have a very basic app with unicorn. Rails 5.1 app that simply echos/prints \"Hello World\". For the tests i gave 4 workers.</p>\n\n<p>unicorn.rb:</p>\n\n<pre><code>worker_processes 4\npreload_app true\n\ntimeout 30\nlisten '127.0.0.1:3000', :tcp_nopush =&gt; true, :backlog =&gt; 4096\n# Logging\n...\n</code></pre>\n\n<p>Now, I send <code>USR2</code> signal to master process. Master process successfully received my signal and created another master then marked this as an \"<em>old</em>\" and write PID to an <code>oldbin</code> file</p>\n\n<p>Problem starts here. When I make sure second master and their childs created, I send <code>QUIT</code> to <strong>old</strong> master. Problem is exactly here. When old master receives <code>QUIT</code>, The whole new and old masters and childs dropped and re-created. This makes my system down for few seconds.</p>\n\n<p>Basically, New master kill itself and then re-create. Why? What am I doing wrong here? I thought this is zero downtime. I can assure you I have downtime for 3-5 seconds.</p>\n\n<p><em>I checked, old master creates new master with PID 5 (for example) and their childs as 6, 7, 8, 9. When I quit from old one, new master becomes 10 and workers becomes 11,12,13,14. Simply shows that both old and new ones quit and re-<strong>re</strong>-created.</em></p>\n\n<p>I do not use <code>-D</code> command. I use foreman to generate <code>systemd</code> file and this is how it looks like:</p>\n\n<pre><code>[Unit]\nPartOf=bp-web.target\n\n[Service]\nUser=Pratha\nWorkingDirectory=/var/www/app/releases/20170628140005\nEnvironment=PORT=%i\nExecStart=/bin/bash -lc 'exec bundle exec unicorn -E production -c config/unicorn.rb'\nRestart=always\nStandardInput=null\nStandardOutput=syslog\nStandardError=syslog\nSyslogIdentifier=%n\nKillMode=mixed\nTimeoutStopSec=5\n</code></pre>\n\n<ol>\n<li>I use capistrano for release-cycle and deployment.</li>\n<li>If I use puma with threads (even 16 worker 50 threads) i get real \"zero downtime\".</li>\n</ol>\n"}, {"tags": ["ruby", "capistrano", "capistrano3", "sshkit"], "answers": [{"tags": [], "owner": {"reputation": 495, "user_id": 490594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c927dfc2453b77d663e9b75a6ba0a7b0?s=128&d=identicon&r=PG", "display_name": "ry_donahue", "link": "https://stackoverflow.com/users/490594/ry-donahue"}, "is_accepted": true, "score": 0, "last_activity_date": 1498739701, "creation_date": 1498739701, "answer_id": 44825304, "question_id": 44804405, "link": "https://stackoverflow.com/questions/44804405/ruby-sshkit-ipv6-string-addressing-issues/44825304#44825304", "title": "Ruby sshkit IPv6 string addressing issues", "body": "<p>There is a bug with SSHKit at the moment which I am planning to submit a PR for. Essentially the trailing bytes are swallowed as the port number unless specifically denoted. </p>\n\n<pre><code>### Without port number, it parses incorrectly\nSSHKit::Host.new '[2001:db8:85a3:8d3:1319:8a2e:370:7348]'\n # =&gt; #&lt;SSHKit::Host:0x007fc12318d7d8 @keys=[], @local=false, @user=nil, @hostname=\"2001:db8:85a3:8d3:1319:8a2e:370\", @port=7348&gt;\n</code></pre>\n\n<p>The work around is to specify the port</p>\n\n<pre><code>### With port number it works\nSSHKit::Host.new '[2001:db8:85a3:8d3:1319:8a2e:370:7348]:22'\n # =&gt; #&lt;SSHKit::Host:0x007fc1231e46c8 @keys=[], @local=false, @user=nil, @hostname=\"2001:db8:85a3:8d3:1319:8a2e:370:7348\", @port=22&gt;\n</code></pre>\n"}], "owner": {"reputation": 495, "user_id": 490594, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c927dfc2453b77d663e9b75a6ba0a7b0?s=128&d=identicon&r=PG", "display_name": "ry_donahue", "link": "https://stackoverflow.com/users/490594/ry-donahue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 44825304, "answer_count": 1, "score": 1, "last_activity_date": 1498739701, "creation_date": 1498657783, "question_id": 44804405, "link": "https://stackoverflow.com/questions/44804405/ruby-sshkit-ipv6-string-addressing-issues", "title": "Ruby sshkit IPv6 string addressing issues", "body": "<p>I'm sure this is an issue on my end that I'm fundamentally misunderstanding. I am using <code>sshkit</code> to connect to and upload some files to a server with IPv6 addressing. </p>\n\n<p>I can SSH into a server with an address like so:</p>\n\n<p><code>2001:aaa:bbb:cc:dddd:eeee:ffff:gggg\n</code></p>\n\n<p>There is no issues until I try to leverage <code>sshkit</code> to do the same. The below example illustrates how the same IPv6 string is represented in an array (which has many addresses) within the script I am running:</p>\n\n<p><code>\non [\"[2001:aaa:bbb:cc:dddd:eeee:ffff:gggg]\"], in: :parallel do |host|\n  #some stuff\nend\n</code></p>\n\n<p>What I end up seeing is:</p>\n\n<p><code>Exception on host 2001:aaa:bbb:cc:dddd:eeee:ffff caught: getaddrinfo: nodename nor servname provided, or not known</code></p>\n\n<p>Note the trailing byte seems to be truncated off? Is there a different way I should be formatting that IPv6 address string?</p>\n"}, {"tags": ["ruby", "chef-infra", "cookbook", "berkshelf"], "comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1498683421, "post_id": 44804340, "comment_id": 76605433, "body": "How are you using Chef? Is this inside Test Kitchen?"}, {"owner": {"reputation": 1563, "user_id": 6190803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c37e63efbfed8edb380f030228279c30?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/6190803/dylan"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1498782838, "post_id": 44804340, "comment_id": 76654485, "body": "Chef-client/chef-solo"}], "answers": [{"comments": [{"owner": {"reputation": 1563, "user_id": 6190803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c37e63efbfed8edb380f030228279c30?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/6190803/dylan"}, "edited": false, "score": 0, "creation_date": 1498840220, "post_id": 44837152, "comment_id": 76683008, "body": "so i ran <code>sudo berks vendor</code> added depends &#39;patch&#39; to the metadata.rb and ran chef-client --local and same error"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 1563, "user_id": 6190803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c37e63efbfed8edb380f030228279c30?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/6190803/dylan"}, "edited": false, "score": 0, "creation_date": 1498849160, "post_id": 44837152, "comment_id": 76687256, "body": "With local mode you would need to make sure the cookbooks are located in <code>.&#47;cookbooks&#47;</code> specifically, not <code>.</code>. As I said though, non-Server workflows are much less documented as they are advanced-level stuff and so we assume you are taking responsibility for making it work."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1498784940, "creation_date": 1498784940, "answer_id": 44837152, "question_id": 44804340, "link": "https://stackoverflow.com/questions/44804340/using-a-chef-cookbook-in-my-own-cookbook-error/44837152#44837152", "title": "Using a chef cookbook in my own cookbook error", "body": "<p>There is no direct link between Berkshelf and either of those. You need to use <code>berks upload</code> to send things to the Chef server for use with <code>chef-client</code>, and for <code>chef-solo</code> the workflow is up to you (though will probably involve <code>berks vendor</code> to write the cookbooks out at some point). You also need <code>depends 'patch'</code> in your <code>metadata.rb</code>.</p>\n"}], "owner": {"reputation": 1563, "user_id": 6190803, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c37e63efbfed8edb380f030228279c30?s=128&d=identicon&r=PG&f=1", "display_name": "Dylan", "link": "https://stackoverflow.com/users/6190803/dylan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "accepted_answer_id": 44837152, "answer_count": 1, "score": 0, "last_activity_date": 1498784940, "creation_date": 1498657597, "question_id": 44804340, "link": "https://stackoverflow.com/questions/44804340/using-a-chef-cookbook-in-my-own-cookbook-error", "title": "Using a chef cookbook in my own cookbook error", "body": "<p>So I am new to chef and want to use chef-patch in my own recipes. I added <code>cookbook 'patch', '~&gt; 2.2.1'</code> to my Berksfile and did <code>sudo berks install\n</code> and it installs it. But when I run my recipe it says <code>ERROR: undefined method 'replace' for #&lt;Chef::Recipe:0x00000003cab450&gt;</code> </p>\n\n<p>Is there something I need to add to my fix.rb code. </p>\n\n<pre><code>replace \"/etc/login.defs\" do\n       replace \"PASS_MAX_DAYS 60\"\n       with \"PASS_MAX_DAYS 59\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "camaleon"], "comments": [{"owner": {"reputation": 26718, "user_id": 4800652, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bsfAl.jpg?s=128&g=1", "display_name": "Bharath", "link": "https://stackoverflow.com/users/4800652/bharath"}, "edited": false, "score": 0, "creation_date": 1498985048, "post_id": 44804194, "comment_id": 76716817, "body": "You can use <code>current_theme.the_posts.where(category: &#39;fruits&#39;)</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "edited": false, "score": 0, "creation_date": 1499166922, "post_id": 44902712, "comment_id": 76785729, "body": "this is awesome, i can&#39;t express how much glad i am, thank you so much for this, can you please tell me from where did you get this? i mean do you have any link where this information is available."}, {"owner": {"reputation": 76, "user_id": 562369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83341a55a487b45ff7114e934e0d0299?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Ferreira", "link": "https://stackoverflow.com/users/562369/jo%c3%a3o-ferreira"}, "reply_to_user": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "edited": false, "score": 1, "creation_date": 1504686453, "post_id": 44902712, "comment_id": 79101095, "body": "Camaleon CMS documentation is not the best and most of the stuff I just go look at the source code."}], "tags": [], "owner": {"reputation": 76, "user_id": 562369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/83341a55a487b45ff7114e934e0d0299?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Ferreira", "link": "https://stackoverflow.com/users/562369/jo%c3%a3o-ferreira"}, "is_accepted": true, "score": 1, "last_activity_date": 1499162113, "creation_date": 1499162113, "answer_id": 44902712, "question_id": 44804194, "link": "https://stackoverflow.com/questions/44804194/how-to-filter-posts-by-category-in-camaleon-cms/44902712#44902712", "title": "How to filter posts by category in Camaleon CMS?", "body": "<p>Try finding the category first:</p>\n\n<pre><code>category = current_site.the_full_categories.find_by(name: 'Fruits')\n</code></pre>\n\n<p>then decorate and get the associated posts:</p>\n\n<pre><code>category.decorate.the_posts\n</code></pre>\n"}], "owner": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 1, "accepted_answer_id": 44902712, "answer_count": 1, "score": -1, "last_activity_date": 1504948641, "creation_date": 1498657230, "last_edit_date": 1504948641, "question_id": 44804194, "link": "https://stackoverflow.com/questions/44804194/how-to-filter-posts-by-category-in-camaleon-cms", "title": "How to filter posts by category in Camaleon CMS?", "body": "<p>I am trying to filter posts by category in my Rails project, I am using Camaleon CMS. My basic requirement is to display only specific posts.</p>\n\n<p>For example, only those posts to be shown who belong to the category \"Fruits\"?</p>\n\n<p>Here is the code I have used:</p>\n\n<pre><code>  &lt;% current_site.the_posts(current_theme.get_field(\"recent_post_type\")).latest.limit(current_theme.get_field(\"home_qty\")).decorate.each do |post| %&gt;\n      &lt;!-- PORTFOLIO ITEM --&gt;\n      &lt;div class=\"col-lg-3 col-md-3 col-sm-6 col-xs-6 text-center discussion-bot-box\"&gt;\n        &lt;h4&gt;&lt;%= post.the_title %&gt; &lt;span&gt;(299)&lt;/span&gt;&lt;/h4&gt;\n        &lt;p&gt;&lt;%= post.the_content.html_safe %&gt;&lt;/p&gt;\n      &lt;/div&gt; &lt;!-- /col --&gt;\n  &lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "return", "argv"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1498657271, "post_id": 44804028, "comment_id": 76588275, "body": "what is the desired input/output?"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 8183051, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/38f3e3f420d0fbbf4f25e069716db1cf?s=128&d=identicon&r=PG&f=1", "display_name": "Dimrak", "link": "https://stackoverflow.com/users/8183051/dimrak"}, "edited": false, "score": 0, "creation_date": 1498657446, "post_id": 44804217, "comment_id": 76588426, "body": "Thanks, I actually tried with if as well but still did not work as supposed. I don&#39;t know where it actually failed with the if as I think I tried that option don&#39;t, anyways thank you very much"}, {"owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "reply_to_user": {"reputation": 19, "user_id": 8183051, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/38f3e3f420d0fbbf4f25e069716db1cf?s=128&d=identicon&r=PG&f=1", "display_name": "Dimrak", "link": "https://stackoverflow.com/users/8183051/dimrak"}, "edited": false, "score": 0, "creation_date": 1498657575, "post_id": 44804217, "comment_id": 76588537, "body": "It works for me, i.e. prints all combinations of letters, starting from <code>aaaa</code> to <code>abcd</code> and then prints the file&#39;s contents. Isn&#39;t that what you described in the question?"}, {"owner": {"reputation": 19, "user_id": 8183051, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/38f3e3f420d0fbbf4f25e069716db1cf?s=128&d=identicon&r=PG&f=1", "display_name": "Dimrak", "link": "https://stackoverflow.com/users/8183051/dimrak"}, "edited": false, "score": 0, "creation_date": 1498657702, "post_id": 44804217, "comment_id": 76588649, "body": "Yes that was what I wanted, don&#39;t know where it was failing but printing the letters and return and print the txt file was not happening. Now all good"}], "tags": [], "owner": {"reputation": 2262, "user_id": 4101569, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/15c4c64e58bc5cdeec8e7ce067131a54?s=128&d=identicon&r=PG", "display_name": "katafrakt", "link": "https://stackoverflow.com/users/4101569/katafrakt"}, "is_accepted": true, "score": 0, "last_activity_date": 1498657284, "creation_date": 1498657284, "answer_id": 44804217, "question_id": 44804028, "link": "https://stackoverflow.com/questions/44804028/return-the-for-loops-and-print-txt-file/44804217#44804217", "title": "Return the for-loops and print txt file", "body": "<p>This is not how <code>case</code> works, you should use <code>if</code> instead:</p>\n\n<pre><code>def words(target)\n  filename = ARGV.first\n\n txt = open(filename)\n\n  ('a'..'z').each do |i|\n    ('a'..'z').each do |j|\n      ('a'..'z').each do |h|\n        ('a'..'z').each do |g|\n          together = i+j+h+g\n          print together\n\n          if together == target\n            return print txt.read\n          end\n        end\n      end\n    end\n  end\nend\n\nwords(\"abcd\")\n</code></pre>\n\n<p>Or, if you insist on using <code>case</code> (for some reason):</p>\n\n<pre><code>case together\n  when target\n    return print txt.read\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498660339, "post_id": 44805181, "comment_id": 76590891, "body": "I wasn&#39;t aware of <code>repeated_permutation</code>. Nice!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1498659578, "creation_date": 1498659578, "answer_id": 44805181, "question_id": 44804028, "link": "https://stackoverflow.com/questions/44804028/return-the-for-loops-and-print-txt-file/44805181#44805181", "title": "Return the for-loops and print txt file", "body": "<pre><code>('a'..'z').\n  to_a.\n  repeated_permutation(4).\n  map(&amp;:join).\n  detect { |w| w == target }\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 8183051, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/38f3e3f420d0fbbf4f25e069716db1cf?s=128&d=identicon&r=PG&f=1", "display_name": "Dimrak", "link": "https://stackoverflow.com/users/8183051/dimrak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 44804217, "answer_count": 2, "score": -1, "last_activity_date": 1498659578, "creation_date": 1498656824, "question_id": 44804028, "link": "https://stackoverflow.com/questions/44804028/return-the-for-loops-and-print-txt-file", "title": "Return the for-loops and print txt file", "body": "<p>I am trying a code, that will open a file when the for - loops method will generate letters and when this letters will be join together and form 'abcd' this will return the script and print the txt file.\nI have tried different possibilities but for the moment only have been able to stop the script and to print all the time letters, also printed the file. But never have been able to make all working together.</p>\n\n<pre><code>def words(target)\n  filename = ARGV.first\n\n txt = open(filename)\n\n  ('a'..'z').each do |i|\n    ('a'..'z').each do |j|\n      ('a'..'z').each do |h|\n        ('a'..'z').each do |g|\n\n   together = i+j+h+g\n   print together\n\ncase together\n when together == target\n  return print txt.read\n\n           end\n         end\n       end\n     end\n   end\n end\n\nwords(\"abcd\")\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "jenkins", "cucumber"], "comments": [{"owner": {"reputation": 1275, "user_id": 3597095, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/60709793/picture?type=large", "display_name": "obizues", "link": "https://stackoverflow.com/users/3597095/obizues"}, "edited": false, "score": 1, "creation_date": 1504277393, "post_id": 44803499, "comment_id": 78966434, "body": "Ever figure this out?"}], "owner": {"reputation": 31, "user_id": 7814275, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--DUxeI2sJp4/AAAAAAAAAAI/AAAAAAAAAFY/dZlR7dwXqmk/photo.jpg?sz=128", "display_name": "Ishan Soni", "link": "https://stackoverflow.com/users/7814275/ishan-soni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 953, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1498658262, "creation_date": 1498655503, "last_edit_date": 1498658262, "question_id": 44803499, "link": "https://stackoverflow.com/questions/44803499/jenkins-dependency-error-with-ruby-runtime-while-installing-cucumber-plugin-bloc", "title": "Jenkins Dependency error with ruby-runtime while installing Cucumber plugin blocks execution of cucumber tests", "body": "<p><strong>Environment</strong>: Live\n<strong>System</strong>: Windows 7 &amp; Windows 10 - 64 bit\n<strong>Browser</strong>: IE &amp; Chrome\n<strong>Version</strong>: Jenkins: 2.60.1 ; Cucumber Plugin: v0.0.2 ; ruby-runtime Plugin: v0.12</p>\n\n<p><strong>Test Steps</strong>:</p>\n\n<ul>\n<li>Install the latest version of Jenkins </li>\n<li>Install all the suggested\nplugins by Jenkins</li>\n<li>Once Jenkins is ready navigate to Manage Jenkins\n-> Manage Plugins -> click on available plugins -> Search for cucumber plugin</li>\n<li>Install Cucumber plugin which comes along with the\nruby-runtime dependency</li>\n<li>Restart Jenkins after download is complete   </li>\n</ul>\n\n<p><strong>Expected Behavior</strong>: Cucumber plugin is installed successfully along with the ruby-runtime dependency</p>\n\n<p><strong>Actual Behavior</strong>: We get an error on Jenkins saying - <em>There are dependency errors loading some plugins: Cucumber Plugin v0.0.2 \u25e6ruby-runtime v0.10 is missing</em>. To fix, install v0.10 or later.</p>\n\n<p>We have tried installing both the plugins through plugins manager &amp; also through manual upload multiple times but we still get the dependency error. When we check in the Jenkins plugins folder on windows then we can see both the plugins there but it is somehow not shown in the installed plugins section on the plugin manager. This is blocking us from running cucumber tests. We have tried re-installing Jenkins &amp; the plugins multiple times but we get the same dependency error.</p>\n\n<p><a href=\"https://i.stack.imgur.com/qCK58.jpg\" rel=\"nofollow noreferrer\">Error Screenshot</a></p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 45, "user_id": 5680084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-rUST4yCqm4U/AAAAAAAAAAI/AAAAAAAAALM/AY3uuMb8QEI/photo.jpg?sz=128", "display_name": "abbas maher", "link": "https://stackoverflow.com/users/5680084/abbas-maher"}, "edited": false, "score": 0, "creation_date": 1498653572, "post_id": 44802623, "comment_id": 76585255, "body": "Side note, this is only displaying the message because i used gets.chomp instead of gets.chomp.to_i"}, {"owner": {"reputation": 45, "user_id": 5680084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-rUST4yCqm4U/AAAAAAAAAAI/AAAAAAAAALM/AY3uuMb8QEI/photo.jpg?sz=128", "display_name": "abbas maher", "link": "https://stackoverflow.com/users/5680084/abbas-maher"}, "edited": false, "score": 0, "creation_date": 1498653647, "post_id": 44802623, "comment_id": 76585320, "body": "Using gets.chomp results in stopping any if statement."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1498653692, "post_id": 44802623, "comment_id": 76585360, "body": "Use <code>next</code> to go to next item of the <code>loop</code>, or <code>break</code> to exit."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 1, "creation_date": 1498653768, "post_id": 44802623, "comment_id": 76585417, "body": "BTW <code>gets.chomp</code> will always be <code>String</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498653875, "post_id": 44802623, "comment_id": 76585497, "body": "And <code>gets.chomp.to_i</code> will always be an integer. Something more complicated is needed here (as in the linked answer, for example)"}, {"owner": {"reputation": 45, "user_id": 5680084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-rUST4yCqm4U/AAAAAAAAAAI/AAAAAAAAALM/AY3uuMb8QEI/photo.jpg?sz=128", "display_name": "abbas maher", "link": "https://stackoverflow.com/users/5680084/abbas-maher"}, "edited": false, "score": 0, "creation_date": 1498659884, "post_id": 44802623, "comment_id": 76590539, "body": "i can use the next feature but how do i make it output the message. I am using gets.chomp.to_i"}], "owner": {"reputation": 45, "user_id": 5680084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-rUST4yCqm4U/AAAAAAAAAAI/AAAAAAAAALM/AY3uuMb8QEI/photo.jpg?sz=128", "display_name": "abbas maher", "link": "https://stackoverflow.com/users/5680084/abbas-maher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "closed_date": 1498653698, "answer_count": 0, "score": 0, "last_activity_date": 1498654431, "creation_date": 1498653357, "last_edit_date": 1498654431, "question_id": 44802623, "link": "https://stackoverflow.com/questions/44802623/ruby-detects-variable-is-string-but-ends-the-script-without-breaking-loop", "closed_reason": "Duplicate", "title": "Ruby detects variable is string, but ends the script without breaking loop", "body": "<p>code:</p>\n\n<pre><code>a = rand(1..100)\nputs \"Guess a number from 1 through 100!\"\ni = 0\nloop do \n    i = i+1\n    b = gets.chomp\n        if b.is_a? String\n        puts \"Only numerical values\"\n    end\n    if b == a\n        puts \"Good Job! You finished in #{i} attempts!\"\n        break\n    end\n    if b&lt;a \n        puts \"Too Low!\"\n    end\n    if b&gt;a\n        puts \"Too High!\"\n    end\n    if b&lt;0\n        puts \"Please input numbers above 0!\"\n    end\n\nend\n</code></pre>\n\n<p>Error Message: </p>\n\n<pre><code>Guess a number from 1 through 100!\nhi\nOnly numerical values\nhi-lo.rb:14:in `&lt;': comparison of String with 38 failed (ArgumentError)\nfrom hi-lo.rb:14:in `block in &lt;main&gt;'\nfrom hi-lo.rb:4:in `loop'\nfrom hi-lo.rb:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>My problem:\nbasically, i want to make it so that ruby will detect when someone inputs a string instead of an integer. Thus resulting in outputting a message that states that you have entered an illegal character. It detects i am entering a string, but it shuts down the code instead of continuing the loop. Any advice? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron", "ruby-on-rails-4.2", "whenever"], "owner": {"reputation": 1048, "user_id": 6166821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LpwuPY2Vfjw/AAAAAAAAAAI/AAAAAAAADS0/aT3BFBVyQEQ/photo.jpg?sz=128", "display_name": "Hasmukh Rathod", "link": "https://stackoverflow.com/users/6166821/hasmukh-rathod"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1498652290, "creation_date": 1498652290, "question_id": 44802197, "link": "https://stackoverflow.com/questions/44802197/whenever-gem-cron-update-in-multiple-server-environment", "title": "Whenever gem: cron update in multiple server environment", "body": "<p>Versions:</p>\n\n<pre><code>Ruby 2.3.1 \nRails 4.2.4 \nWhenever 0.9.7\n</code></pre>\n\n<p>Our configuration:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Vnb8W.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vnb8W.jpg\" alt=\"Source code deployed on NFS.\"></a></p>\n\n<p>I am able to deploy my application on NFS successfully. Both EC2 instances are mounted on NFS, so both server points to same code. All working fine.</p>\n\n<p>The problem is, as i am deploying on NFS, capistrano-whenvever writes/updates cron on NFS, where no crone is executed as its simple file server. </p>\n\n<blockquote>\n  <p>I would like to write cron jobs on EC2 instance1  or EC2 instance2.</p>\n</blockquote>\n\n<p>I have gone through <a href=\"https://stackoverflow.com/questions/5065109/whenever-gem-have-cronjob-on-only-one-machine?answertab=votes#tab-top\">whenever gem have cronjob on only one machine?</a>, but didn't succeed. </p>\n\n<p>Any help would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "clockwork"], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 81, "user_id": 6593766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-kEREOEvoVtE/AAAAAAAAAAI/AAAAAAAAAE8/Nr6NjqlGSjw/photo.jpg?sz=128", "display_name": "manish gupta", "link": "https://stackoverflow.com/users/6593766/manish-gupta"}, "edited": false, "score": 0, "creation_date": 1498657635, "post_id": 44803115, "comment_id": 76588581, "body": "It means <code>Configuration</code> caches the config. You should find a way to force it to reload config."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1498654496, "creation_date": 1498654496, "answer_id": 44803115, "question_id": 44802138, "link": "https://stackoverflow.com/questions/44802138/clock-work-restart-a-job-after-a-few-minutes-in-rails/44803115#44803115", "title": "Clock work restart a job after a few minutes in rails", "body": "<p>I can think of:</p>\n\n<pre><code>module Clockwork\n  GET_TIME = -&gt; { Configuration.find_by(key: \"time\") }\n  SETTINGS = { time: GET_TIME.() }\n  every(1.minutes, 'reset settings') do \n    Clockwork::SETTINGS[:time] = Clockwork::GET_TIME.()\n  end\n\n  handler do |job|  \n    puts \"Running #{job}\" \n  end\n\n  if SETTINGS[:time].present?\n    min = SETTINGS[:time].value.to_i     \n    every(min.minutes, 'calculate user details') do\n      User.calculate_time\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6593766, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-kEREOEvoVtE/AAAAAAAAAAI/AAAAAAAAAE8/Nr6NjqlGSjw/photo.jpg?sz=128", "display_name": "manish gupta", "link": "https://stackoverflow.com/users/6593766/manish-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498654496, "creation_date": 1498652125, "last_edit_date": 1498654090, "question_id": 44802138, "link": "https://stackoverflow.com/questions/44802138/clock-work-restart-a-job-after-a-few-minutes-in-rails", "title": "Clock work restart a job after a few minutes in rails", "body": "<p>I am using Clock worker gem for back ground process</p>\n\n<p>I have a Configuration table which contains key and value.</p>\n\n<p>My clock.rb file </p>\n\n<blockquote>\n<pre><code>require 'clockwork'\nrequire './config/boot'\nrequire './config/environment'\nmodule Clockwork\n  handler do |job|  \n    puts \"Running #{job}\" \n  end\n\n  time = Configuration.find_by(:key=&gt;\"time\") \n  if time.present?\n    min = time.value.to_i     \n    every(min.minutes, 'calculate user details') { \n           User.calculate_time}    \n  end\nend\n</code></pre>\n</blockquote>\n\n<p>When run the worker:  config/clock.rb</p>\n\n<p>This will work fine but when  i am changing time from Configuration,\nHow worker will work without restart the clock worker file ??</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 1450, "user_id": 8147165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Bx9DE.png?s=128&g=1", "display_name": "michjnich", "link": "https://stackoverflow.com/users/8147165/michjnich"}, "edited": false, "score": 0, "creation_date": 1498649740, "post_id": 44801198, "comment_id": 76582354, "body": "Same error as above I&#39;m afraid, only the server output displays the changed code (so I know it&#39;s picked it up, and besides, I did stop and start it just to make sure)."}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1498649744, "post_id": 44801198, "comment_id": 76582359, "body": "<code>&#39;data-turbolinks-track&#39; =&gt; &#39;reload&#39;</code> should work <a href=\"https://github.com/turbolinks/turbolinks#reloading-when-assets-change\" rel=\"nofollow noreferrer\">github.com/turbolinks/turbolinks#reloading-when-assets-chang&zwnj;&#8203;e</a>"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 1, "creation_date": 1498649813, "post_id": 44801198, "comment_id": 76582398, "body": "you will not get error in css but in the html file where you are including it"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1498649829, "post_id": 44801198, "comment_id": 76582411, "body": "check the recent changes if you did any"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "edited": false, "score": 0, "creation_date": 1498649917, "post_id": 44801198, "comment_id": 76582469, "body": "if you comment or remove link <code>&lt;%= stylesheet_link_tag    &#39;application&#39;, media: &#39;all&#39;, &#39;data-turbolinks-track&#39;: &#39;reload&#39; %&gt;</code>, then is it work?"}, {"owner": {"reputation": 1450, "user_id": 8147165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Bx9DE.png?s=128&g=1", "display_name": "michjnich", "link": "https://stackoverflow.com/users/8147165/michjnich"}, "edited": false, "score": 0, "creation_date": 1498649938, "post_id": 44801198, "comment_id": 76582478, "body": "Should I even be getting to this page? Why is it not directed to the index page as per the routes.rb file?"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 1450, "user_id": 8147165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Bx9DE.png?s=128&g=1", "display_name": "michjnich", "link": "https://stackoverflow.com/users/8147165/michjnich"}, "edited": false, "score": 0, "creation_date": 1498649976, "post_id": 44801198, "comment_id": 76582500, "body": "@urbanespaceman it redirect to index page but the layout application.html.erb is called"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 1450, "user_id": 8147165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Bx9DE.png?s=128&g=1", "display_name": "michjnich", "link": "https://stackoverflow.com/users/8147165/michjnich"}, "edited": false, "score": 0, "creation_date": 1498650014, "post_id": 44801198, "comment_id": 76582529, "body": "@urbanespaceman if you dont want layout then add <code>render layout: false</code> in controller action"}, {"owner": {"reputation": 1450, "user_id": 8147165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Bx9DE.png?s=128&g=1", "display_name": "michjnich", "link": "https://stackoverflow.com/users/8147165/michjnich"}, "edited": false, "score": 0, "creation_date": 1498650240, "post_id": 44801198, "comment_id": 76582698, "body": "If I comment both the lines in there (the stylesheet _link_tag and the javascript_include_tag) then it works!"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "edited": false, "score": 0, "creation_date": 1498650274, "post_id": 44801198, "comment_id": 76582719, "body": "great!! try to remove <code>&#39;data-turbolinks-track&#39;: &#39;reload&#39;</code>"}, {"owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "reply_to_user": {"reputation": 1450, "user_id": 8147165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Bx9DE.png?s=128&g=1", "display_name": "michjnich", "link": "https://stackoverflow.com/users/8147165/michjnich"}, "edited": false, "score": 0, "creation_date": 1498650330, "post_id": 44801198, "comment_id": 76582770, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/147813/discussion-between-puneet18-and-urbanespaceman\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 4527, "user_id": 5497690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/577c8ad14fffb59cd619e43634c51dad?s=128&d=identicon&r=PG&f=1", "display_name": "puneet18", "link": "https://stackoverflow.com/users/5497690/puneet18"}, "is_accepted": false, "score": 1, "last_activity_date": 1498653302, "last_edit_date": 1498653302, "creation_date": 1498649464, "answer_id": 44801198, "question_id": 44801088, "link": "https://stackoverflow.com/questions/44801088/first-rails-application-routes-rb-not-leading-to-right-page/44801198#44801198", "title": "First rails application: routes.rb not leading to right page(?)", "body": "<p>Add below lines in <code>/assets/stylesheets/application.css</code></p>\n\n<pre><code>/*\n * This is a manifest file that'll be compiled into application.css, which will include all the files\n * listed below.\n *\n * Any CSS and SCSS file within this directory, lib/assets/stylesheets, vendor/assets/stylesheets,\n * or any plugin's vendor/assets/stylesheets directory can be referenced here using a relative path.\n *\n * You're free to add application-wide styles to this file and they'll appear at the bottom of the\n * compiled file so the styles you add here take precedence over styles defined in any styles\n * defined in the other CSS/SCSS files in this directory. It is generally better to create a new\n * file per style scope.\n *\n *= require_tree .\n *= require_self\n */\n</code></pre>\n"}], "owner": {"reputation": 1450, "user_id": 8147165, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/Bx9DE.png?s=128&g=1", "display_name": "michjnich", "link": "https://stackoverflow.com/users/8147165/michjnich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1498653302, "creation_date": 1498649093, "question_id": 44801088, "link": "https://stackoverflow.com/questions/44801088/first-rails-application-routes-rb-not-leading-to-right-page", "title": "First rails application: routes.rb not leading to right page(?)", "body": "<p>Apologies in advance if this is so basic I probbaly shouldn't post it here. I'm not even sure if the title actually describes the issue. I am just starting to look at Ruby on Rails, and am following this page to set up \"my first application\": <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/getting_started.html</a></p>\n\n<p>Now, when I get to the point where I add</p>\n\n<pre><code>root 'welcome#index'\n</code></pre>\n\n<p>Into the routes.rb file and try and access it, it all goes wrong. First I thought it was a permissions issue, but I can access the views/layouts/welcome/index.html.erb file directly in the browser. </p>\n\n<p>I'm so new to this that I haven't got far enough to know what I'm looking for in troubleshooting, hence this post. </p>\n\n<p>When starting the rails server, I do get what looks like errors on restart and hangup signals, but I doubt this is the problem. Output listed here just in case.  </p>\n\n<pre><code>=&gt; Booting Puma\n=&gt; Rails 5.1.2 application starting in development on http://localhost:3000\n=&gt; Run `rails server -h` for more startup options\n*** SIGUSR2 not implemented, signal based restart unavailable!\n*** SIGUSR1 not implemented, signal based restart unavailable!\n*** SIGHUP not implemented, signal based logs reopening unavailable!\nPuma starting in single mode...\n* Version 3.9.1 (ruby 2.3.3-p222), codename: Private Caller\n* Min threads: 5, max threads: 5\n* Environment: development\n* Listening on tcp://0.0.0.0:3000\nUse Ctrl-C to stop\n</code></pre>\n\n<p>Loading the root page gives the following server output: </p>\n\n<pre><code>Started GET \"/\" for 127.0.0.1 at 2017-06-28 13:17:23 +0200\nProcessing by WelcomeController#index as HTML\n  Rendering welcome/index.html.erb within layouts/application\n  Rendered welcome/index.html.erb within layouts/application (13.0ms)\nCompleted 500 Internal Server Error in 3742ms\n\n\n\nActionView::Template::Error (TypeError: Object doesn't support this property or method):\n     5:\n     6:     &lt;%= csrf_meta_tags %&gt;\n     7:\n     8:     &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n     9:     &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n    10:\n    11:     &lt;/head&gt;\n\napp/views/layouts/application.html.erb:8:in `_app_views_layouts_application_html_erb___750167210_57076860'\n</code></pre>\n\n<p>It kind of looks to me as though it does load the index page, but then something else triggers and it's redirected to a page that doesn't work. The content of the page it's directed to (views/layouts/application.html.erb) is: </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Blog&lt;/title&gt;\n\n    &lt;%= csrf_meta_tags %&gt;\n\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n\n    &lt;/head&gt;\n\n  &lt;body&gt;\n\n    &lt;%= yield %&gt;\n\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Content of routes.rb for reference is: </p>\n\n<pre><code>Rails.application.routes.draw do\n  get 'welcome/index'\n\n  root 'welcome#index'\n\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "include", "activesupport-concern"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1502804108, "last_edit_date": 1502804108, "creation_date": 1498649046, "answer_id": 44801068, "question_id": 44800673, "link": "https://stackoverflow.com/questions/44800673/how-to-include-concerns-module-with-only-actions-in-rails-controllers/44801068#44801068", "title": "how to include concerns module with only actions in rails controllers", "body": "<p>AFAIK this is impossible out of the box. I use the following approach:</p>\n\n<pre><code>PLAN_FINDING_USE = [:show]\ninclude Concerns::V1::PlanFinding\n</code></pre>\n\n<p>and</p>\n\n<pre><code>included do |base|\n  actions = base.const_defined?('PLAN_FINDING_USE') &amp;&amp;\n            base.const_get('PLAN_FINDING_USE')\n\n  if actions.is_a?(Array)\n    before_action :set_plan, only: actions\n  else\n    before_action :set_plan\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 1938948, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2726abd06f04d0499d4668316e5dbda8?s=128&d=identicon&r=PG", "display_name": "blankdeng", "link": "https://stackoverflow.com/users/1938948/blankdeng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1207, "favorite_count": 0, "accepted_answer_id": 44801068, "answer_count": 1, "score": 5, "last_activity_date": 1502804108, "creation_date": 1498647806, "question_id": 44800673, "link": "https://stackoverflow.com/questions/44800673/how-to-include-concerns-module-with-only-actions-in-rails-controllers", "title": "how to include concerns module with only actions in rails controllers", "body": "<p>Below is my concern <code>Concerns::V1::PlanFinding</code> for controllers. Depending on <code>base</code> controllers and actions, it calls <code>set_plan</code></p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code> extend ActiveSupport::Concern\n  attr_accessor :plan, :custom_key\n\n  included do |base|\n    actions = case base.to_s\n              when \"Api::V1::PlansController\"\n                [:show, :total_prices, :update]\n              when \"Dist::PlansController\"\n                [:show, :total_prices, :flight_info]\n              end\n\n    if actions.present?\n      before_action :set_plan, only: actions\n    else\n      before_action :set_plan\n    end\n  end\n\n  def set_plan\n    @plan = Model.find('xxx')\n    @custom_key = params[:custom_key] || SecureRandom.hex(10)\n  end\n</code></pre>\n\n<p>below is one controller where I call the concern from:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Dist::PlansController\n   include ::Concerns::V1::PlanFinding\n</code></pre>\n\n<p>This runs fine. but the concern code is too much glued with the <code>base</code> controller.  </p>\n\n<p>My question is:  Due to we cannot use <code>only</code> option like below in controllers. How to implement my own <code>only</code> option for include, or to find a new way to decouple the <code>base</code> controllers from the concern:</p>\n\n<pre><code>include Concerns::V1::PlanFinding, only: [:show]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1498647284, "post_id": 44800285, "comment_id": 76580793, "body": "Can you make clear the context of this code?"}, {"owner": {"reputation": 11, "user_id": 8090069, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1315243681864013/picture?type=large", "display_name": "Kushal Warke", "link": "https://stackoverflow.com/users/8090069/kushal-warke"}, "reply_to_user": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1498648675, "post_id": 44800285, "comment_id": 76581684, "body": "I am getting this json object as a output of HTTP GET request. Now I just want to count the number of items inside &quot;fruits&quot; and &quot;trees&quot;. I have used these names instead of the info I am actually getting. Just not to disclose the information. Can you help now?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1498657395, "post_id": 44800285, "comment_id": 76588384, "body": "<code>json = JSON.parse(jsonobject)[&quot;trees&quot;].size</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 8090069, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1315243681864013/picture?type=large", "display_name": "Kushal Warke", "link": "https://stackoverflow.com/users/8090069/kushal-warke"}, "edited": false, "score": 0, "creation_date": 1498710800, "post_id": 44801769, "comment_id": 76612896, "body": "That is actually the issue. I am getting the input without single quotes. How to make it to string first in ruby?"}, {"owner": {"reputation": 11, "user_id": 8090069, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1315243681864013/picture?type=large", "display_name": "Kushal Warke", "link": "https://stackoverflow.com/users/8090069/kushal-warke"}, "edited": false, "score": 0, "creation_date": 1498716149, "post_id": 44801769, "comment_id": 76614770, "body": "It worked. Thanks a ton. A small doubt. If i have jsonobject as a output of some other program and I want to count the elements how can I do that without writing it in separate program. Can I write jsonobject = %qjsonobject?"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "reply_to_user": {"reputation": 11, "user_id": 8090069, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1315243681864013/picture?type=large", "display_name": "Kushal Warke", "link": "https://stackoverflow.com/users/8090069/kushal-warke"}, "edited": false, "score": 0, "creation_date": 1498727339, "post_id": 44801769, "comment_id": 76621745, "body": "Is it possible to share the code where actually you receive the jsonobject. What language you use in that another program. It would be better if you can post a new question related to this."}], "tags": [], "owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "is_accepted": true, "score": 6, "last_activity_date": 1498714140, "last_edit_date": 1498714140, "creation_date": 1498651138, "answer_id": 44801769, "question_id": 44800285, "link": "https://stackoverflow.com/questions/44800285/json-count-number-of-items-in-ruby/44801769#44801769", "title": "JSON - Count number of items in Ruby", "body": "<p>First of all, a small correction. Your jsonobject should be a string. Enclose the entire jsonobject in single quotes.</p>\n\n<pre><code>jsonobject = '{\"fruits\": [{\"name\": \"A\",\"uri\": \"a.com\"},{\"name\": \"B\",\"uri\": \"b.com\"}],\"trees\": [{\"name\": \"t1\",\"uri\": \"t1.com\",\"status\": null},{\"name\": \"t2\",\"uri\": \"t2.com\",\"status\": null}]}'\n</code></pre>\n\n<p>You can make use of the JSON library of ruby here...</p>\n\n<p>number of trees</p>\n\n<pre><code>JSON.parse(jsonobject)[\"trees\"].size\n</code></pre>\n\n<p>number of fruits</p>\n\n<pre><code>JSON.parse(jsonobject)[\"fruits\"].size\n</code></pre>\n\n<p><strong>UPDATE:</strong>\nHow to make the jsonobject as string</p>\n\n<p>jsonobject = %q({\"fruits\": [{\"name\": \"A\",\"uri\": \"a.com\"},{\"name\": \"B\",\"uri\": \"b.com\"}],\"trees\": [{\"name\": \"t1\",\"uri\": \"t1.com\",\"status\": null},{\"name\": \"t2\",\"uri\": \"t2.com\",\"status\": null}]})</p>\n"}], "owner": {"reputation": 11, "user_id": 8090069, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/1315243681864013/picture?type=large", "display_name": "Kushal Warke", "link": "https://stackoverflow.com/users/8090069/kushal-warke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1713, "favorite_count": 0, "accepted_answer_id": 44801769, "answer_count": 1, "score": -4, "last_activity_date": 1498714140, "creation_date": 1498646671, "last_edit_date": 1498648603, "question_id": 44800285, "link": "https://stackoverflow.com/questions/44800285/json-count-number-of-items-in-ruby", "title": "JSON - Count number of items in Ruby", "body": "<p>I have a Json object as follows: </p>\n\n<pre><code>jsonobject = {\n\"fruits\": [\n    {\n        \"name\": \"A\",\n        \"uri\": \"a.com\"\n    },\n    {\n        \"name\": \"B\",\n        \"uri\": \"b.com\"\n    }\n],\n\"trees\": [\n    {\n        \"name\": \"t1\",\n        \"uri\": \"t1.com\",\n        \"status\": null\n    },\n    {\n        \"name\": \"t2\",\n        \"uri\": \"t2.com\",\n        \"status\": null\n    }\n]\n}\n</code></pre>\n\n<p>How to get the number of trees/fruits in Ruby?</p>\n"}, {"tags": ["ruby", "block", "keyword-argument"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1498645624, "post_id": 44798570, "comment_id": 76579726, "body": "Isn&#39;t this just a consequence of ruby&#39;s lexer? <code>def foo(a, b:, c:); end</code> works, whereas <code>def foo(a, (b:, c:)); end</code> give the same error as you encountered? I&#39;m not sure why you&#39;d ever want to use keyword arguments in a block like that, anyway."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1498647396, "post_id": 44798570, "comment_id": 76580888, "body": "It\u2019s ruby parser: <code>(0...a.size).zip(a).each{|i, a:, b:| puts a}</code> <code>#\u21d2 1 3</code>. This rule is also known as \u201cladies first.\u201d"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1498665947, "post_id": 44798570, "comment_id": 76595248, "body": "<a href=\"https://stackoverflow.com/a/20634180/1978251\">Read Here</a> for a great explanation as to how &quot;keyword&quot; arguments are handled from a parameter listing stand point"}], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 111, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1498641932, "creation_date": 1498641932, "question_id": 44798570, "link": "https://stackoverflow.com/questions/44798570/symbol-keys-in-a-hash-are-sometimes-similar-to-keyword-arguments-and-sometimes-n", "title": "Symbol keys in a hash are sometimes similar to keyword arguments and sometimes not", "body": "<p>Symbol keys in a hash seem to be handled similarly as with keyword arguments in the sense that, given hashes with symbol keys,</p>\n\n<pre><code>a = [{a: 1, b: 2}, {a: 3, b: 4}]\n</code></pre>\n\n<p>the corresponding values are referred to by the keyword block argument in this expression:</p>\n\n<pre><code>a.each{|a:, b:| ...}\n</code></pre>\n\n<p>On the other hand, this expression, in which the keyword argument appears within parentheses:</p>\n\n<pre><code>a.each_with_index{|(a:, b:), i| ...}\n</code></pre>\n\n<p>causes a syntax error:</p>\n\n<pre><code>unexpected tLABEL\na.each_with_index{|(a:, b:), i| }\n                      ^\n</code></pre>\n\n<p>Is this an expected feature, or a bug?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 8224017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb59358a7a2962d9a4f642b074d2e240?s=128&d=identicon&r=PG&f=1", "display_name": "Kona", "link": "https://stackoverflow.com/users/8224017/kona"}, "edited": false, "score": 0, "creation_date": 1498647529, "post_id": 44798722, "comment_id": 76580981, "body": "why by queue and not by sidekiq or the the like?"}, {"owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "reply_to_user": {"reputation": 59, "user_id": 8224017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb59358a7a2962d9a4f642b074d2e240?s=128&d=identicon&r=PG&f=1", "display_name": "Kona", "link": "https://stackoverflow.com/users/8224017/kona"}, "edited": false, "score": 0, "creation_date": 1498717222, "post_id": 44798722, "comment_id": 76615250, "body": "If I&#39;m not wrong, Sidekiq also uses queues internally. It&#39;s something that you could use to solve your purpose"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 59, "user_id": 8224017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb59358a7a2962d9a4f642b074d2e240?s=128&d=identicon&r=PG&f=1", "display_name": "Kona", "link": "https://stackoverflow.com/users/8224017/kona"}, "edited": false, "score": 0, "creation_date": 1498719020, "post_id": 44798722, "comment_id": 76616288, "body": "@Kona: what&#39;s the difference between &quot;queue&quot; and &quot;sidekiq&quot;?"}], "tags": [], "owner": {"reputation": 2156, "user_id": 976880, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/bcade31197a5623384d853c3c5fac28a?s=128&d=identicon&r=PG", "display_name": "aBadAssCowboy", "link": "https://stackoverflow.com/users/976880/abadasscowboy"}, "is_accepted": false, "score": 4, "last_activity_date": 1498717134, "last_edit_date": 1498717134, "creation_date": 1498642312, "answer_id": 44798722, "question_id": 44798512, "link": "https://stackoverflow.com/questions/44798512/an-http-request-in-a-custom-validator-in-rails/44798722#44798722", "title": "An http request in a custom validator in Rails", "body": "<p>You would ideally should keep it asynchronous. You will have to rethink the whole flow for the user. </p>\n\n<p>My suggestion would be to use a queuing system. Let the user save his/her account and show them a message that their account is pending validation and will be informed via email.</p>\n\n<p>Meanwhile, push the data to the queue, process the records in the queue one by one (meaning, make the request to the server) and validate. Based on the validation activate or de-activate the account and send an email to the user.</p>\n"}], "owner": {"reputation": 59, "user_id": 8224017, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb59358a7a2962d9a4f642b074d2e240?s=128&d=identicon&r=PG&f=1", "display_name": "Kona", "link": "https://stackoverflow.com/users/8224017/kona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1498717134, "creation_date": 1498641784, "last_edit_date": 1498643654, "question_id": 44798512, "link": "https://stackoverflow.com/questions/44798512/an-http-request-in-a-custom-validator-in-rails", "title": "An http request in a custom validator in Rails", "body": "<p>I have a custom ActiveRecord validator which should do a network/http request as one of the validation checks. Whether or not it does it, depends on the arguments passed to it. When it does it, a request might fail, take a lot of time, a remote server might be down, etc... </p>\n\n<p>Thus it should be sent asynchronously. And probably a user shouldn't wait for it to finish. Because if a server is down, how long will a user have to wait? </p>\n\n<p>At the same time, my validator is mandatory and as long as it's being verified, a model can't be saved in a db.</p>\n\n<p>Therefore, how would I go about implementing that? Validation in ActiveRecord in synchronous.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite", "minitest"], "comments": [{"owner": {"reputation": 4321, "user_id": 454246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bbddaa50ab78479b10ff632869e6a6c?s=128&d=identicon&r=PG", "display_name": "jpgeek", "link": "https://stackoverflow.com/users/454246/jpgeek"}, "edited": false, "score": 1, "creation_date": 1498641458, "post_id": 44798222, "comment_id": 76576867, "body": "Check your test/fixtures/admins.yml for a duplicate id field."}, {"owner": {"reputation": 99, "user_id": 6405590, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/52e40bf3f5bf981aa4dba2f4acb9be3d?s=128&d=identicon&r=PG&f=1", "display_name": "Faisal", "link": "https://stackoverflow.com/users/6405590/faisal"}, "reply_to_user": {"reputation": 4321, "user_id": 454246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0bbddaa50ab78479b10ff632869e6a6c?s=128&d=identicon&r=PG", "display_name": "jpgeek", "link": "https://stackoverflow.com/users/454246/jpgeek"}, "edited": false, "score": 0, "creation_date": 1498642064, "post_id": 44798222, "comment_id": 76577287, "body": "You know what? I have cleared every fixture I have but this one! Thank you so much!"}], "owner": {"reputation": 99, "user_id": 6405590, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/52e40bf3f5bf981aa4dba2f4acb9be3d?s=128&d=identicon&r=PG&f=1", "display_name": "Faisal", "link": "https://stackoverflow.com/users/6405590/faisal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 307, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1498641000, "creation_date": 1498640915, "last_edit_date": 1498641000, "question_id": 44798222, "link": "https://stackoverflow.com/questions/44798222/unique-constraint-failed-error-on-rails-5-with-minitest", "title": "UNIQUE constraint failed Error on Rails 5 with Minitest", "body": "<p>I\u2019m new to unit test and Rails in general. I have a simple Rails application and trying unit test it with the default Minitest and Capybara. Unfortunately, its giving me this error regardless of what's I\u2019m tiring to test </p>\n\n<pre><code>E\n\nError:\nStocksControllerTest#test_the_truth:\nActiveRecord::RecordNotUnique: SQLite3::ConstraintException: UNIQUE constraint failed: admins.email: INSERT INTO \"admins\" (\"created_at\", \"updated_at\", \"id\") VALUES ('2017-06-28 08:49:33.148641', '2017-06-28 08:49:33.148641', 298486374)\n\nbin/rails test test/controllers/stocks_controller_test.rb:10\n</code></pre>\n\n<h1>test/controllers/stocks_controller.rb</h1>\n\n<pre><code>require 'test_helper'\n\nclass StocksControllerTest &lt; ActionDispatch::IntegrationTest\n\n  def setup\n    @base_title = \"Stationery Management System\"\n  end\n\n\n  test \"the truth\" do\n    assert true\n  end\nend\n</code></pre>\n\n<h1>Schema.rb</h1>\n\n<pre><code>ActiveRecord::Schema.define(version: 20170627120530) do\n\n  create_table \"admins\", force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer \"sign_in_count\", default: 0, null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string \"current_sign_in_ip\"\n    t.string \"last_sign_in_ip\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"email\"], name: \"index_admins_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_admins_on_reset_password_token\", unique: true\n  end\n\n  create_table \"stocks\", force: :cascade do |t|\n    t.string \"name\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"admin_id\"\n    t.index [\"admin_id\"], name: \"index_stocks_on_admin_id\"\n  end\n\nend\n</code></pre>\n\n<h1>models/stock.rb</h1>\n\n<pre><code>class Stock &lt; ApplicationRecord\n\n  belongs_to :admin\nend\n</code></pre>\n\n<h1>models/admin.rb</h1>\n\n<pre><code>class Admin &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :stocks, dependent: :destroy\nend\n</code></pre>\n\n<p>Keep in mind that the application seem to function pretty well. I did try to drop reset my test DB but it didn\u2019t help. Would be graceful for any help.</p>\n"}, {"tags": ["ruby", "haml", "erb", "middleman", "kramdown"], "comments": [{"owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "edited": false, "score": 0, "creation_date": 1502462728, "post_id": 44797695, "comment_id": 78235310, "body": "Is it required that you use ERB? It seems that by using both ERB and HAML, you are making things more complicated than they need to be, which means more opportunity for confusing errors or misbehaviors"}, {"owner": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "reply_to_user": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "edited": false, "score": 0, "creation_date": 1502693195, "post_id": 44797695, "comment_id": 78294892, "body": "I am using ERB as a result of <a href=\"https://stackoverflow.com/a/44564396/1226389\">this answer</a> to a simpler version of my question. But if there is HAML solution that will work, I am all for skipping ERB :)"}], "answers": [{"comments": [{"owner": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "edited": false, "score": 0, "creation_date": 1502693044, "post_id": 45638542, "comment_id": 78294842, "body": "Your code was giving me <code>(eval):1: unterminated string meets end of file</code> error, but I noticed that you left the ERB bit at the end of the <code>eval()</code> code. I made an edit to your answer to reflect that."}, {"owner": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "edited": false, "score": 0, "creation_date": 1502694078, "post_id": 45638542, "comment_id": 78295292, "body": "After my edit, your code kind-of-works. That is, it creates proper HTML code, with the page references replaced with page URL from data. However, this only works properly if there is only reference to one page in the <code>data.faq.testcase</code>. If there is more, as it is the case in MWE and my actual use case, all references are being replaced with the same URL, in this case,<code>data.pages.pageA.link</code>.  This is the same issue that <a href=\"https://stackoverflow.com/a/44564396/1226389\">Kathryn&#39;s answer here</a> had."}, {"owner": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "edited": false, "score": 0, "creation_date": 1502694332, "post_id": 45638542, "comment_id": 78295430, "body": "The only solution I see in order to make it work &quot;globally&quot;, that is with a reference to more than one page is to somehow loop through all references in markdown text pulled from data and then do your substitution for all of them. However, I have no idea how to approach this. The other solution would be to figure out why ERB is not processed properly in (5), as then all references&#39; URLs would be the proper ones, without the need to loop through them."}, {"owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "reply_to_user": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "edited": false, "score": 0, "creation_date": 1502735384, "post_id": 45638542, "comment_id": 78319213, "body": "@Rafal, good catch on the bit of trailing ERB code. While I&#39;m still not sure why ERB isn&#39;t being processed properly (I don&#39;t use HAML), I was able to get <code>refonly</code> to loop through and get the effect I believe you are after."}, {"owner": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "edited": false, "score": 0, "creation_date": 1502800538, "post_id": 45638542, "comment_id": 78343487, "body": "This worked great. Thank you! I have been trying to solve this issue for many months and your solution is the only one that really worked. After implementing it, I noticed that I have some text that is not generated using <code>mymarkdown</code> helper, but in different ways. Do you know if it is possible to run this code, where contents of the page would be passed to the code of this helper in a similar way <code>text</code> variable is? This would finally solve all my link-related issues. I asked another question about this: <a href=\"https://stackoverflow.com/q/45692859/1226389\">stackoverflow.com/q/45692859/1226389</a>"}, {"owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "reply_to_user": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "edited": false, "score": 0, "creation_date": 1502825141, "post_id": 45638542, "comment_id": 78358466, "body": "I commented about this on your new question. Basically, I think you&#39;d be better off to try to get the <code>mymarkdown</code> helper to output exactly what end result you&#39;re looking for rather than try to intercept HAML&#39;s output, modify it, and send it back on its way."}], "tags": [], "owner": {"reputation": 538, "user_id": 4357940, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-AcYsGMw8HSw/AAAAAAAAAAI/AAAAAAAAABM/FTCfqaEAB3A/photo.jpg?sz=128", "display_name": "Feliks Montez", "link": "https://stackoverflow.com/users/4357940/feliks-montez"}, "is_accepted": true, "score": 1, "last_activity_date": 1502735183, "last_edit_date": 1502735183, "creation_date": 1502464530, "answer_id": 45638542, "question_id": 44797695, "link": "https://stackoverflow.com/questions/44797695/tilt-kramdown-preventing-erb-processing-when-rendering-markdown/45638542#45638542", "title": "Tilt (kramdown) preventing ERB processing when rendering markdown", "body": "<p>Since you already have HAML parsing correctly, and when you render verbatim links it works, try using a helper to directly inject the links without needing to go to ERB. Since HAML will already run Ruby code, I see no need to pass it through ERB too. I think <code>eval</code> will allow you to get the same effect you're using ERB for. Something like this:</p>\n\n<pre><code>def refonly(text)\n  text.scan(/ref\\.(page[A-Z])/).each do |groups|\n    page_name = groups[0]\n    text.gsub!(/ref\\.#{page_name}/, eval(\"data.pages.#{page_name}.link\"))\n  end\n  text\nend\n</code></pre>\n\n<p>EDIT: Scanning the text will allow you to get each page_name so you can loop through each one and replace each page reference with its link.</p>\n"}], "owner": {"reputation": 796, "user_id": 1226389, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/65ee87ab50e1ecd786a47841bffb3681?s=128&d=identicon&r=PG", "display_name": "Rafal", "link": "https://stackoverflow.com/users/1226389/rafal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 288, "favorite_count": 0, "accepted_answer_id": 45638542, "answer_count": 1, "score": 1, "last_activity_date": 1502735183, "creation_date": 1498639464, "last_edit_date": 1502431972, "question_id": 44797695, "link": "https://stackoverflow.com/questions/44797695/tilt-kramdown-preventing-erb-processing-when-rendering-markdown", "title": "Tilt (kramdown) preventing ERB processing when rendering markdown", "body": "<p>I am building a website with <a href=\"https://middlemanapp.com/\" rel=\"nofollow noreferrer\">Middleman</a>. I am storing a lot of information in data files, as I am going to use the same information on multiple pages. (Partials wouldn't work for me, as same text from data can be used with different HTML tags or be slightly modified for different pages.)</p>\n\n<p>I want to write <em>markdown in data files</em> and then use it <em>within HAML templates</em> for specific pages. When I try to create relative links to other pages while using a reference to other data file, resulting HTML is not what it should be.</p>\n\n<p><code>data/pages.yaml</code>:</p>\n\n<pre><code>pageA:\n  link: /it-can-change-A.html\n  name: PageA name\n  info: Some other related info\n\npageB:\n  link: /subject-to-change-B.html\n  name: PageB name\n  info: Some other related info\n\npageC:\n  link: /some-C.html\n  name: PageC name\n  info: Some other related info\n</code></pre>\n\n<p><code>data/faq.yaml</code>:</p>\n\n<pre><code>testcase: Some text with [internal link to page A](ref.pageA). And *another* [internal reference](ref.pageB).\n\nverbatim: Some text with [internal link to page A](/it-can-change-A.html). And *another* [internal reference](/subject-to-change-B.html).\n</code></pre>\n\n<p>While trying to find the root cause of this issue, I have tested various ways to \"extract\" relative links from the data file and put them in the HAML template. My end goal is to get the case (5) to work. </p>\n\n<p>I commented on the results of each piece of code directly in my <code>test.html.md.erb.haml</code>:</p>\n\n<p><em>Please note that HAML has to be processed before ERB, so .haml needs to be the last extension. If .erb and .haml extensions switch places, case (3) and (4) below will produce different output.</em></p>\n\n<pre><code>/ Pure ERB; ERB is processed before markdown =&gt; :)\n(1) This is just some text with [ERB link to first page](&lt;%= data.pages.pageA.link %&gt;) and *another* one [to second page](&lt;%= data.pages.pageB.link %&gt;). \n\n/ ERB inside HAML tag; markdown is not processed =&gt; :|\n.haml\n    (2) This is just some text with [ERB link to first page](&lt;%= data.pages.pageA.link %&gt;) and *another* one [to second page](&lt;%= data.pages.pageB.link %&gt;). \n\n/ Helper used WITHOUT a tag; ERB is processed before markdown =&gt; :)\n(3)\n= refonly(data.faq.testcase) \n\n/ Helper used WITH a tag; ERB is processed, but markdown is not =&gt; :|\n.question1\n    (4)\n    = refonly(data.faq.testcase)\n\n/ \"Tilt-powered\" helper used WITHIN a tag; trying to process markdown with Tilt results in \"%=%20data.pages.pageA.link%20%\" links. Expected behavior: ERB should be processed first, then Tilt should process markdown with actual relative links being the same as in .question1 above =&gt; :(\n.question2\n    (5)\n    = mymarkdown(data.faq.testcase)\n\n/ Helper with Tilt to process verbatim text; markdown is processed correctly =&gt; :)\n.question3\n    (6)\n    = justmarkdown(data.faq.verbatim)\n</code></pre>\n\n<p>Helpers used in template above:</p>\n\n<pre><code>def refonly(text)\n    text.gsub(/ref\\.(page[A-Z])/,\"&lt;\\%= data.pages.\\\\1.link %&gt;\")\nend\n\ndef mymarkdown(text)\n    newtext = refonly(text)\n    Tilt['markdown'].new(context: @app) { newtext }.render\nend\n\ndef justmarkdown(text)\n    Tilt['markdown'].new(context: @app) { text }.render\nend\n</code></pre>\n\n<p>The purpose of the first helper is to change easy-to-write reference inside data file (ref.pageName) to ERB code, same as one used in (1). The purpose of the second helper is to render markdown in the case where <code>.md</code> template extension itself fails to render it automatically. The purpose of the last helper is to show that Tilt can render verbatim text properly in (6), but it when it accepts same text as a variable, it can't provide same output in (5).</p>\n\n<p>A. When I use \"pure ERB\" (1), or <code>refonly</code> helper without HAML tag (3), output is as expected: relative path is sourced from data file and then markdown is processed by default markdown engine (kramdown) thanks to <code>.md</code> template extension.</p>\n\n<p>B. When I try to use HAML tag, either directly with ERB code (2), or with <code>refonly</code> helper (4), ERB is processed correctly and put into the output. However, markdown is not processed for some reason automatically, even though <code>.md</code> extension is used directly after <code>.html</code>, hence markdown should be processed after HAML and ERB bits are finished.</p>\n\n<p>C. In order to \"force\" markdown rendering, I am using Tilt in my second helper. My intention was to pass text returned by <code>refonly</code> (which has correct markdown syntax with intended link extracted from data) to Tilt. My expectation was that Tilt would simply render verbatim text passed to it in (5), just as it does in (6). Instead, resulting link points to <code>%=%20data.pages.pageA.link%20%</code>, which seems to be HTML code to display ERB code verbatim. So, it looks like passing <code>newtext</code> variable to Tilt somehow stops ERB processing and ERB code is passed directly to markdown.</p>\n\n<p>My <strong>primary</strong> question is: how can I make sure that Tilt gets the proper text with a relative link (as returned by <code>refonly</code>) and produces expected output in (5)?</p>\n\n<p>My <strong>secondary</strong> question: why markdown is not processed automatically by Middleman in cases described under B.?</p>\n\n<p>I assume that answer to my primary question requires knowledge of the Ruby and Tilt, while the answer to my secondary question requires knowledge of Middleman. While the solution to my primary issue would be great, answer to the secondary question might allow to skip Tilt altogether and hence solve the problem in an easier way.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "geoip", "cloud9"], "comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1498668896, "post_id": 44797579, "comment_id": 76597065, "body": "did you read this post ? <a href=\"https://stackoverflow.com/questions/2748168/error-installing-geoip-city-gem#2754397\" title=\"error installing geoip city gem%232754397\">stackoverflow.com/questions/2748168/&hellip;</a>"}, {"owner": {"reputation": 113, "user_id": 4351964, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/c36c5f0da23956fe7f8e6eda412f5cc8?s=128&d=identicon&r=PG&f=1", "display_name": "huey", "link": "https://stackoverflow.com/users/4351964/huey"}, "reply_to_user": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1498686150, "post_id": 44797579, "comment_id": 76606650, "body": "Yes, I get the same error: <code>checking for GeoIP_record_by_ipnum() in -lGeoIP... no \\n you must have geoip c library installed!</code>"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1498748081, "post_id": 44797579, "comment_id": 76637480, "body": "in that post they run that <code>gem install geoip_city -- --with-geoip-dir=&#47;opt&#47;GeoIP</code> with the <code>env ARCHFLAGS=&quot;-arch x86_64&quot;</code> so that specifies if the system is 64 bit.. also they run the command as system user with <code>sudo</code> (system user do)"}], "answers": [{"tags": [], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "is_accepted": false, "score": 1, "last_activity_date": 1498748683, "creation_date": 1498748683, "answer_id": 44828799, "question_id": 44797579, "link": "https://stackoverflow.com/questions/44797579/problems-installing-geoip-using-cloud9-windows-10/44828799#44828799", "title": "Problems installing GeoIP using Cloud9 (Windows 10)", "body": "<p>this are the install instructions from the geoip gem.\nYou need to perform this on the Cloud9 server, not on your local windows 10 machine.</p>\n\n<p>Your application is running on a Linux Server hosted by cloud9, you need to access that server terminal (the black and white window) so that you can install and configure some utilities on the Linux host.</p>\n\n<p>This shows how to open the terminal on Cloud9\n<a href=\"https://docs.c9.io/docs/terminal\" rel=\"nofollow noreferrer\">https://docs.c9.io/docs/terminal</a></p>\n\n<p>This are the installation instructions for geoip, you need to follow those for linux, if you are running on cloud9 a linux server.</p>\n\n<p><a href=\"https://github.com/mtodd/geoip#install\" rel=\"nofollow noreferrer\">https://github.com/mtodd/geoip#install</a></p>\n\n<p>So maybe this is just not compatible with Windows. </p>\n\n<blockquote>\n  <p>Install</p>\n  \n  <p>Some variation of the following should work.</p>\n  \n  <p>Install the GeoCity C library. You can get it from MaxMind. For\n  example, I like to install mine in /opt/GeoIP, so I do this:</p>\n  \n  <p>tar -zxvf GeoIP-1.4.3.tar.gz cd GeoIP-1.4.3 ./configure\n  --prefix=/opt/GeoIP make &amp;&amp; sudo make install</p>\n  \n  <p>On Mac OS X, you can install using\n  <a href=\"http://github.com/mxcl/homebrew\" rel=\"nofollow noreferrer\">homebrew</a>:</p>\n\n<pre><code>brew install geoip\n</code></pre>\n  \n  <p>Linux platforms utilizing Apt have several packages available:</p>\n\n<pre><code>geoip-bin\ngeoip-database\nlibgeoip-dev Now install the geoip gem\n</code></pre>\n  \n  <p>gem install geoip-c -- --with-geoip-dir=/opt/GeoIP</p>\n  \n  <p>Alternatively, if you installed libgeoip using homebrew:</p>\n\n<pre><code>gem install geoip-c Download the GeoLite City database file in binary format at http://www.maxmind.com/app/geolitecity Maybe this\n</code></pre>\n  \n  <p>direct link will work. I put this file in</p>\n  \n  <p>/opt/GeoIP/share/GeoIP/GeoLiteCity.dat</p>\n  \n  <p>If you installed libgeoip using homebrew then put it in:</p>\n\n<pre><code>/usr/local/share/GeoIP/GeoLiteCity.dat\n</code></pre>\n  \n  <p>If you are a paying customer, you will download the files required\n  below:</p>\n  \n  <p><a href=\"http://www.maxmind.com/app/download_files\" rel=\"nofollow noreferrer\">MaxMind Customer\n  Downloads</a></p>\n  \n  <p>You will want to get the City Rev1 data file and Organization files\n  at minimum. Use it!</p>\n  \n  <p>See above for usage details.</p>\n  \n  <p>Hints</p>\n  \n  <p>Might need to set</p>\n  \n  <p>export ARCHFLAGS=\"-arch i386\"</p>\n  \n  <p>to be able to compile the gem.</p>\n  \n  <p>Example:</p>\n\n<pre><code>env ARCHFLAGS=\"-arch i386\" gem install geoip-c -- --with-geoip-dir=/opt/GeoIP You might find this shell script helpful to install the C library.\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 113, "user_id": 4351964, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/c36c5f0da23956fe7f8e6eda412f5cc8?s=128&d=identicon&r=PG&f=1", "display_name": "huey", "link": "https://stackoverflow.com/users/4351964/huey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498748683, "creation_date": 1498639141, "question_id": 44797579, "link": "https://stackoverflow.com/questions/44797579/problems-installing-geoip-using-cloud9-windows-10", "title": "Problems installing GeoIP using Cloud9 (Windows 10)", "body": "<p>I'm trying to set up a cloud-based IDE (on a Windows machine) to test and update a Ruby project on GitHub. I'm struggled with installing all the required parts.</p>\n\n<p>'bundle install' works to a point, then it fails here:</p>\n\n<pre><code>checking for iconv_open() in iconv.h... yes\nchecking for GeoIP_record_by_ipnum() in -lGeoIP... no\nyou must have geoip c library installed!\n.\n.\nAn error occurred while installing geoip-c (0.9.1), and Bundler cannot continue.\nMake sure that `gem install geoip-c -v '0.9.1'` succeeds before bundling.\n</code></pre>\n\n<p>All of these fail:</p>\n\n<pre><code>gem install geoip-c\ngem install geoip-c -v '0.9.1'\ngem install geoip-c -- --with-geoip-dir=/opt/GeoIP\n</code></pre>\n\n<p>with this error message:</p>\n\n<pre><code>ERROR:  Error installing geoip-c:\nERROR: Failed to build gem native extension.\n\ncurrent directory: /usr/local/rvm/gems/ruby-2.4.1/gems/geoip-c-0.9.1/ext/geoip\n/usr/local/rvm/rubies/ruby-2.4.1/bin/ruby -r ./siteconf20170628-2852-11bgk28.rb extconf.rb\nchecking for iconv_open() in iconv.h... yes\nchecking for GeoIP_record_by_ipnum() in -lGeoIP... no\nyou must have geoip c library installed!\n</code></pre>\n\n<p>Been scratching my brain for a couple of days now - any help gratefully appreciated. </p>\n"}, {"tags": ["ruby", "uri", "ipv6", "link-local"], "answers": [{"tags": [], "owner": {"reputation": 906, "user_id": 1410268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9NrwD.jpg?s=128&g=1", "display_name": "Stepan Vrany", "link": "https://stackoverflow.com/users/1410268/stepan-vrany"}, "is_accepted": false, "score": 1, "last_activity_date": 1498810373, "last_edit_date": 1498810373, "creation_date": 1498757086, "answer_id": 44831459, "question_id": 44796588, "link": "https://stackoverflow.com/questions/44796588/ruby-uri-cannot-handle-link-local-ipv6-addresses-with-explicitly-specified-outgo/44831459#44831459", "title": "Ruby URI cannot handle link-local IPv6 addresses with explicitly specified outgoing interface?", "body": "<p>I've just found answer ... IPv6 scoped addressing zone is not supported in URI specification RFC3986. And Ruby URI implementation follows standards. So that's why :) \nThe only way would be:</p>\n\n<ul>\n<li>create a new URI parser <a href=\"https://www.packetizer.com/rfc/rfc6874/\" rel=\"nofollow noreferrer\">https://www.packetizer.com/rfc/rfc6874/</a></li>\n<li>require it in your code</li>\n<li>set URI::DEFAULT_PARSER i.e. <code>URI::DEFAULT_PARSER = URI::RFC6874_Parser.new</code></li>\n</ul>\n\n<p>I've found that std. Go library net/url supports RFC6874, so at least there's some inspiration for the coding of Ruby <code>RFC6874_Parser</code> :)</p>\n\n<pre><code>package main\n\nimport (\n    \"fmt\"\n    \"log\"\n    \"net/url\"\n)\n\nfunc main() {\n    fmt.Println(\"Hello, playground\")\n    u, err := url.Parse(\"https://[fe80::250:56ff:fe9e:76d9%25ens192]\")\n    if err != nil {\n        log.Fatal(err)\n    }\n    fmt.Println(u.Hostname())\n}\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>fe80::250:56ff:fe9e:76d9%ens192\n</code></pre>\n\n<p><a href=\"http://godoc.burntsushi.net/src/net/url/url.go\" rel=\"nofollow noreferrer\">http://godoc.burntsushi.net/src/net/url/url.go</a></p>\n"}], "owner": {"reputation": 906, "user_id": 1410268, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9NrwD.jpg?s=128&g=1", "display_name": "Stepan Vrany", "link": "https://stackoverflow.com/users/1410268/stepan-vrany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 410, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1498810373, "creation_date": 1498636249, "question_id": 44796588, "link": "https://stackoverflow.com/questions/44796588/ruby-uri-cannot-handle-link-local-ipv6-addresses-with-explicitly-specified-outgo", "title": "Ruby URI cannot handle link-local IPv6 addresses with explicitly specified outgoing interface?", "body": "<p>I'm trying to get done some RESTful stuff with Ruby std. libraries, 'uri' and 'net/https.' I'd like to reach link-local IPv6 address with explicitly specified outgoing interface, for example <code>fe80::cba7:32b1:741d:5c41%ens192</code>.</p>\n\n<p>Whent I'm trying to create a new URI instance - I'm still receiving the same error (for both examples below):</p>\n\n<pre><code>URI(\"https://[fe80::cba7:32b1:741d:5c41%ens192]/\")\nURI(\"https://[fe80::cba7:32b1:741d:5c41%25ens192]/\")\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>URI::InvalidURIError: bad URI(is not URI?)\n</code></pre>\n\n<p>Please do you have any idea how to handle these IPv6 link-local addresses?\nJust for the reference I've tried to make a simple HTTP request, it works. So generally, Ruby has no issue with IPv6 :)</p>\n\n<pre><code>require 'net/https'\nrequest = Net::HTTP.new('fe80::cba7:32b1:741d:5c41%ens192', 443)\nrequest.use_ssl = true\nrequest.verify_mode = OpenSSL::SSL::VERIFY_NONE\nrequest.get('/')\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["javascript", "ruby", "webpage"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498633869, "post_id": 44795786, "comment_id": 76572022, "body": "No, we don\u2019t know what you mean."}, {"owner": {"reputation": 19, "user_id": 8171247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c10db3cb778851cc6187f5275ef105d?s=128&d=identicon&r=PG&f=1", "display_name": "Jay die", "link": "https://stackoverflow.com/users/8171247/jay-die"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498634706, "post_id": 44795786, "comment_id": 76572558, "body": "I want to run a rubyfile in JavaScript."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498634746, "post_id": 44795786, "comment_id": 76572588, "body": "It is impossible to run anything \u201cin Javascript.\u201d"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1498636300, "post_id": 44795786, "comment_id": 76573523, "body": "JavaScript cannot run the Ruby script itself (language limitations aside, JavaScript runs on the client side and the Ruby script has to access the server&#39;s file system and libraries), but it could make an API call to a web server which runs the Ruby script and returns the result. The server doesn&#39;t necessarily have to be written in Ruby, although that could be easier. Take a look at <a href=\"http://www.sinatrarb.com\" rel=\"nofollow noreferrer\">Sinatra</a>, it&#39;s very light-weight."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 3, "creation_date": 1498637318, "post_id": 44795786, "comment_id": 76574166, "body": "@Jaydie: Hint: if someone tells you they don&#39;t understand your question, merely repeating the question will not make it any clearer."}, {"owner": {"reputation": 2470, "user_id": 1175090, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bd5ca9726b8546e77c9fe21cae2f1e95?s=128&d=identicon&r=PG", "display_name": "Snake Sanders", "link": "https://stackoverflow.com/users/1175090/snake-sanders"}, "edited": false, "score": 0, "creation_date": 1498638167, "post_id": 44795786, "comment_id": 76574719, "body": "Complementing the other answer, yes, you can put the output of the ruby script in a web page. Probably you will need to parse it and give it an HTML format, depending on what is your output."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1498641458, "post_id": 44795786, "comment_id": 76576868, "body": "if you use Sinatra with streaming you can show the progress in realtime, google these words"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498645053, "post_id": 44795786, "comment_id": 76579342, "body": "@Stefan: Maybe the OP wants to use server-side JavaScript. Of course, unless the OP doesn&#39;t express himself more clearly, there is not much we can do."}], "owner": {"reputation": 19, "user_id": 8171247, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c10db3cb778851cc6187f5275ef105d?s=128&d=identicon&r=PG&f=1", "display_name": "Jay die", "link": "https://stackoverflow.com/users/8171247/jay-die"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498635908, "creation_date": 1498633692, "last_edit_date": 1498635908, "question_id": 44795786, "link": "https://stackoverflow.com/questions/44795786/how-to-run-a-rubyfile-with-javascript", "title": "How to run a rubyfile with JavaScript?", "body": "<p>I wrote a Ruby script that removes several log files and sends a notification email via <code>Net::SMTP</code> afterwards.</p>\n\n<p><strong>Questions</strong></p>\n\n<ul>\n<li>Can I put the output with the information on a webpage?</li>\n<li>Can I run the file in JavaScript?</li>\n</ul>\n"}, {"tags": ["ruby", "linux", "ssh", "net-ssh"], "comments": [{"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1498640927, "post_id": 44794853, "comment_id": 76576478, "body": "Why the down vote?"}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1498644474, "post_id": 44794853, "comment_id": 76578972, "body": "I&#39;ve down-voted because your edit makes no sense. Did you looked even a second at the code before posting it back here?"}, {"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1498651666, "post_id": 44794853, "comment_id": 76583781, "body": "I see. Yes, I had forgotten the change the first command. Damn copy &amp; paste."}, {"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1498652409, "post_id": 44794853, "comment_id": 76584383, "body": "Does it still complain that the file can&#39;t be found?"}, {"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "reply_to_user": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1498652762, "post_id": 44794853, "comment_id": 76584640, "body": "Yes. I had used the correct command in my program, but I pasted the old one here. I logged in the VM and the file is actually there. <code>exec</code> is non blocking so I thought that the second command (<code>cat</code>) is probably executed before the file is actually created. I could use a <code>sleep</code>, but it does not seem a robust approach."}], "answers": [{"comments": [{"owner": {"reputation": 132964, "user_id": 171318, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ePRKy.jpg?s=128&g=1", "display_name": "hek2mgl", "link": "https://stackoverflow.com/users/171318/hek2mgl"}, "edited": false, "score": 0, "creation_date": 1498634676, "post_id": 44795511, "comment_id": 76572543, "body": "Ok, it will give you the pid now, but it will hang unless you close the connection manually. Try <code>nohup sleep 1000 &amp;</code> in your terminal to see"}], "tags": [], "owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "is_accepted": false, "score": 2, "last_activity_date": 1498633813, "last_edit_date": 1498633813, "creation_date": 1498632811, "answer_id": 44795511, "question_id": 44794853, "link": "https://stackoverflow.com/questions/44794853/ruby-net-ssh-exec-get-pid-of-remote-process/44795511#44795511", "title": "Ruby Net/SSH exec - get pid of remote process", "body": "<p>You should be able to determine the PID (and store it in a file) as follows:</p>\n\n<pre><code>Net::SSH.start(ip_address, user, options) do |ssh|\n  script = File.join(remote_path, 'run_case.py')\n  cmd = \"nohup python #{script} #{args}  &lt; /dev/null &amp; echo $! &gt; save_pid.txt\"\n  ssh.exec(cmd)\nend\n</code></pre>\n\n<p>In a script, $! represents the PID of the last process executed. If you need to kill the process, you can do it via:</p>\n\n<pre><code>kill -9 `cat save_pid.txt`\nrm save_pid.txt\n</code></pre>\n"}], "owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 357, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1498664788, "creation_date": 1498630277, "last_edit_date": 1498664788, "question_id": 44794853, "link": "https://stackoverflow.com/questions/44794853/ruby-net-ssh-exec-get-pid-of-remote-process", "title": "Ruby Net/SSH exec - get pid of remote process", "body": "<p>I am launching a nohup remote script with Ruby Net/SSH.</p>\n\n<pre><code>Net::SSH.start(ip_address, user, options) do |ssh|\n  script = File.join(remote_path, 'run_case.py')\n  cmd = \"nohup python #{script} #{args}  &lt; /dev/null &amp;\"\n  ssh.exec(cmd)\nend\n</code></pre>\n\n<p>All <code>stdout</code> and <code>stderr</code> is saved to a file on the remote machine.</p>\n\n<p>Is it possible to get the PID of the remote script so that I can kill it if needed?</p>\n\n<p><strong>EDIT 1:</strong>\nI have modified the script as suggested.</p>\n\n<pre><code>Net::SSH.start(ip_address, user, options) do |ssh|\n  script = File.join(remote_path, 'run_case.py')\n  cmd = \"nohup python #{script} #{args}  &lt; /dev/null &amp; echo $! &gt; save_pid.txt\"\n  ssh.exec(cmd)\n  pid = ssh.exec!(\"cat save_pid.txt\")\n  puts mesh_pid\nend\n</code></pre>\n\n<p>It complains that it cannot find the file. Is this because the file does not exist yet? I would prefer to avoid any <code>sleep</code> command if possible</p>\n\n<p><strong>EDIT 2:</strong> Maybe this is not elegant but it works. I have created a second <code>ssh</code> session and used <code>pgrep</code>.</p>\n\n<pre><code>Net::SSH.start(ip_address, user, options) do |ssh|\n  script = File.join(remote_path, 'run_case.py')\n  cmd = \"nohup python #{script} #{args}  &lt; /dev/null &amp;\"\n  ssh.exec(cmd)\nend\n\nNet::SSH.start(ip_address, user, options) do |ssh|\n  cmd = \"python #{script} #{args}\"\n  mesh_pid = ssh.exec!(\"pgrep -f '#{cmd}'\")\n  puts mesh_pid\nend\n</code></pre>\n"}, {"tags": ["ruby", "cucumber", "appium", "allure"], "comments": [{"owner": {"reputation": 1934, "user_id": 1251613, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4eebbab9cf562e67094a12dca480d92f?s=128&d=identicon&r=PG", "display_name": "Markus", "link": "https://stackoverflow.com/users/1251613/markus"}, "edited": false, "score": 0, "creation_date": 1498631705, "post_id": 44794825, "comment_id": 76570878, "body": "Welcome to Stackoverflow! Please take some time to read <a href=\"http://stackoverflow.com/help\">the help pages</a>, especially the sections named <a href=\"http://stackoverflow.com/help/on-topic\">&quot;What topics can I ask about here?&quot;</a> and <a href=\"http://stackoverflow.com/help/dont-ask\">&quot;What types of questions should I avoid asking?&quot;</a>. Also please take the <a href=\"http://stackoverflow.com/tour\">tour</a> and read about <a href=\"http://stackoverflow.com/help/how-to-ask\">how to ask good questions</a>. Lastly please learn how to create a <a href=\"http://stackoverflow.com/help/mcve\">Minimal, Complete, and Verifiable Example</a>."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8224121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c3e2a46cf689336ec8a02b29bccdef?s=128&d=identicon&r=PG&f=1", "display_name": "Magik Joe", "link": "https://stackoverflow.com/users/8224121/magik-joe"}, "edited": false, "score": 0, "creation_date": 1498722364, "post_id": 44807080, "comment_id": 76618326, "body": "I&#39;m using Allure Plugin (ver: 2.18) with allure-commandline (1.5.4) in Jenkins to run my automated suite. However the reports generated in Jenkins is Allure1 and that on machine when run locally I see Allure2 reports with the Trends|Executor tabs empty. Locally I have Allure 2.1.1 configured."}], "tags": [], "owner": {"reputation": 2065, "user_id": 3915166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b1864088646bf513e90f78ee18f1caa1?s=128&d=identicon&r=PG", "display_name": "Dmitry Baev", "link": "https://stackoverflow.com/users/3915166/dmitry-baev"}, "is_accepted": false, "score": 0, "last_activity_date": 1498664433, "creation_date": 1498664433, "answer_id": 44807080, "question_id": 44794825, "link": "https://stackoverflow.com/questions/44794825/trend-environment-and-executors-tabs-fails-to-show-any-data-in-allure2-reports/44807080#44807080", "title": "Trend, Environment and Executors tabs fails to show any data in Allure2 reports", "body": "<p>To get history data in the report you need to use one of Allure CI plugins (at the moment supported Jenkins, Teamcity and Bamboo) to generate the report. </p>\n"}], "owner": {"reputation": 21, "user_id": 8224121, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a8c3e2a46cf689336ec8a02b29bccdef?s=128&d=identicon&r=PG&f=1", "display_name": "Magik Joe", "link": "https://stackoverflow.com/users/8224121/magik-joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 545, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1498725276, "creation_date": 1498630167, "last_edit_date": 1498725276, "question_id": 44794825, "link": "https://stackoverflow.com/questions/44794825/trend-environment-and-executors-tabs-fails-to-show-any-data-in-allure2-reports", "title": "Trend, Environment and Executors tabs fails to show any data in Allure2 reports", "body": "<p>I have been using Allure1 with Cucumber-Ruby-Appium framework and the reports generated by Allure1 are great. Now Allure has released Allure2 and I have successfully upgraded to this new Allure2 version. Reports are successfully generated in Allure2 new UI.</p>\n\n<p>I see new tabs like <strong>Trend</strong>, <strong>Environment</strong> and <strong>Executors</strong> on the Allure2 dashboard's 'Overview' page. However no data is being reflected in these tabs. Could anyone kindly guide me how can I populate data in these tabs.</p>\n\n<p>I have searched through the allure <a href=\"https://github.com/allure-framework/allure-docs/blob/master/docs/2.0/integration/cucumber.adoc\" rel=\"nofollow noreferrer\">docs</a>, but nothing has been mentioned on how to achieve this. Any guidance on this would be highly appreciated</p>\n"}, {"tags": ["python", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 89, "user_id": 8223925, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--m3zzL4Wels/AAAAAAAAAAI/AAAAAAAAEHE/WIX3Xi2hDQE/photo.jpg?sz=128", "display_name": "Aaron Fine", "link": "https://stackoverflow.com/users/8223925/aaron-fine"}, "edited": false, "score": 0, "creation_date": 1498710184, "post_id": 44795962, "comment_id": 76612750, "body": "I&#39;m trying to understand the code, and the intent behind it, so that I can make it function as a well written, well structured piece of Python code. So, thank you for your answer."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1498634633, "last_edit_date": 1498634633, "creation_date": 1498634299, "answer_id": 44795962, "question_id": 44794203, "link": "https://stackoverflow.com/questions/44794203/converting-ruby-loop-iteration-with-a-yield-statement-to-python/44795962#44795962", "title": "Converting Ruby loop iteration with a yield statement to Python", "body": "<blockquote>\n  <p>Then there are the following two functions as part of the Grid class. </p>\n</blockquote>\n\n<p>These aren't functions. They are methods.</p>\n\n<blockquote>\n<pre><code>def each_row\n  @grid.each do |row|\n    yield row\n  end\nend\n\ndef each_cell\n  each_row do |row|\n    row.each do |cell|\n      yield cell if cell\n    end\n  end\nend\n</code></pre>\n  \n  <p>What are the last two functions here actually doing?</p>\n</blockquote>\n\n<p>The <code>each_row</code> <em>method</em> takes a block as parameter and will successively <code>yield</code> all elements of the <code>@grid</code> array. <code>@grid</code> is structured as an array of arrays, representing rows of cells. In other words, <code>each_row</code> will successively <code>yield</code> each row of the grid, i.e. it is an iterator method for rows.</p>\n\n<p>The <code>each_cell</code> <em>method</em> takes a block as parameter and will successively <code>yield</code> all elements of the row arrays in the grid <code>@grid</code> array. In other words, <code>each_cell</code> will successively <code>yield</code> each cell of the grid if it exists, i.e. it is an iterator method for cells.</p>\n\n<p>The literal translation to Python would be something like this (untested):</p>\n\n<pre><code>def each_row(self, f):\n  self.grid.each(lambda row: f(row))\n\ndef each_cell(self, f):\n  self.each_row(lambda row: lambda cell: if cell: f(cell))\n</code></pre>\n\n<p>But, it just doesn't make sense to translate code from one language to another this way. Using lambdas for iteration in Python is non-idiomatic. Python uses iterators for iteration. So, instead of having <code>each_row</code> and <code>each_cell</code> iterator methods, you would rather have <code>row_iterator</code> and <code>cell_iterator</code> getters which return iterator objects for the rows and cells, so that you can then do something like:</p>\n\n<pre><code>for cell in grid.cell_iterator\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>grid.each_cell(lambda cell: \u2026)\n</code></pre>\n\n<p>Something like this (also untested):</p>\n\n<pre><code>def row_iterator(self):\n  for row in self.grid: yield row\n\ndef cell_iterator(self):\n  for row in self.row_iterator:\n    for cell in row:\n      if cell: yield cell\n</code></pre>\n\n<p>When you \"translate\" code from one language to another, you cannot just translate it line-by-line, statement-by-statement, expression-by-expression, subroutine-by-subroutine, class-by-class, etc. You need to re-design it from the ground up, using the patterns, practices, and idioms of the community and the types, classes, subroutines, modules, etc. from the language and its core and standard libraries.</p>\n\n<p>Otherwise, you could just use a compiler. A compiler is literally defined as \"a program that translates a program from one language to another language\". If that is all you want to do, use a compiler. But, if you want the translated code to be readable, understandable, maintainable, and idiomatic, it can only be done by a human.</p>\n"}], "owner": {"reputation": 89, "user_id": 8223925, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/--m3zzL4Wels/AAAAAAAAAAI/AAAAAAAAEHE/WIX3Xi2hDQE/photo.jpg?sz=128", "display_name": "Aaron Fine", "link": "https://stackoverflow.com/users/8223925/aaron-fine"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 1, "accepted_answer_id": 44795962, "answer_count": 1, "score": 2, "last_activity_date": 1498634633, "creation_date": 1498627277, "question_id": 44794203, "link": "https://stackoverflow.com/questions/44794203/converting-ruby-loop-iteration-with-a-yield-statement-to-python", "title": "Converting Ruby loop iteration with a yield statement to Python", "body": "<p>I'm trying to teach myself Python by translating the code in the Mazes for Programmers book from Jamis Buck. It's a great book but it's written in Ruby and I'm getting stuck on understanding some of the Ruby code. </p>\n\n<p>To understand the problem, I've included a reduced version of the codebase</p>\n\n<p><strong>cell.rb</strong></p>\n\n<pre><code>class Cell\n  attr_reader : row, :column\n\ndef initialize(row, column)\n  @row, @column = row, column\nend\n</code></pre>\n\n<p><strong>grid.rb</strong></p>\n\n<pre><code>require 'cell'\nclass Grid\n  attr_reader :rows, :columns\n\ndef initialize(rows, columns)\n  @rows = rows\n  @columns = columns\n  @grid = prepare_grid\nend\n\ndef prepare_grid\n  Array.new(rows) do |row|\n    Array.new(columns) do |column|\n      Cell.new(row, column)\n    end\n  end\nend\n</code></pre>\n\n<p>So far so good. All of the above is easy to understand and translate to Python. Then there are the following two functions as part of the Grid class. </p>\n\n<pre><code>def each_row\n  @grid.each do |row|\n    yield row\n  end\nend\n\ndef each_cell\n  each_row do |row|\n    row.each do |cell|\n      yield cell if cell\n    end\n  end\nend\n</code></pre>\n\n<p>What are the last two functions here actually doing? I've found something similar <a href=\"http://thisishardtoread.com/2013/12/12/mimicking-ruby-yield-in-python.html\" rel=\"nofollow noreferrer\">here</a> that leads me to think that the Python version will need to accept an optional lambda variable, test to see that it's not null, and if it isn't then run the code associated with the variable. The problem is that I know the intent of these functions is to be an iterator and I don't think that adding in a lambda will help.</p>\n\n<p>There is a somewhat similar question already <a href=\"https://stackoverflow.com/questions/21801697/iterate-through-an-ruby-array-and-getyield-or-return-each-item-in-the-array\">here</a> on StackOverflow which makes me think that the answer is trivial, but I don't know enough about Ruby to be able to intuit the answer or ask Google the right questions.  </p>\n"}, {"tags": ["ios", "ruby-on-rails", "ruby", "push"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498634677, "post_id": 44794141, "comment_id": 76572544, "body": "Looks like your old computer had <code>&quot;gateway.sandbox.push.apple.com&quot;</code> gateway set explicitly somewhere in <code>&#47;etc&#47;hosts</code> or wherever it\u2019s set on MacO$."}, {"owner": {"reputation": 4835, "user_id": 1478217, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/01c6aaf3f334a8b79cd11966423018a0?s=128&d=identicon&r=PG", "display_name": "Slicedpan", "link": "https://stackoverflow.com/users/1478217/slicedpan"}, "edited": false, "score": 1, "creation_date": 1498636946, "post_id": 44794141, "comment_id": 76573934, "body": "gateway.sandbox.push.apple.com seems to be a public DNS record, so this is more likely an issue with DNS configuration on whatever machine this code is running on"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498638176, "post_id": 44794141, "comment_id": 76574725, "body": "This is most likely not a Ruby (or Rails) issue. Your machine can&#39;t resolve the hostname <code>gateway.sandbox.push.apple.com</code> for some reason. You can use the <code>host</code> utility for DNS lookup. From the command line, enter <code>host gateway.sandbox.push.apple.com</code>. If that doesn&#39;t work, try with another DNS server, e.g. <code>host gateway.sandbox.push.apple.com 8.8.8.8</code>"}], "owner": {"reputation": 169, "user_id": 8223967, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/60f05fe9d2060200b910202b7eb21175?s=128&d=identicon&r=PG&f=1", "display_name": "Jasjeet Singh", "link": "https://stackoverflow.com/users/8223967/jasjeet-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1498626999, "creation_date": 1498626934, "last_edit_date": 1498626999, "question_id": 44794141, "link": "https://stackoverflow.com/questions/44794141/ruby-on-rails-hostname-not-found-gateway-sandbox-push-apple-com", "title": "Ruby on rails: Hostname not found gateway.sandbox.push.apple.com", "body": "<p>I'm working on a app where i use ruby on rails as server script. and my code was working fine but when i change the server. i get this error whenever i try to send a push notification.</p>\n\n<pre><code>Hostname not found: Gateway.sandbox.push.apple.com\n</code></pre>\n\n<p>and code pushcode:</p>\n\n<pre><code>pusher = Grocer.pusher(\n  certificate: \"#{Rails.root}/public/PinkDev.pem\",      # required\n  #certificate: \"#{Rails.root}/public/PinkDist.pem\",      # required\n  passphrase:  'xxxxxxx',                       # optional\n  #gateway:     \"gateway.push.apple.com\", # optional; See note below.\n  gateway:     \"gateway.sandbox.push.apple.com\", # sandbox.\n  port:        2195,                     # optional\n  retries:     3                         # optional\n)\nnotification = Grocer::Notification.new(\n  device_token: \"#{device_token}\",\n  alert: \"#{alert}\",\n  sound: \"default\",\n  content_available: true,\n  badge:count,\n  custom: {\n  \"others\": {:device_token =&gt;xxxxx,:access_token=&gt;xxxxx, :alert=&gt;xxxx,:push_type=&gt;xxxx,:xxxxx=&gt; xxx,:xxxx=&gt;xxxx, :user_id=&gt;xxxx, :badge=&gt;xxxxx}}\n)\npusher.push(notification)\n</code></pre>\n\n<p>how can i resolve this issue?</p>\n"}, {"tags": ["arrays", "ruby", "string", "compare"], "comments": [{"owner": {"reputation": 1962, "user_id": 2945616, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/TL0yY.jpg?s=128&g=1", "display_name": "Atul Khanduri", "link": "https://stackoverflow.com/users/2945616/atul-khanduri"}, "edited": false, "score": 1, "creation_date": 1498627474, "post_id": 44794140, "comment_id": 76568980, "body": "You should give some efforts before asking question in SO and then provide the solution what you&#39;ve tried."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1498630116, "post_id": 44794140, "comment_id": 76570071, "body": "Is it possible that there a duplicates in (in one or both of) the arrays?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1498667574, "post_id": 44794140, "comment_id": 76596240, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/9095017/comparing-two-arrays-in-ruby\">Comparing two arrays in Ruby</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1380, "user_id": 1535853, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1PUpo.jpg?s=128&g=1", "display_name": "Sahan Serasinghe", "link": "https://stackoverflow.com/users/1535853/sahan-serasinghe"}, "is_accepted": false, "score": 1, "last_activity_date": 1498627337, "creation_date": 1498627337, "answer_id": 44794216, "question_id": 44794140, "link": "https://stackoverflow.com/questions/44794140/ruby-how-to-compare-2-arrays-of-string/44794216#44794216", "title": "Ruby : How to compare 2 arrays of string", "body": "<p>Perhaps you can do an array difference with the <code>-</code> operator and execute your code if the difference is zero</p>\n\n<pre><code>arr_diff = current_instances - app_instances\n</code></pre>\n\n<p>This is the simplest solution I could think of :)</p>\n\n<p>Check my <a href=\"https://eval.in/823351\" rel=\"nofollow noreferrer\">solution</a> and let me know how it goes</p>\n"}, {"comments": [{"owner": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 0, "creation_date": 1523482821, "post_id": 44795983, "comment_id": 86585078, "body": "Nice solution to check by each element, if order matters. Thanks :]"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 1845, "user_id": 574923, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/YGvbp.jpg?s=128&g=1", "display_name": "Nils_e", "link": "https://stackoverflow.com/users/574923/nils-e"}, "edited": false, "score": 0, "creation_date": 1523486318, "post_id": 44795983, "comment_id": 86586200, "body": "@Nils_e Thanks for the kind feedback, Ruby is a very elegant language:)"}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 3, "last_activity_date": 1498635236, "last_edit_date": 1498635236, "creation_date": 1498634374, "answer_id": 44795983, "question_id": 44794140, "link": "https://stackoverflow.com/questions/44794140/ruby-how-to-compare-2-arrays-of-string/44795983#44795983", "title": "Ruby : How to compare 2 arrays of string", "body": "<pre><code>x = [\"alpha1\", \"beta1\"]\ny = [\"alpha2\", \"beta2\"]\n</code></pre>\n\n<h3>Check if all elements are the same</h3>\n\n<pre><code>x == y #=&gt; false\n</code></pre>\n\n<h3>Compare each element</h3>\n\n<p>Compare each string at some index i, assuming both arrays are the same size. Then apply some code to the matches.</p>\n\n<pre><code>x.zip(y) #=&gt; [[\"alpha1\", \"alpha2\"], [\"beta1\", \"beta2\"]]\nx.zip(y).map {|a,b| a == b ? 'do this' : 'else do this' }\n#=&gt; [\"else do this\", \"else do this\"]\n</code></pre>\n"}], "owner": {"reputation": 247, "user_id": 6378152, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/c1193ff68e9f17ed58182ed16a090fa0?s=128&d=identicon&r=PG&f=1", "display_name": "user6378152", "link": "https://stackoverflow.com/users/6378152/user6378152"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5083, "favorite_count": 0, "closed_date": 1498667574, "answer_count": 2, "score": 0, "last_activity_date": 1498661567, "creation_date": 1498626933, "last_edit_date": 1498627001, "question_id": 44794140, "link": "https://stackoverflow.com/questions/44794140/ruby-how-to-compare-2-arrays-of-string", "closed_reason": "Needs more focus", "title": "Ruby : How to compare 2 arrays of string", "body": "<p>I have 2 arrays of strings as under. I want to compare them and execute some code if these arrays are not equal-</p>\n\n<pre><code>current_instances  = [\"170601_7711\", \"170601_8811\"]\napp_instances      = [\"170602_7711\", \"170602_8811\"]\n</code></pre>\n\n<p>How can I compare them in ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "elasticsearch-rails"], "comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1498629727, "post_id": 44794109, "comment_id": 76569887, "body": "The activerecord seems to be missing in DB, but the elasticsearch index contains the same document. Try reindexing entire ES index if possible...The best solution is to delete the document in ES when it is deleted in db. You can use the after_destroy callback for this. There is a remove api in ES for this purpose."}, {"owner": {"reputation": 2060, "user_id": 1071995, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/n595D.jpg?s=128&g=1", "display_name": "Hussein Ojaghi", "link": "https://stackoverflow.com/users/1071995/hussein-ojaghi"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1498630082, "post_id": 44794109, "comment_id": 76570060, "body": "Excuse me can u explain more, where is activerecord in DB,"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1498630448, "post_id": 44794109, "comment_id": 76570225, "body": "activerecord is every single entry in DB related to the rails model tables. You create a doctorprofile using rails create action and post the data to ES after save. The entry is created in db as well as ES (expecting that you might have written an after_commit or after_save). Now you delete that doctorprofile from the app. But, you forget to delete the same in ES. That is when this problem occurs. Now when you search the deleted object, it searches in ES and tries to load the object from MySQL. The object doesn&#39;t exist. So, you might get this error."}, {"owner": {"reputation": 2060, "user_id": 1071995, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/n595D.jpg?s=128&g=1", "display_name": "Hussein Ojaghi", "link": "https://stackoverflow.com/users/1071995/hussein-ojaghi"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1498630607, "post_id": 44794109, "comment_id": 76570311, "body": "can u give me a tutorial to do this, i&#39;m so beginner in this case"}, {"owner": {"reputation": 2060, "user_id": 1071995, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/n595D.jpg?s=128&g=1", "display_name": "Hussein Ojaghi", "link": "https://stackoverflow.com/users/1071995/hussein-ojaghi"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1498630829, "post_id": 44794109, "comment_id": 76570406, "body": "I use postgresql, should i have to change something in my postgresql database"}, {"owner": {"reputation": 2060, "user_id": 1071995, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/n595D.jpg?s=128&g=1", "display_name": "Hussein Ojaghi", "link": "https://stackoverflow.com/users/1071995/hussein-ojaghi"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1498631664, "post_id": 44794109, "comment_id": 76570861, "body": "of course i forget to say i added   include Elasticsearch::Model   include Elasticsearch::Model::Callbacks  in doctorprofile and subspeciality model"}, {"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1498632256, "post_id": 44794109, "comment_id": 76571149, "body": "Check this out <a href=\"https://berislavbabic.com/refresh-your-elasticsearch-index-with-zero-downtime/\" rel=\"nofollow noreferrer\">berislavbabic.com/&hellip;</a>"}, {"owner": {"reputation": 2060, "user_id": 1071995, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/n595D.jpg?s=128&g=1", "display_name": "Hussein Ojaghi", "link": "https://stackoverflow.com/users/1071995/hussein-ojaghi"}, "reply_to_user": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1498638533, "post_id": 44794109, "comment_id": 76574941, "body": "I fetch the index data by curl -XGET &#39;<a href=\"http://127.0.0.1:9200/doctor_profiles/_search?pretty=1\" rel=\"nofollow noreferrer\">127.0.0.1:9200/doctor_profiles/_search?pretty=1</a>&#39; command and i see there is a few rows of my doctor profile table are over there but i don&#39;t know it doesn&#39;t show in the search result. in fact all of the outputs results are 404 not found"}, {"owner": {"reputation": 48118, "user_id": 3498062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af3b7feaee84aac3a99e885ee2a97e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Stefan", "link": "https://stackoverflow.com/users/3498062/andrei-stefan"}, "edited": false, "score": 0, "creation_date": 1498920204, "post_id": 44794109, "comment_id": 76703817, "body": "You can double check if you are doing something wrong in Rails by running the query you think you need from a REST client or the Dev Tools from Kibana (or if you are using an older version - the Sense client plugin). If the query gives you 2 documents back then you know the query/mappings are wrong."}, {"owner": {"reputation": 477, "user_id": 898716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sSIAn.jpg?s=128&g=1", "display_name": "Allam Matsubara", "link": "https://stackoverflow.com/users/898716/allam-matsubara"}, "edited": false, "score": 0, "creation_date": 1499092134, "post_id": 44794109, "comment_id": 76754305, "body": "@Sandro, as a note, if you&#39;re using <code>ElasticsearchModel</code> you don&#39;t need to include all those callbacks, just include in your models the Callbacks module, like this: <code>include Elasticsearch::Model::Callbascks</code>"}], "answers": [{"tags": [], "owner": {"reputation": 14511, "user_id": 384417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/966d07471c4adb05fed0e12d31e36584?s=128&d=identicon&r=PG", "display_name": "rewritten", "link": "https://stackoverflow.com/users/384417/rewritten"}, "is_accepted": true, "score": 0, "last_activity_date": 1499336032, "creation_date": 1499336032, "answer_id": 44946048, "question_id": 44794109, "link": "https://stackoverflow.com/questions/44794109/elastic-search-not-found-error-in-ruby-on-rails/44946048#44946048", "title": "elastic search not found error in ruby on rails", "body": "<p>Your code doesn't say much, but it seems that you have a boolean <code>enabled</code> on your model, which tells whether the record is to be indexed or not.</p>\n\n<p>The issue is with the update callback, because if you change your model from <code>enabled</code> to <code>not enabled</code>, instead of removing it from the index, it just don't update existing information. </p>\n\n<p>The correct callback would be</p>\n\n<pre><code>  after_commit on: [:update] do\n    if enabled?\n      if previous_changes['enabled'] &amp;&amp;\n         !previous_changes['enabled'].first\n        # previously not enabled, we need to index it\n        __elasticsearch__.index_document\n      else\n        # previously enabled, we need to update it\n        __elasticsearch__.update_document\n      end\n    else\n      # not enabled\n      if previous_changes['enabled'] &amp;&amp;\n         previous_changes['enabled'].first\n        # previously enabled, delete\n        __elasticsearch__.delete_document\n      end\n      # if it wasn't enabled before, it's not in the index anyway.\n      # do nothing\n    end\n  end\n</code></pre>\n\n<p>The <code>previous_changes</code> hash stores the attributes that did change when saving the model, so you can check the previous value of the <code>enabled</code> attribute. See <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Dirty.html#method-i-previous_changes\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/classes/ActiveModel/Dirty.html#method-i-previous_changes</a></p>\n\n<p>Once you have the new callback in place, rebuild the indexes to remove the bogus data in production if needed:</p>\n\n<pre><code>DoctorProfile.where(enabled: true).find_each { |dp| dp.__elasticsearch__.index_document }\nSubspecialty.where(enabled: true).find_each { |dp| dp.__elasticsearch__.index_document }\n</code></pre>\n"}], "owner": {"reputation": 2060, "user_id": 1071995, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/n595D.jpg?s=128&g=1", "display_name": "Hussein Ojaghi", "link": "https://stackoverflow.com/users/1071995/hussein-ojaghi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "accepted_answer_id": 44946048, "answer_count": 1, "score": 0, "last_activity_date": 1499336032, "creation_date": 1498626759, "last_edit_date": 1498818300, "question_id": 44794109, "link": "https://stackoverflow.com/questions/44794109/elastic-search-not-found-error-in-ruby-on-rails", "title": "elastic search not found error in ruby on rails", "body": "<p>I'm going to do elastic search on DoctorProfile and Subspeciality table. The error that I'm dealing with is that it gives the not found result. It takes a list of ids from doctor table but it doesn't gives desire result which is the doctor and with subspeciality.\nthis is what everything that i did:\nI used these gems:</p>\n\n<pre><code>gem 'elasticsearch-model', git: 'git://github.com/elasticsearch/elasticsearch-rails.git'\ngem 'elasticsearch-rails', git: 'git://github.com/elasticsearch/elasticsearch-rails.git'\ngem 'elasticsearch-extensions', git: 'git://github.com/elasticsearch/elasticsearch-ruby.git'\n</code></pre>\n\n<p>my search method:</p>\n\n<pre><code> def search\n    query = params[:query]\n    #query.encode(\"UTF-8\")\n    if query.nil?\n      render json: { message: \"no query is provided\" }, status: :unprocessable_entity\n      return\n    end\n    profiles = DoctorProfile.search(query).results.map { |r| r._source.id }\n    subspecialties = Subspecialty.search(query).results.map { |r| r._source.title }\n    subspecialties.uniq!\n    profiles = profiles + DoctorProfile.where(\"subspeciality in (?)\", subspecialties).ids\n    profiles.uniq!\n    logger.info \"################  The profile is #{profiles} ########################\"\n    @doctors = DoctorProfile.find(profiles)\n    @cleaned_doctors = @doctors.select { |u| !u.user.nil? }\n\n    render json: @cleaned_doctors\n  end\n</code></pre>\n\n<p>in the doctor model:</p>\n\n<pre><code>  after_commit on: [:create] do\n    __elasticsearch__.index_document if self.enabled?\n  end\n\n  after_commit on: [:update] do\n    __elasticsearch__.update_document if self.enabled?\n  end\n\n  after_commit on: [:destroy] do\n    __elasticsearch__.delete_document\n  end\n\n  settings index: {\n    number_of_shards: 1,\n    number_of_replicas: 0,\n    analysis: {\n      filter: {\n        autocomplete_filter: {\n          type: \"edge_ngram\",\n          min_gram: 1,\n          max_gram: 20\n        }\n      },\n      analyzer: {\n        autocomplete: {\n          type: \"custom\",\n          tokenizer: \"standard\",\n          filter: [\n            \"lowercase\",\n            \"autocomplete_filter\"\n          ]\n        }\n      }\n    }\n  }\n\n  mappings dynamic: 'false' do\n    indexes :first_name, type: \"string\"\n    indexes :last_name, type: \"string\"\n    indexes :medical_code, type: \"string\"\n    indexes :expertise, type: \"string\", analyzer: \"autocomplete\", search_analyzer: \"standard\"\n    indexes :subspeciality, type: \"string\", analyzer: \"autocomplete\", search_analyzer: \"standard\"\n  end\n\n  def self.search(query)\n    __elasticsearch__.search(\n      {\n        query: {\n          multi_match: {\n            query: query,\n            fields: ['medical_code^10', 'subspeciality^5', 'expertise^2', 'first_name', 'last_name']\n          }\n        }\n      }\n    )\n</code></pre>\n\n<p>and in subspeciality model:</p>\n\n<pre><code> after_commit on: [:create] do\n    self.services = self.services.each {|str| str.force_encoding(\"UTF-8\")}\n    __elasticsearch__.index_document if self.enabled?\n  end\n\n  after_commit on: [:update] do\n    self.services = self.services.each {|str| str.force_encoding(\"UTF-8\")}\n    __elasticsearch__.update_document if self.enabled?\n  end\n\n  after_commit on: [:destroy] do\n    __elasticsearch__.delete_document\n  end\n\n settings index: {\n    number_of_shards: 1,\n    number_of_replicas: 0,\n    analysis: {\n      filter: {\n        autocomplete_filter: {\n          type: \"edge_ngram\",\n          min_gram: 1,\n          max_gram: 20\n        }\n      },\n      analyzer: {\n        autocomplete: {\n          type: \"custom\",\n          tokenizer: \"standard\",\n          filter: [\n            \"lowercase\",\n            \"autocomplete_filter\"\n          ]\n        }\n      }\n    }\n  }\n\n  mappings dynamic: 'false' do\n    indexes :description, type: \"string\", analyzer: \"autocomplete\", search_analyzer: \"standard\"\n    indexes :services, type: \"string\"\n  end\n\n  def self.search(query)\n    __elasticsearch__.search(\n      {\n        query: {\n          multi_match: {\n            query: query,\n            fields: ['description', 'services']\n          }\n        }\n      }\n    )\n  end\n</code></pre>\n\n<p>and this is my error in log :</p>\n\n<pre><code>Couldn't find all DoctorProfiles with 'id': (031addd8-9df8-4a53-974d-da0067302ad0, ff890720-4bfb-47d8-bdb8-3dc712b27f29, 869b28e1-cdd7-4bb6-b1d0-c7296e4b0637, 6dd6a784-c54b-4bb7-a0e1-337474ec4114, 234ccc87-f0c7-42f7-b96f-cf8d85487929, 543b621d-87aa-4a34-b6d6-62144c6a387e, 77e35144-9b93-48a0-a5bb-7b3addb99dff, d368f1df-3d1a-49ce-b6f5-f791df3294b1, d3dca8de-3143-4b03-90ec-e73a27c88960, 24abb0b3-2d11-457b-b95d-972462c4a37f) (found 2 results, but was looking for 10\n</code></pre>\n\n<p>i changed this line of code</p>\n\n<pre><code>@doctors = DoctorProfile.find(profiles)\n</code></pre>\n\n<p>to </p>\n\n<pre><code>@doctors = DoctorProfile.where(\"id in (?)\",profiles)\n</code></pre>\n\n<p>and remove this line:</p>\n\n<p>@cleaned_doctors = @doctors.select { |u| !u.user.nil? }</p>\n\n<p>now i want to know what does this method do eactly. </p>\n\n<pre><code>@cleaned_doctors = @doctors.select { |u| !u.user.nil? }\n</code></pre>\n\n<p>to be mention, i have a table named user that doctorProfile has reference to it</p>\n"}, {"tags": ["ruby", "chef-infra", "devops", "configuration-management", "chef-zero"], "answers": [{"comments": [{"owner": {"reputation": 478, "user_id": 3130596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c9b5273e47975f6198779bcfe51bf70?s=128&d=identicon&r=PG&f=1", "display_name": "codewizard", "link": "https://stackoverflow.com/users/3130596/codewizard"}, "edited": false, "score": 0, "creation_date": 1498881773, "post_id": 44823789, "comment_id": 76694760, "body": "Apparently not, I&#39;m using the latest version of chef."}], "tags": [], "owner": {"reputation": 130, "user_id": 8129194, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cdnnY.jpg?s=128&g=1", "display_name": "Nithees balaji", "link": "https://stackoverflow.com/users/8129194/nithees-balaji"}, "is_accepted": false, "score": 0, "last_activity_date": 1498735482, "creation_date": 1498735482, "answer_id": 44823789, "question_id": 44793231, "link": "https://stackoverflow.com/questions/44793231/chef-client-run-half-copying-cookbooks-from-site-cookbooks-directory-into-cookbo/44823789#44823789", "title": "Chef-client run half copying cookbooks from site-cookbooks directory into cookbooks directory", "body": "<p>This bug is resolved in latest stable version of chef. You can try that</p>\n"}], "owner": {"reputation": 478, "user_id": 3130596, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/2c9b5273e47975f6198779bcfe51bf70?s=128&d=identicon&r=PG&f=1", "display_name": "codewizard", "link": "https://stackoverflow.com/users/3130596/codewizard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498735482, "creation_date": 1498621023, "question_id": 44793231, "link": "https://stackoverflow.com/questions/44793231/chef-client-run-half-copying-cookbooks-from-site-cookbooks-directory-into-cookbo", "title": "Chef-client run half copying cookbooks from site-cookbooks directory into cookbooks directory", "body": "<p>I've got a custom cookbook that configures my Jenkins servers.  There are 3 recipes in a custom cookbook. I'm using <code>librarian-chef</code> to manage my cookbook dependencies. Chef is being run in local mode and I use terraform to provision my nodes with Chef. </p>\n\n<p>When I run <code>chef-client -z</code> it tries to copy my custom cookbook in the <code>site-cookbooks</code> directory into the <code>cookbooks</code> directory. The reason I say \"tries\" is because it only copies one of the recipes over, it doens't copy the other recipes or other cookbook files like <code>metadata.rb</code>. Ultimately I get errors on including the java cookbook in my recipe because it can't resolve that cookbooks dependencies. </p>\n\n<p>If I manually log into the node and copy the directory over myself, everything runs perfectly. </p>\n"}, {"tags": ["ruby", "bash"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 5680084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-rUST4yCqm4U/AAAAAAAAAAI/AAAAAAAAALM/AY3uuMb8QEI/photo.jpg?sz=128", "display_name": "abbas maher", "link": "https://stackoverflow.com/users/5680084/abbas-maher"}, "edited": false, "score": 0, "creation_date": 1498625517, "post_id": 44793361, "comment_id": 76568293, "body": "i actually did use the quotes before. But I think i used them wrong so i thought i should not use them. But i realised how you used the quotes is the correct way. Thanks!"}], "tags": [], "owner": {"reputation": 5375, "user_id": 1254208, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cc39122a90bc586faa0804b7ddf823d?s=128&d=identicon&r=PG", "display_name": "GregHNZ", "link": "https://stackoverflow.com/users/1254208/greghnz"}, "is_accepted": true, "score": 2, "last_activity_date": 1498621906, "creation_date": 1498621906, "answer_id": 44793361, "question_id": 44793074, "link": "https://stackoverflow.com/questions/44793074/why-is-executing-a-ruby-command-on-bash-to-command-file-not-working/44793361#44793361", "title": "Why is executing a ruby command on bash to command file not working?", "body": "<p>I believe you need double quotes in your if statement</p>\n\n<p>Similar to example 6.4 here: <a href=\"http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-6.html\" rel=\"nofollow noreferrer\">http://tldp.org/HOWTO/Bash-Prog-Intro-HOWTO-6.html</a></p>\n\n<pre><code>cd \"$(dirname \"$0\")\" \ng1=Hi-Lo\necho Welcome to Ruby_Games! So far, you can play $g1.\necho What game would you like to play?\nread game_choice\nif [ \"$game_choice\" = \"$g1\" ]\nthen\n    ruby Hi-Lo.rb\nfi\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95060, "user_id": 89817, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df253c3b6533949ea94f31f328f3e769?s=128&d=identicon&r=PG", "display_name": "Gordon Davisson", "link": "https://stackoverflow.com/users/89817/gordon-davisson"}, "is_accepted": false, "score": 1, "last_activity_date": 1498625621, "creation_date": 1498625621, "answer_id": 44793913, "question_id": 44793074, "link": "https://stackoverflow.com/questions/44793074/why-is-executing-a-ruby-command-on-bash-to-command-file-not-working/44793913#44793913", "title": "Why is executing a ruby command on bash to command file not working?", "body": "<p>You need spaces between each element of the <code>test</code> (aka <code>[</code>) command. That is, you need a space between <code>[</code> and <code>$game_choice</code>, between <code>$game_choice</code> and  <code>=</code>, etc. Also, as @GregHNZ pointed out, you should use double-quotes around variable references, in case they contain spaces or certain other shell metacharacters. Finally, <code>==</code> in a <code>test</code> expression is a bash extension; use <code>=</code> instead, and it'll work in more basic shells as well. Result:</p>\n\n<pre><code>if [ \"$game_choice\" = \"$g1\" ]\n</code></pre>\n\n<p>Spaces are important delimiters in shell syntax; there are places they're required and places they're forbidden, and very very few places where they're optional. In many languages, you can add or remove spaces to make the code more readable, but that's not the case in shell.</p>\n\n<p>BTW, I recommend using <a href=\"http://www.shellcheck.net\" rel=\"nofollow noreferrer\">shellcheck.net</a>; it does a pretty good job of spotting errors like this. Actually, it points out a couple I didn't think of: you should add a shebang line to the beginning of the script, and using <code>cd</code> without checking for an error risks the rest of the script running in an unexpected directory. So you should use something like this:</p>\n\n<pre><code>#!/bin/bash\ncd \"$(dirname \"$0\")\" || {\n    echo \"Error cd'ing to the script's directory\" &gt;&amp;2\n    exit 1\n}\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 5680084, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-rUST4yCqm4U/AAAAAAAAAAI/AAAAAAAAALM/AY3uuMb8QEI/photo.jpg?sz=128", "display_name": "abbas maher", "link": "https://stackoverflow.com/users/5680084/abbas-maher"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 44793361, "answer_count": 2, "score": 1, "last_activity_date": 1498625621, "creation_date": 1498619930, "question_id": 44793074, "link": "https://stackoverflow.com/questions/44793074/why-is-executing-a-ruby-command-on-bash-to-command-file-not-working", "title": "Why is executing a ruby command on bash to command file not working?", "body": "<p>Code from .command file:</p>\n\n<pre><code>cd \"$(dirname \"$0\")\" \ng1=Hi-Lo\necho Welcome to Ruby_Games! So far, you can play $g1.\necho What game would you like to play?\nread game_choice\nif [$game_choice == $g1]\nthen\nruby Hi-Lo.rb\nfi\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Welcome to Ruby_Games! So far, you can play Hi-Lo.\nWhat game would you like to play?\nHi-Lo\n/Users/Abbas/Desktop/Ruby_Games/LAUNCHER.command: line 6: [Hi-Lo: command not found\nlogout\n</code></pre>\n\n<p>So what exactly is going wrong? Thanks</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1498620178, "post_id": 44793102, "comment_id": 76566760, "body": "You want either one of <code>&lt;</code> or <code>outline.length - 1</code>, not both."}, {"owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "reply_to_user": {"reputation": 15486, "user_id": 719547, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/51e61f099c7b1ac0588ecda69193f75c?s=128&d=identicon&r=PG", "display_name": "Jim Stewart", "link": "https://stackoverflow.com/users/719547/jim-stewart"}, "edited": false, "score": 0, "creation_date": 1498622559, "post_id": 44793102, "comment_id": 76567331, "body": "Updated my answer. Thanks"}], "tags": [], "owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "is_accepted": false, "score": 1, "last_activity_date": 1498622417, "last_edit_date": 1498622417, "creation_date": 1498620111, "answer_id": 44793102, "question_id": 44793008, "link": "https://stackoverflow.com/questions/44793008/undefined-method-ljust-for-nilnilclass-nomethoderror/44793102#44793102", "title": "undefined method `ljust&#39; for nil:NilClass (NoMethodError)", "body": "<p>You're trying to access <code>outline[outline.length]</code> that's why it returns <code>nil</code>. ( Arrays indexes in Ruby are between <code>0</code> and <code>length - 1</code> ) </p>\n\n<p>Change this line : </p>\n\n<pre><code> while j &lt;= outline.length\n</code></pre>\n\n<p>by this one: </p>\n\n<pre><code> while j &lt; outline.length\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 5, "last_activity_date": 1498620682, "last_edit_date": 1498620682, "creation_date": 1498620207, "answer_id": 44793120, "question_id": 44793008, "link": "https://stackoverflow.com/questions/44793008/undefined-method-ljust-for-nilnilclass-nomethoderror/44793120#44793120", "title": "undefined method `ljust&#39; for nil:NilClass (NoMethodError)", "body": "<p>The problem is at the line <code>while j &lt;= outline.length</code>.</p>\n\n<p>It should be <code>while j &lt; outline.length</code>.</p>\n\n<p>However, in Ruby, manually maintaining a cursor is often considered a bad practice. Your program can be rewritten as</p>\n\n<pre><code>line_width = 40\n\nchapters = [\"Chapter 1: Numbers\", \"Chapter 2: Letters\",\n          \"Chapter 3: Variables\"]\npages = [\"page 1\",\"page 72\",\"page 118\"]\n\nputs \"Table of Contents\".center line_width\n\nchapters.zip(pages).each do |chapter, page|\n  puts chapter.ljust(line_width/2) + page.rjust(line_width/2)\nend\n</code></pre>\n\n<p>By the way, Ruby programmers prefer underscore to camelcase (except for class names and module names), so I changed <code>lineWidth</code> to <code>line_width</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1383, "user_id": 4833461, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/NFDrU.png?s=128&g=1", "display_name": "JackHasaKeyboard", "link": "https://stackoverflow.com/users/4833461/jackhasakeyboard"}, "is_accepted": true, "score": 0, "last_activity_date": 1498620432, "creation_date": 1498620432, "answer_id": 44793153, "question_id": 44793008, "link": "https://stackoverflow.com/questions/44793008/undefined-method-ljust-for-nilnilclass-nomethoderror/44793153#44793153", "title": "undefined method `ljust&#39; for nil:NilClass (NoMethodError)", "body": "<p>Programming languages start indexing at 0, but numeric values (like the length of an array) are just used normally.</p>\n\n<p>So an array will return 5 items when asked how long it is (<code>.length</code>), but the largest index in the array is 4.</p>\n\n<p>In your case, you get up until the last item in the array (<code>&lt;=</code>) and then try to access an index that's one greater than exists (you're asking if the incrementor is smaller).</p>\n\n<p>Change <code>&lt;=</code> to <code>&lt;</code> so it doesn't also do that when the incrementor is equal to the size of the array:</p>\n\n<p><code>while j &lt; outline.length</code></p>\n\n<hr>\n\n<p>That's it.</p>\n\n<p>0 indexing, real simple but very quickly gets confusing when thinking about how to iterate over data.</p>\n\n<p>Ruby has some more convenient functions that abstract this for you. See <code>.each</code>:</p>\n\n<pre><code>collection.each do |i, element|\n   puts i\n   puts element\nend\n</code></pre>\n"}], "owner": {"reputation": 457, "user_id": 8032508, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/TxIiB.jpg?s=128&g=1", "display_name": "Jwok", "link": "https://stackoverflow.com/users/8032508/jwok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 44793153, "answer_count": 3, "score": 1, "last_activity_date": 1498622417, "creation_date": 1498619430, "last_edit_date": 1498620967, "question_id": 44793008, "link": "https://stackoverflow.com/questions/44793008/undefined-method-ljust-for-nilnilclass-nomethoderror", "title": "undefined method `ljust&#39; for nil:NilClass (NoMethodError)", "body": "<p>I'm learning Ruby and recently completed an assignment to create a table of contents. The code works, however, at the end of the code, the following error occurs:</p>\n\n<pre><code>table_of_contents2.rb:23:in `&lt;main&gt;': undefined method `ljust' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>I've double checked that the outline variable is not <code>nil</code> by doing a <code>puts outline</code> within the while loop, and tried changing the <code>outline</code> variable to <code>@outline</code> and <code>$outline</code> throughout the code, but the error has persisted. </p>\n\n<p>The full code is below:</p>\n\n<pre><code>lineWidth = 40\n\nchapters = [\"Chapter 1: Numbers\", \"Chapter 2: Letters\",\n          \"Chapter 3: Variables\"]\npages = [\"page 1\",\"page 72\",\"page 118\"]\n\nputs \"Table of Contents\".center lineWidth\n\n\noutline = []\n\ni = 0\n\nwhile i &lt; 3\n  outline.push(chapters[i])\n  outline.push(pages[i])\n  i = i + 1\nend\n\nj = 0\n\nwhile j &lt;= outline.length\n  puts outline[j].ljust(lineWidth/2) +\n  outline[j+1].rjust(lineWidth/2)\n  j = j + 2\nend\n</code></pre>\n\n<p>Why is this error occurring? And why is it happening after the code has successfully run?</p>\n\n<p>Addendum: I'm running the code in the Terminal. The full display within the terminal when I run the code is as follows:</p>\n\n<pre><code>$ ruby table_of_contents2.rb\n           Table of Contents            \nChapter 1: Numbers                page 1\nChapter 2: Letters               page 72\nChapter 3: Variables            page 118\ntable_of_contents2.rb:23:in `&lt;main&gt;': undefined method `ljust' for nil:NilClass (NoMethodError)\n</code></pre>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 7420, "user_id": 1081668, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DdH12.png?s=128&g=1", "display_name": "Thanh", "link": "https://stackoverflow.com/users/1081668/thanh"}, "edited": false, "score": 5, "creation_date": 1498618837, "post_id": 44792891, "comment_id": 76566487, "body": "you can use <code>includes</code>, something like: <code>Ranking.includes(:user)</code> <a href=\"http://guides.rubyonrails.org/active_record_querying.html#eager-loading-associations\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 1, "creation_date": 1498622145, "post_id": 44793015, "comment_id": 76567224, "body": "the 2nd idea <code>@rankings = Ranking.where(job_type: &#39;all_users&#39;).order(&#39;id ASC&#39;).select(&#39;id, user_id, ranking, points&#39;).includes(:users)</code> errors w <code>Association named &#39;users&#39; was not found on Ranking; perhaps you misspelled it?</code>"}, {"owner": {"reputation": 630, "user_id": 6286648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_wPEijvhJKc/AAAAAAAAAAI/AAAAAAAAAIk/RMd9LIHJXk8/photo.jpg?sz=128", "display_name": "George", "link": "https://stackoverflow.com/users/6286648/george"}, "reply_to_user": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 1, "creation_date": 1498622317, "post_id": 44793015, "comment_id": 76567267, "body": "@AnApprentice yup, should be <code>includes(:user)</code>"}], "tags": [], "owner": {"reputation": 630, "user_id": 6286648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_wPEijvhJKc/AAAAAAAAAAI/AAAAAAAAAIk/RMd9LIHJXk8/photo.jpg?sz=128", "display_name": "George", "link": "https://stackoverflow.com/users/6286648/george"}, "is_accepted": true, "score": 4, "last_activity_date": 1498622331, "last_edit_date": 1592644375, "creation_date": 1498619491, "answer_id": 44793015, "question_id": 44792891, "link": "https://stackoverflow.com/questions/44792891/how-to-join-the-users-table-to-a-list-of-100-ranking-records-to-avoid-100-extra/44793015#44793015", "title": "How to join the Users table to a list of 100 Ranking Records to avoid 100+ extra user queries?", "body": "<p>You want to use the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#joining-tables\" rel=\"nofollow noreferrer\">active record :joins method</a>. Assuming the <code>users</code> table also has a field called <code>id</code> and not <code>user_id</code>, this should work:</p>\n<pre><code>Ranking\n  .select('rankings.id, rankings.ranking, rankings.points, users.displayName, users.photo_url')\n  .joins('JOIN users ON rankings.user_id = users.id')\n  .where(job_type: 'all_users')\n  .order('id ASC')`\n</code></pre>\n<p><strong>Edit:</strong> I couldn't find documentation for selecting values from multiple tables, just stack old overflow answers. So if that doesn't work, you could just do:</p>\n<pre><code>@rankings = Ranking.where(job_type: 'all_users').order('id ASC').select('id, user_id, ranking, points').includes(:user)\n</code></pre>\n<p>Which will load each <code>Ranking</code> with it's associated <code>User</code> all in one query using <code>includes</code>(which @thanh mentioned in his comment, he linked the docs too which are worth checking out). You can then loop through the ratings and get the <code>displayName</code> and <code>photo_url</code> without making extra database calls.</p>\n<p><strong>edit 2 :)</strong>\nAccording to <a href=\"https://stackoverflow.com/questions/18431527/rails-ignores-columns-from-second-table-when-using-select\">this answer</a> my first answer should work, but since <code>:select</code> returns an ActiveRecord::Relation object, it will only contain objects of the class you call <code>:select</code> on (in our case <code>Ranking</code>). The <code>User</code> columns will be available on those <code>Ranking</code> objects. It also looks like we'll need to alias those user columns, so something like this:</p>\n<pre><code>@rankings = Ranking\n  .select('rankings.id, rankings.ranking, rankings.points, users.displayName as user_display_name, users.photo_url as user_photo_id')\n  .joins('JOIN users ON rankings.user_id = users.id')\n  .where(job_type: 'all_users')\n  .order('id ASC')`\n</code></pre>\n<p>then access them like:</p>\n<p><code>@rankings.first.user_photo_url #=&gt; &quot;https://flikr.com/whatever&quot;</code></p>\n"}], "owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 44793015, "answer_count": 1, "score": 1, "last_activity_date": 1565520038, "creation_date": 1498618484, "last_edit_date": 1565520038, "question_id": 44792891, "link": "https://stackoverflow.com/questions/44792891/how-to-join-the-users-table-to-a-list-of-100-ranking-records-to-avoid-100-extra", "title": "How to join the Users table to a list of 100 Ranking Records to avoid 100+ extra user queries?", "body": "<p>I have a ranking model with the following fields:</p>\n\n<pre><code>Ranking.rb\n  t.string \"job_type\"\n  t.integer \"user_id\"\n  t.integer \"ranking\"\n  t.integer \"total_ranked\"\n  t.integer \"points\"\n</code></pre>\n\n<p>This table is populated by a Background job w ~100 records. I then want to have my API query and return the results of the records stored in ranking like so:</p>\n\n<pre><code>@rankings = Ranking.where(job_type: 'all_users').order('id ASC').select('id, user_id, ranking, points')\n</code></pre>\n\n<p>The problem is I do not have the associated User information per each ranking. Per each ranking, I want to user the user_id to find the User and get User.displayName, User.photo_url.</p>\n\n<p>If I loop through @rankings and make a user query for each record that will be an extra 100+ queries.</p>\n\n<p>How can I take @rankings and somehow include the associated user fields (User.displayName, User.photo_url)? Ideally with less database queries.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1498616697, "post_id": 44792657, "comment_id": 76566026, "body": "<code>id</code> is an object, can you show what does <code>JSON.stringify(id)</code> print?"}, {"owner": {"reputation": 11, "user_id": 6168471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEKC7.jpg?s=128&g=1", "display_name": "Rowland Hill", "link": "https://stackoverflow.com/users/6168471/rowland-hill"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1498616878, "post_id": 44792657, "comment_id": 76566053, "body": "Sure!  It prints: <code>{&quot;project&quot;:{&quot;id&quot;:&quot;2&quot;}}</code>"}, {"owner": {"reputation": 38258, "user_id": 560593, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/99c93a3c235763708dd7263e197acdc6?s=128&d=identicon&r=PG", "display_name": "Patrick Evans", "link": "https://stackoverflow.com/users/560593/patrick-evans"}, "edited": false, "score": 1, "creation_date": 1498616970, "post_id": 44792657, "comment_id": 76566067, "body": "you have: <code>&#39;&#47;projects&#47;&#39; + id</code>, if <code>id</code> is an object that is going to run <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/toString\" rel=\"nofollow noreferrer\">Object&#39;s toString</a> function as it needs to be a string in order to concatenate it. Which is why you get <code>[object Object]</code>. You are probably needing to access your value like <code>id.project.id</code>, or call getProject like <code>getProject(data.project.id)</code> but would need to see how <code>getFormFields</code> is building the returned data"}, {"owner": {"reputation": 11, "user_id": 6168471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEKC7.jpg?s=128&g=1", "display_name": "Rowland Hill", "link": "https://stackoverflow.com/users/6168471/rowland-hill"}, "edited": false, "score": 0, "creation_date": 1498617918, "post_id": 44792657, "comment_id": 76566266, "body": "Ah that was it, Patrick!  I just needed to add <code>project.id</code> in my API call:  <code>const getProject = (id) =&gt; {   event.preventDefault()   return $.ajax({     url: config.apiOrigin + &#39;&#47;projects&#47;&#39; + id.project.id     method: &#39;GET&#39;,     headers: {       Authorization: &#39;Token token=&#39; + store.user.token     }   }) }</code>  The GET was successful and now it&#39;s off to working on rendering it with Handlebars and figuring out how to display the nested &quot;tasks&quot; array that also came with the &quot;project&quot; object.  Thank you so much for your help, Patrick!!"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6168471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEKC7.jpg?s=128&g=1", "display_name": "Rowland Hill", "link": "https://stackoverflow.com/users/6168471/rowland-hill"}, "is_accepted": false, "score": 0, "last_activity_date": 1498619270, "creation_date": 1498619270, "answer_id": 44792989, "question_id": 44792657, "link": "https://stackoverflow.com/questions/44792657/params-being-sent-as-object-object-in-get-request-not-accepted-by-rails/44792989#44792989", "title": "Params being sent as [object Object] in GET request, not accepted by Rails", "body": "<p>Since ID is an object, I needed to access the value more explicitly with <code>id.project.id</code>.</p>\n\n<p>Once I substitued that in my API call, it successfully executed and the single Project I requested was returned.  Here is the working code:</p>\n\n<pre><code>    const getProject = (id) =&gt; {\n      event.preventDefault()\n      return $.ajax({\n        url: config.apiOrigin + '/projects/' + id.project.id,\n        method: 'GET',\n        headers: {\n          Authorization: 'Token token=' + store.user.token\n        }\n      })\n    }\n</code></pre>\n\n<p>Thank you, Patrick Evans!</p>\n"}], "owner": {"reputation": 11, "user_id": 6168471, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dEKC7.jpg?s=128&g=1", "display_name": "Rowland Hill", "link": "https://stackoverflow.com/users/6168471/rowland-hill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 799, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1498619270, "creation_date": 1498616556, "last_edit_date": 1498617197, "question_id": 44792657, "link": "https://stackoverflow.com/questions/44792657/params-being-sent-as-object-object-in-get-request-not-accepted-by-rails", "title": "Params being sent as [object Object] in GET request, not accepted by Rails", "body": "<p>I'm trying to execute a GET request to return a single \"project\", but when I send the params to Rails, they're being rejected because it's showing as [object Object], not the params that Rails is expecting.  </p>\n\n<p>This has worked for me before, so I'm a little lost.  I should be able to type in a number, which represents a project ID, and it should return that project.  Here is the index.html code where I'm entering the ID:</p>\n\n<pre><code>&lt;form id=\"getProject\" class=\"form-group\"&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;input class=\"form-control\" type=\"text\" name=\"project[id]\" placeholder=\"get one project id\"&gt;\n  &lt;/div&gt;\n  &lt;button type=\"submit\" class=\"btn btn-default\" id=\"get-project\"&gt;get one project&lt;/button&gt;\n&lt;/form&gt;\n</code></pre>\n\n<p>The event is triggered on submit:</p>\n\n<pre><code>$('#getProject').on('submit', onGetProject)\n</code></pre>\n\n<p>and onGetProject grabs the data and sends it to the API call:</p>\n\n<pre><code>const onGetProject = function (event) {\n  event.preventDefault()\n  const data = getFormFields(this)\n  api.getProject(data)\n    .then(ui.getProjectSuccess)\n    .catch(ui.getProjectFailure)\n}\n</code></pre>\n\n<p>API Call:</p>\n\n<pre><code>const getProject = (id) =&gt; {\n  event.preventDefault()\n  return $.ajax({\n    url: config.apiOrigin + '/projects/' + id,\n    method: 'GET',\n    headers: {\n      Authorization: 'Token token=' + store.user.token\n    }\n  })\n}\n</code></pre>\n\n<p>This is what shows in the terminal:</p>\n\n<pre><code>Started GET \"/projects/[object%20Object]\" for 127.0.0.1 at 2017-06-27 \n22:03:35 -0400\nProcessing by ProjectsController#show as */*\n  Parameters: {\"id\"=&gt;\"[object Object]\"}\n</code></pre>\n\n<p>I wrote a script that should execute a GET request for a single ID, but that is returning everything, and not the \"show\" that I expect Rails to execute:</p>\n\n<p>Script:</p>\n\n<pre><code>API=\"${API_ORIGIN:-http://localhost:4741}\"\nURL_PATH=\"/projects/${ID}\"\ncurl \"${API}${URL_PATH}\" \\\n  --include \\\n  --request GET \\\n  --header \"Content-Type: application/json\" \\\n  --header \"Authorization: Token token=$TOKEN\" \\\n  --data '{\n    \"project\": {\n      \"id\": \"'\"${INTEGER}\"'\"\n    }\n  }'\n</code></pre>\n\n<p>I'm using Ruby on Rails for my backend, and I am able to successfully execute a GET request which returns an index of all Projects and their nested tasks, as expected.  However, I am unable to get the single GET request to work, and am unsure what might be wrong with my code.  </p>\n\n<p>Please let me know if you need any additional code or information.  Thank you for your help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1498627585, "post_id": 44792560, "comment_id": 76569024, "body": "What you are doing should work. I have many queries in my project for which I get back additional attributes on the records queried, and it works the same from the console as it does from within the Rails app. Try using <code>select(&#39;permits.*, your_other_model_pluralized.applicant_name&#39;)</code> followed by the rest of your SQL and then see if the <code>applicant_name</code> attribute sticks. If not, I suspect there is another problem in your code that you are not noticing--for example, perhaps you are reloading <code>permits</code> before you call for <code>permits.first.applicant_name</code>."}, {"owner": {"reputation": 20898, "user_id": 11194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ee76d05f9b62656b9eeaa81fe4619db?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/11194/ash"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1498627793, "post_id": 44792560, "comment_id": 76569114, "body": "I&#39;ve run permits.first.attributes.keys and the additional attributes aren&#39;t there, despite being called in the select."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1498627884, "post_id": 44792560, "comment_id": 76569152, "body": "I understand what you are saying, but it doesn&#39;t make sense. Rails does let you do this. Have you tried running a debugger and checking <code>permits.first.attributes</code> immediately after your SQL executes?"}], "owner": {"reputation": 20898, "user_id": 11194, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6ee76d05f9b62656b9eeaa81fe4619db?s=128&d=identicon&r=PG", "display_name": "Ash", "link": "https://stackoverflow.com/users/11194/ash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 134, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1498627850, "creation_date": 1498615731, "last_edit_date": 1498627850, "question_id": 44792560, "link": "https://stackoverflow.com/questions/44792560/rails-model-ignoring-additional-specifically-selected-colums-from-other-tables", "title": "Rails model ignoring additional specifically selected colums from other tables", "body": "<p>This is closely related to <a href=\"https://stackoverflow.com/questions/18431527/rails-ignores-columns-from-second-table-when-using-select\">Rails ignores columns from second table when using .select</a>, however that question doesn't go deep enough.</p>\n\n<p>As per the above question, I have a complex query being run from one of my ActiveRecord Models which generates a kind of 'report'.  It is basically a giant table of the primary Model's attributes as well as a few other attributes from related tables. </p>\n\n<ul>\n<li><p><strong>The query itself, works.</strong> I have verified that the resulting SQL executes correctly and when pasted into a SQL terminal I get the results (and columns I want). Unfortunately there is proprietary information in the models that I can't share here, and the Query is too complex to obfuscate.  But To give an idea of what I am doing, this is the start of my ActiveRecord Query: <code>permits = Permit.select('*').joins(\"LEFT JOIN crosstab (' ....</code></p></li>\n<li><p>I have pasted the ActiveRecord Query (above) into the Rails console and not only does it execute perfectly; but the additional attributes (not asssigned to any model or association in my app) can be queried, just fine - exactly what I want:</p>\n\n<p><code>&gt;&gt; permits.first.applicant_name</code><br>\n<code>\"Gordon Ramsay\"</code></p></li>\n</ul>\n\n<p>The problem is that when I execute the code in the rails app (executed from the browser) I can access the attributes of each permit and its associated models ok, but the additional selects on permit raise a NoMethodError.</p>\n\n<p>I cannot understand why the Rails console will let me plug the commands in and work, but when I run the same code in only of my application's methods, it raises an error.</p>\n\n<p>The question above seems to deal with this closely, and the accepted answer suggests trying something out in the console; but why would the console and the Rails app itself deal with this same code differently (since I am under the assumption that the Rails console <strong>is</strong> an instance of the Rails application?</p>\n\n<p>Does anyone know:</p>\n\n<ol>\n<li>Is my assumption about the ActiveRecordRelation omitting the non-model attributes correct?</li>\n<li>Why does the Rails console allow me to do this query and call the 'extra' selected columns but Rails will not.</li>\n<li>Is there a way I can do what I need to do - perhaps creating a proxy object or casting the Permit model to some other ActiveRecord Object that doesn't 'ignore/drop' the extra attributes from the select?</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "reset-password"], "comments": [{"owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "edited": false, "score": 0, "creation_date": 1498610476, "post_id": 44791922, "comment_id": 76564664, "body": "your params seems to be empty. The problem is in your form. Can you post your params  from your logs ?"}], "answers": [{"comments": [{"owner": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "edited": false, "score": 0, "creation_date": 1498617609, "post_id": 44792664, "comment_id": 76566200, "body": "What if i want to keep params[:user][:password].empty? What should i do?  By the way, how can you tell that the form send member key instead of user?"}, {"owner": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "edited": false, "score": 0, "creation_date": 1498617847, "post_id": 44792664, "comment_id": 76566254, "body": "How can I make the form key to the user not member?"}, {"owner": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "edited": false, "score": 0, "creation_date": 1498618182, "post_id": 44792664, "comment_id": 76566322, "body": "I can tell where is the problem right now. Thanks. But after I change to member. There is one more problem. NoMethodError (undefined method `member_url&#39; for #&lt;PasswordResetsController:0x007f9642b8d140&gt;):"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "edited": false, "score": 0, "creation_date": 1498618559, "post_id": 44792664, "comment_id": 76566425, "body": "@NaomiWu could you please edit your question and include the <code>edit</code> action of the controller?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "edited": false, "score": 0, "creation_date": 1498620159, "post_id": 44792664, "comment_id": 76566753, "body": "@NaomiWu I can&#39;t figure out what is causing your form to use <code>member</code>, but i updated the question with an alternate solution that could help you. Check it out."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1498620617, "last_edit_date": 1498620617, "creation_date": 1498616602, "answer_id": 44792664, "question_id": 44791922, "link": "https://stackoverflow.com/questions/44791922/when-resetting-password-update-function-stops-working-in-rails/44792664#44792664", "title": "When resetting password, update function stops working in rails", "body": "<p>The problem is because your <code>form</code> sends <code>member</code> key instead of <code>user</code>, as your logs show:</p>\n\n<pre><code>Parameters: { \n  \"utf8\"=&gt;\"\u2713\", \n  \"authenticity_token\"=&gt;\"...\",\n  \"email\"=&gt;\"naomi.wuuu@gamil.com\",\n  \"member\"=&gt;{\n    \"password\"=&gt;\"[FILTERED]\",\n    \"password_confirmation\"=&gt;\"[FILTERED]\"\n  },\n  ...\n}\n</code></pre>\n\n<p>So, since there is no <code>user</code> key, <code>params[:user]</code> returns <code>nil</code> and, since it can't respond to <code>[]</code>, results in the error:</p>\n\n<blockquote>\n  <p>undefined method `[]' for nil:NilClass</p>\n</blockquote>\n\n<p>Looking at your controller and view I can't see why <code>member</code> is being used instead of <code>user</code>, but you can force your <code>form</code> to send <code>user</code> key using <code>as: \"user\"</code>, like this:</p>\n\n<pre><code>&lt;%= form_for(@user, url: password_reset_path(params[:id]), as: \"user\") do |f| %&gt;\n</code></pre>\n\n<p>With this in place, your parameters will be now:</p>\n\n<pre><code>Parameters: { \n  \"utf8\"=&gt;\"\u2713\", \n  \"authenticity_token\"=&gt;\"...\",\n  \"email\"=&gt;\"naomi.wuuu@gamil.com\",\n  \"user\"=&gt;{\n    \"password\"=&gt;\"[FILTERED]\",\n    \"password_confirmation\"=&gt;\"[FILTERED]\"\n  },\n  ...\n}\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7939429, "user_type": "registered", "profile_image": "https://graph.facebook.com/1889705817934339/picture?type=large", "display_name": "Naomi Wu", "link": "https://stackoverflow.com/users/7939429/naomi-wu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 44792664, "answer_count": 1, "score": 0, "last_activity_date": 1498620617, "creation_date": 1498609934, "last_edit_date": 1498619112, "question_id": 44791922, "link": "https://stackoverflow.com/questions/44791922/when-resetting-password-update-function-stops-working-in-rails", "title": "When resetting password, update function stops working in rails", "body": "<p><a href=\"https://i.stack.imgur.com/zwoVq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zwoVq.png\" alt=\"timeout when uodating\"></a></p>\n\n<p>Here is my code:\npassword_resets_controller.rb</p>\n\n<pre><code>        class PasswordResetsController &lt; ApplicationController\n      before_action :get_user,         only: [:edit, :update]\n      before_action :valid_user,       only: [:edit, :update]\n      before_action :check_expiration, only: [:edit, :update]\n\n      def new\n      end\n\n      def create\n        # @user = User.find_by(email: params[:password_resets]        [:email].downcase)\n        @user = User.find_by(email: params[:password_reset][:email].downcase)\n        if @user\n          @user.create_reset_digest\n          @user.send_password_reset_email\n          flash[:info] = \"Email sent with password reset instructions\"\n          redirect_to root_url\n        else\n          flash.now[:danger] = \"Email address not found\"\n          render 'new'\n        end\n      end\n\n      def edit\n      end\n\n      def update\n        if params[:member][:password].empty?\n          @user.errors.add(:password, \"Can't be empty\")\n          render 'edit'\n        elsif @user.update_attributes(user_params)\n          # log_in @user\n          flash[:success] = \"Password has been reset.\"\n          redirect_to @user\n        else\n          render 'edit'\n        end\n      end\n\n      private\n        def user_params\n          params.require(:member).permit(:password, :password_confirmation)\n        end\n\n        def get_user\n          @user = User.find_by(email: params[:email])\n        end\n\n        # Confirms a valid user.\n        def valid_user\n          unless @user\n            redirect_to root_url\n          end\n        end\n\n        # Check expiration of reset token.\n        def check_expiration\n          if @user.password_reset_expired?\n            flash[:danger] = \"Password reset has expired.\"\n            redirect_to new_password_reset_url\n          end\n        end\n\n    end\n</code></pre>\n\n<p>Thr situation is after I enter the path of password reset token, I put the new password and password_confirmation. Then I click update. However, this error page shows. I really don't know how to figure this out.</p>\n\n<p>Here is my edit file:</p>\n\n<pre><code>    &lt;div class=\"row\"&gt;\n      &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n        &lt;%= form_for(@user, url: password_reset_path(params[:id])) do |f| %&gt;\n          &lt;%= render 'shared/error_messages' %&gt;\n\n          &lt;%= hidden_field_tag :email, @user.email %&gt;\n\n          &lt;%= f.label :password %&gt;\n          &lt;%= f.password_field :password, class: 'form-control' %&gt;\n\n          &lt;%= f.label :password_confirmation, \"Confirmation\" %&gt;\n          &lt;%= f.password_field :password_confirmation, class: 'form-control' %&gt;\n\n          &lt;%= f.submit \"Update password\", class: \"btn btn-primary\" %&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<p></p>\n\n<p>Here is the log:<a href=\"https://i.stack.imgur.com/iREdZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/iREdZ.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is my User table:\n<a href=\"https://i.stack.imgur.com/W2hOT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/W2hOT.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is the log after change password_reset_path(params[:id]) to password_reset_path(@user)\n<a href=\"https://i.stack.imgur.com/wqrK9.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wqrK9.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1498629820, "post_id": 44791890, "comment_id": 76569932, "body": "<i>&quot;What I want to make is a new hash that will match the key and increment the value&quot;</i> \u2013 so you want to count the distinct elements?"}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 6, "last_activity_date": 1498610782, "creation_date": 1498610782, "answer_id": 44792018, "question_id": 44791890, "link": "https://stackoverflow.com/questions/44791890/create-hash-that-matches-keys-and-increments-value/44792018#44792018", "title": "Create Hash that matches keys and increments value", "body": "<p>You can do it like this:</p>\n\n<pre><code>Invitation.all.reduce(Hash.new(0)) do |memo, invitation|\n  memo[invitation.created_at.strftime(\"%A\")] += 1\n  memo\nend\n</code></pre>\n\n<p><code>Hash.new(0)</code> makes a hash where the default values are 0. This is a general-purpose way to get counts from an array</p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 3, "creation_date": 1498613672, "post_id": 44792026, "comment_id": 76565415, "body": "Perhaps <code>each_with_object</code> would be more appropriate than <code>inject</code> here, the &quot;artificial&quot; <code>; total</code> return value for the block always looks odd to me."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1498631911, "post_id": 44792026, "comment_id": 76570972, "body": "In your last example, you can move the mapping into the <code>each_with_object</code> block: <code>total[e.created_at.strftime(&#39;%A&#39;)] += 1</code>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1498668201, "post_id": 44792026, "comment_id": 76596650, "body": "While I approved of this solution <code>pluck</code> would probably be more performant e.g. <code>Invitation.pluck(:created_at).each_with_object{...}</code> This way you don&#39;t have to pull in and map all the other attributes to an AR object just to access one of them"}, {"owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1498675453, "post_id": 44792026, "comment_id": 76600923, "body": "@engineersmnky you&#39;re right. I updated my answer. Thanks"}], "tags": [], "owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "is_accepted": false, "score": 4, "last_activity_date": 1498675623, "last_edit_date": 1498675623, "creation_date": 1498610860, "answer_id": 44792026, "question_id": 44791890, "link": "https://stackoverflow.com/questions/44791890/create-hash-that-matches-keys-and-increments-value/44792026#44792026", "title": "Create Hash that matches keys and increments value", "body": "<pre><code>array = [\"wednesday\", \"thursday\", \"friday\", \"wednesday\", \"wednesday\", \"friday\"]\n\ndays = array.each_with_object(Hash.new(0)) do |e, total| \n  total[e] += 1 \nend\n</code></pre>\n\n<p>will give you this : </p>\n\n<pre><code>{\"wednesday\"=&gt;3, \"thursday\"=&gt;1, \"friday\"=&gt;2}\n</code></pre>\n\n<p>A 'one-line' solution of your problem:</p>\n\n<pre><code>days = Invitation.pluck(:created_at).each_with_object(Hash.new(0)) do |e, total| \n  total[e.strftime(\"%A\")] += 1 \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498631613, "post_id": 44792069, "comment_id": 76570832, "body": "Rails stores times in UTC (converting to and from as needed), so you have to adjust the timezone in your calculation to get the same result."}], "tags": [], "owner": {"reputation": 6559, "user_id": 382520, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/05f73868bd13eba39cab490c897f1333?s=128&d=identicon&r=PG", "display_name": "JCorcuera", "link": "https://stackoverflow.com/users/382520/jcorcuera"}, "is_accepted": false, "score": 3, "last_activity_date": 1498611240, "creation_date": 1498611240, "answer_id": 44792069, "question_id": 44791890, "link": "https://stackoverflow.com/questions/44791890/create-hash-that-matches-keys-and-increments-value/44792069#44792069", "title": "Create Hash that matches keys and increments value", "body": "<p>If you are using postgresql, you can do the query at database level and just use Ruby to map the results:</p>\n\n<pre><code>Invitation\n  .select(\"EXTRACT(DOW FROM created_at) AS day_of_the_week, COUNT(*) AS total_records\")\n  .group(\"day_of_the_week\")\n  .map {|result| [Date::DAYNAMES[result.day_of_the_week], result.total_records] }\n  .to_h\n#=&gt; {\"Friday\"=&gt;4, \"Tuesday\"=&gt;2, \"Thursday\"=&gt;5, \"Monday\"=&gt;3, \"Wednesday\"=&gt;5, \"Saturday\"=&gt;3} \n</code></pre>\n\n<p>By this way you avoid to load all the Invitation objects and just perform one query.</p>\n"}, {"tags": [], "owner": {"reputation": 1280, "user_id": 3554338, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c022fa34c942d95cc255e80cd73f9753?s=128&d=identicon&r=PG&f=1", "display_name": "Aparichith", "link": "https://stackoverflow.com/users/3554338/aparichith"}, "is_accepted": false, "score": 0, "last_activity_date": 1557472457, "last_edit_date": 1557472457, "creation_date": 1557472059, "answer_id": 56072422, "question_id": 44791890, "link": "https://stackoverflow.com/questions/44791890/create-hash-that-matches-keys-and-increments-value/56072422#56072422", "title": "Create Hash that matches keys and increments value", "body": "<p>If its a plain ruby <code>Array</code> and want to group by values</p>\n\n<pre><code>invites = [\"wednesday\", \"thursday\", \"friday\", \"wednesday\", \"wednesday\", \"friday\"]\n\ninvite_group = Hash.new(0)\ninvites.each { |invite| invite_group[invite] += 1 }\n\n# invite_group =&gt; {\"wednesday\"=&gt;3, \"thursday\"=&gt;1, \"friday\"=&gt;2}\n</code></pre>\n\n<p>Or by using <code>key?</code> method</p>\n\n<pre><code>invite_group = Hash.new\n# invite_group = {}\n\ninvites.each { |invite| if invite_group.key?(invite); invite_group[invite] += 1; else invite_group[invite] = 1; end}\n# # invite_group =&gt; {\"wednesday\"=&gt;3, \"thursday\"=&gt;1, \"friday\"=&gt;2}\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "accepted_answer_id": 44792018, "answer_count": 4, "score": 0, "last_activity_date": 1557472457, "creation_date": 1498609613, "last_edit_date": 1498627280, "question_id": 44791890, "link": "https://stackoverflow.com/questions/44791890/create-hash-that-matches-keys-and-increments-value", "title": "Create Hash that matches keys and increments value", "body": "<p>I have a huge array that lists the day of the week in which the object was created, so I end up with an array similar to the following: </p>\n\n<p><code>[\"wednesday\", \"thursday\", \"friday\"]</code> except that it contains 250,000 elements. </p>\n\n<p>What I want to make is a new hash that will match the key and increment the value, so the result is as follows:</p>\n\n<p><code>{\"wednesday\": 250, \"thursday\": 600, \"saturday\": 120}</code> </p>\n\n<p>How can I get achieve this outcome?</p>\n\n<p>Here is my current code:</p>\n\n<pre><code>days = []\n\nInvitation.all.each do |invitation|\n  day = invitation.created_at.strftime(\"%A\")\n  days.push(day)\nend\n\ndays\n</code></pre>\n"}, {"tags": ["ruby", "methods", "reflection"], "comments": [{"owner": {"reputation": 2184, "user_id": 336563, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1f8a313d0510dd29f947c270146be859?s=128&d=identicon&r=PG", "display_name": "ziggurism", "link": "https://stackoverflow.com/users/336563/ziggurism"}, "edited": false, "score": 0, "creation_date": 1498613535, "post_id": 44791773, "comment_id": 76565388, "body": "This may be a duplicate of <a href=\"https://stackoverflow.com/q/33425935/336563\">stackoverflow.com/q/33425935/336563</a>"}, {"owner": {"reputation": 2184, "user_id": 336563, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1f8a313d0510dd29f947c270146be859?s=128&d=identicon&r=PG", "display_name": "ziggurism", "link": "https://stackoverflow.com/users/336563/ziggurism"}, "edited": false, "score": 0, "creation_date": 1498642884, "post_id": 44791773, "comment_id": 76577866, "body": "Also <a href=\"https://stackoverflow.com/q/15868381/336563\">stackoverflow.com/q/15868381/336563</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2184, "user_id": 336563, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1f8a313d0510dd29f947c270146be859?s=128&d=identicon&r=PG", "display_name": "ziggurism", "link": "https://stackoverflow.com/users/336563/ziggurism"}, "edited": false, "score": 0, "creation_date": 1498642479, "post_id": 44793765, "comment_id": 76577580, "body": "And if I want to include ruby 2 keyword arguments? Yes then I could include a double-splat and check all hash keys. But I&#39;m reimplementing a lot of complex code. Would be nice if Ruby allowed me to access the same parameter signature checks that <code>def _method_</code> uses..."}], "tags": [], "owner": {"reputation": 2084, "user_id": 1998200, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ff3ec75a30ccf09edb9a95faf5948ad4?s=128&d=identicon&r=PG", "display_name": "progfan", "link": "https://stackoverflow.com/users/1998200/progfan"}, "is_accepted": false, "score": 0, "last_activity_date": 1498624749, "creation_date": 1498624749, "answer_id": 44793765, "question_id": 44791773, "link": "https://stackoverflow.com/questions/44791773/create-method-dynamically-including-dynamic-but-fixed-argument-list-with-defin/44793765#44793765", "title": "Create method dynamically, including dynamic but fixed argument list, with define_method in ruby?", "body": "<p>One way I can think of is to explicitly check <code>args.count</code> and <code>raise ArgumentError</code> if the number of arguments does not match the expectation you set:</p>\n\n<pre><code>class Foo \n  def self.create_method(method_name, number_of_arguments)\n    define_method(:\"#{method_name}\") do |*args|\n      if args.count &gt; number_of_arguments\n        raise ArgumentError, \"wrong number of arguments (given #{args.count}, expected #{number_of_arguments})\"\n      end \n\n      puts \"Inside #{method_name}, recevied arguments: #{args.join(\", \")}\"  \n    end \n  end \nend\n</code></pre>\n\n<p><strong>Output:</strong></p>\n\n<pre><code>Foo.create_method(\"yolo\", 2)\nFoo.new.yolo(\"arg1\", \"arg2\") // Inside yolo, recevied arguments: arg1, arg2\nFoo.new.yolo(\"arg1\", \"arg2\", \"arg3\") //  wrong number of arguments (given 3, expected 2) (ArgumentError)\n</code></pre>\n"}], "owner": {"reputation": 2184, "user_id": 336563, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/1f8a313d0510dd29f947c270146be859?s=128&d=identicon&r=PG", "display_name": "ziggurism", "link": "https://stackoverflow.com/users/336563/ziggurism"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 284, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498624749, "creation_date": 1498608343, "last_edit_date": 1498609247, "question_id": 44791773, "link": "https://stackoverflow.com/questions/44791773/create-method-dynamically-including-dynamic-but-fixed-argument-list-with-defin", "title": "Create method dynamically, including dynamic but fixed argument list, with define_method in ruby?", "body": "<p>How do I create a method dynamically with a fixed list of arguments determined at runtime by an array of symbols, or a fixed hash of named parameters? Yes, I could use a spot operator to accept any arguments, but I want to raise the same <code>ArgumentError</code> as in the static case whenever the arguments don't match the runtime array (or hash).</p>\n\n<p>Statically, I write</p>\n\n<pre><code> def foo(bar,baz)\n   [bar,baz]\n end\n\n foo(1,2) #=&gt;[1,2]\n foo(1,2,3) #=&gt; ArgumentError: wrong number of arguments (given 3, expected 2)\n</code></pre>\n\n<p>Now I want to create this method at runtime. According to <a href=\"https://stackoverflow.com/q/38233060/336563\">define_method: How to dynamically create methods with arguments</a> we can just</p>\n\n<pre><code> define_method(:foo) do |bar,baz|\n   [bar,baz]\n end\n\n foo(1,2) #=&gt; [1,2]\n foo(1,2,3) #=&gt; ArgumentError: wrong number of arguments (given 3, expected 2)\n</code></pre>\n\n<p>But that only works if I know the argument list when writing the method. What if only have the argument list at runtime? At <a href=\"https://stackoverflow.com/q/89650/336563\">How do you pass arguments to define_method?</a> it is suggested we can use the splat operator to accept any array of arguments:</p>\n\n<pre><code> define_method(:foo) do |*args|\n   args\n end\n\n foo(1,2) #=&gt; [1,2]\n foo(1,2,3) #=&gt; [1,2,3]\n</code></pre>\n\n<p>But can we fix the allowed arguments to conform to a list of arguments given at runtime, duplicate the static code, so that the following happens?</p>\n\n<pre><code> arr = [:bar,:baz]\n\n define_method(:foo) do |*args=arr| #or some other magic here\n   args\n end\n\n foo(1,2) #=&gt; [1,2]\n foo(1,2,3) #=&gt; ArgumentError: wrong number of arguments (given 3, expected 2)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree", "shippo"], "comments": [{"owner": {"reputation": 3320, "user_id": 7013970, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TA2Sl.jpg?s=128&g=1", "display_name": "mootrichard", "link": "https://stackoverflow.com/users/7013970/mootrichard"}, "edited": false, "score": 0, "creation_date": 1498669737, "post_id": 44791472, "comment_id": 76597568, "body": "I would recommend checking the version of the API that you&#39;re using compared the version of the Ruby gem you&#39;re using. The Ruby client wrapper is designed to be used with the most recent version of the API, so if you&#39;re still at the implementation phase, I&#39;d recommend updating the most recent version of the Shippo API."}, {"owner": {"reputation": 531, "user_id": 4859818, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/26c8b231855a82a9de1aa2819b5f8899?s=128&d=identicon&r=PG&f=1", "display_name": "Jared", "link": "https://stackoverflow.com/users/4859818/jared"}, "edited": false, "score": 0, "creation_date": 1501256095, "post_id": 44791472, "comment_id": 77716225, "body": "Were you able to resolve this bug? I&#39;m having a similar issue."}], "answers": [{"tags": [], "owner": {"reputation": 383, "user_id": 5113026, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a6393c0bb1ab08a2060b2ba8062c5b3d?s=128&d=identicon&r=PG&f=1", "display_name": "tman091", "link": "https://stackoverflow.com/users/5113026/tman091"}, "is_accepted": true, "score": 0, "last_activity_date": 1501335987, "creation_date": 1501335987, "answer_id": 45389980, "question_id": 44791472, "link": "https://stackoverflow.com/questions/44791472/shippo-api-integration-status-returns-as-error-even-if-valid/45389980#45389980", "title": "Shippo API Integration: Status returns as &quot;ERROR&quot; even if &quot;VALID&quot;", "body": "<p>What I found with lots of trial and error, was that the products I was sending to Shippo actually exceeded the weight the shipping carrier would allow in a package. (This was because my database was a bunch of dummy data). Be sure to be setting your measurement units as well, here:</p>\n\n<pre><code>    parcel = {\n      :length =&gt; getLength(order_info),\n      :width =&gt; getWidth(order_info),\n      :height =&gt; getHeight(order_info),\n      :distance_unit =&gt; :m,\n      :weight =&gt; getWeight(order_info),\n      :mass_unit =&gt; :lb\n    }\n</code></pre>\n\n<p>After changing the data in my database to have reasonable weights on the products, this error went away.</p>\n"}], "owner": {"reputation": 383, "user_id": 5113026, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/a6393c0bb1ab08a2060b2ba8062c5b3d?s=128&d=identicon&r=PG&f=1", "display_name": "tman091", "link": "https://stackoverflow.com/users/5113026/tman091"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 45389980, "answer_count": 1, "score": 1, "last_activity_date": 1501335987, "creation_date": 1498606049, "question_id": 44791472, "link": "https://stackoverflow.com/questions/44791472/shippo-api-integration-status-returns-as-error-even-if-valid", "title": "Shippo API Integration: Status returns as &quot;ERROR&quot; even if &quot;VALID&quot;", "body": "<p>I've integrated Shippo with my Ruby on Rails Spree platform. Everything seems to be working great, except that when I go to create a transaction to print shipping labels, I get an error in the response.</p>\n\n<p>Here's my response:</p>\n\n<p><code>#&lt;Transaction:0x3feee363470c[id=1b419434531e4b43b438c54b93e2a9f5]\n{\"object_state\"=&gt;\"VALID\", \"status\"=&gt;\"ERROR\", \"object_created\"=&gt;\"2017-06-27T23:11:54.567Z\", \"object_updated\"=&gt;\"2017-06-27T23:11:55.330Z\", \"object_id\"=&gt;\"xxxx\", \"object_owner\"=&gt;\"----@gmail.com\", \"test\"=&gt;true, \"rate\"=&gt;{\"object_id\"=&gt;\"xxxx\", \"amount\"=&gt;\"6.52\", \"currency\"=&gt;\"USD\", \"amount_local\"=&gt;\"6.52\", \"currency_local\"=&gt;\"USD\", \"provider\"=&gt;\"USPS\", \"servicelevel_name\"=&gt;\"Priority Mail\", \"servicelevel_token\"=&gt;\"usps_priority\", \"carrier_account\"=&gt;\"xxxx\"}, \"tracking_number\"=&gt;\"\", \"tracking_status\"=&gt;nil, \"tracking_history\"=&gt;[], \"tracking_url_provider\"=&gt;\"\", \"label_url\"=&gt;\"\", \"commercial_invoice_url\"=&gt;nil, \"messages\"=&gt;[#&lt;Hashie::Mash code=\"\" source=\"USPS\" text=\"Request failed. Please try again or contact Shippo support at support@goshippo.com.\"&gt;], \"order\"=&gt;nil, \"metadata\"=&gt;\"\", \"parcel\"=&gt;\"xxxx\"}-&gt;#&lt;Shippo::API::ApiObject created=2017-06-27 23:11:54 UTC id=\"1b419434531e4b43b438c54b93e2a9f5\" owner=\"xxxx@xxxx.com\" state=#&lt;Shippo::API::Category::State:0x007fddbca5a2e8 @name=:state, @value=:valid&gt; updated=2017-06-27 23:11:55 UTC&gt;</code></p>\n\n<p>Here's the code used to create the label:</p>\n\n<pre><code>def self.createLabel(order_info)\n    shipping_info = order_info.shipping_address\n    stock_location = order_info.store.stock_location\n\naddress_from = {\n  :name =&gt; stock_location.name,\n  :company =&gt; order_info.store.name,\n  :street1 =&gt; stock_location.address1,\n  :street2 =&gt; stock_location.address2,\n  :city =&gt; stock_location.city,\n  :state =&gt; \"#{Spree::State.find(stock_location.state_id)}\",\n  :zip =&gt; stock_location.zipcode,\n  :country =&gt; \"#{Spree::Country.find(stock_location.country_id)}\",\n  :phone =&gt; stock_location.phone,\n}\n\naddress_to = {\n    :name =&gt; \"#{shipping_info.firstname} #{shipping_info.lastname}\",\n    :company =&gt; shipping_info.company,\n    :street1 =&gt; shipping_info.address1,\n    :street2 =&gt; shipping_info.address2,\n    :city =&gt; shipping_info.city,\n    :state =&gt; \"#{Spree::State.find(shipping_info.state_id)}\",\n    :zip =&gt; shipping_info.zipcode,\n    :country =&gt; \"#{Spree::Country.find(shipping_info.country_id)}\",\n    :phone =&gt; shipping_info.phone,\n    :email =&gt; order_info.email\n}\nparcel = {\n    :length =&gt; getLength(order_info),\n    :width =&gt; getWidth(order_info),\n    :height =&gt; getHeight(order_info),\n    :distance_unit =&gt; :m,\n    :weight =&gt; getWeight(order_info),\n    :mass_unit =&gt; :lb\n}\n\nshipment = {\n    :address_from =&gt; address_from,\n    :address_to =&gt; address_to,\n    :parcels =&gt; parcel\n}\n\n#Shippo Carrier ids\n@ups = Rails.application.secrets.ups_shippo_id\n@usps = Rails.application.secrets.usps_shippo_id\ntransaction = Shippo::Transaction.create(\n    :shipment =&gt; shipment,\n    :carrier_account =&gt; \"#{@usps}\",\n    :servicelevel_token =&gt; \"usps_priority\",\n    :label_file_type =&gt; \"PDF\",\n    :async =&gt; false\n)\nend\n</code></pre>\n\n<p>Has anyone run into this issue before? I've looked at their documentation and cannot find any reason for a <code>\"status\"=&gt;\"ERROR\"</code> message, when the <code>\"object_state\"=&gt;\"VALID\"</code>.</p>\n\n<p>I'm happy to post more code if needed. Thanks.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "edited": false, "score": 0, "creation_date": 1498610301, "post_id": 44791399, "comment_id": 76564630, "body": "try using this : <code>final_array += ((array[i]) * 2).digits</code>"}, {"owner": {"reputation": 3, "user_id": 7978214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b870e386bc43748717fa6dd8f4c860d?s=128&d=identicon&r=PG&f=1", "display_name": "foftring", "link": "https://stackoverflow.com/users/7978214/foftring"}, "reply_to_user": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "edited": false, "score": 0, "creation_date": 1498620185, "post_id": 44791399, "comment_id": 76566762, "body": "@OthmaneElKesri thank you so much, that worked"}], "answers": [{"tags": [], "owner": {"reputation": 584, "user_id": 7159326, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c3bce136965a79ceb3a45f93bdbac3c?s=128&d=identicon&r=PG&f=1", "display_name": "Othmane El Kesri", "link": "https://stackoverflow.com/users/7159326/othmane-el-kesri"}, "is_accepted": true, "score": 0, "last_activity_date": 1498620417, "creation_date": 1498620417, "answer_id": 44793150, "question_id": 44791399, "link": "https://stackoverflow.com/questions/44791399/splitting-an-integer-in-an-array-into-individual-digits-in-ruby/44793150#44793150", "title": "Splitting an integer in an array into individual digits in Ruby", "body": "<p>Change this line: </p>\n\n<pre><code>final_array &lt;&lt; ((array[i]) * 2).digits.to_i\n</code></pre>\n\n<p>By this one: </p>\n\n<pre><code>final_array += ((array[i]) * 2).digits\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3711730, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c7478783bf30d2506b514fca6840e1a?s=128&d=identicon&r=PG", "display_name": "danmaclean", "link": "https://stackoverflow.com/users/3711730/danmaclean"}, "is_accepted": false, "score": 0, "last_activity_date": 1498666260, "creation_date": 1498666260, "answer_id": 44807692, "question_id": 44791399, "link": "https://stackoverflow.com/questions/44791399/splitting-an-integer-in-an-array-into-individual-digits-in-ruby/44807692#44807692", "title": "Splitting an integer in an array into individual digits in Ruby", "body": "<p>You can do this with iterators and array slices.</p>\n\n<p>Start by taking the array leaving off the last (-1) element with a slice (<a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-slice\" rel=\"nofollow noreferrer\">ruby array slice method</a>), then reverse that slice.</p>\n\n<pre><code> a = [1,2,3,4,5]\n b = a.reverse[1..-1]\n  =&gt; [4, 3, 2, 1]\n</code></pre>\n\n<p>Next you want just even indexed elements of the new array, you can find that by iterating over the array and checking if it's index is even. The <code>each_with_index</code> method will help you with this (<a href=\"https://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_index\" rel=\"nofollow noreferrer\">Ruby enumerable each_with_index method</a>). If the index is even, store the value at that index in another array</p>\n\n<pre><code> c = []\n b.each_with_index {|n,i| c &lt;&lt; n if i.even? }\n c\n  =&gt; [4, 2]\n</code></pre>\n\n<p>Then use the array <code>inject</code> method to carry out the maths (well explained here - <a href=\"https://stackoverflow.com/questions/710501/need-a-simple-explanation-of-the-inject-method\">SO discussion of Ruby inject</a>).</p>\n\n<pre><code> c.inject(0) {|sum, n| sum + (n * 2) }\n  =&gt; 12\n</code></pre>\n\n<p>This approach allows you to skip messing with counter variables and working backwards over arrays and just stick to Ruby iterators.</p>\n"}], "owner": {"reputation": 3, "user_id": 7978214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b870e386bc43748717fa6dd8f4c860d?s=128&d=identicon&r=PG&f=1", "display_name": "foftring", "link": "https://stackoverflow.com/users/7978214/foftring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1583, "favorite_count": 0, "accepted_answer_id": 44793150, "answer_count": 2, "score": 0, "last_activity_date": 1498666260, "creation_date": 1498605604, "question_id": 44791399, "link": "https://stackoverflow.com/questions/44791399/splitting-an-integer-in-an-array-into-individual-digits-in-ruby", "title": "Splitting an integer in an array into individual digits in Ruby", "body": "<p>I'm trying to gather input from the user, store that input as integers in an array, and then iterate over <strong>every other</strong> number, starting from second to last,and then taking those digits and multiply them by 2. After that, I sum the individual digits of the products, but I'm having trouble storing the result of that math as an integer</p>\n\n<p>Here's my code:</p>\n\n<pre><code># Prompt user for input\n\nprint \"Number: \"\narray = []\ncard = gets.to_i\narray &lt;&lt; card\n\n\n# Prompt the user until the number is valid\n\nuntil card.is_a?(Integer) &amp;&amp; card.positive? &amp;&amp; card.to_s.length &gt; 10\n  print \"Retry: \"\n  card = gets.to_i\n  array &lt;&lt; card\nend\n\narray = array.to_s.scan(/\\d/).map(&amp;:to_i) # split number in array by digit\n\n\ni = -2 # starting the loop at second to last digit\nt = ((array.length)/2).ceil # number of times to iterate through the array length &amp; roundup\n$sum = 0\n\nt.times do #go through the array as many times as digits needed, starting 2nd to last\n  $sum += ((array[i]) * 2).digits\n  i -= 2\nend\n\nputs $sum\n</code></pre>\n\n<p>This gave me the console error:</p>\n\n<pre><code>Array can't be coerced into Integer (TypeError)\n</code></pre>\n\n<p>I also tried taking the individual digits of the product and putting them into a new array like this</p>\n\n<pre><code>final_array = []\n\nt.times do #go through the array as many times as digits needed, starting 2nd to last\n  final_array &lt;&lt; ((array[i]) * 2).digits.to_i\n  i -= 2\nend\n</code></pre>\n\n<p>But this gave me the error <code>undefined method to_i for [2]:Array</code></p>\n\n<p>I know that there is another way to solve this problem using %, but I'm trying to do it with an array. Hope someone can help!</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 65, "user_id": 5929333, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/72426b692d3b543d373d57c72f8ce0a0?s=128&d=identicon&r=PG&f=1", "display_name": "Sathish Narayanan", "link": "https://stackoverflow.com/users/5929333/sathish-narayanan"}, "is_accepted": false, "score": 0, "last_activity_date": 1514368027, "creation_date": 1514368027, "answer_id": 47989836, "question_id": 44791351, "link": "https://stackoverflow.com/questions/44791351/ruby-how-to-connect-a-remote-server-and-run-command-on-it/47989836#47989836", "title": "Ruby-How to connect a remote server and run command on it?", "body": "<p>Check your ssh keys is present in both remote and local. And for the Ruby code please refer this link</p>\n\n<p><a href=\"https://stackoverflow.com/questions/24422886/ssh-remote-server-login-script\">ssh remote server login script</a></p>\n"}, {"tags": [], "owner": {"reputation": 354, "user_id": 4654311, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/064f9c225b88b7d777e533a713964a06?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Quigley", "link": "https://stackoverflow.com/users/4654311/patrick-quigley"}, "is_accepted": false, "score": 0, "last_activity_date": 1514379327, "creation_date": 1514379327, "answer_id": 47992577, "question_id": 44791351, "link": "https://stackoverflow.com/questions/44791351/ruby-how-to-connect-a-remote-server-and-run-command-on-it/47992577#47992577", "title": "Ruby-How to connect a remote server and run command on it?", "body": "<p>I'm unfamiliar with the ssh gem you're using. However, first check the simple:</p>\n\n<ol>\n<li>Is the machine your working on able to establish a ssh connection on with a working ssh server e.g. Github. </li>\n</ol>\n\n<p>Test this by following the GitHub guide to setting up ssh for your Operating System. </p>\n\n<ol start=\"2\">\n<li><p>Is there a remote server with the IP Address 1.2.3.4 listening for a ssh connection? </p></li>\n<li><p>Which port is it listening on? The default port is 22.</p></li>\n</ol>\n\n<p>Answer these questions by attempting an ssh connection between the two machines outside of Ruby, using the ssh client you used above fore question 1.</p>\n\n<p>Youll likely find the issue answering these questions. If you don't, consult the documentation for the gem. I should provide instructions for all I've recommended however, I'm on mobile. </p>\n"}], "owner": {"reputation": 23, "user_id": 8221764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5e66064c958a9e2202cdafaac64ca?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8221764/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 786, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1514379327, "creation_date": 1498605316, "last_edit_date": 1498608239, "question_id": 44791351, "link": "https://stackoverflow.com/questions/44791351/ruby-how-to-connect-a-remote-server-and-run-command-on-it", "title": "Ruby-How to connect a remote server and run command on it?", "body": "<p>I have the code like this:</p>\n\n<pre><code>require 'rubygems'\nrequire 'net/ssh'\n\nhostname = '1.2.3.4'\nusername = 'user' \ncmd = \"ls -al\"\n\n\nssh = Net::SSH.start(hostname, username)\nres = ssh.exec!(cmd)\nssh.close\nputs res\n</code></pre>\n\n<p>Here comes the error:</p>\n\n<pre><code>Authentication failed for user user@1.2.3.4 (Net::SSH::AuthenticationFailed)\n</code></pre>\n\n<p>How can I find the problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "edited": false, "score": 3, "creation_date": 1498604745, "post_id": 44791162, "comment_id": 76563326, "body": "So what&#39;s the output in html? And why don\u2019t you use an helper method that just does <code>def help_me(yes) return (c.yes == \u2019t\u2019 ? \u2018green\u2019 : c.yes == \u2018f\u2019 ? \u2018gray\u2019 : \u2018red\u2019) end</code> so you can have <code>&lt;tr class=\u201c&lt;%= help_me(c.yes) %&gt;\u201c&gt;</code>"}], "answers": [{"tags": [], "owner": {"reputation": 222, "user_id": 5970218, "user_type": "registered", "accept_rate": 22, "profile_image": "https://graph.facebook.com/10154104111413714/picture?type=large", "display_name": "Carlos Guerrero", "link": "https://stackoverflow.com/users/5970218/carlos-guerrero"}, "is_accepted": false, "score": 0, "last_activity_date": 1498604419, "creation_date": 1498604419, "answer_id": 44791230, "question_id": 44791162, "link": "https://stackoverflow.com/questions/44791162/rails-code-works-in-development-but-not-in-production/44791230#44791230", "title": "Rails code works in development but not in production", "body": "<p>Try to run your project in production in your local machine, to see if works with the local database. Just use <code>RAILS_ENV=production rails s</code></p>\n\n<p>Also check if the css is being imported correctly (just add red, gray or green using inspect element.)</p>\n"}, {"comments": [{"owner": {"reputation": 630, "user_id": 6286648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_wPEijvhJKc/AAAAAAAAAAI/AAAAAAAAAIk/RMd9LIHJXk8/photo.jpg?sz=128", "display_name": "George", "link": "https://stackoverflow.com/users/6286648/george"}, "edited": false, "score": 0, "creation_date": 1498621408, "post_id": 44791353, "comment_id": 76567039, "body": "@Kris any luck?"}, {"owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "edited": false, "score": 0, "creation_date": 1498775276, "post_id": 44791353, "comment_id": 76652407, "body": "Yes your answer helped a lot, I was using SQLite in development and Postgres in production. I am now using Postgres in both and changed t to true and f to false. My code now works both in development and production."}, {"owner": {"reputation": 630, "user_id": 6286648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_wPEijvhJKc/AAAAAAAAAAI/AAAAAAAAAIk/RMd9LIHJXk8/photo.jpg?sz=128", "display_name": "George", "link": "https://stackoverflow.com/users/6286648/george"}, "reply_to_user": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "edited": false, "score": 0, "creation_date": 1498778403, "post_id": 44791353, "comment_id": 76653325, "body": "great choice-- postgres is awesome. glad you sorted it out"}], "tags": [], "owner": {"reputation": 630, "user_id": 6286648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_wPEijvhJKc/AAAAAAAAAAI/AAAAAAAAAIk/RMd9LIHJXk8/photo.jpg?sz=128", "display_name": "George", "link": "https://stackoverflow.com/users/6286648/george"}, "is_accepted": true, "score": 1, "last_activity_date": 1498605332, "creation_date": 1498605332, "answer_id": 44791353, "question_id": 44791162, "link": "https://stackoverflow.com/questions/44791162/rails-code-works-in-development-but-not-in-production/44791353#44791353", "title": "Rails code works in development but not in production", "body": "<p>You're probably running different database types in development and production (i.e. MySQL in prod and SQLite in dev). Different databases handle Boolean values differently\n e.g. <code>'t'</code> vs. <code>'true'</code> vs. <code>'1'</code>.</p>\n\n<p>I'll bet that if you compare your prod/dev logs you'd see the Boolean values are not being returned as <code>'t'</code> and <code>'f'</code> in prod, causing your conditional to hit the <code>else</code> every time. </p>\n\n<p>To solve this, make sure you're running the same database in both prod and dev! </p>\n"}, {"tags": [], "owner": {"reputation": 330, "user_id": 4627360, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CZHNp.jpg?s=128&g=1", "display_name": "alex1sz", "link": "https://stackoverflow.com/users/4627360/alex1sz"}, "is_accepted": false, "score": 2, "last_activity_date": 1498615470, "last_edit_date": 1498615470, "creation_date": 1498613846, "answer_id": 44792351, "question_id": 44791162, "link": "https://stackoverflow.com/questions/44791162/rails-code-works-in-development-but-not-in-production/44792351#44792351", "title": "Rails code works in development but not in production", "body": "<p>The stylesheet might not be loading due to your production environment configuration, or the <code>@code</code> query (within your admin action) does not return what you expect. </p>\n\n<p>Inspect the element that is not the color you expect. Within developer tools, use the the \"Sources\" tab to verify that the stylesheet is present. If your stylesheet is not in sources, the issue is assets related. Meaning either your prod environment is misconfigured, the asset file itself is not in the right directory, or you are missing a require statement.</p>\n\n<p>Even before inspecting via browser a couple debugging steps you can do are most efficiently done via rails console so fire that up on prod. Execute <code>Code.find_by_sql</code> query from your codes_controller/admin, inspect and verify the results are as expected. Next, within the rails console <code>helper.asset_path('name_of_your_stylesheet.css')</code>. The results should indicate where your problem is. </p>\n\n<p>If its a config thing, check that your <em>config/environments/production.rb</em> is configured properly. Config can vary based on platform, make sure you follow their documentation. If you are using heroku, check that you have <code>config.assets.compile = false</code> and also <code>config.public_file_server.enabled = true</code> if it's rails 5. </p>\n\n<p>George mentioned you might be using sqlite in dev and possibly Postgres for your production database, which would result in your else branch executing always. If that is the case, it is a great illustration of reasons never to use SQLite. Otherwise, perhaps you used MySQL locally in dev and Postgres in prod? I'm sure you can sort that one out.</p>\n\n<p>Finally, get rid of the conditionals you have polluting your view code. There are three possible colors that the tr class can be and 1 of 3 strings will get enclosed in a <code>td</code> via. You don't need a bunch of conditionals for that, you can create a helper method. Or create a hash and lookup the values you want (<code>td</code> string and <code>tr</code> class) for each of the codes.</p>\n\n<p>To do with hash, you'd have hash like this:</p>\n\n<pre><code>hash = {t: {color: 'green', td_string: 'yes'}, f: {color: \"gray\", td_string: \"No\"}}\n</code></pre>\n\n<p>And loop like:</p>\n\n<pre><code> &lt;% @code.each do |c| %&gt;\n    &lt;tr class='&lt;%= hash.dig(c.yes.to_sym, :color) || \\'red\\' %&gt;'&gt;\n      &lt;td&gt;&lt;%= c.code %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= c.name %&gt;&lt;/td&gt;      \n      &lt;td&gt;&lt;%= c.email %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= hash.dig(c.yes.to_sym, :td_string) || 'No Response'&lt;/td&gt;\n      &lt;td&gt;&lt;%= c.meal %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>Bye bye conditionals!</p>\n"}], "owner": {"reputation": 257, "user_id": 6238512, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/W8pZ8.jpg?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/6238512/kris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 408, "favorite_count": 0, "accepted_answer_id": 44791353, "answer_count": 3, "score": 0, "last_activity_date": 1498615470, "creation_date": 1498603961, "last_edit_date": 1498613328, "question_id": 44791162, "link": "https://stackoverflow.com/questions/44791162/rails-code-works-in-development-but-not-in-production", "title": "Rails code works in development but not in production", "body": "<p>I have some ruby <code>if</code>/<code>else</code> statements in one of my view files that should highlight the row different colors based on if the <code>yes</code> attribute is <code>true</code>, <code>false</code> or <code>null</code>. The rows change colors accordingly in development but not production. In production every thing shows up in red and says no response even when the <code>yes</code> is not <code>null</code> in the database. I am stuck trying to figure out why this wouldn't work only in production?</p>\n\n<p>codes/admin.html.erb</p>\n\n<pre><code>&lt;tbody&gt;\n  &lt;% @code.each do |c| %&gt;\n    &lt;% if c.yes == 't' %&gt;\n      &lt;tr class = \"green\"&gt;\n    &lt;% elsif c.yes == 'f' %&gt;\n      &lt;tr class = \"gray\"&gt;\n    &lt;% else %&gt;\n      &lt;tr class = \"red\"&gt;\n    &lt;% end %&gt;\n      &lt;td&gt;&lt;%= c.code %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= c.name %&gt;&lt;/td&gt;      \n      &lt;td&gt;&lt;%= c.email %&gt;&lt;/td&gt;\n    &lt;% if c.yes == 't' %&gt;\n      &lt;td &gt;Yes&lt;/td&gt;\n    &lt;% elsif c.yes == 'f' %&gt;\n      &lt;td &gt;No&lt;/td&gt;\n    &lt;% else %&gt;\n      &lt;td &gt; No Response&lt;/td&gt;\n    &lt;% end %&gt;\n      &lt;td&gt;&lt;%= c.meal %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n  &lt;% end %&gt;\n&lt;/tbody&gt;\n</code></pre>\n\n<p>codes_controller.rb</p>\n\n<pre><code>def admin      \n  @children = Child.all\n  @code = Code.find_by_sql(\"SELECT c.code, g.name, g.email, g.yes, g.id as guest_id, m.name as meal\n                            FROM codes c\n                            LEFT OUTER JOIN guests g on g.code_id = c.id\n                            LEFT OUTER JOIN meals m on g.meal_id = m.id\n                           \")\nend\n</code></pre>\n\n<p>css </p>\n\n<pre><code>.red{\n  background-color: #5e0009;\n  color: white;\n}\n\n.gray{\n  background-color: gray;\n  color: white;\n}\n\n.green{\n  background-color: #648293;\n  color: white;\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "edited": false, "score": 0, "creation_date": 1498601076, "post_id": 44790446, "comment_id": 76562178, "body": "The difference is that the <code>will_paginate</code> code is a mixin that is included into a class that has a controller instance variable. You are creating a class which doesn&#39;t have any existing variable that matches the variable name you are calling, which is why you are getting the undefined variable name. Passing the controller into the constructor of your class is a way to work around this."}], "answers": [{"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1498600289, "creation_date": 1498600289, "answer_id": 44790544, "question_id": 44790446, "link": "https://stackoverflow.com/questions/44790446/rails-accessing-the-current-controller-from-inside-a-lib-class/44790544#44790544", "title": "RAILS: Accessing the current controller from inside a lib class", "body": "<p>You probably want to do something like: </p>\n\n<pre><code>class ListView\n\n    def initialize(controller)\n      @controller = controller\n    end\n\n    def render\n      controller_name.inspect\n    end\n\n  private \n\n    def controller()   @controller    end\n\n    def controller_name\n      controller.controller_name\n    end\n\nend\n</code></pre>\n\n<p>Then in your controller, do: </p>\n\n<pre><code>@list = ListView.new(self)\n</code></pre>\n\n<p>I'm guessing that you're going for the presenter pattern. If so, you'll want to watch Ryan Bates great <a href=\"https://www.youtube.com/watch?v=QHsq6aFlP0U\" rel=\"nofollow noreferrer\">RailsCast</a> on the subject where you'll learn how to get your presenter to actually render something.</p>\n"}], "owner": {"reputation": 437, "user_id": 970077, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/e8446e6559d00c44a63238ccc6317bd0?s=128&d=identicon&r=PG", "display_name": "refeniz", "link": "https://stackoverflow.com/users/970077/refeniz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 234, "favorite_count": 0, "accepted_answer_id": 44790544, "answer_count": 1, "score": 0, "last_activity_date": 1498600289, "creation_date": 1498599846, "question_id": 44790446, "link": "https://stackoverflow.com/questions/44790446/rails-accessing-the-current-controller-from-inside-a-lib-class", "title": "RAILS: Accessing the current controller from inside a lib class", "body": "<p>In my controller I have:</p>\n\n<pre><code>@list = ListView.new()\n</code></pre>\n\n<p>The template contains:</p>\n\n<pre><code>= @list.render\n</code></pre>\n\n<p>And in <code>lib/list_view.rb</code> I have:</p>\n\n<pre><code>class ListView\n\n    def render\n        controller_name.inspect\n    end\n\nend\n</code></pre>\n\n<p>When I run this code I get a <code>undefined local variable or method 'controller_name'</code> error. I'm still new to Rails but I'm sure there's a way to do this as will_paginate does it here: <a href=\"https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/view_helpers/action_view.rb#L92\" rel=\"nofollow noreferrer\">https://github.com/mislav/will_paginate/blob/master/lib/will_paginate/view_helpers/action_view.rb#L92</a></p>\n\n<p>It does appear that will_paginate might be a module and not a class? I'm missing something...</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 127444, "user_id": 492405, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SSPGk.png?s=128&g=1", "display_name": "vcsjones", "link": "https://stackoverflow.com/users/492405/vcsjones"}, "is_accepted": false, "score": 3, "last_activity_date": 1498598729, "creation_date": 1498598729, "answer_id": 44790178, "question_id": 44790140, "link": "https://stackoverflow.com/questions/44790140/jquery-not-loaded-on-my-rails-application-v-5-1-2/44790178#44790178", "title": "jQuery not loaded on my rails application (v 5.1.2)", "body": "<p>You need to add this to your <code>application.js</code>, likely above the <code>require_tree .</code> line:</p>\n\n<pre><code>//= require jquery\n</code></pre>\n"}], "owner": {"reputation": 1015, "user_id": 6391764, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/ae6eb3e43b8792b2ce6fa3743e01a750?s=128&d=identicon&r=PG&f=1", "display_name": "Pierre P.", "link": "https://stackoverflow.com/users/6391764/pierre-p"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498598729, "creation_date": 1498598537, "question_id": 44790140, "link": "https://stackoverflow.com/questions/44790140/jquery-not-loaded-on-my-rails-application-v-5-1-2", "title": "jQuery not loaded on my rails application (v 5.1.2)", "body": "<p>It seems that jQuery is not loaded in my rails application, according to this test: <a href=\"https://stackoverflow.com/a/7341884/6391764\">https://stackoverflow.com/a/7341884/6391764</a>.</p>\n\n<p>The output I've got is <code>Doesn't work</code></p>\n\n<p>I'm running my rails application on a Debian virtual machine on top of my Mac. </p>\n\n<p>Here's my :</p>\n\n<p><strong>Gemfile</strong> </p>\n\n<pre><code>source 'https://rubygems.org'\n\ngem 'rails' # Well ...\ngem 'puma'\ngem 'sass-rails'\ngem 'uglifier'\ngem 'coffee-rails'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder'\n\ngroup :development, :test do\n    gem 'sqlite3'\n    gem 'byebug'\nend\n\ngroup :development do\n    gem 'web-console'\n    gem 'listen'\n    gem 'spring'\n    gem 'spring-watcher-listen'\nend\n\ngroup :test do\n    gem 'rails-controller-testing'\n    gem 'minitest-reporters'\n    gem 'guard'\n    gem 'guard-minitest'\nend\n\ngroup :production do\n    gem 'pg'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n\n<p>I've run both <code>bundle install</code> and <code>bundle update</code>.</p>\n\n<p><strong>My <code>application.js</code></strong></p>\n\n<pre><code>// This is a manifest file that'll be compiled into application.js, which will include all the files\n// listed below.\n//\n// Any JavaScript/Coffee file within this directory, lib/assets/javascripts, or any plugin's\n// vendor/assets/javascripts directory can be referenced here using a relative path.\n//\n// It's not advisable to add code directly here, but if you do, it'll appear at the bottom of the\n// compiled file. JavaScript code in this file should be added after the last require_* statement.\n//\n// Read Sprockets README (https://github.com/rails/sprockets#sprockets-directives) for details\n// about supported directives.\n//\n//= require rails-ujs\n//= require turbolinks\n//= require_tree .\n//= require_self\n\nwindow.onload = function() {\n    if (window.jQuery) {\n        // jQuery is loaded\n        alert(\"Yeah!\");\n    } else {\n        // jQuery is not loaded\n        alert(\"Doesn't Work\");\n    }\n}\n</code></pre>\n\n<p><strong>My <code>application.html.erb</code></strong> </p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n\n    &lt;head&gt;\n        &lt;title&gt;Title&lt;/title&gt;\n        &lt;%= csrf_meta_tags %&gt;\n        &lt;%= stylesheet_link_tag    'application', media: 'all',\n                                              'data-turbolinks-track': 'reload' %&gt;\n        &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;/head&gt;\n\n    &lt;body&gt;\n\n\n        &lt;%= render 'layouts/header' %&gt;\n\n        &lt;%= yield %&gt;\n\n        &lt;%= render 'layouts/footer' %&gt;\n\n\n    &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 54533, "user_id": 94559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab13b7f135315a91b9ef13e073354d90?s=128&d=identicon&r=PG&f=1", "display_name": "user94559", "link": "https://stackoverflow.com/users/94559/user94559"}, "edited": false, "score": 3, "creation_date": 1498597934, "post_id": 44789956, "comment_id": 76560727, "body": "What have you tried so far, and where did you get stuck?"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1498598173, "post_id": 44790019, "comment_id": 76560852, "body": "Or <code>keep_if</code> to avoid the <code>!</code>"}, {"owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "edited": false, "score": 0, "creation_date": 1498598191, "post_id": 44790019, "comment_id": 76560863, "body": "thanks! I also found <code>.grep</code> to work!"}], "tags": [], "owner": {"reputation": 10159, "user_id": 4907630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b96aeab7486cd88da186e9c52eb7d7c7?s=128&d=identicon&r=PG&f=1", "display_name": "eugenioy", "link": "https://stackoverflow.com/users/4907630/eugenioy"}, "is_accepted": true, "score": 5, "last_activity_date": 1498598084, "creation_date": 1498598084, "answer_id": 44790019, "question_id": 44789956, "link": "https://stackoverflow.com/questions/44789956/ruby-delete-all-non-string-elements-from-an-array/44790019#44790019", "title": "Ruby: Delete all non-string elements from an array", "body": "<pre><code>array.delete_if { |obj| !(obj.is_a? String) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498598219, "post_id": 44790048, "comment_id": 76560875, "body": "<code>grep</code> returns a new array, it doesn&#39;t modify the existing one."}, {"owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498598496, "post_id": 44790048, "comment_id": 76561021, "body": "I didn&#39;t know that. They both worked for my program but that is a good distinction to know. Thank you!"}], "tags": [], "owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "is_accepted": false, "score": 0, "last_activity_date": 1498598274, "last_edit_date": 1498598274, "creation_date": 1498598157, "answer_id": 44790048, "question_id": 44789956, "link": "https://stackoverflow.com/questions/44789956/ruby-delete-all-non-string-elements-from-an-array/44790048#44790048", "title": "Ruby: Delete all non-string elements from an array", "body": "<p>I found a method <code>grep</code> which worked! </p>\n\n<pre><code>def remove_non_strings(array)\n  array.grep(String)\nend\n</code></pre>\n"}], "owner": {"reputation": 2234, "user_id": 7927036, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/j8HJn.png?s=128&g=1", "display_name": "Matt Croak", "link": "https://stackoverflow.com/users/7927036/matt-croak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 795, "favorite_count": 0, "closed_date": 1498610176, "accepted_answer_id": 44790019, "answer_count": 2, "score": -2, "last_activity_date": 1570801794, "creation_date": 1498597861, "last_edit_date": 1570801794, "question_id": 44789956, "link": "https://stackoverflow.com/questions/44789956/ruby-delete-all-non-string-elements-from-an-array", "closed_reason": "Needs more focus", "title": "Ruby: Delete all non-string elements from an array", "body": "<p>I am trying to write a function in ruby that, given an array with different datatypes, returns a new array of only the string elements. For example, given the array:</p>\n\n<pre><code>arr = [1, 3, 'hello', 'goodbye', 20, 'arrays are fun']\n</code></pre>\n\n<p>I would like to write a function that returns a new array that looks like this:</p>\n\n<pre><code>new_arr = ['hello', 'goodbye', 'arrays are fun']\n</code></pre>\n\n<p>Is there a built in function in ruby that accomplishes the separation of datatypes in a given array? I was able to accomplish it with the below loop.</p>\n\n<pre><code>result = arr.select do |elem|\n   elem.is_a? Integer\nend\n</code></pre>\n\n<p>But I was wondering if Ruby had a built in function to achieve what the loop is doing, something like, say, <code>arr.integers</code> that takes an array and only returns integers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "testing", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "edited": false, "score": 0, "creation_date": 1498655571, "post_id": 44790389, "comment_id": 76586925, "body": "Thanks for your answer. I have also tried and was unable to avoid repeating the object creation. Even within the same <code>shared_examples</code> block, passing the URL from within the loop to the <code>let</code> block was troublesome."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "edited": false, "score": 0, "creation_date": 1498659425, "post_id": 44790389, "comment_id": 76590155, "body": "@BrunoFacca Just to clarify, does the above solution work for your use case? Let me know if you&#39;re having any issues."}, {"owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "edited": false, "score": 0, "creation_date": 1498660224, "post_id": 44790389, "comment_id": 76590817, "body": "It works. However, could you please explain the benefits of breaking it down in this way (creating 3 shared examples)? It seems to me that although this approach is clever/sophisticated, it introduces additional complexity without reducing repetition or LOC. Given your experience, I&#39;m probably missing something."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "edited": false, "score": 1, "creation_date": 1498660905, "post_id": 44790389, "comment_id": 76591324, "body": "@BrunoFacca You&#39;re right that there isn&#39;t a <i>huge</i> difference here. I like this approach because the parameterized example groups are more declarative. It seems like these tests are part of a larger suite that&#39;s designed in such a way that&#39;s forced your hand a bit (ergo <code>object</code> instead of <code>subject</code>). You might want to post a larger section of your code at <a href=\"https://codereview.stackexchange.com/\">Code Review Stack Exchange</a> and see if they have any tips."}, {"owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "edited": false, "score": 0, "creation_date": 1498661099, "post_id": 44790389, "comment_id": 76591466, "body": "Thanks for your help. Will do that."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1498599612, "creation_date": 1498599612, "answer_id": 44790389, "question_id": 44789813, "link": "https://stackoverflow.com/questions/44789813/testing-url-regex-validation-with-rspec/44790389#44790389", "title": "Testing URL (regex) validation with RSpec", "body": "<p>Your solution isn't bad. It makes sense to me to continue to break it down with more <code>shared_examples</code>:</p>\n\n<pre><code>RSpec.shared_examples \"an invalid URL for attribute\" do |url, attribute|\n  let(:object) { FactoryGirl.build(factory_name(subject), attribute =&gt; url) }\n  before(:each) { object.valid? }\n  specify { expect(object.errors[attribute]).to include(\"is invalid\") }\nend\n\nRSpec.shared_examples \"a valid URL for attribute\" do |url, attribute|\n  let(:object) { FactoryGirl.build(factory_name(subject), attribute =&gt; url) }\n  specify { expect(object).to be_valid }\nend\n\nRSpec.shared_examples \"URL validation\" do |attribute|\n  [ \"invalidurl\",\n    \"inval.lid/urlexample\",\n    # ...\n  ].each do |url|\n    it_behaves_like \"a valid URL for attribute\", url, attribute\n  end\n\n  [ \"http://validurl.com\",\n    \"https://validurl.com/blah_blah\"\n  ].each do |url|\n    it_behaves_like \"an invalid URL for attribute\", url, attribute\n  end\nend\n</code></pre>\n\n<p>The repeated <code>let(:object)</code> bugs me, but I don't have an immediate solution for that.</p>\n"}], "owner": {"reputation": 2409, "user_id": 6307730, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/4QkXN.jpg?s=128&g=1", "display_name": "BrunoFacca", "link": "https://stackoverflow.com/users/6307730/brunofacca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 837, "favorite_count": 0, "accepted_answer_id": 44790389, "answer_count": 1, "score": 0, "last_activity_date": 1498655353, "creation_date": 1498597334, "last_edit_date": 1498655353, "question_id": 44789813, "link": "https://stackoverflow.com/questions/44789813/testing-url-regex-validation-with-rspec", "title": "Testing URL (regex) validation with RSpec", "body": "<p>A Rails 4.2 application has several models with attributes containing URLs. URL validation is done at the model with <code>validates :website_url, format: { with: /\\A(https?|ftp):\\/\\/(-\\.)?([^\\s\\/?\\.#-]+\\.?)+(\\/[^\\s]*)?\\z/i }</code>.</p>\n\n<p>I need to test the URL validation with RSpec 3.5. It is important to ensure that some well-known XSS patterns do not pass validation and that the most commonly used URL patterns pass validation.</p>\n\n<p>Ideally, I'd like to avoid adding one test for each valid and invalid URL I'm testing so the <code>rspec -fd</code> output is not polluted. However, that would probably require creating two tests (one for valid URLs and other for invalid URLs) and adding multiple expectations to each test (one expectation per URL), which does not seem like good idea.</p>\n\n<p>The best solution I've come up with so far are the following shared examples. <strong>Can you think of a better way to test URL validation thoroughly?</strong></p>\n\n<pre><code>RSpec.shared_examples \"url validation\" do |attribute|\n  INVALID_URLS = [\n      \"invalidurl\",\n      \"inval.lid/urlexample\",\n      \"javascript:dangerousJs()//http://www.validurl.com\",\n      # Literal array is required for \\n to be parsed\n      \"http://www.validurl.com\\n&lt;script&gt;dangerousJs();&lt;/script&gt;\"\n  ]\n\n  VALID_URLS = [\n      \"http://validurl.com\",\n      \"https://validurl.com/blah_blah\"\n  ]\n\n  context \"with invalid URLs in #{attribute}\" do\n    INVALID_URLS.each do |url|\n      it \"is invalid with #{url}\" do\n        object = FactoryGirl.build(factory_name(subject), attribute =&gt; url)\n        object.valid?\n        expect(object.errors[attribute]).to include(\"is invalid\")\n      end\n    end\n  end\n\n  context \"with valid URLs in #{attribute}\" do\n    VALID_URLS.each do |url|\n      it \"is valid with #{url}\" do\n        object = FactoryGirl.build(factory_name(subject), attribute =&gt; url)\n        expect(object).to be_valid\n      end\n    end\n  end\n</code></pre>\n\n<p>Within the model specs:</p>\n\n<pre><code>include_examples \"url validation\", :website_url\n</code></pre>\n\n<p><strong>Edit</strong>: Added <code>context</code> for valid and invalid URLs so <code>rspec -fd</code> output is better organized, even with a large number of URL validation tests executed in random order.</p>\n"}, {"tags": ["ruby", "next", "skip", "continue", "enumerator"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1498598177, "post_id": 44789583, "comment_id": 76560855, "body": "What is the approximate maximum size of <code>list</code>?"}, {"owner": {"reputation": 469, "user_id": 7324619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1fceecbf4e9c3c61e8ee1335da9d83ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asone Tuhid", "link": "https://stackoverflow.com/users/7324619/asone-tuhid"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1498598249, "post_id": 44789583, "comment_id": 76560896, "body": "Ideally, I&#39;d like a general solution but right now the size is always 18"}], "answers": [{"comments": [{"owner": {"reputation": 469, "user_id": 7324619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1fceecbf4e9c3c61e8ee1335da9d83ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asone Tuhid", "link": "https://stackoverflow.com/users/7324619/asone-tuhid"}, "edited": false, "score": 0, "creation_date": 1498641732, "post_id": 44791089, "comment_id": 76577058, "body": "I kind of did the same thing (as an enumerator) but mine is ~6 times slower just at iterating than <code>[...].repeated_permutation(n).with_index</code>, did you test the speed?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 469, "user_id": 7324619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1fceecbf4e9c3c61e8ee1335da9d83ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asone Tuhid", "link": "https://stackoverflow.com/users/7324619/asone-tuhid"}, "edited": false, "score": 0, "creation_date": 1498661341, "post_id": 44791089, "comment_id": 76591659, "body": "I confess I didn&#39;t look at your code until just now. Yes, the approaches are quite similar. Since you have working code I suggest you move it from your question to an answer (and preferably add some benchmarks).  I didn&#39;t do any performance testing."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1498615891, "last_edit_date": 1498615891, "creation_date": 1498603545, "answer_id": 44791089, "question_id": 44789583, "link": "https://stackoverflow.com/questions/44789583/ruby-enumerators-immediately-skip-multiple-iterations-or-start-iterating-from/44791089#44791089", "title": "ruby enumerators: immediately skip multiple iterations (or start iterating from n)", "body": "<p>I first construct a helper method, <code>change_base</code>, with three arguments:</p>\n\n<ul>\n<li><code>off</code>, the base-10 offset into the sequence of repeated permutations of the given array <code>arr</code>,</li>\n<li><code>m</code>, a number system base; and</li>\n<li><code>p</code>, the permutation size.</li>\n</ul>\n\n<p>The method performs three steps to construct an array <code>off_m</code>:</p>\n\n<ul>\n<li>converts <code>off</code> to base <code>m</code> (radix <code>m</code>);</li>\n<li>separates the digits of the base <code>m</code> value into an array; and</li>\n<li>if necessary, pads the array with leading <code>0</code>s to make it of size <code>p</code>.</li>\n</ul>\n\n<p>By setting <code>m = arr.size</code>, each digit of <code>off_m</code> is an offset into <code>arr</code>, so <code>off_m</code> maps the base-10 offset to a unique permutation of size <code>p</code>.</p>\n\n<pre><code>def change_base(m, p, off)\n  arr = off.to_s(m).chars.map { |c| c.to_i(m) }\n  arr.unshift(*[0]*(p-arr.size)) \nend\n</code></pre>\n\n<p>Some examples:</p>\n\n<pre><code>change_base(16, 2, 32)\n  #=&gt; [2, 0]\nchange_base(16, 3, 255)\n  #=&gt; [0, 15, 15]\nchange_base(36, 4, 859243)\n  #=&gt; [18, 14, 35, 31]\n18*36**3 + 14*36**2 + 35*36**1 + 31  \n  #=&gt; 859243\n</code></pre>\n\n<p>This implementation of <code>change_base</code> requires that <code>m &lt;= 36</code>. I assume that will be sufficient, but algorithms are available to convert base-10 numbers to numbers with arbitrarily-large bases.</p>\n\n<p>We now construct a method which accepts the given array, <code>arr</code>, the size of each permutation, <code>p</code> and a given base-10 offset into the sequence of permutations. The method returns a permutation, namely, an array of size <code>p</code> whose elements are elements of <code>arr</code>. </p>\n\n<pre><code>def offset_to_perm(arr, p, off)\n  arr.values_at(*change_base(arr.size, p, off))\nend\n</code></pre>\n\n<p>We can now try this with an example.</p>\n\n<pre><code>arr = (0..3).to_a\np = 2\n\n(arr.size**p).times do |off|\n  print \"perm for off = \"\n  print \" \" if off &lt; 10\n  print \"#{off}: \"\n  p offset_to_perm(arr, p, off)\nend\n\nperm for off =  0: [0, 0]\nperm for off =  1: [0, 1]\nperm for off =  2: [0, 2]\nperm for off =  3: [0, 3]\nperm for off =  4: [0, 1]\nperm for off =  5: [1, 1]\nperm for off =  6: [2, 1]\nperm for off =  7: [3, 1]\nperm for off =  8: [0, 2]\nperm for off =  9: [1, 2]\nperm for off = 10: [2, 2]\nperm for off = 11: [3, 2]\nperm for off = 12: [0, 3]\nperm for off = 13: [1, 3]\nperm for off = 14: [2, 3]\nperm for off = 15: [3, 3]\n</code></pre>\n\n<p>If we wish to begin at, say, offset 5, we can write:</p>\n\n<pre><code>i = 5\np offset_to_perm(arr, p, i)\n[1, 1]\ni = i.next #=&gt; 6\np offset_to_perm(arr, p, i)\n[2, 1]\n...\n</code></pre>\n"}], "owner": {"reputation": 469, "user_id": 7324619, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1fceecbf4e9c3c61e8ee1335da9d83ec?s=128&d=identicon&r=PG&f=1", "display_name": "Asone Tuhid", "link": "https://stackoverflow.com/users/7324619/asone-tuhid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 44791089, "answer_count": 1, "score": 2, "last_activity_date": 1498642260, "creation_date": 1498596518, "last_edit_date": 1498642260, "question_id": 44789583, "link": "https://stackoverflow.com/questions/44789583/ruby-enumerators-immediately-skip-multiple-iterations-or-start-iterating-from", "title": "ruby enumerators: immediately skip multiple iterations (or start iterating from n)", "body": "<p>I'm iterating over permutations of a list (18 items) like this:</p>\n\n<pre><code>List = [item0..item18] # (unpredictable)\nPermutation_size = 7\nStart_at = 200_000_000\n\nfor item, i in List.repeated_permutation(Permutation_size).each_with_index\n  next if i &lt; Start_at\n  # do stuff\nend\n</code></pre>\n\n<p><code>Start_at</code> is used to resume from a previously saved state so it's always different but it takes almost <strong>200s</strong> to reach 200 million so I'm wondering if there is a faster way to skip multiple iterations or start at iteration n (converting the enumerator to an array takes even longer). If not, a way to create a custom <code>repeated_permutation(n).each_with_index</code> (that yields results in the same order) would also be appreciated.</p>\n\n<p>Feel free to redirect me to an existing answer (I haven't found any)</p>\n\n<p>PS. (what I had come up with)</p>\n\n<pre><code>class Array\n  def rep_per_with_index len, start_at = 0\n    b = size\n    raise 'btl' if b &gt; 36\n    counter = [0]*len\n    # counter = (start_at.to_s b).split('').map {|i| '0123456789'.include?(i) ? i.to_i : (i.ord - 87)} #this is weird, your way is way faster\n    start_at.to_s(b).chars.map {|i| i.to_i b}\n    counter.unshift *[0]*(len - counter.length)\n    counter.reverse!\n    i = start_at\n    Enumerator.new do |y|\n      loop do\n        y &lt;&lt; [counter.reverse.map {|i| self[i]}, i]\n        i += 1\n        counter[0] += 1\n        counter.each_with_index do |v, i|\n          if v &gt;= b\n            if i == len - 1\n              raise StopIteration\n            else\n              counter[i] = 0\n              counter[i + 1] += 1\n            end\n          else\n            break\n          end\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "file-upload", "haml"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498595910, "post_id": 44789378, "comment_id": 76559673, "body": "Weird. Should have worked. Try this, though: <code>= file_field_tag :files, multiple: true</code>, I&#39;m not sure about that array syntax."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498595951, "post_id": 44789378, "comment_id": 76559693, "body": "Also, post what <code>p params</code> looks like."}, {"owner": {"reputation": 5962, "user_id": 1222564, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/35e05136eb1700834c71d59bb25a1c24?s=128&d=identicon&r=PG", "display_name": "PinkElephantsOnParade", "link": "https://stackoverflow.com/users/1222564/pinkelephantsonparade"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498596302, "post_id": 44789378, "comment_id": 76559891, "body": "pp will result in the string filename of whatever I passed into the uploader. So if I uploaded a file &#39;my_file.txt&#39;. My pp statement down there will print out &#39;my_file.txt&#39;. Issue is that my_file.txt doesn&#39;t exist anywhere in any of the application folders. It wasn&#39;t actually uploaded anywhere."}, {"owner": {"reputation": 5962, "user_id": 1222564, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/35e05136eb1700834c71d59bb25a1c24?s=128&d=identicon&r=PG", "display_name": "PinkElephantsOnParade", "link": "https://stackoverflow.com/users/1222564/pinkelephantsonparade"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498596833, "post_id": 44789378, "comment_id": 76560170, "body": "And likewise, with that syntax above, if I shift-click and upload multiple files, I can access them in the controller as file[0], file[1], file[2] etc. printing these values gives me the respective filenames that I selected for upload. But the missing piece is... the files are not actually uploaded to the application. The files I selected cannot be found anywhere in the rails project&#39;s folders. In the controller, if I try to manipulate file[0]/1/2 etc. as if it were a file... ruby craps out... reason being it is just a string that is the filename of what I uploaded, not the source."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498597640, "post_id": 44789378, "comment_id": 76560585, "body": "I believe you here, but you know the saying: &quot;one line of code is worth a thousand words&quot;. So next time someone asks you to post <code>p params</code>, you post <code>p params</code>. People can make mistakes in their english, but the code doesn&#39;t lie :)"}, {"owner": {"reputation": 5962, "user_id": 1222564, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/35e05136eb1700834c71d59bb25a1c24?s=128&d=identicon&r=PG", "display_name": "PinkElephantsOnParade", "link": "https://stackoverflow.com/users/1222564/pinkelephantsonparade"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498597791, "post_id": 44789378, "comment_id": 76560668, "body": "@SergioTulentsev Whoop... had no idea p params was a thing. I uploaded three files and output is: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;EHilJWT9cA5J4l5OK/Zq9OAUr09Vul9rRC/KL&zwnj;&#8203;ZGMyTMW76ezzkm1BZKal&zwnj;&#8203;NSRbN8ZF1y7yRefMSw9y&zwnj;&#8203;uOwyFyowQ==&quot;, &quot;file&quot;=&gt;[&quot;AF_CSX_DISTRIBUTE_NUMBERS.xlsx&quot;, &quot;AF_CSX_DISTRIBUTE_NUMBERS_V2.xlsx&quot;, &quot;Asset_Categories.csv&quot;], &quot;commit&quot;=&gt;&quot;Import&quot;, &quot;multipart&quot;=&gt;&quot;true&quot;, &quot;controller&quot;=&gt;&quot;scorecard_dashboard&quot;, &quot;action&quot;=&gt;&quot;bob&quot;}. It does definitively tell me that it is just storing a string array of filesnames without any processing or piece that has to do with actual files."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498597853, "post_id": 44789378, "comment_id": 76560686, "body": "Yep, just as you described. Is this form posted via ajax, by any chance?"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1498598098, "post_id": 44790016, "comment_id": 76560818, "body": "See, that&#39;s why you post debug output as asked, instead of describing it :)"}, {"owner": {"reputation": 5962, "user_id": 1222564, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/35e05136eb1700834c71d59bb25a1c24?s=128&d=identicon&r=PG", "display_name": "PinkElephantsOnParade", "link": "https://stackoverflow.com/users/1222564/pinkelephantsonparade"}, "edited": false, "score": 0, "creation_date": 1498598252, "post_id": 44790016, "comment_id": 76560900, "body": "This was exactly it - much thanks! You&#39;re the man. Thanks for guiding me about - now I know about <code>p params</code> and will definitely use that in any future debugging to grab params array."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5962, "user_id": 1222564, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/35e05136eb1700834c71d59bb25a1c24?s=128&d=identicon&r=PG", "display_name": "PinkElephantsOnParade", "link": "https://stackoverflow.com/users/1222564/pinkelephantsonparade"}, "edited": false, "score": 1, "creation_date": 1498598307, "post_id": 44790016, "comment_id": 76560922, "body": "@PinkElephantsOnParade: Just so you know, <code>p</code> is a regular ruby method and you can print all sorts of objects with it. <code>p obj</code> is roughly equivalent to <code>puts obj.inspect</code>"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1498598363, "last_edit_date": 1498598363, "creation_date": 1498598078, "answer_id": 44790016, "question_id": 44789378, "link": "https://stackoverflow.com/questions/44789378/how-to-access-file-from-haml-file-upload/44790016#44790016", "title": "How to access file from HAML file upload?", "body": "<p>Minor mistake on your part. That form declaration should be this:</p>\n\n<pre><code>= form_tag bob_scorecard_dashboard_index_path, :multipart =&gt; true do\n                                             \u2191\n</code></pre>\n\n<p>What you had evaluated to something like '/dashboard/scorecard/bob?multipart=true`. It was a regular query string param instead of a form option.</p>\n"}], "owner": {"reputation": 5962, "user_id": 1222564, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/35e05136eb1700834c71d59bb25a1c24?s=128&d=identicon&r=PG", "display_name": "PinkElephantsOnParade", "link": "https://stackoverflow.com/users/1222564/pinkelephantsonparade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 0, "accepted_answer_id": 44790016, "answer_count": 1, "score": 0, "last_activity_date": 1498598363, "creation_date": 1498595607, "last_edit_date": 1498597023, "question_id": 44789378, "link": "https://stackoverflow.com/questions/44789378/how-to-access-file-from-haml-file-upload", "title": "How to access file from HAML file upload?", "body": "<p>I have a Rails app in which I am using HAML for markup. In one haml file (bob.html.haml) I have the following</p>\n\n<pre><code>= form_tag bob_scorecard_dashboard_index_path :multipart=&gt;true  do\n  = file_field_tag 'file[]', multiple: true\n  = submit_tag \"Import\"\n</code></pre>\n\n<p>In the associated controller I have</p>\n\n<pre><code> def bob\n    pp 'Do process logic on this file now... '\n    file = params[:file]\n    if (!file.nil?)\n      pp 'hey buddy'\n      pp file[0]\n      #pp file[1] #This would show the second file uploaded, etc.\n      #pp file[2] #Third file uploaded... and so on\n    end\n</code></pre>\n\n<p>I can see that whenever I hit upload (the button labeled 'Import'), my method 'bob' gets called. What I would love is for the files I attached in the file upload utility rendered by HAML to be accessible/to be able to manipulate them in any way. Currently params[:file] contains an array of Strings... those strings are the filenames of what the user uploaded. But the actual files are not saved in any temp location, and, as such, can not be manipulated in any way. It seems to me perhaps the HAML piece is not doing it's job... no file is being uploaded to the server that the application is being run on when I hit Submit, so far as I can tell. Instead, I just get a String of what the filename that they uploaded was... but no actual file. </p>\n\n<p>This is a legacy app for which I cannot use Paperclip or Carrierwave - useful utilities I've used in other projects. If at all possible, I want to upload and manipulate the uploaded files in 'pure' ruby and HAML, alone. Is this possible?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "clockwork"], "answers": [{"tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": false, "score": 2, "last_activity_date": 1498593811, "creation_date": 1498593811, "answer_id": 44788936, "question_id": 44788589, "link": "https://stackoverflow.com/questions/44788589/send-errors-from-rails-clockwork-gem-to-airbrake/44788936#44788936", "title": "Send errors from rails clockwork gem to airbrake?", "body": "<p>The airbrake library has an API to notify their service directly without raising an exception. Their GitHub has a ton of documentation on this.</p>\n\n<p><a href=\"https://github.com/airbrake/airbrake-ruby\" rel=\"nofollow noreferrer\">Airbrake Ruby</a></p>\n\n<p>You can do something like this:</p>\n\n<pre><code>Airbrake.notify(\"Opps!\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1498594421, "last_edit_date": 1498594421, "creation_date": 1498594022, "answer_id": 44788983, "question_id": 44788589, "link": "https://stackoverflow.com/questions/44788589/send-errors-from-rails-clockwork-gem-to-airbrake/44788983#44788983", "title": "Send errors from rails clockwork gem to airbrake?", "body": "<p>Just add the following to your clockwork definition:</p>\n\n<pre><code>module Clockwork\n  error_handler do |error|\n    Airbrake.notify_or_ignore(error)\n  end\n\n  # existing configuration\nend\n</code></pre>\n\n<p>See: <a href=\"http://www.rubydoc.info/gems/clockwork/2.0.0#error_handler\" rel=\"nofollow noreferrer\">Clockwork Docs about <code>error_handler</code></a></p>\n"}], "owner": {"reputation": 5050, "user_id": 322791, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/331994d09f3139c73f1ac29e5a65d91e?s=128&d=identicon&r=PG", "display_name": "knagode", "link": "https://stackoverflow.com/users/322791/knagode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 44788983, "answer_count": 2, "score": 0, "last_activity_date": 1498594421, "creation_date": 1498592602, "question_id": 44788589, "link": "https://stackoverflow.com/questions/44788589/send-errors-from-rails-clockwork-gem-to-airbrake", "title": "Send errors from rails clockwork gem to airbrake?", "body": "<p>What is the best way to send errors from clockwork to Airbrake? </p>\n"}, {"tags": ["arrays", "ruby", "search"], "comments": [{"owner": {"reputation": 53905, "user_id": 2864740, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e7a05a144f218bde07b659bc98e1ca7d?s=128&d=identicon&r=PG&f=1", "display_name": "user2864740", "link": "https://stackoverflow.com/users/2864740/user2864740"}, "edited": false, "score": 1, "creation_date": 1498592617, "post_id": 44788481, "comment_id": 76557988, "body": "This can be solved in the same manner as with looking through <i>any</i> array.. Maybe start with solving something &quot;less convoluted&quot; to understand the process: <i>Write code to find the arrays in the following array that contain the number 2</i>: <code>[ [1,2,3], [1], [], [2] ]</code>. The result should be <code>[ [1,2,3], [2] ]</code>. In solving that, the problem asked here (and buried in very specific situation) will be solved: the outer array is &#39;@@all&#39; and each nested array is &#39;@contents&#39; of the specific instance."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1498592888, "post_id": 44788481, "comment_id": 76558134, "body": "Using a class instance variable like <code>@@all</code> can get you into trouble, so be careful when doing this."}, {"owner": {"reputation": 71, "user_id": 8222405, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc783dd0549b2a0a70b2061d0f85a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Tristin", "link": "https://stackoverflow.com/users/8222405/tristin"}, "edited": false, "score": 0, "creation_date": 1498593529, "post_id": 44788481, "comment_id": 76558443, "body": "I understand how to find specific arrays in a nested array and I know how to search for instances by their attributes, like height or name in this case. I just haven&#39;t figured out how to find class instances by the contents of an array that is attributed to them. The best I have been able to do is to find and return the specific array itself, but without any reference to the instance it belongs to, which is the issue.  So I can find the arrays that contain &#39;hat&#39; and return to me the arrays themselves, but I have no idea which dressers they came from."}, {"owner": {"reputation": 71, "user_id": 8222405, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc783dd0549b2a0a70b2061d0f85a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Tristin", "link": "https://stackoverflow.com/users/8222405/tristin"}, "edited": false, "score": 0, "creation_date": 1498594189, "post_id": 44788481, "comment_id": 76558801, "body": "Dresser.all.each{|d| puts d.contents.select{|c| c.include? &#39;hat&#39;}}  This is the best I have been able to come up with, but like I said, it fails to tell me which dressers.  It just finds the hats."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 8222405, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc783dd0549b2a0a70b2061d0f85a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Tristin", "link": "https://stackoverflow.com/users/8222405/tristin"}, "edited": false, "score": 0, "creation_date": 1498594847, "post_id": 44789119, "comment_id": 76559160, "body": "Wow, I had tried exactly and was only missing the reader method.  Derp.  Thanks.  I was very confused why it wasn&#39;t working and didn&#39;t realize I was missing a simple fundamental."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 1, "last_activity_date": 1498594568, "creation_date": 1498594568, "answer_id": 44789119, "question_id": 44788481, "link": "https://stackoverflow.com/questions/44788481/how-to-find-class-instances-by-contents-of-attr-array/44789119#44789119", "title": "How to find class instances by contents of attr array?", "body": "<p>Add a reader <code>contents</code> method then call <code>select</code>.</p>\n\n<pre><code>class Dresser\n\n#rest of your code\n\n  def contents\n    @contents\n  end\nend\n\n#Assuming your instance additions\nDresser.all.select {|d| d.contents.include? 'hat'}\n=&gt;\n[#&lt;Dresser:0x000000020b0890 @name=\"a\", @height=4, @length=6, @width=8, @contents=[\"sock\", \"hat\"]&gt;,\n #&lt;Dresser:0x000000020b0728 @name=\"c\", @height=4, @length=7, @width=6, @contents=[\"hat\"]&gt;]\n</code></pre>\n"}], "owner": {"reputation": 71, "user_id": 8222405, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/cc783dd0549b2a0a70b2061d0f85a7a2?s=128&d=identicon&r=PG&f=1", "display_name": "Tristin", "link": "https://stackoverflow.com/users/8222405/tristin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "accepted_answer_id": 44789119, "answer_count": 1, "score": 0, "last_activity_date": 1498594568, "creation_date": 1498592199, "last_edit_date": 1498593810, "question_id": 44788481, "link": "https://stackoverflow.com/questions/44788481/how-to-find-class-instances-by-contents-of-attr-array", "title": "How to find class instances by contents of attr array?", "body": "<pre><code>class Dresser\n  @@all = []\n  attr_accessor :name, :height, :length, :width, :contents\n  def initialize (name, height,length, width)\n    @name = name\n    @height = height\n    @length = length\n    @width = width\n    @contents = []\n    @@all &lt;&lt; self\n  end\n\n  def Dresser.all\n    @@all\n  end\n\n  def add_content(content)\n    @contents &lt;&lt; content\n  end\nend\n\na = Dresser.new('a', 4, 6, 8)\na.add_content('sock')\na.add_content('hat')\nb = Dresser.new('b', 3, 6, 9)\nb.add_content('bra')\nc = Dresser.new('c', 4, 7, 6)\nc.add_content('hat')\n</code></pre>\n\n<p>How would I go about searching through @@all for the name of dressers that contain a specific item, say a hat? \nEdit: Realized the code I initially entered was incorrect.  Whoops!</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "url-parameters"], "answers": [{"comments": [{"owner": {"reputation": 188, "user_id": 1640644, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0748aa8147ddc2c2d8e918b2f004c872?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/1640644/jerry"}, "edited": false, "score": 0, "creation_date": 1498592033, "post_id": 44788369, "comment_id": 76557668, "body": "That could be an option, but I have a layout where the Ransack filtering is inside a modal. The &#39;per_page&#39; dropdown is just above the table. I know it has to work somehow that I don&#39;t have to change the layout to get it work."}, {"owner": {"reputation": 188, "user_id": 1640644, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0748aa8147ddc2c2d8e918b2f004c872?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/1640644/jerry"}, "edited": false, "score": 0, "creation_date": 1498592905, "post_id": 44788369, "comment_id": 76558144, "body": "Now I get it! Nice! Will update my question with the anwser. Thanks!"}], "tags": [], "owner": {"reputation": 1707, "user_id": 3292174, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DNPrX.jpg?s=128&g=1", "display_name": "Michael Malov", "link": "https://stackoverflow.com/users/3292174/michael-malov"}, "is_accepted": true, "score": 3, "last_activity_date": 1498592385, "last_edit_date": 1498592385, "creation_date": 1498591761, "answer_id": 44788369, "question_id": 44788259, "link": "https://stackoverflow.com/questions/44788259/rails-parse-ransack-parameters-with-submit/44788369#44788369", "title": "Rails Parse Ransack parameters with submit", "body": "<p>You need to add hidden_tag to ransack form and update it's value and submit on change</p>\n\n<p>Add hidden tag to your form:</p>\n\n<pre><code>= semantic_search_form_for(@q) do |f|\n    ...\n    = f.hidden_field :per_page, value: params[:q][:per_page] || 20\n    ...\n</code></pre>\n\n<p>Place select with per_page anywhere:   </p>\n\n<pre><code>= select_tag :per_page, options_for_select([\"20\", \"200\", \"2000\"], params[:q][:per_page])\n</code></pre>\n\n<p>Add script:</p>\n\n<pre><code>javascript:\n$('#per_page').on('change', function() {\n    $('#q_per_page').val(this.value);\n    $('#search').submit();\n});\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 188, "user_id": 1640644, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0748aa8147ddc2c2d8e918b2f004c872?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/1640644/jerry"}, "is_accepted": false, "score": 2, "last_activity_date": 1498594509, "last_edit_date": 1498594509, "creation_date": 1498593246, "answer_id": 44788778, "question_id": 44788259, "link": "https://stackoverflow.com/questions/44788259/rails-parse-ransack-parameters-with-submit/44788778#44788778", "title": "Rails Parse Ransack parameters with submit", "body": "<p>With Michael Malov's response I created this:</p>\n\n<p>Inside the Ransack searchform I added:</p>\n\n<pre><code>= search_form_for @q do |f|\n  = f.hidden_field :per_page, value: @per_page\n</code></pre>\n\n<p>The javascript is now:</p>\n\n<pre><code>$('#per_page').on('change', function() {\n  $('#q_per_page').val(this.value);\n  $('#search').submit();\n});\n</code></pre>\n\n<p>The dropdown is now:</p>\n\n<pre><code>= form_tag({ action: \"index\"}, { method: \"get\", id: \"post_index\"}) do\n  =select_tag :per_page, otions_for_select( [20,200,2000], @per_page )\n</code></pre>\n\n<p>Inside the controller I have:</p>\n\n<pre><code>@per_page = params[:q].present? ? params[:q][:per_page] : 20\n</code></pre>\n"}], "owner": {"reputation": 188, "user_id": 1640644, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/0748aa8147ddc2c2d8e918b2f004c872?s=128&d=identicon&r=PG", "display_name": "Jerry", "link": "https://stackoverflow.com/users/1640644/jerry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 692, "favorite_count": 2, "accepted_answer_id": 44788369, "answer_count": 2, "score": 3, "last_activity_date": 1498594509, "creation_date": 1498591343, "last_edit_date": 1498592321, "question_id": 44788259, "link": "https://stackoverflow.com/questions/44788259/rails-parse-ransack-parameters-with-submit", "title": "Rails Parse Ransack parameters with submit", "body": "<p>I have a Rails app and using ruby 2.3.3.</p>\n\n<p>For my forms I use simple_form, Ransack for the filtering and will_paginate.</p>\n\n<p>I have 'set_per_page' dropdown,so Users can select if the want to see 20, 200 or 200 posts in the table.</p>\n\n<pre><code>= form_tag({ action: \"index\"}, { method: \"get\", id: \"post_index\"}) do\n  =select_tag :per_page, otions_for_select( [20,200,2000], params[:per_page].to_i )\n</code></pre>\n\n<p>My javascript is like this:</p>\n\n<pre><code>$(document).ready(function() {\n  $(\"#per_page\").change(function() {\n    $(\"#post_index\").submit();\n  });\n});\n</code></pre>\n\n<p>So when a user changes the dropdown, it will render the action 'index' again and sets the per_page parameter to the selected value. So far so good, but when I submit the Ransack parameters are gone.</p>\n\n<p>When I filter with Ransack, the URL is:</p>\n\n<pre><code>http://localhost:3001/posts?q[name_eq]=Foo&amp;q[title_eq]=Bar\n</code></pre>\n\n<p>When I select the 'per_page' dropdown, my URL will become:</p>\n\n<pre><code>http://localhost:3001/posts?per_page=200\n</code></pre>\n\n<p>How can I parse the params of the Ransack call, into the per_page call. So I will have a URL like this:</p>\n\n<pre><code>http://localhost:3001/posts?q[name_eq]=Foo&amp;q[title_eq]=Bar&amp;per_page=200\n</code></pre>\n\n<p>Edit:</p>\n\n<p>I tried to add the Ransack parameters in a hidden field like this:</p>\n\n<pre><code>= form_tag({ action: \"index\"}, { method: \"get\", id: \"post_index\"}) do\n  =select_tag :per_page, otions_for_select( [20,200,2000], params[:per_page].to_i )\n  =hidden_field_tag :q, params[:q] if params[:q].present?\n</code></pre>\n\n<p>But this results in a error:</p>\n\n<pre><code>undefined method `merge' for \"#&lt;ActionController::Parameters:0x175c6110&gt;\":String\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1022, "user_id": 8088139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c57f53526db57b9982402c7f4a353f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Gorman", "link": "https://stackoverflow.com/users/8088139/michael-gorman"}, "edited": false, "score": 0, "creation_date": 1498590114, "post_id": 44787757, "comment_id": 76556581, "body": "do you iterate over @comments to show each comment?"}, {"owner": {"reputation": 2359, "user_id": 1657076, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5d17840daf7b606a6ab667321c62e132?s=128&d=identicon&r=PG&f=1", "display_name": "venkatKA", "link": "https://stackoverflow.com/users/1657076/venkatka"}, "edited": false, "score": 0, "creation_date": 1498590240, "post_id": 44787757, "comment_id": 76556645, "body": "I wonder how Goal.comments works in the first place"}, {"owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "reply_to_user": {"reputation": 1022, "user_id": 8088139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/12c57f53526db57b9982402c7f4a353f?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Gorman", "link": "https://stackoverflow.com/users/8088139/michael-gorman"}, "edited": false, "score": 0, "creation_date": 1498591603, "post_id": 44787757, "comment_id": 76557414, "body": "@Michael Gorman, yeah, the Goal view pulls in the partial with all the comments, which is basically the same as the notations partial."}, {"owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "edited": false, "score": 0, "creation_date": 1498592043, "post_id": 44787757, "comment_id": 76557679, "body": "I needed all the notations to show up on all the comments. Goals -&gt; many comments -&gt; many notations. The answer by max pleaner below solved the issue."}], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "edited": false, "score": 1, "creation_date": 1498607728, "post_id": 44788326, "comment_id": 76564091, "body": "@ddonche To improve performance you should use <code>Goal.comments.order(&quot;created_at DESC&quot;).includes(:notations)</code> ... this will &quot;preload&quot; the comments so you make 1 DB query for all of the comments&#39; notations, and not a separate query for each comment"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 1, "last_activity_date": 1498591595, "creation_date": 1498591595, "answer_id": 44788326, "question_id": 44787757, "link": "https://stackoverflow.com/questions/44787757/finding-comment-by-id-where-comment-variable-is-already-set-to-new/44788326#44788326", "title": "finding Comment by id where comment variable is already set to new", "body": "<p>The answer <a href=\"https://stackoverflow.com/a/22414038/2981429\">here</a> seems to be what you're looking for. There is a way to pass a <em>local</em> (not <em>instance</em>) variable to the partial. That way you can use <code>comment</code> and not worry about the collission with <code>@comment</code>.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>&lt;!-- on goal show page --&gt;\n&lt;% @comments.each do |comment| %&gt;\n  &lt;!-- show the comment content then show the partial --&gt;\n  &lt;%= render 'notations/notations', comment: comment %&gt;\n&lt;% end %&gt;\n\n&lt;!-- in partial, you now have access to comment --&gt;\n&lt;% notations = comment.notations %&gt;\n&lt;% notations.each do |notation %&gt;\n  &lt;!-- show the notation --&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 945, "user_id": 2374753, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/IOy7p.jpg?s=128&g=1", "display_name": "ddonche", "link": "https://stackoverflow.com/users/2374753/ddonche"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 44788326, "answer_count": 1, "score": 0, "last_activity_date": 1498591595, "creation_date": 1498589452, "question_id": 44787757, "link": "https://stackoverflow.com/questions/44787757/finding-comment-by-id-where-comment-variable-is-already-set-to-new", "title": "finding Comment by id where comment variable is already set to new", "body": "<p>I have three Models I'm working with. Goal, Comment, and Notation. Goals have many comments and comments have many notations (smaller comments, very much like the comments on the answers here). </p>\n\n<p>I'm trying to display the notations on each comment by appending it with</p>\n\n<pre><code>&lt;%= render 'notations/notations' %&gt;\n</code></pre>\n\n<p>This partial loops through each notation to display it:</p>\n\n<pre><code>&lt;% @notations.each do |notation| %&gt;\n   &lt;%= notation.content %&gt;&lt;br /&gt;\n   Posted &lt;%= time_ago_in_words(notation.created_at) %&gt; ago by \n   &lt;%= link_to notation.user.username, user_path(notation.user) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>My problem is that these notations appear on the comments, which appear on the Goal show page, where there is already a new comment form. Take a look.</p>\n\n<p>Goal controller:</p>\n\n<pre><code>  def show\n    @comments = Goal.comments.order(\"created_at DESC\")\n    @comment = Comment.new\n    @notations = @comment.notations\n  end\n</code></pre>\n\n<p>The <code>@notations = @comment.notations</code> doesn't work because I already have @comment reserved for the new one. I've also tried @notations = <code>Goal.comment.notations</code> but that gives a no method error for comment. My question is how can I get at the comments being displayed in order to show their notations as well?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1498587701, "post_id": 44787240, "comment_id": 76555282, "body": "&quot;I feel like the multiple WHERE database calls are too taxing on the server&quot;. This is intuition, which may or may not be correct. The only way to find out is to look closely at <code>log&#47;development.log</code> to see how your queries are performing. It&#39;s generally a good idea to keep <code>tail -f log&#47;development.log</code> open in a window <i>at all times</i> to get a feel for how efficient or ugly your code is as you load pages and develop features."}, {"owner": {"reputation": 2782, "user_id": 4458445, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-bIIZcxNxAuA/AAAAAAAAAAI/AAAAAAAAOGs/6SNi2yJnzKA/photo.jpg?sz=128", "display_name": "RToyo", "link": "https://stackoverflow.com/users/4458445/rtoyo"}, "edited": false, "score": 0, "creation_date": 1498588991, "post_id": 44787240, "comment_id": 76556004, "body": "Why not just query your table once, to get all the records for the current_user in the current month, and then iterate over the results?"}, {"owner": {"reputation": 61, "user_id": 7442869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/68860a551874421019300d7ee369327c?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Jones", "link": "https://stackoverflow.com/users/7442869/patrick-jones"}, "edited": false, "score": 0, "creation_date": 1498589964, "post_id": 44787240, "comment_id": 76556508, "body": "That&#39;s exactly what the @monthly_reservations variable contains, all the current_user&#39;s reservations for that month.  However, the WHEREs come in because I need to show all the beds that the hostel has, and then who, if anyone, is staying in said bed.  Tadman, I completely agree about the intuition part. Maybe it ISN&#39;T taxing the server, but when I look at the logs and see the never ending WHEREs every time the page loads, it worries me."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 1, "creation_date": 1498591605, "post_id": 44787240, "comment_id": 76557415, "body": "You ought to be able to run a single query that gets bed, date, and user, and construct a hash from that with a key of <code>[bed,date]</code> and value of <code>guest</code>. Then you can iterate through your beds and dates in whichever order make most sense to you, looking up any guest from the hash for each date/bed combination."}, {"owner": {"reputation": 61, "user_id": 7442869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/68860a551874421019300d7ee369327c?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Jones", "link": "https://stackoverflow.com/users/7442869/patrick-jones"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1498592047, "post_id": 44787240, "comment_id": 76557681, "body": "@DavidAldridge, I think that sounds like a great idea. I just needed some extra brainpower to help me think of other possible ways. My code works, but it&#39;s smelly."}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1498598751, "post_id": 44787240, "comment_id": 76561145, "body": "@PatrickJones Yes, that&#39;s the stuff."}, {"owner": {"reputation": 61, "user_id": 7442869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/68860a551874421019300d7ee369327c?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Jones", "link": "https://stackoverflow.com/users/7442869/patrick-jones"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1498602366, "post_id": 44787240, "comment_id": 76562625, "body": "@tadman, please see EDIT 3 above to see the logs.For that one page load, I&#39;m getting these results: <code>Completed 200 OK in 102ms (Views: 78.9ms | ActiveRecord: 9.0ms)</code>"}, {"owner": {"reputation": 61, "user_id": 7442869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/68860a551874421019300d7ee369327c?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Jones", "link": "https://stackoverflow.com/users/7442869/patrick-jones"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1498602955, "post_id": 44787240, "comment_id": 76562797, "body": "@DavidAldridge, please create an answer. I&#39;d like to upvote it. Your suggestion shaved off 6ms and removed ALL the WHERE queries."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1498603825, "creation_date": 1498603825, "answer_id": 44791139, "question_id": 44787240, "link": "https://stackoverflow.com/questions/44787240/faster-database-where-for-rails-availability-calendar/44791139#44791139", "title": "Faster Database WHERE for Rails Availability Calendar", "body": "<p>What Robbie is describing is capturing the data in bulk to present it in a second pass. You can do this:</p>\n\n<pre><code>@reservations = Reservations.where(bed_id: [ ... ], date: (from..to)).group_by do |r|\n  [r.bed_id, r.date]\nend\n</code></pre>\n\n<p>Where this returns a singular structure that should contain all the reservations in a way that can be easily indexed using both <code>bed_id</code> and a date. You can turn this into a two-tier structure if necessary, but it's usually not.</p>\n\n<p>When iterating:</p>\n\n<pre><code>- current_user.beds.each do |bed|\n  - reservation = @reservations[[bed.id,date]]\n  - if reservation\n    # ...\n</code></pre>\n\n<p>This practice of selectively, but aggressively eager-loading records usually works quite well when you're dealing with complex inter-dependencies that can't be easily expressed with an <code>includes(..)</code> element in your loading chain.</p>\n\n<p>Also, remember in Ruby there's only two things that are logically false: literal <code>false</code> and <code>nil</code>. Everything else evaluates as logically true, including 0, empty strings, arrays and hashes. As such comparisons <code>!= nil</code> are almost always extraneous and confusing, especially if you do double-negation like <code>unless (x != nil)</code>.</p>\n\n<p>If you're looking to be able to resolve a number of arbitrary date+bed pairs against the database you could make some kind of booking key that was a combination of date and bed_id then it'd be a lot easier to scan for these. You could do a <code>WHERE booking_token IN (...)</code> and have it all indexed, performant, and concise. It takes some advance planning though to do it properly. <code>YYYY-MM-DD-bed_id</code> could work as a first pass.</p>\n"}, {"comments": [{"owner": {"reputation": 61, "user_id": 7442869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/68860a551874421019300d7ee369327c?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Jones", "link": "https://stackoverflow.com/users/7442869/patrick-jones"}, "edited": false, "score": 0, "creation_date": 1498666929, "post_id": 44796484, "comment_id": 76595842, "body": "Thanks @DavidAldridge. Is this simply a refactor, or is there some type of performance enhancement I&#39;m missing? I&#39;ll admit, my base Ruby knowledge isn&#39;t too high. Looks like I might need to open up POODR again! :)"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "reply_to_user": {"reputation": 61, "user_id": 7442869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/68860a551874421019300d7ee369327c?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Jones", "link": "https://stackoverflow.com/users/7442869/patrick-jones"}, "edited": false, "score": 0, "creation_date": 1498668694, "post_id": 44796484, "comment_id": 76596930, "body": "@PatrickJones POODR FTW! It&#39;s a refactor to remove redundancy."}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 0, "last_activity_date": 1498635940, "creation_date": 1498635940, "answer_id": 44796484, "question_id": 44787240, "link": "https://stackoverflow.com/questions/44787240/faster-database-where-for-rails-availability-calendar/44796484#44796484", "title": "Faster Database WHERE for Rails Availability Calendar", "body": "<p>For your view code, I would try: </p>\n\n<pre><code>= week_calendar events: @monthly_reservations, attribute: :date do |date, appts|\n  - current_user.beds.each do |bed|\n    %p{style: \"border: 1px solid black; padding: 5px; font-size: 10px;\"}\n      = [bed.name, @reservations[[date, bed.id]]].compact.join(\":\")\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 7442869, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/68860a551874421019300d7ee369327c?s=128&d=identicon&r=PG&f=1", "display_name": "Patrick Jones", "link": "https://stackoverflow.com/users/7442869/patrick-jones"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 91, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498635940, "creation_date": 1498587465, "last_edit_date": 1498603201, "question_id": 44787240, "link": "https://stackoverflow.com/questions/44787240/faster-database-where-for-rails-availability-calendar", "title": "Faster Database WHERE for Rails Availability Calendar", "body": "<p>I'm building a Ruby on Rails hostel bed reservation system and I'm looking for a better way to load my availability calendar. The below code works great for showing bed availability (see attached image), but I feel like the multiple WHERE database calls are too taxing on the server and there must be a quicker way to process the data.</p>\n\n<p><strong>Models:</strong></p>\n\n<p>user.rb</p>\n\n<p>bed.rb (user_id, name)</p>\n\n<p>guest.rb (user_id, name, phone, address, email)</p>\n\n<p>reservation.rb (user_id, bed_id, guest_id, date)</p>\n\n<p>Users are hostel owners. They create as many beds as their business has and give them a name (Bed #1, Bed #2, Twin-Attic, Master-2nd Floor, etc).</p>\n\n<p>Each user has many guests, these are people sleeping at their hostel on a specific date.</p>\n\n<p>Using the simple_calendar gem, I get all reservations for the current month and process them to show a weekly view.</p>\n\n<p><strong>Sorting logic:</strong></p>\n\n<p><strong>Step 1.</strong> Iterate through current_user's beds for the first day of the week.(simple_calendar supplies each day's reservations)</p>\n\n<p><strong>Step 2.</strong> If the bed has a reservation for that day(!= nil), put bed name and the name of the guest for that reservation.</p>\n\n<p><strong>Step 3.</strong> If the bed doesn't have a reservation, put bed name and 'Empty.'</p>\n\n<p><strong>Step 4.</strong> After completing the first day of week, move to next day and repeat.(simple_calendar takes care of this)</p>\n\n<p>As I said, the code below works, but when a user has 50 beds, it makes 50 WHERE calls for each day, so 350 for a 7-day calendar (and more if it needs to find the guest's name).</p>\n\n<p>Please let me know if you need any more information or explanations. Thanks!</p>\n\n<pre><code>= week_calendar events: @monthly_reservations, attribute: :date do |date, appts|\n  - current_user.beds.each do |bed|\n    - if bed.reservations.where(date: date).first != nil\n      - guest_name = bed.reservations.where(date: date).first.guest.abbreviated_name\n        %p{style: \"border: 1px solid black; padding: 5px; font-size: 10px;\"}\n          = \"#{bed.name}: #{guest_name}\"\n    - else\n      %p{style: \"border: 1px solid black; padding: 5px; font-size: 10px;\"}\n        = \"#{bed.name}: Empty\"\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/TGFeZ.png\" rel=\"nofollow noreferrer\">CURRENT Rails hostel bed reservation system</a></p>\n\n<p><strong>EDIT:</strong>\nThe ideal calendar layout would look like the image below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/uGP7F.png\" rel=\"nofollow noreferrer\">IDEAL Rails bed reservation system</a></p>\n\n<p>However, the problem is making the bed name line up with the correct bed reservation. If May 2 has only 2 reservations, Bed 1 and Bed 4, the code doesn't know to leave two EMPTYS before inserting Bed 4's appointment last. Make sense?</p>\n\n<p><strong>EDIT #2:</strong></p>\n\n<p>@DavidAldridge, something like this: </p>\n\n<p>Something like this? </p>\n\n<p><code>reservs = {\"[2017-05-01, bed_1]\" =&gt; \"guest_23\", \"[2017-05-01, bed_2]\" =&gt; \"empty\"}</code></p>\n\n<p><strong>EDIT 3</strong>\nHere is what the logs look like when loading a hostel with just 5 beds.</p>\n\n<pre><code>Bed Load (0.3ms)  SELECT \"beds\".* FROM \"beds\" WHERE \"beds\".\"user_id\" = $1  [[\"user_id\", 1]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 1], [\"date\", \"2017-07-02\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 2], [\"date\", \"2017-07-02\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 3], [\"date\", \"2017-07-02\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 4], [\"date\", \"2017-07-02\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 5], [\"date\", \"2017-07-02\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 1], [\"date\", \"2017-07-03\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 2], [\"date\", \"2017-07-03\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 3], [\"date\", \"2017-07-03\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 4], [\"date\", \"2017-07-03\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 5], [\"date\", \"2017-07-03\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 1], [\"date\", \"2017-07-04\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 2], [\"date\", \"2017-07-04\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 3], [\"date\", \"2017-07-04\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 4], [\"date\", \"2017-07-04\"]]\n  Reservations Load (0.1ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 5], [\"date\", \"2017-07-04\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 1], [\"date\", \"2017-07-05\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 2], [\"date\", \"2017-07-05\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 3], [\"date\", \"2017-07-05\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 4], [\"date\", \"2017-07-05\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 5], [\"date\", \"2017-07-05\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 1], [\"date\", \"2017-07-06\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 2], [\"date\", \"2017-07-06\"]]\n  Reservations Load (0.1ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 3], [\"date\", \"2017-07-06\"]]\n  Reservations Load (0.1ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 4], [\"date\", \"2017-07-06\"]]\n  Reservations Load (0.3ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 5], [\"date\", \"2017-07-06\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 1], [\"date\", \"2017-07-07\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 2], [\"date\", \"2017-07-07\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 3], [\"date\", \"2017-07-07\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 4], [\"date\", \"2017-07-07\"]]\n  Reservations Load (0.1ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 5], [\"date\", \"2017-07-07\"]]\n  Reservations Load (0.2ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 1], [\"date\", \"2017-07-08\"]]\n  Reservations Load (0.6ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 2], [\"date\", \"2017-07-08\"]]\n  Reservations Load (0.3ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 3], [\"date\", \"2017-07-08\"]]\n  Reservations Load (0.3ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 4], [\"date\", \"2017-07-08\"]]\n  Reservations Load (0.3ms)  SELECT  \"reservations\".* FROM \"reservations\" WHERE \"reservations\".\"bed_id\" = $1 AND \"reservations\".\"date\" = $2  ORDER BY \"reservations\".\"id\" ASC LIMIT 1  [[\"bed_id\", 5], [\"date\", \"2017-07-08\"]]\n</code></pre>\n\n<p><strong>EDIT 4</strong>\nFollowing @DavidAldridge suggestion, I created a hash in the controller and passed it into my view. The results are STELLAR!</p>\n\n<p>Controller code:</p>\n\n<pre><code>@reservations = {}\n\n@monthly_reservations.each do |x|\n  @reservations[[x.date,x.bed_id]] = x.guest.try(:name)  \nend\n</code></pre>\n\n<p>And the view code:</p>\n\n<pre><code>= week_calendar events: @monthly_reservations, attribute: :date do |date, appts|\n  - current_user.beds.each do |bed|\n    - if @reservations[[date, bed.id]] != nil\n      %p{style: \"border: 1px solid black; padding: 5px; font-size: 10px;\"}\n        = \"#{bed.name}: #{@reservations[[date, kennel.id]]}\"\n    - else\n      %p{style: \"border: 1px solid black; padding: 5px; font-size: 10px;\"}\n        = \"#{bed.name}:\"\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 7, "creation_date": 1498588114, "post_id": 44787329, "comment_id": 76555513, "body": "If you want the first match, use <code>find { ... }</code> instead of <code>select { ... }[0]</code>"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 9, "last_activity_date": 1506029989, "last_edit_date": 1506029989, "creation_date": 1498587808, "answer_id": 44787329, "question_id": 44787236, "link": "https://stackoverflow.com/questions/44787236/how-do-i-find-the-first-two-consecutive-elements-in-my-array-of-numbers/44787329#44787329", "title": "How do I find the first two consecutive elements in my array of numbers?", "body": "<p>You could use <code>each_cons</code> and <code>find</code> to get the first element from the array of pairs where the second element less the first one is equal to 1:</p>\n\n<pre><code>p [1, 7, 8, 12, 14, 15].each_cons(2).find { |a, b| b - a == 1 }\n# =&gt; [7, 8]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1498592620, "last_edit_date": 1592644375, "creation_date": 1498587826, "answer_id": 44787334, "question_id": 44787236, "link": "https://stackoverflow.com/questions/44787236/how-do-i-find-the-first-two-consecutive-elements-in-my-array-of-numbers/44787334#44787334", "title": "How do I find the first two consecutive elements in my array of numbers?", "body": "<p>One way to do this:</p>\n<pre><code>a.each_with_index { |e, i| break [ e, a[i.next] ] if a[i.next] == e.next } \n#=&gt; [7, 8]\n</code></pre>\n<p>Unlike <code>chunk</code> or <code>each_cons</code> this doesn't create an array of arrays. It also breaks as soon as a pair is found.</p>\n<hr />\n<h3>Benchmarks</h3>\n<pre><code>require 'fruity'\n\narr = ((1...1000)).to_a.reverse + [1,2]\n\ndef first_adjacent_pair(arr)\n  idx = arr.each_index.drop(1).find { |i| (arr[i-1]-arr[i]).abs == 1 }\n  idx ? arr[idx-1, 2] : nil\nend\n\ndef first_adjacent_pair2(arr)\n  enum = arr.to_enum\n  loop do\n    curr = enum.next\n    nxt = enum.peek\n    return [curr, nxt] if (curr-nxt).abs == 1\n  end\n  nil\nend\n\ncompare do\n  ice\u30c4  { ar = arr.dup; ar.each_with_index { |e, i| break [ e, ar[i.next] ] if ar[i.next] == e.next }  }\n  cary   { ar = arr.dup; first_adjacent_pair(ar) }\n  cary2  { ar = arr.dup; first_adjacent_pair2(ar) }  \n  seb    { ar = arr.dup; ar.each_cons(2).find{|a,b| b-a == 1} }\nend\n\n#Running each test 64 times. Test will take about 1 second.\n#cary2 is faster than cary by 3x \u00b1 0.1\n#cary is faster than ice\u30c4 by 3x \u00b1 0.1 (results differ: [999, 998] vs [1, 2])\n#ice\u30c4 is faster than seb by 30.000000000000004% \u00b1 10.0%\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498588529, "post_id": 44787473, "comment_id": 76555719, "body": "Could be simpler, though."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498588641, "post_id": 44787473, "comment_id": 76555786, "body": "JFYI, it&#39;s very un-rubyish to name your variables in Pascal case."}], "tags": [], "owner": {"reputation": 51, "user_id": 4932524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/706c3f46c9c06921b01c58d83f15510d?s=128&d=identicon&r=PG&f=1", "display_name": "Ciaran Davies", "link": "https://stackoverflow.com/users/4932524/ciaran-davies"}, "is_accepted": false, "score": 1, "last_activity_date": 1498588325, "creation_date": 1498588325, "answer_id": 44787473, "question_id": 44787236, "link": "https://stackoverflow.com/questions/44787236/how-do-i-find-the-first-two-consecutive-elements-in-my-array-of-numbers/44787473#44787473", "title": "How do I find the first two consecutive elements in my array of numbers?", "body": "<p>Simple example</p>\n\n<pre><code>   X = [1, 7, 8, 12, 14, 15]\n\n   X.each_with_index do |item, index|\n    if index &lt; X.count - 1\n     if (X[index+1]-X[index] == 1) \n      puts item\n     end\n   end\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1498591842, "post_id": 44788219, "comment_id": 76557549, "body": "Also <code>arr[idx-1, 2]</code> could be more concise for slicing out the answer here."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1498591992, "post_id": 44788219, "comment_id": 76557644, "body": "Another note is that <code>idx</code> will either be a value from the array or <code>nil</code>, so <code>idx &amp;&amp; arr[idx-1,2]</code> is another option. It side-steps a ternary, but might be equally confusing. Tough call."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1498592887, "post_id": 44788219, "comment_id": 76558133, "body": "@tadman, yes, I considered that (as well as what would now be <code>arr[idx-1,2] unless idx.nil?</code>), but thought the ternary would be clearer."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1498602140, "post_id": 44788219, "comment_id": 76562555, "body": "Note that in #1, you already have the answer in the loop, i.e. <code>arr[i-1]</code> and <code>arr[i]</code>. Returning <code>i</code> in order to fetch the same values via <code>arr[i-1, 2]</code> seems redundant."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1498872305, "last_edit_date": 1498872305, "creation_date": 1498591209, "answer_id": 44788219, "question_id": 44787236, "link": "https://stackoverflow.com/questions/44787236/how-do-i-find-the-first-two-consecutive-elements-in-my-array-of-numbers/44788219#44788219", "title": "How do I find the first two consecutive elements in my array of numbers?", "body": "<p>Here are three more ways.</p>\n\n<p><strong>#1</strong></p>\n\n<pre><code>def first_adjacent_pair(arr)\n  (arr.size-2).times { |i| return arr[i, 2] if arr[i+1] == arr[i].next }\n  nil\nend\n\nfirst_adjacent_pair [1, 7, 8, 12, 14, 15] #=&gt; [7,8]\nfirst_adjacent_pair [1, 7, 5, 12, 14, 16] #=&gt; nil\n</code></pre>\n\n<p><strong>#2</strong></p>\n\n<pre><code>def first_adjacent_pair(arr)\n  enum = arr.to_enum # or arr.each\n  loop do\n    curr = enum.next\n    nxt = enum.peek\n    return [curr, nxt] if nxt == curr.next\n  end\n  nil\nend\n</code></pre>\n\n<p><code>enum.peek</code> raises a <code>StopIteration</code> exception when the enumerator <code>enum</code> has generated its last element with the preceding <code>enum.next</code>. The exception is handled by <a href=\"http://ruby-doc.org/core-2.4.0/Kernel.html#method-i-loop\" rel=\"nofollow noreferrer\">Kernel#loop</a> by breaking out of the loop, after which <code>nil</code> is returned. See also <a href=\"http://ruby-doc.org/core-2.4.1/Object.html#method-i-to_enum\" rel=\"nofollow noreferrer\">Object#to_enum</a>, <a href=\"http://ruby-doc.org/core-2.4.0/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\">Enumerator#next</a> and <a href=\"http://ruby-doc.org/core-2.4.0/Enumerator.html#method-i-peek\" rel=\"nofollow noreferrer\">Enumerator#peek</a>.</p>\n\n<p><strong>#3</strong></p>\n\n<pre><code>def first_adjacent_pair(arr)\n  a = [nil, arr.first] \n  arr.each do |n|\n    a.rotate!\n    a[1] = n\n    return a if a[1] == a[0] + 1\n  end\n  nil\nend\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-rotate-21\" rel=\"nofollow noreferrer\">Array#rotate!</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1498593060, "creation_date": 1498593060, "answer_id": 44788732, "question_id": 44787236, "link": "https://stackoverflow.com/questions/44787236/how-do-i-find-the-first-two-consecutive-elements-in-my-array-of-numbers/44788732#44788732", "title": "How do I find the first two consecutive elements in my array of numbers?", "body": "<p>Here's an alternate method provided for educational purposes:</p>\n\n<pre><code>arr = [1, 7, 8, 12, 14, 15]\n\narr.each_cons(2).map {|v|v.reduce(:-)}.index(-1)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 0, "accepted_answer_id": 44787329, "answer_count": 5, "score": 1, "last_activity_date": 1506029989, "creation_date": 1498587449, "question_id": 44787236, "link": "https://stackoverflow.com/questions/44787236/how-do-i-find-the-first-two-consecutive-elements-in-my-array-of-numbers", "title": "How do I find the first two consecutive elements in my array of numbers?", "body": "<p>Using Ruby 2.4, I have an array of unique, ordered numbers, for example</p>\n\n<pre><code>[1, 7, 8, 12, 14, 15]\n</code></pre>\n\n<p>How do I find the first two elements whose difference is 1?  For example, the above array the answer to that is \"7\" and \"8\".  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spree", "solidus"], "comments": [{"owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1498584779, "post_id": 44786214, "comment_id": 76553748, "body": "run bundle install first, then try run bundle exec rails server"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8116786"}, "reply_to_user": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1498584994, "post_id": 44786214, "comment_id": 76553863, "body": "@widjajayd   bundle install don&#39;t go through and this error pops"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8116786"}, "reply_to_user": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "edited": false, "score": 0, "creation_date": 1498585339, "post_id": 44786214, "comment_id": 76554046, "body": "@widjajayd how this can fix the problem ?"}], "answers": [{"tags": [], "owner": {"reputation": 2545, "user_id": 1783642, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc69b60352cb9a411cb033b26bd8136e?s=128&d=identicon&r=PG", "display_name": "Puhlze", "link": "https://stackoverflow.com/users/1783642/puhlze"}, "is_accepted": false, "score": 4, "last_activity_date": 1498585903, "creation_date": 1498585903, "answer_id": 44786802, "question_id": 44786214, "link": "https://stackoverflow.com/questions/44786214/how-to-fix-could-not-find-compatible-version-for-gem-rails/44786802#44786802", "title": "How to fix &#39;could not find compatible version for gem &quot;rails&quot;&#39;?", "body": "<p>Bundler is doing you a favor here by showing you that you have incompatible version requirements for the rails gem.</p>\n\n<p>You have <code>rails (~&gt; 5.1.2)</code> listed in your gemfile and the solidus gem has a dependency on <code>rails (~&gt; 4.2.0)</code>, so there is a conflict about which version of rails your app should use.</p>\n\n<p>Is there a reason you are using solidus version 1.0.0? It looks like the latest version of solidus is 2.0.2 at present. Later versions of solidus will have a more recent dependency listed for rails, which will allow your application to use rails 5+.</p>\n\n<p>Update the version of solidus in your gemfile to something more recent and see if that allows bundler to install successfully.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8116786"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3956, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1498585903, "creation_date": 1498583694, "last_edit_date": 1498584553, "question_id": 44786214, "link": "https://stackoverflow.com/questions/44786214/how-to-fix-could-not-find-compatible-version-for-gem-rails", "title": "How to fix &#39;could not find compatible version for gem &quot;rails&quot;&#39;?", "body": "<p>Im literaly bumping my head into a wall and I can not find a solution by myself about this problem.</p>\n\n<p>I'm starting a project with Solidus , a Spree commerce fork. I played around with the gem for a litle while and now that I am ready to get serious and start to develop , I create a new project ad I'm bumping into this nasty error : </p>\n\n<pre><code>Bundler could not find compatible versions for gem \"rails\":\n  In snapshot (Gemfile.lock):\n    rails (= 5.1.2)\n\n  In Gemfile:\n    rails (~&gt; 5.1.2)\n\n    solidus was resolved to 1.0.0, which depends on\n      solidus_core (= 1.0.0) was resolved to 1.0.0, which depends on\n        rails (~&gt; 4.2.0)\n\nRunning `bundle update` will rebuild your snapshot from scratch, using only\nthe gems in your Gemfile, which may resolve the conflict.\n</code></pre>\n\n<p>and <code>bundle update</code> is not solving my problem... I am running out of solution and will appreciate some hands in help in how to fix this problem.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-console"], "answers": [{"comments": [{"owner": {"reputation": 575, "user_id": 1558075, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ffa1f9fdcc9f3d9b0819c2487e1fdd02?s=128&d=identicon&r=PG", "display_name": "DeeWBee", "link": "https://stackoverflow.com/users/1558075/deewbee"}, "edited": false, "score": 0, "creation_date": 1498584914, "post_id": 44786124, "comment_id": 76553827, "body": "if my rails version is 3.2.21, will this still work?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 575, "user_id": 1558075, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ffa1f9fdcc9f3d9b0819c2487e1fdd02?s=128&d=identicon&r=PG", "display_name": "DeeWBee", "link": "https://stackoverflow.com/users/1558075/deewbee"}, "edited": false, "score": 1, "creation_date": 1498587865, "post_id": 44786124, "comment_id": 76555373, "body": "@DeeWBee: I don&#39;t know, try it."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1498583398, "creation_date": 1498583398, "answer_id": 44786124, "question_id": 44786062, "link": "https://stackoverflow.com/questions/44786062/ruby-on-rails-console-collection-where-returning-argumenterror-with-multipl/44786124#44786124", "title": "Ruby on Rails (Console): Collection.where() returning ArgumentError with multiple conditions", "body": "<p>Should be more like this, I think:</p>\n\n<pre><code>GameSlot.where([\"s = :s and st &gt;= :start_date and et &lt;= :end_date\", \n                s: 5, \n                start_date: '2016-01-01', \n                end_date: '2017-01-01'])\n</code></pre>\n\n<p>Note that <code>where</code> here only has one argument, an array.</p>\n\n<p>Documentation on <a href=\"https://apidock.com/rails/ActiveRecord/QueryMethods/where\" rel=\"nofollow noreferrer\">QueryMethods#where</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498583576, "post_id": 44786139, "comment_id": 76553107, "body": "should be an array, I think."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498584674, "post_id": 44786139, "comment_id": 76553696, "body": "@SergioTulentsev I read the link you posted and it seems so, but i&#39;ve always done it this way and works fine. I also double-checked the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#array-conditions\" rel=\"nofollow noreferrer\">rails guides</a>."}, {"owner": {"reputation": 575, "user_id": 1558075, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ffa1f9fdcc9f3d9b0819c2487e1fdd02?s=128&d=identicon&r=PG", "display_name": "DeeWBee", "link": "https://stackoverflow.com/users/1558075/deewbee"}, "edited": false, "score": 0, "creation_date": 1498584934, "post_id": 44786139, "comment_id": 76553836, "body": "if my rails version is 3.2.21, will this still work?"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 575, "user_id": 1558075, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ffa1f9fdcc9f3d9b0819c2487e1fdd02?s=128&d=identicon&r=PG", "display_name": "DeeWBee", "link": "https://stackoverflow.com/users/1558075/deewbee"}, "edited": false, "score": 0, "creation_date": 1498585018, "post_id": 44786139, "comment_id": 76553877, "body": "@DeeWBee Yes, it should. Check <a href=\"http://guides.rubyonrails.org/v3.2.0/active_record_querying.html#array-conditions\" rel=\"nofollow noreferrer\">here</a> for the guides rails 3.2."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 2, "last_activity_date": 1498583428, "creation_date": 1498583428, "answer_id": 44786139, "question_id": 44786062, "link": "https://stackoverflow.com/questions/44786062/ruby-on-rails-console-collection-where-returning-argumenterror-with-multipl/44786139#44786139", "title": "Ruby on Rails (Console): Collection.where() returning ArgumentError with multiple conditions", "body": "<p>I guess you are looking for something like this:</p>\n\n<pre><code>GameSlot.where(\"s = ? and st &gt;= ? and et &lt;= ?\", 5, '2016-01-01', '2017-01-01')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 575, "user_id": 1558075, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ffa1f9fdcc9f3d9b0819c2487e1fdd02?s=128&d=identicon&r=PG", "display_name": "DeeWBee", "link": "https://stackoverflow.com/users/1558075/deewbee"}, "edited": false, "score": 0, "creation_date": 1498584940, "post_id": 44786420, "comment_id": 76553843, "body": "if my rails version is 3.2.21, will this still work?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 575, "user_id": 1558075, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ffa1f9fdcc9f3d9b0819c2487e1fdd02?s=128&d=identicon&r=PG", "display_name": "DeeWBee", "link": "https://stackoverflow.com/users/1558075/deewbee"}, "edited": false, "score": 0, "creation_date": 1498585187, "post_id": 44786420, "comment_id": 76553961, "body": "Yep. There&#39;s nothing new or fancy going on here. The <code>class &lt; self</code> bit just declares class methods. And the where clauses are just like @gerry&#39;s except separated out into the class methods."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1498587965, "post_id": 44786420, "comment_id": 76555429, "body": "Should be <code>class &lt;&lt; self</code>, I think."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1498588785, "post_id": 44786420, "comment_id": 76555879, "body": "&quot;if you like that sort of thing&quot; - tell me, do you honestly prefer <i>that</i> to scopes? I find it hard to believe :)"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1498589067, "post_id": 44786420, "comment_id": 76556049, "body": "Honestly, yes. And it doesn&#39;t strike me <i>so</i> strange. According to the <a href=\"http://guides.rubyonrails.org/active_record_querying.html#passing-in-arguments\" rel=\"nofollow noreferrer\">docs</a>, &quot;Using a class method is the preferred way to accept arguments for scopes.&quot; And, stabby lambdas give me the heebie-jeebies. Although now that I&#39;m doing more coffeescript, I&#39;m getting over my irrational fear of them."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498589326, "post_id": 44786420, "comment_id": 76556194, "body": "@jvillian: dunno, man. To each his own, I guess, but look <a href=\"https://monosnap.com/file/oQ8KlcHn9hYjwnh73jOYk23aZ9XLZv.png\" rel=\"nofollow noreferrer\">how neat the scopes can be</a>. And they are natural one-liners! (what can&#39;t be said about the methods in your answer, sadly) :)"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498589715, "post_id": 44786420, "comment_id": 76556382, "body": "@SergioTulentsev: Yep, to each his own! BTW and FWIW, except for the fact that I do the <code>class &lt;&lt; self</code> wrapper, mine are one-liners, too - no?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498590532, "post_id": 44786420, "comment_id": 76556812, "body": "@jvillian: <i>technically</i>, they are on one line, yes, but would you agree that this is not very common style? (that is, I assert that normally ruby methods take at least 3 lines, def / body / end. Hence the natural vs unnatural one-liners :) )"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498590692, "post_id": 44786420, "comment_id": 76556907, "body": "@SergioTulentsev: I suspect that you have seen <i>much</i> more code than I have. And so, I would tend to defer to your opinion on what is more or less common style."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498590816, "post_id": 44786420, "comment_id": 76556988, "body": "@jvillian: ah, <a href=\"https://github.com/bbatsov/ruby-style-guide#no-single-line-methods\" rel=\"nofollow noreferrer\">ruby style guide</a> backs me up: &quot;avoid single-line methods&quot; :)"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1498591187, "post_id": 44786420, "comment_id": 76557183, "body": "@SergioTulentsev: Trust me, I am confident this is least of my sins."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1498591275, "post_id": 44786420, "comment_id": 76557240, "body": "@jvillian: haha. Cheers, mate."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1498588053, "last_edit_date": 1498588053, "creation_date": 1498584502, "answer_id": 44786420, "question_id": 44786062, "link": "https://stackoverflow.com/questions/44786062/ruby-on-rails-console-collection-where-returning-argumenterror-with-multipl/44786420#44786420", "title": "Ruby on Rails (Console): Collection.where() returning ArgumentError with multiple conditions", "body": "<p>As an alternative approach, you could consider class methods (or scopes, if you like that sort of thing). Something like: </p>\n\n<pre><code>class GameSlot &lt; ActiveRecord::Base\n\n  class &lt;&lt; self\n\n    def s(val)                        where(s: val)             end\n    def starting_on_or_after(date)    where('st &gt;= ?', date)    end\n    def ending_on_or_before(date)     where('et &lt;= ?', date)    end\n\n  end\n\nend\n</code></pre>\n\n<p>Then you could do something like:</p>\n\n<pre><code>GameSlot.s(5).starting_on_or_after('2016-01-01').ending_on_or_before('2017-01-01')\n</code></pre>\n\n<p>That way, you leave the query logic inside the <code>GameSlot</code> model which seems a little better encapsulated (to me).</p>\n\n<p>Something to chew on.</p>\n"}], "owner": {"reputation": 575, "user_id": 1558075, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ffa1f9fdcc9f3d9b0819c2487e1fdd02?s=128&d=identicon&r=PG", "display_name": "DeeWBee", "link": "https://stackoverflow.com/users/1558075/deewbee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1498588053, "creation_date": 1498583185, "last_edit_date": 1498583365, "question_id": 44786062, "link": "https://stackoverflow.com/questions/44786062/ruby-on-rails-console-collection-where-returning-argumenterror-with-multipl", "title": "Ruby on Rails (Console): Collection.where() returning ArgumentError with multiple conditions", "body": "<p>I have a database where I am trying to find data within a certain range and meeting certain criteria. I am using the following command:</p>\n\n<pre><code>GameSlot.where(\"s = ? and st &gt;= :start_date and et &lt;= :end_date\", 5, {start_date: '2016-01-01', end_date: '2017-01-01'})\n</code></pre>\n\n<p>When I execute, I get back:</p>\n\n<blockquote>\n  <p>ArgumentError: wrong number of arguments (3 for 0..1)</p>\n</blockquote>\n\n<p>I am a novice to Ruby on Rails so any help is appreciated. </p>\n\n<p>EDIT: The datatypes for \"s\" is integer, \"st\" and \"et\" are time, but I am only interested in the date. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1498584926, "post_id": 44785651, "comment_id": 76553831, "body": "You should say whether you want to keep extra spaces between words that are to be kept. Suppose, for example, <code>str = &quot;I_am_very____grouchy_today&quot;</code>, where spaces are represented by underscores (SO strips out extra spaces in comments). Do you want to return &quot;I_very_grouchy&quot; or &quot;I_very____grouchy&quot;"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1498621262, "post_id": 44785651, "comment_id": 76567003, "body": "You&#39;ve seen my question, but chose not to answer. Why?"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 8221764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5e66064c958a9e2202cdafaac64ca?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8221764/tim"}, "edited": false, "score": 0, "creation_date": 1498595630, "post_id": 44785705, "comment_id": 76559513, "body": "Thank you for your solution ^_^"}], "tags": [], "owner": {"reputation": 2555, "user_id": 2908239, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/X1Vpw.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/2908239/sam"}, "is_accepted": false, "score": 2, "last_activity_date": 1498581862, "creation_date": 1498581862, "answer_id": 44785705, "question_id": 44785651, "link": "https://stackoverflow.com/questions/44785651/ruby-how-to-remove-all-words-which-have-a-specific-pattern-in-a-string/44785705#44785705", "title": "Ruby- How to remove all words which have a specific pattern in a string", "body": "<p>You can try splitting each word and removing the ones that have the letter 'a' and join the words together like this:</p>\n\n<pre><code>\"I am very happy today\".split.reject{ |word| word.include?(\"a\") }.join(\" \")\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1498582122, "post_id": 44785741, "comment_id": 76552286, "body": "I foresee that @mudasobwa appears and posts a clever regex solution with negative lookaheads, or something. :)"}, {"owner": {"reputation": 23, "user_id": 8221764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5e66064c958a9e2202cdafaac64ca?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8221764/tim"}, "edited": false, "score": 0, "creation_date": 1498584996, "post_id": 44785741, "comment_id": 76553864, "body": "U are so nice!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!&zwnj;&#8203;!!!!!!! Help me a lot!!!!!!!!!!"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 5, "last_activity_date": 1498582561, "last_edit_date": 1498582561, "creation_date": 1498581996, "answer_id": 44785741, "question_id": 44785651, "link": "https://stackoverflow.com/questions/44785651/ruby-how-to-remove-all-words-which-have-a-specific-pattern-in-a-string/44785741#44785741", "title": "Ruby- How to remove all words which have a specific pattern in a string", "body": "<p>Similar to @Sam's answer, only smaller :) Uses the little known <a href=\"https://ruby-doc.org/core-2.3.0/Enumerable.html#method-i-grep_v\" rel=\"nofollow noreferrer\">Enumerable#grep_v</a>.</p>\n\n<blockquote>\n  <p>Inverted version of #grep. Returns an array of every element in enum for which not Pattern === element.</p>\n</blockquote>\n\n<pre><code>\"I am very happy today\".split.grep_v(/a/).join(' ') # =&gt; \"I very\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 8221764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5e66064c958a9e2202cdafaac64ca?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8221764/tim"}, "edited": false, "score": 0, "creation_date": 1498595603, "post_id": 44787646, "comment_id": 76559495, "body": "Thank you so much for your reply ^_^"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1498589000, "creation_date": 1498589000, "answer_id": 44787646, "question_id": 44785651, "link": "https://stackoverflow.com/questions/44785651/ruby-how-to-remove-all-words-which-have-a-specific-pattern-in-a-string/44787646#44787646", "title": "Ruby- How to remove all words which have a specific pattern in a string", "body": "<p>Here's an example with a regex :</p>\n\n<ul>\n<li>word boundary</li>\n<li>alphanumeric characters</li>\n<li>a</li>\n<li>alphanumeric characters</li>\n<li>word boundary</li>\n</ul>\n\n<p>You need to remove the unneeded spaces then.</p>\n\n<pre><code>\"I am very happy today\".gsub(/\\b\\w*a\\w*\\b/i, '').strip.gsub(/\\s+/, ' ')\n</code></pre>\n\n<p>The answers with <code>split</code> and <code>join</code> are cleaner, though.</p>\n"}], "owner": {"reputation": 23, "user_id": 8221764, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09a5e66064c958a9e2202cdafaac64ca?s=128&d=identicon&r=PG&f=1", "display_name": "Tim", "link": "https://stackoverflow.com/users/8221764/tim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "accepted_answer_id": 44785741, "answer_count": 3, "score": 2, "last_activity_date": 1498595530, "creation_date": 1498581653, "last_edit_date": 1498595530, "question_id": 44785651, "link": "https://stackoverflow.com/questions/44785651/ruby-how-to-remove-all-words-which-have-a-specific-pattern-in-a-string", "title": "Ruby- How to remove all words which have a specific pattern in a string", "body": "<p>For example, the string is \"I am very happy today\". I want to remove all words containing the letter \"a\". So the output should be \"I very\". how can I do that?</p>\n"}, {"tags": ["android", "ruby", "cordova", "cucumber", "appium"], "comments": [{"owner": {"reputation": 983, "user_id": 6744397, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_RLenB3xeA/AAAAAAAAAAI/AAAAAAAAAoQ/3Bq9Qa_5yNQ/photo.jpg?sz=128", "display_name": "Anish Pillai", "link": "https://stackoverflow.com/users/6744397/anish-pillai"}, "edited": false, "score": 0, "creation_date": 1498609286, "post_id": 44785581, "comment_id": 76564423, "body": "Is there API 26 for Android 7.1? Would it be possible for you to try this on 7.1.1 (API 25)?"}, {"owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "reply_to_user": {"reputation": 983, "user_id": 6744397, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_RLenB3xeA/AAAAAAAAAAI/AAAAAAAAAoQ/3Bq9Qa_5yNQ/photo.jpg?sz=128", "display_name": "Anish Pillai", "link": "https://stackoverflow.com/users/6744397/anish-pillai"}, "edited": false, "score": 0, "creation_date": 1498642664, "post_id": 44785581, "comment_id": 76577716, "body": "@AnishPillai I have tried that but each release within Virtual Device Configuration has a fixed API. I have tried Release name O: API 26; but that is still having issues and people are still fixing these within the open source community. I am very short for time so I may just end up testing it manually. I came across this article though I think you may find it useful if you ever want automate a hybrid cordova app. <a href=\"http://elgris.github.io/blog/2_appium_vs_calabash/\" rel=\"nofollow noreferrer\">elgris.github.io/blog/2_appium_vs_calabash</a>. Do you have any other suggestions? if so please let me know."}, {"owner": {"reputation": 983, "user_id": 6744397, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-T_RLenB3xeA/AAAAAAAAAAI/AAAAAAAAAoQ/3Bq9Qa_5yNQ/photo.jpg?sz=128", "display_name": "Anish Pillai", "link": "https://stackoverflow.com/users/6744397/anish-pillai"}, "edited": false, "score": 0, "creation_date": 1498699424, "post_id": 44785581, "comment_id": 76610252, "body": "Hi Shafiq, I think API 26 is the Android O version which is still not out. And I don&#39;t think that Appium supports it as of now. So the only option is to try with API 25 or before, if you want to go for automation."}], "owner": {"reputation": 131, "user_id": 4537922, "user_type": "registered", "accept_rate": 54, "profile_image": "https://graph.facebook.com/10152973619451597/picture?type=large", "display_name": "Shafiq Ahmed Khan", "link": "https://stackoverflow.com/users/4537922/shafiq-ahmed-khan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 630, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1531776731, "creation_date": 1498581388, "question_id": 44785581, "link": "https://stackoverflow.com/questions/44785581/appium-freezes-when-finding-an-element-on-native-app-view", "title": "Appium freezes when finding an element on native app view", "body": "<p>I am trying to locate an element on an android hybrid app which has been built using Cordova. I have verified the context and it is the native app view.</p>\n\n<p>Currently using Appium v1.65, Android v7.1.1 API 26, ruby 2.2.0 and Cordova.</p>\n\n<p>When I try to locate <code>$driver.find_element(:xpath =&gt; \"//android.widget.FrameLayout\")</code> which is the highest element on the page. Appium server tries to search for the element. Appium spits out:</p>\n\n<pre><code>[AndroidBootstrap] Sending command to android: \n{\"cmd\":\"action\",\"action\":\"find\",\"params\":\n{\"strategy\":\"xpath\",\"selector\":\"//android.widget.FrameLayout\",\n\"context\":\"\",\"multiple\":false}}\n[AndroidBootstrap] [BOOTSTRAP LOG] [debug] Got data from client: \n{\"cmd\":\"action\",\"action\":\"find\",\"params\":\n{\"strategy\":\"xpath\",\"selector\":\"//android.widget.FrameLayout\",\n\"context\":\"\"\n,\"multiple\":false}}\n[AndroidBootstrap] [BOOTSTRAP LOG] [debug] Got command of type ACTION\n[AndroidBootstrap] [BOOTSTRAP LOG] [debug] Got command action: find\n[AndroidBootstrap] [BOOTSTRAP LOG] [debug] Finding \n'//android.widget.FrameLayout' using 'XPATH' with the contextId: '' \n multiple: false\n</code></pre>\n\n<p>Appium does not spit anything else out after this it stays silent. It feels like Appium cannot even see the page.</p>\n\n<p>Thus I have to hit <code>control + c</code>. Can somebody advise if they have faced this issue when trying to automate an hybrid android app built with Cordova?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498580490, "post_id": 44785209, "comment_id": 76551310, "body": "<i>&quot;I&#39;m displaying 3k users. [...] It takes a lot of time.&quot;</i> \u2013 coincidence? ;-)"}, {"owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498580563, "post_id": 44785209, "comment_id": 76551368, "body": "@Stefan without this helper it takes 7 second."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498580666, "post_id": 44785209, "comment_id": 76551435, "body": "Oh, I see, just one of the <code>link_to</code>&#39;s or all three?"}, {"owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498580999, "post_id": 44785209, "comment_id": 76551636, "body": "@Stefan with all three <code>link_to</code> it itakes 47 second, without all three 7 second. Why such difference?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498581093, "post_id": 44785209, "comment_id": 76551695, "body": "Render time in rails or in your browser?"}, {"owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498581227, "post_id": 44785209, "comment_id": 76551775, "body": "@Stefan load time page  in my browser"}], "answers": [{"comments": [{"owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "edited": false, "score": 0, "creation_date": 1498581830, "post_id": 44785647, "comment_id": 76552136, "body": "The client does not want used will_paginate"}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "reply_to_user": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "edited": false, "score": 1, "creation_date": 1498582027, "post_id": 44785647, "comment_id": 76552229, "body": "Have you tried using directly the html instead of the link_to helper? &lt;a data-confirm=&quot;Are you sure you want to delete #{user.name}?&quot; class=&quot;btn btn-danger btn-xs&quot; rel=&quot;nofollow&quot; data-method=&quot;delete&quot; href=&quot;/whatever/path/#{user.id}&quot;&gt;Delete&lt;/a&gt; ??? for all three link_to&#39;s ofc. And isn&#39;t this wrong: &quot;Are you sure you want to delete #{user}?&quot; shouldn&#39;t it be user.name or something?"}, {"owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "edited": false, "score": 0, "creation_date": 1498605260, "post_id": 44785647, "comment_id": 76563462, "body": "No, I have not tried it. I&#39;m going to try now. As for <code>User.name</code>, I have the to_s alias and the getter method in the model, so everything is fine."}, {"owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "edited": false, "score": 0, "creation_date": 1498646419, "post_id": 44785647, "comment_id": 76580206, "body": "Your advice has been helped. thank you very much. Please, update answer. I will mark as solve"}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "reply_to_user": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "edited": false, "score": 0, "creation_date": 1498649607, "post_id": 44785647, "comment_id": 76582267, "body": "@Andiskiy done and added screenshot of the ruby-prof output for link_to with path helper and &lt;a&gt; with dynamically created href string (no path_helper)"}], "tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": true, "score": 2, "last_activity_date": 1498649548, "last_edit_date": 1498649548, "creation_date": 1498581628, "answer_id": 44785647, "question_id": 44785209, "link": "https://stackoverflow.com/questions/44785209/slow-processing-when-render-helper-link-to/44785647#44785647", "title": "Slow processing when render helper link_to", "body": "<p>Rendering plain html instead of using the helper improves considerably the time needed to render.\nIt's not as much \"link_to\" that burdens the rendering but more of the path_helper. Although placing raw html in the view is quicker than any of both:</p>\n\n<pre><code>&lt;a href=\"the/path/the_helper/would/render/#{user.id}\" target=\"_blank\" class=\"whatever\"&gt;Edit&lt;/a&gt;\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>link_to path_helper\n</code></pre>\n\n<p>or even (since the helper is the biggest culprit)</p>\n\n<pre><code>&lt;a href=\"#{path_helper}\" target=\"_blank\"&gt;edit&lt;/a&gt;\n</code></pre>\n\n<p><a href=\"https://imgur.com/a/FX0TH\" rel=\"nofollow noreferrer\">check ruby-prof for the call trace - the only line that was changed was link_to to pure html with the id inserted dynamically into the href string</a></p>\n\n<p>I also tested the  tag with the href using the path helper, and though it's faster than link_to with the path helper, it's slower than  with href as a string. You can also see that I didn't call .html_safe on the concanated href, which should render it even faster in the  tag as well.</p>\n"}], "owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 44785647, "answer_count": 1, "score": 0, "last_activity_date": 1498649548, "creation_date": 1498580137, "question_id": 44785209, "link": "https://stackoverflow.com/questions/44785209/slow-processing-when-render-helper-link-to", "title": "Slow processing when render helper link_to", "body": "<p>I'm displaying 3k users. When render helper link_to process rendering slowing.  It takes a lot of time.</p>\n\n<p>it is my template </p>\n\n<pre><code>- @user.each do |user|\n      %tr\n        %td= link_to_user_modal user\n        %td.text-right\n          = link_to edit_user_path(user.id),\n                    class: 'btn btn-default btn-xs',\n                    title: 'Edit' do\n            %span.glyphicon.glyphicon-pencil\n\n          = link_to user,\n                  method: :delete,\n                  title:  'Delete',\n                  data:   { confirm: \"Are you sure you want to delete #{user}?\" },\n                  class:  \"btn btn-danger btn-xs\" do\n            %span.glyphicon.glyphicon-trash\n</code></pre>\n"}, {"tags": ["javascript", "css", "ruby-on-rails", "ruby", "dropzone.js"], "comments": [{"owner": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 0, "creation_date": 1498580548, "post_id": 44785167, "comment_id": 76551355, "body": "What does your current css look like?"}, {"owner": {"reputation": 367, "user_id": 1743452, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b24be693471aabcc9ca974b5912c9624?s=128&d=identicon&r=PG", "display_name": "Hirohito Yamada", "link": "https://stackoverflow.com/users/1743452/hirohito-yamada"}, "reply_to_user": {"reputation": 1723, "user_id": 4735914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d998392dbbbd8061d2ef13ea60955633?s=128&d=identicon&r=PG&f=1", "display_name": "jdgray", "link": "https://stackoverflow.com/users/4735914/jdgray"}, "edited": false, "score": 0, "creation_date": 1498580706, "post_id": 44785167, "comment_id": 76551465, "body": "I wrote css exactly same with what codepen had. (Except I changed the # to . since I had dropzone named under a class) @jdgray"}], "answers": [{"comments": [{"owner": {"reputation": 367, "user_id": 1743452, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b24be693471aabcc9ca974b5912c9624?s=128&d=identicon&r=PG", "display_name": "Hirohito Yamada", "link": "https://stackoverflow.com/users/1743452/hirohito-yamada"}, "edited": false, "score": 0, "creation_date": 1498581226, "post_id": 44785450, "comment_id": 76551774, "body": "Thanks! Actually what I want to achieve is add text that says&quot;drop files here&quot; to this rails code I wrote. So dropzone itself is already working."}, {"owner": {"reputation": 13585, "user_id": 693349, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b030858982f80cfd886667ec36074da4?s=128&d=identicon&r=PG", "display_name": "Matt Gibson", "link": "https://stackoverflow.com/users/693349/matt-gibson"}, "reply_to_user": {"reputation": 367, "user_id": 1743452, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b24be693471aabcc9ca974b5912c9624?s=128&d=identicon&r=PG", "display_name": "Hirohito Yamada", "link": "https://stackoverflow.com/users/1743452/hirohito-yamada"}, "edited": false, "score": 0, "creation_date": 1498581388, "post_id": 44785450, "comment_id": 76551882, "body": "Updated to show adding text via a block. I think that works."}], "tags": [], "owner": {"reputation": 13585, "user_id": 693349, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/b030858982f80cfd886667ec36074da4?s=128&d=identicon&r=PG", "display_name": "Matt Gibson", "link": "https://stackoverflow.com/users/693349/matt-gibson"}, "is_accepted": false, "score": 0, "last_activity_date": 1498581365, "last_edit_date": 1498581365, "creation_date": 1498580904, "answer_id": 44785450, "question_id": 44785167, "link": "https://stackoverflow.com/questions/44785167/how-can-i-add-text-to-dropzones-form-in-rails/44785450#44785450", "title": "How can I add text to dropzone&#39;s form in rails?", "body": "<p>Try this to get the class to show up in the HTML:</p>\n\n<pre><code>= file_field_tag \"work_images[]\", \n                 type: :file,\n                 multiple: true, \n                 accept: 'image/jpeg, image/jpg, image/png', \n                 input_html: { class: 'dropzone' } do \n  = \"Drop files here\"\n</code></pre>\n"}], "owner": {"reputation": 367, "user_id": 1743452, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/b24be693471aabcc9ca974b5912c9624?s=128&d=identicon&r=PG", "display_name": "Hirohito Yamada", "link": "https://stackoverflow.com/users/1743452/hirohito-yamada"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498613317, "creation_date": 1498580022, "last_edit_date": 1498613317, "question_id": 44785167, "link": "https://stackoverflow.com/questions/44785167/how-can-i-add-text-to-dropzones-form-in-rails", "title": "How can I add text to dropzone&#39;s form in rails?", "body": "<p>I'm currently trying to apply css I found in codepen <a href=\"https://codepen.io/beben-koben/pen/KCsfA\" rel=\"nofollow noreferrer\">link</a>\nto the following rails code</p>\n\n<p><code>= file_field_tag \"work_images[]\", type: :file, multiple: true, accept: 'image/jpeg, image/jpg, image/png', class: 'dropzone'</code></p>\n\n<p>I'm used to using something like this usually,</p>\n\n<pre><code>= link_to '&lt;div&gt;&lt;/div&gt;'.html_safe, work_image_path, class: ''\n</code></pre>\n\n<p>So I am having trouble adding description to the rails code...\nHow could I make this work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest", "webmock"], "comments": [{"owner": {"reputation": 11, "user_id": 8221615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jir8OPt98-M/AAAAAAAAAAI/AAAAAAAA_k0/TT1vhNnoqXU/photo.jpg?sz=128", "display_name": "Jason B", "link": "https://stackoverflow.com/users/8221615/jason-b"}, "edited": false, "score": 1, "creation_date": 1498580934, "post_id": 44785047, "comment_id": 76551601, "body": "Neeever mind. I figured it out, it wasn&#39;t with webmock. It was an issue where my route being tested calls yet another route and the way I was passing back the response needed to render the response.body, not the entire response. It worked functionally but in minitest failed. It was a good catch by minitest."}], "owner": {"reputation": 11, "user_id": 8221615, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-jir8OPt98-M/AAAAAAAAAAI/AAAAAAAA_k0/TT1vhNnoqXU/photo.jpg?sz=128", "display_name": "Jason B", "link": "https://stackoverflow.com/users/8221615/jason-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 212, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1498579590, "creation_date": 1498579590, "question_id": 44785047, "link": "https://stackoverflow.com/questions/44785047/response-body-is-even-though-webmock-to-returnbody-return-is-set", "title": "response.body is &quot;&quot; even though webmock .to_return(:body =&gt; &quot;return&quot;) is set", "body": "<p>I'm writing unit tests for a Rails service using minitest. A snippet of my test looks like this:</p>\n\n<pre><code>stub_request(:get, @service_url)\n        .with(:headers =&gt; @authheader)\n        .to_return(:body =&gt; \"ABC\", :status =&gt; 200)\nget :index\n</code></pre>\n\n<p>After the get :index, response.code is 200 as expected (and I've changed it to 201 in the .to_return and seen that code be correct after get :index, but every time response.body is \"\". I'm sure I'm just doing something unimaginably dumb here and welcome being told what a dummy I am. :)</p>\n\n<p>Thanks in advance</p>\n\n<p>minitest 5.8.2\nwebmock 3.0.1\nrails 4</p>\n"}, {"tags": ["ruby", "postgresql", "sequel"], "comments": [{"owner": {"reputation": 630, "user_id": 6286648, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_wPEijvhJKc/AAAAAAAAAAI/AAAAAAAAAIk/RMd9LIHJXk8/photo.jpg?sz=128", "display_name": "George", "link": "https://stackoverflow.com/users/6286648/george"}, "edited": false, "score": 0, "creation_date": 1498581473, "post_id": 44784259, "comment_id": 76551934, "body": "Are you refering to the postgres docs? Are you using rails? or are you trying to add a row through the psql console?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1498582457, "post_id": 44784259, "comment_id": 76552491, "body": "Did that work? Did you get an error? If so, what was the error?"}], "answers": [{"tags": [], "owner": {"reputation": 445, "user_id": 8018505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3b91738cee0a49bbbf95faf11cf9bc5a?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Coleman", "link": "https://stackoverflow.com/users/8018505/paul-coleman"}, "is_accepted": true, "score": 3, "last_activity_date": 1498583757, "creation_date": 1498583757, "answer_id": 44786223, "question_id": 44784259, "link": "https://stackoverflow.com/questions/44784259/how-to-declare-postgresql-json-jsonb-field-with-sequel/44786223#44786223", "title": "How to declare postgresql json/jsonb field with sequel?", "body": "<p>You can use the alternative way of defining columns by using the <strong>column</strong> method - details can be found <a href=\"http://sequel.jeremyevans.net/rdoc/files/doc/schema_modification_rdoc.html\" rel=\"nofollow noreferrer\">here</a>. In your example this becomes:</p>\n\n<pre><code>DB.create_table :requests do\n  primary_key :id\n  foreign_key :client_id, :clients\n  foreign_key :service_id, :services\n  DateTime :created_at, null: false\n  DateTime :answered_at, null: false\n  column :request, :jsonb, null: false\nend\n</code></pre>\n"}], "owner": {"reputation": 533, "user_id": 3311451, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/uISPr.jpg?s=128&g=1", "display_name": "Dimitri", "link": "https://stackoverflow.com/users/3311451/dimitri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 646, "favorite_count": 0, "accepted_answer_id": 44786223, "answer_count": 1, "score": 0, "last_activity_date": 1498583757, "creation_date": 1498577346, "last_edit_date": 1498582106, "question_id": 44784259, "link": "https://stackoverflow.com/questions/44784259/how-to-declare-postgresql-json-jsonb-field-with-sequel", "title": "How to declare postgresql json/jsonb field with sequel?", "body": "<p>I'm stuck with that. Can't find anywhere in docs how to declare such spatial data types as inet and jsonb or json.</p>\n\n<p>ruby 2.4.1, sequel 4.47</p>\n\n<p>Plain ruby script with <code>require 'sequel'</code>.</p>\n\n<p>Declaration such as</p>\n\n<pre><code>DB.create_table :requests do\n  primary_key :id\n  foreign_key :client_id, :clients\n  foreign_key :service_id, :services\n  DateTime :created_at, null: false\n  DateTime :answered_at, null: false\n  JsonBType :request, null: false\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1498577362, "post_id": 44784159, "comment_id": 76549244, "body": "Is your problem (a) that your <code>@result</code> variable has more data than you want (i.e., you want to get more targeted data back from the API call) or (b) that you are having trouble extracting the data you want from your <code>@result</code> variable?"}, {"owner": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1498578474, "post_id": 44784159, "comment_id": 76550035, "body": "yes I want to get more targeted data from the API call"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1498579198, "post_id": 44784159, "comment_id": 76550520, "body": "Your question, then, isn&#39;t a <code>ruby-on-rails</code> question (nor a <code>json</code> or <code>ruby</code> question). It&#39;s an ArcGIS question."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498579218, "post_id": 44784159, "comment_id": 76550534, "body": "What specific data are you trying to get?"}, {"owner": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "edited": false, "score": 0, "creation_date": 1498579766, "post_id": 44784159, "comment_id": 76550882, "body": "Data on field name, field type, status, discovery data and discovery well."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1498581545, "post_id": 44784159, "comment_id": 76551978, "body": "Check <a href=\"https://itportal.decc.gov.uk/arcgis/rest/services/OGA_Public_WGS84/OGA_Offshore_Fields_WGS84/MapServer/0/query\" rel=\"nofollow noreferrer\">this</a> out, it might help filter from source."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1498595183, "post_id": 44784159, "comment_id": 76663142, "body": "Also instead of default <a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/json/rdoc/JSON.html\" rel=\"nofollow noreferrer\">ruby JSON module</a> you can use <a href=\"https://github.com/ohler55/oj\" rel=\"nofollow noreferrer\">Oj gem</a>. Its much faster and more preferable choice if you have lots of json decoding/encoding."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "edited": false, "score": 0, "creation_date": 1498734143, "post_id": 44785191, "comment_id": 76626398, "body": "Thanks Guys everything works fine but am also trying to keep the data in my database how should go about that."}, {"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "reply_to_user": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "edited": false, "score": 0, "creation_date": 1499704311, "post_id": 44785191, "comment_id": 77008386, "body": "@fred if you are using posgres &gt; 9.3, there is a <code>JSON</code> column type. Otherwise you can use <code>text</code> and use Rails <code>serialize</code> method. Take a look at this article from CodeShip: <a href=\"https://blog.codeship.com/unleash-the-power-of-storing-json-in-postgres/\" rel=\"nofollow noreferrer\">blog.codeship.com/unleash-the-power-of-storing-json-in-postg&zwnj;&#8203;res</a>"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 3, "last_activity_date": 1498580423, "last_edit_date": 1498580423, "creation_date": 1498580100, "answer_id": 44785191, "question_id": 44784159, "link": "https://stackoverflow.com/questions/44784159/how-to-read-individual-data-from-the-content-of-remote-json-file-in-ruby-on-rail/44785191#44785191", "title": "how to read individual data from the content of remote JSON file in Ruby on Rails?", "body": "<p>Given that the API (as you are currently using it) returns a JSON structure like this:</p>\n\n<pre><code>{\n  \"type\":\"FeatureCollection\",\n  \"features\":[\n    {\n      \"type\":\"Feature\",\n      \"properties\":{\n        \"FIELDNAME\":\"GRYPHON\",\n        \"FIELDTYPE\":\"OIL\",\n        \"NAME_SHORT\":\"GRYPHON\",\n        \"STATUS\":\"PRODUCING\",\n        \"DISC_DATE\":\"1987/07\",\n        \"DISC_WELL\":\"9/18b-7\",\n        \"STAT_CODE\":\"800\",\n        \"PROD_DATE\":\"1993/10\",\n        \"DEPTH_M\":\"111.86\",\n        \"DET_STATUS\":\"DETERMINED\",\n        \"ORIG_OP\":\"KERR-MCGEE\",\n        \"ORIG_LIC\":\"P.496\",\n        \"ORIG_LIC_2\":\"P.478\",\n        \"ORIG_LIC_3\":\"P.257\",\n        \"ORIG_LIC_4\":\"P.103\",\n        \"ORIG_LIC_5\":\" \",\n        \"CURR_OPER\":\"MAERSK OIL NORTH SEA UK LIMITED\",\n        \"FIELDDATA\":\"https://itportal.decc.gov.uk/fields/fields_index/ukcs+field+information+listed+by+field+name/183.htm\",\n        \"OBJECTID\":16,\n        \"OGA_COP\":null\n      },\n      \"geometry\":{\n        \"type\":\"Polygon\",\n        \"coordinates\":[\n          [\n            [1.5701447246411744,59.35253688325039],\n            ...\n          ]\n        ]\n      }\n    },\n    ...\n  ]\n}\n</code></pre>\n\n<p>You could do something like:</p>\n\n<pre><code>&lt;% @result[:features].each do |feature| %&gt;\n  &lt;%= feature[:properties][:FIELDNAME] %&gt;\n  &lt;%= feature[:properties][:FIELDTYPE] %&gt;\n  ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>Your JSON file looks to be something like 1.3MB. So, unless you can figure out how to filter your results on the API side (using query params, I would suppose), you may end up with various performance issues in retrieving the JSON.</p>\n\n<p>And, you may want to do:</p>\n\n<pre><code>@result = JSON.parse(open(url).read).with_indifferent_access\n</code></pre>\n\n<p>So that you can use <code>symbols</code> to access <code>hash</code> elements as well as <code>strings</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1498581122, "post_id": 44785397, "comment_id": 76551716, "body": "Great addition. Thank you!"}], "tags": [], "owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "is_accepted": false, "score": 1, "last_activity_date": 1498580750, "creation_date": 1498580750, "answer_id": 44785397, "question_id": 44784159, "link": "https://stackoverflow.com/questions/44784159/how-to-read-individual-data-from-the-content-of-remote-json-file-in-ruby-on-rail/44785397#44785397", "title": "how to read individual data from the content of remote JSON file in Ruby on Rails?", "body": "<p>One thing to add to @jvillian answer is that if one of the keys is <code>nil</code> then calling this branch's subsequent keys will result in <code>undefined method '[]'</code>. Ruby 2.3+ has a new method called <code>dig</code> which will simply return <code>nil</code>. More on <code>dig</code> in my <a href=\"https://stackoverflow.com/a/39985286/3284936\">answer</a> to this <a href=\"https://stackoverflow.com/q/11501992/3284936\">question</a>. </p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "edited": false, "score": 0, "creation_date": 1498734127, "post_id": 44785863, "comment_id": 76626388, "body": "Thanks Guys everything works fine now but am also trying to keep the data in my database how should go about that."}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "edited": false, "score": 0, "creation_date": 1498738332, "post_id": 44785863, "comment_id": 76629458, "body": "@fred Glad to help! Please don&#39;t forget to accept the answer that worked for you (by clicking on the tick) and, if other answers also helped, you can upvote them (by clicking the up arrow).  :)"}, {"owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "reply_to_user": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "edited": false, "score": 0, "creation_date": 1498738576, "post_id": 44785863, "comment_id": 76629679, "body": "@fred About your question, in general, you could create a model and iterate through the data you receive creating  a record each time. I will suggest you to post a new question, that way you will get more detalied answers and more people will see it."}], "tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 0, "last_activity_date": 1498583044, "last_edit_date": 1498583044, "creation_date": 1498582464, "answer_id": 44785863, "question_id": 44784159, "link": "https://stackoverflow.com/questions/44784159/how-to-read-individual-data-from-the-content-of-remote-json-file-in-ruby-on-rail/44785863#44785863", "title": "how to read individual data from the content of remote JSON file in Ruby on Rails?", "body": "<p>Also to add to <a href=\"https://stackoverflow.com/a/44785191/6136634\">@jvillian answer</a>, you can fetch the filtered information using <a href=\"https://itportal.decc.gov.uk/arcgis/rest/services/OGA_Public_WGS84/OGA_Offshore_Fields_WGS84/MapServer/0/query\" rel=\"nofollow noreferrer\">this link</a>; for example, taking into account the fields you need:</p>\n\n<ul>\n<li>FIELDNAME</li>\n<li>FIELDTYPE</li>\n<li>STATUS</li>\n<li>DISC_DATE</li>\n<li>DISC_WELL</li>\n</ul>\n\n<p>You could create <a href=\"https://itportal.decc.gov.uk/arcgis/rest/services/OGA_Public_WGS84/OGA_Offshore_Fields_WGS84/MapServer/0/query?where=1%3D1&amp;text=&amp;objectIds=&amp;time=&amp;geometry=&amp;geometryType=esriGeometryEnvelope&amp;inSR=&amp;spatialRel=esriSpatialRelIntersects&amp;relationParam=&amp;outFields=FIELDNAME%2C%20FIELDTYPE%2C%20STATUS%2C%20DISC_DATE%2C%20DISC_WELL&amp;returnGeometry=false&amp;returnTrueCurves=false&amp;maxAllowableOffset=&amp;geometryPrecision=&amp;outSR=&amp;returnIdsOnly=false&amp;returnCountOnly=false&amp;orderByFields=&amp;groupByFieldsForStatistics=&amp;outStatistics=&amp;returnZ=false&amp;returnM=false&amp;gdbVersion=&amp;returnDistinctValues=false&amp;resultOffset=&amp;resultRecordCount=&amp;queryByDistance=&amp;returnExtentsOnly=false&amp;datumTransformation=&amp;parameterValues=&amp;rangeValues=&amp;f=pjson\" rel=\"nofollow noreferrer\">query</a> that will result in the following response:</p>\n\n<pre><code>{\n \"displayFieldName\": \"FIELDNAME\",\n \"fieldAliases\": {\n  \"FIELDNAME\": \"Field Name\",\n  \"FIELDTYPE\": \"Field Type\",\n  \"STATUS\": \"Status\",\n  \"DISC_DATE\": \"Discovery Date\",\n  \"DISC_WELL\": \"Discovery Well\"\n },\n \"fields\": [\n  {\n   \"name\": \"FIELDNAME\",\n   \"type\": \"esriFieldTypeString\",\n   \"alias\": \"Field Name\",\n   \"length\": 32\n  },\n  {\n   \"name\": \"FIELDTYPE\",\n   \"type\": \"esriFieldTypeString\",\n   \"alias\": \"Field Type\",\n   \"length\": 4\n  },\n  {\n   \"name\": \"STATUS\",\n   \"type\": \"esriFieldTypeString\",\n   \"alias\": \"Status\",\n   \"length\": 50\n  },\n  {\n   \"name\": \"DISC_DATE\",\n   \"type\": \"esriFieldTypeString\",\n   \"alias\": \"Discovery Date\",\n   \"length\": 20\n  },\n  {\n   \"name\": \"DISC_WELL\",\n   \"type\": \"esriFieldTypeString\",\n   \"alias\": \"Discovery Well\",\n   \"length\": 20\n  }\n ],\n \"features\": [\n  {\n   \"attributes\": {\n    \"FIELDNAME\": \"GRYPHON\",\n    \"FIELDTYPE\": \"OIL\",\n    \"STATUS\": \"PRODUCING\",\n    \"DISC_DATE\": \"1987/07\",\n    \"DISC_WELL\": \"9/18b-7\"\n   }\n  },\n  {\n   \"attributes\": {\n    \"FIELDNAME\": \"BRAEMAR\",\n    \"FIELDTYPE\": \"COND\",\n    \"STATUS\": \"PRODUCING\",\n    \"DISC_DATE\": \"1995/05\",\n    \"DISC_WELL\": \"16/03b-8Z\"\n   }\n  },\n  ...\n ]\n}\n</code></pre>\n\n<p>This file will be now <strong>76KB</strong>, and you can extract the data in almost the same way, just change <code>properties</code> for <code>attributes</code>, i.e.:</p>\n\n<pre><code>&lt;% @result[:features].each do |feature| %&gt;\n  &lt;%= feature[:attributes][:FIELDNAME] %&gt;\n  &lt;%= feature[:attributes][:FIELDTYPE] %&gt;\n  ...\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 8215233, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/e11efb71582f94a5b7e20368e8a7627d?s=128&d=identicon&r=PG&f=1", "display_name": "fred", "link": "https://stackoverflow.com/users/8215233/fred"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 380, "favorite_count": 0, "answer_count": 3, "score": 3, "last_activity_date": 1498595183, "creation_date": 1498577082, "last_edit_date": 1498583214, "question_id": 44784159, "link": "https://stackoverflow.com/questions/44784159/how-to-read-individual-data-from-the-content-of-remote-json-file-in-ruby-on-rail", "title": "how to read individual data from the content of remote JSON file in Ruby on Rails?", "body": "<p>I am trying to read individual data from the content of <em>json API</em> on Oil and Gas Authority website; however the code I have returns all the data. Any help would be highly appreciated. </p>\n\n<pre><code>require 'json'\nrequire 'open-uri'\n\ndef index\n  url='http://data-ogauthority.opendata.arcgis.com/datasets/ab4f6b9519794522aa6ffa6c31617bf8_0.geojson'\n  @result = JSON.parse open(url).read\nend \n</code></pre>\n\n<p>This my index view:</p>\n\n<pre><code>&lt;% @result.each do |row| %&gt;\n  &lt;%= row %&gt; \n&lt;% end %&gt; \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 929, "user_id": 2174582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d02e557e3b6a72c80fadacf119c382?s=128&d=identicon&r=PG", "display_name": "Sergey Sokolov", "link": "https://stackoverflow.com/users/2174582/sergey-sokolov"}, "edited": false, "score": 1, "creation_date": 1498577668, "post_id": 44784127, "comment_id": 76549472, "body": "Did you install nodejs? Try change &#39;application&#39; to &#39;default&#39; in both lines"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1498577964, "post_id": 44784127, "comment_id": 76549696, "body": "what version of ruby and rails are you using?"}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 2126359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6700a47b33a899a321151b72e4a5b42b?s=128&d=identicon&r=PG", "display_name": "helloworld2013", "link": "https://stackoverflow.com/users/2126359/helloworld2013"}, "edited": false, "score": 1, "creation_date": 1498630998, "post_id": 44785073, "comment_id": 76570499, "body": "I chose the short approach (installing Node.js) and the problem is gone. Worked perfectly, thank you @eiko!"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 0, "last_activity_date": 1498579740, "creation_date": 1498579740, "answer_id": 44785073, "question_id": 44784127, "link": "https://stackoverflow.com/questions/44784127/error-in-generated-files-of-ruby-on-rails/44785073#44785073", "title": "Error in generated files of Ruby on Rails", "body": "<p>The first error being thrown by NetBeans is likely a red herring. The error concerning the <code>unexpected ':'</code> is related to the use of colon-hash syntax on an escaped symbol in an implicit hash. ERB isn't technically ruby, so NetBeans is probably getting confused.</p>\n\n<p>The real error is related to running ruby on rails on Windows. The error is actually being thrown by a javascript runtime, not rails. The short answer is that you can install NodeJS to replace your existing runtime with one that works well with Rails. Or you can follow the instructions here:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/12520456/execjsruntimeerror-on-windows-trying-to-follow-rubytutorial\">execjsruntimeerror-on-windows</a></p>\n\n<p>Rails on Windows is tough. Good luck!</p>\n"}], "owner": {"reputation": 83, "user_id": 2126359, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6700a47b33a899a321151b72e4a5b42b?s=128&d=identicon&r=PG", "display_name": "helloworld2013", "link": "https://stackoverflow.com/users/2126359/helloworld2013"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 44785073, "answer_count": 1, "score": 0, "last_activity_date": 1498579740, "creation_date": 1498576994, "question_id": 44784127, "link": "https://stackoverflow.com/questions/44784127/error-in-generated-files-of-ruby-on-rails", "title": "Error in generated files of Ruby on Rails", "body": "<p>First of all, I open the Windows command prompt with Ruby and Rails via the shortcut provided by RailsInstaller. First of all, I create a new Ruby on Rails application using the following command. I call it \"curso\"</p>\n\n<pre><code>rails new curso\n</code></pre>\n\n<p>After that, I navigate to the project folder <code>C:\\Sites\\prueba</code>and start the WEBrick server, like this:</p>\n\n<pre><code>rails s\n</code></pre>\n\n<p>I go to <code>localhost:3000</code>and the test page runs perfectly.</p>\n\n<p>After that, I import the project in NetBeans. Then, I open the command prompt and create a new controller, like this:</p>\n\n<pre><code>rails g controller miprueba index\n</code></pre>\n\n<p>I check the file <code>Views/layouts/application.html.erb</code>, which was generated by Rails and it looks like this:</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;Prueba&lt;/title&gt;\n    &lt;%= csrf_meta_tags %&gt;\n\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n    &lt;%= yield %&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>NetBeans shows me an error on line 7. It says <code>Unexpected ':'</code>. The same error happens in line 8.</p>\n\n<p>If I try running the application, in <code>localhost:3000/miprueba/index</code>, I get an error page titled \"Action Controller: Exception caught\". It says this:</p>\n\n<pre><code>ExecJS::ProgramError in Miprueba#index\nShowing C:/Sites/prueba/app/views/layouts/application.html.erb where line #7 raised:\n\nTypeError: El objeto no acepta esta propiedad o m\u00e9todo\n</code></pre>\n\n<p>The last line roughly means \"The object doesn't accept this value or method\".</p>\n\n<p>If I delete lines 7 and 8 the application runs just fine, but I'm curious about why are those two lines generated and why do they fail.</p>\n"}, {"tags": ["ruby", "datetime", "format"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1498576868, "post_id": 44783975, "comment_id": 76548871, "body": "Are you using Rails?"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1498577236, "post_id": 44783975, "comment_id": 76549146, "body": "@SaraTibbetts the rails helper doesn&#39;t cover this use-case since it&#39;s for &quot;time ago&quot; and not &quot;time until.&quot;"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1498577347, "post_id": 44783975, "comment_id": 76549236, "body": "@ma111hew28 - i don&#39;t think a gem exists for this. but you can just implement it as a series of if-statements, exactly as you have in your question."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498577433, "post_id": 44783975, "comment_id": 76549293, "body": "Your requirements are quite specific. I would be surprised if there&#39;s a built-in helper."}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "reply_to_user": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1498577495, "post_id": 44783975, "comment_id": 76549340, "body": "@eiko It may be possible to convert the time so that it would work"}, {"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 0, "creation_date": 1498577602, "post_id": 44783975, "comment_id": 76549426, "body": "Would <code>distance_of_time_in_words</code> help you? <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/DateHelper.html#method-i-distance_of_time_in_words\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>"}, {"owner": {"reputation": 105574, "user_id": 242933, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7e6e0e2b73358e47e0b7f83f8111f75b?s=128&d=identicon&r=PG", "display_name": "ma11hew28", "link": "https://stackoverflow.com/users/242933/ma11hew28"}, "edited": false, "score": 0, "creation_date": 1498577607, "post_id": 44783975, "comment_id": 76549431, "body": "No, we are not using Rails. Yes, we&#39;ll use a custom implementation if we must."}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 0, "creation_date": 1498578361, "post_id": 44783975, "comment_id": 76549967, "body": "You could use <code>ActionView</code> as dependency, <a href=\"https://stackoverflow.com/a/9573793/846163\">stackoverflow.com/a/9573793/846163</a>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498580001, "post_id": 44783975, "comment_id": 76551018, "body": "@ma11hew28 take a look at the source code for <a href=\"https://github.com/rails/rails/blob/v5.1.2/actionview/lib/action_view/helpers/date_helper.rb#L93\" rel=\"nofollow noreferrer\"><code>distance_of_time_in_words</code></a>: <code>case</code> expressions are quite handy when working with elapsed / remaining time."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1498581570, "post_id": 44783975, "comment_id": 76551986, "body": "What did you try? It seems pretty straightforward now that you have the logic."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1498686209, "last_edit_date": 1498686209, "creation_date": 1498684679, "answer_id": 44812687, "question_id": 44783975, "link": "https://stackoverflow.com/questions/44783975/ruby-convert-seconds-to-natural-language/44812687#44812687", "title": "Ruby: Convert seconds to natural language", "body": "<p><strong>Code</strong></p>\n\n<pre><code>require 'time'\n\nFMT = [[s =  60,         \"%-S seconds\",                   :NO_ROUND],\n       [s *= 60,         \"%-M minutes\",                   :ROUND_MINS],\n       [s *= 24,         \"until %-l:%M %p today\",         :ROUND_UP_MINS_15],\n       [s *   7,         \"until %A %-l:%M %p\",            :ROUND_UP_MINS_15],\n       [Float::INFINITY, \"until %-_m/%d/%y at %-l:%M %p\", :ROUND_UP_MINS_15]]\n\ndef fmt_duration(start_time = Date.today.to_time, elapsed_seconds)\n  secs = start_time.to_i + elapsed_seconds\n  _, fmt, round = FMT.find { |max_secs_plus_1, *_| elapsed_seconds &lt; max_secs_plus_1 }\n  rnd_secs =\n  case round\n  when :NO_ROUND\n    secs\n  when :ROUND_MINS\n    mins = (secs/60.0).round\n    mins -= 1 if mins % 60 == 0\n    60 * mins\n  when :ROUND_UP_MINS_15\n    900 * (secs/900.0).ceil\n  end\n  Time.at(rnd_secs).strftime(fmt)\nend\n</code></pre>\n\n<p>Note that</p>\n\n<pre><code>puts \"#{FMT}\"\n  #=&gt; [[60,       \"%-S seconds\",                   :NO_ROUND],\n  #    [3600,     \"%-M minutes\",                   :ROUND_MINS],\n  #    [86400,    \"until %-l:%M %p today\",         :ROUND_UP_MINS_15],\n  #    [604800,   \"until %A %-l:%M %p\",            :ROUND_UP_MINS_15],\n  #    [Infinity, \"until %-_m/%d/%y at %-l:%M %p\", :ROUND_UP_MINS_15]]\n</code></pre>\n\n<p>See <a href=\"/ruby-doc.org/core-2.4.0/Time.html#method-i-strftime\">Time#strftime</a> for a listing of <code>Date</code> and <code>Time</code> formatting codes in the second column of <code>FMT</code>.    </p>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>def time_to_secs(days, hours, minutes, seconds)\n  seconds + 60 * (minutes + 60 * (hours + 24 * days))\nend\n\nsecs = time_to_secs( 0,  0,  0, 37) #=&gt; 37\nfmt_duration(secs)                  #=&gt; \"37 seconds\"\n\nsecs = time_to_secs( 0,  0, 41, 37) #=&gt; 2_497\nfmt_duration(secs)                  #=&gt; \"42 minutes\"\n\nsecs = time_to_secs( 0, 13, 41, 37) #=&gt; 49_297\nfmt_duration(secs)                  #=&gt; \"until 1:45 PM today\"\n\nsecs = time_to_secs( 6, 23, 36, 37) #=&gt; 603_397\nfmt_duration(secs)                  #=&gt; \"until Tuesday 11:45 PM\"\n\nsecs = time_to_secs(24, 13, 41, 37) #=&gt; 2_122_897\nfmt_duration(secs)                  #=&gt; \"until 7/22/17 at 1:45 PM\"\n</code></pre>\n"}], "owner": {"reputation": 105574, "user_id": 242933, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7e6e0e2b73358e47e0b7f83f8111f75b?s=128&d=identicon&r=PG", "display_name": "ma11hew28", "link": "https://stackoverflow.com/users/242933/ma11hew28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1498686209, "creation_date": 1498576549, "question_id": 44783975, "link": "https://stackoverflow.com/questions/44783975/ruby-convert-seconds-to-natural-language", "title": "Ruby: Convert seconds to natural language", "body": "<p>How can we convert a wait-time in seconds into a string that naturally expresses the wait-time to a human?</p>\n\n<p>Example Input &amp; Output</p>\n\n<ul>\n<li>45 => '45 seconds' # if less than a minute, express in seconds</li>\n<li>85 => '1 minute' # if less than an hour, express in rounded minutes</li>\n<li>3745 => 'until 5:45 PM today' # if less than a day, express in time of day rounded up to the nearest 15 minutes</li>\n<li>9342 => 'until Tuesday 6:30 PM' # if less than a week, express in day of week and time rounded up to the nearest 15 minutes</li>\n<li>139342 => 'until 12/13/17 at 2:00 PM' # else, express in date and time rounded up to the nearest 15 minutes</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-cloud-platform", "google-cloud-vision"], "answers": [{"tags": [], "owner": {"reputation": 929, "user_id": 2174582, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e8d02e557e3b6a72c80fadacf119c382?s=128&d=identicon&r=PG", "display_name": "Sergey Sokolov", "link": "https://stackoverflow.com/users/2174582/sergey-sokolov"}, "is_accepted": true, "score": 2, "last_activity_date": 1498578972, "creation_date": 1498578972, "answer_id": 44784841, "question_id": 44783626, "link": "https://stackoverflow.com/questions/44783626/how-do-i-increase-timeout-to-stop-google-cloud-vision-deadlineexceedederror/44784841#44784841", "title": "How do I increase timeout to stop google-cloud-vision DeadlineExceededError?", "body": "<p>Looks like <code>DeadlineExceededError</code> occurred on <code>504</code> code from server, but relying on the code you can specify timeout manually - <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-ruby/blob/master/google-cloud-vision/lib/google-cloud-vision.rb#L62\" rel=\"nofollow noreferrer\">def vision scope: nil, timeout: nil, client_config: nil</a></p>\n\n<p>So you can:</p>\n\n<pre><code>gcloud = Google::Cloud.new\nvision = gcloud.vision timeout: 180\n</code></pre>\n\n<p>for sample.</p>\n"}], "owner": {"reputation": 12440, "user_id": 688266, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/7987473923dcc33913003686350b33f6?s=128&d=identicon&r=PG", "display_name": "Kamilski81", "link": "https://stackoverflow.com/users/688266/kamilski81"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 44784841, "answer_count": 1, "score": 0, "last_activity_date": 1498578972, "creation_date": 1498575552, "question_id": 44783626, "link": "https://stackoverflow.com/questions/44783626/how-do-i-increase-timeout-to-stop-google-cloud-vision-deadlineexceedederror", "title": "How do I increase timeout to stop google-cloud-vision DeadlineExceededError?", "body": "<p>I am using 'google-cloud-vision' gem (v0.23.0) to do some image OCR and my requests randomly fail with: DeadlineExceededError.  The error rate ranges from 1% to 99% failure, on a day-to-day basis, so it is very unpredictable.</p>\n\n<p>When bypassing the gem and using the Google REST API, and passing in my image that is Base64Encoded, things seem flawless.  </p>\n\n<p>I'm guessing that the DeadlineExceededError is utilizing some timeout variable, whereas the REST api is not. So, I was wondering how to increase the Timeout as I don't feel right by using raw ruby code VS a library created by the company.</p>\n"}, {"tags": ["c++", "ruby", "linux", "unix", "dll"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 8552702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c3b77c1f2152e81b429daa1d0366364?s=128&d=identicon&r=PG", "display_name": "Nicola Bernardini", "link": "https://stackoverflow.com/users/8552702/nicola-bernardini"}, "is_accepted": false, "score": 1, "last_activity_date": 1504853719, "creation_date": 1504853719, "answer_id": 46110371, "question_id": 44783570, "link": "https://stackoverflow.com/questions/44783570/calling-a-c-shared-library-in-ruby/46110371#46110371", "title": "Calling a C++ shared Library in Ruby", "body": "<p>When you say you don't have access to the code, you mean that you do not have access to the headers of the library? If you do not have access to the headers defining classes, prototyping functions and exposing some API, then you wouldn't be able to actually bind this library to any other segment of code, whether the latter is written in <code>c++</code>, <code>python</code>, <code>ruby</code> or whatever.</p>\n\n<p>If you <em>do</em> have access to the headers of the library, then you can easily use <code>rice-ruby</code> to build a <code>ruby</code> wrapper - by following the instructions <a href=\"https://github.com/jasonroelofs/rice/blob/master/README.md\" rel=\"nofollow noreferrer\">here</a>. You need only the headers and an up-to-date version of your library in order to do a proper wrap. Feel free to better define your problem and I'll try to help.</p>\n"}], "owner": {"reputation": 1, "user_id": 7890047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd3127cf67d50cf327c4c998b0a68156?s=128&d=identicon&r=PG&f=1", "display_name": "lucaaslb", "link": "https://stackoverflow.com/users/7890047/lucaaslb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1504853719, "creation_date": 1498575412, "question_id": 44783570, "link": "https://stackoverflow.com/questions/44783570/calling-a-c-shared-library-in-ruby", "title": "Calling a C++ shared Library in Ruby", "body": "<p>I have a shared library \"<strong>mylib.so</strong>\" which was written in <strong>C++</strong> and I would like to make an application in Ruby that calls the library functions.</p>\n\n<p>I researched and found <strong>FFI</strong> (<a href=\"https://github.com/ffi/ffi\" rel=\"nofollow noreferrer\">https://github.com/ffi/ffi</a>) and it only works with a C library. With <strong>Rice</strong> (<a href=\"https://rubygems.org/gems/rice/versions/2.1.0\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/rice/versions/2.1.0</a>) only I found tutorial that I need to change the source code of the library, but I do not have access to this code.</p>\n\n<p>Is there any way to implement a <strong>C++</strong> library in my <strong>Ruby</strong> code to use its functions?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 486, "user_id": 7069011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfPIn.jpg?s=128&g=1", "display_name": "ThorTL67", "link": "https://stackoverflow.com/users/7069011/thortl67"}, "edited": false, "score": 0, "creation_date": 1498575631, "post_id": 44783485, "comment_id": 76547992, "body": "Add an id into the &lt;p&gt; tag. For example, <code>&lt;p id=&#39;number_of_pos&#39;&gt; Number of POSs : &lt;%= f.number_field :amt_pos %&gt; &lt;&#47;p&gt;</code>. Then in your javascript you would find it under <code>$(&quot;#number_of_pos&quot;)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 7960980, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XQVQo.jpg?s=128&g=1", "display_name": "Martin", "link": "https://stackoverflow.com/users/7960980/martin"}, "is_accepted": false, "score": 1, "last_activity_date": 1498576260, "creation_date": 1498576260, "answer_id": 44783880, "question_id": 44783485, "link": "https://stackoverflow.com/questions/44783485/rails-show-additional-fields-if-a-specific-field-receives-an-input/44783880#44783880", "title": "Rails - Show additional fields if a specific field receives an input", "body": "<p>This might not be the best solution, but one way to go about it would to be attach a jQuery event listen to your number of POS input field that looks for a change in input value, and then, if the value is something you're looking for, unhide your third field (i.e., change the css from <code>display: none;</code> to something else.</p>\n\n<p>So, if you give an ID to your number of POS input field and your tax field you can have something like this:</p>\n\n<pre><code>$(\"#num-of-pos\" ).on(\"input\", function() {\n  if ($(this).val() != \"\") {\n    $(\"#pos-tax\").css({ \"display\" : \"inline-block\" });\n  }\n});\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 143, "user_id": 4930434, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/880140592046671/picture?type=large", "display_name": "Lucas Oliveira", "link": "https://stackoverflow.com/users/4930434/lucas-oliveira"}, "edited": false, "score": 0, "creation_date": 1498582395, "post_id": 44783952, "comment_id": 76552453, "body": "This worked, but the real problem was that I was not using turbo-links"}], "tags": [], "owner": {"reputation": 149, "user_id": 3771020, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4CdrD.jpg?s=128&g=1", "display_name": "Julien &#39;JS&#39;", "link": "https://stackoverflow.com/users/3771020/julien-js"}, "is_accepted": true, "score": 1, "last_activity_date": 1498576500, "creation_date": 1498576500, "answer_id": 44783952, "question_id": 44783485, "link": "https://stackoverflow.com/questions/44783485/rails-show-additional-fields-if-a-specific-field-receives-an-input/44783952#44783952", "title": "Rails - Show additional fields if a specific field receives an input", "body": "<p>Change your DOM like that :</p>\n\n<pre><code>&lt;%= form_for (@sale) do |s| %&gt;\n    &lt;%= fields_for :fee, @sale.fee do |f| %&gt;\n        &lt;div&gt;\n            Rent : &lt;%= f.number_field :rent %&gt;\n        &lt;/div&gt;\n        &lt;div&gt;\n            Number of POSs : &lt;%= f.number_field :amt_pos, class: \"toggle-at-input\", :\"data-toggle-container\" =&gt; \"container-to-display\" %&gt;\n        &lt;/div&gt;\n        &lt;div id=\"container-to-display\" style=\"display:none;\"&gt;\n            POS's Tax : &lt;%= f.number_field :pos_tax %&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;%= s.submit %&gt;     \n&lt;% end %&gt;\n</code></pre>\n\n<p>And in jQuery :</p>\n\n<pre><code>&lt;script&gt;\n    $(document).on('ready', function(){\n        $('input.toggle-at-input').on('keyup', function(){\n            var $input = $(this),\n                $container = $(\"#\" + $input.data('toggle-container'));\n\n            ($input.val() != \"\") ? $container.fadeIn() : $container.fadeOut(); \n        });\n    });\n&lt;/script&gt;\n</code></pre>\n\n<p>This code allows you to display your input if the value of the given field is not empty.</p>\n\n<p>I have not test this code but it should works :)</p>\n"}], "owner": {"reputation": 143, "user_id": 4930434, "user_type": "registered", "accept_rate": 94, "profile_image": "https://graph.facebook.com/880140592046671/picture?type=large", "display_name": "Lucas Oliveira", "link": "https://stackoverflow.com/users/4930434/lucas-oliveira"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 44783952, "answer_count": 2, "score": 0, "last_activity_date": 1547004370, "creation_date": 1498575214, "last_edit_date": 1547004370, "question_id": 44783485, "link": "https://stackoverflow.com/questions/44783485/rails-show-additional-fields-if-a-specific-field-receives-an-input", "title": "Rails - Show additional fields if a specific field receives an input", "body": "<p>I have a fields_for inside a form_for in my Sale/new.html.erb that goes like that:</p>\n\n<pre><code>&lt;%= form_for (@sale) do |s| %&gt;\n\n    &lt;%= fields_for :fee, @sale.fee do |f| %&gt;\n        &lt;p&gt; Rent : &lt;%= f.number_field :rent %&gt; &lt;/p&gt;\n        &lt;p&gt; Number of POSs : &lt;%= f.number_field :amt_pos %&gt; &lt;/p&gt;\n    &lt;% end %&gt;\n\n&lt;%= s.submit %&gt;     \n&lt;% end %&gt;\n</code></pre>\n\n<p>And I need to show another field only if Number of POSs receives an input.</p>\n\n<pre><code>&lt;p&gt; POS Tax : &lt;%= f.number_field :pos_tax %&gt; &lt;/p&gt;\n</code></pre>\n\n<p>I know I have to implement some JavaScript in order to perform this action dynamically, but I'm unable to figure it out on how to refer to that specific field</p>\n\n<p><strong>EDIT:</strong>\nThe marked answer works fine, but for Rails 5 (which was my case) you have to use turbo-links. Meaning you have to use</p>\n\n<p>this:</p>\n\n<pre><code>$(document).on('turbolinks:load', function() {\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>$(document).on('ready', function(){\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "initialization", "class-variables"], "answers": [{"tags": [], "owner": {"reputation": 631, "user_id": 8157532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bde8f29e12331c4a81c873acfc77cc?s=128&d=identicon&r=PG&f=1", "display_name": "ucpuzz", "link": "https://stackoverflow.com/users/8157532/ucpuzz"}, "is_accepted": false, "score": 0, "last_activity_date": 1498574920, "creation_date": 1498574920, "answer_id": 44783371, "question_id": 44783123, "link": "https://stackoverflow.com/questions/44783123/when-do-ruby-rails-class-variables-get-initilalized/44783371#44783371", "title": "When do Ruby/Rails class variables get initilalized?", "body": "<p>How about using redis/memcache?  Cache the api values in redis/memcache and set expiry to one month or little shorter. In the initializer always pull from cache, and if cache is nil, then call the method that calls the real api and again caches it.</p>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1498574939, "creation_date": 1498574939, "answer_id": 44783378, "question_id": 44783123, "link": "https://stackoverflow.com/questions/44783123/when-do-ruby-rails-class-variables-get-initilalized/44783378#44783378", "title": "When do Ruby/Rails class variables get initilalized?", "body": "<p>It happens when the class is loaded (read: during Rails startup.)</p>\n\n<p>Also, you don\u2019t need the class variable. Class instance variable is good enough:</p>\n\n<pre><code>class Foo\n   @available_ids = read_only_value\n   def initialize\n      @available_ids = self.class.instance_variable_get :@available_ids\n   end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1498575822, "creation_date": 1498575822, "answer_id": 44783723, "question_id": 44783123, "link": "https://stackoverflow.com/questions/44783123/when-do-ruby-rails-class-variables-get-initilalized/44783723#44783723", "title": "When do Ruby/Rails class variables get initilalized?", "body": "<p>In the case of your code, the API would be accessed when the class gets defined, which means it would be accessed only once, when you start your app. You can see this clearly with this example:</p>\n\n<pre><code>puts \"starting app\"\n\ndef read_only_value\n  puts \"API accessed!\"\n  \"my value\"\nend\n\n\nclass Foo\n  @@available_ids = read_only_value\n  def initialize\n    @available_ids = @@available_ids\n    puts \"initializing with value: #{@available_ids}\"\n  end\nend\n\nputs \"initializing two objects: \"\nFoo.new\nFoo.new\n\n#=&gt; starting app\n#=&gt; API accessed!\n#=&gt; initializing two objects: \n#=&gt; initializing with value: my value\n#=&gt; initializing with value: my value\n</code></pre>\n\n<p>When trying to manage API access, the best practice is to wrap your API in its own class. Doing so lets you keep track of API calls and cache values independently of the objects using the API:</p>\n\n<pre><code>class API\n\n  def self.instance\n    @@instance ||= API.new\n  end\n\n  def read_only_value\n    if @read_only_value.nil? || (Time.now - @cached_time) &gt; 86400 # one day, in seconds\n      puts \"accessing api\"\n      @read_only_value = \"access api here\"\n      @cached_time = Time.now\n    end\n    @read_only_value\n  end\n\nend\n\n\nclass Foo\n\n  def initialize\n    @available_ids = API.instance.read_only_value\n    puts \"initializing with value: #{@available_ids}\"\n  end\n\nend\n\nputs \"initializing two objects: \"\n\nFoo.new\nFoo.new\n\n#=&gt; initializing two objects: \n#=&gt; accessing api\n#=&gt; initializing with value: access api here\n#=&gt; initializing with value: access api here\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 976, "user_id": 3859994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/476364b326635d074b8f83f00e484b6d?s=128&d=identicon&r=PG&f=1", "display_name": "0lli.rocks", "link": "https://stackoverflow.com/users/3859994/0lli-rocks"}, "edited": false, "score": 1, "creation_date": 1498641677, "post_id": 44784512, "comment_id": 76577029, "body": "This answer solves my problem, but @mudasobwa was the first to answer my question. I will therefore accept his answer. Thanks anyway!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 976, "user_id": 3859994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/476364b326635d074b8f83f00e484b6d?s=128&d=identicon&r=PG&f=1", "display_name": "0lli.rocks", "link": "https://stackoverflow.com/users/3859994/0lli-rocks"}, "edited": false, "score": 0, "creation_date": 1498643759, "post_id": 44784512, "comment_id": 76578473, "body": "@0lli.rocks this is not an F1 tournament and race conditions should be avoided. If <i>this</i> answers solves your problem, <i>this</i> answer should be marked as correct. Please do."}, {"owner": {"reputation": 976, "user_id": 3859994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/476364b326635d074b8f83f00e484b6d?s=128&d=identicon&r=PG&f=1", "display_name": "0lli.rocks", "link": "https://stackoverflow.com/users/3859994/0lli-rocks"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1498657220, "post_id": 44784512, "comment_id": 76588223, "body": "@mudasobwa Maybe you misunterstood my comment. My original question was &quot;When are the variables initialized?&quot;. This answer by Stefan does not answer this question at all. If I accept this one, someone who finds the question has to scroll to your answer to find the correct answer. Anyway this answer by Stefan solves my problem, not my question."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1498578054, "creation_date": 1498578054, "answer_id": 44784512, "question_id": 44783123, "link": "https://stackoverflow.com/questions/44783123/when-do-ruby-rails-class-variables-get-initilalized/44784512#44784512", "title": "When do Ruby/Rails class variables get initilalized?", "body": "<p>Rails has a built-in <a href=\"http://guides.rubyonrails.org/caching_with_rails.html#low-level-caching\" rel=\"nofollow noreferrer\">cache</a>, so something along these lines should work: (based on the example in the docs)</p>\n\n<pre><code>class Foo\n  def available_ids\n    Rails.cache.fetch('available_ids', expires_in: 24.hours) do\n      API.fetch_ids\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 976, "user_id": 3859994, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/476364b326635d074b8f83f00e484b6d?s=128&d=identicon&r=PG&f=1", "display_name": "0lli.rocks", "link": "https://stackoverflow.com/users/3859994/0lli-rocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 44783378, "answer_count": 4, "score": 0, "last_activity_date": 1498578054, "creation_date": 1498574301, "question_id": 44783123, "link": "https://stackoverflow.com/questions/44783123/when-do-ruby-rails-class-variables-get-initilalized", "title": "When do Ruby/Rails class variables get initilalized?", "body": "<p>I am currently facing the issue, that all my objects using an instance variable with the \"same\" inital value and I only read this one.</p>\n\n<pre><code>def initialize\n    @available_ids = read_only_value\nend\n</code></pre>\n\n<p>But here comes the tricky thing: This \"read_only_value\" is retrieved from a API. To make it easy, let's assume the value is an array of ints and gets changed once a month.</p>\n\n<p>But I don't want to DoS the API by retrieving the value every time I create an object. What if I use a class variable instead?</p>\n\n<pre><code>class Foo\n   @@available_ids = read_only_value\n   def initialize\n      @available_ids = @@available_ids //weird but let's go with it\n   end\nend\n</code></pre>\n\n<p>I assume this will solve the issue with spamming the API, since it's only execute once the variable gets initialized...</p>\n\n<p>But <strong>when</strong> does this happen? When I start my Rails application, when I create the first object? Will it ever be updated? Since the value changes once a month how do I get the update?</p>\n\n<p>PS: I guess the best option would be to save the ids in a database and check the ids once in a while or on demand. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1498574300, "post_id": 44783083, "comment_id": 76546994, "body": "&quot;strings are iterable as well&quot; Are you sure about that?"}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1498574348, "post_id": 44783083, "comment_id": 76547035, "body": "String consists of characters, do they not?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1498574560, "post_id": 44783083, "comment_id": 76547191, "body": "<i>&quot;the code is ignoring the strings since strings are iterable&quot;</i> \u2013 Could you explain that?"}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "edited": false, "score": 0, "creation_date": 1498574785, "post_id": 44783083, "comment_id": 76547365, "body": "If I&#39;m not wrong, when you iterate over a string - you get characters. Is it not the case in ruby?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498574995, "post_id": 44783083, "comment_id": 76547524, "body": "Sure, there is for example <code>String#each_char</code>. But why do you conclude that the code ignores strings because of that?"}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "edited": false, "score": 0, "creation_date": 1498575157, "post_id": 44783083, "comment_id": 76547640, "body": "I&#39;m guessing because he doesn&#39;t want to split string any further. Splitting &quot;hello&quot; into &#39;h&#39;, &#39;e&#39;, &#39;l&#39;, &#39;l&#39;, &#39;o&#39; won&#39;t make much sense."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1498575212, "post_id": 44783083, "comment_id": 76547682, "body": "&quot;strings are iterable&quot; in Python, not by default in Ruby. You need to define how you want to enumerate them (<code>each_char</code>, <code>each_byte</code>, <code>each_line</code>, ...)"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1498575358, "post_id": 44783083, "comment_id": 76547796, "body": "@hspandher It might be enlightening for you to <a href=\"https://repl.it/JEBw\" rel=\"nofollow noreferrer\">actually run OP&#39;s code</a> and then see what happens when you take out the code that makes it ignore strings."}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1498575377, "post_id": 44783083, "comment_id": 76547809, "body": "@EricDuminil Yeah I kind of realized that, it&#39;s been a while since I used ruby. Anyway the only apparent reason the code is avoiding strings is to avoid calling <code>each</code> block on it."}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1498575450, "post_id": 44783083, "comment_id": 76547867, "body": "@JordanRunning I would have if I could. Sadly I&#39;m in office with no sudo permissions or ruby build installed."}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1498575606, "post_id": 44783083, "comment_id": 76547980, "body": "@JordanRunning Well thanks. I didn&#39;t think of that. Anyway irrespective of whether strings are iterable or not, the crux remains the same that the developer doesn&#39;t wants to run <code>each</code> method on strings."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1498575820, "post_id": 44783083, "comment_id": 76548105, "body": "@hspandher I&#39;m so sorry, I totally misread your answer! You were saying <i>&quot;the code is using <code>if</code> because otherwise it would also iterate the strings&quot;</i> and I was reading <i>&quot;the code doesn&#39;t skip the strings because of the <code>if</code> but because they are iterable&quot;</i> (which didn&#39;t make any sense)"}, {"owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498576077, "post_id": 44783083, "comment_id": 76548291, "body": "@Stefan No problem, unless you&#39;re being sarcastic :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1498576420, "post_id": 44783083, "comment_id": 76548542, "body": "I&#39;m not (and the downvote isn&#39;t mine). Unfortunately, your conclusion is still wrong, because <code>String</code> doesn&#39;t respond to <code>each</code>, so without the <code>if</code>, you would get a <code>NoMethodError</code>. The code would not iterate the characters."}], "tags": [], "owner": {"reputation": 13168, "user_id": 4725756, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ff02ffd62899a70a608571ec03d5a7b?s=128&d=identicon&r=PG&f=1", "display_name": "hspandher", "link": "https://stackoverflow.com/users/4725756/hspandher"}, "is_accepted": false, "score": -1, "last_activity_date": 1498576250, "last_edit_date": 1498576250, "creation_date": 1498574209, "answer_id": 44783083, "question_id": 44782986, "link": "https://stackoverflow.com/questions/44782986/nested-arrays-and-strings-in-ruby/44783083#44783083", "title": "nested arrays and strings in Ruby", "body": "<p><code>\"hello\"</code> is a string, which is being stored along with arrays such as <code>[\"world\", \"new york\"]</code>, that's why the code is ignoring the strings since strings doesn't have <code>each</code> method defined on them.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1498576594, "post_id": 44783584, "comment_id": 76548671, "body": "You could also say <i>&quot;because not every <code>inner_element</code> responds to <code>each</code>&quot;</i> (and a check via <code>respond_to?</code> might be preferable to a type check)"}, {"owner": {"reputation": 109, "user_id": 8221041, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/67423f3262540ba0ad52c99bd7d6184e?s=128&d=identicon&r=PG&f=1", "display_name": "stuartambient", "link": "https://stackoverflow.com/users/8221041/stuartambient"}, "edited": false, "score": 0, "creation_date": 1498582667, "post_id": 44783584, "comment_id": 76552605, "body": "Ok, I guess what is throwing me is the way the array is written. The way I read it is, the most outer edge brackets seem to be the parent array.  Within, there are two child arrays but in the first child array has it&#39;s own child (or grandchild of the original parent). i.e. [&quot;hello&quot;, [&quot;world&quot;, &quot;new york&quot;]]."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 109, "user_id": 8221041, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/67423f3262540ba0ad52c99bd7d6184e?s=128&d=identicon&r=PG&f=1", "display_name": "stuartambient", "link": "https://stackoverflow.com/users/8221041/stuartambient"}, "edited": false, "score": 0, "creation_date": 1498583521, "post_id": 44783584, "comment_id": 76553074, "body": "@stuartambient this is not a tree, there is no parent-child-relationship. <code>more_nested_array</code>&#39;s first element is an array and it contains two elements: a string <code>&quot;hello&quot;</code> and an(other) array <code>[&quot;world&quot;, &quot;new york&quot;]</code>. Maybe you are under the impression that arrays may only contain one &quot;type&quot; of object. That is not the case in Ruby. An array can contain any object: <code>[1, nil, :foo, &quot;bar&quot;, {a: 2}]</code> is a valid array."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498584316, "post_id": 44783584, "comment_id": 76553517, "body": "@Stefan: The OP&#39;s nested array can certainly be seen as a Tree whose leaves are strings, but it might not necessarily help to understand the structure."}, {"owner": {"reputation": 109, "user_id": 8221041, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/67423f3262540ba0ad52c99bd7d6184e?s=128&d=identicon&r=PG&f=1", "display_name": "stuartambient", "link": "https://stackoverflow.com/users/8221041/stuartambient"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1498584406, "post_id": 44783584, "comment_id": 76553554, "body": "@Stefan, Okay that shed some light.  I see the difference now and it makes sense.  I was aware that arrays can hold various objects in them so not sure what I was expecting to see.  What I was doing was attempting to separate and count using the brackets, how many actual arrays were in there.  I&#39;m going to look for a few more example so it&#39;s hammered in, thanks!"}, {"owner": {"reputation": 109, "user_id": 8221041, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/67423f3262540ba0ad52c99bd7d6184e?s=128&d=identicon&r=PG&f=1", "display_name": "stuartambient", "link": "https://stackoverflow.com/users/8221041/stuartambient"}, "edited": false, "score": 0, "creation_date": 1498584935, "post_id": 44783584, "comment_id": 76553839, "body": "@Eric Duminil A similar example from another site, basically the same method used a tree diagram- music_library = [[&quot;Adele&quot;, [&quot;19&quot;, [&quot;Day Dreamer&quot;, &quot;Best for Last&quot;]], [&quot;21&quot;, [&quot;Rolling in the Deep&quot;, &quot;Rumor Has It&quot;]]], [&quot;Beyonce&quot;, [&quot;4&quot;, [&quot;1 + 1&quot;, &quot;Countdown&quot;]], [&quot;Beyonce&quot;, [&quot;Haunted&quot;, &quot;Pretty Hurts&quot;]]]]  I believe the strings  in the first array, 21/Rolling in the Deep and Rumor has it.  I believe the if / else is only needed for the 2nd iteration."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 4, "last_activity_date": 1498580518, "last_edit_date": 1498580518, "creation_date": 1498575436, "answer_id": 44783584, "question_id": 44782986, "link": "https://stackoverflow.com/questions/44782986/nested-arrays-and-strings-in-ruby/44783584#44783584", "title": "nested arrays and strings in Ruby", "body": "<h1>NoMethodError otherwise</h1>\n\n<p>The check is needed because the loops are hard-coded for this given tree (or nested arrays, if you prefer).</p>\n\n<p>Removing the check :</p>\n\n<pre><code>more_nested_array = [[\"hello\", [\"world\", \"new york\"]], [\"love\", \"ruby\"]]\n\n# Iteration-\nmore_nested_array.each do |element|\n  element.each do |inner_element|\n    inner_element.each do |third_layer_element|\n      puts third_layer_element\n    end\n  end\nend\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>undefined method `each' for \"hello\":String (NoMethodError)\n</code></pre>\n\n<p>because not every <code>inner_element</code> is an array or responds to <code>each</code>.</p>\n\n<h1>Recursive version</h1>\n\n<p>With this kind of structure, it would be preferrable to write a recursive method in order to parse the tree, instead of hard-coding the tree depth and node classes.</p>\n\n<pre><code>more_nested_array = [[\"hello\", [\"world\", \"new york\"]], [\"love\", \"ruby\"]]\n\ndef parse_tree(node, current_depth = 0)\n  if node.respond_to?(:each)\n    node.each do |child|\n      parse_tree(child, current_depth + 1)\n    end\n  else\n    puts \"Found #{node.inspect} at depth #{current_depth}\"\n  end\nend\n\nparse_tree(more_nested_array)\n</code></pre>\n\n<p>It outputs:</p>\n\n<pre><code>Found \"hello\" at depth 2\nFound \"world\" at depth 3\nFound \"new york\" at depth 3\nFound \"love\" at depth 2\nFound \"ruby\" at depth 2\n</code></pre>\n"}], "owner": {"reputation": 109, "user_id": 8221041, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/67423f3262540ba0ad52c99bd7d6184e?s=128&d=identicon&r=PG&f=1", "display_name": "stuartambient", "link": "https://stackoverflow.com/users/8221041/stuartambient"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 44783584, "answer_count": 2, "score": 3, "last_activity_date": 1498580518, "creation_date": 1498573986, "question_id": 44782986, "link": "https://stackoverflow.com/questions/44782986/nested-arrays-and-strings-in-ruby", "title": "nested arrays and strings in Ruby", "body": "<p>I'm trying to figure out nested arrays, particularly of the multi dimensional type.  I've gone through two articles on them and are getting tripped up when the iteration is checking for strings.  </p>\n\n<pre><code># Array - \nmore_nested_array = [[\"hello\", [\"world\", \"new york\"]], [\"love\", \"ruby\"]]\n\n# Iteration-\nmore_nested_array.each do |element|\n element.each do |inner_element|\n    if inner_element.is_a?(Array)\n      inner_element.each do |third_layer_element|\n     end\n   end\n  end\nend\n</code></pre>\n\n<p>So it is using the if statement because supposedly in some iteration there are strings.  This reference to strings is confusing me since it looks like it's just a bunch of arrays.  Can someone explain please? </p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1498574384, "post_id": 44782951, "comment_id": 76547065, "body": "What are your thoughts about INNER JOIN per criteria with complex ON clause?"}, {"owner": {"reputation": 10397, "user_id": 2144048, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1WlzH.jpg?s=128&g=1", "display_name": "JohnHC", "link": "https://stackoverflow.com/users/2144048/johnhc"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1498575493, "post_id": 44782951, "comment_id": 76547906, "body": "<code>where exists</code> will stop as soon as it gets a positive result, <code>join</code> compares the whole table"}, {"owner": {"reputation": 23, "user_id": 2304998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88127e54003450d0942d70c8e36fb05c?s=128&d=identicon&r=PG", "display_name": "Moonlight-Angel", "link": "https://stackoverflow.com/users/2304998/moonlight-angel"}, "edited": false, "score": 1, "creation_date": 1498575651, "post_id": 44782951, "comment_id": 76548003, "body": "@JohnHC Your solution works fine on items where all the existing criteria are given. However, if I remove the <code>Age</code> criterium, the user isn&#39;t matched anymore. A non-existing criterium implicitely means a &#39;matching&#39; criterium. BTW, didn&#39;t knew about the <code>EXISTS</code> expression, thanks !"}], "tags": [], "owner": {"reputation": 10397, "user_id": 2144048, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/1WlzH.jpg?s=128&g=1", "display_name": "JohnHC", "link": "https://stackoverflow.com/users/2144048/johnhc"}, "is_accepted": false, "score": 0, "last_activity_date": 1498573889, "creation_date": 1498573889, "answer_id": 44782951, "question_id": 44782793, "link": "https://stackoverflow.com/questions/44782793/only-return-a-record-when-all-its-associated-records-match-the-conditions/44782951#44782951", "title": "Only return a record when all its associated records match the conditions", "body": "<p>Why not use <code>exists</code> in your where clause? (shorthand because f*** typing all that out again)</p>\n\n<pre><code>SELECT ci.*\nFROM campaign_items ci\nWHERE exists (select 1\n              from campaign_item_criteria cic\n              where cic.campaign_item_id = ci.id\n              and cic.type = '::gender'\n              and (cic.gender = 'female' or cic.gender is null)\n             )\nand exists (select 1\n              from campaign_item_criteria cic\n              where cic.campaign_item_id = ci.id\n              and cic.type = '::age'\n              and (cic.age = '35' or cic.age is null)\n             )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 2304998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88127e54003450d0942d70c8e36fb05c?s=128&d=identicon&r=PG", "display_name": "Moonlight-Angel", "link": "https://stackoverflow.com/users/2304998/moonlight-angel"}, "is_accepted": false, "score": 0, "last_activity_date": 1498663861, "creation_date": 1498663861, "answer_id": 44806878, "question_id": 44782793, "link": "https://stackoverflow.com/questions/44782793/only-return-a-record-when-all-its-associated-records-match-the-conditions/44806878#44806878", "title": "Only return a record when all its associated records match the conditions", "body": "<p>I was able to find a query that does exactly what I'm trying to do :</p>\n\n<pre><code>SELECT DISTINCT \"campaign_items\".*\nFROM \"campaign_items\"\nINNER JOIN \"campaign_item_criteria\"\n  ON \"campaign_item_criteria\".\"campaign_item_id\" = \"campaign_items\".\"id\"\nWHERE\n  (NOT EXISTS (SELECT 1\n               FROM \"campaign_item_criteria\"\n               WHERE \"campaign_item_criteria\".\"campaign_item_id\" = \"campaign_items\".\"id\"\n                     AND \"campaign_item_criteria\".\"type\" = 'Campaign::Item::Criterium::Gender')\n   OR EXISTS (SELECT 1\n              FROM \"campaign_item_criteria\"\n              WHERE \"campaign_item_criteria\".\"campaign_item_id\" = \"campaign_items\".\"id\"\n                    AND \"campaign_item_criteria\".\"type\" = 'Campaign::Item::Criterium::Gender'\n                    AND \"campaign_item_criteria\".\"gender\" = 'female'))\n  AND (NOT EXISTS (SELECT 1\n                   FROM \"campaign_item_criteria\"\n                   WHERE \"campaign_item_criteria\".\"campaign_item_id\" = \"campaign_items\".\"id\"\n                         AND \"campaign_item_criteria\".\"type\" = 'Campaign::Item::Criterium::Age')\n       OR EXISTS (SELECT 1\n                  FROM \"campaign_item_criteria\"\n                  WHERE \"campaign_item_criteria\".\"campaign_item_id\" = \"campaign_items\".\"id\"\n                        AND \"campaign_item_criteria\".\"type\" = 'Campaign::Item::Criterium::Age'\n                        AND \"campaign_item_criteria\".\"age_min\" &lt;= 17\n                        AND (\"campaign_item_criteria\".\"age_max\" IS NULL\n                             OR \"campaign_item_criteria\".\"age_max\" &gt;= 17)))\n</code></pre>\n\n<p>So that's the query for 2 criteria and it has 4 subqueries. We already know we will end up with ~10 different criteria. So that's 20 subqueries total for the final request.<br>\nAt the moment (with 2 criteria), it takes ~2.5ms with 2 <code>Campaign::Item</code> in the database and ~16ms with 2 000 <code>Campaign::Item</code> in the database. It's not as exponential as we thought it would be, so we'll say it 'good enough'.</p>\n\n<p>We'll keep this one for now.<br>\nDoes anybody have anything to add or any amelioration paths ?</p>\n"}], "owner": {"reputation": 23, "user_id": 2304998, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88127e54003450d0942d70c8e36fb05c?s=128&d=identicon&r=PG", "display_name": "Moonlight-Angel", "link": "https://stackoverflow.com/users/2304998/moonlight-angel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1498663861, "creation_date": 1498573396, "question_id": 44782793, "link": "https://stackoverflow.com/questions/44782793/only-return-a-record-when-all-its-associated-records-match-the-conditions", "title": "Only return a record when all its associated records match the conditions", "body": "<p>We have :</p>\n\n<pre><code>class Campaign::Item &lt; ActiveRecord::Base\n  belongs_to :campaign\n\n  has_many :criteria\nend\n\nclass Campaign::Item::Criterium &lt; ActiveRecord::Base\n  belongs_to :campaign_item\n\n  # This model has a +type+ field.\nend\n\nclass Campaign::Item::Criterium::Gender &lt; Campaign::Item::Criterium\n  belongs_to :campaign_item\n\n  # This model uses the a +gender+ field.\nend\n\nclass Campaign::Item::Criterium::Age &lt; Campaign::Item::Criterium\n  belongs_to :campaign_item\n\n  # This model uses the +age_min+ and +age_max+ fields.\nend\n\nclass User\n  # This model has a +gender+ and +birth_date+ field.\nend\n</code></pre>\n\n<p>As you can see, users can create campaigns with items inside them.\nEach campaign item can have many criteria based on gender and age.</p>\n\n<p>Now we're trying to list all the campaign items that are matching the current user's information.</p>\n\n<p>For example :<br>\nThe current user is a <code>female</code> and has <code>25 years old</code>.<br>\nThis user should be able to see an item that only has a <code>female Gender</code> criterium.<br>\nIt should also be able to see an item that has a <code>female Gender</code> criterium and an <code>Age between 18 and 30 years old</code> criterium.<br>\nHowever, this user should not see an item that has a <code>female Gender</code> criterium and an <code>Age between 30 and 35 years old</code> criterium.</p>\n\n<p>So the goal here is to return all the <code>Campaign::Item</code> where exactly <em>all</em> the criteria are matching the current user's information.\nAt the moment, we only managed to return <code>Campaign::Item</code> where <em>at least</em> one criterium is matching the current user's information.</p>\n\n<p>Here some examples of queries we tried to achieve this goal :</p>\n\n<pre><code>SELECT \"campaign_items\".*\nFROM \"campaign_items\"\nINNER JOIN \"campaign_item_criteria\"\n  ON \"campaign_item_criteria\".\"campaign_item_id\" = \"campaign_items\".\"id\"\nWHERE\n  (\"campaign_item_criteria\".\"type\" = 'Campaign::Item::Criterium::Gender'\n   AND (\"campaign_item_criteria\".\"gender\" IS NULL\n        OR \"campaign_item_criteria\".\"gender\" = 'female'))\n  AND (\"campaign_item_criteria\".\"type\" = 'Campaign::Item::Criterium::Age'\n       AND (\"campaign_item_criteria\".\"age_min\" IS NULL\n            OR \"campaign_item_criteria\".\"age_min\" &lt;= 17)\n       AND (\"campaign_item_criteria\".\"age_max\" IS NULL\n            OR \"campaign_item_criteria\".\"age_max\" &gt;= 17))\n</code></pre>\n\n<p>This one doesn't work as it tries to find a criterium that has both <code>Campaign::Item::Criterium::Gender</code> and <code>Campaign::Item::Criterium::Age</code> types and obviously, this won't be the case any soon.</p>\n\n<pre><code>SELECT \"campaign_items\".*\nFROM \"campaign_items\"\nINNER JOIN \"campaign_item_criteria\"\n  ON \"campaign_item_criteria\".\"campaign_item_id\" = \"campaign_items\".\"id\"\nWHERE\nCASE\n  WHEN \"campaign_item_criteria\".\"type\" = 'Campaign::Item::Criterium::Gender'\n       AND \"campaign_item_criteria\".\"gender\" = 'female'\n       THEN 1\n  WHEN \"campaign_item_criteria\".\"type\" = 'Campaign::Item::Criterium::Age'\n       AND \"campaign_item_criteria\".\"age_min\" &lt;= 17\n       AND (\"campaign_item_criteria\".\"age_max\" IS NULL OR \"campaign_item_criteria\".\"age_max\" &gt;= 17)\n       THEN 1\n  ELSE 0\nEND = 1\n</code></pre>\n\n<p>This ony also doesn't work as it returns the <code>Campaign::Item</code> as soon as <em>one</em> criterium matches the user's information, even if the other criteria aren't matching the user's information.</p>\n\n<p>And now we're running out of ideas. Is there any chance we're gonna get such a behavior to work as expected in pure SQL ? Does anyone have any lead  ?</p>\n\n<p>Thanks in advance !</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal"], "answers": [{"comments": [{"owner": {"reputation": 288, "user_id": 5241456, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-dyuG5GGKgAc/AAAAAAAAAAI/AAAAAAAAAHw/r4oZO6Om9MA/photo.jpg?sz=128", "display_name": "Muhammad Rahmatullah", "link": "https://stackoverflow.com/users/5241456/muhammad-rahmatullah"}, "edited": false, "score": 0, "creation_date": 1498577723, "post_id": 44783423, "comment_id": 76549522, "body": "i already erase the <code>respond_to do |format|</code> , but still when the apps redirect to sandbox paypal it give me blank page."}, {"owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "reply_to_user": {"reputation": 288, "user_id": 5241456, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-dyuG5GGKgAc/AAAAAAAAAAI/AAAAAAAAAHw/r4oZO6Om9MA/photo.jpg?sz=128", "display_name": "Muhammad Rahmatullah", "link": "https://stackoverflow.com/users/5241456/muhammad-rahmatullah"}, "edited": false, "score": 0, "creation_date": 1498578102, "post_id": 44783423, "comment_id": 76549788, "body": "@MuhammadRahmatullah what&#39;s the output on the server and on the javascript console?"}, {"owner": {"reputation": 288, "user_id": 5241456, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-dyuG5GGKgAc/AAAAAAAAAAI/AAAAAAAAAHw/r4oZO6Om9MA/photo.jpg?sz=128", "display_name": "Muhammad Rahmatullah", "link": "https://stackoverflow.com/users/5241456/muhammad-rahmatullah"}, "edited": false, "score": 0, "creation_date": 1498579149, "post_id": 44783423, "comment_id": 76550492, "body": "the console output was : <code>Redirected to https:&#47;&#47;www.sandbox.paypal.com&#47;cgi-bin&#47;webscr?amount=1485&amp;bu&zwnj;&#8203;siness=merchant%40ra&zwnj;&#8203;hmat.com&amp;cmd=_xclick&zwnj;&#8203;&amp;invoice=44&amp;item_nam&zwnj;&#8203;e=Rahmat+Books&amp;item_&zwnj;&#8203;number=10&amp;notify_url&zwnj;&#8203;=http%3A%2F%2F0.0.0.&zwnj;&#8203;0%3A3000%2Fhook&amp;quan&zwnj;&#8203;tity=1&amp;return=http%3&zwnj;&#8203;A%2F%2F0.0.0.0%3A300&zwnj;&#8203;0%2Forders.44&amp;upload&zwnj;&#8203;=1</code> Completed 302 Found in 58ms (ActiveRecord: 26.8ms)"}], "tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": true, "score": 1, "last_activity_date": 1498575045, "creation_date": 1498575045, "answer_id": 44783423, "question_id": 44782714, "link": "https://stackoverflow.com/questions/44782714/using-express-checkout-paypal-on-ruby-on-rails-return-blank-page/44783423#44783423", "title": "Using Express Checkout Paypal on Ruby On Rails , Return Blank Page", "body": "<p>respond_to requires you to specify which formats the action will respond to, like </p>\n\n<pre><code>respond_to do |format|\n    format.html { redirect_to .... }\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>format.any(:html, :js) { ... }\n</code></pre>\n\n<p>In your case it doesn't seem like you need to use respond_to</p>\n"}], "owner": {"reputation": 288, "user_id": 5241456, "user_type": "registered", "accept_rate": 64, "profile_image": "https://lh3.googleusercontent.com/-dyuG5GGKgAc/AAAAAAAAAAI/AAAAAAAAAHw/r4oZO6Om9MA/photo.jpg?sz=128", "display_name": "Muhammad Rahmatullah", "link": "https://stackoverflow.com/users/5241456/muhammad-rahmatullah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 395, "favorite_count": 0, "accepted_answer_id": 44783423, "answer_count": 1, "score": 1, "last_activity_date": 1498575045, "creation_date": 1498573201, "question_id": 44782714, "link": "https://stackoverflow.com/questions/44782714/using-express-checkout-paypal-on-ruby-on-rails-return-blank-page", "title": "Using Express Checkout Paypal on Ruby On Rails , Return Blank Page", "body": "<p>i am encountered some problem in my apps .\ni am following tutorial from <a href=\"https://launchschool.com/blog/basic-paypal-checkout-processing-in-rails\" rel=\"nofollow noreferrer\">https://launchschool.com/blog/basic-paypal-checkout-processing-in-rails</a> to Process Payments With Paypal but when my apps redirect to the sandbox paypal it just show a blank page.</p>\n\n<p>Here is my code </p>\n\n<h1>Orders Controller</h1>\n\n<pre><code>def create\n    @order = Order.new(order_params)\n    @order.add_line_items_from_cart(@cart)\n    respond_to do |format|\n    if @order.save\n      redirect_to @order.paypal_url(orders_path(@order))\n    else\n      render :new \n    end\n  end\n</code></pre>\n\n<h1>Order Model</h1>\n\n<pre><code>protect_from_forgery except: [:hook]\n  def hook\n    params.permit! # Permit all Paypal input params\n    status = params[:payment_status]\n    if status == \"Completed\"\n      @order = Order.find params[:invoice]\n      @order.update_attributes notification_params: params, status: status, transaction_id: params[:txn_id], purchased_at: Time.now\n    end\n    render nothing: true\n  end\n</code></pre>\n\n<h1>secret.yml</h1>\n\n<pre><code>development:\n  secret_key_base: 0351c7e4eb70df5503d739c085d7a75dae662a55e95cf257b4a2e3edaa6985623372b7d20fc3ea59fe58d9ec94243e36a7250007ad2d9734b68cf29f90cca682\n  paypal_host: https://www.sandbox.paypal.com\n  app_host: http://0.0.0.0:3000\n</code></pre>\n\n<h1>Routes.rb</h1>\n\n<pre><code>post \"/hook\" =&gt; \"orders#hook\"\npost \"/orders/:id\" =&gt; \"orders#show\"\n</code></pre>\n\n<p>Sorry for the my bad english ..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "port", "telnet"], "comments": [{"owner": {"reputation": 486, "user_id": 7069011, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AfPIn.jpg?s=128&g=1", "display_name": "ThorTL67", "link": "https://stackoverflow.com/users/7069011/thortl67"}, "edited": false, "score": 0, "creation_date": 1498573530, "post_id": 44782696, "comment_id": 76546380, "body": "Looks as though you&#39;re trying to telnet to <code>example.com</code> port 25. If you want to check if port 25 is open from your server. Then you should try your servers DNS instead of example.com :)"}], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 0, "last_activity_date": 1498574262, "creation_date": 1498574262, "answer_id": 44783105, "question_id": 44782696, "link": "https://stackoverflow.com/questions/44782696/telnet-network-is-unreachable/44783105#44783105", "title": "Telnet: Network is unreachable", "body": "<p>if you using ubuntu / debian based</p>\n\n<h2>check your server firewall and allow port 25</h2>\n\n<ul>\n<li>sudo ufw allow 25/tcp</li>\n</ul>\n\n<h2>1. install  <a href=\"https://www.digitalocean.com/community/tutorials/how-to-install-and-configure-postfix-as-a-send-only-smtp-server-on-ubuntu-14-04\" rel=\"nofollow noreferrer\">postfix</a> if you want to build your own smtp server</h2>\n\n<h2>2. other Alternatif</h2>\n\n<ul>\n<li>using gmail account as smtp server in rails , <a href=\"https://launchschool.com/blog/handling-emails-in-rails\" rel=\"nofollow noreferrer\">action mailer with gmail as smtp</a></li>\n<li>or you can register to sendgrid.com as smtp server (not free but can apply testing account for one year trial)</li>\n</ul>\n"}], "owner": {"reputation": 418, "user_id": 4580647, "user_type": "registered", "accept_rate": 70, "profile_image": "https://graph.facebook.com/10200262995855063/picture?type=large", "display_name": "Giancarlo Ben&#237;tez", "link": "https://stackoverflow.com/users/4580647/giancarlo-ben%c3%adtez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2309, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1498574262, "creation_date": 1498573153, "question_id": 44782696, "link": "https://stackoverflow.com/questions/44782696/telnet-network-is-unreachable", "title": "Telnet: Network is unreachable", "body": "<p>I'm new with Ruby on Rails, so I was trying to figure out how to send emails from the server.\nI have followed several tutorial without success, so decided to check the basics and see if port 25 is open, I get the following line:</p>\n\n<pre><code>$ telnet example.com 25\nTrying 93.184.216.34...\nTrying 2606:2800:220:1:248:1893:25c8:1946...\ntelnet: Unable to connect to remote host: Network is unreachable\n</code></pre>\n\n<p>I have read about <code>Conection refused</code> but I can't figure out about <code>unreachable</code> is my port blocked or maybe my ISP?</p>\n\n<p>Any help is useful</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1498573214, "post_id": 44782632, "comment_id": 76546149, "body": "Just to mention, there&#39;s an <code>}</code> additional in your expected ouput."}], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 0, "last_activity_date": 1498574187, "last_edit_date": 1498574187, "creation_date": 1498573381, "answer_id": 44782788, "question_id": 44782632, "link": "https://stackoverflow.com/questions/44782632/manipulate-hash-in-ruby/44782788#44782788", "title": "Manipulate hash in Ruby", "body": "<p>If you plan to have an arbitrarily large list of keys to merge, this is an easily scaleable method: </p>\n\n<pre><code>[\"system\", \"usage\"].each_with_object(myhash) do |key|\n  myhash.merge!(myhash.delete(key))\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 1, "last_activity_date": 1498573744, "last_edit_date": 1498573744, "creation_date": 1498573438, "answer_id": 44782806, "question_id": 44782632, "link": "https://stackoverflow.com/questions/44782632/manipulate-hash-in-ruby/44782806#44782806", "title": "Manipulate hash in Ruby", "body": "<p>Assuming no rails:</p>\n\n<pre><code>hash.reject { |key, _| %w(system usage).include? key }.merge(hash['system']).merge(hash['usage'])\n</code></pre>\n\n<hr>\n\n<p>With active support:</p>\n\n<pre><code>hash.except('system', 'usage').merge(hash['system']).merge(hash['usage'])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1498573796, "post_id": 44782845, "comment_id": 76546590, "body": "Thanks Sergio, always love a low tech version :-), i thought delete would have deleted the whole nested hash, should have tried harder :-("}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 1, "creation_date": 1498574580, "post_id": 44782845, "comment_id": 76547219, "body": "I know, let myself down a bit there really, thanks for the help"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1498573535, "creation_date": 1498573535, "answer_id": 44782845, "question_id": 44782632, "link": "https://stackoverflow.com/questions/44782632/manipulate-hash-in-ruby/44782845#44782845", "title": "Manipulate hash in Ruby", "body": "<p>\"Low-tech\" version :)</p>\n\n<pre><code>h = { ... }\nh.merge!(h.delete('system'))\nh.merge!(h.delete('usage'))\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "is_accepted": false, "score": 1, "last_activity_date": 1498574322, "last_edit_date": 1498574322, "creation_date": 1498573925, "answer_id": 44782968, "question_id": 44782632, "link": "https://stackoverflow.com/questions/44782632/manipulate-hash-in-ruby/44782968#44782968", "title": "Manipulate hash in Ruby", "body": "<p>Assuming that your data has the same structure each time, I might opt for something simple and easy to understand like this:</p>\n\n<pre><code>def manipulate_hash(h)\n  {\n    \"lt\" =&gt; h[\"lt\"],\n    \"c\" =&gt; h[\"c\"],\n    \"pl\" =&gt; h[\"system\"][\"pl\"],\n    \"plv\" =&gt; h[\"system\"][\"plv\"],\n    \"trace\" =&gt; h[\"usage\"][\"trace\"],\n    \"cq\" =&gt; h[\"usage\"][\"cq\"],\n    \"stream\" =&gt; h[\"usage\"][\"stream\"],\n    \"uid\" =&gt; h[\"uid\"],\n    \"pst\" =&gt; h[\"pst\"],\n    \"dur\" =&gt; h[\"dur\"],\n    \"vt\" =&gt; h[\"vt\"]\n  }\nend\n</code></pre>\n\n<p>I chose to make the hash using one big hash literal expression that spans multiple lines.  If you don't like that, you could build it up on multiple lines like this:</p>\n\n<pre><code>def manipulate_hash\n  r = {}\n  r[\"lt\"] = h[\"lt\"]\n  r[\"c\"] = h[\"c\"]\n  ...\n  r\nend\n</code></pre>\n\n<p>You might consider using fetch instead of the <code>[]</code> angle brackets.  That way, you'll get an exception if the expected key is missing from the hash.  For example, replace <code>h[\"lt\"]</code> with <code>h.fetch(\"lt\")</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 1, "last_activity_date": 1498574064, "creation_date": 1498574064, "answer_id": 44783015, "question_id": 44782632, "link": "https://stackoverflow.com/questions/44782632/manipulate-hash-in-ruby/44783015#44783015", "title": "Manipulate hash in Ruby", "body": "<p>A more generic version.</p>\n\n<p>Merge any key that contains a hash:</p>\n\n<pre><code>h = { ... }\n\nhnew = h.inject(h.dup) { |h2, (k, v)|\n  h2.merge!(h2.delete(k)) if v.is_a?(Hash)\n  h2\n}\n</code></pre>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 44782845, "answer_count": 5, "score": 0, "last_activity_date": 1522582520, "creation_date": 1498572995, "last_edit_date": 1522582520, "question_id": 44782632, "link": "https://stackoverflow.com/questions/44782632/manipulate-hash-in-ruby", "title": "Manipulate hash in Ruby", "body": "<p>I have a hash that looks like</p>\n\n<pre><code>{\n \"lt\"=&gt;\"456\",\n \"c\"=&gt;\"123\",\n \"system\"=&gt;{\"pl\"=&gt;\"valid-player-name\", \"plv\"=&gt;\"player_version_1\"},\n \"usage\"=&gt;{\"trace\"=&gt;\"1\", \"cq\"=&gt;\"versionid\", \"stream\"=&gt;\"od\", \n \"uid\"=&gt;\"9\", \"pst\"=&gt;[[\"0\", \"1\", \"10\"]], \"dur\"=&gt;\"0\", \"vt\"=&gt;\"2\"}\n}\n</code></pre>\n\n<p>How can I go about turning it into a hash that looks like</p>\n\n<pre><code>{\n \"lt\"=&gt;\"456\",\n \"c\"=&gt;\"123\",\n \"pl\"=&gt;\"valid-player-name\", \n \"plv\"=&gt;\"player_version_1\",\n \"trace\"=&gt;\"1\", \n \"cq\"=&gt;\"versionid\", \n \"stream\"=&gt;\"od\", \n \"uid\"=&gt;\"9\", \n \"pst\"=&gt;[[\"0\", \"1\", \"10\"]], \"dur\"=&gt;\"0\", \"vt\"=&gt;\"2\"\n}\n</code></pre>\n\n<p>I basically want to get rid of the keys <code>system</code> and <code>usage</code> and keep what's nested inside them</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1498572647, "post_id": 44782294, "comment_id": 76545688, "body": "Your question is unclear. In the title you ask &quot;How to sort a hash in Ruby&quot;. In the question, you write &quot;I have the following hash \u2026&quot;. But in the last sentence, you ask &quot;how can I sort <code>myObject</code>&quot;, but <code>myObject</code> is an array, not a hash. So, are you asking about sorting a hash or an array? In addition, it would also help if you could explain why you weren&#39;t able to find your answer in the Ruby documentation, that way, the Ruby developers can improve the documentation so that it doesn&#39;t happen again."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1498572712, "post_id": 44782406, "comment_id": 76545737, "body": "The only way to know which is more performant when ran on your computer with your dataset is to run it on your computer with your dataset and see which one is more performant. Also, you should define &quot;more performant&quot;, what do you mean? Throughput? Latency? Cold-cache? Warm cache? Steady state? Jitter?"}, {"owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 0, "creation_date": 1498572757, "post_id": 44782406, "comment_id": 76545773, "body": "Using <code>sort!</code> ends up sorting in the wrong direction, from low to high, where I want High to low"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 1, "creation_date": 1498572861, "post_id": 44782406, "comment_id": 76545870, "body": "so follow it with <code>reverse!</code>"}, {"owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "reply_to_user": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "edited": false, "score": 1, "creation_date": 1498572905, "post_id": 44782406, "comment_id": 76545908, "body": "@AnApprentice Using <code>sort!</code> is probably the fastest way. If you meed to reverse the order, hacnge the order of <code>user1</code> and <code>user2</code>."}], "tags": [], "owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "is_accepted": true, "score": 1, "last_activity_date": 1498572988, "last_edit_date": 1498572988, "creation_date": 1498572324, "answer_id": 44782406, "question_id": 44782294, "link": "https://stackoverflow.com/questions/44782294/how-to-sort-an-array-in-ruby-by-points-which-is-more-performant/44782406#44782406", "title": "How to sort an array in Ruby by Points? Which is more performant?", "body": "<p>Just use <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-sort_by-21\" rel=\"nofollow noreferrer\"><code>sort_by!</code></a> on your <code>myObject</code> array:</p>\n\n<pre><code>myObject = []\n\nusers.sort_by { |user| user }.each do |u|\n  myObject &lt;&lt; {\n    user_id: u.id,\n    display_name: u.display_name,\n    points: u.logs.sum(:points)\n  }\nend\n\nmyObject.sort_by! { |user| user[:points] }\n</code></pre>\n\n<p>If you want in reverse order, call <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-reverse-21\" rel=\"nofollow noreferrer\"><code>reverse!</code></a>:</p>\n\n<pre><code>myObject.sort_by! { |user| user[:points] }.reverse!\n</code></pre>\n\n<p>Alternatively, you can sort it by using <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-sort-21\" rel=\"nofollow noreferrer\"><code>sort!</code></a>:</p>\n\n<pre><code>myObject.sort! do |user1, user2|\n  user2[:points] &lt;=&gt; user1[:points]\nend\n</code></pre>\n\n<p>Change the order of the compared objects if you want it in reverse order:</p>\n\n<pre><code>myObject.sort! do |user1, user2|\n  user1[:points] &lt;=&gt; user2[:points]\nend\n</code></pre>\n"}], "owner": {"reputation": 97172, "user_id": 149080, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/685eca46bfebf9233cc276b415a74ddb?s=128&d=identicon&r=PG", "display_name": "AnApprentice", "link": "https://stackoverflow.com/users/149080/anapprentice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 44782406, "answer_count": 1, "score": -1, "last_activity_date": 1566411730, "creation_date": 1498572028, "last_edit_date": 1566411730, "question_id": 44782294, "link": "https://stackoverflow.com/questions/44782294/how-to-sort-an-array-in-ruby-by-points-which-is-more-performant", "title": "How to sort an array in Ruby by Points? Which is more performant?", "body": "<p>I have the following hash being created in my Rails controller:</p>\n\n<pre><code>myObject = []\n....\nusers.each do |u|\n  myObject &lt;&lt; {\n    user_id: u.id,\n    display_name: u.display_name,\n    points: u.logs.sum(:points)\n  }\nend\n</code></pre>\n\n<p>How can I sort myObject by points, High > Low?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 2, "creation_date": 1498572044, "post_id": 44782263, "comment_id": 76545225, "body": "<code>$&lt;</code> is ARGF and <code>*</code> is splat."}, {"owner": {"reputation": 131, "user_id": 5365406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Gz6yW.gif?s=128&g=1", "display_name": "richzli", "link": "https://stackoverflow.com/users/5365406/richzli"}, "reply_to_user": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "edited": false, "score": 0, "creation_date": 1498572114, "post_id": 44782263, "comment_id": 76545287, "body": "What does ARGF mean?"}, {"owner": {"reputation": 5713, "user_id": 846163, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/623857ee8390f91edba65fcac0d152ab?s=128&d=identicon&r=PG", "display_name": "sschmeck", "link": "https://stackoverflow.com/users/846163/sschmeck"}, "edited": false, "score": 1, "creation_date": 1498572223, "post_id": 44782263, "comment_id": 76545367, "body": "Check also <a href=\"https://stackoverflow.com/a/3747135/846163\">stackoverflow.com/a/3747135/846163</a> and run the snippet within irb. The code take the input from STDIN and takes the first two lines into <code>n</code> and <code>a</code>."}, {"owner": {"reputation": 131, "user_id": 5365406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Gz6yW.gif?s=128&g=1", "display_name": "richzli", "link": "https://stackoverflow.com/users/5365406/richzli"}, "edited": false, "score": 0, "creation_date": 1498572263, "post_id": 44782263, "comment_id": 76545406, "body": "Thank you, I will check it out."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1498573327, "post_id": 44782452, "comment_id": 76546234, "body": "More specifically, <code>*</code> invokes <code>ARGF#to_a</code> which is an alias for <a href=\"http://ruby-doc.org/core-2.4.1/ARGF.html#method-i-readlines\" rel=\"nofollow noreferrer\"><code>ARGF#readlines</code></a>, so <code>n, a = *$&lt;</code> is equivalent to <code>n, a = ARGF.readlines</code>"}], "tags": [], "owner": {"reputation": 2546, "user_id": 2603130, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/60f46755895fd7c8bfa4f39d527ba9a8?s=128&d=identicon&r=PG", "display_name": "radubogdan", "link": "https://stackoverflow.com/users/2603130/radubogdan"}, "is_accepted": true, "score": 4, "last_activity_date": 1498572878, "last_edit_date": 1498572878, "creation_date": 1498572465, "answer_id": 44782452, "question_id": 44782263, "link": "https://stackoverflow.com/questions/44782263/what-does-mean-in-ruby/44782452#44782452", "title": "What does *$&lt; mean in Ruby?", "body": "<p><code>$&lt;</code> is ARGF. From ruby's standard docummentation:</p>\n\n<blockquote>\n  <p>ARGF is a stream designed for use in scripts that process files given as command-line arguments or passed in via STDIN.</p>\n</blockquote>\n\n<p>A super good explanation <a href=\"https://robots.thoughtbot.com/rubys-argf\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><code>*</code> is splat operator.</p>\n\n<p>You are assigning to <code>a</code> and <code>n</code> what's inside ARGF/STDIN at that point.</p>\n\n<p>Example:</p>\n\n<pre><code>raducroitoru@dotix ~$ cat a.txt                                         \na\nb\nc\n\nraducroitoru@dotix ~$ cat a.rb                                          \na, n = *$&lt;\nputs \"a is: #{a}\"\nputs \"n is: #{n}\"\n\nraducroitoru@dotix ~$ ruby a.rb a.txt                                   \na is: a\nn is: b\n</code></pre>\n"}], "owner": {"reputation": 131, "user_id": 5365406, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Gz6yW.gif?s=128&g=1", "display_name": "richzli", "link": "https://stackoverflow.com/users/5365406/richzli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 2, "accepted_answer_id": 44782452, "answer_count": 1, "score": 4, "last_activity_date": 1498572878, "creation_date": 1498571950, "question_id": 44782263, "link": "https://stackoverflow.com/questions/44782263/what-does-mean-in-ruby", "title": "What does *$&lt; mean in Ruby?", "body": "<p>I was analyzing my friend's code, and I saw this little snippet:</p>\n\n<pre><code>n,a=*$&lt;\n</code></pre>\n\n<p>I can't figure out what it means - I've searched on many sites, but they don't seem to recognize the special characters.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 631, "user_id": 8157532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bde8f29e12331c4a81c873acfc77cc?s=128&d=identicon&r=PG&f=1", "display_name": "ucpuzz", "link": "https://stackoverflow.com/users/8157532/ucpuzz"}, "edited": false, "score": 0, "creation_date": 1498571671, "post_id": 44781924, "comment_id": 76544882, "body": "I think you have to load your files in order, the file with SixError should be loaded first, the rest next. So try changing your loading order  the following,  %w(.ruby-version .rbenv-vars tmp/restart.txt tmp/caching-dev.txt app/services app/services/errors/six_error.rb, app/services/errors)"}, {"owner": {"reputation": 631, "user_id": 8157532, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64bde8f29e12331c4a81c873acfc77cc?s=128&d=identicon&r=PG&f=1", "display_name": "ucpuzz", "link": "https://stackoverflow.com/users/8157532/ucpuzz"}, "edited": false, "score": 0, "creation_date": 1498573965, "post_id": 44781924, "comment_id": 76546729, "body": "what line in the code is it pointing to when it is throwing this error, &#39;uninitialized constant SixError&#39;"}], "answers": [{"tags": [], "owner": {"reputation": 1337, "user_id": 5422365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52e31b390fd694c2ef039dc1baf59888?s=128&d=identicon&r=PG&f=1", "display_name": "Aschen", "link": "https://stackoverflow.com/users/5422365/aschen"}, "is_accepted": true, "score": 1, "last_activity_date": 1499162193, "creation_date": 1499162193, "answer_id": 44902737, "question_id": 44781924, "link": "https://stackoverflow.com/questions/44781924/autoload-custom-exceptions-files-with-ror/44902737#44902737", "title": "Autoload custom exceptions files with RoR", "body": "<p>Rails is loading class in subdir with a namespace corresponding to the dirname.<br>\nIf you have this structure :<br>\n-app<br>\n--services<br>\n---errors<br>\n----six_errors.rb  </p>\n\n<p>Rails expecting the file <code>six_errors.rb</code> to declare class upon the namespace <code>Errors</code>.  </p>\n\n<p>In your case you should declare all your errors class in a module named <code>Errors</code>.</p>\n\n<pre><code>module Errors\n  class SixError &lt; RuntimeError; end\nend\n</code></pre>\n"}], "owner": {"reputation": 3247, "user_id": 2304517, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Wv4Xe.png?s=128&g=1", "display_name": "Xero", "link": "https://stackoverflow.com/users/2304517/xero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 215, "favorite_count": 0, "accepted_answer_id": 44902737, "answer_count": 1, "score": 0, "last_activity_date": 1499162193, "creation_date": 1498571094, "last_edit_date": 1498572839, "question_id": 44781924, "link": "https://stackoverflow.com/questions/44781924/autoload-custom-exceptions-files-with-ror", "title": "Autoload custom exceptions files with RoR", "body": "<p>In my app/ directory I have a folder <strong>services</strong>. To autoload my files in the service folder, I added 'app/services' in my 'config/spring.rb'</p>\n\n<pre><code>%w(\n  .ruby-version\n  .rbenv-vars\n  tmp/restart.txt\n  tmp/caching-dev.txt\n  app/services\n).each { |path| Spring.watch(path) }\n</code></pre>\n\n<p>It's work fine. But now, I want to create a sub dir for my custom exceptions (in app/services/errors/). But when I try to add a new line in my spring.rb :</p>\n\n<pre><code>%w(\n      .ruby-version\n      .rbenv-vars\n      tmp/restart.txt\n      tmp/caching-dev.txt\n      app/services\n      app/services/errors\n    ).each { |path| Spring.watch(path) }\n</code></pre>\n\n<p>It's not working, I got some :</p>\n\n<pre><code>NameError:\n       uninitialized constant SixError\n</code></pre>\n\n<p>Here my custom error file (app/services/errors/six_error.rb):</p>\n\n<pre><code>class SixError &lt; RuntimeError\nend\n\nclass NilTokenError &lt; SixError\nend\n\nclass SixRequestFailed &lt; SixError\nend\n\nclass NoAliasRequestPendingError &lt; SixError\nend\n\nclass AmountLessThanZeroError &lt; SixError\nend\n\nclass NilAliasError &lt; SixError\nend\n</code></pre>\n\n<p>And this is how I called this :</p>\n\n<pre><code>SixError::SixRequestFailed\n</code></pre>\n"}]