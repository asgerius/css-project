[{"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485390884, "post_id": 41864031, "comment_id": 70911933, "body": "I&#39;ve never seen the need for a <code>unextend</code> (<code>retract</code>?) method but this is a good implementation of that. Only quibble is that should be <code>ModuleManager</code> to follow Ruby naming conventions."}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": true, "score": 4, "last_activity_date": 1485390248, "last_edit_date": 1495535365, "creation_date": 1485389630, "answer_id": 41864031, "question_id": 41863613, "link": "https://stackoverflow.com/questions/41863613/overriding-module-mixin-behavior-by-mixing-in-another-module/41864031#41864031", "title": "Overriding Module Mixin Behavior by Mixing in another Module", "body": "<p>I adapted the answer at your other question at <a href=\"https://stackoverflow.com/questions/41861791/adapter-pattern-in-ruby-accessing-your-instance-variables/41863318#41863318\">Adapter Pattern in ruby: Accessing Your Instance Variables</a></p>\n\n<pre><code>module Dog\n  def speak\n    puts \"woof woof\"\n  end\nend\n\nmodule Cat\n  def speak\n    puts \"meow\"\n  end\nend\n\nmodule Module_manager\n  attr_accessor :name\n  def extend mod\n    @ancestors ||= {}\n    return if @ancestors[mod]\n    remove @name if @name\n    @name = mod\n    mod_clone = mod.clone\n    @ancestors[mod] = mod_clone\n    super mod_clone\n  end\n\n  def remove mod\n    mod_clone = @ancestors[mod]\n    mod_clone.instance_methods.each {|m| mod_clone.module_eval {remove_method m } }\n    @ancestors[mod] = nil\n  end\nend\n\nclass Animal\n  include Module_manager\nend\n\nanimal = Animal.new\n\nanimal.extend(Cat)\nanimal.speak # meow\n\nanimal.extend(Dog)\nanimal.speak # woof woof\n\nanimal.extend(Cat)\nanimal.speak # meow\n\nanimal.extend(Dog)\nanimal.speak # woof woof\n\nanimal.extend(Cat)\nanimal.speak # meow\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1485440676, "post_id": 41865204, "comment_id": 70932886, "body": "OP wanted to experiment with the adapter pattern in Ruby"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1485441221, "post_id": 41865204, "comment_id": 70933275, "body": "You&#39;re answer does achieve the same behavior for the exact code sample I provided, so it is a solid answer.  However your answer limits an <code>animal</code> to responding in the exact order of how a <code>cat</code> speaks and then how a <code>dog</code> speaks.  Example: pretend there were 5 different ways an animal can <code>speak</code>.  Instead of the user just cycling through those different ways of speaking, I want to give the client the ability to pick and choose which way it speaks.  Hopefully that makes sense.  Again though: I did not specify this in the original question so technically your answer is sufficient."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485449900, "post_id": 41865204, "comment_id": 70939654, "body": "Neil, that was my suspicion."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1485423599, "last_edit_date": 1485423599, "creation_date": 1485399163, "answer_id": 41865204, "question_id": 41863613, "link": "https://stackoverflow.com/questions/41863613/overriding-module-mixin-behavior-by-mixing-in-another-module/41865204#41865204", "title": "Overriding Module Mixin Behavior by Mixing in another Module", "body": "<p>I'm not sure if the following answers your question, but it's a simpler way to achieve the same behaviour.</p>\n\n<pre><code>class Animal\n  include Dog\n  alias :dog_speak :speak\n  include Cat\n  alias :cat_speak :speak\n  private :dog_speak, :cat_speak\n\n  def initialize\n    @speak_to_me = [:cat_speak, :dog_speak].cycle\n  end  \n\n  def speak\n    send @speak_to_me.next\n  end\nend\n\nanimal = Animal.new\n  #=&gt; #&lt;Animal:0x007fe3a222b0e0 @speak_to_me=#&lt;Enumerator:\n  #     [:cat_speak, :dog_speak]:cycle&gt;&gt; \n\nanimal.speak #-&gt; meow\nanimal.speak #-&gt; woof woof\nanimal.speak #-&gt; meow\nanimal.speak #-&gt; woof woof\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 41864031, "answer_count": 2, "score": 4, "last_activity_date": 1485738232, "creation_date": 1485387071, "last_edit_date": 1485387611, "question_id": 41863613, "link": "https://stackoverflow.com/questions/41863613/overriding-module-mixin-behavior-by-mixing-in-another-module", "title": "Overriding Module Mixin Behavior by Mixing in another Module", "body": "<p>I want to be able to toggle back and forth how an instance responds to a message.  I want to do that by mixing in a module, and then later mixing in another module to override that behavior.</p>\n\n<p>Example:</p>\n\n<pre><code>module Dog\n  def speak\n    puts \"woof woof\"\n  end\nend\n\nmodule Cat\n  def speak\n    puts \"meow\"\n  end\nend\n\nclass Animal\nend\n</code></pre>\n\n<p>Now I want to toggle, back and forth, how an instance of <code>Animal</code> responds to the <code>speak</code> message:</p>\n\n<pre><code>animal = Animal.new\n\nanimal.extend(Cat)\nanimal.speak\n\nanimal.extend(Dog)\nanimal.speak\n\nanimal.extend(Cat)\nanimal.speak\n\nanimal.extend(Dog)\nanimal.speak\n\nanimal.extend(Cat)\nanimal.speak\n</code></pre>\n\n<p>I would expect this code to output the following:</p>\n\n<pre><code>meow\nwoof woof\nmeow\nwoof woof\nmeow\n</code></pre>\n\n<p>Instead it outputs like this:</p>\n\n<pre><code>meow\nwoof woof\nwoof woof\nwoof woof\nwoof woof\n</code></pre>\n\n<p>Any tips on how I can get this to work as expected?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sidekiq"], "answers": [{"tags": [], "owner": {"reputation": 17782, "user_id": 1494519, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af54a0871600db7fbdbb5c558a6e29a3?s=128&d=identicon&r=PG", "display_name": "Mike Perham", "link": "https://stackoverflow.com/users/1494519/mike-perham"}, "is_accepted": true, "score": 2, "last_activity_date": 1485404310, "creation_date": 1485404310, "answer_id": 41866814, "question_id": 41863483, "link": "https://stackoverflow.com/questions/41863483/sidekiq-best-practice-when-try-to-destroy-object-in-perform-method/41866814#41866814", "title": "Sidekiq best practice when try to destroy object in perform method", "body": "<p>If they both try to destroy the same database record, yes, there can be a race condition.  Typically you rescue and ignore the error.</p>\n"}], "owner": {"reputation": 3133, "user_id": 1883793, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/33ed6dd2dcb89dab186d5b9dfe8ae9b2?s=128&d=identicon&r=PG", "display_name": "user1883793", "link": "https://stackoverflow.com/users/1883793/user1883793"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 41866814, "answer_count": 1, "score": 0, "last_activity_date": 1485404310, "creation_date": 1485386371, "question_id": 41863483, "link": "https://stackoverflow.com/questions/41863483/sidekiq-best-practice-when-try-to-destroy-object-in-perform-method", "title": "Sidekiq best practice when try to destroy object in perform method", "body": "<p>Is it safe to call AC destroy in side perform method? I have this method and it will loop through devices and send notification, if failed it will destroy that device in rescue.</p>\n\n<p>Is it possible one thread A paused right after this line \"devices = Device.where(id: device_ids)\" and thread B destroyed the same device object paused by Thread A, when thread A resumes, \"devices\" would be already destroyed? How to deal with this issue></p>\n\n<pre><code>def perform(device_ids, message)\n  devices = Device.where(id: device_ids)\n  devices.each do |device|\n    begin\n      device.send_notification(message)\n    rescue Aws::SNS::Errors::EndpointDisabled\n      device.destroy\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1485388194, "post_id": 41863370, "comment_id": 70911178, "body": "It looks like you have the same locales in 2 files. Have you tried only having them in one?"}, {"owner": {"reputation": 49, "user_id": 4238184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DNNvMIOMetI/AAAAAAAAAAI/AAAAAAAAIno/R1Kr1R_RQdU/photo.jpg?sz=128", "display_name": "Matt Krueger", "link": "https://stackoverflow.com/users/4238184/matt-krueger"}, "reply_to_user": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "edited": false, "score": 0, "creation_date": 1485393606, "post_id": 41863370, "comment_id": 70912613, "body": "I had tried having them only in one with the same result. Thanks for commenting though; it ended up that the below answer + correcting my error message handling in registrations controller was the fix."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 4238184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DNNvMIOMetI/AAAAAAAAAAI/AAAAAAAAIno/R1Kr1R_RQdU/photo.jpg?sz=128", "display_name": "Matt Krueger", "link": "https://stackoverflow.com/users/4238184/matt-krueger"}, "edited": false, "score": 0, "creation_date": 1485393540, "post_id": 41863909, "comment_id": 70912598, "body": "Thanks, John - that was a major part of my eventual fix. Adding a string at that locale and then also my passing of the error was incorrect - it should be resource.errors.messages.keys.each {|x| set_flash_message :error, x} instead of resource.errors.full_messages.each {|x| set_flash_message :error, x} - thanks again!"}], "tags": [], "owner": {"reputation": 1228, "user_id": 4497621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2d140bf5c97a7ee616b0f21189fa9373?s=128&d=identicon&r=PG&f=1", "display_name": "John Hayes-Reed", "link": "https://stackoverflow.com/users/4497621/john-hayes-reed"}, "is_accepted": false, "score": 1, "last_activity_date": 1485390017, "last_edit_date": 1485390017, "creation_date": 1485388923, "answer_id": 41863909, "question_id": 41863370, "link": "https://stackoverflow.com/questions/41863370/how-to-prevent-translation-missing-error-using-devise-with-custom-registration/41863909#41863909", "title": "How to prevent &quot;translation missing&quot; error using Devise with custom registrations controller?", "body": "<p>Yes you are definately going to get that error, look at the locale paths it gives in the errors:</p>\n\n<pre><code>en.devise.registrations.customer.Invite\n</code></pre>\n\n<p>and</p>\n\n<pre><code>en.devise.registrations.customer.Password\n</code></pre>\n\n<p>Now follow your locale indent paths down, and you have no Password or Invite definition inside of the en.devise.registrations.customer:</p>\n\n<pre><code>en:\n  devise:\n    registrations:\n      customer:\n        uh oh! no pasword!\n</code></pre>\n\n<p>So it has no locale to provide. So your solutions are as follows:</p>\n\n<ol>\n<li>Make a locale at that path</li>\n<li>Make Devise use a different locale for displaying the error message.</li>\n</ol>\n\n<p>for further reading and to get more to grips with how I18n works: <a href=\"http://guides.rubyonrails.org/i18n.html\" rel=\"nofollow noreferrer\">Take a look at the official rails api</a> and <a href=\"https://github.com/plataformatec/devise#i18n\" rel=\"nofollow noreferrer\">the I18n section of the devise gem repo readme</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 49, "user_id": 4238184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DNNvMIOMetI/AAAAAAAAAAI/AAAAAAAAIno/R1Kr1R_RQdU/photo.jpg?sz=128", "display_name": "Matt Krueger", "link": "https://stackoverflow.com/users/4238184/matt-krueger"}, "is_accepted": false, "score": 0, "last_activity_date": 1485393891, "creation_date": 1485393891, "answer_id": 41864562, "question_id": 41863370, "link": "https://stackoverflow.com/questions/41863370/how-to-prevent-translation-missing-error-using-devise-with-custom-registration/41864562#41864562", "title": "How to prevent &quot;translation missing&quot; error using Devise with custom registrations controller?", "body": "<p>Final code in case it helps folks who have a similar issue:</p>\n\n<p>Fixed create method in the registrations controller to get the message key of the errors:</p>\n\n<pre><code>def create\n    build_resource(sign_up_params)\n\n    resource.invite_url_param = resource.email.split(\"@\").first.tr(\".\", \"\")\n\n    resource.save\n    yield resource if block_given?\n    if resource.persisted?\n      if resource.referred_by\n        unless Invite.find_by_receiver_email(resource.email)\n          if Customer.find_by_invite_url_param(resource.referred_by)\n            @invite = Invite.new(receiver_email: resource.email)\n            @invite.customer = Customer.find_by_invite_url_param(resource.referred_by)\n            @invite.save\n          end\n        end\n      end\n      unless SaverGuest.find_by_email(resource.email)\n        CustomerMailer.signup_bill(resource).deliver\n      end\n      if resource.active_for_authentication?\n        set_flash_message! :notice, :signed_up\n        sign_up(resource_name, resource)\n        respond_with resource, location: after_sign_up_path_for(resource)\n      else\n        set_flash_message! :notice, :\"signed_up_but_#{resource.inactive_message}\"\n        expire_data_after_sign_in!\n        respond_with resource, location: after_inactive_sign_up_path_for(resource)\n      end\n    else\n      clean_up_passwords resource\n      resource.errors.messages.keys.each {|x| set_flash_message :error, x}\n      redirect_to after_sign_up_path_for(resource)\n    end\n  end\n</code></pre>\n\n<p>with <code>resource.errors.messages.keys.each {|x| set_flash_message :error, x}</code> being the key part.</p>\n\n<p>And then, as John suggested, I needed to have strings at the correct nested locale in the config/locales/devise.en.yml file like so:</p>\n\n<pre><code>en:\n  devise:\n    registrations:\n      customer:\n        invite_url_param: \"That email has already been used - please try again.\"\n        email: \"That email has already been used - please try again.\"\n        password: \"Password is too short (minimum is 6 characters)\"\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 4238184, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-DNNvMIOMetI/AAAAAAAAAAI/AAAAAAAAIno/R1Kr1R_RQdU/photo.jpg?sz=128", "display_name": "Matt Krueger", "link": "https://stackoverflow.com/users/4238184/matt-krueger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3705, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1485393891, "creation_date": 1485385827, "last_edit_date": 1485386398, "question_id": 41863370, "link": "https://stackoverflow.com/questions/41863370/how-to-prevent-translation-missing-error-using-devise-with-custom-registration", "title": "How to prevent &quot;translation missing&quot; error using Devise with custom registrations controller?", "body": "<p>I've tried everything but keep getting \"translation missing\" text in my flash error on sign up using Devise.</p>\n\n<p>Here is some context:</p>\n\n<ul>\n<li>I am using Devise for authentication. </li>\n<li>Instead of \"User\", I created a \"Customer\" model.</li>\n<li>I wanted to add some attributes to the Customer model, so I customized the Devise Registrations controller. I have specified that in Routes.</li>\n<li>One of the attributes (invite_url_param) has validation in the Customer model for presence and uniqueness.</li>\n</ul>\n\n<p>Here's the exact error text I'm getting in the flash message:</p>\n\n<pre><code>translation missing: en.devise.registrations.customer.Invite url param That email has already been used - please try again\n</code></pre>\n\n<p>I want instead for the error to read: \"That email has already been used - please try again\" - so without the translation missing part.</p>\n\n<p>But I can't figure out how to get rid of the \"translation missing: en.devise.registrations.customer.Invite url param\".</p>\n\n<p>It's not specific to the invite_url_param either, if I try to create a customer with a password that's too short, I get this error text:</p>\n\n<pre><code>translation missing: en.devise.registrations.customer.Password Password is too short (minimum is 6 characters)\n</code></pre>\n\n<p>Here's my Registrations controller:</p>\n\n<pre><code>class RegistrationsController &lt; DeviseController\n  prepend_before_action :require_no_authentication, only: [:new, :create, :cancel]\n  prepend_before_action :authenticate_scope!, only: [:edit, :update, :destroy]\n  prepend_before_action :set_minimum_password_length, only: [:new, :edit]\n\n  # GET /resource/sign_up\n  def new\n    build_resource({})\n    yield resource if block_given?\n    respond_with resource\n  end\n\n  # POST /resource\n  def create\n    build_resource(sign_up_params)\n\n    resource.invite_url_param = resource.email.split(\"@\").first.tr(\".\", \"\")\n\n    if resource.referred_by\n      unless Invite.find_by_receiver_email(resource.email)\n        if Customer.find_by_invite_url_param(resource.referred_by)\n          @invite = Invite.new(receiver_email: resource.email)\n          @invite.customer = Customer.find_by_invite_url_param(resource.referred_by)\n          @invite.save\n        end\n      end\n    end\n\n    resource.save\n    yield resource if block_given?\n    if resource.persisted?\n      unless SaverGuest.find_by_email(resource.email)\n        CustomerMailer.signup_bill(resource).deliver\n      end\n      if resource.active_for_authentication?\n        set_flash_message! :notice, :signed_up\n        sign_up(resource_name, resource)\n        respond_with resource, location: after_sign_up_path_for(resource)\n      else\n        set_flash_message! :notice, :\"signed_up_but_#{resource.inactive_message}\"\n        expire_data_after_sign_in!\n        respond_with resource, location: after_inactive_sign_up_path_for(resource)\n      end\n    else\n      clean_up_passwords resource\n      resource.errors.full_messages.each {|x| set_flash_message :error, x}\n      redirect_to after_sign_up_path_for(resource)\n    end\n  end\n\n  # GET /resource/edit\n  def edit\n    # render :edit\n  end\n\n  # PUT /resource\n  # We need to use a copy of the resource because we don't want to change\n  # the current user in place.\n  def update\n    self.resource = resource_class.to_adapter.get!(send(:\"current_#{resource_name}\").to_key)\n    prev_unconfirmed_email = resource.unconfirmed_email if resource.respond_to?(:unconfirmed_email)\n\n    resource_updated = update_resource(resource, account_update_params)\n    yield resource if block_given?\n    if resource_updated\n      if is_flashing_format?\n        flash_key = update_needs_confirmation?(resource, prev_unconfirmed_email) ?\n          :update_needs_confirmation : :updated\n        set_flash_message :notice, flash_key\n      end\n      bypass_sign_in resource, scope: resource_name\n      respond_with resource, location: after_update_path_for(resource)\n    else\n      # clean_up_passwords resource\n      # set_minimum_password_length\n      flash[:error] = \"That link is already taken\"\n      redirect_to invite_path\n    end\n  end\n\n  # DELETE /resource\n  def destroy\n    resource.destroy\n    Devise.sign_out_all_scopes ? sign_out : sign_out(resource_name)\n    set_flash_message! :notice, :destroyed\n    yield resource if block_given?\n    respond_with_navigational(resource){ redirect_to after_sign_out_path_for(resource_name) }\n  end\n\n  # GET /resource/cancel\n  # Forces the session data which is usually expired after sign\n  # in to be expired now. This is useful if the user wants to\n  # cancel oauth signing in/up in the middle of the process,\n  # removing all OAuth session data.\n  def cancel\n    expire_data_after_sign_in!\n    redirect_to new_registration_path(resource_name)\n  end\n\n  protected\n\n  def update_needs_confirmation?(resource, previous)\n    resource.respond_to?(:pending_reconfirmation?) &amp;&amp;\n      resource.pending_reconfirmation? &amp;&amp;\n      previous != resource.unconfirmed_email\n  end\n\n  # By default we want to require a password checks on update.\n  # You can overwrite this method in your own RegistrationsController.\n  def update_resource(resource, params)\n    resource.update_without_password(params)\n  end\n\n  # Build a devise resource passing in the session. Useful to move\n  # temporary session data to the newly created user.\n  def build_resource(hash=nil)\n    self.resource = resource_class.new_with_session(hash || {}, session)\n  end\n\n  # Signs in a user on sign up. You can overwrite this method in your own\n  # RegistrationsController.\n  def sign_up(resource_name, resource)\n    sign_in(resource_name, resource)\n  end\n\n  # The path used after sign up. You need to overwrite this method\n  # in your own RegistrationsController.\n  def after_sign_up_path_for(resource)\n    stored_location_for(:customer) || root_path\n  end\n\n  # The path used after sign up for inactive accounts. You need to overwrite\n  # this method in your own RegistrationsController.\n  def after_inactive_sign_up_path_for(resource)\n    scope = Devise::Mapping.find_scope!(resource)\n    router_name = Devise.mappings[scope].router_name\n    context = router_name ? send(router_name) : self\n    context.respond_to?(:root_path) ? context.root_path : \"/\"\n  end\n\n  # The default url to be used after updating a resource. You need to overwrite\n  # this method in your own RegistrationsController.\n  def after_update_path_for(resource)\n    stored_location_for(:customer) || root_path\n  end\n\n  # Authenticates the current scope and gets the current resource from the session.\n  def authenticate_scope!\n    send(:\"authenticate_#{resource_name}!\", force: true)\n    self.resource = send(:\"current_#{resource_name}\")\n  end\n\n  def sign_up_params\n    params.require(:customer).permit(:first_name, :email, :password, :referred_by)\n  end\n\n  def account_update_params\n    params.require(:customer).permit(:invite_url_param)\n  end\n\n  def translation_scope\n    'devise.registrations'\n  end\nend\n</code></pre>\n\n<p>Here's my Customer model:</p>\n\n<pre><code>class Customer &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n   has_many :invites\n\n   validates :invite_url_param, presence: true, uniqueness: true\nend\n</code></pre>\n\n<p>Here's my config/locales/devise.en.yml file:</p>\n\n<pre><code># Additional translations at https://github.com/plataformatec/devise/wiki/I18n\n\nen:\n  devise:\n    confirmations:\n      confirmed: \"Your email address has been successfully confirmed.\"\n      send_instructions: \"You will receive an email with instructions for how to confirm your email address in a few minutes.\"\n      send_paranoid_instructions: \"If your email address exists in our database, you will receive an email with instructions for how to confirm your email address in a few minutes.\"\n    failure:\n      already_authenticated: \"You are already signed in.\"\n      inactive: \"Your account is not activated yet.\"\n      invalid: \"Invalid %{authentication_keys} or password.\"\n      locked: \"Your account is locked.\"\n      last_attempt: \"You have one more attempt before your account is locked.\"\n      not_found_in_database: \"Invalid %{authentication_keys} or password.\"\n      timeout: \"Your session expired. Please sign in again to continue.\"\n      unauthenticated: \"You need to sign in or sign up before continuing.\"\n      unconfirmed: \"You have to confirm your email address before continuing.\"\n    mailer:\n      confirmation_instructions:\n        subject: \"Confirmation instructions\"\n      reset_password_instructions:\n        subject: \"Reset password instructions\"\n      unlock_instructions:\n        subject: \"Unlock instructions\"\n      password_change:\n        subject: \"Password Changed\"\n    omniauth_callbacks:\n      failure: \"Could not authenticate you from %{kind} because \\\"%{reason}\\\".\"\n      success: \"Successfully authenticated from %{kind} account.\"\n    passwords:\n      no_token: \"You can't access this page without coming from a password reset email. If you do come from a password reset email, please make sure you used the full URL provided.\"\n      send_instructions: \"You will receive an email with instructions on how to reset your password in a few minutes.\"\n      send_paranoid_instructions: \"If your email address exists in our database, you will receive a password recovery link at your email address in a few minutes.\"\n      updated: \"Your password has been changed successfully. You are now signed in.\"\n      updated_not_active: \"Your password has been changed successfully.\"\n    registrations:\n      destroyed: \"Bye! Your account has been successfully cancelled. We hope to see you again soon.\"\n      signed_up: \"\"\n      signed_up_but_inactive: \"You have signed up successfully. However, we could not sign you in because your account is not yet activated.\"\n      signed_up_but_locked: \"You have signed up successfully. However, we could not sign you in because your account is locked.\"\n      signed_up_but_unconfirmed: \"A message with a confirmation link has been sent to your email address. Please follow the link to activate your account.\"\n      update_needs_confirmation: \"You updated your account successfully, but we need to verify your new email address. Please check your email and follow the confirm link to confirm your new email address.\"\n      updated: \"\"\n      customer:\n        invite_url_param:\n          taken: \"\"\n          blank: \"\"\n    sessions:\n      signed_in: \"\"\n      signed_out: \"\"\n      already_signed_out: \"Signed out successfully.\"\n    unlocks:\n      send_instructions: \"You will receive an email with instructions for how to unlock your account in a few minutes.\"\n      send_paranoid_instructions: \"If your account exists, you will receive an email with instructions for how to unlock it in a few minutes.\"\n      unlocked: \"Your account has been unlocked successfully. Please sign in to continue.\"\n  errors:\n    messages:\n      already_confirmed: \"was already confirmed, please try signing in\"\n      confirmation_period_expired: \"needs to be confirmed within %{period}, please request a new one\"\n      expired: \"has expired, please request a new one\"\n      not_found: \"not found\"\n      not_locked: \"was not locked\"\n      not_saved:\n        one: \"1 error prohibited this %{resource} from being saved:\"\n        other: \"%{count} errors prohibited this %{resource} from being saved:\"\n      taken: \"Please try again\"\n  activerecord:\n    errors:\n      models:\n        customer:\n          attributes:\n            password:\n              too_short: \"Password is too short (minimum is %{count} characters)\"\n            email:\n              taken: \"That email has already been used - please try again.\"\n            invite_url_param:\n              taken: \"That email has already been used - please try again.\"\n              blank: \"can't really happen\"\n</code></pre>\n\n<p>And here's my config/locales/en.yml file where I think the end of that error text is getting picked up:</p>\n\n<pre><code>en:\n  activerecord:\n    errors:\n      models:\n        customer:\n          attributes:\n            password:\n              too_short: \"Password is too short (minimum is %{count} characters)\"\n            email:\n              taken: \"That email has already been used - please try again.\"\n            invite_url_param:\n              taken: \"That email has already been used - please try again.\"\n              blank: \"can't really happen\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 533, "user_id": 121618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2819F.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/121618/jill"}, "edited": false, "score": 0, "creation_date": 1485383231, "post_id": 41862808, "comment_id": 70909411, "body": "the home tag was my try to use another route...it didn&#39;t work; the code stated that an article with id=home not found"}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 1, "creation_date": 1485383319, "post_id": 41862808, "comment_id": 70909456, "body": "shouldn&#39;t it be <code>index.html.erb</code> ?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1485383361, "post_id": 41862808, "comment_id": 70909473, "body": "How about a much more usable title for your question?"}, {"owner": {"reputation": 533, "user_id": 121618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2819F.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/121618/jill"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485383903, "post_id": 41862808, "comment_id": 70909717, "body": "@theTinMan done"}], "answers": [{"comments": [{"owner": {"reputation": 533, "user_id": 121618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2819F.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/121618/jill"}, "edited": false, "score": 0, "creation_date": 1485383785, "post_id": 41862889, "comment_id": 70909679, "body": "thank you! huge help.  kept reading over the tutorials and not catching that detail"}], "tags": [], "owner": {"reputation": 1253, "user_id": 704515, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2f563d99bc6daa3bc4223274c7578f70?s=128&d=identicon&r=PG", "display_name": "Viktor Nonov", "link": "https://stackoverflow.com/users/704515/viktor-nonov"}, "is_accepted": true, "score": 0, "last_activity_date": 1485383472, "creation_date": 1485383472, "answer_id": 41862889, "question_id": 41862808, "link": "https://stackoverflow.com/questions/41862808/ruby-on-rails-tutorialstuck-on-listing-all-articles/41862889#41862889", "title": "ruby on rails tutorial:stuck on listing all articles", "body": "<p>Rename index.html to index.html.erb so the embedded ruby can be interpreted.</p>\n"}], "owner": {"reputation": 533, "user_id": 121618, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2819F.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/121618/jill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 1, "accepted_answer_id": 41862889, "answer_count": 1, "score": 1, "last_activity_date": 1485383881, "creation_date": 1485383162, "last_edit_date": 1485383881, "question_id": 41862808, "link": "https://stackoverflow.com/questions/41862808/ruby-on-rails-tutorialstuck-on-listing-all-articles", "title": "ruby on rails tutorial:stuck on listing all articles", "body": "<p>ruby on rails tutorial: <a href=\"http://guides.rubyonrails.org/getting_started.html#listing-all-articles\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/getting_started.html#listing-all-articles</a></p>\n\n<p>I'm following the directions, but the template is not rendering; </p>\n\n<p>I did try copy and pasting multiple times.\nplease help; I'm sure it's a small configuration thing.  everything up until now in the tutorial works fine.\n(can show an individual article, and create one)</p>\n\n<p>ps: using ruby 2.3:</p>\n\n<pre><code>Jills-MacBook-Pro:blog jsinger$ ruby -v\nruby 2.3.3p222 (2016-11-21 revision 56859) [x86_64-darwin14]\n</code></pre>\n\n<p>the html looks like:  </p>\n\n<pre><code>Listing articles\n\n&lt;% @articles.each do |article| %&gt; &lt;% end %&gt;\nTitle   Text\n&lt;%= article.title %&gt;    &lt;%= article.text %&gt;\n</code></pre>\n\n<p>(I have two articles saved)</p>\n\n<pre><code>my code is: index.html: (in app/views/articles)\n\n&lt;h1&gt;Listing articles&lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;tr&gt;\n    &lt;th&gt;Title&lt;/th&gt;\n    &lt;th&gt;Text&lt;/th&gt;\n  &lt;/tr&gt;\n&lt;% @articles.each do |article| %&gt;\n    &lt;tr&gt;\n      &lt;td&gt;&lt;%= article.title %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= article.text %&gt;&lt;/td&gt;\n    &lt;/tr&gt;\n&lt;% end %&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>controller: (blog/app/controllers/application_controller.rb)</p>\n\n<pre><code>    class ArticlesController &lt; ApplicationController\n  def index\n    @articles = Article.all\n  end\n\n  def show\n    @article = Article.find(params[:id]);\n  end\n\n  def home\n    @articles = Article.all\n  end\n\n  def new\n  end\n\n  def create\n\n    @article = Article.new(article_params)\n\n    @article.save\n    redirect_to @article\n  end\n\n  private\n    def article_params\n      params.require(:article).permit(:title,:text)\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "activerecord", "rack", "telegram-bot"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485380991, "post_id": 41862000, "comment_id": 70908322, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages. You need to help us help you. Your question is not well defined. What have you tried? Show us the minimum code to demonstrate it. Currently we&#39;d have to define things in broad terms which leave too much room for interpretation. Imagine someone walked into a room with your question on a piece of paper, handed it to you and walked away. What would you need to see? What questions would you ask them? Then put that into your question."}, {"owner": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485381697, "post_id": 41862000, "comment_id": 70908690, "body": "@theTinMan Thank you, I understand my question is really unclear, hope this chunk of code will help"}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1485383275, "last_edit_date": 1485383275, "creation_date": 1485382575, "answer_id": 41862672, "question_id": 41862000, "link": "https://stackoverflow.com/questions/41862000/task-for-telegram-bot/41862672#41862672", "title": "Task for telegram bot", "body": "<p>You don't tell us what datatype your <code>starts_at</code> field is, but odds are really good that you'll almost never find an instant where <code>starts_at</code> is equal to <code>Time.now</code> so</p>\n\n<pre><code>if starts_at == Time.now\n</code></pre>\n\n<p>will usually fail.</p>\n\n<p><code>Time.now</code> has a granularity well beyond a second. This is from the <a href=\"http://ruby-doc.org/core-2.4.0/Time.html\" rel=\"nofollow noreferrer\">Time class documentation</a>:</p>\n\n<blockquote>\n  <p>All times may have fraction. Be aware of this fact when comparing times with\n  each other -- times that are apparently equal when displayed may be different\n  when compared.</p>\n</blockquote>\n\n<p>and from the <a href=\"http://ruby-doc.org/core-2.4.0/Time.html#method-i-to_f\" rel=\"nofollow noreferrer\"><code>Time#to_f</code> documentation</a>:</p>\n\n<pre><code>t = Time.now\n\"%10.5f\" % t.to_f   #=&gt; \"1270968744.77658\"\nt.to_i              #=&gt; 1270968744\n</code></pre>\n\n<p>If you're using a DateTime or Time field it's going to be very hard to match that microsecond. Instead, you need to change your code from using <code>==</code> to <code>&lt;=</code> which will trigger whenever <code>start_time</code> is less than or equal to <code>Time.now</code>, assuming it's a compatible field of course.</p>\n\n<p>Change:</p>\n\n<pre><code>if starts_at == Time.now\n</code></pre>\n\n<p>to:</p>\n\n<pre><code>if starts_at &lt;= Time.now\n</code></pre>\n\n<p>and it should work better.</p>\n\n<p>Alternately, you can make your <code>starts_at</code> field be an integer or fixnum and then change the values in it to integers, then compare using <code>Time#to_i</code> which results in just the seconds, not the sub-seconds:</p>\n\n<pre><code>[1] (pry) main: 0&gt; foo = Time.now\n2017-01-25 15:21:08 -0700\n[2] (pry) main: 0&gt; foo.to_f\n1485382868.014835\n[3] (pry) main: 0&gt; foo.to_i\n1485382868\n</code></pre>\n\n<p>But you'll still want to use <code>&lt;=</code> instead of <code>==</code>.</p>\n\n<p>Here's something to mull over:</p>\n\n<pre><code>foo = Time.now\nbar = Time.now\nfoo # =&gt; 2017-01-25 15:25:42 -0700\nbar # =&gt; 2017-01-25 15:25:42 -0700\nfoo.to_f # =&gt; 1485383142.157932\nbar.to_f # =&gt; 1485383142.1579342\nfoo.to_i # =&gt; 1485383142\nbar.to_i # =&gt; 1485383142\n</code></pre>\n\n<p>Even at full-speed, Ruby still returns a different time for <code>foo</code> vs. <code>bar</code>, and in that gap your code would miss firing. <code>to_i</code> gives you a one-second granularity but that's still not enough, hence the need for <code>&lt;=</code>.</p>\n"}], "owner": {"reputation": 35, "user_id": 5422842, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/481281de1a8909a0d772c77874d552b7?s=128&d=identicon&r=PG&f=1", "display_name": "SumLare", "link": "https://stackoverflow.com/users/5422842/sumlare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485383275, "creation_date": 1485379786, "last_edit_date": 1485382012, "question_id": 41862000, "link": "https://stackoverflow.com/questions/41862000/task-for-telegram-bot", "title": "Task for telegram bot", "body": "<p>I wrote a telegram bot on ruby with the help of rack. My questions is what can help me do this task. I need bot to send one message when starts_at field of my <code>activerecord</code> object will be equal to now. Basically I need to perform this task all the time so it monitor my database and send this message. I thought about something like <code>delayed_job</code>, don't know how it can help me to achieve my goal.</p>\n\n<p>I need to close the event at a specific time:</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n  def close\n    if starts_at == Time.now\n      send_message(\"Some farewell message\")\n    end\n  end\nend\n</code></pre>\n\n<p>I need to check all the time if this event is ready to close and send a message after this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1485379760, "post_id": 41861917, "comment_id": 70907723, "body": "I would add an extra field for this, <code>sort</code> or <code>position</code>, whatever you like."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485384211, "post_id": 41861917, "comment_id": 70909842, "body": "On a lot of databases the precision on insertion times is 1s, so inserting a bunch of records quickly might result in identical insertion times."}], "answers": [{"tags": [], "owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "is_accepted": true, "score": 0, "last_activity_date": 1485652653, "last_edit_date": 1485652653, "creation_date": 1485379723, "answer_id": 41861985, "question_id": 41861917, "link": "https://stackoverflow.com/questions/41861917/how-to-order-in-exact-time-of-creation-in-ruby-on-rails/41861985#41861985", "title": "How to order in exact time of creation in Ruby on Rails", "body": "<p>It is tempting to use the object id for this purpose but as noted in the comments, the ordering of the object id or the created_at field cannot be relied upon.  It is safer to add an ordering field, say :num. The code would then be</p>\n\n<p>course_h[:tees].each_with_index do |tee_h, i|\n  Tee.create!(tee_h.merge(num: i)\nend\nand then use the ordering <code>course.tees.order(num: asc)</code></p>\n"}], "owner": {"reputation": 10972, "user_id": 1299362, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/f9ec564b963a34f47cc1719738d75b23?s=128&d=identicon&r=PG", "display_name": "Obromios", "link": "https://stackoverflow.com/users/1299362/obromios"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 41861985, "answer_count": 1, "score": 0, "last_activity_date": 1485652653, "creation_date": 1485379442, "last_edit_date": 1485384164, "question_id": 41861917, "link": "https://stackoverflow.com/questions/41861917/how-to-order-in-exact-time-of-creation-in-ruby-on-rails", "title": "How to order in exact time of creation in Ruby on Rails", "body": "<p>I have a model, Course, which <code>has_many tees</code>. The tees are created individuall from a hash derived from an api e.g</p>\n\n<pre><code>  course_h[:tees].each do |tee_h|\n    course.tees.create!(tee_h)\n  end\n</code></pre>\n\n<p>Later I retrieve another hash and want to compare the new hash with the saved tees. I would like to have the same order as the original hash, and assumed that I could do this with <code>course.tees.order(created_at: :asc)</code>. This works in the test environment, but in development environment, the order is not the same.  Why is this, and is there a way to fix it?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "parameters", "int"], "answers": [{"comments": [{"owner": {"reputation": 15501, "user_id": 664833, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/814bed2c4c2d0e69ec65a28a166c01b7?s=128&d=identicon&r=PG", "display_name": "user664833", "link": "https://stackoverflow.com/users/664833/user664833"}, "edited": false, "score": 0, "creation_date": 1485380143, "post_id": 41861933, "comment_id": 70907906, "body": "Thank you! My bad! I just checked the Ajax call, and though I wanted to pass the array as an integer array, I was actually calling <code>JSON.stringify</code> on it. I totally forgot about that - and I did it because I read someone recommending that approach. Was that a bad recommendation (to <code>stringify</code>)?? Is there nothing wrong with just passing an array of integers?"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 1, "last_activity_date": 1485379500, "creation_date": 1485379500, "answer_id": 41861933, "question_id": 41861905, "link": "https://stackoverflow.com/questions/41861905/convert-params-array-of-numbers-a-string-into-an-actual-integer-array/41861933#41861933", "title": "convert params array of numbers (a string) into an actual integer Array", "body": "<p>Try</p>\n\n<pre><code>JSON.parse(params[:ids])\n</code></pre>\n\n<p>But I think you should check your Ajax call. It must be possible to pass the array not as a string.</p>\n"}], "owner": {"reputation": 15501, "user_id": 664833, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/814bed2c4c2d0e69ec65a28a166c01b7?s=128&d=identicon&r=PG", "display_name": "user664833", "link": "https://stackoverflow.com/users/664833/user664833"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 874, "favorite_count": 0, "accepted_answer_id": 41861933, "answer_count": 1, "score": 0, "last_activity_date": 1485380279, "creation_date": 1485379393, "last_edit_date": 1485380279, "question_id": 41861905, "link": "https://stackoverflow.com/questions/41861905/convert-params-array-of-numbers-a-string-into-an-actual-integer-array", "title": "convert params array of numbers (a string) into an actual integer Array", "body": "<p>I am sending an array (<code>\"[1,3,44,2,0]\"</code>) via an Ajax <code>PATCH</code> call, and it arrives as:</p>\n\n<pre><code>Parameters: {\"ids\"=&gt;\"[1,3,44,2,0]\"}\n</code></pre>\n\n<p>To taint check, I am using the following line - in which the match anchors against the start and end of the string, and makes sure that there is at least one digit, or that the numbers are comma separated:</p>\n\n<pre><code>raise \"unexpected ids #{params[:ids]}\" unless params[:ids].match(/\\A\\[(\\d+,)*\\d+\\]\\z/)\n</code></pre>\n\n<p>And to make an actual integer array out of it, I am using the following approach (strip the brackets, split on comma, convert each string element to an integer):</p>\n\n<pre><code>irb&gt; \"[1,3,44,2,0]\"[1...-1].split(',').map {|e| e.to_i}\n =&gt; [1, 3, 44, 2, 0]\n</code></pre>\n\n<p>Is there a better (simpler, cheaper, faster) way of doing this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485384282, "post_id": 41861791, "comment_id": 70909877, "body": "You might want <code>@adapter ||= :dog</code> as that&#39;s often more concise, but don&#39;t forget that returning <code>:dog.speak</code> isn&#39;t going to work."}], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1485385397, "post_id": 41863116, "comment_id": 70910311, "body": "Thank you for your response!  I tried out your second suggested answer.  Unfortunately changing the adapter does not change the answer.  Example: it starts by using the Dog&#39;s version of <code>speak</code>.  I then do <code>animal.adapter = :cat</code>.  But when I do <code>animal.speak</code> it still responds with the Dog version. It seems like <code>extend(@adapter)</code> will not override the Dog&#39;s <code>speak</code> with the Cat&#39;s <code>speak</code>."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "edited": false, "score": 0, "creation_date": 1485385772, "post_id": 41863116, "comment_id": 70910443, "body": "hadn&#39;t seen tadman&#39;s answer otherwise I would have skipped this, but my solution works, I presume because of the order in adapter="}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1485386482, "post_id": 41863116, "comment_id": 70910694, "body": "@Neil Be sure that your module declares the method <code>speak</code> and not <code>self.speak</code>. If you forget that the method won&#39;t be mixed in properly. I tested this code and it worked for me, but I omitted the Cat part for brevity&#39;s sake."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1485387467, "post_id": 41863116, "comment_id": 70910988, "body": "hmm, still having some trouble.  I posted another question about the exact result I am getting here: <a href=\"http://stackoverflow.com/questions/41863613/overriding-module-behavior-with-another-module\" title=\"overriding module behavior with another module\">stackoverflow.com/questions/41863613/&hellip;</a>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1485384807, "last_edit_date": 1485384807, "creation_date": 1485384468, "answer_id": 41863116, "question_id": 41861791, "link": "https://stackoverflow.com/questions/41861791/adapter-pattern-in-ruby-accessing-your-instance-variables/41863116#41863116", "title": "Adapter Pattern in ruby: Accessing Your Instance Variables", "body": "<p>This is because <code>name</code> inside of the <code>module</code> context refers to something entirely different than the <code>name</code> you're expecting. The <code>Animal</code> class and the <code>Cat</code> module do not share data, they have no relationship. Coincidentally you're calling <a href=\"https://ruby-doc.org/core-2.4.0/Module.html#method-i-name\" rel=\"nofollow noreferrer\"><code>Module#name</code></a> which happens to return <code>Adapter::Cat</code> as that's the name of the module.</p>\n\n<p>In order to get around this you need to do one of two things. Either make your <code>module</code> a mix-in (remove <code>self</code>, then <code>include</code> it as necessary) or share the necessary data by passing it in as an argument to <code>speak</code>.</p>\n\n<p>The first method looks like this:</p>\n\n<pre><code>module Adapter\n  module Dog\n    def self.speak(name)\n      puts \"#{name} says: woof!\"\n    end\n  end\nend\n\nclass Animal\n  attr_accessor :name\n  attr_reader :adapter\n\n  def initialize(name)\n    @name = name\n\n    self.adapter = :dog\n  end\n\n  def speak\n    self.adapter.speak(@name)\n  end\n\n  def adapter=(adapter)\n    @adapter = Adapter.const_get(adapter.to_s.capitalize)\n  end\nend\n</code></pre>\n\n<p>That doesn't seem as simple as it could be as they basically live in two different worlds. A more Ruby-esque way is this:</p>\n\n<pre><code>module Adapter\n  module Dog\n    def speak\n      puts \"#{name} says: woof!\"\n    end\n  end\nend\n\nclass Animal\n  attr_accessor :name\n  attr_reader :adapter\n\n  def initialize(name)\n    @name = name\n\n    self.adapter = :dog\n  end\n\n  def adapter=(adapter)\n    @adapter = Adapter.const_get(adapter.to_s.capitalize)\n\n    extend(@adapter)\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1485385749, "post_id": 41863318, "comment_id": 70910437, "body": "thanks Peter!  This almost works.  However: at the very bottom try changing it back to the dog and then calling <code>animal.speak</code>.  It still is responding the cat way, even though we want it to change back to the dog way."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1485386337, "post_id": 41863318, "comment_id": 70910649, "body": "let me know if you have any suggestions.  Both your answer and tadman&#39;s answer are really close.  However they both only allow the adapter (:cat, :dog) to be toggled once.  They both do not let you toggle back to the former one (ex: toggling the adapter back to :dog)."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 1, "creation_date": 1485389405, "post_id": 41863318, "comment_id": 70911515, "body": "That was a hard one, needed a dedicated extend and remove method, got it from <a href=\"https://www.ruby-forum.com/topic/164431\" rel=\"nofollow noreferrer\">ruby-forum.com/topic/164431</a>, now it works as expected"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": true, "score": 2, "last_activity_date": 1485390513, "last_edit_date": 1485390513, "creation_date": 1485385524, "answer_id": 41863318, "question_id": 41861791, "link": "https://stackoverflow.com/questions/41861791/adapter-pattern-in-ruby-accessing-your-instance-variables/41863318#41863318", "title": "Adapter Pattern in ruby: Accessing Your Instance Variables", "body": "<p>You need to use your Module as a mixin and provide a way to keep track of which module is active, the methods don't seem to be overwritten by reincluding or reextending so I took the extend and remove methods I found <a href=\"https://www.ruby-forum.com/topic/164431\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<pre><code>module Adapter\n  module Dog\n    def speak\n      puts \"#{name} says: woof!\"\n    end\n  end\n\n  module Cat\n    def speak\n      puts \"#{name} says: meow!\"\n    end\n  end\n\n  def extend mod\n    @ancestors ||= {}\n    return if @ancestors[mod]\n    mod_clone = mod.clone\n    @ancestors[mod] = mod_clone\n    super mod_clone\n  end\n\n  def remove mod\n    mod_clone = @ancestors[mod]\n    mod_clone.instance_methods.each {|m| mod_clone.module_eval {remove_method m } }\n    @ancestors[mod] = nil\n  end\nend\n\nclass Animal\n  include Adapter\n  attr_accessor :name, :adapter\n\n  def initialize(name)\n    @name = name\n    @adapter = Adapter::Dog\n    extend Adapter::Dog\n  end\n\n  def adapter=(adapter)\n    remove @adapter\n    extend Adapter::const_get(adapter.capitalize)\n    @adapter = Adapter.const_get(adapter.capitalize)\n  end\nend\n\nanimal = Animal.new(\"catdog\")\nanimal.speak # catdog says: woof!\nanimal.adapter = :cat\nanimal.speak # catdog says: meow!\nanimal.adapter = :dog\nanimal.speak # catdog says: woof!\n</code></pre>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 41863318, "answer_count": 2, "score": 2, "last_activity_date": 1485738185, "creation_date": 1485378884, "last_edit_date": 1485379258, "question_id": 41861791, "link": "https://stackoverflow.com/questions/41861791/adapter-pattern-in-ruby-accessing-your-instance-variables", "title": "Adapter Pattern in ruby: Accessing Your Instance Variables", "body": "<p>I am studying the <a href=\"https://www.sitepoint.com/using-and-testing-the-adapter-design-pattern/\" rel=\"nofollow noreferrer\">adapter pattern</a> implementation in ruby.  I want to access an instance variable within the adapter module definition.  Take a look at the following code:</p>\n\n<pre><code>module Adapter\n  module Dog\n    def self.speak\n      # I want to access the #name instance variable from my Animal instance\n      puts \"#{name} says: woof!\"\n    end\n  end\n\n  module Cat\n    def self.speak\n      # I want to access the #name instance variable from my Animal instance\n      puts \"#{name} says: meow!\"\n    end\n  end\nend\n\nclass Animal\n  attr_accessor :name\n\n  def initialize(name)\n    @name = name\n  end\n\n  def speak\n    self.adapter.speak\n  end\n\n  def adapter\n    return @adapter if @adapter\n    self.adapter = :dog\n    @adapter\n  end\n\n  def adapter=(adapter)\n    @adapter = Adapter.const_get(adapter.to_s.capitalize)\n  end\nend\n</code></pre>\n\n<p>To test it out I did the following:</p>\n\n<pre><code>animal = Animal.new(\"catdog\")\nanimal.adapter = :cat\nanimal.speak\n</code></pre>\n\n<p>I want it to return the following:</p>\n\n<pre><code>catdog says: meow!\n</code></pre>\n\n<p>Instead it says:</p>\n\n<pre><code>Adapter::Cat says: meow!\n</code></pre>\n\n<p>Any tips on how I can get access to the <code>Animal#name</code> instance method from the adapter module?  I think the issue is that my adapter methods are class-level methods.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "user-interface", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1485379301, "post_id": 41861649, "comment_id": 70907503, "body": "Why do you want to deploy both to the same server? Why are both apps in the same repo?"}, {"owner": {"reputation": 1, "user_id": 7060114, "user_type": "registered", "profile_image": "https://graph.facebook.com/10512108/picture?type=large", "display_name": "Prince Titus Codjoe", "link": "https://stackoverflow.com/users/7060114/prince-titus-codjoe"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1485379754, "post_id": 41861649, "comment_id": 70907715, "body": "It&#39;s going to the same server because of the database. Since both UI and API interact with the same database, we can&#39;t move the API to another server. Currently, only one app controls both API and GUI. We are trying to separate them but they would interact with the same db"}, {"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 2, "creation_date": 1485380467, "post_id": 41861649, "comment_id": 70908050, "body": "You can host the app on multiple servers and still have them all connect to the same database."}, {"owner": {"reputation": 1, "user_id": 7060114, "user_type": "registered", "profile_image": "https://graph.facebook.com/10512108/picture?type=large", "display_name": "Prince Titus Codjoe", "link": "https://stackoverflow.com/users/7060114/prince-titus-codjoe"}, "edited": false, "score": 0, "creation_date": 1485380653, "post_id": 41861649, "comment_id": 70908137, "body": "But that means I would have to duplicate libraries that both the API and GUI use right? or you mean keep the same app and just host on 2 separate servers like option 1 but on 2 different servers"}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1485381806, "post_id": 41861649, "comment_id": 70908729, "body": "A lot of apps use a specific subdomain api.example.com and set this up on a separate server connecting to the same DB. This is probably only a good if the nature of the &#39;downtime&#39; is really a client/view issue. If there is a problem in your models or controller logic it would probably affect the API also right?"}, {"owner": {"reputation": 1, "user_id": 7060114, "user_type": "registered", "profile_image": "https://graph.facebook.com/10512108/picture?type=large", "display_name": "Prince Titus Codjoe", "link": "https://stackoverflow.com/users/7060114/prince-titus-codjoe"}, "edited": false, "score": 0, "creation_date": 1485393893, "post_id": 41861649, "comment_id": 70912694, "body": "Downtime has usually been related to delayed jobs not starting during deployment. Do you know anyway you can have api in the same app but deploy it separately?"}, {"owner": {"reputation": 1, "user_id": 7060114, "user_type": "registered", "profile_image": "https://graph.facebook.com/10512108/picture?type=large", "display_name": "Prince Titus Codjoe", "link": "https://stackoverflow.com/users/7060114/prince-titus-codjoe"}, "edited": false, "score": 0, "creation_date": 1486556468, "post_id": 41861649, "comment_id": 71394566, "body": "Thanks I figured it out. Keep the same codebase and deploy unto 1 server that will serve as the API and one server that will serve as the GUI and a 3rd server being the mysql server"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 7060114, "user_type": "registered", "profile_image": "https://graph.facebook.com/10512108/picture?type=large", "display_name": "Prince Titus Codjoe", "link": "https://stackoverflow.com/users/7060114/prince-titus-codjoe"}, "is_accepted": false, "score": 0, "last_activity_date": 1486556624, "creation_date": 1486556624, "answer_id": 42113040, "question_id": 41861649, "link": "https://stackoverflow.com/questions/41861649/breaking-up-existing-rails-application-into-ui-and-api/42113040#42113040", "title": "Breaking up existing rails application into UI and API", "body": "<p>Thanks I figured it out. Keep the same codebase and deploy unto 1 server that will serve as the API and one server that will serve as the GUI and a 3rd server being the mysql server</p>\n"}], "owner": {"reputation": 1, "user_id": 7060114, "user_type": "registered", "profile_image": "https://graph.facebook.com/10512108/picture?type=large", "display_name": "Prince Titus Codjoe", "link": "https://stackoverflow.com/users/7060114/prince-titus-codjoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1486556624, "creation_date": 1485378404, "question_id": 41861649, "link": "https://stackoverflow.com/questions/41861649/breaking-up-existing-rails-application-into-ui-and-api", "title": "Breaking up existing rails application into UI and API", "body": "<p>We have an already working rails application but the UI and API is built into 1 application. The problem we are having is that when anything happens to the app for example if it goes down, it affects API and GUI. 3rd party systems can't communicate with the API. We are trying to prevent this. These are my options so far:</p>\n\n<p>option 1: deploy the same application to 2 different ports using puma and unicorn</p>\n\n<p>option 2: have 2 different repos for API and GUI and deploy them separately on the same server</p>\n\n<p>Is there a better way where we can have 1 repository hosting both API and GUI and when GUI goes down, API isn't affected?</p>\n"}, {"tags": ["ruby", "class", "methods"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1485377920, "post_id": 41861451, "comment_id": 70906756, "body": "&quot;I simply wanna execute the code in the things files - it&#39;s not necessary that they are Classes or Modules&quot; \u2013 That&#39;s exactly what <code>require</code> does: it executes the code in the file."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485378921, "post_id": 41861451, "comment_id": 70907269, "body": "Note: You need <code>require_relative</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485383418, "post_id": 41861451, "comment_id": 70909502, "body": "Rather than referring to &quot;thing&quot;, you mean each file contains a module that may be a class. &quot;wanna&quot; is not a word."}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485379006, "post_id": 41861579, "comment_id": 70907318, "body": "Very interesting! One way to do it would be : <code>classes_before = ObjectSpace.each_object(Class).to_a; Dir[&quot;things&#47;*.rb&quot;].each {|file| require_relative file }; classes_after = ObjectSpace.each_object(Class).to_a; do_it_classes = (classes_after - classes_before).select{|klass| klass.respond_to?(:do_it)}</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485380430, "post_id": 41861579, "comment_id": 70908036, "body": "Do be careful with that approach as you&#39;re expecting those files to immediately instantiate any classes whereas that might not be the case if you&#39;re dealing with <code>autoload</code> declarations or other forms of lazy loading, plus dynamic programming that might factory produce classes on-demand."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485381341, "post_id": 41861579, "comment_id": 70908495, "body": "True. The OP didn&#39;t mention <code>autoload</code> though, and said that there was one thing for each file. I realize my code doesn&#39;t take modules into accounts, though."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1485381422, "post_id": 41861579, "comment_id": 70908535, "body": "@EricDuminil I&#39;m just adding caveats here because when it comes to Ruby, there&#39;s a <i>lot</i> of liberty given to the programmer. Without house-rules, standards like I&#39;ve described, it&#39;s very hard to figure out exactly what to do. Your code&#39;s a good example of how to dig around <i>if</i> everything is correctly loaded."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485381540, "post_id": 41861579, "comment_id": 70908606, "body": "Got it. Thanks for the explanation!"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1485378105, "last_edit_date": 1495540375, "creation_date": 1485378105, "answer_id": 41861579, "question_id": 41861451, "link": "https://stackoverflow.com/questions/41861451/ruby-require-multiple-files-without-knowing-their-class-names/41861579#41861579", "title": "Ruby require multiple files without knowing their class names", "body": "<p>You can't reliably do this for a number of reasons, but the most important is that you're under no obligations to declare a single class in any given file, or a class at all. You've got the right idea with loading in all files in a particular directory, but if you need to operate on those there's two ways to crack that nut.</p>\n\n<p>The easiest way is to declare these classes as a subclass of some already known parent. ActiveSupport has the <a href=\"http://apidock.com/rails/Class/descendants\" rel=\"nofollow noreferrer\"><code>descendents</code></a> method to reflect on a particular class, that's part of Rails, but you can also do it <a href=\"https://stackoverflow.com/questions/2393697/look-up-all-descendants-of-a-class-in-ruby\">the hard way if you have to</a>.</p>\n\n<p>The second easiest way is to correlate the names with the classes in them, and then convert filenames to class-names algorithmically. This is how the Rails autoloader works. <code>cat.rb</code> contains <code>Cat</code>, <code>bad_dog.rb</code> contains <code>BadDog</code> and so on.</p>\n\n<p>If you look more closely at how things like Test::Unit work they take the first approach, any declared test subclasses are executed before the Ruby process terminates. It's a fairly simple system that puts no constraints on what the files are called or where and how the classes are declared.</p>\n\n<p>Rails leans towards the second approach where the path communicates intent. This makes finding files more predictable but requires more discipline on the part of the developer to conform to that standard.</p>\n\n<p>They both have merit. Pick the one that works for your use case.</p>\n"}], "owner": {"reputation": 1848, "user_id": 657644, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/28f86578bc070ea2fbde98810ddf63d0?s=128&d=identicon&r=PG", "display_name": "PascalTurbo", "link": "https://stackoverflow.com/users/657644/pascalturbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485378105, "creation_date": 1485377544, "question_id": 41861451, "link": "https://stackoverflow.com/questions/41861451/ruby-require-multiple-files-without-knowing-their-class-names", "title": "Ruby require multiple files without knowing their class names", "body": "<p>Let's say I have an Application that requires different files. Each file contains a single purpose \"thing\". I call it \"thing\" because I'm unsure if it will be a class or a module.</p>\n\n<p>The First Thing</p>\n\n<pre><code># things/one.rb\nclass One\n  def self.do_it    \n    \"I'm the one\"\n  end\nend\n</code></pre>\n\n<p>And the second</p>\n\n<pre><code># things/two.rb\nclass Two\n  def self.do_it    \n    \"I'm not the only one!\"\n  end\nend\n</code></pre>\n\n<p>Now I wanna require all files in the <code>things</code>directory and execute the <code>do_it</code> method. But I wanna do this dynamically - for every thing in things folder without even knowing their Classname.</p>\n\n<pre><code># app.rb\nDir[\"things/*.rb\"].each {|file| require file }\n</code></pre>\n\n<p>Keep in Mind: I simply wanna execute the code in the things files - it's not necessary that they are Classes or Modules</p>\n"}, {"tags": ["ruby", "mongodb", "mongoid"], "answers": [{"comments": [{"owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "edited": false, "score": 0, "creation_date": 1485431399, "post_id": 41864415, "comment_id": 70927181, "body": "thanks, do you have an example how to do this with mongoid perhaps?"}], "tags": [], "owner": {"reputation": 2099, "user_id": 1231636, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/bdf8aad6380597105da6f993cbc31911?s=128&d=identicon&r=PG", "display_name": "masterforker", "link": "https://stackoverflow.com/users/1231636/masterforker"}, "is_accepted": false, "score": 2, "last_activity_date": 1485392627, "creation_date": 1485392627, "answer_id": 41864415, "question_id": 41861069, "link": "https://stackoverflow.com/questions/41861069/record-level-security-mongodb/41864415#41864415", "title": "Record level security mongodb", "body": "<p>You could try using the <a href=\"https://docs.mongodb.com/manual/tutorial/implement-field-level-redaction/\" rel=\"nofollow noreferrer\">redact</a> operator. So everytime you need to change security for a document rather than an entire collection or even a database, you can use redact to control access for just </p>\n"}], "owner": {"reputation": 493, "user_id": 3616806, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/5e239b7b5f6e0938a4393e0a639b0aa5?s=128&d=identicon&r=PG&f=1", "display_name": "Remember_me", "link": "https://stackoverflow.com/users/3616806/remember-me"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 546, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485396795, "creation_date": 1485376073, "last_edit_date": 1485396795, "question_id": 41861069, "link": "https://stackoverflow.com/questions/41861069/record-level-security-mongodb", "title": "Record level security mongodb", "body": "<p>I have some kind of data structure for my model for now, I m still figuring out along the way, but one of the concerns is that I need to serve the data from the mongo based on the user logged in.</p>\n\n<p>One of the approaches I had in mind was something like this, if my object(s) looked like this in mongo:</p>\n\n<pre><code>{\n  record_id: 1,\n  property_1: 'some value',\n  property_2: 'some value',\n  users: [1, 2, 3, 4]\n  ...\n}\n</code></pre>\n\n<p>And then another one:</p>\n\n<pre><code>{\n  record_id: 2,\n  property_1: 'some value 2',\n  property_2: 'some value 2',\n  users: [1, 2]\n  ...\n}\n</code></pre>\n\n<p>Then on some page that I have I can display all the records for a given user.</p>\n\n<p>But I have a requirement where I could give some users access to more records and/or to less. How would I go about doing this?</p>\n\n<p>If I had a case where I would need to take away the access from x amount of records, and give access to the y amount of records, for a user. In a relational database I would do something like this :</p>\n\n<pre><code>--start transaction--\nremove all access for a given user from the records\nadd all new access\n--transaction end--\n</code></pre>\n\n<p>So in case user refreshes the page, he or she can only see the old data before the access for that user was updated, or the new data which would happen only after entire transaction would complete.</p>\n\n<p>How do you guys do this in a mongo world? Do I change how I store the records, or the way I manage row level security per user, and manage that access?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485379613, "post_id": 41861838, "comment_id": 70907666, "body": "Excellent answer."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 1, "last_activity_date": 1485379568, "last_edit_date": 1485379568, "creation_date": 1485379083, "answer_id": 41861838, "question_id": 41860774, "link": "https://stackoverflow.com/questions/41860774/in-ruby-how-to-pass-a-class-variable-into-a-mixed-in-modules-dynamically-creat/41861838#41861838", "title": "In ruby, how to pass a class variable into a mixed-in module&#39;s dynamically created class method?", "body": "<p>Your title says \"dynamically created class method\" but it looks like you're actually dynamically creating instance classes, ie, you could have multiple instances of TestClass, each with its own collection of set_x= methods. Is this what you want?</p>\n\n<p>Assuming so, you can create the module:</p>\n\n<pre><code>module Foo\n  def bar(*fields)\n    fields.each do |field|\n      define_method(\"set_#{field}=\") do |value|\n         # nil check, other checks and validations\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>And create the class like so:</p>\n\n<pre><code>class TestClass\n  extend Foo\n  def initialize(value)\n    @field_value = value\n    TestClass.bar(@field_value)\n  end\nend\n</code></pre>\n\n<p>Such that: <code>t = TestClass.new(\"boop\")</code> would give you instance class <code>t</code> with the method <code>set_boop=()</code>.</p>\n\n<p>I should mention that if you create another instance, it will have any new methods you give it <strong>as well as</strong> all the previous methods from previous instances. This is because you're modifying the class definition with each instance.</p>\n\n<p>If you don't want that functionality, you can use define_singleton_method and include the module rather than extending it, which makes bar an instance method designed to create other instance methods. Your class would instead look like this:</p>\n\n<pre><code>module Foo\n  def bar(*fields)\n    fields.each do |field|\n      define_singleton_method(\"set_#{field}=\") do |value|\n        # nil check, other checks and validations\n      end\n    end\n  end\nend\n\n\nclass TestClass\n  include Foo\n  def initialize(value)\n    @field_value = value\n    bar(@field_value)\n  end\nend\n</code></pre>\n\n<p>If this isn't what you're looking for, let me know and i'll modify my answer.</p>\n"}], "owner": {"reputation": 595, "user_id": 1154843, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/Mjhv5.jpg?s=128&g=1", "display_name": "Lane", "link": "https://stackoverflow.com/users/1154843/lane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 391, "favorite_count": 0, "accepted_answer_id": 41861838, "answer_count": 1, "score": 1, "last_activity_date": 1485379568, "creation_date": 1485375030, "question_id": 41860774, "link": "https://stackoverflow.com/questions/41860774/in-ruby-how-to-pass-a-class-variable-into-a-mixed-in-modules-dynamically-creat", "title": "In ruby, how to pass a class variable into a mixed-in module&#39;s dynamically created class method?", "body": "<p>SO...</p>\n\n<p>I have a module...</p>\n\n<pre><code>module Foo\n  class_methods do\n    def bar(*fields)\n      fields.each do |field|\n        define_method(\"set_#{field}=\") do |value|\n          # nil check, other checks and validations\n        end\n    end\n  end\nend\n</code></pre>\n\n<p>...this module will be used in several of my models in my application, but for now I am trying to test it...</p>\n\n<pre><code>let(:entity_type) do\n  class TestClass\n    def initialize(value)\n      @field_value = value\n    end\n\n    include Foo\n    bar @field_value\n\n    self\n  end\nend\n\nlet(:entity) { entity_type.new(:some_field) }\n</code></pre>\n\n<p>...however, when I put a break point in my tests and look at the entity's method, I only see \"set_=\" instead of \"set_some_field=\" and I have tried several variations on using symbols, class instance variables, etc. Any help is much appreciated!</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 2, "last_activity_date": 1485374620, "creation_date": 1485374620, "answer_id": 41860651, "question_id": 41860566, "link": "https://stackoverflow.com/questions/41860566/nomethoderror-undefined-method-for-nilnilclass/41860651#41860651", "title": "NoMethodError: undefined method `+&#39; for nil:NilClass", "body": "<p>You have to initialize your variables.</p>\n\n<pre><code>line_num += 1\n</code></pre>\n\n<p>Unless <code>line_num</code> is previously defined this will fail, it's basically the same thing as <code>line_num = nil + 1</code></p>\n\n<p>This will also fail if you haven't previously defined <code>array</code>, and if you had, then there'd be no point calling <code>to_a</code>.</p>\n\n<pre><code>array.to_a.push line.split(\" \")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": true, "score": 2, "last_activity_date": 1485374661, "creation_date": 1485374661, "answer_id": 41860665, "question_id": 41860566, "link": "https://stackoverflow.com/questions/41860566/nomethoderror-undefined-method-for-nilnilclass/41860665#41860665", "title": "NoMethodError: undefined method `+&#39; for nil:NilClass", "body": "<pre><code>line_num += 1\n</code></pre>\n\n<p>is equivalent to</p>\n\n<pre><code>line_num = line_num + 1\n</code></pre>\n\n<p>Since line_num is not defined, it is nil -- the fix would be to initialize it as 0 before opening the file, or you could do something like:</p>\n\n<pre><code>array = File.open('file.txt').each.map{ |line| line.split(\" \")}\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 4642732, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c9d8a1567d12cc467520bc40395fd96e?s=128&d=identicon&r=PG&f=1", "display_name": "Kelvin Tan", "link": "https://stackoverflow.com/users/4642732/kelvin-tan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "accepted_answer_id": 41860665, "answer_count": 2, "score": 1, "last_activity_date": 1485382129, "creation_date": 1485374339, "last_edit_date": 1485382129, "question_id": 41860566, "link": "https://stackoverflow.com/questions/41860566/nomethoderror-undefined-method-for-nilnilclass", "title": "NoMethodError: undefined method `+&#39; for nil:NilClass", "body": "<p>I tried googling and looking through stackoverflow and still couldnt figure out why does it not work. Essentially, this line of code reads in a file.txt and loop through the line of instructions on the text file </p>\n\n<pre><code># Load instruction in an array\nFile.open('file.txt').each do |line|\n  line_num += 1\n  array.to_a.push line.split(\" \")\nend\n\n# Loop through the array of Instructions\narray.each do |line|\n  instruction = line[0]\n  value = line[1].to_i\n</code></pre>\n\n<p>This is the error that I got</p>\n\n<pre><code>NoMethodError: undefined method `+' for nil:NilClass\n\nmethod block in &lt;main&gt;  in VirtualMemory.rb at line 3\nmethod each in VirtualMemory.rb at line 2\nmethod &lt;main&gt;   in VirtualMemory.rb at line 2\n</code></pre>\n"}, {"tags": ["ruby", "oauth-2.0", "youtube-api", "google-oauth"], "answers": [{"tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": true, "score": 1, "last_activity_date": 1485377358, "creation_date": 1485377358, "answer_id": 41861410, "question_id": 41860512, "link": "https://stackoverflow.com/questions/41860512/what-is-user-id-in-google-oauth-command-line-example/41861410#41861410", "title": "what is user_id in google oauth command line example?", "body": "<p>The <code>user_id</code> should the email address of the person who clicks the link.</p>\n"}, {"tags": [], "owner": {"reputation": 130, "user_id": 5424329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MCWUr.jpg?s=128&g=1", "display_name": "Victor Ude", "link": "https://stackoverflow.com/users/5424329/victor-ude"}, "is_accepted": false, "score": 2, "last_activity_date": 1502858337, "creation_date": 1502858337, "answer_id": 45705214, "question_id": 41860512, "link": "https://stackoverflow.com/questions/41860512/what-is-user-id-in-google-oauth-command-line-example/45705214#45705214", "title": "what is user_id in google oauth command line example?", "body": "<p>For anyone else that is wondering I believe that you can safely set\n    user_id='default'\n<a href=\"https://developers.google.com/google-apps/calendar/quickstart/ruby\" rel=\"nofollow noreferrer\">https://developers.google.com/google-apps/calendar/quickstart/ruby</a></p>\n\n<p>This will present the user with a \"choose account\" dialog if the user is redirected to the authorizer.get_authorization_url</p>\n"}], "owner": {"reputation": 1747, "user_id": 1236326, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19364e9fcedf07efd137d751295402d2?s=128&d=identicon&r=PG", "display_name": "ProGirlXOXO", "link": "https://stackoverflow.com/users/1236326/progirlxoxo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 390, "favorite_count": 0, "accepted_answer_id": 41861410, "answer_count": 2, "score": 0, "last_activity_date": 1502858337, "creation_date": 1485374178, "question_id": 41860512, "link": "https://stackoverflow.com/questions/41860512/what-is-user-id-in-google-oauth-command-line-example", "title": "what is user_id in google oauth command line example?", "body": "<p>Where is user_id supposed to come from in this example?</p>\n\n<p>Using the command line example from here:\n<a href=\"https://github.com/google/google-auth-library-ruby\" rel=\"nofollow noreferrer\">https://github.com/google/google-auth-library-ruby</a></p>\n\n<p>I've only changed the example by removing the '/path/to/' and there is a client_secrets.json in my working directory.</p>\n\n<pre><code>require 'googleauth'\nrequire 'googleauth/stores/file_token_store'\n\nOOB_URI = 'urn:ietf:wg:oauth:2.0:oob'\n\nscope = 'https://www.googleapis.com/auth/drive'\nclient_id = Google::Auth::ClientId.from_file('client_secrets.json')\ntoken_store = Google::Auth::Stores::FileTokenStore.new(\n  :file =&gt; 'tokens.yaml')\nauthorizer = Google::Auth::UserAuthorizer.new(client_id, scope, token_store)\n\ncredentials = authorizer.get_credentials(user_id)\nif credentials.nil?\n  url = authorizer.get_authorization_url(base_url: OOB_URI )\n  puts \"Open #{url} in your browser and enter the resulting code:\"\n  code = gets\n  credentials = authorizer.get_and_store_credentials_from_code(\n    user_id: user_id, code: code, base_url: OOB_URI)\nend\n</code></pre>\n\n<p>Running this code prints out a url to plug into my browser.  The url takes me to a consent screen.  After I accept, I'm given a code to plug back into the terminal.</p>\n\n<p>Then I get the error:</p>\n\n<pre><code>NameError: undefined local variable or method `user_id' for main:Object\n</code></pre>\n\n<p>... because obviously user_id is not defined, but where do I get it?</p>\n\n<p>Alternately, is there a better, newer, or better documented oauth 2.0 library I should be using for Ruby in combination with all of the youtube apis?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "import-from-excel", "roo-gem"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1485374042, "post_id": 41860321, "comment_id": 70904674, "body": "<code>ERROR:  invalid input syntax for type numeric: &quot;Abingdon &amp;amp; Witney College (Abingdon Campus)&quot;</code> I may be reading this wrong but, this value is not a numeric?"}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "reply_to_user": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 0, "creation_date": 1485374129, "post_id": 41860321, "comment_id": 70904721, "body": "But neither is the data in the schema, it&#39;s &#39;text&#39; as it&#39;s under the &#39;name&#39; column."}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1485374246, "post_id": 41860506, "comment_id": 70904787, "body": "As stated in the above comment, that entry is in row 6 and therefore should be under &#39;name&#39;, which is format &#39;text&#39; according to the migration."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1485375891, "post_id": 41860506, "comment_id": 70905695, "body": "It looks to me like the <code>find_or_create</code> has <code>locations.lat</code> pulling from <code>row[7]</code> and thus the <code>SELECT</code> does <code>&quot;locations&quot;.&quot;lat&quot; = $7 </code> The name is in 6 right?"}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1485376071, "post_id": 41860506, "comment_id": 70905800, "body": "Yes, it should be. &quot;Abingdon &amp;amp; Witney College (Abingdon Campus)&quot; comes from row 6 of the spreadsheet though, hence why I don&#39;t understand the error."}, {"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "reply_to_user": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1485376745, "post_id": 41860506, "comment_id": 70906176, "body": "I re-edited my post for more clarity. I would ask next if in excel <code>locid = 6463</code> and <code>name = &quot;AB&quot;</code> ?"}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1485380255, "post_id": 41860506, "comment_id": 70907956, "body": "No, locid would have been AB."}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1485617131, "post_id": 41860506, "comment_id": 71004057, "body": "The query seems to be skipping certain columns, such as <code>instbeds</code> in [2] and therefore shifting all data to the left... is there a way to get around this?"}], "tags": [], "owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "is_accepted": true, "score": 0, "last_activity_date": 1485377594, "last_edit_date": 1485377594, "creation_date": 1485374147, "answer_id": 41860506, "question_id": 41860321, "link": "https://stackoverflow.com/questions/41860321/saving-blank-excel-cells-to-rails-postgres-database/41860506#41860506", "title": "Saving Blank Excel Cells to Rails Postgres Database", "body": "<p>Your Select has:</p>\n\n<pre><code>[\n (0)[\"ukprn\", \"10000055\"],\n (1)[\"accomurl\", \"http://www.brookes.ac.uk/studying-at-brookes/accommodation/halls-in-detail/\"],\n (2)[\"instlower\", 4081],\n (3)[\"instupper\", \"4684\"],\n (4)[\"locid\", \"6463\"],\n (5)[\"name\", \"AB\"],\n (6)[\"lat\", \"Abingdon &amp;amp; Witney College (Abingdon Campus)\"],\n (7)[\"locukprn\", 51],\n (8)[\"loccountry\", \"-1.28696\"],\n (9)[\"privatelower\", 10000055],\n (10)[\"privateupper\", \"XF\"],\n (11)[\"suurl\", \"4219\"],\n (12)[\"LIMIT\", 1]\n]\n</code></pre>\n\n<p>This lat value is not a numeric and your migration has <code>t.decimal :lat</code></p>\n"}], "owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 41860506, "answer_count": 1, "score": 0, "last_activity_date": 1485709634, "creation_date": 1485373519, "last_edit_date": 1485709634, "question_id": 41860321, "link": "https://stackoverflow.com/questions/41860321/saving-blank-excel-cells-to-rails-postgres-database", "title": "Saving Blank Excel Cells to Rails Postgres Database", "body": "<p>I've managed to get the Roo Gem working so that I can import an Excel file and save it to the database of my app. This has been successful a few times, but it appears that in spreadsheets that contain blanks in certain rows it brings up an error. My code is as follows:</p>\n\n<p>require 'roo'</p>\n\n<pre><code>xlsx = Roo::Excelx.new(File.expand_path('../Downloads/LOCATION.xlsx'))\n\nxlsx.each_row_streaming(offset: 1) do |row|\n    Location.find_or_create_by(ukprn: row[0]&amp;.value, accomurl: row[1]&amp;.value, instbeds: row[2]&amp;.value, instlower: row[3]&amp;.value, instupper: row[4]&amp;.value, locid: row[5]&amp;.value, name: row[6]&amp;.value, lat: row[7]&amp;.value, long: row[8]&amp;.value, locukprn: row[9]&amp;.value, loccountry: row[10]&amp;.value, privatelower: row[11]&amp;.value, privateupper: row[12]&amp;.value, suurl: row[13]&amp;.value)\nend\n</code></pre>\n\n<p>I read that from Ruby 2.3.0 by including an <code>&amp;</code> before the method it doesn't include nil method errors, so I was hoping this would work.</p>\n\n<p>The first 4 rows seem to work fine but as it gets to a row with blanks in Below is a snippet of the error I get:</p>\n\n<pre><code>Location Load (1.1ms)  SELECT  \"locations\".* FROM \"locations\" WHERE \"locations\".\"ukprn\" = $1 AND \"locations\".\"accomurl\" = $2 AND \"locations\".\"instbeds\" IS NULL AND \"locations\".\"instlower\" = $3 AND \"locations\".\"instupper\" = $4 AND \"locations\".\"locid\" = $5 AND \"locations\".\"name\" = $6 AND \"locations\".\"lat\" = $7 AND \"locations\".\"long\" IS NULL AND \"locations\".\"locukprn\" = $8 AND \"locations\".\"loccountry\" = $9 AND \"locations\".\"privatelower\" = $10 AND \"locations\".\"privateupper\" = $11 AND \"locations\".\"suurl\" = $12 LIMIT $13  [[\"ukprn\", \"10000055\"], [\"accomurl\", \"http://www.brookes.ac.uk/studying-at-brookes/accommodation/halls-in-detail/\"], [\"instlower\", 4081], [\"instupper\", \"4684\"], [\"locid\", \"6463\"], [\"name\", \"AB\"], [\"lat\", \"Abingdon &amp;amp; Witney College (Abingdon Campus)\"], [\"locukprn\", 51], [\"loccountry\", \"-1.28696\"], [\"privatelower\", 10000055], [\"privateupper\", \"XF\"], [\"suurl\", \"4219\"], [\"LIMIT\", 1]]\nActiveRecord::StatementInvalid: PG::InvalidTextRepresentation: ERROR:  invalid input syntax for type numeric: \"Abingdon &amp;amp; Witney College (Abingdon Campus)\"\n: SELECT  \"locations\".* FROM \"locations\" WHERE \"locations\".\"ukprn\" = $1 AND \"locations\".\"accomurl\" = $2 AND \"locations\".\"instbeds\" IS NULL AND \"locations\".\"instlower\" = $3 AND \"locations\".\"instupper\" = $4 AND \"locations\".\"locid\" = $5 AND \"locations\".\"name\" = $6 AND \"locations\".\"lat\" = $7 AND \"locations\".\"long\" IS NULL AND \"locations\".\"locukprn\" = $8 AND \"locations\".\"loccountry\" = $9 AND \"locations\".\"privatelower\" = $10 AND \"locations\".\"privateupper\" = $11 AND \"locations\".\"suurl\" = $12 LIMIT $13\n    from /home/dave/.rvm/gems/ruby-2.3.3/gems/activerecord-5.0.1/lib/active_record/connection_adapters/postgresql_adapter.rb:606:in `exec_prepared'\n</code></pre>\n\n<p>I assume that Postgres is not content with the null data being saved in the database and therefore the \"Abingdon &amp; Witney College (Abingdon Campus)\" is moved to another column, because the relevant record is a string as shown in the migration record below:</p>\n\n<pre><code>class CreateLocations &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :locations do |t|\n      t.text :name\n      t.decimal :lat\n      t.decimal :long\n      t.string :locid, index: true\n      t.integer :locukprn\n      t.string :loccountry\n      t.integer :privatelower\n      t.string :privateupper\n      t.string :ukprn, index: true\n      t.string :suurl\n      t.string :accomurl\n      t.integer :instbeds\n      t.integer :instlower\n      t.string :instupper\n      t.references :institute, foreign_key: true, index: true\n    end\n  end\nend\n</code></pre>\n\n<p>Is this what's going wrong, and are there any suggestions as to how to solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "edited": false, "score": 1, "creation_date": 1485373246, "post_id": 41859733, "comment_id": 70904238, "body": "Checkout acts_as_nested_set for thoughts about doing this in one query."}, {"owner": {"reputation": 763, "user_id": 630868, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/7b455c9bebb66b15e6b36eea87ef7b7a?s=128&d=identicon&r=PG", "display_name": "Maltiriel", "link": "https://stackoverflow.com/users/630868/maltiriel"}, "edited": false, "score": 0, "creation_date": 1485383798, "post_id": 41859733, "comment_id": 70909682, "body": "If I understand this correctly, you&#39;ve got the model referencing itself and are then trying to do queries based on that. You&#39;ll need to be careful that you don&#39;t have any loops. For example if Topic A belongs_to topic B belongs_to Topic A. This becomes a problem if you&#39;re wanting to get arbitrarily deep levels of channels."}, {"owner": {"reputation": 95, "user_id": 5450839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffc5d3ab2c8f6883e504603c2516ebfa?s=128&d=identicon&r=PG&f=1", "display_name": "tkz79", "link": "https://stackoverflow.com/users/5450839/tkz79"}, "edited": false, "score": 0, "creation_date": 1485799668, "post_id": 41859733, "comment_id": 71065273, "body": "Using Postgres,  I checked out a few of the nested_set style gems... and decided to go with ancestry... Though still needing to go through the gem code in deeper detail to get a proper understanding of how it all works under the hood... though seems pretty intuitive from the top level."}], "answers": [{"tags": [], "owner": {"reputation": 95, "user_id": 5450839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffc5d3ab2c8f6883e504603c2516ebfa?s=128&d=identicon&r=PG&f=1", "display_name": "tkz79", "link": "https://stackoverflow.com/users/5450839/tkz79"}, "is_accepted": true, "score": 0, "last_activity_date": 1485799771, "creation_date": 1485799771, "answer_id": 41942637, "question_id": 41859733, "link": "https://stackoverflow.com/questions/41859733/active-record-how-to-get-all-direct-and-indirect-children-in-one-query/41942637#41942637", "title": "Active Record - How to get all Direct and Indirect children in one query", "body": "<p>Have spent quite a bit of time looking into this... seems the best way to go is to use one of the gems like nested set / ancestry to save having to build a lot of queries yourself. Thanks to the commenters above for the reco.</p>\n"}], "owner": {"reputation": 95, "user_id": 5450839, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ffc5d3ab2c8f6883e504603c2516ebfa?s=128&d=identicon&r=PG&f=1", "display_name": "tkz79", "link": "https://stackoverflow.com/users/5450839/tkz79"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 1, "accepted_answer_id": 41942637, "answer_count": 1, "score": 2, "last_activity_date": 1485799771, "creation_date": 1485371488, "question_id": 41859733, "link": "https://stackoverflow.com/questions/41859733/active-record-how-to-get-all-direct-and-indirect-children-in-one-query", "title": "Active Record - How to get all Direct and Indirect children in one query", "body": "<p>So i have a top level class for Topics, and each can have sub-topics through a parent_id</p>\n\n<pre><code>belongs_to :parent, :class_name =&gt; \"Topic\"\nhas_many :sub_topics, :class_name =&gt; \"Topic\", :foreign_key =&gt; \"parent_id\"\n</code></pre>\n\n<p>Each topic has channels...</p>\n\n<pre><code>has_many :channels\n</code></pre>\n\n<p>But this only gets the direct children.... and I've been struggling with a neat way to get all the channels that are decedents of a topic... including level 2, 3, 4, etc.....</p>\n\n<pre><code>has_many :sub_channels, :through =&gt; :sub_topics, source: :channels\n</code></pre>\n\n<p>This gets the second level channels, but ignores the top level and deeper levels... but this seems to be going down the wrong road for what I'm trying to attain...</p>\n\n<p>Is there a good web resource that explains how to do this?</p>\n"}, {"tags": ["ruby", "xml", "nokogiri"], "comments": [{"owner": {"reputation": 1097, "user_id": 400723, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f6a241facda696c64b9b8a2c10a2bf85?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/400723/derek"}, "edited": false, "score": 0, "creation_date": 1485376077, "post_id": 41859642, "comment_id": 70905810, "body": "I am not using the XML Builder, although I can give that a shot instead."}], "owner": {"reputation": 1097, "user_id": 400723, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/f6a241facda696c64b9b8a2c10a2bf85?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/400723/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "closed_date": 1485374787, "answer_count": 0, "score": 1, "last_activity_date": 1485379388, "creation_date": 1485371219, "last_edit_date": 1485379388, "question_id": 41859642, "link": "https://stackoverflow.com/questions/41859642/add-unescaped-entities-to-document-with-nokogiri", "closed_reason": "Duplicate", "title": "Add unescaped entities to document with Nokogiri", "body": "<p>I have a document that looks like this:</p>\n\n<pre><code>&lt;text&gt;foo\n    &amp;lt;bar&amp;gt;\n    baz\n&lt;/text&gt;\n</code></pre>\n\n<p>That is, containing text nodes with line breaks, entities and the like.</p>\n\n<p>Due to one of the databases and search engines we use (not my choice) I have to append <code>&amp;xA;</code> to each line within that text node. Here's what I tried.</p>\n\n<pre><code>doc = Nokogiri::XML(\"&lt;text&gt;foo\\n&amp;lt;bar&amp;gt;\\nbaz&lt;/text&gt;\")\ntext_node = doc.xpath(\"/text\")[0]\nold_content = text_node.content.to_s\nnew_content = String.new\nold.content.each do |line|\n    new_content &lt;&lt; line.sub(/$/, \"&amp;xA;\")\nend\ntext_node.content = new_content\ntext_node.to_xml\n</code></pre>\n\n<p>Unfortunately, that escapes the entities themselves and I get:</p>\n\n<pre><code>\"&lt;text&gt;foo&amp;amp;xA;\\n&amp;lt;bar&amp;gt;&amp;amp;xA;\\nbaz&lt;/text&gt;\"\n</code></pre>\n\n<p>I am looking for a way to preserve existing entities but add new literal entities within the text content. Also worth mentioning this system is running older libraries (ruby 1.8.7, nokogiri 1.5.0).</p>\n\n<p>Edit: This is not a duplicate of the question on using the XML builder. I tried using the builder and my problems multiplied: it doesn't insert <code>&amp;xA;</code> (or <code>&amp;#10;</code>) but instead a newline. This is a problem because the system I'm storing in removes newlines from data. It also escapes my existing entities so I end up with things like <code>&amp;amp;gt;</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1485373675, "post_id": 41858911, "comment_id": 70904474, "body": "You are duplicating your questions. Don&#39;t do that. Instead, remove one and incorporate the content of the two questions into the other. Asking twice is not good because it dilutes the quality of your question, and confuses those in the future who are searching for a similar solution."}, {"owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485376026, "post_id": 41858911, "comment_id": 70905763, "body": "Sorry, I deleted that."}, {"owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485376046, "post_id": 41858911, "comment_id": 70905781, "body": "Now, can you help me with the problem ?"}], "answers": [{"comments": [{"owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "edited": false, "score": 0, "creation_date": 1485375898, "post_id": 41860925, "comment_id": 70905699, "body": "I cannot show or hide them as partials are having infinite scrolling divs of users posts ... I thought about that but not possible. :/"}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 1, "last_activity_date": 1485376832, "last_edit_date": 1485376832, "creation_date": 1485375523, "answer_id": 41860925, "question_id": 41858911, "link": "https://stackoverflow.com/questions/41858911/render-a-layout-on-button-click-in-rails/41860925#41860925", "title": "Render a layout on button click in rails", "body": "<p>You cannot render dynamically using Rails' layouts alone. Your simplest option is to render both partials in their own hidden divs:</p>\n\n<pre><code>#main_div\n    show feeds from : \n        %button.dropbtn{'onclick':'myfunc()'}\n        Dropdown\n        %span.caret\n    #myDropdown.dropdown-content\n        =link_to 'public', onclick: 'showDiv(\"#public-content\")'\n        =link_to 'followers', onclick: 'showDiv(\"#followers-content\")'\n    #public-content\n        =render 'progress_public'\n    #followers-content\n        =render 'progress_followers'\n</code></pre>\n\n<p>Then in CSS:</p>\n\n<pre><code>#public-content, #followers-content {\n    display: none;\n}\n</code></pre>\n\n<p>Then in JavaScript using jQuery:</p>\n\n<pre><code>function showDiv(divId) {\n    $(divId).show();\n}\n</code></pre>\n\n<p>If you don't want all partials rendered at once, you need to look into using AJAX calls to update part of the page dynamically.</p>\n"}], "owner": {"reputation": 311, "user_id": 6487334, "user_type": "registered", "accept_rate": 43, "profile_image": "https://lh5.googleusercontent.com/-mR_kAM02zew/AAAAAAAAAAI/AAAAAAAAAB4/JxJCA3D5shE/photo.jpg?sz=128", "display_name": "Alaap Dhall", "link": "https://stackoverflow.com/users/6487334/alaap-dhall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485376832, "creation_date": 1485368831, "last_edit_date": 1485373778, "question_id": 41858911, "link": "https://stackoverflow.com/questions/41858911/render-a-layout-on-button-click-in-rails", "title": "Render a layout on button click in rails", "body": "<p><a href=\"https://i.stack.imgur.com/hCfwA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hCfwA.png\" alt=\"This is my drop down button\"></a></p>\n\n<p>I am using Rails to render a layout depending on what user has selected from this dropdown menu and I have no idea how may I render a layout from within link_to</p>\n\n<pre><code>eg:\n #main_div\n    show feeds from : \n        %button.dropbtn{'onclick':'myfunc()'}\n            Dropdown\n            %span.caret\n        #myDropdown.dropdown-content\n            =link_to 'public'\n            =link_to 'followers'\n    =render 'progress'\n</code></pre>\n\n<p>in this the way I am rendering progress statically I want to render it on button click something like this :</p>\n\n<pre><code>  =link_to 'public' , render: 'progress'\n</code></pre>\n\n<p>One more problem is that even if this works I want layout to be rendered in another div (main div as of snippet ) not in link_to's div as you can see in code</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "xampp", "mysql2"], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 7757505, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2f06084eabaf2de4a9cb481be44f436?s=128&d=identicon&r=PG&f=1", "display_name": "kergrau", "link": "https://stackoverflow.com/users/7757505/kergrau"}, "is_accepted": false, "score": 0, "last_activity_date": 1513871474, "creation_date": 1513871474, "answer_id": 47928416, "question_id": 41858743, "link": "https://stackoverflow.com/questions/41858743/how-to-use-mysql-in-rails-with-xampp-in-ubuntu-16-04/47928416#47928416", "title": "How to use MySQL in Rails with XAMPP in Ubuntu 16.04", "body": "<p>First install ruby, ruby on rails and XAMPP. Then, type in your terminal...</p>\n\n<pre><code>sudo apt-get update\nsudo apt-get install mysql-client libmysqlclient-dev\ngem install mysql2\n</code></pre>\n\n<p>Before create proyect, create the follow databases in phpmyadmin</p>\n\n<p>appname_development</p>\n\n<p>appname_test</p>\n\n<p>appname_production</p>\n\n<p>Lastly, to create your proyect... type this in your terminal: </p>\n\n<p>rails new appname -d mysql</p>\n\n<p>Reference:<a href=\"https://www.digitalocean.com/community/tutorials/how-to-use-mysql-with-your-ruby-on-rails-application-on-ubuntu-14-04\" rel=\"nofollow noreferrer\">How To Use MySQL with Your Ruby on Rails Application on Ubuntu 14.04</a></p>\n"}], "owner": {"reputation": 51, "user_id": 5813830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d2a04b519a4d2047bbfbd8e12e291bc?s=128&d=identicon&r=PG&f=1", "display_name": "W. Kabir", "link": "https://stackoverflow.com/users/5813830/w-kabir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 397, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1513871474, "creation_date": 1485368204, "last_edit_date": 1485374169, "question_id": 41858743, "link": "https://stackoverflow.com/questions/41858743/how-to-use-mysql-in-rails-with-xampp-in-ubuntu-16-04", "title": "How to use MySQL in Rails with XAMPP in Ubuntu 16.04", "body": "<p>I have XAMPP and use it to develop my PHP projects. I have also Ruby on Rails on my system, and I want to use MySQL from my XAMPP stack in my Rails projects. I installed the mysql2 gem:</p>\n\n<pre><code>sudo gem install mysql2 -- --with-mysql-config=\"/opt/lampp/bin/\" --with-mysql-include=\"/opt/lampp/include/\" --with-mysql-lib=\"/opt/lampp/lib/mysql/\"\n</code></pre>\n\n<p>Also, I tried:</p>\n\n<pre><code>bundle update mysql2 -- --with-mysql-config=\"/opt/lampp/bin/\" --with-mysql-include=\"/opt/lampp/include/\" --with-mysql-lib=\"/opt/lampp/lib/mysql/\"\n</code></pre>\n\n<p>But in both the cases I got the following error when I ran <code>rails s</code>:</p>\n\n<pre><code>/home/sanjib/.rubies/ruby-2.3.0/bin/ruby: symbol lookup error: /home/sanjib/.gem/ruby/2.3.0/gems/mysql2-0.4.5/lib/mysql2/mysql2.so: undefined symbol: mysql_server_init\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3695, "user_id": 1074558, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/af92c7f9716e814795682a607057d6b3?s=128&d=identicon&r=PG", "display_name": "atreat", "link": "https://stackoverflow.com/users/1074558/atreat"}, "edited": false, "score": 0, "creation_date": 1485367209, "post_id": 41858393, "comment_id": 70900743, "body": "sounds like you want to use a Hash as the root data structure instead of an Array."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1485367364, "post_id": 41858393, "comment_id": 70900844, "body": "<code>array.find { |hash| hash.keys.include?(500) }.values.first</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485367540, "post_id": 41858393, "comment_id": 70900951, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We&#39;d like to see what your attempt to solve the question was. Without that it looks very much like you want us to solve it for you. Also <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a> will help explain."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485373286, "post_id": 41858393, "comment_id": 70904266, "body": "&quot;key&#39;s like 500/600&quot;? You have a key that is a string containing two actual keys? Or does that mean you have keys like 500 or 600? Detail and accuracy is important when you ask for help."}], "answers": [{"comments": [{"owner": {"reputation": 2548, "user_id": 792302, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7592301b2a28ee03072e8a9f539f96b1?s=128&d=identicon&r=PG", "display_name": "vinothini", "link": "https://stackoverflow.com/users/792302/vinothini"}, "edited": false, "score": 0, "creation_date": 1485372620, "post_id": 41858692, "comment_id": 70903903, "body": "Hi @oMiKey thanks for your input. I have another question regarding this. Can I ask?"}, {"owner": {"reputation": 2548, "user_id": 792302, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7592301b2a28ee03072e8a9f539f96b1?s=128&d=identicon&r=PG", "display_name": "vinothini", "link": "https://stackoverflow.com/users/792302/vinothini"}, "edited": false, "score": 0, "creation_date": 1485373608, "post_id": 41858692, "comment_id": 70904434, "body": "I have this array [{103=&gt;{&quot;id&quot;=&gt;107, &quot;country&quot;=&gt;&quot;USA&quot;}}, {103=&gt;{&quot;id&quot;=&gt;108, &quot;country&quot;=&gt;&quot;UK&quot;}, {104=&gt;{&quot;id&quot;=&gt;109, &quot;country&quot;=&gt;&quot;USA&quot;}}, {104=&gt;{&quot;id&quot;=&gt;110, &quot;country&quot;=&gt;&quot;USA&quot;}}, {104=&gt;{&quot;id&quot;=&gt;111, &quot;country&quot;=&gt;&quot;AUS&quot;}}]   I have 104, USA to  In the view I want to show 1) count as 2 (how many matches) 2) any one if the object {104=&gt;{&quot;id&quot;=&gt;109, &quot;country&quot;=&gt;&quot;USA&quot;}  Do you have any idea about this? @oMikey"}, {"owner": {"reputation": 2548, "user_id": 792302, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7592301b2a28ee03072e8a9f539f96b1?s=128&d=identicon&r=PG", "display_name": "vinothini", "link": "https://stackoverflow.com/users/792302/vinothini"}, "edited": false, "score": 0, "creation_date": 1485375574, "post_id": 41858692, "comment_id": 70905515, "body": "Thanks a lot @oMikeY. You did this in few min. I struggleing on hours :( May I know your twitter account"}, {"owner": {"reputation": 2548, "user_id": 792302, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7592301b2a28ee03072e8a9f539f96b1?s=128&d=identicon&r=PG", "display_name": "vinothini", "link": "https://stackoverflow.com/users/792302/vinothini"}, "reply_to_user": {"reputation": 6100, "user_id": 3704297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjB9f.jpg?s=128&g=1", "display_name": "omikes", "link": "https://stackoverflow.com/users/3704297/omikes"}, "edited": false, "score": 0, "creation_date": 1485376071, "post_id": 41858692, "comment_id": 70905801, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/134027/discussion-between-vinothini-and-omikey\">continue this discussion in chat</a>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485377083, "post_id": 41858692, "comment_id": 70906357, "body": "Rather than creating one large hash, wouldn&#39;t it be more efficient to check each hash in turn, looking for the desired key? That way, the search terminates as soon as the target key is found (if it is found): <code>h = hash.find { |h| h.keys.include?(500) }; h.nil? nil : h[500]</code>. btw, <code>hash</code> is an unusual name for an array. :-)"}], "tags": [], "owner": {"reputation": 6100, "user_id": 3704297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjB9f.jpg?s=128&g=1", "display_name": "omikes", "link": "https://stackoverflow.com/users/3704297/omikes"}, "is_accepted": true, "score": 2, "last_activity_date": 1485368532, "last_edit_date": 1485368532, "creation_date": 1485367989, "answer_id": 41858692, "question_id": 41858393, "link": "https://stackoverflow.com/questions/41858393/ruby-array-of-hashes-find-values-by-key/41858692#41858692", "title": "Ruby array of hashes find values by key", "body": "<p>I believe simple reduce method should work:</p>\n\n<pre><code>hash = [{500=&gt;{\"id\"=&gt;1, \"name\"=&gt;\"Hock Tong Bee Pte Ltd/ Corner stone wines\", \"created_at\"=&gt;\"Thu, 19 Jan 2017 18:10:35 UTC +00:00\", \"updated_at\"=&gt;\"Thu, 19 Jan 2017 18:10:35 UTC +00:00\", \"website\"=&gt;nil, \"status\"=&gt;nil, \"industry_type_id\"=&gt;1, \"major_category_id\"=&gt;1, \"minor_category_id\"=&gt;75, \"save_as_draft\"=&gt;false, \"company_id\"=&gt;1}}, {600=&gt;{\"id\"=&gt;2, \"name\"=&gt;\"Continental Wines\", \"created_at\"=&gt;\"Thu, 19 Jan 2017 18:10:35 UTC +00:00\", \"updated_at\"=&gt;\"Thu, 19 Jan 2017 18:10:35 UTC +00:00\", \"website\"=&gt;nil, \"status\"=&gt;nil, \"industry_type_id\"=&gt;1, \"major_category_id\"=&gt;1, \"minor_category_id\"=&gt;75, \"save_as_draft\"=&gt;false, \"company_id\"=&gt;2}}]\nyour_value = hash.reduce({}) { |h, v| h.merge v }[500]\n</code></pre>\n"}], "owner": {"reputation": 2548, "user_id": 792302, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/7592301b2a28ee03072e8a9f539f96b1?s=128&d=identicon&r=PG", "display_name": "vinothini", "link": "https://stackoverflow.com/users/792302/vinothini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1954, "favorite_count": 0, "closed_date": 1485377251, "accepted_answer_id": 41858692, "answer_count": 1, "score": -2, "last_activity_date": 1485368990, "creation_date": 1485366975, "question_id": 41858393, "link": "https://stackoverflow.com/questions/41858393/ruby-array-of-hashes-find-values-by-key", "closed_reason": "Needs more focus", "title": "Ruby array of hashes find values by key", "body": "<p>I have an array like below</p>\n\n<blockquote>\n  <p>[{500=>{\"id\"=>1, \"name\"=>\"Hock Tong Bee Pte Ltd/ Corner stone wines\",\n  \"created_at\"=>Thu, 19 Jan 2017 18:10:35 UTC +00:00, \"updated_at\"=>Thu,\n  19 Jan 2017 18:10:35 UTC +00:00, \"website\"=>nil, \"status\"=>nil,\n  \"industry_type_id\"=>1, \"major_category_id\"=>1,\n  \"minor_category_id\"=>75, \"save_as_draft\"=>false, \"company_id\"=>1}},\n  {600=>{\"id\"=>2, \"name\"=>\"Continental Wines\", \"created_at\"=>Thu, 19 Jan\n  2017 18:10:35 UTC +00:00, \"updated_at\"=>Thu, 19 Jan 2017 18:10:35 UTC\n  +00:00, \"website\"=>nil, \"status\"=>nil, \"industry_type_id\"=>1, \"major_category_id\"=>1, \"minor_category_id\"=>75,\n  \"save_as_draft\"=>false, \"company_id\"=>2}}]</p>\n</blockquote>\n\n<p>I have key's like 500/600 from this array i want tot get that object.\nI need to write one method, I will pass key only that should return appropriate object. Example if I send key is 500 result should be </p>\n\n<blockquote>\n  <p>{\"id\"=>1, \"name\"=>\"Hock Tong Bee Pte Ltd/ Corner stone wines\",\n  \"created_at\"=>Thu, 19 Jan 2017 18:10:35 UTC +00:00, \"updated_at\"=>Thu,\n  19 Jan 2017 18:10:35 UTC +00:00, \"website\"=>nil, \"status\"=>nil,\n  \"industry_type_id\"=>1, \"major_category_id\"=>1,\n  \"minor_category_id\"=>75, \"save_as_draft\"=>false, \"company_id\"=>1}</p>\n</blockquote>\n\n<p>Anyone have idea on how to achieve this in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 470, "user_id": 1419458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40be82026a81f18a2bbbaad209694e0?s=128&d=identicon&r=PG", "display_name": "Stanko Krtali\u0107 Rusendi\u0107", "link": "https://stackoverflow.com/users/1419458/stanko-krtali%c4%87-rusendi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1485367107, "last_edit_date": 1495542257, "creation_date": 1485367107, "answer_id": 41858434, "question_id": 41858049, "link": "https://stackoverflow.com/questions/41858049/ruby-on-rails-custom-token-expiration/41858434#41858434", "title": "Ruby on Rails - Custom token expiration", "body": "<p>Postgres doesn't have a counterpart feature.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/26046816/is-there-a-way-to-set-an-expiry-time-after-wich-a-data-entry-is-automatically\">There is another question quite similar to yours</a> which may help you resolve this issue.</p>\n\n<p>If you don't need to delete the row from your table then you could simply add an <code>expires_at</code> field which you set to the date-time when the token isn't valid anymore. Then you would be able to get the valid tokens by adding the following <code>where</code> method call.</p>\n\n<pre><code>Token.where('expires_at &lt; ?', Time.zone.now)\n</code></pre>\n"}], "owner": {"reputation": 1420, "user_id": 1436610, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Ow8Cb.jpg?s=128&g=1", "display_name": "Coding active", "link": "https://stackoverflow.com/users/1436610/coding-active"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485367107, "creation_date": 1485365809, "question_id": 41858049, "link": "https://stackoverflow.com/questions/41858049/ruby-on-rails-custom-token-expiration", "title": "Ruby on Rails - Custom token expiration", "body": "<p>I'm currently migrating a Rails application running with Mongodb to move to Psql. There are some roadblocks and this is one of them that I'm investigating solutions for. Is there a way to set expiration index on a model attribute or an alternative solution to achieve similar functionality? This is how we have implemented in Mongo,</p>\n\n<pre><code>field :impersonate_token\nindex({ impersonate_token: 1 }, expire_after_seconds: 60)\n</code></pre>\n\n<p>This is a custom token with :impersonatable by devise. \nPlease share if you know of a way to achieve this with Postgres. </p>\n\n<p>Thank you. </p>\n"}, {"tags": ["ruby", "jsonpath"], "comments": [{"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1485368421, "post_id": 41857889, "comment_id": 70901445, "body": "In what way does it not work?"}, {"owner": {"reputation": 1991, "user_id": 574591, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9505b9216fdae1f6735ed821cfa7e7f8?s=128&d=identicon&r=PG", "display_name": "Alina", "link": "https://stackoverflow.com/users/574591/alina"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1485379953, "post_id": 41857889, "comment_id": 70907814, "body": "@WayneConrad it throws an error <code>SyntaxError: (eval):1: syntax error, unexpected &#39;]&#39;</code>"}], "owner": {"reputation": 1991, "user_id": 574591, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/9505b9216fdae1f6735ed821cfa7e7f8?s=128&d=identicon&r=PG", "display_name": "Alina", "link": "https://stackoverflow.com/users/574591/alina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485365294, "creation_date": 1485365294, "question_id": 41857889, "link": "https://stackoverflow.com/questions/41857889/ruby-jsonpath-accessing-with-if-case", "title": "ruby: jsonpath accessing with if case", "body": "<p>I have a following json. With a jsonpath gem I can access child events via</p>\n\n<pre><code>JsonPath.new(\"$.child_events[*]\").on(b)\n</code></pre>\n\n<p>However, I need to check if in child_events there is a \"via_reference_id\".</p>\n\n<pre><code>JsonPath.new(\"$[?(@.child_events[*].via_reference_id)].ticket_id\").on(b)\n</code></pre>\n\n<p>But this does not work. How can I access ticket_id only if there is a 'via_reference_id\" in any of the child_events?</p>\n\n<pre><code>b = {\"created_at\"=&gt;\"2016-12-12T23:03:45Z\", \"ticket_id\"=&gt;24510, \"timestamp\"=&gt;1481583825, \"event_type\"=&gt;\"Audit\", \"system\"=&gt;{\"longitude\"=&gt;nil, \"location\"=&gt;nil, \"client\"=&gt;nil, \"latitude\"=&gt;nil}, \"id\"=&gt;110084880989, \"updater_id\"=&gt;7964288149, \"via\"=&gt;\"Web form\", \"child_events\"=&gt;[{\"event_type\"=&gt;\"Change\", \"previous_value\"=&gt;\"offered\", \"id\"=&gt;110084881029, \"via_reference_id\"=&gt;nil, \"satisfaction_score\"=&gt;\"good\", \"via\"=&gt;\"Web form\"}, {\"status\"=&gt;\"open\", \"event_type\"=&gt;\"Change\", \"via\"=&gt;\"Rule\", \"id\"=&gt;110084881109, \"via_reference_id\"=&gt;46315149, \"rel\"=&gt;\"trigger\", \"previous_value\"=&gt;\"solved\"}]}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "upgrade", "ruby-on-rails-5", "rails-4-upgrade"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1485364224, "post_id": 41857463, "comment_id": 70898864, "body": "What&#39;s in your <code>Gemfile</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7351238"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1485364296, "post_id": 41857463, "comment_id": 70898900, "body": "@Iceman Ah ha! I think I&#39;ve spotted the problem! Thanks..."}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7351238"}, "is_accepted": true, "score": 3, "last_activity_date": 1485364902, "creation_date": 1485364902, "answer_id": 41857774, "question_id": 41857463, "link": "https://stackoverflow.com/questions/41857463/upgrading-from-ruby-on-rails-4-2-7-1-to-5-0-1-still-tries-to-use-railties-4-2/41857774#41857774", "title": "Upgrading from Ruby on Rails 4.2.7.1 to 5.0.1 -- still tries to use railties 4.2.7.1", "body": "<p>The problem was in the Gemfile, which contained old version numbers. I updated to the following: </p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '5.0.1'\n# Use mysql as the database for Active Record\ngem 'mysql2', '&gt;= 0.3.13', '&lt; 0.5'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0.6'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 3.0.4'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2.1'\n# See https://github.com/rails/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.4.1'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.1', group: :doc\n\n# Use ActiveModel has_secure_password\ngem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\ngem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n</code></pre>\n\n<p>Then ran <code>bundle update</code> followed by <code>bundle install</code> and now have Rails 5.0.1. Thanks to Iceman for suggesting looking in the Gemfile! </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7351238"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 437, "favorite_count": 0, "accepted_answer_id": 41857774, "answer_count": 1, "score": 0, "last_activity_date": 1497557383, "creation_date": 1485364003, "question_id": 41857463, "link": "https://stackoverflow.com/questions/41857463/upgrading-from-ruby-on-rails-4-2-7-1-to-5-0-1-still-tries-to-use-railties-4-2", "title": "Upgrading from Ruby on Rails 4.2.7.1 to 5.0.1 -- still tries to use railties 4.2.7.1", "body": "<p>I'm creating a website but have accidentally installed Ruby on Rails version 4 instead of version 5 and would like to upgrade to the latest version in order to use a few of the features that are currently missing from the version I have on my system.</p>\n\n<p>I have tried following this guide:</p>\n\n<p><a href=\"http://railsapps.github.io/updating-rails.html\" rel=\"nofollow noreferrer\">http://railsapps.github.io/updating-rails.html</a></p>\n\n<p>I installed <code>rvm</code> and ran all the preliminaries in order, up until this section:</p>\n\n<pre><code>rvm use ruby-2.3.1@rails5.0 --create\ngem install rails\nrails -v\n</code></pre>\n\n<p>Where I ran into problems. <code>rvm use ruby-2.3.1@rails5.0 --create</code> outputs: </p>\n\n<pre><code>ruby-2.3.1 - #gemset created /home/dev/.rvm/gems/ruby-2.3.1@rails5.0\nruby-2.3.1 - #generating rails5.0 wrappers..........\nUsing /home/dev/.rvm/gems/ruby-2.3.1 with gemset rails5.0\n</code></pre>\n\n<p>Fine. <code>Gem install rails</code> also proceeds without error, installing all 36 gems including, crucially:</p>\n\n<pre><code>Fetching: rails-5.0.1.gem (100%)\nSuccessfully installed rails-5.0.1\n</code></pre>\n\n<p>and</p>\n\n<pre><code>Fetching: railties-5.0.1.gem (100%)\nSuccessfully installed railties-5.0.1\n</code></pre>\n\n<p>However, when I run <code>rails -v</code> directly afterwards, I get:</p>\n\n<pre><code>Could not find proper version of railties (4.2.7.1) in any of the sources  \nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>When I run <code>bundle install</code>, however, the system reverts to rails 4.2.7.1. </p>\n\n<p>Do I need to do something extra to install/link/whatever railties 4.2.7.1,  and to stop the system reverting to the original version of rails? I don't use rails very much so I'm not particularly familiar with the configuration. Perhaps I need to change a config file within my app?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "spreadsheet", "import-from-excel"], "comments": [{"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1485364836, "post_id": 41857284, "comment_id": 70899224, "body": "Why shouldn&#39;t it make a difference?"}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "reply_to_user": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1485364994, "post_id": 41857284, "comment_id": 70899343, "body": "Because the Roo gem documentation states that it works with both file types. Using <code>header = xlsx.row(1)</code> it shows that all columns are in the expected place."}, {"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1485365508, "post_id": 41857284, "comment_id": 70899692, "body": "Right, it can open it, but you gotta use a different method for reading values."}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1485365125, "post_id": 41857815, "comment_id": 70899438, "body": "I&#39;ll give that a try then."}, {"owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "edited": false, "score": 0, "creation_date": 1485365820, "post_id": 41857815, "comment_id": 70899878, "body": "Do you have any advice as to how I might put that into an <code>each do</code> statement?"}], "tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": false, "score": 0, "last_activity_date": 1485367645, "last_edit_date": 1485367645, "creation_date": 1485365016, "answer_id": 41857815, "question_id": 41857284, "link": "https://stackoverflow.com/questions/41857284/importing-a-csv-to-rails-database/41857815#41857815", "title": "Importing a CSV to Rails database", "body": "<p>It does actually makes a difference that you're trying to read a CSV file using the Excel methods.</p>\n\n<p>Excerpts from the <code>Roo</code> documentation.</p>\n\n<pre><code># Load a CSV file\ns = Roo::CSV.new(\"mycsv.csv\")\n\n# Load a tab-delimited csv\ns = Roo::CSV.new(\"mytsv.tsv\", csv_options: {col_sep: \"\\t\"})\n\n# Load a csv with an explicit encoding\ns = Roo::CSV.new(\"mycsv.csv\", csv_options: {encoding: Encoding::ISO_8859_1})\n</code></pre>\n\n<p>A neat way to read both Excel and CSV files is to do something like</p>\n\n<pre><code>if File.extname(filename).start_with?('xls')\n  workbook = Roo::Excel.new(filename)  \nelse\n  workbook = Roo::CSV.new(filename)\nend\n\nworkbook.default_sheet = workbook.sheets[0]\n\n(workbook.first_row..workbook.last_row).each do |line|\n  ...\nend\n</code></pre>\n"}], "owner": {"reputation": 347, "user_id": 3050230, "user_type": "registered", "accept_rate": 61, "profile_image": "https://graph.facebook.com/193200241/picture?type=large", "display_name": "Dave C", "link": "https://stackoverflow.com/users/3050230/dave-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 404, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485367645, "creation_date": 1485363455, "last_edit_date": 1495541340, "question_id": 41857284, "link": "https://stackoverflow.com/questions/41857284/importing-a-csv-to-rails-database", "title": "Importing a CSV to Rails database", "body": "<p>I asked <a href=\"https://stackoverflow.com/questions/41825487/extract-data-from-excel-spreadsheet-into-database-in-ruby\">this</a> question earlier this week, and it worked fine. I just tried it with a slightly bigger spreadsheet and it doesn't seem to work for some reason. </p>\n\n<p>My code is as follows:</p>\n\n<pre><code>require 'roo'\n\nxlsx = Roo::Spreadsheet.open(File.expand_path('../Downloads/unistats/LOCATION.csv'))\nxlsx.each_row_streaming(offset: 1) do |row|\n    Location.find_or_create_by(ukprn: row[0].value, accomurl: row[1].value, instbeds: row[3].value, instlower: row[4].value, instupper: row[5].value, locid: row[6].value, locname: row[7].value, lat: row[9].value, long: row[10].value, locukprn: row[11].value, loccountry: row[12].value, privatelower: row[13].value, privateupper: row[14].value, suurl: row[15].value)\nend\n</code></pre>\n\n<p>But unlike last time, this is coming up with this error:</p>\n\n<pre><code>NoMethodError: undefined method `each_row_streaming' for #&lt;Roo::CSV:0xb9e0b78&gt;\nDid you mean?  each_row_using_tempdir\n</code></pre>\n\n<p>This file is a CSV rather than .xlsx but that shouldn't make a difference.</p>\n\n<p>Any ideas what I'm doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1485363407, "post_id": 41857112, "comment_id": 70898304, "body": "What&#39;s the issue? That would seem to be expected behavior?"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1485363514, "post_id": 41857112, "comment_id": 70898367, "body": "@DaveNewton Is it not the basic behavior if I do <code>User.destroy</code> it must be deleted from db?"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1485363908, "post_id": 41857112, "comment_id": 70898637, "body": "@DaveNewton And thats now the behavior what I expect if I want to change state. It still should be accessible from Rails console."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1485364010, "post_id": 41857112, "comment_id": 70898716, "body": "... The whole point of safe-deleting is to <i>not</i> remove it from the DB. Most safe-delete gems have a default scope that excludes &quot;deleted&quot; instances. That&#39;s what safe deleting is <i>for</i>."}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1485364379, "post_id": 41857112, "comment_id": 70898952, "body": "@DaveNewton Ok, lets split. First, if I do <code>User.destroy</code> I should not see record in DB, but I do (I did it before created safe delete with AASM). Second, if I update attributes of record (state with AASM gem), they should not hide record from Rails console, but still it do"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1485364950, "post_id": 41857112, "comment_id": 70899313, "body": "Second point first: this isn&#39;t correct. The entire point of a safe-delete is to remove it from your default Rails queries. If you do an unscoped query you&#39;ll see it--but that defeats the purpose of safe-delete. Obviously safe-deleting won&#39;t remove it from the DB. If <i>before</i> any safe-delete was in place you did a <code>destroy</code> and it <i>wasn&#39;t</i> removed from the DB, then something was altering your code&#39;s behavior, because that&#39;s precise what <code>destroy</code> does. If it didn&#39;t, it&#39;s almost certainly (a) not a Rails bug and (b) likely programmer error."}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1485365208, "post_id": 41857112, "comment_id": 70899495, "body": "@DaveNewton so you saying one of gem modified default scope for rails query?"}, {"owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1485365291, "post_id": 41857112, "comment_id": 70899551, "body": "@DaveNewton Yes, checked. You right. Can you post answer, so I could up your rating?"}], "answers": [{"tags": [], "owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "is_accepted": true, "score": 1, "last_activity_date": 1485365523, "creation_date": 1485365523, "answer_id": 41857969, "question_id": 41857112, "link": "https://stackoverflow.com/questions/41857112/rails-model-store/41857969#41857969", "title": "Rails Model Store", "body": "<p>This seems like expected behavior.</p>\n\n<p>Most safe-delete mechanisms amend the default scope to exclude \"deleted\" records. Performing an unscoped query would return both the \"deleted\" and non-\"deleted\" records.</p>\n\n<p>Since the records are not physically removed from the DB anything that bypasses the Rails scope mechanisms (like a query from a DB console or IDE) would show the \"deleted\" records along with whatever flag/state is used to indicate they've been (virtually) \"deleted\".</p>\n\n<p>If, before implementing a safe-delete mechanism, a <code>destroy</code> did <em>not</em> remove the record <em>from the database</em>, then there's something else in the system that's doing some form of safe-delete. Default <code>destroy</code> behavior will physically remove the record from the DB.</p>\n"}], "owner": {"reputation": 510, "user_id": 6412088, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/1770376769864611/picture?type=large", "display_name": "Andrey Drozdov", "link": "https://stackoverflow.com/users/6412088/andrey-drozdov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 41857969, "answer_count": 1, "score": 0, "last_activity_date": 1485365523, "creation_date": 1485362907, "last_edit_date": 1485363370, "question_id": 41857112, "link": "https://stackoverflow.com/questions/41857112/rails-model-store", "title": "Rails Model Store", "body": "<p>I have User model in my project (project was transferred to me and I don't fully understand why this problem is happening).</p>\n\n<p>When User trying to delete his own record or if I do this from Rails console `User.find(1).destroy' I see log:</p>\n\n<pre><code>User Store (16.0ms)  {\"id\":1}\n</code></pre>\n\n<p>But record don't disappears from DB, I don't understand what is it and why it happening.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I've created safe delete method with AASM gem. And when state is changed to removed (in record it looks like <code>state: 0</code> (for created) and <code>state: 1</code> (for removed)) I can't find User with id 1 through console. But when I go to MySQL console I see record with state 1.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 1, "creation_date": 1485362979, "post_id": 41857091, "comment_id": 70897981, "body": "Did you check the Rails site for language compatibility?"}, {"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "reply_to_user": {"reputation": 35578, "user_id": 3000206, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/BK1fo.jpg?s=128&g=1", "display_name": "Carcigenicate", "link": "https://stackoverflow.com/users/3000206/carcigenicate"}, "edited": false, "score": 0, "creation_date": 1485364023, "post_id": 41857091, "comment_id": 70898728, "body": "No, where can i check that?"}], "answers": [{"comments": [{"owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "edited": false, "score": 0, "creation_date": 1485364381, "post_id": 41857256, "comment_id": 70898953, "body": "yes, that is my plan i am going to change my ruby to 2.2 and also change the rails to 3.2.22, the main thing i am looking to ruby 2.2 with new GC feature"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1485363671, "last_edit_date": 1485363671, "creation_date": 1485363355, "answer_id": 41857256, "question_id": 41857091, "link": "https://stackoverflow.com/questions/41857091/can-i-update-to-ruby-2-2-with-rails-3-2-22/41857256#41857256", "title": "Can i update to ruby 2.2 with rails 3.2.22?", "body": "<p>It is not Ruby version dependant on Rails version, but vice versa.</p>\n\n<blockquote>\n  <p>what will be the impact?</p>\n</blockquote>\n\n<p>With your case chances are there will be problems, because <a href=\"http://weblog.rubyonrails.org/2013/2/27/Rails-3-2-13-rc1-has-been-released/\" rel=\"nofollow noreferrer\">Rails 3.2.13 supports Ruby 2.0</a> and <a href=\"http://weblog.rubyonrails.org/2015/6/16/Rails-3-2-22-4-1-11-and-4-2-2-have-been-released-and-more\" rel=\"nofollow noreferrer\">Rails 3.2.22 supports Ruby 2.2</a>.</p>\n\n<p>For the below Rails versions recommended Ruby version is 1.9.3.</p>\n\n<p>So you could (should) upgrade the Rails version to at least 3.2.22 to use Ruby 2.2. This won't be a hard upgrade, since changes would be rather minor.</p>\n"}], "owner": {"reputation": 899, "user_id": 1986039, "user_type": "registered", "accept_rate": 26, "profile_image": "https://i.stack.imgur.com/lLSu0.jpg?s=128&g=1", "display_name": "Developer", "link": "https://stackoverflow.com/users/1986039/developer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 781, "favorite_count": 0, "closed_date": 1485397268, "accepted_answer_id": 41857256, "answer_count": 1, "score": 0, "last_activity_date": 1564465521, "creation_date": 1485362837, "last_edit_date": 1564465521, "question_id": 41857091, "link": "https://stackoverflow.com/questions/41857091/can-i-update-to-ruby-2-2-with-rails-3-2-22", "closed_reason": "Needs more focus", "title": "Can i update to ruby 2.2 with rails 3.2.22?", "body": "<p>I was using <strong>rails 3.2.11</strong> with <strong>ruby 1.9.3</strong>, i was trying to change the version.</p>\n\n<p>My question is if i am going to use <strong>ruby 2.2</strong> with <strong>rails 3.2.22</strong>, is there any chances to fail anywhere? </p>\n\n<p>what will be the impact? will it be any problem with delayed job anything like that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "validation", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 6, "last_activity_date": 1485363123, "creation_date": 1485363123, "answer_id": 41857176, "question_id": 41856958, "link": "https://stackoverflow.com/questions/41856958/ruby-on-rails-how-to-validate-if-on-specific-page/41857176#41857176", "title": "Ruby on Rails: How to validate if on specific page?", "body": "<p>You can create an <code>attr_accessor</code> field that determines if the validation should occur...</p>\n\n<pre><code>class Account &lt; ActiveRecord:Base\n  attr_accessor :port_needs_validation\n  validates :port, presence: true, if: -&gt; {port_needs_validation} \n</code></pre>\n\n<p>Then just set the accessor in your create method...</p>\n\n<pre><code>def create\n  @account = Account.new\n  @account.assign_attributes(account_params)\n  @account.port_needs_validation = true\n  if @account.save\n    ...\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6088, "user_id": 1983072, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/974c4e106b996fff51c25171e439b7b8?s=128&d=identicon&r=PG", "display_name": "bbozo", "link": "https://stackoverflow.com/users/1983072/bbozo"}, "is_accepted": false, "score": 1, "last_activity_date": 1485364093, "last_edit_date": 1485364093, "creation_date": 1485363783, "answer_id": 41857395, "question_id": 41856958, "link": "https://stackoverflow.com/questions/41856958/ruby-on-rails-how-to-validate-if-on-specific-page/41857395#41857395", "title": "Ruby on Rails: How to validate if on specific page?", "body": "<p>Extract that part of the logic into a form object, check out the <a href=\"http://blog.codeclimate.com/blog/2012/10/17/7-ways-to-decompose-fat-activerecord-models/\" rel=\"nofollow noreferrer\">legendary 2012 blog entry from CodeClimate</a>. Things have changed since then, the author uses <code>Virtus</code> to build form objects, more popular &amp; up-to-date gems these days are:</p>\n\n<ul>\n<li><a href=\"https://github.com/trailblazer/reform\" rel=\"nofollow noreferrer\">reform</a></li>\n<li><a href=\"http://cucumbersome.net/2016/09/06/rails-form-objects-with-dry-rb.html\" rel=\"nofollow noreferrer\">dry-rb</a></li>\n<li><a href=\"https://github.com/makandra/active_type\" rel=\"nofollow noreferrer\">active type</a></li>\n<li><a href=\"http://yehudakatz.com/2010/01/10/activemodel-make-any-ruby-object-feel-like-activerecord/\" rel=\"nofollow noreferrer\">but really you can make anything behave like an ActiveModel object</a></li>\n</ul>\n\n<p>if it's a one-off thing, just do <a href=\"https://stackoverflow.com/questions/41856958/ruby-on-rails-how-to-validate-if-on-specific-page/41857176#41857176\">what Steve said in the other answer</a> but that is a sure way to hell, safe-hate and divorce (at least from personal experience) in any <em>slightly teeny weeny</em> bigger project (i.e. you mean to spend some hours more working on it, it's not like you just finished everything and want to go home).</p>\n\n<p>Actually, just use form classes everywhere and avoid model validations &amp; other callbacks at all. You don't want things sending account activation mails or validating your password complexity when you're writing tests and just need a \"post\" that belongs to \"user\".</p>\n\n<p>My own favorite personal fuckup due to model callbacks is sending 240.000 \"your account has been upgraded/downgraded\" emails because of an innocent spelling change update in an <code>account_type</code> attribute migration just because  <code>account_type_changed?</code> was true.</p>\n\n<p>So.. Form classes for ever, model callbacks never.</p>\n"}, {"tags": [], "owner": {"reputation": 109, "user_id": 6497131, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WvNaN.jpg?s=128&g=1", "display_name": "Alba Hoo", "link": "https://stackoverflow.com/users/6497131/alba-hoo"}, "is_accepted": false, "score": 0, "last_activity_date": 1485406067, "creation_date": 1485406067, "answer_id": 41867065, "question_id": 41856958, "link": "https://stackoverflow.com/questions/41856958/ruby-on-rails-how-to-validate-if-on-specific-page/41867065#41867065", "title": "Ruby on Rails: How to validate if on specific page?", "body": "<p>I would not recommend you have <code>model</code> aware of <code>views</code>. In @SteveTurczyn 's solution, an abstract field is introduced into model to identified the which page it come from, which is an good solution.</p>\n\n<p>As from <a href=\"https://betterexplained.com/articles/intermediate-rails-understanding-models-views-and-controllers/\" rel=\"nofollow noreferrer\">Ruby on Rail MVC</a>, both <code>View</code> and <code>Model</code> talk to the controller, another solution will be have controller handle <strong>validation</strong> of params before passing the value to create <code>account</code>.</p>\n"}], "owner": {"reputation": 789, "user_id": 4596273, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/816411745073346/picture?type=large", "display_name": "Ben Smith", "link": "https://stackoverflow.com/users/4596273/ben-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 829, "favorite_count": 0, "accepted_answer_id": 41857176, "answer_count": 3, "score": 0, "last_activity_date": 1485406067, "creation_date": 1485362407, "question_id": 41856958, "link": "https://stackoverflow.com/questions/41856958/ruby-on-rails-how-to-validate-if-on-specific-page", "title": "Ruby on Rails: How to validate if on specific page?", "body": "<p>In my Ruby on Rails application I am trying to add in validations that will ensure the user has entered a value in a text box. In my system I have a table called <code>Account</code> which stores users' email account information, when they go onto the <code>views/accounts/_form.html.erb</code> page to add a new email account I want to validate the presence of a port number. I can do this through the following code:</p>\n\n<pre><code>validates :port, presence: true\n</code></pre>\n\n<p>This successfully ensures that users enter their port number, but when a user signs up through the <code>views/users/_new.html.erb</code> page they have to enter only an email address (e.g example@example.com) and the <code>users_controller</code> will then  create a record in the <code>Account</code> table for this email address. My problem is that on the <code>views/accounts/_form.html.erb</code> page the port number is required but on the <code>views/users/_new.html.erb</code> it is not. </p>\n\n<p>Is there a way of validating that the user enters the port number if they are on the <code>views/accounts/_form.html.erb</code> page or invoking the <code>create</code> method in the <code>accounts_controller</code>?</p>\n\n<p>I am aware that I could do this through the HTML required validation like so: <code>&lt;%= f.text_field :port, :required =&gt; true %&gt;</code> but I need to add in further validation as well as presence, so this is not suitable.</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap", "import"], "comments": [{"owner": {"reputation": 287, "user_id": 5572757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIpu9.png?s=128&g=1", "display_name": "Tophandour", "link": "https://stackoverflow.com/users/5572757/tophandour"}, "edited": false, "score": 0, "creation_date": 1485362249, "post_id": 41856803, "comment_id": 70897451, "body": "What is that link for?"}, {"owner": {"reputation": 9, "user_id": 7443476, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207057461109117/picture?type=large", "display_name": "Peter ", "link": "https://stackoverflow.com/users/7443476/peter"}, "reply_to_user": {"reputation": 287, "user_id": 5572757, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IIpu9.png?s=128&g=1", "display_name": "Tophandour", "link": "https://stackoverflow.com/users/5572757/tophandour"}, "edited": false, "score": 0, "creation_date": 1485362829, "post_id": 41856803, "comment_id": 70897878, "body": "Hey. That is the template I&#39;m attempting to get imported in my Ruby Application! Thanks."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1485363291, "post_id": 41856803, "comment_id": 70898217, "body": "You need to do more than paste a file. See <a href=\"http://stackoverflow.com/questions/15650627/how-to-integrate-a-wrap-bootstrap-theme-into-an-rails-application\" title=\"how to integrate a wrap bootstrap theme into an rails application\">stackoverflow.com/questions/15650627/&hellip;</a>"}, {"owner": {"reputation": 9, "user_id": 7443476, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207057461109117/picture?type=large", "display_name": "Peter ", "link": "https://stackoverflow.com/users/7443476/peter"}, "edited": false, "score": 0, "creation_date": 1485373205, "post_id": 41856803, "comment_id": 70904214, "body": "Thanks! I&#39;ll give this a shot! Fingers crossed!"}], "owner": {"reputation": 9, "user_id": 7443476, "user_type": "registered", "profile_image": "https://graph.facebook.com/10207057461109117/picture?type=large", "display_name": "Peter ", "link": "https://stackoverflow.com/users/7443476/peter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 100, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485361984, "creation_date": 1485361984, "question_id": 41856803, "link": "https://stackoverflow.com/questions/41856803/import-twitter-bootstrap-template-to-ruby-on-rails-application", "title": "Import Twitter Bootstrap Template to Ruby on Rails Application", "body": "<p>I'm currently involved in a complex project which I will require help from this forum in order to complete! I am a novice; and have thus far only completed Michael Hartls Tutorial.</p>\n\n<p>Currently I am attempting to import this template into my new application. I have successfully got Bootstrap working; as the generic text improves. This shows that it is working!</p>\n\n<p>However, when I paste the content from the Index file it does not display correctly. I imagine this is due to incorrect placing of CSS and JS files in the ruby folder.</p>\n\n<p><a href=\"https://startbootstrap.com/template-overviews/creative/\" rel=\"nofollow noreferrer\">https://startbootstrap.com/template-overviews/creative/</a></p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "exchangewebservices", "microsoft-exchange", "viewpoint"], "answers": [{"comments": [{"owner": {"reputation": 454, "user_id": 2895291, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7226366b61afec813362d5cf3b8b427f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardlonesteen", "link": "https://stackoverflow.com/users/2895291/richardlonesteen"}, "edited": false, "score": 0, "creation_date": 1485860401, "post_id": 41954077, "comment_id": 71090459, "body": "I have thousands of users, if i&#39;ll subscribe each like that I&#39;ll get thousands of ews responses every minute. I was wondering if there is a better way ?"}], "tags": [], "owner": {"reputation": 680, "user_id": 5243191, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/ErQEn.jpg?s=128&g=1", "display_name": "CottonEyeJoe", "link": "https://stackoverflow.com/users/5243191/cottoneyejoe"}, "is_accepted": false, "score": 1, "last_activity_date": 1485855512, "creation_date": 1485855512, "answer_id": 41954077, "question_id": 41856371, "link": "https://stackoverflow.com/questions/41856371/ews-ruby-viewpoint-batch-subscribe-push-notifications/41954077#41954077", "title": "EWS ruby viewpoint batch subscribe push notifications", "body": "<p>I would iterate through it. Depending on where the ID's are stored:</p>\n\n<pre><code>@client.ews.subscribe.each do |ces| \nces([{ :push_subscription_request =&gt; {\n  :folder_ids =&gt;  [{id: calendar[:id], change_key: calendar[:change_key]}],\n  :subscribe_to_all_folders =&gt; true,\n  :event_types=&gt;  %w{CopiedEvent CreatedEvent DeletedEvent MovedEvent},\n  :status_frequency =&gt; 1,\n  :uRL =&gt; 'https://51.ngrok.io/ews_watch',\n}])\nend\n</code></pre>\n\n<p>Not testeted, but this should do the trick. Just iterate over the ID's.</p>\n"}], "owner": {"reputation": 454, "user_id": 2895291, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/7226366b61afec813362d5cf3b8b427f?s=128&d=identicon&r=PG&f=1", "display_name": "Richardlonesteen", "link": "https://stackoverflow.com/users/2895291/richardlonesteen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1485855512, "creation_date": 1485360706, "question_id": 41856371, "link": "https://stackoverflow.com/questions/41856371/ews-ruby-viewpoint-batch-subscribe-push-notifications", "title": "EWS ruby viewpoint batch subscribe push notifications", "body": "<p>I'm using viewpoint gem to subscribe to microsoft exchange notification service. \nSo far I managed to subscribe to a single folder by using subscribe method in this: <a href=\"https://github.com/WinRb/Viewpoint/blob/bcda30abdab99f52270f2c24a1c78364c986d967/lib/ews/soap/exchange_notification.rb\" rel=\"noreferrer\">https://github.com/WinRb/Viewpoint/blob/bcda30abdab99f52270f2c24a1c78364c986d967/lib/ews/soap/exchange_notification.rb</a></p>\n\n<p>I tried passing multiple hashes with different folder ids that belong to different accounts on the same server.</p>\n\n<pre><code>client.ews.subscribe(\n[{ :push_subscription_request =&gt; {\n  :folder_ids =&gt;  [{id: calendar[:id], change_key: calendar[:change_key]}],\n  :subscribe_to_all_folders =&gt; true,\n  :event_types=&gt;  %w{CopiedEvent CreatedEvent DeletedEvent MovedEvent},\n  :status_frequency =&gt; 1,\n  :uRL =&gt; 'https://51.ngrok.io/ews_watch',\n}, \n{same again with different calendar ids}]\n)\n</code></pre>\n\n<p>I get the responses from ews, but only for a single calendar folder.</p>\n\n<p>Does anyone know how to batch subscribe to multiple mailboxes on the same server so that I would receive a batch push notification from ews server instead of getting one for each subscription ?</p>\n\n<p>Thank you </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4.2"], "answers": [{"comments": [{"owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "edited": false, "score": 0, "creation_date": 1485369928, "post_id": 41858885, "comment_id": 70902341, "body": "Thanks for replay. I only check this on create.I changed as you suggested but it is still the same. It must be some mistake on my code somewhere. SystemStackError (stack level too deep)..."}, {"owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "reply_to_user": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "edited": false, "score": 0, "creation_date": 1485438548, "post_id": 41858885, "comment_id": 70931473, "body": "If this is a public repo I can take a look at it"}], "tags": [], "owner": {"reputation": 2188, "user_id": 1489914, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7PReX.jpg?s=128&g=1", "display_name": "Tall Paul", "link": "https://stackoverflow.com/users/1489914/tall-paul"}, "is_accepted": false, "score": 0, "last_activity_date": 1485368721, "creation_date": 1485368721, "answer_id": 41858885, "question_id": 41856317, "link": "https://stackoverflow.com/questions/41856317/how-to-specific-after-save-function-with-variables-in-rails-4-model/41858885#41858885", "title": "How to specific after save function with variables in Rails 4 model", "body": "<p>I believe you are running into an issue is because you keep updating your stock which then kicks off the <code>after_save</code> methods. I think a simple change would be to change <code>after_save</code> to <code>after_update</code>. </p>\n\n<p>There are other ways to solve this issue and would recommend you looking into them because these call back hooks after can really cause issues down the road and cause frustrations with trying to find a work around. <a href=\"http://samuelmullen.com/2013/05/the-problem-with-rails-callbacks/\" rel=\"nofollow noreferrer\">Here</a> is an example about how you could handle callbacks.</p>\n\n<p>I would recommend changing a few other things, like you do not need to do </p>\n\n<pre><code>item = Stock.find(stock_id)\n</code></pre>\n\n<p>you can instead just call stock and it nows how to find the correct stock because you specified above </p>\n\n<pre><code>belongs_to :stock\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "is_accepted": false, "score": 0, "last_activity_date": 1485452185, "creation_date": 1485452185, "answer_id": 41879550, "question_id": 41856317, "link": "https://stackoverflow.com/questions/41856317/how-to-specific-after-save-function-with-variables-in-rails-4-model/41879550#41879550", "title": "How to specific after save function with variables in Rails 4 model", "body": "<p>The problem was with use <code>after_save</code> and <code>attribute_update</code> as mentioned by Tall Paul thanks.</p>\n\n<p>I have modified my function witch was saving data and after save was loaded again and again...</p>\n\n<p>I'm using now  </p>\n\n<pre><code>self.update_column(:zysk, 400)\n</code></pre>\n\n<p>To not use callbacks.</p>\n"}], "owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1485452185, "creation_date": 1485360560, "question_id": 41856317, "link": "https://stackoverflow.com/questions/41856317/how-to-specific-after-save-function-with-variables-in-rails-4-model", "title": "How to specific after save function with variables in Rails 4 model", "body": "<p>I'm trying to create little function to calculate benefit after record been saved.\nI have 3 controllers and 3 models: Buy, Sell, Stock\nBuy and Sell belongs_to Stock</p>\n\n<p>I would like to save some calculation in database after save in Sells table.\nSo I did try to do that in Sell model</p>\n\n<pre><code>class Sell &lt; ActiveRecord::Base\nbelongs_to :stock\nafter_save :calculate_selled_stock, :reset_to_zero, :calculate_benefit\nbefore_save :check_amount\n\n#validate :validate_amount\nvalidates :amount, numericality: { only_integer: true, greater_than_or_equal: 0 }\n\n\n\n private\n\n    def calculate_benefit\n    self.update_attribute(:zysk, 400)\n    end\n\n\n    def calculate_selled_stock\n         Stock.find(stock_id)\n         stock.increment! :value, totalprice\n         stock.decrement! :amount, amount\n    end\n\n  def check_amount\n    item = Stock.find(stock_id)\n\n    return false unless item\n    errors.add(:amount, \"Error message\") \n    item.amount_available?(self.amount)\n\n  end\n\n\n\n  def reset_to_zero\n  item = Stock.find(stock_id)\n  item.update_attributes(:amountvalue =&gt; 0, :amoutbuys =&gt; 0) if item.amount_zero?(self.amount)\n  end\n\nend\n</code></pre>\n\n<p>But it will go for infinity loop after you try create.\nHow can I modify this and for example add some variables?</p>\n\n<pre><code>def calculate_benefit\nvar1 = 400\nvar2 = var1*20\nself.update_attribute(:zysk, var2)\nend\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "selenium-chromedriver"], "comments": [{"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 0, "creation_date": 1485360243, "post_id": 41855969, "comment_id": 70896063, "body": "That should work, are you sure chromedriver is on the desktop? Does it run if you go to a terminal an type <code>&#47;Users&#47;J&#47;Desktop&#47;chromedriver</code> ?"}, {"owner": {"reputation": 61, "user_id": 7246034, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c5675c10810976ac3bdad546babe062?s=128&d=identicon&r=PG&f=1", "display_name": "Fianchetto", "link": "https://stackoverflow.com/users/7246034/fianchetto"}, "reply_to_user": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 0, "creation_date": 1485360890, "post_id": 41855969, "comment_id": 70896517, "body": "It does run when I type that exact path into the terminal."}, {"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 0, "creation_date": 1485361130, "post_id": 41855969, "comment_id": 70896691, "body": "can you set <code>$DEBUG = true</code> and then try again, and update your question with the stacktrace?"}, {"owner": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 1, "creation_date": 1485361302, "post_id": 41855969, "comment_id": 70896800, "body": "place it on your PATH, like the error message says"}, {"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 0, "creation_date": 1485361481, "post_id": 41855969, "comment_id": 70896922, "body": "As of the release deprecating the method you mentioned, you should only get that error message if you either didn&#39;t provide a <code>driver_path</code> argument or it can&#39;t be found in your path. If the <code>driver_path</code> argrument is wrong, it should present you with a different error message"}, {"owner": {"reputation": 61, "user_id": 7246034, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c5675c10810976ac3bdad546babe062?s=128&d=identicon&r=PG&f=1", "display_name": "Fianchetto", "link": "https://stackoverflow.com/users/7246034/fianchetto"}, "edited": false, "score": 0, "creation_date": 1485364272, "post_id": 41855969, "comment_id": 70898893, "body": "Okay so I figured out that it errors on this line:  <code>@driver = Selenium::WebDriver.for :chrome</code>. In the updated chrome driver is this still valid? This line runs after I set the driver_path."}, {"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 0, "creation_date": 1485368286, "post_id": 41855969, "comment_id": 70901355, "body": "I thought you said you were doing this instead <code>Selenium::WebDriver.for :chrome, driver_path: &#39;&#47;Users&#47;J&#47;Desktop&#47;chromedriver&#39;</code>"}, {"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 0, "creation_date": 1485368953, "post_id": 41855969, "comment_id": 70901759, "body": "I&#39;m not going to be able to help you unless you provide your entire startup code and/or the stack trace with <code>$DEBUG = true</code>. I tested this functionality extensively when I made the change"}, {"owner": {"reputation": 1325, "user_id": 6139818, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zV0XZ.png?s=128&g=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/6139818/tom"}, "reply_to_user": {"reputation": 53073, "user_id": 16148, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/XTzm1.jpg?s=128&g=1", "display_name": "Corey Goldberg", "link": "https://stackoverflow.com/users/16148/corey-goldberg"}, "edited": false, "score": 0, "creation_date": 1485391130, "post_id": 41855969, "comment_id": 70912008, "body": "Like @CoreyGoldberg said, if you have it in your <code>PATH</code> (environment variable), it should work."}], "owner": {"reputation": 61, "user_id": 7246034, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c5675c10810976ac3bdad546babe062?s=128&d=identicon&r=PG&f=1", "display_name": "Fianchetto", "link": "https://stackoverflow.com/users/7246034/fianchetto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 568, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485359586, "creation_date": 1485359586, "question_id": 41855969, "link": "https://stackoverflow.com/questions/41855969/selenium-not-finding-chrome-driver", "title": "Selenium not finding Chrome Driver?", "body": "<p>In my project I used to access chromedriver like so:</p>\n\n<pre><code>Selenium::WebDriver::Chrome.driver_path = \"/Users/J/Desktop/chromedriver\"\n</code></pre>\n\n<p>however, driver_path is now deprecated, so I've switched to this way:</p>\n\n<pre><code>Selenium::WebDriver.for :chrome, driver_path: '/Users/J/Desktop/chromedriver'\n</code></pre>\n\n<p>I've also updated to the latest chromedriver.</p>\n\n<p>However, for some reason I'm getting the following error:</p>\n\n<pre><code>Unable to find chromedriver. Please download the server from http://chromedriver.storage.googleapis.com/index.html and place it somewhere on your PATH.\n</code></pre>\n\n<p>But haven't I already downloaded it? I'm not sure why it's not able to find it.</p>\n\n<p>Any ideas of why it's no longer working?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485359898, "post_id": 41855715, "comment_id": 70895811, "body": "Don&#39;t forget Ruby allows you to omit the <code>{ ... }</code> braces on hashes if that hash is the last argument. It reduces the amount of clutter in your code."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485359975, "post_id": 41855931, "comment_id": 70895861, "body": "Do you have to update the headers manually when introducing a new column?"}, {"owner": {"reputation": 33, "user_id": 4325472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c510335749121e55d08c3516666f958a?s=128&d=identicon&r=PG&f=1", "display_name": "Pokecallum", "link": "https://stackoverflow.com/users/4325472/pokecallum"}, "edited": false, "score": 0, "creation_date": 1485360626, "post_id": 41855931, "comment_id": 70896315, "body": "Why do I need to convert it to a string, I thought that it was already being read in as one. What would be the best way to count a column instead of row ? Eventually the header will get removed as it will all get fed into logstash"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1485361093, "post_id": 41855931, "comment_id": 70896664, "body": "<code>IO.write(&#39;my_test.csv&#39;, table)</code> should work as well."}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1485361316, "post_id": 41855931, "comment_id": 70896813, "body": "@Pokecallem it is not a string, it&#39;s a <code>CSV::row</code> object. If the headers are unique then you can access columns like this: <code>p table[&quot;Header1&quot;]</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 33, "user_id": 4325472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c510335749121e55d08c3516666f958a?s=128&d=identicon&r=PG&f=1", "display_name": "Pokecallum", "link": "https://stackoverflow.com/users/4325472/pokecallum"}, "edited": false, "score": 1, "creation_date": 1485361938, "post_id": 41855931, "comment_id": 70897251, "body": "@Pokecallum <code>row.to_s</code> joins the fields in that row to a single string using the delimiter given by <code>col_sep</code>. You could also use something like <code>row.fields.sum { |f| f.count(&#39;@&#39;) }</code> \u2013 that would <a href=\"http://ruby-doc.org/core-2.4.0/Array.html#method-i-sum\" rel=\"nofollow noreferrer\"><code>sum</code></a> the number of <code>@</code>&#39;s in each field without incorporating delimiters and quotes (although it doesn&#39;t matter in this case)."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 1, "last_activity_date": 1485359491, "creation_date": 1485359491, "answer_id": 41855931, "question_id": 41855715, "link": "https://stackoverflow.com/questions/41855715/counting-every-line-and-adding-to-the-end-of-each-line-in-a-csv/41855931#41855931", "title": "Counting every line and adding to the end of each line in a csv", "body": "<p>You don't need <code>File.readlines</code>; CSV already read it.</p>\n\n<pre><code>require \"csv\"\ntable = CSV.read(\"test.csv\", { headers: true}) #just shorter\n\ntable.each do |row |  #no readlines\n  at_count = row.to_s.count('@')  # note the to_s\n  row[\"Total\"] = at_count\nend\n\n\nCSV.open(\"my_test.csv\", \"w\") do |f |\n  f &lt;&lt; table.headers\n  table.each { | row | f &lt;&lt; row}\nend\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 4325472, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c510335749121e55d08c3516666f958a?s=128&d=identicon&r=PG&f=1", "display_name": "Pokecallum", "link": "https://stackoverflow.com/users/4325472/pokecallum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 41855931, "answer_count": 1, "score": 0, "last_activity_date": 1485365651, "creation_date": 1485358925, "last_edit_date": 1485365651, "question_id": 41855715, "link": "https://stackoverflow.com/questions/41855715/counting-every-line-and-adding-to-the-end-of-each-line-in-a-csv", "title": "Counting every line and adding to the end of each line in a csv", "body": "<p>What I want to do is count how many @ are in each row and put this value into a total field at the end.</p>\n\n<p>I mean it sort of works, but its only adding the value of the last line it counts.  </p>\n\n<p>My Csv</p>\n\n<pre><code>Header,Header,Header\nInfo@,Info,Info\nInfo,Info@@,Info\nInfo,Info,Info@@@\n</code></pre>\n\n<p>My Code</p>\n\n<pre><code>require \"csv\"\ntable = CSV.read(\"my_test.csv\", {\n  headers: true,\n  col_sep: \",\"\n})\n\nFile.readlines('my_test.csv').each do |line| \n  table.each do |row|\n    at_count = line.count('@')\n    row[\"Total\"] = at_count\n  end\nend\n\nCSV.open(\"my_test.csv\", \"w\") do |f|\n  f &lt;&lt; table.headers\n  table.each { | row | f &lt;&lt; row }\nend\n</code></pre>\n\n<p>Current Result</p>\n\n<pre><code>Header,Header,Header,Total\nInfo@,Info,Info,3\nInfo,Info@@,Info,3\nInfo,Info,Info@@@,3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1485359747, "post_id": 41855696, "comment_id": 70895709, "body": "Thanks Andrey for your response. I am just trying to understand the concept. I edited question for the data i am getting in array. when i do self.class.sum(:points) in method i am getting much bigger number. based on data i should get 2."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1485359913, "post_id": 41855696, "comment_id": 70895820, "body": "@User4432432432 to see what you have in records, do <code>UserWeight.pluck(:points)</code> - this will produce an array of points"}, {"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1485360364, "post_id": 41855696, "comment_id": 70896150, "body": "when i do that i get [nil, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, nil, 0, 0, 0, 0, 1, 0, 1, 1, 1, 0, 0, 1, 1, 1, 1, 1, 0, 1, 1, 1, 0, 1, 0, 0, 0, 0, 0, 0, 1, 1, 0, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 0, 0, 0, 0, 0, 1, 1, 1, 1, 1] and it does add to 23 but on application it shows me 2 Weights arrays with points = 1 and 4 with 0. so did not understand why its returning 23."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1485360450, "post_id": 41855696, "comment_id": 70896207, "body": "@User4432432432 in application (in controller) you are filtering it by means of scope <code>logged_between</code>. <b><i>THUS</i></b>: call the <code>sum(:points)</code> on <code>weight_usages.logged_between(params[:start_date], end_date)</code>: <code>weight_usages.logged_between(params[:start_date], end_date).sum(:points)</code>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1485358881, "creation_date": 1485358881, "answer_id": 41855696, "question_id": 41855642, "link": "https://stackoverflow.com/questions/41855642/how-to-access-class-method-from-instance-method/41855696#41855696", "title": "how to access class method from instance method", "body": "<p>The method looks to make little to no sense, because <code>total_points</code> is an instance method, so why would you want to present the all records <code>points</code>'s sum in an <em>instance method</em>?</p>\n\n<p>Beside the above note, use ActiveRecord's methods. You are looking for <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Calculations.html#method-i-sum\" rel=\"nofollow noreferrer\"><code>sum</code></a>:</p>\n\n<pre><code>UserWeight.sum(:points)\n</code></pre>\n\n<p>In method:</p>\n\n<pre><code>self.class.sum(:points)\n</code></pre>\n"}], "owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1219, "favorite_count": 0, "accepted_answer_id": 41855696, "answer_count": 1, "score": 0, "last_activity_date": 1485360001, "creation_date": 1485358725, "last_edit_date": 1485360001, "question_id": 41855642, "link": "https://stackoverflow.com/questions/41855642/how-to-access-class-method-from-instance-method", "title": "how to access class method from instance method", "body": "<p>I have model:</p>\n\n<pre><code>class UserWeight &lt; ActiveRecord::Base\n\n  self.table_name = 'Weight'\n\n  scope :logged_between, lambda { |start_date, end_date|\n    where(weight_date: start_date.to_date...(end_date.to_date.end_of_day)) unless\n    start_date.nil? || end_date.nil?\n  }\n\n  # returns the sum of points \n  def total_points\n      self.class.Userweight\n    (UserWeight.blank?) ? 0 : UserWeight.inject(0) {|a, e| a + e.points}\n  end\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre><code>@weights = weight_usages.logged_between(params[:start_date], end_date)\n</code></pre>\n\n<p>I get following data in weights:</p>\n\n<pre><code>weights: [\n{\nweight: \"170.0\",\nweight_date: \"2016-12-28\",\npoints: 1\n},\n{\nweight: \"185.0\",\nweight_date: \"2017-01-04\",\npoints: 1\n}\n.......\n ]\n</code></pre>\n\n<p>Active record is returning collection of arrays. I want to access class method and do the sum in the instance method. based on the data i want to return total points 2 from instance method. Any idea how can i do that?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1485359322, "post_id": 41855334, "comment_id": 70895362, "body": "Any alteration on a database at scale will result in down-time during the conversion. For tables that need 64-bit integers, which presumably have hundreds of millions of records in them, that conversion can take a very, very long time. You&#39;ll need to run tests to see how much this will impact your uptime."}, {"owner": {"reputation": 871, "user_id": 4983367, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-d_mRPVFcDzY/AAAAAAAAAAI/AAAAAAAATeU/2EsF2nLrsNQ/photo.jpg?sz=128", "display_name": "Ybrin", "link": "https://stackoverflow.com/users/4983367/ybrin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485359851, "post_id": 41855334, "comment_id": 70895781, "body": "@tadman Thank you, we&#39;ll have a fallback database during the conversion process and synchronize all the new data back before switching back to the main database."}], "answers": [{"comments": [{"owner": {"reputation": 871, "user_id": 4983367, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-d_mRPVFcDzY/AAAAAAAAAAI/AAAAAAAATeU/2EsF2nLrsNQ/photo.jpg?sz=128", "display_name": "Ybrin", "link": "https://stackoverflow.com/users/4983367/ybrin"}, "edited": false, "score": 0, "creation_date": 1485358823, "post_id": 41855525, "comment_id": 70894984, "body": "Will <code>id</code> still have the auto-increment option if I do it like that?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485359252, "post_id": 41855525, "comment_id": 70895306, "body": "Isn&#39;t there a way of doing this with <code>change_column</code>?"}, {"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1485359410, "post_id": 41855525, "comment_id": 70895431, "body": "Nope, doesn&#39;t look like it."}, {"owner": {"reputation": 871, "user_id": 4983367, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-d_mRPVFcDzY/AAAAAAAAAAI/AAAAAAAATeU/2EsF2nLrsNQ/photo.jpg?sz=128", "display_name": "Ybrin", "link": "https://stackoverflow.com/users/4983367/ybrin"}, "edited": false, "score": 0, "creation_date": 1485359597, "post_id": 41855525, "comment_id": 70895583, "body": "Thank you, I&#39;ll try this soon."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485360072, "post_id": 41855525, "comment_id": 70895924, "body": "If this is going to be used a lot, might be worth making a simple wrapper that does it reliably rather than depending on a lot of raw SQL, something like <code>change_id_column_type</code>. Interesting note about Rails 5.1 as well."}], "tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": true, "score": 8, "last_activity_date": 1485359762, "last_edit_date": 1485359762, "creation_date": 1485358451, "answer_id": 41855525, "question_id": 41855334, "link": "https://stackoverflow.com/questions/41855334/rails-change-primary-id-to-64-bit-bigint/41855525#41855525", "title": "Rails change primary id to 64 bit bigint", "body": "<p>While ActiveRecord does not support this, you are able to do it using <code>execute</code></p>\n\n<pre><code>class UpdateUserIdLimit &lt; ActiveRecord::Migration\n  def up\n    # PostgreSQL\n    execute('ALTER TABLE users ALTER COLUMN id SET DATA TYPE BIGINT')\n    # MySQL\n    execute('ALTER TABLE users MODIFY COLUMN id BIGINT(8) NOT NULL AUTO_INCREMENT')\n  end\n\n  def down\n    raise ActiveRecord::IrreversibleMigration\n  end\nend\n</code></pre>\n\n<p>For new tables you should be able to simply do</p>\n\n<pre><code>def change\n  create_table :users, id: false do |t|\n    t.int :id, limit: 8, primary_key: true\n    t.string :first_name\n    t.string :last_name\n  end\nend\n</code></pre>\n\n<p>Also starting with Rails 5.1 primary keys will be <code>BIGINT</code> by default.</p>\n"}, {"comments": [{"owner": {"reputation": 292, "user_id": 4185297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fbzLJ.png?s=128&g=1", "display_name": "W.M.", "link": "https://stackoverflow.com/users/4185297/w-m"}, "edited": false, "score": 5, "creation_date": 1513343476, "post_id": 43878197, "comment_id": 82629017, "body": "The real problem is how to change all associated foreign keys to <code>bigint</code> as well (the constraints themselves)."}, {"owner": {"reputation": 1510, "user_id": 1845602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d271e8f7cf3322dc3b404ffb9deb4f?s=128&d=identicon&r=PG", "display_name": "Edgar Ortega", "link": "https://stackoverflow.com/users/1845602/edgar-ortega"}, "reply_to_user": {"reputation": 292, "user_id": 4185297, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fbzLJ.png?s=128&g=1", "display_name": "W.M.", "link": "https://stackoverflow.com/users/4185297/w-m"}, "edited": false, "score": 1, "creation_date": 1523226291, "post_id": 43878197, "comment_id": 86460337, "body": "You&#39;ll need to drop existing constraints, change column type and then add the constraint again."}, {"owner": {"reputation": 1648, "user_id": 90551, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/cd2f0ae4617476af515cb312f4143b86?s=128&d=identicon&r=PG", "display_name": "Ibrahim", "link": "https://stackoverflow.com/users/90551/ibrahim"}, "edited": false, "score": 1, "creation_date": 1563920764, "post_id": 43878197, "comment_id": 100858924, "body": "This is from the future, but I think at least Rails 4.2 also had <code>:bigint</code> defined, and I was able to convert without having to do anything to the foreign key constraints (drop and re-add). Not sure why that is."}, {"owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "edited": false, "score": 0, "creation_date": 1582122007, "post_id": 43878197, "comment_id": 106668305, "body": "I tried this and it fails with <code>Mysql2::Error: Field &#39;id&#39; doesn&#39;t have a default value</code>"}, {"owner": {"reputation": 3375, "user_id": 3676469, "user_type": "registered", "accept_rate": 17, "profile_image": "https://graph.facebook.com/100003443544248/picture?type=large", "display_name": "Hirurg103", "link": "https://stackoverflow.com/users/3676469/hirurg103"}, "edited": false, "score": 3, "creation_date": 1582134112, "post_id": 43878197, "comment_id": 106675744, "body": "Please note that forgetting <code>autoincrement: true</code> option leads to unexpected errors"}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1609279405, "post_id": 43878197, "comment_id": 115800722, "body": "NOTE, the default is <code>bigint</code> but unfortunately, it is <code>signed</code> instead of <code>unsigned</code>. And it&#39;s not as easy to override the default like before Rails 5.1. If you want <code>unsigned bigint</code> to be the default, check out this Github issue and show your support: <a href=\"https://github.com/rails/rails/issues/40967\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/40967</a>"}], "tags": [], "owner": {"reputation": 1510, "user_id": 1845602, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d271e8f7cf3322dc3b404ffb9deb4f?s=128&d=identicon&r=PG", "display_name": "Edgar Ortega", "link": "https://stackoverflow.com/users/1845602/edgar-ortega"}, "is_accepted": false, "score": 15, "last_activity_date": 1494357557, "creation_date": 1494357557, "answer_id": 43878197, "question_id": 41855334, "link": "https://stackoverflow.com/questions/41855334/rails-change-primary-id-to-64-bit-bigint/43878197#43878197", "title": "Rails change primary id to 64 bit bigint", "body": "<p>Rails 5.1 already added a <code>bigint</code> type for migrations, you can do this:</p>\n\n<pre><code>change_column :users, :id, :bigint\n</code></pre>\n\n<p>Source:\n<a href=\"http://www.mccartie.com/2016/12/05/rails-5.1.html\" rel=\"noreferrer\">http://www.mccartie.com/2016/12/05/rails-5.1.html</a></p>\n"}], "owner": {"reputation": 871, "user_id": 4983367, "user_type": "registered", "accept_rate": 77, "profile_image": "https://lh4.googleusercontent.com/-d_mRPVFcDzY/AAAAAAAAAAI/AAAAAAAATeU/2EsF2nLrsNQ/photo.jpg?sz=128", "display_name": "Ybrin", "link": "https://stackoverflow.com/users/4983367/ybrin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5214, "favorite_count": 0, "accepted_answer_id": 41855525, "answer_count": 2, "score": 12, "last_activity_date": 1494357557, "creation_date": 1485357942, "question_id": 41855334, "link": "https://stackoverflow.com/questions/41855334/rails-change-primary-id-to-64-bit-bigint", "title": "Rails change primary id to 64 bit bigint", "body": "<p>I am using rails and the mysql2 adapter. I want to change all primary ids and foreign keys to be 64 bit integers instead of the default 32 bit as they are right now for my production database.</p>\n\n<p>Is this possible on the fly or do I have to drop the database, change the structure and import the data again?</p>\n\n<p>If there is a way to do it without dropping the database, even if it's a hack, it would be great to know.</p>\n"}, {"tags": ["ruby", "macos", "homebrew", "homebrew-cask"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485360333, "post_id": 41855139, "comment_id": 70896120, "body": "Since this relates to Homebrew and might be a bug in the software you might want to file an issue on the <a href=\"https://github.com/Homebrew/brew\" rel=\"nofollow noreferrer\">GitHub project</a>. This only peripherally relates to programming."}, {"owner": {"reputation": 557, "user_id": 1600630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5O7S.jpg?s=128&g=1", "display_name": "Cometsong", "link": "https://stackoverflow.com/users/1600630/cometsong"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485360414, "post_id": 41855139, "comment_id": 70896189, "body": "True on the brew-cask-bug possibility.  I posted it here as I think it is related to my system, but it&#39;s the use of the brew-cask that shows the problem."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485360637, "post_id": 41855139, "comment_id": 70896326, "body": "I&#39;ve had minor problems with Homebrew before and they&#39;re pretty good about addressing them quickly. The <code>cask</code> project may be a bit different but it&#39;s worth filing a ticket if you can reproduce this. For example, spin up a VM with a pristine install and try the same thing?"}], "answers": [{"tags": [], "owner": {"reputation": 81, "user_id": 3320563, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QSfDJ.jpg?s=128&g=1", "display_name": "Buck3000", "link": "https://stackoverflow.com/users/3320563/buck3000"}, "is_accepted": false, "score": 0, "last_activity_date": 1489981173, "last_edit_date": 1489981173, "creation_date": 1487052176, "answer_id": 42218961, "question_id": 41855139, "link": "https://stackoverflow.com/questions/41855139/ruby-permission-denied-installing-using-homebrew-cask/42218961#42218961", "title": "ruby &quot;permission denied&quot; installing/using homebrew cask", "body": "<p>So I just resolved something similar - it was a permissions issue for me. I ended up running:</p>\n\n<pre><code>sudo chown -R $(whoami) your-directory-here\n</code></pre>\n\n<p>on the Cask and caskroom directories - you may have to look around a little bit to find those directories on your system.</p>\n"}], "owner": {"reputation": 557, "user_id": 1600630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u5O7S.jpg?s=128&g=1", "display_name": "Cometsong", "link": "https://stackoverflow.com/users/1600630/cometsong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1125, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1489981173, "creation_date": 1485357400, "last_edit_date": 1495542731, "question_id": 41855139, "link": "https://stackoverflow.com/questions/41855139/ruby-permission-denied-installing-using-homebrew-cask", "title": "ruby &quot;permission denied&quot; installing/using homebrew cask", "body": "<p>My wild bet is that this issue is somehow related to my base osx <code>ruby</code> setup... but as I'm not a ruby-ite, i need some guidance to discover more.</p>\n\n<p>A couple days ago i tried to install a <code>brew cask</code> formula (several others were already installed previously).  A couple weeks ago i upgraded to OSX Sierra. </p>\n\n<p>Brew itself works perfectly, brew <code>cask</code> does not.</p>\n\n<p>I get an \"unexpected\" error when I type <code>brew cask</code> by itself or with any subcommand:</p>\n\n<pre><code>Error: ERROR: Failed to build gem native extension.\n\n    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb\nchecking for ruby/st.h... yes\nchecking for st.h... yes\nchecking for rb_str_replace() in ruby.h... yes\ncreating Makefile\n/System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:2125:in `initialize': Permission denied - Makefile (Errno::EACCES)\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:2125:in `open'\n    from /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/lib/ruby/2.0.0/mkmf.rb:2125:in `create_makefile'\n    from extconf.rb:24:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/msgpack-0.5.8 for inspection.\nResults logged to /Library/Ruby/Gems/2.0.0/extensions/universal-darwin-16/2.0.0/msgpack-0.5.8/gem_make.out\n</code></pre>\n\n<p>I've looked through many questions and tried many of the answers given, all to no avail.  </p>\n\n<blockquote>\n  <p>Questions:<br>\n  <a href=\"https://stackoverflow.com/q/30413621/1600630\">Homebrew cask option not recognized?</a><br>\n  <a href=\"https://stackoverflow.com/q/22544754/1600630\">Failed to build gem native extension (installing Compass)</a><br>\n  <a href=\"https://stackoverflow.com/q/24652996/1600630\">homebrew not working on OSX</a>     <a href=\"https://superuser.com/questions/254843/cant-install-brew-formulae-correctly-permission-denied-in-usr-local-lib\">Can't install Brew\n  formulae correctly &#40;Permission denied in /usr/local/lib&#41;</a><br>\n  <a href=\"https://stackoverflow.com/q/40927546/1600630\">OsX, can&#39;t use Homebrew because of Ruby permission</a></p>\n</blockquote>\n\n<p>Attempts:  </p>\n\n<pre><code>&gt; xcode-select --install\nxcode-select: error: command line tools are already installed, use \"Software Update\" to install updates\n\n&gt; brew install ruby\nWarning: ruby-2.4.0 already installed\n\n&gt; ls -l /System/Library/Frameworks/Ruby.framework/Versions/\ndrwxr-xr-x 7 root wheel 238 2017-01-12 12:12:13 2.0\nlrwxr-xr-x 1 root wheel   3 2017-01-09 09:47:51 Current -&gt; 2.0\n\n&gt; sudo chown -R $(whoami):admin /usr/local\n&gt; sudo chmod -R g+w /usr/local\n\n&gt; brew install caskroom/cask/brew-cask\n&gt; brew cask [list|cleanup|update|etc]\n(gives error shown above)\n</code></pre>\n\n<p>Performed a complete homebrew uninstall, <code>rm</code>'ing extra dirs and files. Then complete homebrew re-install, followed by re-install many of the formulae I had previously.</p>\n\n<p>Same commands above give same errors after reinstall.  </p>\n\n<p>Color me confused. &#x1F615;  </p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 148712, "user_id": 19750, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/13b41b2620da0b1e630715e0c91a0b03?s=128&d=identicon&r=PG", "display_name": "Josh Lee", "link": "https://stackoverflow.com/users/19750/josh-lee"}, "is_accepted": false, "score": 1, "last_activity_date": 1485357447, "creation_date": 1485357447, "answer_id": 41855160, "question_id": 41854955, "link": "https://stackoverflow.com/questions/41854955/ruby-is-it-true-that-map-generally-doesnt-make-sense-with-bang-methods/41855160#41855160", "title": "Ruby: Is it true that #map generally doesn&#39;t make sense with bang methods?", "body": "<p>Map is for building a new array without mutating the original. Each is for performing some action on each element of an array. Doing both at once is surprising.</p>\n\n<pre><code>&gt;&gt; arr = [\"foo bar\", \"baz\", \"quux\"]\n=&gt; [\"foo bar\", \"baz\", \"quux\"]\n&gt;&gt; arr.map{|x| x.gsub!(' ', '-')}\n=&gt; [\"foo-bar\", nil, nil]\n&gt;&gt; arr\n=&gt; [\"foo-bar\", \"baz\", \"quux\"]\n</code></pre>\n\n<p>Since !-methods generally have side effects (and only incidentally might return a value), <code>each</code> should be preferred to <code>map</code> when invoking a !-method.</p>\n\n<p>An exception might be when you have a list of actions to perform. The method to perform the action might sensibly be named with a <code>!</code>, but you wish to collect the results in order to report which ones succeeded or failed.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 2, "last_activity_date": 1485357833, "last_edit_date": 1485357833, "creation_date": 1485357470, "answer_id": 41855167, "question_id": 41854955, "link": "https://stackoverflow.com/questions/41854955/ruby-is-it-true-that-map-generally-doesnt-make-sense-with-bang-methods/41855167#41855167", "title": "Ruby: Is it true that #map generally doesn&#39;t make sense with bang methods?", "body": "<h1>Base object</h1>\n\n<p>Here's an array with strings as element :</p>\n\n<pre><code>words = ['hello', 'world']\n</code></pre>\n\n<h1>New array</h1>\n\n<p>If you want a new array with modified strings, you can use <code>map</code> with <code>gsub</code> :</p>\n\n<pre><code>new_words = words.map{|word| word.gsub('o','#') }\n\np new_words\n#=&gt; [\"hell#\", \"w#rld\"]\np words\n#=&gt; [\"hello\", \"world\"]\np new_words == words\n#=&gt; false\n</code></pre>\n\n<p>The original strings and the original array aren't modified.</p>\n\n<h1>Strings modified in place</h1>\n\n<p>If you want to modify the strings in place, you can use :</p>\n\n<pre><code>words.each{|word| word.gsub!('o','#') }\np words\n#=&gt; [\"hell#\", \"w#rld\"]\n</code></pre>\n\n<h1>map and gsub!</h1>\n\n<pre><code>new_words = words.map{|word| word.gsub!('o','#') }\np words\n#=&gt; [\"hell#\", \"w#rld\"]\np new_words\n#=&gt; [\"hell#\", \"w#rld\"]\np words == new_words\n#=&gt; true\np new_words.object_id\n#=&gt; 12704900\np words.object_id\n#=&gt; 12704920\n</code></pre>\n\n<p>Here, a new array is created, but the elements are the exact same ones!</p>\n\n<p>It doesn't bring anything more than the previous examples. It creates a new Array for nothing. It also might confuse people reading your code by sending opposite signals :</p>\n\n<ul>\n<li><code>gsub!</code> will indicate that you want to modifiy existing objects</li>\n<li><code>map</code> will indicate that you don't want to modify existing objects.</li>\n</ul>\n"}], "owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 41855167, "answer_count": 2, "score": 2, "last_activity_date": 1485358499, "creation_date": 1485356904, "last_edit_date": 1495540373, "question_id": 41854955, "link": "https://stackoverflow.com/questions/41854955/ruby-is-it-true-that-map-generally-doesnt-make-sense-with-bang-methods", "title": "Ruby: Is it true that #map generally doesn&#39;t make sense with bang methods?", "body": "<p>This question was inspired by this one:\n<a href=\"https://stackoverflow.com/questions/41853364/ruby-why-does-this-way-of-using-map-throw-an-error/41853662?noredirect=1#comment70891676_41853662\">Ruby: Why does this way of using map throw an error?</a></p>\n\n<p>Someone pointed out the following:</p>\n\n<p><strong>map doesn't make much sense when used with ! methods.</strong>  </p>\n\n<p>You should either:</p>\n\n<ul>\n<li>use map with gsub</li>\n<li>or use each with gsub!</li>\n</ul>\n\n<p>Can someone explain why that is?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "printing", "system-calls", "wicked-pdf"], "answers": [{"tags": [], "owner": {"reputation": 1434, "user_id": 664675, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/f463b697306d3bd0d4d7dc6dd562b7c1?s=128&d=identicon&r=PG", "display_name": "rii", "link": "https://stackoverflow.com/users/664675/rii"}, "is_accepted": false, "score": 0, "last_activity_date": 1485377011, "creation_date": 1485377011, "answer_id": 41861325, "question_id": 41854853, "link": "https://stackoverflow.com/questions/41854853/direct-printing-in-rails-app-using-system-commands/41861325#41861325", "title": "Direct Printing in Rails app using system commands", "body": "<p>See this page for reference: <a href=\"https://technet.microsoft.com/en-us/library/cc731926(v=ws.11).aspx\" rel=\"nofollow noreferrer\">https://technet.microsoft.com/en-us/library/cc731926(v=ws.11).aspx</a> you would need a Line Printer Daemon (LPD) running on the Windows Machine. And would then be able to issue the command. You might need to change some of your security settings. I have not used Rails in a Windows machine in a long time so I am not too sure if the security settings affect it.</p>\n\n<p>Are you sure the machine where you are printing has a Line Printer Daemon running? </p>\n\n<p>From the page I linked above:</p>\n\n<blockquote>\n  <p>This example shows how to print the \"Document.txt\" text file to the\n  LaserPrinter1 printer queue on an LPD host at 10.0.0.45:</p>\n</blockquote>\n\n<p><code>Lpr -S 10.0.0.45 -P LaserPrinter1 -o Document.txt</code></p>\n\n<p>Hope that helps or guides you in the right direction.</p>\n"}, {"tags": [], "owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "is_accepted": true, "score": 1, "last_activity_date": 1485444632, "creation_date": 1485444632, "answer_id": 41877009, "question_id": 41854853, "link": "https://stackoverflow.com/questions/41854853/direct-printing-in-rails-app-using-system-commands/41877009#41877009", "title": "Direct Printing in Rails app using system commands", "body": "<p>I've found an easier solution which is not related to the OS you are using!\nThis for <strong>Ruby</strong>:</p>\n\n<pre><code>&lt;%= link_to 'print', 'your_link_here', :onclick =&gt; 'window.print();return false;'%&gt; \n</code></pre>\n\n<p>And it equivalence in <strong>HTML</strong>:</p>\n\n<pre><code>&lt;a onclick=\"window.print();return false;\" href=\"your_link\"&gt;print&lt;/a&gt;\n</code></pre>\n\n<p>Thank you all for putting your time on this.</p>\n"}], "owner": {"reputation": 2123, "user_id": 5374999, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/4YXdN.jpg?s=128&g=1", "display_name": "Afsanefda", "link": "https://stackoverflow.com/users/5374999/afsanefda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 938, "favorite_count": 0, "accepted_answer_id": 41877009, "answer_count": 2, "score": 0, "last_activity_date": 1485444632, "creation_date": 1485356612, "last_edit_date": 1495541803, "question_id": 41854853, "link": "https://stackoverflow.com/questions/41854853/direct-printing-in-rails-app-using-system-commands", "title": "Direct Printing in Rails app using system commands", "body": "<p>I have a method in which I'm trying to print a pdf directly from! As you can see <a href=\"https://stackoverflow.com/questions/1608593/printing-a-file-to-a-printer-in-ruby\">here</a> </p>\n\n<p>I have to use <strong>system(lpr)</strong> command.This solutions works fine but in <strong>ubuntu</strong> not in windows or any other <strong>OS</strong>s. Do you know how to do it in <strong>windows</strong> ?</p>\n\n<p>and this is my method:</p>\n\n<pre><code>def general_receipt_export\n    if params[:official_id].present?\n        @ids = params[:official_id].split(',')\n        @officials = Official.find(@ids)\n        pdf = render_to_string pdf: \"#{@ids.map(&amp;:inspect).join(',').to_s + '_receipt.pdf'}\", :template =&gt; 'officials/general_receipt_export.html.erb', encoding: 'utf8',orientation: 'Landscape',page_size: 'A4'\n        render layout: false\n        save_path = Rails.root.join('public','pdfs', \"#{@ids.map(&amp;:inspect).join(',').to_s + '_receipt.pdf'}\")\n        File.open(save_path, 'wb') do |file|\n          file &lt;&lt; pdf\n        end\n        system(\"lpr\", \"public/pdfs/#{@ids.map(&amp;:inspect).join(',').to_s + '_receipt.pdf'}\")\n    else\n       render json:{messege: 'No letter to export'},status: 404\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1485356744, "post_id": 41854731, "comment_id": 70893468, "body": "If you remove kwargs from the equation, it all <a href=\"http://pastebin.com/qt84MvnR\" rel=\"nofollow noreferrer\">starts working</a>."}, {"owner": {"reputation": 31, "user_id": 2851412, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/hx1Ox.jpg?s=128&g=1", "display_name": "Amit Liber", "link": "https://stackoverflow.com/users/2851412/amit-liber"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1485441687, "post_id": 41854731, "comment_id": 70933602, "body": "Thanks @SergioTulentsev, this indeed works, and I appreciate the detailed answer. Trying if anyone will come up with an idea for kwargs."}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 2, "last_activity_date": 1485360558, "last_edit_date": 1495542308, "creation_date": 1485358453, "answer_id": 41855527, "question_id": 41854731, "link": "https://stackoverflow.com/questions/41854731/how-to-send-dynamic-arguments-to-methods-with-default-args/41855527#41855527", "title": "how to send dynamic arguments to methods with default args", "body": "<h1>Problem</h1>\n\n<p>The best explanation I found was <a href=\"https://stackoverflow.com/a/33102706/6419007\">here</a>.</p>\n\n<p><code>**{}</code> is not parsed in the same way as <code>**kwargs</code>, even if <code>kwargs</code> is an empty hash.</p>\n\n<h1>keyword_args.empty?</h1>\n\n<p>One simple solution would be to check if <code>kwargs</code> is empty before calling <code>skippable_perform</code>.</p>\n\n<p>The complete code becomes :</p>\n\n<pre><code>module SkippableWorker\n  def self.included(base)\n    base.class_eval do\n      alias_method :skippable_perform, :perform\n      define_method :perform do |*args, **keyword_args|\n        return if skip?\n        if keyword_args.empty?\n          self.send(:skippable_perform, *args)\n        else\n          self.send(:skippable_perform, *args, **keyword_args)\n        end\n      end\n\n      define_method :skip? do\n        puts self.class\n        if rand &gt; 0.5\n          puts \"  Skipping\"\n          true\n        end\n      end\n    end\n  end\nend\n\nclass Worker\n  def perform(foo='standard arg')\n    puts \"  #{foo}\"\n  end\n  include SkippableWorker \nend\n\nclass AnotherWorker\n  def perform(bar:'standard kwarg')\n    puts \"  #{bar}\"\n  end\n  include SkippableWorker \nend\n\nWorker.new.perform\nWorker.new.perform\nWorker.new.perform('another arg')\nWorker.new.perform('another arg')\nAnotherWorker.new.perform\nAnotherWorker.new.perform\nAnotherWorker.new.perform(bar: 'another kwarg')\nAnotherWorker.new.perform(bar: 'another kwarg')\n</code></pre>\n\n<p>Depending on <code>rand</code>, it could output :</p>\n\n<pre><code>Worker\n  standard arg\nWorker\n  Skipping\nWorker\n  Skipping\nWorker\n  another arg\nAnotherWorker\n  standard kwarg\nAnotherWorker\n  standard kwarg\nAnotherWorker\n  Skipping\nAnotherWorker\n  another kwarg\n</code></pre>\n\n<h1>Method#parameters</h1>\n\n<p>Another method would be to check which parameters are expected by <code>skippable_perform</code> :</p>\n\n<pre><code>method(:skippable_perform).parameters.any?{|type,name| type == :key}\n</code></pre>\n\n<p>and adapt <code>define_method</code> depending on the result.</p>\n"}], "owner": {"reputation": 31, "user_id": 2851412, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/hx1Ox.jpg?s=128&g=1", "display_name": "Amit Liber", "link": "https://stackoverflow.com/users/2851412/amit-liber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1263, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485360558, "creation_date": 1485356241, "question_id": 41854731, "link": "https://stackoverflow.com/questions/41854731/how-to-send-dynamic-arguments-to-methods-with-default-args", "title": "how to send dynamic arguments to methods with default args", "body": "<p>I am trying to figure if there's a way of using send for calling a method with dynamic arguments (*args, **kwrags) while the method has only default arguments.</p>\n\n<p>Given the following class:</p>\n\n<pre><code>class Worker\n  def perform(foo='something')\n    # do something\n  end\nend\n</code></pre>\n\n<p>I have a module which needs to check some conditions.\nIf the conditions are not met, the #perform method should run:</p>\n\n<pre><code>module SkippableWorker\n  def self.included(base)\n    base.class_eval do\n      alias_method :skippable_perform, :perform\n      define_method :perform do |*args, **keyword_args|\n        return if skip?\n        self.send(:skippable_perform, *args, **keyword_args)\n      end\n\n      define_method :skip? do\n        # checks whether to skip or not\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Once including the module in the Worker class, I encounter a problem in\nthe module's send command:</p>\n\n<pre><code>self.send(:skippable_perform, *args, **keyword_args)\n</code></pre>\n\n<p>If once wants to call #perform and use the default arguments, the call will be made without any arguments at all:</p>\n\n<pre><code>Worker.new.perform()\n</code></pre>\n\n<p>But the send command in the module translates the *args and **kwargs to [] and {}. Thus, the call to #perform ends up to be send(:perform, [], {}) which causes ArgumentError for args amount mismatch or for the very least, sends a value one did not mean to send ([] instead of the default 'something').</p>\n\n<p>Any ideas how to overcome this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oauth-2.0", "ruby-on-rails-5", "slack-api"], "answers": [{"tags": [], "owner": {"reputation": 1294, "user_id": 1574508, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JFCdr.jpg?s=128&g=1", "display_name": "trueinViso", "link": "https://stackoverflow.com/users/1574508/trueinviso"}, "is_accepted": true, "score": 2, "last_activity_date": 1485364503, "last_edit_date": 1485364503, "creation_date": 1485361115, "answer_id": 41856508, "question_id": 41853970, "link": "https://stackoverflow.com/questions/41853970/rails-slack-api-oauth-access-invalid-client-id/41856508#41856508", "title": "Rails - Slack API OAuth Access - invalid_client_id", "body": "<p>I use <a href=\"https://github.com/intridea/oauth2\" rel=\"nofollow noreferrer\">oauth2 gem</a> to authorize.  So I was able to get this to work by reading the <a href=\"https://api.slack.com/docs/oauth\" rel=\"nofollow noreferrer\">slack documentation</a> and using oauth2 in my controller:</p>\n\n<pre><code>class OauthController &lt; ApplicationController\n  def authorize                                                                   \n    options = {                                                                   \n      site: 'https://slack.com/oauth/authorize'                                  \n    }                                                                             \n    client ||= OAuth2::Client.new(                                                \n      'client-id',                                                 \n      'client-secret',                                         \n      options                                                                     \n    )                                                                             \n    params = {                                                                    \n      scope: 'incoming-webhook, commands',                                        \n      redirect_uri: 'https://localhost:3000/oauth/callback'                       \n    }                                                                             \n    redirect_to client.auth_code.authorize_url(params)                            \n  end                                                                             \n\n  def authorize_callback                                                          \n    puts params[\"code\"] \n    redirect_to root_url                                                              \n  end \nend    \n</code></pre>\n\n<p>Routes file:</p>\n\n<pre><code>get    '/authorize', to: 'oauth#authorize'                                       \nget    '/oauth/callback', to: 'oauth#authorize_callback'  \n</code></pre>\n\n<p>Don't forget to set your callback url at Oauth settings on api.slack.com, I used localhost for testing purposes as you can see.</p>\n"}], "owner": {"reputation": 761, "user_id": 4884692, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/118303f1846a2bdfa10163cf0a3492b5?s=128&d=identicon&r=PG&f=1", "display_name": "pronoob", "link": "https://stackoverflow.com/users/4884692/pronoob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 681, "favorite_count": 0, "accepted_answer_id": 41856508, "answer_count": 1, "score": 1, "last_activity_date": 1485440203, "creation_date": 1485354090, "last_edit_date": 1485440203, "question_id": 41853970, "link": "https://stackoverflow.com/questions/41853970/rails-slack-api-oauth-access-invalid-client-id", "title": "Rails - Slack API OAuth Access - invalid_client_id", "body": "<p>I'm building Slack integration for my Ruby on Rails application and I'm trying to get an access_token from the Slack API for my Slack App when a user clicks the Add to Slack button.</p>\n\n<p>From Postman, I can successfully post the following:</p>\n\n<pre><code>https://slack.com/api/oauth.access?client_id=idgoes.here&amp;client_secret=secretgoeshere&amp;code=12345&amp;pretty=1\n</code></pre>\n\n<p>However, within Rails I always get a response with <strong>invalid_client_id</strong>, regardless of the way I call the API. I have checked my ID is correct (a lot) and tried regenerating it, but I don't think that is the issue due to the postman success.</p>\n\n<p>Within my get_oauth_access_token method I have tried the following implementations:</p>\n\n<p>1.</p>\n\n<pre><code>rc = JSON.parse(HTTP.post('https://slack.com/api/oauth.access',\n                           params: {\n                           client_id: 'idgoes.here',\n                           client_secret: 'secretgoeshere',\n                           code: '12345'\n                }))\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>response = Excon.post('https://slack.com/api/oauth.access',\n                         headers: { 'Content-Type' =&gt; 'application/json; charset=utf-8' },\n                         user: client_id, password: client_secret,\n                         body: oauth_request_body.to_json)\n</code></pre>\n\n<p>Any implementation I try always ends up getting a invalid_client_id response.</p>\n\n<p>I'm aware it may be something to do with environment config, but I'm not sure what would be helpful to debug, so please let me know what other information I can share. I'm running on localhost.</p>\n\n<h2>Update:</h2>\n\n<p>I just found out that many (maybe all) of the Slack APIs do not accept a JSON format body (which seems crazy seeing as they send a response in JSON.</p>\n\n<p>Make sure to use x-www-form-urlencoded format body on your request or it will not work properly.</p>\n\n<pre><code>\"Content-Type\" =&gt; \"application/x-www-form-urlencoded\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "savon"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 3359827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9a005d6af2549b537d87dba2209395?s=128&d=identicon&r=PG&f=1", "display_name": "Flooo49", "link": "https://stackoverflow.com/users/3359827/flooo49"}, "is_accepted": false, "score": 0, "last_activity_date": 1485360897, "creation_date": 1485360897, "answer_id": 41856444, "question_id": 41853688, "link": "https://stackoverflow.com/questions/41853688/ror-savon-cannot-authenticate-since-ruby-2-2-2/41856444#41856444", "title": "RoR Savon : cannot authenticate since ruby 2.2.2", "body": "<p>I got it! </p>\n\n<p>If someone has the same problem : </p>\n\n<pre><code>soap_header: { 'Authorization:' =&gt; \"Basic #{realm}\"} \n</code></pre>\n\n<p>is wrong cause the Authorization params is not for soap header but http header</p>\n\n<p>So we have to use : </p>\n\n<pre><code>headers: { 'Authorization:' =&gt; \"Basic #{realm}\"} \n</code></pre>\n"}], "owner": {"reputation": 56, "user_id": 3359827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9a005d6af2549b537d87dba2209395?s=128&d=identicon&r=PG&f=1", "display_name": "Flooo49", "link": "https://stackoverflow.com/users/3359827/flooo49"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485360897, "creation_date": 1485353204, "last_edit_date": 1485359261, "question_id": 41853688, "link": "https://stackoverflow.com/questions/41853688/ror-savon-cannot-authenticate-since-ruby-2-2-2", "title": "RoR Savon : cannot authenticate since ruby 2.2.2", "body": "<p>I've tried many things but I'm not able to do it.\nI used to work with savon in my app to access a soap webservice. While the app was using RoR 3 and ruby 1.9.3 I hadn't problem, but since I upgrade my app to use RoR5 and ruby 2.2.2 I'm not able to use it anymore.</p>\n\n<p>When I try to request the soap server it tells me \"Authentication is required\".</p>\n\n<p>I tried with basic auth : </p>\n\n<pre><code>    client = Savon.client(wsdl: uri, basic_auth: [user_login, user_password])\n    call_response = client.call(:good_types, :message =&gt; {})\n</code></pre>\n\n<p>but also with custom headers :</p>\n\n<pre><code>    realm = Base64.strict_encode64(\"login:pass\")\n    client = Savon.client(\n       wsdl: uri,\n       soap_header: { 'Authorization:' =&gt; \"Basic #{realm}\"},\n       log: true,\n       log_level: :debug,\n       pretty_print_xml: true\n   )\n   # call the 'getFood' operation\n   response = client.call(:good_types, message: {})\n</code></pre>\n\n<p>but no one could helped me, always the same response : \"Authentication is required\"</p>\n\n<p>Maybe someone know how to build pre-emptively auth ? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cancan", "cancancan"], "comments": [{"owner": {"reputation": 1294, "user_id": 1574508, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JFCdr.jpg?s=128&g=1", "display_name": "trueinViso", "link": "https://stackoverflow.com/users/1574508/trueinviso"}, "edited": false, "score": 0, "creation_date": 1485354436, "post_id": 41853595, "comment_id": 70891841, "body": "CanCan is a user authorization gem, the purpose is to check if a user has access to an authorized resource.  It requires an ability class and current_user method to work.  You could override the defaults as explained <a href=\"https://github.com/ryanb/cancan/wiki/changing-defaults\" rel=\"nofollow noreferrer\">on this page</a>."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "reply_to_user": {"reputation": 1294, "user_id": 1574508, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JFCdr.jpg?s=128&g=1", "display_name": "trueinViso", "link": "https://stackoverflow.com/users/1574508/trueinviso"}, "edited": false, "score": 0, "creation_date": 1485354591, "post_id": 41853595, "comment_id": 70891956, "body": "@trueinViso I do have both an <code>Ability</code> class and <code>current_user</code> method. But I want to know if the current controller method has any cancan attributes attached to it."}, {"owner": {"reputation": 1294, "user_id": 1574508, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JFCdr.jpg?s=128&g=1", "display_name": "trueinViso", "link": "https://stackoverflow.com/users/1574508/trueinviso"}, "edited": false, "score": 0, "creation_date": 1485354937, "post_id": 41853595, "comment_id": 70892203, "body": "The controller method doesn&#39;t have any cancan attributes attached to it.  The abilities are defined on the current_user.  When you say skip_authorize_resource that just means it won&#39;t check if the current_user has access to a resource."}], "answers": [{"comments": [{"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485355695, "post_id": 41854257, "comment_id": 70892731, "body": "Getting the error <code>uninitialized constant CanCan::ControllerResouce</code> so it always thinks the resource is protected."}, {"owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "reply_to_user": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485355861, "post_id": 41854257, "comment_id": 70892859, "body": "syntax may wary depending on version of CanCan that you use"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485356411, "post_id": 41854257, "comment_id": 70893251, "body": "It&#39;s no longer complaining about the error, but it still returns false for everything even resources which have protection on them. For example <code>self</code> returns <code>#&lt;Admin::DashboardController:0x007fa7da209228&gt;</code> and Dashboard inherits from my AdminController which has the <code>load_and_authorize_resource</code>in it."}, {"owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "reply_to_user": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485356711, "post_id": 41854257, "comment_id": 70893444, "body": "Well, <code>skip?</code> method <i>should</i> return <code>false</code> for protected resources"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485356806, "post_id": 41854257, "comment_id": 70893512, "body": "That&#39;s correct. But it returns false for controllers which don&#39;t inherit from <code>AdminController</code> and don&#39;t have <code>load_and_authorize_resource</code> in them or any parent controllers."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485357228, "post_id": 41854257, "comment_id": 70893807, "body": "See updated post for examples. The first should return false when I hit its index and the second true when I hits index."}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485357933, "post_id": 41854257, "comment_id": 70894329, "body": "<b>In short... it&#39;s also returning false for not protected resources.</b>"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485359282, "post_id": 41854257, "comment_id": 70895334, "body": "I believe it&#39;s because the HomeController doesn&#39;t have any skips in it or rather any reference to CanCan in it or its parent controllers. Perhaps also need to check if the controller has CanCan attached to it at all?"}, {"owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "reply_to_user": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485359805, "post_id": 41854257, "comment_id": 70895760, "body": "This is hard because controller has only two methods related to cancan - <code>cancan_resource_class</code> and <code>cancan_skipper</code>. And both are always present in controller no matter if it is attached to CanCan or not. Atm I don&#39;t see any way to perform this without forking CanCan"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1485361745, "post_id": 41854257, "comment_id": 70897130, "body": "One hack was to add <code>skip_authorize_resource</code> to the HomeController, but it requires adding to every controller as trying to add it to a parent for all unprotected controllers doesn&#39;t work, so it&#39;s pretty nasty."}], "tags": [], "owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "is_accepted": false, "score": 1, "last_activity_date": 1485354954, "creation_date": 1485354954, "answer_id": 41854257, "question_id": 41853595, "link": "https://stackoverflow.com/questions/41853595/check-if-current-request-is-protected-in-rails-with-cancan/41854257#41854257", "title": "Check if current request is protected in Rails with CanCan", "body": "<p>CanCan uses <a href=\"https://github.com/CanCanCommunity/cancancan/blob/bccdd70c57ca2b3bc8b60dc1ceac9ffcfb875630/lib/cancan/controller_resource.rb#L48\" rel=\"nofollow noreferrer\">CanCan::ControllerResource#skip?</a> method to determine whether it should authorize resource or not. So I guess you may rely on it as follows:</p>\n\n<pre><code>  def check_protected\n    if CanCan::ControllerResource.new(self).skip?(:authorize)\n      # resource is not protected\n    else\n      # resource is protected\n    end\n  end\n</code></pre>\n\n<p>I've tried it in my sandbox and it worked for me</p>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1485358390, "creation_date": 1485352977, "last_edit_date": 1485358390, "question_id": 41853595, "link": "https://stackoverflow.com/questions/41853595/check-if-current-request-is-protected-in-rails-with-cancan", "title": "Check if current request is protected in Rails with CanCan", "body": "<p>I'm using the CanCan gem in my Rails app and want to check if the current request is a protected resource in my application.</p>\n\n<p>So for example I have the following:</p>\n\n<pre><code>class AdminController &lt; ApplicationController\n\n  load_and_authorize_resource\n\nend\n</code></pre>\n\n<p>How can I check if the request is protected by CanCan?</p>\n\n<p>I can access the controller and action via params. I can't use the standard <code>can?</code> and <code>cannot?</code> helpers as they will check if the <code>current_user</code> has permission rather than if the action itself has a protection on it.</p>\n\n<p>So for example:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n\n  before_action :check_protected\n\n  def check_protected\n    if can? params[:action].to_sym, Object.const_get(params[:controller].classify)\n      #\u00a0resource is protected\n    else\n      # resource is not protected\n    end\n  end\n\nend\n</code></pre>\n\n<p>^^ This won't work because it will always say <code>false</code> when no <code>current_user</code> or if the user doesn't have permission. <strong>I need to check if the resource itself is protected with CanCan.</strong></p>\n\n<p>If I had these examples:</p>\n\n<pre><code>class PostsController &lt; AdminController\n\n  def index\n  end\n\nend\n\nclass HomeController &lt; ApplicationController\n\n  def index\n  end\n\nend\n</code></pre>\n\n<p>The index for PostsController should be identifiable as protected, and the index for HomeController as unprotected.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "rake-task"], "answers": [{"tags": [], "owner": {"reputation": 1390, "user_id": 2245329, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oAtWL.png?s=128&g=1", "display_name": "yaitloutou", "link": "https://stackoverflow.com/users/2245329/yaitloutou"}, "is_accepted": false, "score": 1, "last_activity_date": 1485374033, "last_edit_date": 1495539951, "creation_date": 1485374033, "answer_id": 41860465, "question_id": 41853581, "link": "https://stackoverflow.com/questions/41853581/call-simple-rake-task-from-parent-task/41860465#41860465", "title": "Call simple rake task from parent task", "body": "<p>place the default task outside the namespace as explained <a href=\"https://stackoverflow.com/a/1579280/2245329\">here</a>. or use actual methods as suggested by @tthomas7 <a href=\"https://stackoverflow.com/a/1290119/2245329\">referred answer</a> </p>\n\n<p>with <em>option 1</em> your code will looks like:</p>\n\n<pre><code>namespace :my_namespace do\n\n  task create_admin: :environment do\n    puts \"Creating admin user\"\n    ######\n  end\n\n  task create_user: :environment do\n    puts \"Creating user\"\n    ######\n  end\n\nend\n\ntask create_all_users: :environment do\n  puts \"Creating all users\"\n\n  Rake::Task[\"my_namespace:create_admin\"].invoke\n  Rake::Task[\"my_namespace:create_user\"].invoke\n\nend\n</code></pre>\n"}], "owner": {"reputation": 7004, "user_id": 1103606, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0d93cc650b93939ea91066fcb5aefae0?s=128&d=identicon&r=PG", "display_name": "Peter Penzov", "link": "https://stackoverflow.com/users/1103606/peter-penzov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 265, "favorite_count": 0, "closed_date": 1485380592, "answer_count": 1, "score": 1, "last_activity_date": 1485374033, "creation_date": 1485352925, "question_id": 41853581, "link": "https://stackoverflow.com/questions/41853581/call-simple-rake-task-from-parent-task", "closed_reason": "Duplicate", "title": "Call simple rake task from parent task", "body": "<p>I want to create very simple rake task. From one main task I want to call all sub tasks. I tried this code:</p>\n\n<pre><code>namespace :my_namespace do\n\n  task create_all_users: :environment do\n    puts \"Creating all users\"\n\n    create_admin\n    create_user\n\n  end\n\n  task create_admin: :environment do\n    puts \"Creating admin user\"\n    ######\n  end\n\n  task create_user: :environment do\n    puts \"Creating user\"\n    ######\n  end\n\nend\n</code></pre>\n\n<p>But I get error:</p>\n\n<pre><code>NameError: undefined local variable or method `create_admin' for main:Object\n</code></pre>\n\n<p>What is the proper way to call the tasks?</p>\n"}, {"tags": ["ruby", "watchman", "hanami"], "comments": [{"owner": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 0, "creation_date": 1486877610, "post_id": 41853505, "comment_id": 71531561, "body": "Hanami sadly doesn&#39;t seem very active here on stackoverflow yet, you might get better response, or any response for that matter, on the official chat. <a href=\"https://gitter.im/hanami/chat\" rel=\"nofollow noreferrer\">gitter.im/hanami/chat</a>"}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "reply_to_user": {"reputation": 12440, "user_id": 308731, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/eQxFn.jpg?s=128&g=1", "display_name": "Eyeslandic", "link": "https://stackoverflow.com/users/308731/eyeslandic"}, "edited": false, "score": 1, "creation_date": 1487583510, "post_id": 41853505, "comment_id": 71833863, "body": "I have managed to do the job with entr. This command works for me: <code>ag --ruby -l | entr -r bundle exec hanami server</code>  And shotgun is deactivated of course"}], "owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485352675, "creation_date": 1485352675, "question_id": 41853505, "link": "https://stackoverflow.com/questions/41853505/how-can-i-create-a-watchman-trigger-to-restart-the-puma-hanami-server", "title": "How can I create a watchman trigger to restart the puma/hanami server", "body": "<p>I have created this watchman trigger:  </p>\n\n<pre><code>watchman -j &lt;&lt;-EOT\n  [\"trigger\", \"/home/gergra/code/essence/essence_backend\", {\n   \"name\": \"restart_hanami\",\n   \"expression\": [\"anyof\", [\"match\", \"*.rb\"]],\n   \"command\": [\n       \"alert 'restarte hanami'\",\n       \"killall bundle\",\n       \"bundle  exec hanami server\"],\n   \"stdout\": \"&gt;/home/gergra/hs.log\"\n}]\nEOT\n</code></pre>\n\n<p>It should stop puma with the kill command and then restart it again. If I take a look into the log file, I see that it does do things but the commands are never executed. What am I missing?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 304305, "user_id": 519413, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/7839089cd91dc5cc5eb1e0cdbf3312ed?s=128&d=identicon&r=PG", "display_name": "Rory McCrossan", "link": "https://stackoverflow.com/users/519413/rory-mccrossan"}, "is_accepted": true, "score": 2, "last_activity_date": 1485352696, "creation_date": 1485352696, "answer_id": 41853514, "question_id": 41853490, "link": "https://stackoverflow.com/questions/41853490/changing-text-of-a-submit-button-with-javascript/41853514#41853514", "title": "Changing text of a submit button with Javascript", "body": "<p>With an <code>&lt;input type=\"submit\"&gt;</code> element, the text of the button is in the <code>value</code> attribute, so use <code>val()</code>, like this:</p>\n\n<pre><code>$form.find(\"[type=submit]\").val(\"Get Tickets\")\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 41853514, "answer_count": 1, "score": 1, "last_activity_date": 1485352706, "creation_date": 1485352635, "last_edit_date": 1485352706, "question_id": 41853490, "link": "https://stackoverflow.com/questions/41853490/changing-text-of-a-submit-button-with-javascript", "title": "Changing text of a submit button with Javascript", "body": "<p>I have coupons available for my app. When a user apply a 100% off coupon I want a button to go from saying \"Buy Tickets\" to \"Get Tickets\" using Javascript. This seems easy but I can't seem to get anything to work. </p>\n\n<p>Here is my code:</p>\n\n<pre><code>&lt;div class=\"tickets-actions\"&gt;\n  &lt;%= f.submit \"Buy Tickets\", class: \"button button--primary tickets-actions__item tickets-action\" %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<pre class=\"lang-js prettyprint-override\"><code>$form.find(\"[type=submit]\").text(\"Get Tickets\")\n</code></pre>\n\n<p>This to me seems like it should work. But I'm not sure what's wrong? Thanks for the help.</p>\n"}, {"tags": ["ruby", "capybara"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1485366467, "post_id": 41853487, "comment_id": 70900297, "body": "Can you show your method that finds all the links, there may be a cleaner way to do what you&#39;re trying to do."}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485353958, "last_edit_date": 1485353958, "creation_date": 1485353640, "answer_id": 41853819, "question_id": 41853487, "link": "https://stackoverflow.com/questions/41853487/how-can-i-print-contents-of-array-in-ruby/41853819#41853819", "title": "How can I print contents of array in ruby", "body": "<p><code>case_list</code> is an array with one element, <code>list_cases</code> converted as a string!</p>\n\n<p>If <code>list_cases</code> is already an array, you could iterate directly on it.\nNote that a <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Result\" rel=\"nofollow noreferrer\"><code>Capybara::Result</code></a> is itself a collection of <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Element\" rel=\"nofollow noreferrer\"><code>Element</code></a>, so you need to iterate again :</p>\n\n<pre><code>results_page.list_cases.each do |capybara_result|\n  capybara_result.each do |element|\n    puts element.text\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 7469269, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/02cf0b0368722ce91ee5264171b3b16c?s=128&d=identicon&r=PG&f=1", "display_name": "Steve", "link": "https://stackoverflow.com/users/7469269/steve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2230, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1485353958, "creation_date": 1485352632, "last_edit_date": 1485353773, "question_id": 41853487, "link": "https://stackoverflow.com/questions/41853487/how-can-i-print-contents-of-array-in-ruby", "title": "How can I print contents of array in ruby", "body": "<p>Can anyone help. I have created a method in ruby capybara to find all link elements on a web page matching certain criteria and stored them in an array. I want to iterate through the items in the array and print them to the console. My code for doing this is : </p>\n\n<pre><code>case_list = []   \ncase_list.push(results_page.list_cases.to_s)   \ncase_list.each do |item|\n     puts item   \nend \n</code></pre>\n\n<p>but all I get printed is <code>#&lt;Capybara::Result:0x007fd0a4ef4350&gt;</code></p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 4744, "user_id": 115576, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d4048f1c0f29b6f042660c465187183b?s=128&d=identicon&r=PG", "display_name": "samuil", "link": "https://stackoverflow.com/users/115576/samuil"}, "is_accepted": false, "score": 3, "last_activity_date": 1485352795, "last_edit_date": 1495541451, "creation_date": 1485352795, "answer_id": 41853549, "question_id": 41853364, "link": "https://stackoverflow.com/questions/41853364/ruby-why-does-this-way-of-using-map-throw-an-error/41853549#41853549", "title": "Ruby: Why does this way of using map throw an error?", "body": "<p><code>&amp;:method</code> notation is using <code>#to_proc</code> method, which is capable of converting symbol to <code>Proc</code> object. It can't be used as a shortcut if you need to provide additional arguments to called method.</p>\n\n<p>Longer explanation about <code>#to_proc</code> can be found in separate answer: <a href=\"https://stackoverflow.com/questions/14881125/what-does-to-proc-method-mean\">What does to_proc method mean?</a></p>\n"}, {"comments": [{"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1485353242, "post_id": 41853662, "comment_id": 70890976, "body": "Good idea..but I don&#39;t think my boss would like me to mess around with the String class.."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1485353521, "post_id": 41853662, "comment_id": 70891183, "body": "Fair enough, let&#39;s say it&#39;s just to show what could be done. The advice on <code>map</code> and <code>gsub!</code> still stands, though."}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1485354104, "post_id": 41853662, "comment_id": 70891609, "body": "+1 for that..unfortunately your answer doesn&#39;t answer my main question (why it wouldn&#39;t work), so I can&#39;t accept it as the best answer, even though it has more additional info."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1485354208, "post_id": 41853662, "comment_id": 70891676, "body": "Sure, no problem. @samuil had a valid answer before I posted mine. I just wanted to add a few points that wouldn&#39;t fit in a comment."}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1485354526, "post_id": 41853662, "comment_id": 70891903, "body": "Very good points, I have to say. Neither did I know or think about <code>map</code> not making sense with !-methods nor did I know about refinements. Lessons learned!"}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1485356240, "post_id": 41853662, "comment_id": 70893132, "body": "Sorry to come back a bit delayed, but WHY is map not making sense with gsub!? Ahwell, I will open a new question.."}, {"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1485357064, "post_id": 41853662, "comment_id": 70893698, "body": "<a href=\"http://stackoverflow.com/questions/41854955/ruby-is-it-true-that-map-generally-doesnt-make-sense-with-bang-methods\" title=\"ruby is it true that map generally doesnt make sense with bang methods\">stackoverflow.com/questions/41854955/&hellip;</a>"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485354557, "last_edit_date": 1495535356, "creation_date": 1485353137, "answer_id": 41853662, "question_id": 41853364, "link": "https://stackoverflow.com/questions/41853364/ruby-why-does-this-way-of-using-map-throw-an-error/41853662#41853662", "title": "Ruby: Why does this way of using map throw an error?", "body": "<h1>Alternatives</h1>\n\n<h3>String#methods</h3>\n\n<p>Just to show what could be done : you could define <code>String</code> methods without arguments.</p>\n\n<pre><code>class String\n  def replace_newlines!(replace = ' ')\n    gsub!(\"\\n\", replace)\n  end\n\n  def replace_newlines(replace = ' ')\n    gsub(\"\\n\", replace)\n  end\nend\n\np new_values = values.map(&amp;:replace_newlines)\n#=&gt; [\"1 2\", \"a b\"]\n\np values.each(&amp;:replace_newlines!)\n#=&gt; [\"1 2\", \"a b\"]\n</code></pre>\n\n<p>Sadly, <a href=\"https://ruby-doc.org/core-2.3.0/doc/syntax/refinements_rdoc.html\" rel=\"nofollow noreferrer\">refinements</a> <a href=\"https://stackoverflow.com/questions/35333222/why-doesnt-to-proc-work-inside-ruby-refinements\">wouldn't work</a> with <code>to_proc</code>.</p>\n\n<h3>Proc</h3>\n\n<p>Another possibility would be to define a new <code>Proc</code>, without monkey-patching <code>String</code> :</p>\n\n<pre><code>my_gsub = proc { |string| string.gsub(\"\\n\", ' ') }\np new_values = values.map(&amp;my_gsub)\n#=&gt; [\"1 2\", \"a b\"]\n</code></pre>\n\n<h1>each/map/gsub/gsub!</h1>\n\n<p>Note that <code>map</code> doesn't make much sense when used with <code>!</code> methods. You should either :</p>\n\n<ul>\n<li>use <code>map</code> with <code>gsub</code></li>\n<li>or use <code>each</code> with <code>gsub!</code></li>\n</ul>\n"}, {"comments": [{"owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "edited": false, "score": 0, "creation_date": 1485357190, "post_id": 41854871, "comment_id": 70893785, "body": "Great answer! Thank you."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1485360531, "last_edit_date": 1485360531, "creation_date": 1485356658, "answer_id": 41854871, "question_id": 41853364, "link": "https://stackoverflow.com/questions/41853364/ruby-why-does-this-way-of-using-map-throw-an-error/41854871#41854871", "title": "Ruby: Why does this way of using map throw an error?", "body": "<p><code>&amp;:foo</code> may erroneously be seen as <code>&amp;:</code> plus <code>foo</code> (terms like \"<a href=\"http://www.google.com/search?q=%22pretzel+colon%22\" rel=\"nofollow noreferrer\">pretzel colon</a>\" reinforce this mistaken view). But no method <code>foo</code> is being called here. <code>&amp;:foo</code> is actually <code>&amp;</code> plus <code>:foo</code>, the latter being a plain symbol.</p>\n\n<p>When calling a method, <code>&amp;object</code> (without <code>:</code>) invokes <code>object.to_proc</code> (which is supposed to return a <a href=\"http://ruby-doc.org/core-2.4.0/Proc.html\" rel=\"nofollow noreferrer\"><code>Proc</code></a>) and passes the returned proc as a <em>block argument</em> to the method.</p>\n\n<p><code>object</code> often happens to be a symbol and <a href=\"http://ruby-doc.org/core-2.4.0/Symbol.html#method-i-to_proc\" rel=\"nofollow noreferrer\"><code>Symbol#to_proc</code></a>'s implementation would look somehow like this in Ruby: (it's actually written in C)</p>\n\n<pre><code>class Symbol\n  def to_proc\n    proc { |object, *args| object.public_send(self, *args) }\n  end\nend\n</code></pre>\n\n<p>So this:</p>\n\n<pre><code>method(&amp;:symbol)\n</code></pre>\n\n<p>effectively becomes this:</p>\n\n<pre><code>method { |object, *args| object.public_send(:symbol, *args) }\n</code></pre>\n\n<p>or, if <code>method</code> doesn't yield multiple values (like <code>map</code>), it's simply:</p>\n\n<pre><code>method { |object| object.public_send(:symbol) }\n</code></pre>\n\n<p>Obviously, you can't pass additional arguments via a symbol.</p>\n\n<p>But ... <code>object</code> doesn't have to be a symbol. You could use another class with a custom <code>to_proc</code> implementation. Let's abuse <code>Array</code> for demonstration purposes:</p>\n\n<pre><code>class Array\n  def to_proc\n    method, *args = self\n    proc { |obj| obj.public_send(method, *args) }\n  end\nend\n</code></pre>\n\n<p>This hack would allow you to write:</p>\n\n<pre><code>[\"foo\\nbar\", \"baz\\nqux\"].map(&amp;[:gsub, \"\\n\", '-'])\n#=&gt; [\"foo-bar\", \"baz-qux\"]\n</code></pre>\n"}], "owner": {"reputation": 4611, "user_id": 3257186, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1e036860583a98d1826052230afd931c?s=128&d=identicon&r=PG", "display_name": "Flip", "link": "https://stackoverflow.com/users/3257186/flip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 41854871, "answer_count": 3, "score": 2, "last_activity_date": 1485360531, "creation_date": 1485352285, "question_id": 41853364, "link": "https://stackoverflow.com/questions/41853364/ruby-why-does-this-way-of-using-map-throw-an-error", "title": "Ruby: Why does this way of using map throw an error?", "body": "<p>I tried to shorten </p>\n\n<p><code>values.map { |value| value.gsub!(\"\\n\", ' ') }</code></p>\n\n<p>with</p>\n\n<p><code>values.map(&amp;:gsub!(\"\\n\", ' '))</code></p>\n\n<p>but it gives me an:</p>\n\n<pre><code>SyntaxError:\n...csv_creator.rb:40: syntax error, unexpected '(', expecting ')'\n     values.map(&amp;:gsub!(\"\\n\", ' '))\n</code></pre>\n\n<p>Anyone know what's going on?</p>\n"}, {"tags": ["ruby", "hash", "hashmap"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1485349800, "post_id": 41852168, "comment_id": 70888500, "body": "I would suggest you to go read some intro on ruby syntax. Ruby differs from PHP. One can not simply expect the syntax of one language will be applied everywhere."}], "answers": [{"comments": [{"owner": {"reputation": 329, "user_id": 3864693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fdb906c8f4c915dbffd34cc27905d9f?s=128&d=identicon&r=PG&f=1", "display_name": "buurkeey", "link": "https://stackoverflow.com/users/3864693/buurkeey"}, "edited": false, "score": 0, "creation_date": 1485349319, "post_id": 41852225, "comment_id": 70888181, "body": "I tried it but it didn&#39;t solve. E.g: If i retrieve $username&#39;s value, it even retrieving to $password&#39;s values."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 329, "user_id": 3864693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fdb906c8f4c915dbffd34cc27905d9f?s=128&d=identicon&r=PG&f=1", "display_name": "buurkeey", "link": "https://stackoverflow.com/users/3864693/buurkeey"}, "edited": false, "score": 0, "creation_date": 1485349462, "post_id": 41852225, "comment_id": 70888273, "body": "See update about global variables."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1485349711, "post_id": 41852225, "comment_id": 70888419, "body": "\u201cYou need to first get the value for <code>$password</code>, which is a Hash.`\u2014this is wrong, please remove."}, {"owner": {"reputation": 329, "user_id": 3864693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fdb906c8f4c915dbffd34cc27905d9f?s=128&d=identicon&r=PG&f=1", "display_name": "buurkeey", "link": "https://stackoverflow.com/users/3864693/buurkeey"}, "edited": false, "score": 0, "creation_date": 1485349732, "post_id": 41852225, "comment_id": 70888434, "body": "That is just a collection of web elements and i need them reachable. I tried your suggestion but it didn&#39;t work:("}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1485349863, "post_id": 41852225, "comment_id": 70888556, "body": "@mudasobwa: I don&#39;t think it&#39;s wrong : <code>$password</code> is a (weird) key in this case, and it has an associated value in <code>$login_form</code> hash."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1485350012, "post_id": 41852225, "comment_id": 70888662, "body": "@mudasobwa: It isn&#39;t wrong if <code>$username</code> and <code>$password</code> are initialized, it&#39;s just really weird. Still, I removed it to avoid adding confusion."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1485350036, "post_id": 41852225, "comment_id": 70888679, "body": "@EricDuminil Sorry, I ran into troubles parsing php syntax with ruby parser :) It\u2019s not wrong, it should work if all global variables, used as keys, were previously set."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485351981, "last_edit_date": 1495542260, "creation_date": 1485349044, "answer_id": 41852225, "question_id": 41852168, "link": "https://stackoverflow.com/questions/41852168/retrieve-values-in-hash-in-hash/41852225#41852225", "title": "Retrieve values in hash in hash", "body": "<h1>Global variables ?</h1>\n\n<p>Are you sure you need <a href=\"https://stackoverflow.com/questions/1042384/how-do-you-use-global-variables-or-constant-values-in-ruby\">global variables</a>?</p>\n\n<p>Right now, the keys in your hash aren't string, symbol or integers, but the object referenced by the variables <code>$username</code> and <code>$password</code>. Those variables are global, and are accessible from everywhere in your code. This doesn't seem to be a good idea for a variable called <code>password</code>.</p>\n\n<p>If those variables aren't initialized, they both are <code>nil</code>, so your <code>login_form</code> is actually :</p>\n\n<pre><code>{nil=&gt;{:web_element_type=&gt;:id, :web_element=&gt;\"pass\"}}\n</code></pre>\n\n<p>The values for <code>$username</code> have been overwritten by <code>$password</code>.</p>\n\n<p>If you're sure that <code>login_form</code> should be a global variable :</p>\n\n<pre><code>$login_form = {\n    username: {web_element_type: :id, web_element: 'uname'},\n    password: {web_element_type: :id, web_element: 'pass'}\n}\n\np $login_form[:password].values_at(:web_element_type,  :web_element)\n#=&gt; [:id, \"pass\"]\ntype, element = $login_form[:password].values_at(:web_element_type,  :web_element)\np type\n#=&gt; :id\np element\n#=&gt; \"pass\"\n</code></pre>\n\n<p>If not, you could use <code>@login_form</code> or just <code>login_form</code>.</p>\n\n<p>If you're still confused, you could look at <a href=\"https://stackoverflow.com/questions/11495098/difference-between-various-variables-scopes-in-ruby\">this</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485351878, "post_id": 41852928, "comment_id": 70889958, "body": "I have a question : why did you post this answer, when the exact same content has been posted half an hour before?"}], "tags": [], "owner": {"reputation": 258, "user_id": 5372350, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-bxH_xBs-r9s/AAAAAAAAAAI/AAAAAAAAABg/UYFtw0nAYW8/photo.jpg?sz=128", "display_name": "Sonu Singh", "link": "https://stackoverflow.com/users/5372350/sonu-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1485351106, "creation_date": 1485351106, "answer_id": 41852928, "question_id": 41852168, "link": "https://stackoverflow.com/questions/41852168/retrieve-values-in-hash-in-hash/41852928#41852928", "title": "Retrieve values in hash in hash", "body": "<p>This solution can help you and ready <a href=\"https://ruby-doc.org/core-2.2.0/Hash.html\" rel=\"nofollow noreferrer\">Hash</a></p>\n\n<p>define hash like this way</p>\n\n<pre><code>$login_form = {\n  :username =&gt; {web_element_type: :id, web_element: 'uname'},\n  :password =&gt; {web_element_type: :id, web_element: 'pass'}\n}\n</code></pre>\n\n<p>you can retrieve <code>password</code> like this way</p>\n\n<pre><code>$login_form[:password] \n</code></pre>\n\n<p>If you have any question please me know.</p>\n"}], "owner": {"reputation": 329, "user_id": 3864693, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9fdb906c8f4c915dbffd34cc27905d9f?s=128&d=identicon&r=PG&f=1", "display_name": "buurkeey", "link": "https://stackoverflow.com/users/3864693/buurkeey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1485359727, "answer_count": 2, "score": -1, "last_activity_date": 1485351981, "creation_date": 1485348904, "question_id": 41852168, "link": "https://stackoverflow.com/questions/41852168/retrieve-values-in-hash-in-hash", "closed_reason": "Not suitable for this site", "title": "Retrieve values in hash in hash", "body": "<p>I have a hash like this:</p>\n\n<pre><code>$login_form = {\n    $username =&gt; {web_element_type: :id, web_element: 'uname'},\n    $password =&gt; {web_element_type: :id, web_element: 'pass'}\n}\n</code></pre>\n\n<p>How can i retrieve $password's web element type and web element with the simplest way?</p>\n"}, {"tags": ["ruby", "unit-testing", "mockachino"], "answers": [{"tags": [], "owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "is_accepted": true, "score": 1, "last_activity_date": 1485356898, "creation_date": 1485356898, "answer_id": 41854952, "question_id": 41852150, "link": "https://stackoverflow.com/questions/41852150/how-does-mocha-generate-a-mock-out-of-myrubyclass-new-in-ruby/41854952#41854952", "title": "How does Mocha generate a mock out of MyRubyClass.new in ruby?", "body": "<p>in general, this is referred to as \"monkey patching\". </p>\n\n<p>ruby has the concept of open classes, so at runtime you can mess around with it. </p>\n\n<p>in the specific case of mocha, i assume that it is this piece of code here: <a href=\"https://github.com/freerange/mocha/blob/a7bc1b53ace895503b4b5d4915382aead4632e3e/lib/mocha/api.rb#L18-L22\" rel=\"nofollow noreferrer\">https://github.com/freerange/mocha/blob/a7bc1b53ace895503b4b5d4915382aead4632e3e/lib/mocha/api.rb#L18-L22</a></p>\n"}], "owner": {"reputation": 35, "user_id": 1080862, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/WrTQE.jpg?s=128&g=1", "display_name": "Karl San Gabriel", "link": "https://stackoverflow.com/users/1080862/karl-san-gabriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 41854952, "answer_count": 1, "score": 0, "last_activity_date": 1485356898, "creation_date": 1485348855, "last_edit_date": 1485349647, "question_id": 41852150, "link": "https://stackoverflow.com/questions/41852150/how-does-mocha-generate-a-mock-out-of-myrubyclass-new-in-ruby", "title": "How does Mocha generate a mock out of MyRubyClass.new in ruby?", "body": "<p>My background is Java and I am new to Ruby. I saw a mocking/stubbing framework called Mocka. I saw this example test method:</p>\n\n<pre><code>require 'test/unit'\nrequire 'mocha/test_unit'\n\nclass MiscExampleTest &lt; Test::Unit::TestCase\n  # ...\n\n  def test_mocking_an_instance_method_on_a_real_object\n    product = Product.new\n    product.expects(:save).returns(true)\n    assert product.save\n  end\n\n  #...\nend\n</code></pre>\n\n<p>What mechanism was used to \"automatically\" create a mock object of Person class (or object)? Not sure what to Google for.</p>\n\n<p>If it was something like this</p>\n\n<pre><code>product = mock(Product.new)\n</code></pre>\n\n<p>I'd easily get it.</p>\n\n<p>Thank You! :)</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1485347136, "creation_date": 1485347136, "answer_id": 41851627, "question_id": 41851595, "link": "https://stackoverflow.com/questions/41851595/ruby-split-each-3-array-members-to-a-multi-dimensional-array/41851627#41851627", "title": "Ruby: split each 3 array members to a multi-dimensional array", "body": "<p><code>each_slice</code> is what you're looking for</p>\n\n<pre><code>array1.each_slice(3).to_a\n =&gt; [[0, 1, 2], [3, 4, 5], [6, 7, 8], [9]] \n</code></pre>\n"}], "owner": {"reputation": 1672, "user_id": 6594668, "user_type": "registered", "accept_rate": 15, "profile_image": "https://www.gravatar.com/avatar/7d7abb51f365e465123208807ee0b07b?s=128&d=identicon&r=PG&f=1", "display_name": "prograils", "link": "https://stackoverflow.com/users/6594668/prograils"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "closed_date": 1485347300, "answer_count": 1, "score": 1, "last_activity_date": 1485347136, "creation_date": 1485347060, "question_id": 41851595, "link": "https://stackoverflow.com/questions/41851595/ruby-split-each-3-array-members-to-a-multi-dimensional-array", "closed_reason": "Duplicate", "title": "Ruby: split each 3 array members to a multi-dimensional array", "body": "<p>I have a Ruby array:</p>\n\n<pre><code>array1 = [0,1,2,3,4,5,6,7,8,9]\n</code></pre>\n\n<p>I need to turn it to a multi-dimensional array splitting each its consequent 3 (or less if last) members into a sub-array:</p>\n\n<pre><code>array2 = [[0,1,2],[3,4,5],[6,7,8],[9]]\n</code></pre>\n\n<p>How can I do that?</p>\n"}, {"tags": ["ruby", "algorithm", "search", "text", "trie"], "comments": [{"owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "edited": false, "score": 0, "creation_date": 1485347857, "post_id": 41851404, "comment_id": 70887262, "body": "If you already have working code, but you just want to speed it up, you could also ask on <a href=\"https://codereview.stackexchange.com\">Code Review</a>"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485351669, "creation_date": 1485351669, "answer_id": 41853148, "question_id": 41851404, "link": "https://stackoverflow.com/questions/41851404/searching-if-trie-set-is-contained-in-a-word/41853148#41853148", "title": "Searching if trie set is contained in a word", "body": "<p>With this <a href=\"https://github.com/luikore/triez\" rel=\"nofollow noreferrer\">gem</a>, it appears to be easier to find words beginning with a prefix than finding prefixes included in a word.</p>\n\n<p>Trie is done from set B. For each match, this code checks if the suffix has  at most 3 characters :</p>\n\n<pre><code># gem install triez\nrequire 'triez'\n\nprefixes = ['hi', 'there', 'hire', 'hih', 'hih543']\nwords =  ['hihow', 'himan', 'fsdko45']\n\nword_trie = Triez.new\nwords.each do |word|\n  word_trie[word] = 1\nend\n\nprefixes.each do |prefix|\n  suffixes = word_trie.search_with_prefix(prefix).select{|suffix, id| suffix.size &lt;=3 }\n  suffixes.each do |suffix, id|\n    word = prefix + '|' + suffix\n    puts word\n  end\nend\n\n# =&gt;\n# hi|man\n# hi|how\n# hih|ow\n</code></pre>\n"}], "owner": {"reputation": 1394, "user_id": 4214184, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/8b4c95b51ca86c3a27f1a6515b11557e?s=128&d=identicon&r=PG", "display_name": "anemaria20", "link": "https://stackoverflow.com/users/4214184/anemaria20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1485351669, "creation_date": 1485346473, "last_edit_date": 1485350684, "question_id": 41851404, "link": "https://stackoverflow.com/questions/41851404/searching-if-trie-set-is-contained-in-a-word", "title": "Searching if trie set is contained in a word", "body": "<p>Say I have 2 sets:</p>\n\n<pre><code>Set A: ['hi', 'there', 'hire', 'hih', 'hih543']\n\nSet B: ['hihow', 'himan, 'fsdko45']\n</code></pre>\n\n<p>Now, these sets in reality each contain close to million elements each.</p>\n\n<p>What I need to do in a nutshell, is filter the set B, in this way</p>\n\n<p>1) For each element of set B, find all elements in set A that are a prefix for it.</p>\n\n<p>So in the above example, when I check set A against <code>hihow</code>, I get 2 results: <code>hi</code> and <code>hih</code>.</p>\n\n<p>2) Say I have <code>max_offset = 3</code>. For each of the results I got in set <code>A</code>, I should add <code>[0,1,2,3]</code> to set A elements length, and if ANY of the results are equal to set B element length then return true.</p>\n\n<p>In this example, let's say we start with <code>hih</code>, so I add '1' to it, I add '2' to it, and I get a match, <code>hih.size + 2 == hihow.size</code>. The whole operation returns true.</p>\n\n<p>Now, how can I do this in a way where I wouldn't wait for hours for this operation to complete? One approach I figured I could use is to make the 1 set a tries. Say we make set B a tries to allow for a fast look-up.</p>\n\n<p>So now, I iterate over set A elements, and check: For which elements of set B is this element a prefix? So for <code>'hi'</code>, I'd get <code>['hihow', 'himan']</code>. Now I add <code>[0,1,2,3]</code> to <code>hi.size</code> and if the result matches the size of any 1 element in the array, that element is a match.</p>\n\n<p>Another approach would be to make set A a tries, and iterate over set B, taking away 0-3 characters at the end of it. So say I take <code>hihow</code>, I produce <code>['hihow', 'hiho', 'hih']</code> and check all three if any match against set A tries. Yep, there's a match, so this returns true.</p>\n\n<p>I'm afraid I'm missing something in this approach in terms of correctness, so I posted it here. Also, if anyone has a simpler/better way to do this, please let me know. Thanks!</p>\n"}, {"tags": ["html", "css", "mysql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6925364"}, "edited": false, "score": 0, "creation_date": 1485347610, "post_id": 41851057, "comment_id": 70887131, "body": "Is that all? or do I need to put the student_id field to be specific? I tried to add a record after I migrated on it however it just keep on rolling back."}, {"owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "edited": false, "score": 0, "creation_date": 1485347870, "post_id": 41851057, "comment_id": 70887271, "body": "I suppose that you need to set a PK for that table."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6925364"}, "edited": false, "score": 0, "creation_date": 1485347984, "post_id": 41851057, "comment_id": 70887343, "body": "you mean an index to tha fieldt? like this one add_index(&quot;students&quot;, &quot;student_id&quot;) ???"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6925364"}, "edited": false, "score": 0, "creation_date": 1485350448, "post_id": 41851057, "comment_id": 70888974, "body": "Testing this out."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6925364"}, "edited": false, "score": 0, "creation_date": 1485350563, "post_id": 41851057, "comment_id": 70889053, "body": "You cannot auto increment then starting from 1000?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6925364"}, "edited": false, "score": 0, "creation_date": 1485350596, "post_id": 41851057, "comment_id": 70889073, "body": "This is what I did awhile ago and no luck."}], "tags": [], "owner": {"reputation": 18593, "user_id": 4304188, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5695b0e5c30d4464163e3f3412fe5f1?s=128&d=identicon&r=PG", "display_name": "Mihai Dinculescu", "link": "https://stackoverflow.com/users/4304188/mihai-dinculescu"}, "is_accepted": true, "score": 2, "last_activity_date": 1485361016, "last_edit_date": 1485361016, "creation_date": 1485345466, "answer_id": 41851057, "question_id": 41850902, "link": "https://stackoverflow.com/questions/41850902/how-to-automatically-increment-a-custom-id-with-starting-value-in-ruby-on-rails/41851057#41851057", "title": "How to automatically increment a custom id with starting value in Ruby on Rails 5?", "body": "<pre><code>execute \"CREATE SEQUENCE students_student_id_seq OWNED BY students.student_id INCREMENT BY 1 START WITH 1001\"\n</code></pre>\n\n<p>The above is Postgresql syntax and your database seems to be MySQL.</p>\n\n<p>Anyway, you can achieve what you want by setting <code>student_id</code> as a primary key and then updating the increment starting value.</p>\n\n<pre><code>def change\n  create_table :students, :id =&gt; false do |t|\n    t.integer \"student_id\", primary_key: true\n    t.string \"first_name\", :limit =&gt; 25\n    t.string \"last_name\", :limit =&gt; 50\n    t.string \"email\", :default =&gt; ' ', :null =&gt; false\n    t.string \"birthday\"\n    t.string \"subjects\"\n    t.string \"teachers\"\n    t.string \"username\", :limit =&gt; 25\n    t.string \"password_digest\", :limit =&gt; 40\n    t.timestamps\n  end\n\n  reversible do |dir|\n    dir.up { execute \"ALTER TABLE students AUTO_INCREMENT = 1000\" }\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6925364"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 0, "accepted_answer_id": 41851057, "answer_count": 1, "score": 5, "last_activity_date": 1611422151, "creation_date": 1485345017, "last_edit_date": 1611422151, "question_id": 41850902, "link": "https://stackoverflow.com/questions/41850902/how-to-automatically-increment-a-custom-id-with-starting-value-in-ruby-on-rails", "title": "How to automatically increment a custom id with starting value in Ruby on Rails 5?", "body": "<p>I am working on a migration and I remove the default <code>'id'</code> for each table. I created a special field instead <code>'student_id'</code> and I want to make it auto increment starting with 1001.</p>\n<p>Here is my code:</p>\n<pre><code>class CreateStudents &lt; ActiveRecord::Migration[5.0]\n  def up\n    create_table :students, :id =&gt; false do |t|\n      t.integer &quot;student_id&quot;\n      t.string &quot;first_name&quot;, :limit =&gt; 25\n      t.string &quot;last_name&quot;, :limit =&gt; 50\n      t.string &quot;email&quot;, :default =&gt; ' ', :null =&gt; false\n      t.string &quot;birthday&quot;\n      t.string &quot;subjects&quot;\n      t.string &quot;teachers&quot;\n      t.string &quot;username&quot;, :limit =&gt; 25\n      t.string &quot;password_digest&quot;, :limit =&gt; 40\n      t.timestamps\n    end\n    execute &quot;CREATE SEQUENCE students_student_id_seq OWNED BY students.student_id INCREMENT BY 1 START WITH 1001&quot;\n  end\n\n  def down\n  drop_table :students\n  execute &quot;DELETE SEQUENCE students_student_id_seq&quot;\n  end\n\nend\n</code></pre>\n<p>I got the ff error:</p>\n<blockquote>\n<p>Mysql2::Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near 'SEQUENCE students_student_id_seq OWNED BY students.student_id INCREMENT BY 1 STA' at line 1</p>\n</blockquote>\n<p>How to auto a custom id increment with starting value in Ruby on Rails 5?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1485348243, "creation_date": 1485348243, "answer_id": 41851966, "question_id": 41850576, "link": "https://stackoverflow.com/questions/41850576/add-a-node-to-xml-using-nokogirixmlbuilder/41851966#41851966", "title": "Add a node to XML using Nokogiri::XML::Builder", "body": "<p>You could do it in 2 steps :</p>\n\n<ul>\n<li>create title node with \"Hello\" as content</li>\n<li>create item node with title as content</li>\n</ul>\n\n<hr>\n\n<pre><code>xml = '&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;root&gt;\n  &lt;item&gt;A&lt;/item&gt;\n  &lt;item&gt;B&lt;/item&gt;\n&lt;/root&gt;'\n\nrequire 'nokogiri'\n\ndoc = Nokogiri::XML.parse(xml)\n\nsource = doc.root\n\ntitle = Nokogiri::XML::Node.new('title', doc)\ntitle.content = \"Hello\"\n\nitem  = Nokogiri::XML::Node.new('item', doc)\nitem &lt;&lt; title\n\nsource &lt;&lt; item\n\nputs doc\n\n# =&gt;\n# &lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n# &lt;root&gt;\n#   &lt;item&gt;A&lt;/item&gt;\n#   &lt;item&gt;B&lt;/item&gt;\n# &lt;item&gt;&lt;title&gt;Hello&lt;/title&gt;&lt;/item&gt;&lt;/root&gt;\n</code></pre>\n"}], "owner": {"reputation": 14611, "user_id": 468311, "user_type": "registered", "accept_rate": 72, "profile_image": "https://lh3.googleusercontent.com/-R2kbPXmZbho/AAAAAAAAAAI/AAAAAAAAAAA/AGDgw-jKxaTxYHTYxiImqnqvR0jJmhDlaw/mo/photo.jpg?sz=128", "display_name": "Igor Filippov", "link": "https://stackoverflow.com/users/468311/igor-filippov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 452, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485348243, "creation_date": 1485344029, "question_id": 41850576, "link": "https://stackoverflow.com/questions/41850576/add-a-node-to-xml-using-nokogirixmlbuilder", "title": "Add a node to XML using Nokogiri::XML::Builder", "body": "<p>I have a <code>Nokogiri::XML::Builder</code> instance, when I call <code>to_xml</code> it produces following structure: </p>\n\n<pre><code>&lt;?xml version=\"1.0\" encoding=\"UTF-8\"?&gt;\n&lt;root&gt;\n  &lt;item&gt;...&lt;/item&gt;\n  &lt;item&gt;...&lt;/item&gt;\n&lt;/root&gt;\n</code></pre>\n\n<p>Using this instance I'd like to add one more <code>&lt;item&gt;</code> node under <code>&lt;root&gt;</code> like this:</p>\n\n<pre><code>def add_static_job(builder)\n  source = builder.doc.root\n  item =  Nokogiri::XML::Node.new('item', source)\n  item.content = '&lt;title&gt;Hello&lt;/title&gt;'\n  source &lt;&lt; item\nend\n</code></pre>\n\n<p>Unfortunatelly this doesn't produce valid xml in the end, rather something like:</p>\n\n<pre><code>&lt;item&gt;&amp;lt;title&amp;gt;Hello&amp;lt;title&amp;gt;&lt;/item&gt;\n</code></pre>\n\n<p>What could the problem be?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "permissions", "activeadmin", "cancancan"], "answers": [{"comments": [{"owner": {"reputation": 1442, "user_id": 183982, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d26359eaade8fa09736f1a6cacc59e3c?s=128&d=identicon&r=PG", "display_name": "Mahmoud M. Abdel-Fattah", "link": "https://stackoverflow.com/users/183982/mahmoud-m-abdel-fattah"}, "edited": false, "score": 0, "creation_date": 1485410266, "post_id": 41850522, "comment_id": 70917533, "body": "But I want to used it in a different page!"}, {"owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "reply_to_user": {"reputation": 1442, "user_id": 183982, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d26359eaade8fa09736f1a6cacc59e3c?s=128&d=identicon&r=PG", "display_name": "Mahmoud M. Abdel-Fattah", "link": "https://stackoverflow.com/users/183982/mahmoud-m-abdel-fattah"}, "edited": false, "score": 0, "creation_date": 1485421888, "post_id": 41850522, "comment_id": 70922181, "body": "<code>my_specific_page</code> needs to be an instance of <code>ActiveAdmin::Page</code>, not necessarily the page you are currently visiting. Just have to make sure that <code>my_specific_page</code> is the page where you want to know permissions"}, {"owner": {"reputation": 1442, "user_id": 183982, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d26359eaade8fa09736f1a6cacc59e3c?s=128&d=identicon&r=PG", "display_name": "Mahmoud M. Abdel-Fattah", "link": "https://stackoverflow.com/users/183982/mahmoud-m-abdel-fattah"}, "edited": false, "score": 0, "creation_date": 1485433845, "post_id": 41850522, "comment_id": 70928511, "body": "Yes, I agree, but the question now what is the right syntax to access ActiveAdmin page instance?"}], "tags": [], "owner": {"reputation": 2202, "user_id": 3607039, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8Bj3I.jpg?s=128&g=1", "display_name": "Bustikiller", "link": "https://stackoverflow.com/users/3607039/bustikiller"}, "is_accepted": false, "score": 8, "last_activity_date": 1485343872, "creation_date": 1485343872, "answer_id": 41850522, "question_id": 41850126, "link": "https://stackoverflow.com/questions/41850126/how-to-check-cancan-permission-on-activeadmin-custom-page/41850522#41850522", "title": "How to check cancan permission on ActiveAdmin custom page?", "body": "<p>The code </p>\n\n<pre><code>can? :manage, ActiveAdmin::Page, name: 'My Page'\n</code></pre>\n\n<p>checks if the current user can manage an instance of <code>ActiveAdmin::Page</code> whose <code>name</code> attribute is equal to <em>My Page</em>. That is exactly the condition you stated in your abilities file, and that is why it always returns <code>true</code>.</p>\n\n<p>In case you want to know if a user can or cannot access a specific page (which is what I think you are trying to do) you should ask \"can I manage <em>this</em> page?\" instead of \"can I manage a page whose name is <em>My Page</em>?\". In the former you are talking about a specific page, and in the later you are talking about pages with a certain characteristic. </p>\n\n<p>In order to ask CanCan whether the current user can access a specific page, just ask:</p>\n\n<pre><code>can? :manage, my_specific_page\n</code></pre>\n\n<p>where <code>my_specific_page</code> needs to be an instance of <code>ActiveAdmin::Page</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 1442, "user_id": 183982, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d26359eaade8fa09736f1a6cacc59e3c?s=128&d=identicon&r=PG", "display_name": "Mahmoud M. Abdel-Fattah", "link": "https://stackoverflow.com/users/183982/mahmoud-m-abdel-fattah"}, "is_accepted": true, "score": 0, "last_activity_date": 1495743092, "creation_date": 1495743092, "answer_id": 44189057, "question_id": 41850126, "link": "https://stackoverflow.com/questions/41850126/how-to-check-cancan-permission-on-activeadmin-custom-page/44189057#44189057", "title": "How to check cancan permission on ActiveAdmin custom page?", "body": "<p>Finally, I figured out a way, it looks weird because it uses <em>register_page</em> but it is working:</p>\n\n<pre><code>can? :manage, (ActiveAdmin::register_page 'My Page')\n</code></pre>\n"}], "owner": {"reputation": 1442, "user_id": 183982, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/d26359eaade8fa09736f1a6cacc59e3c?s=128&d=identicon&r=PG", "display_name": "Mahmoud M. Abdel-Fattah", "link": "https://stackoverflow.com/users/183982/mahmoud-m-abdel-fattah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 806, "favorite_count": 2, "accepted_answer_id": 44189057, "answer_count": 2, "score": 5, "last_activity_date": 1539581312, "creation_date": 1485342800, "last_edit_date": 1495881291, "question_id": 41850126, "link": "https://stackoverflow.com/questions/41850126/how-to-check-cancan-permission-on-activeadmin-custom-page", "title": "How to check cancan permission on ActiveAdmin custom page?", "body": "<p>I've the following <code>Ability</code>:</p>\n\n<pre><code>can :manage, ActiveAdmin::Page, name: 'My Page'\n</code></pre>\n\n<p>And it is working fine, but I want to check if the user has the ability to manage this <code>ActiveAdmin::Page</code> in different pages. So, when I used the following:</p>\n\n<pre><code>can? :manage, ActiveAdmin::Page, name: 'My Page'\n</code></pre>\n\n<p>It returned <code>true</code> for any page even if it does not exist!</p>\n"}, {"tags": ["ruby", "string"], "answers": [{"tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1485345980, "last_edit_date": 1485345980, "creation_date": 1485343716, "answer_id": 41850468, "question_id": 41850048, "link": "https://stackoverflow.com/questions/41850048/how-to-add-add-values-to-a-string-in-ruby/41850468#41850468", "title": "how to add add values to a string in ruby?", "body": "<p>There are many problems in your code. </p>\n\n<pre><code>machines[A].each # Where is the variable A defined?\n\nmachines.each_value do |machines|  # The variable passed to the block is also machines?\n\nhash['user'] # Where is the variable hash defined?\n</code></pre>\n\n<p>Try this.</p>\n\n<pre><code>machines = YAML.load_file('machine.yml')\nvar = ''\nmachines.each_value do |hash| \n  var += (\"[\" + hash['user'] + \"]\\n\" + hash['ip'] + \"\\n\")\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1485346039, "post_id": 41850512, "comment_id": 70886189, "body": "Thank you for taking the time to answer this question. However, when answering questions with code, it is always helpful to also explain how your code works, what is different to what was in in the question and why your code solves the problems it has. Just pasting a snippet of code without further explanation is rarely helpful on its own and might get downvoted or removed later."}], "tags": [], "owner": {"reputation": 11, "user_id": 4338285, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--3yX2puaWyY/AAAAAAAAAAI/AAAAAAAAAAA/Cjf5GjUCUDo/photo.jpg?sz=128", "display_name": "Julie Kent", "link": "https://stackoverflow.com/users/4338285/julie-kent"}, "is_accepted": false, "score": 0, "last_activity_date": 1485343859, "last_edit_date": 1485343859, "creation_date": 1485343833, "answer_id": 41850512, "question_id": 41850048, "link": "https://stackoverflow.com/questions/41850048/how-to-add-add-values-to-a-string-in-ruby/41850512#41850512", "title": "how to add add values to a string in ruby?", "body": "<p>This appears to work for me via irb:</p>\n\n<pre><code>machines['machines'].each {|k,v| p \"[\" + k + \"]\" + \"\\n\"  + v[\"ip\"]  }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1485348747, "creation_date": 1485348747, "answer_id": 41852107, "question_id": 41850048, "link": "https://stackoverflow.com/questions/41850048/how-to-add-add-values-to-a-string-in-ruby/41852107#41852107", "title": "how to add add values to a string in ruby?", "body": "<p>This method uses <code>map</code> to iterate over the subhashes and <code>join</code> to get a multi-line string :</p>\n\n<pre><code>require 'yaml'\nmachines = YAML.load_file('machines.yml')\n\nvar = machines['machines'].map{ |id, hash| format(\"[%s]\\n%s\", id, hash['ip']) }.join(\"\\n\")\n\nputs var\n# =&gt;\n# [A]\n# 10.11.12\n# [B]\n# 10.11.13\n# [C]\n# 10.11.14\n</code></pre>\n"}], "owner": {"reputation": 413, "user_id": 5519843, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0196d93158e67e5eeeabba17fb4e66a1?s=128&d=identicon&r=PG&f=1", "display_name": "Learner ", "link": "https://stackoverflow.com/users/5519843/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1485348747, "creation_date": 1485342614, "question_id": 41850048, "link": "https://stackoverflow.com/questions/41850048/how-to-add-add-values-to-a-string-in-ruby", "title": "how to add add values to a string in ruby?", "body": "<p>I have a file as machine.yml:</p>\n\n<hr>\n\n<pre><code>machines:  \n A:\n    ip: 10.11.12\n    pass: vass\n    user: A\n\n B:\n    ip: 10.11.13\n    pass: grass\n    user: B\n\n C:\n    ip: 10.11.14\n    pass: pass\n    user: C\n</code></pre>\n\n<p>In ruby the file is being parsed as follow:</p>\n\n<pre><code>machines = YAML.load_file('machine.yml')\n    machines[A].each do |letters,hash|\n    ## Iterate through entries in YAML file\n    machines.each_value do |machines| \n       var += \"[\" + hash['user'] + \"]\\n\" + hash['ip'] + \"\\n\"\n    end\n</code></pre>\n\n<p>Now, i want to have the values as output as follows:</p>\n\n<pre><code>[A]\n10.11.12\n[B]\n10.11.13\n[C]\n10.11.14\n</code></pre>\n\n<p>But i am not getting output and getting error as </p>\n\n<pre><code>\"': undefined method `+' for nil:NilClass (NoMethodError)\"\n</code></pre>\n\n<p>So suggest what shall i do so that i get the following output in a variable, So that the variable can be passed on further to some other function:</p>\n\n<pre><code>[A]\n10.11.12\n[B]\n10.11.13\n[C]\n10.11.14\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1485342796, "post_id": 41850008, "comment_id": 70884144, "body": "so could i just replace the last line (at)happening = Happening.new(started_at: time) with (at)Area.happening = Happening.new(started_at: time)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1485349636, "post_id": 41850008, "comment_id": 70888380, "body": "Possibly. We don&#39;t see the relationship of Area and Happening in your question."}, {"owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1485425199, "post_id": 41850008, "comment_id": 70923981, "body": "thanks got it working by initializing the @area instance variable"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1485342467, "creation_date": 1485342467, "answer_id": 41850008, "question_id": 41849774, "link": "https://stackoverflow.com/questions/41849774/rails-4-1-undefined-method-usual-start-time-for-nilnilclass/41850008#41850008", "title": "Rails 4.1 undefined method `usual_start_time&#39; for nil:NilClass", "body": "<p>It just means that <code>@area</code> isn't initialized in your controller.</p>\n\n<p><code>@area</code> isn't an instance of <code>Area</code> class in your view, it's <code>nil</code>, and no <code>usual_start_time</code> is defined for <code>nil</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "edited": false, "score": 0, "creation_date": 1485344703, "post_id": 41850663, "comment_id": 70885378, "body": "I want users to see 18:45 by default. When they create a new form. It does work with &quot;645&quot; but wanting to replace with the string &quot;usual_start_time&quot; in my areas table (which is 1845!)"}], "tags": [], "owner": {"reputation": 11, "user_id": 4338285, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--3yX2puaWyY/AAAAAAAAAAI/AAAAAAAAAAA/Cjf5GjUCUDo/photo.jpg?sz=128", "display_name": "Julie Kent", "link": "https://stackoverflow.com/users/4338285/julie-kent"}, "is_accepted": false, "score": 0, "last_activity_date": 1485344303, "creation_date": 1485344303, "answer_id": 41850663, "question_id": 41849774, "link": "https://stackoverflow.com/questions/41849774/rails-4-1-undefined-method-usual-start-time-for-nilnilclass/41850663#41850663", "title": "Rails 4.1 undefined method `usual_start_time&#39; for nil:NilClass", "body": "<p>The error message indicates that your @area instance variable isn't set anywhere and is returning nil. </p>\n\n<p>Are you wanting to change the attribute value of the started_at on the Happening model?  If so, you could do this in the Happening#create method, and just do @happening.started_at = 18:45 </p>\n"}], "owner": {"reputation": 529, "user_id": 3574178, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/6f9079310597136064b4b8197f7a8bf5?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/3574178/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41850008, "answer_count": 2, "score": 0, "last_activity_date": 1485344303, "creation_date": 1485341834, "question_id": 41849774, "link": "https://stackoverflow.com/questions/41849774/rails-4-1-undefined-method-usual-start-time-for-nilnilclass", "title": "Rails 4.1 undefined method `usual_start_time&#39; for nil:NilClass", "body": "<p>I have a form which creates the default time of 6.45pm. When a  new form is created</p>\n\n<p>_form.html.erb</p>\n\n<pre><code> = f.input :started_at, as: :string, class: 'form-control', input_html: { value: l(@happening.started_at, format: :date_time_picker), class: 'date_time_picker' }, label: \"Start at\"\n</code></pre>\n\n<p>but instead of showing 1845 in my happenings controller  i want to replace it with the usual_start_time field in my areas table</p>\n\n<p>scheme.rb</p>\n\n<pre><code>create_table \"areas\", force: :cascade do |t|\n    t.string  \"deprecated__default_postcode\", limit: 255\n    t.integer \"number_of_runners_needed\",                 default: 100,     null: false\n    t.string  \"referral_partners_logo_image\"\n    t.integer \"address_id\"\n    **t.string  \"usual_start_time\",                         default: \"18:45\"**\n  end\n</code></pre>\n\n<p>I have tried using </p>\n\n<pre><code>time = DateTime.strptime((Date.today + 1.day).to_s + ' ' + **\"#{@area.usual_start_time}\"**, '%Y-%m-%d %H:%M')\n</code></pre>\n\n<p>but it gives me undefined method `usual_start_time' for nil:NilClass</p>\n\n<p>also tried </p>\n\n<pre><code>time = DateTime.strptime((Date.today + 1.day).to_s + ' ' + **\"#{@area.happenings.usual_start_time}\"**, '%Y-%m-%d %H:%M')\n</code></pre>\n\n<p>happenings_controller.rb (want to replace \"18.45\"</p>\n\n<pre><code>  def new\n    @type = params[:type].underscore\n    time = DateTime.strptime((Date.today + 1.day).to_s + ' ' + **\"18:45\"**, '%Y-%m-%d %H:%M')\n    @happening = Happening.new(started_at: time)\n  end\n</code></pre>\n"}, {"tags": ["ruby", "cucumber", "yaml"], "comments": [{"owner": {"reputation": 470, "user_id": 1419458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40be82026a81f18a2bbbaad209694e0?s=128&d=identicon&r=PG", "display_name": "Stanko Krtali\u0107 Rusendi\u0107", "link": "https://stackoverflow.com/users/1419458/stanko-krtali%c4%87-rusendi%c4%87"}, "edited": false, "score": 0, "creation_date": 1485348956, "post_id": 41849234, "comment_id": 70887950, "body": "Can you explain what you want a little better? I&#39;m not sure if you want to change the test to accommodate all possible YAML entries or make a YAML that can have interpolated text in it.  Also, the code example doesn&#39;t seem like valid RSpec syntax, could you update that also?"}, {"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "reply_to_user": {"reputation": 470, "user_id": 1419458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40be82026a81f18a2bbbaad209694e0?s=128&d=identicon&r=PG", "display_name": "Stanko Krtali\u0107 Rusendi\u0107", "link": "https://stackoverflow.com/users/1419458/stanko-krtali%c4%87-rusendi%c4%87"}, "edited": false, "score": 0, "creation_date": 1485353119, "post_id": 41849234, "comment_id": 70890892, "body": "If possible, I&#39;d like interpolated text in the YAML.  Using RSpec-Expectations within Capybara, that&#39;s the syntax for a simple text assertion on page."}], "answers": [{"tags": [], "owner": {"reputation": 470, "user_id": 1419458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f40be82026a81f18a2bbbaad209694e0?s=128&d=identicon&r=PG", "display_name": "Stanko Krtali\u0107 Rusendi\u0107", "link": "https://stackoverflow.com/users/1419458/stanko-krtali%c4%87-rusendi%c4%87"}, "is_accepted": true, "score": 5, "last_activity_date": 1485364459, "creation_date": 1485364459, "answer_id": 41857621, "question_id": 41849234, "link": "https://stackoverflow.com/questions/41849234/ruby-regex-in-yaml/41857621#41857621", "title": "Ruby regex in Yaml", "body": "<p>If you want to interpolate text into YAML you will need to replace the words that you want to be interpolated with <code>%{keyword}</code> where the keyword is a key that will be used to indicate which data to interpolate there.</p>\n\n<p>If you use Rails, you would use the <code>t</code> helper method as outlined in <a href=\"http://guides.rubyonrails.org/i18n.html#passing-variables-to-translations\" rel=\"noreferrer\">this section of the I18n guide</a>.</p>\n\n<pre><code># The YAML file\nen:\n  payment_succeeded: \"Payment successful for %{first_name} reference: %{reference_number}\"\nwh: \n  payment_succeeded: \"Taliad llwyddiannus ar gyfer %{first_name} Cyfeirnod: %{reference_number}\"\n\n# Rails Controller / View / Model\nt(:payment_succeeded, first_name: 'Dave', reference_number: '000000')\n</code></pre>\n\n<p>If you want a pure ruby implementation you can use the <code>Kernel::format</code> method.</p>\n\n<pre><code># The YAML file\n# NOTE: This can be in any format, as long as you use %{keyword} in places where you want the data to be interpolated\ntranslations:\n  english: \"Payment successful for %{first_name} reference: %{reference_number}\"\n  welsh: \"Taliad llwyddiannus ar gyfer %{first_name} Cyfeirnod: %{reference_number}\"\n\n# Ruby\ntranslations = YAML.load(File.read('translations.yaml'))\nstring = format(translations[:translations][:welsh], first_name: 'Dave', reference_number: '000000')\n</code></pre>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 381, "favorite_count": 0, "accepted_answer_id": 41857621, "answer_count": 1, "score": 1, "last_activity_date": 1485364459, "creation_date": 1485340334, "question_id": 41849234, "link": "https://stackoverflow.com/questions/41849234/ruby-regex-in-yaml", "title": "Ruby regex in Yaml", "body": "<p>I'm new to YAML and I'm experimenting with writing some tests for language translation. The idea being that I have a YAML file that has the English and Welsh versions of the same text.  I was wondering how I might do the following use a regex within the string in the YAML?</p>\n\n<p>Example:</p>\n\n<p>I have this basic test:</p>\n\n<pre><code>#Gherkin\nAnd I expect to see payment confirmation for \"Dave\"\n\n#Step Def\n    And /^I expect to see payment confirmation for \"(.*?)\"$/ do |user|\n      expect(page).to have_text \"Payment successful for #{user} - Reference: 000000\"\nend\n</code></pre>\n\n<p>YAML Entry:</p>\n\n<pre><code>\"Payment successful for Dave reference: 000000\"\n - welsh: \"Taliad llwyddiannus ar gyfer Dave Cyfeirnod: 000000\"\n</code></pre>\n\n<p>Could I parameterize Dave in that YAML entry as the test suite covers hundreds of users.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 78237, "user_id": 2025923, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/zYYVM.png?s=128&g=1", "display_name": "Tushar", "link": "https://stackoverflow.com/users/2025923/tushar"}, "edited": false, "score": 0, "creation_date": 1485340292, "post_id": 41849207, "comment_id": 70882472, "body": "Replace <code>\\.</code> by <code>&#39;&#39;</code>(empty string). <code>str.gsub!(&#47;\\.&#47;,&#39;&#39;)</code>"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1485340380, "post_id": 41849207, "comment_id": 70882527, "body": "Why use <code>match</code> if you need to replace? See <a href=\"https://ideone.com/bE8xO6\" rel=\"nofollow noreferrer\">ideone.com/bE8xO6</a>. What exact output are you trying to get? If you need an array of text chunks consisting of anything but a dot, you may use <a href=\"https://ideone.com/R21r8G\" rel=\"nofollow noreferrer\"><code>s.scan(&#47;[^.]+&#47;)</code></a>."}, {"owner": {"reputation": 67, "user_id": 6388091, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/c04Vj.png?s=128&g=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/6388091/vladimir"}, "edited": false, "score": 0, "creation_date": 1485340651, "post_id": 41849207, "comment_id": 70882725, "body": "I am new. Now I will think"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485377694, "post_id": 41849797, "comment_id": 70906648, "body": "...or use <a href=\"http://ruby-doc.org/core-2.3.0/String.html#method-i-tr\" rel=\"nofollow noreferrer\">String#tr</a>: <code>str.tr(&#39;.&#39;,&#39;&#39;)</code> or <code>split</code> then <code>join</code>: <code>str.split(&#39;.&#39;).join</code>."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485378094, "post_id": 41849797, "comment_id": 70906840, "body": "<code>tr</code> is a good tip, probably better than <code>gsub</code>. Thanks! No need for creating an array, though."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 3, "last_activity_date": 1485342254, "last_edit_date": 1485342254, "creation_date": 1485341888, "answer_id": 41849797, "question_id": 41849207, "link": "https://stackoverflow.com/questions/41849207/how-to-match-all-character-exept-dot-using-regexp-in-ruby/41849797#41849797", "title": "How to match all character exept dot using regexp in ruby?", "body": "<p>You just need <a href=\"https://ruby-doc.org/core-2.3.0/String.html#method-i-delete\" rel=\"nofollow noreferrer\"><code>String#delete</code></a>:</p>\n\n<pre><code>\"I can haz kittens. Mmmm. Tasty, tasty kittens.\".delete('.')\n</code></pre>\n\n<p>If you really want to use a Regex, you can use <a href=\"https://ruby-doc.org/core-2.3.0/String.html#method-i-gsub\" rel=\"nofollow noreferrer\"><code>String#gsub</code></a>:</p>\n\n<pre><code>\"I can haz kittens. Mmmm. Tasty, tasty kittens.\".gsub(/\\./,'')\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 6388091, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/c04Vj.png?s=128&g=1", "display_name": "Vladimir", "link": "https://stackoverflow.com/users/6388091/vladimir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 41849797, "answer_count": 1, "score": 0, "last_activity_date": 1485342254, "creation_date": 1485340248, "question_id": 41849207, "link": "https://stackoverflow.com/questions/41849207/how-to-match-all-character-exept-dot-using-regexp-in-ruby", "title": "How to match all character exept dot using regexp in ruby?", "body": "<p>Given string:</p>\n\n<pre><code>I can haz kittens. Mmmm. Tasty, tasty kittens.\n</code></pre>\n\n<p>I need get:</p>\n\n<pre><code>#without dot\nI can haz kittens Mmmm Tasty, tasty kittens\n</code></pre>\n\n<p>I write:</p>\n\n<pre><code>string = 'I can haz kittens. Mmmm. Tasty, tasty kittens.'\n/[^\\.]*/.match(string)\n</code></pre>\n\n<p>Next,I don't know. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "devise", "rspec-rails"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1485339858, "post_id": 41848591, "comment_id": 70882134, "body": "What happens if you change it to <code>@user = FactoryGirl.create(:user)</code>?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1485340055, "post_id": 41848591, "comment_id": 70882298, "body": "Also unless you are working on a legacy project you would add these includes in <code>rails_helper.rb</code>. The logic being that you can require <code>spec_helper.rb</code> for the examples that don&#39;t need the whole rails stack."}, {"owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1485395608, "post_id": 41848591, "comment_id": 70913127, "body": "Thanks @max . Unfortunately, the modification that you mentioned affected anything. The error message is still same like this. <code>Failures:    1) RootController GET #index renders the :index view      Got 0 failures and 2 other errors:       1.1) Failure&#47;Error: @user = FactoryGirl.create(:user)                      NoMethodError:             undefined method </code>username=&#39; for #&lt;User:0x007fe2491184a0&gt;           # ./spec/controllers/root_controller_spec.rb:7:in <code>block (2 levels) in &lt;top (required)&gt;&#39;</code>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1485443391, "post_id": 41848591, "comment_id": 70934933, "body": "Thats actually a really different error message. And most like due to the fact that you have omitted to run a migration."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1485443742, "post_id": 41848591, "comment_id": 70935206, "body": "Quite frankly you seem like you have no clue at all what you are doing and your setup seems broken in quite a few ways. I would try removing your <code>spec&#47;spec_helper.rb</code> and <code>rails_helper.rb</code> and run <code>rails g rspec:install</code> to generate working config files. Then add <code>config.include FactoryGirl::Syntax::Methods</code> to  <code>rails_helper.rb</code>."}, {"owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1485474422, "post_id": 41848591, "comment_id": 70952406, "body": "Appreciated your comment. I&#39;ll update along with your advice. And let you know how it turns out."}], "answers": [{"comments": [{"owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "edited": false, "score": 0, "creation_date": 1485395217, "post_id": 41849945, "comment_id": 70913001, "body": "Thanks. but seems like it&#39;s not working for me. An error comes up like following. ``` bundler: failed to load command: rspec (***vendor/bundle/ruby/2.3.0/bin/rspec) NameError: uninitialized constant AuthHelper ```"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1485443511, "post_id": 41849945, "comment_id": 70935017, "body": "You should not have to require devise. <code>require &#39;rspec&#47;rails&#39;</code> in your spec or rails helper will load your rails application which requires the gems in your gemfile. Explicitly requiring devise can lead to it being loaded in the wrong order."}], "tags": [], "owner": {"reputation": 467, "user_id": 7372769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825d46586ef7880d39b6e10bdd51a125?s=128&d=identicon&r=PG&f=1", "display_name": "Don", "link": "https://stackoverflow.com/users/7372769/don"}, "is_accepted": false, "score": 1, "last_activity_date": 1485342305, "creation_date": 1485342305, "answer_id": 41849945, "question_id": 41848591, "link": "https://stackoverflow.com/questions/41848591/how-to-test-rails-app-with-devise-login/41849945#41849945", "title": "How to test Rails app with devise login", "body": "<p>I have done devise login and this code works for me, could be a little help to you</p>\n\n<p>In <strong><em>rails_helper.rb</em></strong></p>\n\n<pre><code>require 'devise'\n</code></pre>\n\n<p>Then create a module with a login method <strong><em>auth_helper.rb</em></strong></p>\n\n<pre><code>require 'spec_helper'\n\nmodule AuthHelper\n def login_user\n  @request.env[\"devise.mapping\"] = Devise.mappings[:user]\n  user = FactoryGirl.create(:user)\n  # user.confirm # or set a confirmed_at inside the factory. Only      necessary if you are using the \"confirmable\" module\n  sign_in user\n end\nend\n</code></pre>\n\n<p>Use it in controller </p>\n\n<pre><code>require 'rails_helper'\ninclude AuthHelper\n\nRSpec.describe DashboardController, type: :controller do\n\n before(:each) do\n  login_user\n end\n\n context \"GET #index\" do\n  it \"renders the :index view\" do \n   get :index\n   expect(response).to render_template(\"index\")\n  end\n end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 689, "user_id": 1114682, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/0838edbf12007943488e3f8059f0ddb9?s=128&d=identicon&r=PG", "display_name": "Noriaki Takamizawa", "link": "https://stackoverflow.com/users/1114682/noriaki-takamizawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3115, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1602240018, "creation_date": 1485338607, "question_id": 41848591, "link": "https://stackoverflow.com/questions/41848591/how-to-test-rails-app-with-devise-login", "title": "How to test Rails app with devise login", "body": "<p>I can't figure out how to test Rails app with devise login.</p>\n\n<p>Message is like this.What should I do? Maybe I need to create spec/model/user.rb ?</p>\n\n<pre><code>$ bundle exec rspec spec/controllers/root_controller_spec.rb \nF\n\nFailures:\n\n  1) RootController GET #index returns http success\n     Got 0 failures and 2 other errors:\n\n     1.1) Failure/Error: @user = create(:user)\n\n          NoMethodError:\n            undefined method `create' for #&lt;RSpec::ExampleGroups::RootController::GETIndex:0x007fe643b89878&gt;\n          # ./spec/controllers/root_controller_spec.rb:6:in `block (2 levels) in &lt;top (required)&gt;'\n\n     1.2) Failure/Error: sign_out @user\n\n          NoMethodError:\n            undefined method `sign_out' for #&lt;RSpec::ExampleGroups::RootController::GETIndex:0x007fe643b89878&gt;\n          # ./spec/controllers/root_controller_spec.rb:19:in `block (2 levels) in &lt;top (required)&gt;'\n\nFinished in 0.00597 seconds (files took 3.12 seconds to load)\n1 example, 1 failure\n\nFailed examples:\n\nrspec ./spec/controllers/root_controller_spec.rb:12 # RootController GET #index returns http success\n</code></pre>\n\n<p>spec/factories/users.rb</p>\n\n<pre><code>FactoryGirl.define do\n  factory :user do\n        username \"Johney\"\n        sequence(:email) { |n| \"johney#{n}@test.com\"}\n        password \"password\"\n    password_confirmation \"password\"\n  end\nend\n</code></pre>\n\n<p>spec/controller/root_controller_spec.rb</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe RootController, type: :controller do\n\n  before do\n    @user = create(:user)\n\n    sign_in @user\n  end\n\n  describe \"GET #index\" do\n    it \"returns http success\" do\n      get :index\n      expect(response).to have_http_status(:success)\n    end\n  end\n\n  after do\n    sign_out @user\n  end\n</code></pre>\n\n<p>end</p>\n\n<p>spec_helper.rb</p>\n\n<pre><code>RSpec.configure do |config|\n  # Customize in Eiicon-Dola\n  config.include FactoryGirl::Syntax::Methods\n  config.include Devise::TestHelpers, type: :controller\nend\n</code></pre>\n\n<p>Any advise is welcomed. Thanks in advance.</p>\n"}, {"tags": ["ruby", "automated-tests", "ui-automation", "calabash", "strong-typing"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 4, "creation_date": 1485337460, "post_id": 41847981, "comment_id": 70880477, "body": "All this article is saying is that it&#39;s dangerous to hire unexperienced coders for important projects. Tests could compile and run just fine with C# or Java but still not test anything at all."}, {"owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485340976, "post_id": 41847981, "comment_id": 70882963, "body": "I think it might be saying that its easier to end up with spaghetti code using ruby compared with strongly typed languages if you have less strict developers. My main fear (having read up some more this morning) is actually the lack of the comprehensive intellisense benefits you get from strongly typed languages (using IDEs like xcode/ellipse/android studio). With page object pattern I love being able to have an instance of a page object and then type the &#39;dot&#39; and see all the actions that can be performed.  Can Ruby IDE&#39;s offer this (Rubymine might be able to but only to a limited degree)?"}, {"owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485341825, "post_id": 41847981, "comment_id": 70883497, "body": "* statically typed (not strongly typed)"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 3, "creation_date": 1485348817, "post_id": 41847981, "comment_id": 70887851, "body": "The article is just FUD.  I&#39;ve programmed in both the statically typed world and the dynamic, and they both work fine <i>if the programmer is any good</i>.  And no language can save a bad programmer."}, {"owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "edited": false, "score": 0, "creation_date": 1485351328, "post_id": 41847981, "comment_id": 70889577, "body": "My &quot;fear&quot; is quite a lot of people seem to share this fear of dynamically typed languages, for example: <a href=\"http://stackoverflow.com/questions/42934/what-do-people-find-so-appealing-about-dynamic-languages\" title=\"what do people find so appealing about dynamic languages\">stackoverflow.com/questions/42934/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "edited": false, "score": 0, "creation_date": 1485341348, "post_id": 41849399, "comment_id": 70883197, "body": "I think the article is more around UI Automation Testing rather than Unit Testing.  Do you know how well ruby works for UI Automation Testing?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485341713, "post_id": 41849399, "comment_id": 70883418, "body": "Note : Ruby <b>is</b> strong typed."}, {"owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "edited": false, "score": 0, "creation_date": 1485341869, "post_id": 41849399, "comment_id": 70883538, "body": "My bad.. I meant statically typed. (Sorry been doing too much research this morning into ruby vs other languages. Brain is getting sore)."}, {"owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "reply_to_user": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "edited": false, "score": 0, "creation_date": 1485342156, "post_id": 41849399, "comment_id": 70883742, "body": "@CharlieSeligman yes, it is often used for that, watir and selenium come into my mind  at EricDuminil, yeah you&#39;r right, I mean static &lt;&gt; dynamic, adjusted that in the answer, thanks"}, {"owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "edited": false, "score": 0, "creation_date": 1485346955, "post_id": 41849399, "comment_id": 70886760, "body": "After a fair amount of investigation I think I will leave Ruby (and other dynamically typed languages)... think Im just a static through and through (some refs:  <a href=\"https://blog.jooq.org/2014/12/11/the-inconvenient-truth-about-dynamic-vs-static-typing/\" rel=\"nofollow noreferrer\">blog.jooq.org/2014/12/11/&hellip;</a>    <a href=\"http://stackoverflow.com/questions/125367/dynamic-type-languages-versus-static-type-languages\" title=\"dynamic type languages versus static type languages\">stackoverflow.com/questions/125367/&hellip;</a> <a href=\"http://stackoverflow.com/questions/42934/what-do-people-find-so-appealing-about-dynamic-languages\" title=\"what do people find so appealing about dynamic languages\">stackoverflow.com/questions/42934/&hellip;</a> <a href=\"http://softwareengineering.stackexchange.com/questions/16/do-dynamic-typed-languages-deserve-all-the-criticism\" title=\"do dynamic typed languages deserve all the criticism\">softwareengineering.stackexchange.com/questions/16/&hellip;</a>"}], "tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1485342294, "last_edit_date": 1485342294, "creation_date": 1485340794, "answer_id": 41849399, "question_id": 41847981, "link": "https://stackoverflow.com/questions/41847981/is-ruby-unsafe-to-use-on-test-automation-projects/41849399#41849399", "title": "Is Ruby unsafe to use on Test Automation Projects?", "body": "<p>That is only the opinion of that author.\nHe states that </p>\n\n<ul>\n<li>Ruby has potential to be abused</li>\n<li>Testers don't have programming any formal programming training</li>\n<li>Ruby is an interpreted language and thus slow</li>\n<li>Ruby has potential for misuse and spaghetti code</li>\n<li>Weak typing is bad </li>\n</ul>\n\n<p>Potential: yes and Abuse should always be a concern, with any language</p>\n\n<p>Spagetti code can be written in any language, but few languages alow such terse, elegant and daindy code as Ruby while being the most readable language I know.</p>\n\n<p>I recently read <a href=\"https://blog.codeship.com/unit-testing-in-ruby/\" rel=\"nofollow noreferrer\">this</a> blog post about Ruby Unit testing and it states that \"Testing Is Important\u2026 and Opinionated\" which says it all.</p>\n\n<p><a href=\"http://shiroyasha.io/interfaces-in-ruby.html\" rel=\"nofollow noreferrer\">This</a> blog is also very interesting, it states that unit testing in Ruby is better than interfaces like in Java.</p>\n\n<p>In my opinion Ruby is one of the languages where unit testing is encouraged and used the most.\nStatically typing is to pleasure the compiler, dynamic typing is to pleasure the developer is a saying I picked up from somewhere, books are written about this subject and everyone has his own opinion so no more about this one.</p>\n\n<p>Ruby is't slow, for a start, the time to code is drasticly lower than compiled languages which IMHO is most of the time more important than execution time of scripst that are executed in a matter of seconds and webpages that are returned in microseconds.\nInterpreted languages execution speed are slower than compiled languages: True, but once there is need for more speed you can call in compiled stuff through gems or micro services.\nIf you reach your one million user cap you have more resources to play with, many big webservices started out using Ruby and Rails and moved on to other languages for parts of their service as the need rised.</p>\n\n<p>In my organisation we both use Ruby and Java, Ruby being ideal for automation scripts, system management, makeshift solutions, scripts that need to be changed and configured a lot, small web app's and interaction with the web in general.\nDev's do their own testing. Agile and Scrum methods are used.</p>\n\n<p>Java is used for longtime development, bigger groups and these devs often use little testing and oldschool waterfall methods.</p>\n\n<p>Devs are often good in the first and bad in the second or vice versa.</p>\n\n<p>So it all depends and is very opiniated, I would say go ahead and try and make your own opinion.</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485359292, "post_id": 41852529, "comment_id": 70895340, "body": "You <b>cannot</b> compare Ruby and Javascript. They both are dynamic, but Javascript is weakly typed and Ruby strongly typed. Ruby will raise an exception if you try to calculate <code>1 + &#39;1&#39;</code>, Javascript will happily return <code>&quot;11&quot;</code>. For <code>1 - &#39;1&#39;</code>, JS returns <code>0</code>. This makes it real hard to find bugs IMHO."}, {"owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485362424, "post_id": 41852529, "comment_id": 70897575, "body": "Agreed that JavaScript is more dangerous, but dynamic languages still miss many things at compile time &amp; don&#39;t seem to lend themselves as well to page object design pattern."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485362969, "post_id": 41852529, "comment_id": 70897976, "body": "It looks like you already made up your mind : Ruby isn&#39;t for you and your needs, it&#39;s perfectly fine this way! It doesn&#39;t mean it&#39;s not possible to write clean, efficient, complete and readable tests with Ruby, though."}, {"owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1485365637, "post_id": 41852529, "comment_id": 70899767, "body": "Absolutely agree Eric - clean, efficient, complete and readable tests are possible in Ruby.  I think its just a static vs dynamic preference and after looking into it a lot today, think i am just more of a static kinda guy :-)"}], "tags": [], "owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "is_accepted": false, "score": 0, "last_activity_date": 1485349923, "creation_date": 1485349923, "answer_id": 41852529, "question_id": 41847981, "link": "https://stackoverflow.com/questions/41847981/is-ruby-unsafe-to-use-on-test-automation-projects/41852529#41852529", "title": "Is Ruby unsafe to use on Test Automation Projects?", "body": "<p>I've realised my confusion on whether ruby is appropriate for large automation projects is actually part of the far wider Dynamic vs Statically typed debate.  And really Ruby could have been replaced with JavaScript, etc. </p>\n\n<p>For the reasons mentioned in the video below from the experts at Head First, I am deciding to stick with statically typed languages for UI automation testing, since dynamically typed languages (like JavaScript and Ruby) have the benefit of flexibility, but also the risk of flexibility: </p>\n\n<p><a href=\"https://www.youtube.com/watch?v=lPuQkC6HRPk\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=lPuQkC6HRPk</a></p>\n\n<p>Calabash-Ruby combination has become popular in the test automation world (possibly due to the ease of learning ruby if you are new to coding). I realise this answer may well be marked down due to its view that Calabash-Ruby duo is not a preferred choice for large scale automation testing projects.  This is simply my view and others may disagree. If you do downvote, please do leave comments on why so we can hopefully educate the debate further.  I'm definitely open to accepting calabash-ruby if it is a sensible choice (and not just the easiest choice).</p>\n"}], "owner": {"reputation": 3474, "user_id": 646818, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/3b985788774ae5fdfb497db9d65ab8bc?s=128&d=identicon&r=PG", "display_name": "Charlie Seligman", "link": "https://stackoverflow.com/users/646818/charlie-seligman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 361, "favorite_count": 2, "closed_date": 1485363347, "answer_count": 2, "score": 2, "last_activity_date": 1485349923, "creation_date": 1485336817, "last_edit_date": 1485338383, "question_id": 41847981, "link": "https://stackoverflow.com/questions/41847981/is-ruby-unsafe-to-use-on-test-automation-projects", "closed_reason": "Opinion-based", "title": "Is Ruby unsafe to use on Test Automation Projects?", "body": "<p>I have done a great deal of Mobile Automation on Appium, Frank, EggPlant, Xamarin,  Xcode UITesting and Xcode UIAutomation.  Recently a third party started supplying Ruby with Calabash scripts.  I started to look at this option and found the following article:\n<a href=\"http://qualitytesting.tumblr.com/post/156318324159/ruby-projects\" rel=\"nofollow noreferrer\">http://qualitytesting.tumblr.com/post/156318324159/ruby-projects</a></p>\n\n<p>I was particularly drawn to the following comments in the article:</p>\n\n<blockquote>\n  <p>The biggest problem with Ruby is its potential to be abused. I think that this is a particularly prevelant problem when using it as a test framework language because lots of testers do not have any formal programming training behind them and are often not knowledgeable about object-oriented principles or maintainable architectural patterns. Testers are often hired on their edge case ability rather than their programming ability, and are often hired by hiring managers without sufficient programming knowledge to assess their programming ability, hence why it is so dangerous to use Ruby.</p>\n</blockquote>\n\n<p>And this section:</p>\n\n<blockquote>\n  <p>The trouble with Ruby\u2019s lack of rules is compounded by it being an interpreted language. You don\u2019t really know whether it works until you run it, which is laborious - the feedback loop is very slow in comparison to compiled languages. Even if it runs, it\u2019s not necessarily doing anything. IDEs can help you and give you syntax errors up front, but with such loose constraints on the use of the language, there is no end to the potential for misuse and spaghetti code.</p>\n</blockquote>\n\n<p>And finally:</p>\n\n<blockquote>\n  <p>There is no protocol/contract/promise in Ruby. There is no guarantee that the var that you think is a string isn\u2019t actually an array, or any other type of object. It is dangerous to put a tester on a framework that doesn\u2019t have your back, considering that culturally, testers are generally held to lower standards for programming than developers, and their code is often taken less seriously and held to a lower bar than production code. Culture may be to blame for this, but it is a problem nonetheless. Add this to any concerns your business has about the value of UI tests; using Ruby or Python is a good way to further destabilise and devalue your UI tests</p>\n</blockquote>\n\n<p>The article then suggests sticking to ruby for scripts rather than larger projects.  Since Test Automation often becomes project like in its size, this might be a concern. </p>\n\n<p>So my question would be, is Ruby a dangerous language to use for Test Automation and am I safer sticking with more statically typed languages?  Or is Ruby fine to use and this article has missed the point?</p>\n"}, {"tags": ["java", "ruby", "jruby", "jruby-java-interop"], "answers": [{"tags": [], "owner": {"reputation": 1523, "user_id": 6896906, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JiWcO.jpg?s=128&g=1", "display_name": "Zach Tuttle", "link": "https://stackoverflow.com/users/6896906/zach-tuttle"}, "is_accepted": false, "score": 2, "last_activity_date": 1485814332, "creation_date": 1485814332, "answer_id": 41946319, "question_id": 41847921, "link": "https://stackoverflow.com/questions/41847921/can-you-use-gems-when-you-execute-a-ruby-script-in-embedded-jruby/41946319#41946319", "title": "Can you use gems, when you execute a Ruby script in embedded JRuby?", "body": "<p>I am assuming you are using JRuby. Check <a href=\"https://github.com/jruby/jruby/wiki/CallingJavaFromJRuby\" rel=\"nofollow noreferrer\">this</a> and <a href=\"http://kares.org/jruby-ji-doc/\" rel=\"nofollow noreferrer\">this</a> out. With this maybe you can do the opposite and use Junit from within Jruby itself.</p>\n"}], "owner": {"reputation": 13167, "user_id": 399457, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/6a6ed435a024926ffb41d1ad84b3b1f5?s=128&d=identicon&r=PG", "display_name": "Mentiflectax", "link": "https://stackoverflow.com/users/399457/mentiflectax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 323, "favorite_count": 0, "answer_count": 1, "score": 7, "last_activity_date": 1485814332, "creation_date": 1485336654, "last_edit_date": 1485339404, "question_id": 41847921, "link": "https://stackoverflow.com/questions/41847921/can-you-use-gems-when-you-execute-a-ruby-script-in-embedded-jruby", "title": "Can you use gems, when you execute a Ruby script in embedded JRuby?", "body": "<p>It so happened that I need to unit-test this <a href=\"https://github.com/dpisarenko/50web/blob/mvp/routes/songcontest.rb\">Ruby script</a>. It's a <a href=\"http://www.sinatrarb.com/\">Sinatra</a>-based web application that uses several gems.</p>\n\n<p>I have more experience in Java than in Ruby, time is very important (and elegance isn't), and so I thought I may be faster, if I execute that script in a JUnit class and mock all subsystems it depends on (web server, database). That way I could use my Java skills to test a Ruby system. It <a href=\"https://kenai.com/projects/jruby/pages/RedBridge\">looks</a> like you can embed Ruby in a Java program.</p>\n\n<p>Question: Can I use gems in embedded Ruby, i. e. create a Java program that could execute the tests on <strong>any</strong> machine (Windows, Linux, Mac) and wouldn't require that I install several gems on it manually? If yes, how?</p>\n\n<p>Note: They need to be real gems, mocks are fine.</p>\n\n<p><strong>Update 1 (25.01.2017 13:14):</strong> One obvious solution is to extract the logic of that script into a separate Ruby file <strong>without</strong> dependencies. That probably would be 80 % of the code. Then I could test that logic file even without having the gems.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "has-many-through"], "comments": [{"owner": {"reputation": 171, "user_id": 3337239, "user_type": "registered", "profile_image": "https://graph.facebook.com/1816610106/picture?type=large", "display_name": "Muhammad Ans", "link": "https://stackoverflow.com/users/3337239/muhammad-ans"}, "edited": false, "score": 0, "creation_date": 1485336380, "post_id": 41847731, "comment_id": 70879763, "body": "What&#39;s the Business Model of your example? because your models looks so confusing!"}, {"owner": {"reputation": 191, "user_id": 3939045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24036ea8209b62f8955af4db84d4cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "Iaan Krynauw", "link": "https://stackoverflow.com/users/3939045/iaan-krynauw"}, "reply_to_user": {"reputation": 171, "user_id": 3337239, "user_type": "registered", "profile_image": "https://graph.facebook.com/1816610106/picture?type=large", "display_name": "Muhammad Ans", "link": "https://stackoverflow.com/users/3337239/muhammad-ans"}, "edited": false, "score": 0, "creation_date": 1485336829, "post_id": 41847731, "comment_id": 70880060, "body": "I added the Company Team relationship. I want to be able to have a User belong to a Team and a Company so that I can delete a Users Team but still have it linked to Company."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 3939045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24036ea8209b62f8955af4db84d4cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "Iaan Krynauw", "link": "https://stackoverflow.com/users/3939045/iaan-krynauw"}, "edited": false, "score": 0, "creation_date": 1485337046, "post_id": 41847993, "comment_id": 70880187, "body": "I might have made my question a bit to simple. I&#39;m going to update it again. It has 4 joins&#39;s and I want to add a supervisor:boolean field to the joins. Going to update the question again"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 191, "user_id": 3939045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24036ea8209b62f8955af4db84d4cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "Iaan Krynauw", "link": "https://stackoverflow.com/users/3939045/iaan-krynauw"}, "edited": false, "score": 0, "creation_date": 1485337261, "post_id": 41847993, "comment_id": 70880343, "body": "You should probably just explain what the business model is that you are trying to achieve - not how."}, {"owner": {"reputation": 191, "user_id": 3939045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24036ea8209b62f8955af4db84d4cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "Iaan Krynauw", "link": "https://stackoverflow.com/users/3939045/iaan-krynauw"}, "edited": false, "score": 0, "creation_date": 1485337307, "post_id": 41847993, "comment_id": 70880371, "body": "It might still be better to split it up into separate join tables. What do you think after the update?"}, {"owner": {"reputation": 191, "user_id": 3939045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24036ea8209b62f8955af4db84d4cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "Iaan Krynauw", "link": "https://stackoverflow.com/users/3939045/iaan-krynauw"}, "edited": false, "score": 0, "creation_date": 1485337650, "post_id": 41847993, "comment_id": 70880622, "body": "I think I&#39;m going to go and rethink this. The single responsibility rule is being violated. Thanks."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 191, "user_id": 3939045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24036ea8209b62f8955af4db84d4cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "Iaan Krynauw", "link": "https://stackoverflow.com/users/3939045/iaan-krynauw"}, "edited": false, "score": 0, "creation_date": 1485338077, "post_id": 41847993, "comment_id": 70880900, "body": "I added a bit about how to add metadata and roles to this data model."}, {"owner": {"reputation": 191, "user_id": 3939045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24036ea8209b62f8955af4db84d4cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "Iaan Krynauw", "link": "https://stackoverflow.com/users/3939045/iaan-krynauw"}, "edited": false, "score": 0, "creation_date": 1485338298, "post_id": 41847993, "comment_id": 70881066, "body": "Thanks I&#39;ll go check it out. The enum is quite interesting. I&#39;ve never heard of that before."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1588173607, "last_edit_date": 1588173607, "creation_date": 1485336857, "answer_id": 41847993, "question_id": 41847731, "link": "https://stackoverflow.com/questions/41847731/has-many-through-multiple-joins-table/41847993#41847993", "title": "has_many :through multiple joins table", "body": "<p>I would set it up with indirect relationships instead:</p>\n\n<pre><code>class User\n  has_many :employments\n  has_many :companies, through: :employments\n  has_many :positions\n  has_many :teams, through: :positions\nend\n\nclass Company\n  has_many :employments\n  has_many :users, through: :employments\n  has_many :teams, through: :users\nend\n\nclass Team\n  has_many :positions\n  has_many :users, through: :positions\n  has_many :companies, through: :users\nend\n\n# join model between User and Company\nclass Employment\n  belongs_to :user\n  belongs_to :company\nend\n\n# join model between User and Team\nclass Position\n  belongs_to :user\n  belongs_to :team\nend\n</code></pre>\n\n<p>While you could potentially use a single 3 way join model this violates the Single Responsibility Principle and does not map the domain very well.</p>\n\n<p>3 way joins introduce quite a bit of complexity as you cannot simply unlink two records by deleting a row in the join table. And ActiveRecord does not automatically keep track of the foreign key columns.</p>\n\n<p>If you want to add roles to this data model there are a few ways to do it:</p>\n\n<h2>1 add an <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">enum</a> to the join table:</h2>\n\n<pre><code># join model between User and Team\nclass Position\n  enum role: [:grunt, :supervisor]\n  belongs_to :user\n  belongs_to :team\nend\n</code></pre>\n\n<h2>2 create a reusable role system.</h2>\n\n<pre><code>class User\n  has_many :user_roles\n  has_many :roles, through: :user_roles\n\n  def has_role?(name, resource = nil)\n    roles.exists?(name: name, resource: resource)\n  end\nend\n\nclass Role\n  belongs_to :resource, polymorpic: true, optional: true\n  has_many :user_roles\nend\n\nclass UserRole\n  belongs_to :user\n  belongs_to :role\nend\n</code></pre>\n\n<p>This is a really flexible system lets you attach roles to anything - companies, teams etc. And lets you build systems where the roles can even by defined by end users. Check out the <a href=\"https://github.com/RolifyCommunity/rolify\" rel=\"nofollow noreferrer\">rolify gem</a> for a full example.</p>\n"}], "owner": {"reputation": 191, "user_id": 3939045, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/24036ea8209b62f8955af4db84d4cdb5?s=128&d=identicon&r=PG&f=1", "display_name": "Iaan Krynauw", "link": "https://stackoverflow.com/users/3939045/iaan-krynauw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 943, "favorite_count": 0, "accepted_answer_id": 41847993, "answer_count": 1, "score": 1, "last_activity_date": 1588173607, "creation_date": 1485336157, "last_edit_date": 1485337733, "question_id": 41847731, "link": "https://stackoverflow.com/questions/41847731/has-many-through-multiple-joins-table", "title": "has_many :through multiple joins table", "body": "<p>I'm trying to create a 4 way joins table.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :user_configurations\n  has_many :teams, through: :user_configurations\n  has_many :companies, through: :user_configurations\n\n  scope :supervisors, -&gt; { joins(:user_configurations).where(user_configurations: { supervisor: true }) }\n  scope :agents, -&gt; { joins(:user_configurations).where(user_configurations: { supervisor: false }) }\nend\n\nclass Team &lt; ApplicationRecord\n  has_many :user_configurations\n  has_many :users, through: :user_configurations\n  belongs_to :company_unit\nend\n\nclass CompanyUnit &lt; ApplicationRecord\n  has_many :user_configurations\n  has_many :users, through: :user_configurations\n  has_many :teams\n  belongs_to :company\nend\n\nclass Company &lt; ApplicationRecord\n  has_many :user_configurations\n  has_many :users, through: :user_configurations\n  has_many :company_units\n  has_many :teams, through: :company_units\nend\n\nclass UserConfiguration &lt; ApplicationRecord\n  belongs_to :user, optional: true\n  belongs_to :team, optional: true\n  belongs_to :company, optional: true\n  #supervisor:boolean in this table\nend\n</code></pre>\n\n<p>When I create I get 2 separate entries into the UserConfiguration Table.</p>\n\n<p><code>Company.first.users.create(team_ids: [1])</code></p>\n\n<p><code>id: 1, user_id: 1, team_id: nil, company_id: 1</code></p>\n\n<p><code>id: 2, user_id: 1, team_id: 1, company_id: nil</code></p>\n\n<p>I don't know if it's good practice to attempt something like this any suggestions will be really helpful thanks. Every search results in trying to do a sql join to query data.</p>\n\n<p>EDIT: Decided not to do this and will try and figure out a different approach.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "comments": [{"owner": {"reputation": 216, "user_id": 278474, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d476b7cb42a62a448fe84f4a7513abeb?s=128&d=identicon&r=PG", "display_name": "Fred", "link": "https://stackoverflow.com/users/278474/fred"}, "edited": false, "score": 0, "creation_date": 1485339814, "post_id": 41847599, "comment_id": 70882102, "body": "Why dont you just add belongs_to :schedule on day instead of creating a polymorphic value?"}], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 0, "last_activity_date": 1485338067, "last_edit_date": 1485338067, "creation_date": 1485337762, "answer_id": 41848289, "question_id": 41847599, "link": "https://stackoverflow.com/questions/41847599/ruby-how-to-assign-a-model-association-to-multiple-model-objects/41848289#41848289", "title": "Ruby how to assign a model association to multiple model objects", "body": "<p>If I understand you correctly, you just need <code>Schedule has_many :days</code> :</p>\n\n<pre><code>class Schedule &lt; ApplicationRecord\n  has_many :days\nend\n\nclass Day &lt; ApplicationRecord\n  belongs_to :schedule\nend\n</code></pre>\n\n<p>This way, <code>Schedule</code> won't save anything about <code>days</code> : the information about the relationship will be saved in the <code>schedule_id</code> column of the <code>days</code> table.</p>\n\n<p>Here's the corresponding <a href=\"http://guides.rubyonrails.org/association_basics.html#the-belongs-to-association\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}], "owner": {"reputation": 13, "user_id": 7467869, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Eo3cJ.png?s=128&g=1", "display_name": "JCode", "link": "https://stackoverflow.com/users/7467869/jcode"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 41848289, "answer_count": 1, "score": 1, "last_activity_date": 1485338067, "creation_date": 1485335801, "question_id": 41847599, "link": "https://stackoverflow.com/questions/41847599/ruby-how-to-assign-a-model-association-to-multiple-model-objects", "title": "Ruby how to assign a model association to multiple model objects", "body": "<p>I have looked around at questions and have only found what to do if I want to assign an object to multiple models (polymorphic). Basically, I have two models (Day and Schedule) that I want to connect with an association. The problem is that I want to have several Days be able to have a single Schedule:\n(day1.schedule == schedule1, day2.schedule == schedule1)</p>\n\n<p>I was using a polymorphic association (I thought it was what I was trying to do), and it was working, but I discovered that it was assigning Day information to imageable for Schedule every time I assigned the Schedule to a Day:\n(schedule1.imageable == day2, schedule1.imageable_id == day2.id, schedule.imageable_type == Day)</p>\n\n<p>It's unnecessary information (that will be incorrect if the Day no longer exists) that I don't want Schedule to save, but if I remove as: :imageable, it breaks and I can't .</p>\n\n<p>I basically need a one-way association, and I haven't been able to figure out how to set one up. I want Days to save Schedules, but Schedules to not save <em>anything</em> about Days. Is there an association or am I going to be forced to use the Schedule id instead?</p>\n\n<pre><code>class Day &lt; ApplicationRecord**\n\n    has_one :schedule, as: :imageable\n\n    validates :day, presence: true\n\n    def after_initialize( args = {} )\n        @day = args[:day]\n        @schedule = args[:schedule]\n    end\nend\n</code></pre>\n\n<p>There's nothing in my Schedule class that has anything to do with Day. It's automatically creating an imageable_id and imageable_type method (although I <em>did</em> have to create columns for it in my db)</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 294955, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "edited": false, "score": 0, "creation_date": 1485334123, "post_id": 41846903, "comment_id": 70878296, "body": "Not directly pertinent to your question but relevant: Your idea of using word boundary anchors is commendable but only works with actual words.  Regexes like <code>\\b+\\b</code> will only match if the plus is surrounded by word characters."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1485349071, "post_id": 41846903, "comment_id": 70888027, "body": "&gt;&gt; With this example, I want to remove &quot;beauty&quot;, but not &quot;beautifully&quot;. &lt;&lt; I don&#39;t see those words in your array, or anywhere else in the question.  I&#39;m not sure what you&#39;re asking."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1485377999, "post_id": 41846903, "comment_id": 70906801, "body": "@Wayne, bad example, methinks. I expect the meaning is remove <code>&quot;beau&quot;</code> but not <code>&quot;beauty&quot;</code>."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485378867, "post_id": 41846903, "comment_id": 70907233, "body": "@CarySwoveland I think it is indeed a bad example.  It makes the question unclear to me.  I hope the OP can improve it."}, {"owner": {"reputation": 21514, "user_id": 211627, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/RZLo7.png?s=128&g=1", "display_name": "JDB still remembers Monica", "link": "https://stackoverflow.com/users/211627/jdb-still-remembers-monica"}, "edited": false, "score": 0, "creation_date": 1485460158, "post_id": 41846903, "comment_id": 70945677, "body": "Note that removing characters isn&#39;t the same as removing &quot;words&quot;, in the sense that people can still include text that doesn&#39;t obey your rules but can be comprehensible to a human reader. For expmale, I can wirte smoe vrey misepeled wrods and I bet you can skill reed thum."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485333883, "post_id": 41846935, "comment_id": 70878135, "body": "You may need to frame this with <code>\\b</code> if you want to only match words on boundaries, not take out things like partial words."}, {"owner": {"reputation": 294955, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485334012, "post_id": 41846935, "comment_id": 70878220, "body": "@tadman: Not as simple as that since some of the search terms aren&#39;t words."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 294955, "user_id": 20670, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/251f2449ffba9fbcc3491db6564ff4a2?s=128&d=identicon&r=PG", "display_name": "Tim Pietzcker", "link": "https://stackoverflow.com/users/20670/tim-pietzcker"}, "edited": false, "score": 0, "creation_date": 1485334053, "post_id": 41846935, "comment_id": 70878248, "body": "@TimPietzcker Yeah, this one&#39;s got some very <i>peculiar</i> words."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 1, "creation_date": 1485334774, "post_id": 41846935, "comment_id": 70878686, "body": "Good catch, added variant with word boundaries and ignore case. Assuming they included non-words like <code>+</code> as an illustration of the need for escaping only."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485335255, "post_id": 41846935, "comment_id": 70878977, "body": "Just to make it clearer, you could mention that Regexp.union escapes elements in <code>words</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485378484, "post_id": 41846935, "comment_id": 70907038, "body": "I doubt that the OP wants <code>&quot;(egad!)&quot; =~ regexp #=&gt; nil</code>. I expect inclusion of word boundaries depends on the context."}], "tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 2, "last_activity_date": 1485336429, "last_edit_date": 1485336429, "creation_date": 1485333798, "answer_id": 41846935, "question_id": 41846903, "link": "https://stackoverflow.com/questions/41846903/remove-word-with-regex/41846935#41846935", "title": "Remove word with regex", "body": "<p>Try this</p>\n\n<pre><code>regexp = Regexp.union(words)\n</code></pre>\n\n<p>Or this with word boundaries</p>\n\n<pre><code>regexp = /\\b(#{Regexp.union(words).source})\\b/i\n</code></pre>\n\n<p><code>Regexp#union</code> escapes special characters in strings and will thus avoid the errors that you're getting. </p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485460377, "post_id": 41847596, "comment_id": 70945801, "body": "If you add <code>&quot;_&quot;</code> to <code>arry_words</code> and <code>text = &quot;thanks john, Have you ever killed some_one?&quot;</code> then your code returns <code>&quot;john, have you ever  some_one&quot;</code>. That is of course because <code>&quot;_&quot;.match? &#47;\\w&#47; #=&gt; true</code>.  If you replace <code>\\w</code> everywhere with <code>[[:alnum]]</code> you get the desired behaviour. That&#39;s one of the reasons I rarely use <code>\\w</code>."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485462351, "post_id": 41847596, "comment_id": 70946819, "body": "@CarySwoveland: Different applications require different definitions of a &quot;word&quot; and thus a &quot;word boundary&quot;. I rarely need <code>\\b</code>, I use lookarounds more often than <code>\\b</code>. Say, to match a string of digits I&#39;d use <code>(?&lt;!\\d)\\d+(?!\\d)</code>, to match a whole &quot;linguistic&quot; word, I&#39;d use <code>(?&lt;!\\p{L})\\p{L}+(?!\\p{L})</code>. BTW, that is why I put it as <i>If you still need to use \\b as word boundary</i>. And since <code>\\b</code> is &quot;tied&quot; to <code>\\w</code> and <code>\\W</code> meanings, the code looks as it does."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1485467057, "post_id": 41847596, "comment_id": 70949446, "body": "Interesting points. It didn&#39;t occur to me you can&#39;t mix and match <code>\\b</code> with the <code>\\p{..}</code> construct or POSIX expressions, but that should have been obvious. If the underscore is important in the expression (and the expression is in English), <code>\\b</code> and <code>\\w</code> are useful; otherwise, the inclusion of an underscore as a word character seems only to complicate things and have the potential for creating bugs."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 3, "last_activity_date": 1485335798, "creation_date": 1485335798, "answer_id": 41847596, "question_id": 41846903, "link": "https://stackoverflow.com/questions/41846903/remove-word-with-regex/41847596#41847596", "title": "Remove word with regex", "body": "<p>The search words you have contain special regex metacharacters that should be escaped before using them in the regex pattern. This can be achieve easily with <a href=\"https://ruby-doc.org/core-2.3.1/Regexp.html#method-c-union\" rel=\"nofollow noreferrer\"><code>Regexp.union</code></a> that actually both <em>joins</em> with <code>|</code> and <em>escapes</em> the special characters.</p>\n\n<blockquote>\n  <p>Return a Regexp object that is the union of the given <em>patterns</em>, i.e., will match any of its parts. The <em>patterns</em> can be Regexp objects, in which case their options will be preserved, or Strings.</p>\n</blockquote>\n\n<p>Another problem is that <code>\\b</code> word boundary is context-dependent, if placed before a non-word char, it requires a word char before that character, and if placed after a non-word char, it requires a word char after that non-word char.</p>\n\n<p>Use</p>\n\n<pre><code>text.downcase.gsub(/(?&lt;!\\w)(?:#{Regexp.union(arry_words)})(?!\\w)/, '').strip\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/68QBkF\" rel=\"nofollow noreferrer\">this Ruby demo</a>.</p>\n\n<p>The <code>(?&lt;!\\w)</code> will make sure the search word is not preceded with a word char, and <code>(?!\\w)</code> will make sure the search word is not followed with a word char.</p>\n\n<p><strong><em>Note</strong> that in this case, all the punctuation symbols won't match in case they are glued to word chars.</em></p>\n\n<p>If you still need to use <code>\\b</code> as word boundary, you need to analyze the search word array first, and add <code>\\b</code> wherever search word starts/ends with a word char. Something like</p>\n\n<pre><code>arry_words = arry_words.map { |x| \n    if x =~ /\\A\\w.*\\w\\z/ \n        x = \"\\\\b#{Regexp.escape(x)}\\\\b\"\n    elsif x =~ /\\A\\w/ \n        x = \"\\\\b\" + Regexp.escape(x)\n    elsif x =~ /\\w\\z/ \n        x = Regexp.escape(x) + \"\\\\b\"\n    else\n        x = Regexp.escape(x)\n    end\n}\nrx = Regexp.new(arry_words.join('|'))\ntext.downcase.gsub(rx, '').strip\n</code></pre>\n\n<p>See <a href=\"https://ideone.com/1k63E4\" rel=\"nofollow noreferrer\">this Ruby demo</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1485459509, "last_edit_date": 1485459509, "creation_date": 1485380302, "answer_id": 41862111, "question_id": 41846903, "link": "https://stackoverflow.com/questions/41846903/remove-word-with-regex/41862111#41862111", "title": "Remove word with regex", "body": "<p>I would do this in two steps. Doing so removes the need to escape certain characters and to have the inclusion of word boundaries depend on where they are placed.</p>\n\n<pre><code>arry_words = [\"kissed\", \"kill\", \"+\", \"?\", \"]\", \"[\", \"(\", \")\", \"*\"]\n\nword_words = arry_words.select { |w| w =~ /\\A[[:alpha:]]+\\z/ }\n  #=&gt; [\"kissed\", \"kill\"]\n\nr = /\\b#{Regexp.union(word_words)}\\b/i\n  #=&gt; /\\b(?-mix:kissed|kill)\\b/i\n\ntext = \"Thanks John, have you (ever) kissed and killed so[me**one?\"\n\ntext.delete((arry_words-word_words).join).gsub(r, '')\n  #=&gt; \"Thanks John, have you ever  or killed someone\"\n</code></pre>\n\n<p>Note</p>\n\n<pre><code>text.delete((arry_words-word_words).join)\n  #=&gt; \"Thanks John, have you ever kissed and killed someone\"\n</code></pre>\n"}], "owner": {"reputation": 1179, "user_id": 2858044, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/b99bf8baf41337577e4e425677080472?s=128&d=identicon&r=PG&f=1", "display_name": "itx", "link": "https://stackoverflow.com/users/2858044/itx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1643, "favorite_count": 0, "accepted_answer_id": 41847596, "answer_count": 3, "score": 1, "last_activity_date": 1485459509, "creation_date": 1485333709, "last_edit_date": 1485337809, "question_id": 41846903, "link": "https://stackoverflow.com/questions/41846903/remove-word-with-regex", "title": "Remove word with regex", "body": "<p>I have an array </p>\n\n<pre><code>[\"killed\", \"thanks\", \"thank\",\"+\", \"?\", \"]\", \"[\", \"(\", \")\", \"*\"]\n</code></pre>\n\n<p>I want to remove some strings from a text if they are included in the array.</p>\n\n<p>With this example, I want to remove \"beauty\", but not \"beautifully\". How can I do that?</p>\n\n<p>I tried using regex:</p>\n\n<pre><code>text = \"thanks john, Have you ever killed someone ?\"\narry_words = [\"killed\", \"thanks\", \"+\", \"?\", \"]\", \"[\", \"(\", \")\", \"*\"]\ntext.downcase.gsub(Regexp.new(\"\\\\b+(?:#{arry_words.join('|')})\\\\b\"), '').strip\n</code></pre>\n\n<p>but I get some errors like:</p>\n\n<ul>\n<li><code>RegexpError: target of repeat operator is not specified</code></li>\n<li><code>RegexpError: end pattern with unmatched parenthesis: ...</code></li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "pg-search"], "comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485338662, "post_id": 41846864, "comment_id": 70881319, "body": "How is <code>pg_search_keywords</code> implemented? Also, how do you plan to input words? If <code>&quot;kitchen drawer&quot;</code> are 2 separate words, <code>&quot;rouleau de cuisine&quot;</code> cannot be 1 word. So you need to either use <code>&quot;kitchen,drawer&quot;</code>, <code>[kitchen, drawer]</code> or <code>&quot;&#39;rouleau de cuisine&#39;&quot;</code>"}, {"owner": {"reputation": 815, "user_id": 4803880, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/zf4gI.png?s=128&g=1", "display_name": "thiebo", "link": "https://stackoverflow.com/users/4803880/thiebo"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485339184, "post_id": 41846864, "comment_id": 70881693, "body": "I added the pg_search_keywords in update to my question. Are you saying I can pass an array to pg_search?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485339293, "post_id": 41846864, "comment_id": 70881773, "body": "No, I&#39;m saying you should pass a different format for <code>words</code> and <code>not_words</code> in <code>self.find_words</code>. Right now, it looks like you don&#39;t have enough information in this method."}, {"owner": {"reputation": 815, "user_id": 4803880, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/zf4gI.png?s=128&g=1", "display_name": "thiebo", "link": "https://stackoverflow.com/users/4803880/thiebo"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1485340295, "post_id": 41846864, "comment_id": 70882477, "body": "&quot;rouleau de cuisine&quot; must be 1 word because &quot;rouleau&quot; doesn&#39;t exist and &quot;de&quot; is a stopword that can also occur in negated terms. What I now send to <code>pg_search_keywords</code> is <code>&quot;assiette de table !rouleau !de !cuisine&quot;</code> . How should I format the <code>words</code> differently from the <code>not_words</code>? Are single quotes (as in your answer) the solution, e.g. : <code>&quot;cuisine, &#39;rouleau de cuisine&#39;, !&#39;assiette de table&#39;&quot;</code>  ?"}], "owner": {"reputation": 815, "user_id": 4803880, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/zf4gI.png?s=128&g=1", "display_name": "thiebo", "link": "https://stackoverflow.com/users/4803880/thiebo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485339301, "creation_date": 1485333596, "last_edit_date": 1485339301, "question_id": 41846864, "link": "https://stackoverflow.com/questions/41846864/pg-search-negation-how-to-negate-a-string-with-whitespaces", "title": "pg_search negation: how to negate a string with whitespaces?", "body": "<p>I'm using <code>pg_search</code> and trying to implement the negation option.</p>\n\n<p>My search form contains a bunch of options, among which selecting key words and selecting words that mustn't be within the keywords. I get all search keywords and all negated keywords and format them for the ps_search method. This is how:</p>\n\n<pre><code>def self.find_words(words, not_words)\n    if words.present? || not_words.present?\n\n        a_not_words = not_words.gsub(/,/,\"\").split(\" \").each{|l|l.prepend(\"!\")}\n        a_words = words.gsub(/,/,\"\").split(\" \")\n        a_all = a_not_words + a_words\n        my_words = a_all.join(\" \")\n\n        pg_search_keywords(my_words)\n    else\n        order(\"id DESC\")\n    end\nend \n</code></pre>\n\n<p>This works well with simple words. For example, if someone want all results that contain \"kitchen\" and \"drawer\" but not \"spoon\", this is sent to the pg_search method: <code>\"kitchen drawer !spoon\"</code></p>\n\n<p>However, many of my keywords contain white spaces and stop words (\"de\" and \"en\" in French). </p>\n\n<p>So if a person looks for a \"rouleau de cuisine\" (rolling pin) but doesn't want \"assiette de table\" (table dish) that this gets sent to pg_search method: \"assiette de table !rouleau !de !cuisine\".</p>\n\n<p>This creates 3 problems:</p>\n\n<p>1/ the word \"de\" is within the search terms and within the negated terms\n2/ this looks for the keyword \"table\", which doesn't exist - only \"assiette de table\" exists\n2/ I can't remove the stop word \"de\" because then it will start looking for and negating terms that don't exist. </p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>This is how I implement pg_search_keywords :</p>\n\n<pre><code>pg_search_scope :pg_search_keywords,\n                :against =&gt; :summery,\n                :associated_against =&gt; {\n                    :keywords =&gt; [:keyword]\n                },\n                :ignoring =&gt; :accents,\n                :using =&gt; {\n                    :tsearch =&gt; {\n                        :negation =&gt; true,\n                        :dictionary =&gt; 'french'\n                    }\n                }\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["javascript", "jquery", "ruby", "shopify", "slick.js"], "answers": [{"tags": [], "owner": {"reputation": 1685, "user_id": 5154864, "user_type": "registered", "profile_image": "https://graph.facebook.com/494470560707821/picture?type=large", "display_name": "Mash R.", "link": "https://stackoverflow.com/users/5154864/mash-r"}, "is_accepted": false, "score": 0, "last_activity_date": 1485374538, "creation_date": 1485374538, "answer_id": 41860626, "question_id": 41846346, "link": "https://stackoverflow.com/questions/41846346/is-there-any-way-to-implement-ken-wheeler-slick-js-to-my-shopify/41860626#41860626", "title": "Is there any way to implement Ken Wheeler/Slick JS to my shopify?", "body": "<p>Shopify debut theme loads  vendor.js  which included the jQuery already. </p>\n\n<p>I can see you loaded jQuery again.  This is the issue i guess.</p>\n\n<p>Remove this line</p>\n\n<p><code>&lt;script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js'&gt;&lt;/script&gt;</code></p>\n\n<p>and your theme should work properly.</p>\n\n<p>Kind Regards </p>\n"}], "owner": {"reputation": 33, "user_id": 5948627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1234006816614260/picture?type=large", "display_name": "Jeremy Talanay", "link": "https://stackoverflow.com/users/5948627/jeremy-talanay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 993, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485374538, "creation_date": 1485331696, "question_id": 41846346, "link": "https://stackoverflow.com/questions/41846346/is-there-any-way-to-implement-ken-wheeler-slick-js-to-my-shopify", "title": "Is there any way to implement Ken Wheeler/Slick JS to my shopify?", "body": "<p>I'm using \"Debut\" as theme of my store in shopify. I would like to use Slick JS as image slide for my product gallery. I tried and it work! but the functionality of \"selecting variants and showing it's image\" is gone.</p>\n\n<p>this is my code inside <strong>product-template.liquid</strong>: </p>\n\n<pre><code>&lt;div class=\"adsurf_slickslide_container\" role='toolbar'&gt;\n    {% assign index = 0 %}\n    {% if product.images.size &gt; 1 %}\n      {% for image in product.images %}\n          {% assign index = index | plus: 1 %}\n\n            &lt;span class=\"slide\" data-index=\"{{ index }}\" data-variant-img=\"{{ image.id }}\"&gt;\n              &lt;img data-advar=\"{{ product.options_with_values | escape  }}\" src=\"{{ image | img_url: '1024x1024' }}\" alt=\"{{ image.alt | escape }}\"&gt;\n            &lt;/span&gt;\n\n      {% endfor %}\n    {% endif %}\n  &lt;/div&gt;\n\n\n  &lt;script type='text/javascript' src='https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js'&gt;&lt;/script&gt;\n  &lt;script type='text/javascript' src='https://cdn.jsdelivr.net/jquery.slick/1.6.0/slick.min.js'&gt;&lt;/script&gt;\n  &lt;script type='text/javascript'&gt;\n    $(function(){\n      $('div.adsurf_slickslide_container').slick({\n        dots: true,\n        infinite: true,\n        speed: 300,\n        slidesToShow: 1,\n        adaptiveHeight: true\n      });\n\n      $(document).on('change', 'select.single-option-selector', function(){\n        var customVal = $(this).val();\n\n        var hittedIndex = $('span img#' + customVal).data('index');\n        console.log('span img[addata=' + customVal + ']');\n\n        if(hittedIndex != undefined)\n            $('div.adsurf_slickslide_container').slick('slickGoTo', hittedIndex);\n      });\n    });\n  &lt;/script&gt;\n</code></pre>\n\n<p>Please help. Thanks in advance :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1485327449, "post_id": 41845102, "comment_id": 70874802, "body": "can you try defining your controller as <code>class TyreChecks::Individuals::TyreChecksController &lt; ApplicationController</code> ?"}], "answers": [{"tags": [], "owner": {"reputation": 80, "user_id": 6825745, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd440d36fa3faef554d9f479ff56a09?s=128&d=identicon&r=PG&f=1", "display_name": "nickj", "link": "https://stackoverflow.com/users/6825745/nickj"}, "is_accepted": true, "score": 1, "last_activity_date": 1485327826, "creation_date": 1485327826, "answer_id": 41845374, "question_id": 41845102, "link": "https://stackoverflow.com/questions/41845102/routing-error-for-two-layer-deep-scoped-controller-uninitialized-constant/41845374#41845374", "title": "Routing Error for Two-Layer Deep Scoped Controller (uninitialized constant)", "body": "<p>I realised what I did, an easy mistake to make when defining the route, misled myself based on the initial matched URL (<code>match '/individuals/tyre-check'</code>).</p>\n\n<p>Essentially, if you look at the controller structure, it is namespaced as such:</p>\n\n<pre><code>module TyreChecks\n  module Individuals\n    class TyreChecksController &lt; ApplicationController\n     ...\n    end\n  end\nend\n</code></pre>\n\n<p>Which when translated to <code>controller#action</code> format is:</p>\n\n<p><code>tyre_checks/individuals/tyre_checks#action</code></p>\n\n<p>but what I did was to put:</p>\n\n<p><code>individuals/tyre_checks/tyre_checks#action</code></p>\n\n<p>I flipped them around the wrong way. It was the first part I wrote that misled me here:</p>\n\n<p><code>match '/individuals/tyre-check'</code></p>\n\n<p>All sorted now ;)</p>\n"}], "owner": {"reputation": 80, "user_id": 6825745, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/edd440d36fa3faef554d9f479ff56a09?s=128&d=identicon&r=PG&f=1", "display_name": "nickj", "link": "https://stackoverflow.com/users/6825745/nickj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "accepted_answer_id": 41845374, "answer_count": 1, "score": 0, "last_activity_date": 1485327826, "creation_date": 1485326721, "last_edit_date": 1485327089, "question_id": 41845102, "link": "https://stackoverflow.com/questions/41845102/routing-error-for-two-layer-deep-scoped-controller-uninitialized-constant", "title": "Routing Error for Two-Layer Deep Scoped Controller (uninitialized constant)", "body": "<p>So I've been looking to namespace a few of folders in the project.</p>\n\n<p>When I namespace 1-Layer deep, I have no issues, but as soon as I scope the route down to another folder deeper (and corresponding controller folders/names), I am getting this error:</p>\n\n<p><code>Routing Error uninitialized constant Individuals</code></p>\n\n<p>What I mean by folder depth, is taking <code>tyres_controller.rb</code>, and this layer of depth in the project:</p>\n\n<ul>\n<li><p><strong>1-Layer</strong>\n<code>app/controllers/&lt;1st_level_deep&gt;/tyres_controller.rb</code></p></li>\n<li><p><strong>2-Layers</strong>\n<code>app/controllers/&lt;1st_level_deep&gt;/&lt;2nd_level_deep&gt;/tyres_controller.rb</code></p></li>\n</ul>\n\n<p>Here's the two scenarios: </p>\n\n<p><strong>1-Layer Deep Namespaced Controller</strong></p>\n\n<p><strong><code>app/controllers/tyre_checks/tyre_checks_controller.rb</code></strong></p>\n\n<pre><code>module TyreChecks\n  class TyreChecksController &lt; ApplicationController\n   ...\n  end\nend\n</code></pre>\n\n<p><strong><code>routes.rb</code></strong></p>\n\n<pre><code>scope module: 'tyre_checks' do\n  resources :tyre_checks, only: [:new, :create] do\n  end\nend\n\n...\n\nmatch '/tyre-checks', to: 'tyre_checks/tyre_checks#new', via: :get, as: :start_tyre_check\n</code></pre>\n\n<p><strong>2-Layer Deep Namespaced Controller</strong></p>\n\n<p><strong><code>app/controllers/tyre_checks/individuals/tyre_checks_controller.rb</code></strong></p>\n\n<pre><code>module TyreChecks\n  module Individuals\n    class TyreChecksController &lt; ApplicationController\n     ...\n    end\n  end\nend\n</code></pre>\n\n<p><strong><code>routes.rb</code></strong></p>\n\n<pre><code>scope module: 'tyre_checks' do\n  scope module: 'individuals' do\n    resources :tyre_checks, only: [:new, :create] do\n    end\n  end\nend\n\n...\n\nmatch '/individuals/tyre-check', to: 'individuals/tyre_checks/tyre_checks#new', via: :get, as: :start_tyre_check\n</code></pre>\n\n<p><strong>IF YOU ASKED ME TO GUESS</strong></p>\n\n<ul>\n<li>I think it's something to do with this part and the way Rails interprets the extra <code>/</code> in the request at the end of <code>individuals</code>:</li>\n</ul>\n\n<p><code>to: 'individuals/tyre_checks/tyre_checks#new', via: :get, as: :start_tyre_check</code></p>\n"}, {"tags": ["ruby", "shell", "sudo"], "comments": [{"owner": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "edited": false, "score": 0, "creation_date": 1485324818, "post_id": 41844563, "comment_id": 70873669, "body": "If you need to to run a command via <code>sudo</code>, then you should configure <code>&#47;etc&#47;sudoers</code> file for specific user/group instead of trying to input the password via script"}, {"owner": {"reputation": 210, "user_id": 4513858, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/98d5a391cf87ba43b27c16018b935258?s=128&d=identicon&r=PG&f=1", "display_name": "localplutonium", "link": "https://stackoverflow.com/users/4513858/localplutonium"}, "reply_to_user": {"reputation": 17784, "user_id": 1646322, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/d9fd7a75e0d8ace7bb3276476786c2c0?s=128&d=identicon&r=PG", "display_name": "Ruslan Osmanov", "link": "https://stackoverflow.com/users/1646322/ruslan-osmanov"}, "edited": false, "score": 0, "creation_date": 1485325126, "post_id": 41844563, "comment_id": 70873812, "body": "I would want to be able to run command via <code>sudo</code> on a &#39;random/any&#39; computer."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485332420, "post_id": 41844563, "comment_id": 70877184, "body": "There&#39;s some <a href=\"http://stackoverflow.com/questions/12498536/how-do-you-prompt-for-a-sudo-password-using-ruby\">suggestions here</a>."}], "answers": [{"tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": false, "score": 0, "last_activity_date": 1485332601, "creation_date": 1485332601, "answer_id": 41846580, "question_id": 41844563, "link": "https://stackoverflow.com/questions/41844563/is-it-possible-to-acknowledge-and-respond-to-a-command-line-prompt/41846580#41846580", "title": "Is it possible to acknowledge and respond to a command line prompt?", "body": "<p>If you supply the whole dialogue from your program, you could use <a href=\"https://docs.ruby-lang.org/en/2.2.0/Net/Telnet.html\" rel=\"nofollow noreferrer\">Net::Telnet</a>.</p>\n\n<p>If you want to pass the control back to the user, you could either use the <a href=\"https://github.com/abates/ruby_expect\" rel=\"nofollow noreferrer\">ruby/expect</a> gem, or shell out to an <a href=\"http://inguza.com/document/expect-and-tcl-mini-reference-manual\" rel=\"nofollow noreferrer\">Expect</a> script. In both cases, you need to have Tcl/Expect installed (which is likely the case anyway).</p>\n"}], "owner": {"reputation": 210, "user_id": 4513858, "user_type": "registered", "accept_rate": 9, "profile_image": "https://www.gravatar.com/avatar/98d5a391cf87ba43b27c16018b935258?s=128&d=identicon&r=PG&f=1", "display_name": "localplutonium", "link": "https://stackoverflow.com/users/4513858/localplutonium"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 196, "favorite_count": 0, "closed_date": 1485349238, "answer_count": 1, "score": 1, "last_activity_date": 1485332601, "creation_date": 1485324391, "last_edit_date": 1485324731, "question_id": 41844563, "link": "https://stackoverflow.com/questions/41844563/is-it-possible-to-acknowledge-and-respond-to-a-command-line-prompt", "closed_reason": "Duplicate", "title": "Is it possible to acknowledge and respond to a command line prompt?", "body": "<p>For example, I create a <code>Shell</code> object to execute some shell command (maybe a sudo command) and it prompts me for a password.</p>\n\n<p>Does Ruby have the ability to acknowledge this prompt and can I send it a password?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "encoding", "rspec", "ascii"], "comments": [{"owner": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "edited": false, "score": 0, "creation_date": 1485325809, "post_id": 41844432, "comment_id": 70874085, "body": "Probably this answer would help <a href=\"http://stackoverflow.com/a/29819539/7362128\">stackoverflow.com/a/29819539/7362128</a>"}, {"owner": {"reputation": 172, "user_id": 6918668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xRl8rMpbL98/AAAAAAAAAAI/AAAAAAAAEfk/gUeqP5eVdNA/photo.jpg?sz=128", "display_name": "Takamura", "link": "https://stackoverflow.com/users/6918668/takamura"}, "reply_to_user": {"reputation": 2925, "user_id": 7362128, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c182f15f6440b325d21ef726ccbda66?s=128&d=identicon&r=PG", "display_name": "Slava.K", "link": "https://stackoverflow.com/users/7362128/slava-k"}, "edited": false, "score": 0, "creation_date": 1485326057, "post_id": 41844432, "comment_id": 70874187, "body": "@Slava.K I tested these recipes out there, but they did not help. With encoding all right because one of the tests of this file and repeat the same thing is done with the ascii characters."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485332881, "post_id": 41844432, "comment_id": 70877460, "body": "You need to add some context here, like the code used to compare files. The default encoding for arbitrary files being read in can be different than the default source encoding."}], "owner": {"reputation": 172, "user_id": 6918668, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-xRl8rMpbL98/AAAAAAAAAAI/AAAAAAAAEfk/gUeqP5eVdNA/photo.jpg?sz=128", "display_name": "Takamura", "link": "https://stackoverflow.com/users/6918668/takamura"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485323867, "creation_date": 1485323867, "question_id": 41844432, "link": "https://stackoverflow.com/questions/41844432/rspec-test-failures-with-present-to-non-english-symbols", "title": "rspec test failures with present to non-English symbols", "body": "<p>I'm comparing multiple files containing russian characters, and that's a result of getting. I replaced the symbols and the tests were properly</p>\n\n<p>My environments: Rails 5.0.0.1 and ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]</p>\n\n<p>Files use utf-8 encoding.</p>\n\n<p><code>\n    Failure/Error: Feror::AppGenerator.start args, { destination_root: spec_path }\n    Encoding::CompatibilityError:\n        incompatible character encodings: ASCII-8BIT and UTF-8\n</code></p>\n"}, {"tags": ["ruby", "sequel"], "answers": [{"comments": [{"owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "edited": false, "score": 0, "creation_date": 1485325661, "post_id": 41844263, "comment_id": 70874027, "body": "Thank you! Works perfectly."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485332604, "post_id": 41844263, "comment_id": 70877283, "body": "ActiveSupport&#39;s auto-loader can also handle this, or you can make your own version of same. Splitting them out into separate files is really the best way to do this, though."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485332661, "post_id": 41844263, "comment_id": 70877326, "body": "@tadman: For sure, but neither <a href=\"https://stackoverflow.com/questions/tagged/rails\">rails</a> nor <a href=\"https://stackoverflow.com/questions/tagged/activesupport\">activesupport</a> were tagged."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485332761, "post_id": 41844263, "comment_id": 70877394, "body": "Oh, not forcing Rails on anyone, but if ActiveSupport is being used, which sometimes is the case, it does have a fancy auto-loader."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 2, "last_activity_date": 1485323074, "creation_date": 1485323074, "answer_id": 41844263, "question_id": 41844199, "link": "https://stackoverflow.com/questions/41844199/best-way-to-separate-sequel-model-definitions-into-different-file/41844263#41844263", "title": "Best way to separate Sequel model definitions into different file?", "body": "<p>Of course it's possible. Extract the definitions into their own file (say, <code>models.rb</code>), and put <code>require_relative('models')</code> where they used to be. </p>\n\n<p>Or you can even put each model in its own file in a directory, say <code>models/person.rb</code>..., and then</p>\n\n<pre><code>Dir[\"models/*.rb\"].each { |file| require_relative(file) }\n</code></pre>\n"}], "owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 41844263, "answer_count": 1, "score": 0, "last_activity_date": 1485323074, "creation_date": 1485322805, "question_id": 41844199, "link": "https://stackoverflow.com/questions/41844199/best-way-to-separate-sequel-model-definitions-into-different-file", "title": "Best way to separate Sequel model definitions into different file?", "body": "<p>I'm using the Sequel gem in Ruby, but at the moment I have my model definitions up at the top of each of my scripts. However, as those models have changed over time, it's becoming hard to keep track of what the latest model is when I open up, say, an older file.</p>\n\n<p>I'd like to keep my model definitions in it's own .rb file, but is that possible? If so, what's the best way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email", "gmail"], "answers": [{"tags": [], "owner": {"reputation": 131, "user_id": 6648126, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-TgCeMm5M1mw/AAAAAAAAAAI/AAAAAAAAAEs/tcqtAk0oVTs/photo.jpg?sz=128", "display_name": "Rajat Chandak", "link": "https://stackoverflow.com/users/6648126/rajat-chandak"}, "is_accepted": false, "score": 0, "last_activity_date": 1485322311, "creation_date": 1485322311, "answer_id": 41844117, "question_id": 41844033, "link": "https://stackoverflow.com/questions/41844033/integrating-gmail-into-rails-project-for-crm-type-functionality/41844117#41844117", "title": "Integrating Gmail into rails project for CRM type functionality", "body": "<p>I am not sure about gem because I am not from ruby background. But I can help you with the way to proceed further with gmail authentication. Gmail provided the OAuth integration which will basically authenticate your app's user on behalf of you. </p>\n\n<p>useful link: <a href=\"https://developers.google.com/gmail/api/auth/about-auth\" rel=\"nofollow noreferrer\">https://developers.google.com/gmail/api/auth/about-auth</a></p>\n\n<p>once you get this concept then you can move ahead with more specific question like ruby gem/sdk to integrate gmail OAuth with your application.</p>\n\n<p>Thanks, hope this helps !</p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 7283844, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/624fdf612d075b9c7debab11ae59d585?s=128&d=identicon&r=PG&f=1", "display_name": "User112321312", "link": "https://stackoverflow.com/users/7283844/user112321312"}, "is_accepted": false, "score": 0, "last_activity_date": 1485338485, "creation_date": 1485338485, "answer_id": 41848543, "question_id": 41844033, "link": "https://stackoverflow.com/questions/41844033/integrating-gmail-into-rails-project-for-crm-type-functionality/41848543#41848543", "title": "Integrating Gmail into rails project for CRM type functionality", "body": "<p>Going through the documentation is always a good idea even if you can handle it all with gem, understanding what you are doing is helpful and it makes fixing any bugs far easier. </p>\n\n<p>However to answer your question <a href=\"https://github.com/zquestz/omniauth-google-oauth2\" rel=\"nofollow noreferrer\">OmniAuth Google OAuth2</a> should cover your needs, you will also need to read some documentation though. </p>\n"}], "owner": {"reputation": 622, "user_id": 5279783, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/22c1cf8adcf189149e03f48a25a43e5f?s=128&d=identicon&r=PG&f=1", "display_name": "Raidspec", "link": "https://stackoverflow.com/users/5279783/raidspec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1485338485, "creation_date": 1485321946, "question_id": 41844033, "link": "https://stackoverflow.com/questions/41844033/integrating-gmail-into-rails-project-for-crm-type-functionality", "title": "Integrating Gmail into rails project for CRM type functionality", "body": "<p>I'm looking to integrate Gmail into my rails project. The gmail will basically let the user authenticate with their gmail account so they can view, create, and reply to emails from their gmail account. </p>\n\n<p>Is there any major gems that makes this easier than going through the gmail documentation from <a href=\"https://developers.google.com/gmail/api/quickstart/ruby\" rel=\"nofollow noreferrer\">google</a> ? </p>\n"}, {"tags": ["ruby", "methods"], "comments": [{"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485321306, "post_id": 41843859, "comment_id": 70872278, "body": "how did you call that method? Also, <code>last</code> is a predefined method in <code>rails</code>, change the name to something else"}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1485321312, "post_id": 41843859, "comment_id": 70872283, "body": "when it throws that error? do you really pass 5 args?"}, {"owner": {"reputation": 939, "user_id": 1380422, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/elD2z.jpg?s=128&g=1", "display_name": "Freddy", "link": "https://stackoverflow.com/users/1380422/freddy"}, "edited": false, "score": 0, "creation_date": 1485322367, "post_id": 41843859, "comment_id": 70872677, "body": "Yeah in one case I passed 5 args, in others I passed a different number. i have an unexpected number of args."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1485323805, "post_id": 41843859, "comment_id": 70873246, "body": "Your second attempt is working fine <code>last(1, 2, 3)  # =&gt; 3</code>"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485332690, "post_id": 41844840, "comment_id": 70877349, "body": "Here <code>(1,2,3,4,5)</code> is an argument list, while <code>[1,2,3,4,5]</code> is an explicit array."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 1, "last_activity_date": 1485325604, "creation_date": 1485325604, "answer_id": 41844840, "question_id": 41843859, "link": "https://stackoverflow.com/questions/41843859/wrong-number-of-arguments-error-in-ruby-method/41844840#41844840", "title": "Wrong number of arguments error in Ruby method", "body": "<p>When you call your method, you need to pass it a single array. I'm guessing you are passing it several items instead.</p>\n\n<pre><code>&gt;&gt; last(1,2,3,4,5)\nArgumentError: wrong number of arguments (5 for 1)\n&gt;&gt; last([1,2,3,4,5])\n=&gt; 5\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 939, "user_id": 1380422, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/elD2z.jpg?s=128&g=1", "display_name": "Freddy", "link": "https://stackoverflow.com/users/1380422/freddy"}, "edited": false, "score": 0, "creation_date": 1485413172, "post_id": 41847729, "comment_id": 70918342, "body": "Thanks so much for this. This all makes sense. In Codewars it is asking me to find either the final character if it is a string, or the final value if it is an array. So this will work if I am looking for the final value in an array, but will only give me the final letter if I do not use the splat operator, but then I get the error message.  I&#39;m going to spend some time on it but really appreciate the help."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 939, "user_id": 1380422, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/elD2z.jpg?s=128&g=1", "display_name": "Freddy", "link": "https://stackoverflow.com/users/1380422/freddy"}, "edited": false, "score": 0, "creation_date": 1485436686, "post_id": 41847729, "comment_id": 70930155, "body": "@falz3tta :  I&#39;m not sure I understand. Could you please update your question with the exact desired syntax for string and array, and show what the expected result would be?"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1485336544, "last_edit_date": 1485336544, "creation_date": 1485336151, "answer_id": 41847729, "question_id": 41843859, "link": "https://stackoverflow.com/questions/41843859/wrong-number-of-arguments-error-in-ruby-method/41847729#41847729", "title": "Wrong number of arguments error in Ruby method", "body": "<p>The relevant documentation is <a href=\"https://ruby-doc.org/core-2.4.0/doc/syntax/calling_methods_rdoc.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>The \"wildcard\" is called \"splat operator\".</p>\n\n<p>I hope this code makes it clearer :</p>\n\n<pre><code>def last_element_in_array(array) # &lt;-- There must be exactly one parameter\n  array[-1]\nend\n\ndef last_parameter(*parameters) # &lt;-- Any number of parameters\n  parameters[-1]\nend\n\np last_element_in_array([1, 2, 3, 4, 5])\n#=&gt; 5\np last_parameter(1, 2, 3, 4, 5)\n#=&gt; 5\np last_parameter\n#=&gt; nil\np last_parameter([1, 2, 3, 4, 5]) # &lt;-- Only one parameter : an array with 5 elements\n#=&gt; [1, 2, 3, 4, 5]\np last_element_in_array(1, 2, 3, 4, 5) # &lt;-- Too many parameters. There should be only 1, and it should be an Array.\n#=&gt; in `last_element_in_array': wrong number of arguments (given 5, expected 1) (ArgumentError)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1485337880, "creation_date": 1485337880, "answer_id": 41848330, "question_id": 41843859, "link": "https://stackoverflow.com/questions/41843859/wrong-number-of-arguments-error-in-ruby-method/41848330#41848330", "title": "Wrong number of arguments error in Ruby method", "body": "<p>The .last allready is a method for collections like an Array.\nBut I think I see what you want, a generic method for both Array and String.\nand it needs to be able to accept both a various number of arguments (Array of args)\nas well as an Array itself.</p>\n\n<p>If you study the results below you see what goes wrong with the various versions\nYou would have to add the .last method to String but then you are still in trouble\nwhen you pass an Array, so take a look at the last solution.\nIt first flattens any arrays and gives the .last element, \nthen it looks at the class of the last element, in case it's a String\nit [-1] returns the last character, otherwise just the number\nArguments other than String or Array that don't support .last will still give an error\nI run this from my editor, not irb so I use p here to do some simple debugging.\nWhy p instead of puts ? Because it inspects an object and prints arrays on one line.</p>\n\n<p>The <code>[__LINE__]</code> construct is to print the linenumber to see which results you are seeing\nI left them in place so that you can try this simple debugging technique.</p>\n\n<p>You would better call this method otherswise (eg last_of) to avoid confusions with the .last method in some classes.</p>\n\n<pre><code>p [__LINE__,[1, 2, 3].last] # 3\n\ndef last(x)\n  x[-1]\nend\n\np [__LINE__,last([1, 2, 3])] # 3\n#p last(1, 2, 3) # wrong number of arguments (3 for 1) (ArgumentError)\np [__LINE__, last(\"a string\")] # g\n\ndef last(*x)\n    p [__LINE__, x] \n  x[-1]\nend\n\np [__LINE__, last([1, 2, 3])] # [1, 2, 3]\np [__LINE__, last(1, 2, 3)] # 3\np [__LINE__, last(\"a string\")] # \"a string\"\n\ndef last *x\n    e = x.flatten.last # flatten any Arrays \n    case e\n      when String \n        e[-1]\n      when Fixnum\n        e\n    end\nend\n\np [__LINE__, last([1, 2, 3])] # 3\np [__LINE__, last(1, 2, 3)] # 3\np [__LINE__, last(\"a string\")] # \"g\"\np [__LINE__, last([\"a string\"])] # \"g\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2139, "user_id": 208769, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7678cf457f3bcd08972a960104761cf9?s=128&d=identicon&r=PG", "display_name": "user208769", "link": "https://stackoverflow.com/users/208769/user208769"}, "is_accepted": false, "score": 0, "last_activity_date": 1485347563, "creation_date": 1485347563, "answer_id": 41851764, "question_id": 41843859, "link": "https://stackoverflow.com/questions/41843859/wrong-number-of-arguments-error-in-ruby-method/41851764#41851764", "title": "Wrong number of arguments error in Ruby method", "body": "<p>It sounds like you want to be able to use this two different ways:</p>\n\n<pre><code>last(:a, :b, :c)\nlast(my_list_type)\n</code></pre>\n\n<p>The easiest way to achieve this would be to \"splat\" the arguments, and then check how many elements you have been given. For example:</p>\n\n<pre><code>def last(*args)\n  return args[-1] if args.length &gt; 1\n  return args[0][-1] if args.length == 1 &amp;&amp; args[0].respond_to?(:length)\n  args[0] # because we have been given nothing, or a single, non-list-type item\nend\n</code></pre>\n\n<p>Note the following uses - this may or may not be what you intended, but should give you a good starting point:</p>\n\n<pre><code>last 1,2,3          #=&gt; 3\nlast [4,5,6]        #=&gt; 6\nlast 1              #=&gt; 1\nlast \"1\"            #=&gt; \"1\"\nlast \"123\"          #=&gt; \"3\"\nlast \"123\", \"456\"   #=&gt; \"456\"\nlast                #=&gt; nil\nlast []             #=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 939, "user_id": 1380422, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/elD2z.jpg?s=128&g=1", "display_name": "Freddy", "link": "https://stackoverflow.com/users/1380422/freddy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3103, "favorite_count": 0, "accepted_answer_id": 41844840, "answer_count": 4, "score": 0, "last_activity_date": 1485347563, "creation_date": 1485321115, "question_id": 41843859, "link": "https://stackoverflow.com/questions/41843859/wrong-number-of-arguments-error-in-ruby-method", "title": "Wrong number of arguments error in Ruby method", "body": "<p>I am sorry to ask such a basic question, but I have searched for a solution and don't seem to be able to find one that makes sense.</p>\n\n<p>Essentially, I am trying to write a Ruby method that returns the last value of a list (string or array). Here is my code:</p>\n\n<pre><code>def last(x)\nx[-1]\nend\n</code></pre>\n\n<p>It actually produces the results I want, but gives me the following error:</p>\n\n<pre><code>`last': wrong number of arguments (given 5, expected 1) (ArgumentError)\n</code></pre>\n\n<p>I have tried simply adding a wildcard to my expected argument, like so:</p>\n\n<pre><code>def last(*x)\nx[-1]\nend\n</code></pre>\n\n<p>This just outputs all values instead of the last one. Anyone got any ideas where I'm going wrong? Again, sorry for the basic question.</p>\n"}, {"tags": ["android", "ruby", "appium"], "comments": [{"owner": {"reputation": 106, "user_id": 4559634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wozvY.jpg?s=128&g=1", "display_name": "peter pawar", "link": "https://stackoverflow.com/users/4559634/peter-pawar"}, "edited": false, "score": 0, "creation_date": 1485324061, "post_id": 41843838, "comment_id": 70873328, "body": "You can try with directly navigating to other page on browser startup. Like: <code>$driver.manage().window().maximize()                                      $driver.navigate.to &quot;http:&#47;&#47;google.com&quot; </code>"}, {"owner": {"reputation": 286, "user_id": 3035795, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0de03a52efb58c255ed1aa5dc8ce4a69?s=128&d=identicon&r=PG", "display_name": "Risinek", "link": "https://stackoverflow.com/users/3035795/risinek"}, "reply_to_user": {"reputation": 106, "user_id": 4559634, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wozvY.jpg?s=128&g=1", "display_name": "peter pawar", "link": "https://stackoverflow.com/users/4559634/peter-pawar"}, "edited": false, "score": 0, "creation_date": 1533043368, "post_id": 41843838, "comment_id": 90194102, "body": "@peterpawar this won&#39;t help.. tried adb that shoudl directly open url in default browser, but without luck <code>adb shell am start -a android.intent.action.VIEW -d http:&#47;&#47;seznam.cz</code>"}], "answers": [{"tags": [], "owner": {"reputation": 17, "user_id": 10864364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/483da978499c231fd13335ead892ab1d?s=128&d=identicon&r=PG&f=1", "display_name": "Akash", "link": "https://stackoverflow.com/users/10864364/akash"}, "is_accepted": false, "score": -1, "last_activity_date": 1547755650, "creation_date": 1547755650, "answer_id": 54243526, "question_id": 41843838, "link": "https://stackoverflow.com/questions/41843838/how-to-skip-chrome-welcome-screen-every-time-i-run-appium-ruby-test/54243526#54243526", "title": "How to skip Chrome Welcome screen, every time I run Appium, Ruby test", "body": "<p>I was stuck at the same issue from past 3 days. You need to enable USB debugging on your simulator to get rid of the welcome screen on chrome. Follow these steps:</p>\n\n<ol>\n<li>Open settings on your simulator</li>\n<li>Tap on About emulated device</li>\n<li>Tap 7 times on the Build Number to enable Developer options</li>\n<li>Go back to the setting main page</li>\n<li>Click on Developer options</li>\n<li>Allow USB debugging</li>\n</ol>\n\n<p>Rerun your script. You should NOT see the Welcome screen on chrome again. Good Day !!</p>\n"}, {"tags": [], "owner": {"reputation": 29, "user_id": 9259680, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/UXwM2.png?s=128&g=1", "display_name": "Maria Clara Bezerra", "link": "https://stackoverflow.com/users/9259680/maria-clara-bezerra"}, "is_accepted": false, "score": 0, "last_activity_date": 1580013907, "creation_date": 1580013907, "answer_id": 59915628, "question_id": 41843838, "link": "https://stackoverflow.com/questions/41843838/how-to-skip-chrome-welcome-screen-every-time-i-run-appium-ruby-test/59915628#59915628", "title": "How to skip Chrome Welcome screen, every time I run Appium, Ruby test", "body": "<p>Try to insert 'chromeOptions' to your desired cap dict. That worked for me! '--disable-free' argument will disable welcome screen for your chrome browser.\nCheck here for more details: <a href=\"https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md\" rel=\"nofollow noreferrer\">https://github.com/appium/appium/blob/master/docs/en/writing-running-appium/caps.md</a></p>\n\n<pre><code>desired_cap = {\n            \"platformName\": \"Android\",\n            \"deviceName\": \"AppiumP\",\n            'appPackage': 'com.android.chrome',\n            'appActivity': 'com.google.android.apps.chrome.Main',\n            'chromeOptions': {\n                'args': ['--disable-fre']\n            }\n        }\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 7300455, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a854a1bc1b4bbb4f568ea525f2a092a0?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/7300455/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2061, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1580013907, "creation_date": 1485321037, "question_id": 41843838, "link": "https://stackoverflow.com/questions/41843838/how-to-skip-chrome-welcome-screen-every-time-i-run-appium-ruby-test", "title": "How to skip Chrome Welcome screen, every time I run Appium, Ruby test", "body": "<p>I'm new to Appium. So my requirement is to run web driver test through Appium in simulator but when I run every time chrome always shows the welcome screen which I have to manually skip to see the test result and take screen shots. How to skip the chrome welcome screen?</p>\n\n<p>Below is my settings\nAppium 1.5.3\nMobile platform/version under test: Android 7.1\nReal device or emulator/simulator: Emulator</p>\n\n<p>This is what I have in my env.rb file</p>\n\n<pre><code>begin\n  system 'adb uninstall io.appium.settings'\n  system 'adb uninstall io.appium.unlock'\n  $driver = Appium::Driver.new(desired_caps).start_driver\nrescue Exception =&gt; e\n  puts e.message\n  Process.exit(0)  \n end\nelse # else create driver instance for desktop browser\n begin\n   $driver = Selenium::WebDriver.for(:\"#{$browser_type}\")\n   $driver.manage().window().maximize()\n rescue Exception =&gt; e\n   puts e.message\n   Process.exit(0)\n end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485320994, "post_id": 41843551, "comment_id": 70872185, "body": "what values you have in <code>@project_job_selector</code>? . Also try,  <code>select_tag &quot;id&quot;, options_for_select(@project_job_selector),{:onchange =&gt; &#39;this.form.submit();&#39;, include_blank: true}</code>"}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485321622, "post_id": 41843551, "comment_id": 70872384, "body": "I added the code for the @project_job_selector above. It is in the ApplicationController and used in multiple places. I tried adding quotes around id and it makes no difference"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485322459, "post_id": 41843551, "comment_id": 70872712, "body": "In your view do <code>&lt;%= @project_job_selector %&gt;</code> and check if there is some data in it?"}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485322627, "post_id": 41843551, "comment_id": 70872780, "body": "I know there is data in it, The drop down shows roughly 500 options. it just wont pass the id back in the param when selected. going to try that though just to see what it does, ill post back"}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485322916, "post_id": 41843551, "comment_id": 70872892, "body": "so many results that it crashes the browser, about 500 options in the selector and about 200 rows in the table. the select is [&quot;Job Name&quot;, 121]"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485323818, "post_id": 41843551, "comment_id": 70873251, "body": "try adding method outside the hash, <code>&lt;%= form_tag({controller: &quot;call_track&quot;, action: &quot;associate&quot;}, method: &quot;post&quot;) do %&gt;</code>"}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485324394, "post_id": 41843551, "comment_id": 70873474, "body": "id param still empty"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "reply_to_user": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "edited": false, "score": 0, "creation_date": 1485325545, "post_id": 41843551, "comment_id": 70873990, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/133944/discussion-between-sravan-and-devon-quick\">continue this discussion in chat</a>."}, {"owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485361676, "post_id": 41843551, "comment_id": 70897076, "body": "we can continue in chat today. I fell asleep last night"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485494340, "post_id": 41843551, "comment_id": 70956918, "body": "so, the answer was solved. :-)"}], "answers": [{"tags": [], "owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "is_accepted": true, "score": 0, "last_activity_date": 1485456147, "creation_date": 1485456147, "answer_id": 41880656, "question_id": 41843551, "link": "https://stackoverflow.com/questions/41843551/select-tag-not-passing-param/41880656#41880656", "title": "select_tag not passing param", "body": "<p>putting my form_tag inside the table cell fixed it.</p>\n\n<pre><code>&lt;tr&gt;\n    &lt;td&gt;&lt;%= link_to call['StartTime'].strftime('%Y-%m-%d'), {:controller =&gt; :call_track, :action =&gt; :call_segments, :call_id =&gt; call['ID'] }, class: 'dialogify' %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= call['StartTime'].strftime('%I:%M %p')  %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= TimeDifference.between(call['StartTime'], call['EndTime']).in_minutes %&gt; Minutes&lt;/td&gt;\n    &lt;td&gt;&lt;%= username %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= call['CallType'] %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= if call['WorkgroupCall'] == 1 then 'True' else 'False' end %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= dialednumber  %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= callerid %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= form_tag({controller: \"call_track\", action: \"associate\"}, method: \"post\") do %&gt;&lt;%= if job == 0 then select_tag(:job_id,options_for_select(@jobs),{include_blank: true,:onchange =&gt; 'this.form.submit();'})  elsif job == -1 then '' else job_name.to_s end %&gt;&lt;%end%&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n</code></pre>\n"}], "owner": {"reputation": 198, "user_id": 3966729, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7da8b9392fa083519689ae308e92cd36?s=128&d=identicon&r=PG", "display_name": "Devon Quick", "link": "https://stackoverflow.com/users/3966729/devon-quick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 41880656, "answer_count": 1, "score": 1, "last_activity_date": 1485456147, "creation_date": 1485319499, "last_edit_date": 1485405345, "question_id": 41843551, "link": "https://stackoverflow.com/questions/41843551/select-tag-not-passing-param", "title": "select_tag not passing param", "body": "<p>My select_tag is suppose to auto post when a item is selected. It does but when I view the params in byebug I get a empty id in  the params instead of the selected id. Any idea what I am missing? </p>\n\n<p>Before I get to much criticism I do know that a lot of this should be moved to the controller. :) I plan on moving it.</p>\n\n<p>Params:</p>\n\n<pre><code>{\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"jeuwTKfou9qOs8Gj5M4TKOs0Ed7kjeewuqqslKAXonw6T4MRafeurp0pOHFHgPoDV000ExqFnOQfF8S/8oV5/Q==\", \"id\"=&gt;\"\", \"method\"=&gt;\"post\", \"controller\"=&gt;\"call_track\", \"action\"=&gt;\"associate\"}\n</code></pre>\n\n<p>Select tag in question:</p>\n\n<pre><code>select_tag :id, options_for_select(@project_job_selector),{:onchange =&gt; 'this.form.submit();', include_blank: true}\n</code></pre>\n\n<p>@project_job_selector:</p>\n\n<pre><code>def cache_jobs\n\n    @root_jobs = Job.where(active:true,parent_id: nil).order(\"name\")\n\n    @project_job_selector = []\n\n    @root_jobs.each {|job|\n      if job.children.size &gt; 0\n        addmain=0\n        job.children.each {|child|\n          if (child.active?)\n            addmain+=1\n          end\n        }\n        name = (addmain &gt;= 1 ? job.name + ' (Main Job)' : job.name )\n      else\n        name = job.name\n      end\n      @project_job_selector &lt;&lt; [name, job.id]\n      job.children.each {|subjob|\n        @project_job_selector &lt;&lt; ['  -- ' + subjob.name, subjob.id] if subjob.active?\n      }\n    }\n    @project_job_selector\n  end\n</code></pre>\n\n<p>Whole view:</p>\n\n<pre><code>&lt;script&gt;\n  $(document).ready(function() {\n  $('#call_track_table').DataTable({\n      responsive: true,\n      scrollY: 400,\n      paging: false\n  });\n  } );\n\n  $(function() {\n      $(\"#dialog\").dialog({\n          autoOpen: false,\n          modal: true,\n          width: ($(window).width() - 300),\n          height: ($(window).height() - 100),\n          buttons: {\n              'Cancel': function() {\n                  $(this).dialog('close');\n              }\n          }\n      });\n      $(\".dialogify\").on(\"click\", function(e) {\n          e.preventDefault();\n          $(\"#dialog\").html(\"\");\n          $(\"#dialog\").dialog(\"option\", \"title\", \"Loading....\").dialog(\"open\");\n          $(\"#dialog\").load(this.href, function() {\n              $(this).dialog(\"option\", \"title\", 'Edit Task');\n              $(this).find(\"title\").remove();\n          });\n      });\n  });\n&lt;/script&gt;\n&lt;h1&gt;Live Call Track&lt;/h1&gt;\n&lt;%= form_tag(controller: :call_track, action: :associate, method: :post) do %&gt;\n&lt;table id=\"call_track_table\" class=\"display responsive no-wrap\" cellspacing=\"0\" width=\"100%\" &gt;\n    &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Date&lt;/th&gt;\n      &lt;th&gt;Start Time&lt;/th&gt;\n      &lt;th&gt;Duration&lt;/th&gt;\n      &lt;th&gt;Extension&lt;/th&gt;\n      &lt;th&gt;Direction&lt;/th&gt;\n      &lt;th&gt;Support Call&lt;/th&gt;\n      &lt;th&gt;Dialed Number&lt;/th&gt;\n      &lt;th&gt;Caller ID&lt;/th&gt;\n      &lt;th&gt;Project&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;/thead&gt;\n    &lt;tfoot&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Date&lt;/th&gt;\n      &lt;th&gt;Start Time&lt;/th&gt;\n      &lt;th&gt;Duration&lt;/th&gt;\n      &lt;th&gt;Extension&lt;/th&gt;\n      &lt;th&gt;Direction&lt;/th&gt;\n      &lt;th&gt;Support Call&lt;/th&gt;\n      &lt;th&gt;Dialed Number&lt;/th&gt;\n      &lt;th&gt;Caller ID&lt;/th&gt;\n      &lt;th&gt;Project&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;/tfoot&gt;\n  &lt;tbody&gt;\n\n  &lt;% @rs.each do |call| %&gt;\n\n    &lt;% if User.where(:shoretel_ext =&gt; call['Extension']).present? then username = User.where(:shoretel_ext =&gt; call['Extension']).pluck(:nickname) else username = call['Extension'] end %&gt;\n    &lt;% if User.where(:shoretel_ext =&gt; call['DialedNumber']).present? then dialednumber = User.where(:shoretel_ext =&gt; call['DialedNumber']).pluck(:nickname) else dialednumber = call['DialedNumber'] end %&gt;\n    &lt;% if User.where(:shoretel_ext =&gt; call['CallerID']).present? then callerid = User.where(:shoretel_ext =&gt; call['CallerID']).pluck(:nickname) else callerid = call['CallerID'] end %&gt;\n      &lt;%\n        if username[0].length &gt; 2 then\n          username = username[0]\n        end\n        if dialednumber[0].length &gt; 2 then\n          dialednumber = dialednumber[0]\n        end\n        if callerid[0].length &gt; 2 then\n          callerid = callerid[0]\n        end\n\n      %&gt;\n      &lt;%\n      if call['CallType'] == 'Inbound' then\n        phone = call['CallerID'].to_s\n        phone.slice!(0,2)\n        if Job.where(\"replace(replace(replace(replace(phone_main, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_back, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_cell, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_emergency, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_dsl, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"'\").present? then\n          job = Job.where(\"replace(replace(replace(replace(phone_main, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_back, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_cell, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_emergency, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_dsl, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"'\").pluck(:id)\n          job = job[0].to_i\n        elsif ClientPhone.where(:phone =&gt; phone)\n          job = ClientPhone.where(:phone =&gt; phone).pluck(:client_id)\n          job = job[0].to_i\n        else\n          job = 0\n        end\n\n        if job &gt; 0 then\n          job_name = Job.find_by_id(job)\n          job_name = job_name.name\n        end\n      end\n      if call['CallType'] == 'Outbound' then\n        phone = call['DialedNumber'].to_s\n        phone.slice!(0,2)\n        if Job.where(\"replace(replace(replace(replace(phone_main, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_back, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_cell, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_emergency, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_dsl, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"'\").present? then\n          job = Job.where(\"replace(replace(replace(replace(phone_main, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_back, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_cell, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_emergency, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"' OR replace(replace(replace(replace(phone_dsl, ' ', ''), '-', ''),'(',''),')','') = '\" + phone + \"'\").pluck(:id)\n          job = job[0].to_i\n        elsif ClientPhone.where(:phone =&gt; phone)\n          job = ClientPhone.where(:phone =&gt; phone).pluck(:client_id)\n          job = job[0].to_i\n        else\n          job = 0\n        end\n\n        if job &gt; 0 then\n          job_name = Job.find_by_id(job)\n          job_name = job_name.name\n        end\n      end\n      if call['CallType'] == 'ExtToExt' then\n        job = -1\n      end\n  %&gt;\n      &lt;% if call['Extension'].to_i != 4010 then %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= link_to call['StartTime'].strftime('%Y-%m-%d'), {:controller =&gt; :call_track, :action =&gt; :call_segments, :call_id =&gt; call['ID'] }, class: 'dialogify' %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= call['StartTime'].strftime('%I:%M %p')  %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= TimeDifference.between(call['StartTime'], call['EndTime']).in_minutes %&gt; Minutes&lt;/td&gt;\n    &lt;td&gt;&lt;%= username %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= call['CallType'] %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= if call['WorkgroupCall'] == 1 then 'True' else 'False' end %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= dialednumber  %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= callerid %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= if job == 0 then select_tag :id, options_for_select(@project_job_selector),{:onchange =&gt; 'this.form.submit();', include_blank: true} elsif job == -1 then '' else job_name.to_s end %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;%end%&gt;\n  &lt;%end%&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n    &lt;%end%&gt;\n&lt;div id=\"dialog\"&gt;&lt;/div&gt;\n&lt;br&gt;\n&lt;br&gt;\n&lt;div id=\"historical_form\"&gt;\n\n&lt;/div&gt;\n</code></pre>\n\n<p>this is Rails 4</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "devise-invitable"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7223294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a07b7c2921e0892ef4a718aaff4a6bd?s=128&d=identicon&r=PG&f=1", "display_name": "waffle", "link": "https://stackoverflow.com/users/7223294/waffle"}, "edited": false, "score": 0, "creation_date": 1485566336, "post_id": 41847778, "comment_id": 70993135, "body": "I added current_user.increment!(:invitations_count) to the create action in the invitations controller and that worked.  Thank you!!"}], "tags": [], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1485336264, "creation_date": 1485336264, "answer_id": 41847778, "question_id": 41843238, "link": "https://stackoverflow.com/questions/41843238/increment-invitations-counter-with-devise-invitable/41847778#41847778", "title": "Increment Invitations Counter with Devise Invitable", "body": "<p>An idea would be is to add a column to the <code>devise invitable</code> table</p>\n\n<p>so add a column <code>view_count</code></p>\n\n<p>and then in the controller that fires the call use</p>\n\n<pre><code>@var.increment!(:view_count)\n</code></pre>\n\n<p>Now you would be able to use the <code>view_count</code> and put a condition around it, as it would increment every time the action is called.</p>\n"}], "owner": {"reputation": 43, "user_id": 7223294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/5a07b7c2921e0892ef4a718aaff4a6bd?s=128&d=identicon&r=PG&f=1", "display_name": "waffle", "link": "https://stackoverflow.com/users/7223294/waffle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 41847778, "answer_count": 1, "score": 1, "last_activity_date": 1485336264, "creation_date": 1485317429, "question_id": 41843238, "link": "https://stackoverflow.com/questions/41843238/increment-invitations-counter-with-devise-invitable", "title": "Increment Invitations Counter with Devise Invitable", "body": "<p>I am trying to test my application with Devise Invitable to run out of invitations (reach invitation limit) but I cannot get the invitations count to increment at all.  Does anyone know how this works?</p>\n"}, {"tags": ["ruby", "chef-infra", "databags"], "comments": [{"owner": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "edited": false, "score": 0, "creation_date": 1485325250, "post_id": 41843162, "comment_id": 70873875, "body": "Could you post your code snippet? Have you tried to create data bag and items separately? Like <a href=\"https://github.com/berkshelf/ridley#data-bag-resource\" rel=\"nofollow noreferrer\">described in documentation</a>?"}, {"owner": {"reputation": 324, "user_id": 2881055, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8169d2d8a50adcf5e923478713260887?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/2881055/ram"}, "reply_to_user": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "edited": false, "score": 0, "creation_date": 1485367545, "post_id": 41843162, "comment_id": 70900955, "body": "Databag already exists in chef server....I want to find the databag and insert items in it...However I cannot find the data bag using ridley.data_bag.find(&quot;databag_name&quot;)"}], "owner": {"reputation": 324, "user_id": 2881055, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/8169d2d8a50adcf5e923478713260887?s=128&d=identicon&r=PG&f=1", "display_name": "Ram", "link": "https://stackoverflow.com/users/2881055/ram"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1485318503, "creation_date": 1485316836, "last_edit_date": 1485318503, "question_id": 41843162, "link": "https://stackoverflow.com/questions/41843162/ridley-create-databag-using-json-file", "title": "Ridley create databag using json file", "body": "<p>I'm having hard time to create data bags using ridley gem. My json file looks like below</p>\n\n<pre><code>{\n  \"name\": \"users\",\n  \"json_class\": \"Chef::DataBagItem\",\n  \"chef_type\": \"data_bag_item\",\n  \"data_bag\": \"databag_name\",\n  \"raw_data\": {\n    \"id\": \"users\",\n    \"list\": {\n      \"user1\": {\n        \"password\": \"&lt;%= password %&gt;\",\n        \"permission\": \"readwrite\"\n      },\n      \"user2\": {\n        \"password\": \"&lt;%= password %&gt;\",\n        \"permission\": \"readonly\"\n      },\n      \"user3\": {\n        \"password\": \"&lt;%= password %&gt;\",\n        \"permission\": \"readwrite\"\n      }\n    }\n  }\n}\n</code></pre>\n\n<p>I'm trying to create it using <code>ridley.data_bag.from_json</code> method but it creates a empty databag without any items.</p>\n\n<p>I'm having hard time to find the data bag as well. <code>ridley.data_bag.find(\"databag_name\")</code> it is returning a empty object</p>\n\n<pre><code>=&gt; #&lt;Ridley::DataBagObject chef_id:, attributes:#&lt;VariaModel::Attributes name=nil&gt;&gt;\n</code></pre>\n\n<p>I know that the data bag exists in chef server and I can read it using knife. </p>\n"}, {"tags": ["java", "ruby", "appium", "calabash"], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 8797453, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SVHW9LykaCc/AAAAAAAAAAI/AAAAAAAAHqA/Few4ZXbr64Y/photo.jpg?sz=128", "display_name": "JC .", "link": "https://stackoverflow.com/users/8797453/jc"}, "is_accepted": false, "score": 1, "last_activity_date": 1513282286, "creation_date": 1513282286, "answer_id": 47821316, "question_id": 41843074, "link": "https://stackoverflow.com/questions/41843074/migrate-from-calabashruby-to-appiumjava/47821316#47821316", "title": "Migrate from Calabash(Ruby) to Appium(Java)", "body": "<p>You have to rewrite completely. There is no tool which does this. </p>\n"}], "owner": {"reputation": 21, "user_id": 7467032, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-8yYJ2QOQVrI/AAAAAAAAAAI/AAAAAAAAG0o/z-gRdnH5VJY/photo.jpg?sz=128", "display_name": "Sumit Chaturvedi", "link": "https://stackoverflow.com/users/7467032/sumit-chaturvedi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1555617800, "creation_date": 1485316104, "question_id": 41843074, "link": "https://stackoverflow.com/questions/41843074/migrate-from-calabashruby-to-appiumjava", "title": "Migrate from Calabash(Ruby) to Appium(Java)", "body": "<p>We're currently using Calabash to automate mobile apps on Android and iOS. As calabash only supports ruby, entire code base is written in ruby. \nNow we want to migrate to Appium using Java bindings. Having said that, we want we reuse as much as possible. We are using cucumber for Appium so that we can reuse Feature files as is its. </p>\n\n<p>Is there any tool (open source or commercial) that we can use to covert our ruby code to Java?</p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "watir-webdriver", "browserstack"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "edited": false, "score": 0, "creation_date": 1485361915, "post_id": 41843437, "comment_id": 70897231, "body": "Thanks for the feedback ....  made the stated change. I am now using @browser - Watir::Browser.new :chrome.   I now have the error : uninitialized constant Watir (NameError). I made the change in the env.rb  and step def .rb file /"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "edited": false, "score": 0, "creation_date": 1485364877, "post_id": 41843437, "comment_id": 70899255, "body": "It sounds like you are missing a <code>require &#39;watir&#39;</code>. Is this a brand new Cucumber test suite or are you trying to migrate an existing Selenium one to Watir?"}, {"owner": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "edited": false, "score": 0, "creation_date": 1485375192, "post_id": 41843437, "comment_id": 70905310, "body": "I am trying to migrate Selenium to waiter"}, {"owner": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "edited": false, "score": 0, "creation_date": 1485375848, "post_id": 41843437, "comment_id": 70905671, "body": "I added the require watir as well as other required gems. error:uninitialized constant Watir::WebDriver (NameError) .is there a way to upload myenv.rb and step file to this discussion ? I don&#39;t see that feature  on Stack over flow"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "edited": false, "score": 0, "creation_date": 1485378992, "post_id": 41843437, "comment_id": 70907309, "body": "You can just edit the question to include the relevant code. Note that you just need to provide enough code to reproduce the problem."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 2, "last_activity_date": 1485318748, "creation_date": 1485318748, "answer_id": 41843437, "question_id": 41842975, "link": "https://stackoverflow.com/questions/41842975/error-ndefined-method-text-field-for-seleniumwebdriver/41843437#41843437", "title": "Error - ndefined method `text_field&#39; for #&lt;Selenium::WebDriver:", "body": "<p>The exception suggests that <code>@browser</code> is a <code>Selenium::WebDriver::Driver</code>. To use Watir's <code>text_field</code> method, <code>@browser</code> needs to be a <code>Watir::Browser</code> (or a <code>Watir::Element</code>).</p>\n\n<p>You are likely opening the browser with a line like:</p>\n\n<pre><code>@browser = Selenium::WebDriver.for :chrome\n</code></pre>\n\n<p>However, to use Watir, the browser should be opened like:</p>\n\n<pre><code>@browser = Watir::Browser.new :chrome\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "edited": false, "score": 0, "creation_date": 1485973396, "post_id": 41984266, "comment_id": 71151483, "body": "Thanks for your response.  I need to convert the ruby selenium to ruby watir-webdriver as you mentions. I changed the notation from Selenium::Webdrive to Watir Webdrive in my env.rb file ......... as provided below"}, {"owner": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "edited": false, "score": 0, "creation_date": 1485973595, "post_id": 41984266, "comment_id": 71151606, "body": "My  cucumber Step def looks like this ..@browser.goto &quot;<a href=\"https://multi-tenant-dev-1.gridasaservice.com/login?timeout=true\" rel=\"nofollow noreferrer\">multi-tenant-dev-1.gridasaservice.com/login?timeout=true</a>&quot;"}, {"owner": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "edited": false, "score": 0, "creation_date": 1485973684, "post_id": 41984266, "comment_id": 71151653, "body": "The command line that executes the script  Browser ...cucumber BS_USERNAME=kevinclarke2 BS_AUTHKEY=5AyLAPWXEESrJLd3kCM9 SELENIUM_PLATFORM=WINDOWS SELENIUM_BROWSER=CHROME"}, {"owner": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "edited": false, "score": 0, "creation_date": 1485973884, "post_id": 41984266, "comment_id": 71151762, "body": "Watir-webdriver is amog the installed gems in the project."}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1485975007, "post_id": 41984266, "comment_id": 71152361, "body": "Watir-Webdriver has been moved to Watir. There should be no reason to be using Watir-Webdriver."}, {"owner": {"reputation": 313, "user_id": 2695818, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/71321de399d47802a3bc1636d4addc64?s=128&d=identicon&r=PG&f=1", "display_name": "yudi2312", "link": "https://stackoverflow.com/users/2695818/yudi2312"}, "edited": false, "score": 1, "creation_date": 1485975671, "post_id": 41984266, "comment_id": 71152729, "body": "just include code present in your env.rb file in the question."}], "tags": [], "owner": {"reputation": 313, "user_id": 2695818, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/71321de399d47802a3bc1636d4addc64?s=128&d=identicon&r=PG&f=1", "display_name": "yudi2312", "link": "https://stackoverflow.com/users/2695818/yudi2312"}, "is_accepted": false, "score": 0, "last_activity_date": 1485964926, "creation_date": 1485964926, "answer_id": 41984266, "question_id": 41842975, "link": "https://stackoverflow.com/questions/41842975/error-ndefined-method-text-field-for-seleniumwebdriver/41984266#41984266", "title": "Error - ndefined method `text_field&#39; for #&lt;Selenium::WebDriver:", "body": "<p>As mentioned by Justin, you're using method text_field which is not available in selenium webdriver. Use below code to make this work:</p>\n\n<pre><code>require 'watir-webdriver'\n@browser = Watir::Browser.new :chrome\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7466955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68d20f031c2a566e9660afb896a23f87?s=128&d=identicon&r=PG&f=1", "display_name": "kclarke", "link": "https://stackoverflow.com/users/7466955/kclarke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1485964926, "creation_date": 1485315391, "question_id": 41842975, "link": "https://stackoverflow.com/questions/41842975/error-ndefined-method-text-field-for-seleniumwebdriver", "title": "Error - ndefined method `text_field&#39; for #&lt;Selenium::WebDriver:", "body": "<p>Using: Ruby Cucumber Watir\nrunning the following Browser Stack Command line - \ncucumber BS_USERNAME=XXX BS_AUTHKEY=XXX SELENIUM_PLATFORM=WINDOWS SELENIUM_BROWSER=CHROME\nThe error points to the following line -</p>\n\n<p>@browser.text_field(:id => 'uname').when_present.set 'xxxxxxx'</p>\n\n<p>Note:I tried appending the @browser with @element = @browser. Got the same error. The file structure in Ruby mine appears to be fine. Any insight would be greatly appreciated...</p>\n"}, {"tags": ["ruby", "sqlite"], "answers": [{"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": true, "score": 1, "last_activity_date": 1485317127, "creation_date": 1485317127, "answer_id": 41843206, "question_id": 41842793, "link": "https://stackoverflow.com/questions/41842793/creating-a-sqlite-table-with-dynamically-generated-fields/41843206#41843206", "title": "Creating a Sqlite table with dynamically generated fields", "body": "<p>Just remove the</p>\n\n<pre><code>&lt;&lt;-SQL\nSQL\n</code></pre>\n\n<p>These are not part of the string but \"quotes\" for a multiline string.</p>\n\n<p>Both of these strings have the content <code>hello</code></p>\n\n<pre><code>\"hello\"\n\n&lt;&lt;-SQL\nhello\nSQL\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 6182233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/577820497888/picture?type=large", "display_name": "Mitch Kroska", "link": "https://stackoverflow.com/users/6182233/mitch-kroska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 296, "favorite_count": 0, "accepted_answer_id": 41843206, "answer_count": 1, "score": 1, "last_activity_date": 1485317127, "creation_date": 1485314166, "question_id": 41842793, "link": "https://stackoverflow.com/questions/41842793/creating-a-sqlite-table-with-dynamically-generated-fields", "title": "Creating a Sqlite table with dynamically generated fields", "body": "<h2>I'm using the sqlite3 gem in ruby, and here is the example the gems github gives:</h2>\n\n<pre><code>require \"sqlite3\"\n\n# Open a database\ndb = SQLite3::Database.new \"test.db\"\n\n# Create a table\nrows = db.execute &lt;&lt;-SQL\n  create table numbers (\n    name varchar(30),\n    val int\n  );\nSQL\n</code></pre>\n\n<h3>here is my implementation where I try to replace the argument of db.execute with a dynamically generated string</h3>\n\n<pre><code>require \"sqlite3\"\n\ndb_params = {\n    db_name: \"house-reps\", \n    tables: \n        [\n            {\n                table_name: \"house-reps-party\",\n                table_fields: [\n                    \"region varchar(30)\",\n                    \"congress int\",\n                    \"year int\",\n                    \"party varchar(30)\",\n                    \"percent int\",\n                    \"seats int\"\n                ]\n            }\n        ]\n}\ndef init_db(db_params)\n    tables = db_params[:tables]\n\n    db = SQLite3::Database.new \"#{db_params[:db_name]}\"\n    tables.each do |table|\n        db.execute(\"&lt;&lt;-SQL\\n  create table #{table[:table_name]} (\\n   #{table[:table_fields].join(\",\\n    \")}\\n   );\\nSQL\")\n    end\nend\n\ninit_db(db_params)\n</code></pre>\n\n<h3>Here is the output of the string interpolation:</h3>\n\n<pre><code>&lt;&lt;-SQL\n  create table party-total (\n   region varchar(30),\n    congress int,\n    year int,\n    party varchar(30),\n    percent int,\n    seats int\n   );\nSQL\n</code></pre>\n\n<h3>But when I run the program it gives me this:</h3>\n\n<pre><code>/usr/local/lib/ruby/gems/2.4.0/gems/sqlite3-1.3.13/lib/sqlite3/database.rb:91:in `initialize': near \"&lt;&lt;\": syntax error (SQLite3::SQLException)\n    from /usr/local/lib/ruby/gems/2.4.0/gems/sqlite3-1.3.13/lib/sqlite3/database.rb:91:in `new'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/sqlite3-1.3.13/lib/sqlite3/database.rb:91:in `prepare'\n    from /usr/local/lib/ruby/gems/2.4.0/gems/sqlite3-1.3.13/lib/sqlite3/database.rb:137:in `execute'\n    from database.rb:25:in `block in init_db'\n    from database.rb:23:in `each'\n    from database.rb:23:in `init_db'\n    from database.rb:29:in `&lt;main&gt;'\n</code></pre>\n\n<h3>I'm guessing it has to do with how db.execute is called. i've tried it these ways:</h3>\n\n<pre><code>db.execute(\"&lt;&lt;-SQL\\n  create table #{table[:table_name]} (\\n   #{table[:table_fields].join(\",\\n    \")}\\n   );\\nSQL\")\n\ndb.execute \"&lt;&lt;-SQL\\n  create table #{table[:table_name]} (\\n   #{table[:table_fields].join(\",\\n    \")}\\n   );\\nSQL\"\n\ndb.execute &lt;&lt;-SQL \"\\n  create table #{table[:table_name]} (\\n   #{table[:table_fields].join(\",\\n    \")}\\n   );\\n\" SQL\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "edited": false, "score": 0, "creation_date": 1485313956, "post_id": 41842615, "comment_id": 70870347, "body": "Render partial should work. <code>chatbox.append(&quot;&lt;%= j render(:partial =&gt; &#39;msgs&#47;msg&#39;) %&gt;&quot;);</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485316976, "post_id": 41842615, "comment_id": 70871096, "body": "The error is talking about something other than the <code>msg</code> variable. Also, you shouldn&#39;t need to pass variables in this way, you can try passing <code>binding</code> and then accessing the instance variables from the partial (which are shared)"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "reply_to_user": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "edited": false, "score": 0, "creation_date": 1485319864, "post_id": 41842615, "comment_id": 70871847, "body": "@HoMan it doesn&#39;t work. Do you know another way?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485319965, "post_id": 41842615, "comment_id": 70871883, "body": "@maxple feel free to post an answer, with something I can try"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1485320312, "post_id": 41842615, "comment_id": 70871979, "body": "Why are you using this erubis eruby method and not rails standard render?"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485321978, "post_id": 41842615, "comment_id": 70872519, "body": "@maxple I updated my question"}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485350020, "post_id": 41842615, "comment_id": 70888670, "body": "@maxple unfortunately that doesn&#39;t solve my problem. Please let me know if you have a solution to the problem above. Thanks!"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1485361987, "post_id": 41842615, "comment_id": 70897276, "body": "<code>&lt;%= @msg %&gt; = data.msg</code> this is not going to work, because the ERB is only evaluated when the server sends the page and the Javascript is continually running on the browser."}, {"owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485362857, "post_id": 41842615, "comment_id": 70897899, "body": "@maxple okay, thank you so much for the explanation - I&#39;ll try to figure out  another way."}], "answers": [{"tags": [], "owner": {"reputation": 663, "user_id": 1178692, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/SmbaO.jpg?s=128&g=1", "display_name": "CrypTech Studios", "link": "https://stackoverflow.com/users/1178692/cryptech-studios"}, "is_accepted": false, "score": 0, "last_activity_date": 1486823267, "creation_date": 1486823267, "answer_id": 42177013, "question_id": 41842615, "link": "https://stackoverflow.com/questions/41842615/append-ruby-partial-in-javascript-and-pass-a-rails-variable/42177013#42177013", "title": "Append ruby partial in javascript, and pass a rails variable", "body": "<p>do you have a \"messages_helper.rb\" file with the following</p>\n\n<pre><code>module MessagesHelper\n  def self_or_other(message)\n    message.user == current_user ? \"self\" : \"other\"\n  end\n\n  def message_interlocutor(message)\n    message.user == message.conversation.sender ? message.conversation.sender : message.conversation.recipient\n  end\nend\n</code></pre>\n\n<p>This is where it's defined.</p>\n"}], "owner": {"reputation": 911, "user_id": 5079196, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/UWfbG.jpg?s=128&g=1", "display_name": "gwalshington", "link": "https://stackoverflow.com/users/5079196/gwalshington"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 538, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1486823267, "creation_date": 1485312870, "last_edit_date": 1485321943, "question_id": 41842615, "link": "https://stackoverflow.com/questions/41842615/append-ruby-partial-in-javascript-and-pass-a-rails-variable", "title": "Append ruby partial in javascript, and pass a rails variable", "body": "<p>Creating a chat component with ActionCable in Rails5.  I learned today that render partial, even in .js.erb does supposedly doesn't work. <code>render</code> specifically is the issue.  So now I'm trying to call a partial, and pass a ruby variable to it. </p>\n\n<p>I have tried many things, currently this is how I'm trying to accomplish it:</p>\n\n<pre><code>chatbox.append(&lt;%= j (Erubis::Eruby.new(File.read(File.join(Rails.root, 'app/views/msgs',\n        '_msg.html.erb'))).result(msg: @msg)) %&gt;);\n</code></pre>\n\n<p>and the error is </p>\n\n<pre><code> undefined method `self_or_other' for #&lt;Erubis::Eruby:0x007f832bbb8590&gt;\n</code></pre>\n\n<p>So the partial is there, but the variable is not correct.</p>\n\n<hr>\n\n<p>views/msgs/_msg.html.erb</p>\n\n<pre><code>&lt;li class=\"&lt;%=  self_or_other(msg) %&gt;\"&gt;\n  &lt;div class=\"avatar\"&gt;\n    &lt;%# if msg_interlocutor(msg).avatar.url(:thumb) == \"thumb/missing.png\" %&gt;\n    &lt;%= image_tag(msg_interlocutor(msg).avatar.url(:thumb), class: \"convoPic\")%&gt;\n&lt;/div&gt;\n&lt;/li&gt;\n</code></pre>\n\n<p>I also tried:</p>\n\n<pre><code>chatbox.append(&lt;%= j (Msg.new(File.read(File.join(Rails.root, 'app/views/msgs',\n        '_msg.html.erb'))).result(msg: @msg)) %&gt;);\n</code></pre>\n\n<p>And get this error:\n<code>When assigning attributes, you must pass a hash as an argument.</code></p>\n\n<p>Trying with render:</p>\n\n<pre><code>App.msgs = App.cable.subscriptions.create('MsgsChannel', {  \n  received: function(data) {\n    var chatbox = \"#chatbox_\" + data.convo + \" .chatboxcontent\"\n    var id = data.convo;\n    var sender_id = data.user.id;\n    var reciever_id = data.receiver;\n    &lt;%= @msg %&gt; = data.msg\n    $(chatbox).append(\"&lt;%= escape_javascript render(:partial =&gt; 'msgs/msg', :locals =&gt; { :msg =&gt; @msg }) %&gt;\");\n\n    chatbox.scrollTop(chatbox[0].scrollHeight);\n  },\n  renderMsg: function(data) {\n    console.log(data)\n  }\n});\n</code></pre>\n\n<p>And error I receive:</p>\n\n<pre><code>undefined method `render' for #&lt;#&lt;Class:0x007fe976b5c180&gt;:0x007fe9773ed470&gt;\n</code></pre>\n\n<p>How do I properly call in a partial, pass it a ruby variable (with the msg record). Thank you!!</p>\n"}, {"tags": ["ruby", "httpclient", "ntlm"], "comments": [{"owner": {"reputation": 33, "user_id": 7427392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oV0ocAjnd2Q/AAAAAAAAAAI/AAAAAAAAAHs/qW6xcvt-Vro/photo.jpg?sz=128", "display_name": "Leigh K", "link": "https://stackoverflow.com/users/7427392/leigh-k"}, "edited": false, "score": 0, "creation_date": 1485323407, "post_id": 41842480, "comment_id": 70873090, "body": "NB:  I have gotten the raw example that comes with rubyntlm to work, so it is clearly an issue with my code or HTTPClient"}], "answers": [{"tags": [], "owner": {"reputation": 33, "user_id": 7427392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oV0ocAjnd2Q/AAAAAAAAAAI/AAAAAAAAAHs/qW6xcvt-Vro/photo.jpg?sz=128", "display_name": "Leigh K", "link": "https://stackoverflow.com/users/7427392/leigh-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1485400598, "creation_date": 1485400598, "answer_id": 41865376, "question_id": 41842480, "link": "https://stackoverflow.com/questions/41842480/ruby-httpclient-ntlm/41865376#41865376", "title": "ruby httpclient &amp; NTLM", "body": "<p>False Alarm - as it turns out there were problems with the web server communicating with the domain controller so it was messing up authentication.  I removed and re-added it to the domain and all is fine now!</p>\n"}], "owner": {"reputation": 33, "user_id": 7427392, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-oV0ocAjnd2Q/AAAAAAAAAAI/AAAAAAAAAHs/qW6xcvt-Vro/photo.jpg?sz=128", "display_name": "Leigh K", "link": "https://stackoverflow.com/users/7427392/leigh-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 405, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485400598, "creation_date": 1485311722, "last_edit_date": 1485314899, "question_id": 41842480, "link": "https://stackoverflow.com/questions/41842480/ruby-httpclient-ntlm", "title": "ruby httpclient &amp; NTLM", "body": "<p>I am trying to do what look simple but clearly isn't - authenticate with NTLM. </p>\n\n<p>The example in the documentation (<a href=\"http://www.rubydoc.info/gems/httpclient/2.1.5.2/HTTPClient\" rel=\"nofollow noreferrer\">http://www.rubydoc.info/gems/httpclient/2.1.5.2/HTTPClient</a>) looks straightforward, but when I try it I always get a 401.</p>\n\n<p>I created a simple website in IIS whch requires NTLM.  I tested this works in IE &amp; chrome.  </p>\n\n<p>I then</p>\n\n<pre><code>require 'httpclient'\nrequire 'pp'\nrequire 'kconv'    #seemed to be needed due to a bug..\nrequire 'rubyntlm' # probably not needed directly?  \n\ndomain = 'http://qvcluster1/'\nurl = 'http://qvcluster1/default.htm'\nuser = 'testuser'\npassword = 'testpassword'\nclient = HTTPClient.new\nclient.set_auth(nil ,user,password)\nr = client.get(\"http://qvcluster1/default.htm\")\npp r\n</code></pre>\n\n<p>From my understanding there is not much more to it, yet it is failing </p>\n\n<p>this is the tail end of what I get from the last line:</p>\n\n<pre><code>@reason_phrase=\"Unauthorized\",\n@request_absolute_uri=nil,\n@request_method=\"GET\",\n@request_query=nil,\n@request_uri=#&lt;URI::HTTP http://qvcluster1/default.htm&gt;,\n@status_code=401&gt;,\n</code></pre>\n\n<p>Any suggestions are appreciated !</p>\n\n<p>As an aside, I just tested from curl and this works fine:</p>\n\n<pre><code>\"C:\\Program Files\\cURL\\bin\\curl.exe\" --ntlm  -u testuser:testpassword http://qvcluster1/default.htm\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "session", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4154, "user_id": 3123370, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7856610653d1a0b44bf049c3d20b2a68?s=128&d=identicon&r=PG", "display_name": "MilesStanfield", "link": "https://stackoverflow.com/users/3123370/milesstanfield"}, "edited": false, "score": 0, "creation_date": 1485328449, "post_id": 41842278, "comment_id": 70875261, "body": "Did you mess with config/initializers/session_store.rb ? Take a look at this SO answer <a href=\"http://stackoverflow.com/questions/8537332/session-data-disappearing\" title=\"session data disappearing\">stackoverflow.com/questions/8537332/session-data-disappearin&zwnj;&#8203;g</a>"}, {"owner": {"reputation": 1050, "user_id": 260670, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b5fdc7d34f3ec9b11a13d10fc548fdd5?s=128&d=identicon&r=PG&f=1", "display_name": "Midwire", "link": "https://stackoverflow.com/users/260670/midwire"}, "edited": false, "score": 0, "creation_date": 1485359416, "post_id": 41842278, "comment_id": 70895436, "body": "I would start by writing a functional test to check that the session data is persisted across requests? That process will help you figure out what is going on."}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 7034332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10df7e6b27212f66f5ad5ce09b8eb5d9?s=128&d=identicon&r=PG&f=1", "display_name": "benjaminhyw", "link": "https://stackoverflow.com/users/7034332/benjaminhyw"}, "is_accepted": true, "score": 1, "last_activity_date": 1485384489, "creation_date": 1485384489, "answer_id": 41863120, "question_id": 41842278, "link": "https://stackoverflow.com/questions/41842278/rails-5-sessions-not-persisting/41863120#41863120", "title": "Rails 5 sessions not persisting", "body": "<p>I found out what my problem was.  In my application.html.erb, my logout link was incorrect and was forcing my user to logout immediately after logging them in.</p>\n\n<p>I had <code>&lt;%= link_to \"LOGOUT\", logout %&gt;</code> when it should've been <code>&lt;%= link_to \"LOGOUT\", logout_path, method: :delete %&gt;</code>.</p>\n"}], "owner": {"reputation": 15, "user_id": 7034332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10df7e6b27212f66f5ad5ce09b8eb5d9?s=128&d=identicon&r=PG&f=1", "display_name": "benjaminhyw", "link": "https://stackoverflow.com/users/7034332/benjaminhyw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1143, "favorite_count": 0, "accepted_answer_id": 41863120, "answer_count": 1, "score": 0, "last_activity_date": 1485384489, "creation_date": 1485310165, "question_id": 41842278, "link": "https://stackoverflow.com/questions/41842278/rails-5-sessions-not-persisting", "title": "Rails 5 sessions not persisting", "body": "<p>I'm having trouble getting my sessions to persist.  </p>\n\n<p>I am able to login/register a user fine, but the session disappears when my user clicks on any link in my application.  I read a few other StackOverflows that said I needed <code>protect_from_forgery with: :exception</code> within my ApplicationController, which is there.. and also that I needed <code>&lt;%= csrf_meta_tags %&gt;</code> within my application.html.erb layout, which is also there.  So, I'm a little lost.</p>\n\n<p>My sessions_controller.rb:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    user = User.find_by(username: params[:session][:username])\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      #Log the user in and redirect to the user's show page (for now)\n      log_in user\n      redirect_to user_path(user)\n    else\n      flash.now[:danger] = 'Invalid username/password combination'\n      render 'new'\n    end\n  end\n\n  def destroy\n    logout\n  end\nend\n</code></pre>\n\n<p>my sessions_helper.rb:</p>\n\n<pre><code>module SessionsHelper\n\n  # Logs in the given user.\n  def log_in(user)\n    session[:user_id] = user.id\n  end\n\n  # Returns the current logged-in user (if there is one).\n  def current_user\n    @current_user ||= User.find_by(id: session[:user_id])\n  end\n\n  # Returns true if user is successfully logged in.\n  def logged_in?\n    !current_user.nil?\n  end\n\n  # Logs out current user.\n  def logout\n    session.delete(:user_id)\n    @current_user = nil\n  end\nend\n</code></pre>\n\n<p>my application_controller.rb:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  include SessionsHelper\nend\n</code></pre>\n\n<p>and finally, my application.html.erb</p>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;RailsOnlineShop&lt;/title&gt;\n    &lt;%= csrf_meta_tags %&gt;\n\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n  &lt;/head&gt;\n\n  &lt;body&gt;\n  &lt;% if logged_in?%&gt;\n    &lt;%= link_to \"HOME\", items_path %&gt; | &lt;%= link_to \"PROFILE\", current_user %&gt; | &lt;%= link_to \"LOGOUT\", logout %&gt;\n  &lt;% else %&gt;\n    &lt;%= link_to \"HOME\", items_path %&gt; | &lt;%= link_to \"REGISTER\", new_user_path %&gt; | &lt;%= link_to \"LOGIN\", login_path %&gt;\n  &lt;% end %&gt;\n    &lt;%= yield %&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I feel like I've checked everywhere that makes sense, but I could be missing something.</p>\n"}, {"tags": ["ruby", "string", "enumeration", "string-interpolation"], "comments": [{"owner": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 1, "creation_date": 1485307915, "post_id": 41841929, "comment_id": 70868954, "body": "<code>&quot;Today I have todo: \\n\\t#{todos.join(&quot;\\n&quot;)}&quot;</code>"}, {"owner": {"reputation": 195, "user_id": 6182233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/577820497888/picture?type=large", "display_name": "Mitch Kroska", "link": "https://stackoverflow.com/users/6182233/mitch-kroska"}, "reply_to_user": {"reputation": 6898, "user_id": 2012487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9631fa1981d36a3b5f71426c821a8064?s=128&d=identicon&r=PG", "display_name": "Aguardientico", "link": "https://stackoverflow.com/users/2012487/aguardientico"}, "edited": false, "score": 0, "creation_date": 1485311065, "post_id": 41841929, "comment_id": 70869697, "body": "thanks, this worked perfectly; exactly what I needed."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1485308322, "creation_date": 1485308322, "answer_id": 41842038, "question_id": 41841929, "link": "https://stackoverflow.com/questions/41841929/enumerate-inside-a-string/41842038#41842038", "title": "Enumerate inside a string", "body": "<p>You're expecting <code>#{...}</code> to work like ERB's <code>&lt;%...%&gt;</code> or even PHP's <code>&lt;?php</code> but that's not the case. The string interpolation must contain a complete, syntactically valid Ruby expression, and that bit of code is incomplete.</p>\n\n<p>You can rework that to be a singular expression:</p>\n\n<pre><code>\"Today I have todo: #{todos.join(\"\\t \"}\"\n</code></pre>\n\n<p>Or you can do your iteration manually, though this is often sub-optimal in terms of performance:</p>\n\n<pre><code>todos.each_with_object(\"Today I have todo:\") do |todo, buffer|\n  buffer &lt;&lt; \"\\t \" &lt;&lt; todo\nend\n</code></pre>\n\n<p>As you can see the first version is significantly more concise.</p>\n\n<p>Ruby's string interpolation options are unusually flexible, but they do require the code to be self-contained.</p>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 0, "last_activity_date": 1485309934, "last_edit_date": 1485309934, "creation_date": 1485309199, "answer_id": 41842152, "question_id": 41841929, "link": "https://stackoverflow.com/questions/41841929/enumerate-inside-a-string/41842152#41842152", "title": "Enumerate inside a string", "body": "<p>I assume you want this:</p>\n\n<pre><code>Today I have todo:\n        sleep\n        eat\n        powernap\n</code></pre>\n\n<p>To do this you can use a <a href=\"http://ruby-doc.org/core-2.3.3/Array.html#method-i-map\" rel=\"nofollow noreferrer\">map</a> to wrap each element in a tab and newline, then <a href=\"http://ruby-doc.org/core-2.3.3/Array.html#method-i-join\" rel=\"nofollow noreferrer\">join</a> to turn the strings in the Array into a single string.</p>\n\n<pre><code>todos.map {|todo| \"\\t#{todo}\\n\"}.join(\"\")\n</code></pre>\n\n<p>That will put a newline and tab around each element, and then concatenate each element together. Note that it's using the concatenation by using <code>#{}</code> to embed a variable in the string. It also could have been <code>\"\\t\" + todo + \"\\n\"</code>, that is exactly the same.</p>\n\n<p>The result is:</p>\n\n<pre><code>\"\\tsleep\\n\\teat\\n\\tpowernap\\n\"\n</code></pre>\n\n<p>Then you can concatenate that with the string, nothing special is needed.</p>\n\n<pre><code>puts \"Today I have todo:\\n\" +\n     todos.map {|todo| \"\\t#{todo}\\n\"}.join(\"\") +\n     \"I hope I get them done!\\n\"\n</code></pre>\n\n<p>There's lots of ways to do it, but the important thing is it has to produce a String. <code>each</code> won't work because it will produce an Array and you'll get something like this:</p>\n\n<pre><code>Today I have todo:\n    [\"sleep\", \"eat\", \"powernap\"]\nI hope I get them done!\n</code></pre>\n\n<p>If you want to, you could do this as string interpolation by putting the whole expression into a <code>#{}</code> inside the string. Here's a simpler example that turns the list into a comma-separated string.</p>\n\n<pre><code>puts \"Today I have todo: #{todos.join(\", \")}\\n\"\n</code></pre>\n\n<p>Any expression can go into <code>#{}</code>, but <code>#{}</code> must contain a complete expression! Each <code>#{}</code> will be run on its own and each result will be concatenated into the string.</p>\n"}], "owner": {"reputation": 195, "user_id": 6182233, "user_type": "registered", "accept_rate": 80, "profile_image": "https://graph.facebook.com/577820497888/picture?type=large", "display_name": "Mitch Kroska", "link": "https://stackoverflow.com/users/6182233/mitch-kroska"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 41842038, "answer_count": 2, "score": -1, "last_activity_date": 1485309934, "creation_date": 1485307647, "question_id": 41841929, "link": "https://stackoverflow.com/questions/41841929/enumerate-inside-a-string", "title": "Enumerate inside a string", "body": "<p>I'm trying to enumerate an array inside a string, and have the values of the array interpolate inside of string.</p>\n\n<p>Example:</p>\n\n<pre><code>todos = [\"sleep\", \"eat\", \"powernap\"]\n\n\"Today I have todo: \\n\" +\n'#{todos.each do |todo| }'\n\"\\t #{todo}\" +\n'#{end}'\n</code></pre>\n\n<p>OUTPUT:</p>\n\n<pre><code>\"Today I have todo: \\n\\tsleep\\neat\\npowernap\"\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "string", "each"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485305695, "post_id": 41841655, "comment_id": 70868379, "body": "It&#39;s best to get out of the habit of adding needless code like <code>while x == true</code> or <code>if x == true</code> since <code>while x</code> is almost always going to do the job, especially in the case when <code>any?</code> will only return <code>true</code> or <code>false</code>."}], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "edited": false, "score": 0, "creation_date": 1485306323, "post_id": 41841719, "comment_id": 70868557, "body": "This is a lot more elegant than my code, I will spend some time making sure I understand this. Thank you."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1485306057, "creation_date": 1485306057, "answer_id": 41841719, "question_id": 41841655, "link": "https://stackoverflow.com/questions/41841655/ruby-v-2-3-1-each-method-on-split-array-not-in-any-logical-order/41841719#41841719", "title": "Ruby (v 2.3.1) .each method on .split array not in any logical order", "body": "<p>Here's some ideas on how to make it more conventional in terms of Ruby:</p>\n\n<pre><code>class Lexicon\n  # Declare things that are repeatedly used without being modified as\n  # constants at the class-level.\n  DIRECTIONS = %w[ north south east west down up left right back ]\n\n  def scan(stuff)\n    # Split the string and select all the words that are present\n    # in the DIRECTIONS above.\n    stuff.split.select do |word|\n      DIRECTIONS.include?(word)\n    end.map do |word|\n      # Transform these into [ 'direction', x ] pairs\n      [ 'direction', word ]\n    end\n  end\nend\n</code></pre>\n\n<p>If you structure your code in neat, concise blocks like that, expressing your intent as a series of simple transformations, the code becomes quite easy to follow. Note there's no explicit <code>return</code> necessary here since that operation is returned by default, implicitly.</p>\n\n<p>To exercise it you get this:</p>\n\n<pre><code>testing = Lexicon.new\ntesting.scan(\"north south east west\")\n# =&gt; [[\"direction\", \"north\"], [\"direction\", \"south\"], [\"direction\", \"east\"], [\"direction\", \"west\"]]\n</code></pre>\n\n<p>The <code>p</code> method is really handy at showing the contents of variables, as is the <code>irb</code> tool for testing arbitrary code.</p>\n\n<p>I think a number of problems in your original code came from doing the <em>iterate-and-delete</em> approach versus what should be a <em>filter</em> approach using <code>reject</code> or <code>select</code>. Deleting things from an array you're actively iterating over is often counter-productive, and as deleting things from arrays is actually quite computationally expensive, it's easier to construct a new array of only the elements you want.</p>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1485337146, "post_id": 41841798, "comment_id": 70880260, "body": "It doesn&#39;t get much easier. Note : you could define <code>dirs</code> with a split, and it would perfectly match the question."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1485364095, "last_edit_date": 1485364095, "creation_date": 1485306624, "answer_id": 41841798, "question_id": 41841655, "link": "https://stackoverflow.com/questions/41841655/ruby-v-2-3-1-each-method-on-split-array-not-in-any-logical-order/41841798#41841798", "title": "Ruby (v 2.3.1) .each method on .split array not in any logical order", "body": "<pre><code>dirs = \"north west south east\".split\n  #=&gt; [\"north\", \"west\", \"south\", \"east\"]\n\n[\"direction\"].product(dirs)\n  #=&gt; [[\"direction\", \"north\"], [\"direction\", \"west\"],\n  #    [\"direction\", \"south\"], [\"direction\", \"east\"]] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1485306907, "creation_date": 1485306907, "answer_id": 41841839, "question_id": 41841655, "link": "https://stackoverflow.com/questions/41841655/ruby-v-2-3-1-each-method-on-split-array-not-in-any-logical-order/41841839#41841839", "title": "Ruby (v 2.3.1) .each method on .split array not in any logical order", "body": "<p>If you delete an element from an array, then all the elements to the right of the hole left by the deleted element get shifted to the left to fill the gap.</p>\n\n<p>You are deleting elements from your array <em>while</em> you are iterating over your array. If you only delete elements that you haven't iterated over yet, that will be okay. But if you delete an element that you have already iterated over, then all the elements to the right of the deleted element (including the one you <em>would have</em> iterated over next) get shifted left to fill up the hole left by the deleted element, which leads you to skip the next element.</p>\n\n<p>You should <em>never ever</em> mutate a data structure while iterating over it, unless that is <em>explicitly</em> documented as a safe thing to do.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 5605097, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eda82186347afe472863e0a7e873549e?s=128&d=identicon&r=PG", "display_name": "Pablo Gomez", "link": "https://stackoverflow.com/users/5605097/pablo-gomez"}, "is_accepted": false, "score": 0, "last_activity_date": 1485310531, "creation_date": 1485310531, "answer_id": 41842327, "question_id": 41841655, "link": "https://stackoverflow.com/questions/41841655/ruby-v-2-3-1-each-method-on-split-array-not-in-any-logical-order/41842327#41842327", "title": "Ruby (v 2.3.1) .each method on .split array not in any logical order", "body": "<p>You could take this approach:</p>\n\n<pre><code>\"north west south east\".split.collect { |direction| ['direction', direction] }\n</code></pre>\n\n<p>Spliting your directions into elements of an <strong>Array</strong>, and then collecting them as you asked.</p>\n"}], "owner": {"reputation": 508, "user_id": 2476604, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/HZVR2.png?s=128&g=1", "display_name": "clockworkpc", "link": "https://stackoverflow.com/users/2476604/clockworkpc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1485364095, "creation_date": 1485305611, "question_id": 41841655, "link": "https://stackoverflow.com/questions/41841655/ruby-v-2-3-1-each-method-on-split-array-not-in-any-logical-order", "title": "Ruby (v 2.3.1) .each method on .split array not in any logical order", "body": "<p>I have a simple string:</p>\n\n<blockquote>\n  <p>\"north west south east\"</p>\n</blockquote>\n\n<p>Which I want to <strong>split</strong> into sub-strings and put them as sub-arrays into one array, i.e:</p>\n\n<pre><code>[[\"direction\", \"north\"], [\"direction\", \"south\"], [\"direction\", \"east\"], [\"direction\", \"west\"]]\n</code></pre>\n\n<p>However, the .each method seems neither to work through the elements alphabetically nor in the sequence they were entered.</p>\n\n<p>The .each method seems to work through the split string in this order:</p>\n\n<ol>\n<li>\"north\" (first sub-string) [second alphabetically]  </li>\n<li>\"south\" (thirdsub-string) [third alphabetically] </li>\n<li>\"west\" (second sub-string) [last alphabetically]  </li>\n<li>\"east\" (last sub-string) [first alphabetically]</li>\n</ol>\n\n<p>It definitely does not work through the sub-strings in alphabetical order, nor does it work through them in reverse order, but rather starts with the first sub-string and ends with the last, and <strong>switches</strong> the middle strings.</p>\n\n<p>I just can't work it out.</p>\n\n<p>Here is my code:</p>\n\n<pre><code>class Lexicon\n\n  def scan(stuff)\n\n    words = stuff.split\n\n    #Empty arrays to easily push split words into\n    @direction_array = []\n\n    #Lexicons of different kinds of words\n    @directions = [\"north\", \"south\", \"east\", \"west\", \"down\", \"up\", \"left\", \"right\", \"back\"]\n\n    puts \"This the original set\"\n    print words, \"\\n\"\n\n    while words.any? == true\n      words.each do |word|\n        if @directions.include? word\n          puts \"This is the word I selected: #{word}\"\n          @direction_array.push(['direction', word])\n          words.delete word\n          print @direction_array\n          puts \"This is what remains in the words set: #{words}\"\n        else\n          \"This word does not belong.\"\n          words.delete word\n          # puts \"This is what remains in the words set: #{words}\"\n        end\n      end\n    end\n\n    if @direction_array.any? == true\n      puts \"This is what we have in the direction array:\"\n      print @direction_array, \"\\n\"\n      return @direction_array\n    else\n      puts \"Nothing to show for our efforts\"\n    end\n  end\nend\n\ntesting = Lexicon.new()\ntesting.scan(\"north south east west\")\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "activeadmin"], "owner": {"reputation": 128, "user_id": 2933427, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2df49cd0bafd37c2202d9b795f746431?s=128&d=identicon&r=PG&f=1", "display_name": "David Parker", "link": "https://stackoverflow.com/users/2933427/david-parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 785, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1530279092, "creation_date": 1485303772, "last_edit_date": 1495540027, "question_id": 41841367, "link": "https://stackoverflow.com/questions/41841367/multiple-namespaces-on-rails-activeadmin-issues", "title": "Multiple namespaces on Rails ActiveAdmin issues", "body": "<p>I'm using active_admin and having issues setting up multiple namespaces.</p>\n\n<p>Relevant files:</p>\n\n<p>config/initializers/active_admin.rb:</p>\n\n<pre><code>config.load_paths = [File.join(Rails.root, \"app\", \"active_admin\")]\nconfig.default_namespace = :superadmin\n\nconfig.namespace :superadmin do |superadmin|\n  superadmin.site_title = \"superadmin\"\n  superadmin.authentication_method = :authenticate_superadmin_user!\nend\n\nconfig.namespace :admins do |admins|\n  admins.site_title = \"admins\"\n  admins.authentication_method = :authenticate_admin_user!\nend\n</code></pre>\n\n<p>Then I have two subfolders, <code>/admins</code> and <code>/superadmin</code>:</p>\n\n<p>app/active_admin/superadmin/dashboard:</p>\n\n<pre><code>ActiveAdmin.register_page \"Dashboard\" do\n  ...\n</code></pre>\n\n<p>app/active_admin/superadmin/product_product.rb:</p>\n\n<pre><code>ActiveAdmin.register Product::Product, as: Product do\n  ...\n</code></pre>\n\n<p>So far, so good.</p>\n\n<p>Now, I can't seem to figure out how to add a dashboard for admins (or any other pages/models) without it blowing up.</p>\n\n<p>If I go to <code>localhost:3000/admins</code>, I get the error <code>uninitialized constant Admins::DashboardController</code>.</p>\n\n<p>I've tried adding:</p>\n\n<p>app/active_admin/admins/dashboard.rb:</p>\n\n<pre><code>ActiveAdmin.register_page \"Dashboard do\n  ...\n</code></pre>\n\n<p>(which does nothing)</p>\n\n<p>And namespaced: </p>\n\n<p>app/active_admin/admins/dashboard.rb:</p>\n\n<pre><code>ActiveAdmin.register_page \"Dashboard, namespace: \"admins\" do\n  ...\n</code></pre>\n\n<p>which gives the error:</p>\n\n<pre><code>Invalid route name, already in use: 'admins_root' \nYou may have defined two routes with the same name using the `:as` option, \nor you may be overriding a route already defined by a resource \nwith the same naming\n</code></pre>\n\n<p>I've also tried adding the subfolders in the load_paths:</p>\n\n<pre><code>config.load_paths = [\n  File.join(Rails.root, \"app\", \"active_admin\"),\n  File.join(Rails.root, \"app\", \"active_admin\", \"admins\"),\n  File.join(Rails.root, \"app\", \"active_admin\", \"superadmin\")\n]\n</code></pre>\n\n<p>Please note that I've looked at the following, but none seem to actually work...</p>\n\n<ul>\n<li><a href=\"http://activeadmin.info/docs/1-general-configuration.html#namespaces\" rel=\"nofollow noreferrer\">http://activeadmin.info/docs/1-general-configuration.html#namespaces</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12877139/2-namespaces-of-activeadmin\">2 Namespaces of activeadmin</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12386535/how-to-use-multiple-active-admin-instances-for-complete-separate-models\">How to use multiple Active Admin instances for Complete Separate Models</a></li>\n</ul>\n\n<p>EDIT: </p>\n\n<p>I've also tried to remove <code>config.default_namespace</code> and the only thing that did was break <code>localhost:3000/superadmin</code> so that it has the error:\n<code>uninitialized constant Superadmin::DashboardController</code></p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 512, "user_id": 1816746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/079dff13a686c188ebd12e960ee4ec3e?s=128&d=identicon&r=PG", "display_name": "Wunderbread", "link": "https://stackoverflow.com/users/1816746/wunderbread"}, "edited": false, "score": 0, "creation_date": 1485314973, "post_id": 41842244, "comment_id": 70870632, "body": "To confirm, by &quot;knowing where it is&quot; you are referring to the setup? e.g.     <code>geckodriver = File.join(Dir.pwd, &#39;vendor&#39;, &#39;geckodriver&#39;)</code>"}, {"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "reply_to_user": {"reputation": 512, "user_id": 1816746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/079dff13a686c188ebd12e960ee4ec3e?s=128&d=identicon&r=PG", "display_name": "Wunderbread", "link": "https://stackoverflow.com/users/1816746/wunderbread"}, "edited": false, "score": 0, "creation_date": 1485353283, "post_id": 41842244, "comment_id": 70890997, "body": "Updated answer to explain"}], "tags": [], "owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "is_accepted": true, "score": 1, "last_activity_date": 1485363339, "last_edit_date": 1485363339, "creation_date": 1485309933, "answer_id": 41842244, "question_id": 41841348, "link": "https://stackoverflow.com/questions/41841348/do-i-need-to-have-the-browser-driver-listening-each-time-i-execute-selenium-webd/41842244#41842244", "title": "Do I need to have the browser driver listening each time I execute selenium-webdriver tests locally?", "body": "<p>No, the ruby bindings will start the service as needed as long as it knows where it is. (i.e. if it's in your system's path or you set it manually)</p>\n\n<p>EDIT:</p>\n\n<p>The bindings will look in the environment variable <code>path</code> for the geckodriver executable.</p>\n\n<p>If you don't want to add it to your path, (as of v3.0.2) you can pass in the location of it with the <code>driver_path</code> argument:</p>\n\n<pre><code>Selenium::WebDriver.for(:firefox, driver_path: '/path/to/geckodriver')\n</code></pre>\n"}], "owner": {"reputation": 512, "user_id": 1816746, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/079dff13a686c188ebd12e960ee4ec3e?s=128&d=identicon&r=PG", "display_name": "Wunderbread", "link": "https://stackoverflow.com/users/1816746/wunderbread"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 41842244, "answer_count": 1, "score": 0, "last_activity_date": 1485363339, "creation_date": 1485303664, "question_id": 41841348, "link": "https://stackoverflow.com/questions/41841348/do-i-need-to-have-the-browser-driver-listening-each-time-i-execute-selenium-webd", "title": "Do I need to have the browser driver listening each time I execute selenium-webdriver tests locally?", "body": "<p>Do I need to have the browser driver listening each time I execute selenium-webdriver tests locally?</p>\n\n<p>e.g. Do I need to double click on \"geckodriver\" so that it's listening on 127.0.0.1:4444 (whichever port) so that I can run my selenium-webdriver tests locally?</p>\n\n<p>Note that I am using the RSpec framework.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1485303801, "post_id": 41841328, "comment_id": 70867817, "body": "What kind of database?"}, {"owner": {"reputation": 13, "user_id": 7419034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_qInMZ6kt4g/AAAAAAAAAAI/AAAAAAAAAB4/V3W2kz3A7eM/photo.jpg?sz=128", "display_name": "Matthew Mair", "link": "https://stackoverflow.com/users/7419034/matthew-mair"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1485303873, "post_id": 41841328, "comment_id": 70867837, "body": "@DanFarrell  am using postgresql"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485304038, "post_id": 41841328, "comment_id": 70867892, "body": "Will you ever have a need to search or modify the contents of those records? If so, don&#39;t save them as JSON, create a sub-table for those fields and store the information there. It&#39;s easy to parse JSON to an object and store it, or to take the records, recreate the object and then serialize it back to JSON."}, {"owner": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1485304060, "post_id": 41841328, "comment_id": 70867896, "body": "Awesome.  Postgres will allow you to store JSON directly, and query it. Any reason to bring a Ruby hash into this between form and database?"}, {"owner": {"reputation": 13, "user_id": 7419034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_qInMZ6kt4g/AAAAAAAAAAI/AAAAAAAAAB4/V3W2kz3A7eM/photo.jpg?sz=128", "display_name": "Matthew Mair", "link": "https://stackoverflow.com/users/7419034/matthew-mair"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485305004, "post_id": 41841328, "comment_id": 70868161, "body": "@theTinMan the records are not to be modified but should be searchable. Thought of storing them as a hash and search them using the hash attributes. Any ideas why my code is not working?"}, {"owner": {"reputation": 13, "user_id": 7419034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_qInMZ6kt4g/AAAAAAAAAAI/AAAAAAAAAB4/V3W2kz3A7eM/photo.jpg?sz=128", "display_name": "Matthew Mair", "link": "https://stackoverflow.com/users/7419034/matthew-mair"}, "reply_to_user": {"reputation": 8699, "user_id": 1726083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/757452f7cd7ba2347c667ef9298ceadb?s=128&d=identicon&r=PG", "display_name": "Daniel Farrell", "link": "https://stackoverflow.com/users/1726083/daniel-farrell"}, "edited": false, "score": 0, "creation_date": 1485305188, "post_id": 41841328, "comment_id": 70868219, "body": "@DanFarrell Tried using JSON directly., but I got <code>Return value is: nil</code> from the <code>params.require</code> method"}, {"owner": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "edited": false, "score": 0, "creation_date": 1485308629, "post_id": 41841328, "comment_id": 70869140, "body": "Try doing <code>permit(:items, :total_amount, :transaction_type)</code>? The json is probably not recognized as a hash."}, {"owner": {"reputation": 13, "user_id": 7419034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_qInMZ6kt4g/AAAAAAAAAAI/AAAAAAAAAB4/V3W2kz3A7eM/photo.jpg?sz=128", "display_name": "Matthew Mair", "link": "https://stackoverflow.com/users/7419034/matthew-mair"}, "reply_to_user": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "edited": false, "score": 0, "creation_date": 1485354386, "post_id": 41841328, "comment_id": 70891804, "body": "@HoMan that still gives the same error <code>Unpermitted parameter: items</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485362440, "post_id": 41841328, "comment_id": 70897592, "body": "Yes, Postgres allows storing JSON and querying it, but there&#39;s an added burden in doing so. For search speed and flexibility it&#39;d be best to store the content of the JSON as separate fields. If the JSON doesn&#39;t need to be indexed or individual fields searched or modified, in other words it&#39;s static, then leaving it as a string is fine."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7419034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_qInMZ6kt4g/AAAAAAAAAAI/AAAAAAAAAB4/V3W2kz3A7eM/photo.jpg?sz=128", "display_name": "Matthew Mair", "link": "https://stackoverflow.com/users/7419034/matthew-mair"}, "edited": false, "score": 0, "creation_date": 1485354310, "post_id": 41843730, "comment_id": 70891742, "body": "Hey., I tried your suggestion,but am getting <code>Return value is: nil</code> from the <code>bill_params</code> method."}], "tags": [], "owner": {"reputation": 956, "user_id": 1684772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a0eb44ebf1ed954f1e5022af3d05f1c?s=128&d=identicon&r=PG", "display_name": "Sebin", "link": "https://stackoverflow.com/users/1684772/sebin"}, "is_accepted": false, "score": 0, "last_activity_date": 1485362507, "last_edit_date": 1485362507, "creation_date": 1485320533, "answer_id": 41843730, "question_id": 41841328, "link": "https://stackoverflow.com/questions/41841328/how-to-save-a-javascript-object-as-a-hash-record/41843730#41843730", "title": "How to save a JavaScript object as a hash record", "body": "<p>I think the issue is that <code>items</code> param has a string value, and you are permitting a hash.</p>\n\n<p>First, if there are multiple objects in items, make it an array:</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"bill\"=&gt;{\"items\"=&gt;\"[{\\\"product\\\":\\\"name\\\",\\\"unit_price\\\":10},{\\\"product\\\":\\\"name2\\\",\\\"unit_price\\\":100}]\", \"total_amount\"=&gt;\"215\", \"transaction_type\"=&gt;\"Cash\", \"transaction_id\"=&gt;\"some_id\"}}\n</code></pre>\n\n<p>so that you can permit the keys of objects in the array:</p>\n\n<pre><code>private\n\ndef bill_params\n  params[:bill][:items] = JSON.parse(params[:bill][:items])\n  params.require(:bill).permit(\n   :total_amount, :transaction_type, :transaction_id, items: [:product, :unit_price]\n  )\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7419034, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-_qInMZ6kt4g/AAAAAAAAAAI/AAAAAAAAAB4/V3W2kz3A7eM/photo.jpg?sz=128", "display_name": "Matthew Mair", "link": "https://stackoverflow.com/users/7419034/matthew-mair"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 277, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1485362507, "creation_date": 1485303571, "last_edit_date": 1485303920, "question_id": 41841328, "link": "https://stackoverflow.com/questions/41841328/how-to-save-a-javascript-object-as-a-hash-record", "title": "How to save a JavaScript object as a hash record", "body": "<p>I'm trying to save a hidden text field, which is a dynamically-created JavaScript object, as a hash record in the database. The problem is that the record is being saved with empty hash value. Here is the relevant code and errors from the trails I've made:</p>\n\n<p>form code:</p>\n\n<pre><code>&lt;%= form_for(@bill, remote: true) do |f| %&gt;\n  &lt;div class=\"hidden\"&gt;\n    &lt;%= f.text_field :items %&gt;\n    &lt;%= f.text_field :total_amount %&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>JavaScript code:</p>\n\n<pre><code>// bill_items is the dynamically created object\nvar items = JSON.stringify(bill_items);\n$('#bill_items').val(items); // Setting Input text value\n$('#bill_total_amount').val(bill_total_amount);\n$('form#new_bill').submit();\n</code></pre>\n\n<p>The params that are being passed:</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\",\n \"bill\"=&gt;{\"items\"=&gt;\"{\\\"bill_item_1\\\":{\\\"product\\\":\\\"vaseline 300 ml\\\",\n  \\\"unit_price\\\":\\\"215\\\",\\\"quantity\\\":\\\"1\\\",\\\"discount\\\":\\\"0.0\\\",\n  \\\"amount\\\":\\\"215\\\"}}\", \"total_amount\"=&gt;\"215\", \"transaction_type\"=&gt;\"Cash\", \"transaction_id\"=&gt;\"some_id\"}}\n</code></pre>\n\n<p>Controller code:</p>\n\n<pre><code>def create\n  @bill = Bill.new(bill_params)\n  if @rec_saved = @bill.save\n    respond_to do |f|\n      f.js\n    end\n  else\n    render 'new'\n  end\nend\n\nprivate\n\n  def bill_params\n    params.require(:bill).permit(:total_amount,\n      :transaction_type, :transaction_id, :items =&gt; {})\n  end\n</code></pre>\n\n<p>model code:</p>\n\n<pre><code>class Bill &lt; ApplicationRecord\n  serialize :items, Hash\nend\n</code></pre>\n\n<p>Using the debugger in the controller near <code>bill_params</code> method gives:</p>\n\n<pre><code>Unpermitted parameter: items\nReturn value is: nil\n</code></pre>\n\n<p>When creating a record from the console, it is working fine.</p>\n\n<p>I searched and tried some suggestions but none of them worked. What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1485302760, "post_id": 41841150, "comment_id": 70867520, "body": "&quot;I dont like to use comments.&quot; why? if there&#39;s a bad practice, it&#39;s to not like using comments."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 2, "creation_date": 1485336714, "post_id": 41841150, "comment_id": 70879973, "body": "Class names also don&#39;t often contain verbs."}, {"owner": {"reputation": 1, "user_id": 6530482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79411679e367319bfce1811e017cfdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Nonato", "link": "https://stackoverflow.com/users/6530482/nonato"}, "edited": false, "score": 0, "creation_date": 1485345898, "post_id": 41841150, "comment_id": 70886089, "body": "I&#39;m trying to follow these approachs: (no comments) =&gt; <a href=\"https://signalvnoise.com/posts/3250-clarity-over-brevity-in-variable-and-method-names\" rel=\"nofollow noreferrer\">signalvnoise.com/posts/&hellip;</a>  (service name with verb) =&gt; <a href=\"http://blog.sundaycoding.com/blog/2014/11/25/my-take-on-services-in-rails/\" rel=\"nofollow noreferrer\">blog.sundaycoding.com/blog/2014/11/25/&hellip;</a>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1485361807, "post_id": 41841150, "comment_id": 70897160, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot;. Questions soliciting opinions are off-topic."}], "answers": [{"comments": [{"owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "edited": false, "score": 1, "creation_date": 1485305919, "post_id": 41841636, "comment_id": 70868447, "body": "I think <code>current_user_is_matriculated_and_confirmed</code> implies a Boolean result versus returning a collection of matriculations."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "edited": false, "score": 0, "creation_date": 1485365928, "post_id": 41841636, "comment_id": 70899949, "body": "@chrismanderson I interpreted it that way too, it implies a logical test. That it returns a scope requires careful reading of the internals."}], "tags": [], "owner": {"reputation": 4018, "user_id": 135673, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/42ee5885ec2ae8f7834b716a3a2b57c2?s=128&d=identicon&r=PG", "display_name": "froderik", "link": "https://stackoverflow.com/users/135673/froderik"}, "is_accepted": false, "score": 0, "last_activity_date": 1485305458, "creation_date": 1485305458, "answer_id": 41841636, "question_id": 41841150, "link": "https://stackoverflow.com/questions/41841150/is-a-bad-pratice-to-use-long-method-name-in-ruby-rails/41841636#41841636", "title": "Is a bad pratice to use long method name in Ruby/Rails?", "body": "<p>Yes it is a bad practice. It is good to have names that describes what they do but when they become too long they make the code very hard to read. In this case you already are in the scope of a <code>UserMatriculations</code> so you can easily remove the first two words from your method to be just <code>current_user_is_matriculated_and_confirmed</code>. The leading two words don't add much to the name anyway. I try to think of names that relate to the context they exist in. If the names get too long it may also tell me something useful about the complexity of the context.</p>\n\n<p>(Also I would say that these advices apply to most if not all programming languages - not just Rails.)</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 6530482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79411679e367319bfce1811e017cfdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Nonato", "link": "https://stackoverflow.com/users/6530482/nonato"}, "edited": false, "score": 0, "creation_date": 1485344417, "post_id": 41841683, "comment_id": 70885194, "body": "Thanks for response. In my case, the logic that will determinate what matriculations must be enabled depends on another model informations, like Invoice, Payments... For this reason I keep this logic on especific ServiceClass. This is wrong?"}, {"owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "reply_to_user": {"reputation": 1, "user_id": 6530482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79411679e367319bfce1811e017cfdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Nonato", "link": "https://stackoverflow.com/users/6530482/nonato"}, "edited": false, "score": 0, "creation_date": 1485361347, "post_id": 41841683, "comment_id": 70896837, "body": "No, that&#39;s totally fine to keep the logic in this specific service class. I was suggesting keeping the logic in that one method, versus the method name itself."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485365824, "post_id": 41841683, "comment_id": 70899882, "body": "I&#39;m also wondering if &quot;ready to enable&quot; is redundant as &quot;ready&quot; might suffice, or given the simplicity of this method, if it&#39;s even necessary."}, {"owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "edited": false, "score": 0, "creation_date": 1485372672, "post_id": 41841683, "comment_id": 70903928, "body": "I agree with that, even just <code>ready_matriculations</code> or just <code>ready</code> if this method will never be used outside of the service."}], "tags": [], "owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "is_accepted": true, "score": 0, "last_activity_date": 1485305819, "creation_date": 1485305819, "answer_id": 41841683, "question_id": 41841150, "link": "https://stackoverflow.com/questions/41841150/is-a-bad-pratice-to-use-long-method-name-in-ruby-rails/41841683#41841683", "title": "Is a bad pratice to use long method name in Ruby/Rails?", "body": "<p>You should rename this method but not only because of length. You are tying the logic in the method name itself, e.g. looking for matriculations that are matriculated and confirmed. What if over time there is another case you need to handle, such as matriculations that are not processed or some such? Or what you need handle only matriculations which are just confirmed? Instead of just changing the logic inside of one method, now you need to change logic and rename methods, which is bug prone. You don't want <code>call!</code> containing the logic over which matriculations it should enable which it is because of the logic contained in the method name itself.</p>\n\n<p>In this case, I change your long method name to something like</p>\n\n<pre><code>def matriculations_ready_to_enable\n  user.matriculations.matriculated.confirmed\nend\n</code></pre>\n\n<p>Then add those scope methods onto your Matriculation model. You likely would want to have a separate method on user versus <code>user.matriculations.matriculated.confirmed</code>, but this makes it clear what kind of matriculations are required, and keeps that information contained to just one part of your code.</p>\n\n<p>Regarding the length itself, Ruby generally favors shorter method names versus longer ones, but also favors using complete words versus abbreviations, e.g. <code>def destroy_matriculations</code> vs <code>def dstry_matriculations</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 6530482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/79411679e367319bfce1811e017cfdb0?s=128&d=identicon&r=PG&f=1", "display_name": "Nonato", "link": "https://stackoverflow.com/users/6530482/nonato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 711, "favorite_count": 0, "closed_date": 1486544245, "accepted_answer_id": 41841683, "answer_count": 2, "score": -1, "last_activity_date": 1485361746, "creation_date": 1485302566, "last_edit_date": 1485361746, "question_id": 41841150, "link": "https://stackoverflow.com/questions/41841150/is-a-bad-pratice-to-use-long-method-name-in-ruby-rails", "closed_reason": "Opinion-based", "title": "Is a bad pratice to use long method name in Ruby/Rails?", "body": "<p>I have the following service class in Ruby:</p>\n\n<pre><code>class EnableUserMatriculations\n\n  def initialize(user)\n    @user = user\n  end\n\n  def call!\n    matriculations_that_current_user_is_matriculated_and_confirmed.each do |matriculation|\n      matriculation.enable!\n    end\n  end\n\n\n  private\n\n  def matriculations_that_current_user_is_matriculated_and_confirmed\n    # some logic to search user.matriculations that must be enabled\n  end\nend\n</code></pre>\n\n<p>I would like to know if methods with long names is a bad pratice?</p>\n\n<p>I don't like to use comments.</p>\n\n<p>Please, give me opinions about this.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 497, "user_id": 3276790, "user_type": "registered", "profile_image": "https://graph.facebook.com/792085488/picture?type=large", "display_name": "jasmo2", "link": "https://stackoverflow.com/users/3276790/jasmo2"}, "edited": false, "score": 3, "creation_date": 1485302210, "post_id": 41841074, "comment_id": 70867370, "body": "How do you want to sort. Which you would like to be the result?"}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "reply_to_user": {"reputation": 497, "user_id": 3276790, "user_type": "registered", "profile_image": "https://graph.facebook.com/792085488/picture?type=large", "display_name": "jasmo2", "link": "https://stackoverflow.com/users/3276790/jasmo2"}, "edited": false, "score": 0, "creation_date": 1485302508, "post_id": 41841074, "comment_id": 70867453, "body": "Instead of having this structure: [{1=&gt;&quot;one&quot;, 2=&gt;&quot;two&quot;}, {3=&gt;&quot;three&quot;, 4=&gt;&quot;four&quot;}]  I want this structure: [[[1, &quot;one&quot;], [2, &quot;two&quot;]], [[3, &quot;three&quot;], [4, &quot;four&quot;]]]"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1485303038, "post_id": 41841074, "comment_id": 70867603, "body": "Your example does not require any sorting. If sorting may be needed explain what the desired sorting order is (both for the order of the hashes in the array and the order of the key-value pairs within each hash, before being converted to arrays) and (especially) change the array of hashes in the example so that it is not in the desired sorted order."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "edited": false, "score": 0, "creation_date": 1485303204, "post_id": 41841074, "comment_id": 70867652, "body": "YES MY LORD I&#39;M AT YOUR SERVICE"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485304212, "post_id": 41841074, "comment_id": 70867939, "body": "Why do you want to sort a hash? Sort the keys however you want and extract the values using <code>values_at</code>. &quot;The hash has to be sorted in an <code>.each</code> method&quot;? Why? Is this a class assignment that you want us to solve for you?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1485307199, "post_id": 41841074, "comment_id": 70868769, "body": "Well, your hash is sorted, you just don&#39;t do anything with that sorted hash apart from assigning it to a local variable which immediately goes out of scope."}, {"owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1485310049, "post_id": 41841074, "comment_id": 70869478, "body": "I see that you never accept answers. Maybe best go through all of your questions and accept the correct answer with the checkmark."}, {"owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "reply_to_user": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "edited": false, "score": 0, "creation_date": 1485311716, "post_id": 41841074, "comment_id": 70869867, "body": "@akuhn I read every answer and grab every help people want to give me, and I do my best to understand all I can. thx for the advice btw"}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1485305720, "last_edit_date": 1485305720, "creation_date": 1485302885, "answer_id": 41841201, "question_id": 41841074, "link": "https://stackoverflow.com/questions/41841074/ruby-hash-not-ok-to-be-sorted/41841201#41841201", "title": "Ruby: hash not OK to be sorted", "body": "<pre><code>arr = [{2=&gt;\"two\", 1=&gt;\"one\"}, {4=&gt;\"four\", 3=&gt; \"three\"}]\n\narr.map { |h| h.sort_by(&amp;:first) }\n  #=&gt; [[[1, \"one\"], [2, \"two\"]], [[3, \"three\"], [4, \"four\"]]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 497, "user_id": 3276790, "user_type": "registered", "profile_image": "https://graph.facebook.com/792085488/picture?type=large", "display_name": "jasmo2", "link": "https://stackoverflow.com/users/3276790/jasmo2"}, "is_accepted": false, "score": 0, "last_activity_date": 1485351875, "last_edit_date": 1485351875, "creation_date": 1485303291, "answer_id": 41841272, "question_id": 41841074, "link": "https://stackoverflow.com/questions/41841074/ruby-hash-not-ok-to-be-sorted/41841272#41841272", "title": "Ruby: hash not OK to be sorted", "body": "<p>The answer of <strong>Cary Swoveland</strong> is the short one</p>\n\n<p>here I write a longer version</p>\n\n<pre><code>x = [{ 2 =&gt; \"two\", 1 =&gt; \"one\"}, {4 =&gt; \"four\", 3 =&gt; \"three\"}]\ny = x.map{ |el| el.to_a.sort }\n</code></pre>\n\n<p>so the variables should be like</p>\n\n<pre><code> x =&gt; [{ 2 =&gt; \"two\", 1 =&gt; \"one\"}, {4 =&gt; \"four\", 3 =&gt; \"three\"}]\n y =&gt; [[[1, \"one\"], [2, \"two\"]], [[3, \"three\"], [4, \"four\"]]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25823, "user_id": 24468, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/PWl6C.png?s=128&g=1", "display_name": "akuhn", "link": "https://stackoverflow.com/users/24468/akuhn"}, "is_accepted": false, "score": 1, "last_activity_date": 1485309576, "creation_date": 1485309576, "answer_id": 41842193, "question_id": 41841074, "link": "https://stackoverflow.com/questions/41841074/ruby-hash-not-ok-to-be-sorted/41842193#41842193", "title": "Ruby: hash not OK to be sorted", "body": "<p>Your loop is grumpy not your hash :)</p>\n\n<p>You are sorting the hash, but your loop does not update the array.</p>\n\n<p>Here is a simplified example</p>\n\n<pre><code>array.each do |y|\n  y = y.sort  \nend\n</code></pre>\n\n<p>Above reassigns the sorted hash to the local variable <code>y</code> and does thus not update the value in <code>array</code>. Assignment to the block parameter does not write back to the array that you are enumerating over.</p>\n\n<p>Use <code>map</code> instead</p>\n\n<pre><code>array = array.map do |y|\n  y.sort  \nend\n</code></pre>\n"}], "owner": {"reputation": 571, "user_id": 7450836, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/69c0cbc84d95b5201e2f5999106119ca?s=128&d=identicon&r=PG&f=1", "display_name": "nounoursnoir", "link": "https://stackoverflow.com/users/7450836/nounoursnoir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "answer_count": 3, "score": 2, "last_activity_date": 1485351875, "creation_date": 1485302115, "last_edit_date": 1485303183, "question_id": 41841074, "link": "https://stackoverflow.com/questions/41841074/ruby-hash-not-ok-to-be-sorted", "title": "Ruby: hash not OK to be sorted", "body": "<p>My hash is grumpy. :(</p>\n\n<p>I want to sort it but it doesn't want, and I can't find the reason of it:</p>\n\n<pre><code>x = [{2 =&gt; \"two\", 1 =&gt; \"one\"}, {4 =&gt; \"four\", 3 =&gt; \"three\"}]\n\nx.each do |y|\n    if y.is_a?(Hash) then y = y.sort end\nend\n</code></pre>\n\n<p>(the hash has to be sorted in a .each method)</p>\n\n<p>In the end, instead of having this structure:</p>\n\n<pre><code>[{2=&gt;\"two\", 1=&gt;\"one\"}, {4=&gt;\"four\", 3=&gt;\"three\"}]\n</code></pre>\n\n<p>I want this structure:</p>\n\n<pre><code>[[[1, \"one\"], [2, \"two\"]], [[3, \"three\"], [4, \"four\"]]]\n</code></pre>\n\n<p>After reading some similar questions I tried to replace <code>Hash</code> by <code>::Hash</code> or convert the hash into an array before sorting it but it still doesn't work...</p>\n\n<p>How can I sort my hash?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "liquid", "html-injections"], "owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 501, "favorite_count": 0, "answer_count": 0, "score": 6, "last_activity_date": 1485301218, "creation_date": 1485301218, "question_id": 41840951, "link": "https://stackoverflow.com/questions/41840951/how-do-i-escape-html-by-default-in-liquid", "title": "How do I escape HTML by default in Liquid?", "body": "<p>I know that it's possible to escape HTML in liquid by using the <code>escape</code> filter</p>\n\n<pre><code># cthulhu is \"&lt;blink&gt;blink&lt;/blink&gt;\"\n\n{{ cthulhu || escape }}\n</code></pre>\n\n<p>but is it possible to make liquid escape the HTML in all variables by default?</p>\n\n<p>I know that Rails escapes all HTML by default, but I have to use <code>html_safe</code> because otherwise all the HTML within the liquid template is escaped.</p>\n\n<p>I only found <a href=\"https://github.com/Shopify/liquid/issues/149\" rel=\"noreferrer\">this issue</a> on GitHub, which told the OP to just ask on Stack Overflow.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5026, "user_id": 993592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cmoKM.jpg?s=128&g=1", "display_name": "ardochhigh", "link": "https://stackoverflow.com/users/993592/ardochhigh"}, "is_accepted": false, "score": 0, "last_activity_date": 1485327594, "creation_date": 1485327594, "answer_id": 41845302, "question_id": 41840925, "link": "https://stackoverflow.com/questions/41840925/required-character-limit-for-form-fields-db-ruby-on-rails/41845302#41845302", "title": "Required Character Limit For Form Fields - DB, Ruby on Rails", "body": "<p>These fields will likely be stored as a string, which depending on the underlying database will be 255 characters (usually).</p>\n\n<p>If you wish to limit the length, you can do it by adding a validation to the model. This way Rails will validate it and display an error on the page if it is too long. You can also set a minimum length</p>\n\n<pre><code>validates_length_of :first_name, maximum: 50\nvalidates_length_of :first_name, minimum:  2\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "is_accepted": false, "score": 0, "last_activity_date": 1485328234, "creation_date": 1485328234, "answer_id": 41845478, "question_id": 41840925, "link": "https://stackoverflow.com/questions/41840925/required-character-limit-for-form-fields-db-ruby-on-rails/41845478#41845478", "title": "Required Character Limit For Form Fields - DB, Ruby on Rails", "body": "<p>You have different options to do so.</p>\n\n<p><strong>Method 1:</strong></p>\n\n<p>Add directly in DB:</p>\n\n<p><code>t.string :first_name, :limit =&gt; 12, :null =&gt; false</code></p>\n\n<p>If you already have the coulmn you can add a migration as.</p>\n\n<p><code>change_column :users, :first_name, :string, :limit =&gt; 24</code></p>\n\n<p>HEre is its definition:</p>\n\n<p><strong>Limit:</strong></p>\n\n<p><strong>limit</strong>:  Sets the maximum size of the string/text/binary/integer fields.</p>\n\n<p><strong>Method 2:</strong> </p>\n\n<p>As the other answer explained, you can add it in Model so that you can handle validations easily.</p>\n\n<pre><code>validates :first_name, length: { minimum: 10 }\nvalidates :first_name, length: { maximum: 24 }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6925364"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 260, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1485328234, "creation_date": 1485301089, "last_edit_date": 1485311364, "question_id": 41840925, "link": "https://stackoverflow.com/questions/41840925/required-character-limit-for-form-fields-db-ruby-on-rails", "title": "Required Character Limit For Form Fields - DB, Ruby on Rails", "body": "<p>I am wondering what is the best limit of characters for each form fields.</p>\n\n<p>As I am creating a database, I wonder if how many characters it should required. </p>\n\n<p>Some of the common fields are the ff:</p>\n\n<ul>\n<li>first_name </li>\n<li>last_name</li>\n<li>email</li>\n<li>username</li>\n<li>password</li>\n</ul>\n\n<p>Excited to your ideas guys. Please forgive me if I am asking a database related question here instead of programming. Let me know also if you know any more fields to add here. :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1485307507, "post_id": 41840789, "comment_id": 70868836, "body": "pls post error trace"}, {"owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1485307646, "post_id": 41840789, "comment_id": 70868882, "body": "and check your validation in comment model."}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485328939, "post_id": 41840789, "comment_id": 70875491, "body": "below this line <code>@comment = @article.comments.create(comment_params)</code>, add <code>render json: @comment.inspect and return false</code> and check what sthe o/p"}, {"owner": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "reply_to_user": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485329195, "post_id": 41840789, "comment_id": 70875611, "body": "@Sravan I get <code>#&lt;Comment id: nil, body: &quot;test&quot;, article_id: 1, users_id: 1, created_at: nil, updated_at: nil&gt;</code>"}, {"owner": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "reply_to_user": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "edited": false, "score": 0, "creation_date": 1485329247, "post_id": 41840789, "comment_id": 70875637, "body": "@EdmundLee There is no error trace. I added the contents of the log file above"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485329350, "post_id": 41840789, "comment_id": 70875703, "body": "is that the correct log? that doesn&#39;t even have a insert command in it. Is that the correct file you are referring to?"}, {"owner": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "edited": false, "score": 0, "creation_date": 1485329480, "post_id": 41840789, "comment_id": 70875763, "body": "Good point. It&#39;s labeled development.log in the logs folder, but you&#39;re right, there isn&#39;t an insert command. I&#39;m not sure why"}, {"owner": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "edited": false, "score": 0, "creation_date": 1485329624, "post_id": 41840789, "comment_id": 70875823, "body": "So my next guess would be model validation error, except...I don&#39;t have explicit validations? And the view is supposed to show errors, according to the code, no?"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1485329934, "post_id": 41840789, "comment_id": 70875958, "body": "check in the rails terminal as soon as you create one comment."}, {"owner": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "edited": false, "score": 0, "creation_date": 1485331089, "post_id": 41840789, "comment_id": 70876469, "body": "What I posted above is what happens as soon as I create a comment. You can see the POST request, the parameters look good, but when the transaction happens, there&#39;s no insert"}], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "edited": false, "score": 0, "creation_date": 1485329320, "post_id": 41845455, "comment_id": 70875679, "body": "Wouldn&#39;t the association raise an error though? I&#39;ve messed up the associations before and usually it raises a clear &quot;Cannot find user/article&quot; error. Right now it&#39;s just going through without saying anything"}, {"owner": {"reputation": 5026, "user_id": 993592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cmoKM.jpg?s=128&g=1", "display_name": "ardochhigh", "link": "https://stackoverflow.com/users/993592/ardochhigh"}, "reply_to_user": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "edited": false, "score": 0, "creation_date": 1485331992, "post_id": 41845455, "comment_id": 70876965, "body": "Try adding the optional and see if that helps."}, {"owner": {"reputation": 5026, "user_id": 993592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cmoKM.jpg?s=128&g=1", "display_name": "ardochhigh", "link": "https://stackoverflow.com/users/993592/ardochhigh"}, "reply_to_user": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "edited": false, "score": 0, "creation_date": 1485384337, "post_id": 41845455, "comment_id": 70909907, "body": "Under Rails 5 relationships are mandatory, ie: something must be in both the article_id and user_id fields, unless you specify that the relationship is optional. Optional was the default behaviour pre-Rails 5. Why it doesn&#39;t emit an error I don&#39;t know."}, {"owner": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "edited": false, "score": 0, "creation_date": 1485386915, "post_id": 41845455, "comment_id": 70910822, "body": "Thanks. It&#39;s especially confusing because the relation seems to work, i.e. I can display the user who wrote the comment in the correct article"}, {"owner": {"reputation": 1139, "user_id": 4468463, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/mFyjG.jpg?s=128&g=1", "display_name": "Liz", "link": "https://stackoverflow.com/users/4468463/liz"}, "edited": false, "score": 1, "creation_date": 1537911234, "post_id": 41845455, "comment_id": 91954420, "body": "This fixed my issue too.  Ridiculous!  Thank you!"}], "tags": [], "owner": {"reputation": 5026, "user_id": 993592, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/cmoKM.jpg?s=128&g=1", "display_name": "ardochhigh", "link": "https://stackoverflow.com/users/993592/ardochhigh"}, "is_accepted": true, "score": 1, "last_activity_date": 1485328130, "creation_date": 1485328130, "answer_id": 41845455, "question_id": 41840789, "link": "https://stackoverflow.com/questions/41840789/comments-not-saving-in-rails-5/41845455#41845455", "title": "Comments not saving in Rails 5", "body": "<p>It's hard to see what the problem is without a snippet from the server log file. As you are using Rails 5, it is possibly caused by the new requirement that <strong>belongs_to</strong> associations are now required by default.</p>\n\n<p>You can change this behaviour by adding an :<strong>optional</strong> clause</p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n  belongs_to :article, optional: true\n  belongs_to :user, optional: true\nend\n</code></pre>\n\n<p>You may also be better off turning the comment model into an Polymorphic association. </p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n  belongs_to :commentable, polymorphic: true\nend\n\nclass Article &lt; ApplicationRecord\n  has_many :comments, as: :commentable\nend\n\nclass User &lt; ApplicationRecord\n  has_many :comments, as: :commentable\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 8578209, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a48025db354fcea7c85d791e16425c?s=128&d=identicon&r=PG&f=1", "display_name": "Andrii Stepura", "link": "https://stackoverflow.com/users/8578209/andrii-stepura"}, "is_accepted": false, "score": 0, "last_activity_date": 1543066147, "creation_date": 1543066147, "answer_id": 53458630, "question_id": 41840789, "link": "https://stackoverflow.com/questions/41840789/comments-not-saving-in-rails-5/53458630#53458630", "title": "Comments not saving in Rails 5", "body": "<p>For rails 5.2 add to comment model:</p>\n\n<pre><code>, optional: true\n</code></pre>\n\n<p>resolved this problem</p>\n"}], "owner": {"reputation": 317, "user_id": 5969535, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/VfMtY.jpg?s=128&g=1", "display_name": "Nicholas Yang", "link": "https://stackoverflow.com/users/5969535/nicholas-yang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 449, "favorite_count": 0, "accepted_answer_id": 41845455, "answer_count": 2, "score": 1, "last_activity_date": 1543066147, "creation_date": 1485300273, "last_edit_date": 1485331207, "question_id": 41840789, "link": "https://stackoverflow.com/questions/41840789/comments-not-saving-in-rails-5", "title": "Comments not saving in Rails 5", "body": "<p>I'm trying to add comments to my blog (loosely following <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow noreferrer\">this guide</a>). However, when I try to submit a comment, everything goes through, but the comment isn't saved. I've checked the database and nothing seems to be created. Weirdly enough, there's no errors either. </p>\n\n<p><strong>comments_controller.rb</strong></p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n\n  def create\n    @article = Article.find(params[:article_id])\n    @comment = @article.comments.create(comment_params)\n    redirect_to article_path(@article)\n  end\n\n  private\n  def comment_params\n    params.require(:comment).permit(:body, :users_id)\n  end\nend\n</code></pre>\n\n<p><strong>show.html.erb</strong></p>\n\n<pre><code>  &lt;div class=\"comment\"&gt;\n         &lt;h2&gt;Comments&lt;/h2&gt;\n          &lt;% @article.comments.each do |comment| %&gt;\n             &lt;p&gt;\n                 &lt;strong&gt;Commenter:&lt;/strong&gt;\n                 &lt;%= comment.user_id %&gt;\n             &lt;/p&gt;\n\n             &lt;p&gt;\n                 &lt;strong&gt;Comment:&lt;/strong&gt;\n                 &lt;%= comment.body %&gt;\n             &lt;/p&gt;\n         &lt;% end %&gt;\n     &lt;/div&gt;\n     &lt;div class=\"comment-form\"&gt;\n      &lt;h2&gt;Add a comment:&lt;/h2&gt;\n      &lt;%= form_for([@article, @article.comments.build]) do |f| %&gt;\n          &lt;% if @article.errors.any? %&gt;\n              &lt;div&gt;\n                  &lt;h2&gt;\n                      &lt;%= pluralize(@article.errors.count, \"error\") %&gt; prohibited\n                      this article from being saved:\n                  &lt;/h2&gt;\n                  &lt;ul&gt;\n                      &lt;% @article.errors.full_messages.each do |msg| %&gt;\n                          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n                      &lt;% end %&gt;\n                  &lt;/ul&gt;\n              &lt;/div&gt;\n          &lt;% end %&gt;\n          &lt;p&gt;\n              &lt;%= f.label :body %&gt;&lt;br&gt;\n              &lt;%= f.text_area :body %&gt;\n          &lt;/p&gt;\n              &lt;%= f.hidden_field :users_id, :value =&gt; session[:user_id] %&gt;\n          &lt;p&gt;\n              &lt;%= f.submit %&gt;\n          &lt;/p&gt;\n      &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p><strong>comment.rb</strong></p>\n\n<pre><code>class Comment &lt; ApplicationRecord\n  belongs_to :article\n  belongs_to :user\nend\n</code></pre>\n\n<p><strong>schema.rb</strong></p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20170122050809) do\n\n  create_table \"articles\", force: :cascade do |t|\n    t.string   \"title\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.text     \"body\"\n    t.integer  \"user_id\"\n    t.index [\"user_id\"], name: \"index_articles_on_user_id\"\n  end\n\n  create_table \"ckeditor_assets\", force: :cascade do |t|\n    t.string   \"data_file_name\",               null: false\n    t.string   \"data_content_type\"\n    t.integer  \"data_file_size\"\n    t.string   \"data_fingerprint\"\n    t.integer  \"assetable_id\"\n    t.string   \"assetable_type\",    limit: 30\n    t.string   \"type\",              limit: 30\n    t.integer  \"width\"\n    t.integer  \"height\"\n    t.datetime \"created_at\",                   null: false\n    t.datetime \"updated_at\",                   null: false\n    t.index [\"assetable_type\", \"assetable_id\"], name: \"idx_ckeditor_assetable\"\n    t.index [\"assetable_type\", \"type\", \"assetable_id\"], name: \"idx_ckeditor_assetable_type\"\n  end\n\n  create_table \"comments\", force: :cascade do |t|\n    t.text     \"body\"\n    t.integer  \"article_id\"\n    t.integer  \"users_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"article_id\"], name: \"index_comments_on_article_id\"\n    t.index [\"users_id\"], name: \"index_comments_on_users_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"password_digest\"\n    t.datetime \"created_at\",      null: false\n    t.datetime \"updated_at\",      null: false\n    t.boolean  \"is_admin\"\n  end\n\nend\n</code></pre>\n\n<p>Edit: Snippet from log. As you can see there is no apparent error</p>\n\n<pre><code>Started POST \"/articles/1/comments\" for 127.0.0.1 at 2017-01-24 18:12:49 -0500\n  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1m[34mSELECT \"schema_migrations\".* FROM \"schema_migrations\"[0m\nProcessing by CommentsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"YJDPGei0U1SMPMzAuZggad4LxUm7D24VDOHbm41fkHhh2s29tD1ufoLeoYoNvyaSejjBcmJyD/vL+T7no8KWsw==\", \"comment\"=&gt;{\"body\"=&gt;\"hello\", \"users_id\"=&gt;\"1\"}, \"commit\"=&gt;\"Create Comment\", \"article_id\"=&gt;\"1\"}\n  [1m[36mUser Load (0.1ms)[0m  [1m[34mSELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  [1m[36mArticle Load (0.1ms)[0m  [1m[34mSELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"id\" = ? LIMIT ?[0m  [[\"id\", 1], [\"LIMIT\", 1]]\n  [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m\n  [1m[35m (0.1ms)[0m  [1m[36mcommit transaction[0m\nRedirected to http://localhost:3000/articles/1\nCompleted 302 Found in 69ms (ActiveRecord: 1.5ms)\n</code></pre>\n\n<p>Another log snippet: </p>\n\n<pre><code>Started POST \"/articles/2/comments\" for 127.0.0.1 at 2017-01-25 02:58:20 -0500\nProcessing by CommentsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"hn5M1vHtv1fdtCDxz8RK3QIHtKNCxLOxdGywlR+fKtWHNE5yrWSCfdNWTbt740wmpjSwmJu50l+zdFXpMQIsHg==\", \"comment\"=&gt;{\"body\"=&gt;\"this is for stackoverflow\", \"users_id\"=&gt;\"1\"}, \"commit\"=&gt;\"Create Comment\", \"article_id\"=&gt;\"2\"}\n  User Load (0.1ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT ?  [[\"id\", 1], [\"LIMIT\", 1]]\n  Article Load (0.1ms)  SELECT  \"articles\".* FROM \"articles\" WHERE \"articles\".\"id\" = ? LIMIT ?  [[\"id\", 2], [\"LIMIT\", 1]]\n   (0.1ms)  begin transaction\n   (0.1ms)  commit transaction\nCompleted 200 OK in 6ms (Views: 0.1ms | ActiveRecord: 0.3ms)\n</code></pre>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1485362842, "post_id": 41840658, "comment_id": 70897887, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need to be able to duplicate the problem which requires the minimum input data that demonstrates it, along with the required output."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1485299917, "creation_date": 1485299917, "answer_id": 41840741, "question_id": 41840658, "link": "https://stackoverflow.com/questions/41840658/how-to-calculate-total-sales-for-music/41840741#41840741", "title": "How to calculate total sales for music", "body": "<p>Generally every <code>if</code> should have a corresponding <code>end</code>, and yours doesn't. Also you'll want to be very, very careful about confusing the <code>=</code> assignment operator and the <code>==</code> comparison one. The correct code is:</p>\n\n<pre><code>if row[2] == 'music'\n  # ...\nend\n</code></pre>\n\n<p>The only exceptions are trailing <code>if</code> clauses:</p>\n\n<pre><code>total_sales += row[6] if row[2] == 'music'\n</code></pre>\n\n<p>I'd advise beginners to steer away from those at first as they can lead to mind-bendingly confusing code if abused. Note that <code>x += y</code> is shorthand for <code>x = x + y</code> and often communicates what's happening much more clearly.</p>\n\n<p>One other thing to consider is writing code this way:</p>\n\n<pre><code>case row[2]\nwhen 'music'\n  total_sales += row[6]\nend\n</code></pre>\n\n<p>That way it's impossible to do an accidental assignment.</p>\n\n<p>Another thing to consider is to break out your <code>row</code> into actual column names, like this:</p>\n\n<pre><code>CSV.foreach(...) do |a, b, type, c, d, sales|\n</code></pre>\n\n<p>Where <code>a</code> and <code>b</code> are changed to represent whatever value is present in that column. That is a lot more readable than <code>row[2]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485299918, "creation_date": 1485299918, "answer_id": 41840743, "question_id": 41840658, "link": "https://stackoverflow.com/questions/41840658/how-to-calculate-total-sales-for-music/41840743#41840743", "title": "How to calculate total sales for music", "body": "<p>Ruby isn't python : unindenting code isn't enough to close a block or a statement :</p>\n\n<pre><code>if row[2] == 'music'\n  total_sales = total_sales + row[6]\nend # &lt;------------ this was missing!!!\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 7466288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3408a9ffa2c5ec08ba16408495d47b1e?s=128&d=identicon&r=PG&f=1", "display_name": "Jaacks", "link": "https://stackoverflow.com/users/7466288/jaacks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 199, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1485362928, "creation_date": 1485299545, "last_edit_date": 1485362928, "question_id": 41840658, "link": "https://stackoverflow.com/questions/41840658/how-to-calculate-total-sales-for-music", "title": "How to calculate total sales for music", "body": "<p>I am trying retrieve information from a CSV file:</p>\n\n<pre><code>require 'csv'\n\ntotal_sales = 0\n\nCSV.foreach('sales-data.csv', headers: true, converters: :all) do |row|\n  # TODO: check if category is \"Music\" (row[2])\n  # TODO: if it is music, add total_sales + the row's sales (row[6])\n  if row[2] = 'music'\n    total_sales = total_sales + row[6]\nend\n\nputs total_sales.round(2)\n</code></pre>\n\n<p>When I run this code, I receive this error:</p>\n\n<pre><code>our-sales-report.rb:12: syntax error, unexpected end-of-input, \nexpecting keyword_end\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485298438, "post_id": 41840182, "comment_id": 70866138, "body": "I think Bundler excludes versions that are incompatible with your Ruby version <i>if</i> that dependency is described in the gem specification. This is not always the case, though."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1485298830, "post_id": 41840182, "comment_id": 70866287, "body": "Why don&#39;t you just use <code>gem &quot;my-gem&quot;, &quot;&lt; 1.5&quot;</code>, when you know that <code>1.5</code> doesn&#39;t work with your version of Ruby? Btw. is the <code>spec.required_ruby_version</code> configured in the gem&#39;s gemspec?"}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1485298922, "post_id": 41840261, "comment_id": 70866317, "body": "<code>~&gt; 1.4</code> is identical to <code>&gt;= 1.4</code> and <code>&lt; 2.0</code>. This doesn&#39;t cover the OP&#39;s requirement."}, {"owner": {"reputation": 289, "user_id": 117436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2274905203e564ef76b6ad1f66eebeca?s=128&d=identicon&r=PG", "display_name": "Angelo", "link": "https://stackoverflow.com/users/117436/angelo"}, "edited": false, "score": 0, "creation_date": 1485311514, "post_id": 41840261, "comment_id": 70869816, "body": "The problem with ~&gt; is that it doesn&#39;t do the same thing as what I&#39;m asking about.  ~&gt; specifically says &quot;install just this version plus patches&quot; (which I agree should be how Gemfiles are generally specified).  But that is not the same as &quot;give me the latest version that I can satisfy dependencies for&quot;"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1485299405, "last_edit_date": 1485299405, "creation_date": 1485297594, "answer_id": 41840261, "question_id": 41840182, "link": "https://stackoverflow.com/questions/41840182/can-bundler-automatically-install-the-latest-version-based-on-my-version-of-ruby/41840261#41840261", "title": "Can bundler automatically install the latest version based on my version of ruby (or restricted by other dependencies)?", "body": "<pre><code>gem \"my-gem\", \"~&gt;1.4.0\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>gem \"my-gem\", '&gt;= 1.4', '&lt; 1.5'\n</code></pre>\n\n<p>should do.</p>\n\n<p>From the <a href=\"http://bundler.io/gemfile.html\" rel=\"nofollow noreferrer\">documentation</a> :</p>\n\n<blockquote>\n  <p>The specifier ~> has a special meaning, best shown by example. ~>\n  2.0.3 is identical to >= 2.0.3 and &lt; 2.1</p>\n</blockquote>\n\n<p>and this <a href=\"http://www.devalot.com/articles/2012/04/gem-versions.html\" rel=\"nofollow noreferrer\">article</a> :</p>\n\n<blockquote>\n  <p>gem('nokogiri', '>= 1.0.0', '&lt; 2.0.0')</p>\n  \n  <p>Which means that you\u2019ll take any version of Nokogiri starting at 1.0.0\n  but not 2.0.0 or higher.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 289, "user_id": 117436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2274905203e564ef76b6ad1f66eebeca?s=128&d=identicon&r=PG", "display_name": "Angelo", "link": "https://stackoverflow.com/users/117436/angelo"}, "edited": false, "score": 0, "creation_date": 1485311497, "post_id": 41840671, "comment_id": 70869810, "body": "The problem with ~&gt; is that it doesn&#39;t do the same thing as what I&#39;m asking about.  ~&gt; specifically says &quot;install just this version plus patches&quot; (which I agree should be how Gemfiles are generally specified).  But that is not the same as &quot;give me the latest version that I can satisfy dependencies for&quot;"}, {"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "reply_to_user": {"reputation": 289, "user_id": 117436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2274905203e564ef76b6ad1f66eebeca?s=128&d=identicon&r=PG", "display_name": "Angelo", "link": "https://stackoverflow.com/users/117436/angelo"}, "edited": false, "score": 1, "creation_date": 1485343543, "post_id": 41840671, "comment_id": 70884630, "body": "Notice the difference between specifying the gem version (which is what the other answer is about) and specifying your desired Ruby version (which is what I&#39;m talking about here). When you specify your Ruby version in the <code>Gemfile</code>  and your gem specifies its <code>require_ruby_version</code> in its gemspec, bundler will automatically find a version of the gem which suits the ruby requirement. Thus, it will probably not attempt to use version 1.5 of your gem."}, {"owner": {"reputation": 289, "user_id": 117436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2274905203e564ef76b6ad1f66eebeca?s=128&d=identicon&r=PG", "display_name": "Angelo", "link": "https://stackoverflow.com/users/117436/angelo"}, "edited": false, "score": 0, "creation_date": 1485361928, "post_id": 41840671, "comment_id": 70897237, "body": "Thanks for pointing that out.  (Although I haven&#39;t tested this yet,) is there a way to specify this on the command line?  Ideally I&#39;d like a way to do this without modifying code received from another source."}], "tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": false, "score": 2, "last_activity_date": 1485300251, "last_edit_date": 1485300251, "creation_date": 1485299603, "answer_id": 41840671, "question_id": 41840182, "link": "https://stackoverflow.com/questions/41840182/can-bundler-automatically-install-the-latest-version-based-on-my-version-of-ruby/41840671#41840671", "title": "Can bundler automatically install the latest version based on my version of ruby (or restricted by other dependencies)?", "body": "<p>Since version 1.13, bundler does respect the required ruby version of gems.</p>\n\n<p>In order for bundler to resolve the correct versions, you have to specify your desired ruby version in the <code>Gemfile</code> itself. This is required there since the specified ruby version affects the resolved gems in the <code>Gemfile.lock</code> which in itself is independent from the running Ruby.</p>\n\n<p>You can define the desired ruby version like this in your <code>Gemfile</code>:</p>\n\n<pre><code>ruby \"~&gt; 2.1.0\"\n</code></pre>\n\n<p>Please refer to <a href=\"http://bundler.io/gemfile_ruby.html\" rel=\"nofollow noreferrer\">bundler's documentation</a> for details and additional options for specifying the <code>ruby</code> version. The feature was announced in the <a href=\"http://bundler.io/v1.13/whats_new.html#support-for-required_ruby_version\" rel=\"nofollow noreferrer\">changelog for bundler 1.13</a>.</p>\n"}], "owner": {"reputation": 289, "user_id": 117436, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/2274905203e564ef76b6ad1f66eebeca?s=128&d=identicon&r=PG", "display_name": "Angelo", "link": "https://stackoverflow.com/users/117436/angelo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 348, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1485327188, "creation_date": 1485297185, "last_edit_date": 1485327188, "question_id": 41840182, "link": "https://stackoverflow.com/questions/41840182/can-bundler-automatically-install-the-latest-version-based-on-my-version-of-ruby", "title": "Can bundler automatically install the latest version based on my version of ruby (or restricted by other dependencies)?", "body": "<p>I constantly run into a problem where a Gemfile specifies to get the latest version of a gem, but given the constraints of my system I simply get an error because the latest version is not compatible with ruby.</p>\n\n<p>For example let's say I have:</p>\n\n<pre><code>gem \"my-gem\", \"&gt;=1.2\"\n</code></pre>\n\n<p>The latest version is 1.5, but only up to version 1.4 works with my version of Ruby.  Instead of producing an error, it would make more sense to install 1.4, since it meets my requirement and works with what I have.  (i.e. Bundler should install \"the latest version that is satisfied by all dependencies\" and produce an error when this version is less than what is specified in the Gemfile)</p>\n\n<p>In fact, the default behavior of bundler effectively imposes \">=1.5\" even though that's not what the Gemfile requires.</p>\n\n<p>Is there any way, short of manually changing the Gemfile, that bundler can behave sensibly and just try to provide the latest version of the gem that it has the requirements for?</p>\n\n<hr>\n\n<p>Update:</p>\n\n<p>I agree that using <code>~&gt; x.x.x</code> is the smart way to go, but it doesn't do the same thing as what I'm asking about.  <code>~&gt; x.x.x</code> specifically says \"install just this version plus patches; do not go to x.x+1\".  But that is not the same as \"give me the latest version that I can satisfy the dependencies for\"</p>\n"}, {"tags": ["ruby", "string", "methods", "private", "single-responsibility-principle"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1485298996, "post_id": 41840132, "comment_id": 70866348, "body": "For landing a rover this isnt that bad :). Probably you can make a move_to(x,y) which sets x y and position"}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6618668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd43597723f41c874fc6d1c0affb2da?s=128&d=identicon&r=PG", "display_name": "Kornelia Szabo", "link": "https://stackoverflow.com/users/6618668/kornelia-szabo"}, "edited": false, "score": 1, "creation_date": 1485848836, "post_id": 41840355, "comment_id": 71083533, "body": "Thank you so much for the help and time you spent with answering, really appreciate it. I ended up with something shorter but my interview was successful so, thanks again! :)"}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 3, "last_activity_date": 1485301665, "last_edit_date": 1485301665, "creation_date": 1485298072, "answer_id": 41840355, "question_id": 41840132, "link": "https://stackoverflow.com/questions/41840132/ruby-extracting-my-smaller-methods-out-from-another-method-transforming-a-str/41840355#41840355", "title": "Ruby - Extracting my smaller methods out from another method (transforming a string into two numbers and a symbol)", "body": "<p>A note about <a href=\"https://en.wikipedia.org/wiki/Opportunity_cost\" rel=\"nofollow noreferrer\">opportunity cost</a>. It's possible to over factor. Worrying about this method probably isn't worth your time. It's an eight line method of simple statements that's easy to understand and it works. Presumably it's tested, but if it isn't, that's something to better spend your time on.</p>\n\n<p>For example, you initialize <code>@current_rover</code> to a list, but it's used as a user object. I suspect lots of things will go bang in confusing ways if the user doesn't set <code>@current_rover</code>. That would be something to spend time on. You could have tests which try to use a freshly initialized object and ensure they produce meaningful exceptions, or you can side-step all that complexity and decide that it must be initialized with a rover.</p>\n\n<p>Let's treat the refactoring as an exercise.</p>\n\n<hr>\n\n<p>First, let's try to describe all the things that <code>land_connected_rover</code> does by commenting each block of things to explain what they do.</p>\n\n<pre><code>  def land_connected_rover(coordinates)\n    # Parse coordinates.\n    coordinates = coordinates.delete(' ')\n    x = coordinates[0].to_i\n    y = coordinates[1].to_i\n    position = coordinates[2].to_sym\n\n    # Set rover coordinates.\n    self.current_rover.x_coordinates = x\n    self.current_rover.y_coordinates = y\n    self.current_rover.position = position\n\n    # Add something to the grid for some reason.\n    add_to_grid(x,y)\n  end\n</code></pre>\n\n<p>Comments like this point at good sheer points for extracting methods. We need something to parse coordinates. Something to set coordinates. And something to add coordinates to the grid. We already have that last one, so extract the other two.</p>\n\n<pre><code>    def parse_coordinates(input)\n       input = input.delete(' ')\n\n       return {\n           x:   coordinates[0].to_i,\n           y:   coordinates[1].to_i,\n           position: coordinates[2].to_sym\n       };\n    end\n\n    def set_rover_coordinates(coordinates)\n        @current_rover.x_coordinates = coordinates[:x]\n        @current_rover.y_coordinates = coordinates[:y]\n        @current_rover.position = coordinates[:position]\n    end\n</code></pre>\n\n<p>Now these can be documented, reused, and unit tested. Testing may reveal the need to add error handling when the coordinates don't parse, or the <code>@current_rover</code> isn't set.</p>\n\n<p>I used <code>@current_rover</code> to remain consistent with the rest of the code that uses instance variables for internal access rather than accessors. There are arguments to be made for either way, pick one.</p>\n\n<p>Then put them back together.</p>\n\n<pre><code>  def land_connected_rover(input)\n    set_rover_coordinates( parse_coordinates(input) )\n    add_to_grid(x,y)\n  end\n</code></pre>\n\n<hr>\n\n<p>From there we can make a few more observations. Why is Controller writing convenience methods to set attributes of Rover? <code>set_rover_coordinates</code> should probably move to Rover.</p>\n\n<pre><code>  def land_connected_rover(input)\n    @current_rover.set_coordinates( parse_coordinates(input) )\n    add_to_grid(x,y)\n  end\n</code></pre>\n\n<p>Who should be parsing coordinates? I can see good reasons for both Rover and Controller needing this. This suggests that you need a Coordinate class.</p>\n\n<pre><code>  # In Controller\n  def land_connected_rover(input)\n    @current_rover.set_coordinates( Coordinate.from_a(input) )\n    add_to_grid(x,y)\n  end\n\n  # In Rover\n  def set_coordinates(coordinates)\n    @x_coordinates = coordinates.x\n    @y_coordinates = coordinates.y\n    @position = coordinates.position\n  end\n</code></pre>\n\n<p>Now we observe rather than having a rover's coordinates be a bunch of attributes, it should have a single coordinate attribute that takes a Coordinate object.</p>\n\n<pre><code>  # In Rover\n  attr :coordinates\n\n  # In Controller\n  def land_connected_rover(input)\n    @current_rover.coordinates( Coordinate.from_a(input) )\n    add_to_grid(x,y)\n  end\n</code></pre>\n\n<p>Now that we have Coordinate objects, Controller can be passed a Coordinate object and not worry about normalizing its input.</p>\n\n<pre><code>  def land_connected_rover(coordinates)\n    @current_rover.coordinates( coordinates )\n    add_to_grid(x,y)\n  end\n</code></pre>\n\n<p>Let the caller handle the normalization.</p>\n\n<pre><code>  controller.land_connected_rover( Coordinate.from_a([10,20,30] ) )\n</code></pre>\n\n<p>Now that you have Coordinate objects, the caller can use them, and most of the need for conversion will probably go away.</p>\n\n<hr>\n\n<p>From here my next concern is the duplication of coordinates between the Rover and the Surface. The Rover has its own coordinates, and the Surface seems to independently track the Rover's coordinates. I assume both have to remain in sync? If so, that adds complexity and risks bugs. Or maybe the Surface is only tracking where the Rover initially touched down? It's something to consider.</p>\n\n<hr>\n\n<p>Note that most of this was not obvious until I started the refactoring. I'd initially stopped at the first refactoring of <code>land_connected_rover</code>, but then thought about it some more, came up with the Coordinate class, and then it cascaded from there. I think the end result is much better, far beyond what I'd expected at the start.</p>\n\n<p>So... yeah, sometimes do worry about the eight line method. :)</p>\n"}, {"tags": [], "owner": {"reputation": 23, "user_id": 6618668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd43597723f41c874fc6d1c0affb2da?s=128&d=identicon&r=PG", "display_name": "Kornelia Szabo", "link": "https://stackoverflow.com/users/6618668/kornelia-szabo"}, "is_accepted": false, "score": 0, "last_activity_date": 1485848962, "creation_date": 1485848962, "answer_id": 41952265, "question_id": 41840132, "link": "https://stackoverflow.com/questions/41840132/ruby-extracting-my-smaller-methods-out-from-another-method-transforming-a-str/41952265#41952265", "title": "Ruby - Extracting my smaller methods out from another method (transforming a string into two numbers and a symbol)", "body": "<p><strong>I ended up with this solution at the end:</strong></p>\n\n<pre><code>class Controller\n\n  attr_reader :current_rover, :current_surface\n\n  def initialize\n    @current_surface ||= nil\n    @current_rover ||= nil\n  end\n\n  def connect_to_surface(destination)\n    @current_surface = destination\n  end\n\n  def connect_to_rover(rover)\n    @current_rover = rover\n  end\n\n  def is_mission_ready?\n    @current_surface != nil &amp;&amp; @current_rover != nil\n  end\n\n  def land_connected_rover(coordinates)\n    raise 'Mission is not ready to launch yet!' if !is_mission_ready?\n    x, y, position = parse_coordinates(coordinates)\n    current_rover.x_coordinates = x\n    current_rover.y_coordinates = y\n    current_rover.position = position\n    add_to_grid\n  end\n\n  def navigate(command)\n    raise 'Navigation is not ready to start yet!' if !is_mission_ready?\n    current_rover.read_input(command)\n  end\n\n  private\n\n  def parse_coordinates(coordinates)\n    fields = coordinates.split(\" \")\n    [fields[0].to_i, fields[1].to_i, fields[2].to_sym]\n  end\n\n  def add_to_grid\n    x = current_rover.x_coordinates\n    y = current_rover.y_coordinates\n    position = current_rover.position\n    @current_surface.record_on_map(x,y)\n    puts \"Rover landed, currently facing: #{current_rover.position}, x-coordinates: #{x}, y-coordinates: #{y}\"\n    @current_surface.grid\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 6618668, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4cd43597723f41c874fc6d1c0affb2da?s=128&d=identicon&r=PG", "display_name": "Kornelia Szabo", "link": "https://stackoverflow.com/users/6618668/kornelia-szabo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 41840355, "answer_count": 2, "score": 2, "last_activity_date": 1485848962, "creation_date": 1485296886, "question_id": 41840132, "link": "https://stackoverflow.com/questions/41840132/ruby-extracting-my-smaller-methods-out-from-another-method-transforming-a-str", "title": "Ruby - Extracting my smaller methods out from another method (transforming a string into two numbers and a symbol)", "body": "<p>I have a method (land_connected_rover(coordinates)) that takes a parameter (string that includes two numbers and a letter, space separated) end executes prompts based on this, my problem is that I struggle to extract my assignments from this method, I tried private methods but once I do this, none of my injected classes can reach these variables anymore obvs. I want to have an elegant, SRP based solution, not the current messy one... ew, sorry for hurting your eyes!</p>\n\n<p>'x', 'y' and 'position' variable names are important for other classes as they rely on these prompts...</p>\n\n<p>I want to extract the steps that are assigning x, y and position variable names to the right part of the string.</p>\n\n<pre><code>class Controller\n\n  attr_reader :current_rover, :current_surface\n\n  def initialize\n    @current_surface = nil\n    @current_rover ||= []\n  end\n\n  def connect_to_surface(destination)\n    @current_surface = destination\n  end\n\n  def connect_to_rover(rover)\n    @current_rover = rover\n  end\n\n  def land_connected_rover(coordinates)\n    coordinates = coordinates.delete(' ')\n    x = coordinates[0].to_i\n    y = coordinates[1].to_i\n    position = coordinates[2].to_sym\n    self.current_rover.x_coordinates = x\n    self.current_rover.y_coordinates = y\n    self.current_rover.position = position\n    add_to_grid(x,y)\n  end\n\n  def navigate(command)\n    self.current_rover.read_input(command)\n  end\n\n  private\n\n  def add_to_grid(x,y)\n    @current_surface.record_on_map(x,y)\n  end\n\n  def turn_on_rover\n    @current_rover.online = true\n  end\nend\n</code></pre>\n\n<p>I really appreciate the help! And sorry if I asked all the wrong questions, I'm kinda new..</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "heroku", "friendly-id"], "comments": [{"owner": {"reputation": 61, "user_id": 2743478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93b4b3ae64650054ec580d8dd4921132?s=128&d=identicon&r=PG&f=1", "display_name": "Ali Ove", "link": "https://stackoverflow.com/users/2743478/ali-ove"}, "edited": false, "score": 0, "creation_date": 1612473076, "post_id": 41840067, "comment_id": 116785634, "body": "Did you find the solution to this?"}], "owner": {"reputation": 1225, "user_id": 5724342, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d0fc4bbc261a7a2a233a196a0b655fd2?s=128&d=identicon&r=PG&f=1", "display_name": "Gurmukh Singh", "link": "https://stackoverflow.com/users/5724342/gurmukh-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1485296675, "creation_date": 1485296619, "question_id": 41840067, "link": "https://stackoverflow.com/questions/41840067/heroku-friendly-id-gem-undefined-method-slug", "title": "Heroku Friendly_Id Gem undefined method slug", "body": "<p>So Iv created a basic app on rails and uploaded it to heroku. Everything works perfectly on my local machine including the <a href=\"https://github.com/norman/friendly_id\" rel=\"nofollow noreferrer\">friendly_Id</a> gem.</p>\n\n<p>Iv pushed my app to heroku and everything works fine, up until i try to post something where I get an error:</p>\n\n<pre><code>NoMethodError (undefined method `slug' for #&lt;Post:0x007f6aedb2d248&gt;):\n</code></pre>\n\n<p>All my models and relations are set up correctly as below:</p>\n\n<p><strong>Post.rb</strong></p>\n\n<pre><code>  extend FriendlyId\n  friendly_id :title, use: :slugged\n</code></pre>\n\n<p>And I also ran a migration</p>\n\n<pre><code>  def change\n    add_column :tutorials, :slug, :string\n  end\n</code></pre>\n\n<p>Locally what I did my mistake was delete the migration file, but the column stayed in the <code>postgresql</code> database. So i deleted the column <code>slug</code> and created a new migration and added the column again and its all fine locally.</p>\n\n<p>Now When I look at my db schema on my local machine it contains the slug column.</p>\n\n<p><strong>db/schema.rb</strong></p>\n\n<pre><code>create_table \"post\", force: :cascade do |t|\n  t.string \"slug\"\nend\n</code></pre>\n\n<p>But when i check my db schema on heroku the column <code>slug</code> is not there. Iv even pushed all the changes up and when i run <code>heroku run rake db:migrate</code> I get an error:</p>\n\n<pre><code>PG::UndefinedColumn: ERROR:  column \"slug\" of relation \"posts\" does not exist\n</code></pre>\n\n<p>any help on how i can add this column to work on heroku?</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "watir", "geckodriver"], "comments": [{"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1485318032, "post_id": 41839585, "comment_id": 70871337, "body": "Add it in Ruby23/bin"}, {"owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "reply_to_user": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1485332807, "post_id": 41839585, "comment_id": 70877409, "body": "@Gopal I moved geckodriver to <code>&#47;path&#47;.rvm&#47;rubies&#47;ruby-2.3.1&#47;bin&#47;</code> and I get the same error message. So it must be finding it there, but the issue remains..."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1485336650, "post_id": 41839585, "comment_id": 70879938, "body": "What about Chrome? Chrome is working fine?"}, {"owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "reply_to_user": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1485336730, "post_id": 41839585, "comment_id": 70879978, "body": "@Gopal Chrome works."}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1485336860, "post_id": 41839585, "comment_id": 70880089, "body": "Place your Chrome driver in this path and check whether it works or not."}, {"owner": {"reputation": 116828, "user_id": 55075, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8bbc94977312d285045b2412257b6cb8?s=128&d=identicon&r=PG", "display_name": "kenorb", "link": "https://stackoverflow.com/users/55075/kenorb"}, "edited": false, "score": 3, "creation_date": 1521650903, "post_id": 41839585, "comment_id": 85826018, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/39699531/unable-to-connect-to-geckodriver\">Unable to connect to Geckodriver</a>"}, {"owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "reply_to_user": {"reputation": 116828, "user_id": 55075, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/8bbc94977312d285045b2412257b6cb8?s=128&d=identicon&r=PG", "display_name": "kenorb", "link": "https://stackoverflow.com/users/55075/kenorb"}, "edited": false, "score": 0, "creation_date": 1521651352, "post_id": 41839585, "comment_id": 85826336, "body": "@kenorb The accepted answer on the linked question is directly opposite what I am asking for. Please see my updates."}], "owner": {"reputation": 1061, "user_id": 1651458, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/DQZz9.jpg?s=128&g=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1651458/sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1126, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1521651292, "creation_date": 1485294549, "last_edit_date": 1521651292, "question_id": 41839585, "link": "https://stackoverflow.com/questions/41839585/ruby-watir-unable-to-connect-to-mozilla-geckodriver", "title": "Ruby Watir unable to connect to Mozilla geckodriver", "body": "<p>I'm trying to upgrade Firefox, from a version before whatever disaster has befallen the driver situation, to the most recent version for macOS (which seems to be 50.1.0). I upgraded to the latest selenium-webdriver (3.0.5) and watir (6.1.0, formerly watir-webdriver).</p>\n\n<p>I downloaded the latest geckodriver (0.13.0), added it to <code>usr/bin/local</code> and made it executable, which stopped the <code>Unable to find Mozilla geckodriver</code> errors. However ... </p>\n\n<pre><code>$ irb\n2.3.1 :001 &gt; require 'watir'\n2.3.1 :002 &gt; b = Watir::Browser.new :firefox\nSelenium::WebDriver::Error::WebDriverError: unable to connect to Mozilla geckodriver 127.0.0.1:4444\n    from /path/.rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.0.5/lib/selenium/webdriver/common/service.rb:130:in `connect_until_stable'\n    from /path/.rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.0.5/lib/selenium/webdriver/common/service.rb:74:in `block in start'\n    from /path/.rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.0.5/lib/selenium/webdriver/common/socket_lock.rb:41:in `locked'\n    from /path/.rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.0.5/lib/selenium/webdriver/common/service.rb:71:in `start'\n    from /path/.rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.0.5/lib/selenium/webdriver/firefox/w3c_bridge.rb:32:in `initialize'\n    from /path/.rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.0.5/lib/selenium/webdriver/common/driver.rb:52:in `new'\n    from /path/.rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.0.5/lib/selenium/webdriver/common/driver.rb:52:in `for'\n    from /path/.rvm/gems/ruby-2.3.1/gems/selenium-webdriver-3.0.5/lib/selenium/webdriver.rb:82:in `for'\n    from /path/.rvm/gems/ruby-2.3.1/gems/watir-6.1.0/lib/watir/browser.rb:46:in `initialize'\n    from (irb):2:in `new'\n    from (irb):2\n    from /path/.rvm/rubies/ruby-2.3.1/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n\n<p>I can't find any documentation about what else I can do at this point. Chrome works just fine, but I require Firefox. Since the Firefox driver 'just worked' before, I'm not sure what if any tools I have for diagnosis. (The Watir/Watir-Webdriver documentation still says Firefox just works.) Any hints would be much appreciated...</p>\n\n<p><a href=\"https://stackoverflow.com/questions/39699531/unable-to-connect-to-geckodriver\">The marked duplicate question</a> is perhaps a duplicate error, but the accepted answer is to roll back the interlocking technologies' versions. That is the literal opposite of what I was attempting to accomplish. </p>\n\n<p>Also, I was (and am) specifically looking for documentation and/or diagnostic tools that detail or uncover which versions of watir, selenium-webdriver, geckodriver and Firefox (or some subset thereof) play nicely together.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "scope", "rails-activerecord"], "comments": [{"owner": {"reputation": 1447, "user_id": 2841163, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b6a24dd9e04281d23a50aafb2c8ff10c?s=128&d=identicon&r=PG", "display_name": "stcho", "link": "https://stackoverflow.com/users/2841163/stcho"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1485295138, "post_id": 41839393, "comment_id": 70864670, "body": "@muistooshort I am using psql"}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1485299218, "creation_date": 1485299218, "answer_id": 41840595, "question_id": 41839393, "link": "https://stackoverflow.com/questions/41839393/rails-scope-with-combined-attributes/41840595#41840595", "title": "Rails scope with combined attributes", "body": "<p>The easiest thing to do with PostgreSQL is to convert your <code>duration</code> to an <code>interval</code> and add that <code>interval</code> to your timestamp. Something like this:</p>\n\n<pre><code>where(\"checkin_time + (duration || 'hours')::interval &gt;= ?\", Time.now)\n</code></pre>\n\n<p>or even:</p>\n\n<pre><code>where(\"checkin_time + (duration || 'hours')::interval &gt;= now()\")\n</code></pre>\n\n<p>The <code>duration || 'hours'</code> builds a string like <code>'6hours'</code> and then the <code>::interval</code> casts that string to an <code>interval</code> which can be added to a timestamp.</p>\n"}], "owner": {"reputation": 1447, "user_id": 2841163, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b6a24dd9e04281d23a50aafb2c8ff10c?s=128&d=identicon&r=PG", "display_name": "stcho", "link": "https://stackoverflow.com/users/2841163/stcho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 41840595, "answer_count": 1, "score": 0, "last_activity_date": 1485303845, "creation_date": 1485293720, "last_edit_date": 1485303845, "question_id": 41839393, "link": "https://stackoverflow.com/questions/41839393/rails-scope-with-combined-attributes", "title": "Rails scope with combined attributes", "body": "<p>I am trying to create a scope where checkin_time (DateTime) is added with duration (Int) in hours which is greater than or equal to Time.now</p>\n\n<p>So something like this</p>\n\n<pre><code>scope :current, -&gt; { where('checkin_time + duration.hours &gt;= ?', Time.now) }\n</code></pre>\n\n<p>However, the string <code>'checkin_time + duration.hours &gt;= ?'</code> above is not valid. How can I achieve something that will give me the correct result?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 0, "creation_date": 1485294235, "post_id": 41839247, "comment_id": 70864275, "body": "Have a think about which points in your program you should be resetting <code>$noOfGuesses</code> to 0.. and when you might want to increase or reset <code>$totalNoOfGuesses</code>."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1485295024, "post_id": 41839247, "comment_id": 70864606, "body": "When doing Ruby try not to use global variables so casually. <code>$</code> has very particular meaning in Ruby unlike other languages such as PHP or Perl."}, {"owner": {"reputation": 1, "user_id": 6675814, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206676507128089/picture?type=large", "display_name": "Heather Rogers", "link": "https://stackoverflow.com/users/6675814/heather-rogers"}, "edited": false, "score": 1, "creation_date": 1485295286, "post_id": 41839247, "comment_id": 70864733, "body": "Well that was easier than I had made it out to be! I was thinking that there was something more to it. Thanks."}, {"owner": {"reputation": 1, "user_id": 6675814, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206676507128089/picture?type=large", "display_name": "Heather Rogers", "link": "https://stackoverflow.com/users/6675814/heather-rogers"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485295717, "post_id": 41839247, "comment_id": 70864928, "body": "@tadman I thought that I was using the global variable too much. Which type of variable should I be using in this case? Class? Instance?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1485297456, "post_id": 41839247, "comment_id": 70865693, "body": "If you&#39;re wrapping this up inside a class, <code>@</code>-style instance variables are the way to go <i>if</i> you need to preserve values between method calls. In this case you can use regular local variables, no <code>$</code> or <code>@</code> prefix is necessary. Globals should be used very, very sparingly. For example, I&#39;ve written untold thousands of lines of Ruby code and have never been forced to go down that road yet, there&#39;s usually a better way to do it. Might seem like a minor quibble, but globals cause surprises, and surprises are usually bad."}, {"owner": {"reputation": 1, "user_id": 6675814, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206676507128089/picture?type=large", "display_name": "Heather Rogers", "link": "https://stackoverflow.com/users/6675814/heather-rogers"}, "edited": false, "score": 0, "creation_date": 1485297665, "post_id": 41839247, "comment_id": 70865785, "body": "ok, awesome. Thanks so much!"}], "owner": {"reputation": 1, "user_id": 6675814, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206676507128089/picture?type=large", "display_name": "Heather Rogers", "link": "https://stackoverflow.com/users/6675814/heather-rogers"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 214, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485293055, "creation_date": 1485293055, "question_id": 41839247, "link": "https://stackoverflow.com/questions/41839247/calculate-total-number-of-guesses-in-number-guessing-game-ruby", "title": "calculate total number of guesses in number guessing game ruby", "body": "<p>To calculate $totalNoOfGuesses you would add $noOfGuesses together from each game played, correct? How do I execute that in my code? I've tried several different options, but it doesn't work. Am I supposed to be creating an array or something?</p>\n\n<pre><code>def play_game\n    $noOfGuesses=0 \n    $gameCount+=1\n\nnumber = generate_number  \n\nloop do\n  print \"\\nEnter your guess and press the Enter key: \"\n  reply = STDIN.gets  \n  reply.chop!         \n  reply = reply.to_i  \n    $noOfGuesses+=1 \n</code></pre>\n\n<p>Between this would be if reply > or &lt;, too high or too low...  reply = get.to_i</p>\n\n<pre><code>  $noOfGuesses=0   \n  $gameCount=0   \n  $totalNoOfGuesses=0 \n  $avgNoOfGuesses=0 \n\n  answer = \"\"\n\n  loop do\n\n  Console_Screen.cls  \n  print \"Are you ready to play the Ruby Number Guessing Game? (y/n): \"\n\n  answer = STDIN.gets  \n  answer.chop!  \n\n  break if answer == \"y\" || answer == \"n\" \n\n  end \n\n  if answer == \"n\"  \n  Console_Screen.cls  \n  puts \"Okay, perhaps another time.\\n\\n\"\n\n  else  \n\n   loop do\n\n   SQ.play_game\n\n   Console_Screen.cls  \n\n    print \"It took you #{$noOfGuesses} attempt#{'s' if $noOfGuesses &gt; 1}.\\n\"\n    print \"You have played #{$gameCount} time#{'s' if $gameCount &gt; 1}.\\n\"\n    print \"It has taken you #{$totalNoOfGuesses} attempts in #{$gameCount} game#{'s' if $gameCount &gt;1}.\\n\\n\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1485296205, "post_id": 41839114, "comment_id": 70865154, "body": "Can you please post the full error message including the stack trace?"}, {"owner": {"reputation": 73, "user_id": 6011994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-tFq3jQ7yP88/AAAAAAAAAAI/AAAAAAAAEOI/K7jc9Bjl1AY/photo.jpg?sz=128", "display_name": "Esam Mohamed", "link": "https://stackoverflow.com/users/6011994/esam-mohamed"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1485347523, "post_id": 41839114, "comment_id": 70887085, "body": "i added the error that i see in cmd , could you check it Please?"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1485347831, "post_id": 41839114, "comment_id": 70887250, "body": "Look at the params: <code>&quot;category_ids&quot;=&gt;[&quot;1&quot;, &quot;&quot;]</code> It seems like you send an invalid category id to the application."}, {"owner": {"reputation": 73, "user_id": 6011994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-tFq3jQ7yP88/AAAAAAAAAAI/AAAAAAAAEOI/K7jc9Bjl1AY/photo.jpg?sz=128", "display_name": "Esam Mohamed", "link": "https://stackoverflow.com/users/6011994/esam-mohamed"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1485354950, "post_id": 41839114, "comment_id": 70892218, "body": "so what? what can i do ?"}, {"owner": {"reputation": 73, "user_id": 6011994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-tFq3jQ7yP88/AAAAAAAAAAI/AAAAAAAAEOI/K7jc9Bjl1AY/photo.jpg?sz=128", "display_name": "Esam Mohamed", "link": "https://stackoverflow.com/users/6011994/esam-mohamed"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1485632156, "post_id": 41839114, "comment_id": 71009243, "body": "any suggestion ??"}], "owner": {"reputation": 73, "user_id": 6011994, "user_type": "registered", "accept_rate": 71, "profile_image": "https://lh5.googleusercontent.com/-tFq3jQ7yP88/AAAAAAAAAAI/AAAAAAAAEOI/K7jc9Bjl1AY/photo.jpg?sz=128", "display_name": "Esam Mohamed", "link": "https://stackoverflow.com/users/6011994/esam-mohamed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1485347453, "creation_date": 1485292450, "last_edit_date": 1485347453, "question_id": 41839114, "link": "https://stackoverflow.com/questions/41839114/rails-nomethoderror-in-articlescontrollercreate-after-adding-checkbox", "title": "rails NoMethodError in ArticlesController#create after adding checkbox", "body": "<p>I received the following error after adding checkbox in article view (_form)</p>\n\n<blockquote>\n  <p>NoMethodError in ArticlesController#create\n  undefined method `name' for nil:NilClass</p>\n  \n  <p>Extracted source (around line #52): 50 51 52 53 54 55</p>\n</blockquote>\n\n<pre><code>@article = Article.new(article_params)\n@article.user = current_user\nif @article.save\n   flash[:success]=\"Your Tip has been Created\"\n  redirect_to article_path(@article)\nelse\n</code></pre>\n\n<p>this is the view page  _form in article view:</p>\n\n<pre><code>&lt;%=render'shared/errors',obj: @article%&gt;\n\n   &lt;div class='row'&gt;\n   &lt;div class='col-xs-12'&gt;\n     &lt;%= form_for(@article, :html =&gt; {class: \"form-horizontal\", role: \"form\"}) do |f| %&gt;\n   &lt;div class='form-group'&gt;\n   &lt;div class=\"control-label col-sm-2\"&gt;\n    &lt;%= f.label :title %&gt;\n   &lt;/div&gt;\n   &lt;div class =\"col-sm-7\"&gt;\n    &lt;%= f.text_field :title,class:\"form-control\",placeholder:\"Title of Tip\",autofocus:true %&gt;\n   &lt;/div&gt;\n   &lt;/div&gt;\n         &lt;div class='form-group'&gt;\n           &lt;div class=\"control-label col-sm-2\"&gt;\n    &lt;%= f.label :description %&gt;\n           &lt;/div&gt;\n           &lt;div class =\"col-sm-8\"&gt;\n    &lt;%= f.text_area :description,rows:10,class:\"form-control\",placeholder:\"Make it short\" %&gt;\n           &lt;/div&gt;\n         &lt;/div&gt;\n         &lt;div class=\"form-group\"&gt;\n           &lt;div class=\"row\"&gt;\n             &lt;div class=\"col-sm-offset-2 col-sm-10\"&gt;\n               &lt;%= f.collection_check_boxes :category_ids, Category.all, :id, :name do |cb| %&gt;\n                   &lt;% cb.label(class: \"checkbox-inline input_checkbox\") {cb.check_box(class: \"checkbox\") + cb.text} %&gt;\n               &lt;% end %&gt;\n           &lt;/div&gt;\n           &lt;/div&gt;\n         &lt;/div&gt;\n         &lt;div class='form-group'&gt;\n           &lt;div class=\"col-sm-offset-2 col-sm-10\"&gt;\n      &lt;%= f.submit class:'btn btn-danger btn-lg'%&gt;\n           &lt;/div&gt;\n         &lt;/div&gt;\n         &lt;div class=\"col-xs-4 col-xs-offset-4\"&gt;\n    [&lt;%= link_to 'Cancel and Back to Tips',articles_path%&gt;]\n         &lt;/div&gt;\n&lt;% end %&gt;\n   &lt;/div&gt;\n   &lt;/div&gt;\n</code></pre>\n\n<p>this is the article controller :</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n   before_action :set_article,only: [:edit ,:update ,:destroy,:show]\n   before_action :require_user,except: [:index,:show]\n   before_action :require_same_user,only:[:edit,:update,:destroy]\n\n   def home\n   redirect_to articles_path\n   end\n\n  def index\n    @articles = Article.all.order(\"created_at DESC\").paginate(page:params[:page], per_page: 6 )\n\n  end\n\n  def new\n    @article = Article.new\n\n  end\n\n  def destroy\n\n    @article.destroy\n    redirect_to articles_path\n    flash[:danger] = \"\u0650Your Tip has been Deleted\"\n\n  end\n\n  def edit\n\n\n  end\n\n  def update\n\n    if @article.update(article_params)\n       flash[:success] = \"\u0650Your Tip has been Updated\"\n       redirect_to article_path(@article)\n    else\n      render 'edit'\n    end\n\n  end\n\n  def show\n\n\n  end\n\n  def create\n    @article = Article.new(article_params)\n    @article.user = current_user\n    if @article.save\n       flash[:success]=\"Your Tip has been Created\"\n      redirect_to article_path(@article)\n    else\n      render 'new'\n    end\n  end\n\n  private\n\n  def set_article\n   @article = Article.find(params[:id])\n  end\n\n   def article_params\n     params.require(:article).permit(:title, :description, category_ids:[])\n\n   end\n\n  def require_same_user\n if current_user !=  @article.user and !current_user.admin?\n   flash[:danger]=\"You can only Edit your own Tips\"\n   redirect_to articles_path\n end\n  end\nend\n</code></pre>\n\n<p>I have added check box to let user select category to his article, but received the mention error.</p>\n\n<p>this is the Repository Link :\n   <a href=\"https://github.com/essam11/Tips-Gator\" rel=\"nofollow noreferrer\">https://github.com/essam11/Tips-Gator</a>`</p>\n\n<pre><code>enter code here\n</code></pre>\n\n<p>UPDATE:\nthis is the error that i see in cmd</p>\n\n<pre><code>    C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/activesupport-4.0.0/lib/active_support/values/time_zone.rb:282: warning: circular argument reference - now\n=&gt; Booting WEBrick\n=&gt; Rails 4.0.0 application starting in development on http://0.0.0.0:3000\n=&gt; Run `rails server -h` for more startup options\n=&gt; Ctrl-C to shutdown server\n[2017-01-25 14:26:27] INFO  WEBrick 1.3.1\n[2017-01-25 14:26:27] INFO  ruby 2.2.4 (2015-12-16) [x64-mingw32]\n[2017-01-25 14:26:27] INFO  WEBrick::HTTPServer#start: pid=3884 port=3000\n\n\nStarted POST \"/articles\" for 127.0.0.1 at 2017-01-25 14:26:28 -0800\n  ActiveRecord::SchemaMigration Load (1.0ms)  SELECT \"schema_migrations\".* FROM \"schema_migrations\"\nProcessing by ArticlesController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"PhHhY2JjMjNVM+bT8UmXTRcduOdq9DRKJxKzJz3OfIQ=\", \"article\"=&gt;{\"title\"=&gt;\"xxxxxxxxxxxxxxx\", \"description\"=&gt;\"xxxxxxxxxxxxxxxx\", \"category_ids\"=&gt;[\"1\", \"\"]}, \"commit\"=&gt;\"Create Article\"}\n  User Load (7.0ms)  SELECT \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? LIMIT 1  [[\"id\", 9]]\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/activerecord-4.0.0/lib/active_record/associations/has_many_association.rb:75: warning: circular argument reference - reflection\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/activerecord-4.0.0/lib/active_record/associations/has_many_association.rb:79: warning: circular argument reference - reflection\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/activerecord-4.0.0/lib/active_record/associations/has_many_association.rb:83: warning: circular argument reference - reflection\nC:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/activerecord-4.0.0/lib/active_record/associations/has_many_association.rb:102: warning: circular argument reference - reflection\n  Category Load (0.0ms)  SELECT \"categories\".* FROM \"categories\" WHERE \"categories\".\"id\" = ? LIMIT 1  [[\"id\", 1]]\n   (0.0ms)  begin transaction\n  Category Exists (1.0ms)  SELECT 1 AS one FROM \"categories\" WHERE (\"categories\".\"name\" = 'Windows' AND \"categories\".\"id\" != 1) LIMIT 1\n  SQL (42.0ms)  INSERT INTO \"articles\" (\"created_at\", \"description\", \"title\", \"updated_at\", \"user_id\") VALUES (?, ?, ?, ?, ?)  [[\"created_at\", Wed, 25 Jan 2017 22:26:29 UTC +00:00], [\"description\", \"xxxxxxxxxxxxxxxx\"], [\"title\", \"xxxxxxxxxxxxxxx\"], [\"updated_at\", Wed, 25 Jan 2017 22:26:29 UTC +00:00], [\"user_id\", 9]]\n  SQL (1.0ms)  INSERT INTO \"article_categories\" (\"article_id\", \"category_id\") VALUES (?, ?)  [[\"article_id\", 66], [\"category_id\", 1]]\n   (57.0ms)  rollback transaction\nCompleted 500 Internal Server Error in 470ms\n\nNoMethodError (undefined method `name' for nil:NilClass):\n  app/controllers/articles_controller.rb:52:in `create'\n\n\n  Rendered C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (2.0ms)\n  Rendered C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (13.0ms)\n  Rendered C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (2.0ms)\n  Rendered C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (1231.8ms)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rails-activerecord"], "comments": [{"owner": {"reputation": 197, "user_id": 1094706, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bff95328fa83f1471e167587949730d?s=128&d=identicon&r=PG", "display_name": "Manu Kanthan", "link": "https://stackoverflow.com/users/1094706/manu-kanthan"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1485294214, "post_id": 41838905, "comment_id": 70864268, "body": "I&#39;m using Postgres. Simple <code>1.2.3</code> format is acceptable. This has nothing to do with any of my gem versions - but I thought that the comparator was at least good enough for my needs."}, {"owner": {"reputation": 197, "user_id": 1094706, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bff95328fa83f1471e167587949730d?s=128&d=identicon&r=PG", "display_name": "Manu Kanthan", "link": "https://stackoverflow.com/users/1094706/manu-kanthan"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1485295459, "post_id": 41838905, "comment_id": 70864811, "body": "I think it is easy enough to do this <code>Update.all.select { |u| Gem::Version.new(u.version) &gt; Gem::Version.new(&quot;2.0&quot;) }</code> but I was just wondering if there was a way to combine it with <code>.where</code> as to filter the results based on other attributes as well."}], "answers": [{"tags": [], "owner": {"reputation": 2276, "user_id": 4164651, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/100004012909097/picture?type=large", "display_name": "Edmund Lee", "link": "https://stackoverflow.com/users/4164651/edmund-lee"}, "is_accepted": false, "score": 0, "last_activity_date": 1485293777, "last_edit_date": 1495541804, "creation_date": 1485293777, "answer_id": 41839409, "question_id": 41838905, "link": "https://stackoverflow.com/questions/41838905/rails-activerecord-using-where-with-a-custom-comparator/41839409#41839409", "title": "Rails: ActiveRecord using where with a custom comparator", "body": "<p>No, you cannot use it this way.</p>\n\n<p><code>&amp;</code> operator turns a method into a proc, and pass it the argument when you invoke a method that takes a block (like those enumerable methods). Check out this thread for additional info.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/9429819/what-is-the-functionality-of-operator-in-ruby\">what is the functionality of &quot;&amp;: &quot; operator in ruby?</a></p>\n\n<p>The <code>where</code> method does not take block. When you call <code>where(...)</code>, you are essentially calling <code>WhereChain.new(...)</code>. Refeter this here:</p>\n\n<p><a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/query_methods.rb\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/master/activerecord/lib/active_record/relation/query_methods.rb</a></p>\n\n<p>What you are trying to do can be accomplished by wrapping the method into a sql object, or simply a method that returns a sql string. But unfortunately, I don't think sql (mysql in particular) has comparison operation like <code>&gt;</code>, <code>&lt;</code> for strings (or varchar). So you can't do it natively in sql, which means, you won't be able to generate a sql string and pass it to the <code>where</code> clause to achieve this. Refer to sql doc here:</p>\n\n<p><a href=\"https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_greater-than\" rel=\"nofollow noreferrer\">https://dev.mysql.com/doc/refman/5.7/en/comparison-operators.html#operator_greater-than</a></p>\n\n<p>Given the use case, there are very limited number of versions for a particular gem update, so imho, it's safe and fast to just get all the records and operate on the ruby level.</p>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 1, "last_activity_date": 1485301909, "creation_date": 1485301909, "answer_id": 41841044, "question_id": 41838905, "link": "https://stackoverflow.com/questions/41838905/rails-activerecord-using-where-with-a-custom-comparator/41841044#41841044", "title": "Rails: ActiveRecord using where with a custom comparator", "body": "<p>You can't use Ruby methods inside the database and everything in a <code>where</code> is executed inside the database. You can, however, implement simple <code>major.minor.patch</code> version number comparisons inside the database.</p>\n\n<p>PostgreSQL supports array columns and arrays compare element by element so things like:</p>\n\n<pre><code>array[1,2,3] &lt; array[1,5,0]\n</code></pre>\n\n<p>work as expected inside the database (i.e. the same as <code>[1,2,3] &lt; [1,5,0]</code> in Ruby).</p>\n\n<hr>\n\n<p>One approach would be to convert your string column to an array of integers, send the version number into the database as an array, and let the database do the comparison. A migration like:</p>\n\n<pre><code>connection.execute(%q{\n  alter table updates\n  alter column version\n  set type int[] using regexp_split_to_array(version, '\\\\.')::int[]\n})\n</code></pre>\n\n<p>should take care of the database. Then you could say:</p>\n\n<pre><code>def version_is_greater_than(that_version)\n  self.version &gt; that_version.split('.').map(&amp;:to_i)\nend\n</code></pre>\n\n<p>or query the database:</p>\n\n<pre><code>def self.version_is_greater_than(that_version)\n  where('version &gt; array[?]', that_version.split('.').map(&amp;:to_i))\nend\n</code></pre>\n\n<p>You'd need to update the code that reads and writes <code>version</code>s to account for the new type of the <code>version</code> column as well.</p>\n\n<hr>\n\n<p>Alternatively, you could leave <code>version</code> as a string in the database and use <code>regexp_split_to_array</code> in a <code>where</code> call when you need to compare things:</p>\n\n<pre><code>where(%q{\n  regexp_split_to_array(version, '\\\\.')::int[] &gt; array[?]\n}, that_version.split('.').map(&amp;:to_i))\n</code></pre>\n\n<hr>\n\n<p>There is PL/Ruby that allows you to write stored procedures in Ruby but it hasn't been updated for seven years and assumes that Ruby 1.8.7 is current. We can pretend that it doesn't exist.</p>\n"}], "owner": {"reputation": 197, "user_id": 1094706, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7bff95328fa83f1471e167587949730d?s=128&d=identicon&r=PG", "display_name": "Manu Kanthan", "link": "https://stackoverflow.com/users/1094706/manu-kanthan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 41841044, "answer_count": 2, "score": 1, "last_activity_date": 1485301909, "creation_date": 1485291603, "question_id": 41838905, "link": "https://stackoverflow.com/questions/41838905/rails-activerecord-using-where-with-a-custom-comparator", "title": "Rails: ActiveRecord using where with a custom comparator", "body": "<p>I have a model called <code>Update</code> which contains column <code>:version</code> which is a string.</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Update &lt; ApplicationRecord\n  validates_presence_of :version\nend\n</code></pre>\n\n<p>The <code>version</code> column contains string values such as <code>1.0.1</code>.  Using <code>Gem::Version</code>, you can compare version numbers like this:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>Gem::Version.new('2.1') &gt; Gem::Version.new('2.0.1')\n</code></pre>\n\n<p>I'd like to do a query where I can get all of the records with <code>version</code> above a certain number. Is there a way to pass a custom method to <code>.where</code> so that I can use the version comparator? Such as:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Update &lt; ApplicationRecord\n  def version_is_greater_than(that_version)\n    Gem::Version.new(self.version) &gt; Gem::Version.new(that_version)\n  end\nend\n</code></pre>\n\n<p>...</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>Update.where(&amp;:version_is_greater_than)\n</code></pre>\n\n<p>As you can see, the aforementioned code does not work because I need to pass a version string into that method which I can't seem to do via <code>&amp;:</code>. Is there a better way to do this so that I can just compare the values within the <code>.where</code> call? I am trying to stay away from splitting out the major/minor/etc. numbers because I'd just be reinventing the wheel there.</p>\n"}]