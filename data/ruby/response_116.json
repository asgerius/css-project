[{"tags": ["ruby", "postgresql", "heroku", "rack", "puma"], "answers": [{"tags": [], "owner": {"reputation": 1338, "user_id": 1208036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d0aacd5e5be303d2b09ec751f207b8c?s=128&d=identicon&r=PG", "display_name": "Bobby Matson", "link": "https://stackoverflow.com/users/1208036/bobby-matson"}, "is_accepted": false, "score": 1, "last_activity_date": 1490840716, "creation_date": 1490840716, "answer_id": 43107414, "question_id": 43105981, "link": "https://stackoverflow.com/questions/43105981/heroku-postgres-ruby-puma-workers-threads/43107414#43107414", "title": "Heroku Postgres Ruby Puma Workers &amp; Threads", "body": "<p>Based on <a href=\"https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server#workers\" rel=\"nofollow noreferrer\">this article</a> it seems like you'd be safe running 2-4 processes within a single Heroku web dyno depending on your memory usage. For threads, I'd stick to the default (5) depending on the needs of your app.</p>\n\n<p>I'd recommend tuning your app to use a particular config then keeping an eye on the Heroku logs for a few days to see if you get too many <code>R14</code> errors. At that point, you know you've exhausted the dyno and should scale it back.</p>\n"}, {"tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 1, "last_activity_date": 1490865717, "creation_date": 1490865717, "answer_id": 43113584, "question_id": 43105981, "link": "https://stackoverflow.com/questions/43105981/heroku-postgres-ruby-puma-workers-threads/43113584#43113584", "title": "Heroku Postgres Ruby Puma Workers &amp; Threads", "body": "<p>It depends greatly on how memory-hungry your application is. Given that it's a pure Rack app and most of the literature out there are for Rails apps - I'd imagine that your optimal values are higher.</p>\n\n<p>The Librato add-on is really helpful here in letting you see your memory usage in near real-time, so you can quickly tweak and monitor how close you are to the 512MB limit. There's a free tier there, and it doesn't need any additional instrumentation either (I'm not affiliated with them in any way, but we do use their service!)</p>\n"}], "owner": {"reputation": 105574, "user_id": 242933, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7e6e0e2b73358e47e0b7f83f8111f75b?s=128&d=identicon&r=PG", "display_name": "ma11hew28", "link": "https://stackoverflow.com/users/242933/ma11hew28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 271, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490865717, "creation_date": 1490830366, "question_id": 43105981, "link": "https://stackoverflow.com/questions/43105981/heroku-postgres-ruby-puma-workers-threads", "title": "Heroku Postgres Ruby Puma Workers &amp; Threads", "body": "<p>For a pure Rack app running on a Heroku hobby dyno with a Heroku Postgres hobby dev add-on, how do you know how many workers &amp; threads to configure Puma to have?</p>\n"}, {"tags": ["ruby", "process", "global-variables", "puma"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1490831175, "post_id": 43105950, "comment_id": 73293400, "body": "This actually doesn&#39;t have that much to do with Ruby. A process in general is a self-contained isolated environment. Forking is like starting a new program from the command line, the only difference is that you copy the running state of the current process into your new process."}], "answers": [{"tags": [], "owner": {"reputation": 186, "user_id": 7471556, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5daae352aef5a3a21134886ed345de22?s=128&d=identicon&r=PG", "display_name": "Steve Harris", "link": "https://stackoverflow.com/users/7471556/steve-harris"}, "is_accepted": false, "score": 1, "last_activity_date": 1490830743, "last_edit_date": 1490830743, "creation_date": 1490830318, "answer_id": 43105972, "question_id": 43105950, "link": "https://stackoverflow.com/questions/43105950/is-a-ruby-global-variable-different-per-process/43105972#43105972", "title": "Is a Ruby global variable different per process?", "body": "<p>Yes, globals should be unique per process.</p>\n"}], "owner": {"reputation": 105574, "user_id": 242933, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/7e6e0e2b73358e47e0b7f83f8111f75b?s=128&d=identicon&r=PG", "display_name": "ma11hew28", "link": "https://stackoverflow.com/users/242933/ma11hew28"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490830743, "creation_date": 1490830221, "question_id": 43105950, "link": "https://stackoverflow.com/questions/43105950/is-a-ruby-global-variable-different-per-process", "title": "Is a Ruby global variable different per process?", "body": "<p>Is the value of a Ruby global variable different for each process?</p>\n\n<p>For example, if I do <code>$count = 5</code>, will that change the value of <code>$count</code> on another process?</p>\n\n<p>I'm wondering this because <a href=\"https://github.com/puma/puma#clustered-mode\" rel=\"nofollow noreferrer\">Puma clustered mode can fork multiple processes (workers)</a>, and I want to make sure <code>$count</code> is unique per worker.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "require"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 2, "creation_date": 1490830927, "post_id": 43105927, "comment_id": 73293336, "body": "Did you <code>gem install NexposeRunner</code>?"}, {"owner": {"reputation": 107, "user_id": 3462378, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1138e2cc2cb0617c513fa50349d1495c?s=128&d=identicon&r=PG&f=1", "display_name": "Glitteropia", "link": "https://stackoverflow.com/users/3462378/glitteropia"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1490845932, "post_id": 43105927, "comment_id": 73297046, "body": "@Casper , this fixed my problem! Can you put it as an answer so I can select it?"}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 7784239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ebcd007e24848a38afd6420fc7633b?s=128&d=identicon&r=PG&f=1", "display_name": "W.Ranger", "link": "https://stackoverflow.com/users/7784239/w-ranger"}, "is_accepted": false, "score": 2, "last_activity_date": 1490842305, "creation_date": 1490842305, "answer_id": 43107653, "question_id": 43105927, "link": "https://stackoverflow.com/questions/43105927/ruby-loaderror-issue-with-require/43107653#43107653", "title": "Ruby LoadError issue with &#39;require&#39;", "body": "<p>please check the local gem list:  gem list --local</p>\n"}], "owner": {"reputation": 107, "user_id": 3462378, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1138e2cc2cb0617c513fa50349d1495c?s=128&d=identicon&r=PG&f=1", "display_name": "Glitteropia", "link": "https://stackoverflow.com/users/3462378/glitteropia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 414, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490842305, "creation_date": 1490830082, "question_id": 43105927, "link": "https://stackoverflow.com/questions/43105927/ruby-loaderror-issue-with-require", "title": "Ruby LoadError issue with &#39;require&#39;", "body": "<p>I have researched this for quite some time, and have yet to solve my issue. Here is the error that I am receiving:</p>\n\n<pre><code>C:/Ruby23/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': cannot load such file -- nexpose-runner/constants (LoadError)\n  from C:/Ruby23/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in require'\n  from scan.rb:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>require 'nexpose'\nrequire 'csv'\nrequire 'json'\nrequire 'nexpose-runner/constants'\nrequire 'nexpose-runner/scan_run_description'\n\nmodule NexposeRunner\nmodule Scan\ndef Scan.start(options)\n\n  run_details = ScanRunDescription.new(options)\n  run_details.verify\n\n  nsc = get_new_nexpose_connection(run_details)\n\n  site = create_site(run_details, nsc)\n\n  start_scan(nsc, site, run_details)\n\n  reports = generate_reports(nsc, site, run_details)\n\n  verify_run(reports[0])\nend\n\ndef self.generate_reports(nsc, site, run_details)\n  puts \"Scan complete for #{run_details.site_name}, Generating Vulnerability Report\"\n  vulnerbilities = generate_report(CONSTANTS::VULNERABILITY_REPORT_QUERY, site.id, nsc)\n  generate_csv(vulnerbilities, CONSTANTS::VULNERABILITY_REPORT_NAME)\n\n  puts \"Scan complete for #{run_details.site_name}, Generating Vulnerability Detail Report\"\n  vuln_details = generate_report(CONSTANTS:: VULNERABILITY_DETAIL_REPORT_QUERY, site.id, nsc)\n  generate_csv(vuln_details, CONSTANTS::VULNERABILITY_DETAIL_REPORT_NAME)\n\n  puts \"Scan complete for #{run_details.site_name}, Generating Software Report\"\n  software = generate_report(CONSTANTS::SOFTWARE_REPORT_QUERY, site.id, nsc)\n  generate_csv(software, CONSTANTS::SOFTWARE_REPORT_NAME)\n\n  puts \"Scan complete for #{run_details.site_name}, Generating Policy Report\"\n  policies = generate_report(CONSTANTS::POLICY_REPORT_QUERY, site.id, nsc)\n  generate_csv(policies, CONSTANTS::POLICY_REPORT_NAME)\n\n  puts \"Scan complete for #{run_details.site_name}, Generating Audit Report\"\n  generate_template_report(nsc, site.id, CONSTANTS::AUDIT_REPORT_FILE_NAME, CONSTANTS::AUDIT_REPORT_NAME, CONSTANTS::AUDIT_REPORT_FORMAT)\n\n  puts \"Scan complete for #{run_details.site_name}, Generating Xml Report\"\n  generate_template_report(nsc, site.id, CONSTANTS::XML_REPORT_FILE_NAME, CONSTANTS::XML_REPORT_NAME, CONSTANTS::XML_REPORT_FORMAT)\n\n  [vulnerbilities, software, policies]\nend\n\ndef self.verify_run(vulnerabilities)\n\n  raise StandardError, CONSTANTS::VULNERABILITY_FOUND_MESSAGE if vulnerabilities.count &gt; 0\n\nend\n\ndef self.start_scan(nsc, site, run_details)\n\n  puts \"Starting scan for #{run_details.site_name} using the #{run_details.scan_template} scan template\"\n  scan = site.scan nsc\n\n  begin\n    sleep(3)\n    stats = nsc.scan_statistics(scan.id)\nstatus = stats.status\n    puts \"Current #{run_details.site_name} scan status: #{status.to_s} -- PENDING: #{stats.tasks.pending.to_s} ACTIVE: #{stats.tasks.active.to_s} COMPLETED #{stats.tasks.completed.to_s}\"\n  end while status == Nexpose::Scan::Status::RUNNING\nend\n\ndef self.create_site(run_details, nsc)\n  puts \"Creating a nexpose site named #{run_details.site_name}\"\n  site = Nexpose::Site.new run_details.site_name, run_details.scan_template\n  run_details.ip_addresses.each { |address|\n      site.add_ip address\n  }\n  if run_details.engine\n    site.engine = run_details.engine\n  end\n  site.save nsc\n  puts \"Created site #{run_details.site_name} successfully with the following host(s) #{run_details.ip_addresses.join(', ')}\"\n\n  site\nend\n\ndef self.get_new_nexpose_connection(run_details)\n  nsc = Nexpose::Connection.new run_details.connection_url, run_details.username, run_details.password, run_details.port\n  nsc.login\n  puts 'Successfully logged into the Nexpose Server'\n  nsc\nend\n\ndef self.generate_report(sql, site, nsc)\n  report = Nexpose::AdhocReportConfig.new(nil, 'sql')\n  report.add_filter('version', '1.3.0')\n  report.add_filter('query', sql)\n  report.add_filter('site', site)\n  report_output = report.generate(nsc)\n  CSV.parse(report_output.chomp, {:headers =&gt; :first_row})\nend\n\ndef self.generate_template_report(nsc, site, file_name, report_name, report_format)\n  adhoc = Nexpose::AdhocReportConfig.new(report_name, report_format, site)\n  data = adhoc.generate(nsc)\n  File.open(file_name, 'w') { |file| file.write(data) }\nend\n\ndef self.generate_csv(csv_output, name)\n  CSV.open(name, 'w') do |csv_file|\n    csv_file &lt;&lt; csv_output.headers\n    csv_output.each do |row|\n      csv_file &lt;&lt; row\n      if name == CONSTANTS::VULNERABILITY_REPORT_NAME\n        puts '--------------------------------------'\n        puts \"IP: #{row[0]}\"\n        puts \"Vulnerability: #{row[1]}\"\n        puts \"Date Vulnerability was Published: #{row[2]}\"\n        puts \"Severity: #{row[3]}\"\n        puts \"Summary: #{row[4]}\"\n        puts '--------------------------------------'\n      end\n     end\n    end\n  end\n end\nend\n</code></pre>\n\n<p>In the command prompt, I am entering in the following code to run it (this file is called scan.rb):</p>\n\n<p><code>ruby scan.rb \"http://localhost:3780\" \"username\" \"password\" \"3780\" \"webpage\" \"ip-address\" \"full-audit-widget-corp\"</code></p>\n\n<p>So far, I've tried changing <code>require</code> to <code>require_relative</code>, as well as re-arranging the paths (like putting the whole path, for example). Neither has worked.</p>\n\n<p>I also made sure to have the Ruby Development Kit installed.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1490847726, "post_id": 43106176, "comment_id": 73297477, "body": "Could you explain why the docs suggest to create a subclass of <code>StandardError</code> and then have specific exception types inherit from it. I don&#39;t really get why we would do this: <a href=\"https://ruby-doc.org/core-2.2.0/Exception.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Exception.html</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 1, "creation_date": 1546577261, "post_id": 43106176, "comment_id": 94902403, "body": "@Jwan622 sorry I didn&#39;t respond to this for 1.5 years but by inheriting from StandardError you get all the built in behavior of that class, with the benefit of the ability to be specific about what error you&#39;re rescuing. It&#39;s better to use a custom error class than a built in error class, so you don&#39;t accidentally rescue something else."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 8, "last_activity_date": 1490831726, "last_edit_date": 1495540002, "creation_date": 1490831726, "answer_id": 43106176, "question_id": 43105871, "link": "https://stackoverflow.com/questions/43105871/can-you-rescue-from-specific-errors-with-messages-in-ruby/43106176#43106176", "title": "Can you rescue from specific errors with messages in ruby?", "body": "<p>See <a href=\"https://stackoverflow.com/a/23771227/2981429\">https://stackoverflow.com/a/23771227/2981429</a></p>\n\n<p>If you call <code>raise</code> inside a rescue block, the last raised exception will be re-raised.</p>\n\n<p>In your exception block, you can check the message and choose to re-raise or not:</p>\n\n<pre><code>begin\n  User.new.charge\nrescue RuntimeError =&gt; e\n  case e.message\n  when \"This is a runtime error\"\n    # put your handler code here\n  else\n    raise # re-raise the last exception\n  end\nend\n</code></pre>\n\n<p>However if it's your goal to solely rescue errors that you yourself raise manually, then it's probably easier to define a custom error class instead:</p>\n\n<pre><code>class MyError &lt; StandardError; end\n</code></pre>\n\n<p>Then instead of <code>raise RuntimeError.new(\"message\")</code> use <code>raise MyError.new(\"message\")</code>, and rescue it normally:</p>\n\n<pre><code>begin\n  User.new.charge\nrescue MyError =&gt; e\n  # handler\nend\n</code></pre>\n\n<p>This way you don't have to worry about your rescues interfering with the built-in exceptions. </p>\n"}], "owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2870, "favorite_count": 0, "accepted_answer_id": 43106176, "answer_count": 1, "score": 5, "last_activity_date": 1490831726, "creation_date": 1490829644, "question_id": 43105871, "link": "https://stackoverflow.com/questions/43105871/can-you-rescue-from-specific-errors-with-messages-in-ruby", "title": "Can you rescue from specific errors with messages in ruby?", "body": "<p>I'm trying to understand how errors propogate between classes in Ruby. I have this so far:</p>\n\n<pre><code>class User\n  def charge\n    puts \"charging order soon\"\n    raise RuntimeError.new(\"This is a runtime error\")\n  rescue ArgumentError\n    puts \"should never gets here\"\n  end\nend\n\nclass Runner\n  def run\n    begin\n      User.new.charge\n    rescue RuntimeError =&gt; e\n      puts e.message\n    end\n  end\nend\n\nRunner.new.run\n</code></pre>\n\n<p>When I run this, I get this which seems right:</p>\n\n<pre><code>$ ruby errors.rb\ncharging order soon\nThis is a runtime error\n</code></pre>\n\n<p>Inside runner, can I rescue from the <code>RuntimeError</code> with a specific message? If I have multiple <code>RuntimeErrors</code> being raised around my application, is there any way for the Runner's rescue clause to be raised only for RuntimeErrors with specific messages?</p>\n"}, {"tags": ["ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 927591, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/835d5738dc90c462d0bca3b439702279?s=128&d=identicon&r=PG", "display_name": "j1mmy", "link": "https://stackoverflow.com/users/927591/j1mmy"}, "edited": false, "score": 0, "creation_date": 1490836229, "post_id": 43105637, "comment_id": 73294703, "body": "Thanks that worked! Sorry about not closing the duh, duh. If anyone feels like explaining how this cld be done via css targeting rather than with xpath I&#39;d be interested in knowing."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1490828218, "creation_date": 1490828218, "answer_id": 43105637, "question_id": 43105133, "link": "https://stackoverflow.com/questions/43105133/nokogiri-apply-class-to-element-that-has-a-certain-descendant/43105637#43105637", "title": "Nokogiri: apply class to element that has a certain descendant", "body": "<p>I spent a long time wondering why the second foo wasn't found.\nYour data is broken, <code>\"duh</code> isn't closed.</p>\n\n<p>To select the nodes, you can use :</p>\n\n<pre><code>doc.xpath(\"//div[@class='foo' and .//div[@class='bar']]\")\n</code></pre>\n\n<p>As an example :</p>\n\n<pre><code>data = %q(&lt;div class=\"foo\"&gt;\n    &lt;div class=\"bar\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"foo\"&gt;\n    &lt;div class=\"baz\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"foo\"&gt;\n    &lt;u&gt;&lt;span class=\"duh\"&gt;\n        &lt;div class=\"bar\"&gt;&lt;/div&gt;\n    &lt;/span&gt;&lt;/u&gt;\n&lt;/div&gt;\n&lt;div class=\"foo\"&gt;\n    &lt;div class=\"baz\"&gt;&lt;/div&gt;\n&lt;/div&gt;)\n\nrequire 'nokogiri'\n\ndoc = Nokogiri.HTML(data)\n\ndoc.xpath(\"//div[@class='foo' and .//div[@class='bar']]\").each do |node|\n  node[\"class\"] = 'bex'\nend\n\nputs doc\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 927591, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/835d5738dc90c462d0bca3b439702279?s=128&d=identicon&r=PG", "display_name": "j1mmy", "link": "https://stackoverflow.com/users/927591/j1mmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 90, "favorite_count": 0, "accepted_answer_id": 43105637, "answer_count": 1, "score": 1, "last_activity_date": 1490830227, "creation_date": 1490825658, "last_edit_date": 1490830227, "question_id": 43105133, "link": "https://stackoverflow.com/questions/43105133/nokogiri-apply-class-to-element-that-has-a-certain-descendant", "title": "Nokogiri: apply class to element that has a certain descendant", "body": "<p>Let's say I have this html that has various depths of descendants and a mixture of element types:</p>\n\n<pre><code>&lt;div class=\"foo\"&gt;\n    &lt;div class=\"bar\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"foo\"&gt;\n    &lt;div class=\"baz\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"foo\"&gt;\n    &lt;u&gt;&lt;span class=\"duh\"&gt;\n        &lt;div class=\"bar\"&gt;&lt;/div&gt;\n    &lt;/span&gt;&lt;/u&gt;\n&lt;/div&gt;\n&lt;div class=\"foo\"&gt;\n    &lt;div class=\"baz\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And I want to apply a class of bex to all the foos that contain classes of bar so it looks like:</p>\n\n<pre><code>&lt;div class=\"bex\"&gt;\n    &lt;div class=\"bar\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"foo\"&gt;\n    &lt;div class=\"baz\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n&lt;div class=\"bex\"&gt;\n    &lt;u&gt;&lt;span class=\"duh\"&gt;\n        &lt;div class=\"bar\"&gt;&lt;/div&gt;\n    &lt;/span&gt;&lt;/u&gt;\n&lt;/div&gt;\n&lt;div class=\"foo\"&gt;\n    &lt;div class=\"baz\"&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>How wld I do that with ruby/nokogiri? Tried all sorts of things and can't quite get it. Thanks.</p>\n\n<p>Edit: closed the duh, oops.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "macos-sierra"], "comments": [{"owner": {"reputation": 1084, "user_id": 4302668, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EmGum.png?s=128&g=1", "display_name": "Michael Hewson", "link": "https://stackoverflow.com/users/4302668/michael-hewson"}, "edited": false, "score": 0, "creation_date": 1490825746, "post_id": 43104977, "comment_id": 73291695, "body": "Also check <code>~&#47;.profile</code>"}, {"owner": {"reputation": 391, "user_id": 1024051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VsmYF.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/1024051/nick"}, "reply_to_user": {"reputation": 1084, "user_id": 4302668, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/EmGum.png?s=128&g=1", "display_name": "Michael Hewson", "link": "https://stackoverflow.com/users/4302668/michael-hewson"}, "edited": false, "score": 0, "creation_date": 1490826329, "post_id": 43104977, "comment_id": 73291895, "body": "There is no file at ~/.profile"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490828963, "post_id": 43104977, "comment_id": 73292720, "body": "Obviously <i>something</i> is setting the path to <code>flast</code>. ~/.bashrc, ~/.bash_profile and ~/.profile are the likely candidates. What shell are you using? What do <code>rvm info</code> and <code>gem env</code> say?"}], "answers": [{"tags": [], "owner": {"reputation": 391, "user_id": 1024051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VsmYF.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/1024051/nick"}, "is_accepted": true, "score": 0, "last_activity_date": 1490890791, "creation_date": 1490890791, "answer_id": 43123289, "question_id": 43104977, "link": "https://stackoverflow.com/questions/43104977/wrong-rvm-location-in-path-with-new-user-on-macos/43123289#43123289", "title": "Wrong RVM location in PATH with new user on macOS", "body": "<p>Turns out the path was being set by RVM in /Users/first.last/.rvm/environments</p>\n\n<p>The first line in each of the environment files is </p>\n\n<pre><code>export PATH; PATH=\"/Users/flast/.rvm\" ...yada yada\n</code></pre>\n\n<p>Changed that and I still get the PATH warning, but RVM and all the gems contained within work as expected.</p>\n"}], "owner": {"reputation": 391, "user_id": 1024051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VsmYF.jpg?s=128&g=1", "display_name": "nick", "link": "https://stackoverflow.com/users/1024051/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 301, "favorite_count": 0, "accepted_answer_id": 43123289, "answer_count": 1, "score": 0, "last_activity_date": 1490890791, "creation_date": 1490825025, "question_id": 43104977, "link": "https://stackoverflow.com/questions/43104977/wrong-rvm-location-in-path-with-new-user-on-macos", "title": "Wrong RVM location in PATH with new user on macOS", "body": "<p>I had a working RVM installation on my macOS machine. After the latest upgrade to Sierra I started to see this error whenever I try to run RVM:</p>\n\n<pre><code>cat: /Users/flast/.rvm/VERSION: No such file or directory\nWarning! PATH is not properly set up, '/Users/flast/.rvm/gems/ruby-2.0.0-p195/bin' is not at first place.\n         Usually this is caused by shell initialization files. Search for 'PATH=...' entries.\n         You can also re-add RVM to your profile by running: 'rvm get stable --auto-dotfiles'.\n         To fix it temporarily in this shell session run: 'rvm use ruby-2.0.0-p195'.\n         To ignore this error add rvm_silence_path_mismatch_check_flag=1 to your ~/.rvmrc file.\n-bash: /Users/flast/.rvm/scripts/base: No such file or directory\n-bash: /Users/flast/.rvm/scripts/help: No such file or directory\n</code></pre>\n\n<p>There is no such file or directory as user \"flast\" hasn't existed for a while and it is now \"first.last\". But in my $PATH it is still calling for \"flast\"</p>\n\n<p>Here is what is in my PATH:</p>\n\n<pre><code>/usr/local/sbin\n/Library/Frameworks/Python.framework/Versions/3.5/bin\n/Users/flast/.rvm/gems/ruby-2.0.0-p195/bin\n/Users/flast/.rvm/gems/ruby-2.0.0-p195@global/bin\n/Users/flast/.rvm/rubies/ruby-2.0.0-p195/bin\n/Users/flast/.rvm/bin\n/usr/local/bin\n/usr/bin\n/bin\n/usr/sbin\n/sbin\n/opt/X11/bin\n/usr/local/share/dotnet\n/usr/local/git/bin\n/Applications/Postgres.app/Contents/Versions/9.4/bin\n/Users/first.last/.rvm/bin\n</code></pre>\n\n<p>I don't know how to remove the old entries from my PATH permanently, and even when I manually reset my PATH for the current session I still get the above error when I run RVM even when the old user path is not present in the PATH file.</p>\n\n<p>Here is ~/.bashrc</p>\n\n<pre><code>PATH=$PATH:$HOME/.rvm/bin # Add RVM to PATH for scripting\n</code></pre>\n\n<p>here is ~/.bash_profile</p>\n\n<pre><code>export PATH=$PATH:/Applications/Postgres.app/Contents/Versions/9.4/bin\n[[ -s \"/Users/first.last/.rvm/scripts/rvm\" ]] &amp;&amp; source \"/Users/first.last/.rvm/scripts/rvm\"\n\n# Setting PATH for Python 3.5\n# The orginal version is saved in .bash_profile.pysave\nPATH=\"/Library/Frameworks/Python.framework/Versions/3.5/bin:${PATH}\"\nexport PATH\nexport PATH=\"/usr/local/sbin:$PATH\"\n</code></pre>\n\n<p>What am I doing wrong here? What needs to be done so that RVM knows where to look? </p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490824290, "post_id": 43104473, "comment_id": 73291142, "body": "Is the <code>.output</code> part forcing the values into the <code>output</code> key?"}, {"owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "edited": false, "score": 0, "creation_date": 1490881167, "post_id": 43104473, "comment_id": 73318351, "body": "what you need to achieve?"}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490824220, "post_id": 43104645, "comment_id": 73291118, "body": "This literally outputs it. That&#39;s not the desired goal."}], "tags": [], "owner": {"reputation": 51, "user_id": 6008847, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-ZoGNJqPwbuw/AAAAAAAAAAI/AAAAAAAADOg/WJq3L4YYxho/photo.jpg?sz=128", "display_name": "Gimmy", "link": "https://stackoverflow.com/users/6008847/gimmy"}, "is_accepted": false, "score": 0, "last_activity_date": 1490823627, "creation_date": 1490823627, "answer_id": 43104645, "question_id": 43104473, "link": "https://stackoverflow.com/questions/43104473/return-separate-values-from-an-array-in-json/43104645#43104645", "title": "return separate values from an array in json", "body": "<pre><code>@seats.outputs.flatten.each_with_index do |val,index|\n  puts \"column#{index+1}: #{val}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1050, "user_id": 260670, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/b5fdc7d34f3ec9b11a13d10fc548fdd5?s=128&d=identicon&r=PG&f=1", "display_name": "Midwire", "link": "https://stackoverflow.com/users/260670/midwire"}, "is_accepted": false, "score": 0, "last_activity_date": 1490880540, "creation_date": 1490880540, "answer_id": 43119358, "question_id": 43104473, "link": "https://stackoverflow.com/questions/43104473/return-separate-values-from-an-array-in-json/43119358#43119358", "title": "return separate values from an array in json", "body": "<p>Based on this:</p>\n\n<blockquote>\n  <p>I have following line in json which returns output: [[2, 4]]</p>\n</blockquote>\n\n<pre><code>json.output        @seats.blank? ? nil : @seats.outputs\n</code></pre>\n\n<p>I'm guessing you are already using <code>jbuilder</code> templates. If so, to get the output you mentioned above, I think you can do something like this in your jbuilder template:</p>\n\n<pre><code>json.output do\n  @seats.outputs.each_with_index |col, ndx|\n    json.set! \"column#{ndx}\", col\n  end\nend\n</code></pre>\n\n<p>I have not tested this but it would seem to work based on the docs here: <a href=\"https://github.com/rails/jbuilder\" rel=\"nofollow noreferrer\">https://github.com/rails/jbuilder</a></p>\n"}], "owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490899801, "creation_date": 1490822927, "last_edit_date": 1490899801, "question_id": 43104473, "link": "https://stackoverflow.com/questions/43104473/return-separate-values-from-an-array-in-json", "title": "return separate values from an array in json", "body": "<p>I have an instance variable <code>@seats</code> in a controller having value as follows (I checked the value using a byebug breakpoint)</p>\n\n<pre><code>#&lt;Programmability::Response:0x007fdae0bb84e8 @return_code=0, @outputs=[[2, 4]], @table=#&lt;Programmability::Table:0x007fdae0bb8538 @rows=nil, @columns=[\"column1\", \"column2\"]&gt;&gt;\n</code></pre>\n\n<p>How do i display the following in JSON</p>\n\n<pre><code>column1: 2\ncolumn2: 4\n</code></pre>\n\n<p>I have the following line in JSON which returns <code>output: [[2, 4]]</code></p>\n\n<pre><code>json.output        @seats.blank? ? nil : @seats.outputs\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1490820763, "post_id": 43103848, "comment_id": 73289440, "body": "In <code>@product.color</code>, <code>color</code> is not a variable, it&#39;s a method (specifically an attribute reader method). It sounds like what you actually want to know is how to check if a method returns <code>nil</code>, in which case the answer is to call <code>nil?</code> on the returned value, e.g. <code>@product.color.nil?</code>."}], "answers": [{"comments": [{"owner": {"reputation": 327, "user_id": 6606895, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/869a5553f346bad7fe4cb8c49543e29d?s=128&d=identicon&r=PG", "display_name": "Kristis", "link": "https://stackoverflow.com/users/6606895/kristis"}, "edited": false, "score": 0, "creation_date": 1490821017, "post_id": 43103968, "comment_id": 73289589, "body": "Thanks, but not working, still prints out &lt;strong&gt;Color:&lt;/strong&gt;"}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 327, "user_id": 6606895, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/869a5553f346bad7fe4cb8c49543e29d?s=128&d=identicon&r=PG", "display_name": "Kristis", "link": "https://stackoverflow.com/users/6606895/kristis"}, "edited": false, "score": 0, "creation_date": 1490821236, "post_id": 43103968, "comment_id": 73289706, "body": "@Kristis if that&#39;s the case, then color <i>is</i> defined for all of your products but it&#39;s just being left blank in some places. i updated my code to fix it- try it again."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1490823217, "post_id": 43103968, "comment_id": 73290712, "body": "The <code>respond_to?</code> part shouldn&#39;t be necessary. Either the attribute exists or it doesn&#39;t because the schema is out of date. In fact, for ActiveRecord models with a simple attribute <code>@product.color?</code> should do just fine."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1490824258, "post_id": 43103968, "comment_id": 73291129, "body": "@tadman good point, thank you! i went ahead and upvoted your answer."}], "tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 3, "last_activity_date": 1490821177, "last_edit_date": 1490821177, "creation_date": 1490820792, "answer_id": 43103968, "question_id": 43103848, "link": "https://stackoverflow.com/questions/43103848/how-to-check-if-variable-is-defined/43103968#43103968", "title": "How to check if variable is defined?", "body": "<p>In ruby, you can use <code>respond_to?</code> to see if you can call a method on a particular object. There's really no such thing as an \"undefined variable\" because variables like <code>@foo</code> and <code>@blah</code> are <code>nil</code> by default, and anything that follows a <code>.</code> is technically a method in ruby (such as <code>@product.color</code>)</p>\n\n<p>Anyway, try this code:</p>\n\n<pre><code>&lt;% if @product.respond_to?(:color) &amp;&amp; @product.color.present? %&gt;\n  &lt;p&gt;\n    &lt;strong&gt;Color:&lt;/strong&gt;\n    &lt;%= @product.color %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 4, "last_activity_date": 1490823315, "creation_date": 1490823315, "answer_id": 43104561, "question_id": 43103848, "link": "https://stackoverflow.com/questions/43103848/how-to-check-if-variable-is-defined/43104561#43104561", "title": "How to check if variable is defined?", "body": "<p>To display that section only if the <code>color</code> attribute of your Product record is defined as a non-blank, non-<code>nil</code> value:</p>\n\n<pre><code>&lt;% if @product.color? %&gt;\n  &lt;p&gt;\n    &lt;strong&gt;Color:&lt;/strong&gt;\n    &lt;%= @product.color %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This is equivalent to <code>@product.color.present?</code>. ActiveRecord maps database fields to properties automatically, so if you have a <code>color</code> column for that model the method <em>will</em> exist.</p>\n"}], "owner": {"reputation": 327, "user_id": 6606895, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/869a5553f346bad7fe4cb8c49543e29d?s=128&d=identicon&r=PG", "display_name": "Kristis", "link": "https://stackoverflow.com/users/6606895/kristis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "accepted_answer_id": 43103968, "answer_count": 2, "score": 0, "last_activity_date": 1490823315, "creation_date": 1490820434, "last_edit_date": 1490821091, "question_id": 43103848, "link": "https://stackoverflow.com/questions/43103848/how-to-check-if-variable-is-defined", "title": "How to check if variable is defined?", "body": "<p>I building E-shop and there will be diferent products categories, so each category product can have diferent columns. For example one product have color, other product from other category don't have color.\nI want to do when I adding new product for which don't need use color column I want that in show page, this line below will be not displaying (<code>&lt;strong&gt;Color:&lt;/strong&gt;</code>).      </p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Color:&lt;/strong&gt;\n  &lt;%= @product.color %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p><strong><em>Product show.html.erb</em></strong></p>\n\n<pre><code>  &lt;p&gt;\n    &lt;strong&gt;Name:&lt;/strong&gt;\n    &lt;%= @product.name %&gt;\n  &lt;/p&gt;\n  &lt;br&gt;\n  &lt;p&gt;\n    &lt;strong&gt;Description:&lt;/strong&gt;\n    &lt;%= @product.description %&gt;\n  &lt;/p&gt;\n  &lt;br&gt;\n  &lt;p&gt;\n    &lt;strong&gt;Year of manufacture:&lt;/strong&gt;\n    &lt;%= @product.year_of_manufacture %&gt;\n  &lt;/p&gt;\n  &lt;br&gt;\n  &lt;p&gt;\n   &lt;strong&gt;Color:&lt;/strong&gt;\n   &lt;%= @product.color %&gt;\n &lt;/p&gt;\n</code></pre>\n\n<p><strong>Product form.html.erb</strong></p>\n\n<pre><code>  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :name %&gt;&lt;br&gt;\n    &lt;%= f.text_field :name, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :description %&gt;\n    &lt;%= f.text_area :description, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"form-group\"&gt;\n  &lt;%= f.label :year_of_manufacture %&gt;\n  &lt;%= f.text_field :year_of_manufacture, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n  &lt;br&gt;\n  &lt;div class=\"form-group\"&gt;\n  &lt;%= f.label :color %&gt;\n  &lt;%= f.text_field :color, class: \"form-control\" %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>Thank you for help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4214724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d151b2d6b877b4f482e96fb64d4fdf7e?s=128&d=identicon&r=PG&f=1", "display_name": "jessesr", "link": "https://stackoverflow.com/users/4214724/jessesr"}, "edited": false, "score": 0, "creation_date": 1490819716, "post_id": 43103380, "comment_id": 73288867, "body": "Would you add this in the same method as params.permit? Or as an alternative to params.permit?"}, {"owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "reply_to_user": {"reputation": 43, "user_id": 4214724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d151b2d6b877b4f482e96fb64d4fdf7e?s=128&d=identicon&r=PG&f=1", "display_name": "jessesr", "link": "https://stackoverflow.com/users/4214724/jessesr"}, "edited": false, "score": 0, "creation_date": 1490819804, "post_id": 43103380, "comment_id": 73288928, "body": "This is a way of permit. Permit is used when the names being sent as the response is correct and we just need to allow them. Here we have to allow and rename. So this works as an alternative."}, {"owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "reply_to_user": {"reputation": 43, "user_id": 4214724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d151b2d6b877b4f482e96fb64d4fdf7e?s=128&d=identicon&r=PG&f=1", "display_name": "jessesr", "link": "https://stackoverflow.com/users/4214724/jessesr"}, "edited": false, "score": 0, "creation_date": 1492317271, "post_id": 43103380, "comment_id": 73925071, "body": "@jessesr you can accept the answer if it solves your problem!"}], "tags": [], "owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "is_accepted": true, "score": 3, "last_activity_date": 1490819900, "last_edit_date": 1490819900, "creation_date": 1490818823, "answer_id": 43103380, "question_id": 43103338, "link": "https://stackoverflow.com/questions/43103338/changing-stripe-param-keys-for-mass-assignment-in-rails/43103380#43103380", "title": "Changing Stripe param keys for mass assignment in Rails", "body": "<p>There are multiple ways you can do this, but I like to do the mapping like so:</p>\n\n<pre><code>def order_params\n  {\n    shipping_zip: params[:stripeShippingAddressZip],\n    # more here\n  }\nend\n</code></pre>\n\n<p>After this you can just do:</p>\n\n<pre><code>Orders.create(order_params)\n</code></pre>\n\n<p>I hope this helps!</p>\n"}], "owner": {"reputation": 43, "user_id": 4214724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d151b2d6b877b4f482e96fb64d4fdf7e?s=128&d=identicon&r=PG&f=1", "display_name": "jessesr", "link": "https://stackoverflow.com/users/4214724/jessesr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 52, "favorite_count": 0, "accepted_answer_id": 43103380, "answer_count": 1, "score": 0, "last_activity_date": 1490819900, "creation_date": 1490818661, "question_id": 43103338, "link": "https://stackoverflow.com/questions/43103338/changing-stripe-param-keys-for-mass-assignment-in-rails", "title": "Changing Stripe param keys for mass assignment in Rails", "body": "<p>I'm integrating Stripe into a Rails app. Right now Stripe Checkout returns a params hash with key-value pairs like:</p>\n\n<pre><code>\"stripeShippingAddressZip\"=&gt;\"80205\"\n</code></pre>\n\n<p>and </p>\n\n<pre><code>\"stripeShippingAddressState\"=&gt;\"CO\"\n</code></pre>\n\n<p>I also have a method called <code>order_params</code> which calls <code>params.permit</code> to prevent mass assignment vulnerabilities.</p>\n\n<p>I'd like to do the following: </p>\n\n<p><code>current_user.orders.build(order_params)</code></p>\n\n<p>Essentially mass assignment. </p>\n\n<p>However, my <code>orders</code> model has attributes like <code>shipping_zip</code> rather than <code>stripeShippingAddressZip</code>.  </p>\n\n<p>How can I use the params hash and still do mass assignment given that the hash keys don't match the attributes of the model?</p>\n\n<p>Is there are \"Rails way\" of doing this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1490822569, "post_id": 43103250, "comment_id": 73290395, "body": "Indent your code with two spaces; generally you can omit the parenthesis when using <code>puts</code>."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490830536, "post_id": 43103250, "comment_id": 73293209, "body": "We don&#39;t use variables like <code>reversedString</code> in Ruby. Instead we use snake_case, so <code>reversed_string</code>. Also, don&#39;t end lines with <code>;</code>."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490822272, "post_id": 43103355, "comment_id": 73290241, "body": "Worth noting that <code>return</code> as a last line is redundant as the last value will be returned regardless."}, {"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490823998, "post_id": 43103355, "comment_id": 73291024, "body": "@tadman It informs the reader this is a deliberate choice and not a mistake or an artifact. I know that&#39;s not normal Ruby style, but we struggled against implicit return in Perl for decades."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490824113, "post_id": 43103355, "comment_id": 73291074, "body": "The sooner people come to embrace the idea of implicit return, the better. It avoids a lot of ugly suprises down the road when your method is inadvertently leaking stuff you didn&#39;t intend it to. Plus, let&#39;s be honest, implicit return was the least of Perl&#39;s struggles. I agree that clarity is important, but in this case it&#39;s bordering on clutter, which sort of goes against that principle."}], "tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": false, "score": 2, "last_activity_date": 1490819080, "last_edit_date": 1490819080, "creation_date": 1490818726, "answer_id": 43103355, "question_id": 43103250, "link": "https://stackoverflow.com/questions/43103250/does-anyone-see-the-error-in-this-simple-ruby-function/43103355#43103355", "title": "Does anyone see the error in this simple Ruby function?", "body": "<p>The problem is your function isn't returning its result, it's printing it. It needs to <code>return reversedString</code>.</p>\n\n<p>As a rule of thumb, functions should return their result. Another function should format and print it.</p>\n\n<pre><code>def reverse(string)\n    reversedString = \"\";\n\n    i = string.length - 1\n    while i &gt;= 0\n        reversedString = reversedString + string[i]\n        i -= 1\n    end\n\n    return reversedString\nend\n</code></pre>\n\n<p>Note: This was probably an exercise, but Ruby already has <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-reverse\" rel=\"nofollow noreferrer\">String#reverse</a>.</p>\n\n<hr>\n\n<p>It's good that you're writing tests, but the way you're writing them it's hard to tell what went wrong. Look into a Ruby testing framework like <a href=\"http://docs.seattlerb.org/minitest/\" rel=\"nofollow noreferrer\">MiniTest</a>.</p>\n\n<pre><code>require \"minitest/autorun\"\n\nclass TestReverse &lt; Minitest::Test\n    def test_reverse\n        assert_equal \"cba\", reverse(\"abc\")\n        assert_equal \"a\", reverse(\"a\")\n        assert_equal \"\", reverse(\"\")\n    end\nend\n</code></pre>\n\n<p>That would have told you that your function is returning <code>nil</code>.</p>\n\n<pre><code>  1) Failure:\nTestReverse#test_reverse [test.rb:16]:\nExpected: \"cba\"\n  Actual: nil\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1490908443, "last_edit_date": 1490908443, "creation_date": 1490818897, "answer_id": 43103398, "question_id": 43103250, "link": "https://stackoverflow.com/questions/43103250/does-anyone-see-the-error-in-this-simple-ruby-function/43103398#43103398", "title": "Does anyone see the error in this simple Ruby function?", "body": "<p><code>puts</code> prints and returns <code>nil</code>, so the whole method returns <code>nil</code>. If, for debugging reasons , you want to inspect what your method is returning, use <code>p</code> which returns it's argument (reversedString in this case).</p>\n\n<pre><code>def reverse(string)\n\n    reversedString = \"\"\n    i = string.length - 1\n    while i &gt;= 0\n      reversedString = reversedString + string[i]\n      i -= 1\n    end\n    p reversedString  # !!!\n\nend\n</code></pre>\n\n<p>And all 3 tests return true</p>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1490823157, "post_id": 43103411, "comment_id": 73290682, "body": "It appears the question is dealing with creating a custom-reverse method."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490830447, "post_id": 43103411, "comment_id": 73293183, "body": "&quot;...use a map...&quot; should be &quot;loop&quot;. Don&#39;t use &quot;edit&quot; or &quot;update&quot; tags in questions or answers. We can see what&#39;s been changed and when if necessary. Instead, incorporate the change in as if it&#39;d been there initially."}], "tags": [], "owner": {"reputation": 155, "user_id": 1391902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/959cbf92a60cdd0e5be0efb45ab371ab?s=128&d=identicon&r=PG", "display_name": "Mateo Olaya", "link": "https://stackoverflow.com/users/1391902/mateo-olaya"}, "is_accepted": false, "score": 4, "last_activity_date": 1490830363, "last_edit_date": 1490830363, "creation_date": 1490818921, "answer_id": 43103411, "question_id": 43103250, "link": "https://stackoverflow.com/questions/43103250/does-anyone-see-the-error-in-this-simple-ruby-function/43103411#43103411", "title": "Does anyone see the error in this simple Ruby function?", "body": "<p>Try to use the default String class <code>reverse</code> method like this:</p>\n\n<pre><code>\"Hello World\".reverse\n\"Hello World\".reverse!\n</code></pre>\n\n<p>Check Ruby's String class API at <a href=\"https://ruby-doc.org/core-2.4.0/String.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/core-2.4.0/String.html</a></p>\n\n<p>If you want to make your custom method, you could use a map like this:</p>\n\n<pre><code>string = String.new\n\"Hello World\".chars.each { | c | string.prepend c }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1490822625, "creation_date": 1490822625, "answer_id": 43104402, "question_id": 43103250, "link": "https://stackoverflow.com/questions/43103250/does-anyone-see-the-error-in-this-simple-ruby-function/43104402#43104402", "title": "Does anyone see the error in this simple Ruby function?", "body": "<p>To make this more Ruby-like yet avoid using the built-in <code>String#reverse</code> method you'd do this:</p>\n\n<pre><code>def reverse(string)\n  string.chars.reverse.join('')\nend\n</code></pre>\n\n<p>Remember that in Ruby the result of the last operation is <em>automatically</em> the return value of the method. In your case the last operation is <code>puts</code> which always returns <code>nil</code>, eating your value. You want to pass it through.</p>\n\n<p>Try to design methods with a simple mandate, that is, this function should focus on doing one job and one job only: reversing a string. Displaying it is beyond that mandate, so that's a job for another method, like perhaps the caller.</p>\n\n<p>To avoid calling any sort of <code>reverse</code> method at all:</p>\n\n<pre><code>def reverse(string)\n  result = ''\n  length = string.length\n\n  length.times do |i|\n    result &lt;&lt; string[length - 1 - i]\n  end\n\n  result\nend\n</code></pre>\n\n<p>You can often avoid <code>for</code> almost completely and <code>while</code> frequently if you use things like <code>times</code> or ranges <code>(0..n)</code> to iterate over.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1490830077, "last_edit_date": 1490830077, "creation_date": 1490829773, "answer_id": 43105891, "question_id": 43103250, "link": "https://stackoverflow.com/questions/43103250/does-anyone-see-the-error-in-this-simple-ruby-function/43105891#43105891", "title": "Does anyone see the error in this simple Ruby function?", "body": "<p>If I was going to do this, I'd probably take advantage of an array:</p>\n\n<pre><code>ary = 'foo bar baz'.chars\nreversed_ary = []\nary.size.times do\n  reversed_ary &lt;&lt; ary.pop\nend\nreversed_ary.join # =&gt; \"zab rab oof\"\n</code></pre>\n\n<p><code>pop</code> removes the last character from the array and returns it, so basically it's walking backwards through <code>ary</code>, nibbling at the end and pushing each character onto the end of <code>reversed_ary</code>, effectively reversing the array.</p>\n\n<p>Alternately it could be done using a string:</p>\n\n<pre><code>ary = 'foo bar baz'.chars\nreversed_str = ''\nary.size.times do\n  reversed_str &lt;&lt; ary.pop\nend\nreversed_str # =&gt; \"zab rab oof\"\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>reversed_str += ary.pop\n</code></pre>\n\n<p>I just saw that @tadman did a similar thing with the string. His would run more quickly but this is more readable, at least to my eyes.</p>\n"}], "owner": {"reputation": 5, "user_id": 5370501, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbc14002d89ae951cb263f50ccba2188?s=128&d=identicon&r=PG", "display_name": "Catherine Luse", "link": "https://stackoverflow.com/users/5370501/catherine-luse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "answer_count": 5, "score": -2, "last_activity_date": 1490908443, "creation_date": 1490818348, "last_edit_date": 1490818763, "question_id": 43103250, "link": "https://stackoverflow.com/questions/43103250/does-anyone-see-the-error-in-this-simple-ruby-function", "title": "Does anyone see the error in this simple Ruby function?", "body": "<p>This function is supposed to take a string and return the characters in reverse order.</p>\n\n<pre><code>def reverse(string)\n\n    reversedString = \"\";\n\n        i = string.length - 1\n        while i &gt;= 0\n          reversedString = reversedString + string[i]\n          i -= 1\n        end\n    puts reversedString\n\nend\n</code></pre>\n\n<p>however all the tests return false:</p>\n\n<pre><code>puts(\n  'reverse(\"abc\") == \"cba\": ' + (reverse(\"abc\") == \"cba\").to_s\n)\n\nputs(\n  'reverse(\"a\") == \"a\": ' + (reverse(\"a\") == \"a\").to_s\n)\n\nputs(\n  'reverse(\"\") == \"\": ' + (reverse(\"\") == \"\").to_s\n)\n</code></pre>\n\n<p>Does anyone see what the problem is?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1490837986, "post_id": 43103205, "comment_id": 73295113, "body": "What do you want to do?"}, {"owner": {"reputation": 836, "user_id": 1365764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oG9k1.jpg?s=128&g=1", "display_name": "Dan Mitchell", "link": "https://stackoverflow.com/users/1365764/dan-mitchell"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1490858902, "post_id": 43103205, "comment_id": 73302549, "body": "I thought my question was pretty clear. I want to have one post model but have 2 views, one for news and one for a blog"}], "answers": [{"comments": [{"owner": {"reputation": 836, "user_id": 1365764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oG9k1.jpg?s=128&g=1", "display_name": "Dan Mitchell", "link": "https://stackoverflow.com/users/1365764/dan-mitchell"}, "edited": false, "score": 0, "creation_date": 1490858855, "post_id": 43105155, "comment_id": 73302514, "body": "This works fine but it means that unless I add some hack in the controller actions then I can also view the show pages at <code>&#47;news&#47;foo</code> as well as <code>blog&#47;foo</code>"}], "tags": [], "owner": {"reputation": 183, "user_id": 4996744, "user_type": "registered", "profile_image": "https://graph.facebook.com/455012207986992/picture?type=large", "display_name": "Vineeth Subbaraya", "link": "https://stackoverflow.com/users/4996744/vineeth-subbaraya"}, "is_accepted": false, "score": 0, "last_activity_date": 1490825758, "creation_date": 1490825758, "answer_id": 43105155, "question_id": 43103205, "link": "https://stackoverflow.com/questions/43103205/rails-post-model-for-news-and-blog-view/43105155#43105155", "title": "Rails post model for news and blog view", "body": "<p>To indicate a show route, you need to pass id as a parameter in your route.</p>\n\n<pre><code>get '/blog/:id' =&gt; 'posts#blogs' \n</code></pre>\n\n<p>I guess this is what you are looking for.</p>\n"}, {"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 0, "last_activity_date": 1490879469, "creation_date": 1490879469, "answer_id": 43118909, "question_id": 43103205, "link": "https://stackoverflow.com/questions/43103205/rails-post-model-for-news-and-blog-view/43118909#43118909", "title": "Rails post model for news and blog view", "body": "<p>You can try this way:</p>\n\n<p>Create two different methods to use within your <code>routes.rb</code>, they will be inside the only one controller you want to have \"<code>PostsController</code>\", and make a verification of the <code>params</code> attribute in every <code>@post</code> that pass through the <code>show</code> method, something like:</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  def show\n    @post = Post.find(params[:id])\n    if @post.format == 'news'\n      redirect_to news_index_path\n    elsif @post.format == 'blog'\n      redirect_to blog_index_path\n    end\n  end\n\n  def blog_index\n  end\n\n  def news_index\n  end\n  ...\n</code></pre>\n\n<p>Then specify in your <code>routes.rb</code> the path to every method, as you made within the <code>show</code> method in order to use the <code>redirect_to</code> method:</p>\n\n<pre><code>  get '/blog/:id',  to: 'posts#blog_index', as: 'blog_index'\n  get '/news/:id',  to: 'posts#news_index', as: 'news_index'\n</code></pre>\n\n<p>This is, when you pass a <code>@post</code> with the format attribute equal to <code>blog</code> you'll be redirected to the <code>blog_index_path</code>, which will load the <code>blog_index</code> view within your <code>posts</code> folder in <code>app/views/posts</code>. Something seemed will happen when the <code>@post.format</code> is <code>news</code>.</p>\n\n<pre><code>\u251c\u2500\u2500 blog_index.html.erb\n\u251c\u2500\u2500 index.html.erb\n\u251c\u2500\u2500 news_index.html.erb\n\u2514\u2500\u2500 show.html.erb\n\n0 directories, 4 files\n</code></pre>\n\n<p>This will have a very little delay and a very quick change in the route, everytime you have to pass from <code>posts#show</code> to the next route.</p>\n\n<p>I've made a <a href=\"https://bitbucket.org/hnhm/test_so\" rel=\"nofollow noreferrer\">repo</a>, in order you can check how this works.</p>\n"}], "owner": {"reputation": 836, "user_id": 1365764, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/oG9k1.jpg?s=128&g=1", "display_name": "Dan Mitchell", "link": "https://stackoverflow.com/users/1365764/dan-mitchell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 544, "favorite_count": 0, "accepted_answer_id": 43118909, "answer_count": 2, "score": 0, "last_activity_date": 1490879469, "creation_date": 1490818203, "last_edit_date": 1490820186, "question_id": 43103205, "link": "https://stackoverflow.com/questions/43103205/rails-post-model-for-news-and-blog-view", "title": "Rails post model for news and blog view", "body": "<p>I have a <code>post</code> model and <code>posts</code> controller with an attribute <code>format</code> so id like to split the views out based on this attribute i.e. <code>foo.com/blog/xxx</code> if the format is <code>blog</code> and <code>foo.com/news/xxx</code> if the format is <code>news</code>.</p>\n\n<p><code>resources :posts</code></p>\n\n<pre><code>def index\n  @posts = Post.where(draft: 'false').order(publish_date: :desc)\nend\n\n\ndef show\n  @post = Post.find_by!(slug: params[:id])\nend\n</code></pre>\n\n<p>I can easily so something like this for the index view but im unsure about the show route</p>\n\n<p><code>get '/new', to: 'posts#news'</code></p>\n\n<pre><code>def news\n  @posts = Post.where(draft: 'false', format: 'news').order(publish_date: :desc)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1490815779, "post_id": 43102467, "comment_id": 73286702, "body": "Are you asking how to use <code>key</code> as a method call on <code>user</code>?"}, {"owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1490815806, "post_id": 43102467, "comment_id": 73286729, "body": "@jvillian yes..."}], "answers": [{"tags": [], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "is_accepted": false, "score": -1, "last_activity_date": 1490815824, "creation_date": 1490815824, "answer_id": 43102563, "question_id": 43102467, "link": "https://stackoverflow.com/questions/43102467/dynamically-change-method-name-inside-array-in-ruby/43102563#43102563", "title": "dynamically change method name inside array in ruby", "body": "<pre><code>[first_name, email, last_name].each do |key|\n puts user.send(key)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": false, "score": 1, "last_activity_date": 1490815834, "creation_date": 1490815834, "answer_id": 43102566, "question_id": 43102467, "link": "https://stackoverflow.com/questions/43102467/dynamically-change-method-name-inside-array-in-ruby/43102566#43102566", "title": "dynamically change method name inside array in ruby", "body": "<p>You can simply do:</p>\n\n<pre><code>user.send(key)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1490817221, "creation_date": 1490817221, "answer_id": 43102925, "question_id": 43102467, "link": "https://stackoverflow.com/questions/43102467/dynamically-change-method-name-inside-array-in-ruby/43102925#43102925", "title": "dynamically change method name inside array in ruby", "body": "<p>With ActiveRecord you can access properties via the <code>[]</code> method:</p>\n\n<pre><code>[ :first_name, :email, :last_name ].each do |key|\n  unless (user[key])\n    puts \"#{key} is required\"\n  end\nend\n</code></pre>\n\n<p>This generally a lot safer than the <code>send</code> approach because it's not calling arbitrary methods.</p>\n"}], "owner": {"reputation": 2300, "user_id": 2874507, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-bTf3QWEeXi0/AAAAAAAAAAI/AAAAAAAAAvA/G7Uh0JZWsOk/photo.jpg?sz=128", "display_name": "Abhilash", "link": "https://stackoverflow.com/users/2874507/abhilash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 43102925, "answer_count": 3, "score": 0, "last_activity_date": 1490817221, "creation_date": 1490815505, "question_id": 43102467, "link": "https://stackoverflow.com/questions/43102467/dynamically-change-method-name-inside-array-in-ruby", "title": "dynamically change method name inside array in ruby", "body": "<p>I have a user object which i access like this.. <code>user.email, user.first_name</code></p>\n\n<p>Now I want to loop through each and return a message based on the current key in loop somewhat like this. </p>\n\n<pre><code>[user.first_name, user.email, user.last_name].each do |key|\n      puts \"#{key} is required\"\n end\n</code></pre>\n\n<p>The above works but loops through <code>values</code> instead of <code>fields</code>. so will do this below but how to prepend user to keys and get values inside array? </p>\n\n<pre><code>[first_name, email, last_name].each do |key|\n #inside here I want to prepend the user to the keys so that I can access like user.key \n\n puts \"#{user.key} is required\" \nend\n</code></pre>\n\n<p>If this was a string we can concatenate but how to deal with this here as its a method call?</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 1780, "user_id": 7475314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AA6yE.jpg?s=128&g=1", "display_name": "Tomasz Buba\u0142a", "link": "https://stackoverflow.com/users/7475314/tomasz-buba%c5%82a"}, "edited": false, "score": 0, "creation_date": 1490815529, "post_id": 43102409, "comment_id": 73286545, "body": "do you wait for turbolinks to load before executing this?"}, {"owner": {"reputation": 19, "user_id": 7638499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/affade4a94dc0827ada733c3d7d8229c?s=128&d=identicon&r=PG&f=1", "display_name": "lilipupu pupu", "link": "https://stackoverflow.com/users/7638499/lilipupu-pupu"}, "reply_to_user": {"reputation": 1780, "user_id": 7475314, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/AA6yE.jpg?s=128&g=1", "display_name": "Tomasz Buba\u0142a", "link": "https://stackoverflow.com/users/7475314/tomasz-buba%c5%82a"}, "edited": false, "score": 0, "creation_date": 1490815829, "post_id": 43102409, "comment_id": 73286742, "body": "I don&#39;t really know what you mean, I run some jobs which a creating a new @cycle for my cow. And when I add the last line, it&#39;s stopping the jobs actions"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490821656, "post_id": 43102409, "comment_id": 73289921, "body": "what is the error? and what is this show template you&#39;re rendering in js?"}], "owner": {"reputation": 19, "user_id": 7638499, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/affade4a94dc0827ada733c3d7d8229c?s=128&d=identicon&r=PG&f=1", "display_name": "lilipupu pupu", "link": "https://stackoverflow.com/users/7638499/lilipupu-pupu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490815309, "creation_date": 1490815309, "question_id": 43102409, "link": "https://stackoverflow.com/questions/43102409/ajax-append-not-working-on-ruby", "title": "Ajax append not working on ruby", "body": "<p>I'm experimenting ajax on ruby, which is great, I almost hit the goal, but the last step escapes me.\nAll is working before the the last create.js line\nnb: I'm running some actions after the create action, and I thought this could be the problem. </p>\n\n<p>My code =</p>\n\n<pre><code>class CowsController &lt; ApplicationController\n  before_action :authenticate_user! \n  skip_before_action :configure_sign_up_params\n  before_action :set_cow, only: [:show, :edit, :update, :destroy]\n  after_action :new_cycle, only: [:create]\n  after_action :update_cycle, only: [:update]\n  after_action :status_cycle, only: [:index]\n\n\n  # GET /cows\n  # GET /cows.json\n  def index\n    @ranch = current_user.ranches.first\n    @cows = @ranch.cows\n    @status = [true, false]\n    @genders = ([[\"M\u00e2le\", 'f'], [\"Femelle\", 't']])\n    @impacts = ([[\"Oui\", 't'], [\"Non\", 'f']])\n    @cycle = Cycle.new\n  end\n\n  # POST /cows\n  # POST /cows.json\n  def create\n    @cow = Cow.new(cow_params)\n    @cow.update(ranch_id: current_user.ranches.first.id)\n    @cow.update(activ: false)\n        if @cow.gender == nil\n      @cow.update(gender: false)\n    end \n    respond_to do |format|\n      if @cow.save\n        format.html { redirect_to cows_url, notice: 'Cow was successfully created.' }\n        format.js\n      else\n        format.html { redirect_to cows_path }\n        format.json { render json: @cow.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /cows/1\n  # PATCH/PUT /cows/1.json\n  def update\n    respond_to do |format|\n      if @cow.update(cow_params)\n        format.html { redirect_to :back, notice: 'Cow was successfully updated.' }\n        format.json { render :show, status: :ok, location: @cow }\n      else\n        format.html { render :edit }\n        format.json { render json: @cow.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /cows/1\n  # DELETE /cows/1.json\n  def destroy\n    @cow.destroy\n    respond_to do |format|\n      format.html { redirect_to :back, notice: 'Cow was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_cow\n      @cow = Cow.find(params[:id])\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def cow_params\n      params.require(:cow).permit(:ranch_id, :gender, :num, :name, :father, :mother, :activ, :buy_date, :buy_price, :sell_date, :sell_price, :born_date)\n    end\n\n    def update_cycle\n      UpdateFirstCycleJob.perform_later(@cow)\n    end\n\n    def new_cycle\n      FirstCycleJob.perform_later(@cow)\n    end\n\n    def status_cycle\n      @cows.each do |cow|\n        StatusCowJob.perform_later(cow)\n        EventCowJob.perform_later(cow)\n      end\n    end\n\n\n    def set_cycle \n      @cycle = Cycle.find(params[:cycle_id])\n    end \n\n\n    def cycle_params\n      params.require(:cycle).permit(:cow_id, :cat, :start_at, :end_at, :father, :wait, :current_state, :active_e, :current_event, :scurrent_satus_label)\n    end\n\nend\n</code></pre>\n\n<p>Cow index :</p>\n\n<pre><code>&lt;div class=\"right_col\" role=\"main\" &gt;\n\n&lt;h1&gt;Votre troupeau&lt;/h1&gt;\n\n&lt;%= render 'new' %&gt;\n\n&lt;%- if @ranch.cows.any? %&gt;\n &lt;!-- Header table (tab) --&gt;\n    &lt;div class=\"btn-pref btn-group btn-group-justified btn-group-lg\" role=\"group\" aria-label=\"...\"&gt;\n      &lt;%- @status.each do |status| %&gt;\n        &lt;div class=\"btn-group\" role=\"group\"&gt;\n          &lt;button type=\"button\" class=\"btn btn-primary\" data-target=\"#Cow_tab&lt;%=status%&gt;\" data-toggle=\"tab\" style=\"height:40px;\"&gt;\n            &lt;div class=\"hidden-xs\"&gt;\n              &lt;% if status == true %&gt;\n                &lt;i class=\"fa fa-check-circle\" aria-hidden=\"true\"&gt;&lt;/i&gt;\n                En production \n              &lt;% else %&gt;\n                &lt;i class=\"fa fa-times-circle\" aria-hidden=\"true\"&gt;&lt;/i&gt;\n                Improductives\n              &lt;% end %&gt;\n            &lt;/div&gt;\n          &lt;/button&gt;\n\n        &lt;/div&gt;\n      &lt;%end%&gt;\n    &lt;/div&gt;\n  &lt;!-- /  Header table (tab) --&gt;\n\n  &lt;!-- Body table  --&gt;\n  &lt;div class=\"well\"&gt;\n    &lt;div class=\"tab-content\"&gt;\n      &lt;%- @status.each do |status| %&gt;\n        &lt;div class=\"tab-pane fade in active\" id=\"Cow_tab&lt;%=status%&gt;\"&gt;\n            &lt;!-- table --&gt;\n            &lt;table class=\"table table-striped\"&gt;\n              &lt;tbody&gt;\n                &lt;tr&gt;\n                  &lt;td&gt;&lt;/td&gt;\n                  &lt;td&gt;&lt;strong&gt;Etat :&lt;/strong&gt;&lt;/td&gt;\n                  &lt;td&gt;&lt;strong&gt;Nom :&lt;/strong&gt;&lt;/td&gt;\n                  &lt;td&gt;&lt;strong&gt;Average :&lt;/strong&gt;&lt;/td&gt;\n                  &lt;td&gt;&lt;/td&gt;\n\n                &lt;/tr&gt;\n                &lt;%- @cows.where(activ: status).order(current_state: :desc).order(created_at: :desc).each do |c| %&gt;\n                  &lt;tr id=\"Cow_tab2&lt;%=c.activ%&gt;\"&gt;\n                    &lt;td style=\"width:50px; text-align: center;\"&gt; \n                      &lt;div data-toggle='modal' data-target='#MyCycleInfo&lt;%=c.id%&gt;' remote=\"true\" data-dismiss=\"modal\"  &gt;\n                        &lt;%- if c.activ == true  %&gt;\n                          &lt;div class=\"pin_activ\" style=\"background-color:#42b72a;\"&gt;\n                          &lt;/div&gt;\n                        &lt;% elsif c.activ == false &amp;&amp; c.wait  %&gt;\n                          &lt;div class=\"pin_activ\" style=\"background-color:#f7b733;\"&gt;\n                          &lt;/div&gt;\n                        &lt;% elsif c.current_state == 7 %&gt;\n                          &lt;div class=\"pin_activ\" style=\"background-color:#31b0d5;\"&gt;\n                          &lt;/div&gt;\n                        &lt;% else %&gt;\n                          &lt;div class=\"pin_activ\" style=\"background-color:#fa3e3e;\"&gt;\n                          &lt;/div&gt;\n                        &lt;% end %&gt;\n                      &lt;/div&gt;   \n                    &lt;/td&gt;\n                    &lt;td style=\"width:100px;\"&gt;\n                      &lt;%= c.scurrent_satus_label%&gt;\n                    &lt;/td&gt;\n                    &lt;td&gt;&lt;%= c.name %&gt; ( &lt;%= c.num %&gt; )&lt;/td&gt;\n                    &lt;td&gt;&lt;%= c.num %&gt;&lt;/td&gt;\n                    &lt;td style=\"width:50px; text-align: center;\"&gt;\n                      &lt;%= render 'edit', cow: c %&gt;\n                    &lt;/td&gt;\n\n                  &lt;/tr&gt;\n\n                  &lt;!-- Modal info cycle  --&gt;\n                  &lt;div id='MyCycleInfo&lt;%=c.id%&gt;' class='modal fade' role='dialog' aria-hidden=\"true\"&gt;\n                    &lt;div class=\"modal-dialog\"&gt;\n                      &lt;div class='content'&gt;\n\n                        &lt;div class=\"modal-header\"&gt;\n                          &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;&amp;times;&lt;/button&gt;\n                          &lt;%= render 'cycles/info', cow: c %&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"modal-body\"&gt;\n                          &lt;%= render 'events/info', cow: c%&gt;\n                        &lt;/div&gt;\n                        &lt;div class=\"modal-footer\" style=\"text-align:center\"&gt;\n                          &lt;%= render 'historic', cow: c %&gt;\n                        &lt;/div&gt;\n                      &lt;/div&gt;\n                    &lt;/div&gt;\n                  &lt;/div&gt;\n                  &lt;!-- / Modal info cow --&gt; \n                &lt;%end%&gt;\n              &lt;/tbody&gt;\n            &lt;/table&gt;\n            &lt;!-- / table --&gt;\n        &lt;/div&gt;\n      &lt;%end%&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;!-- / Body table  --&gt;\n\n  &lt;h2 style=\"text-align: center;\"&gt;Etat du troupeau &lt;/h2&gt;\n\n  &lt;%= pie_chart @cows.group(:scurrent_satus_label).count, donut: true %&gt;\n\n&lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Cow _new:</p>\n\n<pre><code>&lt;div data-toggle='modal' data-target='#MyNewCow1' remote=\"true\" data-dismiss=\"modal\" class=\"btn btn-success\" &gt;\n  &lt;i class=\"fa fa-plus\" aria-hidden=\"true\"&gt;&lt;/i&gt; Nouveau\n&lt;/div&gt;\n\n&lt;%= simple_form_for(Cow.new, remote: true) do |f| %&gt;\n\n  &lt;!-- Modal new cow  --&gt;\n  &lt;div id='MyNewCow1' class='modal fade' role='dialog' aria-hidden=\"true\"&gt;\n    &lt;div class=\"modal-dialog\" style=\"width:400px;\"&gt;\n      &lt;div class='content'&gt;\n        &lt;div class=\"modal-header\"&gt;\n          &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;&amp;times;&lt;/button&gt;\n          &lt;h3 class=\"modal-title\"&gt;Nouvelle vache&lt;/h3&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-body\"&gt;\n          &lt;div class=\"form-inputs\"&gt;\n\n            &lt;div class=\"form-inputs\"&gt;\n              &lt;div class=\"well well-sm text-center\"&gt; \n                &lt;div class=\"btn-group\" data-toggle=\"buttons\"&gt;\n                  &lt;% @genders.each do |g|%&gt;\n                    &lt;label class=\"btn btn-default active\"&gt;\n                      &lt;%= f.radio_button :gender, g[1]%&gt;\n                      &lt;%= f.label :gender, g[0]%&gt;\n                    &lt;/label&gt;\n                  &lt;%end%&gt;\n                &lt;/div&gt;\n              &lt;/div&gt; \n            &lt;/div&gt;\n\n            &lt;%= f.input :num %&gt;\n            &lt;%= f.input :name %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-footer\"&gt;\n          &lt;button type=\"button\" class=\"btn btn-primary\" onclick=\"showModal('MyNewCow2')\"&gt;Suivant\n          &lt;/button&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;!-- / Modal new cow --&gt; \n\n\n    &lt;!-- Modal new cow  --&gt;\n  &lt;div id='MyNewCow2' class='modal fade' role='dialog' aria-hidden=\"true\"&gt;\n    &lt;div class=\"modal-dialog\" style=\"width:400px;\"&gt;\n      &lt;div class='content'&gt;\n        &lt;div class=\"modal-header\"&gt;\n          &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-hidden=\"true\"&gt;&amp;times;&lt;/button&gt;\n          &lt;h3 class=\"modal-title\"&gt;Nouvelle vache&lt;/h3&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-body\"&gt;\n          &lt;%= f.label :born_date, label:\"Date de naissance\" %&gt;\n              &lt;br&gt;\n          &lt;%= f.date_field :born_date, class: \"date_box\" %&gt;\n          &lt;%= f.input :mother, label:\"M\u00e8re\"%&gt;\n          &lt;%= f.input :father, label:\"P\u00e8re\" %&gt;\n\n          &lt;div id=\"sell_hide1\" class=\"btn btn-warning\"&gt;&lt;i class=\"fa fa-file-text-o\" aria-hidden=\"true\" style=\"margin:5px;\"&gt; &lt;/i&gt;information d'achat&lt;/div&gt;\n          &lt;div id=\"sell_form1\" &gt;\n            &lt;%= f.label :buy_date, label:\"Date d'achat\" %&gt;\n            &lt;br&gt;\n            &lt;%= f.date_field :buy_date, class: \"date_box\" %&gt;\n            &lt;div class=\"form-inputs\"&gt;\n              &lt;%= f.input :buy_price, label:\"Prix d'achat\" %&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"modal-footer\"&gt;\n          &lt;button type=\"button\" class=\"btn btn-primary\" onclick=\"showModal('MyNewCow1')\" style=\"float:left;\"&gt;Retour&lt;/button&gt;\n          &lt;%= f.button :submit, \"Cr\u00e9er la vache\", class: \"button_submit\" %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n  &lt;!-- / Modal new cow --&gt;\n\n  &lt;%= hidden_field :cycle, :cat, :value =&gt; 1 %&gt;\n\n\n  &lt;script&gt;\n  function showModal(id) {\n    $(\".modal\").modal('hide');\n    $(\"#\" + id).modal(); }\n&lt;/script&gt;\n\n&lt;script&gt;\n  jQuery(document).ready(function () {\n  jQuery('#sell_form1').hide();\n  jQuery('#sell_hide1').on('click', function (event) {\n  jQuery('#sell_form1').toggle();\n      });\n  });\n&lt;/script&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>And the best part the create.js.erb =</p>\n\n<pre><code>$('#MyNewCow2').modal('hide');\n$('#cow_num').val('');\n$('#cow_name').val('');\n$('#cow_born_date').val('');\n$('#cow_mother').val('');\n$('#cow_father').val('');\n$('#cow_buy_date').val('');\n$('#cow_buy_price').val('');\n\n$('#Cow_tabfalse').append(\"&lt;%= j render 'cow', cow: @cow %&gt;\")\n</code></pre>\n\n<p>So if you have any advices to solve this error, and stop the crash of this action, it would be great </p>\n\n<p>Thanks, have a beautiful day </p>\n"}, {"tags": ["ruby", "jekyll", "bundler"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490821941, "post_id": 43102363, "comment_id": 73290062, "body": "followed your steps and I&#39;m unable to reproduce this. But why would you have --force be the default behavior? Are you really in a situation where you want to overwrite a project so often?"}, {"owner": {"reputation": 33, "user_id": 6840561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799176200b527a4acfc28a06fbf1d1bf?s=128&d=identicon&r=PG&f=1", "display_name": "jptacek", "link": "https://stackoverflow.com/users/6840561/jptacek"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490823001, "post_id": 43102363, "comment_id": 73290604, "body": "@maxple my project directory contains a Gemfile (i.e., is non-empty), so I need to use --force to initialize jekyll there"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490832043, "post_id": 43102363, "comment_id": 73293657, "body": "I tried it with the same Gemfile you have shown here. It totally overwrote the Gemfile."}, {"owner": {"reputation": 33, "user_id": 6840561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799176200b527a4acfc28a06fbf1d1bf?s=128&d=identicon&r=PG&f=1", "display_name": "jptacek", "link": "https://stackoverflow.com/users/6840561/jptacek"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490832569, "post_id": 43102363, "comment_id": 73293813, "body": "@maxple thanks for trying to replicate the issue! it overwrites the Gemfile for me too, but then throws errors when it tries to <code>bundle install</code> ...not so for you?"}], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 6840561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799176200b527a4acfc28a06fbf1d1bf?s=128&d=identicon&r=PG&f=1", "display_name": "jptacek", "link": "https://stackoverflow.com/users/6840561/jptacek"}, "edited": false, "score": 0, "creation_date": 1490845674, "post_id": 43107632, "comment_id": 73296991, "body": "correct, i&#39;m installing jekyll to vendor/bundle using <code>bundle install</code>. this is what the original Gemfile is for and why i need to do <code>bundle exec jekyll new</code> to create the site. using <code>jekyll new</code> wouldn&#39;t find jekyll on the $PATH."}, {"owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "reply_to_user": {"reputation": 33, "user_id": 6840561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799176200b527a4acfc28a06fbf1d1bf?s=128&d=identicon&r=PG&f=1", "display_name": "jptacek", "link": "https://stackoverflow.com/users/6840561/jptacek"}, "edited": false, "score": 0, "creation_date": 1490894178, "post_id": 43107632, "comment_id": 73327818, "body": "Oh I see.. guess, I misread your question. Can you please report back if you&#39;re facing the same issue with <code>jekyll v3.3.1</code>? Thanks"}, {"owner": {"reputation": 33, "user_id": 6840561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799176200b527a4acfc28a06fbf1d1bf?s=128&d=identicon&r=PG&f=1", "display_name": "jptacek", "link": "https://stackoverflow.com/users/6840561/jptacek"}, "edited": false, "score": 0, "creation_date": 1490894961, "post_id": 43107632, "comment_id": 73328300, "body": "just tried again with jekyll 3.3.1 and got (basically) the same error: &quot;Could not find gem &#39;minima (~&gt; 2.0)&#39; in any of the gem sources listed in your Gemfile. Run <code>bundle install</code> to install missing gems.&quot; (as before, following up with another <code>bundle install</code> does the trick)"}], "tags": [], "owner": {"reputation": 4449, "user_id": 7681659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47bc1a3b7231505d61b7f80642bc1a14?s=128&d=identicon&r=PG&f=1", "display_name": "ashmaroli", "link": "https://stackoverflow.com/users/7681659/ashmaroli"}, "is_accepted": false, "score": 0, "last_activity_date": 1490842175, "creation_date": 1490842175, "answer_id": 43107632, "question_id": 43102363, "link": "https://stackoverflow.com/questions/43102363/jekyll-bundler-fails-when-creating-new-default-site-with-bundle-exec-jekyll-n/43107632#43107632", "title": "Jekyll / Bundler fails when creating new default site with `bundle exec jekyll new . --force`", "body": "<p>From what I gather, the only difference in your workflow from the official documentation is that you install <code>jekyll</code> gem and its dependencies to <code>vendor/bundle</code>.</p>\n\n<p><code>jekyll new</code> creates a Gemfile along with the site scaffolding. So you needn't initialize one beforehand and then overwrite it with the <code>--force</code> switch.</p>\n\n<p>To scaffold a new Jekyll Site at <code>/projects/site</code>, you simply need to do the following:</p>\n\n<pre><code># from 'projects/' directory\n$ jekyll new site\n</code></pre>\n\n<p>Now you may edit the <code>Gemfile</code> and include any other gems as required.</p>\n\n<p><strong>Note: Its not <code>bundle exec jekyll new --</code> but plain ol' <code>jekyll new</code>.</strong><br>\n<code>bundle exec</code> is <strong>prepended to every other command</strong> only if a <code>Gemfile</code> exists within the directory.</p>\n"}], "owner": {"reputation": 33, "user_id": 6840561, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/799176200b527a4acfc28a06fbf1d1bf?s=128&d=identicon&r=PG&f=1", "display_name": "jptacek", "link": "https://stackoverflow.com/users/6840561/jptacek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 616, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490881213, "creation_date": 1490815177, "last_edit_date": 1490881213, "question_id": 43102363, "link": "https://stackoverflow.com/questions/43102363/jekyll-bundler-fails-when-creating-new-default-site-with-bundle-exec-jekyll-n", "title": "Jekyll / Bundler fails when creating new default site with `bundle exec jekyll new . --force`", "body": "<p>I did <code>bundle config --global path vendor/bundle</code> so that Bundler installs dependencies (including Jekyll) to project directories instead of GEM_HOME. I don't have Jekyll installed to GEM_HOME.</p>\n\n<p>When I initialized a project directory...</p>\n\n<pre><code>mkdir site &amp;&amp; cd site\nbundle init\n</code></pre>\n\n<p>Updated the contents of my project Gemfile...</p>\n\n<pre><code># frozen_string_literal: true\nsource \"https://rubygems.org\"\n\ngem \"jekyll\"\n</code></pre>\n\n<p>Installed Jekyll to the project directory and created a new site with default scaffolding...</p>\n\n<pre><code>bundle install\nbundle exec jekyll new . --force\n</code></pre>\n\n<p>...I expected that Jekyll would write the default site scaffolding into the current directory, overwrite <em>my</em> original Gemfile, and then <code>bundle install</code> default site dependencies from <em>its</em> Gemfile (e.g., minima) to vendor/bundle.</p>\n\n<p>Instead, here is the output:</p>\n\n<pre><code>Running bundle install in /Users/joeptacek/site...\n  Bundler: /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/resolver.rb:386:in `block in verify_gemfile_dependencies_are_found!': Could not find gem 'minima (~&gt; 2.0)' in any of the gem sources listed in your Gemfile. (Bundler::GemNotFound)\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/resolver.rb:356:in `each'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/resolver.rb:356:in `verify_gemfile_dependencies_are_found!'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/resolver.rb:203:in `start'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/resolver.rb:182:in `resolve'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/definition.rb:252:in `resolve'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/definition.rb:176:in `specs'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/definition.rb:235:in `specs_for'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/definition.rb:224:in `requested_specs'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/runtime.rb:118:in `block in definition_method'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/runtime.rb:19:in `setup'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler.rb:100:in `setup'\n  Bundler: from /Users/joeptacek/.gem/ruby/2.4.1/gems/bundler-1.14.6/lib/bundler/setup.rb:20:in `&lt;top (required)&gt;'\n  Bundler: from /Users/joeptacek/.rubies/ruby-2.4.1/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n  Bundler: from /Users/joeptacek/.rubies/ruby-2.4.1/lib/ruby/2.4.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n</code></pre>\n\n<p>If I run <code>bundle install</code> again, the dependencies are installed without further issue. </p>\n\n<p>To avoid errors, my workaround has been to make a <code>new</code> site with</p>\n\n<pre><code>bundle exec jekyll new . --force --skip-bundle &amp;&amp; bundle install\n</code></pre>\n\n<p>Is this a bug, or am I misunderstanding something about the way Jekyll and Bundler work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "post", "get"], "comments": [{"owner": {"reputation": 247, "user_id": 1521341, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/VHzAE.png?s=128&g=1", "display_name": "HTMLGuy", "link": "https://stackoverflow.com/users/1521341/htmlguy"}, "edited": false, "score": 1, "creation_date": 1490812729, "post_id": 43101544, "comment_id": 73284719, "body": "I think the question would be better phrased as &quot;how can I add a query string parameter to a link generated in Ruby&quot;. Is that correct?"}, {"owner": {"reputation": 231, "user_id": 7729561, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cfac615f819a9d5f20c9db61028ffdc6?s=128&d=identicon&r=PG&f=1", "display_name": "cfrostte", "link": "https://stackoverflow.com/users/7729561/cfrostte"}, "reply_to_user": {"reputation": 247, "user_id": 1521341, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/VHzAE.png?s=128&g=1", "display_name": "HTMLGuy", "link": "https://stackoverflow.com/users/1521341/htmlguy"}, "edited": false, "score": 0, "creation_date": 1490813049, "post_id": 43101544, "comment_id": 73284942, "body": "@ShaneStebner Yes you&#39;re right. I have just edited it. Thanks."}], "answers": [{"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": true, "score": 1, "last_activity_date": 1490823928, "creation_date": 1490823928, "answer_id": 43104717, "question_id": 43101544, "link": "https://stackoverflow.com/questions/43101544/how-can-i-add-a-query-string-parameter-to-a-link-generated-in-ruby/43104717#43104717", "title": "How can I add a query string parameter to a link generated in Ruby?", "body": "<p>First assign the correct value to your links:</p>\n\n<pre><code># x.html.erb\n\n&lt;%= link_to 'A', y_path(value: 'data if A') %&gt;\n&lt;%= link_to 'B', y_path(value: 'data if B') %&gt;\n</code></pre>\n\n<p>Then assign the value you get from the link in the controller:</p>\n\n<pre><code># y_controller.rb\n\ndef y\n  @value = params[:value]\nend\n</code></pre>\n\n<p>Finally, show the value using <code>@value</code> in your view:</p>\n\n<pre><code># y.html.erb\n\n&lt;%= @value %&gt;\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 7729561, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/cfac615f819a9d5f20c9db61028ffdc6?s=128&d=identicon&r=PG&f=1", "display_name": "cfrostte", "link": "https://stackoverflow.com/users/7729561/cfrostte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 43104717, "answer_count": 1, "score": 0, "last_activity_date": 1490823928, "creation_date": 1490812642, "last_edit_date": 1490813862, "question_id": 43101544, "link": "https://stackoverflow.com/questions/43101544/how-can-i-add-a-query-string-parameter-to-a-link-generated-in-ruby", "title": "How can I add a query string parameter to a link generated in Ruby?", "body": "<p>I want to send a data from an <code>X</code> view to a <code>Y</code> view, using a link.\nThen, in the <code>Y</code> view, I want to display the data I send from the <code>X</code> view:</p>\n\n<p>/app/views/x.html.erb:</p>\n\n<pre><code>&lt;%= link_to 'A', y_path('data if A') %&gt;\n&lt;%= link_to 'B', y_path('data if B') %&gt;\n</code></pre>\n\n<p>/app/views/y.html.erb:</p>\n\n<pre><code>#I show the data that I receive as parameter in the link\n</code></pre>\n\n<p>What do I have to do to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "testing", "stripe-payments"], "answers": [{"tags": [], "owner": {"reputation": 51, "user_id": 13623236, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GhoqHd9je9hzCupdVXuBxb14QnaZaOFm5-wVN8w=k-s128", "display_name": "Chris Waters", "link": "https://stackoverflow.com/users/13623236/chris-waters"}, "is_accepted": false, "score": 1, "last_activity_date": 1605192048, "creation_date": 1605192048, "answer_id": 64806029, "question_id": 43101095, "link": "https://stackoverflow.com/questions/43101095/normalize-opts-expects-a-string-or-a-hash-error-testing-stripe-in-rails/64806029#64806029", "title": "&quot;normalize_opts expects a string or a hash&quot; error testing Stripe in Rails", "body": "<p>I appreciate this is an old question, but I just hit the same error and ended up here.</p>\n<p>For those of you who do the same, you may discover that \u2013 like me \u2013 the Stripe Account ID is blank, or more correctly <code>nil</code>, and thus it is not the String or the Hash expected (as the error message refers to).</p>\n<p>In the Question's code, I believe this would be the <code>user.secret_key</code>, as it looks like this implementation is for Stripe's Connect product.</p>\n"}], "owner": {"reputation": 826, "user_id": 4055731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qrW44.jpg?s=128&g=1", "display_name": "Evelin Ponce", "link": "https://stackoverflow.com/users/4055731/evelin-ponce"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1605192048, "creation_date": 1490811244, "last_edit_date": 1490813370, "question_id": 43101095, "link": "https://stackoverflow.com/questions/43101095/normalize-opts-expects-a-string-or-a-hash-error-testing-stripe-in-rails", "title": "&quot;normalize_opts expects a string or a hash&quot; error testing Stripe in Rails", "body": "<p>Im trying to create a test for a method that make a charge in a credit card using Stripe, I have set all the Stripe configurations and already got working other tests like \"create stripe customer\" and \"assign bank account\" but when I try to create a charge the test show me the next failure:</p>\n\n<pre><code>1) STRIPE API POST /v1/events/:id/pay when the event exist pay event\n Failure/Error: @charge = Stripe::Charge.create( charge_attrs, user.secret_key )\n\n TypeError:\n   normalize_opts expects a string or a hash\n # /.rvm/gems/ruby-2.4.0/gems/stripe-1.58.0/lib/stripe/util.rb:203:in `normalize_opts'\n</code></pre>\n\n<p><br></p>\n\n<h3>Gemfile</h3>\n\n<pre><code>gem 'rails', '~&gt; 5.0.1'\ngem 'stripe', '~&gt; 1.31'\ngem 'stripe-ruby-mock', '~&gt; 2.4.0', :require =&gt; 'stripe_mock'\n</code></pre>\n\n<p><br></p>\n\n<h3>stripe_spec.rb</h3>\n\n<pre><code>  RSpec.describe 'STRIPE API', type: :request do\n    describe 'POST /v1/events/:id/pay' do\n        let!(:events) { create_list(:event, 2) }\n        let(:event_id) { events.first.id }\n\n        let!(:users) { create_list(:user, 2) }\n        let(:user_id) { users.first.id }\n\n        let(:auth_headers) { users.first.create_new_auth_token }\n\n        let(:stripe_helper) { StripeMock.create_test_helper }\n\n        context 'when the event exist' do\n          before {\n            StripeMock.start\n            card_token = StripeMock.generate_card_token(last4: \"9191\", exp_year: 2020)\n\n            post \"/v1/events/#{event_id}/pay\", params: { token: card_token, user_id: user_id } , headers: auth_headers\n          }\n          after { StripeMock.stop }\n\n          it \"pay event\" do\n            p json\n            expect(response).to be_success\n          end\n        end\n    end\nend\n</code></pre>\n\n<p><br></p>\n\n<h3>events_controller</h3>\n\n<pre><code>module Api::V1\n  class EventsController &lt; ApiController\n    #POST events/{id}/pay/{user_id, token}\n    def pay\n      @event = Event.all.active.find(params[:id])\n    # Find the user to pay.\n      user = User.find( params[:id] )\n      # Charge fee.\n      amount = 10\n      user.currency = 'USD'\n      # Calculate the fee amount that goes to the application.\n      fee = (amount * Rails.application.secrets.fee_percentage).to_i\n      begin\n        charge_attrs = {\n          amount: amount,\n          currency: user.currency,\n          source: params[:token],\n          description: \"Pickleball Clinic\",\n          application_fee: fee\n        }\n        # Use the user-to-be-paid's access token\n        # to make the charge directly on their account\n        @charge = Stripe::Charge.create( charge_attrs, user.secret_key )\n\n        json_response(@charge)\n\n      rescue Stripe::CardError =&gt; e\n        @error = e.json_body[:error][:message]\n        json_response(@error)\n      end        \n    end\nend\n</code></pre>\n\n<p><br></p>\n\n<h3>event.rb</h3>\n\n<pre><code>class Event &lt; ApplicationRecord\n  validates_presence_of :name\n  validates_presence_of :description\n  validates_presence_of :created_by\n  belongs_to  :admin, :class_name =&gt; 'User', :foreign_key =&gt; 'created_by'\n  scope :active, -&gt; { where( is_active: true ) }\n\n  has_many    :event_participants\n  has_many    :participants, :through =&gt; :event_participants, foreign_key: \"participant_id\" do\n    def active\n      where(\"event_participants.is_active = ?\", true)\n    end\n  end\nend\n</code></pre>\n\n<p><br></p>\n\n<h3>FactoryGirl</h3>\n\n<pre><code>FactoryGirl.define do\n  factory :event do\n    association :admin, factory: :user\n    name        { Faker::Lorem.sentence }\n    description { Faker::Lorem.paragraphs(2) }\n    status      { Faker::Number.between(0,3) }\n    fee         { Faker::Number.between(5,10) }\n\n    created_at  { Faker::Date.between(2.days.ago, Date.today) }\n    updated_at  { Faker::Date.between(1.days.ago, Date.today) }\n    is_active   { 1 }\n\n    association       :location, factory: :location\n\n    after(:create) do |event|\n      create_list(:event_participants, 3, event: event)\n    end\n\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "terminal"], "comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1490810876, "post_id": 43100592, "comment_id": 73283624, "body": "What shell are you using? For me, I&#39;d get a <code>unknown command</code> error if there was nothing called <code>rails</code>, so it seems like there&#39;s <i>something</i> there. Did you try re-running <code>sudo gem install rails</code> again, and seeing if it works after that? Also, your last paragraph is irrelevant to the actual question, and makes the whole thing come off as more of a rant; I&#39;d suggest removing it."}, {"owner": {"reputation": 3050, "user_id": 1810434, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/498Wj.png?s=128&g=1", "display_name": "Joe Essey", "link": "https://stackoverflow.com/users/1810434/joe-essey"}, "edited": false, "score": 1, "creation_date": 1490810925, "post_id": 43100592, "comment_id": 73283665, "body": "You should use <code>rvm</code>: <a href=\"https://rvm.io/\" rel=\"nofollow noreferrer\">rvm.io</a>.  Using the default Ruby on Mac can be challenging, which you&#39;re discovering.  Just follow the instructions there."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1490811165, "post_id": 43100592, "comment_id": 73283782, "body": "have you tried running <code>gem install rails</code> without the sudo? also, i second that you absolutely should use rvm."}, {"owner": {"reputation": 2157, "user_id": 6407868, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/5f5ea0c071e2a5adff7d131f58cc2011?s=128&d=identicon&r=PG&f=1", "display_name": "the12", "link": "https://stackoverflow.com/users/6407868/the12"}, "edited": false, "score": 0, "creation_date": 1490811374, "post_id": 43100592, "comment_id": 73283931, "body": "If you&#39;re using rbenv, type <code>rbenv rehash</code>, or restart your console."}, {"owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "edited": false, "score": 0, "creation_date": 1490811483, "post_id": 43100592, "comment_id": 73283988, "body": "I&#39;d suggest you take a step back and read <a href=\"http://www.createdbypete.com/articles/ruby-on-rails-development-setup-for-mac-osx/\" rel=\"nofollow noreferrer\">createdbypete.com/articles/&hellip;</a> to get started properly. Trying to globally install Ruby and Rails will eventually work, but unless you&#39;re planning on only working on one Rails project ever, you&#39;ll eventually need a Ruby version manager and the tooling it provides to isolate each project."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490811614, "post_id": 43100592, "comment_id": 73284072, "body": "Run <code>gem env</code> and copy/paste the output into your question, formatted for readability. It looks like you have a sandbox manager, like rbenv or RVM installed but don&#39;t show anything confirming it."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1490813176, "post_id": 43100592, "comment_id": 73285017, "body": "&quot;why is there such a reliance on the Terminal, what wrong with a good GUI?&quot;? You&#39;re programming a scripting language on a computer. Computers have command-lines to give us absolute control of the system. GUIs sit in a layer above the command-line and, while they&#39;re useful and we use them a lot, they&#39;re not the layer we want when we want absolute control for configuring or administering a system. When the mouse dies or the system won&#39;t register clicks the GUI is worthless. I&#39;d recommend considering the CLI your friend, embrace it, and get to know it well."}, {"owner": {"reputation": 1366, "user_id": 240241, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/112dd0b8d8b9af0e45fd5daca0a23401?s=128&d=identicon&r=PG", "display_name": "Simon Cooper", "link": "https://stackoverflow.com/users/240241/simon-cooper"}, "edited": false, "score": 0, "creation_date": 1490814457, "post_id": 43100592, "comment_id": 73285896, "body": "QPaysTaxes that last comment was definitely a bit of venting. Removed."}, {"owner": {"reputation": 1366, "user_id": 240241, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/112dd0b8d8b9af0e45fd5daca0a23401?s=128&d=identicon&r=PG", "display_name": "Simon Cooper", "link": "https://stackoverflow.com/users/240241/simon-cooper"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490814604, "post_id": 43100592, "comment_id": 73285982, "body": "@theTinMan Terminal has been a steep learning curve for me so far. Getting there step by step though. I do have RVM installed, but looks like I&#39;ve solved the issue for now. Thanks."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490828410, "post_id": 43100592, "comment_id": 73292565, "body": "We spend 50% of our time at the CLI where I work, and the other 50% in browsers and editors. And the other 50% trying to figure out why people did things the way they did in code we have to support."}], "answers": [{"tags": [], "owner": {"reputation": 1366, "user_id": 240241, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/112dd0b8d8b9af0e45fd5daca0a23401?s=128&d=identicon&r=PG", "display_name": "Simon Cooper", "link": "https://stackoverflow.com/users/240241/simon-cooper"}, "is_accepted": false, "score": -2, "last_activity_date": 1490813766, "creation_date": 1490813766, "answer_id": 43101909, "question_id": 43100592, "link": "https://stackoverflow.com/questions/43100592/rails-is-not-currently-installed-on-this-system-yet-ive-already-installed-it/43101909#43101909", "title": "Rails is not currently installed on this system yet I&#39;ve already installed it", "body": "<p>Solved it.  Found I had another copy in another path.  Deleted it and moved it into the same directory where I wanted to create the new app.  </p>\n\n<pre><code>$sudo rails where\n</code></pre>\n\n<p>allowed me to find it.</p>\n"}], "owner": {"reputation": 1366, "user_id": 240241, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/112dd0b8d8b9af0e45fd5daca0a23401?s=128&d=identicon&r=PG", "display_name": "Simon Cooper", "link": "https://stackoverflow.com/users/240241/simon-cooper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2143, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490814407, "creation_date": 1490809529, "last_edit_date": 1490814407, "question_id": 43100592, "link": "https://stackoverflow.com/questions/43100592/rails-is-not-currently-installed-on-this-system-yet-ive-already-installed-it", "title": "Rails is not currently installed on this system yet I&#39;ve already installed it", "body": "<p>I'm going round in circles getting the \"Rails is not installed on this system\" message in Terminal, yet it tells me I've just installed it.</p>\n\n<pre><code>Simons-MacBook-Pro:~ Simon$ sudo gem install rails\nSuccessfully installed rails-5.0.2\nParsing documentation for rails-5.0.2\nDone installing documentation for rails after 0 seconds\n1 gem installed\nSimons-MacBook-Pro:~ Simon$ rails -v\nRails is not currently installed on this system. To get the latest version, \nsimply type:\n\n$ sudo gem install rails\n\nYou can then rerun your \"rails\" command.\nSimons-MacBook-Pro:~ Simon$ \n</code></pre>\n\n<p>Is there somewhere in particular I should be installing it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "passwords", "renewal"], "answers": [{"tags": [], "owner": {"reputation": 2298, "user_id": 5883753, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b32d66e6c723279fdfc2a90b269a070c?s=128&d=identicon&r=PG&f=1", "display_name": "fongfan999", "link": "https://stackoverflow.com/users/5883753/fongfan999"}, "is_accepted": false, "score": 0, "last_activity_date": 1491117466, "creation_date": 1491117466, "answer_id": 43165650, "question_id": 43100485, "link": "https://stackoverflow.com/questions/43100485/why-rails-devise-gem-throws-invalid-current-password-error-if-only-password-co/43165650#43165650", "title": "Why rails devise gem throws &#39;invalid current password&#39; error if only password confirmation is blank?", "body": "<p>I guess your <strong><code>current_password</code></strong> is <strong>not</strong> correct. Any typos?</p>\n\n<p>Let's update your password and test again!</p>\n\n<pre><code>user.password = new_password\nuser.password_confirmation = new_password\nuser.save\n</code></pre>\n"}], "owner": {"reputation": 215, "user_id": 4058757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e40626f8e068aef7905dd3160f376fc5?s=128&d=identicon&r=PG&f=1", "display_name": "Carlos J&#250;lio", "link": "https://stackoverflow.com/users/4058757/carlos-j%c3%balio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 341, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491117466, "creation_date": 1490809165, "question_id": 43100485, "link": "https://stackoverflow.com/questions/43100485/why-rails-devise-gem-throws-invalid-current-password-error-if-only-password-co", "title": "Why rails devise gem throws &#39;invalid current password&#39; error if only password confirmation is blank?", "body": "<p>I'm dealing with the renewal password screen errors on my rails app which has three inputs: <code>current password</code>, <code>new password</code> and <code>password confirmation</code>.</p>\n\n<p>There is one case when <code>current password</code> is correct but <code>new password</code> and <code>password confirmation</code> are blank but devise still throws 2 errors:</p>\n\n<ul>\n<li>Current password is invalid. (wrong)</li>\n<li>New password can't be blank. (correct)</li>\n</ul>\n\n<p>Have anyone experienced this behaviour?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1490812078, "post_id": 43100372, "comment_id": 73284357, "body": "I guess you forgot to close brackets: <code>where(:shops =&gt; (&#39;shop_date is not null&#39;))</code>"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "reply_to_user": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1490814676, "post_id": 43100372, "comment_id": 73286022, "body": "Diodon, the brackets are right!"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490814612, "post_id": 43101819, "comment_id": 73285988, "body": "Thank you IIya Lavrov but shows:  \t ArgumentError (wrong number of arguments (0 for 1+)"}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "reply_to_user": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490814883, "post_id": 43101819, "comment_id": 73286145, "body": "Sorry, i forgot to remove last bracket. Try updated version."}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490815322, "post_id": 43101819, "comment_id": 73286392, "body": "thank you IIya Lavrov. but the same.  the thing is: i&#39;m trying to iterate the shops of product just with date not nil and get the rate that this shop received.  if i put the rating off the brackets rails interpret the rating as from product not from shop and when i put inside the brackets show that error related with the string."}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "reply_to_user": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490816392, "post_id": 43101819, "comment_id": 73287077, "body": "I see what you need to do. Try new version, hope it will work."}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490816827, "post_id": 43101819, "comment_id": 73287346, "body": "thank you for your help IIya Lavrov.  but shows ArgumentError (wrong number of arguments (0 for 1+))  and to be honest i have not idea what (0 for 1+) means"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490816917, "post_id": 43101819, "comment_id": 73287391, "body": "and one thing for use products_ids no need has_many though association?"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490817245, "post_id": 43101819, "comment_id": 73287551, "body": "i added average to your answer. and now shows NameError (uninitialized constant CastController::Shops)"}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "reply_to_user": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490817400, "post_id": 43101819, "comment_id": 73287628, "body": "I made one more change. May you try new version."}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490818050, "post_id": 43101819, "comment_id": 73287995, "body": "IIya Lavrov, thank you very much. but this uninitialized constant CastController::Shops, persists! and i can&#39;t understand. your code is right."}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "reply_to_user": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490818195, "post_id": 43101819, "comment_id": 73288068, "body": "May be you have somewhere in your controller <code>Shops</code> instead of <code>Shop</code>?"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490818387, "post_id": 43101819, "comment_id": 73288156, "body": "a moment i&#39;ll check!"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490818478, "post_id": 43101819, "comment_id": 73288197, "body": "sorry i did not get what you said."}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "reply_to_user": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490818702, "post_id": 43101819, "comment_id": 73288298, "body": "Your model class has name <code>Shop</code>. If you trying to call <code>Shops</code> (which is not defined) in your controller you will receive error <code>uninitialized constant CastController::Shops</code>. So try to find <code>Shops</code> in your code and replace with <code>Shop</code>"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490819248, "post_id": 43101819, "comment_id": 73288596, "body": "Man! what a thing Jesus! now the logs shows  ActiveRecord::StatementInvalid (PG::GroupingError: ERROR:  column &quot;shops.shop_date&quot; must appear in the GROUP BY clause or be used in an aggregate function LINE 1: ..._rating is not null) GROUP BY product_id ORDER BY shop_date"}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "reply_to_user": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490819412, "post_id": 43101819, "comment_id": 73288703, "body": "Okay, i will do one more change"}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "reply_to_user": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490819711, "post_id": 43101819, "comment_id": 73288860, "body": "I changed solution a little bit. Now this mistake should gone"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490820090, "post_id": 43101819, "comment_id": 73289091, "body": "IIya Lavrov thank you very much for your help and persistence. but show the same error. seems that the error is caused because of grouping. if i remove the group(:product_id) ?"}, {"owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "reply_to_user": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490820318, "post_id": 43101819, "comment_id": 73289219, "body": "Without <code>group(:product_id)</code> it will make wrong result."}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490820695, "post_id": 43101819, "comment_id": 73289409, "body": "Ok, i removed the group(:product_id) and the logs shows:  ActionView::Template::Error (undefined method `[]&#39; for #&lt;BigDecimal:7ff439449410,&#39;0.15E1&#39;,18(27)&gt;)  related with   Rating: &lt;%= @ratings[product.id] || 0 %&gt;"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490820895, "post_id": 43101819, "comment_id": 73289522, "body": "and i removed the [product.id] || 0  to test and seems that worked. i&#39;ll test and put here"}, {"owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "edited": false, "score": 0, "creation_date": 1490821978, "post_id": 43101819, "comment_id": 73290081, "body": "well, i don&#39;t know if worked. the rating shows. but seems the same to all products"}], "tags": [], "owner": {"reputation": 2450, "user_id": 1114667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/c855f4e65f04cfbbe403fdb18e32fdfd?s=128&d=identicon&r=PG", "display_name": "Ilya Lavrov", "link": "https://stackoverflow.com/users/1114667/ilya-lavrov"}, "is_accepted": true, "score": 0, "last_activity_date": 1490819442, "last_edit_date": 1490819442, "creation_date": 1490813510, "answer_id": 43101819, "question_id": 43100372, "link": "https://stackoverflow.com/questions/43100372/why-does-undefined-method-on-nullstring-in-rails/43101819#43101819", "title": "Why does &quot;undefined method&quot; on null:String in Rails?", "body": "<p>I suppose, simplest way is to user <code>group by</code> query:</p>\n\n<pre><code># controller\n@products = Product.all\nproducts_ids = @products.collect(&amp;:id)\n@ratings = \n  Shop.where(product_id: products_ids).\n    where('shop_date is not null').rated.\n    group(:product_id).\n    average(:b_rating)\n\n# view\n&lt;% @products.each do |product| %&gt;\n  Rating: &lt;%= @ratings[product.id] || 0 %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 7696718, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/2019c6b1f20a273b8ffd442f6025244e?s=128&d=identicon&r=PG&f=1", "display_name": "nakapaka1", "link": "https://stackoverflow.com/users/7696718/nakapaka1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 43101819, "answer_count": 1, "score": 0, "last_activity_date": 1490819442, "creation_date": 1490808846, "last_edit_date": 1490814435, "question_id": 43100372, "link": "https://stackoverflow.com/questions/43100372/why-does-undefined-method-on-nullstring-in-rails", "title": "Why does &quot;undefined method&quot; on null:String in Rails?", "body": "<p>As i'm trying to show a specific data from has_many relation on a iteration</p>\n\n<p>Why Rails shows undefined method  for Null:String and how do I fix it?  </p>\n\n<blockquote>\n  <p>NoMethodError (undefined method `rated' for \"shop_date is not\n  null\":String)</p>\n</blockquote>\n\n<pre><code># controller Cast    \ndef cast    \n  @products = Product.all\n  @rating  = Product.joins(:shops).where(:shops =&gt; ('shop_date is not null').rated.average(:b_rating) || 0 )\nend\n\n# Model Shop\nbelongs_to :product\n\nattr_accessible   :b_rating,:product_id\n\nscope :by_participant, -&gt; {  where('shop_date is not null').order('shop_date desc') }\n\nscope :rated, -&gt; {  where('b_rating is not null') }\n\ndef self.average_rating\n  by_participant.rated.average(:b_rating) || 0\nend\n\n# Model Product\nHas_many :shops\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-on-rails-5", "rails-engines"], "answers": [{"tags": [], "owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "is_accepted": true, "score": 1, "last_activity_date": 1490811039, "creation_date": 1490811039, "answer_id": 43101034, "question_id": 43100293, "link": "https://stackoverflow.com/questions/43100293/rails-dispatch-event/43101034#43101034", "title": "rails dispatch event?", "body": "<p>I found the answer, it is the <a href=\"http://guides.rubyonrails.org/active_support_instrumentation.html#rails-framework-hooks\" rel=\"nofollow noreferrer\">instrumentation</a> that I was looking for</p>\n\n<pre><code>ActiveSupport::Notifications.subscribe \"start_processing.action_controller\" do |**args|\n  # your own custom stuff\nend\n</code></pre>\n\n<p>This way <code># your own custom stuff</code> will start to fire before the <code>before_action</code>! </p>\n"}], "owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "accepted_answer_id": 43101034, "answer_count": 1, "score": 0, "last_activity_date": 1490811039, "creation_date": 1490808590, "last_edit_date": 1490809972, "question_id": 43100293, "link": "https://stackoverflow.com/questions/43100293/rails-dispatch-event", "title": "rails dispatch event?", "body": "<p>First off, I am totally new with <code>gems</code> and <code>engines</code> (eh. <code>ruby</code>);\nI am writing a handy <code>engine</code> which is going to filter requests based on the <code>rules</code> the user(developer) defines, currently my approach is the following:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n\n  before_action { Acu::Monitor.new request }\nend\n</code></pre>\n\n<p>And it works like a charm, but I want the engine to be plug-n-play with minimum configuration by the user, is there anyway I can achive this?<br />\nCan I get anywhere between dispatch and controller, where I can validate the request? Is there something like <code>pre-dispatch-event</code> in rails?</p>\n\n<p>I would really appreciate if anyone help me on this, I got tired of google this, kind of ran out of query to write! :D</p>\n\n<hr>\n\n<h3>update:</h3>\n\n<p>requests has to be processed, i.e the target controller/action need to be determined by rails then I am processing the request.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby"], "comments": [{"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1490807389, "post_id": 43099835, "comment_id": 73281414, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/20937792/rails-adding-migration-to-add-an-array-default-empty\">Rails: Adding migration to add an array (default empty)</a>"}, {"owner": {"reputation": 178, "user_id": 2487677, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bYuWK.jpg?s=128&g=1", "display_name": "KyleHodgetts", "link": "https://stackoverflow.com/users/2487677/kylehodgetts"}, "edited": false, "score": 0, "creation_date": 1490807728, "post_id": 43099835, "comment_id": 73281647, "body": "Are you serialising the array in your model class?  <code>serialize :song_ids, Array</code> in <code>Playlist.rb</code>  <a href=\"http://apidock.com/rails/ActiveRecord/Base/serialize/class\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Base/serialize/class</a>"}, {"owner": {"reputation": 546, "user_id": 6361142, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QmtlI.jpg?s=128&g=1", "display_name": "Bad Hombre", "link": "https://stackoverflow.com/users/6361142/bad-hombre"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1490809213, "post_id": 43099835, "comment_id": 73282615, "body": "@muistooshort I am using mysql database for development and postgres for production"}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1490809437, "post_id": 43099835, "comment_id": 73282772, "body": "AFAIK MySQL doesn&#39;t support array columns so your <code>songs_ids</code> is just an <code>int</code>. There are so many differences between MySQL and PostgreSQL that ActiveRecord will not help you with that developing on MySQL and deploying on PostgreSQL is madness. Develop and test with PostgreSQL if that&#39;s what you&#39;re deploying on. Rails/ActiveRecord doesn&#39;t offer any useful support for database portability beyond that absolute basics."}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1490809633, "post_id": 43100530, "comment_id": 73282891, "body": "Tested in Postgresql this works, on Mysql it doesn&#39;t, this one keeps the <code>songs_ids</code> attribute as <code>nil</code> after the operation."}, {"owner": {"reputation": 546, "user_id": 6361142, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QmtlI.jpg?s=128&g=1", "display_name": "Bad Hombre", "link": "https://stackoverflow.com/users/6361142/bad-hombre"}, "edited": false, "score": 0, "creation_date": 1490810286, "post_id": 43100530, "comment_id": 73283288, "body": "It doesn&#39;t work even if I serialize because as you&#39;ve mentioned I think it&#39;s to do with the database, and I&#39;m guessing that&#39;s the only workaround for this?"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 1, "last_activity_date": 1490811431, "last_edit_date": 1490811431, "creation_date": 1490809305, "answer_id": 43100530, "question_id": 43099835, "link": "https://stackoverflow.com/questions/43099835/ruby-on-rails-adding-arrays-to-column/43100530#43100530", "title": "Ruby on Rails - Adding arrays to column", "body": "<p>If you're using Postgresql you can simply use the <code>update_all</code> method to update array columns in your model.</p>\n\n<pre><code>Playlist.where(id: 1).update_all(songs_ids: [1,2])\n</code></pre>\n\n<p>Note it won't work with <code>Playlist.find(1)...</code>.</p>\n\n<p>Using Mysql you can consider to <a href=\"http://apidock.com/rails/ActiveRecord/Base/serialize/class\" rel=\"nofollow noreferrer\">serialize</a> to do this you must use a string type column.</p>\n\n<pre><code> def change\n    add_column :playlists, :songs_ids, :string\n  end\n</code></pre>\n\n<p>Then specify the attribute which to serialize in your model.</p>\n\n<pre><code>class Playlist &lt; ActiveRecord::Base \n    serialize :songs_ids, Array \nend\n</code></pre>\n\n<p>Then you can test pushing any value to it.</p>\n\n<pre><code>playlist = Playlist.first\nplaylist.songs_ids &lt;&lt; 1\n=&gt; [1]\nplaylist.save\nplaylist.songs_ids &lt;&lt; 2\n=&gt; [2]\nplaylist.save\nplaylist.songs_ids\n=&gt; [1, 2]\n</code></pre>\n"}], "owner": {"reputation": 546, "user_id": 6361142, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/QmtlI.jpg?s=128&g=1", "display_name": "Bad Hombre", "link": "https://stackoverflow.com/users/6361142/bad-hombre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 433, "favorite_count": 0, "accepted_answer_id": 43100530, "answer_count": 1, "score": 0, "last_activity_date": 1490811431, "creation_date": 1490807133, "last_edit_date": 1490810741, "question_id": 43099835, "link": "https://stackoverflow.com/questions/43099835/ruby-on-rails-adding-arrays-to-column", "title": "Ruby on Rails - Adding arrays to column", "body": "<p>If I have a Playlist model, how can I push arrays into a column?</p>\n\n<pre><code>#&lt;Playlist id: 1, title: \"This is a playlist\", songs_ids: 1&gt;\n</code></pre>\n\n<p>And want to push arrays to the <code>songs_ids</code> column what do I have to do?</p>\n\n<p>This is how the <code>songs_ids</code> column look like</p>\n\n<pre><code>add_column :playlists, :songs_ids, :integer, array: true, default: []\n</code></pre>\n\n<p>I've tried updating the attributes and adding annother id of a song to it, but I have no luck with it either:</p>\n\n<pre><code>Playlist.find(1).update_attribute(songs_ids: [1, 2])\n</code></pre>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 4, "creation_date": 1490806041, "post_id": 43099477, "comment_id": 73280515, "body": "you can only have ONE unique key. So the double &quot;l&quot; will never work. Try the other way around. Index as key"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 2, "creation_date": 1490806079, "post_id": 43099477, "comment_id": 73280544, "body": "A hash maps a key to a value. You have to decide what value you want the key <code>&#39;l&#39;</code> to map to. Question: what should your proposed hash return, when queried for the key <code>&#39;l&#39;</code>?"}, {"owner": {"reputation": 2292, "user_id": 268016, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Bwj9S.jpg?s=128&g=1", "display_name": "Yuri Ghensev", "link": "https://stackoverflow.com/users/268016/yuri-ghensev"}, "edited": false, "score": 1, "creation_date": 1490806257, "post_id": 43099477, "comment_id": 73280653, "body": "Please provide some background on why you need that. As have been said, it is not possible to have more than one value to the same key. Suppose you try to access <code>my_hash[&#39;l&#39;]</code>, what value should it return, 2 or 3?"}, {"owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "edited": false, "score": 0, "creation_date": 1490806309, "post_id": 43099477, "comment_id": 73280684, "body": "If you don&#39;t have a hard requirement on having a hash, I provided another option as an answer."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490809171, "post_id": 43099477, "comment_id": 73282586, "body": "This isn&#39;t a good idea. What is the need for a hash that behaves this way? There&#39;s a lot of smell going on."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1490810541, "post_id": 43099477, "comment_id": 73283429, "body": "@Rusian, that&#39;s not correct. <code>{a: 1, b: 2}</code>, for example, has two unique keys. :-). I think you mean is &quot;all hash keys are unique&quot;."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490825982, "post_id": 43099477, "comment_id": 73291786, "body": "As others have said, it doesn&#39;t make much sense this way. If you want it the other way around (index -&gt; letter), you don&#39;t need to do anything : <code>&quot;hello&quot;[2] #=&gt; &#39;l&#39; </code>"}], "answers": [{"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 2, "creation_date": 1490825909, "post_id": 43099581, "comment_id": 73291758, "body": "or <code>s.each_char.with_index.to_a</code>"}], "tags": [], "owner": {"reputation": 28990, "user_id": 1114966, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/af8712b05e5cfb862323a07c83749054?s=128&d=identicon&r=PG", "display_name": "squiguy", "link": "https://stackoverflow.com/users/1114966/squiguy"}, "is_accepted": false, "score": 1, "last_activity_date": 1490806259, "creation_date": 1490806259, "answer_id": 43099581, "question_id": 43099477, "link": "https://stackoverflow.com/questions/43099477/ruby-converting-a-string-into-hash-with-each-character-as-key-and-index-as-val/43099581#43099581", "title": "Ruby - converting a string into hash with each character as key and index as value?", "body": "<p>Another option you can use is zipping two enumerations together.</p>\n\n<pre><code>s = \"hello\"\ns.chars.zip(0..s.size)\n</code></pre>\n\n<p>This yields: <code>[[\"h\", 0], [\"e\", 1], [\"l\", 2], [\"l\", 3], [\"o\", 4]]</code></p>\n"}, {"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1490809058, "post_id": 43099784, "comment_id": 73282510, "body": "&quot;but will confuse other Ruby programmers.&quot; which is a good reason to not use it unless there are big warning signs posted all around it."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1490826068, "post_id": 43099784, "comment_id": 73291812, "body": "<code>h[&quot;l&quot;] # =&gt; nil</code> :-/"}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 7, "last_activity_date": 1490806933, "creation_date": 1490806933, "answer_id": 43099784, "question_id": 43099477, "link": "https://stackoverflow.com/questions/43099477/ruby-converting-a-string-into-hash-with-each-character-as-key-and-index-as-val/43099784#43099784", "title": "Ruby - converting a string into hash with each character as key and index as value?", "body": "<p>It can be done, but will confuse other Ruby programmers.A normal hash treats a key \"a\" as identical to another \"a\". Unless a little known feature <code>.compare_by_identity</code> is used:</p>\n\n<pre><code>h = {}.compare_by_identity\n\"hello\".chars.each_with_index{|c,i| h[c] = i}\np h    # =&gt; {\"h\"=&gt;0, \"e\"=&gt;1, \"l\"=&gt;2, \"l\"=&gt;3, \"o\"=&gt;4}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 2, "last_activity_date": 1490811075, "creation_date": 1490811075, "answer_id": 43101051, "question_id": 43099477, "link": "https://stackoverflow.com/questions/43099477/ruby-converting-a-string-into-hash-with-each-character-as-key-and-index-as-val/43101051#43101051", "title": "Ruby - converting a string into hash with each character as key and index as value?", "body": "<p>Perhaps this would better serve your purposes.</p>\n\n<pre><code>\"hello\".each_char.with_index.with_object({}) { |(c,i),h| (h[c] ||= []) &lt;&lt; i }\n  #=&gt; {\"h\"=&gt;[0], \"e\"=&gt;[1], \"l\"=&gt;[2, 3], \"o\"=&gt;[4]}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9729, "user_id": 4554116, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/cu8de.png?s=128&g=1", "display_name": "Julius", "link": "https://stackoverflow.com/users/4554116/julius"}, "is_accepted": false, "score": 0, "last_activity_date": 1490881967, "last_edit_date": 1490881967, "creation_date": 1490881260, "answer_id": 43119658, "question_id": 43099477, "link": "https://stackoverflow.com/questions/43099477/ruby-converting-a-string-into-hash-with-each-character-as-key-and-index-as-val/43119658#43119658", "title": "Ruby - converting a string into hash with each character as key and index as value?", "body": "<p>I am new to Ruby and I am sure this can be refactored, but another alternative might be:</p>\n\n<pre><code>arr1 = \"Hello\".split(%r{\\s*})\n\narr2 = []\n\nfor i in 0..arr1.size - 1\n  arr2 &lt;&lt; i\nend\n\no = arr1.zip(arr2)\n\na_h = []\n\no.each do |i|\n  a_h &lt;&lt; Hash[*i]\nend\n\np a_h.each_with_object({}) { |k, v| k.each { |kk,vv| (v[kk] ||= []) &lt;&lt; vv } }\n</code></pre>\n\n<blockquote>\n  <p>=> {\"H\"=>[0], \"e\"=>[1], \"l\"=>[2, 3], \"o\"=>[4]}</p>\n</blockquote>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1106, "favorite_count": 0, "accepted_answer_id": 43101051, "answer_count": 4, "score": 0, "last_activity_date": 1490881967, "creation_date": 1490805872, "question_id": 43099477, "link": "https://stackoverflow.com/questions/43099477/ruby-converting-a-string-into-hash-with-each-character-as-key-and-index-as-val", "title": "Ruby - converting a string into hash with each character as key and index as value?", "body": "<p>I am trying to transform a given string into a hash with each its character = key and index = value.</p>\n\n<p>For example, if I have <code>str = \"hello\"</code>, I would like it to transform into <code>{\"h\"=&gt;0, \"e\"=&gt;1, \"l\"=&gt;2, \"l\"=&gt;3, \"o\"=&gt;4}</code>.</p>\n\n<p>I created a method as such:</p>\n\n<pre><code>def map_indices(arr)\n  arr.map.with_index {|el, index| [el, index]}.to_h\nend\n#=&gt; map_indices('hello'.split(''))\n#=&gt; {\"h\"=&gt;0, \"e\"=&gt;1, \"l\"=&gt;3, \"o\"=&gt;4}\n</code></pre>\n\n<p>The problem is it skips the first <code>l</code>. If I reverse the order of <code>el</code> and <code>index</code>:   <code>arr.map.with_index {|el, index| [index, el]}.to_h</code>, I get all the letters spelled out: <code>{0=&gt;\"h\", 1=&gt;\"e\", 2=&gt;\"l\", 3=&gt;\"l\", 4=&gt;\"o\"}</code></p>\n\n<p>But when I <code>invert</code> it, I get the same hash that skips one of the <code>l</code>'s.</p>\n\n<pre><code>map_indices('hello'.split('')).invert\n#=&gt; {\"h\"=&gt;0, \"e\"=&gt;1, \"l\"=&gt;3, \"o\"=&gt;4}\n</code></pre>\n\n<p>Why is this behaving like such? How can I get it to print <code>{\"h\"=&gt;0, \"e\"=&gt;1, \"l\"=&gt;2, \"l\"=&gt;3, \"o\"=&gt;4}</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "pagination", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "edited": false, "score": 0, "creation_date": 1490872443, "post_id": 43105739, "comment_id": 73311631, "body": "Thanks you! Putting everything in spec/features really did solve the issue. I mixed <code>get&#47;response</code> and <code>visit&#47;page</code> on purpose to try to get working at least one test case."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1490828836, "creation_date": 1490828836, "answer_id": 43105739, "question_id": 43099347, "link": "https://stackoverflow.com/questions/43099347/testing-will-paginate-gem-with-rspec-capybara/43105739#43105739", "title": "Testing will paginate gem with Rspec/Capybara", "body": "<p>You've got a number of issues here.  </p>\n\n<p>Firstly the other SO question you linked to isn't using Capybara so copying its examples for matchers is wrong.  </p>\n\n<p>Secondly you are writing controller tests, not view tests or feature tests. controller tests don't render the page by default, so to test elements on the page you want to be writing either view tests or feature tests. Capybara is designed for feature tests and isn't designed for controller tests. This is why the default <code>capybara/rspec</code> configuration file only includes the Capybara DSL into tests of type 'feature'.  It also includes the Capybara RSpec matchers into view tests since they are useful with the rendered strings provided there.</p>\n\n<p>Thirdly, you are mixing usage of <code>get/response</code>, and <code>visit/page</code> in the same file which just confuses things.</p>\n\n<p>If you rewrite these as feature tests, then to check you don't have a link with a specific href in capybara you would do</p>\n\n<pre><code>expect(page).not_to have_link(href: '...')\n</code></pre>\n\n<p>If you want to make sure that a link doesn't exist with specific text and a specific href</p>\n\n<pre><code>expect(page).not_to have_link('link text', href: '...')\n</code></pre>\n\n<p>Note: that checks there is not a link with both the given text and the given href, there could still be links with the text or the href</p>\n"}], "owner": {"reputation": 514, "user_id": 4613443, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/abfa85562e754636c46ac3dc3f67decd?s=128&d=identicon&r=PG", "display_name": "mohnstrudel", "link": "https://stackoverflow.com/users/4613443/mohnstrudel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 657, "favorite_count": 0, "accepted_answer_id": 43105739, "answer_count": 1, "score": 0, "last_activity_date": 1490872561, "creation_date": 1490805520, "last_edit_date": 1495541389, "question_id": 43099347, "link": "https://stackoverflow.com/questions/43099347/testing-will-paginate-gem-with-rspec-capybara", "title": "Testing will paginate gem with Rspec/Capybara", "body": "<p>In my application there is an admin part, which is restricted to superadmins (users with a property <code>superadmin: true</code>). I've got a shop list, which I want to get paginated and tested.</p>\n\n<p>When debugging the current code with <code>save_and_open_page</code> I get a blank page. If I log in not as a superadmin, I get redirected to application's root and when trying to debug with <code>save_and_open_page</code> is see the root page.. If I do not log in at all, then I'll get redirected to the sign in page. So the basic functionality should work. </p>\n\n<p>I'm having no clue why it does not work with <code>superadmin</code> and why I do not see the shops list when debugging with <code>save_and_open_page</code>.</p>\n\n<p>This is my <code>spec/controllers/shops_controller_spec.rb</code> (copied basically from <a href=\"https://codereview.stackexchange.com/questions/77180/rspec-test-for-pagination\">here</a>) :</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe Admin::ShopsController, type: :controller do\n\n  context \"GET methods\" do\n\n    describe \"#index action\" do\n      before(:all) {  \n        amount = Rails.application.config.page_size\n        amount.times { FactoryGirl.create(:shop) }\n      }\n\n      before(:each) {\n        login_as(FactoryGirl.create(:user, superadmin: true), :scope =&gt; :user)\n      }\n\n      context \"with entries == config.page_size\" do\n        it \"has no second page\" do\n          get :index\n          expect(response).not_to have_selector(\"a\", :href =&gt; \"/shops?page=2\", :content =&gt; \"2\")\n          # visit admin_shops_path\n          # expect(page).to have_no_xpath(\"//*[@class='pagination']//a[text()='2']\")\n        end\n      end\n\n      context \"with entries &gt; config.page_size\" do\n        before { FactoryGirl.create(:shop) }\n\n        it \"has a second page with too many entries\" do \n          visit \"/admin/shops\"\n          save_and_open_page\n          expect(page).to have_xpath(\"//*[@class='pagination']//a[text()='2']\")\n        end\n\n        it \"correctly redirects to next page\" do\n          visit admin_shops_path\n          find(\"//*[@class='pagination']//a[text()='2']\").click\n          expect(page.status_code).to eq(200)\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>As you can see, I tried to test in different ways (the \"expect block\" is taken from <a href=\"https://stackoverflow.com/questions/7692399/rspec-test-with-factory-girl-and-will-paginate-for-associated-objects?rq=1\">this SO-question</a>), but none of them work. Using <code>get :index</code> I receive </p>\n\n<pre><code>Admin::ShopsController GET methods #index action with entries == config.page_size has no second page\n     Failure/Error: expect(page).not_to have_selector(\"a\", :href =&gt; \"/shops?page=2\", :content =&gt; \"2\")\n\n     ArgumentError:\n       invalid keys :href, :content, should be one of :count, :minimum, :maximum, :between, :text, :id, :class, :visible, :exact, :exact_text, :match, :wait, :filter_set\n</code></pre>\n\n<p>Here is my AdminController.rb if it helps:</p>\n\n<pre><code>class AdminController &lt; ApplicationController\n    layout 'admin'\n\n  before_action :authenticate_user!, :verify_is_superadmin\n\n    before_action :set_locale\n    before_action :get_breadcrumbs\n\n    private\n\n    def get_breadcrumbs\n        splitted_url = request.original_fullpath.split(\"/\")\n        # Remove first object\n        splitted_url.shift\n        result = splitted_url.map { |element| element.humanize.capitalize }\n        session[:breadcrumbs] = result\n        # debug\n    end\n\n    def set_locale\n        I18n.locale =  params[:locale] || session[:locale] || I18n.default_locale\n        # session[:locale] = I18n.locale\n    end\n\n  def verify_is_superadmin\n    (current_user.nil?) ? redirect_to(root_path) : (redirect_to(root_path) unless current_user.superadmin?)\n  end\n\nend\n</code></pre>\n\n<p><strong>Update</strong>\nUsing Thomas' answer I ended up putting my code in <code>spec/features</code> and it looks like this right now:</p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.feature \"Widget management\", :type =&gt; :feature do\n\n  before(:each) {  \n    amount = Rails.application.config.page_size\n    amount.times { FactoryGirl.create(:shop) }\n  }\n\n  before(:each) {\n    login_as(FactoryGirl.create(:user, superadmin: true), :scope =&gt; :user)\n  }\n\n  scenario \"with entries == config.page_size\" do\n\n    visit admin_shops_path\n    #save_and_open_page\n    expect(page).to have_no_xpath(\"//*[@class='pagination']//a[text()='2']\")\n  end\n\n  scenario \"with entries &gt; config.page_size\" do\n    FactoryGirl.create(:shop)\n    visit admin_shops_path\n    expect(page).to have_xpath(\"//*[@class='pagination']//a[text()='2']\")\n  end\n\n  scenario \"with entries &gt; config.page_size it correctly redirects to next page\" do\n    FactoryGirl.create(:shop)\n    visit admin_shops_path\n    find(\"//*[@class='pagination']//a[text()='2']\").click\n    expect(page.status_code).to eq(200)\n  end\nend\n</code></pre>\n\n<p>Everything works!</p>\n"}, {"tags": ["ruby", "tdd", "chef-infra", "chef-recipe", "chefspec"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7486728"}, "edited": false, "score": 0, "creation_date": 1490834591, "post_id": 43104719, "comment_id": 73294304, "body": "@gig I gave the path of the remote file where it needs to be installed"}, {"owner": {"reputation": 1100, "user_id": 108654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6ae437fd594fd4c96ba19904c8eb4fc9?s=128&d=identicon&r=PG", "display_name": "gskillz", "link": "https://stackoverflow.com/users/108654/gskillz"}, "edited": false, "score": 0, "creation_date": 1490940934, "post_id": 43104719, "comment_id": 73345020, "body": "Rspec is like unit testing for your code, there is no real file ended in your desire directory."}], "tags": [], "owner": {"reputation": 1100, "user_id": 108654, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/6ae437fd594fd4c96ba19904c8eb4fc9?s=128&d=identicon&r=PG", "display_name": "gskillz", "link": "https://stackoverflow.com/users/108654/gskillz"}, "is_accepted": false, "score": 0, "last_activity_date": 1490823942, "creation_date": 1490823942, "answer_id": 43104719, "question_id": 43097821, "link": "https://stackoverflow.com/questions/43097821/unable-to-solve-rspec-issue-for-a-remote-file-resource/43104719#43104719", "title": "unable to solve rspec issue for a remote file resource", "body": "<p>This is your resource</p>\n\n<pre><code>remote_file 'sonarqube-5.6.6.zip' do\n source 'http://google.com/'\n action :create\n mode 00755\nend\n</code></pre>\n\n<p>and this is rspec for your resource</p>\n\n<pre><code>it 'creates a remote_file ' do\n  expect(chef_run).to create_remote_file('sonarqube-5.6.6.zip').with(\n      source: \"http://google.com\",\n      mode: 00755\n  )\nend\n</code></pre>\n\n<p>If you want to have configuration value from attributes/default.rb for location of your saved file you must mock this in your rspec file:</p>\n\n<pre><code>describe 'lecturio_ds::webfrontend' do\n  context 'When all attributes are default, on an unspecified platform'  do\n  let(:chef_run) do\n    ChefSpec::SoloRunner.new do |node|\n      node.set['file_cache_path'] = '/tmp'\n    end.converge(described_recipe)\n  end\n# place for your spec\nend\n</code></pre>\n\n<p>and after that you can verify it <code>create_remote_file('/tmp/sonarqube-5.6.6.zip')</code>.</p>\n\n<p>I don't understand why you use in your rspec file <code>File.join</code> there.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7486728"}, "is_accepted": false, "score": 0, "last_activity_date": 1490975003, "creation_date": 1490975003, "answer_id": 43144702, "question_id": 43097821, "link": "https://stackoverflow.com/questions/43097821/unable-to-solve-rspec-issue-for-a-remote-file-resource/43144702#43144702", "title": "unable to solve rspec issue for a remote file resource", "body": "<p>For few reasons this worked me, I modified my code by giving path for remote file which helped me to solve rspec to expect exactly the zip file location</p>\n\n<p>this helped me to solve rspec</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>remote_file 'Download zip file'do\r\nPath zip_file_location   \r\nsource http://google.com\r\nmode '0754'\r\naction :create\r\nend\u200b\r\n\r\n\r\nit 'creates a remote_file ' do\r\nexpect(chef_run).to create_remote_file('Download remote file')\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7486728"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1490975003, "creation_date": 1490801187, "last_edit_date": 1490867472, "question_id": 43097821, "link": "https://stackoverflow.com/questions/43097821/unable-to-solve-rspec-issue-for-a-remote-file-resource", "title": "unable to solve rspec issue for a remote file resource", "body": "<p>I tried to write rspec for one of my remote_file resource. But I am unsuccessful to make it.<br>\nMy concept is using remote_file it should download a remote file which is a zip file. What happen is rspec is expecting more after It downloaded remotely. </p>\n\n<p>This is my resource declaration:</p>\n\n<pre><code>remote_file zip_file_location do\n  source http://google.com\n  mode '0754'\n  action :create\nend\u200b\n</code></pre>\n\n<p>This is my rspec test:</p>\n\n<pre><code>it 'creates a remote_file ' do\n    expect(chef_run).to create_remote_file(::File.join(Chef::Config[:file_cache_path], 'sonarqube-5.6.6.zip'))\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 2, "creation_date": 1490801154, "post_id": 43097711, "comment_id": 73276979, "body": "You need <code>&quot;0011HelloWor00ld001&quot;[&#47;^0+&#47;].size</code>"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1490810119, "post_id": 43097881, "comment_id": 73283196, "body": "I&#39;ve noticed you often use the end-of-line anchors <code>^</code> and <code>$</code> where others might use the send-of-string anchors <code>\\A</code> and <code>\\z</code>. As that&#39;s obviously intentional, I&#39;m curious to know what your thinking is about that."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1490810337, "post_id": 43097881, "comment_id": 73283315, "body": "If you mean me, I used OP code. I only focused on the main problem. Surely to match a <i>string</i> start one should use <code>\\A</code> in Ruby."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 2, "creation_date": 1490814496, "post_id": 43097881, "comment_id": 73285916, "body": "<code>^</code> and <code>$</code> are much older and more common, so they&#39;re seen more often. In the years I&#39;ve been programming I&#39;ve only needed to use <code>\\A</code> or <code>\\z</code> instead of <code>^</code>/<code>$</code> a couple times. Most of the time I&#39;m searching a string containing a single line so it would make no difference and I fall back to what comes to mind first."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 6, "last_activity_date": 1490801371, "creation_date": 1490801371, "answer_id": 43097881, "question_id": 43097711, "link": "https://stackoverflow.com/questions/43097711/how-to-count-the-number-of-zeros-at-the-start-of-a-string/43097881#43097881", "title": "How to count the number of zeros at the start of a string", "body": "<p><code>.match(/^0+/)</code> will return a MatchData object, and thus you get <code>1</code> as the result (it denotes the number of elements in the match array).</p>\n\n<p>You need to get the size of the match itself. Use  one of the following:</p>\n\n<pre><code>\"0011HelloWor00ld001\".match(/^0+/)[0].size\n\"0011HelloWor00ld001\"[/^0+/].size\n\"0011HelloWor00ld001\".match(/^0+/).to_s.size\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490804680, "post_id": 43098523, "comment_id": 73279641, "body": "Interesting approach, although it might not be obvious that the index of the first non-<code>0</code> is equivalent to the number of leading <code>0</code>s."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 4, "last_activity_date": 1490803348, "last_edit_date": 1490803348, "creation_date": 1490803016, "answer_id": 43098523, "question_id": 43097711, "link": "https://stackoverflow.com/questions/43097711/how-to-count-the-number-of-zeros-at-the-start-of-a-string/43098523#43098523", "title": "How to count the number of zeros at the start of a string", "body": "<p>You could also simply use the <code>index</code> method of String like </p>\n\n<pre><code>str = '0011HelloWor00ld001'\n# as noted by @steenslag if the full string is zeros index will return nil\n# solve by returning full string length\nstr.index(/[^0]/) || str.length \n#=&gt; 2 \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490810387, "post_id": 43100659, "comment_id": 73283338, "body": "I wrote <code>.first</code> initially, too,  but it was already a long list. :)"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1490835226, "last_edit_date": 1490835226, "creation_date": 1490809784, "answer_id": 43100659, "question_id": 43097711, "link": "https://stackoverflow.com/questions/43097711/how-to-count-the-number-of-zeros-at-the-start-of-a-string/43100659#43100659", "title": "How to count the number of zeros at the start of a string", "body": "<p>I like @Wiktor's middle answer best, but here are three more.</p>\n\n<p><strong>#1</strong></p>\n\n<pre><code>def nbr_leading_zeros(str)\n  str.split(/[^0]/).first.size\nend\n\nnbr_leading_zeros '0011Hello00'    #=&gt; 2\nnbr_leading_zeros '101'            #=&gt; 0\nnbr_leading_zeros '000'            #=&gt; 3\n</code></pre>\n\n<p><strong>#2</strong></p>\n\n<pre><code>def nbr_leading_zeros(str)\n  str.each_char.take_while { |c| c=='0' }.size\nend\n</code></pre>\n\n<p><strong>#3</strong></p>\n\n<pre><code>def nbr_leading_zeros(str)\n  str.match(/\\A0*/)&amp;.end(0).to_i\nend\n</code></pre>\n"}], "owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 573, "favorite_count": 0, "accepted_answer_id": 43097881, "answer_count": 3, "score": 3, "last_activity_date": 1490835226, "creation_date": 1490800915, "last_edit_date": 1490814270, "question_id": 43097711, "link": "https://stackoverflow.com/questions/43097711/how-to-count-the-number-of-zeros-at-the-start-of-a-string", "title": "How to count the number of zeros at the start of a string", "body": "<p>I have a string:</p>\n\n<pre><code>\"0011HelloWor00ld001\"\n</code></pre>\n\n<p>How do I count the number of zeros in the starting of the string?\nFor example, the above string should return 2.</p>\n\n<p>I tried <code>.match(/^[0]+/).size</code> but it doesn't work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1490799971, "post_id": 43097301, "comment_id": 73276069, "body": "I assume you&#39;re using strong params. Could you post the relevant code from your controller?"}], "answers": [{"comments": [{"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1490801091, "post_id": 43097722, "comment_id": 73276927, "body": "I wouldn&#39;t do this. He should be using strong parameters."}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "reply_to_user": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1490801227, "post_id": 43097722, "comment_id": 73277039, "body": "@mmichael You still can use strong parameters. As long as you do this before the <code>permit</code> and <code>require</code>. Just shuffles things around"}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 0, "creation_date": 1490801533, "post_id": 43097722, "comment_id": 73277270, "body": "If he structures his strong params properly (and is using <code>accepts_nested_attributes_for</code>), he shouldn&#39;t need to combine them manually like that."}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "reply_to_user": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 1, "creation_date": 1490801946, "post_id": 43097722, "comment_id": 73277618, "body": "@mmichael I agree that that is the way to go. Except the params the come form the form are not properly nested. So strong params and accepts_nested_attributes_for will do nothing at all. The proper fix would be modifying the form or nesting them manually on the server side. THEN you can run them through all the proper channels"}, {"owner": {"reputation": 11638, "user_id": 461294, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/EQqHn.jpg?s=128&g=1", "display_name": "vich", "link": "https://stackoverflow.com/users/461294/vich"}, "edited": false, "score": 1, "creation_date": 1490803843, "post_id": 43097722, "comment_id": 73279082, "body": "agreed, and until he edits his question with the code we won&#39;t be able to help :|"}], "tags": [], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "is_accepted": false, "score": 0, "last_activity_date": 1490800957, "creation_date": 1490800957, "answer_id": 43097722, "question_id": 43097301, "link": "https://stackoverflow.com/questions/43097301/how-to-insert-nested-params-into-main-params/43097722#43097722", "title": "How to insert nested params into main params", "body": "<pre><code>params['goal']['user_name'] = params['user_name']\nparams['goal']['likes'] = params['likes']\nparams['goal']['starts_at_formatted'] = params['starts_at_formatted']\nparams['goal']['goalresults_attributes'] = params['goalresults_attributes']\nparams['goal']['progress'] = params['progress']\n</code></pre>\n\n<p>Put this in before you do do <code>update_attributes</code> </p>\n\n<p>It's very dirty/ugly. But it will get the job done</p>\n"}], "owner": {"reputation": 15438, "user_id": 261694, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/303c9077b767613527763cb64fbf04e7?s=128&d=identicon&r=PG&f=1", "display_name": "Jonathan Clark", "link": "https://stackoverflow.com/users/261694/jonathan-clark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490813899, "creation_date": 1490799835, "last_edit_date": 1490813899, "question_id": 43097301, "link": "https://stackoverflow.com/questions/43097301/how-to-insert-nested-params-into-main-params", "title": "How to insert nested params into main params", "body": "<p>I am building a Backbone/Marionette web app with Rails 5 as backend. I am sending form data with nested attributes. Unfortunately these nested attributes are added outside of the :goal parameters. How can I insert them into the main (:goal) params before save? Otherwise they are ignored and not inserted into the database.</p>\n\n<p>These are my params sent to server:</p>\n\n<pre><code>{\"id\"=&gt;\"7\", \"title\"=&gt;\"ReBook\", \"gtype\"=&gt;\"personal\", \"starts_at\"=&gt;\"2017-03-03\", \"ends_at\"=&gt;\"2017-10-03\", \"status\"=&gt;\"completed\", \"user_id\"=&gt;1, \"user_name\"=&gt;\"Mike\", \"likes\"=&gt;0, \"starts_at_formatted\"=&gt;\"2017-03-03\", \"ends_at_formatted\"=&gt;\"2017-10-03\", \"goalresults_attributes\"=&gt;{\"description\"=&gt;\"rrr\", \"progress\"=&gt;\"333\"}, \"goal\"=&gt;{\"id\"=&gt;\"7\", \"user_id\"=&gt;1, \"title\"=&gt;\"Rebook\", \"gtype\"=&gt;\"personal\", \"starts_at\"=&gt;\"2017-03-03\", \"ends_at\"=&gt;\"2017-10-03\", \"status\"=&gt;\"completed\"}}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "edited": false, "score": 0, "creation_date": 1490799900, "post_id": 43097230, "comment_id": 73276011, "body": "I&#39;m not sure why, but there&#39;s definitely some zeros in <code>str1</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1490799911, "post_id": 43097230, "comment_id": 73276018, "body": "Can you clarify your question, please? What do you mean by &quot;why is it so&quot;? What I mean by that is, what answer do you expect, other than &quot;because that&#39;s what the documentation of the method says&quot;?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1490805931, "post_id": 43097230, "comment_id": 73280439, "body": "Note <code>[1,0,1,0,1,1] - [0,1] #=&gt; []</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": false, "score": 4, "last_activity_date": 1490799876, "creation_date": 1490799876, "answer_id": 43097327, "question_id": 43097230, "link": "https://stackoverflow.com/questions/43097230/where-are-the-0-gone/43097327#43097327", "title": "Where are the &quot;0&quot; gone?", "body": "<p>That's the expected result - <code>-</code> functions like the set difference, removing all elements that appear in the second array.\nCheck out the <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-2D\" rel=\"nofollow noreferrer\">documentation</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "is_accepted": true, "score": 3, "last_activity_date": 1490799887, "creation_date": 1490799887, "answer_id": 43097331, "question_id": 43097230, "link": "https://stackoverflow.com/questions/43097230/where-are-the-0-gone/43097331#43097331", "title": "Where are the &quot;0&quot; gone?", "body": "<p>A quick quote from the documentation of <a href=\"https://ruby-doc.org/core-2.4.1/Array.html#method-i-2D\" rel=\"nofollow noreferrer\"><code>Array#-</code></a>:</p>\n\n<blockquote>\n  <p><strong>ary - other_ary \u2192 new_ary</strong></p>\n  \n  <p>Returns a new array that is a copy of the original array, removing any items that also appear in <code>other_ary</code>. The order is preserved from the original array.</p>\n</blockquote>\n\n<p>The example posted after the description shows how it works (the same as it works with your arrays):</p>\n\n<blockquote>\n<pre><code>[ 1, 1, 2, 2, 3, 3, 4, 5 ] - [ 1, 2, 4 ]  #=&gt;  [ 3, 3, 5 ]\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 43097331, "answer_count": 2, "score": 0, "last_activity_date": 1490800087, "creation_date": 1490799617, "question_id": 43097230, "link": "https://stackoverflow.com/questions/43097230/where-are-the-0-gone", "title": "Where are the &quot;0&quot; gone?", "body": "<pre><code>str = \"Blah00blah001\"\nstr1 = \"\"\nstr1 = str.gsub(/[0-9]+$/,'')\n\nprint str.chars\nputs\nprint str1.chars\nputs\n\nprint str.chars - str1.chars\n</code></pre>\n\n<p>output</p>\n\n<pre><code>[\"B\", \"l\", \"a\", \"h\", \"0\", \"0\", \"b\", \"l\", \"a\", \"h\", \"0\", \"0\", \"1\"]\n[\"B\", \"l\", \"a\", \"h\", \"0\", \"0\", \"b\", \"l\", \"a\", \"h\"]\n[\"1\"]\n</code></pre>\n\n<p>what I was expecting in the last print</p>\n\n<pre><code>[\"0\",\"0\",\"1\"]\n</code></pre>\n\n<p>What I got</p>\n\n<pre><code>[\"1\"]\n</code></pre>\n\n<p>Why is it so?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 2, "creation_date": 1490798686, "post_id": 43096791, "comment_id": 73274968, "body": "Please explain why you believe it&#39;s unreasonable."}, {"owner": {"reputation": 1, "user_id": 5319316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/322c36e90bd115401ff424269f69ace3?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5319316/kevin"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1490798755, "post_id": 43096791, "comment_id": 73275039, "body": "Sorry. It&#39;s inconsequential"}, {"owner": {"reputation": 6165, "user_id": 2697183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65255fe741b95ba0c641d96ea6750ea9?s=128&d=identicon&r=PG&f=1", "display_name": "AbM", "link": "https://stackoverflow.com/users/2697183/abm"}, "edited": false, "score": 0, "creation_date": 1490799245, "post_id": 43096791, "comment_id": 73275455, "body": "I know this is not the question but your code is unnecessarily complicated. You could replace your whole action with <code>@payment   = current_merchant.payments.where(&quot;id = ? OR reference = ?&quot;, params[:id], params[:id]).first!</code>. This will even raise the <code>ActiveRecord::RecordNotFound</code> if no payment is found"}, {"owner": {"reputation": 1, "user_id": 5319316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/322c36e90bd115401ff424269f69ace3?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5319316/kevin"}, "edited": false, "score": 0, "creation_date": 1490799504, "post_id": 43096791, "comment_id": 73275693, "body": "thanks,  So, What about this rspec?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490832261, "post_id": 43096791, "comment_id": 73293715, "body": "You&#39;re not checking for any of the failure cases. There are a lot of things you can potentially test. It depends on what level of detail you want to achieve in your unit tests."}], "owner": {"reputation": 1, "user_id": 5319316, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/322c36e90bd115401ff424269f69ace3?s=128&d=identicon&r=PG&f=1", "display_name": "Kevin", "link": "https://stackoverflow.com/users/5319316/kevin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 40, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490798575, "creation_date": 1490798575, "question_id": 43096791, "link": "https://stackoverflow.com/questions/43096791/how-to-write-rspec-for-my-function", "title": "How to write rspec for my function?", "body": "<pre><code>def get_payment\n        @payment   = current_merchant.payments.find_by_id(params[:id]) if params[:id].match(/^(\\d)+$/)\n        @payment ||= current_merchant.payments.find_by_reference(params[:id])\n\n        raise ActiveRecord::RecordNotFound if @payment.nil?\n        @payment\n      end\n</code></pre>\n\n<p>I have written the rspec for the code above but it seems unreasonable.I have written the rspec for the code above but it seems unreasonable\nParams [: id] contains only integers, and params [: reference] contains both numbers</p>\n\n<pre><code>describe \"GET show\" do\n    it \"can find payment by id\" do\n      get :show, id: payment.id\n      expect(response).to be_success\n      expect(assigns(:payment)).to eq(payment)\n    end\n\n    it \"can find payment by reference\" do\n      get :show, id: payment.reference\n      expect(response).to be_success\n      expect(assigns(:payment)).to eq(payment)\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 0, "last_activity_date": 1490805901, "creation_date": 1490805901, "answer_id": 43099482, "question_id": 43096033, "link": "https://stackoverflow.com/questions/43096033/storing-and-extracting-data-in-hashes-with-cucumber-capybara/43099482#43099482", "title": "Storing and extracting data in hashes with cucumber/capybara", "body": "<p>You're getting that error because the second parameter being matched is the data_table.  Your step definition would need to be </p>\n\n<pre><code>Given /^I login as \"(ad|ml)\" with the following data:/ do |user, data_table|\n  ...\n</code></pre>\n\n<p>If you look at the <code>Given /I create new user named \"(user_1|user_2|user_3)\" with the following data:/ do |user, data_table|</code> step in the article you linked you can see the same thing, although that doesn't use multiple entries in the data_table so I'm not 100% sure what you're trying to do in your example.</p>\n"}, {"tags": [], "owner": {"reputation": 3, "user_id": 3536133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58qCD.png?s=128&g=1", "display_name": "Anton Ovcharenko", "link": "https://stackoverflow.com/users/3536133/anton-ovcharenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1490856951, "creation_date": 1490856951, "answer_id": 43110636, "question_id": 43096033, "link": "https://stackoverflow.com/questions/43096033/storing-and-extracting-data-in-hashes-with-cucumber-capybara/43110636#43110636", "title": "Storing and extracting data in hashes with cucumber/capybara", "body": "<p>Thanks, Thomas; your hint lead to the following code that worked as expected</p>\n\n<pre><code>Given /^I login as \"(ad|ml)\" with the following data:/ do |login_role, data|\n\n  temp_hash = {}\n  data.hashes.each do |hash|\n    if hash[:role] == login_role\n      temp_hash[:role] = hash[:role]\n      temp_hash[:usern] = hash[:usern]\n      temp_hash[:userpass] = hash[:userpass]\n    end\n  end\n\n    usern = temp_hash[:usern]\n    userpass = temp_hash[:userpass]\n\n  @app = App.new\n  @app.login.load\n  @app.login.username.set usern\n  @app.login.password.set userpass\n  @app.login.btn_login.click\n  expect(@app.dashboard).to be_displayed\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 3536133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/58qCD.png?s=128&g=1", "display_name": "Anton Ovcharenko", "link": "https://stackoverflow.com/users/3536133/anton-ovcharenko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 160, "favorite_count": 0, "accepted_answer_id": 43099482, "answer_count": 2, "score": 0, "last_activity_date": 1490856951, "creation_date": 1490796689, "question_id": 43096033, "link": "https://stackoverflow.com/questions/43096033/storing-and-extracting-data-in-hashes-with-cucumber-capybara", "title": "Storing and extracting data in hashes with cucumber/capybara", "body": "<p>I have a lot of tests with different login credentials on cucumber/capybara/site_prism, which are quite messy. I want to unify them as much as possible; this solution seemed to be nice <a href=\"https://blog.jayway.com/2012/04/03/cucumber-data-driven-testing-tips/\" rel=\"nofollow noreferrer\">https://blog.jayway.com/2012/04/03/cucumber-data-driven-testing-tips/</a></p>\n\n<p>But when following the example I run into this for the very first line of step definition</p>\n\n<pre><code>Your block takes 1 argument, but the Regexp matched 2 arguments.\n</code></pre>\n\n<p>Apparently, I misunderstand how hashes should be handled; could somebody help please? My code with less test data is below\nCucumber</p>\n\n<pre><code>Given I login as \"ad\" with the following data:\n    |role|usern       |userpass     |\n    |ad  |adcccount   |adpassword   |\n    |ml  |mlaccount   |mlpassword   |\n</code></pre>\n\n<p>step definition</p>\n\n<pre><code>Given /^I login as \"(ad|ml)\" with the following data:/ do |user|\n temp_hash = {}\n    if (user == \"ad\")\n      temp_hash = $ad\n    elsif (user == \"ml\")\n      temp_hash = $ml\n    end\n\n    usern = temp_hash[\"usern\"]\n    userpass = temp_hash[\"userpass\"]\n\n @app = App.new\n  @app.login.load\n  @app.login.username.set usern\n  @app.login.password.set userpass\n  @app.login.btn_login.click\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rspec", "rspec-rails", "rspec2"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490798220, "post_id": 43096029, "comment_id": 73274568, "body": "Have you tried anything?"}, {"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490798380, "post_id": 43096029, "comment_id": 73274700, "body": "yes updated question"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490798503, "post_id": 43096029, "comment_id": 73274808, "body": "Can you add the code in your spec that created the <code>input</code>?"}, {"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490798602, "post_id": 43096029, "comment_id": 73274881, "body": "sorry missed that. added"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490798696, "post_id": 43096029, "comment_id": 73274981, "body": "<code>args</code> are keyword arguments. Hence you should do <code>Input.new(name, type, limit: limit)</code>. It shouldn&#39;t let you create the object at all."}, {"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490798732, "post_id": 43096029, "comment_id": 73275016, "body": "yeah you are right. let me try your solution"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490798767, "post_id": 43096029, "comment_id": 73275046, "body": "@ndn\tThey&#39;re not keyword arguments, they&#39;re hash values. There&#39;s an explicit difference."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1490798817, "post_id": 43096029, "comment_id": 73275090, "body": "@DaveNewton, they are kwargs (variable length keyword arguments)."}, {"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1490798967, "post_id": 43096029, "comment_id": 73275202, "body": "function convert_true_false wont return val = &#39;Y&#39;. any idea whats wrong? i put byebug and i get (byebug) @args[:limit] 1 (byebug) @type &quot;:char&quot; (byebug) val &quot;true&quot;"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490799056, "post_id": 43096029, "comment_id": 73275295, "body": "@User7354632781, for starters, what did it return. Print that. Also print the result of calling <code>convert_true_false</code>."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490799151, "post_id": 43096029, "comment_id": 73275381, "body": "@ndn\tI guess, although I don&#39;t see much of a practical difference--you get a hash back."}, {"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1490799438, "post_id": 43096029, "comment_id": 73275623, "body": "I see convert_true_false is returning Y by putting byebug but test case failing       expected: &quot;Y&quot; got: &quot;true&quot; is expect(input.value = &#39;true&#39; ).to eq(&#39;Y&#39;) wrong?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1490799490, "post_id": 43096029, "comment_id": 73275678, "body": "@DaveNewton, there are many differences, too long for a single comment. I&#39;m sure you can find an article on the subject or already know some of them. But it&#39;s important to make the conceptual difference as well. I find the legacy alternative of hash as last parameter almost working as kwargs that we had before Ruby 2.0 as one of the downfalls of the language."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490799853, "post_id": 43096029, "comment_id": 73275982, "body": "@User7354632781, added an answer."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490800124, "post_id": 43096029, "comment_id": 73276222, "body": "@ndn\tI didn&#39;t; it was a simple workaround for a missing language feature. &#175;&#40;&#176;_o)/&#175;"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490802930, "post_id": 43096029, "comment_id": 73278377, "body": "Can you directly assign it? <code>@value = convert_true_false (val)</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "edited": false, "score": 0, "creation_date": 1490799947, "post_id": 43097247, "comment_id": 73276050, "body": "input returns &lt;Programmability::Parameter::Input:0x007f99573785a0 @name=&quot;unregister_series&quot;, @type=:char, @args={:limit=&gt;1}, @value=&quot;Y&quot; so i did expect(input.value).to eq(&#39;Y&#39;) but getting error        expected: &quot;Y&quot;             got: &quot;N&#39;Y&#39;&quot;"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 0, "last_activity_date": 1490799658, "creation_date": 1490799658, "answer_id": 43097247, "question_id": 43096029, "link": "https://stackoverflow.com/questions/43096029/how-to-write-rspec-for-method/43097247#43097247", "title": "how to write rspec for method", "body": "<p>The issue is that setters always return the value passed:</p>\n\n<pre><code>class Test\n  def foo=(foo)\n    @foo = foo + 100\n    return 42\n  end\nend\n\nputs (Test.new.foo = 69) # 69\n</code></pre>\n\n<p>To resolve it, simply check the value after you assigned it:</p>\n\n<pre><code># instead of\nexpect(input.value = 'true').to eq 'Y'\n\n# do\ninput.value = 'true'\nexpect(input.value).to eq 'Y'\n</code></pre>\n"}], "owner": {"reputation": 1695, "user_id": 427354, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8b1da0d743d87175b7cc0ef93c8fcad7?s=128&d=identicon&r=PG", "display_name": "User7354632781", "link": "https://stackoverflow.com/users/427354/user7354632781"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 147, "favorite_count": 0, "accepted_answer_id": 43097247, "answer_count": 1, "score": 0, "last_activity_date": 1490799658, "creation_date": 1490796679, "last_edit_date": 1490798571, "question_id": 43096029, "link": "https://stackoverflow.com/questions/43096029/how-to-write-rspec-for-method", "title": "how to write rspec for method", "body": "<p>I have following code in programmability folder</p>\n\n<pre><code>module Programmability\n  module Parameter\n    class Input &lt; Parameter::Base\n      attr_reader :args\n\n  def initialize(name, type, **args)\n    super(name, type)\n    @args = args\n  end\n\n  def value=(val)\n    if val\n      val = convert_true_false(val)\n--- some code ----\n    end\n    @value = val\n  end      \n\n\n  def convert_true_false(val)\n    return val unless @args[:limit] == 1\n    if [:char].include?(@type) &amp;&amp; val == 'true'\n      'Y'\n    elsif [:char].include?(@type) &amp;&amp; val == 'false'\n      'N'\n    elsif [:bit].include?(@type) &amp;&amp; val == 'true'\n      1\n    elsif [:bit].include?(@type) &amp;&amp; val == 'false'\n      0\n    end\n  end\nend\n  end\nend\n</code></pre>\n\n<p>I am trying to write rspec for method convert_true_false. I am new to rspec. any help is appreciated.</p>\n\n<p>I tried doing this</p>\n\n<pre><code>   context 'returns Y if passed true'\n    input = Programmability::Parameter::Input.new(name, type, limit)\n\n      it 'returns Y' do\n        name = 'unregister_series'\n        type = ':char'\n        limit = 1\n\n        expect(input.value = 'true' ).to eq('Y')\n      end\n  end\n</code></pre>\n\n<p>but its not picking up limit value. when it reaches convert_true_false method it comes out of it since @args[:limit] is nil</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1490796205, "post_id": 43095737, "comment_id": 73272805, "body": "Check the difference in size or increment a counter."}, {"owner": {"reputation": 91, "user_id": 1737669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c8cf31e546396df098cb42ca80a1059?s=128&d=identicon&r=PG", "display_name": "Federico Giorni", "link": "https://stackoverflow.com/users/1737669/federico-giorni"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490796274, "post_id": 43095737, "comment_id": 73272861, "body": "Can I increment a counter inside delete_if block ?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1490796326, "post_id": 43095737, "comment_id": 73272900, "body": "Yes, you can do anything in there. Just define the counter before that."}], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 1737669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c8cf31e546396df098cb42ca80a1059?s=128&d=identicon&r=PG", "display_name": "Federico Giorni", "link": "https://stackoverflow.com/users/1737669/federico-giorni"}, "edited": false, "score": 0, "creation_date": 1490798376, "post_id": 43095976, "comment_id": 73274697, "body": "Thank you so much for the reply"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 5, "last_activity_date": 1490797125, "last_edit_date": 1490797125, "creation_date": 1490796582, "answer_id": 43095976, "question_id": 43095737, "link": "https://stackoverflow.com/questions/43095737/how-to-count-how-many-times-delete-if-has-acted/43095976#43095976", "title": "How to count how many times delete_if has acted?", "body": "<h1>counter</h1>\n\n<p>Since every integer is truthy, you could write :</p>\n\n<pre><code>count = 0\nhash[\"value\"].delete_if{|cell| cell[\"id\"][\"name\"] == ('foo') &amp;&amp; count += 1}\n</code></pre>\n\n<p><code>cell</code> will be deleted every time <code>count</code> is incremented, and <code>count</code> is incremented every time <code>cell[\"id\"][\"name\"] == ('foo')</code>.</p>\n\n<p>As an example :</p>\n\n<pre><code>count = 0\ntrue  &amp;&amp; count += 1\nfalse &amp;&amp; count += 1\ntrue  &amp;&amp; count += 1\nfalse &amp;&amp; count += 1\ntrue  &amp;&amp; count += 1\n\ncount\n# 3\n</code></pre>\n\n<h1>difference</h1>\n\n<p>Since <code>delete_if</code> is destructive, you can simply compare the size difference before and after the method call.</p>\n\n<pre><code>original_size = hash[\"value\"].size\nhash[\"value\"].delete_if{|cell| cell[\"id\"][\"name\"] == ('foo') &amp;&amp; count += 1}\noriginal_size - hash[\"value\"].size\n</code></pre>\n\n<h1>partition</h1>\n\n<p>If you need not only the number of times <code>delete_if</code> has acted, but for which elements, you could use <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-partition\" rel=\"nofollow noreferrer\"><code>partition</code></a> :</p>\n\n<pre><code>deleted, hash[\"value\"] = hash[\"value\"].partition{|cell| cell[\"id\"][\"name\"] == ('foo')}\ndeleted.size\n# deleted contains the deleted cells from `hash['value']`\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 1737669, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4c8cf31e546396df098cb42ca80a1059?s=128&d=identicon&r=PG", "display_name": "Federico Giorni", "link": "https://stackoverflow.com/users/1737669/federico-giorni"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 43095976, "answer_count": 1, "score": 0, "last_activity_date": 1490797125, "creation_date": 1490796010, "question_id": 43095737, "link": "https://stackoverflow.com/questions/43095737/how-to-count-how-many-times-delete-if-has-acted", "title": "How to count how many times delete_if has acted?", "body": "<p>I have a code block like this:</p>\n\n<pre><code>hash[\"value\"].delete_if{|cell| cell[\"id\"][\"name\"] == ('foo')}\n</code></pre>\n\n<p>There is a simple way to count how many times the delete_if has actually acted ?</p>\n"}, {"tags": ["java", "php", "ruby", "heroku"], "comments": [{"owner": {"reputation": 7752, "user_id": 848612, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/eieLe.jpg?s=128&g=1", "display_name": "Hyder B.", "link": "https://stackoverflow.com/users/848612/hyder-b"}, "edited": false, "score": 0, "creation_date": 1490796888, "post_id": 43095651, "comment_id": 73273338, "body": "On heroku which OS are you using? Linux?"}, {"owner": {"reputation": 25, "user_id": 4729441, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206016138060523/picture?type=large", "display_name": "Fares Alkhwaja", "link": "https://stackoverflow.com/users/4729441/fares-alkhwaja"}, "reply_to_user": {"reputation": 7752, "user_id": 848612, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/eieLe.jpg?s=128&g=1", "display_name": "Hyder B.", "link": "https://stackoverflow.com/users/848612/hyder-b"}, "edited": false, "score": 0, "creation_date": 1490797074, "post_id": 43095651, "comment_id": 73273509, "body": "im using linux ubuntu ... can you help me please?"}, {"owner": {"reputation": 7752, "user_id": 848612, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/eieLe.jpg?s=128&g=1", "display_name": "Hyder B.", "link": "https://stackoverflow.com/users/848612/hyder-b"}, "edited": false, "score": 0, "creation_date": 1490807428, "post_id": 43095651, "comment_id": 73281437, "body": "which flavor of linux and version? CentOS/Ubuntu/Debian?"}, {"owner": {"reputation": 25, "user_id": 4729441, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206016138060523/picture?type=large", "display_name": "Fares Alkhwaja", "link": "https://stackoverflow.com/users/4729441/fares-alkhwaja"}, "reply_to_user": {"reputation": 7752, "user_id": 848612, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/eieLe.jpg?s=128&g=1", "display_name": "Hyder B.", "link": "https://stackoverflow.com/users/848612/hyder-b"}, "edited": false, "score": 0, "creation_date": 1490807713, "post_id": 43095651, "comment_id": 73281641, "body": "ubuntu 14.04 .."}], "answers": [{"tags": [], "owner": {"reputation": 7752, "user_id": 848612, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/eieLe.jpg?s=128&g=1", "display_name": "Hyder B.", "link": "https://stackoverflow.com/users/848612/hyder-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1490808147, "creation_date": 1490808147, "answer_id": 43100148, "question_id": 43095651, "link": "https://stackoverflow.com/questions/43095651/call-to-undefined-function-oci-connect-in-heroku-app/43100148#43100148", "title": "Call to undefined function oci_connect() in Heroku app", "body": "<p>The reason you are getting this error is because you are missing the <a href=\"http://www.php.net/manual/en/book.oci8.php\" rel=\"nofollow noreferrer\">OCI8 PHP extension</a> which is needed in order to connect to Oracle database using PHP.</p>\n\n<p>If your Oracle database is not hosted on the same server, you will also need to install <a href=\"http://www.oracle.com/technetwork/database/features/instant-client/index-097480.html\" rel=\"nofollow noreferrer\">Oracle Instant Client</a> on the linux server.</p>\n"}], "owner": {"reputation": 25, "user_id": 4729441, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206016138060523/picture?type=large", "display_name": "Fares Alkhwaja", "link": "https://stackoverflow.com/users/4729441/fares-alkhwaja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1491038195, "creation_date": 1490795824, "last_edit_date": 1491038195, "question_id": 43095651, "link": "https://stackoverflow.com/questions/43095651/call-to-undefined-function-oci-connect-in-heroku-app", "title": "Call to undefined function oci_connect() in Heroku app", "body": "<p>I have a problem in my code. I need to push code to Heroku (running on Ubuntu 14.04); my code is PHP and Oracle database. <code>oci_connect()</code> works perfectly in localhost and connect successfully to the Oracle database but when I push to Heroku it's returning \"<code>Call to undefined function oci_connect()</code>\". I tried to install bitbucket-heroku like Ruby and Java, but nothing has worked for me yet.</p>\n\n<p>Image: <a href=\"https://i.stack.imgur.com/tAZbC.png\" rel=\"nofollow noreferrer\">Heroku error app</a>\n<a href=\"https://i.stack.imgur.com/tAZbC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tAZbC.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is my link in Heroku: <a href=\"https://serene-anchorage-79470.herokuapp.com/home.php?language=en\" rel=\"nofollow noreferrer\">https://serene-anchorage-79470.herokuapp.com/home.php?language=en</a></p>\n\n<p>My config code:</p>\n\n<pre><code>$conn = oci_connect('username', 'pass','(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST =myhost )(PORT =port )) (CONNECT_DATA =  (SID =sid )))');\nif($conn)\n{\n    echo \"Successfully connected to Oracle.\\n\";\n\n}\nelse\n{\n    $err = OCIError();\n    echo \"Connection failed.\" . $err[text];\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490795590, "post_id": 43094925, "comment_id": 73272224, "body": "Does the <code>pgrep</code> work in the regular terminal?"}, {"owner": {"reputation": 7736, "user_id": 687142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VErBp.jpg?s=128&g=1", "display_name": "xlembouras", "link": "https://stackoverflow.com/users/687142/xlembouras"}, "edited": false, "score": 0, "creation_date": 1490795756, "post_id": 43094925, "comment_id": 73272386, "body": "when you issue <code>pgrep #{process}</code> do you see it running (ps, top, etc) ?"}, {"owner": {"reputation": 13452, "user_id": 559301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e2eee011184fef1a8b4890ca1422ec26?s=128&d=identicon&r=PG", "display_name": "Zane Claes", "link": "https://stackoverflow.com/users/559301/zane-claes"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490809214, "post_id": 43094925, "comment_id": 73282617, "body": "@Ruslan yes the exact same command works in the terminal if I exit the Ruby shell. @"}, {"owner": {"reputation": 13452, "user_id": 559301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e2eee011184fef1a8b4890ca1422ec26?s=128&d=identicon&r=PG", "display_name": "Zane Claes", "link": "https://stackoverflow.com/users/559301/zane-claes"}, "reply_to_user": {"reputation": 7736, "user_id": 687142, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VErBp.jpg?s=128&g=1", "display_name": "xlembouras", "link": "https://stackoverflow.com/users/687142/xlembouras"}, "edited": false, "score": 0, "creation_date": 1490809252, "post_id": 43094925, "comment_id": 73282647, "body": "@xlembouras I have tried both (running and non running) processes."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490832443, "post_id": 43094925, "comment_id": 73293772, "body": "Just to be clear, you know the backtick and system calls are synchronous?"}, {"owner": {"reputation": 13452, "user_id": 559301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e2eee011184fef1a8b4890ca1422ec26?s=128&d=identicon&r=PG", "display_name": "Zane Claes", "link": "https://stackoverflow.com/users/559301/zane-claes"}, "edited": false, "score": 0, "creation_date": 1491161052, "post_id": 43094925, "comment_id": 73419085, "body": "Yes; this suggests that the execution itself is hanging."}], "answers": [{"tags": [], "owner": {"reputation": 13452, "user_id": 559301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e2eee011184fef1a8b4890ca1422ec26?s=128&d=identicon&r=PG", "display_name": "Zane Claes", "link": "https://stackoverflow.com/users/559301/zane-claes"}, "is_accepted": true, "score": 0, "last_activity_date": 1491161081, "creation_date": 1491161081, "answer_id": 43172566, "question_id": 43094925, "link": "https://stackoverflow.com/questions/43094925/ruby-execution-of-process-related-shell-commands-hangs-indefinitely/43172566#43172566", "title": "Ruby Execution of Process-Related Shell Commands Hangs Indefinitely", "body": "<p>Whelp, a simple reboot of the impacted machine fixed this one. Go figure.</p>\n"}], "owner": {"reputation": 13452, "user_id": 559301, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/e2eee011184fef1a8b4890ca1422ec26?s=128&d=identicon&r=PG", "display_name": "Zane Claes", "link": "https://stackoverflow.com/users/559301/zane-claes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 43172566, "answer_count": 1, "score": 0, "last_activity_date": 1491161081, "creation_date": 1490794079, "last_edit_date": 1490794586, "question_id": 43094925, "link": "https://stackoverflow.com/questions/43094925/ruby-execution-of-process-related-shell-commands-hangs-indefinitely", "title": "Ruby Execution of Process-Related Shell Commands Hangs Indefinitely", "body": "<p>In my Ruby on Rails server, whilst in Development mode, I have a need to manage running processes, such as by the <code>pgrep</code> command. When I attempt to execute <code>system(\"pgrep MyProcess\")</code> the Rails server hangs indefinitely. I also tried the backtick version. When I use <code>Ctrl-C</code>, I don't get much useful information about where the process was stuck:</p>\n\n<pre><code>[1] pry(main)&gt; `pgrep #{process}`\n^CInterrupt:\nfrom /Users/zaneclaes/.rvm/gems/ruby-2.3.0/gems/activesupport-5.0.0.1/lib/active_support/core_ext/kernel/agnostics.rb:7:in ``'\n[2] pry(main)&gt; system(\"pgrep #{process}\")\n^CInterrupt:\nfrom (pry):2:in `system'\n</code></pre>\n\n<p>I have verified that other system commands work, such as <code>system(\"rm -rf #{filename}\")</code>.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490792429, "post_id": 43093803, "comment_id": 73269514, "body": "You don&#39;t need <i>both</i> steps for any string. It&#39;s either one of them or neither (if length is exactly right)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490792501, "post_id": 43093803, "comment_id": 73269572, "body": "There is no single method. As for the order - tomayto, tomahto."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490792593, "post_id": 43093803, "comment_id": 73269660, "body": "@SergioTulentsev you either need both methods or a conditional to handle arbitrary strings."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490792641, "post_id": 43093803, "comment_id": 73269704, "body": "@Stefan: yep, I was hinting at conditional."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490792682, "post_id": 43093803, "comment_id": 73269737, "body": "@SergioTulentsev, why use conditional here, it does the same, but it&#39;s uglier and more verbose."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1490792744, "post_id": 43093803, "comment_id": 73269788, "body": "<code>sprintf(&#39;%1$-*2$.*2$s&#39;, str, length)</code> would work ;-)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490792834, "post_id": 43093803, "comment_id": 73269859, "body": "@ndn: verbose is not always bad. Take a look at this for example. It probably conveys the intent better: <a href=\"https://pastebin.com/PwCf25Nw\" rel=\"nofollow noreferrer\">pastebin.com/PwCf25Nw</a>. Or not. Matter of taste. :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490792958, "post_id": 43093803, "comment_id": 73269984, "body": "I usually try to avoid conditional branching ..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490793249, "post_id": 43093803, "comment_id": 73270239, "body": "@Stefan: yeah, me too, usually. :)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490793309, "post_id": 43093803, "comment_id": 73270281, "body": "@SergioTulentsev, one reads <i>&quot;pad it with spaces, slice it to 5 characters&quot;</i>. The other one reads <i>&quot;If exactly 5 characters long, do nothing. If less than 5 characters long, pad it with spaces that much. If longer than 5 - slice it to 5.&quot;</i> Now which one would you use to explain this to a human being? Programmers reading your code are humans."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1490793587, "post_id": 43093803, "comment_id": 73270518, "body": "@ndn me reading the terser code: <i>&quot;WTF!? Why do you pad it with spaces just to ... oh, I see, never mind&quot;</i>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490793609, "post_id": 43093803, "comment_id": 73270538, "body": "@ndn: exactly my point. Your &quot;worse&quot; description <b>is</b> the actual business logic here. Today I think it&#39;s a better one."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490793770, "post_id": 43093803, "comment_id": 73270670, "body": "@Stefan, then you are in the camp that thinks the <code>ljust</code> and <code>slice</code> should be swapped, but the point still stands."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1490794374, "post_id": 43093803, "comment_id": 73271184, "body": "For what it&#39;s worth, I find your code very readable. If it does what you want it to, why care about using one method instead of 2?"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490794659, "post_id": 43093803, "comment_id": 73271421, "body": "@EricDuminil, if there was one method that did that specifically (instead of using something in a very convoluted way just with the idea being <i>&quot;it&#39;s one method&quot;</i>), I would agree one should use the intended method. For example, consider <code>&#39;foo&#39;.split(&#39;&#39;)</code> vs <code>&#39;foo&#39;.chars</code>. Both are very readable, yet one is intended exactly for that purpose. It&#39;s very easy to reinvent the wheel if the wheel is small enough."}, {"owner": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490801650, "post_id": 43093803, "comment_id": 73277375, "body": "@EricDuminil, like ndn says: I was wondering if I missed an important piece, method or concept. It seemed like a common enough case that StdLib would cover. I would think there might be a much simpler. and core method."}, {"owner": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490801770, "post_id": 43093803, "comment_id": 73277469, "body": "@SergioTulentsev, you are correct. Adding conditionals might speed up stuff (though I doubt that, and would really need to benchmark, if performance were a concern; it is not). But it makes it less readable IMO. And a lot easier to introduce bugs in: it does not convey the purpuse as clear as a dedicated oneliner or method would."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1490794784, "last_edit_date": 1490794784, "creation_date": 1490792715, "answer_id": 43094393, "question_id": 43093803, "link": "https://stackoverflow.com/questions/43093803/how-to-ensure-a-string-length-in-ruby/43094393#43094393", "title": "How to ensure a string length in Ruby", "body": "<p>Is not really better than your version, just an alternative:</p>\n\n<pre><code>'foo'[0...5].ljust(5)\n#=&gt; \"foo  \"\n'foobar'[0...5].ljust(5)\n#=&gt; \"fooba\"\n</code></pre>\n\n<p>Or as a method:</p>\n\n<pre><code>def ensure_length(str, length)\n  str[0...length].ljust(length)\nend \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1490793553, "post_id": 43094538, "comment_id": 73270486, "body": "Nice, I never thought about mixing formats that way."}, {"owner": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "edited": false, "score": 0, "creation_date": 1490801495, "post_id": 43094538, "comment_id": 73277247, "body": "Nice! This is exactly what I was looking for; And it works fine with UTF8: <code>&quot;%-2.2s&quot; % &quot;\u738b\u674e\u5f20&quot; #=&gt; &quot;\u738b\u674e&quot;</code>."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 5, "last_activity_date": 1490793082, "creation_date": 1490793082, "answer_id": 43094538, "question_id": 43093803, "link": "https://stackoverflow.com/questions/43093803/how-to-ensure-a-string-length-in-ruby/43094538#43094538", "title": "How to ensure a string length in Ruby", "body": "<pre><code> p \"%-10.10s\" % \"abcdabcdabcd\"\n</code></pre>\n\n<p>In which the first -10 pads the string to 10 like <code>ljust</code> and the second 10 is the max number of characters. Documented under <a href=\"https://ruby-doc.org/core-2.2.3/Kernel.html#method-i-sprintf\" rel=\"noreferrer\">sprintf</a>.</p>\n"}], "owner": {"reputation": 24970, "user_id": 73673, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/H81Fx.jpg?s=128&g=1", "display_name": "berkes", "link": "https://stackoverflow.com/users/73673/berkes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "accepted_answer_id": 43094538, "answer_count": 2, "score": 1, "last_activity_date": 1490794784, "creation_date": 1490791224, "question_id": 43093803, "link": "https://stackoverflow.com/questions/43093803/how-to-ensure-a-string-length-in-ruby", "title": "How to ensure a string length in Ruby", "body": "<p>What is the proper way to ensure a string length in Ruby? The string is multi-byte (UTF8). The strings inputted can be either too short, exactly right, or too long. It would need respectively padding, nothing and slicing.</p>\n\n<p>I can get there in two steps: </p>\n\n<pre><code>def ensure_length(str, length)\n  str.ljust(length).slice(0, length)\nend \n</code></pre>\n\n<p>Is there a single method for this? And if it needs in two steps, what order is best: ljust then slice or vice versa, and why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490814869, "post_id": 43093138, "comment_id": 73286131, "body": "You are asking us to recommend off-site code or solutions, but that is off-topic. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages. Instead, you need to search, try things, then when you run into a problem ask a specific question. &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;"}, {"owner": {"reputation": 27, "user_id": 5692086, "user_type": "registered", "profile_image": "https://graph.facebook.com/748171848647698/picture?type=large", "display_name": "Sonal Vij Chinioti", "link": "https://stackoverflow.com/users/5692086/sonal-vij-chinioti"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490867892, "post_id": 43093138, "comment_id": 73308557, "body": "Hey Tin , I am not asking for off-site code. I am just trying to the best way or recommended way to get  my productions logs over the browser tried a lot of things but   they are having there limitations ..."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490902506, "post_id": 43093138, "comment_id": 73332511, "body": "&quot;suggest me any such type of gem available&quot;. That&#39;s an off-site resource. You have new users of the site recommending gems, so they, wrongly, suggested gems so they got the same meaning from the statement."}], "answers": [{"tags": [], "owner": {"reputation": 1364, "user_id": 5737512, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nfjfF.jpg?s=128&g=1", "display_name": "Kaushlendra Tomar", "link": "https://stackoverflow.com/users/5737512/kaushlendra-tomar"}, "is_accepted": false, "score": 0, "last_activity_date": 1492504171, "last_edit_date": 1492504171, "creation_date": 1490789715, "answer_id": 43093249, "question_id": 43093138, "link": "https://stackoverflow.com/questions/43093138/best-optimal-solution-for-streaming-rails-server-logs-to-browser/43093249#43093249", "title": "best optimal solution for streaming rails server logs to browser", "body": "<p>Try this gem  <a href=\"https://github.com/shadabahmed/logstasher\" rel=\"nofollow noreferrer\">logstasher</a></p>\n\n<p>This gem is heavily inspired from lograge, but it's focused on one thing and one thing only. That's making your logs awesome like this <a href=\"https://github.com/shadabahmed/logstasher#awesome-logging-for-rails-\" rel=\"nofollow noreferrer\">https://github.com/shadabahmed/logstasher#awesome-logging-for-rails-</a></p>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 5692086, "user_type": "registered", "profile_image": "https://graph.facebook.com/748171848647698/picture?type=large", "display_name": "Sonal Vij Chinioti", "link": "https://stackoverflow.com/users/5692086/sonal-vij-chinioti"}, "edited": false, "score": 0, "creation_date": 1490790717, "post_id": 43093285, "comment_id": 73268234, "body": "hey man i am performing a tedious  background job on my server which need an hour or so to complete so need logs in that case to  keep a track."}], "tags": [], "owner": {"reputation": 1487, "user_id": 2879613, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9d15495a9fc9602f04d0124d4989b6ab?s=128&d=identicon&r=PG&f=1", "display_name": "ggoha", "link": "https://stackoverflow.com/users/2879613/ggoha"}, "is_accepted": false, "score": 0, "last_activity_date": 1490789828, "creation_date": 1490789828, "answer_id": 43093285, "question_id": 43093138, "link": "https://stackoverflow.com/questions/43093138/best-optimal-solution-for-streaming-rails-server-logs-to-browser/43093285#43093285", "title": "best optimal solution for streaming rails server logs to browser", "body": "<p>Probably you can use <a href=\"http://rollbar.com\" rel=\"nofollow noreferrer\">rollbar.com</a></p>\n\n<p>It has a gem and browse your log in very usefull form. For example, use system and browser of user. This features you can see at <a href=\"https://rollbar.com/demo/demo/\" rel=\"nofollow noreferrer\">https://rollbar.com/demo/demo/</a> </p>\n\n<p>For less than 5000 errors in month id free. After overflow disabled to end of month</p>\n"}], "owner": {"reputation": 27, "user_id": 5692086, "user_type": "registered", "profile_image": "https://graph.facebook.com/748171848647698/picture?type=large", "display_name": "Sonal Vij Chinioti", "link": "https://stackoverflow.com/users/5692086/sonal-vij-chinioti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1492504171, "creation_date": 1490789374, "last_edit_date": 1490790890, "question_id": 43093138, "link": "https://stackoverflow.com/questions/43093138/best-optimal-solution-for-streaming-rails-server-logs-to-browser", "title": "best optimal solution for streaming rails server logs to browser", "body": "<p>I am looking for a best optimal way to stream my Rails server logs over to the browser. Have tried using browser_log gem which is not working in my case.Please suggest me any such type of gem available or any optimal way to stream the logs.</p>\n\n<p>I am performing a tedious  background job on my server which require  an hour or so to complete so need logs in that case to  keep a track of the job</p>\n"}, {"tags": ["arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490791421, "post_id": 43092651, "comment_id": 73268708, "body": "In Ruby 2.4 you could call <code>lines.sum(&amp;:length)</code> to get the total length."}], "answers": [{"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 1, "last_activity_date": 1490788730, "creation_date": 1490788730, "answer_id": 43092907, "question_id": 43092651, "link": "https://stackoverflow.com/questions/43092651/i-dont-understand-why-is-this-step-necessary-to-count-the-number-of-chars-in-te/43092907#43092907", "title": "I don&#39;t understand why is this step necessary to count the number of chars in text document", "body": "<blockquote>\n  <p>What I do not understand is why is there a need to <code>lines.join</code>?</p>\n</blockquote>\n\n<p>To get a full text(all items in the array) in one string</p>\n\n<blockquote>\n  <p>And what is the program doing when you <code>lines.join</code>?</p>\n</blockquote>\n\n<p>Check the <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-join\" rel=\"nofollow noreferrer\">documentation</a>. </p>\n\n<blockquote>\n  <p>Because when I <code>puts lines</code> or <code>puts lines.join</code> the program prints out\n  the exact same thing.</p>\n</blockquote>\n\n<p>Because <code>lines</code> is an array when you run <code>puts lines</code> it is <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-inspect\" rel=\"nofollow noreferrer\">shows an array as string</a>, <code>join()</code> merge all array items to one string.</p>\n\n<pre><code>&gt;&gt; puts \"fooo\" \n#&gt; fooo \n=&gt; nil \n&gt;&gt; puts [\"fooo\"].join\n#&gt; fooo\n=&gt; nil\n</code></pre>\n\n<blockquote>\n  <p>Therefore to get the number of chars in the text, why am I unable to\n  just use <code>no_of_chars = lines.length</code>?</p>\n</blockquote>\n\n<p>Becase when you use <code>lines.length</code> it's show the length of an array.</p>\n"}, {"comments": [{"owner": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "edited": false, "score": 0, "creation_date": 1490789423, "post_id": 43092935, "comment_id": 73267290, "body": "Hi if I am concatenating all the strings together using <code>.join</code>, doesn&#39;t this mean that all the lines are combined together without spacing. That is to say text #=&gt; &quot;The surgeon... Good-Night!&#39;The medical gentleman... infant.&quot;? Since no parameter(in this case whitespace) is stated in the method <code>.join</code>"}, {"owner": {"reputation": 866, "user_id": 159537, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ff6fdbe1cdf296533128612a541a8ce9?s=128&d=identicon&r=PG", "display_name": "ariera", "link": "https://stackoverflow.com/users/159537/ariera"}, "reply_to_user": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "edited": false, "score": 0, "creation_date": 1490789551, "post_id": 43092935, "comment_id": 73267366, "body": "You are right. If you want to have a whitespace in between each entry of the array you could do <code>lines.join(&quot; &quot;)</code>"}, {"owner": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "edited": false, "score": 0, "creation_date": 1490790143, "post_id": 43092935, "comment_id": 73267805, "body": "However I tried running <code>puts lines.join</code> to my console, the result is that the lines are separated with spacing. Despite the fact that I did not state the parameter (whitespace) for method <code>.join</code>"}, {"owner": {"reputation": 333, "user_id": 857184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKQBD.jpg?s=128&g=1", "display_name": "David Stanley", "link": "https://stackoverflow.com/users/857184/david-stanley"}, "edited": false, "score": 1, "creation_date": 1490790668, "post_id": 43092935, "comment_id": 73268193, "body": "readlines doesn&#39;t strip newline characters, so those characters still exist in your individual lines.  So when you join them, the lines will still have newlines between them."}, {"owner": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "reply_to_user": {"reputation": 333, "user_id": 857184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKQBD.jpg?s=128&g=1", "display_name": "David Stanley", "link": "https://stackoverflow.com/users/857184/david-stanley"}, "edited": false, "score": 0, "creation_date": 1490792653, "post_id": 43092935, "comment_id": 73269713, "body": "@davidstanley Is there a ruby doc that talks about it so i can read up more?"}, {"owner": {"reputation": 333, "user_id": 857184, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yKQBD.jpg?s=128&g=1", "display_name": "David Stanley", "link": "https://stackoverflow.com/users/857184/david-stanley"}, "edited": false, "score": 0, "creation_date": 1490793253, "post_id": 43092935, "comment_id": 73270241, "body": "Sure, <a href=\"http://ruby-doc.org/core-2.4.1/IO.html\" rel=\"nofollow noreferrer\">the standard documentation for IO</a>"}], "tags": [], "owner": {"reputation": 866, "user_id": 159537, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/ff6fdbe1cdf296533128612a541a8ce9?s=128&d=identicon&r=PG", "display_name": "ariera", "link": "https://stackoverflow.com/users/159537/ariera"}, "is_accepted": true, "score": 3, "last_activity_date": 1490794224, "last_edit_date": 1490794224, "creation_date": 1490788805, "answer_id": 43092935, "question_id": 43092651, "link": "https://stackoverflow.com/questions/43092651/i-dont-understand-why-is-this-step-necessary-to-count-the-number-of-chars-in-te/43092935#43092935", "title": "I don&#39;t understand why is this step necessary to count the number of chars in text document", "body": "<p>When you do this</p>\n\n<pre><code>lines = File.readlines(\"new text document.txt\")\n</code></pre>\n\n<p>you have an array of strings, i.e.:</p>\n\n<pre><code>lines #=&gt; [\n  \"The surgeon lead over ...\\n\", # &lt;- There's a newline at the end of each string\n  \"The medical gentleman ...\\n\",\n]\n</code></pre>\n\n<p>There are as many entries on the array as lines on your text file. That's why you count the number of lines by doing:</p>\n\n<pre><code>lines_count =lines.size\n</code></pre>\n\n<p>When you call <code>lines.join</code> you are essentially concatenating all the strings together one after another</p>\n\n<pre><code>text = lines.join\ntext # =&gt; \"The surgeon ... dress the infant\"\n</code></pre>\n\n<p>And to calculate the number of characters of string you just call <code>length</code> on it.</p>\n\n<p>The reason they look similar to you on the console is because when you print them they get represented in an identical way. To highlight the difference you may call <code>inspect</code> on each of them:</p>\n\n<pre><code>puts lines.inspect\nputs text.inspect\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 2, "last_activity_date": 1490788943, "creation_date": 1490788943, "answer_id": 43092977, "question_id": 43092651, "link": "https://stackoverflow.com/questions/43092651/i-dont-understand-why-is-this-step-necessary-to-count-the-number-of-chars-in-te/43092977#43092977", "title": "I don&#39;t understand why is this step necessary to count the number of chars in text document", "body": "<p><code>lines</code> is an array. The visualization of an array is similar to the result of joining the array:</p>\n\n<pre><code>numbers = ['11', '22', '33', '44']\nputs numbers\n # 11\n # 22\n # 33\n # 44\nputs numbers.join\n # 11223344\n</code></pre>\n\n<p>If the array has new lines at the end (like is the case if you just got lines from a file), you wouldn't be able to tell the two apart. Yet they are different:</p>\n\n<pre><code>numbers.length      # =&gt; 4\nnumbers.join.length # =&gt; 8\n</code></pre>\n\n<p>The length of the array will tell you how many elements the array has. In your case - how many lines in the file. In my case - how many numbers.</p>\n\n<p>If you join the array, you concatenate each individual line. Hence the length of the resulting string will give you how many characters are in the entire file. In my case - how many digits.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1490790891, "last_edit_date": 1490790891, "creation_date": 1490790235, "answer_id": 43093428, "question_id": 43092651, "link": "https://stackoverflow.com/questions/43092651/i-dont-understand-why-is-this-step-necessary-to-count-the-number-of-chars-in-te/43093428#43093428", "title": "I don&#39;t understand why is this step necessary to count the number of chars in text document", "body": "<p>It might be cleaner to do it the other way round, i.e. read the whole file as a single string via <a href=\"http://ruby-doc.org/core-2.4.1/IO.html#method-c-read\" rel=\"nofollow noreferrer\"><code>IO.read</code></a> and split the lines afterwards using <a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-lines\" rel=\"nofollow noreferrer\"><code>String#lines</code></a>:</p>\n\n<pre><code>text = IO.read('document.txt')\nno_of_chars = text.length\nlines_count = text.lines.length\n\nputs \"number of lines: #{lines_count}\"\nputs \"number of chars: #{no_of_chars}\"\n</code></pre>\n\n<p>Note that <a href=\"http://ruby-doc.org/core-2.4.1/String.html#method-i-length\" rel=\"nofollow noreferrer\"><code>String#length</code></a> will count any character, including punctuation, spaces and newline characters.</p>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1490816231, "last_edit_date": 1495542327, "creation_date": 1490815438, "answer_id": 43102447, "question_id": 43092651, "link": "https://stackoverflow.com/questions/43092651/i-dont-understand-why-is-this-step-necessary-to-count-the-number-of-chars-in-te/43102447#43102447", "title": "I don&#39;t understand why is this step necessary to count the number of chars in text document", "body": "<p>Slurping a file isn't a good way to find the number of characters because it's not scalable. It's easy these days to find files into the GB range, especially in production environments that will hit your Ruby process very hard when trying to slurp the entire file.</p>\n\n<p>Instead, use this:</p>\n\n<pre><code>char_size = 0\nFile.foreach('path/to/file.txt') do |li|\n  char_size += li.size\nend\n</code></pre>\n\n<p><code>foreach</code> reads the file line-by-line, which, for a file over 1MB, is as fast or faster than using <code>read</code> or <code>readlines</code>, while still being scalable.</p>\n\n<p>See \"<a href=\"https://stackoverflow.com/questions/25189262/why-is-slurping-a-file-not-a-good-practice/25189286#25189286\">Why is &quot;slurping&quot; a file not a good practice?</a>\" for more information.</p>\n\n<p>If you know the file contains single-byte characters, such as the traditional ASCII, ISO-8859 or Win-1252 character sets, you can do it even faster using <a href=\"https://ruby-doc.org/core-2.4.1/File.html#method-c-size\" rel=\"nofollow noreferrer\"><code>File.size('path/to/file.txt')</code></a>.</p>\n\n<p>Using <code>size</code> doesn't require reading the file at all, so it is much faster than any solution that actually opens and reads the content.</p>\n"}], "owner": {"reputation": 57, "user_id": 7588336, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/58dab16baa91c299f9428862fc57fc46?s=128&d=identicon&r=PG&f=1", "display_name": "roppo", "link": "https://stackoverflow.com/users/7588336/roppo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 82, "favorite_count": 0, "accepted_answer_id": 43092935, "answer_count": 5, "score": 0, "last_activity_date": 1490816231, "creation_date": 1490788121, "last_edit_date": 1490791436, "question_id": 43092651, "link": "https://stackoverflow.com/questions/43092651/i-dont-understand-why-is-this-step-necessary-to-count-the-number-of-chars-in-te", "title": "I don&#39;t understand why is this step necessary to count the number of chars in text document", "body": "<pre><code>lines = File.readlines(\"new text document.txt\")\nlines_count = lines.size\ntext = lines.join\nno_of_chars = text.length\n\nputs \"number of lines: #{lines_count}\"\nputs \"number of chars: #{no_of_chars}\"\n</code></pre>\n\n<p>Hello my objective is to count the number of chars in the text document. What I do not understand is why is there a need to <code>lines.join</code>? And what is the program doing when you <code>lines.join</code>? Because when I <code>puts lines</code> or <code>puts lines.join</code> the program prints out the exact same thing. Therefore what I did (and what I think is correct) is</p>\n\n<pre><code>no_of_chars = lines.length\n</code></pre>\n\n<p>which is obviously wrong since by doing that the <code>no_of_char</code> will result in an output that is same as number of lines. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web-crawler", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1490792790, "post_id": 43091510, "comment_id": 73269824, "body": "What version of Chrome, Chromedriver, Selenium-Webdriver and Watir are you using? I am wondering if there is a difference to explain why we are seeing different results for the same code."}, {"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1490793278, "post_id": 43091510, "comment_id": 73270260, "body": "Chrome: 57.0.2987.98, Chromedriver: 2.28.455506, Selenium-Webdriver: 3.3.0"}], "answers": [{"comments": [{"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490788998, "post_id": 43092513, "comment_id": 73266988, "body": "Just tried it, and I&#39;m still getting: <a href=\"https://www.tripadvisor.com/CheapFlightsHome\" rel=\"nofollow noreferrer\">tripadvisor.com/CheapFlightsHome</a> On Ubuntu 16.04 if that matters, this is weird :/"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490789622, "post_id": 43092513, "comment_id": 73267441, "body": "I am also using Ubuntu 16.04. Did you try double click for sure? Did the invalid message appear/Was there click event at all?"}, {"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490790614, "post_id": 43092513, "comment_id": 73268148, "body": "Yes I tried the double click, I didn&#39;t get an error message. I dont think think I&#39;m getting a click event at all. The browser closes automatically after filling in the date, even after removing the browser.quit line."}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490791541, "post_id": 43092513, "comment_id": 73268806, "body": "What if you use <code>browser.execute_script(&#39;document.getElementById(&quot;CHECK_FARES&zwnj;&#8203;_BUTTON&quot;).click()&#39;)</code>?"}, {"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490791747, "post_id": 43092513, "comment_id": 73268973, "body": "Error: `assert_ok&#39;: unknown error: Cannot read property &#39;click&#39; of null (Selenium::WebDriver::Error::UnknownError)"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490792028, "post_id": 43092513, "comment_id": 73269178, "body": "Looks like there is no element with that id. Can you show output of <code>puts browser.span(id: &quot;CHECK_FARES_BUTTON&quot;).inspect</code>? Also try checking that button or rather span in the console."}, {"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490792231, "post_id": 43092513, "comment_id": 73269347, "body": "Not locating the span: #&lt;Watir::Span: located: false; {:id=&gt;&quot;CHECK_FARES_BUTTON&quot;, :tag_name=&gt;&quot;span&quot;}&gt;"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490792857, "post_id": 43092513, "comment_id": 73269884, "body": "I am sorry, my bad. Could you use <code>browser.span(id: &quot;CHECK_FARES_BUTTON&quot;).flash</code> It should change the color of that span to red for a sec."}, {"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490793345, "post_id": 43092513, "comment_id": 73270317, "body": "Yes it did flash red for a split second."}], "tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1490787778, "creation_date": 1490787778, "answer_id": 43092513, "question_id": 43091510, "link": "https://stackoverflow.com/questions/43091510/ruby-waitir-gem-getting-unexpected-results/43092513#43092513", "title": "Ruby Waitir Gem, getting unexpected results", "body": "<p>Firstly, I changed <code>.fire_event :click</code> to <code>.click</code>.</p>\n\n<p>Then there was an error that appeared. </p>\n\n<blockquote>\n  <p>Please enter a valid airport code or city.</p>\n</blockquote>\n\n<p>Secondly, I tried this:</p>\n\n<pre><code>browser.span(id: \"CHECK_FARES_BUTTON\").click\nbrowser.span(id: \"CHECK_FARES_BUTTON\").click\nputs browser.url\n</code></pre>\n\n<p>And it redirected me to: \n<code>https://www.tripadvisor.com/CheapFlightsSearchResults-g187849-a_airport0.BOS-a_airport1.MIL-a_cos.0-a_date0.20170401-a_date1.20170402-a_nearby0.no-a_nearby1.no-a_nonstop.no-a_pax0.a-a_travelers.1-Milan_Lombardy.html\n</code></p>\n\n<p>To be honest I have no idea why it does not register the input during the first click...</p>\n\n<p>I am using chrome.</p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490794126, "post_id": 43094590, "comment_id": 73270978, "body": "This gets me where i want to go thanks. But I&#39;m confused on how it works, you want to explain the first few lines with caps, and driver? Also the difference b.element(xpath: &quot;.//*[@id=&#39;CHECK_FARES_BUTTON&#39;]&quot;).click and browser.span(id: &quot;CHECK_FARES_BUTTON&quot;).fire_event :click"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "reply_to_user": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "edited": false, "score": 0, "creation_date": 1490794645, "post_id": 43094590, "comment_id": 73271407, "body": "Caps I have included to not to invoke Geckodriver instead to use the legacy firefox driver, but this is not important, you can explore later. And element(xpath,&#39;&#39;) and span(:id,&#39;&#39;) doesn&#39;t differ, it works in the same way, Both works, Just try using span, it will work. The point to be noted here is, your button is not receiving the click properly when you excute the click statement, So to make sure your button receives the click properly, I wrote this condition <code>b.windows.count&gt;1</code> and then I closed the window which you don&#39;t want so b variable automatically connected toyourwindow to print url."}], "tags": [], "owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "is_accepted": true, "score": 0, "last_activity_date": 1490793241, "creation_date": 1490793241, "answer_id": 43094590, "question_id": 43091510, "link": "https://stackoverflow.com/questions/43091510/ruby-waitir-gem-getting-unexpected-results/43094590#43094590", "title": "Ruby Waitir Gem, getting unexpected results", "body": "<p>First of all your click actually opens another two window and also the time you are clicking it's not exactly receiving the click, Please use this code, it will work for you and you will be left with your expected window</p>\n\n<pre><code>require 'watir'\ncaps = Selenium::WebDriver::Remote::Capabilities.firefox(marionette: false)\n\ndriver=Selenium::WebDriver.for :firefox, desired_capabilities: caps, profile: \"default\"\n\nb=Watir::Browser.new driver\n\n\nb.goto('https://tripadvisor.com/CheapFlightsHome')\nb.text_field(name: 'orig').set('Boston, MA - Logan International Airport (BOS)')\nb.text_field(name: 'dest').set('Milan, Italy - All Airports (MIL)')\nb.execute_script('document.querySelector(\".in_date\").click()')\nb.execute_script('document.querySelector(\".day_28\").click()')\nb.execute_script('document.querySelector(\".out_date\").click()')\nb.execute_script('document.querySelector(\".day_2\").click()')\nbegin\nb.element(xpath: \".//*[@id='CHECK_FARES_BUTTON']\").click\nend until b.windows.count&gt;1\n\nb.windows[0].close\nb.windows[1].close\n\nputs b.url\nb.quit\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 3945953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KBmVS.jpg?s=128&g=1", "display_name": "KSan", "link": "https://stackoverflow.com/users/3945953/ksan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 43094590, "answer_count": 2, "score": 1, "last_activity_date": 1490793241, "creation_date": 1490784848, "last_edit_date": 1495541418, "question_id": 43091510, "link": "https://stackoverflow.com/questions/43091510/ruby-waitir-gem-getting-unexpected-results", "title": "Ruby Waitir Gem, getting unexpected results", "body": "<p>2 weeks ago I put up post about my watir script timing out on me, I was able to get a solution but I realized to late the results I was getting was different than the person that helped me out. Here is the original post: <a href=\"https://stackoverflow.com/questions/42797887/ruby-watir-gem-timing-out-on-form-input\">Ruby Watir Gem, Timing Out on Form Input</a></p>\n\n<pre><code>require 'watir'\n\nbrowser = Watir::Browser.new\n\nbrowser.goto('https://tripadvisor.com/CheapFlightsHome')\nbrowser.text_field(name: 'orig').set('Boston, MA - Logan International Airport (BOS)')\nbrowser.text_field(name: 'dest').set('Milan, Italy - All Airports (MIL)')\nbrowser.execute_script('document.querySelector(\".in_date\").click()')\nbrowser.execute_script('document.querySelector(\".day_28\").click()')\nbrowser.execute_script('document.querySelector(\".out_date\").click()')\nbrowser.execute_script('document.querySelector(\".day_2\").click()')\nbrowser.span(id: \"CHECK_FARES_BUTTON\").fire_event :click\nputs browser.url\nbrowser.quit\n</code></pre>\n\n<p>The person who wrote that code got this as a result:\n<a href=\"https://www.tripadvisor.com/CheapFlightsSearchResults-g187849-a_airport0.BOS-a_airport1.MIL-a_cos.0-a_date0.20170328-a_date1.20170402-a_nearby0.no-a_nearby1.no-a_nonstop.no-a_pax0.a-a_travelers.1-Milan_Lombardy.html\" rel=\"nofollow noreferrer\">https://www.tripadvisor.com/CheapFlightsSearchResults-g187849-a_airport0.BOS-a_airport1.MIL-a_cos.0-a_date0.20170328-a_date1.20170402-a_nearby0.no-a_nearby1.no-a_nonstop.no-a_pax0.a-a_travelers.1-Milan_Lombardy.html</a></p>\n\n<p>I have the same code in my script and for some reason I'm only getting:\n<a href=\"https://www.tripadvisor.com/CheapFlightsHome\" rel=\"nofollow noreferrer\">https://www.tripadvisor.com/CheapFlightsHome</a></p>\n\n<p>It seems as though the button click isn't happening for me, not sure. I tried both chrome and firefox.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "bundler", "rubymine"], "comments": [{"owner": {"reputation": 408, "user_id": 1435119, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/172b83909c9affd83995fa29d4961319?s=128&d=identicon&r=PG", "display_name": "Mauro Nidola", "link": "https://stackoverflow.com/users/1435119/mauro-nidola"}, "edited": false, "score": 0, "creation_date": 1496243078, "post_id": 43090923, "comment_id": 75583395, "body": "I have the same issue. I based my docker development environment on <a href=\"https://github.com/phusion/passenger-docker\" rel=\"nofollow noreferrer\">github.com/phusion/passenger-docker</a> and I have multiple projects. Gems are shared between projects (custom BUNDLE_PATH) in order to improve performances (docker volumes slowness on OSX)."}, {"owner": {"reputation": 1229, "user_id": 2027060, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/01ceb1c8149bb4017f3e935910a39dff?s=128&d=identicon&r=PG&f=1", "display_name": "TheCatParty", "link": "https://stackoverflow.com/users/2027060/thecatparty"}, "edited": false, "score": 0, "creation_date": 1521041228, "post_id": 43090923, "comment_id": 85565847, "body": "I also have this exact same issue. It seems related to including a <code>--path</code> argument with your <code>bundle install</code> command but I can&#39;t figure out how to resolve this. For example, we use the very reasonable <code>RUN bundle install --path vendor&#47;bundle</code> line in our Dockerfile."}, {"owner": {"reputation": 1247, "user_id": 245956, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/19b194b54f2a4d23948cfddd393eb447?s=128&d=identicon&r=PG", "display_name": "ms-ati", "link": "https://stackoverflow.com/users/245956/ms-ati"}, "edited": false, "score": 0, "creation_date": 1533245050, "post_id": 43090923, "comment_id": 90288138, "body": "In your <code>Dockerfile</code>, are the env variables <code>GEM_HOME</code> and <code>BUNDLE_PATH</code> set appropriately? If running <code>gem list</code> inside the container shows the gems, I think RubyMine now picks them up. Is this still not working for you?"}, {"owner": {"reputation": 167, "user_id": 1630875, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/YxXAS.jpg?s=128&g=1", "display_name": "awsmsce", "link": "https://stackoverflow.com/users/1630875/awsmsce"}, "edited": false, "score": 0, "creation_date": 1540590273, "post_id": 43090923, "comment_id": 92936811, "body": "Do you have the docker working path mounted properly? It sound like you can communicate over the port just fine, but I believe rubymine needs to be able to peer into the filesystem. On vagrant I used to have to mount my drive into the container/virtual machine to allow them to talk both ways."}, {"owner": {"reputation": 1674, "user_id": 341677, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/01ff7358e865790ac22fdb5312dd473d?s=128&d=identicon&r=PG", "display_name": "Cninroh", "link": "https://stackoverflow.com/users/341677/cninroh"}, "edited": false, "score": 0, "creation_date": 1576252164, "post_id": 43090923, "comment_id": 104850918, "body": "Are you using rbenv or something similar?"}, {"owner": {"reputation": 167, "user_id": 5141057, "user_type": "registered", "accept_rate": 86, "profile_image": "https://graph.facebook.com/10205605394948061/picture?type=large", "display_name": "Raymond Ruiz-Veve", "link": "https://stackoverflow.com/users/5141057/raymond-ruiz-veve"}, "edited": false, "score": 1, "creation_date": 1579461998, "post_id": 43090923, "comment_id": 105765508, "body": "Has anyone figured out this issue? I find Rubymine extremely frustrating to setup."}], "owner": {"reputation": 3542, "user_id": 5381547, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/jFcfu.png?s=128&g=1", "display_name": "Viktor", "link": "https://stackoverflow.com/users/5381547/viktor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1045, "favorite_count": 3, "answer_count": 0, "score": 28, "last_activity_date": 1490796574, "creation_date": 1490783146, "last_edit_date": 1490796574, "question_id": 43090923, "link": "https://stackoverflow.com/questions/43090923/rubymine-doesnt-see-gems-from-bundle-in-docker-on-mac-os", "title": "RubyMine doesn&#39;t see gems from bundle in Docker on Mac OS", "body": "<p>I'm using a Docker image with some specified environmental variables, such as <code>GEM_HOME</code> and <code>BUNDLE_PATH</code>.</p>\n\n<p>RubyMine connects to the remote Docker SDK just fine, but I can't see gems added by <code>bundler</code>, even though <code>bundler</code> itself is there. My profiler can't configure the project because of that, so I am forced to start all tasks and servers from the <code>Terminal</code>. </p>\n\n<p><a href=\"https://i.stack.imgur.com/5u0nL.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/5u0nL.png\" alt=\"Ruby SDK and Gems\"></a></p>\n\n<p>How do I make my <code>bundle</code> gems visible?</p>\n\n<hr>\n\n<h3>UPD</h3>\n\n<p>It actually has a deal with custom <code>bundle</code> gems path. After it was changed, gems disappeared from <code>gem list</code>. RubyMine takes gems from there, so it can't find those gems.</p>\n\n<p>Does anybody know how to make <code>gem list</code> with <code>bundler</code> custom gems path?</p>\n\n<hr>\n\n<h3>UPD 2</h3>\n\n<p>Even after adding <code>bundle</code> gems to <code>gem list</code> I'm having the same issue :(</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1490785326, "post_id": 43090697, "comment_id": 73264466, "body": "Take a look at <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-render\" rel=\"nofollow noreferrer\">render :json</a>. It will be better to use it instead of <code>:text</code> if you are using ajax."}, {"owner": {"reputation": 11, "user_id": 7708823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yh8TV.jpg?s=128&g=1", "display_name": "Priyanka Babar", "link": "https://stackoverflow.com/users/7708823/priyanka-babar"}, "reply_to_user": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1490788747, "post_id": 43090697, "comment_id": 73266805, "body": "@DiodonHystrix I tried as u stated above but want i want is how will i get single store item id when i select drop down option. As if now it dispalying all store items in index_indent page. what should i write in this index_indent method:                                     <code>def index_indent   @store_items = InventoryStoreItem.find(params[:id]) &lt;--how it will display single item by this line.If I wrote @store_items = InventoryStoreItem.all it displays all store items.  @indents = Indent.all  @stores = InventoryStore.all end</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7708823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yh8TV.jpg?s=128&g=1", "display_name": "Priyanka Babar", "link": "https://stackoverflow.com/users/7708823/priyanka-babar"}, "edited": false, "score": 0, "creation_date": 1490791677, "post_id": 43092930, "comment_id": 73268913, "body": "@DiodonHystrixThanks for the quick reply. When i select drop down option how the fields will automatically fill up by unit_price, quantity n batch_no. and i have updated my new_indent form."}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 11, "user_id": 7708823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yh8TV.jpg?s=128&g=1", "display_name": "Priyanka Babar", "link": "https://stackoverflow.com/users/7708823/priyanka-babar"}, "edited": false, "score": 0, "creation_date": 1490792210, "post_id": 43092930, "comment_id": 73269328, "body": "You should probably do it in the ajax, here: <code>success(function(data) })&#39;</code>"}], "tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1490788783, "creation_date": 1490788783, "answer_id": 43092930, "question_id": 43090697, "link": "https://stackoverflow.com/questions/43090697/bind-dropdown-using-jquery-in-ruby-on-rails-syntax-error-unexpected-tidentifier/43092930#43092930", "title": "Bind dropdown using jQuery in ruby on rails.syntax error, unexpected tIDENTIFIER, expecting &#39;:&#39; render :text =&gt; [@storeitem.unit_pr... ^", "body": "<p><code>data: {id: inventory_store_item_id}</code> \nIt should be <code>data: {inventory_store_item_id: inventory_store_item_id}</code>.</p>\n\n<p>Your <code>load_item_data</code> action is still wrong. The syntax is <code>condition ? true : false</code>.</p>\n\n<p><code>@storeitem = InventoryStoreItem.find_by_id(params[:inventory_store_item_id]).present? ? InventoryStoreItem.find(params[:inventory_store_item_id]) : InventoryStoreItem.unscoped.find_by_id(params[:inventory_store_item_id])</code></p>\n"}], "owner": {"reputation": 11, "user_id": 7708823, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yh8TV.jpg?s=128&g=1", "display_name": "Priyanka Babar", "link": "https://stackoverflow.com/users/7708823/priyanka-babar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490790846, "creation_date": 1490782624, "last_edit_date": 1490790846, "question_id": 43090697, "link": "https://stackoverflow.com/questions/43090697/bind-dropdown-using-jquery-in-ruby-on-rails-syntax-error-unexpected-tidentifier", "title": "Bind dropdown using jQuery in ruby on rails.syntax error, unexpected tIDENTIFIER, expecting &#39;:&#39; render :text =&gt; [@storeitem.unit_pr... ^", "body": "<p>I have two controller Indent and InventoryStoreItem relation is 'indent-'has_many :inventory_store_items' and inventory_store_item-'belongs_to :indent'.when i select drop down as store_item_id(i.e is item_name) from indent-form it will fetch store item attributes i.e is unit_price,quantity,batch_no from store item. I tried using  when user select drop down option from select box. than on change event will fire and through ajax.but the js did'nt works.This is my code.</p>\n\n<h1>indent_controller</h1>\n\n<pre><code>class IndentsController &lt; ApplicationController\ndef index_indent \n @store_items = InventoryStoreItem.find(params[:id])\n @indents = Indent.all\n @stores = InventoryStore.all\nend\n\ndef load_item_data\n @storeitem = InventoryStoreItem.find_by_id(params[:inventory_store_item_id]).present? InventoryStoreItem.find(params[:inventory_store_item_id]): InventoryStoreItem.unscoped.find_by_id(params[:inventory_store_item_id])\nend\n</code></pre>\n\n<h1>indent.js.coffee</h1>\n\n<pre><code> #Load Items data when an item is selected from dropdown list\n'$('#select_inventory_store_item_id').on('change',function(){ var inventory_store_item_id = $('#select_inventory_store_item_id').val() $.ajax({ url: '/indents/load_item_data', type: 'GET', data: {'id' : inventory_store_item_id}, dataType: 'json' }).success(function(data) })'         \n</code></pre>\n\n<h1>new_indent</h1>\n\n<pre><code>&lt;%= form_for @indent, url:{controller: 'indents',action:'create_indent'} do |c|%&gt;\n &lt;div class=\"form-group\"&gt;\n  &lt;div class=\"col-md-3\"&gt;&lt;b&gt;Indent No:&lt;/b&gt;&lt;/div&gt;\n   &lt;%=c.text_field :indent_no, placeholder: \"Indent No\", class: \"form-control\",style:\"width:250px\"%&gt;\n &lt;/div&gt;\n\n &lt;div class=\"form-group\"&gt;\n  &lt;div class=\"col-md-3\"&gt;&lt;b&gt;Expected Date:&lt;/b&gt;&lt;/div&gt;\n   &lt;%= c.date_field :expected_date, :value =&gt; Time.now.strftime('%Y-%m-%d'),class: \"datepicker form-control\",style:\"width:250px\" %&gt;\n &lt;/div&gt;\n\n &lt;div class=\"form-group\"&gt;\n  &lt;div class=\"col-md-3\"&gt;&lt;b&gt;Description&lt;/b&gt;&lt;/div&gt;\n   &lt;%=c.text_field :description, class: \"form-control\",style: 'width:350px;height:100px'%&gt;\n &lt;/div&gt;\n\n &lt;h3&gt;Indent Items&lt;/h3&gt;\n &lt;div class=\"form-group\"&gt;\n  &lt;div class=\"col-md-3\"&gt;&lt;b&gt;Required&lt;/b&gt;&lt;/div&gt;\n   &lt;%=c.text_field :required, placeholder: \"Required\", class: \"form-control\",style:\"width:250px\"%&gt;\n &lt;/div&gt;\n\n &lt;div class=\"form-group\"&gt;\n  &lt;div class=\"col-md-3\"&gt;&lt;b&gt;Pending&lt;/b&gt;&lt;/div&gt;\n   &lt;%=c.text_field :pending, placeholder: \"Pending\", class: \"form-control\",style:\"width:250px\"%&gt;\n  &lt;/div&gt;\n\n &lt;div class=\"form-group\"&gt;\n  &lt;div class=\"col-md-3\"&gt; &lt;b&gt;Store Item:&lt;/b&gt;&lt;/div&gt;\n   &lt;td class=\"col-3\"&gt; &lt;%= c.select :inventory_store_item_id,InventoryStoreItem.all.collect{|b| [b.item_name,b.id]},{prompt:\"select Item\"}%&gt;&lt;/td&gt;\n &lt;/div&gt;\n &lt;div class=\"form-group\"&gt;\n  &lt;div class=\"col-md-3\"&gt;&lt;b&gt;Unit_price&lt;/b&gt;&lt;/div&gt;\n   &lt;%=text_field_tag :unit_price%&gt;\n &lt;/div&gt;\n\n &lt;div class=\"form-group\"&gt;\n  &lt;div class=\"col-md-3\"&gt;&lt;b&gt;Quantity&lt;/b&gt;&lt;/div&gt;\n   &lt;%=text_field_tag :quantity%&gt;\n &lt;/div&gt;\n\n &lt;div class=\"form-group\"&gt;\n  &lt;div class=\"col-md-3\"&gt;&lt;b&gt;Batch No&lt;/b&gt;&lt;/div&gt;\n   &lt;%=text_field_tag :batch_no%&gt;\n &lt;/div&gt;\n\n &lt;div class=\"col-sm-4 col-sm-offset-4\"&gt; \n  &lt;div class=\"form-actions\"&gt;               \n   &lt;%= c.submit 'Save', class: \"btn btn-primary\"%&gt;\n &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1490782618, "post_id": 43090591, "comment_id": 73262614, "body": "It would be really helpful if you could tell us (or even better yet file a bug on the Ruby bug tracker about it) what <i>specifically</i> in the documentation of that method is unclear to you. That way, the Ruby developers can improve the documentation for the benefit of future readers."}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 2, "creation_date": 1490782638, "post_id": 43090591, "comment_id": 73262630, "body": "A number is a quantity; it doesn&#39;t have digits. It has the same value no matter how do you represent it; one can represent it as decimal, binary, hexadecimal or even using Roman numerals. Its value is still the same. The number of digits (in the decimal representation) can be easily found using <code>number.to_s.length</code>. I.e. by counting the number of characters (digits) needed to represent it in decimal. <code>number.to_s(16).length</code> gets you the number of digits used to represent the value in base 16."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1490790061, "post_id": 43090591, "comment_id": 73267739, "body": "It is no always <code>4</code> : <code>32.size #=&gt; 8</code> and <code>(2**128).size #=&gt; 17</code>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1490790582, "post_id": 43090591, "comment_id": 73268126, "body": "It also depends on your architecture: <code>1.size #=&gt; 4</code> indicates a 32 bit system (hence <code>mingw32</code>), whereas <code>1.size #=&gt; 8</code> indicates a 64 bit system."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490783920, "post_id": 43090629, "comment_id": 73263481, "body": "You can also enter <code>help &#39;Fixnum#size&#39;</code> right in IRB."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490784034, "post_id": 43090629, "comment_id": 73263559, "body": "@Stefan cool! never used it, because it&#39;s not working in <code>pry</code>"}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 1, "creation_date": 1490789008, "post_id": 43090629, "comment_id": 73266995, "body": "@AndreyDeineko You can use <code>show-doc Fixnum#size</code> in <code>pry</code> though."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1490789089, "post_id": 43090629, "comment_id": 73267042, "body": "@MichaelKohl if I have installed <code>pry-doc</code> gem, but yea :) Edited the answr"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 7, "last_activity_date": 1490789203, "last_edit_date": 1490789203, "creation_date": 1490782483, "answer_id": 43090629, "question_id": 43090591, "link": "https://stackoverflow.com/questions/43090591/what-does-the-size-on-number-mean-in-ruby/43090629#43090629", "title": "What does the .size on number mean in ruby?", "body": "<p>I always suggest to check the method you're not sure about using the following scheme:</p>\n\n<ol>\n<li><p>Check where the method comes from (using <a href=\"http://ruby-doc.org/core-2.4.1/Object.html#method-i-method\" rel=\"nofollow noreferrer\">Object#<code>method</code></a>):</p>\n\n<pre><code>number.method(:size)\n#=&gt; #&lt;Method: Fixnum#size&gt;\n</code></pre></li>\n<li><p>Open docs and learn what it does for <code>Fixnum#size</code> and how it works.</p>\n\n<p>2.1 If you're using IRB, you can run <code>help 'Fixnum#size'</code> to get the docs right in your console\n2.2 If you're using pry, you can go with <code>show-doc Fixnum#size</code> (install <code>pry-doc</code> gem first)</p></li>\n</ol>\n\n<hr>\n\n<p>In Ruby 2.1.8 method was defined in <a href=\"https://ruby-doc.org/core-2.1.8/Fixnum.html#method-i-size\" rel=\"nofollow noreferrer\">Fixnum#<code>size</code></a>.</p>\n\n<p>Starting from Ruby 2.4 it's defined in\n<a href=\"https://ruby-doc.org/core-2.4.1/Integer.html#method-i-size\" rel=\"nofollow noreferrer\">Integer#<code>size</code></a>:</p>\n\n<blockquote>\n  <p>Returns the number of bytes in the machine representation of int.</p>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1490795298, "post_id": 43092800, "comment_id": 73271987, "body": "Or <code>12345.digits.size</code> in newer Rubies."}], "tags": [], "owner": {"reputation": 2023, "user_id": 979091, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a3480528206a15015e4a3ba9a68037c4?s=128&d=identicon&r=PG", "display_name": "omnikron", "link": "https://stackoverflow.com/users/979091/omnikron"}, "is_accepted": false, "score": 3, "last_activity_date": 1490788485, "creation_date": 1490788485, "answer_id": 43092800, "question_id": 43090591, "link": "https://stackoverflow.com/questions/43090591/what-does-the-size-on-number-mean-in-ruby/43092800#43092800", "title": "What does the .size on number mean in ruby?", "body": "<p>You are confusing the two methods <a href=\"https://ruby-doc.org/core-2.2.0/String.html#method-i-size\" rel=\"nofollow noreferrer\"><code>String#size</code></a>:</p>\n\n<blockquote>\n  <p>Returns the character length of <code>str</code>.</p>\n</blockquote>\n\n<p>and <a href=\"https://ruby-doc.org/core-2.2.2/Fixnum.html#method-i-size\" rel=\"nofollow noreferrer\"><code>Fixnum#size</code></a>:</p>\n\n<blockquote>\n  <p>Returns the number of bytes in the machine representation of <code>fix</code>.</p>\n</blockquote>\n\n<p><code>14</code> is an object of class <code>Fixnum</code>, so when you call <code>size</code> on it you are getting the number of bytes in the machine representation of the number. </p>\n\n<p>If you would like to know how many digits there are in a number, you can simply convert it to a string first and then call <code>size</code> on that:</p>\n\n<pre><code>14.to_s\n# =&gt; \"14\"\n14.to_s.size\n#=&gt; 2\n12345.to_s.size\n#=&gt; 5\n</code></pre>\n"}], "owner": {"reputation": 4312, "user_id": 3880254, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/13dffa84d85f3ed70e7156867822246d?s=128&d=identicon&r=PG&f=1", "display_name": "InQusitive", "link": "https://stackoverflow.com/users/3880254/inqusitive"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1101, "favorite_count": 0, "accepted_answer_id": 43090629, "answer_count": 2, "score": 3, "last_activity_date": 1490791451, "creation_date": 1490782382, "last_edit_date": 1490791451, "question_id": 43090591, "link": "https://stackoverflow.com/questions/43090591/what-does-the-size-on-number-mean-in-ruby", "title": "What does the .size on number mean in ruby?", "body": "<p>Why is my ruby giving incorrect size of number?  It doesn't matter what's the number. The output is always 4 for the size. What does that mean? I always thought it should give the number of digits.</p>\n\n<pre><code>number = 14\nprint number\nprint \"\\n\"\nprint number.size\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>14\n4\n</code></pre>\n\n<p>ruby version</p>\n\n<pre><code>ruby 2.1.8p440 (2015-12-16 revision 53160) [i386-mingw32]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "credentials", "salt"], "comments": [{"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1490779817, "post_id": 43089447, "comment_id": 73260754, "body": "Is the user actually being created in the db with that <code>Binda::User.create</code> call? Add a bang (eg. <code>create!</code>) to ensure that it is."}, {"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "reply_to_user": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1490779988, "post_id": 43089447, "comment_id": 73260868, "body": "Yes the user is there... but it does not have access. If I destroy it and create it from Rails console then it does. I&#39;ll check with adding the bang."}, {"owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1490780174, "post_id": 43089447, "comment_id": 73261004, "body": "The only other thing I can think of is that the salt/pepper you&#39;re injecting earlier on aren&#39;t loaded when you create the user, so the password is no longer valid."}, {"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "reply_to_user": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1490780537, "post_id": 43089447, "comment_id": 73261281, "body": "It&#39;s the same thing I have though. Or maybe running the installer doesn&#39;t consider devise config. I will try creating a second installer, which is not something I like..."}, {"owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "reply_to_user": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "edited": false, "score": 0, "creation_date": 1490782604, "post_id": 43089447, "comment_id": 73262603, "body": "I think I got the problem. After I updated <code>devise.rb</code> with new salt/pepper sequence, Devise config isn&#39;t reloaded. How can I reload it from the generator?"}], "answers": [{"tags": [], "owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "is_accepted": true, "score": 0, "last_activity_date": 1490785786, "last_edit_date": 1490785786, "creation_date": 1490784308, "answer_id": 43091308, "question_id": 43089447, "link": "https://stackoverflow.com/questions/43089447/devise-user-created-with-rails-generator-cannot-sign-in/43091308#43091308", "title": "Devise user created with Rails generator cannot sign in", "body": "<p>Sorted!</p>\n\n<p>The problem is that if you add salt/pepper configuration to the <code>devise.rb</code> of your application you need to reload the environment before being able to create a user with the new settings.</p>\n\n<p>To do that I moved the user creation into a task. This way the installer to reload the environment (and Devise config as weel) and is able to set the encrypted password correctly.</p>\n\n<p><strong>Installer</strong>\n</p>\n\n<pre><code># lib/generators/myEngine/install/install_generator.rb\ndef create_credentials\n  rake 'binda_create_initial_user'\nend\n</code></pre>\n\n<p><strong>Task</strong>\n</p>\n\n<pre><code># lib/tasks/binda.rake\ndesc \"Create initial user\"\ntask :binda_create_initial_user =&gt; :environment do\n  username = 'mail@domain.com'\n  password = 'password'\n  Binda::User.create!( email: username, password: password, password_confirmation: password )\nend\n</code></pre>\n\n<p>If you want to keep asking for mail and password:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># lib/tasks/binda.rake\ndesc \"Create first user\"\ntask :binda_create_initial_user =&gt; :environment do\n    STDOUT.puts \"What is your email? [mail@domain.com]\"\n  username = STDIN.gets.strip\n  username = 'mail@domain.com' if username.blank?\n    STDOUT.puts \"What is your password? [password]\"\n  password = STDIN.gets.strip\n  password = 'password' if password.blank?\n  Binda::User.create!( email: username, password: password, password_confirmation: password )\nend\n</code></pre>\n"}], "owner": {"reputation": 1760, "user_id": 1498118, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/903d5ad53fd577a6fedfc9da34f8fd79?s=128&d=identicon&r=PG", "display_name": "a.barbieri", "link": "https://stackoverflow.com/users/1498118/a-barbieri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 43091308, "answer_count": 1, "score": 0, "last_activity_date": 1490785786, "creation_date": 1490779397, "last_edit_date": 1490782828, "question_id": 43089447, "link": "https://stackoverflow.com/questions/43089447/devise-user-created-with-rails-generator-cannot-sign-in", "title": "Devise user created with Rails generator cannot sign in", "body": "<p>I'm working on a Rails Engine which will depend on Devise.</p>\n\n<p>I created an installer using <strong>Rails generator</strong> which you can find <a href=\"https://github.com/a-barbieri/binda/blob/master/lib/generators/binda/install/install_generator.rb#L77-L81\" rel=\"nofollow noreferrer\">here</a>. The installer creates the first credentials in order to access the administration panel later.</p>\n\n<p><strong>The problem is that I cannot sign in with those credentials</strong>. Weirdly then, if I delete the account and recreate it via Rails console, they do work. I think that's due to something happening during the installer.</p>\n\n<p>Here a snippet of it:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Binda installer generator ...\n\ndef setup_devise\n  return if Rails.env.production?\n  # Copy the initilializer on the application folder\n  template 'config/initializers/devise.rb'\n  # Add secret key\n  inject_into_file 'config/initializers/devise.rb', after: \"config.secret_key = '\" do \n    SecureRandom.hex(64)\n  end\n  # Add pepper\n  inject_into_file 'config/initializers/devise.rb', after: \"config.pepper = '\" do \n    SecureRandom.hex(64)\n  end\n  # some other code for mailer ...\nend\n\ndef create_credentials\n  @username = ask(\"What's your email? ['mail@domain.com']\").presence || 'mail@domain.com'\n  @password = ask(\"What's your password? ['password']\").presence || 'password'\n  Binda::User.create( email: @username, password: @password, password_confirmation: @password )\n\n# Binda installer generator continue ...\n</code></pre>\n\n<p><a href=\"https://github.com/a-barbieri/binda/blob/master/lib/generators/binda/install/install_generator.rb#L77-L81\" rel=\"nofollow noreferrer\">Here</a> the full code.</p>\n\n<hr>\n\n<h3>More info</h3>\n\n<p>I found out that even if I modify <code>devise.rb</code> file the new configuration is not loaded until the end of the installer. This means the new salt/pepper isn't considered while creating the first user. <strong>How can I reload it</strong> before running the <code>create_credentials</code> method?</p>\n"}, {"tags": ["ruby", "ruby-2.3", "refinements", "ruby-2.4"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1490786846, "post_id": 43089442, "comment_id": 73265505, "body": "And then there are people asking <i>&quot;Why is noone using refinements? They are cool, yo!&quot;</i>. FYI, you don&#39;t have to use global variable with the other answer, it was just the easiest way to show how you can delay the definition of the methods until you get to the refinement. In short, refinements don&#39;t work that well with <code>include</code>."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 3, "last_activity_date": 1490832915, "creation_date": 1490832915, "answer_id": 43106336, "question_id": 43089442, "link": "https://stackoverflow.com/questions/43089442/best-way-to-organize-a-long-piece-of-code-in-ruby-refinement-block/43106336#43106336", "title": "best way to organize a long piece of code in ruby refinement block", "body": "<p>Here's a general pattern I ended up using. Basically I found no workaround for using global identifiers at some level. But this can be done fairly cleanly by making those globals classes/modules. This will be more clear as an example:</p>\n\n<pre><code>module StringPatches\n\n  def self.non_empty?(string)\n    !string.empty?\n  end\n\n  def non_empty?\n    StringPatches.non_empty?(self)\n  end\n\n  def non_non_empty?\n    !StringPatches.non_empty?(self)\n  end\n\n  refine String do\n    include StringPatches\n  end\n\nend\n\nclass Foo\n  using StringPatches\n  puts \"asd\".non_empty? # =&gt; true\n  puts \"asd\".non_non_empty? # =&gt; false\nend\n</code></pre>\n\n<p>The class methods on <code>StringPatches</code> don't get exported to <code>using</code>. But since classes/modules are constants (globals) they can be accessed from anywhere. </p>\n"}], "owner": {"reputation": 83, "user_id": 6900237, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac3d0c50d7c439bf1c4821195aeb1eea?s=128&d=identicon&r=PG", "display_name": "Gaoyong Pan", "link": "https://stackoverflow.com/users/6900237/gaoyong-pan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 1, "accepted_answer_id": 43106336, "answer_count": 1, "score": 4, "last_activity_date": 1490832915, "creation_date": 1490779376, "last_edit_date": 1495542746, "question_id": 43089442, "link": "https://stackoverflow.com/questions/43089442/best-way-to-organize-a-long-piece-of-code-in-ruby-refinement-block", "title": "best way to organize a long piece of code in ruby refinement block", "body": "<pre><code>module Access\n  def last\n    self[-1]\n  end\n\n  def start_end\n    self[0] + last\n  end\nend\n\nmodule StringExt\n  refine String do\n    include Access\n  end\nend\n\nusing StringExt\n\nputs 'abcd'.last       # =&gt; d\nputs 'abcd'.start_end\n</code></pre>\n\n<p>When a class being refined with too many connected methods, I think it is better to extract them to a module. However, in above example which demos a problem when one method calls another(see the last statement), and it produces following error.</p>\n\n<p>in 'start_end': undefined local variable or method 'last' for \"abcd\":String (NameError)</p>\n\n<p>Similar <a href=\"https://stackoverflow.com/questions/31097733/how-to-share-code-between-ruby-refinements\">issue</a> was solved using a global variable, which also works for my example. But I'm seeking another better way to organize inter-called methods being refined and avoid a global thing.</p>\n\n<p>How would advice a better way to organize those methods?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "public-key-encryption", "api-authorization"], "owner": {"reputation": 133, "user_id": 4716314, "user_type": "registered", "accept_rate": 14, "profile_image": "https://graph.facebook.com/914603558560275/picture?type=large", "display_name": "Satyam Agrawal", "link": "https://stackoverflow.com/users/4716314/satyam-agrawal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1490782987, "creation_date": 1490777154, "question_id": 43088599, "link": "https://stackoverflow.com/questions/43088599/i-want-to-authenticate-api-by-using-public-and-private-key-for-each-user-in-ruby", "title": "I want to authenticate api by using public and private key for each user in ruby on rails", "body": "<p>I want to know how to implement public private key authentication for API &amp; how to generate the new public private key pair and store them in the database so that at the time of API hit, i can retrieve them for authentication. Please correct me if i am wrong in my suggested approach and please share any example of code, so that i can understand how things are working.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5553, "user_id": 2022751, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oZvCb.jpg?s=128&g=1", "display_name": "FloatingRock", "link": "https://stackoverflow.com/users/2022751/floatingrock"}, "edited": false, "score": 0, "creation_date": 1490777142, "post_id": 43088545, "comment_id": 73258880, "body": "Note: use <code>require &#39;set&#39;</code> to get sets to work"}], "answers": [{"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": false, "score": 2, "last_activity_date": 1490777475, "last_edit_date": 1490777475, "creation_date": 1490777148, "answer_id": 43088596, "question_id": 43088545, "link": "https://stackoverflow.com/questions/43088545/directly-convert-splat-to-set/43088596#43088596", "title": "Directly convert splat to set", "body": "<p><code>Set.new</code> works as well with ranges:</p>\n\n<pre><code>Set.new(1..10)\n =&gt; #&lt;Set: {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}&gt;\n</code></pre>\n\n<p>Just for fun, if you want to use splat operator (<code>*</code>):</p>\n\n<pre><code>my_set = (_ = *(1..10)).to_set\n=&gt; #&lt;Set: {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}&gt;\n</code></pre>\n\n<p>Note, that you should use assignment if you want to splat range.</p>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 4, "last_activity_date": 1490777153, "creation_date": 1490777153, "answer_id": 43088598, "question_id": 43088545, "link": "https://stackoverflow.com/questions/43088545/directly-convert-splat-to-set/43088598#43088598", "title": "Directly convert splat to set", "body": "<p>You already had a set. Splatting it (<code>*</code>) gave you the array. Just don't splat:</p>\n\n<pre><code>my_set = (1..10).to_set # =&gt; #&lt;Set: {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}&gt;\n</code></pre>\n"}], "owner": {"reputation": 5553, "user_id": 2022751, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/oZvCb.jpg?s=128&g=1", "display_name": "FloatingRock", "link": "https://stackoverflow.com/users/2022751/floatingrock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 43088598, "answer_count": 2, "score": -1, "last_activity_date": 1490777739, "creation_date": 1490777002, "last_edit_date": 1490777739, "question_id": 43088545, "link": "https://stackoverflow.com/questions/43088545/directly-convert-splat-to-set", "title": "Directly convert splat to set", "body": "<p>I'm using the below code to generate a <code>set</code> from a range:</p>\n\n<pre><code>my_set = *(1..10).to_set\n # =&gt; [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\n</code></pre>\n\n<p>As you can see, instead of getting a set, I get an array.</p>\n\n<p>The statement works if I split it into two lines:</p>\n\n<pre><code>my_set = *(1..10)\nmy_set = my_set.to_set\n # =&gt; #&lt;Set: {1, 2, 3, 4, 5, 6, 7, 8, 9, 10}&gt;\n</code></pre>\n\n<p>How can I get it to work as expected <strong>in one line</strong>?</p>\n"}, {"tags": ["arrays", "ruby", "mapping"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 1, "creation_date": 1490776136, "post_id": 43088207, "comment_id": 73258242, "body": "It works for me. The error you are getting is somewhere else. Though you don&#39;t need the <code>single_item = </code> part."}, {"owner": {"reputation": 515, "user_id": 3918419, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/7H5jV.jpg?s=128&g=1", "display_name": "MrVocabulary", "link": "https://stackoverflow.com/users/3918419/mrvocabulary"}, "reply_to_user": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1490776473, "post_id": 43088207, "comment_id": 73258439, "body": "@ndn you were right in both cases, thanks :)"}], "answers": [{"tags": [], "owner": {"reputation": 515, "user_id": 3918419, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/7H5jV.jpg?s=128&g=1", "display_name": "MrVocabulary", "link": "https://stackoverflow.com/users/3918419/mrvocabulary"}, "is_accepted": false, "score": 0, "last_activity_date": 1490776522, "creation_date": 1490776522, "answer_id": 43088381, "question_id": 43088207, "link": "https://stackoverflow.com/questions/43088207/ruby-map-array-of-strings-into-array-of-arrays/43088381#43088381", "title": "Ruby: map array of strings into array of arrays", "body": "<p>As ndn pointed out, I can just write:</p>\n\n<pre><code>arr_of_arr = arr.map{|single_item| [single_item, 0]}\n</code></pre>\n\n<p>But my problem was somewhere else.</p>\n"}, {"tags": [], "owner": {"reputation": 539, "user_id": 6760539, "user_type": "registered", "profile_image": "https://graph.facebook.com/1004701776293731/picture?type=large", "display_name": "Rajat Bansal", "link": "https://stackoverflow.com/users/6760539/rajat-bansal"}, "is_accepted": true, "score": 2, "last_activity_date": 1490776818, "creation_date": 1490776818, "answer_id": 43088481, "question_id": 43088207, "link": "https://stackoverflow.com/questions/43088207/ruby-map-array-of-strings-into-array-of-arrays/43088481#43088481", "title": "Ruby: map array of strings into array of arrays", "body": "<p>arr = [\"aaa\", \"bbb\", \"ccc\"]</p>\n\n<p>arr_of_arr = arr.map { |single_item| [single_item, 0] }</p>\n"}], "owner": {"reputation": 515, "user_id": 3918419, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/7H5jV.jpg?s=128&g=1", "display_name": "MrVocabulary", "link": "https://stackoverflow.com/users/3918419/mrvocabulary"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 430, "favorite_count": 0, "closed_date": 1490781315, "accepted_answer_id": 43088481, "answer_count": 2, "score": -1, "last_activity_date": 1490776818, "creation_date": 1490775968, "question_id": 43088207, "link": "https://stackoverflow.com/questions/43088207/ruby-map-array-of-strings-into-array-of-arrays", "closed_reason": "Not suitable for this site", "title": "Ruby: map array of strings into array of arrays", "body": "<p>Let's assume I have an array which looks like this:</p>\n\n<pre><code>[\"aaa\", \"bbb\", \"ccc\"]\n</code></pre>\n\n<p>I want to replace each of these items of an array into an array adding the same value, like this:</p>\n\n<pre><code>[[\"aaa\", 0], [\"bbb\", 0], [\"ccc\", 0]]\n</code></pre>\n\n<p>I don't understand why using:</p>\n\n<pre><code>arr_of_arr = arr.map{|single_item| single_item = [single_item, 0]}\n</code></pre>\n\n<p>does not work, but rather returns the following error:</p>\n\n<pre><code> syntax error, unexpected keyword_end, expecting '}'\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "diff"], "owner": {"reputation": 10843, "user_id": 1439143, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/RxFne.png?s=128&g=1", "display_name": "Joshua Muheim", "link": "https://stackoverflow.com/users/1439143/joshua-muheim"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 292, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1490774425, "creation_date": 1490773973, "last_edit_date": 1490774425, "question_id": 43087530, "link": "https://stackoverflow.com/questions/43087530/diffing-two-texts-in-rails-and-printing-human-readable-html-output", "title": "Diffing two texts in Rails and printing human readable HTML output", "body": "<p>I'm using the paper_trail gem to auto-create a versions history of my <code>Page</code> model.</p>\n\n<p>In <code>pages#show</code>, I display the versions like so:</p>\n\n<p><a href=\"https://i.stack.imgur.com/4mpEr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4mpEr.png\" alt=\"screenshot\"></a></p>\n\n<p>The most important element is the diff which shows the difference between the previous and the currently displayed version of a field, e.g. <code>content</code>. It looks like a diff on GitHub, and it is marked up well using <code>&lt;ins&gt;</code> for insertions and <code>&lt;del&gt;</code> for deletions.</p>\n\n<p>The sad thing is that at the time being, I generate this diff using <a href=\"https://code.google.com/p/google-diff-match-patch/\" rel=\"nofollow noreferrer\">https://code.google.com/p/google-diff-match-patch/</a>, a JavaScript library that's run in the browser of the user. I've done it this way because I didn't manage to find a Ruby gem or similar that does the same in a similar elegant way.</p>\n\n<p>Well, I found <a href=\"https://github.com/samg/diffy\" rel=\"nofollow noreferrer\">https://github.com/samg/diffy</a> and <a href=\"https://github.com/pvande/differ\" rel=\"nofollow noreferrer\">https://github.com/pvande/differ</a>, but the diff of both gems aren't close as elegant: differ needs to know manually whether to diff by line, word, or character (while the used JavaScript decides this automatically and uses a combination of these options which feels very intuitive to me), and diffy doesn't offer an option for this. I don't know exactly how the JavaScript works, but it states that \"Myer's diff algorithm\" is used internally:</p>\n\n<blockquote>\n  <p>This library implements Myer's diff algorithm which is generally considered to be the best general-purpose diff. A layer of pre-diff speedups and post-diff cleanups surround the diff algorithm, improving both performance and output quality.</p>\n</blockquote>\n\n<p>You can try it here: <a href=\"https://neil.fraser.name/software/diff_match_patch/svn/trunk/demos/demo_diff.html\" rel=\"nofollow noreferrer\">https://neil.fraser.name/software/diff_match_patch/svn/trunk/demos/demo_diff.html</a></p>\n\n<p>Maybe use the following two strings to see a typical example of two versions of a page:</p>\n\n<pre><code>This is the about page.\n\nPut markdowwn formated content here.\n</code></pre>\n\n<p>and</p>\n\n<pre><code>This is the about page.\n\nPut markdown formatted here content.\n\nA [link to page 11](11). And another one: [](11).\n</code></pre>\n\n<p>It results in something like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/acViH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/acViH.png\" alt=\"screenshot\"></a></p>\n\n<p>The problem with this approach is that it's run in the browser, so I can't mutate the generated code in my Rails application anymore. So I wonder whether there's an easy way to get similar diff results using e.g. a command line tool like <code>diff</code>? Maybe even <code>git</code> could be of use?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 10, "last_activity_date": 1490774772, "last_edit_date": 1490774772, "creation_date": 1490773373, "answer_id": 43087351, "question_id": 43087297, "link": "https://stackoverflow.com/questions/43087297/rails-sum-values-in-an-array-of-hashes/43087351#43087351", "title": "Rails sum values in an array of hashes", "body": "<p>You could use <a href=\"https://ruby-doc.org/core-2.4.1/Enumerable.html#method-i-each_with_object\" rel=\"noreferrer\"><code>each_with_object</code></a> with a Hash and a default value:</p>\n\n<pre><code>array = [\n  {loading: 10, avg: 15, total: 25 },\n  {loading: 20, avg: 20, total: 40 },\n  {loading: 30, avg: 25, total: 55 }\n]\n\nsum = Hash.new(0)\n\narray.each_with_object(sum) do |hash, sum|\n  hash.each { |key, value| sum[key] += value }\nend\n # =&gt; {:loading=&gt;60, :avg=&gt;60, :total=&gt;120}\n</code></pre>\n\n<p>It will work with any number of keys, and won't complain if a key isn't present in all the hashes.</p>\n\n<hr>\n\n<p>BTW, you can replace </p>\n\n<pre><code>array.map { |h| h[:loading] }.sum\n</code></pre>\n\n<p>with</p>\n\n<pre><code>array.sum { |h| h[:loading] }\n</code></pre>\n"}], "owner": {"reputation": 1239, "user_id": 2134398, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c858429a7d7289246899d678137e7ea0?s=128&d=identicon&r=PG", "display_name": "Arif", "link": "https://stackoverflow.com/users/2134398/arif"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3205, "favorite_count": 0, "closed_date": 1490773381, "accepted_answer_id": 43087351, "answer_count": 1, "score": 0, "last_activity_date": 1490774772, "creation_date": 1490773239, "question_id": 43087297, "link": "https://stackoverflow.com/questions/43087297/rails-sum-values-in-an-array-of-hashes", "closed_reason": "Duplicate", "title": "Rails sum values in an array of hashes", "body": "<p>Following is an array of hashes:</p>\n\n<pre><code>array = [\n  {loading: 10, avg: 15, total: 25 },\n  {loading: 20, avg: 20, total: 40 },\n  {loading: 30, avg: 25, total: 55 }\n]\n</code></pre>\n\n<p>I need to sum the values of each hash and the result should be a hash of same keys:</p>\n\n<pre><code>{loading: 60, avg: 60, total: 120}\n</code></pre>\n\n<p>One way is to sum the values individually for each key and then merge in a hash like this:</p>\n\n<pre><code>loading = array.map { |h| h[:loading] }.sum\navg = array.map { |h| h[:avg] }.sum\ntotal = array.map { |h| h[:total] }.sum\n\n{loading: loading, avg: avg, total: total}\n</code></pre>\n\n<p>Is there a better way to do it? because the keys may increase in the future.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1490772395, "post_id": 43086844, "comment_id": 73255987, "body": "Show the method <code>open_spreadsheet()</code>."}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1490772628, "post_id": 43086844, "comment_id": 73256152, "body": "To the question body please."}, {"owner": {"reputation": 75, "user_id": 6473081, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/z3Udm.jpg?s=128&g=1", "display_name": "Dhanshree", "link": "https://stackoverflow.com/users/6473081/dhanshree"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1490773757, "post_id": 43086844, "comment_id": 73256816, "body": "@\u0417\u0435\u043b\u0451\u043d\u044b\u0439 check the question I&#39;ve added <code>open_spreadsheet()</code> method"}], "answers": [{"tags": [], "owner": {"reputation": 267, "user_id": 2328827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3836cfdf2aa2e725587722233a09621c?s=128&d=identicon&r=PG", "display_name": "Daniel Christiany", "link": "https://stackoverflow.com/users/2328827/daniel-christiany"}, "is_accepted": false, "score": 0, "last_activity_date": 1490772188, "creation_date": 1490772188, "answer_id": 43086958, "question_id": 43086844, "link": "https://stackoverflow.com/questions/43086844/nomethoderror-in-reportscontrollerimport-undefined-method-original-filename-f/43086958#43086958", "title": "NoMethodError in ReportsController#import undefined method `original_filename&#39; for &quot;students.xlsx&quot;:String", "body": "<p>It looks like open_spreadsheet is expecting a File Object, not a String</p>\n"}, {"tags": [], "owner": {"reputation": 23312, "user_id": 560215, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/bb365e8477053edcc55b40c3d27781d8?s=128&d=identicon&r=PG", "display_name": "sevenseacat", "link": "https://stackoverflow.com/users/560215/sevenseacat"}, "is_accepted": true, "score": 1, "last_activity_date": 1490772430, "creation_date": 1490772430, "answer_id": 43087054, "question_id": 43086844, "link": "https://stackoverflow.com/questions/43086844/nomethoderror-in-reportscontrollerimport-undefined-method-original-filename-f/43087054#43087054", "title": "NoMethodError in ReportsController#import undefined method `original_filename&#39; for &quot;students.xlsx&quot;:String", "body": "<p>Your <code>form_tag</code> needs to know that it has a multipart file upload field in it - otherwise it will submit raw data, and not actually upload the file. </p>\n\n<pre><code>form_tag import_reports_path, multipart: true do\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6473081, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/z3Udm.jpg?s=128&g=1", "display_name": "Dhanshree", "link": "https://stackoverflow.com/users/6473081/dhanshree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 43087054, "answer_count": 2, "score": 0, "last_activity_date": 1490773687, "creation_date": 1490771870, "last_edit_date": 1490773687, "question_id": 43086844, "link": "https://stackoverflow.com/questions/43086844/nomethoderror-in-reportscontrollerimport-undefined-method-original-filename-f", "title": "NoMethodError in ReportsController#import undefined method `original_filename&#39; for &quot;students.xlsx&quot;:String", "body": "<p>I want to import the student records but when i choose file it shows an error as \n<code>NoMethodError in ReportsController#import\nundefined method</code>original_filename' for \"students.xlsx\":String` </p>\n\n<p>and i tried to debbug this and I got </p>\n\n<p><code>[1] pry(#&lt;ReportsController&gt;)&gt; Student.import(params[:file]) \nNoMethodError: undefined method</code>original_filename' for \"import.xlsx\":String\nfrom /home/dk/import_multiple/school/app/models/student.rb:283:in <code>open_spreadsheet'</code></p>\n\n<p>This is my code:</p>\n\n<p><strong>controller</strong></p>\n\n<pre><code>def importer      \n  params[:role] == :guardian ? Guardian : Student\nend\n\ndef import\n  importer.import(params[:file])\n  redirect_to import_reports_path, notice: \"Students imported.\"\nend\n</code></pre>\n\n<p><strong>student.rb</strong></p>\n\n<pre><code>COLUMNS_TO_STRING = [\"batch_id\", \"class_roll_no\",\"phone1\",\"phone2\"]  # and so on\ndef self.import(file)\n  spreadsheet = open_spreadsheet(file)\n  header = spreadsheet.row(1)\n  (2..spreadsheet.last_row).each do |i|\n  row = Hash[[header, spreadsheet.row(i)].transpose]\n  row = clean_for row, COLUMNS_TO_STRING\n  record = Student.find_by(:id =&gt; row[\"id\"],:batch_id =&gt;    row[\"batch_id\"],:class_roll_no =&gt; row[\"class_roll_no\"],:phone1 =&gt;  row[\"phone1\"],:phone2 =&gt; row[\"phone2\"]) || new\n  record.attributes = row.to_hash.slice(*row.to_hash.keys)\n  record.save!  \n end\nend\ndef self.open_spreadsheet(file)\n  case File.extname(file.original_filename)\n  when \".csv\" then Roo::CSV.new(file.path)\n  when \".xls\" then Roo::Excel.new(file.path)\n  when \".xlsx\" then Roo::Excelx.new(file.path)\n  else raise \"Unknown file type: #{file.original_filename}\"\n  end\n end\n</code></pre>\n\n<p><strong>guardian.rb</strong></p>\n\n<pre><code>COLUMNS_TO_STRING = [\"student_id\"] # and so on\ndef self.import(file)\n  spreadsheet = open_spreadsheet(file)\n  header = spreadsheet.row(1)\n  (2..spreadsheet.last_row).each do |i|\n  row = Hash[[header, spreadsheet.row(i)].transpose]\n  row = clean_for row, COLUMNS_TO_STRING\n  guardian = Guardian.find_by(:id =&gt; row[\"id\"],:student_id =&gt; row[\"student_id\"]) || new\n  guardian.attributes = row.to_hash.slice(*row.to_hash.keys)\n  guardian.save!\n end\nend\ndef self.open_spreadsheet(file)\n  case File.extname(file.original_filename)\n  when \".csv\" then Roo::CSV.new(file.path)\n  when \".xls\" then Roo::Excel.new(file.path)\n  when \".xlsx\" then Roo::Excelx.new(file.path)\n  else raise \"Unknown file type: #{file.original_filename}\"\n  end\n end\n</code></pre>\n\n<p><strong>view</strong></p>\n\n<pre><code>&lt;h1&gt;IMPORT&lt;/h1&gt;\n&lt;div class = \"well\"&gt;\n    &lt;p&gt;\n        &lt;%= form_tag import_reports_path do %&gt;\n        &lt;%= file_field_tag :file%&gt;\n        &lt;br&gt;\n        &lt;%= submit_tag \"Import\",class: \"btn btn-primary\" %&gt;\n        &lt;% end %&gt;\n    &lt;/p&gt; \n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1490782221, "post_id": 43085829, "comment_id": 73262372, "body": "You say you want to extract the host name from a URI, but the first one is not a valid URI (It is missing the scheme). What do you want as a result for invalid URIs? Reject them?"}, {"owner": {"reputation": 72033, "user_id": 295264, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a88d1309c2ea93cadb3f11b58890ca83?s=128&d=identicon&r=PG", "display_name": "Starx", "link": "https://stackoverflow.com/users/295264/starx"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1490786380, "post_id": 43085829, "comment_id": 73265183, "body": "I think first one can be called a URI other than URL. And yes I would like to reject them."}, {"owner": {"reputation": 72033, "user_id": 295264, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a88d1309c2ea93cadb3f11b58890ca83?s=128&d=identicon&r=PG", "display_name": "Starx", "link": "https://stackoverflow.com/users/295264/starx"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1490786570, "post_id": 43085829, "comment_id": 73265313, "body": "@J&#246;rgWMittag, I just checked the Git docs, it says first example uses  SSH transfer protocol."}], "answers": [{"comments": [{"owner": {"reputation": 72033, "user_id": 295264, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a88d1309c2ea93cadb3f11b58890ca83?s=128&d=identicon&r=PG", "display_name": "Starx", "link": "https://stackoverflow.com/users/295264/starx"}, "edited": false, "score": 0, "creation_date": 1490769474, "post_id": 43085955, "comment_id": 73254249, "body": "Awesome I will add ruby context to your answer. To make it complete"}, {"owner": {"reputation": 72033, "user_id": 295264, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a88d1309c2ea93cadb3f11b58890ca83?s=128&d=identicon&r=PG", "display_name": "Starx", "link": "https://stackoverflow.com/users/295264/starx"}, "edited": false, "score": 0, "creation_date": 1490769975, "post_id": 43085955, "comment_id": 73254513, "body": "<code>(.*)@(.+?):|http(s?)?:\\&#47;\\&#47;(.+?)\\&#47;</code> will this match any user in place for <code>git</code> and both <code>http</code> and <code>https</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 72033, "user_id": 295264, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a88d1309c2ea93cadb3f11b58890ca83?s=128&d=identicon&r=PG", "display_name": "Starx", "link": "https://stackoverflow.com/users/295264/starx"}, "edited": false, "score": 0, "creation_date": 1490770406, "post_id": 43085955, "comment_id": 73254742, "body": "@Starx: &quot;will this match...?&quot; -  use the regex101 for this kind of questions. it&#39;s very useful!"}, {"owner": {"reputation": 397, "user_id": 2752278, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/45ed135be54de459138765763b86b043?s=128&d=identicon&r=PG&f=1", "display_name": "Basti Destruction", "link": "https://stackoverflow.com/users/2752278/basti-destruction"}, "reply_to_user": {"reputation": 72033, "user_id": 295264, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a88d1309c2ea93cadb3f11b58890ca83?s=128&d=identicon&r=PG", "display_name": "Starx", "link": "https://stackoverflow.com/users/295264/starx"}, "edited": false, "score": 0, "creation_date": 1490770434, "post_id": 43085955, "comment_id": 73254762, "body": "@Starx click on the link to check for yourself"}], "tags": [], "owner": {"reputation": 397, "user_id": 2752278, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/45ed135be54de459138765763b86b043?s=128&d=identicon&r=PG&f=1", "display_name": "Basti Destruction", "link": "https://stackoverflow.com/users/2752278/basti-destruction"}, "is_accepted": true, "score": 1, "last_activity_date": 1490770496, "last_edit_date": 1490770496, "creation_date": 1490768961, "answer_id": 43085955, "question_id": 43085829, "link": "https://stackoverflow.com/questions/43085829/how-to-extract-the-host-name-from-a-git-repo-uri/43085955#43085955", "title": "How to extract the host name from a git repo URI?", "body": "<p>You can use a Regular Expression to extract the hostname from the url (<a href=\"https://regex101.com/r/mt5xa8/3\" rel=\"nofollow noreferrer\">regex101.com</a>). This expression will match any user and both protocols (http/https).</p>\n\n<pre><code>[a-zA-Z0-9_]+@(.+?):|https?:\\/\\/(.+?)\\/\n</code></pre>\n\n<p>Usage:</p>\n\n<pre><code>repo_uri = '...'\nrepo_host = repo_uri.scan( /[a-zA-Z0-9_]+@(.+?):|https?:\\/\\/(.+?)\\//).last.first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 2, "creation_date": 1490769188, "post_id": 43086012, "comment_id": 73254100, "body": "The URI method works for the OP&#39;s second example but is confused by the first."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1490769207, "post_id": 43086012, "comment_id": 73254112, "body": "@moveson: well, he said he can use either, so... :)"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1490769341, "post_id": 43086012, "comment_id": 73254170, "body": "I read his post as requiring a parser that could handle both formats (&quot;How can I extract <code>company-name.com</code> from <i>them</i>?&quot;). If the OP can live with just the URI format, then I agree yours is the correct answer."}, {"owner": {"reputation": 72033, "user_id": 295264, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a88d1309c2ea93cadb3f11b58890ca83?s=128&d=identicon&r=PG", "display_name": "Starx", "link": "https://stackoverflow.com/users/295264/starx"}, "edited": false, "score": 0, "creation_date": 1490769365, "post_id": 43086012, "comment_id": 73254193, "body": "Fair enough. haha. But I was asking for a solution applicable for both cases. The <code>or</code> used to identify possibilities."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1490769439, "post_id": 43086012, "comment_id": 73254229, "body": "@moveson: but one can simply preprocess the string with <code>s.gsub(&#39;git@&#39;, &#39;https:&#47;&#47;&#39;)</code>, and now we can use this <code>URI</code> approach for both. :)"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1490769652, "post_id": 43086012, "comment_id": 73254355, "body": "@SergioTulentsev Agreed, but at that point, the custom regex solution proposed in the other answer begins to look a bit simpler, at least to my (relatively untrained) eye."}, {"owner": {"reputation": 72033, "user_id": 295264, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a88d1309c2ea93cadb3f11b58890ca83?s=128&d=identicon&r=PG", "display_name": "Starx", "link": "https://stackoverflow.com/users/295264/starx"}, "edited": false, "score": 0, "creation_date": 1490769670, "post_id": 43086012, "comment_id": 73254364, "body": "Indeed, what a simple approach. But in both solutions if &#39;git` is not the user then the list keeps on increasing."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1490770282, "post_id": 43086012, "comment_id": 73254672, "body": "@moveson simpler in terms of cyclomatic complexity - yes. More clear/easier to grasp - hell no (IMHO, obviously). Regular expressions is a powerful gun with a powerful problem: one simply can&#39;t reliably tell at a glance, wtf is it what this [abstract] regex is doing. You&#39;ve heard the saying, &quot;Some people, when confronted with a problem, think &#39;I know, I&#39;ll use regular expressions.&#39; Now they have two problems.&quot;, right? :) Or maybe it&#39;s just me who can&#39;t read regexes :)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 1, "creation_date": 1490781648, "post_id": 43086012, "comment_id": 73262002, "body": "@moveson: No, <code>URI</code> is not confused by the first. It is correctly rejecting it as invalid. The problem is that the OP says he wants to extract information from a &quot;repository URI&quot;, but then posts an example that is not a URI. It is not clear from the question what the OP wants to happen with something which is not a URI. So, rejecting it is well within the OP&#39;s specification."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1490769135, "creation_date": 1490769135, "answer_id": 43086012, "question_id": 43085829, "link": "https://stackoverflow.com/questions/43085829/how-to-extract-the-host-name-from-a-git-repo-uri/43086012#43086012", "title": "How to extract the host name from a git repo URI?", "body": "<p>Use the proper tools for this. URI parsing is a solved problem.</p>\n\n<pre><code>require 'uri'\n\ns = 'https://company-name.com/company-name/repo.git'\nuri = URI(s)\nuri.host # =&gt; \"company-name.com\"\n</code></pre>\n"}], "owner": {"reputation": 72033, "user_id": 295264, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/a88d1309c2ea93cadb3f11b58890ca83?s=128&d=identicon&r=PG", "display_name": "Starx", "link": "https://stackoverflow.com/users/295264/starx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 43085955, "answer_count": 2, "score": 0, "last_activity_date": 1490770496, "creation_date": 1490768560, "question_id": 43085829, "link": "https://stackoverflow.com/questions/43085829/how-to-extract-the-host-name-from-a-git-repo-uri", "title": "How to extract the host name from a git repo URI?", "body": "<p>Given a git repository URI Like</p>\n\n<pre><code>git@company-name.com:/company-name/repo.git\n</code></pre>\n\n<p>or </p>\n\n<pre><code>https://company-name.com/company-name/repo.git\n</code></pre>\n\n<p>How can I extract <code>company-name.com</code> from them? I am trying to fetch the hostname so I can pass them to a cookbook called <code>ssk_known_hosts</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490768218, "post_id": 43085314, "comment_id": 73253622, "body": "I think if you don&#39;t use the reserved word <code>class</code> this should work. Although it&#39;s a little tricky to understand, since you&#39;d have to know that define_method returns a symbol that can be passed to send."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1490769836, "post_id": 43085314, "comment_id": 73254438, "body": "I believe it would be more typical to define the methods in one iteration and call them (using <code>send</code>) in another."}], "answers": [{"comments": [{"owner": {"reputation": 719, "user_id": 2514481, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/891a3231a9ca01f1b2770e92885821ff?s=128&d=identicon&r=PG", "display_name": "Drakken Saer", "link": "https://stackoverflow.com/users/2514481/drakken-saer"}, "edited": false, "score": 0, "creation_date": 1490806822, "post_id": 43086499, "comment_id": 73281025, "body": "Unfortunately this is not in a model, it&#39;s part of a module itself. Using define_method on the module seems to just define a method on the module, but I have an include statement as well. I&#39;ll post the entire module for clarification."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 719, "user_id": 2514481, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/891a3231a9ca01f1b2770e92885821ff?s=128&d=identicon&r=PG", "display_name": "Drakken Saer", "link": "https://stackoverflow.com/users/2514481/drakken-saer"}, "edited": false, "score": 0, "creation_date": 1490806903, "post_id": 43086499, "comment_id": 73281083, "body": "@DrakkenSaer you should have done this from the very beginning, because what I posted is a valid answer to your problem as it is now. And editing the question will invalidate the answer."}, {"owner": {"reputation": 719, "user_id": 2514481, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/891a3231a9ca01f1b2770e92885821ff?s=128&d=identicon&r=PG", "display_name": "Drakken Saer", "link": "https://stackoverflow.com/users/2514481/drakken-saer"}, "edited": false, "score": 0, "creation_date": 1490807043, "post_id": 43086499, "comment_id": 73281176, "body": "No... my question has nothing to do with models."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 719, "user_id": 2514481, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/891a3231a9ca01f1b2770e92885821ff?s=128&d=identicon&r=PG", "display_name": "Drakken Saer", "link": "https://stackoverflow.com/users/2514481/drakken-saer"}, "edited": false, "score": 0, "creation_date": 1490807145, "post_id": 43086499, "comment_id": 73281250, "body": "@DrakkenSaer if you&#39;re passing <code>source</code> to the method, making my code working is as easy as prepending <code>source.</code> to where it needs to be - that&#39;s it."}, {"owner": {"reputation": 719, "user_id": 2514481, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/891a3231a9ca01f1b2770e92885821ff?s=128&d=identicon&r=PG", "display_name": "Drakken Saer", "link": "https://stackoverflow.com/users/2514481/drakken-saer"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1490807193, "post_id": 43086499, "comment_id": 73281288, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/139399/discussion-between-drakken-saer-and-andrey-deineko\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1490807428, "last_edit_date": 1490807428, "creation_date": 1490770866, "answer_id": 43086499, "question_id": 43085314, "link": "https://stackoverflow.com/questions/43085314/ruby-send-define-method-with-block-arguments/43086499#43086499", "title": "Ruby: Send define_method with block arguments", "body": "<p>You have few issues, like using reserved words, not understanding the <code>self</code> (or rather not implementing your understanding correctly).</p>\n\n<pre><code>source.attribute_names.each do |attribute|\n  source.singleton_class.instance_eval do\n    define_method('next_by_' + attribute) do |object, user = nil|\n      if user\n        source.joins(:users)\n              .where(\"#{attribute} &gt; ?\", object.public_send(attribute))\n              .where(users: { id: user.id })\n              .first\n      else\n        source.where(\"#{attribute} &gt; ?\", object.public_send(attribute)).first\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 719, "user_id": 2514481, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/891a3231a9ca01f1b2770e92885821ff?s=128&d=identicon&r=PG", "display_name": "Drakken Saer", "link": "https://stackoverflow.com/users/2514481/drakken-saer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 519, "favorite_count": 0, "accepted_answer_id": 43086499, "answer_count": 1, "score": 1, "last_activity_date": 1490807428, "creation_date": 1490766523, "last_edit_date": 1490806933, "question_id": 43085314, "link": "https://stackoverflow.com/questions/43085314/ruby-send-define-method-with-block-arguments", "title": "Ruby: Send define_method with block arguments", "body": "<p>I'm trying to do something like this, where the send method's block has block arguments:</p>\n\n<pre><code>  klass.attribute_names.each do |attribute|\n    klass.send(define_method(\"next_by_\" + attribute) { object, user = nil\n      if user\n        klass.joins(:users).where(\"#{attribute} &gt; ?\", object.send(attribute)).where(users: {id: user.id}).first\n      else\n        klass.where(\"#{attribute} &gt; ?\", object.send(attribute)).first\n      end\n    })\n  end\n</code></pre>\n\n<p>Which isn't valid Ruby. Is this possible to do, and if so what is the best way to do so?</p>\n\n<p>EDIT: I realize the reserved keyword \"class\" here. It is simply for illustration purposes. I've changed it to klass to prevent further confusion.</p>\n\n<p>More detail, this is the entire file:</p>\n\n<pre><code>module Helpers::ResourceRecordHelper\n\n  # Remove this and call upon the module's methods to include instead to fix performance hit\n  def self.included(source)\n    define_class_methods(source)\n  end\n\n  def define_class_methods(source)\n    source.attribute_names.each do |attribute|\n\n      # These defined methods never reach the class\n      define_method(\"next_by_\" + attribute) { object, user = nil\n        if user\n          self.class.joins(:users).where(\"#{attribute} &gt; ?\", object.send(attribute)).where(users: {id: user.id}).first\n        else\n          self.class.where(\"#{attribute} &gt; ?\", object.send(attribute)).first\n        end\n      }\n\n      define_method(\"previous_by_\" + attribute) do object, user = nil\n        if user\n          self.class.joins(:users).where(\"#{attribute} &lt; ?\", object.send(attribute)).where(users: {id: user.id}).last\n        else\n          self.class.where(\"#{attribute} &lt; ?\", object.send(attribute)).last\n        end\n      end\n    end\n\n    def source.next(object, user = nil)\n      source.next_by_id(object, user)\n    end\n\n    def source.previous(object, user = nil)\n      source.previous_by_id(object, user)\n    end\n  end\n\n  extend self\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 927591, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/835d5738dc90c462d0bca3b439702279?s=128&d=identicon&r=PG", "display_name": "j1mmy", "link": "https://stackoverflow.com/users/927591/j1mmy"}, "edited": false, "score": 0, "creation_date": 1490809492, "post_id": 43085606, "comment_id": 73282796, "body": "Cool thanks this works! Only problem now is its also targeting the divs that contain the divs that contain baz. Have to figure out how to just target the divs that directly contain baz not their parents."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490811101, "post_id": 43085606, "comment_id": 73283753, "body": "&quot;Have to figure out how to just target the divs that directly contain baz not their parents&quot; So your example and question are not what they should be? Don&#39;t ask questions that creep; Figure out what the real question is first then ask. Failing to do so wastes everyone&#39;s time."}], "tags": [], "owner": {"reputation": 2136, "user_id": 454705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b5f69060e8c08d8c6e44596086536ec0?s=128&d=identicon&r=PG", "display_name": "Navin Peiris", "link": "https://stackoverflow.com/users/454705/navin-peiris"}, "is_accepted": false, "score": 0, "last_activity_date": 1490767712, "creation_date": 1490767712, "answer_id": 43085606, "question_id": 43085251, "link": "https://stackoverflow.com/questions/43085251/how-to-change-the-class-of-elements-that-have-matching-content/43085606#43085606", "title": "How to change the class of elements that have matching content", "body": "<p>You can use <code>body.css('div:contains(\"&lt;text-to-match&gt;\")')</code> to match the nodes containing the text content you want.</p>\n\n<p>You can achieve what you want by doing something like:</p>\n\n<pre><code>require 'nokogiri'\n\ninput = '&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;'\n\nbody = Nokogiri::HTML.fragment(input)\n\ntext_to_match = body.at_css('.bar').text\n\nmatching_nodes = body.css(\"div:contains('#{text_to_match}')\")\nmatching_nodes.each do |node|\n  node['class'] = 'bar'\nend\n\nputs body.to_html\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": true, "score": 0, "last_activity_date": 1490773186, "creation_date": 1490773186, "answer_id": 43087278, "question_id": 43085251, "link": "https://stackoverflow.com/questions/43085251/how-to-change-the-class-of-elements-that-have-matching-content/43087278#43087278", "title": "How to change the class of elements that have matching content", "body": "<p>Be careful using <code>body.css(\"div:contains('#{text_to_match}')\")</code>.</p>\n\n<pre><code>input = '&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;baza&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;bazfdsfsdf&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;'\n</code></pre>\n\n<p>The output will be:</p>\n\n<pre><code>&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"bar\"&gt;baza&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"bar\"&gt;bazfdsfsdf&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n</code></pre>\n\n<p>If you want to match the exact same text in both elements, you should use:\n<code>body.css(\"div[text() = '#{text_to_match}']\")</code></p>\n\n<pre><code>input = '&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;baza&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;bazfdsfsdf&lt;/div&gt;\n&lt;div class=\"foo\"&gt;baz&lt;/div&gt;'\n</code></pre>\n\n<p>The output would be:</p>\n\n<pre><code>&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;baza&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;bazfdsfsdf&lt;/div&gt;\n&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1490810480, "last_edit_date": 1490810480, "creation_date": 1490810064, "answer_id": 43100739, "question_id": 43085251, "link": "https://stackoverflow.com/questions/43085251/how-to-change-the-class-of-elements-that-have-matching-content/43100739#43100739", "title": "How to change the class of elements that have matching content", "body": "<p>I'd do something like this:</p>\n\n<pre><code>require 'nokogiri'\n\ndoc = Nokogiri::HTML(&lt;&lt;EOT)\n&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;baz&lt;/div&gt;\nEOT\n\ntarget_text = doc.at('.bar').text # =&gt; \"baz\"\ndoc.search(\"//div[text()='#{target_text}']\").each do |div|\n  div['class'] = 'bar'\nend\n</code></pre>\n\n<p>Which results in:</p>\n\n<pre><code>&lt;!DOCTYPE html PUBLIC \"-//W3C//DTD HTML 4.0 Transitional//EN\" \"http://www.w3.org/TR/REC-html40/loose.dtd\"&gt;\n&lt;html&gt;&lt;body&gt;\n&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;/body&gt;&lt;/html&gt;\n</code></pre>\n\n<p>There's nothing that says we can't mix CSS and XPath selectors. XPath has more capabilities, but it is visually noisy, so I use CSS when I can and XPath when I have to. </p>\n\n<p>XPath makes it easy to search all nodes for text, so it's a good choice for that task.</p>\n"}], "owner": {"reputation": 41, "user_id": 927591, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/835d5738dc90c462d0bca3b439702279?s=128&d=identicon&r=PG", "display_name": "j1mmy", "link": "https://stackoverflow.com/users/927591/j1mmy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 43087278, "answer_count": 3, "score": 0, "last_activity_date": 1490810480, "creation_date": 1490766221, "last_edit_date": 1490809398, "question_id": 43085251, "link": "https://stackoverflow.com/questions/43085251/how-to-change-the-class-of-elements-that-have-matching-content", "title": "How to change the class of elements that have matching content", "body": "<p>I have: </p>\n\n<pre><code>&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n</code></pre>\n\n<p>And I would like all the elements that contain the same content as the one with a class of \"bar\" to also have a class of \"bar\" like so:</p>\n\n<pre><code>&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n&lt;div class=\"bar\"&gt;baz&lt;/div&gt;\n&lt;div class=\"foo\"&gt;qux&lt;/div&gt;\n</code></pre>\n\n<p>But I can't just search for \"baz\" because that content is subject to change. Instead I have to figure out what's in the lone \"bar\" div then find the others that match it and change their class to \"bar\" too.</p>\n\n<p>I've managed to get the content of the first \"bar\" element into a variable:</p>\n\n<pre><code>var = body.css(\".bar\").first.inner_text\n</code></pre>\n\n<p>But nothing I've tried from there as far as finding the matching content and replacing the class has worked. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nested-attributes", "link-to", "cocoon-gem"], "answers": [{"tags": [], "owner": {"reputation": 484, "user_id": 5949678, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Yn9j3.jpg?s=128&g=1", "display_name": "Divya Sharma", "link": "https://stackoverflow.com/users/5949678/divya-sharma"}, "is_accepted": false, "score": 1, "last_activity_date": 1490765216, "creation_date": 1490765216, "answer_id": 43085033, "question_id": 43084014, "link": "https://stackoverflow.com/questions/43084014/cocoon-link-to-add-association-not-working/43085033#43085033", "title": "Cocoon link_to_add_association not working", "body": "<p>Please try to take link_to_add_association out of fields_for.As there are no questions yet, the link_to_add_association is never shown.</p>\n\n<pre><code>&lt;%= f.fields_for :questions do |question| %&gt;\n    &lt;div id=\"questions\"&gt;\n        &lt;div class=\"field\"&gt;\n            &lt;%= render 'questions_fields', f: question %&gt;\n        &lt;/div&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n&lt;div class=\"links\"&gt;\n    &lt;%= link_to_add_association 'Add Question', f, :questions %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 79, "user_id": 7485407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rvp3O.jpg?s=128&g=1", "display_name": "andywalt", "link": "https://stackoverflow.com/users/7485407/andywalt"}, "edited": false, "score": 0, "creation_date": 1490991397, "post_id": 43112442, "comment_id": 73375337, "body": "Thank you so much! This worked perfectly! Also, great job on the gem!"}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 1, "last_activity_date": 1490862628, "creation_date": 1490862628, "answer_id": 43112442, "question_id": 43084014, "link": "https://stackoverflow.com/questions/43084014/cocoon-link-to-add-association-not-working/43112442#43112442", "title": "Cocoon link_to_add_association not working", "body": "<p>Your view is named incorrectly for cocoon to deduce automatically. It is looking for <code>_question_fields</code> (singular) while you have <code>_questions_fields</code>. </p>\n\n<p>Either you rename the partial (it only contains a single question, so imho it seems more logical), but you can also <a href=\"https://github.com/nathanvda/cocoon#partial\" rel=\"nofollow noreferrer\">overrule the default partial name</a> as follows: </p>\n\n<pre><code>&lt;%= link_to_add_association 'Add Question', f, :questions, partial: 'questions_fields' %&gt;\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 7485407, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/Rvp3O.jpg?s=128&g=1", "display_name": "andywalt", "link": "https://stackoverflow.com/users/7485407/andywalt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3907, "favorite_count": 1, "accepted_answer_id": 43112442, "answer_count": 2, "score": 0, "last_activity_date": 1490862628, "creation_date": 1490759738, "question_id": 43084014, "link": "https://stackoverflow.com/questions/43084014/cocoon-link-to-add-association-not-working", "title": "Cocoon link_to_add_association not working", "body": "<p>Have followed video tutorials, searched over and over, don't get it. Would appreciate help.</p>\n\n<p>My main issue is that the link_to_add_association isn't working and I keep getting a missing template error. </p>\n\n<p>\"ActionView::MissingTemplate in Applications#new\"</p>\n\n<p>It says:\nMissing partial applications/_question_fields, application/_question_fields with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:raw, :erb, :html, :builder, :ruby, :coffee, :jbuilder]}. Searched in:\n  * \"/Users/AndyAir/projects/friends-app/app/views\"\n  * \"/Users/AndyAir/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/devise-4.2.1/app/views\"</p>\n\n<p>model</p>\n\n<pre><code>class Application &lt; ApplicationRecord\n belongs_to :user\n\n has_many :questions\n\n accepts_nested_attributes_for :questions, reject_if: :all_blank, allow_destroy: true\n\n validates :name, :description, presence: true\nend\n</code></pre>\n\n<p>controller</p>\n\n<pre><code>class ApplicationsController &lt; ApplicationController\n before_action :find_application, only: [:show, :edit, :update, :destroy]\n before_action :authenticate_user!\n\n def index\n    @applications = Application.all.order(\"created_at DESC\").limit(3)\n end\n\n def new    \n  @application = Application.new\n  @application.questions.build\n end\n\n def create\n    @application = Application.new(application_params)\n\n    if @application.save\n        redirect_to @application\n    else\n        render 'new'\n    end\n end\n\n def show\n end\n\n def edit\n end\n\n def update\n    if @application.update(application_params)\n        redirect_to @application\n    else\n        render 'edit'\n    end\n end\n\n\n def destroy\n    @application.destroy\n    redirect_to root_path\n end\n\n private\n\n def find_application\n    @application = Application.find(params[:id])\n end\n\n def application_params\n    params.require(:application).permit(:name, :description, questions_attributes: [:id, :name, :_destroy])\n end\n\n def after_sign_out_path_for(resource_or_scope)\n  redirect_to root_path\n end\nend\n</code></pre>\n\n<p>views/applications/new</p>\n\n<pre><code>&lt;%= form_for @application do |f| %&gt;\n    &lt;% if @application.errors.any? %&gt;\n      &lt;div id=\"errors\"&gt;\n        &lt;p&gt;&lt;%= @application.errors.count %&gt; Prevented this application from saving&lt;/p&gt;\n        &lt;ul&gt;\n          &lt;% @application.errors.full_messages.each do |msg| %&gt;\n            &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n          &lt;% end %&gt;\n        &lt;/ul&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;div class=\"field\"&gt;\n        &lt;%= f.label :title %&gt;&lt;br&gt;\n        &lt;%= f.text_field :name, placeholder: \"Name of Your Friend Test\", class: \"form-control\" %&gt;&lt;br&gt;\n        &lt;%= f.label :description %&gt;&lt;br&gt;\n        &lt;%= f.text_field :description, placeholder: \"Write a witty tagline for your test.\", class: \"form-control\" %&gt;&lt;br&gt;\n    &lt;/div&gt;\n    &lt;h3&gt;Questions&lt;/h3&gt;\n        &lt;%= f.fields_for :questions do |question| %&gt;\n            &lt;div id=\"questions\"&gt;\n                &lt;div class=\"field\"&gt;\n                &lt;%= render 'questions_fields', f: question %&gt;\n             &lt;div class=\"links\"&gt;\n                &lt;%= link_to_add_association 'Add Question', f, :questions %&gt;\n               &lt;/div&gt;\n              &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n    &lt;br&gt;\n    &lt;div class=\"form-actions\"&gt;\n        &lt;%= f.button :submit %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>views/applications/_questions_fields.html.erb</p>\n\n<pre><code>&lt;div class=\"nested-fields\"&gt;\n  &lt;%= f.text_field :question %&gt;\n  &lt;%= link_to_remove_association \"remove task\", f %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 3975, "user_id": 2413778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d73cd4efaa221f0b4fe583808f079368?s=128&d=identicon&r=PG", "display_name": "John C", "link": "https://stackoverflow.com/users/2413778/john-c"}, "edited": false, "score": 0, "creation_date": 1490758447, "post_id": 43083656, "comment_id": 73250283, "body": "Are the numbers guaranteed to be unique?"}, {"owner": {"reputation": 1090, "user_id": 7113209, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10154091942466794/picture?type=large", "display_name": "hancho", "link": "https://stackoverflow.com/users/7113209/hancho"}, "reply_to_user": {"reputation": 3975, "user_id": 2413778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d73cd4efaa221f0b4fe583808f079368?s=128&d=identicon&r=PG", "display_name": "John C", "link": "https://stackoverflow.com/users/2413778/john-c"}, "edited": false, "score": 0, "creation_date": 1490758563, "post_id": 43083656, "comment_id": 73250314, "body": "No, and I can see why .rindex would pose a problem in that situation."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1490771385, "post_id": 43083656, "comment_id": 73255325, "body": "@AustinStehling because <code>sum_pairs([5, 5, 4, 6, 5], 10)</code> returns <code>[4, 6]</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1490774184, "post_id": 43083656, "comment_id": 73257028, "body": "@AustinStehling: Please take a look at my answer for a much faster method."}], "answers": [{"comments": [{"owner": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "edited": false, "score": 1, "creation_date": 1490767344, "post_id": 43085328, "comment_id": 73253247, "body": "Technically the amortized runtime still takes n^2. Wonder if it&#39;s possible to achieve better?"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "reply_to_user": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "edited": false, "score": 0, "creation_date": 1490768245, "post_id": 43085328, "comment_id": 73253634, "body": "@HoMan In some cases it might help to do <code>smallest, largest = ints.minmax</code>, then <code>subset = ints.reject { |e| e &gt; (s - smallest) || e &lt; (s - largest) }</code>. Extra time up front for possible savings in the iterations."}], "tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 3, "last_activity_date": 1490768657, "last_edit_date": 1490768657, "creation_date": 1490766580, "answer_id": 43085328, "question_id": 43083656, "link": "https://stackoverflow.com/questions/43083656/ruby-sum-of-pairs-in-an-array-that-add-to-a-certain-given-input/43085328#43085328", "title": "Ruby - Sum of pairs in an array that add to a certain given input", "body": "<p>An alternative approach might be to make sure your combinations are always in the correct order of preference, and then use <code>#find</code> instead of <code>#select</code>. The standard Ruby <code>#combination(2)</code> pairs element 0 with all later elements ([10,5],[10,2],[10,3],[10,7],[10,5]) then pairs index 1 with all later elements ([5,2],[5,3],[5,7],[5,5]) and so forth. </p>\n\n<p>You could write a new <code>modified_combination</code> method that pairs element 1 with all earlier elements ([5,10]) then pairs element 2 with all earlier elements ([2,10],[2,5]), then element 3 ([3,10],[3,5],[3,2]) and so forth. This will ensure the pair with the smallest larger index number is always first in the list. </p>\n\n<p>Now you can do:</p>\n\n<pre><code>x = ints.modified_combination.find { |x, y| x, y == s }.reverse\n</code></pre>\n\n<p>Remember, this will work most efficiently if <code>modified_combination</code> returns an Enumerator rather than an Array (though it will be much more efficient than your original approach in any case).</p>\n\n<p>If you don't want to dig into creating a method that returns an Enumerator, here's a quick-and-dirty solution that achieves the same thing:</p>\n\n<pre><code>def sum_pairs(ints, s)\n  (1...ints.size).each do |x|\n    (0...x).each do |y|\n      return [ints[y], ints[x]] if ints[x] + ints[y] == s\n    end\n  end\n  nil\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "edited": false, "score": 1, "creation_date": 1490774852, "post_id": 43087509, "comment_id": 73257422, "body": "Yup, this trades off space for a much faster runtime."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "edited": false, "score": 1, "creation_date": 1490783826, "post_id": 43087509, "comment_id": 73263417, "body": "@HoMan: True. The space needed for the set is smaller than the space already taken by <code>ints</code>. It shouldn&#39;t be a problem."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 8, "last_activity_date": 1490804530, "last_edit_date": 1490804530, "creation_date": 1490773893, "answer_id": 43087509, "question_id": 43083656, "link": "https://stackoverflow.com/questions/43083656/ruby-sum-of-pairs-in-an-array-that-add-to-a-certain-given-input/43087509#43087509", "title": "Ruby - Sum of pairs in an array that add to a certain given input", "body": "<p>With a <a href=\"http://ruby-doc.org/stdlib-2.4.1/libdoc/set/rdoc/Set.html\" rel=\"nofollow noreferrer\"><code>Set</code></a>, only one pass is needed for this problem :</p>\n\n<pre><code>require 'set'\n\ndef sum_pairs(ints, s)\n  already_seen = Set.new\n  ints.each do |int|\n    return [s - int, int] if already_seen.include?(s - int)\n    already_seen.add(int)\n  end\n  nil\nend\n\nsum_pairs([10, 5, 2, 3, 7, 5], 10)\n# [3, 7]\nsum_pairs([10, 5, 2, 3, 7, 5], 20)\n# nil\n</code></pre>\n\n<p>It outputs the result in the correct order and will be much faster than the other solutions.</p>\n"}], "owner": {"reputation": 1090, "user_id": 7113209, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/10154091942466794/picture?type=large", "display_name": "hancho", "link": "https://stackoverflow.com/users/7113209/hancho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2018, "favorite_count": 0, "accepted_answer_id": 43087509, "answer_count": 2, "score": 2, "last_activity_date": 1490804530, "creation_date": 1490757311, "last_edit_date": 1490757873, "question_id": 43083656, "link": "https://stackoverflow.com/questions/43083656/ruby-sum-of-pairs-in-an-array-that-add-to-a-certain-given-input", "title": "Ruby - Sum of pairs in an array that add to a certain given input", "body": "<p>I'm doing a ruby problem and my solution works. However, it does not work on bigger test cases because it takes too long to process.</p>\n\n<p>The method takes two inputs, an array of numbers and a number.</p>\n\n<p>The goal is to find the first two numbers in the array whose sum is the number provided in the input. </p>\n\n<p>The first pair means that the highest index of the pair is lower than the highest index of any other pairs in the array that add to the number.</p>\n\n<p>Example - ([10, 5, 2, 3, 7, 5], 10)</p>\n\n<p>The answer should be [3, 7] while [5, 5] also sums to 10, the index of the last 5 is 5 and the index of 7 is 4, so [3, 7] comes first. </p>\n\n<pre><code>def sum_pairs(ints, s)\n  return nil if ints.empty? || ints.nil?\n\n  x = ints.combination(2).select {|x, y| x + y == s}\n\n  return nil if x.nil? || x.empty?\n\n  ints.rindex(x[0][1]) &gt; ints.rindex(x[-1][1]) ? x.last : x.first \n\nend\n</code></pre>\n\n<p>My code worked for all test cases besides those with large arrays. </p>\n\n<p>I was wondering if there was a built in method to help or if I needed to loop through the array differently. </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 4005160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/947f010d13035b8aafc6a380faa0a849?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4005160/chris"}, "edited": false, "score": 0, "creation_date": 1490789611, "post_id": 43084347, "comment_id": 73267427, "body": "Thanks Jim. I end up with no changes made to the script and instead I&#39;ve run it with the correct argument like ./test.rb &quot;filename.bin&quot;"}], "tags": [], "owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "is_accepted": true, "score": 2, "last_activity_date": 1490797117, "last_edit_date": 1490797117, "creation_date": 1490761737, "answer_id": 43084347, "question_id": 43083532, "link": "https://stackoverflow.com/questions/43083532/typeerror-no-implicit-conversion-of-nil-into-string/43084347#43084347", "title": "TypeError: no implicit conversion of nil into String", "body": "<p>Because <code>File.read</code> requires a string parameter and <code>f</code> defaults to nil when you invoke the script without a command line argument</p>\n\n<pre><code>f = ARGV[0] unless ARGV[0].nil?     # f defaults to nil when ARGV[0] is nil\nbin = File.read(f)                  # bin = File.read(nil)   BOOM\n</code></pre>\n\n<p>Here is a refactoring of your code:</p>\n\n<pre><code>...\nf = ARGV[0]\nabort \"filename required\" unless f\nbin = File.read(f)\n...\n</code></pre>\n\n<hr>\n\n<p>These changes accomplish two things:</p>\n\n<ol>\n<li>When the script is invoked without the required filename, it will gracefully abort with an explanation of the problem.</li>\n<li>Simplifies the code by removing <code>unless ARGV[0].nil?</code> which doesn't do anything useful will be misleading to anyone maintaining your code in the future, including yourself</li>\n</ol>\n"}], "owner": {"reputation": 43, "user_id": 4005160, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/947f010d13035b8aafc6a380faa0a849?s=128&d=identicon&r=PG&f=1", "display_name": "Chris", "link": "https://stackoverflow.com/users/4005160/chris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 7268, "favorite_count": 0, "accepted_answer_id": 43084347, "answer_count": 1, "score": 0, "last_activity_date": 1490797117, "creation_date": 1490756505, "last_edit_date": 1490789494, "question_id": 43083532, "link": "https://stackoverflow.com/questions/43083532/typeerror-no-implicit-conversion-of-nil-into-string", "title": "TypeError: no implicit conversion of nil into String", "body": "<p>Trying to decode a bin file in ruby script but after running the script I get the following error test.rb:57:in <code>read': no implicit conversion of nil into String (TypeError) from script:57:in</code>'</p>\n\n<p>Any idea what could be the problem?</p>\n\n<p>Thanks in advance</p>\n\n<pre><code>require 'bindata'\n\nclass Decode &lt; BinData::Record # size 4+\n  uint32le :record_count\n  array    :records, :type =&gt; :cube_main_bin_record, :initial_length  =&gt; :record_count\nend\n\n\nbegin\n  f = ARGV[0] unless ARGV[0].nil?\n  bin = File.read(f)\n\n  Decode.read(bin).records.each_with_index do |rec, num|\n    puts \"Record #{num} #{rec.to_binary_s.length}\"\n    p rec\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2110, "user_id": 2146879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMsq7.jpg?s=128&g=1", "display_name": "Ho Man", "link": "https://stackoverflow.com/users/2146879/ho-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1490755769, "creation_date": 1490755769, "answer_id": 43083412, "question_id": 43083183, "link": "https://stackoverflow.com/questions/43083183/call-different-method-if-first-one-fails/43083412#43083412", "title": "Call different method if first one fails", "body": "<p>If you could make <code>.process!</code> return false on a failure you could do this</p>\n\n<pre><code>rg = ReverseGeocoder.new(lat, lng, LOCALITY).process! || ReverseGeocoder.new(lat, lng, ADMINISTRATIVE_AREA_LEVEL_1).process!\nsave_normalized_values(rg) if rg[:results].any?\n</code></pre>\n\n<p>Otherwise I don't see a cleaner way, just different:</p>\n\n<pre><code>rg = ReverseGeocoder.new(lat, lng, LOCALITY).process!\nrg[:results] || rg = ReverseGeocoder.new(lat, lng, ADMINISTRATIVE_AREA_LEVEL_1).process!\nrg[:results] &amp;&amp; save_normalized_values(rg)\n</code></pre>\n"}], "owner": {"reputation": 11990, "user_id": 492767, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/446bc7fb73e79a187d60c977a7092527?s=128&d=identicon&r=PG", "display_name": "Victor", "link": "https://stackoverflow.com/users/492767/victor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490755769, "creation_date": 1490754305, "question_id": 43083183, "link": "https://stackoverflow.com/questions/43083183/call-different-method-if-first-one-fails", "title": "Call different method if first one fails", "body": "<p>Using Rails/Ruby. I have the following:</p>\n\n<pre><code>  def normalize\n    rg = ReverseGeocoder.new(lat, lng, LOCALITY).process!\n    return save_normalized_values(rg) if rg[:results].any?\n\n    rg = ReverseGeocoder.new(lat, lng, ADMINISTRATIVE_AREA_LEVEL_1).process!\n    return save_normalized_values(rg) if rg[:results].any?\n  end\n</code></pre>\n\n<p>While this works, is there a better way to write this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "hash", "group-by"], "comments": [{"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1490765811, "post_id": 43083022, "comment_id": 73252597, "body": "What errors is it giving you? How are the objects laid out? (i.e. what are their relationships to other things?)"}], "answers": [{"tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": true, "score": 3, "last_activity_date": 1491075253, "creation_date": 1491075253, "answer_id": 43161140, "question_id": 43083022, "link": "https://stackoverflow.com/questions/43083022/using-group-by-and-sort-by-in-nested-hash/43161140#43161140", "title": "Using group by and sort by in nested hash", "body": "<p>You are passing a key-value pair which came from <code>group_by</code> and was coerced as an array to <code>sort_by</code>, and then trying to access a key in the array, which of course doesn't exist.</p>\n\n<p>In other words, you're mistaking the input used in sort_by. In the first <code>sort_by</code>, <code>|t|</code> is a hash key-pair generated by group_by and coerced into a array of the form <code>[k,v]</code>. In your case, <code>t</code> is:</p>\n\n<pre><code>[ #&lt;TrackCategory id: 2, order: 0&gt;,\n  [{:track =&gt; \n     #&lt;Track promo_order: 2&gt;,\n    :order =&gt; 2},\n   {:track =&gt; \n     #&lt;Track promo_order: 2&gt;,\n    :order =&gt; 1}],\n #...\n]\n</code></pre>\n\n<p>So what you want is to decompose the array in its elements so you can get the ones you want, something like:</p>\n\n<pre><code>tracks.group_by { |t| t[:track].track_category }\n  .sort_by { |t, _| t[:order] } # here you're sorting by TrackCategory#[:order]\n</code></pre>\n\n<p>And something similar on the second line, but using <code>[:promo_order]</code> instead.</p>\n"}], "owner": {"reputation": 125, "user_id": 2394182, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4b097e8c65fd359862d0eb886d28f6d0?s=128&d=identicon&r=PG", "display_name": "Jack Zerby", "link": "https://stackoverflow.com/users/2394182/jack-zerby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3393, "favorite_count": 0, "accepted_answer_id": 43161140, "answer_count": 1, "score": 2, "last_activity_date": 1491075253, "creation_date": 1490753195, "question_id": 43083022, "link": "https://stackoverflow.com/questions/43083022/using-group-by-and-sort-by-in-nested-hash", "title": "Using group by and sort by in nested hash", "body": "<p>I have a function:</p>\n\n<pre><code>tracks.group_by { |t| t[:track].track_category }\n</code></pre>\n\n<p>Which creates a hash:</p>\n\n<pre><code>{ \n\n #&lt;TrackCategory id: 2, order: 0&gt; =&gt; \n  [{:track =&gt; \n     #&lt;Track promo_order: 2&gt;,\n    :order =&gt; 2},\n   {:track =&gt; \n     #&lt;Track promo_order: 2&gt;,\n    :order =&gt; 1}],\n\n #&lt;TrackCategory id: 1, order: 1&gt; =&gt; \n  [{:track =&gt; \n     #&lt;Track promo_order: 2&gt;,\n    :order =&gt; 2},\n   {:track =&gt; \n     #&lt;Track promo_order: 2&gt;,\n    :order =&gt; 1}]\n}\n</code></pre>\n\n<p>I've been trying to sort the TrackCategories by order, and inside that sort the Tracks by promo_order.</p>\n\n<p>This keeps giving me errors, and I'm positive I'm doing something wrong</p>\n\n<pre><code>tracks.group_by { |t| t[:track].track_category }.sort_by { |t| t[:order] }.sort_by { |t| t[:promo_order] }\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rolify"], "comments": [{"owner": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1490756083, "post_id": 43083004, "comment_id": 73249595, "body": "Did you restart the server after making this change?"}, {"owner": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "reply_to_user": {"reputation": 20644, "user_id": 184184, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f6a508697f9eca2680b12ddb85ba1319?s=128&d=identicon&r=PG", "display_name": "Lenin Raj Rajasekaran", "link": "https://stackoverflow.com/users/184184/lenin-raj-rajasekaran"}, "edited": false, "score": 0, "creation_date": 1490756535, "post_id": 43083004, "comment_id": 73249719, "body": "@emaillenin Of course i did it :P"}], "owner": {"reputation": 478, "user_id": 3568626, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/8242a180ffea103035a63a0615154946?s=128&d=identicon&r=PG&f=1", "display_name": "HFX", "link": "https://stackoverflow.com/users/3568626/hfx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490756765, "creation_date": 1490753055, "last_edit_date": 1490756765, "question_id": 43083004, "link": "https://stackoverflow.com/questions/43083004/how-to-override-roleadapter", "title": "How to override RoleAdapter?", "body": "<p>I am trying to override RoleAdapter in initializer file <strong><em>config/initializers/rolify.rb</em></strong>:</p>\n\n<pre><code>Rolify::Role.class_eval do\n  def has_role?(role_name, resource = nil)\n    # The code works here\n  end\nend\n\nrequire 'rolify/adapters/active_record/role_adapter'\n\nRolify::Adapter::RoleAdapter.class_eval do\n  def build_query(role, resource = nil)\n    # The code are not picked up\n  end\nend\n</code></pre>\n\n<p>But that does not work as usual, my changes are not picked up, weird. Any idea about this? Thanks.</p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "answers": [{"comments": [{"owner": {"reputation": 5824, "user_id": 1065358, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5c67a1a1fa9d56db3bd62a77a268baf8?s=128&d=identicon&r=PG", "display_name": "shiv455", "link": "https://stackoverflow.com/users/1065358/shiv455"}, "edited": false, "score": 0, "creation_date": 1490801465, "post_id": 43083318, "comment_id": 73277222, "body": "im positive to use node.runstate..but can you please lemme know how can i use that node.runstate outside rubyblock i mean not in templates though..updated my question"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 5824, "user_id": 1065358, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5c67a1a1fa9d56db3bd62a77a268baf8?s=128&d=identicon&r=PG", "display_name": "shiv455", "link": "https://stackoverflow.com/users/1065358/shiv455"}, "edited": false, "score": 0, "creation_date": 1490809970, "post_id": 43083318, "comment_id": 73283090, "body": "The execute resource is for running external commands so I&#39;m not even sure what you&#39;re trying to do there."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 5824, "user_id": 1065358, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5c67a1a1fa9d56db3bd62a77a268baf8?s=128&d=identicon&r=PG", "display_name": "shiv455", "link": "https://stackoverflow.com/users/1065358/shiv455"}, "edited": false, "score": 0, "creation_date": 1490821153, "post_id": 43083318, "comment_id": 73289664, "body": "Sure, if using the value twice like that, storing it in the run state is more reasonable, if a bit ugly :)"}, {"owner": {"reputation": 5824, "user_id": 1065358, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5c67a1a1fa9d56db3bd62a77a268baf8?s=128&d=identicon&r=PG", "display_name": "shiv455", "link": "https://stackoverflow.com/users/1065358/shiv455"}, "edited": false, "score": 0, "creation_date": 1490821379, "post_id": 43083318, "comment_id": 73289785, "body": "no it didnt work on template varibale it ouputs as empty value for db_password in properties.erb template instead of node.runstate value"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 2, "last_activity_date": 1490755132, "creation_date": 1490755132, "answer_id": 43083318, "question_id": 43082907, "link": "https://stackoverflow.com/questions/43082907/difference-between-node-run-state-vs-global-varibale-in-a-ruby-file-chef/43083318#43083318", "title": "difference between node.run_state vs global varibale in a ruby file chef", "body": "<p>So a few issues, first what you have there isn't a global variable, it's a local variable. Globals in Ruby start with <code>$</code>. Second, you can't assign to a local variable from an enclosing scope like that in Ruby (or, indeed, in most languages). That assignment just creates a second <code>dbpassword</code> local variable scoped to the block. You could, however, use a mutation rather than a variable assignment (e.g. <code>dbpassword &lt;&lt; whatever</code>). Third, you can't actually use <code>lazy</code> deeply inside the variables hash like that, it has to be at the top level. Fourth, you can straight up side-step all of this if you're only using the value you once like in that example:</p>\n\n<pre><code>template \"/config/properties\" do\n  source \"properties.erb\"\n  variables lazy { \n    secret_key = Chef::EncryptedDataBagItem.load_secret(\"/home/test/db_key\")\n    db_keys = Chef::EncryptedDataBagItem.load(\"mydatabag\", \"mydatabagitem\", secret_key)\n    {db_password: db_keys['DB_PASSWORD']}\n  }\nend\n</code></pre>\n\n<p>Just for completeness in case others find this via Google, with real global variables the biggest difference is unit testing, the run state is tied to the converge so individual unit tests won't see each other's values which is always nice (though of course you could work around this in your code).</p>\n"}], "owner": {"reputation": 5824, "user_id": 1065358, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/5c67a1a1fa9d56db3bd62a77a268baf8?s=128&d=identicon&r=PG", "display_name": "shiv455", "link": "https://stackoverflow.com/users/1065358/shiv455"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1028, "favorite_count": 0, "accepted_answer_id": 43083318, "answer_count": 1, "score": 0, "last_activity_date": 1490817737, "creation_date": 1490752448, "last_edit_date": 1490817737, "question_id": 43082907, "link": "https://stackoverflow.com/questions/43082907/difference-between-node-run-state-vs-global-varibale-in-a-ruby-file-chef", "title": "difference between node.run_state vs global varibale in a ruby file chef", "body": "<p>would like to know the difference and recommended approach to use between global variable vs node.run_state</p>\n\n<p><strong>test.rb</strong></p>\n\n<pre><code>dbpassword=''\n\n\nruby_block \"load_databag_secret\" do\n  block do\n    secret_key = Chef::EncryptedDataBagItem.load_secret(\"/home/test/db_key\")\n        db_keys = Chef::EncryptedDataBagItem.load(\"mydatabag\", \"mydatabagitem\", secret_key) \n    end\n    dbpassword=db_keys['DB_PASSWORD']\nnode.run_state['password']=db_keys['DB_PASSWORD']\n      end\n    end\n\nexecute \"Enable on hosts\" do\n\n  command lazy { \"echo #{node.run_state['password']} &gt; /home/app/db.txt\" }\nend\n\n    template \"/config/properties\" do\n            source \"properties.erb\"\n            variables(lazy {\n                         :db_password =&gt; { node.run_state['password'] },\n\n                      })\n</code></pre>\n\n<p>or using node.run_state['password'] in place of global variable in this .rb file</p>\n\n<p>Now execute command worked fine im able to see the password on the echoed file db.txt where as when i used lazy in template variables it outputed as empty value for db_password in template.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "ruby-on-rails-5", "net-http"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490753288, "post_id": 43082561, "comment_id": 73248846, "body": "If you return a JSON encoded string (i.e. &quot;success&quot;.to_json) it will be sent as the response body. By the way are you sure <code>20000</code> is a correct status code? not <code>200</code>?"}, {"owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "edited": false, "score": 0, "creation_date": 1490760288, "post_id": 43082561, "comment_id": 73250794, "body": "I would say send a <code>Hash</code> to the controller and then when you are sending it just doing a <code>.to_json</code> will make it into a json."}, {"owner": {"reputation": 35, "user_id": 4379526, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001496778713/picture?type=large", "display_name": "codex", "link": "https://stackoverflow.com/users/4379526/codex"}, "reply_to_user": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "edited": false, "score": 0, "creation_date": 1490799123, "post_id": 43082561, "comment_id": 73275351, "body": "@aks Thanks it worked"}, {"owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "edited": false, "score": 0, "creation_date": 1490799504, "post_id": 43082561, "comment_id": 73275691, "body": "@codex I posted it as the answer"}], "answers": [{"comments": [{"owner": {"reputation": 1818, "user_id": 1682353, "user_type": "registered", "accept_rate": 10, "profile_image": "https://graph.facebook.com/10155468468865860/picture?type=large", "display_name": "user123456", "link": "https://stackoverflow.com/users/1682353/user123456"}, "edited": false, "score": 0, "creation_date": 1574976087, "post_id": 43097182, "comment_id": 104425906, "body": "still returning html for me"}], "tags": [], "owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "is_accepted": true, "score": 1, "last_activity_date": 1490799483, "creation_date": 1490799483, "answer_id": 43097182, "question_id": 43082561, "link": "https://stackoverflow.com/questions/43082561/how-to-i-get-ruby-to-return-json-response-to-be-used-in-rails-controller/43097182#43097182", "title": "How to i get ruby to return json response to be used in rails controller", "body": "<p>I would say send a <code>Hash</code> to the controller and then when you are sending it just doing a <code>.to_json</code> will make it into a json</p>\n"}], "owner": {"reputation": 35, "user_id": 4379526, "user_type": "registered", "accept_rate": 75, "profile_image": "https://graph.facebook.com/100001496778713/picture?type=large", "display_name": "codex", "link": "https://stackoverflow.com/users/4379526/codex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1884, "favorite_count": 0, "accepted_answer_id": 43097182, "answer_count": 1, "score": 2, "last_activity_date": 1490799483, "creation_date": 1490749930, "question_id": 43082561, "link": "https://stackoverflow.com/questions/43082561/how-to-i-get-ruby-to-return-json-response-to-be-used-in-rails-controller", "title": "How to i get ruby to return json response to be used in rails controller", "body": "<p>I'm working with an Api, so far so good i am able to send requests and receive response, but i want the ruby code to send the json response and message that can be accessible from my rails controller so that i can get simple_form to render the error or success messages and also handle redirection from the rails controller, i also want to save transaction details from the response in a model, here's my lib code</p>\n\n<pre><code>class SimplePay\n  require 'net/https'\n  require 'uri'\n  require 'json'\n\n  def self.pay(api_key, token, amount, amount_currency, status)\n    uri = URI.parse('https://checkout.simplepay.ng/v2/payments/card/charge/')\n    header = {'Content-Type': 'text/json'}\n    data = {\n        'token': token,\n        'amount': amount,\n        'amount_currency': amount_currency\n    }\n    http = Net::HTTP.new(uri.host, uri.port)\n    request = Net::HTTP::Post.new(uri.request_uri, header)\n    http.use_ssl = true\n    http.verify_mode = OpenSSL::SSL::VERIFY_NONE\n    request = Net::HTTP::Post.new(uri.request_uri, header)\n    request.basic_auth(api_key, '')\n    request.set_form_data(data)\n\n    response = http.request(request)\n    res = JSON.parse(response.read_body)\n    response_code =  res['response_code']\n    if response.kind_of? Net::HTTPSuccess\n      if response_code.eql? 20000\n        puts 'success'\n      else\n        puts 'Failed'\n      end\n    elsif status.eql? true\n      puts 'Success But Not Charged'\n    elsif status.eql? false\n      raise error 'Failed To Charge Card'\n    elsif response.kind_of? Net::HTTPBadRequest\n      raise error 'Failed 400'\n    elsif response.kind_of? Net::HTTPError\n      raise error 'Failed 404'\n    else\n      raise error 'Unknown Error'\n    end\n  end\nend\n</code></pre>\n\n<p>How do i go about achieving this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490750108, "post_id": 43082262, "comment_id": 73247984, "body": "I can&#39;t figure it out. Don&#39;t call the <code>test_code</code> &#175;_(\u30c4)_/&#175;"}, {"owner": {"reputation": 11, "user_id": 7782856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1293760814038393/picture?type=large", "display_name": "Vinicius Mello", "link": "https://stackoverflow.com/users/7782856/vinicius-mello"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490752676, "post_id": 43082262, "comment_id": 73248677, "body": "This is a simplification of the real code... a need that function.... Well i could work out the code so i don&#39;t need to change the variable, but im really curious about the reason for this bug"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1490770605, "post_id": 43082262, "comment_id": 73254854, "body": "Nitpicking, but the instance variable does not change, it still refers to the very same object. It&#39;s the object that is being changed."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7782856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1293760814038393/picture?type=large", "display_name": "Vinicius Mello", "link": "https://stackoverflow.com/users/7782856/vinicius-mello"}, "edited": false, "score": 0, "creation_date": 1490809453, "post_id": 43083078, "comment_id": 73282779, "body": "But why that doesn&#39;t happen normally? If a assign a variable  (a = b) and change the value of &#39;b&#39; it doesn&#39;t change &#39;a&#39;... Whats the difference? And how can I assign the value of code to the @plays array without linking them?"}, {"owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "reply_to_user": {"reputation": 11, "user_id": 7782856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1293760814038393/picture?type=large", "display_name": "Vinicius Mello", "link": "https://stackoverflow.com/users/7782856/vinicius-mello"}, "edited": false, "score": 0, "creation_date": 1490817136, "post_id": 43083078, "comment_id": 73287500, "body": "That&#39;s only correct for simple values like integers. otherwise, <code>a=b</code> results in a and b referring to the same object. Read up on the difference between values and references. <a href=\"https://launchschool.com/blog/references-and-mutability-in-ruby\" rel=\"nofollow noreferrer\">Variable References and Mutability of Ruby Objects</a>"}, {"owner": {"reputation": 11, "user_id": 7782856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1293760814038393/picture?type=large", "display_name": "Vinicius Mello", "link": "https://stackoverflow.com/users/7782856/vinicius-mello"}, "edited": false, "score": 0, "creation_date": 1490829692, "post_id": 43083078, "comment_id": 73292936, "body": "Thanks for the help and patience, I will read more and work on the code. I just started programming, so I&#39;m trying to understand the bugs i get. Really impressed with this community and it&#39;s willing to help  =)"}], "tags": [], "owner": {"reputation": 3032, "user_id": 4695439, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J87l8.png?s=128&g=1", "display_name": "Jim U", "link": "https://stackoverflow.com/users/4695439/jim-u"}, "is_accepted": false, "score": 1, "last_activity_date": 1490753568, "creation_date": 1490753568, "answer_id": 43083078, "question_id": 43082262, "link": "https://stackoverflow.com/questions/43082262/why-is-my-instance-variable-changing-indirectly/43083078#43083078", "title": "Why is my instance variable changing indirectly?", "body": "<p>The assignment operator <code>=</code> does not make a copy of an object. It makes a new reference (i.e., pointer) to the object.</p>\n\n<p>You can use <code>clone</code> to create a shallow copy of an object as follows:</p>\n\n<pre><code>...\ns_code = @secret_code.clone\n...\ndef test_code(code0)\n  code = code0.clone\n...\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7782856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1293760814038393/picture?type=large", "display_name": "Vinicius Mello", "link": "https://stackoverflow.com/users/7782856/vinicius-mello"}, "edited": false, "score": 0, "creation_date": 1490810003, "post_id": 43088701, "comment_id": 73283118, "body": "Ok, I understand that, but how can i pass the value of code to the array and not the variable it self. This doesn&#39;t happens normally in my codes, when i assign a variable &quot;a&quot; to a variable &quot;b = 4&quot; what happens is that the value of &quot;b&quot; (4) passes to &quot;a&quot;, so when i change b it doesn&#39;t change &quot;a&quot;. Whats special about my case?"}, {"owner": {"reputation": 46, "user_id": 7784239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ebcd007e24848a38afd6420fc7633b?s=128&d=identicon&r=PG&f=1", "display_name": "W.Ranger", "link": "https://stackoverflow.com/users/7784239/w-ranger"}, "reply_to_user": {"reputation": 11, "user_id": 7782856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1293760814038393/picture?type=large", "display_name": "Vinicius Mello", "link": "https://stackoverflow.com/users/7782856/vinicius-mello"}, "edited": false, "score": 0, "creation_date": 1490834672, "post_id": 43088701, "comment_id": 73294323, "body": "For the simple values like integers, it&#39;s true the value pass to variable. Please see the comments by Jim U."}, {"owner": {"reputation": 46, "user_id": 7784239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ebcd007e24848a38afd6420fc7633b?s=128&d=identicon&r=PG&f=1", "display_name": "W.Ranger", "link": "https://stackoverflow.com/users/7784239/w-ranger"}, "reply_to_user": {"reputation": 11, "user_id": 7782856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1293760814038393/picture?type=large", "display_name": "Vinicius Mello", "link": "https://stackoverflow.com/users/7782856/vinicius-mello"}, "edited": false, "score": 0, "creation_date": 1490834865, "post_id": 43088701, "comment_id": 73294373, "body": "but for the rest scenarios, Ruby passes the quote to the variable. If you want to pass the value, you can use the &quot;clone&quot; or &quot;dup&quot; method. See below:  code = [&quot;red&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;] plays = code.clone  # or plays = code.dup code[0] = &quot;indigo&quot; p plays   #=&gt; [&quot;yellow&quot;, &quot;blue&quot;, &quot;blue&quot;, &quot;blue&quot;]"}], "tags": [], "owner": {"reputation": 46, "user_id": 7784239, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a4ebcd007e24848a38afd6420fc7633b?s=128&d=identicon&r=PG&f=1", "display_name": "W.Ranger", "link": "https://stackoverflow.com/users/7784239/w-ranger"}, "is_accepted": false, "score": 0, "last_activity_date": 1490833765, "last_edit_date": 1490833765, "creation_date": 1490777418, "answer_id": 43088701, "question_id": 43082262, "link": "https://stackoverflow.com/questions/43082262/why-is-my-instance-variable-changing-indirectly/43088701#43088701", "title": "Why is my instance variable changing indirectly?", "body": "<p>you defined the @plays like this:</p>\n\n<pre><code>  def insert_code(code)  \n    @plays.push(code)          # here is not a clone but a quote\n  end  \n</code></pre>\n\n<p>after running the methond \"test_code\", the variable \"code\" is changed to [\"check\", \"red\", \"red\", \"red\"]\nso you see the @plays is also changed to [[\"check\", \"red\", \"red\", \"red\"]]</p>\n"}], "owner": {"reputation": 11, "user_id": 7782856, "user_type": "registered", "profile_image": "https://graph.facebook.com/1293760814038393/picture?type=large", "display_name": "Vinicius Mello", "link": "https://stackoverflow.com/users/7782856/vinicius-mello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1490833765, "creation_date": 1490747621, "question_id": 43082262, "link": "https://stackoverflow.com/questions/43082262/why-is-my-instance-variable-changing-indirectly", "title": "Why is my instance variable changing indirectly?", "body": "<p>I'm a starter at ruby, and I'm really stuck with this code... I can't understand why is @plays changing when a call test_code</p>\n\n<pre><code>class Board\n  attr_reader :plays\n\n  def initialize(secret_code)  \n    @secret_code = secret_code\n    @plays = []               \n  end\n\n  def insert_code(code)  \n    @plays.push(code)          \n    p @plays         #-&gt; [[\"red\", \"red\", \"red\", \"red\"]]\n    test_code(code)  #-&gt; When i call this method the changes on 'code' make to '@plays' array...\n    p @plays         #-&gt; [[\"check\", \"red\", \"red\", \"red\"]]\n  end\n\n  private\n\n  def test_code(code)\n    s_code = @secret_code  # made a copy of @secret_code to keep it intact but is changing just like @plays\n    s_code.each_index do |i|\n      if s_code[i] == code[i]\n        s_code[i] = \"O\"\n        code[i] = \"check\"  #in this line the @plays array is changed, and i can't figure out why\n      end\n    end\n  end\nend\n\nboard = Board.new([\"red\", \"blue\", \"blue\", \"blue\"])\nboard.insert_code([\"red\", \"red\", \"red\", \"red\"])\n</code></pre>\n"}, {"tags": ["ruby", "mechanize"], "comments": [{"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1490755292, "post_id": 43082125, "comment_id": 73249371, "body": "It means there&#39;s no form on that page."}, {"owner": {"reputation": 606, "user_id": 5143565, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/UL3LT.jpg?s=128&g=1", "display_name": "Rubyx", "link": "https://stackoverflow.com/users/5143565/rubyx"}, "reply_to_user": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1490784478, "post_id": 43082125, "comment_id": 73263853, "body": "But there is one form <code>&lt;form action=&quot;&#47;contact&#47;&quot; method=&quot;post&quot;&gt;</code>, why Mechanize doesn&#39;t detect it?"}, {"owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "edited": false, "score": 0, "creation_date": 1490845577, "post_id": 43082125, "comment_id": 73296964, "body": "If you look closely at the page source you&#39;ll see that there&#39;s not really a form there."}], "owner": {"reputation": 606, "user_id": 5143565, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/UL3LT.jpg?s=128&g=1", "display_name": "Rubyx", "link": "https://stackoverflow.com/users/5143565/rubyx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490746694, "creation_date": 1490746694, "question_id": 43082125, "link": "https://stackoverflow.com/questions/43082125/cant-fill-form-wihtout-name-with-mechanize", "title": "Can&#39;t fill form wihtout name with mechanize", "body": "<p>I'm trying to fill a form with mechanize, the form has no <code>name</code> or <code>id</code>.</p>\n\n<p>This is my code:</p>\n\n<pre><code>require 'mechanize'\n\na = Mechanize.new\npage = a.get(\"http://www.lauradesmaison.book.fr/contact/\")\nform = page.form()\nform['nom'] = \"Name\"\nform['societe'] = \"Society\"\nform['email'] = \"user@mail.com\"\nform['tel'] = \"0123456789\"\nform['texte'] = \"My message\"\nbutton = form.button_with(:name =&gt; \"submit-contact\")\npage = a.submit(form, button)\n\nputs \"Message has been sent.\"\n</code></pre>\n\n<p>But I have an <code>undefined method</code>[]<code>=' for nil:NilClass</code> error line 6.</p>\n\n<p>I tried with <code>form = page.forms[0]</code> but same error.\nAny idea?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-drive-api"], "comments": [{"owner": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1490749819, "post_id": 43082097, "comment_id": 73247920, "body": "I suggest you to use an official gem from google here <a href=\"https://github.com/google/google-api-ruby-client\" rel=\"nofollow noreferrer\">google-api-ruby</a> and this for gdrive documentation in ruby <a href=\"https://developers.google.com/drive/v3/web/quickstart/ruby\" rel=\"nofollow noreferrer\">developers.google.com/drive/v3/web/quickstart/ruby</a>"}, {"owner": {"reputation": 502, "user_id": 1731195, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/05863adbed3a673ae6a94a9e10527687?s=128&d=identicon&r=PG", "display_name": "Overt_Agent", "link": "https://stackoverflow.com/users/1731195/overt-agent"}, "reply_to_user": {"reputation": 7972, "user_id": 1297435, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/a9a1330f0e323fabed39f561f1b0d94c?s=128&d=identicon&r=PG", "display_name": "rails_id", "link": "https://stackoverflow.com/users/1297435/rails-id"}, "edited": false, "score": 0, "creation_date": 1490750308, "post_id": 43082097, "comment_id": 73248035, "body": "@rails_id thanks for your response. No offense, but that&#39;s not something I can switch to at the moment- the rest of the code works and it&#39;s not worth refactoring half of a project purely to improve 2 lines."}], "owner": {"reputation": 502, "user_id": 1731195, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/05863adbed3a673ae6a94a9e10527687?s=128&d=identicon&r=PG", "display_name": "Overt_Agent", "link": "https://stackoverflow.com/users/1731195/overt-agent"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1596062407, "creation_date": 1490746473, "last_edit_date": 1596062407, "question_id": 43082097, "link": "https://stackoverflow.com/questions/43082097/easier-way-of-getting-google-drive-auth-code", "title": "Easier way of getting google-drive auth code", "body": "<p>I'm trying to run a Rails app using the <a href=\"https://github.com/gimite/google-drive-ruby\" rel=\"nofollow noreferrer\">google-drive-ruby</a> gem, and getting the authorization code is currently slightly unwieldy- after redirecting from google the auth code is returned in the URL of the page like so:</p>\n<p><code>localhost:3000/g_auths/redir?code=4/[code]</code></p>\n<p>So at the moment I'm getting at the code with this slightly unwieldy snip:</p>\n<pre><code>authorization_code = request.original_url.to_s\nauthorization_code = authorization_code[g_auths_redir_url.to_s.length + 6..-1] + '#'\n</code></pre>\n<p>Now, while this does give the correct code, I wonder if there is an easier and more dynamic way of doing this?</p>\n"}, {"tags": ["ruby", "string-literals", "rubocop"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1491048374, "last_edit_date": 1491048374, "creation_date": 1490768745, "answer_id": 43085886, "question_id": 43081759, "link": "https://stackoverflow.com/questions/43081759/rubocop-mutableconstant-not-observing-frozen-string-literal-comment/43085886#43085886", "title": "Rubocop MutableConstant not observing frozen string literal comment", "body": "<p>Not every check makes sense for all Ruby versions. Tell RuboCop the Ruby version to check against. </p>\n\n<p>Add the following to your <code>.rubocop.yml</code>:</p>\n\n<pre><code>AllCops:\n  TargetRubyVersion: 2.3\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 4236926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ae2265aeb462a8eda771aae131ace75?s=128&d=identicon&r=PG&f=1", "display_name": "Inityx", "link": "https://stackoverflow.com/users/4236926/inityx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 547, "favorite_count": 0, "accepted_answer_id": 43085886, "answer_count": 1, "score": 5, "last_activity_date": 1491048374, "creation_date": 1490744251, "question_id": 43081759, "link": "https://stackoverflow.com/questions/43081759/rubocop-mutableconstant-not-observing-frozen-string-literal-comment", "title": "Rubocop MutableConstant not observing frozen string literal comment", "body": "<p>I'm using RuboCop 0.46.0 and Ruby 2.3.1.</p>\n\n<h3>.rubocop.yml</h3>\n\n<pre><code>Style/FrozenStringLiteralComment:\n  EnforcedStyle: always\n</code></pre>\n\n<h3>constant.rb</h3>\n\n<pre><code># frozen_string_literal: true\n\nMY_CONSTANT = 'mystring'\n</code></pre>\n\n<p>When run, <code>rubocop -D</code> returns this:</p>\n\n<pre><code>Inspecting 1 file\nC\n\nOffenses:\n\nconstant.rb:3:15: C: Style/MutableConstant: Freeze mutable objects assigned to constants.\nMY_CONSTANT = 'mystring'\n              ^^^^^^^^^^\n\n1 file inspected, 1 offense detected\n</code></pre>\n\n<p>Is there a reason MutableConstant isn't observing my frozen string literal comment?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord", "enums"], "answers": [{"tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": true, "score": 4, "last_activity_date": 1490776940, "creation_date": 1490776940, "answer_id": 43088525, "question_id": 43081716, "link": "https://stackoverflow.com/questions/43081716/activerecordenum-pginvalidtextrepresentation-error-invalid-input-syntax/43088525#43088525", "title": "ActiveRecord::Enum - PG::InvalidTextRepresentation: ERROR: invalid input syntax for integer:", "body": "<p>This works on ror5.</p>\n\n<pre><code>JobPosting.joins(job: :organization).where(organizations: \n{ department: Organization.departments['conferences'] }) \n</code></pre>\n\n<p>I'm not even sure if <code>enum</code> was <a href=\"http://apidock.com/rails/v4.1.8/ActiveRecord/Enum/enum\" rel=\"nofollow noreferrer\">available</a> in ror3.</p>\n"}, {"tags": [], "owner": {"reputation": 384, "user_id": 7774072, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ec9d356ec80acef193cd97914b9e67c4?s=128&d=identicon&r=PG&f=1", "display_name": "AlexeyKuznetsov", "link": "https://stackoverflow.com/users/7774072/alexeykuznetsov"}, "is_accepted": false, "score": 1, "last_activity_date": 1490822888, "creation_date": 1490822888, "answer_id": 43104462, "question_id": 43081716, "link": "https://stackoverflow.com/questions/43081716/activerecordenum-pginvalidtextrepresentation-error-invalid-input-syntax/43104462#43104462", "title": "ActiveRecord::Enum - PG::InvalidTextRepresentation: ERROR: invalid input syntax for integer:", "body": "<p>Other way is to set text-based enums. In my opinion it is the best way for enum:</p>\n\n<pre><code>DEPARTMENTS_ENUM = [:conferences, :design_teams, :services, :clubs, :events, :communications]\nenum department: Hash[*DEPARTMENTS_ENUM.collect{|v| [v, v]}.flatten()]\n</code></pre>\n\n<p>It will work after department column type will change.</p>\n\n<pre><code>Organization.where(department: 'conferences')\n</code></pre>\n\n<p>Will work too</p>\n"}, {"tags": [], "owner": {"reputation": 1072, "user_id": 4237897, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/5b4e4693ad8791b9c8056b8481276fb8?s=128&d=identicon&r=PG&f=1", "display_name": "bormat", "link": "https://stackoverflow.com/users/4237897/bormat"}, "is_accepted": false, "score": 0, "last_activity_date": 1605547359, "creation_date": 1605547359, "answer_id": 64862686, "question_id": 43081716, "link": "https://stackoverflow.com/questions/43081716/activerecordenum-pginvalidtextrepresentation-error-invalid-input-syntax/64862686#64862686", "title": "ActiveRecord::Enum - PG::InvalidTextRepresentation: ERROR: invalid input syntax for integer:", "body": "<p>I am not directly answering the question but as it is the first link on google when  we search <code>PG::InvalidTextRepresentation: ERROR: invalid input value for enum</code></p>\n<p>it can help:</p>\n<p>it is possible to declare our enum like this, this way it will not convert the string to an integer but let this job to postgresql.</p>\n<p><code> enum provider: { ig: &quot;ig&quot;, fb: &quot;fb&quot;, powertrack: &quot;powertrack&quot;, gnip: &quot;gnip&quot; }</code></p>\n"}], "owner": {"reputation": 383, "user_id": 1959893, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/4d1ca3a7ff087217b6dbdac3a9d610fa?s=128&d=identicon&r=PG", "display_name": "Robert Saunders", "link": "https://stackoverflow.com/users/1959893/robert-saunders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2502, "favorite_count": 0, "accepted_answer_id": 43088525, "answer_count": 3, "score": 1, "last_activity_date": 1605547359, "creation_date": 1490744028, "question_id": 43081716, "link": "https://stackoverflow.com/questions/43081716/activerecordenum-pginvalidtextrepresentation-error-invalid-input-syntax", "title": "ActiveRecord::Enum - PG::InvalidTextRepresentation: ERROR: invalid input syntax for integer:", "body": "<p>I am having a strange error and was hoping someone could point me in the right direction. I have a model called Organizations, and a attribute called <code>department</code>, see the excerpt from the schema below: </p>\n\n<pre><code>t.integer  \"department\",  default: 0\n</code></pre>\n\n<p>Inside my model have defined my enums for this attribute, as I am using <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Enum.html\" rel=\"nofollow noreferrer\">ActiveRecord::Enum</a>, like below:</p>\n\n<pre><code>enum department: [:conferences, :design_teams, :services, :clubs, :events, :communications]\n</code></pre>\n\n<p>But when I query, <code>JobPosting.joins(job: :organization).where(organizations: { department: 'conferences' })</code> I get an error that reads:</p>\n\n<p><code>PG::InvalidTextRepresentation: ERROR:  invalid input syntax for integer: \"conferences\"</code></p>\n\n<p>FYI: An Organization has_many Jobs, and Job has_many JobPostings.</p>\n\n<p>But when I query <code>Organization.where(department: 'conferences')</code> it works.</p>\n\n<p>Any help would be greatly appreciated.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql"], "answers": [{"comments": [{"owner": {"reputation": 4637, "user_id": 561626, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3790f182f1f615744b24f912ed6b937?s=128&d=identicon&r=PG", "display_name": "ExiRe", "link": "https://stackoverflow.com/users/561626/exire"}, "edited": false, "score": 0, "creation_date": 1490744809, "post_id": 43081736, "comment_id": 73246716, "body": "I don&#39;t need to remove it <code>count(distinct email_id) as emails_count</code> since I still need that information but your code is exactly what I needed! Thank you!"}], "tags": [], "owner": {"reputation": 4570, "user_id": 1385774, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6z25x.jpg?s=128&g=1", "display_name": "maSTAShuFu", "link": "https://stackoverflow.com/users/1385774/mastashufu"}, "is_accepted": true, "score": 2, "last_activity_date": 1490744150, "creation_date": 1490744150, "answer_id": 43081736, "question_id": 43081670, "link": "https://stackoverflow.com/questions/43081670/how-can-i-count-field-value-based-on-another-field/43081736#43081736", "title": "How can I count field value based on another field?", "body": "<p>replace this</p>\n\n<pre><code>count(distinct email_id) as emails_count\n</code></pre>\n\n<p>to  something like in SQLServer using case or IIF</p>\n\n<pre><code>sum(case when type = 'OpenEmailEvent' then 1 else 0 end)  [Opens],\nsum(case when type = 'ClickEmailEvent' then 1 else 0 end)  [Click],\n</code></pre>\n"}], "owner": {"reputation": 4637, "user_id": 561626, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a3790f182f1f615744b24f912ed6b937?s=128&d=identicon&r=PG", "display_name": "ExiRe", "link": "https://stackoverflow.com/users/561626/exire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 43081736, "answer_count": 1, "score": 0, "last_activity_date": 1490744844, "creation_date": 1490743730, "last_edit_date": 1490744844, "question_id": 43081670, "link": "https://stackoverflow.com/questions/43081670/how-can-i-count-field-value-based-on-another-field", "title": "How can I count field value based on another field?", "body": "<p>I have <code>EmailEvent</code> table. This is STI table which stores opens and clicks (by using <code>type</code> attribute). I have right now this code which provides information on how many emails use recipient address (<code>email_address</code> field):</p>\n\n<pre><code>EmailEvent.where(\"type = 'OpenEmailEvent' OR type = 'ClickEmailEvent'\")\n.where(email_id: email_ids).happened_between_dates(start_date, end_date)\n.select(\"email_address, count(distinct email_id) as emails_count\")\n.group(:email_address).reorder(nil)\n</code></pre>\n\n<p>It generates such code:</p>\n\n<pre><code>SELECT email_address, count(distinct email_id) as emails_count \nFROM \"email_events\" \nWHERE \"email_events\".\"deleted_at\" IS NULL \n    AND (type = 'OpenEmailEvent' OR type = 'ClickEmailEvent') \n    AND \"email_events\".\"email_id\" IN (85487, 75554, 85489, 77184, 78562, 75587, 82879, 85535, 85534) \n    AND (created_at between '2017-02-28 22:52:01.000000' AND '2017-03-29 05:59:59.000000') \nGROUP BY \"email_events\".\"email_address\"\n</code></pre>\n\n<p>I need to provide information on how many opens and clicks there per <code>email_address</code>. I can't use <code>count(id)</code> because it'll give me both opens and clicks so I need to use <code>type</code> attribute somehow but I can't figure out exactly how it should work. Can somebody give me suggestion what should I do here?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1490744657, "post_id": 43081429, "comment_id": 73246669, "body": "What is this <code>list</code> method? You don&#39;t show where it&#39;s defined."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1490744723, "post_id": 43081429, "comment_id": 73246693, "body": "Note: Most Ruby styleguides strongly encourage the use of names like <code>new_spr</code> in preference to <code>newSpr</code> as variable and method names should be lower-case only."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1490746082, "post_id": 43081429, "comment_id": 73247054, "body": "Please get in the habit of using standard indentation in your source. It helps everyone read your code, including your future you."}], "owner": {"reputation": 9, "user_id": 7782703, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e130112299617978fb3dfdaa64986129?s=128&d=identicon&r=PG&f=1", "display_name": "Marlos Gama", "link": "https://stackoverflow.com/users/7782703/marlos-gama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490742166, "creation_date": 1490742166, "question_id": 43081429, "link": "https://stackoverflow.com/questions/43081429/how-to-correctly-address-link-a-class-in-ruby", "title": "How to correctly address / link a class in ruby?", "body": "<p>Currently I have two classes that work together.</p>\n\n<p>The Graphics class has a list that receives all Sprite classes created as in the example below:</p>\n\n<p>Sprite:</p>\n\n<pre><code>def initialize(bitmap = nil, x = 0, y = 0, z = 0, opacity = 255)\n@bitmap = bitmap\n@x = x\n@y = y\n@z = z\n@opacity = opacity\n@viewport = nil\n\n@ox = 0\n@oy = 0\n\n@visible = true\n\nGraphics.newSpr(self)\nend\n</code></pre>\n\n<p>Graphics:</p>\n\n<pre><code>def self.newSpr(spr)\n@sprites = [] if @sprites.nil?\n@sprites.push(spr)\nend\n</code></pre>\n\n<p>I need everything that happens with the Sprite class OUTSIDE the Graphics list to be updated in the list as well.</p>\n\n<p>For example, if I run this code:</p>\n\n<pre><code>sprite = Sprite.new\nsprite.list[1] = 1\n</code></pre>\n\n<p>In the Graphic list the value of list [1] will still be null.</p>\n"}, {"tags": ["ruby", "ffi", "aerospike", "ruby-ffi"], "answers": [{"comments": [{"owner": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 0, "creation_date": 1490829467, "post_id": 43083097, "comment_id": 73292874, "body": "Hi Jan, I have found my mistake. Above I updated my post. The problem was in how I created the shared library. I included them when I compiled but forgot when I created shared library. This is the right way :  <code>gcc -shared  -o libfoo.so foo.o -laerospike -lssl -lcrypto -lpthread -lm -lz</code>"}, {"owner": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 1, "creation_date": 1490829680, "post_id": 43083097, "comment_id": 73292932, "body": "As for your question, I am trying to implement aggregation from Ruby. As far as I know Aerospike Ruby client does not support aggregation function (map reduce, etc.). Do you have any suggestion for alternative solution?"}, {"owner": {"reputation": 834, "user_id": 1573115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef104e52dbbf38b796179483816e20c9?s=128&d=identicon&r=PG", "display_name": "Jan Hecking", "link": "https://stackoverflow.com/users/1573115/jan-hecking"}, "reply_to_user": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 1, "creation_date": 1490918919, "post_id": 43083097, "comment_id": 73339001, "body": "@fade2black, you are right, the Ruby client does not support map-reduce-style aggregation using Lua User Defined Functions at the moment. I&#39;m happy to hear that you managed to get your work-around of linking to the C client using FFI working. For now, that&#39;s probably the best solution."}, {"owner": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 0, "creation_date": 1556460998, "post_id": 43083097, "comment_id": 98439096, "body": "Hi Jan, I am curious very much what it is that <a href=\"https://discuss.aerospike.com/t/udf-execution-error-1-while-using-ffi-ruby/6154\" rel=\"nofollow noreferrer\">does not allow using aggregation from Ruby</a>. Multithreading? Could you please explain?"}, {"owner": {"reputation": 834, "user_id": 1573115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef104e52dbbf38b796179483816e20c9?s=128&d=identicon&r=PG", "display_name": "Jan Hecking", "link": "https://stackoverflow.com/users/1573115/jan-hecking"}, "reply_to_user": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 0, "creation_date": 1556552433, "post_id": 43083097, "comment_id": 98468800, "body": "@fade2black, it would certainly be technically possible to implement aggregation support for the Ruby client. There seem to be at least two widely used gems that could bridge between Lua and Ruby (rufus-lua and rua), though I have never looked at them in detail. That it never got done is simply a matter of prioritization. We do not see a lot of demand for the Ruby client from our (paying) customers and therefore depend on the community to drive the development of the client."}, {"owner": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 0, "creation_date": 1556554099, "post_id": 43083097, "comment_id": 98469634, "body": "Cannot understand why I need Lua embedding in Ruby. I have created a C dynamic library (.so) from which I make calls to AS. I tested this library, it works fine from C itself. It works also fine from Ruby when I use non-aggr calls, but fails when aggregation is called."}, {"owner": {"reputation": 834, "user_id": 1573115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef104e52dbbf38b796179483816e20c9?s=128&d=identicon&r=PG", "display_name": "Jan Hecking", "link": "https://stackoverflow.com/users/1573115/jan-hecking"}, "reply_to_user": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 0, "creation_date": 1556683051, "post_id": 43083097, "comment_id": 98515890, "body": "Lua is required because the last step of the aggregation is executed on the client side. I.e. first each node aggregates the results of the query using the given Lua Stream UDF. All nodes then send their results back to the client. The client executes the same Lua Stream UDF locally to aggregate the partial results from each node.  Some Aerospike clients, like e.g. the Node.js client, are implemented as a wrapper around the C client library. The Ruby client on the other hand is implemented as a fully native client, i.e. without using the C client library underneath."}, {"owner": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 0, "creation_date": 1556831637, "post_id": 43083097, "comment_id": 98572261, "body": "I&#39;d like to create a simple Ruby community gem that would allow Ruby users make aggregation calls. Could you help at least to start off?"}, {"owner": {"reputation": 834, "user_id": 1573115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef104e52dbbf38b796179483816e20c9?s=128&d=identicon&r=PG", "display_name": "Jan Hecking", "link": "https://stackoverflow.com/users/1573115/jan-hecking"}, "reply_to_user": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 0, "creation_date": 1557136676, "post_id": 43083097, "comment_id": 98651621, "body": "Even if I was convinced that this is the right way to solve this particular issue, at the moment I do not have the time to contribute to this project myself."}, {"owner": {"reputation": 834, "user_id": 1573115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef104e52dbbf38b796179483816e20c9?s=128&d=identicon&r=PG", "display_name": "Jan Hecking", "link": "https://stackoverflow.com/users/1573115/jan-hecking"}, "reply_to_user": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 1, "creation_date": 1557496405, "post_id": 43083097, "comment_id": 98796152, "body": "@fade2black, see if this library meets your needs: <a href=\"https://github.com/Minus10Degrees/AerospikeCRuby\" rel=\"nofollow noreferrer\">github.com/Minus10Degrees/AerospikeCRuby</a>"}, {"owner": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "edited": false, "score": 0, "creation_date": 1557498229, "post_id": 43083097, "comment_id": 98797198, "body": "Thank you. I&#39;ll try it."}], "tags": [], "owner": {"reputation": 834, "user_id": 1573115, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef104e52dbbf38b796179483816e20c9?s=128&d=identicon&r=PG", "display_name": "Jan Hecking", "link": "https://stackoverflow.com/users/1573115/jan-hecking"}, "is_accepted": false, "score": 2, "last_activity_date": 1490753685, "creation_date": 1490753685, "answer_id": 43083097, "question_id": 43081352, "link": "https://stackoverflow.com/questions/43081352/general-name-free-error-when-using-aerospike-from-ruby/43083097#43083097", "title": "GENERAL_NAME_free error when using Aerospike from Ruby", "body": "<p>It looks like the symbol <code>GENERAL_NAME_free</code> is defined by OpenSSL's crypto library according to this <a href=\"https://www.openssl.org/docs/man1.1.0/crypto/GENERAL_NAME_free.html\" rel=\"nofollow noreferrer\">man page</a> and this OpenSSL <a href=\"http://openssl.6102.n7.nabble.com/GENERAL-NAME-free-td6830.html\" rel=\"nofollow noreferrer\">forum post</a>. So you are probably missing the libcrypto library.</p>\n\n<p>But I'm curious, why you are using the Aerospike C client library for your Ruby program instead of using the <a href=\"https://github.com/aerospike/aerospike-client-ruby\" rel=\"nofollow noreferrer\">Aerospike Ruby client</a>? Is there some specific functionality in the C client that is missing from the Ruby client?</p>\n"}], "owner": {"reputation": 477, "user_id": 2454958, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/600879854c516cd3b5c1df1817f008f2?s=128&d=identicon&r=PG", "display_name": "fade2black", "link": "https://stackoverflow.com/users/2454958/fade2black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 484, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1490974527, "creation_date": 1490741693, "last_edit_date": 1490974527, "question_id": 43081352, "link": "https://stackoverflow.com/questions/43081352/general-name-free-error-when-using-aerospike-from-ruby", "title": "GENERAL_NAME_free error when using Aerospike from Ruby", "body": "<p>I am trying to create a simple shared library <code>libfoo.so</code> which opens a connection to Aerospike server using a single function, waits for 3 seconds and closes the connection. <code>libfoo.so</code> has a single function <code>open_then_close(char* host, int port)</code>. </p>\n\n<p>Then I want to invoke this function from Ruby using FFI: </p>\n\n<pre><code>require 'ffi'\n\nmodule Aerospike\n  extend FFI::Library\n  ffi_lib  \"./libfoo.so\", \"libaerospike.so\"\n  attach_function :connect_then_close, [:string, :int], :int\nend\n\nputs Aerospike.connect_then_close(\"127.0.0.1\", 3000)  \n</code></pre>\n\n<p>I tested <code>foolib.so</code> using a C program, it works fine. However when I try to run the above code I get the following error:</p>\n\n<pre><code>Could not open library '/usr/lib/libaerospike.so': /usr/lib/libaerospike.so: undefined symbol: GENERAL_NAME_free (LoadError)\n</code></pre>\n\n<p>Additional info:</p>\n\n<pre><code>$ ldd /usr/lib/libaerospike.so\n    linux-vdso.so.1 =&gt;  (0x00007ffe413cb000)\n    libc.so.6 =&gt; /lib/x86_64-linux-gnu/libc.so.6 (0x00007f2ec87a3000)\n    /lib64/ld-linux-x86-64.so.2 (0x00005645069a7000)\n\n$ nm -u /usr/lib/libaerospike.so | grep GENERAL_NAME_free\n       U GENERAL_NAME_free\n</code></pre>\n\n<p>Any idea what is wrong?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<pre><code>$ dpkg -l | grep libgcrypt\n  ii  libgcrypt11:amd64       1.5.3-2ubuntu4.3        amd64        LGPL Crypto library - runtime library\n\n$ locate libcrypto\n  /lib/x86_64-linux-gnu/libcrypto.so.1.0.0\n  /usr/lib/x86_64-linux-gnu/libcrypto.a\n  /usr/lib/x86_64-linux-gnu/libcrypto.so\n  /usr/lib/x86_64-linux-gnu/pkgconfig/libcrypto.pc\n</code></pre>\n\n<p>This is how I compiled and created <code>libfoo.so</code></p>\n\n<pre><code>$ gcc -Wall -c -fPIC foo.c -o foo.o -laerospike -lssl -lcrypto -lpthread -lm -lz\n</code></pre>\n\n<p>Linking the wrong way:</p>\n\n<pre><code>$ gcc -shared -o libfoo.so foo.o\n</code></pre>\n"}, {"tags": ["ruby", "nokogiri"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490745242, "post_id": 43081351, "comment_id": 73246830, "body": "<code>in.rb</code> is an HTML file?"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1490745185, "creation_date": 1490745185, "answer_id": 43081910, "question_id": 43081351, "link": "https://stackoverflow.com/questions/43081351/how-to-remove-characters-in-string-after-email/43081910#43081910", "title": "How to remove characters in string after email", "body": "<p>You could always chop off anything after the <code>?</code> character:</p>\n\n<pre><code>addresses.map! do |address|\n  address.sub(/\\?.*/, '')\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1490746791, "creation_date": 1490746791, "answer_id": 43082144, "question_id": 43081351, "link": "https://stackoverflow.com/questions/43081351/how-to-remove-characters-in-string-after-email/43082144#43082144", "title": "How to remove characters in string after email", "body": "<p>I'd probably use one of these two:</p>\n\n<pre><code>str = 'joe@example.com?subject=My Business Is Dying'\n\nstr.split('?').first # =&gt; \"joe@example.com\"\nstr[/^[^?]+/] # =&gt; \"joe@example.com\"\n</code></pre>\n\n<p>The second is a simple regular expression embedded in <a href=\"https://ruby-doc.org/core-2.4.1/String.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">String's <code>[]</code> (slice) method</a>. The pattern basically says \"start at the beginning and grab everything up until a question mark.\" </p>\n\n<p>They're equivalent as far as speed goes. I'd probably use the first because it's easier to read.</p>\n"}], "owner": {"reputation": 119, "user_id": 1589533, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/024f2c4d7da10f8d3153dc5386fd57cb?s=128&d=identicon&r=PG", "display_name": "MMark", "link": "https://stackoverflow.com/users/1589533/mmark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 43081910, "answer_count": 2, "score": 0, "last_activity_date": 1490811397, "creation_date": 1490741689, "last_edit_date": 1490811397, "question_id": 43081351, "link": "https://stackoverflow.com/questions/43081351/how-to-remove-characters-in-string-after-email", "title": "How to remove characters in string after email", "body": "<p>I'm using this code to list email addresses from a HTML page.</p>\n\n<pre><code>require 'nokogiri'\n\nselector = \"//a[starts-with(@href, \\\"mailto:\\\")]/@href\"\n\ndoc = Nokogiri::HTML.parse File.read 'in.rb'\n\nnodes = doc.xpath selector\n\naddresses = nodes.collect {|n| n.value[7..-1]}\n\nputs addresses\n</code></pre>\n\n<p>This is sample code I'm parsing:</p>\n\n<pre><code>&lt;a href=\"mailto:joe@example.com?subject=My Business Is Dying\"&gt;\n</code></pre>\n\n<p>But I'm getting more than just the email address. I'm getting this in my results:</p>\n\n<pre><code>joe@example.com?subject=My Business Is Dying\n</code></pre>\n\n<p>How do I drop off everything after the question mark so it's only the email address?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490740680, "post_id": 43081084, "comment_id": 73245441, "body": "And what did you try &quot;to ignore the &#39;/&#39; after 2016&quot;?"}, {"owner": {"reputation": 1, "user_id": 7405893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b6c6f2306c5b951a7f0411b3542ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Random Comp Genius", "link": "https://stackoverflow.com/users/7405893/random-comp-genius"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490740970, "post_id": 43081084, "comment_id": 73245525, "body": "@WiktorStribi\u017cew I tried using forward slash but that would be the end of the regular expression. That&#39;s why I could not get anywhere."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1490740994, "post_id": 43081084, "comment_id": 73245529, "body": "Heard of escaping special characters in a regex? A slash is a regex delimiter. Try <code>a[&#47;(.*)\\&#47;SessionData&#47;, 1]</code>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490744713, "post_id": 43081084, "comment_id": 73246690, "body": "You can also run the string through <code>Regexp.escape</code>"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490747218, "post_id": 43081084, "comment_id": 73247300, "body": "This smells like an &quot;<a href=\"https://meta.stackexchange.com/q/66377/153968\">XY Problem</a>&quot;."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1490749544, "post_id": 43081084, "comment_id": 73247855, "body": "The forward slash is <i>NOT a special regex character</i> that must be escaped. It is just a literal character with no other special meaning. Please don&#39;t listen, I&#39;m sick of seeing toothpics leaning."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490808012, "post_id": 43081084, "comment_id": 73281821, "body": "The forward slash has to be escaped when the pattern delimiter is also a forward slash. That people don&#39;t know alternate characters can be used with the <code>%r</code> literal is a different problem."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1490748376, "last_edit_date": 1490748376, "creation_date": 1490747578, "answer_id": 43082257, "question_id": 43081084, "link": "https://stackoverflow.com/questions/43081084/how-i-ignore-slashes-in-ruby-regular-expression/43082257#43082257", "title": "How I ignore slashes in Ruby Regular Expression", "body": "<p>Here's something to consider: URLs contain a \"path\", and that path can easily be extracted using URI, then munged using <a href=\"https://ruby-doc.org/core-2.4.1/File.html\" rel=\"nofollow noreferrer\">File's methods</a>.</p>\n\n<pre><code>require 'uri'\n\nuri = URI.parse('http://example.com/path/to/a/resource.xml')\nthe_path = uri.path # =&gt; \"/path/to/a/resource.xml\"\nFile.split(the_path) # =&gt; [\"/path/to/a\", \"resource.xml\"]\nFile.basename(the_path) # =&gt; \"resource.xml\"\nFile.extname(the_path) # =&gt; \".xml\"\nFile.basename(the_path, File.extname(the_path)) # =&gt; \"resource\"\nFile.dirname(the_path) # =&gt; \"/path/to/a\"\nFile.absolute_path('..', the_path) # =&gt; \"/path/to/a\"\n</code></pre>\n\n<p>There are more methods available, but that gives an idea of what can be done without having to get dirty.</p>\n\n<p>You can also start with String's <code>split</code>:</p>\n\n<pre><code>the_path.split('/') # =&gt; [\"\", \"path\", \"to\", \"a\", \"resource.xml\"]\n</code></pre>\n\n<p>then grab the chunks that way too.</p>\n\n<p>Bringing it all home:</p>\n\n<pre><code>the_path = 'CS 141 FALL 2016/SessionData/L1609211319.xml'\nFile.split(the_path) # =&gt; [\"CS 141 FALL 2016/SessionData\", \"L1609211319.xml\"]\nFile.basename(the_path) # =&gt; \"L1609211319.xml\"\nFile.extname(the_path) # =&gt; \".xml\"\nFile.basename(the_path, File.extname(the_path)) # =&gt; \"L1609211319\"\nFile.dirname(the_path) # =&gt; \"CS 141 FALL 2016/SessionData\"\n\nthe_path.split('/') # =&gt; [\"CS 141 FALL 2016\", \"SessionData\", \"L1609211319.xml\"]\n</code></pre>\n\n<p>and of course:</p>\n\n<pre><code>the_path.split('/').first # =&gt; \"CS 141 FALL 2016\"\n</code></pre>\n\n<p>Regular expressions are nice, but often there are effective ways of doing something without resorting to them. If you insist:</p>\n\n<pre><code>the_path = 'CS 141 FALL 2016/SessionData/L1609211319.xml'\nthe_path[ %r#^([^/]+)# ] # =&gt; \"CS 141 FALL 2016\"\n</code></pre>\n\n<p>Ruby's <code>%r</code> literal defines whatever is inside the delimiters as a regular expression. The <a href=\"https://ruby-doc.org/core-2.4.1/Regexp.html\" rel=\"nofollow noreferrer\">Regexp documentation</a> says:</p>\n\n<blockquote>\n  <p>Regexps are created using the <code>/.../</code> and <code>%r{...}</code> literals, and by the <code>Regexp::new</code> constructor.</p>\n</blockquote>\n\n<p>Knowing that, it's easy to step around the leaning-toothpick syndrome of dealing with <code>/.../</code> as delimiters, forcing the need to escape the delimiters if they're inside the pattern. This'd be the equivalent that only hints at the dragons that wait for the unwary:</p>\n\n<pre><code>the_path[ /^([^\\/]+)/ ] # =&gt; \"CS 141 FALL 2016\"\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7405893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/10b6c6f2306c5b951a7f0411b3542ce5?s=128&d=identicon&r=PG&f=1", "display_name": "Random Comp Genius", "link": "https://stackoverflow.com/users/7405893/random-comp-genius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 427, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490748376, "creation_date": 1490740140, "question_id": 43081084, "link": "https://stackoverflow.com/questions/43081084/how-i-ignore-slashes-in-ruby-regular-expression", "title": "How I ignore slashes in Ruby Regular Expression", "body": "<pre><code>a = 'CS 141 FALL 2016/SessionData/L1609211319.xml'\nClass = a.match(/(.*)SessionData/)\nclass = Class.to_s \nputs \"Class is \" + class \n</code></pre>\n\n<p>When I try to match the regular expression of that string it gives me \"CS 141 FALL 2016/\" When I tried to ignore the '/' after 2016 it didn't work. How do I do it?</p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1490744020, "post_id": 43081009, "comment_id": 73246477, "body": "That gem looks abandoned -- no updates for years. Its <a href=\"https://github.com/JohnColvin/jquery-scrollto-rails\" rel=\"nofollow noreferrer\">GitHub page</a>, however, recommends installing bower to get jQuery scrollTo working."}, {"owner": {"reputation": 11, "user_id": 7782552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75b8b9098370668497702d7d55d8f59?s=128&d=identicon&r=PG&f=1", "display_name": "Pete Lz", "link": "https://stackoverflow.com/users/7782552/pete-lz"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1490779623, "post_id": 43081009, "comment_id": 73260597, "body": "That&#39;s true...Thank youfor you reply"}], "owner": {"reputation": 11, "user_id": 7782552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a75b8b9098370668497702d7d55d8f59?s=128&d=identicon&r=PG&f=1", "display_name": "Pete Lz", "link": "https://stackoverflow.com/users/7782552/pete-lz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490739704, "creation_date": 1490739704, "question_id": 43081009, "link": "https://stackoverflow.com/questions/43081009/railties-5-0-on-rails-5-0-is-not-compatible-with-jquery-scrollto-rails-bundler", "title": "Railties 5.0 on Rails 5.0 is not compatible with jquery-scrollto-rails. Bundler can&#39;t find compatible gem for Railties 5.0.2", "body": "<p>I would like to use the scrollTo gem in Rails 5.0 and I am currently having an issue when running Bundle install and after having inserted the gem 'jquery-scrollto-rails' in my gemfile. There is a compatible problem with railties apparently and have no clue to solve it. Is anybody has an idea ? I will appreciate. Thank you.</p>\n\n<pre><code>Fetching gem metadata from https://rubygems.org/..........\nFetching version metadata from https://rubygems.org/..\nFetching dependency metadata from https://rubygems.org/.\nResolving dependencies...\nBundler could not find compatible versions for gem \"railties\":\nIn snapshot (Gemfile.lock):\nrailties (= 5.0.2)\n\nIn Gemfile:\ncoffee-rails (~&gt; 4.2) was resolved to 4.2.1, which depends on\n  railties (&lt; 5.2.x, &gt;= 4.0.0)\n\njquery-rails was resolved to 4.3.1, which depends on\n  railties (&gt;= 4.2.0)\n\njquery-scrollto-rails was resolved to 1.4.2, which depends on\n  railties (~&gt; 3.1)\n\nrails (~&gt; 5.0.2) was resolved to 5.0.2, which depends on\n  railties (= 5.0.2)\n\nsass-rails (~&gt; 5.0) was resolved to 5.0.6, which depends on\n  railties (&lt; 6, &gt;= 4.0.0)\n\nweb-console (&gt;= 3.3.0) was resolved to 3.4.0, which depends on\n  railties (&gt;= 5.0)\n\nRunning `bundle update` will rebuild your snapshot from scratch, using \nonly\nthe gems in your Gemfile, which may resolve the conflict.\n</code></pre>\n\n<p>Here is my gemfile :</p>\n\n<pre><code># Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '~&gt; 5.0.2'\n# Use postgresql as the database for Active Record\ngem 'pg', '~&gt; 0.18'\n# Use Puma as the app server\ngem 'puma', '~&gt; 3.0'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# See https://github.com/rails/execjs#readme for more supported \nruntimes\n# gem 'therubyracer', platforms: :ruby\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n\ngem \"jquery-scrollto-rails\"\n# Turbolinks makes navigating your web application faster. Read more: \nhttps://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: \nhttps://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\ngem 'bootstrap-sass'\n\ngem 'font-awesome-sass'\n\ngem 'simple_form'\n\ngem 'autoprefixer-rails'\n\ngem 'compass-rails'\n</code></pre>\n"}, {"tags": ["ruby", "hanami", "hanami-model"], "comments": [{"owner": {"reputation": 4457, "user_id": 4856698, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-YF1b0zyYypU/AAAAAAAAAAI/AAAAAAAAAB0/6hdTAeg_61s/photo.jpg?sz=128", "display_name": "NickGnd", "link": "https://stackoverflow.com/users/4856698/nickgnd"}, "edited": false, "score": 0, "creation_date": 1491039028, "post_id": 43080678, "comment_id": 73386124, "body": "Hi, <code>Hanami-Model</code> is based on <code>rom-rb</code>. Take a look at its documentation to find out to make a join query <a href=\"http://rom-rb.org/learn/sql/joins/\" rel=\"nofollow noreferrer\">rom-rb.org/learn/sql/joins</a>"}], "answers": [{"comments": [{"owner": {"reputation": 688, "user_id": 202613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/89806d4eddb1df26f1d75240011afa9d?s=128&d=identicon&r=PG", "display_name": "Mereghost", "link": "https://stackoverflow.com/users/202613/mereghost"}, "edited": false, "score": 0, "creation_date": 1494366670, "post_id": 43156257, "comment_id": 74795858, "body": "He can also do this as <code>aggregate(:comments).where(comments[:created_at].qualified =&gt; date_range).as(Post).to_a</code> since he has the one-to-many association defined."}], "tags": [], "owner": {"reputation": 287, "user_id": 3171006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7dfc74cd6e3194a22ef6fac2c51f0ae?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/3171006/anton"}, "is_accepted": true, "score": 12, "last_activity_date": 1491046207, "creation_date": 1491046207, "answer_id": 43156257, "question_id": 43080678, "link": "https://stackoverflow.com/questions/43080678/join-query-in-hanami-model/43156257#43156257", "title": "Join query in Hanami-model", "body": "<p>Hanami model based on rom, that's why you can use <code>Relation#join</code> method with a needful relation.</p>\n\n<p>For this you need to call <code>join</code> method for one relation and set other relation as an attribute:</p>\n\n<pre><code>class PostRepository &lt; Hanami::Repository\n  associations do\n    has_many :comments\n  end\n\n  # ...\n\n  def join_example(date_range)\n    posts    # =&gt; posts relation\n    comments # =&gt; comments relation\n\n\n    posts\n      .join(comments) # set relation object here\n      .where(comments[:created_at].qualified =&gt; date_range)\n      .as(Post).to_a\n  end\nend\n</code></pre>\n\n<p>And that's all.</p>\n\n<p>Some helpful links:</p>\n\n<ol>\n<li><a href=\"https://github.com/rom-rb/rom-sql/blob/master/spec/unit/relation/left_join_spec.rb\" rel=\"noreferrer\">rom-sql tests for <code>left_join</code></a></li>\n<li><a href=\"https://github.com/davydovanton/hanami-contributors/blob/master/lib/contributors/repositories/contributor_repository.rb#L11-L19\" rel=\"noreferrer\">A real example</a></li>\n</ol>\n"}], "owner": {"reputation": 1421, "user_id": 2399340, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8bcbc4be042297d06c4f64db21a08b5d?s=128&d=identicon&r=PG", "display_name": "WojciechKo", "link": "https://stackoverflow.com/users/2399340/wojciechko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 884, "favorite_count": 0, "accepted_answer_id": 43156257, "answer_count": 1, "score": 4, "last_activity_date": 1491046207, "creation_date": 1490738256, "last_edit_date": 1490743884, "question_id": 43080678, "link": "https://stackoverflow.com/questions/43080678/join-query-in-hanami-model", "title": "Join query in Hanami-model", "body": "<p>Is it possible to create join query in subclass of <code>Hanami::Repository</code>?</p>\n\n<p>I found that <a href=\"https://github.com/hanami/model/pull/228\" rel=\"nofollow noreferrer\">this</a> pull request implements this feature but I can't find it in current codebase.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 600, "user_id": 5994561, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh5.googleusercontent.com/-VGTzdts3mMw/AAAAAAAAAAI/AAAAAAAAADY/6Qwn_AVjnQI/photo.jpg?sz=128", "display_name": "sammms", "link": "https://stackoverflow.com/users/5994561/sammms"}, "edited": false, "score": 0, "creation_date": 1490738501, "post_id": 43080599, "comment_id": 73244620, "body": "I&#39;m just going to go ahead and ask the silly question, have you checked your database to make sure you don&#39;t have an empty review in there?"}], "answers": [{"tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": 0, "last_activity_date": 1490738272, "creation_date": 1490738272, "answer_id": 43080686, "question_id": 43080599, "link": "https://stackoverflow.com/questions/43080599/rails-app-extra-record-displaying/43080686#43080686", "title": "Rails app - extra record displaying", "body": "<p>I think it could be because of last line in <code>show</code>. </p>\n\n<pre><code>@review = @album.reviews.build\n</code></pre>\n\n<p>It builds an empty review.</p>\n"}, {"comments": [{"owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "edited": false, "score": 1, "creation_date": 1490819035, "post_id": 43080786, "comment_id": 73288476, "body": "Thank you for the extremely thorough answer!"}], "tags": [], "owner": {"reputation": 928, "user_id": 12852, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DvI9t.jpg?s=128&g=1", "display_name": "codegoalie", "link": "https://stackoverflow.com/users/12852/codegoalie"}, "is_accepted": true, "score": 2, "last_activity_date": 1490738671, "creation_date": 1490738671, "answer_id": 43080786, "question_id": 43080599, "link": "https://stackoverflow.com/questions/43080599/rails-app-extra-record-displaying/43080786#43080786", "title": "Rails app - extra record displaying", "body": "<p>The problem here is on the last line of your <code>show</code> method: <code>@review = @album.reviews.build</code>. This line not only creates a new <code>Review</code> instance and assigns it to <code>@review</code>, but it also adds that instance to the array in <code>@album.reviews</code>. So, in your view, when you iterate over <code>@album.reviews</code>, you will see all of the persisted reviews as well as the one new, not persisted review that was built with <code>build</code>.</p>\n\n<p>The easiest way to fix this would be to add this line in your view:</p>\n\n<pre><code>&lt;% @album.reviews.each do |r| %&gt;\n  &lt;% next unless r.persisted? %&gt;\n</code></pre>\n\n<p>Another solution would be to associate the new review with the album, but not on the <code>@album</code> instance. In the controller:</p>\n\n<pre><code>@review = Review.new(album: @album)\n</code></pre>\n"}], "owner": {"reputation": 1740, "user_id": 6749371, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/1fb6335a13491c2ead854c6c24a81771?s=128&d=identicon&r=PG&f=1", "display_name": "J Seabolt", "link": "https://stackoverflow.com/users/6749371/j-seabolt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 43080786, "answer_count": 2, "score": 1, "last_activity_date": 1490738671, "creation_date": 1490737913, "question_id": 43080599, "link": "https://stackoverflow.com/questions/43080599/rails-app-extra-record-displaying", "title": "Rails app - extra record displaying", "body": "<p>I have an app that allows users to add albums they like to a database. Anyone can then come along and write a review for that album. Pretty simple. </p>\n\n<p>I am running into a problem where an extra record appears to be created for the reviews on each album's show page. Every album, even if it has not ever been reviewed, has an additional, seemingly empty review being displayed when I use .each to display each review in the album show page. I want to get rid of that. </p>\n\n<p>Here is an image of the problem. I have used CSS to highlight reviews in red. As you can see, there is an empty review at the bottom. When I inspect the review in question, it's raty title is \"Not reviewed yet!\"</p>\n\n<p><a href=\"https://i.stack.imgur.com/kWTMh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kWTMh.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is my albums_controller:</p>\n\n<pre><code>class AlbumsController &lt; ApplicationController\n  before_action :set_album, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, only: [:edit, :new, :update, :destroy]\n\n  def index\n    @albums = Album.all\n    if params[:search].nil?\n      @albums = Album.all.order(year: :desc).order(title: :asc).paginate(:page =&gt; params[:page], :per_page =&gt; 24)\n    else\n      @albums = @albums.where(\"albums.title || albums.year || albums.artist LIKE ?\", \"%#{params[:search]}%\").order(year: :desc).order(title: :asc).paginate(:page =&gt; params[:page], :per_page =&gt; 24)\n    end\n  end\n\n  def show\n     if @album.reviews.blank?\n      @average_review = 0\n     else\n      @average_review = @album.reviews.average(:rating).round(2)\n     end\n     @review = @album.reviews.build\n   end\n\n   def new\n     @album = Album.new\n   end\n\n   def edit\n\n   end\n\n   def create\n     @album = current_user.albums.build(album_params)\n\n     respond_to do |format|\n      if @album.save\n         format.html { redirect_to @album, notice: 'Album was successfully created.' }\n        format.json { render :show, status: :created, location: @album }\n      else\n        format.html { render :new }\n        format.json { render json: @album.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def update\n     respond_to do |format|\n      if @album.update(album_params)\n        format.html { redirect_to @album, notice: 'Album was successfully updated.' }\n        format.json { render :show, status: :ok, location: @album }\n      else\n        format.html { render :edit }\n        format.json { render json: @album.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  def destroy\n    @album.destroy\n    respond_to do |format|\n      format.html { redirect_to albums_url, notice: 'Album was successfully    destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\nprivate\n# Use callbacks to share common setup or constraints between actions.\n\ndef set_album\n  @album = Album.find(params[:id])\nend\n\ndef album_params\n  params.require(:album).permit(:title, :artist, :year, :cover)\nend\nend\n</code></pre>\n\n<p>Here is the album show page, which is where the extra review is being displayed:</p>\n\n<pre><code>&lt;div class=\"row\"&gt;\n&lt;div class=\"col-xs-10 col-md-6 col-md-push-3 col-xs-push-1 top bottom\"&gt;\n    &lt;%= image_tag @album.cover, class: 'show_image' %&gt;\n    &lt;h2&gt;&lt;%= @album.title %&gt;&lt;/h2&gt;\n    &lt;h4&gt;&lt;%= @album.artist %&gt;&lt;/h4&gt;\n    &lt;h5&gt;&lt;%= @album.year %&gt;&lt;/h5&gt;\n    &lt;p class=\"white\"&gt;Average Review&lt;div class=\"average-review-rating\" data-score=&lt;%= @average_review %&gt;&gt;&lt;/div&gt;&lt;/p&gt;\n    &lt;% if user_signed_in? %&gt;\n        &lt;% if @album.user_id == current_user.id %&gt; \n            &lt;%= link_to 'Edit', edit_album_path(@album), class: 'grey' %&gt; \n            | &lt;%= link_to 'Delete', album_path, method: :delete, data: {confirm: \"Are you sure?\"}, class: 'grey' %&gt;\n        &lt;% end %&gt; \n    &lt;% end %&gt;\n    &lt;br /&gt;&lt;br /&gt;\n    &lt;h4&gt;Reviews&lt;/h4&gt;\n    &lt;% if user_signed_in? %&gt;\n        &lt;p class=\"grey\"&gt;Write a review&lt;/p&gt; \n\n        &lt;%= form_for [@album, @review] do |r| %&gt;\n            &lt;div class=\"form-group\"&gt;\n                &lt;div id=\"rating-form\"&gt;\n                    &lt;label&gt;Rating&lt;/label&gt;\n                &lt;/div&gt;  \n            &lt;/div&gt;\n            &lt;div class=\"form-group\"&gt;\n                &lt;%= r.text_area :comment, class: 'form-control', placeholder: \"Write a comment\" %&gt;\n            &lt;/div&gt;\n            &lt;div class=\"form-group\"&gt;\n                &lt;%= r.submit \"Create\", class: 'btn btn-success' %&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt; \n    &lt;% end %&gt; \n\n    &lt;br /&gt;\n    &lt;% @album.reviews.each do |r| %&gt;\n        &lt;div class=\"red\"&gt;\n            &lt;div class=\"review-rating\" data-number=\"&lt;%= r.rating %&gt;\"&gt;\n            &lt;/div&gt;\n            &lt;p class=\"white\"&gt;&lt;%= r.comment %&gt;&lt;/p&gt;\n            &lt;% if user_signed_in? %&gt;\n                &lt;% if current_user.id == r.user_id %&gt; \n                    &lt;%= link_to 'Edit', edit_album_review_path(@album, r.id), class: 'grey' %&gt; |\n                    &lt;%= link_to 'Delete', album_review_path(@album, r.id), method: :delete, data: {confirm: \"Are you sure?\"}, class: 'grey' %&gt;\n                &lt;% end %&gt; \n            &lt;% end %&gt;\n            &lt;br /&gt;&lt;br /&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;\n&lt;/div&gt;\n\n\n\n&lt;script&gt; \n$('.review-rating').raty({\nreadOnly: true,\nscore: function() {\n    return $(this).attr('data-number');\n},\npath: '/assets/'\n});\n\n$('#rating-form').raty({\npath: '/assets/',\nscoreName: 'review[rating]'\n});\n\n$('.average-review-rating').raty({\nreadOnly: true,\npath: '/assets/',\nscore: function() {\n    return $(this).attr('data-score')\n}\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>Any help would be very appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "tdd", "minitest"], "comments": [{"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 1, "creation_date": 1490735944, "post_id": 43080009, "comment_id": 73243472, "body": "What if you just use <code>belongs_to :forecast</code>?"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1490736084, "post_id": 43080009, "comment_id": 73243534, "body": "To test associations, you can use fixtures. Try this <a href=\"https://semaphoreci.com/community/tutorials/how-to-test-rails-models-with-minitest%60\" rel=\"nofollow noreferrer\">tutorial</a>."}, {"owner": {"reputation": 134, "user_id": 5959809, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tfdOs.jpg?s=128&g=1", "display_name": "F404", "link": "https://stackoverflow.com/users/5959809/f404"}, "reply_to_user": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1490736422, "post_id": 43080009, "comment_id": 73243716, "body": "@DiodonHystrix If I remove the foreign_key: true, the tests are working. Why is this happening? It is correct to remove foreign_key: true? And thanks for the association test tutorial :)"}, {"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 2, "creation_date": 1490736781, "post_id": 43080009, "comment_id": 73243867, "body": "<code>true</code> is not a valid value for the <code>foreign_key</code> option, <code>foreign_key</code> is where you specify the name of the foreign key column if it&#39;s different than the default (the default in this case being <code>forecast_id</code>)."}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1490736860, "post_id": 43080009, "comment_id": 73243900, "body": "For more information about <code>belongs_to</code> options, check <a href=\"http://apidock.com/rails/v4.2.1/ActiveRecord/Associations/ClassMethods/belongs_to\" rel=\"nofollow noreferrer\">it</a>. Look at the examples to better understand it :)"}, {"owner": {"reputation": 134, "user_id": 5959809, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tfdOs.jpg?s=128&g=1", "display_name": "F404", "link": "https://stackoverflow.com/users/5959809/f404"}, "reply_to_user": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1491158071, "post_id": 43080009, "comment_id": 73418021, "body": "Thank you so much @philomory. I usually read the guides, my fault. Sorry for my late answer."}, {"owner": {"reputation": 134, "user_id": 5959809, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tfdOs.jpg?s=128&g=1", "display_name": "F404", "link": "https://stackoverflow.com/users/5959809/f404"}, "reply_to_user": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1491158142, "post_id": 43080009, "comment_id": 73418046, "body": "Thank you so much @DiodonHystrix. The tests are now working. Sorry for my late answer."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1490743449, "post_id": 43081564, "comment_id": 73246309, "body": "On a side not I think you may have really missed the mark with your domain modeling. Splitting the fields of a typical weather forecast into multiple tables just ups the complexity and will lead to performance problems. I think what you need in the first place is to model it as multiple forecasts per day. Not one forecast per day with a bunch of different chunks."}, {"owner": {"reputation": 134, "user_id": 5959809, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tfdOs.jpg?s=128&g=1", "display_name": "F404", "link": "https://stackoverflow.com/users/5959809/f404"}, "edited": false, "score": 0, "creation_date": 1491158400, "post_id": 43081564, "comment_id": 73418135, "body": "Thank you for your advice. I am relatively new to Rails. And yes, you are right, I can simplify more my models. I need to think more about them."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1490743007, "creation_date": 1490743007, "answer_id": 43081564, "question_id": 43080009, "link": "https://stackoverflow.com/questions/43080009/why-adding-association-mark-my-model-as-not-valid/43081564#43081564", "title": "Why adding association mark my model as not valid?", "body": "<pre><code>test 'valid_wind can be persisted' do\n  assert @valid_wind.save\n  assert @valid_wind.persisted?\nend\n</code></pre>\n\n<p>This test is close to worthless since you are only testing that the test setup is correct, it tells you nothing about the application under test.</p>\n\n<p>Instead in your model tests you should test on a per validation basis:</p>\n\n<pre><code>test 'does not allow non numerical values for velocity' do\n  wind = Wind.new(velocity: 'foo')\n  wind.valid?\n  assert_match \"is not a number\", wind.errors.full_messages_for(:velocity)\nend\n\ntest 'allows numerical values for velocity' do\n  wind = Wind.new(velocity: 3)\n  wind.valid?\n  refute(wind.errors.include?(:velocity))\nend\n</code></pre>\n\n<p>Testing passing values is usually just marginally useful but can be valuable if bugs occur. </p>\n\n<p>In your models you don't really need to worry about setting up completely valid records - your functional and integration tests will cover that anyways.</p>\n"}], "owner": {"reputation": 134, "user_id": 5959809, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/tfdOs.jpg?s=128&g=1", "display_name": "F404", "link": "https://stackoverflow.com/users/5959809/f404"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 43081564, "answer_count": 1, "score": 0, "last_activity_date": 1490743007, "creation_date": 1490735381, "question_id": 43080009, "link": "https://stackoverflow.com/questions/43080009/why-adding-association-mark-my-model-as-not-valid", "title": "Why adding association mark my model as not valid?", "body": "<p>I'm developing a simple weather API in Rails. This API will give the forecast for a given day. The forecast will have hourly data about the wind, temperature, relative humidity, etc. </p>\n\n<p>I have implemented a model for the Forecast. The forecast have an association \"has_many\" with the other models, for example, the Wind. I have developed the following model for the Wind object:</p>\n\n<pre><code>class Wind &lt; ApplicationRecord\n  belongs_to :forecast, foreign_key: true\n  validates_presence_of :period\n  validates :velocity, numericality: true, allow_blank: true\n  validates :direction, length: { maximum: 2 }, allow_blank: true\nend\n</code></pre>\n\n<p>As I am trying to use TDD, I have implemented the following tests (among others):</p>\n\n<pre><code>class WindTest &lt; ActiveSupport::TestCase\n  setup do\n    @valid_wind = create_valid_wind\n    @not_valid_wind = create_not_valid_wind\n  end\n\n  test 'valid_wind is valid' do\n    assert @valid_wind.valid?\n  end\n\n  test 'valid_wind can be persisted' do\n    assert @valid_wind.save\n    assert @valid_wind.persisted?\n  end\n\n  test 'not_valid_wind is not valid' do\n    assert_not @not_valid_wind.valid?\n  end\n\n  test 'not valid wind cannot be persisted' do\n    assert_not @not_valid_wind.save\n    assert_not @not_valid_wind.persisted?\n  end\n\n  test 'not_valid_wind has error messages for period' do\n    assert_not @not_valid_wind.save\n    assert_not @not_valid_wind.errors.messages[:period].empty?\n  end\n\n  test 'not_valid_wind has error messages for velocity' do\n    assert_not @not_valid_wind.save\n    assert_not @not_valid_wind.errors.messages[:velocity].empty?\n  end\n\n  test 'not_valid_wind has error messages for direction' do\n    assert_not @not_valid_wind.save\n    assert_not @not_valid_wind.errors.messages[:direction].empty?\n  end\n\n  private\n\n  def create_valid_wind\n    valid_wind = Wind.new\n    valid_wind.direction = 'NO'\n    valid_wind.velocity = 2\n    valid_wind.period = '00-06'\n    valid_wind.forecast_id = forecasts(:one).id\n    valid_wind\n  end\n\n  def create_not_valid_wind\n    not_valid_wind = Wind.new\n    not_valid_wind.velocity = 'testNumber'\n    not_valid_wind.direction = '123'\n    not_valid_wind\n  end\nend\n</code></pre>\n\n<p>This bunch of tests was passing before I add the association with forecast: </p>\n\n<pre><code>belongs_to :forecast, foreign_key: true\n</code></pre>\n\n<p>Indeed, if I remove that line, any test fails. But with that line in the model, the following tests are failing (they are false and the test expects true):</p>\n\n<pre><code>  test 'valid_wind is valid' do\n    assert @valid_wind.valid?\n  end\n\n  test 'valid_wind can be persisted' do\n    assert @valid_wind.save\n    assert @valid_wind.persisted?\n  end\n</code></pre>\n\n<p>I am trying to understand why this is happening. Anyone knows why those tests are failing? Also, is there any proper way to test associations?</p>\n\n<p>Thank you in advance.</p>\n"}, {"tags": ["ruby", "class"], "answers": [{"tags": [], "owner": {"reputation": 176, "user_id": 748769, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b841cf42dcaa7ff719bfa1a7a9865232?s=128&d=identicon&r=PG", "display_name": "Ivan Lu\u010dev", "link": "https://stackoverflow.com/users/748769/ivan-lu%c4%8dev"}, "is_accepted": false, "score": 1, "last_activity_date": 1490735412, "creation_date": 1490735412, "answer_id": 43080017, "question_id": 43079877, "link": "https://stackoverflow.com/questions/43079877/whats-the-easiest-way-to-know-if-a-class-is-an-activerecord-class/43080017#43080017", "title": "Whats the easiest way to know if a class is an ActiveRecord class?", "body": "<p>You can get all ancestors of the Class with <code>Class.ancestors</code>. So what you can do to check the type without instantiating the Class is</p>\n\n<pre><code>Class.ancestors.include?(ActiveRecord::Base)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "is_accepted": true, "score": 3, "last_activity_date": 1490735998, "last_edit_date": 1490735998, "creation_date": 1490735662, "answer_id": 43080078, "question_id": 43079877, "link": "https://stackoverflow.com/questions/43079877/whats-the-easiest-way-to-know-if-a-class-is-an-activerecord-class/43080078#43080078", "title": "Whats the easiest way to know if a class is an ActiveRecord class?", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.2.0/Module.html#method-i-3C\" rel=\"nofollow noreferrer\"><code>Module#&lt;</code></a>:</p>\n\n<pre><code>SomeKlass &lt; ActiveRecord::Base\n=&gt; true\n</code></pre>\n\n<p>Also, if you want to include <code>ActiveRecord::Base</code> itself to results, you can use <code>Module#&lt;=</code>:</p>\n\n<pre><code>ActiveRecord::Base &lt;= ActiveRecord::Base\n=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 2258745, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/d12a4a77c3e3411d7a5bf97a86365881?s=128&d=identicon&r=PG", "display_name": "stevo999999", "link": "https://stackoverflow.com/users/2258745/stevo999999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 43080078, "answer_count": 2, "score": 1, "last_activity_date": 1490737549, "creation_date": 1490734948, "last_edit_date": 1490737549, "question_id": 43079877, "link": "https://stackoverflow.com/questions/43079877/whats-the-easiest-way-to-know-if-a-class-is-an-activerecord-class", "title": "Whats the easiest way to know if a class is an ActiveRecord class?", "body": "<p>So I know that I can do </p>\n\n<pre><code> Class.new.is_a?(ActiveRecord::Base)\n</code></pre>\n\n<p>Is there a way to know what kind of class it is without instantiating it?  Are there any downsides to instantiating it just to find out the type of class it is?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1490742406, "post_id": 43079924, "comment_id": 73245989, "body": "Thanks a billion mate for your help!"}], "tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": false, "score": 2, "last_activity_date": 1490735100, "creation_date": 1490735100, "answer_id": 43079924, "question_id": 43079735, "link": "https://stackoverflow.com/questions/43079735/rails-updating-a-value-through-rails-seed-for-a-given-user/43079924#43079924", "title": "Rails - Updating a value through rails seed for a given user", "body": "<p><code>add_reference :users, :homecity, foreign_key: true</code> </p>\n\n<p>In the migration, only the first argument should be plural. Take a look <a href=\"http://guides.rubyonrails.org/active_record_migrations.html\" rel=\"nofollow noreferrer\">here.</a></p>\n\n<p>That is why you have <code>homecitied_id</code> instead of <code>homecity_id</code> in your database, which is not correct.</p>\n\n<p>Also in the view you need to change to <code>homecity_id</code>.</p>\n\n<pre><code>&lt;%= f.collection_select :homecity_id, Homecity.all, :id, :Hometown %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "edited": false, "score": 0, "creation_date": 1490742339, "post_id": 43079989, "comment_id": 73245972, "body": "Steve thank you so much for that. Your explanation was super helpful in allowing me to understand better :) Have a great week champ!"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 2, "last_activity_date": 1490735305, "creation_date": 1490735305, "answer_id": 43079989, "question_id": 43079735, "link": "https://stackoverflow.com/questions/43079735/rails-updating-a-value-through-rails-seed-for-a-given-user/43079989#43079989", "title": "Rails - Updating a value through rails seed for a given user", "body": "<p>Since it's a <code>belongs_to</code> it's only one <code>homecity</code> and it's actually the homecity_id you're trying to pass to devise.  </p>\n\n<p>So instead of...</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:username, :name, :avatar, :homecities])\n    devise_parameter_sanitizer.permit(:account_update, keys: [:username,:name, :avatar, :homecities])\n  end\nend\n</code></pre>\n\n<p>You should do...</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:username, :name, :avatar, :homecity_id])\n    devise_parameter_sanitizer.permit(:account_update, keys: [:username,:name, :avatar, :homecity_id])\n  end\nend\n</code></pre>\n\n<p>And you'll need to modify your edit view to the singular...</p>\n\n<pre><code>&lt;%= f.collection_select :homecity_id, Homecity.all, :id, :Hometown %&gt;\n</code></pre>\n\n<p>Finally, do <code>rake db:rollback</code> and change <code>homecities</code> to <code>homecity</code> in your migration and then do <code>rake db:migrate</code> again.</p>\n"}], "owner": {"reputation": 383, "user_id": 6273382, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/10156818603950237/picture?type=large", "display_name": "Omar", "link": "https://stackoverflow.com/users/6273382/omar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 281, "favorite_count": 0, "accepted_answer_id": 43079989, "answer_count": 2, "score": 0, "last_activity_date": 1490751740, "creation_date": 1490734399, "last_edit_date": 1495540924, "question_id": 43079735, "link": "https://stackoverflow.com/questions/43079735/rails-updating-a-value-through-rails-seed-for-a-given-user", "title": "Rails - Updating a value through rails seed for a given user", "body": "<p>Apologies for the question, I'm still learning rails. Trying to update a specific user's home cities through a drop down. I followed all the steps as outlined in this question <a href=\"https://stackoverflow.com/questions/14113057/how-to-have-a-drop-down-select-field-in-a-rails-form\">How to have a drop down &lt;select&gt; field in a rails form?</a> and I'm not getting any errors. However, when I go to my rails console and do User.first - the homecities_id is still set as nil. Thank you guys so much for your help.</p>\n\n<p><strong>edit.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.label :homecity %&gt;&lt;br&gt;\n  &lt;%= f.collection_select :homecities_id, Homecity.all, :id, :Hometown %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>User.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  devise :database_authenticatable, :registerable,\n  :recoverable, :rememberable, :trackable, \n  :validatable, :omniauthable, omniauth_providers: [:facebook]\n\n  cattr_accessor :current_user\n\n  belongs_to :homecity, optional: true\nend\n</code></pre>\n\n<p><strong>Homecity.rb</strong></p>\n\n<pre><code>class Homecity &lt; ApplicationRecord\n  has_many :users\nend\n</code></pre>\n\n<p><strong>Application_controller.rb</strong></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:username, :name, :avatar, :homecities])\n    devise_parameter_sanitizer.permit(:account_update, keys: [:username,:name, :avatar, :homecities])\n  end\nend\n</code></pre>\n\n<p><strong>Migrations</strong></p>\n\n<pre><code>class CreateHomecities &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :homecities do |t|\n      t.string :Hometown\n      t.timestamps\n    end\n  end\nend\n\nclass AddHomecitiesRefToUsers &lt; ActiveRecord::Migration[5.0]\n  def change\n    add_reference :users, :homecities, foreign_key: true\n  end\nend\n</code></pre>\n\n<p><strong>seed.rb</strong></p>\n\n<pre><code>Homecity.destroy_all\nbigapple = Homecity.create!(Hometown:\"New York City\")\ntechhub = Homecity.create!(Hometown:\"San Francisco\")\nlonghorns = Homecity.create!(Hometown:\"Austin\")\nangels = Homecity.create!(Hometown:\"Los Angeles\")\nwindycity = Homecity.create!(Hometown:\"Chicago\")\nhcards = Homecity.create!(Hometown:\"Washington DC\")\namazon = Homecity.create!(Hometown:\"Seattle\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1490733478, "post_id": 43079210, "comment_id": 73242213, "body": "I see what you&#39;re saying @Ilya. But I think mine may be different because I&#39;m explicitly asking for a return of an Array. Where as the other question is not."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490737883, "post_id": 43079210, "comment_id": 73244312, "body": "&quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot; If all you tried was a single attempt using <code>tr</code>, then you need to do more."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 9, "creation_date": 1490732760, "post_id": 43079265, "comment_id": 73241799, "body": "Add <code>.map(&amp;:to_i)</code> for integers, plus add <code>&#47;\\-?\\d+&#47;</code> for possible negative values."}], "tags": [], "owner": {"reputation": 37741, "user_id": 3425536, "user_type": "registered", "accept_rate": 72, "profile_image": "https://graph.facebook.com/1484495923/picture?type=large", "display_name": "emlai", "link": "https://stackoverflow.com/users/3425536/emlai"}, "is_accepted": true, "score": 8, "last_activity_date": 1490732780, "last_edit_date": 1490732780, "creation_date": 1490732692, "answer_id": 43079265, "question_id": 43079210, "link": "https://stackoverflow.com/questions/43079210/how-to-extract-the-numbers-into-a-separate-array-from-a-string/43079265#43079265", "title": "How to extract the numbers into a separate array from a string", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.4.0/String.html#method-i-scan\" rel=\"noreferrer\"><code>scan</code></a>:</p>\n\n<pre><code>numbers = str.scan(/\\d+/)\n# =&gt; [\"2015\", \"6\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1490735910, "creation_date": 1490735910, "answer_id": 43080147, "question_id": 43079210, "link": "https://stackoverflow.com/questions/43079210/how-to-extract-the-numbers-into-a-separate-array-from-a-string/43080147#43080147", "title": "How to extract the numbers into a separate array from a string", "body": "<p><code>scan</code> is better, but this also works.</p>\n\n<pre><code>\"In 2015, I want to know how much does iPhone 6+ cost?\".gsub(/\\D/,' ').split\n  #=&gt; [\"2015\", \"6\"] \n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 43079265, "answer_count": 2, "score": 0, "last_activity_date": 1503332497, "creation_date": 1490732499, "last_edit_date": 1503332497, "question_id": 43079210, "link": "https://stackoverflow.com/questions/43079210/how-to-extract-the-numbers-into-a-separate-array-from-a-string", "title": "How to extract the numbers into a separate array from a string", "body": "<p>Given this string </p>\n\n<pre><code>\"In 2015, I want to know how much does iPhone 6+ cost?\"\n</code></pre>\n\n<p>how can I return <code>[2015, 6]</code>? </p>\n\n<p>My first attempt at this was</p>\n\n<pre><code>numbers = str.tr(\"^0-9\", '')\n</code></pre>\n\n<p>but that produces <code>20156</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490729814, "post_id": 43078324, "comment_id": 73240111, "body": "Can you post line that is causing the error? It&#39;s not the routes, that <code>_path</code> method probably needs an ID passed"}, {"owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490729908, "post_id": 43078324, "comment_id": 73240172, "body": "@Ruslan Of course stupid of me not to add it. I&#39;ve added it"}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490730060, "post_id": 43078324, "comment_id": 73240253, "body": "Ahh, i see the issue. Check your <code>UsersController#show</code> to see if <code>@conference</code> is being set anywhere. If not try:   <code>&lt;a href=&quot;&lt;%= followers_conference_path(current_user.id) %&gt;&quot;&gt;</code>"}, {"owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490730290, "post_id": 43078324, "comment_id": 73240362, "body": "@Ruslan Thank you for your response. It&#39;s not displayed in UsersController#show could you tell me (or maybe even explain) how I should write it in the UsersController#show? Thank you!"}, {"owner": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "edited": false, "score": 0, "creation_date": 1490730377, "post_id": 43078324, "comment_id": 73240405, "body": "@Notorious_Creed where have you added this line <code>&lt;a href=&quot;&lt;%= followers_conference_path(@conference) %&gt;&quot;&gt;</code> i.e. in which view?  The problem I feel is if it is on some path like new, where conference is just initialized but not saved so it doesn&#39;t have an Id. Or it doesn&#39;t even exist yet."}, {"owner": {"reputation": 2116, "user_id": 6780663, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9207ba3b9163582570078b687f9b2792?s=128&d=identicon&r=PG&f=1", "display_name": "Alejandro Montilla", "link": "https://stackoverflow.com/users/6780663/alejandro-montilla"}, "reply_to_user": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490730603, "post_id": 43078324, "comment_id": 73240535, "body": "@Ruslan you should post as an answer"}, {"owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "reply_to_user": {"reputation": 5932, "user_id": 3541205, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/6d36383f353f79d903e2e0946b73e8f7?s=128&d=identicon&r=PG", "display_name": "aks", "link": "https://stackoverflow.com/users/3541205/aks"}, "edited": false, "score": 0, "creation_date": 1490730731, "post_id": 43078324, "comment_id": 73240605, "body": "@aks I&#39;ve posted it on the users page <code>users&#47;1</code>"}, {"owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "edited": false, "score": 0, "creation_date": 1490730885, "post_id": 43078324, "comment_id": 73240708, "body": "@Notorious_Creed Can you post the <code>show</code> method in the users?"}, {"owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "edited": false, "score": 0, "creation_date": 1490730977, "post_id": 43078324, "comment_id": 73240769, "body": "`  def show     @user = User.find(params[:id])     @microposts = @user.microposts.paginate(page: params[:page])     @managments = @user.managments.paginate(page: params[:page])     @conference = Conference.find(params[:id])   end`"}], "answers": [{"comments": [{"owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "edited": false, "score": 1, "creation_date": 1490730928, "post_id": 43078683, "comment_id": 73240730, "body": "I&#39;ve added <code>@conference = Conference.find(params[:id])</code> to <code>UsersController#show</code> and now it&#39;s working. Thank you so much !!!"}], "tags": [], "owner": {"reputation": 1670, "user_id": 6388521, "user_type": "registered", "accept_rate": 69, "profile_image": "https://lh4.googleusercontent.com/-VdFWPJVSpRc/AAAAAAAAAAI/AAAAAAAAAFo/vCc8QOz6v9Y/photo.jpg?sz=128", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/6388521/ruslan"}, "is_accepted": true, "score": 2, "last_activity_date": 1490730793, "creation_date": 1490730793, "answer_id": 43078683, "question_id": 43078324, "link": "https://stackoverflow.com/questions/43078324/following-and-unfollowing-events/43078683#43078683", "title": "Following and unfollowing events", "body": "<p>Ahh, i see the issue. </p>\n\n<p>Check your <code>UsersController#show</code> to see if <code>@conference</code> is being set anywhere. </p>\n\n<p>If not try: <code>&lt;a href=\"&lt;%= followers_conference_path(current_user.id) %&gt;\"&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "edited": false, "score": 0, "creation_date": 1490775709, "post_id": 43079267, "comment_id": 73257981, "body": "Thank you for responding, I will try this out today and get back to you!"}], "tags": [], "owner": {"reputation": 15583, "user_id": 177489, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/sv6zK.jpg?s=128&g=1", "display_name": "Mark Swardstrom", "link": "https://stackoverflow.com/users/177489/mark-swardstrom"}, "is_accepted": false, "score": 1, "last_activity_date": 1490804871, "last_edit_date": 1490804871, "creation_date": 1490732695, "answer_id": 43079267, "question_id": 43078324, "link": "https://stackoverflow.com/questions/43078324/following-and-unfollowing-events/43079267#43079267", "title": "Following and unfollowing events", "body": "<p>You don't want to use the user id to get the @conference object, I'm sure. Instead, you are probably generating a list of conferences the user is following. In that case, you'd use something like this</p>\n\n<pre><code>&lt;% @user.conferences.each do |conference| %&gt;\n  &lt;a href=\"&lt;%= followers_conference_path(conference) %&gt;\"&gt;&lt;%= conference.name %&gt;&lt;/a&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And, in Rails, you would usually use the <code>link_to</code> helper, and maybe include a count to show how many followers the conference has.</p>\n\n<pre><code>&lt;% @user.conferences.each do |conference| %&gt;\n  &lt;%= link_to conference.name, followers_conference_path(conference) %&gt;\n  (&lt;%= pluralize conference.users.count, 'follower' %&gt;)\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 43078683, "answer_count": 2, "score": 0, "last_activity_date": 1490804871, "creation_date": 1490729456, "last_edit_date": 1490731361, "question_id": 43078324, "link": "https://stackoverflow.com/questions/43078324/following-and-unfollowing-events", "title": "Following and unfollowing events", "body": "<p>I've done Michael Hartl Ruby on Rails 5 tutorial and am now trying to apply the code to my own app. </p>\n\n<p>What I'm trying to do is:</p>\n\n<ul>\n<li>Follow/Unfollow an event</li>\n<li>Display total count of users following this event</li>\n<li>Users can see all the events that they are following</li>\n</ul>\n\n<p>The current error appears when I try to render the conferences that current user is following.</p>\n\n<p>The error that I get is:</p>\n\n<pre><code>ActionController::UrlGenerationError in Users#show\nNo route matches {:action=&gt;\"followers\", :controller=&gt;\"conferences\", :id=&gt;nil} missing required keys: [:id]\n</code></pre>\n\n<p>The line that causes the problem is:</p>\n\n<pre><code>  &lt;a href=\"&lt;%= followers_conference_path(@conference) %&gt;\"&gt;\n</code></pre>\n\n<p>Now obviously their is something wrong in my routing and I assume the following problem states that conferences is missing a required id? </p>\n\n<p>Does anyone know the solution to my problem? Which is getting allowing users to follow events and see what events they are following</p>\n\n<p><strong>USER CONTROLLER SHOW</strong></p>\n\n<pre><code>  def show\n    @user = User.find(params[:id])\n    @microposts = @user.microposts.paginate(page: params[:page])\n    @managments = @user.managments.paginate(page: params[:page])\n    @conference = Conference.find(params[:id])\n  end\n</code></pre>\n\n<p><strong>ROUTES.RB</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root   'static_pages#home'\n\n  get    '/help',    to: 'static_pages#help'\n  get    '/about',   to: 'static_pages#about'\n  get    '/contact', to: 'static_pages#contact'\n\n  get    '/my_conference', to: 'my_conference#show'\n  get    '/conferences', to: 'conferences#index'\n  get    '/conferences_list', to: 'conferences#index_admin'\n\n  get    '/my_employees', to: 'employees#index'\n\n  get    '/signup',  to: 'users#new'\n\n  get    '/login',   to: 'sessions#new'\n  post   '/login',   to: 'sessions#create'\n  delete '/logout',  to: 'sessions#destroy'\n\n  get    '/login',   to: 'sessions#new'\n\n  put 'activate/:id(.:format)', :to =&gt; 'users#activate', :as =&gt; :activate_user\n  put 'deactivate/:id(.:format)', :to =&gt; 'users#deactivate', :as =&gt; :deactivate_user\n\n  put 'activate_employee/:id(.:format)', :to =&gt; 'employees#activate', :as =&gt; :activate_employee\n  put 'deactivate_employee/:id(.:format)', :to =&gt; 'employees#deactivate', :as =&gt; :deactivate_employee\n\n  resources :users do\n    member do\n      get :following\n    end\n  end\n  resources :conferences do\n    member do\n      get :followers\n    end\n  end\n  resources :articles\n  resources :users\n  resources :employees\n  resources :account_activations, only: [:edit]\n  resources :activations, only: [:edit]\n  resources :password_resets,     only: [:new, :create, :edit, :update]\n  resources :microposts,          only: [:create, :destroy]\n  resources :managments  \n  resources :conferences  \n  resources :relationships,       only: [:create, :destroy]\n\n\nend\n</code></pre>\n\n<p><strong>CONFERENCES_CONTROLLER.RB</strong></p>\n\n<pre><code>class ConferencesController &lt; ApplicationController\n  before_action :logged_in_user, only: [:create, :destroy]\n  before_action :correct_user,   only: :destroy\n  before_action :admin_user,     only: :destroy\n\n    def index\n\n      @conferences = Conference.paginate(page: params[:page])\n\n      if params[:search]\n        @conferences = Conference.search(params[:search]).order(\"created_at DESC\").paginate(page: params[:page])\n      else\n        @conferences = Conference.all.order('created_at DESC').paginate(page: params[:page])\n      end\n    end\n\n  def new\n    @user = User.new\n    @conference = Conference.new\n  end\n\n  def create\n\n    @conference = current_user.conferences.build(conference_params)\n    if @conference.save\n      flash[:success] = \"conference created!\"\n      redirect_to conferences_path\n    else\n      @feed_items = current_user.feed.paginate(page: params[:page])\n      render 'new'\n    end\n  end\n\n  def destroy\n    @conference.destroy\n    flash[:success] = \"conference deleted\"\n    redirect_to request.referrer || root_url\n  end\n\n  def following\n    @title = \"Following\"\n    @conference  = Conference.find(params[:id])\n    @conferences = @conference.following.paginate(page: params[:page])\n    render 'show_follow'\n  end\n\n  def followers\n    @title = \"Followers\"\n    @user  = User.find(params[:id])\n    @users = @user.followers.paginate(page: params[:page])\n    render 'show_follow'\n  end\n\n\n  private\n\n    def conference_params\n      params.require(:conference).permit(:conference,:country , :month, :presence, :audience, :cost ,:picture)\n    end\n\n    # Confirms an admin user.\n    def admin_user\n      redirect_to(root_url) unless current_user.admin?\n    end\n\n    def correct_user\n      @conference = current_user.conferences.find_by(id: params[:id])\n      redirect_to root_url if @conference.nil?\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "windows", "powershell", "chef-infra"], "comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1490729294, "post_id": 43078240, "comment_id": 73239820, "body": "There are some issues with certain installers and the default security restrictions on WinRM. We&#39;re working on moving more stuff to use the winrm-elevated gem but it&#39;s been a long-running project. Usually a simple fix is to run the install through a scheduled task instead of directly."}, {"owner": {"reputation": 843, "user_id": 4910940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4081b83efaaefe18c5b5bd1fa50439?s=128&d=identicon&r=PG", "display_name": "bluuf", "link": "https://stackoverflow.com/users/4910940/bluuf"}, "edited": false, "score": 0, "creation_date": 1490730027, "post_id": 43078240, "comment_id": 73240230, "body": "Because of the problems described by coderanger I&#39;m using Powershell DSC (which is supported in 2012R2) for these kind of remote installations (this works perfectly)"}, {"owner": {"reputation": 7, "user_id": 6779288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec56c7afe0e3932d6e8a3846a29044f6?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul", "link": "https://stackoverflow.com/users/6779288/john-paul"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1490730872, "post_id": 43078240, "comment_id": 73240701, "body": "I tried using the Windows scheduled task also. The task is getting created on the machine and it shows running. But, it is not installing the software. @coderan"}, {"owner": {"reputation": 843, "user_id": 4910940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fe4081b83efaaefe18c5b5bd1fa50439?s=128&d=identicon&r=PG", "display_name": "bluuf", "link": "https://stackoverflow.com/users/4910940/bluuf"}, "edited": false, "score": 0, "creation_date": 1490736897, "post_id": 43078240, "comment_id": 73243915, "body": "@dheeraj - I&#39;m not familiar with Chef (besides knowing what it is and does) but it should be possible. DSC requires you to declare a config in a .mof file (you can generate them with a &quot;configuration&quot; script in Powershell). Invoking them in powershell using the push functionality is one command which basicly executes locally (it uses CIM if I remember correctly) : Start-DSCConfiguration with some parameters. Reading some basic articles about Powershell DSC should get you started in no time."}], "owner": {"reputation": 7, "user_id": 6779288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec56c7afe0e3932d6e8a3846a29044f6?s=128&d=identicon&r=PG&f=1", "display_name": "John Paul", "link": "https://stackoverflow.com/users/6779288/john-paul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490729118, "creation_date": 1490729118, "question_id": 43078240, "link": "https://stackoverflow.com/questions/43078240/installing-a-software-remotely-on-windows-is-failing-but-when-logged-into-the", "title": "Installing a software remotely on windows is failing. But, when logged into the machine, everything works fine", "body": "<p>I'm trying to install SQL Express on Windows 2012R2 server remotely either using <strong>\"windows_package/powershell_script\"</strong> chef resources. I tried executing the script I have after remoting into the machine, it installs fine. </p>\n\n<p>But, when I try to execute it remotely using Chef/Powershell, it's neither installing the software nor giving out an error. Is this because of configuration issues? </p>\n\n<p>Currently when I attempt to use the below resources, nothing is installing:</p>\n\n<pre><code>1. Windows_package:\nwindows_package 'Install SQL Express' do\n  source 'C:\\\\Folder\\\\SQLEXPR_x64_ENU.exe'\n  action :install\n  options '/QUIET /SAPWD=\"C0mp!ex\" /ConfigurationFile=\"C:\\\\Folder\\\\sql_express.ini\" /TCPENABLED=\"1\" /SECURITYMODE=\"SQL\"'\nend\n\n2. powershell_script:\npowershell_script 'Install SQL Express' do\n  code &lt;&lt;-EOH\n  Set-ExecutionPolicy -Scope Process -ExecutionPolicy Unrestricted -Force\n  Set-ExecutionPolicy -Scope CurrentUser -ExecutionPolicy Unrestricted -Force\n  Set-ExecutionPolicy -Scope LocalMachine -ExecutionPolicy Unrestricted -Force\n  C:\\\\Folder\\\\sql_express.ps1\n  EOH\nend\n</code></pre>\n\n<p>And the Powershell script that I used is:</p>\n\n<pre><code>$app = 'C:\\\\Folder\\\\SQLEXPR_x64_ENU.exe'\n$myarg = '/QUIET /SAPWD=\"C0mp!ex\" /ConfigurationFile=\"C:\\\\Folder\\\\sql_express.ini\" /TCPENABLED=\"1\" /SECURITYMODE=\"SQL\"'\n\nStart-Process $app -ArgumentList $myarg\nStart-Sleep 300\n</code></pre>\n\n<p>The Powershell script when ran on the machine, it works fine. Why is the script working fine when executed on the machine and not remotely?</p>\n\n<p>Please let me know if I need to make any changes to the script or resources to make it work.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["jquery", "css", "ruby-on-rails", "ruby", "font-awesome"], "answers": [{"comments": [{"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1491322012, "post_id": 43211746, "comment_id": 73496327, "body": "I tested this solution on safari 9.1.2.  Unfortunately the issue still persists.  I see you mentioned the specific version of Safari 10.1.  Does this mean it only works on that version of safari or later?"}, {"owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "reply_to_user": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1491334443, "post_id": 43211746, "comment_id": 73503670, "body": "@Neil: that&#39;s a shame - it is consistently working for me on 10.1, on two different machines. Out of interest - is it the fiddle that&#39;s not working for you, or the integration with your code? I&#39;ve just had a quick go on BrowserStack, and it <i>appears</i> to be working on El Capitan / 9.1, Yosemite / 8, Mavericks / 7.1 and even Mountain Lion 6.2..."}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "edited": false, "score": 0, "creation_date": 1491337099, "post_id": 43211746, "comment_id": 73505074, "body": "oh it works in your fiddle example.  It doesn&#39;t work in my example app."}], "tags": [], "owner": {"reputation": 5382, "user_id": 7671538, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3506350bc4dd02281ad7f99e8e84715c?s=128&d=identicon&r=PG&f=1", "display_name": "gwcodes", "link": "https://stackoverflow.com/users/7671538/gwcodes"}, "is_accepted": false, "score": 0, "last_activity_date": 1491320284, "creation_date": 1491320284, "answer_id": 43211746, "question_id": 43078118, "link": "https://stackoverflow.com/questions/43078118/jquery-ujs-issue-font-awesome-animated-spinner-works-in-chrome-but-not-safari/43211746#43211746", "title": "jquery_ujs issue: Font Awesome animated spinner works in Chrome but Not Safari", "body": "<p>There might just be a nice quick-fix... See <a href=\"https://jsfiddle.net/q38do4qe/\" rel=\"nofollow noreferrer\">this JSFiddle</a>, which is an even smaller minimal example of the problem. On Safari 10.1, the refresh is broken about 70% of the time for me.</p>\n\n<p>Then we force hardware acceleration to be used, through CSS:</p>\n\n<pre><code>form {\n  -webkit-transform: translate3d(0,0,0);\n  transform: translateZ(0); \n}\n</code></pre>\n\n<p>And <a href=\"https://jsfiddle.net/q38do4qe/1/\" rel=\"nofollow noreferrer\">the problem goes away</a>.</p>\n\n<p>Note: technically the first line of CSS should be enough to force hardware acceleration, but the second line most definitely is needed here for this to work...</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 491, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1491320284, "creation_date": 1490728662, "last_edit_date": 1491314133, "question_id": 43078118, "link": "https://stackoverflow.com/questions/43078118/jquery-ujs-issue-font-awesome-animated-spinner-works-in-chrome-but-not-safari", "title": "jquery_ujs issue: Font Awesome animated spinner works in Chrome but Not Safari", "body": "<p>I am using <a href=\"https://rubygems.org/gems/font-awesome-rails\" rel=\"nofollow noreferrer\">font-awesome-rails</a> in my rails project.  When the user clicks the submit button on a form: </p>\n\n<ul>\n<li>within the submit button there should be an animated font-awesome spinner, and the text within the button should change to saying \"Submitting...\".  </li>\n<li>the button should be disabled so that the user is unable to submit the form multiple times. </li>\n</ul>\n\n<p>The following code works perfectly when using Google Chrome:</p>\n\n<pre><code>&lt;%= f.button \"Submit\", class: \"btn btn-success\", data: {disable_with: \"&lt;i class='fa fa-spinner fa-spin'&gt;&lt;/i&gt; Submitting...\"} %&gt;\n</code></pre>\n\n<p>In Safari however:</p>\n\n<ul>\n<li>the button is successfully disabled</li>\n<li><em>But</em> the spinner icon does <em>not</em> appear, and the text does <em>not</em> change.  </li>\n</ul>\n\n<p>I created a tiny app to show the issue.  <a href=\"https://github.com/ntistephens/loading_animation\" rel=\"nofollow noreferrer\">The repo is here</a>. Submit the <code>blog</code> form on Chrome and then submit it in Safari.  You will notice that the animation works on Chrome but not safari.</p>\n\n<p>I saw <a href=\"https://github.com/rails/jquery-ujs/issues/306\" rel=\"nofollow noreferrer\">this issue on jquery_ujs</a>.  There are some quite verbose work arounds, but nothing that is convenient for re-use for all the places I want to implement this functionality.</p>\n\n<p>It appears to be a browser issue: something like Safari doesn't want to do some additional processing once a form is submitted because it doesn't want to slow things down. </p>\n\n<p>Chris Oliver from GoRails pointed out to me that if you run the following in the console, even in Safari: it triggers the desired effect:</p>\n\n<pre><code>$.rails.disableFormElement($(\"button\"))\n</code></pre>\n\n<p>So the effect works in safari.  It just doesn't work when that is bound to a form submission button. I have attempted doing this with Safari version 9.1.2, as well as 10.0.1.  I have also attempted in Rails 4.2.6 and Rails 5. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 384, "user_id": 7774072, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ec9d356ec80acef193cd97914b9e67c4?s=128&d=identicon&r=PG&f=1", "display_name": "AlexeyKuznetsov", "link": "https://stackoverflow.com/users/7774072/alexeykuznetsov"}, "reply_to_user": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "edited": false, "score": 0, "creation_date": 1490735796, "post_id": 43079647, "comment_id": 73243392, "body": "Always happy to help!"}], "tags": [], "owner": {"reputation": 384, "user_id": 7774072, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ec9d356ec80acef193cd97914b9e67c4?s=128&d=identicon&r=PG&f=1", "display_name": "AlexeyKuznetsov", "link": "https://stackoverflow.com/users/7774072/alexeykuznetsov"}, "is_accepted": true, "score": 4, "last_activity_date": 1490734104, "creation_date": 1490734104, "answer_id": 43079647, "question_id": 43077898, "link": "https://stackoverflow.com/questions/43077898/heroku-console-wont-boot-cannot-load-such-file-rack-handler-console/43079647#43079647", "title": "Heroku Console won&#39;t boot- cannot load such file -- rack/handler/console", "body": "<p>You can try this way:</p>\n\n<p><code>heroku run console</code></p>\n"}], "owner": {"reputation": 356, "user_id": 7781865, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a015f597dcb8d01d4deae23070c6991f?s=128&d=identicon&r=PG", "display_name": "colincr", "link": "https://stackoverflow.com/users/7781865/colincr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "accepted_answer_id": 43079647, "answer_count": 1, "score": 2, "last_activity_date": 1490734104, "creation_date": 1490727940, "last_edit_date": 1490728285, "question_id": 43077898, "link": "https://stackoverflow.com/questions/43077898/heroku-console-wont-boot-cannot-load-such-file-rack-handler-console", "title": "Heroku Console won&#39;t boot- cannot load such file -- rack/handler/console", "body": "<p>When I run <code>heroku run rails console</code>, my stack trace reads:</p>\n\n<pre><code>Running rails console on \u2b22 canvas-gattaca... up, run.8126 (Standard-1X)\nExiting\n/app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.2/lib/active_support/dependencies.rb:274:in `require': cannot load such file -- rack/handler/console (LoadError)\n    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.2/lib/active_support/dependencies.rb:274:in `block in require'\n    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.2/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.2/lib/active_support/dependencies.rb:274:in `require'\n    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/handler.rb:90:in `try_require'\n    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/handler.rb:16:in `get'\n    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.5/lib/rack/server.rb:290:in `server'\n    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.2/lib/rails/commands/server.rb:125:in `print_boot_information'\n    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.2/lib/rails/commands/server.rb:75:in `start'\n    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.2/lib/rails/commands/commands_tasks.rb:80:in `block in server'\n    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.2/lib/rails/commands/commands_tasks.rb:75:in `tap'\n    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.2/lib/rails/commands/commands_tasks.rb:75:in `server'\n    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.2/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.2/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n    from bin/rails:9:in `require'\n    from bin/rails:9:in `&lt;main&gt;'\n</code></pre>\n\n<p>My logs read:</p>\n\n<pre><code>2017-03-28T19:02:33.583671+00:00 app[api]: Starting process with command `bundle exec rails server console` by user ccromar@instructure.com\n2017-03-28T19:02:37.784210+00:00 heroku[run.4264]: Awaiting client\n2017-03-28T19:02:37.827306+00:00 heroku[run.4264]: Starting process with command `bundle exec rails server console`\n2017-03-28T19:02:38.058988+00:00 heroku[run.4264]: State changed from starting to up\n2017-03-28T19:02:45.391746+00:00 heroku[run.4264]: State changed from up to complete\n2017-03-28T19:02:45.377045+00:00 heroku[run.4264]: Process exited with status 1\n</code></pre>\n\n<p>My Procfile-</p>\n\n<pre><code>rails: bundle exec rails server\nwebpack: ./node_modules/.bin/webpack-dev-server --config config/webpack.config.js\n</code></pre>\n\n<p>Am I missing anything?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "xls", "roo-gem"], "comments": [{"owner": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "edited": false, "score": 0, "creation_date": 1491320819, "post_id": 43077897, "comment_id": 73495510, "body": "I tried your replicate your scenario but no such thing occurring with my tests. Maybe some formatting is there in file you&#39;re using.  If possible post a link to the file ( 3 rows of data  will be enough)"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 639, "user_id": 7046734, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RQ62P.jpg?s=128&g=1", "display_name": "Mayank", "link": "https://stackoverflow.com/users/7046734/mayank"}, "edited": false, "score": 0, "creation_date": 1491402375, "post_id": 43077897, "comment_id": 73538154, "body": "I&#39;m not able to post a link to the file but is there some other info I can provide?  Some way I can analyze the cell and give you the info you&#39;re looking for?"}], "answers": [{"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1490739034, "post_id": 43079865, "comment_id": 73244848, "body": "Thanks but that didn&#39;t work.  The string I posted still appears in decimal form -- &quot;0.011641319444444444&quot; ."}, {"owner": {"reputation": 384, "user_id": 7774072, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ec9d356ec80acef193cd97914b9e67c4?s=128&d=identicon&r=PG&f=1", "display_name": "AlexeyKuznetsov", "link": "https://stackoverflow.com/users/7774072/alexeykuznetsov"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1490863778, "post_id": 43079865, "comment_id": 73305579, "body": "Ok please give me link to original document. When I am creating xlsx document from Google docs Roo::Spreadsheet works correctly."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1490900482, "post_id": 43079865, "comment_id": 73331469, "body": "Yeah but this isn&#39;t .xlsx, its .xls.  I included more detailed file type information in my qestuion, the output of the &quot;file&quot; command."}], "tags": [], "owner": {"reputation": 384, "user_id": 7774072, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ec9d356ec80acef193cd97914b9e67c4?s=128&d=identicon&r=PG&f=1", "display_name": "AlexeyKuznetsov", "link": "https://stackoverflow.com/users/7774072/alexeykuznetsov"}, "is_accepted": false, "score": 0, "last_activity_date": 1490734883, "creation_date": 1490734883, "answer_id": 43079865, "question_id": 43077897, "link": "https://stackoverflow.com/questions/43077897/how-do-i-parse-an-excel-file-that-will-give-me-data-exactly-as-it-appears-visual/43079865#43079865", "title": "How do I parse an Excel file that will give me data exactly as it appears visually?", "body": "<p>You can use converters option. It seems looking like this:</p>\n\n<p><code>arr_of_arrs = CSV.parse(text, {converters: :date_time})</code></p>\n\n<p><a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/stdlib-2.0.0/libdoc/csv/rdoc/CSV.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491080180, "post_id": 43160953, "comment_id": 73398675, "body": "I&#39;m already using that.  I included &quot;gem &#39;roo-xls&#39;&quot; in my Gemfile."}], "tags": [], "owner": {"reputation": 1868, "user_id": 1362453, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f8ac2cc7e4e38841fb52ea58b4bf06ef?s=128&d=identicon&r=PG", "display_name": "Leo Brito", "link": "https://stackoverflow.com/users/1362453/leo-brito"}, "is_accepted": false, "score": 0, "last_activity_date": 1491074069, "creation_date": 1491074069, "answer_id": 43160953, "question_id": 43077897, "link": "https://stackoverflow.com/questions/43077897/how-do-i-parse-an-excel-file-that-will-give-me-data-exactly-as-it-appears-visual/43160953#43160953", "title": "How do I parse an Excel file that will give me data exactly as it appears visually?", "body": "<p>Your problem seems to be with the way you're parsing (reading) the input file.</p>\n\n<p><code>roo</code> parses only Excel 2007-2013 (<code>.xlsx</code>) files. From you question, you want to parse .xls, which is a different format.</p>\n\n<p>Like the documentation says, use the <a href=\"https://github.com/roo-rb/roo-xls\" rel=\"nofollow noreferrer\"><code>roo-xls</code></a> gem instead.</p>\n"}, {"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491226030, "post_id": 43163573, "comment_id": 73444840, "body": "I&#39;m not clear on what you&#39;re suggesting here.  WHat code shoudl I try out to attempt to get an answer here (remember links will break over time so its better to cut and paste code right into your answer)."}, {"owner": {"reputation": 609, "user_id": 4139603, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a1ff5589ce02a0ffc781774eb53bde6?s=128&d=identicon&r=PG", "display_name": "kleaver", "link": "https://stackoverflow.com/users/4139603/kleaver"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491228743, "post_id": 43163573, "comment_id": 73446923, "body": "I don&#39;t think what you&#39;re trying to do is possible right now without making changes to the spreadsheet gem :/  You could try checking out this <a href=\"https://github.com/zdavatz/spreadsheet/blob/master/GUIDE.md#date-and-datetime\" rel=\"nofollow noreferrer\">guide though</a>, it seems like it might be related, specifically something like: <code>book.add_format Format.new(:number_format =&gt; &#39;mm:ss:0&#39;)</code>  I got the <code>mm:ss:0</code> format by looking in excel at what the format of that cell is, but when I tried it out I couldn&#39;t get it to work with your use case."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491255078, "post_id": 43163573, "comment_id": 73462109, "body": "As I said in my question, I&#39;m not tied to using any particular type of gem.  If spreadsheet doesn&#39;t do it, then I&#39;m happy to use a different one.  Also, I&#39;m the eternal optimist and think everything is possible, so I&#39;m not going to award a bounty if the answer is &quot;it can&#39;t be done.&quot;"}], "tags": [], "owner": {"reputation": 609, "user_id": 4139603, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/7a1ff5589ce02a0ffc781774eb53bde6?s=128&d=identicon&r=PG", "display_name": "kleaver", "link": "https://stackoverflow.com/users/4139603/kleaver"}, "is_accepted": false, "score": 1, "last_activity_date": 1491094673, "creation_date": 1491094673, "answer_id": 43163573, "question_id": 43077897, "link": "https://stackoverflow.com/questions/43077897/how-do-i-parse-an-excel-file-that-will-give-me-data-exactly-as-it-appears-visual/43163573#43163573", "title": "How do I parse an Excel file that will give me data exactly as it appears visually?", "body": "<p>Under the hood <a href=\"https://github.com/roo-rb/roo-xls\" rel=\"nofollow noreferrer\">roo-xls gem</a> uses the <a href=\"https://github.com/zdavatz/spreadsheet\" rel=\"nofollow noreferrer\">spreadsheet gem</a> to parse the xls file. There was a similar issue to yours logged <a href=\"https://github.com/zdavatz/spreadsheet/issues/41\" rel=\"nofollow noreferrer\">here</a>, but it doesn't appear that there was any real resolution. Internally xls stores <code>16:45.81</code> as a Number and associates some formatting with it. I believe the issue has something to do with the spreadsheet gem not correctly handling the cell format.</p>\n\n<p>I did try messing around with adding a format <code>mm:ss.0</code> by following <a href=\"https://github.com/zdavatz/spreadsheet/blob/master/GUIDE.md#date-and-datetime\" rel=\"nofollow noreferrer\">this guide</a> but I couldn't get it to work, maybe you'll have more luck.</p>\n"}, {"comments": [{"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491402117, "post_id": 43220769, "comment_id": 73537922, "body": "I&#39;m downloading the file from teh Internet, but its not an option to manually stop the automated process I&#39;m running, manipulate the file by hand, and then re-kick off the process.  If you have a way of including code to execute yoru suggestion, I&#39;m in."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491430833, "post_id": 43220769, "comment_id": 73555310, "body": "Hey thanks for adding this converter.  I gave that a go but it didn&#39;t take -- still getting &quot;0.011641319444444444&quot; for the cell &quot;16:45.81&quot;?  When I right lcick on my cell in Excel (Office 2010 Professional) and select &quot;Format Cell&quot;, it defaults to the &quot;Number&quot; tab, has &quot;Custom&quot; selected in the &quot;Category&quot; field and &quot;mm:ss.0&quot; selected in the &quot;Type&quot; field.  Any way to make a converter so it presents the data the same way Excel does when you save the file to a CSV (taht is, the way it appears in the Excel doc)?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491438032, "post_id": 43220769, "comment_id": 73557314, "body": "You&#39;re talking about this line -- &quot;time = &quot;#{mm}:#{ss.round(2)}&quot;, you&#39;re saying change that to match the format I encountered?  By extension, woudl I need to have a case statement for every conceivable type of format?"}, {"owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491441896, "post_id": 43220769, "comment_id": 73558260, "body": "Change  <code>when &#39;time&#39; then</code>  I am running the case statement off of <code>case info[:header].strip</code>.  <code>time = &quot;#{mm}:#{ss.round(2)}&quot; </code> is just a local variable. If you look at the excel image I uploaded I have 2 headers, time and time_text. The decimals in the example I want to be formated are in the row with &quot;time&quot; as the header.  With your question on case statement and type of format. No you should be able to use Ruby&#39;s CSV built in converters to format most problems."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491487151, "post_id": 43220769, "comment_id": 73583359, "body": "I&#39;m not guaranteed taht the .xls headers will conform to any particular naming conventions.  Is there a way to auto-apply your converter to any cell in the document when that converter is needed?"}, {"owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491489649, "post_id": 43220769, "comment_id": 73585450, "body": "You have the field and info argument. info will return a struct <code>#&lt;struct CSV::FieldInfo index=0, line=2, header=&quot;time&quot;&gt;</code> and field will return the excel cells attribute. You need to figure out a way to pattern match your needs."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1491510125, "post_id": 43220769, "comment_id": 73598628, "body": "My needs are to export to CSV the same data I can visually see when I open the XLS doc in Office.  I don&#39;t want my data to look differently in the CSV than it does in Excel.  I&#39;m a novice at this so I need a lot of hand-holding, as you can tell from my questions.  I appreciate your help all the same."}], "tags": [], "owner": {"reputation": 1853, "user_id": 2501082, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/qdJBQ.jpg?s=128&g=1", "display_name": "David Gross", "link": "https://stackoverflow.com/users/2501082/david-gross"}, "is_accepted": false, "score": 3, "last_activity_date": 1491435244, "last_edit_date": 1491435244, "creation_date": 1491359135, "answer_id": 43220769, "question_id": 43077897, "link": "https://stackoverflow.com/questions/43077897/how-do-i-parse-an-excel-file-that-will-give-me-data-exactly-as-it-appears-visual/43220769#43220769", "title": "How do I parse an Excel file that will give me data exactly as it appears visually?", "body": "<p>You need to save the custom formula in a text format on the .xls side. If your opening the .xls file from the internet this won't work but this will fix your problem if you can manipulate the file. You can do this using the function <code>=TEXT(A2, \"mm:ss.0\")</code> A2 is just the cell I'm using as an example. </p>\n\n<p><a href=\"https://i.stack.imgur.com/NWQPK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NWQPK.png\" alt=\"enter image description here\"></a></p>\n\n<pre><code>book = ::Roo::Spreadsheet.open(file_location)\nputs book.cell('B', 2) \n=&gt; '16.45.8' \n</code></pre>\n\n<p>If manipulating the file is not an option you could just pass a custom converter to <code>CSV.new()</code> and convert the decimal time back to the correct format you need. </p>\n\n<pre><code>require 'roo-xls'\nrequire 'csv'\n\nCSV::Converters[:time_parser] = lambda do |field, info| \n  case info[:header].strip\n  when \"time\" then  begin \n                      # 0.011641319444444444 * 24 hours * 3600 seconds = 1005.81 \n                      parse_time =  field.to_f * 24 * 3600\n                      # 1005.81.divmod(60) = [16, 45.809999999999999945]\n                      mm, ss = parse_time.divmod(60)\n                      # returns \"16:45.81\"\n                      time = \"#{mm}:#{ss.round(2)}\"  \n                      time \n                    rescue\n                      field \n                    end\n  else \n    field  \n  end\nend\n\nbook = ::Roo::Spreadsheet.open(file_location)\nsheet = book.sheet(0)\ncsv = CSV.new(sheet.to_csv, headers: true, converters: [:time_parser]).map {|row| row.to_hash}\nputs csv \n=&gt; {\"time \"=&gt;\"16:45.81\"}\n   {\"time \"=&gt;\"12:46.0\"}\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1081, "favorite_count": 0, "answer_count": 4, "score": 7, "last_activity_date": 1509425692, "creation_date": 1490727936, "last_edit_date": 1509425692, "question_id": 43077897, "link": "https://stackoverflow.com/questions/43077897/how-do-i-parse-an-excel-file-that-will-give-me-data-exactly-as-it-appears-visual", "title": "How do I parse an Excel file that will give me data exactly as it appears visually?", "body": "<p>I'm on Rails 5 (Ruby 2.4).  I want to read an .xls doc and I would like to get the data into CSV format, just as it appears in the Excel file.  Someone recommended I use Roo, and so I have</p>\n\n<pre><code>book = Roo::Spreadsheet.open(file_location)\nsheet = book.sheet(0)\ntext = sheet.to_csv\narr_of_arrs = CSV.parse(text)\n</code></pre>\n\n<p>However what is getting returned is not the same as what I see in the spreadsheet.  For isntance, a cell in the spreadsheet has</p>\n\n<pre><code>16:45.81\n</code></pre>\n\n<p>and when I get the CSV data from above, what is returned is</p>\n\n<pre><code>\"0.011641319444444444\"\n</code></pre>\n\n<p>How do I parse the Excel doc and get exactly what I see?  I don't care if I use Roo to parse or not, just as long as I can get CSV data that is a representation of what I see rather than some weird internal representation.  For reference the file type I was parsing givies this when I run \"file name_of_file.xls\" ...</p>\n\n<pre><code>Composite Document File V2 Document, Little Endian, Os: Windows, Version 5.1, Code page: 1252, Author: Dwight Schroot, Last Saved By: Dwight Schroot, Name of Creating Application: Microsoft Excel, Create Time/Date: Tue Sep 21 17:05:21 2010, Last Saved Time/Date: Wed Oct 13 16:52:14 2010, Security: 0\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "printing"], "comments": [{"owner": {"reputation": 57, "user_id": 2814076, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/M5XU9.png?s=128&g=1", "display_name": "ramongr", "link": "https://stackoverflow.com/users/2814076/ramongr"}, "edited": false, "score": 1, "creation_date": 1490723857, "post_id": 43076423, "comment_id": 73236589, "body": "Check this post <a href=\"http://stackoverflow.com/questions/468881/print-div-id-printarea-div-only\" title=\"print div id printarea div only\">stackoverflow.com/questions/468881/&hellip;</a>"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1490724650, "post_id": 43076423, "comment_id": 73237066, "body": "can you show some more info on where you are putting this function and where you call it?"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "edited": false, "score": 0, "creation_date": 1490764140, "post_id": 43076423, "comment_id": 73251988, "body": "2 things: (1) Read <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>; pay special attention to the bit about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>s. (2) What does this have to do with Ruby?"}, {"owner": {"reputation": 27, "user_id": 4985751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50dda5ed8a39edea4902ac3c19c600aa?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/4985751/federico"}, "edited": false, "score": 0, "creation_date": 1491476558, "post_id": 43076423, "comment_id": 73575188, "body": "Sorry for the delay ... In my Rails view i&#39;ve a calendar (<a href=\"https://github.com/excid3/simple_calendar\" rel=\"nofollow noreferrer\">github.com/excid3/simple_calendar</a>). When i try to print the page the simple calendar does not appear in the print preview. That&#39;s a problem born recently. Because, when in the calendar there were few elements, i was able to print the page correctly."}], "owner": {"reputation": 27, "user_id": 4985751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50dda5ed8a39edea4902ac3c19c600aa?s=128&d=identicon&r=PG&f=1", "display_name": "Federico", "link": "https://stackoverflow.com/users/4985751/federico"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 173, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1490728304, "creation_date": 1490723038, "last_edit_date": 1490728304, "question_id": 43076423, "link": "https://stackoverflow.com/questions/43076423/js-print-function-doesnt-work-with-ruby-on-rails", "title": "JS print function doesn&#39;t work with Ruby on Rails", "body": "<p>In my Rails app I have an onClick function that sends to a printer a div of the page identified by an id. My problem is that it is not displaying the print preview in the Rails view. </p>\n\n<p>This is my JS function:</p>\n\n<pre><code>function printDiv(divName) {\n var printContents = document.getElementById(divName).innerHTML;\n var originalContents = document.body.innerHTML;\n\n document.body.innerHTML = printContents;\n\n window.print();\n\n document.body.innerHTML = originalContents;}\n</code></pre>\n\n<p>How can I solve this? Thanks!</p>\n"}, {"tags": ["ruby", "wicked-pdf"], "comments": [{"owner": {"reputation": 778, "user_id": 5687769, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OGS_dHjyp7s/AAAAAAAAAAI/AAAAAAAAACI/tHJG2NuXit4/photo.jpg?sz=128", "display_name": "Ankur  Jyoti Phukan", "link": "https://stackoverflow.com/users/5687769/ankur-jyoti-phukan"}, "edited": false, "score": 1, "creation_date": 1490722945, "post_id": 43076271, "comment_id": 73236086, "body": "<a href=\"https://github.com/mileszs/wicked_pdf/issues/546\" rel=\"nofollow noreferrer\">github.com/mileszs/wicked_pdf/issues/546</a> They are planing to add this feature in wicked pdf"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490738291, "post_id": 43076271, "comment_id": 73244519, "body": "Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; including the linked pages, &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and &quot;<a href=\"http://meta.stackoverflow.com/questions/261592\">How much research effort is expected of Stack Overflow users?</a>&quot;. We&#39;d like to see evidence of your effort. What did you try? Did you search and not find anything? Did you find stuff but it didn&#39;t help? Did you try writing code? If not, why? If so, what is the smallest code example that shows what you tried and why didn&#39;t it work? Without that it looks like you didn&#39;t try and want us to figure it out for you."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 7255662, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_BN4bKtlNIw/AAAAAAAAAAI/AAAAAAAAAFU/QajcZJS7WUQ/photo.jpg?sz=128", "display_name": "john s", "link": "https://stackoverflow.com/users/7255662/john-s"}, "is_accepted": false, "score": 0, "last_activity_date": 1490808822, "last_edit_date": 1490808822, "creation_date": 1490808493, "answer_id": 43100257, "question_id": 43076271, "link": "https://stackoverflow.com/questions/43076271/wicked-pdf-with-password-protection/43100257#43100257", "title": "Wicked PDF with password protection", "body": "<p>I had already gone through that link, but nothing happened.\nYes, it's true that they will be implementing in future but client wants password functionality within 2 or 3 days.</p>\n\n<p>So, therefore Now I'm trying to implement with Prawn gem which is a little difficult because  I'm not familiar with Prawn.\nPdf is too big therefore I am little worried because it can take time may be more than 1 week.</p>\n\n<p>But if anyone will suggest with wicked pdf, will be appreciated.</p>\n\n<p>Thanks</p>\n"}], "owner": {"reputation": 21, "user_id": 7255662, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_BN4bKtlNIw/AAAAAAAAAAI/AAAAAAAAAFU/QajcZJS7WUQ/photo.jpg?sz=128", "display_name": "john s", "link": "https://stackoverflow.com/users/7255662/john-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 280, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1490808822, "creation_date": 1490722573, "last_edit_date": 1490732917, "question_id": 43076271, "link": "https://stackoverflow.com/questions/43076271/wicked-pdf-with-password-protection", "title": "Wicked PDF with password protection", "body": "<p><strong>Can anyone tell me that how to make password on wicked PDF before open?</strong>\nOr</p>\n\n<p>Is there any way to make wicked pdf password protective.</p>\n"}, {"tags": ["ruby", "omniauth", "saml"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1490731180, "post_id": 43076206, "comment_id": 73240900, "body": "That&#39;s just producing a fingerprint. Given that SHA1 is toast it&#39;s probably a good idea to patch that, however I&#39;m not sure that presumes anything about the certificte&#39;s hash."}], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 4286830, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXtvJSDxIrc/AAAAAAAAAAI/AAAAAAAAACg/ZI_wZKY7hHQ/photo.jpg?sz=128", "display_name": "Arun Eapachen", "link": "https://stackoverflow.com/users/4286830/arun-eapachen"}, "edited": false, "score": 0, "creation_date": 1498718377, "post_id": 43080452, "comment_id": 76615924, "body": "so omniauth-saml supports SHA256 certificates as idp_cert ?"}, {"owner": {"reputation": 3, "user_id": 1769779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07747e97764c421f9d4b9faa2e7f2e4?s=128&d=identicon&r=PG", "display_name": "Ryan Forsyth", "link": "https://stackoverflow.com/users/1769779/ryan-forsyth"}, "reply_to_user": {"reputation": 119, "user_id": 4286830, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-dXtvJSDxIrc/AAAAAAAAAAI/AAAAAAAAACg/ZI_wZKY7hHQ/photo.jpg?sz=128", "display_name": "Arun Eapachen", "link": "https://stackoverflow.com/users/4286830/arun-eapachen"}, "edited": false, "score": 0, "creation_date": 1498834397, "post_id": 43080452, "comment_id": 76679252, "body": "Yep.  Most of the IdP certificates that our customers use are signed with SHA256."}], "tags": [], "owner": {"reputation": 3, "user_id": 1769779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07747e97764c421f9d4b9faa2e7f2e4?s=128&d=identicon&r=PG", "display_name": "Ryan Forsyth", "link": "https://stackoverflow.com/users/1769779/ryan-forsyth"}, "is_accepted": false, "score": 0, "last_activity_date": 1490737214, "creation_date": 1490737214, "answer_id": 43080452, "question_id": 43076206, "link": "https://stackoverflow.com/questions/43076206/does-omniauth-saml-support-only-sha1/43080452#43080452", "title": "Does omniauth-saml support only SHA1?", "body": "<p>Looks tadman is right, and the answer to my question is that code does not mean that omniauth-saml does not support other hashing algorithms.</p>\n\n<p>What that code says is: use the SHA1 algorithm to generate a <em>fingerprint</em>.  It does not care what algorithm was used to generate the original certificate.</p>\n"}], "owner": {"reputation": 3, "user_id": 1769779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07747e97764c421f9d4b9faa2e7f2e4?s=128&d=identicon&r=PG", "display_name": "Ryan Forsyth", "link": "https://stackoverflow.com/users/1769779/ryan-forsyth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490737214, "creation_date": 1490722390, "question_id": 43076206, "link": "https://stackoverflow.com/questions/43076206/does-omniauth-saml-support-only-sha1", "title": "Does omniauth-saml support only SHA1?", "body": "<p>We would like to update the certificate that we use with our SAML integrations to SHA256.  We're using the omniauth-saml and ruby-saml gems to implement SSO.</p>\n\n<p>Based on this code, it looks like omniauth-saml assumes that the IdP's certificate uses SHA1.\n<a href=\"https://github.com/omniauth/omniauth-saml/blob/master/lib/omniauth/strategies/saml.rb#L96\" rel=\"nofollow noreferrer\">https://github.com/omniauth/omniauth-saml/blob/master/lib/omniauth/strategies/saml.rb#L96</a></p>\n\n<p>So, two questions:\n1) Is there any way to allow the IdP to use a different hashing algorithm with omniauth-saml?\n2) Would it work for us to upgrade our cert to SHA256, while still leaving the IdP's cert on SHA1?</p>\n"}, {"tags": ["ruby", "module", "callback", "mixins"], "comments": [{"owner": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1490723854, "post_id": 43075503, "comment_id": 73236588, "body": "<code>included</code> callback is what you want, I don&#39;t understand what&#39;s your confusion"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1036, "user_id": 5078051, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/10203328378168774/picture?type=large", "display_name": "Hsiu Chuan Tsao", "link": "https://stackoverflow.com/users/5078051/hsiu-chuan-tsao"}, "edited": false, "score": 0, "creation_date": 1490735481, "post_id": 43075503, "comment_id": 73243224, "body": "@Tsao, it&#39;s not so cut-and-dried. If class <code>C</code> includes module <code>M</code> and <code>M</code> uses <code>included</code> to include <code>M</code> in another class <code>D</code> (<code>D.include(M)</code>), <code>M</code>&#39;s  callback <code>included</code> that will cause <code>M</code> to be included into <code>D</code> a second time, then a third time, and so on."}], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 3712482, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c42da3645841a0187d881b9df1abae70?s=128&d=identicon&r=PG&f=1", "display_name": "user3712482", "link": "https://stackoverflow.com/users/3712482/user3712482"}, "edited": false, "score": 0, "creation_date": 1490809755, "post_id": 43076726, "comment_id": 73282966, "body": "Thanks! This looks like just what I want."}], "tags": [], "owner": {"reputation": 1416, "user_id": 2158047, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de446e3908577afc8e15827ca208d5fd?s=128&d=identicon&r=PG", "display_name": "Rene Hernandez", "link": "https://stackoverflow.com/users/2158047/rene-hernandez"}, "is_accepted": true, "score": 3, "last_activity_date": 1490724365, "last_edit_date": 1490724365, "creation_date": 1490723956, "answer_id": 43076726, "question_id": 43075503, "link": "https://stackoverflow.com/questions/43075503/ruby-callback-when-any-module-is-included/43076726#43076726", "title": "Ruby callback when any module is included", "body": "<p>I cannot think or find a builtin way in Ruby to do it.</p>\n\n<p>One alternative would be to monkey patch the <code>Module</code> class directly to create the callback. To do it we can add some wrapper methods around the original methods <code>include</code> and <code>extend</code> to force the execution of our defined callbacks each time the <code>include</code> or <code>extend</code> methods are called.</p>\n\n<p>Something along the following lines should work:</p>\n\n<pre><code>class Module\n\n  def self.before\n    m_include = instance_method(:include)\n    m_extend = instance_method(:extend)\n\n    define_method(:include) do |*args, &amp;block|\n      included_callback(args[0])\n      m_include.bind(self).call(*args, &amp;block)\n    end\n\n    define_method(:extend) do |*args, &amp;block|\n      extend_callback(args[0])\n      m_extend.bind(self).call(*args, &amp;block)\n    end\n  end\n\n  def included_callback(mod_name)\n    puts \"#{self} now has included Module #{mod_name}\"\n  end\n\n  def extend_callback(mod_name)\n    puts \"#{self} now has extended Module #{mod_name}\"\n  end\n\n  before\nend\n</code></pre>\n\n<p>An example to test that it works:</p>\n\n<pre><code>module Awesome\n\n  def bar\n    puts \"bar\"\n  end\n\n  def self.baz\n    puts \"baz\"\n  end\nend\n\nclass TestIncludeAwesome\n  include Awesome\nend\n\nclass TestExtendAwesome\n  extend Awesome\nend\n</code></pre>\n\n<p>The example code should print as output the following:</p>\n\n<pre><code>&gt; TestIncludeAwesome now has included Module Awesome\n&gt; TestExtendAwesome now has extended Module Awesome\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1490735144, "last_edit_date": 1490735144, "creation_date": 1490725242, "answer_id": 43077103, "question_id": 43075503, "link": "https://stackoverflow.com/questions/43075503/ruby-callback-when-any-module-is-included/43077103#43077103", "title": "Ruby callback when any module is included", "body": "<pre><code>class D\n  def self.callback(mod)\n    include mod\n  end\nend\n\nmodule M\n  def hello\n    puts 'hi'\n  end\n\n  def self.included(klass)\n    D.callback(self) unless klass == D\n  end\nend\n\nclass C\n  include M\nend\n\nC.new.hello #=&gt; 'hi'\nD.new.hello #=&gt; 'hi'\n</code></pre>\n\n<p>When <code>C</code> includes <code>M</code>, <code>M::included</code> is executed with <code>klass#=&gt;C</code>. Since <code>klass == D</code> is <code>false</code>, <code>D.callback(M)</code> is executed. <code>callback</code> includes <code>M</code> in class <code>D</code>, then <code>M::included</code> is executed with <code>klass#=&gt;D</code>. Since <code>klass == D</code> is now true, <code>M</code> is not included into <code>D</code> a second time. </p>\n"}], "owner": {"reputation": 83, "user_id": 3712482, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/c42da3645841a0187d881b9df1abae70?s=128&d=identicon&r=PG&f=1", "display_name": "user3712482", "link": "https://stackoverflow.com/users/3712482/user3712482"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 765, "favorite_count": 0, "accepted_answer_id": 43076726, "answer_count": 2, "score": 1, "last_activity_date": 1490735144, "creation_date": 1490720069, "question_id": 43075503, "link": "https://stackoverflow.com/questions/43075503/ruby-callback-when-any-module-is-included", "title": "Ruby callback when any module is included", "body": "<p>I know that we can define the <code>included</code> callback for any individual module. </p>\n\n<p>Is there any way to define a callback that is invoked whenever <em>any</em> module gets included in another module or class? The callback would then preferably have access to both the module included, and the class/module where it is included.</p>\n"}, {"tags": ["ruby", "metaprogramming", "encapsulation"], "answers": [{"comments": [{"owner": {"reputation": 481, "user_id": 4531903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/B7uhO.png?s=128&g=1", "display_name": "DeFazer", "link": "https://stackoverflow.com/users/4531903/defazer"}, "edited": false, "score": 1, "creation_date": 1490753841, "post_id": 43075806, "comment_id": 73248982, "body": "Thank you for the answer, but it&#39;s not exactly what I&#39;m looking for. I already know how encapsulation in Ruby works and the results of calling these methods, I&#39;m trying to understand what they do <i>under the hood</i>. Please, reread the question. I don&#39;t know about C++ much, so digging interpreter&#39;s source code by myself would only cause more confusion. Code snippets really help, yet could you please explain more about what <code>SCOPE_SET</code> and <code>set_method_visibility</code> do? Could the effects of <code>public</code> / <code>protected</code> / <code>private</code> be reproduced in pure Ruby, for instance, or are they hard-coded? Thanks!"}], "tags": [], "owner": {"reputation": 16229, "user_id": 525478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3b6c0b47a0c430a0b141baee7ea845be?s=128&d=identicon&r=PG", "display_name": "Brad Werth", "link": "https://stackoverflow.com/users/525478/brad-werth"}, "is_accepted": false, "score": 1, "last_activity_date": 1490721068, "last_edit_date": 1495542326, "creation_date": 1490721068, "answer_id": 43075806, "question_id": 43075366, "link": "https://stackoverflow.com/questions/43075366/what-exactly-do-the-public-private-and-protected-methods-do/43075806#43075806", "title": "What *exactly* do the &quot;public&quot;, &quot;private&quot; and &quot;protected&quot; methods do?", "body": "<p>Exactly?</p>\n\n<p><strong>public</strong> \n<a href=\"http://apidock.com/ruby/Module/public\" rel=\"nofollow noreferrer\">http://apidock.com/ruby/Module/public</a></p>\n\n<blockquote>\n  <p>With no arguments, sets the default visibility for subsequently defined methods to public. With arguments, sets the named methods to have public visibility.</p>\n</blockquote>\n\n<p><em>Source:</em></p>\n\n<pre><code>static VALUE\nrb_mod_public(int argc, VALUE *argv, VALUE module)\n{\n    secure_visibility(module);\n    if (argc == 0) {\n        SCOPE_SET(NOEX_PUBLIC);\n    }\n    else {\n        set_method_visibility(module, argc, argv, NOEX_PUBLIC);\n    }\n    return module;\n}\n</code></pre>\n\n<p><strong>private</strong> <a href=\"http://apidock.com/ruby/Module/private\" rel=\"nofollow noreferrer\">http://apidock.com/ruby/Module/private</a></p>\n\n<blockquote>\n  <p>With no arguments, sets the default visibility for subsequently\n  defined methods to private. With arguments, sets the named methods to\n  have private visibility.</p>\n</blockquote>\n\n<p><em>Source:</em></p>\n\n<pre><code>static VALUE\nrb_mod_private(int argc, VALUE *argv, VALUE module)\n{\n    secure_visibility(module);\n    if (argc == 0) {\n        SCOPE_SET(NOEX_PRIVATE);\n    }\n    else {\n        set_method_visibility(module, argc, argv, NOEX_PRIVATE);\n    }\n    return module;\n}\n</code></pre>\n\n<p><strong>protected</strong> <a href=\"http://apidock.com/ruby/Module/protected\" rel=\"nofollow noreferrer\">http://apidock.com/ruby/Module/protected</a></p>\n\n<blockquote>\n  <p>With no arguments, sets the default visibility for subsequently\n  defined methods to protected. With arguments, sets the named methods\n  to have protected visibility.</p>\n</blockquote>\n\n<p><em>source</em></p>\n\n<pre><code>static VALUE\nrb_mod_protected(int argc, VALUE *argv, VALUE module)\n{\n    secure_visibility(module);\n    if (argc == 0) {\n        SCOPE_SET(NOEX_PROTECTED);\n    }\n    else {\n        set_method_visibility(module, argc, argv, NOEX_PROTECTED);\n    }\n    return module;\n}\n</code></pre>\n\n<hr>\n\n<p>This doesn't really help with actual applications for this information, however. You may find more real-world applicable information on questions like <a href=\"https://stackoverflow.com/questions/9882754/what-are-the-differences-between-private-public-and-protected-methods\">What are the differences between &quot;private&quot;, &quot;public&quot;, and &quot;protected methods&quot;?</a> and\n<a href=\"https://stackoverflow.com/questions/3534449/why-does-ruby-have-both-private-and-protected-methods\">Why does Ruby have both private and protected methods?</a>.</p>\n"}], "owner": {"reputation": 481, "user_id": 4531903, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/B7uhO.png?s=128&g=1", "display_name": "DeFazer", "link": "https://stackoverflow.com/users/4531903/defazer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 494, "favorite_count": 1, "answer_count": 1, "score": 3, "last_activity_date": 1490721068, "creation_date": 1490719651, "question_id": 43075366, "link": "https://stackoverflow.com/questions/43075366/what-exactly-do-the-public-private-and-protected-methods-do", "title": "What *exactly* do the &quot;public&quot;, &quot;private&quot; and &quot;protected&quot; methods do?", "body": "<p>Almost all decent resources about OOP in Ruby state the existence of access modifiers - keywords <code>public</code>, <code>private</code> and <code>protected</code> - and show how to properly use them. Fewer go to the extent of explaining that these modifiers are <em>not</em> keywords, but are actual methods and that calling them modifies visibility of all methods defined in the future in this particular class. However, I couldn't find any information about <em>how</em> they actually do that. Do they change a special internal variable, or do they alter properties of current scope/binding, or do they set some specific interpreter flag, or... or what?</p>\n\n<p>I've done a little research on my own, but it left me even more confused than before. Consider the following code snippet:</p>\n\n<pre><code>class Test\n    public\n    define_method :public_define_method do \n        puts 'Public define_method'\n    end\n\n    private\n    define_method :private_define_method do \n        puts 'Private define_method'\n    end\n\n    public\n    def public_def\n        puts 'Public def'\n    end\n\n    private\n    def private_def\n        puts 'Private def'\n    end\nend\n\nt = Test.new\n\nt.public_define_method\nt.private_define_method\nt.public_def\nt.private_def\n\n#Output:\n#&gt; Public define_method\n#&gt; Private define_method\n#&gt; Public def\n#&gt; sandbox.rb:29:in `&lt;main&gt;': private method `private_def' called for #&lt;Test:0x00000001cdfd38&gt; (NoMethodError)\n</code></pre>\n\n<p>I always thought as <code>def</code> as a sort of optimized syntactic sugar for <code>define_method</code> with an additional quirk of creating new variable visibility scope, but, obviously, there seems to be more to it - methods created with <code>def</code> are affected by <code>private</code>/<code>public</code> modifiers, while those created with <code>define_method</code> are not. Furthermore, <code>define_method</code> <a href=\"http://ruby-doc.org/core-2.0.0/Module.html#method-i-define_method\" rel=\"nofollow noreferrer\">doesn't have</a> any arguments related to changing method's visibility, which led me to the conclusion that information about it must be stored in classes, not methods themselves - and so should be the flag set by access modifiers. But why then <code>def</code> so differs from <code>define_method</code>? What happens in the background? Does it check the flag set by access modifier methods and then adds itself into some special hidden register of class' private/protected methods?..</p>\n\n<p>In short, I'm very confused and would be very glad if comeone could please clarify the issue. Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "localhost", "redmine"], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": false, "score": 2, "last_activity_date": 1490720026, "creation_date": 1490720026, "answer_id": 43075492, "question_id": 43075142, "link": "https://stackoverflow.com/questions/43075142/redmine-rails-server-stack-level-too-deep-error/43075492#43075492", "title": "Redmine Rails server stack level too deep error", "body": "<p>This is a known bug in older versions of rails, caused by the unification of FixNum and Integer in ruby 2.4. For more information, check out the <a href=\"https://github.com/rails/rails/issues/25125\" rel=\"nofollow noreferrer\">bug report discussion</a>.</p>\n\n<p>I'm looking at the repository now, and it sure looks like redmine has since fixed the issue and is now using rails 4.2.8; however your error suggests you're on rails 4.2.3.</p>\n\n<p>You should run <code>git pull</code> to update your clone. If for some reason you want to use the old version of redmine, you'll have to downgrade to ruby 2.3.</p>\n"}], "owner": {"reputation": 21, "user_id": 7779193, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1de55f6ed938e2ed745105faf86841f4?s=128&d=identicon&r=PG&f=1", "display_name": "Vincent Chow", "link": "https://stackoverflow.com/users/7779193/vincent-chow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1490732611, "creation_date": 1490719011, "last_edit_date": 1490732611, "question_id": 43075142, "link": "https://stackoverflow.com/questions/43075142/redmine-rails-server-stack-level-too-deep-error", "title": "Redmine Rails server stack level too deep error", "body": "<p>Just cloned a Redmine source code from github using <code>git clone git://github.com/redmine/redmine.git</code>, then run <code>gem install bundler</code> and <code>bundle install</code>. After that, the following error occurs when I run the <code>rails server</code>. </p>\n\n<p>I am running <code>MacOS Sierra</code> with <code>ruby 2.4.0p0 (2016-12-24 revision 57164) [x86_64-darwin16]</code> and <code>Rails 4.2.3</code>.</p>\n\n<p>Anyone has the solution for this issue? How can I solve it?</p>\n\n<p><a href=\"https://i.stack.imgur.com/pb1Bz.png\" rel=\"nofollow noreferrer\">Screenshot of Error Message</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ahoy"], "answers": [{"comments": [{"owner": {"reputation": 1630, "user_id": 7699452, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-62_IPk-ZAgI/AAAAAAAAAAI/AAAAAAAAAHw/FsxABteXEdc/photo.jpg?sz=128", "display_name": "Mathews Sunny", "link": "https://stackoverflow.com/users/7699452/mathews-sunny"}, "edited": false, "score": 0, "creation_date": 1511698351, "post_id": 47495821, "comment_id": 81947095, "body": "when you have more reputation you can write comments. Never write comments as answers."}, {"owner": {"reputation": 36, "user_id": 8372032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d1b0801eddbf27f585fedd99bd925c?s=128&d=identicon&r=PG&f=1", "display_name": "ruby ninja", "link": "https://stackoverflow.com/users/8372032/ruby-ninja"}, "reply_to_user": {"reputation": 1630, "user_id": 7699452, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh5.googleusercontent.com/-62_IPk-ZAgI/AAAAAAAAAAI/AAAAAAAAAHw/FsxABteXEdc/photo.jpg?sz=128", "display_name": "Mathews Sunny", "link": "https://stackoverflow.com/users/7699452/mathews-sunny"}, "edited": false, "score": 0, "creation_date": 1511780523, "post_id": 47495821, "comment_id": 81974445, "body": "thanks for your comment , but it is an answer I guess"}], "tags": [], "owner": {"reputation": 36, "user_id": 8372032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d1b0801eddbf27f585fedd99bd925c?s=128&d=identicon&r=PG&f=1", "display_name": "ruby ninja", "link": "https://stackoverflow.com/users/8372032/ruby-ninja"}, "is_accepted": true, "score": 1, "last_activity_date": 1511696984, "creation_date": 1511696984, "answer_id": 47495821, "question_id": 43075077, "link": "https://stackoverflow.com/questions/43075077/ahoy-gem-how-to-not-save-ahoy-track-record-into-db-when-page-is-reloaded/47495821#47495821", "title": "Ahoy gem, how to not save ahoy.track record into DB when page is reloaded?", "body": "<p>try in your view :</p>\n\n<pre><code>&lt;% ahoy.track_visit unless current_visit %&gt;\n</code></pre>\n"}], "owner": {"reputation": 323, "user_id": 4054684, "user_type": "registered", "accept_rate": 38, "profile_image": "https://lh6.googleusercontent.com/-wjxce8yMONk/AAAAAAAAAAI/AAAAAAAAAgE/xD7t1kCNF4g/photo.jpg?sz=128", "display_name": "sreang rathanak", "link": "https://stackoverflow.com/users/4054684/sreang-rathanak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 47495821, "answer_count": 1, "score": 0, "last_activity_date": 1511696984, "creation_date": 1490718815, "last_edit_date": 1490737946, "question_id": 43075077, "link": "https://stackoverflow.com/questions/43075077/ahoy-gem-how-to-not-save-ahoy-track-record-into-db-when-page-is-reloaded", "title": "Ahoy gem, how to not save ahoy.track record into DB when page is reloaded?", "body": "<p>I want to count how many views my page has received.\nSo, I try to use the Ahoy gem and add the following line into my action:</p>\n\n<p><a href=\"https://github.com/ankane/ahoy#ruby\" rel=\"nofollow noreferrer\">https://github.com/ankane/ahoy#ruby</a></p>\n\n<p>Then it records when a visitor views that <code>action</code>, but it also records every time the <code>action</code> has been called, even when user reloads the page.</p>\n\n<p>What I want is: if this is that the user's first visit we record it. But if they just reload page or they re-visit that page in a short amount of time, we will not save <code>ahoy.track</code> into our DB.</p>\n\n<p>So, do anyone have a solution for this? </p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1490730075, "post_id": 43074014, "comment_id": 73240266, "body": "I don&#39;t totally follow why <code>method(:to_s).to_proc.call(12)</code> raises an error but <code>:to_s.to_proc.call(12)</code> runs without error."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1490731268, "post_id": 43074014, "comment_id": 73240947, "body": "@Jwan622: because that&#39;s how it works. <code>[12, 13].map(&amp;:to_s)</code> is equivalent to <code>[12, 13].map { |elem| elem.to_s }</code>. Whereas <code>[12, 13].map(&amp;method(:to_s))</code> is equivalent to <code>[12, 13].map {|elem| to_s(elem)}</code>. Notice the difference?"}, {"owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1490829705, "post_id": 43074014, "comment_id": 73292941, "body": "And that&#39;s just the rule of the language? Does <code>12.&amp;method(:to_s)</code>  really just a wrapper over <code>method(:to_s).to_proc.call(12)</code>? What does <code>&amp;method</code> resolve to anyway?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1490856503, "post_id": 43074014, "comment_id": 73301077, "body": "@Jwan622: there&#39;s no &quot;&amp;method&quot;. There&#39;s <code>method</code> and then there&#39;s <code>&amp;</code>. See examples above."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "edited": false, "score": 0, "creation_date": 1490856618, "post_id": 43074014, "comment_id": 73301139, "body": "@Jwan622: &quot;Does 12.&amp;method(:to_s) really just a wrapper&quot; - nope, it&#39;s invalid ruby, not a wrapper."}, {"owner": {"reputation": 1855, "user_id": 888278, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/uPEzb.jpg?s=128&g=1", "display_name": "steady_daddy", "link": "https://stackoverflow.com/users/888278/steady-daddy"}, "edited": false, "score": 1, "creation_date": 1534004158, "post_id": 43074014, "comment_id": 90559421, "body": "Your contrived example made the understanding much simpler. Thanks for sharing."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 6, "last_activity_date": 1490722489, "last_edit_date": 1490722489, "creation_date": 1490715712, "answer_id": 43074014, "question_id": 43073825, "link": "https://stackoverflow.com/questions/43073825/rubys-method-notation-what-is-going-on/43074014#43074014", "title": "Ruby&#39;s &amp;method notation. what is going on?", "body": "<p>In <code>&amp;method(:to_s)</code>, <code>.to_s</code> is taken from current context (top level object <code>main</code>). This version is already bound to receiver and does not accept further arguments. But an argument will be passed by <code>.map</code> (each element of the array), that's what it does.</p>\n\n<p>Take a look at this step-by-step reconstruction of what's happening</p>\n\n<pre><code>to_s # =&gt; \"main\"\nmethod(:to_s) # =&gt; #&lt;Method: main.to_s&gt;\nmethod(:to_s).to_proc # =&gt; #&lt;Proc:0x007ff73a27e1e0 (lambda)&gt;\nmethod(:to_s).to_proc.call(12) # =&gt; \n# ~&gt; -:6:in `to_s': wrong number of arguments (given 1, expected 0) (ArgumentError)\n# ~&gt;    from -:6:in `&lt;main&gt;'\n</code></pre>\n\n<p>Now compare to what would happen if it was <code>.map(&amp;:to_s)</code></p>\n\n<pre><code>:to_s.to_proc.call(12) # =&gt; \"12\"\n</code></pre>\n\n<blockquote>\n  <p>I came across the <code>&amp;method</code> in a codebase</p>\n</blockquote>\n\n<p>It can be useful in situations like this: apply a piece of logic to each element, but this logic comes from the current context, completely external to the elements. Take a look at this contrived example:</p>\n\n<pre><code>class Tweet\n  attr_accessor :text\n\n  def initialize(text)\n    @text = text\n  end\n\n  def shortened_links\n    find_links.map(&amp;method(:shorten_link))\n    # same as\n    # find_links.map {|link| shorten_link(link) }\n  end\n\n  private\n\n  def find_links\n    # detect links in text\n  end\n\n  def shorten_link(url)\n    # use bit.ly or whatever\n  end\nend\n</code></pre>\n\n<p>Here <code>links</code> is a collection of strings. They most certainly can't shorten themselves.</p>\n"}, {"tags": [], "owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "is_accepted": false, "score": 1, "last_activity_date": 1490718786, "last_edit_date": 1490718786, "creation_date": 1490716061, "answer_id": 43074137, "question_id": 43073825, "link": "https://stackoverflow.com/questions/43073825/rubys-method-notation-what-is-going-on/43074137#43074137", "title": "Ruby&#39;s &amp;method notation. what is going on?", "body": "<p>Here is your code where <code>&amp;</code> literal replaced by appropriate block:</p>\n\n<pre><code>[12,3].map { |v| to_s(v) }\n\n[\"12\",\"3\"].map { |v| Integer(v) }\n</code></pre>\n\n<p>When it called in console, <code>to_s</code> and <code>Integer</code> are methods in <code>Object</code> class. (Technically <code>Integer()</code> is from <code>Kernel</code>, that is included in Object).</p>\n\n<p><code>to_s</code> <a href=\"http://api.rusrails.ru/ruby/classes/Object.html#method-i-to_s\" rel=\"nofollow noreferrer\">definition</a> has no arguments, that is why you get <code>ArgumentError</code>.</p>\n\n<p><code>Integer</code> <a href=\"http://api.rusrails.ru/ruby/classes/Kernel.html#method-i-Integer\" rel=\"nofollow noreferrer\">method</a> could accept 1 or 2 arguments.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3714947, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2854d483bfcdab9247d02f3ce428ad1?s=128&d=identicon&r=PG&f=1", "display_name": "Emil Dimitrov", "link": "https://stackoverflow.com/users/3714947/emil-dimitrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1563737393, "last_edit_date": 1563737393, "creation_date": 1563736201, "answer_id": 57136212, "question_id": 43073825, "link": "https://stackoverflow.com/questions/43073825/rubys-method-notation-what-is-going-on/57136212#57136212", "title": "Ruby&#39;s &amp;method notation. what is going on?", "body": "<p><code>method()</code> is a way in Ruby to convert a regular method into a passable object. It returns an object of type Method. Given that there is a &amp; in front of the <code>method()</code> call, the returned Method object receives a #to_proc message.\nMethod#to_proc returns a lambda, that passes along the arguments it receives to a call to the original method. </p>\n\n<pre><code>class Method\n  def to_proc\n    lambda { |*args| self.call(*args) }\n  end\nend\n</code></pre>\n\n<p>This is a simplified view of what happens in the case of #to_s:</p>\n\n<pre><code>[1, 2, 3].map { |n| to_s.call(n) } # ArgumentError\n</code></pre>\n"}], "owner": {"reputation": 8818, "user_id": 2714301, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/23c7ba1f14e71e14f65b7b95516b0f19?s=128&d=identicon&r=PG", "display_name": "Jwan622", "link": "https://stackoverflow.com/users/2714301/jwan622"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1123, "favorite_count": 3, "answer_count": 3, "score": 2, "last_activity_date": 1563737393, "creation_date": 1490715200, "last_edit_date": 1490715569, "question_id": 43073825, "link": "https://stackoverflow.com/questions/43073825/rubys-method-notation-what-is-going-on", "title": "Ruby&#39;s &amp;method notation. what is going on?", "body": "<p>I came across the <code>&amp;method</code> in a codebase and I have no idea what is going on. This happens in <code>irb</code>:</p>\n\n<pre><code>[12,3].map(&amp;method(:to_s))\n#=&gt; ArgumentError: wrong number of arguments (given 1, expected 0)\n[\"12\",\"3\"].map(&amp;method(:Integer))\n#=&gt; [12, 3]\n</code></pre>\n\n<p>What is going on here?</p>\n\n<p>I'm familiar with &amp; being equal to <code>to_proc</code>, but I still can't connect the dots here.</p>\n"}, {"tags": ["ruby", "ubuntu", "sinatra", "rvm", "rackup"], "answers": [{"tags": [], "owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "is_accepted": true, "score": 0, "last_activity_date": 1490716668, "creation_date": 1490716668, "answer_id": 43074397, "question_id": 43073542, "link": "https://stackoverflow.com/questions/43073542/where-do-i-have-to-start-the-service-rackup-for-sinatra-while-using-rvm-on-ubu/43074397#43074397", "title": "Where do i have to start the service &#39;rackup&#39; for sinatra while using rvm on ubuntu", "body": "<p>You can start your sinatra rack simply by loading your sinatra app with ruby in the command line:</p>\n\n<pre><code>=&gt;ruby app.rb\n</code></pre>\n\n<p>A <em>config.ru</em> file is only necessary if you're trying to do something weird with rack or are deploying your app to Heroku or some other service which handles its own rack. </p>\n"}], "owner": {"reputation": 47, "user_id": 6251123, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/r1iZM.jpg?s=128&g=1", "display_name": "AlaskaStack", "link": "https://stackoverflow.com/users/6251123/alaskastack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 276, "favorite_count": 0, "accepted_answer_id": 43074397, "answer_count": 1, "score": 0, "last_activity_date": 1490716668, "creation_date": 1490714473, "question_id": 43073542, "link": "https://stackoverflow.com/questions/43073542/where-do-i-have-to-start-the-service-rackup-for-sinatra-while-using-rvm-on-ubu", "title": "Where do i have to start the service &#39;rackup&#39; for sinatra while using rvm on ubuntu", "body": "<p>i am developoing an webapp in the IDE rubymine on ubuntu and i recently installed the gem sinatra for my gemsets to write an REST-API for my webapp. I have a little start problem because i dont know where i should write the 'rackup' command after i created the app.rb and config.ru. My ubuntu doesn't know rackup because of rvm. It tells me i should install ruby-rack but isn't sinatra supposed to have it on board? Is it a problem if the gem rack 2.0.1 is also installed in the same gemset?</p>\n\n<p>I have tried to start rackup with the system terminal. It did not work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file", "binary", "7zip"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490714861, "post_id": 43073477, "comment_id": 73230891, "body": "Well, it logically follows that <code>part.body.decoded</code> does not represent a valid 7z byte stream. Is it Base64 stream instead?  Or you need to write the other part first? Or the other party sends you garbage? Or something else."}, {"owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "edited": false, "score": 1, "creation_date": 1490720069, "post_id": 43073477, "comment_id": 73234452, "body": "It&#39;s not encoded.  37 7A BC AF 27 1C is officially a 7z header (note 37 7A) (side note: it&#39;s scary that I can look at &quot;37 7A&quot; and know what that is).  If it was still base 64 encoded that wouldn&#39;t be there.  The question I would ask the original poster is &quot;how do you know the 7z file coming from the other side is valid?&quot;"}, {"owner": {"reputation": 11, "user_id": 7780614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206b79a1710271e9d8ad830b9f2e565?s=128&d=identicon&r=PG&f=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/7780614/joris"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490722931, "post_id": 43073477, "comment_id": 73236075, "body": "@SergioTulentsev, the other party assures me it&#39;s a valid 7zip with a xml inside with in this xml Base64 encoded smaller files. I&#39;ve asked them to email me the original 7zip, but they say they can&#39;t. We&#39;re not the only party connecting with them, so for now I have to believe them ..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "edited": false, "score": 1, "creation_date": 1490723361, "post_id": 43073477, "comment_id": 73236321, "body": "@MichaelChaney: yeah, presence of null bytes makes it pretty clear that this is no base64. But I needed one more question for the volume. :)"}, {"owner": {"reputation": 11, "user_id": 7780614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206b79a1710271e9d8ad830b9f2e565?s=128&d=identicon&r=PG&f=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/7780614/joris"}, "edited": false, "score": 0, "creation_date": 1490723522, "post_id": 43073477, "comment_id": 73236413, "body": "I&#39;ve updated the post with a piece of the string. It&#39;s to big to post, so I&#39;ve removed part of the middle section."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490724131, "post_id": 43073477, "comment_id": 73236747, "body": "Please don&#39;t use &quot;Javascript/HTML/CSS code snippet&quot; button for posting code that is not a mix of JS, HTML and CSS. That thing is meant for runnable pieces of code (you press a button and see it work). For all other code (and things like that binary output), use &quot;code sample&quot; button."}, {"owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "edited": false, "score": 1, "creation_date": 1490724686, "post_id": 43073477, "comment_id": 73237088, "body": "The next question would be &quot;is it complete&quot;?  At this point, I would write a parser to show the high level chunks in the 7z file along with a type and length and set it loose on this to see if the file is complete or otherwise corrupt."}, {"owner": {"reputation": 11, "user_id": 7780614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206b79a1710271e9d8ad830b9f2e565?s=128&d=identicon&r=PG&f=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/7780614/joris"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1490725846, "post_id": 43073477, "comment_id": 73237789, "body": "@SergioTulentsev thnx for the tip"}, {"owner": {"reputation": 11, "user_id": 7780614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206b79a1710271e9d8ad830b9f2e565?s=128&d=identicon&r=PG&f=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/7780614/joris"}, "reply_to_user": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "edited": false, "score": 0, "creation_date": 1490725880, "post_id": 43073477, "comment_id": 73237808, "body": "@MichaelChaney that&#39;s what I&#39;m going to do"}, {"owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1490735323, "post_id": 43073477, "comment_id": 73243141, "body": "I agree with Michael, those first 6 bytes look correct for a 7z file. Can you make the request using a soap testing tool, save that file and compare them?"}, {"owner": {"reputation": 11, "user_id": 7780614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206b79a1710271e9d8ad830b9f2e565?s=128&d=identicon&r=PG&f=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/7780614/joris"}, "reply_to_user": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1490782680, "post_id": 43073477, "comment_id": 73262658, "body": "@MarcRohloff that was a superb tip. Just ran the same SOAP request with SoapGUI and this is the first line: &quot;7z\\xBC\\xAF&#39;\\u001C\\u0000\\u0003\\x8D\\xB4\\ek\\xEA\\xFA\\u0003\\u000&zwnj;&#8203;0\\u0000\\u0000\\u0000\\&zwnj;&#8203;u0000h\\u0000\\u0000\\u&zwnj;&#8203;0000\\u0000\\u0000\\u00&zwnj;&#8203;00\\u0000\\u0004\\xBD\\x&zwnj;&#8203;F8\\xB9\\u0000\\u001E\\u&zwnj;&#8203;0010\\x88&#39;C;   The response is different coding. Would it be possible that the Savon Soap gem is doing something with the raw response?"}, {"owner": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1490801840, "post_id": 43073477, "comment_id": 73277528, "body": "Possibly. How did you print that out? Also how did you get your &#39;hex&#39; output in the original post? Also does SoapGUI let you save that to a file?"}, {"owner": {"reputation": 11, "user_id": 7780614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206b79a1710271e9d8ad830b9f2e565?s=128&d=identicon&r=PG&f=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/7780614/joris"}, "reply_to_user": {"reputation": 1302, "user_id": 1368977, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c79672007d59af69a05f2b5f6929b53f?s=128&d=identicon&r=PG", "display_name": "Marc Rohloff", "link": "https://stackoverflow.com/users/1368977/marc-rohloff"}, "edited": false, "score": 0, "creation_date": 1490873061, "post_id": 43073477, "comment_id": 73312074, "body": "@MarcRohloff SoapGUI has an option to save the data to a file. When I rename that file as file.7z I can open it as a valid archive. When I read that file in a string with Ruby and put it to the console I get the following (small piece of output as an example): \\u0004\\na\\x9F\\x9F\\u0017X\\a\\xC0\\xC7w\\xE9\\r<i>q\\n\\b(\\xAD\\u0012   When I put the response of the Ruby request to a string and to the console I see (same piece of output): x04\\r\\na\\x9F\\x9F\\x17X\\a\\xC0\\xC7w\\xE9\\r\\n</i>q\\r\\n\\b(\\xAD\\x12  The line endings are different here. That&#39;s also what I see if I compare the written files with vbindiff.."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 7780614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206b79a1710271e9d8ad830b9f2e565?s=128&d=identicon&r=PG&f=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/7780614/joris"}, "is_accepted": false, "score": 1, "last_activity_date": 1490889914, "creation_date": 1490889914, "answer_id": 43122970, "question_id": 43073477, "link": "https://stackoverflow.com/questions/43073477/ruby-writing-binary-string-7zip-to-file-file-gets-corrupted/43122970#43122970", "title": "Ruby: writing binary string (7zip) to file. file gets corrupted", "body": "<p>Solved :-) The Savon 2 Soap Gem depends on the Mail Gem (max. version 2.5). In the Mail gem there is a bug, which touches the raw binary reponse (it ads line-ends). I've forked the Mail gem and made adaptions (to be found in the higher version of Mail (which Savon doesn't use)) and added 'my' Mail gem to my gemfile. \nThnx to all commenters for their tips!</p>\n"}], "owner": {"reputation": 11, "user_id": 7780614, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f206b79a1710271e9d8ad830b9f2e565?s=128&d=identicon&r=PG&f=1", "display_name": "Joris", "link": "https://stackoverflow.com/users/7780614/joris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 305, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490889914, "creation_date": 1490714303, "last_edit_date": 1490872997, "question_id": 43073477, "link": "https://stackoverflow.com/questions/43073477/ruby-writing-binary-string-7zip-to-file-file-gets-corrupted", "title": "Ruby: writing binary string (7zip) to file. file gets corrupted", "body": "<p>We're building an application on Ruby on Rails 4 and it's going really fluently, except for this pain-giving issue </p>\n\n<p>In our application we get a Multipart Response from a SOAP request. This response comes from an external party and sends us a 7zip compressed file.  The response has 2 parts, where the second contains a application/octet-stream.</p>\n\n<p>The parts are of the Mail:part type.</p>\n\n<p>When I save the contents of 'part.body.decoded' to a file, I can't open the file with 7zip, because it says the file is damaged.</p>\n\n<p>When I open the generated file in the hex-editor the first lines seem ok. </p>\n\n<pre><code>p part.body.decoded.encoding.name # gives =&gt; \"ASCII-8BIT\"\n\nFile.open(\"file.7z\", \"wb\") do |f|\n f.write(part.body.decoded)\nend\n</code></pre>\n\n<p>Here are the first HEX lines.</p>\n\n<pre><code>37 7A BC AF 27 1C 00 03 EF F2 1B 17 EA FA 03 00\n00 00 00 00 68 00 00 00 00 00 00 00 BD D9 66 08\n00 1E 10 88 27 43 3B A7 F5 C7 75 19 5D F6 A6 E0\n</code></pre>\n\n<p>As a test I created a 7z file myself and read it in a string and wrote it back to a file. This works and gives me a valid 7zip.</p>\n\n<p>Any ideas on how to tackle this?</p>\n\n<p>Update: when I put the contents of part.body.decoded in a string\nstr = part.body.decoded #and put the string\np str # I get the string as below (I've deleted the middle section of the string because it has to many characters to post it here)</p>\n\n<pre><code>\"7z\\xBC\\xAF'\\x1C\\x00\\x03\\xFCpd\\x01\\xEA\\xFA\\x03\\x00\\x00\\x00\\x00\\x00h\\x00\\x00\\x00\\x00\\x00\\x00\\x006E\\x91\\x1F\\x00\\x1E\\x10\\x88'C;\\xA7\\xF5\\xC7u\\x19]\\xF6\\xA6\\xE0\\xACC\\xD9\\xA4\\xA0:,4\\xE9\\xA1\\xAD%\\x05\\\\a\\xFBq\\xA4Z\\xEC7\\xCC\\x8C\\x91\\xBC?\\x80H)\\xFBa\\xB8\\xB8u\\xBE\\xB2\\x1C|`\\xA7P|\\xC3\\xA9\\x82\\xB3\\r\\n\\xA2\\x15\\xA2\\xDAn\\xBB\\xB9\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "pdf"], "comments": [{"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "edited": false, "score": 0, "creation_date": 1490715139, "post_id": 43072950, "comment_id": 73231101, "body": "Maybe try <code>:&#39;value name&#39;</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490724541, "post_id": 43073923, "comment_id": 73236991, "body": "Hey DiodonHystrix, thanks for your answer. I thing the problem is more in the correct pdf creation, could you guess why?"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490725387, "post_id": 43073923, "comment_id": 73237525, "body": "Did you try <code>pdftk.fill_form &#39;sample_pdf.pdf&#39;, &#39;sample_pdf_filled.pdf&#39;, {[&quot;Name&quot;]=&gt;&quot;Value to be inserted&quot;}</code> without <code>[]</code>?"}, {"owner": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490725807, "post_id": 43073923, "comment_id": 73237759, "body": "Yes, tried it, but had the same result. It seems like the script is not finishing"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490728001, "post_id": 43073923, "comment_id": 73239065, "body": "Sorry, Did you try <code>:Name</code> ? Could you try looking into this <a href=\"http://stackoverflow.com/questions/32505951/pdftk-server-on-os-x-10-11\">topic?</a>"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490729164, "post_id": 43073923, "comment_id": 73239728, "body": "Ok. One more thing, could you show the output of <code>pdftk.get_field_names &#39;sample_pdf.pdf&#39;</code>?"}, {"owner": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490762416, "post_id": 43073923, "comment_id": 73251404, "body": "of course, it&#39;s: [&quot;Name&quot;, &quot;Address&quot;, &quot;Dropdown1&quot;, &quot;Dropdown2&quot;, &quot;Dropdown3&quot;, &quot;Check Box4&quot;, &quot;Check Box1&quot;, &quot;Check Box3&quot;, &quot;Check Box2&quot;, &quot;Text5&quot;, &quot;Button7&quot;, &quot;Text6&quot;, &quot;Group6&quot;]%"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490773294, "post_id": 43073923, "comment_id": 73256574, "body": "Would you mind uploading the pdf form you are using?"}, {"owner": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490793804, "post_id": 43073923, "comment_id": 73270696, "body": "No problem, its <a href=\"https://1drv.ms/b/s!ApPuG86T8sTFgXtwX-SydJmLrTXY\" rel=\"nofollow noreferrer\">link</a>"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490796685, "post_id": 43073923, "comment_id": 73273162, "body": "I downloaded your file. Did this: <code>pdftk.fill_form &#39;sample_pdf.pdf&#39;, &#39;target.pdf&#39;, { Name: &#39;baaa1&#39;, Address: &#39;dfsdf&#39; }</code> and it worked :( Not sure what else we can check..."}, {"owner": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490799841, "post_id": 43073923, "comment_id": 73275975, "body": "on which system did  you run it? (osx, linux, windows)"}, {"owner": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490800683, "post_id": 43073923, "comment_id": 73276619, "body": "I tried it with your code, but it seems like the script got stuck somewhere.. so seems to be another issue - nevertheless thanks a lot for helping me, at least I know that the script is correct"}, {"owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "reply_to_user": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490807175, "post_id": 43073923, "comment_id": 73281269, "body": "I am using Ubuntu 16.04. Do you have to interrupt your console or does it finish the process?"}, {"owner": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "edited": false, "score": 0, "creation_date": 1490851136, "post_id": 43073923, "comment_id": 73298545, "body": "Yes, I had to interrupt. A following print-statement was not executed."}], "tags": [], "owner": {"reputation": 424, "user_id": 6150184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26aa5396de57080c2084de1b8a5aeaa5?s=128&d=identicon&r=PG&f=1", "display_name": "DiodonHystrix", "link": "https://stackoverflow.com/users/6150184/diodonhystrix"}, "is_accepted": true, "score": 1, "last_activity_date": 1490715467, "creation_date": 1490715467, "answer_id": 43073923, "question_id": 43072950, "link": "https://stackoverflow.com/questions/43072950/fill-pdf-form-in-ruby-using-pdf-form-gem/43073923#43073923", "title": "Fill Pdf Form in Ruby using pdf-form gem", "body": "<p>Method <code>#fill_form</code> is defined like this:</p>\n\n<pre><code> def fill_form(template, destination, data = {}, fill_options = {})\n</code></pre>\n\n<p>You example would produce something like this:</p>\n\n<pre><code>irb(main):001:0&gt; { ['Value Name'] =&gt; 'Value to be inserted' }                                                                                   \n=&gt; {[\"Value Name\"]=&gt;\"Value to be inserted\"}      \n</code></pre>\n\n<p>The data is supposed to be a Hash. If you want to specify a key with a space you can use it like this: <code>:'Value Name'</code>.</p>\n\n<pre><code>irb(main):002:0&gt; { :'Value Name' =&gt; 'Value to be inserted' }                                                                                    \n=&gt; {:\"Value Name\"=&gt;\"Value to be inserted\"}  \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "is_accepted": false, "score": 0, "last_activity_date": 1490872390, "last_edit_date": 1495539194, "creation_date": 1490872390, "answer_id": 43116228, "question_id": 43072950, "link": "https://stackoverflow.com/questions/43072950/fill-pdf-form-in-ruby-using-pdf-form-gem/43116228#43116228", "title": "Fill Pdf Form in Ruby using pdf-form gem", "body": "<p>I found a solution - for all MAC OS X 10.11 El Capitan User:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/32505951/pdftk-server-on-os-x-10-11/33248310#33248310\">PDFtk Server on OS X 10.11</a></p>\n"}], "owner": {"reputation": 17, "user_id": 7657263, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ef61a529974c8b575be0614f408f8dba?s=128&d=identicon&r=PG&f=1", "display_name": "Andres_oo", "link": "https://stackoverflow.com/users/7657263/andres-oo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1422, "favorite_count": 0, "accepted_answer_id": 43073923, "answer_count": 2, "score": 0, "last_activity_date": 1490872390, "creation_date": 1490712920, "last_edit_date": 1490724508, "question_id": 43072950, "link": "https://stackoverflow.com/questions/43072950/fill-pdf-form-in-ruby-using-pdf-form-gem", "title": "Fill Pdf Form in Ruby using pdf-form gem", "body": "<p>I want to programmatically fill a pdf using <a href=\"https://github.com/jkraemer/pdf-forms\" rel=\"nofollow noreferrer\">pdf-form</a> gem</p>\n\n<p>I was able to read the fields using the following code:</p>\n\n<pre><code>require 'pdf_forms'\npdftk = PdfForms.new('/usr/local/bin/pdftk')\nfields = pdftk.get_fields('*/Desktop/sample_pdf.pdf')\nfor f in fields\n  print f.to_s\nend\n</code></pre>\n\n<p>But when I tried to fill the Pdf with the provide synthax, I created only an empty, not openable pdf.</p>\n\n<pre><code>pdftk.fill_form '/path/to/form.pdf', 'target.pdf', ['Value Name'] =&gt; 'Value to be inserted'\n</code></pre>\n\n<p>Does anybody know a working solution? </p>\n\n<p>Thanks in advance!!!</p>\n\n<hr>\n\n<p>Additional Information:</p>\n\n<ul>\n<li>the fields of the pdf are the following: Name, Address, Dropdown1, Dropdown2, Dropdown3, Check Box4, Check Box1, Check Box3, Check Box2, Text5, Button7, Text6, Group6, %</li>\n<li>I tried it with filling just one field: </li>\n</ul>\n\n<p>pdftk.fill_form 'sample_pdf.pdf', 'sample_pdf_filled.pdf', {[\"Name\"]=>\"Value to be inserted\"}</p>\n\n<p>The result: I have an pdf \"sample_pdf_filled.pdf\", which I cannot open, because it's empty. I thought my problem is the form-filling, but it seems, that the pdf is not created correctly.</p>\n\n<p>Note: I am working on a mac (unix)</p>\n\n<p>Has anybody a solution? </p>\n"}, {"tags": ["ruby", "ruby-on-rails-2"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1490714510, "post_id": 43072851, "comment_id": 73230622, "body": "Do you really need to do this in Rails 2.3?? This version reached EOL on 2013-06-25 (almost 4 years ago!), when rails 4.0.0 was released. Figuring out how to mimic <code>view_context</code> will be the least of your problems in trying to maintain an application so out of date."}, {"owner": {"reputation": 751, "user_id": 3705364, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39e606a3ac74f6b627761231ab5695dc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/3705364/stephen-c"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1490715064, "post_id": 43072851, "comment_id": 73231042, "body": "@TomLord Unfortunately, the stack that I&#39;m stuck with is Rails 2.3 LTS"}, {"owner": {"reputation": 2101, "user_id": 110214, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/cdd088a6996ddfbc26837a8982c20abc?s=128&d=identicon&r=PG", "display_name": "Jesper Grann Laursen", "link": "https://stackoverflow.com/users/110214/jesper-grann-laursen"}, "edited": false, "score": 0, "creation_date": 1529913129, "post_id": 43072851, "comment_id": 89029688, "body": "I am stuck with the same rails 2.3, did you find a solution?"}], "owner": {"reputation": 751, "user_id": 3705364, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/39e606a3ac74f6b627761231ab5695dc?s=128&d=identicon&r=PG&f=1", "display_name": "Stephen C", "link": "https://stackoverflow.com/users/3705364/stephen-c"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1490712695, "creation_date": 1490712695, "question_id": 43072851, "link": "https://stackoverflow.com/questions/43072851/view-context-equivalent-in-rails-2-3", "title": "view_context equivalent in Rails 2.3", "body": "<p>Looking through Railscast 340, for DataTables/Will_paginate, the example uses view_context when initiating a new instance.</p>\n\n<pre><code>def index\n  respond_to do |format|\n    format.html\n    format.json { render json: ProductsDatatable.new(view_context) }\n  end\nend\n</code></pre>\n\n<p>I've tried the same code to realize that Rails 2.3 does not have it. </p>\n\n<p>According to the docs, the equivalent is</p>\n\n<pre><code>View.new[lookup_context, assigns, controller]\n</code></pre>\n\n<p>What does the lookup_context and assigns refer to? I've tried the following. </p>\n\n<pre><code>User.new(current_program.users, {}, self)\n</code></pre>\n\n<p>However, as expected, if I pass the above in, it will throw an unexpected error 3 for 1. </p>\n"}, {"tags": ["mysql", "ruby", "heroku", "proxy"], "owner": {"reputation": 2586, "user_id": 1805275, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/839c46fffb57ab074a462631c4dcc97e?s=128&d=identicon&r=PG", "display_name": "St&#233;phane", "link": "https://stackoverflow.com/users/1805275/st%c3%a9phane"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 121, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1529629809, "creation_date": 1490711784, "question_id": 43072467, "link": "https://stackoverflow.com/questions/43072467/ruby-mysql2-via-proxy-quotaguard", "title": "Ruby Mysql2 via proxy (QuotaGuard)", "body": "<p>I need to connect to a mysql database using <a href=\"https://github.com/brianmario/mysql2\" rel=\"nofollow noreferrer\">mysql2 gem</a>.\nEverything works well in local but on Heroku I need a static ip address so I have installed <a href=\"https://elements.heroku.com/addons/quotaguardstatic\" rel=\"nofollow noreferrer\">QuotaGuard</a> which provide me a proxy with username and password.</p>\n\n<p>The proxy is working fine (tested with curl)</p>\n\n<p>I'm not able to connect to mysql using it, I saw on a post that you can specify a mysql socket file while connecting but I have absolutely no idea what to put in it, can't find anywhere.</p>\n\n<pre><code>client = Mysql2::Client.new(:host =&gt; host, :database =&gt; database, :username =&gt; username, :password =&gt; password, :port =&gt; port, :socket =&gt; \"my_path/to/mysql.sock\")\n</code></pre>\n\n<p>I randomly tried this in <code>my_path/to/mysql.sock</code> but it doesn't affect anything, like it is ignored</p>\n\n<pre><code>route {\n  proxy: xxxx:xxxxx@xxxxxx.quotaguard.com\n  port: 9293\n  proxyprotocol: socks_v5\n  method: username\n  command: connect\n}\n</code></pre>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "email"], "comments": [{"owner": {"reputation": 73, "user_id": 12004339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/825e9cc9081e989119281d88ad258cb2?s=128&d=identicon&r=PG&f=1", "display_name": "kinton", "link": "https://stackoverflow.com/users/12004339/kinton"}, "edited": false, "score": 0, "creation_date": 1618402840, "post_id": 43072133, "comment_id": 118589859, "body": "Does anyone know why this it not working and answer provides the solution? According to the <a href=\"https://guides.rubyonrails.org/action_mailer_basics.html\" rel=\"nofollow noreferrer\">rails guides</a>, both should work fine."}], "answers": [{"tags": [], "owner": {"reputation": 504, "user_id": 4617655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Efg3l.jpg?s=128&g=1", "display_name": "Geralt", "link": "https://stackoverflow.com/users/4617655/geralt"}, "is_accepted": true, "score": 2, "last_activity_date": 1490710872, "creation_date": 1490710872, "answer_id": 43072134, "question_id": 43072133, "link": "https://stackoverflow.com/questions/43072133/rails-sending-emails-with-dynamic-delivery-options-is-not-working/43072134#43072134", "title": "Rails: Sending Emails with Dynamic Delivery Options is not working", "body": "<p>Overwriting the delivery method settings after the mail has been generated worked:</p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n  def welcome_email(user, company)\n    @user = user\n    @url  = user_url(@user)\n    delivery_options = { user_name: company.smtp_user,\n                         password: company.smtp_password,\n                         address: company.smtp_host }\n    mail = mail(to: @user.email,\n         subject: \"Please see the Terms and Conditions attached\")\n\n    mail.delivery_method.settings.merge!(delivery_options)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 504, "user_id": 4617655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Efg3l.jpg?s=128&g=1", "display_name": "Geralt", "link": "https://stackoverflow.com/users/4617655/geralt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 43072134, "answer_count": 1, "score": 1, "last_activity_date": 1490710872, "creation_date": 1490710872, "question_id": 43072133, "link": "https://stackoverflow.com/questions/43072133/rails-sending-emails-with-dynamic-delivery-options-is-not-working", "title": "Rails: Sending Emails with Dynamic Delivery Options is not working", "body": "<p>According to the documentation sending emails with dynamic delivery options works by passing the new delivery options hash as argument to mail()</p>\n\n<pre><code>class UserMailer &lt; ApplicationMailer\n  def welcome_email(user, company)\n    @user = user\n    @url  = user_url(@user)\n    delivery_options = { user_name: company.smtp_user,\n                         password: company.smtp_password,\n                         address: company.smtp_host }\n    mail(to: @user.email,\n         subject: \"Please see the Terms and Conditions attached\",\n         delivery_method_options: delivery_options)\n  end\nend\n</code></pre>\n\n<p>However the mail is still sent using the default delivery options defined in the environment config files e.g. production.rb or development.rb:</p>\n\n<pre><code>config.action_mailer.smtp_settings = {\n      :address =&gt; 'smtp.gmail.com',\n      :port =&gt; 587,\n      :domain =&gt; 'ourdomain.com',\n      :user_name =&gt; 'default@ourdomain.com',\n      :password =&gt; ENV['DEFAULT_PASSWORD'],\n      :authentication =&gt; 'login',\n      :enable_starttls_auto =&gt; true\n  }\n</code></pre>\n\n<p>Rails 4.</p>\n\n<p>Does anyone know where the problem might be? Thanks for your help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "controller", "cloud9-ide"], "comments": [{"owner": {"reputation": 1618, "user_id": 299781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d380305288301a38f4bac69132e19d?s=128&d=identicon&r=PG", "display_name": "Holger Frohloff", "link": "https://stackoverflow.com/users/299781/holger-frohloff"}, "edited": false, "score": 0, "creation_date": 1490710994, "post_id": 43072111, "comment_id": 73227845, "body": "Please post your error message (the log)."}, {"owner": {"reputation": 25, "user_id": 6046070, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b7fcef95ea855d4ac4463f53da99f2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6046070/nathan"}, "reply_to_user": {"reputation": 1618, "user_id": 299781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d380305288301a38f4bac69132e19d?s=128&d=identicon&r=PG", "display_name": "Holger Frohloff", "link": "https://stackoverflow.com/users/299781/holger-frohloff"}, "edited": false, "score": 0, "creation_date": 1490711244, "post_id": 43072111, "comment_id": 73228037, "body": "@HolgerFrohloff Oops, just added the log"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1490738665, "post_id": 43072111, "comment_id": 73244698, "body": "On SO we don&#39;t put &quot;SOLVED&quot; in questions. Instead, we select the answer that provided the solution to mark it. Also, salutations, valedictions and signatures are not wanted so the last line should be removed. Remember, SO isn&#39;t a discussion list, it&#39;s a reference book more like an encyclopedia or cookbook, where conciseness and clarity is more important. Your question was the opening question to a page providing a solution to that problem for other people searching for similar solutions in the future."}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6046070, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b7fcef95ea855d4ac4463f53da99f2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6046070/nathan"}, "edited": false, "score": 0, "creation_date": 1490712460, "post_id": 43072368, "comment_id": 73228955, "body": "Thanks Holger, please see my reply to Mark. Can you see any issue with my controller/model which might explain why these records aren&#39;t available?"}], "tags": [], "owner": {"reputation": 1618, "user_id": 299781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d380305288301a38f4bac69132e19d?s=128&d=identicon&r=PG", "display_name": "Holger Frohloff", "link": "https://stackoverflow.com/users/299781/holger-frohloff"}, "is_accepted": false, "score": 0, "last_activity_date": 1490712606, "last_edit_date": 1495542324, "creation_date": 1490711557, "answer_id": 43072368, "question_id": 43072111, "link": "https://stackoverflow.com/questions/43072111/ruby-on-rails-undefined-method-model-cant-be-accessed-by-controller/43072368#43072368", "title": "Ruby on Rails - undefined method - Model can&#39;t be accessed by Controller", "body": "<p>You received the common <code>for nil:NilClass</code> error. You have a list in your index view, where you try to display the record's attributes.\nYou access these attributes by calling their getter method on the record. The only problem here is, that your record value is <code>nil</code>. There is no record.</p>\n\n<p>Specifically: you used <code>user.profile.avatar</code> The <code>user</code>record is there, but when you call <code>.profile</code> on this <code>user</code>, you receive <code>nil</code>.\nYou can make sure to check whether the record is available before calling the method on it. An idea on how to do it is given in <a href=\"https://stackoverflow.com/a/43072430/299781\">this other answer</a></p>\n\n<blockquote>\n  <p>Can you see any issue with my controller/model which might explain why these records aren't available?</p>\n</blockquote>\n\n<p>Your <code>LeaguesController</code> loads the <code>User</code> records. But you access your <code>users</code>'s profiles in your view. You need to make sure, that your <code>User</code>s have an associated <code>profile</code> before accessing them.</p>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 6046070, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b7fcef95ea855d4ac4463f53da99f2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6046070/nathan"}, "edited": false, "score": 0, "creation_date": 1490712334, "post_id": 43072430, "comment_id": 73228843, "body": "Thanks @Mark, will give it a go now although I have another index.html.erb file showing a list of all users (not the league table page) which doesn&#39;t have the &#39;if user.avatar&#39; and that page works fine. I&#39;ve also tried removing the avatar line completely and the following error I get is about the first_name so I think it&#39;s an issue with the Model/Controller?"}, {"owner": {"reputation": 1618, "user_id": 299781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52d380305288301a38f4bac69132e19d?s=128&d=identicon&r=PG", "display_name": "Holger Frohloff", "link": "https://stackoverflow.com/users/299781/holger-frohloff"}, "edited": false, "score": 0, "creation_date": 1490712478, "post_id": 43072430, "comment_id": 73228977, "body": "The problem will persist. You need to make sure the record/object you are calling the method on is actually present. That&#39;s what Mark is trying to explain here. :)"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1490712728, "post_id": 43072430, "comment_id": 73229186, "body": "Try changing the two lines in my edit and it should work - sorry that&#39;s all I can think of"}, {"owner": {"reputation": 25, "user_id": 6046070, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b7fcef95ea855d4ac4463f53da99f2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6046070/nathan"}, "edited": false, "score": 0, "creation_date": 1490713250, "post_id": 43072430, "comment_id": 73229626, "body": "@Mark I&#39;ve removed a load of the HTML and just left the avatar lines and it is now appearing. Thank you so much for your help. This has been driving me crazy for a while. Will get round to adding the same for the other objects."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1490714162, "post_id": 43072430, "comment_id": 73230364, "body": "Happy to help! Sometimes it&#39;s counter intuitive but 95% of the time the error message will point out what&#39;s going wrong or point you in the right direction (avatar in this case)"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 0, "last_activity_date": 1490712691, "last_edit_date": 1490712691, "creation_date": 1490711706, "answer_id": 43072430, "question_id": 43072111, "link": "https://stackoverflow.com/questions/43072111/ruby-on-rails-undefined-method-model-cant-be-accessed-by-controller/43072430#43072430", "title": "Ruby on Rails - undefined method - Model can&#39;t be accessed by Controller", "body": "<p>I can't see your view file, but I'm assuming you're calling .avatar on each user or on their profile?</p>\n\n<p>If you change user.avatar or user.profile.avatar to:</p>\n\n<pre><code>user.avatar if user.avatar\n</code></pre>\n\n<p>or</p>\n\n<pre><code>user.profile.avatar if user.profile &amp;&amp; user.profile.avatar\n</code></pre>\n\n<p>then you should clear your error and just receive a blank area where their avatar should be.</p>\n\n<p>EDIT: After looking at the view file, one of these two lines:</p>\n\n<pre><code>&lt;%= image_tag user.profile.avatar.url, class: 'sml-avatar-show-img' %&gt;\n\n&lt;%= image_tag current_user.profile.avatar.url, class: 'sml-avatar-show-img' %&gt;\n</code></pre>\n\n<p>Is apparently throwing the error. Change them to:</p>\n\n<pre><code>&lt;%= (image_tag user.profile.avatar.url, class: 'sml-avatar-show-img') if user.profile &amp;&amp; user.profile.avatar %&gt;\n\n&lt;%= (image_tag current_user.profile.avatar.url, class: 'sml-avatar-show-img') if current_user &amp;&amp; current_user.profile &amp;&amp; current_user.profile.avatar %&gt;\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6046070, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/b7fcef95ea855d4ac4463f53da99f2c9?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6046070/nathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 43072430, "answer_count": 2, "score": 0, "last_activity_date": 1490713396, "creation_date": 1490710805, "last_edit_date": 1490713396, "question_id": 43072111, "link": "https://stackoverflow.com/questions/43072111/ruby-on-rails-undefined-method-model-cant-be-accessed-by-controller", "title": "Ruby on Rails - undefined method - Model can&#39;t be accessed by Controller", "body": "<p>SOLVED - I've added an if statement in the HTML.erb before displaying the profile avatar and it's now appearing. Thank you Mark and Holger for your help.</p>\n\n<p>I'm trying to make my users appear in a league table but I'm getting an error message saying there is an undefined method in my LeaguesController file. I've tried the following class names for my Controller file - LeaguesController &lt; Application Controller and LeaguesController &lt; UsersController (I know the method has been defined in this class, will post both below). 'index' matches the html.erb file name. </p>\n\n<p>LeaguesController (I've tried User.includes(:profile).order(etc) but still doesn't pick up the user fields)</p>\n\n<pre><code>class LeaguesController &lt; ApplicationController\n  def index\n    @LMSusers = User.order('last_sign_in_at DESC')\n    @MVPusers = User.order('sign_in_count DESC')\n    @LMSuser_position = User.order('last_sign_in_at DESC').find_index(current_user)\n    @MVPuser_position = User.order('sign_in_count DESC').find_index(current_user)\n  end\nend\n</code></pre>\n\n<p>User Model file</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  # Association - Ruby Documentation       \n  belongs_to :plan\n  has_one :profile\nend\n</code></pre>\n\n<p>UsersController</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :authenticate_user!\n\n\n  def index\n    @users = User.includes(:profile)\n  end\n\n    # Use rails routes in console to find what URL path should be used and \n    # what dynamic ids need to be included. Use params in relevant controller file\n    # to include the paramater.\n\n  # GET to /users/:id\n  def show \n    # \"User\" is refering to model with same name -&gt; user.rb\n    @user = User.find( params[:id] )\n  end\n\nend\n</code></pre>\n\n<p>What's really strange is this code used to work fine. I've compared it to the previous commits before it stopped working and they seem to match up perfectly. When I cloned the commit, that also worked fine so I really don't know where to start looking for this error. I don't have a model file for Leagues but I never have done and it used to work fine. I've never included Leagues in any belongs_to/has_many associations but again, it used to work fine... </p>\n\n<p>Here is the routes file too.</p>\n\n<p>Routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n    root to: 'pages#home'\n    devise_for :users, controllers: { registrations: 'users/registrations' }\n    resources :users do\n        # Singular resource and profile because requiring only one resource and profile per user\n       resource :profile\n    end\n    resources :leagues\n    get 'about', to: 'pages#about'\n    resources :contacts, only: :create\n    get 'contact-us', to: 'contacts#new', as: 'new_contact'\n\n    # Nested Resources Documentation\n\nend\n</code></pre>\n\n<p>HTML.erb file</p>\n\n<pre><code>&lt;div&gt;\n  &lt;h1 class=\"text-center\"&gt;The Leaderboard&lt;/h1&gt;&lt;/br&gt;\n  &lt;p class=\"text-center\"&gt;Check how you compare to the top 5 in the community.&lt;/p&gt;&lt;/br&gt;\n&lt;/div&gt;\n\n&lt;div class=\"container\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;div&gt;\n        &lt;table class=\"table\"&gt;\n          &lt;tr&gt;\n            &lt;th class=\"league-header\" colspan=\"6\"&gt;Last Man Standing&lt;/th&gt;\n          &lt;/tr&gt;\n          &lt;tr class=\"row-header\"&gt;\n            &lt;th&gt;Position&lt;/th&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n            &lt;th class=\"left-column\"&gt;Job Title&lt;/th&gt;\n            &lt;th class=\"left-column\"&gt;Last Logged In&lt;/th&gt;\n          &lt;/tr&gt;\n          &lt;% @LMSusers.each_with_index do |user, index| %&gt;\n            &lt;% if index &lt; 5 %&gt;\n              &lt;tr class=\"tr\"&gt;\n                &lt;td style=\"padding-top: 20px;\"&gt;&lt;%= index+1 %&gt;&lt;/td&gt;\n                &lt;td class=\"left-column\"&gt;&lt;%= link_to user do %&gt;&lt;%= image_tag user.profile.avatar.url, class: 'sml-avatar-show-img' %&gt;&lt;% end %&gt; &lt;%= link_to user do %&gt;&lt;%= user.profile.first_name %&gt; &lt;%= user.profile.last_name %&gt;&lt;% end %&gt;&lt;/td&gt;\n                &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= user.profile.job_title %&gt;&lt;/td&gt;\n                &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= user.last_sign_in_at.strftime(\"%d/%m/%Y\") %&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;% end %&gt;  \n          &lt;% end %&gt;\n          &lt;% if user_signed_in? %&gt;\n            &lt;% if current_user.profile %&gt;\n              &lt;tr class=\"tr user-tr\"&gt;\n                &lt;td style=\"padding-top: 20px;\" &gt;&lt;%= @LMSuser_position + 1 %&gt;&lt;/td&gt;\n                &lt;td class=\"left-column\"&gt;&lt;%= link_to user_path(current_user.id) do %&gt;&lt;%= image_tag current_user.profile.avatar.url, class: 'sml-avatar-show-img' %&gt;&lt;% end %&gt; &lt;%= link_to user_path(current_user.id) do %&gt;&lt;%= current_user.profile.first_name %&gt; &lt;%= current_user.profile.last_name %&gt;&lt;% end %&gt;&lt;/td&gt;\n                &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= current_user.profile.job_title %&gt;&lt;/td&gt;\n                &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= current_user.last_sign_in_at.strftime(\"%d/%m/%Y\") %&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;% end %&gt;\n          &lt;% end %&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-6\"&gt;\n      &lt;div&gt;\n        &lt;table class=\"table\"&gt;\n          &lt;tr&gt;\n            &lt;th class=\"league-header\" colspan=\"6\"&gt;MVP&lt;/th&gt;\n          &lt;/tr&gt;\n          &lt;tr class=\"row-header\"&gt;\n            &lt;th&gt;Position&lt;/th&gt;\n            &lt;th&gt;Name&lt;/th&gt;\n            &lt;th class=\"left-column\"&gt;Job Title&lt;/th&gt;\n            &lt;th class=\"left-column\"&gt;Number of Logins&lt;/th&gt;\n          &lt;/tr&gt;\n          &lt;% @MVPusers.each_with_index do |user, index| %&gt;\n            &lt;% if index &lt; 5 %&gt;\n              &lt;tr class=\"tr\"&gt;\n                &lt;td style=\"padding-top: 20px;\"&gt;&lt;%= index + 1 %&gt;&lt;/td&gt;\n                &lt;td class=\"left-column\"&gt;&lt;%= link_to user do %&gt;&lt;%= image_tag user.profile.avatar.url, class: 'sml-avatar-show-img' %&gt;&lt;% end %&gt; &lt;%= link_to user do %&gt;&lt;%= user.profile.first_name %&gt; &lt;%= user.profile.last_name %&gt;&lt;% end %&gt;&lt;/td&gt;\n                &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= user.profile.job_title %&gt;&lt;/td&gt;\n                &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= user.sign_in_count %&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;% end %&gt;\n          &lt;% end %&gt;\n          &lt;% if user_signed_in? %&gt;\n            &lt;% if current_user.profile %&gt;\n              &lt;tr class=\"tr user-tr\"&gt;\n                &lt;td style=\"padding-top: 20px;\" &gt;&lt;%= @MVPuser_position + 1 %&gt;&lt;/td&gt;\n                &lt;td class=\"left-column\"&gt;&lt;%= link_to user_path(current_user.id) do %&gt;&lt;%= image_tag current_user.profile.avatar.url, class: 'sml-avatar-show-img' %&gt;&lt;% end %&gt; &lt;%= link_to user_path(current_user.id) do %&gt;&lt;%= current_user.profile.first_name %&gt; &lt;%= current_user.profile.last_name %&gt;&lt;% end %&gt;&lt;/td&gt;\n                &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= current_user.profile.job_title %&gt;&lt;/td&gt;\n                &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= current_user.sign_in_count %&gt;&lt;/td&gt;\n              &lt;/tr&gt;\n            &lt;% end %&gt;\n          &lt;% end %&gt;\n        &lt;/table&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Error Log </p>\n\n<pre><code>Started GET \"/leagues\" for xx.xxx.xx.xxx at 2017-03-28 14:23:54 +0000\nCannot render console from xx.xxx.xx.xxx! Allowed networks: xxx.x.x.x, ::1, xxx.x.x.x/xxx.xxx.xxx.xxx\nProcessing by LeaguesController#index as HTML\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = ? ORDER BY \"users\".\"id\" ASC LIMIT ?  [[\"id\", 3], [\"LIMIT\", 1]]\n  User Load (0.3ms)  SELECT \"users\".* FROM \"users\" ORDER BY last_sign_in_at DESC\n  Profile Load (0.2ms)  SELECT \"profiles\".* FROM \"profiles\" WHERE \"profiles\".\"user_id\" IN (9, 3, 8, 7, 6, 5, 2, 4, 1)\n  User Load (0.3ms)  SELECT \"users\".* FROM \"users\" ORDER BY sign_in_count DESC\n  Profile Load (0.2ms)  SELECT \"profiles\".* FROM \"profiles\" WHERE \"profiles\".\"user_id\" IN (3, 1, 2, 5, 7, 4, 6, 8, 9)\n  Rendering leagues/index.html.erb within layouts/application\n  CACHE (0.0ms)  SELECT \"users\".* FROM \"users\" ORDER BY last_sign_in_at DESC\n  CACHE (0.0ms)  SELECT \"profiles\".* FROM \"profiles\" WHERE \"profiles\".\"user_id\" IN (9, 3, 8, 7, 6, 5, 2, 4, 1)\n  Rendered leagues/index.html.erb within layouts/application (76.6ms)\nCompleted 500 Internal Server Error in 88ms (ActiveRecord: 1.5ms)\n\n\n\nActionView::Template::Error (undefined method `avatar' for nil:NilClass):\n    21:             &lt;% if index &lt; 5 %&gt;\n    22:               &lt;tr class=\"tr\"&gt;\n    23:                 &lt;td style=\"padding-top: 20px;\"&gt;&lt;%= index+1 %&gt;&lt;/td&gt;\n    24:                 &lt;td class=\"left-column\"&gt;&lt;%= link_to user do %&gt;&lt;%= image_tag user.profile.avatar.url, class: 'sml-avatar-show-img' %&gt;&lt;% end %&gt; &lt;%= link_to user do %&gt;&lt;%= user.profile.first_name %&gt; &lt;%= user.profile.last_name %&gt;&lt;% end %&gt;&lt;/td&gt;\n    25:                 &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= user.profile.job_title %&gt;&lt;/td&gt;\n    26:                 &lt;td style=\"padding-top: 20px;\" class=\"left-column\"&gt;&lt;%= user.last_sign_in_at.strftime(\"%d/%m/%Y\") %&gt;&lt;/td&gt;\n    27:               &lt;/tr&gt;\n\napp/views/leagues/index.html.erb:24:in `block (2 levels) in _app_views_leagues_index_html_erb___1987220472087352031_70206048257300'\napp/views/leagues/index.html.erb:24:in `block in _app_views_leagues_index_html_erb___1987220472087352031_70206048257300'\napp/views/leagues/index.html.erb:20:in `each_with_index'\napp/views/leagues/index.html.erb:20:in `_app_views_leagues_index_html_erb___1987220472087352031_70206048257300'\n  Rendering /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout\n  Rendering /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb\n  Rendered /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (7.2ms)\n  Rendering /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb\n  Rendered /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (2.7ms)\n  Rendering /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb\n  Rendered /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.4ms)\n  Rendered /usr/local/rvm/gems/ruby-2.3.0@saasapp/gems/actionpack-5.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (38.7ms)\n</code></pre>\n\n<p>If you'd like to see any other files, let me know in the comments. Would appreciate any help/advice with this. Thanks for your time.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin", "arel", "ransack"], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 4388049, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LPXy6.jpg?s=128&g=1", "display_name": "Ravi Kashyap", "link": "https://stackoverflow.com/users/4388049/ravi-kashyap"}, "edited": false, "score": 0, "creation_date": 1552570975, "post_id": 43095863, "comment_id": 97067185, "body": "I got the same error but I was using InfixOperation insted of  NamedFunction. This solvd my problem. Thank you."}], "tags": [], "owner": {"reputation": 3072, "user_id": 2878172, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6c20c0911f026de5b15b6187fd50caf4?s=128&d=identicon&r=PG&f=1", "display_name": "Kernael", "link": "https://stackoverflow.com/users/2878172/kernael"}, "is_accepted": true, "score": 2, "last_activity_date": 1490796342, "creation_date": 1490796342, "answer_id": 43095863, "question_id": 43071485, "link": "https://stackoverflow.com/questions/43071485/ransacker-and-arel-on-associations-fields/43095863#43095863", "title": "Ransacker and Arel on associations fields", "body": "<p>Finally came to a solution :</p>\n\n<pre><code># models/user/profile.rb\n  ransacker :full_name, formatter: proc { |v| v.mb_chars.downcase.to_s } do |parent|\n    Arel::Nodes::NamedFunction.new('LOWER',\n     [Arel::Nodes::NamedFunction.new('concat_ws',\n      [Arel::Nodes.build_quoted(' '), parent.table[:first_name], parent.table[:last_name]])])\n  end\n\n# admin/user.rb\nfilter :user_profile_full_name_cont\n</code></pre>\n"}], "owner": {"reputation": 3072, "user_id": 2878172, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/6c20c0911f026de5b15b6187fd50caf4?s=128&d=identicon&r=PG&f=1", "display_name": "Kernael", "link": "https://stackoverflow.com/users/2878172/kernael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 619, "favorite_count": 0, "accepted_answer_id": 43095863, "answer_count": 1, "score": 4, "last_activity_date": 1490796342, "creation_date": 1490709181, "question_id": 43071485, "link": "https://stackoverflow.com/questions/43071485/ransacker-and-arel-on-associations-fields", "title": "Ransacker and Arel on associations fields", "body": "<p>I have <code>Project::Contribution</code> that <code>belongs_to</code> <code>User</code>, and\n<code>User</code> <code>has_one</code> <code>User::Profile</code>.</p>\n\n<p><code>first_name</code> and <code>last_name</code> are fields contained in <code>User::Profile</code></p>\n\n<p>I want to create a ransacker that would allow me to filter my contributions with their user profile <code>first_name</code> and <code>last_name</code>.</p>\n\n<p>How can this be achieved ?</p>\n\n<p>This is what I tried so far :</p>\n\n<pre><code># admin/contribution.rb\nfilter :user_full_name_cont\n\n# models/user.rb\nransacker :full_name do |parent|\n  Arel::Nodes::InfixOperation.new('||', parent.table[:profile_first_name], parent.table[:profile_last_name]) # error\nend\n</code></pre>\n\n<p>This fails because of : <code>parent.table[:profile_first_name]</code> and <code>parent.table[:profile_last_name]</code> because I can't access the <code>profile</code> table like so.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "edited": false, "score": 0, "creation_date": 1490709499, "post_id": 43071583, "comment_id": 73226633, "body": "Yup thanks, I&#39;ll accept when I&#39;m allowed"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 4, "last_activity_date": 1490709553, "last_edit_date": 1490709553, "creation_date": 1490709430, "answer_id": 43071583, "question_id": 43071414, "link": "https://stackoverflow.com/questions/43071414/unexpected-tidentifier-with-keyword-argument/43071583#43071583", "title": "unexpected tIDENTIFIER with keyword argument", "body": "<p>Move the keyword args to the last position of the arguments list: </p>\n\n<pre><code>def my_method(location, options = {}, option_key:) \nend\n</code></pre>\n"}], "owner": {"reputation": 873, "user_id": 2320239, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/daef5b7116143c14162b242bf0b1a35a?s=128&d=identicon&r=PG", "display_name": "user2320239", "link": "https://stackoverflow.com/users/2320239/user2320239"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "closed_date": 1490709964, "accepted_answer_id": 43071583, "answer_count": 1, "score": 2, "last_activity_date": 1490712726, "creation_date": 1490709011, "last_edit_date": 1490712726, "question_id": 43071414, "link": "https://stackoverflow.com/questions/43071414/unexpected-tidentifier-with-keyword-argument", "closed_reason": "Duplicate", "title": "unexpected tIDENTIFIER with keyword argument", "body": "<p>I need to create a method with a keyword argument, but I'm having some trouble. At the moment I have:</p>\n\n<pre><code>my_method(option_key:, location, options = {})\n</code></pre>\n\n<p>but I get the error:</p>\n\n<pre><code>syntax error, unexpected tIDENTIFIER (SyntaxError)\n</code></pre>\n\n<p>I'm not sure what I'm doing wrong, any help would be great.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "symbols"], "answers": [{"comments": [{"owner": {"reputation": 1049, "user_id": 5353193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b427991caffbc88cf5dccfb942f061a2?s=128&d=identicon&r=PG", "display_name": "Francois", "link": "https://stackoverflow.com/users/5353193/francois"}, "edited": false, "score": 1, "creation_date": 1490711321, "post_id": 43071067, "comment_id": 73228094, "body": "Thank you for your quick answer, it works like a charm! I just added a case to the switch statement to fit my needs:    when MyModel     object.attributes.each_value do |value|       deep_transform(value, key, &amp;block)     end   end"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1490708554, "last_edit_date": 1490708554, "creation_date": 1490708062, "answer_id": 43071067, "question_id": 43070795, "link": "https://stackoverflow.com/questions/43070795/ruby-access-nested-attributes-with-symbol/43071067#43071067", "title": "Ruby access nested attributes with symbol", "body": "<p>Here's a start. It's a recursive method changing your data in place :</p>\n\n<pre><code>def deep_transform(object, key, &amp;block)\n  case object\n  when Array\n    object.each do |element|\n      deep_transform(element, key, &amp;block)\n    end\n  when Hash\n    object.each_value do |value|\n      deep_transform(value, key, &amp;block)\n    end\n    if value = object[key]\n      object[key] = yield(value)\n    end\n  end\nend\n\nfoo = { a: 'hi', b: 'there' }\ndeep_transform(foo, :b){ |str| str.upcase }\np foo\n# {:a=&gt;\"hi\", :b=&gt;\"THERE\"}\n\nfoo = { a: 'hi', b: [{ c: 'foo', d: 'bar' }, { c: 'bob', d: 'lisa' }] }\ndeep_transform(foo, :d, &amp;:upcase) # Alternative way to call the method\np foo\n# {:a=&gt;\"hi\", :b=&gt;[{:c=&gt;\"foo\", :d=&gt;\"BAR\"}, {:c=&gt;\"bob\", :d=&gt;\"LISA\"}]}\n</code></pre>\n\n<p>Note that the method will mutate every value related to a <code>:d</code> key. You don't specify <code>:b[:d]</code> as in your example.</p>\n"}], "owner": {"reputation": 1049, "user_id": 5353193, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/b427991caffbc88cf5dccfb942f061a2?s=128&d=identicon&r=PG", "display_name": "Francois", "link": "https://stackoverflow.com/users/5353193/francois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 333, "favorite_count": 1, "accepted_answer_id": 43071067, "answer_count": 1, "score": 1, "last_activity_date": 1490708554, "creation_date": 1490707328, "question_id": 43070795, "link": "https://stackoverflow.com/questions/43070795/ruby-access-nested-attributes-with-symbol", "title": "Ruby access nested attributes with symbol", "body": "<p>I'm trying to write a method that takes <strong>an object</strong>, <strong>a symbol</strong> (or something else, here's the question) and \"upcases\" the value at the key (for example).  </p>\n\n<p><strong>Simple</strong> case:   </p>\n\n<pre><code>foo = { a: 'hi', b: 'there' }\n\ndef upc_value(object, key)\n  object[key].upcase!\nend\n\nupc_value(foo, :b)\n\nputs foo #=&gt; { a: 'hi', b: 'THERE' }\n</code></pre>\n\n<p>But I also want the method to work with nested attributes if my <code>foo</code> object is more complex.  </p>\n\n<p><strong>More complex</strong> case:  </p>\n\n<pre><code>foo = { a: 'hi', b: [{ c: 'foo', d: 'bar' }, { c: 'bob', d: 'lisa' }] }\n\ndef upc_value(object, key)\n  object[key].upcase!\nend\n\n# I would like to be able to do something like:   \n\nupc_value(foo, :b[:d])\n\nputs foo #=&gt; { a: 'hi', b: [{ c: 'foo', d: 'BAR' }, { c: 'bob', d: 'LISA' }] }\n</code></pre>\n\n<p>I obviously can't do this and I'm curious if something like a \"deep_symbol\" exists...  </p>\n\n<hr>\n\n<p><strong>REAL PROBLEM:</strong><br>\nThe real thing I'm trying to achieve here is a module that removes the host from every field that contains a URL before a model is saved.<br>\nIt's included in every model that needs it and I call a <code>fields_containing_url</code> method that takes the symbols of the fields.<br>\nThe problem is that I have nested attributes on one of my models and I need to access them with the very same method that takes symbols...   </p>\n\n<p>Thank you for you help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "blogs"], "comments": [{"owner": {"reputation": 5707, "user_id": 587406, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/1p6qq.jpg?s=128&g=1", "display_name": "Luiz E.", "link": "https://stackoverflow.com/users/587406/luiz-e"}, "edited": false, "score": 2, "creation_date": 1490706387, "post_id": 43070393, "comment_id": 73224103, "body": "it is <code>params.require</code>, not <code>params_require</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1812, "user_id": 4627335, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/kZFZA.jpg?s=128&g=1", "display_name": "ashvin", "link": "https://stackoverflow.com/users/4627335/ashvin"}, "is_accepted": false, "score": 6, "last_activity_date": 1490706559, "creation_date": 1490706559, "answer_id": 43070503, "question_id": 43070393, "link": "https://stackoverflow.com/questions/43070393/undefined-method-params-require-new-into-rails/43070503#43070503", "title": "undefined method `params_require&#39; - New into rails", "body": "<pre><code>def post_params\n  params.require(:post).permit(:title, :content)\nend\n</code></pre>\n\n<p>Change <code>params_require</code> to <code>params.require</code></p>\n"}], "owner": {"reputation": 21, "user_id": 7780008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/26bab9579dd3eeb15694a13fa8d92ee3?s=128&d=identicon&r=PG&f=1", "display_name": "max br&#246;ker", "link": "https://stackoverflow.com/users/7780008/max-br%c3%b6ker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1490706559, "creation_date": 1490706265, "question_id": 43070393, "link": "https://stackoverflow.com/questions/43070393/undefined-method-params-require-new-into-rails", "title": "undefined method `params_require&#39; - New into rails", "body": "<p>I try to code a small blog in rails and when I tried to save a post through the website i get an Error. I can create a post with the console but thats not the goal. </p>\n\n<p>this is my code for the create method: </p>\n\n<pre><code>  def create\n@post = Post.new(post_params)\n\n     if post.save\n         redirect_to post.path\n     else\n         render \"new\"\n  end\n\n\nend\n\n  def post_params\n    params_require(:post).permit(:title, :content)\n  end\n</code></pre>\n\n<p>would be nice if someone can help me. Thanks </p>\n"}]