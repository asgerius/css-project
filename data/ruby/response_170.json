[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "edited": false, "score": 3, "creation_date": 1523490928, "post_id": 49785974, "comment_id": 86587393, "body": "It appears that your <code>ENV[&#39;S3_BUCKET_NAME&#39;]</code> is not set, which causes the error you&#39;re seeing as you&#39;re trying to concatenate via <code>+</code> to a <code>nil</code> value."}, {"owner": {"reputation": 11, "user_id": 9212950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9819f63633fe0135168bac644018a07?s=128&d=identicon&r=PG&f=1", "display_name": "coding-jewelry", "link": "https://stackoverflow.com/users/9212950/coding-jewelry"}, "reply_to_user": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "edited": false, "score": 0, "creation_date": 1523491143, "post_id": 49785974, "comment_id": 86587446, "body": "Can I remove all the lines in paperclip.rb?"}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 9632813, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Peter", "link": "https://stackoverflow.com/users/9632813/peter"}, "is_accepted": false, "score": 0, "last_activity_date": 1523939705, "last_edit_date": 1523939705, "creation_date": 1523491073, "answer_id": 49786021, "question_id": 49785974, "link": "https://stackoverflow.com/questions/49785974/ruby-on-rails-5-nomethoderror-undefined-method-for-nilnilclass-when-rake/49786021#49786021", "title": "Ruby on Rails 5: NoMethodError: undefined method `+&#39; for nil:NilClass when rake db:migrate", "body": "<p><code>ENV['S3_BUCKET_NAME']</code> returns <code>nil</code>. You have to set your environment variable to your <code>s3</code> bucket name. Optionally you can delete that variable and pass in a string like <code>\"My-Bucket-Name\"</code>.</p>\n"}], "owner": {"reputation": 11, "user_id": 9212950, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9819f63633fe0135168bac644018a07?s=128&d=identicon&r=PG&f=1", "display_name": "coding-jewelry", "link": "https://stackoverflow.com/users/9212950/coding-jewelry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 792, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523939705, "creation_date": 1523490679, "question_id": 49785974, "link": "https://stackoverflow.com/questions/49785974/ruby-on-rails-5-nomethoderror-undefined-method-for-nilnilclass-when-rake", "title": "Ruby on Rails 5: NoMethodError: undefined method `+&#39; for nil:NilClass when rake db:migrate", "body": "<p>Now I am going to install and run a small Rails 5 application on my localhost.\nI did \"bundle install\" and \"rake db:create\" successfully.\nThen, when I executed \"rake db:migrate\", it occurs an error like the following lines.  I have no idea why that is.</p>\n\n<pre><code>DEPRECATION WARNING: The factory_girl gem is deprecated. Please upgrade to factory_bot. See https://github.com/thoughtbot/factory_bot/blob/v4.9.0/UPGRADE_FROM_FACTORY_GIRL.md for further instructions. (called from &lt;top (required)&gt; at /mnt/c/workspace/c3church.ca/config/application.rb:7)\nrake aborted!\nNoMethodError: undefined method `+' for nil:NilClass\n/mnt/c/workspace/c3church.ca/config/initializers/paperclip.rb:3:in `&lt;top (required)&gt;'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:287:in `load'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:287:in `block in load'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:259:in `load_dependency'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:287:in `load'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/engine.rb:648:in `block in load_config_initializer'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/activesupport-5.0.7/lib/active_support/notifications.rb:166:in `instrument'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/engine.rb:647:in `load_config_initializer'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/engine.rb:612:in `block (2 levels) in &lt;class:Engine&gt;'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/engine.rb:611:in `each'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/engine.rb:611:in `block in &lt;class:Engine&gt;'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/initializable.rb:30:in `instance_exec'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/initializable.rb:30:in `run'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/initializable.rb:55:in `block in run_initializers'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/initializable.rb:44:in `each'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/initializable.rb:44:in `tsort_each_child'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/initializable.rb:54:in `run_initializers'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/application.rb:352:in `initialize!'\n/mnt/c/workspace/c3church.ca/config/environment.rb:5:in `&lt;top (required)&gt;'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:293:in `require'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:293:in `block in require'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:259:in `load_dependency'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/activesupport-5.0.7/lib/active_support/dependencies.rb:293:in `require'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/application.rb:328:in `require_environment!'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/railties-5.0.7/lib/rails/application.rb:448:in `block in run_tasks_blocks'\n/home/prince/.rvm/gems/ruby-2.3.3/gems/rake-12.3.1/exe/rake:27:in `&lt;top (required)&gt;'\n/home/prince/.rvm/gems/ruby-2.3.3/bin/ruby_executable_hooks:15:in `eval'\n/home/prince/.rvm/gems/ruby-2.3.3/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\nTasks: TOP =&gt; db:migrate =&gt; environment\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>My Gemfile is:</p>\n\n<pre><code>source 'https://rubygems.org'\ngem 'rails',  '~&gt; 5.0.0'\ngem 'sprockets-rails', :require =&gt; 'sprockets/railtie'\ngem 'sass-rails'\ngem \"uglifier\", \"~&gt; 3.0.0\"\ngem 'coffee-rails'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder'\ngem 'cancancan'\ngem 'devise'\ngem 'figaro'\ngem 'rolify'\ngem 'simple_form'\ngem 'paperclip'\ngem 'aws-sdk', '~&gt; 2.3.0'\ngem 'aws-sdk-resources', '~&gt; 2'\ngem 'jquery-ui-rails'\ngem 'jquery-timepicker-addon-rails'\ngem \"geocoder\"\ngem \"font-awesome-rails\"\ngem \"jquery-slick-rails\"\ngem 'truncate_html'\ngem \"instagram-continued\", require: \"instagram\"\ngem 'fancybox2-rails'\ngem 'validates_email_format_of'\ngem 'icalendar', '~&gt; 2.3'\ngem 'responders', '~&gt; 2.0'\ngem 'react-rails'\ngem 'shrine'\ngem 'jquery-fileupload-rails'\n\ngroup :development do\n  gem 'sqlite3'\n  gem 'better_errors'\n  gem 'binding_of_caller', :platforms=&gt;[:mri_19, :mri_20, :rbx]\n  gem 'rails_layout'\n  gem 'rb-fchange', :require=&gt;false\n  gem 'rb-fsevent', :require=&gt;false\n  gem 'rb-inotify', :require=&gt;false\n  gem 'guard-bundler'\n  gem 'guard-rails'\n  gem 'guard-rspec'\n  gem 'guard-livereload', '~&gt; 2.4', require: false\n  gem 'web-console', '~&gt; 2.0'\n  gem 'byebug'\n  gem 'rails_real_favicon'\nend\n\ngroup :development, :test do\n  gem 'factory_girl_rails'\n  gem 'rspec-rails'\n  gem 'thin'\n  gem 'rb-readline'\nend\n\ngroup :test do\n  gem 'capybara'\n  gem 'database_cleaner', '1.0.1'\n  gem 'email_spec'\nend\n\ngroup :production do\n  gem 'puma'\n  gem 'heroku-deflater'\n  gem 'pg'\n  #gem 'rails_12factor'\n  #gem 'newrelic_rpm'\nend\n\n#ruby=2.3.3\nruby '2.3.3'\n</code></pre>\n\n<p>And config/initializers/paperclip.rb file is:</p>\n\n<pre><code>Paperclip::Attachment.default_options[:url] = ':s3_alias_url'\nPaperclip::Attachment.default_options[:path] = '/:class/:attachment/:id_partition/:style/:filename'\nPaperclip::Attachment.default_options[:s3_host_alias] = ENV['S3_BUCKET_NAME']+'.s3.amazonaws.com'\nPaperclip.options[:command_path] = '/usr/bin'\n</code></pre>\n\n<p>Could you please let me know the reason and how to fix it?\nThank you so much.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1523491412, "post_id": 49785953, "comment_id": 86587515, "body": "when you say &quot;pasting it&quot; what do you mean? Did you run this successfully?  <a href=\"https://github.com/phusion/traveling-ruby/blob/master/TUTORIAL-1.md#quick-sanity-testing\" rel=\"nofollow noreferrer\">github.com/phusion/traveling-ruby/blob/master/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 147, "user_id": 3192136, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DFnBt.jpg?s=128&g=1", "display_name": "fmorales", "link": "https://stackoverflow.com/users/3192136/fmorales"}, "edited": false, "score": 0, "creation_date": 1564859011, "post_id": 49786175, "comment_id": 101170900, "body": "No need to lead with rudeness"}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": -1, "last_activity_date": 1564883692, "last_edit_date": 1564883692, "creation_date": 1523492525, "answer_id": 49786175, "question_id": 49785953, "link": "https://stackoverflow.com/questions/49785953/traveling-ruby-tutorial-wrapper-is-erroring/49786175#49786175", "title": "traveling ruby tutorial wrapper is erroring", "body": "<p>Follow the instructions exactly in order to get the expected results.  There is one step which may throw you off in the instructions assuming you're on a Mac and ran the sanity check.  You will need to do <code>cd ..</code> to move up one directory before doing the next step where you'll need to create a file in the proper directory.  It should be in <code>hello_app/packaging/wrapper.sh</code>  This is a shell script which will handle packaging the app into its respective folders.  It is not a ruby script and can't be executed by ruby or in a ruby IRB console etc.</p>\n\n<p>Make sure you're in the the root of <code>hello_app</code> folder before you tar up the sub directories as instructed here: <a href=\"https://github.com/phusion/traveling-ruby/blob/master/TUTORIAL-1.md#finalizing-packages\" rel=\"nofollow noreferrer\">https://github.com/phusion/traveling-ruby/blob/master/TUTORIAL-1.md#finalizing-packages</a></p>\n\n<p>That happens with these commands:</p>\n\n<pre><code>tar -czf hello-1.0.0-linux-x86.tar.gz hello-1.0.0-linux-x86\ntar -czf hello-1.0.0-linux-x86_64.tar.gz hello-1.0.0-linux-x86_64\ntar -czf hello-1.0.0-osx.tar.gz hello-1.0.0-osx\nrm -rf hello-1.0.0-linux-x86\nrm -rf hello-1.0.0-linux-x86_64\nrm -rf hello-1.0.0-osx\n</code></pre>\n\n<p>If you do everything correctly you'll end up with a directory structure like:</p>\n\n<pre><code>-rw-r--r--  1 someone  staff  5936573 Apr 11 20:17 hello-1.0.0-linux-x86.tar.gz\n-rw-r--r--  1 someone  staff  6378021 Apr 11 20:17 hello-1.0.0-linux-x86_64.tar.gz\n-rw-r--r--  1 someone  staff  6800089 Apr 11 20:17 hello-1.0.0-osx.tar.gz\n-rw-r--r--  1 someone  staff       39 Apr 11 20:10 hello.rb\ndrwxr-xr-x  6 someone  staff      204 Apr 11 20:13 packaging/\nhello_app % ll packaging\ntotal 37328\n-rw-r--r--  1 someone  staff  5945007 Apr 11 20:11 traveling-ruby-20141215-2.1.5-linux-x86.tar.gz\n-rw-r--r--  1 someone  staff  6388408 Apr 11 20:11 traveling-ruby-20141215-2.1.5-linux-x86_64.tar.gz\n-rw-r--r--  1 someone  staff  6769622 Apr 11 20:11 traveling-ruby-20141215-2.1.5-osx.tar.gz\n-rwxr-xr-x  1 someone  staff      244 Apr 11 20:13 wrapper.sh*\n</code></pre>\n"}], "owner": {"reputation": 822, "user_id": 3738936, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/762a46533d8d4488a9c6ad749d6a0691?s=128&d=identicon&r=PG&f=1", "display_name": "user3738936", "link": "https://stackoverflow.com/users/3738936/user3738936"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1564883692, "creation_date": 1523490517, "last_edit_date": 1523506871, "question_id": 49785953, "link": "https://stackoverflow.com/questions/49785953/traveling-ruby-tutorial-wrapper-is-erroring", "title": "traveling ruby tutorial wrapper is erroring", "body": "<p>I am having an issue understanding part of the tutorial for traveling ruby.</p>\n\n<p><a href=\"https://github.com/phusion/traveling-ruby/blob/master/TUTORIAL-1.md\" rel=\"nofollow noreferrer\">https://github.com/phusion/traveling-ruby/blob/master/TUTORIAL-1.md</a> </p>\n\n<pre><code>#!/bin/bash\nset -e\n\n# Figure out where this script is located.\nSELFDIR=\"`dirname \\\"$0\\\"`\"\nSELFDIR=\"`cd \\\"$SELFDIR\\\" &amp;&amp; pwd`\"\n\n# Run the actual app using the bundled Ruby interpreter.\nexec \"$SELFDIR/lib/ruby/bin/ruby\" \"$SELFDIR/lib/app/hello.rb\"\n</code></pre>\n\n<p>When I copy and paste this it doesn't seem to work and I am not sure what the end result is supposed to be, I don't see how this will look through directories and find my script, which is what the comment implies(# Figure out where this script is located.). I can't see why it isn't working.</p>\n\n<p>The result I get from pasting it is:</p>\n\n<pre><code>dirname: illegal option -- b\nusage: dirname path\nSaving session...\n...copying shared history...\n...saving history...truncating history files...\n...completed.\n\n[Process completed]\n</code></pre>\n"}, {"tags": ["ruby", "shopify", "shopify-app", "shopify-activemerchant", "shopify-template"], "comments": [{"owner": {"reputation": 1159, "user_id": 5971498, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-1NByAdPZUp4/AAAAAAAAAAI/AAAAAAAAAGw/45i_pdj78Ps/photo.jpg?sz=128", "display_name": "Alice Girard", "link": "https://stackoverflow.com/users/5971498/alice-girard"}, "edited": false, "score": 0, "creation_date": 1523568292, "post_id": 49785061, "comment_id": 86626978, "body": "Do you need to get stock only for first available variant or for each variant of the product?"}, {"owner": {"reputation": 2504, "user_id": 3729369, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/FYV4M.png?s=128&g=1", "display_name": "simonwo", "link": "https://stackoverflow.com/users/3729369/simonwo"}, "edited": false, "score": 0, "creation_date": 1523570495, "post_id": 49785061, "comment_id": 86627862, "body": "Why is that <code>if</code> statement there? Isn\u2019t that only showing low stock for the first variant? Try removing it"}], "owner": {"reputation": 671, "user_id": 2736028, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/ed2c901c8401f629b4ea1cf156ca4275?s=128&d=identicon&r=PG&f=1", "display_name": "JeVic", "link": "https://stackoverflow.com/users/2736028/jevic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 365, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523484218, "creation_date": 1523484218, "question_id": 49785061, "link": "https://stackoverflow.com/questions/49785061/shopify-how-to-display-stock-quantity-on-low-stock-products", "title": "Shopify How to Display Stock Quantity on low stock products", "body": "<p>Shopify How to  Display Stock Quantity on low stock products</p>\n\n<p>I did something like </p>\n\n<pre><code> {% for variant in product.variants %}\n\n          {% if variant == product.selected_or_first_available_variant %}\n        {%  assign stocklevel = variant.inventory_quantity %}\n\n{% if stocklevel &lt; 10 %}\n{% variant.inventory_quantity%}\n  {% endif %} \n\n\n\n           {% endif %}\n            {% endfor %}\n</code></pre>\n\n<p>but it only displayed the first variant value </p>\n\n<p>I</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1523486494, "post_id": 49784840, "comment_id": 86586251, "body": "What&#39;s that attribute. How are your models related?"}, {"owner": {"reputation": 789, "user_id": 5030271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94768f7cf8157dc056a26b95991e2b3d?s=128&d=identicon&r=PG&f=1", "display_name": "DNorthrup", "link": "https://stackoverflow.com/users/5030271/dnorthrup"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1523487442, "post_id": 49784840, "comment_id": 86586531, "body": "@SebastianPalma Thought the schema would show. Character has a <code>char_class</code> based on <code>char_class_id</code> - Attribute is <code>class_name</code> in <code>CharClass</code> model, <code>char_class_id</code> in <code>Character</code> model"}], "owner": {"reputation": 789, "user_id": 5030271, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94768f7cf8157dc056a26b95991e2b3d?s=128&d=identicon&r=PG&f=1", "display_name": "DNorthrup", "link": "https://stackoverflow.com/users/5030271/dnorthrup"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523482751, "creation_date": 1523482751, "question_id": 49784840, "link": "https://stackoverflow.com/questions/49784840/rails-5-api-modifying-the-index-response-object", "title": "Rails 5 API - Modifying the &#39;index&#39; response object", "body": "<p>I have a simple <code>index</code> function</p>\n\n<pre><code>def index\n\n    @campaign = Campaign.find_by_id(params[:campaign_id])\n    @characters = @campaign.characters\n    render json: {\n        characters: @characters\n    }\nend\n</code></pre>\n\n<p>This works as intended, but one of the attributes is an <code>id</code> that is a reference to another table. To avoid the front-end having to solve for this I would prefer the backend to respond with the correct details. </p>\n\n<p>Temporarily I have handled this in the create method</p>\n\n<pre><code> def create\n        @campaign = Campaign.find_by_id(params[:campaign_id])\n        @charClass = CharClass.find_by_id(params[:character_char_class_id]).class_name\n        @character = @campaign.characters.new(character_params)\n        @character.char_class_id = params[:character_char_class_id]\n\n        if @character.save!\n            render status: 201, json: {\n\n                message: \"Successfull added this character to the campaign!\",\n                character_name: @character.character_name + ' the ' + @charClass,\n                character_class: @charClass,\n                character_level: @character.character_level,\n                character_experience: @character.character_experience,\n                character_gold: @character.character_gold,\n                character_perks: get_names(@character.character_perks),\n\n            }\n        else\n            render status: 404, json: {\n                message: \"Something went wrong: Check line 24 of the Character Controller\"\n            }\n        end\n    end\n</code></pre>\n\n<p>However, this feels wrong because <code>Characters</code> already knows of the <code>Char_Class</code> relation. (Removed useless info)</p>\n\n<pre><code>  create_table \"characters\", force: :cascade do |t|\n    t.string \"character_class\" # I added this\n    t.integer \"char_class_id\" # This was already here\n    t.index [\"campaign_id\"], name: \"index_characters_on_campaign_id\"\n    t.index [\"char_class_id\"], name: \"index_characters_on_char_class_id\"\n  end\n</code></pre>\n\n<p>So I am able to do something like <code>Character.first.charChass.class_name</code> and I will get the raw text output, as you see in the create: But how could I do this within the controller (or model?)</p>\n\n<p>I will be doing a flow like this for numerous models so I am thinking I won't want to keep with this method.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "has-and-belongs-to-many"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1523483002, "post_id": 49784786, "comment_id": 86585163, "body": "@moveson there is no join model in a <code>has_and_belongs_to_many</code> association. Thats <code>has_many through:</code>"}, {"owner": {"reputation": 1027, "user_id": 7172464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mxB5X.jpg?s=128&g=1", "display_name": "Nino", "link": "https://stackoverflow.com/users/7172464/nino"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523483245, "post_id": 49784786, "comment_id": 86585245, "body": "@moveson I don&quot;t have a &quot;relationship model&quot; Only a table. I&#39;ve edited my post"}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1523483276, "post_id": 49784786, "comment_id": 86585261, "body": "@NinoTreyssat-Vincent I was confused, thinking you were using a <code>has_many: through</code> relationship. See my answer below."}], "answers": [{"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": false, "score": 1, "last_activity_date": 1523483377, "last_edit_date": 1523483377, "creation_date": 1523482915, "answer_id": 49784866, "question_id": 49784786, "link": "https://stackoverflow.com/questions/49784786/how-to-seed-database-with-has-and-belongs-to-many/49784866#49784866", "title": "How to seed database with has_and_belongs_to_many", "body": "<p>You'll want to assign the newly created records to instance variables like this:</p>\n\n<pre><code># db/seeds.rb\n\nphone_1 = Phone.create(name:'Home', phone:'+00 0 00 00 00 00')\nphone_2 = Phone.create(name:'Work', phone:'+00 1 00 00 00 00')\n\ncategory_1 = Category.create(name:'tactile-screen')\ncategory_2 = Category.create(name:'mobile')\ncategory_3 = Category.create(name:'landline')\n\n...\n</code></pre>\n\n<p>Assuming you want to assign each phone to each category, you can let Rails do the work for you like this:</p>\n\n<pre><code>...\n\n[category_1, category_2, category_3].each do |category|\n  category.phones &lt;&lt; [phone_1, phone_2]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1523486516, "last_edit_date": 1523486516, "creation_date": 1523483513, "answer_id": 49784959, "question_id": 49784786, "link": "https://stackoverflow.com/questions/49784786/how-to-seed-database-with-has-and-belongs-to-many/49784959#49784959", "title": "How to seed database with has_and_belongs_to_many", "body": "<p>If you want to associate each Phone instance with all the categories you can do it like so:</p>\n\n<pre><code>Category.create(name:'tactile-screen')\nCategory.create(name:'mobile')\nCategory.create(name:'landline')\n\nids = Category.all.ids\n\nPhone.create(name:'Home', phone:'+00 0 00 00 00 00', category_ids: ids)\nPhone.create(name:'Work', phone:'+00 1 00 00 00 00', category_ids: ids)\n</code></pre>\n\n<p>Otherwise just create arrays of the records and you can do something like the following if you for example want to apply a random category:</p>\n\n<pre><code>categories = ['tactile-screen', 'mobile', 'landline'].map do |c|\n  Category.create(name: c)\nend\n\nphones = [\n  Phone.create(name:'Home', phone:'+00 0 00 00 00 00'),\n  Phone.create(name:'Work', phone:'+00 1 00 00 00 00')\n]\n\nphones.each do |p|\n  p.categories &lt;&lt; categories.sample\nend\n</code></pre>\n\n<p>If you are using Faker or <a href=\"https://github.com/ffaker/ffaker\" rel=\"nofollow noreferrer\">FFaker</a> you can use this nifty trick to generate random records:</p>\n\n<pre><code>require 'ffaker'\n\n# generate a 100 random numbers\nphones = 100.times.map do \n  Phone.create(name:'Home', FFaker::PhoneNumber.phone_number)\nend\n\n# generate between 0 and 100 random numbers\nphones = ((rand * 100).floor).times.map do\n  Phone.create(name:'Home', FFaker::PhoneNumber.phone_number)\nend\n</code></pre>\n"}], "owner": {"reputation": 1027, "user_id": 7172464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mxB5X.jpg?s=128&g=1", "display_name": "Nino", "link": "https://stackoverflow.com/users/7172464/nino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 797, "favorite_count": 0, "accepted_answer_id": 49784959, "answer_count": 2, "score": 0, "last_activity_date": 1523486516, "creation_date": 1523482475, "last_edit_date": 1523483323, "question_id": 49784786, "link": "https://stackoverflow.com/questions/49784786/how-to-seed-database-with-has-and-belongs-to-many", "title": "How to seed database with has_and_belongs_to_many", "body": "<p>I have <code>has_and_belongs_to_many</code> relations between two models (<code>Phone</code> and <code>Category</code>) and I seed the phones and categories's tables with something similar to this :</p>\n\n<pre><code>Phone.create(name:'Home', phone:'+00 0 00 00 00 00')\nPhone.create(name:'Work', phone:'+00 1 00 00 00 00')\nCategory.create(name:'tactile-screen')\nCategory.create(name:'mobile')\nCategory.create(name:'landline')\n</code></pre>\n\n<p>This is my schema.rb</p>\n\n<pre><code>create_table \"categories\", force: :cascade do |t|\n  t.string \"name\"\nend\n\ncreate_table \"categories_phones\", id: false, force: :cascade do |t|\n  t.integer \"category_id\"\n  t.integer \"phones_id\"\nend\n\ncreate_table \"phones\", force: :cascade do |t|\n  t.string \"name\"\n  t.string \"phone\"\nend\n</code></pre>\n\n<p>And theses are my models :</p>\n\n<pre><code>class Category &lt; ApplicationRecord\n    has_and_belongs_to_many :phones\nend\nclass Phone &lt; ApplicationRecord\n    has_and_belongs_to_many :categories\nend\n</code></pre>\n\n<p>I want to seed the belonging categories to each phones, how could I do that ?</p>\n"}, {"tags": ["ruby", "google-api", "google-drive-api", "google-api-ruby-client"], "comments": [{"owner": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1523603211, "post_id": 49784677, "comment_id": 86636853, "body": "If a download fails your going to have to start again there is nothing you can do about that."}, {"owner": {"reputation": 65, "user_id": 8126706, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/809c4812297595cfa1ef113ed35c45bc?s=128&d=identicon&r=PG&f=1", "display_name": "zzlyn", "link": "https://stackoverflow.com/users/8126706/zzlyn"}, "reply_to_user": {"reputation": 70965, "user_id": 1841839, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZyKjr.png?s=128&g=1", "display_name": "DaImTo", "link": "https://stackoverflow.com/users/1841839/daimto"}, "edited": false, "score": 0, "creation_date": 1523643532, "post_id": 49784677, "comment_id": 86661588, "body": "It fails on every single attempt. I don&#39;t think implementing any backoffs can save it."}], "owner": {"reputation": 65, "user_id": 8126706, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/809c4812297595cfa1ef113ed35c45bc?s=128&d=identicon&r=PG&f=1", "display_name": "zzlyn", "link": "https://stackoverflow.com/users/8126706/zzlyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 228, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523562317, "creation_date": 1523481809, "last_edit_date": 1523562317, "question_id": 49784677, "link": "https://stackoverflow.com/questions/49784677/google-drive-api-returns-500-internal-server-error-when-exporting-large-document", "title": "Google Drive API returns 500 Internal Server Error when exporting large documents", "body": "<p>I was trying to export(programmatically download from google drive) a slides document that is larger than 10MB in PDF format and encountered <code>Error - #&lt;Google::Apis::ServerError: Server error&gt;</code>.</p>\n\n<p>I am using Google API ruby client and there is no specification on why this can happen. Documents that are &lt;10MB when downloaded as PDF manually works fine when exported programmatically.</p>\n\n<p>The method I use to export files is </p>\n\n<p><code>@service.export_file(id, 'application/pdf', download_dest: StringIO.new).string</code>, </p>\n\n<p><code>@service</code> is a <code>Google::Apis::DriveV3::DriveService</code> object.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "ruby-on-rails-3.2"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 9528038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Joao Quaresma", "link": "https://stackoverflow.com/users/9528038/joao-quaresma"}, "edited": false, "score": 0, "creation_date": 1523511412, "post_id": 49784839, "comment_id": 86592353, "body": "that looks correct, thanks for your reply. I&#39;ve checked other apps and all do the same thing, after the error the url changes and loses the /edit. So now there&#39;s another question, once here: my_obj_here/1 what do I need to have in the show page to make sure I stay in that same edit after a refresh? Example: <b>1 -</b> we are here: my_obj_here/1/edit <b>2 -</b> we force an error and we go to my_obj_here/1 with the error messages showing <b>3 -</b> Refresh page This is now the &quot;show&quot; instead of the &quot;edit&quot;."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 41, "user_id": 9528038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Joao Quaresma", "link": "https://stackoverflow.com/users/9528038/joao-quaresma"}, "edited": false, "score": 0, "creation_date": 1523533771, "post_id": 49784839, "comment_id": 86605757, "body": "You don&#39;t. Refreshing the page performs a <code>GET my_obj_here&#47;1</code> request which is not the same at all. Thats an idempotent request that should provide the same result no matter of the state. This is actually less of an issue than you think. I would encourage you to keep an open mind and a focus on why REST is built the way it is rather than on how you think it should work."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 41, "user_id": 9528038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Joao Quaresma", "link": "https://stackoverflow.com/users/9528038/joao-quaresma"}, "edited": false, "score": 0, "creation_date": 1523533869, "post_id": 49784839, "comment_id": 86605823, "body": "If you really want the user not to lose state than use javascript to set a <code>window.onunload</code> handler. <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers/onunload\" rel=\"nofollow noreferrer\">developer.mozilla.org/en-US/docs/Web/API/WindowEventHandlers&zwnj;&#8203;/&hellip;</a>"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1523487771, "last_edit_date": 1523487771, "creation_date": 1523482748, "answer_id": 49784839, "question_id": 49784671, "link": "https://stackoverflow.com/questions/49784671/ror-render-errors-partial-if-edit-fails/49784839#49784839", "title": "RoR Render errors partial if edit fails", "body": "<blockquote>\n  <p>The errors show correctly (in this case max length 100) but my url\n  changes from: my_obj_here/1/edit to my_obj_here/1 which should not\n  happen.</p>\n</blockquote>\n\n<p>This is is a very common misconception. Rails uses RESTful conventions where the HTTP methods used are extremely important.</p>\n\n<p>When you click an edit link it you're performing a GET request to <code>my_obj_here/1/edit</code>. This is an idempotent action - the result is always the same and it does not alter any resource. In fact the <code>new</code> and <code>edit</code> actions in Rails don't do anything but display forms.</p>\n\n<p>When you submit the form your sending a PATCH request to <code>my_obj_here/1</code>. This is a non-idempotent request as it alters the resource. When the validation fails and you render you're actually displaying the result of an attempt to update a resource. This is fundamentally different than the GET request to <code>my_obj_here/1/edit</code> - it's not cacheable and cannot be revisited. </p>\n\n<p><a href=\"http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/routing.html#resource-routing-the-rails-default</a></p>\n"}], "owner": {"reputation": 41, "user_id": 9528038, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Joao Quaresma", "link": "https://stackoverflow.com/users/9528038/joao-quaresma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 49784839, "answer_count": 1, "score": 0, "last_activity_date": 1523487771, "creation_date": 1523481764, "last_edit_date": 1523482259, "question_id": 49784671, "link": "https://stackoverflow.com/questions/49784671/ror-render-errors-partial-if-edit-fails", "title": "RoR Render errors partial if edit fails", "body": "<p>the problem I have is probably easy to solve, although I did a lot of search and cant find a solution.</p>\n\n<p>I have in my _errors.html.erb</p>\n\n<pre><code>&lt;% if obj.errors.any? %&gt;\n &lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-8 col-md-offset-2 col-xs-12\"&gt;\n   &lt;div class=\"panel panel-danger\"&gt;\n    &lt;div class=\"panel-heading\"&gt;\n      &lt;h2 class=\"panel-title\"&gt;\n        &lt;%= pluralize(obj.errors.count, \"error\") %&gt;\n        prohibided this form from being saved:\n      &lt;/h2&gt;\n      &lt;div class=\"panel-body\"&gt;\n        &lt;ul&gt;\n          &lt;% obj.errors.full_messages.each do |msg| %&gt;\n           &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n          &lt;% end %&gt;\n        &lt;/ul&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n   &lt;/div&gt;\n  &lt;/div&gt;\n &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Then I have in my edit.html.erb that has a form and:</p>\n\n<pre><code>&lt;%= render 'layouts/errors', obj: @my_obj_here %&gt;\n</code></pre>\n\n<p>Then in the controller update/create (lets use the update as example):</p>\n\n<pre><code>def update\n    if @my_obj_here.update(params[:my_obj_here].permit(:body))\n        redirect_to my_path_here_path(@my_obj_here), notice: \"Something.\"\n    else\n        render 'edit'\n    end\n end\n</code></pre>\n\n<p>The issue happens when I try to update and the submit info is invalid, which will fall into the \"render 'edit'\"</p>\n\n<p>The errors show correctly (in this case max length 100) but my url changes from:\n<strong>my_obj_here/1/edit</strong> to <strong>my_obj_here/1</strong></p>\n\n<p>which should not happen.</p>\n\n<p>So next I tried replacing the \"render 'edit'\" with <code>\"redirect_to :back\"</code> but this just ignores the \n<code>&lt;%= render 'layouts/errors', obj: @my_obj_here %&gt;</code> in the edit.html.erb.</p>\n\n<p>Can someone help me out figuring out how to render the same <strong>my_obj_here/1/edit</strong>? \nI believe I need to use the \"render\" my method because the redirect will just skip the errors partial.</p>\n\n<p>Also, in my update method you probably noticed this \"if true\":\n<code>redirect_to my_path_here_path(@my_obj_here), notice: \"Something.\"</code>\nI could the the same and just change my code to:\n<code>redirect_to :back, :notice =&gt; \"something.\"</code>\nThis would work, but does not show the errors as I want them to shown when my the errors partial is used.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "state-machine"], "answers": [{"comments": [{"owner": {"reputation": 3315, "user_id": 2261909, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e2a6a4bb5a88ce2b4805c4a3ca2e4ce?s=128&d=identicon&r=PG", "display_name": "brandonhilkert", "link": "https://stackoverflow.com/users/2261909/brandonhilkert"}, "edited": false, "score": 0, "creation_date": 1523491443, "post_id": 49785476, "comment_id": 86587521, "body": "This is great -- some formal approaches to investigate more closely. The latter is new to me. Thanks!"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 3315, "user_id": 2261909, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e2a6a4bb5a88ce2b4805c4a3ca2e4ce?s=128&d=identicon&r=PG", "display_name": "brandonhilkert", "link": "https://stackoverflow.com/users/2261909/brandonhilkert"}, "edited": false, "score": 1, "creation_date": 1523491536, "post_id": 49785476, "comment_id": 86587540, "body": "The latter is a bit similar to concepts used in postgres MVCC"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1523486942, "creation_date": 1523486942, "answer_id": 49785476, "question_id": 49784492, "link": "https://stackoverflow.com/questions/49784492/recording-status-transitions/49785476#49785476", "title": "Recording status transitions", "body": "<p>I can see two alternative solutions: event sourcing and temporary tables</p>\n\n<p>With event sourcing you'll record events about state changes and build <code>Subscription</code> status basing on event list. To get a historical status, you just query for events until the point in time that interests you. It's quite similar to what you described. </p>\n\n<p>You can also use temporal table and keep timestamps when subscription statues (or the whole subscription) was valid (<code>valid_to</code>, <code>valid_from</code>). Instead of updating rows, you'll insert a new one and setting a <code>valid_to</code> timestamp in the old one. You'll just query for a subsctiption that had <code>valid_from &lt; $date AND valid_to &gt; $date</code>. More details on <a href=\"https://en.wikipedia.org/wiki/Temporal_database#Bitemporal_relations\" rel=\"nofollow noreferrer\">wiki</a> - it's a good starter.</p>\n"}], "owner": {"reputation": 3315, "user_id": 2261909, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/3e2a6a4bb5a88ce2b4805c4a3ca2e4ce?s=128&d=identicon&r=PG", "display_name": "brandonhilkert", "link": "https://stackoverflow.com/users/2261909/brandonhilkert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 49785476, "answer_count": 1, "score": 1, "last_activity_date": 1523486942, "creation_date": 1523480910, "question_id": 49784492, "link": "https://stackoverflow.com/questions/49784492/recording-status-transitions", "title": "Recording status transitions", "body": "<p>We have a Rails app that has a <code>Subscription</code> model with a <code>status</code> field that's a string. Values are things like <code>active</code>, <code>canceled</code>, <code>dunning</code>, etc.</p>\n\n<p>We don't record when the <code>status</code> transitions from one state to another, but I'd like to. My challenge is thinking about how to be able to easily answer the question:</p>\n\n<p>\"What subscriptions were <code>active</code> 3 months ago?\"</p>\n\n<p>I could make a table like <code>subscription_status_transitions</code> with:</p>\n\n<ul>\n<li><code>subscription_id</code></li>\n<li><code>status</code></li>\n<li><code>transitioned_at</code></li>\n</ul>\n\n<p>In order to answer the question above, it seems like I'd have to get the first <code>status</code> that's &lt; date in question (3 months ago)?</p>\n\n<p>Is there a better way to record this kind of thing to easily answer that question?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "scope", "associations", "has-many-through"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523481707, "post_id": 49784372, "comment_id": 86584659, "body": "You can&#39;t set a scope when defining an association that applies to a completely different table. There is just no way that that is going to work.  I don&#39;t really understand what it is that you are trying to accomplish - if you want to create a many to many association where a lesson has multiple tutors doing different time slots then just use LessonApplication as a join table and put the time range on that table."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523481902, "post_id": 49784372, "comment_id": 86584732, "body": "But I think you really need to get back to the drawing table on your DB design as there are a lot of things that just don&#39;t work here. For example a Student <code>has_many :lesson_applications</code> but there is no corresponding <code>belongs_to :student</code> on <code>LessonApplication</code> and since the association between tutor and lesson is 1-1 there is no point in joining it on LessonApplication."}, {"owner": {"reputation": 21, "user_id": 3029832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb628fcae9378fb5961506c2e286a5d0?s=128&d=identicon&r=PG&f=1", "display_name": "meacuna", "link": "https://stackoverflow.com/users/3029832/meacuna"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523482665, "post_id": 49784372, "comment_id": 86585010, "body": "@max Sorry, I messed up copying part of my models here. I just updated the question."}, {"owner": {"reputation": 856, "user_id": 2131983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3sKfa.jpg?s=128&g=1", "display_name": "khiav reoy", "link": "https://stackoverflow.com/users/2131983/khiav-reoy"}, "edited": false, "score": 0, "creation_date": 1523500129, "post_id": 49784372, "comment_id": 86589308, "body": "I think it&#39;s a bug and was fixed <a href=\"https://github.com/rails/rails/pull/29413\" rel=\"nofollow noreferrer\">here</a>. Try upgrade your rails from 5.1.5 to 5.1.6"}, {"owner": {"reputation": 21, "user_id": 3029832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb628fcae9378fb5961506c2e286a5d0?s=128&d=identicon&r=PG&f=1", "display_name": "meacuna", "link": "https://stackoverflow.com/users/3029832/meacuna"}, "reply_to_user": {"reputation": 856, "user_id": 2131983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3sKfa.jpg?s=128&g=1", "display_name": "khiav reoy", "link": "https://stackoverflow.com/users/2131983/khiav-reoy"}, "edited": false, "score": 0, "creation_date": 1523623900, "post_id": 49784372, "comment_id": 86649345, "body": "@khiavreoy I&#39;m having the same issue with rails 5.1.6"}], "owner": {"reputation": 21, "user_id": 3029832, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb628fcae9378fb5961506c2e286a5d0?s=128&d=identicon&r=PG&f=1", "display_name": "meacuna", "link": "https://stackoverflow.com/users/3029832/meacuna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 136, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523623920, "creation_date": 1523480332, "last_edit_date": 1523623920, "question_id": 49784372, "link": "https://stackoverflow.com/questions/49784372/rails-has-many-through-scoped-with-joins", "title": "Rails has_many :through scoped with joins", "body": "<p>I'm trying to create a <code>has_many :through</code> association with a custom scope. The problem is that the scope has a <code>joins</code> with a 3rd model, and that seems to be breaking the association.\nThese are the models:</p>\n\n<pre><code>class Student &lt; ApplicationRecord\n  has_many :lesson_applications, through: :lesson_requests\n  has_many :lessons, through: :lesson_applications\n  has_many :scoped_lessons, -&gt; { custom_scope }, through: :lesson_applications, source: :lesson\n  has_many :tutors, through: :scoped_lessons # Broken association\nend\n\nclass Lesson &lt; ApplicationRecord\n  belongs_to :lesson_application\n  has_one :tutor, through: :lesson_application\n  has_one :time_range, as: :time_rangeable\n\n  scope :custom_scope, (lambda {\n    joins(:time_range).where('time_ranges.attribute BETWEEN ? AND ?', value1, value2)\n  })\nend\n\nclass LessonApplication &lt; ApplicationRecord\n  belongs_to :lesson_request\n  belongs_to :tutor\n  has_one :lesson\nend\n\nclass Tutor &lt; ApplicationRecord\n  has_many :lesson_applications\n  has_many :lessons, through: lesson_applications\nend\n\nclass TimeRange &lt; ApplicationRecord\n  belongs_to :time_rangeable, polymorphic: true\nend\n</code></pre>\n\n<p>I expected to get the student's tutors from the scoped lessons, but instead I get an <code>missing FROM-clause entry for table 'time_ranges'</code>. Which is clearly and error that can be seen on the generated query.</p>\n\n<p>The generated query when I do <code>student.tutors</code> is:</p>\n\n<pre><code>SELECT \"tutors\".* FROM \"tutors\" INNER JOIN \"lesson_applications\" ON \"tutors\".\"id\" = \"lesson_applications\".\"tutor_id\" INNER JOIN \"lessons\" ON \"lesson_applications\".\"id\" = \"lessons\".\"lesson_application_id\" INNER JOIN \"lesson_applications\" \"lesson_applications_tutors\" ON \"lessons\".\"lesson_application_id\" = \"lesson_applications_tutors\".\"id\" INNER JOIN \"lesson_requests\" ON \"lesson_applications_tutors\".\"lesson_request_id\" = \"lesson_requests\".\"id\" WHERE \"lesson_requests\".\"student_id\" = $1 AND (time_ranges.start BETWEEN '2018-04-11 20:27:34.798992' AND '2018-04-11 20:27:34.799090') LIMIT $2\n</code></pre>\n\n<p>The method I'm using temporarily instead of the association is:</p>\n\n<pre><code>class Student &lt; ApplicationRecord\n  def tutors\n    scoped_lessons.map(&amp;:tutor).uniq\n  end\nend\n</code></pre>\n\n<p>I am using ruby 2.5.1 with Rails 5.1.6</p>\n\n<p>Thank you in advance.</p>\n\n<p>Edit: some associations were wrong.</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "database", "file"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523492438, "post_id": 49784359, "comment_id": 86587737, "body": "I would start by breaking this up into methods or classes that do one job each so that you can actually test each part separatly. I doubt that anyone is will to help you dig through a long proceedural rant."}, {"owner": {"reputation": 70791, "user_id": 997358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f849cfde4e526e22e916fa69103ef7e7?s=128&d=identicon&r=PG", "display_name": "peak", "link": "https://stackoverflow.com/users/997358/peak"}, "edited": false, "score": 0, "creation_date": 1523500523, "post_id": 49784359, "comment_id": 86589405, "body": "The &quot;Sample File Data&quot; is not valid JSON.  Usually, pagination of JSON results in multiple bits of valid JSON. In any case, it&#39;s not clear how this &quot;Sample&quot; relates to the complete data.  It would probably help if you could follow the guidelines at <a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1524210983, "post_id": 49784359, "comment_id": 86888989, "body": "Which line is line 84? That is the one causing the error. Some json is malformed. Either the API is returning bad json (weird?), but most likely it is <i>not</i> in UTF8?"}], "owner": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 76, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523480255, "creation_date": 1523480255, "question_id": 49784359, "link": "https://stackoverflow.com/questions/49784359/issue-importing-json-data-into-database", "title": "Issue importing JSON data into database", "body": "<p>I've written a script that imports paginated JSON data from an api, encodes the data to UTF-8 and then writes it to a file. </p>\n\n<p>I need to iterate over the data in the file to create records in my database, but am running to an error loading the file so I can do so. </p>\n\n<p>The stack trace isn't telling me much about what's wrong; any help would be greatly appreciated!</p>\n\n<p>code:</p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\nrequire 'json'\nrequire 'faker'\n\n#imports APR User data from the zendesk api, iterates through it and populates the database with it. \n\n\nuri = URI.parse(\"https://aprtechsupport.zendesk.com/api/v2/users.json\")\nrequest = Net::HTTP::Get.new(uri)\nrequest.content_type = \"application/json\"\nrequest.basic_auth(\"cbradford@blah.com\", \"blah32\")\n\nreq_options = {\n  use_ssl: uri.scheme == \"https\",\n}\n\n@response = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http|\n  http.request(request)\nend\n\n\nres = @response.body \nres.force_encoding(\"utf-8\")\nresEncoded = JSON.parse(res)\n\nusers = resEncoded\n\n\n\n#data = {}\n#data.merge(users)\n\nresults = []\nresults &lt;&lt; resEncoded\n\nputs results \n\nwhile users[\"next_page\"]\n newUri = users[\"next_page\"]\n uriLoop = URI.parse(newUri)\n puts newUri\n requestLoop = Net::HTTP::Get.new(uriLoop)\n requestLoop.content_type = \"application/json\"\n requestLoop.basic_auth(\"cbradford@blah.com\", \"blah32\")\n\n req_optionsLoop = {\n   use_ssl: uriLoop.scheme == \"https\",\n }\n\n @responseLoop = Net::HTTP.start(uriLoop.hostname, uriLoop.port, req_optionsLoop) do |http|\n  http.request(requestLoop)\n  end\n  dataEncoded = @responseLoop.body\n  dataEncoded.force_encoding(\"utf-8\")\n  resLoop = JSON.parse(dataEncoded)\n  results &lt;&lt; resLoop\n  updateUri = resLoop[\"next_page\"]\n  users[\"next_page\"] = updateUri\nend\n\n\n\nputs \"hash created Successfully!\"\n\nputs results\n\nFile.write('blahzendeskusers1.json', results)\n\n\nputs \"File Created Successfully!\"\n\n\nfile = File.read('blahzendeskusers1.json')\n\nusersLoop = JSON.load(file)[\"users\"]\n\nusersLoop.each do |a|\n    User.find_or_create_by(:zendesk_id_int =&gt; a[\"id\"], :url =&gt; a[\"url\"], :name =&gt; a[\"name\"], :email =&gt; a[\"email\"],\n        :phone =&gt; a[\"phone\"], :role =&gt; a[\"role\"], :default_group_id =&gt; a[\"default_group_id\"], :external_id =&gt; a[\"external_id\"],\n        :tags =&gt; a[\"tags\"]\n        )\nend\n</code></pre>\n\n<p>stack trace:</p>\n\n<pre><code>&gt;     /Users/christopherbradford/.rbenv/versions/2.3.1/lib/ruby/2.3.0/json/common.rb:156:in\n&gt; `parse'\n&gt; /Users/christopherbradford/.rbenv/versions/2.3.1/lib/ruby/2.3.0/json/common.rb:156:in\n&gt; `parse'\n&gt; /Users/christopherbradford/.rbenv/versions/2.3.1/lib/ruby/2.3.0/json/common.rb:335:in\n&gt; `load'\n&gt; /Users/christopherbradford/railsProjects/aprzendeskdata/db/seeds.rb:84:in\n&gt; `&lt;top (required)&gt;'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/activesupport-5.1.5/lib/active_support/dependencies.rb:286:in `load'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/activesupport-5.1.5/lib/active_support/dependencies.rb:286:in `block in load'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/activesupport-5.1.5/lib/active_support/dependencies.rb:258:in `load_dependency'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/activesupport-5.1.5/lib/active_support/dependencies.rb:286:in `load'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/railties-5.1.5/lib/rails/engine.rb:549:in\n&gt; `load_seed'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.5/lib/active_record/tasks/database_tasks.rb:270:in\n&gt; `load_seed'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/activerecord-5.1.5/lib/active_record/railties/databases.rake:184:in\n&gt; `block (2 levels) in &lt;top (required)&gt;'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/task.rb:271:in\n&gt; `block in execute'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/task.rb:271:in\n&gt; `each'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/task.rb:271:in\n&gt; `execute'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/task.rb:213:in\n&gt; `block in invoke_with_call_chain'\n&gt; /Users/christopherbradford/.rbenv/versions/2.3.1/lib/ruby/2.3.0/monitor.rb:214:in\n&gt; `mon_synchronize'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/task.rb:193:in\n&gt; `invoke_with_call_chain'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/task.rb:182:in\n&gt; `invoke'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/application.rb:160:in\n&gt; `invoke_task'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/application.rb:116:in\n&gt; `block (2 levels) in top_level'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/application.rb:116:in\n&gt; `each'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/application.rb:116:in\n&gt; `block in top_level'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/application.rb:125:in\n&gt; `run_with_threads'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/application.rb:110:in\n&gt; `top_level'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/application.rb:83:in\n&gt; `block in run'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/application.rb:186:in\n&gt; `standard_exception_handling'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/lib/rake/application.rb:80:in\n&gt; `run'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/gems/rake-12.3.1/exe/rake:27:in\n&gt; `&lt;top (required)&gt;'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/bin/rake:23:in `load'\n&gt; /Users/christopherbradford/.rvm/gems/ruby-2.4.1/bin/rake:23:in\n&gt; `&lt;main&gt;' Tasks: TOP =&gt; db:seed\n</code></pre>\n\n<p>Sample File Data:</p>\n\n<pre><code>{\"users\"=&gt;[{\"id\"=&gt;360403052546, \"url\"=&gt;\"https://aprtechsupport.zendesk.com/api/v2/users/360403052546.json\", \"name\"=&gt;\"Caller +1 (650) 434-4313\", \"email\"=&gt;nil, \"created_at\"=&gt;\"2018-03-05T19:36:00Z\", \"updated_at\"=&gt;\"2018-03-05T19:36:00Z\", \"time_zone\"=&gt;\"Pacific Time (US &amp; Canada)\", \"phone\"=&gt;\"+16504344313\", \"shared_phone_number\"=&gt;false, \"photo\"=&gt;nil, \"locale_id\"=&gt;1, \"locale\"=&gt;\"en-US\", \"organization_id\"=&gt;nil, \"role\"=&gt;\"end-user\", \"verified\"=&gt;true, \"external_id\"=&gt;nil, \"tags\"=&gt;[], \"alias\"=&gt;nil, \"active\"=&gt;true, \"shared\"=&gt;false, \"shared_agent\"=&gt;false, \"last_login_at\"=&gt;nil, \"two_factor_auth_enabled\"=&gt;false, \"signature\"=&gt;nil, \"details\"=&gt;nil, \"notes\"=&gt;nil, \"role_type\"=&gt;nil, \"custom_role_id\"=&gt;nil, \"moderator\"=&gt;false, \"ticket_restriction\"=&gt;\"requested\", \"only_private_comments\"=&gt;false, \"restricted_agent\"=&gt;true, \"suspended\"=&gt;false, \"chat_only\"=&gt;false, \"default_group_id\"=&gt;nil, \"user_fields\"=&gt;{}}, {\"id\"=&gt;360404721566, \"url\"=&gt;\"https://aprtechsupport.zendesk.com/api/v2/users/360404721566.json\", \"name\"=&gt;\"renglehart\", \"email\"=&gt;\"renglehart@apr.com\", \"created_at\"=&gt;\"2018-03-06T00:29:39Z\", \"updated_at\"=&gt;\"2018-03-07T19:00:58Z\", \"time_zone\"=&gt;\"Pacific Time (US &amp; Canada)\", \"phone\"=&gt;nil, \"shared_phone_number\"=&gt;nil, \"photo\"=&gt;nil, \"locale_id\"=&gt;1, \"locale\"=&gt;\"en-US\", \"organization_id\"=&gt;nil, \"role\"=&gt;\"end-user\", \"verified\"=&gt;true, \"external_id\"=&gt;nil, \"tags\"=&gt;[], \"alias\"=&gt;nil, \"active\"=&gt;true, \"shared\"=&gt;false, \"shared_agent\"=&gt;false, \"last_login_at\"=&gt;\"2018-03-07T19:00:58Z\", \"two_factor_auth_enabled\"=&gt;false, \"signature\"=&gt;nil, \"details\"=&gt;nil, \"notes\"=&gt;nil, \"role_type\"=&gt;nil, \"custom_role_id\"=&gt;nil, \"moderator\"=&gt;false, \"ticket_restriction\"=&gt;\"requested\", \"only_private_comments\"=&gt;false, \"restricted_agent\"=&gt;true, \"suspended\"=&gt;false, \"chat_only\"=&gt;false, \"default_group_id\"=&gt;nil, \"user_fields\"=&gt;{}},\n</code></pre>\n"}, {"tags": ["ruby", "irb"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1523479163, "post_id": 49784056, "comment_id": 86583617, "body": "What is the image supposed to show?"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523479192, "post_id": 49784056, "comment_id": 86583628, "body": "Then post your Ruby version; you may have found a bug."}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 3, "creation_date": 1523479267, "post_id": 49784056, "comment_id": 86583662, "body": "I can&#39;t reproduce your problem with <code>+</code> in <code>irb</code> with Ruby 2.5.1."}, {"owner": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 0, "creation_date": 1523479320, "post_id": 49784056, "comment_id": 86583689, "body": "try class Fixnum"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 1, "creation_date": 1523479504, "post_id": 49784056, "comment_id": 86583766, "body": "@Phlip after you redefine <code>+</code> as described by the OP, try to do define another class with, say, <code>class Foo</code> &lt;enter&gt;. On Ruby 2.4.0 I get an error."}, {"owner": {"reputation": 75, "user_id": 9632703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPpBO.jpg?s=128&g=1", "display_name": "Richard Steinbrecht", "link": "https://stackoverflow.com/users/9632703/richard-steinbrecht"}, "edited": false, "score": 0, "creation_date": 1523479587, "post_id": 49784056, "comment_id": 86583811, "body": "Ruby version: 2.5.0 The image just shows what I described, nothing more. There were no error messages."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 0, "creation_date": 1523479621, "post_id": 49784056, "comment_id": 86583824, "body": "@MickeySheu in my trials on 2.4.0 using <code>Fixnum</code> results in the same problem (in addition to the warning that <code>Fixnum</code> is deprecated)."}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1523479645, "post_id": 49784056, "comment_id": 86583839, "body": "@Kumpelblase edit your question and include Ruby version there. And why have the image link at all if it just shows what you described? When I click on it, it just shows a dot in the middle of the screen and the rest is black."}, {"owner": {"reputation": 75, "user_id": 9632703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPpBO.jpg?s=128&g=1", "display_name": "Richard Steinbrecht", "link": "https://stackoverflow.com/users/9632703/richard-steinbrecht"}, "reply_to_user": {"reputation": 732, "user_id": 5613451, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/25e0c61e748f8241bc2955589f5d6661?s=128&d=identicon&r=PG&f=1", "display_name": "Mickey Sheu", "link": "https://stackoverflow.com/users/5613451/mickey-sheu"}, "edited": false, "score": 0, "creation_date": 1523479726, "post_id": 49784056, "comment_id": 86583866, "body": "@MickeySheu using Fixnum says:  &quot;(irb):2: warning: constant ::Fixnum is deprecated =&gt; :+&quot; and again not able to write anything after that"}, {"owner": {"reputation": 75, "user_id": 9632703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPpBO.jpg?s=128&g=1", "display_name": "Richard Steinbrecht", "link": "https://stackoverflow.com/users/9632703/richard-steinbrecht"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1523479805, "post_id": 49784056, "comment_id": 86583904, "body": "@lurker relax, thats my first post, just trying to give as much information as possible."}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523479822, "post_id": 49784056, "comment_id": 86583913, "body": "Yup. When I enter the above <code>class Integer</code> etc. it works. Then when I try to start <code>class Fixnum</code> I get <code>syntax error, unexpected end-of-input, expecting keyword_end)</code>, even though the <code>end</code> keywords are correct."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1523479848, "post_id": 49784056, "comment_id": 86583927, "body": "@lurker now that&#39;s interesting. But is this the same issue the OP is describing?"}, {"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1523480451, "post_id": 49784056, "comment_id": 86584194, "body": "@SagarPandya It is strange. I don&#39;t see exactly the same results, but Ruby does seem to have a peculiar and different behavior depending upon which arithmetic operator I try to override."}, {"owner": {"reputation": 75, "user_id": 9632703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPpBO.jpg?s=128&g=1", "display_name": "Richard Steinbrecht", "link": "https://stackoverflow.com/users/9632703/richard-steinbrecht"}, "edited": false, "score": 0, "creation_date": 1523480904, "post_id": 49784056, "comment_id": 86584375, "body": "Just updated to 2.5.1 and still have the problem."}, {"owner": {"reputation": 5139, "user_id": 1735262, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fGuXb.png?s=128&g=1", "display_name": "Reinstate Monica -- notmaynard", "link": "https://stackoverflow.com/users/1735262/reinstate-monica-notmaynard"}, "edited": false, "score": 0, "creation_date": 1523482462, "post_id": 49784056, "comment_id": 86584929, "body": "What OS are you using?"}, {"owner": {"reputation": 75, "user_id": 9632703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPpBO.jpg?s=128&g=1", "display_name": "Richard Steinbrecht", "link": "https://stackoverflow.com/users/9632703/richard-steinbrecht"}, "edited": false, "score": 0, "creation_date": 1523483112, "post_id": 49784056, "comment_id": 86585200, "body": "Windows 10 Version 1709"}], "owner": {"reputation": 75, "user_id": 9632703, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DPpBO.jpg?s=128&g=1", "display_name": "Richard Steinbrecht", "link": "https://stackoverflow.com/users/9632703/richard-steinbrecht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 85, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523483164, "creation_date": 1523478802, "last_edit_date": 1523483164, "question_id": 49784056, "link": "https://stackoverflow.com/questions/49784056/ruby-2-5-1-irb-overriding-and-in-integer-does-not-work", "title": "Ruby 2.5.1 irb: overriding + and * in Integer does not work", "body": "<p>I'm learning Ruby and want to override operators, in this case plus and multiply. What I type is:</p>\n\n<pre><code>class Integer\ndef +(other)\nself - other\nend\nend\n</code></pre>\n\n<p>This works when I write it in a .rb file and execute it, but not on the irb shell. I'm not able to write anything after defining \"+\". </p>\n\n<p>And when I go and redefine \"*\" after I restarted the irb, everything I type after that is typed twice. I am using Windows 10.</p>\n\n<p><a href=\"https://i.stack.imgur.com/96J1J.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/96J1J.png\" alt=\"Image showing what I described above\"></a></p>\n"}, {"tags": ["ruby", "docx"], "comments": [{"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1523701234, "post_id": 49782641, "comment_id": 86675848, "body": "Can you post the full exception stack trace instead of just message"}, {"owner": {"reputation": 32026, "user_id": 43792, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a16dd037524eaabc55fb8ae7a17c668a?s=128&d=identicon&r=PG", "display_name": "aarona", "link": "https://stackoverflow.com/users/43792/aarona"}, "reply_to_user": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1523708855, "post_id": 49782641, "comment_id": 86677996, "body": "@TarunLalwani done."}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1523708937, "post_id": 49782641, "comment_id": 86678010, "body": "Not needed now, please have a look at the answer, I was able to reproduce and fix the issue"}], "answers": [{"comments": [{"owner": {"reputation": 32026, "user_id": 43792, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a16dd037524eaabc55fb8ae7a17c668a?s=128&d=identicon&r=PG", "display_name": "aarona", "link": "https://stackoverflow.com/users/43792/aarona"}, "edited": false, "score": 0, "creation_date": 1523709057, "post_id": 49830916, "comment_id": 86678054, "body": "Im getting a new error now:  <code>&#47;home&#47;aaron&#47;.rvm&#47;gems&#47;ruby-2.4.1@appt&#47;gems&#47;rubyzip-1.2.1&#47;lib&zwnj;&#8203;&#47;zip&#47;file.rb:248:in </code>get_output_stream&#39;: cannot open stream to directory entry - &#39;word/&#39; (ArgumentError) \tfrom zip.rb:44:in <code>block (2 levels) in save&#39;</code> I can&#39;t post the whole stack trace because its too long. Looks like its bombing on a directory. Maybe I have to do something different to create directories inside zip files?"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "reply_to_user": {"reputation": 32026, "user_id": 43792, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a16dd037524eaabc55fb8ae7a17c668a?s=128&d=identicon&r=PG", "display_name": "aarona", "link": "https://stackoverflow.com/users/43792/aarona"}, "edited": false, "score": 0, "creation_date": 1523709161, "post_id": 49830916, "comment_id": 86678093, "body": "Which version of Ruby are you on? I tested on Ruby 2.5 and I was able to even see the replaced value in the word document"}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "reply_to_user": {"reputation": 32026, "user_id": 43792, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a16dd037524eaabc55fb8ae7a17c668a?s=128&d=identicon&r=PG", "display_name": "aarona", "link": "https://stackoverflow.com/users/43792/aarona"}, "edited": false, "score": 0, "creation_date": 1523709471, "post_id": 49830916, "comment_id": 86678185, "body": "Tested on <code>ruby 2.3.3p222 (2016-11-21 revision 56859) [universal.x86_64-darwin17]</code> also"}, {"owner": {"reputation": 32026, "user_id": 43792, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a16dd037524eaabc55fb8ae7a17c668a?s=128&d=identicon&r=PG", "display_name": "aarona", "link": "https://stackoverflow.com/users/43792/aarona"}, "edited": false, "score": 0, "creation_date": 1523709473, "post_id": 49830916, "comment_id": 86678187, "body": "2.4.1p111 Let me take your entire code file and try that by itself. All I did was fix the two lines in the save function so far."}, {"owner": {"reputation": 32026, "user_id": 43792, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a16dd037524eaabc55fb8ae7a17c668a?s=128&d=identicon&r=PG", "display_name": "aarona", "link": "https://stackoverflow.com/users/43792/aarona"}, "edited": false, "score": 0, "creation_date": 1523709995, "post_id": 49830916, "comment_id": 86678372, "body": "Im getting the exact error I got in the above comment re: the directory entry."}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "reply_to_user": {"reputation": 32026, "user_id": 43792, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a16dd037524eaabc55fb8ae7a17c668a?s=128&d=identicon&r=PG", "display_name": "aarona", "link": "https://stackoverflow.com/users/43792/aarona"}, "edited": false, "score": 0, "creation_date": 1523710071, "post_id": 49830916, "comment_id": 86678394, "body": "Can you remove the old <code>RubyZip</code> and install it again. Also I would just create a new word document again and test"}, {"owner": {"reputation": 32026, "user_id": 43792, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a16dd037524eaabc55fb8ae7a17c668a?s=128&d=identicon&r=PG", "display_name": "aarona", "link": "https://stackoverflow.com/users/43792/aarona"}, "edited": false, "score": 0, "creation_date": 1523710593, "post_id": 49830916, "comment_id": 86678561, "body": "Ok using your word document worked. So now I need to figure out why my Word Document isn&#39;t working. Thanks for your help!"}], "tags": [], "owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "is_accepted": true, "score": 1, "last_activity_date": 1523709378, "last_edit_date": 1523709378, "creation_date": 1523705174, "answer_id": 49830916, "question_id": 49782641, "link": "https://stackoverflow.com/questions/49782641/ruby-zip-cannot-open-entry-for-reading-while-its-open-for-writing/49830916#49830916", "title": "Ruby Zip: Cannot open entry for reading while its open for writing", "body": "<p>You need to change your update code to below</p>\n\n<pre><code>  def save(path)\n    Zip::File.open(path, Zip::File::CREATE) do |out|\n      @zip.each do |entry|\n\n        if @replace[entry.name]\n          # this line creates the error\n          out.get_output_stream(entry.name){ |f| f.puts @replace[entry.name] }\n        else\n          # this line also will do it.\n          # out.get_output_stream(entry.name).write(@zip.read(entry.name))\n          out.get_output_stream(entry.name){ |f|  f.puts @zip.read(entry.name) }\n        end\n      end\n    end\n  end\n</code></pre>\n\n<p>And then the file will get created</p>\n\n<p><strong>Edit-1</strong></p>\n\n<p>Below is the final code that I had used for testing</p>\n\n<pre><code>require 'rubygems'\nrequire 'zip' # rubyzip gem\n\nclass WordMailMerge\n  def self.open(path, &amp;block)\n    self.new(path, &amp;block)\n  end\n\n  def initialize(path, &amp;block)\n    @replace = {}\n    if block_given?\n      @zip = Zip::File.open(path)\n      yield(self)\n      @zip.close\n    else\n      @zip = Zip::File.open(path)\n    end\n  end\n\n  def force_settings\n    @replace[\"word/settings.xml\"] = %{&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;w:settings xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:m=\"http://schemas.openxmlformats.org/officeDocument/2006/math\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w10=\"urn:schemas-microsoft-com:office:word\" xmlns:w=\"http://schemas.openxmlformats.org/wordprocessingml/2006/main\" xmlns:sl=\"http://schemas.openxmlformats.org/schemaLibrary/2006/main\"&gt;&lt;w:zoom w:percent=\"100\"/&gt;&lt;/w:settings&gt;}\n  end\n\n  def merge(rec)\n    xml = @zip.read(\"word/document.xml\")\n\n    # replace tags with correct content\n\n    @replace[\"word/document.xml\"] = xml.gsub(\"{name}\", \"Tarun lalwani\")\n  end\n\n  def save(path)\n    Zip::File.open(path, Zip::File::CREATE) do |out|\n      @zip.each do |entry|\n\n        if @replace[entry.name]\n          # this line creates the error\n          out.get_output_stream(entry.name){ |f| f.puts @replace[entry.name] }\n        else\n          # this line also will do it.\n          # out.get_output_stream(entry.name).write(@zip.read(entry.name))\n          out.get_output_stream(entry.name){ |f|  f.puts @zip.read(entry.name) }\n        end\n      end\n    end\n  end\n\n  def close\n    @zip.close\n  end\nend\n\nw = WordMailMerge.open(\"Option_2.docx\")\nw.force_settings\nw.merge({})\nw.save(\"Option_2_new.docx\")\n</code></pre>\n\n<p><strong>Option_2.docx</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/R25op.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/R25op.png\" alt=\"Old doc\"></a></p>\n\n<p><strong>Option_2_new.doc</strong></p>\n\n<p><a href=\"https://i.stack.imgur.com/Wo1Vj.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wo1Vj.png\" alt=\"Updated document\"></a></p>\n"}], "owner": {"reputation": 32026, "user_id": 43792, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/a16dd037524eaabc55fb8ae7a17c668a?s=128&d=identicon&r=PG", "display_name": "aarona", "link": "https://stackoverflow.com/users/43792/aarona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 239, "favorite_count": 0, "accepted_answer_id": 49830916, "answer_count": 1, "score": 1, "last_activity_date": 1523709378, "creation_date": 1523473258, "last_edit_date": 1523708837, "question_id": 49782641, "link": "https://stackoverflow.com/questions/49782641/ruby-zip-cannot-open-entry-for-reading-while-its-open-for-writing", "title": "Ruby Zip: Cannot open entry for reading while its open for writing", "body": "<p>I'm trying to write some mail merge code where I open a <code>docx</code> file (as a zip) replace tags with data and then create a new <code>docx</code> file (as a zip) and iterate over the old zip file either adding my new replaced data or pulling the existing file from the old <code>docx</code> file and adding that instead.</p>\n\n<p>The problem I'm getting is anytime I try to access the <code>out.get_output_stream</code> method, I'm getting the following error:</p>\n\n<pre><code>cannot open entry for reading while its open for writing - [Content_Types].xml (StandardError)\n</code></pre>\n\n<p><code>[Content_Types].xml</code> happens to be first file in the <code>docx</code> so that's why its bombing on that particular file. What am I doing wrong?</p>\n\n<pre><code>require 'rubygems'\nrequire 'zip' # rubyzip gem\n\nclass WordMailMerge\n  def self.open(path, &amp;block)\n    self.new(path, &amp;block)\n  end\n\n  def initialize(path, &amp;block)\n    @replace = {}\n    if block_given?\n      @zip = Zip::File.open(path)\n      yield(self)\n      @zip.close\n    else\n      @zip = Zip::File.open(path)\n    end\n  end\n\n  def force_settings\n    @replace[\"word/settings.xml\"] = %{&lt;?xml version=\"1.0\" encoding=\"UTF-8\" standalone=\"yes\"?&gt;\n&lt;w:settings xmlns:o=\"urn:schemas-microsoft-com:office:office\" xmlns:r=\"http://schemas.openxmlformats.org/officeDocument/2006/relationships\" xmlns:m=\"http://schemas.openxmlformats.org/officeDocument/2006/math\" xmlns:v=\"urn:schemas-microsoft-com:vml\" xmlns:w10=\"urn:schemas-microsoft-com:office:word\" xmlns:w=\"http://schemas.openxmlformats.org/wordprocessingml/2006/main\" xmlns:sl=\"http://schemas.openxmlformats.org/schemaLibrary/2006/main\"&gt;&lt;w:zoom w:percent=\"100\"/&gt;&lt;/w:settings&gt;}\n  end\n\n  def merge(rec)\n    xml = @zip.read(\"word/document.xml\")\n\n    # replace tags with correct content\n\n    @replace[\"word/document.xml\"] = xml\n  end\n\n  def save(path)\n    Zip::File.open(path, Zip::File::CREATE) do |out|\n      @zip.each do |entry|\n\n        if @replace[entry.name]\n          # this line creates the error\n          out.get_output_stream(entry.name).write(@replace[entry.name])\n        else\n          # this line also will do it.\n          out.get_output_stream(entry.name).write(@zip.read(entry.name))\n        end\n      end\n    end\n  end\n\n  def close\n    @zip.close\n  end\nend\n\nw = WordMailMerge.open(\"Option_2.docx\")\nw.force_settings\nw.merge({})\nw.save(\"Option_2_new.docx\")\n</code></pre>\n\n<p>The following is the stack trace:</p>\n\n<pre><code>/home/aaron/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/delegate.rb:85:in `call': cannot open entry for reading while its open for writing - [Content_Types].xml (StandardError)\n    from /home/aaron/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/delegate.rb:85:in `method_missing'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/streamable_stream.rb:28:in `get_input_stream'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/streamable_stream.rb:45:in `write_to_zip_output_stream'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/file.rb:313:in `block (3 levels) in commit'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/entry_set.rb:38:in `block in each'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/entry_set.rb:37:in `each'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/entry_set.rb:37:in `each'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/file.rb:312:in `block (2 levels) in commit'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/output_stream.rb:53:in `open'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/file.rb:311:in `block in commit'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/file.rb:409:in `block in on_success_replace'\n    from /home/aaron/.rvm/rubies/ruby-2.4.1/lib/ruby/2.4.0/tmpdir.rb:130:in `create'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/file.rb:407:in `on_success_replace'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/file.rb:310:in `commit'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/file.rb:334:in `close'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/file.rb:103:in `ensure in open'\n    from /home/aaron/.rvm/gems/ruby-2.4.1@appt/gems/rubyzip-1.2.1/lib/zip/file.rb:103:in `open'\n    from zip.rb:34:in `save'\n    from zip.rb:56:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "testing", "rspec", "rake"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 8915581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464093cba6b24a8bfa6d3599d3928d5f?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Lyonhart", "link": "https://stackoverflow.com/users/8915581/eli-lyonhart"}, "is_accepted": false, "score": 0, "last_activity_date": 1523481583, "creation_date": 1523481583, "answer_id": 49784640, "question_id": 49782617, "link": "https://stackoverflow.com/questions/49782617/retry-failed-tests-in-rspec/49784640#49784640", "title": "retry failed tests in rspec", "body": "<p>I discovered the answer. I needed to pass an additional argument to the task <code>t.fail_on_error = false</code>. I had assumed that that referred to individual expectations, but, in fact, it refers to the entire task.</p>\n\n<p>so, the only change to the code is:</p>\n\n<pre><code>RSpec::Core::RakeTask.new('example_1') do |t|\n  t.rspec_opts = [\"-Ilib\",\"--format documentation\",\"--color --tty\"]\n  t.fail_on_error = false\n  t.pattern = SPEC_PATH\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 8915581, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/464093cba6b24a8bfa6d3599d3928d5f?s=128&d=identicon&r=PG&f=1", "display_name": "Eli Lyonhart", "link": "https://stackoverflow.com/users/8915581/eli-lyonhart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 628, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523481583, "creation_date": 1523473151, "last_edit_date": 1523478400, "question_id": 49782617, "link": "https://stackoverflow.com/questions/49782617/retry-failed-tests-in-rspec", "title": "retry failed tests in rspec", "body": "<p>I'm having a nearly identical issue as listed ( <a href=\"https://stackoverflow.com/questions/2532427/why-is-rake-not-able-to-invoke-multiple-tasks-consecutively\">Why is Rake not able to invoke multiple tasks consecutively?</a> ) but their solutions aren't working for me! As my codebase has grown, I periodically get false-negatives, and I would love to rerun only failed tests.\nThe below exits out on completion of line <code>Rake::Task['test:example_1'].execute</code> ( and wont hit a byebyg / binding.pry ) on the next line down.</p>\n\n<pre><code>SPEC_PATH = 'spec/platform/**/*.rb'\n\nnamespace :test do\n\nRSpec::Core::RakeTask.new('example_1') do |t|\n  t.rspec_opts = [\"-Ilib\",\"--format documentation\",\"--color --tty\"]\n  t.pattern = SPEC_PATH\nend\n\nRSpec::Core::RakeTask.new('example_2') do |t|\n  t.rspec_opts = [\"-Ilib\",\"--format documentation\",\"--color --tty\", \"--only-failures\"]\n  t.pattern = SPEC_PATH\nend\n\ndesc 'Run \"test\" task, then rerun failed tests'\n  RSpec::Core::RakeTask.new('rerun') do |t|\n    Rake::Task['test:example_1'].execute\n    Rake::Task['test:example_2'].execute\n  end\nend\n</code></pre>\n\n<p>Including <code>--dry-run</code> to <code>test:example_1</code> will run both, but obviously, no failures are generated, so it isn't helpful. Is there a config I need to set to prevent exit upon completion? I haven't been able to find it if so.</p>\n\n<p>Thanks.</p>\n\n<p>*edit:\nIncluding <code>--trace</code> on my execution displays:</p>\n\n<pre><code>** Invoke test:rerun (first_time)\n** Execute test:rerun\n** Execute test:test_1\n</code></pre>\n\n<p>at the beginning but nothing on exit.</p>\n\n<p>**edit: here is another example of pretty much exactly what I'm trying to do in the same way that I'm trying to do it ( <a href=\"https://sourcediving.com/a-better-way-to-tame-your-randomly-failing-specs-29040dc0ed24\" rel=\"nofollow noreferrer\">https://sourcediving.com/a-better-way-to-tame-your-randomly-failing-specs-29040dc0ed24</a> ).\nFor what its worth, I'm running Ruby 2.3.1 and RSpec 3.6</p>\n"}, {"tags": ["ruby", "intellij-idea"], "comments": [{"owner": {"reputation": 3085, "user_id": 1546042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKpkC.jpg?s=128&g=1", "display_name": "Pim Hazebroek", "link": "https://stackoverflow.com/users/1546042/pim-hazebroek"}, "edited": false, "score": 0, "creation_date": 1523473111, "post_id": 49782340, "comment_id": 86580451, "body": "Are you looking for a structural formatting setting for all one line ruby methods, or is it just one method/occurrence that you want it to stop formatting?"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1523479778, "post_id": 49782340, "comment_id": 86583897, "body": "maybe <a href=\"https://www.jetbrains.com/help/idea/auto-completing-code.html\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/auto-completing-code.html</a>"}, {"owner": {"reputation": 3475, "user_id": 350306, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1d034be2a8a37c63880beb9830c6888?s=128&d=identicon&r=PG", "display_name": "Ben Liyanage", "link": "https://stackoverflow.com/users/350306/ben-liyanage"}, "edited": false, "score": 0, "creation_date": 1525371130, "post_id": 49782340, "comment_id": 87340759, "body": "I want it to stop reformatting all inline function declarations."}], "answers": [{"comments": [{"owner": {"reputation": 3475, "user_id": 350306, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1d034be2a8a37c63880beb9830c6888?s=128&d=identicon&r=PG", "display_name": "Ben Liyanage", "link": "https://stackoverflow.com/users/350306/ben-liyanage"}, "edited": false, "score": 0, "creation_date": 1525372121, "post_id": 49782577, "comment_id": 87341240, "body": "This is not a great solution as you need to code for the IDE."}, {"owner": {"reputation": 3085, "user_id": 1546042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKpkC.jpg?s=128&g=1", "display_name": "Pim Hazebroek", "link": "https://stackoverflow.com/users/1546042/pim-hazebroek"}, "reply_to_user": {"reputation": 3475, "user_id": 350306, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1d034be2a8a37c63880beb9830c6888?s=128&d=identicon&r=PG", "display_name": "Ben Liyanage", "link": "https://stackoverflow.com/users/350306/ben-liyanage"}, "edited": false, "score": 0, "creation_date": 1525378103, "post_id": 49782577, "comment_id": 87344074, "body": "I totally agree, unfortunately I don&#39;t know of a better option for you."}], "tags": [], "owner": {"reputation": 3085, "user_id": 1546042, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKpkC.jpg?s=128&g=1", "display_name": "Pim Hazebroek", "link": "https://stackoverflow.com/users/1546042/pim-hazebroek"}, "is_accepted": false, "score": 1, "last_activity_date": 1523472981, "creation_date": 1523472981, "answer_id": 49782577, "question_id": 49782340, "link": "https://stackoverflow.com/questions/49782340/how-do-you-stop-intellij-from-reformating-one-line-ruby-functions/49782577#49782577", "title": "How do you stop Intellij from reformating one line Ruby functions?", "body": "<p>To stop IntelliJ from formatting a specific piece of code you can enable \"Formatter Control\" under: </p>\n\n<p>Preferences -> Editor -> Code style</p>\n\n<p>Tick the checkbox for <code>Enable formatter markers in comments</code></p>\n\n<p>And then wrap your code with:</p>\n\n<pre><code># @formatter:off\ndef inject_exceptions(_) ; end\n# @formatter:on\n</code></pre>\n\n<p>This works in any language, just make sure to put the markers in a comment.</p>\n"}, {"comments": [{"owner": {"reputation": 3475, "user_id": 350306, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1d034be2a8a37c63880beb9830c6888?s=128&d=identicon&r=PG", "display_name": "Ben Liyanage", "link": "https://stackoverflow.com/users/350306/ben-liyanage"}, "edited": false, "score": 0, "creation_date": 1525372102, "post_id": 49798798, "comment_id": 87341231, "body": "Thanks, I +1&#39;d that on your site."}, {"owner": {"reputation": 3475, "user_id": 350306, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1d034be2a8a37c63880beb9830c6888?s=128&d=identicon&r=PG", "display_name": "Ben Liyanage", "link": "https://stackoverflow.com/users/350306/ben-liyanage"}, "edited": false, "score": 0, "creation_date": 1525372168, "post_id": 49798798, "comment_id": 87341259, "body": "Going to leave this question open until the jetbrains fix is out."}], "tags": [], "owner": {"reputation": 1311, "user_id": 4676887, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QI0oc.jpg?s=128&g=1", "display_name": "Olivia", "link": "https://stackoverflow.com/users/4676887/olivia"}, "is_accepted": false, "score": 1, "last_activity_date": 1523542247, "creation_date": 1523542247, "answer_id": 49798798, "question_id": 49782340, "link": "https://stackoverflow.com/questions/49782340/how-do-you-stop-intellij-from-reformating-one-line-ruby-functions/49798798#49798798", "title": "How do you stop Intellij from reformating one line Ruby functions?", "body": "<p>At the moment it's not possible to configure it, but please follow the corresponding request: </p>\n\n<p><a href=\"https://youtrack.jetbrains.com/issue/RUBY-21387\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/RUBY-21387</a></p>\n"}], "owner": {"reputation": 3475, "user_id": 350306, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/c1d034be2a8a37c63880beb9830c6888?s=128&d=identicon&r=PG", "display_name": "Ben Liyanage", "link": "https://stackoverflow.com/users/350306/ben-liyanage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1523542247, "creation_date": 1523472136, "question_id": 49782340, "link": "https://stackoverflow.com/questions/49782340/how-do-you-stop-intellij-from-reformating-one-line-ruby-functions", "title": "How do you stop Intellij from reformating one line Ruby functions?", "body": "<p>I have a ruby function like this in one of my tests:</p>\n\n<pre><code>def inject_exceptions(_) ; end\n</code></pre>\n\n<p>Intellij keeps reformating the function to look like this:</p>\n\n<pre><code>def inject_exceptions(_)\n  ;\nend\n</code></pre>\n\n<p>How do I configure it to stop doing that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1523472190, "post_id": 49782272, "comment_id": 86579958, "body": "without a stack trace I&#39;m not sure how to help?"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1523473388, "post_id": 49782272, "comment_id": 86580601, "body": "When I scroll to the top of the 10 seconds of output, it&#39;s the normal exception of whatever I break to test it (for instance, forcing an image filename to be wrong). The problem isnt the exception itself, its that there is no exception showing... I see the rails 500 error page that normally shows in production (public/500.html)"}, {"owner": {"reputation": 167, "user_id": 3562152, "user_type": "registered", "accept_rate": 40, "profile_image": "https://graph.facebook.com/100002596580416/picture?type=large", "display_name": "cccvandermeer", "link": "https://stackoverflow.com/users/3562152/cccvandermeer"}, "edited": false, "score": 0, "creation_date": 1523477741, "post_id": 49782272, "comment_id": 86582906, "body": "dit you check for application.rb for exception config?"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1523483965, "post_id": 49782272, "comment_id": 86585492, "body": "I manually copied and replaced every file from a fresh rails 5.2 app, so nothing is different from the default from what i can see"}, {"owner": {"reputation": 2633, "user_id": 368651, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/97692cb011e202571f21e8b96a47a52e?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/368651/matt"}, "edited": false, "score": 0, "creation_date": 1523741713, "post_id": 49782272, "comment_id": 86687924, "body": "I submitted an issue for this in rails repo <a href=\"https://github.com/rails/rails/issues/32578\" rel=\"nofollow noreferrer\">github.com/rails/rails/issues/32578</a>"}], "answers": [{"tags": [], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "is_accepted": true, "score": 10, "last_activity_date": 1523492696, "last_edit_date": 1523492696, "creation_date": 1523485194, "answer_id": 49785212, "question_id": 49782272, "link": "https://stackoverflow.com/questions/49782272/rails-5-2-exceptions-not-showing/49785212#49785212", "title": "Rails 5.2 exceptions not showing", "body": "<p>I hate how Stack Overflow is all about voting to close every freaking helpful question lately.</p>\n\n<p>To all the people that find this... here is the problem. I had to remove the <code>web-console</code> gem from the gemfile (leftover from previous Rails versions), and it works now.</p>\n\n<pre><code>gem 'web-console', '&gt;= 3.3.0'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106, "user_id": 1556020, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aaf8e92f82aac7e24b21fa84f9d925a2?s=128&d=identicon&r=PG", "display_name": "Judd", "link": "https://stackoverflow.com/users/1556020/judd"}, "is_accepted": false, "score": 0, "last_activity_date": 1523902642, "creation_date": 1523902642, "answer_id": 49863826, "question_id": 49782272, "link": "https://stackoverflow.com/questions/49782272/rails-5-2-exceptions-not-showing/49863826#49863826", "title": "Rails 5.2 exceptions not showing", "body": "<p>For me this was an issue with the remotipart and web-console gems. I was able to downgrade remotipart and all is well.</p>\n\n<blockquote>\n  <p>gem 'remotipart', '1.3.0'</p>\n</blockquote>\n\n<p><a href=\"https://github.com/rails/rails/issues/32578\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/32578</a></p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 7490780, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ec9nA.jpg?s=128&g=1", "display_name": "Juanse Gimenez", "link": "https://stackoverflow.com/users/7490780/juanse-gimenez"}, "is_accepted": false, "score": 2, "last_activity_date": 1525102544, "creation_date": 1525102544, "answer_id": 50103751, "question_id": 49782272, "link": "https://stackoverflow.com/questions/49782272/rails-5-2-exceptions-not-showing/50103751#50103751", "title": "Rails 5.2 exceptions not showing", "body": "<p>Edit your Gemfile with gem 'web-console' and remove version.\nRun `bundle install'</p>\n"}], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 845, "favorite_count": 0, "accepted_answer_id": 49785212, "answer_count": 3, "score": 4, "last_activity_date": 1525102544, "creation_date": 1523471886, "question_id": 49782272, "link": "https://stackoverflow.com/questions/49782272/rails-5-2-exceptions-not-showing", "title": "Rails 5.2 exceptions not showing", "body": "<p>I upgraded from 5.1 to 5.2 and now my exceptions are not showing, and I'm seeing the 500 error page, as if I had <code>config.consider_all_requests_local</code> set to false... it's set to <code>true</code> in my <code>development.rb</code> however.</p>\n\n<p>Also, as a sidenote, when the exception happens theres <em>literally</em> <strong>10 seconds</strong> of log output in the terminal before rails responds. It's so much log output that I can't even scroll to see if the error is being triggered by something else.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ruby-on-rails-5.2"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1523472434, "post_id": 49782241, "comment_id": 86580089, "body": "You can (and should) be providing the SECRET_KEY_BASE via a ENV var so that its never checked into the source code. In development you can use whatever SECRET_KEY_BASE you want - its simply used to sign cookies and for stuff like the salt in Devise."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1523474965, "post_id": 49782241, "comment_id": 86581406, "body": "How do I do that if it removed the <code>production</code> and <code>development</code> breakdown so I can specify them separately?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523475256, "post_id": 49782241, "comment_id": 86581554, "body": "I have not actually tried 5.2  but previously you could use ERB syntax in the secrets files <code>&lt;%= ENV.fetch(&quot;SECRET_BASE_KEY&quot;) %&gt;</code>. You can use <a href=\"https://github.com/direnv/direnv\" rel=\"nofollow noreferrer\"><code>direnv</code></a> or <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\"><code>dotenv</code></a> to make setting the env vars less of a hassle. If you are using docker you can set ENV vars via the container."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523475304, "post_id": 49782241, "comment_id": 86581581, "body": "I&#39;m using heroku. But I can&#39;t use ENV.fetch because theres no place to put it anymore (there used to be multiple SECRET_KEY_BASE for each environment). Now its all been combined into one."}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523475325, "post_id": 49782241, "comment_id": 86581595, "body": "It seems this is what I&#39;m supposed to do... is patch it now to get this functionality back? This seems so stupid, and theres no instructions anywhere how to work with this <a href=\"https://www.driftingruby.com/episodes/encrypted-credentials-in-rails-5-2\" rel=\"nofollow noreferrer\">driftingruby.com/episodes/encrypted-credentials-in-rails-5-2</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1523475412, "post_id": 49782241, "comment_id": 86581645, "body": "If you are using ENV vars you don&#39;t need to have &quot;separate fields&quot; - just set the production key in the heroku dashboard and something else on the local machine where you are developing. Thats the whole point. <a href=\"https://devcenter.heroku.com/articles/config-vars\" rel=\"nofollow noreferrer\">devcenter.heroku.com/articles/config-vars</a>"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523483911, "post_id": 49782241, "comment_id": 86585476, "body": "So lets say I have a development S3 bucket, and a production S3 bucket... where do my different keys go?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1523484070, "post_id": 49782241, "comment_id": 86585523, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/168769/discussion-between-max-and-tallboy\">continue this discussion in chat</a>."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1523533538, "post_id": 49782241, "comment_id": 86605573, "body": "I was actually completely wrong. The Rails 5.2+ secrets handling works with an encrypted secrets file with RAILS_MASTER_KEY containing the encryption key. Which makes it directly at odds with a ENV based configuration. I&#39;m still not convinced thats its a better approach due to the reasons listed on <a href=\"https://12factor.net/config\" rel=\"nofollow noreferrer\">12factor.net/config</a>"}], "answers": [{"comments": [{"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1523582432, "post_id": 49807927, "comment_id": 86630814, "body": "Thanks. Where do development keys go now? It&#39;s seems theres a lot of people here who don&#39;t like this change, and theres no good places to put them anymore... <a href=\"https://github.com/rails/rails/pull/30067\" rel=\"nofollow noreferrer\">github.com/rails/rails/pull/30067</a>"}, {"owner": {"reputation": 1020, "user_id": 2341467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3iOX.jpg?s=128&g=1", "display_name": "tomca32", "link": "https://stackoverflow.com/users/2341467/tomca32"}, "reply_to_user": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 3, "creation_date": 1523582507, "post_id": 49807927, "comment_id": 86630830, "body": "Yeah, I don&#39;t like this change at all. You can still use secrets, they are still working the same as before."}, {"owner": {"reputation": 1020, "user_id": 2341467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3iOX.jpg?s=128&g=1", "display_name": "tomca32", "link": "https://stackoverflow.com/users/2341467/tomca32"}, "reply_to_user": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 0, "creation_date": 1523582555, "post_id": 49807927, "comment_id": 86630839, "body": "By secrets, I mean <code>secrets.yml</code>. It&#39;s still accessible via <code>Rails.application.secrets</code>"}, {"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 3, "creation_date": 1540487785, "post_id": 49807927, "comment_id": 92894556, "body": "FWIW, mostly for future me, the secret_key_base is available on object Rails.application.secret_key_base which will pull it from multiple sources, including the auto generated one in development and test. <a href=\"https://github.com/rails/rails/pull/30067/files#diff-580e183141be706162224ef696bdb6c7R413\" rel=\"nofollow noreferrer\">github.com/rails/rails/pull/30067/&hellip;</a>"}], "tags": [], "owner": {"reputation": 1020, "user_id": 2341467, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/L3iOX.jpg?s=128&g=1", "display_name": "tomca32", "link": "https://stackoverflow.com/users/2341467/tomca32"}, "is_accepted": true, "score": 13, "last_activity_date": 1523582149, "creation_date": 1523582149, "answer_id": 49807927, "question_id": 49782241, "link": "https://stackoverflow.com/questions/49782241/separate-secret-key-base-in-rails-5-2/49807927#49807927", "title": "Separate secret_key_base in Rails 5.2?", "body": "<p>Rails <code>5.2</code> changed this quite a bit. For development and test enivoronments, the secret_key_base is generated automatically, so you can just remove it from <code>secrets.yml</code> or wherever you have it set.</p>\n\n<p>As for production, there is the credentials file which you can generate and edit it by running <code>rails credentials:edit</code>. This will also create the master key in <code>config/master.key</code> which is only used for encrypting and decrypting this file. Add this to <code>gitignore</code> so it's not shared with anyone else, which should take care of sharing it with fellow devs.</p>\n\n<p>If all of this sounds a bit tedious, and it is, you can just ignore it and provide the secret_key_base in ENV. Rails will check if it's present in <code>ENV[\"SECRET_KEY_BASE\"]</code> before it complains. </p>\n"}, {"comments": [{"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 1, "creation_date": 1540487843, "post_id": 51251599, "comment_id": 92894582, "body": "call it through Rails.application.secret_key_base and it will grab the proper one <a href=\"https://github.com/rails/rails/pull/30067/files#diff-580e183141be706162224ef696bdb6c7R413\" rel=\"nofollow noreferrer\">github.com/rails/rails/pull/30067/&hellip;</a>"}, {"owner": {"reputation": 2773, "user_id": 2505904, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/dfbdb599d48dd7b6dba638bf0549599a?s=128&d=identicon&r=PG", "display_name": "Matrix", "link": "https://stackoverflow.com/users/2505904/matrix"}, "edited": false, "score": 0, "creation_date": 1544154379, "post_id": 51251599, "comment_id": 94183815, "body": "how I put the result of <code>rake secret</code> into ENV[&quot;SECRET_KEY_BASE&quot;] ?"}, {"owner": {"reputation": 305, "user_id": 1016751, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/31ad2de8ccaddf80e4bdf3abd2b5b4f6?s=128&d=identicon&r=PG", "display_name": "tcgumus", "link": "https://stackoverflow.com/users/1016751/tcgumus"}, "edited": false, "score": 0, "creation_date": 1565602386, "post_id": 51251599, "comment_id": 101390847, "body": "Login as user and type terminal this &#39;ECRET_KEY_BASE=xxxx&#39;     &#39;export SECRET_KEY_BASE&#39;"}], "tags": [], "owner": {"reputation": 2708, "user_id": 2047546, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fxixp.jpg?s=128&g=1", "display_name": "Yi Feng Xie", "link": "https://stackoverflow.com/users/2047546/yi-feng-xie"}, "is_accepted": false, "score": 10, "last_activity_date": 1531159645, "creation_date": 1531159645, "answer_id": 51251599, "question_id": 49782241, "link": "https://stackoverflow.com/questions/49782241/separate-secret-key-base-in-rails-5-2/51251599#51251599", "title": "Separate secret_key_base in Rails 5.2?", "body": "<p>There are two ways to access secret_key_base:</p>\n\n<ol>\n<li>Rails.application.credentials.secret_key_base</li>\n<li>Rails.application.secrets.secret_key_base</li>\n</ol>\n\n<p>Rails 5 took the first way by default.</p>\n\n<p>you can change <code>Rails.application.credentials.secret_key_base</code> by <code>rails credentials:edit</code>. for all other environments, remember to set environment variable <code>RAILS_MASTER_KEY</code> to be the same content of <code>config/master.key</code>. the <code>master.key</code> is git ignored by default. this way uses the same secret key for all environments. if you want to use different keys, you need to control namespaces by yourself.</p>\n\n<p>If you prefer the second way <code>Rails.application.secrets.secret_key_base</code>. you need to create <code>config/secrets.yml</code>:</p>\n\n<pre><code>development:\n  secret_key_base: ...\ntest:\n  secret_key_base: ...\nproduction:\n  secret_key_base: &lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;\n</code></pre>\n\n<p>remember to set environment variable <code>SECRET_KEY_BASE</code> on production. \nif <code>config/secrets.yml</code> file is secret enough, changing <code>&lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;</code> to plain text is fine.</p>\n\n<p><code>rake secret</code> can generate a random secret key for you.</p>\n\n<p>I prefer the second way(old way), because of simple.</p>\n"}, {"comments": [{"owner": {"reputation": 121, "user_id": 2671496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4c18a7385ab56e144c0efaba82915b?s=128&d=identicon&r=PG", "display_name": "untidyhair", "link": "https://stackoverflow.com/users/2671496/untidyhair"}, "reply_to_user": {"reputation": 1253, "user_id": 4733879, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5iiSX.png?s=128&g=1", "display_name": "Filnor", "link": "https://stackoverflow.com/users/4733879/filnor"}, "edited": false, "score": 1, "creation_date": 1545058123, "post_id": 53807969, "comment_id": 94483449, "body": "@Filnor Updated the answer."}, {"owner": {"reputation": 121, "user_id": 2671496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4c18a7385ab56e144c0efaba82915b?s=128&d=identicon&r=PG", "display_name": "untidyhair", "link": "https://stackoverflow.com/users/2671496/untidyhair"}, "reply_to_user": {"reputation": 7751, "user_id": 1836434, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/13c3255c3dd0f60c282e8e243ed5c51c?s=128&d=identicon&r=PG", "display_name": "Pierre Criulanscy", "link": "https://stackoverflow.com/users/1836434/pierre-criulanscy"}, "edited": false, "score": 1, "creation_date": 1545058336, "post_id": 53807969, "comment_id": 94483572, "body": "@Pcriulan Updated. (It kinda sucks I cannot notify 2 users at the same time with one comment...)"}], "tags": [], "owner": {"reputation": 121, "user_id": 2671496, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b4c18a7385ab56e144c0efaba82915b?s=128&d=identicon&r=PG", "display_name": "untidyhair", "link": "https://stackoverflow.com/users/2671496/untidyhair"}, "is_accepted": false, "score": 1, "last_activity_date": 1545058041, "last_edit_date": 1545058041, "creation_date": 1545010029, "answer_id": 53807969, "question_id": 49782241, "link": "https://stackoverflow.com/questions/49782241/separate-secret-key-base-in-rails-5-2/53807969#53807969", "title": "Separate secret_key_base in Rails 5.2?", "body": "<p>I used this gem when I didn't want to share the production master.key with my friend developers which I think is the exact same purpose as the OP.</p>\n\n<p><a href=\"https://github.com/sinsoku/rails-env-credentials\" rel=\"nofollow noreferrer\">https://github.com/sinsoku/rails-env-credentials</a></p>\n\n<p>You can have a master key for each evironment as below, so you can have a discretion as to which key you want to share with which developers/deployers.</p>\n\n<pre><code>config/credentials-development.yml.enc\nconfig/credentials-test.yml.enc\nconfig/credentials.yml.enc\nmaster-development.key\nmaster-test.key\nmaster.key\n</code></pre>\n\n<p>Each key will be generated when you first run something like:</p>\n\n<blockquote>\n  <p>rails env_credentials:edit -e development</p>\n</blockquote>\n\n<p>If you switch from one master.key setup to this, one error you might encounter will be related to config/database.yml in which Rails tries to evaluate all environment information no matter which environment you are on.\n(Even if you comment them out, Rails still tries to evaluate the erb parts.)</p>\n"}], "owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13121, "favorite_count": 3, "accepted_answer_id": 49807927, "answer_count": 3, "score": 14, "last_activity_date": 1545058041, "creation_date": 1523471716, "question_id": 49782241, "link": "https://stackoverflow.com/questions/49782241/separate-secret-key-base-in-rails-5-2", "title": "Separate secret_key_base in Rails 5.2?", "body": "<p>I just upgraded from 5.1 to 5.2 and I'm quite confused about this 'better' methodology to storing secrets...</p>\n\n<p>Maybe I'm not understanding, but it seems like now development and production have been 'merged' into a SINGLE <code>SECRET_KEY_BASE</code> as well as <code>master.key</code>... is this correct?</p>\n\n<p>If not, how do I use a separate master key and <code>SECRET_KEY_BASE</code> in development?</p>\n\n<p>What if I have developers helping me and I don't want them to know my master key (or secrets) I use in production?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1523469462, "post_id": 49781550, "comment_id": 86578582, "body": "Are you sure your code is exactly that? Could I ask which version of ruby you&#39;re using?"}], "answers": [{"comments": [{"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "edited": false, "score": 0, "creation_date": 1523471259, "post_id": 49782007, "comment_id": 86579498, "body": "Yeah, I noticed. That&#39;s why I asked about the version and the code :)"}], "tags": [], "owner": {"reputation": 445, "user_id": 1810801, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d82065f99d071c5d91294814991e6b2b?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1810801/thomas"}, "is_accepted": false, "score": 2, "last_activity_date": 1523470845, "creation_date": 1523470845, "answer_id": 49782007, "question_id": 49781550, "link": "https://stackoverflow.com/questions/49781550/how-do-i-print-each-line-of-a-text-file-in-ruby/49782007#49782007", "title": "How do I print each line of a text file in Ruby?", "body": "<p>Turned out to be an issue with the file being read. I made a new file with same contents and it worked fine. Interestingly, the original file would display nothing with 'cat'. What's also odd is they both have the same contents and permissions. I'm baffled.</p>\n\n<p>Good catch with the semicolon though! Surprisingly it still works with it, running ruby 2.3.1p112.</p>\n"}], "owner": {"reputation": 445, "user_id": 1810801, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/d82065f99d071c5d91294814991e6b2b?s=128&d=identicon&r=PG", "display_name": "Thomas", "link": "https://stackoverflow.com/users/1810801/thomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1523470845, "creation_date": 1523469071, "question_id": 49781550, "link": "https://stackoverflow.com/questions/49781550/how-do-i-print-each-line-of-a-text-file-in-ruby", "title": "How do I print each line of a text file in Ruby?", "body": "<p>Only the last line gets displayed to the console when I try:</p>\n\n<pre><code>File.open(\"test.txt\").each do |line|;\n  puts line\nend\n</code></pre>\n\n<p>the text file is:</p>\n\n<pre><code>123\n456\n789\n</code></pre>\n\n<p>only 789 get printed to the console. Could this be an issue with my terminal? I've tried new windows, same results.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 203, "user_id": 9226492, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1101789162a8e10b23e10edb2f56fadd?s=128&d=identicon&r=PG&f=1", "display_name": "jose1221", "link": "https://stackoverflow.com/users/9226492/jose1221"}, "reply_to_user": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "edited": false, "score": 0, "creation_date": 1523468258, "post_id": 49780575, "comment_id": 86577926, "body": "i dont think so. in that link the answer says creating new migration script to link two tables. what i am asking is, can i rename foreign key while creating table"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1523468709, "post_id": 49780575, "comment_id": 86578188, "body": "Does <code>t.belongs_to :user_account</code> work? I know it feels wrong, but I&#39;m looking at the rails source code and it seems to be the only workaround?.... (I&#39;ll add this as an answer if my hunch is correct)"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1523469039, "post_id": 49780575, "comment_id": 86578351, "body": "<a href=\"https://github.com/rails/rails/blob/f648d7d39cffdcb973df661ccf35a89c805c3e04/activerecord/lib/active_record/connection_adapters/abstract/schema_definitions.rb#L185-L187\" rel=\"nofollow noreferrer\">github.com/rails/rails/blob/&hellip;</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1523469691, "post_id": 49780575, "comment_id": 86578712, "body": "Also, why is this tagged as rails 3 <b>and</b> rails 4? Which version are you using? (Possibly even rails 5?!)"}], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "is_accepted": false, "score": 1, "last_activity_date": 1523470937, "last_edit_date": 1523470937, "creation_date": 1523468192, "answer_id": 49781323, "question_id": 49780575, "link": "https://stackoverflow.com/questions/49780575/how-to-rename-foreign-key-while-creating-tables/49781323#49781323", "title": "how to rename foreign key while creating tables", "body": "<p>According to <a href=\"https://apidock.com/rails/v4.0.2/ActiveRecord/ConnectionAdapters/SchemaStatements/add_reference\" rel=\"nofollow noreferrer\">documentation</a> <code>belongs_to</code> (<code>reference</code>) generates a name automatically and it is impossible to customize field name.\nSo for your case, you should generate it manually. \nInstead of:</p>\n\n<pre><code>t.belongs_to :user, index: true\n</code></pre>\n\n<p>Please try this:</p>\n\n<pre><code>  t.integer :user_account_id, null: false\n...\nadd_foreign_key table_name, :users, column: :user_account_id, primary_key: :id\n</code></pre>\n\n<p>In the same migration.</p>\n"}], "owner": {"reputation": 203, "user_id": 9226492, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/1101789162a8e10b23e10edb2f56fadd?s=128&d=identicon&r=PG&f=1", "display_name": "jose1221", "link": "https://stackoverflow.com/users/9226492/jose1221"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523470937, "creation_date": 1523465489, "question_id": 49780575, "link": "https://stackoverflow.com/questions/49780575/how-to-rename-foreign-key-while-creating-tables", "title": "how to rename foreign key while creating tables", "body": "<p>i have two models for <code>user</code> and <code>account</code>. It is a one to one relationship so i have <code>belongs_to :user</code> in account model.</p>\n\n<p>I have migration script for <code>account</code> table i have <code>t.belongs_to :user, index: true</code></p>\n\n<p>When i run <code>rake db:migrate</code> it creates column user_id. I want the name as <code>user_account_id</code>.</p>\n\n<p>I tried creating another migration script to change foreign key name from <code>user_id</code> to <code>user_account_id</code> and it works but how can change foreign key name while creating tables so i dont have to add another migration script?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "aws-sdk", "pre-signed-url"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1523471916, "post_id": 49780346, "comment_id": 86579812, "body": "why isn&#39;t your second example using <code>success_action_status: &#39;201&#39;</code> ?"}, {"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1523472862, "post_id": 49780346, "comment_id": 86580330, "body": "@Anthony I&#39;m guessing that&#39;s proper formatting? It doesn&#39;t seem to accept integers in V2"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1523473020, "post_id": 49780346, "comment_id": 86580409, "body": "the docs say it takes a string."}, {"owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1523473279, "post_id": 49780346, "comment_id": 86580539, "body": "@Anthony As a string, I get the same results.. :("}], "answers": [{"tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": false, "score": 1, "last_activity_date": 1523509574, "creation_date": 1523509574, "answer_id": 49788393, "question_id": 49780346, "link": "https://stackoverflow.com/questions/49780346/upgraded-to-aws-sdk-v2-and-now-presigned-urls-are-failing/49788393#49788393", "title": "Upgraded to aws-sdk V2, and now presigned URL&#39;s are failing", "body": "<p>Below is my process for doing presigned uploads. One thing I'm noticing right off the bat is you are escaping the <code>/</code> in your key. I don't and it works fine. I use ENV variables for the secret stuff.</p>\n\n<p>config/initializers/aws.rb:</p>\n\n<pre><code>Aws.config.update(\n  {region: 'us-west-2',\n   credentials: Aws::Credentials.new(ENV['AWS_ACCESS_KEY_ID'],\n   ENV['AWS_SECRET_ACCESS_KEY']),\n  }\n)\n\nS3_BUCKET = Aws::S3::Resource.new.bucket(ENV['S3_BUCKET_NAME'])\n</code></pre>\n\n<p>In my controller I generate the url like this:</p>\n\n<pre><code>@s3_direct_post = S3_BUCKET.presigned_post(\n  key: \"my_bucket_folder/#{SecureRandom.uuid}/${filename}\", \n  success_action_status: '201', \n  acl: 'public-read')\n</code></pre>\n"}], "owner": {"reputation": 25732, "user_id": 93311, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/hgn1T.jpg?s=128&g=1", "display_name": "Trip", "link": "https://stackoverflow.com/users/93311/trip"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523509574, "creation_date": 1523464606, "question_id": 49780346, "link": "https://stackoverflow.com/questions/49780346/upgraded-to-aws-sdk-v2-and-now-presigned-urls-are-failing", "title": "Upgraded to aws-sdk V2, and now presigned URL&#39;s are failing", "body": "<p>I used to write this to generate a presigned URL in aws-sdk V1 :</p>\n\n<pre><code>AWS.config(S3Config::S3_CONFIG)\nbucket = AWS.s3.buckets[S3Config::S3_CONFIG[:bucket]]\npresigned_url = bucket.presigned_post(\n  key: \"attachments/#{SecureRandom.uuid}/${filename}\",\n  success_action_status: 201, acl: 'public-read'\n)\n</code></pre>\n\n<p>Which sent an OPTIONS/POST <strong>working</strong> request like this :</p>\n\n<p><a href=\"https://gist.github.com/gotoAndBliss/cdd8818b8adce58d1b625f68e2633199\" rel=\"nofollow noreferrer\">https://gist.github.com/gotoAndBliss/cdd8818b8adce58d1b625f68e2633199</a></p>\n\n<p>The biggest difference is that the <strong>Status Code</strong> is  <code>201 Created</code></p>\n\n<p>I then updated to V2 and rewrote it to this :</p>\n\n<pre><code>presigned_url = Aws::S3::PresignedPost.new(aws_creds, aws_region, S3Config::BUCKET, {\n  key: \"attachments\\/#{SecureRandom.uuid}\\/\\${filename}\",\n  metadata: {\"original-filename\" =&gt; \"${filename}\"},\n  acl: 'public-read', success_action_status: ['201']\n})\n</code></pre>\n\n<p>To which I'm pretty sure was properly written. But this generates this request :</p>\n\n<p><a href=\"https://gist.github.com/gotoAndBliss/43a4a88adc5c2be0b70b66d551a72a84\" rel=\"nofollow noreferrer\">https://gist.github.com/gotoAndBliss/43a4a88adc5c2be0b70b66d551a72a84</a></p>\n\n<p>The biggest difference is the <strong>Status Code</strong> : <code>204 No Content</code></p>\n\n<p>I went through this line for line and it seems like <em>everything</em> else is identical. Would anyone know why these are failing? Or what sets them apart?</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 167, "user_id": 6180530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/n2ame.jpg?s=128&g=1", "display_name": "orlando21", "link": "https://stackoverflow.com/users/6180530/orlando21"}, "edited": false, "score": 0, "creation_date": 1523466237, "post_id": 49779910, "comment_id": 86576913, "body": "Do you mean as shown in <a href=\"https://stackoverflow.com/a/17258855/6180530\">this thread</a>. I&#39;ve updated the code in <code>game.rb</code> and <code>game_spec.rb</code> (shown in repo) but the program still halts at gets."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 167, "user_id": 6180530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/n2ame.jpg?s=128&g=1", "display_name": "orlando21", "link": "https://stackoverflow.com/users/6180530/orlando21"}, "edited": false, "score": 0, "creation_date": 1523466391, "post_id": 49779910, "comment_id": 86576989, "body": "I&#39;m telling you to replace <code>allow_any_instance_of(Kernel)</code> (as shown in your question text) with <code>allow_any_instannce_of(Object)</code>. Of course there are other ways to achieve this and you can try and follow the advice in that other answer. I&#39;m not covering that in mine though. Take it or leave it."}, {"owner": {"reputation": 167, "user_id": 6180530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/n2ame.jpg?s=128&g=1", "display_name": "orlando21", "link": "https://stackoverflow.com/users/6180530/orlando21"}, "edited": false, "score": 0, "creation_date": 1523466500, "post_id": 49779910, "comment_id": 86577037, "body": "Hm. Tried that first but didn&#39;t work :-(   Thanks anyway"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 167, "user_id": 6180530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/n2ame.jpg?s=128&g=1", "display_name": "orlando21", "link": "https://stackoverflow.com/users/6180530/orlando21"}, "edited": false, "score": 0, "creation_date": 1523466775, "post_id": 49779910, "comment_id": 86577173, "body": "I just tested this. It does work. Sorry to break it to you."}, {"owner": {"reputation": 167, "user_id": 6180530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/n2ame.jpg?s=128&g=1", "display_name": "orlando21", "link": "https://stackoverflow.com/users/6180530/orlando21"}, "edited": false, "score": 0, "creation_date": 1523467046, "post_id": 49779910, "comment_id": 86577331, "body": "Alright, then I&#39;m doing something wrong. This sounds elementary but just to confirm; you downloaded my repo, just changed that line you advised, and ran <code>bundle exec rspec</code>...and the code just ran straight thru without pause? If so, then I&#39;ve probably been working too long on this problem and need to take a break."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 167, "user_id": 6180530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/n2ame.jpg?s=128&g=1", "display_name": "orlando21", "link": "https://stackoverflow.com/users/6180530/orlando21"}, "edited": false, "score": 0, "creation_date": 1523469314, "post_id": 49779910, "comment_id": 86578503, "body": "@orlando21 i didn&#39;t download your code. I tried <code>allow_any_instance_of(Object).to receive(:gets).and_return &quot;something\\n&quot;</code> in a minimal RSpec environment, and checked that <code>gets.chomp</code>returned <code>something</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 167, "user_id": 6180530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/n2ame.jpg?s=128&g=1", "display_name": "orlando21", "link": "https://stackoverflow.com/users/6180530/orlando21"}, "edited": false, "score": 0, "creation_date": 1523470958, "post_id": 49779910, "comment_id": 86579355, "body": "@orlando21 exited answer to include reproducible example"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1523470948, "last_edit_date": 1523470948, "creation_date": 1523463107, "answer_id": 49779910, "question_id": 49779631, "link": "https://stackoverflow.com/questions/49779631/rspec-simulating-user-input-via-gets-without-the-test-prompting-for-it/49779910#49779910", "title": "RSpec: simulating user input (via gets) without the test prompting for it", "body": "<p>use allow_any_instance_of(Object) instead of Kernel. The module Kernel is included into Object. Kernel is not ever actually instantiated because it's a module. </p>\n\n<p>kind of a small point, but it'd be more accurate if you stubbed gets to return a strinng ending in <code>\\n</code>, otherwise you could remove the <code>chomp</code> from the tested functionn and the test will still pass</p>\n\n<p><strong>reproducable example</strong></p>\n\n<pre><code>require 'rspec'\nrequire 'rspec/expectations'\n\ntest_case = RSpec.describe \"\" do\n  it \"\" do\n    allow_any_instance_of(Object).to receive(:gets).and_return \"something\\n\"\n    puts gets.chomp\n  end\nend\n\ntest_case.run\n</code></pre>\n"}], "owner": {"reputation": 167, "user_id": 6180530, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/n2ame.jpg?s=128&g=1", "display_name": "orlando21", "link": "https://stackoverflow.com/users/6180530/orlando21"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 247, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523470948, "creation_date": 1523462296, "question_id": 49779631, "link": "https://stackoverflow.com/questions/49779631/rspec-simulating-user-input-via-gets-without-the-test-prompting-for-it", "title": "RSpec: simulating user input (via gets) without the test prompting for it", "body": "<p>I'm coding a game by taking a TDD first approach, and have gotten stuck because the test keeps stopping for user input (<a href=\"https://github.com/orlando21/connect_four_tdd\" rel=\"nofollow noreferrer\">repo is here</a>).</p>\n\n<p>I want the test to simulate user input rather than prompting for it, as I've set up some <code>let</code> keywords and have tried to account for user input that comes in via <code>gets.chomp</code>.</p>\n\n<p>Here is where the game prompts for user input:</p>\n\n<p>game.rb</p>\n\n<pre><code>module ConnectFour\n  class Game\n    def start_game\n      puts 'Welcome to Connect Four.'\n      puts \"Enter name of player 1 (red)\"\n      player1name = gets.chomp\n      player1 = Player.new(player1name)\n    end\n  end\nend \n</code></pre>\n\n<p>And here is the test code:</p>\n\n<p>game_spec.rb</p>\n\n<pre><code>require 'spec_helper'\n\nmodule ConnectFour\n  describe Game do\n    let(:game) { Game.new }\n    let(:player1name) { 'Bob' }\n    let(:player1) { Player.new(player1name) }\n\n    describe 'Instantiate game play objects' do\n\n      describe 'Create player 1' do\n        it 'Provide player 1 name' do\n          allow_any_instance_of(Kernel)\n          .to receive(:gets)\n          .and_return(player1name)\n        end\n        it 'Instantiate player 1' do\n          expect(player1.name).to eq player1name\n        end\n      end\n    end # describe 'Instantiate game play objects'\n  end # Describe 'Game'\nend\n</code></pre>\n\n<p>So far I've tried encapsulating the <code>gets.chomp</code> in its own method as <a href=\"https://stackoverflow.com/questions/16948645/how-do-i-test-a-function-with-gets-chomp-in-it?noredirect=1&amp;lq=1\">recommended here</a> but this has no effect. I've also tried prefixing <code>$stdin</code> to <code>gets.chomp</code> statements in the Ruby code but yeah, that was pretty useless. I had asked a <a href=\"https://stackoverflow.com/questions/49729770/rspec-using-a-method-stub-to-test-interactive-user-input/49733512#49733512\">similar question</a> here recently and thought I had understood how to simulate user input but obviously not... any help would be appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "parameters"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1523462213, "post_id": 49779560, "comment_id": 86574566, "body": "Isn&#39;t <code>gsub</code> your friend here?"}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1523462282, "post_id": 49779560, "comment_id": 86574624, "body": "I think so, but where do I implement it?"}, {"owner": {"reputation": 1169, "user_id": 2980650, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/245ca292e170237592a28dcac223a196?s=128&d=identicon&r=PG&f=1", "display_name": "Mezbah", "link": "https://stackoverflow.com/users/2980650/mezbah"}, "edited": false, "score": 0, "creation_date": 1523462439, "post_id": 49779560, "comment_id": 86574755, "body": "do it in controller"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1523462485, "post_id": 49779560, "comment_id": 86574778, "body": "Use <a href=\"https://ruby-doc.org/core-2.5.0/String.html#method-i-delete-21\" rel=\"nofollow noreferrer\"><code>String#delete!</code></a>\u2014note bang\u2014<code>params[:q][:search_fields_cont_any].delete!(&#39;-&#39;)</code> anywhere."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523470432, "post_id": 49779560, "comment_id": 86579094, "body": "Why not just create a custom setter on the model instead of transforming the param?"}], "answers": [{"comments": [{"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1523464431, "post_id": 49779917, "comment_id": 86575992, "body": "undefined method `delete!&#39; for #&lt;ActionController::Parameters:0x007f955f9c0fa8&gt; Did you mean? delete"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1523466081, "post_id": 49779917, "comment_id": 86576840, "body": "Sorry, needed to actually get the value for <code>search_fields_cont_any</code> in order to call <code>.gsub!</code> or <code>.delete!</code>. Edited."}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1523465858, "last_edit_date": 1523465858, "creation_date": 1523463121, "answer_id": 49779917, "question_id": 49779560, "link": "https://stackoverflow.com/questions/49779560/strip-dash-from-params-rails/49779917#49779917", "title": "Strip dash from params - Rails", "body": "<p>How about:</p>\n\n<pre><code>def filter_params(params)\n  params.require(:q).permit(:search_fields_cont_any)[:search_fields_cont_any].gsub!('-','')\nend\n</code></pre>\n\n<p>In console:</p>\n\n<pre><code>params = ActionController::Parameters.new(q: {search_fields_cont_any: 'abc-def'})\n =&gt; {\"q\"=&gt;{\"search_fields_cont_any\"=&gt;\"abc-def\"}} \nparams.require(:q).permit(:search_fields_cont_any)[:search_fields_cont_any].gsub!('-','')\n =&gt; \"abcdef\"\n</code></pre>\n\n<p>Or, as mudasobwa says (even better - saves you 1 character):</p>\n\n<pre><code>def filter_params(params)\n  params.require(:q).permit(:search_fields_cont_any)[:search_fields_cont_any].delete!('-')\nend\n</code></pre>\n\n<p>Again, in console: </p>\n\n<pre><code>params = ActionController::Parameters.new(q: {search_fields_cont_any: 'abc-def'})\n =&gt; {\"q\"=&gt;{\"search_fields_cont_any\"=&gt;\"abc-def\"}} \nparams.require(:q).permit(:search_fields_cont_any)[:search_fields_cont_any].delete!('-')\n =&gt; \"abcdef\" \n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 49779917, "answer_count": 1, "score": 2, "last_activity_date": 1523465858, "creation_date": 1523462096, "question_id": 49779560, "link": "https://stackoverflow.com/questions/49779560/strip-dash-from-params-rails", "title": "Strip dash from params - Rails", "body": "<p>How can I strip characters from params? If my params look like this:</p>\n\n<pre><code>&lt;ActionController::Parameters {\"utf8\"=&gt;\"\u2713\", \"q\"=&gt;&lt;ActionController::Parameters {\"search_fields_cont_any\"=&gt;\"123-456\", \"category_eq\"=&gt;\"\", \"created_at_gteq\"=&gt;\"\", \"created_at_lteq\"=&gt;\"\"} permitted: false&gt;, \"controller\"=&gt;\"submissions\", \"action\"=&gt;\"index\", \"page\"=&gt;nil, \"per_page\"=&gt;nil} permitted: false&gt;\n\nparams[:q][:search_fields_cont_any] =&gt; \"123-456\"\n</code></pre>\n\n<p>How can I modify the params so that it would look like this:</p>\n\n<pre><code>params[:q][:search_fields_cont_any] =&gt; \"123456\"\n</code></pre>\n\n<h3>CONTROLLER</h3>\n\n<pre><code>@q = Submission.submissions_for(user: current_user).ransack(filter_params(params[:q]))\n</code></pre>\n\n<h3>Private method</h3>\n\n<pre><code>def filter_params(params)\n params.require(:q).permit(:search_fields_cont_any)\nend\n</code></pre>\n\n<p>Ideally I would modify the params in the private method. How can I do this?</p>\n"}, {"tags": ["ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1523458242, "post_id": 49778227, "comment_id": 86571631, "body": "\u201cIt gives different complaints\u201d\u2014what exactly does <code>bundler</code> complain about?"}, {"owner": {"reputation": 1584, "user_id": 601976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de088f705937dd429b9470ab9b9bbd8b?s=128&d=identicon&r=PG", "display_name": "RoUS", "link": "https://stackoverflow.com/users/601976/rous"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523468495, "post_id": 49778227, "comment_id": 86578068, "body": "It&#39;ll take me a bit to try to recreate them all, but <code>Bundler can&#39;t satisfy your Gemfile&#39;s dependencies.</code> is one of them."}, {"owner": {"reputation": 1584, "user_id": 601976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de088f705937dd429b9470ab9b9bbd8b?s=128&d=identicon&r=PG", "display_name": "RoUS", "link": "https://stackoverflow.com/users/601976/rous"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1524162077, "post_id": 49778227, "comment_id": 86871410, "body": "Hmm.  It must have gotten fixed in some more recent version of Bundler than I&#39;ve been using.  &quot;Never mind.&quot;  and Thanks!"}], "answers": [{"tags": [], "owner": {"reputation": 1584, "user_id": 601976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de088f705937dd429b9470ab9b9bbd8b?s=128&d=identicon&r=PG", "display_name": "RoUS", "link": "https://stackoverflow.com/users/601976/rous"}, "is_accepted": false, "score": 0, "last_activity_date": 1524162108, "creation_date": 1524162108, "answer_id": 49927733, "question_id": 49778227, "link": "https://stackoverflow.com/questions/49778227/ruby-bundler-doesnt-like-version-not-being-a-hard-coded-constant/49927733#49927733", "title": "Ruby: Bundler doesn&#39;t like VERSION not being a hard-coded constant", "body": "<p>Unable to reproduce the problem using <code>bundler 1.16.1</code>.  Assume it's been fixed.  Thanks!</p>\n"}], "owner": {"reputation": 1584, "user_id": 601976, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/de088f705937dd429b9470ab9b9bbd8b?s=128&d=identicon&r=PG", "display_name": "RoUS", "link": "https://stackoverflow.com/users/601976/rous"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524162108, "creation_date": 1523458163, "question_id": 49778227, "link": "https://stackoverflow.com/questions/49778227/ruby-bundler-doesnt-like-version-not-being-a-hard-coded-constant", "title": "Ruby: Bundler doesn&#39;t like VERSION not being a hard-coded constant", "body": "<p>I use the <code>versionomy</code> gem to manage the internal versioning of my gems.  That means that my <code>lib/&lt;gem&gt;/version.rb</code> file tents to contain something like this:</p>\n\n<pre><code>@version  = Versionomy.parse('0.0.1')\n#\n# explain what happened to cause the bump\n#\n@version.bump(:minor)\n@version.freeze\nVERSION   = @version.to_s\n</code></pre>\n\n<p>However, <code>bundler</code> <em>really</em> doesn't like having the <code>versionomy</code> gem be a pre-requisite of bundler's own work.  It gives different complaints depending upon how I try to work around it.</p>\n\n<p>Is there a trick to registering/requiring a gem so <code>bundle check</code> (at its simplest) will complain but continue?  The <code>versionomy</code> gem is in my system gem repo, so it's not like it's completely unknown or inaccessible.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "cucumber"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1523456851, "post_id": 49777639, "comment_id": 86570528, "body": "Your <code>@app</code> variable is <code>nil</code> (undefined) - where do you define it?"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1523458431, "post_id": 49777639, "comment_id": 86571801, "body": "it means that <code>nil</code> object(in your case its <code>@app</code>) does not respond to <code>tumblr_login</code> method."}, {"owner": {"reputation": 1, "user_id": 6345382, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xTsDoFrs_h0/AAAAAAAAAAI/AAAAAAAABHQ/cQED4QNeYp8/photo.jpg?sz=128", "display_name": "diana osmani", "link": "https://stackoverflow.com/users/6345382/diana-osmani"}, "edited": false, "score": 0, "creation_date": 1523460545, "post_id": 49777639, "comment_id": 86573400, "body": "my @app is declared in my hooks.rb file"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1523471068, "post_id": 49777639, "comment_id": 86579411, "body": "@dianaosmani it&#39;s not beinng loaded in any case. Can you show the hooks file?"}, {"owner": {"reputation": 1, "user_id": 6345382, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xTsDoFrs_h0/AAAAAAAAAAI/AAAAAAAABHQ/cQED4QNeYp8/photo.jpg?sz=128", "display_name": "diana osmani", "link": "https://stackoverflow.com/users/6345382/diana-osmani"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1523517814, "post_id": 49777639, "comment_id": 86595545, "body": "I tried but because I have a lot of instance variables, it is reading them as stack overflow users. How can i send code in a comment? @maxpleaner"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1523519192, "post_id": 49777639, "comment_id": 86596361, "body": "@dianaosmani it&#39;s impossible to read in a comment, add it to your question innstead :D"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6345382, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xTsDoFrs_h0/AAAAAAAAAAI/AAAAAAAABHQ/cQED4QNeYp8/photo.jpg?sz=128", "display_name": "diana osmani", "link": "https://stackoverflow.com/users/6345382/diana-osmani"}, "is_accepted": false, "score": 0, "last_activity_date": 1523542330, "last_edit_date": 1523542330, "creation_date": 1523519699, "answer_id": 49790942, "question_id": 49777639, "link": "https://stackoverflow.com/questions/49777639/what-is-does-this-error-method-mean-undefined-method-method-name-for-nilnilc/49790942#49790942", "title": "What is does this error method mean: undefined method `method name&#39; for nil:NilClass (NoMethodError)", "body": "<p>@maxpleaner</p>\n\n<pre><code>if ENV['HEADLESS']\n  require 'headless'\n  require 'selenium-webdriver'\n  headless = Headless.new display: '100'\n  headless.start\nend\n\n# Set up browser\n# browser = Watir::Browser.new (ENV['BROWSER'] || 'chrome').to_sym\n driver = Selenium::WebDriver.for :chrome\n browser_type = ENV['BROWSER'] || 'chrome'\n $setup_done = false\n\n\nBefore do |scenario|\n\n    @browser = browser\n    @app = App.new @browser\n\n    unless $setup_done\n    $setup_done = true\n    # This stuff will only run before the first scenario executed. Use it to set up data etc.\n    end\nend\n\nAfter do |scenario|\n\nend\n\nat_exit do\n    browser.quit\nend\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6345382, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-xTsDoFrs_h0/AAAAAAAAAAI/AAAAAAAABHQ/cQED4QNeYp8/photo.jpg?sz=128", "display_name": "diana osmani", "link": "https://stackoverflow.com/users/6345382/diana-osmani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 488, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523542330, "creation_date": 1523456628, "last_edit_date": 1523456981, "question_id": 49777639, "link": "https://stackoverflow.com/questions/49777639/what-is-does-this-error-method-mean-undefined-method-method-name-for-nilnilc", "title": "What is does this error method mean: undefined method `method name&#39; for nil:NilClass (NoMethodError)", "body": "<p>I am fairly new to automation testing and I am writing BDD automation test scenarios in Ruby using selenium-webdriver, when running my tests, they fail at the first step. (tumblr just as an example)</p>\n\n<p>What does this error message mean and how do I fix it? Any help would be much appreciated! </p>\n\n<p><strong>In my feature file:</strong></p>\n\n<pre><code>  Feature: tumblr \n    @s1\n  Scenario: Logging in to Tumblr\n    Given I am on the Tumblr login page\n    When I enter my login details\n    Then I should be sent to the dashboard\n</code></pre>\n\n<p><strong>In my login_page.rb:</strong> </p>\n\n<pre><code>def visit\n  @browser.goto \"#{EnvConfig.base_url}/login\"\n  await_on_page\nend\n</code></pre>\n\n<p><strong>In my login_step_defs.rb:</strong></p>\n\n<pre><code>Given /^I am on the Odicci login page$/ do \n  @app.tumblr_login.visit\nend\n\nWhen /^I enter my login details$/ do \n  @app.tumblr_login.login\nend\n\nThen /^I should be sent to the dashboard$/ do \n  @app.tumblr_dashboard.go_to_dashboard\nend \n</code></pre>\n\n<p>Initially when I was running 'cucumber features.feature' but the step definitions could not be located so the scenarios were finishing off as 'undefined' so running 'cucumber features.feature -r step_definitions works to run the tests but they fail because of this error message: </p>\n\n<pre><code>Scenario: Logging in to Tumblr           # features.feature:4\nGiven I am on the Tumblr login page    # step_definitions/login_step_defs.rb:2\n  undefined method `tumblr_login' for nil:NilClass (NoMethodError)\n  ./step_definitions/login_step_defs.rb:3:in `/^I am on the Tumblr login page$/'\n  features.feature:5:in `Given I am on the Tumblr login page'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1814, "user_id": 2119317, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/65e386ab94962682b0abd72463670e23?s=128&d=identicon&r=PG", "display_name": "Pardeep Saini", "link": "https://stackoverflow.com/users/2119317/pardeep-saini"}, "edited": false, "score": 0, "creation_date": 1523455966, "post_id": 49777217, "comment_id": 86569898, "body": "install <code>execjs</code> gem and try ."}], "owner": {"reputation": 31, "user_id": 9630976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec26ad4f454dfc1e5c02cad6c6840f?s=128&d=identicon&r=PG&f=1", "display_name": "addysplendor", "link": "https://stackoverflow.com/users/9630976/addysplendor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 67, "favorite_count": 0, "closed_date": 1523455996, "answer_count": 0, "score": 1, "last_activity_date": 1523463330, "creation_date": 1523455502, "last_edit_date": 1523463330, "question_id": 49777217, "link": "https://stackoverflow.com/questions/49777217/rails-error-execjsprogramerror-in-postsindex", "closed_reason": "Duplicate", "title": "Rails error: ExecJS::ProgramError in Posts#index", "body": "<p>Just installed a fresh rails installation. Followed the steps in <a href=\"https://www.youtube.com/watch?v=pPy0GQJLZUM\" rel=\"nofollow noreferrer\">this tutorial</a>. At 14:04, the index page should appear.</p>\n\n<p>Got this error when running my index page:</p>\n\n<pre><code>ExecJS::ProgramError in Posts#index\nShowing C:/Sites/Simpleblog/app/views/layouts/application.html.erb where line #7 raised:\nTypeError: Object doesn't support this property or method\nExtracted source (around line #7):\n\n    &lt;%= csrf_meta_tags %&gt;\n    &lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n    &lt;%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %&gt;\n  &lt;/head&gt;\n\n\nRails.root: C:/Sites/Simpleblog\n</code></pre>\n\n<p>Line 7 is:</p>\n\n<pre><code>&lt;%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %&gt;\n</code></pre>\n\n<p>Here is routes.rb:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.routes.draw do\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\n\nroot 'posts#index'  \n\n\n\nend\n</code></pre>\n\n<p>Here is posts_controller:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class PostsController &lt; ApplicationController\n    def index\n\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ransack"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 5, "creation_date": 1523451015, "post_id": 49775488, "comment_id": 86566103, "body": "can you not just remove the dash before passing it to ransack, e.g <code>account_number.delete(&#39;-&#39;)</code>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1523451947, "post_id": 49775488, "comment_id": 86566811, "body": "You could configure the Front-End to strip dashes before submitting the form, or you could configure the Back-End to strip dashes from the parameter. Either way, this is a simple 1-liner, and not specific to ransack configuration."}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 131, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523450549, "creation_date": 1523450549, "question_id": 49775488, "link": "https://stackoverflow.com/questions/49775488/ransack-ignore-dashes-in-search-field", "title": "Ransack - Ignore dashes in search field", "body": "<p>I'm using Ransack for search filtering in my app and I have a request from the client. They have the ability to search <code>Account</code> via <code>Account_number</code>. An account_number looks like this in our database <code>123456</code> but to the users the account number looks like this <code>123-456</code>. So when they search for the account number and add the dash the account is not found. </p>\n\n<p>Is there a way to ignore <code>Dashes</code> in the search? Like, If a user puts a dash in the search, can I configure ransack to ignore that character?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "edited": false, "score": 0, "creation_date": 1523446532, "post_id": 49774004, "comment_id": 86562885, "body": "what does <code>&quot;\\x00&quot;</code> mean? looks like some hexadecimal code for some cahracter. Can we have 2 characters set as <code>quote_char </code> ?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "edited": false, "score": 1, "creation_date": 1523446742, "post_id": 49774004, "comment_id": 86563013, "body": "You never need <code>&quot;\\x00&quot;</code>. It\u2019s a hexadecimal for c-string terminator, literally having <code>0</code> ASCII code. You\u2019ll encounter issues with it much earlier: <code>CSV</code> will <i>stop reading file on it</i>, since it doesn\u2019t use binary mode while reading a file."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1523446315, "creation_date": 1523446315, "answer_id": 49774004, "question_id": 49773755, "link": "https://stackoverflow.com/questions/49773755/reading-a-csv-file-with-headers-having-double-quotes/49774004#49774004", "title": "Reading a CSV file with headers having double quotes", "body": "<p>Why would you set the <code>:quote_char</code> to be <code>\"\\x00\"</code>? Set it to <em>a quote indeed</em>.</p>\n\n<pre><code>CSV.foreach('/tmp/qqq.csv', headers: true, :quote_char =&gt; '\"') do |row|\n  puts row['IP Address']\nend\n</code></pre>\n"}], "owner": {"reputation": 5193, "user_id": 5996587, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/d15f53deb1b5f2cab3534565c91c5394?s=128&d=identicon&r=PG&f=1", "display_name": "codec", "link": "https://stackoverflow.com/users/5996587/codec"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 813, "favorite_count": 0, "accepted_answer_id": 49774004, "answer_count": 1, "score": 0, "last_activity_date": 1523446315, "creation_date": 1523445596, "question_id": 49773755, "link": "https://stackoverflow.com/questions/49773755/reading-a-csv-file-with-headers-having-double-quotes", "title": "Reading a CSV file with headers having double quotes", "body": "<p>I have .csv file with the header row as </p>\n\n<p><code>VM,Mac Address,Type,\"IP Address\"</code></p>\n\n<p>With the following code I can print the value of <code>VM</code> but not <code>IP Address</code>. If remove the <code>\"\"</code> surrounding <code>IP Address</code> it works.</p>\n\n<pre><code>CSV.foreach(vcenter_vnetwork_file, headers: true, :quote_char =&gt; \"\\x00\") do |row|\n    puts row['VM']\n    puts row['IP Address']\nend\n</code></pre>\n\n<p>I tried using <code>puts row['\\\"IP Address\\\"']</code> but this did not work. I can programmatically remove those <code>\"\"</code> from the header row but is there any way to get this working woring without any workaround? I also tried adding <code>:force_quotes =&gt; true</code> in the <code>CSV.foreach</code>  loop.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file-upload", "rest-client"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1523445758, "post_id": 49773631, "comment_id": 86562382, "body": "Have you tried streaming? <a href=\"https://github.com/rest-client/rest-client#streaming-request-payload\" rel=\"nofollow noreferrer\">github.com/rest-client/rest-client#streaming-request-payload</a>"}, {"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 1, "creation_date": 1523448918, "post_id": 49773631, "comment_id": 86564490, "body": "look into direct upload to cloud."}], "answers": [{"tags": [], "owner": {"reputation": 45, "user_id": 5232153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/030764f2ff51167679781d3fc324c140?s=128&d=identicon&r=PG&f=1", "display_name": "alexeysh", "link": "https://stackoverflow.com/users/5232153/alexeysh"}, "is_accepted": false, "score": 0, "last_activity_date": 1524154510, "creation_date": 1524154510, "answer_id": 49925736, "question_id": 49773631, "link": "https://stackoverflow.com/questions/49773631/upload-big-2gb-files-by-rails/49925736#49925736", "title": "Upload big (2Gb+) files by rails", "body": "<p>Gem <a href=\"https://github.com/taf2/curb\" rel=\"nofollow noreferrer\">curb</a> succesfully sends large files</p>\n"}], "owner": {"reputation": 45, "user_id": 5232153, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/030764f2ff51167679781d3fc324c140?s=128&d=identicon&r=PG&f=1", "display_name": "alexeysh", "link": "https://stackoverflow.com/users/5232153/alexeysh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 175, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1524154510, "creation_date": 1523445219, "last_edit_date": 1523461136, "question_id": 49773631, "link": "https://stackoverflow.com/questions/49773631/upload-big-2gb-files-by-rails", "title": "Upload big (2Gb+) files by rails", "body": "<p>I have big files on my server and need to send them to another server by http(s).\nI use <a href=\"https://github.com/rest-client/rest-client\" rel=\"nofollow noreferrer\">rest-client gem</a>\nIt works perfectly with small files, but 2+Gb files cause error.</p>\n\n<p>When I tried with https, I got this error</p>\n\n<pre><code>RangeError: integer 2325958991 too big to convert to `int'\n</code></pre>\n\n<p>Tested with local http and got this error</p>\n\n<pre><code>2.3.3 :001 &gt; RestClient.post 'http://localhost:4567/upload',  :my_file =&gt; File.open(\"test_file2G\", 'rb')                                                                                                                                  \nErrno::EPIPE: Broken pipe\n        from /home/rubydev/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/net/protocol.rb:211:in `write'\n        from /home/rubydev/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/net/protocol.rb:211:in `write0'\n        from /home/rubydev/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/net/protocol.rb:185:in `block in write'\n        from /home/rubydev/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/net/protocol.rb:202:in `writing'\n        from /home/rubydev/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/net/protocol.rb:184:in `write'\n        from /home/rubydev/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/net/http/generic_request.rb:188:in `send_request_with_body'\n        from /home/rubydev/.rvm/rubies/ruby-2.3.3/lib/ruby/2.3.0/net/http/generic_request.rb:121:in `exec'\n</code></pre>\n\n<p>For tests I use sinatra server, it succesfully receives big files for examlpe form curl.</p>\n\n<p>UPDATE\nStreamed upload causes same error</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "tags"], "comments": [{"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 1, "creation_date": 1523440743, "post_id": 49771944, "comment_id": 86558995, "body": "You can not call <code>where</code> clause on array class."}, {"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "reply_to_user": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1523440942, "post_id": 49771944, "comment_id": 86559142, "body": "yes, but how to I get a collection of jobs where I can call it?"}], "answers": [{"tags": [], "owner": {"reputation": 1079, "user_id": 3550170, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/Pu9Na.png?s=128&g=1", "display_name": "Snake", "link": "https://stackoverflow.com/users/3550170/snake"}, "is_accepted": false, "score": 1, "last_activity_date": 1523441318, "creation_date": 1523441318, "answer_id": 49772250, "question_id": 49771944, "link": "https://stackoverflow.com/questions/49771944/rails-find-records-tagged-with-multiple-tags-undefined-method-where-for-arra/49772250#49772250", "title": "Rails find records tagged with multiple tags | undefined method &#39;where&#39; for Array", "body": "<p>To use <code>.where</code> you need to have a ActiveRecord collection.</p>\n\n<pre><code>Job.joins(:job_tags).where(\"jobs_tags: { name: \"name of tag or array of tag names\").where(category: 'Full-Budget').order('created_at desc')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "edited": false, "score": 0, "creation_date": 1523442556, "post_id": 49772276, "comment_id": 86560233, "body": "Hmmm I am not sure, it kinda works, had to change <code>:job_tags</code> to <code>jobtags</code> but I think the problem is that I get all Jobs with either tag from the @tags array, but I want to get only the jobs which have both @tags"}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "reply_to_user": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "edited": false, "score": 0, "creation_date": 1523444363, "post_id": 49772276, "comment_id": 86561419, "body": "That was not your question. Also the method(self.tagged_with_tags(tags)) you have tried won&#39;t give job results which has both tags. Update your question."}, {"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "edited": false, "score": 0, "creation_date": 1523450706, "post_id": 49772276, "comment_id": 86565846, "body": "So, how would I find only Jobs results which only have both @tags?"}, {"owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "edited": false, "score": 0, "creation_date": 1523451731, "post_id": 49772276, "comment_id": 86566643, "body": "Oh, I think it actually works now as intended, had two tags with the same name ... Thank you!!!"}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": true, "score": 2, "last_activity_date": 1523445073, "last_edit_date": 1523445073, "creation_date": 1523441379, "answer_id": 49772276, "question_id": 49771944, "link": "https://stackoverflow.com/questions/49771944/rails-find-records-tagged-with-multiple-tags-undefined-method-where-for-arra/49772276#49772276", "title": "Rails find records tagged with multiple tags | undefined method &#39;where&#39; for Array", "body": "<p>You can get the desired result with active record joins query.\nIterating through each job objects and pushing it to array is less efficient.</p>\n\n<pre><code>@tags = ['tag_name1', 'tag_name2']\n</code></pre>\n\n<p>Something like this:</p>\n\n<pre><code>@jobs = Job.joins(:jobtags).where(jobtags: { name: @tags }).\n          where(category: 'Full-Budget').\n          order('created_at desc')\n</code></pre>\n\n<p><strong>Update</strong></p>\n\n<p>If you want to fetch jobs which have all the tags listed in @tags array, check count of jobtags in the same query.</p>\n\n<pre><code>@jobs = Job.joins(:jobtags).where(jobtags: { name: @tags }).\n          group('jobs.id').\n          having('count(jobs.id) = ?', @tags.size).\n          where(category: 'Full-Budget').\n          order('created_at desc')\n</code></pre>\n\n<p>Hope it helps !</p>\n"}], "owner": {"reputation": 147, "user_id": 2172086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/4fiTs.png?s=128&g=1", "display_name": "xpnimi", "link": "https://stackoverflow.com/users/2172086/xpnimi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 678, "favorite_count": 0, "accepted_answer_id": 49772276, "answer_count": 2, "score": 0, "last_activity_date": 1523445073, "creation_date": 1523440413, "question_id": 49771944, "link": "https://stackoverflow.com/questions/49771944/rails-find-records-tagged-with-multiple-tags-undefined-method-where-for-arra", "title": "Rails find records tagged with multiple tags | undefined method &#39;where&#39; for Array", "body": "<p>So I want to build a jobsboard, with jobs which are tagable.\nI want to implement it by myself, so I followed this tutorial:\n<a href=\"https://www.sitepoint.com/tagging-scratch-rails/\" rel=\"nofollow noreferrer\">https://www.sitepoint.com/tagging-scratch-rails/</a></p>\n\n<p>all works, but i want to get not only all jobs which are tagged with one tag (the tutorial has a method for that <code>tagged_with(name)</code> ) but instead I want to get all jobs which are tagged with multiple tags.</p>\n\n<p>So i added a method to the <code>job.rb</code> model as followed:</p>\n\n<pre><code>def self.tagged_with_tags(tags)\n    jobs = []\n    tags.each do |tag|\n        Jobtag.where(name: tag).first.jobs.map do |j|\n            jobs.push(j) unless jobs.include?(j)\n            puts j\n        end\n    end\n    jobs\nend\n</code></pre>\n\n<p>That seems to work, but I want to query the returned array further like:</p>\n\n<pre><code>@jobs = Job.tagged_with_tags(@tags).where(category: 'Full-Budget').order('created_at desc')\n</code></pre>\n\n<p>And here I get this Error:\n<strong><code>undefined method 'where' for #&lt;Array:0x007fb1b0a25c10&gt;</code></strong></p>\n\n<hr>\n\n<p>Here are my models:</p>\n\n<p><strong>job.rb</strong></p>\n\n<pre><code>class Job &lt; ActiveRecord::Base\n    has_many :taggings\n    has_many :jobtags, through: :taggings\n\n    def all_jobtags=(names)\n        self.jobtags = names.split(\",\").map do |name|\n            Jobtag.where(name: name.strip.downcase).first_or_create!\n        end\n    end\n\n    def all_jobtags\n        self.jobtags.map(&amp;:name).join(\", \")\n    end\n\n    def self.tagged_with(name)\n        Jobtag.find_by_name!(name.downcase).jobs\n    end\n\n    # Needs work:\n    def self.tagged_with_tags(tags)\n        jobs = []\n        tags.each do |tag|\n            Jobtag.where(name: tag).first.jobs.map do |j|\n                jobs.push(j) unless jobs.include?(j)\n                puts j\n            end\n        end\n        jobs\n    end\n\nend\n</code></pre>\n\n<p><strong>Jobtag.rb</strong></p>\n\n<pre><code>class Jobtag &lt; ActiveRecord::Base\n    has_many :taggings\n    has_many :jobs, through: :taggings\nend\n</code></pre>\n\n<p><strong>Tagging.rb</strong></p>\n\n<pre><code>class Tagging &lt; ActiveRecord::Base\n    belongs_to :job\n    belongs_to :jobtag\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "delayed-job", "rails-activejob"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1523438412, "post_id": 49771027, "comment_id": 86557302, "body": "just define a <code>is_delayed</code> method within that class that would return a boolean value"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 6162574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bmbhy.jpg?s=128&g=1", "display_name": "Raza Aslam", "link": "https://stackoverflow.com/users/6162574/raza-aslam"}, "edited": false, "score": 0, "creation_date": 1523443653, "post_id": 49771279, "comment_id": 86560952, "body": "@AshikSalamn Can you tell me is perform_now run async or not?"}, {"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "reply_to_user": {"reputation": 13, "user_id": 6162574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bmbhy.jpg?s=128&g=1", "display_name": "Raza Aslam", "link": "https://stackoverflow.com/users/6162574/raza-aslam"}, "edited": false, "score": 0, "creation_date": 1523445200, "post_id": 49771279, "comment_id": 86561981, "body": "<code>perform_now</code> will execute the job immediately without enqueuing."}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 3, "last_activity_date": 1523438565, "creation_date": 1523438565, "answer_id": 49771279, "question_id": 49771027, "link": "https://stackoverflow.com/questions/49771027/run-active-job-method-in-background-or-not-depends-on-scenario/49771279#49771279", "title": "Run active job method in background or not depends on scenario", "body": "<p>You can use <code>perform_now</code> or <code>perform_later</code> accordingly.</p>\n\n<pre><code>class UpdateUserNameJob &lt; ActiveJob::Base\n  queue_as :default\n\n  def perform(user_id, name)\n    user = User.find_by_id(user_id)\n    user.update_attribute(:name, name)\n  end\nend\n</code></pre>\n\n<p>Delay job execution based on <code>is_delay</code> value</p>\n\n<pre><code>if is_delayed\n  UpdateUserNameJob.perform_later(user_id, name)\nelse\n  UpdateUserNameJob.perform_now(user_id, name)\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6162574, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bmbhy.jpg?s=128&g=1", "display_name": "Raza Aslam", "link": "https://stackoverflow.com/users/6162574/raza-aslam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 386, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523438565, "creation_date": 1523437835, "last_edit_date": 1523437903, "question_id": 49771027, "link": "https://stackoverflow.com/questions/49771027/run-active-job-method-in-background-or-not-depends-on-scenario", "title": "Run active job method in background or not depends on scenario", "body": "<p>I am using active job to run my job in background.But i want to run one job in background in one scenario and run that job not in background in other scenario.Let me know how i can do that?</p>\n\n<p>For example:</p>\n\n<pre><code>def update_name(user_id, name)\n user = User.find_by_id(user_id)\n user.update_attribute(:name, name)\nend\nhandle_asynchronously :update_name, if is_delayed\n</code></pre>\n\n<p>In this example i am run update_name method in background if is_delayed is true.If is_delayed is false then update_name will not run in background.So is there anyway in active job to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec"], "comments": [{"owner": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1523437762, "post_id": 49770871, "comment_id": 86556857, "body": "Thanks that worked, I just wasn&#39;t seeing it."}], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 3177310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8f0e457fb3ebf0ea43ed2bb443fc28b2?s=128&d=identicon&r=PG&f=1", "display_name": "Poilon", "link": "https://stackoverflow.com/users/3177310/poilon"}, "edited": false, "score": 0, "creation_date": 1523441552, "post_id": 49771037, "comment_id": 86559574, "body": "the second one should be pluralize too"}], "tags": [], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "is_accepted": false, "score": 2, "last_activity_date": 1523441569, "last_edit_date": 1523441569, "creation_date": 1523437857, "answer_id": 49771037, "question_id": 49770871, "link": "https://stackoverflow.com/questions/49770871/what-does-this-error-mean-undefined-method-klass-for-nilnilclass/49771037#49771037", "title": "What does this error mean? undefined method `klass&#39; for nil:NilClass", "body": "<p>You have a typo. You will need to pluralize your <code>has_many</code> through association like so:</p>\n\n<p>template:</p>\n\n<pre><code>has_many :patients, through: :patient_templates, dependent: :destroy\n</code></pre>\n\n<p>Patient</p>\n\n<pre><code>has_many :templates, through: :patient_templates, dependent: :destroy\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1747, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1523441569, "creation_date": 1523437367, "last_edit_date": 1523437420, "question_id": 49770871, "link": "https://stackoverflow.com/questions/49770871/what-does-this-error-mean-undefined-method-klass-for-nilnilclass", "title": "What does this error mean? undefined method `klass&#39; for nil:NilClass", "body": "<p>I'm currently doing a has_many :through association, and I keep getting this error</p>\n\n<pre><code>   NoMethodError:\n   undefined method `klass' for nil:NilClass\n</code></pre>\n\n<p>This is the way I relate my classes</p>\n\n<p>MODELS:\n   Patient</p>\n\n<pre><code>   has_many :patient_templates\n   has_many :templates, through: :patient_template, dependent: :destroy\n</code></pre>\n\n<p>Template</p>\n\n<pre><code>   has_many :patient_templates\n   has_many :patients, through: :patient_template, dependent: :destroy\n</code></pre>\n\n<p>Patient_template</p>\n\n<pre><code>   belongs_to :patient\n   belongs_to :template\n</code></pre>\n\n<p>MIGRATION</p>\n\n<p>Patient_template</p>\n\n<pre><code>   def change\n    create_table :patient_templates do |t|\n      t.datetime :delivery\n      t.belongs_to :patient, index: true\n      t.belongs_to :template, index: true\n\n      t.timestamps null: false\n    end\n   end\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1523436969, "post_id": 49770562, "comment_id": 86556231, "body": "<i>Sidenote:</i> <code>data[&#39;server&#39;][&#39;host&#39;] = #{Server.Host}</code> and <code>data[&#39;server&#39;][&#39;host&#39;][&#39;user&#39;] = #{Server.Host.User}</code> is not possible simultaneously."}, {"owner": {"reputation": 115, "user_id": 5630260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bf5dd9a49c3c5e97cf9ef931d9a20e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/5630260/harry"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523537779, "post_id": 49770562, "comment_id": 86608693, "body": "Thanks, @mudasobwa. I fixed my question."}], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 5630260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bf5dd9a49c3c5e97cf9ef931d9a20e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/5630260/harry"}, "edited": false, "score": 0, "creation_date": 1523539356, "post_id": 49770960, "comment_id": 86609942, "body": "Sorry, it doesn&#39;t solve my problem. The location <code>data[&#39;server&#39;][&#39;host&#39;][&#39;name&#39;]</code> will be built dynamically, via a loop that will go through a nested Hash. The only way I found to do it was to append to the string the last key of the Hash. At the end, I have a string <code>&quot;data[&#39;server&#39;][&#39;host&#39;][&#39;name&#39;]&quot;</code>, which I was thinking on converting to a variable <code>data[&#39;server&#39;][&#39;host&#39;][&#39;name&#39;]</code> and then assigning to this variable the value <code>#{Server.Host.Name}</code>. Reading my question I&#39;m not sure if this is clear, I hope this helps to clarify it. I have updated my question."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 115, "user_id": 5630260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bf5dd9a49c3c5e97cf9ef931d9a20e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/5630260/harry"}, "edited": false, "score": 0, "creation_date": 1523544788, "post_id": 49770960, "comment_id": 86614063, "body": "Please show a <code>development.yml</code> part that is responsible for these keys."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 115, "user_id": 5630260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bf5dd9a49c3c5e97cf9ef931d9a20e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/5630260/harry"}, "edited": false, "score": 0, "creation_date": 1523601406, "post_id": 49770960, "comment_id": 86635933, "body": "It did not get cleaner. You constantly mention <code>&#39;host&#39;</code> key in your hash and your sample does not have any trail of it. Please take a time to state clearly, what is the input, and what is the expected output. For the example posted there is no need to create any hash keys dynamically, they don\u2019t differ in input and in output."}, {"owner": {"reputation": 115, "user_id": 5630260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bf5dd9a49c3c5e97cf9ef931d9a20e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/5630260/harry"}, "edited": false, "score": 0, "creation_date": 1523608889, "post_id": 49770960, "comment_id": 86639826, "body": "Ok, lemme puts some details here. First, the examples above and below in the question were not from the same set. It&#39;s fixed now. Second, if you think they don&#39;t differ from each other, it&#39;s not clear what I&#39;m asking. <code>user: #{Server.Test.User}</code> is an example of the output, there&#39;s no interpolation there. <code>#{Server.Test.User}</code> is a placeholder that will be completely replaced by another tool, which in the end will be <code>user: &#39;test&#39;</code>. This is not part of the question, but this is the whole reason for this script."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1523437650, "creation_date": 1523437650, "answer_id": 49770960, "question_id": 49770562, "link": "https://stackoverflow.com/questions/49770562/update-hash-values-with-hash-key/49770960#49770960", "title": "Update hash values with hash key", "body": "<p>Use <a href=\"https://ruby-doc.org/core/String.html#method-i-25\" rel=\"nofollow noreferrer\"><code>String#%</code></a>:</p>\n\n<pre><code>input = %|\n  data['server']['host']['name'] = %{server_host}\n  data['server']['host']['user'] = %{server_host_user}\n  data['server']['host']['password'] = %{server_host_password}\n|\nputs (\n  input % {server_host: \"Foo\",\n           server_host_user: \"Bar\",\n           server_host_password: \"Baz\"})\n#\u21d2 data['server']['host']['name'] = Foo\n#  data['server']['host']['user'] = Bar\n#  data['server']['host']['password'] = Baz\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 5630260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bf5dd9a49c3c5e97cf9ef931d9a20e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/5630260/harry"}, "edited": false, "score": 0, "creation_date": 1523537971, "post_id": 49770977, "comment_id": 86608845, "body": "Sorry, I think my question was not clear. The map to the location will be built dynamically and the value to be updated there will be also dynamically created based on the mapping."}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 0, "last_activity_date": 1523437700, "creation_date": 1523437700, "answer_id": 49770977, "question_id": 49770562, "link": "https://stackoverflow.com/questions/49770562/update-hash-values-with-hash-key/49770977#49770977", "title": "Update hash values with hash key", "body": "<p>You can not add key-value pair to a string.</p>\n\n<pre><code>data['server']['host'] # =&gt; which results in a string\n</code></pre>\n\n<p>Option 1:</p>\n\n<p>You can either save <code>Server.Host</code> as host name in the hash</p>\n\n<pre><code>data['server']['host']['name'] = \"#{Server.Host}\"\ndata['server']['host']['user'] = \"#{Server.Host.User}\"\ndata['server']['host']['password'] = \"#{Server.Host.Password}\"\n</code></pre>\n\n<p>Option 2:</p>\n\n<p>You can construct the hash in a single step with Host as key.</p>\n\n<pre><code>data['server']['host'] = { \"#{Server.Host}\" =&gt; { \n                              'user' =&gt; \"#{Server.Host.User}\",\n                              'password' =&gt; \"#{Server.Host.Password}\"\n                            } \n                          }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 115, "user_id": 5630260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bf5dd9a49c3c5e97cf9ef931d9a20e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/5630260/harry"}, "edited": false, "score": 0, "creation_date": 1523624866, "post_id": 49813023, "comment_id": 86649980, "body": "For me this is enough for a solution. Just one question about your solution: is there a way to achieve that without adding a gem?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 115, "user_id": 5630260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bf5dd9a49c3c5e97cf9ef931d9a20e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/5630260/harry"}, "edited": false, "score": 1, "creation_date": 1523625059, "post_id": 49813023, "comment_id": 86650082, "body": "@Harry sure, this gem is open source; feel free to borrow any code that is needed from it (I am the author of this gem, so I proudly grant you an ability to do whatever you want with it.)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1523609801, "creation_date": 1523609801, "answer_id": 49813023, "question_id": 49770562, "link": "https://stackoverflow.com/questions/49770562/update-hash-values-with-hash-key/49813023#49813023", "title": "Update hash values with hash key", "body": "<p>I am posting another answer now since I realize what the question is all about.</p>\n\n<p>Use <a href=\"https://github.com/am-kantox/iteraptor\" rel=\"nofollow noreferrer\"><code>Iteraptor</code></a> gem:</p>\n\n<pre><code>require 'iteraptor'\nrequire 'yaml'\n\n# or load from file\nyaml = &lt;&lt;-YAML.squish\napi: 'active'\nserver:\n  test:\n    user: 'test'\n    password: 'passwordfortest'\n  prod:\n    user: 'nottest'\n    password: 'morecomplicatedthantest'\nYAML\n\nmapped =\n  yaml.iteraptor.map(full_parent: true) do |parent, (k, _)|\n    v = parent.map(&amp;:capitalize).join('.')\n    [k, \"\\#{#{v}}\"]\n  end\n\nputs YAML.dump(mapped)\n#\u21d2 ---\n#  api: \"#{Api}\"\n#  server:\n#    test:\n#      user: \"#{Server.Test.User}\"\n#      password: \"#{Server.Test.Password}\"\n#    prod:\n#      user: \"#{Server.Prod.User}\"\n#      password: \"#{Server.Prod.Password}\"\n\nputs YAML.dump(mapped).delete('\"')\n#\u21d2 ---\n#  api: #{Api}\n#  server:\n#    test:\n#      user: #{Server.Test.User}\n#      password: #{Server.Test.Password}\n#    prod:\n#      user: #{Server.Prod.User}\n#      password: #{Server.Prod.Password}\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 5630260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bf5dd9a49c3c5e97cf9ef931d9a20e1?s=128&d=identicon&r=PG&f=1", "display_name": "Harry", "link": "https://stackoverflow.com/users/5630260/harry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 187, "favorite_count": 0, "accepted_answer_id": 49813023, "answer_count": 3, "score": 0, "last_activity_date": 1523609801, "creation_date": 1523436403, "last_edit_date": 1523608578, "question_id": 49770562, "link": "https://stackoverflow.com/questions/49770562/update-hash-values-with-hash-key", "title": "Update hash values with hash key", "body": "<p>I'm facing a problem that I couldn't find a working solution yet.</p>\n\n<p>I have my YAML config file for the environment, let's call it <code>development.yml</code>.</p>\n\n<p>This file is used to create the hash that should be updated:</p>\n\n<pre><code>data = YAML.load_file(File.join(Rails.root, 'config', 'environments', 'development.yml'))\n</code></pre>\n\n<p>What I'm trying to accomplish is something along these lines. Let's suppose we have an element of the sort</p>\n\n<pre><code>data['server']['test']['user']\ndata['server']['test']['password']\n</code></pre>\n\n<p>What I want to have is:</p>\n\n<pre><code>data['server']['test']['user'] = #{Server.Test.User}\ndata['server']['test']['password'] = #{Server.Test.Password}\n</code></pre>\n\n<p>The idea is to create a placeholder for each value that is the key mapping for that value dynamically, going until the last level of the hash and replacing the value with the mapping to this value, concatenating the keys.</p>\n\n<p>Sorry, it doesn't solve my problem. The location <code>data['server']['test']['user']</code> will be built dynamically, via a loop that will go through a nested Hash. The only way I found to do it was to append to the string the key for the current iteration of the Hash. At the end, I have a string like <code>\"data['server']['test']['name']\"</code>, which I was thinking on converting to a variable <code>data['server']['test']['name']</code> and then assigning to this variable the value <code>#{Server.Test.Name}</code>. Reading my question I'm not sure if this is clear, I hope this helps to clarify it.</p>\n\n<p>Input sample:</p>\n\n<pre><code>api: 'active'\nserver:\n  test:\n    user: 'test'\n    password: 'passwordfortest'\n  prod:\n    user: 'nottest'\n    password: 'morecomplicatedthantest'\n</code></pre>\n\n<p>In this case, the final result should be to update this yml file in this way:</p>\n\n<pre><code>api: #{Api}\nserver:\n  test:\n    user: #{Server.Test.User}\n    password: #{Server.Test.Password}\n  prod:\n    user: #{Server.Prod.User}\n    password: #{Server.Prod.Password}\n</code></pre>\n\n<p>It sounds silly, but I couldn't figure out a way to do it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1523434530, "last_edit_date": 1523434530, "creation_date": 1523433900, "answer_id": 49769699, "question_id": 49769472, "link": "https://stackoverflow.com/questions/49769472/nomethoderror-in-postsshow-geocoder/49769699#49769699", "title": "NoMethodError in Posts#show geocoder", "body": "<p>I think you have not migrated these two columns so run a command for migrating these two columns it looks like this</p>\n\n<pre><code>rails g migration AddLatitudeAndLongitudeToPost latitude:float longitude:float\n</code></pre>\n\n<p>then run</p>\n\n<pre><code>rake db:migrate #=&gt; or rails\n</code></pre>\n\n<p>See this <a href=\"https://github.com/alexreisner/geocoder#object-geocoding\" rel=\"nofollow noreferrer\"><code>Object Geocoding</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 16757, "user_id": 5654404, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/746f3e19ba3d2c092e951129a114391a?s=128&d=identicon&r=PG&f=1", "display_name": "Sravan", "link": "https://stackoverflow.com/users/5654404/sravan"}, "is_accepted": false, "score": 1, "last_activity_date": 1523433962, "creation_date": 1523433962, "answer_id": 49769721, "question_id": 49769472, "link": "https://stackoverflow.com/questions/49769472/nomethoderror-in-postsshow-geocoder/49769721#49769721", "title": "NoMethodError in Posts#show geocoder", "body": "<p>Your <code>model</code> must have two attributes (database columns) for storing <code>latitude</code> and <code>longitude</code> coordinates. </p>\n\n<p><strong>So you should add those columns via <code>migration</code>:</strong></p>\n\n<pre><code>rails generate migration AddLatitudeAndLongitudeToPost latitude:float longitude:float\n</code></pre>\n\n<p><strong>Then migrate DB:</strong></p>\n\n<pre><code>rake db:migrate\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523434660, "creation_date": 1523433179, "last_edit_date": 1523434660, "question_id": 49769472, "link": "https://stackoverflow.com/questions/49769472/nomethoderror-in-postsshow-geocoder", "title": "NoMethodError in Posts#show geocoder", "body": "<p>So I'm using the <code>geocoder</code> gem. I'm getting a method error in <code>posts#show</code> on line 8. It's basically saying that longitude is undefined.  </p>\n\n<p><a href=\"https://i.stack.imgur.com/fwz1q.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fwz1q.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>_form,html.erb</strong></p>\n\n<pre><code> &lt;%= form_with(model: post, local: true) do |form| %&gt;\n  &lt;% if post.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n       &lt;h2&gt;&lt;%= pluralize(post.errors.count, \"error\") %&gt; prohibited this \n    post from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% post.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :date %&gt;\n    &lt;%= form.datetime_select :date, id: :post_date %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :name %&gt;\n    &lt;%= form.text_area :name, id: :post_name %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"action\"&gt;\n    &lt;%= form.label :address %&gt;\n    &lt;%= form.text_area :address, id: \"post_address\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :user_id %&gt;\n    &lt;%= form.number_field :user_id, id: :post_user_id, value: current_user.id %&gt;\n\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :description %&gt;\n    &lt;%= form.text_area :description, id: :post_description %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>post.rb</strong></p>\n\n<pre><code>class Post &lt; ApplicationRecord\n belongs_to :user\n geocoded_by :address\n after_validation :geocode, if: :address_changed?\nend\n</code></pre>\n\n<p><strong>show.html.erb</strong></p>\n\n<pre><code> &lt;p&gt; where: &lt;%=@post.longitude %&gt;, &lt;%=@post.latitude%&gt;&lt;/p&gt;\n</code></pre>\n\n<p><strong>posts_controller_rb</strong></p>\n\n<pre><code>def post_params\n      params.require(:post).permit(:date, :user_id, :description, :name, :address)\nend\nload_and_authorize_resource\n</code></pre>\n\n<p>I'm not exactly sure what the error is but I'm sure there's something wrong. I've tried looking into this problem but with no success. I would appreciate the help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "rspec", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 646, "user_id": 1140726, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/2QYng.jpg?s=128&g=1", "display_name": "Dono", "link": "https://stackoverflow.com/users/1140726/dono"}, "is_accepted": false, "score": 0, "last_activity_date": 1525857080, "creation_date": 1525857080, "answer_id": 50249596, "question_id": 49769418, "link": "https://stackoverflow.com/questions/49769418/emulating-mobile-browsers-on-capybara/50249596#50249596", "title": "Emulating mobile browsers on Capybara", "body": "<p>A few years since I had this same problem, but I used GenyMotion with Appium and xCode iOS simulator. However I had to use an old version of xCode as the later versions no longer had Safari as a default app in the emulators anymore. </p>\n\n<p>No idea if this has changed recently but worth looking into. </p>\n\n<p>The integration into Appium and then either GenyMotion/xCode was pretty straightforward and that was very well documented. <a href=\"https://appium.io/docs/en/writing-running-appium/web/mobile-web/\" rel=\"nofollow noreferrer\">https://appium.io/docs/en/writing-running-appium/web/mobile-web/</a> seems to be a good start. </p>\n"}], "owner": {"reputation": 1, "user_id": 9595963, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/788808c6d095c911d72b9500aa6b9da1?s=128&d=identicon&r=PG&f=1", "display_name": "LCPGM", "link": "https://stackoverflow.com/users/9595963/lcpgm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 300, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525857080, "creation_date": 1523433007, "last_edit_date": 1523459754, "question_id": 49769418, "link": "https://stackoverflow.com/questions/49769418/emulating-mobile-browsers-on-capybara", "title": "Emulating mobile browsers on Capybara", "body": "<p>I have to emulate mobile devices on my <em>rspec</em> + <em>capybara</em> test environment.<br>\nI have read about capability of resizing windows and setting user-agents in chrome, but it's not what I need (every browser works differently:  resolution and user-agents aren't only difference between it).<br>\nI need to emulate behavior of mobile devices in 100% (if is it possible).</p>\n\n<p>For example on <em>mobile chrome</em> some of my components work properly and breaks in <em>iOS safari</em>, this is why I want to write tests to mobile devices that check all browser each.<br>\nIt would be amazing if this emulator would show browsers navigation bars if is it possible.</p>\n\n<p>Do you know any good technologies, emulators, gems etc. that can help me? I thought about downloading some emulators and set it as browsers in <em>capybara</em> config, but maybe it's not best idea and I haven't found any tutorials/docs how to do that. Thanks for help.</p>\n"}, {"tags": ["ruby", "methods", "module", "overriding"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523445182, "post_id": 49768744, "comment_id": 86561964, "body": "Your question is unclear. Where, exactly, in your code are you using <code>prepend</code>? I don&#39;t see it anywhere. All you are doing is to define a new module <code>MyParty::SeeminglyUntouchable</code>, but you don&#39;t do anything with it."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1523451572, "post_id": 49768744, "comment_id": 86566528, "body": "What about submitting a PR to the gem owner to make said functionality configurable? Monkey matching, especially private methods, only leads to problems in the long term."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1523431183, "creation_date": 1523431183, "answer_id": 49768847, "question_id": 49768744, "link": "https://stackoverflow.com/questions/49768744/overriding-3rd-party-private-method-in-ruby-module/49768847#49768847", "title": "Overriding 3rd party private method in ruby module?", "body": "<p>It\u2019d be a hacky, but working approach:</p>\n\n<pre><code>ThirdPartyGem::SeeminglyUntouchable.send(\n  :undef_method, :hidden_interface)\nThirdPartyGem::SeeminglyUntouchable.send(\n  :define_method, :hidden_interface, -&gt;(chunky){ chunky.upcase })\nThirdPartyGem::SeeminglyUntouchable.send(\n  :private, :hidden_interface)\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9628983, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8d248868c5e920586531b044bba919b5?s=128&d=identicon&r=PG&f=1", "display_name": "whistler", "link": "https://stackoverflow.com/users/9628983/whistler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 203, "favorite_count": 0, "accepted_answer_id": 49768847, "answer_count": 1, "score": 0, "last_activity_date": 1523431183, "creation_date": 1523430853, "question_id": 49768744, "link": "https://stackoverflow.com/questions/49768744/overriding-3rd-party-private-method-in-ruby-module", "title": "Overriding 3rd party private method in ruby module?", "body": "<p>Is there a way to override private method from a 3rd party module (contained in gem)? I tried to use prepend but the original module seems to be getting into method lookup chain no matter what i do. Here's simplified example that illustrates the issue:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\n# some external library\nclass ThirdPartyGem\n  module SeeminglyUntouchable\n    extend self\n\n    def basic_interface( something )\n      hidden_interface( something )\n    end\n\n    private def hidden_interface( bacon )\n      bacon.capitalize\n    end\n  end\n\n  def initialize( food )\n    puts SeeminglyUntouchable.basic_interface( food )\n  end\nend\n\n# my own code\nclass MyParty &lt; ThirdPartyGem\n  module SeeminglyUntouchable\n    private def hidden_interface( chunky )\n      chunky.upcase\n    end\n  end\nend\n\nMyParty.new( \"i wish this was all upcase\" )\n</code></pre>\n\n<p>FWIW - Ruby version 2.5.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 0, "creation_date": 1523428786, "post_id": 49767928, "comment_id": 86551435, "body": "@AshikSalman almost, but in this question the receiver is an instance (e.g. <code>&#39;miguel&#39;</code>), in the other question it is the class itself (e.g. <code>String</code>)."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523439527, "post_id": 49767928, "comment_id": 86558109, "body": "It would be helpful if you could explain what <i>precisely</i> is unclear to you about the documentation of <code>Object#methods</code>, so that the Ruby developers can improve the documentation for future users."}, {"owner": {"reputation": 622, "user_id": 6115334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5852523fc4bc472814af98afc8c20ee3?s=128&d=identicon&r=PG", "display_name": "Miguel Salas", "link": "https://stackoverflow.com/users/6115334/miguel-salas"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523474717, "post_id": 49767928, "comment_id": 86581261, "body": "@J&#246;rgWMittag perhaps is because the name of the method <code>:methods</code> but I could not found where it was defined. Thanks for pointing at it, I should have guess that is was in <code>Object</code>"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1523519535, "post_id": 49767928, "comment_id": 86596523, "body": "If you want to know where a method is defined, you can just ask it: <code>&#39;&#39;.method(:methods).owner</code>. There is also a search function on the Ruby-Doc.Org site that lets you search for methods. (This is handy, because in YARV, from which the docs are generated, some methods are actually defined on <code>Kernel</code> but documented on <code>Object</code>, which can be confusing.)"}], "answers": [{"comments": [{"owner": {"reputation": 622, "user_id": 6115334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5852523fc4bc472814af98afc8c20ee3?s=128&d=identicon&r=PG", "display_name": "Miguel Salas", "link": "https://stackoverflow.com/users/6115334/miguel-salas"}, "edited": false, "score": 0, "creation_date": 1523428724, "post_id": 49767997, "comment_id": 86551395, "body": "will this include the methods defined by modules included into the class <code>String</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 622, "user_id": 6115334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5852523fc4bc472814af98afc8c20ee3?s=128&d=identicon&r=PG", "display_name": "Miguel Salas", "link": "https://stackoverflow.com/users/6115334/miguel-salas"}, "edited": false, "score": 0, "creation_date": 1523428978, "post_id": 49767997, "comment_id": 86551535, "body": "@MiguelSalas no, it does not (just give it a try). On the other hand, it doesn&#39;t include singleton methods, either."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523429747, "post_id": 49767997, "comment_id": 86551941, "body": "Beware of <code>&#39;miguel&#39;.extend(Module.new { def foo; :bar; end }).class.instance_methods(false).detect { |m| m == :foo } #\u21d2\u00a0nil</code>. That said, methods that are defined on the instance itself won\u2019t be returned by this call."}, {"owner": {"reputation": 622, "user_id": 6115334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5852523fc4bc472814af98afc8c20ee3?s=128&d=identicon&r=PG", "display_name": "Miguel Salas", "link": "https://stackoverflow.com/users/6115334/miguel-salas"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523431135, "post_id": 49767997, "comment_id": 86552705, "body": "@mudasobwa yes, that is what @Stefan  meant with <code>singleton methods</code>  methods that belong to a singleton class. By the way people call that  &#39;anonymous classes&#39; by many names singleton class, eigenclass, ghost class (Dave Thomas) and anonymous class are all synonymous in this context."}], "tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 1, "last_activity_date": 1523428186, "creation_date": 1523428186, "answer_id": 49767997, "question_id": 49767928, "link": "https://stackoverflow.com/questions/49767928/how-to-list-instance-methods-of-an-object-class-without-listing-the-methods-of-t/49767997#49767997", "title": "How to list instance methods of an object class without listing the methods of the superclasses", "body": "<p>Try this:</p>\n\n<pre><code>class.instance_methods(false)\n</code></pre>\n\n<p>Here for string as example:</p>\n\n<pre><code>'miguel'.class.instance_methods(false)\n</code></pre>\n"}], "owner": {"reputation": 622, "user_id": 6115334, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5852523fc4bc472814af98afc8c20ee3?s=128&d=identicon&r=PG", "display_name": "Miguel Salas", "link": "https://stackoverflow.com/users/6115334/miguel-salas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523429579, "creation_date": 1523427918, "last_edit_date": 1523429433, "question_id": 49767928, "link": "https://stackoverflow.com/questions/49767928/how-to-list-instance-methods-of-an-object-class-without-listing-the-methods-of-t", "title": "How to list instance methods of an object class without listing the methods of the superclasses", "body": "<p>The method <code>methods</code> returns a list of all methods of a class, for example if I call <code>'miguel'.methods</code>, I will get a list of all the methods in the class <code>String</code>.</p>\n\n<p>I would like to list the methods of a class, excluding the methods of its superclasses. For example, a list of instance methods that are defined on <code>String</code>, including modules included into <code>String</code>.</p>\n\n<p>I also would like to know how to list instance methods that are exclusively defined on the object class without listing instance methods included in modules included by the class.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "checkbox", "boolean-operations"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1523424937, "post_id": 49767109, "comment_id": 86549692, "body": "What have you tried so far?"}, {"owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1523425413, "post_id": 49767109, "comment_id": 86549882, "body": "@Harini do you want only button named block and unblock instead of submit button and checkbox?"}, {"owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "reply_to_user": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "edited": false, "score": 0, "creation_date": 1523425962, "post_id": 49767109, "comment_id": 86550117, "body": "@Gabbar i want a button which must change the boolean function and then submit"}], "answers": [{"tags": [], "owner": {"reputation": 6942, "user_id": 4172515, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/BYWxd.jpg?s=128&g=1", "display_name": "fool-dev", "link": "https://stackoverflow.com/users/4172515/fool-dev"}, "is_accepted": false, "score": 0, "last_activity_date": 1523428255, "last_edit_date": 1523428255, "creation_date": 1523426170, "answer_id": 49767500, "question_id": 49767109, "link": "https://stackoverflow.com/questions/49767109/checkbox-function-to-button/49767500#49767500", "title": "Checkbox function to button", "body": "<p><strong>Update</strong></p>\n\n<p>You can simply do this </p>\n\n<pre><code>&lt;% if user.active? %&gt;    \n  &lt;%= button_to user_path(id: user.id, value: false), data: {confirm: 'Are you sure?'}, method: :patch, class: 'btn btn-default btn-danger' do %&gt;\n  Unblock\n  &lt;% end %&gt;\n&lt;% else %&gt;\n  &lt;%= button_to user_path(id: user.id, value: true), data: {confirm: 'Are you sure?'}, method: :patch, class: 'btn btn-default btn-danger' do %&gt;\n  block\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Old</strong></p>\n\n<p>So, you need to a checkbox when you click to check that is <code>true</code> otherwise that is <code>false</code>, right? You can do this using <code>hiddent_field</code> which value by default is <code>false</code> like </p>\n\n<pre><code>&lt;%= form.hidden_field :active, 'false' %&gt;\n</code></pre>\n\n<p>so code look like this</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n    &lt;%= form.label :active %&gt;\n    &lt;%= form.hidden_field :active, 'false' %&gt;\n    &lt;%= form.check_box :active, true %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>look when I check the checkbox and submit then params hash look like this</p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"UKbxyz...==\", \"active\"=&gt;\"true\", \"commit\"=&gt;\"Submit\"}\n</code></pre>\n\n<p>when unchecking the checkbox then </p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"UKbxyz...==\", \"active\"=&gt;\"false\", \"commit\"=&gt;\"Submit\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": false, "score": 0, "last_activity_date": 1523428756, "last_edit_date": 1523428756, "creation_date": 1523428066, "answer_id": 49767967, "question_id": 49767109, "link": "https://stackoverflow.com/questions/49767109/checkbox-function-to-button/49767967#49767967", "title": "Checkbox function to button", "body": "<p><a href=\"https://apidock.com/rails/ActionView/Helpers/UrlHelper/button_to\" rel=\"nofollow noreferrer\">butto_to</a> tag itself creates form so, and model's errors should not come inside <code>form_with</code> so here by i have modified your code , please have a look</p>\n\n<pre><code>  &lt;% if user.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(user.errors.count, \"error\") %&gt; prohibited this user from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% user.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% if user.active? %&gt; \n    &lt;%= button_to user_path(value: false, id: user.id), data: {confirm: 'Are you sure?'}, method: :patch, class: 'btn btn-default btn-danger' do %&gt;\n      Unblock\n    &lt;% end %&gt;\n&lt;%else%&gt;\n    &lt;%= button_to user_path(value: true, id: user.id), data: {confirm: 'Are you sure?'}, method: :patch, class: 'btn btn-default btn-danger' do %&gt;\n      Block\n    &lt;% end %&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>At this point you would need to provide two parameter <code>value</code>, and <code>user</code> (to which user's status will be changed) with <code>button_to</code></p>\n\n<p>But the issue is on clicking the button block/unblock it will hit update action and at this action you will get <code>params[:value] = false</code> and <code>params[:id] = \"2\"</code></p>\n\n<p>and this won't work because at update action you are handling params in strong parameter, what i mean you are expecting <code>params[:user][:value]</code> which will return you <code>nil</code> but you are getting it as <code>params[:value]</code> so it should be like this: -</p>\n\n<pre><code>def update\n  if @user.update(active: params[:value])\n    respond_to do |format|\n      format.html { redirect_to @user, notice: 'User was successfully updated.' }\n      format.html { render :edit }\n    end\n  end\nend\n</code></pre>\n\n<h1>update</h1>\n\n<p>As you have updated your using block method to change <code>active</code> status of user so in this case don't forget to use this <code>path</code> and <code>method</code> with <code>button_to</code>\nexample: - suppose your path is <code>user_block_path</code>\nthen:-</p>\n\n<pre><code>&lt;%= button_to user_block_path(value: false, id: user.id), data: {confirm: 'Are you sure?'}, method: :patch, class: 'btn btn-default btn-danger' do %&gt;\n  Unblock\n&lt;% end %&gt;\n</code></pre>\n\n<p>//controller</p>\n\n<pre><code>def block\n  user = User.find(params[:id])\n  user.update(active: params[:value])\nend\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1523428756, "creation_date": 1523424293, "last_edit_date": 1523426658, "question_id": 49767109, "link": "https://stackoverflow.com/questions/49767109/checkbox-function-to-button", "title": "Checkbox function to button", "body": "<p>i have boolean function in checkbox. when the checkbox is selected and submitted it will be true. now i need a button named unblock in which when i press it first time it must be true and get submitted and the button name must change to block. and on second click it must change to false.</p>\n\n<p>my controller code</p>\n\n<pre><code>def index\n    @users = User.all\nend\n\ndef edit\nend\n\ndef update\n  respond_to do |format|\n    if @user.update(user_params)\n      format.html { redirect_to @user, notice: 'User was successfully updated.' }\n    else\n      format.html { render :edit }\n    end\n  end\nend\n\nprivate\n  # Use callbacks to share common setup or constraints between actions.\ndef set_user\n    @user = User.find(params[:id])\nend\n\n  # Never trust parameters from the scary internet, only allow the white list through.\ndef user_params\n    params.require(:user).permit(:active)\nend\n</code></pre>\n\n<p>my view code</p>\n\n<pre><code>&lt;%= form_with(model: user, local: true) do |form| %&gt;\n      &lt;% if user.errors.any? %&gt;\n        &lt;div id=\"error_explanation\"&gt;\n          &lt;h2&gt;&lt;%= pluralize(user.errors.count, \"error\") %&gt; prohibited this user from being saved:&lt;/h2&gt;\n\n          &lt;ul&gt;\n          &lt;% user.errors.full_messages.each do |message| %&gt;\n            &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n          &lt;% end %&gt;\n          &lt;/ul&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n\n      &lt;div class=\"field\"&gt;\n        &lt;%= form.label :active %&gt;\n        &lt;%= form.check_box :active %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"actions\"&gt;\n        &lt;%= form.submit %&gt;\n      &lt;/div&gt;\n &lt;% end %&gt;\n</code></pre>\n\n<p>Can anyone help me with it.</p>\n\n<p>What I have tried</p>\n\n<p>view Code</p>\n\n<pre><code>&lt;% if user.active? %&gt;    \n  &lt;%= button_to user_path(value: false), data: {confirm: 'Are you sure?'}, method: :patch, class: 'btn btn-default btn-danger' do %&gt;\n  Unblock\n  &lt;% end %&gt;\n&lt;%else%&gt;\n  &lt;%= button_to user_path(value: true), data: {confirm: 'Are you sure?'}, method: :patch, class: 'btn btn-default btn-danger' do %&gt;\n  block\n  &lt;% end %&gt;\n&lt;%end%&gt;\n</code></pre>\n\n<p>Controller code</p>\n\n<pre><code>def block\n  user = User.find(params[:id])\n  user.update(active: params[:value])\nend\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby", "sinatra", "repl.it"], "answers": [{"comments": [{"owner": {"reputation": 514, "user_id": 6856276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ecAKM.jpg?s=128&g=1", "display_name": "globewalldesk", "link": "https://stackoverflow.com/users/6856276/globewalldesk"}, "edited": false, "score": 0, "creation_date": 1523543457, "post_id": 49767513, "comment_id": 86613034, "body": "Thanks, nailed it. Fixed. You can see the result here: <a href=\"https://madlibs--lsanger.repl.co/\" rel=\"nofollow noreferrer\">madlibs--lsanger.repl.co</a>  I had already done that...I thought. I discovered that the root problem for me was that I had made the change in a different window from the one I started in, and repl.it apparently doesn&#39;t propagate its changes to code to multiple open windows. So the changes I was making that would have solved the problem weren&#39;t &quot;taking.&quot;"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 514, "user_id": 6856276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ecAKM.jpg?s=128&g=1", "display_name": "globewalldesk", "link": "https://stackoverflow.com/users/6856276/globewalldesk"}, "edited": false, "score": 1, "creation_date": 1523543945, "post_id": 49767513, "comment_id": 86613475, "body": "@globewalldesk glad to help. I didn&#39;t evenn realize repl.it could run web servers, it&#39;s pretty cool"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1523426218, "creation_date": 1523426218, "answer_id": 49767513, "question_id": 49765771, "link": "https://stackoverflow.com/questions/49765771/ruby-sinatra-jquery-app-not-running-in-repl-it/49767513#49767513", "title": "Ruby/Sinatra/jQuery app not running in repl.it", "body": "<p>You need to add </p>\n\n<pre><code>set :bind, '0.0.0.0'\n</code></pre>\n\n<p>You can see <a href=\"https://repl.it/languages/sinatra\" rel=\"nofollow noreferrer\">https://repl.it/languages/sinatra</a> for an example.</p>\n\n<p>This is something you frequently need to do when running web servers on remote machines, since they forward requests from the public internet to this IP address.</p>\n\n<p>I forked this and made the change, and although there was another error (can't find main.erb), it at least solves the issue this question is about.</p>\n"}], "owner": {"reputation": 514, "user_id": 6856276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ecAKM.jpg?s=128&g=1", "display_name": "globewalldesk", "link": "https://stackoverflow.com/users/6856276/globewalldesk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 49767513, "answer_count": 1, "score": 1, "last_activity_date": 1523426218, "creation_date": 1523415395, "question_id": 49765771, "link": "https://stackoverflow.com/questions/49765771/ruby-sinatra-jquery-app-not-running-in-repl-it", "title": "Ruby/Sinatra/jQuery app not running in repl.it", "body": "<p>My <a href=\"https://github.com/globewalldesk/madlibs.js\" rel=\"nofollow noreferrer\">mad libs game</a> (Ruby/Sinatra backend, most logic is JS/jQuery, data is stored in json files) runs fine on my Mac and my Ubuntu VirtualBox, but when I installed it on repl.it (and made a few changes that seemed indicated by their example script).</p>\n\n<p>When I \"start\" the script <a href=\"https://repl.it/@lsanger/madlibs\" rel=\"nofollow noreferrer\">on repl.it, here</a>, I get the following error message at the location where it's <a href=\"https://madlibs--lsanger.repl.co\" rel=\"nofollow noreferrer\">supposed to show up</a>:</p>\n\n<blockquote>\n  <p>Unable To Wake Up </p>\n  \n  <p>30 seconds.Your repl did't wake up in time. Please try again in 30 seconds.</p>\n</blockquote>\n\n<p>I've never been able to run it even once on repl.it. Any ideas about why not? I'm totally new to repl.it and I can't find any help files. It seems to be a new service.</p>\n\n<p>TIA.</p>\n"}, {"tags": ["json", "ruby", "hash", "nested", "jira-rest-api"], "answers": [{"comments": [{"owner": {"reputation": 790, "user_id": 1946418, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c6eaa268d9cbf2d460dabe3899ea5671?s=128&d=identicon&r=PG", "display_name": "scorpion35", "link": "https://stackoverflow.com/users/1946418/scorpion35"}, "edited": false, "score": 0, "creation_date": 1523456042, "post_id": 49767921, "comment_id": 86569949, "body": "Thank you for reply! I have tried all these variations, unfortunately, they throw the same error message as well."}], "tags": [], "owner": {"reputation": 115, "user_id": 9032909, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-qqukILGLCMk/AAAAAAAAAAI/AAAAAAAABP4/VznjFjsG5Uk/photo.jpg?sz=128", "display_name": "ANKUR KHUNT", "link": "https://stackoverflow.com/users/9032909/ankur-khunt"}, "is_accepted": false, "score": 0, "last_activity_date": 1523427903, "creation_date": 1523427903, "answer_id": 49767921, "question_id": 49764843, "link": "https://stackoverflow.com/questions/49764843/jira-api-error-operation-value-must-be-a-string-trying-to-set-value-neste/49767921#49767921", "title": "Jira API | Error: &quot;Operation value must be a string&quot; - trying to set value nested two levels deep", "body": "<p>I'm not sure but you can try this possible examples:</p>\n\n<p>eg.1:</p>\n\n<pre><code>\"customfield_23070\"=&gt;{\"name\"=&gt;\"requestType\",\"value\"=&gt;\"Awesome Request Type\"}\n</code></pre>\n\n<p>eg.2:</p>\n\n<pre><code>\"customfield_23070\"=&gt;{\"requestType\"=&gt;\"Awesome Request Type\"}\n</code></pre>\n\n<p>eg.3:</p>\n\n<pre><code>\"customfield_23070\"=&gt;{\"value\"=&gt;\"Awesome Request Type\"}\n</code></pre>\n\n<p>eg.4</p>\n\n<pre><code>\"customfield_23070\"=&gt;{\"name\"=&gt;\"Awesome Request Type\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 83, "user_id": 6655369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/566bc12343e7a7b22649a7d70ce19e0b?s=128&d=identicon&r=PG&f=1", "display_name": "Reinaldo Gomes", "link": "https://stackoverflow.com/users/6655369/reinaldo-gomes"}, "is_accepted": false, "score": 3, "last_activity_date": 1526316555, "creation_date": 1526316555, "answer_id": 50335318, "question_id": 49764843, "link": "https://stackoverflow.com/questions/49764843/jira-api-error-operation-value-must-be-a-string-trying-to-set-value-neste/50335318#50335318", "title": "Jira API | Error: &quot;Operation value must be a string&quot; - trying to set value nested two levels deep", "body": "<p>It seems that for custom fields with specific data types (string/number), you must pass the value as:</p>\n\n<pre><code>\"customfield_1111\": 1\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>\"customfield_1111\": \"string\"\n</code></pre>\n\n<p>instead of:</p>\n\n<pre><code>\"customfield_1111\":{ \"value\": 1 }\n</code></pre>\n\n<p>or:</p>\n\n<pre><code>\"customfield_1111\":{ \"value\": \"string\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7845098, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e4ffc3b8ed7a9861d4802de28aa821ef?s=128&d=identicon&r=PG&f=1", "display_name": "MikeL", "link": "https://stackoverflow.com/users/7845098/mikel"}, "is_accepted": false, "score": 0, "last_activity_date": 1542042433, "last_edit_date": 1542042433, "creation_date": 1542041333, "answer_id": 53266645, "question_id": 49764843, "link": "https://stackoverflow.com/questions/49764843/jira-api-error-operation-value-must-be-a-string-trying-to-set-value-neste/53266645#53266645", "title": "Jira API | Error: &quot;Operation value must be a string&quot; - trying to set value nested two levels deep", "body": "<p>for ref there are 2 methods depending upon the fields you are interacting with</p>\n\n<p>have a look here '\n<a href=\"https://developer.atlassian.com/server/jira/platform/updating-an-issue-via-the-jira-rest-apis-6848604/\" rel=\"nofollow noreferrer\">updating-an-issue-via-the-jira-rest-apis-6848604</a>\n' for the applicable fields for update via verb operations, the other fields you can use examples as per above, \nyou can use both methods within the same call</p>\n\n<pre><code>{\n \"update\": {\"description\": [{\"set\": \"Description by API Update - lets do this thing\"}]},\n \"fields\": {\"customfield_23310\": \"TESTING0909\"}\n}\n</code></pre>\n"}], "owner": {"reputation": 790, "user_id": 1946418, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c6eaa268d9cbf2d460dabe3899ea5671?s=128&d=identicon&r=PG", "display_name": "scorpion35", "link": "https://stackoverflow.com/users/1946418/scorpion35"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2825, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1599263349, "creation_date": 1523408110, "question_id": 49764843, "link": "https://stackoverflow.com/questions/49764843/jira-api-error-operation-value-must-be-a-string-trying-to-set-value-neste", "title": "Jira API | Error: &quot;Operation value must be a string&quot; - trying to set value nested two levels deep", "body": "<p>Trying to create a new jira ticket of specific <code>requestType</code>, but it is nested two levels deep. Tried few possible alterations, but no luck. Here's the code I have, </p>\n\n<pre><code>require 'jira-ruby' # https://github.com/sumoheavy/jira-ruby\n\noptions = {\n            :username =&gt; jira_username,\n            :password =&gt; jira_password,\n            :site     =&gt; 'https://jiraurl/rest/api/2/',\n            :context_path =&gt; '',\n            :auth_type =&gt; :basic,\n            :read_timeout =&gt; 120\n          }\n\nclient = JIRA::Client.new(options)\nissue = client.Issue.build\nfields_options = { \n  \"fields\" =&gt; \n  {\n    \"summary\"   =&gt; \"Test ticket creation\",\n    \"description\" =&gt; \"Ticket created from Ruby\",\n    \"project\"   =&gt; {\"key\" =&gt; \"AwesomeProject\"},\n    \"issuetype\" =&gt; {\"name\" =&gt; \"Task\"},\n    \"priority\" =&gt; {\"name\" =&gt; \"P1\"},\n    \"customfield_23070\" =&gt; \n    {\n      \"requestType\" =&gt; {\n        \"name\" =&gt; \"Awesome Request Type\"\n      }\n    }\n  }\n}\nissue.save(fields_options)\n</code></pre>\n\n<p><code>\"errors\"=&gt;{\"customfield_23070\"=&gt;\"Operation value must be a string\"}</code></p>\n\n<p>Also tried passing a <code>JSON</code> object to <code>customfield_23070</code>,\n<code>\"customfield_23070\": { \"requestType\": { \"name\": \"Awesome Request Type\" } }</code>\nstill no luck, get the same error message.</p>\n\n<p>If it helps, this is how <code>customfield_23070</code> looks like in our Jira, \n<a href=\"https://i.stack.imgur.com/y8KBV.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/y8KBV.png\" alt=\"enter image description here\"></a></p>\n\n<p>Does anyone know how to set <code>requestType</code> in this case, please? Any help is greatly appreciated!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523407944, "post_id": 49764750, "comment_id": 86545181, "body": "What does your <code>db&#47;schema.rb</code> file say about <code>categories</code>?"}, {"owner": {"reputation": 101, "user_id": 6425652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c1cce2c8bb0bd9a2074247a14f233b7?s=128&d=identicon&r=PG&f=1", "display_name": "goodjobbin85", "link": "https://stackoverflow.com/users/6425652/goodjobbin85"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523409438, "post_id": 49764750, "comment_id": 86545561, "body": "@Phil,  create_table &quot;categories&quot;, force: :cascade do |t|     t.string &quot;name&quot;     t.datetime &quot;created_at&quot;, null: false     t.datetime &quot;updated_at&quot;, null: false   end"}, {"owner": {"reputation": 101, "user_id": 6425652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c1cce2c8bb0bd9a2074247a14f233b7?s=128&d=identicon&r=PG&f=1", "display_name": "goodjobbin85", "link": "https://stackoverflow.com/users/6425652/goodjobbin85"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523409511, "post_id": 49764750, "comment_id": 86545586, "body": "sorry about the format, but the attribute exists in the db so im not sure why im getting the unknown attribute error"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523410361, "post_id": 49764750, "comment_id": 86545790, "body": "If you run <code>bin&#47;rails console</code>, you will probably get the <code>development</code> environment. Try your <code>.new()</code> call there. Another tip is to look at <code>Category.columns_hash.keys</code> and see if your <code>name</code> is in there."}, {"owner": {"reputation": 101, "user_id": 6425652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c1cce2c8bb0bd9a2074247a14f233b7?s=128&d=identicon&r=PG&f=1", "display_name": "goodjobbin85", "link": "https://stackoverflow.com/users/6425652/goodjobbin85"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523412432, "post_id": 49764750, "comment_id": 86546311, "body": "when i run Category.columns_hash.keys i get [&quot;id&quot;, &quot;name&quot;, &quot;created_at&quot;, &quot;updated_at&quot;]. so its there. i can also create a new category with .new and the name attribute and it works. i thought maybe theres something wrong with the test"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523412572, "post_id": 49764750, "comment_id": 86546351, "body": "Run <code>RAILS_ENV=test bin&#47;rails console</code> and try the same experiments there. Rails often has an issue where the development database is not cloned into the test database."}, {"owner": {"reputation": 1545, "user_id": 5945124, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0bdda1d3f79493ff3465001e77d9f202?s=128&d=identicon&r=PG&f=1", "display_name": "Zia Qamar", "link": "https://stackoverflow.com/users/5945124/zia-qamar"}, "edited": false, "score": 0, "creation_date": 1523446380, "post_id": 49764750, "comment_id": 86562778, "body": "Have you permitted name in controller? show contents of your controller"}], "answers": [{"tags": [], "owner": {"reputation": 1104, "user_id": 3938081, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41ccf280616912c6edc9aa83f278686c?s=128&d=identicon&r=PG&f=1", "display_name": "dave_slash_null", "link": "https://stackoverflow.com/users/3938081/dave-slash-null"}, "is_accepted": false, "score": 3, "last_activity_date": 1523414136, "creation_date": 1523414136, "answer_id": 49765594, "question_id": 49764750, "link": "https://stackoverflow.com/questions/49764750/trouble-running-basic-testunknown-attribute-error/49765594#49765594", "title": "trouble running basic test(unknown attribute error)", "body": "<p>Your testing database is possibly not up-to-date with your current db schema.  To update your test db, run</p>\n\n<pre><code>rails db:test:prepare\n</code></pre>\n"}], "owner": {"reputation": 101, "user_id": 6425652, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/3c1cce2c8bb0bd9a2074247a14f233b7?s=128&d=identicon&r=PG&f=1", "display_name": "goodjobbin85", "link": "https://stackoverflow.com/users/6425652/goodjobbin85"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1523414136, "creation_date": 1523407259, "question_id": 49764750, "link": "https://stackoverflow.com/questions/49764750/trouble-running-basic-testunknown-attribute-error", "title": "trouble running basic test(unknown attribute error)", "body": "<p>I am trying to run a basic test in minitest but getting the following error:</p>\n\n<p>Error:\nCategoryTest#test_category_should_be_valid:\nActiveModel::UnknownAttributeError: unknown attribute 'name' for Category.\n    test/models/category_test.rb:5:in `setup'</p>\n\n<p>but the model exists and the table and row exists in the database.</p>\n\n<pre><code>require 'test_helper'\n\nclass CategoryTest &lt; ActiveSupport::TestCase\ndef setup\n    @category = Category.new(name: \"sports\")\nend\n\ntest \"category should be valid\" do\n    assert @category.valid?\nend\nend\n</code></pre>\n\n<p>and this is the migration table:</p>\n\n<pre><code>class CreateCategories &lt; ActiveRecord::Migration[5.1]\ndef change\ncreate_table :categories do |t|\n    t.string :name\n    t.timestamps\nend\nend\nend\n</code></pre>\n"}, {"tags": ["ruby", "memory", "redis", "garbage-collection"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1523451885, "post_id": 49764627, "comment_id": 86566763, "body": "which process increases in memory usage Redis or Ruby?"}, {"owner": {"reputation": 2847, "user_id": 752837, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9494419c9a9187d1fac939b1c938b880?s=128&d=identicon&r=PG", "display_name": "YWCA Hello", "link": "https://stackoverflow.com/users/752837/ywca-hello"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1523463049, "post_id": 49764627, "comment_id": 86575136, "body": "@Kris The ruby process."}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1523525171, "post_id": 49764627, "comment_id": 86600041, "body": "Ruby 2.4 - I get start: <code>47,588 kilobytes</code>, end <code>47,684 kilobytes</code>."}, {"owner": {"reputation": 2847, "user_id": 752837, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9494419c9a9187d1fac939b1c938b880?s=128&d=identicon&r=PG", "display_name": "YWCA Hello", "link": "https://stackoverflow.com/users/752837/ywca-hello"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1523546393, "post_id": 49764627, "comment_id": 86615264, "body": "@Kris what exact versions of ruby and redis gem are you using? Can you you see if using ruby version <code>2.4.4</code> and redis client <code>4.0.1</code> result in different behavior for you?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1523548344, "post_id": 49764627, "comment_id": 86616596, "body": "that was with Ruby 2.4.0 and Redis::VERSION 3.3.5"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1523548500, "post_id": 49764627, "comment_id": 86616712, "body": "with Ruby 2.4.0 and redis client 4.0.1 I end with <code>47,688 kilobytes</code>"}, {"owner": {"reputation": 2847, "user_id": 752837, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9494419c9a9187d1fac939b1c938b880?s=128&d=identicon&r=PG", "display_name": "YWCA Hello", "link": "https://stackoverflow.com/users/752837/ywca-hello"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1523577141, "post_id": 49764627, "comment_id": 86629653, "body": "@Kris Very strange. I start at <code>62,936</code> and climb to <code>80,000+</code> within 15 seconds. What OS are you using? I assume you are using MRI? Any ideas why this might be?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1523623863, "post_id": 49764627, "comment_id": 86649321, "body": "MRI on Ubuntu. Sorry, no idea."}], "owner": {"reputation": 2847, "user_id": 752837, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9494419c9a9187d1fac939b1c938b880?s=128&d=identicon&r=PG", "display_name": "YWCA Hello", "link": "https://stackoverflow.com/users/752837/ywca-hello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523463075, "creation_date": 1523406177, "last_edit_date": 1523463075, "question_id": 49764627, "link": "https://stackoverflow.com/questions/49764627/why-does-using-redis-lpush-and-brpop-in-ruby-gradually-leak-memory", "title": "Why does using Redis lpush and brpop in Ruby gradually leak memory?", "body": "<p>Running the following block of code results in the process consuming more and more memory over time:</p>\n\n<pre><code>require 'redis'\n\ndef rss ; `ps -o rss= -p #{Process.pid}`.chomp.to_i ; end\ndef gc_and_print_rss\n  GC.start(full_mark: true, immediate_sweep: true)\n  rss.to_s.gsub(/(\\d)(?=(\\d{3})+(\\..*)?$)/,'\\1,') + \" kilobytes\"\nend\n\nstr = ('dummystring' * 1000).freeze\nlist_name = 'test'.freeze\n\nr = Redis.new\nr.del(list_name)\n\n100.times do\n  r.pipelined do\n    10000.times do\n      r.lpush(list_name, str)\n    end\n  end\n\n  10000.times do\n    r.brpop(list_name)\n  end\n\n  something = gc_and_print_rss\n  puts something\nend\n</code></pre>\n\n<p>With an output of:</p>\n\n<pre><code>61,288 kilobytes\n82,708 kilobytes\n83,640 kilobytes\n83,812 kilobytes\n92,228 kilobytes\n93,516 kilobytes\n99,848 kilobytes\n99,868 kilobytes\n99,872 kilobytes\n99,872 kilobytes\n99,876 kilobytes (5 times)\n100,528 kilobytes (9 times)\n100,532 kilobytes (9 times)\n100,544 kilobytes\n101,036 kilobytes\n101,036 kilobytes\n101,036 kilobytes\n</code></pre>\n\n<p>My only guess is that the <code>gc_and_print_rss</code> function is initializing a string as an hval and when enough of these strings are initialized, ruby requests another page of memory from the OS. But this begs the question, how is one to write a loop in ruby (of anything non-trivial) without creeping up in memory until the process terminates?</p>\n\n<p>Tested on macOS and Ubuntu.</p>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 1400, "user_id": 7305745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fep6r.jpg?s=128&g=1", "display_name": "Daniele Cappuccio", "link": "https://stackoverflow.com/users/7305745/daniele-cappuccio"}, "edited": false, "score": 0, "creation_date": 1523403881, "post_id": 49764323, "comment_id": 86544250, "body": "Try to remove the <code>&#47;</code> at the end of <code>url</code>."}, {"owner": {"reputation": 1850, "user_id": 5281047, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/R6JZs.png?s=128&g=1", "display_name": "Gabriel", "link": "https://stackoverflow.com/users/5281047/gabriel"}, "edited": false, "score": 0, "creation_date": 1523404268, "post_id": 49764323, "comment_id": 86544349, "body": "Please post the content of _config.yml into the question so we don&#39;t take the risk of link going down or changing the content."}, {"owner": {"reputation": 3, "user_id": 9627612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tm0Rd.jpg?s=128&g=1", "display_name": "marin_karin", "link": "https://stackoverflow.com/users/9627612/marin-karin"}, "reply_to_user": {"reputation": 1400, "user_id": 7305745, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fep6r.jpg?s=128&g=1", "display_name": "Daniele Cappuccio", "link": "https://stackoverflow.com/users/7305745/daniele-cappuccio"}, "edited": false, "score": 0, "creation_date": 1523405082, "post_id": 49764323, "comment_id": 86544517, "body": "@DanieleCappuccio it fixed the formatting but menu links are still not working correctly."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9627612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tm0Rd.jpg?s=128&g=1", "display_name": "marin_karin", "link": "https://stackoverflow.com/users/9627612/marin-karin"}, "edited": false, "score": 0, "creation_date": 1523467164, "post_id": 49770191, "comment_id": 86577386, "body": "I ending up leaving the baseurl blank. Thanks that did it!"}], "tags": [], "owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "is_accepted": true, "score": 0, "last_activity_date": 1523436472, "last_edit_date": 1523436472, "creation_date": 1523435369, "answer_id": 49770191, "question_id": 49764323, "link": "https://stackoverflow.com/questions/49764323/jekyll-issues-with-menu-links-when-deploying-on-github-pages/49770191#49770191", "title": "Jekyll: issues with menu links when deploying on github pages", "body": "<p>In order to make your menu work on github pages you can :</p>\n\n<p>In <strong><em>_config.yml</em></strong> :</p>\n\n<pre><code>baseurl: \"/blog\"\n\n...\n\nlinks:\n  section_1:\n    - title: home\n      url: /\n      key_trigger: 1\n    - title: my posts\n      url: /posts\n      key_trigger: 2\n...\n</code></pre>\n\n<p>In <strong><em>_includes/menu-search.html</em></strong>, change</p>\n\n<pre><code>&lt;a key-trigger={{ link.key_trigger }}\n   href=\"{{ site.url }}{{ link.url }}\"&gt; {{ link.title }}&lt;/a&gt;\n</code></pre>\n\n<p>to read :</p>\n\n<pre><code>&lt;a key-trigger={{ link.key_trigger }}\n   href=\"{{ site.baseurl }}{{ link.url }}\"&gt; {{ link.title }}&lt;/a&gt;\n</code></pre>\n\n<p>This is based on what I saw <a href=\"https://github.com/marvinkhywah/blog\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}], "owner": {"reputation": 3, "user_id": 9627612, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Tm0Rd.jpg?s=128&g=1", "display_name": "marin_karin", "link": "https://stackoverflow.com/users/9627612/marin-karin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 232, "favorite_count": 1, "accepted_answer_id": 49770191, "answer_count": 1, "score": 0, "last_activity_date": 1523474877, "creation_date": 1523403702, "last_edit_date": 1523474877, "question_id": 49764323, "link": "https://stackoverflow.com/questions/49764323/jekyll-issues-with-menu-links-when-deploying-on-github-pages", "title": "Jekyll: issues with menu links when deploying on github pages", "body": "<p>I've deployed a <a href=\"http://marv.ink\" rel=\"nofollow noreferrer\">Jekyll blog</a> using Github pages, but there appears to be an issue when it generates links for different menu pages.</p>\n\n<p>Here's my _config.yml site settings.</p>\n\n<pre><code># Site settings\ntitle: Marvin K\ndescription: \"Now Loading\"\nbaseurl: \" \" \nurl: \"marv.ink\" \n\n\n# Build settings\nmarkdown: kramdown\nhighlighter: rouge\npermalink: /:title/\n\n# html minify\ncompress_html:\n  clippings: all\n  comments: all\n  endings: []\n  profile: false\n\n# Links to include in menu navigation\nlinks:\n  section_1:\n    - title: home\n      url: /\n      key_trigger: 1\n    - title: my posts\n      url: /posts\n      key_trigger: 2\n    - title: series\n      url: /series\n      key_trigger: 3\n    - title: tags\n      url: /tags\n      key_trigger: 4\n    - title: about me\n      url: /about\n      key_trigger: 5\n\n# projects in header index\nprojects:\n\n\n# exclude my node related stuff\nexclude: ['package.json', 'src', 'node_modules']\n</code></pre>\n\n<p>Any help figuring this out would be great</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1523409489, "post_id": 49764103, "comment_id": 86545575, "body": "Are you using the latest versions of chrome and chromedriver.exe (v65 and 2.37 respectively)?  The behavior you describe sounds like this known (and closed) issue: <a href=\"https://github.com/SeleniumHQ/selenium/issues/5674\" rel=\"nofollow noreferrer\">github.com/SeleniumHQ/selenium/issues/5674</a>.  In any event, I cannot reproduce the behavior you describe.  In future, it is best to include important details like browser, driver, and watir versions.  There are many webdriver issues on SO that are resolved by updating to latest versions.  YMMV."}, {"owner": {"reputation": 55, "user_id": 8637293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42b1358e569a8aa1226e0d8173dde645?s=128&d=identicon&r=PG", "display_name": "Jackson Gong", "link": "https://stackoverflow.com/users/8637293/jackson-gong"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1523411055, "post_id": 49764103, "comment_id": 86545969, "body": "Hi orde, Thank you very much for the response. I&#39;m a beginner so apologize in advance if I missed something. The chrome is up-to-date (v65), but I didn&#39;t know I need chromedriver. I&#39;m using watir with Ruby on a macbook. Watir version is 6.8.4. I successfully used this set-up for some other (simple) tasks, but obviously don&#39;t know enough of the plumbing. I&#39;ll check out the chromedriver you mentioned. If you have other suggestsions I can try I&#39;d really appreciate the help."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1523411704, "post_id": 49764103, "comment_id": 86546144, "body": "No need to apologize; we all have to start somewhere.  From terminal, run <code>which chromedriver</code>, which will give you the directory where chromedriver is located.  You can find the latest chromedriver here: <a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" rel=\"nofollow noreferrer\">sites.google.com/a/chromium.org/chromedriver/downloads</a>.  So, I&#39;d advise downloading the latest chromedriver and replacing the existing one (and you can check the version via terminal with <code>chromedriver -v</code>).  <code>watir 6.8.4</code> isn&#39;t ancient, but the current version is <code>6.10.3</code>."}, {"owner": {"reputation": 55, "user_id": 8637293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42b1358e569a8aa1226e0d8173dde645?s=128&d=identicon&r=PG", "display_name": "Jackson Gong", "link": "https://stackoverflow.com/users/8637293/jackson-gong"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1523412850, "post_id": 49764103, "comment_id": 86546429, "body": "Hi orde, after updating everything, now it worked! I would&#39;ve repped you but guess I&#39;m too new to SO and didn&#39;t see the option. Thank you very much!!"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1523490670, "post_id": 49764103, "comment_id": 86587325, "body": "nice that it&#39;s worked out for you.  I&#39;ve voted to close this question since it can&#39;t be reproduced after upgrading.  Don&#39;t take it personal ;)"}], "owner": {"reputation": 55, "user_id": 8637293, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42b1358e569a8aa1226e0d8173dde645?s=128&d=identicon&r=PG", "display_name": "Jackson Gong", "link": "https://stackoverflow.com/users/8637293/jackson-gong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 254, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1523409106, "creation_date": 1523401813, "last_edit_date": 1523409106, "question_id": 49764103, "link": "https://stackoverflow.com/questions/49764103/watir-cant-set-textarea-content", "title": "Watir: can&#39;t set textarea content", "body": "<p>I tried to use <code>Watir</code> to go to a link, fill in the keyword, and submit the query. Code below:</p>\n\n<pre><code>browser = Watir::Browser.start(\"https://projectreporter.nih.gov/reporter.cfm\")\nbrowser.textarea(id: \"p_keywords\").set 'keyword'\nbrowser.link(title: \"Submit Query\").click\n</code></pre>\n\n<p>I can find the textarea, but the <code>set</code> command doesn't work.</p>\n\n<p>I also tried <code>to_subtype.set</code> as suggested by some other answers but also didn't work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "edited": false, "score": 0, "creation_date": 1523398355, "post_id": 49763603, "comment_id": 86542840, "body": "Eh, I have 10&#39;s of thousands of Managers. \ud83d\ude2c"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "edited": false, "score": 0, "creation_date": 1523398436, "post_id": 49763603, "comment_id": 86542864, "body": "so you need to return an activerecord relation with the data? or do you want ruby objects?"}, {"owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "edited": false, "score": 1, "creation_date": 1523398503, "post_id": 49763603, "comment_id": 86542881, "body": "What I&#39;m ultimately trying to do is get manager records (from an associated table) and show their most recent balance. Presumably the AR relation with the data is what would be most useful."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "edited": false, "score": 0, "creation_date": 1523400175, "post_id": 49763603, "comment_id": 86543354, "body": "I updated my answer, it seems to give the result you&#39;re looking for."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1523400024, "last_edit_date": 1523400024, "creation_date": 1523398313, "answer_id": 49763603, "question_id": 49763442, "link": "https://stackoverflow.com/questions/49763442/how-would-i-select-the-last-of-each-users-record-from-a-table/49763603#49763603", "title": "How would I select the last of each user&#39;s record from a table?", "body": "<p>If well this may not be the most efficient but assuming you don't have 100s of managers, you could just do:</p>\n\n<pre><code>id  manager_id  balance\n1   1           500\n2   2           300\n3   1           200\n4   1           175\n5   2           200\n\n\nmids = Financial.all.pluck(:manager_id).uniq\nmids.map{|mid| Financial.where(manager_id: mid).last}\n</code></pre>\n\n<p>Update, this seems too simple but based on your data example I was able to do:</p>\n\n<pre><code>Financial.group(:manager_id).pluck(:manager_id, :balance)\n# =&gt; [[1, 175], [2, 200]]\n</code></pre>\n\n<p>Or if you prefer array of hash data returned:</p>\n\n<pre><code>Financial.group(:manager_id).pluck(:manager_id, :balance).map{|a| {manager_id: a[0], balance: a[1]}}\n# =&gt;[{:manager_id=&gt;1, :balance=&gt;175}, {:manager_id=&gt;2, :balance=&gt;200}]\n#\n</code></pre>\n\n<p>Haven't tested on larger data set, but I suspect it will work.</p>\n"}], "owner": {"reputation": 22592, "user_id": 147586, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e4f5d494ebdc9e7cce1aecf3ce3e8bc1?s=128&d=identicon&r=PG", "display_name": "Shpigford", "link": "https://stackoverflow.com/users/147586/shpigford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 49763603, "answer_count": 1, "score": 0, "last_activity_date": 1523400024, "creation_date": 1523397444, "question_id": 49763442, "link": "https://stackoverflow.com/questions/49763442/how-would-i-select-the-last-of-each-users-record-from-a-table", "title": "How would I select the last of each user&#39;s record from a table?", "body": "<p>I have table of financial transactions, each one includes a <code>balance</code> column that's essentially the result of all the previous line items.</p>\n\n<p>What I want to get is the most recent transaction for each user (<code>manager</code>, in this case) so I can get their current <code>balance</code>.</p>\n\n<pre><code>id  manager_id  balance\n1   1           500\n2   2           300\n3   1           200\n4   1           175\n5   2           200\n</code></pre>\n\n<p>So in this case I'd want to get back that manager_id 2 has a balance of 200 and manager_id 1 has a balance of 175.</p>\n\n<p>Something in the vein of <code>Financial.order('id DESC').uniq(:manager_id)</code> (though that doesn't work).</p>\n"}, {"tags": ["ruby", "rspec", "rubymine"], "comments": [{"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1523394818, "post_id": 49762746, "comment_id": 86541445, "body": "What do you type from the command line that runs your tests correctly? Is it your intention to run only the single <code>coach_assignment_spec.rb</code> file?"}, {"owner": {"reputation": 11, "user_id": 9627221, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215751957543031/picture?type=large", "display_name": "Matias Spedaletti", "link": "https://stackoverflow.com/users/9627221/matias-spedaletti"}, "reply_to_user": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1523483084, "post_id": 49762746, "comment_id": 86585190, "body": "Yes, I am trying to run that single file. If I enter: &quot;rspec spec/coach_assignment_spec.rb&quot; then it runs correctly. Thanks."}, {"owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "edited": false, "score": 0, "creation_date": 1523483225, "post_id": 49762746, "comment_id": 86585235, "body": "And how are you trying to run the spec file in RubyMine?"}], "owner": {"reputation": 11, "user_id": 9627221, "user_type": "registered", "profile_image": "https://graph.facebook.com/10215751957543031/picture?type=large", "display_name": "Matias Spedaletti", "link": "https://stackoverflow.com/users/9627221/matias-spedaletti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 109, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1523393852, "creation_date": 1523393852, "question_id": 49762746, "link": "https://stackoverflow.com/questions/49762746/cannot-run-ruby-specs-from-rubymine", "title": "Cannot run Ruby Specs from Rubymine", "body": "<p>I am having issues running Rspecs from Rubymine. I can run from terminal and I am using same Ruby SDK on both ends.</p>\n\n<p>RubyMine 2018.1\nBuild #RM-181.4203.562, built on March 27, 2018</p>\n\n<p>Ruby Version : ruby-2.4.1-ruvy</p>\n\n<p><strong>Testing started at 17:53 ...\n/Users/matspeda/.rvm/rubies/ruby-2.4.1-ruvy/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /Users/matspeda/dolphin_tests/spec/coach_assignment_spec.rb\nProcess finished with exit code 0</strong></p>\n\n<p>I've tried with other ruby versions and I get the same message, no errors at all, it just doesn't run. Not sure what happened since this was previously working. I've tried completely erasing RubyMine &amp; reinstalling but it didn't do the trick. I am on MacOS High Sierra 10.13.3</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "dns"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523392162, "post_id": 49762263, "comment_id": 86540157, "body": "Can you reproduce the NXDomain error with other domains? Are you sure your nameserver(s) are working properly?"}, {"owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523395688, "post_id": 49762263, "comment_id": 86541808, "body": "@tadman Yes, about 1 out of 50 or so."}, {"owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523397974, "post_id": 49762263, "comment_id": 86542715, "body": "If I put the same domain into mxtoolbox.com I get the MX and TXT records."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523470548, "post_id": 49762263, "comment_id": 86579159, "body": "I&#39;m not sure if this is a bug in the Ruby library, or your DNS server being really broken. Can you reproduce the issue with <code>dig</code>?"}, {"owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523478339, "post_id": 49762263, "comment_id": 86583221, "body": "@tadman I can get the txt records just fine for this domain with dig."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523487303, "post_id": 49762263, "comment_id": 86586488, "body": "It works for me using <a href=\"https://gist.github.com/tadman/b849a9e3b9f8002a2c8569bcee987899\" rel=\"nofollow noreferrer\">this code</a> which is substantially different from yours despite using the same Resolv library. I&#39;d check how you&#39;re using it."}, {"owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523501930, "post_id": 49762263, "comment_id": 86589750, "body": "@tadman I have that exact code and it fails. Ugh"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523554425, "post_id": 49762263, "comment_id": 86619983, "body": "I think there&#39;s something wrong with your local DNS. Have you tried using 8.8.8.8 or 1.1.1.1?"}, {"owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523575934, "post_id": 49762263, "comment_id": 86629392, "body": "Yep, it works when I run it from a remote server."}, {"owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523576261, "post_id": 49762263, "comment_id": 86629450, "body": "Yes! It works when I use 8.8.8.8! Thanks!!"}], "owner": {"reputation": 10382, "user_id": 214365, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/f6c6c6c38de286fd799a34e985b9e9bf?s=128&d=identicon&r=PG", "display_name": "99miles", "link": "https://stackoverflow.com/users/214365/99miles"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523486167, "creation_date": 1523391653, "last_edit_date": 1523486167, "question_id": 49762263, "link": "https://stackoverflow.com/questions/49762263/dnsruby-error-fetching-txt-records-but-not-mx-records-for-some-domains", "title": "dnsruby - error fetching TXT records but not MX records for some domains", "body": "<p>How come with certain domains, I can fetch MX records just fine, but fetching TXT records I get a 'Dnsruby::NXDomain' error?</p>\n\n<p>Example:</p>\n\n<p>This throws a Dnsruby::NXDomain error:</p>\n\n<pre><code>DNS.new.getresources(\"kimcorealty.com\", Types.TXT)\n</code></pre>\n\n<p>This works perfectly for the same domain:</p>\n\n<pre><code>DNS.new.getresources(\"kimcorealty.com\", Types.MX)\n</code></pre>\n\n<p>How can I resolve this?</p>\n\n<p>Thanks in advance.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>I found where the error is happening in the Ruby source.</p>\n\n<p>At this line: <a href=\"https://github.com/ruby/ruby/blob/trunk/lib/resolv.rb#L529\" rel=\"nofollow noreferrer\">https://github.com/ruby/ruby/blob/trunk/lib/resolv.rb#L529</a></p>\n\n<p>Here's the state of the response when I'm on that line. You can see we're failing that conditional, returning an error. However, if I look at the reply before this, all the TXT records I want are right there. </p>\n\n<pre><code>[7] pry(#&lt;Resolv::DNS&gt;)&gt; reply\n\n=&gt; #&lt;Resolv::DNS::Message:0x00007fd261cb28f8\n @aa=0,\n @additional=[],\n @answer=\n  [[#&lt;Resolv::DNS::Name: kimcorealty.com.&gt;, 1020, #&lt;Resolv::DNS::Resource::IN::TXT:0x00007fd261c89638 @strings=[\"MS=ms98433547\"], @ttl=1020&gt;],\n   [#&lt;Resolv::DNS::Name: kimcorealty.com.&gt;, 1020, #&lt;Resolv::DNS::Resource::IN::TXT:0x00007fd261c72578 @strings=[\"docusign=69340a61-0fcc-46b8-b7a9-2d49a40007c3\"], @ttl=1020&gt;],\n   [#&lt;Resolv::DNS::Name: kimcorealty.com.&gt;,\n    1020,\n    #&lt;Resolv::DNS::Resource::IN::TXT:0x00007fd261c5b490\n     @strings=\n      [\"v=spf1 ip4:167.206.63.136 ip4:64.238.213.254 ip4:66.77.249.235 ip4:66.77.249.236 ip4:216.203.55.53 ip4:216.203.55.54 ip4:209.114.43.188 include:spf.protection.outlook.com include:spf-00297101.pphosted.com ~all\"],\n     @ttl=1020&gt;],\n   [#&lt;Resolv::DNS::Name: kimcorealty.com.&gt;,\n    1020,\n    #&lt;Resolv::DNS::Resource::IN::TXT:0x00007fd261c483e0 @strings=[\"atlassian-domain-verification=vA/K8uyQPRi6pNbTDb5/Hu/yk900zY28QlEtwyrwRs8bKY/N7UG27xsGA8eLjS1V\"], @ttl=1020&gt;]],\n @authority=[],\n @id=27795,\n @opcode=0,\n @qr=1,\n @question=[[#&lt;Resolv::DNS::Name: kimcorealty.com.&gt;, Resolv::DNS::Resource::IN::TXT]],\n @ra=1,\n @rcode=0,\n @rd=1,\n @tc=1&gt;\n\n\n[8] pry(#&lt;Resolv::DNS&gt;)&gt; reply.tc\n\n=&gt; 1\n\n[9] pry(#&lt;Resolv::DNS&gt;)&gt; requester\n\n=&gt; #&lt;Resolv::DNS::Requester::UnconnectedUDP:0x00007fd262172708\n @nameserver_port=[[\"192.168.0.1\", 53], [\"192.168.0.1\", 53]],\n @senders=\n  {[[\"192.168.0.1\", 53], 27795]=&gt;\n    #&lt;Resolv::DNS::Requester::UnconnectedUDP::Sender:0x00007fd25ef3e200\n     @data=#&lt;Resolv::DNS::Name: kimcorealty.com.&gt;,\n     @host=\"192.168.0.1\",\n     @msg=\"l\\x93\\x01\\x00\\x00\\x01\\x00\\x00\\x00\\x00\\x00\\x00\\vkimcorealty\\x03com\\x00\\x00\\x10\\x00\\x01\",\n     @port=53,\n     @sock=#&lt;UDPSocket:fd 8, AF_INET, 0.0.0.0, 45796&gt;&gt;},\n @socks=[#&lt;UDPSocket:fd 8, AF_INET, 0.0.0.0, 45796&gt;],\n @socks_hash={\"0.0.0.0\"=&gt;#&lt;UDPSocket:fd 8, AF_INET, 0.0.0.0, 45796&gt;}&gt;\n</code></pre>\n\n<p>Any ideas how to fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "garbage-collection", "unicorn"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523389385, "post_id": 49761696, "comment_id": 86538790, "body": "I&#39;m not sure you&#39;re going to find a specific answer here because these sorts of things are highly situational. Does the leak also manifest in another Ruby implementation like JRuby or Ruby 2.5? You&#39;re going to need to try and identify the source of this problem. Ruby 2.1 is <a href=\"https://www.ruby-lang.org/en/news/2017/04/01/support-of-ruby-2-1-has-ended/\" rel=\"nofollow noreferrer\">no longer supported</a> and you should upgrade as soon as possible."}, {"owner": {"reputation": 35, "user_id": 4551655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vcos.jpg?s=128&g=1", "display_name": "ssuummit", "link": "https://stackoverflow.com/users/4551655/ssuummit"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523390210, "post_id": 49761696, "comment_id": 86539219, "body": "@tadman, thanks for your response. I have not tested it with other Ruby implementations/versions as it&#39;s our production app and upgrading ruby version might require an upgrade for gems as well, we have a long list of gems being used."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1523390952, "post_id": 49761696, "comment_id": 86539563, "body": "Going from 2.1 to 2.5 should be pretty seamless, nothing really broke. It&#39;s usually upgrading the gems themselves that&#39;s a lot more fuss. I&#39;d give it a shot as part of your diagnostics, even if just on your local machine."}], "owner": {"reputation": 35, "user_id": 4551655, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5Vcos.jpg?s=128&g=1", "display_name": "ssuummit", "link": "https://stackoverflow.com/users/4551655/ssuummit"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523389297, "creation_date": 1523389180, "last_edit_date": 1523389297, "question_id": 49761696, "link": "https://stackoverflow.com/questions/49761696/major-minor-gc-not-running", "title": "Major/Minor GC not running", "body": "<p>I was debugging a memory leak in my Ruby app (<strong>Ruby 2.1.2</strong>). While gathering GC stat for unicorn master process over the time I found out that major &amp; minor GC count is not changing. Here below is sample GC stat:</p>\n\n<blockquote>\n  <p>{:count=>273, :heap_used=>10181, :heap_length=>12252, :heap_increment=>2071, :heap_live_slot=>4113806, :heap_free_slot=>35946, :heap_final_slot=>0, :heap_swept_slot=>655582, :heap_eden_page_length=>10181, :heap_tomb_page_length=>0, :total_allocated_object=>132076290, :total_freed_object=>127962484, :malloc_increase=>164098552, :malloc_limit=>30949538, <strong>:minor_gc_count=>260, :major_gc_count=>13</strong>, :remembered_shady_object=>19831, :remembered_shady_object_limit=>29756, :old_object=>699918, :old_object_limit=>1069156, :oldmalloc_increase=>185902224, :oldmalloc_limit=>58937052}</p>\n</blockquote>\n\n<p>After approx 7 hours:</p>\n\n<blockquote>\n  <p>{:count=>273, :heap_used=>23353, :heap_length=>39695,\n  :heap_increment=>16342, :heap_live_slot=>9482797,\n  :heap_free_slot=>35840, :heap_final_slot=>0, :heap_swept_slot=>655582,\n  :heap_eden_page_length=>23353, :heap_tomb_page_length=>0,\n  :total_allocated_object=>137445281, :total_freed_object=>127962484,\n  :malloc_increase=>663823560, :malloc_limit=>30949538,\n  <strong>:minor_gc_count=>260, :major_gc_count=>13</strong>,\n  :remembered_shady_object=>19831,\n  :remembered_shady_object_limit=>29756, :old_object=>699918,\n  :old_object_limit=>1069156, :oldmalloc_increase=>685627232,\n  :oldmalloc_limit=>58937052}</p>\n</blockquote>\n\n<p>As per my understanding, if :oldmalloc_increase crosses :oldmalloc_limit then major GC is triggered. Also if :malloc_increase crosses :malloc_limit a minor GC is triggered.</p>\n\n<p>In my case both oldmalloc_increase &amp; malloc_increase is exceeding limit still GC is not triggered.</p>\n\n<p>Can anyone please help me with below queries:</p>\n\n<ol>\n<li>Why Minor/Major GC is not triggered?</li>\n<li>malloc_increase &amp; oldmalloc_increase is continuously increasing which is causing OOM issue. If I restart my app then both these values are resetting to normal range. Does it mean my Ruby app is leaking memory? Is memory not getting freed because GC is not running?</li>\n</ol>\n"}, {"tags": ["ruby-on-rails", "ruby", "facebook-graph-api", "facebook-ads-api"], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 984739, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1017810099/picture?type=large", "display_name": "Kelly Taylor", "link": "https://stackoverflow.com/users/984739/kelly-taylor"}, "is_accepted": false, "score": 1, "last_activity_date": 1523391589, "creation_date": 1523391589, "answer_id": 49762249, "question_id": 49760562, "link": "https://stackoverflow.com/questions/49760562/unsupported-get-request-facebook-marketing-api-wont-authenticate-for-me/49762249#49762249", "title": "Unsupported get request - Facebook Marketing API won&#39;t authenticate for me", "body": "<p>When setting your ad_account_id, add 'act_' in front of the ID. As the SDK will not do this for you.</p>\n"}], "owner": {"reputation": 68, "user_id": 984739, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1017810099/picture?type=large", "display_name": "Kelly Taylor", "link": "https://stackoverflow.com/users/984739/kelly-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 700, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523391589, "creation_date": 1523384494, "question_id": 49760562, "link": "https://stackoverflow.com/questions/49760562/unsupported-get-request-facebook-marketing-api-wont-authenticate-for-me", "title": "Unsupported get request - Facebook Marketing API won&#39;t authenticate for me", "body": "<p>I'm setting up an API integration in my rails application with the Facebook Ads/Marketing API. I'm attempting to test very basic options with my Sandbox Ad Account and cannot seem to get them to work. This is error I keep getting:</p>\n\n<pre><code>FacebookAds::ClientError: Unsupported post request. \nObject with ID '119033245616727' does not exist, cannot be loaded due \nto missing permissions, or does not support this operation.\nPlease read the Graph API documentation at \nhttps://developers.facebook.com/docs/graph-api: (fbtrace_id: GyiFjx24NY/)\nfrom /Users/kelly/.rvm/gems/ruby-2.3.0/gems/facebookads-0.2.11.0/lib/facebook_ads/api_request.rb:67:in `create_response'\n</code></pre>\n\n<p>To run the test, I used their <strong>Marketing API</strong> quickstart to get my access token, app secret and ad account id.</p>\n\n<p><strong>This is my rails config:</strong></p>\n\n<p>Gemfile:</p>\n\n<pre><code>gem 'facebookads' #https://github.com/facebook/facebook-ruby-ads-sdk\n</code></pre>\n\n<p>My Test Module:</p>\n\n<pre><code>module Advertising\n  module Facebook\n    class API\n      attr_accessor :access_token\n      attr_accessor :app_secret\n      attr_accessor :ad_account_id\n\n      def initialize\n        @access_token = 'EAAYVZBezhACwBAKwMk7fhAJO2WFlUeUaCcASveD9gb6ZCKBzEAJIzDToagt4Vy5n6Ue9QpOwyb0SWYCSHHf4A2jbdTOb99GTBjhSOu5WnU03mnKymd2YgmquOJHg4lPx3iZBonYTzriU27OnlBXDMXdIZApwt45SSqQ8SLs5xaMM3lVEsm0r6WXSoos5yiOiqfMB83SfnntzUzqkEywQ'\n        @app_secret = '15326d2073b04504ef72267bf36a8bd4'\n        @ad_account_id = '119033245616727'\n      end\n\n      def test1\n        FacebookAds.configure do |config|\n         config.access_token = @access_token\n         config.app_secret = @app_secret\n        end\n        ad_account = FacebookAds::AdAccount.get(ad_account_id)\n        ad_account.campaigns.create(\n          objective: 'LINK_CLICKS',\n          status: 'PAUSED',\n          buying_type: 'AUCTION',\n          name: 'My Campaign'\n        )\n      end\n\n      def test2\n        # With session\n        session = FacebookAds::Session.new(access_token: @access_token, app_secret: @app_secret)\n        ad_account = FacebookAds::AdAccount.get(ad_account_id, session)\n        puts \"This is my account name: #{ad_account.name}\"\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>Then I'm running this in the rails console:</p>\n\n<pre><code>ad = Advertising::Facebook::API.new()\nad.test1\n# OR\nad.test2\n</code></pre>\n\n<p>This is a newly created facebook app. These are the settings:</p>\n\n<p><strong>Status:</strong> In Development</p>\n\n<p><strong>App ID:</strong> 1713013025472556</p>\n\n<p><strong>App Secret:</strong> 15326d2073b04504ef72267bf36a8bd4</p>\n\n<p>I added the Marketing API to the products section and created a Sandbox Ad Account called T2 Sandbox (119033245616727).</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "edited": false, "score": 0, "creation_date": 1523384544, "post_id": 49760441, "comment_id": 86536184, "body": "Why not just <code>raise &#39;error&#39; if array1.length != array2.length</code>?"}, {"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "reply_to_user": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "edited": false, "score": 0, "creation_date": 1523384942, "post_id": 49760441, "comment_id": 86536428, "body": "each array represents a rows of a DB table, and because of the DB migration code, I want to test if data is the same, so I will chose to stop the iteration when one table reach its size even if the other still have more rows."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523386242, "post_id": 49760441, "comment_id": 86537225, "body": "Are these two arrays, or two arrays of arrays? Are you looking for when <code>array1</code> and <code>array2</code> are different lengths or when <code>array1[n]</code> and <code>array2[n]</code> don&#39;t match length?"}, {"owner": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523386287, "post_id": 49760441, "comment_id": 86537256, "body": "@tadman, it is just what the asker is already using. <i>&quot;I have a loop that rise exceptions (...)&quot;</i>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "edited": false, "score": 0, "creation_date": 1523386318, "post_id": 49760441, "comment_id": 86537278, "body": "@Robert Since they already have that code, why repeat it?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1523387063, "post_id": 49760441, "comment_id": 86537675, "body": "Why the rush to select an answer?"}], "answers": [{"comments": [{"owner": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "edited": false, "score": 0, "creation_date": 1523385122, "post_id": 49760594, "comment_id": 86536525, "body": "where are you using ar1 and ar2?"}, {"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "reply_to_user": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "edited": false, "score": 0, "creation_date": 1523385570, "post_id": 49760594, "comment_id": 86536803, "body": "inside the loop, I have hc = HashCompare.new(ar1, ar2)"}, {"owner": {"reputation": 24981, "user_id": 1094246, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dda38b3b4f0bd9b57759601a3652e520?s=128&d=identicon&r=PG", "display_name": "Robert", "link": "https://stackoverflow.com/users/1094246/robert"}, "edited": false, "score": 0, "creation_date": 1523385876, "post_id": 49760594, "comment_id": 86537005, "body": "both the question and the answer are completely unclear for me."}], "tags": [], "owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "is_accepted": false, "score": 0, "last_activity_date": 1523384637, "creation_date": 1523384637, "answer_id": 49760594, "question_id": 49760441, "link": "https://stackoverflow.com/questions/49760441/how-to-exit-when-loop-when-the-min-of-the-sizes-of-two-tables-is-reached/49760594#49760594", "title": "How to exit when loop when the min of the sizes of two tables is reached", "body": "<p>I found a solution, maybe there is better one than mine, I am just a beginner in ruby :</p>\n\n<pre><code>  j = 0\n  array1.zip(array2).each do |ar1, ar2|\n   j += 1\n   break if [array1.size,array2.size].min == j\n   ....\n   end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1523386367, "post_id": 49760920, "comment_id": 86537305, "body": "Thank you iGian, but we don&#39;t know in advance which array is bigger, that&#39;s why I choose to find the min ."}, {"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1523386645, "post_id": 49760920, "comment_id": 86537453, "body": "iGian, swapping is a smart idea."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1523388642, "post_id": 49760920, "comment_id": 86538452, "body": "<code>arrays = [array1, array2].sort_by(&amp;:length)</code> is a little easier to follow, plus scales up to <i>N</i> arrays. Then <code>arrays.transpose</code> instead of <code>.zip</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523469819, "post_id": 49760920, "comment_id": 86578789, "body": "@tadman&#39;s comment, as it concerns the construction of <code>arrays</code>, is also non-destructive, whereas parallel assignment mutates <code>array1</code> and <code>array2</code>, which may not be wanted. tadman: don&#39;t you want the smaller array first (e.g., tack <code>reverse</code> onto the end)?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1523470615, "post_id": 49760920, "comment_id": 86579190, "body": "@CarySwoveland This question would benefit by having a series of tests any solution should pass. Too many people fail to post their specifications and leave us guessing as to what they really want."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1523477136, "post_id": 49760920, "comment_id": 86582597, "body": "@tadman, forget my mention of <code>reverse</code>. I wasn&#39;t thinking straight."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": true, "score": 3, "last_activity_date": 1523385971, "creation_date": 1523385971, "answer_id": 49760920, "question_id": 49760441, "link": "https://stackoverflow.com/questions/49760441/how-to-exit-when-loop-when-the-min-of-the-sizes-of-two-tables-is-reached/49760920#49760920", "title": "How to exit when loop when the min of the sizes of two tables is reached", "body": "<p>The loop breaks when reaches the last element of the first array zipped.</p>\n\n<pre><code>array1 = ['a', 'b', 'c', 'd']\narray2 = ['x', 'y', 'z']\n\narray1.zip(array2).each do |ar1, ar2|\n   puts \"#{ar1} -- #{ar2}\"\nend\n\nputs \"-\"*10\n\narray2.zip(array1).each do |ar2, ar1|\n   puts \"#{ar1} -- #{ar2}\"\nend\n</code></pre>\n\n<p>You could swap the variables if the first array is bigger:</p>\n\n<pre><code>array1, array2 = array2, array1 if array1.size &gt; array2.size\narray1.zip(array2).each do |ar1, ar2|\n   puts \"#{ar1} -- #{ar2}\"\nend \n</code></pre>\n\n<p>If you just want to check if data are the same and don't want keep track of data origin.</p>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1523387077, "post_id": 49761065, "comment_id": 86537681, "body": "I tested your def puts equal_size_elements(a, b), it returned false !!!"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1523387412, "post_id": 49761065, "comment_id": 86537872, "body": "That&#39;s because <code>a[4]</code> and <code>b[4]</code> have different lengths, 2 vs 1 in this case, which is not a match."}, {"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1523388008, "post_id": 49761065, "comment_id": 86538166, "body": "the index goes from 0 to 3, where a[4] come from ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1523388576, "post_id": 49761065, "comment_id": 86538422, "body": "From my not zero-indexing, my mistake. That should be <code>a[3]</code> and <code>b[3]</code>, but the point is that <code>&quot;10&quot;</code> and <code>&quot;1&quot;</code> have different lengths ergo the arrays are not &quot;equal size&quot; by this definition."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1523386577, "creation_date": 1523386577, "answer_id": 49761065, "question_id": 49760441, "link": "https://stackoverflow.com/questions/49760441/how-to-exit-when-loop-when-the-min-of-the-sizes-of-two-tables-is-reached/49761065#49761065", "title": "How to exit when loop when the min of the sizes of two tables is reached", "body": "<p>Given arrays:</p>\n\n<pre><code>a = %w[ 1 2 3 10 ]\nb = %w[ 1 4 5 1 ]\nc = %w[ 5 4 3 ]\n</code></pre>\n\n<p>If you want to compare two arrays for length:</p>\n\n<pre><code>a.length == b.length\n# =&gt; true\na.length == c.length\n# =&gt; false\n</code></pre>\n\n<p>If you want to compare that the elements <em>in</em> the arrays are of the same length <em>and</em> that the arrays are the same length:</p>\n\n<pre><code>def equal_size_elements(a, b)\n  return false unless a.length == b.length\n\n  a.zip(b).all? do |_a, _b|\n    _a.length == _b.length\n  end\nend\n</code></pre>\n\n<p>Where that checks if all of the elements have different lengths because if they all match then it's good, otherwise not good. That method will halt iterating as soon as it finds a mismatch because at that point they can't all pass.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1523405410, "post_id": 49761285, "comment_id": 86544592, "body": "It is an alternative to using <code>zip</code>. Suppose  <code>array1 =  [1,2,3]</code> and <code>array2 =  [4,5]</code> and you wish to print <code>5</code> (<code>1+4</code>) and then <code>7</code> (<code>2+5</code>). Using <code>zip</code> you might write, <code>n = [array1.size, array2.size].min #=&gt; 2</code>, then <code>arr = array1[0,n].zip(array2[0,n]) #=&gt; [[1,4], [2,5]]</code> (as <code>array1[0,2] #=&gt; [1,2]</code> and <code>array2[0,2] #=&gt; [2,5]</code>). Then <code>arr.each { |a,b| puts a+b }</code> prints <code>5</code> and then <code>7</code>.  Here I suggest <code>n.times { |i| puts array1[i]+array2[i] }</code> which also prints <code>5</code> and then <code>7</code>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1523387513, "creation_date": 1523387513, "answer_id": 49761285, "question_id": 49760441, "link": "https://stackoverflow.com/questions/49760441/how-to-exit-when-loop-when-the-min-of-the-sizes-of-two-tables-is-reached/49761285#49761285", "title": "How to exit when loop when the min of the sizes of two tables is reached", "body": "<pre><code> [array1.size, array1.size].min.each do |i|\n   # code here referencing array1[i] and array2[i]\n end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "edited": false, "score": 0, "creation_date": 1523390468, "post_id": 49761905, "comment_id": 86539347, "body": "Cassiano, yes this is better than mine, I am the poor student."}], "tags": [], "owner": {"reputation": 15, "user_id": 6220177, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6edc341402cb418ecf619ace2b356873?s=128&d=identicon&r=PG&f=1", "display_name": "Cassiano", "link": "https://stackoverflow.com/users/6220177/cassiano"}, "is_accepted": false, "score": 0, "last_activity_date": 1523390059, "creation_date": 1523390059, "answer_id": 49761905, "question_id": 49760441, "link": "https://stackoverflow.com/questions/49760441/how-to-exit-when-loop-when-the-min-of-the-sizes-of-two-tables-is-reached/49761905#49761905", "title": "How to exit when loop when the min of the sizes of two tables is reached", "body": "<p>Just a bit better than your solution:</p>\n\n<pre><code>array1.zip(array2).each_with_index do |zipped, index| \n    break if index == [array1.size, array2.size].min\n    puts zipped.first\n    puts zipped.last\n    puts\nend\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 49760920, "answer_count": 5, "score": 0, "last_activity_date": 1523422159, "creation_date": 1523384122, "last_edit_date": 1523422159, "question_id": 49760441, "link": "https://stackoverflow.com/questions/49760441/how-to-exit-when-loop-when-the-min-of-the-sizes-of-two-tables-is-reached", "title": "How to exit when loop when the min of the sizes of two tables is reached", "body": "<p>I am doing some data migration, comparing tables between a legacy and a new database. I have a loop that raises exceptions when two arrays do not have the same size.</p>\n\n<pre><code>array1.zip(array2).each do |ar1, ar2|\n  # some code here\nend\n</code></pre>\n\n<p>I want to know how to exit the loop when we reach the same size of the two arrays.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "whenever"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 2, "creation_date": 1523382511, "post_id": 49759999, "comment_id": 86535041, "body": "if your&#39;re going to call a method like <code>User.some_method</code> it needs to be a <i>class method</i>, otherwise use <code>User.new.some_method</code>."}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1523384694, "post_id": 49759999, "comment_id": 86536262, "body": "@maxpleaner that was it! Thank you very much, still learning proper ruby syntax, etc so small stupid things like that keep happening to me."}, {"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1523385960, "post_id": 49759999, "comment_id": 86537056, "body": "@maxpleaner while that does solve the error issue, now I have a new issue; my whenever code is not doing anything it seems now. Running User.new.(methodhere) manually in console still does what its supposed to"}], "answers": [{"comments": [{"owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1523393966, "post_id": 49762671, "comment_id": 86541081, "body": "If it is now working with User.new.(methodhere) would doing it this way have any effect on it working properly? Also, where would I make this class? Sorry, I&#39;m very new to RoR and proper file placement I&#39;m still working on."}, {"owner": {"reputation": 41, "user_id": 4309737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k_C6osX-7Bg/AAAAAAAAAAI/AAAAAAAAAfc/b_LdzDRIS2E/photo.jpg?sz=128", "display_name": "veloper in big Enmanuel Medina", "link": "https://stackoverflow.com/users/4309737/veloper-in-big-enmanuel-medina"}, "reply_to_user": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "edited": false, "score": 0, "creation_date": 1523394376, "post_id": 49762671, "comment_id": 86541250, "body": "The way I anwers works without create a new instance of User. If you do User.new you are creating a new instance of user. Instead define a class method and do User.method. If you create a new instance of user you are saving space in memory for that object everytime you run that task, with a class method you avoid that posible memory leak."}], "tags": [], "owner": {"reputation": 41, "user_id": 4309737, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-k_C6osX-7Bg/AAAAAAAAAAI/AAAAAAAAAfc/b_LdzDRIS2E/photo.jpg?sz=128", "display_name": "veloper in big Enmanuel Medina", "link": "https://stackoverflow.com/users/4309737/veloper-in-big-enmanuel-medina"}, "is_accepted": false, "score": 2, "last_activity_date": 1523393520, "creation_date": 1523393520, "answer_id": 49762671, "question_id": 49759999, "link": "https://stackoverflow.com/questions/49759999/whenever-gem-undefined-method-methodhere-for-usercall-user-connection-t/49762671#49762671", "title": "Whenever Gem - Undefined method &#39;(methodhere)&#39; for User(call &#39;User.connection&#39; to establish a connection):Class", "body": "<p>You have to have an User class method</p>\n\n<pre><code>class User\n  def self.method\n    ...\n  end\nend\n</code></pre>\n\n<p>In that way you can use User.method in the schedule file.</p>\n"}], "owner": {"reputation": 39, "user_id": 9387840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/27d4a0322841f2d910f39c2cb9c36ecb?s=128&d=identicon&r=PG&f=1", "display_name": "Ant-IWH", "link": "https://stackoverflow.com/users/9387840/ant-iwh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1523393520, "creation_date": 1523382392, "last_edit_date": 1523386196, "question_id": 49759999, "link": "https://stackoverflow.com/questions/49759999/whenever-gem-undefined-method-methodhere-for-usercall-user-connection-t", "title": "Whenever Gem - Undefined method &#39;(methodhere)&#39; for User(call &#39;User.connection&#39; to establish a connection):Class", "body": "<p>I'm attempting to implement the Whenever gem into my RoR 5 application. Once a year I want it to run a method in my 'User' model, but for testing purposes I have made it once every minute, like so:</p>\n\n<p>Schedule.rb:</p>\n\n<pre><code>set :output, \"/home/ubuntu/workspace/log/cron.log\"\n\nevery 1.minute do\n    runner \"User.(methodhere)\"\nend\n</code></pre>\n\n<p>User.rb:</p>\n\n<pre><code>def (methodhere)\n  User.all.each do |user|\n    user.update(remaining_days: user.total_days)\n  end\nend\n</code></pre>\n\n<p>In multiple places I have read that sometimes cronjobs dont run properly in development mode, so I jumped through all of the hoops to put my application into production mode, and that did not help. </p>\n\n<p>I then found that you can manually run these jobs in the command line, which I then tried to do using the command found doing:</p>\n\n<pre><code>whenever --update-cron\n</code></pre>\n\n<p>then</p>\n\n<pre><code>crontab -l\n</code></pre>\n\n<p>which showed</p>\n\n<pre><code># Begin Whenever generated tasks for: \n/home/ubuntu/workspace/config/schedule.rb\n* * * * * /bin/bash -l -c 'cd /home/ubuntu/workspace &amp;&amp; bundle exec bin/rails \nrunner -e production '\\''User.year_days_reset'\\'' &gt;&gt; \n/home/ubuntu/workspace/log/cron.log 2&gt;&amp;1'\n</code></pre>\n\n<p>Running </p>\n\n<pre><code>/bin/bash -l -c 'cd /home/ubuntu/workspace &amp;&amp; bundle exec bin/rails \nrunner -e production '\\''User.(methodhere)'\\'' &gt;&gt; \n/home/ubuntu/workspace/log/cron.log 2&gt;&amp;1'\n</code></pre>\n\n<p>left me with an error in the log, like so:</p>\n\n<pre><code>Please specify a valid ruby command or the path of a script to run.\nRun 'bin/rails runner -h' for help.\n\nundefined method `(methodhere)' for User (call 'User.connection' to \nestablish a connection):Class\n</code></pre>\n\n<p>Many google searches have left me with nothing.</p>\n\n<p>NOTE: Running my method (methodhere) manually in the rails console works perfectly as I want it to. I'm a very new developer with RoR, so any guidance on the matter would be greatly appreciated, thanks!</p>\n\n<p>EDIT: @maxpleaner pointed out I was missing .new in User.new.(methodhere), which fixed the error, however I have a new issue. My code in schedule.rb seems to not be executing anything, as it is supposed to occur every minute but it is doing nothing.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1523380494, "post_id": 49759427, "comment_id": 86533877, "body": "I mean, even if there wasn&#39;t a built-in function for this, it seems like it&#39;s a fairly simple matter to iterate and set the current max, no? Have you tried <i>anything</i> yet?"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1523381375, "post_id": 49759427, "comment_id": 86534400, "body": "a) You don&#39;t need a counter, just use <code>times</code>. b) Why do you need the last number input? c) Use <code>max</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523388531, "post_id": 49759427, "comment_id": 86538397, "body": "&quot;I think most of the code is working&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523388704, "post_id": 49759427, "comment_id": 86538486, "body": "What does it mean that you &quot;think&quot; it is working? Does it work or doesn&#39;t it work? Also, please make sure that you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> that demonstrates your problem. In particular, your example fails the <i>minimal</i> part; I am 100% sure that it does not require 70 lines to demonstrate your problem, in fact, I am willing to bet it can be done in 2."}, {"owner": {"reputation": 1, "user_id": 9626108, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0_ZpDovWHqw/AAAAAAAAAAI/AAAAAAACgss/Z667FT0Hlfo/photo.jpg?sz=128", "display_name": "Chase Ritchey", "link": "https://stackoverflow.com/users/9626108/chase-ritchey"}, "edited": false, "score": 0, "creation_date": 1523390563, "post_id": 49759427, "comment_id": 86539387, "body": "I apologize for my vagueness. I mean that I believe that the code is accepting the input and adding it to the array. My issue is being able to display the largest number that was input by the user. I have been trying to figure out how to basically display the information that the user has input into the script and output it into a string to display back to the user."}], "answers": [{"tags": [], "owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "is_accepted": false, "score": 0, "last_activity_date": 1523380643, "creation_date": 1523380643, "answer_id": 49759517, "question_id": 49759427, "link": "https://stackoverflow.com/questions/49759427/how-do-i-display-the-largest-number-in-an-array-in-ruby/49759517#49759517", "title": "How do I display the largest number in an array in Ruby?", "body": "<p>Have you learned about for loops yet? You have to iterate through the array. For a very trivial example, you can do something like </p>\n\n<pre><code>max = 0\nfor element in list \n    if element &gt; max\n        max= element\nreturn max\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "is_accepted": false, "score": 3, "last_activity_date": 1523382026, "creation_date": 1523382026, "answer_id": 49759893, "question_id": 49759427, "link": "https://stackoverflow.com/questions/49759427/how-do-i-display-the-largest-number-in-an-array-in-ruby/49759893#49759893", "title": "How do I display the largest number in an array in Ruby?", "body": "<p>This question has been asked and answered so many times before. Personally I think, as <a href=\"https://stackoverflow.com/a/1359386/2750877\">this</a> answer suggests, the built in <code>.max</code> is the best solution.</p>\n\n<pre><code>[1, 3, 5].max #=&gt; 5\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9626108, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0_ZpDovWHqw/AAAAAAAAAAI/AAAAAAACgss/Z667FT0Hlfo/photo.jpg?sz=128", "display_name": "Chase Ritchey", "link": "https://stackoverflow.com/users/9626108/chase-ritchey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4763, "favorite_count": 0, "closed_date": 1523400686, "answer_count": 2, "score": -3, "last_activity_date": 1523382026, "creation_date": 1523380334, "question_id": 49759427, "link": "https://stackoverflow.com/questions/49759427/how-do-i-display-the-largest-number-in-an-array-in-ruby", "closed_reason": "Duplicate", "title": "How do I display the largest number in an array in Ruby?", "body": "<p><strong>I have a homework assignment that I need to finish. I think most of the code is working but I am having trouble with the last part. I need to display the largest number that a user enters (into an array). Below is the code I have so far. I am open to any suggestions. Thanks in advance.</strong></p>\n\n<p>Here's the description of the assignment:\nWrite a Ruby application that allows a user to input a series of 10 integers and determines and prints the largest integer. Your program should use at least the following three variables:\na) counter: A counter to count to 10 (i.e., to keep track of how many numbers have been input and to determine when all 10 numbers have been processed).\nb) number: The integer most recently input by the user.\nc) largest: The largest number found so far.</p>\n\n<pre><code>class Screen\n  def cls\n    puts (\"\\n\")\n    puts \"\\a\"\n  end\ndef pause\n   STDIN.gets\n end\nend\n\nclass Script\n  def display_instructions \n      Console_Screen.cls\n      print \"This script will take the user input of 10 integers and then \n      will \n      print the largest.\"\n      print \"\\n\\nPress enter to continue.\"\n      Console_Screen.cls\n      Console_Screen.pause\n   end\n\n  def getNumber #accepts user input\n    list = Array.new\n    10.times do\n      Console_Screen.cls\n      print \"This script accepts 10 integers.\"\n      print \"\\n\\nPlease type an integer and press enter.\"\n      input = STDIN.gets\n      input.chop!\n      list.push(input)\n     end\n   end\n\n  def display_largest(number) #displays the largest integer entered by the \n    user\n    Console_Screen.cls\n    print \"The largest integer is \" + \n  end\n\n def runScript\n    number = getNumber\n    Console_Screen.cls\n    display_largest(number)\n end\nend\n\n #Main Script Logic\n Console_Screen = Screen.new\n LargestNum = Script.new\n answer = \"\" \n loop do\n   Console_Screen.cls\n   print \"Are you ready to start the script? (y/n): \"\n   print \"\\n\\nWould you like instructions on how this script works? (h): \"\n   answer = STDIN.gets\n   answer.chop!\n   break if answer =~ /y|n|h/i\n end\n\n if answer == \"h\" or answer == \"H\"\n  LargestNum.display_instructions\n  print \"Are you ready to start the script? (y/n): \"\n  answer = STDIN.gets\n  answer.chop!\n  end\n\n if answer == \"n\" or answer == \"N\"\n  Console_Screen.cls\n  puts \"Okay, maybe another time.\\n\\n\"\n  Console_Screen.pause\n else\n  loop do\n    LargestNum.runScript\n    print \"\\n\\nEnter Q to quit or press any key to run the script again: \"\n    runAgain = STDIN.gets\n    runAgain.chop!\n    break if runAgain =~ /Q/i\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2062, "user_id": 4896126, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/aUY9T.png?s=128&g=1", "display_name": "Marcos R. Guevara", "link": "https://stackoverflow.com/users/4896126/marcos-r-guevara"}, "edited": false, "score": 0, "creation_date": 1523380428, "post_id": 49758718, "comment_id": 86533831, "body": "you tried to use polymorphism on your model? <a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 9623727, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-R9FUMCsLfUs/AAAAAAAAAAI/AAAAAAAAADI/5iENM99eo_M/photo.jpg?sz=128", "display_name": "Alexander Sysuiev", "link": "https://stackoverflow.com/users/9623727/alexander-sysuiev"}, "is_accepted": true, "score": 0, "last_activity_date": 1523381092, "creation_date": 1523381092, "answer_id": 49759640, "question_id": 49758718, "link": "https://stackoverflow.com/questions/49758718/problems-with-adding-images-to-user/49759640#49759640", "title": "Problems with adding images to user", "body": "<p>Please provide error message and backtrace.</p>\n\n<p>I assume it is because \"ad\" reference is blank for the user.\nAnd according to your code:</p>\n\n<pre><code>t.references :ad, foreign_key: true\n</code></pre>\n\n<p>So I think the issue is in database constraint\nAnd the simplest solution is to change it to</p>\n\n<pre><code>add_column :images, :ad_id, :integer\n</code></pre>\n\n<p>Without foreign key.</p>\n\n<p>Or for your case, you can add <a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow noreferrer\">polimorhic association</a></p>\n\n<p>Also, a question not related to the topic, but want to ask about</p>\n\n<pre><code>respond_to do |format|\n if @user.save\n  format.html { redirect_to board_url }\n  format.json { render :show, status: :created, location: @user }\n else\n  format.html { render :new }\n  format.json { render json: @user.errors, status: :unprocessable_entity}\n end\nend\n</code></pre>\n\n<p>Why are you saving inside <code>respond_to</code> method?\nSo in rails depth, there is a method:</p>\n\n<pre><code>def respond_to(&amp;block)\n  ...\n  block.call\n  ...\nend\n</code></pre>\n\n<p>And your <code>@user.save</code> will be called there. Are you sure you want it?</p>\n"}], "owner": {"reputation": 11, "user_id": 9625912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uChMycNqow0/AAAAAAAAAAI/AAAAAAAAADA/1qLLUf7Erxs/photo.jpg?sz=128", "display_name": "Andrey Anischik", "link": "https://stackoverflow.com/users/9625912/andrey-anischik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 49759640, "answer_count": 1, "score": -1, "last_activity_date": 1523381092, "creation_date": 1523377941, "question_id": 49758718, "link": "https://stackoverflow.com/questions/49758718/problems-with-adding-images-to-user", "title": "Problems with adding images to user", "body": "<p>When I push submit button in _form, Image should be created and linked to the user, but something went wrong. I use the same Image model for Ads and there almost the same code works right. Maybe the problem can somehow be connected with the inconsistency of devise user controllers and my user controller? </p>\n\n<p><strong>Users controller</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :set_user, only: [:show, :edit, :update, :destroy]\n\n  def index\n  end\n\n  def show\n  end\n\n  def new\n    @user = User.new\n    @user.images.build\n  end\n\n  def edit\n    authorize! :update, @user\n    @user.images.build\n  end\n\n  def create\n   @user = current_user\n   respond_to do |format|\n     if @user.save\n      format.html { redirect_to board_url }\n      format.json { render :show, status: :created, location: @user }\n     else\n      format.html { render :new }\n      format.json { render json: @user.errors, status: :unprocessable_entity}\n     end\n   end\n end\n\ndef update\n  respond_to do |format|\n   if @user.update(user_params)\n     format.html { redirect_to board_url }\n     format.json { render :show, status: :ok, location: @user }\n   else\n     format.html { render :edit }\n     format.json { render json: @user.errors, status: :unprocessable_entity}\n   end\n  end\nend\n\ndef destroy\n  authorize! :update, @user\n  @user.destroy\n  respond_to do |format|\n    format.html { redirect_to board_url }\n    format.json { head :no_content }\n  end\nend\n\nprivate\n  def set_user\n    @user = User.find(params[:id])\n  end\n\n  def user_params\n    params.require(:user).permit(:email, images_attributes: [:id, :name])\n  end\nend\n</code></pre>\n\n<p><strong>_form</strong></p>\n\n<pre><code>&lt;%= form_with(model: user, local: true) do |form| %&gt;\n &lt;%= form.fields_for :images do |image|  %&gt;\n  &lt;div class=\"image_fields\"&gt;\n   &lt;div class=\"field\"&gt;\n    &lt;%= image.label t('.img_name') %&gt;&lt;br&gt;\n    &lt;%= image.text_field :name %&gt;\n   &lt;/div&gt;\n  &lt;/div&gt;\n &lt;% end %&gt;\n\n &lt;div class=\"actions\"&gt;\n  &lt;%= form.submit %&gt;\n &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>class Image</strong></p>\n\n<pre><code>class Image &lt; ApplicationRecord\n belongs_to :ad\n belongs_to :user\n validates :name, presence: true\n ...\n</code></pre>\n\n<p><strong>class User</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :ads\n  has_many :images, dependent: :destroy\n   accepts_nested_attributes_for :images,\n                                reject_if: proc { |attributes| attributes['name'].blank? },\n                                allow_destroy: true\n\n   devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\nend\n</code></pre>\n\n<p><strong>Migrations</strong></p>\n\n<pre><code>class AddUserIdToImages &lt; ActiveRecord::Migration[5.1]\n   def change\n     add_column :images, :user_id, :integer\n   end\nend\n\nclass CreateImages &lt; ActiveRecord::Migration[5.1]\n   def change\n     create_table :images do |t|\n       t.string :name\n       t.references :ad, foreign_key: true\n\n       t.timestamps\n     end\n   end \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "timeout", "rvm"], "comments": [{"owner": {"reputation": 11, "user_id": 9625693, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-za93x9j5kFM/AAAAAAAAAAI/AAAAAAAAADQ/mASqNn13Ypk/photo.jpg?sz=128", "display_name": "Chris Guard", "link": "https://stackoverflow.com/users/9625693/chris-guard"}, "edited": false, "score": 0, "creation_date": 1523548623, "post_id": 49757588, "comment_id": 86616798, "body": "not helpful - but I ended up having my whole environment reset. probably not the best solution."}, {"owner": {"reputation": 1616, "user_id": 1016580, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1e5104f46e8d418cf915116ec201c653?s=128&d=identicon&r=PG", "display_name": "Alexei Khlebnikov", "link": "https://stackoverflow.com/users/1016580/alexei-khlebnikov"}, "edited": false, "score": 0, "creation_date": 1526385471, "post_id": 49757588, "comment_id": 87714870, "body": "This question looks like a duplicate of <a href=\"https://stackoverflow.com/questions/49800432/gem-cannot-access-rubygems-org\" title=\"gem cannot access rubygems org\">stackoverflow.com/questions/49800432/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 1713354, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/628b27d61e2e9d079ee47cb4d9b4867c?s=128&d=identicon&r=PG", "display_name": "Diego Charles", "link": "https://stackoverflow.com/users/1713354/diego-charles"}, "is_accepted": false, "score": 2, "last_activity_date": 1537294822, "creation_date": 1537294822, "answer_id": 52392510, "question_id": 49757588, "link": "https://stackoverflow.com/questions/49757588/rubygem-timeout-on-bundle-update/52392510#52392510", "title": "rubygem timeout on bundle update", "body": "<p>I got it solved by simple switching by wifi on/off on my Macbook Pro with OSx Mojave. </p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9370922, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "johnnie fujita", "link": "https://stackoverflow.com/users/9370922/johnnie-fujita"}, "is_accepted": false, "score": 0, "last_activity_date": 1542496318, "creation_date": 1542496318, "answer_id": 53356437, "question_id": 49757588, "link": "https://stackoverflow.com/questions/49757588/rubygem-timeout-on-bundle-update/53356437#53356437", "title": "rubygem timeout on bundle update", "body": "<p>the rubygems host server sometimes have problems dealing with ipv6.</p>\n\n<p>Basically i have changed my preference from ipv6 to ipv4 in windows 10. That must help for other systems to.</p>\n\n<p>For WINDOWS you'll do as follows:</p>\n\n<ol>\n<li><p>check your prefixpolicies:</p>\n\n<ul>\n<li><p>run</p>\n\n<pre><code>netsh insterface ipv6 show prefixpolicies\n</code></pre></li>\n<li><p>the output should be something like this:</p>\n\n<pre><code>Precedence label Prefix\n\n----------  -----  --------------------------------\n\n50      0  ::1/128\n40      1  ::/0        \n30      2  2002::/16\n20      4  ::ffff:0:0/96\n</code></pre></li>\n</ul></li>\n</ol>\n\n<p>The higher the number of precedence, higher the priority.</p>\n\n<p>So as you see, ipv6 ::/0 is right next to the localhost as the second priority.</p>\n\n<ol start=\"2\">\n<li><p>Let's put ipv4 in a higher preference.</p>\n\n<ul>\n<li><p>run:</p>\n\n<pre><code>netsh interface ipv6 set prefixpolicies ::ffff:0:0/96 46 4\n</code></pre></li>\n</ul></li>\n</ol>\n\n<p>After running this comand, try looking the prefixpolicies again.</p>\n\n<p>You will find ipv4 in a higher precedence now, with 46 beeing higher than 40 from ipv6.</p>\n\n<ol start=\"3\">\n<li>Now try reaching for the rubygem host running any \"gem\" command, you will probably be very pleased.</li>\n</ol>\n"}], "owner": {"reputation": 11, "user_id": 9625693, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-za93x9j5kFM/AAAAAAAAAAI/AAAAAAAAADQ/mASqNn13Ypk/photo.jpg?sz=128", "display_name": "Chris Guard", "link": "https://stackoverflow.com/users/9625693/chris-guard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 660, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1542496318, "creation_date": 1523374178, "last_edit_date": 1523383857, "question_id": 49757588, "link": "https://stackoverflow.com/questions/49757588/rubygem-timeout-on-bundle-update", "title": "rubygem timeout on bundle update", "body": "<p>I am getting a timeout error trying to update my gems. I would prefer not to have to change to unsecured paths. </p>\n\n<p>I can download the gems individually from rubygems using my browser - but <code>gem update</code> and <code>rvm gemset update</code> both fail with the following error:</p>\n\n<blockquote>\n  <p>ERROR:  While executing gem ... (Gem::RemoteFetcher::UnknownHostError)\n      timed out (<a href=\"https://api.rubygems.org/latest_specs.4.8.gz\" rel=\"nofollow noreferrer\">https://api.rubygems.org/latest_specs.4.8.gz</a>)</p>\n</blockquote>\n\n<p>When I run bundle update - I run into individual gems timing out (hence knowing I can download and install them individually), as an example: </p>\n\n<blockquote>\n  <p>Gem::RemoteFetcher::UnknownHostError: timed out\n  (<a href=\"https://rubygems.org/gems/ffi-1.9.23.gem\" rel=\"nofollow noreferrer\">https://rubygems.org/gems/ffi-1.9.23.gem</a>)\n  An error occurred while installing ffi (1.9.23), and Bundler cannot\n  continue.\n  Make sure that <code>gem install ffi -v '1.9.23'</code> succeeds before bundling.</p>\n</blockquote>\n\n<p>I have followed these posts: </p>\n\n<ol>\n<li><p><a href=\"https://stackoverflow.com/questions/19150017/ssl-error-when-installing-rubygems-unable-to-pull-data-from-https-rubygems-o\">SSL Error When installing rubygems, Unable to pull data from &#39;https://rubygems.org/</a></p></li>\n<li><p><a href=\"https://rubygems.org/pages/download#formats\" rel=\"nofollow noreferrer\">https://rubygems.org/pages/download#formats</a></p></li>\n</ol>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1523374326, "post_id": 49757511, "comment_id": 86530122, "body": "That&#39;s the result of (mis)interpreting UTF-8 as ISO 8859-1 (or vice-versa, depending on your point of view)."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1523375735, "post_id": 49757511, "comment_id": 86531076, "body": "Can you be more specific about what &quot;the result on the FTP&quot; means? After you store the file, how are you viewing its name and seeing the wrong characters? Can you be sure the problem is in the storing and not the viewing?"}, {"owner": {"reputation": 985, "user_id": 5594492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1e8866226fb038d2222eca991ea23a?s=128&d=identicon&r=PG&f=1", "display_name": "Safi Nettah", "link": "https://stackoverflow.com/users/5594492/safi-nettah"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1523375738, "post_id": 49757511, "comment_id": 86531079, "body": "Thanks @Stefan, solved with this answer <a href=\"https://stackoverflow.com/questions/31644103/ruby-converting-string-encoding-from-iso-8859-1-to-utf-8-not-working\" title=\"ruby converting string encoding from iso 8859 1 to utf 8 not working\">stackoverflow.com/questions/31644103/&hellip;</a>"}], "owner": {"reputation": 985, "user_id": 5594492, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac1e8866226fb038d2222eca991ea23a?s=128&d=identicon&r=PG&f=1", "display_name": "Safi Nettah", "link": "https://stackoverflow.com/users/5594492/safi-nettah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 15, "favorite_count": 0, "closed_date": 1523375828, "answer_count": 0, "score": 0, "last_activity_date": 1523373989, "creation_date": 1523373989, "question_id": 49757511, "link": "https://stackoverflow.com/questions/49757511/ruby-netftp-storbinary-with-non-ascii-filename", "closed_reason": "Duplicate", "title": "Ruby Net::Ftp storbinary with non ascii filename", "body": "<p>I do not succeed to store my file with a filename that contain non ascii char.</p>\n\n<p>I use <code>storbinary(\"STOR #{remotefile}\", data, 512, &amp;block)</code>,\nwith this filename <code>Filename_M\u00e9mo.pdf</code> but the result on the FTP is <code>Filename_M\u00c3\u00a9mo.pdf</code></p>\n\n<p>Any Idea ?\nThanks.</p>\n"}, {"tags": ["ruby", "docker", "db2", "sequel"], "comments": [{"owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523370608, "post_id": 49756173, "comment_id": 86527454, "body": "Which IBM Db2 client have you installed (it delivers libdb2.so.1 among other things) ?"}, {"owner": {"reputation": 424, "user_id": 7458242, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ySPqu.png?s=128&g=1", "display_name": "KnechtRootrecht", "link": "https://stackoverflow.com/users/7458242/knechtrootrecht"}, "reply_to_user": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523447582, "post_id": 49756173, "comment_id": 86563605, "body": "gem &#39;ibm_db&#39;, &#39;~&gt; 3.0&#39;, &#39;&gt;= 3.0.5&#39; I think this should provide all necessary drivers."}, {"owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523449111, "post_id": 49756173, "comment_id": 86564626, "body": "Verify libdb2.so.1 is present and ensure its directory is in the LD_LIBRARY_PATH by your chosen method."}, {"owner": {"reputation": 424, "user_id": 7458242, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ySPqu.png?s=128&g=1", "display_name": "KnechtRootrecht", "link": "https://stackoverflow.com/users/7458242/knechtrootrecht"}, "reply_to_user": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523451524, "post_id": 49756173, "comment_id": 86566501, "body": "Thank you. Can you tell me how to verify the libdb2.so.1 is present?"}, {"owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 1, "creation_date": 1523452325, "post_id": 49756173, "comment_id": 86567124, "body": "Use the find command or equivalent"}, {"owner": {"reputation": 424, "user_id": 7458242, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ySPqu.png?s=128&g=1", "display_name": "KnechtRootrecht", "link": "https://stackoverflow.com/users/7458242/knechtrootrecht"}, "reply_to_user": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523452706, "post_id": 49756173, "comment_id": 86567415, "body": "The libdb2.so.1 is present in /opt/app-root/src/.gem/ruby/gems/ibm_db-3.0.5/lib/clidriver/&zwnj;&#8203;lib/libdb2.so.1 Do I need to add it to the LD_LIBRARY_PATH manually?"}, {"owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523453010, "post_id": 49756173, "comment_id": 86567635, "body": "The aim is to eliminate this as a cause of your issue by ensuring that location is on the LD_LIBRARY_PATH.  See other posts for help on how to set (append to) that variable temporarily or permanently."}, {"owner": {"reputation": 424, "user_id": 7458242, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ySPqu.png?s=128&g=1", "display_name": "KnechtRootrecht", "link": "https://stackoverflow.com/users/7458242/knechtrootrecht"}, "reply_to_user": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523455657, "post_id": 49756173, "comment_id": 86569651, "body": "I appended it now as following: &quot;export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/app-root/src/.gem/ruby&zwnj;&#8203;/gems/ibm_db-3.0.5/l&zwnj;&#8203;ib/clidriver/lib/&quot;, but the error is still the same..."}, {"owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523455746, "post_id": 49756173, "comment_id": 86569721, "body": "Did you first close/stop ruby, make the change, then restart ruby?"}, {"owner": {"reputation": 424, "user_id": 7458242, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ySPqu.png?s=128&g=1", "display_name": "KnechtRootrecht", "link": "https://stackoverflow.com/users/7458242/knechtrootrecht"}, "reply_to_user": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523455854, "post_id": 49756173, "comment_id": 86569806, "body": "Yeah, I&#39;m working in a docker-container so I restart the whole machine when I change something."}, {"owner": {"reputation": 424, "user_id": 7458242, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ySPqu.png?s=128&g=1", "display_name": "KnechtRootrecht", "link": "https://stackoverflow.com/users/7458242/knechtrootrecht"}, "reply_to_user": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 0, "creation_date": 1523530936, "post_id": 49756173, "comment_id": 86603872, "body": "ldd shows: libdb2.so.1 =&gt; not found, though I added the path to LD_LIBRARY_PATH. If I copy the libdb2.so.1 to /usr/lib64 it works but I get SQLCODE -1042."}, {"owner": {"reputation": 8474, "user_id": 8290634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d23c338d78a579b717f1cb6e9f16fb1b?s=128&d=identicon&r=PG&f=1", "display_name": "mao", "link": "https://stackoverflow.com/users/8290634/mao"}, "edited": false, "score": 1, "creation_date": 1523531571, "post_id": 49756173, "comment_id": 86604309, "body": "Seems your Docker config is not correct for both LD_LIBRARY_PATH and PATH and maybe others. You should not move Db2 library files around.  Docker is not my specialty although Db2-server runs fine in one of my docker containers as supplied by Db2-developer community edition. Maybe edit your question to add docker tag to get advice from docker folks."}], "owner": {"reputation": 424, "user_id": 7458242, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/ySPqu.png?s=128&g=1", "display_name": "KnechtRootrecht", "link": "https://stackoverflow.com/users/7458242/knechtrootrecht"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 246, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523533221, "creation_date": 1523370383, "last_edit_date": 1523533221, "question_id": 49756173, "link": "https://stackoverflow.com/questions/49756173/ruby-sequel-ibmdb-adapternotfound", "title": "Ruby Sequel ibmdb AdapterNotFound", "body": "<p>I'm trying to connect to a db2-database with Sequel.\nI'm on an OpenShift Platform using a CentOS-image with Ruby.\nI installed ibm_db: <code>gem 'ibm_db', '~&gt; 3.0', '&gt;= 3.0.5'</code> and I'm trying to connect via Sequel as following:</p>\n\n<pre><code>require 'sequel'\nrequire 'ibm_db'\n\nrequire_relative 'database_logger'\n\ndef create_database_connection(logger)\n\n  credentials = {\n    adapter: \"ibmdb\",\n    database: \"myexampledb\",\n    host: \"myexamplehost.com\",\n    port: \"80\",\n    username: ENV['DB_USERNAME'],\n    password: ENV['DB_PASSWORD'],\n    encoding: 'utf8'\n  }\n\n  if ENV['PACT_BROKER_DATABASE_PORT'] =~ /^\\d+$/\n    credentials[:port] = ENV['PACT_BROKER_DATABASE_PORT'].to_i\n  end\n\n  connection = Sequel.connect(credentials.merge(logger: DatabaseLogger.new(logger), encoding: 'utf8'))\n  connection.extension(:connection_validator)\n  connection.pool.connection_validation_timeout = -1\n  connection\nend\n</code></pre>\n\n<p>But I get the following message:</p>\n\n<pre><code>[1] Puma starting in cluster mode...\n[1] * Version 3.11.3 (ruby 2.3.1-p112), codename: Love Song\n[1] * Min threads: 2, max threads: 4\n[1] * Environment: production\n[1] * Process workers: 2\n[1] * Preloading application\nSequel::AdapterNotFound: LoadError: libdb2.so.1: cannot open shared object file: No such file or directory - /opt/app-root/src/.gem/ruby/extensions/x86_64-linux/2.3.0/ibm_db-3.0.5/ibm_db.so\n  /opt/app-root/src/.gem/ruby/gems/sequel-5.7.1/lib/sequel/adapters/ibmdb.rb:3:in `require'\n  /opt/app-root/src/.gem/ruby/gems/sequel-5.7.1/lib/sequel/adapters/ibmdb.rb:3:in `&lt;top (required)&gt;'\n  /opt/app-root/src/.gem/ruby/gems/sequel-5.7.1/lib/sequel/database/connecting.rb:88:in `require'\n  /opt/app-root/src/.gem/ruby/gems/sequel-5.7.1/lib/sequel/database/connecting.rb:88:in `load_adapter'\n  /opt/app-root/src/.gem/ruby/gems/sequel-5.7.1/lib/sequel/database/connecting.rb:17:in `adapter_class'\n  /opt/app-root/src/.gem/ruby/gems/sequel-5.7.1/lib/sequel/database/connecting.rb:45:in `connect'\n  /opt/app-root/src/.gem/ruby/gems/sequel-5.7.1/lib/sequel/core.rb:116:in `connect'\n  /app/pact_broker/database_connection.rb:42:in `create_database_connection'\n  config.ru:11:in `block (2 levels) in &lt;main&gt;'\n  /opt/app-root/src/.gem/ruby/gems/pact_broker-2.18.0/lib/pact_broker/app.rb:29:in `initialize'\n  config.ru:9:in `new'\n  config.ru:9:in `block in &lt;main&gt;'\n  /opt/app-root/src/.gem/ruby/gems/rack-2.0.4/lib/rack/builder.rb:55:in `instance_eval'\n  /opt/app-root/src/.gem/ruby/gems/rack-2.0.4/lib/rack/builder.rb:55:in `initialize'\n  config.ru:in `new'\n  config.ru:in `&lt;main&gt;'\n  /opt/app-root/src/.gem/ruby/gems/rack-2.0.4/lib/rack/builder.rb:49:in `eval'\n  /opt/app-root/src/.gem/ruby/gems/rack-2.0.4/lib/rack/builder.rb:49:in `new_from_string'\n  /opt/app-root/src/.gem/ruby/gems/rack-2.0.4/lib/rack/builder.rb:40:in `parse_file'\n  /opt/app-root/src/.gem/ruby/gems/puma-3.11.3/lib/puma/configuration.rb:318:in `load_rackup'\n  /opt/app-root/src/.gem/ruby/gems/puma-3.11.3/lib/puma/configuration.rb:243:in `app'\n  /opt/app-root/src/.gem/ruby/gems/puma-3.11.3/lib/puma/runner.rb:138:in `load_and_bind'\n  /opt/app-root/src/.gem/ruby/gems/puma-3.11.3/lib/puma/cluster.rb:397:in `run'\n  /opt/app-root/src/.gem/ruby/gems/puma-3.11.3/lib/puma/launcher.rb:183:in `run'\n  /opt/app-root/src/.gem/ruby/gems/puma-3.11.3/lib/puma/cli.rb:77:in `run'\n  /opt/app-root/src/.gem/ruby/gems/puma-3.11.3/bin/puma:10:in `&lt;top (required)&gt;'\n  /opt/app-root/src/bin/puma:23:in `load'\n  /opt/app-root/src/bin/puma:23:in `&lt;top (required)&gt;'\n[1] ! Unable to load application: Sequel::AdapterNotFound: LoadError: libdb2.so.1: cannot open shared object file: No such file or directory - /opt/app-root/src/.gem/ruby/extensions/x86_64-linux/2.3.0/ibm_db-3.0.5/ibm_db.so\nbundler: failed to load command: puma (/opt/app-root/src/bin/puma)\n</code></pre>\n\n<p>I'm not sure what's wrong.</p>\n\n<pre><code>ls -a /opt/app-root/src/.gem/ruby/extensions/x86_64-linux/2.3.0/ibm_db-3.0.5/\n</code></pre>\n\n<p>shows me the ibm_db.so.</p>\n\n<p>ldd shows:</p>\n\n<pre><code>ldd /opt/app-root/src/.gem/ruby/extensions/x86_64-linux/2.3.0/ibm_db-3.0.5/ibm_db.so\"\n ---&gt; Running in a31043e66bbb\n    linux-vdso.so.1 =&gt;  (0x00007ffcf9b44000)\n    libruby.so.2.3 =&gt; /opt/rh/rh-ruby23/root/usr/lib64/libruby.so.2.3 (0x00007f6af59f6000)\n    libdb2.so.1 =&gt; not found\n    libpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007f6af57d3000)\n    libdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007f6af55cf000)\n    libcrypt.so.1 =&gt; /lib64/libcrypt.so.1 (0x00007f6af5397000)\n    libm.so.6 =&gt; /lib64/libm.so.6 (0x00007f6af5095000)\n    libc.so.6 =&gt; /lib64/libc.so.6 (0x00007f6af4cd2000)\n    /lib64/ld-linux-x86-64.so.2 (0x00007f6af60a0000)\nlibfreebl3.so =&gt; /lib64/libfreebl3.so (0x00007f6af4ace000)\n</code></pre>\n\n<p>The libdb2.so.1 is present: <code>/opt/app-root/src/.gem/ruby/gems/ibm_db-3.0.5/lib/clidriver/lib/libdb2.so.1</code>\nbut adding it to LD_LIBRARY_PATH as following:</p>\n\n<pre><code>export LD_LIBRARY_PATH=$LD_LIBRARY_PATH:/opt/app-root/src/.gem/ruby/gems/ibm_db-3.0.5/lib/clidriver/lib/\n</code></pre>\n\n<p>does not help.\nMaybe someone has an idea?</p>\n\n<p>If I try to just copy <code>libdb2.so.1</code> to <code>/usr/lib64</code> libdb2.so.1 is found, but I get the following error: <code>! Unable to load application: Sequel::DatabaseConnectionError: UncaughtThrowError: uncaught throw :\"Connection failed: [IBM][CLI Driver] SQL10007N Message \\\"0\\\" could not be retrieved. Reason code: \\\"3\\\". SQLCODE=-1042\"</code> </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6486, "user_id": 1116230, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/55a894894150db28d6641f0c57e48bac?s=128&d=identicon&r=PG", "display_name": "Nico Haase", "link": "https://stackoverflow.com/users/1116230/nico-haase"}, "edited": false, "score": 0, "creation_date": 1523370467, "post_id": 49755576, "comment_id": 86527348, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/24980295/strictly-convert-string-to-integer-or-nil\">Strictly convert string to integer (or nil)</a>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 3, "creation_date": 1523372574, "post_id": 49755576, "comment_id": 86528937, "body": "Question is a little unclear -- What is <code>006 025 004 034 158 019 255 000</code>? An array? A string? (And if so, what is the separator? A single space?)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1523372607, "post_id": 49755576, "comment_id": 86528962, "body": "<i>&quot;I have the following output&quot;</i> \u2013 how do you generate that output? Show your code, please."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1523377334, "post_id": 49755576, "comment_id": 86532009, "body": "When giving an example, always show inputs and outputs as valid Ruby objects. Here, assuming they are strings, surround each with single or double quotes.  Moreover, it is helpful to assign a variable to each input object (e.g., <code>str = &quot;006 025 004 034 158 019 255 000&quot;</code>). That way, readers can refer to those variables (here just <code>str</code>) in answers and comments without having to define them."}, {"owner": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "edited": false, "score": 0, "creation_date": 1523382514, "post_id": 49755576, "comment_id": 86535044, "body": "It is an array:   [&quot;006&quot;, &quot;025&quot;,&quot;004&quot;,&quot;034&quot;,&quot;158&quot;,&quot;019&quot;,&quot;255&quot;,&quot;000&quot;]"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1523382748, "post_id": 49755576, "comment_id": 86535167, "body": "Please edit the question rather than trying to clarify in a comment."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 1, "creation_date": 1523383021, "post_id": 49755576, "comment_id": 86535322, "body": "Your question still needs clarification.  Should the result be a string, an array of numbers, an array of strings, or something else entirely?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1523387823, "post_id": 49755576, "comment_id": 86538078, "body": "I am downvoting and voting to close because the OP has seen the comments above but has failed to edit the question to clarify what is being asked."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523388813, "post_id": 49755576, "comment_id": 86538534, "body": "What is the code you are having trouble with? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ? Please, provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523388825, "post_id": 49755576, "comment_id": 86538538, "body": "Can you provide a <i>precise</i> specification of what it is that you want to happen, including any and all rules, exceptions from those rules, corner cases, special cases, boundary cases, and edge cases? Can you provide sample inputs and outputs demonstrating what you expect to happen, both in normal cases, and in all the exceptions, corner cases, special cases, boundary cases, and edge cases? Please, also make sure to provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523388864, "post_id": 49755576, "comment_id": 86538552, "body": "&quot;How can I make them to be like this&quot; \u2013 You do it by writing a program which does that. If you have a problem with your program, carefully read the documentation of all the methods, classes, modules, and libraries you are using, write tests for your programs, trace the execution with pen and paper, single-step it in a debugger, then sleep on it, start again from the beginning, sleep on it again, and <i>then and only then</i> narrow your problem down to a concise, focused, simple, short, reproducible <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and ask a specific, focused, narrow question on <a href=\"https://stackoverflow.com\">Stack Overflow</a>."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1523395806, "post_id": 49755576, "comment_id": 86541855, "body": "&quot;Also ok to convert &quot;006&quot; to &quot;6&quot;, since I have them stored in a variable&quot;  What are you trying to say here that isn&#39;t covered by your question on how to convert values inside the array?  The first part of your edit is helpful, but this muddies the waters yet again."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1523396757, "post_id": 49755576, "comment_id": 86542228, "body": "<code>[&quot;006&quot;,&quot;025&quot;,&quot;004&quot;,&quot;034&quot;,&quot;158&quot;,&quot;019&quot;,&quot;255&quot;,&quot;000&quot;].map { |n| n.to_i.to_s }</code>"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1523396837, "post_id": 49755576, "comment_id": 86542266, "body": "@SagarPandya Alternatively, <code>[&quot;006&quot;,&quot;025&quot;,&quot;004&quot;,&quot;034&quot;,&quot;158&quot;,&quot;019&quot;,&quot;255&quot;,&quot;000&quot;].map { |s| s.sub(&#47;^0+(\\d)&#47;, &#39;\\1&#39;) }</code>"}, {"owner": {"reputation": 942, "user_id": 666516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d64b5bce050cface59b6b3405e381554?s=128&d=identicon&r=PG", "display_name": "Taylored Web Sites", "link": "https://stackoverflow.com/users/666516/taylored-web-sites"}, "edited": false, "score": 0, "creation_date": 1589916890, "post_id": 49755576, "comment_id": 109482256, "body": "The question is perfectly clear to me.  Note the tag is for Ruby.  Maybe an indication that Ruby is being used here."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 942, "user_id": 666516, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d64b5bce050cface59b6b3405e381554?s=128&d=identicon&r=PG", "display_name": "Taylored Web Sites", "link": "https://stackoverflow.com/users/666516/taylored-web-sites"}, "edited": false, "score": 0, "creation_date": 1589952746, "post_id": 49755576, "comment_id": 109493124, "body": "@TayloredWebSites The question is from 2018 and has been edited multiple times since then, so it doesn&#39;t match the version that generated the comments."}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1523371300, "post_id": 49755876, "comment_id": 86528003, "body": "You could use <code>map(&amp;:to_i)</code> for your mapping."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1523371383, "post_id": 49755876, "comment_id": 86528074, "body": "Good point and thanks - updated my answer"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 3, "creation_date": 1523371745, "post_id": 49755876, "comment_id": 86528369, "body": "Your <code>split</code> won&#39;t work in its current form, there are no commas in the original string.  Use <code>split(&#47;\\s+&#47;)</code> to split on one or more whitespaces, or <code>split(&#47;\\D+&#47;)</code> for one or more non-digits of any type."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 2, "creation_date": 1523374664, "post_id": 49755876, "comment_id": 86530367, "body": "@pjs or just <code>.split</code>."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1523381116, "post_id": 49755876, "comment_id": 86534249, "body": "@mudasobwa <code>.split</code> won&#39;t work on something as funky as <code>&#39;1  2;30 04&#39;</code>.  <code>.split(&#47;\\D+&#47;)</code> will."}, {"owner": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "edited": false, "score": 0, "creation_date": 1523393523, "post_id": 49755876, "comment_id": 86540870, "body": "Clarified my question, and tried it in my code but without luck."}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 2, "last_activity_date": 1589950209, "last_edit_date": 1589950209, "creation_date": 1523369551, "answer_id": 49755876, "question_id": 49755576, "link": "https://stackoverflow.com/questions/49755576/how-to-remove-leading-zeros-from-decimal-strings/49755876#49755876", "title": "How to remove leading zeros from decimal strings", "body": "<p>From \"<a href=\"https://stackoverflow.com/questions/33371792/remove-leading-zeros-ruby\">Remove leading zeros Ruby</a>\":</p>\n\n<pre><code>string = '006 025 004 034 158 019 255 000'\nanswer = string.split(\",\").map(&amp;:to_i)\n</code></pre>\n\n<p>This returns:</p>\n\n<pre><code>[6, 25, 4, 34, 158, 19, 255, 0]\n</code></pre>\n\n<p>If you want to flatten that and turn it back into a string of the same format:</p>\n\n<pre><code>answer = answer.join(' ')\n</code></pre>\n\n<p>which leaves:</p>\n\n<pre><code>\"6 25 4 34 158 19 255 0\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 2, "creation_date": 1523380188, "post_id": 49758457, "comment_id": 86533677, "body": "Some weird voting happening today. There is no reason this should be downvoted."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1523382950, "post_id": 49758457, "comment_id": 86535279, "body": "I posted my answer before the OP noted in a comment that the receiver is an array of strings rather than a string."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1523389064, "post_id": 49758457, "comment_id": 86538643, "body": "@SagarPandya: the tooltip when you hover over the downvote arrow gives guidance as to when to downvote: &quot;this answer is not useful&quot;. Some people interpret useful to mean &quot;useful to the <a href=\"https://stackoverflow.com\">Stack Overflow</a> community&quot;, and in that sense, answers to crappy questions are not useful, since they reward anti-social (in the sense of &quot;society&quot; being the <a href=\"https://stackoverflow.com\">Stack Overflow</a> community at large) behavior. I don&#39;t know who and why downvoted this answer, but it is one possible explanation."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1523389855, "post_id": 49758457, "comment_id": 86539034, "body": "@J&#246;rgWMittag I see, that would make sense. Though if this is the case then I wish the voter was consistent and downvoted all answers to this question."}, {"owner": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "edited": false, "score": 0, "creation_date": 1523393553, "post_id": 49758457, "comment_id": 86540885, "body": "Clarified my question, and tried it in my code but without luck"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "edited": false, "score": 0, "creation_date": 1523397665, "post_id": 49758457, "comment_id": 86542600, "body": "@user2909180 don&#39;t rely on luck. Take some time and follow a good tutorial where you&#39;ll gain the necessary skills to tackle these kinds of problems :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1523463456, "post_id": 49758457, "comment_id": 86575352, "body": "You could also use <code>\\b</code> instead of <code>(?&lt;= |\\A)</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523468741, "post_id": 49758457, "comment_id": 86578210, "body": "Thanks, @Stefan. I&#39;m on the fence as to which to use. <code>\\b</code> is simpler but what I have may read better."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1523377011, "creation_date": 1523377011, "answer_id": 49758457, "question_id": 49755576, "link": "https://stackoverflow.com/questions/49755576/how-to-remove-leading-zeros-from-decimal-strings/49758457#49758457", "title": "How to remove leading zeros from decimal strings", "body": "<pre><code>\"006 025 004 034 158 019 255 000\".gsub(/(?&lt;= |\\A)0+(?=\\d)/,'')\n  #=&gt; \"6 25 4 34 158 19 255 0\"\n</code></pre>\n\n<p>The regular expression reads:</p>\n\n<ul>\n<li>Match a space or the beginning of the string in a positive lookbehind</li>\n<li>Match one or more zeros</li>\n<li>Match a digit in a positive lookahead</li>\n</ul>\n"}], "owner": {"reputation": 143, "user_id": 2909180, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/b679bf3d6512c5e95106931a34f81afb?s=128&d=identicon&r=PG&f=1", "display_name": "user2909180", "link": "https://stackoverflow.com/users/2909180/user2909180"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 987, "favorite_count": 0, "closed_date": 1523388787, "answer_count": 2, "score": -2, "last_activity_date": 1589950209, "creation_date": 1523368676, "last_edit_date": 1589950137, "question_id": 49755576, "link": "https://stackoverflow.com/questions/49755576/how-to-remove-leading-zeros-from-decimal-strings", "closed_reason": "Needs details or clarity", "title": "How to remove leading zeros from decimal strings", "body": "<p>Given an array of decimal values stored as strings, such as </p>\n\n<pre><code>[\"006\", \"025\", \"004\", \"034\", \"158\", \"019\", \"255\", \"000\"]\n</code></pre>\n\n<p>how can I remove all leading zeros while preserving the values as strings to obtain </p>\n\n<pre><code>[\"6\", \"25\", \"4\", \"34\", \"158\", \"19\", \"255\", \"0\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "resque"], "answers": [{"tags": [], "owner": {"reputation": 16564, "user_id": 1261399, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/679444399bbf92e3a5d3f16347809f3f?s=128&d=identicon&r=PG", "display_name": "Leo Correa", "link": "https://stackoverflow.com/users/1261399/leo-correa"}, "is_accepted": true, "score": 0, "last_activity_date": 1523367351, "creation_date": 1523367351, "answer_id": 49755085, "question_id": 49754948, "link": "https://stackoverflow.com/questions/49754948/wrong-number-of-arguments-given-1-expected-2-with-resque-worker/49755085#49755085", "title": "wrong number of arguments (given 1, expected 2) with Resque Worker", "body": "<p>The issue is that you're passing arguments to <code>enqueue_to</code> as keyword arguments or a <code>Hash</code>.</p>\n\n<p>Instead, remove the keys and pass the arguments as such.</p>\n\n<pre><code>Resque.enqueue_to(:high, SendInvitationEmail, @user.token, @invitee.token)\n</code></pre>\n\n<p>Or you could modify the method signature of perform to take in a hash or keyword arguments as</p>\n\n<pre><code>class SendInvitationEmail\n  def self.perform(user_token:, invitee_token:)\n      Frontend::UserManagementMailer.invitation_email(user_token, invitee_token)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 9484815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45fd70accf64626057e81e840f5859a7?s=128&d=identicon&r=PG&f=1", "display_name": "windsofheaven", "link": "https://stackoverflow.com/users/9484815/windsofheaven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 0, "accepted_answer_id": 49755085, "answer_count": 1, "score": 0, "last_activity_date": 1523367351, "creation_date": 1523366989, "question_id": 49754948, "link": "https://stackoverflow.com/questions/49754948/wrong-number-of-arguments-given-1-expected-2-with-resque-worker", "title": "wrong number of arguments (given 1, expected 2) with Resque Worker", "body": "<p>I understand the self.perform method needs two arguments and I am passing them in. I can assure you the instance variables have values because I have checked. What can you see am I doing wrong?</p>\n\n<p>Controller:</p>\n\n<pre><code>Resque.enqueue_to(:high, SendInvitationEmail, user_token: @user.token, invitee_token: @invitee.token)\n</code></pre>\n\n<p>Worker:</p>\n\n<pre><code>class SendInvitationEmail\n  def self.perform(user_token, invitee_token)\n      Frontend::UserManagementMailer.invitation_email(user_token, invitee_token)\n  end\nend\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>wrong number of arguments (given 1, expected 2) line 3\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "csv"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1523367041, "post_id": 49754872, "comment_id": 86524791, "body": "How can I reproduce your problem? Can you write a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>? What is <code>response</code>? Which line does the error message originate from?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1523367178, "post_id": 49754872, "comment_id": 86524889, "body": "You&#39;ve mis-spelt <code>ecoding</code> (should be <code>encoding</code>), but that&#39;s doesn&#39;t seem to be relevant since you&#39;re not actually using this variable anywhere?"}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1523440899, "post_id": 49755936, "comment_id": 86559117, "body": "I&#39;m somewhat baffled how the OP, <i>and</i> that other answer, <i>and</i> you have all mis-spelt &quot;e<b>n</b>coding&quot; the same way!"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1523369728, "creation_date": 1523369728, "answer_id": 49755936, "question_id": 49754872, "link": "https://stackoverflow.com/questions/49754872/error-while-reading-csv-file-from-remote-url/49755936#49755936", "title": "error while reading csv file from remote url", "body": "<p>From <a href=\"https://stackoverflow.com/questions/7632473/encoding-error-while-writing-data-from-excelfile-to-database-mysql\">Encoding error while writing data from excelfile to database (mysql)</a></p>\n\n<p>Try adding </p>\n\n<pre><code># ecoding: utf-8\n</code></pre>\n\n<p>To your .rb file, or alternatively use the magic_encoding gem</p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 2441483, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64c857bd73ce66a277327f234ec069aa?s=128&d=identicon&r=PG", "display_name": "dan_a", "link": "https://stackoverflow.com/users/2441483/dan-a"}, "is_accepted": false, "score": 0, "last_activity_date": 1523370898, "creation_date": 1523370898, "answer_id": 49756370, "question_id": 49754872, "link": "https://stackoverflow.com/questions/49754872/error-while-reading-csv-file-from-remote-url/49756370#49756370", "title": "error while reading csv file from remote url", "body": "<p>I assume this error is occurring when you call <code>CSV.parse</code> on the response. You can force the proper encoding on the <code>response</code> string before parsing it, like this:</p>\n\n<pre><code>response.force_encoding(Encoding::UTF_8)\nCSV.parse(response, headers: true, header_converters: :symbol) do |row|\n  puts row\nend\n</code></pre>\n"}], "owner": {"reputation": 428, "user_id": 781333, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/114bca93aa547e99d2cf0853d61f72c3?s=128&d=identicon&r=PG", "display_name": "Sunny ", "link": "https://stackoverflow.com/users/781333/sunny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 138, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523370898, "creation_date": 1523366726, "question_id": 49754872, "link": "https://stackoverflow.com/questions/49754872/error-while-reading-csv-file-from-remote-url", "title": "error while reading csv file from remote url", "body": "<p>I am reading CSV file from the remote location and then parsing it to store into the local collection, however, I am getting following error and the response is getting as some garbage characters</p>\n\n<pre><code>Encoding::UndefinedConversionError: \"\\xD0\" from ASCII-8BIT to UTF-8\n</code></pre>\n\n<p>Here is code to fetch the csv from the remote location </p>\n\n<pre><code>    uri = URI.parse(site_url)\n    data = {'token' =&gt; \"xxxxxxxxxxxxxx\"}\n    req = Net::HTTP::Get.new(uri.path)\n    req.set_form_data(data)\n    http = Net::HTTP.new(uri.host, uri.port)\n    if uri.scheme =='https'\n      pem = File.read(\"#{Rails.root}/config/ca-certificates.crt\")\n      http.use_ssl = true\n      http.cert = OpenSSL::X509::Certificate.new(pem)\n      http.verify_mode = OpenSSL::SSL::VERIFY_PEER\n    end\n    response = http.start do |httpvar|\n      httpvar.request(req)\n    end\n    if response.kind_of?(Net::HTTPRedirection)\n      headers = {'Content-Type' =&gt; \"text/csv; ecoding=utf-8\" }\n      uri = URI.parse(response['location'])\n      response = open(uri).read\n    end\n     CSV.parse(response, headers: true, header_converters: :symbol) do |row|\n      puts row\n    end\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "string"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1523363545, "post_id": 49753714, "comment_id": 86522019, "body": "Could you check the code example? <code>id</code> should have <code>Array</code> type: [23] <code>pry(main)&gt; id = [&quot;Gh089k&quot; , &quot;HG987&quot;]  =&gt; [&quot;Gh089k&quot;, &quot;HG987&quot;] [25] pry(main)&gt; id.class =&gt; Array</code>"}, {"owner": {"reputation": 173, "user_id": 8508408, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/53ea69f3734d6b9383a35531d4c011bb?s=128&d=identicon&r=PG&f=1", "display_name": "compsy", "link": "https://stackoverflow.com/users/8508408/compsy"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1523363690, "post_id": 49753714, "comment_id": 86522133, "body": "@mrzasa id type is string.<code>id.class</code> gives string as output"}, {"owner": {"reputation": 2508, "user_id": 2056593, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0c6361565de749323c14999412d23d2e?s=128&d=identicon&r=PG", "display_name": "muZk", "link": "https://stackoverflow.com/users/2056593/muzk"}, "edited": false, "score": 0, "creation_date": 1523363778, "post_id": 49753714, "comment_id": 86522194, "body": "can you put the first line of your uniqID.txt file? Seems like it is <code>&quot;[\\&quot;Gh089k\\&quot;, \\&quot;HG987\\&quot;]&quot;</code> so when ruby reads it, it is just a string..."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1523363780, "post_id": 49753714, "comment_id": 86522197, "body": "please, just run <code>id = [&quot;Gh089k&quot; , &quot;HG987&quot;];  id.class</code> in a console"}, {"owner": {"reputation": 173, "user_id": 8508408, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/53ea69f3734d6b9383a35531d4c011bb?s=128&d=identicon&r=PG&f=1", "display_name": "compsy", "link": "https://stackoverflow.com/users/8508408/compsy"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1523363883, "post_id": 49753714, "comment_id": 86522269, "body": "@mrzasa id = [&quot;Gh089k&quot; , &quot;HG987&quot;]; This gives an type Array. but when I read from txt, It act as type string"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523367433, "post_id": 49753714, "comment_id": 86525072, "body": "@compsy in your example code, you assign <code>[&quot;Gh089k&quot; , &quot;HG987&quot;]</code> to <code>id</code>, thus overwriting any previous value. <code>id.class</code> is therefore <code>Array</code>, not <code>String</code>. If you wanted to show something else, you should edit your example accordingly (maybe provide two examples)."}], "answers": [{"tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": true, "score": 2, "last_activity_date": 1523363820, "creation_date": 1523363820, "answer_id": 49753887, "question_id": 49753714, "link": "https://stackoverflow.com/questions/49753714/ruby-convert-string-to-array/49753887#49753887", "title": "Ruby: convert string to array", "body": "<p>It looks like a JSON string. You can parse json string to get the desired result.</p>\n\n<pre><code>require 'json'\nJSON.parse(\"[\\\"Gh089k\\\", \\\"HG987\\\"]\") # =&gt; [\"Gh089k\", \"HG987\"]\n</code></pre>\n\n<p>Here:</p>\n\n<pre><code>id = JSON.parse(a[0])\n</code></pre>\n\n<p>Hope it helps !</p>\n"}], "owner": {"reputation": 173, "user_id": 8508408, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/53ea69f3734d6b9383a35531d4c011bb?s=128&d=identicon&r=PG&f=1", "display_name": "compsy", "link": "https://stackoverflow.com/users/8508408/compsy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 49753887, "answer_count": 1, "score": -1, "last_activity_date": 1523363820, "creation_date": 1523363395, "question_id": 49753714, "link": "https://stackoverflow.com/questions/49753714/ruby-convert-string-to-array", "title": "Ruby: convert string to array", "body": "<pre><code>a = IO.readlines('uniqID.txt')\nputs id = a[0]\nid = [\"Gh089k\" , \"HG987\"] #getting value from txt file \nid.class #String\nid.push(\"GD977\")\n</code></pre>\n\n<p>How to convert the above string into array. so that I use method like push. Here id is string looks like an array</p>\n\n<pre><code>Error: undefined method `push' for \"[\\\"Gh089k\\\", \\\"HG987\\\"]\":String (NoMethodError)\n</code></pre>\n"}, {"tags": ["ruby", "puppet"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1523360934, "post_id": 49751756, "comment_id": 86520189, "body": "Optional parameters with default values need to be the final arguments. It would have to be 2 and 3, not 1 and 3."}, {"owner": {"reputation": 243, "user_id": 6857273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Ooo_KH-W8eY/AAAAAAAAAAI/AAAAAAAAfFs/bir1rD9r7Ag/photo.jpg?sz=128", "display_name": "Christian Mei&#223;ner", "link": "https://stackoverflow.com/users/6857273/christian-mei%c3%9fner"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1523366504, "post_id": 49751756, "comment_id": 86524369, "body": "But where i have to define the default values? In def or in dispatch part? Can you provide an working example please?"}], "answers": [{"comments": [{"owner": {"reputation": 243, "user_id": 6857273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Ooo_KH-W8eY/AAAAAAAAAAI/AAAAAAAAfFs/bir1rD9r7Ag/photo.jpg?sz=128", "display_name": "Christian Mei&#223;ner", "link": "https://stackoverflow.com/users/6857273/christian-mei%c3%9fner"}, "edited": false, "score": 0, "creation_date": 1523510852, "post_id": 49777601, "comment_id": 86592135, "body": "Ok, <code>optional_param</code> does the trick. This is what I missed in my tests. Thanks a lot."}], "tags": [], "owner": {"reputation": 605, "user_id": 3075306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/62c717680d82c127c2cb6e0de3e203b3?s=128&d=identicon&r=PG&f=1", "display_name": "balder", "link": "https://stackoverflow.com/users/3075306/balder"}, "is_accepted": true, "score": 0, "last_activity_date": 1523456531, "creation_date": 1523456531, "answer_id": 49777601, "question_id": 49751756, "link": "https://stackoverflow.com/questions/49751756/how-to-define-optional-parameters-in-puppetfunctions/49777601#49777601", "title": "How to define optional parameters in Puppet::Functions", "body": "<p>The following should do it</p>\n\n<pre><code>  Puppet::Functions.create_function(:foo) do\n    dispatch :foo do\n      param 'String', :param_1\n      optional_param 'String', :param_2\n      optional_param 'String', :param_3\n\n      def foo(param_1, param_2='default_value', param_3='default_value')\n        puts \"#{param_1} - #{param_2} - #{param_3}\"\n      end\n  end\n</code></pre>\n\n<p>see here for an example <a href=\"https://github.com/puppetlabs/puppetlabs-stdlib/blob/master/lib/puppet/functions/to_json_pretty.rb\" rel=\"nofollow noreferrer\">https://github.com/puppetlabs/puppetlabs-stdlib/blob/master/lib/puppet/functions/to_json_pretty.rb</a></p>\n"}], "owner": {"reputation": 243, "user_id": 6857273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Ooo_KH-W8eY/AAAAAAAAAAI/AAAAAAAAfFs/bir1rD9r7Ag/photo.jpg?sz=128", "display_name": "Christian Mei&#223;ner", "link": "https://stackoverflow.com/users/6857273/christian-mei%c3%9fner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 772, "favorite_count": 0, "accepted_answer_id": 49777601, "answer_count": 1, "score": 0, "last_activity_date": 1523456531, "creation_date": 1523357419, "last_edit_date": 1523364922, "question_id": 49751756, "link": "https://stackoverflow.com/questions/49751756/how-to-define-optional-parameters-in-puppetfunctions", "title": "How to define optional parameters in Puppet::Functions", "body": "<p>I want to create a puppet ruby function with <code>Puppet::Functions.create_function</code>. Here i define some parameters. Some of this should be optional or should have default values.</p>\n\n<pre><code>Puppet::Functions.create_function(:'foo') do\n  dispatch :bar do\n    param 'String', :param_1\n    param 'String', :param_2\n    param 'String', :param_3\n\n    def bar(a,b,c)\n      puts \"#{a} - #{b} - #{c}\"\n    end\nend\n</code></pre>\n\n<p>param_1 and param_3 should be optional. Is there a way to do this?</p>\n"}, {"tags": ["ruby", "instance-variables"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1523358890, "post_id": 49751539, "comment_id": 86518797, "body": "&quot;this doesn&#39;t seem to work&quot; is not a precise enough error description for us to help you. <i>What</i> doesn&#39;t work? <i>How</i> doesn&#39;t it work? What trouble do you have with your code? Do you get an error message? What is the error message? Is the result you are getting not the result you are expecting? What result do you expect and why, what is the result you are getting and how do the two differ? Is the behavior you are observing not the desired behavior? What is the desired behavior and why, what is the observed behavior, and in what way do they differ?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1523359064, "post_id": 49751539, "comment_id": 86518909, "body": "Also, what do you mean by &quot;this doesn&#39;t <b>seem</b> to work&quot;? Does it work or doesn&#39;t it work? Please, also make sure that have actually provided a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>. In your case, I highly doubt that your example is minimal, I am pretty sure it does <i>not</i> require 26 lines to demonstrate your problem. Also, your example is not complete, it is missing the definition of <code>PlayerHelper</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523362451, "post_id": 49751539, "comment_id": 86521230, "body": "Wouldn&#39;t it be easier to iterate the hash? <code>hash.each { |k, v| public_send(&quot;#{k}=&quot;, v) }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523359119, "post_id": 49751869, "comment_id": 86518957, "body": "<code>NameError</code>, no local variable named <code>all</code> in <code>initialize</code>."}, {"owner": {"reputation": 128, "user_id": 8280985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c7b2b074d4be384de8a87fc996e2dc?s=128&d=identicon&r=PG&f=1", "display_name": "bbusby", "link": "https://stackoverflow.com/users/8280985/bbusby"}, "edited": false, "score": 0, "creation_date": 1523412275, "post_id": 49751869, "comment_id": 86546277, "body": "Thanks! Appreciate the help"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1523361360, "last_edit_date": 1523361360, "creation_date": 1523357823, "answer_id": 49751869, "question_id": 49751539, "link": "https://stackoverflow.com/questions/49751539/create-ruby-instance-variable-to-default-based-off-of-other-instance-variable-va/49751869#49751869", "title": "Create Ruby instance variable to default based off of other instance variable values", "body": "<p>Use <code>||=</code> which is the syntax sugar for <code>neu = neu || old</code>, setting the new value if and only it was not set before (equals <code>nil</code>.)</p>\n\n<pre><code>ALL = %i[\n  at_bats hits walks hbp sac_flies singles\n  doubles triples hr put_outs assists errors\n  er ip so stolen_bases caught_stealing\n]\n\nattr_accessor *ALL\n\ndef initialize(hash) do\n  ALL.each do |iv|\n    instance_variable_set(\"@{iv}\", hash.fetch(iv, nil))\n  end\n\n  #        \u21d3\u21d3\u21d3 set if and only it was not set previously \n  @singles ||= @hits - (@doubles + @triples + @hr)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 1, "last_activity_date": 1523358180, "creation_date": 1523358180, "answer_id": 49751988, "question_id": 49751539, "link": "https://stackoverflow.com/questions/49751539/create-ruby-instance-variable-to-default-based-off-of-other-instance-variable-va/49751988#49751988", "title": "Create Ruby instance variable to default based off of other instance variable values", "body": "<p>That's what the second argument of the <code>fetch</code> method can be used for:</p>\n\n<pre><code>def initialize(hash)\n  # ...\n  @hits = hash.fetch(:hits, nil)\n  @doubles = hash.fetch(:doubles, nil)\n  @triples = hash.fetch(:triples, nil)\n  @hr = hash.fetch(:hr, nil)\n  @singles = hash.fetch(:singles, @hits - (@doubles + @tripples + @hr))\n  # ...\nend\n</code></pre>\n\n<p>However, note that since you are defaulting all values to <code>nil</code>, you could hit <code>undefined method on nil:NilClass</code>-type errors if those values are not passed into the constructor! You may wish to set some different defaults, or make them required arguments...</p>\n"}], "owner": {"reputation": 128, "user_id": 8280985, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e7c7b2b074d4be384de8a87fc996e2dc?s=128&d=identicon&r=PG&f=1", "display_name": "bbusby", "link": "https://stackoverflow.com/users/8280985/bbusby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 49751988, "answer_count": 2, "score": 0, "last_activity_date": 1523361360, "creation_date": 1523356812, "question_id": 49751539, "link": "https://stackoverflow.com/questions/49751539/create-ruby-instance-variable-to-default-based-off-of-other-instance-variable-va", "title": "Create Ruby instance variable to default based off of other instance variable values", "body": "<p>I am creating a Ruby class that takes a hash as an argument:</p>\n\n<pre><code>class Player\ninclude PlayerHelper\nattr_accessor :at_bats, :hits, :walks, :hbp, :sac_flies, :singles, :doubles,\n              :triples, :hr, :put_outs, :assists, :errors, :er, :ip, :so,\n              :stolen_bases, :caught_stealing\ndef initialize(hash)\n  @at_bats = hash.fetch(:at_bats, nil)\n  @hits = hash.fetch(:hits, nil)\n  @walks = hash.fetch(:walks, nil)\n  @hbp = hash.fetch(:hbp, nil)\n  @sac_flies = hash.fetch(:sac_flies, nil)\n  @singles = hash.fetch(:singles, nil)\n  @doubles = hash.fetch(:doubles, nil)\n  @triples = hash.fetch(:triples, nil)\n  @hr = hash.fetch(:hr, nil)\n  @put_outs = hash.fetch(:put_outs, nil)\n  @assists = hash.fetch(:assists, nil)\n  @errors = hash.fetch(:errors, nil)\n  @er = hash.fetch(:er, nil)\n  @ip = hash.fetch(:ip, nil)\n  @walks = hash.fetch(:walks, nil)\n  @hits = hash.fetch(:hits, nil)\n  @so = hash.fetch(:so, nil)\n  @stolen_bases = hash.fetch(:stolen_bases, nil)\n  @caught_stealing = hash.fetch(:caught_stealing, nil)\nend\n</code></pre>\n\n<p>I want to give the user the option of including :<code>singles</code> and first check if <code>:singles</code> was included in the hash. If so, give it the hash's value. This part I have working.</p>\n\n<p>What I can't get to work is to give @<code>singles</code> the value of <code>:hits - (:doubles + :triples + :hr)</code> if the :<code>singles</code> key doesn't exist. I have tried making a separate method to call initially, but this doesn't seem to work.</p>\n\n<p>How can I set the value of <code>@singles</code> based off of the other hash values if there was no <code>:singles</code> key included?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1634, "user_id": 5703217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Oj8Lb.jpg?s=128&g=1", "display_name": "Muhammad Faisal Iqbal", "link": "https://stackoverflow.com/users/5703217/muhammad-faisal-iqbal"}, "edited": false, "score": 1, "creation_date": 1523354496, "post_id": 49750714, "comment_id": 86515859, "body": "Its not clear that what you want, can edit question &amp; specifically ask that what you want?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "reply_to_user": {"reputation": 1634, "user_id": 5703217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Oj8Lb.jpg?s=128&g=1", "display_name": "Muhammad Faisal Iqbal", "link": "https://stackoverflow.com/users/5703217/muhammad-faisal-iqbal"}, "edited": false, "score": 0, "creation_date": 1523354659, "post_id": 49750714, "comment_id": 86515964, "body": "I just want the title of the post to show up on my posts page."}, {"owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "edited": false, "score": 0, "creation_date": 1523354734, "post_id": 49750714, "comment_id": 86516000, "body": "What view is this image? show? Index?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523355245, "post_id": 49750714, "comment_id": 86516359, "body": "<code>form.text_field</code> is used to create a <code>&lt;input type=&quot;text&quot; ...&gt;</code>. Are you sure you whitelisted the name attribute in your controller?"}, {"owner": {"reputation": 1634, "user_id": 5703217, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/Oj8Lb.jpg?s=128&g=1", "display_name": "Muhammad Faisal Iqbal", "link": "https://stackoverflow.com/users/5703217/muhammad-faisal-iqbal"}, "edited": false, "score": 0, "creation_date": 1523355472, "post_id": 49750714, "comment_id": 86516524, "body": "kindly share code of PostsController"}, {"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1523371288, "post_id": 49750714, "comment_id": 86527992, "body": "Can you share your schema file?"}, {"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1523386245, "post_id": 49750714, "comment_id": 86537229, "body": "You are showing us the code for your form and for your <code>show</code> action but I think you are asking why it doesn&#39;t show in the <code>index</code> action. Please show <code>posts_controller.rb</code> file and <code>index.html.erb</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "edited": false, "score": 0, "creation_date": 1523410102, "post_id": 49750714, "comment_id": 86545734, "body": "Thanks for all the help guys, I figured it out. It wasn&#39;t in my index.html.erb"}], "owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523383879, "creation_date": 1523354246, "last_edit_date": 1523383879, "question_id": 49750714, "link": "https://stackoverflow.com/questions/49750714/why-is-post-title-not-showing-up", "title": "Why is post title not showing up?", "body": "<p>So here it is: <a href=\"https://i.stack.imgur.com/jaiEa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jaiEa.png\" alt=\"enter image description here\"></a>\nFor some reason this is not showing the title for my post.\nHowever when I press show option and it goes to post's page you can see al the detail.</p>\n\n<pre><code>  _form.html.erb\n  &lt;%= form_with(model: post, local: true) do |form| %&gt;\n  &lt;% if post.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;&lt;%= pluralize(post.errors.count, \"error\") %&gt; prohibited this post from being saved:&lt;/h2&gt;\n\n      &lt;ul&gt;\n      &lt;% post.errors.full_messages.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n      &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :date %&gt;\n    &lt;%= form.datetime_select :date, id: :post_date %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :name %&gt;\n    &lt;%= form.text_area :name, id: :post_name %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :user_id %&gt;\n    &lt;%= form.number_field :user_id, id: :post_user_id, value: current_user.id %&gt;\n\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= form.label :description %&gt;\n    &lt;%= form.text_area :description, id: :post_description %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= form.submit %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>#show.html.erb</strong></p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Date:&lt;/strong&gt;\n  &lt;%= @post.date %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n    &lt;strong&gt;Name:&lt;/strong&gt;\n    &lt;%= @post.name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;User:&lt;/strong&gt;\n  &lt;%= @post.user_id %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Description:&lt;/strong&gt;\n  &lt;%= @post.description %&gt;\n&lt;/p&gt;\n\n&lt;% if current_user == @post.user %&gt;\n &lt;%= link_to 'Edit', edit_post_path(@post) %&gt; |\n&lt;%end%&gt;\n &lt;%= link_to 'Back', posts_path %&gt;\n\n\n\n\n&lt;h1&gt;Editing Post&lt;/h1&gt;\n\n&lt;%= render 'form', post: @post %&gt;\n\n&lt;%= link_to 'Show', @post %&gt; |\n&lt;%= link_to 'Back', posts_path %&gt;\n</code></pre>\n\n<p>edit.html.erb</p>\n\n<pre><code>&lt;%= render 'form', post: @post %&gt;\n\n&lt;%= link_to 'Show', @post %&gt; |\n&lt;%= link_to 'Back', posts_path %&gt;\n</code></pre>\n\n<p>I've tried changing it <code>&lt;%= form.text_area :name, id: :post_name %&gt;</code>\nto string_area :name and also string_field but none of it is working.\nIn fact when I change it to the last 2, I get a method error if I go on the edit page. I'm still fairly new to rails and to ruby so I would greatly appreciate some help. I did try to google however and was unsuccessful, I guess I didn't know what to search for or maybe I worded it wrong.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "sum"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523354815, "post_id": 49750602, "comment_id": 86516061, "body": "Could you show your table structure and model relations?"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1523354751, "post_id": 49750761, "comment_id": 86516018, "body": "<code>collection.map { ... }.sum</code> =&gt; <code>collection.sum { ... }</code>"}], "tags": [], "owner": {"reputation": 2285, "user_id": 2039726, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f1fc7ff9bf8f9489ab7715282a9b7e9c?s=128&d=identicon&r=PG", "display_name": "MrShemek", "link": "https://stackoverflow.com/users/2039726/mrshemek"}, "is_accepted": true, "score": 1, "last_activity_date": 1523354407, "creation_date": 1523354407, "answer_id": 49750761, "question_id": 49750602, "link": "https://stackoverflow.com/questions/49750602/rails-sum-value-of-column-on-a-associated-table/49750761#49750761", "title": "Rails: Sum value of column on a associated table", "body": "<p>The simplest possible solution to get sum of costs for all domains for all websites is:</p>\n\n<pre><code>@websites.includes(:domains).map{|website| website.domains.sum(:costs)}.sum\n</code></pre>\n\n<p><strong>Edit</strong> \nIf you want to get the sum of costs for all domains that you have in the database, you can use (it will generate only one SQL query):</p>\n\n<pre><code>Domain.all.sum(:costs)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 2, "last_activity_date": 1523362638, "creation_date": 1523362638, "answer_id": 49753448, "question_id": 49750602, "link": "https://stackoverflow.com/questions/49750602/rails-sum-value-of-column-on-a-associated-table/49753448#49753448", "title": "Rails: Sum value of column on a associated table", "body": "<p>A more effective way than iterating in Ruby is by selecting an aggregate in the query:</p>\n\n<pre><code>@websites = Website.select('websites.*, SUM(domains.cost) AS websites.domain_costs')\n       .left_outer_joins(:domains)\n</code></pre>\n\n<p>This removes the need to load the domain records into memory, and DBs are much more effective at simple aggregation than Ruby anyways. </p>\n\n<p>You can then access the sum by:</p>\n\n<pre><code>&lt;% @websites.each do |website| %&gt;\n   &lt;%= number_to_currency website.domain_costs, :locale =&gt; :nl %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 122, "user_id": 6604377, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/79586ed8b41ea83618265f8d84717e98?s=128&d=identicon&r=PG&f=1", "display_name": "Jakeroo", "link": "https://stackoverflow.com/users/6604377/jakeroo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 705, "favorite_count": 0, "accepted_answer_id": 49750761, "answer_count": 2, "score": 0, "last_activity_date": 1523363035, "creation_date": 1523353991, "last_edit_date": 1523363035, "question_id": 49750602, "link": "https://stackoverflow.com/questions/49750602/rails-sum-value-of-column-on-a-associated-table", "title": "Rails: Sum value of column on a associated table", "body": "<p>I have a list of websites, and each website has a list of domains. I have summarized the costs per website for those domains. What I want to do next is summarize all the costs for the websites, and get one total price for all websites.</p>\n\n<p>So what I have to summarize the costs:</p>\n\n<pre><code>&lt;% @websites.includes(:domains).each do |website| %&gt;\n   &lt;%= number_to_currency website.domains.sum(:costs), :locale =&gt; :nl %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This returns:</p>\n\n<p>\u20ac 65,00 \u20ac 12,50 \u20ac 12,50 \u20ac 12,50 \u20ac 12,50 \u20ac 25,00 \u20ac 25,00 \u20ac 23.435,50 \u20ac 37,50 \u20ac 0,00 \u20ac 0,00 \u20ac 0,00 \u20ac 0,00 \u20ac 0,00 \u20ac 34,00</p>\n\n<p>Now I need to find a way to summarize these sums...</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "object", "instance", "freeze"], "answers": [{"comments": [{"owner": {"reputation": 43, "user_id": 7143634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5fe1d681738ebb8269aec67a13d92c?s=128&d=identicon&r=PG", "display_name": "sheff3rd", "link": "https://stackoverflow.com/users/7143634/sheff3rd"}, "edited": false, "score": 0, "creation_date": 1523353689, "post_id": 49750431, "comment_id": 86515262, "body": "That kinda works but it removes the ids from the variable in case of RoR model. And I want to keep associations too"}, {"owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "reply_to_user": {"reputation": 43, "user_id": 7143634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5fe1d681738ebb8269aec67a13d92c?s=128&d=identicon&r=PG", "display_name": "sheff3rd", "link": "https://stackoverflow.com/users/7143634/sheff3rd"}, "edited": false, "score": 0, "creation_date": 1523353827, "post_id": 49750431, "comment_id": 86515365, "body": "In rails you can use <code>clone</code> Take a look at <a href=\"https://stackoverflow.com/a/24650062/2645167\">stackoverflow.com/a/24650062/2645167</a>"}, {"owner": {"reputation": 43, "user_id": 7143634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5fe1d681738ebb8269aec67a13d92c?s=128&d=identicon&r=PG", "display_name": "sheff3rd", "link": "https://stackoverflow.com/users/7143634/sheff3rd"}, "edited": false, "score": 0, "creation_date": 1523354037, "post_id": 49750431, "comment_id": 86515525, "body": "Thanks, that did help! ;)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 43, "user_id": 7143634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5fe1d681738ebb8269aec67a13d92c?s=128&d=identicon&r=PG", "display_name": "sheff3rd", "link": "https://stackoverflow.com/users/7143634/sheff3rd"}, "edited": false, "score": 0, "creation_date": 1523355266, "post_id": 49750431, "comment_id": 86516371, "body": "@Sheff3rd you did not mention ActiveRecord, maybe you should clarify your question."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1523357321, "post_id": 49750431, "comment_id": 86517763, "body": "&quot;Just duplicate variable&quot; \u2013 This will not duplicate the variable, it will duplicate the object. It&#39;s not helpful to use such imprecise terminology when the reason for the OP&#39;s question in the first place was that the OP doesn&#39;t fully understand the difference between variables and objects."}], "tags": [], "owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "is_accepted": true, "score": 1, "last_activity_date": 1523353533, "creation_date": 1523353533, "answer_id": 49750431, "question_id": 49750399, "link": "https://stackoverflow.com/questions/49750399/save-variable-in-a-new-instance/49750431#49750431", "title": "Save variable in a new instance", "body": "<p>Just duplicate variable</p>\n\n<pre><code>saved = variable.dup\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": false, "score": 0, "last_activity_date": 1523353542, "creation_date": 1523353542, "answer_id": 49750433, "question_id": 49750399, "link": "https://stackoverflow.com/questions/49750399/save-variable-in-a-new-instance/49750433#49750433", "title": "Save variable in a new instance", "body": "<p>Just duplicate it:</p>\n\n<pre><code>variable = { a: \"#fff\" }\nsaved = variable.dup # attention here\nvariable[:a] = \"#000\"\n\nsaved[:a]\n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7143634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c5fe1d681738ebb8269aec67a13d92c?s=128&d=identicon&r=PG", "display_name": "sheff3rd", "link": "https://stackoverflow.com/users/7143634/sheff3rd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 49750431, "answer_count": 2, "score": 0, "last_activity_date": 1523353542, "creation_date": 1523353427, "question_id": 49750399, "link": "https://stackoverflow.com/questions/49750399/save-variable-in-a-new-instance", "title": "Save variable in a new instance", "body": "<p>Basically, I want to have an old instance of the variable after updating a variable</p>\n\n<p>Here is some example that might explain better:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>variable = { a: \"#fff\" }\nsaved = variable\nvariable[:a] = \"#000\"\n\nsaved[:a]\n</code></pre>\n\n<p>The goal is to get <code>\"#fff\"</code>. Instead last line returns <code>\"#000\"</code> which is expected. I tried freezing an object:</p>\n\n<pre><code>variable = { a: \"#fff\" }\nsaved = variable\nsaved.freeze\nvariable[:a] = \"#000\"\n</code></pre>\n\n<p>But that will just raise an <code>FrozenError: can't modify frozen Hash</code> error</p>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 777, "user_id": 1971586, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f6027e3a9bb7094bd38fc08be15af55?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1971586/brian"}, "edited": false, "score": 0, "creation_date": 1523619818, "post_id": 49750160, "comment_id": 86646638, "body": "Thanks! That&#39;s quite helpful"}], "tags": [], "owner": {"reputation": 24667, "user_id": 797303, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DahZJ.jpg?s=128&g=1", "display_name": "Maxim Krizhanovsky", "link": "https://stackoverflow.com/users/797303/maxim-krizhanovsky"}, "is_accepted": true, "score": 1, "last_activity_date": 1523381398, "last_edit_date": 1523381398, "creation_date": 1523352730, "answer_id": 49750160, "question_id": 49749953, "link": "https://stackoverflow.com/questions/49749953/idiomatic-rspec-testing-with-mixins-and-blocks/49750160#49750160", "title": "idiomatic RSpec testing with mixins and blocks?", "body": "<p>First, the operations provided by FileUtils should be tested separately, in a FileUtils test.</p>\n\n<p>Then you should only validate that the block you provide to the UserDataFile is actually used. There are 2 cases - one just yields the instance, while the other uses instance_eval. You need to validate both.</p>\n\n<p>For the first case you can use the <a href=\"https://relishapp.com/rspec/rspec-expectations/docs/built-in-matchers/yield-matchers\" rel=\"nofollow noreferrer\">yield RSpec matcher</a>. It will look like:</p>\n\n<pre><code>expect { |b| MyModule::UserDataFile.new(client, &amp;b) }.to yield_with_args(kind_of(UserDataFile)) }\n</code></pre>\n\n<p>The second one is more tricky. You can pass a block and add expectation for something done within a block. A classical example is to <code>throw</code> from the block and expect that symbol to be thrown:</p>\n\n<pre><code>my_proc = proc { throw :my_proc_was_called }\n\nexpect { MyModule::UserDataFile.new(client, &amp;my_proc) }.to throw_symbol :my_proc_was_called\n</code></pre>\n\n<p>As for the reason you get <code>NoMethodError</code> - you are stubbing the <code>add_data</code> on the class, but the code is calling it on the instance. You will have to use <code>allow_any_instance_of</code> to stub the way you are trying to do</p>\n"}], "owner": {"reputation": 777, "user_id": 1971586, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1f6027e3a9bb7094bd38fc08be15af55?s=128&d=identicon&r=PG", "display_name": "Brian", "link": "https://stackoverflow.com/users/1971586/brian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 176, "favorite_count": 0, "accepted_answer_id": 49750160, "answer_count": 1, "score": 1, "last_activity_date": 1523381398, "creation_date": 1523352141, "question_id": 49749953, "link": "https://stackoverflow.com/questions/49749953/idiomatic-rspec-testing-with-mixins-and-blocks", "title": "idiomatic RSpec testing with mixins and blocks?", "body": "<p>I'll preface this by saying I'm pretty new to Ruby and RSpec, and am working on adding tests to an existing codebase, so if there are red flags, feel free to let me know!  I'm also not sure exactly how to search for this question, so apologies if it's a dupe.</p>\n\n<p>Basically, I'm trying to write a test to flex a class that is instantiated with a block using mixins.  I'm using Ruby 2.3 for what its worth.</p>\n\n<p>Lets say we have a class:</p>\n\n<pre><code>class UserDataFile &lt; DataFile\n  def initialize(client, &amp;block)\n    ..do some stuff..\n    super(client, &amp;block)\n  end\nend\n</code></pre>\n\n<p>and and DataFile looks like:</p>\n\n<pre><code>class DataFile\n  include FileUtils\n\n  def initialize(client, &amp;block)\n    block.arity == 1 ? yield(self) : instance_eval(&amp;block) if block_given?\n\n  def reads\n    @items\n  end\n\n  def write_to_file\n    .. write @items to a file ..\n  end\nend\n</code></pre>\n\n<p>FileUtils looks like:</p>\n\n<pre><code>module FileUtils\n  def add_data(x)\n    new_data = generate_some_data(x)\n    reads.concat(new_data)\n    new_data\n  end\nend\n</code></pre>\n\n<p>So given the above code, someone could use this like:</p>\n\n<pre><code>MyModule::UserDataFile.new(client) do\n  add_data(\"secret data\")\n  write_to_file\nend\n</code></pre>\n\n<p>The output would be that the end user would write ruby file, and add arbitrary data, then write a file out by using the API.</p>\n\n<p>However there are no tests for this functionality, and I'm pretty lost as to how to use RSpec to do this - given that the class I'm using/testing is using inherited mixins.</p>\n\n<p>I can write basic functionality tests by executing the code in Rspec and verifying the output, but I'm lost when trying to build an expectation block and use any sort of double.  A failed attempt looks like this:</p>\n\n<pre><code>expect(MyModule::UserDataFile).to receive(:new).with(client).and_yield\nexpect(MyModule::UserDataFile).to receive(:add_data).with(any_args)\n</code></pre>\n\n<p>or </p>\n\n<pre><code>allow(MyModule::UserDataFile).to receive(:new).with(client) {\n        allow(MyModule::UserDataFile).to receive(:add_data).with(anything)\n}\n</code></pre>\n\n<p>and if I try and execute the this after setting the expectations:</p>\n\n<pre><code>MyModule::UserDataFile.new(client) do\n    add_data(\"testdata)\nend\n</code></pre>\n\n<p>I get an error: \n<code>NoMethodError: undefined method `add_data' for #&lt;RSpec::blahblah</code></p>\n\n<p>Due to my noob status, I'm guessing theres something simple I'm probably missing here - but I'm finding this very difficult to search for.  Thanks!</p>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 878, "user_id": 3256048, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmJzF.png?s=128&g=1", "display_name": "slashpai", "link": "https://stackoverflow.com/users/3256048/slashpai"}, "edited": false, "score": 0, "creation_date": 1523376682, "post_id": 49749913, "comment_id": 86531643, "body": "You should first read and understand chef concepts then it won&#39;t be difficult to understand. chef has good documentation for every resource, for example for your databag question you can go through <a href=\"https://docs.chef.io/data_bags.html\" rel=\"nofollow noreferrer\">docs.chef.io/data_bags.html</a> and see what&#39;s the purpose of databag and how it been used"}], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1523426496, "post_id": 49760915, "comment_id": 86550342, "body": "Thanks a ton.. w.r.t the point 3 , can you please point me to any examples or a tutorial link where I can see the data format like above or how to construct that format - <code>v_type = l_run_list[&#39;action_on&#39;][&#39;app_type&#39;]</code>"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1523484452, "post_id": 49760915, "comment_id": 86585627, "body": "Sorry, I don\u2019t actually understand your question. The code you are looking at is very bad Ruby and I\u2019m guessing it was written by people that are primarily Java or C++ developers."}, {"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1523536976, "post_id": 49760915, "comment_id": 86608041, "body": "I wanted to know <code>v_type = l_run_list[&#39;action_on&#39;][&#39;app_type&#39;]</code> what is <code>[&#39;action_on&#39;]</code> and <code>[&#39;app_type&#39;]</code> basically is and how can I construct that format.. any link to understand better of those.. Im really sorry for the badly shaped Ruby code..  Thanks really for your time here"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1523562439, "post_id": 49760915, "comment_id": 86624165, "body": "Those are invoking the <code>Hash#[]</code> operator, which is how you retrieve keys from a Hash."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 1, "last_activity_date": 1523385959, "creation_date": 1523385959, "answer_id": 49760915, "question_id": 49749913, "link": "https://stackoverflow.com/questions/49749913/chef-recipe-concepts/49760915#49760915", "title": "Chef - recipe concepts", "body": "<ol>\n<li>The colon is used in Lucene searches (which powers Chef Search) to separate the key (facet) and value query expression.</li>\n<li>Yes, <code>search()</code> returns an array. The other two values are above, you can see them yourself.</li>\n<li>Data bag item objects can be used like hashes, so that is how you extract data from them.</li>\n<li>See above.</li>\n</ol>\n"}], "owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 49760915, "answer_count": 1, "score": -1, "last_activity_date": 1523385959, "creation_date": 1523352033, "last_edit_date": 1523353076, "question_id": 49749913, "link": "https://stackoverflow.com/questions/49749913/chef-recipe-concepts", "title": "Chef - recipe concepts", "body": "<p>I've came across this recipe file and cannot understand many of its aspects, like:</p>\n\n<pre><code>Chef::Log.info (\"Some log message\")\n\n  _jvm_index = \"jvm_plan\"\n  _jvm_check = \"id:#{jvm.plan}\"\n\n  data_bag = search(_jvm_index,_jvm_check)\n  data_bag.each do |data_bag_item|\n    l_author = data_bag_item['owner']\n    l_neros = ldata_bag_item['deployment_actions']\n    l_neros.each do |l_run_list|\n      l_check = l_run_list['action']    \n      v_type = l_run_list['action_on']['app_type']\n</code></pre>\n\n<ol>\n<li>What does the colon(:) mean here: <code>id:#{jvm.plan}</code>?</li>\n<li><code>data_bag = search(_jvm_index,_jvm_check)</code>\nis <code>data_bag</code> an array, if so, what does <code>search</code> do here and are <code>_jvm_index</code> and <code>_jvm_check</code> array values?   </li>\n<li>With respect to the line <code>l_author = data_bag_item['owner']</code> and <code>v_type = l_run_list['action_on']['app_type']</code> what exactly is done here? </li>\n<li>What is the purpose of <code>['owner']</code> and <code>['action_on']['app_type']</code>?</li>\n</ol>\n\n<p>I checked the Chef documentation for any explanation on this front but couldn't find anything unfortunately. I'm not sure whether I'm looking in the wrong place.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "runtime", "rspec-rails"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "edited": false, "score": 0, "creation_date": 1523394231, "post_id": 49756064, "comment_id": 86541191, "body": "Yes, i know, I left it incorrect on purpose, if you check the explanation above I say there was a missing &quot;do&quot;. The thing is that I don&#39;t know why I got that type of error, that&#39;s all."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "edited": false, "score": 0, "creation_date": 1523443215, "post_id": 49756064, "comment_id": 86560635, "body": "My bad didn&#39;t read properly - do you definitely have the right number of &#39;ends&#39; for your &#39;dos&#39;? Try removing an &#39;end&#39; and seeing if you get the same result"}, {"owner": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "edited": false, "score": 0, "creation_date": 1523446079, "post_id": 49756064, "comment_id": 86562585, "body": "Tried what you&#39;ve told me and the error message changes. If there is no &#39;end&#39; resources :template_items is not nested inside templates and my routes are wrong"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "edited": false, "score": 0, "creation_date": 1523455240, "post_id": 49756064, "comment_id": 86569349, "body": "Are you using FactoryGirl for your tests?"}, {"owner": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "edited": false, "score": 0, "creation_date": 1523520219, "post_id": 49756064, "comment_id": 86596919, "body": "Well, i use FactoryBot (I think they are the same, no?)"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "edited": false, "score": 0, "creation_date": 1523525589, "post_id": 49756064, "comment_id": 86600314, "body": "Sorry that&#39;s right FactoryBot as they&#39;ve now called it - <a href=\"https://github.com/thoughtbot/factory_bot_rails/issues/247\" rel=\"nofollow noreferrer\">github.com/thoughtbot/factory_bot_rails/issues/247</a> - seems some people were getting your error when a factory wasn&#39;t properly defined"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "edited": false, "score": 0, "creation_date": 1523525642, "post_id": 49756064, "comment_id": 86600349, "body": "If you post the full error trace does it start in any models? If so that&#39;s the one with a malformed factory definition"}, {"owner": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "edited": false, "score": 0, "creation_date": 1523526589, "post_id": 49756064, "comment_id": 86600997, "body": "Interesting, but it&#39;s odd that the factories are wrong. The thing is that when I ran the &#39;rails g scaffold...&#39; this generated also the factories with all the neccessary. E.g  this is for template item FactoryBot.define do   factory :template_item do     body &quot;MyText&quot;     category 1     name &quot;MyString&quot;   end end"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1523370038, "creation_date": 1523370038, "answer_id": 49756064, "question_id": 49749818, "link": "https://stackoverflow.com/questions/49749818/why-do-i-get-can-modify-frozen-array-runtime-error-when-launching-rspec/49756064#49756064", "title": "Why do i get &quot;can modify frozen Array&quot; Runtime Error when launching rspec?", "body": "<p>I think you meant to do:</p>\n\n<pre><code>resources :templates do\n  resources :template_items\nend\n</code></pre>\n\n<p>Assuming there isn't a 'do' or 'begin' that you've not linked, at the moment you have too many 'ends' which means the file won't load.</p>\n"}, {"tags": [], "owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "is_accepted": false, "score": 0, "last_activity_date": 1552513396, "creation_date": 1552513396, "answer_id": 55151644, "question_id": 49749818, "link": "https://stackoverflow.com/questions/49749818/why-do-i-get-can-modify-frozen-array-runtime-error-when-launching-rspec/55151644#55151644", "title": "Why do i get &quot;can modify frozen Array&quot; Runtime Error when launching rspec?", "body": "<p>I had the same problem when tried to upgrade from <code>rails 5.2.0 to 5.2.2.1</code> using <code>bundle update rails</code> command, its also updated many other gems one of them was factory_bot from 4.10.0 to 5.0.2 so solution was to downgrade to 4.10.0 by specifying the version number for factory_bot to   <code>gem \"factory_bot_rails\", \"~&gt; 4.10.0\"</code> </p>\n"}], "owner": {"reputation": 31, "user_id": 9623902, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b920b4585c8c1df8da1013f9ee519fe?s=128&d=identicon&r=PG&f=1", "display_name": "HKD", "link": "https://stackoverflow.com/users/9623902/hkd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 892, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1552513396, "creation_date": 1523351786, "last_edit_date": 1523352034, "question_id": 49749818, "link": "https://stackoverflow.com/questions/49749818/why-do-i-get-can-modify-frozen-array-runtime-error-when-launching-rspec", "title": "Why do i get &quot;can modify frozen Array&quot; Runtime Error when launching rspec?", "body": "<p>I get this error when I launch rspec spec/models in the console.</p>\n\n<blockquote>\n  <p>An error occurred while loading ./spec/models/user_spec.rb.\n  Failure/Error: require File.expand_path('../../config/environment',\n  <strong>FILE</strong>)</p>\n  \n  <p>RuntimeError:   can't modify frozen Array</p>\n</blockquote>\n\n<p>I found where was the mistakeby reviewing everything i modified and it was a missing do in my routes.rb</p>\n\n<pre><code>resources :templates\n  resources :template_items\nend\n</code></pre>\n\n<p>but I can't understand why this type of error kept appearing. It clearly doesn't show where the error comes from, and I can't find the relation between these two things.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron", "whenever"], "answers": [{"comments": [{"owner": {"reputation": 91, "user_id": 5620547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0392a102582956ebe6d8177270fda32?s=128&d=identicon&r=PG&f=1", "display_name": "harsha-sagar", "link": "https://stackoverflow.com/users/5620547/harsha-sagar"}, "edited": false, "score": 0, "creation_date": 1523360590, "post_id": 49752529, "comment_id": 86519962, "body": "error:         `parse_as_string&#39;: Couldn&#39;t parse: 0 8 * * 6 test $((10#$(date +\\%W)\\%2)) -eq 1 (ArgumentError)"}, {"owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "reply_to_user": {"reputation": 91, "user_id": 5620547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0392a102582956ebe6d8177270fda32?s=128&d=identicon&r=PG&f=1", "display_name": "harsha-sagar", "link": "https://stackoverflow.com/users/5620547/harsha-sagar"}, "edited": false, "score": 0, "creation_date": 1523366421, "post_id": 49752529, "comment_id": 86524295, "body": "OK I was thinking , that whnever can handle this, I made an update"}], "tags": [], "owner": {"reputation": 9567, "user_id": 1900722, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nGsJr.jpg?s=128&g=1", "display_name": "anquegi", "link": "https://stackoverflow.com/users/1900722/anquegi"}, "is_accepted": false, "score": 0, "last_activity_date": 1523366830, "last_edit_date": 1523366830, "creation_date": 1523359856, "answer_id": 49752529, "question_id": 49749490, "link": "https://stackoverflow.com/questions/49749490/how-to-schedule-task-whenever-schedule-rb-to-run-on-every-alternate-saturday/49752529#49752529", "title": "how to schedule task (whenever schedule.rb) to run on every alternate Saturday?", "body": "<p>First of all take a look at this answer on server fault:</p>\n\n<p><a href=\"https://serverfault.com/questions/633264/cronjob-run-every-two-weeks-on-saturday-starting-on-this-saturday\">Same question using only cron job</a></p>\n\n<p>This should the entry:</p>\n\n<pre><code>0 8 * * 6 test $((10#$(date +\\%W)\\%2)) -eq 1 &amp;&amp; yourCommand\n</code></pre>\n\n<p>The first part is every saturday at 8:00 am, the second you can try this test on console:</p>\n\n<pre><code>test $((10#$(date +\\%W)%2)) -eq 1 &amp;&amp; echo odd || echo even\n</code></pre>\n\n<p>What this code do is get the number of week in a year and get if it is even or odd</p>\n\n<p>if we translate this to ruby</p>\n\n<pre><code>every '0 8 * * 6' do\n  rake 'prj:task1', output: 'log/task1.log' \nend\n</code></pre>\n\n<p>and in your task add the execution test clause for knowing in which Saturday you are in this case you test the week of the year</p>\n\n<pre><code>Time.now.strftime('%W').to_i\n =&gt; 15 \nTime.now.strftime('%W').to_i % 2\n =&gt; 1 \n</code></pre>\n\n<p>Then try to apply this with your own needs\nSo only execute in even or odd weeks of the year</p>\n\n<pre><code>if  Time.now.strftime('%W').to_i % 2 == 1\n  puts \"odd do something\" \nelse\n  puts \"even do not do anything\"\nend\n</code></pre>\n\n<p>I'm not sure if adding the if modifier directly to the whenever shcedule will work</p>\n\n<pre><code>every '0 8 * * 6' do\n  if  Time.now.strftime('%W').to_i % 2 == 1\n    rake 'prj:task1', output: 'log/task1.log' \n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "is_accepted": false, "score": 0, "last_activity_date": 1523360969, "creation_date": 1523360969, "answer_id": 49752875, "question_id": 49749490, "link": "https://stackoverflow.com/questions/49749490/how-to-schedule-task-whenever-schedule-rb-to-run-on-every-alternate-saturday/49752875#49752875", "title": "how to schedule task (whenever schedule.rb) to run on every alternate Saturday?", "body": "<p>Another option can be <a href=\"https://lists.centos.org/pipermail/centos/2010-January/088261.html\" rel=\"nofollow noreferrer\">found here</a></p>\n\n<p>The final answer might looks like here as:</p>\n\n<pre><code>every '30 1 * * 6' do\n  (($(date +'%V')&amp;1)) &amp;&amp; rake 'prj:task1', output: 'log/task1.log' \nend\n</code></pre>\n\n<p>This basically run every Saturday. But the first check decides whether to run on even/odd weeks.</p>\n"}], "owner": {"reputation": 91, "user_id": 5620547, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0392a102582956ebe6d8177270fda32?s=128&d=identicon&r=PG&f=1", "display_name": "harsha-sagar", "link": "https://stackoverflow.com/users/5620547/harsha-sagar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 282, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1523366830, "creation_date": 1523350858, "last_edit_date": 1523357153, "question_id": 49749490, "link": "https://stackoverflow.com/questions/49749490/how-to-schedule-task-whenever-schedule-rb-to-run-on-every-alternate-saturday", "title": "how to schedule task (whenever schedule.rb) to run on every alternate Saturday?", "body": "<p>Attempted schedule task:  </p>\n\n<pre><code>every '0 1 * * 6#2' do  \n    rake 'prj:task1', output: 'log/task1.log'  \nend  \n</code></pre>\n\n<p>Observing error:   </p>\n\n<pre><code>gems/whenever-0.10.0/lib/whenever/cron.rb:154:in `parse_as_string': Couldn't parse: 0 1 8-14 (ArgumentError)\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 2, "creation_date": 1523349604, "post_id": 49749017, "comment_id": 86512579, "body": "[&#39;1&#39;, &#39;2&#39;].join =&gt; &#39;12&#39;"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 1651, "user_id": 7499455, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-pALqkvJ9LpE/AAAAAAAAAAI/AAAAAAAAATE/gXYryXAigJg/photo.jpg?sz=128", "display_name": "Ashik Salman", "link": "https://stackoverflow.com/users/7499455/ashik-salman"}, "edited": false, "score": 1, "creation_date": 1523349987, "post_id": 49749017, "comment_id": 86512821, "body": "@Ashik thanks that is the idiomatic approach I agree. I just wanted to see how it could be done with <code>sum</code>."}, {"owner": {"reputation": 449, "user_id": 6324558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695946b2499d7dcb2759724e66cfad38?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Delahaye", "link": "https://stackoverflow.com/users/6324558/alexis-delahaye"}, "edited": false, "score": 2, "creation_date": 1523355248, "post_id": 49749017, "comment_id": 86516363, "body": "if by using sum you meant using the + operator on string you could do for fun : <code>[&#39;1&#39;,&#39;2&#39;,&#39;3&#39;].inject(:+)</code> =&gt; <code>&quot;123&quot;</code>"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 449, "user_id": 6324558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695946b2499d7dcb2759724e66cfad38?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Delahaye", "link": "https://stackoverflow.com/users/6324558/alexis-delahaye"}, "edited": false, "score": 0, "creation_date": 1523498901, "post_id": 49749017, "comment_id": 86589067, "body": "@Alexis Thanks, interesting to note."}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1523370132, "post_id": 49749018, "comment_id": 86527081, "body": "Anyone (since the OP hasn&#39;t) got any ideas as to why this was downvoted? Seems like the same voter (within seconds) downvoted my question too."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 3, "last_activity_date": 1523349350, "creation_date": 1523349350, "answer_id": 49749018, "question_id": 49749017, "link": "https://stackoverflow.com/questions/49749017/summing-string-elements-in-an-array-using-arraysum/49749018#49749018", "title": "Summing string elements in an array using `Array#sum`", "body": "<p><code>Array#sum</code> defines a single parameter which by default is <code>0</code>. Your first snippet is equivalent to:</p>\n\n<pre><code>[1, 2].sum(0) #=&gt; 3\n</code></pre>\n\n<p>Your second snippet is equivalent to:</p>\n\n<pre><code>['1', '2'].sum(0)\n</code></pre>\n\n<p>As indicated by the error message, you end up trying to add the string <code>'1'</code> to the integer <code>0</code> etc, which Ruby won't allow (no type coercion here). So in order to make this work, define an empty string as the argument:</p>\n\n<pre><code>['1', '2'].sum('') #=&gt; \"12\"\n</code></pre>\n\n<p>Now you're doing <code>'' + '1' + '2'</code> etc. See <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-sum\" rel=\"nofollow noreferrer\">docs</a> for more info, where it's also noted that <code>join</code> would be faster than <code>sum</code> when summing an array of strings. Also <code>join</code> is way more idiomatic.</p>\n"}], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 65, "favorite_count": 0, "accepted_answer_id": 49749018, "answer_count": 1, "score": 0, "last_activity_date": 1523349350, "creation_date": 1523349350, "question_id": 49749017, "link": "https://stackoverflow.com/questions/49749017/summing-string-elements-in-an-array-using-arraysum", "title": "Summing string elements in an array using `Array#sum`", "body": "<p>In the following array of Integer objects, <code>Array#sum</code> sums the elements:</p>\n\n<pre><code>[1, 2].sum #=&gt; 3\n</code></pre>\n\n<p>For an array of strings, I was expecting <code>sum</code> to return the total concatenation (<code>'12'</code> in this case) but am getting an error:</p>\n\n<pre><code>['1', '2'].sum\n#Traceback (most recent call last):\n#        4: from /usr/local/rvm/rubies/ruby-2.5.0/bin/irb:11:in `&lt;main&gt;'\n#        3: from (irb):46\n#        2: from (irb):46:in `sum'\n#        1: from (irb):46:in `+'\n#TypeError (String can't be coerced into Integer)\n</code></pre>\n\n<p>How can I get <code>['1', '2'].sum</code> to return <code>'12'</code>, if it is even possible?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1523346826, "post_id": 49748193, "comment_id": 86510890, "body": "can you give an example of some valid outputs? Also what have you tried?"}, {"owner": {"reputation": 951, "user_id": 2375207, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8c7e47a1942f02ecd3c1a441d122f77c?s=128&d=identicon&r=PG", "display_name": "nicolallias", "link": "https://stackoverflow.com/users/2375207/nicolallias"}, "edited": false, "score": 0, "creation_date": 1523347132, "post_id": 49748193, "comment_id": 86511077, "body": "Looks like homeworks"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523347390, "post_id": 49748193, "comment_id": 86511230, "body": "Your title says <i>&quot;from 2 given arrays&quot;</i> but your question says <i>&quot;from 4 arrays&quot;</i>. Could you clarify that?"}, {"owner": {"reputation": 3, "user_id": 9589173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IsnJD.jpg?s=128&g=1", "display_name": "Reclesh", "link": "https://stackoverflow.com/users/9589173/reclesh"}, "edited": false, "score": 0, "creation_date": 1523347959, "post_id": 49748193, "comment_id": 86511557, "body": "lets suppose you me and one person are playing card and al=[&#39;Al&#39;,&#39;2l&#39;,&#39;3l&#39;,&#39;4l&#39;,&#39;5l&#39;,&#39;6l&#39;,&#39;7l&#39;,&#39;8l&#39;,&#39;9l&#39;,&#39;jl&#39;,&#39;ql&#39;,&#39;&zwnj;&#8203;kl&#39;] af=[&#39;Af&#39;,&#39;2f&#39;,&#39;3f&#39;,&#39;4f&#39;,&#39;5f&#39;,&#39;6f&#39;,&#39;7f&#39;,&#39;8f&#39;,&#39;9f&#39;,&#39;jf&#39;,&#39;qf&#39;,&#39;&zwnj;&#8203;kf&#39;] ak=[&#39;Ak&#39;,&#39;2k&#39;,&#39;3k&#39;,&#39;4k&#39;,&#39;5k&#39;,&#39;6k&#39;,&#39;7k&#39;,&#39;8k&#39;,&#39;9k&#39;,&#39;jk&#39;,&#39;qk&#39;,&#39;&zwnj;&#8203;kk&#39;] an=[&#39;An&#39;,&#39;2n&#39;,&#39;3n&#39;,&#39;4n&#39;,&#39;5n&#39;,&#39;6n&#39;,&#39;7n&#39;,&#39;8n&#39;,&#39;9n&#39;,&#39;jn&#39;,&#39;qn&#39;,&#39;&zwnj;&#8203;kn&#39;] are cards ok so now from those array every peson will get 3 cards but the cards should not be repeted to another person"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523356418, "post_id": 49748193, "comment_id": 86517194, "body": "To me it looked like random example data. If these arrays represent playing cards for the four suits, you should say so! A practical problem is much easier to understand than an abstract one."}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 9589173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IsnJD.jpg?s=128&g=1", "display_name": "Reclesh", "link": "https://stackoverflow.com/users/9589173/reclesh"}, "edited": false, "score": 0, "creation_date": 1523347586, "post_id": 49748349, "comment_id": 86511343, "body": "any shortcut  please"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3, "user_id": 9589173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IsnJD.jpg?s=128&g=1", "display_name": "Reclesh", "link": "https://stackoverflow.com/users/9589173/reclesh"}, "edited": false, "score": 0, "creation_date": 1523348121, "post_id": 49748349, "comment_id": 86511654, "body": "I am not sure I got what you want. I found a time to provide an answer, so find a time to state your question, if any, in readable way."}, {"owner": {"reputation": 3, "user_id": 9589173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IsnJD.jpg?s=128&g=1", "display_name": "Reclesh", "link": "https://stackoverflow.com/users/9589173/reclesh"}, "edited": false, "score": 0, "creation_date": 1523348254, "post_id": 49748349, "comment_id": 86511750, "body": "lets suppose you me and one person are playing card and al=[&#39;Al&#39;,&#39;2l&#39;,&#39;3l&#39;,&#39;4l&#39;,&#39;5l&#39;,&#39;6l&#39;,&#39;7l&#39;,&#39;8l&#39;,&#39;9l&#39;,&#39;jl&#39;,&#39;ql&#39;,&#39;&zwnj;&#8203;kl&#39;] af=[&#39;Af&#39;,&#39;2f&#39;,&#39;3f&#39;,&#39;4f&#39;,&#39;5f&#39;,&#39;6f&#39;,&#39;7f&#39;,&#39;8f&#39;,&#39;9f&#39;,&#39;jf&#39;,&#39;qf&#39;,&#39;&zwnj;&#8203;kf&#39;] ak=[&#39;Ak&#39;,&#39;2k&#39;,&#39;3k&#39;,&#39;4k&#39;,&#39;5k&#39;,&#39;6k&#39;,&#39;7k&#39;,&#39;8k&#39;,&#39;9k&#39;,&#39;jk&#39;,&#39;qk&#39;,&#39;&zwnj;&#8203;kk&#39;] an=[&#39;An&#39;,&#39;2n&#39;,&#39;3n&#39;,&#39;4n&#39;,&#39;5n&#39;,&#39;6n&#39;,&#39;7n&#39;,&#39;8n&#39;,&#39;9n&#39;,&#39;jn&#39;,&#39;qn&#39;,&#39;&zwnj;&#8203;kn&#39;] are cards ok so now from those array every peson will get 3 cards but the cards should not be repeted to another person"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 3, "user_id": 9589173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IsnJD.jpg?s=128&g=1", "display_name": "Reclesh", "link": "https://stackoverflow.com/users/9589173/reclesh"}, "edited": false, "score": 0, "creation_date": 1523348388, "post_id": 49748349, "comment_id": 86511832, "body": "The answer above perfectly solves this particular issue."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 0, "last_activity_date": 1523347162, "creation_date": 1523347162, "answer_id": 49748349, "question_id": 49748193, "link": "https://stackoverflow.com/questions/49748193/how-to-print-random-numbers-from-2-given-arrays-without-repeating-if-already-pri/49748349#49748349", "title": "How to print random numbers from 2 given arrays without repeating if already printed on ruby", "body": "<p>Use <a href=\"https://ruby-doc.org/core/Array.html#method-i-sample\" rel=\"nofollow noreferrer\"><code>Array#sample</code></a> and then <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-each_slice\" rel=\"nofollow noreferrer\"><code>Enumerable#each_slice</code></a>:</p>\n\n<pre><code>persons, cards = 2, 3\n(al + af + ak + an).sample(persons * cards).each_slice(cards).to_a\n#\u21d2\u00a0 [[\"qk\", \"4l\", \"Ak\"], [\"6l\", \"8l\", \"5l\"]]\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9589173, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IsnJD.jpg?s=128&g=1", "display_name": "Reclesh", "link": "https://stackoverflow.com/users/9589173/reclesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 44, "favorite_count": 0, "closed_date": 1523349045, "accepted_answer_id": 49748349, "answer_count": 1, "score": -3, "last_activity_date": 1523347162, "creation_date": 1523346677, "last_edit_date": 1523346721, "question_id": 49748193, "link": "https://stackoverflow.com/questions/49748193/how-to-print-random-numbers-from-2-given-arrays-without-repeating-if-already-pri", "closed_reason": "Needs details or clarity", "title": "How to print random numbers from 2 given arrays without repeating if already printed on ruby", "body": "<p>lets suppose</p>\n\n<pre><code>al=['Al','2l','3l','4l','5l','6l','7l','8l','9l','jl','ql','kl']\n\naf=['Af','2f','3f','4f','5f','6f','7f','8f','9f','jf','qf','kf']\n\nak=['Ak','2k','3k','4k','5k','6k','7k','8k','9k','jk','qk','kk']\n\nan=['An','2n','3n','4n','5n','6n','7n','8n','9n','jn','qn','kn'] \n</code></pre>\n\n<p>are array </p>\n\n<p>let's suppose\nthere a two-person wait for random numbers to get \nbut they should not get the same word ( 3 outputs should be to 2 people from 4 arrays without repeating \n)</p>\n"}, {"tags": ["arrays", "ruby", "fixnum"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523347920, "post_id": 49748260, "comment_id": 86511537, "body": "<i>&quot;we mutate the array&quot;</i> \u2013 I don&#39;t think we want to do that. At least not the original one."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523347974, "post_id": 49748260, "comment_id": 86511566, "body": "@Stefan initially there was <code>shift</code> in the OP, I just reproduced the expected behaviour."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523348703, "post_id": 49748260, "comment_id": 86512031, "body": "Looking at the second (working) implementation in the OP, I think the side effect introduced by <code>shift</code> was unintended."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1523346886, "creation_date": 1523346886, "answer_id": 49748260, "question_id": 49748192, "link": "https://stackoverflow.com/questions/49748192/array-interpreted-as-a-fixnum/49748260#49748260", "title": "Array interpreted as a Fixnum", "body": "<p>The issue is in the recursive call:</p>\n\n<pre><code>rec_sum(num_arr.shift)\n</code></pre>\n\n<p><a href=\"https://ruby-doc.org/core/Array.html#method-i-shift\" rel=\"nofollow noreferrer\"><code>Array#shift</code></a> returns <em>the shifted element</em>, not the remaining array. You should explicitly pass the array as an argument to recursive call:</p>\n\n<pre><code>rec_sum(num_arr[1..-1])\n</code></pre>\n\n<p>or </p>\n\n<pre><code>rec_sum(num_arr.tap(&amp;:shift))\n</code></pre>\n\n<p>The latter would [likely] be looking too cumbersome for the beginner, but it\u2019s a very common rubyish approach: <a href=\"https://ruby-doc.org/core/Object.html#method-i-tap\" rel=\"nofollow noreferrer\"><code>Object#tap</code></a> yields the receiver to the block, returning the receiver. Inside a block (<code>num_arr.tap(&amp;:shift)</code> is a shorthand for <code>num_arr.tap { |a| a.shift }</code> we mutate the array by shifting the element out, and it\u2019s being returned as a result.</p>\n"}, {"comments": [{"owner": {"reputation": 166, "user_id": 9623419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6738475bc5f747a2ef54cde73b091372?s=128&d=identicon&r=PG&f=1", "display_name": "Balocre", "link": "https://stackoverflow.com/users/9623419/balocre"}, "edited": false, "score": 0, "creation_date": 1523356438, "post_id": 49749462, "comment_id": 86517205, "body": "Thanks for the answer!   I understand now, and I&#39;ll try to improve my syntax and start using more Ruby features :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 166, "user_id": 9623419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6738475bc5f747a2ef54cde73b091372?s=128&d=identicon&r=PG&f=1", "display_name": "Balocre", "link": "https://stackoverflow.com/users/9623419/balocre"}, "edited": false, "score": 0, "creation_date": 1523356583, "post_id": 49749462, "comment_id": 86517300, "body": "@SuperTotoGo you&#39;re welcome, but you should give mudasobwa the green tick. My answer was meant more as an addition."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 0, "last_activity_date": 1523353994, "last_edit_date": 1523353994, "creation_date": 1523350768, "answer_id": 49749462, "question_id": 49748192, "link": "https://stackoverflow.com/questions/49748192/array-interpreted-as-a-fixnum/49749462#49749462", "title": "Array interpreted as a Fixnum", "body": "<p>mudasobwa <a href=\"https://stackoverflow.com/a/49748260/477037\">already explained</a> why using <code>shift</code> doesn't give the expected result. Apart from that, your code is somehow unidiomatic.</p>\n\n<p>In <code>multi_gen</code> you are creating an empty array and append elements to it using a <code>for</code> loop. You rarely have to populate an array manually. Instead, you can usually use one of Ruby's <code>Array</code> or <code>Enumerable</code> methods to generate the array. <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-select\" rel=\"nofollow noreferrer\"><code>select</code></a> is a very common one \u2013 it returns an array containing the elements for which the given block returns <code>true</code>:</p>\n\n<pre><code>(1..1000).select { |i| i % 3 == 0 || i % 5 == 0 }\n#=&gt; [3, 5, 6, 9, 10, 12, ...]\n</code></pre>\n\n<p>In <code>rec_sum</code>, you check <code>if num_arr == []</code>. Although this works, you are creating an empty throw-away array. To determine whether an array is empty, you should call its <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-empty-3F\" rel=\"nofollow noreferrer\"><code>empty?</code></a>:</p>\n\n<pre><code>if num_arr.empty?\n  # ...\nend\n</code></pre>\n\n<p>To get the remaining elements from the array, you use:</p>\n\n<pre><code>num_arr[1..num_arr.last]\n</code></pre>\n\n<p>which can be abbreviated by passing a negative index to <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>[]</code></a>:</p>\n\n<pre><code>num_arr[1..-1]\n</code></pre>\n\n<p>There's also <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-drop\" rel=\"nofollow noreferrer\"><code>drop</code></a> which might look a little nicer:</p>\n\n<pre><code>num_arr[0] + rec_sum(num_arr[1..-1])\n# vs\nnum_arr.first + rec_sum(num_arr.drop(1))\n</code></pre>\n\n<p>Another option to get first and remaining elements from an array is Ruby's <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/assignment_rdoc.html#label-Array+Decomposition\" rel=\"nofollow noreferrer\">array decomposition</a> feature (note the <code>*</code>):</p>\n\n<pre><code>def rec_sum(num_arr)\n  if num_arr.empty?\n    0\n  else\n    first, *remaining = num_arr\n    first + rec_sum(remaining)\n  end\nend\n</code></pre>\n\n<p>You could also consider using a <a href=\"http://wiki.c2.com/?GuardClause\" rel=\"nofollow noreferrer\">guard clause</a> to return from the method early:</p>\n\n<pre><code>def rec_sum(num_arr)\n  return 0 if num_arr.empty?\n  first, *remaining = num_arr\n  first + rec_sum(remaining)\nend\n</code></pre>\n\n<p>Writing recursive methods is great for learning purposed, but Ruby also has a built-in <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-sum\" rel=\"nofollow noreferrer\"><code>sum</code></a> method:</p>\n\n<pre><code>multi_gen.sum #=&gt; 234168\n</code></pre>\n\n<p>or \u2013 since you are using an older Ruby version \u2013 <a href=\"http://ruby-doc.org/core-2.5.0/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\"><code>inject</code></a>:</p>\n\n<pre><code>multi_gen.inject(0, :+) #=&gt; 234168\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 9623419, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6738475bc5f747a2ef54cde73b091372?s=128&d=identicon&r=PG&f=1", "display_name": "Balocre", "link": "https://stackoverflow.com/users/9623419/balocre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 49749462, "answer_count": 2, "score": 1, "last_activity_date": 1523353994, "creation_date": 1523346676, "question_id": 49748192, "link": "https://stackoverflow.com/questions/49748192/array-interpreted-as-a-fixnum", "title": "Array interpreted as a Fixnum", "body": "<p>I'm currently learning ruby and I wrote this piece of code : </p>\n\n<pre><code>def multi_gen\n  s = []\n  for i in (3..10)\n    if i%3 == 0 || i%5 == 0\n      s&lt;&lt;i\n    end\n  end\n  return s\nend\n\nputs multi_gen\n\ndef rec_sum(num_arr)\n  if num_arr == []\n    return 0\n  else\n    num_arr.first + rec_sum(num_arr.shift)\n  end\nend\n\nputs rec_sum(multi_gen)\n</code></pre>\n\n<p>That should return the sum of all 3 and 5 multiples up to 1000.</p>\n\n<p>But I get an error : </p>\n\n<pre><code>myrbfile.rb:17:in `rec_sum': undefined method `first' for 3:Fixnum (NoMethodError)\n        from villani.rb:17:in `rec_sum'\n        from villani.rb:21:in `&lt;main&gt;'\n</code></pre>\n\n<p>But when I re-write it like this : </p>\n\n<pre><code>def multi_gen\n  s = []\n  for i in (3..10)\n    if i%3 == 0 || i%5 == 0\n      s&lt;&lt;i\n    end\n  end\n  return s\nend\n\nputs multi_gen\n\ndef rec_sum(num_arr)\n  if num_arr == []\n    return 0\n  else\n    num_arr[0] + rec_sum(num_arr[1..num_arr.last])\n  end\nend\n\nputs rec_sum(multi_gen)\n</code></pre>\n\n<p>I don't get the error.</p>\n\n<p>So why is my first rec_sum functions interpretting my Array as a Fixnum in the first case?</p>\n"}, {"tags": ["ruby", "soap", "xsd", "wash-out"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1523350845, "post_id": 49746565, "comment_id": 86513393, "body": "What have you tried ?"}, {"owner": {"reputation": 1, "user_id": 5457169, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-258PoW8mwXY/AAAAAAAAAAI/AAAAAAAAAzk/tf_Y0DNWdNE/photo.jpg?sz=128", "display_name": "Nitesh Gupta", "link": "https://stackoverflow.com/users/5457169/nitesh-gupta"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1523352269, "post_id": 49746565, "comment_id": 86514312, "body": "I tried following code to generate xml using wsdl but i want namespaces in my generated xml: :BookingRequest =&gt; {                 :Reservation =&gt; {                          :@Action =&gt; :string,                     :UniqueIDList =&gt; {                         :UniqueID =&gt; {                             :@type =&gt; :string,                              :text =&gt; :integer                         }                     }                 }             }"}], "owner": {"reputation": 1, "user_id": 5457169, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-258PoW8mwXY/AAAAAAAAAAI/AAAAAAAAAzk/tf_Y0DNWdNE/photo.jpg?sz=128", "display_name": "Nitesh Gupta", "link": "https://stackoverflow.com/users/5457169/nitesh-gupta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523352135, "creation_date": 1523340849, "last_edit_date": 1523352135, "question_id": 49746565, "link": "https://stackoverflow.com/questions/49746565/use-multiple-namespace-in-wash-out-gem-in-ruby", "title": "Use multiple namespace in wash_out gem in ruby", "body": "<p>I have following request to be created in my SOAP API and using this gem <a href=\"https://github.com/inossidabile/wash_out/\" rel=\"nofollow noreferrer\">https://github.com/inossidabile/wash_out/</a></p>\n\n<pre><code>&lt;soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"&gt;\n  &lt;soap:Header&gt;\n    &lt;OGHeader xmlns=\"http://example.com\"&gt;\n    &lt;/OGHeader&gt;\n  &lt;/soap:Header&gt;\n  &lt;soap:Body&gt;\n    &lt;BookingRequest xmlns=\"http://example.com/Booking.wsdl\"&gt;\n      &lt;Reservation Action=\"CREATE\"&gt;\n        &lt;UniqueIDList xmlns=\"http://example.com/Unique/\"&gt;\n          &lt;UniqueID type=\"FAR\" xmlns=\"www.uio.com/Common/\"&gt;201801111429&lt;/UniqueID&gt;\n        &lt;/UniqueIDList&gt;\n      &lt;/Reservation&gt;\n    &lt;/BookingRequest &gt;\n  &lt;/soap:Body&gt;\n&lt;/soap:Envelope&gt;\n</code></pre>\n\n<p>How to use wash_out to create such request with particular namespace defined in each xmlns? </p>\n"}, {"tags": ["ruby", "rspec", "pry"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523345421, "post_id": 49746436, "comment_id": 86510011, "body": "What about another method <code>enable_output</code> that you can call from your pry session?"}, {"owner": {"reputation": 1808, "user_id": 5517806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-1s8WBghPsa0/AAAAAAAAAAI/AAAAAAAAAOM/9t8JN6syQsM/photo.jpg?sz=128", "display_name": "Phillip Longman", "link": "https://stackoverflow.com/users/5517806/phillip-longman"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523418267, "post_id": 49746436, "comment_id": 86547730, "body": "That would still be kind of an annoying workaround. In this case, because of the library I&#39;m using, I realized the best solution was to change the code, instead of the test setup."}], "answers": [{"tags": [], "owner": {"reputation": 1808, "user_id": 5517806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-1s8WBghPsa0/AAAAAAAAAAI/AAAAAAAAAOM/9t8JN6syQsM/photo.jpg?sz=128", "display_name": "Phillip Longman", "link": "https://stackoverflow.com/users/5517806/phillip-longman"}, "is_accepted": false, "score": 0, "last_activity_date": 1523418312, "last_edit_date": 1523418312, "creation_date": 1523418009, "answer_id": 49766132, "question_id": 49746436, "link": "https://stackoverflow.com/questions/49746436/suppress-stdout-during-rspec-but-not-pry/49766132#49766132", "title": "Suppress STDOUT during RSpec, but not Pry", "body": "<p>I'd still like an answer to this question if someone can think of a way. This isn't the only time I've had to suppress STDOUT in tests, and the scenarios haven't always been the same as this one.</p>\n\n<hr>\n\n<p>However, it occurred to me today that in <em>this</em> case, the easier solution is to change the code, rather than the testing setup.</p>\n\n<p>The generators are using Thor, which is very powerful, but has very opaque documentation past the basics and hasn't really been updated in years. When I dug around in the docs, I found there is some muting capability.</p>\n\n<p>By calling <code>add_runtime_options!</code> in my main <code>Cli &lt; Thor</code> class, I get a global <code>--quiet</code> option. This suppresses a lot of output, but not everything I need. <code>#say</code> still prints. <code>#run</code> itself is muted, but whatever shell commands I pass it to run are not.</p>\n\n<p>Overwriting these methods takes care of the rest of my issues:</p>\n\n<pre><code>no_commands do\n  def quiet?\n    !!options[:quiet]\n  end\n\n  def run(command, config = {})\n    config[:capture] ||= quiet?\n    super(command, config)\n  end\n\n  def say(message = \"\", color = nil, force_new_line = (message.to_s !~ /( |\\t)\\Z/))\n    super(message, color, force_new_line) unless quiet?\n  end\nend\n</code></pre>\n\n<p>I don't currently have a use-case where I would only want to suppress some things, so making it all-or-nothing works for now.</p>\n\n<p>Now, I have to explicitly create the Cli instances in my tests with <code>quiet: true</code>, but I can run RSpec without unwanted output and still use pry.</p>\n"}, {"tags": [], "owner": {"reputation": 1500, "user_id": 2566838, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f56a6e1b74d7ba48be15b92e244e9a93?s=128&d=identicon&r=PG", "display_name": "Dave Powers", "link": "https://stackoverflow.com/users/2566838/dave-powers"}, "is_accepted": false, "score": 0, "last_activity_date": 1603491537, "creation_date": 1603491537, "answer_id": 64507951, "question_id": 49746436, "link": "https://stackoverflow.com/questions/49746436/suppress-stdout-during-rspec-but-not-pry/64507951#64507951", "title": "Suppress STDOUT during RSpec, but not Pry", "body": "<p>I found <a href=\"https://stackoverflow.com/a/57538689/\">this solution</a> by <a href=\"https://stackoverflow.com/users/161869/chris-hough\">Chris Hough</a> to work in my case, adding the following configuration to <code>spec/spec_helper</code>:</p>\n<pre class=\"lang-rb prettyprint-override\"><code>RSpec.configure do |config|\n  config.before(:each) do\n    allow($stdout).to receive(:write)\n  end\nend\n</code></pre>\n<p>This replaced an <code>:all</code> before block, which was setting the following (and reversing the assignment in an after block):</p>\n<pre class=\"lang-rb prettyprint-override\"><code>$stderr = File.open(File::NULL, &quot;w&quot;)\n$stdout = File.open(File::NULL, &quot;w&quot;)\n</code></pre>\n<p>The fix still suppresses output while allowing Pry to function as expected.</p>\n"}], "owner": {"reputation": 1808, "user_id": 5517806, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-1s8WBghPsa0/AAAAAAAAAAI/AAAAAAAAAOM/9t8JN6syQsM/photo.jpg?sz=128", "display_name": "Phillip Longman", "link": "https://stackoverflow.com/users/5517806/phillip-longman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 444, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1603491537, "creation_date": 1523340366, "last_edit_date": 1523410423, "question_id": 49746436, "link": "https://stackoverflow.com/questions/49746436/suppress-stdout-during-rspec-but-not-pry", "title": "Suppress STDOUT during RSpec, but not Pry", "body": "<p>I'm testing a generator, which outputs a lot of stuff to STDOUT. I want to suppress this, and there are lots of answers for that.</p>\n\n<p>But I want to still be able to use pry. Right now, I have to disable the suppression if I need to pry into the test state.</p>\n\n<p>I was using this code. It bypassed pry entirely:</p>\n\n<pre><code>def suppress_output(&amp;block)\n  @original_stderr = $stderr\n  @original_stdout = $stdout\n\n  $stderr = $stdout = StringIO.new\n\n  yield(block)\n\n  $stderr = @original_stderr\n  $stdout = @original_stdout\n  @original_stderr = nil\n  @original_stdout = nil\nend\n</code></pre>\n\n<p>I replaced it with this. It stops at the pry, but continues to suppress output, so you can't do anything:</p>\n\n<pre><code>def suppress_output(&amp;block)\n  orig_stderr = $stderr.clone\n  orig_stdout = $stdout.clone\n  $stderr.reopen File.new(\"/dev/null\", \"w\")\n  $stdout.reopen File.new(\"/dev/null\", \"w\")\n  yield(block)\nrescue Exception =&gt; e\n  $stdout.reopen orig_stdout\n  $stderr.reopen orig_stderr\n  raise e\nensure\n  $stdout.reopen orig_stdout\n  $stderr.reopen orig_stderr\nend\n</code></pre>\n\n<p>Is there any way to have my cake and eat it too?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 0, "creation_date": 1523336130, "post_id": 49745198, "comment_id": 86505543, "body": "<code>[[&quot;2000&quot;, &quot;2004&quot;], [&quot;2005&quot;, &quot;2007&quot;]].map{|row| row.map(&amp;:to_i)}</code> works..."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 79972, "user_id": 298607, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/DVW9g.jpg?s=128&g=1", "display_name": "dawg", "link": "https://stackoverflow.com/users/298607/dawg"}, "edited": false, "score": 1, "creation_date": 1523342188, "post_id": 49745198, "comment_id": 86508027, "body": "@dawg, you may have missed that halfelf gave that as a solution earlier."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1523346330, "post_id": 49745198, "comment_id": 86510587, "body": "<code>a.each do |a|</code> \u2013 re-using an outer variable name (<a href=\"https://en.wikipedia.org/wiki/Variable_shadowing\" rel=\"nofollow noreferrer\">variable shadowing</a>) can lead to confusion. Don&#39;t do that."}], "answers": [{"tags": [], "owner": {"reputation": 8454, "user_id": 958529, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c3ec25db39c63bab1a11037649e326b8?s=128&d=identicon&r=PG", "display_name": "halfelf", "link": "https://stackoverflow.com/users/958529/halfelf"}, "is_accepted": false, "score": 8, "last_activity_date": 1523335295, "creation_date": 1523335295, "answer_id": 49745431, "question_id": 49745198, "link": "https://stackoverflow.com/questions/49745198/parse-string-values-into-integer-in-a-nested-array/49745431#49745431", "title": "Parse string values into integer in a nested array", "body": "<p>How about \"two dimensional\" <code>map</code>? </p>\n\n<pre><code>a = [[\"2000\", \"2004\"], [\"2005\", \"2007\"]]\na.map {|i| i.map(&amp;:to_i) }  # =&gt; [[2000, 2004], [2005, 2007]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 2, "creation_date": 1523339135, "post_id": 49745656, "comment_id": 86506586, "body": "why would that use less memory? can you expand on that @mudasobwa?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1523339340, "post_id": 49745656, "comment_id": 86506665, "body": "@pascalbetz After a careful re-think, I am to admit I was wrong. Updated the answer."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1523356497, "post_id": 49745656, "comment_id": 86517237, "body": "thanks for updating. Actually I was not &quot;pointing out&quot;, just wondering why it could use less memory. Still wondering.... might write a benchmark at some point."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1523361603, "post_id": 49745656, "comment_id": 86520642, "body": "@pascalbetz it&#39;s even slightly <i>less</i> efficient because \u2013 unlike <code>map</code> \u2013 the array has to be resized as new elements are being added."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1523339341, "last_edit_date": 1523339341, "creation_date": 1523336522, "answer_id": 49745656, "question_id": 49745198, "link": "https://stackoverflow.com/questions/49745198/parse-string-values-into-integer-in-a-nested-array/49745656#49745656", "title": "Parse string values into integer in a nested array", "body": "<p>Use <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\"><code>Enumerable#each_with_object</code></a>:</p>\n\n<pre><code>a = [[\"2000\", \"2004\"], [\"2005\", \"2007\"]]\na.each_with_object([]) do |a, int_val|\n  int_val &lt;&lt; a.map(&amp;:to_i)\nend\n#\u21d2 [[2000, 2004], [2005, 2007]]\n</code></pre>\n\n<p><s>It should be less memory-consuming than <code>map.map</code>.</s> (credits @pascalbetz for pointing out that\u2019s not true.)</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 4, "last_activity_date": 1523338927, "creation_date": 1523338927, "answer_id": 49746115, "question_id": 49745198, "link": "https://stackoverflow.com/questions/49745198/parse-string-values-into-integer-in-a-nested-array/49746115#49746115", "title": "Parse string values into integer in a nested array", "body": "<p>A single <code>map</code>.</p>\n\n<pre><code>a.map { |i, j| [i.to_i, j.to_i] }\n</code></pre>\n\n<p>Of course this is not a general solution, but is good for your example.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1523342010, "post_id": 49746217, "comment_id": 86507928, "body": "It&#39;s curious that this was awarded the greenie considering that it only works when <code>a.size == a[0].size == a[1].size == 2</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1523342166, "post_id": 49746217, "comment_id": 86508013, "body": "Indeed, I was also surprised."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1523339454, "creation_date": 1523339454, "answer_id": 49746217, "question_id": 49745198, "link": "https://stackoverflow.com/questions/49745198/parse-string-values-into-integer-in-a-nested-array/49746217#49746217", "title": "Parse string values into integer in a nested array", "body": "<p>Out of curiosity:</p>\n\n<pre><code>a = [[\"2000\", \"2004\"], [\"2005\", \"2007\"]]\na.flatten.map(&amp;:to_i).each_slice(2).to_a\n#\u21d2 [[2000, 2004], [2005, 2007]]\n</code></pre>\n"}], "owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1523340535, "creation_date": 1523333607, "last_edit_date": 1523335979, "question_id": 49745198, "link": "https://stackoverflow.com/questions/49745198/parse-string-values-into-integer-in-a-nested-array", "title": "Parse string values into integer in a nested array", "body": "<p>I have a nested array with string values:</p>\n\n<pre><code>a = [[\"2000\", \"2004\"], [\"2005\", \"2007\"]]\n</code></pre>\n\n<p>I am converting the value to integer like this:</p>\n\n<pre><code>int_val = []\n\na.each do |a|\n  int_val &lt;&lt; a.map(&amp;:to_i)\nend\n\nint_val #=&gt; [[2000, 2004], [2005, 2007]]\n</code></pre>\n\n<p>Is there any short solution or one line code for this? <code>[[\"2000\", \"2004\"], [\"2005\", \"2007\"]].map(&amp;:to_i)</code> will not work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "environment-variables", "gemfile"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1523337077, "post_id": 49745195, "comment_id": 86505819, "body": "why doesn&#39;t the <code>ENV</code> approach work?"}, {"owner": {"reputation": 678, "user_id": 3987384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HudSD.jpg?s=128&g=1", "display_name": "Matias Seguel", "link": "https://stackoverflow.com/users/3987384/matias-seguel"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1523337454, "post_id": 49745195, "comment_id": 86505944, "body": "I think if we set up ENVs through our terminal it will work just fine, that is our plan b. I tried using dotenv gem with bad results, gemfile is readed before load dotenv, so doesn&#39;t recognize .env file."}], "answers": [{"comments": [{"owner": {"reputation": 678, "user_id": 3987384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HudSD.jpg?s=128&g=1", "display_name": "Matias Seguel", "link": "https://stackoverflow.com/users/3987384/matias-seguel"}, "edited": false, "score": 0, "creation_date": 1523348792, "post_id": 49745828, "comment_id": 86512075, "body": "Thanks Aaron ! first one looks a good idea, but i would prefer the second one, so i will try as soon as possible and i tell you how it goes"}, {"owner": {"reputation": 4027, "user_id": 86288, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d2d5c5e3d38f94fb0dcdd78749064479?s=128&d=identicon&r=PG", "display_name": "Aaron Qian", "link": "https://stackoverflow.com/users/86288/aaron-qian"}, "reply_to_user": {"reputation": 678, "user_id": 3987384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HudSD.jpg?s=128&g=1", "display_name": "Matias Seguel", "link": "https://stackoverflow.com/users/3987384/matias-seguel"}, "edited": false, "score": 0, "creation_date": 1523383189, "post_id": 49745828, "comment_id": 86535406, "body": "FYI Per @nathanvda&#39;s solution, I just tested that relative path works as well."}], "tags": [], "owner": {"reputation": 4027, "user_id": 86288, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d2d5c5e3d38f94fb0dcdd78749064479?s=128&d=identicon&r=PG", "display_name": "Aaron Qian", "link": "https://stackoverflow.com/users/86288/aaron-qian"}, "is_accepted": false, "score": 3, "last_activity_date": 1523382990, "last_edit_date": 1523382990, "creation_date": 1523337486, "answer_id": 49745828, "question_id": 49745195, "link": "https://stackoverflow.com/questions/49745195/how-to-manage-gem-path-in-development-with-team/49745828#49745828", "title": "how to manage gem path in development with team?", "body": "<p>I have 2 solutions for you:</p>\n\n<h3>1. Each gem has its own git repository.</h3>\n\n<p>You can give each gem a separate git repository, and your <code>Gemfile</code> will look like:</p>\n\n<pre><code># Assuming private Github\n# and your private keys are setup correctly on Github.\ngem 'my_gem', '1.1', git: 'git@github.com:username/my_gem.git'\n</code></pre>\n\n<h3>2. Use <code>__dir__</code>.</h3>\n\n<p><a href=\"http://ruby-doc.org/core-2.0.0/Kernel.html#method-i-__dir__\" rel=\"nofollow noreferrer\"><code>Kernel.__dir__</code></a> returns the absolute directory of file invoking this method. This means, we can always get the base directory regardless of user.</p>\n\n<p>Assuming<code>Gemfile</code> is located at <code>/Users/person1/apps/my_app/Gemfile</code>. Then <code>__dir__</code> will return <code>/Users/person1/apps/my_app</code>.</p>\n\n<pre><code>gem \"my_gem\", '1.1', path: File.join(__dir__, '..', 'my_gem')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 678, "user_id": 3987384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HudSD.jpg?s=128&g=1", "display_name": "Matias Seguel", "link": "https://stackoverflow.com/users/3987384/matias-seguel"}, "edited": false, "score": 1, "creation_date": 1524048143, "post_id": 49749807, "comment_id": 86810576, "body": "Thank you @nathanvda, finally we decide to use relative paths and it works as a charm :) ."}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 1, "last_activity_date": 1523351753, "creation_date": 1523351753, "answer_id": 49749807, "question_id": 49745195, "link": "https://stackoverflow.com/questions/49745195/how-to-manage-gem-path-in-development-with-team/49749807#49749807", "title": "how to manage gem path in development with team?", "body": "<p>You could also agree on a relative path-structure? You could do something like </p>\n\n<pre><code>gem \"my_gem\", :path =&gt; '../../apps/my_gem/'\n</code></pre>\n\n<p>Personally I always use the <code>path</code> to develop against a gem, locally, but I always push the git reference to my collegues (because that also means that the code I am developing against --the gem, is released -- at least pushed to the repo).</p>\n\n<pre><code>gem \"my_gem\", git: 'git@github.com:username/my_gem.git'\n</code></pre>\n\n<p>And in the <code>Gemfile.lock</code> (which we also push to repository) we see the revision so that when collegues install, or upon deploy we get the same version.</p>\n"}], "owner": {"reputation": 678, "user_id": 3987384, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HudSD.jpg?s=128&g=1", "display_name": "Matias Seguel", "link": "https://stackoverflow.com/users/3987384/matias-seguel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 49749807, "answer_count": 2, "score": 0, "last_activity_date": 1523382990, "creation_date": 1523333557, "question_id": 49745195, "link": "https://stackoverflow.com/questions/49745195/how-to-manage-gem-path-in-development-with-team", "title": "how to manage gem path in development with team?", "body": "<p>i've been having a problem working in a project with my team, and i want to know how you manage situations like this.</p>\n\n<p>We're working in the same project, and the project has gems made by us, and we're working on those gems as well. </p>\n\n<p>So our gemfile looks like:</p>\n\n<pre><code># Person 1\ngem \"my_gem\", '1.1', :path =&gt; '/Users/person1/apps/my_gem/'\n\n# Person 2\ngem \"my_gem\", '1.1', :path =&gt; '/Users/person2/apps/my_gem/'\n\n# Person 3\ngem \"my_gem\", '1.1', :path =&gt; '/Users/person3/apps/my_gem/'\n</code></pre>\n\n<p>The problem is that when we push to our remote with Git, we're having conflicts everytime (sounds logic). I tried to use environment variables with dotenv gem, doing something like:</p>\n\n<pre><code># Person x\ngem \"my_gem\", '1.1', :path =&gt; ENV[\"MY_PATH\"]\n</code></pre>\n\n<p>I tried a lot, differents ways, using as reference many stackoverflow's posts... but doesn't work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "devise", "crud"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1523333202, "post_id": 49744811, "comment_id": 86504752, "body": "You have all controller for CRUD of admin. right ?"}], "answers": [{"tags": [], "owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "is_accepted": false, "score": 1, "last_activity_date": 1523333221, "creation_date": 1523333221, "answer_id": 49745147, "question_id": 49744811, "link": "https://stackoverflow.com/questions/49744811/crud-actions-on-a-devise-user-model-rails-5/49745147#49745147", "title": "CRUD actions on a Devise User model - Rails 5", "body": "<p>Devise works only with sign_up/sign_in process. It assumes not only simple user creation, but some more things, like email sending.\nSo if you want to create/update/destroy users you need to create separate <code>UsersController</code>. It is better to add an <code>admin</code> namespace to it</p>\n"}], "owner": {"reputation": 742, "user_id": 5328443, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/MIICt.png?s=128&g=1", "display_name": "slehmann36", "link": "https://stackoverflow.com/users/5328443/slehmann36"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 163, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523333221, "creation_date": 1523330628, "question_id": 49744811, "link": "https://stackoverflow.com/questions/49744811/crud-actions-on-a-devise-user-model-rails-5", "title": "CRUD actions on a Devise User model - Rails 5", "body": "<p>I'm working on a project that has a <code>User</code> Devise model and an <code>Admin</code> Devise model, and I want an <code>Admin</code> to be able to perform CRUD on the User model. </p>\n\n<p>I've set up both Devise models following the Devise Wiki's <a href=\"https://github.com/plataformatec/devise/wiki/How-to-Setup-Multiple-Devise-User-Models\" rel=\"nofollow noreferrer\">How to Setup Multiple Devise User Models</a> guide (including step 4 - exposing the scoped controllers). </p>\n\n<p>This has given me the Devise views and controllers for <code>confirmations</code>, <code>passwords</code>, <code>registrations</code>, <code>sessions</code> and <code>unlocks</code>, but no <code>users_controller</code> to add CRUD actions to.</p>\n\n<p>Could I simply create a <code>users_controller</code> and make sure it uses the correct <code>users</code> table in the database, or should I add CRUD actions to the <code>registrations_controller</code>?</p>\n\n<p>Is the above advisable, or is there a more elegant way of setting up a CRUD interface for an <code>Admin</code> to be able to manage the <code>User</code> model?</p>\n\n<p>Any help would be much appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1523324145, "post_id": 49743780, "comment_id": 86502739, "body": "show me <code>rake routes | grep test_creds</code>"}, {"owner": {"reputation": 29, "user_id": 6207954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defe557a763fc5cf001d9117c1f4c39e?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/6207954/nick"}, "reply_to_user": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1523324322, "post_id": 49743780, "comment_id": 86502776, "body": "<code>admin_user_test_creds POST   &#47;admin&#47;user(.:format) admin&#47;user#test_creds</code>"}], "answers": [{"tags": [], "owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "is_accepted": false, "score": 0, "last_activity_date": 1523353757, "creation_date": 1523353757, "answer_id": 49750512, "question_id": 49743780, "link": "https://stackoverflow.com/questions/49743780/form-for-doesnt-invoke-the-right-function-in-controller/49750512#49750512", "title": "form_for doesn&#39;t invoke the right function in Controller", "body": "<p>Remove <code>[:admin, @build_config]</code> from parameters of <code>form_for</code></p>\n"}], "owner": {"reputation": 29, "user_id": 6207954, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/defe557a763fc5cf001d9117c1f4c39e?s=128&d=identicon&r=PG&f=1", "display_name": "Nick", "link": "https://stackoverflow.com/users/6207954/nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523353757, "creation_date": 1523322582, "last_edit_date": 1523323002, "question_id": 49743780, "link": "https://stackoverflow.com/questions/49743780/form-for-doesnt-invoke-the-right-function-in-controller", "title": "form_for doesn&#39;t invoke the right function in Controller", "body": "<p>I am not able to call the right method from my controller when using <code>form_for</code>.</p>\n\n<p>I have the following view:</p>\n\n<p><code>&lt;%= form_for [:admin, @build_config], :url =&gt; admin_user_test_creds_path, html: {class: \"rf-form rf-col--6\"} do |f| -%&gt;</code></p>\n\n<p>My controller has a method called as <code>test_creds</code> which I want to be called from this form.</p>\n\n<p>My <code>routes.rb</code> has the following route:</p>\n\n<pre><code>post \"/user\", to: \"user#test_creds\", as: \"user_test_creds\"\n</code></pre>\n\n<p>However, it doesn't invoke the <code>test_creds</code> function, instead calls <code>create</code> method in controller. What am i doing wrong? Any help is appreciated :)</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 3, "creation_date": 1523318452, "post_id": 49743202, "comment_id": 86501482, "body": "The search doesn&#39;t find the section named <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/calling_methods_rdoc.html#label-Method+Lookup\" rel=\"nofollow noreferrer\"><b>Method Lookup</b></a>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1523326797, "post_id": 49743202, "comment_id": 86503354, "body": "Good to know, @muistooshort."}, {"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1523334759, "post_id": 49743202, "comment_id": 86505145, "body": "@muistooshort if you put together a quote and the link mentioned will accept the answer, would also love to know how you found that section. Did you use search? Did you know to use that section? What about methods stored in singleton classes? The singleton class doesn&#39;t seem to be mentioned."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523358136, "post_id": 49743202, "comment_id": 86518298, "body": "I dislike the explanations you quoted, BTW. They make Ruby sound much more complicated than it actually is. The <i>real</i> method lookup algorithm (ignoring <code>Module#prepend</code>, which indeed <i>does</i> complicate matters but isn&#39;t even mentioned in the OP&#39;s sources), is much simpler: Follow the <code>class</code> pointer of the object. If the method is there, execute it. If not, follow the <code>superclass</code> pointer. Repeat from step 2. That&#39;s it."}, {"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1523380095, "post_id": 49743202, "comment_id": 86533619, "body": "@J&#246;rgWMittag What do you mean by class pointer? If you ask an object about it&#39;s class then it won&#39;t respond with the singleton class, which is first in the method lookup. Also, what do you mean by superclass? Superclass doesn&#39;t take into account an included module via <code>Module#include</code> which is a common way to put methods in the lookup path. Where did you learn that the only thing one needs to do is follow the class and superclass pointer? I&#39;ve never seen that approach to the method lookup mentioned. The point of the question is to find actual documentation describing the method lookup process."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523383160, "post_id": 49743202, "comment_id": 86535387, "body": "@mbigras: &quot;What do you mean by class pointer?&quot; \u2013 I mean the pointer (or reference or field or whatever you want to call it) which points to the class of the object, usually its singleton class. &quot;If you ask an object about it&#39;s class then it won&#39;t respond with the singleton class, which is first in the method lookup.&quot; \u2013 That&#39;s because the <code>Object#class</code> method does not return the class pointer, it returns the first non-singleton, non-include class, i.e. the first non-virtual class (as YARV puts it, although I don&#39;t like it, since <i>virtual class</i> already has a completely different meaning in OO)"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523383281, "post_id": 49743202, "comment_id": 86535471, "body": "&quot;Also, what do you mean by superclass? Superclass doesn&#39;t take into account an included module via <code>Module#include</code> which is a common way to put methods in the lookup path.&quot; \u2013 Of course it does. What does <code>C.include(M)</code> do? It creates an <i>include class</i> <code>M&#39;</code> whose method table pointer, constant table pointer, class variable table pointer, and instance variable table pointer point to <code>M</code>&#39;s method table, constant table, class variable table, and instance variable table and makes the superclass of <code>C</code> the superclass of <code>M&#39;</code>, then makes <code>M&#39;</code> the superclass of <code>C</code>."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523386012, "post_id": 49743202, "comment_id": 86537090, "body": "@J&#246;rgWMittag but that&#39;s not how the lookup works in terms of <i>Ruby code</i>. Sure the VM is creating all of that structure behind the scenes to make the lookup simple but if you ask <i>Ruby</i>, <code>C.superclass</code> is not <code>M&#39;</code> or anything to do with <code>M</code>."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1523387785, "post_id": 49743202, "comment_id": 86538063, "body": "@Max: If that&#39;s not how the lookup works in terms of Ruby code, then how <i>does</i> it happen? In my Ruby code, methods in included modules override methods in the including class, which can be exactly explained by the module becoming the superclass. If you mean that it cannot be explained in terms of Ruby code, then you are of course right: method lookup is part of the semantics of Ruby code, in other words, it is part of what it means to be Ruby code; <i>of course</i>, this is impossible to explain from <i>within</i> Ruby since the semantics of Ruby come from <i>outside</i> Ruby."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523387873, "post_id": 49743202, "comment_id": 86538109, "body": "&quot;<code>C.superclass</code> is not <code>M&#39;</code> or anything to do with <code>M</code>&quot; \u2013 That&#39;s because <code>Class#superclass</code> does not return the superclass pointer, but skips over include classes and singleton classes until if finds a non-virtual class."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523388207, "post_id": 49743202, "comment_id": 86538246, "body": "If you want the &quot;most official&quot; source, that would probably be section 13.3.4 of the ISO Ruby Language Specification, but that also uses entities that are not accessible from Ruby in its specification. It is simply impossible to describe the method lookup algorithm of Ruby from within Ruby, since without the method lookup algorithm, <i>there is no Ruby</i>. [Note: it is of course possible to <i>express</i> the method lookup algorithm <i>in</i> Ruby, in fact, converting either my description or the one from the ISO spec is rather trivial. But that is not the same thing as describing it from within Ruby.]"}, {"owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523399607, "post_id": 49743202, "comment_id": 86543194, "body": "@J&#246;rgWMittag It sounds like you&#39;ve formed a clear idea in your mind about how the method lookup process works, so clear that you find the process trivial. The goal of the question is to find actual official documentation (not your interpretation of the actual documentation) to help others figure out the process also. The tip about ISO Ruby Language Specification helps achieve goal of the question, your opinion that the process is trivial does not."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1523431549, "post_id": 49743202, "comment_id": 86552935, "body": "@mbigras: Method lookup is the single most often executed operation in an object-oriented system. It <i>must</i> be trivial, otherwise, the system would be unusably slow. That&#39;s why &quot;c = obj.__class__; until m = c.__methods__[method] do c = c.superclass done; execute m&quot; was chosen to implement method lookup in a trivial manner and push the complexity into operations that are executed seldomly, such as <code>Object#class</code>, <code>Class#superclass</code>, <code>Module#ancestors</code>, and <code>Module#include</code>."}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 84, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1523317196, "creation_date": 1523317196, "question_id": 49743202, "link": "https://stackoverflow.com/questions/49743202/does-the-ruby-core-reference-ever-explain-the-method-lookup-path", "title": "Does the Ruby core reference ever explain the method lookup path?", "body": "<p>I found an <a href=\"https://www.safaribooksonline.com/library/view/the-ruby-programming/9780596516178/ch07s08.html\" rel=\"nofollow noreferrer\">excerpt</a> from <em>The Ruby Programming Language</em> by David Flanagan and Yukihiro Matsumoto that listed the basic of method lookup:</p>\n\n<blockquote>\n  <p>When Ruby evaluates a method invocation expression, it must first figure out which method is to be invoked. The process for doing this is called method lookup or method name resolution. For the method invocation expression o.m, Ruby performs name resolution with the following steps:</p>\n  \n  <ol>\n  <li><p>First, it checks the eigenclass of o for singleton methods named m.</p></li>\n  <li><p>If no method m is found in the eigenclass, Ruby searches the class of o for an instance method named m.</p></li>\n  <li><p>If no method m is found in the class, Ruby searches the instance methods of any modules included by the class of o. If that class includes more than one module, then they are searched in the reverse of the order in which they were included. That is, the most recently included module is searched first.</p></li>\n  <li><p>If no instance method m is found in the class of o or in its modules, then the search moves up the inheritance hierarchy to the superclass. Steps 2 and 3 are repeated for each class in the inheritance hierarchy until each ancestor class and its included modules have been searched.</p></li>\n  <li><p>If no method named m is found after completing the search, then a method named method_missing is invoked instead. In order to find an appropriate definition of this method, the name resolution algorithm starts over at step 1. The Kernel module provides a default implementation of method_missing, so this second pass of name resolution is guaranteed to succeed. The method_missing method is covered in more detail in Handling Undefined Methods.</p></li>\n  </ol>\n</blockquote>\n\n<p>This concept is also discussed in <em>The Well-Grounded Rubyist 2nd Edition</em> by David Black in section 13.1.3 page 394 <em>Singleton classes on the the method-lookup path</em>.</p>\n\n<p>I've found questions on Stack overflow that can benefit from answers that reference the method lookup path. I started wondering if there is any official documentation on the method lookup path.</p>\n\n<p>I searched <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/methods_rdoc.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.5.0/doc/syntax/methods_rdoc.html</a> for \"path\" and \"lookup\" but didn't find anything.</p>\n\n<p>Using the site's search functionality for <a href=\"http://ruby-doc.com/search.html?cx=011815814100681837392%3Awnccv6st5qk&amp;q=method+lookup&amp;sa=Search&amp;cof=FORID%3A9\" rel=\"nofollow noreferrer\">\"method lookup\"</a> turns up a bunch of helpful Gists on GitHub but no official documentation.</p>\n\n<ul>\n<li>Does the Ruby core reference ever explain the method lookup path?</li>\n<li>Where is it documented?</li>\n</ul>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 1, "creation_date": 1523314415, "post_id": 49742786, "comment_id": 86500297, "body": "There&#39;s a <i>reason</i> it was added :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1523326392, "post_id": 49742786, "comment_id": 86503265, "body": "<a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-map-21\" rel=\"nofollow noreferrer\">Array#map!</a> would be comparable to <code>transform_values</code>. Another way is <code>current.update(current) {  |_,o,_| o.to_i }</code>. This uses the form of <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-map-21\" rel=\"nofollow noreferrer\">Hash#update</a> (aka <code>merge!</code>) which employs a block to compute the values of all keys that are present in both hashes being merged, which is here all keys. I think using <code>map!</code> here is fine."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9621840"}, "edited": false, "score": 0, "creation_date": 1523315001, "post_id": 49742894, "comment_id": 86500495, "body": "For this particular program, your solution is probably the most elegant one and I thank you for that. However, I was more interested in the general idea of transforming hash values in place."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9621840"}, "edited": false, "score": 1, "creation_date": 1523364233, "post_id": 49742894, "comment_id": 86522539, "body": "I accept the answer where you show how to implement the <code>transform_values!</code> method. It will probably be my best option, because as you said, there is a reason this method was implemented in Ruby <code>2.4.0</code>."}], "tags": [], "owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "is_accepted": true, "score": 2, "last_activity_date": 1523318827, "last_edit_date": 1523318827, "creation_date": 1523314679, "answer_id": 49742894, "question_id": 49742786, "link": "https://stackoverflow.com/questions/49742786/converting-hash-values-to-integers/49742894#49742894", "title": "Converting hash values to integers", "body": "<p><strong>Solution for the given case</strong></p>\n\n<p>If you want integers, why not use the <code>Time</code> object's built-in methods instead of creating strings?</p>\n\n<pre><code>t = Time.now\n\ncurrent = {year: t.year, month: t.month, day: t.day}\n</code></pre>\n\n<p>Now they're all integer values.</p>\n\n<p><strong>Re-implementation</strong></p>\n\n<p>Alternatively, you can implement the method yourself, as Rails does:</p>\n\n<pre><code>class Hash\n  def transform_values!\n    return enum_for(:transform_values!) unless block_given?\n    each do |key, value|\n      self[key] = yield(value)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9621840"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1267, "favorite_count": 0, "accepted_answer_id": 49742894, "answer_count": 1, "score": 1, "last_activity_date": 1523361991, "creation_date": 1523314070, "last_edit_date": 1523361991, "question_id": 49742786, "link": "https://stackoverflow.com/questions/49742786/converting-hash-values-to-integers", "title": "Converting hash values to integers", "body": "<p>I have a small program that creates a hash and stores the current datetime, where the year, month, and day are stored as separate values. This requires me to convert the <code>Time</code> object into a <code>String</code> object, but I would like to store the values as <code>Integer</code> objects for later comparison.</p>\n\n<pre><code>current = {}\n\ncurrent[:year], current[:month], current[:day] = Time.now.to_s[0..10].split('-')\n</code></pre>\n\n<p>I achieved this by writing the following code:</p>\n\n<pre><code>current.map { |key, value| current[key] = value.to_i }\n</code></pre>\n\n<p>However, I noticed that <code>Ruby 2.4.0</code> comes with a neat method for destructively transforming hash values, allowing me to pass a proc as an argument:</p>\n\n<pre><code>current.transform_values!(&amp;:to_i)\n</code></pre>\n\n<p>My question is: <em>how would you go about writing the equivalent of the previous line of code in earlier versions of Ruby?</em> I ask because I think the map method becomes unnecessarily long.</p>\n"}, {"tags": ["ruby", "eclipse"], "answers": [{"tags": [], "owner": {"reputation": 121, "user_id": 5495155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5quCd.png?s=128&g=1", "display_name": "BadCoder", "link": "https://stackoverflow.com/users/5495155/badcoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1523315835, "creation_date": 1523315835, "answer_id": 49743019, "question_id": 49742759, "link": "https://stackoverflow.com/questions/49742759/command-line-arguments-ruby-eclipse/49743019#49743019", "title": "Command Line Arguments - Ruby/Eclipse", "body": "<p>My issue was that I was simply not calling main, I assumed it would automatically be called and that was my mistake. </p>\n"}], "owner": {"reputation": 121, "user_id": 5495155, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/5quCd.png?s=128&g=1", "display_name": "BadCoder", "link": "https://stackoverflow.com/users/5495155/badcoder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 50, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523315835, "creation_date": 1523313869, "question_id": 49742759, "link": "https://stackoverflow.com/questions/49742759/command-line-arguments-ruby-eclipse", "title": "Command Line Arguments - Ruby/Eclipse", "body": "<p>I have <code>if __FILE__ == $0</code> and want to run my code inside it. I want to run command line arguments and in eclipse I did that by placing script arguments in run config. My question is why is my code within the <code>if __FILE__ == $0</code> not running?</p>\n\n<p>How my code looks like condensed</p>\n\n<pre><code>def main\n  if __FILE__ == $0\n    # do stuff\n    if ARGV.size == 1\n      puts \"test\"\n    else\n      puts \"Error: No file specified\"\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 2, "creation_date": 1523313945, "post_id": 49742755, "comment_id": 86500157, "body": "Do you need anything more complicated than <code>&lt;%= comment.comment.size %&gt;</code>?"}, {"owner": {"reputation": 1, "user_id": 9621922, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160179402260075/picture?type=large", "display_name": "Gareth", "link": "https://stackoverflow.com/users/9621922/gareth"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523316044, "post_id": 49742755, "comment_id": 86500851, "body": "not really, i can play around with it now to display it how i want. if i was to go one further and have a character count for all comments on a page, how would that look?  thanks!!"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1523316222, "post_id": 49742755, "comment_id": 86500921, "body": "You could accumulate the total with lines like <code>&lt;% total = 0 %&gt;</code> and <code>&lt;% total += comment.comment.size %&gt;</code>, but they would be ugly. Post your controller code, and we can probably add the accumulator there much more cleanly."}], "answers": [{"tags": [], "owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "is_accepted": false, "score": 0, "last_activity_date": 1523368345, "creation_date": 1523368345, "answer_id": 49755447, "question_id": 49742755, "link": "https://stackoverflow.com/questions/49742755/when-using-ruby-how-do-i-add-a-character-count-to-a-text-area/49755447#49755447", "title": "When using Ruby how do I add a character count to a text area?", "body": "<p>If you want to count the number of characters in the <code>comment</code> string, all you need is: </p>\n\n<pre><code>&lt;%= comment.comment.size %&gt; \n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9621922, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160179402260075/picture?type=large", "display_name": "Gareth", "link": "https://stackoverflow.com/users/9621922/gareth"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523368345, "creation_date": 1523313852, "last_edit_date": 1523368180, "question_id": 49742755, "link": "https://stackoverflow.com/questions/49742755/when-using-ruby-how-do-i-add-a-character-count-to-a-text-area", "title": "When using Ruby how do I add a character count to a text area?", "body": "<p>I am trying to add a character count displayed beneath comment. I don't really know where to start, but this is what I have done so far. I know there needs to be something after the &lt;%= comment.comment %> line.....</p>\n\n<pre><code> &lt;strong&gt;Comment:&lt;/strong&gt;\n   &lt;%= comment.comment %&gt;\n &lt;/p&gt;\n &lt;p&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1523303928, "post_id": 49740644, "comment_id": 86495922, "body": "What are you expecting <code>\\b</code> to match in the regex?"}, {"owner": {"reputation": 23, "user_id": 8629324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1115a18a216899cc7bc277031217f8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yek", "link": "https://stackoverflow.com/users/8629324/yek"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1523304026, "post_id": 49740644, "comment_id": 86495980, "body": "I&#39;d like <code>\\b</code> to match a word boundary. e.g. &quot;sword&quot; would not match <code>&#47;\\bword\\b&#47;</code> but &quot;word&quot; would."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1523304655, "post_id": 49740644, "comment_id": 86496298, "body": "You need to escape the backslashes so they are treated as characters, as opposed to escaping the following character: <code>Regexp.new &quot;\\\\bword\\\\b|other&quot; #=&gt; &#47;\\bword\\b|other&#47;</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523344389, "post_id": 49740644, "comment_id": 86509348, "body": "It&#39;s probably easier to start with a regex and use <code>to_s</code> / <code>source</code> to get its string representation."}], "answers": [{"comments": [{"owner": {"reputation": 2989, "user_id": 1009655, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/K3jdk.png?s=128&g=1", "display_name": "Frederik Spang", "link": "https://stackoverflow.com/users/1009655/frederik-spang"}, "edited": false, "score": 2, "creation_date": 1523306501, "post_id": 49741088, "comment_id": 86497278, "body": "Also worth mentioning <code>%r(#{str})</code> for interpolated regex."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 2, "last_activity_date": 1523310596, "last_edit_date": 1523310596, "creation_date": 1523305212, "answer_id": 49741088, "question_id": 49740644, "link": "https://stackoverflow.com/questions/49740644/convert-between-string-and-regexp/49741088#49741088", "title": "Convert between String and Regexp", "body": "<p>Use single quotes, or escape the backslashes. </p>\n\n<pre><code>p re = Regexp.new('\\bword\\b|other') # =&gt; /\\bword\\b|other/\np re = Regexp.new(\"\\\\bword\\\\b|other\")  # =&gt; /\\bword\\b|other/\n\np re.to_s  # =&gt; \"(?-mix:\\\\bword\\\\b|other)\"\np re.inspect # =&gt; \"/\\\\bword\\\\b|other/\"\n</code></pre>\n\n<p>The resulting string of <code>to_s</code> can be used as argument for <code>Regexp.new</code> (as can the regular expression itself). </p>\n"}], "owner": {"reputation": 23, "user_id": 8629324, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1115a18a216899cc7bc277031217f8d5?s=128&d=identicon&r=PG&f=1", "display_name": "yek", "link": "https://stackoverflow.com/users/8629324/yek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 49741088, "answer_count": 1, "score": 2, "last_activity_date": 1523310596, "creation_date": 1523303517, "question_id": 49740644, "link": "https://stackoverflow.com/questions/49740644/convert-between-string-and-regexp", "title": "Convert between String and Regexp", "body": "<p>I need to convert back and forth between the string representation of a Regexp and the Regexp itself.</p>\n\n<p>Something like this: <br> \n<code>&gt; Regexp.new \"\\bword\\b|other</code><br>\n<code>=&gt; /\\bword\\b|other/</code></p>\n\n<p>However, doing so results in <code>/\\x08word\\x08|other/</code></p>\n\n<p>Is there some way to accomplish this?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "api", "hash"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523301080, "post_id": 49739828, "comment_id": 86494529, "body": "\u201csaving to empty hash\u201d\u2014<code>data</code> is an array, not a hash."}, {"owner": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523301964, "post_id": 49739828, "comment_id": 86494934, "body": "That was a typo, thank you. Same issue still exists, unfortunately."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "edited": false, "score": 0, "creation_date": 1523307167, "post_id": 49740501, "comment_id": 86497596, "body": "Thank you for your answer nathanvda!  I made data an empty array so that I could use it in the If loop to store data from the response.body in the &#39;users&#39; variable.   I will give your fix a shot though, and I appreciate it. Will update if it works for me."}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 1, "last_activity_date": 1523302930, "creation_date": 1523302930, "answer_id": 49740501, "question_id": 49739828, "link": "https://stackoverflow.com/questions/49739828/issue-looping-through-a-hash-checking-for-value-and-saving-to-empty-hash/49740501#49740501", "title": "Issue looping through a hash, checking for value and saving to empty hash", "body": "<p>You always omit the first fetched users. Before checking for the presence of <code>next_page</code> you never store the fetched users, and thus <code>data</code> remains empty. </p>\n\n<p>See here: </p>\n\n<pre><code>users = res[\"users\"]\ndata = {}  ## ---data is initialised but never filled? \n\nif users[\"next_page\"]\n</code></pre>\n\n<p>Secondly I suspect that <code>res[\"users\"]</code> is an array, and since you write <code>data.concat(users)</code> later that actually <code>data</code> should also be an array. </p>\n\n<p>So your code should be fixed be replacing the above mentioned three lines as follows: </p>\n\n<pre><code>data = res[\"users\"]\n\nif users[\"next_page\"]\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 3835982, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/785e66c1537c65d5ea26f5b1795d4461?s=128&d=identicon&r=PG", "display_name": "sunkencity999", "link": "https://stackoverflow.com/users/3835982/sunkencity999"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 49740501, "answer_count": 1, "score": 0, "last_activity_date": 1523302930, "creation_date": 1523300152, "last_edit_date": 1523301914, "question_id": 49739828, "link": "https://stackoverflow.com/questions/49739828/issue-looping-through-a-hash-checking-for-value-and-saving-to-empty-hash", "title": "Issue looping through a hash, checking for value and saving to empty hash", "body": "<p>I'm attempting pull json data from an api,  iterate through a hash of JSON data, append the new data to an empty hash and then check the pulled data for whether the key 'next_page' has any value..breaking the loop if the value is returned nill. I'm pulling the first batch of data from the api successfully, but my loop seems to be incorrect as no data is being inserted into the empty hash i've created.  </p>\n\n<p>Any ideas would be deeply appreciated. Thanks for giving my question a read! </p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\nrequire 'json'\n\n\n#imports APR User data from the zendesk api and populates the database with it. \n\n\nuri = URI.parse(\"https://tester.zendesk.com/api/v2/users.json\")\nrequest = Net::HTTP::Get.new(uri)\nrequest.content_type = \"application/json\"\nrequest.basic_auth(\"cbradford@tester.com\", \"tester32\")\n\nreq_options = {\n  use_ssl: uri.scheme == \"https\",\n}\n\n@response = Net::HTTP.start(uri.hostname, uri.port, req_options) do |http|\n  http.request(request)\nend\nputs @response.body\nputs @response.message\nputs @response.code\n\nres = @response.body\nusers = res[\"users\"]\ndata = {}\n\nif users[\"next_page\"]\n newUri = users.fetch('next_page')  \n uriLoop = URI.parse(newUri)\n request = Net::HTTP::Get.new(uriLoop)\n request.content_type = \"application/json\"\n request.basic_auth(\"cbradford@tester.com\", \"tester32\")\n\n req_options = {\n   use_ssl: uriLoop.scheme == \"https\",\n }\n\n @responseLoop = Net::HTTP.start(uriLoop.hostname, uriLoop.port, req_options) do |http|\n  http.request(request)\n  end\n\n  resLoop = JSON.parse(@responseLoop.body)\n  puts resLoop\n  users = resLoop[\"users\"]\n  data.concat(users)\nend\n\n\nputs data\nputs \"hash created Successfully!\"\n</code></pre>\n"}, {"tags": ["ruby", "postgresql"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1523351454, "post_id": 49739775, "comment_id": 86513789, "body": "Maybe there&#39;s another part that is closing the connection?"}, {"owner": {"reputation": 1230, "user_id": 3323777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b57e9b0115e6d0356bd4d7502d5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "eugene-nikolaev", "link": "https://stackoverflow.com/users/3323777/eugene-nikolaev"}, "edited": false, "score": 0, "creation_date": 1523455634, "post_id": 49739775, "comment_id": 86569634, "body": "what are array_table_names?"}], "owner": {"reputation": 83, "user_id": 9419102, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3b0a94b437e39bbb234559d4300691ef?s=128&d=identicon&r=PG&f=1", "display_name": "Fatna", "link": "https://stackoverflow.com/users/9419102/fatna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 90, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1523299945, "creation_date": 1523299945, "question_id": 49739775, "link": "https://stackoverflow.com/questions/49739775/postgres-exec-connection-is-closed-pgconnectionbad-ruby-not-rails", "title": "Postgres : `exec&#39;: connection is closed (PG::ConnectionBad) (ruby not rails)", "body": "<p>I am pg gem in ruby ( I am not using rails at all, this just ruby), when I call a select statement it works :</p>\n\n<pre><code>res_t = @pg_conn.exec(\"SELECT * FROM brcmanager.\\\"Users\\\" limit 2;\") \n</code></pre>\n\n<p>but when I try to do it in a loop to use more than one table, using an array of tables :</p>\n\n<pre><code>array_table_names.each { |x| \n res_t = @pg_conn.exec(\"SELECT * FROM brcmanager.\\\"#{x}\\\" limit 2;\") \n</code></pre>\n\n<p>I got :</p>\n\n<pre><code>brc_migration_match_data.rb:69:in `exec': connection is closed (PG::ConnectionBad)\n</code></pre>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby", "padrino"], "answers": [{"comments": [{"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "edited": false, "score": 0, "creation_date": 1523361380, "post_id": 49742037, "comment_id": 86520491, "body": "Thanks so much! I will try, it is working like route, I must change my url helpers for sinatra style, padrino style url(:sbirka, :sort,  :order =&gt; &quot;country&quot;, :asc =&gt; @asc) does not work, I will write as soon as I will try"}, {"owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "edited": false, "score": 0, "creation_date": 1523382064, "post_id": 49742037, "comment_id": 86534786, "body": "It is not working :( If I use :search? as in example, I get 404 not found, when I put :search? away, it is working."}], "tags": [], "owner": {"reputation": 1197, "user_id": 400743, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a0d5c51291898c92154ba4ac1c56cd6?s=128&d=identicon&r=PG", "display_name": "Bartosz Pietraszko", "link": "https://stackoverflow.com/users/400743/bartosz-pietraszko"}, "is_accepted": false, "score": 0, "last_activity_date": 1523309701, "creation_date": 1523309701, "answer_id": 49742037, "question_id": 49739626, "link": "https://stackoverflow.com/questions/49739626/padrino-route-optional-parameter/49742037#49742037", "title": "Padrino route optional parameter", "body": "<p>Since Padrino is based on Sinatra, every routing pattern possible with Sinatra should be possible in Padrino as well. From <a href=\"http://sinatrarb.com/intro.html\" rel=\"nofollow noreferrer\">Sinatra's excellent README file</a>, introductory 'Routes' section:</p>\n\n<blockquote>\n  <p>Route patterns may have optional parameters</p>\n</blockquote>\n\n<p>In your case, assuming <code>:search</code> is optional, I would try:</p>\n\n<pre><code>get '/:order/:asc/:search?' do\n  # your  code\nend\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8774732, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/bDtaU.jpg?s=128&g=1", "display_name": "Mlok", "link": "https://stackoverflow.com/users/8774732/mlok"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 154, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523309701, "creation_date": 1523299391, "question_id": 49739626, "link": "https://stackoverflow.com/questions/49739626/padrino-route-optional-parameter", "title": "Padrino route optional parameter", "body": "<p>I am trying to do some tricks with routes. And I need to use optional route parameter in Padrino. I googled that solution for this are \"()\" parenthesis. I couldn't find in docs. </p>\n\n<p>But when I try to use</p>\n\n<pre><code>get :sort, :with =&gt; [:order, :asc, '(:search)'] do\n</code></pre>\n\n<p>them, mustermann is giving me classic error for missing parameter</p>\n\n<pre><code>cannot expand with keys [:asc, :order], possible expansions: [:asc, :order, :search]\n</code></pre>\n\n<p>when I try to call </p>\n\n<pre><code>url(:sbirka, :sort, :order =&gt; \"id\", :asc =&gt; @asc)\n</code></pre>\n\n<p>I also tried different style</p>\n\n<pre><code>get :sort, \"/:order/:asc/(:search)\" do\n</code></pre>\n\n<p>with the same result</p>\n\n<p>Please any suggestions how to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": true, "score": 4, "last_activity_date": 1523296556, "creation_date": 1523296556, "answer_id": 49738904, "question_id": 49738820, "link": "https://stackoverflow.com/questions/49738820/query-which-controller-will-be-used-for-a-url/49738904#49738904", "title": "Query which controller will be used for a URL", "body": "<p>Here you go: <a href=\"https://stackoverflow.com/questions/2733678/rails-parse-url-to-hashroutes\">Rails parse url to hash(Routes)</a></p>\n\n<p>That says it's <code>Rails.application.routes.recognize_path \"/accounts/1\"</code></p>\n\n<p>You can also use <code>assert_routing</code> in your tests. If you don't have tests, now is a very good time to add some. And you can read the source of <code>assert_routing</code>, and <code>assert_recognizes</code>, to see what they do.</p>\n"}], "owner": {"reputation": 6472, "user_id": 3029173, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/xJxwn.jpg?s=128&g=1", "display_name": "AnilRedshift", "link": "https://stackoverflow.com/users/3029173/anilredshift"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 49738904, "answer_count": 1, "score": 1, "last_activity_date": 1523296556, "creation_date": 1523296266, "question_id": 49738820, "link": "https://stackoverflow.com/questions/49738820/query-which-controller-will-be-used-for-a-url", "title": "Query which controller will be used for a URL", "body": "<h3>Question</h3>\n\n<p>I'm looking for something in the rails console or similar where I can call <code>get_controller_for_path('/some/path/')</code> and it will return the corresponding controller.</p>\n\n<h3>Background</h3>\n\n<p>I have a rails project with a lot of routes. I'm investigating a routing problem and want to confirm that a given URL will match a specific route.</p>\n\n<p>I can use <code>bundle exec rake routes</code> to view the list of routes, but that still requires my human eyes to parse the hundreds (thousands?) of routes and figure out what's going on.</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "is_accepted": false, "score": 0, "last_activity_date": 1523298475, "creation_date": 1523298475, "answer_id": 49739375, "question_id": 49738466, "link": "https://stackoverflow.com/questions/49738466/gem-install-error-requiring-ruby-version/49739375#49739375", "title": "Gem Install Error Requiring Ruby Version", "body": "<p>Try running these commands </p>\n\n<pre><code>gem install rubygems-update\nupdate_rubygems\n</code></pre>\n\n<p>I suspect it may be a problem with rubygems rather than your ruby version. </p>\n"}], "owner": {"reputation": 37991, "user_id": 409976, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9ccda0b49cc974197399eae01ebd6850?s=128&d=identicon&r=PG", "display_name": "Kevin Meredith", "link": "https://stackoverflow.com/users/409976/kevin-meredith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2588, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523298475, "creation_date": 1523294874, "question_id": 49738466, "link": "https://stackoverflow.com/questions/49738466/gem-install-error-requiring-ruby-version", "title": "Gem Install Error Requiring Ruby Version", "body": "<p>Using <code>ubuntu/trust64</code>, I'm getting the following error:</p>\n\n<pre><code>vagrant@vagrant-ubuntu-trusty-64:~/workspace/project$ bundle install\nFetching gem metadata from http://rubygems.org/.................\nFetching gem metadata from http://rubygems.org/..\nResolving dependencies.......................................................................\nRubyGems 1.8.23 is not threadsafe, so your gems will be installed one at a time. Upgrade to RubyGems 2.1.0 or higher to enable parallel gem installation.\nUsing concurrent-ruby 1.0.5\nFetching i18n 1.0.0\nInstalling i18n 1.0.0\nGem::InstallError: i18n requires Ruby version &gt;= 2.0.0.\nAn error occurred while installing i18n (1.0.0), and Bundler cannot continue.\nMake sure that `gem install i18n -v '1.0.0'` succeeds before bundling.\n\nIn Gemfile:\n  activesupport was resolved to 5.1.6, which depends on\n    i18n\n</code></pre>\n\n<p>I don't understand the above error since I'm using, as I understand, <code>ruby 2.4.3</code>, which is greater than <code>2.0.0</code>:</p>\n\n<pre><code>vagrant@vagrant-ubuntu-trusty-64:~/workspace/project$ ruby -v\nruby 2.4.3p205 (2017-12-14 revision 61247) [x86_64-linux-gnu]\n</code></pre>\n\n<p>Please advise me on how to fix this issue.</p>\n"}, {"tags": ["ruby", "visual-studio-code", "rbenv"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523293375, "post_id": 49738054, "comment_id": 86490398, "body": "Run <code>bundle exec rake task</code> to explicitly enforce the proper env."}, {"owner": {"reputation": 71, "user_id": 464792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e07d107a684a01166e426d176f9266?s=128&d=identicon&r=PG", "display_name": "Pelted", "link": "https://stackoverflow.com/users/464792/pelted"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523315311, "post_id": 49738054, "comment_id": 86500607, "body": "@mudasobwa yeah that doesn&#39;t actually work in this case either. For the sake of brevity I didn&#39;t include every permutation of the task that has been tried."}], "answers": [{"tags": [], "owner": {"reputation": 508, "user_id": 4367134, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-6iv9vgseVBQ/AAAAAAAAAAI/AAAAAAAAy7k/eQQy8RWInNc/photo.jpg?sz=128", "display_name": "Jeff Hykin", "link": "https://stackoverflow.com/users/4367134/jeff-hykin"}, "is_accepted": false, "score": 1, "last_activity_date": 1566878903, "creation_date": 1566878903, "answer_id": 57667566, "question_id": 49738054, "link": "https://stackoverflow.com/questions/49738054/issue-with-tasks-not-picking-up-correct-ruby-version/57667566#57667566", "title": "Issue with tasks not picking up correct ruby version", "body": "<p>This answer will get tasks working, however it doesn't fix the underlying problem with VS Code. This probably needs to be an issue posted on their GitHub repo.</p>\n\n<p>If you're on a Mac, this command will put a ruby symlink in your path that links to the rbenv version. Rbenv (and most applications) only change the path inside a shell environment (the .bash_profile only changes it for bash). This command will add it to the path regardless of what shell you run.</p>\n\n<pre><code>ln -s \"/Users/$(whoami)/.rbenv/shims/ruby\" /usr/local/bin/ruby\n</code></pre>\n\n<p>My guess is that VS Code is not actually using a shell environment and is instead calling the executable directly.</p>\n"}], "owner": {"reputation": 71, "user_id": 464792, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/88e07d107a684a01166e426d176f9266?s=128&d=identicon&r=PG", "display_name": "Pelted", "link": "https://stackoverflow.com/users/464792/pelted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 206, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1566878903, "creation_date": 1523293324, "question_id": 49738054, "link": "https://stackoverflow.com/questions/49738054/issue-with-tasks-not-picking-up-correct-ruby-version", "title": "Issue with tasks not picking up correct ruby version", "body": "<p>This issues comes a goes depending on the Ruby project I'm working on. VSCode Tasks often do not run from the proper <code>rbenv</code> shimmed Ruby version. Sometimes, if I manually run a command from the integrated terminal first, then run the Code task it picks up the correct Ruby.</p>\n\n<p>Example VSCode Task,</p>\n\n<pre><code>{\n  \"version\": \"2.0.0\",\n  \"tasks\": [\n    {\n      \"label\": \"Run All Tests\",\n      \"type\": \"shell\",\n      \"command\": \"bin/rails test\",\n      \"group\": \"test\",\n      \"presentation\": {\n        \"reveal\": \"always\",\n        \"panel\": \"shared\"\n      }\n    }\n  ]\n}\n</code></pre>\n\n<p>When launching Code from the project directory (or any other way for that matter) if I run this task it runs from the context of the System ruby. However, if I open the integrated terminal and type <code>bin/rails test</code> (which works) then run the task again it will run in the proper <code>rbenv</code> shimmed ruby context.</p>\n\n<p>Launching a debugger session however does work in the proper Ruby context, so I really don't understand what's being missed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "access-token"], "comments": [{"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1523292855, "post_id": 49737498, "comment_id": 86490107, "body": "What tutorials are you looking at? After a quick search for &quot;rails app token auth api controller&quot;, I&#39;m seeing that most tutorials have you set up a new app, but this is just for demo purposes. This looks like a pretty good one, that assumes you&#39;re adding token auth to an existing app: <a href=\"http://www.mccartie.com/2016/11/03/token-based-api-authentication.html\" rel=\"nofollow noreferrer\">mccartie.com/2016/11/03/token-based-api-authentication.html</a>"}, {"owner": {"reputation": 405, "user_id": 1472621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cc346c5eb97a9ef44347af50a81ad81f?s=128&d=identicon&r=PG", "display_name": "Matt", "link": "https://stackoverflow.com/users/1472621/matt"}, "edited": false, "score": 0, "creation_date": 1523300714, "post_id": 49737498, "comment_id": 86494356, "body": "@max makes a good point. I assumed you were trying to authenticate an API within an existing app, not that you were trying to authenticate a GUI."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1523299141, "post_id": 49739507, "comment_id": 86493515, "body": "There are different javascript based solutions to using token based auth in classical applications but really why bother?"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1523299015, "creation_date": 1523299015, "answer_id": 49739507, "question_id": 49737498, "link": "https://stackoverflow.com/questions/49737498/rails-auth-token-in-full-non-api-app/49739507#49739507", "title": "Rails: Auth Token in Full, Non-API App?", "body": "<p>For \"classical\" web applications you want to use session based authentication instead of tokens. </p>\n\n<p>Token based authentication is stateless and requires the token to be sent along with every request. This is done via HTTP headers or by placing it in the request body. Which is how you use API's.</p>\n\n<p>For a classical web application there is simply no practical way to send the token along on GET requests.</p>\n\n<p>Session based authentication instead works by using cookies to store the authentication claim (usually a user id). While you could use a token and store it in the session its just an overly convoluted solution since it defeats the whole purpose of token based auth.</p>\n"}], "owner": {"reputation": 7, "user_id": 8326377, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/92d5dd207578eb0d8e1b18ff170d2b4e?s=128&d=identicon&r=PG&f=1", "display_name": "Lyman Johnson", "link": "https://stackoverflow.com/users/8326377/lyman-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "accepted_answer_id": 49739507, "answer_count": 1, "score": 0, "last_activity_date": 1523299015, "creation_date": 1523291241, "last_edit_date": 1523297045, "question_id": 49737498, "link": "https://stackoverflow.com/questions/49737498/rails-auth-token-in-full-non-api-app", "title": "Rails: Auth Token in Full, Non-API App?", "body": "<p>I'm building a rails app and I want to have token authentication but I don't want to build a separate API, I want it to be all integrated into one rails app.</p>\n\n<p>Is this possible? Every single tutorial about token authentication I can find is about APIs, and every API seems to need to be its own standalone entity running in parallel with the main app.</p>\n\n<p>Is what I'm asking impossible, or stupid? If not, how do I do it?</p>\n"}, {"tags": ["ruby", "regex", "rubular"], "comments": [{"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 1, "creation_date": 1523288800, "post_id": 49736737, "comment_id": 86487901, "body": "<code>(&lt;?=&gt;)|[^[:upper:]+|^ ]</code> replace with <code>$1</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523289367, "post_id": 49736737, "comment_id": 86488251, "body": "Why does your string contain those extra characters?"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523289214, "post_id": 49736950, "comment_id": 86488157, "body": "<code>join</code> does not require a default argument to be explicitly passed and <i>squeezing</i> would probably make sense afterwards."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1523289460, "post_id": 49736950, "comment_id": 86488304, "body": "this is nevertheless the best approach AFAICT."}, {"owner": {"reputation": 65, "user_id": 8125349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/swnsg.jpg?s=128&g=1", "display_name": "Vincent Cheloudiakoff", "link": "https://stackoverflow.com/users/8125349/vincent-cheloudiakoff"}, "edited": false, "score": 0, "creation_date": 1523293950, "post_id": 49736950, "comment_id": 86490743, "body": "Thank you, i think that it&#39;s the best approach to solve my problem !"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1523305137, "post_id": 49736950, "comment_id": 86496574, "body": "I would think the regex should also include <code>\\d</code>."}, {"owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "edited": false, "score": 0, "creation_date": 1523305386, "post_id": 49736950, "comment_id": 86496718, "body": "<code>&#47;[A-Z\\d+| ^]|&lt;?=&gt;&#47;</code> is faster and also includes the <code>^</code> character  that you forgot :)"}], "tags": [], "owner": {"reputation": 142455, "user_id": 5133585, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/dfqcw.png?s=128&g=1", "display_name": "Sweeper", "link": "https://stackoverflow.com/users/5133585/sweeper"}, "is_accepted": true, "score": 5, "last_activity_date": 1523305450, "last_edit_date": 1523305450, "creation_date": 1523289150, "answer_id": 49736950, "question_id": 49736737, "link": "https://stackoverflow.com/questions/49736737/select-a-string-in-regex-with-ruby/49736950#49736950", "title": "Select a string in regex with ruby", "body": "<p>You can try an alternative approach: matching everything you want to <em>keep</em> then joining the result.</p>\n\n<p>You can use this regex to match everything you want to keep:</p>\n\n<pre><code>[A-Z\\d+| ^]|&lt;?=&gt;\n</code></pre>\n\n<p>As you can see this is just a using <code>|</code> and <code>[]</code> to create a list of strings that you want to keep: uppercase, numbers, +, |, space, ^, => and &lt;=>.</p>\n\n<p>Example:</p>\n\n<pre><code>\"aA azee + B =&gt; C=\".scan(/[A-Z\\d+| ^]|&lt;?=&gt;/).join()\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>\"A  + B =&gt; C\"\n</code></pre>\n\n<p>Note that there are 2 consecutive spaces between \"A\" and \"+\". If you don't want that you can call <a href=\"https://ruby-doc.org/core/String.html#method-i-squeeze\" rel=\"nofollow noreferrer\"><code>String#squeeze</code></a>.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1523305915, "post_id": 49737052, "comment_id": 86496980, "body": "I prefer this solution because it explicitly excludes characters, as opposed to including what is inferred to be the strings to be kept. Also, the POSIX expression for uppercase letters has wider applicability than <code>A-Z</code>."}], "tags": [], "owner": {"reputation": 19159, "user_id": 3600709, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/731c8c4c0029d3414563333de16b8977?s=128&d=identicon&r=PG&f=1", "display_name": "ctwheels", "link": "https://stackoverflow.com/users/3600709/ctwheels"}, "is_accepted": false, "score": 1, "last_activity_date": 1523289533, "creation_date": 1523289533, "answer_id": 49737052, "question_id": 49736737, "link": "https://stackoverflow.com/questions/49736737/select-a-string-in-regex-with-ruby/49737052#49737052", "title": "Select a string in regex with ruby", "body": "<p><a href=\"https://regex101.com/r/825Tmx/2\" rel=\"nofollow noreferrer\">See regex in use here</a></p>\n\n<pre><code>(&lt;?=&gt;)|[^[:upper:]+|^ ]\n</code></pre>\n\n<ul>\n<li><code>(&lt;?=&gt;)</code> Captures <code>&lt;=&gt;</code> or <code>=&gt;</code> into capture group 1</li>\n<li><code>[^[:upper:]+|^ ]</code> Matches any character that is not an uppercase letter (same as <code>[A-Z]</code>) or <code>+</code>, <code>|</code>, <code>^</code> or a space</li>\n</ul>\n\n<p><a href=\"https://tio.run/##KypNqvz/v0BBKdFRIbEqNVVBW8FJwdZOwdlWSS@9uDRJQ1/Dxt7WTrMmOi7aqrSgILXIKla7Jk4hVl9HQT3GUF3z/38A\" rel=\"nofollow noreferrer\">See code in use here</a></p>\n\n<pre><code>p \"aA azee + B =&gt; C=\".gsub(/(&lt;?=&gt;)|[^[:upper:]+|^ ]/, '\\1')\n</code></pre>\n\n<p>Result: <code>A  + B =&gt; C</code></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1572670533, "creation_date": 1572670533, "answer_id": 58668347, "question_id": 49736737, "link": "https://stackoverflow.com/questions/49736737/select-a-string-in-regex-with-ruby/58668347#58668347", "title": "Select a string in regex with ruby", "body": "<pre><code>r = /[a-z\\s[:punct:]&amp;&amp;[^+ |^]]/\n\n\"The cat, 'Boots', had 9+5=4 ^lIVEs^ leF|t.\".gsub(r,'')\n  #=&gt; \"T  B  9+54 ^IVE^ F|\"\n</code></pre>\n\n<p>The regular expression reads, \"Match lowercase letters, whitespace and punctuation that are not the characters <code>'+'</code>, <code>' '</code>, <code>'|'</code> and <code>'^'</code>. <code>&amp;&amp;</code> within a character class is the <em>set intersection</em> operator. Here it intersects the set of characters that match <code>a-z\\s[:punct:]</code> with those that match <code>[^+ |^]</code>. (Note that this includes whitespaces other than spaces.) For more information search for \"character classes also support the &amp;&amp; operator\" in <a href=\"https://ruby-doc.org/core-2.6.3/Regexp.html\" rel=\"nofollow noreferrer\">Regexp</a>.</p>\n\n<p>I have not included <code>'=&gt;'</code> and <code>'&lt;=&gt;'</code> as those, unlike <code>'+'</code>, <code>' '</code>, <code>'|'</code> and <code>'^'</code>, are multi-character strings and therefore require a different approach than simply removing certain characters. </p>\n"}], "owner": {"reputation": 65, "user_id": 8125349, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/swnsg.jpg?s=128&g=1", "display_name": "Vincent Cheloudiakoff", "link": "https://stackoverflow.com/users/8125349/vincent-cheloudiakoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 49736950, "answer_count": 3, "score": 1, "last_activity_date": 1572670533, "creation_date": 1523288383, "question_id": 49736737, "link": "https://stackoverflow.com/questions/49736737/select-a-string-in-regex-with-ruby", "title": "Select a string in regex with ruby", "body": "<p>I have to clean a string passed in parameter, and remove all lowercase letters, and all special character except :</p>\n\n<ul>\n<li>+</li>\n<li>|</li>\n<li>^</li>\n<li>space</li>\n<li>=></li>\n<li>&lt;=></li>\n</ul>\n\n<p>so i have this string passed in parameter:</p>\n\n<p><code>aA azee + B =&gt; C=</code></p>\n\n<p>and i need to clean this string to have this result:</p>\n\n<p><code>A + B =&gt; C</code></p>\n\n<p>I do </p>\n\n<p><code>string.gsub(/[^[:upper:][+|^ ]]/, \"\")</code></p>\n\n<p>output: <code>\"A + B C\"</code></p>\n\n<p>I don't know how to select the <code>=&gt;</code> (and for <code>&lt;=&gt;</code>) string's with regex in ruby)</p>\n\n<p>I know that if i add string.gsub(/[^[:upper:][+|^ <code>=&gt;</code>]]/, \"\") into my regex, the last <code>=</code> in my string passed in parameter will be selected too</p>\n"}, {"tags": ["ruby", "xml", "xpath", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "reply_to_user": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "edited": false, "score": 0, "creation_date": 1523289518, "post_id": 49736550, "comment_id": 86488343, "body": "It worked for the wrong reason; because an XPath that starts with &#39;//&#39; goes back to the document root and searches again, disregarding the current context. But whatever floats your boat..."}], "tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": true, "score": 1, "last_activity_date": 1523287732, "creation_date": 1523287732, "answer_id": 49736550, "question_id": 49736444, "link": "https://stackoverflow.com/questions/49736444/retreat-in-xml-with-xpath-expression/49736550#49736550", "title": "&quot;Retreat&quot; in XML with Xpath expression", "body": "<p>Look up <code>XPath axes parent</code>, like this: <a href=\"https://www.google.com/search?client=ubuntu&amp;hs=49v&amp;q=xpath+axes+parent\" rel=\"nofollow noreferrer\">https://www.google.com/search?client=ubuntu&amp;hs=49v&amp;q=xpath+axes+parent</a></p>\n\n<p>Then try <code>parent::*[1]/notes</code> to make an XPath query that retreats one step.</p>\n"}], "owner": {"reputation": 109, "user_id": 9486016, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-2e0nuSWKDGE/AAAAAAAAAAI/AAAAAAAAAIE/JYcps_nk_FY/photo.jpg?sz=128", "display_name": "No&#233;mie Harvey", "link": "https://stackoverflow.com/users/9486016/no%c3%a9mie-harvey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 14, "favorite_count": 0, "accepted_answer_id": 49736550, "answer_count": 1, "score": 0, "last_activity_date": 1523287732, "creation_date": 1523287378, "question_id": 49736444, "link": "https://stackoverflow.com/questions/49736444/retreat-in-xml-with-xpath-expression", "title": "&quot;Retreat&quot; in XML with Xpath expression", "body": "<p>I define the parent path of the map attributes to <code>#{@root}/items/home</code>, but I have a special case. The xpath would be <code>#{@root}/notes</code></p>\n\n<p>Can I \"retreat\" in a xpath like this:  <code>xpath: '../notes'</code> (For some reasons, I don't want to change my parent path)</p>\n\n<p>Thank you in advance ! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "npm"], "answers": [{"tags": [], "owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "is_accepted": false, "score": 0, "last_activity_date": 1523386142, "last_edit_date": 1523386142, "creation_date": 1523287789, "answer_id": 49736564, "question_id": 49736332, "link": "https://stackoverflow.com/questions/49736332/doing-recursive-deep-through-dependencies-in-ruby-on-rails-npm/49736564#49736564", "title": "Doing recursive deep through dependencies in ruby on rails npm", "body": "<p>The problem is recursive, therefore any solution is recursive.  You can set up your own stack and handle the recursion that way, but you're still doing it recursively.</p>\n\n<p>Update:</p>\n\n<p>Originally, the question was \"how do I do this in a non-recursive manner?\", which is why my answer is \"you can't\".  The question has changed, so let's have a new answer :)</p>\n\n<p>When handling a recursive problem you must have a condition which ends the recursion.  For many problems you have a straight-forward tree that you're walking and when you reach a leaf you return the result.</p>\n\n<p>This one is a bit different, though, which is why I'm answering it.  The problem here is that each branch might not have an end itself. Package x depends on package y which depends on package z.  Are they all so tidy?  Maybe package x depends on y and z, and y and z both depend on w.  This provides us with a glimpse of the solution because there's no reason to pull in w twice.</p>\n\n<p>What I'd do is create a recursive function that takes a Hash as a parameter as well as a package name.  For each package, add it to the hash and then recurse.  If it's already in the hash, skip it.  That simple logic should do it.</p>\n\n<p>Some code, which works with what you have above:</p>\n\n<pre><code>def get_deps(package, all_deps = Hash.new)\n  return if all_deps[package]\n  these_deps = parse_dependencies_for_package(fetch_dependencies_for_package(package))\n  all_deps[package] = these_deps \n  these_deps.each { |dep| get_deps(dep, all_deps) }\n  return all_deps\nend\n</code></pre>\n"}], "owner": {"reputation": 1990, "user_id": 4952770, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/GMmxH.jpg?s=128&g=1", "display_name": "Junaid Farooq", "link": "https://stackoverflow.com/users/4952770/junaid-farooq"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 48, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1523386142, "creation_date": 1523286919, "last_edit_date": 1523373149, "question_id": 49736332, "link": "https://stackoverflow.com/questions/49736332/doing-recursive-deep-through-dependencies-in-ruby-on-rails-npm", "title": "Doing recursive deep through dependencies in ruby on rails npm", "body": "<p>I have a small controller class to get dependencies of an NPM package. Which is giving me dependencies for a package when I do <code>/package/:package_anme/dependencies</code>. But I could only go to 1 level. or 2 level, How I can go to an infinite level of dependencies..</p>\n\n<pre><code>class DependenciesController &lt; ApplicationController\n  def package\n    level_one_deps = parse_dependencies_for_package(fetch_dependencies_for_package(params[:package_name]))\n\n    level_two_deps=\n      level_one_deps.map do |dep|\n        parse_dependencies_for_package(fetch_dependencies_for_package(dep))\n      end\n\n    level_two_clean_deps = reject_empty(level_two_deps).flatten\n\n    render json: level_one_deps + level_two_clean_deps\n  end\n\n  private\n\n  def fetch_dependencies_for_package(package)\n    JSON.parse(Faraday.get(\"http://registry.npmjs.org/#{package}/latest\").body)[\"dependencies\"]\n  end\n\n  def parse_dependencies_for_package(dependencies)\n    case dependencies\n    when nil\n      []\n    else\n      dependencies.map { |e| e[0] }\n    end\n  end\n\n  def reject_empty(deps)\n    deps.reject { |c| c.empty? }\n  end\nend\n</code></pre>\n\n<p>I want to get dependencies for each dependency until its end, Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 886, "user_id": 5477126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6VrvP.jpg?s=128&g=1", "display_name": "rak007", "link": "https://stackoverflow.com/users/5477126/rak007"}, "edited": false, "score": 0, "creation_date": 1523285625, "post_id": 49735705, "comment_id": 86485625, "body": "The message is pretty self explanatory ..."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 886, "user_id": 5477126, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/6VrvP.jpg?s=128&g=1", "display_name": "rak007", "link": "https://stackoverflow.com/users/5477126/rak007"}, "edited": false, "score": 1, "creation_date": 1523285670, "post_id": 49735705, "comment_id": 86485665, "body": "@rak007 he&#39;s literally taking a course to build your first ruby app"}], "answers": [{"tags": [], "owner": {"reputation": 4693, "user_id": 5501536, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/50b9ab14ab8699a3862c14ee48126abe?s=128&d=identicon&r=PG&f=1", "display_name": "chevybow", "link": "https://stackoverflow.com/users/5501536/chevybow"}, "is_accepted": false, "score": 0, "last_activity_date": 1523288218, "creation_date": 1523288218, "answer_id": 49736693, "question_id": 49735705, "link": "https://stackoverflow.com/questions/49735705/agile-web-development-rails-5-test-failures/49736693#49736693", "title": "Agile Web Development Rails 5 test failures", "body": "<p>The undefined errors mean just that: you are calling \"login_url\" but rails cannot find it anywhere. If you simply copy pasted code from the book you should go to the section where they create this helper file and see where they defined the login_url. </p>\n\n<p>The test failure, opposed to the error, is that it is expecting an h2 element to exist with the name \"Your Cart\" but it cannot find it. To debug this, you could either go through the code and make sure all the routing/rerouting is correct and that the views are correctly structured and there's no typos- or run the app and go through what the test is doing and see if the results you are seeing is what is expected. Then- we can go from there. </p>\n\n<p>As a rule of thumb, it is good to get into the habit of googling errors which can help give you an idea of where to troubleshoot the issues in your project. </p>\n"}], "owner": {"reputation": 1, "user_id": 9620110, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-3K-jKj00UQQ/AAAAAAAAAAI/AAAAAAAAGG4/hbE-GX-N3z0/photo.jpg?sz=128", "display_name": "Christopher L ", "link": "https://stackoverflow.com/users/9620110/christopher-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 77, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1523288218, "creation_date": 1523285112, "question_id": 49735705, "link": "https://stackoverflow.com/questions/49735705/agile-web-development-rails-5-test-failures", "title": "Agile Web Development Rails 5 test failures", "body": "<p>I just finished creating the Depot app from the Agile Web Development with Rails 5 textbook. For some reason, I am getting errors &amp; failures when I run 'rails test'. Can someone explain why this is happening? </p>\n\n<p>My Github repository is here: <a href=\"https://github.com/christopheragnus/Agile_Web_Development_with_Rails_5\" rel=\"nofollow noreferrer\">https://github.com/christopheragnus/Agile_Web_Development_with_Rails_5</a></p>\n\n<pre><code>Christophers-MacBook-Pro-3:depot Agnus$ rails test\nRunning via Spring preloader in process 45997\nRun options: --seed 52040\n\n# Running:\n\n..............F\n\nFailure:\nLineItemsControllerTest#test_should_create_line_item [/Users/Agnus/Dropbox/CA/AgileWebDevelopment/depot/test/controllers/line_items_controller_test.rb:25]:\n&lt;Your Cart&gt; expected but was\n&lt;&gt;..\nExpected 0 to be &gt;= 1.\n\n\nbin/rails test test/controllers/line_items_controller_test.rb:18\n\n..E\n\nError:\nOrderMailerTest#test_shipped:\nNameError: undefined local variable or method `login_url' for #&lt;OrderMailerTest:0x007ff7b60cc410&gt;\nDid you mean?  login_as\n    test/test_helper.rb:12:in `login_as'\n    test/test_helper.rb:20:in `setup'\n\n\nbin/rails test test/mailers/order_mailer_test.rb:12\n\nE\n\nError:\nOrderMailerTest#test_received:\nNameError: undefined local variable or method `login_url' for #&lt;OrderMailerTest:0x007ff7b6058880&gt;\nDid you mean?  login_as\n    test/test_helper.rb:12:in `login_as'\n    test/test_helper.rb:20:in `setup'\n\n\nbin/rails test test/mailers/order_mailer_test.rb:4\n\nE\n\nError:\nAdminControllerTest#test_should_get_index:\nNameError: undefined local variable or method `admin_index_url' for #&lt;AdminControllerTest:0x007ff7b4ca8880&gt;\n    test/controllers/admin_controller_test.rb:5:in `block in &lt;class:AdminControllerTest&gt;'\n\n\nbin/rails test test/controllers/admin_controller_test.rb:4\n\n...........................\n\nFinished in 5.740751s, 8.1871 runs/s, 14.4580 assertions/s.\n47 runs, 83 assertions, 1 failures, 3 errors, 0 skips\n</code></pre>\n"}, {"tags": ["ruby", "openssl"], "comments": [{"owner": {"reputation": 29648, "user_id": 51387, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9e339df8ac2b3b833c81ad0e3c0f46c5?s=128&d=identicon&r=PG", "display_name": "collimarco", "link": "https://stackoverflow.com/users/51387/collimarco"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1523285518, "post_id": 49735565, "comment_id": 86485537, "body": "@mudasobwa I would expect an OpenSSL method like <code>public_key.matches?(private_key)</code> but I can&#39;t find anything like that. So I have no idea how to check that they match"}], "answers": [{"tags": [], "owner": {"reputation": 29648, "user_id": 51387, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9e339df8ac2b3b833c81ad0e3c0f46c5?s=128&d=identicon&r=PG", "display_name": "collimarco", "link": "https://stackoverflow.com/users/51387/collimarco"}, "is_accepted": false, "score": 0, "last_activity_date": 1523287386, "creation_date": 1523287386, "answer_id": 49736447, "question_id": 49735565, "link": "https://stackoverflow.com/questions/49735565/how-to-check-if-a-public-key-matches-a-given-private-key/49736447#49736447", "title": "How to check if a public key matches a given private key?", "body": "<p>The solution I have found is to sign a message with the private key and then try to verify the message with the public key:</p>\n\n<pre><code>public_key.verify(OpenSSL::Digest::SHA256.new, private_key.sign(OpenSSL::Digest::SHA256.new, 'message'), 'message')\n</code></pre>\n"}], "owner": {"reputation": 29648, "user_id": 51387, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9e339df8ac2b3b833c81ad0e3c0f46c5?s=128&d=identicon&r=PG", "display_name": "collimarco", "link": "https://stackoverflow.com/users/51387/collimarco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 396, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1523287386, "creation_date": 1523284670, "question_id": 49735565, "link": "https://stackoverflow.com/questions/49735565/how-to-check-if-a-public-key-matches-a-given-private-key", "title": "How to check if a public key matches a given private key?", "body": "<p>I would like to use Ruby and its OpenSSL module to check whether a public key matches a given private key. Basically a user enters both a private key and a public key and I want to make sure that they match (they belong to the same key pair).</p>\n\n<p>How can I achieve that?</p>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1523284551, "post_id": 49735133, "comment_id": 86484808, "body": "Thanks, Tom. Works well."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1523283353, "creation_date": 1523283353, "answer_id": 49735133, "question_id": 49734986, "link": "https://stackoverflow.com/questions/49734986/capybara-rspec-matcher-assert-tbody-is-empty/49735133#49735133", "title": "Capybara Rspec Matcher assert tbody is empty", "body": "<p>You can verify the <code>tbody</code> is empty by verifying it has no children with</p>\n\n<pre><code>expect(find('tbody')).to have_no_css('*')\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user7454000"}, "is_accepted": false, "score": 1, "last_activity_date": 1523283667, "creation_date": 1523283667, "answer_id": 49735231, "question_id": 49734986, "link": "https://stackoverflow.com/questions/49734986/capybara-rspec-matcher-assert-tbody-is-empty/49735231#49735231", "title": "Capybara Rspec Matcher assert tbody is empty", "body": "<p>There is a has_no_content matcher in Capybara.</p>\n\n<pre><code>expect(find('tbody').has_no_content?).to be true\n</code></pre>\n\n<p>or</p>\n\n<pre><code>expect(find('tbody')).to have_no_content \n</code></pre>\n\n<p><a href=\"https://devhints.io/capybara\" rel=\"nofollow noreferrer\">https://devhints.io/capybara</a></p>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 355, "favorite_count": 0, "accepted_answer_id": 49735133, "answer_count": 2, "score": 0, "last_activity_date": 1523283667, "creation_date": 1523282908, "last_edit_date": 1523283326, "question_id": 49734986, "link": "https://stackoverflow.com/questions/49734986/capybara-rspec-matcher-assert-tbody-is-empty", "title": "Capybara Rspec Matcher assert tbody is empty", "body": "<p>I have a webpage where you have a table element containing data. You can search / filter this data.  When a search is invalid i.e no record matches your criteria, the table renders blank.</p>\n\n<p>HTML will look like this:</p>\n\n<pre><code>&lt;tbody&gt;&lt;/tbody&gt;\n</code></pre>\n\n<p>I am writing a test to assert that the tbody element is indeed empty or blank.  I was using <code>expect(find('tbody')).to have_text ''</code></p>\n\n<p>I'm not too happy with this as it also passes when there is text with any whitespace.</p>\n\n<p>Is there a better way to assert this?</p>\n\n<p>EDIT:</p>\n\n<p>I have run this successfully > </p>\n\n<pre><code>expect(find('table &gt; tbody', visible: false)).not_to have_css('td')\n</code></pre>\n\n<p>I am still open to any better solutions</p>\n"}, {"tags": ["ruby", "rubygems", ".net-core", "wrapper", "multiplatform"], "comments": [{"owner": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 0, "creation_date": 1523282588, "post_id": 49734820, "comment_id": 86483545, "body": "According to our <a href=\"https://stackoverflow.com/help/on-topic\">on-topic</a> guidance, &quot;<b>Some questions are still off-topic, even if they fit into one of the categories listed above:</b>...Questions asking us to <i>recommend or find a book, tool, software library, tutorial or other off-site resource</i> are off-topic...&quot;"}, {"owner": {"reputation": 6702, "user_id": 19854, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/47d372491f36765c73a58930b14efbfc?s=128&d=identicon&r=PG", "display_name": "Phobis", "link": "https://stackoverflow.com/users/19854/phobis"}, "reply_to_user": {"reputation": 6004, "user_id": 6471538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rX1ss.png?s=128&g=1", "display_name": "Robert Columbia", "link": "https://stackoverflow.com/users/6471538/robert-columbia"}, "edited": false, "score": 0, "creation_date": 1523282757, "post_id": 49734820, "comment_id": 86483645, "body": "@RobertColumbia -  I removed the word &quot;tool&quot; from the title. I don&#39;t believe this is off-topic at all"}, {"owner": {"reputation": 759, "user_id": 4352003, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I0GKg.jpg?s=128&g=1", "display_name": "Yury Matusevich", "link": "https://stackoverflow.com/users/4352003/yury-matusevich"}, "edited": false, "score": 0, "creation_date": 1523285418, "post_id": 49734820, "comment_id": 86485466, "body": "Maybe it would help. Ruby <a href=\"https://github.com/ffi/ffi\" rel=\"nofollow noreferrer\">github.com/ffi/ffi</a>  gem allows to include C libraries."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1523285544, "post_id": 49734820, "comment_id": 86485557, "body": "Well I would have suggested <code>IronRuby</code> but Microsoft did a great job of killing that project. Chances are you would need a com wrapper for you library and then use <code>Fiddle</code> (a standard lib) or <code>ffi</code> as mentioned"}, {"owner": {"reputation": 6702, "user_id": 19854, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/47d372491f36765c73a58930b14efbfc?s=128&d=identicon&r=PG", "display_name": "Phobis", "link": "https://stackoverflow.com/users/19854/phobis"}, "edited": false, "score": 0, "creation_date": 1523541698, "post_id": 49734820, "comment_id": 86611753, "body": "Thank you for the suggestions. It seems like ffi would help, I&#39;m just trying to connect all the dots so that someone knows the exact process to do this - including me ;)"}, {"owner": {"reputation": 6702, "user_id": 19854, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/47d372491f36765c73a58930b14efbfc?s=128&d=identicon&r=PG", "display_name": "Phobis", "link": "https://stackoverflow.com/users/19854/phobis"}, "edited": false, "score": 0, "creation_date": 1524168415, "post_id": 49734820, "comment_id": 86874726, "body": "Also posted here: <a href=\"https://forums.dotnetfoundation.org/t/how-would-one-wrap-a-net-core-lib-for-ruby/3027\" rel=\"nofollow noreferrer\">forums.dotnetfoundation.org/t/&hellip;</a>"}], "owner": {"reputation": 6702, "user_id": 19854, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/47d372491f36765c73a58930b14efbfc?s=128&d=identicon&r=PG", "display_name": "Phobis", "link": "https://stackoverflow.com/users/19854/phobis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 192, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1523546798, "creation_date": 1523282444, "last_edit_date": 1523546798, "question_id": 49734820, "link": "https://stackoverflow.com/questions/49734820/is-there-a-technique-to-wrap-a-net-core-library-as-a-ruby-gem", "title": "Is there a technique to wrap a .NET Core library as a Ruby Gem?", "body": "<p>We've built some .NET Standard / .NET Core libraries that are able to target multiple platforms (linux, macOS, windows). We have a need to wrap the final assembly in Ruby, so that we may expose this functionality to the Ruby community as well. </p>\n\n<p>I'm asking if there are any known tools, patterns, etc. used for this scenario? </p>\n\n<p>We would like to maintain the bulk of our library in the .NET code, but be able to ship this in a wrapper, of some kind, for Ruby too. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "oauth-2.0", "google-oauth", "getresponse"], "answers": [{"tags": [], "owner": {"reputation": 58, "user_id": 6693666, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b53d9b7b5537cf22b96cd76e20fa373d?s=128&d=identicon&r=PG", "display_name": "Sumit Gautam", "link": "https://stackoverflow.com/users/6693666/sumit-gautam"}, "is_accepted": false, "score": 0, "last_activity_date": 1548385656, "creation_date": 1548385656, "answer_id": 54358430, "question_id": 49734461, "link": "https://stackoverflow.com/questions/49734461/signet-oauth2-basic-auth-not-working-with-get-response-api/54358430#54358430", "title": "Signet Oauth2 Basic Auth not working with Get Response api", "body": "<p>Ran into similar issues. I following steps below and worked for me. </p>\n\n<p>Step.1 Load your credentials obtained from google developers console.</p>\n\n<pre><code>  client_secrets = Google::APIClient::ClientSecrets.load(\"#{Rails.root}/zenledger_ga_secrets.json\")\n  auth_client = client_secrets.to_authorization\n\n  auth_client.update!(\n    :scope =&gt; 'email profile https://www.googleapis.com/auth/analytics.readonly',\n    :grant_type =&gt; \"authoriation_code\",\n    :response_type =&gt; 'code',\n    :redirect_uri =&gt; 'http://localhost:3001/admin/oauth2callback',\n    :additional_parameters =&gt; {\n      \"access_type\" =&gt; \"offline\",         # offline access\n      \"include_granted_scopes\" =&gt; \"true\",  # incremental auth\n    }\n  )\n</code></pre>\n\n<p>Step 2. Load up your Signet client to fetch the access token necessary for accessing required APIs.</p>\n\n<pre><code>    @client = Signet::OAuth2::Client.new(\n    :authorization_uri =&gt; 'https://accounts.google.com/o/oauth2/auth',\n    :token_credential_uri =&gt;  'https://oauth2.googleapis.com/token',\n    :client_id =&gt; ''xxxxxxxxxx',\n    :client_secret =&gt; 'xxxxxxxxxx',\n    :scope =&gt; 'email profile',\n    :redirect_uri =&gt; 'http://localhost/admin/oauth2callback'\n  )\n  @client.code = auth_code\n  @client.fetch_access_token!\n</code></pre>\n\n<blockquote>\n  <p>Note auth_code is sent by Google in the redirect URL. You can obtain them as param in your oauth2callback url in your application.</p>\n</blockquote>\n"}], "owner": {"reputation": 518, "user_id": 1895804, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/2b21b6e741f33a30cc2bf4acd65e622e?s=128&d=identicon&r=PG", "display_name": "Jason Cheladyn", "link": "https://stackoverflow.com/users/1895804/jason-cheladyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 489, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1548385656, "creation_date": 1523281388, "last_edit_date": 1523282068, "question_id": 49734461, "link": "https://stackoverflow.com/questions/49734461/signet-oauth2-basic-auth-not-working-with-get-response-api", "title": "Signet Oauth2 Basic Auth not working with Get Response api", "body": "<p>I am trying to use Signet::Oauth2::Client to get an access token from getresponse.com</p>\n\n<pre><code>client = Signet::OAuth2::Client.new(\n  client_id: GET_RESPONSE_CLIENT_ID,\n  client_secret: GET_RESPONSE_CLIENT_SECRET,\n  token_credential_uri: 'https://api.getresponse.com/v3/token',\n  redirect_uri: my_callback_uri,\n  grant_type: 'authorization_code',\n  code: the_code_i_got_from_get_response\n)\nresponse = client.fetch_access_token!\n</code></pre>\n\n<p>However Get Response always returns this:</p>\n\n<pre><code>{\"error\"=&gt;\"invalid_client\", \"error_description\"=&gt;\"Client credentials were not found in the headers\"}\n</code></pre>\n\n<p>I have done this request with curl easily. It returns successfully with the tokens. </p>\n\n<pre><code>curl -v -u client_id:client_secret https://api.getresponse.com/v3/token -d \"grant_type=authorization_code&amp;code=abc123thisisthecode&amp;redirect_uri=https://myserver.com/callback\"\n</code></pre>\n\n<p>I have tried a million things and read the client source but I didn't see want I am doing wrong. I will continue to read the docs but in the meantime I thought I would ask the pros here at stackoverflow. Does anyone know the answer? Here is the api docs <a href=\"https://apidocs.getresponse.com/v3/oauth2\" rel=\"nofollow noreferrer\">https://apidocs.getresponse.com/v3/oauth2</a></p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 4348, "user_id": 3435610, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/IBOFX.jpg?s=128&g=1", "display_name": "Sara Tibbetts", "link": "https://stackoverflow.com/users/3435610/sara-tibbetts"}, "edited": false, "score": 6, "creation_date": 1523281442, "post_id": 49734279, "comment_id": 86482755, "body": "Does <code>bundle exec rspec</code> have a different result?"}, {"owner": {"reputation": 1323, "user_id": 382008, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/09db29608de5326685e20cb2e864351a?s=128&d=identicon&r=PG", "display_name": "raskhadafi", "link": "https://stackoverflow.com/users/382008/raskhadafi"}, "edited": false, "score": 0, "creation_date": 1560342283, "post_id": 49734279, "comment_id": 99703782, "body": "Any update on this bug? Cause I got the same issue"}], "answers": [{"tags": [], "owner": {"reputation": 646, "user_id": 8919469, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f51a8277c113b7415c6b2bbd82be9615?s=128&d=identicon&r=PG&f=1", "display_name": "johan", "link": "https://stackoverflow.com/users/8919469/johan"}, "is_accepted": false, "score": 0, "last_activity_date": 1561740872, "creation_date": 1561740872, "answer_id": 56810690, "question_id": 49734279, "link": "https://stackoverflow.com/questions/49734279/require-cannot-load-such-file-rspec-core-formatters-base-formatter-loader/56810690#56810690", "title": "`require&#39;: cannot load such file -- rspec/core/formatters/base_formatter (LoadError)", "body": "<p>I had a similar issue, so:</p>\n\n<ul>\n<li>I removed my <code>Gemfile.lock</code></li>\n<li>re run <code>bundle install</code></li>\n</ul>\n"}], "owner": {"reputation": 89, "user_id": 7690524, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6120005787b1c35c8b86ec9e0874f45?s=128&d=identicon&r=PG&f=1", "display_name": "Makoto Taguchi", "link": "https://stackoverflow.com/users/7690524/makoto-taguchi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1493, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1561740872, "creation_date": 1523280796, "question_id": 49734279, "link": "https://stackoverflow.com/questions/49734279/require-cannot-load-such-file-rspec-core-formatters-base-formatter-loader", "title": "`require&#39;: cannot load such file -- rspec/core/formatters/base_formatter (LoadError)", "body": "<p>I am running rspec and encountered the following error. I already looked for the similar posts but couldn't find the one that is relevant in this case.</p>\n\n<p><code>'require': cannot load such file -- rspec/core/formatters/base_formatter (LoadError)</code></p>\n\n<p>Ruby version: 2.4.3</p>\n\n<p>Here is my Gemfile:</p>\n\n<pre><code>group :test do\n  gem 'database_cleaner', '~&gt; 1.5'\n  gem 'factory_girl'\n  gem 'rack-test', require: 'rack/test'\n  gem 'rspec', '~&gt; 3.5'\n  gem 'simplecov'\n  gem 'webmock'\n  gem 'timecop'\nend\n</code></pre>\n\n<p>Here is the actual command:</p>\n\n<pre><code>/Users/&lt;user_name&gt;/.rbenv/versions/2.4.3/bin/ruby -e $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) /Users/&lt;user_name&gt;/.rbenv/versions/2.4.3/bin/rspec _3.7.1_ /Users/&lt;user_name&gt;/Desktop/github/test_rspec.rb --require teamcity/spec/runner/formatter/teamcity/formatter --format Spec::Runner::Formatter::TeamcityFormatter\n</code></pre>\n\n<p>test_rspec.rb:</p>\n\n<pre><code>require 'spec_helper'\n\ndescribe 'tests' do\n  include_context 'scenario'\n\n  # sample spec\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1523279038, "post_id": 49733623, "comment_id": 86481144, "body": "Most probably you&#39;d want to add which database you&#39;re using."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1523284098, "post_id": 49733623, "comment_id": 86484506, "body": "How do your tables look like? Please show their structure and some example data."}, {"owner": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "edited": false, "score": 0, "creation_date": 1523285452, "post_id": 49733623, "comment_id": 86485489, "body": "added more details"}], "answers": [{"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1523283553, "last_edit_date": 1523283553, "creation_date": 1523280956, "answer_id": 49734331, "question_id": 49733623, "link": "https://stackoverflow.com/questions/49733623/search-if-vehicle-is-available-between-dates/49734331#49734331", "title": "Search if vehicle is available between dates", "body": "<p>I will be working with the following logic to determine a time overlap:</p>\n\n<p><strong>(StartA &lt;= EndB) and (EndA >= StartB)</strong></p>\n\n<p>If the above is <code>true</code> the periods overlap. You can check this out in the Stack Overflow question: <a href=\"https://stackoverflow.com/a/325964/3982562\">Determine Whether Two Date Ranges Overlap</a></p>\n\n<p>So with that out of the way let's create two scopes on Reservation. One to get overlapping reservations that overlap with one point in time, and one to get overlapping reservations that overlap with a time window.</p>\n\n<pre><code>class Reservation &lt; ApplicationRecord\n\n  # code ...\n\n  # assuming Reservation has start_time and end_time attributes\n  # and you validate that start_time is always before end_time\n\n  # time param can also be a date or datetime\n  def self.overlap(time)\n    # Reservation start_time is less than or equal to the given time\n    # and reservation end_time is greater than or equal to the given \n    # time.\n    where(arel_table[:start_time].lteq(time))\n      .where(arel_table[:end_time].gteq(time))\n  end\n\n  def self.overlap_window(start_time, end_time)\n    # Reservation start_time is less than or equal to the given\n    # end_time and reservation end_time is greater than or equal \n    # to the given start_time.\n    where(arel_table[:start_time].lteq(end_time))\n      .where(arel_table[:end_time].gteq(start_time))\n  end\n\n  # code ...\n\nend\n</code></pre>\n\n<p>Now you can fetch the vehicles quite easy by checking <strong>which vehicles are not occupied</strong> in for example a certain time window.</p>\n\n<pre><code>Vehicle.where.not(id: Reservation.select(:vehicle_id).overlap_window(Time.now, 4.hours.from_now))\n</code></pre>\n\n<p><strong>Note:</strong> Start time must always be before the end time (for both the reservation and the time window) for this to work as explained (mainly in the comments) in the date overlap question linked at the start.</p>\n"}], "owner": {"reputation": 129, "user_id": 5563321, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/16e6942425df49c118ed9ca17248434f?s=128&d=identicon&r=PG&f=1", "display_name": "M Ahmed", "link": "https://stackoverflow.com/users/5563321/m-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1523285421, "creation_date": 1523278902, "last_edit_date": 1523285421, "question_id": 49733623, "link": "https://stackoverflow.com/questions/49733623/search-if-vehicle-is-available-between-dates", "title": "Search if vehicle is available between dates", "body": "<p>I've created a application where a user can reserve a vehicle (minibus) I've got the application working where a user can reserve a vehicle but the vehicle cannot be double booked. I've got a simple search working which allows the user to search for make or model. I'm looking to expand this search so a user can search for all vehicles which are available for a date the user wants to book. I'm not too sure how to approach this can someone please help!. </p>\n\n<p>I've got a Vehicle table, User table and a Reservation table. </p>\n\n<p>my schema look like (I've only included the tables concerned): </p>\n\n<pre><code>create_table \"reservations\", force: :cascade do |t|\n  t.date \"startDate\"\n  t.date \"endDate\"\n  t.integer \"noOfDays\"\n  t.integer \"costs\"\n  t.integer \"vehicle_id\"\n  t.integer \"user_id\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.index [\"user_id\"], name: \"index_reservations_on_user_id\"\n  t.index [\"vehicle_id\"], name: \"index_reservations_on_vehicle_id\"\nend\ncreate_table \"users\", force: :cascade do |t|\n  t.string \"address\"\n  t.string \"city\"\n  t.date \"dateofbirth\"\n  t.string \"email\"\n  t.string \"fname\"\n  t.string \"postcode\"\n  t.string \"sname\"\n  t.string \"user_type\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.string \"password_digest\"\n  t.string \"contact_no\"\nend\ncreate_table \"vehicles\", force: :cascade do |t|\n  t.string \"description\"\n  t.integer \"door\"\n  t.string \"fuel\"\n  t.string \"img\"\n  t.string \"make\"\n  t.string \"model\"\n  t.date \"motEnd\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.date \"motDue\"\n  t.date \"motStart\"\n  t.integer \"price\"\n  t.string \"reg\"\n  t.integer \"seats\"\n  t.string \"transmission\"\n  t.date \"year\"\n  t.decimal \"engine\"\nend\n</code></pre>\n\n<p>I've already got the overlap booking working heres a like to the solution I used: <a href=\"https://stackoverflow.com/questions/49204228/avoid-double-bookings-for-a-minibus-reservation-system\">Avoid double bookings for a minibus reservation system</a></p>\n\n<p>I'm trying to expand my search so the user can search between two dates on the index page for all available vehicles during that time. I just don't know how I'd get this to work so the system shows available vehicles for that date.</p>\n\n<p>My current simple search: </p>\n\n<p>Vehicles controller:</p>\n\n<pre><code>def vehicle_search\n    vehicles = Vehicle.fuzzy_search(params[:search_string])\n    @vehicles = Kaminari.paginate_array(vehicles.order :make).page(params[:page]).per(3)\n    if @vehicles.empty?\n        flash.now[:alert] = \"No records found - displaying all records ...\"\n      @vehicles = Vehicle.order(:make).page(params[:page]).per(3)\n    end\n\n    render :action =&gt; \"index\"\n</code></pre>\n\n<p>end</p>\n\n<p>vehicle.rb</p>\n\n<pre><code>def self.fuzzy_search(search_string)\n    search_string ||= \"\"  \n    make = search_string\n    model = search_string\n    price = search_string\n    fuel = search_string\n    transmission = search_string\n    self.where(\"make LIKE ? OR model LIKE ? OR price LIKE ? OR fuel LIKE ? OR transmission LIKE ?\", make, model, price, fuel, transmission)\nend\n</code></pre>\n\n<p>Search partials </p>\n\n<pre><code>&lt;%= form_tag my_path, :method =&gt; 'post', :multipart =&gt; true do %&gt;\n  &lt;!--vehicle details--&gt;\n  &lt;%= text_field_tag :search_string, \"\", class: 'form-control custom2'  %&gt;\n  &lt;%= submit_tag 'Search', class: \"btn btn-default\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>vehicles/index.html.erb</p>\n\n<pre><code>&lt;a&gt;Make, Model, Fuel Type, Transmission: &lt;/a&gt;\n&lt;%= render(:partial=&gt;'/vehicle_search',:locals=&gt; { :my_path =&gt; \"/vehicles/vehicle_search\" })%&gt;\n</code></pre>\n"}, {"tags": ["ruby", "algorithm"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1523279194, "post_id": 49733398, "comment_id": 86481230, "body": "Stack Overflow does not provide the service of writing code for you for free. Show us what have you tried and what is the problem you faced."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1523284141, "post_id": 49733398, "comment_id": 86484540, "body": "@NielsKristian : I don&#39;t see any question in your posting."}, {"owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "edited": false, "score": 0, "creation_date": 1523345228, "post_id": 49733398, "comment_id": 86509886, "body": "Haha, nice. Well I tried to create a loop over the <code>records</code> array to detect the &quot;valid&quot; records by <code>id</code>, however the I failed to produce some logic that would actually trim the records to the result I needed. Your right, it&#39;s not really a bug that can be &quot;solved&quot;, however it is a very specific piece of code/algorithm that will be needed to produce the result and I have a very hard time wrapping my head around a good solution for this. :-) I can delete the question if no one want&#39;s to give it a spin"}], "answers": [{"comments": [{"owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "edited": false, "score": 0, "creation_date": 1523615387, "post_id": 49814902, "comment_id": 86643889, "body": "Thank you so much!"}], "tags": [], "owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "is_accepted": true, "score": 0, "last_activity_date": 1523615375, "creation_date": 1523615375, "answer_id": 49814902, "question_id": 49733398, "link": "https://stackoverflow.com/questions/49733398/algorith-to-remove-duplicate-records-and-records-with-a-repetitive-pattern/49814902#49814902", "title": "Algorith to remove duplicate records and records with a repetitive pattern", "body": "<p>I have no problem dear sir of helping you with your challenge, here you go:</p>\n\n<pre><code>records_to_delete = []\n\n# Cleanup duplicates\nrecords.each_with_index do |record, i|\n  if i != 0 &amp;&amp; record.price == records[i - 1].price\n    records_to_delete &lt;&lt; record.id\n  end\nend\n\nrecords = records.delete_if{|record| records_to_delete.include?(record.id)}\n\n# Remove repetitions\nrecords_to_delete = []\n\nrecords.each_with_index do |record, i|\n  if record.price == records[i + 2]&amp;.price &amp;&amp; records[i + 1]&amp;.price == records[i + 3]&amp;.price\n    records_to_delete &lt;&lt; records[i+2].id\n    records_to_delete &lt;&lt; records[i+3].id\n  end\nend\n\nrecords = records.delete_if{|record| records_to_delete.uniq.include?(record.id)}\n</code></pre>\n"}], "owner": {"reputation": 8232, "user_id": 1002814, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/935d2564cfa8572c12763684e072063d?s=128&d=identicon&r=PG", "display_name": "Niels Kristian", "link": "https://stackoverflow.com/users/1002814/niels-kristian"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 49814902, "answer_count": 1, "score": -1, "last_activity_date": 1523615435, "creation_date": 1523278209, "last_edit_date": 1523615435, "question_id": 49733398, "link": "https://stackoverflow.com/questions/49733398/algorith-to-remove-duplicate-records-and-records-with-a-repetitive-pattern", "title": "Algorith to remove duplicate records and records with a repetitive pattern", "body": "<p>I have some records in a database tracking the price development on some items. These records often contains duplicates and repetitive sequences of price changes. I need to clean those up. Consider the following:</p>\n\n<pre><code>Record = Struct.new(:id, :created_at, :price)\nrecords = [\n  Record.new(1, Date.parse('2017-01-01'), 150_000),\n  Record.new(2, Date.parse('2017-01-02'), 150_000),\n  Record.new(3, Date.parse('2017-01-03'), 130_000),\n  Record.new(4, Date.parse('2017-01-04'), 140_000),\n  Record.new(5, Date.parse('2017-01-05'), 140_000),\n  Record.new(6, Date.parse('2017-01-06'), 137_000),\n  Record.new(7, Date.parse('2017-01-07'), 140_000),\n  Record.new(8, Date.parse('2017-01-08'), 140_000),\n  Record.new(9, Date.parse('2017-01-09'), 137_000),\n  Record.new(10, Date.parse('2017-01-10'), 140_000),\n  Record.new(11, Date.parse('2017-01-11'), 137_000),\n  Record.new(12, Date.parse('2017-01-12'), 140_000),\n  Record.new(13, Date.parse('2017-01-13'), 132_000),\n  Record.new(14, Date.parse('2017-01-14'), 130_000),\n  Record.new(14, Date.parse('2017-01-15'), 132_000)\n]\n</code></pre>\n\n<p>The policy should in plain words should be: </p>\n\n<ol>\n<li>Remove any duplicates of exactly the same price immediately following each other.</li>\n<li>Remove any records of a sequence of records with the same two prices jumping up and down for 2 times or more (e.g. [120, 110, 120, 110] but not [120, 110, 120]), so that only the initial price change is preserved.</li>\n</ol>\n\n<p>In the above example the output that I would expect should be:</p>\n\n<pre><code>[\n  Record#&lt;id: 1, created_at: Date#&lt;'2017-01-01'&gt;, price: 150_000&gt;,\n  Record#&lt;id: 3, created_at: Date#&lt;'2017-01-03'&gt;, price: 130_000&gt;,\n  Record#&lt;id: 4, created_at: Date#&lt;'2017-01-04'&gt;, price: 140_000&gt;,\n  Record#&lt;id: 6, created_at: Date#&lt;'2017-01-06'&gt;, price: 137_000&gt;,\n  Record#&lt;id: 13, created_at: Date#&lt;'2017-01-13'&gt;, price: 132_000&gt;,\n  Record#&lt;id: 14, created_at: Date#&lt;'2017-01-14'&gt;, price: 130_000&gt;,\n  Record#&lt;id: 14, created_at: Date#&lt;'2017-01-14'&gt;, price: 132_000&gt;\n]\n</code></pre>\n\n<p><strong>Note:</strong> This is the most complicated example I can think of for the time being, if I find more, I'll update the question.</p>\n"}, {"tags": ["ruby", "google-auth-library-ruby"], "comments": [{"owner": {"reputation": 1634, "user_id": 882322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49a7113c78c52353e443145aebcaffc9?s=128&d=identicon&r=PG", "display_name": "mpz", "link": "https://stackoverflow.com/users/882322/mpz"}, "edited": false, "score": 0, "creation_date": 1523276795, "post_id": 49732925, "comment_id": 86479511, "body": "Can anyone add &quot;google-auth-library-ruby&quot; tag? In officall google rep - <a href=\"https://github.com/google/google-auth-library-ruby\" rel=\"nofollow noreferrer\">github.com/google/google-auth-library-ruby</a>  we have link for such tag in Support section (ask questions link). But it is not in SO actually"}], "answers": [{"tags": [], "owner": {"reputation": 1634, "user_id": 882322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49a7113c78c52353e443145aebcaffc9?s=128&d=identicon&r=PG", "display_name": "mpz", "link": "https://stackoverflow.com/users/882322/mpz"}, "is_accepted": false, "score": 1, "last_activity_date": 1524046821, "creation_date": 1524046821, "answer_id": 49897224, "question_id": 49732925, "link": "https://stackoverflow.com/questions/49732925/get-refresh-token-with-lib-google-drive-ruby/49897224#49897224", "title": "Get Refresh Token with lib google-drive-ruby", "body": "<p>Need add additional_parameters:</p>\n\n<pre><code>require \"googleauth\"\n\ncredentials = Google::Auth::UserRefreshCredentials.new(\n  client_id: \"YOUR CLIENT ID\",\n  client_secret: \"YOUR CLIENT SECRET\",\n  scope: [\n    \"https://www.googleapis.com/auth/drive\",\n    \"https://spreadsheets.google.com/feeds/\",\n  ],\n  redirect_uri: \"http://example.com/redirect\",\n  :additional_parameters =&gt; {\n         \"access_type\"=&gt;\"offline\",\n         \"include_granted_scopes\"=&gt;\"true\",\n         \"prompt\" =&gt; \"consent\"\n  }\n)\nauth_url = credentials.authorization_uri\n\ncredentials.code = authorization_code\ncredentials.fetch_access_token!\n</code></pre>\n\n<p>then get:</p>\n\n<pre><code>refresh_token = credentials.refresh_token \n</code></pre>\n\n<p>and then refresh_token can be stored in database and used later:</p>\n\n<pre><code>credentials.refresh_token = refresh_token\ncredentials.fetch_access_token!\nsession = GoogleDrive::Session.from_credentials(credentials)\n</code></pre>\n"}], "owner": {"reputation": 1634, "user_id": 882322, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/49a7113c78c52353e443145aebcaffc9?s=128&d=identicon&r=PG", "display_name": "mpz", "link": "https://stackoverflow.com/users/882322/mpz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1528379530, "creation_date": 1523276663, "last_edit_date": 1528379530, "question_id": 49732925, "link": "https://stackoverflow.com/questions/49732925/get-refresh-token-with-lib-google-drive-ruby", "title": "Get Refresh Token with lib google-drive-ruby", "body": "<p>From article: <a href=\"https://github.com/gimite/google-drive-ruby/blob/master/doc/authorization.md\" rel=\"nofollow noreferrer\">https://github.com/gimite/google-drive-ruby/blob/master/doc/authorization.md</a></p>\n\n<p>Code:</p>\n\n<pre><code>credentials = ... same as above ...\ncredentials.code = authorization_code\ncredentials.fetch_access_token!\n</code></pre>\n\n<p>Then</p>\n\n<p>If you want to restore a session afterwards, you can store credentials.refresh_token after credentials.fetch_access_token!</p>\n\n<p>But after credentials.fetch_access_token!\ncredentials.refresh_token is nil</p>\n\n<p>How i can get refresh_token?\nOr save credentials to database for next time?</p>\n"}]