[{"tags": ["ruby", "gem"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1422489351, "creation_date": 1422489351, "answer_id": 28204687, "question_id": 28204567, "link": "https://stackoverflow.com/questions/28204567/undo-ing-changes-to-gem-source/28204687#28204687", "title": "&#39;Undo-ing&#39; changes to Gem source", "body": "<p>Uninstall that gem with <code>gem uninstall &lt;gem_name&gt;</code> and then reinstall via <code>gem install &lt;gem_name&gt;</code> or <code>bundle install</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 1, "last_activity_date": 1422515227, "creation_date": 1422515227, "answer_id": 28208835, "question_id": 28204567, "link": "https://stackoverflow.com/questions/28204567/undo-ing-changes-to-gem-source/28208835#28208835", "title": "&#39;Undo-ing&#39; changes to Gem source", "body": "<p>The command</p>\n\n<pre><code>gem pristine foo\n</code></pre>\n\n<p>Does this for the gem of that name. You can also pass <code>--all</code> to rebuild all gems. This works by comparing what's in the .gem file (which is a tar archive in disguise) with the actual files. More details in the <a href=\"http://guides.rubygems.org/command-reference/#gem-pristine\" rel=\"nofollow\">documentation</a></p>\n"}], "owner": {"reputation": 73, "user_id": 1294026, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/fb7a8e251af3b5eda48608908b476333?s=128&d=identicon&r=PG", "display_name": "AndrewLngdn", "link": "https://stackoverflow.com/users/1294026/andrewlngdn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 1, "accepted_answer_id": 28208835, "answer_count": 2, "score": 1, "last_activity_date": 1422515227, "creation_date": 1422488608, "question_id": 28204567, "link": "https://stackoverflow.com/questions/28204567/undo-ing-changes-to-gem-source", "title": "&#39;Undo-ing&#39; changes to Gem source", "body": "<p>I was debugging a gem a while ago and accidentally left in some code that causes my project to hang when it makes use of that gem. How can I restore the clean source? Is the only option to uninstall and reinstall?</p>\n"}, {"tags": ["ruby", "puppet", "system-calls", "return-code"], "comments": [{"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1422522224, "post_id": 28204541, "comment_id": 44785653, "body": "This question is likely to be closed as opinion-based, since we can&#39;t really guess what&#39;s in the minds of a third party. However, I&#39;ve tried to give you a reasonable interpretation, but I&#39;d be sure to get clarification from the source before investing a lot of time into building the wrong thing."}], "answers": [{"comments": [{"owner": {"reputation": 373, "user_id": 3664100, "user_type": "registered", "profile_image": "https://graph.facebook.com/525584602/picture?type=large", "display_name": "Artokun", "link": "https://stackoverflow.com/users/3664100/artokun"}, "edited": false, "score": 0, "creation_date": 1422577791, "post_id": 28204817, "comment_id": 44817656, "body": "Thank you Tom, I tried to upvote you but I need more reputation. I&#39;ll swing back around cause your answer does give me material that I need to understand system calls."}], "tags": [], "owner": {"reputation": 9917, "user_id": 1586221, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/96ab4c67eb62b315a8e7584f7dfd547a?s=128&d=identicon&r=PG", "display_name": "tompave", "link": "https://stackoverflow.com/users/1586221/tompave"}, "is_accepted": false, "score": 0, "last_activity_date": 1422489961, "creation_date": 1422489961, "answer_id": 28204817, "question_id": 28204541, "link": "https://stackoverflow.com/questions/28204541/using-ruby-to-execute-arbitrary-system-calls/28204817#28204817", "title": "Using Ruby to execute arbitrary system calls", "body": "<p>Luckily for you, Ruby makes it very easy to interact with the underlying operative system.</p>\n\n<p>You can start by reading the documentation for these methods:  </p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-60\" rel=\"nofollow\">Kernel#`</a></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-system\" rel=\"nofollow\">Kernel#system</a></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-exec\" rel=\"nofollow\">Kernel#exec</a></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/Kernel.html#method-i-spawn\" rel=\"nofollow\">Kernel#spawn</a></li>\n<li><a href=\"http://ruby-doc.org/core-2.2.0/IO.html#method-c-popen\" rel=\"nofollow\">IO#popen</a></li>\n</ul>\n\n<p>Also, there is the <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/open3/rdoc/Open3.html\" rel=\"nofollow\">Open3</a> module from the stdlib.</p>\n"}, {"tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": true, "score": 0, "last_activity_date": 1422522077, "creation_date": 1422522077, "answer_id": 28210603, "question_id": 28204541, "link": "https://stackoverflow.com/questions/28204541/using-ruby-to-execute-arbitrary-system-calls/28210603#28210603", "title": "Using Ruby to execute arbitrary system calls", "body": "<h2>Get Clarification from the Source</h2>\n\n<p>The assignment is poorly worded, and misuses a number of terms. In addition, we can only guess what they really expect; the appropriate thing to do would be to ask the company directly for clarification.</p>\n\n<h2>Re-Implement Open3</h2>\n\n<p>With that said, what they <em>probably</em> want is a way to process any given command and its arguments as a decorated method, akin to the way <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/open3/rdoc/Open3.html#method-c-capture3\" rel=\"nofollow\">Open3#capture3</a> from the standard library works. That means the code you write should take the command and any arguments as parameters.</p>\n\n<p>For example, using <a href=\"http://ruby-doc.org/stdlib-2.2.0/libdoc/open3/rdoc/Open3.html#method-c-capture3\" rel=\"nofollow\">Open3#capture3</a> from the standard library:</p>\n\n<pre><code>require 'open3'\n\ndef command_wrapper cmd, *args\n  stdout_str, stderr_str, status = Open3.capture3 \"#{cmd} #{args.join ' '}\"\nend\n\ncommand_wrapper \"/bin/echo\", \"-n\", \"foo\", \"bar\", \"baz\"\n#=&gt; [\"foo bar baz\", \"\", #&lt;Process::Status: pid 31661 exit 0&gt;]\n</code></pre>\n\n<p>I sincerely doubt that it's <em>useful</em> to re-implement this library, but that certainly seems like what they're asking you to do. Shrug.</p>\n\n<p>You're also supposed to write unit tests for the re-implementation, so you will have to swot something up with a built-in framework like Test::Unit or MiniTest, or an external testing framework like RSpec, or Wrong. See the <a href=\"https://www.ruby-toolbox.com/categories/testing_frameworks\" rel=\"nofollow\">Ruby Toolbox</a> for a more comprehensive list of available unit testing frameworks.</p>\n"}], "owner": {"reputation": 373, "user_id": 3664100, "user_type": "registered", "profile_image": "https://graph.facebook.com/525584602/picture?type=large", "display_name": "Artokun", "link": "https://stackoverflow.com/users/3664100/artokun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 28210603, "answer_count": 2, "score": 0, "last_activity_date": 1422522077, "creation_date": 1422488462, "last_edit_date": 1422488625, "question_id": 28204541, "link": "https://stackoverflow.com/questions/28204541/using-ruby-to-execute-arbitrary-system-calls", "title": "Using Ruby to execute arbitrary system calls", "body": "<p>This problem is to get into an internship within a devops department:</p>\n\n<blockquote>\n  <p>\"Write a ruby library that executes arbitrary system calls (eg: \u201cdmesg\", \"ping -c 1 www.google.com\u201d) and provides separated output streams of stderr and stdout as well are providing the final return code of the process.  Show your work with unit tests.\u201d</p>\n</blockquote>\n\n<p>Am I supposed to use already established system calls and replicate them in Ruby code? That seems silly to me. Am I supposed to come up with my own arbitrary calls and write a library complete with errors and status calls?</p>\n\n<p>I am not looking for someone to write this for me. I feel that the first step to solving this problem is understanding it.</p>\n"}, {"tags": ["ruby", "arrays", "hash"], "answers": [{"comments": [{"owner": {"reputation": 10736, "user_id": 2498956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9eb217f1dbc6265004df4c2d4fb2f3e9?s=128&d=identicon&r=PG", "display_name": "August", "link": "https://stackoverflow.com/users/2498956/august"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422559318, "post_id": 28204171, "comment_id": 44808705, "body": "@CarySwoveland Thanks, I overlooked that. I also added an alternate solution if it&#39;s important to preserve the array."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422559557, "post_id": 28204171, "comment_id": 44808833, "body": "Still not testing! If you don&#39;t want to modify <code>array</code>, <code>keys = array.map(&amp;:to_sym); key = keys.last...</code>. (Ah, yes, it&#39;s <code>pop</code>. I had <code>shift</code> on the brain.)"}], "tags": [], "owner": {"reputation": 10736, "user_id": 2498956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9eb217f1dbc6265004df4c2d4fb2f3e9?s=128&d=identicon&r=PG", "display_name": "August", "link": "https://stackoverflow.com/users/2498956/august"}, "is_accepted": true, "score": 9, "last_activity_date": 1422560031, "last_edit_date": 1422560031, "creation_date": 1422486556, "answer_id": 28204171, "question_id": 28204080, "link": "https://stackoverflow.com/questions/28204080/ruby-set-value-of-nested-hash-from-array-of-keys/28204171#28204171", "title": "Ruby - Set Value of nested hash from array of keys", "body": "<p>You can get the hash that contains the last key in the array (by removing the last element), then set the key's value:</p>\n\n<pre><code>array.map!(&amp;:to_sym) # make sure keys are symbols\n\nkey = array.pop\narray.inject(hash, :fetch)[key] = 40\n\nhash # =&gt; {:person=&gt;{:age=&gt;40, :name=&gt;\"tom\"}}\n</code></pre>\n\n<p>If you don't want to modify the array you can use <code>.last</code> and <code>[0...-1]</code>:</p>\n\n<pre><code>keys = array.map(&amp;:to_sym)\n\nkey = keys.last\nkeys[0...-1].inject(hash, :fetch)[key] = 40\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1422520393, "creation_date": 1422520393, "answer_id": 28210150, "question_id": 28204080, "link": "https://stackoverflow.com/questions/28204080/ruby-set-value-of-nested-hash-from-array-of-keys/28210150#28210150", "title": "Ruby - Set Value of nested hash from array of keys", "body": "<p>You could use recursion:</p>\n\n<pre><code>def set_hash_value(h, array, value)\n  curr_key = array.first.to_sym\n  case array.size\n  when 1 then h[curr_key] = value\n  else set_hash_value(h[curr_key], array[1..-1], value)\n  end\n  h\nend\n\nset_hash_value(hash, array, 40)\n  #=&gt; {:person=&gt;{:age=&gt;40, :name=&gt;\"tom\"}}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "is_accepted": false, "score": 0, "last_activity_date": 1619133836, "last_edit_date": 1619133836, "creation_date": 1619132773, "answer_id": 67221873, "question_id": 28204080, "link": "https://stackoverflow.com/questions/28204080/ruby-set-value-of-nested-hash-from-array-of-keys/67221873#67221873", "title": "Ruby - Set Value of nested hash from array of keys", "body": "<p>You can consider using the <a href=\"https://github.com/SINTEF-9012/Rodash#rodashset-example\" rel=\"nofollow noreferrer\">set</a> method from the <a href=\"https://github.com/SINTEF-9012/Rodash\" rel=\"nofollow noreferrer\">rodash</a> gem in order to set a deeply nested value into a hash.</p>\n<pre class=\"lang-rb prettyprint-override\"><code>require 'rodash'\n\nhash = { person: { age: 30, name: 'tom' } }\n\nkey = [:person, :age]\nvalue = 40\n\nRodash.set(hash, key, value)\n\nhash\n# =&gt; {:person=&gt;{:age=&gt;40, :name=&gt;&quot;tom&quot;}}\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 2796606, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AX98C.png?s=128&g=1", "display_name": "seanrclayton", "link": "https://stackoverflow.com/users/2796606/seanrclayton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2716, "favorite_count": 2, "accepted_answer_id": 28204171, "answer_count": 3, "score": 7, "last_activity_date": 1619133836, "creation_date": 1422486110, "last_edit_date": 1495540952, "question_id": 28204080, "link": "https://stackoverflow.com/questions/28204080/ruby-set-value-of-nested-hash-from-array-of-keys", "title": "Ruby - Set Value of nested hash from array of keys", "body": "<p>I learned from <a href=\"https://stackoverflow.com/questions/18251454/access-nested-hash-element-specified-by-an-array-of-keys\">Access nested hash element specified by an array of keys</a>)</p>\n\n<p>that if i have a array</p>\n\n<pre><code>array = ['person', 'age']\n</code></pre>\n\n<p>and I have a nested hash</p>\n\n<pre><code>hash = {:person =&gt; {:age =&gt; 30, :name =&gt; 'tom'}}\n</code></pre>\n\n<p>I can get the value of of age by using</p>\n\n<pre><code>array.inject(hash, :fetch)\n</code></pre>\n\n<p>But How would I then <strong>set</strong> the value of :age to 40 with the array of keys?</p>\n"}, {"tags": ["ruby", "singleton-methods"], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 5, "last_activity_date": 1422487435, "creation_date": 1422487435, "answer_id": 28204348, "question_id": 28203988, "link": "https://stackoverflow.com/questions/28203988/are-all-singleton-methods-public/28204348#28204348", "title": "Are all singleton methods public?", "body": "<p>Singleton methods do not necessarily need to be public. Private/protected singleton methods are useful in the same situations as regular private/protected methods - for example as a helper method that you do not intend to be called outside of the class.</p>\n\n<pre><code>class Foo\nend\n\nf = Foo.new\n\nclass &lt;&lt; f\n  def foo\n    helper\n    # other stuff\n  end\n\n  private\n  def helper\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4582, "user_id": 3587715, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8bb09ae2bd054b6a4d8bc7bf9b58a69?s=128&d=identicon&r=PG&f=1", "display_name": "hjing", "link": "https://stackoverflow.com/users/3587715/hjing"}, "is_accepted": false, "score": 1, "last_activity_date": 1422487440, "creation_date": 1422487440, "answer_id": 28204351, "question_id": 28203988, "link": "https://stackoverflow.com/questions/28203988/are-all-singleton-methods-public/28204351#28204351", "title": "Are all singleton methods public?", "body": "<p>You can make a singleton method private if you want:</p>\n\n<pre><code>class Foo\nend\n\nf = Foo.new\ndef f.bar\n  \"baz\"\nend\n\nf.singleton_class.send :private, :bar\nf.bar # =&gt; NoMethodError: private method `bar' called for #&lt;Foo:0x007f8674152a00&gt;\nf.send :bar # =&gt; \"baz\"\n</code></pre>\n\n<p>whether or not this is actually useful depends on what you're doing.</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1422493180, "post_id": 28205239, "comment_id": 44776316, "body": "BTW: in recent versions of Ruby, method definition expressions (<code>def</code>) evaluate to a <code>Symbol</code> corresponding to the name of the method being defined, so that you can do <code>private_class_method def self.bar; end</code> or <code>protected def foo; end</code> or something like that."}, {"owner": {"reputation": 9695, "user_id": 2581872, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JVj4n.png?s=128&g=1", "display_name": "hichris123", "link": "https://stackoverflow.com/users/2581872/hichris123"}, "edited": false, "score": 0, "creation_date": 1422493623, "post_id": 28205239, "comment_id": 44776437, "body": "This doesn&#39;t really seem to answer the question of &#39;Are all singleton methods public?&#39;"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 9695, "user_id": 2581872, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/JVj4n.png?s=128&g=1", "display_name": "hichris123", "link": "https://stackoverflow.com/users/2581872/hichris123"}, "edited": false, "score": 0, "creation_date": 1422850814, "post_id": 28205239, "comment_id": 44897628, "body": "@hichris123, do we need more than one singleton method that is not public to disprove the assertion that they are all public?"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1422499180, "last_edit_date": 1422499180, "creation_date": 1422492642, "answer_id": 28205239, "question_id": 28203988, "link": "https://stackoverflow.com/questions/28203988/are-all-singleton-methods-public/28205239#28205239", "title": "Are all singleton methods public?", "body": "<p>You can make a singleton method private if you want:</p>\n\n<pre><code>class Foo\n\n  def self.bar\n    # ...\n  end\n  private_class_method :bar\n\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1422887944, "last_edit_date": 1422887944, "creation_date": 1422861573, "answer_id": 28272788, "question_id": 28203988, "link": "https://stackoverflow.com/questions/28203988/are-all-singleton-methods-public/28272788#28272788", "title": "Are all singleton methods public?", "body": "<p>Could they be useful? Hmmm. For Ruby 2.2</p>\n\n<pre><code>ObjectSpace.each_object(Module).flat_map { |m|\n  m.singleton_class.private_methods(false) }.size\n  #=&gt; 900\n</code></pre>\n\n<p>Most are private methods of classes' singleton classes:</p>\n\n<pre><code>ObjectSpace.each_object(Class).flat_map { |c|\n  c.singleton_class.private_methods(false) }.size\n  #=&gt; 838\n</code></pre>\n\n<p>[Edit: The following is an edit of my original post, to present more useful information.)</p>\n\n<p>I am puzzled by one thing. Let:</p>\n\n<pre><code>a = ObjectSpace.each_object(Class).map { |c|\n      [c, c.singleton_class.private_methods(false)] }.to_h\n\nb = ObjectSpace.each_object(Class).map { |c|\n      [c, c.private_methods(false)] }.to_h\n\ndef diff(a,b) \n  a.map {|k,v| b.key?(k) ? [k,v-b[k]] : [k,v] }.reject { |_,a| a.empty?}.to_h\nend\n</code></pre>\n\n<p>I expected <code>diff(a,b) == diff(b,a) == {}</code>. Let's see:</p>\n\n<pre><code>diff(a,b)\n  #=&gt; {} \n\ndiff(b,a)\n  #=&gt; {Gem::Specification=&gt;[:skip_during, :deprecate],\n  #    Complex=&gt;[:convert],\n  #    Rational=&gt;[:convert],\n  #    Random=&gt;[:state, :left],\n  #    Time=&gt;[:_load]} \n</code></pre>\n\n<p>Hmmmm.</p>\n"}], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 349, "favorite_count": 1, "accepted_answer_id": 28204348, "answer_count": 4, "score": 4, "last_activity_date": 1422887944, "creation_date": 1422485654, "question_id": 28203988, "link": "https://stackoverflow.com/questions/28203988/are-all-singleton-methods-public", "title": "Are all singleton methods public?", "body": "<p>Is a singleton method necessarily public? If not, when would a private/protected singleton method be useful?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "fog"], "answers": [{"tags": [], "owner": {"reputation": 2337, "user_id": 967276, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/391f7ae8dd8c10dc323b7fbfe55b71a2?s=128&d=identicon&r=PG", "display_name": "geemus", "link": "https://stackoverflow.com/users/967276/geemus"}, "is_accepted": true, "score": 2, "last_activity_date": 1422544828, "creation_date": 1422544828, "answer_id": 28218183, "question_id": 28203776, "link": "https://stackoverflow.com/questions/28203776/ror-fog-getting-started-with-fog/28218183#28218183", "title": "RoR, Fog: Getting Started with Fog", "body": "<p>not a problem, getting started tends to be the hardest part.</p>\n\n<p>The answer is, it depends. I'd actually venture to say it would be best to put this in your environment based initializers, ie config/init/development or config/init/production, etc. Relatedly, you probably will not want to generate a new directory every time you start your app (there is an account level limit of 100 total I believe). So you might want to either set a key for each environment for that create or simply create the directory somewhere outside the initializers (and within the initializer you can assume it exists).</p>\n\n<p>If you want to use that directory directly, you'll still need to create a reference, but you can create a local reference without making any api calls with #new like this:</p>\n\n<p><code>directory = connection.directories.new(:key =&gt; ...)</code></p>\n\n<p>As for asset_sync, it needs those keys and a reference to the directory key, which you will probably want to provide via ENV vars (to avoid checking your credentials into version control). You can find details on which keys and how to set them here: <a href=\"https://github.com/rumblelabs/asset_sync#built-in-initializer-environment-variables\" rel=\"nofollow\">https://github.com/rumblelabs/asset_sync#built-in-initializer-environment-variables</a> (the readme also describes how to do it via initializers, but that probably isn't the best plan).</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 4318, "user_id": 2276081, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/LMM6M.jpg?s=128&g=1", "display_name": "Thalatta", "link": "https://stackoverflow.com/users/2276081/thalatta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 318, "favorite_count": 0, "accepted_answer_id": 28218183, "answer_count": 1, "score": 0, "last_activity_date": 1422544828, "creation_date": 1422484576, "question_id": 28203776, "link": "https://stackoverflow.com/questions/28203776/ror-fog-getting-started-with-fog", "title": "RoR, Fog: Getting Started with Fog", "body": "<p>I just installed the gem <code>asset_sync</code> and I am trying to get set up with my AWS account. When I run <code>bundle exec rake assets:precompile</code> I get the following errror:</p>\n\n<pre><code>AssetSync::Config::Invalid: Fog provider can't be blank, Fog directory can't be blank\n</code></pre>\n\n<p>I understand the simply reason that I am getting this error, namely that I havent pushed the Fog provider or directory to <code>heroku</code>. What I am stumped about is where to put the Following code (Taken from the Fog README). In <code>config/initializers/fog.rb</code>? Is this all I need to do to start using fog, other than installing the gem?</p>\n\n<pre><code>require 'rubygems'\nrequire 'fog'\n\n# create a connection\nconnection = Fog::Storage.new({\n  :provider                 =&gt; 'AWS',\n  :aws_access_key_id        =&gt; YOUR_AWS_ACCESS_KEY_ID,\n  :aws_secret_access_key    =&gt; YOUR_AWS_SECRET_ACCESS_KEY\n})\n\n# First, a place to contain the glorious details\ndirectory = connection.directories.create(\n  :key    =&gt; \"fog-demo-#{Time.now.to_i}\", # globally unique name\n  :public =&gt; true\n)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "boolean", "admin"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1422484521, "post_id": 28203729, "comment_id": 44773479, "body": "Add <code>?approved=true</code> to the url and try again."}, {"owner": {"reputation": 21, "user_id": 4504976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f01a90e42a90c0f0fec25a5769792a?s=128&d=identicon&r=PG&f=1", "display_name": "Moises Donoso Salinas", "link": "https://stackoverflow.com/users/4504976/moises-donoso-salinas"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1422484816, "post_id": 28203729, "comment_id": 44773580, "body": "Thanks for reply. The result is the same, the index show me all the users."}, {"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1422485476, "post_id": 28203729, "comment_id": 44773814, "body": "Sorry, I meant ?approved=false"}, {"owner": {"reputation": 21, "user_id": 4504976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f01a90e42a90c0f0fec25a5769792a?s=128&d=identicon&r=PG&f=1", "display_name": "Moises Donoso Salinas", "link": "https://stackoverflow.com/users/4504976/moises-donoso-salinas"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1422485619, "post_id": 28203729, "comment_id": 44773872, "body": "NoMethodError in Desaprobados#index -&gt; undefined method `each&#39; for #&lt;User in &lt;% @users.each do |users| %&gt;."}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422485709, "post_id": 28203729, "comment_id": 44773911, "body": "Change <code>@users = User.find_by_approved(false)</code> to <code>@users = User.where(approved: false)</code>"}, {"owner": {"reputation": 21, "user_id": 4504976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f01a90e42a90c0f0fec25a5769792a?s=128&d=identicon&r=PG&f=1", "display_name": "Moises Donoso Salinas", "link": "https://stackoverflow.com/users/4504976/moises-donoso-salinas"}, "edited": false, "score": 0, "creation_date": 1422486055, "post_id": 28203729, "comment_id": 44774086, "body": "yes! that fix the issue. I have to add  &quot;?approved=false&quot; and change for &quot;@users = User.find_by_approved(false) to @users = User.where(approved: false)&quot;. I have to learn a lot. Bye and thanks to all."}], "owner": {"reputation": 21, "user_id": 4504976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17f01a90e42a90c0f0fec25a5769792a?s=128&d=identicon&r=PG&f=1", "display_name": "Moises Donoso Salinas", "link": "https://stackoverflow.com/users/4504976/moises-donoso-salinas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 118, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1422484391, "creation_date": 1422484391, "question_id": 28203729, "link": "https://stackoverflow.com/questions/28203729/devise-users-show-only-the-false-boolean", "title": "Devise users - show only the false boolean", "body": "<p>I would like to show in my index the users that are waiting to be approved (false = unnaproved). I followed the steps in this link(controllers and views): </p>\n\n<p><a href=\"https://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in\" rel=\"nofollow\">https://github.com/plataformatec/devise/wiki/How-To%3a-Require-admin-to-activate-account-before-sign_in</a></p>\n\n<p>I have tried many ways, but nothing seems to work. My code is:</p>\n\n<p><strong>controller:</strong></p>\n\n<pre><code>def index\nif params[:approved] == \"false\"\n    @users = User.find_by_approved(false)\nelse\n   @users = User.all\nend\n</code></pre>\n\n<p>end</p>\n\n<p><strong>View index</strong></p>\n\n<pre><code>&lt;% @users.each do |users| %&gt;\n            &lt;tr&gt;\n                &lt;td&gt;&lt;%= users.name%&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;%= users.email %&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;%= users.approved %&gt;&lt;/td&gt;\n                &lt;td&gt;&lt;%= link_to \"Aprobar\", desaprobado_path(users) %&gt;&lt;/td&gt;\n                &lt;/tr&gt;\n            &lt;%end%&gt;\n</code></pre>\n\n<p>The index show me all the users (false and true), not only the false ones.\nAny idea? thanks! greetings from Chile and excuse my english.</p>\n"}, {"tags": ["ruby", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 960, "user_id": 3482656, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2005b135d5a6b59d966be48549afbfc1?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie Programmer", "link": "https://stackoverflow.com/users/3482656/newbie-programmer"}, "edited": false, "score": 0, "creation_date": 1422485800, "post_id": 28203984, "comment_id": 44773960, "body": "puts b.table.td(:id, &#39;listView_1381137000000078119&#39;).exists? is giving me false. But it gave me true with link!"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "reply_to_user": {"reputation": 960, "user_id": 3482656, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2005b135d5a6b59d966be48549afbfc1?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie Programmer", "link": "https://stackoverflow.com/users/3482656/newbie-programmer"}, "edited": false, "score": 0, "creation_date": 1422485946, "post_id": 28203984, "comment_id": 44774040, "body": "Sorry.  Had it backwards.  Should have just cut/pasted.  Edited now."}], "tags": [], "owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "is_accepted": true, "score": 1, "last_activity_date": 1422485641, "creation_date": 1422485641, "answer_id": 28203984, "question_id": 28203642, "link": "https://stackoverflow.com/questions/28203642/access-cell-in-table-and-click/28203984#28203984", "title": "Access cell in table and click", "body": "<p>Based on your HTML, there is no <code>&lt;td&gt;</code> tag with an <code>id</code> attribute of  <code>listView_1381137000000078119</code>.  However, there is an <code>&lt;a&gt;</code> tag with an <code>id</code> attribute of  <code>listView_1381137000000078119</code>.</p>\n\n<pre><code>puts b.table.td(:id, 'listView_1381137000000078119').exists?   \nputs b.table.link(:id, 'listView_1381137000000078119').exists?\n#=&gt; false\n#=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 960, "user_id": 3482656, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2005b135d5a6b59d966be48549afbfc1?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie Programmer", "link": "https://stackoverflow.com/users/3482656/newbie-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 97, "favorite_count": 0, "accepted_answer_id": 28203984, "answer_count": 1, "score": 0, "last_activity_date": 1422485641, "creation_date": 1422484028, "question_id": 28203642, "link": "https://stackoverflow.com/questions/28203642/access-cell-in-table-and-click", "title": "Access cell in table and click", "body": "<p>I am writing a script to automate certain tasks. I am at a point where I have a table and hyperlinked name written in its second row, first column ([2][1]). I want to access that cell and click on it to go to intended page. Structure of the page looks like this:</p>\n\n<pre><code>&lt;table id=\"listViewTable\" class=\"listview\" width=\"100%\" cellspacing=\"0\" cellpadding=\"0\" border=\"0\" style=\"margin-top: 0px;\"&gt;\n\n&lt;tbody&gt;&lt;/tbody&gt;\n&lt;tbody id=\"lvTred\"&gt;\n    &lt;tr id=\"1381137000000078119\" class=\"tdout\"&gt;\n        &lt;td width=\"10\" data-cid=\"dummy\"&gt;&lt;/td&gt;\n        &lt;td class=\"lvCB\" data-cid=\"dummy\"&gt;&lt;/td&gt;\n        &lt;td&gt;\n            &lt;a id=\"listView_1381137000000078119\" class=\"link\" href=\"/crm/EntityInfo.do?id=1381137000000078119&amp;module=Potentials&amp;relCntId=1381137000000078117\" data-params=\"{\"relContactId\":\"1381137000000078117\",\"module\":\"Potentials\",\u2026id\":\"1381137000000075541\",\"recordNum\":\"1\",\"lookback\":\"true\"}\" data-cid=\"detailView\"&gt;&lt;/a&gt;\n        &lt;/td&gt;\n</code></pre>\n\n<p>I have successfully accessed table with id 'listviewTable' but not able to access cell with id 'listView_1381137000000078119' which is at location [2][1] in table. I did something like this:</p>\n\n<pre><code>cell = table.cell(:id, 'listView_1381137000000078119')\n</code></pre>\n\n<p>where table is actual table with mentioned id. Can anyone help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "environment-variables"], "answers": [{"comments": [{"owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "edited": false, "score": 0, "creation_date": 1422490064, "post_id": 28204695, "comment_id": 44775422, "body": "I figured some one was going to state this, and I should have stated I am already using Figaro. Its how I am able to have an <code>application.yml</code> and use <code>ENV[&#39;SOME_KEY_HERE&#39;]</code>, The problem is even in testing doing <code>Figaro.env.BLACKBIRD_API_URL</code> comes back <code>nil</code>, when clearly - it is not <code>nil</code>. @dankohn"}, {"owner": {"reputation": 30802, "user_id": 1935918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5730f209b34b8474639e0c2020f54513?s=128&d=identicon&r=PG", "display_name": "Dan Kohn", "link": "https://stackoverflow.com/users/1935918/dan-kohn"}, "reply_to_user": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "edited": false, "score": 0, "creation_date": 1422490855, "post_id": 28204695, "comment_id": 44775656, "body": "But then your bug seems to be in your use of Figaro, not in the code you include. I would try to get Figaro working, or switch to dotenv (which is what I use)."}, {"owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "edited": false, "score": 0, "creation_date": 1422491138, "post_id": 28204695, "comment_id": 44775729, "body": "Thats not a very helpful answer. Based on what I provided I cannot see any bugs being introduced. and I cannot see how switching would help."}], "tags": [], "owner": {"reputation": 30802, "user_id": 1935918, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/5730f209b34b8474639e0c2020f54513?s=128&d=identicon&r=PG", "display_name": "Dan Kohn", "link": "https://stackoverflow.com/users/1935918/dan-kohn"}, "is_accepted": false, "score": 0, "last_activity_date": 1422489400, "creation_date": 1422489400, "answer_id": 28204695, "question_id": 28202995, "link": "https://stackoverflow.com/questions/28202995/why-are-my-environment-variables-not-being-seen-rspec-3-1-0-rails-engine-4-1/28204695#28204695", "title": "Why are my environment variables not being seen - rspec 3.1.0, rails engine 4.1.9", "body": "<p>Rails doesn't load environment variables by default unless you specify them from the command line when you invoke Rails. You want to use <a href=\"https://github.com/laserlemon/figaro\" rel=\"nofollow\">figaro</a> or <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow\">dotenv</a> to be able to load environment variables from a file. I believe you want figaro, since it reads from <code>application.yml</code> rather than a <code>.env</code> file.</p>\n"}], "owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 664, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1422489400, "creation_date": 1422481498, "question_id": 28202995, "link": "https://stackoverflow.com/questions/28202995/why-are-my-environment-variables-not-being-seen-rspec-3-1-0-rails-engine-4-1", "title": "Why are my environment variables not being seen - rspec 3.1.0, rails engine 4.1.9", "body": "<p>I have the following test file, in the <code>before(:each)do ... end</code> section I am using some enviroment variables, these - because I have no idea if spec reads from dummy or the engine <code>config/</code> its self, are placed in both the dummy's <code>config/application.yml</code> and the engines root <code>config/application.yml</code></p>\n\n<pre><code>require 'spec_helper'\n\ndescribe Xaaron::UsersController, :type =&gt; :controller do\n  routes { Xaaron::Engine.routes }\n\n  context \"publish created users\" do\n    before(:each) do\n      Xaaron.configuration.reset\n      no_user_member_roles_relation\n\n      binding.pry\n      Xaaron.configuration.publish_to_black_bird = true\n      Xaaron.configuration.black_bird_api_url = ENV['BLACKBIRD_API_URL']\n      Xaaron.configuration.black_bird_api_key = ENV['BLACKBIRD_API_KEY']\n\n    end\n\n    it \"should publish to blackbird\" do\n      VCR.use_cassette 'publisher/create_user_response' do\n        post :create, user: {\n          first_name: 'sample', user_name: 'johnq',\n          email: 'sample_sample_sample@sample.com', email_confirmation: 'sample_sample_sample@sample.com',\n          password: 'SamplePassword', password_confirmation: 'SamplePassword'\n        }\n\n        expect(response).to redirect_to login_path\n      end\n    end\n  end\n\nend\n</code></pre>\n\n<p>Now because this is local host testing, I don't care if I show you these (both apps are on localhost):</p>\n\n<p>The <code>application.yml</code> file in both locations contain the following:</p>\n\n<pre><code>BLACKBIRD_API_KEY: d1cab0ac344f5074797b8c2b9ce90070e8af3405de8431fa17150a0f3420b41e\nBLACKBIRD_API_URL: http://site.local.com::5000/api/internal/v1/\n</code></pre>\n\n<p>When the test is run it fails, because of a nil:NilClass, which happens in this method:</p>\n\n<pre><code># We need to check if Blackbird is alive.\ndef is_alive?\n  # Do a simple get and capture the response\n  response = HTTParty.get(\n    Xaaron.configuration.black_bird_api_url + 'alive/',\n    :headers =&gt; { \"HTTP_AUTHORIZATION\" =&gt; Xaaron.configuration.black_bird_api_key }\n  )\n\n  # If the response is 200 return true, else reeturn thje response code\n  if response.code == 200\n    return true\n  else\n    return response.code\n  end\nend\n</code></pre>\n\n<p>The exact line is:</p>\n\n<pre><code>Xaaron.configuration.black_bird_api_url + 'alive/'\n</code></pre>\n\n<p>When I place a <code>binding.pry</code> above this line and do <code>Xaaron.configuration.black_bird_api_url</code> I get <code>nil</code>, so when I do <code>ENV['BLACKBIRD_API_URL']</code> I also get <code>nil</code></p>\n\n<p>So My question is:</p>\n\n<p><strong>Why are my environment variables nil when they are oh so very clearly set.</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "delegates", "rails-activerecord"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1422480376, "post_id": 28202660, "comment_id": 44771490, "body": "Does changing includes to eager_load help (or adding .references(:identifier) )"}, {"owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1422480538, "post_id": 28202660, "comment_id": 44771576, "body": "Good tip, I did do some reading on Rails 4 and <code>.references</code>. Alas, I attempted both of your suggestions with no luck. I&#39;ll try any other suggestions tomorrow morning when I return to work. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "edited": false, "score": 1, "creation_date": 1422538380, "post_id": 28211549, "comment_id": 44795297, "body": "Thanks for the excellent explanation. I know some changes were made to <code>includes</code> in Rails 4. Do you know if that had an impact on this? I did not work on the Rails 3 version of this project, but that code was there (with <code>.order(:name)</code>) and they claim all of our tests were passing (including accessing that instance variable correctly)."}, {"owner": {"reputation": 646, "user_id": 4014005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MH_8tviU2Xg/AAAAAAAAAAI/AAAAAAAAAbk/7SM8Voh8ES0/photo.jpg?sz=128", "display_name": "Daniel Ma", "link": "https://stackoverflow.com/users/4014005/daniel-ma"}, "reply_to_user": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "edited": false, "score": 1, "creation_date": 1422555847, "post_id": 28211549, "comment_id": 44806781, "body": "Here&#39;s an option. When you use <code>.order</code> with a symbol (like <code>:name</code>), Rails will try to add the table name for you ( <code>ORDER BY info_items.name</code>). But, with a string, it will add that string directly into your query. In this specific case, you can use <code>joins(:identifier).order(&#39;name&#39;)</code> whic results in <code>ORDER BY name</code>. Since the <code>name</code> column doesn&#39;t exist on <code>info_items</code> but does exist on <code>info_item_identifiers</code>, it will work properly. You do need to use joins instead of includes. Note that if you join (or include) any other table with a <code>name</code> column, you will get an ambiguous column SQL error"}], "tags": [], "owner": {"reputation": 646, "user_id": 4014005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MH_8tviU2Xg/AAAAAAAAAAI/AAAAAAAAAbk/7SM8Voh8ES0/photo.jpg?sz=128", "display_name": "Daniel Ma", "link": "https://stackoverflow.com/users/4014005/daniel-ma"}, "is_accepted": true, "score": 3, "last_activity_date": 1422525069, "creation_date": 1422525069, "answer_id": 28211549, "question_id": 28202660, "link": "https://stackoverflow.com/questions/28202660/in-rails-can-i-order-a-query-by-a-delegate-method/28211549#28211549", "title": "In Rails, can I order a query by a delegate method?", "body": "<p>Yes, but it requires instantiating all your records first (which will decrease performance).</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>@measurements = Measurement.joins(:identifier).sort_by &amp;:name\n</code></pre>\n\n<p>This code loads all Measurements and instantiates them and then sorts them by the Ruby method <code>.name</code></p>\n\n<p><strong>Explanation</strong></p>\n\n<p><code>delegate</code> only affects instances of your ActiveRecord model. It does not affect your SQL queries.</p>\n\n<p>This line maps directly to a SQL query.</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>Measurement.includes(:identifier).order(:name)\n</code></pre>\n\n<p>As you have noticed, it looks for a <code>name</code> column on the measurements table and doesn't find anything. Your ActiveRecord model instances know that <code>name</code> only exists on <code>identifier</code>, but your SQL database doesn't know that, so you have to tell it explicitly on which table to find the column.</p>\n"}], "owner": {"reputation": 9149, "user_id": 214812, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/03fb59bf27824bdd9e12b461b5f1c117?s=128&d=identicon&r=PG", "display_name": "ardavis", "link": "https://stackoverflow.com/users/214812/ardavis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2109, "favorite_count": 0, "accepted_answer_id": 28211549, "answer_count": 1, "score": 3, "last_activity_date": 1534455317, "creation_date": 1422480232, "last_edit_date": 1534455317, "question_id": 28202660, "link": "https://stackoverflow.com/questions/28202660/in-rails-can-i-order-a-query-by-a-delegate-method", "title": "In Rails, can I order a query by a delegate method?", "body": "<p>I'm having difficulty ordering a query by a delegate method. I've been tasked with helping upgrade a fairly large Rails 3 application to Rails 4. I've come across this query in an index action. <strong>I am aware the naming of these objects is horrible and confusing.</strong></p>\n\n<pre><code># measurements_controller.rb\ndef index\n  @measurements = Measurement.includes(:identifier).order(:name)\nend\n</code></pre>\n\n<p>In Rails 4, I'm getting this error:</p>\n\n<pre><code>ERROR: column info_items.name does not exist LINE 1: ...D (info_item_identifiers.name LIKE '%') ORDER BY \"info_item...\n</code></pre>\n\n<p>So I took a look at the models and found:</p>\n\n<pre><code># measurement.rb\nclass Measurement &lt; InfoItem\n  ...\nend\n\n# info_item.rb\nbelongs_to :identifier, class_name: 'InfoItemIdentifier'\ndelegate :name, :name=, to: :identifier\n\n# info_item_identifier.rb\n# This object has a name column in the database\n</code></pre>\n\n<p>If I'm in the terminal and I have an instance of a <code>Measurement</code>, I can easily call the <code>.name</code> method and it works great. But when it comes to <code>.order(:name)</code>, that does not work due to the column not existing.</p>\n\n<p>I have found one solution, but it seems to defeat the purpose of the delegate method. In the controller, I can change it to:</p>\n\n<pre><code>@measurements = Measurement.includes(:identifier).order('info_item_identifiers.name')\n</code></pre>\n\n<p>Since I know that <code>InfoItem</code> delegates the <code>name</code> method to <code>InfoItemIdentifiers</code>, I don't think my controller needs to know where it's delegated to.</p>\n\n<p><strong>Is there a way to keep the existing code and still order by the delegate method?</strong></p>\n"}, {"tags": ["ruby", "watir-webdriver", "page-object-gem"], "answers": [{"comments": [{"owner": {"reputation": 812, "user_id": 1155498, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e82b888c69fb4df9c906753f8336ddd0?s=128&d=identicon&r=PG", "display_name": "Sukuva", "link": "https://stackoverflow.com/users/1155498/sukuva"}, "edited": false, "score": 0, "creation_date": 1422629006, "post_id": 28227887, "comment_id": 44837727, "body": "Thanks Dane for the comment. That comment was certainly helpful. But what i am looking for is ... A framework built using page object model with all the necessary automation libraries and the users can just use this so that we can minimal their initial project effort. I think this will defenitely save lot of time."}, {"owner": {"reputation": 725, "user_id": 3613829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhaFN.jpg?s=128&g=1", "display_name": "Alexis Andersen", "link": "https://stackoverflow.com/users/3613829/alexis-andersen"}, "reply_to_user": {"reputation": 812, "user_id": 1155498, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e82b888c69fb4df9c906753f8336ddd0?s=128&d=identicon&r=PG", "display_name": "Sukuva", "link": "https://stackoverflow.com/users/1155498/sukuva"}, "edited": false, "score": 0, "creation_date": 1422629768, "post_id": 28227887, "comment_id": 44838178, "body": "Sorry, I read through and saw &quot;now the question is&quot; and thought you meant that was the entire question. What kind of reusable components are you looking for?"}, {"owner": {"reputation": 725, "user_id": 3613829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhaFN.jpg?s=128&g=1", "display_name": "Alexis Andersen", "link": "https://stackoverflow.com/users/3613829/alexis-andersen"}, "reply_to_user": {"reputation": 812, "user_id": 1155498, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e82b888c69fb4df9c906753f8336ddd0?s=128&d=identicon&r=PG", "display_name": "Sukuva", "link": "https://stackoverflow.com/users/1155498/sukuva"}, "edited": false, "score": 0, "creation_date": 1422646057, "post_id": 28227887, "comment_id": 44847172, "body": "Are there common elements on pages? Like menus or navigation? Are there custom web controls like calendars? Or is there business logic about how you want to deal with elements or the data you want to use or see?"}, {"owner": {"reputation": 812, "user_id": 1155498, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e82b888c69fb4df9c906753f8336ddd0?s=128&d=identicon&r=PG", "display_name": "Sukuva", "link": "https://stackoverflow.com/users/1155498/sukuva"}, "edited": false, "score": 0, "creation_date": 1422650795, "post_id": 28227887, "comment_id": 44849364, "body": "I am looking for a complete framework library. It should have API Module, Database Module &amp; Mainframe emulator. I know different gems are available outside, but it would be better if I handle as a seperate project. Along with this, i am trying to include the Page Object Model common things like hooks file, env and other stuffs."}], "tags": [], "owner": {"reputation": 725, "user_id": 3613829, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PhaFN.jpg?s=128&g=1", "display_name": "Alexis Andersen", "link": "https://stackoverflow.com/users/3613829/alexis-andersen"}, "is_accepted": false, "score": 1, "last_activity_date": 1422581888, "creation_date": 1422581888, "answer_id": 28227887, "question_id": 28202484, "link": "https://stackoverflow.com/questions/28202484/framework-using-page-object-gem-bundle-as-a-gem/28227887#28227887", "title": "framework using page Object gem - bundle as a gem", "body": "<p>I did this for a team a while back. The solution we ended up with was a file called global_hooks.rb which had a method define_hooks. When you called the method, it would define the hooks just like you would in the hooks file. Because it was all in a method, it wasn't evaluated until called in the hooks file.</p>\n\n<p>global_hooks.rb:</p>\n\n<pre><code>def define_hooks\n  Before do\n    #do something before\n  end\nend\n</code></pre>\n\n<p>hooks.rb:</p>\n\n<pre><code>require 'global_hooks'\ndefine_hooks\n</code></pre>\n"}], "owner": {"reputation": 812, "user_id": 1155498, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e82b888c69fb4df9c906753f8336ddd0?s=128&d=identicon&r=PG", "display_name": "Sukuva", "link": "https://stackoverflow.com/users/1155498/sukuva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422581888, "creation_date": 1422479603, "last_edit_date": 1422479903, "question_id": 28202484, "link": "https://stackoverflow.com/questions/28202484/framework-using-page-object-gem-bundle-as-a-gem", "title": "framework using page Object gem - bundle as a gem", "body": "<p>I would like to create a framework using the ruby page object gem. The idea is simple. I want to seperate the common re-uable components under framework project and then finally bundle all these as a gem. \nAll the project related codes ( pages and all the other stuffs ) will go inside the project. \nThe good thing i am looking at is re-usability within different project. Also the developer can develop the scripts much faster way. </p>\n\n<p>Now the question is : Can i move the hooks file inside the framework ? If so, If i add this framework gem to a project, will that automatically pick the hooks file inside the gem? The reason why i am thinking like this is almost every team here uses the same hooks file and there are no changes at all. </p>\n\n<p>The whole idea is DRY. Any other ideas are also welcome. </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1224, "user_id": 234644, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1eeb9d707c09093cf60d28e613571478?s=128&d=identicon&r=PG", "display_name": "3coins", "link": "https://stackoverflow.com/users/234644/3coins"}, "edited": false, "score": 0, "creation_date": 1422481121, "post_id": 28202482, "comment_id": 44771842, "body": "Ok. Thanks for explaining. But need another explanation, I was using a log statement inside the cache block, and that was showing up only once, why did the cache block not execute every time, if nothing was being stored. I updated the code block to show where I was logging that statement."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 2, "last_activity_date": 1422479585, "creation_date": 1422479585, "answer_id": 28202482, "question_id": 28202409, "link": "https://stackoverflow.com/questions/28202409/rails-3-cache-returning-nil/28202482#28202482", "title": "Rails 3 Cache Returning Nil", "body": "<p>Your code doesn't actually ever cache anything: <code>return</code> returns form the whole method, so the bit of <code>fetch</code> that stores values in the cache never executes and there is nothing for your call to <code>read</code> to return. </p>\n\n<p>You could either use <code>next</code> or nothing at all:</p>\n\n<pre><code>def form_config_cache\n  Rails.cache.fetch(\"form_config\", :expires_in =&gt; 12.hours) do\n    form_config = s3_read_object('form_config.js')\n    JSON.parse(form_config)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1224, "user_id": 234644, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/1eeb9d707c09093cf60d28e613571478?s=128&d=identicon&r=PG", "display_name": "3coins", "link": "https://stackoverflow.com/users/234644/3coins"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 28202482, "answer_count": 1, "score": 0, "last_activity_date": 1422481152, "creation_date": 1422479282, "last_edit_date": 1422481152, "question_id": 28202409, "link": "https://stackoverflow.com/questions/28202409/rails-3-cache-returning-nil", "title": "Rails 3 Cache Returning Nil", "body": "<p>Using Rails memory cache like this in one controller.</p>\n\n<pre><code>def form_config_cache\n    Rails.cache.fetch(\"form_config\", :expires_in =&gt; 12.hours) do\n      puts 'Building cache...'\n      form_config = s3_read_object('form_config.js')\n      return JSON.parse(form_config)\n    end\n  end\n</code></pre>\n\n<p>This is working fine on the controller where it is defined. But when I try to read the value from another controller, it is returning as nil. Can anyone explain what might be going on? Here is how I am trying to read it in another controller.</p>\n\n<pre><code>form_config = Rails.cache.read('form_config')\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "is_accepted": true, "score": 2, "last_activity_date": 1422477126, "last_edit_date": 1422477126, "creation_date": 1422476777, "answer_id": 28201748, "question_id": 28201693, "link": "https://stackoverflow.com/questions/28201693/looping-over-attributes-of-model-instance/28201748#28201748", "title": "Looping over attributes of model instance", "body": "<p>Redo your code so it looks like this:</p>\n\n<pre><code>people.each do |person|\n  puts person.first_name\nend\n</code></pre>\n\n<p>In this code, <code>person</code> is the name of the individual object you are looping over. So calling <code>person.first_name</code> will call the first_name of that individual. </p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422479745, "post_id": 28202050, "comment_id": 44771179, "body": "You are creating two unnecessary arrays.  Doesn&#39;t it make more sense to just loop through <code>people</code>, printing their first names?"}, {"owner": {"reputation": 10256, "user_id": 1043380, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2388aa1beb9ac75029a5b4fafec11eec?s=128&d=identicon&r=PG", "display_name": "gunr2171", "link": "https://stackoverflow.com/users/1043380/gunr2171"}, "edited": false, "score": 0, "creation_date": 1422481795, "post_id": 28202050, "comment_id": 44772203, "body": "While this code snippet may solve the question, <a href=\"http://meta.stackexchange.com/questions/114762/explaining-entirely-code-based-answers\">including an explanation</a> really helps to improve the quality of your post. Remember that you are answering the question for readers in the future, and those people might not know the reasons for your code suggestion."}], "tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1422479886, "last_edit_date": 1422479886, "creation_date": 1422477824, "answer_id": 28202050, "question_id": 28201693, "link": "https://stackoverflow.com/questions/28201693/looping-over-attributes-of-model-instance/28202050#28202050", "title": "Looping over attributes of model instance", "body": "<pre><code>people = Person.all\nputs people.map(&amp;:name).join(' ')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 700, "user_id": 867754, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07f80005671d9913ec398f669897b908?s=128&d=identicon&r=PG", "display_name": "teubanks", "link": "https://stackoverflow.com/users/867754/teubanks"}, "is_accepted": false, "score": 0, "last_activity_date": 1422477904, "creation_date": 1422477904, "answer_id": 28202064, "question_id": 28201693, "link": "https://stackoverflow.com/questions/28201693/looping-over-attributes-of-model-instance/28202064#28202064", "title": "Looping over attributes of model instance", "body": "<p>What if, instead of looping, we fetch all the first names in one query?</p>\n\n<pre><code>puts Person.pluck(:first_name).join(\"\\n\")\n</code></pre>\n\n<p>If it needs to be an array of people, this would work too</p>\n\n<pre><code>puts people.map(&amp;:first_name).join(\"\\n\")\n</code></pre>\n"}], "owner": {"reputation": 1017, "user_id": 4074089, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/GRmCV.png?s=128&g=1", "display_name": "Darc Nawg", "link": "https://stackoverflow.com/users/4074089/darc-nawg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 28201748, "answer_count": 3, "score": 0, "last_activity_date": 1422479886, "creation_date": 1422476581, "question_id": 28201693, "link": "https://stackoverflow.com/questions/28201693/looping-over-attributes-of-model-instance", "title": "Looping over attributes of model instance", "body": "<p>I have an instance <code>people = Person.all</code> and would like to loop over it to get the first_name attribute for each person. I have tried the following:</p>\n\n<pre><code>people.each do |first_name|\n  puts #{first_name}\nend\n</code></pre>\n\n<p>How to construct the loop as to output all of the First Names?</p>\n"}, {"tags": ["ruby", "watir-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 1, "last_activity_date": 1422478138, "creation_date": 1422478138, "answer_id": 28202123, "question_id": 28201554, "link": "https://stackoverflow.com/questions/28201554/unable-to-access-text-field-in-an-iframe/28202123#28202123", "title": "Unable to access text field in an iframe", "body": "<p>In the following line, Watir will look for the element anywhere <em>except</em> for in iframes (and frames).</p>\n\n<pre><code>b.text_field(:id,'lid').set 'my value'\n</code></pre>\n\n<p>Unlike other elements, you must tell Watir when an element is in a frame. This is done similar to how you would scope the search of an element to a specific element.</p>\n\n<p>For example, if there is only 1 iframe or your element is in the first iframe, you can do (noting the addition of the <code>.iframe</code>):</p>\n\n<pre><code>b.iframe.text_field(:id =&gt; 'lid').set 'my value'\n</code></pre>\n\n<p>If there are multiple iframes, you will need to add parameters to be more specific about which iframe to use. For example, the frame has an id:</p>\n\n<pre><code>b.iframe(:id =&gt; 'zohoiam').text_field(:id,'lid').set 'my value'\n</code></pre>\n"}], "owner": {"reputation": 960, "user_id": 3482656, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2005b135d5a6b59d966be48549afbfc1?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie Programmer", "link": "https://stackoverflow.com/users/3482656/newbie-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 640, "favorite_count": 1, "accepted_answer_id": 28202123, "answer_count": 1, "score": 0, "last_activity_date": 1422480252, "creation_date": 1422476149, "last_edit_date": 1422480252, "question_id": 28201554, "link": "https://stackoverflow.com/questions/28201554/unable-to-access-text-field-in-an-iframe", "title": "Unable to access text field in an iframe", "body": "<p>I am trying to automate script for testing using Watir-Webdriver. While writing a script, I am at a point where I have to fill in log in details. Now would it have been in a simple text_field, I know the syntax and it would be easier. But when I inspect elements on that page, I see following:</p>\n\n<pre><code>&lt;div class=\"signin-part\"&gt;\n\n&lt;iframe id=\"zohoiam\" frameborder=\"0\" allowtransparency=\"true\" style=\"width:430px;height:350px;margin: 0;float:left\" src=\"https://accounts.zoho.com/login?servicename=ZohoCRM&amp;serviceu\u2026o&amp;hide_signup=true&amp;css=https://www.zoho.com/css/prd-sign.css\" scrolling=\"no\" name=\"zohoiam\" marginheight=\"0\" marginwidth=\"0\"&gt;\n    #document\n        &lt;!DOCTYPE html PUBLIC \"-//W3C//DTD XHTML 1.0 Transitional//EN\" \"http://www.w3.org/TR/xhtml1/DTD/xhtml1.dtd\"&gt;\n        &lt;html&gt;\n            &lt;head&gt;&lt;/head&gt;\n            &lt;body class=\"bodycolor\" onload=\"setlwh();\"&gt;\n                &lt;noscript&gt;&lt;/noscript&gt;\n                &lt;div id=\"enableCookie\" class=\"loginNotes\" style=\"display:none;\"&gt;&lt;/div&gt;\n                &lt;table id=\"outertable\" class=\"mobile-login\" width=\"100%\" style=\"\"&gt;\n                    &lt;tbody&gt;\n                        &lt;tr valign=\"top\"&gt;&lt;/tr&gt;\n                        &lt;tr&gt;&lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;td align=\"center\"&gt;\n                                &lt;form id=\"msgOrgUserform\" class=\"hide\" method=\"post\" name=\"msgOrgUserform\"&gt;&lt;/form&gt;\n                                &lt;div id=\"loginform\"&gt;\n                                    &lt;div class=\"mobilelogo\"&gt;&lt;/div&gt;\n                                    &lt;form id=\"login\" class=\"\" novalidate=\"\" method=\"post\" onsubmit=\"javascript:return submitlogin(this);\" name=\"login\"&gt;\n                                        &lt;table id=\"inntbl\" class=\"mob_width\" cellspacing=\"0\" cellpadding=\"0\" align=\"center\"&gt;\n                                            &lt;tbody&gt;\n                                                &lt;tr&gt;\n                                                    &lt;td valign=\"top\"&gt;\n                                                        &lt;table class=\"mob_width\" width=\"260\" cellspacing=\"2\" cellpadding=\"1\" align=\"center\"&gt;\n                                                            &lt;tbody&gt;\n                                                                &lt;tr&gt;&lt;/tr&gt;\n                                                                &lt;tr&gt;&lt;/tr&gt;\n                                                                &lt;tr&gt;\n                                                                    &lt;td class=\"label\"&gt;&lt;/td&gt;\n                                                                    &lt;td align=\"left\"&gt;\n                                                                        &lt;input id=\"lid\" class=\"input usrbx\" type=\"email\" onkeypress=\"clearmsg()\" value=\"\" name=\"lid\"&gt;&lt;/input&gt;\n                                                                    &lt;/td&gt;\n                                                                &lt;/tr&gt;\n</code></pre>\n\n<p>So, as I can see, Email field is located inside table -> cell. So I am not able to access it using Watir. I tried it like this:</p>\n\n<pre><code>b.text_field(:id,'lid').set 'my value'\n</code></pre>\n\n<p>Can someone help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "libpq"], "answers": [{"tags": [], "owner": {"reputation": 9076, "user_id": 865601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d4708f5f7ae78ab1f4c4b8c3b62ddd?s=128&d=identicon&r=PG", "display_name": "Jacob Budin", "link": "https://stackoverflow.com/users/865601/jacob-budin"}, "is_accepted": false, "score": 0, "last_activity_date": 1422564076, "creation_date": 1422564076, "answer_id": 28224193, "question_id": 28201275, "link": "https://stackoverflow.com/questions/28201275/libpq5-6-dylib-not-found-how-do-i-install-5-7/28224193#28224193", "title": "Libpq5.6.dylib not found, how do I install 5.7?", "body": "<p>Try reinstalling the <code>pg</code> Ruby Gem (with <code>$ gem uninstall pg &amp;&amp; gem install pg</code>). This should recompile the gem using your new version of the Postgres development library.</p>\n"}], "owner": {"reputation": 8908, "user_id": 172232, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/5a3de2b746da71aadd6b33ddbcbccd52?s=128&d=identicon&r=PG", "display_name": "quantumpotato", "link": "https://stackoverflow.com/users/172232/quantumpotato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 202, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422564076, "creation_date": 1422475165, "question_id": 28201275, "link": "https://stackoverflow.com/questions/28201275/libpq5-6-dylib-not-found-how-do-i-install-5-7", "title": "Libpq5.6.dylib not found, how do I install 5.7?", "body": "<p>I run rake db:create and get a libpq not found. I have 5 and 5.7 .. how do I upgrade postgres to use 5.7?</p>\n\n<pre><code>rake db:create\n\nrake aborted!\nLoadError: dlopen(/Users/me/.rvm/gems/ruby-2.2.0-preview1/extensions/x86_64-darwin-14/2.2.0/pg-0.17.1/pg_ext.bundle, 9): Library not loaded: /usr/local/lib/libpq.5.6.dylib\n  Referenced from: /Users/me/.rvm/gems/ruby-2.2.0-preview1/extensions/x86_64-darwin-14/2.2.0/pg-0.17.1/pg_ext.bundle\n  Reason: image not found - /Users/me/.rvm/gems/ruby-2.2.0-preview1/extensions/x86_64-darwin-14/2.2.0/pg-0.17.1/pg_ext.bundle\n\n    ls /usr/local/lib/libpq.5.\n    libpq.5.7.dylib  libpq.5.dylib\n</code></pre>\n"}, {"tags": ["ruby", "arrays", "hash"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1422474533, "post_id": 28201005, "comment_id": 44768309, "body": "What is the logic that converts <code>[11, 15, 15]</code> into <code>[11, 15]</code> for the key <code>:attributes</code>? You may have thought it is obvious from your code, but since you have not mentioned at all about that, it is not obvious."}, {"owner": {"reputation": 24422, "user_id": 190623, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ded2adc034647d0e934806583137ecdd?s=128&d=identicon&r=PG", "display_name": "Gandalf StormCrow", "link": "https://stackoverflow.com/users/190623/gandalf-stormcrow"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1422474635, "post_id": 28201005, "comment_id": 44768384, "body": "@sawa I didn&#39;t say its obvious. I failed to mention that, my fault. The logic is to keep the unique numbers"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 1, "creation_date": 1422475646, "post_id": 28201005, "comment_id": 44768969, "body": "When you have a question like @sawa&#39;s, reply with a comment if you wish, but please correct the statement of the question, as not everyone reads all the comments. Here I would suggest you identify an edit as such (with &quot;Edit:&quot; or somesuch)."}], "answers": [{"comments": [{"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "edited": false, "score": 0, "creation_date": 1422475113, "post_id": 28201060, "comment_id": 44768654, "body": "What defines <code>to_h</code> for Array?"}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "edited": false, "score": 0, "creation_date": 1422475441, "post_id": 28201060, "comment_id": 44768844, "body": "Ah, I&#39;m using <a href=\"http://ruby-doc.org/core-2.0.0/Array.html\" rel=\"nofollow noreferrer\">2.0.0</a>, which apparently doesn&#39;t have it yet =)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "edited": false, "score": 0, "creation_date": 1422477316, "post_id": 28201060, "comment_id": 44769954, "body": "I too thought <code>Array#to_h</code> was introduced in 2.0.0. (See, e.g., <a href=\"http://blog.marc-andre.ca/2013/02/23/ruby-2-by-example/\" rel=\"nofollow noreferrer\">this blog entry</a>.), but it&#39;s clearly <a href=\"http://ruby-doc.org/core-2.0.0/Array.html\" rel=\"nofollow noreferrer\">not there</a>. Both <a href=\"http://www.ruby-doc.org/core-2.1.0/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\">Array#to_h</a> and <a href=\"http://ruby-doc.org/core-2.1.0/Enumerable.html#method-i-to_h\" rel=\"nofollow noreferrer\">Enumerable#to_h</a> appeared in 2.1. @maerics, I suggest you upgrade to at least 2.1, as there were some problems with 2.0.0 (the &quot;experimental&quot; <a href=\"http://ruby-doc.org/core-2.0.0/doc/syntax/refinements_rdoc.html\" rel=\"nofollow noreferrer\">Refinements</a>, for one)."}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 4, "last_activity_date": 1422474435, "creation_date": 1422474435, "answer_id": 28201060, "question_id": 28201005, "link": "https://stackoverflow.com/questions/28201005/ruby-modify-hash-value-if-value-array/28201060#28201060", "title": "Ruby modify hash value if value array", "body": "<p>Here is how I'd do :</p>\n\n<pre><code>Hash[hash.map { |k ,v| [k, v.size &gt; 1 ? v.uniq : v.first] }]\n# =&gt; {:properties=&gt;13, :attributes=&gt;[11, 15], :places=&gt;66}\n# or \nhash.map { |k ,v| [k, v.size &gt; 1 ? v.uniq : v.first] }.to_h\n# =&gt; {:properties=&gt;13, :attributes=&gt;[11, 15], :places=&gt;66}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422477695, "post_id": 28201071, "comment_id": 44770153, "body": "Your answer is essentially the same as @Arup&#39;s earlier one, but as yours followed within nanoseconds, let&#39;s call it a tie. Plus 10 for both of you."}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": false, "score": 2, "last_activity_date": 1422474471, "creation_date": 1422474471, "answer_id": 28201071, "question_id": 28201005, "link": "https://stackoverflow.com/questions/28201005/ruby-modify-hash-value-if-value-array/28201071#28201071", "title": "Ruby modify hash value if value array", "body": "<pre class=\"lang-ruby prettyprint-override\"><code>def convert(h)\n  Hash[h.map {|k,v| [k, v.size == 1 ? v.first : v.uniq]}]\nend\n\nconvert(hash)\n# =&gt; {:properties=&gt;13, :attributes=&gt;[11, 15], :places=&gt;66}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1422475870, "creation_date": 1422475870, "answer_id": 28201467, "question_id": 28201005, "link": "https://stackoverflow.com/questions/28201005/ruby-modify-hash-value-if-value-array/28201467#28201467", "title": "Ruby modify hash value if value array", "body": "<p>Here's another way:</p>\n\n<pre><code>hash.merge(hash) { |*_, v| (v.size==1) ? v.first : v.uniq }\n =&gt; {:properties=&gt;13, :attributes=&gt;[11, 15], :places=&gt;66} \n</code></pre>\n"}], "owner": {"reputation": 24422, "user_id": 190623, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/ded2adc034647d0e934806583137ecdd?s=128&d=identicon&r=PG", "display_name": "Gandalf StormCrow", "link": "https://stackoverflow.com/users/190623/gandalf-stormcrow"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 28201060, "answer_count": 3, "score": -1, "last_activity_date": 1422477299, "creation_date": 1422474257, "question_id": 28201005, "link": "https://stackoverflow.com/questions/28201005/ruby-modify-hash-value-if-value-array", "title": "Ruby modify hash value if value array", "body": "<p>I've got a ruby hash like this :</p>\n\n<pre><code>hash = {properties: [13], attributes: [11, 15, 15], places: [66]}\n</code></pre>\n\n<p>I want to convert my hash to this :</p>\n\n<pre><code>hash = {properties: 13, attributes: [11, 15], places: 66}\n</code></pre>\n\n<p>All values that have array lenght more than 1, keep them as they are (an array), all others first element. Tried this with couple of ifs, didn't turn out the way I wanted</p>\n\n<pre><code>hash.map{ |k,v| { k =&gt; v.uniq } }.reduce(&amp;:merge)\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "selectize.js"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "edited": false, "score": 0, "creation_date": 1422945910, "post_id": 28200690, "comment_id": 44938661, "body": "How big is your User table?"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1422980476, "post_id": 28200690, "comment_id": 44958758, "body": "It&#39;s going to be maybe 100 objects."}], "answers": [{"comments": [{"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1422749274, "post_id": 28247684, "comment_id": 44874067, "body": "I think the ajax option is what I need. But does that code really work for you? It breaks my selectize."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1422897091, "post_id": 28247684, "comment_id": 44920191, "body": "That fiddle is using the first block of code you posted. Do you have one with the second block? I think that&#39;s what I need."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1422907292, "post_id": 28247684, "comment_id": 44925518, "body": "Oh, I see. So to be clear, <code>http:&#47;&#47;host&#47;data&#47;users</code> references the User table in my app?"}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1422932822, "post_id": 28247684, "comment_id": 44934882, "body": "Would you happen to know if it&#39;s possible to render only certain instances of a controller? Specifically, I&#39;m trying to render <code>User.all.where(type: &quot;A&quot;)</code>."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1422981304, "post_id": 28247684, "comment_id": 44959230, "body": "Maybe there&#39;s something wrong with the rest of my code, but it&#39;s just using the html options still, not loading from my User table...."}, {"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1422981947, "post_id": 28247684, "comment_id": 44959644, "body": "Thank you for all you help! It turns out I can just dynamically load html options with Rails."}], "tags": [], "owner": {"reputation": 4116, "user_id": 4402825, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-3ESJ4SrCVfE/AAAAAAAAAAI/AAAAAAAAFO8/yBWcRYAN94s/photo.jpg?sz=128", "display_name": "Ben Grimm", "link": "https://stackoverflow.com/users/4402825/ben-grimm"}, "is_accepted": false, "score": 1, "last_activity_date": 1422939702, "last_edit_date": 1422939702, "creation_date": 1422673017, "answer_id": 28247684, "question_id": 28200690, "link": "https://stackoverflow.com/questions/28200690/how-can-i-select-from-a-full-table-with-selectize-js/28247684#28247684", "title": "How can I select from a full table with Selectize.js?", "body": "<p>According to the <a href=\"https://github.com/brianreavis/selectize.js/blob/master/docs/usage.md\" rel=\"nofollow\">docs</a>, you need to create a <code>load</code> method that will invoke <code>callback</code> with the array of options. Setting preload to true forces it to be populated at the time the select is created. </p>\n\n<p>In your .selectize():</p>\n\n<pre><code>load: function(query, callback) {\n        $.ajax({\n            url: 'http://railshost/users.json',\n            type: 'GET',\n            dataType: 'json',\n            data: {\n               // query: query  // if your data source allows\n            },\n            error: function() {\n                callback();\n            },\n            success: function(response) {\n                callback(response.table);\n            }\n        });\n    }\n...\n</code></pre>\n\n<h3>app/controllers/users_controller.rb:</h3>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def index\n    @users = User.all.where(type: \"A\")\n    respond_to do |format|\n      format.json { render json: @users}\n    end\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "edited": false, "score": 0, "creation_date": 1422981897, "post_id": 28304129, "comment_id": 44959612, "body": "Woooow I can&#39;t believe I didn&#39;t think of that haha... thank you, it works like a charm."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "is_accepted": true, "score": 1, "last_activity_date": 1422981620, "creation_date": 1422981620, "answer_id": 28304129, "question_id": 28200690, "link": "https://stackoverflow.com/questions/28200690/how-can-i-select-from-a-full-table-with-selectize-js/28304129#28304129", "title": "How can I select from a full table with Selectize.js?", "body": "<p>Since it's only about 100 objects, I don't think you need to mess around within the selectize code; you can simply dynamically set the options with Rails, and selectize will make them look pretty.</p>\n\n<p>Here's the method I used in my app, adjusted for yours:</p>\n\n<pre><code>&lt;select id='select-to'&gt;\n  &lt;option value=\"\"&gt;Please select an option&lt;/option&gt;\n  &lt;% User.where(type: \"A\").each do |user| %&gt;\n    &lt;option value=\"&lt;%= user.id %&gt;\"&gt;&lt;%= user.name %&gt;&lt;/option&gt;\n  &lt;% end %&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p>And then just selectize #select-to.</p>\n"}], "owner": {"reputation": 955, "user_id": 3739453, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ad500b31d2ce042c4f2c5b6e361a129b?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Morano", "link": "https://stackoverflow.com/users/3739453/joe-morano"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 841, "favorite_count": 1, "accepted_answer_id": 28304129, "answer_count": 2, "score": 0, "last_activity_date": 1422981620, "creation_date": 1422473015, "question_id": 28200690, "link": "https://stackoverflow.com/questions/28200690/how-can-i-select-from-a-full-table-with-selectize-js", "title": "How can I select from a full table with Selectize.js?", "body": "<p>I'm trying to use the <code>selectize-rails</code> gem. How can I use selectize to select from a full table?</p>\n\n<p>The following code allows me to multi-select \"Option1\" and \"Option2\".</p>\n\n<p><strong>views/users/show.html.erb</strong>:</p>\n\n<pre><code>$('#select-to').selectize({\n    persist: false,\n    maxItems: null,\n    valueField: 'email',\n    labelField: 'name',\n    searchField: ['name', 'email'],\n    options: [\n        {email: 'option1@example.com', name: 'Option1'},\n        {email: 'option2@example.com', name: 'Option2'},\n    ],\n    render: {\n        item: function(item, escape) {\n            return '&lt;div&gt;' +\n                (item.name ? '&lt;span class=\"name\"&gt;' + escape(item.name) + '&lt;/span&gt;' : '') +\n                (item.email ? '&lt;span class=\"email\"&gt;' + escape(item.email) + '&lt;/span&gt;' : '') +\n            '&lt;/div&gt;';\n        },\n        option: function(item, escape) {\n            var label = item.name || item.email;\n            var caption = item.name ? item.email : null;\n            return '&lt;div&gt;' +\n                '&lt;span class=\"label\"&gt;' + escape(label) + '&lt;/span&gt;' +\n                (caption ? '&lt;span class=\"caption\"&gt;' + escape(caption) + '&lt;/span&gt;' : '') +\n            '&lt;/div&gt;';\n        }\n    },\n    createFilter: function(input) {\n        var match, regex;\n\n        // email@address.com\n        regex = new RegExp('^' + REGEX_EMAIL + '$', 'i');\n        match = input.match(regex);\n        if (match) return !this.options.hasOwnProperty(match[0]);\n\n        // name &lt;email@address.com&gt;\n        regex = new RegExp('^([^&lt;]*)\\&lt;' + REGEX_EMAIL + '\\&gt;$', 'i');\n        match = input.match(regex);\n        if (match) return !this.options.hasOwnProperty(match[2]);\n\n        return false;\n    },\n    create: function(input) {\n        if ((new RegExp('^' + REGEX_EMAIL + '$', 'i')).test(input)) {\n            return {email: input};\n        }\n        var match = input.match(new RegExp('^([^&lt;]*)\\&lt;' + REGEX_EMAIL + '\\&gt;$', 'i'));\n        if (match) {\n            return {\n                email : match[2],\n                name  : $.trim(match[1])\n            };\n        }\n        alert('Invalid email address.');\n        return false;\n    }\n});\n</code></pre>\n\n<p>How can I select from a full table? For example, I have a table named \"User\". How can I select from <code>User.all</code>, not just pre-set options?</p>\n\n<p><strong>schema.rb</strong>:</p>\n\n<pre><code>create_table \"things\", force: true do |t|\n  t.string   \"name\"\n  t.string   \"email\"\n  #...\nend\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1422473318, "post_id": 28200649, "comment_id": 44767690, "body": "Can&#39;t be explained better ;)"}, {"owner": {"reputation": 593, "user_id": 2149484, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/126967d404cb97f262ae31fc3a2b2cea?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2149484/mike"}, "edited": false, "score": 0, "creation_date": 1422474574, "post_id": 28200649, "comment_id": 44768340, "body": "Thank you.  I have no doubt this is what is happening and your alternative solution will work so I will follow that suggestion. Having said that, I am a little unclear how <code>foo</code> and <code>default[&#39;test&#39;][&#39;webservice&#39;][&#39;https&#39;][&#39;keyManagerPwd&#39;]</code> are equivalent. I see foo as a string, but the later as a hash itself."}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1422474831, "post_id": 28200649, "comment_id": 44768476, "body": "<code>foo</code> and <code>default[&#39;test&#39;][&#39;webservice&#39;][&#39;https&#39;]</code> are equivalent. Both can be of any type. You can put anything into a hash in ruby."}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 1, "creation_date": 1422474946, "post_id": 28200649, "comment_id": 44768539, "body": "(to be clear, what Chef uses here is AFAIK not a plain old ruby hash, but something that looks like a hash and feels like a hash, but is called a <a href=\"http://www.rubydoc.info/gems/chef/Mash\" rel=\"nofollow noreferrer\">mash</a> - but I suggest that you ignore this fact for the moment)"}, {"owner": {"reputation": 593, "user_id": 2149484, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/126967d404cb97f262ae31fc3a2b2cea?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2149484/mike"}, "edited": false, "score": 0, "creation_date": 1422475527, "post_id": 28200649, "comment_id": 44768887, "body": "Thanks for your help and explanation!"}, {"owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "edited": false, "score": 0, "creation_date": 1422476067, "post_id": 28200649, "comment_id": 44769212, "body": "You&#39;re welcome. If it works, feel free to accept the answer (by clicking on the \u2713)"}], "tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": false, "score": 10, "last_activity_date": 1422473383, "last_edit_date": 1422473383, "creation_date": 1422472882, "answer_id": 28200649, "question_id": 28200483, "link": "https://stackoverflow.com/questions/28200483/chef-error-on-attributes-string-not-matched/28200649#28200649", "title": "Chef error on attributes- string not matched", "body": "<p>Simple answer: You cannot do this. That's not a Chef problem, nor a ruby problem - it's a general problem of like most programming languages.</p>\n\n<p>Let's use <code>foo</code> as a variable instead of the lengthy <code>default['test']['webservice']['https']['keyManagerPwd']</code>.</p>\n\n<p>What you effectively do is</p>\n\n<pre><code>1: foo = \"password\"\n2: foo['type'] = \"encrypted\"\n</code></pre>\n\n<p>In line 1, <code>foo</code> is a string. In line 2, it is treated as hash (called array in some other languages). The second line automatically overwrites your <code>foo = \"password\"</code> assignment. It's effectively the same as</p>\n\n<pre><code>1: foo = \"password\"\n2: foo = {}\n3: foo['type'] = \"encrypted\"\n</code></pre>\n\n<p>The alternative would be to use</p>\n\n<pre><code>foo['something'] = \"password\"\nfoo['type'] = \"encrypted\"\n</code></pre>\n\n<p>Or translated to your code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>default['test']['webservice']['https']['keyManagerPwd']['something'] = 'password'\ndefault['test']['webservice']['https']['keyManagerPwd']['type'] = 'encrypted'\n</code></pre>\n\n<p>This should work.</p>\n"}], "owner": {"reputation": 593, "user_id": 2149484, "user_type": "registered", "accept_rate": 18, "profile_image": "https://www.gravatar.com/avatar/126967d404cb97f262ae31fc3a2b2cea?s=128&d=identicon&r=PG", "display_name": "Mike", "link": "https://stackoverflow.com/users/2149484/mike"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2615, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1422473383, "creation_date": 1422472345, "last_edit_date": 1422473304, "question_id": 28200483, "link": "https://stackoverflow.com/questions/28200483/chef-error-on-attributes-string-not-matched", "title": "Chef error on attributes- string not matched", "body": "<p>I cannot seem to get around a chef error that deals with similarly named attributes in my <code>attributes/default.rb</code> file.</p>\n\n<p>I have 2 attributes:</p>\n\n<pre><code>default['test']['webservice']['https']['keyManagerPwd'] = 'password'\n...\n...\ndefault['test']['webservice']['https']['keyManagerPwd']['type'] = 'encrypted'\n</code></pre>\n\n<p>Notice that, up until the last bracket (<code>['type']</code>), the names are identical.</p>\n\n<p>I am referencing these attributes in a template and in a template block in the recipe.  When I go to run it, I receive this error:</p>\n\n<pre><code>==================================================[0m\nI, [2015-01-28T13:36:43.668692 #7920]  INFO -- core-14-2-centos-65: \n[31mRecipe Compile Error\nin /tmp/kitchen/cache/cookbooks/avx/attributes/default.rb[0m\nI, [2015-01-28T13:36:43.669192 #7920]  INFO -- core-14-2-centos-65: \n=================================================================[0m\nI, [2015-01-28T13:36:43.669192 #7920]  INFO -- core-14-2-centos-65: \nI, [2015-01-28T13:36:43.669692 #7920]  INFO -- core-14-2-centos-65:    \n[0mIndexError[0m\nI, [2015-01-28T13:36:43.669692 #7920]  INFO -- core-14-2-centos-65: -------\n--[0m\nI, [2015-01-28T13:36:43.669692 #7920]  INFO -- core-14-2-centos-65: string not matched[0m\nI, [2015-01-28T13:36:43.670192 #7920]  INFO -- core-14-2-centos-65: \nI, [2015-01-28T13:36:43.670192 #7920]  INFO -- core-14-2-centos-65:\n[0mCookbook Trace:[0m\nI, [2015-01-28T13:36:43.670692 #7920]  INFO -- core-14-2-centos-65: --------[0m\nI, [2015-01-28T13:46:05.101875 #8332]  INFO -- core-14-2-centos-65:     \n[0m113&gt;&gt; default['webservice']['https']['keyManagerPwd']['type'] = \n'encrypted'\n</code></pre>\n\n<p>It seems as if Chef cannot distinguish between 2 attributes when the only differentiation is the ending. \nIf I modify the same attributes by placing some unique text at the front of the name, there is not issue with the recipe at all:</p>\n\n<pre><code>  default['test']['1']['webservice']['https']['keyManagerPwd'] = 'password'\n  ...\n  ...\n  default['test']['2']['webservice']['https']['keyManagerPwd']['type'] = 'encrypted'\n</code></pre>\n\n<p>By putting the <code>['1']</code> and <code>['2']</code> there, it solves the problem.</p>\n\n<p>I am fairly new to Chef so I'm thinking its just something simple I'm overlooking. Does anyone have any ideas or suggestions?  Thanks.</p>\n"}, {"tags": ["ruby", "rspec", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 27405, "user_id": 2112633, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/c9bf1e5beda923bfc9abb2271c5838e5?s=128&d=identicon&r=PG", "display_name": "usha", "link": "https://stackoverflow.com/users/2112633/usha"}, "is_accepted": true, "score": 1, "last_activity_date": 1422472529, "creation_date": 1422472529, "answer_id": 28200534, "question_id": 28200417, "link": "https://stackoverflow.com/questions/28200417/how-to-select-repeated-element-with-capybara/28200534#28200534", "title": "How to select repeated element with Capybara", "body": "<p>you can do</p>\n\n<pre><code>find(\".element:nth-of-type(1)\")\nfind(\".element:nth-of-type(2)\")\nfind(\".element:nth-of-type(3)\")\n</code></pre>\n\n<p>or</p>\n\n<pre><code>all(\".element\")[0]\nall(\".element\")[1]\nall(\".element\")[3]\n</code></pre>\n"}], "owner": {"reputation": 2109, "user_id": 1292818, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/e426389cb417442835bb1d62273fb53d?s=128&d=identicon&r=PG", "display_name": "cassioscabral", "link": "https://stackoverflow.com/users/1292818/cassioscabral"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 28200534, "answer_count": 1, "score": 0, "last_activity_date": 1422472529, "creation_date": 1422472105, "question_id": 28200417, "link": "https://stackoverflow.com/questions/28200417/how-to-select-repeated-element-with-capybara", "title": "How to select repeated element with Capybara", "body": "<p>I know how to get the first element, but how can I get the second or third element found with that class x ?</p>\n\n<p>Only way is by choosing from an Array like below? If so, starts at zero or one ?</p>\n\n<p><code>find(\".element\")[1]</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "controllers"], "comments": [{"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422472244, "post_id": 28200325, "comment_id": 44767054, "body": "So basically you have successfully established the has many relationship between user &amp; phone_book right?  You just need to list those phone_book information in your users profile page (technically users_controllers profile/show action ). is it ?"}, {"owner": {"reputation": 257, "user_id": 3261033, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100002410948448/picture?type=large", "display_name": "pranav prashant", "link": "https://stackoverflow.com/users/3261033/pranav-prashant"}, "reply_to_user": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422472605, "post_id": 28200325, "comment_id": 44767252, "body": "Its not just about displaying the contacts to the user. The user should be able to perform CRUD operations on his personal contacts. Pleas bare with me, I&#39;m new to Rails"}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422472893, "post_id": 28200325, "comment_id": 44767425, "body": "Yes Understood now. Please check below answer.  Putting the phone-books resource inside the users will do the trick :)"}], "answers": [{"comments": [{"owner": {"reputation": 257, "user_id": 3261033, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100002410948448/picture?type=large", "display_name": "pranav prashant", "link": "https://stackoverflow.com/users/3261033/pranav-prashant"}, "edited": false, "score": 0, "creation_date": 1422473715, "post_id": 28200578, "comment_id": 44767915, "body": "No route matches &quot;/users/10/contacts/2&quot; with {:method=&gt;:get}. I have contacts with id=2  and users with id =10 stored in the database. contacts is analogous to phone_books"}, {"owner": {"reputation": 6363, "user_id": 256375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3fe8ae238c14d716a9fc16734a70765b?s=128&d=identicon&r=PG", "display_name": "Domon", "link": "https://stackoverflow.com/users/256375/domon"}, "reply_to_user": {"reputation": 257, "user_id": 3261033, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100002410948448/picture?type=large", "display_name": "pranav prashant", "link": "https://stackoverflow.com/users/3261033/pranav-prashant"}, "edited": false, "score": 0, "creation_date": 1422489612, "post_id": 28200578, "comment_id": 44775294, "body": "@pranavprashant On what page does the error happen? Did you try restarting the Rails server? Can you try running the <code>rake routes</code> command and update the result in the question?"}], "tags": [], "owner": {"reputation": 6363, "user_id": 256375, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3fe8ae238c14d716a9fc16734a70765b?s=128&d=identicon&r=PG", "display_name": "Domon", "link": "https://stackoverflow.com/users/256375/domon"}, "is_accepted": false, "score": 1, "last_activity_date": 1422473004, "last_edit_date": 1422473004, "creation_date": 1422472681, "answer_id": 28200578, "question_id": 28200325, "link": "https://stackoverflow.com/questions/28200325/linking-two-controllers-in-rails/28200578#28200578", "title": "Linking two controllers in Rails", "body": "<p>You might want to place the page in <code>/users/:user_id/phone_books/:id</code>.</p>\n\n<p>To achieve that,</p>\n\n<p>You have to configure the paths in <code>config/routes.rb</code>:</p>\n\n<pre><code>resources :users do\n  resources :phone_books\nend\n</code></pre>\n\n<p>And in <code>app/controllers/phone_books_controller.rb</code>, find the user and their address book:</p>\n\n<pre><code>class PhoneBooksController &lt; ApplicationController\n  before_action :find_user\n\n  def show\n    @address_book = @user.address_books.find(params[:id])\n  end\n\n  private\n\n  def find_user\n    @user = User.find(params[:user_id])\n  end\nend\n</code></pre>\n\n<p>For more information about nested resources, please see the <a href=\"http://guides.rubyonrails.org/getting_started.html#adding-a-route-for-comments\" rel=\"nofollow\">Getting Started with Rails</a> guide.</p>\n"}, {"comments": [{"owner": {"reputation": 257, "user_id": 3261033, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100002410948448/picture?type=large", "display_name": "pranav prashant", "link": "https://stackoverflow.com/users/3261033/pranav-prashant"}, "edited": false, "score": 0, "creation_date": 1422511306, "post_id": 28203752, "comment_id": 44780782, "body": "Thanks for sharing your concept. Its working out for my project. Can&#39;t up-vote your answer due to my low reputation."}], "tags": [], "owner": {"reputation": 81, "user_id": 4499488, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XU08yVjBssk/AAAAAAAAAAI/AAAAAAAAAbg/yuKEAaTpcC4/photo.jpg?sz=128", "display_name": "Federico Toscano", "link": "https://stackoverflow.com/users/4499488/federico-toscano"}, "is_accepted": true, "score": 1, "last_activity_date": 1422484485, "creation_date": 1422484485, "answer_id": 28203752, "question_id": 28200325, "link": "https://stackoverflow.com/questions/28200325/linking-two-controllers-in-rails/28203752#28203752", "title": "Linking two controllers in Rails", "body": "<p>Let's start with the models. You say that each <code>User</code> has <strong>only one</strong> <code>PhoneBook</code> so I would say that the right models should rather be:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    has_one :phone_book\nend\n\nclass PhoneBook &lt; ActiveRecord::Base\n    belongs_to :user\nend\n</code></pre>\n\n<p>Now, about the controllers.\nWhen you have a signed in <code>User</code> you will eventually have a \"session thing\" going on.\nLet's say you're using <a href=\"https://github.com/plataformatec/devise\" rel=\"nofollow\">devise</a>, then you will have a variable <code>current_user</code> that references the logged in user. So the <code>PhoneBooksController</code> will be something like:</p>\n\n<pre><code>class PhoneBooksController &lt; ApplicationController    \n  def index\n    @phone_book = current_user.phone_book\n  end   \nend\n</code></pre>\n\n<p>Of course if your users can have more than one <code>PhoneBook</code> we go back to the <code>has_many</code> association:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    has_many :phone_book\nend\n\nclass PhoneBook &lt; ActiveRecord::Base\n    belongs_to :user\nend\n</code></pre>\n\n<p>and the controller becomes:</p>\n\n<pre><code>class PhoneBooksController &lt; ApplicationController    \n  def index\n    @phone_books = current_user.phone_books\n  end\n  def show\n    @phone_book = PhoneBook.find_by_id(params[:id])\n  end\nend\n</code></pre>\n\n<p>At last, if you want these phone books to be publicly readable I suggest you stick with a <a href=\"http://en.wikipedia.org/wiki/Representational_state_transfer\" rel=\"nofollow\">REST</a> kind of URI </p>\n\n<pre><code>/phone_books/:id &lt;-- good\n/users/:id/phone_books/:phone_book_id &lt;-- too complex\n</code></pre>\n\n<p>Hope I could help</p>\n"}], "owner": {"reputation": 257, "user_id": 3261033, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/100002410948448/picture?type=large", "display_name": "pranav prashant", "link": "https://stackoverflow.com/users/3261033/pranav-prashant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 689, "favorite_count": 1, "accepted_answer_id": 28203752, "answer_count": 2, "score": 2, "last_activity_date": 1422484485, "creation_date": 1422471803, "question_id": 28200325, "link": "https://stackoverflow.com/questions/28200325/linking-two-controllers-in-rails", "title": "Linking two controllers in Rails", "body": "<p>I have a signed in user profile and each profile has its own <strong>phone-book</strong> that no other user can access. The question is how should i implement it. Considering <strong>User</strong> as one controller and <strong>phone-book</strong> as another i'm not able to establish a relation between the two for a specific user login.</p>\n\n<p>What should be my approach?</p>\n\n<p>I have a sparate model for User and separate model for phone-book and have established a relation between them using <strong>has_many</strong> and <strong>belongs_to</strong> macro.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "rake-task", "rakefile"], "answers": [{"tags": [], "owner": {"reputation": 23596, "user_id": 16035, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/deaeef05e3709c24cfcc96b45a9420a9?s=128&d=identicon&r=PG", "display_name": "workmad3", "link": "https://stackoverflow.com/users/16035/workmad3"}, "is_accepted": true, "score": 1, "last_activity_date": 1422469850, "creation_date": 1422469850, "answer_id": 28199747, "question_id": 28199598, "link": "https://stackoverflow.com/questions/28199598/not-setting-arguments-properly-in-rails-tasks/28199747#28199747", "title": "Not setting arguments properly in rails tasks?", "body": "<p>You pass arguments to a task by enclosing them in [] directly after the task name.</p>\n\n<p>e.g.</p>\n\n<pre><code>rake create_api_key[xaaron_test]\n</code></pre>\n\n<p>If you use zsh, you need to escape the opening [</p>\n\n<p>e.g.</p>\n\n<pre><code>rake create_api_key\\[xaaron_test]\n</code></pre>\n"}], "owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 24, "favorite_count": 0, "accepted_answer_id": 28199747, "answer_count": 1, "score": 0, "last_activity_date": 1422469850, "creation_date": 1422469313, "question_id": 28199598, "link": "https://stackoverflow.com/questions/28199598/not-setting-arguments-properly-in-rails-tasks", "title": "Not setting arguments properly in rails tasks?", "body": "<p>I am curious as to why my <code>args</code> variable is always coming back as <code>{}</code> in the following task:</p>\n\n<pre><code>desc \"Create an Api Key assuming one doesn't exist.\"\ntask :create_api_key, [:name] =&gt; :environment do | t, args |\n  if !ApiKey.find_by_application_name(args[:name])\n    binding.pry\n    if ApiKey.new(:application_name =&gt; args[:name], :api_key =&gt; SecureRandom.hex(32)).save!\n      puts \"Your key is: \" + ApiKey.find_by_application_name(args[:name]).api_key\n    else\n      puts \"Could not create the api key, you might be missing an argument: Application Name.\"\n    end\n  else\n    puts \"This application already contains an api key.\"\n  end\nend\n</code></pre>\n\n<p>The following is a run of the task (<strong>Note the <code>binding.pry</code></strong>):</p>\n\n<pre><code>$ bin/rake create_api_key \"xaaron_test\"\n\nFrom: /Users/Adam/Documents/Rails-Projects/BlackBird/lib/tasks/create_api_key.rake @ line 4 :\n\n    1: desc \"Create an Api Key assuming one doesn't exist.\"\n    2: task :create_api_key, [:name] =&gt; :environment do | t, args |\n    3:   if !ApiKey.find_by_application_name(args[:name])\n =&gt; 4:     binding.pry\n    5:     if ApiKey.new(:application_name =&gt; args[:name], :api_key =&gt; SecureRandom.hex(32)).save!\n    6:       puts \"Your key is: \" + ApiKey.find_by_application_name(args[:name]).api_key\n    7:     else\n    8:       puts \"Could not create the api key, you might be missing an argument: Application Name.\"\n    9:     end\n\n[1] pry(main)&gt; args\n=&gt; {}\n</code></pre>\n\n<p>Even if I do <code>bin/rake create_api_key xaaron_test</code> I get the same issue. What is going on? is there some small mistake some where I forgot about?</p>\n\n<h1>Update</h1>\n\n<p>I also spit out <code>t</code> to see what was in there:</p>\n\n<pre><code>pry(main)&gt; t\n=&gt; &lt;Rake::Task create_api_key =&gt; [environment]&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "answers": [{"comments": [{"owner": {"reputation": 691, "user_id": 1118109, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4033d692e173feb54f58c79e76530534?s=128&d=identicon&r=PG", "display_name": "Hawkeye001", "link": "https://stackoverflow.com/users/1118109/hawkeye001"}, "edited": false, "score": 0, "creation_date": 1422471924, "post_id": 28199694, "comment_id": 44766866, "body": "There isn&#39;t neccessarily a relationship between the user and the institute, and a file can belong only either to a User OR to an Institute. I CAN do it the way you mention (i.e. having separate user_id and institute_id). However, I want to avoid that if possible."}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 691, "user_id": 1118109, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4033d692e173feb54f58c79e76530534?s=128&d=identicon&r=PG", "display_name": "Hawkeye001", "link": "https://stackoverflow.com/users/1118109/hawkeye001"}, "edited": false, "score": 0, "creation_date": 1422472093, "post_id": 28199694, "comment_id": 44766957, "body": "This is the rails way you should follow @Hawkeye001 . In this way, you can call the objects directly through association. By Writing raw queries this goal can be  achieved but that&#39;s again not the standard way. :)"}, {"owner": {"reputation": 691, "user_id": 1118109, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4033d692e173feb54f58c79e76530534?s=128&d=identicon&r=PG", "display_name": "Hawkeye001", "link": "https://stackoverflow.com/users/1118109/hawkeye001"}, "edited": false, "score": 0, "creation_date": 1422584533, "post_id": 28199694, "comment_id": 44819498, "body": "Ajay, I figured the right way to do it was to use polymorphism (see my answer for details). The method you mentioned while it would give the desired end results, doesn&#39;t really seem like the correct way to do it since if i had 10 models, all who had files, your way would mean i would need 10 columns in my files table to support that, which doesn&#39;t really seem right. Using polymorphism, only an owner id and type are required, and through that i associated the models."}], "tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1422469647, "creation_date": 1422469647, "answer_id": 28199694, "question_id": 28199217, "link": "https://stackoverflow.com/questions/28199217/using-rails-associations-when-using-multiple-columns-to-establish-the-relationsh/28199694#28199694", "title": "Using rails associations when using multiple columns to establish the relationship (i.e. model_name and model_id)", "body": "<p>If I understand your question correctly, you want to associate all 3 models &amp; to User &amp; institute are connected to file model by has-many association :</p>\n\n<pre><code>   class User\n      has_many :files\n    end\n\n    class Institute\n      has_many :files\n    end\n\n    class File\n      belongs_to :institute\n      belongs_to :user\n    end\n\n\n    files table should hold columns like: \n    name:string user_id:integer institute_id:integer \n\n    Here you can fetch files as : \n\n    User.first.files \n    Institute.first.files \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 691, "user_id": 1118109, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4033d692e173feb54f58c79e76530534?s=128&d=identicon&r=PG", "display_name": "Hawkeye001", "link": "https://stackoverflow.com/users/1118109/hawkeye001"}, "is_accepted": true, "score": 0, "last_activity_date": 1422584272, "creation_date": 1422584272, "answer_id": 28228213, "question_id": 28199217, "link": "https://stackoverflow.com/questions/28199217/using-rails-associations-when-using-multiple-columns-to-establish-the-relationsh/28228213#28228213", "title": "Using rails associations when using multiple columns to establish the relationship (i.e. model_name and model_id)", "body": "<p>I figured out the correct way to do it was to use polymorphism:</p>\n\n<p>Migration:</p>\n\n<pre><code>class CreateFiles\n    def change\n        create_table :files do |t|\n            t.references :owner, :polymorphic =&gt; true, :index =&gt; true, :null =&gt; false\n        end\n    end\nend\n</code></pre>\n\n<p>Models:</p>\n\n<pre><code>class File\n    #  owner_id            :integer          not null\n    #  owner_type          :string(255)      not null\n    belongs_to :owner, :polymorphic =&gt; true\nend\n\nclass User\n    has_many :files, :as =&gt; :owner, :dependent =&gt; :destroy\nend\n\nclass Institute\n    has_many :files, :as =&gt; :owner, :dependent =&gt; :destroy\nend\n</code></pre>\n\n<p>This allows me to get all the files associated with any of the models, using the standard: model.files.</p>\n"}], "owner": {"reputation": 691, "user_id": 1118109, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/4033d692e173feb54f58c79e76530534?s=128&d=identicon&r=PG", "display_name": "Hawkeye001", "link": "https://stackoverflow.com/users/1118109/hawkeye001"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 28228213, "answer_count": 2, "score": 0, "last_activity_date": 1422584272, "creation_date": 1422468099, "question_id": 28199217, "link": "https://stackoverflow.com/questions/28199217/using-rails-associations-when-using-multiple-columns-to-establish-the-relationsh", "title": "Using rails associations when using multiple columns to establish the relationship (i.e. model_name and model_id)", "body": "<p>I have three models, User, Institute, and File. The idea is that a user or an institute can both have many unique files. However, I am not sure how to set up the associations between them correctly. What I want to be able to happen is to have @user.files and @institute.files return the list of files associated with that user/institute , i.e.:</p>\n\n<pre><code>@user.files = File.where(\"belongs_to_id = ? AND belongs_to_class = ?\", @user.id, \"User\")\n</code></pre>\n\n<p>I don't want to add a references to user and institute (although that would work), so if I ever want to add a new model that can also have multiple files, I don't have to modify that table. I could use my own method to return the files, but I was wondering if there was a way to do it using associations directly?</p>\n\n<p>Thanks,</p>\n\n<pre><code>class File\n    attr_accessible :belongs_to_class, :belongs_to_id\n    belongs_to :institute\n    belongs_to :user\nend\n\nclass User\n    has_many :files\nend\n\nclass Institute\n    has_many :files\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 3, "creation_date": 1422468592, "post_id": 28199163, "comment_id": 44765027, "body": "Totally unrelated, but note that stuff like <code>commands = params[:contact][:notification_commands].collect { |c| c[:id] }</code> can be expressed as <code>commands = params[:contact][:notification_commands].collect(&amp;:id)</code>."}, {"owner": {"reputation": 1469, "user_id": 317036, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/56018242cf6db3b72520890b8541a5dd?s=128&d=identicon&r=PG", "display_name": "solefald", "link": "https://stackoverflow.com/users/317036/solefald"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1422468731, "post_id": 28199163, "comment_id": 44765111, "body": "@DaveNewton: Thanks, Dave. Really appreciate the pointer! I always look for the ways to make things cleaner and this definitely helps"}, {"owner": {"reputation": 1469, "user_id": 317036, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/56018242cf6db3b72520890b8541a5dd?s=128&d=identicon&r=PG", "display_name": "solefald", "link": "https://stackoverflow.com/users/317036/solefald"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1422488211, "post_id": 28199163, "comment_id": 44774828, "body": "@DaveNewton: That does not work, btw. I get <code>#&lt;NoMethodError: undefined method &#39;id&#39; for #&lt;ActionController::Parameters:0x007f9b0054b558&gt;&gt;</code>. Thats why I had to use <code>c[:id]</code> vs <code>c.id</code> in the first place."}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1422494785, "post_id": 28199163, "comment_id": 44776703, "body": "Oh, right, it&#39;s a hash - sorry!"}], "owner": {"reputation": 1469, "user_id": 317036, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/56018242cf6db3b72520890b8541a5dd?s=128&d=identicon&r=PG", "display_name": "solefald", "link": "https://stackoverflow.com/users/317036/solefald"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 89, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422468531, "creation_date": 1422467919, "last_edit_date": 1422468531, "question_id": 28199163, "link": "https://stackoverflow.com/questions/28199163/efficient-way-to-manage-object-associations", "title": "Efficient way to manage object associations", "body": "<p>I am working on a Rails app that has lots of data in many different tables related to each other via <code>:has_many through</code> associations. The problem here is that these associations are not static, like your typical Post - User, Assembly - Part, Book - Author associations and they will change all the time. The objective is to find the most efficient way to manage associations between <em>existing</em> objects in the database. </p>\n\n<p>As I've recently realized, Rails does not automatically create associations between existing objects and nested forms are only usable when associations already exist. </p>\n\n<p>For example, I have a form that loads a <code>Contact</code> from contacts table. Same form has a <code>Command</code> multi-select populated from commands table. I want to associate multiple commands with this <code>Contact</code>, so i select few commands in my multi-select, which adds them to an array called <code>notification_commands</code>. Since Rails does not do automatic association, I have to do something like this:</p>\n\n<pre><code>contact = Contact.find_by_id params[:id]\ncommands = params[:contact][:notification_commands].collect { |c| c[:id] }\ncontact.commands &lt;&lt; Command.find(commands)\n</code></pre>\n\n<p>This works OK... unless, lets say, I want to associate another command with this contact. In that case existing association records end up getting duplicated and new one added. Ok, I can do unique validations in my model... or I can just use brute force, destroy all associations and re-establish them again. </p>\n\n<pre><code>contact = Contact.find_by_id params[:id]\ncommands = params[:contact][:notification_commands].collect { |c| c[:id] }\ncontact.commands.destroy_all\ncontact.commands &lt;&lt; Command.find(commands)\n</code></pre>\n\n<p>Ok. Thats not really all that elegant...</p>\n\n<p>Model validations sounds like a good option here and I will put it in as an extra safety measure, but why make the application do extra work? Duplicate records should be discarded way before they get to the model. </p>\n\n<p>Another possibility (that I know of) is to basically compare arrays in my controller and see what the difference is between data in the db and what's being posted from the form. </p>\n\n<p>Now, my views are AngularJS, and I am yet to figure out how to make Angular use Rails <code>_destroy</code> method. If that's not possible, I would have to do another array comparison, now in reverse, to see what associations need to be removed. Again, not very elegant. </p>\n\n<p>So, while the brute force method of destroying all associations and re-establishing them all again works and requires the least amount of code, I don't feel that it is good practice.</p>\n\n<p>Any suggestions on what is the more efficient and cleanest way to manage associations between multiple existing objects?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ruby-on-rails-4", "jbuilder"], "answers": [{"comments": [{"owner": {"reputation": 19199, "user_id": 243999, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HHOJa.jpg?s=128&g=1", "display_name": "Donal Rafferty", "link": "https://stackoverflow.com/users/243999/donal-rafferty"}, "edited": false, "score": 0, "creation_date": 1422468294, "post_id": 28199055, "comment_id": 44764872, "body": "That appears to have worked, its giving me what looks like a database error now instead :) I also tried doing it the following way - json.array! &#39;tips&#39;, @tips, partial: &#39;tip&#39;, as: :tip which didn&#39;t work either. Is using the collection better than trying to create it using the .array! function?"}, {"owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "reply_to_user": {"reputation": 19199, "user_id": 243999, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HHOJa.jpg?s=128&g=1", "display_name": "Donal Rafferty", "link": "https://stackoverflow.com/users/243999/donal-rafferty"}, "edited": false, "score": 1, "creation_date": 1422469777, "post_id": 28199055, "comment_id": 44765728, "body": "I believe it&#39;s a matter of preference."}], "tags": [], "owner": {"reputation": 9806, "user_id": 382982, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/9ZaxF.jpg?s=128&g=1", "display_name": "pdoherty926", "link": "https://stackoverflow.com/users/382982/pdoherty926"}, "is_accepted": true, "score": 2, "last_activity_date": 1422467583, "creation_date": 1422467583, "answer_id": 28199055, "question_id": 28198792, "link": "https://stackoverflow.com/questions/28198792/using-a-referenced-model-object-in-jbuilder-ruby-on-rails/28199055#28199055", "title": "Using a referenced model object in JBuilder Ruby on Rails", "body": "<p>The 500 is probably because you don't have <code>@tip</code> defined in <code>workers_controller#show</code>.</p>\n\n<p>In order to successfully render your existing objects, you'd need to do something like:</p>\n\n<pre><code>json.worker do\n  json.partial! 'worker', worker: @worker\n  json.tips do\n    json.partial! 'tip', collection: @tips, as: :tip\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 19199, "user_id": 243999, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/HHOJa.jpg?s=128&g=1", "display_name": "Donal Rafferty", "link": "https://stackoverflow.com/users/243999/donal-rafferty"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 287, "favorite_count": 0, "accepted_answer_id": 28199055, "answer_count": 1, "score": 1, "last_activity_date": 1422467583, "creation_date": 1422466696, "question_id": 28198792, "link": "https://stackoverflow.com/questions/28198792/using-a-referenced-model-object-in-jbuilder-ruby-on-rails", "title": "Using a referenced model object in JBuilder Ruby on Rails", "body": "<p>I am trying to learn Ruby on Rails and have come stuck in trying to get a slightly more complex JSON response than from the tutorials I have been following.</p>\n\n<p>I have two models as follows:</p>\n\n<pre><code>class Worker &lt; ActiveRecord::Base\n  has_many :tips\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class Tip &lt; ActiveRecord::Base\n  belongs_to :worker\nend\n</code></pre>\n\n<p>So each Worker has many tips.</p>\n\n<p>My controllers are as follows:</p>\n\n<pre><code>class WorkersController &lt; ApplicationController\n\n  skip_before_filter :verify_authenticity_token\n\n  def index\n    @workers= Worker.all\n  end\n\n  def show\n    @worker= Worker.find(params[:id])\n    @tips = @worker.tips\n  end\n\nend\n</code></pre>\n\n<p>and</p>\n\n<pre><code>class TipsController &lt; ApplicationController\n\n  skip_before_filter :verify_authenticity_token\n\n  def index\n    @tips = Tip.all\n  end\n\n  def show\n    @tip = Tip.find(params[:id])\n  end\n\nend\n</code></pre>\n\n<p>So as you can see in my WorkersController I assign all the tips from a Worker to the @tips variable.</p>\n\n<p>Now I want to get this information returned in JSON format and I am using partials to try and achieve this.</p>\n\n<p>Here is the Worker partial:</p>\n\n<pre><code>json.(worker, :id, :name, :location, :image)\n</code></pre>\n\n<p>And here is the tips partial:</p>\n\n<pre><code>json.(tip, :id, :title, :summary, :rating)\n</code></pre>\n\n<p>Both are under the views/layouts/workers directory</p>\n\n<p>And here is my JSON that I actually want returned (it is in a file called show.json.jbuilder:</p>\n\n<pre><code>json.worker do\n  json.partial! 'worker', worker: @worker\n  json.tips do\n    json.partial! 'tip', tip: @tip\n  end\nend\n</code></pre>\n\n<p>However this gives me a 500 internal server error.</p>\n\n<p>If I leave it like this:</p>\n\n<pre><code>json.themepark do\n  json.partial! 'themepark', themepark: @themepark\nend\n</code></pre>\n\n<p>I get the JSON but of course I am missing the data I need. I'm not sure what steps to take next to try to figure out what I am doing wrong so wondering if anyone can help me out with my mistake?</p>\n"}, {"tags": ["ruby", "loops"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 4368267, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100005836570804/picture?type=large", "display_name": "Dr&#233; Ellis", "link": "https://stackoverflow.com/users/4368267/dr%c3%a9-ellis"}, "edited": false, "score": 0, "creation_date": 1422466789, "post_id": 28198772, "comment_id": 44763956, "body": "Thanks, I would not have thought of using until&#39;s"}, {"owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "reply_to_user": {"reputation": 13, "user_id": 4368267, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100005836570804/picture?type=large", "display_name": "Dr&#233; Ellis", "link": "https://stackoverflow.com/users/4368267/dr%c3%a9-ellis"}, "edited": false, "score": 0, "creation_date": 1422467115, "post_id": 28198772, "comment_id": 44764170, "body": "No problem! I&#39;m sure you&#39;ll run into the design pattern in the future. Plus when I first learned ruby using <code>until</code> and <code>unless</code> was a little counterintuitive, but after writing ruby code for a while it&#39;ll become second nature."}], "tags": [], "owner": {"reputation": 2623, "user_id": 625354, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/xc5hf.jpg?s=128&g=1", "display_name": "Dbz", "link": "https://stackoverflow.com/users/625354/dbz"}, "is_accepted": false, "score": 0, "last_activity_date": 1422466640, "creation_date": 1422466640, "answer_id": 28198772, "question_id": 28198615, "link": "https://stackoverflow.com/questions/28198615/ruby-rerun-my-script/28198772#28198772", "title": "Ruby Rerun my script", "body": "<p>The most common way of doing this is running everything inside of a loop. I am assuming you would like to re-run the code every time. I also refactored for you into a switch statement.</p>\n\n<pre><code>command = gets.chomp.downcase\nuntil command == \"no\"\n    case command\n    when command[0]\n        puts Time.now\n    when command[1]\n        exit\n    when command[2]\n        system 'cls'\n        puts(\"Hello \" + UserName)\n    when command[3]\n        puts commands\n    end\nend\n</code></pre>\n\n<p>If you do not want to re-run the code every time, I would put the code you would like to re-run in a function.</p>\n\n<pre><code>def repeat\n    command = gets.chomp.downcase\n    case command\n    when command[0]\n        puts Time.now\n    when command[1]\n        exit\n    when command[2]\n        system 'cls'\n        puts(\"Hello \" + UserName)\n    when command[3]\n        puts commands\n    when \"no\"\n        repeat\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1422467621, "creation_date": 1422467621, "answer_id": 28199067, "question_id": 28198615, "link": "https://stackoverflow.com/questions/28198615/ruby-rerun-my-script/28199067#28199067", "title": "Ruby Rerun my script", "body": "<p>See, you can put the Response in the while loop and keep it continuing it till the value of Response variable is yes. </p>\n\n<pre><code>require './codes/AlName.rb'\nrequire './codes/UserName.rb'\n\nsystem 'cls'\n\nResponse = 'yes'\ncommands = %w(time done chat help)\n\n while(Response != 'No'){\n  command = gets.chomp\n\n  puts Time.now if commands.include?('time')\n  exit if commands.include?('done')\n  puts commands if commands.include?('help')\n\n  if commands.include?('chat')\n    system('cls')\n    puts \"Hello #{UserName}\" #take this as input\n  end\n\n  sleep 10 \n  Response = get.chomp\n  exit if Response == 'no'\n }\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 4368267, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/100005836570804/picture?type=large", "display_name": "Dr&#233; Ellis", "link": "https://stackoverflow.com/users/4368267/dr%c3%a9-ellis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 555, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1422467621, "creation_date": 1422466148, "last_edit_date": 1422466598, "question_id": 28198615, "link": "https://stackoverflow.com/questions/28198615/ruby-rerun-my-script", "title": "Ruby Rerun my script", "body": "<p>I want my ruby code to rerun my code if the user asks it. To do this is I provided a question at the end asking if the user wants to continue it. I want it so that if gets.chomp() = yes it reruns the program.</p>\n\n<p>I was thinking of making it a loop but am unsure of how to go with this approach either.</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>require './codes/AlName.rb'\nrequire './codes/UserName.rb'\n\nsystem 'cls'\n\n\n\n    puts(\"What do you want me to do?\")\n    command = gets.chomp()\n\n    commands = [\n        \"time\",\n        \"done\",\n        \"chat\",\n        \"help\",\n    ]\n\n    #display time (Time.now)\n    if command == commands[0]\n        puts(Time.now)\n    end \n\n    if command == commands[1]\n        exit\n    end\n\n    if command == commands[3]\n        puts(commands)\n    end\n\n\n    #chat\n    if command == commands[2]\n        system 'cls'\n        puts(\"Hello \" + UserName)\n    end\n\n    #pauses system\n    sleep 10\n    puts(\"Do you want to continue?\")\n    Response = get.chomp()\n    if Response == \"yes\"\n        (rerun program here)\n    end\n\n    if Response == \"no\"\n        exit\n    end\n</code></pre>\n\n<p>Thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "module", "helper"], "comments": [{"owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 2, "creation_date": 1422465602, "post_id": 28198401, "comment_id": 44763254, "body": "Do not use helpers in your models, this is not what they are for. Use concern instead."}, {"owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "reply_to_user": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "edited": false, "score": 0, "creation_date": 1422465940, "post_id": 28198401, "comment_id": 44763436, "body": "@BroiSatse True.. and correct."}], "answers": [{"tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 7, "last_activity_date": 1422465924, "last_edit_date": 1422465924, "creation_date": 1422465602, "answer_id": 28198436, "question_id": 28198401, "link": "https://stackoverflow.com/questions/28198401/run-a-helper-method-on-a-model-class-method/28198436#28198436", "title": "Run a helper method on a model class method", "body": "<p>You have to <code>extend</code> the module instead of <code>include</code>.</p>\n\n<pre><code>extend ModelHelper\n</code></pre>\n\n<p><code>include</code> makes the methods available as instance methods of <code>Foo</code>. That means, you can call the method <code>method_i_want_to_use</code> on instances of <code>Foo</code>, not on <code>Foo</code> itself. If you want to call on <code>Foo</code> itself, then use <code>extend</code>.</p>\n\n<pre><code>module ModelHelper\n  def method_i_want_to_use\n    puts \"I want to use this method\"\n  end\nend\n\nclass Foo\n  extend ModelHelper\n\n  def self.bar\n    method_i_want_to_use\n  end\nend\n\nFoo.bar\n# &gt;&gt; I want to use this method\n</code></pre>\n"}], "owner": {"reputation": 894, "user_id": 3638724, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/778a344a5b886e6897657b5ac1f48d1e?s=128&d=identicon&r=PG&f=1", "display_name": "xeroshogun", "link": "https://stackoverflow.com/users/3638724/xeroshogun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1095, "favorite_count": 0, "accepted_answer_id": 28198436, "answer_count": 1, "score": 3, "last_activity_date": 1422465924, "creation_date": 1422465529, "question_id": 28198401, "link": "https://stackoverflow.com/questions/28198401/run-a-helper-method-on-a-model-class-method", "title": "Run a helper method on a model class method", "body": "<p>I created a helper method that I want to run on a model class method and getting a method not found error.</p>\n\n<p>lib/model_helper</p>\n\n<pre><code>module ModelHelper\n  def method_i_want_to_use\n    puts \"I want to use this method\"\n  end\nend\n</code></pre>\n\n<p>model/foo</p>\n\n<pre><code>    class Foo &lt; ActiveRecord::Base\n    include ModelHelper\n    def self.bar\n      method_i_want_to_use\n    end\nend\n</code></pre>\n\n<p>This setup gives me a no method error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal"], "comments": [{"owner": {"reputation": 6016, "user_id": 833179, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/TPGnQ.jpg?s=128&g=1", "display_name": "Mahmoud Khaled", "link": "https://stackoverflow.com/users/833179/mahmoud-khaled"}, "edited": false, "score": 0, "creation_date": 1430586315, "post_id": 28198220, "comment_id": 48128556, "body": "I have the same question, any luck here?"}, {"owner": {"reputation": 791, "user_id": 7922620, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FJ1rD.png?s=128&g=1", "display_name": "Sherwin Abla&#241;a Dapito", "link": "https://stackoverflow.com/users/7922620/sherwin-abla%c3%b1a-dapito"}, "edited": false, "score": 0, "creation_date": 1563585602, "post_id": 28198220, "comment_id": 100760292, "body": "It&#39;s already mid 2019 and their API are still not clear, any news?"}], "answers": [{"tags": [], "owner": {"reputation": 8724, "user_id": 1068283, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XZLfw.jpg?s=128&g=1", "display_name": "Michael Hampton", "link": "https://stackoverflow.com/users/1068283/michael-hampton"}, "is_accepted": false, "score": 0, "last_activity_date": 1431199412, "creation_date": 1431199412, "answer_id": 30144106, "question_id": 28198220, "link": "https://stackoverflow.com/questions/28198220/how-to-generate-an-authorization-code-using-paypal-ruby-sdk-for-future-payment/30144106#30144106", "title": "How to generate an authorization code using PayPal-Ruby-SDK for future payment?", "body": "<p>The authorization code is part of your application details that were provided to you when you registered your application at <a href=\"http://developer.paypal.com/\" rel=\"nofollow\">developer.paypal.com</a>, and you can view your application there to get the code.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2862370, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/u6uiK.jpg?s=128&g=1", "display_name": "Eugene Moskvita", "link": "https://stackoverflow.com/users/2862370/eugene-moskvita"}, "is_accepted": false, "score": 1, "last_activity_date": 1539039226, "last_edit_date": 1539039226, "creation_date": 1499350625, "answer_id": 44951502, "question_id": 28198220, "link": "https://stackoverflow.com/questions/28198220/how-to-generate-an-authorization-code-using-paypal-ruby-sdk-for-future-payment/44951502#44951502", "title": "How to generate an authorization code using PayPal-Ruby-SDK for future payment?", "body": "<p>You are able to get Authorization Code only via PayPal web login flow. According to <a href=\"https://developer.paypal.com/docs/api/auth-headers/\" rel=\"nofollow noreferrer\">Paypal's official documentation</a> .</p>\n"}, {"tags": [], "owner": {"reputation": 736, "user_id": 695186, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5e8a7008005c6b3cc5e3164b76630517?s=128&d=identicon&r=PG", "display_name": "Ryan Clark", "link": "https://stackoverflow.com/users/695186/ryan-clark"}, "is_accepted": false, "score": 0, "last_activity_date": 1539041611, "creation_date": 1539041611, "answer_id": 52711383, "question_id": 28198220, "link": "https://stackoverflow.com/questions/28198220/how-to-generate-an-authorization-code-using-paypal-ruby-sdk-for-future-payment/52711383#52711383", "title": "How to generate an authorization code using PayPal-Ruby-SDK for future payment?", "body": "<p>You can't do this. You have to make API calls to create reference transactions: </p>\n\n<p><a href=\"https://github.com/paypal/PayPal-REST-API-issues/issues/44\" rel=\"nofollow noreferrer\">https://github.com/paypal/PayPal-REST-API-issues/issues/44</a></p>\n\n<p>Scroll to the bottom of that issue - looks like at least they're offering some kind of limited access to a REST API so you can skip their SOAP stuff. </p>\n"}], "owner": {"reputation": 53, "user_id": 1447843, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a81e66ed02abcc5931b3b68f54ee465?s=128&d=identicon&r=PG", "display_name": "Sameer Ahmed", "link": "https://stackoverflow.com/users/1447843/sameer-ahmed"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1048, "favorite_count": 0, "answer_count": 3, "score": 4, "last_activity_date": 1539041611, "creation_date": 1422464903, "question_id": 28198220, "link": "https://stackoverflow.com/questions/28198220/how-to-generate-an-authorization-code-using-paypal-ruby-sdk-for-future-payment", "title": "How to generate an authorization code using PayPal-Ruby-SDK for future payment?", "body": "<p>I am trying to generate access token for paypal for future payment using  PayPal-Ruby-SDK <a href=\"https://github.com/paypal/PayPal-Ruby-SDK/blob/master/spec/payments_examples_spec.rb#L149\" rel=\"nofollow\">example</a>.</p>\n\n<pre><code>it \"Exchange Authorization Code for Refresh / Access Tokens\" do\n    # put your authorization code for testing here\n    auth_code = ''\n    if auth_code != ''\n      access_token  = FuturePayment.exch_token(auth_code)\n      access_token.should_not be_nil\n    end\nend\n</code></pre>\n\n<p>It requires an authorization code which I am unable to find how to generate.\nAny Help will be highly obliged.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database", "activerecord", "foreign-keys"], "comments": [{"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422465280, "post_id": 28198118, "comment_id": 44763069, "body": "So you want a relationship where ModelA <code>has_many</code> ModelB&#39;s and ModelB <code>belongs_to</code> ModelA?"}], "answers": [{"comments": [{"owner": {"reputation": 531, "user_id": 880182, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/19c8432952577777ca66ff67817ae40d?s=128&d=identicon&r=PG", "display_name": "lmojzis", "link": "https://stackoverflow.com/users/880182/lmojzis"}, "edited": false, "score": 0, "creation_date": 1422465661, "post_id": 28198375, "comment_id": 44763282, "body": "I could do this. But I&#39;m interested in associating the records using something like belongs_to :model_a, where: &#39;model_a. unique_id = model_a. model_a_unique_id&#39; - is there no way to do this?"}], "tags": [], "owner": {"reputation": 1633, "user_id": 452074, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df66c542b42b4723e8dc160d202a076e?s=128&d=identicon&r=PG", "display_name": "RhapX", "link": "https://stackoverflow.com/users/452074/rhapx"}, "is_accepted": false, "score": 0, "last_activity_date": 1422465445, "creation_date": 1422465445, "answer_id": 28198375, "question_id": 28198118, "link": "https://stackoverflow.com/questions/28198118/how-can-i-associate-two-models-where-column-values-match/28198375#28198375", "title": "How can I associate two models where column values match?", "body": "<p>Assuming you're using MySQL, you want to use a <code>join</code>. You can accomplish combining the columns of both tables using the following query.</p>\n\n<pre><code>SELECT * FROM ModelA AS a \n    JOIN ModelB AS b ON a.unique_id = b.model_a_unique_id\n</code></pre>\n\n<p>Read more about <a href=\"http://dev.mysql.com/doc/refman/5.0/en/join.html\" rel=\"nofollow\">MySQL Joins here</a></p>\n"}, {"tags": [], "owner": {"reputation": 39050, "user_id": 2336231, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/d7kOQ.jpg?s=128&g=1", "display_name": "BroiSatse", "link": "https://stackoverflow.com/users/2336231/broisatse"}, "is_accepted": true, "score": 1, "last_activity_date": 1422465992, "creation_date": 1422465992, "answer_id": 28198570, "question_id": 28198118, "link": "https://stackoverflow.com/questions/28198118/how-can-i-associate-two-models-where-column-values-match/28198570#28198570", "title": "How can I associate two models where column values match?", "body": "<p>You should be able to do:</p>\n\n<pre><code>class A\n  has_many :bs, foreign_key: :model_a_unique_id, primary_key: :unique_id\nend\n\nclass B\n  belongs_to :a, foreign_key: :model_a_unique_id, primary_key: :unique_id\nend\n</code></pre>\n"}], "owner": {"reputation": 531, "user_id": 880182, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/19c8432952577777ca66ff67817ae40d?s=128&d=identicon&r=PG", "display_name": "lmojzis", "link": "https://stackoverflow.com/users/880182/lmojzis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 28198570, "answer_count": 2, "score": 0, "last_activity_date": 1422465992, "creation_date": 1422464638, "question_id": 28198118, "link": "https://stackoverflow.com/questions/28198118/how-can-i-associate-two-models-where-column-values-match", "title": "How can I associate two models where column values match?", "body": "<p>Let's say I have two models</p>\n\n<p>ModelA: <code>id</code>, <code>unique_id</code>, <code>created_at</code>, <code>updated_at</code></p>\n\n<p>ModelB: <code>id</code>, <code>model_a_unique_id</code>, <code>created_at</code>, <code>updated_at</code></p>\n\n<p>those unique ids are strings.</p>\n\n<p>How can I use such a column to associate values in these columns? There's a 1:n relation between them. I did try googling that, but I came up empty.</p>\n\n<p><strong>Edit:</strong> and of course by values I mean records.</p>\n"}, {"tags": ["ruby", "multithreading", "timeout", "thwait"], "answers": [{"tags": [], "owner": {"reputation": 7544, "user_id": 1085998, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/459252fca62e56c1131babdba2b1babe?s=128&d=identicon&r=PG", "display_name": "daremkd", "link": "https://stackoverflow.com/users/1085998/daremkd"}, "is_accepted": true, "score": 1, "last_activity_date": 1422467991, "creation_date": 1422467991, "answer_id": 28199181, "question_id": 28198059, "link": "https://stackoverflow.com/questions/28198059/ruby-threadswait-timeout/28199181#28199181", "title": "Ruby ThreadsWait timeout", "body": "<p><a href=\"http://ruby-doc.org/core-2.0.0/Thread.html#method-i-join\" rel=\"nofollow\">Thread#join</a> accepts an argument after which it will time out. Try this, for example:</p>\n\n<pre><code>5.times.map do |i|\n  Thread.new do\n    1_000_000_000.times { |i| i } # takes more than a second\n    puts \"Finished\" # will never print\n  end\nend.each { |t| t.join(1) } # times out after a second\n\np 'stuff I want to execute after finishing the threads' # will print\n</code></pre>\n\n<p>If you have some things you want to execute before joining, you can do:</p>\n\n<pre><code>5.times.map do |i|\n  Thread.new do\n    1_000_000_000.times { |i| i } # takes more than a second\n    puts \"Finished\" # will never print\n  end\nend.each do |thread|\n  puts 'Stuff I want to do before join' # Will print, multiple times\n  thread.join(1)\nend\n</code></pre>\n"}], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 28199181, "answer_count": 1, "score": 0, "last_activity_date": 1422467991, "creation_date": 1422464426, "question_id": 28198059, "link": "https://stackoverflow.com/questions/28198059/ruby-threadswait-timeout", "title": "Ruby ThreadsWait timeout", "body": "<p>I have the following code to block until all threads have finished (<a href=\"https://gist.github.com/mahemoff/ae386626923a1015a387\" rel=\"nofollow\">Gist</a>):</p>\n\n<pre><code>ThreadsWait.all_waits(*threads)\n</code></pre>\n\n<p>What's the simplest way to set a timeout here, ie kill any threads if they are still running after e.g. 3 seconds?</p>\n"}, {"tags": ["ruby", "mechanize"], "answers": [{"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": false, "score": 0, "last_activity_date": 1422488134, "creation_date": 1422488134, "answer_id": 28204476, "question_id": 28197960, "link": "https://stackoverflow.com/questions/28197960/get-the-second-element-with-mechanize/28204476#28204476", "title": "get the second element with mechanize", "body": "<p>Should be something like:</p>\n\n<pre><code>links = a.get(\"http://www.xxxx/recherche/#{name}/page-#{f}\").links_with(:href =&gt; %r{/suits-})\nlink = links[1]\n</code></pre>\n\n<p>0 being the first, and 1 being the second.</p>\n"}], "owner": {"reputation": 86, "user_id": 2912390, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c178bc98b64c5cdaf1cd631f6e4f3ada?s=128&d=identicon&r=PG&f=1", "display_name": "user2912390", "link": "https://stackoverflow.com/users/2912390/user2912390"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422488134, "creation_date": 1422464161, "question_id": 28197960, "link": "https://stackoverflow.com/questions/28197960/get-the-second-element-with-mechanize", "title": "get the second element with mechanize", "body": "<p>when i execute the code  bellow i get this on output</p>\n\n<blockquote>\n  <p>Suits FRENCH </p>\n  \n  <p>Suits ITALIEN</p>\n</blockquote>\n\n<p>but i need the second element the link , how can i get it ? \ni dont understand something when i execute only a.get(\"<a href=\"http://............links_with(:href\" rel=\"nofollow\">http://............links_with(:href</a> => %r{/suits-}) everything is good </p>\n\n<pre><code> 0.upto(5) do |f|\n   p = a.get(\"http://www.xxxx/recherche/#{name}/page-#{f}\").links_with(:href =&gt; %r{/suits-})\n   puts p\nend \n</code></pre>\n\n<blockquote>\n  <p>Mechanize::Page::Link \"Suits FRENCH \" \"<a href=\"http://www.xxxxxx/rent/r-s-t/suits-french.html\" rel=\"nofollow\">http://www.xxxxxx/rent/r-s-t/suits-french.html</a>\"> ,</p>\n  \n  <p>Mechanize::Page::Link \"Suits ITALIEN\" \"<a href=\"http://www.xxxxx/rent/r-s-t/suits-italien.html\" rel=\"nofollow\">http://www.xxxxx/rent/r-s-t/suits-italien.html</a>\">*</p>\n</blockquote>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1422464910, "post_id": 28197894, "comment_id": 44762802, "body": "Can you add an explanation of what you are trying to achieve exactly? I don&#39;t think you are doing &quot;it&quot; the right way but I am not sure what &quot;it&quot; is... Can you write the expected behavior of the functionnality ?"}, {"owner": {"reputation": 157, "user_id": 4300830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-90J61yPpDps/AAAAAAAAAAI/AAAAAAAAAx8/3D6zT-UidAM/photo.jpg?sz=128", "display_name": "Ezio Auditore", "link": "https://stackoverflow.com/users/4300830/ezio-auditore"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1422465369, "post_id": 28197894, "comment_id": 44763124, "body": "Sorry MrYoshiji , I mean about without writing several lines of code according checkboxes, if I have more checkboxes the code will be too long, and i think is not the correct way need to make it more dynamic"}], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 4300830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-90J61yPpDps/AAAAAAAAAAI/AAAAAAAAAx8/3D6zT-UidAM/photo.jpg?sz=128", "display_name": "Ezio Auditore", "link": "https://stackoverflow.com/users/4300830/ezio-auditore"}, "edited": false, "score": 1, "creation_date": 1422473763, "post_id": 28200423, "comment_id": 44767937, "body": "Oh god you you are the master, I noticed you don&#39;t have a long score to demostrate you know. Thanks David it worked for me."}, {"owner": {"reputation": 157, "user_id": 4300830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-90J61yPpDps/AAAAAAAAAAI/AAAAAAAAAx8/3D6zT-UidAM/photo.jpg?sz=128", "display_name": "Ezio Auditore", "link": "https://stackoverflow.com/users/4300830/ezio-auditore"}, "edited": false, "score": 1, "creation_date": 1422542724, "post_id": 28200423, "comment_id": 44798226, "body": "Thanks for your time and experiencie +1."}], "tags": [], "owner": {"reputation": 3090, "user_id": 4454732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-8OrTJkCtkn4/AAAAAAAAAAI/AAAAAAAAA4s/7jp2lrThK2k/photo.jpg?sz=128", "display_name": "David Hempy", "link": "https://stackoverflow.com/users/4454732/david-hempy"}, "is_accepted": true, "score": 2, "last_activity_date": 1422472150, "creation_date": 1422472150, "answer_id": 28200423, "question_id": 28197894, "link": "https://stackoverflow.com/questions/28197894/how-can-show-text-array-according-options-checked/28200423#28200423", "title": "How can show text array according options checked?", "body": "<p>I'm having a hard time following what you intend it to do from your examples.  But I think you mean that button 1 is \"Active\" , button 2 is \"Inactive\", and button 3 is \"Removed\".  Further, I think you intend that no options are mutually exclusive...in particular, you can check \"Active\" and \"Inactive\" at the same time.  You also imply that there may be many more checkboxes in the future that will behave similarly.</p>\n\n<p>If all that is correct, then I agree, your current approach will not scale well at all.  </p>\n\n<p>Instead of trying to select a complete message based on complex criteria, I would refactor it to build up the message from its components.  Something along these lines should get you there:</p>\n\n<pre><code>  flags = []\n  flags &lt;&lt; 'Active' if @search_state.collect(&amp;:to_i).include?(0)\n  flags &lt;&lt; 'Inactive' if @search_state.collect(&amp;:to_i).include?(1)\n  flags &lt;&lt; 'Removed' if @search_state.collect(&amp;:to_i).include?(2)\n\n  puts flags.join(', ')\n</code></pre>\n\n<p>FWIW, if you don't have a reason to give all the checkboxes the same name and different values, I would give each one a different name.  This will make a lot of your code much simpler.  Something along these lines:</p>\n\n<pre><code>   Check1 &lt;%= check_box_tag \"search_active\", \"1\", @search_active == 1) %&gt; Active\n   Check2 &lt;%= check_box_tag \"search_inactive\", \"1\", @search_inactive == 1) %&gt; Inactive\n   Check3 &lt;%= check_box_tag \"search_removed\", \"1\", @search_removed == 1) %&gt; Removed\n</code></pre>\n\n<p>If you really need them in an array, you can join them together later on easy enough.  </p>\n"}], "owner": {"reputation": 157, "user_id": 4300830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-90J61yPpDps/AAAAAAAAAAI/AAAAAAAAAx8/3D6zT-UidAM/photo.jpg?sz=128", "display_name": "Ezio Auditore", "link": "https://stackoverflow.com/users/4300830/ezio-auditore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 2, "accepted_answer_id": 28200423, "answer_count": 1, "score": 3, "last_activity_date": 1422472150, "creation_date": 1422464018, "last_edit_date": 1422465244, "question_id": 28197894, "link": "https://stackoverflow.com/questions/28197894/how-can-show-text-array-according-options-checked", "title": "How can show text array according options checked?", "body": "<p>I'm trying to show texts according checkbox selected.</p>\n\n<p>I have 3 states so when I check one or two checkboxes will show me options selected without javascript.</p>\n\n<p>For example:</p>\n\n<pre><code>if I check1 will show me the text active.\nif I check2 will show me the text inactive.\nif I check3 will show me the text inactive and active.\nif I check1 and check 2 will show me the text \"active\",\"inactive\".\nif I check1 and check 2 will show me the text \"active\",\"removed\".\nif I check1 and check 2 will show me the text \"removed\",\"inactive\".\n</code></pre>\n\n<p>Just keep the text according the checkbox selected.</p>\n\n<p>Here is the controller:</p>\n\n<pre><code>@search_state = params[:search_state]\n@people = Person.all\n</code></pre>\n\n<p>Here is the view:</p>\n\n<pre><code>&lt;%= form_tag(people_path,:method =&gt; \"get\") do %&gt;\n #### BEGIN CHECKBOX #####\n &lt;% if @search_state.blank? %&gt; \n   Check1 &lt;%= check_box_tag \"search_state[]\", \"0\" %&gt;\n   Check2 &lt;%= check_box_tag \"search_state[]\", \"1\" %&gt;\n   Check3 &lt;%= check_box_tag \"search_state[]\", \"2\" %&gt;\n &lt;% else %&gt;\n   Check1 &lt;%= check_box_tag \"search_state[]\", \"0\", @search_state.collect(&amp;:to_i).include?(0) %&gt;\n   Check2 &lt;%= check_box_tag \"search_state[]\", \"1\", @search_state.collect(&amp;:to_i).include?(1) %&gt;\n   Check3 &lt;%= check_box_tag \"search_state[]\", \"2\", @search_state.collect(&amp;:to_i).include?(2) %&gt;\n &lt;% end %&gt;\n  #### END CHECKBOX ####\n\n ### WANT TO SHOW A TEXT ACCORDING CHECKBOXES SELECTED ###\n   &lt;% if @search_state.to_s==\"0\"%&gt;\n     Active\n   &lt;% elsif @search_state.to_s==\"1\"%&gt;\n     Inactive\n   &lt;% elsif @search_state.to_s==\"2\" %&gt;\n     Removed\n   &lt;% elsif @search_state.to_s==[\"0\",\"1\"] %&gt;\n     Active,Inactive\n   &lt;% elsif @search_state.to_s==[\"0\",\"2\"] %&gt;\n     Active,Removed\n   &lt;% elsif @search_state.to_s==[\"1\",\"2\"] %&gt;\n     Inactive,Removed\n   &lt;% elsif @search_state.to_s==[\"0\",\"1\",\"2\"] %&gt;\n     Active,Inactive,Removed\n   &lt;% end %&gt;\n   ### END WANTTO SHOW A TEXT ACCORDING CHECKBOXES SELECTED ### \n &lt;% end %&gt;\n</code></pre>\n\n<p>Here are files and demo:</p>\n\n<pre><code>http://runnable.com/VMkReiHVr0FbfQKN/checkbox-project-test-for-ruby-on-rails\nhttp://runnable.com/VMkRe1xPNqFWSMtd/output\n</code></pre>\n\n<p>My code is too long and I think is not the correct way of doing this.</p>\n\n<p>For example in this case I have 3 states, if I have more states will be too long and confusing.</p>\n\n<p>Somebody Can help me to make the checkbox whithout several lines of code using ruby on rails,please?</p>\n\n<p>I know that using Javascript is the solution, but Is the only way to resolve and How could be the solution please?</p>\n\n<p>I will really appreciate all kind of help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422464686, "post_id": 28197889, "comment_id": 44762658, "body": "I&#39;ve never seen a <code>has_one, through:</code> association before. I&#39;m 99% sure you don&#39;t need the <code>GroupMembership</code> model and instead change it to <code>belongs_to :group</code>. However, about your question: I don&#39;t know why you would need a scope since it&#39;s a <code>has_one</code> relationship."}, {"owner": {"reputation": 3, "user_id": 4503819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746747f47fb2c63bee4e3f4414493501?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Forsythe", "link": "https://stackoverflow.com/users/4503819/joe-forsythe"}, "reply_to_user": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422468243, "post_id": 28197889, "comment_id": 44764838, "body": "I think you&#39;re probably correct about <code>GroupMembership</code> being unnecessary.  As is, when I run <code>@user.group_permission</code> I get the incorrect record back, as it pertains to a <code>User</code> with a role of <code>group_leader</code> while <code>@user</code> has a role of <code>user</code>"}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422468673, "post_id": 28197889, "comment_id": 44765082, "body": "Can you post your code where you call <code>@user.group_permission</code>?"}, {"owner": {"reputation": 3, "user_id": 4503819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746747f47fb2c63bee4e3f4414493501?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Forsythe", "link": "https://stackoverflow.com/users/4503819/joe-forsythe"}, "reply_to_user": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422469781, "post_id": 28197889, "comment_id": 44765731, "body": "Sure.  I&#39;m working with Pundit and inside a policy I say <code>user.allowed_to? :action</code>.  In the <code>User</code> model     <code>def allowed_to?(action);         group_permissions.allowed_actions? action;     end</code>  <code>allowed_actions?</code> is a bitmask as provided by the bitmask_attributes gem.  Sorry about the formatting, not sure what I&#39;m doing with the mini-markdown"}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422470074, "post_id": 28197889, "comment_id": 44765899, "body": "No problem. Just next time edit your post to include big chunks of code."}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422470245, "post_id": 28197889, "comment_id": 44765996, "body": "I&#39;ve never used Pundit or bitmask_attributes, so I&#39;m not really sure what to tell you. So you don&#39;t call <code>@user.group_permission</code> directly?"}, {"owner": {"reputation": 3, "user_id": 4503819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746747f47fb2c63bee4e3f4414493501?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Forsythe", "link": "https://stackoverflow.com/users/4503819/joe-forsythe"}, "reply_to_user": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422470393, "post_id": 28197889, "comment_id": 44766074, "body": "Not directly within the policy.  Effectively, that&#39;s what gets called though.  <code>user.allowed_to? :foo</code> just reads better within the policy.  Thanks for the help though, it&#39;s appreciated"}], "owner": {"reputation": 3, "user_id": 4503819, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/746747f47fb2c63bee4e3f4414493501?s=128&d=identicon&r=PG&f=1", "display_name": "Joe Forsythe", "link": "https://stackoverflow.com/users/4503819/joe-forsythe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 60, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422475726, "creation_date": 1422463997, "last_edit_date": 1422475726, "question_id": 28197889, "link": "https://stackoverflow.com/questions/28197889/rails-4-limit-association-by-attribute", "title": "Rails 4 limit association by attribute", "body": "<p>I have a complex nest of associations due to a project that requires highly configurable permissions.  The model highlights are</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n    has_one :group_membership\n    has_one :group, through: :group_membership\n\n    has_one :group_permission, through: :group, source: :group_permissions\n\n    enum role: [:group_leader, :user]\nend\n\nclass Group &lt; ActiveRecord::Base\n    has_many :group_memberships\n    has_many :users, through: :group_memberships\n\n    has_many :group_permissions\nend\n\nclass GroupPermission &lt; ActiveRecord::Base\n    belongs_to :group\nend\n\nclass GroupMembership &lt; ActiveRecord::Base\n    belongs_to :group\n    belongs_to :user\nend\n</code></pre>\n\n<p>A <code>GroupPermission</code> has a <code>group_id</code>, a <code>role</code>, and an <code>allowed_actions</code> for that <code>role</code>.</p>\n\n<p>So for each <code>Group</code>, there can be multiple <code>group_permissions</code> with differing <code>allowed_actions</code> depending on <code>role</code></p>\n\n<p>I want to be able to say <code>@user.group_permission</code> and have it return the <code>group_permission</code> scoped to <code>@users</code>'s <code>role</code> but I'm not sure if that's achievable through the associations alone</p>\n\n<p><strong>Update</strong></p>\n\n<p>I guess another way to ask this question is, if I define a method on <code>User</code> such as</p>\n\n<pre><code>def group_permissions\n    group.group_permissions.where(role: role)\nend\n</code></pre>\n\n<p>That gives me the correct <code>group_permissions</code> record for this user.  I'd like to be able to do this with an association, and I'm not sure if that's possible</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "ajax"], "answers": [{"comments": [{"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1422465647, "post_id": 28197913, "comment_id": 44763274, "body": "Well, this is honestly not a very friendly approach sharing a link with <code>.js</code> in the end"}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "reply_to_user": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1422465869, "post_id": 28197913, "comment_id": 44763384, "body": "I agree it doesn&#39;t look pretty, but I think it is most friendly.  As far as I know, it&#39;s the only one. There maybe another way that you can tweak in the controller, but I&#39;m not sure."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1422466116, "post_id": 28197913, "comment_id": 44763543, "body": "Thank you Ryan for your input, I&#39;m keep searching and will post it if I find something useful."}], "tags": [], "owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "is_accepted": false, "score": 0, "last_activity_date": 1422464059, "creation_date": 1422464059, "answer_id": 28197913, "question_id": 28197661, "link": "https://stackoverflow.com/questions/28197661/rails-how-to-render-an-action-as-js-without-using-remote-true/28197913#28197913", "title": "Rails - how to render an action as JS without using &quot;:remote =&gt; true&quot;?", "body": "<p>Use this link (basically just add the format <code>.js</code> to the end):</p>\n\n<pre><code>web.com/posts/6.js\n</code></pre>\n\n<p>This also works with any other kind of format you want (say <code>json</code> or <code>xml</code>). Just make sure you account for those formats in your controller action.</p>\n"}, {"comments": [{"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422466179, "post_id": 28198471, "comment_id": 44763567, "body": "Strange yes, but nothing wrong with it. This answer doesn&#39;t really change anything, since JavaScript automatically adds the format of <code>js</code> on anything that has <code>remote: true</code> on it. I think he wants a way to allow a direct link (from the browser) to have a format of <code>js</code> and this is the only way I know."}, {"owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "edited": false, "score": 0, "creation_date": 1422466279, "post_id": 28198471, "comment_id": 44763627, "body": "@ForgetTheNorm - I am trying to figure out how to render an action as JS when I [manually] put to the URL <code>web.com&#47;posts&#47;6</code>. If you put that URL to the browser, it will be rendered as HTML. But I am trying to force the controller to render this action as JS."}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "edited": false, "score": 0, "creation_date": 1422466934, "post_id": 28198471, "comment_id": 44764065, "body": "Well I guess that would work too. Just depends on which you think looks nicer."}], "tags": [], "owner": {"reputation": 3199, "user_id": 1611683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/44576838a06da54b55272e8b7d662317?s=128&d=identicon&r=PG", "display_name": "pierallard", "link": "https://stackoverflow.com/users/1611683/pierallard"}, "is_accepted": false, "score": 0, "last_activity_date": 1422465713, "creation_date": 1422465713, "answer_id": 28198471, "question_id": 28197661, "link": "https://stackoverflow.com/questions/28197661/rails-how-to-render-an-action-as-js-without-using-remote-true/28198471#28198471", "title": "Rails - how to render an action as JS without using &quot;:remote =&gt; true&quot;?", "body": "<p>Replace</p>\n\n<pre><code>= link_to \"Show post\", post, :remote =&gt; true\n</code></pre>\n\n<p>By</p>\n\n<pre><code>= link_to \"Show post\", post, :remote =&gt; true, :format =&gt; 'js'\n</code></pre>\n\n<p><em>Warning</em></p>\n\n<p>@user984621 is right : this is very strange to get a link with js.</p>\n"}], "owner": {"reputation": 40732, "user_id": 984621, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/817afccebcbe3a4983a5e8c584f30373?s=128&d=identicon&r=PG", "display_name": "user984621", "link": "https://stackoverflow.com/users/984621/user984621"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 842, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1422465713, "creation_date": 1422463326, "last_edit_date": 1422463906, "question_id": 28197661, "link": "https://stackoverflow.com/questions/28197661/rails-how-to-render-an-action-as-js-without-using-remote-true", "title": "Rails - how to render an action as JS without using &quot;:remote =&gt; true&quot;?", "body": "<p>In the view, I have a link that I call as AJAX:</p>\n\n<pre><code>= link_to \"Show post\", post, :remote =&gt; true\n</code></pre>\n\n<p>and action in the controller:</p>\n\n<pre><code>  def show\n    respond_to do |format|\n      format.js\n    end\n  end\n</code></pre>\n\n<p>When I click this link, the request is called as AJAX and a popup window with the respective content is displayed. Also, the wanted address is added to the URL (for example <code>web.com/posts/6</code>).</p>\n\n<p>So far so good.</p>\n\n<p>But now when I try to put to the URL <code>web.com/posts/6</code>, I get only an error message saying:</p>\n\n<pre><code>Processing by PostsController#show as HTML\n  Parameters: {\"id\"=&gt;\"6\"}\n  Post Load (0.6ms)  SELECT  `posts`.* FROM `posts`  WHERE `posts`.`id` = 6 LIMIT 1\nCompleted 406 Not Acceptable in 535ms\n\nActionController::UnknownFormat (ActionController::UnknownFormat):\n  app/controllers/posts_controller.rb:14:in `show'\n</code></pre>\n\n<p>I am trying to achieve that when I put the URL <code>web.com/posts/6</code> to the browser, then the page will be rendered the same way as if I click on a link with the <code>:remote =&gt; true</code> option.</p>\n\n<p>How to do that? How to force an action in controller to be rendered as JS?</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby", "arrays", "json", "http-post", "attask"], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4317641"}, "is_accepted": true, "score": 1, "last_activity_date": 1422466989, "creation_date": 1422466989, "answer_id": 28198881, "question_id": 28197245, "link": "https://stackoverflow.com/questions/28197245/attask-uri-endpoints/28198881#28198881", "title": "AtTask URI endpoints", "body": "<p>This would work but your url format would have to be like this</p>\n\n<pre><code>/attask/api/resvt?updates=[{\"endDate\":\"2014-12-25T22:59:00:163-0700\",\"startDate\":\"2014-12-24T23:00:00:163-0700\",\"userID\":\"4ee8cfec000d2cd780c3ccf059cdc23b\"},{\"endDate\": \"2014-12-26T22:59:00:163-0700\",\"startDate\":\"2014-12-26T23:00:00:163-0700\",\"userID\":\"4ee8cfec000d2cd780c3ccf059cdc23b\"}]&amp;method=POST&amp;sessionID={sessionID}\n</code></pre>\n\n<p>The problem you will run into is this will erase all existing time off already in the system.</p>\n\n<p>one solution is to pull all time-off from attask first then append the new time off to the collection.</p>\n\n<p>or </p>\n\n<p>Send all time-off dates with each call.</p>\n\n<p>If you are interested we are working on updating the example code and updating time-off is part of that update. If you interested I can provide samples in any of the sample code languages except flex.</p>\n\n<p>If you are interested in that please enter a help desk ticket into attask and let the support rep know to contact Michael Johnson.</p>\n"}], "owner": {"reputation": 40, "user_id": 4176706, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-15LzhnGA5JE/AAAAAAAAAAI/AAAAAAAAAI0/wVCFDrLHKIs/photo.jpg?sz=128", "display_name": "Michael Ross", "link": "https://stackoverflow.com/users/4176706/michael-ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 0, "accepted_answer_id": 28198881, "answer_count": 1, "score": 0, "last_activity_date": 1422466989, "creation_date": 1422462128, "question_id": 28197245, "link": "https://stackoverflow.com/questions/28197245/attask-uri-endpoints", "title": "AtTask URI endpoints", "body": "<p>I have been in the process of building a small application to pull and push data using the API and have a few questions regarding where I can post an array of hashes containing new data to the reservedTimes (RESVT) endpoint.  As it has been previously asked on SO, one can use the '?updates=' modifier to post an array of hashes containing existing RESVT and New RESVT information.  I am only concerned with making a series of POST requests with an array of hashes solely containing new RESVT data on a user to user basis.  Specifically, I am looking for a way to post multiple dates for a single user.  My understanding is that the RESVT field is stored as a collection under the USER object so RESVT data needs to be posted as a collection.  My array is formatted like \n<code>[{'userID'=&gt;ID, 'startDate'=&gt;startDate, 'endDate'}, {'userID'=&gt;ID,     'startDate'=&gt;startDate, 'endDate'}, {'userID'=&gt;ID, 'startDate'=&gt;startDate, 'endDate'}]</code>\nIf my URL looks something like: <code>https://[domain].attasksandbox.com/attask/api/resvt?updates=</code> (only the updates modifier is returning a 400 (bad request) with a message saying, </p>\n\n<blockquote>\n  <p>\"Cannot mix 'updates' JSON parameter with non-JSON update parameter\"</p>\n</blockquote>\n\n<p>Has anybody else found a solution to this?</p>\n\n<p>I appreciate your help in advance!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1422462265, "post_id": 28197235, "comment_id": 44761031, "body": "It&#39;s not quite clear what you mean in the second part of your example. What is <code>arg</code> and what does <code>my_filter_method</code> do? Is that just excluding all properties not in the pre-defined list? If so, that&#39;s <code>a &amp; b</code> where <code>a</code> and <code>b</code> are arrays. As a note, it&#39;s bad form to reject something out of hand just because it&#39;s not an Array. Ruby is a strong believer in duck-typing, so if your object passed in can answer all the methods you&#39;re calling on it and returns useful data, you shouldn&#39;t care what class it actually is."}, {"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1422462464, "post_id": 28197235, "comment_id": 44761171, "body": "In the first part, <code>self.properties_for_create</code> and <code>self.properties_for_update</code> are defined. In the second part, I want a method <code>my_filter_method</code> that takes in ANY argument and also naming scheme, so that when called in <code>create</code> returns <code>self.properties_for_create</code> and when called in <code>update</code> returns <code>self.properties_for_update</code>"}, {"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1422462830, "post_id": 28197235, "comment_id": 44761409, "body": "@tadman and on your note about duck-typing, you mean that instead of validating the class of the object passed, I should check whether or not the object response to all the calls the method is actually sending?"}, {"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1422463204, "post_id": 28197235, "comment_id": 44761638, "body": "Maybe my question is a bit confusing, let me update it."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1422464940, "post_id": 28197235, "comment_id": 44762826, "body": "It&#39;s still not clear what you&#39;re actually trying to achieve in terms of end-goals, and what the function of those two lists of properties is. What I mean by duck-typing is as a function receiving arguments it&#39;s not your responsibility to verify types. It&#39;s the responsibility of the caller to pass in something that conforms to the expectations of your method. Maybe that means supporting the <code>each</code> method, or <code>[]</code>, or <code>to_a</code>. It depends on what you need to do. Try not to freak out when someone passes you a curious object that does what you need it to do, regardless of class."}], "answers": [{"comments": [{"owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "edited": false, "score": 0, "creation_date": 1422467215, "post_id": 28198551, "comment_id": 44764217, "body": "hm ... I would agree with not using this. A user looking at this will be so confused ..."}], "tags": [], "owner": {"reputation": 846, "user_id": 2509071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20343edb616a4c88cbbd67c1d6da2ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Doydle", "link": "https://stackoverflow.com/users/2509071/doydle"}, "is_accepted": false, "score": 0, "last_activity_date": 1422465936, "creation_date": 1422465936, "answer_id": 28198551, "question_id": 28197235, "link": "https://stackoverflow.com/questions/28197235/calling-methods-depending-on-the-caller-method/28198551#28198551", "title": "calling methods depending on the caller method", "body": "<p>There's no easy way to do it, but you can do it like so:</p>\n\n<pre><code>caller.first.scan(/`(\\w+)'/).first.first\n</code></pre>\n\n<p>This will return the name of the calling method, so you can put it in <code>my_filter_method</code> and it will give you either <code>'create'</code> or <code>'update'</code>.</p>\n\n<p>I should point out that I don't recommend this. This sort of convoluted meta programming is best avoided for simple situations like these.</p>\n"}], "owner": {"reputation": 1829, "user_id": 1442966, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/2347a5fea07665538a73887817f30b85?s=128&d=identicon&r=PG", "display_name": "Edward", "link": "https://stackoverflow.com/users/1442966/edward"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422465936, "creation_date": 1422462083, "last_edit_date": 1422465322, "question_id": 28197235, "link": "https://stackoverflow.com/questions/28197235/calling-methods-depending-on-the-caller-method", "title": "calling methods depending on the caller method", "body": "<p>Let's say I have a class:</p>\n\n<pre><code>class MyClass\n  # In my class I have these 2 filters\n  self.properties_for_create = [:p1, :p2, :p3]\n  self.properties_for_update = [:p2, :p3, :p4]\n\n  # Then I have these 2 methods\n  def create(list_of_properties)\n    raise TypeError, \"Must be Array!\" unless list_of_properties.is_a?(Array)\n\n    # do something ...\n  end\n\n  def update(list_of_properties)\n    raise TypeError, \"Must be Array!\" unless list_of_properties.is_a?(Array)\n\n    # do something ...\n  end\nend\n</code></pre>\n\n<p>Then I want a method <code>my_filter_method</code> so that:</p>\n\n<pre><code>def create(list_of_properties)\n  ...\n\n  filter = my_filter_method # will return properties_for_create\n\n  ...\nend\n\ndef update(list_of_properties)\n  ...\n\n  filter = my_filter_method # will return properties_for_update\n\n  ...\nend\n</code></pre>\n\n<p>By taking any naming scheme and arguments, How should I implement this <code>my_filter_method</code> so that it looks DRY and readable?</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "datetime"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1422462213, "post_id": 28197061, "comment_id": 44760995, "body": "Try this: <code>hm.start_time = DateTime.parse(&quot;2014-03-12 14:45:00&quot;)</code> (by the way your value does not include any information about the Time Zone, it might be a problem)"}, {"owner": {"reputation": 285, "user_id": 2366953, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/USCNF.png?s=128&g=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/2366953/bindu"}, "edited": false, "score": 0, "creation_date": 1422463890, "post_id": 28197061, "comment_id": 44762111, "body": "hm is a Active Model object here, DateTime.parse fixed the issue. How can I avoid the specification of Time Zone info in the value."}, {"owner": {"reputation": 2119, "user_id": 1411047, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/673ade5df575380a2e2cd5a0c1503784?s=128&d=identicon&r=PG", "display_name": "Avdept", "link": "https://stackoverflow.com/users/1411047/avdept"}, "edited": false, "score": 0, "creation_date": 1503415459, "post_id": 28197061, "comment_id": 78601025, "body": "Any solution on this? Getting same error when doing <code>MyMode.create(permitted_params)</code>"}], "answers": [{"tags": [], "owner": {"reputation": 5074, "user_id": 4207394, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/mmfTf.png?s=128&g=1", "display_name": "Deep", "link": "https://stackoverflow.com/users/4207394/deep"}, "is_accepted": false, "score": 1, "last_activity_date": 1422682516, "creation_date": 1422682516, "answer_id": 28248545, "question_id": 28197061, "link": "https://stackoverflow.com/questions/28197061/ruby-error-trying-to-set-the-datetime-field-in-mysql-database/28248545#28248545", "title": "Ruby error trying to set the datetime field in MySQL Database", "body": "<p>You can use DateTime.parse(\"2014-03-12 14:45:00\") as suggested by MrYoshiji. And for avoiding time zone issues you can specify in application.rb a setting:</p>\n\n<pre><code>config.time_zone = \"Eastern Time (US &amp; Canada)\"\n</code></pre>\n\n<p>The database MySQL for example always stores the time in GMT but the rails will extract the date time in your specified time zone i.e., it will automatically convert it. Hope this helps.</p>\n"}], "owner": {"reputation": 285, "user_id": 2366953, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/USCNF.png?s=128&g=1", "display_name": "Bindu", "link": "https://stackoverflow.com/users/2366953/bindu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 304, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1422682516, "creation_date": 1422461611, "question_id": 28197061, "link": "https://stackoverflow.com/questions/28197061/ruby-error-trying-to-set-the-datetime-field-in-mysql-database", "title": "Ruby error trying to set the datetime field in MySQL Database", "body": "<p>I'm using rails 4.0.0, ruby 2.2.0\nTrying to set the datetime field in one of the table in MySQL server I'm observing following error. Can any one suggest whats the issue.</p>\n\n<pre><code>    2.2.0 :048 &gt; hm.start_time = \"2014-03-12 14:45:00\"\n    NoMethodError: undefined method `year' for nil:NilClass\n    from /usr/local/rvm/gems/ruby-2.2.0/gems/activesupport-4.0.0/lib/active_support/values/time_zone.rb:287:in `parse'\n    from /usr/local/rvm/gems/ruby-2.2.0/gems/activesupport-4.0.0/lib/active_support/core_ext/string/zones.rb:8:in `in_time_zone'\n    from /usr/local/rvm/gems/ruby-2.2.0/gems/activerecord-4.0.0/lib/active_record/attribute_methods/time_zone_conversion.rb:37:in `start_time='\n    from (irb):48\n    from /usr/local/rvm/gems/ruby-2.2.0/gems/railties-4.0.0/lib/rails/commands/console.rb:90:in `start'\n    from /usr/local/rvm/gems/ruby-2.2.0/gems/railties-4.0.0/lib/rails/commands/console.rb:9:in `start'\n    from /usr/local/rvm/gems/ruby-2.2.0/gems/railties-4.0.0/lib/rails/commands.rb:64:in `&lt;top (required)&gt;'\n    from bin/rails:34:in `require'\n    from bin/rails:34:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "multithreading", "rake", "rakefile"], "answers": [{"tags": [], "owner": {"reputation": 19714, "user_id": 1006863, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/sYOuq.jpg?s=128&g=1", "display_name": "Paulo Fidalgo", "link": "https://stackoverflow.com/users/1006863/paulo-fidalgo"}, "is_accepted": false, "score": 1, "last_activity_date": 1422460816, "creation_date": 1422460816, "answer_id": 28196785, "question_id": 28196591, "link": "https://stackoverflow.com/questions/28196591/rake-equivalent-of-make-j-jobs/28196785#28196785", "title": "Rake equivalent of make -j (--jobs)", "body": "<p>There is a blog post about rake <a href=\"http://devblog.avdi.org/2014/04/29/rake-part-7-multitask/\" rel=\"nofollow\">MultiTask</a>, but it supports the <code>-j</code> parameter as <code>-m</code> for parallelization.</p>\n"}, {"tags": [], "owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "is_accepted": true, "score": 2, "last_activity_date": 1422460850, "creation_date": 1422460850, "answer_id": 28196796, "question_id": 28196591, "link": "https://stackoverflow.com/questions/28196591/rake-equivalent-of-make-j-jobs/28196796#28196796", "title": "Rake equivalent of make -j (--jobs)", "body": "<p>Yes, rake allows the jobs to run in parallel. To set up the level of parallelism, use <code>-j</code> switch. From <code>rake --help</code>:</p>\n\n<pre><code>-j, --jobs [NUMBER] Specifies the maximum number of tasks to execute in parallel. (default is number of CPU cores + 4)\n</code></pre>\n\n<p>But, the job itself must be written as a multitask, not a task. So the instead of defining the task like:</p>\n\n<pre><code>namespace :mynamespace  do\n  desc \"description\"\n  task task_name: :environment do\n    your_code\n  end\nend\n</code></pre>\n\n<p>use multitask:</p>\n\n<pre><code>namespace :mynamespace  do\n  desc \"description\"\n  multitask task_name: :environment do\n    your_code\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 30419, "user_id": 300224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/PFB2V.jpg?s=128&g=1", "display_name": "William Entriken", "link": "https://stackoverflow.com/users/300224/william-entriken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 407, "favorite_count": 0, "accepted_answer_id": 28196796, "answer_count": 2, "score": 1, "last_activity_date": 1422460850, "creation_date": 1422460284, "question_id": 28196591, "link": "https://stackoverflow.com/questions/28196591/rake-equivalent-of-make-j-jobs", "title": "Rake equivalent of make -j (--jobs)", "body": "<p>The <code>make</code> commands allows a <code>-j</code> (<code>--jobs</code>) options documented as such:</p>\n\n<pre><code>-j [jobs], --jobs[=jobs]\n     Specifies the number of jobs (commands) to run simultaneously.  If there is more than one -j  option,\n     the  last  one  is effective.  If the -j option is given without an argument, make will not limit the\n     number of jobs that can run simultaneously.\n</code></pre>\n\n<p>In a day and age where even cell phones have multiple cores and/or processors, I want my build systems to handle multithreaded processing. </p>\n\n<p>What is the best way to set up <code>rake</code> so I can ensure up to 3 tasks are running at all times?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-routing"], "comments": [{"owner": {"reputation": 19, "user_id": 4503453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9d845487168e35a732457d26f7cbdc?s=128&d=identicon&r=PG&f=1", "display_name": "SOking", "link": "https://stackoverflow.com/users/4503453/soking"}, "edited": false, "score": 0, "creation_date": 1422462432, "post_id": 28196572, "comment_id": 44761150, "body": "Why the downvote? If something is wrong with my question do let me know. Some people are new to this."}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 4503453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9d845487168e35a732457d26f7cbdc?s=128&d=identicon&r=PG&f=1", "display_name": "SOking", "link": "https://stackoverflow.com/users/4503453/soking"}, "edited": false, "score": 0, "creation_date": 1422462378, "post_id": 28196836, "comment_id": 44761102, "body": "Apparently, admin/dashboard is not a supported controller name. Perhaps unrelated to my previous question, do you know why this might be? Error occurred both when I ran rake routes and rails server"}], "tags": [], "owner": {"reputation": 22313, "user_id": 1128103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bba5478400d2a3253746c614c6896bcc?s=128&d=identicon&r=PG", "display_name": "Baldrick", "link": "https://stackoverflow.com/users/1128103/baldrick"}, "is_accepted": false, "score": 3, "last_activity_date": 1422460952, "creation_date": 1422460952, "answer_id": 28196836, "question_id": 28196572, "link": "https://stackoverflow.com/questions/28196572/syntax-error-in-config-routes-rb/28196836#28196836", "title": "Syntax Error in config/routes.rb", "body": "<p>Missing colon after <code>as</code>, and a space as indicated by DickieBoy</p>\n\n<pre><code>get '', to: 'dashboard#index', as: '/admin'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 4503453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9d845487168e35a732457d26f7cbdc?s=128&d=identicon&r=PG&f=1", "display_name": "SOking", "link": "https://stackoverflow.com/users/4503453/soking"}, "edited": false, "score": 0, "creation_date": 1422462352, "post_id": 28196839, "comment_id": 44761088, "body": "Apparently, admin/dashboard is not a supported controller name. Perhaps unrelated to my previous question, do you know why this might be? Error occurred both when I ran rake routes and rails server"}], "tags": [], "owner": {"reputation": 534, "user_id": 3021850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/39f1576e9922e0d8db09e8c25df7b49f?s=128&d=identicon&r=PG", "display_name": "Nelio", "link": "https://stackoverflow.com/users/3021850/nelio"}, "is_accepted": false, "score": 3, "last_activity_date": 1422460961, "creation_date": 1422460961, "answer_id": 28196839, "question_id": 28196572, "link": "https://stackoverflow.com/questions/28196572/syntax-error-in-config-routes-rb/28196839#28196839", "title": "Syntax Error in config/routes.rb", "body": "<p>You forgot the ':' after 'as'.</p>\n\n<pre><code>get '', to: 'dashboard #index', as: '/admin'\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 4503453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2a9d845487168e35a732457d26f7cbdc?s=128&d=identicon&r=PG&f=1", "display_name": "SOking", "link": "https://stackoverflow.com/users/4503453/soking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 587, "favorite_count": 0, "closed_date": 1422462858, "answer_count": 2, "score": 0, "last_activity_date": 1422461214, "creation_date": 1422460227, "last_edit_date": 1422461214, "question_id": 28196572, "link": "https://stackoverflow.com/questions/28196572/syntax-error-in-config-routes-rb", "closed_reason": "Not suitable for this site", "title": "Syntax Error in config/routes.rb", "body": "<p>I'm creating an admin page for an app that sends questions to MP's.</p>\n\n<p>Upon running my rails server, I am getting the error:</p>\n\n<blockquote>\n  <p>syntax error, unexpected tString, expecting keyword_do or '{' or '('\n  get '', to: 'dashboard #index' as '/admin'.</p>\n</blockquote>\n\n<p>This is my code in routes.rb where I'm getting the error:</p>\n\n<pre><code>root to: 'dashboard#index', as: '/'\nnamespace :admin do\n  get '', to: 'dashboard #index', as '/admin'\n  resources :questions, :users\nend\n</code></pre>\n\n<p>And this is my dashboard controller:</p>\n\n<pre><code>class Admin::DashboardController &lt; ApplicationController      \n  before_filter :authorize\n\n  def index\n  end\nend\n</code></pre>\n\n<p>I am trying to create a route so I have a url for my site like:\n<code>http://example.com/admin</code></p>\n"}, {"tags": ["ruby", "sonarqube"], "comments": [{"owner": {"reputation": 25258, "user_id": 976155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bee1367bdf28d58f7c4527f6a84ca33?s=128&d=identicon&r=PG", "display_name": "Fabrice - SonarSource Team", "link": "https://stackoverflow.com/users/976155/fabrice-sonarsource-team"}, "edited": false, "score": 0, "creation_date": 1422460127, "post_id": 28195966, "comment_id": 44759567, "body": "Are you trying to achieve something like <a href=\"https://jira.codehaus.org/browse/SONAR-5430\" rel=\"nofollow noreferrer\">jira.codehaus.org/browse/SONAR-5430</a>? Because we&#39;re about to add it in SonarQube as a native feature."}, {"owner": {"reputation": 259, "user_id": 3756947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fi0Jb.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3756947/simon"}, "reply_to_user": {"reputation": 25258, "user_id": 976155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bee1367bdf28d58f7c4527f6a84ca33?s=128&d=identicon&r=PG", "display_name": "Fabrice - SonarSource Team", "link": "https://stackoverflow.com/users/976155/fabrice-sonarsource-team"}, "edited": false, "score": 0, "creation_date": 1422461773, "post_id": 28195966, "comment_id": 44760679, "body": "Thank you Fabrice for your answer. The authentication feature seems great, but will it allow to pass the SonarQube groups as parameters in the header ? Basically, I don&#39;t want to manage user membership to a group on Sonar side but on my SSO platform side. that&#39;s why I want ot use the groups definition already located in the Principal of the HttpServletRequest."}, {"owner": {"reputation": 25258, "user_id": 976155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bee1367bdf28d58f7c4527f6a84ca33?s=128&d=identicon&r=PG", "display_name": "Fabrice - SonarSource Team", "link": "https://stackoverflow.com/users/976155/fabrice-sonarsource-team"}, "edited": false, "score": 0, "creation_date": 1422536119, "post_id": 28195966, "comment_id": 44793857, "body": "Hopefully this will be possible, yes."}], "answers": [{"comments": [{"owner": {"reputation": 259, "user_id": 3756947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fi0Jb.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3756947/simon"}, "edited": false, "score": 0, "creation_date": 1424083404, "post_id": 28215340, "comment_id": 45393006, "body": "Thank you. I guess I just need to wait. Look forward to using this feature"}], "tags": [], "owner": {"reputation": 25258, "user_id": 976155, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3bee1367bdf28d58f7c4527f6a84ca33?s=128&d=identicon&r=PG", "display_name": "Fabrice - SonarSource Team", "link": "https://stackoverflow.com/users/976155/fabrice-sonarsource-team"}, "is_accepted": false, "score": 1, "last_activity_date": 1422536166, "creation_date": 1422536166, "answer_id": 28215340, "question_id": 28195966, "link": "https://stackoverflow.com/questions/28195966/sonarqube-single-sign-on-plugin-update-groups-from-httpservletrequest/28215340#28215340", "title": "SonarQube Single Sign On Plugin, update groups from HttpServletRequest", "body": "<p><a href=\"https://jira.codehaus.org/browse/SONAR-5430\" rel=\"nofollow\">SONAR-5430</a> will allow to natively implement such a feature.</p>\n"}, {"tags": [], "owner": {"reputation": 259, "user_id": 3756947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fi0Jb.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3756947/simon"}, "is_accepted": false, "score": 0, "last_activity_date": 1424085270, "creation_date": 1424085270, "answer_id": 28540154, "question_id": 28195966, "link": "https://stackoverflow.com/questions/28195966/sonarqube-single-sign-on-plugin-update-groups-from-httpservletrequest/28540154#28540154", "title": "SonarQube Single Sign On Plugin, update groups from HttpServletRequest", "body": "<p>For people who cannot use the solution of Fabrice, here is what I did until the new feature is released.</p>\n\n<p>I create a controller in ruby I add to my plugin realm.\nThis controller extends ApplicationController controller.</p>\n\n<p>It redefines authenticate method wich calls the default method of Sonar</p>\n\n<pre><code>    def authenticate\n    begin\n      self.current_user = User.authenticate(nil, nil, servlet_request)\n\n    if self.current_user\n        my_synchronize_groups(servlet_request)\n    end\n\n    rescue Exception =&gt; e\n      self.current_user = nil\n      Rails.logger.error(e.message)\n    end\n    redirect_back_or_default(home_url)\n  end\n</code></pre>\n\n<p>When you use a <code>User.authenticate(nil, nil, servlet_request)</code> it calls the <code>synchronize_groups(user)</code> in need_authorization.rb and synchronize the groups.</p>\n\n<p>What I do is calling my_synchronize_groups after User.authenticate(nil, nil, servlet_request) to override the groups synchronization done by sonar.</p>\n\n<p>Here is the code of my_synchronize_groups</p>\n\n<pre><code>def my_synchronize_groups(servlet_request)\nRails.logger.debug(\"My synchronize_groups method\")\nmyRealm = RealmFactory.realm\nRails.logger.debug(\"My realm  #{myRealm}\")\n    if myRealm\n        myGroupsProvider = myRealm.instance_variable_get(:@java_groups_provider)\n        Rails.logger.debug(\"My group provider #{myGroupsProvider}\")\n\n        if myGroupsProvider\n          begin\n            groups = myGroupsProvider.doGetGroups(servlet_request)\n          rescue Exception =&gt; e\n            Rails.logger.error(\"Error from my groups provider: #{e.message}\")\n          else\n            if groups\n              self.current_user.groups = []\n              for group_name in groups\n                group = Group.find_by_name(group_name)\n                if group\n                  self.current_user.groups &lt;&lt; group\n                end\n              end\n            end\n          end\n        end\n    end\nend\n</code></pre>\n\n<p>The method myGroupsProvider.doGetGroups(servlet_request) is a method located in  MyGroupsProvider.java which extends ExternalGroupsProvider.java and return a collection of String.</p>\n\n<p>I am not saying it is the best solution but with my knowledge of Ruby ...</p>\n\n<p>Hoping it can help</p>\n\n<p>Simon</p>\n"}], "owner": {"reputation": 259, "user_id": 3756947, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/fi0Jb.jpg?s=128&g=1", "display_name": "Simon", "link": "https://stackoverflow.com/users/3756947/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1424085270, "creation_date": 1422458604, "last_edit_date": 1422460155, "question_id": 28195966, "link": "https://stackoverflow.com/questions/28195966/sonarqube-single-sign-on-plugin-update-groups-from-httpservletrequest", "title": "SonarQube Single Sign On Plugin, update groups from HttpServletRequest", "body": "<p>I am writing a single sign on plugin for SonarQube.\nAll my user information are located in the UserPrincipal of the HttpRequest (not the password ;-) ).\nFor the moment, I can sign on and provide the UserDetails to Sonar through the method  </p>\n\n<pre><code>public UserDetails doGetUserDetails(Context context);\n</code></pre>\n\n<p>Now I would like to provide the groups of the user to SonarQube but the method </p>\n\n<pre><code>public Collection&lt;String&gt; doGetGroups(String username)\n</code></pre>\n\n<p>does not provide the context.</p>\n\n<p>To solve my issue, I have modified the code of need_authentication.rb of Sonar (located in sonarqube-4.4\\web\\WEB-INF\\lib)\nto call a method </p>\n\n<pre><code>public Collection&lt;String&gt; doGetGroups(String username, HttpServletRequest)\n</code></pre>\n\n<p>I have written.</p>\n\n<p>But I don't like modyfing source code; I would prefer overide it by extending the class PluginRealm of the file need_authentication.rb.</p>\n\n<p>Basically, how do I extend a class in SonarQube ?\nI know how to overide a controller but not class located in lib folder.\nAlso (I don't know Ruby at all).</p>\n\n<p>Thank you for your help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "caching", "memcached", "cache-expiration"], "answers": [{"tags": [], "owner": {"reputation": 146, "user_id": 984737, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2fe31f16bfbe7293ddadebe9c16c1f8?s=128&d=identicon&r=PG", "display_name": "Oskar Holmkratz", "link": "https://stackoverflow.com/users/984737/oskar-holmkratz"}, "is_accepted": false, "score": 0, "last_activity_date": 1430731301, "creation_date": 1430731301, "answer_id": 30026611, "question_id": 28195762, "link": "https://stackoverflow.com/questions/28195762/ruby-how-to-refresh-the-fragment-cache-after-being-expired-in-rails/30026611#30026611", "title": "Ruby - How to refresh the Fragment cache after being expired in Rails", "body": "<p>The whole concept of caching is \"do something and remember it for next time\".</p>\n\n<p>If I understand your questions correct; you're trying to do something else, i.e. \"have something always prepared for when something is run\" --- so you should probably use something else.</p>\n\n<p>Memcached supports storing key:value pair of data - so if you want something to always be ready and \"prebaked\" you can skip using cache, and instead just store the key:values to Memcached. Then update it on after_save and after_destroy etc.</p>\n\n<p>Other than that - the fragment cache will automatically renew itself when accessed and not in cache.</p>\n"}], "owner": {"reputation": 67, "user_id": 3428294, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1378418517/picture?type=large", "display_name": "user3428294", "link": "https://stackoverflow.com/users/3428294/user3428294"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 463, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1430731301, "creation_date": 1422458134, "question_id": 28195762, "link": "https://stackoverflow.com/questions/28195762/ruby-how-to-refresh-the-fragment-cache-after-being-expired-in-rails", "title": "Ruby - How to refresh the Fragment cache after being expired in Rails", "body": "<p>I have an Ruby on Rails application where fragment caching is used and using memcached for storing the data.Also i have a sweeper which expires the cache when changes are made to the model. </p>\n\n<pre><code>index.html.erb\n\n&lt;% cache 'recent_albums' do %&gt;\ncontents to be cached\n&lt;%end %&gt;\n\n\nclass AlbumsSweeper &lt; ActionController::Caching::Sweeper\n  observe Album\n\n  def after_save(album)\n    expire_cache(album)\n  end\n\n  def after_destroy(album)\n    expire_cache(album)\n  end\n\n  def expire_cache(album)\n    expire_fragment 'recent_albums'\n  end\n\nend\n</code></pre>\n\n<p>I have a requirement where before the user hits the Albums page the expired fragment needs to be refreshed with the new data. \n           Can someone please help on  how the fragment cache data refresh can be implemented?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "edited": false, "score": 0, "creation_date": 1422457750, "post_id": 28195593, "comment_id": 44757884, "body": "answer for 4) only if you make method as <code>static</code> or <code>class</code> method"}, {"owner": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 2, "creation_date": 1422457893, "post_id": 28195593, "comment_id": 44757989, "body": "To clarify Nermin&#39;s comment, you would change <code>def combine_models</code> to <code>def self.combine_models</code>. Also, if you aren&#39;t storing any state, I&#39;d make it a module, leave the method as <code>def combine_models</code> and <code>include</code> it in <code>ApplicationController</code>."}, {"owner": {"reputation": 13872, "user_id": 29613, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/o1X9X.jpg?s=128&g=1", "display_name": "Tod Birdsall", "link": "https://stackoverflow.com/users/29613/tod-birdsall"}, "reply_to_user": {"reputation": 2859, "user_id": 3945932, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a1794745acd9e572c24558b78b48d597?s=128&d=identicon&r=PG", "display_name": "ptd", "link": "https://stackoverflow.com/users/3945932/ptd"}, "edited": false, "score": 0, "creation_date": 1422459726, "post_id": 28195593, "comment_id": 44759283, "body": "@ptd Thanks for the clarification. I have changed it from class to module. I added <code>include CombineClass</code> to <code>ApplicationController</code>, but now I get error: <code>undefined method &#39;combine_models&#39; for CombineClass:Module</code>. I also tried <code>require &#39;combine_class&#39;</code>, but get same error."}], "answers": [{"comments": [{"owner": {"reputation": 13872, "user_id": 29613, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/o1X9X.jpg?s=128&g=1", "display_name": "Tod Birdsall", "link": "https://stackoverflow.com/users/29613/tod-birdsall"}, "edited": false, "score": 0, "creation_date": 1422466786, "post_id": 28196631, "comment_id": 44763953, "body": "This is exactly what I was looking for. I have been researching this problem for a while and wanted to use <code>app&#47;projectname&#47;file_name.rb</code>, but could not get it to work because I was not using <code>def self.run</code>."}], "tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": true, "score": 1, "last_activity_date": 1422460379, "creation_date": 1422460379, "answer_id": 28196631, "question_id": 28195593, "link": "https://stackoverflow.com/questions/28195593/where-to-put-method-that-combines-two-models/28196631#28196631", "title": "Where to put method that combines two models", "body": "<p>I would recommend you to read this article: <a href=\"http://karolgalanciak.com/blog/2013/10/06/structuring-rails-applications/\" rel=\"nofollow\">Structuring Rails Applications</a> and extract your logic into <code>app/usecases/model1_model2_combiner_usecase.rb</code>( <code>app/models</code> isn't really a good place for this), which may look like this:</p>\n\n<pre><code>class Model1Model2CombinerUsecase\n  def self.run\n    ...\n  end\nend\n</code></pre>\n\n<p>Of course rename it properly, then just call it in your controller with </p>\n\n<pre><code>@combined_models = Model1Model2CombinerUsecase.run\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1121, "user_id": 3563504, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iXEHR.png?s=128&g=1", "display_name": "Klaus", "link": "https://stackoverflow.com/users/3563504/klaus"}, "is_accepted": false, "score": 0, "last_activity_date": 1422461766, "creation_date": 1422461766, "answer_id": 28197118, "question_id": 28195593, "link": "https://stackoverflow.com/questions/28195593/where-to-put-method-that-combines-two-models/28197118#28197118", "title": "Where to put method that combines two models", "body": "<p>I suggest to put in into the concerns folder of the model dir.</p>\n\n<p>models/concerns/combine_models.rb:</p>\n\n<pre><code>module CombineModels\n  extend ActiveSupport::Concern\n\n  def combine_model1_model2\n    ...\n  end\nend\n</code></pre>\n\n<p>In your models you can include the module:</p>\n\n<pre><code>class Model1\n  include CombineModels\n\n  ...\nend\n\nclass Model2\n  include CombineModels\n\n  ...\nend\n</code></pre>\n\n<p>You can use your combine methods in every model, which includes the CombineModels module</p>\n"}, {"tags": [], "owner": {"reputation": 1133, "user_id": 1203, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/289399fbee544494fa22c697194139fa?s=128&d=identicon&r=PG", "display_name": "mhinton", "link": "https://stackoverflow.com/users/1203/mhinton"}, "is_accepted": false, "score": 0, "last_activity_date": 1422546469, "creation_date": 1422546469, "answer_id": 28218828, "question_id": 28195593, "link": "https://stackoverflow.com/questions/28195593/where-to-put-method-that-combines-two-models/28218828#28218828", "title": "Where to put method that combines two models", "body": "<p>There's nothing actually wrong with leaving your class in the models directory although the newest Rails convention is to make it a concern. </p>\n\n<p>If you only want the aggregate of some property of the two models and there isn't other behavior that your combination class is going to implement I would go with a simple solution like this.</p>\n\n<pre><code>class CombineFooAndBar\n  def self.combine_models(f, b)\n    f.x + b.y\n  end\nend\n\nclass Foo\n  attr_accessor :x\nend\nclass Bar\n  attr_accessor :y\nend\n\nf = Foo.new\nf.x = 2\nb = Bar.new\nb.y = 3\n\nputs \"CombineFooAndBar value is #{CombineFooAndBar.combine_models(f,b)}\"\n</code></pre>\n\n<p>If you need more behavior later then I would refactor it to a concern at that time.</p>\n"}], "owner": {"reputation": 13872, "user_id": 29613, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/o1X9X.jpg?s=128&g=1", "display_name": "Tod Birdsall", "link": "https://stackoverflow.com/users/29613/tod-birdsall"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 28196631, "answer_count": 3, "score": 0, "last_activity_date": 1422546469, "creation_date": 1422457653, "question_id": 28195593, "link": "https://stackoverflow.com/questions/28195593/where-to-put-method-that-combines-two-models", "title": "Where to put method that combines two models", "body": "<p>I am new to Ruby and new to Rails.</p>\n\n<p>I have a method that queries two different data models, combines the results and returns the combined results</p>\n\n<pre><code>def combine_models\n    ...\nend\n</code></pre>\n\n<p>The method currently resides in a controller. I want to move the method to a module or class (still unsure which) so that the method can be used in multiple controllers.</p>\n\n<p>1) Where is the best place to put this?</p>\n\n<p>2) Should it be a module or a class?</p>\n\n<p>3) What would the contents of the .rb file look like?</p>\n\n<p>Currently I have it in <code>/models/combine_class.rb</code>. The contents of the file are:</p>\n\n<pre><code>class CombineClass\n    def combine_models\n        ...\n    end\nend\n</code></pre>\n\n<p>The class appears to auto load, but to call the method I must use <code>CombineClass.new.combine_models</code>.</p>\n\n<p>4) Is that the proper way to call the method? Is there a way I could call the method without <code>.new.</code>?</p>\n"}, {"tags": ["java", "ruby", "jruby"], "comments": [{"owner": {"reputation": 1841, "user_id": 660887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/18b3a6e07ac8dc07b978568f6ad6a010?s=128&d=identicon&r=PG", "display_name": "jamp", "link": "https://stackoverflow.com/users/660887/jamp"}, "edited": false, "score": 0, "creation_date": 1422458441, "post_id": 28195525, "comment_id": 44758333, "body": "did you try calling put() before eval() ?"}, {"owner": {"reputation": 1841, "user_id": 660887, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/18b3a6e07ac8dc07b978568f6ad6a010?s=128&d=identicon&r=PG", "display_name": "jamp", "link": "https://stackoverflow.com/users/660887/jamp"}, "edited": false, "score": 0, "creation_date": 1422459134, "post_id": 28195525, "comment_id": 44758853, "body": "I&#39;m not sure it works this way, since res is a local variable that the ScriptEngine knows nothing about... try to return the value from the function and print what eval() returns..."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 1442090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c847360855db96898d5bd1c3e038273?s=128&d=identicon&r=PG", "display_name": "eriv", "link": "https://stackoverflow.com/users/1442090/eriv"}, "edited": false, "score": 0, "creation_date": 1422459543, "post_id": 28196043, "comment_id": 44759136, "body": "can you tell me please,how can i call the addition(a,b)?"}, {"owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "reply_to_user": {"reputation": 13, "user_id": 1442090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c847360855db96898d5bd1c3e038273?s=128&d=identicon&r=PG", "display_name": "eriv", "link": "https://stackoverflow.com/users/1442090/eriv"}, "edited": false, "score": 0, "creation_date": 1422478959, "post_id": 28196043, "comment_id": 44770807, "body": "Do you know Ruby?  If not, time to learn.  <a href=\"https://www.ruby-lang.org/en/documentation/quickstart/\" rel=\"nofollow noreferrer\">ruby-lang.org/en/documentation/quickstart</a>  Basically, you can either add the call at the end of your script file, or you can use <code>jruby.eval(...)</code> to evaluate a Ruby expression that calls the function.  I haven&#39;t personally used JRuby from within a Java program, so I don&#39;t know the exact details.  <i>Maybe</i> just as simple as <code>jruby.eval(&quot;addition(a,b)&quot;);</code>"}], "tags": [], "owner": {"reputation": 19267, "user_id": 801894, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/67f2ccd17aa6fd622152ad88fc2ae784?s=128&d=identicon&r=PG", "display_name": "Solomon Slow", "link": "https://stackoverflow.com/users/801894/solomon-slow"}, "is_accepted": false, "score": 2, "last_activity_date": 1422458828, "creation_date": 1422458828, "answer_id": 28196043, "question_id": 28195525, "link": "https://stackoverflow.com/questions/28195525/how-to-execute-a-ruby-file-in-java/28196043#28196043", "title": "How to execute a Ruby file in Java?", "body": "<p>Your <code>rubyTest.rb</code> script defines a function, <code>addition(a, b)</code>, but where do you ever <em>call</em> that function?  </p>\n\n<p>This defines the function in the interpreter:</p>\n\n<pre><code>jruby.eval(new BufferedReader(new FileReader(\"rubyTest.rb\")));\n</code></pre>\n\n<p>Then you assign top-level variables <code>a</code> and <code>b</code>, and then you ask for the value of <code>res</code>, but I don't see anywhere where your program calls the <code>addition(a,b)</code> function.</p>\n"}, {"tags": [], "owner": {"reputation": 236, "user_id": 1487919, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb771f749b4253de6a587a9214e1331b?s=128&d=identicon&r=PG", "display_name": "Ewaryst Schulz", "link": "https://stackoverflow.com/users/1487919/ewaryst-schulz"}, "is_accepted": false, "score": 0, "last_activity_date": 1446796131, "creation_date": 1446796131, "answer_id": 33561857, "question_id": 28195525, "link": "https://stackoverflow.com/questions/28195525/how-to-execute-a-ruby-file-in-java/33561857#33561857", "title": "How to execute a Ruby file in Java?", "body": "<p>James Answer contains already the solution.</p>\n\n<p>It's just as simple as <code>jruby.eval(\"addition(2,3)\");</code></p>\n\n<p>If you really need to work with variables <code>a, b</code> you can make them global (with all the sideeffects of global variables) <code>$a, $b</code> and assign the values like that</p>\n\n<pre><code> jruby.eval(\"$a = 2\");\n jruby.eval(\"$b = 3\");\n System.out.println(\"result: \" + jruby.eval(\"addition($a,$b)\"));\n</code></pre>\n\n<p>The Bindings mechanism of Java Scripting seem not to work as the following code <strong>FAILS</strong>:</p>\n\n<pre><code> Bindings bindings = jruby.createBindings();\n bindings.put(\"a\", 2);\n bindings.put(\"a\", 3);\n // variation A\n System.out.println(\"result: \" + jruby.eval(\"addition(a,b)\", bindings));\n\n // variation B\n jruby.setBindings(bindings, ScriptContext.ENGINE_SCOPE);\n System.out.println(\"result: \" + jruby.eval(\"addition(a,b)\"));\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 1442090, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5c847360855db96898d5bd1c3e038273?s=128&d=identicon&r=PG", "display_name": "eriv", "link": "https://stackoverflow.com/users/1442090/eriv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2051, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1446796131, "creation_date": 1422457483, "question_id": 28195525, "link": "https://stackoverflow.com/questions/28195525/how-to-execute-a-ruby-file-in-java", "title": "How to execute a Ruby file in Java?", "body": "<p>I am trying to run Ruby code using Java. This code gives me an empty result. \n(result: null)\nCould any one please help me finding the error? </p>\n\n<p>Java :</p>\n\n<pre><code>    public static void callRuby(){\n\n      ScriptEngine jruby = new ScriptEngineManager().getEngineByName(\"jruby\");\n        //process a ruby file\n        try {           \n             jruby.eval(new BufferedReader(new FileReader(\"rubyTest.rb\")));\n             jruby.put(\"a\", \"2\");\n             jruby.put(\"b\", \"3\");   \n             System.out.println(\"result: \" +jruby.get(\"res\"));\n\n        } catch (FileNotFoundException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        } catch (ScriptException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n\n}\n</code></pre>\n\n<p>rubyTest.rb</p>\n\n<pre><code>def addition(a,b)\nputs a\nputs b\nres = a + b\nend\n</code></pre>\n"}, {"tags": ["ruby", "reflection"], "comments": [{"owner": {"reputation": 846, "user_id": 2509071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20343edb616a4c88cbbd67c1d6da2ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Doydle", "link": "https://stackoverflow.com/users/2509071/doydle"}, "edited": false, "score": 0, "creation_date": 1422461017, "post_id": 28195369, "comment_id": 44760193, "body": "Why do you need to know? Just curiosity?"}, {"owner": {"reputation": 772, "user_id": 614709, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad742bd02b2b67ae4e5cad6c6a888d93?s=128&d=identicon&r=PG", "display_name": "yitznewton", "link": "https://stackoverflow.com/users/614709/yitznewton"}, "reply_to_user": {"reputation": 846, "user_id": 2509071, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/20343edb616a4c88cbbd67c1d6da2ecd?s=128&d=identicon&r=PG&f=1", "display_name": "Doydle", "link": "https://stackoverflow.com/users/2509071/doydle"}, "edited": false, "score": 0, "creation_date": 1422543633, "post_id": 28195369, "comment_id": 44798886, "body": "I was doing a kata and saw a way to cycle through available operations by using the list of available methods. So yeah, mostly academic curiosity."}], "owner": {"reputation": 772, "user_id": 614709, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ad742bd02b2b67ae4e5cad6c6a888d93?s=128&d=identicon&r=PG", "display_name": "yitznewton", "link": "https://stackoverflow.com/users/614709/yitznewton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422457058, "creation_date": 1422457058, "question_id": 28195369, "link": "https://stackoverflow.com/questions/28195369/order-of-methods-from-objectmethods-in-ruby", "title": "Order of methods from Object#methods in Ruby", "body": "<p>Does Ruby specify the order of methods returned from <code>Object#methods</code>? It seems to be done in order of definition in MRI, but I didn't see that specified in the documentation.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9761, "user_id": 602928, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/605cc07a3672257a8215de060a2b90a4?s=128&d=identicon&r=PG", "display_name": "Michael Laffargue", "link": "https://stackoverflow.com/users/602928/michael-laffargue"}, "edited": false, "score": 0, "creation_date": 1422457056, "post_id": 28195242, "comment_id": 44757382, "body": "&quot;Float objects represent inexact real numbers using the native architecture&#39;s double-precision floating point representation.&quot;. There is accuracy problem with Floats. In python : 1.0/10=0.10000000000000001"}], "owner": {"reputation": 9293, "user_id": 63621, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1698e0dceda985e2b71b15b5567dd795?s=128&d=identicon&r=PG", "display_name": "Henrik", "link": "https://stackoverflow.com/users/63621/henrik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1422456933, "answer_count": 0, "score": 1, "last_activity_date": 1422456712, "creation_date": 1422456712, "question_id": 28195242, "link": "https://stackoverflow.com/questions/28195242/ruby-rounding-problems-1-005-vs-0-005", "closed_reason": "Duplicate", "title": "Ruby rounding problems 1.005 vs 0.005", "body": "<p>Why?</p>\n\n<pre><code>irb(main):001:0&gt; 1.005.round(2)\n=&gt; 1.0\nirb(main):002:0&gt; 0.005.round(2)\n=&gt; 0.01\nirb(main):010:0&gt; puts RUBY_VERSION\n2.1.2\n</code></pre>\n\n<p><a href=\"http://www.ruby-doc.org/core-2.1.2/Float.html#method-i-round\" rel=\"nofollow\">http://www.ruby-doc.org/core-2.1.2/Float.html#method-i-round</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord", "model-associations"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422456672, "post_id": 28194874, "comment_id": 44757124, "body": "I see the point with resources :-) - I will try again. Thanks"}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "reply_to_user": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422457057, "post_id": 28194874, "comment_id": 44757384, "body": "Of course, you don&#39;t need to setup the routes. If you want the list of a project&#39;s tasks, just use this code in any controller you want: <code>@tasks = Project.find(project_id).tasks</code> (where project_id is any id you want/need). It might not be the &quot;rails way&quot;, but it still works."}, {"owner": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422574714, "post_id": 28194874, "comment_id": 44816665, "body": "new problem: now I can click to a project and get the list of all tasks related to this project. But: when I try to add a new task I got the error message undefined method `tasks_path&#39; imho the resource path looks ok...  <a href=\"http://activerecord-01.dev/projects/1/tasks/new\" rel=\"nofollow noreferrer\">activerecord-01.dev/projects/1/tasks/new</a>"}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "reply_to_user": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422575024, "post_id": 28194874, "comment_id": 44816779, "body": "You need to put <code>new_project_task_path(project_id)</code> for a new task associated with the project with id of <code>project_id</code>."}, {"owner": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422577295, "post_id": 28194874, "comment_id": 44817526, "body": "now: I got <code>undefined local variable or method `project_id&#39;</code>"}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "reply_to_user": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422577517, "post_id": 28194874, "comment_id": 44817598, "body": "In your controller, which variable are you assigning the project to?"}, {"owner": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422578806, "post_id": 28194874, "comment_id": 44817957, "body": "[tasks_controller]  <code>def index    @tasks = Project.find(params[:project_id]).tasks.all    respond_with(@tasks)   end  def new    @task = Project.find(params[:project_id]).tasks.new   respond_with(@task)   end   def create     @task = Project.find(params[:project_id]).tasks.new(task_params)     @task.save     respond_with(@task)   end   def update     @task.update(task_params)     respond_with(@task)  end  private    def set_task      @task = Project.find(params[:project_id]).tasks.find(params[:id])    end    def task_params     params.require(:task).permit(:name, :project_id)   end end</code>"}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "reply_to_user": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422579372, "post_id": 28194874, "comment_id": 44818099, "body": "Ok, I see. Change <code>new_project_task_path(project_id)</code> to <code>new_project_task_path(params[:project_id])</code> and you should be good."}, {"owner": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422581218, "post_id": 28194874, "comment_id": 44818581, "body": "still same problem. :-("}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "reply_to_user": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422581463, "post_id": 28194874, "comment_id": 44818661, "body": "What is the path (url) of the page you are getting the error?"}, {"owner": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422581758, "post_id": 28194874, "comment_id": 44818746, "body": "<a href=\"http://localhost:3000/projects/1/tasks\" rel=\"nofollow noreferrer\">localhost:3000/projects/1/tasks</a> -&gt; then I click to the new task link <a href=\"http://localhost:3000/projects/1/tasks/new\" rel=\"nofollow noreferrer\">localhost:3000/projects/1/tasks/new</a>"}, {"owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "reply_to_user": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "edited": false, "score": 0, "creation_date": 1422587000, "post_id": 28194874, "comment_id": 44820083, "body": "Ok, instead of <code>project_id</code> try just <code>id</code>. That is all I can tell you."}], "tags": [], "owner": {"reputation": 3807, "user_id": 733721, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/29kzY.jpg?s=128&g=1", "display_name": "Ryan K", "link": "https://stackoverflow.com/users/733721/ryan-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1422455714, "creation_date": 1422455714, "answer_id": 28194874, "question_id": 28194735, "link": "https://stackoverflow.com/questions/28194735/rails-4-active-record-associations-how-to-list-all-tasks-from-a-project/28194874#28194874", "title": "rails 4: active record associations: how to list all tasks from a project?", "body": "<p>In your routes file, put something like this:</p>\n\n<pre><code>  resources :projects do\n    resources :tasks\n  end\n</code></pre>\n\n<p>That will give you a route (among others) that looks like this:</p>\n\n<pre><code>project_tasks_path(project_id)\n</code></pre>\n\n<p>Which equates to:</p>\n\n<pre><code>/projects/:project_id/tasks\n</code></pre>\n\n<p>That route will give you all the tasks associated with that particular project. Of course, you still need to set up your controller to get the tasks from the database like:</p>\n\n<pre><code>@tasks = Project.find(params[:project_id]).tasks\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 1722721, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/593331ce1c35001f09ba9577f2ce033f?s=128&d=identicon&r=PG", "display_name": "user1722721", "link": "https://stackoverflow.com/users/1722721/user1722721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 762, "favorite_count": 0, "accepted_answer_id": 28194874, "answer_count": 1, "score": 0, "last_activity_date": 1422455714, "creation_date": 1422455339, "question_id": 28194735, "link": "https://stackoverflow.com/questions/28194735/rails-4-active-record-associations-how-to-list-all-tasks-from-a-project", "title": "rails 4: active record associations: how to list all tasks from a project?", "body": "<p>I have a created a demoapp, where users can have many projects, and each projects can have many tasks. </p>\n\n<p>When I am logged in as a user, and visit project_path, all available and related projects to this user are listed.</p>\n\n<p>But now, how can I list all tasks related to a project, from this user?</p>\n\n<p>this is how I create demoapp:</p>\n\n<pre><code>rails g scaffold Project name:string user_id:integer task_id:integer\nrails g scaffold Task name:string project_id:integer\nrake db:migrate\n</code></pre>\n\n<p><strong>[app/models/user.rb]</strong></p>\n\n<pre><code>has_many :projects\nhas_many :tasks, through: :project\n</code></pre>\n\n<p><strong>[app/models/project.rb]</strong></p>\n\n<pre><code>belongs_to :user\nhas_many   :tasks\n</code></pre>\n\n<p><strong>[app/models/task.rb]</strong></p>\n\n<pre><code>belongs_to :project\n</code></pre>\n\n<p><strong>[db/seeds.rb]</strong></p>\n\n<pre><code>user = User.create! email: 'user@example.com', password: 'password', password_confirmation: 'password'\nproject = Project.create! name: 'project 1 @user', user_id: user.id\ntask = Task.create! name: 'task 1 @project 1 @user', project_id: project.id\n\nuser = User.create! email: 'admin@example.com', password: 'password', password_confirmation: 'password'\nproject = Project.create! name: 'project 1 @admin', user_id: user.id\ntask = Task.create! name: 'task 1 @project 1 @admin', project_id: project.id\ntask = Task.create! name: 'task 2 @project 1 @admin', project_id: project.id\n</code></pre>\n\n<p>and run rake</p>\n\n<pre><code>rake db:reset\n</code></pre>\n\n<p>finally I add devise authorization</p>\n\n<p><strong>[projects_controller.rb]</strong></p>\n\n<pre><code>before_action :authenticate_user!\n# replace all Project with current_user.projects\n</code></pre>\n\n<p><strong>[tasks_controller.rb]</strong></p>\n\n<pre><code>before_action :authenticate_user!\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "is_accepted": false, "score": 1, "last_activity_date": 1422454975, "creation_date": 1422454975, "answer_id": 28194601, "question_id": 28194520, "link": "https://stackoverflow.com/questions/28194520/rails-output-html-after-evaluating-each-value-in-an-array/28194601#28194601", "title": "Rails output html after evaluating each value in an array", "body": "<p>Collect the return value and return it at the end of the method:</p>\n\n<pre><code>def show_power_buttons\n    levels = [1, 2, 3, 4, 5]\n    retval = []\n    levels.each do |level|\n        count = @player.powers.where(level: level).count\n        if count &gt; 0\n            retval &lt;&lt; link_to level, '#', :class =&gt; 'btn btn-primary'\n        end\n    end\n    return retaval \nend\n</code></pre>\n\n<p>It will output the arrach of links.</p>\n"}, {"comments": [{"owner": {"reputation": 131, "user_id": 2809586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/481e246e119e064c08b2ca032a29af57?s=128&d=identicon&r=PG&f=1", "display_name": "Hacktacus", "link": "https://stackoverflow.com/users/2809586/hacktacus"}, "edited": false, "score": 0, "creation_date": 1422455645, "post_id": 28194632, "comment_id": 44756448, "body": "Yes, you are right I&#39;ll have to use html_safe. Any reason to use &#39;map&#39; over pushing directly to array like in the other answer?"}, {"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "reply_to_user": {"reputation": 131, "user_id": 2809586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/481e246e119e064c08b2ca032a29af57?s=128&d=identicon&r=PG&f=1", "display_name": "Hacktacus", "link": "https://stackoverflow.com/users/2809586/hacktacus"}, "edited": false, "score": 2, "creation_date": 1422455757, "post_id": 28194632, "comment_id": 44756529, "body": "<code>map</code> is more cleaner, because it is meant for this. Map array that it contains the element you desire <a href=\"http://www.ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Array.html#method-i-map</a>"}, {"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "reply_to_user": {"reputation": 131, "user_id": 2809586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/481e246e119e064c08b2ca032a29af57?s=128&d=identicon&r=PG&f=1", "display_name": "Hacktacus", "link": "https://stackoverflow.com/users/2809586/hacktacus"}, "edited": false, "score": 1, "creation_date": 1422456825, "post_id": 28194632, "comment_id": 44757220, "body": "@Hacktacus you don&#39;t need to initialize and fill array manually. Why do you ever want to use 2 variables, when 1 is enough?"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": true, "score": 3, "last_activity_date": 1422455045, "creation_date": 1422455045, "answer_id": 28194632, "question_id": 28194520, "link": "https://stackoverflow.com/questions/28194520/rails-output-html-after-evaluating-each-value-in-an-array/28194632#28194632", "title": "Rails output html after evaluating each value in an array", "body": "<p><code>each</code> returns <code>array</code> on which you have called it, it does not return result of the block.</p>\n\n<p>You can use <code>map</code> to make this work</p>\n\n<pre><code>def show_power_buttons\n  levels = [1, 2, 3, 4, 5]\n\n  levels.map do |level|\n    count = @player.powers.where(level: level).count        \n    (link_to level, '#', :class =&gt; 'btn btn-primary') if count &gt; 0\n  end.compact.join('\\n').html_safe\nend\n</code></pre>\n\n<p><code>compact</code> will discard all <code>nil</code> values, we then use <code>join</code> because this is still array, you can join it or can use it this way and in your <code>view</code> just say:</p>\n\n<pre><code>def show_power_buttons\n  levels = [1, 2, 3, 4, 5]\n\n  levels.map do |level|\n    count = @player.powers.where(level: level).count        \n    (link_to level, '#', :class =&gt; 'btn btn-primary') if count &gt; 0\n  end.compact # returns array of string that are links\nend\n\n&lt;%= show_power_buttons.each do |pw| %&gt;\n  &lt;%= pw.html_safe %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You have to use html safe, because it will convert string to html</p>\n"}], "owner": {"reputation": 131, "user_id": 2809586, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/481e246e119e064c08b2ca032a29af57?s=128&d=identicon&r=PG&f=1", "display_name": "Hacktacus", "link": "https://stackoverflow.com/users/2809586/hacktacus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 28194632, "answer_count": 2, "score": 0, "last_activity_date": 1422455045, "creation_date": 1422454745, "question_id": 28194520, "link": "https://stackoverflow.com/questions/28194520/rails-output-html-after-evaluating-each-value-in-an-array", "title": "Rails output html after evaluating each value in an array", "body": "<p>I am writing a helper method for my rails views. After evaluating each value in an array I want to output a button to the html. However, 'puts' is not working and 'return' will work only for one value and end the operator there only.</p>\n\n<pre><code>def show_power_buttons\n    levels = [1, 2, 3, 4, 5]\n\n    levels.each do |level|\n        count = @player.powers.where(level: level).count\n        if count &gt; 0\n            puts (link_to level, '#', :class =&gt; 'btn btn-primary')\n        end\n    end\nend\n</code></pre>\n\n<p>I know I am missing something very obvious but unable to figure it out.</p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-dynamodb", "aws-sdk"], "answers": [{"comments": [{"owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "edited": false, "score": 0, "creation_date": 1422464874, "post_id": 28198003, "comment_id": 44762781, "body": "That&#39;s exactly what I&#39;m looking for. It&#39;s a shame there&#39;s only a &quot;starts with&quot; comparison operator, but like you said, I can take care of that myself."}, {"owner": {"reputation": 7493, "user_id": 2731402, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc3041ba35bf6d9c95b5fc4a77764e36?s=128&d=identicon&r=PG", "display_name": "visola", "link": "https://stackoverflow.com/users/2731402/visola"}, "edited": false, "score": 0, "creation_date": 1601492257, "post_id": 28198003, "comment_id": 113428443, "body": "You should highlight in your answer that this will force a scan and breaks things like pagination using limits and last evaluated key."}], "tags": [], "owner": {"reputation": 84, "user_id": 240308, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/x0MJu.jpg?s=128&g=1", "display_name": "Ryan Kelley", "link": "https://stackoverflow.com/users/240308/ryan-kelley"}, "is_accepted": true, "score": 3, "last_activity_date": 1422464262, "creation_date": 1422464262, "answer_id": 28198003, "question_id": 28194328, "link": "https://stackoverflow.com/questions/28194328/is-it-possible-to-get-items-from-dynamodb-where-the-primary-key-ends-with-a-give/28198003#28198003", "title": "Is it possible to get items from DynamoDB where the primary key ends with a given string?", "body": "<p>It looks like you would want to use the Query method on the SDK to find the items your looking for. It seems that \"EndsWith\" is not available as a comparison operator in the SDK though. So you would need to use CONTAINS and then check your results locally. </p>\n\n<p>This should lead to the best performance, letting DynamoDb do the initial heavy lifting and then further pruning the results once you receive them.</p>\n\n<p><a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#query-instance_method\" rel=\"nofollow\">http://docs.aws.amazon.com/sdkforruby/api/Aws/DynamoDB/Client.html#query-instance_method</a></p>\n"}, {"tags": [], "owner": {"reputation": 2436, "user_id": 1643257, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/s5qJB.jpg?s=128&g=1", "display_name": "Zach Moshe", "link": "https://stackoverflow.com/users/1643257/zach-moshe"}, "is_accepted": false, "score": 4, "last_activity_date": 1423127979, "last_edit_date": 1423127979, "creation_date": 1423127484, "answer_id": 28340031, "question_id": 28194328, "link": "https://stackoverflow.com/questions/28194328/is-it-possible-to-get-items-from-dynamodb-where-the-primary-key-ends-with-a-give/28340031#28340031", "title": "Is it possible to get items from DynamoDB where the primary key ends with a given string?", "body": "<p>Although @Ryan is correct and this can be done with <code>query</code>, just bear in mind that you're doing a \"full-table-scan\" here. That might be OK for a one-time job but probably not the best practice for a routine task (and of course not as a part of your API calls). </p>\n\n<p>If your use-case involves quickly finding objects based on their suffix in a specific field, consider extracting this suffix (assuming it's a fixed-size suffix) as another field and have a secondary index on that one. If you want to query arbitrary length suffixes, I would create a lookup table and update it with possible suffixes (or some of them, to save some calls, and then filter when querying).</p>\n"}], "owner": {"reputation": 5282, "user_id": 1003815, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/a2de7b72452cde6ac37a07e506d68149?s=128&d=identicon&r=PG", "display_name": "RTF", "link": "https://stackoverflow.com/users/1003815/rtf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4634, "favorite_count": 0, "accepted_answer_id": 28198003, "answer_count": 2, "score": 1, "last_activity_date": 1423127979, "creation_date": 1422454184, "question_id": 28194328, "link": "https://stackoverflow.com/questions/28194328/is-it-possible-to-get-items-from-dynamodb-where-the-primary-key-ends-with-a-give", "title": "Is it possible to get items from DynamoDB where the primary key ends with a given string?", "body": "<p>Is it possible, using the AWS Ruby SDK (or just DynamoDB in general), to get an item or items from a table that uses a primary key only, and where that primary key ends with a certain string?  </p>\n\n<p>I haven't come across anything in the docs that explicitly answers this question, either in the ruby ddb docs or the general docs for ddb. I'm not saying the question is not answered, but if it is, I can't find it.  </p>\n\n<p>If it is possible, could someone provide an example for ruby or link to the docs where an example exists? </p>\n"}, {"tags": ["ruby", "middleman"], "answers": [{"comments": [{"owner": {"reputation": 650, "user_id": 3583377, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3a24cfe35f16f61f2bae9fce3e6dadba?s=128&d=identicon&r=PG&f=1", "display_name": "5t111111", "link": "https://stackoverflow.com/users/3583377/5t111111"}, "edited": false, "score": 0, "creation_date": 1422493951, "post_id": 28194758, "comment_id": 44776508, "body": "Thank you, but &quot;directory indexes&quot; itself is not the point in this case. I want to change the paths for generated html files from the original directory tree structure."}], "tags": [], "owner": {"reputation": 168, "user_id": 1626379, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/df15cecd056f7d4764d3c0e76f46083f?s=128&d=identicon&r=PG", "display_name": "Plugataryov Yura", "link": "https://stackoverflow.com/users/1626379/plugataryov-yura"}, "is_accepted": false, "score": 0, "last_activity_date": 1422455426, "creation_date": 1422455426, "answer_id": 28194758, "question_id": 28194314, "link": "https://stackoverflow.com/questions/28194314/middleman-how-to-change-the-paths-for-generated-html-files/28194758#28194758", "title": "Middleman - How to change the paths for generated html files?", "body": "<p>I think <a href=\"https://middlemanapp.com/basics/pretty-urls/\" rel=\"nofollow\">this</a> part of Middleman doc could help you .\nAll you need is to activate directory indexes and configure it properly, and it should work.</p>\n"}, {"comments": [{"owner": {"reputation": 1020, "user_id": 973192, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/ce34d527f3dfa7d9f63fa5893078203f?s=128&d=identicon&r=PG", "display_name": "Ian Warner", "link": "https://stackoverflow.com/users/973192/ian-warner"}, "edited": false, "score": 1, "creation_date": 1486602835, "post_id": 28207105, "comment_id": 71421103, "body": "This will not work when you want to overwrite the index.html files with something else."}], "tags": [], "owner": {"reputation": 20838, "user_id": 901944, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/d40e419b14bfe393b07206602ae0271a?s=128&d=identicon&r=PG", "display_name": "Andrey Mikhaylov - lolmaus", "link": "https://stackoverflow.com/users/901944/andrey-mikhaylov-lolmaus"}, "is_accepted": true, "score": 2, "last_activity_date": 1422506357, "creation_date": 1422506357, "answer_id": 28207105, "question_id": 28194314, "link": "https://stackoverflow.com/questions/28194314/middleman-how-to-change-the-paths-for-generated-html-files/28207105#28207105", "title": "Middleman - How to change the paths for generated html files?", "body": "<p>You can use proxies to create duplicate pages, and then ignore the original pages.</p>\n\n<p><a href=\"https://middlemanapp.com/basics/dynamic-pages/\" rel=\"nofollow\">https://middlemanapp.com/basics/dynamic-pages/</a></p>\n\n<p>But the simplest way is, of course, to adjust the source structure to match the desired structure.</p>\n"}], "owner": {"reputation": 650, "user_id": 3583377, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/3a24cfe35f16f61f2bae9fce3e6dadba?s=128&d=identicon&r=PG&f=1", "display_name": "5t111111", "link": "https://stackoverflow.com/users/3583377/5t111111"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 882, "favorite_count": 0, "accepted_answer_id": 28207105, "answer_count": 2, "score": 1, "last_activity_date": 1422506357, "creation_date": 1422454135, "question_id": 28194314, "link": "https://stackoverflow.com/questions/28194314/middleman-how-to-change-the-paths-for-generated-html-files", "title": "Middleman - How to change the paths for generated html files?", "body": "<p>I'm building a website using Middleman. There are source files placed like the following.</p>\n\n<pre><code>source/index.html.md\nsource/errors/404.html\nsource/docs/foo.html.md\nsource/docs/bar.html.md\n</code></pre>\n\n<p>By default, when I build static html files, the generated files are placed following to the original directory structure (with directory indexes).</p>\n\n<pre><code>build/index.html\nbuild/errors/404/index.html\nbuild/docs/foo/index.html\nbuild/docs/bar/index.html\n</code></pre>\n\n<p>However, I want all html files to be served directly under <code>/</code>, so that they can be accessed like <code>http://example.com/foo/</code> and <code>http://example.com/404/</code>.</p>\n\n<p>How do you change the paths for generated html files?</p>\n"}, {"tags": ["ruby", "netcdf"], "answers": [{"tags": [], "owner": {"reputation": 4336, "user_id": 574181, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c78d396646e7612dead8bcd7c63a4fe?s=128&d=identicon&r=PG", "display_name": "Satya", "link": "https://stackoverflow.com/users/574181/satya"}, "is_accepted": false, "score": 0, "last_activity_date": 1422456102, "creation_date": 1422456102, "answer_id": 28195013, "question_id": 28194272, "link": "https://stackoverflow.com/questions/28194272/how-to-install-ruby-netcdf-with-ruby-2-2/28195013#28195013", "title": "how to install ruby-netcdf with ruby 2.2?", "body": "<blockquote>\n  <p>By default, RubyNetCDF tries to use the NetCDF library (libncdap) </p>\n</blockquote>\n\n<p>from <a href=\"http://www.gfd-dennou.org/arch/ruby/products/ruby-netcdf/#installation\" rel=\"nofollow\">http://www.gfd-dennou.org/arch/ruby/products/ruby-netcdf/#installation</a></p>\n\n<p>So my guess is you need to install the libncdap package or the libncdap-dev package.</p>\n"}], "owner": {"reputation": 172, "user_id": 4503232, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/z2jpl.png?s=128&g=1", "display_name": "FredyK", "link": "https://stackoverflow.com/users/4503232/fredyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 150, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1422456102, "creation_date": 1422454017, "question_id": 28194272, "link": "https://stackoverflow.com/questions/28194272/how-to-install-ruby-netcdf-with-ruby-2-2", "title": "how to install ruby-netcdf with ruby 2.2?", "body": "<p>When I try to install the gem ruby-netcdf on Fedora I got the following.\nUsing ruby 2.2 and rvm (also tried ruby 1.8.7 but narray gem doesn t build properly) \nAny help is welcome, thanks.</p>\n\n<pre><code>$ gem install ruby-netcdf\n\nBuilding native extensions.  This could take a while...\nERROR:  Error installing ruby-netcdf:\n    ERROR: Failed to build gem native extension.\n\n\n /home/user/.rvm/rubies/ruby-2.2.0/bin/ruby -r ./siteconf20150128-5543-74d90a.rb extconf.rb\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/home/user/.rvm/rubies/ruby-2.2.0/bin/$(RUBY_BASE_NAME)\nextconf.rb:4:in `&lt;main&gt;': uninitialized constant Gem::GemPathSearcher (NameError)\n\nextconf failed, exit code 1\n\nGem files will remain installed in /home/user/.rvm/gems/ruby-2.2.0@testnetcdf/gems/ruby-netcdf-0.6.6.1 for inspection.\nResults logged to /home/user/.rvm/gems/ruby-2.2.0@testnetcdf/extensions/x86_64-linux/2.2.0/ruby-netcdf-0.6.6.1/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "edited": false, "score": 0, "creation_date": 1422453967, "post_id": 28194190, "comment_id": 44755303, "body": "yep, the problem is instead of having 19 instances of the code in 19 controllers, I would now have 19 instances of the code in 19 models - not sure that&#39;s a massive step forward?"}, {"owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "edited": false, "score": 0, "creation_date": 1422454817, "post_id": 28194190, "comment_id": 44755915, "body": "How do I pass in specific label and field names?"}, {"owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "reply_to_user": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "edited": false, "score": 0, "creation_date": 1422455034, "post_id": 28194190, "comment_id": 44756060, "body": "add more attributes to the <code>method</code>, <code>label</code>, <code>names</code>, ... then change the method correspondingly"}, {"owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "edited": false, "score": 0, "creation_date": 1422455060, "post_id": 28194190, "comment_id": 44756081, "body": "Awesome that should be more than enough to get me going, thanks!"}], "tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 0, "last_activity_date": 1422454477, "last_edit_date": 1422454477, "creation_date": 1422453797, "answer_id": 28194190, "question_id": 28194053, "link": "https://stackoverflow.com/questions/28194053/drying-up-rails-controller-code-for-data-export/28194190#28194190", "title": "drying up rails controller code for data export", "body": "<p>Basic of <code>MVC</code> is to have as much as skinnier controllers, and your case is perfect example, to prevent to repeat your code.</p>\n\n<p>Solution for this is to move your code to <code>models</code> the <code>M</code> in the <code>MVC</code> pattern, it is responsible for all the business logic.</p>\n\n<p>Move this method to the <code>module</code>.\nIn <code>app/models/concers/</code> folder create new file <code>sheetable.rb</code></p>\n\n<pre><code>require 'active_support/concern'\n\nmodule Sheetable\n  extend ActiveSupport::Concern\n\n  module ClassMethods    \n    def new_sheet objects\n      unless objects.empty?\n        book = Spreadsheet::Workbook.new\n        sheet1 = book.create_worksheet :name =&gt; 'export'\n        sheet1.row(0).concat [\"Label1\", \"Label2\", \"Label3\"]\n        objects.each_with_index do |e, i|\n          sheet1.row(i+1).concat([e.field1, e.field2, e.field3])\n        end\n        require 'stringio'\n        data = StringIO.new ''\n        book.write data    \n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Now include <code>module</code> in your <code>model</code> and it will have class <code>method</code> <code>new_sheet</code>.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  ...\n  include Sheetable\n  ...\nend\n</code></pre>\n\n<p>or in other model</p>\n\n<pre><code>class OtherModel &lt; ActiveRecord::Base\n  ...\n  include Sheetable\n  ...\nend\n</code></pre>\n\n<p>To use this</p>\n\n<pre><code>data = User.new_sheet(@users) # or OtherModel.new_sheet(@other_models)\nif data\n send_data data.string, :type=&gt;\"application/excel\", :disposition=&gt;'attachment', :filename =&gt; \"export_#{l(Date.today)}.xls\"\nend\n</code></pre>\n\n<p>Now you have moved the logic to the <code>model</code> next step is to refactor this method, make it more simpler.</p>\n"}, {"comments": [{"owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "edited": false, "score": 0, "creation_date": 1422453990, "post_id": 28194199, "comment_id": 44755322, "body": "yep, the problem is instead of having 19 instances of the code in 19 controllers, I would now have 19 instances of the code in 19 models - not sure that&#39;s a massive step forward?"}, {"owner": {"reputation": 4444, "user_id": 414376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a76ecda7bf7209373da1dcc8f76d6cc1?s=128&d=identicon&r=PG", "display_name": "Pascal Lindelauf", "link": "https://stackoverflow.com/users/414376/pascal-lindelauf"}, "reply_to_user": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "edited": false, "score": 0, "creation_date": 1422458188, "post_id": 28194199, "comment_id": 44758187, "body": "I&#39;m not sure why you would have 19 models... what are the varying items items in the 19 instances? (although I see you might already have been helped by @Nermin&#39;s answer; as mentioned there, it&#39;s as easy as adding the list of labels and field names as extra arguments to the method signature, e.g. <code>def self.export_to_subset_to_spreadsheet(users, labels, fieldnames)</code>)"}], "tags": [], "owner": {"reputation": 4444, "user_id": 414376, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a76ecda7bf7209373da1dcc8f76d6cc1?s=128&d=identicon&r=PG", "display_name": "Pascal Lindelauf", "link": "https://stackoverflow.com/users/414376/pascal-lindelauf"}, "is_accepted": false, "score": 0, "last_activity_date": 1422453817, "creation_date": 1422453817, "answer_id": 28194199, "question_id": 28194053, "link": "https://stackoverflow.com/questions/28194053/drying-up-rails-controller-code-for-data-export/28194199#28194199", "title": "drying up rails controller code for data export", "body": "<p>I'd begin with moving the code to where the responsibility belongs. It seems that you're exporting data of a certain set of users to a spreadsheet. So I'd move the code to the User class, e.g.</p>\n\n<pre><code>def self.export_subset_to_spreadsheet(users)\n  ... your code ...\nend\n</code></pre>\n\n<p>and then call it from your controller with <code>User.export_subset_to_spreadsheet(@users)</code>.</p>\n\n<p>This is step one. You can certainly take it further from there, but at least this allows you to get rid of the most pressing problem: the 19 duplications of that whole block of code.</p>\n"}], "owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1422454477, "creation_date": 1422453409, "question_id": 28194053, "link": "https://stackoverflow.com/questions/28194053/drying-up-rails-controller-code-for-data-export", "title": "drying up rails controller code for data export", "body": "<p>Not sure if this is an appropriate question so forgive me. </p>\n\n<p>I have the following code in a controller action</p>\n\n<pre><code>unless @users.empty?\n  book = Spreadsheet::Workbook.new\n  sheet1 = book.create_worksheet :name =&gt; 'export'\n  sheet1.row(0).concat [\"Label1\", \"Label2\", \"Label3\"]\n  @users.each_with_index do |e, i|\n    sheet1.row(i+1).concat([e.field1, e.field2, e.field3])\n  end\n  require 'stringio'\n  data = StringIO.new ''\n  book.write data\n  send_data data.string, :type=&gt;\"application/excel\", :disposition=&gt;'attachment', :filename =&gt; \"export_#{l(Date.today)}.xls\"\nend\n</code></pre>\n\n<p>This allows me to have a button on a form that runs an export. Whilst this is very useful, I am using this code all over the place. In fact, I have 19 instances of this code across various controllers in the app. Is there a way I can move this code to another file, and pass into it a hash of the labels and fields so that I only have to maintain one instance of the export code?</p>\n\n<p>thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1422453382, "post_id": 28194011, "comment_id": 44754873, "body": "You want to add <code>user_name</code> column to <code>teams_users</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4429180"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1422453452, "post_id": 28194011, "comment_id": 44754923, "body": "yes I want to add user_name column to teams_users"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1422453614, "post_id": 28194011, "comment_id": 44755045, "body": "Can I ask why when you can clearly reference this through users?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4429180"}, "edited": false, "score": 0, "creation_date": 1422453718, "post_id": 28194011, "comment_id": 44755114, "body": "I only want to add extra field in HABTM(teams_users) table"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1422453859, "post_id": 28194011, "comment_id": 44755226, "body": "The question is why exactly do you want to add this column to <code>teams_users</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4429180"}, "edited": false, "score": 0, "creation_date": 1422454024, "post_id": 28194011, "comment_id": 44755341, "body": "Because now the requirement is that every user have different name in each team.That&#39;s why I want to add a field user_name in teams_users"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1422454501, "post_id": 28194011, "comment_id": 44755686, "body": "Shouldn&#39;t a user name already be unique in the users table? If so just validate in the TeamsUser eg. <code>validates :user_id, unique:{scope: :team_id}</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4429180"}, "edited": false, "score": 0, "creation_date": 1422454654, "post_id": 28194011, "comment_id": 44755791, "body": "No no user name is not uniqee"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4429180"}, "edited": false, "score": 0, "creation_date": 1422458063, "post_id": 28194817, "comment_id": 44758115, "body": "Now how to add additional columns / attributes to &quot;memberships&quot; please help I am confused"}, {"owner": {"reputation": 4272, "user_id": 705589, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94351fea6d8f022fea0256cf55c34df0?s=128&d=identicon&r=PG", "display_name": "Mikey Hogarth", "link": "https://stackoverflow.com/users/705589/mikey-hogarth"}, "edited": false, "score": 0, "creation_date": 1422460218, "post_id": 28194817, "comment_id": 44759641, "body": "Create a new migration to create_table &quot;memberships&quot; . This would include your new column (other_name). It would allow you to do this:      user.memberships.each do |m|       m.other_name     end  In terms of how to get the actual form working, see the documentation for &quot;accepts_nested_attributes_for&quot;"}, {"owner": {"reputation": 4272, "user_id": 705589, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94351fea6d8f022fea0256cf55c34df0?s=128&d=identicon&r=PG", "display_name": "Mikey Hogarth", "link": "https://stackoverflow.com/users/705589/mikey-hogarth"}, "edited": false, "score": 0, "creation_date": 1422887398, "post_id": 28194817, "comment_id": 44913892, "body": "@haseeb you just going to disappear? People have taken the time to answer your question here!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4429180"}, "edited": false, "score": 0, "creation_date": 1422964002, "post_id": 28194817, "comment_id": 44948125, "body": "I don&#39;t understand what you want say?"}, {"owner": {"reputation": 4272, "user_id": 705589, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94351fea6d8f022fea0256cf55c34df0?s=128&d=identicon&r=PG", "display_name": "Mikey Hogarth", "link": "https://stackoverflow.com/users/705589/mikey-hogarth"}, "edited": false, "score": 0, "creation_date": 1422973892, "post_id": 28194817, "comment_id": 44954020, "body": "Did you get your issue sorted out? both @Ariejan and I posted what I consider to be the correct answer to your question - you should mark one of them as correct if they helped you or clarify what you were asking if they didn&#39;t - don&#39;t just vanish!"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4429180"}, "edited": false, "score": 0, "creation_date": 1422979080, "post_id": 28194817, "comment_id": 44957746, "body": "Both of solutions help me and I solve my problem.I wanted to mark them before but stackoverflow doesn&#39;t allow me because my points are low"}, {"owner": {"reputation": 4272, "user_id": 705589, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94351fea6d8f022fea0256cf55c34df0?s=128&d=identicon&r=PG", "display_name": "Mikey Hogarth", "link": "https://stackoverflow.com/users/705589/mikey-hogarth"}, "edited": false, "score": 0, "creation_date": 1423825835, "post_id": 28194817, "comment_id": 45315813, "body": "That&#39;s okay buddy, glad you got your issue sorted"}], "tags": [], "owner": {"reputation": 4272, "user_id": 705589, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/94351fea6d8f022fea0256cf55c34df0?s=128&d=identicon&r=PG", "display_name": "Mikey Hogarth", "link": "https://stackoverflow.com/users/705589/mikey-hogarth"}, "is_accepted": false, "score": 1, "last_activity_date": 1422455579, "creation_date": 1422455579, "answer_id": 28194817, "question_id": 28194011, "link": "https://stackoverflow.com/questions/28194011/add-extra-field-in-rails-habtm-joins/28194817#28194817", "title": "Add extra field in Rails habtm joins", "body": "<p>Short version, you can't do what your're trying to do without a little refactoring. Here is how I would do it (apologies if there's syntax issues, I'm doing this from memory I haven't tested the code but the principle is sound)</p>\n\n<p>Create a new model to represent \"membership\" of a team (maybe call it \"Membership\") and the associated migration to create the table:</p>\n\n<pre><code>class Membership\n  belongs_to :team\n  belongs_to :user\nend\n</code></pre>\n\n<p>Then change your team and user models to use this new model:</p>\n\n<pre><code>class User\n  has_many :memberships\n  has_many :teams, through: :memberships\nend\n\nclass Team\n  has_many :memberships\n  has_many :users, through: :memberships\nend\n</code></pre>\n\n<p>Once you've refactored this far, adding additional columns / attributes to \"memberships\" is easy because you can just treat it like any other model.</p>\n"}, {"tags": [], "owner": {"reputation": 10313, "user_id": 117975, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/a9bfdd0cc75c857b669c37548b8bfdf9?s=128&d=identicon&r=PG", "display_name": "Ariejan", "link": "https://stackoverflow.com/users/117975/ariejan"}, "is_accepted": true, "score": 2, "last_activity_date": 1422455708, "creation_date": 1422455708, "answer_id": 28194871, "question_id": 28194011, "link": "https://stackoverflow.com/questions/28194011/add-extra-field-in-rails-habtm-joins/28194871#28194871", "title": "Add extra field in Rails habtm joins", "body": "<p>Instead of HABTM you'd use <code>has_many</code> and <code>has_many :through</code>.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :memberships\n  has_many :team, through: :membership\nend\n\nclass Membership &lt; ActiveRecord::Base # This would be your old 'join table', now a full model\n  belongs_to :user\n  belongs_to :team\nend\n\nclass Team &lt; ActiveRecord::Base\n  has_many :memberships\n  has_many :users, through: :memberships\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4429180"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 586, "favorite_count": 0, "accepted_answer_id": 28194871, "answer_count": 2, "score": 0, "last_activity_date": 1422455708, "creation_date": 1422453292, "last_edit_date": 1422453332, "question_id": 28194011, "link": "https://stackoverflow.com/questions/28194011/add-extra-field-in-rails-habtm-joins", "title": "Add extra field in Rails habtm joins", "body": "<p>I have this relationship between users, teams</p>\n\n<pre><code>class CreateTeamsUsers &lt; ActiveRecord::Migration\n  def change\n    create_table :teams_users, :id =&gt; false do |t|\n        t.references :user\n        t.references :team\n        t.timestamps\n    end\n  end\nend\nclass User &lt; ActiveRecord::Base\n    has_and_belongs_to_many :teams\nend\nclass Team &lt; ActiveRecord::Base \n    has_and_belongs_to_many :users\nend\n</code></pre>\n\n<p>The issue is that I want to add extra attribute in HABTM,attribute name is \"user_name\"\nHow to do this?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 13800, "user_id": 1569064, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/ea7b0a1fad5b57f75e4c137764f0403c?s=128&d=identicon&r=PG", "display_name": "AGS", "link": "https://stackoverflow.com/users/1569064/ags"}, "edited": false, "score": 0, "creation_date": 1422453847, "post_id": 28193577, "comment_id": 44755217, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/1192186/subtracting-one-array-from-another-in-ruby\">Subtracting one Array from another in Ruby</a>"}], "answers": [{"tags": [], "owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "is_accepted": false, "score": 4, "last_activity_date": 1422452174, "creation_date": 1422452174, "answer_id": 28193627, "question_id": 28193577, "link": "https://stackoverflow.com/questions/28193577/remove-items-in-1-ruby-array-from-another-array/28193627#28193627", "title": "remove items in 1 ruby array from another array", "body": "<p>The answer is really easy, you want to subtract the error_arrays from the main array, like this:</p>\n\n<pre><code>@final_array = @main_array - @error_array_1 - @error_array_2\n=&gt; [4, 5]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 0, "last_activity_date": 1422454143, "creation_date": 1422454143, "answer_id": 28194318, "question_id": 28193577, "link": "https://stackoverflow.com/questions/28193577/remove-items-in-1-ruby-array-from-another-array/28194318#28194318", "title": "remove items in 1 ruby array from another array", "body": "<p>This is the way to do it if you have many arrays:</p>\n\n<pre><code>main_array = [1,2,3,4,5,6]\nerror_array_1 = [1]\nerror_array_2 = [1,2,3]\nerror_array_4 = [6]\n\np [main_array,error_array_1,error_array_2,error_array_4].reduce(:-) #=&gt; [4, 5]\n</code></pre>\n"}], "owner": {"reputation": 982, "user_id": 3005105, "user_type": "registered", "accept_rate": 41, "profile_image": "https://i.stack.imgur.com/NIIPO.jpg?s=128&g=1", "display_name": "Gareth Burrows", "link": "https://stackoverflow.com/users/3005105/gareth-burrows"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1422454143, "creation_date": 1422452021, "question_id": 28193577, "link": "https://stackoverflow.com/questions/28193577/remove-items-in-1-ruby-array-from-another-array", "title": "remove items in 1 ruby array from another array", "body": "<p>I have one array in rails, which for the sake of simplicity, we shall say is</p>\n\n<pre><code>@users = current_account.users\n</code></pre>\n\n<p>I have several other arrays, which contains subsets of that first array. These look like this</p>\n\n<pre><code>@missing_genders = @users.select{ |u| u.gender.nil?}\n@missing_reference = @users.select{ |u| u.reference_number.nil?}\n</code></pre>\n\n<p>I have a few others like this too. What I need is to produce a list of all the users who are NOT erroneous. so basically everyone in the first array, who does not exist in any of the other arrays?</p>\n\n<p>thinking through it, I have</p>\n\n<pre><code>@main_array = [1,2,3,4,5]\n@error_array_1 = [1]\n@error_array_2 = [1,2,3]\n</code></pre>\n\n<p>And I am looking to generate</p>\n\n<pre><code>@final_array = [4,5]\n</code></pre>\n"}, {"tags": ["ruby", "directory", "sinatra", "default"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4229303, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wrxDHTldoc4/AAAAAAAAAAI/AAAAAAAAAB0/2-ZkqPCwBzA/photo.jpg?sz=128", "display_name": "Sibu Stephen", "link": "https://stackoverflow.com/users/4229303/sibu-stephen"}, "edited": false, "score": 0, "creation_date": 1422510563, "post_id": 28193012, "comment_id": 44780581, "body": "save_path=&quot;/{params[:intern_image[:filename]}&quot;                                     In the above scenario  &#39;save_path&#39; is the parameter which i will be passing to the database(&#39;storing the path of that image into database&#39;) and  &#39;intern_image&#39; is the name of the input tag but cannot set it right as such, can you please help me out  @dax , Thank you in advance."}, {"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "reply_to_user": {"reputation": 11, "user_id": 4229303, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wrxDHTldoc4/AAAAAAAAAAI/AAAAAAAAAB0/2-ZkqPCwBzA/photo.jpg?sz=128", "display_name": "Sibu Stephen", "link": "https://stackoverflow.com/users/4229303/sibu-stephen"}, "edited": false, "score": 1, "creation_date": 1422540307, "post_id": 28193012, "comment_id": 44796577, "body": "@SibuStephen, can you edit your original question with what you are trying to accomplish and include the code you&#39;re using now?"}], "tags": [], "owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "is_accepted": false, "score": 1, "last_activity_date": 1422450211, "creation_date": 1422450211, "answer_id": 28193012, "question_id": 28192736, "link": "https://stackoverflow.com/questions/28192736/sinatra-changing-default-directory-apart-from-public-img/28193012#28193012", "title": "Sinatra changing default Directory apart from &#39;public/img&#39;", "body": "<p>You can use the <code>:root</code> option</p>\n\n<blockquote>\n  <p>:root - The application\u2019s root directory</p>\n  \n  <p>The directory used as a base for the application. By default, this is assumed to be the directory containing the main application file (:app_file setting). The root directory is used to construct the default :public_folder and :views settings. A common idiom is to set the :root setting explicitly in the main application file as follows:</p>\n  \n  <p><code>set :root, File.dirname(__FILE__)</code></p>\n</blockquote>\n\n<p>Read more <a href=\"http://www.sinatrarb.com/configuration\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4229303, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-wrxDHTldoc4/AAAAAAAAAAI/AAAAAAAAAB0/2-ZkqPCwBzA/photo.jpg?sz=128", "display_name": "Sibu Stephen", "link": "https://stackoverflow.com/users/4229303/sibu-stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 403, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422450211, "creation_date": 1422449496, "question_id": 28192736, "link": "https://stackoverflow.com/questions/28192736/sinatra-changing-default-directory-apart-from-public-img", "title": "Sinatra changing default Directory apart from &#39;public/img&#39;", "body": "<p>In Sinatra application how to change the default directory path when concerned with taking images form another folder apart from the default directory '/public/images'?</p>\n"}, {"tags": ["ruby", "internationalization"], "answers": [{"comments": [{"owner": {"reputation": 957, "user_id": 4013033, "user_type": "registered", "accept_rate": 66, "profile_image": "https://lh3.googleusercontent.com/-zEKF8g6QCq4/AAAAAAAAAAI/AAAAAAAAADc/Z8HLJ_QNYFk/photo.jpg?sz=128", "display_name": "Casper Nybroe", "link": "https://stackoverflow.com/users/4013033/casper-nybroe"}, "edited": false, "score": 0, "creation_date": 1422449206, "post_id": 28192131, "comment_id": 44752289, "body": "I was about to but I couldn&#180;t do that within the first 5 minuts of the answer. You answered too quickly. :) Upvote and accept has been done. Thanks again."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 2, "last_activity_date": 1422447650, "creation_date": 1422447650, "answer_id": 28192131, "question_id": 28192041, "link": "https://stackoverflow.com/questions/28192041/using-link-to-with-i18n-and-glyphicon-ruby-on-rails/28192131#28192131", "title": "Using link_to with i18n and glyphicon, Ruby on Rails", "body": "<p>I would use the block syntax for this:</p>\n\n<pre><code>&lt;%= link_to(health_info_tweets_path(type: 'featured')) do %&gt;\n  &lt;%= t('health_info.twitter_posts_featuredacc') %&gt;\n  &lt;i class=\"fa fa-twitter\"&gt;&lt;/i&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 957, "user_id": 4013033, "user_type": "registered", "accept_rate": 66, "profile_image": "https://lh3.googleusercontent.com/-zEKF8g6QCq4/AAAAAAAAAAI/AAAAAAAAADc/Z8HLJ_QNYFk/photo.jpg?sz=128", "display_name": "Casper Nybroe", "link": "https://stackoverflow.com/users/4013033/casper-nybroe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 282, "favorite_count": 0, "accepted_answer_id": 28192131, "answer_count": 1, "score": 1, "last_activity_date": 1422447650, "creation_date": 1422447362, "question_id": 28192041, "link": "https://stackoverflow.com/questions/28192041/using-link-to-with-i18n-and-glyphicon-ruby-on-rails", "title": "Using link_to with i18n and glyphicon, Ruby on Rails", "body": "<p>I cant figure out how to use the link_to correctly with both internationalization tags and a glyphicon.</p>\n\n<p>My code currently looks like this. </p>\n\n<pre><code>&lt;%=link_to t('health_info.twitter_posts_featuredacc')+' &lt;i class=\"fa fa-twitter\"&gt;&lt;/i&gt;'.html_safe, health_info_tweets_path(type: 'featured') %&gt;\n</code></pre>\n\n<p>It pulls the correct translation but it also shows everything in the ''.html_safe as normal html code and not as the glyphicon.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422447316, "post_id": 28191809, "comment_id": 44751139, "body": "By the way? What&#39;s the issue you are facing. Please mention ?"}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422447597, "post_id": 28191809, "comment_id": 44751310, "body": "Are you asking for, how to list the microposts of other user when you move to his/her profile page ?"}, {"owner": {"reputation": 1, "user_id": 3628486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3a2s.png?s=128&g=1", "display_name": "Caio Graco", "link": "https://stackoverflow.com/users/3628486/caio-graco"}, "reply_to_user": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422447955, "post_id": 28191809, "comment_id": 44751498, "body": "Hey Ajay. I don&#39;t know how the model relation between users, microposts and profiles would work in this case. Plus i don&#39;t know how to show the particular visitor&#39;s visit history in his/her profile."}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422449647, "post_id": 28191809, "comment_id": 44752546, "body": "You will have only 2 models here user &amp; micropost(sharing has-many relationship).  and to show the information in the profile page, you need to access the users/show action. that&#39;s all ."}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422449697, "post_id": 28191809, "comment_id": 44752572, "body": "Most important, you should try to create a basic structure of code first. give some try on creating user, micropost association. Further you can work on the profile page information."}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 4470337, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/673e60552adf1549b1383ac044b9118b?s=128&d=identicon&r=PG&f=1", "display_name": "Amit Agarwal", "link": "https://stackoverflow.com/users/4470337/amit-agarwal"}, "is_accepted": false, "score": 0, "last_activity_date": 1422448287, "creation_date": 1422448287, "answer_id": 28192344, "question_id": 28191809, "link": "https://stackoverflow.com/questions/28191809/creation-of-visitor-profiles-using-microposts-input/28192344#28192344", "title": "Creation of visitor profiles using microposts input", "body": "<p>i think you are facing issue with microposts,visitors history </p>\n\n<pre><code>create table visitors(user_id,post_id, created_at)\n</code></pre>\n\n<p>1) When user visit post, insert a new record in the visitors table with the id of post, fetch record from visitor table to display previous user history.</p>\n"}, {"tags": [], "owner": {"reputation": 646, "user_id": 714985, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/IPkWk.gif?s=128&g=1", "display_name": "rfellons", "link": "https://stackoverflow.com/users/714985/rfellons"}, "is_accepted": false, "score": 0, "last_activity_date": 1422453029, "creation_date": 1422453029, "answer_id": 28193919, "question_id": 28191809, "link": "https://stackoverflow.com/questions/28191809/creation-of-visitor-profiles-using-microposts-input/28193919#28193919", "title": "Creation of visitor profiles using microposts input", "body": "<p><strong>in your models:</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :microposts\nend\nclass Micropost &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p><strong>in controller:</strong></p>\n\n<pre><code>@user = User.find(:id)\n</code></pre>\n\n<p><strong>in view:</strong></p>\n\n<pre><code>&lt;p&gt;@user.name&lt;/p&gt;\n@user.microspots.order(:created_at).each do |mp|\n  &lt;p&gt;IN:&lt;%=mp.created_at%&gt;&lt;/p&gt;\nend\n</code></pre>\n\n<p>I hope this help you.</p>\n"}], "owner": {"reputation": 1, "user_id": 3628486, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F3a2s.png?s=128&g=1", "display_name": "Caio Graco", "link": "https://stackoverflow.com/users/3628486/caio-graco"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 44, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1422453029, "creation_date": 1422446566, "last_edit_date": 1422448630, "question_id": 28191809, "link": "https://stackoverflow.com/questions/28191809/creation-of-visitor-profiles-using-microposts-input", "title": "Creation of visitor profiles using microposts input", "body": "<p>I'm creating a app of which a unique user registers people entering a building.</p>\n\n<p>The user takes the person's name, ID, plus a picture. When a person is registered,it updates a feed (like twitter's feed) that shows who entered the place (showing only the name and id). Each addition to the feed is actually a data model called \"micropost\". So each user has many microposts, and \"micropost\" belongs to \"user\".</p>\n\n<p>The feed has to show all people who entered the building at a given day, both newly registered visitors and visitors registered long ago who just happened to pass by.</p>\n\n<p>The issue is: i need that when the user clicks on visitor's name in the feed, it gets redirected to a profile page of that particular visitor, showing his/her complete info (name,ID and photo), plus the dates of all prior visits. I need to have many microposts redirecting to the same visitor profile, if they are showing information about the same person.</p>\n\n<p>I'm trying to figure out the model relation between the user, microposts and visitors profiles. I don't know how it would work in this case.</p>\n\n<p>The relation between user and micropost is easy to get, because users are unique. The problem is that microposts aren't, and as just said, even already registered visitors must be shown in the feed.</p>\n\n<p>Thanks for any constructive feedback.</p>\n"}, {"tags": ["ruby"], "owner": {"reputation": 41, "user_id": 2479752, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b4d7fccd9120b73d4f679480435e62b7?s=128&d=identicon&r=PG", "display_name": "Igor V. Novokshonov", "link": "https://stackoverflow.com/users/2479752/igor-v-novokshonov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "closed_date": 1422445340, "answer_count": 0, "score": 3, "last_activity_date": 1422445379, "creation_date": 1422444198, "last_edit_date": 1422445379, "question_id": 28191008, "link": "https://stackoverflow.com/questions/28191008/place-to-define-a-new-method", "closed_reason": "Duplicate", "title": "Place to define a new method", "body": "<p>I am implementing a new method called <code>using</code>.</p>\n\n<pre><code>class Object\n  def using(resource)\n    begin\n      yield if block_given?\n    ensure\n      resource.dispose\n    end\n  end\nend\n</code></pre>\n\n<p>but in the book Metaprogramming Ruby, the right answer was written by reopening Kernel module instead of Object class. What are advantages using Kernel module before Object class?</p>\n"}, {"tags": ["ruby", "iis", "ftp"], "comments": [{"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 1, "creation_date": 1422444825, "post_id": 28190688, "comment_id": 44749755, "body": "This looks more like a firewall in the way which blocks the data connections."}, {"owner": {"reputation": 1613, "user_id": 3561864, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/oU4F9.jpg?s=128&g=1", "display_name": "lshas", "link": "https://stackoverflow.com/users/3561864/lshas"}, "reply_to_user": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1422445613, "post_id": 28190688, "comment_id": 44750175, "body": "@Steffen UllrichI don&#39;t see how that could be, because it works fine when using the windows ftp cli, from the same client and to the same host, and according to the logs it is able to connect, but then something happens."}, {"owner": {"reputation": 89578, "user_id": 3081018, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Z2NYm.png?s=128&g=1", "display_name": "Steffen Ullrich", "link": "https://stackoverflow.com/users/3081018/steffen-ullrich"}, "edited": false, "score": 0, "creation_date": 1422446233, "post_id": 28190688, "comment_id": 44750518, "body": "Windows cli is using active mode by default as far as I know, but you are using passive mode. And what happens is that the data connections don&#39;t work, which is a typical problem in the interaction between NAT, firewalls, passive and active mode."}], "answers": [{"tags": [], "owner": {"reputation": 1613, "user_id": 3561864, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/oU4F9.jpg?s=128&g=1", "display_name": "lshas", "link": "https://stackoverflow.com/users/3561864/lshas"}, "is_accepted": true, "score": 0, "last_activity_date": 1422745429, "creation_date": 1422745429, "answer_id": 28257541, "question_id": 28190688, "link": "https://stackoverflow.com/questions/28190688/ruby-ftp-not-working-with-iis-ftp-server/28257541#28257541", "title": "Ruby FTP not working with IIS FTP server", "body": "<p>I set passive to false and that solved my problem.</p>\n"}], "owner": {"reputation": 1613, "user_id": 3561864, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/oU4F9.jpg?s=128&g=1", "display_name": "lshas", "link": "https://stackoverflow.com/users/3561864/lshas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 285, "favorite_count": 0, "accepted_answer_id": 28257541, "answer_count": 1, "score": 0, "last_activity_date": 1422745429, "creation_date": 1422443261, "question_id": 28190688, "link": "https://stackoverflow.com/questions/28190688/ruby-ftp-not-working-with-iis-ftp-server", "title": "Ruby FTP not working with IIS FTP server", "body": "<p>I have a ruby script that uploads a file via FTP.\nI tested this with a LINUX server and the upload was working well.</p>\n\n<p>But when I changed the upload destination to the production server which is a Windows Server 2012 R2 running IIS, I got the following error message:</p>\n\n<pre><code>A Connection attempt failed because the connected party did not properly respond after a period of time, or established connection failed because connected host has failed to respond. - connect&lt;2&gt; &lt;Errno::ETIMEDOUT&gt;\n</code></pre>\n\n<p>I do however find the connection in the FTPlog:</p>\n\n<pre><code>2015-01-28 10:48:55 12.34.56.78 - 87.65.43.21 21 ControlChannelOpened - - 0 0 0 0 0\n2015-01-28 10:48:55 12.34.56.78 - 87.65.43.21 21 USER .... 331 0 0 23 17 0\n2015-01-28 10:48:55 12.34.56.78 WIN-0CFF8VSL25E\\.... 87.65.43.21 21 PASS *** 230 0 0 21 15 94\n2015-01-28 10:48:55 12.34.56.78 WIN-0CFF8VSL25E\\.... 87.65.43.21 21 TYPE I 200 0 0 20 8 0\n2015-01-28 10:48:55 12.34.56.78 WIN-0CFF8VSL25E\\.... 87.65.43.21 21 PASV - 227 0 0 50 6 0\n2015-01-28 10:49:16 - WIN-0CFF8VSL25E\\.... 87.65.43.21 49994 DataChannelClosed - - 0 0 0 0 0\n2015-01-28 10:49:16 12.34.56.78 WIN-0CFF8VSL25E\\.... 87.65.43.21 21 ControlChannelClosed - - 0 0 141 46 21469\n</code></pre>\n\n<p>I am doing almost the same task with a batch script today, using windows native ftp cli, and this works fine.</p>\n\n<p>Here is the ruby code:</p>\n\n<pre><code>require \"net/ftp\"\nrequire \"rubygems\"\nrequire \"zip\"\n\nputs \"Copying data\"\nFileUtils.cp(\"...\", \"...\")\n\nfolder = \"C:\\\\...\"\ninput_filenames = ['...']\n\nzipfile_name = \"C:\\\\...\\\\....zip\"\nputs \"Compressing data\"\nZip::File.open(zipfile_name, Zip::File::CREATE) do |zipfile|\n  input_filenames.each do |filename|\n    zipfile.add(filename, folder + '\\\\' + filename)\n  end\nend\n\nprogress = 0.0;\nfile_size = File.size(zipfile_name)\n\nNET::FTP.debug_mode = true\nputs \"Uploading data:\"\nftp = Net::FTP.new('12.34.56.78','xxx','xxx')\nftp.debug_mode = true\nftp.read_timeout = 10000\nftp.passive = true\nftp.putbinaryfile('C:\\\\...\\\\....zip', '....zip') do |data|\n    progress = progress.to_f+data.length.to_f\n    print \"\\rProgress: \" + ((progress/file_size)*100).round(2).to_s + \"%\"\nend\nftp.close()\nputs \"\\nUpload completed!\"\n</code></pre>\n\n<p>I am assuming there is no problem in the script, since it was working fine with a different server. What I am assuming it is, is a difference in how IIS' FTP server handles/responds to connections vs how vsftpd handles them.</p>\n\n<p>Any suggestions to how to fix this?</p>\n"}, {"tags": ["ruby", "performance"], "comments": [{"owner": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1422441575, "post_id": 28190028, "comment_id": 44747957, "body": "Ruby is a lovely language; but for speedy text processing, use bash. Look into <code>grep</code> and <code>awk</code>."}, {"owner": {"reputation": 11, "user_id": 4502429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdb09ba54853507a7553a7e16c20062?s=128&d=identicon&r=PG&f=1", "display_name": "LeFrenchToast", "link": "https://stackoverflow.com/users/4502429/lefrenchtoast"}, "reply_to_user": {"reputation": 10490, "user_id": 513951, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/6cace4406e1ea825e78ec0134a5ea6fd?s=128&d=identicon&r=PG&f=1", "display_name": "user513951", "link": "https://stackoverflow.com/users/513951/user513951"}, "edited": false, "score": 0, "creation_date": 1422535774, "post_id": 28190028, "comment_id": 44793621, "body": "Unfortunately, it needs to work with a program which only accepts Ruby, otherwise I would definitely go with bash. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4502429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdb09ba54853507a7553a7e16c20062?s=128&d=identicon&r=PG&f=1", "display_name": "LeFrenchToast", "link": "https://stackoverflow.com/users/4502429/lefrenchtoast"}, "edited": false, "score": 0, "creation_date": 1422535862, "post_id": 28190205, "comment_id": 44793684, "body": "Thanks. Unfortunately, I can do little of what you suggested. The whole situation is difficult to work around. I&#39;m running the script to work with another program so currently I&#39;m attempting to use more of the program&#39;s functions to run faster."}], "tags": [], "owner": {"reputation": 10274, "user_id": 930207, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/oy7Q3.png?s=128&g=1", "display_name": "mcfinnigan", "link": "https://stackoverflow.com/users/930207/mcfinnigan"}, "is_accepted": false, "score": 0, "last_activity_date": 1422441820, "creation_date": 1422441820, "answer_id": 28190205, "question_id": 28190028, "link": "https://stackoverflow.com/questions/28190028/how-to-improve-the-efficiency-and-speed-of-my-ruby-code/28190205#28190205", "title": "How to improve the efficiency and speed of my Ruby code", "body": "<p>Ok, a couple of observations.</p>\n\n<ol>\n<li>Most importantly - You are scanning the entire file each time you call scan() - and you are doing this within loops.  This is a bad idea.</li>\n<li>Your regexes are pretty complicated, and regex itself is not fast.</li>\n</ol>\n\n<p>Are your data files structured?  Is the data delimited with tabs, pipes or commas?  Does data typically appear in the same place on subsequent lines?</p>\n\n<p>Can you split the file into smaller working sets of at most a megabyte in size?  This will make searching the strings in memory significantly faster.</p>\n\n<p>Honestly, if I was faced with this, I'd look for delimeters or some sort of record structure - if the data is at all regular it is possible to make assumptions and optimizations based on these and then deal with errors as they occur.  If the data is totally free-form then the only option is to split the file into smaller units and use multiple threads to process them.</p>\n"}], "owner": {"reputation": 11, "user_id": 4502429, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdb09ba54853507a7553a7e16c20062?s=128&d=identicon&r=PG&f=1", "display_name": "LeFrenchToast", "link": "https://stackoverflow.com/users/4502429/lefrenchtoast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1422441820, "creation_date": 1422441340, "question_id": 28190028, "link": "https://stackoverflow.com/questions/28190028/how-to-improve-the-efficiency-and-speed-of-my-ruby-code", "title": "How to improve the efficiency and speed of my Ruby code", "body": "<p>I'm currently searching files for certain words or regexes using the String.scan method. However, when running the script on 1.9GB of data, it takes about 3 hours. I think this may be due to the repeated use of .scan. \nThe code looks a lot like below, is there a way to improve the speed even if it means without scan? </p>\n\n<ol>\n<li>String 'text' is the text from a file (50k words) for this example.</li>\n<li>The 'item.getCustomeMetadata.putText() places the results in a separate program.</li>\n<li>The Code repeats itself as one array works for <code>pdCount</code> and the other for <code>idrCount</code></li>\n</ol>\n\n<p><code>idNames = [/UK[0-9]{3,6}/ , /\\s*[A-C,E,G-H,J-PR-T,W-Z]{2}(?:\\s*\\d\\s*){6}[a-dfmA-DFM]?\\s*/]\n    idCats = [\"IG_EmpID\" ,\"IG_SSN\" ]</code></p>\n\n<pre><code>idNames.each_with_index do |val, index|\n    textScan = text.scan(val).size\n    if textScan &gt; idrHighest\n        idrHighest = textScan\n    end\n    volume = volume + textScan\n    item.getCustomMetadata.putText(idCats[index], textScan)\n    if textScan != 0\n        idrCount +=1\n    end\nend\n\npdRegNames = [/(\\+44\\s?7\\d{3}|\\(?07\\d{3}\\)?)\\s?\\d{3}\\s?\\d{3}/ , /020[0-9]{7}/ , /[a-zA-Z0-9_\\.\\-+]+@(infogov|gmail|hotmail|yahoo|outlook|aol|msn|verizon)(\\.[a-z]{2,3}){1,2}/ , /(0[1-9]|[1-9]|[12][0-9]|3[01])[-\\/ .](0[1-9]|[1-9]|1[012])[-\\/ .](19|20)\\d\\d/ , /\\b(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\\b/, /[A-Z0-9]{5}\\d[0156]\\d([0][1-9]|[12]\\d|3[01])\\d[A-Z0-9]{3}[A-Z]{2}/,/([A-PR-UWYZ][A-HK-Y0-9][A-HJKS-UW0-9]?[A-HJKS-UW0-9]?)\\s*([0-9][ABD-HJLN-UW-Z]{2})/i]\npdRegCats = [\"IG_Phone\",\"IG_Phone2\",\"IG_Email\",\"IG_DOB\" , \"IG_FIP\", \"IG_License\", \"IG_Address\"]\n\npdRegNames.each_with_index do |val, index|\n    textScan = text.scan(val).size\n    if textScan &gt; pdHighest\n        pdHighest = textScan\n    end\n    volume = volume + textScan\n    item.getCustomMetadata.putText(pdRegCats[index], textScan)\n    if textScan != 0\n        pdCount +=1\n    end\nend\n\nmaritalNames = [\"Married\" , \"Divorced\" , \"Civil Partnership\"]\n\ntemp = volume\nmaritalNames.each do |val|\n    textScan = text.scan(/#{val}/i).size\n    if textScan &gt; pdHighest\n        pdHighest = textScan\n    end\n    volume = volume + textScan\n    item.getCustomMetadata.putText(\"IG_Marital\", (volume - temp).round(0))\n    if textScan != 0\n        pdCount +=1\n    end\nend\n\nfoundSort = text.scan(/[0-9]{2}-[0-9]{2}-[0-9]{2}/)\ntextScan = 0\nfoundSort.each do |sort|\n    if sortArray.include? sort\n        textScan +=1\n    end\nend\nif textScan &gt; pdHighest\n    pdHighest = textScan\nend\nvolume = volume + textScan\nitem.getCustomMetadata.putText(\"IG_Sort\", textScan)\nif textScan != 0\n    pdCount +=1\nend\n</code></pre>\n\n<p>`</p>\n\n<p>This runs once per file. So you can image this going over millions. I was thinking of using threads, creating one per file, but this did not work for me.</p>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["ruby", "http", "openssl", "ssl-certificate", "net-http"], "comments": [{"owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "edited": false, "score": 0, "creation_date": 1422441283, "post_id": 28189826, "comment_id": 44747823, "body": "Does this <code>https:&#47;&#47;dev.ramble.com&#47;v1&#47;user&#47;login</code> use the certificate which is signed by the known CA? And this CA cert is in the <code>usr&#47;local&#47;etc&#47;openssl&#47;cert.pem</code>?"}, {"owner": {"reputation": 1976, "user_id": 767166, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6a07e1b5f02cf61303cd2c3e97618a84?s=128&d=identicon&r=PG", "display_name": "cmthakur", "link": "https://stackoverflow.com/users/767166/cmthakur"}, "reply_to_user": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "edited": false, "score": 0, "creation_date": 1422441460, "post_id": 28189826, "comment_id": 44747898, "body": "Thank you @Grych but Yes, it does"}, {"owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "edited": false, "score": 0, "creation_date": 1422442338, "post_id": 28189826, "comment_id": 44748384, "body": "Can you try the same code to connect to another, well-known machine, like <a href=\"https://www.google.com\" rel=\"nofollow noreferrer\">google.com</a>? If it works, that means there is something wrong with the certificate on you host"}, {"owner": {"reputation": 2691, "user_id": 3324630, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6gEL.jpg?s=128&g=1", "display_name": "Grych", "link": "https://stackoverflow.com/users/3324630/grych"}, "edited": false, "score": 0, "creation_date": 1422442494, "post_id": 28189826, "comment_id": 44748474, "body": "I can&#39;t reach <code>dev.ramble.com</code> (it is probably visible only in your network) to check the certificate, but on <code>www.ramble.com</code> the cert is invalid: &quot;host name mismatch&quot;. Double check which certificate is installed on the server."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4502676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9bd9798e9dd37e93a382a340350870bf?s=128&d=identicon&r=PG&f=1", "display_name": "Mr. Bless", "link": "https://stackoverflow.com/users/4502676/mr-bless"}, "is_accepted": false, "score": 1, "last_activity_date": 1422444485, "creation_date": 1422444485, "answer_id": 28191108, "question_id": 28189826, "link": "https://stackoverflow.com/questions/28189826/opensslsslsslerror-while-making-post-request-with-nethttp/28191108#28191108", "title": "OpenSSL::SSL::SSLError while making post request with Net::HTTP", "body": "<p>You may find this link(<a href=\"http://visibletrap.blogspot.com/2014/01/solved-different-cause-of-sslconnect.html\" rel=\"nofollow\">http://visibletrap.blogspot.com/2014/01/solved-different-cause-of-sslconnect.html</a>) helpful</p>\n"}, {"comments": [{"owner": {"reputation": 1529, "user_id": 426935, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/5cfb21b3827fc0c9801a1cb1be3049f3?s=128&d=identicon&r=PG", "display_name": "Turgs", "link": "https://stackoverflow.com/users/426935/turgs"}, "edited": false, "score": 0, "creation_date": 1446079537, "post_id": 28297147, "comment_id": 54599669, "body": "Do I add <code>ssl_version = :SSLv3</code> to my <code>application.rb</code> file?"}], "tags": [], "owner": {"reputation": 1976, "user_id": 767166, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6a07e1b5f02cf61303cd2c3e97618a84?s=128&d=identicon&r=PG", "display_name": "cmthakur", "link": "https://stackoverflow.com/users/767166/cmthakur"}, "is_accepted": true, "score": 1, "last_activity_date": 1605683165, "last_edit_date": 1605683165, "creation_date": 1422960909, "answer_id": 28297147, "question_id": 28189826, "link": "https://stackoverflow.com/questions/28189826/opensslsslsslerror-while-making-post-request-with-nethttp/28297147#28297147", "title": "OpenSSL::SSL::SSLError while making post request with Net::HTTP", "body": "<p>Finally I resolve the problem by changing <code>ssl_version = :SSLv3</code> for now.</p>\n<p>tl;dr</p>\n<p>The approach browsers/system takes to verify SSL is plain. They simply come pre-equipped with a set of trusted certificates that are pre-screened and trusted according to the vendor. In case of Mac OS X, you can view those from Keychain under certificates/system certificates. In case of Linux, it should be somewhere around /etc/ssl/certs/. Frankly I don't know about Windows. But those should be there somewhere like in Mac OS X. As you might have noticed, there are many; actually too many to keep track to be valid. But that's how it works anyway!</p>\n<p>As for Ruby, the requirement of small to massive Ruby application is always scoped in comparison to the system/browsers. A browser must be ready to navigate to any &quot;legitimate&quot; web site that comes with public certificate served over HTTPS or other secure service endpoints. But in a typical Ruby application we might only have to connect with a few services that use TLS or would otherwise require certificate validation. So, the point of ruby coming pre-bundled with many many certificates like in the case of browser/system is sort of futile mostly. How does ruby do it then? Simple, Ruby does it manually!</p>\n<p>The discovery to the fix took longer because Yosemite comes with dated OpenSSL version. Again adding to complication, your favorite Ruby version manager compiles Ruby with different OpenSSL version. This mismatch causes lots of confusion for us and apparently to the RubyVM itself too ;)</p>\n<p>Please read through following links for technical nitty-gritty: <a href=\"https://mislav.net/2013/07/ruby-openssl/\" rel=\"nofollow noreferrer\">https://mislav.net/2013/07/ruby-openssl/</a></p>\n"}, {"tags": [], "owner": {"reputation": 8308, "user_id": 164082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/43ffb54c19891452cd4ab3a2e95b30fb?s=128&d=identicon&r=PG", "display_name": "bolmaster2", "link": "https://stackoverflow.com/users/164082/bolmaster2"}, "is_accepted": false, "score": 0, "last_activity_date": 1435130961, "creation_date": 1435130961, "answer_id": 31020368, "question_id": 28189826, "link": "https://stackoverflow.com/questions/28189826/opensslsslsslerror-while-making-post-request-with-nethttp/31020368#31020368", "title": "OpenSSL::SSL::SSLError while making post request with Net::HTTP", "body": "<p>I found out another simple solution. Just install <code>openssl</code> with homebrew like this (if you're on a mac):</p>\n\n<pre><code>brew install openssl\n</code></pre>\n"}], "owner": {"reputation": 1976, "user_id": 767166, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/6a07e1b5f02cf61303cd2c3e97618a84?s=128&d=identicon&r=PG", "display_name": "cmthakur", "link": "https://stackoverflow.com/users/767166/cmthakur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1675, "favorite_count": 1, "accepted_answer_id": 28297147, "answer_count": 3, "score": 1, "last_activity_date": 1605683165, "creation_date": 1422440789, "question_id": 28189826, "link": "https://stackoverflow.com/questions/28189826/opensslsslsslerror-while-making-post-request-with-nethttp", "title": "OpenSSL::SSL::SSLError while making post request with Net::HTTP", "body": "<p>I tried different approaches(from google) to solve this error, but failed. I am unable to resolve this problem. </p>\n\n<p>My code looks like this:</p>\n\n<pre><code>require 'net/http'\nrequire 'uri'\nrequire 'json'\n\nuri = URI.parse \"https://dev.ramble.com/v1/user/login\"\nuri.user = \"user1\"\nuri.password = \"mypass\"\nconnection = Net::HTTP::new uri.host, uri.port\nconnection.use_ssl = true\nconnection.ca_file = \"/usr/local/etc/openssl/cert.pem\"\nconnection.verify_mode=OpenSSL::SSL::VERIFY_PEER\nsession = connection.start\n</code></pre>\n\n<p>It raise the following errors:</p>\n\n<pre><code>OpenSSL::SSL::SSLError: SSL_connect returned=1 errno=0 state=SSLv3 read server certificate B: certificate verify failed\n  from /Users/cmthakur/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/net/http.rb:920:in `connect'\n  from /Users/cmthakur/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/net/http.rb:920:in `block in connect'\n  from /Users/cmthakur/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/timeout.rb:76:in `timeout'\n  from /Users/cmthakur/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/net/http.rb:920:in `connect'\n  from /Users/cmthakur/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/net/http.rb:863:in `do_start'\n  from /Users/cmthakur/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/net/http.rb:858:in `start'\n</code></pre>\n\n<p>I will be very thankful if anyone help me resolving this errors.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 0, "creation_date": 1422441138, "post_id": 28189893, "comment_id": 44747735, "body": "yeah, i need to go to bed soon...  thank you for fixing my formatting!!"}, {"owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 0, "creation_date": 1422441428, "post_id": 28189893, "comment_id": 44747884, "body": "wouldn&#39;t this give me all the articles that only contain either foo or bar as well?  I want to return results that include both"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 0, "creation_date": 1422441853, "post_id": 28189893, "comment_id": 44748114, "body": "@believesInSanta right, I misunderstood your question. I updated my answer, hope it helps."}, {"owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 0, "creation_date": 1422442395, "post_id": 28189893, "comment_id": 44748419, "body": "Would you care to explain what you&#39;re doing with group and having methods?  thx."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 0, "creation_date": 1422442691, "post_id": 28189893, "comment_id": 44748595, "body": "@believesInSanta I added some explanation. If there is still something unclear, ask."}, {"owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "edited": false, "score": 0, "creation_date": 1422444580, "post_id": 28189893, "comment_id": 44749615, "body": "I see now.  The logic got me confused for a second.  You are essentially returning more items than you need and then removing the ones whose occurrence count is not equal to the array count.  I was thinking more in terms of a &#39;CONTAIN&#39; or &#39;LIKE&#39; SQL statement... I don&#39;t know if ActiveRecord has those implemented or not."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 1, "last_activity_date": 1422442665, "last_edit_date": 1422442665, "creation_date": 1422440933, "answer_id": 28189893, "question_id": 28189822, "link": "https://stackoverflow.com/questions/28189822/how-to-find-all-activerecord-objects-which-have-for-a-many-to-many-attribute-a-c/28189893#28189893", "title": "How to find all ActiveRecord objects which have for a many_to_many attribute a collection that contains all associated objects with specified array", "body": "<p>You should use <code>group</code>, like this:</p>\n\n<pre><code>Article.joins(:tags).where(tags: {name: %w(foo bar)}).group('articles.id').having('count(*) = ?', 2)\n</code></pre>\n\n<p>If you use <code>join</code> and if there are more than one <code>tags</code> with name <code>foo</code> or <code>bar</code> attached to specific article, there will be two rows with this article in results. So you just have to group your results by <code>article id</code> (or any other unique key, but primary key is most convenient here) and return only the ones with count equal to <code>2</code> (i.e. with both of your tags attached). </p>\n"}], "owner": {"reputation": 2887, "user_id": 3068541, "user_type": "registered", "accept_rate": 71, "profile_image": "https://graph.facebook.com/787075573/picture?type=large", "display_name": "JackyJohnson", "link": "https://stackoverflow.com/users/3068541/jackyjohnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 28189893, "answer_count": 1, "score": 0, "last_activity_date": 1422442665, "creation_date": 1422440769, "last_edit_date": 1422442287, "question_id": 28189822, "link": "https://stackoverflow.com/questions/28189822/how-to-find-all-activerecord-objects-which-have-for-a-many-to-many-attribute-a-c", "title": "How to find all ActiveRecord objects which have for a many_to_many attribute a collection that contains all associated objects with specified array", "body": "<p>I have 2 ActiveRecord objects associated with has_and_belongs_to_many relationship: Article and Tag.</p>\n\n<p>I would like to select all Articles with both tags with name foo and bar.</p>\n\n<p>I'm trying to get the following statement to go, but no luck.  Any help appreciated.</p>\n\n<pre><code># gives me non-inclusive associated articles.\nArticle.joins(:tags).where(tags: {name: ['foo','bar']}) \n</code></pre>\n\n<p>EDIT: pseudo code to further explain:</p>\n\n<pre><code>article_one.tags = ['foo', 'bar']  # want this one only\n\narticle_two.tags = ['foo', 'baz']  # no good\n\narticle_three.tags = ['bar', 'baz']  # no good\n</code></pre>\n\n<p>The statement above gives me all three :(</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jquery-isotope"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1422440715, "post_id": 28189791, "comment_id": 44747472, "body": "Do you include this file in project?"}, {"owner": {"reputation": 5508, "user_id": 1213618, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/077020668662f01758c0569131a33917?s=128&d=identicon&r=PG&f=1", "display_name": "griffon vulture", "link": "https://stackoverflow.com/users/1213618/griffon-vulture"}, "edited": false, "score": 0, "creation_date": 1422441137, "post_id": 28189791, "comment_id": 44747733, "body": "are other files/functions in assets/javascripts working?"}, {"owner": {"reputation": 127, "user_id": 3980218, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Qpy6.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3980218/alexander"}, "edited": false, "score": 0, "creation_date": 1422441497, "post_id": 28189791, "comment_id": 44747917, "body": "other files in assets are working good"}], "answers": [{"tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": true, "score": 0, "last_activity_date": 1422445042, "creation_date": 1422445042, "answer_id": 28191300, "question_id": 28189791, "link": "https://stackoverflow.com/questions/28189791/the-js-script-does-not-run-in-the-project/28191300#28191300", "title": "The JS script does not run in the project", "body": "<p>Put your code inside your document.ready:</p>\n\n<pre><code>  # app/assets/javascript/application.js\n//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree .\n\n$(document).ready(function(){\n var container = document.querySelector('#container');\n var iso;\n  imagesLoaded( container, function() {\n  iso = new Isotope( container, {\n });\n});\n\n});\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 3980218, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/2Qpy6.png?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/3980218/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 28191300, "answer_count": 1, "score": 1, "last_activity_date": 1422445042, "creation_date": 1422440672, "question_id": 28189791, "link": "https://stackoverflow.com/questions/28189791/the-js-script-does-not-run-in-the-project", "title": "The JS script does not run in the project", "body": "<p>I put js file in assets/javascripts, it has been initialized it the project but not worked.\nIt only works when I connect it directly from View file with the help of <code>&lt;script&gt; &lt;/script&gt;</code> tags.</p>\n\n<p><em>js file content</em></p>\n\n<pre><code>var container = document.querySelector('#container');\nvar iso;\n  imagesLoaded( container, function() {\n  iso = new Isotope( container, {\n });\n});\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "ruby-on-rails-3.2", "html-to-text"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1422440470, "post_id": 28189636, "comment_id": 44747334, "body": "Using <code>simple_format</code> to remove html tags sounds weird to me. That is not the purpose of that method. I would use <code>strip_tags</code> for that: <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/SanitizeHelper.html#method-i-strip_tags\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>"}, {"owner": {"reputation": 598, "user_id": 3522082, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/73aaa074502f78ed1d5556458ccc2037?s=128&d=identicon&r=PG", "display_name": "Navin", "link": "https://stackoverflow.com/users/3522082/navin"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1422445467, "post_id": 28189636, "comment_id": 44750077, "body": "if i type &lt;h1&gt;xxx&lt;/h1&gt; means I need bigger text with out any html tags in view. for that I am using simple_format"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1422445866, "post_id": 28189636, "comment_id": 44750341, "body": "But <code>simple_format(&quot;&lt;h1&gt;xxx&lt;&#47;h2&gt;&quot;)</code> would return <code>&lt;p&gt;&lt;h1&gt;xxx&lt;&#47;h1&gt;&lt;&#47;p&gt;</code> (what is invalid html)? Can you please elaborate an example what you try to achieve?"}, {"owner": {"reputation": 598, "user_id": 3522082, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/73aaa074502f78ed1d5556458ccc2037?s=128&d=identicon&r=PG", "display_name": "Navin", "link": "https://stackoverflow.com/users/3522082/navin"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1422521421, "post_id": 28189636, "comment_id": 44785269, "body": "In my rails application simple_format(&quot;&lt;h1&gt;xxx&lt;/h1&gt;&quot;) returns xxx(with big font size) , it works well for all html tags except &quot; &quot; quotations"}], "owner": {"reputation": 598, "user_id": 3522082, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/73aaa074502f78ed1d5556458ccc2037?s=128&d=identicon&r=PG", "display_name": "Navin", "link": "https://stackoverflow.com/users/3522082/navin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 224, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1422440245, "creation_date": 1422440245, "question_id": 28189636, "link": "https://stackoverflow.com/questions/28189636/rails-3-simple-format-not-prints-the-text-inside", "title": "Rails 3: simple_format not prints the text inside &quot; &quot;", "body": "<p>I am using simple_format to convert text with html tags to plain text in my rails application , everything works well, But simple_format doesn't shows the text inside \" \"quotations</p>\n\n<pre><code>simple_format(post[\"text\"])\n</code></pre>\n\n<p>This is my rails code, I have used sanitize: false also but it doesn't works.What to do?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4502366"}, "edited": false, "score": 0, "creation_date": 1422440754, "post_id": 28189602, "comment_id": 44747489, "body": "No,again same error showing after adding your line @Marek. Do you have any other solution ?"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1422440839, "post_id": 28189602, "comment_id": 44747540, "body": "@Subhra_agent forgot about <code>attr_accessible</code>. Check my edited answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4502366"}, "edited": false, "score": 0, "creation_date": 1422442741, "post_id": 28189602, "comment_id": 44748632, "body": "After putting all data at proper place now it is working fine."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 0, "last_activity_date": 1422440802, "last_edit_date": 1422440802, "creation_date": 1422440133, "answer_id": 28189602, "question_id": 28189536, "link": "https://stackoverflow.com/questions/28189536/how-can-i-solve-massassignmentsecurity-error-using-rails-version-3-2-19/28189602#28189602", "title": "How can I solve MassAssignmentSecurity error using rails version 3.2.19", "body": "<p>Instead of <code>&lt;%= f.password_field :con_password,placeholder:\"Enter your password again\" %&gt;</code>, you should name your field <code>password_confirmation</code>, because this is what your model expects if it has <code>validates :password, confirmation: true</code>:</p>\n\n<pre><code>&lt;%= f.password_field :password_confirmation, placeholder: \"Enter your password again\" %&gt;\n</code></pre>\n\n<p>You also have to add <code>password_confirmation</code> to <code>attr_accessible</code> in the model. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4502366"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422440802, "creation_date": 1422439940, "question_id": 28189536, "link": "https://stackoverflow.com/questions/28189536/how-can-i-solve-massassignmentsecurity-error-using-rails-version-3-2-19", "title": "How can I solve MassAssignmentSecurity error using rails version 3.2.19", "body": "<p>Can anybody please help me to resolve the following error using rails version-3.2.19 ?When i am submitting values to database this error is coming.</p>\n\n<p>Error</p>\n\n<pre><code>ActiveModel::MassAssignmentSecurity::Error in UsersController#create\n\nCan't mass-assign protected attributes: con_password\n</code></pre>\n\n<p>My code snippets are as follows.</p>\n\n<p>views/users/new.html.erb</p>\n\n<pre><code>&lt;center&gt;\n  &lt;h1&gt;Enter your data&lt;/h1&gt;\n  &lt;% if @user.errors.any? %&gt;\n      &lt;div id=\"error_explanation\"&gt;\n        &lt;h2&gt;&lt;%= pluralize(@user.errors.count, \"error\") %&gt; prohibited this post from being saved:&lt;/h2&gt;\n\n        &lt;ul&gt;\n          &lt;% @user.errors.full_messages.each do |message| %&gt;\n              &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n          &lt;% end %&gt;\n        &lt;/ul&gt;\n      &lt;/div&gt;\n  &lt;% end %&gt;\n  &lt;div class=\"form-div\"&gt;\n   &lt;%= form_for :user,:url =&gt; {:action =&gt; 'create'} do |f|%&gt;\n    &lt;p&gt;\n      &lt;%= f.label :Name %&gt;\n      &lt;%= f.text_field :name,placeholder:\"Enter your name\" %&gt;\n    &lt;/p&gt;\n        &lt;p&gt;\n          &lt;%= f.label :Email %&gt;\n          &lt;%= f.email_field :email,placeholder:\"Enter your Email\" %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n          &lt;%= f.label :Password %&gt;\n          &lt;%= f.password_field :password,placeholder:\"Enter your password\" %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n          &lt;%= f.label :password %&gt;\n          &lt;%= f.password_field :con_password,placeholder:\"Enter your password again\" %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n          &lt;%= f.label :content %&gt;\n          &lt;%= f.text_field :content,placeholder:\"Enter your content\" %&gt;\n        &lt;/p&gt;\n        &lt;p&gt;\n          &lt;%= f.submit \"Create User\",:class =&gt; 'submit' %&gt;\n        &lt;/p&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/center&gt;\n</code></pre>\n\n<p>controller/users_controller.rb</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def index\n\n  end\n  def new\n    @user=User.new\n  end\n  def show\n\n  end\n  def create\n    @user=User.new(params[:user])\n    if @user.save\n      flash[:notice]=\"User has created successfully\"\n      flash[:color]=\"valid\"\n      redirect_to :action =&gt; 'index'\n    else\n      flash[:alert]=\"User could not create\"\n      flash[:color]=\"invalid\"\n      render :new\n    end\n  end\nend\n</code></pre>\n\n<p>model/user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  attr_accessible :content, :email, :name, :password\n  EMAIL_REGEX = /\\A[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,4}\\z/i\n  validates :name, :presence =&gt; true, :uniqueness =&gt; true, :length =&gt; { :in =&gt; 3..20 }\n  validates :email, :presence =&gt; true, :uniqueness =&gt; true, :format =&gt; EMAIL_REGEX\n  validates :password, :confirmation =&gt; true\n  validates_length_of :password, :in =&gt; 6..20, :on =&gt; :create\nend\n</code></pre>\n\n<p>migrate\\20150128062543_create_users.rb</p>\n\n<pre><code>class CreateUsers &lt; ActiveRecord::Migration\n  def change\n    create_table :users do |t|\n      t.string :name\n      t.string :email\n      t.string :password\n      t.string :content\n\n      t.timestamps\n    end\n  end\nend\n</code></pre>\n\n<p>Please help me to solve this issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 761, "user_id": 2006706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7be029535e1eee83a81dcb4c9cdb436?s=128&d=identicon&r=PG", "display_name": "bronislav", "link": "https://stackoverflow.com/users/2006706/bronislav"}, "edited": false, "score": 0, "creation_date": 1422438880, "post_id": 28189091, "comment_id": 44746347, "body": "If your raw string is always formated in the same way, then use <code>Date.parse</code> method with custom format string."}], "answers": [{"tags": [], "owner": {"reputation": 661, "user_id": 2481868, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ku8h9.jpg?s=128&g=1", "display_name": "pkrawat1", "link": "https://stackoverflow.com/users/2481868/pkrawat1"}, "is_accepted": false, "score": 0, "last_activity_date": 1422442342, "creation_date": 1422442342, "answer_id": 28190365, "question_id": 28189091, "link": "https://stackoverflow.com/questions/28189091/how-to-covert-the-date-string-range-into-datatime-data-type/28190365#28190365", "title": "How to covert the date string range into datatime data type", "body": "<p>This may help</p>\n\n<pre><code># In order to generate\n# year = 2014\n# months = \"April/July\"\n# days = \"24-1\"\n\n/(?&lt;year&gt;\\d{4})\\s*(?&lt;months&gt;\\w+\\/\\w+)\\s*(?&lt;days&gt;\\d{1,2}\\-\\d{1,2})/ =~ \"2014 April/July  24-1\"\n\ndate1 = \"#{year} #{months.split('/')[0]} #{days.split('-')[0]}\"\ndate2 = \"#{year} #{months.split('/')[1]} #{days.split('-')[1]}\"\n\nstart_date = Date.strptime(date1, \"%Y %b %d\") #=&gt; Thu, 24 Apr 2014\nend_date = Date.strptime(date2, \"%Y %b %d\")   #=&gt; Tue, 01 Jul 2014\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 3675188, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/38ad90bb6d16a1a2201cf88699d0ebf9?s=128&d=identicon&r=PG&f=1", "display_name": "user3675188", "link": "https://stackoverflow.com/users/3675188/user3675188"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1422442817, "creation_date": 1422438619, "question_id": 28189091, "link": "https://stackoverflow.com/questions/28189091/how-to-covert-the-date-string-range-into-datatime-data-type", "title": "How to covert the date string range into datatime data type", "body": "<p>I need to convert the following <strong>raw string (date range)</strong> into ruby datetime datetype.</p>\n\n<p>How to finish it on Rails  ?</p>\n\n<h3>raw string</h3>\n\n<pre><code>\"2014 April/July  24-1\" \n</code></pre>\n\n<h3>convert to ruby datetime variable</h3>\n\n<pre><code>start_date = 2014-04-24 \nend_date = 2014-07-01\n</code></pre>\n\n<h3>raw string</h3>\n\n<pre><code>\"2015 April  06-20\"\n</code></pre>\n\n<h3>convert to ruby datetime variable</h3>\n\n<pre><code>start_date = 2015-04-06\nend_date = 2015-04-20\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "actionmailer"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1422438687, "post_id": 28189014, "comment_id": 44746229, "body": "If you want to attach a file to an email: <a href=\"http://guides.rubyonrails.org/action_mailer_basics.html#complete-list-of-action-mailer-methods\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 761, "user_id": 2006706, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7be029535e1eee83a81dcb4c9cdb436?s=128&d=identicon&r=PG", "display_name": "bronislav", "link": "https://stackoverflow.com/users/2006706/bronislav"}, "edited": false, "score": 2, "creation_date": 1422438796, "post_id": 28189014, "comment_id": 44746292, "body": "Please add what you have tried so far. We here not to implement your tasks, but to help find mistakes in you existed approaches."}, {"owner": {"reputation": 1875, "user_id": 994964, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/462a604c832b4180e593d9b5661bbdf3?s=128&d=identicon&r=PG", "display_name": "jbmyid", "link": "https://stackoverflow.com/users/994964/jbmyid"}, "edited": false, "score": 0, "creation_date": 1422438845, "post_id": 28189014, "comment_id": 44746325, "body": "I know and have implemented the attachment to the mail. But the question is I want to show the link in mail to download that attachment explicitly"}, {"owner": {"reputation": 1875, "user_id": 994964, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/462a604c832b4180e593d9b5661bbdf3?s=128&d=identicon&r=PG", "display_name": "jbmyid", "link": "https://stackoverflow.com/users/994964/jbmyid"}, "edited": false, "score": 0, "creation_date": 1422439285, "post_id": 28189014, "comment_id": 44746616, "body": "Have edited the question hope this is clear, what my problem is."}, {"owner": {"reputation": 415, "user_id": 2726340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab85ff757dec09d8299d2ee26906997c?s=128&d=identicon&r=PG", "display_name": "Stan", "link": "https://stackoverflow.com/users/2726340/stan"}, "edited": false, "score": 1, "creation_date": 1422440596, "post_id": 28189014, "comment_id": 44747416, "body": "As I see it, either you have a classic email attachment in the email, and then your client have it displayed according to its email software / website, or you have a link to the file in your server.  You can&#39;t have it like you describe."}, {"owner": {"reputation": 369, "user_id": 893329, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3d0279e2488a72d7cac1310a19c57056?s=128&d=identicon&r=PG", "display_name": "ajahongir", "link": "https://stackoverflow.com/users/893329/ajahongir"}, "edited": false, "score": 0, "creation_date": 1423813639, "post_id": 28189014, "comment_id": 45309442, "body": "I wonder if it is possible"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 859387, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e184c765fdeb061643ff68f298a3ae91?s=128&d=identicon&r=PG", "display_name": "Ilias Spyropoulos", "link": "https://stackoverflow.com/users/859387/ilias-spyropoulos"}, "is_accepted": false, "score": 2, "last_activity_date": 1588441495, "creation_date": 1588441495, "answer_id": 61563789, "question_id": 28189014, "link": "https://stackoverflow.com/questions/28189014/how-to-add-download-link-in-mail-for-attachment/61563789#61563789", "title": "How to add download link in mail for attachment", "body": "<p>Just spotted this question and although it is quite old, I am answering it for the benefit of others.</p>\n\n<p>I had a similar scenario, where I wanted the inline displayed image to trigger the download of an attached PDF file. The image was the preview of the PDF attachment.</p>\n\n<p>So, this is possible, but not with the <code>link_to</code> helper. Just plain HTML. Something like this I believe this is what you are looking for.</p>\n\n<pre><code>&lt;a href=\"&lt;%= attachments['image.jpg'].url %&gt;\"&gt;\n  &lt;%= image_tag attachments['image.jpg'].url %&gt;\n&lt;/a&gt;\n</code></pre>\n"}], "owner": {"reputation": 1875, "user_id": 994964, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/462a604c832b4180e593d9b5661bbdf3?s=128&d=identicon&r=PG", "display_name": "jbmyid", "link": "https://stackoverflow.com/users/994964/jbmyid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1343, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1588441495, "creation_date": 1422438378, "last_edit_date": 1422451543, "question_id": 28189014, "link": "https://stackoverflow.com/questions/28189014/how-to-add-download-link-in-mail-for-attachment", "title": "How to add download link in mail for attachment", "body": "<p>Is it possible to \"download\" the attachment with link in mail. without sending user to server to download as the attachment itself is a part of mail.</p>\n\n<p>I have added attachment to the mail using</p>\n\n<pre><code>attachments[\"filename.pdf\"] = File.open(pdf_fil)\n</code></pre>\n\n<p>The thing i want to know is that can we add \"download\" link in mail for this attachment as below. Which i tried but doesn't work.</p>\n\n<pre><code> link_to(\"Download\", attachments[\"filename.pdf\"].url)\n</code></pre>\n\n<p>Like we display image in view from attachment as</p>\n\n<pre><code>image_tag(attachments[\"filename.png\"].url)\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3324, "user_id": 2673893, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6ceddbb4ff45fc30179db47f0336e551?s=128&d=identicon&r=PG", "display_name": "Canna", "link": "https://stackoverflow.com/users/2673893/canna"}, "edited": false, "score": 0, "creation_date": 1422437371, "post_id": 28188599, "comment_id": 44745486, "body": "Thanks, i Know what require_tree . this mean, my question is, what if i change this to require_self and manually add my js files when i need? Isn&#39;t this more helpful for overload or performance?"}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 3324, "user_id": 2673893, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6ceddbb4ff45fc30179db47f0336e551?s=128&d=identicon&r=PG", "display_name": "Canna", "link": "https://stackoverflow.com/users/2673893/canna"}, "edited": false, "score": 0, "creation_date": 1422437993, "post_id": 28188599, "comment_id": 44745839, "body": "in production: When you precompile your assets in production machine, all your js,css will be precompiled into a single application.css &amp; application.js file, so we don&#39;t need to bother about loading each manually."}], "tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": false, "score": 0, "last_activity_date": 1422437979, "last_edit_date": 1422437979, "creation_date": 1422437082, "answer_id": 28188599, "question_id": 28188539, "link": "https://stackoverflow.com/questions/28188539/rails-asset-pipeline-policy/28188599#28188599", "title": "Rails Asset-pipeline policy", "body": "<pre><code>//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>Notice the last <code>require_tree .</code>  which means, what ever javascript files currently present inside your app/javsacript folder will be auto loaded. \nSo, in reply to your first question, Yes it's a right structure. Js files inside javascript folder will get auto loaded. </p>\n\n<p>You have kept the js file inside js folder means, in your project you are going to use it :)</p>\n\n<p>In production: \n When you precompile your assets in production machine, all your js,css will be precompiled into a single application.css &amp; application.js file, so we don't need to bother about loading each manually.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1422437823, "creation_date": 1422437823, "answer_id": 28188824, "question_id": 28188539, "link": "https://stackoverflow.com/questions/28188539/rails-asset-pipeline-policy/28188824#28188824", "title": "Rails Asset-pipeline policy", "body": "<p>Browsers usually cache assets files.</p>\n\n<p>Therefore it might make sense to deliver one huge assets file to the browser when the user visits the application for the first time. All following request (even for other pages) will be faster, because the browser will not have to reload other small assets.</p>\n\n<p>But it depends: If you have large javascript libraries that are only rarely used in your app, then it might be better to deliver that files only on that special pages.</p>\n"}, {"tags": [], "owner": {"reputation": 112, "user_id": 3641233, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/897fc1b6b15a1127d58ecda9fb0fdc34?s=128&d=identicon&r=PG", "display_name": "Franchy", "link": "https://stackoverflow.com/users/3641233/franchy"}, "is_accepted": false, "score": 0, "last_activity_date": 1501045490, "creation_date": 1501045490, "answer_id": 45317874, "question_id": 28188539, "link": "https://stackoverflow.com/questions/28188539/rails-asset-pipeline-policy/45317874#45317874", "title": "Rails Asset-pipeline policy", "body": "<p>I know it is an old question but this answers could help someone.</p>\n\n<p>If you need to add an asset just in a specific place you need to add it to the precompile array. In Rails 3 you need to modify <code>config/application.rb</code> file by adding the asset in this way: </p>\n\n<pre><code>config.assets.precompile += %w( foo.js bar.js )\n</code></pre>\n\n<p>In Rails 4 and 5 you need to modify <code>config/initializers/assets.rb</code> file in this way:</p>\n\n<pre><code>Rails.application.config.assets.precompile += %w( foo.js bar.js )\n</code></pre>\n\n<p>Don't forget to restart the server.</p>\n\n<p><a href=\"https://launchschool.com/blog/rails-asset-pipeline-best-practices\" rel=\"nofollow noreferrer\" title=\"Everything You Should Know About the Rails Asset Pipeline\">This</a> article is an excellent resource to learn about Asset Pipeline.</p>\n"}], "owner": {"reputation": 3324, "user_id": 2673893, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/6ceddbb4ff45fc30179db47f0336e551?s=128&d=identicon&r=PG", "display_name": "Canna", "link": "https://stackoverflow.com/users/2673893/canna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1501045490, "creation_date": 1422436867, "last_edit_date": 1422437413, "question_id": 28188539, "link": "https://stackoverflow.com/questions/28188539/rails-asset-pipeline-policy", "title": "Rails Asset-pipeline policy", "body": "<p>quick example,</p>\n\n<p>make a new rails project, and if we look in to <code>app/assets/javascripts/application.js</code></p>\n\n<p>it says,</p>\n\n<pre><code>//= require jquery\n//= require jquery_ujs\n//= require turbolinks\n//= require_tree .\n</code></pre>\n\n<p>in default.</p>\n\n<p>I added <code>foo.js, bar.js</code> in <code>app/assets/javascripts/</code></p>\n\n<p>and if i run the app, this asset-pipeline </p>\n\n<p>loads <code>foo.js, bar.js</code> in every-pages <code>even i don't need to use in most of the pages.</code></p>\n\n<p>Is this a right structure?</p>\n\n<p>What about</p>\n\n<p>change to <code>require_self</code></p>\n\n<p>and use <code>javascript_include_tag</code> and load the js files manually when i need?</p>\n\n<p>Isn't this a better way?</p>\n\n<p>Why Rails asset pipeline default policy is always loading every js files even i dont need?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 1, "creation_date": 1422444665, "post_id": 28188337, "comment_id": 44749667, "body": "What do you mean by &quot;it didn&#39;t work&quot;? Please provide the <i>precise</i> error message you are getting <i>within the question itself</i>."}], "answers": [{"tags": [], "owner": {"reputation": 53706, "user_id": 3001736, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j4wN2.jpg?s=128&g=1", "display_name": "Amit Joki", "link": "https://stackoverflow.com/users/3001736/amit-joki"}, "is_accepted": false, "score": 0, "last_activity_date": 1422436536, "creation_date": 1422436536, "answer_id": 28188435, "question_id": 28188337, "link": "https://stackoverflow.com/questions/28188337/use-try-function-with-map-function-in-ruby/28188435#28188435", "title": "use .try function with .map function in ruby", "body": "<p>Just remove empty strings and then map. You can use <code>delete_if</code> to remove the spaces.</p>\n\n<pre><code>curr_json_doc['title']['genre'].delete_if(&amp;:empty?).map {|s| s['name'] }.join(',');\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2729, "user_id": 1856513, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/a66ca1982dc4160d1a1129dbe9f6d31b?s=128&d=identicon&r=PG", "display_name": "Abhi", "link": "https://stackoverflow.com/users/1856513/abhi"}, "edited": false, "score": 2, "creation_date": 1497244796, "post_id": 28188437, "comment_id": 75977433, "body": "@rubyist You can accept this as the Answer of your Question"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 10, "last_activity_date": 1422436540, "creation_date": 1422436540, "answer_id": 28188437, "question_id": 28188337, "link": "https://stackoverflow.com/questions/28188337/use-try-function-with-map-function-in-ruby/28188437#28188437", "title": "use .try function with .map function in ruby", "body": "<p>You don't pass block correctly. Blocks are passed to methods outside argument parenthesis:</p>\n\n<pre><code>curr_json_doc['title']['genre'].try(:map) { |s| s['name'] }.try(:join, ',')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1422437004, "creation_date": 1422437004, "answer_id": 28188576, "question_id": 28188337, "link": "https://stackoverflow.com/questions/28188337/use-try-function-with-map-function-in-ruby/28188576#28188576", "title": "use .try function with .map function in ruby", "body": "<p>You can use <code>Array()</code> if you are unsure if an array, a single item or nil is returned:</p>\n\n<pre><code>Array(curr_json_doc['title']['genre']).map { |s| s['name'] }.join(',')\n</code></pre>\n\n<p>Please note: this changes slighly the behaviour, because it returns an empty string instead of <code>nil</code> if <code>curr_json_doc['title']['genre']</code> is <code>nil</code>.</p>\n"}], "owner": {"reputation": 2908, "user_id": 662503, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/881a236ca533281bb9c9ac92f380b5a0?s=128&d=identicon&r=PG", "display_name": "rubyist", "link": "https://stackoverflow.com/users/662503/rubyist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3625, "favorite_count": 0, "answer_count": 3, "score": 5, "last_activity_date": 1422437004, "creation_date": 1422436233, "question_id": 28188337, "link": "https://stackoverflow.com/questions/28188337/use-try-function-with-map-function-in-ruby", "title": "use .try function with .map function in ruby", "body": "<p>I need to get some values from the json record and extracting like below</p>\n\n<pre><code>curr_json_doc['title']['genre'].map { |s| s['name'] }.join(',')\n</code></pre>\n\n<p>But for some records curr_json_doc['title']['genre'] can be blank. So I want to use try function for map and join().</p>\n\n<p>I tried like below </p>\n\n<pre><code>curr_json_doc['title']['genre'].try(:map, { |s| s['name'] }).try(:join, (','))\n</code></pre>\n\n<p>but it didnt work. </p>\n"}, {"tags": ["ruby", "xml"], "comments": [{"owner": {"reputation": 1896, "user_id": 1004997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba09cf76cd0f051e8ce684c544d9a42?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Solntsev", "link": "https://stackoverflow.com/users/1004997/ivan-solntsev"}, "edited": false, "score": 0, "creation_date": 1422441437, "post_id": 28188207, "comment_id": 44747889, "body": "If this question offtopic on SO, where it can be asked?"}, {"owner": {"reputation": 7333, "user_id": 1957849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/sxylA.jpg?s=128&g=1", "display_name": "knowbody", "link": "https://stackoverflow.com/users/1957849/knowbody"}, "edited": false, "score": 0, "creation_date": 1422446509, "post_id": 28188207, "comment_id": 44750670, "body": "perhaps this will help <a href=\"https://github.com/mbklein/equivalent-xml\" rel=\"nofollow noreferrer\">github.com/mbklein/equivalent-xml</a>"}, {"owner": {"reputation": 1896, "user_id": 1004997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba09cf76cd0f051e8ce684c544d9a42?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Solntsev", "link": "https://stackoverflow.com/users/1004997/ivan-solntsev"}, "reply_to_user": {"reputation": 7333, "user_id": 1957849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/sxylA.jpg?s=128&g=1", "display_name": "knowbody", "link": "https://stackoverflow.com/users/1957849/knowbody"}, "edited": false, "score": 0, "creation_date": 1422448947, "post_id": 28188207, "comment_id": 44752119, "body": "thanks @knowbody, but equivalent-xml can&#39;t help me in any way, it only allow to compare some xml nodes. I need to apply xml patch to xml file."}, {"owner": {"reputation": 7333, "user_id": 1957849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/sxylA.jpg?s=128&g=1", "display_name": "knowbody", "link": "https://stackoverflow.com/users/1957849/knowbody"}, "edited": false, "score": 0, "creation_date": 1422449043, "post_id": 28188207, "comment_id": 44752181, "body": "the only other thing I&#39;ve seen was <code>libxmlpath</code> you mentioned"}, {"owner": {"reputation": 1896, "user_id": 1004997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba09cf76cd0f051e8ce684c544d9a42?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Solntsev", "link": "https://stackoverflow.com/users/1004997/ivan-solntsev"}, "reply_to_user": {"reputation": 7333, "user_id": 1957849, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/sxylA.jpg?s=128&g=1", "display_name": "knowbody", "link": "https://stackoverflow.com/users/1957849/knowbody"}, "edited": false, "score": 0, "creation_date": 1428574357, "post_id": 28188207, "comment_id": 47223911, "body": "found Java implementation <a href=\"https://github.com/dnault/xml-patch\" rel=\"nofollow noreferrer\">github.com/dnault/xml-patch</a>"}], "owner": {"reputation": 1896, "user_id": 1004997, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8ba09cf76cd0f051e8ce684c544d9a42?s=128&d=identicon&r=PG&f=1", "display_name": "Ivan Solntsev", "link": "https://stackoverflow.com/users/1004997/ivan-solntsev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 258, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1509541331, "creation_date": 1422435782, "last_edit_date": 1422449587, "question_id": 28188207, "link": "https://stackoverflow.com/questions/28188207/is-there-rfc-5261-xml-patch-implementation-in-ruby", "title": "Is there RFC 5261 (XML patch) implementation in ruby?", "body": "<p>I am looking to way to use <a href=\"http://tools.ietf.org/html/rfc5261\" rel=\"nofollow\">An Extensible Markup Language (XML) Patch perations Framework Utilizing XML Path Language (XPath) Selectors</a> in ruby.</p>\n\n<p>I have source xml files and patch xml files (extracted from X Rebirth game) and would like to get resulting xml.</p>\n\n<p>There is <a href=\"http://sourceforge.net/projects/xmlpatch/\" rel=\"nofollow\">libxmlpath</a> library, but i prefer native solution.</p>\n"}, {"tags": ["ruby", "cookies", "selenium-webdriver", "watir-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1422882392, "post_id": 28277564, "comment_id": 44910937, "body": "I have tried your solution.But still i get  error as &quot;You may only set cookies on html documents&quot;"}, {"owner": {"reputation": 456, "user_id": 2270425, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9370d4ba23079e936eeb5ce84e146107?s=128&d=identicon&r=PG", "display_name": "Wilco van Esch", "link": "https://stackoverflow.com/users/2270425/wilco-van-esch"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1422882831, "post_id": 28277564, "comment_id": 44911155, "body": "Is the page loaded? You might get that error if the browser is still on about:blank."}, {"owner": {"reputation": 456, "user_id": 2270425, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9370d4ba23079e936eeb5ce84e146107?s=128&d=identicon&r=PG", "display_name": "Wilco van Esch", "link": "https://stackoverflow.com/users/2270425/wilco-van-esch"}, "reply_to_user": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1422887600, "post_id": 28277564, "comment_id": 44914011, "body": "Can you tell me what the url is you&#39;re using? If not, do you also get the error when using example.com as in your question? If everything is fine when using your example, which works fine for me, then the issue is the url."}, {"owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "edited": false, "score": 0, "creation_date": 1423033911, "post_id": 28277564, "comment_id": 44980342, "body": "Yes its working with example.com but not working with my URL."}], "tags": [], "owner": {"reputation": 456, "user_id": 2270425, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/9370d4ba23079e936eeb5ce84e146107?s=128&d=identicon&r=PG", "display_name": "Wilco van Esch", "link": "https://stackoverflow.com/users/2270425/wilco-van-esch"}, "is_accepted": true, "score": 5, "last_activity_date": 1422879276, "creation_date": 1422879276, "answer_id": 28277564, "question_id": 28187331, "link": "https://stackoverflow.com/questions/28187331/set-cookie-using-watir-webdriver-or-selenium/28277564#28277564", "title": "Set cookie using watir webdriver or selenium", "body": "<p>You have to be on the domain you're setting the cookie for, so try:</p>\n\n<pre><code>driver.goto url\ndriver.cookies.add(\"test\",\"1\",{expires: 10.days.from_now})\n</code></pre>\n\n<p>Now it should show up when  on the same domain you do:</p>\n\n<pre><code>driver.cookies.to_a\n</code></pre>\n\n<p>That is assuming you've required active_support/time (to make the expiry work).</p>\n"}], "owner": {"reputation": 3959, "user_id": 1381266, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/7ac54c032c1dd24a5e6c737d06b83a03?s=128&d=identicon&r=PG", "display_name": "Galet", "link": "https://stackoverflow.com/users/1381266/galet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2940, "favorite_count": 0, "accepted_answer_id": 28277564, "answer_count": 1, "score": 4, "last_activity_date": 1422879276, "creation_date": 1422432177, "question_id": 28187331, "link": "https://stackoverflow.com/questions/28187331/set-cookie-using-watir-webdriver-or-selenium", "title": "Set cookie using watir webdriver or selenium", "body": "<p>Creation of driver:-</p>\n\n<pre><code>profile = Selenium::WebDriver::Firefox::Profile.new \n\ndriver = Watir::Browser.new :firefox, profile: profile\n\nurl= 'http://www.example.com'\n</code></pre>\n\n<p>Adding cookies:-</p>\n\n<pre><code>driver.cookies.add(\"test\",\"1\",{expires: 10.days.from_now})\n\ndriver.goto url\n</code></pre>\n\n<p>My cookies not returned in the response. </p>\n\n<p>If i add domain in cookies. </p>\n\n<pre><code>driver.cookies.add(\"test\",\"1\",{expires: 10.days.from_now, domain: 'example.com'})\n</code></pre>\n\n<p>its saying errors like below:-</p>\n\n<pre><code>Selenium::WebDriver::Error::InvalidCookieDomainError: You may only set cookies for the current domain\n</code></pre>\n\n<p>Can anyone help me to solve this? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 2, "creation_date": 1422432206, "post_id": 28187313, "comment_id": 44742898, "body": "When you use <a href=\"http://en.wikibooks.org/wiki/Ruby_Programming/Syntax/Literals#Interpolation\" rel=\"nofollow noreferrer\">string interpolation</a>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1422436054, "post_id": 28187415, "comment_id": 44744764, "body": "Outside of a string, <code>#</code> starts a comment"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1422436152, "post_id": 28187415, "comment_id": 44744832, "body": "@Stefan: Still, a logic error, if not a syntax one :P as you will not be accessing any variables using it."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 1, "last_activity_date": 1422432556, "creation_date": 1422432556, "answer_id": 28187415, "question_id": 28187313, "link": "https://stackoverflow.com/questions/28187313/when-do-you-have-to-use-while-referring-to-variables-in-ruby/28187415#28187415", "title": "When do you have to use #{} while referring to variables in Ruby?", "body": "<p><code>#{}</code> allows you to use any Ruby expression (not necessarily a variable) inside an interpolating quote (doubly-quoted strings, regular expressions...). It will evaluate the expression, convert the result to a string using the <code>to_s</code> method, then insert (\"interpolate\") the result into the string at that spot.</p>\n\n<p>For example, if you have a string <code>\"Hello, apollo!\"</code> and want to replace the <code>apollo</code> with the contents of a variable, you could say <code>\"Hello, #{name}!\"</code>.</p>\n\n<p>You could even put a whole program inside a string:</p>\n\n<pre><code>\"One plus two equals #{\n  def last_name_by_first_name(last_name)\n    People.find_by_last_name(last_name).first.first_name\n  end\n  find_by_last_name('Jack')\n}!\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"#{a = 1} + #{b = 2} = #{a + b}\"\n</code></pre>\n\n<p>(But please don't do that, it's a horrid way to write code. Sticking with variable look-ups and simple function calls should be enough for most purposes.)</p>\n\n<p>Anywhere outside of a string (or other interpolating quote), <code>#{}</code> is an error.</p>\n"}], "owner": {"reputation": 315, "user_id": 4312295, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/KYN0H.jpg?s=128&g=1", "display_name": "Lina", "link": "https://stackoverflow.com/users/4312295/lina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1422432714, "creation_date": 1422432126, "last_edit_date": 1422432714, "question_id": 28187313, "link": "https://stackoverflow.com/questions/28187313/when-do-you-have-to-use-while-referring-to-variables-in-ruby", "title": "When do you have to use #{} while referring to variables in Ruby?", "body": "<p>Sometimes if I've defined a a variable, for example </p>\n\n<pre><code>xyz=\"example\"\n</code></pre>\n\n<p>and I'd like to refer back to <code>xyz</code>, I can either type <code>xyz</code> or <code>#{xyz}</code> in statements/loops etc. </p>\n\n<p>My question is when do I use <code>xyz</code> and when do I use <code>#{xyz}</code>? And how do they differ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "mongoid", "replicaset"], "comments": [{"owner": {"reputation": 57591, "user_id": 1388319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258babf29502a002296bc415851e2395?s=128&d=identicon&r=PG", "display_name": "Stennie", "link": "https://stackoverflow.com/users/1388319/stennie"}, "edited": false, "score": 0, "creation_date": 1422433340, "post_id": 28186985, "comment_id": 44743393, "body": "It sounds like you&#39;re hitting a known bug in Moped: <a href=\"https://github.com/mongoid/moped/issues/257\" rel=\"nofollow noreferrer\">github.com/mongoid/moped/issues/257</a>. Can you try updating to Moped 2.0.2 or newer and see if that resolves the problem?"}, {"owner": {"reputation": 3199, "user_id": 1611683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/44576838a06da54b55272e8b7d662317?s=128&d=identicon&r=PG", "display_name": "pierallard", "link": "https://stackoverflow.com/users/1611683/pierallard"}, "edited": false, "score": 0, "creation_date": 1422440533, "post_id": 28186985, "comment_id": 44747375, "body": "Guillaume ? Is that you ? The  brother of Etienne ?"}, {"owner": {"reputation": 3828, "user_id": 334945, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/MOAd5.jpg?s=128&g=1", "display_name": "The Mighty Rubber Duck", "link": "https://stackoverflow.com/users/334945/the-mighty-rubber-duck"}, "reply_to_user": {"reputation": 57591, "user_id": 1388319, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/258babf29502a002296bc415851e2395?s=128&d=identicon&r=PG", "display_name": "Stennie", "link": "https://stackoverflow.com/users/1388319/stennie"}, "edited": false, "score": 0, "creation_date": 1422489935, "post_id": 28186985, "comment_id": 44775381, "body": "@Stennie I should have thought to ask about that at the SydMUG. I updated to mongoid 4.0.1 and moped 2.0.3 and unfortunately still no dice. I&#39;ll keep an eye on the issue though. Thanks for the tip!"}, {"owner": {"reputation": 3828, "user_id": 334945, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/MOAd5.jpg?s=128&g=1", "display_name": "The Mighty Rubber Duck", "link": "https://stackoverflow.com/users/334945/the-mighty-rubber-duck"}, "reply_to_user": {"reputation": 3199, "user_id": 1611683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/44576838a06da54b55272e8b7d662317?s=128&d=identicon&r=PG", "display_name": "pierallard", "link": "https://stackoverflow.com/users/1611683/pierallard"}, "edited": false, "score": 0, "creation_date": 1422490106, "post_id": 28186985, "comment_id": 44775433, "body": "@ForgetTheNorm the very same. You might want to hit me on LinkedIn though. SO is hardly the place for fireside chats :)"}], "owner": {"reputation": 3828, "user_id": 334945, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/MOAd5.jpg?s=128&g=1", "display_name": "The Mighty Rubber Duck", "link": "https://stackoverflow.com/users/334945/the-mighty-rubber-duck"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 746, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1422430790, "creation_date": 1422430790, "question_id": 28186985, "link": "https://stackoverflow.com/questions/28186985/slow-response-on-replica-set-using-mongoid-when-one-node-is-down", "title": "Slow response on replica set using mongoid when one node is down", "body": "<p>I have a cluster of 3 MongoDB nodes (10.66.5.3, 10.66.5.4, 10.66.5.5) and it all runs smoothly when all nodes are alive and kicking. </p>\n\n<p>Now, when I arbitrarily shut one machine down, I have some high latency (10s) on all db queries when hitting the replica set through the <code>mongoid</code> gem. The queries run fine when using the CLI <code>mongo</code> tool. The <code>rs.status()</code> command returns immediately with the correct information, so I believe the mongoDB side of it is configured properly.</p>\n\n<p>Running the commands from the <code>pry</code> console yields the same 10s latency. Occasionally the query will fail when hitting the web api, though I think it's just timeout killing the queries. </p>\n\n<p>Here is the application's mongoid.yml.</p>\n\n<pre><code>mock_production:\n  sessions:\n    default:\n      database: project\n      hosts:\n        - localhost:27017\n      options:\n        read: :primary\n    replica_set:\n      database: project\n      hosts:\n        - 10.66.5.3:27017\n        - 10.66.5.4:27017\n        - 10.66.5.5:27017\n      options:\n        read: :primary\n        write:\n          w: :majority\n</code></pre>\n\n<p>If feels as if the code is checking on the state of the cluster each time and wasting time on the dead node. Am I doing anything wrong, did I miss a configuration option? </p>\n\n<p>I tried adding <code>refresh_interval: 10</code> (suggested in a few online resources) to the cluster options but it didn't do anything.</p>\n\n<p>The latency is consistently 10s so I believe there is probably a setting doing something nasty.</p>\n\n<p>Any thoughts?</p>\n\n<p>Software:</p>\n\n<ul>\n<li>ruby (2.1.5p273)</li>\n<li>rails (4.1.6)</li>\n<li>mongoid (4.0.0)</li>\n<li>moped (2.0.0)</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "redmine"], "comments": [{"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422430069, "post_id": 28186631, "comment_id": 44742053, "body": "I would suggest to move to Linux Environment. Windows is never recommended for Rails. :)"}, {"owner": {"reputation": 1207, "user_id": 3001356, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/46qzw.png?s=128&g=1", "display_name": "Smrita", "link": "https://stackoverflow.com/users/3001356/smrita"}, "reply_to_user": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "edited": false, "score": 0, "creation_date": 1422430134, "post_id": 28186631, "comment_id": 44742094, "body": "I am supposed to install redmine in a windows server hence I dont have that option until and unless I install virtual box !"}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1422431476, "last_edit_date": 1495540168, "creation_date": 1422431476, "answer_id": 28187160, "question_id": 28186631, "link": "https://stackoverflow.com/questions/28186631/error-while-installing-rdiscount/28187160#28187160", "title": "Error while installing rdiscount?", "body": "<p><code>rdiscount</code> is broken for windows. Check this issue: <a href=\"https://github.com/davidfstr/rdiscount/issues/74\" rel=\"nofollow noreferrer\">https://github.com/davidfstr/rdiscount/issues/74</a></p>\n\n<blockquote>\n  <p>On win7 32bit using either mingw gcc 4.6.2 or mingw-w64 gcc 4.7.2 I\n  get gem build failures due to the use of the DWORD macro.</p>\n  \n  <p>The DWORD, WORD, and BYTE macros are known windows data types. Their\n  unfortunate re-use in discount/rdiscount causes problems with the\n  mingw/mingw-w64 headers as in the following failure:</p>\n</blockquote>\n\n<p>Also refer to this SO for further details: <a href=\"https://stackoverflow.com/a/15246336/3035830\">https://stackoverflow.com/a/15246336/3035830</a></p>\n"}], "owner": {"reputation": 1207, "user_id": 3001356, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/46qzw.png?s=128&g=1", "display_name": "Smrita", "link": "https://stackoverflow.com/users/3001356/smrita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 252, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422431476, "creation_date": 1422429333, "last_edit_date": 1495535188, "question_id": 28186631, "link": "https://stackoverflow.com/questions/28186631/error-while-installing-rdiscount", "title": "Error while installing rdiscount?", "body": "<p>I am trying to setuip redmine for which I have to install a lot of 'gems'. Well I have no knowledge of ruby on rails or gems or bundler. In the redmine installation doc they have ,mentioned that I use </p>\n\n<pre><code>bundle install --without development test\n</code></pre>\n\n<p>to install needed gems. I ran into some problems while installing json  due to which I had to install development kit. Now after installing the development kit and adding it to the environment variable (I am trying to install it on windows server ) I followed <a href=\"https://stackoverflow.com/questions/10694997/gem-install-json-v-1-7-3-gives-please-update-your-path-to-include-build-tools\">this</a> . It says that after installing development kit I need to execute the following commands</p>\n\n<pre><code>Unzip the zip\n\nopen command-line and go to unzipperd folder\n\nruby dk.rb init\n\nruby dk.rb install\n\ngem install rdiscount --platform=ruby\n</code></pre>\n\n<p>However while installing rdiscount I am getting the following error</p>\n\n<p><img src=\"https://i.stack.imgur.com/ittFF.png\" alt=\"enter image description here\"></p>\n\n<p>What exactly am I missing?</p>\n"}, {"tags": ["ruby", "encryption"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1422427896, "post_id": 28186253, "comment_id": 44741113, "body": "Why do you run base64 decode on the key and the iv in the Ruby version, but not in the PHP version?"}], "answers": [{"comments": [{"owner": {"reputation": 3, "user_id": 4501673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c3ae27eec9dc178ff1f9ac46671e3e5?s=128&d=identicon&r=PG&f=1", "display_name": "inthecloud", "link": "https://stackoverflow.com/users/4501673/inthecloud"}, "edited": false, "score": 0, "creation_date": 1422441122, "post_id": 28188429, "comment_id": 44747726, "body": "Genius! but may I ask why use AES-256-ECB is the Ruby example ?"}, {"owner": {"reputation": 1752, "user_id": 228067, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aK37f.jpg?s=128&g=1", "display_name": "sashaegorov", "link": "https://stackoverflow.com/users/228067/sashaegorov"}, "reply_to_user": {"reputation": 3, "user_id": 4501673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c3ae27eec9dc178ff1f9ac46671e3e5?s=128&d=identicon&r=PG&f=1", "display_name": "inthecloud", "link": "https://stackoverflow.com/users/4501673/inthecloud"}, "edited": false, "score": 0, "creation_date": 1422444576, "post_id": 28188429, "comment_id": 44749612, "body": "@inthecloud Here are good readings about this:  - <a href=\"http://stackoverflow.com/questions/1864700/part-ii-how-to-make-ruby-aes-256-cbc-and-php-mcrypt-rijndael-128-play-well-toge\" title=\"part ii how to make ruby aes 256 cbc and php mcrypt rijndael 128 play well toge\">stackoverflow.com/questions/1864700/&hellip;</a> -  <a href=\"http://www.chilkatsoft.com/p/php_aes.asp\" rel=\"nofollow noreferrer\">chilkatsoft.com/p/php_aes.asp</a>"}], "tags": [], "owner": {"reputation": 1752, "user_id": 228067, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/aK37f.jpg?s=128&g=1", "display_name": "sashaegorov", "link": "https://stackoverflow.com/users/228067/sashaegorov"}, "is_accepted": true, "score": 0, "last_activity_date": 1422436525, "creation_date": 1422436525, "answer_id": 28188429, "question_id": 28186253, "link": "https://stackoverflow.com/questions/28186253/ruby-to-decrypt-php-encrypted-text/28188429#28188429", "title": "Ruby to decrypt PHP encrypted text", "body": "<p>Everything here is correct. But.\nIt is necessary to use AES-<strong>256</strong>-ECB in your example.</p>\n\n<p>Here the code which is <a href=\"http://repl.it/9MW\" rel=\"nofollow\">runnable</a>:</p>\n\n<pre><code>require \"openssl\"\nrequire \"digest\"\nrequire \"uri\"\nrequire \"base64\"\n\ndata = 'T353/s48iKzAf61b2dCOnqUApYa4xxjye8he4oAtJHyyCKl8sCbI33hfP6IqOsQZEIWeQBCsvy97xwJMPD8RwLG4J0wgX9Ihlti1vMar+5nrLrCR4lAfZcoJopoBt1JVnDAojLW+y0S0y5c4GCdB8YrHzj4jv70dg3yX8DxlAWE='\nkey = \"uUxJIpSKMbOQQdtm6Y4rPEXeE9TAKUns\"\n#iv = 'PiToVoRjwlg8UwxUxQKI4w=='\naes = OpenSSL::Cipher::AES.new(256, :ECB)\n\n#  Without padding checksum|4033315172 will be truncated!\naes.padding = 0\naes.decrypt\naes.key = key\n#aes.iv = iv\n\nplain = aes.update(data.unpack('m')[0]) + aes.final\n</code></pre>\n\n<p>After <code>decrypt</code> I've got the following:</p>\n\n<pre><code>=&gt; \"date_add|2015-01-28 01:36:17\\xC2\\xA4id_lang|1\\xC2\\xA4id_currency|1\\xC2\\xA4id_guest|12165\\xC2\\xA4id_connections|10668\\xC2\\xA4checksum|4033315172\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\\x00\"\n</code></pre>\n\n<p>Next. Without zero-padding in this example, last character of <code>checksum</code> will be truncated. If possible, don't use <strong>EBC</strong> mode. <a href=\"http://ruby-doc.org/stdlib-2.0/libdoc/openssl/rdoc/OpenSSL/Cipher.html#label-Choosing+an+IV\" rel=\"nofollow\">Here</a> is why.</p>\n\n<p>And finally, you don't need IV in this example.\nGood luck!</p>\n"}], "owner": {"reputation": 3, "user_id": 4501673, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c3ae27eec9dc178ff1f9ac46671e3e5?s=128&d=identicon&r=PG&f=1", "display_name": "inthecloud", "link": "https://stackoverflow.com/users/4501673/inthecloud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 736, "favorite_count": 1, "accepted_answer_id": 28188429, "answer_count": 1, "score": 0, "last_activity_date": 1422436525, "creation_date": 1422427674, "question_id": 28186253, "link": "https://stackoverflow.com/questions/28186253/ruby-to-decrypt-php-encrypted-text", "title": "Ruby to decrypt PHP encrypted text", "body": "<p>I'd like to use Ruby to decrypt a string that's encrypted with PHP. The same decryption logic works fine with PHP, but the Ruby code returns garbage.</p>\n\n<p>The working PHP example:</p>\n\n<pre class=\"lang-php prettyprint-override\"><code>&lt;?php\n\n$_RIJNDAEL_KEY_ = \"uUxJIpSKMbOQQdtm6Y4rPEXeE9TAKUns\";\n$_RIJNDAEL_IV_ = \"PiToVoRjwlg8UwxUxQKI4w==\";\n$ciphertext = 'T353/s48iKzAf61b2dCOnqUApYa4xxjye8he4oAtJHyyCKl8sCbI33hfP6IqOsQZEIWeQBCsvy97xwJMPD8RwLG4J0wgX9Ihlti1vMar+5nrLrCR4lAfZcoJopoBt1JVnDAojLW+y0S0y5c4GCdB8YrHzj4jv70dg3yX8DxlAWE=';\n\n\n$content = mcrypt_decrypt(MCRYPT_RIJNDAEL_128, $_RIJNDAEL_KEY_, base64_decode($ciphertext), MCRYPT_MODE_ECB, $_RIJNDAEL_IV_);\necho $content . \"\\n\";\n\n?&gt;\n</code></pre>\n\n<p>The not-working Ruby example:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>require \"openssl\"\nrequire \"digest\"\nrequire \"uri\"\nrequire \"base64\"\n\ndata = Base64.decode64(\"T353/s48iKzAf61b2dCOnqUApYa4xxjye8he4oAtJHyyCKl8sCbI33hfP6IqOsQZEIWeQBCsvy97xwJMPD8RwLG4J0wgX9Ihlti1vMar+5nrLrCR4lAfZcoJopoBt1JVnDAojLW+y0S0y5c4GCdB8YrHzj4jv70dg3yX8DxlAWE=\")\nkey = Base64.decode64('uUxJIpSKMbOQQdtm6Y4rPEXeE9TAKUns')\niv = Base64.decode64('PiToVoRjwlg8UwxUxQKI4w==')\naes = OpenSSL::Cipher.new('AES-128-ECB')\n\naes.decrypt\naes.padding = 0\naes.key = key\naes.iv = iv\n\nplain = aes.update(data) + aes.final\nputs plain\n</code></pre>\n\n<p>Could anyone shed some light ? Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rails-activerecord"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1422427561, "post_id": 28186174, "comment_id": 44740981, "body": "Show the <code>code</code> how you rendered that partial file."}, {"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1422427974, "post_id": 28186174, "comment_id": 44741143, "body": "Code for one partial is same as before, just clarified. Added other partial. Thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422428204, "post_id": 28186262, "comment_id": 44741237, "body": "But as you show above, the code has an .each method so that it works fine. The issue is with the _new partial right? Not the _index? Thanks!"}, {"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422428313, "post_id": 28186262, "comment_id": 44741282, "body": "As in, the issue isn&#39;t with rendering the posts, it&#39;s with rendering the form for making posts specifically at the line it can&#39;t find :text: &lt;%= f.text_area :text %&gt;"}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422428362, "post_id": 28186262, "comment_id": 44741302, "body": "What&#39;s the action it&#39;s hitting to reach the partial? it&#39;s new action or index ?"}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422428598, "post_id": 28186262, "comment_id": 44741412, "body": "Just updated my answer assuming in your welcome/index page you are listing all the posts. Assuming you have a new post creation form in the same page, try initializing @post = Post.new, hope that works."}, {"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422428770, "post_id": 28186262, "comment_id": 44741479, "body": "Worked thanks- can you reference any source I can read on understanding what you mean by &#39;what&#39;s the action it&#39;s hitting to reach the partial&#39;? It seemed to me like def new should have been the relevant place in the controller not the def index, which has me confused now. Thanks so much Ajay!"}, {"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422429207, "post_id": 28186262, "comment_id": 44741674, "body": "So it works with the exact same code as the other controller except changing the def index so that it&#39;s posts = Post.all and def create has post = Post.new(post_params) post.save redirect_to &#39;/&#39;. My question is, why was the index method interfering with the new/create? Is it because of the way I moved the local variable into the partials or partials have accessing to the full controller instance variables or?"}, {"owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "reply_to_user": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422429799, "post_id": 28186262, "comment_id": 44741938, "body": "You are good to go with following example: <a href=\"http://www.sitepoint.com/building-your-first-rails-application-views-and-controllers/\" rel=\"nofollow noreferrer\">sitepoint.com/&hellip;</a> you can join me in chat, to talk regarding your query."}], "tags": [], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "is_accepted": true, "score": 1, "last_activity_date": 1422428536, "last_edit_date": 1422428536, "creation_date": 1422427729, "answer_id": 28186262, "question_id": 28186174, "link": "https://stackoverflow.com/questions/28186174/rendering-partial-from-another-controller-breaks-app-undefined-method-text-f/28186262#28186262", "title": "Rendering partial from another controller breaks app - undefined method `text&#39; for #&lt;Post::ActiveRecord_Relation:0x007fe74893b390&gt;", "body": "<p><strong>The issue here is you are trying to print the text of all the posts, the text is attribute of single post.. That' why it's unable to find, 'text' attribute of association result(Post.all).</strong> </p>\n\n<pre><code>def index\n    @posts = Post.all\nend\n\n\n#index.html.erb \n &lt;% @posts.each do |post| %&gt; \n  &lt;%= post.text %&gt; \n &lt;% end %&gt;\n</code></pre>\n\n<p>Assuming you are trying to list all the posts &amp; create a new post being in the welcome/index, you need to modify your index action like this :</p>\n\n<pre><code>  def index\n   @posts = Post.all  #this one to list posts\n   @post = Post.new  #this initializer will be used in your _new partial.\n  end\n</code></pre>\n"}], "owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 148, "favorite_count": 0, "accepted_answer_id": 28186262, "answer_count": 1, "score": 0, "last_activity_date": 1422808319, "creation_date": 1422427336, "last_edit_date": 1495542035, "question_id": 28186174, "link": "https://stackoverflow.com/questions/28186174/rendering-partial-from-another-controller-breaks-app-undefined-method-text-f", "title": "Rendering partial from another controller breaks app - undefined method `text&#39; for #&lt;Post::ActiveRecord_Relation:0x007fe74893b390&gt;", "body": "<p>I'm trying to render partials from another view <code>posts/_index</code> and <code>posts/_new</code> and controller Posts, into another view <code>welcome/index</code>. The posts/_index loads fine, but I can't figure out/understand why the posts/_new throws an error for the :text method which is only defined in the database migration, which I thought would be universally accessible. </p>\n\n<p>This is where it references the error in the welcome/_new partial:</p>\n\n<pre><code>&lt;%= form_for :post, url: posts_path do |f| %&gt;\n  &lt;p id=\"post_box\"&gt;\n    &lt;%= f.text_area :text %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And this is the working posts/_index partial:</p>\n\n<pre><code>&lt;% post.reverse.each do |post| %&gt;\n  &lt;div class=\"panel panel-default\"&gt;\n    &lt;div class=\"panel-body\"&gt;\n      &lt;%= post.text %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>For reference the code is the same as: <a href=\"https://stackoverflow.com/questions/28184011/why-arent-instance-variables-defined-in-a-controllers-methods-available-in-the/28184129?noredirect=1#comment44738280_28184129\">Why aren&#39;t instance variables defined in a controller&#39;s methods available in the corresponding partials?</a></p>\n\n<p>except <code>controllers/welcome_controller.rb</code></p>\n\n<pre><code>class WelcomeController &lt; ApplicationController\n  def new\n  end\n\n  def index\n    @post = Post.all\n  end\n\n  private\n    def post_params\n      params.require(:post).permit(:text)\n    end\nend\n</code></pre>\n\n<p>Full trace:</p>\n\n<pre><code>app/views/posts/_index.html.erb:1:in `_app_views_posts__index_html_erb__2553516224846921857_70315677910360'\nactionview (4.1.7) lib/action_view/template.rb:145:in `block in render'\nactivesupport (4.1.7) lib/active_support/notifications.rb:161:in `instrument'\nactionview (4.1.7) lib/action_view/template.rb:339:in `instrument'\nactionview (4.1.7) lib/action_view/template.rb:143:in `render'\nactionview (4.1.7) lib/action_view/renderer/partial_renderer.rb:306:in `render_partial'\nactionview (4.1.7) lib/action_view/renderer/partial_renderer.rb:279:in `block in render'\nactionview (4.1.7) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'\nactivesupport (4.1.7) lib/active_support/notifications.rb:159:in `block in instrument'\nactivesupport (4.1.7) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.1.7) lib/active_support/notifications.rb:159:in `instrument'\nactionview (4.1.7) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'\nactionview (4.1.7) lib/action_view/renderer/partial_renderer.rb:278:in `render'\nactionview (4.1.7) lib/action_view/renderer/renderer.rb:47:in `render_partial'\nactionview (4.1.7) lib/action_view/renderer/renderer.rb:21:in `render'\nactionview (4.1.7) lib/action_view/helpers/rendering_helper.rb:32:in `render'\napp/views/welcome/index.html.erb:118:in `_app_views_welcome_index_html_erb___2498066675045436064_70315678370540'\nactionview (4.1.7) lib/action_view/template.rb:145:in `block in render'\nactivesupport (4.1.7) lib/active_support/notifications.rb:161:in `instrument'\nactionview (4.1.7) lib/action_view/template.rb:339:in `instrument'\nactionview (4.1.7) lib/action_view/template.rb:143:in `render'\nactionview (4.1.7) lib/action_view/renderer/template_renderer.rb:55:in `block (2 levels) in render_template'\nactionview (4.1.7) lib/action_view/renderer/abstract_renderer.rb:38:in `block in instrument'\nactivesupport (4.1.7) lib/active_support/notifications.rb:159:in `block in instrument'\nactivesupport (4.1.7) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.1.7) lib/active_support/notifications.rb:159:in `instrument'\nactionview (4.1.7) lib/action_view/renderer/abstract_renderer.rb:38:in `instrument'\nactionview (4.1.7) lib/action_view/renderer/template_renderer.rb:54:in `block in render_template'\nactionview (4.1.7) lib/action_view/renderer/template_renderer.rb:62:in `render_with_layout'\nactionview (4.1.7) lib/action_view/renderer/template_renderer.rb:53:in `render_template'\nactionview (4.1.7) lib/action_view/renderer/template_renderer.rb:17:in `render'\nactionview (4.1.7) lib/action_view/renderer/renderer.rb:42:in `render_template'\nactionview (4.1.7) lib/action_view/renderer/renderer.rb:23:in `render'\nactionview (4.1.7) lib/action_view/rendering.rb:99:in `_render_template'\nactionpack (4.1.7) lib/action_controller/metal/streaming.rb:217:in `_render_template'\nactionview (4.1.7) lib/action_view/rendering.rb:82:in `render_to_body'\nactionpack (4.1.7) lib/action_controller/metal/rendering.rb:32:in `render_to_body'\nactionpack (4.1.7) lib/action_controller/metal/renderers.rb:32:in `render_to_body'\nactionpack (4.1.7) lib/abstract_controller/rendering.rb:25:in `render'\nactionpack (4.1.7) lib/action_controller/metal/rendering.rb:16:in `render'\nactionpack (4.1.7) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'\nactivesupport (4.1.7) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\n/Users/lasernite/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'\nactivesupport (4.1.7) lib/active_support/core_ext/benchmark.rb:12:in `ms'\nactionpack (4.1.7) lib/action_controller/metal/instrumentation.rb:41:in `block in render'\nactionpack (4.1.7) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'\nactiverecord (4.1.7) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'\nactionpack (4.1.7) lib/action_controller/metal/instrumentation.rb:40:in `render'\nactionpack (4.1.7) lib/action_controller/metal/implicit_render.rb:10:in `default_render'\nactionpack (4.1.7) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (4.1.7) lib/abstract_controller/base.rb:189:in `process_action'\nactionpack (4.1.7) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.1.7) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:113:in `call'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:113:in `call'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:229:in `block in halting'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:229:in `call'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:229:in `block in halting'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:166:in `call'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:166:in `block in halting'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:166:in `call'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:166:in `block in halting'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:166:in `call'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:166:in `block in halting'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:86:in `call'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:86:in `run_callbacks'\nactionpack (4.1.7) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.1.7) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.1.7) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\nactivesupport (4.1.7) lib/active_support/notifications.rb:159:in `block in instrument'\nactivesupport (4.1.7) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.1.7) lib/active_support/notifications.rb:159:in `instrument'\nactionpack (4.1.7) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.1.7) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.1.7) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.1.7) lib/abstract_controller/base.rb:136:in `process'\nactionview (4.1.7) lib/action_view/rendering.rb:30:in `process'\nactionpack (4.1.7) lib/action_controller/metal.rb:196:in `dispatch'\nactionpack (4.1.7) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\nactionpack (4.1.7) lib/action_controller/metal.rb:232:in `block in action'\nactionpack (4.1.7) lib/action_dispatch/routing/route_set.rb:82:in `call'\nactionpack (4.1.7) lib/action_dispatch/routing/route_set.rb:82:in `dispatch'\nactionpack (4.1.7) lib/action_dispatch/routing/route_set.rb:50:in `call'\nactionpack (4.1.7) lib/action_dispatch/journey/router.rb:73:in `block in call'\nactionpack (4.1.7) lib/action_dispatch/journey/router.rb:59:in `each'\nactionpack (4.1.7) lib/action_dispatch/journey/router.rb:59:in `call'\nactionpack (4.1.7) lib/action_dispatch/routing/route_set.rb:678:in `call'\nrack (1.5.2) lib/rack/etag.rb:23:in `call'\nrack (1.5.2) lib/rack/conditionalget.rb:25:in `call'\nrack (1.5.2) lib/rack/head.rb:11:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/flash.rb:254:in `call'\nrack (1.5.2) lib/rack/session/abstract/id.rb:225:in `context'\nrack (1.5.2) lib/rack/session/abstract/id.rb:220:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/cookies.rb:560:in `call'\nactiverecord (4.1.7) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (4.1.7) lib/active_record/connection_adapters/abstract/connection_pool.rb:621:in `call'\nactiverecord (4.1.7) lib/active_record/migration.rb:380:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.1.7) lib/active_support/callbacks.rb:82:in `run_callbacks'\nactionpack (4.1.7) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/reloader.rb:73:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.1.7) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.1.7) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.1.7) lib/active_support/tagged_logging.rb:68:in `block in tagged'\nactivesupport (4.1.7) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.1.7) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.1.7) lib/rails/rack/logger.rb:20:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.5.2) lib/rack/methodoverride.rb:21:in `call'\nrack (1.5.2) lib/rack/runtime.rb:17:in `call'\nactivesupport (4.1.7) lib/active_support/cache/strategy/local_cache_middleware.rb:26:in `call'\nrack (1.5.2) lib/rack/lock.rb:17:in `call'\nactionpack (4.1.7) lib/action_dispatch/middleware/static.rb:84:in `call'\nrack (1.5.2) lib/rack/sendfile.rb:112:in `call'\nrailties (4.1.7) lib/rails/engine.rb:514:in `call'\nrailties (4.1.7) lib/rails/application.rb:144:in `call'\nrack (1.5.2) lib/rack/lock.rb:17:in `call'\nrack (1.5.2) lib/rack/content_length.rb:14:in `call'\nrack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'\n/Users/lasernite/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'\n/Users/lasernite/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'\n/Users/lasernite/.rvm/rubies/ruby-2.1.4/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 0, "creation_date": 1422435425, "post_id": 28186032, "comment_id": 44744417, "body": "Worth reading the ticket mentionned int the warn line: <a href=\"https://tickets.opscode.com/browse/CHEF-3694\" rel=\"nofollow noreferrer\">tickets.opscode.com/browse/CHEF-3694</a> It means you have multiple recipes (at least two)  declaring the same package resource, so the chef-client clone it and show the warning"}, {"owner": {"reputation": 3973, "user_id": 4070979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5a40b217933f720d09ae107a2b6d66cb?s=128&d=identicon&r=PG&f=1", "display_name": "Tejay Cardon", "link": "https://stackoverflow.com/users/4070979/tejay-cardon"}, "edited": false, "score": 2, "creation_date": 1422454833, "post_id": 28186032, "comment_id": 44755927, "body": "This is VERY normal, and not really concerning.  I&#39;d say at least 50% of community cookbooks utilize cloned resources.  In fact, in a world of library cookbooks, it&#39;s almost impossible NOT to have them."}], "owner": {"reputation": 11072, "user_id": 2785428, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/ef82n.jpg?s=128&g=1", "display_name": "Mohamed El Mahallawy", "link": "https://stackoverflow.com/users/2785428/mohamed-el-mahallawy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 92, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1422426581, "creation_date": 1422426581, "question_id": 28186032, "link": "https://stackoverflow.com/questions/28186032/chef-ruby-warn-output", "title": "chef ruby warn output", "body": "<p>I am getting all of a sudden this unusual warning. No idea what it means and what to do about it:</p>\n\n<pre><code>[2015-01-28T01:15:41-05:00] WARN: Cloning resource attributes for package[zlib1g-dev] from prior resource (CHEF-3694)\n[2015-01-28T01:15:41-05:00] WARN: Previous apt_package[zlib1g-dev]: /root/chef-solo/cookbooks-2/rvm/providers/ruby.rb:174:in `block in install_ruby_dependencies'\n[2015-01-28T01:15:41-05:00] WARN: Current  apt_package[zlib1g-dev]: /root/chef-solo/cookbooks-2/rvm/providers/ruby.rb:174:in `block in install_ruby_dependencies'\n        * apt_package[zlib1g-dev] action install (up to date)\n[2015-01-28T01:15:41-05:00] WARN: Cloning resource attributes for package[libssl-dev] from prior resource (CHEF-3694)\n[2015-01-28T01:15:41-05:00] WARN: Previous apt_package[libssl-dev]: /root/chef-solo/cookbooks-2/rvm/providers/ruby.rb:174:in `block in install_ruby_dependencies'\n[2015-01-28T01:15:41-05:00] WARN: Current  apt_package[libssl-dev]: /root/chef-solo/cookbooks-2/rvm/providers/ruby.rb:174:in `block in install_ruby_dependencies'\n        * apt_package[libssl-dev] action install (up to date)\n[2015-01-28T01:15:41-05:00] WARN: Cloning resource attributes for package[libyaml-dev] from prior resource (CHEF-3694)\n[2015-01-28T01:15:41-05:00] WARN: Previous apt_package[libyaml-dev]: /root/chef-solo/cookbooks-2/rvm/providers/ruby.rb:174:in `block in install_ruby_dependencies'\n[2015-01-28T01:15:41-05:00] WARN: Current  apt_package[libyaml-dev]: /root/chef-solo/cookbooks-2/rvm/providers/ruby.rb:174:in `block in install_ruby_dependencies'\n        * apt_package[libyaml-dev] action install (up to date)\n</code></pre>\n\n<p>This never happened until I moved to ruby 2.2.0 locally. But this is happening on the server and I am not sure why. Any ideas?</p>\n"}, {"tags": ["ruby", "arrays", "count"], "comments": [{"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 1, "creation_date": 1422428662, "post_id": 28185580, "comment_id": 44741436, "body": "You changed the question, so all answers apart of yours became invalid...?"}], "answers": [{"tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": false, "score": 5, "last_activity_date": 1422424702, "creation_date": 1422424702, "answer_id": 28185638, "question_id": 28185580, "link": "https://stackoverflow.com/questions/28185580/how-to-check-the-number-of-occurrence-of-an-element-in-a-ruby-array/28185638#28185638", "title": "How to check the number of occurrence of an element in a ruby array", "body": "<pre><code>a = [1,2,3,2,4,5,2]    \np a.inject(Hash.new(0)) { |memo, i| memo[i] += 1; memo }\n# =&gt; {1=&gt;1, 2=&gt;3, 3=&gt;1, 4=&gt;1, 5=&gt;1}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422429851, "post_id": 28185643, "comment_id": 44741966, "body": "Perhaps use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-each_with_object\" rel=\"nofollow noreferrer\">Enumerable#each_with_object</a> to avoid the need to return <code>memo</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422437222, "post_id": 28185643, "comment_id": 44745410, "body": "@CarySwoveland yes, but this is definitely a task for <code>reduce</code>. So I decided to be more clear at the expense of shortness."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1422424713, "creation_date": 1422424713, "answer_id": 28185643, "question_id": 28185580, "link": "https://stackoverflow.com/questions/28185580/how-to-check-the-number-of-occurrence-of-an-element-in-a-ruby-array/28185643#28185643", "title": "How to check the number of occurrence of an element in a ruby array", "body": "<p>That\u2019s a typical <code>reduce</code> task:</p>\n\n<pre><code>a = [1,2,3,2,4,5,2]\na.inject({}) { |memo,e| \n  memo[e] ||= 0\n  memo[e] += 1\n  memo \n}\n#=&gt; {\n#  1 =&gt; 1,\n#  2 =&gt; 3,\n#  3 =&gt; 1,\n#  4 =&gt; 1,\n#  5 =&gt; 1\n#}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": true, "score": 5, "last_activity_date": 1422424798, "creation_date": 1422424798, "answer_id": 28185659, "question_id": 28185580, "link": "https://stackoverflow.com/questions/28185580/how-to-check-the-number-of-occurrence-of-an-element-in-a-ruby-array/28185659#28185659", "title": "How to check the number of occurrence of an element in a ruby array", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-reduce\" rel=\"noreferrer\">enum#reduce</a></p>\n\n<pre><code>[1,2,3,2,4,5,2].reduce Hash.new(0) do |hash, num|\n  hash[num] += 1\n  hash\nend\n</code></pre>\n\n<p>Output</p>\n\n<pre><code>{1=&gt;1, 2=&gt;3, 3=&gt;1, 4=&gt;1, 5=&gt;1}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1422426309, "post_id": 28185783, "comment_id": 44740508, "body": "hm, never heard about <code>itself</code>, I get <code>undefined method &#39;itself&#39; for 1:Fixnum</code> with Ruby 2.1"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 1, "creation_date": 1422426816, "post_id": 28185783, "comment_id": 44740701, "body": "@RustamA.Gasanov, that&#39;s because you&#39;re not using the latest and greatest. <a href=\"http://ruby-doc.org/core-2.2.0/Object.html#method-i-itself\" rel=\"nofollow noreferrer\">Object#itself</a>, which has been in the works for some time, has finally arrived in v.2.2! Hurray!"}, {"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422427001, "post_id": 28185783, "comment_id": 44740776, "body": "@CarySwoveland ah, you meant 2.2, I see:) thank you, I should take a look"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 4, "last_activity_date": 1422457584, "last_edit_date": 1422457584, "creation_date": 1422425391, "answer_id": 28185783, "question_id": 28185580, "link": "https://stackoverflow.com/questions/28185580/how-to-check-the-number-of-occurrence-of-an-element-in-a-ruby-array/28185783#28185783", "title": "How to check the number of occurrence of an element in a ruby array", "body": "<blockquote>\n  <p>Requires <code>ruby &gt;= 2.2</code></p>\n</blockquote>\n\n<pre><code>a.group_by(&amp;:itself).tap{|h| h.each{|k, v| h[k] = v.length}}\n# =&gt; {1=&gt;1, 2=&gt;3, 3=&gt;1, 4=&gt;1, 5=&gt;1}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422429435, "post_id": 28186217, "comment_id": 44741787, "body": "I didn&#39;t know you could dispense with the braces there.  <code>h.update n =&gt; h[n]+1</code> looks even stranger."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422431303, "post_id": 28186217, "comment_id": 44742524, "body": "@CarySwoveland : Where would you add braces? <code>Hash#update</code> returns self, that avoids the need to return the memo."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422431758, "post_id": 28186217, "comment_id": 44742717, "body": "Here: <code>{n =&gt; h[n]+1}</code>. I forgot that Ruby allows a hash to be passed as an argument <a href=\"https://books.google.ca/books?id=jcUbTcr5XWwC&amp;pg=PA189&amp;lpg=PA189&amp;dq=ruby+hash+argument+%22without+braces%22&amp;source=bl&amp;ots=fJCivc3zcz&amp;sig=VK_WdNZ1uc6dhaOPNQDH9VAdLSo&amp;hl=en&amp;sa=X&amp;ei=TZbIVPKeFozxoAS6wYH4Ag&amp;ved=0CB0Q6AEwAA#v=onepage&amp;q=ruby%20hash%20argument%20%22without%20braces%22&amp;f=false\" rel=\"nofollow noreferrer\">without the braces</a>."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1422427536, "creation_date": 1422427536, "answer_id": 28186217, "question_id": 28185580, "link": "https://stackoverflow.com/questions/28185580/how-to-check-the-number-of-occurrence-of-an-element-in-a-ruby-array/28186217#28186217", "title": "How to check the number of occurrence of an element in a ruby array", "body": "<p>I would do something like this:</p>\n\n<pre><code>[1,2,3,2,4,5,2].inject(Hash.new(0)) {|h, n| h.update(n =&gt; h[n]+1)}\n# =&gt; {1=&gt;1, 2=&gt;3, 3=&gt;1, 4=&gt;1, 5=&gt;1}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1001, "user_id": 1509291, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/okmBh.jpg?s=128&g=1", "display_name": "Andrei", "link": "https://stackoverflow.com/users/1509291/andrei"}, "is_accepted": false, "score": 1, "last_activity_date": 1577643153, "creation_date": 1577643153, "answer_id": 59522031, "question_id": 28185580, "link": "https://stackoverflow.com/questions/28185580/how-to-check-the-number-of-occurrence-of-an-element-in-a-ruby-array/59522031#59522031", "title": "How to check the number of occurrence of an element in a ruby array", "body": "<p>With Ruby >= 2.7 you can call <code>.tally</code>:</p>\n\n<pre><code>a = [1,2,3,2,4,5,2]\na.tally\n =&gt; {1=&gt;1, 2=&gt;3, 3=&gt;1, 4=&gt;1, 5=&gt;1}\n</code></pre>\n"}], "owner": {"reputation": 6470, "user_id": 1896986, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/qEG8G.jpg?s=128&g=1", "display_name": "Rajesh Omanakuttan", "link": "https://stackoverflow.com/users/1896986/rajesh-omanakuttan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 953, "favorite_count": 1, "accepted_answer_id": 28185659, "answer_count": 6, "score": 1, "last_activity_date": 1577643153, "creation_date": 1422424445, "last_edit_date": 1422429397, "question_id": 28185580, "link": "https://stackoverflow.com/questions/28185580/how-to-check-the-number-of-occurrence-of-an-element-in-a-ruby-array", "title": "How to check the number of occurrence of an element in a ruby array", "body": "<p>We have an array,</p>\n\n<pre><code>a = [1,2,3,2,4,5,2]\n</code></pre>\n\n<p>Now, I need to get the occurrence of each element in the ruby array one by one. So, here the ocuurrence of element '1' is 1 times. Occurrence of '2' is 3 times and so on.</p>\n\n<p>Edited and added the below line later as most of the answers were submitted misinterpreting my question:</p>\n\n<pre><code>That means, I need to take the occurrence of a single element at a time.\n</code></pre>\n\n<p>How I could get the count?</p>\n"}, {"tags": ["ruby", "postgresql"], "comments": [{"owner": {"reputation": 215643, "user_id": 50552, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/200c020bef60e4d9c4c4ba1c85442026?s=128&d=identicon&r=PG", "display_name": "Andomar", "link": "https://stackoverflow.com/users/50552/andomar"}, "edited": false, "score": 2, "creation_date": 1422426020, "post_id": 28185205, "comment_id": 44740414, "body": "Why not use <code>date &gt;= ?::date</code> and pass in <code>2011-10-01</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 48919, "user_id": 238814, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/4f93d624a8c2c7792b56547b662435de?s=128&d=identicon&r=PG", "display_name": "Daniel V&#233;rit&#233;", "link": "https://stackoverflow.com/users/238814/daniel-v%c3%a9rit%c3%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1422459491, "creation_date": 1422459491, "answer_id": 28196286, "question_id": 28185205, "link": "https://stackoverflow.com/questions/28185205/compare-date-to-month-year-in-postgres-ruby/28196286#28196286", "title": "Compare date to month-year in Postgres/Ruby", "body": "<p>This error: <code>column \"year_month\" does not exist</code> happens because <code>year_month</code> is an <strong>alias</strong> defined the SELECT-list and such aliases can't be refered to in the WHERE clause.</p>\n\n<p>This is based on the fact that the SELECT-list is evaluated after the WHERE clause, see for example: <a href=\"http://www.postgresql.org/message-id/48A3102C.8090403@wykids.org\" rel=\"nofollow\">Column alias in where clause?</a> for an explanation from PG developers.</p>\n\n<p>Some databases allow it nonetheless, others don't, and PostgreSQL doesn't. It's one of the many portability hazards between SQL engines.</p>\n\n<p>In the case of the query shown in the question, you don't even need the <code>to_char</code> in the WHERE clause anyway, because as mentioned in the first comment, a direct comparison with a date is simpler and more efficient too. </p>\n\n<p>When a query has a complex expression in the SELECT-list and repeating it in the WHERE clause looks wrong, sometimes it might be refactored to move the expression into a sub-select or a WITH clause at the beginning of the query.</p>\n"}], "owner": {"reputation": 399, "user_id": 2203829, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/e08f409219b7ececa2b30f17ce9e4e84?s=128&d=identicon&r=PG&f=1", "display_name": "alsoALion", "link": "https://stackoverflow.com/users/2203829/alsoalion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 783, "favorite_count": 0, "accepted_answer_id": 28196286, "answer_count": 1, "score": 1, "last_activity_date": 1422647981, "creation_date": 1422422685, "last_edit_date": 1422647981, "question_id": 28185205, "link": "https://stackoverflow.com/questions/28185205/compare-date-to-month-year-in-postgres-ruby", "title": "Compare date to month-year in Postgres/Ruby", "body": "<p>I have a date column in my table and I would like to 'filter'/select out items after a certain year-month. So if I have data from 2010 on, I have a user input that specifies '2011-10' as the 'earliest date' they want to see data from. </p>\n\n<p>My current SQL looks like this:</p>\n\n<pre><code>select round(sum(amount), 2) as amount,\ndate_part('month', date) as month\nfrom receipts join items\non receipts.item = items.item\nwhere items.expense = ?\n    and date_part('year', date)&gt;=2014\n    and funding = 'General'\ngroup by items.expense, month, items.order\norder by items.order desc;\n</code></pre>\n\n<p>In the second part of the 'where', instead of doing year >= 2014, I want to do something like <code>to_char(date, 'YY-MMMM') &gt;= ?</code> as another parameter and then pass in '2011-10'. However, when I do this:</p>\n\n<pre><code>costsSql = \"select round(sum(amount), 2) as amount,\nto_char(date, 'YY-MMMM') as year_month\nfrom receipts join items\non receipts.item = items.item\nwhere items.expense = ?\n    and year_month &gt;= ?\n    and funding = 'General'\ngroup by items.expense, year_month, items.order\norder by items.order desc\"\n</code></pre>\n\n<p>and call that with my two params, I get a postgres error: <code>PG::UndefinedColumn: ERROR:  column \"year_month\" does not exist</code>.</p>\n\n<p>Edit: I converted my YYYY-MM string into a date and passed that in as my param instead and it's working. But I still don't understand why I get the 'column does not exist' error after I created that column in the select clause - can someone explain? Can columns created like that not be used in where clauses?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "database-design"], "answers": [{"comments": [{"owner": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "edited": false, "score": 0, "creation_date": 1422463896, "post_id": 28186512, "comment_id": 44762117, "body": "I&#39;m having a hard time envisioning how some of these tables link to one another.  Could you please elaborate on the ties between <code>Song</code>, <code>Show</code>, <code>ShowSong</code>, and <code>Submission</code> a bit more please?"}, {"owner": {"reputation": 3199, "user_id": 1611683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/44576838a06da54b55272e8b7d662317?s=128&d=identicon&r=PG", "display_name": "pierallard", "link": "https://stackoverflow.com/users/1611683/pierallard"}, "reply_to_user": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "edited": false, "score": 0, "creation_date": 1422465358, "post_id": 28186512, "comment_id": 44763113, "body": "The link between theses classes are denoted in my description. Consider that when you have <code>X has_many Y</code>, then you must have <code>Y belongs_to X</code>. And If you have <code>Y belongs_to X</code>, standard Rails implies you have a <code>x_id</code> in the attributes of <code>Y</code>."}, {"owner": {"reputation": 3199, "user_id": 1611683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/44576838a06da54b55272e8b7d662317?s=128&d=identicon&r=PG", "display_name": "pierallard", "link": "https://stackoverflow.com/users/1611683/pierallard"}, "reply_to_user": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "edited": false, "score": 0, "creation_date": 1422465479, "post_id": 28186512, "comment_id": 44763187, "body": "I just read my description and correct an issue on the <code>Song</code> description. If you want more details, the <code>ShowSong</code> represents a class simulating an <code>has_and_belongs_to_many</code> relation (check some documentation about it)."}, {"owner": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "edited": false, "score": 0, "creation_date": 1422482114, "post_id": 28186512, "comment_id": 44772363, "body": "It&#39;s starting to become a bit more clear, but I&#39;m still having trouble visualizing how all of the tables link to one another.  Would it be possible for you to provide a rough schema diagram?"}, {"owner": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "edited": false, "score": 0, "creation_date": 1422483645, "post_id": 28186512, "comment_id": 44773085, "body": "To clarify on my question, how exactly does Rails handle the <code>has_and_belongs_to_many</code> relationships?  If I create a new <code>Show</code> then how exactly do I link up the <code>Songs</code>?  If a <code>Show</code> contains the <code>Shows</code> with <code>show_id</code> 1, 2, 4, and 5, how is that linked?  Does Rails automatically create a table that contains every <code>show_id</code> and <code>song_id</code> combination that is used for querying?"}, {"owner": {"reputation": 3199, "user_id": 1611683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/44576838a06da54b55272e8b7d662317?s=128&d=identicon&r=PG", "display_name": "pierallard", "link": "https://stackoverflow.com/users/1611683/pierallard"}, "reply_to_user": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "edited": false, "score": 0, "creation_date": 1422519897, "post_id": 28186512, "comment_id": 44784532, "body": "@AvocadoRivalry An <code>X has_and_belongs_to_many Y</code> relation creates a table with <code>x_id</code> and <code>y_id</code>, but don&#39;t generates any model. Sometimes, you have to replace this <code>has_and_belongs_to_many</code> relation by a model <code>Z</code>, where <code>Z belongs_to X</code> and <code>Z belongs_to Y</code>. The table is the same (with an <code>id</code> attribute and with an other name), but you can add new attributes to it and add specific methods. For your schema diagram, it&#39;s super simple, just read the <code>belongs_to</code> (1--n) and the <code>have_many</code> (n--1) relations."}, {"owner": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "edited": false, "score": 0, "creation_date": 1422584334, "post_id": 28186512, "comment_id": 44819444, "body": "Thanks @ForgetTheNorm - I went ahead and used a <code>has_many...through</code> which worked wonderfully.  Thanks for helping me through this!"}], "tags": [], "owner": {"reputation": 3199, "user_id": 1611683, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/44576838a06da54b55272e8b7d662317?s=128&d=identicon&r=PG", "display_name": "pierallard", "link": "https://stackoverflow.com/users/1611683/pierallard"}, "is_accepted": true, "score": 1, "last_activity_date": 1422465385, "last_edit_date": 1422465385, "creation_date": 1422428875, "answer_id": 28186512, "question_id": 28185172, "link": "https://stackoverflow.com/questions/28185172/model-association-design-for-new-rails-application/28186512#28186512", "title": "Model/Association Design For New Rails Application", "body": "<p>For the first steps, design your application like the real life. When you have more experience, you can drop some models, simulate others for some optimization.</p>\n\n<p>In real life, how to design a show ? It's a band playing songs. How to design a band ? It's a set of people (not used here) having songs. How to design a submission ? It's a user thinking a song is played at a time.</p>\n\n<p>Then, you can have theses models :</p>\n\n<pre><code>User (name...)\nSong (name, band_id) : belongs_to a band and have many show_songs\nBand (name) : has_many songs and has_many shows\nShow (band_id) : belongs_to band\nShowSong (show_id, song_id, datetime) : belongs_to show and song\nSubmission (user_id, song_id, show_song_id) : belongs_to song and show_song\n</code></pre>\n\n<p>It's not a unique solution, you can design what you want.</p>\n\n<p>I design theses models from some Rails practices:</p>\n\n<ul>\n<li>Don't use date_of_show as a key, use an _id (that's why I insert show_song)</li>\n<li>It's <em>necessary</em> to have a model when model have specific methods or must be registered in database</li>\n<li>don't use guess_1, guess_2, ... Use an have_many guesses</li>\n</ul>\n"}], "owner": {"reputation": 401, "user_id": 3233838, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8a5d9a23641727266f169f25e1d03b76?s=128&d=identicon&r=PG&f=1", "display_name": "AvocadoRivalry", "link": "https://stackoverflow.com/users/3233838/avocadorivalry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 28186512, "answer_count": 1, "score": 0, "last_activity_date": 1422465385, "creation_date": 1422422509, "question_id": 28185172, "link": "https://stackoverflow.com/questions/28185172/model-association-design-for-new-rails-application", "title": "Model/Association Design For New Rails Application", "body": "<p>I'm about to start building an application in Rails (just started learning Rails, so figured this would be a good, basic exercise) and wanted to solicit some feedback on how to architect my models and associations.  The application is designed to host a \"game\" in which users guess what songs they think will be played at a given concert each show the band plays.  So far, I have the following models (with approximate attributes):</p>\n\n<ul>\n<li><code>User</code>: keep track of active users (<code>user_name</code>, <code>user_password</code>, <code>user_email</code>, etc.)</li>\n<li><code>Submission</code>: keep track of a given user's guess for a given show (<code>date_of_show</code>, <code>guess_1</code>, <code>guess_2</code>, <code>guess_3</code>, <code>user_id</code>)</li>\n<li><code>Show</code>: keep track of each show the band plays (<code>date_of_show</code>, <code>songs_played</code>)</li>\n<li><code>Song</code>: keep track of band's current catalog (<code>song_name</code>)</li>\n</ul>\n\n<p>The relationship between <code>User</code> and <code>Submission</code> is pretty straightforward:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :submissions\nend\n\nclass Submission &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p>When it comes to the relationships between the other pieces though, things become a bit more unclear, so I have the following questions:</p>\n\n<ul>\n<li>Each <code>Submission</code> corresponds to one <code>Show</code>.  Does it make sense to say that each <code>Submission</code> <code>belongs_to</code> a <code>Show</code> and each <code>Show</code> <code>has_many</code> <code>Submissions</code> using <code>date_of_show</code> as the key?</li>\n<li>Is it necessary to have a <code>Song</code> model at all?  In the initial version of the application, it will simply be used as a list to validate guesses (i.e.; populate a <code>select</code> drop down).  </li>\n<li>If I should keep the <code>Song</code> model, how do I associate that with the other models?  A <code>User</code> doesn't have a song, so that one's easy, but each <code>Submission</code> has three <code>Songs</code> and each <code>Show</code> can have a varying number of <code>Songs</code>.</li>\n<li>On the point of each <code>Show</code> having a varying number of <code>Songs</code>, is the best way to approach this to store them in an array, ala this post (<a href=\"http://amberonrails.com/storing-arrays-in-a-database-field-w-rails-activerecord/\" rel=\"nofollow\">http://amberonrails.com/storing-arrays-in-a-database-field-w-rails-activerecord/</a>) or is there a better way?  Ultimately, I will need to implement some method that loops through each <code>Submission</code>, check <code>guess_1</code>, <code>guess_2</code>, and <code>guess_3</code> against the <code>songs_played</code> array (or whatever other alternative I use) in the <code>Show</code> model, and produce a score.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "carrierwave", "jbuilder"], "comments": [{"owner": {"reputation": 586, "user_id": 1333910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d55cb561eb26f7151b94c3f5e86cd?s=128&d=identicon&r=PG", "display_name": "bonebroth", "link": "https://stackoverflow.com/users/1333910/bonebroth"}, "edited": false, "score": 0, "creation_date": 1423871092, "post_id": 28184975, "comment_id": 45340218, "body": "Can you share the jbuilder template?"}, {"owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "reply_to_user": {"reputation": 586, "user_id": 1333910, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9a3d55cb561eb26f7151b94c3f5e86cd?s=128&d=identicon&r=PG", "display_name": "bonebroth", "link": "https://stackoverflow.com/users/1333910/bonebroth"}, "edited": false, "score": 0, "creation_date": 1423982407, "post_id": 28184975, "comment_id": 45363714, "body": "Yep! just added it. @JorgeMarques"}], "answers": [{"comments": [{"owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "edited": false, "score": 0, "creation_date": 1424191142, "post_id": 28525175, "comment_id": 45443011, "body": "Awesome, thanks! I ended up iterating over the photos and calling current_path on the url, but this helped me figure out to do that."}], "tags": [], "owner": {"reputation": 156, "user_id": 3445608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de4239680f98b8f92272d3f9828d602c?s=128&d=identicon&r=PG&f=1", "display_name": "jerrytao", "link": "https://stackoverflow.com/users/3445608/jerrytao"}, "is_accepted": false, "score": 1, "last_activity_date": 1423997398, "last_edit_date": 1423997398, "creation_date": 1423996401, "answer_id": 28525175, "question_id": 28184975, "link": "https://stackoverflow.com/questions/28184975/carrierwave-causing-json-output-to-become-nested-on-photo-key/28525175#28525175", "title": "CarrierWave causing json output to become nested on photo key", "body": "<p>When you do something like <code>mount_uploader</code>. CarrierWave will override the read column method and replace it with return an object of your uploader.  </p>\n\n<p>So when you try to call url on photo it return you an uploader with url method so it will keep calling url, and get the url value. So there are three url in your json.</p>\n\n<p>But you can still use <code>url_url</code> methods get the origin value.</p>\n\n<p>So if you just want to get the specific url, just do like this will be OK.</p>\n\n<pre><code> json.photos exercise.photos, :id, :url_url, :order #url_url is the url column value.\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "edited": false, "score": 0, "creation_date": 1424191609, "post_id": 28542216, "comment_id": 45443305, "body": "Thanks! This was really helpful. Can you explain is going on in that method?"}, {"owner": {"reputation": 813, "user_id": 1961154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6b9daa60a6856519080acddfd5f254?s=128&d=identicon&r=PG", "display_name": "intale", "link": "https://stackoverflow.com/users/1961154/intale"}, "reply_to_user": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "edited": false, "score": 0, "creation_date": 1424192495, "post_id": 28542216, "comment_id": 45443865, "body": "Sure. The :model method points to the current instance of your AR model, where you did :mount_uploader . And since the :url method is overriden by CarrierWave, need to use :read_attribute method to get the value of :url attribute of your instance of AR model.  To see hole picture, you may check original whole here <a href=\"https://github.com/carrierwaveuploader/carrierwave/blob/master/lib/carrierwave/uploader/serialization.rb\" rel=\"nofollow noreferrer\">github.com/carrierwaveuploader/carrierwave/blob/master/lib/&hellip;</a>"}, {"owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "edited": false, "score": 0, "creation_date": 1424204176, "post_id": 28542216, "comment_id": 45450485, "body": "That&#39;s awesome. Thanks!"}], "tags": [], "owner": {"reputation": 813, "user_id": 1961154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/af6b9daa60a6856519080acddfd5f254?s=128&d=identicon&r=PG", "display_name": "intale", "link": "https://stackoverflow.com/users/1961154/intale"}, "is_accepted": true, "score": 2, "last_activity_date": 1424177517, "last_edit_date": 1424177517, "creation_date": 1424092374, "answer_id": 28542216, "question_id": 28184975, "link": "https://stackoverflow.com/questions/28184975/carrierwave-causing-json-output-to-become-nested-on-photo-key/28542216#28542216", "title": "CarrierWave causing json output to become nested on photo key", "body": "<p>@Arel, if you need to keep same json hash structure, just override :serializable_hash method in your uploader class:</p>\n\n<pre><code>class PhotoUploader &lt; CarrierWave::Uploader::Base\n  def serializable_hash\n    model.read_attribute :url\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 3410, "user_id": 1144120, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/263cde71709be665db6ce1d2c0d8e532?s=128&d=identicon&r=PG", "display_name": "Arel", "link": "https://stackoverflow.com/users/1144120/arel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1349, "favorite_count": 0, "accepted_answer_id": 28542216, "answer_count": 2, "score": 1, "last_activity_date": 1424177517, "creation_date": 1422421373, "last_edit_date": 1423982386, "question_id": 28184975, "link": "https://stackoverflow.com/questions/28184975/carrierwave-causing-json-output-to-become-nested-on-photo-key", "title": "CarrierWave causing json output to become nested on photo key", "body": "<p>I have a weird issue with CarrierWave that I can't find anywhere else. </p>\n\n<p>I'm using Jbuilder to generate the JSON for my API. I have a photos table and a url field on the table. </p>\n\n<p>Without <code>mount_uploader :url PhotoUploader</code> on the photos model, my JSON looks like this:</p>\n\n<pre><code>\"photos\": [\n            {\n              \"id\": 11,\n              \"url\": \"https://s3.amazonaws.com/...\",\n              \"order\": 1\n            },\n            {\n              \"id\": 12,\n              \"url\": \"https://s3.amazonaws.com/...\",\n              \"order\": 2\n            }\n          ]\n</code></pre>\n\n<p>But when I add the uploader, my JSON ends up looking like this:</p>\n\n<pre><code>\"photos\": [\n            {\n              \"id\": 3,\n                \"url\": {\n                  \"url\": {\n                    \"url\": \"https://bucket-name.s3.amazonaws.com/uploads/photos/https%3A//s3.amazonaws.com/bucket-name/uploads/folder/photos/img-name.jpg\"\n                   }\n                },\n                \"order\": 2\n                },\n                  {\n                    \"id\": 2,\n                      \"url\": {\n                        \"url\": {\n                          \"url\": \"https://bucket-name.s3.amazonaws.com/uploads/photos/https%3A//s3.amazonaws.com/bucket-name/uploads/folder/photos/img-name.jpg\"\n                        }\n                      },\n                      \"order\": 1\n                  }\n              ],\n</code></pre>\n\n<p>Everything works fine, but the JSON is just so messy looking, and a pain to iterate over. Also, can anyone explain why the URL is so weird looking, repeating itself twice? </p>\n\n<p>Jbuilder code:</p>\n\n<pre><code>json.exercises current_user.current_training_week.exercises.uniq do |exercise|\n  json.id exercise.id\n  json.name exercise.name \n  json.description exercise.description\n  json.photos exercise.photos, :id, :url, :order\n  json.videos exercise.videos, :id, :url\nend\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1422420831, "post_id": 28184825, "comment_id": 44738665, "body": "What is the type of the &quot;score&quot; field?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1422422151, "post_id": 28184825, "comment_id": 44739064, "body": "It could be <code>@landingpage = LandingPage.find(params[:id])</code> and <code>@some_object = @landingpage.page_leades.order(score: :desc)</code>."}, {"owner": {"reputation": 643, "user_id": 2148560, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/104ea27c9f86094417685ce999daa2ea?s=128&d=identicon&r=PG", "display_name": "Sanjiv", "link": "https://stackoverflow.com/users/2148560/sanjiv"}, "edited": false, "score": 0, "creation_date": 1422427381, "post_id": 28184825, "comment_id": 44740923, "body": "what get passed to &quot;id&quot; params?"}], "answers": [{"comments": [{"owner": {"reputation": 729, "user_id": 1113875, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1fd324dc88c50366a49f0510f7c30c76?s=128&d=identicon&r=PG", "display_name": "Scott S.", "link": "https://stackoverflow.com/users/1113875/scott-s"}, "edited": false, "score": 0, "creation_date": 1422421726, "post_id": 28184933, "comment_id": 44738924, "body": "It&#39;s actually returning a list of all of the page_leads associated to that landing page. I need to sort it so the page_leads with the highest score are at the top."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 729, "user_id": 1113875, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1fd324dc88c50366a49f0510f7c30c76?s=128&d=identicon&r=PG", "display_name": "Scott S.", "link": "https://stackoverflow.com/users/1113875/scott-s"}, "edited": false, "score": 0, "creation_date": 1422422047, "post_id": 28184933, "comment_id": 44739032, "body": "@ScottS. Did you override ActiveRecord&#39;s <code>find</code> method? Please double check, because if zou did not than <code>LandingPage.find(params[:id])</code> will return a single LandingPage and not a list of PageLeads. There is nothing in your show method that comes even close to PageLeads."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1422421152, "creation_date": 1422421152, "answer_id": 28184933, "question_id": 28184825, "link": "https://stackoverflow.com/questions/28184825/undefined-method-order-for-1string/28184933#28184933", "title": "undefined method `order&#39; for &quot;1&quot;:String", "body": "<p>It is just:</p>\n\n<pre><code>def show\n  @landingpage = LandingPage.find(params[:id])\nend\n</code></pre>\n\n<p>Cause <code>find</code> returns the LandingPage with <code>id == params[:id]</code>. No need to sort a single item.</p>\n"}, {"comments": [{"owner": {"reputation": 729, "user_id": 1113875, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1fd324dc88c50366a49f0510f7c30c76?s=128&d=identicon&r=PG", "display_name": "Scott S.", "link": "https://stackoverflow.com/users/1113875/scott-s"}, "edited": false, "score": 0, "creation_date": 1422483227, "post_id": 28185106, "comment_id": 44772902, "body": "Actually I do want the page to show the list of the page_leads so @landingpage = LandingPage.where(id: params[:id]).order(score: :desc) would make sense. However, when I do that I get an error on my &quot;Show&quot; page. I&#39;ve added that code above. The error is: NoMethodError in LandingPages#show with undefined method `page_leads&#39;. I&#39;m very confused."}], "tags": [], "owner": {"reputation": 4088, "user_id": 31325, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/e3a81c8d6a57cfefb13d66e248792eba?s=128&d=identicon&r=PG", "display_name": "baash05", "link": "https://stackoverflow.com/users/31325/baash05"}, "is_accepted": false, "score": 0, "last_activity_date": 1422422098, "creation_date": 1422422098, "answer_id": 28185106, "question_id": 28184825, "link": "https://stackoverflow.com/questions/28184825/undefined-method-order-for-1string/28185106#28185106", "title": "undefined method `order&#39; for &quot;1&quot;:String", "body": "<p>find returns an array or records if the params[:id] is an array.. the order can't be applied to the array, because order isn't part of the array class. </p>\n\n<p>If params[:id] is a single element then the find returns the record.  Again order doesn't apply, because it's just one record not a container of records.. </p>\n\n<p>If you want an sorted list then use \n   LandingPage.where(id: params[:id]).order</p>\n\n<p>But since this is in the show I suspect you want the single item... As spickermann said drop the order</p>\n\n<pre><code> LandingPage.find(params[:id])   \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 729, "user_id": 1113875, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1fd324dc88c50366a49f0510f7c30c76?s=128&d=identicon&r=PG", "display_name": "Scott S.", "link": "https://stackoverflow.com/users/1113875/scott-s"}, "edited": false, "score": 0, "creation_date": 1422482672, "post_id": 28185134, "comment_id": 44772664, "body": "I tried the above and it&#39;s still not sorting the page_leads."}, {"owner": {"reputation": 646, "user_id": 4014005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MH_8tviU2Xg/AAAAAAAAAAI/AAAAAAAAAbk/7SM8Voh8ES0/photo.jpg?sz=128", "display_name": "Daniel Ma", "link": "https://stackoverflow.com/users/4014005/daniel-ma"}, "reply_to_user": {"reputation": 729, "user_id": 1113875, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1fd324dc88c50366a49f0510f7c30c76?s=128&d=identicon&r=PG", "display_name": "Scott S.", "link": "https://stackoverflow.com/users/1113875/scott-s"}, "edited": false, "score": 0, "creation_date": 1422519136, "post_id": 28185134, "comment_id": 44784193, "body": "@ScottS. <code>@landingpage.page_leads</code> will not be sorted, only <code>@page_leads</code>. Make sure you use that"}], "tags": [], "owner": {"reputation": 646, "user_id": 4014005, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-MH_8tviU2Xg/AAAAAAAAAAI/AAAAAAAAAbk/7SM8Voh8ES0/photo.jpg?sz=128", "display_name": "Daniel Ma", "link": "https://stackoverflow.com/users/4014005/daniel-ma"}, "is_accepted": false, "score": 0, "last_activity_date": 1422422255, "creation_date": 1422422255, "answer_id": 28185134, "question_id": 28184825, "link": "https://stackoverflow.com/questions/28184825/undefined-method-order-for-1string/28185134#28185134", "title": "undefined method `order&#39; for &quot;1&quot;:String", "body": "<p>If you want to sort Page Leads, you would do something like</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def show\n    @landingpage = LandingPage.find(params[:id])\n    @page_leads = @landingpage.page_leads.order(score: :desc)\nend\n</code></pre>\n\n<p>As @spickermann mentioned, <code>.find()</code> only returns one model instance. You can't order this using ActiveRecord query methods.</p>\n\n<p>If you want to order the page leads, you have to call <code>.order</code> on the set of page_leads that belong to the landing page</p>\n"}], "owner": {"reputation": 729, "user_id": 1113875, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/1fd324dc88c50366a49f0510f7c30c76?s=128&d=identicon&r=PG", "display_name": "Scott S.", "link": "https://stackoverflow.com/users/1113875/scott-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 597, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1422483074, "creation_date": 1422420537, "last_edit_date": 1422483074, "question_id": 28184825, "link": "https://stackoverflow.com/questions/28184825/undefined-method-order-for-1string", "title": "undefined method `order&#39; for &quot;1&quot;:String", "body": "<p>On my landing_pages \"show\" page, I'm trying to show the leads that came in via that page and sort them via their \"score\".</p>\n\n<p>My landing_page model has:</p>\n\n<pre><code>has_many :page_leads\n</code></pre>\n\n<p>My page_lead model has:</p>\n\n<pre><code>belongs_to :landing_page\n</code></pre>\n\n<p>In my index method within my page_leads controller, I have this, which works:</p>\n\n<pre><code>def index\n    @page_leads = PageLead.order(score: :desc)\nend\n</code></pre>\n\n<p>I try to duplicate this in the landing_pages controller for the show method. Here is what I have:</p>\n\n<pre><code>def show\n    @landingpage = LandingPage.find(params[:id]).order(score: :desc)\nend\n</code></pre>\n\n<p>When I try to go to the \"Show\" page, I get an error \"undefined method `order' for \"1\":String\". How can I get this to work?</p>\n\n<p>My show page has the following code:</p>\n\n<pre><code>&lt;tbody&gt;\n    &lt;% @landingpage.page_leads.each do |page_lead| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= page_lead.fname %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= page_lead.lname %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= page_lead.score %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n</code></pre>\n"}, {"tags": ["c#", "php", "ruby", "encryption"], "comments": [{"owner": {"reputation": 105321, "user_id": 14357, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SfY0b.png?s=128&g=1", "display_name": "spender", "link": "https://stackoverflow.com/users/14357/spender"}, "edited": false, "score": 2, "creation_date": 1422419840, "post_id": 28184660, "comment_id": 44738394, "body": "Hashing isn&#39;t encryption."}, {"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1422422917, "post_id": 28184660, "comment_id": 44739318, "body": "Can you provide a set of matching results that were generated using the <code>C#</code> code?"}], "owner": {"reputation": 353, "user_id": 1363134, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/fe32c36e8db442d15f545085034e505d?s=128&d=identicon&r=PG", "display_name": "Dhanesh Neela Mana", "link": "https://stackoverflow.com/users/1363134/dhanesh-neela-mana"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1422422369, "creation_date": 1422419528, "last_edit_date": 1495535188, "question_id": 28184660, "link": "https://stackoverflow.com/questions/28184660/c-mactripledes-in-ruby", "title": "c# MACTripleDES in ruby", "body": "<p>I have some data that is encrypted using MACTripleDES in c#, and I need to replicate the same encryption and possibly decryption in ruby. I see there is way in php to do this. <a href=\"https://stackoverflow.com/questions/10533604/mactripledes-in-php\">see this question</a>, I wonder if there any way I can do the same in ruby. So far I have tried all the des ciphers in openssl, but the results are not matching up. Below is my code snippet in ruby.</p>\n\n<pre><code>['des','des-cbc',\n'des-cfb', 'des-ecb', 'des-ede', 'des-ede-cbc', 'des-ede-cfb',\n'des-ede-ofb'  ,  'des-ede3'     ,  'des-ede3-cbc'  , 'des-ede3-cfb'  , 'des-ede3-ofb','des-ofb'   ,     'des3'    ,       'desx'  ].each do |alg|\n    des = OpenSSL::Cipher::Cipher.new(alg)\n    des.encrypt\n    des.padding = 1\n    des.key = secret_key\n    update_value = des.update(data)\n    up_final = update_value + des.final\n    puts up_final\n    puts Base64.encode64(up_final).gsub(/\\n/, \"\")\nend\n</code></pre>\n\n<p>And here is c# code snippet,</p>\n\n<pre><code>System.Security.Cryptography.MACTripleDES mac3des = new System.Security.Cryptography.MACTripleDES();\nmac3des.Key = my_secret_key; \nmac3des.ComputeHash(System.Text.Encoding.UTF8.GetBytes(value));\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 53706, "user_id": 3001736, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j4wN2.jpg?s=128&g=1", "display_name": "Amit Joki", "link": "https://stackoverflow.com/users/3001736/amit-joki"}, "reply_to_user": {"reputation": 25, "user_id": 1017999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6d79dec8c675b26e633ab323a1eac0f?s=128&d=identicon&r=PG", "display_name": "Sur123", "link": "https://stackoverflow.com/users/1017999/sur123"}, "edited": false, "score": 0, "creation_date": 1422424858, "post_id": 28184412, "comment_id": 44739988, "body": "@Sur123 glad to have helped :)"}], "tags": [], "owner": {"reputation": 53706, "user_id": 3001736, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/j4wN2.jpg?s=128&g=1", "display_name": "Amit Joki", "link": "https://stackoverflow.com/users/3001736/amit-joki"}, "is_accepted": true, "score": 1, "last_activity_date": 1422417696, "creation_date": 1422417696, "answer_id": 28184412, "question_id": 28184364, "link": "https://stackoverflow.com/questions/28184364/passing-command-line-args-in-ruby-and-runtime-args-through-gets/28184412#28184412", "title": "passing command line args in ruby and runtime args through gets", "body": "<p>You need to specifically state that you need the input from the input device, as opposed to command line arguments <code>ARGV</code>, and since <code>gets</code> is generic, you've to be specific in this case to avoid confusions or misinterpretation.</p>\n\n<p>So, replace all <code>gets</code> with <code>$stdin.gets</code> or <code>STDIN.gets</code>, which gets the input from the standard input.</p>\n"}], "owner": {"reputation": 25, "user_id": 1017999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c6d79dec8c675b26e633ab323a1eac0f?s=128&d=identicon&r=PG", "display_name": "Sur123", "link": "https://stackoverflow.com/users/1017999/sur123"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 28184412, "answer_count": 1, "score": 0, "last_activity_date": 1422417696, "creation_date": 1422417327, "question_id": 28184364, "link": "https://stackoverflow.com/questions/28184364/passing-command-line-args-in-ruby-and-runtime-args-through-gets", "title": "passing command line args in ruby and runtime args through gets", "body": "<p>I wrote a code in ruby which basically takes 3 commandline args followed by userinput from the keyboard. The problem is when i am executing the code without command line, it is able to read userinput but with command line it is throwing error `gets': No such file or directory - 3024 (Errno::ENOENT)\nDont understand why</p>\n\n<pre><code>class Matching\n  attr_reader :sys_count\n  def initialize()\n    @sys_count = gets\n    throw \"Bad count\" unless @sys_count.to_i &gt; 0\n  end\n  def get_match\n    count = @sys_count\n    return nil unless count\n    ret = count\n\n    count.to_i.times do\n      ret += gets\n    end\n    ((count.to_i * (count.to_i - 1))/2).times do\n      while true do\n        line = gets\n        ret += line\n        break if line == \"\\n\"\n      end\n    end\n\n    ret\n  end\n\n  def packet\n    str = get_match\n    return nil unless str\n    \"matched 0\\njava\\n\" + str\n  end\nend\nCONN=ARGV[0]\nCONFIG=ARGV[1]\nOUT_BASE=ARGV[2]\nobj=Matching.new()\nout=obj.packet\nprint out\n</code></pre>\n\n<p>Is there any workaround to make it work\n~                   </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "ruby-on-rails-4", "recaptcha"], "comments": [{"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1422598497, "post_id": 28184319, "comment_id": 44822957, "body": "Are you using a gem or hand rolling this? I found this and it seems pretty well maintained: <a href=\"https://github.com/ambethia/recaptcha\" rel=\"nofollow noreferrer\">github.com/ambethia/recaptcha</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "reply_to_user": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1422598732, "post_id": 28184319, "comment_id": 44823050, "body": "I was intending to hand roll it, because people have said it&#39;s supposed to be pretty simple, but I can&#39;t find any examples. Does that gem work with the new recaptcha? I mean the one where all you have to do is check the box?"}, {"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1422598935, "post_id": 28184319, "comment_id": 44823116, "body": "Yep, but the documentation isn&#39;t updated. See this issue: <a href=\"https://github.com/ambethia/recaptcha/issues/112\" rel=\"nofollow noreferrer\">github.com/ambethia/recaptcha/issues/112</a> and this pull request for the relevant code: <a href=\"https://github.com/ambethia/recaptcha/pull/115\" rel=\"nofollow noreferrer\">github.com/ambethia/recaptcha/pull/115</a>. Just set the initializer for v2. Looks like several people are using it."}, {"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1422903443, "post_id": 28184319, "comment_id": 44923457, "body": "Ken, I noticed you added the hand rolled portion of your post after I added my answer. Is there any reason you prefer it hand rolled?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "reply_to_user": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1422906854, "post_id": 28184319, "comment_id": 44925283, "body": "@SunnyJuneja I&#39;ve just had a lot of issues in the past with getting gems/plugins to work. I like it better when I can see everything that&#39;s making the code do what it does. But I don&#39;t have internet access on my programming computer right now; when I do, I&#39;ll try all the answers, including the gems, and hopefully one of them works."}, {"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "edited": false, "score": 0, "creation_date": 1519640445, "post_id": 28184319, "comment_id": 84976641, "body": "Follow the simeple steps <a href=\"https://vidurpunj.wordpress.com/2018/01/\" rel=\"nofollow noreferrer\">vidurpunj.wordpress.com/2018/01</a>"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "edited": false, "score": 0, "creation_date": 1422651335, "post_id": 28242368, "comment_id": 44849578, "body": "So the simple code <code>&lt;%= recaptcha_tags %&gt;</code> renders the checkbox?"}, {"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1422651838, "post_id": 28242368, "comment_id": 44849787, "body": "Yes. Then verify_recaptcha in your controller makes sure it was filled out correctly."}, {"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1422652078, "post_id": 28242368, "comment_id": 44849906, "body": "You add it to the initializer. First, you tell Rails where to look (<a href=\"https://github.com/whatasunnyday/recaptcha_example/commit/9253fb1083ae0208ec7299a21481fba9e8dfe951\" rel=\"nofollow noreferrer\">github.com/whatasunnyday/recaptcha_example/commit/&hellip;</a>) and then you can get it from Rails doing this (<a href=\"https://github.com/whatasunnyday/recaptcha_example/commit/6daf4682709e4a6720220e13283d486f80727ddb\" rel=\"nofollow noreferrer\">github.com/whatasunnyday/recaptcha_example/commit/&hellip;</a>). There&#39;s a lot of ways to manage secret keys. Most important thing, if its available on github for anyone to see, don&#39;t put it in your source code. There&#39;s other options like .dotenv or figaro."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "edited": false, "score": 0, "creation_date": 1422943711, "post_id": 28242368, "comment_id": 44937857, "body": "I&#39;m not familiar with yml. Can I just manually start a new file named &quot;secrets.yml&quot;, or is there something special I have to do to create that file?"}, {"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1422991766, "post_id": 28242368, "comment_id": 44965111, "body": "secrets.yml came with Rails 4.1. Depending on what version of rails you&#39;re using, it may or may not be there. You don&#39;t need to use secrets.yml at all. Just use an environment variable. Here&#39;s a guide for it: <a href=\"http://railsapps.github.io/rails-environment-variables.html\" rel=\"nofollow noreferrer\">railsapps.github.io/rails-environment-variables.html</a>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "edited": false, "score": 0, "creation_date": 1423007649, "post_id": 28242368, "comment_id": 44972888, "body": "Okay I tried to add the code to development.rb and production.rb (I added the code to my question). All the other code is the same as in your app. But I&#39;m getting back the error &quot;No public key specified&quot; when I try to load the page with <code>recaptcha_tags</code>. Any idea how I can fix that?"}, {"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1423007927, "post_id": 28242368, "comment_id": 44972967, "body": "Hey Ken, it doesn&#39;t make sense to put secrets in config/environments/production.rb or development.rb. Look at my edit on my answer."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "edited": false, "score": 0, "creation_date": 1423008853, "post_id": 28242368, "comment_id": 44973263, "body": "I&#39;ve never heard of .bashrc or .zshrc. Am I supposed to have those?"}, {"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1423009792, "post_id": 28242368, "comment_id": 44973497, "body": "Let&#39;s go to chat: <a href=\"https://chat.stackoverflow.com/rooms/70179/recaptcha-with-rails\">chat.stackoverflow.com/rooms/70179/recaptcha-with-rails</a>. I&#39;ll be waiting here for you. I should be here for at least an hour or two."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "reply_to_user": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "edited": false, "score": 0, "creation_date": 1423021586, "post_id": 28242368, "comment_id": 44976471, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/70185/discussion-between-ken-anderson-and-sunny-juneja\">continue this discussion in chat</a>."}, {"owner": {"reputation": 360, "user_id": 1492929, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/83241ae52170c0393fef496c15204363?s=128&d=identicon&r=PG", "display_name": "tech spartans", "link": "https://stackoverflow.com/users/1492929/tech-spartans"}, "edited": false, "score": 0, "creation_date": 1439916014, "post_id": 28242368, "comment_id": 52052358, "body": "Above solution won&#39;t work. Please refer this GitHub issue for complete issue and resolution.   <a href=\"https://github.com/ambethia/recaptcha/issues/137\" rel=\"nofollow noreferrer\">github.com/ambethia/recaptcha/issues/137</a>"}, {"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "reply_to_user": {"reputation": 360, "user_id": 1492929, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/83241ae52170c0393fef496c15204363?s=128&d=identicon&r=PG", "display_name": "tech spartans", "link": "https://stackoverflow.com/users/1492929/tech-spartans"}, "edited": false, "score": 0, "creation_date": 1439920094, "post_id": 28242368, "comment_id": 52054724, "body": "hey @techspartans feel free to send me a PR to fix the issue. originally, we were using HEAD beceause recaptcha v2 had a bug fixed in HEAD."}, {"owner": {"reputation": 5403, "user_id": 3480449, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/7XkqT.jpg?s=128&g=1", "display_name": "coderVishal", "link": "https://stackoverflow.com/users/3480449/codervishal"}, "edited": false, "score": 0, "creation_date": 1442656773, "post_id": 28242368, "comment_id": 53179326, "body": "I have not added any special statements for my heroku app and it still works,properly. Any reasons why?"}, {"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "edited": false, "score": 0, "creation_date": 1517300209, "post_id": 28242368, "comment_id": 84027925, "body": "please provide ruby version."}, {"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "edited": false, "score": 0, "creation_date": 1517304762, "post_id": 28242368, "comment_id": 84030612, "body": "Error: Recaptcha::RecaptchaError (No private key specified.):   app/controllers/animals_controller.rb:8:in `create&#39;"}, {"owner": {"reputation": 2566, "user_id": 1578898, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/13d8e2260005e30e823d507385019735?s=128&d=identicon&r=PG", "display_name": "vidur punj", "link": "https://stackoverflow.com/users/1578898/vidur-punj"}, "edited": false, "score": 1, "creation_date": 1517306565, "post_id": 28242368, "comment_id": 84031855, "body": "export RECAPTCHA_SITE_KEY = &#39;6Lc6BAAAAAAAAChqRbQZcn_yyyyyyyyyyyyyyyyy&#39; &amp;                      export RECAPTCHA_SECRET_KEY = &#39;6Lc6BAAAAAAAAKN3DRm6VA_xxxxxxxxxxxxxxxxx&#39; in bashrc"}, {"owner": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "edited": false, "score": 0, "creation_date": 1535878807, "post_id": 28242368, "comment_id": 91220736, "body": "/config/initializers/recaptcha.rb:2:in <code>block in &lt;top (required)&gt;&#39;: undefined method </code>public_key=&#39; for #&lt;Recaptcha::Configuration:0x00007fb9152920e0&gt; (NoMethodError) Did you mean?  public_send"}, {"owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "reply_to_user": {"reputation": 1682, "user_id": 6392696, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/09WDQ.jpg?s=128&g=1", "display_name": "nourza", "link": "https://stackoverflow.com/users/6392696/nourza"}, "edited": false, "score": 0, "creation_date": 1536103448, "post_id": 28242368, "comment_id": 91301089, "body": "@nourza newest version of gem has different names. see example at bottom of <a href=\"https://github.com/ambethia/recaptcha\" rel=\"nofollow noreferrer\">github.com/ambethia/recaptcha</a>, i will update answer"}], "tags": [], "owner": {"reputation": 5705, "user_id": 807103, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/2ad9383c7f23187fa13ec11b57b8d886?s=128&d=identicon&r=PG", "display_name": "sunnyrjuneja", "link": "https://stackoverflow.com/users/807103/sunnyrjuneja"}, "is_accepted": true, "score": 40, "last_activity_date": 1536103571, "last_edit_date": 1536103571, "creation_date": 1422642544, "answer_id": 28242368, "question_id": 28184319, "link": "https://stackoverflow.com/questions/28184319/working-example-of-new-recaptcha-with-rails/28242368#28242368", "title": "Working example of new recaptcha with Rails?", "body": "<p>Using the <a href=\"https://github.com/ambethia/recaptcha\" rel=\"nofollow noreferrer\">recaptcha gem</a>, I created an example that uses the check box method.</p>\n\n<p>Code available here: \n<a href=\"https://github.com/sunnyrjuneja/recaptcha_example\" rel=\"nofollow noreferrer\">https://github.com/sunnyrjuneja/recaptcha_example</a></p>\n\n<p>The commits should be very easy to follow. Let me know if you have anymore questions.</p>\n\n<p>Example application here:\n<a href=\"https://recaptcha-checkbox.herokuapp.com/\" rel=\"nofollow noreferrer\">https://recaptcha-checkbox.herokuapp.com/</a></p>\n\n<p>UPDATE:</p>\n\n<p>Here's a way to do it without secrets.yml.</p>\n\n<p>Change your initializer to look like this:</p>\n\n<pre><code>Recaptcha.configure do |config|\n  config.public_key  = ENV['RECAPTCHA_PUBLIC_KEY']\n  config.private_key = ENV['RECAPTCHA_PRIVATE_KEY']\nend\n</code></pre>\n\n<p>In your development or production environment, add this to your .bashrc or .zshrc.</p>\n\n<pre><code>export RECAPTCHA_PUBLIC_KEY=\"YOURPUBLICKEY\"\nexport RECAPTCHA_PRIVATE_KEY=\"YOURPRIVATEKEY\"\n</code></pre>\n\n<p>If you're using Heroku to deploy do this on your command line:</p>\n\n<pre><code>heroku config:set RECAPTCHA_PUBLIC_KEY=\"YOURPUBLICKEY\"\nheroku config:set RECAPTCHA_PRIVATE_KEY=\"YOURPRIVATEKEY\"\n</code></pre>\n\n<p>UPDATE 2:</p>\n\n<p>The recaptcha gem now uses different method names for setting the keys. </p>\n\n<p><code>\nRecaptcha.configure do |config|\n  config.site_key  = 'YOUR_SITE_KEY_HERE'\n  config.secret_key = 'YOUR_SECRET_KEY_HERE'\n  # Uncomment the following line if you are using a proxy server:\n  # config.proxy = 'http://myproxy.com.au:8080'\nend\n</code></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "edited": false, "score": 0, "creation_date": 1422890922, "post_id": 28279146, "comment_id": 44916172, "body": "How can I send the GET request in step 3?"}, {"owner": {"reputation": 1654, "user_id": 1369337, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/j6Es8.jpg?s=128&g=1", "display_name": "Jenorish", "link": "https://stackoverflow.com/users/1369337/jenorish"}, "edited": false, "score": 0, "creation_date": 1422891367, "post_id": 28279146, "comment_id": 44916478, "body": "<a href=\"https://jenorish.herokuapp.com/users/new\" rel=\"nofollow noreferrer\">jenorish.herokuapp.com/users/new</a> see my application in heroku @KenAnderson"}], "tags": [], "owner": {"reputation": 1654, "user_id": 1369337, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/j6Es8.jpg?s=128&g=1", "display_name": "Jenorish", "link": "https://stackoverflow.com/users/1369337/jenorish"}, "is_accepted": false, "score": 1, "last_activity_date": 1436552009, "last_edit_date": 1436552009, "creation_date": 1422884710, "answer_id": 28279146, "question_id": 28184319, "link": "https://stackoverflow.com/questions/28184319/working-example-of-new-recaptcha-with-rails/28279146#28279146", "title": "Working example of new recaptcha with Rails?", "body": "<p>Please follow this:</p>\n\n<p>Step 1. Create a Ruby on Rails application:-</p>\n\n<p>a)Open a terminal, navigate to a directory where you have rights to create application and type:\nrails new recap</p>\n\n<p>b)After you create the application, switch to its folder:</p>\n\n<p><code>$cd recap</code></p>\n\n<p>c)Type and run bundle install:</p>\n\n<p><code>$bundle install</code></p>\n\n<p><em>Step 2. Create models, views, and controllers:-</em></p>\n\n<p><em>Step 3. Integrating Google Recaptcha With Ruby On Rails:-</em></p>\n\n<p>a) Please login to Google Recaptcha website to register ur domain to get access.(<a href=\"https://www.google.com/recaptcha/intro/index.html\" rel=\"nofollow\">https://www.google.com/recaptcha/intro/index.html</a>)</p>\n\n<p>b) Please login and register your site , with the details\nc)After registeration google provide the</p>\n\n<p>Script tag place this snippet before the closing  tag on your HTML template.\n    div place this snippet at the end of the  where you want the \nreCAPTCHA widget to appear.</p>\n\n<p>d)Once the above steps are done, we can see the recaptcha in the site.</p>\n\n<p>f)For the server side validation we can use the secret key and the response which is going to be sent as parameters to the form submit action in the controller.</p>\n\n<p>g)To check whether Google has verified that user, send a GET request with these parameters:URL: <a href=\"https://www.google.com/recaptcha/api/siteverify\" rel=\"nofollow\">https://www.google.com/recaptcha/api/siteverify</a></p>\n\n<p>Step 4. Application Code change for server side validation.</p>\n\n<p>Please see below links for more details,</p>\n\n<p>1) <a href=\"https://gurudathbn.wordpress.com/category/google-recaptcha-with-ruby-on-rails/\" rel=\"nofollow\">recaptcha-in-rails</a></p>\n\n<p>2) <a href=\"https://veerasundaravel.wordpress.com/2011/05/13/google-recaptcha-in-rails/\" rel=\"nofollow\">google-recaptcha-in-rails</a></p>\n\n<p>In layout:</p>\n\n<pre><code>&lt;script src='https://www.google.com/recaptcha/api.js'&gt;&lt;/script&gt;\n</code></pre>\n\n<p>My view app/views/users/_form.html.erb:</p>\n\n<p><code>&lt;div class=\"g-recaptcha\" data-sitekey=\"6LdgWwETAAAAAPwAddRqDtNbt9sdfsfsfsdJhggghhKKYTdadsHt54\"&gt;&lt;/div&gt;</code></p>\n\n<p>In initializers:</p>\n\n<pre><code>SECRET_KEY = \"my_secret_key_here\"\n</code></pre>\n\n<p>In User Controller:</p>\n\n<pre><code> def verify_google_recptcha(secret_key,response)\n  status = `curl \"https://www.google.com/recaptcha/api/siteverify?secret=#{secret_key}&amp;response=#{response}\"`\n     logger.info \"---------------status ==&gt; #{status}\"\n     hash = JSON.parse(status)\n     hash[\"success\"] == true ? true : false\n  end\n\n  def create\n    @user = User.new(user_params)\n    status = verify_google_recptcha(SECRET_KEY,params[\"g-recaptcha-response\"])\n    respond_to do |format|\n    if @user.save &amp;&amp; status\n      format.html { redirect_to @user, notice: 'User was successfully created.' }\n      format.json { render :show, status: :created, location: @user }\n    else\n      format.html { render :new }\n      format.json { render json: @user.errors, status: :unprocessable_entity }\n    end\n  end\nend\nlogger.info \"---------------status ==&gt; #{status}\" will print like below\n</code></pre>\n\n<p>In Error:</p>\n\n<pre><code>---------------status ==&gt; {\n\"success\": false,\n \"error-codes\": [\n  \"missing-input-response\"\n ]\n}\n</code></pre>\n\n<p>In success</p>\n\n<pre><code> ---------------status ==&gt; {\n\"success\": true\n}\n</code></pre>\n\n<p>In that you could take <code>status[\"error-codes\"][0]</code> and you could show it in <code>_form.html.erb</code></p>\n\n<p>See my application in <a href=\"https://jenorish.herokuapp.com/users/new\" rel=\"nofollow\">heroku</a></p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5465453, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c40ad250e534c11aceda97b6a80cd892?s=128&d=identicon&r=PG&f=1", "display_name": "Carma Tec", "link": "https://stackoverflow.com/users/5465453/carma-tec"}, "is_accepted": false, "score": 1, "last_activity_date": 1454565785, "last_edit_date": 1454565785, "creation_date": 1454565358, "answer_id": 35193529, "question_id": 28184319, "link": "https://stackoverflow.com/questions/28184319/working-example-of-new-recaptcha-with-rails/35193529#35193529", "title": "Working example of new recaptcha with Rails?", "body": "<p>You should try this example from <a href=\"http://www.railscarma.com/blog/technical-articles/protect-your-web-application-with-google-recaptcha-on-ruby-on-rails/\" rel=\"nofollow\">RailsCarma's Blog</a>.</p>\n\n<p>Follow these steps:\n1) Get the credentials\n2) Add recaptcha tags\n3) To handle verification, create a recaptcha class\n4) In Registrations controller add verify_recaptcha method</p>\n\n<p><strong>Setup\nStep 1:-</strong></p>\n\n<p>Add the following to your gem file:</p>\n\n<pre><code>gem \u201crecaptcha\u201d, :require =&gt; \u201crecaptcha/rails\u201d\n</code></pre>\n\n<p><strong>Step 2:-</strong></p>\n\n<p>Login to developers.google.com and sign into your gmail account and search for \u2018recaptcha\u2019. Click on \u201cSignup for an API Key\u201d link. Check the secret and site keys. As the name itself suggests, the secret key should be kept at a safer location whereas the site key is the public key used for authenticating to Google. Register your site name with your google account to retrieve public and private key that will be used later on the application.</p>\n\n<p>After the registration is done, you will get the public key and private key. From the client side, the public key is sent to recaptcha service to request a new captcha. The private key is applied on the server side to verify if the right value is entered.</p>\n\n<p>Then register for a reCAPTCHA API key and add that to your environment config files:</p>\n\n<pre><code>#put this in development.rb and in production.rb\nENV_RECAPTCHA_PUBLIC_KEY= \u2018your-public-key\u2019\nENV_RECAPTCHA_PRIVATE_KEY= \u2018your-private-key\u2019\n</code></pre>\n\n<p><strong>Step 3:-</strong></p>\n\n<pre><code>Create a file named recaptcha.rb in config/initializers to configure recaptcha parameters.\nRecaptcha.configure do |config|\nconfig.public_key = \u2018 ENV_RECAPTCHA_PUBLIC_KEY\u2019\nconfig.private_key = \u2018ENV_RECAPTCHA_PRIVATE_KEY\u2019\nconfig.proxy = \u2018http://www.google.com/recaptcha/api/verify\u2019\nend\n</code></pre>\n\n<p><strong>Step 4:-\nView</strong></p>\n\n<p>The Captcha Gem helps to render the actual captcha box. It\u2019s as simple as putting the following into your view at the point where you want the captcha to appear:</p>\n\n<pre><code>&lt;%= raw recaptcha_tags %&gt;\nIf you are using SSL, use this instead:\n&lt;%= recaptcha_tags :ssl =&gt; true %&gt;, The SSL option ensures we send a https request to the recaptcha service.\n</code></pre>\n\n<p><strong>Step 5:-\nController</strong></p>\n\n<p>The Captcha Gem provides another helper method that posts to the reCaptcha API server to verify if the submission is correct. If it is then the method returns true, if not, it will add a custom error message that the recaptcha is wrong to the model instance. Here is the basic code as you might have it in the create action of your controller:-</p>\n\n<p>In devise controllers, app/controllers/registrations_controller.rb, Insert the following code:</p>\n\n<pre><code>require \u2018recaptcha.rb\u2019\nbefore_action :verify_recaptcha, only: [:create]\ndef verify_recaptcha\nresponse = Recaptcha.verify(params)\nsession[:sign_up] = params[:user].except(:password, :password_confirmation, :remoteip)\nif response.code == 200\nif response[\u2018success\u2019]\nflash[:notice] = \u201cRecaptcha verification successful.\u201d\nelse\nredirect_to new_user_registration_path(user: params[:user]),\nalert: \u201cRecaptcha verification error.\u201d\nend\nelse\nredirect_to new_user_registration_path(user: params[:user]),\nalert: \u201cHTTP connection error.\u201d\nend\nend\n</code></pre>\n\n<p>The session[:sign_up] is persisted as the signup form can be pre-filled if verification fails.</p>\n"}, {"tags": [], "owner": {"reputation": 66, "user_id": 9616949, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MQwgm.jpg?s=128&g=1", "display_name": "Reinier Garcia", "link": "https://stackoverflow.com/users/9616949/reinier-garcia"}, "is_accepted": false, "score": 0, "last_activity_date": 1608549134, "last_edit_date": 1608549134, "creation_date": 1608548764, "answer_id": 65391642, "question_id": 28184319, "link": "https://stackoverflow.com/questions/28184319/working-example-of-new-recaptcha-with-rails/65391642#65391642", "title": "Working example of new recaptcha with Rails?", "body": "<p><strong>Complete Solution, Step by Step:</strong></p>\n<p>The other answers here are not working anymore, as the recaptcha gem has being updated, as you can check <a href=\"https://github.com/ambethia/recaptcha\" rel=\"nofollow noreferrer\">here</a>. This is how I used recaptcha with my Rails 6 application, step by step.</p>\n<p><strong>Step # 1:</strong> place the gem in your Gemfile:</p>\n<p>gem 'recaptcha'</p>\n<p>If you are using the gems figaro (like in my case) or dotenv to store the Env variables, you need to place the recaptcha gem below the declaration of any of those two gems.</p>\n<p><strong>Step # 2:</strong> Get the recaptcha APY keys:</p>\n<p>Go to the <a href=\"https://www.google.com/recaptcha/admin\" rel=\"nofollow noreferrer\">reCAPTCHA admin console</a> page that belongs to Google, to obtain one reCAPTCHA API key for production and another one for development (later you will see why). Copy all that information in a safe place temporally. To have some order in that matter, as you may need several other recaptcha keys in the future, you should follow some kind of distinctive notation for the label of those recaptcha keys. For example in my case it was for my personal website, so I call them <em>reiniergarcia_production</em> and <em>reiniergarcia_development</em>.</p>\n<p>You need to select there the specific kind of recaptcha you are going to use. One kind of recaptcha's API key won't work for another type of recaptcha. In my case I used the v2 Checkbox type (the one that says: 'I'm not a robot').</p>\n<p><strong>Step # 3:</strong> Store the recaptcha APY keys on rails:</p>\n<p>In my case I was using Figaro to store my environment variables on rails, so this is what I typed at config/application.yml:</p>\n<pre><code>production:\n  recaptcha_site_key: 'wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww'\n  recaptcha_secret_key: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'\n\ndevelopment:\n  recaptcha_site_key: 'yyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyyy'\n  recaptcha_secret_key: 'zzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzzz'\n</code></pre>\n<p><strong>Step # 4:</strong> Add the Recaptcha initializer:</p>\n<p>I added the the file <em>config/initializers/recaptcha.rb</em> and inside I placed:</p>\n<pre><code>Recaptcha.configure do |config|\n  # New configuration format:\n  config.site_key = Figaro.env.recaptcha_site_key\n  config.secret_key = Figaro.env.recaptcha_secret_key\nend\n</code></pre>\n<p>That's the new configuration. Notice that now it's site_key &amp; secret_key (not public_key or private_key anymore). Figaro will load dynamically the proper key, depending of the environment. In my case I deployed to Heroku, but don't worry, as I will get there soon.</p>\n<p><strong>Step # 5:</strong> Place the recatcha tag in your form:</p>\n<p>This is what I did in my case:</p>\n<pre><code>  &lt;%= form_with(model: contact, local: true) do |form| %&gt;\n    &lt;%= hidden_field_tag :return_to, return_to %&gt;\n\n    &lt;%= form.text_field :name, placeholder: 'Name', autofocus: false %&gt;\n    &lt;%= form.email_field :email, placeholder: 'Email', autofocus: false %&gt;\n    &lt;%= form.text_field :subject, placeholder: 'Subject', autofocus: false %&gt;\n    &lt;%= form.text_area :message, placeholder: 'Message', autofocus: false, disabled: false %&gt;\n\n    &lt;div class=&quot;row&quot;&gt;\n      &lt;div class=&quot;col-md-6&quot;&gt;\n        &lt;div style=&quot;margin-top: 14px;&quot;&gt;\n          &lt;%= recaptcha_tags %&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n\n      &lt;div class=&quot;col-md-6 submit-button&quot;&gt;\n        &lt;%= form.submit &quot;SEND&quot;, name: &quot;send&quot; %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n<p><strong>Step 6:</strong> Style your recaptcha tag:</p>\n<p>You might need to style the position and/or size of your recaptcha tag in your front-end (generated for the recaptcha_tags helper). This is what I did in my case:</p>\n<p>I added the file app/assets/stylesheets/recaptcha_tags.scss with:</p>\n<pre><code>.g-recaptcha {\n  transform: scale(0.6);\n  transform-origin: 0 0;\n}\n</code></pre>\n<p>It allows first to reduce the size of the recaptcha tag (very useful as the recaptcha tag usually is too large). In your case if you need to add further styling, you should place it there, and not mixed with the rest of your css code. The way of importing this styling file is by adding at <em>app/assets/stylesheets/application.scss</em>, the following:</p>\n<pre><code>// Imports the recaptcha_tags styling:\n@import &quot;recaptcha_tags&quot;;\n</code></pre>\n<p>SideNote:\n<em>If you are going to use several layouts, you should have one main .scss file per each of them and on each of them you are going to import ONLY what's necessary for that particular layout (only those additional .scss strictly necessary).</em></p>\n<p>Step # 7: Add the verify_recaptcha logic:</p>\n<p>You need to add the verify_recaptcha logic in the proper action of your respective controller. In my case I wanted to persist a Contact object only if the user was &quot;not a robot&quot;, so this is what I did at app/controllers/contacts_controller.rb:</p>\n<pre><code>  def create\n    @contact = contact_service.build_contact(contact_params)\n\n    if verify_recaptcha(model: @contact) &amp;&amp; @contact.save\n      redirect_notice = t('contacts.send.success_notice')\n      redirect_to @return_to, notice: redirect_notice\n    else\n      flash[:alert] = @contact.errors.full_messages.first\n      redirect_to @return_to\n    end\n  end\n</code></pre>\n<p>If the user doesn't click on &quot;I'm not a robot&quot;, it will show a flash error on my page.</p>\n<p><strong>Step # 8:</strong> Place the env. variables in your server:</p>\n<p>In my case as I said before, I was using Heroku. So I just went to my Dashboard in Heroku, then I clicked in my project, later in the Settings tab and then in a button that says: &quot;Reveal Config Vars&quot;. And then I will added at the end the following pairs (key and value only):</p>\n<pre><code>  recaptcha_site_key: 'wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww'\n  recaptcha_secret_key: 'xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx'\n</code></pre>\n<p>As you can see, I only added the production recaptcha APY keys.</p>\n<p>You can achieve the same from your terminal, by executing:</p>\n<pre><code>$ heroku config:set recaptcha_site_key=wwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwwww\n$ heroku config:set recaptcha_secret_key=xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n</code></pre>\n<p><strong>Step # 9:</strong> Push all these changes to Github:</p>\n<pre><code>$ git push origin master\n</code></pre>\n<p><strong>Step # 10:</strong> Deploy to Heroku again:</p>\n<pre><code>$ git push heroku master\n</code></pre>\n<p>And that's it. If you follow these steps you should have your recaptcha running perfectly on your production website too. I hope it was useful.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4133294"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 16708, "favorite_count": 9, "accepted_answer_id": 28242368, "answer_count": 4, "score": 21, "last_activity_date": 1608549134, "creation_date": 1422416977, "last_edit_date": 1551797636, "question_id": 28184319, "link": "https://stackoverflow.com/questions/28184319/working-example-of-new-recaptcha-with-rails", "title": "Working example of new recaptcha with Rails?", "body": "<p>Does anyone have a working example of Google's new recaptcha in a Rails app? Every guide I try to follow is either unclear or incomplete, and seems to use a different method.</p>\n\n<p>Hand-rolled code would be preferable.</p>\n\n<hr>\n\n<p><strong>Work in Progress:</strong></p>\n\n<p>config/environments/production.rb:</p>\n\n<pre><code>  #...\n  recaptcha_public_key= \"[PUBLIC KEY]\"\n  recaptcha_private_key= \"[PRIVATE KEY]\"\nend\n</code></pre>\n\n<p>config/environments/development.rb:</p>\n\n<pre><code>  #...\n  recaptcha_public_key= \"[PUBLIC KEY]\"\n  recaptcha_private_key= \"[PRIVATE KEY]\"\nend\n</code></pre>\n\n<p>config/initializers/recaptcha.rb</p>\n\n<pre><code>Recaptcha.configure do |config|\n  config.public_key  = Rails.application.secrets.recaptcha_public_key\n  config.private_key = Rails.application.secrets.recaptcha_secret_key\n  config.api_version = 'v2'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-spreadsheet-api"], "comments": [{"owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "edited": false, "score": 0, "creation_date": 1422429856, "post_id": 28184290, "comment_id": 44741969, "body": "You need to figure out where &quot;GoogleDrive&quot; is coming from and ask the author what happened to the &quot;login&quot; method. Generally, you should avoid username/password authentication as it&#39;s about to be disabled by Google."}, {"owner": {"reputation": 23, "user_id": 3740964, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0ccaa1675c1ddb616f19e191e920fd80?s=128&d=identicon&r=PG&f=1", "display_name": "MCHLWRRN", "link": "https://stackoverflow.com/users/3740964/mchlwrrn"}, "reply_to_user": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "edited": false, "score": 0, "creation_date": 1422433389, "post_id": 28184290, "comment_id": 44743403, "body": "I&#39;m following the Learn-Rails tutorial by Daniel Kehoe. One of the gems installed was google_drive. That leads me to what I need to do - I am using an older version of the book from 2013. This lead me to go here:  <a href=\"https://rubygems.org/gems/google_drive/versions\" rel=\"nofollow noreferrer\">rubygems.org/gems/google_drive/versions</a>  I changed the specific gem to gem &#39;google_drive&#39;, &#39;0.3.6&#39; since it was using 1.0 - then the error I received was an authentication error. Changed the settings on my test Gmail account and it works now. Thanks for helping me figure that out!"}], "answers": [{"comments": [{"owner": {"reputation": 18863, "user_id": 1000753, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/23634e7a38e353cca12bb72a4205615b?s=128&d=identicon&r=PG", "display_name": "pinoyyid", "link": "https://stackoverflow.com/users/1000753/pinoyyid"}, "edited": false, "score": 0, "creation_date": 1422446651, "post_id": 28190302, "comment_id": 44750756, "body": "cool. Do note the comment at <a href=\"https://developers.google.com/google-apps/spreadsheets/#about_authorization_protocols\" rel=\"nofollow noreferrer\">developers.google.com/google-apps/spreadsheets/&hellip;</a> which says &quot;You must use OAuth 2.0 to authorize requests.&quot; Username/password auth will soon be end-of-lifed"}], "tags": [], "owner": {"reputation": 23, "user_id": 3740964, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0ccaa1675c1ddb616f19e191e920fd80?s=128&d=identicon&r=PG&f=1", "display_name": "MCHLWRRN", "link": "https://stackoverflow.com/users/3740964/mchlwrrn"}, "is_accepted": true, "score": 1, "last_activity_date": 1422442132, "creation_date": 1422442132, "answer_id": 28190302, "question_id": 28184290, "link": "https://stackoverflow.com/questions/28184290/learn-rails-tut-error-nomethoderror-undefined-method-login-for-googledrive/28190302#28190302", "title": "Learn-Rails Tut Error: NoMethodError - undefined method `login&#39; for GoogleDrive:Module:", "body": "<p>I'm following the Learn-Rails tutorial by Daniel Kehoe. One of the gems installed was google_drive. That leads me to what I need to do - I am using an older version of the book from 2013. This lead me to go here: rubygems.org/gems/google_drive/versions I changed the specific gem to gem 'google_drive', '0.3.6' since it was using 1.0 - then the error I received was an authentication error. Changed the settings on my test Gmail account and it works now. Thanks for helping me figure that out! </p>\n"}], "owner": {"reputation": 23, "user_id": 3740964, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/0ccaa1675c1ddb616f19e191e920fd80?s=128&d=identicon&r=PG&f=1", "display_name": "MCHLWRRN", "link": "https://stackoverflow.com/users/3740964/mchlwrrn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 28190302, "answer_count": 1, "score": 0, "last_activity_date": 1422442132, "creation_date": 1422416806, "last_edit_date": 1422429784, "question_id": 28184290, "link": "https://stackoverflow.com/questions/28184290/learn-rails-tut-error-nomethoderror-undefined-method-login-for-googledrive", "title": "Learn-Rails Tut Error: NoMethodError - undefined method `login&#39; for GoogleDrive:Module:", "body": "<p>Here are the first lines of the server output:</p>\n\n<pre><code>NoMethodError - undefined method `login' for GoogleDrive:Module:\n  app/models/contact.rb:16:in `update_spreadsheet'\n</code></pre>\n\n<p>Here is the contact model (contact.rb):</p>\n\n<p>class Contact &lt; ActiveRecord::Base\n    has_no_table</p>\n\n<pre><code>column :name, :string\ncolumn :email, :string\ncolumn :content, :string\n\nvalidates_presence_of :name\nvalidates_presence_of :email\nvalidates_presence_of :content\nvalidates_format_of :email,\n:with =&gt; /\\A[-a-z0-9_+\\.]+\\@([-a-z0-9]+\\.)+[a-z0-9]{2,4}\\z/i\nvalidates_length_of :content, :maximum =&gt; 500\n\ndef update_spreadsheet\n    connection = GoogleDrive.login(ENV[\"GMAIL_USERNAME\"], ENV[\"GMAIL_PASSWORD\"])\n    ss = connection.spreadsheet_by_title('Learn-Rails-Example')\n    if ss.nil?\n        ss = connection.create_spreadsheet('Learn-Rails-Example')\n    end\n    ws = ss.worksheets[0]\n    last_row = 1 + ws.num_rows\n    ws[last_row, 1] = Time.new\n    ws[last_row, 2] = self.name\n    ws[last_row, 3] = self.email\n    ws[last_row, 4] = self.content\n    ws.save\n  end\nend\n</code></pre>\n\n<p>Bounced the server and double-checked for typos (including making sure I had the right ENV variables in the application.yml file) but I am still running into the error.</p>\n"}, {"tags": ["ruby", "watir-webdriver"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1422418429, "post_id": 28184230, "comment_id": 44738013, "body": "I dunno if google wants you doing that.  But if you must, just use a <code>:text</code> locator."}, {"owner": {"reputation": 960, "user_id": 3482656, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2005b135d5a6b59d966be48549afbfc1?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie Programmer", "link": "https://stackoverflow.com/users/3482656/newbie-programmer"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1422432935, "post_id": 28184230, "comment_id": 44743213, "body": "I tried using :text locator, but it does not fetch any result."}, {"owner": {"reputation": 2025, "user_id": 2317875, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6574420d716cf1436cc2f9a1b2f0ac3?s=128&d=identicon&r=PG", "display_name": "unigeek", "link": "https://stackoverflow.com/users/2317875/unigeek"}, "edited": false, "score": 0, "creation_date": 1422454498, "post_id": 28184230, "comment_id": 44755684, "body": "Any interest in scripting tests with RSpec and Capybara instead?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1422455620, "post_id": 28184230, "comment_id": 44756432, "body": "Where is that link supposed to go to? I do not see that URL anywhere. At any rate, it is likely a timing issue due to the asynchronous loading of the page. Try using one of the wait methods such as <code>when_present</code>."}, {"owner": {"reputation": 960, "user_id": 3482656, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2005b135d5a6b59d966be48549afbfc1?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie Programmer", "link": "https://stackoverflow.com/users/3482656/newbie-programmer"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1422474931, "post_id": 28184230, "comment_id": 44768520, "body": "@JustinKo that link is supposed to be the link of first result"}], "answers": [{"tags": [], "owner": {"reputation": 319, "user_id": 3828132, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/536859d4c3bd8e8ef41a7e006a9a9b7a?s=128&d=identicon&r=PG&f=1", "display_name": "Smooyk", "link": "https://stackoverflow.com/users/3828132/smooyk"}, "is_accepted": true, "score": 1, "last_activity_date": 1425018602, "creation_date": 1425018602, "answer_id": 28758886, "question_id": 28184230, "link": "https://stackoverflow.com/questions/28184230/google-search-automation-script-using-watir-webdriver/28758886#28758886", "title": "Google Search Automation Script using Watir webdriver", "body": "<p>All links in google search result has h3 header with class 'r', so you can use te next statement:</p>\n\n<pre><code>b.h3s(:class=&gt;'r')[0].click \n</code></pre>\n\n<p>To open the first link in the results. </p>\n"}], "owner": {"reputation": 960, "user_id": 3482656, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2005b135d5a6b59d966be48549afbfc1?s=128&d=identicon&r=PG&f=1", "display_name": "Newbie Programmer", "link": "https://stackoverflow.com/users/3482656/newbie-programmer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 949, "favorite_count": 1, "accepted_answer_id": 28758886, "answer_count": 1, "score": 0, "last_activity_date": 1425018602, "creation_date": 1422416391, "question_id": 28184230, "link": "https://stackoverflow.com/questions/28184230/google-search-automation-script-using-watir-webdriver", "title": "Google Search Automation Script using Watir webdriver", "body": "<p>I have to run a ruby script in watir webdriver to automate google search. Then click on first link in google search results and check if my search term exists on that page. So far I am able to reach till step where I have automated searching part but I am not able to click on first link. Here is what I have so far:</p>\n\n<pre><code>    require 'rubygems'\nrequire 'watir-webdriver'\nb = Watir::Browser.new\nb.goto 'http://google.com'\nb.text_field(:name,'q').set 'santa clara university'\nb.button(:name,'btnG').click\nb.link(:href, 'http://www.google.com/url?sa=t&amp;rct=j&amp;q=&amp;esrc=s&amp;source=web&amp;cd\u2026usg=AFQjCNHi39wrFlDMd6h8oAmkVgpkA6kYeQ&amp;bvm=bv.84607526,d.cGU').fire_event('onmousedown')\n</code></pre>\n\n<p>I am trying to click on first link using its href field mentioned under \"onmousedown\"  tag. Can anyone help?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1422422989, "post_id": 28184069, "comment_id": 44739344, "body": "Isn&#39;t an <code>XML</code> parser recommended for such a problem?"}, {"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "reply_to_user": {"reputation": 16538, "user_id": 2602869, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/PkMYa.jpg?s=128&g=1", "display_name": "Jikku Jose", "link": "https://stackoverflow.com/users/2602869/jikku-jose"}, "edited": false, "score": 0, "creation_date": 1422423136, "post_id": 28184069, "comment_id": 44739393, "body": "yeah, was thinking about using nokogiri but this is all that we&#39;re really capturing and seems like overkill."}], "answers": [{"comments": [{"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 0, "creation_date": 1422415789, "post_id": 28184109, "comment_id": 44737314, "body": "thx Doorknob, I updated the question from using different variable names but you got it right anyway"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422418634, "post_id": 28184109, "comment_id": 44738068, "body": "Do you need the multiline modifier (<code>&#47;m</code>)?"}, {"owner": {"reputation": 51826, "user_id": 1223693, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/viu9Y.jpg?s=128&g=1", "display_name": "tckmn", "link": "https://stackoverflow.com/users/1223693/tckmn"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422418970, "post_id": 28184109, "comment_id": 44738157, "body": "@CarySwoveland If the tags can potentially contain multiline data (ex. <code>&lt;st&gt;foo\\nbar\\nbaz&lt;&#47;st&gt;</code>), then yes. I&#39;ve just kept the regex the same as in the original question, to avoid confusion."}], "tags": [], "owner": {"reputation": 51826, "user_id": 1223693, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/viu9Y.jpg?s=128&g=1", "display_name": "tckmn", "link": "https://stackoverflow.com/users/1223693/tckmn"}, "is_accepted": true, "score": 3, "last_activity_date": 1422415535, "creation_date": 1422415535, "answer_id": 28184109, "question_id": 28184069, "link": "https://stackoverflow.com/questions/28184069/get-multiple-substrings-from-a-string-in-ruby/28184109#28184109", "title": "get multiple substrings from a string in Ruby", "body": "<p>Use <code>scan</code>:</p>\n\n<pre><code>tmp_body_symbols.scan(/#{str1_markerstring}(.*?)#{str2_markerstring}/m).flatten\n</code></pre>\n\n<p>See also: <a href=\"http://www.ruby-doc.org/core-2.2.0/String.html#method-i-scan\" rel=\"nofollow\">Ruby docs for <code>String#scan</code></a>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1422418534, "last_edit_date": 1422418534, "creation_date": 1422418157, "answer_id": 28184470, "question_id": 28184069, "link": "https://stackoverflow.com/questions/28184069/get-multiple-substrings-from-a-string-in-ruby/28184470#28184470", "title": "get multiple substrings from a string in Ruby", "body": "<p>You can do this with a capture group, as @Doorknob has done, or without a capture group, by using a (\"zero-width\") positive look-behind and positive-lookahead:</p>\n\n<pre><code>tmp = \"things &lt;st&gt;hello&lt;/st&gt; and &lt;st&gt;blue&lt;/st&gt; by &lt;st&gt;orange&lt;/st&gt;\"\ns1 = \"&lt;st&gt;\"\ns2 = \"&lt;/st&gt;\"\n\ntmp.scan(/(?&lt;=#{ s1 }).*?(?=#{ s2 })/).flatten\n  #=&gt; [\"hello\", \"blue\", \"orange\"]\n</code></pre>\n\n<ul>\n<li><code>(?&lt;=#{ s1 })</code>, which evaluates to <code>(?&lt;=&lt;st&gt;)</code>, is the positive look-behind.</li>\n<li><code>(?=#{ s2 })</code>, which evaluates to <code>(?=&lt;/st&gt;)</code>, is the positive look-behind.</li>\n<li><code>?</code> following <code>.*</code> makes it \"non-greedy\". Without it:</li>\n</ul>\n\n<p></p>\n\n<pre><code>tmp.scan(/(?&lt;=#{ s1 }).*(?=#{ s2 })/).flatten\n  #=&gt; [\"hello&lt;/st&gt; and &lt;st&gt;blue&lt;/st&gt; by &lt;st&gt;orange\"] \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 0, "creation_date": 1422423338, "post_id": 28185332, "comment_id": 44739456, "body": "thx, makes sense, might do this down the road but more quick and dirty for this one off"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 1, "creation_date": 1422423567, "post_id": 28185332, "comment_id": 44739522, "body": "It was just one line but when you need to get data from whole page/file I think this is better to use."}, {"owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "edited": false, "score": 1, "creation_date": 1422423707, "post_id": 28185332, "comment_id": 44739572, "body": "i agree - when it gets there; nokogiri would probably be a great soln"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 2, "last_activity_date": 1422423235, "creation_date": 1422423235, "answer_id": 28185332, "question_id": 28184069, "link": "https://stackoverflow.com/questions/28184069/get-multiple-substrings-from-a-string-in-ruby/28185332#28185332", "title": "get multiple substrings from a string in Ruby", "body": "<p>You can use <strong><a href=\"http://www.nokogiri.org/\" rel=\"nofollow\">Nokogiri</a></strong> to parse HTML/XML</p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri' \n\ndoc = Nokogiri::HTML::Document.parse(\"things &lt;st&gt;hello&lt;/st&gt; and &lt;st&gt;blue&lt;/st&gt; by &lt;st&gt;orange&lt;/st&gt;\")\ndoc.css('st').map(&amp;:text)\n#=&gt; [\"hello\", \"blue\", \"orange\"]\n</code></pre>\n\n<p>More Info : <a href=\"http://www.nokogiri.org/tutorials/parsing_an_html_xml_document.html\" rel=\"nofollow\">http://www.nokogiri.org/tutorials/parsing_an_html_xml_document.html</a></p>\n"}], "owner": {"reputation": 16919, "user_id": 152825, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e990c2bcb4dfb7fd0c398098da9bca59?s=128&d=identicon&r=PG", "display_name": "timpone", "link": "https://stackoverflow.com/users/152825/timpone"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 28184109, "answer_count": 3, "score": 0, "last_activity_date": 1422423235, "creation_date": 1422415322, "last_edit_date": 1422415755, "question_id": 28184069, "link": "https://stackoverflow.com/questions/28184069/get-multiple-substrings-from-a-string-in-ruby", "title": "get multiple substrings from a string in Ruby", "body": "<p>I have</p>\n\n<pre><code>tmp_body_symbols=\"things &lt;st&gt;hello&lt;/st&gt; and &lt;st&gt;blue&lt;/st&gt; by &lt;st&gt;orange&lt;/st&gt;\"\nstr1_markerstring = \"&lt;st&gt;\"\nstr2_markerstring = \"&lt;/st&gt;\"\nfrags &lt;&lt; tmp_body_symbols[/#{str1_markerstring}(.*?)#{str2_markerstring}/m, 1]\n</code></pre>\n\n<p>frags is \"hello\" but I want [\"hello\",\"blue\",\"orange\"]</p>\n\n<p>How woudl I do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "scope", "partials"], "answers": [{"comments": [{"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422416384, "post_id": 28184129, "comment_id": 44737473, "body": "edit: going to read the passing locals and see if I can figure it out/check back if I can&#39;t find how to pass the data through locals."}, {"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422417453, "post_id": 28184129, "comment_id": 44737730, "body": "Seem to be having issue- it doesn&#39;t mention anything about controllers. Where is it getting the instance variable&#39;s data from?"}, {"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422418860, "post_id": 28184129, "comment_id": 44738123, "body": "locals: {post: Post.all} works fine, but obviously defeats the purpose. @post is returning a nil- could it be because the partial is getting rendered into another view welcome/index instead of posts/index?"}, {"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422419046, "post_id": 28184129, "comment_id": 44738176, "body": "If I def index in the welcome controller the same as the posts controller, then I get a totally different error regarding the posts/_new partial, which means that perhaps it works but I need to resolve this other issue that for some reason this controller change causes?"}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422419440, "post_id": 28184129, "comment_id": 44738280, "body": "it sounds like to me you haven&#39;t clearly defined your problem in your original question.  Set up the two scenarios for both ie. controller/view/partial so I can read through it."}, {"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "reply_to_user": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 1, "creation_date": 1422449259, "post_id": 28184129, "comment_id": 44752318, "body": "Thanks for posting that - partials are independent of controllers.  You&#39;ll need to add @posts = Post.all in your <code>welcome#index</code> action"}, {"owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "edited": false, "score": 0, "creation_date": 1422490270, "post_id": 28184129, "comment_id": 44775493, "body": "Adding that to the index of the welcome controller solved it, thanks! I didn&#39;t realize both partials rendering with different values for @post were I guess conflicting."}], "tags": [], "owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "is_accepted": true, "score": 3, "last_activity_date": 1422415674, "creation_date": 1422415674, "answer_id": 28184129, "question_id": 28184011, "link": "https://stackoverflow.com/questions/28184011/why-arent-instance-variables-defined-in-a-controllers-methods-available-in-the/28184129#28184129", "title": "Why aren&#39;t instance variables defined in a controller&#39;s methods available in the corresponding partials?", "body": "<p>You're right that you're breaking MVC conventions by calling controller-level object lookups in your view.</p>\n\n<p>When you call the render action on the partial you have a variety of arguments to send, one of which is a <code>locals</code> hash that takes a variable you want to pass directly into your partial. </p>\n\n<p>It looks like this:</p>\n\n<pre><code>&lt;%= render partial: \"something\", locals: {posts: @posts} %&gt;\n</code></pre>\n\n<p>The rails guides are a great resource on the topic.  More on that <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html#using-partials\" rel=\"nofollow\">here</a>.</p>\n"}], "owner": {"reputation": 3505, "user_id": 1133488, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/b15cf4835e6eefdf1e8bf204f13fc71b?s=128&d=identicon&r=PG", "display_name": "Laser", "link": "https://stackoverflow.com/users/1133488/laser"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1280, "favorite_count": 0, "accepted_answer_id": 28184129, "answer_count": 1, "score": 0, "last_activity_date": 1423036430, "creation_date": 1422415008, "last_edit_date": 1423036430, "question_id": 28184011, "link": "https://stackoverflow.com/questions/28184011/why-arent-instance-variables-defined-in-a-controllers-methods-available-in-the", "title": "Why aren&#39;t instance variables defined in a controller&#39;s methods available in the corresponding partials?", "body": "<p>For example, given a basic controller such as: </p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  def index\n    @post = Post.all\n  end\n</code></pre>\n\n<p>The instance variable <code>@post</code> is available in the view <code>posts/index.html.erb</code> but not the partial <code>posts/_index.html.erb</code></p>\n\n<p>My primary questions are: Why is this? and How can I define a method for a partial in a controller to for example, pass an instance variable?</p>\n\n<p>On a more specific note:\nI ask this because the way I am rendering data in a separate, primary view <code>welcome/index.html.erb</code> is via this posts partial. I have gotten around this limitation by directly calling the model with <code>Post.all</code> in the <code>posts/_index.html.erb</code> partial, but as far as I understand this ignores MVC architecture and severely limits me from developing more complex methods, unless I really break convention and write them into the view (which I assume may work but is poor design).</p>\n\n<p><strong>Currently, @post is passing a nil to the partial symbol :post in welcome/index.html.erb</strong></p>\n\n<p>Clearly I'm missing something, so any insight would be greatly appreciated!</p>\n\n<p>Thank you</p>\n\n<p>Relevant files:</p>\n\n<pre><code>views/\n  posts/\n    _index.html.erb\n    _new.html.erb\n    show.html.erb\n  welcome/\n    index.html.erb\n\ncontrollers/ \n  posts_controller.rb\n  welcome_controller.rb\n</code></pre>\n\n<p>posts/_index.html.erb</p>\n\n<pre><code>&lt;% post.reverse.each do |post| %&gt;\n  &lt;div class=\"panel panel-default\"&gt;\n    &lt;div class=\"panel-body\"&gt;\n      &lt;%= post.text %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>posts/_new.html.erb</p>\n\n<pre><code>&lt;%= form_for :post, url: posts_path do |f| %&gt;\n  &lt;p id=\"post_box\"&gt;\n    &lt;%= f.text_area :text %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>posts/show.html.erb</p>\n\n<pre><code>&lt;%= @post.text %&gt;\n</code></pre>\n\n<p>welcome/index.html.erb  relevant portions (partials)</p>\n\n<pre><code>&lt;%= render partial: \"posts/index\", locals: {post: @post} %&gt;\n&lt;%= render partial: \"posts/new\" %&gt;\n</code></pre>\n\n<p>controllers/posts_controller.rb</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n  def new\n  end\n\n  def create\n    @post = Post.new(post_params)\n\n    @post.save\n    redirect_to '/'\n  end\n\n  def show\n    @post = Post.find(params[:id])\n  end\n\n  def index\n    @post = Post.all\n  end\n\n  private\n    def post_params\n      params.require(:post).permit(:text)\n    end\n\nend\n</code></pre>\n\n<p>controllers/welcome_controller.rb</p>\n\n<pre><code>class WelcomeController &lt; ApplicationController\nend\n</code></pre>\n"}, {"tags": ["python", "ruby", "twitter", "elasticsearch", "logstash"], "comments": [{"owner": {"reputation": 10485, "user_id": 414355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8d6568a8877f85d0b734278e733be9?s=128&d=identicon&r=PG", "display_name": "Magnus B&#228;ck", "link": "https://stackoverflow.com/users/414355/magnus-b%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1422426721, "post_id": 28183358, "comment_id": 44740664, "body": "Plugins can&#39;t be written in Python. Are you aware of the <a href=\"http://logstash.net/docs/1.4.2/extending/\" rel=\"nofollow noreferrer\">Extending Logstash</a> part of the documentation and the specific example of <a href=\"http://logstash.net/docs/1.4.2/extending/example-add-a-new-filter\" rel=\"nofollow noreferrer\">adding a new filter</a>?"}, {"owner": {"reputation": 231, "user_id": 3055367, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d1bdd35ffa6785265f9ed7ea946b6d1?s=128&d=identicon&r=PG&f=1", "display_name": "huhahihi", "link": "https://stackoverflow.com/users/3055367/huhahihi"}, "reply_to_user": {"reputation": 10485, "user_id": 414355, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4e8d6568a8877f85d0b734278e733be9?s=128&d=identicon&r=PG", "display_name": "Magnus B&#228;ck", "link": "https://stackoverflow.com/users/414355/magnus-b%c3%a4ck"}, "edited": false, "score": 0, "creation_date": 1422435990, "post_id": 28183358, "comment_id": 44744722, "body": "I did have a look at both of those but I am not proficient in Ruby so wanted to ask if there was any way to do this in Python."}], "answers": [{"comments": [{"owner": {"reputation": 231, "user_id": 3055367, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d1bdd35ffa6785265f9ed7ea946b6d1?s=128&d=identicon&r=PG&f=1", "display_name": "huhahihi", "link": "https://stackoverflow.com/users/3055367/huhahihi"}, "edited": false, "score": 0, "creation_date": 1422435698, "post_id": 28183627, "comment_id": 44744567, "body": "Very cool. My algo wouldn&#39;t be complicated. Is there a limit as to how big/complicated this Ruby code in quotes can be?"}, {"owner": {"reputation": 231, "user_id": 3055367, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d1bdd35ffa6785265f9ed7ea946b6d1?s=128&d=identicon&r=PG&f=1", "display_name": "huhahihi", "link": "https://stackoverflow.com/users/3055367/huhahihi"}, "edited": false, "score": 0, "creation_date": 1422435840, "post_id": 28183627, "comment_id": 44744645, "body": "Also, what is this <code>add_field</code> I keep seeing in all filters?"}, {"owner": {"reputation": 7655, "user_id": 3086951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HePa0.jpg?s=128&g=1", "display_name": "Ben Lim", "link": "https://stackoverflow.com/users/3086951/ben-lim"}, "reply_to_user": {"reputation": 231, "user_id": 3055367, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d1bdd35ffa6785265f9ed7ea946b6d1?s=128&d=identicon&r=PG&f=1", "display_name": "huhahihi", "link": "https://stackoverflow.com/users/3055367/huhahihi"}, "edited": false, "score": 0, "creation_date": 1422492335, "post_id": 28183627, "comment_id": 44776092, "body": "Any algo can run in the ruby code if you can implement it in ruby. lol. It&#39;s not hard to learn ruby. You can try to implement your own algo. Beside, the  new field added can see in the following filter below the ruby filter. So, It you want the new_field can be see, you can put the ruby plugin to be the first filter."}], "tags": [], "owner": {"reputation": 7655, "user_id": 3086951, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HePa0.jpg?s=128&g=1", "display_name": "Ben Lim", "link": "https://stackoverflow.com/users/3086951/ben-lim"}, "is_accepted": false, "score": 2, "last_activity_date": 1422412310, "creation_date": 1422412310, "answer_id": 28183627, "question_id": 28183358, "link": "https://stackoverflow.com/questions/28183358/add-custom-field-to-logstash/28183627#28183627", "title": "Add custom field to logstash", "body": "<p>If your algorithm is not complicated, you can use <a href=\"http://logstash.net/docs/1.4.2/filters/ruby\" rel=\"nofollow\">Ruby</a> filter plugin to do your requirement.</p>\n\n<p>For example,</p>\n\n<pre><code>filter {\n    ruby {\n        code =&gt; \"\n            if event['type'] == 'tweet' \n                event['newfield'] = 'Come from Twitter'\n            end \n        \"\n    }\n}\n</code></pre>\n\n<p>This will add a field with name <code>newfield</code> and the value is <code>Come from Twitter</code></p>\n"}, {"comments": [{"owner": {"reputation": 231, "user_id": 3055367, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d1bdd35ffa6785265f9ed7ea946b6d1?s=128&d=identicon&r=PG&f=1", "display_name": "huhahihi", "link": "https://stackoverflow.com/users/3055367/huhahihi"}, "edited": false, "score": 0, "creation_date": 1425666500, "post_id": 28202766, "comment_id": 46069736, "body": "Any particular reason why you&#39;d suggest against using the Ruby plugin? (Sorry for coming back to this after a couple of months)"}, {"owner": {"reputation": 1661, "user_id": 4084601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f648f2b164cafff11f2db5fd5c4a0341?s=128&d=identicon&r=PG&f=1", "display_name": "volker", "link": "https://stackoverflow.com/users/4084601/volker"}, "reply_to_user": {"reputation": 231, "user_id": 3055367, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d1bdd35ffa6785265f9ed7ea946b6d1?s=128&d=identicon&r=PG&f=1", "display_name": "huhahihi", "link": "https://stackoverflow.com/users/3055367/huhahihi"}, "edited": false, "score": 0, "creation_date": 1425937601, "post_id": 28202766, "comment_id": 46158415, "body": "If it&#39;s already available as module, why should you use the core ruby version? There might not be a speed difference (don&#39;t know), but trusting the functions is higher as code. Modules also have sanity checks."}, {"owner": {"reputation": 231, "user_id": 3055367, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d1bdd35ffa6785265f9ed7ea946b6d1?s=128&d=identicon&r=PG&f=1", "display_name": "huhahihi", "link": "https://stackoverflow.com/users/3055367/huhahihi"}, "edited": false, "score": 0, "creation_date": 1426024525, "post_id": 28202766, "comment_id": 46200846, "body": "Thanks @volker. I tried using mutate but it didn&#39;t work :( I&#39;ve put up <a href=\"http://stackoverflow.com/questions/28916814/add-fields-to-logstash-twitter-input-and-elasticsearch-output\">another question</a>."}], "tags": [], "owner": {"reputation": 1661, "user_id": 4084601, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f648f2b164cafff11f2db5fd5c4a0341?s=128&d=identicon&r=PG&f=1", "display_name": "volker", "link": "https://stackoverflow.com/users/4084601/volker"}, "is_accepted": false, "score": 3, "last_activity_date": 1422480591, "creation_date": 1422480591, "answer_id": 28202766, "question_id": 28183358, "link": "https://stackoverflow.com/questions/28183358/add-custom-field-to-logstash/28202766#28202766", "title": "Add custom field to logstash", "body": "<p>I personal would not use the ruby code, but use the mutate plugin (<a href=\"http://logstash.net/docs/1.4.2/filters/mutate\" rel=\"nofollow\">http://logstash.net/docs/1.4.2/filters/mutate</a>)</p>\n\n<p>For the configuration you can also use the provided conditionals. Examples can be found here: <a href=\"http://logstash.net/docs/1.4.2/configuration#conditionals\" rel=\"nofollow\">http://logstash.net/docs/1.4.2/configuration#conditionals</a></p>\n\n<pre><code>if [type] == 'tweet' {\n    mutate {\n        add_field =&gt; { \"newfield\" =&gt; \"value can contain variables from the entire message\" }\n    }\n}\n</code></pre>\n"}], "owner": {"reputation": 231, "user_id": 3055367, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/2d1bdd35ffa6785265f9ed7ea946b6d1?s=128&d=identicon&r=PG&f=1", "display_name": "huhahihi", "link": "https://stackoverflow.com/users/3055367/huhahihi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3189, "favorite_count": 0, "closed_date": 1502650358, "answer_count": 2, "score": 0, "last_activity_date": 1422480591, "creation_date": 1422410117, "question_id": 28183358, "link": "https://stackoverflow.com/questions/28183358/add-custom-field-to-logstash", "closed_reason": "Not suitable for this site", "title": "Add custom field to logstash", "body": "<p>I am using the Twitter input and the Elasticsearch output to Logstash. In logstash I want to analyze the incoming tweet and add a new field based on some algorithm. I understand that I'd need to write a new plugin but the examples I've come across are all in Ruby. </p>\n\n<p>Is it possible to write the plugin in Python? If not, please share any good tutorials on how to write one in Ruby. </p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1422412837, "post_id": 28183330, "comment_id": 44736533, "body": "Have you looked at <a href=\"http://www.ruby-doc.org/core-2.2.0/IO.html#method-c-popen\" rel=\"nofollow noreferrer\">IO.popen</a>?"}, {"owner": {"reputation": 441, "user_id": 2845146, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1c883307818e9d7ad44e70fc063cbb78?s=128&d=identicon&r=PG&f=1", "display_name": "George Jor", "link": "https://stackoverflow.com/users/2845146/george-jor"}, "reply_to_user": {"reputation": 1963, "user_id": 4283486, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/cf28a77a0dd1c04faac5c2fdd6ccf661?s=128&d=identicon&r=PG&f=1", "display_name": "ihaztehcodez", "link": "https://stackoverflow.com/users/4283486/ihaztehcodez"}, "edited": false, "score": 0, "creation_date": 1422422460, "post_id": 28183330, "comment_id": 44739177, "body": "Yes, but how can i use it the way like: execute_command(:enter) to do so?"}], "owner": {"reputation": 441, "user_id": 2845146, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/1c883307818e9d7ad44e70fc063cbb78?s=128&d=identicon&r=PG&f=1", "display_name": "George Jor", "link": "https://stackoverflow.com/users/2845146/george-jor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1425923052, "creation_date": 1422409943, "last_edit_date": 1425923052, "question_id": 28183330, "link": "https://stackoverflow.com/questions/28183330/rspec-command-line-prompt-press-enter", "title": "Rspec command line prompt press enter", "body": "<p>I am using rspec to test command line prompt input's result, but seems there are very less topic about testing against it.</p>\n\n<p>Rspec:</p>\n\n<pre><code>it \"should prompt when no params entered\" do\n    execute_command(\"label\")\n</code></pre>\n\n<p>Terminal:</p>\n\n<pre><code>bundle exec rspec\n........................................Volume label (32 characters, ENTER for none)? \n</code></pre>\n\n<p>I therefore need to manually press enter in the command prompt.</p>\n\n<p>How can I do it by some functions like that:</p>\n\n<pre><code>execute_command(\"label\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "undefined", "stack-trace", "nested-attributes"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4496612"}, "edited": false, "score": 0, "creation_date": 1422420057, "post_id": 28183321, "comment_id": 44738459, "body": "Typpex, I think your code maybe incorrect. When you say &quot;Quantify&quot; do you mean &quot;Quantified?&quot; I tried what you wrote and also:    <code>@averaged_quantifieds = current_user.quantifieds.averaged    @instance_quantifieds = current_user.quantifieds.instance    @quantifieds = Quantified.all&#39;   &#39;          &lt;% @quantifieds.each do |quantified| %&gt;           &lt;% @quantifieds.results.each do |result| %&gt;             &lt;%= result.date_value.strftime(&quot;%m-%Y&quot;) %&gt;             &lt;%= result.result_value %&gt;         &lt;% end %&gt;         &lt;% end %&gt;</code>"}, {"owner": {"reputation": 446, "user_id": 4287029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XJAMb.png?s=128&g=1", "display_name": "Typpex", "link": "https://stackoverflow.com/users/4287029/typpex"}, "edited": false, "score": 0, "creation_date": 1422429196, "post_id": 28183321, "comment_id": 44741663, "body": "i apologize it seems i wrote too quickly but it is Quantified.all, i will update my answers."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4496612"}, "edited": false, "score": 0, "creation_date": 1422469796, "post_id": 28183321, "comment_id": 44765739, "body": "Sorry @Typpex still not working. I provided the whole index so that you can get a better idea. I think by only giving a snapshot of it I made the problem harder to solve. Sorry. And I added your code to the controller. Thks!"}, {"owner": {"reputation": 446, "user_id": 4287029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XJAMb.png?s=128&g=1", "display_name": "Typpex", "link": "https://stackoverflow.com/users/4287029/typpex"}, "edited": false, "score": 0, "creation_date": 1422495617, "post_id": 28183321, "comment_id": 44776889, "body": "From what i can see in your index view you haven&#39;t updated your code with the one i gave you in the answer for the view part. Can you update it and inform me if you still got an error ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4496612"}, "edited": false, "score": 0, "creation_date": 1422506277, "post_id": 28183321, "comment_id": 44779356, "body": "Typpex, I added your code above. With it I now get a different error: <code>undefined method </code>each&#39; for nil:NilClass` line #18 raised. I tried about 20 variations of what you put but still with no luck. I&#39;m like a monkey with a wrench."}, {"owner": {"reputation": 446, "user_id": 4287029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XJAMb.png?s=128&g=1", "display_name": "Typpex", "link": "https://stackoverflow.com/users/4287029/typpex"}, "edited": false, "score": 0, "creation_date": 1422516445, "post_id": 28183321, "comment_id": 44782904, "body": "This message means that Active Record could not find any records. Line 18 is &quot;quantified.each&quot; that means that quantified is nil that means &quot;quantifieds = Quantified.joins(:results).all&quot; is nil which mean there is not quantify containing results. For instance if you just use &quot;quantifieds = Quantify.all&quot; and you do have quantify in your database (regardless if they got or not any results) there should not be any issues."}], "tags": [], "owner": {"reputation": 446, "user_id": 4287029, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/XJAMb.png?s=128&g=1", "display_name": "Typpex", "link": "https://stackoverflow.com/users/4287029/typpex"}, "is_accepted": false, "score": 1, "last_activity_date": 1422429223, "last_edit_date": 1422429223, "creation_date": 1422409907, "answer_id": 28183321, "question_id": 28183052, "link": "https://stackoverflow.com/questions/28183052/undefined-method-for-activerecordrelation-nested-attributes/28183321#28183321", "title": "Undefined Method for ActiveRecord::Relation (Nested Attributes)", "body": "<pre><code>def index\n   @quantifieds = Result.order(\"date_value\").all\n   @averaged_quantifieds = current_user.quantifieds.averaged\n   @instance_quantifieds = current_user.quantifieds.instance\nend\n</code></pre>\n\n<p>Your instance variable @quantified is an array of results but you are using it like an array of qualified.\nYou should have written something along the line:</p>\n\n<pre><code>@quantifieds = Quantified.joins(:results).all\n</code></pre>\n\n<p>and then you can browse your quantified array such as:</p>\n\n<pre><code>@quantified.each do |quantify|\n   quantify.results.each do |result|\n      # Actual code\n   end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4496612"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1031, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1422506179, "creation_date": 1422407711, "last_edit_date": 1422506179, "question_id": 28183052, "link": "https://stackoverflow.com/questions/28183052/undefined-method-for-activerecordrelation-nested-attributes", "title": "Undefined Method for ActiveRecord::Relation (Nested Attributes)", "body": "<blockquote>\n  <p>undefined method `results' for Result::ActiveRecord_Relation:0x007f9ee69ad148></p>\n</blockquote>\n\n<p><strong>Quantifieds#Index</strong> </p>\n\n<p>The first line here is what causes the exception.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>          &lt;% @quantifieds.results.each do |result| %&gt;\r\n            &lt;%= result.date_value.strftime(\"%m-%Y\") %&gt;\r\n            &lt;%= result.result_value %&gt;\r\n          &lt;% end %&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>To restate the question, how do I define date_value &amp; result_value so it works in the quantifieds index? They are derived from :results in the _form. I am using <strong><a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow\">cocoon</a></strong> to create the nested attributes.</p>\n\n<p><strong>Entire Index</strong> (Updated According to First Answer Response)</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;!-- Default bootstrap panel contents --&gt;\r\n\r\n&lt;div id=\"values\" class=\"panel panel-default\"&gt;\r\n  \r\n  &lt;div class=\"panel-heading\"&gt;&lt;h4&gt;&lt;b&gt;AVERAGE&lt;/b&gt;&lt;/h4&gt;&lt;/div&gt;\r\n\r\n  &lt;!-- Table --&gt;\r\n&lt;table&gt;\r\n  &lt;% @averaged_quantifieds.each do |averaged| %&gt;\r\n    &lt;% if averaged.user == current_user %&gt;\r\n        &lt;th class=\"value\"&gt;\r\n          &lt;%= link_to edit_quantified_path(averaged) do %&gt;\r\n          &lt;%= averaged.name %&gt;\r\n          &lt;% end %&gt;\r\n          (&lt;%= averaged.metric %&gt;)\r\n        &lt;/th&gt;     \r\n      &lt;tbody class=\"value\"&gt;\r\n        &lt;% @quantified.each do |quantify| %&gt;\r\n        &lt;% quantify.results.each do |result| %&gt;\r\n            &lt;%= result.date_value.strftime(\"%m-%Y\") %&gt;\r\n            &lt;%= result.result_value %&gt;\r\n        &lt;% end %&gt;\r\n        &lt;% end %&gt;\r\n      &lt;/tbody&gt;\r\n    &lt;% end %&gt;\r\n  &lt;% end %&gt; \r\n&lt;/table&gt;\r\n&lt;/div&gt;\r\n\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n&lt;br&gt;\r\n\r\n&lt;!-- Default bootstrap panel contents --&gt;\r\n&lt;div id=\"values\" class=\"panel panel-default\"&gt;\r\n  \r\n  &lt;div class=\"panel-heading\"&gt;&lt;h4&gt;&lt;b&gt;INSTANCE&lt;/b&gt;&lt;/h4&gt;&lt;/div&gt;\r\n\r\n  &lt;!-- Table --&gt;\r\n&lt;table&gt;\r\n  &lt;% @instance_quantifieds.each do |instance| %&gt;\r\n    &lt;% if instance.user == current_user %&gt;\r\n        &lt;th class=\"value\"&gt;\r\n          &lt;%= link_to edit_quantified_path(instance) do %&gt;\r\n          &lt;%= instance.name %&gt;\r\n          &lt;% end %&gt;\r\n          (&lt;%= instance.metric %&gt;)\r\n        &lt;/th&gt;\r\n      &lt;tbody class=\"value\"&gt; \r\n        &lt;% @quantified.each do |quantify| %&gt;\r\n        &lt;% quantify.results.each do |result| %&gt;\r\n            &lt;%= result.date_value.strftime(\"%m-%Y\") %&gt;\r\n            &lt;%= result.result_value %&gt;\r\n        &lt;% end %&gt;\r\n        &lt;% end %&gt;\r\n      &lt;/tbody&gt;\r\n    &lt;% end %&gt;\r\n    &lt;% end %&gt;\r\n&lt;/table&gt;\r\n&lt;/div&gt;\r\n\r\n  &lt;div class=\"values-button\"&gt;\r\n  &lt;%= link_to new_quantified_path, class: 'btn'  do %&gt;\r\n  &lt;b&gt;&lt;span class=\"glyphicon glyphicon-plus\"&lt;/span&gt;&lt;/b&gt;\r\n  &lt;% end %&gt;\r\n  &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;%= form_for @quantified do |f| %&gt;\n      &lt;%= f.select :categories, Quantified::CATEGORIES %&gt;\n        &lt;%= f.text_field :name,  class: 'form-control', placeholder: 'Enter Name' %&gt;\n        &lt;%= f.text_field :metric,  class: 'form-control', placeholder: 'Enter Metric' %&gt;\n      &lt;%= f.fields_for :results do |result| %&gt;\n      &lt;%= render 'result_fields', :f =&gt; result %&gt;\n      &lt;% end %&gt;\n      &lt;%= link_to_add_association 'add result', f, :results %&gt;\n\n    &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;div class=\"nested-fields\"&gt;\n    &lt;%= f.text_field :result_value, class: 'form-control', placeholder: 'Enter Result' %&gt;\n    &lt;%= f.date_select :date_value, :order =&gt; [:month, :year], class: 'date-select' %&gt;\n    &lt;%= link_to_remove_association \"Remove Result\", f %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Do I need to alter anything in the controller?</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>class QuantifiedsController &lt; ApplicationController\n  before_action :set_quantified, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n  def index\n   @quantifieds = Quantified.joins(:results).all\n   @averaged_quantifieds = current_user.quantifieds.averaged\n   @instance_quantifieds = current_user.quantifieds.instance\n  end\n\n  def show\n  end\n\n  def new\n    @quantified = current_user.quantifieds.build\n  end\n\n  def edit\n  end\n\n  def create\n    @quantified = current_user.quantifieds.build(quantified_params)\n    if @quantified.save\n      redirect_to quantifieds_url, notice: 'Quantified was successfully created'\n    else\n      render action: 'new'\n  end\nend\n\n  def update\n    if @quantified.update(quantified_params)\n      redirect_to quantifieds_url, notice: 'Goal was successfully updated'\n    else\n      render action: 'edit'\n  end\nend\n\n  def destroy\n    @quantified.destroy\n    redirect_to quantifieds_url\n  end\n\n  private\n    def set_quantified\n      @quantified = Quantified.find(params[:id])\n    end\n\n    def correct_user\n      @quantified = current_user.quantifieds.find_by(id: params[:id])\n      redirect_to quantifieds_path, notice: \"Not authorized to edit this goal\" if @quantified.nil?\n    end\n\n    def quantified_params\n      params.require(:quantified).permit(:categories, :name, :metric, :result, :date, results_attributes: [:id, :result_value, :date_value, :_destroy])\n    end\nend\n</code></pre>\n\n<p><strong>Thanks in advance for your help. It will be enormously appreciated!</strong></p>\n\n<p>EXTRA CODE - EXTRA CODE - EXTRA CODE - EXTRA CODE - EXTRA CODE - EXTRA CODE\n<em>This is code I don't think you need to solve the question.</em></p>\n\n<p><strong>schema.rb</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>ActiveRecord::Schema.define(version: 20150123210404) do\n\n  create_table \"quantifieds\", force: true do |t|\n    t.string   \"categories\"\n    t.string   \"name\"\n    t.string   \"metric\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer  \"user_id\"\n  end\n\n  add_index \"quantifieds\", [\"categories\"], name: \"index_quantifieds_on_categories\"\n  add_index \"quantifieds\", [\"user_id\"], name: \"index_quantifieds_on_user_id\"\n\n  create_table \"results\", force: true do |t|\n    t.string   \"result_value\"\n    t.date     \"date_value\"\n    t.integer  \"quantified_id\"\n    t.datetime \"created_at\",    null: false\n    t.datetime \"updated_at\",    null: false\n    t.integer  \"user_id\"\n  end\n\n  add_index \"results\", [\"date_value\"], name: \"index_results_on_date_value\"\n  add_index \"results\", [\"user_id\"], name: \"index_results_on_user_id\"\n\n  create_table \"users\", force: true do |t|\n    t.string   \"email\",                  default: \"\", null: false\n    t.string   \"encrypted_password\",     default: \"\", null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,  null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.string   \"name\"\n  end\n\n  add_index \"users\", [\"email\"], name: \"index_users_on_email\", unique: true\n  add_index \"users\", [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n</code></pre>\n\n<p><strong>_create_results.rb</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>class CreateResults &lt; ActiveRecord::Migration\n  def change\n    create_table :results do |t|\n      t.string :result_value\n      t.date :date_value\n      t.belongs_to :quantified, index: true\n\n      t.timestamps null: false\n    end\n    add_foreign_key :results, :quantifieds\n  end\nend\n</code></pre>\n\n<p><strong>_add_user_id_to_results.rb</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>class AddUserIdToResults &lt; ActiveRecord::Migration\n  def change\n    add_column :results, :user_id, :integer\n    add_index :results, :user_id\n  end\nend\n</code></pre>\n\n<p><strong>quantified.rb</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>class Quantified &lt; ActiveRecord::Base\n    belongs_to :user\n    scope :averaged,  -&gt; { where(categories: 'averaged') }\n    scope :instance,  -&gt; { where(categories: 'instance') }\n    has_many :results\n    accepts_nested_attributes_for :results, :reject_if =&gt; :all_blank, :allow_destroy =&gt; true\n\n    CATEGORIES = ['averaged', 'instance']\n\nend\n</code></pre>\n\n<p><strong>result.rb</strong></p>\n\n<pre class=\"lang-html prettyprint-override\"><code>class Result &lt; ActiveRecord::Base\n    belongs_to :user\n  belongs_to :quantified\nend\n</code></pre>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>activerecord (4.2.0.rc3) lib/active_record/relation/delegation.rb:136:in `method_missing'\r\nactiverecord (4.2.0.rc3) lib/active_record/relation/delegation.rb:99:in `method_missing'\r\napp/views/quantifieds/index.html.erb:18:in `block in _app_views_quantifieds_index_html_erb__3823335262543476951_70160225385540'\r\nactiverecord (4.2.0.rc3) lib/active_record/relation/delegation.rb:46:in `each'\r\nactiverecord (4.2.0.rc3) lib/active_record/relation/delegation.rb:46:in `each'\r\napp/views/quantifieds/index.html.erb:9:in `_app_views_quantifieds_index_html_erb__3823335262543476951_70160225385540'\r\nactionview (4.2.0.rc3) lib/action_view/template.rb:145:in `block in render'\r\nactivesupport (4.2.0.rc3) lib/active_support/notifications.rb:166:in `instrument'\r\nactionview (4.2.0.rc3) lib/action_view/template.rb:333:in `instrument'\r\nactionview (4.2.0.rc3) lib/action_view/template.rb:143:in `render'\r\nactionview (4.2.0.rc3) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'\r\nactionview (4.2.0.rc3) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'\r\nactivesupport (4.2.0.rc3) lib/active_support/notifications.rb:164:in `block in instrument'\r\nactivesupport (4.2.0.rc3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\r\nactivesupport (4.2.0.rc3) lib/active_support/notifications.rb:164:in `instrument'\r\nactionview (4.2.0.rc3) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'\r\nactionview (4.2.0.rc3) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'\r\nactionview (4.2.0.rc3) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'\r\nactionview (4.2.0.rc3) lib/action_view/renderer/template_renderer.rb:52:in `render_template'\r\nactionview (4.2.0.rc3) lib/action_view/renderer/template_renderer.rb:14:in `render'\r\nactionview (4.2.0.rc3) lib/action_view/renderer/renderer.rb:42:in `render_template'\r\nactionview (4.2.0.rc3) lib/action_view/renderer/renderer.rb:23:in `render'\r\nactionview (4.2.0.rc3) lib/action_view/rendering.rb:100:in `_render_template'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/streaming.rb:217:in `_render_template'\r\nactionview (4.2.0.rc3) lib/action_view/rendering.rb:83:in `render_to_body'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/rendering.rb:32:in `render_to_body'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/renderers.rb:37:in `render_to_body'\r\nactionpack (4.2.0.rc3) lib/abstract_controller/rendering.rb:25:in `render'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/rendering.rb:16:in `render'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/instrumentation.rb:41:in `block (2 levels) in render'\r\nactivesupport (4.2.0.rc3) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'\r\n/Users/galli01anthony/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/benchmark.rb:294:in `realtime'\r\nactivesupport (4.2.0.rc3) lib/active_support/core_ext/benchmark.rb:12:in `ms'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/instrumentation.rb:41:in `block in render'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/instrumentation.rb:84:in `cleanup_view_runtime'\r\nactiverecord (4.2.0.rc3) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/instrumentation.rb:40:in `render'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/implicit_render.rb:10:in `default_render'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/implicit_render.rb:5:in `send_action'\r\nactionpack (4.2.0.rc3) lib/abstract_controller/base.rb:198:in `process_action'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/rendering.rb:10:in `process_action'\r\nactionpack (4.2.0.rc3) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:117:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:117:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:151:in `block in halting_and_conditional'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:151:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:151:in `block in halting_and_conditional'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:151:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:151:in `block in halting_and_conditional'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:234:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:234:in `block in halting'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:234:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:234:in `block in halting'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:169:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:169:in `block in halting'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:169:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:169:in `block in halting'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:169:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:169:in `block in halting'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:92:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:92:in `_run_callbacks'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:734:in `_run_process_action_callbacks'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:81:in `run_callbacks'\r\nactionpack (4.2.0.rc3) lib/abstract_controller/callbacks.rb:19:in `process_action'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/rescue.rb:29:in `process_action'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\r\nactivesupport (4.2.0.rc3) lib/active_support/notifications.rb:164:in `block in instrument'\r\nactivesupport (4.2.0.rc3) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\r\nactivesupport (4.2.0.rc3) lib/active_support/notifications.rb:164:in `instrument'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\r\nactiverecord (4.2.0.rc3) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\r\nactionpack (4.2.0.rc3) lib/abstract_controller/base.rb:137:in `process'\r\nactionview (4.2.0.rc3) lib/action_view/rendering.rb:30:in `process'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal.rb:195:in `dispatch'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\r\nactionpack (4.2.0.rc3) lib/action_controller/metal.rb:236:in `block in action'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/routing/route_set.rb:73:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/routing/route_set.rb:42:in `serve'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/journey/router.rb:43:in `block in serve'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/journey/router.rb:30:in `each'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/journey/router.rb:30:in `serve'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/routing/route_set.rb:802:in `call'\r\nwarden (1.2.3) lib/warden/manager.rb:35:in `block in call'\r\nwarden (1.2.3) lib/warden/manager.rb:34:in `catch'\r\nwarden (1.2.3) lib/warden/manager.rb:34:in `call'\r\nrack (1.6.0) lib/rack/etag.rb:24:in `call'\r\nrack (1.6.0) lib/rack/conditionalget.rb:25:in `call'\r\nrack (1.6.0) lib/rack/head.rb:13:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/flash.rb:260:in `call'\r\nrack (1.6.0) lib/rack/session/abstract/id.rb:225:in `context'\r\nrack (1.6.0) lib/rack/session/abstract/id.rb:220:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/cookies.rb:560:in `call'\r\nactiverecord (4.2.0.rc3) lib/active_record/query_cache.rb:36:in `call'\r\nactiverecord (4.2.0.rc3) lib/active_record/connection_adapters/abstract/connection_pool.rb:647:in `call'\r\nactiverecord (4.2.0.rc3) lib/active_record/migration.rb:378:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:88:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:88:in `_run_callbacks'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:734:in `_run_call_callbacks'\r\nactivesupport (4.2.0.rc3) lib/active_support/callbacks.rb:81:in `run_callbacks'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/reloader.rb:73:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\r\nrailties (4.2.0.rc3) lib/rails/rack/logger.rb:38:in `call_app'\r\nrailties (4.2.0.rc3) lib/rails/rack/logger.rb:20:in `block in call'\r\nactivesupport (4.2.0.rc3) lib/active_support/tagged_logging.rb:68:in `block in tagged'\r\nactivesupport (4.2.0.rc3) lib/active_support/tagged_logging.rb:26:in `tagged'\r\nactivesupport (4.2.0.rc3) lib/active_support/tagged_logging.rb:68:in `tagged'\r\nrailties (4.2.0.rc3) lib/rails/rack/logger.rb:20:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/request_id.rb:21:in `call'\r\nrack (1.6.0) lib/rack/methodoverride.rb:22:in `call'\r\nrack (1.6.0) lib/rack/runtime.rb:18:in `call'\r\nactivesupport (4.2.0.rc3) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\r\nrack (1.6.0) lib/rack/lock.rb:17:in `call'\r\nactionpack (4.2.0.rc3) lib/action_dispatch/middleware/static.rb:113:in `call'\r\nrack (1.6.0) lib/rack/sendfile.rb:113:in `call'\r\nrailties (4.2.0.rc3) lib/rails/engine.rb:518:in `call'\r\nrailties (4.2.0.rc3) lib/rails/application.rb:164:in `call'\r\nrack (1.6.0) lib/rack/lock.rb:17:in `call'\r\nrack (1.6.0) lib/rack/content_length.rb:15:in `call'\r\nrack (1.6.0) lib/rack/handler/webrick.rb:89:in `service'\r\n/Users/galli01anthony/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'\r\n/Users/galli01anthony/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'\r\n/Users/galli01anthony/.rvm/rubies/ruby-2.1.3/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "algorithm", "numbers", "range"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1422411009, "post_id": 28182960, "comment_id": 44736110, "body": "Suppose the range was <code>1..100_000</code> and you were matching with <code>&quot;33&quot;</code>. For  <code>3333.to_s</code>, would you add <code>1</code>, <code>2</code> or <code>3</code> to the total number of matches?"}, {"owner": {"reputation": 45, "user_id": 4487180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46ea4f5568b4eb3d58b6d30d62a1545?s=128&d=identicon&r=PG&f=1", "display_name": "soleh udin", "link": "https://stackoverflow.com/users/4487180/soleh-udin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1422414949, "post_id": 28182960, "comment_id": 44737087, "body": "no, i&#39;m just want to counting all number containt include 14, example :   1). (1..100) have 1 containt =&gt; [14]  2). (1..1000) have 20 containt =&gt; [14, 114, 140, 141, 142, 143, 144, 145, 146, 147,148, 149, 214, 314, 414, 514, 614, 714, 814, 914] 3. etc ..."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1431843356, "last_edit_date": 1431843356, "creation_date": 1422500552, "answer_id": 28206327, "question_id": 28182960, "link": "https://stackoverflow.com/questions/28182960/counting-same-containt-number-from-range-number-without-loop-in-ruby/28206327#28206327", "title": "Counting same containt number from range number without loop in ruby", "body": "<p>Consider the range:</p>\n\n<pre><code>def str_range(n)\n  \"1\"..(10**n).to_s\nend\n</code></pre>\n\n<p>I will address the problem of finding the number of strings within the range that contain the string <code>\"14\"</code> (one or more times).<sup>1</sup> A straightforward way is:</p>\n\n<pre><code>def nbr_14s_brute_force(n)\n  str_range(n).count { |s| s[/14/] }\nend\n\nnbr_14s_brute_force(2) #=&gt;     1\nnbr_14s_brute_force(3) #=&gt;    20\nnbr_14s_brute_force(4) #=&gt;   299\nnbr_14s_brute_force(5) #=&gt;  3970 \nnbr_14s_brute_force(6) #=&gt; 49401 \n</code></pre>\n\n<p>Now let's look for a way that's more efficient, borrowing from discrete probability theory.</p>\n\n<p>Suppose <code>n = 2</code>. Then:</p>\n\n<pre><code>str_range(2) #=&gt; \"1\"..\"100\"\n</code></pre>\n\n<p>Since <code>\"14\"</code> only appears once in the range <code>\"1\"..\"100\"</code>, there is only one (string) element of the range that contains <code>\"14\"</code>.</p>\n\n<p>Now let <code>cnt_first(n,i)</code> equal the number of elements of <code>str_range(2)</code> which do <em>not</em> contain <code>\"14\"</code> when the ten's digit equals <code>\"i\"</code>:</p>\n\n<pre><code>cnt_first(2,1) # =&gt; 9\ncnt_first(2,i) # =&gt; 10\n</code></pre>\n\n<p>for <code>0 &lt;= i &lt;= 9, i != 4</code>.</p>\n\n<p>Further, let <code>cnt(2)</code> denote the number of strings in the range <code>str_range(2)</code> that do not contain <code>\"14\"</code>. We have:</p>\n\n<pre><code>cnt(2) = (0..9).reduce { |i| cnt_first(2,i) }\n  #=&gt; 99\n</code></pre>\n\n<p>It follows that the number of strings that do contain <code>\"14\"</code> equals <code>100 - cnt(2) #=&gt; 1</code>.</p>\n\n<p>Now consider <code>n #=&gt; 3</code>, where:</p>\n\n<pre><code>str_range(3)\n  #=&gt; \"1\"..\"1000\"\n</code></pre>\n\n<p>Of the 1,000 elements in this range, how many elements do <em>not</em> contain the string <code>\"14\"</code>?</p>\n\n<p>We can immediately eliminate <code>\"1000\"</code> since <code>\"14\"</code> does not have a zero in the unit's position, so we need only consider the range <code>\"1\"..\"999\"</code>.</p>\n\n<p>Suppose the digit in the first (hundred's) position is <code>1</code>. Then strings that do not contain <code>\"14\"</code> must contain a character other than <code>\"4\"</code> in the ten's column. Therefore, the number of two-digit strings beginning with <code>\"1\"</code> that do not contain <code>\"14\"</code> equals:</p>\n\n<pre><code>cnt_first(3,1) = cnt_first(2,0) + cnt_first(2,1) + cnt_first(2,2) +\n                 cnt_first(2,3) + cnt_first(2,5) + cnt_first(2,6) +\n                 cnt_first(2,7) + cnt_first(2,8) + cnt_first(2,9)  \n\n               = (0..9).reduce { |i| cnt_first(2,i) } - cnt_first(2,4)\n  #=&gt; cnt(2) - cnt_first(2,4)\n  # =&gt; 99 - 10 =&gt; 89\n</code></pre>\n\n<p>Now suppose the hundred's digit (<code>i</code>) does not equal <code>1</code>. Then:</p>\n\n<pre><code>cnt_first(3,i) = (0..9).reduce { |i| cnt_first(2,i) }\n  # =&gt; cnt(2) =&gt; 99\n</code></pre>\n\n<p>so</p>\n\n<pre><code>cnt(3) = 10 * cnt(2) - cnt_first(2,4)\n  #=&gt; 10 * 99 - 10 =&gt; 980\n</code></pre>\n\n<p>meaning that there are <code>1000 - 980 #=&gt; 20</code> numbers in the range <code>\"1\"-\"1000\"</code> that do not contain <code>\"14\"</code>. This is confirmed by the earlier \"brute force\" calculation.</p>\n\n<p>It is seen that the steps for calculating <code>cnt(4)</code> are the same as for calculating <code>cnt(3)</code>.</p>\n\n<p>For <code>i = 1</code>:</p>\n\n<pre><code>cnt_first(4,1) = cnt(3) - cnt_first(3,4)\n</code></pre>\n\n<p>For <code>i != 1</code>:</p>\n\n<pre><code>cnt_first(4,i) = cnt(3) =&gt; 980\n</code></pre>\n\n<p>so</p>\n\n<pre><code>cnt(4) = 10 * cnt(3) - cnt_first(3,4)\n  #=&gt; 10 * 980 - 99 =&gt; 9800 - 9701\n</code></pre>\n\n<p>so for <code>n =&gt; 4</code> there <code>10000 - 9701 #=&gt; 299</code> strings that do not contain <code>\"14\"</code>, which again is confirmed by the earlier calculation.  </p>\n\n<p>If the reader is not convinced, this can be easily proved by induction.</p>\n\n<p>A simple recursive method can be used to compute the desired result:</p>\n\n<pre><code>def nbr_14s_smart(n)\n  10**n - recurse(n).first\nend\n\ndef recurse(n)\n  if n == 2\n    puts \"2: 1\"\n    [99, 10]\n  else \n    cnt, cnt4 = recurse(n-1)\n    new_cnt, new_cnt4 = 10 * cnt - cnt4, cnt\n    puts \"#{ n }: #{ 10**n - new_cnt }\"\n    [new_cnt, new_cnt4]\n  end\nend\n\nnbr_14s_smart(10)\n  #  2: 1\n  #  3: 20\n  #  4: 299\n  #  5: 3970\n  #  6: 49401\n  #  7: 590040\n  #  8: 6850999\n  #  9: 77919950\n  # 10: 872348501\n  #=&gt; 872348501 \n</code></pre>\n\n<p><pre><sup><sup>1</sup>Only minor modifications are required to replace \"14\" with the string representation of an\narbitrary two-digit number, but the exposition is easier to follow by hardwiring the string.</pre></sup></p>\n"}], "owner": {"reputation": 45, "user_id": 4487180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f46ea4f5568b4eb3d58b6d30d62a1545?s=128&d=identicon&r=PG&f=1", "display_name": "soleh udin", "link": "https://stackoverflow.com/users/4487180/soleh-udin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 229, "favorite_count": 1, "accepted_answer_id": 28206327, "answer_count": 1, "score": 2, "last_activity_date": 1431843356, "creation_date": 1422407074, "last_edit_date": 1422416591, "question_id": 28182960, "link": "https://stackoverflow.com/questions/28182960/counting-same-containt-number-from-range-number-without-loop-in-ruby", "title": "Counting same containt number from range number without loop in ruby", "body": "<p>Example: if I have range of numbers from <code>1..100</code> and I want to count all numbers which contain 14, I would use:</p>\n\n<pre><code>total = 0\n\n(1..100).each do |x|\n if x.to_s.include?(\"14\")\n   total += 1\n end\nend\n\nputs \"total : #{total}\"\n</code></pre>\n\n<p>this code works, but how to do this if range of numbers is too long like <code>(1..1000000000)</code> or more. Of course this needs long time for calculating total. My question is how to count number with same contain without loop? because in my case I need faster way to get total.</p>\n"}, {"tags": ["ruby", "gem", "lita"], "answers": [{"comments": [{"owner": {"reputation": 922, "user_id": 2152623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7852ad15ff5af01778c90e800a0e0c7e?s=128&d=identicon&r=PG", "display_name": "cashman04", "link": "https://stackoverflow.com/users/2152623/cashman04"}, "edited": false, "score": 0, "creation_date": 1422413588, "post_id": 28183001, "comment_id": 44736719, "body": "Ok. I had tested that at one point, but I think I had the &gt;= &quot;1.0&quot; after. I was just guessing at that point. Testing it now though."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 5, "last_activity_date": 1422407336, "creation_date": 1422407336, "answer_id": 28183001, "question_id": 28182858, "link": "https://stackoverflow.com/questions/28182858/how-to-add-gem-dependency-to-my-ruby-gem/28183001#28183001", "title": "How to add gem dependency to my ruby gem", "body": "<p>Put the following line into your <code>lita-directions.gemspec</code> right next to the one that defines the dependency on lita:</p>\n\n<pre><code>spec.add_runtime_dependency 'rest-client'\n</code></pre>\n"}], "owner": {"reputation": 922, "user_id": 2152623, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/7852ad15ff5af01778c90e800a0e0c7e?s=128&d=identicon&r=PG", "display_name": "cashman04", "link": "https://stackoverflow.com/users/2152623/cashman04"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1972, "favorite_count": 0, "accepted_answer_id": 28183001, "answer_count": 1, "score": 5, "last_activity_date": 1425352509, "creation_date": 1422406411, "last_edit_date": 1425352509, "question_id": 28182858, "link": "https://stackoverflow.com/questions/28182858/how-to-add-gem-dependency-to-my-ruby-gem", "title": "How to add gem dependency to my ruby gem", "body": "<p>I think I am fundamentally missing something. I am learning ruby, and have been playing with Lita lately, and wrote(my first) a simple little gem to get some directions/distance from the bot.  The problem I am having is where to put a gem dependency in my gem.  To work, my gem requires the 'rest-client' gem.   Where do I put this in my code so that it is available to my Directions class?  Currently, to get it to run, I am requiring the gem in my bots actual gemfile. And when I bundle exec lita, it apparently becomes available for my gem to use... but if I remove it from there, I can't get it to work anywhere in my gem.. what am I missing?  It is here if anyone wants to read the code and tell me where I should be adding it: </p>\n\n<p><a href=\"https://github.com/cashman04/lita-directions\" rel=\"noreferrer\">https://github.com/cashman04/lita-directions</a></p>\n\n<p>EDIT:\nI added the dependency like spickermann suggested. Then had to add require 'rest-client'to my directions.rb. Not entirely sure if this is the correct way, but it works now.  Thanks for the help spickermann</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 33893, "user_id": 498256, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/Pn7lt.jpg?s=128&g=1", "display_name": "BMW", "link": "https://stackoverflow.com/users/498256/bmw"}, "is_accepted": true, "score": 4, "last_activity_date": 1422412131, "creation_date": 1422412131, "answer_id": 28183598, "question_id": 28182837, "link": "https://stackoverflow.com/questions/28182837/ruby-listing-files-in-a-tar-gz-archive/28183598#28183598", "title": "Ruby - Listing files in a tar.gz archive", "body": "<pre><code>require 'rubygems/package'\nrequire 'zlib'\ntar_extract = Gem::Package::TarReader.new(Zlib::GzipReader.open('archive.tar.gz'))\ntar_extract.rewind # The extract has to be rewinded after every iteration\ntar_extract.each do |entry|\n   if entry.file?\n       puts entry.full_name\n   end\nend\ntar_extract.close\n</code></pre>\n"}], "owner": {"reputation": 1072, "user_id": 2840647, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/bbc7740efb4b280be4485f2f7c6c5742?s=128&d=identicon&r=PG&f=1", "display_name": "user2840647", "link": "https://stackoverflow.com/users/2840647/user2840647"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 529, "favorite_count": 0, "accepted_answer_id": 28183598, "answer_count": 1, "score": 3, "last_activity_date": 1422412131, "creation_date": 1422406297, "question_id": 28182837, "link": "https://stackoverflow.com/questions/28182837/ruby-listing-files-in-a-tar-gz-archive", "title": "Ruby - Listing files in a tar.gz archive", "body": "<p>I need to list the files in a .tar.gz archive, without uncompressing the archive.  I looked into the zlib library, but I could not find a way to list the files, only show the contents of the file.</p>\n\n<p>How can I list only the files in the archive?</p>\n\n<p>This is the code I have:</p>\n\n<pre><code>require 'zlib'\n\nZlib::GzipReader.open(\"archive.tar.gz\") do |entry|\n  entry.each { |e| # what's the method? }\nend\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "cookbook"], "comments": [{"owner": {"reputation": 3973, "user_id": 4070979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5a40b217933f720d09ae107a2b6d66cb?s=128&d=identicon&r=PG&f=1", "display_name": "Tejay Cardon", "link": "https://stackoverflow.com/users/4070979/tejay-cardon"}, "edited": false, "score": 0, "creation_date": 1422411746, "post_id": 28182721, "comment_id": 44736292, "body": "sorry, maybe it&#39;s just late and I&#39;m not thinking clear.  Can you give us a short sample of the starting file, the expected end state, and the endstate you are actually getting?  Thanks."}, {"owner": {"reputation": 602, "user_id": 374386, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/148bc1c7c1937c3bf189a195f4531275?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/374386/david"}, "reply_to_user": {"reputation": 3973, "user_id": 4070979, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/5a40b217933f720d09ae107a2b6d66cb?s=128&d=identicon&r=PG&f=1", "display_name": "Tejay Cardon", "link": "https://stackoverflow.com/users/4070979/tejay-cardon"}, "edited": false, "score": 0, "creation_date": 1422412149, "post_id": 28182721, "comment_id": 44736377, "body": "I added the endstate and what I&#39;m actually getting."}], "answers": [{"comments": [{"owner": {"reputation": 602, "user_id": 374386, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/148bc1c7c1937c3bf189a195f4531275?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/374386/david"}, "edited": false, "score": 0, "creation_date": 1422458691, "post_id": 28188866, "comment_id": 44758515, "body": "yes it makes complete sense! do you know if there is a way I can accomplish the desired results?"}, {"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "reply_to_user": {"reputation": 602, "user_id": 374386, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/148bc1c7c1937c3bf189a195f4531275?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/374386/david"}, "edited": false, "score": 0, "creation_date": 1422458882, "post_id": 28188866, "comment_id": 44758674, "body": "I would use two ruby_block ... or maybe call the <code>file.write_file</code>, and reopen the file between the two operations. Poke @coderanger as he may have a better way (he&#39;s better than me when playing with inner chef code and advanced ruby)"}], "tags": [], "owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "is_accepted": false, "score": 1, "last_activity_date": 1422437934, "creation_date": 1422437934, "answer_id": 28188866, "question_id": 28182721, "link": "https://stackoverflow.com/questions/28182721/is-it-possible-to-edit-the-same-line-twice-in-the-same-ruby-block-using-2-calls/28188866#28188866", "title": "is it possible to edit the same line twice in the same ruby_block using 2 calls to FileEdit? [Chef]", "body": "<p>FileEdit works with line as an array, I'll try to give insight on what is done in your code</p>\n\n<pre><code>file.insert_line_if_no_match(/^11$/, \"#this is a comment\\n#11\")\n</code></pre>\n\n<p>Looking at the code this line will add one entry to the array (with a carriage return inside, but it's still one entry)\n<a href=\"https://github.com/chef/chef/blob/master/lib/chef/util/editor.rb\" rel=\"nofollow\">Code here</a> in method <code>append_line_if_missing</code></p>\n\n<pre><code>file.search_file_replace_line(/^#11$/, \"11\")\n</code></pre>\n\n<p>This method will replace the entry if it match <a href=\"https://github.com/chef/chef/blob/master/lib/chef/util/editor.rb\" rel=\"nofollow\">Code here</a> in method <code>replace_lines</code> </p>\n\n<p>What's not obvious here is that your regex with start and end anchors match because of the <code>\\n</code> but it's the whole array entry which is replaced by the new text and not only the line.</p>\n\n<p>Not sure I'm really clear on my explanation, but hope it give some light.</p>\n"}], "owner": {"reputation": 602, "user_id": 374386, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/148bc1c7c1937c3bf189a195f4531275?s=128&d=identicon&r=PG", "display_name": "david", "link": "https://stackoverflow.com/users/374386/david"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 792, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1422437934, "creation_date": 1422405559, "last_edit_date": 1422412369, "question_id": 28182721, "link": "https://stackoverflow.com/questions/28182721/is-it-possible-to-edit-the-same-line-twice-in-the-same-ruby-block-using-2-calls", "title": "is it possible to edit the same line twice in the same ruby_block using 2 calls to FileEdit? [Chef]", "body": "<p>Hi this is what I'm trying to do:</p>\n\n<pre><code>ruby_block \"modify line\" do\n  block do\n    file= Chef::Util::FileEdit.new(\"/someExistingFile.txt\")\n    file.insert_line_if_no_match(/^11$/, \"#this is a comment\\n#11\")\n    file.search_file_replace_line(/^#11$/, \"11\")\n    file.write_file\n  end\nend\n</code></pre>\n\n<p>After applying the cookbook it adds '11' but I don't see the '#this is a comment' line.</p>\n\n<p>is it possible to run this two lines consecutively?</p>\n\n<pre><code>file.insert_line_if_no_match(/^11$/, \"#this is a comment\\n#11\")\nfile.search_file_replace_line(/^#11$/, \"11\")\n</code></pre>\n\n<p>Expected output [someExistingFile.txt]:</p>\n\n<pre><code>#this is a comment\n11\n</code></pre>\n\n<p>Actual output  [someExistingFile.txt]:</p>\n\n<pre><code>11\n</code></pre>\n\n<p>In addition I changed it around like this:</p>\n\n<pre><code>file.insert_line_if_no_match(/^11$/, \"#this is a comment\\n#11\")\nfile.search_file_replace_line(/^#this is a comment$/, \"this is a comment\")\n</code></pre>\n\n<p>Expected output  [someExistingFile.txt]:</p>\n\n<pre><code>this is a comment\n#11\n</code></pre>\n\n<p>Actual output  [someExistingFile.txt]:</p>\n\n<pre><code>this is a comment\n</code></pre>\n\n<p>It seems that even tough the new line added had a <code>\\n</code> the <code>search_file_replace_line</code> thinks as both as 1 line!! why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 1294, "user_id": 1574508, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JFCdr.jpg?s=128&g=1", "display_name": "trueinViso", "link": "https://stackoverflow.com/users/1574508/trueinviso"}, "edited": false, "score": 0, "creation_date": 1422403875, "post_id": 28182337, "comment_id": 44734096, "body": "Tokenize search variable into two tokens."}, {"owner": {"reputation": 71, "user_id": 3247513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xd6ez.png?s=128&g=1", "display_name": "Abraham", "link": "https://stackoverflow.com/users/3247513/abraham"}, "reply_to_user": {"reputation": 1294, "user_id": 1574508, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/JFCdr.jpg?s=128&g=1", "display_name": "trueinViso", "link": "https://stackoverflow.com/users/1574508/trueinviso"}, "edited": false, "score": 0, "creation_date": 1422404838, "post_id": 28182337, "comment_id": 44734417, "body": "@trueinViso I could define a function that accepts two parameters but it will only return the exact search (1 record). Instead I want to return all the records. In my example the result I&#180;m searching for would return 2 records."}], "answers": [{"comments": [{"owner": {"reputation": 71, "user_id": 3247513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xd6ez.png?s=128&g=1", "display_name": "Abraham", "link": "https://stackoverflow.com/users/3247513/abraham"}, "edited": false, "score": 0, "creation_date": 1422473240, "post_id": 28182888, "comment_id": 44767642, "body": "Hello, thats a great suggestion, but it is throwing me an error :  <code>SQLite3::SQLException: near &quot;[&#39;%Gary%&#39;,&#39;%Jules%&#39;]&quot;</code>  Perhaps slqlite3 is the problem. Should I use postgresql?"}, {"owner": {"reputation": 736, "user_id": 2194846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7033K.jpg?s=128&g=1", "display_name": "Allan W Smith", "link": "https://stackoverflow.com/users/2194846/allan-w-smith"}, "reply_to_user": {"reputation": 71, "user_id": 3247513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xd6ez.png?s=128&g=1", "display_name": "Abraham", "link": "https://stackoverflow.com/users/3247513/abraham"}, "edited": false, "score": 0, "creation_date": 1422487005, "post_id": 28182888, "comment_id": 44774434, "body": "For some reason my brain wasn&#39;t thinking in sqlite3 for the question.  My bad.   I&#39;ll rewrite this after work for you, in active record if I can be bothered.  Check back later on."}], "tags": [], "owner": {"reputation": 736, "user_id": 2194846, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7033K.jpg?s=128&g=1", "display_name": "Allan W Smith", "link": "https://stackoverflow.com/users/2194846/allan-w-smith"}, "is_accepted": false, "score": 2, "last_activity_date": 1422487134, "last_edit_date": 1422487134, "creation_date": 1422406602, "answer_id": 28182888, "question_id": 28182337, "link": "https://stackoverflow.com/questions/28182337/rails-simple-search-query/28182888#28182888", "title": "Rails simple search Query", "body": "<p>You could split the string on the space to get an array, add the % wildcards then query with this array, something like:</p>\n\n<pre><code>def name_search(search)\n    search_terms = search.split(\" \")\n    search_terms_with_wildcard = search_terms.map {|val| \"%#{val}%\" }\n    Product.where(\"name LIKE ANY ( array[?] ) OR secondName LIKE ANY ( array[?] )\", search_terms_with_wildcard, search_terms_with_wildcard)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1531, "user_id": 976035, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/913e70d8b28f4ea2bd30a735e23d25b2?s=128&d=identicon&r=PG", "display_name": "Finks", "link": "https://stackoverflow.com/users/976035/finks"}, "is_accepted": false, "score": 0, "last_activity_date": 1422407059, "creation_date": 1422407059, "answer_id": 28182957, "question_id": 28182337, "link": "https://stackoverflow.com/questions/28182337/rails-simple-search-query/28182957#28182957", "title": "Rails simple search Query", "body": "<p>I'm not sure why it would return the exact search if you tried a 2 parameter method, it should really solve your problem.</p>\n\n<pre><code>def name_search(first, last)\n  where(\"name like ? OR second_name like ?\", \"%#{first}%\", \"%#{last}%\")\nend\n</code></pre>\n\n<p>By the way, make your <code>method name</code> into snake case, that's the convention for rails.</p>\n"}], "owner": {"reputation": 71, "user_id": 3247513, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Xd6ez.png?s=128&g=1", "display_name": "Abraham", "link": "https://stackoverflow.com/users/3247513/abraham"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1422487134, "creation_date": 1422403322, "last_edit_date": 1422405799, "question_id": 28182337, "link": "https://stackoverflow.com/questions/28182337/rails-simple-search-query", "title": "Rails simple search Query", "body": "<p>My table User looks like this</p>\n\n<pre><code>Name      |   SecondName\n-------------------------\n\"David\"   |  \"Graham\"\n-------------------------\n\"Gary\"    | \"Jules\"\n-------------------------\n\"Gary\"    | \"Lincon\"\n</code></pre>\n\n<p>Im trying with this function in my model</p>\n\n<pre><code>def nameSearch(search)\n where('name like ? OR secondName like ?', \"%#{search}%\", \"%#{search}%\")\nend\n</code></pre>\n\n<p>My function works with these:</p>\n\n<p><code>User.nameSearch(\"Gary\")</code> returns 2 record</p>\n\n<p><code>User.nameSearch (\"ary\")</code> returns 2 record</p>\n\n<p>How can I make this search work?</p>\n\n<pre><code>User.nameSearch(\"Gary Jules\") returns nil\n</code></pre>\n\n<p>It should return 2 records instead of nil.</p>\n"}, {"tags": ["ruby"], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "closed_date": 1422404616, "answer_count": 0, "score": 2, "last_activity_date": 1422403209, "creation_date": 1422403209, "question_id": 28182310, "link": "https://stackoverflow.com/questions/28182310/is-the-order-of-ruby-dir-entries-guaranteed", "closed_reason": "Duplicate", "title": "Is the order of Ruby Dir.entries guaranteed?", "body": "<p>What is the order of the entries returned by <code>Dir.entries</code>? How do you know if it is fixed or can change at any time?</p>\n\n<p>The <a href=\"http://www.ruby-doc.org/core-2.2.0/Dir.html#method-c-entries\" rel=\"nofollow\">Ruby Doc</a> doesn't seem to say.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": false, "score": 0, "last_activity_date": 1422404505, "creation_date": 1422404505, "answer_id": 28182552, "question_id": 28182223, "link": "https://stackoverflow.com/questions/28182223/how-to-create-activemodel-instance-variables-like-field-foo-as-done-in-mongoid/28182552#28182552", "title": "how to create activemodel instance variables like field :foo as done in mongoid", "body": "<p>Just use Ruby's <code>attr_accessor</code> method.</p>\n"}], "owner": {"reputation": 17880, "user_id": 2155313, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/fp9tO.jpg?s=128&g=1", "display_name": "errata", "link": "https://stackoverflow.com/users/2155313/errata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1454271902, "creation_date": 1422402682, "last_edit_date": 1454271902, "question_id": 28182223, "link": "https://stackoverflow.com/questions/28182223/how-to-create-activemodel-instance-variables-like-field-foo-as-done-in-mongoid", "title": "how to create activemodel instance variables like field :foo as done in mongoid", "body": "<p>I'm looking for some information on how to define instance variables the way mongoid does by having </p>\n\n<pre><code>field :foo \nfield :bar \n</code></pre>\n\n<p>at the top of my model class. It seems to only fire static or class methods and I cant seem to populate instance variables from a class method obviously. I haven't been able to figure out how it is happening from the mongoid code. I want to define a list of items there and assign them to a class level list.</p>\n\n<p>thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gcc", "therubyracer", "libv8"], "answers": [{"tags": [], "owner": {"reputation": 143, "user_id": 1746270, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/946503e1980de467e598464c3fb371f1?s=128&d=identicon&r=PG", "display_name": "Rajuk", "link": "https://stackoverflow.com/users/1746270/rajuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1439440774, "creation_date": 1439440774, "answer_id": 31979628, "question_id": 28182015, "link": "https://stackoverflow.com/questions/28182015/installing-libv8-and-therubyracer-on-mavericks/31979628#31979628", "title": "Installing libv8 and therubyracer on Mavericks", "body": "<p>I also faced the same problem. Followed the same steps you have described above. Below are the additional exports I did to install therubyracer.</p>\n\n<pre><code>export CC=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2\nexport CXX=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/g++-4.2\nexport CPP=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/cpp-4.2\n</code></pre>\n\n<p>I did not do <i>brew install libv8</i></p>\n\n<p>Next, uninstalled libv8 gem</p>\n\n<pre><code>gem uninstall libv8\n</code></pre>\n\n<p>Finally installed therubyracer</p>\n\n<pre><code>gem install therubyracer -v='0.12.2'\n</code></pre>\n\n<p>I am using ruby 2.2.2, hope this helps.</p>\n"}], "owner": {"reputation": 7734, "user_id": 2490003, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/3dRD0.png?s=128&g=1", "display_name": "user2490003", "link": "https://stackoverflow.com/users/2490003/user2490003"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 299, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1439440774, "creation_date": 1422401652, "question_id": 28182015, "link": "https://stackoverflow.com/questions/28182015/installing-libv8-and-therubyracer-on-mavericks", "title": "Installing libv8 and therubyracer on Mavericks", "body": "<p>I'm about to tear my hair out with trying to get <code>therubyracer</code> gem to install on Mavericks 10.9 - any help would be <em>immensely</em> appreciated.</p>\n\n<p>I understand that there's a host of other questions about this subject, but literally none of the following (including various combinations and hopeful retrials which have consumed 2+ days at this point) have solved any issue</p>\n\n<ol>\n<li>Uninstalling <code>libv8</code> and install <code>therubyracer</code></li>\n<li>Using <code>brew install libv8</code> instead</li>\n<li>Installing <code>apple-gcc</code> or similar</li>\n<li>Installing various versions of <code>Xcode</code> and <code>Developer Tools</code></li>\n<li>Reinstalling <code>rvm</code> and re-building <code>ruby 1.9.3</code></li>\n</ol>\n\n<p>The latest I've been able to achieve is to get this error message:</p>\n\n<pre><code>&gt; gem install therubyracer\nBuilding native extensions.  This could take a while...\nERROR:  Error installing therubyracer:\n  ERROR: Failed to build gem native extension.\n\n    /Users/aqua/.rvm/rubies/ruby-1.9.3-p545/bin/ruby -r ./siteconf20150127-54061-10i2fna.rb extconf.rb\nchecking for main() in -lpthread... yes\nchecking for main() in -lobjc... yes\ncreating Makefile\n\nmake  clean\n\nmake\ncompiling accessor.cc\ng++-4.6: error: unrecognized option '-rdynamic'\nmake: *** [accessor.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/aqua/.rvm/gems/ruby-1.9.3-p545/gems/therubyracer-0.12.1 for inspection.\nResults logged to /Users/aqua/.rvm/gems/ruby-1.9.3-p545/extensions/x86_64-darwin-13/1.9.1/therubyracer-0.12.1/gem_make.out\n</code></pre>\n\n<p>There doesn't seem to be much information around <code>g++-4.6: error: unrecognized option '-rdynamic'</code>. My first guess was maybe that <code>gcc46</code> does not support this flag.</p>\n\n<p>Based on other post suggestions I tried installing <code>apple-gcc42</code>:</p>\n\n<pre><code>brew tap homebrew/dupes\nbrew install apple-gcc42\n</code></pre>\n\n<p>And executed it again with the proper enviornment context variables to point it to the new <code>apple-gcc42</code> installation:</p>\n\n<pre><code>&gt; $ CC=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 CPP=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/cpp-4.2 CXX=/usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/g++-4.2 gem install therubyracer\n</code></pre>\n\n<p>Still no luck, and it was oddly still throwing the same error about <code>gcc46</code>, which makes me thing that it's not picking up <code>apple-gcc42</code> <em>at all</em></p>\n\n<p>I even tried symlinking the correct versions (backing up the originals of course)</p>\n\n<pre><code>cd /usr/bin\n\nmv gcc gcc_backup\nmv g++ g++_backup\nmv cpp cpp_backup\n\nsudo ln -s /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/gcc-4.2 /usr/bin/gcc\nsudo ln -s /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/g++-4.2 /usr/bin/g++\nsudo ln -s /usr/local/Cellar/apple-gcc42/4.2.1-5666.3/bin/cpp-4.2 /usr/bin/cpp\n</code></pre>\n\n<p>Absolutely no luck, still throwing <code>g++-4.6: error: unrecognized option '-rdynamic'</code></p>\n\n<p>So.. <strong>How do you force the <code>gem install</code> to use a specific compiler version? Is that even the right approach?</strong></p>\n\n<p>Thanks for the help!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "logging", "rspec"], "comments": [{"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1422401849, "post_id": 28181875, "comment_id": 44733354, "body": "...otherwise you want to append new log entries to existing contents, correct?"}, {"owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "reply_to_user": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "edited": false, "score": 0, "creation_date": 1422401940, "post_id": 28181875, "comment_id": 44733392, "body": "yes, if it exists, append, else create. My concern with File.exist? is that it doesnt know about the way a rails project is set up so im not sure how I would get all the info in there"}], "answers": [{"comments": [{"owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "edited": false, "score": 0, "creation_date": 1422402332, "post_id": 28182108, "comment_id": 44733545, "body": "Here I thought Logger was apart of rails for some reason &gt;.&gt;"}, {"owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "reply_to_user": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "edited": false, "score": 0, "creation_date": 1422402375, "post_id": 28182108, "comment_id": 44733559, "body": "Yeah, I was surprised to find it in the core too. <code>pry</code> makes searching for given objects in the docs surprisingly easy: <code>show-doc Logger</code>, done."}], "tags": [], "owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "is_accepted": true, "score": 6, "last_activity_date": 1422402110, "creation_date": 1422402110, "answer_id": 28182108, "question_id": 28181875, "link": "https://stackoverflow.com/questions/28181875/check-if-a-log-file-already-exists-in-rails/28182108#28182108", "title": "Check if a log file already exists in rails", "body": "<p>There is, actually, en example <a href=\"http://www.ruby-doc.org/stdlib-2.1.1/libdoc/logger/rdoc/Logger.html\" rel=\"noreferrer\">in <code>Logger</code> docs</a>:</p>\n\n<pre><code>file = File.open('foo.log', File::WRONLY | File::APPEND)\n# To create new (and to remove old) logfile, add File::CREAT like:\n# file = File.open('foo.log', File::WRONLY | File::APPEND | File::CREAT)\nlogger = Logger.new(file)\n</code></pre>\n\n<p>If a file to be written does not exist, it is created automatically on an attempt to open it.</p>\n"}], "owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 28182108, "answer_count": 1, "score": 0, "last_activity_date": 1422402110, "creation_date": 1422400848, "question_id": 28181875, "link": "https://stackoverflow.com/questions/28181875/check-if-a-log-file-already-exists-in-rails", "title": "Check if a log file already exists in rails", "body": "<p>I am looking to do the following:</p>\n\n<pre><code>new_logger = Logger.new('log/exceptions.log')\nnew_logger.level = Logger::ERROR\nnew_logger.error('THIS IS A NEW EXCEPTION!')\n\nActiveRecord::Base.logger = new_logger\n</code></pre>\n\n<p>But I only want that log file created if it doesn't already exist. Would I literally just use the <code>File.exist?</code></p>\n\n<p>How would you test this? (using rspec) and if the log file gets to big does rails (or is the web server) compress the file and create a new one, like: <code>log.zip, log_2</code></p>\n"}, {"tags": ["ruby", "function", "loops", "math", "nested"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 1, "creation_date": 1422401339, "post_id": 28181800, "comment_id": 44733183, "body": "What you have doesn&#39;t really work if you&#39;re not requiring that the solutions be unique except for order. The sample solution you show of <code>[97,1,2]</code> cannot occur with the loop you have. The maximum value of each of the first two addends would be <code>50</code>. And your requirements aren&#39;t clear. Is it supposed to output <i>all</i> possible combinations of addends? Are addends required to be greater than 0?"}, {"owner": {"reputation": 1, "user_id": 3674723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1319a6a2f380e0805f71575ce81d070?s=128&d=identicon&r=PG", "display_name": "YilenPan", "link": "https://stackoverflow.com/users/3674723/yilenpan"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1422403168, "post_id": 28181800, "comment_id": 44733829, "body": "Ack, you&#39;re completely right. This is to find unique addens that add up to k."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1422404000, "post_id": 28181800, "comment_id": 44734133, "body": "There are infinitely many numbers which add up to any given number. Do you want to enumerate them all?"}, {"owner": {"reputation": 1, "user_id": 3674723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1319a6a2f380e0805f71575ce81d070?s=128&d=identicon&r=PG", "display_name": "YilenPan", "link": "https://stackoverflow.com/users/3674723/yilenpan"}, "edited": false, "score": 0, "creation_date": 1422404420, "post_id": 28181800, "comment_id": 44734269, "body": "The goal is to find N unique addens which add up to k."}, {"owner": {"reputation": 36469, "user_id": 238704, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VgOZI.png?s=128&g=1", "display_name": "President James K. Polk", "link": "https://stackoverflow.com/users/238704/president-james-k-polk"}, "edited": false, "score": 0, "creation_date": 1422416029, "post_id": 28181800, "comment_id": 44737374, "body": "If you expect to have a finite solution you&#39;ll will need to add some constraints. The most likely constraints that you have omitted are that the addends must all be &gt;= 0, i.e negative numbers are not allowed."}], "answers": [{"tags": [], "owner": {"reputation": 5331, "user_id": 3777428, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/sJ6pq.png?s=128&g=1", "display_name": "eigenchris", "link": "https://stackoverflow.com/users/3777428/eigenchris"}, "is_accepted": false, "score": 0, "last_activity_date": 1422460202, "last_edit_date": 1422460202, "creation_date": 1422428295, "answer_id": 28186391, "question_id": 28181800, "link": "https://stackoverflow.com/questions/28181800/total-sums-with-n-number-of-digits/28186391#28186391", "title": "total sums with n number of digits", "body": "<p>This probably isn't the best solution in the world (memory required grows with <code>O(k^3)</code>), but it's a solution. I'm welcome to suggestions for improvement.</p>\n\n<p>You might be interested in reading about <a href=\"http://en.wikipedia.org/wiki/Partition_%28number_theory%29\" rel=\"nofollow\">integer partitions</a>, which is what we're counting here.</p>\n\n<p>You're looking for a function <code>f(k,n)</code> that will count the number of ways to partition a number <code>k</code> into exactly <code>n</code> parts. Part of the problem is it's hard to tell when you count a partition twice. </p>\n\n<p>I'll solve this problem by using another function <code>g(k,n,s)</code> that counts the number of ways to partition a number <code>k</code> into <code>n</code> parts <strong>where the maximum value allowed is</strong> <code>s</code>. So for example, we don't count the partitions <code>(90,8,2)</code> or <code>(64,20,16)</code> in <code>g(100,3,60)</code> since they use values greater than <code>s=60</code>. </p>\n\n<p><code>g(k,n,s) = f(k,n)</code> when <code>s&gt;=k</code> (i.e. we don't place a maximum on the values allowed in the partition).</p>\n\n<p><br></p>\n\n<p>A few facts about <code>g(k,n,s)</code>:</p>\n\n<ul>\n<li><code>k==n</code> implies <code>g=1</code> since the only way to partition <code>k</code> into <code>k</code> parts is by using all <code>1</code>s (hence <code>s</code> is irrelevant since we use the lowest number possible) </li>\n<li><code>n&gt;k</code> implies <code>g=0</code> since we can't partition <code>k</code> into more than <code>k</code> parts</li>\n<li><code>s==1</code> implies <code>g=1</code> if <code>k==n</code> and <code>g=0</code> otherwise, since placing a maximum value of <code>1</code> only allows a partition of <code>k</code> into <code>k</code> parts (all ones)</li>\n<li><code>n==1</code> implies <code>g=1</code> if <code>s&gt;=k</code> and <code>g=0</code> otherwise, since the only partition of <code>k</code> into <code>n=1</code> parts requires that we use <code>k</code> itself in the partition</li>\n<li><code>s&lt;RoundUp(k/n)</code> implies <code>g=0</code> since we can't partition <code>k</code> into <code>n</code> parts using values less than <code>k/n</code>; for example we can't partition <code>100</code> int o <code>4</code> pieces using only values less than <code>25</code>.</li>\n<li><code>s&gt;k-n+1</code> implies <code>g(k,n,s) = g(k,n,s-1)</code> since increasing the max value <code>s</code> after <code>k-n+1</code> doesn't add any new partitions; for example, any partition of <code>100</code> into <code>3</code> parts will never include a number greater than <code>100-3+1 = 98</code></li>\n<li><code>g(k,n,s) = g(k,n,s-1) + g(k-s,n-1,s)</code> in every other case. This just adds any partitions using a value of <code>s</code> to all the previous partitions we've counted using a maximum value of <code>s-1</code></li>\n</ul>\n\n<p>Now I just choose maximum number <code>K</code> and throw all these facts into a nested <code>for</code> loop and deduce every value of <code>g(k,n,s)</code>. To get <code>f(k,n)</code> I just find <code>g(k,n,k)</code>.</p>\n\n<p><br></p>\n\n<p>Here's the algorithm, not suitable for large <code>K</code>.</p>\n\n<pre><code>g = (K by K by K) array of all zeros\n\nfor k = 1:K\n    for n = 1:K\n        for s = 1:K\n\n            if (k==n)\n                val = 1;\n            else if (n&gt;k)\n                val = 0;\n            else if s==1\n                val = int(k==n);\n            else if n==1\n                val = int(s&gt;=k);\n            else if s&lt;RoundUp(k/n)\n                val = 0;\n            else if s&gt;(k-n+1)\n                val = g(k,n,s-1);\n            else\n                val = g(k,n,s-1) + g(k-s,n-1,s);\n            end\n\n            g(k,n,s) = val;\n\n        end\n    end\nend\n</code></pre>\n\n<p>For <code>f(100,3) = g(100,3,100)</code> I get <code>833</code> unique partitions, which you can see is correct if you use a brute force method. Please point out mistakes if you see any.</p>\n"}], "owner": {"reputation": 1, "user_id": 3674723, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e1319a6a2f380e0805f71575ce81d070?s=128&d=identicon&r=PG", "display_name": "YilenPan", "link": "https://stackoverflow.com/users/3674723/yilenpan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 199, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1422460202, "creation_date": 1422400395, "question_id": 28181800, "link": "https://stackoverflow.com/questions/28181800/total-sums-with-n-number-of-digits", "title": "total sums with n number of digits", "body": "<p>so I got a bit of a stumper for you. I need to write a function that takes a number (call this K) and outputs n numbers where the sum if these numbers == K. </p>\n\n<p>For instance, if I give this function (100,3) it will output [1,2,97], [1,3,96], [1,4,95]... [97,1,2]</p>\n\n<p>I have the function worked out for three digits:</p>\n\n<pre><code>k = 100\nr = []\n0.upto(k/2) do |a|\n    (a+1).upto(k/2) do |b|\n        c = k-(a+b)\n        r &lt;&lt; [a,b,c]\n    end\nend\n</code></pre>\n\n<p>How would I write this function that takes an n amount of digits? </p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 10736, "user_id": 2498956, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9eb217f1dbc6265004df4c2d4fb2f3e9?s=128&d=identicon&r=PG", "display_name": "August", "link": "https://stackoverflow.com/users/2498956/august"}, "is_accepted": false, "score": 1, "last_activity_date": 1422400000, "creation_date": 1422400000, "answer_id": 28181713, "question_id": 28181664, "link": "https://stackoverflow.com/questions/28181664/accumulation-function-in-ruby-doesnt-work/28181713#28181713", "title": "accumulation function in ruby doesn&#39;t work", "body": "<p>Set <code>result</code> to the value obtained from <code>yield</code>:</p>\n\n<pre><code>def accum(start, items) \n    result, items = start, items.dup\n    result = yield(result, items.pop) until items.empty?\n    result\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "is_accepted": true, "score": 3, "last_activity_date": 1422401535, "last_edit_date": 1422401535, "creation_date": 1422400354, "answer_id": 28181789, "question_id": 28181664, "link": "https://stackoverflow.com/questions/28181664/accumulation-function-in-ruby-doesnt-work/28181789#28181789", "title": "accumulation function in ruby doesn&#39;t work", "body": "<p>You never use the return value of your block, that comes out of <code>yield</code>. It should be along the lines of this:</p>\n\n<pre><code>result = yield(result, items.pop) until items.empty?\n</code></pre>\n\n<p>And I have to note that you're reinventing the wheel. Your accumulation function is already implemented in Ruby standard library and is called <code>reduce</code> or <code>inject</code> (either way works):</p>\n\n<pre><code>numbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nputs numbers.reduce {|a, b| a + b }\n# But hey, we're just calling a single function with 2 args in that block\n# Let's specify a symbol that corresponds to a function!\n# Works pretty much the same way\nputs numbers.reduce(:+)\n# For multiplication too\nputs numbers.reduce(:*)\n</code></pre>\n"}], "owner": {"reputation": 486, "user_id": 815693, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1dedcc35dd7a72e74428f9a82a6ec386?s=128&d=identicon&r=PG", "display_name": "user815693", "link": "https://stackoverflow.com/users/815693/user815693"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 28181789, "answer_count": 2, "score": 0, "last_activity_date": 1422401535, "creation_date": 1422399701, "question_id": 28181664, "link": "https://stackoverflow.com/questions/28181664/accumulation-function-in-ruby-doesnt-work", "title": "accumulation function in ruby doesn&#39;t work", "body": "<pre><code>def accum(start, items) \n    result, items = start, items.dup\n    yield(result, items.pop) until items.empty?\n    result\nend\n\nnumbers = [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\nputs accum(0, numbers) { |a, b| a + b }\nputs accum(1, numbers) { |a, b| a * b }\n\n# 0\n# 1\n</code></pre>\n\n<p>In Ruby versions:<br>\n2.1.5p273 (2014-11-13 revision 48405) [x64-mingw32]<br>\n1.9.3p194 (2012-04-20) [i386-mingw32]</p>\n\n<p>The output is </p>\n\n<pre><code>#0\n#1\n</code></pre>\n\n<p>I would expect for all the numbers in the array to be summed and multipled.<br>\nWhat is the reason that the actual multiplication and summation doesn't happen.</p>\n"}]