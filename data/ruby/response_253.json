[{"tags": ["ruby-on-rails", "ruby", "rspec", "rspec-rails", "activesupport"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1573697446, "post_id": 58847027, "comment_id": 103970052, "body": "Not sure you can undeclare an anonymous class. Those should get garbage collected <i>eventually</i> but perhaps not as soon as you&#39;d prefer. Remember, removing a variable or constant does not automatically remove the associated object. Those may persist for other reasons, like if they&#39;re retained as a reference in the subclasses list."}], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 4656475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7oAWq.jpg?s=128&g=1", "display_name": "Zara Kay", "link": "https://stackoverflow.com/users/4656475/zara-kay"}, "edited": false, "score": 0, "creation_date": 1573794763, "post_id": 58852190, "comment_id": 104009763, "body": "Yeah, thanks for that. Was smashing my head against the wall. Using <code>subclasses</code> for some dynamic meta programming stuff but def have other ways to do it"}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "reply_to_user": {"reputation": 154, "user_id": 4656475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7oAWq.jpg?s=128&g=1", "display_name": "Zara Kay", "link": "https://stackoverflow.com/users/4656475/zara-kay"}, "edited": false, "score": 0, "creation_date": 1573824877, "post_id": 58852190, "comment_id": 104023569, "body": "What tipped me of, was this question: why a class should know about it&#39;s descendants? From the OO design this seems weird. Also all my colleagues (which are smarten than myself) are s**ing on ActiveSupport. They don&#39;t like it that much."}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": true, "score": 1, "last_activity_date": 1573719550, "creation_date": 1573719550, "answer_id": 58852190, "question_id": 58847027, "link": "https://stackoverflow.com/questions/58847027/how-to-stop-rspec-anonymous-class-leaking/58852190#58852190", "title": "How to stop RSpec anonymous class leaking?", "body": "<p>I did some investigations on how <code>subclasses</code> work, and here's what I found (though not really an answer to your question)</p>\n\n<p><code>subclasses</code> call internally <code>descendants</code> (they both come from <a href=\"https://github.com/rails/rails/blob/09a2979f75c51afb797dd60261a8930f84144af8/activesupport/lib/active_support/core_ext/class/subclasses.rb#L21:L52\" rel=\"nofollow noreferrer\">ActiveSupport</a>) which calls <code>ObjectSpace.each_object</code> </p>\n\n<p>If you read <a href=\"https://ruby-doc.org/core-2.6.5/ObjectSpace.html\" rel=\"nofollow noreferrer\">it's doc</a>, it says</p>\n\n<blockquote>\n  <p>The ObjectSpace module contains a number of routines that interact\n  with the garbage collection facility and allow you to traverse all\n  living objects with an iterator.</p>\n</blockquote>\n\n<p>It's not super clear. But AFAIU it iterates over all objects that the GC knows about. </p>\n\n<p>So the reality is this: this class is not reachable unless you ask GC about it, then it can give you a reference to it. (It's kind of hacky if you ask me)</p>\n\n<p>IMO you should not trust <code>subclasses</code> on any production code. It seems unpredictable. Maybe, whatever you are trying to achieve with <code>subclasses</code>, could be done in a different way? (But that's a topic for another SO question)</p>\n"}], "owner": {"reputation": 154, "user_id": 4656475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7oAWq.jpg?s=128&g=1", "display_name": "Zara Kay", "link": "https://stackoverflow.com/users/4656475/zara-kay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 155, "favorite_count": 0, "accepted_answer_id": 58852190, "answer_count": 1, "score": 1, "last_activity_date": 1573720044, "creation_date": 1573686696, "last_edit_date": 1573717333, "question_id": 58847027, "link": "https://stackoverflow.com/questions/58847027/how-to-stop-rspec-anonymous-class-leaking", "title": "How to stop RSpec anonymous class leaking?", "body": "<p>So I am trying to test an abstract class. According to what I have read, give an class named <code>Foo</code>, I can do the following in RSpec and it won't leak in to other tests.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>let(:test) do\n  Class.new(Foo) do\n    # Do things here\n  end\nend\n</code></pre>\n\n<p>However I found that it does still leak, when I do <code>Foo.subclasses</code> in another location (depending on spec execution order). </p>\n\n<p>I also tried to define the class the normal way and delete it in an after block, e.g.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>let(:test) do\n  class Test &lt; Foo; end\n  Test\nend\n...\n\nafter do\n  Object.send(:remove_const, :Test)\nend\n</code></pre>\n\n<p>But that also didn't seem to work. <code>Foo.subclasses</code> still seemed to contain the anonymous class.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 136, "user_id": 5992910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02e951c0b60c9b165357146dc2190f9?s=128&d=identicon&r=PG&f=1", "display_name": "datadaveshin", "link": "https://stackoverflow.com/users/5992910/datadaveshin"}, "is_accepted": true, "score": 1, "last_activity_date": 1573692617, "last_edit_date": 1573692617, "creation_date": 1573689388, "answer_id": 58847400, "question_id": 58846594, "link": "https://stackoverflow.com/questions/58846594/how-to-select-data-from-api-call-result-in-rails/58847400#58847400", "title": "How to select data from API call result in rails?", "body": "<p>The response is some JSON, so you need to learn how to map through it and get the results that you want. </p>\n\n<p>To see the data more clearly try printing it with:</p>\n\n<p><code>puts JSON.pretty_generate(@results)</code></p>\n\n<p>in your controller, then see the output in your rails console.</p>\n\n<p>Anyway, you have a few options:</p>\n\n<p><strong>Option 1:</strong> Likely you just need to drill down further into <code>@results</code> in your <strong>view</strong>. In the JSON that is returned, the webTitles are nested, so changing the third line below should work. Also note on that line that I removed the <code>=</code> sign to prevent the return value from being displayed.</p>\n\n<pre><code>&lt;% if @results != nil %&gt;\n  &lt;ul&gt;\n  &lt;% @results[\"response\"][\"results\"].each do |r| %&gt;\n  &lt;li&gt;&lt;%= r[\"webTitle\"] %&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;% else %&gt;\n  &lt;p&gt;No results yet&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Option 2:</strong> You may consider getting the list of articles in your <strong>controller</strong>, which I think was your original intent and also is probably more \"rails\" like:</p>\n\n<pre><code>class SearchController &lt; ApplicationController\n    def search\n        @app = GuardianApiClient.new\n        @results = @app.query(params[:q])\n        @articles = @results[\"response\"][\"results\"].map do |article|\n            article\n        end\n    end\nend\n</code></pre>\n\n<p>In your <strong>view</strong>, then call render to a partial:</p>\n\n<pre><code>&lt;%= render 'articles' %&gt;\n</code></pre>\n\n<p>Then create a <strong>partial view</strong> called <code>_articles.html.erb</code> in whatever directory your other view is in, and then add some code to display each article:</p>\n\n<pre><code>&lt;ul&gt;\n  &lt;% @articles.each do |article| %&gt;\n    &lt;li&gt;&lt;%= article[\"webTitle\"] %&gt; &lt;% link_to 'Link', article[\"webUrl\"] %&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n&lt;ul&gt;\n\n</code></pre>\n\n<p>By separating out each article that was returned in the <code>@articles</code> array, it will probably be easier for you to get other attributes as well in a more readable way. As you can see, above I included a link to the actual article. </p>\n"}], "owner": {"reputation": 51, "user_id": 10733969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ce55f9c4b54e214d2bd92069d3eb2?s=128&d=identicon&r=PG&f=1", "display_name": "mbbm9", "link": "https://stackoverflow.com/users/10733969/mbbm9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 58847400, "answer_count": 1, "score": 1, "last_activity_date": 1573692617, "creation_date": 1573684060, "last_edit_date": 1573690960, "question_id": 58846594, "link": "https://stackoverflow.com/questions/58846594/how-to-select-data-from-api-call-result-in-rails", "title": "How to select data from API call result in rails?", "body": "<p>I\u2019m completely new to ruby on rails,  I\u2019m creating a simple article search application that would use the Guardian API and just display the news titles. It just needs to work like this: a user enters the page, fills in the search form and views the news titles.</p>\n\n<p>I want to simply select the request result\u2019s \u2018webTitle\u2019 keys and display their values as list items, but I get a big chunk of data and I\u2019m not sure how can I do that.</p>\n\n<p>Here is the request result:</p>\n\n<pre><code>{\"response\"=&gt;{\"status\"=&gt;\"ok\", \"userTier\"=&gt;\"developer\", \"total\"=&gt;2153270, \"startIndex\"=&gt;1, \"pageSize\"=&gt;10, \"currentPage\"=&gt;1, \"pages\"=&gt;215327, \"orderBy\"=&gt;\"relevance\", \"results\"=&gt;[{\"id\"=&gt;\"books/2017/jul/16/fall-down-7-times-get-up-8-naoki-higashida-review-autism\", \"type\"=&gt;\"article\", \"sectionId\"=&gt;\"books\", \"sectionName\"=&gt;\"Books\", \"webPublicationDate\"=&gt;\"2017-07-16T06:00:13Z\", \"webTitle\"=&gt;\"Fall Down 7 Times Get Up 8 review \u2013 a window on the world of autism\", \"webUrl\"=&gt;\"https://www.theguardian.com/books/2017/jul/16/fall-down-7-times-get-up-8-naoki-higashida-review-autism\", \"apiUrl\"=&gt;\"https://content.guardianapis.com/books/2017/jul/16/fall-down-7-times-get-up-8-naoki-higashida-review-autism\", \"isHosted\"=&gt;false, \"pillarId\"=&gt;\"pillar/arts\", \"pillarName\"=&gt;\"Arts\"}, {\"id\"=&gt;\"football/2017/jul/07/gold-cup-2017-predictions-usa-mexico-costa-rica-football\", \"type\"=&gt;\"article\", \"sectionId\"=&gt;\"football\", \"sectionName\"=&gt;\"Football\", \"webPublicationDate\"=&gt;\"2017-07-07T09:00:08Z\", \"webTitle\"=&gt;\"Gold Cup picks: USA to tip under-strength Mexico and in-form Costa Rica\", \"webUrl\"=&gt;\"https://www.theguardian.com/football/2017/jul/07/gold-cup-2017-predictions-usa-mexico-costa-rica-football\", \"apiUrl\"=&gt;\"https://content.guardianapis.com/football/2017/jul/07/gold-cup-2017-predictions-usa-mexico-costa-rica-football\", \"isHosted\"=&gt;false, \"pillarId\"=&gt;\"pillar/sport\", \"pillarName\"=&gt;\"Sport\"}, {\"id\"=&gt;\"world/2017/jul/15/stream-of-floating-bodies-near-mosul-raises-fears-of-reprisals-by-iraqi-militias\", \"type\"=&gt;\"article\", \"sectionId\"=&gt;\"world\", \"sectionName\"=&gt;\"World news\", \"webPublicationDate\"=&gt;\"2017-07-15T08:00:01Z\", \"webTitle\"=&gt;\"Stream of floating bodies near Mosul raises fears of reprisals by Iraqi militias\", \"webUrl\"=&gt;\"https://www.theguardian.com/world/2017/jul/15/stream-of-floating-bodies-near-mosul-raises-fears-of-reprisals-by-iraqi-militias\", \"apiUrl\"=&gt;\"https://content.guardianapis.com/world/2017/jul/15/stream-of-floating-bodies-near-mosul-raises-fears-of-reprisals-by-iraqi-militias\", \"isHosted\"=&gt;false, \"pillarId\"=&gt;\"pillar/news\", \"pillarName\"=&gt;\"News\"}]}}\n</code></pre>\n\n<p>API consumer class:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\n#app/clients/guardian_api_client.rb\n\nclass GuardianApiClient\n  include HTTParty  \n\n  API_KEY = ENV['GUARDIAN_CONTENT_API_KEY']\n  BASE_URL =\"https://content.guardianapis.com/search?\" \n  API_PARTIAL_URL = \"api-key=#{API_KEY}\"\n\n\n  def query(q)\n      request = HTTParty.get(BASE_URL+\"q=#{q}&amp;\"\"api-key=#{API_KEY}\")\n      puts request\n      request\n  end\nend\n\n</code></pre>\n\n<p>Controller:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\nclass SearchController &lt; ApplicationController\n    def search\n        @app = GuardianApiClient.new\n        @results = @app.query(params[:q])\n    end\nend\n\n</code></pre>\n\n<p>View:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= form_with(url: '/search') do |f| %&gt;\n&lt;%= f.text_field :q %&gt;\n&lt;%= f.submit 'search' %&gt;\n&lt;% end %&gt;\n\n&lt;% if @results != nil %&gt;\n  &lt;ul&gt;\n  &lt;%= @results.each do |r| %&gt;\n  &lt;li&gt;&lt;%= r[\"webTitle\"] %&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;% else %&gt;\n  &lt;p&gt;No results yet&lt;/p&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Routes:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>\nRails.application.routes.draw do\n  get '/search' =&gt; 'search#search'\n  post '/search' =&gt; 'search#search'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activestorage"], "answers": [{"tags": [], "owner": {"reputation": 3902, "user_id": 10608621, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d59df09a85d05117c63706f66811b70c?s=128&d=identicon&r=PG", "display_name": "mechnicov", "link": "https://stackoverflow.com/users/10608621/mechnicov"}, "is_accepted": false, "score": 0, "last_activity_date": 1573689612, "creation_date": 1573689612, "answer_id": 58847422, "question_id": 58846582, "link": "https://stackoverflow.com/questions/58846582/skip-activestorage-file-purge-on-attachment-deletion/58847422#58847422", "title": "Skip ActiveStorage File Purge on Attachment Deletion", "body": "<p>You can monkey patch <a href=\"https://github.com/rails/rails/blob/e7b7b2fa36f7ab5804cc7cf01fd705618da9f13f/activestorage/app/models/active_storage/attachment.rb#L21-L31\" rel=\"nofollow noreferrer\"><code>ActiveStorage::Attachment</code></a></p>\n\n<p>Change your initializer code to this:</p>\n\n<pre><code>module MonkeyPatch\n  def purge\n    raise 'your patch here'\n  end\n\n  def purge_later\n    raise 'and here'\n  end\nend\n\nActiveStorage::Attachment.prepend MonkeyPatch\n</code></pre>\n\n<p>By default they are:</p>\n\n<pre><code>def purge\n  delete\n  blob&amp;.purge\nend\n\ndef purge_later\n  delete\n  blob&amp;.purge_later\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 2400690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c8cb9519b30e2e096fe40c16f3aed7?s=128&d=identicon&r=PG", "display_name": "user2400690", "link": "https://stackoverflow.com/users/2400690/user2400690"}, "is_accepted": true, "score": 2, "last_activity_date": 1575496086, "creation_date": 1575496086, "answer_id": 59185118, "question_id": 58846582, "link": "https://stackoverflow.com/questions/58846582/skip-activestorage-file-purge-on-attachment-deletion/59185118#59185118", "title": "Skip ActiveStorage File Purge on Attachment Deletion", "body": "<p>I ended finding out that this worked:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># config/initializers/active_storage.rb\nRails.application.config.after_initialize do\n  ActiveStorage::Blob.class_eval do\n    def purge\n      # skip purge\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 2400690, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/19c8cb9519b30e2e096fe40c16f3aed7?s=128&d=identicon&r=PG", "display_name": "user2400690", "link": "https://stackoverflow.com/users/2400690/user2400690"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 1, "accepted_answer_id": 59185118, "answer_count": 2, "score": 2, "last_activity_date": 1575496086, "creation_date": 1573683999, "question_id": 58846582, "link": "https://stackoverflow.com/questions/58846582/skip-activestorage-file-purge-on-attachment-deletion", "title": "Skip ActiveStorage File Purge on Attachment Deletion", "body": "<p>As stated in the title, I'm trying to get it so that we can skip the blob purging once a user deletes an attachment in our system. The reason is that we want to keep copies of the uploaded files (or blobs), even if someone removes them in our system. Since ActiveStorage has no configuration for this, I've been trying to monkey patch the <code>#purge</code> method in <code>ActiveStorage::Blob</code> without success.</p>\n\n<p>Here's my initializer: </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># config/initializers/active_storage.rb\nmodule CoreExtensions\n  module ActiveStorage\n    module Blob\n      def purge\n        raise \"here\"\n      end\n    end\n  end\nend\n\nActiveSupport::Reloader.to_prepare do\n  ActiveStorage::Blob.include CoreExtensions::ActiveStorage::Blob\nend\n</code></pre>\n\n<p>That seems to do nothing and my <code>raise</code> never gets hit when I delete a file.</p>\n\n<p>I also tried:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>ActiveStorage::Blob.include CoreExtensions::ActiveStorage::Blob\n</code></pre>\n\n<p>without the <code>ActiveSupport::Reloader.to_prepare</code> block, but kept getting this error when starting the application: \"undefined method `has_one_attached'\"</p>\n\n<p>Any ideas how I can successfully monkey patch this? Alternative ideas for skipping the blob purge are also appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing"], "answers": [{"comments": [{"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1573682037, "post_id": 58846045, "comment_id": 103966040, "body": "Ok, I think I like this approach. Thanks for the input."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1573682146, "post_id": 58846045, "comment_id": 103966083, "body": "If it helps, please consider upvoting, it&#39;s worth even more than accepting"}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1573685543, "post_id": 58846045, "comment_id": 103967353, "body": "Hey @mrzasa, A quick follow up. I separated the service into its own folder just like you recommended in your answer. If you have a moment to spare, could you look at my edit? I&#39;m a little confused about the mocking of the controller because I was wondering if you were referring to something like <code>mocha</code> or somehow using the vcr cassette in it."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1573716430, "post_id": 58846045, "comment_id": 103975367, "body": "Please, ask a separate question, it&#39;ll be easier to help you there"}, {"owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "edited": false, "score": 0, "creation_date": 1573751050, "post_id": 58846045, "comment_id": 103995217, "body": "Here is the question I made. @mrzasa <a href=\"https://stackoverflow.com/questions/58862193/what-is-the-proper-way-of-mocking-my-controller-create-action-that-includes-an\" title=\"what is the proper way of mocking my controller create action that includes an\">stackoverflow.com/questions/58862193/&hellip;</a>. If you do have a free moment to look at it, I&#39;d appreciate your help. Thank you."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 2, "last_activity_date": 1573681232, "creation_date": 1573681232, "answer_id": 58846045, "question_id": 58845984, "link": "https://stackoverflow.com/questions/58845984/how-do-i-test-my-flash-message-when-im-using-the-vcr-gem/58846045#58846045", "title": "How do I test my flash message when I&#39;m using the vcr gem?", "body": "<p>It's not a direct answer to this question, but may help in general. I'd discourage you from calling external services directly from the controller. It's messy. It's hard to test. It's impossible to reuse.</p>\n\n<p>Wrap the cdnify integration in a separate class. You'll be able to test this class with VCR. In the controller spec, you'll mock it and test the flash easily.</p>\n"}, {"tags": [], "owner": {"reputation": 1122, "user_id": 4249632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c374d3088b82556c41945816b9ce5c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Hertz", "link": "https://stackoverflow.com/users/4249632/ryan-hertz"}, "is_accepted": false, "score": 0, "last_activity_date": 1573681381, "creation_date": 1573681381, "answer_id": 58846074, "question_id": 58845984, "link": "https://stackoverflow.com/questions/58845984/how-do-i-test-my-flash-message-when-im-using-the-vcr-gem/58846074#58846074", "title": "How do I test my flash message when I&#39;m using the vcr gem?", "body": "<blockquote>\n  <p>simplecov coverage is saying that I am not executing any of the code in the create method. Why is this the case?</p>\n</blockquote>\n\n<p>Your tests aren't hitting your controller. You need to add a line with something like <code>post :create, params: {}</code>. </p>\n"}], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58846045, "answer_count": 2, "score": 1, "last_activity_date": 1573685699, "creation_date": 1573680958, "last_edit_date": 1573685699, "question_id": 58845984, "link": "https://stackoverflow.com/questions/58845984/how-do-i-test-my-flash-message-when-im-using-the-vcr-gem", "title": "How do I test my flash message when I&#39;m using the vcr gem?", "body": "<p>I am new to VCR <a href=\"https://github.com/vcr/vcr\" rel=\"nofollow noreferrer\">vcr gem</a> and testing it in a rails application. The problem that I am facing is that I am unable to my flash messages and redirects using VCR and I am not sure how to get around it. Here is my controller action I am trying to create.</p>\n\n<pre><code>  def create\n    @response = HTTParty.post('https://reseller.cdnify.com/api/v1/resources',\n      {basic_auth: { username: cdn_params[:api_key], password: 'x'}, body: { alias: cdn_params[:resource_name], origin: cdn_params[:resource_origin]}})\n\n    if @response.parsed_response['resources']\n      flash[:notice] = 'Successfully Created Resource.'\n    else\n      @response.parsed_response['errors'].each do |error|\n        flash[:error] = \"#{error['code']}\" + ': ' + \"#{error['message']}\"\n      end\n    end\n\n    redirect_to cdns_path(ssl_slug: @ssl_slug)\n  end\n</code></pre>\n\n<p>I have these following tests in my <code>controller_test.rb</code> file:</p>\n\n<pre><code>  describe 'create' do\n\n    let(:cdn_resource) do\n      HTTParty.post('https://reseller.cdnify.com/api/v1/resources', {\n        basic_auth: { username: 'api_key', password: 'x'},\n        body: { alias: 'somewebsite', origin: 'http://www.somewebsite.com' }\n      })\n    end\n\n    it \"returns a succesful response for cdnify request\" do\n      VCR.use_cassette('cdnify_valid_result_for_cdn') do\n        response = HTTParty.post('https://reseller.cdnify.com/api/v1/resources', {\n          basic_auth: { username: 'api_key', password: 'x'},\n          body: { alias: 'mywebsite', origin: 'http://www.mywebsite.com' }\n        })\n\n        assert_not_nil response.parsed_response['resources']\n        assert_nil response.parsed_response['errors']\n      end\n    end\n\n    it 'returns an error with an invalid cdnify request' do\n      VCR.use_cassette('cdnify_invalid_result_for_cdn') do\n        response = cdn_resource\n\n        assert_not_nil response.parsed_response['errors']\n        assert_nil response.parsed_response['resources']\n      end\n    end\n  end\n</code></pre>\n\n<p>Basically, I am testing a good and bad response. These tests pass but the problem that I am getting is that I can't test my redirects nor my flash messages. I've tried placing them in the <code>VCR</code> do block and outside of the block but I am not able to get my tests pass. They seem to be missing. What am I doing wrong? Furthermore, my <code>simplecov</code> coverage is saying that I am not executing any of the code in the <code>create</code> method. Why is this the case?</p>\n\n## EDIT\n\n<p>As mentioned by mrzasa, I separated the service into a services folder but now I'm just missing one small crucial step in the testing process. Am I to mock the http response with mocha or can I just simply use the cassette generated to do so?</p>\n\n<pre><code>  describe 'create' do\n    it 'correctly creates a cdn resource, redirects to cdns#index, and shows successful flash message' do\n      post :create, params: {api_key: 'random_api_key_12345678',\n                              resource_name: 'somewebsite',\n                                resource_origin: 'http://www.somewebsite.com' }\n\n      ############ mocking here? #############\n      Do I use mocha to construct the actual response hash?\n      ####################################################\n\n      assert flash[:notice]\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 624, "user_id": 7188109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f0d98756028ef12c8cdbf8d89a2a259?s=128&d=identicon&r=PG", "display_name": "Pawe\u0142 D\u0105browski", "link": "https://stackoverflow.com/users/7188109/pawe%c5%82-d%c4%85browski"}, "is_accepted": false, "score": 0, "last_activity_date": 1573727987, "creation_date": 1573727987, "answer_id": 58854807, "question_id": 58845890, "link": "https://stackoverflow.com/questions/58845890/rollback-method-changes-in-ruby-on-rails-with-stripe/58854807#58854807", "title": "Rollback Method Changes in Ruby on Rails with Stripe", "body": "<p>You can use interactor pattern along with the great <code>interactor</code> gem that you can find here: <a href=\"https://github.com/collectiveidea/interactor\" rel=\"nofollow noreferrer\">https://github.com/collectiveidea/interactor</a>. Interactors are like services, small classes with one purpose, that are called one by one. The gem provides <code>rollback</code> method so you can easily rollback any process.</p>\n\n<p>It's worth to mention that there are interactors and organizers. You can treat interactor as a service and organizer as a group of chained interactors triggered in a defined order. In your case you can create <code>ChangePlan</code> organizer:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class ChangePlan\n  include Interactor::Organizer\n\n  organize UpdateSubscriptionPlan, UpdateSubscription, CreateInvoice, PayInvoice\nend\n</code></pre>\n\n<p>and here are your interactors along with <code>rollback</code> method that will revert changes in case of <code>Stripe::StripeError</code> error.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class UpdateSubscriptionPlan\n  include Interactor\n\n  def call\n    context.api_sub = update_subscription_plan(\n      subscription: context.subscription,\n      to_plan: context.to_plan,\n      coupon: context.coupon,\n      proration_date: get_proration_date,\n      prorate: true\n    )\n  rescue Stripe::StripeError =&gt; error\n    context.fail!(error: error.message)\n  end\n\n  def rollback\n    update_subscription_plan(\n      subscription: context.subscription,\n      to_plan: context.from_plan,\n      coupon: context.coupon,\n      proration_date: get_proration_date,\n      prorate: false\n    )\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class UpdateSubscription\n  include Interactor\n\n  delegate :subscription, :to_plan, :coupon, :api_sub, :from_plan, to: :context\n\n  def call\n    subscription.update!(\n      plan: to_plan,\n      coupon: coupon,\n      item_api_id: api_sub.items.data[0].id\n    )\n  end\n\n  def rollback\n    subscription.update!(\n      plan: from_plan,\n      coupon: coupon,\n      item_api_id: api_sub.items.data[0].id\n    )\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class CreateInvoice\n  include Interactor\n\n  def call\n    context.invoice = create_invoice(context.subscription)\n  rescue Stripe::StripeError =&gt; error\n    context.fail!(error: error.message)\n  end\n\n  def rollback\n    void_invoice(context.invoice.id)\n  end\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class PayInvoice\n  include Interactor\n\n  def call\n    context.invoice.pay\n  end\nend\n</code></pre>\n\n<p>Having such structure you can now call them this way:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>outcome = ChangePlan.call(\n  subscription: subscription,\n  to_plan: to_plan,\n  coupon: coupon\n)\n\nunless outcome.success?\n  subscription.errors[:base] = 'Upgrade failed, please contact us.'\nend\n</code></pre>\n\n<p>You can read more about rollbacks in interactors here: <a href=\"https://github.com/collectiveidea/interactor#rollback\" rel=\"nofollow noreferrer\">https://github.com/collectiveidea/interactor#rollback</a>. I gave you only pseudocode but having this order allows you to automatically rollback all previous actions when one of the actions will fail. This is the main advantage of interactors.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573727987, "creation_date": 1573680479, "last_edit_date": 1573683101, "question_id": 58845890, "link": "https://stackoverflow.com/questions/58845890/rollback-method-changes-in-ruby-on-rails-with-stripe", "title": "Rollback Method Changes in Ruby on Rails with Stripe", "body": "<p>I am trying to rollback a subscription change if it errors, but I am having a hard time figuring out a good way of doing it. I do not want to use web hooks for right now.</p>\n\n<p>Is there a better method for doing this? As you can see, I am trying the events and then rolling each one back manually. I feel like this needs a good refactoring.</p>\n\n<pre><code>def change_plan(subscription:, to_plan:, coupon: nil)\n  require_args(subscription: subscription, to_plan: to_plan)\n  events = []\n  begin\n    from_plan = subscription.plan\n    api_sub = update_subscription_plan(subscription: subscription, to_plan: to_plan,\n                                           coupon: coupon, proration_date: get_proration_date, prorate: true)\n    events&lt;&lt;'api_updated'\n    subscription.update!(plan:           to_plan,\n                         coupon:         coupon,\n                         item_api_id: api_sub.items.data[0].id)\n    events&lt;&lt;'db_updated'\n    invoice = create_invoice(subscription)\n    events&lt;&lt;'created_invoice'\n\n    invoice = invoice.pay\n    events&lt;&lt;'invoice_paid'\n\n  rescue Stripe::StripeError =&gt; e\n    subscription.errors[:base] &lt;&lt; e.message\n    if events.include?('api_updated')\n      stripe_sub = update_subscription_plan(subscription: subscription, to_plan: from_plan,\n                                             coupon: coupon, proration_date: get_proration_date, prorate: false)\n    end\n    if events.include?('db_updated')\n    subscription.update!(plan:           from_plan,\n                         coupon:         coupon,\n                         item_api_id: api_sub.items.data[0].id)\n    end\n\n    if events.include?('created_invoice')\n      void_invoice(invoice.id)\n    end\n    subscription.errors[:base] &lt;&lt; \"Upgrade failed, please contact us.\"\n  end\n  subscription\nend\n</code></pre>\n"}, {"tags": ["ruby", "coffeescript", "haml"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1573793462, "post_id": 58854393, "comment_id": 104009517, "body": "If this is intended to be the answer to the question please flesh it out with a better explanation."}], "tags": [], "owner": {"reputation": 1073, "user_id": 905620, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fdbde939c26c4e45382060473ce72260?s=128&d=identicon&r=PG", "display_name": "prosto.vint", "link": "https://stackoverflow.com/users/905620/prosto-vint"}, "is_accepted": false, "score": -1, "last_activity_date": 1573726826, "creation_date": 1573726826, "answer_id": 58854393, "question_id": 58845731, "link": "https://stackoverflow.com/questions/58845731/how-to-add-attributes-for-script-tag-in-haml-using-coffeescript/58854393#58854393", "title": "How to add attributes for &lt;script&gt; tag in HAML using CoffeeScript?", "body": "<p>My bad :(</p>\n\n<p>You should use <code>$(document).on 'turbolinks:load', -&gt;</code> for this case without any additional attributes</p>\n"}], "owner": {"reputation": 1073, "user_id": 905620, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fdbde939c26c4e45382060473ce72260?s=128&d=identicon&r=PG", "display_name": "prosto.vint", "link": "https://stackoverflow.com/users/905620/prosto-vint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1581306926, "creation_date": 1573679772, "last_edit_date": 1581306926, "question_id": 58845731, "link": "https://stackoverflow.com/questions/58845731/how-to-add-attributes-for-script-tag-in-haml-using-coffeescript", "title": "How to add attributes for &lt;script&gt; tag in HAML using CoffeeScript?", "body": "<p>I'm using HAML with Coffeescript and have an issue with custom tag <code>&lt;script&gt;</code> being added.</p>\n\n<p>I have <code>index.haml</code> with some content:</p>\n\n<pre><code>%h1 Some text\n\n:coffee\n $ -&gt;\n   $('.some_html_elm').some_function;\n...\n</code></pre>\n\n<p>This markup is generating HTML with a <code>&lt;script&gt;</code> tag.</p>\n\n<p>I need to add an attribute <code>data-turbolinks-eval=false</code> (code-examples.net/en/q/13ba02e) to the <code>&lt;script&gt;</code> tag, but I can`t find a solution. </p>\n\n<p>How can I do that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cron", "rvm"], "comments": [{"owner": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 2, "creation_date": 1573676283, "post_id": 58844724, "comment_id": 103963561, "body": "Here you can find more info about cron and wrappers: <a href=\"https://rvm.io/deployment/cron\" rel=\"nofollow noreferrer\">rvm.io/deployment/cron</a>"}, {"owner": {"reputation": 388, "user_id": 2572790, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c0f745b29e610fbf2d4298e3bec8e14f?s=128&d=identicon&r=PG", "display_name": "user2572790", "link": "https://stackoverflow.com/users/2572790/user2572790"}, "reply_to_user": {"reputation": 5935, "user_id": 365860, "user_type": "registered", "accept_rate": 69, "profile_image": "https://i.stack.imgur.com/PPe6C.jpg?s=128&g=1", "display_name": "Nezir", "link": "https://stackoverflow.com/users/365860/nezir"}, "edited": false, "score": 1, "creation_date": 1573681141, "post_id": 58844724, "comment_id": 103965656, "body": "Thanks, I found it at another path - /root/.rvm/wrappers/ruby-2.6.3, instead of above"}], "owner": {"reputation": 388, "user_id": 2572790, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/c0f745b29e610fbf2d4298e3bec8e14f?s=128&d=identicon&r=PG", "display_name": "user2572790", "link": "https://stackoverflow.com/users/2572790/user2572790"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 86, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573675248, "creation_date": 1573675248, "question_id": 58844724, "link": "https://stackoverflow.com/questions/58844724/how-to-prepare-wrapper-for-ruby-2-6-1", "title": "How to prepare wrapper for ruby-2.6.1", "body": "<p>I have a ubuntu 16 with rvm and some rubies install, default is 2.6.1</p>\n\n<p>Also I have a directory <code>/usr/local/rvm/wrappers</code> with folders:</p>\n\n<pre><code>default  ruby-2.0.0-p481  ruby-2.0.0-p481@global  ruby-2.1.5  ruby-2.1.5@global\n</code></pre>\n\n<p>But working Ruby version is 2.6.1 - <code>which ruby</code> returns <code>/usr/local/rvm/rubies/ruby-2.6.3/bin/ruby</code></p>\n\n<p>Finally, I need to use crontab rows to schedule rails scripts, such way:</p>\n\n<pre><code>/usr/local/rvm/wrappers/ruby-2.6.1/rails sitemap:generate RAILS_ENV=production\n</code></pre>\n\n<p>How to create a ruby-2.6.1 folder into <code>/usr/local/rvm/wrappers</code>?</p>\n"}, {"tags": ["arrays", "ruby", "string", "sorting", "integer"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1573671758, "post_id": 58843336, "comment_id": 103961521, "body": "Don&#39;t forget <code>sort_by</code> which avoids the <code>a</code>/<code>b</code> thing."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1573671857, "post_id": 58843336, "comment_id": 103961563, "body": "One downside of the <code>to_s</code> approach is you get nonsense like <code>1, 11, 2, 20</code> and so on since they&#39;re sorted &quot;ASCIIabetically&quot;. The <code>partition</code> approach is probably the best solution here."}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1573680418, "post_id": 58843336, "comment_id": 103965330, "body": "Ups. Leaving just the partition way @3limin4t0r. As Cary has added something better with sort_by."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1573687356, "post_id": 58843336, "comment_id": 103967827, "body": "@SebastianPalma The other answer is also fine as long as you disclose it&#39;s boundaries. I&#39;ll remove my other comments since they are no longer relevant."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 7, "last_activity_date": 1573680425, "last_edit_date": 1573680425, "creation_date": 1573669461, "answer_id": 58843336, "question_id": 58843234, "link": "https://stackoverflow.com/questions/58843234/efficient-way-to-sort-an-array-of-numbers-and-string-in-ruby/58843336#58843336", "title": "Efficient way to sort an array of numbers and string in ruby?", "body": "<p>One way is to <code>partition</code> your array by those elements being Integer, to make sure they remain first and then sort the elements of each array:</p>\n\n<pre><code>[4,2,'b',5,'c','a',7].partition { |e| e.is_a?(Integer) }.flat_map(&amp;:sort)\n# [2, 4, 5, 7, \"a\", \"b\", \"c\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1573697427, "last_edit_date": 1573697427, "creation_date": 1573676282, "answer_id": 58844955, "question_id": 58843234, "link": "https://stackoverflow.com/questions/58843234/efficient-way-to-sort-an-array-of-numbers-and-string-in-ruby/58844955#58844955", "title": "Efficient way to sort an array of numbers and string in ruby?", "body": "<pre><code>arr.sort_by { |e| [e.is_a?(Integer) ? 0 : 1, e] }\n  #=&gt; [2, 4, 5, 7, \"a\", \"b\", \"c\"] \n\n[22, 'efg', 0, 'abc', -4].sort_by { |e| [e.is_a?(Integer) ? 0 : 1, e] }\n  #=&gt; [-4, 0, 22, \"abc\", \"efg\"] \n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\">Enumerable#sort_by</a>. <code>sort_by</code> performs pair-wise comparisons of 2-element arrays using the method <a href=\"https://ruby-doc.org/core-2.6.3/Array.html#method-i-3C-3D-3E\" rel=\"nofollow noreferrer\">Array#&lt;=></a>. See especially the third paragraph of that doc.</p>\n\n<p>The following could be used if, as in the example, the integers are single digits and the strings are single characters.</p>\n\n<pre><code>arr.sort_by(&amp;:ord)\n  #=&gt; [2, 4, 5, 7, \"a\", \"b\", \"c\"] \n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Integer.html#method-i-ord\" rel=\"nofollow noreferrer\">Integer#ord</a> and <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-ord\" rel=\"nofollow noreferrer\">String#ord</a>.</p>\n"}], "owner": {"reputation": 765, "user_id": 9015957, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xwHPf.jpg?s=128&g=1", "display_name": "vikas95prasad", "link": "https://stackoverflow.com/users/9015957/vikas95prasad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 193, "favorite_count": 0, "accepted_answer_id": 58843336, "answer_count": 2, "score": 6, "last_activity_date": 1573697427, "creation_date": 1573669019, "question_id": 58843234, "link": "https://stackoverflow.com/questions/58843234/efficient-way-to-sort-an-array-of-numbers-and-string-in-ruby", "title": "Efficient way to sort an array of numbers and string in ruby?", "body": "<p>Input : </p>\n\n<pre><code>arr = [4,2,'b',5,'c','a',7]\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[2,4,5,7,'a','b','c']\n</code></pre>\n\n<p>I can think of this : </p>\n\n<pre><code>int_arr = arr.select {|x| x.instance_of?(Integer)}.sort\nstr_arr = arr.select {|x| x.instance_of?(String)}.sort\n\nint_arr + str_arr\n</code></pre>\n\n<p>Please suggest a efficient way to do it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 2911274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885d319dadfabdcff84fbbf44980b644?s=128&d=identicon&r=PG&f=1", "display_name": "EvilJoe", "link": "https://stackoverflow.com/users/2911274/eviljoe"}, "edited": false, "score": 0, "creation_date": 1573669115, "post_id": 58843067, "comment_id": 103960381, "body": "Thanks for the response.  I am not sure this is going to be usable though.  This will do a whole new query.  This will potentially be called 50+ times.  And I want to avoid 50 round trips to the database.  To avoid this, I am eagerly loading all Parent and Child instances."}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "reply_to_user": {"reputation": 125, "user_id": 2911274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885d319dadfabdcff84fbbf44980b644?s=128&d=identicon&r=PG&f=1", "display_name": "EvilJoe", "link": "https://stackoverflow.com/users/2911274/eviljoe"}, "edited": false, "score": 0, "creation_date": 1573669425, "post_id": 58843067, "comment_id": 103960524, "body": "What do you exactly want to achieve, the same queries are cached so it doesn&#39;t matter if you call them one time or multiple times. Or you can memoize them to stop being called multiple times, check my edit."}, {"owner": {"reputation": 125, "user_id": 2911274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885d319dadfabdcff84fbbf44980b644?s=128&d=identicon&r=PG&f=1", "display_name": "EvilJoe", "link": "https://stackoverflow.com/users/2911274/eviljoe"}, "edited": false, "score": 0, "creation_date": 1573669681, "post_id": 58843067, "comment_id": 103960634, "body": "In reality I have three layers of one-to-many relationships.  I want to eagerly request all of the records (including some extra eager calls).  Then, I would like to filter each level of those results in Ruby code that can be unit tested."}, {"owner": {"reputation": 125, "user_id": 2911274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885d319dadfabdcff84fbbf44980b644?s=128&d=identicon&r=PG&f=1", "display_name": "EvilJoe", "link": "https://stackoverflow.com/users/2911274/eviljoe"}, "edited": false, "score": 0, "creation_date": 1573669838, "post_id": 58843067, "comment_id": 103960696, "body": "Some other potential solutions include...  1. replacing the ActiveRecord::Relation::CollectionsProxy with a simple array.  I have not been able to figure out how to do this.  2.  Detaching the all of the instances from the database session.  This also seems impossible to do."}], "tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1573669519, "last_edit_date": 1573669519, "creation_date": 1573668307, "answer_id": 58843067, "question_id": 58842865, "link": "https://stackoverflow.com/questions/58842865/in-rails-can-i-filter-one-to-many-relationships-without-updating-the-database/58843067#58843067", "title": "In Rails, can I filter one-to-many relationships without updating the database", "body": "<p>Add an instance method in <code>Parent</code> model</p>\n\n<pre><code>def filtered_children\n  children.where.not(\"name like ?\", '%foo%')\nend\n</code></pre>\n\n<p>Call <code>filtered_children</code> wherever required, it doesn't make sense to reset the existing association instance variable. The same queries are cached so it doesn't matter if you call them one time or multiple times. But you can always <code>memoize</code> the output of a method to make sure the the method is not evaluated again second time onwards,</p>\n\n<pre><code>def filtered_children\n  @filtered_children ||= children.where.not(\"name like ?\", '%foo%')\nend\n</code></pre>\n\n<p>Hope that helps!</p>\n"}, {"comments": [{"owner": {"reputation": 125, "user_id": 2911274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885d319dadfabdcff84fbbf44980b644?s=128&d=identicon&r=PG&f=1", "display_name": "EvilJoe", "link": "https://stackoverflow.com/users/2911274/eviljoe"}, "edited": false, "score": 0, "creation_date": 1574168444, "post_id": 58912387, "comment_id": 104128230, "body": "This will not work because that &quot;reject&quot; function will modify the database."}, {"owner": {"reputation": 36, "user_id": 9037613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UfvEYsETWTE/AAAAAAAAAAI/AAAAAAAAAHE/uEYmAjlXEQQ/photo.jpg?sz=128", "display_name": "Kvr Ramya", "link": "https://stackoverflow.com/users/9037613/kvr-ramya"}, "reply_to_user": {"reputation": 125, "user_id": 2911274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885d319dadfabdcff84fbbf44980b644?s=128&d=identicon&r=PG&f=1", "display_name": "EvilJoe", "link": "https://stackoverflow.com/users/2911274/eviljoe"}, "edited": false, "score": 0, "creation_date": 1574170236, "post_id": 58912387, "comment_id": 104129236, "body": "@EvilJoe <code>Reject</code> function won&#39;t remove from db. assigning the remaining objects to <code>parent.children</code> will remove from db."}, {"owner": {"reputation": 125, "user_id": 2911274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885d319dadfabdcff84fbbf44980b644?s=128&d=identicon&r=PG&f=1", "display_name": "EvilJoe", "link": "https://stackoverflow.com/users/2911274/eviljoe"}, "edited": false, "score": 0, "creation_date": 1574262454, "post_id": 58912387, "comment_id": 104170396, "body": "I am sure that it does because that is what prompted this whole post.  In the end, I had to create new classes &amp; place my model object hierarchy in these &quot;server-side filterable&quot; classes.  Then, I did the filtering from those because they were using regular arrays instead of ActiveRecord proxies."}, {"owner": {"reputation": 125, "user_id": 2911274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885d319dadfabdcff84fbbf44980b644?s=128&d=identicon&r=PG&f=1", "display_name": "EvilJoe", "link": "https://stackoverflow.com/users/2911274/eviljoe"}, "edited": false, "score": 0, "creation_date": 1574695693, "post_id": 58912387, "comment_id": 104313242, "body": "Ah, you are correct, but I would like to keep the objects in their current structure (with some of them filtered out).  The structure is complicated and a duplicate of the structure would be fragile to maintain."}], "tags": [], "owner": {"reputation": 36, "user_id": 9037613, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-UfvEYsETWTE/AAAAAAAAAAI/AAAAAAAAAHE/uEYmAjlXEQQ/photo.jpg?sz=128", "display_name": "Kvr Ramya", "link": "https://stackoverflow.com/users/9037613/kvr-ramya"}, "is_accepted": false, "score": 0, "last_activity_date": 1574170132, "last_edit_date": 1574170132, "creation_date": 1574072600, "answer_id": 58912387, "question_id": 58842865, "link": "https://stackoverflow.com/questions/58842865/in-rails-can-i-filter-one-to-many-relationships-without-updating-the-database/58912387#58912387", "title": "In Rails, can I filter one-to-many relationships without updating the database", "body": "<p>DB update is happening because filtered records are being assigned back to <code>parent.children</code>. Instead another variable can be used.</p>\n\n<p><code>filtered_children = parent.children.reject { |child| child.name.include?('foo') }</code></p>\n"}], "owner": {"reputation": 125, "user_id": 2911274, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/885d319dadfabdcff84fbbf44980b644?s=128&d=identicon&r=PG&f=1", "display_name": "EvilJoe", "link": "https://stackoverflow.com/users/2911274/eviljoe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1574170132, "creation_date": 1573667483, "question_id": 58842865, "link": "https://stackoverflow.com/questions/58842865/in-rails-can-i-filter-one-to-many-relationships-without-updating-the-database", "title": "In Rails, can I filter one-to-many relationships without updating the database", "body": "<p>I am using Rails 5 and I want to be able to filter a one-to-many relationship to only send a subset of the child items to the client.  The data model is pretty standard, and looks something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Parent &lt; ApplicationRecord\n  has_many :children, class_name: 'Child'\nend\n\nclass Child &lt; ApplicationRecord\n  belongs_to :parent\nend\n</code></pre>\n\n<p>When the client makes a call, I only want to return <em>some</em> of the <code>Child</code> instances for a <code>Parent</code>.</p>\n\n<p>This is also complicated because the logic about which <code>Child</code> objects should be returned is absurdly complicated, so I am doing it in Ruby instead of the database.</p>\n\n<p>Whenever I execute something like the following, Rails is attempting to update the database to remove the association.  I don't want the database to be updated.  I just want to filter the results before they are sent to the client.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>parent.children = parent.children.reject { |child| child.name.include?('foo') }\n</code></pre>\n\n<p>Is there a way to accomplish this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 11006837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U2cg1Ue_-3k/AAAAAAAAAAI/AAAAAAAAe0w/97SmbpewEUY/photo.jpg?sz=128", "display_name": "Beno&#238;t Jeaurond", "link": "https://stackoverflow.com/users/11006837/beno%c3%aet-jeaurond"}, "edited": false, "score": 0, "creation_date": 1573671673, "post_id": 58842437, "comment_id": 103961482, "body": "My gem has access to <code>Rails.application</code> and the first line works well, thank you!"}], "tags": [], "owner": {"reputation": 3259, "user_id": 2424975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/jDtKZ.jpg?s=128&g=1", "display_name": "Cereal", "link": "https://stackoverflow.com/users/2424975/cereal"}, "is_accepted": true, "score": 2, "last_activity_date": 1573665706, "creation_date": 1573665706, "answer_id": 58842437, "question_id": 58842345, "link": "https://stackoverflow.com/questions/58842345/connect-ruby-gem-to-rails-database/58842437#58842437", "title": "Connect Ruby Gem to Rails database", "body": "<p>Assuming the gem has access to the <code>Rails.application</code>, you can access the database config file with</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>db_config = Rails.application.config.database_configuration[Rails.env]\n</code></pre>\n\n<p>If it doesn't, you can parse the file yourself. </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>db_config = YAML.load(ERB.new(File.read('./config/database.yml')).result)\n</code></pre>\n\n<p>Once you have your configuration, you can pass it into the connector.</p>\n"}], "owner": {"reputation": 113, "user_id": 11006837, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-U2cg1Ue_-3k/AAAAAAAAAAI/AAAAAAAAe0w/97SmbpewEUY/photo.jpg?sz=128", "display_name": "Beno&#238;t Jeaurond", "link": "https://stackoverflow.com/users/11006837/beno%c3%aet-jeaurond"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 58842437, "answer_count": 1, "score": 0, "last_activity_date": 1573665706, "creation_date": 1573665359, "question_id": 58842345, "link": "https://stackoverflow.com/questions/58842345/connect-ruby-gem-to-rails-database", "title": "Connect Ruby Gem to Rails database", "body": "<p>I'm modifying a Ruby Gem to allow it to modify a Rails database via a rake task.</p>\n\n<p>I was able to connect the database and modify its content by passing the database configuration as parameters to the rake task, which then called the <code>ActiveRecord::Base.establish_connection</code>. My question is, how could the Gem connect to the Rails database without having to specify the database configuration as parameters in the rake task.</p>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573683281, "post_id": 58841856, "comment_id": 103966534, "body": "Does this legacy code use Kernel.open enough that you can&#39;t just change it to use Net::HTTP and then just use webmock? I mean you&#39;re really just replacing <code>Kernel.open(url).read</code> with <code>Net::HTTP.get(url)</code>."}, {"owner": {"reputation": 316, "user_id": 10348047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3Ibild3Cqng/AAAAAAAAAAI/AAAAAAAAAOY/npBifQvt_DM/photo.jpg?sz=128", "display_name": "Tim Baverstock", "link": "https://stackoverflow.com/users/10348047/tim-baverstock"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573720708, "post_id": 58841856, "comment_id": 103977243, "body": "Kernel.open.read handles 302 redirects; Net::HTTP doesn&#39;t, so it&#39;s not a drop-in replacement, sadly. Thanks for the suggestion though: I think I&#39;ll just go with the wrapper."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573733592, "post_id": 58841856, "comment_id": 103984573, "body": "I&#39;m not sure if this is still an issue but Kernel.open has been regarded as a big security hole as its easy to mistakenly execute remote code."}, {"owner": {"reputation": 316, "user_id": 10348047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3Ibild3Cqng/AAAAAAAAAAI/AAAAAAAAAOY/npBifQvt_DM/photo.jpg?sz=128", "display_name": "Tim Baverstock", "link": "https://stackoverflow.com/users/10348047/tim-baverstock"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573810999, "post_id": 58841856, "comment_id": 104016110, "body": "@max Yeah, we should prohibit it, but our URLs are internal and we like the 302 redirects. I&#39;ll probably create an internal ticket for its replacement and a Rubocop hack to ban <code>require open-uri</code>."}], "answers": [{"comments": [{"owner": {"reputation": 316, "user_id": 10348047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3Ibild3Cqng/AAAAAAAAAAI/AAAAAAAAAOY/npBifQvt_DM/photo.jpg?sz=128", "display_name": "Tim Baverstock", "link": "https://stackoverflow.com/users/10348047/tim-baverstock"}, "edited": false, "score": 0, "creation_date": 1573826927, "post_id": 58860876, "comment_id": 104024584, "body": "I completely missed the difference between <code>allow(Kernel)</code> vs <code>allow_any_instance_of(Kernel)</code> - If I use <code>allow(Kernel)</code> then I get the url where I expected it. I really hate the Ruby type system. I&#39;ve never found a compelling situation where wild duck typing is a meaningful part of a solution."}, {"owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "reply_to_user": {"reputation": 316, "user_id": 10348047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3Ibild3Cqng/AAAAAAAAAAI/AAAAAAAAAOY/npBifQvt_DM/photo.jpg?sz=128", "display_name": "Tim Baverstock", "link": "https://stackoverflow.com/users/10348047/tim-baverstock"}, "edited": false, "score": 0, "creation_date": 1573834880, "post_id": 58860876, "comment_id": 104029131, "body": "Sorry to hear that. But if you can&#39;t change the code, the only thing I can suggest is to learn more. One thing that helped me was &quot;Metaprogramming Ruby&quot; <a href=\"https://pragprog.com/book/ppmetr/metaprogramming-ruby\" rel=\"nofollow noreferrer\">pragprog.com/book/ppmetr/metaprogramming-ruby</a>"}, {"owner": {"reputation": 316, "user_id": 10348047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3Ibild3Cqng/AAAAAAAAAAI/AAAAAAAAAOY/npBifQvt_DM/photo.jpg?sz=128", "display_name": "Tim Baverstock", "link": "https://stackoverflow.com/users/10348047/tim-baverstock"}, "edited": false, "score": 0, "creation_date": 1574159015, "post_id": 58860876, "comment_id": 104122815, "body": "Thanks for the suggestion. Fixing the &#39;allow_any_instance_of&#39; issue got me over the hump, so I have what I need for now. Longer term, we&#39;re moving to JRuby and rewriting the active code into Kotlin, which provides most of the purported advantages while being regular enough for the IDE to give active help. We only used Ruby originally because it came along with Calabash/Cucumber and nobody recognised the unreliable and unmaintainable code it would cause."}], "tags": [], "owner": {"reputation": 4338, "user_id": 299774, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/eab8557a9cb59427455bac3cc59d2802?s=128&d=identicon&r=PG", "display_name": "Grzegorz", "link": "https://stackoverflow.com/users/299774/grzegorz"}, "is_accepted": true, "score": 0, "last_activity_date": 1573746916, "creation_date": 1573746916, "answer_id": 58860876, "question_id": 58841856, "link": "https://stackoverflow.com/questions/58841856/does-rspec-allow-me-to-select-mocks-with-a-matcher/58860876#58860876", "title": "Does RSpec allow me to select mocks with a matcher?", "body": "<p>AFAIU your question correctly, you need something like this, to tell the mock to behave \"normally\":</p>\n\n<pre><code>allow(Kernel).to receive(:open).with(url).and_return(stub)\nallow(Kernel).to receive(:open).with(anything).and_call_original # I can't check now, but there's a chance this one should go first, but I doubt it\n</code></pre>\n\n<p>then just </p>\n\n<pre><code>allow(stub).to receive(:read).and_return('something')\n</code></pre>\n\n<p>If you have to mock <code>Kernel.open</code> for more URLs, it's getting a little bit messy but the principle is the same</p>\n\n<pre><code>allow(Kernel).to receive(:open).with(first_url).and_return(first_stub)\nallow(Kernel).to receive(:open).with(second_url).and_return(second_stub)\nallow(Kernel).to receive(:open).with(anything).and_call_original # I can't check now, but there's a chance this one should go first\n\n\nallow(first_stub).to receive(:read).and_return('something')\nallow(second_stub).to receive(:read).and_return('something else')\n</code></pre>\n\n<p>Unless I completely missed the point of your question?</p>\n"}, {"tags": [], "owner": {"reputation": 316, "user_id": 10348047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3Ibild3Cqng/AAAAAAAAAAI/AAAAAAAAAOY/npBifQvt_DM/photo.jpg?sz=128", "display_name": "Tim Baverstock", "link": "https://stackoverflow.com/users/10348047/tim-baverstock"}, "is_accepted": false, "score": 0, "last_activity_date": 1573826995, "last_edit_date": 1573826995, "creation_date": 1573810856, "answer_id": 58874188, "question_id": 58841856, "link": "https://stackoverflow.com/questions/58841856/does-rspec-allow-me-to-select-mocks-with-a-matcher/58874188#58874188", "title": "Does RSpec allow me to select mocks with a matcher?", "body": "<p>I couldn't find anything in RSpec's mocking system to cope with the fact that the 'Kernel.open(url)' method mock has the url as the instance if you use <code>allow_any_instance_of(Kernel).to(receive(:open))</code>. so I cooked up a bodge, and then realised I didn't need the 'any_instance_of' bit:</p>\n\n<pre><code>def stub_kernel_open_read(url: 'fake://your_url_parameter_is_wrong', args: ['arg1', 'arg2', k: :v_etc], **rest)\n  allow(Kernel).to(receive(:open).with(*([url] + args)).and_return(reading_double(rest)))\nend\n\ndef reading_double(return_or_raise)\n  double.tap do |d|\n    if return_or_raise[:returning]\n      allow(d).to(receive(:read).and_return(return_or_raise[:returning]))\n    else\n      allow(d).to(receive(:read).and_raise(return_or_raise[:raising]))\n    end\n  end\nend\n</code></pre>\n\n<p>This code arose from trying to remove the use of <code>receive_message_chain</code> which was using 'any_instance'.</p>\n\n<p>Oh, and I ran into all sorts of bizarre shenannigans trying to stub any methods with <code>(*a, **b)</code> arguments, even though that seems to work for the toy examples I tried to cook, so I have no idea what's going on. It's that sort of arcane nonsense that sets me against Ruby and duck-typing.</p>\n"}], "owner": {"reputation": 316, "user_id": 10348047, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-3Ibild3Cqng/AAAAAAAAAAI/AAAAAAAAAOY/npBifQvt_DM/photo.jpg?sz=128", "display_name": "Tim Baverstock", "link": "https://stackoverflow.com/users/10348047/tim-baverstock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "accepted_answer_id": 58860876, "answer_count": 2, "score": 0, "last_activity_date": 1573826995, "creation_date": 1573663771, "question_id": 58841856, "link": "https://stackoverflow.com/questions/58841856/does-rspec-allow-me-to-select-mocks-with-a-matcher", "title": "Does RSpec allow me to select mocks with a matcher?", "body": "<p>I have a number of calls to</p>\n\n<pre><code>Kernel.open(url).read\n</code></pre>\n\n<p>in some legacy code, which I'm trying to mock for characterisation tests before wide-scale refactoring.</p>\n\n<p>I didn't like the way arguments are ignored by</p>\n\n<pre><code>allow_any_instance_of(Kernel).to(receive_message_chain(:open, :read)\n    .and_return(return_value))\n</code></pre>\n\n<p>so I replaced it with</p>\n\n<pre><code>def stub_kernel_open_read(args: '[arg1, arg2, k: v, etc]', returning:)\n  allow_any_instance_of(Kernel).to(receive(:open).with(*args)).and_return(double.tap { |d|\n    allow(d).to(receive(:read)).and_return(returning)\n  })\nend\n</code></pre>\n\n<p>but I find I'm getting these sorts of errors:</p>\n\n<pre><code>       \"http://my-fake-server/whatever\" received :open with unexpected arguments\n     expected: (\"http://my-fake-server/whatever\", {:http_basic_authentication=&gt;[\"asdf\", \"asdf\"]})\n          got: ({:http_basic_authentication=&gt;[\"asdf\", \"asdf\"]})\n   Diff:\n   @@ -1,3 +1,2 @@\n   -[\"http://my-fake-server/whatever\",\n   - {:http_basic_authentication=&gt;[\"asdf\", \"asdf\"]}]\n   +[{:http_basic_authentication=&gt;[\"asdf\", \"asdf\"]}]\n\n    Please stub a default value first if message might be received with other args as well. \n</code></pre>\n\n<p>So I found that if I expanded my stub to this:</p>\n\n<pre><code>allow_any_instance_of(Kernel).to(receive(:open).with(*args)) { |instance|\n  return double.tap { |d|\n    allow(d).to(receive(:read)) {\n      return returning\n    }\n  }\n}\n</code></pre>\n\n<p>then <code>instance</code> has the value of the URL. This is fine so far as it goes, and I could rig up a list of allowed URLs, but it feels mucky.</p>\n\n<p>Is there something like</p>\n\n<pre><code>allow_any_instance_of(Kernel).that(eq('http://whatever')).to(receive(:open))\n</code></pre>\n\n<p>or am I just barking up entirely the wrong alley?</p>\n\n<p>Obviously I could use global search-replace to wrap the <code>Kernel.open(url).read</code> code, and mock that global properly, but I'd prefer to avoid that if possible.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "algorithm", "sorting", "hashmap"], "answers": [{"tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": false, "score": 2, "last_activity_date": 1573658745, "last_edit_date": 1573658745, "creation_date": 1573658374, "answer_id": 58840231, "question_id": 58840033, "link": "https://stackoverflow.com/questions/58840033/convert-ruby-hash-to-ranks-with-no-repeats/58840231#58840231", "title": "Convert Ruby Hash to ranks with no repeats", "body": "<p>Here's a big hint... Take your array and</p>\n\n<pre><code>arr.sort{|x,y| x[:vote_size] &lt;=&gt; y[:vote_size]}\n</code></pre>\n\n<p>This will give you a sorted array of vote sizes.</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1573666322, "post_id": 58842038, "comment_id": 103959082, "body": "...and then <code>arr[i]</code> has rank <code>i+1</code> if <code>arr</code> is the array returned by this expression."}], "tags": [], "owner": {"reputation": 835, "user_id": 1325887, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5fe8c14c0d29e8c34cfbb3820599d311?s=128&d=identicon&r=PG", "display_name": "Linh Nguyen", "link": "https://stackoverflow.com/users/1325887/linh-nguyen"}, "is_accepted": false, "score": 2, "last_activity_date": 1573664811, "last_edit_date": 1573664811, "creation_date": 1573664364, "answer_id": 58842038, "question_id": 58840033, "link": "https://stackoverflow.com/questions/58840033/convert-ruby-hash-to-ranks-with-no-repeats/58842038#58842038", "title": "Convert Ruby Hash to ranks with no repeats", "body": "<p>You can try this, that means we sort by combination vote_size and created_at, <code>vote_size</code> descending and <code>created_at</code> ascending in case there are two equal values for <code>vote_size</code></p>\n\n<pre><code>an_array.sort_by {|a| [-a[:vote_size] , a[:created_at]] }\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 7508517, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebe377447cfa85aec1efa6bba1a6b9b7?s=128&d=identicon&r=PG&f=1", "display_name": "Doobie", "link": "https://stackoverflow.com/users/7508517/doobie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573664811, "creation_date": 1573657762, "last_edit_date": 1573664341, "question_id": 58840033, "link": "https://stackoverflow.com/questions/58840033/convert-ruby-hash-to-ranks-with-no-repeats", "title": "Convert Ruby Hash to ranks with no repeats", "body": "<pre><code>[{:listing_id=&gt;1, :vote_size=&gt;1, :created_at=&gt;Wed, 13 Nov 2019 02:19:45 UTC +00:00},\n {:listing_id=&gt;2, :vote_size=&gt;0, :created_at=&gt;Thu, 14 Nov 2019 02:19:45 UTC +00:00},\n {:listing_id=&gt;3, :vote_size=&gt;0, :created_at=&gt;Fri, 15 Nov 2019 02:19:45 UTC +00:00}]\n</code></pre>\n\n<p>I have the following hash of listing IDs, the number of votes and the created_at date for said listing in Ruby (higher vote_size is better), and I'd like to rank them. In other words, I want to get the rank from some sort of function and then update the rank on the listing via listing.update_attribute(:rank, function-call) or something of that sort. Rank 1 is the best. If there are listings with the same amount of votes only one of them should get the rank and the other listing should get a rank below. (Let's say the tiebreaker is the listing created_at date, whoever created the listing first gets the higher rank.)</p>\n\n<p>This is what I have so far and well I'm stuck lol and could really use some help.</p>\n\n<pre><code>namespace :server do\n  desc \"update the listings rank\"\n  task update_listing_rank: :environment do\n      listings = Listing.all\n      all_listings_with_votes = total_votes_for_listing listings\n\n\n      all_listings_with_votes.map{ |e|\n          puts all_listings_with_votes.index(e) + 1\n        }\n\n  end\n\n  def total_votes_for_listing listings\n    listings.map do |listing|\n      {listing_id: listing.id, vote_size: listing.votes.size, created_at: listing.created_at}\n    end\n  end\n\n\nend\n</code></pre>\n"}, {"tags": ["regex", "ruby", "switch-statement"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1573655967, "post_id": 58839469, "comment_id": 103953208, "body": "how do you know when conditions are not met? What the test input?"}, {"owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "edited": false, "score": 1, "creation_date": 1573656052, "post_id": 58839469, "comment_id": 103953256, "body": "I think Ruby&#39;s case accepts regular expressions. You don&#39;t need to call match, you can just use /n/."}, {"owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "edited": false, "score": 0, "creation_date": 1573667771, "post_id": 58839469, "comment_id": 103959751, "body": "The test input would be something like <code>2 n</code>, <code>4 sw</code>, <code>1e</code>, or <code>3s</code>. I believe the conditions aren&#39;t being met because my <code>else</code> code is being executed."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573669063, "post_id": 58839469, "comment_id": 103960358, "body": "@G4145, &quot;...case accepts regular expressions.&quot; is vague.  Case statements employ the method <code>===</code> to determine if a <code>when</code> clause applies. Here that is the method <a href=\"https://ruby-doc.org/core-2.6.3/Regexp.html#method-i-3D-3D-3D\" rel=\"nofollow noreferrer\">Regexp#===</a>. For example, <code>&#47;a&#47; === &#39;cat&#39; #=&gt; true</code>, whereas <code>&#47;a&#47; === &#39;dog&#39; #=&gt; false</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1573669720, "post_id": 58839469, "comment_id": 103960652, "body": "You want <code>move.gsub(&#47;[a-z]&#47;, &#39;&#39;).to_i</code> and so on. <code>move.gsub(&#47;[^a-z]&#47;, &#39;&#39;)</code> removes all the digits, so you are left with a string of letters which, when converted to an integer, returns zero."}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 3, "creation_date": 1573660981, "post_id": 58839687, "comment_id": 103956124, "body": "You might want to add to the answer that you changed <code>when move.match?(&#47;n&#47;)</code> into <code>when &#47;n&#47;</code> which is the important bit here. You might also want to add why this change is needed. <i>&quot;Couldn&#39;t you reduce your code to something like this?&quot;</i> isn&#39;t the best explanation."}, {"owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "edited": false, "score": 0, "creation_date": 1573667543, "post_id": 58839687, "comment_id": 103959650, "body": "Thanks, I didn&#39;t know case statements accept regex. However, I&#39;m still not sure why  <code>.match?</code> or <code>.include?</code> aren&#39;t working. Also, you are right about the gsub. Good catch."}], "tags": [], "owner": {"reputation": 1892, "user_id": 3158810, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/1ebf9e065f654642fecfee399b439030?s=128&d=identicon&r=PG&f=1", "display_name": "G4143", "link": "https://stackoverflow.com/users/3158810/g4143"}, "is_accepted": true, "score": 2, "last_activity_date": 1573657295, "last_edit_date": 1573657295, "creation_date": 1573656588, "answer_id": 58839687, "question_id": 58839469, "link": "https://stackoverflow.com/questions/58839469/why-are-my-when-conditions-not-being-met-if-string-contains-substring/58839687#58839687", "title": "Why are my when conditions not being met if string contains substring?", "body": "<p>Couldn't you reduce your code to something like this?</p>\n\n<pre><code>move = gets.chomp\n\ncase move\nwhen /n/\n  puts \"called #{move}\" #add your stuff here\nwhen /s/\n  puts \"called #{move}\"\nwhen /e/\n  puts \"called #{move}\"\nwhen /w/\n  puts \"called #{move}\"\nelse\n  puts \"Input '#{move}' not recognized!\"\nend\n</code></pre>\n\n<p>Just a side note about your gsub</p>\n\n<pre><code>move.gsub(/[^a-z]/, '').to_i\n</code></pre>\n\n<p>Shouldn't you be using?</p>\n\n<pre><code>move.gsub(/[a-z]/, '').to_i\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573677592, "post_id": 58843148, "comment_id": 103964108, "body": "@CarySwoveland yes ! was typo, band changed regex too, thanks."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1573677560, "last_edit_date": 1573677560, "creation_date": 1573668657, "answer_id": 58843148, "question_id": 58839469, "link": "https://stackoverflow.com/questions/58839469/why-are-my-when-conditions-not-being-met-if-string-contains-substring/58843148#58843148", "title": "Why are my when conditions not being met if string contains substring?", "body": "<p>Not sure what input data you expect but should it be something like this?</p>\n\n<pre><code>loc = {x: 0, y: 0}\nputs 'make a move n s e w'\nmove = gets.chomp.downcase\n\nunless move[/\\A[n,s,e,w]\\d+\\z/]\n  puts \"Input '#{move}' not recognized! should start with n, s, e, w,\"\nend\n\nmove_distance = move[/\\d+/].to_i\n\ncase move\nwhen /^n/\n  loc[:y] += move_distance\nwhen /^s/\n  loc[:y] -= move_distance\nwhen /^e/\n  loc[:x] += move_distance\nwhen /^w/\n  loc[:x] -= move_distance\nelse\n  puts \"Input '#{move}' not recognized!\"\nend\n\nputs loc\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 58839687, "answer_count": 2, "score": 2, "last_activity_date": 1573677560, "creation_date": 1573655756, "last_edit_date": 1573670012, "question_id": 58839469, "link": "https://stackoverflow.com/questions/58839469/why-are-my-when-conditions-not-being-met-if-string-contains-substring", "title": "Why are my when conditions not being met if string contains substring?", "body": "<p>I'm having trouble figuring out why my <code>when</code> conditions aren't being met. Each should return true when <code>move</code> contains <code>\"n\"</code>, <code>\"s\"</code>, <code>\"e\"</code>, or <code>\"w\"</code> respectively. Here is a simplified version of my code:</p>\n\n<pre><code>loc = {x: 0, y: 0}\n\nmove = gets.chomp\ncase move\nwhen move.match?(/n/); loc[:y] += move.gsub(/[a-z]/, '').to_i\nwhen move.match?(/s/); loc[:y] -= move.gsub(/[a-z]/, '').to_i\nwhen move.match?(/e/); loc[:x] += move.gsub(/[a-z]/, '').to_i\nwhen move.match?(/w/); loc[:x] -= move.gsub(/[a-z]/, '').to_i\nelse; puts \"Input '#{move}' not recognized!\"\nend\n</code></pre>\n\n<p>I've also tried using <code>move.include?('n')</code>, etc. with no success.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-app-engine", "google-cloud-platform", "ruby-2.5"], "comments": [{"owner": {"reputation": 1949, "user_id": 11784749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YWnrE.jpg?s=128&g=1", "display_name": "Denis T.", "link": "https://stackoverflow.com/users/11784749/denis-t"}, "edited": false, "score": 0, "creation_date": 1573660328, "post_id": 58839261, "comment_id": 103955782, "body": "Following a <a href=\"https://cloud.google.com/appengine/docs/standard/ruby/quickstart\" rel=\"nofollow noreferrer\">guide</a> from the GCP documentation, I was able to successfully deploy a simple Ruby 2.5.7 app on GAE Standard.  Remember that specifying <code>runtime: ruby25</code> in your <b>app.yaml</b> file will make your Ruby 2.5 runtime environment use the latest stable <a href=\"https://www.ruby-lang.org/en/downloads/\" rel=\"nofollow noreferrer\">release</a> of Ruby 2.5 (which is currently 2.5.7)."}, {"owner": {"reputation": 1949, "user_id": 11784749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YWnrE.jpg?s=128&g=1", "display_name": "Denis T.", "link": "https://stackoverflow.com/users/11784749/denis-t"}, "edited": false, "score": 0, "creation_date": 1573660453, "post_id": 58839261, "comment_id": 103955840, "body": "Please add a minimal reproducible code to your question, including the content of your <b>app.yaml</b> and <b>Gemfile</b>."}, {"owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "reply_to_user": {"reputation": 1949, "user_id": 11784749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YWnrE.jpg?s=128&g=1", "display_name": "Denis T.", "link": "https://stackoverflow.com/users/11784749/denis-t"}, "edited": false, "score": 0, "creation_date": 1573667218, "post_id": 58839261, "comment_id": 103959486, "body": "@DenisT. added :)"}, {"owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "reply_to_user": {"reputation": 1949, "user_id": 11784749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YWnrE.jpg?s=128&g=1", "display_name": "Denis T.", "link": "https://stackoverflow.com/users/11784749/denis-t"}, "edited": false, "score": 0, "creation_date": 1573667289, "post_id": 58839261, "comment_id": 103959520, "body": "Note that I have no issues deploying the simple sinatra app provided by the guide. Thus far I have not been able to get the same or similar setups to work with Rails, however."}, {"owner": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "edited": false, "score": 1, "creation_date": 1573692335, "post_id": 58839261, "comment_id": 103969000, "body": "Try using <code>ruby &quot;~&gt; 2.5.5&quot;</code> in your Gemfile instead of a specific patchlevel like <code>ruby &quot;2.5.5&quot;</code>. I think that will unblock you and let you deploy successfully. It looks to me like the builder (which installs your gems and builds the application image) is running 2.5.7, but the runtime is still on 2.5.5. Which shouldn&#39;t be happening. (I&#39;ll make some inquiries internally and see if I can determine why this would happen.)"}, {"owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "edited": false, "score": 0, "creation_date": 1573702711, "post_id": 58839261, "comment_id": 103971223, "body": "That sounds like it might be exactly the problem, I&#39;ll try and get back to you"}], "answers": [{"tags": [], "owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "is_accepted": false, "score": 0, "last_activity_date": 1573703307, "creation_date": 1573703307, "answer_id": 58849089, "question_id": 58839261, "link": "https://stackoverflow.com/questions/58839261/proper-ruby-version-for-google-app-engine-ruby-standard-environment-w-rails/58849089#58849089", "title": "proper Ruby version for Google App Engine Ruby Standard Environment w/Rails", "body": "<p>As per Daniel Azuma's comment, it looks like changing the version constraint for <code>ruby</code> in my <code>Gemfile</code> to <code>ruby \"~&gt; 2.5.5\"</code> fixes the issue. My understanding is in the future this will no longer be necessary, but for now this is the workaround.</p>\n"}, {"tags": [], "owner": {"reputation": 769, "user_id": 782004, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/0MtM7.jpg?s=128&g=1", "display_name": "Daniel Azuma", "link": "https://stackoverflow.com/users/782004/daniel-azuma"}, "is_accepted": true, "score": 2, "last_activity_date": 1573761321, "creation_date": 1573761321, "answer_id": 58864785, "question_id": 58839261, "link": "https://stackoverflow.com/questions/58839261/proper-ruby-version-for-google-app-engine-ruby-standard-environment-w-rails/58864785#58864785", "title": "proper Ruby version for Google App Engine Ruby Standard Environment w/Rails", "body": "<p>Here's the official word from the Ruby App Engine runtime team.</p>\n\n<p><strong>If you have a Ruby version constraint in your Gemfile, <em>always</em> use a pessimistic version constraint (or other mechanism to allow more recent patchlevels), rather than locking to a specific patchlevel.</strong> For example, use something like <code>ruby \"~&gt; 2.5.5\"</code> to indicate 2.5.5 or any newer patchlevel, rather than <code>ruby \"2.5.5\"</code> or <code>ruby \"2.5.7\"</code>. This isn't a temporary workaround, but an actual requirement and best practice for App Engine standard.</p>\n\n<p>The reason is twofold. During a rollout of a new Ruby version, there may be a short period where the <code>bundle install</code> is run on a different Ruby patchlevel than the app itself. This is what you ran into, and it apparently is the expected behavior because the \"bundle builder\" component is rolled out independently from the runtime image.</p>\n\n<p>But more importantly, <strong>App Engine standard may upgrade your Ruby patchlevel at any time.</strong> Your app might be running on Ruby 2.5.6 today, but tomorrow you might find it upgraded to Ruby 2.5.7, even if you didn't redeploy explicitly. This is App Engine's intended behavior: it transparently applies critical updates and security patches, and that may include updating the patchlevel of the Ruby interpreter. (Note that App Engine only updates the Ruby patchlevel. It will never update your app from, say, Ruby 2.5 to Ruby 2.6 unless you explicitly tell it to use a Ruby 2.6 runtime.) Because of this feature, if your Gemfile specifies the Ruby version, it needs to be able to handle patchlevel updates, for example by using a pessimistic version constraint.</p>\n\n<p>As a secondary note, <code>.ruby-version</code> is <em>ignored</em> on App Engine standard environment. Note this is <em>different</em> from App Engine flexible environment, which uses the file as a way for your app to request a specific Ruby version to run on. The standard environment, however, chooses and controls the Ruby version for you, and you don't get a say.</p>\n\n<p>Apologies for the predicament. I'll work with the team to try to clarify our documentation on this.</p>\n"}], "owner": {"reputation": 468, "user_id": 4245513, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/19b22a9bdf0df02409abe74a19911150?s=128&d=identicon&r=PG", "display_name": "Sam Johnson", "link": "https://stackoverflow.com/users/4245513/sam-johnson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 58864785, "answer_count": 2, "score": 0, "last_activity_date": 1573761321, "creation_date": 1573655082, "last_edit_date": 1573667507, "question_id": 58839261, "link": "https://stackoverflow.com/questions/58839261/proper-ruby-version-for-google-app-engine-ruby-standard-environment-w-rails", "title": "proper Ruby version for Google App Engine Ruby Standard Environment w/Rails", "body": "<p>Using the default app.yaml configuration provided by Google for Google App Engine Ruby 2.5 standard environment, I cannot deploy successfully when using Rails. If I use Ruby 2.5.5 locally, and in my <code>.ruby-version</code> and <code>Gemfile</code>, the deploy fails with:</p>\n\n<pre><code>Your Ruby version is 2.5.7, but your Gemfile specified 2.5.5.\n</code></pre>\n\n<p>If I use Ruby 2.5.7 locally and in my <code>Gemfile</code> and <code>.ruby-version</code> file, the deploy succeeds, but visiting the app results in the following error in the logs:</p>\n\n<pre><code>bundler: failed to load command: rails (/srv/vendor/bundle/ruby/2.5.0/bin/rails)\nBundler::RubyVersionMismatch: Your Ruby version is 2.5.5, but your Gemfile specified 2.5.7\n</code></pre>\n\n<p>And note that I have properly set up <code>.gcloudignore</code> to include <code>.ruby-version</code> and other important dotfiles that are ignored by default by app engine.</p>\n\n<p>Quite the predicament!</p>\n\n<p>You can reproduce my build with this repo: <a href=\"https://github.com/sam0x17/ruby_standard_environment_version_issue\" rel=\"nofollow noreferrer\">https://github.com/sam0x17/ruby_standard_environment_version_issue</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1573657690, "post_id": 58839722, "comment_id": 103954166, "body": "I think it is what I&#39;m looking for, but how to implement if <code>GROUP_NAMES == company_data</code> should be <code>tax_nr = data.inquiry_fields.find_by(name: &#39;tax_id&#39;)</code> everything else should be <code>tax_nr = inquiry_fields.find_by(name: &#39;tax_nr&#39;)</code> ?"}, {"owner": {"reputation": 1651, "user_id": 4414956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a7ff9df014e5c92697372747c15d77?s=128&d=identicon&r=PG&f=1", "display_name": "nuaky", "link": "https://stackoverflow.com/users/4414956/nuaky"}, "reply_to_user": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "edited": false, "score": 0, "creation_date": 1573657940, "post_id": 58839722, "comment_id": 103954309, "body": "oh didn&#39;t notice that there is a difference with this value. I will update my answer"}], "tags": [], "owner": {"reputation": 1651, "user_id": 4414956, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/17a7ff9df014e5c92697372747c15d77?s=128&d=identicon&r=PG&f=1", "display_name": "nuaky", "link": "https://stackoverflow.com/users/4414956/nuaky"}, "is_accepted": true, "score": 1, "last_activity_date": 1573660656, "last_edit_date": 1573660656, "creation_date": 1573656703, "answer_id": 58839722, "question_id": 58839095, "link": "https://stackoverflow.com/questions/58839095/define-each-block-in-database-gem-migration/58839722#58839722", "title": "Define each block in database gem migration", "body": "<p>maybe create array with this values? For example:</p>\n\n<pre><code>class DisableTaxField &lt; ActiveRecord::Migration[5.2]\n  GROUP_NAMES = %w[company_data data personal_data acting_person].freeze\n\n  def change\n    GROUP_NAMES.each do |group_name|\n      tax_value = group_name == \"company_data\" ? \"tax_nr\" : \"tax_id\"\n      data = Group.find_by(name: group_name)\n      tax_nr = data.inquiry_fields.find_by(name: tax_value)\n      tax_nr.update!(required: false)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 58839722, "answer_count": 1, "score": 0, "last_activity_date": 1573660656, "creation_date": 1573654497, "question_id": 58839095, "link": "https://stackoverflow.com/questions/58839095/define-each-block-in-database-gem-migration", "title": "Define each block in database gem migration", "body": "<p>I'm just wondering is it possible to define each block in rails <code>gem data-migrate</code> to avoid repetition like below?</p>\n\n<pre><code>class DisableTaxField &lt; ActiveRecord::Migration[5.2]\ndef change\n  company_group = Group.find_by(name: 'company_data')\n  tax_nr = company_group.inquiry_fields.find_by(name: 'tax_nr')\n  tax_nr.update!(required: false)\n\n  data = Group.find_by(name: 'data')\n  tax_id = data.inquiry_fields.find_by(name: 'tax_id')\n  tax_id.update!(required: false)\n\n  data = Group.find_by(name: 'personal_data')\n  tax_id = data.inquiry_fields.find_by(name: 'tax_id')\n  tax_id.update!(required: false)\n\n  data = Group.find_by(name: 'acting_person')\n  tax_id = data.inquiry_fields.find_by(name: 'tax_id')\n  tax_id.update!(required: false)\nend\nend\n</code></pre>\n\n<p>Because only the name changes as you see</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "simple-form", "rails-activestorage"], "comments": [{"owner": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1573700261, "post_id": 58838848, "comment_id": 103970702, "body": "Instead of <code>f.input</code>, try using <code>f.file</code>"}, {"owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "reply_to_user": {"reputation": 2060, "user_id": 3944700, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4df64cd1de5941fb49263a19d80f1482?s=128&d=identicon&r=PG&f=1", "display_name": "hashrocket", "link": "https://stackoverflow.com/users/3944700/hashrocket"}, "edited": false, "score": 0, "creation_date": 1574009433, "post_id": 58838848, "comment_id": 104068637, "body": "Using f.file_field instead of f.input will make this direct upload working but then all error messages from simple form are not shown. Thanks anyway"}], "answers": [{"comments": [{"owner": {"reputation": 229, "user_id": 1532201, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/52483891276aaddbc0e5a1bcffe63293?s=128&d=identicon&r=PG", "display_name": "Niklas B.", "link": "https://stackoverflow.com/users/1532201/niklas-b"}, "edited": false, "score": 3, "creation_date": 1587421516, "post_id": 58902910, "comment_id": 108501277, "body": "Minor suggestion: instead of hardcoding the direct upload url (<code>direct_upload_url: &#39;&#47;rails&#47;active_storage&#47;direct_uploads&#39;</code>) use the url helper&#39;s path: <code>direct_upload_url: rails_direct_uploads_url</code> (I use the absolute URL here because the default form handler does this, too when using <code>direct_upload: true</code>)"}], "tags": [], "owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "is_accepted": false, "score": 2, "last_activity_date": 1574009991, "creation_date": 1574009991, "answer_id": 58902910, "question_id": 58838848, "link": "https://stackoverflow.com/questions/58838848/how-to-use-simple-form-and-direct-upload-activestorage/58902910#58902910", "title": "How to use Simple Form and Direct Upload ActiveStorage", "body": "<p>There're is the way to make this work.</p>\n\n<ol>\n<li>We can change f.input to f.file_field as <a href=\"https://stackoverflow.com/users/3944700/hashrocket\">hashrocket</a> suggest - but then validation of simple form will not work, and perhaps we have to add class to this input plus extra div before.</li>\n<li>We can add html attribute to the f.input.</li>\n</ol>\n\n<p>For me this is working I hope it will help someone else too.</p>\n\n<pre><code>= simple_form_for @film do |f|\n  = f.error_notification\n  = f.input :title, as: :string\n  = f.input :description, as: :string\n  = f.input :cover_img, as: :file, input_html: { data: { direct_upload_url: '/rails/active_storage/direct_uploads' } }\n  = f.input :film_link, as: :file, input_html: { data: { direct_upload_url: '/rails/active_storage/direct_uploads' } }\n  = f.button :submit\n  = link_to 'back', :back, class: 'btn btn-secondary'\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3619, "user_id": 135160, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/ukXAo.jpg?s=128&g=1", "display_name": "anka", "link": "https://stackoverflow.com/users/135160/anka"}, "is_accepted": false, "score": 1, "last_activity_date": 1595153137, "creation_date": 1595153137, "answer_id": 62978847, "question_id": 58838848, "link": "https://stackoverflow.com/questions/58838848/how-to-use-simple-form-and-direct-upload-activestorage/62978847#62978847", "title": "How to use Simple Form and Direct Upload ActiveStorage", "body": "<p>I would suggest to simply add a custom input for that to avoid repetition within your view files. Put this in the file <code>app/inputs/direct_upload_file_input.rb</code>:</p>\n<pre><code># frozen_string_literal: true\nclass DirectUploadFileInput &lt; SimpleForm::Inputs::FileInput\n  def input_html_options\n    super.merge({ direct_upload: true })\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1226, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1595153137, "creation_date": 1573653733, "question_id": 58838848, "link": "https://stackoverflow.com/questions/58838848/how-to-use-simple-form-and-direct-upload-activestorage", "title": "How to use Simple Form and Direct Upload ActiveStorage", "body": "<p>I'm having a trouble when I try to use Simple Form gem for upload video. I'm using ActiveStorage and local storage for this.\nMy form looks like this:</p>\n\n<pre><code>= simple_form_for @film do |f|\n  = f.error_notification\n  = f.input :title, as: :string\n  = f.input :description, as: :string\n  = f.input :cover_img, as: :file\n\n  = f.input :film_link, as: :file, direct_upload: true\n  = f.button :submit\n  = link_to 'back', :back, class: 'btn btn-secondary'\n</code></pre>\n\n<p>I've followed instruction on here <a href=\"https://edgeguides.rubyonrails.org/active_storage_overview.html\" rel=\"nofollow noreferrer\">https://edgeguides.rubyonrails.org/active_storage_overview.html</a>\nSo I've included js and css files in my app. But that won't work. It looks like there's some troubles with passing <code>direct_upload: true</code> via simple_form.\nI've also find article <a href=\"https://phase2online.com/blog/2018/10/03/easily-upload-files-with-active-storage-in-rails-5-2/\" rel=\"nofollow noreferrer\">https://phase2online.com/blog/2018/10/03/easily-upload-files-with-active-storage-in-rails-5-2/</a> and pull git repo from  <a href=\"https://github.com/bratta/file-upload-demo\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>An this works on when you'll use form_for on your _form. When I change form to use simple_form gem(instead of form_form use simple_form_for) it won't work.</p>\n\n<p>Anyone have an idea why this is not working please?\nI use ruby 2.6.3 and Rails 5.2.3 and simple_form (5.0.1)</p>\n"}, {"tags": ["ruby", "ruby-on-rails-3", "whenever"], "comments": [{"owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "edited": false, "score": 0, "creation_date": 1573654674, "post_id": 58838351, "comment_id": 103952438, "body": "Have you tried to check whether your crontab file is generated properly by <code>bundle exec whenever</code>? If yes, have you updated it by <code>whenever --update-crontab</code>?  <a href=\"https://github.com/javan/whenever#the-whenever-command\" rel=\"nofollow noreferrer\">github.com/javan/whenever#the-whenever-command</a>"}, {"owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "edited": false, "score": 0, "creation_date": 1573656143, "post_id": 58838351, "comment_id": 103953299, "body": "Which OS are you using? Have you checked whether <code>cron</code> daemon is running there?"}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "edited": false, "score": 0, "creation_date": 1573710172, "post_id": 58838351, "comment_id": 103973060, "body": "@Marian13 yes, i have updated it by <code>whenever --update-crontab</code> and i am using linux, and yes cron daemon is running too.  I verified it using <code>service cron status</code> and <code>ps -ef | grep crond</code>"}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "edited": false, "score": 0, "creation_date": 1573715310, "post_id": 58838351, "comment_id": 103974881, "body": "@cnnr can you help me on this?"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "edited": false, "score": 0, "creation_date": 1573796187, "post_id": 58855574, "comment_id": 104010127, "body": "Hi actually that update was posted later and i had changed the time. Sorry for the confusion but the cronttab entry is correct, also i have changed the env to production as well. Still no effect. I will update my que with changed settings."}], "tags": [], "owner": {"reputation": 1106, "user_id": 6454624, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-54Cw2TNXh84/AAAAAAAAAAI/AAAAAAAAAC4/Ivxon84Rp4k/photo.jpg?sz=128", "display_name": "Adim", "link": "https://stackoverflow.com/users/6454624/adim"}, "is_accepted": false, "score": 0, "last_activity_date": 1573730310, "creation_date": 1573730310, "answer_id": 58855574, "question_id": 58838351, "link": "https://stackoverflow.com/questions/58838351/task-not-running-using-whenever-gem-but-runs-in-terminal/58855574#58855574", "title": "Task not running using whenever gem but runs in terminal", "body": "<p>I don't think your crontab entry is correct. For 6:46PM, you should be getting</p>\n\n<pre><code>46 18 * * * /bin/bash -l -c 'cd /home/rajdeep/police-api &amp;&amp; RAILS_ENV=production bundle exec rake daily_report:daily_operator_report --silent &gt;&gt; home/rajdeep/police-api/log/whenever.log 2&gt;&amp;1'\n</code></pre>\n\n<p>Whenever also defaults <code>RAILS_ENV</code> to <code>production</code>. To override this to say development, do</p>\n\n<pre><code>set :environment, \"development\"\n</code></pre>\n\n<p>at the top of the <code>config/schedule.rb</code> file</p>\n\n<p>Don't forget to update your crontab by running <code>bundle exec whenever --update-crontab</code> and then confirm you have the correct crontab entry by running <code>crontab -l</code></p>\n"}], "owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 71, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573803498, "creation_date": 1573652115, "last_edit_date": 1573803498, "question_id": 58838351, "link": "https://stackoverflow.com/questions/58838351/task-not-running-using-whenever-gem-but-runs-in-terminal", "title": "Task not running using whenever gem but runs in terminal", "body": "<p><strong>Task File</strong></p>\n\n<pre><code>require 'report.rb'\nrequire 'rake'\n\n    namespace :daily_report do\n      desc \"Daily Parakh Report\"\n      task daily_operator_report: :environment do\n        puts \"Daily report generation started\"\n        Reports::Report.generate_csv\n        puts \"finished\"\n      end\n    end\n</code></pre>\n\n<p><strong>schedule.rb file</strong></p>\n\n<pre><code>set :environment, \"development\"\n\nset :output, \"home/rajdeep/police-api/log/whenever.log\"\n\nevery 1.minute do # Many shortcuts available: :hour, :day, :month, :year, :reboot\n  rake \"daily_report:daily_operator_report\"\nend\n</code></pre>\n\n<p>nothing happens, the task doesn't run, even whenever.log file is not created.</p>\n\n<p>when i run <code>rake daily_report:daily_operator_report</code> in terminal it works.</p>\n\n<p><strong>UPDATE</strong>\nI checked my cron logs and found this \n<code>Nov 15 12:59:01 rajdeep-ThinkPad-T460s CRON[22125]: (rajdeep) MAIL (mailed 159 bytes of output but got status 0x004b from MTA#012)\nNov 15 13:00:01 rajdeep-ThinkPad-T460s CRON[22299]: (rajdeep) CMD (/bin/bash -l -c 'cd /home/rajdeep/police-api &amp;&amp; RAILS_ENV=development bundle exec rake daily_report:daily_operator_report --silent &gt;&gt; home/rajdeep/police-api/log/whenever.log 2&gt;&amp;1')\nNov 15 13:00:02 rajdeep-ThinkPad-T460s CRON[22298]: (rajdeep) MAIL (mailed 159 bytes of output but got status 0x004b from MTA#012)\nNov 15 13:01:01 rajdeep-ThinkPad-T460s CRON[22474]: (rajdeep) CMD (/bin/bash -l -c 'cd /home/rajdeep/police-api &amp;&amp; RAILS_ENV=development bundle exec rake daily_report:daily_operator_report --silent &gt;&gt; home/rajdeep/police-api/log/whenever.log 2&gt;&amp;1')\nNov 15 13:01:01 rajdeep-ThinkPad-T460s CRON[22473]: (rajdeep) MAIL (mailed 159 bytes of output but got status 0x004b from MTA#012)\nNov 15 13:02:01 rajdeep-ThinkPad-T460s CRON[22645]: (rajdeep) CMD (/bin/bash -l -c 'cd /home/rajdeep/police-api &amp;&amp; RAILS_ENV=development bundle exec rake daily_report:daily_operator_report --silent &gt;&gt; home/rajdeep/police-api/log/whenever.log 2&gt;&amp;1')\nNov 15 13:02:01 rajdeep-ThinkPad-T460s CRON[22644]: (rajdeep) MAIL (mailed 159 bytes of output but got status 0x004b from MTA#012)</code></p>\n\n<p>Initally it was giving me <code>info (No MTA installed, discarding output)</code> then installed MTA (without configuration, since i am not using any mailto).\nI dont know what to make up of these logs. As stated above when i run <code>rake daily_report:daily_operator_report</code> the task works and csv file is generated but same is not happening when automated using whenever.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "httparty"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 10733969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ce55f9c4b54e214d2bd92069d3eb2?s=128&d=identicon&r=PG&f=1", "display_name": "mbbm9", "link": "https://stackoverflow.com/users/10733969/mbbm9"}, "edited": false, "score": 0, "creation_date": 1573674292, "post_id": 58837448, "comment_id": 103962649, "body": "Thank you! The results shows up on the page now, however, it&#39;s a large array of hashes, not only the titles of articles. Is there any easy way to display only titles ?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 51, "user_id": 10733969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ce55f9c4b54e214d2bd92069d3eb2?s=128&d=identicon&r=PG&f=1", "display_name": "mbbm9", "link": "https://stackoverflow.com/users/10733969/mbbm9"}, "edited": false, "score": 0, "creation_date": 1573678031, "post_id": 58837448, "comment_id": 103964290, "body": "you need to select them.  Ask another question and pastet here what is shown."}, {"owner": {"reputation": 51, "user_id": 10733969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ce55f9c4b54e214d2bd92069d3eb2?s=128&d=identicon&r=PG&f=1", "display_name": "mbbm9", "link": "https://stackoverflow.com/users/10733969/mbbm9"}, "edited": false, "score": 0, "creation_date": 1573684164, "post_id": 58837448, "comment_id": 103966863, "body": "I pasted the request result in this post:    <a href=\"https://stackoverflow.com/questions/58846594/how-to-select-data-from-api-call-result-in-rails\" title=\"how to select data from api call result in rails\">stackoverflow.com/questions/58846594/&hellip;</a>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1573651072, "last_edit_date": 1573651072, "creation_date": 1573649092, "answer_id": 58837448, "question_id": 58837397, "link": "https://stackoverflow.com/questions/58837397/why-is-rails-not-showing-my-api-call-results/58837448#58837448", "title": "Why is rails not showing my API call results?", "body": "<p>In the API client you print the results with <code>puts</code>:</p>\n\n<pre><code>  def query(q)\n      request = HTTParty.get(BASE_URL+\"q=#{q}&amp;\"\"api-key=#{API_KEY}\")\n      puts request\n  end\n</code></pre>\n\n<p><code>puts</code> returns <code>nil</code>, so controller doesn't get the results. You need to return request from your <code>query</code> method:</p>\n\n<pre><code>  def query(q)\n      request = HTTParty.get(BASE_URL+\"q=#{q}&amp;\"\"api-key=#{API_KEY}\")\n      puts request\n      request\n  end\n</code></pre>\n\n<p>(ruby returns the result of the last call in the method).</p>\n"}], "owner": {"reputation": 51, "user_id": 10733969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/275ce55f9c4b54e214d2bd92069d3eb2?s=128&d=identicon&r=PG&f=1", "display_name": "mbbm9", "link": "https://stackoverflow.com/users/10733969/mbbm9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 58837448, "answer_count": 1, "score": 2, "last_activity_date": 1573651072, "creation_date": 1573648939, "last_edit_date": 1573649125, "question_id": 58837397, "link": "https://stackoverflow.com/questions/58837397/why-is-rails-not-showing-my-api-call-results", "title": "Why is rails not showing my API call results?", "body": "<p>I\u2019m completely new to ruby on rails,  I\u2019m creating a simple article search application that would use the Guardian API and just display the news titles.\nI made a simple view, controller and a class that makes calls to external API, but the results don\u2019t show up on my page and I\u2019m puzzled. It just needs to work this way: a user enters the page,  fills in the search form and views the news titles. I\u2019m using httparty gem.</p>\n\n<p>API consumer class:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#app/clients/guardian_api_client.rb\n\nclass GuardianApiClient\n  include HTTParty  \n\n  API_KEY = ENV['GUARDIAN_CONTENT_API_KEY']\n  BASE_URL =\"https://content.guardianapis.com/search?\" \n  API_PARTIAL_URL = \"api-key=#{API_KEY}\"\n\n\n  def query(q)\n      request = HTTParty.get(BASE_URL+\"q=#{q}&amp;\"\"api-key=#{API_KEY}\")\n      puts request\n  end\n\nend\n</code></pre>\n\n<p>Controller:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class SearchController &lt; ApplicationController\n    def search\n        @app = GuardianApiClient.new\n        @results = @app.query(params[:q])\n    end\nend\n\n</code></pre>\n\n<p>View:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= form_with(url: '/search') do |f| %&gt;\n&lt;%= f.text_field :q %&gt;\n&lt;%= f.submit 'search' %&gt;\n&lt;% end %&gt;\n\n&lt;% if @results != nil %&gt;\n  &lt;ul&gt;\n  &lt;%= @results.each do |r| %&gt;\n  &lt;li&gt;&lt;%= r[\"webTitle\"] %&gt;&lt;/li&gt;\n  &lt;% end %&gt;\n  &lt;/ul&gt;\n&lt;% else %&gt;\n  &lt;p&gt;No results yet&lt;/p&gt;\n&lt;% end %&gt;\n\n</code></pre>\n\n<p>Routes:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.routes.draw do\n  get '/search' =&gt; 'search#search'\n  post '/search' =&gt; 'search#search'\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "regex", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 2, "creation_date": 1573648196, "post_id": 58837114, "comment_id": 103948679, "body": "<code>[13] pry(main)&gt; &quot;\u201d &gt;text&quot; =~ &#47;[[:punct:]]text&#47; #=&gt; 2</code> works for me"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1573648505, "post_id": 58837114, "comment_id": 103948847, "body": "What ruby version do you use? 4.4.5 seems more a rails version, not a ruby version."}, {"owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1573648807, "post_id": 58837114, "comment_id": 103948996, "body": "@mrzasa Sorry, I&#39;ve updated the question. Ruby&#39;s version is 2.4.4, installed with <code>rbenv</code>."}], "answers": [{"tags": [], "owner": {"reputation": 759, "user_id": 9174431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a8f67982fb2ef93d0ebf92453b00fe5?s=128&d=identicon&r=PG", "display_name": "Giuseppe Schembri", "link": "https://stackoverflow.com/users/9174431/giuseppe-schembri"}, "is_accepted": false, "score": 0, "last_activity_date": 1573918259, "creation_date": 1573918259, "answer_id": 58892285, "question_id": 58837114, "link": "https://stackoverflow.com/questions/58837114/ruby-regexp-not-matching-unicode-quotes-with-posix-bracket-expression/58892285#58892285", "title": "Ruby Regexp not matching unicode quotes with POSIX bracket expression", "body": "<p>The problem is the POSIX bracket expressions <code>[[:punct:]]</code> it may match different characters.\nYou can find some detail <a href=\"https://stackoverflow.com/questions/11130490/why-does-ruby-punct-miss-some-punctuation-characters\">here</a>.</p>\n\n<p>To find out which category a character is in your local try <a href=\"https://ruby-doc.org/core-1.9.3/Regexp.html#class-Regexp-label-Character+Properties\" rel=\"nofollow noreferrer\">A Unicode character's General Category</a>.</p>\n\n<p>For example, using ruby 2.2.4:</p>\n\n<pre><code>irb(main):001:0&gt; /[[:punct:]]/n =~ '&lt;'\n=&gt; nil\n</code></pre>\n\n<p>But if I use the Symbol General Category</p>\n\n<pre><code>irb(main):002:0&gt; /\\p{S}/u =~ '&lt;'\n=&gt; 0\n\n</code></pre>\n"}], "owner": {"reputation": 1584, "user_id": 3255098, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8hsvD.png?s=128&g=1", "display_name": "Wikiti", "link": "https://stackoverflow.com/users/3255098/wikiti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573918259, "creation_date": 1573647986, "last_edit_date": 1573648735, "question_id": 58837114, "link": "https://stackoverflow.com/questions/58837114/ruby-regexp-not-matching-unicode-quotes-with-posix-bracket-expression", "title": "Ruby Regexp not matching unicode quotes with POSIX bracket expression", "body": "<p>I'm trying to use the <code>[[:punct:]]</code> POSIX bracket expression on a more complex regular expression, and I've found it is related with the following problem:</p>\n\n<p>I've ran this on a Ruby's 2.4.4 irb console, producing a valid match:</p>\n\n<pre><code>irb(main):001:0&gt; \" &gt;text\" =~ /[[:punct:]]text/\n=&gt; 1\n</code></pre>\n\n<p>However, if I add a UTF8 quote character (<code>\u201d</code>), it won't match:</p>\n\n<pre><code>irb(main):002:0&gt; \"\u201d &gt;text\" =~ /[[:punct:]]text/\n=&gt; nil\n</code></pre>\n\n<p>But if I use a <code>.</code> instead of a <code>&gt;</code>, it does work as I'm expecting:</p>\n\n<pre><code>irb(main):003:0&gt; \" .text\" =~ /[[:punct:]]text/\n=&gt; 1\nirb(main):004:0&gt; \"\u201d .text\" =~ /[[:punct:]]text/\n=&gt; 2\n</code></pre>\n\n<p>I'm not trying to find a workaround for this, but trying to understand why is not matching on the second case.</p>\n"}, {"tags": ["ruby", "docker", "gitlab-ci", "docker-api", "docker-in-docker"], "answers": [{"tags": [], "owner": {"reputation": 196, "user_id": 211522, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f81d67c8487b285bfae95ab3d468ce33?s=128&d=identicon&r=PG", "display_name": "Andor", "link": "https://stackoverflow.com/users/211522/andor"}, "is_accepted": false, "score": 1, "last_activity_date": 1573645230, "creation_date": 1573645230, "answer_id": 58836310, "question_id": 58835887, "link": "https://stackoverflow.com/questions/58835887/no-such-image-in-gitlab-ci-with-docker-in-docker/58836310#58836310", "title": "No such image in gitlab-ci with docker-in-docker", "body": "<p>Each job you specified will use a different instance of <code>dind</code>.\nYou probably need to push the image from first job and pull it in the second job.</p>\n"}, {"tags": [], "owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "is_accepted": true, "score": 0, "last_activity_date": 1575560018, "creation_date": 1575560018, "answer_id": 59198460, "question_id": 58835887, "link": "https://stackoverflow.com/questions/58835887/no-such-image-in-gitlab-ci-with-docker-in-docker/59198460#59198460", "title": "No such image in gitlab-ci with docker-in-docker", "body": "<p>.gitlab-ci.yml:</p>\n\n<pre><code>variables:\n  DOCKER_DRIVER: overlay2\n  DOCKER_TLS_CERTDIR: \"\"\n  DB_HOST: postgres\n  RAILS_ENV: test\n\nrspec:\n  image: ruby:2.6.3\n  services:\n    - postgres:10.1\n    - docker:19.03.0-dind\n  script:\n    - cp config/database.yml.gitlab_ci config/database.yml\n    - gem install bundler\n    - bundle install\n    - export DOCKER_URL=tcp://docker:2375\n    - rails db:create\n    - rails db:migrate\n    - rake create_image\n    - rspec \n\nrubocop:\n  image: ruby:2.6.3\n  script:\n    - gem install bundler\n    - bundle install\n    - bundle exec rubocop\n  artifacts:\n    expire_in: 10 min\n</code></pre>\n\n<p>create_image.rake</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>task :create_image do\n  image = Docker::Image.build_from_dir('./docker/my_image/.')\n  image.tag('repo' =&gt; 'my_image', 'tag' =&gt; 'latest', force: true)\nend\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 297, "favorite_count": 0, "accepted_answer_id": 59198460, "answer_count": 2, "score": 0, "last_activity_date": 1575560018, "creation_date": 1573643612, "last_edit_date": 1573643959, "question_id": 58835887, "link": "https://stackoverflow.com/questions/58835887/no-such-image-in-gitlab-ci-with-docker-in-docker", "title": "No such image in gitlab-ci with docker-in-docker", "body": "<p>I'm use <a href=\"https://github.com/swipely/docker-api\" rel=\"nofollow noreferrer\">docker-api</a> in my rails project.</p>\n\n<p>I'm need create containers with my custom image.</p>\n\n<p>.gitlab-ci.yml:</p>\n\n<pre><code>  variables:\n  DOCKER_DRIVER: overlay2\n  DOCKER_TLS_CERTDIR: \"\"\n  DB_HOST: postgres\n  RAILS_ENV: test\n\nbuild:\n  stage: build\n  image: docker:19.03.0 \n  services:\n    - docker:19.03.0-dind\n  script:\n    - docker build -t my_image docker/my_image/.\n\nrspec:\n  image: ruby:2.6.3\n  services:\n    - postgres:10.1\n    - docker:19.03.0-dind\n  script:\n    - export DOCKER_URL=tcp://docker:2375\n    - cp config/database.yml.gitlab_ci config/database.yml\n    - gem install bundler\n    - bundle install\n    - rails db:create\n    - rails db:migrate\n    - rspec \n</code></pre>\n\n<p>I'm got error:</p>\n\n<pre><code>Failure/Error:\n  container = Docker::Container.create('Cmd' =&gt; ['tail', '-f', '/dev/null'],\n                                            'Image' =&gt; 'my_image')\n\nDocker::Error::NotFoundError:\n  No such image: my_image:latest\n</code></pre>\n\n<p>How solve this problem?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "security"], "answers": [{"tags": [], "owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "is_accepted": true, "score": 1, "last_activity_date": 1573653882, "last_edit_date": 1573653882, "creation_date": 1573653272, "answer_id": 58838693, "question_id": 58835733, "link": "https://stackoverflow.com/questions/58835733/how-to-how-to-nest-a-method-inside-config-initializers-content-security-policy/58838693#58838693", "title": "How to how to nest a method inside config/initializers/content_security_policy", "body": "<p>You are calling method <code>sources</code> before it is defined. This is why you receive <code>NameError</code>.</p>\n\n<p>Please, put its definition at the beginning of <code>content_security_policy.rb</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def sources\n  case Rails.env\n  when 'test'\n    'localhost:*/'\n  when 'development'\n    'localhost:*/'\n  when 'staging'\n    '*.somepath.co:*/'\n  else\n    '*.somepath.com:*/ *.somepath.com:*/'\n  end\nend\n\nRails.application.config.content_security_policy do |policy|\n  policy.connect_src :self, \"#{sources}\", :ws, :wss\n  policy.font_src    :self\n  policy.img_src     :self\n  policy.object_src  :none\n  policy.script_src  :self\n  policy.style_src   :self, :unsafe_inline\n  # Specify URI for violation reports\n  # policy.report_uri \"/csp-violation-report-endpoint\"\nend\n</code></pre>\n\n<p>And everything should work.</p>\n\n<p>Also, in general, it is not a good idea to define methods inside initializer files, until you really need it, because those methods will be available almost in any place of your app as just <code>sources</code>.  </p>\n\n<p>So, probably the best solution will be the following:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.config.content_security_policy do |policy|\n  sources =\n    case Rails.env\n    when 'test'\n      'localhost:*/'\n    when 'development'\n      'localhost:*/'\n    when 'staging'\n      '*.somepath.co:*/'\n    else\n      '*.somepath.com:*/ *.somepath.com:*/'\n    end\n\n  policy.connect_src :self, \"#{sources}\", :ws, :wss\n  policy.font_src    :self\n  policy.img_src     :self\n  policy.object_src  :none\n  policy.script_src  :self\n  policy.style_src   :self, :unsafe_inline\n  # Specify URI for violation reports\n  # policy.report_uri \"/csp-violation-report-endpoint\"\nend\n</code></pre>\n\n<p>or </p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Rails.application.config.content_security_policy do |policy|\n  policy.connect_src :self, \"#{ContentSecurityPolicy.sources}\", :ws, :wss\n  policy.font_src    :self\n  policy.img_src     :self\n  policy.object_src  :none\n  policy.script_src  :self\n  policy.style_src   :self, :unsafe_inline\n  # Specify URI for violation reports\n  # policy.report_uri \"/csp-violation-report-endpoint\"\nend\n</code></pre>\n\n<p>where <code>ContentSecurityPolicy.sources</code> is defined somewhere else in your app.</p>\n\n<p>Thanks for your attention.</p>\n"}], "owner": {"reputation": 1285, "user_id": 10443890, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de817ef35c4a2bdd0501efbdc6d9a338?s=128&d=identicon&r=PG&f=1", "display_name": "mr_muscle", "link": "https://stackoverflow.com/users/10443890/mr-muscle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 58838693, "answer_count": 1, "score": 0, "last_activity_date": 1573653882, "creation_date": 1573643080, "question_id": 58835733, "link": "https://stackoverflow.com/questions/58835733/how-to-how-to-nest-a-method-inside-config-initializers-content-security-policy", "title": "How to how to nest a method inside config/initializers/content_security_policy", "body": "<p>I wanna set content_security_policy in my rails app. To do this I uncommented Rails.application.config.content_security_policy in content_security_policy.rb but in <code>policy.connect_src :self</code> I wanna pass a different values depends on environment. I create a method but I don't know how to call it inside this file since it's not a class.</p>\n\n<p><code>content_security_policy.rb</code></p>\n\n<pre><code>Rails.application.config.content_security_policy do |policy|\n  policy.connect_src :self, \"#{sources}\", :ws, :wss\n  policy.font_src    :self\n  policy.img_src     :self\n  policy.object_src  :none\n  policy.script_src  :self\n  policy.style_src   :self, :unsafe_inline\n  # Specify URI for violation reports\n  # policy.report_uri \"/csp-violation-report-endpoint\"\nend\n\ndef sources\n  case Rails.env\n  when 'test'\n    'localhost:*/'\n  when 'development'\n    'localhost:*/'\n  when 'staging'\n    '*.somepath.co:*/'\n  else\n    '*.somepath.com:*/ *.somepath.com:*/'\n  end\nend\n</code></pre>\n\n<p>with code above I've got an error:</p>\n\n<blockquote>\n  <p>undefined local variable or method `self_sources' for main:Object (NameError)</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 2026, "user_id": 4473406, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35f14727fcdc211ea5921ef8116b5f6d?s=128&d=identicon&r=PG", "display_name": "Siim Liiser", "link": "https://stackoverflow.com/users/4473406/siim-liiser"}, "is_accepted": false, "score": 3, "last_activity_date": 1573643982, "creation_date": 1573643982, "answer_id": 58835986, "question_id": 58835711, "link": "https://stackoverflow.com/questions/58835711/string-to-json-after-getting-value-from-redis-ruby/58835986#58835986", "title": "string to json after getting value from redis ruby", "body": "<pre><code>\"{:b=&gt;1, :c=&gt;2}\"\n</code></pre>\n\n<p>Is not valid json. It's a ruby hash. Cast it to json before cache-ing it and then parse it after you retrieve it.</p>\n\n<pre><code>LocalCache.set('abc', a.to_json)\nx = LocalCache.get('abc')\nJSON.parse(x)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6059, "user_id": 301419, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/03850242d6e9a3b36279cdaf6f231d0f?s=128&d=identicon&r=PG&f=1", "display_name": "Alok Swain", "link": "https://stackoverflow.com/users/301419/alok-swain"}, "is_accepted": true, "score": 0, "last_activity_date": 1573644936, "creation_date": 1573644936, "answer_id": 58836220, "question_id": 58835711, "link": "https://stackoverflow.com/questions/58835711/string-to-json-after-getting-value-from-redis-ruby/58836220#58836220", "title": "string to json after getting value from redis ruby", "body": "<p>From Redis documentation: <a href=\"https://github.com/redis/redis-rb#storing-objects\" rel=\"nofollow noreferrer\">https://github.com/redis/redis-rb#storing-objects</a></p>\n\n<p>Redis stores only strings as values. You have to serialize the value you are setting to as json and then parse it back as JSON after retrieving.</p>\n\n<p><code>a = {\"b\": 1, \"c\": 2}</code></p>\n\n<p>Here <code>a</code> is object of class <code>Hash</code>. Hence serialize while storing</p>\n\n<pre><code>x =  LocalCache.set(\"abc\", a.to_json)\n</code></pre>\n\n<p>To retrieve: <code>x = JSON.parse LocalCache.get('abc')</code></p>\n\n<p><code>p x</code> # <code>{\"b\"=&gt;1, \"c\"=&gt;2}</code></p>\n"}], "owner": {"reputation": 2029, "user_id": 6703569, "user_type": "registered", "accept_rate": 74, "profile_image": "https://lh4.googleusercontent.com/-SEU_x8PjYg4/AAAAAAAAAAI/AAAAAAAAAA8/9Ht4S0ndBuI/photo.jpg?sz=128", "display_name": "Bhawan", "link": "https://stackoverflow.com/users/6703569/bhawan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 151, "favorite_count": 0, "accepted_answer_id": 58836220, "answer_count": 2, "score": 0, "last_activity_date": 1573644936, "creation_date": 1573643006, "question_id": 58835711, "link": "https://stackoverflow.com/questions/58835711/string-to-json-after-getting-value-from-redis-ruby", "title": "string to json after getting value from redis ruby", "body": "<p>I created a simple json object something like this:</p>\n\n<pre><code>a = {\"b\": 1, \"c\": 2}\n</code></pre>\n\n<p>Setting the json object as value in <code>redis</code> like this:</p>\n\n<pre><code>LocalCache.set('abc', a)\n</code></pre>\n\n<p>After getting the value from redis, I am getting a string value:</p>\n\n<pre><code>x = LocalCache.get('abc')\n</code></pre>\n\n<p>I want this string to be converted back to JSON object but I am unable to do it. </p>\n\n<ol>\n<li><p>When I tried <code>x.as_json</code>, I am getting <code>\"{:b=&gt;1, :c=&gt;2}\"</code></p></li>\n<li><p>When I tried <code>x.to_json</code>, I am getting <code>\"\\\"{:b=\\\\u003e1, :c=\\\\u003e2}\\\"\"</code></p></li>\n<li><p>When I tried <code>JSON.parse(x)</code>, I am getting this error: </p>\n\n<p>JSON::ParserError: 785: unexpected token at '{:b=>1, :c=>2}'</p></li>\n</ol>\n\n<p>Any help would be highly appreciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "chartkick"], "answers": [{"comments": [{"owner": {"reputation": 125, "user_id": 12365920, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA_MRquLbi8WJCSL7_S7W_5COoyl50zFkAINHteVA=k-s128", "display_name": "Chris Serv", "link": "https://stackoverflow.com/users/12365920/chris-serv"}, "edited": false, "score": 0, "creation_date": 1573642642, "post_id": 58835575, "comment_id": 103945924, "body": "thenk u nlxdodge"}], "tags": [], "owner": {"reputation": 122, "user_id": 5453550, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-8q2rAcb4zOM/AAAAAAAAAAI/AAAAAAAAExM/culcYo9SCDo/photo.jpg?sz=128", "display_name": "NLxDoDge", "link": "https://stackoverflow.com/users/5453550/nlxdodge"}, "is_accepted": true, "score": 0, "last_activity_date": 1573642584, "creation_date": 1573642584, "answer_id": 58835575, "question_id": 58834926, "link": "https://stackoverflow.com/questions/58834926/how-do-i-stop-chartkick-from-showing-the-x-axis-date-ruby-on-rails/58835575#58835575", "title": "How do i stop chartkick from showing the X-axis date (ruby on rails)", "body": "<p>Checkout this issue as wel. As it implies with your issue.\n<a href=\"https://stackoverflow.com/questions/49974479/how-to-hide-axis-using-chartkick-js\">How to hide axis using Chartkick.js</a></p>\n\n<p>And Chartkick also has options that you can chance if you follow the documentation: <a href=\"https://chartkick.com/\" rel=\"nofollow noreferrer\">Chartkick website</a></p>\n\n<p>So when combining the answers you would have to add this to your code:</p>\n\n<pre><code>&lt;%= area_chart website.pings.limit(5).order(created_at: :desc).pluck(:created_at, (:ms)),\n width: \"70x\", height: \"130px\", messages: {empty: \"No Ping made yet\"}, \ncurve: false, refresh: 10, library: { scales: { xAxes: [{ display: false }] } } %&gt;\n</code></pre>\n\n<p>With <code>library: { scales: { xAxes: [{ display: false }] } }</code> you can add options, and the scales are the x and y scales where you can change the options of too.</p>\n\n<p>Checkout the full API here: <a href=\"https://www.chartjs.org/docs/latest/axes/labelling.html\" rel=\"nofollow noreferrer\">Full Chartkick API</a></p>\n"}], "owner": {"reputation": 125, "user_id": 12365920, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mA_MRquLbi8WJCSL7_S7W_5COoyl50zFkAINHteVA=k-s128", "display_name": "Chris Serv", "link": "https://stackoverflow.com/users/12365920/chris-serv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 204, "favorite_count": 0, "accepted_answer_id": 58835575, "answer_count": 1, "score": 0, "last_activity_date": 1573642584, "creation_date": 1573640555, "last_edit_date": 1573641129, "question_id": 58834926, "link": "https://stackoverflow.com/questions/58834926/how-do-i-stop-chartkick-from-showing-the-x-axis-date-ruby-on-rails", "title": "How do i stop chartkick from showing the X-axis date (ruby on rails)", "body": "<p>first time at stackoverflow.</p>\n\n<p>it shows a date of every point in the graph under the x-axis.\ncan someone help me removing it?</p>\n\n<pre><code> &lt;%= area_chart website.pings.limit(5).order(created_at: :desc).pluck(:created_at, (:ms)),\n width: \"70x\", height: \"130px\", messages: {empty: \"No Ping made yet\"}, curve: false, refresh: 10 %&gt;\n</code></pre>\n\n<p><a href=\"https://imgur.com/a/zGAQRYO\" rel=\"nofollow noreferrer\">https://imgur.com/a/zGAQRYO</a></p>\n"}, {"tags": ["ruby", "hash", "ruby-2.5"], "answers": [{"comments": [{"owner": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "edited": false, "score": 0, "creation_date": 1573633852, "post_id": 58833011, "comment_id": 103941250, "body": "My question was why is it responding to the first respond_to but not the next one"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "edited": false, "score": 0, "creation_date": 1573634352, "post_id": 58833011, "comment_id": 103941483, "body": "<b>All</b> the <code>respond_to</code> will return false, hence the <code>if</code> clauses will <b>always</b> be true. The end result is the same as if you would have written no <code>if</code> clause at all. That&#39;s why you get your result. You can easily verify it if you place a <code>p test</code> after each assignment to the <code>test</code> Hash."}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "reply_to_user": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "edited": false, "score": 0, "creation_date": 1573634645, "post_id": 58833011, "comment_id": 103941613, "body": "@EastsideDeveloper : With other words: In effect, you execute <code>layers.each { |l| fillers.each { |f| test[l] = {}; test[l][f] = {} }}</code>, which with your input data results in <code>{&quot;primer&quot;=&gt;&quot;grey&quot;, &quot;tan&quot;=&gt;{&quot;yellow&quot;=&gt;{}}, &quot;burgundy&quot;=&gt;{&quot;yellow&quot;=&gt;{}}}</code>."}, {"owner": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "edited": false, "score": 0, "creation_date": 1573634733, "post_id": 58833011, "comment_id": 103941652, "body": "Yes, I can see now how that happened"}], "tags": [], "owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "is_accepted": true, "score": 4, "last_activity_date": 1573633702, "creation_date": 1573633702, "answer_id": 58833011, "question_id": 58832927, "link": "https://stackoverflow.com/questions/58832927/ruby-key-getting-replaced-instead-of-a-new-key-created/58833011#58833011", "title": "Ruby key getting replaced, instead of a new key created", "body": "<p>The expression</p>\n\n<pre><code>test.respond_to?(l)\n</code></pre>\n\n<p>does not make sense. <code>l</code> is a string, and <code>respond_to?</code> returns true if the receiver has a method of the name represented by this string. Since the receiver is a Hash and a Hash has no methods Hash#tan and Hash#burgundy, the test will always fail.</p>\n\n<p>Maybe you want to do a <code>test.has_key?(l)</code> instead....</p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1573655892, "creation_date": 1573655892, "answer_id": 58839498, "question_id": 58832927, "link": "https://stackoverflow.com/questions/58832927/ruby-key-getting-replaced-instead-of-a-new-key-created/58839498#58839498", "title": "Ruby key getting replaced, instead of a new key created", "body": "<p>Let's say you have the hash <code>{a: 1}</code>, having a key <code>:a</code> doesn't make the hash object respond to <code>:a</code>. <code>hash.respond_to?(:a)</code> would still return <code>false</code>. You want to check if a key exists, this can be done using <a href=\"https://ruby-doc.org/core-2.6.5/Hash.html#method-i-has_key-3F\" rel=\"nofollow noreferrer\"><code>has_key?</code></a>/<a href=\"https://ruby-doc.org/core-2.6.5/Hash.html#method-i-key-3F\" rel=\"nofollow noreferrer\"><code>key?</code></a>.</p>\n\n<pre><code>layers.each do |l|\n  fillers.each do |f|\n    test[l] = {} unless test.has_key?(l)\n    test[l][f] = {} unless test[l].has_key?(f)\n  end\nend\n</code></pre>\n\n<p>However since you set the values to a hash, which is a truthy value. You could also use <code>||=</code> which only assigns a value if the current value is falsy. <code>test[:non_existing_key]</code> will result in <code>nil</code> (unless a default is set).</p>\n\n<p>Meaning the above can be replaced with:</p>\n\n<pre><code>layers.each do |l|\n  fillers.each do |f|\n    test[l] ||= {}\n    test[l][f] ||= {}\n  end\nend\n</code></pre>\n\n<p>You could simplify this whole statement with the use of <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-product\" rel=\"nofollow noreferrer\"><code>product</code></a> which combines the two loops for you.</p>\n\n<pre><code>layers.product(fillers) do |layer, filler|\n  test[layer] ||= {}\n  test[layer][filler] ||= {}\nend\n</code></pre>\n"}], "owner": {"reputation": 5241, "user_id": 1016958, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/88b80a2d90163023d2c88893c6a13491?s=128&d=identicon&r=PG", "display_name": "EastsideDev", "link": "https://stackoverflow.com/users/1016958/eastsidedev"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 58833011, "answer_count": 2, "score": 0, "last_activity_date": 1573655892, "creation_date": 1573633366, "last_edit_date": 1573636773, "question_id": 58832927, "link": "https://stackoverflow.com/questions/58832927/ruby-key-getting-replaced-instead-of-a-new-key-created", "title": "Ruby key getting replaced, instead of a new key created", "body": "<pre><code>ruby 2.5\n</code></pre>\n\n<p>I have the following code:</p>\n\n<pre><code>test = {'primer' =&gt; 'grey'}\nlayers = [\"tan\",\"burgundy\"]\nfillers = [\"blue\",\"yellow\"]\nlayers.each do |l|\n    fillers.each do |f|\n      test[l] = {} if !test.respond_to?(l)\n      test[l][f] = {} if !test[l].respond_to?(f)\n    end\nend\n</code></pre>\n\n<p>When I run it in irb, I get the following:</p>\n\n<pre><code>{\"primer\"=&gt;\"grey\", \"tan\"=&gt;{\"yellow\"=&gt;{}}, \"burgundy\"=&gt;{\"yellow\"=&gt;{}}}\n</code></pre>\n\n<p>I am expecting:</p>\n\n<pre><code>{\"primer\"=&gt;\"grey\", \"tan\"=&gt;{\"blue\"=&gt;{},\"yellow\"=&gt;{}}, \"burgundy\"=&gt;{\"blue\"=&gt;{},\"yellow\"=&gt;{}}}\n</code></pre>\n\n<p>Why does the first respond_to produce the key, when the second one, replaces the previous key?</p>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1573630096, "post_id": 58831979, "comment_id": 103939580, "body": "BTW, <code>SyntaxError</code> means that your syntax is invalid. Solving it usually means fixing a typo."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573630578, "post_id": 58831979, "comment_id": 103939810, "body": "Why the rush to select an answer? You don&#39;t want to see others? Most members wait at least a couple of hours, some wait much longer. There&#39;s no rush, after all."}], "answers": [{"comments": [{"owner": {"reputation": 1863, "user_id": 3625865, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54a6410bcf66d6171d4eba9556fb95f4?s=128&d=identicon&r=PG&f=1", "display_name": "Yashar", "link": "https://stackoverflow.com/users/3625865/yashar"}, "edited": false, "score": 0, "creation_date": 1573629685, "post_id": 58832050, "comment_id": 103939403, "body": "Thanks, I had to change the content-type because I&#39;ve got error <code>Content-Type header [application&#47;x-www-form-urlencoded] is not supported</code> then I fount an issue <a href=\"https://github.com/junegunn/redis-stat/issues/72\" rel=\"nofollow noreferrer\">github.com/junegunn/redis-stat/issues/72</a> and someone suggested appending that part to the configuration file which doesn&#39;t work anyway :/"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 1863, "user_id": 3625865, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54a6410bcf66d6171d4eba9556fb95f4?s=128&d=identicon&r=PG&f=1", "display_name": "Yashar", "link": "https://stackoverflow.com/users/3625865/yashar"}, "edited": false, "score": 0, "creation_date": 1573629889, "post_id": 58832050, "comment_id": 103939495, "body": "Please, see the edit"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1573629868, "last_edit_date": 1573629868, "creation_date": 1573629406, "answer_id": 58832050, "question_id": 58831979, "link": "https://stackoverflow.com/questions/58831979/redis-stat-syntax-error-unexpected-expecting-end-syntaxerror/58832050#58832050", "title": "redis-stat: syntax error, unexpected &#39;:&#39;, expecting end (SyntaxError)", "body": "<p>You use a syntax that resembles hash or keyword params, but but it's a regular method context. It seems that you should use assignment instead:</p>\n\n<pre><code>    transport_options = {\n        headers: {'Content-Type' =&gt; 'application/json'}\n    }\n</code></pre>\n\n<p>Btw. <code>transport_options</code> aren't used in the script. Where do you need them?</p>\n\n<p>EDIT:</p>\n\n<p>I've read the link you posted in the comment. You missed a comma. It should be:</p>\n\n<pre><code>    @client      = Elasticsearch::Client.new :url =&gt; url,\n      transport_options: {\n        headers: {'Content-Type' =&gt; 'application/json'}\n      }\n\n</code></pre>\n\n<p>That is equivalent of:</p>\n\n<pre><code>    @client = Elasticsearch::Client.new(\n     url: url,\n     transport_options: {\n       headers: {'Content-Type' =&gt; 'application/json'}\n     }\n   )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1573629816, "creation_date": 1573629816, "answer_id": 58832138, "question_id": 58831979, "link": "https://stackoverflow.com/questions/58831979/redis-stat-syntax-error-unexpected-expecting-end-syntaxerror/58832138#58832138", "title": "redis-stat: syntax error, unexpected &#39;:&#39;, expecting end (SyntaxError)", "body": "<p>Your missing a comma after <code>:url =&gt; url</code>:</p>\n\n<pre><code>@client = Elasticsearch::Client.new url: url, # &lt;- note the comma\n                                    transport_options: {\n                                      headers: {'Content-Type' =&gt; 'application/json'}\n                                    }\n</code></pre>\n"}], "owner": {"reputation": 1863, "user_id": 3625865, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54a6410bcf66d6171d4eba9556fb95f4?s=128&d=identicon&r=PG&f=1", "display_name": "Yashar", "link": "https://stackoverflow.com/users/3625865/yashar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "closed_date": 1573646909, "accepted_answer_id": 58832050, "answer_count": 2, "score": 0, "last_activity_date": 1573629868, "creation_date": 1573629054, "last_edit_date": 1573629753, "question_id": 58831979, "link": "https://stackoverflow.com/questions/58831979/redis-stat-syntax-error-unexpected-expecting-end-syntaxerror", "closed_reason": "Not suitable for this site", "title": "redis-stat: syntax error, unexpected &#39;:&#39;, expecting end (SyntaxError)", "body": "<p>I'm using redis-mon to monitor my redis instances and I want to send redis-mon data to elasticsearch but when I run the command <code>redis-stat 172.17.0.4 172.17.0.5 172.17.0.6 --es=http://elasticsearch:9200/redis-stat</code> I get this error:</p>\n\n<pre><code>/root/.rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/sinatra-1.3.6/lib/sinatra/base.rb:1070: warning: constant ::Fixnum is deprecated\n/root/.rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/sinatra-1.3.6/lib/sinatra/base.rb:1070: warning: constant ::Fixnum is deprecated\n/root/.rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/sinatra-1.3.6/lib/sinatra/base.rb:1070: warning: constant ::Fixnum is deprecated\n/root/.rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/sinatra-1.3.6/lib/sinatra/base.rb:1070: warning: constant ::Fixnum is deprecated\n/root/.rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/sinatra-1.3.6/lib/sinatra/base.rb:1070: warning: constant ::Fixnum is deprecated\nTraceback (most recent call last):\n    2: from .rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/redis-stat-0.4.14/bin/redis-stat:4:in `&lt;main&gt;'\n    1: from /root/.rbenv/versions/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n/root/.rbenv/versions/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- redis-stat (LoadError)\n    6: from .rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/redis-stat-0.4.14/bin/redis-stat:4:in `&lt;main&gt;'\n    5: from /root/.rbenv/versions/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:34:in `require'\n    4: from /root/.rbenv/versions/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:130:in `rescue in require'\n    3: from /root/.rbenv/versions/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:130:in `require'\n    2: from /root/.rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/redis-stat-0.4.14/lib/redis-stat.rb:7:in `&lt;top (required)&gt;'\n    1: from /root/.rbenv/versions/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n/root/.rbenv/versions/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require': /root/.rbenv/versions/2.6.5/lib/ruby/gems/2.6.0/gems/redis-stat-0.4.14/lib/redis-stat/elasticsearch.rb:28: syntax error, unexpected ':', expecting end (SyntaxError)\n    transport_options: {\n                     ^\n</code></pre>\n\n<p>Here is the <code>elasticsearch.rb</code> file which has the problem:</p>\n\n<pre><code>require 'elasticsearch'\nrequire 'date'\nrequire 'uri'\n\nclass RedisStat\nclass ElasticsearchSink\n  attr_reader :hosts, :info, :index, :client\n\n  DEFAULT_INDEX = 'redis-stat'\n\n  def self.parse_url elasticsearch\n    unless elasticsearch.match(%r[^https?://])\n      elasticsearch = \"http://#{elasticsearch}\"\n    end\n\n    uri      = URI.parse elasticsearch\n    path     = uri.path\n    index    = path == '' ? DEFAULT_INDEX : path.split('/').last\n    uri.path = ''\n\n    [uri.to_s, index]\n  end\n\n  def initialize hosts, elasticsearch\n    url, @index  = elasticsearch\n    @hosts       = hosts\n    @client      = Elasticsearch::Client.new :url =&gt; url\n    transport_options: {\n        headers: {'Content-Type' =&gt; 'application/json'}\n    }\n  end\n\n  def output info\n    @hosts.each do |host|\n      entries = Hash[info.map { |k, v|\n        if v.has_key?(host) &amp;&amp; raw = v[host].last\n          [k, raw]\n        end\n      }.compact]\n      next if entries.empty?\n\n      time = entries[:at]\n      entry = {\n        :index =&gt; index,\n        :type  =&gt; \"redis\",\n        :body  =&gt; entries.merge({\n          :@timestamp =&gt; format_time(time),\n          :host       =&gt; host,\n          :at         =&gt; time.to_f\n        }),\n      }\n\n      client.index entry\n    end\n  end\n\nprivate\n  if RUBY_VERSION.start_with? '1.8.'\n    def format_time time\n      fmt = time.strftime(\"%FT%T%z\")\n      fmt[0..-3] + ':' + fmt[-2..-1]\n    end\n  else\n    def format_time time\n      time.strftime(\"%FT%T%:z\")\n    end\n  end\nend\nend\n</code></pre>\n\n<p>It works fine if I remove:</p>\n\n<pre><code>    transport_options: {\n        headers: {'Content-Type' =&gt; 'application/json'}\n    }` part but then I can't send data to the elasticsearch.\n</code></pre>\n\n<p>I'm using ruby 2.6.5 on a centos7 container.</p>\n\n<p>How can I solve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "activerecord", "foreign-keys"], "answers": [{"comments": [{"owner": {"reputation": 198, "user_id": 906974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f8c4065b80ed7b4d535666739be154?s=128&d=identicon&r=PG", "display_name": "Josh Frankel", "link": "https://stackoverflow.com/users/906974/josh-frankel"}, "edited": false, "score": 1, "creation_date": 1573846135, "post_id": 58834093, "comment_id": 104034181, "body": "Glad to hear you solved the issue here. I left a simplified migration that might help next time you need to add a concurrent index, reference, and a &lt;b&gt;foreign_key&lt;/b&gt; to a custom named column: <a href=\"http://joshfrankel.me/blog/custom-named-belongs_to-associations-in-rails-with-foreign-key-constraints/#disqus_thread\" rel=\"nofollow noreferrer\">joshfrankel.me/blog/&hellip;</a>"}, {"owner": {"reputation": 9754, "user_id": 636762, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/52351c68bff7878307faa6ad4056cb27?s=128&d=identicon&r=PG", "display_name": "Rakib", "link": "https://stackoverflow.com/users/636762/rakib"}, "reply_to_user": {"reputation": 198, "user_id": 906974, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4f8c4065b80ed7b4d535666739be154?s=128&d=identicon&r=PG", "display_name": "Josh Frankel", "link": "https://stackoverflow.com/users/906974/josh-frankel"}, "edited": false, "score": 0, "creation_date": 1574075980, "post_id": 58834093, "comment_id": 104088738, "body": "Thanks @JoshFrankel . Appreciate the help :)"}], "tags": [], "owner": {"reputation": 9754, "user_id": 636762, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/52351c68bff7878307faa6ad4056cb27?s=128&d=identicon&r=PG", "display_name": "Rakib", "link": "https://stackoverflow.com/users/636762/rakib"}, "is_accepted": false, "score": 0, "last_activity_date": 1573637950, "creation_date": 1573637950, "answer_id": 58834093, "question_id": 58830224, "link": "https://stackoverflow.com/questions/58830224/custom-name-foreign-key-in-rails-causing-activerecordinvalidforeignkey-pgf/58834093#58834093", "title": "Custom name foreign key in Rails causing &#39;ActiveRecord::InvalidForeignKey: PG::ForeignKeyViolation&#39; error", "body": "<h2>I found the issue. It has to do with Schemas in Postgres.</h2>\n\n<p>I use the Apartment gem for tenancy in the Postgres Database. In my case, the <code>books</code> table is tenanted. However, the <code>users</code> table is not tenanted - they are universal. Meaning, the <code>user</code> exists in <code>public</code> schema but the <code>book</code> exists in (let's say) <code>Malaysia</code> schema. </p>\n\n<p>So, when we are trying to save <code>book.save!</code>, the <code>books</code> table (which is in <code>Malaysia</code> schema) checks for a user with id 1 in <code>users</code> table of the same schema (i.e. <code>Malaysia</code> schema). However, since my users actually exist in <code>public</code> schema, it thinks there is no user with id 1 (as it's looking for it in the <code>Malaysia</code> schema only).</p>\n\n<p>Then i came across this <a href=\"https://github.com/influitive/apartment/issues/397\" rel=\"nofollow noreferrer\">known issue in Apartment</a> about Foreign Keys across Schemas.</p>\n\n<hr>\n\n<h2>How did i fix it?</h2>\n\n<ul>\n<li>I rolled back my db migration ONE step to basically to revert my changes by removing the new <code>author_id</code> column.</li>\n<li>Then removed the <code>add_foreign_key</code> statement from the migration file so that the Postgres table doesn't create any db-level foreign key association.</li>\n<li>Then ran the migration again.</li>\n</ul>\n\n<p>So now, I do have a new column called <code>author_id</code> (which is also indexed) but it doesn't have a DB-level foreign key to the <code>users</code> table. Then the spec passed gracefully.</p>\n\n<p>Thus, it's not really a first-class db-level foreign key anymore. It just relies on the Rails associations that are defined in the model to achieve a <em>\"foreign-key-sque\"</em> behavior as we desire - works nicely.</p>\n"}], "owner": {"reputation": 9754, "user_id": 636762, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/52351c68bff7878307faa6ad4056cb27?s=128&d=identicon&r=PG", "display_name": "Rakib", "link": "https://stackoverflow.com/users/636762/rakib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 314, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573637950, "creation_date": 1573618304, "last_edit_date": 1573618677, "question_id": 58830224, "link": "https://stackoverflow.com/questions/58830224/custom-name-foreign-key-in-rails-causing-activerecordinvalidforeignkey-pgf", "title": "Custom name foreign key in Rails causing &#39;ActiveRecord::InvalidForeignKey: PG::ForeignKeyViolation&#39; error", "body": "<p>I have a <code>Book</code> model and i have a <code>User</code> model. I am trying to create a new column called <code>author_id</code> in the <code>books</code> table which will actually be a foreign key to the <code>users</code> table.</p>\n\n<p>I followed <a href=\"http://joshfrankel.me/blog/custom-named-belongs_to-associations-in-rails-with-foreign-key-constraints/\" rel=\"nofollow noreferrer\">this article by Joshua Frankel</a>. But i am getting the following error</p>\n\n<blockquote>\n  <p>ActiveRecord::InvalidForeignKey: PG::ForeignKeyViolation: ERROR`</p>\n</blockquote>\n\n<p>I am Using Rails4.2</p>\n\n<hr>\n\n<p>db/migrate/20191112111409_add_author_to_books.rb:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class AddAuthorToBooks &lt; ActiveRecord::Migration\n  def up\n    add_reference :books, :author, references: :users, index: false\n    commit_db_transaction\n    add_index :books, :author_id, algorithm: :concurrently\n    add_foreign_key :books, :users, column: :author_id\n  end\n\n  def down\n    remove_column :books, :author_id\n  end\nend\n</code></pre>\n\n<p>app/models/book.rb:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Book &lt; ActiveRecord::Base\n  belongs_to :author, class_name: :User, foreign_key: :author_id\nend\n</code></pre>\n\n<p>app/models/user.rb:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class User &lt; ActiveRecord::Base\n  has_many :books, foreign_key: :author_id\nend\n</code></pre>\n\n<p>Error in Rails console:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&gt; user = FactoryBot.create(:user)\n&gt; book = FactoryBot.create(:book)\n&gt; book.author = user\n&gt; book.save\nActiveRecord::InvalidForeignKey: PG::ForeignKeyViolation: ERROR:  insert or update on table \"books\" violates foreign key constraint \"fk_rails_13be98de92\"\nDETAIL:  Key (author_id)=(1) is not present in table \"users\".\n: UPDATE \"books\" SET \"author_id\" = $1, \"updated_at\" = $2 WHERE \"books\".\"id\" = $3\nfrom ~/.ruby-gemset/ruby/2.3.0/gems/activerecord-4.2.11.1/lib/active_record/connection_adapters/postgresql_adapter.rb:602:in `exec_prepared'\nCaused by PG::ForeignKeyViolation: ERROR:  insert or update on table \"books\" violates foreign key constraint \"fk_rails_13be98de92\"\nDETAIL:  Key (author_id)=(1) is not present in table \"users\".\n\nfrom ~/.ruby-gemset/ruby/2.3.0/gems/activerecord-4.2.11.1/lib/active_record/connection_adapters/postgresql_adapter.rb:602:in `exec_prepared'\n&gt;\n</code></pre>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "ajax"], "comments": [{"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573616062, "post_id": 58829868, "comment_id": 103935753, "body": "<code>$( document ).on(&#39;turbolinks:load&#39;, function() {</code> you have to write js code inside this function ..."}, {"owner": {"reputation": 93, "user_id": 8362824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f2ef6e8aaba6ae179c9f94dffa9508?s=128&d=identicon&r=PG&f=1", "display_name": "NganCun", "link": "https://stackoverflow.com/users/8362824/ngancun"}, "reply_to_user": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573616193, "post_id": 58829868, "comment_id": 103935779, "body": "I still get the same result. The problem was the dollar sign &#39;$&#39; i think. Somehow rails doesn&#39;t let me use jquery"}, {"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573616320, "post_id": 58829868, "comment_id": 103935801, "body": "<code>jQuery.fn.jquery</code> check jquery version in your console..."}, {"owner": {"reputation": 93, "user_id": 8362824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f2ef6e8aaba6ae179c9f94dffa9508?s=128&d=identicon&r=PG&f=1", "display_name": "NganCun", "link": "https://stackoverflow.com/users/8362824/ngancun"}, "reply_to_user": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573616389, "post_id": 58829868, "comment_id": 103935818, "body": "I got <code>Uncaught ReferenceError: jQuery is not defined</code> error"}, {"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573616415, "post_id": 58829868, "comment_id": 103935822, "body": "Jquery is not loaded to the rails application"}, {"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573616468, "post_id": 58829868, "comment_id": 103935834, "body": "did you add <code>&#47;&#47;= require jquery</code> in your application.js ???"}, {"owner": {"reputation": 93, "user_id": 8362824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f2ef6e8aaba6ae179c9f94dffa9508?s=128&d=identicon&r=PG&f=1", "display_name": "NganCun", "link": "https://stackoverflow.com/users/8362824/ngancun"}, "reply_to_user": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 1, "creation_date": 1573616601, "post_id": 58829868, "comment_id": 103935874, "body": "I did actually, in an attempt to make this work. both <code>&#47;&#47;= require jquery</code> and <code>&#47;&#47;= require jquery_ujs</code>"}, {"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573616790, "post_id": 58829868, "comment_id": 103935904, "body": "which is your rails version???"}, {"owner": {"reputation": 93, "user_id": 8362824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f2ef6e8aaba6ae179c9f94dffa9508?s=128&d=identicon&r=PG&f=1", "display_name": "NganCun", "link": "https://stackoverflow.com/users/8362824/ngancun"}, "reply_to_user": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573616881, "post_id": 58829868, "comment_id": 103935923, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/202240/discussion-between-ngancun-and-abhishek-aravindan\">continue this discussion in chat</a>."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1573652055, "post_id": 58829868, "comment_id": 103950887, "body": "Use the webpacker instructions <a href=\"https://github.com/rails/jquery-ujs#installation-using-rails-and-webpacker\" rel=\"nofollow noreferrer\">github.com/rails/&hellip;</a>, personally, I would use rails-ujs and not jquery_ujs for unobtrusive javascript"}], "answers": [{"tags": [], "owner": {"reputation": 89, "user_id": 12499841, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/782e3e6b144205d2c026a06dc8140457?s=128&d=identicon&r=PG&f=1", "display_name": "Tejasvini Parikh", "link": "https://stackoverflow.com/users/12499841/tejasvini-parikh"}, "is_accepted": true, "score": 3, "last_activity_date": 1575816410, "creation_date": 1575816410, "answer_id": 59236560, "question_id": 58829868, "link": "https://stackoverflow.com/questions/58829868/uncaught-referenceerror-is-not-defined-with-ruby-on-rails/59236560#59236560", "title": "Uncaught ReferenceError: $ is not defined With Ruby on Rails", "body": "<p>If you are using rails 6. Add following code to your <code>config/webpack/environment.js</code> file. </p>\n\n<pre><code>const { environment } = require('@rails/webpacker')\n\nconst webpack = require('webpack')\nenvironment.plugins.prepend('Provide',\n  new webpack.ProvidePlugin({\n    $: 'jquery/src/jquery',\n    jquery: 'jquery/src/jquery',\n    jQuery: 'jquery/src/jquery'\n  })\n)\n\nmodule.exports = environment\n</code></pre>\n\n<p>For more information visit: <a href=\"https://www.botreetechnologies.com/blog/introducing-jquery-in-rails-6-using-webpacker\" rel=\"nofollow noreferrer\">introducing-jQuery-in-rails-6-using-webpacker</a></p>\n"}, {"tags": [], "owner": {"reputation": 261, "user_id": 10072436, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-0m9lnGv_jck/AAAAAAAAAAI/AAAAAAAANaA/eCVpNW5gzlE/photo.jpg?sz=128", "display_name": "Marcus Salinas", "link": "https://stackoverflow.com/users/10072436/marcus-salinas"}, "is_accepted": false, "score": 1, "last_activity_date": 1607917141, "creation_date": 1607917141, "answer_id": 65283270, "question_id": 58829868, "link": "https://stackoverflow.com/questions/58829868/uncaught-referenceerror-is-not-defined-with-ruby-on-rails/65283270#65283270", "title": "Uncaught ReferenceError: $ is not defined With Ruby on Rails", "body": "<p>Along with updating your environment file, one thing that I did that was a quick fix was to add this to your application.js file in the javascript folder.</p>\n<pre><code>import jquery from 'jquery';\nwindow.$ = window.jquery = jquery;\n</code></pre>\n"}], "owner": {"reputation": 93, "user_id": 8362824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f7f2ef6e8aaba6ae179c9f94dffa9508?s=128&d=identicon&r=PG&f=1", "display_name": "NganCun", "link": "https://stackoverflow.com/users/8362824/ngancun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1126, "favorite_count": 0, "accepted_answer_id": 59236560, "answer_count": 2, "score": 0, "last_activity_date": 1607917141, "creation_date": 1573615461, "last_edit_date": 1573616501, "question_id": 58829868, "link": "https://stackoverflow.com/questions/58829868/uncaught-referenceerror-is-not-defined-with-ruby-on-rails", "title": "Uncaught ReferenceError: $ is not defined With Ruby on Rails", "body": "<p>I'm new to Ruby on Rails, and I'm trying to get ajax to work with a ajax tutorial on Tutorialspoint. But even after I include 'jquery-rails' gem into gemfile and use 'bundle install' command I still get \"Uncaught ReferenceError: $ is not defined\" error in my browser console, and ajax function doesn't work.\nI still have to refresh the page to see the result.<br>\n(I generated the codes with scaffold)</p>\n\n<p>my index.view.erb</p>\n\n<pre><code>\n&lt;h1&gt;Ponies&lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Name&lt;/th&gt;\n      &lt;th&gt;Description&lt;/th&gt;\n      &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;% @ponies.each do |pony| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= pony.name %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= pony.description %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Show', pony %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_pony_path(pony) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', pony, method: :delete, data: { confirm: 'Are you sure?' }, :remote =&gt; true, :class =&gt; 'delete_pony' %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;br&gt;\n\n&lt;%= link_to 'New Pony', new_pony_path %&gt;\n\n</code></pre>\n\n<p>my destroy.js.erb</p>\n\n<pre><code>$('.delete_pony').bind('ajax:success', function() {\n  $(this).closest('tr').fadeOut();\n});\n</code></pre>\n\n<p>my ponies_controller.rb</p>\n\n<pre><code>...\n\ndef destroy\n    @pony.destroy\n    respond_to do |format|\n      format.html { redirect_to ponies_url, notice: 'Pony was successfully destroyed.' }\n      format.json { head :no_content }\n      format.js { render :layout =&gt; false }\n    end\n  end\n\n...\n</code></pre>\n\n<p>gemfile</p>\n\n<pre><code>...\n\ngem 'jquery-rails'\n\n...\n</code></pre>\n\n<p>browser console</p>\n\n<pre><code>Uncaught ReferenceError: $ is not defined\n    at &lt;anonymous&gt;:1:1\n    at processResponse (rails-ujs.js:283)\n    at rails-ujs.js:196\n    at XMLHttpRequest.xhr.onreadystatechange (rails-ujs.js:264)\n</code></pre>\n\n<p>application.js</p>\n\n<pre><code>// This file is automatically compiled by Webpack, along with any other files\n// present in this directory. You're encouraged to place your actual application logic in\n// a relevant structure within app/javascript and only use these pack files to reference\n// that code so it'll be compiled.\n\nrequire(\"@rails/ujs\").start()\nrequire(\"turbolinks\").start()\nrequire(\"@rails/activestorage\").start()\nrequire(\"channels\")\n\n\n// Uncomment to copy all static images under ../images to the output folder and reference\n// them with the image_pack_tag helper in views (e.g &lt;%= image_pack_tag 'rails.png' %&gt;)\n// or the `imagePath` JavaScript helper below.\n//\n// const images = require.context('../images', true)\n// const imagePath = (name) =&gt; images(name, true)\n\n//= require jquery\n//= require jquery_ujs\n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "queue", "amazon-sqs"], "answers": [{"tags": [], "owner": {"reputation": 2486, "user_id": 3507137, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iG4Vg.jpg?s=128&g=1", "display_name": "Soubhik Mondal", "link": "https://stackoverflow.com/users/3507137/soubhik-mondal"}, "is_accepted": false, "score": 2, "last_activity_date": 1573617730, "creation_date": 1573617730, "answer_id": 58830161, "question_id": 58829748, "link": "https://stackoverflow.com/questions/58829748/jobs-pushing-to-queue-but-not-processing/58830161#58830161", "title": "Jobs pushing to queue, but not processing", "body": "<p><strong>1. You may need to implement <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-short-and-long-polling.html\" rel=\"nofollow noreferrer\">Long Polling</a>.</strong></p>\n\n<p>SQS is a distributed system. By default, when you read from a queue, AWS returns you the response only from a small subset of its servers. That's why you receive empty array some times. This is known as Short Polling.</p>\n\n<p>When you implement Long Polling, AWS waits until it gets the response from all it's servers.</p>\n\n<p><a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/SQS/Client.html#receive_message-instance_method\" rel=\"nofollow noreferrer\">When you're calling ReceiveMessage API, set the parameter WaitTimeSeconds > 0</a>.</p>\n\n<p><strong>2. <a href=\"https://docs.aws.amazon.com/AWSSimpleQueueService/latest/SQSDeveloperGuide/sqs-visibility-timeout.html\" rel=\"nofollow noreferrer\">Visibility Timeout</a> may be too short.</strong></p>\n\n<p>The Visibility Timeout controls how long a message currently being read by one poller is invisible to other pollers. If the visibility timeout is too short, then other pollers may start reading the message before your first poller has processed and deleted it.</p>\n\n<p>Since SQS supports multiple pollers reading the same message. From the <a href=\"https://docs.aws.amazon.com/sdk-for-ruby/v3/api/Aws/SQS/Client.html#delete_message-instance_method\" rel=\"nofollow noreferrer\">docs</a> -</p>\n\n<blockquote>\n  <p>The ReceiptHandle is associated with a specific instance of receiving a message. If you receive a message more than once, the ReceiptHandle is different each time you receive a message. When you use the DeleteMessage action, you must provide the most recently received ReceiptHandle for the message (otherwise, the request succeeds, but the message might not be deleted).</p>\n</blockquote>\n"}], "owner": {"reputation": 5772, "user_id": 1562574, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/5b2213bb9127f969d58a83ee828bcb1b?s=128&d=identicon&r=PG", "display_name": "Dipak Panchal", "link": "https://stackoverflow.com/users/1562574/dipak-panchal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1573617730, "creation_date": 1573614498, "question_id": 58829748, "link": "https://stackoverflow.com/questions/58829748/jobs-pushing-to-queue-but-not-processing", "title": "Jobs pushing to queue, but not processing", "body": "<p>I am using AWS SQS. I am getting 2 issues.</p>\n\n<ol>\n<li><h1> </h1>\n\n<p>Sometime, messages are present in the queue but I am not able to read that.\nWhen I fetch, I am getting blank array, same like not any messages found in queue.</p></li>\n<li><h1> </h1>\n\n<p>When I am deleting a message from queue then it gives me like</p></li>\n</ol>\n\n<blockquote>\n  <p>sqs.delete_message({queue_url: queue_url, receipt_handle: receipt_handle})</p>\n  \n  <p>=> Aws::EmptyStructure</p>\n</blockquote>\n\n<p>When I check in SQS (In AWS), message still present even I refresh page more then 10 times.</p>\n\n<p>Can you help me why this happens ?</p>\n"}, {"tags": ["ruby", "character", "cjk"], "answers": [{"tags": [], "owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "is_accepted": false, "score": 3, "last_activity_date": 1573741511, "last_edit_date": 1573741511, "creation_date": 1573617475, "answer_id": 58830131, "question_id": 58829740, "link": "https://stackoverflow.com/questions/58829740/how-do-i-filter-out-invisible-characters-without-affecting-japanese-character-se/58830131#58830131", "title": "How do I filter out invisible characters without affecting Japanese character set?", "body": "<p>The character <code>U+2028</code> is <a href=\"https://www.fileformat.info/info/unicode/char/2028/index.htm\" rel=\"nofollow noreferrer\">LINE SEPARATOR</a> and is one of space characters.</p>\n\n<p>To select only the Japanese characters is (I am afraid) quite tricky in the Unicode space, because CJK characters spread all over across so many planes, even though Ruby supports an extensive Unicode <em>category</em> format in <code>Regexp</code> like <code>\\p{Hiragana}</code>.  However, if your only interest is Japanese and ASCII, the NKF library is useful.  Here is an example:</p>\n\n<pre><code>require 'nkf'\norig = \"b2\u03b1\u00c7()\u3042\u76f8\u301c\\u2028\\u3000\uff3f\u2501\u25cf\u2605\u3011\"\np orig\np NKF.nkf('-w -E', NKF.nkf('-e', orig))\n\n# =&gt;\n# \"b2\u03b1\u00c7()\u3042\u76f8\u301c\\u2028\u3000\uff3f\u2501\u25cf\u2605\u3011\"\n# \"b2\u03b1()\u3042\u76f8\u301c\u3000\uff3f\u2501\u25cf\u2605\u3011\"\n</code></pre>\n\n<p>As you see, the unicode character <code>U+2028</code> is filtered out, whereas a Greek character \"\u03b1\" is preserved because it is included in the Japanese JIS-X-0208 code. Note the accented alphabets like \"\u00c7\" are filtered out, because they are not included.  The set of so-called hankaku-kana is <strike>filtered out</strike> (<em>Edited-from</em>) converted into zenkaku-kana (<em>Edited-to</em>) in this formula. The JIS-X-0212 character set is not supported, either.  </p>\n\n<p>A solution for your specific case.</p>\n"}, {"tags": [], "owner": {"reputation": 930, "user_id": 3577922, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eURpm.jpg?s=128&g=1", "display_name": "Masa Sakano", "link": "https://stackoverflow.com/users/3577922/masa-sakano"}, "is_accepted": false, "score": 0, "last_activity_date": 1573754734, "creation_date": 1573754734, "answer_id": 58863231, "question_id": 58829740, "link": "https://stackoverflow.com/questions/58829740/how-do-i-filter-out-invisible-characters-without-affecting-japanese-character-se/58863231#58863231", "title": "How do I filter out invisible characters without affecting Japanese character set?", "body": "<p>I have come up with other solutions (for Ruby 2) in addition to the solution with the NKF library. The comparison as described below is in a way <em>interesting</em>, as they are slightly different from one another.  This is a major revision, and so I am posting it as a separate answer. I am also describing the background about this at the end of this post.<br>\nI am assuming the original input is in UTF-8 encoding except for the first section (if not, convert it to the UTF-8 first to apply any of the examples).</p>\n\n<h2>Solutions to filtering out illegitimate characters</h2>\n\n<p>\"<em>illegitimate</em>\" means the character code that is not included in the encoding defined for a String instance.\nIn Ruby 2, such String usually should have the encoding <code>ASCII-8BIT</code>.  However, some may wrongly have <code>UTF-8</code> encoding.</p>\n\n<p>If it has the encoding <code>ASCII-8BIT</code>, but if you want to get a legitimate <code>UTF-8</code> String,</p>\n\n<pre><code>s1 = String.new(\"\u3042\\x99\", encoding: 'ASCII-8BIT')  # An example ASCII-8BIT\n                    # =&gt; \"\\xE3\\x81\\x82\\x99\"\ns1.encoding         # =&gt; #&lt;Encoding:ASCII-8BIT&gt;\ns1.valid_encoding?  # =&gt; true because 'ASCII-8BIT' accepts anything.\n\ns1.force_encoding('UTF-8')\n                    # =&gt; s1==\"\u3042\\x99\"\ns1.valid_encoding?  # =&gt; false\n\ns2 = s1.encode('UTF-8', invalid: :replace, replace: '')\n                    # =&gt; \"\u3042\"\ns2.valid_encoding?  # =&gt; true\n</code></pre>\n\n<p>If it has wrongly the encoding <code>UTF-8</code>, and if you want to filter out the illegitimate codepoints,</p>\n\n<pre><code>s1 = String.new(\"\u3042\\x99\", encoding: 'UTF-8')  # An example 'UTF-8'\n                    # =&gt; \"\u3042\\x99\"\ns1.encoding         # =&gt; #&lt;Encoding:UTF-8&gt;\ns1.valid_encoding?  # =&gt; false\ns2 = s1.encode('UTF-8', invalid: :replace, replace: '')\n                    # =&gt; \"\u3042\"\ns2.valid_encoding?  # =&gt; true\n</code></pre>\n\n<h2>Solutions to filtering out \"non-Japanese\" characters</h2>\n\n<p>All the following methods are to filter out \"<strong>non-Japanese</strong>\" characters.\nBasically, \"<strong>non-Japanese</strong>\" characters are those that are not included in one or more of the traditional standard of the Japanese character set.\nSee the next section for the detailed background of the definition of the \"<strong>non-Japanese</strong>\" characters.</p>\n\n<p>The strategy here is to convert the encoding of the original String to a Japanese JIS encoding (referred to as <code>ISO-2022-JP</code> or <code>EUC-JP</code>; basically JIS-X-0208) and to convert back to <code>UTF-8</code>.</p>\n\n<h3>Use <code>String#encode</code></h3>\n\n<p>Ruby-2 built-in <code>String#encode</code> does the exact job.</p>\n\n<pre><code>orig = \"b2\u25c7\u3012\u03b1()\u3042\u76f8\u301c\\u3000\uff3f\uff18\uff24\u2501\u25cf\u2605\u3011$\u00a3\u20ac\u00c7\u2661\u3314\u2462\\u2028\uff8a\uff9d\uff76\uff78\"\nprint \"Orig:\"; p orig\nprint \"Enc: \"; p orig.encode('ISO-2022-JP', undef: :replace, replace: '').encode('UTF-8')\n</code></pre>\n\n<p><strong>Characteristics</strong></p>\n\n<ul>\n<li>\"zenkaku-alnum\": preserved</li>\n<li>\"hankaku-kana\": filtered out</li>\n<li>Euro-sign: filtered out</li>\n<li>Latin1: filtered out</li>\n<li>JISX0212: filtered out</li>\n<li>CJK Compatibility: filtered out</li>\n<li>Circled Digit: filtered out</li>\n<li>Unicode <a href=\"https://www.fileformat.info/info/unicode/char/2028/\" rel=\"nofollow noreferrer\">Line Separator</a>: filtered out</li>\n</ul>\n\n<h3>Use NKF library</h3>\n\n<p>The NKF library is one of the standard libraries that come with the official Ruby release.\nThe library is traditional and has been used for decades; cf., NKF stands for <a href=\"https://ja.wikipedia.org/wiki/Network_Kanji_Filter\" rel=\"nofollow noreferrer\">Network Kanji Filter</a>.\nIt does a very similar, though slightly different, job to/from Ruby Encoding.</p>\n\n<pre><code>orig = \"b2\u25c7\u3012\u03b1()\u3042\u76f8\u301c\\u3000\uff3f\uff18\uff24\u2501\u25cf\u2605\u3011$\u00a3\u20ac\u00c7\u2661\u3314\u2462\\u2028\uff8a\uff9d\uff76\uff78\"\nrequire 'nkf'\nprint \"NKF: \"; p NKF.nkf('-w -E', NKF.nkf('-e', orig))\n</code></pre>\n\n<p><strong>Characteristics</strong></p>\n\n<ul>\n<li>\"zenkaku-alnum\": preserved</li>\n<li>\"hankaku-kana\": converted into \"zenkaku\" (aka full-width)</li>\n<li>Euro-sign: filtered out</li>\n<li>Latin1: filtered out</li>\n<li>JISX0212: filtered out</li>\n<li>CJK Compatibility: preserved</li>\n<li>Circled Digit: preserved</li>\n<li>Unicode <a href=\"https://www.fileformat.info/info/unicode/char/2028/\" rel=\"nofollow noreferrer\">Line Separator</a>: filtered out</li>\n</ul>\n\n<h3>Use iconv Gem</h3>\n\n<p>Ruby Gem <a href=\"https://rubygems.org/gems/iconv/\" rel=\"nofollow noreferrer\"><code>iconv</code></a> does not come with the standard Ruby anymore (I think it used to, up to Ruby 2.1 or something).  But you can easily install it with the gem command like <code>gem install iconv</code> .</p>\n\n<p>It can handle <code>ISO-2022-JP-2</code>, unlike the above-mentioned 2 methods, which may be handy (n.b., the encoding ISO-2022-JP-2 is actually defined in Ruby Encoding, but no conversion is defiend for or from it in Ruby in default).  Once installed, the following is an example.</p>\n\n<pre><code>orig = \"b2\u25c7\u3012\u03b1()\u3042\u76f8\u301c\\u3000\uff3f\uff18\uff24\u2501\u25cf\u2605\u3011$\u00a3\u20ac\u00c7\u2661\u3314\u2462\\u2028\uff8a\uff9d\uff76\uff78\"\nrequire 'iconv'\noutput = ''\nIconv.open('iso-2022-jp-2', 'utf-8') do |cd|\n  cd.discard_ilseq=true\n  output = cd.iconv orig &lt;&lt; cd.iconv(nil)\nend\ns2 = Iconv.conv('utf-8', 'iso-2022-jp-2', output)\nprint \"Icon:\"; p s2\n</code></pre>\n\n<p><strong>Characteristics</strong></p>\n\n<ul>\n<li>\"zenkaku-alnum\": preserved</li>\n<li>\"hankaku-kana\": preserved</li>\n<li>Euro-sign: preserved</li>\n<li>Latin1: preserved</li>\n<li>JISX0212: preserved</li>\n<li>CJK Compatibility: filtered out</li>\n<li>Circled Digit: preserved</li>\n<li>Unicode <a href=\"https://www.fileformat.info/info/unicode/char/2028/\" rel=\"nofollow noreferrer\">Line Separator</a>: filtered out</li>\n</ul>\n\n<h3>Summary</h3>\n\n<p>Here are the outputs of the above-mentioned three methods:</p>\n\n<pre><code>Orig:\"b2\u25c7\u3012\u03b1()\u3042\u76f8\u301c\u3000\uff3f\uff18\uff24\u2501\u25cf\u2605\u3011$\u00a3\u20ac\u00c7\u2661\u3314\u2462\\u2028\uff8a\uff9d\uff76\uff78\"\nEnc: \"b2\u25c7\u3012\u03b1()\u3042\u76f8\u301c\u3000\uff3f\uff18\uff24\u2501\u25cf\u2605\u3011$\u00a3\"\nNKF: \"b2\u25c7\u3012\u03b1()\u3042\u76f8\u301c\u3000\uff3f\uff18\uff24\u2501\u25cf\u2605\u3011$\u00a3\u3314\u2462\u30cf\u30f3\u30ab\u30af\"\nIcon:\"b2\u25c7\u3012\u03b1()\u3042\u76f8\u301c\u3000\uff3f\uff18\uff24\u2501\u25cf\u2605\u3011$\u00a3\u20ac\u00c7\u2661\u2462\uff8a\uff9d\uff76\uff78\"\n</code></pre>\n\n<p>All the code snippets above here are available as a <a href=\"https://gist.github.com/masasakano/10703ccb621d08c51f7e19e8900ea0ae\" rel=\"nofollow noreferrer\">gist in Github</a> for convenience \u2014 download or <code>git clone</code> and run it.</p>\n\n<hr>\n\n<h2>Background</h2>\n\n<p>What is an invalid character?  The character <code>U+2028</code>, for example as in the question, is a legitimate UTF-8 character (<a href=\"https://www.fileformat.info/info/unicode/char/2028/\" rel=\"nofollow noreferrer\">Line Separator</a>).  So, there is no <em>general</em> reason to filter such characters out, though some individual situations may require to.</p>\n\n<p>What is an English character?  The lower- and upper-case alphabets (52 in total) probably are. Then, how about the dollar sign ($)? Pound sign (\u00a3)? Euro sign (\u20ac)?  The dollar sign is an ASCII character, whereas neither of the pound and Euro signs is not. The pound sign is included in the traditional Latin-1 (ISO-8859-1) character set, whereas the Euro sign is not.  As such, what is an English character is not a trivial question.<br>\nYou may define ASCII (or Latin-1, or whatever) is the only English character set in your definition, but it is somewhat arbitrary.</p>\n\n<p>What is a Japanese character?  OK, Hiragana and Katakana are unique to Japanese. How about Kanji? Do you accept simplified Chinese characters, which are not used in Japan, as Kanji? How about symbols? OK, a few symbols, such as <code>\u3002</code> (<code>U+3002</code>; <a href=\"http://www.fileformat.info/info/unicode/char/3002/\" rel=\"nofollow noreferrer\">Ideographic Full Stop</a>) and <code>\u300c</code> (<code>U+300c</code>; <a href=\"https://www.fileformat.info/info/unicode/char/300c/]\" rel=\"nofollow noreferrer\">Left Corner Bracket</a>) are essential punctuations in the Japanese text. But, is there any reason to regard characters like <code>\u25bc</code> (<a href=\"https://www.fileformat.info/info/unicode/char/25bc/\" rel=\"nofollow noreferrer\">Black Down-Pointing Triangle</a>), which has been used widely among Japanese-language computer users for decades, as Japanese specific? Perhaps not. They are just symbols that can be used anywhere in the world. And worse, it is not a clear cut; for example, although it is perhaps fair to argue <a href=\"https://www.fileformat.info/info/unicode/char/3012/\" rel=\"nofollow noreferrer\">Postal Mark</a> <code>\u3012</code> is Japanese specific, it is not an essential punctuation like the full stop but just a symbol fairly popularly used in Japan. I would not be surprised if the very similar symbol is actually used elsewhere in the world, unknown to me.</p>\n\n<p>Being similar to the argument of ASCII and Latin-1 for English characters, you could define the traditionally used characters included in the JIS (X 0208) character set are the valid Japanese characters. Again, it is inevitably arbitrary. For example, the Pound sign (\u00a3) is included in it, whereas Euro sign is not. The diamond mark <code>\u25c7</code> (<a href=\"https://www.fileformat.info/info/unicode/char/25c7/\" rel=\"nofollow noreferrer\">White Diamond</a>) is included, whereas the heart mark <code>\u2661</code> (<a href=\"https://www.fileformat.info/info/unicode/char/2661/\" rel=\"nofollow noreferrer\">White Heart Suit</a>) is not. Or, what about those so-called \"zenkaku\" (aka full-width) characters, which are just duplications of alphabets and Arabic numerals of 0 to 9 of ASCII?</p>\n\n<p>After all, the Unicode is the <strong>unified</strong> set of the characters used in the world regardless of the languages (\u2014 well, ideally at least, though you may argue the real Unicode is not quite idealistic).  In this sense there is <strong>no definite answer</strong> to filter out non-English or non-Japanese characters. Consequently, the original question about filtering out <code>U+2028</code> is one of those arbitrary demands coming from some specific situations, even though it can well be a popular demand in fact (and hence my answer).</p>\n\n<p>Only the definitive thing you could do is to filter out illegitimate characters for the chosen character encoding, such as UTF-8, as described in the first section of this answer. The rest is, really, up to each individual's need in their specific situations.</p>\n\n<h3>Background of the \"Japanese\" character sets</h3>\n\n<p>The Japanese character set was traditionally defined in the JIS standards in the official term. Specifically, <a href=\"https://en.wikipedia.org/wiki/JIS_X_0208\" rel=\"nofollow noreferrer\">JIS-X-0208</a> and much less popular <a href=\"https://en.wikipedia.org/wiki/JIS_X_0212\" rel=\"nofollow noreferrer\">JIS-X-0212</a> (often casually called \"\u88dc\u52a9\u6f22\u5b57\") are the two standards (n.b., they have their specific details like 1983 and 1990). Unfortunately, in practice, NEC, Microsoft and Apple adopted their own variations (called broadly <code>Shift_JIS</code> or <code>SJIS</code>, though each has their own variation). Due to the popularity of their OSs, they were (and to some extent still are(!)) more widely used in Japan in reality than the strict official ones before the era where the UTF-8 is widely accepted.</p>\n\n<p>Note that all of them accept the ASCII at least.  So, it has been always safe to use ASCII in pretty much any situations (excepting some in early 80s or before).</p>\n\n<p>The Unicode is very inclusive, containing pretty much any of the characters that have been defined in any of these character codesets. That means any of the characters that have once stirred hot debate (whether you should not use or you may) can be legitimately used in (any of) the Unicode encoding now \u2013 I mean <em>legitimate</em> as far as the character encoding is concerned.</p>\n\n<p>I presume this confused practical situation has lead to the results as shown above that slightly differ from one another, depending which method you use.  Pick your favourite, depending on your need!</p>\n"}], "owner": {"reputation": 58500, "user_id": 170365, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f28376004e72c08544276ed5a6833703?s=128&d=identicon&r=PG", "display_name": "Strawberry", "link": "https://stackoverflow.com/users/170365/strawberry"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 298, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1573999171, "creation_date": 1573614415, "last_edit_date": 1573999171, "question_id": 58829740, "link": "https://stackoverflow.com/questions/58829740/how-do-i-filter-out-invisible-characters-without-affecting-japanese-character-se", "title": "How do I filter out invisible characters without affecting Japanese character set?", "body": "<p>I noticed that some of my input is getting <code>U+2028</code>. I don't know what this is, but how can I prevent this with consideration of UTF-8 and English/Japanese characters?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 841, "user_id": 12294425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dxWNY.jpg?s=128&g=1", "display_name": "calebkm", "link": "https://stackoverflow.com/users/12294425/calebkm"}, "edited": false, "score": 1, "creation_date": 1573688925, "post_id": 58829381, "comment_id": 103968209, "body": "I found this <i>very similar</i> question here: <a href=\"https://stackoverflow.com/questions/7531563/get-gem-vendor-files-in-asset-pipeline-path\" title=\"get gem vendor files in asset pipeline path\">stackoverflow.com/questions/7531563/&hellip;</a>  But the solution for the OP (from 2011) is now the default gemspec setting - <code>s.require_paths = [&quot;lib&quot;]</code> - as stated here: <a href=\"https://guides.rubygems.org/specification-reference/#require_pathsval\" rel=\"nofollow noreferrer\">guides.rubygems.org/specification-reference/#require_pathsva&zwnj;&#8203;l</a>"}], "owner": {"reputation": 841, "user_id": 12294425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dxWNY.jpg?s=128&g=1", "display_name": "calebkm", "link": "https://stackoverflow.com/users/12294425/calebkm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1573688480, "creation_date": 1573611481, "last_edit_date": 1573688480, "question_id": 58829381, "link": "https://stackoverflow.com/questions/58829381/how-to-include-assets-from-one-gem-inside-another-gem", "title": "How to include assets from one gem inside another gem?", "body": "<p>I'm building a gem - a Rails engine - let's call it <code>my_new_gem</code> - and inside of <code>my_new_gem</code> I'm trying to include JavaScript assets from another gem - let's call it <code>the_other_gem</code>.</p>\n\n<p>In the <code>gemspec</code> for <code>my_new_gem</code> I've included <code>the_other_gem</code> using <code>add_dependency</code>:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Gem::Specification.new do |s|\n  s.name        = 'my_new_gem'\n  s.version     = '0.0.1'\n  s.date        = '2019-11-12'\n  ...\n\n  s.add_dependency 'the_other_gem'\nend\n</code></pre>\n\n<p>And then in the <code>app/assets/javascripts/my_gem.js</code> in <code>my_new_gem</code> I have required the JS from <code>the_other_gem</code> the standard way:</p>\n\n<pre class=\"lang-js prettyprint-override\"><code>// Trying to require a JS file from another gem in my gem here\n//= require the_other_gem\n</code></pre>\n\n<p>When I boot up a test Rails app that includes my gem in the <code>gemfile</code> with <code>gem 'my_new_gem'</code> I get a <code>Sprockets::FileNotFound</code> error when attempting to load any page in a browser:</p>\n\n<pre><code>couldn't find file 'the_other_gem' with type 'application/javascript'\nChecked in these paths: \n  /Users/me/.rbenv/versions/2.6.1/lib/ruby/gems/2.6.0/gems/babel-source-5.8.35/lib\n  /Users/me/Projects/my_project/app/assets/config\n  /Users/me/Projects/my_project/app/assets/images\n  ...\n</code></pre>\n\n<p>When I scan through all the above paths, the app is <em>NOT</em> including any vendor or asset paths from <code>the_other_gem</code> in that list, like I'm expecting it to.</p>\n\n<p>Although it does make sense that if the path to the JS in <code>the_other_gem</code> is not showing up in my Rails app asset paths above that the JS file wouldn't be found, I don't understand <em>WHY</em> the path isn't being included.</p>\n\n<p>If I include <code>the_other_gem</code> directly in my Rails app with <code>gem 'the_other_gem'</code> and also include <code>//= require the_other_gem</code> in the Rails app <code>application.js</code> directly then everything loads and Sprockets successfully finds the paths for <code>the_other_gem</code> assets.</p>\n\n<p>Although this works, I'd rather not require folks to include the gem directly in their own Rails app, when I thought I could just tell <code>my_new_gem</code> to include it automagically for them under the hood.</p>\n\n<p>So the mystery is, how can I get <code>my_new_gem</code> to include the right paths in the final Rails app so the javascript files from <code>the_other_gem</code> will load correctly? I feel like I'm missing something super obvious ... thanks so much!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "grape-api", "grape-entity"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1573611372, "post_id": 58828970, "comment_id": 103934869, "body": "The code isn&#39;t exactly clear but it looks like you&#39;re doing an <a href=\"https://stackoverflow.com/q/97197/3784008\">N+1 query</a>. So the short answer is: don&#39;t do that. (specifically, it looks like for each <code>user</code> in <code>User.all</code> you are calling <code>TransitiveUserProfile.all.where(&quot;profile_id=?&quot;, 12).where(user_id: object.id)</code> and then instantiating all records from that collection, so around 700+1 queries if I&#39;m reading this right)"}, {"owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573611995, "post_id": 58828970, "comment_id": 103935003, "body": "No, i don&#39;t think this is N+1 problem, im getting all users and storing in and getting all profiles storing @app_profiles(TransitiveUserProfile.all.where(&quot;profile_id=?&quot;&zwnj;&#8203;, 12)) and getting users(User.all).  Using grape-api for each user, im filtering records from already present in @app_profiles using where condition(@all_app_profiles.where(user_id: object.id)). is there any atlernate way to fix this"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573613890, "post_id": 58828970, "comment_id": 103935355, "body": "Keep in mind these two things: 1 - your <code>Entity</code> is used for rendering each record in <code>@users</code>, so for each <code>user</code> in <code>@users</code> you are calling the <code>applications_and_profiles</code> method; 2 - calling <code>Model.where</code> doesn&#39;t instantiate the records, so your <code>@all_app_profiles</code> does not have the records in memory, so when you finally call <code>@all_app_profiles.where().collect</code> THAT is when the records get pulled into memory, hence you are running that query once for each user, hence it is 700+1 aka N+1. (and your logs should show that) See <a href=\"https://stackoverflow.com/a/35084280/3784008\">here</a> for more."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1573618935, "post_id": 58828970, "comment_id": 103936358, "body": "@Sidduh I believe anothermh is correct, it is N+1 and you should be able to confirm this by checking your SQL logs in your console, it will be firing off a bunch of similar queries. As a quick fix try <code>@all_app_profiles.where(user_id: object.id).includes(:profile).collect { |t| ... }</code>"}, {"owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "edited": false, "score": 0, "creation_date": 1573661649, "post_id": 58828970, "comment_id": 103956517, "body": "Thanks all- finally iresolved using - @all_app_profiles.select {|i| i.user_id == object.id}.collect {|t|  {name: t.profile.unique_id, unique_id: t.profile.unique_id, rights: t.profile.profilrechte} }"}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 4078877, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001852313028/picture?type=large", "display_name": "Manju Sagar", "link": "https://stackoverflow.com/users/4078877/manju-sagar"}, "is_accepted": false, "score": 1, "last_activity_date": 1573627051, "last_edit_date": 1573627051, "creation_date": 1573625569, "answer_id": 58831273, "question_id": 58828970, "link": "https://stackoverflow.com/questions/58828970/rails-grape-api-performannce-when-getting-more-data/58831273#58831273", "title": "Rails Grape api: performannce when getting more data", "body": "<p>app_profiles = @all_app_profiles.where(user_id: object.id).collect{|t|  {name: t.profile.unique_id, rights: t.profile.profilrechte} }</p>\n\n<p>The above sql creates a N+1 problem, which will make the performace slower. You can check your logs regarding this. Better way to resolve the issue is use eager loading as shown below(As suggested by @max pleaner and @anothermh )</p>\n\n<p>app_profiles = @all_app_profiles.where(user_id: object.id).includes(:profile ).collect{|t|  {name: t.profile.unique_id, rights: t.profile.profilrechte} }</p>\n\n<p>For more information regarding Eager Loading you can follow the below link:</p>\n\n<p>1) <a href=\"https://medium.com/@codenode/10-tips-for-eager-loading-to-avoid-n-1-queries-in-rails-2bad54456a3f\" rel=\"nofollow noreferrer\">https://medium.com/@codenode/10-tips-for-eager-loading-to-avoid-n-1-queries-in-rails-2bad54456a3f</a></p>\n\n<p>2) <a href=\"https://blog.heroku.com/solving-n-plus-one-queries\" rel=\"nofollow noreferrer\">https://blog.heroku.com/solving-n-plus-one-queries</a></p>\n"}, {"tags": [], "owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "is_accepted": false, "score": 0, "last_activity_date": 1573661586, "creation_date": 1573661586, "answer_id": 58841207, "question_id": 58828970, "link": "https://stackoverflow.com/questions/58828970/rails-grape-api-performannce-when-getting-more-data/58841207#58841207", "title": "Rails Grape api: performannce when getting more data", "body": "<p>Thanks all, yes it was N+1 issue. finally i was able to solve using  <code>@all_app_profiles.select {|i| i.user_id == object.id}.collect {|t|  {name: t.profile.unique_id, unique_id: t.profile.unique_id, rights: t.profile.profilrechte} }</code> instead of <code>@all_app_profiles.where(user_id: object.id).collect{|t|  {name: t.profile.unique_id, rights: t.profile.profilrechte} }\n    [{:appl_id=&gt;\"test\", :profiles=&gt;app_profiles}]</code></p>\n"}], "owner": {"reputation": 1441, "user_id": 7901138, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6821410133ab0e0bc044a166ba2b66f2?s=128&d=identicon&r=PG&f=1", "display_name": "Siddu h", "link": "https://stackoverflow.com/users/7901138/siddu-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573661586, "creation_date": 1573607784, "last_edit_date": 1573649353, "question_id": 58828970, "link": "https://stackoverflow.com/questions/58828970/rails-grape-api-performannce-when-getting-more-data", "title": "Rails Grape api: performannce when getting more data", "body": "<p>i'm facing performance issue using grape api. \ni have following models:</p>\n\n<pre><code>class Profile\n   has_many :transitive_user_profiles\nend\n\nclass TransitiveUserProfile &lt; ApplicationRecord\n  belongs_to :profile\n  belongs_to :user\n  belongs_to :client\n</code></pre>\n\n<p>end</p>\n\n<pre><code>class DefaultAddress \n  belongs_to :user\nend\n</code></pre>\n\n<p>i'm getting all users and respective profiles through rest-api using grape</p>\n\n<pre><code>@all_profiles =  @all_profiles || \n                TransitiveUserProfile.includes(:profile).where(\n              \"profile_id IN (?)\", application.profile_ids)\npresent @users, with: Identity::V3::UserEntity, all_profiles: @all_profiles #@user = User.all - around 700 users\n</code></pre>\n\n<p>i have written UserEntity class</p>\n\n<pre><code>class UserEntity &lt; Grape::Entity\n  expose :id, as: :uniqueId\n  expose :trimmed_userid, as: :userId\n  expose :nachname, as: :lastName\n  expose :vorname, as: :firstName\n  expose :is_valid, as: :isValid\n  expose :is_system_user, as: :isSystemUser\n  expose :email\n  expose :utc_updated_at, as: :updatedAt\n  expose :applications_and_profiles\n\n\n  def email  \n    object.default_address_email\n  end\n\n   def applications_and_profiles\n    app_profiles = @all_app_profiles.where(user_id: object.id).collect{|t|  {name: t.profile.unique_id, rights: t.profile.profilrechte} }\n    [{:appl_id=&gt;\"test\", :profiles=&gt;app_profiles}]\n  end\n\n end\n</code></pre>\n\n<p>i'm facing issue, when i try to get all  users and profiles it takes more than 15 secs. facing issue in following code(taking time to get associated object). </p>\n\n<pre><code> def email  \n    object.default_address_email\n  end\n\n   def applications_and_profiles\n    app_profiles = @all_app_profiles.where(user_id: object.id).collect{|t|  {name: t.profile.unique_id, rights: t.profile.profilrechte} }\n    [{:appl_id=&gt;\"test\", :profiles=&gt;app_profiles}]\n  end \n</code></pre>\n\n<p>how can i resolve with efficient way(normally less than 5 secs)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "audio", "google-cloud-speech"], "comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1573650716, "post_id": 58828958, "comment_id": 103950082, "body": "LINEAR16 is PCM encoded audio data, but you are sending an mp3 file. You need to convert the mp3 file to PCM first."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 10322214, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DogV5iDZo88/AAAAAAAAAAI/AAAAAAAAAFs/kZ0nQspzpyE/photo.jpg?sz=128", "display_name": "Vinicius Porto", "link": "https://stackoverflow.com/users/10322214/vinicius-porto"}, "edited": false, "score": 0, "creation_date": 1573653219, "post_id": 58838051, "comment_id": 103951559, "body": "Thanks, i&#39;ll try this in my frontend using this library [1] but if not works i&#39;ll try in backend with this other gem [2]   [1]: <a href=\"https://www.npmjs.com/package/ffmpeg\" rel=\"nofollow noreferrer\">npmjs.com/package/ffmpeg</a> [2]: <a href=\"https://github.com/streamio/streamio-ffmpeg\" rel=\"nofollow noreferrer\">github.com/streamio/streamio-ffmpeg</a>"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": false, "score": 0, "last_activity_date": 1573651143, "creation_date": 1573651143, "answer_id": 58838051, "question_id": 58828958, "link": "https://stackoverflow.com/questions/58828958/record-audio-flac-or-wav-in-reactjs-and-use-speech2text-from-google-using-ruby/58838051#58838051", "title": "Record audio (FLAC or WAV) in ReactJs and use Speech2Text from google using ruby backend", "body": "<p>You are sending an mp3 file to the API, but you are telling it that the file is encoded as LINEAR16 (PCM data). This will not work.</p>\n\n<p>According to the <a href=\"https://cloud.google.com/speech-to-text/docs/encoding#audio-encodings\" rel=\"nofollow noreferrer\">speech API docs</a>, MP3 is only supported through the beta API. </p>\n\n<p>One easy way to resolve this is to use a simple external audio encoder like ffmpeg, and convert it to something like FLAC before sending it over:</p>\n\n<pre><code>ffmpeg -i input.mp3 output.flac\n</code></pre>\n\n<p>Then set <code>FLAC</code> as the audio type for your <code>encoding</code> setting. But remember you cannot upload more then 1 minute of audio using this method. Uploading longer files has to be done asynchronously by using Google Cloud servers for storage.</p>\n"}], "owner": {"reputation": 11, "user_id": 10322214, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-DogV5iDZo88/AAAAAAAAAAI/AAAAAAAAAFs/kZ0nQspzpyE/photo.jpg?sz=128", "display_name": "Vinicius Porto", "link": "https://stackoverflow.com/users/10322214/vinicius-porto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 598, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1574338983, "creation_date": 1573607694, "last_edit_date": 1573608875, "question_id": 58828958, "link": "https://stackoverflow.com/questions/58828958/record-audio-flac-or-wav-in-reactjs-and-use-speech2text-from-google-using-ruby", "title": "Record audio (FLAC or WAV) in ReactJs and use Speech2Text from google using ruby backend", "body": "<p>I need to record an audio through front-end. I'm using <a href=\"https://www.npmjs.com/package/react-mic\" rel=\"nofollow noreferrer\">React Mic</a> and <a href=\"https://www.npmjs.com/package/mic-recorder-to-mp3\" rel=\"nofollow noreferrer\">mic-recorder-to-mp3</a> ReactJS libraries. Everything is fine, I'm managing to download the blob of the audio and hear it. Although, I need to upload it to my back-end so I can use <a href=\"https://cloud.google.com/speech-to-text/?&amp;utm_source=google&amp;utm_medium=cpc&amp;utm_campaign=latam-BR-all-pt-dr-skws-all-all-trial-b-dr-1007178-LUAC0009046&amp;utm_content=text-ad-none-none-DEV_c-CRE_331159561915-ADGP_SKWS%20%7C%20Multi%20~%20Developers%20%7C%20Speech-Recognition-KWID_43700042824516611-kwd-475503111819-userloc_1001541&amp;utm_term=KW_%2Bspeech%20%2Btext-ST_%2BSpeech%20%2BText&amp;gclid=CjwKCAiAzanuBRAZEiwA5yf4ukocIEdZ3hAym3CJLfbpCgZqqS3RCSbKIcZnAFoxQzEEw56EshHHexoCZoMQAvD_BwE&amp;gclsrc=aw.ds\" rel=\"nofollow noreferrer\">Google SpeechToText API</a> to extract text from audio.</p>\n\n<p>That is the script that im using but its not returning any result, i think that is cos' the audio recorded dont have the right encodings.</p>\n\n<pre><code>require \"google/cloud/speech\"\nrequire 'json'\n\n\n# Instantiates a client\nspeech = Google::Cloud::Speech.new\n\n# The name of the audio file to transcribe\nfile_name = \"./newmp3.mp3\"\n\n\n# The raw audio\naudio_file = File.binread file_name\nencoding = :LINEAR16\n# The audio file's encoding and sample rate        \n    config =  {\n                encoding: \"LINEAR16\",\n                language_code: \"pt-BR\",\n                model: \"default\",\n                sample_rate_hertz: 16000\n            }\n\n    audio  = { content: audio_file }\n\n# Detects speech in the audio file\nresponse = speech.recognize(config, audio)\n\nresults = response.results\n\nputs response\n</code></pre>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "watir"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 3, "creation_date": 1573600375, "post_id": 58827508, "comment_id": 103932440, "body": "Welcome to Stack Overflow. Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;. We can&#39;t tell how you&#39;re using it because you didn&#39;t supply any code, and it doesn&#39;t sound like you read the documentation and tried things. If you tried, what did you try? Why didn&#39;t it work?"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1573614055, "post_id": 58827508, "comment_id": 103935378, "body": "I have added a selenium and watir to this question because those tags are needed for your question."}], "answers": [{"tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": false, "score": 1, "last_activity_date": 1573613551, "creation_date": 1573613551, "answer_id": 58829648, "question_id": 58827508, "link": "https://stackoverflow.com/questions/58827508/send-keys-where-no-element-is-present-ruby-selenium-webdriver/58829648#58829648", "title": "Send Keys where no element is present (Ruby Selenium-Webdriver)", "body": "<p>Yes, it's possible. You have to use <code>switch_to.active_element</code> to pass the string. For an example, I have written the below code to pass value to the text_field in the google.com</p>\n\n<pre><code>require 'selenium-webdriver'\ndriver=Selenium::WebDriver.for :chrome\ndriver.manage.timeouts.implicit_wait=10\ndriver.navigate.to(\"https://www.google.com/\")\ndriver.switch_to.active_element.send_keys 'raj'\n</code></pre>\n\n<p>But I suggest you to use WATIR which is the wrapper around ruby selenium binding where you don't have to switch to the active element, if you call send_keys on the browser object, it automatically switch to the active element. Write the below code in WATIR</p>\n\n<pre><code>require 'watir'\nb=Watir::Browser.new\nb.goto 'www.google.com'\nb.send_keys 'raj'\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 12363556, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-tIR2sYwm8UY/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdo0pxEnCeIjUwtx_WarO4Z-B-gcA/photo.jpg?sz=128", "display_name": "Aaron Gaze", "link": "https://stackoverflow.com/users/12363556/aaron-gaze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 269, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1573613590, "creation_date": 1573596934, "last_edit_date": 1573613590, "question_id": 58827508, "link": "https://stackoverflow.com/questions/58827508/send-keys-where-no-element-is-present-ruby-selenium-webdriver", "title": "Send Keys where no element is present (Ruby Selenium-Webdriver)", "body": "<p>I'm using Selenium-Webdriver to run my automation tests in Ruby.</p>\n\n<p>One of the sign-in pages for the AUT features a pop-up which is not actually part of the browser page - as such, I can't choose an element to send the required keys to (Username/Password).\nThe pop-up does however automatically highlight the Username field.</p>\n\n<p>I was wondering if there is a way to use 'send keys' without explicitly naming an element - that way I could send the Username, Tab, Password and finally Return.</p>\n\n<p>Any advice will be gratefully received</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "mongoid"], "answers": [{"tags": [], "owner": {"reputation": 2599, "user_id": 12201472, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-PcsKV9F65CQ/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3repCiEtFeVMa1z1D-JpXuqg5wlw6w/photo.jpg?sz=128", "display_name": "Marian13", "link": "https://stackoverflow.com/users/12201472/marian13"}, "is_accepted": false, "score": 0, "last_activity_date": 1573693384, "creation_date": 1573693384, "answer_id": 58847909, "question_id": 58827441, "link": "https://stackoverflow.com/questions/58827441/getting-bson-string-from-from-mongoid-document-object/58847909#58847909", "title": "Getting BSON string from from mongoid document object", "body": "<p>Not completely sure, if this is what you need, but</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Foobar\n  include Mongoid::Document\n\n  store_in collection: :foobars\n\n  field :n, as: :name, type: String\n  field :ts, as: :install_timestamp, type: DateTime\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>john_smith = Foobar.create(name: \"John Smith\", install_timestamp: Time.now)\n# =&gt; #&lt;Foobar _id: 5dcca0b9909208042530925a, n(name): \"John Smith\", ts(install_timestamp): 2019-11-14 00:32:57 UTC&gt;\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>john_smith_attributes = john_smith.attributes\n# =&gt; {\"_id\"=&gt;BSON::ObjectId('5dcca0b9909208042530925a'), \"n\"=&gt;\"John Smith\", \"ts\"=&gt;2019-11-14 00:32:57 UTC}\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>bson = john_smith_attributes.to_bson\n# =&gt; #&lt;BSON::ByteBuffer:0x00007fd59d16eb10&gt;\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>bson_string = bson.to_s\n# =&gt; \"4\\x00\\x00\\x00\\a_id\\x00]\\xCC\\xA0\\xB9\\x90\\x92\\b\\x04%0\\x92Z\\x02n\\x00\\v\\x00\\x00\\x00John Smith\\x00\\tts\\x00\\xC2\\xD5Sgn\\x01\\x00\\x00\\x00\"\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>BSON::Document.from_bson(BSON::ByteBuffer.new(bson_string))\n# =&gt; {\"_id\"=&gt;BSON::ObjectId('5dcca0b9909208042530925a'), \"n\"=&gt;\"John Smith\", \"ts\"=&gt;2019-11-14 00:32:57 UTC}\n</code></pre>\n\n<p>Links to docs:</p>\n\n<ol>\n<li><a href=\"https://api.mongodb.com/bson-ruby/current/BSON/ByteBuffer.html#to_s-instance_method\" rel=\"nofollow noreferrer\">BSON::ByteBuffer#to_s</a></li>\n<li><a href=\"https://docs.mongodb.com/ruby-driver/current/tutorials/bson-v4/#ruby-bson-tutorial\" rel=\"nofollow noreferrer\">from_bson and to_bson</a></li>\n<li><a href=\"https://docs.mongodb.com/mongoid/current/tutorials/mongoid-documents/#accessing-field-values\" rel=\"nofollow noreferrer\">attributes</a></li>\n</ol>\n\n<p>Hope this helps.</p>\n"}], "owner": {"reputation": 1, "user_id": 331893, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ed3ed37f0974311a256cce8707d7625?s=128&d=identicon&r=PG", "display_name": "TCoville", "link": "https://stackoverflow.com/users/331893/tcoville"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573693384, "creation_date": 1573596630, "question_id": 58827441, "link": "https://stackoverflow.com/questions/58827441/getting-bson-string-from-from-mongoid-document-object", "title": "Getting BSON string from from mongoid document object", "body": "<p>Given an example document as below is there a way to get a bson string representing the document?</p>\n\n<pre><code>class Foobar\n  include Mongoid::Document\n\n  store_in collection :foobars\n\n  field :n, as: :name, type: String\n  field :ts, as: :install_timestamp, type: DateTime\n\nend\n</code></pre>\n\n<p>ie</p>\n\n<pre><code>john_smith = Foobar.create(name: \"John Smith\", install_timestamp: Time.now)\n\njohn_smith.bson_string\n</code></pre>\n\n<p>which would return one of the following</p>\n\n<pre><code>{\n  \"n\": \"John Smith\",\n  \"ts\": {\"$date\": {\"$numberLong\":\"1573596151000\"} }\n}\n</code></pre>\n\n<p>or</p>\n\n<pre><code>{\n  \"n\": \"John Smith\",\n  \"ts\" : ISODate(\"2019-11-12T22:02:31.848Z\"),\n}\n</code></pre>\n\n<p>I've tried doing this utilizing the underlying BSON library and the to_bson function but that returns a bytebuffer which I can't manage to get converted into a string.</p>\n"}, {"tags": ["regex", "ruby", "string", "if-statement", "ruby-hash"], "comments": [{"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1573595246, "post_id": 58827152, "comment_id": 103930823, "body": "What do you want to do in this line `    abil_check = $player[:abils][input.gsub(&quot;^a-z&quot;, &quot;&quot;).to_sym]` ?"}, {"owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1573595422, "post_id": 58827152, "comment_id": 103930879, "body": "I want to define <code>abil_check</code> if <code>input</code> contains an ability score found in <code>$player[:abils]</code>."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 1, "creation_date": 1573595495, "post_id": 58827152, "comment_id": 103930897, "body": "OK, what exactly do you want to do using <code>gsub(&quot;^a-z&quot;, &quot;&quot;)</code> ?"}, {"owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1573595809, "post_id": 58827152, "comment_id": 103930990, "body": "I want <code>abil_check</code> to only consist of the ability mentioned in <code>input</code>. (e.g.<code>-2 STR</code> should make <code>abil_check</code> equal <code>str</code>.) Then later I can do <code>$player[:abils][abil_check] + mod.to_i * (pos_or_neg ? 1 : -1)</code>."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1573596018, "post_id": 58827152, "comment_id": 103931041, "body": "So this gsub should filter out all non-letters, right?"}, {"owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "reply_to_user": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "edited": false, "score": 0, "creation_date": 1573596068, "post_id": 58827152, "comment_id": 103931058, "body": "Yes, that&#39;s what it should do."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1573600013, "post_id": 58827152, "comment_id": 103932347, "body": "It&#39;s difficult to tell you how to improve the code without a better idea how you&#39;d use it. That also makes the question quite broad and subject to being off-topic. Please see &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and the linked pages and &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">mcve</a>&quot;."}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 1, "last_activity_date": 1573597773, "last_edit_date": 1573597773, "creation_date": 1573596189, "answer_id": 58827357, "question_id": 58827152, "link": "https://stackoverflow.com/questions/58827152/creating-an-rpg-point-buy-system-why-is-my-if-condition-not-being-met/58827357#58827357", "title": "Creating an RPG point buy system. Why is my if condition not being met?", "body": "<p>You're using an invalid pattern in <code>gsub</code>. <code>^a-z</code> is treated as \"beginning of the line\" followed by <code>a</code> dash and <code>z</code>. You need to replace it with a negated character class and <code>downcase</code> the string:</p>\n\n<pre><code>\"2 STR\".downcase.gsub(/[^a-z]/, '')\n# =&gt; \"str\"\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 58827357, "answer_count": 1, "score": 0, "last_activity_date": 1573597773, "creation_date": 1573595046, "last_edit_date": 1573596265, "question_id": 58827152, "link": "https://stackoverflow.com/questions/58827152/creating-an-rpg-point-buy-system-why-is-my-if-condition-not-being-met", "title": "Creating an RPG point buy system. Why is my if condition not being met?", "body": "<p>I'm creating a point buy method for an RPG in which players modify their character's ability scores. My <code>if</code> condition is not being met when the input should be correct, and I can't tell why.</p>\n\n<pre><code>$player = {\n  abils: {str: 10, con: 10, dex: 10, wis: 10, int: 10, cha: 10}\n}\n\n\ndef abil_point_buy(x)\n  points = x\n  puts \"&lt;Add or subtract points from each ability (e.g. +2 STR, -1 CHA, etc.)&gt;\"\n  loop do\n    puts \"&lt;You have #{points} points remaining. Current ability scores:&gt;\"; print \"&lt;\"\n    $player[:abils].each { |abil, pts| print \"#{abil.upcase}: #{pts} \"}; puts \"&gt;\"\n    input = gets.chomp.downcase\n    abil_check = $player[:abils][input.gsub(\"^a-z\", \"\").to_sym]\n    if abil_check &amp;&amp; input.match?(/\\d/) #checks if input contains a number and an ability score\n      mod = input.gsub(/\\D/, \"\") #determines amount to modify ability score by\n      pos_or_neg = !input.include?('-') #determines if mod will be positive or negative\n      $player[:abils][abil_check] + mod.to_i * (pos_or_neg ? 1 : -1) #adjusts selected ability score by mod\n      pos_or_neg ? points - mod : points + mod\n      break if points == 0\n    else\n      puts \"Something is wrong with your input.\"\n    end\n  end\nend\n</code></pre>\n\n<p>Would also appreciate general tips to improve my code.</p>\n"}, {"tags": ["ruby", "sublimetext3"], "comments": [{"owner": {"reputation": 16941, "user_id": 814803, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LUo4b.png?s=128&g=1", "display_name": "OdatNurd", "link": "https://stackoverflow.com/users/814803/odatnurd"}, "edited": false, "score": 3, "creation_date": 1573598352, "post_id": 58827147, "comment_id": 103931877, "body": "Build systems in Sublime can&#39;t be interactive unless you do extra work to set it up. If you&#39;re using the build system that ships with Sublime, that&#39;s why it&#39;s not working for you."}], "answers": [{"tags": [], "owner": {"reputation": 782, "user_id": 1307996, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ca3b6fb6726e708fe8c4c84300119c5b?s=128&d=identicon&r=PG", "display_name": "Alex V.", "link": "https://stackoverflow.com/users/1307996/alex-v"}, "is_accepted": false, "score": 1, "last_activity_date": 1573632621, "creation_date": 1573632621, "answer_id": 58832769, "question_id": 58827147, "link": "https://stackoverflow.com/questions/58827147/i-cant-run-a-ruby-file-in-sublime-text-3/58832769#58832769", "title": "I can&#39;t run a ruby file in sublime Text 3", "body": "<p>If you are using Windows OS:</p>\n\n<p><strong>1. Create launcher batch file C:\\Ruby26-x64\\RBCMDRUN.BAT</strong> </p>\n\n<pre><code>@echo off\n\nTITLE %1\nset EXE=%~dp0bin\\ruby.exe\nset MYARGS=\n:NEXTARG\n  if \"[%~1]\" NEQ \"[]\" (\n      IF \"[%~1]\" EQU \"[-PAUSE]\" (\n        set ALWAYSPAUSE=Y\n        shift\n        goto NEXTARG\n      )\n      if \"%MYARGS%\" EQU \"\" (\n        set MYARGS=%~1\n      ) else (\n        set MYARGS=%MYARGS% %~1\n      )\n      rem echo %MYARGS%\n      if not \"[%~1]\"==\"[]\" (\n        shift\n        goto NEXTARG\n      )\n  )\n\nIF \"[%MYARGS%]\" EQU \"[]\" (\n    ECHO Error: ruby file name is missing\n    GOTO PAUSEANDEXIT\n)\n\necho %EXE% %MYARGS%\n%EXE% \"%MYARGS%\"\n\nIF %ERRORLEVEL% NEQ 0 (\n    ECHO Program exited with error %ERRORLEVEL% \n    GOTO PAUSEANDEXIT\n)\n\nIF \"%ALWAYSPAUSE%\" NEQ \"Y\" GOTO EXIT\n\n:PAUSEANDEXIT\nPAUSE\n:EXIT\nEXIT\n</code></pre>\n\n<p><strong>2. Add or Modify .sublime-build for Ruby</strong> </p>\n\n<p>Packages/Ruby/Ruby.sublime-build</p>\n\n<pre><code>    \"cmd\": [\"start\", \"C:\\\\Ruby26-x64\\\\RBCMDRUN.BAT\", \"$file\", \"-PAUSE\"],\n    \"shell\": true,\n</code></pre>\n\n<p>Remove \"-PAUSE\" if you don't need it.</p>\n\n<p><strong>3. [Optional] Bind a key for running your script</strong> </p>\n\n<p>Preferences - key bindings</p>\n\n<p><code>{ \"keys\": [\"f5\"], \"command\": \"build\"},</code></p>\n"}], "owner": {"reputation": 9, "user_id": 12363474, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-1fqg8Z1_tw4/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc6qcsTTvLJ8gVrPwu4ARGrBREUxA/photo.jpg?sz=128", "display_name": "Florian Rauchfu&#223;", "link": "https://stackoverflow.com/users/12363474/florian-rauchfu%c3%9f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573632621, "creation_date": 1573595027, "question_id": 58827147, "link": "https://stackoverflow.com/questions/58827147/i-cant-run-a-ruby-file-in-sublime-text-3", "title": "I can&#39;t run a ruby file in sublime Text 3", "body": "<p>When I try to run my file with the \"build\" option in sublime text it tells me <em>\"building\"</em> and then just stops. I don't get an error message and it doesn't crash, it works fine to edit the code. It just doesn't run it at all. It worked when I didnt use \"def\" as command but I have to use them for a school project and it doesnt work at all. \nEdit: It does work with def but it doesnt work when I try to get user input.</p>\n"}, {"tags": ["ruby", "rubygems", "archlinux"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1573597658, "post_id": 58827047, "comment_id": 103931619, "body": "It looks like you&#39;re making it harder than it really is. Did you test your guess in IRB to see what it&#39;d reveal? That&#39;s always a good first step."}], "answers": [{"comments": [{"owner": {"reputation": 120, "user_id": 10826835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9e3FQ.png?s=128&g=1", "display_name": "Groctel", "link": "https://stackoverflow.com/users/10826835/groctel"}, "edited": false, "score": 0, "creation_date": 1573595211, "post_id": 58827087, "comment_id": 103930816, "body": "Is it possible that it may have been needed in earlier versions?"}, {"owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "reply_to_user": {"reputation": 120, "user_id": 10826835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9e3FQ.png?s=128&g=1", "display_name": "Groctel", "link": "https://stackoverflow.com/users/10826835/groctel"}, "edited": false, "score": 0, "creation_date": 1573595367, "post_id": 58827087, "comment_id": 103930862, "body": "Maybe, you can check to see if it&#39;s in Ruby core. But you have Ruby 2.6, which is one of the newest I think."}, {"owner": {"reputation": 120, "user_id": 10826835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9e3FQ.png?s=128&g=1", "display_name": "Groctel", "link": "https://stackoverflow.com/users/10826835/groctel"}, "edited": false, "score": 0, "creation_date": 1573595512, "post_id": 58827087, "comment_id": 103930903, "body": "It doesn&#39;t rise any more errors after deleting the requirement, so I guess I&#39;m good. This is a university assignment and it&#39;s very probable they&#39;re using an ancient version :/"}, {"owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "reply_to_user": {"reputation": 120, "user_id": 10826835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9e3FQ.png?s=128&g=1", "display_name": "Groctel", "link": "https://stackoverflow.com/users/10826835/groctel"}, "edited": false, "score": 1, "creation_date": 1573595522, "post_id": 58827087, "comment_id": 103930905, "body": "@Groctel you may be thinking of <a href=\"https://ruby-doc.org/stdlib-2.5.1/libdoc/securerandom/rdoc/SecureRandom.html\" rel=\"nofollow noreferrer\">SecureRandom</a>, which does need to be required. Kernel.rand does not."}, {"owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "edited": false, "score": 1, "creation_date": 1573595645, "post_id": 58827087, "comment_id": 103930938, "body": "Ahh, I see that makes a lot of sense. If the University version told you to require &#39;random&#39;, then maybe in the past it wasn&#39;t in Ruby. Yeah, what Chris Heald said. I think I&#39;ve used SecureRandom way more than random, and it&#39;s something you have to require."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 120, "user_id": 10826835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9e3FQ.png?s=128&g=1", "display_name": "Groctel", "link": "https://stackoverflow.com/users/10826835/groctel"}, "edited": false, "score": 2, "creation_date": 1573597504, "post_id": 58827087, "comment_id": 103931572, "body": "@Groctel &quot;Is it possible it may have been needed in earlier versions?&quot; No, don&#39;t think so. <a href=\"https://ruby-doc.org/core-1.8.6/Kernel.html#method-i-rand\" rel=\"nofollow noreferrer\"><code>rand</code></a> is found in the Core in Ruby 1.8.6 which was from years ago, and I&#39;ve been using Ruby since before then and don&#39;t remember having done anything special to access it."}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1573598999, "post_id": 58827087, "comment_id": 103932092, "body": "<a href=\"https://github.com/search?l=Ruby&amp;q=%22require+random%22&amp;type=Code\" rel=\"nofollow noreferrer\">I&#39;m going to have to agree with @theTinMan</a>."}], "tags": [], "owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "is_accepted": true, "score": 4, "last_activity_date": 1573596885, "last_edit_date": 1573596885, "creation_date": 1573594668, "answer_id": 58827087, "question_id": 58827047, "link": "https://stackoverflow.com/questions/58827047/ruby-cant-load-random-a-default-gem/58827087#58827087", "title": "Ruby can&#39;t load &#39;random&#39;, a default gem", "body": "<p>You don't need to require <code>random</code> because it's already included in Ruby. So there's no gem to install, nothing to require, you can basically just use it. </p>\n"}], "owner": {"reputation": 120, "user_id": 10826835, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9e3FQ.png?s=128&g=1", "display_name": "Groctel", "link": "https://stackoverflow.com/users/10826835/groctel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 58827087, "answer_count": 1, "score": 0, "last_activity_date": 1573596885, "creation_date": 1573594484, "question_id": 58827047, "link": "https://stackoverflow.com/questions/58827047/ruby-cant-load-random-a-default-gem", "title": "Ruby can&#39;t load &#39;random&#39;, a default gem", "body": "<p>It's my first time using Ruby and I'm working with <code>random</code>. When I run <code>ruby main.rb</code> I get this error message:</p>\n\n<pre><code>Traceback (most recent call last):\n    6: from main.rb:3:in `&lt;main&gt;'\n    5: from main.rb:3:in `require_relative'\n    4: from /home/groctel/Documents/Repositories/civitas-ruby/Civitas/lib/civitas_juego.rb:4:in `&lt;top (required)&gt;'\n    3: from /home/groctel/Documents/Repositories/civitas-ruby/Civitas/lib/civitas_juego.rb:4:in `require_relative'\n    2: from /home/groctel/Documents/Repositories/civitas-ruby/Civitas/lib/dado.rb:3:in `&lt;top (required)&gt;'\n    1: from /usr/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n/usr/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- random (LoadError)\n</code></pre>\n\n<p>So, I diligently checked the files. Here is the trace:</p>\n\n<p><strong>main.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># encoding:utf-8\n\nrequire_relative \"civitas_juego.rb\"\nrequire_relative \"dado.rb\"\nrequire_relative \"practica3.rb\"\nrequire_relative \"vista_textual.rb\"\n\n# ...\n</code></pre>\n\n<p><strong>dado.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># encoding:utf-8\n\nrequire 'random'\nrequire 'singleton'\nrequire_relative 'diario'\n\n# ...\n</code></pre>\n\n<p>And the deepest source of the error, <strong>kernel_require.rb</strong></p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>  def require(path)\n    RUBYGEMS_ACTIVATION_MONITOR.enter\n\n    path = path.to_path if path.respond_to? :to_path\n\n    if spec = Gem.find_unresolved_default_spec(path)\n      Gem.remove_unresolved_default_spec(spec)\n      begin\n        Kernel.send(:gem, spec.name)\n      rescue Exception\n        RUBYGEMS_ACTIVATION_MONITOR.exit\n        raise\n      end\n    end\n\n    # If there are no unresolved deps, then we can use just try\n    # normal require handle loading a gem from the rescue below.\n\n    if Gem::Specification.unresolved_deps.empty?\n      RUBYGEMS_ACTIVATION_MONITOR.exit\n      return gem_original_require(path) # &lt;- THIS IS LINE 54\n    end\n</code></pre>\n\n<p>I am running Arch Linux with ruby 2.6.5-1. As I understand <a href=\"https://ruby-doc.org/core-2.4.0/Random.html\" rel=\"nofollow noreferrer\">from the documentation</a>, <code>random</code> is a kernel class and not a gem I have to build myself. Despite this, I've tried <code>gem install random</code> and gotten this error:</p>\n\n<pre><code>Building native extensions. This could take a while...\nERROR:  Error installing random:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /home/groctel/.gem/ruby/2.6.0/gems/random-0.2.1/ext/random\n/usr/bin/ruby -I /usr/lib/ruby/2.6.0 -r ./siteconf20191112-16451-127m0rj.rb extconf.rb\ncreating Makefile\n\ncurrent directory: /home/groctel/.gem/ruby/2.6.0/gems/random-0.2.1/ext/random\nmake \"DESTDIR=\" clean\n\ncurrent directory: /home/groctel/.gem/ruby/2.6.0/gems/random-0.2.1/ext/random\nmake \"DESTDIR=\"\ncompiling mersenne_twister_ext.c\nmersenne_twister_ext.c: In function \u2018mt_initialize\u2019:\nmersenne_twister_ext.c:294:25: error: \u2018struct RArray\u2019 has no member named \u2018len\u2019\n  294 |     if (RARRAY(arg_seed)-&gt;len &lt; N)\n      |                         ^~\nmersenne_twister_ext.c:295:29: error: \u2018struct RArray\u2019 has no member named \u2018len\u2019\n  295 |       max = RARRAY(arg_seed)-&gt;len;\n      |                             ^~\nmersenne_twister_ext.c: At top level:\nmersenne_twister_ext.c:246:17: warning: \u2018differ\u2019 is static but declared in inline function \u2018hash\u2019 which is not static\n  246 |   static uint32 differ = 0;  // guarantee time-based seeds will change\n      |                 ^~~~~~\nmake: *** [Makefile:245: mersenne_twister_ext.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /home/groctel/.gem/ruby/2.6.0/gems/random-0.2.1 for inspection.\nResults logged to /home/groctel/.gem/ruby/2.6.0/extensions/x86_64-linux/2.6.0/random-0.2.1/gem_make.out\n</code></pre>\n\n<p>I don't know how to proceed after this and looks like I'm going the wrong direction.\nWhat do I have to do to make <code>random</code> load?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image-processing", "imagemagick", "shrine"], "answers": [{"tags": [], "owner": {"reputation": 7938, "user_id": 988414, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/376e4eb9dc6c2e33d1330262edc4f109?s=128&d=identicon&r=PG", "display_name": "janko-m", "link": "https://stackoverflow.com/users/988414/janko-m"}, "is_accepted": true, "score": 2, "last_activity_date": 1573601204, "creation_date": 1573601204, "answer_id": 58828180, "question_id": 58826356, "link": "https://stackoverflow.com/questions/58826356/blur-images-with-shrine-and-image-processing-gem/58828180#58828180", "title": "Blur images with Shrine and image_processing gem", "body": "<p>You need to specify each command-line argument separately, in this case <code>-blur</code> and <code>0x8</code>:</p>\n\n<pre><code>magick.append('-blur', '0x8').resize_to_limit!(1024, 1024)\n</code></pre>\n\n<p>You can also call the <code>#blur</code> method, which will get applied as <code>-blur</code> through the magic of <code>method_missing</code>:</p>\n\n<pre><code>magick.blur('0x8').resize_to_limit!(1024, 1024)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7702, "user_id": 894763, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5d013c9681666f0a68a6c1c00ff4d603?s=128&d=identicon&r=PG", "display_name": "jcupitt", "link": "https://stackoverflow.com/users/894763/jcupitt"}, "is_accepted": false, "score": 2, "last_activity_date": 1573729724, "creation_date": 1573729724, "answer_id": 58855387, "question_id": 58826356, "link": "https://stackoverflow.com/questions/58826356/blur-images-with-shrine-and-image-processing-gem/58855387#58855387", "title": "Blur images with Shrine and image_processing gem", "body": "<p>I think the libvips equivalent would be:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require \"image_processing/vips\"\n\nclass ImageUploader &lt; Shrine\n  Attacher.derivatives_processor do |original|\n    vips = ImageProcessing::Vips.source(original)\n    {\n      blurred: vips.resize_to_limit(1024, 1024).gaussblur(2).call\n    }\n  end\nend\n</code></pre>\n\n<p>Since <a href=\"https://github.com/janko/image_processing/blob/master/doc/vips.md#method_missing\" rel=\"nofollow noreferrer\">unknown methods are simply delegated to ruby-vips</a>.</p>\n\n<p>If you can, put the resize first, it's a lot quicker. You'll get more consistent results too, since the degree of blur won't depend on how large the resize is.</p>\n"}], "owner": {"reputation": 105, "user_id": 6073095, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8162743e8e42ab78e78de5e68cbc1cce?s=128&d=identicon&r=PG&f=1", "display_name": "trabant", "link": "https://stackoverflow.com/users/6073095/trabant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 58828180, "answer_count": 2, "score": 1, "last_activity_date": 1573729724, "creation_date": 1573591290, "question_id": 58826356, "link": "https://stackoverflow.com/questions/58826356/blur-images-with-shrine-and-image-processing-gem", "title": "Blur images with Shrine and image_processing gem", "body": "<p>I am trying to blur images in my Ruby on Rails application, using the Shrine gem. This is my uploader file:</p>\n\n<pre><code>require \"image_processing/mini_magick\"\n\nclass ImageUploader &lt; Shrine\n  Attacher.derivatives_processor do |original|\n    magick = ImageProcessing::MiniMagick.source(original)\n    {\n      blurred: magick.append('-blur 0x8').resize_to_limit!(1024, 1024)\n    }\n  end\nend\n</code></pre>\n\n<p>I set up my model, controller and form in the most basic way, the same as in the Shrine Getting Started tutorial - <a href=\"https://shrinerb.com/docs/getting-started\" rel=\"nofollow noreferrer\">https://shrinerb.com/docs/getting-started</a>.\nWhen I try to save an image I get following error: </p>\n\n<blockquote>\n  <p>*** MiniMagick::Error Exception: <code>convert /tmp/shrine20191112-4479-1xo3vgk.jpg -auto-orient -blur 0x5 -resize 1024x1024&gt; -sharpen 0x1 /tmp/image_processing20191112-4479-1w094sa.jpg</code> failed with error:\n  convert: unrecognized option `-blur 0x5' @ error/convert.c/ConvertImageCommand/893.\n  \"</p>\n</blockquote>\n\n<p>Without the <code>append('-blur 0x8')</code> it works just fine, what am I doing wrong? My ImageMagick version is <strong>7.0.7-11</strong>.</p>\n\n<p>Btw I wouldn't mind blurring the image with libvips, I just have more experience with ImageMagick so that's what I went with.</p>\n"}, {"tags": ["ruby", "installation", "rubygems", "bson", "hanami"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1573590284, "post_id": 58825894, "comment_id": 103928917, "body": "How did you install Ruby? How did you install Ruby&#39;s development headers and the compiler toolchain for building gems?"}, {"owner": {"reputation": 67, "user_id": 8450637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a280a59f0cffdcdf6a0ec6803ead8156?s=128&d=identicon&r=PG&f=1", "display_name": "guy vassart", "link": "https://stackoverflow.com/users/8450637/guy-vassart"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1573590597, "post_id": 58825894, "comment_id": 103929050, "body": "with the ruby dev kit installer for windows on the ruby web site."}, {"owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "edited": false, "score": 0, "creation_date": 1574374460, "post_id": 58825894, "comment_id": 104221656, "body": "same issue here"}], "answers": [{"tags": [], "owner": {"reputation": 298, "user_id": 5346899, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/34e4fa802a18aa9fc7e30c00dac6ad8e?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Dahl", "link": "https://stackoverflow.com/users/5346899/michael-dahl"}, "is_accepted": true, "score": 1, "last_activity_date": 1574870464, "creation_date": 1574870464, "answer_id": 59074116, "question_id": 58825894, "link": "https://stackoverflow.com/questions/58825894/gem-install-bson-fail-on-windows-10/59074116#59074116", "title": "gem install bson fail on Windows 10", "body": "<p>Install Version 4.5.0 of BSON Gem. The Problem is in Version 4.6.0 of the Gem.</p>\n\n<p>With bundle:\nadd <code>gem 'bson', '~&gt; 4.5.0'</code> to Gemfile and run <code>bundle install</code>.</p>\n\n<p>Without: <code>gem install bson -v 4.5.0</code>.</p>\n"}], "owner": {"reputation": 67, "user_id": 8450637, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a280a59f0cffdcdf6a0ec6803ead8156?s=128&d=identicon&r=PG&f=1", "display_name": "guy vassart", "link": "https://stackoverflow.com/users/8450637/guy-vassart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 308, "favorite_count": 1, "accepted_answer_id": 59074116, "answer_count": 1, "score": 3, "last_activity_date": 1574870464, "creation_date": 1573588968, "question_id": 58825894, "link": "https://stackoverflow.com/questions/58825894/gem-install-bson-fail-on-windows-10", "title": "gem install bson fail on Windows 10", "body": "<p>I'm trying to make a ruby hanami api using mongoid but the instalation fails because of bson.\nI get this error</p>\n\n<hr>\n\n<pre><code>\n    compiling bytebuf.c\n    compiling endian.c\n    In file included from endian.c:18:\n    bson-endian.h:109:1: error: unknown type name 'uint16_t'; did you mean 'wint_t'?\n      109 | uint16_t __bson_uint16_swap_slow(uint16_t v);\n          | ^~~~~~~~\n          | wint_t\n    bson-endian.h:109:34: error: unknown type name 'uint16_t'; did you mean\n    'wint_t'?\n      109 | uint16_t __bson_uint16_swap_slow(uint16_t v);\n          |                                  ^~~~~~~~\n          |                                  wint_t\n    bson-endian.h:110:1: error: unknown type name 'uint32_t'; did you mean 'wint_t'?\n      110 | uint32_t __bson_uint32_swap_slow(uint32_t v);\n          | ^~~~~~~~\n          | wint_t\n    bson-endian.h:110:34: error: unknown type name 'uint32_t'; did you mean\n    'wint_t'?\n      110 | uint32_t __bson_uint32_swap_slow(uint32_t v);\n          |                                  ^~~~~~~~\n          |                                  wint_t\n    bson-endian.h:111:1: error: unknown type name 'uint64_t'\n      111 | uint64_t __bson_uint64_swap_slow(uint64_t v);\n          | ^~~~~~~~\n    bson-endian.h:111:34: error: unknown type name 'uint64_t'\n      111 | uint64_t __bson_uint64_swap_slow(uint64_t v);\n          |                                  ^~~~~~~~\n    endian.c:35:1: error: unknown type name 'uint16_t'; did you mean 'wint_t'?\n       35 | uint16_t __bson_uint16_swap_slow(uint16_t v)\n          | ^~~~~~~~\n          | wint_t\n    endian.c:35:34: error: unknown type name 'uint16_t'; did you mean 'wint_t'?\n       35 | uint16_t __bson_uint16_swap_slow(uint16_t v)\n          |                                  ^~~~~~~~\n          |                                  wint_t\n    endian.c:56:1: error: unknown type name 'uint32_t'; did you mean 'wint_t'?\n       56 | uint32_t __bson_uint32_swap_slow(uint32_t v)\n          | ^~~~~~~~\n          | wint_t\n    endian.c:56:34: error: unknown type name 'uint32_t'; did you mean 'wint_t'?\n       56 | uint32_t __bson_uint32_swap_slow(uint32_t v)\n          |                                  ^~~~~~~~\n          |                                  wint_t\n    endian.c:80:1: error: unknown type name 'uint64_t'\n       80 | uint64_t __bson_uint64_swap_slow(uint64_t v)\n          | ^~~~~~~~\n    endian.c:80:34: error: unknown type name 'uint64_t'\n       80 | uint64_t __bson_uint64_swap_slow(uint64_t v)\n          |                                  ^~~~~~~~\n    endian.c: In function '__bson_double_swap_slow':\n    endian.c:109:4: error: unknown type name 'uint64_t'\n      109 |    uint64_t uv;\n          |    ^~~~~~~~\n    In file included from endian.c:18:\n    bson-endian.h:65:57: error: 'uint64_t' undeclared (first use in this function)\n       65 | #  define BSON_UINT64_SWAP_LE_BE(v) __builtin_bswap64 ((uint64_t)v)\n          |                                                         ^~~~~~~~\n    bson-endian.h:65:57: note: in definition of macro 'BSON_UINT64_SWAP_LE_BE'\n       65 | #  define BSON_UINT64_SWAP_LE_BE(v) __builtin_bswap64 ((uint64_t)v)\n          |                                                         ^~~~~~~~\n    bson-endian.h:65:57: note: each undeclared identifier is reported only once for\n    each function it appears in\n       65 | #  define BSON_UINT64_SWAP_LE_BE(v) __builtin_bswap64 ((uint64_t)v)\n          |                                                         ^~~~~~~~\n    bson-endian.h:65:57: note: in definition of macro 'BSON_UINT64_SWAP_LE_BE'\n       65 | #  define BSON_UINT64_SWAP_LE_BE(v) __builtin_bswap64 ((uint64_t)v)\n          |                                                         ^~~~~~~~\n    endian.c:112:32: error: expected ')' before 'uv'\n      112 |    uv = BSON_UINT64_SWAP_LE_BE(uv);\n          |                                ^~\n    bson-endian.h:65:66: note: in definition of macro 'BSON_UINT64_SWAP_LE_BE'\n       65 | #  define BSON_UINT64_SWAP_LE_BE(v) __builtin_bswap64 ((uint64_t)v)\n          |                                                                  ^\n    make: *** [Makefile:244: endian.o] Error 1\n\n    make failed, exit code 2\n\n</code></pre>\n\n<hr>\n\n<p>My ruby version is 2.6.5 .</p>\n\n<p>I have looked on internet for a solution but none of them worked. I tried to update my gem version using <code>gem update</code>.\nand I tried to add <code>#include&lt;stdint.h&gt;</code> in the bson-endian.h.</p>\n\n<p>How can I solve that problem.</p>\n"}, {"tags": ["ruby", "rest", "vue.js", "axios", "sinatra"], "comments": [{"owner": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1573588041, "post_id": 58825625, "comment_id": 103927980, "body": "what&#39;s <code>company_data</code> look like?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573588132, "post_id": 58825625, "comment_id": 103928020, "body": "HTTP 500 is for an internal server error. Thats not the response you should be giving unless you&#39;re rescuing from some unrecoverable error."}, {"owner": {"reputation": 33, "user_id": 12331183, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2FnwfnXJbEI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcg8NukTCQpGqp52iqDWqQ2c-IG5Q/photo.jpg?sz=128", "display_name": "Mihai Tirtara", "link": "https://stackoverflow.com/users/12331183/mihai-tirtara"}, "reply_to_user": {"reputation": 4690, "user_id": 1937435, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YyN37.jpg?s=128&g=1", "display_name": "Josh Brody", "link": "https://stackoverflow.com/users/1937435/josh-brody"}, "edited": false, "score": 0, "creation_date": 1573588415, "post_id": 58825625, "comment_id": 103928131, "body": "@JoshBrody company_data look like this <code>company_data:{         name:&#39;&#39;,         adress:&#39;&#39;,         country:&#39;&#39;,         city:&#39;&#39;,         email:&#39;&#39;,         phoneNumber:&#39;&#39;,       },</code>"}], "owner": {"reputation": 33, "user_id": 12331183, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2FnwfnXJbEI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcg8NukTCQpGqp52iqDWqQ2c-IG5Q/photo.jpg?sz=128", "display_name": "Mihai Tirtara", "link": "https://stackoverflow.com/users/12331183/mihai-tirtara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 81, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573587794, "creation_date": 1573587794, "question_id": 58825625, "link": "https://stackoverflow.com/questions/58825625/patch-axios-issue", "title": "Patch Axios issue", "body": "<p>I am building a client in Vue.js and  have a problem while running the patch method in axios, this is my code the URL is just hardcoded for now cause I was just trying it out </p>\n\n<pre><code>  axios.patch('http://localhost:9292/companies/1',{\n      data:this.company_data\n    })\n      .then(response =&gt; {\n        // handle success\n        console.log(response);\n      })\n      .catch(error =&gt;  {\n        console.log(error.response)\n      });\n    }\n</code></pre>\n\n<p>My server is built in Ruby with Sinatra:</p>\n\n<pre><code>patch '/companies/:id'do\n  content_type :json\n  company = Company.get params[:id]\n  if company.update params[:company]\n    status 200\n    json 'Company was updated'\n  else\n    status 500\n    json company.errors.full_messages\n  end\nend\n</code></pre>\n\n<p>And when I try to run the patch from axios I get this error:</p>\n\n<pre><code> - NoMethodError - undefined method `each' for nil:NilClass:\n        C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/dm-core-1.2.1/lib/dm-core/resource.rb:332:in `attributes='\n        C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/dm-core-1.2.1/lib/dm-core/resource.rb:385:in `update'\n        C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/dm-validations-1.2.0/lib/dm-validations.rb:46:in `block in update'\n        C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/dm-validations-1.2.0/lib/dm-validations/context.rb:16:in `in_context'\n        C:/Ruby26-x64/lib/ruby/gems/2.6.0/gems/dm-validations-1.2.0/lib/dm-validations.rb:46:in `update'\n        E:/assignment_company2(server)/server.rb:127:in `block in &lt;top (required)&gt;'\n</code></pre>\n\n<p>But when I do it with curl it works.</p>\n\n<pre><code>curl -X PATCH -d \"company[name]=andrs\" http://localhost:9292/companies/1\n\"Company was updated\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 2, "last_activity_date": 1573593976, "last_edit_date": 1573593976, "creation_date": 1573585364, "answer_id": 58825074, "question_id": 58824539, "link": "https://stackoverflow.com/questions/58824539/copied-rails-app-but-now-devise-is-not-working-anymore/58825074#58825074", "title": "Copied rails app but now devise is not working anymore", "body": "<p>In root of your new project run:</p>\n\n<pre><code>rake secret\n</code></pre>\n\n<p>Now copy the output of this to your clipboard.  Then in config/initializer/devise.rb you need this line:</p>\n\n<pre><code>config.secret_key = \"#{ENV['DEVISE_SECRET_KEY']}\"\n</code></pre>\n\n<p>You'll need a way to load environment variables in your local development environment.  You can either use <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">dotenv gem</a> and then you'll have a file in root of project called <code>.env</code> and you'll add the key you generated with the rake command.  Or you might want to checkout <a href=\"https://github.com/laserlemon/figaro\" rel=\"nofollow noreferrer\">figaro gem</a> which appears to have not been updated/maintained recently. In your .env file add a line:</p>\n\n<pre><code>DEVISE_SECRET_KEY=&lt;paste key here&gt;\n</code></pre>\n\n<p>Make sure before making these changes, if you're using git version control to add <code>.env</code> to your <code>.gitignore</code> file.  This will insure you don't accidentally commit your key to your repo.</p>\n"}], "owner": {"reputation": 113, "user_id": 10075876, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-j7d3Chl5TZo/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7obE-kTGcNuqf5tWp6sQ3RBQUo5dA/mo/photo.jpg?sz=128", "display_name": "Sabrina", "link": "https://stackoverflow.com/users/10075876/sabrina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 58825074, "answer_count": 1, "score": 1, "last_activity_date": 1573593976, "creation_date": 1573582929, "last_edit_date": 1573590149, "question_id": 58824539, "link": "https://stackoverflow.com/questions/58824539/copied-rails-app-but-now-devise-is-not-working-anymore", "title": "Copied rails app but now devise is not working anymore", "body": "<p>I copied an entire Rails app by doing this:</p>\n\n<pre><code>$ cp your-old-app your-new-app\n</code></pre>\n\n<p>and then creating a new database for it by doing this:</p>\n\n<pre><code>rake db:create db:migrate\n</code></pre>\n\n<p>Everything is working fine. Now I wanted to test my copied app and created a new user. Unfortunately this does not work. I am using the devise gem.</p>\n\n<p>The error I get when trying to register a new test user is:</p>\n\n<pre><code>Started POST \"/users/sign_in\" for ::1 at 2019-11-12 19:07:42 +0100\nProcessing by Devise::SessionsController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"jrmiVvIOB+m2a0WCQWhL4LSpdfw2x9hxP6yhJOC6HVyjXOpTTrxWeF37sTtG/dYaeK1DBr/425svb2zEcO5mhQ==\", \"user\"=&gt;{\"email\"=&gt;\"lkbkj23@test.de\", \"password\"=&gt;\"[FILTERED]\", \"remember_me\"=&gt;\"0\"}, \"commit\"=&gt;\"Log in\"}\n  User Load (0.9ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"email\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"email\", \"lkbkj23@test.de\"], [\"LIMIT\", 1]]\nCompleted 401 Unauthorized in 6ms (ActiveRecord: 0.9ms)\n</code></pre>\n\n<p>In the thread that explained how to copy a Rails app, I read something about the need to create a new secret_token variable. This is the only idea I have what I could have been missing. But I do not know if this is the error and I do not know where and how to set up a new secret_token variable. </p>\n"}, {"tags": ["ruby", "wrapper"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 1, "creation_date": 1573589843, "post_id": 58824329, "comment_id": 103928729, "body": "What do you mean that the definitions are &quot;retrieved on initialization&quot;? Assuming you had your generic dispatch function, what would your calls to the definitions look like?"}, {"owner": {"reputation": 5904, "user_id": 455304, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/160d117143a58baa428415e4aa55ae95?s=128&d=identicon&r=PG", "display_name": "j_kubik", "link": "https://stackoverflow.com/users/455304/j-kubik"}, "reply_to_user": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1573592146, "post_id": 58824329, "comment_id": 103929665, "body": "@Max The definitions of available classes and their APIs are retrieved over a TCP connection. My generic handler simply serializes the input arguments, attaches the class, object(if not static) and method ID and sends the data to the remote server which completes the call. Then it waits for a response and de-serializes it and returns to the interpreter."}], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1573588520, "creation_date": 1573588520, "answer_id": 58825787, "question_id": 58824329, "link": "https://stackoverflow.com/questions/58824329/how-to-pass-context-to-a-ruby-method-defined-in-c-c/58825787#58825787", "title": "How to pass context to a Ruby method defined in C/C++", "body": "<p>There's nothing stopping you from doing this the normal Ruby way, by defining <a href=\"https://ruby-doc.org/core/BasicObject.html#method-i-method_missing\" rel=\"nofollow noreferrer\">method_missing</a>. That gives you a generic dispatcher. In Ruby it looks like this</p>\n\n<pre><code>class Foo\n  def self.method_missing symbol, args\n    # dispatch class method\n  end\n\n  def method_missing symbol, args\n    # dispatch instance method\n  end\nend\n</code></pre>\n\n<p>In the C API you do this normal way, using <code>rb_define_method</code> and <code>rb_define_singleton_method</code>. I haven't tested it, but I imagine you can even pass the same handler to both and use the value of <code>self</code> to determine which dispatch (class/instance) to do.</p>\n"}, {"comments": [{"owner": {"reputation": 5904, "user_id": 455304, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/160d117143a58baa428415e4aa55ae95?s=128&d=identicon&r=PG", "display_name": "j_kubik", "link": "https://stackoverflow.com/users/455304/j-kubik"}, "edited": false, "score": 0, "creation_date": 1573692791, "post_id": 58827104, "comment_id": 103969093, "body": "I found it the most useful approach as it is contained entirely on the C++ side (for me it is a plus) and uses Ruby mechanics for function dispatching - therefore API registered this way (unlike using <code>method_missing</code>) is discoverable using <code>.methods</code>."}, {"owner": {"reputation": 5904, "user_id": 455304, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/160d117143a58baa428415e4aa55ae95?s=128&d=identicon&r=PG", "display_name": "j_kubik", "link": "https://stackoverflow.com/users/455304/j-kubik"}, "edited": false, "score": 1, "creation_date": 1573693511, "post_id": 58827104, "comment_id": 103969228, "body": "For other who may be wondering: it took me a moment to find the <code>self</code> pointer in the method implementation. It is <code>rb_current_receiver()</code>"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1573594790, "creation_date": 1573594790, "answer_id": 58827104, "question_id": 58824329, "link": "https://stackoverflow.com/questions/58824329/how-to-pass-context-to-a-ruby-method-defined-in-c-c/58827104#58827104", "title": "How to pass context to a Ruby method defined in C/C++", "body": "<p>This is a little more experimental. I'm not sure exactly how this will work, but it's based on Ruby's <a href=\"https://ruby-doc.org/core/Module.html#method-i-define_method\" rel=\"nofollow noreferrer\">define_method</a> for defining proper methods at runtime</p>\n\n <pre class=\"lang-c prettyprint-override\"><code>VALUE context; // context for method call\n\nVALUE dispatchInstanceMethod(VALUE first_arg, VALUE context, int argc, VALUE* argv)\n{\n    // first_arg is the first arg passed to your method, probably shouldn't use it\n    // just use argc, argv instead for accessing all args\n    // context should(?) be what we passed at the time of definition\n}\n\nvoid dynamically_create_class()\n{\n    VALUE cls = rb_define_class_id_under(myModule, nameID, rb_cObject);\n    ID define_method = rb_intern(\"define_method\");\n\n    VALUE name = // method name as a Symbol object e.g. using ID2SYM\n    context = // set to whatever context we need for the call\n    rb_global_variable(context); // don't garbage-collect it\n    rb_block_call(cls, define_method, 1, &amp;name, dispatchInstanceMethod, context);\n}\n</code></pre>\n\n<p>For this to work (if it can work), you'd need a different <code>context</code> variable for each method definition. The lifetime of these variables would have to exceed the life of the class, thus they'd need to be globally available somewhere. That's how you would differentiate <code>dispatchInstanceMethod</code> later on when it actually gets called by each method.</p>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1573737541, "last_edit_date": 1573737541, "creation_date": 1573595922, "answer_id": 58827305, "question_id": 58824329, "link": "https://stackoverflow.com/questions/58824329/how-to-pass-context-to-a-ruby-method-defined-in-c-c/58827305#58827305", "title": "How to pass context to a Ruby method defined in C/C++", "body": "<p>This is the kind of thing that's <em>way</em> easier to do in normal Ruby. I would write a C API method for making a generic API call using basic types (i.e. no custom classes). For example, something like</p>\n\n<pre><code>VALUE api_call(VALUE self, VALUE class_name, VALUE method_name, VALUE instance_variables, VALUE arguments)\n{\n    // turn class_name, method_name, instance_variables, arguments into an API call\n}\n\nmAPI = rb_define_module(\"MyAPI\");\nrb_define_singleton_method(mAPI, \"call\", api_call, 4);\n</code></pre>\n\n<p>Then you can write regular old Ruby to dynamically create the class</p>\n\n<pre><code>class_def = {name: \"Foo\", ivars: [\"bar\"], methods: [\"baz\"]}\n\nklass = Class.new\nklass.instance_eval do\n  class_def[:ivars].each do |var|\n    attr_accessor var\n  end\n\n  class_def[:methods].each do |meth|\n    define_method(meth) do |*args|\n      ivars = Hash[instance_variables.map { |name| [name, instance_variable_get(name)] }]\n      MyAPI.call(class_def[:name], meth, ivars, args)\n    end\n  end\nend\n\nKernel.const_set(class_def[:name], klass)\n\nfoo = Foo.new\nf.bar = 5\nf.baz(\"Hi\") # MyAPI.call(\"Foo\", \"baz\", {:@bar=&gt;5}, [\"Hi\"])\n</code></pre>\n"}], "owner": {"reputation": 5904, "user_id": 455304, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/160d117143a58baa428415e4aa55ae95?s=128&d=identicon&r=PG", "display_name": "j_kubik", "link": "https://stackoverflow.com/users/455304/j-kubik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 58827104, "answer_count": 3, "score": 2, "last_activity_date": 1573737541, "creation_date": 1573581976, "last_edit_date": 1573582435, "question_id": 58824329, "link": "https://stackoverflow.com/questions/58824329/how-to-pass-context-to-a-ruby-method-defined-in-c-c", "title": "How to pass context to a Ruby method defined in C/C++", "body": "<p>I am currently writing a set of API bindings to the Ruby interpreter. The problem is that the binding definitions are not static and retrieved on initialization. I can easily create types on the fly, but in order to add methods I need static handlers:</p>\n\n<pre><code>static VALUE dispatchInstanceMethod( int argc, VALUE *argv, VALUE obj )\n{...}\n\nstatic VALUE dispatchClassMethod( int argc, VALUE *argv, VALUE obj )\n{...}\n\nVALUE cls  = rb_define_class_id_under( myModule, nameID, rb_cObject );\nrb_define_method( cls, \"methodName\", RUBY_METHOD_FUNC(dispatchInstanceMethod), -1 );\nrb_define_singleton_method( cls, \"methodName\", RUBY_METHOD_FUNC(dispatchClassMethod), -1 );\n</code></pre>\n\n<p>However, this requires each method (both static and instance methods) to use different handlers.\nSince I am generating these definitions on the runtime, I must use a generic dispatcher to\ndeal with all method calls. However, my dispatcher cannot know which method and of which class\nwas called. How can I retrieve that information? The class info could be retrieved\nfrom the <code>self</code> object passed to the handler, but in case of static method the <code>self</code> is the\ntype itself. Can I attach any sort of user data to the Class type <code>VALUE</code>? And how can I know\nwhich Ruby method was called if each method uses the same dispatcher function?</p>\n\n<p>A few other interpreters I have worked against in the past have provided a\ngeneric <code>void*</code> pointer for this kind of data (usually along with the release function), or some other mechanism, but there doesn't seem to be anything like that in Ruby. Have I missed it, or is such use simply not available?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1573578687, "post_id": 58823438, "comment_id": 103923852, "body": "When posting a code sample please take an extra moment to ensure that the code is valid. I had to correct numerous errors in your sample to make it valid."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573583239, "post_id": 58823438, "comment_id": 103925940, "body": "If the target <code>:course_id</code> were <code>&#39;dxgk22452&#39;</code> I assume you would want to return <code>[students[0], students[2]]</code>. Correct? If so, to keep your code  <i>DRY</i> (don&#39;t repeat yourself) you may wish to instead return <code>[0,2]</code>. That assumes you don&#39;t intend to chain the return value to another method."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1573579032, "creation_date": 1573579032, "answer_id": 58823609, "question_id": 58823438, "link": "https://stackoverflow.com/questions/58823438/get-all-objects-that-has-an-array-that-contains-a-specific-value/58823609#58823609", "title": "Get all objects that has an array that contains a specific value", "body": "<p>You can iterate twice to select those hashes, where their <code>courses</code> include at least one hash where its <code>course_id</code> is equal to <code>dxgk22452</code>:</p>\n\n<pre><code>data.select { |e| e[:courses].find { |f| f[:course_id] == 'dxgk22452' } }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "is_accepted": false, "score": 1, "last_activity_date": 1573579044, "creation_date": 1573579044, "answer_id": 58823614, "question_id": 58823438, "link": "https://stackoverflow.com/questions/58823438/get-all-objects-that-has-an-array-that-contains-a-specific-value/58823614#58823614", "title": "Get all objects that has an array that contains a specific value", "body": "<p>Given an array:</p>\n\n<pre><code>students = [\n  {\n    student_id: '1',\n    student_name: 'student 1',\n    courses: [\n      { course_id: 'dxgk22452', course_name: 'courses 1' }, \n      { course_id: 'asdf9d2d', course_name: 'courses 2'},\n      { course_id: 'h355dsf4', course_name: 'courses 3'}\n    ]\n  },\n  {\n    student_id: '2',\n    student_name: 'student 2',\n    courses: [\n      { course_id: 'asdf9d2d', course_name: 'courses 2'},\n      { course_id: 'glld9432d2', course_name: 'courses 4' }\n    ]\n  },\n  {\n    student_id: '3',\n    student_name: 'student 3',\n    courses: [\n      { course_id: 'dxgk22452', course_name: 'courses 1' }, \n      { course_id: 'glld9432d2', course_name: 'courses 4' }\n    ]\n  }\n]\n</code></pre>\n\n<p>Return the students whose courses include the given value:</p>\n\n<pre><code>students.select { |student| student[:courses].any? { |course| course[:course_id] == 'dxgk22452' } }\n=&gt; [\n  {\n    student_id: '1',\n    student_name: 'student 1',\n    courses: [\n      { course_id: 'dxgk22452', course_name: 'courses 1' }, \n      { course_id: 'asdf9d2d', course_name: 'courses 2'},\n      { course_id: 'h355dsf4', course_name: 'courses 3'}\n    ]\n  },\n  {\n    student_id: '3',\n    student_name: 'student 3',\n    courses: [\n      { course_id: 'dxgk22452', course_name: 'courses 1' }, \n      { course_id: 'glld9432d2', course_name: 'courses 4' }\n    ]\n  }\n]\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 7886627, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a57b748e98591738dae51f0a0bdc1a6c?s=128&d=identicon&r=PG&f=1", "display_name": "Rigs", "link": "https://stackoverflow.com/users/7886627/rigs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 58823609, "answer_count": 2, "score": 1, "last_activity_date": 1573579044, "creation_date": 1573578373, "last_edit_date": 1573578653, "question_id": 58823438, "link": "https://stackoverflow.com/questions/58823438/get-all-objects-that-has-an-array-that-contains-a-specific-value", "title": "Get all objects that has an array that contains a specific value", "body": "<p>I have an array of objects called students that looks like this:</p>\n\n<pre><code>[\n  {\n    student_id: '1',\n    student_name: 'student 1',\n    courses: [\n      { course_id: 'dxgk22452', course_name: 'courses 1' }, \n      { course_id: 'asdf9d2d', course_name: 'courses 2'},\n      { course_id: 'h355dsf4', course_name: 'courses 3'}\n    ]\n  },\n  {\n    student_id: '2',\n    student_name: 'student 2',\n    courses: [\n      { course_id: 'asdf9d2d', course_name: 'courses 2'},\n      { course_id: 'glld9432d2', course_name: 'courses 4' }\n    ]\n  },\n  {\n    student_id: '3',\n    student_name: 'student 3',\n    courses: [\n      { course_id: 'dxgk22452', course_name: 'courses 1' }, \n      { course_id: 'glld9432d2', course_name: 'courses 4' }\n    ]\n  }\n]\n</code></pre>\n\n<p>I am trying to figure out the best way to get all objects that contain a specific course id.</p>\n\n<p>I tried <code>students.where(courses.course_id == \"dxgk22452\")</code> with no luck and could not find a post with my specific situation. </p>\n\n<p>What would be the best way to go about this? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9125, "user_id": 671422, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/85da2a1fa3e4017815ff5d3a3d70fabe?s=128&d=identicon&r=PG", "display_name": "Yule", "link": "https://stackoverflow.com/users/671422/yule"}, "edited": false, "score": 0, "creation_date": 1573577581, "post_id": 58823171, "comment_id": 103923295, "body": "Is there a reason why you&#39;re defining the private methods as class methods i.e. <code>def self.xxxx</code> rather than instance methods i.e. <code>def xxxx</code>?"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 4, "creation_date": 1573578487, "post_id": 58823171, "comment_id": 103923761, "body": "Please take a moment to read <a href=\"https://stackoverflow.com/q/4952980/3784008\">stackoverflow.com/q/4952980/3784008</a> as your code does not work the way you think it does."}], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1573588823, "last_edit_date": 1573588823, "creation_date": 1573585729, "answer_id": 58825139, "question_id": 58823171, "link": "https://stackoverflow.com/questions/58823171/calling-one-private-class-method-with-another-of-same-class/58825139#58825139", "title": "Calling One Private class method with another of same class", "body": "<p>The method <a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-private\" rel=\"nofollow noreferrer\">Module#private</a>, in the body of a method, on a line by itself, causes all <em>instances methods</em> defined thereafter to be <code>private</code> until and if the method <a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-public\" rel=\"nofollow noreferrer\">Module#public</a> or <a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-protected\" rel=\"nofollow noreferrer\">Module#protected</a> appears on a line by itself<sup>1</sup>. Class method definitions are unaffected.</p>\n\n<p>Here are three ways to make a class method private.</p>\n\n<p><strong>#1. Use the method <a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-private_class_method\" rel=\"nofollow noreferrer\">Module#private_class_method</a> to make a public class method private</strong></p>\n\n<pre><code>class Klass\n  def self.class_meth1\n    '#1'\n  end\n  private_class_method(:class_meth1)\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>Klass.class_meth1\n  #=&gt; NoMethodError (private method `class_meth1' called for Klass:Class)\nKlass.send(:class_meth1)\n  #=&gt; \"#1\" \nKlass.singleton_class.private_method_defined?(:class_meth1)\n  #=&gt; true\n</code></pre>\n\n<p>Private instance methods in a class' singleton class are private class methods. See <a href=\"https://ruby-doc.org/core-2.6.5/Object.html#method-i-singleton_class\" rel=\"nofollow noreferrer\">Object#singleton_class</a> and <a href=\"https://ruby-doc.org/core-2.6.3/Module.html#method-i-private_method_defined-3F\" rel=\"nofollow noreferrer\">Module#private_method_defined?</a>.</p>\n\n<p><strong>#2. Define an instance method in the class' singleton class following the keyword <code>private</code></strong></p>\n\n<pre><code>class Klass\n  class &lt;&lt; self\n    private\n    def class_meth2\n      '#2'\n    end \n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>Klass.singleton_class.private_method_defined?(:class_meth2)\n  #=&gt; true\n</code></pre>\n\n<p><strong>#3. Include the keyword <code>private</code> in-line when defining an instance method in the class' singleton class</strong></p>\n\n<pre><code>class Klass\n  class &lt;&lt; self\n    private def class_meth3\n      '#3'\n    end \n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>Klass.singleton_class.private_method_defined?(:class_meth3)\n  #=&gt; true\n</code></pre>\n\n<p>Note that <code>private</code> has no effect in the following, which creates a public class method:</p>\n\n<pre><code>class Klass\n  private def self.class_meth\n  end\nend\n</code></pre>\n\n<p><strong>Calling a private class method</strong></p>\n\n<p>In view of the foregoing discussion, this is what you need.</p>\n\n<pre><code>class Person\n  def self.first_name\n    puts \"this is the first_name\"\n    second_name  \n  end\n  class &lt;&lt; self\n    private\n    def second_name\n      third_name\n    end\n    def third_name\n      puts \"this is the third name\"\n    end\n  end\nend\n</code></pre>\n\n<h1><p></p></h1>\n\n<pre><code>Person.first_name\nthis is the first_name\nthis is the third name\n</code></pre>\n\n<p><sup>1. <code>Module#private</code> on a line by itself is of course disregarded if an instance method is defined with <code>public</code> or <code>protected</code> <em>inline</em> (e.g., <code>public def meth...</code>)</sup>.</p>\n"}], "owner": {"reputation": 41, "user_id": 8739886, "user_type": "registered", "profile_image": "https://graph.facebook.com/742757489265122/picture?type=large", "display_name": "Mohan sai Krishna", "link": "https://stackoverflow.com/users/8739886/mohan-sai-krishna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 124, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573588823, "creation_date": 1573577281, "last_edit_date": 1573578360, "question_id": 58823171, "link": "https://stackoverflow.com/questions/58823171/calling-one-private-class-method-with-another-of-same-class", "title": "Calling One Private class method with another of same class", "body": "<pre><code>class Person\n  def self.first_name\n    puts \"this is the first_name\"\n    second_name\n  end\n  private\n  def self.second_name\n    third_name\n  end\n  def self.third_name\n    puts \"this is the third name\"\n  end\nend\n\n</code></pre>\n\n<p>how to make self.second_name call the self.third_name in the private methods </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "data-structures"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573578697, "post_id": 58822973, "comment_id": 103923861, "body": "You need an open brace before <code>foo</code>. I\u2019m guessing you also want <code>foo</code> and <code>bar</code> to be literals (e.g., <code>\u2019foo\u2019</code> and <code>\u2019bar\u2019</code>). While you\u2019re at it, assign the hash to a variable (e.g., <code>h = { \u2018foo\u2019=&gt;...}</code>), so that readers can refer to that variable in answers and comments without having to define it."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 1, "creation_date": 1573588206, "post_id": 58822973, "comment_id": 103928054, "body": "<code>h[&#39;foo&#39;][&#39;bar&#39;].find { |hh| hh[&#39;baz&#39;][&#39;faz&#39;].start_with? &#39;4.&#39; }[&#39;baz&#39;][&#39;faz&#39;]</code>?  Naah!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573593605, "post_id": 58822973, "comment_id": 103930213, "body": "Why the Rails tag?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573580844, "post_id": 58823709, "comment_id": 103924890, "body": "Why have you used <code>dig</code>, rather than <code>data[&#39;foo&#39;][&#39;bar&#39;]</code> and <code>obj[&#39;baz&#39;][&#39;faz&#39;]</code>? The OP has not suggested, in words or the example, that the nested keys may not be present. If a key that is supposed to be there is missing <code>dig</code> would merrily return <code>nil</code>, masking the omission. In that case we would want an exception to be raised."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573590217, "post_id": 58823709, "comment_id": 103928888, "body": "@CarySwoveland I prefer <code>dig</code> with multiple arguments over chaining <code>[]</code> calls, only for style. Presence is still required since <code>select</code> or <code>slice</code> will only work when the correct object is returned. But you could replace <code>data.dig(&#39;foo&#39;, &#39;bar&#39;)</code> with <code>data[&#39;foo&#39;][&#39;bar&#39;]</code> if you prefer the look of that. Updated the answer with the alternative."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573593083, "post_id": 58823709, "comment_id": 103930023, "body": "Suppose <code>&#39;baz&#39; =&gt; {&#39;faz&#39; =&gt; &#39;4.5.6&#39;}</code> had been mistakenly written <code>&#39;bazz&#39; =&gt; {&#39;faz&#39; =&gt; &#39;4.5.6&#39;}</code> then by using <code>dig</code> (when looking for <code>4</code>) an empty array would have been returned, which may have been a possible outcome. Had <code>&#39;baz&#39;</code> and <code>&#39;faz&#39;</code> been used explicitly, an exception would be raised, which would be helpful. There are of course other examples of errors that are missed and the use of <code>dig</code> causes a non-empty, but erroneous, array to be returned."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1573590447, "last_edit_date": 1573590447, "creation_date": 1573579419, "answer_id": 58823709, "question_id": 58822973, "link": "https://stackoverflow.com/questions/58822973/elegantly-return-values-matching-criteria-from-an-array-of-nested-hashes-in/58823709#58823709", "title": "Elegantly return value(s) matching criteria from an array of nested hashes - in one line", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.6.5/Array.html#method-i-select\" rel=\"nofollow noreferrer\"><code>select</code></a> to filter results.</p>\n\n<pre><code>data = {'foo' =&gt; {'bar' =&gt; [{'baz' =&gt; {'faz' =&gt; '1.2.3'}, 'name' =&gt; 'name1'}, {'baz' =&gt; {'faz' =&gt; '4.5.6'}, 'name' =&gt; 'name2'}, {'baz' =&gt; {'faz' =&gt; '7.8.9'}, 'name' =&gt; 'name3'}]}}\n\ndata.dig('foo', 'bar').select { |obj| obj.dig('baz', 'faz').slice(0) == '4' }\n#=&gt; [{\"baz\"=&gt;{\"faz\"=&gt;\"4.5.6\"}, \"name\"=&gt;\"name2\"}]\n\n# or if you prefer the square bracket style\ndata['foo']['bar'].select { |obj| obj['baz']['faz'][0] == '4' }\n</code></pre>\n\n<p>The answer assumes that every element inside the <code>bar</code> array has the nested attributes <code>baz -&gt; faz</code>.</p>\n\n<p>If you only expect one result you can use <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-find\" rel=\"nofollow noreferrer\"><code>find</code></a> instead.</p>\n"}], "owner": {"reputation": 385, "user_id": 4146954, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-XB3m9Z5Q_FY/AAAAAAAAAAI/AAAAAAAABjE/WAqYkH9FCrQ/photo.jpg?sz=128", "display_name": "Mik", "link": "https://stackoverflow.com/users/4146954/mik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 58823709, "answer_count": 1, "score": 0, "last_activity_date": 1573590447, "creation_date": 1573576636, "last_edit_date": 1573578849, "question_id": 58822973, "link": "https://stackoverflow.com/questions/58822973/elegantly-return-values-matching-criteria-from-an-array-of-nested-hashes-in", "title": "Elegantly return value(s) matching criteria from an array of nested hashes - in one line", "body": "<p>I have been searching for a solution to this issue for a couple of days now, and I'm hoping someone can help out.  Given this data structure:</p>\n\n<pre><code>'foo' =&gt; {\n  'bar' =&gt; [\n    {\n      'baz' =&gt; {'faz' =&gt; '1.2.3'},\n      'name' =&gt; 'name1'\n    },\n    {\n      'baz' =&gt; {'faz' =&gt; '4.5.6'},\n      'name' =&gt; 'name2'\n    },\n    {\n      'baz' =&gt; {'faz' =&gt; '7.8.9'},\n      'name' =&gt; 'name3'\n    }\n  ]\n}\n</code></pre>\n\n<p>I need to find the value of 'faz' that begins with a '4.', without using each.  I have to use the '4.' value as a key for a hash I will create while looping over 'bar' (which obviously I can't do if I don't yet know the value of '4.'), and I don't want to loop twice.</p>\n\n<p>Ideally, there would be an elegant one-line solution to return the value '4.5.6' to me.</p>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/17990332/return-single-key-from-nested-hash-in-ruby\">this article</a>, but it doesn't address the full complexity of this data structure, and the only answer given for it is too verbose; the looping-twice solution is more readable. I'm using Ruby 2.3 on Rails 4 and don't have the ability to upgrade. Are there any Ruby gurus out there who can guide me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "ruby-2.6"], "comments": [{"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "edited": false, "score": 0, "creation_date": 1573577359, "post_id": 58822817, "comment_id": 103923186, "body": "Rails <code>4.2.x</code> is only supported on Ruby versions between <code>1.9.3</code> and <code>2.4.5</code>. Try rolling back your version of Ruby and having another go."}], "answers": [{"comments": [{"owner": {"reputation": 21, "user_id": 8608179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b8e9a1f6bdf51e326b78f3f887bc29?s=128&d=identicon&r=PG&f=1", "display_name": "Hapi", "link": "https://stackoverflow.com/users/8608179/hapi"}, "edited": false, "score": 0, "creation_date": 1574273219, "post_id": 58823191, "comment_id": 104176730, "body": "hi  tnx. so i just uninstalled and installed all the latest version now i am getting another error. kindly help me review this&quot;"}, {"owner": {"reputation": 21, "user_id": 8608179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b8e9a1f6bdf51e326b78f3f887bc29?s=128&d=identicon&r=PG&f=1", "display_name": "Hapi", "link": "https://stackoverflow.com/users/8608179/hapi"}, "edited": false, "score": 0, "creation_date": 1574273394, "post_id": 58823191, "comment_id": 104176827, "body": "please i have changed the error given now that i have upgraded to the latest rails and ruby versions. kindly advice"}, {"owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "reply_to_user": {"reputation": 21, "user_id": 8608179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b8e9a1f6bdf51e326b78f3f887bc29?s=128&d=identicon&r=PG&f=1", "display_name": "Hapi", "link": "https://stackoverflow.com/users/8608179/hapi"}, "edited": false, "score": 0, "creation_date": 1574273872, "post_id": 58823191, "comment_id": 104177065, "body": "@Hapi rails has guides for upgrading to each sequential version, you cannot just smash latest rails into a gemfile of an old app - there&#39;re edits that have to be done to the app itself"}], "tags": [], "owner": {"reputation": 16587, "user_id": 177053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f6c516626d381a1ea383cedd1799486?s=128&d=identicon&r=PG", "display_name": "Vasfed", "link": "https://stackoverflow.com/users/177053/vasfed"}, "is_accepted": false, "score": 2, "last_activity_date": 1573577694, "last_edit_date": 1573577694, "creation_date": 1573577380, "answer_id": 58823191, "question_id": 58822817, "link": "https://stackoverflow.com/questions/58822817/rails-server-exits-automatically-this-is-what-i-see-below/58823191#58823191", "title": "Rails server exits automatically. This is what i see below:", "body": "<p>You're using rails 4.2.3 which is not compatible with ruby 2.6.5.</p>\n\n<p>To run rails 4.2.3 you need ruby 2.3 (and then gradually upgrade rails and ruby).</p>\n\n<p>Once running, you can upgrade to rails 4.2.11.1 (which already can run on ruby 2.4), then to rails 5.0.7.2, somewhere here ruby 2.4, 2.5 and 2.6, and so on - you have to upgrade to latest version in each minor rails release and then upgrade ruby.</p>\n\n<p>On each step solve all deprecation warnings, these are what becomes broken in next version</p>\n"}], "owner": {"reputation": 21, "user_id": 8608179, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29b8e9a1f6bdf51e326b78f3f887bc29?s=128&d=identicon&r=PG&f=1", "display_name": "Hapi", "link": "https://stackoverflow.com/users/8608179/hapi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 114, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1574273611, "creation_date": 1573576038, "last_edit_date": 1574273611, "question_id": 58822817, "link": "https://stackoverflow.com/questions/58822817/rails-server-exits-automatically-this-is-what-i-see-below", "title": "Rails server exits automatically. This is what i see below:", "body": "<pre><code>Macs-MBP:myapp mac$ rails server\n=&gt; Booting Puma\n=&gt; Rails 6.0.1 application starting in development \n=&gt; Run `rails server --help` for more startup options\nExiting\nTraceback (most recent call last):\n    80: from bin/rails:3:in `&lt;main&gt;'\n    79: from bin/rails:3:in `load'\n    78: from /Users/mac/myapp/bin/spring:15:in `&lt;top (required)&gt;'\n    77: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    76: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    75: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    74: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n    73: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n    72: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n    71: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n    70: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n    69: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n    68: from /Users/mac/myapp/bin/rails:9:in `&lt;top (required)&gt;'\n    67: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:325:in `require'\n    66: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:291:in `load_dependency'\n    65: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:325:in `block in require'\n    64: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n    63: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n    62: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n    61: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n    60: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n    59: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands.rb:18:in `&lt;main&gt;'\n    58: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/command.rb:46:in `invoke'\n    57: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/command/base.rb:65:in `perform'\n    56: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n    55: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n    54: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n    53: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:138:in `perform'\n    52: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:138:in `tap'\n    51: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:147:in `block in perform'\n    50: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:37:in `start'\n    49: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:77:in `log_to_stdout'\n    48: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/server.rb:354:in `wrapped_app'\n    47: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/server.rb:219:in `app'\n    46: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/server.rb:319:in `build_app_and_options_from_config'\n    45: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:40:in `parse_file'\n    44: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:49:in `new_from_string'\n    43: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:49:in `eval'\n    42: from config.ru:in `&lt;main&gt;'\n    41: from config.ru:in `new'\n    40: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:55:in `initialize'\n    39: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:55:in `instance_eval'\n    38: from config.ru:3:in `block in &lt;main&gt;'\n    37: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:48:in `require_relative'\n    36: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:325:in `require'\n    35: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:291:in `load_dependency'\n    34: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:325:in `block in require'\n    33: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/zeitwerk-2.2.1/lib/zeitwerk/kernel.rb:23:in `require'\n    32: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n    31: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n    30: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n    29: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n    28: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n    27: from /Users/mac/myapp/config/environment.rb:5:in `&lt;main&gt;'\n    26: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/application.rb:363:in `initialize!'\n    25: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/initializable.rb:60:in `run_initializers'\n    24: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'\n    23: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'\n    22: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'\n    21: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:347:in `call'\n    20: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:347:in `each'\n    19: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'\n    18: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'\n    17: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n    16: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'\n    15: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/initializable.rb:61:in `block in run_initializers'\n    14: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/initializable.rb:32:in `run'\n    13: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/initializable.rb:32:in `instance_exec'\n    12: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/railtie.rb:84:in `block in &lt;class:Engine&gt;'\n    11: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker.rb:27:in `bootstrap'\n    10: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/commands.rb:31:in `bootstrap'\n     9: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/manifest.rb:18:in `refresh'\n     8: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/manifest.rb:83:in `load'\n     7: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:51:in `public_manifest_path'\n     6: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:47:in `public_output_path'\n     5: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:43:in `public_path'\n     4: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:84:in `fetch'\n     3: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:88:in `data'\n     2: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:92:in `load'\n     1: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:92:in `read'\n/Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:92:in `read': No such file or directory @ rb_sysopen - /Users/mac/myapp/config/webpacker.yml (Errno::ENOENT)\n    79: from bin/rails:3:in `&lt;main&gt;'\n    78: from bin/rails:3:in `load'\n    77: from /Users/mac/myapp/bin/spring:15:in `&lt;top (required)&gt;'\n    76: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    75: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/site_ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    74: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\n    73: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/binstub.rb:11:in `load'\n    72: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/bin/spring:49:in `&lt;top (required)&gt;'\n    71: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/client.rb:30:in `run'\n    70: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/client/command.rb:7:in `call'\n    69: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `call'\n    68: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/spring-2.1.0/lib/spring/client/rails.rb:28:in `load'\n    67: from /Users/mac/myapp/bin/rails:9:in `&lt;top (required)&gt;'\n    66: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:325:in `require'\n    65: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:291:in `load_dependency'\n    64: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:325:in `block in require'\n    63: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n    62: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n    61: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n    60: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n    59: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n    58: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands.rb:18:in `&lt;main&gt;'\n    57: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/command.rb:46:in `invoke'\n    56: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/command/base.rb:65:in `perform'\n    55: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/thor-0.20.3/lib/thor.rb:387:in `dispatch'\n    54: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/thor-0.20.3/lib/thor/invocation.rb:126:in `invoke_command'\n    53: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/thor-0.20.3/lib/thor/command.rb:27:in `run'\n    52: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:138:in `perform'\n    51: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:138:in `tap'\n    50: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:147:in `block in perform'\n    49: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:37:in `start'\n    48: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/commands/server/server_command.rb:77:in `log_to_stdout'\n    47: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/server.rb:354:in `wrapped_app'\n    46: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/server.rb:219:in `app'\n    45: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/server.rb:319:in `build_app_and_options_from_config'\n    44: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:40:in `parse_file'\n    43: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:49:in `new_from_string'\n    42: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:49:in `eval'\n    41: from config.ru:in `&lt;main&gt;'\n    40: from config.ru:in `new'\n    39: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:55:in `initialize'\n    38: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/rack-2.0.7/lib/rack/builder.rb:55:in `instance_eval'\n    37: from config.ru:3:in `block in &lt;main&gt;'\n    36: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:48:in `require_relative'\n    35: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:325:in `require'\n    34: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:291:in `load_dependency'\n    33: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/activesupport-6.0.1/lib/active_support/dependencies.rb:325:in `block in require'\n    32: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/zeitwerk-2.2.1/lib/zeitwerk/kernel.rb:23:in `require'\n    31: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:30:in `require'\n    30: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require_with_bootsnap_lfi'\n    29: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/loaded_features_index.rb:92:in `register'\n    28: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `block in require_with_bootsnap_lfi'\n    27: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/bootsnap-1.4.5/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:22:in `require'\n    26: from /Users/mac/myapp/config/environment.rb:5:in `&lt;main&gt;'\n    25: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/application.rb:363:in `initialize!'\n    24: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/initializable.rb:60:in `run_initializers'\n    23: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:205:in `tsort_each'\n    22: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:226:in `tsort_each'\n    21: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:347:in `each_strongly_connected_component'\n    20: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:347:in `call'\n    19: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:347:in `each'\n    18: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:349:in `block in each_strongly_connected_component'\n    17: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:431:in `each_strongly_connected_component_from'\n    16: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:350:in `block (2 levels) in each_strongly_connected_component'\n    15: from /Users/mac/.rvm/rubies/ruby-2.6.0/lib/ruby/2.6.0/tsort.rb:228:in `block in tsort_each'\n    14: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/initializable.rb:61:in `block in run_initializers'\n    13: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/initializable.rb:32:in `run'\n    12: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/railties-6.0.1/lib/rails/initializable.rb:32:in `instance_exec'\n    11: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/railtie.rb:84:in `block in &lt;class:Engine&gt;'\n    10: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker.rb:27:in `bootstrap'\n     9: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/commands.rb:31:in `bootstrap'\n     8: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/manifest.rb:18:in `refresh'\n     7: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/manifest.rb:83:in `load'\n     6: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:51:in `public_manifest_path'\n     5: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:47:in `public_output_path'\n     4: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:43:in `public_path'\n     3: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:84:in `fetch'\n     2: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:88:in `data'\n     1: from /Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:91:in `load'\n/Users/mac/.rvm/gems/ruby-2.6.0/gems/webpacker-4.2.0/lib/webpacker/configuration.rb:95:in `rescue in load': Webpacker configuration file not found /Users/mac/myapp/config/webpacker.yml. Please run rails webpacker:install Error: No such file or directory @ rb_sysopen - /Users/mac/myapp/config/webpacker.yml (RuntimeError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573573817, "post_id": 58822104, "comment_id": 103921191, "body": "Is there a way to keep my current directory structure without putting it directly in the presenter folder? Do you also notice that I am loading a module with class methods, instance methods and a new class?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573573931, "post_id": 58822104, "comment_id": 103921266, "body": "Yup, move <code>MethodWrapper</code> to the same nesting level as <code>ClassMethod</code>"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573574012, "post_id": 58822104, "comment_id": 103921308, "body": "you mean as a seperate file? or just take it out of class Methods?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573574044, "post_id": 58822104, "comment_id": 103921333, "body": "take it out of <code>ClassMethods</code> and keep in the same file"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573574132, "post_id": 58822104, "comment_id": 103921381, "body": "but then does the class become a class within an instance, not the other class?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573574178, "post_id": 58822104, "comment_id": 103921416, "body": "I&#39;m not sure why you need a class here."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573574201, "post_id": 58822104, "comment_id": 103921428, "body": "I don&#39;t think there is much of a difference"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573574249, "post_id": 58822104, "comment_id": 103921458, "body": "Keeping my current structure, is there another way I can just reference the module to include it?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573574257, "post_id": 58822104, "comment_id": 103921462, "body": "You can also put it in <code>app&#47;presenters&#47;body_parts&#47;extension.rb</code> and name the module <code>BodyParts::Extension</code> and wrap the class there"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573574368, "post_id": 58822104, "comment_id": 103921534, "body": "What if I moved the whole BodyParts module to lib?"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573574430, "post_id": 58822104, "comment_id": 103921573, "body": "What I am understanding is that the module name needs the file path name, I am hoping for a simple way to over-ride that."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1573593904, "post_id": 58822104, "comment_id": 103930333, "body": "you can require the file manually using  <code>require &quot;body_parts&#47;method_wrapper&quot;</code> on the top of <code>app&#47;presenters&#47;car_presenter.rb</code>"}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": false, "score": 0, "last_activity_date": 1573573678, "creation_date": 1573573678, "answer_id": 58822104, "question_id": 58822042, "link": "https://stackoverflow.com/questions/58822042/rails-module-not-loading-for-presenter/58822104#58822104", "title": "Rails Module not loading for presenter", "body": "<p>Due to the way const loading works in rails, a module <code>BodyParts</code> should be defined in the top level of <code>presenters</code> directory, i.e. in <code>app/presenters/body_parts.rb.rb</code>.  </p>\n\n<p>Rails expects <code>app/presenters/body_parts/method_wrapper.rb</code> to define const <code>BodyParts::MethodWrapper</code>,</p>\n\n<p>Read mode <a href=\"https://guides.rubyonrails.org/autoloading_and_reloading_constants.html\" rel=\"nofollow noreferrer\">in rails guides</a>.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 79, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573573720, "creation_date": 1573573433, "last_edit_date": 1573573720, "question_id": 58822042, "link": "https://stackoverflow.com/questions/58822042/rails-module-not-loading-for-presenter", "title": "Rails Module not loading for presenter", "body": "<p>Why won't my module load properly when I include it in my presenter class?</p>\n\n<p>My class methods and module methods are not available when loading from rails. The module works when loading out of rails in a single file.</p>\n\n<h3>app/presenters/body_parts/method_wrapper.rb</h3>\n\n<pre><code>module BodyParts\n  def self.included(klass)\n    klass.extend ClassMethods  # =&gt; Car\n  end                          # =&gt; :included\n  module ClassMethods\n\n    def set_wheels(*args)\n      x, *wheel_args = args                              # =&gt; [3],  [3]\n      puts \"Wheels class method called with: #{x.to_s}\"  # =&gt; nil,  nil\n      @wheels |= x                                       # =&gt; true, true\n    end                                                  # =&gt; :set_wheels\n\n    class MethodWrapper\n      attr_reader :klass  # =&gt; nil\n\n      def initialize(klass)\n        @klass = klass\n      end                    # =&gt; :initialize\n\n      def wrap(method_name)\n        puts \"Wrapping a method\"\n        wrapper_callback(result)\n      end                         # =&gt; :wrap\n    end                           # =&gt; :wrap\n  end                             # =&gt; :wrap\n\n  private  # =&gt; BodyParts\n\n\n  def wrapper_callback(result)\n    \"Wrapped a #{result} in the call back\"\n  end                                       # =&gt; :wrapper_callback\n\nend  # =&gt; :wrapper_callback\n</code></pre>\n\n<h3>app/presenters/car_presenter.rb</h3>\n\n<pre><code>class CarPresenter\n  include BodyParts  # =&gt; Car\n  set_wheels 3       # =&gt; true\n\n  def brand\n    'Car Brand'  # =&gt; \"Car Brand\"\n  end            # =&gt; :brand\n\n  set_wheels 3  # =&gt; true\n\n  def title          # policy set to 2 for title methods because of the above\n    'Car Title'\n  end            # =&gt; :title\nend              # =&gt; :title\n\ncar_presenter = CarPresenter.new  # =&gt; #&lt;CarPresenter:0x00fe4ed9300&gt;\ncar_presenter.brand      # =&gt; \"Car Brand\"\n\n# &gt;&gt; Wheels class method called with: 3\n# &gt;&gt; Wheels class method called with: 3\n</code></pre>\n\n<h3><code>Binding.pry</code> from CarsPresenter in Rails</h3>\n\n<pre><code>[1] pry(CarPresenter)&gt; set_wheels 3\nNameError: undefined local variable or method `set_wheels' for CarPresenter:Class\nfrom (pry):12:in `&lt;class:CarPresenter&gt;'\n[2] pry(CarPresenter)&gt; BodyParts\n=&gt; BodyParts\n[3] pry(CarPresenter)&gt; self\n=&gt; CarPresenter\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-console", "dokku"], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 11615702, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fij6SayP1g8/AAAAAAAAAAI/AAAAAAAAABM/BjKI1Ku5uZc/photo.jpg?sz=128", "display_name": "viedit.com", "link": "https://stackoverflow.com/users/11615702/viedit-com"}, "is_accepted": false, "score": 1, "last_activity_date": 1573726889, "creation_date": 1573726889, "answer_id": 58854422, "question_id": 58821551, "link": "https://stackoverflow.com/questions/58821551/rails-console-output-doesnt-show-any-results-when-called-from-dokku/58854422#58854422", "title": "Rails console output doesn&#39;t show any results when called from Dokku", "body": "<p>This was a bug in Dokku related to the interactive mode of 'dokku run' command.\nRecent version 0.19.8 fixing this problem. Console output is showing after upgrade to this versions of Dokku.</p>\n"}], "owner": {"reputation": 21, "user_id": 11615702, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fij6SayP1g8/AAAAAAAAAAI/AAAAAAAAABM/BjKI1Ku5uZc/photo.jpg?sz=128", "display_name": "viedit.com", "link": "https://stackoverflow.com/users/11615702/viedit-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573726889, "creation_date": 1573571752, "question_id": 58821551, "link": "https://stackoverflow.com/questions/58821551/rails-console-output-doesnt-show-any-results-when-called-from-dokku", "title": "Rails console output doesn&#39;t show any results when called from Dokku", "body": "<p>Description of problem:<br>\nI moved from heroku to dokku. Really happy.\nRecently I tried to run rails console to make some operations with db. Apparently console starting but not showing any output of the result.\nMy app started from rails v3, then upgraded to rails 5 and currently running rails 6.0 and ruby 2.6.5</p>\n\n<p>Steps to Reproduce:<br>\n<code>dokku run myapp rails c</code></p>\n\n<p>Result:<br>\n<a href=\"https://i.stack.imgur.com/DPmt4.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n\n<p>Expected Result:<br>\nirb(main):001:0> 5 + 6<br>\n=> 11</p>\n\n<p>Steps which I tried to resolve:</p>\n\n<ul>\n<li>Use pry instead of irb. </li>\n<li>Deploy to other cloud provider<br>\nBoth unsuccessful.</li>\n</ul>\n\n<p>Then I tried to deploy newly created rails 6 app. And console works for it...\nSo I want to hear any suggestions what options can be wrong in my app.</p>\n\n<p>Related issue on stackoverflow:<br>\n<a href=\"https://stackoverflow.com/questions/58749984/rails-console-hanging-in-dokku-droplet\">Rails console hanging in dokku droplet</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1573580137, "post_id": 58820429, "comment_id": 103924568, "body": "For multiline strings you&#39;re better of using <a href=\"https://ruby-doc.org/core-2.6.5/doc/syntax/literals_rdoc.html#label-Here+Documents\" rel=\"nofollow noreferrer\"><i>heredoc</i></a> than using the <a href=\"https://ruby-doc.org/core-2.6.5/doc/syntax/literals_rdoc.html#label-Percent+Strings\" rel=\"nofollow noreferrer\"><code>%{...}</code></a> syntax."}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1573569019, "creation_date": 1573569019, "answer_id": 58820713, "question_id": 58820429, "link": "https://stackoverflow.com/questions/58820429/convert-an-array-of-symbols-into-a-list-of-items-in-actionmailer/58820713#58820713", "title": "Convert an array of symbols into a list of items in ActionMailer", "body": "<p>I don't know the best way, but I know you can use <code>join</code> passing the format you need \",\\n\":</p>\n\n<pre><code>array = [:Jon, :Ben, :Penelope]\n\nputs %{\nHi guys,\n\nThe following people are great:\n\n#{array.join(\",\\n\")}\n\nThanks,\nGreatCompany\n}\n\n\n# Hi guys,\n\n# The following people are great:\n\n# Jon,\n# Ben,\n# Penelope\n\n# Thanks,\n# GreatCompany\n</code></pre>\n"}], "owner": {"reputation": 725, "user_id": 9774506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Falko", "link": "https://stackoverflow.com/users/9774506/falko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 58820713, "answer_count": 1, "score": 1, "last_activity_date": 1573569696, "creation_date": 1573568005, "question_id": 58820429, "link": "https://stackoverflow.com/questions/58820429/convert-an-array-of-symbols-into-a-list-of-items-in-actionmailer", "title": "Convert an array of symbols into a list of items in ActionMailer", "body": "<p>Best way of converting the following data which is passed into a rails mailer </p>\n\n<pre><code>array = [:Jon, :Ben, :Penelope]\n</code></pre>\n\n<p>Into the body of the Rails Mailer as a list, so:</p>\n\n<pre><code>%{\nHi guys,\n\nThe following people are great:\n\nJon,\nBen,\nPenelope\n\nThanks,\nGreatCompany\n}\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "embedded-linux"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1573571179, "post_id": 58819625, "comment_id": 103919691, "body": "Something along the lines of <code>bundle install --path vendor&#47;bundle</code>? By doing that, you can include all dependencies for a project as part of the source control."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 2, "creation_date": 1573571227, "post_id": 58819625, "comment_id": 103919725, "body": "Have you looked at <a href=\"https://github.com/pmq20/ruby-packer\" rel=\"nofollow noreferrer\">Ruby Packer</a>?"}, {"owner": {"reputation": 633, "user_id": 10819212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J8mjR.png?s=128&g=1", "display_name": "Felix G", "link": "https://stackoverflow.com/users/10819212/felix-g"}, "edited": false, "score": 0, "creation_date": 1573573353, "post_id": 58819625, "comment_id": 103920966, "body": "Thanks for the suggestions, at first glance Ruby Packer seems more suitable for my use case, but i&#39;ll try out both"}], "owner": {"reputation": 633, "user_id": 10819212, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J8mjR.png?s=128&g=1", "display_name": "Felix G", "link": "https://stackoverflow.com/users/10819212/felix-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1573564724, "creation_date": 1573564724, "question_id": 58819625, "link": "https://stackoverflow.com/questions/58819625/manual-installation-of-a-ruby-gem", "title": "Manual installation of a ruby gem", "body": "<p>This might sound a bit weird, but (as the title suggests) i need to install an application (and all its dependencies), which is distributed as a ruby gem, <strong>without</strong> actually using \"gem install ...\" or anything like that.</p>\n\n<p>The reason is that i want to run that application on an embedded linux system (built using buildroot), which doesn't have any way for me to actually install applications.\nAnything i want on the target has to be compiled and \"installed\" (i.e. copied to the image of the root file system) as part of the build process on the host system.\nThe target system also doesn't have a compiler, so if the gem contains any C code, it needs to be compiled on the host system using the cross compilation toolchain.</p>\n\n<p>Some additional information, even though it probably doesn't matter too much:</p>\n\n<ul>\n<li>The application in question is asciidoctor-pdf</li>\n<li>The target system is a Cyclone-V SoC (ARM Cortex-A9)</li>\n</ul>\n\n<p>So essentially i need instructions for the equivalent of a \"compile from source\", but for ruby gems.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573557854, "post_id": 58817607, "comment_id": 103912750, "body": "Have you added a <code>discussion_id</code> column to your <code>replies</code> table? You also want to use <code>simple_form_for([@discussion, @reply], remote: true)</code> and assign <code>@reply = @discussion.replies.new</code> in the controller. If you use <code>@discussion.replies.build</code> it will always bind the form to a new instance so that anything entered will be lost if the record is not valid."}, {"owner": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1573559477, "post_id": 58817607, "comment_id": 103913588, "body": "Share your schema, migration and model files for <code>reply</code> and <code>discussion</code>."}, {"owner": {"reputation": 1, "user_id": 11882148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fmnhs2_L5kw/AAAAAAAAAAI/AAAAAAAAAAc/WRKPcsgfmfs/photo.jpg?sz=128", "display_name": "Odechie-Williams", "link": "https://stackoverflow.com/users/11882148/odechie-williams"}, "edited": false, "score": 0, "creation_date": 1573685318, "post_id": 58817607, "comment_id": 103967284, "body": "yeah i added discussion_id to replies tables"}, {"owner": {"reputation": 1, "user_id": 11882148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fmnhs2_L5kw/AAAAAAAAAAI/AAAAAAAAAAc/WRKPcsgfmfs/photo.jpg?sz=128", "display_name": "Odechie-Williams", "link": "https://stackoverflow.com/users/11882148/odechie-williams"}, "reply_to_user": {"reputation": 1023, "user_id": 3552298, "user_type": "registered", "accept_rate": 12, "profile_image": "https://www.gravatar.com/avatar/8540fb02a16712af1b873b8bd8b6b318?s=128&d=identicon&r=PG&f=1", "display_name": "sureshprasanna70", "link": "https://stackoverflow.com/users/3552298/sureshprasanna70"}, "edited": false, "score": 0, "creation_date": 1573685398, "post_id": 58817607, "comment_id": 103967306, "body": "sure will share my schema, migration and model files @suresh"}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573588822, "post_id": 58818253, "comment_id": 103928303, "body": "In what way is this answer relevant to <code>unknown attribute &#39;discussion_id&#39; for Reply</code>?"}, {"owner": {"reputation": 71, "user_id": 9481404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZzfX_BGjBbc/AAAAAAAAAAI/AAAAAAAAANQ/GKth3iQ9iaY/photo.jpg?sz=128", "display_name": "iseitz", "link": "https://stackoverflow.com/users/9481404/iseitz"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573622109, "post_id": 58818253, "comment_id": 103937066, "body": "Hi Max, I am also a newbie and If the discussion_id is not in the strong prams he will get an error. I did get stuck on this error myself. Just helping him to avoid it."}, {"owner": {"reputation": 71, "user_id": 9481404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZzfX_BGjBbc/AAAAAAAAAAI/AAAAAAAAANQ/GKth3iQ9iaY/photo.jpg?sz=128", "display_name": "iseitz", "link": "https://stackoverflow.com/users/9481404/iseitz"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573636345, "post_id": 58818253, "comment_id": 103942551, "body": "Max, my bad. The ActiveRecord::UnknownAttributeError is only related to the fact that the attribute is not in the model and/or DB. You are right."}, {"owner": {"reputation": 1, "user_id": 11882148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fmnhs2_L5kw/AAAAAAAAAAI/AAAAAAAAAAc/WRKPcsgfmfs/photo.jpg?sz=128", "display_name": "Odechie-Williams", "link": "https://stackoverflow.com/users/11882148/odechie-williams"}, "edited": false, "score": 0, "creation_date": 1573685714, "post_id": 58818253, "comment_id": 103967401, "body": "Have already added the migration files for replies and discussion if i do it,it will not work."}, {"owner": {"reputation": 71, "user_id": 9481404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZzfX_BGjBbc/AAAAAAAAAAI/AAAAAAAAANQ/GKth3iQ9iaY/photo.jpg?sz=128", "display_name": "iseitz", "link": "https://stackoverflow.com/users/9481404/iseitz"}, "edited": false, "score": 0, "creation_date": 1573709457, "post_id": 58818253, "comment_id": 103972858, "body": "Could you clarify, please did you add the discussion_id to the migration or did you already create the initial migration? If one migration was created you can always add an additional column to the table with the next migration and run rake db:migrate again. You can also run the rake db:rollback to undo the migrations. One important thing though you do not want to alter your migration files before you run the db:rollback.  The migration files should have the same structure as your schema.rb to not mess up the database."}, {"owner": {"reputation": 71, "user_id": 9481404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZzfX_BGjBbc/AAAAAAAAAAI/AAAAAAAAANQ/GKth3iQ9iaY/photo.jpg?sz=128", "display_name": "iseitz", "link": "https://stackoverflow.com/users/9481404/iseitz"}, "edited": false, "score": 0, "creation_date": 1573709625, "post_id": 58818253, "comment_id": 103972915, "body": "Could you post the exact text of the error that you are getting and, as Max mentioned at the very beginning, the Model and the migration for Reply?"}, {"owner": {"reputation": 71, "user_id": 9481404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZzfX_BGjBbc/AAAAAAAAAAI/AAAAAAAAANQ/GKth3iQ9iaY/photo.jpg?sz=128", "display_name": "iseitz", "link": "https://stackoverflow.com/users/9481404/iseitz"}, "edited": false, "score": 0, "creation_date": 1573710768, "post_id": 58818253, "comment_id": 103973230, "body": "Also, are you getting this error when you are running the app or when you are running the tests?"}, {"owner": {"reputation": 1, "user_id": 11882148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fmnhs2_L5kw/AAAAAAAAAAI/AAAAAAAAAAc/WRKPcsgfmfs/photo.jpg?sz=128", "display_name": "Odechie-Williams", "link": "https://stackoverflow.com/users/11882148/odechie-williams"}, "edited": false, "score": 0, "creation_date": 1573937267, "post_id": 58818253, "comment_id": 104054886, "body": "so have added some images from schema migrations hope its helps and the exact error[ ActiveModel::UnknownAttributeError in Discussions#show]unknown attribute &#39;discussion_id&#39; for Reply."}, {"owner": {"reputation": 1, "user_id": 11882148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fmnhs2_L5kw/AAAAAAAAAAI/AAAAAAAAAAc/WRKPcsgfmfs/photo.jpg?sz=128", "display_name": "Odechie-Williams", "link": "https://stackoverflow.com/users/11882148/odechie-williams"}, "edited": false, "score": 0, "creation_date": 1573937337, "post_id": 58818253, "comment_id": 104054903, "body": "Error pops up during testing"}, {"owner": {"reputation": 71, "user_id": 9481404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZzfX_BGjBbc/AAAAAAAAAAI/AAAAAAAAANQ/GKth3iQ9iaY/photo.jpg?sz=128", "display_name": "iseitz", "link": "https://stackoverflow.com/users/9481404/iseitz"}, "reply_to_user": {"reputation": 1, "user_id": 11882148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fmnhs2_L5kw/AAAAAAAAAAI/AAAAAAAAAAc/WRKPcsgfmfs/photo.jpg?sz=128", "display_name": "Odechie-Williams", "link": "https://stackoverflow.com/users/11882148/odechie-williams"}, "edited": false, "score": 0, "creation_date": 1574058630, "post_id": 58818253, "comment_id": 104080436, "body": "@Odechie-Williams I&#39;m looking at your migration and see that you add <code>discussion_Id</code> with the capital <code>I</code> instead of <code>discussion_id</code> would you mind to run rake db:rollback to undo this migration, update the <code>discussion_Id</code> to the <code>discussion_id</code> and run <code>rake db:migrate again</code>?  Also in your  app/models/reply.rb model do you have the statement  <code>belongs_to :discussion</code> ? Let me know what you get with this."}, {"owner": {"reputation": 1, "user_id": 11882148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fmnhs2_L5kw/AAAAAAAAAAI/AAAAAAAAAAc/WRKPcsgfmfs/photo.jpg?sz=128", "display_name": "Odechie-Williams", "link": "https://stackoverflow.com/users/11882148/odechie-williams"}, "edited": false, "score": 0, "creation_date": 1574152649, "post_id": 58818253, "comment_id": 104119366, "body": "Thanks a lot just noticed the mistake i made,will run the roll back and inform you later"}], "tags": [], "owner": {"reputation": 71, "user_id": 9481404, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ZzfX_BGjBbc/AAAAAAAAAAI/AAAAAAAAANQ/GKth3iQ9iaY/photo.jpg?sz=128", "display_name": "iseitz", "link": "https://stackoverflow.com/users/9481404/iseitz"}, "is_accepted": false, "score": 0, "last_activity_date": 1573637849, "last_edit_date": 1573637849, "creation_date": 1573559936, "answer_id": 58818253, "question_id": 58817607, "link": "https://stackoverflow.com/questions/58817607/unknown-attribute-discussion-id-for-reply/58818253#58818253", "title": "unknown attribute &#39;discussion_id&#39; for Reply", "body": "<p><strong>UPD: As Max mentioned in the comment below</strong> my initial answer would not be useful for your exact question. It might help with not getting the new error further down the road but in reality, the Error that you are getting  <code>ActiveRecord::UnknownAttributeError</code> might be only related to the fact that the attribute  <code>discussion_id</code> is not present in your Reply model and your Replies table in the Database. You would want to add the <code>validates :discussion_id, presence: true</code> to your Reply model and also  run in the terminal:</p>\n\n<p><code>rails generate migration add_discussion_id_to_replies discussion_id:integer</code> </p>\n\n<p>to generate the migration file and then run</p>\n\n<p><code>rake db:migrate</code></p>\n\n<p>to migrate it.</p>\n\n<p>So that the <code>discussion_id</code> column is added to your Replies table in the database.</p>\n\n<p><strong>Previous answer</strong> \n You need to add the <code>:discussion_id</code> to your stong params for the <code>reply</code>. To do so you need to add at the end of the  app/controllers/replies_contorller.rb  private method like so:</p>\n\n<pre><code>private \ndef reply_params\n    params.require(:reply).permit(:id, :reply, :discussion_id)\nend\n</code></pre>\n\n<p>everything in the brackets after permit will reflect the attributes permitted in the params hash for your reply model. If you need more details please post the <code>reply</code> model with attributes in your question and I can help you to add the necessary. You can also read more about strong parameters here <a href=\"https://edgeapi.rubyonrails.org/classes/ActionController/StrongParameters.html\" rel=\"nofollow noreferrer\">https://edgeapi.rubyonrails.org/classes/ActionController/StrongParameters.html</a></p>\n"}], "owner": {"reputation": 1, "user_id": 11882148, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Fmnhs2_L5kw/AAAAAAAAAAI/AAAAAAAAAAc/WRKPcsgfmfs/photo.jpg?sz=128", "display_name": "Odechie-Williams", "link": "https://stackoverflow.com/users/11882148/odechie-williams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 66, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573936812, "creation_date": 1573557577, "last_edit_date": 1573936812, "question_id": 58817607, "link": "https://stackoverflow.com/questions/58817607/unknown-attribute-discussion-id-for-reply", "title": "unknown attribute &#39;discussion_id&#39; for Reply", "body": "<p>I'm encountering an error \"unknown attribute 'discussion_id' for Reply\" \nStill learning rails and not yet good so am struggling here\nMy knowledge in rails is beginners level so kindly pardon me if I am asking a question which maybe trivial.</p>\n\n<p>Thanks in advance. </p>\n\n<pre><code>&lt;%= simple_form_for([@discussion, @discussion.replies.build], remote: true) do |f| %&gt;\n\n&lt;div class=\"field\"&gt;\n  &lt;div class=\"control\"&gt;\n    &lt;%= f.input :reply, input_html: { class: 'textarea' }, wrapper: false, label_html: { class: 'label' } %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n\n&lt;%= f.button :submit, 'Leave a reply', class:'button is-info' %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>Display of replies and comment sections \nerror message: Extracted source (around line #1):</p>\n\n<p><a href=\"https://i.stack.imgur.com/mz80P.jpg\" rel=\"nofollow noreferrer\">ActiveRecord::Schema</a><a href=\"https://i.stack.imgur.com/NkjBp.jpg\" rel=\"nofollow noreferrer\"> Migration:AddDiscussionIdToReplies</a><a href=\"https://i.stack.imgur.com/pIFmP.jpg\" rel=\"nofollow noreferrer\">Migration:AddUserIdToReplies</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 6, "creation_date": 1573557397, "post_id": 58817206, "comment_id": 103912515, "body": "Try running <code>gem uninstall etc</code> and then <code>bundle update</code>."}, {"owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "edited": false, "score": 0, "creation_date": 1573557482, "post_id": 58817206, "comment_id": 103912551, "body": "Do  you use bootsnap in your rails application?"}, {"owner": {"reputation": 1227, "user_id": 1973735, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f2662932dbc7a607c5dda0896b45cbe6?s=128&d=identicon&r=PG", "display_name": "Rahul Sharma", "link": "https://stackoverflow.com/users/1973735/rahul-sharma"}, "edited": false, "score": 0, "creation_date": 1573558206, "post_id": 58817206, "comment_id": 103912931, "body": "See if this <a href=\"https://github.com/Shopify/bootsnap/issues/112\" rel=\"nofollow noreferrer\">github.com/Shopify/bootsnap/issues/112</a> helps."}, {"owner": {"reputation": 295, "user_id": 7996789, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-yhg7HEBf1ak/AAAAAAAAAAI/AAAAAAAAAB4/5-JYggF9Kfk/photo.jpg?sz=128", "display_name": "Jochen Kunze", "link": "https://stackoverflow.com/users/7996789/jochen-kunze"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573644326, "post_id": 58817206, "comment_id": 103946815, "body": "@max That was the solution. bundle update updated some gems to incompatible versions, but I could fix that. Can you please explain, what happens exactly in this solution, because I do not find the etc gem in the gemfile, neither before executing <code>gem uninstall etc</code> nor after <code>bundle update</code>."}], "answers": [{"tags": [], "owner": {"reputation": 3867, "user_id": 3906189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/432b41df14bd9197f1b8601cabf49386?s=128&d=identicon&r=PG", "display_name": "siegy22", "link": "https://stackoverflow.com/users/3906189/siegy22"}, "is_accepted": false, "score": 1, "last_activity_date": 1573557540, "creation_date": 1573557540, "answer_id": 58817599, "question_id": 58817206, "link": "https://stackoverflow.com/questions/58817206/rails-starts-with-a-long-list-of-warnings-concerning-already-initialized-constan/58817599#58817599", "title": "Rails starts with a long list of warnings concerning already initialized constants", "body": "<p>This looks like it could be caused by a conflict between the global gems and the ones in the Rails project managed by bundler: <a href=\"https://github.com/Shopify/bootsnap/issues/112#issuecomment-483789081\" rel=\"nofollow noreferrer\">https://github.com/Shopify/bootsnap/issues/112#issuecomment-483789081</a></p>\n"}, {"comments": [{"owner": {"reputation": 129, "user_id": 661659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7799ed4ed899f361f5604d92aab53888?s=128&d=identicon&r=PG", "display_name": "Kingdon", "link": "https://stackoverflow.com/users/661659/kingdon"}, "edited": false, "score": 2, "creation_date": 1595887365, "post_id": 61904384, "comment_id": 111624802, "body": "<code>bundle clean --force</code> \u2013 finally! thank you, this has been the missing puzzle piece for me"}, {"owner": {"reputation": 75, "user_id": 12670280, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-fWNcp5Dv0Lc/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3reKfYK6EiZUWK08epPo3X7sl8CD7A/photo.jpg?sz=128", "display_name": "ffouquet42", "link": "https://stackoverflow.com/users/12670280/ffouquet42"}, "edited": false, "score": 0, "creation_date": 1617366333, "post_id": 61904384, "comment_id": 118289595, "body": "Still works in April 2021! thank you."}], "tags": [], "owner": {"reputation": 182, "user_id": 11357014, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4feac29a84ef8e367f1c67ed88249e83?s=128&d=identicon&r=PG&f=1", "display_name": "ejaco", "link": "https://stackoverflow.com/users/11357014/ejaco"}, "is_accepted": false, "score": 14, "last_activity_date": 1589944096, "creation_date": 1589944096, "answer_id": 61904384, "question_id": 58817206, "link": "https://stackoverflow.com/questions/58817206/rails-starts-with-a-long-list-of-warnings-concerning-already-initialized-constan/61904384#61904384", "title": "Rails starts with a long list of warnings concerning already initialized constants", "body": "<p><code>bundle update</code> and <code>bundle clean --force</code> worked when running into the same issue.</p>\n"}, {"comments": [{"owner": {"reputation": 3995, "user_id": 2037537, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f13d953be3af2552aaa1ddfa0a05fa46?s=128&d=identicon&r=PG", "display_name": "Roland Studer", "link": "https://stackoverflow.com/users/2037537/roland-studer"}, "edited": false, "score": 2, "creation_date": 1614853086, "post_id": 66470902, "comment_id": 117514061, "body": "Hey. glad to see a new contributor. Please note that your answer is not bringing anything new to the table, so it is better just to upvote the existing answer <a href=\"https://stackoverflow.com/help/privileges/vote-up\">stackoverflow.com/help/privileges/vote-up</a>"}], "tags": [], "owner": {"reputation": 1, "user_id": 15327846, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14GiKE_iSxFvQ3gd_Dk7vjsZcUpFZrwIHNFQE76UCkg=k-s128", "display_name": "Hena fufa", "link": "https://stackoverflow.com/users/15327846/hena-fufa"}, "is_accepted": false, "score": 0, "last_activity_date": 1614845272, "creation_date": 1614845272, "answer_id": 66470902, "question_id": 58817206, "link": "https://stackoverflow.com/questions/58817206/rails-starts-with-a-long-list-of-warnings-concerning-already-initialized-constan/66470902#66470902", "title": "Rails starts with a long list of warnings concerning already initialized constants", "body": "<p>bundle clean --force and then bundle update, solved for me too</p>\n"}, {"tags": [], "owner": {"reputation": 32534, "user_id": 63810, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/8bf1c9d4005ec592ac518840559db996?s=128&d=identicon&r=PG", "display_name": "Rimian", "link": "https://stackoverflow.com/users/63810/rimian"}, "is_accepted": false, "score": 0, "last_activity_date": 1616043120, "creation_date": 1616043120, "answer_id": 66684972, "question_id": 58817206, "link": "https://stackoverflow.com/questions/58817206/rails-starts-with-a-long-list-of-warnings-concerning-already-initialized-constan/66684972#66684972", "title": "Rails starts with a long list of warnings concerning already initialized constants", "body": "<p>This happened for me while I was running tests. I tried <code>bundle clean --force</code> but nothing changed.</p>\n<p>Closing and reopening my terminal fixed it. Restarting did too. The first one is easier.</p>\n"}], "owner": {"reputation": 295, "user_id": 7996789, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh4.googleusercontent.com/-yhg7HEBf1ak/AAAAAAAAAAI/AAAAAAAAAB4/5-JYggF9Kfk/photo.jpg?sz=128", "display_name": "Jochen Kunze", "link": "https://stackoverflow.com/users/7996789/jochen-kunze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1778, "favorite_count": 2, "answer_count": 4, "score": 9, "last_activity_date": 1616043120, "creation_date": 1573556144, "question_id": 58817206, "link": "https://stackoverflow.com/questions/58817206/rails-starts-with-a-long-list-of-warnings-concerning-already-initialized-constan", "title": "Rails starts with a long list of warnings concerning already initialized constants", "body": "<p>Rails starts with a long list of warnings concerning already initialized constants.\nHere a list of the warnings</p>\n\n<pre><code>/Users/jochen/.rvm/rubies/ruby-2.5.5/lib/ruby/2.5.0/x86_64-darwin17/etc.bundle: warning: already initialized constant Etc::SC_AIO_LISTIO_MAX\n/Users/jochen/.rvm/rubies/ruby-2.5.5/lib/ruby/2.5.0/x86_64-darwin17/etc.bundle: warning: already initialized constant Etc::SC_AIO_MAX\n/Users/jochen/.rvm/rubies/ruby-2.5.5/lib/ruby/2.5.0/x86_64-darwin17/etc.bundle: warning: already initialized constant Etc::SC_AIO_PRIO_DELTA_MAX\n/Users/jochen/.rvm/rubies/ruby-2.5.5/lib/ruby/2.5.0/x86_64-darwin17/etc.bundle: warning: already initialized constant Etc::SC_ARG_MAX\n/Users/jochen/.rvm/rubies/ruby-2.5.5/lib/ruby/2.5.0/x86_64-darwin17/etc.bundle: warning: already initialized constant Etc::SC_ATEXIT_MAX\n/Users/jochen/.rvm/rubies/ruby-2.5.5/lib/ruby/2.5.0/x86_64-darwin17/etc.bundle: warning: already initialized constant Etc::SC_BC_BASE_MAX\n... and many more from the same ruby path\n</code></pre>\n\n<p>This doesn't seem to produce problems, but it's kind of annoying. Has someone an idea how to fix these warnings?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "docker", "docker-api"], "answers": [{"tags": [], "owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "is_accepted": true, "score": 0, "last_activity_date": 1573573579, "last_edit_date": 1573573579, "creation_date": 1573555447, "answer_id": 58816999, "question_id": 58816703, "link": "https://stackoverflow.com/questions/58816703/how-run-image-as-daemon-in-ruby-docker-api/58816999#58816999", "title": "How run image as daemon in ruby docker-api?", "body": "<p>I find solution:\n</p>\n\n<pre><code>container = Docker::Container.create('Cmd' =&gt; [\"tail\", \"-f\", \"/dev/null\"], 'Image' =&gt; 'some_image')\n\ncontainer.start\n</code></pre>\n\n\n\n<pre><code>$ docker ps -a\nCONTAINER ID        IMAGE               COMMAND               CREATED             STATUS                      PORTS               NAMES\n\n08564fe29591        some_image          \"tail -f /dev/null\"   20 seconds ago      Up 10 seconds                                   nervous_ardinghelli\n</code></pre>\n\n<p>Container not Exited after start, and you can make exec in this container!</p>\n"}, {"comments": [{"owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "edited": false, "score": 0, "creation_date": 1573559814, "post_id": 58817732, "comment_id": 103913750, "body": "We will get Exited status after <code>container.start</code>"}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "reply_to_user": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "edited": false, "score": 0, "creation_date": 1573564464, "post_id": 58817732, "comment_id": 103916257, "body": "If you run something like <code>ls</code> as the main container process as the example shows, it will in fact exit quickly.  This is equivalent to <code>docker run -d alpine ls</code> (swapping in a standard Docker Hub image) and that will show \u201cExited (0)\u201d in <code>docker ps -a</code> output for the same reasons."}, {"owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "edited": false, "score": 0, "creation_date": 1573573788, "post_id": 58817732, "comment_id": 103921179, "body": "Sorry, but you probably misunderstood me. I need something after running the container,I could exec commands."}, {"owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "reply_to_user": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "edited": false, "score": 0, "creation_date": 1573574782, "post_id": 58817732, "comment_id": 103921776, "body": "What does the container <i>do</i>?  That should be its main process; you probably shouldn\u2019t be programmatically trying to exec commands in it."}, {"owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "edited": false, "score": 0, "creation_date": 1573641589, "post_id": 58817732, "comment_id": 103945361, "body": "Why not?  I need to run the code that comes to me from users."}], "tags": [], "owner": {"reputation": 64542, "user_id": 10008173, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e3ea5d6d5d63e054acb8cfa95a39240d?s=128&d=identicon&r=PG&f=1", "display_name": "David Maze", "link": "https://stackoverflow.com/users/10008173/david-maze"}, "is_accepted": false, "score": 1, "last_activity_date": 1573557984, "creation_date": 1573557984, "answer_id": 58817732, "question_id": 58816703, "link": "https://stackoverflow.com/questions/58816703/how-run-image-as-daemon-in-ruby-docker-api/58817732#58817732", "title": "How run image as daemon in ruby docker-api?", "body": "<p>You don't need to do anything special.  At an API level, <code>docker run</code> does three things:</p>\n\n<ol>\n<li>It <a href=\"https://docs.docker.com/engine/api/v1.40/#operation/ContainerCreate\" rel=\"nofollow noreferrer\">creates a new container</a> with most of the options you specify;</li>\n<li>It <a href=\"https://docs.docker.com/engine/api/v1.40/#operation/ContainerStart\" rel=\"nofollow noreferrer\">starts the container</a>; and</li>\n<li>It <a href=\"https://docs.docker.com/engine/api/v1.40/#operation/ContainerAttach\" rel=\"nofollow noreferrer\">attaches to the containers's stdin and stdout</a>.</li>\n</ol>\n\n<p>The GitHub project you link to has some fairly intricate examples.  (Its <a href=\"https://www.rubydoc.info/gems/docker-api/1.34.2\" rel=\"nofollow noreferrer\">API documentation</a> doesn't say a whole lot beyond that; for example the <a href=\"https://www.rubydoc.info/gems/docker-api/1.34.2/Docker/Container\" rel=\"nofollow noreferrer\">Docker::Container</a> docs mostly just list the methods without explaining what could go into the various hash parameters.)  If you create and start the container, but don't attach to it, it will have the same effect of <code>docker run -d</code> of running the container \"in the background\".</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># Lifted from https://github.com/swipely/docker-api\n\n# Create a Container.\ncontainer = Docker::Container.create('Cmd' =&gt; ['ls'], 'Image' =&gt; 'base')\n\n# Start running the Container.\ncontainer.start\n\n# It is \"in the background\", unless you specifically #attach to it or\n# #wait for it.\n</code></pre>\n"}], "owner": {"reputation": 162, "user_id": 12343056, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6qUwx.jpg?s=128&g=1", "display_name": "Mikhail Melnyk", "link": "https://stackoverflow.com/users/12343056/mikhail-melnyk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 129, "favorite_count": 0, "accepted_answer_id": 58816999, "answer_count": 2, "score": 0, "last_activity_date": 1573573579, "creation_date": 1573554490, "question_id": 58816703, "link": "https://stackoverflow.com/questions/58816703/how-run-image-as-daemon-in-ruby-docker-api", "title": "How run image as daemon in ruby docker-api?", "body": "<p>i'm need <a href=\"https://github.com/swipely/docker-api\" rel=\"nofollow noreferrer\">docker-api</a> method that will allow me to run image as daemon.</p>\n\n<p>Docker command for reference: <code>docker run -t -d some_image</code></p>\n\n<p>Does anyone know a solution?</p>\n"}, {"tags": ["ruby", "selenium-webdriver", "watir", "browser-automation"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1573573080, "post_id": 58816577, "comment_id": 103920819, "body": "Hi try to do in WATIR, which is a wrapper around Ruby selenium binding. It has many easy ways to do things. Or atleast include a line to answer in watir and tag watir tag as well and you will get a help."}, {"owner": {"reputation": 51, "user_id": 1427403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/321c8f04bf5a8f425aa9c8d527416766?s=128&d=identicon&r=PG", "display_name": "deanmarano", "link": "https://stackoverflow.com/users/1427403/deanmarano"}, "edited": false, "score": 0, "creation_date": 1582822917, "post_id": 58816577, "comment_id": 106918174, "body": "I&#39;m seeing this same behavior on macOS and Linux - tried numerous different strategies, environments, and the arrow keys always just scroll the page."}], "owner": {"reputation": 545, "user_id": 2400756, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ls4jp.jpg?s=128&g=1", "display_name": "The Rookie", "link": "https://stackoverflow.com/users/2400756/the-rookie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 160, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573621576, "creation_date": 1573554097, "last_edit_date": 1573621576, "question_id": 58816577, "link": "https://stackoverflow.com/questions/58816577/with-right-click-with-context-click-in-ruby-i-am-unable-to-select-the-option-to", "title": "With Right click with context_click in ruby I am unable to select the option to &quot;Save the image&quot;", "body": "<p>I have been stuck with this for quite a while. </p>\n\n<pre><code>require 'selenium-webdriver'\n\ndef download\n  d = Selenium::WebDriver.for :chrome\n  d.get 'https://zinrelo.com'\n  sleep 7\n  photo = d.find_element(:class, 'aio-icon-img ')\n  d.action.context_click(photo)\n      .send_keys(:arrow_down)\n      .send_keys(:enter).perform\n  sleep 5\nend\n\ndownload\n</code></pre>\n\n<p>This code will do the right click but it would not select the save image option.</p>\n\n<p>Chrome - <strong>Version 78.0.3904.97</strong>\nChrome Driver - <strong>77.0.3865.40</strong>\nSelenium-Webdriver - <strong>3.142.3</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "service-object"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1573555112, "post_id": 58816424, "comment_id": 103911392, "body": "&quot;I know, it should be 1 Service Object per 1 action&quot; - out of curiosity, what makes you say that?"}, {"owner": {"reputation": 21, "user_id": 2920303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952c665f3bb8a69fcc2195844531e68d?s=128&d=identicon&r=PG&f=1", "display_name": "Vitalina", "link": "https://stackoverflow.com/users/2920303/vitalina"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1573598156, "post_id": 58816424, "comment_id": 103931795, "body": "One Senior-level guy. Can I have more ServiceObjects and in which cases? Thank you"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 2, "creation_date": 1573598644, "post_id": 58816424, "comment_id": 103931972, "body": "IMO, you can have as many service objects as makes sense. Things like code reuse, single responsibility principle, etc. should drive your decision making. But, &quot;1 Service Object per 1 action&quot; is a convention with which I am not familiar. And one that does not make particular sense to me. But, who am I to say?"}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 2920303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952c665f3bb8a69fcc2195844531e68d?s=128&d=identicon&r=PG&f=1", "display_name": "Vitalina", "link": "https://stackoverflow.com/users/2920303/vitalina"}, "is_accepted": true, "score": 0, "last_activity_date": 1589278936, "creation_date": 1589278936, "answer_id": 61749266, "question_id": 58816424, "link": "https://stackoverflow.com/questions/58816424/how-to-minimize-3-serviceobjects-to-1-per-1-action/61749266#61749266", "title": "How to minimize 3 ServiceObjects to 1 per 1 action", "body": "<p>It was okay to make a lot of ServiceObjects. Every of them should solve 1 issue. Even if we have many SObjects per 1 controller or per 1 action.</p>\n\n<p>I got it :)</p>\n"}], "owner": {"reputation": 21, "user_id": 2920303, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/952c665f3bb8a69fcc2195844531e68d?s=128&d=identicon&r=PG&f=1", "display_name": "Vitalina", "link": "https://stackoverflow.com/users/2920303/vitalina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 22, "favorite_count": 1, "accepted_answer_id": 61749266, "answer_count": 1, "score": 0, "last_activity_date": 1589278936, "creation_date": 1573553551, "question_id": 58816424, "link": "https://stackoverflow.com/questions/58816424/how-to-minimize-3-serviceobjects-to-1-per-1-action", "title": "How to minimize 3 ServiceObjects to 1 per 1 action", "body": "<p>I have the Worker with an action with some code and 3 calls of Service Objects in it. 2 Service Objects for saving data to base during different states of object saving (update started, update completed). And 1 for counting the percentage of progress.</p>\n\n<p>I know, it should be 1 Service Object per 1 action. \nHow should I avoid the using of over head Service Objects?\nOr how should I refactor my code, for example, devide it into parts?</p>\n\n<p>Sorry, if I have mistakes in question style. I was trying to explain situation clearly.</p>\n\n<p><strong>csv_worker.rb</strong></p>\n\n<pre><code>def perform(import_id)\n\n  ...\n\n  @import = Import.find(import_id)\n\n  ImportStartedUpdateJobService.call(@import)  \n\n  users = []  \n  row_hash = {}\n  result = ''\n\n  CSV.foreach(@import.file.path, headers: true).with_index do |row, index|\n    row_hash = row.to_h\n    row_hash['import_id'] = @import.id\n\n    # The day is put on the first place\n    # to make the data valid for saving in DB\n    row_hash = make_the_date_valid(row_hash)    \n\n    user = User.new(row_hash)\n\n    if user.valid?\n      ...\n    end\n\n    @import.percentage = ImportPercentageUpdateJobService.call(@import)\n    @import.save if (index % 10).zero? \n\n    if (index % 1000).zero? \n      User.import(users)\n      users = []\n    end  \n  end  \n\n  User.import(users)\n  ImportCompletedUpdateJobService.call(@import)\n\n  puts \nend    \n</code></pre>\n\n<p><strong>import_started_update_job_service.rb</strong></p>\n\n<pre><code>def initialize(import)\n  @import = import\nend\n\ndef call\n  @import.count_of_lines_in_csv = CSV.read(@import.file.path).count - 1\n  @import.started_at            = Time.now\n  @import.import_status         = 'started'\n  @import.save\nend\n</code></pre>\n\n<p><strong>import_completed_update_job_service.rb</strong></p>\n\n<pre><code>...\ndef call\n  @import.completed_at  = Time.now\n  @import.import_status = 'completed'\n  @import.percentage = 100\n  @import.save\nend\n</code></pre>\n\n<p><strong>import_percentage_update_job_service.rb</strong></p>\n\n<pre><code>...\ndef call\n  @import.percentage = if @import.count_of_lines_in_csv.positive?\n                         (@import.count_of_created_users +\n                          @import.count_of_not_created_users).to_f /\n                           @import.count_of_lines_in_csv *\n                           100\n                       end\n\n  @import.percentage.to_i  \nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-i18n"], "comments": [{"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1573555199, "post_id": 58816230, "comment_id": 103911423, "body": "I cannot see that you are setting/changing I18n.locale when a new locale comes from params"}, {"owner": {"reputation": 130, "user_id": 12131470, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7tJ1PSFeIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rct9QyWBDttPChinbbZf7d-dXSgHA/photo.jpg?sz=128", "display_name": "victorfink", "link": "https://stackoverflow.com/users/12131470/victorfink"}, "reply_to_user": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1573555390, "post_id": 58816230, "comment_id": 103911515, "body": "I forgot to mention how I changed it indeed. I&#39;m editing my question right now."}], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 12131470, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7tJ1PSFeIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rct9QyWBDttPChinbbZf7d-dXSgHA/photo.jpg?sz=128", "display_name": "victorfink", "link": "https://stackoverflow.com/users/12131470/victorfink"}, "edited": false, "score": 0, "creation_date": 1573565700, "post_id": 58818182, "comment_id": 103916930, "body": "Thanks, it works now. What I was missing is the switch_locale method, after that everything is fine. Thanks!"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1573559716, "creation_date": 1573559716, "answer_id": 58818182, "question_id": 58816230, "link": "https://stackoverflow.com/questions/58816230/how-to-fix-i18n-always-translate-to-default-locale/58818182#58818182", "title": "How to fix: i18n always translate to default locale", "body": "<p>First set the locale for the request:</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n    around_action :switch_locale\n\n    def switch_locale(&amp;action)\n        I18n.with_locale(params[:locale] || I18n.default_locale, &amp;action)\n    end\n\n    def default_url_options\n        { locale: I18n.locale }\n    end\nend\n</code></pre>\n\n<p>Don't use <code>I18n.locale=</code> as many older answers / tutorials do.</p>\n\n<blockquote>\n  <p>I18n.locale can leak into subsequent requests served by the same\n  thread/process if it is not consistently set in every controller. For\n  example executing I18n.locale = :es in one POST requests will have\n  effects for all later requests to controllers that don't set the\n  locale, but only in that particular thread/process. For that reason,\n  instead of I18n.locale = you can use I18n.with_locale which does not\n  have this leak issue.<br>\n  - <a href=\"https://guides.rubyonrails.org/i18n.html#configure-the-i18n-module\" rel=\"nofollow noreferrer\">Rails Guides</a></p>\n</blockquote>\n\n<p>If you want to create translations for specific views you should nest the keys instead of just using flat hashes:</p>\n\n<pre><code>en:\n  home:\n    welcome: \"Hello World\"\n\nfr:\n  home:\n    welcome: \"Bonjour le monde\"\n</code></pre>\n\n<p>And then use an implicit lookup in the view:</p>\n\n<pre><code>&lt;h1&gt;&lt;%= t(.welcome) %&gt;&lt;/h1&gt;\n</code></pre>\n\n<p>This resolves the key to <code>home.welcome</code>.</p>\n"}], "owner": {"reputation": 130, "user_id": 12131470, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/--7tJ1PSFeIk/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rct9QyWBDttPChinbbZf7d-dXSgHA/photo.jpg?sz=128", "display_name": "victorfink", "link": "https://stackoverflow.com/users/12131470/victorfink"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1621, "favorite_count": 0, "accepted_answer_id": 58818182, "answer_count": 1, "score": 1, "last_activity_date": 1573559716, "creation_date": 1573552873, "last_edit_date": 1573555676, "question_id": 58816230, "link": "https://stackoverflow.com/questions/58816230/how-to-fix-i18n-always-translate-to-default-locale", "title": "How to fix: i18n always translate to default locale", "body": "<p>I'm trying out the internationalization of a Rails app with i18n. I did some small tests with 2 languages: english and french.</p>\n\n<p>The problem I have is that i18n always translate to the default locale. So if it's english, everything will be in english, and the same with french.</p>\n\n<p>Here is what I tried:</p>\n\n<p><strong>config/initializers/locales.rb</strong></p>\n\n<pre><code># Permitted locales available for the application\nI18n.available_locales = [:en, :fr]\n</code></pre>\n\n<p><strong>app/controllers/application_controller.rb</strong></p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n\n    def default_url_options\n        { locale: I18n.locale }\n    end\n\nend\n</code></pre>\n\n<p><strong>config/application.rb</strong></p>\n\n<pre><code>module LanguageApp\n  class Application &lt; Rails::Application\n    ...\n    config.i18n.load_path += Dir[\"#{Rails.root.to_s}/config/locales/**/*.{rb,yml}\"]\n    config.i18n.default_locale = :en\n    # I change the default locale here to :fr or :en\n  end\nend\n</code></pre>\n\n<p><strong>config/routes.rb</strong></p>\n\n<pre><code>root to: \"home#index\"\n\nget '/:locale/about' =&gt; 'about#index'\nget '/:locale' =&gt; 'home#index'\n</code></pre>\n\n<p>I organized my yml files like this:</p>\n\n<p><strong>config/locales/views/about/en.yml</strong></p>\n\n<pre><code>en:\n  about: \"This page is about us.\"\n</code></pre>\n\n<p><strong>config/locales/views/about/fr.yml</strong></p>\n\n<pre><code>fr:\n  about: \"Cette page est \u00e0 propos de nous.\"\n</code></pre>\n\n<p><strong>config/locales/views/home/en.yml</strong></p>\n\n<pre><code>en:\n  welcome: \"Hello world\"\n</code></pre>\n\n<p><strong>config/locales/views/home/fr.yml</strong></p>\n\n<pre><code>fr:\n  welcome: \"Bonjour le monde\"\n</code></pre>\n\n<p>And finally my views:</p>\n\n<p><strong>app/views/about/index.html.erb</strong></p>\n\n<pre><code>About us page. &lt;%= t(:about) %&gt;\n</code></pre>\n\n<p><strong>app/views/home/index.html.erb</strong></p>\n\n<pre><code>This is the homepage. &lt;%= t(:welcome) %&gt;\n</code></pre>\n\n<p>I think the problem may come from the way I organized my yml files but I don't understand why i18n only translate to the default locale and 'ignore' the other language.</p>\n\n<p>EDIT:</p>\n\n<p>To try this out in the browser with the rails server running, I tried to visit these URL:</p>\n\n<pre><code>localhost:3000\nlocalhost:3000/en\nlocalhost:3000/fr\n</code></pre>\n\n<p>These 3 URL give me the same content, so the :fr locale doesn't actually work (it returns the same translation as :en)</p>\n\n<p>Same for</p>\n\n<pre><code>localhost:3000/en/about\nlocalhost:3000/fr/about\n</code></pre>\n\n<p>I also tried it in the rails console:</p>\n\n<pre><code>&gt; I18n.t(:welcome, :en)\n\"Hello world\"\n&gt; I18n.t(:welcome, :fr)\n\"Hello world\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573553482, "post_id": 58816045, "comment_id": 103910599, "body": "If this method is inside your model them you can call directly the model form tasks,"}, {"owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1573555298, "post_id": 58816045, "comment_id": 103911470, "body": "where do you want to deploy the app? Some cloud hoster provide a &quot;scheduler&quot; or &quot;crontab&quot;. From there you could call a rake-task <a href=\"https://dev.to/vinistock/customizing-rails-rake-tasks-3bg5\" rel=\"nofollow noreferrer\">dev.to/vinistock/customizing-rails-rake-tasks-3bg5</a>"}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "edited": false, "score": 0, "creation_date": 1573556470, "post_id": 58816045, "comment_id": 103912041, "body": "@SimonFranzen Hi i am deploying it on aws but i was testing locally first."}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573556527, "post_id": 58816045, "comment_id": 103912069, "body": "@AbhishekAravindan Hi i have created a script to run in my task in /project/scripts. How can i make database queries in that file."}, {"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573556662, "post_id": 58816045, "comment_id": 103912138, "body": "You should define your task in /lib/tasks/sometask.rake"}, {"owner": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573557041, "post_id": 58816045, "comment_id": 103912340, "body": "You can query database from the rake tasks."}, {"owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "reply_to_user": {"reputation": 1243, "user_id": 10476417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/07b57114718c234f1f44a28f5396026e?s=128&d=identicon&r=PG&f=1", "display_name": "Abhishek Aravindan", "link": "https://stackoverflow.com/users/10476417/abhishek-aravindan"}, "edited": false, "score": 0, "creation_date": 1573557627, "post_id": 58816045, "comment_id": 103912629, "body": "@AbhishekAravindan i have defined my task in /lib/tasks/my_task.rake. I want this task to run a script file defined in project/scripts/script.rb . The script.rb file is the above mentioned file that has database queries. I want to know that can i make database query without importing including models?"}], "answers": [{"comments": [{"owner": {"reputation": 67968, "user_id": 584192, "user_type": "moderator", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/YBSIc.png?s=128&g=1", "display_name": "Samuel Liew", "link": "https://stackoverflow.com/users/584192/samuel-liew"}, "edited": false, "score": 0, "creation_date": 1573643552, "post_id": 58817153, "comment_id": 103946442, "body": "Comments are not for extended discussion; this conversation has been <a href=\"https://chat.stackoverflow.com/rooms/202265/discussion-on-answer-by-cnnr-creating-a-task-in-ruby-on-rails\">moved to chat</a>."}], "tags": [], "owner": {"reputation": 1132, "user_id": 1154044, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b042060fc12ff39b4fbe94dcec7d8598?s=128&d=identicon&r=PG", "display_name": "cnnr", "link": "https://stackoverflow.com/users/1154044/cnnr"}, "is_accepted": false, "score": 0, "last_activity_date": 1573629462, "last_edit_date": 1573629462, "creation_date": 1573555981, "answer_id": 58817153, "question_id": 58816045, "link": "https://stackoverflow.com/questions/58816045/creating-a-task-in-ruby-on-rails/58817153#58817153", "title": "Creating a task in ruby on rails", "body": "<p>If you wish to manage cron tasks from Rails, try <a href=\"https://github.com/javan/whenever\" rel=\"nofollow noreferrer\"><code>whenever</code> gem</a>.</p>\n\n<p>Add it to your Gemfile, </p>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>gem 'whenever', require: false\n</code></pre>\n\n<p>Run initialize task from root of your app</p>\n\n<pre><code>$ bundle exec wheneverize .\n</code></pre>\n\n<blockquote>\n  <p>This will create an initial config/schedule.rb file for you (as long\n  as the config folder is already present in your project)</p>\n</blockquote>\n\n<p>(from the gem docs).</p>\n\n<p>After that in <code>config/schedule.rb</code> set proper parameters of call time. For example</p>\n\n<p><strong>config/schedule.rb</strong></p>\n\n<pre><code>every :hour do # Many shortcuts available: :hour, :day, :month, :year, :reboot\n  runner \"Report.generate_csv\"\nend\n</code></pre>\n\n<p>More syntax options of <code>schedule.rb</code> <a href=\"https://github.com/javan/whenever#example-schedulerb-file\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p><strong>UPDATE AFTER COMMENTS</strong></p>\n\n<p>Hope, you're under Rails context yet. Create file in <code>public</code> folder at application root path.</p>\n\n<pre><code>result_file = \"#{Rails.root}/public/cards-excluded.csv\"\nCSV.open(result_file, 'w') do |csv|\n  row_data.each { |ar| csv &lt;&lt; ar }\nend\n</code></pre>\n\n<p><strong>ANOTHER UPDATE LATER</strong></p>\n\n<p>Okay, although this is not relevant to the original question, let's try to solve your problem. </p>\n\n<p>We'll proceed from what you have Rails application, not custom Ruby library.</p>\n\n<p>First, create module at <code>your_rals_app/lib/reports.rb</code> file</p>\n\n<pre><code>module Reports\n  class Report\n    class &lt;&lt; self\n      def collect_data\n        # your current code and line below, explicit return\n        return row_data\n      end\n\n      def generate_csv\n        row_data = collect_data # btw unnecessary assignment\n        CSV.open('/home/rajdeep/police-api/daily_report.csv', 'w') do |csv|\n          row_data.each { |ar| csv &lt;&lt; ar }\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Second, make sure, that you have lib files at autoload path. Check it in you <code>config/application.rb</code></p>\n\n<pre><code>config.autoload_paths += %W(#{config.root}/lib/*)\n</code></pre>\n\n<p>Thirdly, use <code>Reports</code> module such way (<code>&gt;</code> means that you're at rails console, <code>rails c</code>)</p>\n\n<pre><code>&gt; Reports::Report.generate_csv\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 12360110, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mBmhN8YbXintC2sZLOoCwqI0IPnqeJp-pjvnTXVRg=k-s128", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/12360110/rajdeep-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 407, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1574634740, "creation_date": 1573552301, "last_edit_date": 1574634740, "question_id": 58816045, "link": "https://stackoverflow.com/questions/58816045/creating-a-task-in-ruby-on-rails", "title": "Creating a task in ruby on rails", "body": "<p>I want to create a CRON task for daily report. I need guidance where to create my class in my project (in which folder). How to instantiate an object from rails console for the same class. Will that class inherit application controller? I would also like to know since i will be querying my database so would my models be directly accessible in this file or somehow i have to include them like we do in django?</p>\n\n<p>I have created a class /lib/tasks/daily_report.rb. But i am unable to understand how will i use that file to create a task. </p>\n\n<pre><code>module Reports\n    class Report\n        class &lt;&lt; self\n            def collect_data\n                row_data = []\n                headers = [\"Mobile\", \"Buildings\", \"Owners\", \"Tenants\", \"Members\", \"Total People\"]\n                row_data.push(*headers)\n\n                puts \"in side collect data\"\n                date = Date.today.to_s\n\n                mobile = [\"mobiles\"]\n\n                for i in mobile do\n                    row = []\n                    row &lt;&lt; i\n\n                    build_count   = Buildings.where(created_at: date, added_by: i).count\n                    row &lt;&lt; build_count\n                    puts \"build_count\"\n\n                    owners_count  = Residents.where(created_at: date, added_by: i, role: \"owner\").count\n                    row &lt;&lt; owners_count\n                    puts \"owners_count\"\n                    tenants_count = Residents.where(created_at: date, added_by: i, role: \"tenant\").count\n                    row &lt;&lt; tenants_count\n\n                    members_count = MemeberRelations.where(created_at: date, added_by: i).count\n                    row &lt;&lt;  members_count\n\n                    total_people  = owners_count + tenants_count + members_count\n                    row &lt;&lt; total_people\n\n                    row_data &lt;&lt; row\n                end\n                puts row_data\n                return row_data\n            end\n\n            def generate_csv()\n                puts \"walk away\"\n                row_data = self.collect_data\n                CSV.open('/home/rajdeep/police-api/daily_report.csv', 'w') do |csv|\n                    row_data.each { |ar| csv &lt;&lt; ar }\n                end\n            end\n        end\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "vue.js", "cors", "axios", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 835, "user_id": 1325887, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/5fe8c14c0d29e8c34cfbb3820599d311?s=128&d=identicon&r=PG", "display_name": "Linh Nguyen", "link": "https://stackoverflow.com/users/1325887/linh-nguyen"}, "is_accepted": true, "score": 1, "last_activity_date": 1573556863, "creation_date": 1573556863, "answer_id": 58817415, "question_id": 58815943, "link": "https://stackoverflow.com/questions/58815943/delete-request-with-axios-vue-js/58817415#58817415", "title": "Delete request with axios -Vue.js", "body": "<p>You need something like this to configure Cross Origin Request for your server\n<a href=\"https://github.com/jdesrosiers/sinatra-cors\" rel=\"nofollow noreferrer\">https://github.com/jdesrosiers/sinatra-cors</a> </p>\n\n<p>Also a good article here\n<a href=\"https://medium.com/addval-labs/adding-cors-configuration-to-a-sinatra-app-1ed426e2c028\" rel=\"nofollow noreferrer\">https://medium.com/addval-labs/adding-cors-configuration-to-a-sinatra-app-1ed426e2c028</a></p>\n\n<p><a href=\"https://gist.github.com/karlcoelho/17b908942c0837a2d534\" rel=\"nofollow noreferrer\">https://gist.github.com/karlcoelho/17b908942c0837a2d534</a></p>\n"}], "owner": {"reputation": 33, "user_id": 12331183, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-2FnwfnXJbEI/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rcg8NukTCQpGqp52iqDWqQ2c-IG5Q/photo.jpg?sz=128", "display_name": "Mihai Tirtara", "link": "https://stackoverflow.com/users/12331183/mihai-tirtara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 125, "favorite_count": 1, "accepted_answer_id": 58817415, "answer_count": 1, "score": 1, "last_activity_date": 1573556863, "creation_date": 1573552011, "question_id": 58815943, "link": "https://stackoverflow.com/questions/58815943/delete-request-with-axios-vue-js", "title": "Delete request with axios -Vue.js", "body": "<p>I have a  problem while running the DELETE request in a Vue.js client. This is my code for now I just hardcoded the link in order to try it out.</p>\n\n<pre><code>  deleteCompany(){\n    axios.delete('http://localhost:9292/companies/1')\n    .then(response =&gt;{\n      console.log(response);\n    });\n  }\n</code></pre>\n\n<p>On the backend I have a server built in Ruby with Sinatra and this is the method for DELETE:</p>\n\n<pre><code>#delete a company\ndelete '/companies/:id'do \n  content_type :json\n  company = Company.get params[:id]\n  if company.destroy\n    status 200\n    json'Company was deleted'\n  else\n    status 500\n    json 'There was problem removing the company'\n  end\nend\n</code></pre>\n\n<p>I tried with curl and Postman and it is working but when I try to do it from the client it gives me a CORS error although the other methods such as POST are working:</p>\n\n<pre><code>Cross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:9292/companies/1. (Reason: Did not find method in CORS header \u2018Access-Control-Allow-Methods\u2019).\n\nCross-Origin Request Blocked: The Same Origin Policy disallows reading the remote resource at http://localhost:9292/companies/1. (Reason: CORS request did not succeed).\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1573550588, "post_id": 58815411, "comment_id": 103909022, "body": "Sounds like you&#39;re merely replacing <code>foo_bar(obj)</code> with <code>obj.foo_bar</code>."}, {"owner": {"reputation": 251, "user_id": 2390047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dd37035180e1036a1e33c709c8049c9c?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2390047/rahul"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1573632901, "post_id": 58815411, "comment_id": 103940856, "body": "@Stefan yes and no. <code>obj.foo_bar</code> sort of reads better but another reason is that I need to do it in so many places that having something native by the way of monkey patching makes sense?"}], "answers": [{"tags": [], "owner": {"reputation": 23, "user_id": 12029481, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8f636d5401aab39979f3cddae903a88?s=128&d=identicon&r=PG", "display_name": "thesmiley1", "link": "https://stackoverflow.com/users/12029481/thesmiley1"}, "is_accepted": false, "score": 0, "last_activity_date": 1573553455, "creation_date": 1573553455, "answer_id": 58816394, "question_id": 58815411, "link": "https://stackoverflow.com/questions/58815411/ok-to-monkey-patch-object-class-to-create-custom-data-formatters/58816394#58816394", "title": "Ok to Monkey Patch Object class to create custom data formatters?", "body": "<p>Yes and no.  But mostly no.</p>\n\n<p>As stefan mentions in the comment, \"you're merely replacing foo_bar(obj) with obj.foo_bar\".  I agree that this assessment seems to generally sum up your changes.</p>\n\n<p>This change would be \"okay\" in the sense that there are no obvious reasons for it to problematically change program behavior.</p>\n\n<p>But there is a problem that monkey patching is generally frowned up and regarded as hacky.  A big reason for this is that monkey patching can be done anywhere and it can be difficult to track down if you are not the person who wrote it.  Even worse, it can also be the source of subtle and hard to track down bugs if replacing an existing function (although that is not the case here).</p>\n\n<p>Ruby gives almost unlimited flexibility to programmers, but care must be taken with that flexibility.</p>\n\n<p>On a purely technical level (will it work and keep correct functionality?) the answer is yes.  On a more opinionated level (is this considered good practice?) I would say no - and that would be my advice (don't do it).  In general, best practice is to avoid monkey patching unless there is a very good reason for it.</p>\n"}], "owner": {"reputation": 251, "user_id": 2390047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dd37035180e1036a1e33c709c8049c9c?s=128&d=identicon&r=PG", "display_name": "Rahul", "link": "https://stackoverflow.com/users/2390047/rahul"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573553455, "creation_date": 1573550069, "question_id": 58815411, "link": "https://stackoverflow.com/questions/58815411/ok-to-monkey-patch-object-class-to-create-custom-data-formatters", "title": "Ok to Monkey Patch Object class to create custom data formatters?", "body": "<p>My app has various data formatting rules such as if value == \"-\" then display \"N/A\" or if value == \"NULL\" then display \"N/A\" or if value.is_a? Numeric then value.round(2) and various other such rules. I currently have a helper method that does it as follows</p>\n\n<pre><code>def display_formatted\n case\n  when '.'\n    #...\n end\nend\n</code></pre>\n\n<p>Is it ok to MonkeyPatch the Object class to create a formatter like</p>\n\n<pre><code>class Object\n  def my_app_format\n    case self\n      when is_a?(Numeric)\n       # some rules\n      when \"-\"\n       # some other rule\n      else\n        self\n  end\nend\n</code></pre>\n\n<p>Currently the code is littered with display_formatted(value) in hundreds of places and I want to add different formatters so I can use it as follows and on any data type and in plain Ruby not Rails!</p>\n\n<pre><code>value.as_count_formatted\nvalue.as_default_formatted\nvalue.as_default_rounded`\n</code></pre>\n\n<p>Reason for patching it on the Object class is that the data type is not always known as the source data is not schematic so a field can have numeric or string values.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1573548263, "post_id": 58814750, "comment_id": 103907855, "body": "<i>&quot;weird behavior of a variable&quot;</i> \u2013 <code>a[0]</code> is simply <code>5[0]</code> \u2013 it has nothing to do with variables."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1573551594, "post_id": 58814750, "comment_id": 103909524, "body": "<code>5[0]</code> is called <i>syntactic sugar</i> for <code>5.[](0)</code>. That is, Ruby allows to write the latter as the former. <code>[]</code> may look like an odd name for a method but that\u2019s what it is. Where is the method defined? You can do the following for any method and receiver: <code>5.method(:[]).owner #=&gt; Integer</code>. This tells you that the method\u2019s doc is found at <a href=\"https://ruby-doc.org/core-2.6.3/Integer.html#method-i-5B-5D\" rel=\"nofollow noreferrer\">Integer#&#91;&#93;</a>. Follow this approach to get the doc for any method."}], "answers": [{"tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 10, "last_activity_date": 1573550967, "last_edit_date": 1573550967, "creation_date": 1573547710, "answer_id": 58814802, "question_id": 58814750, "link": "https://stackoverflow.com/questions/58814750/why-a0-is-returning-1-and-a1-returning-0-and-so-on/58814802#58814802", "title": "Why a[0] is returning 1 and a[1] returning 0 and so on?", "body": "<p><a href=\"https://ruby-doc.org/core-2.6.3/Integer.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><code>[]</code></a> for an integer returns a nth bit in the binary representation:</p>\n\n<pre><code>7.downto(0) {|n| print 5[n] }\n00000101=&gt; 8\n</code></pre>\n\n<p><code>5</code> is <code>0101</code> in binary, so <code>5[0]</code> returns <code>1</code> (first from right-hand side, the least significant bit), then <code>5[1]</code> is <code>0</code> a <code>5[2]</code> is <code>1</code>.</p>\n"}], "owner": {"reputation": 71, "user_id": 11205087, "user_type": "registered", "profile_image": "https://graph.facebook.com/901939949837556/picture?type=large", "display_name": "Umesh Kushwaha", "link": "https://stackoverflow.com/users/11205087/umesh-kushwaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 1, "accepted_answer_id": 58814802, "answer_count": 1, "score": 2, "last_activity_date": 1573550967, "creation_date": 1573547465, "last_edit_date": 1573547735, "question_id": 58814750, "link": "https://stackoverflow.com/questions/58814750/why-a0-is-returning-1-and-a1-returning-0-and-so-on", "title": "Why a[0] is returning 1 and a[1] returning 0 and so on?", "body": "<p>I just found a question in a quiz where I noticed this weird behavior of a variable:</p>\n\n<pre><code>a = 5\nputs a[0]  # Output 1\nputs a[1]  # Output 0\n</code></pre>\n\n<p>Can anyone please explain me why I am getting the output 1 and 0?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "answers": [{"comments": [{"owner": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "edited": false, "score": 0, "creation_date": 1573548071, "post_id": 58814400, "comment_id": 103907777, "body": "Having a separate <code>OpeningStock</code> model and a table seems like over engineering. Plus opening_stocks table won&#39;t be much different from stock_entries table. Is there any better way to handle this?"}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "edited": false, "score": 0, "creation_date": 1573548372, "post_id": 58814400, "comment_id": 103907895, "body": "You can do STI in <code>StockEntries</code> and keep there opening stock then. Or even without any inheritance - you can add <code>state</code> to the <code>StockEntry</code> to mark if it&#39;s opening or regular."}, {"owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "reply_to_user": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "edited": false, "score": 0, "creation_date": 1573551008, "post_id": 58814400, "comment_id": 103909248, "body": "Added that to my answer."}], "tags": [], "owner": {"reputation": 21613, "user_id": 580346, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/ba17945a06aac247b06548d5afe341e8?s=128&d=identicon&r=PG", "display_name": "mrzasa", "link": "https://stackoverflow.com/users/580346/mrzasa"}, "is_accepted": true, "score": 3, "last_activity_date": 1573551001, "last_edit_date": 1573551001, "creation_date": 1573545980, "answer_id": 58814400, "question_id": 58814363, "link": "https://stackoverflow.com/questions/58814363/rails-polymorphic-associations-best-practices-to-handle-optional-association/58814400#58814400", "title": "Rails - Polymorphic Associations- Best Practices to handle optional association", "body": "<p>I don't know your business domain, but I'd rather create an <code>OpeningStock</code> model and set <code>stock_logable</code> to it. Setting polymorphic type without id may lead to nasty errors.</p>\n\n<p>You can also do STI in <code>StockEntries</code> and keep there opening stock then. Or even without any inheritance - you can add state to the <code>StockEntry</code> to mark if it's opening or regular.</p>\n"}, {"tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 2, "last_activity_date": 1573551790, "creation_date": 1573551790, "answer_id": 58815876, "question_id": 58814363, "link": "https://stackoverflow.com/questions/58814363/rails-polymorphic-associations-best-practices-to-handle-optional-association/58815876#58815876", "title": "Rails - Polymorphic Associations- Best Practices to handle optional association", "body": "<p>I am guessing you create the <code>StockEntry</code> first, and no \"logable\" (I personally prefer \"loggable\") is available/linked yet, and this is a special <em>state</em> called \"opening stock\", correct? You now seem to use the <code>stock_logable_type</code> to reflect this state. This is either because you also have <code>StockEntry</code> without a <code>stock_logable</code> for a different reason or to make your code/data more self-explanatory?</p>\n\n<p>So if there are other states, I would create an actual state (use an enum or link to a domain table), but otherwise I would just leave the <code>stock_logable</code> unassigned completely, and maybe add a convenience method </p>\n\n<pre><code>  def opening_stock? \n    stock_logable.blank? \n  end \n</code></pre>\n\n<p>to make your code more readable.</p>\n"}], "owner": {"reputation": 761, "user_id": 7786120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3acd54907ef6cb3d7de0ebd91177850d?s=128&d=identicon&r=PG&f=1", "display_name": "Akshay Goyal", "link": "https://stackoverflow.com/users/7786120/akshay-goyal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 194, "favorite_count": 0, "accepted_answer_id": 58814400, "answer_count": 2, "score": 1, "last_activity_date": 1573551790, "creation_date": 1573545778, "last_edit_date": 1573546007, "question_id": 58814363, "link": "https://stackoverflow.com/questions/58814363/rails-polymorphic-associations-best-practices-to-handle-optional-association", "title": "Rails - Polymorphic Associations- Best Practices to handle optional association", "body": "<p>I have a model <code>StockEntry</code> which belongs to a <code>stock_logable</code> for ex: <code>InvoiceItem</code>, <code>ReturnItem</code> etc. My model looks something like this:</p>\n\n<pre><code>belongs_to :stock_logable, polymorphic: true, optional: true\n</code></pre>\n\n<p>Now I need to handle the case of opening stock. This is how i handled it:</p>\n\n<pre><code>id:                  1\nstock_logable_type: \"Opening Stock\",\nstock_logable_id:    nil\nquantity:            10\n</code></pre>\n\n<p>So basically I left the <code>stock_logable_id</code> blank and <code>stock_logable_type</code> a string. I don't have any model such as \"OpeningStock\" in my application.</p>\n\n<p>Even though this works perfectly but i am still unsure whether this is a good way to handle the concerned scenario. Any insights/feedbacks will be helpful. Thanks</p>\n"}, {"tags": ["java", "ruby", "maven", "spring-boot", "scripting"], "comments": [{"owner": {"reputation": 546, "user_id": 8953213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee58368d080dc624baebf79dd63c5f7d?s=128&d=identicon&r=PG&f=1", "display_name": "Ramu", "link": "https://stackoverflow.com/users/8953213/ramu"}, "edited": false, "score": 0, "creation_date": 1573568738, "post_id": 58813745, "comment_id": 103918335, "body": "My suggestion is to do it manually using Maven&#39;s_dependency:analyze_ goal. This goal lists out all declared dependencies which are not used in your project. Once you have that list, you can decide which jar is needed or not needed at runtime and act accordingly."}, {"owner": {"reputation": 132, "user_id": 3220051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8df381da3377ba8c5bfe74733ac4f28?s=128&d=identicon&r=PG&f=1", "display_name": "lakhansoren", "link": "https://stackoverflow.com/users/3220051/lakhansoren"}, "reply_to_user": {"reputation": 546, "user_id": 8953213, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ee58368d080dc624baebf79dd63c5f7d?s=128&d=identicon&r=PG&f=1", "display_name": "Ramu", "link": "https://stackoverflow.com/users/8953213/ramu"}, "edited": false, "score": 0, "creation_date": 1573642139, "post_id": 58813745, "comment_id": 103945665, "body": "@Ramu That is fine , but I was interested in something like this script , where I can sit back and let it do all the work."}], "owner": {"reputation": 132, "user_id": 3220051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d8df381da3377ba8c5bfe74733ac4f28?s=128&d=identicon&r=PG&f=1", "display_name": "lakhansoren", "link": "https://stackoverflow.com/users/3220051/lakhansoren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 38, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573543062, "creation_date": 1573543062, "question_id": 58813745, "link": "https://stackoverflow.com/questions/58813745/script-modifications-to-help-remove-unused-maven-dependencies", "title": "Script modifications to help remove unused maven dependencies", "body": "<p>I recently came across a script <a href=\"https://github.com/siivonen/maven-cleanup\" rel=\"nofollow noreferrer\">https://github.com/siivonen/maven-cleanup</a> . What this script does is it removes a dependency from the <code>pom.xml</code> , and runs a command that you mention ( preferably <code>mvn clean install</code>). And if the build is successful then proceeds on removing the next dependency , or if the build fails then it leaves the dependency untouched. </p>\n\n<p>I have somehow ended up adding a lot of dependencies in my spring-boot application. My spring application consists of three service applications sharing a common service-parent. Each of these three services have their own <code>pom.xml</code> . And the service-parent has its own <code>pom.xml</code> .</p>\n\n<p>I tried running the script at the service-parent level , and it successfully removed many dependencies such that my <code>mvn clean install</code> was not failing. But it removed many run-time dependencies , now I am not able to start any of my spring-application.</p>\n\n<p>What I want to do is  run a command like   <code>./remove-extra-dependencies.rb ~/IdeaProjects/Parent-service/pom.xml 'mvn clean install &amp;&amp; cd Child-Application-1 &amp;&amp; mvn spring-boot:run &amp;&amp; cd ../Child-Application-2 &amp;&amp; mvn spring-boot:run &amp;&amp; cd ../Child-Application-3 &amp;&amp; mvn spring-boot:run'</code> </p>\n\n<p>This will ensure that all removing a dependency doesn't effect any of my application's run-time. But the problem is <code>mvn spring-boot:run</code> starts the server which I cannot (AFAIK) cannot terminate using command without affecting the script's run. </p>\n\n<p>Is it possible to modify the script or run a command to achieve what I want ( the aim is to remove extra dependencies which are not used ). Remember I don't want to meddle with run-time dependencies.</p>\n"}, {"tags": ["ruby-on-rails", "regex", "ruby", "capistrano"], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 12359143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKvnk.jpg?s=128&g=1", "display_name": "mike watawski", "link": "https://stackoverflow.com/users/12359143/mike-watawski"}, "edited": false, "score": 0, "creation_date": 1573544460, "post_id": 58813748, "comment_id": 103906192, "body": "Thank you for your response sir, how about cap command options?  i need to get this -z, --hosts HOSTS"}, {"owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "reply_to_user": {"reputation": 90, "user_id": 12359143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKvnk.jpg?s=128&g=1", "display_name": "mike watawski", "link": "https://stackoverflow.com/users/12359143/mike-watawski"}, "edited": false, "score": 0, "creation_date": 1573549328, "post_id": 58813748, "comment_id": 103908415, "body": "You cannot use flags with Capistrano, you must pass then as arguments. I&#39;m updating my answer in order to cover your example."}], "tags": [], "owner": {"reputation": 2215, "user_id": 1996540, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/609b69cbb09257883a4e32d7d5aff098?s=128&d=identicon&r=PG", "display_name": "ZedTuX", "link": "https://stackoverflow.com/users/1996540/zedtux"}, "is_accepted": false, "score": 1, "last_activity_date": 1573549411, "last_edit_date": 1573549411, "creation_date": 1573543067, "answer_id": 58813748, "question_id": 58812838, "link": "https://stackoverflow.com/questions/58812838/capistrano-getting-commandline-options/58813748#58813748", "title": "Capistrano getting commandline options", "body": "<p>It depends on your version of Capistrano.</p>\n\n<p>In the case you're using the version 3, here is blog article explaining it: <a href=\"https://jtway.co/capistrano-3-passing-parameters-to-your-task-e22cc9f659c3\" rel=\"nofollow noreferrer\">https://jtway.co/capistrano-3-passing-parameters-to-your-task-e22cc9f659c3</a>.</p>\n\n<p>Basically you pass arguments like you would do with rake tasks, so passing them between brackets (<code>[]</code>):</p>\n\n<pre class=\"lang-sh prettyprint-override\"><code>cap staging mynamespace:mytask[argument1,argument2]\n</code></pre>\n\n<p>Then in your task, you can catch them like so:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>namespace : mynamespace do\n  desc 'Description of my task here'\n  task :mytask do |task, args|\n    puts \"Arguments: #{args.inspect}\"\n  end\nend\n</code></pre>\n\n<p>In your example you would have to execute Capistrano that way:</p>\n\n<pre><code>cap staging namespace:task[target_host] \n</code></pre>\n\n<p>First argument would be the target hostname.</p>\n"}, {"tags": [], "owner": {"reputation": 90, "user_id": 12359143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKvnk.jpg?s=128&g=1", "display_name": "mike watawski", "link": "https://stackoverflow.com/users/12359143/mike-watawski"}, "is_accepted": false, "score": 0, "last_activity_date": 1575366663, "creation_date": 1575366663, "answer_id": 59154261, "question_id": 58812838, "link": "https://stackoverflow.com/questions/58812838/capistrano-getting-commandline-options/59154261#59154261", "title": "Capistrano getting commandline options", "body": "<p>Reference:</p>\n\n<p><a href=\"https://stackoverflow.com/a/21446021/12359143\">https://stackoverflow.com/a/21446021/12359143</a>\n<a href=\"https://github.com/capistrano/capistrano/blob/master/lib/capistrano/configuration/host_filter.rb\" rel=\"nofollow noreferrer\">https://github.com/capistrano/capistrano/blob/master/lib/capistrano/configuration/host_filter.rb</a></p>\n\n<pre><code>Capistrano::Configuration::HostFilter.class_eval do\n\n  def filter(servers)\n    Array(servers).select { |s| @rex.match s.to_s }\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 90, "user_id": 12359143, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/HKvnk.jpg?s=128&g=1", "display_name": "mike watawski", "link": "https://stackoverflow.com/users/12359143/mike-watawski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1575366663, "creation_date": 1573538211, "last_edit_date": 1573544815, "question_id": 58812838, "link": "https://stackoverflow.com/questions/58812838/capistrano-getting-commandline-options", "title": "Capistrano getting commandline options", "body": "<p>Is there a way to get the command line option when executing the command task?</p>\n\n<p>for eg. </p>\n\n<pre><code>cap staging namespace:task -z target_host\n</code></pre>\n\n<p>I'll try command-line arguments(ARGV) but length is only 2 that's for [\"staging\", \"namespace:task\"] I want to get -z (--HOST option).</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "coffeescript", "ruby-on-rails-6"], "comments": [{"owner": {"reputation": 98, "user_id": 5316226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PwpJ8.jpg?s=128&g=1", "display_name": "IsolatePy", "link": "https://stackoverflow.com/users/5316226/isolatepy"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1573547018, "post_id": 58812550, "comment_id": 103907302, "body": "[1] pry(#&lt;PortfoliosController&gt;)&gt; continue {&quot;0&quot;=&gt;{&quot;position&quot;=&gt;&quot;1&quot;}, &quot;1&quot;=&gt;{&quot;position&quot;=&gt;&quot;2&quot;}, &quot;2&quot;=&gt;{&quot;position&quot;=&gt;&quot;3&quot;}, &quot;3&quot;=&gt;{&quot;position&quot;=&gt;&quot;4&quot;}, &quot;4&quot;=&gt;{&quot;position&quot;=&gt;&quot;5&quot;}, &quot;5&quot;=&gt;{&quot;position&quot;=&gt;&quot;6&quot;}, &quot;6&quot;=&gt;{&quot;position&quot;=&gt;&quot;7&quot;}, &quot;7&quot;=&gt;{&quot;position&quot;=&gt;&quot;8&quot;}, &quot;8&quot;=&gt;{&quot;position&quot;=&gt;&quot;9&quot;}, &quot;9&quot;=&gt;{&quot;position&quot;=&gt;&quot;10&quot;}, &quot;10&quot;=&gt;{&quot;position&quot;=&gt;&quot;11&quot;}, &quot;11&quot;=&gt;{&quot;position&quot;=&gt;&quot;12&quot;}, &quot;12&quot;=&gt;{&quot;position&quot;=&gt;&quot;13&quot;}, &quot;13&quot;=&gt;{&quot;position&quot;=&gt;&quot;14&quot;}, &quot;14&quot;=&gt;{&quot;position&quot;=&gt;&quot;15&quot;}, &quot;15&quot;=&gt;{&quot;position&quot;=&gt;&quot;16&quot;}, &quot;16&quot;=&gt;{&quot;position&quot;=&gt;&quot;17&quot;}, &quot;17&quot;=&gt;{&quot;position&quot;=&gt;&quot;18&quot;}}"}, {"owner": {"reputation": 98, "user_id": 5316226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PwpJ8.jpg?s=128&g=1", "display_name": "IsolatePy", "link": "https://stackoverflow.com/users/5316226/isolatepy"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1573547138, "post_id": 58812550, "comment_id": 103907362, "body": "Completed 404 Not Found in 6967ms (ActiveRecord: 2.1ms | Allocations: 12437)    ActiveRecord::RecordNotFound (Couldn&#39;t find Portfolio without an ID):    app/controllers/portfolios_controller.rb:19:in <code>block in sort&#39; app&#47;controllers&#47;portfolios_controller.rb:18:in </code>sort&#39;"}, {"owner": {"reputation": 98, "user_id": 5316226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PwpJ8.jpg?s=128&g=1", "display_name": "IsolatePy", "link": "https://stackoverflow.com/users/5316226/isolatepy"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1573589226, "post_id": 58812550, "comment_id": 103928475, "body": "The each of position , I&#39;ve sent that in first comment"}, {"owner": {"reputation": 98, "user_id": 5316226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PwpJ8.jpg?s=128&g=1", "display_name": "IsolatePy", "link": "https://stackoverflow.com/users/5316226/isolatepy"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1574194700, "post_id": 58812550, "comment_id": 104142734, "body": "if I change find to where then value[:id] have value and update all position but when I refresh the page the order will back to normal <code>ActiveRecord::RecordNotFound (Couldn&#39;t find Portfolio without an ID):    app&#47;controllers&#47;portfolios_controller.rb:18:in </code>block in sort` app/controllers/portfolios_controller.rb:17:in <code>sort</code>"}], "owner": {"reputation": 98, "user_id": 5316226, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/PwpJ8.jpg?s=128&g=1", "display_name": "IsolatePy", "link": "https://stackoverflow.com/users/5316226/isolatepy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 468, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573536482, "creation_date": 1573536482, "question_id": 58812550, "link": "https://stackoverflow.com/questions/58812550/rails-6-sortable", "title": "Rails 6 - Sortable", "body": "<p>I have a problem with HTML sortable update in rails 6 \nI want to drag and drop the images through web page and that is worked fine but, When I want to update the order I got 404 not found error in console log and also an error in find ID.\nby the way, I use this script for HTML sortable\n<a href=\"https://github.com/jordanhudgens/devcamp-portfolio/blob/master/app/assets/javascripts/html.sortable.js\" rel=\"nofollow noreferrer\">https://github.com/jordanhudgens/devcamp-portfolio/blob/master/app/assets/javascripts/html.sortable.js</a></p>\n\n<p>Controller :</p>\n\n<pre><code>class PortfoliosController &lt; ApplicationController\n  before_action :set_portfolio_item, only:[:edit , :show, :update , :destroy]\n  layout \"portfolio\"\n  access all: [:show, :index , :angular], user: {except: [:destroy, :new , :create , :update , :edit , :sort]}, site_admin: :all\n    def index\n        # You can filter what you want to show in protfolio\n        # Portfolio.where(subtitle: \"Angular\")\n        # You can define it in models and call the method here\n        # It must create on Portfolio.rb in models\n        # You can create scope too on models and call\n        @portfolio_items = Portfolio.by_position\n    end\n    def angular\n      @angular_portfolio_items = Portfolio.angular\n    end\n    def sort\n      params[:order].each do |key, value|\n        Portfolio.find(value[:id]).update(position: value[:position])\n      end\n      head :ok\n    end\n    def new\n      @portfolio_item = Portfolio.new\n      3.times { @portfolio_item.technologies.build }\n    end\n    def create\n      @portfolio_item = Portfolio.new(portfolio_params)\n        respond_to do |format|\n        if @portfolio_item.save\n          format.html { redirect_to portfolios_path, notice: 'Portfolio was successfully created.' }\n        else\n          format.html { render :new }\n        end\n      end\n      end\n    def edit\n    end\n    def update\n      respond_to do |format|\n        if @portfolio_item.update(portfolio_params)\n          format.html { redirect_to portfolios_path, notice: 'The record was successfully updated.' }\n        else\n          format.html { render :edit }\n        end\n      end\n    end\n    def show\n    end\n    def destroy\n      # Perform the lookup\n      # Destroy/delete the record\n      @portfolio_item.destroy\n      #Redirect\n      respond_to do |format|\n      format.html { redirect_to portfolios_url, notice: 'Portfolio was successfully deleted!.' }\n    end\n  end\n    private\n    def portfolio_params\n      params.require(:portfolio)\n    end\n    def set_portfolio_item\n      @portfolio_item = Portfolio.find(params[:id])\n    end\n    end\n</code></pre>\n\n<p>This is my routes.rb</p>\n\n<pre><code>Rails.application.routes.draw do\n  devise_for :users, path: '', path_names: { sign_in: 'login', sign_out: 'logout', sign_up: 'register' }\n  resources :portfolios, except: [:show] do\n    put :sort, on: :collection\n  end\n  get 'portfolio/:id' , to: 'portfolios#show', as: 'portfolio_show'\n  get 'angular-items' , to: 'portfolios#angular'\n  # we can pass anything here after get\n  get 'about', to: 'pages#about'\n  get 'contact', to: 'pages#contact'\n  resources :blogs do\n    member do\n      get :toggle_status\n    end\n  end\n  resources :posts\n  root to: 'pages#home'\n  # For details on the DSL available within this file, see https://guides.rubyonrails.org/routing.html\nend\n</code></pre>\n\n<p>This is my CoffeeScript for HTML sortable</p>\n\n<pre><code>ready = undefined\nset_positions = undefined\n\nset_positions = -&gt;\n  $('.card').each (i) -&gt;\n    $(this).attr 'data-pos', i + 1\n    return\n  return\n\nready = -&gt;\n  set_positions()\n  $('.sortable').sortable()\n  $('.sortable').sortable().bind 'sortupdate', (e, ui) -&gt;\n    updated_order = []\n    set_positions()\n    $('.card').each (i) -&gt;\n      updated_order.push\n        id: $(this).data('id')\n        position: i + 1\n      return\n    $.ajax\n      type: 'PUT'\n      url: '/portfolios/sort'\n      data: order: updated_order\n    return\n  return\n\n$(document).ready ready\n</code></pre>\n\n<p>Thanks for your helps!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "image", "base64", "httparty"], "answers": [{"tags": [], "owner": {"reputation": 624, "user_id": 7188109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f0d98756028ef12c8cdbf8d89a2a259?s=128&d=identicon&r=PG", "display_name": "Pawe\u0142 D\u0105browski", "link": "https://stackoverflow.com/users/7188109/pawe%c5%82-d%c4%85browski"}, "is_accepted": true, "score": 2, "last_activity_date": 1573562313, "creation_date": 1573562313, "answer_id": 58818934, "question_id": 58812500, "link": "https://stackoverflow.com/questions/58812500/httparty-response-get-image-and-convert-bytes-to-base64-image-data-url/58818934#58818934", "title": "HTTParty response: GET image and convert bytes to base64 image data url", "body": "<p>Use <code>Base64.strict_encode64(img)</code> instead of <code>encode64(img)</code></p>\n"}], "owner": {"reputation": 523, "user_id": 8980988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/37b92727f9c9f58bb720a08be26e3d3a?s=128&d=identicon&r=PG&f=1", "display_name": "danielsmith1789", "link": "https://stackoverflow.com/users/8980988/danielsmith1789"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 220, "favorite_count": 0, "accepted_answer_id": 58818934, "answer_count": 1, "score": 0, "last_activity_date": 1573578051, "creation_date": 1573536135, "last_edit_date": 1573578051, "question_id": 58812500, "link": "https://stackoverflow.com/questions/58812500/httparty-response-get-image-and-convert-bytes-to-base64-image-data-url", "title": "HTTParty response: GET image and convert bytes to base64 image data url", "body": "<p>I am trying to download an image, and then return a base64 data url.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>img = HTTParty.get('https://via.placeholder.com/150')\n=&gt; \"\\x89PNG\\r\\n\\x1A\\n\\x00\\x00\\x00...\"\n\nbase64_img = Base64.encode64(img)\n=&gt; \"iVBORw0KGgoAAAANSUhEUgAAAJYAAACWBAMAAADOL2zRAAA...\"\n\ndata_url = \"data:image/png;base64,\" + base64_img\n=&gt; \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJYAAA...\"\n</code></pre>\n\n<p>When I paste that image into my browser it <em>should</em> render. Yet it is not valid. What am I doing wrong, any insight would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1066, "user_id": 6204421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0yeJN.jpg?s=128&g=1", "display_name": "Santosh Aryal", "link": "https://stackoverflow.com/users/6204421/santosh-aryal"}, "edited": false, "score": 0, "creation_date": 1573545184, "post_id": 58812488, "comment_id": 103906496, "body": "You can use the select tag like this. select_tag &quot;destination&quot;, raw(&#39;&lt;option value = &quot;AF&quot;&gt;Africa&lt;/option&gt;&lt;option value = &quot;NA&quot;&gt;North America&lt;/option&gt;&lt;option value=&quot;OC&quot;&gt;Oceania&lt;/option&gt;&#39;), :prompt =&gt; &quot;Select&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 2347, "user_id": 1625253, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/iBQwX.jpg?s=128&g=1", "display_name": "Simon Franzen", "link": "https://stackoverflow.com/users/1625253/simon-franzen"}, "is_accepted": false, "score": 0, "last_activity_date": 1573552827, "last_edit_date": 1573552827, "creation_date": 1573552382, "answer_id": 58816077, "question_id": 58812488, "link": "https://stackoverflow.com/questions/58812488/setting-a-select-tag-on-ruby-on-rails/58816077#58816077", "title": "setting a select tag on Ruby on Rails", "body": "<p><a href=\"https://apidock.com/rails/ActionView/Helpers/FormOptionsHelper/select\" rel=\"nofollow noreferrer\">FormOptionsHelper</a>`s select takes these args</p>\n\n<pre><code>select(object, method, choices = nil, options = {}, html_options = {}, &amp;block)\n</code></pre>\n\n<p>Try explicit putting options like this:</p>\n\n<pre><code>select :post, :country, [[\"Japan\",\"JP\"],[\"China\",\"CH\"]], { :prompt =&gt; \"Select\" }, { other_html_options }\n</code></pre>\n\n<p>If you are in a form context make this</p>\n\n<pre><code>&lt;%= form_tag(\"/posts/create\") do |form| %&gt;\n  &lt;%= form.select :country, [[\"Japan\",\"JP\"],[\"China\",\"CH\"]], { :prompt =&gt; \"Select\" }, { other_html_options } %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1573557010, "creation_date": 1573557010, "answer_id": 58817469, "question_id": 58812488, "link": "https://stackoverflow.com/questions/58812488/setting-a-select-tag-on-ruby-on-rails/58817469#58817469", "title": "setting a select tag on Ruby on Rails", "body": "<p>First start off by creating the correct routes:</p>\n\n<pre><code>resources :posts\n</code></pre>\n\n<p>In Rails you create a resource by sending a POST request to the collection path ('/posts').</p>\n\n<p>Then create the form with <code>form_for(@post)</code> or <code>form_with(model: @post)</code> (Rails 5.1+) and bind the model instance to the form builder.</p>\n\n<pre><code>&lt;%= form_for(@post) do |f| %&gt;\n  &lt;div class=\"form\"&gt;\n    &lt;div class=\"form-body\"&gt;\n      &lt;% f.object.errors.full_messages.each do |message| %&gt;\n        &lt;div class=\"form-error\"&gt;\n          &lt;%= message %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n      &lt;div class=\"continent\"&gt;\n        &lt;%= f.label :continent do %&gt;\n          &lt;%= f.select :continent,\n            [[\"Africa\",\"AF\"],[\"North America\",\"NA\"],[\"Oceania\",\"OC\"],[\"Asia\",\"AS\"],[\"Europe\",\"EU\"],[\"South America\",\"SA\"]],\n            prompt: \"Select\" %&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"country\"&gt;\n        &lt;%= f.label :country do %&gt;\n          &lt;%= f.select :country,\n            [[\"Japan\",\"JP\"],[\"China\",\"CH\"]],\n            :prompt =&gt; \"Select\" %&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"title\"&gt;\n        &lt;%= f.label :title do %&gt;\n        &lt;%= f.text_area_field :title %&gt;\n      &lt;/div&gt;\n      &lt;%= f.submit %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This lets you reuse the same form for updating the resource. Also when you use the input helpers rails will properly name the inputs so that you can whitelist them with:</p>\n\n<pre><code>params.require(:post).permit(:continent, :country, :title)\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12336226, "user_type": "registered", "profile_image": "https://graph.facebook.com/2477979879112513/picture?type=large", "display_name": "curlyhair33", "link": "https://stackoverflow.com/users/12336226/curlyhair33"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1573557010, "creation_date": 1573536071, "last_edit_date": 1573541080, "question_id": 58812488, "link": "https://stackoverflow.com/questions/58812488/setting-a-select-tag-on-ruby-on-rails", "title": "setting a select tag on Ruby on Rails", "body": "<pre><code>&lt;%= form_tag(\"/posts/create\") do %&gt;\n  &lt;div class=\"form\"&gt;\n    &lt;div class=\"form-body\"&gt;\n      &lt;% @post.errors.full_messages.each do |message| %&gt;\n        &lt;div class=\"form-error\"&gt;\n          &lt;%= message %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n\n      &lt;div class=\"continent\"&gt;\n        &lt;label&gt;continent&lt;br&gt;\n          &lt;%= @post.continent %&gt;\n          &lt;%= select :continent,\n            [[\"Africa\",\"AF\"],[\"North America\",\"NA\"],[\"Oceania\",\"OC\"],[\"Asia\",\"AS\"],[\"Europe\",\"EU\"],[\"South America\",\"SA\"]],\n            :prompt =&gt; \"Select\" %&gt;\n        &lt;/label&gt;\n      &lt;/div&gt;\n      &lt;div class=\"country\"&gt;\n        &lt;label&gt;country&lt;br&gt;\n          &lt;%= @post.country %&gt;\n          &lt;%= select :country,\n            [[\"Japan\",\"JP\"],[\"China\",\"CH\"]],\n            :prompt =&gt; \"Select\" %&gt;\n        &lt;/label&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"title\"&gt;\n        &lt;label&gt;title&lt;br&gt;\n        &lt;textarea name=\"title\"&gt;&lt;%= @post.title %&gt;&lt;/textarea&gt;\n        &lt;/label&gt;\n      &lt;/div&gt;\n      &lt;input type=\"submit\" value=\"POST\"&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>I want to set a select tag for choosing user's continent and country in the form<br>\nBut It doesn't work well<br></p>\n\n<p>I've tried some way to solve this problem. <br>\nAnd I just got the shape which is like <strong>\"Select tag\"</strong> but it's only included <strong>\"prompt\"</strong> <br>\nPlease give me some advice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cocoon-gem"], "comments": [{"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1573531623, "post_id": 58811341, "comment_id": 103902610, "body": "The error shows some code that&#39;s not on the code you are showing (line 65 on the error is not the same on your contract_term_fees partial)."}, {"owner": {"reputation": 97, "user_id": 12132223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d771bc90c127ff051746fe96cb03607f?s=128&d=identicon&r=PG&f=1", "display_name": "dw4050", "link": "https://stackoverflow.com/users/12132223/dw4050"}, "reply_to_user": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1573556949, "post_id": 58811341, "comment_id": 103912288, "body": "My apologies, I was exhausted last night."}, {"owner": {"reputation": 13378, "user_id": 1430810, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/v669u.jpg?s=128&g=1", "display_name": "arieljuod", "link": "https://stackoverflow.com/users/1430810/arieljuod"}, "edited": false, "score": 0, "creation_date": 1573562406, "post_id": 58811341, "comment_id": 103915168, "body": "I&#39;m not sure if this is the problem, but you are missing the <code>:</code> here <code>&lt;%= f.simple_fields_for contract_term_fees do |ff| %&gt;</code>, <code>:contract_terms_fees</code>"}], "answers": [{"comments": [{"owner": {"reputation": 97, "user_id": 12132223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d771bc90c127ff051746fe96cb03607f?s=128&d=identicon&r=PG&f=1", "display_name": "dw4050", "link": "https://stackoverflow.com/users/12132223/dw4050"}, "edited": false, "score": 0, "creation_date": 1574092114, "post_id": 58833293, "comment_id": 104097934, "body": "The provider form id wasn&#39;t being saved..I simply put it in a hidden field"}, {"owner": {"reputation": 97, "user_id": 12132223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d771bc90c127ff051746fe96cb03607f?s=128&d=identicon&r=PG&f=1", "display_name": "dw4050", "link": "https://stackoverflow.com/users/12132223/dw4050"}, "edited": false, "score": 0, "creation_date": 1574092162, "post_id": 58833293, "comment_id": 104097970, "body": "Thanks! - I&#39;ll use inverse_of from now on"}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": false, "score": 0, "last_activity_date": 1573634883, "creation_date": 1573634883, "answer_id": 58833293, "question_id": 58811341, "link": "https://stackoverflow.com/questions/58811341/receiving-undefined-method-reflect-on-association-for-nilclassclass-cocoon-ra/58833293#58833293", "title": "Receiving undefined method `reflect_on_association&#39; for NilClass:Class Cocoon Rails 6", "body": "<p>In general when this error occurs, it means that either an <code>accepts_nested_attributes_for</code> is missing, or that somewhere we hand in a nil object. </p>\n\n<p>From the code you show, either </p>\n\n<ul>\n<li>the <code>accepts_nested_attributes_for :contract_terms</code> is missing in <code>Contract</code> ? </li>\n<li>the <code>f.simple_fields_for contract_term_fees</code> is a typo and should read <code>f.simple_fields_for :contract_term_fees</code> (<code>contract_term_fees</code> is obviously nil) </li>\n</ul>\n\n<p>Note in Rails 6 as in Rails 5, you will also have to declare the <code>inverse_of:</code> of a relation to make sure the nested relations will save correctly (as a <code>belongs_to</code> is by default required, and without the <code>inverse_of</code> rails has no way of knowing it was provided).</p>\n\n<p>So </p>\n\n<pre><code>  belongs_to :provider_contract, inverse_of: :contract_terms  \n</code></pre>\n"}], "owner": {"reputation": 97, "user_id": 12132223, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d771bc90c127ff051746fe96cb03607f?s=128&d=identicon&r=PG&f=1", "display_name": "dw4050", "link": "https://stackoverflow.com/users/12132223/dw4050"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 250, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1573634883, "creation_date": 1573527420, "last_edit_date": 1573556932, "question_id": 58811341, "link": "https://stackoverflow.com/questions/58811341/receiving-undefined-method-reflect-on-association-for-nilclassclass-cocoon-ra", "title": "Receiving undefined method `reflect_on_association&#39; for NilClass:Class Cocoon Rails 6", "body": "<p>I'm currently using a double nested partial to add child records to a deeply nested form. The form inputs show, but the <strong>link_to_add_association</strong> button throws an exception. How can I reach the child form input with my link_to_add_association button?</p>\n\n<p><strong>providers_controller.rb</strong></p>\n\n<pre><code>class ProviderContractsController &lt; ApplicationController\n  before_action :set_provider_contract, only: %i[show edit update destroy]\n\ndef new\n    @provider_contract = ProviderForm.find(params[:provider_form_id])\n    @provider_contract = ProviderContract.new(provider_form_id: @provider.id)\n    @provider_contract.build_contract_term\n    @provider_contract.contract_term.contract_term_fees.build\n\n\n  rescue ActiveRecord::RecordNotFound\n    redirect_to home_path, notice: 'The provider has been removed or has not been selected'\n  end\n\n  private\n\n  # Use callbacks to share common setup or constraints between actions.\n  def set_provider_contract\n    @provider_contract = ProviderContract.find(params[:id])\n  end\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def provider_contract_params\n    params.require(:provider_contract).permit(ProviderContract.attribute_names.map(&amp;:to_sym),\n\n                                              contract_term_attributes: ContractTerm.attribute_names.map(&amp;:to_sym).push( contract_term_fees_attributes: ContractTermFee.attribute_names.map(&amp;:to_sym).push(:id, :_destroy))\n  end\nend\n</code></pre>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code> &lt;%= simple_form_for(@provider_contract, html: { class: \"ui form\"}) do |f| %&gt;\n    &lt;%= f.error_notification %&gt;\n    &lt;%= f.error_notification message: f.object.errors[:base].to_sentence if f.object.errors[:base].present? %&gt;\n\n  &lt;div class=\"ui tab\" data-tab=\"stage-4\"&gt;\n      &lt;%= f.simple_fields_for :contract_term do |ct| %&gt;\n        &lt;%= render 'provider_contracts/partials/contract_term', f: ct %&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>_contract_term.html.erb</strong> </p>\n\n<pre><code>&lt;div id=\"#term_fees\"&gt;\n    &lt;%= f.simple_fields_for contract_term_fees do |ff| %&gt;\n      &lt;%= render 'provider_contracts/contract_term_fee_fields', f: ff %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"pt-2 pb-2 links\"&gt;\n    &lt;%= link_to_add_association f, :contract_term_fees, class: 'ui positive basic button' do %&gt;\n      Add Fees\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p><strong>contract_term.rb</strong></p>\n\n<pre><code>class ContractTerm &lt; ApplicationRecord\n  belongs_to :provider_contract\n  has_many :contract_term_fees, dependent: :destroy\n\n\n  accepts_nested_attributes_for :contract_term_fees, reject_if: :all_blank, allow_destroy: true\nend\n</code></pre>\n\n<p><strong>Server Logs</strong></p>\n\n<pre><code>ActionView::Template::Error (undefined method `reflect_on_association' for NilClass:Class):\n    62:     &lt;% end %&gt;\n    63:   &lt;/div&gt;\n    64:   &lt;div class=\"pt-2 links\"&gt;\n    65:     &lt;%= link_to_add_association  f, :contract_term_fees, class: 'ui secondary basic button' do %&gt;\n    66:       Add Fees\n    67:     &lt;% end %&gt;\n    68:   &lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments", "spreedly"], "answers": [{"tags": [], "owner": {"reputation": 19272, "user_id": 1606729, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/SZetZ.png?s=128&g=1", "display_name": "koopajah", "link": "https://stackoverflow.com/users/1606729/koopajah"}, "is_accepted": true, "score": 0, "last_activity_date": 1573513111, "creation_date": 1573513111, "answer_id": 58809756, "question_id": 58809445, "link": "https://stackoverflow.com/questions/58809445/how-to-migrate-spreedly-data-to-stripe/58809756#58809756", "title": "How to migrate Spreedly data to stripe?", "body": "<p>If you want to export all your cards from Spreedly to Stripe, the best solution is likely to contact them directly. They have a team that can export card details to other processors like Stripe without you having to write code or handling sensitive data. Stripe would then be able to import all customers and cards in your Stripe account which they document here: <a href=\"https://stripe.com/docs/security/data-migrations/imports\" rel=\"nofollow noreferrer\">https://stripe.com/docs/security/data-migrations/imports</a></p>\n\n<p>Another approach would be to use Spreedly's API. This is something they document here: <a href=\"https://docs.spreedly.com/guides/exporting/#performing-the-export\" rel=\"nofollow noreferrer\">https://docs.spreedly.com/guides/exporting/#performing-the-export</a></p>\n"}], "owner": {"reputation": 3, "user_id": 4833252, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-su0dIEVDidY/AAAAAAAAAAI/AAAAAAAAABs/EL3TLZsm4N8/photo.jpg?sz=128", "display_name": "Luis Osnet", "link": "https://stackoverflow.com/users/4833252/luis-osnet"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 58809756, "answer_count": 1, "score": 0, "last_activity_date": 1573513111, "creation_date": 1573510839, "question_id": 58809445, "link": "https://stackoverflow.com/questions/58809445/how-to-migrate-spreedly-data-to-stripe", "title": "How to migrate Spreedly data to stripe?", "body": "<p>I try to export spreedly data like credit cards and customers to stripe but I'm not sure what data i need to use to create a stripe token. I'm using ruby on rails, this is an example of the retriaved data from the spreedly api</p>\n\n<p>Someone know what data I need to use to generate the stripe token?</p>\n\n<pre><code>{  \n  customer=&gt;{  \n    :email=&gt; \"example@gmail.com\",\n    :token=&gt; \"SsEFMRoEInyZvZasdfasdJHG78\",\n    :credit_card=&gt;{  \n      :address_city=&gt; \"Distrito Federal\",\n      :address_line1=&gt; \"Colima 436 int 104\",\n      :address_state=&gt; \"DIF\",\n      :address_zip=&gt; \"06700\",\n      :country=&gt; \"MX\",\n      :cvc_check=&gt; \"\",\n      :exp_month=&gt; \"11\",\n      :exp_year=&gt; \"2019\",\n      :fingerprint=&gt; \"d80c788asdfasdJHG780511a2f67dc2F83\",\n      :last4=&gt; \"1111\",\n      :name=&gt; \"User\",\n      :tokenization_method=&gt; \"S780511a2f67dc2F83tsic788as\"\n      }\n   }\n}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubocop"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1573512108, "post_id": 58809319, "comment_id": 103898727, "body": "So you&#39;re asking how to write your own extension? <a href=\"https://www.rubocop.org/en/stable/extensions/\" rel=\"nofollow noreferrer\">rubocop.org/en/stable/extensions</a>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1573549917, "post_id": 58811294, "comment_id": 103908686, "body": "<code>CustomerCache</code> probably has to call the original method(s). How would that work using your proposed solutions?"}, {"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1573552267, "post_id": 58811294, "comment_id": 103909884, "body": "@Stefan Good point. First (horrible) solution that comes to mind would be to rename the original method and have <code>CustomerCache</code> call that. Alternative would be to have a conditional flag on the delegating method (eg. <code>cache: false</code> which controls whether the call goes through <code>CustomerCache</code>. Consider whether <code>CustomerCache</code> is a first class concept of its own (respect <code>Customer</code> restrictions and load records through SQL or otherwise) or an implementation detail within <code>Customer</code> (in which case <code>Customer</code> is free to choose any internal implementation which preserves the public interface)."}], "tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 1, "last_activity_date": 1573526998, "creation_date": 1573526998, "answer_id": 58811294, "question_id": 58809319, "link": "https://stackoverflow.com/questions/58809319/is-there-a-way-to-deny-a-custom-expression-from-being-written-using-rubocop/58811294#58811294", "title": "Is there a way to deny a custom expression from being written using Rubocop?", "body": "<p>Rubocop is a good tool to indicate Ruby programming patterns that should be followed or avoided. This particular use case does not belong in the Rubocop layer IMO as it is not a Ruby programming pattern, and is tied to your particular implementation.</p>\n\n<p>A couple of patterns you can use to handle this:</p>\n\n<ol>\n<li>Add a deprecation warning any time somebody calls the method</li>\n</ol>\n\n<pre><code>class Customer &lt; ApplicationRecord\n  def find_by_id(*args)\n    ActiveSupport::Deprecation.warn \"Customers should be retrieved through CustomerCache\"\n    super\n  end\nend  \n</code></pre>\n\n<ol start=\"2\">\n<li>Delegate the method call to the object which should be handling it</li>\n</ol>\n\n<pre><code>class Customer &lt; ApplicationRecord\n  def find_by_id(*args)\n    CustomerCache.find_by_id(*args)\n  end\nend  \n</code></pre>\n\n<p>Can also consider removing the method altogether.</p>\n"}], "owner": {"reputation": 11, "user_id": 2320236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fcdeb314230d56c2b986a38c1992b891?s=128&d=identicon&r=PG", "display_name": "Daniel Meneses", "link": "https://stackoverflow.com/users/2320236/daniel-meneses"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573526998, "creation_date": 1573509919, "question_id": 58809319, "link": "https://stackoverflow.com/questions/58809319/is-there-a-way-to-deny-a-custom-expression-from-being-written-using-rubocop", "title": "Is there a way to deny a custom expression from being written using Rubocop?", "body": "<p>I'm trying to install a cache layer, this cache layer should be preferred to certain Rails Model Methods like <code>find_by_id</code>.</p>\n\n<p>I want to use Rubocop to make sure newcomers won't write <code>find_by_id</code> using q model, for example: don't write <code>Customer.find_by_id</code> and instead be forced to use <code>CustomerCache.find_by_id</code></p>\n\n<p>Can I do it Rubocop? I'm fairly new to ruby and rails, and all it's ecosystem</p>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise"], "comments": [{"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "edited": false, "score": 1, "creation_date": 1573507327, "post_id": 58808841, "comment_id": 103897084, "body": "There&#39;s a missing <code>(</code> in the if statement."}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 1, "creation_date": 1573507357, "post_id": 58808841, "comment_id": 103897096, "body": "You are checking <code>@users.all</code> against a single value <code>123.example@gmail.com</code>.  So at least you would need to use something like <code>includes?()</code> but don&#39;t you really need to validate this <code>before_save</code> on every attempt to sign up?  So perhaps a before save method that checks the email put in would work better?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1573509739, "post_id": 58808841, "comment_id": 103897998, "body": "Take a look here:: <a href=\"https://github.com/plataformatec/devise/wiki/How-to:-Use-a-custom-email-validator-with-Devise\" rel=\"nofollow noreferrer\">github.com/plataformatec/devise/wiki/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 0, "creation_date": 1573510801, "post_id": 58809215, "comment_id": 103898345, "body": "Thank you for such a thorough answer. I added the case statement to the registrations controller, but my app is still letting any email I enter in the webpage form register. Any ideas? Thanks."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1573512519, "post_id": 58809215, "comment_id": 103898834, "body": "Haven&#39;t read the full answer, but that create method seems awfully complex for simply whitelisting a few email addresses."}, {"owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 0, "creation_date": 1573513479, "post_id": 58809215, "comment_id": 103899102, "body": "It&#39;s true that below you can do a validation that would likely be simpler logic in the Model. The reason I included an override to Devise is due to the fact that later on, as your app grows (if it does) you may want to add more and more logic to overriding Devise via Controller, one reason Devise is a pain."}, {"owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "edited": false, "score": 0, "creation_date": 1573513859, "post_id": 58809215, "comment_id": 103899200, "body": "Using Cannon&#39;s logic below, add a line <code>return true</code> after the errors.add and see if that changes anything."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1573514016, "post_id": 58809215, "comment_id": 103899235, "body": "This answer is not very relevant to the original question."}], "tags": [], "owner": {"reputation": 111, "user_id": 8257082, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOqmS.jpg?s=128&g=1", "display_name": "Twistedben", "link": "https://stackoverflow.com/users/8257082/twistedben"}, "is_accepted": false, "score": -1, "last_activity_date": 1573509334, "creation_date": 1573509334, "answer_id": 58809215, "question_id": 58808841, "link": "https://stackoverflow.com/questions/58808841/how-can-i-configure-my-app-to-allow-only-specific-emails-to-register-with-devise/58809215#58809215", "title": "How can I configure my app to allow only specific emails to register with devise?", "body": "<p>Sarah,</p>\n\n<p>The first step that I'd take in accomplishing this would be to work inside devise's registrations_controller. This is the controller where the signed up user will be served to and here you will want to over-write some of the Devise code. \nEnsure the controllers are created first by running Devise's controller generator:</p>\n\n<pre><code>rails generate devise:controllers users\n</code></pre>\n\n<p>Then you'll want to find the user's <code>registrations_controller.rb</code> and override the code in there under the create action. \nHere's an example of some code I wrote to override Devise's admin controller: </p>\n\n<pre><code>def create\n    build_resource(sign_up_params)\n    # Below - If admin is coming from an email invite or shared invite link, grabs both token and workplace id from params.\n    @token = params[:invite_token] if params[:invite_token]\n    @workplace_id = params[:workplace_id] if params[:workplace_id]\n    @workplace = Workplace.find(params[:workplace_id]) if params[:workplace_id] # Finds the workplace from the workplace_id, works for both invite email and shared link.\n    @institute = @workplace.institute if params[:workplace_id]\n    if @institute &amp;&amp; @institute.has_super_admins?\n      resource.super_admin = false\n    end \n\n    if resource.save\n      yield resource if block_given?\n      if resource.persisted?\n        if resource.active_for_authentication?\n          # Below - If admin came from a shared workpalce invite link or email workplace invite\n          if @token != nil # Admin signed up via a workplace invite email or the shared link\n            # Below - Checks Payment plan for admins joining an institute to make sure the institute didn't exceed user count subscription permission.\n            unless @institute.plan.unlimited_users? \n              if @institute.plan.user_count &lt;= @institute.admins.count # Admin doesn't join workplace since institute has excited user allowance\n                set_flash_message! :alert, :signed_up_no_workplace, :workplace =&gt; @workplace.name, :institute =&gt; @institute.name, :workplace_owner =&gt; @institute.subscription.admin.name\n                sign_up(resource_name, resource)\n                respond_with resource, location: institute_admin_path(resource.institute, resource)\n              else # Admin successfully signs up and joins the workplace. Method is below in protected\n                join_workplace_and_redirect\n              end \n            else # Admin successfully signs up and joins the workplace. Method is below in protected\n              join_workplace_and_redirect\n            end\n          else # Fresh admin signup\n            sign_up(resource_name, resource)\n            if resource.super_admin? # Checks if the admin is a super_admin and set as true, if so redirects to another page\n              set_flash_message! :notice, :super_admin_signed_up, :name =&gt; resource.first_name\n              respond_with resource, location: new_institute_path()\n            else # Admin is not a super_admin and not first one who signed up inside a city. \n              set_flash_message! :notice, :admin_signed_up, :link =&gt; edit_institute_admin_path(resource.institute, resource), :city =&gt; resource.institute.name\n              respond_with resource, location: after_sign_up_path_for(resource)\n            end \n          end\n        else\n          set_flash_message! :notice, :\"signed_up_but_#{resource.inactive_message}\"\n          expire_data_after_sign_in!\n          respond_with resource, location: after_inactive_sign_up_path_for(resource)\n        end\n      else\n        flash[:alert] = \"Your profile could not be created. See why below!\"\n        set_flash_message! :alert, :\"signed_up_but_#{resource.inactive_message}\"\n        redirect_to request.referrer\n      end\n    else  # Failed to save\n      clean_up_passwords resource\n      respond_with resource, location: new_admin_registration_path(workplace: @workplace)\n    end\n  end\n</code></pre>\n\n<p>To apply it to your case, what you may want to do is use a case statement to see if the email matches ones you want it to. For example, below you'll want to check the <code>resource</code> (the single user in this case, the user who is signing up) email attribute to determine whether it's a success or failure: </p>\n\n<pre><code># Checks emails that are allowed\ncase resource.email \nwhen \"123.example@gmail.com\" \n  if resource.save # Success\n    set_flash_message! :notice, :signup_succeed\n    respond_with resource, location: home_page(resource)\n  else # For some reason the allowed email didn't go through due to other validations\n    set_flash_message! :alert, :signup_failure\n    respond_with resource, location: new_user_path(resource)\n  end \nelse # Entered an email that is not allowed\n  set_flash_message! :alert, :email_invalid\n  respond_with resource, location: new_user_path(resource)\nend\n</code></pre>\n\n<p>The <code>set_flash_message!</code> is Devises custom messages which can be edited in <code>config/locales/devise.en.yaml</code>. The second keyword refers to the name of the yaml key, and you can customize the error or success message in there. <code>respond_with</code> is the redirection and location. You can use as many <code>when</code> statements as needed. This is just one way to do it. \nHope this helps.</p>\n"}, {"comments": [{"owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 0, "creation_date": 1573512694, "post_id": 58809572, "comment_id": 103898885, "body": "Thank you for your response. I added the code you suggested to my user model and it worked for my first email address. I have three total addresses that I want to authorize. When I added those addresses to the &#39;if&#39; condition and then went through the sign up form on my app,  I get this error: &quot;undefined method `includes?&#39; for &quot;example.abc@gmail.com&quot;:String Did you mean? include?&quot; .. If I make it &#39;include?&#39; then I get the argument error &quot;expecting 3, given 1."}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 0, "creation_date": 1573512814, "post_id": 58809572, "comment_id": 103898922, "body": "I fixed my answer but the includes? function needs to be renamed to include?"}, {"owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 0, "creation_date": 1573512911, "post_id": 58809572, "comment_id": 103898944, "body": "still getting &quot;wrong number of arguments (given 3, expected 1)&quot;. I do have commas between the three strings, should I remove those?"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 0, "creation_date": 1573513179, "post_id": 58809572, "comment_id": 103899018, "body": "I updated my answer so that you can use an <code>array</code> to white-list your email addresses."}, {"owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 0, "creation_date": 1573513584, "post_id": 58809572, "comment_id": 103899126, "body": "Now the app is letting me register any email I enter through the form on the webpage.  I&#39;ll keep at it and see what I can figure out. Thanks for your help though!"}, {"owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "reply_to_user": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 0, "creation_date": 1573514169, "post_id": 58809572, "comment_id": 103899280, "body": "Make sure your <code>create</code> function is <code>create!</code>. Also make sure you don&#39;t have a <code>!</code> in the if statement."}], "tags": [], "owner": {"reputation": 2960, "user_id": 7426461, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/Ldwxy.jpg?s=128&g=1", "display_name": "Cannon Moyer", "link": "https://stackoverflow.com/users/7426461/cannon-moyer"}, "is_accepted": false, "score": 2, "last_activity_date": 1573513127, "last_edit_date": 1573513127, "creation_date": 1573511675, "answer_id": 58809572, "question_id": 58808841, "link": "https://stackoverflow.com/questions/58808841/how-can-i-configure-my-app-to-allow-only-specific-emails-to-register-with-devise/58809572#58809572", "title": "How can I configure my app to allow only specific emails to register with devise?", "body": "<p>The easiest way to accomplish this would be to create a custom validation like you did originally. In your user model you could create a validation that looks something like this:</p>\n\n<pre><code>validate :is_email_valid?\n\n\ndef is_email_valid\n    if [\"example@gmail.com\", \"example@yahoo.com\", \"123.example@gmail.com\"].include?(self.email)\n        errors.add :base, \"Your email is not authorized for use!\"\n    end\nend\n</code></pre>\n\n<p>This code will work when saving or creating a new record. </p>\n\n<p>The problem with your code is that you are attempting to validate on a <code>ActiveRecord_Relation</code> object which cannot directly access validations for class instances. It's like trying to call an instance method from a class level; you have to validate one user at a time. You will want to execute validations on your object instance with a reference to <code>self</code>. So, looping through your users and then validating would work. Here is an example:</p>\n\n<pre><code>User.all.each do |i|\n\n    if i.valid?\n        puts \"VALID\"\n    else\n        puts \"INVALID\"\n    end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1573514260, "post_id": 58809814, "comment_id": 103899302, "body": "You can use a regular array if you don&#39;t like the <a href=\"https://ruby-doc.org/core-2.6.5/doc/syntax/literals_rdoc.html#label-Percent+Strings\" rel=\"nofollow noreferrer\"><code>%w[...]</code></a> notation, or somehow have spaces inside your email addresses."}, {"owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 0, "creation_date": 1573514475, "post_id": 58809814, "comment_id": 103899356, "body": "Thank you! Your first chunk of code worked! I checked each of my email addresses along with invalid ones and it was a success! Also thank you to everyone else who offered help! I really appreciate it!"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "edited": false, "score": 0, "creation_date": 1573514590, "post_id": 58809814, "comment_id": 103899388, "body": "@SarahHumphreys Note that validation is only triggered when updating or creating new records. If you&#39;ve already users in your database you can flush unwanted uses with a migration. <code>User.where.not(email: User::ALLOWED_EMAILS).delete_all</code> (or <code>destroy_all</code> if you need to trigger callbacks)."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 2, "last_activity_date": 1573514831, "last_edit_date": 1573514831, "creation_date": 1573513608, "answer_id": 58809814, "question_id": 58808841, "link": "https://stackoverflow.com/questions/58808841/how-can-i-configure-my-app-to-allow-only-specific-emails-to-register-with-devise/58809814#58809814", "title": "How can I configure my app to allow only specific emails to register with devise?", "body": "<p>To allow only users with certain email addresses you could simply add an <a href=\"https://guides.rubyonrails.org/active_record_validations.html#inclusion\" rel=\"nofollow noreferrer\"><em>inclusion</em></a> validation.</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  ALLOWED_EMAILS = %w[\n    123.example@gmail.com\n    456.example@gmail.com\n    789.example@gmail.com\n  ].freeze\n\n  validates :email, inclusion: { in: ALLOWED_EMAILS, message: :invalid }\n\n  # ...\nend\n</code></pre>\n\n<p>You could also opt to load the <code>ALLOWED_EMAILS</code> from the settings or a file.</p>\n\n<hr>\n\n<p>To <a href=\"https://guides.rubyonrails.org/configuring.html#custom-configuration\" rel=\"nofollow noreferrer\">load from the Rails config</a> you have to define the email addresses in a config file.</p>\n\n<pre><code>config.allowed_user_emails = %w[\n  123.example@gmail.com\n  456.example@gmail.com\n  789.example@gmail.com\n]\n</code></pre>\n\n<p>Then load them in the controller using:</p>\n\n<pre><code>ALLOWED_EMAILS = Rails.configuration.allowed_user_emails.freeze\n</code></pre>\n\n<hr>\n\n<p>To <a href=\"https://stackoverflow.com/questions/3877004/how-do-i-parse-a-yaml-file\">load from for example a yaml file</a> you could do something like:</p>\n\n<pre><code>ALLOWED_EMAILS = YAML.load_file(Rails.root.join('config', 'allowed_user_emails.yml')).freeze\n</code></pre>\n\n<p>Having the following in the file:</p>\n\n<pre><code>- 123.example@gmail.com\n- 456.example@gmail.com\n- 789.example@gmail.com\n</code></pre>\n"}], "owner": {"reputation": 19, "user_id": 11161751, "user_type": "registered", "profile_image": "https://graph.facebook.com/2148488921864046/picture?type=large", "display_name": "Sarah", "link": "https://stackoverflow.com/users/11161751/sarah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 58809814, "answer_count": 3, "score": 0, "last_activity_date": 1573514831, "creation_date": 1573507160, "question_id": 58808841, "link": "https://stackoverflow.com/questions/58808841/how-can-i-configure-my-app-to-allow-only-specific-emails-to-register-with-devise", "title": "How can I configure my app to allow only specific emails to register with devise?", "body": "<p>I'm setting up a CRUD feature and I only want a few people (entire email addresses) to be able to register through devise.</p>\n\n<p>I've gone through countless posts but they mostly use email domains or single person login. I've also tried creating my own validation method in my User.rb but I can't seem to get it.</p>\n\n<pre><code>validate :check_email\n\n  private\n\n  def check_email\n    @users = User.all\n\n    if @users == '123.example@gmail.com')\n        events_path\n    else\n        errors.add(:email, 'is not authorized')\n    end\n  end\n</code></pre>\n\n<p>I don't get an explicit error but the app seems to skip my 'if' condition and outputs the 'else' condition.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 4, "last_activity_date": 1573502530, "creation_date": 1573502530, "answer_id": 58807950, "question_id": 58807871, "link": "https://stackoverflow.com/questions/58807871/if-active-record-object-has-attribute-and-is-unique/58807950#58807950", "title": "If active record object has attribute and is unique", "body": "<p>You can use <code>after_commit</code>:</p>\n\n<pre><code>after_commit :do_foo, on: :create\n\nprivate\n\ndef do_foo\n  return if Model.exists?(token: token)\n\n  do_what_you_have_to_do\nend\n</code></pre>\n\n<p>The method checks if there's already a record with the same token, if so it returns from the method itself. Otherwise you can proceed to do what you need.</p>\n"}], "owner": {"reputation": 725, "user_id": 9774506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Falko", "link": "https://stackoverflow.com/users/9774506/falko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 58807950, "answer_count": 1, "score": 2, "last_activity_date": 1573502530, "creation_date": 1573502144, "question_id": 58807871, "link": "https://stackoverflow.com/questions/58807871/if-active-record-object-has-attribute-and-is-unique", "title": "If active record object has attribute and is unique", "body": "<p>I would like to add a callback to a rails model that checks if the attribute exits and then checks if it is unique.</p>\n\n<p>The attribute is a token that maybe shared either across lots of active record objects, for a single object, or can be nil.</p>\n\n<p>For each of these tokens I would like to carry out an action only once and not for each of the active record objects that have the token.</p>\n\n<p>for example:</p>\n\n<p>I create a new record with the token: </p>\n\n<pre><code>thing.create(token = \"abc\")\n</code></pre>\n\n<p>This would be the first time an object has been created with the token \"abc\". so I would take action (in this case start a sidekiq worker)</p>\n\n<p>Next I add a second record with the same token:</p>\n\n<pre><code>thing.create(token = \"abc\")\n</code></pre>\n\n<p>This would be the second time this token is used so I would not take action.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573500671, "post_id": 58807314, "comment_id": 103894565, "body": "1. You are missing an <code>end</code> at the end. 2. I don&#39;t know rails but as <code>params</code> is not passed to the method as an argument it would not seem to be visible within the method. 3. It would appear that <code>list.all.each do |article| ... end</code> could be simplified to <code>@is_valid = list.any? { |article| article.id == id }</code>. 4. You don&#39;t need to define <code>@is_valid</code> if it&#39;s not needed outside the method; just write <code>Article.all.any? { |article| article.id == id }</code> after you&#39;ve obtained <code>id</code>."}, {"owner": {"reputation": 23, "user_id": 12357235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c67b684c9c9c22b0a85c0b5be1f6f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Aurelle", "link": "https://stackoverflow.com/users/12357235/aurelle"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573501910, "post_id": 58807314, "comment_id": 103895007, "body": "I&#39;ll try it too, thank you for your help !"}, {"owner": {"reputation": 1721, "user_id": 949539, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/ce7a197db8da5fb89db0126c43a9084b?s=128&d=identicon&r=PG", "display_name": "tiktak", "link": "https://stackoverflow.com/users/949539/tiktak"}, "edited": false, "score": 0, "creation_date": 1573503223, "post_id": 58807314, "comment_id": 103895500, "body": "Hi! <code>is_valid</code> (local variable) is not the same as <code>@is_valid</code> (controller instance variable). Also <code>params[:id]</code> may be String but article.id is Integer."}, {"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1573508121, "post_id": 58807314, "comment_id": 103897379, "body": "@CarySwoveland for #2 in your comment above, in rails <code>params</code> is a method that comes from the controller base class and returns a memoized hash-like object (of class <code>ActionController::Parameters</code>) containing all query string and POST parameters. Not super relevant here, but knowledge for knowledge sake."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 12357235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c67b684c9c9c22b0a85c0b5be1f6f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Aurelle", "link": "https://stackoverflow.com/users/12357235/aurelle"}, "edited": false, "score": 0, "creation_date": 1573501856, "post_id": 58807463, "comment_id": 103894983, "body": "You just answered to everything and more than I expected. To use exists? methods is 100% easier, but I didn&#39;t know it so far. Thank you really much."}, {"owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "reply_to_user": {"reputation": 23, "user_id": 12357235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c67b684c9c9c22b0a85c0b5be1f6f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Aurelle", "link": "https://stackoverflow.com/users/12357235/aurelle"}, "edited": false, "score": 0, "creation_date": 1573517925, "post_id": 58807463, "comment_id": 103900134, "body": "ActiveRecord its the part of the models in rails (for me the best part of rails) you can find a lot of methods there that will make your code better :)"}], "tags": [], "owner": {"reputation": 2560, "user_id": 5112122, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206053108358704/picture?type=large", "display_name": "Horacio", "link": "https://stackoverflow.com/users/5112122/horacio"}, "is_accepted": true, "score": 4, "last_activity_date": 1573501101, "last_edit_date": 1573501101, "creation_date": 1573500322, "answer_id": 58807463, "question_id": 58807314, "link": "https://stackoverflow.com/questions/58807314/ruby-on-rails-beginner-question-equality/58807463#58807463", "title": "Ruby on Rails beginner question : equality", "body": "<p>Maybe its because params[:id] it's a string and article.id it's an Integer</p>\n\n<pre><code>(byebug) params\n{\"controller\"=&gt;\"admin/my_controller\", \"action\"=&gt;\"edit\", \"id\"=&gt;\"1\"}\n</code></pre>\n\n<p>And yes it is... \"id\" is a string \"1\", so you may try this:</p>\n\n<pre><code>\ndef show\n id = params[:id].to_i\n list = Article.all\n is_valid = false \n\n  list.all.each do |article|\n    if article.id == id\n      @is_valid = true\n        break\n      end\n   end\nend\n</code></pre>\n\n<p>And maybe could work. </p>\n\n<p>This is the answer to your question, \nBut if you want to learn a little more about Activerecord you can do this</p>\n\n<pre><code>Article.exists?(params[:id])\n</code></pre>\n\n<p>and that will do what you are trying to do just with a query against db.</p>\n\n<p>and if you want to get just a simple article</p>\n\n<pre><code>record = Article.find_by(id: params[:id]) #return nil when not exist\nif record # if nil will threat like false on ruby\n#my code when exist\nelse\n#my code when not exist\nend\n</code></pre>\n\n<p>will work (you also can use find but find will throw an exception ActiveRecord::RecordNotFound when not exists so you have to catch that exception.</p>\n\n<p>Activerecord has many ways to check this you dont need to do it by hand.</p>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1573516806, "creation_date": 1573516806, "answer_id": 58810218, "question_id": 58807314, "link": "https://stackoverflow.com/questions/58807314/ruby-on-rails-beginner-question-equality/58810218#58810218", "title": "Ruby on Rails beginner question : equality", "body": "<pre><code>def show \n  @article = Article.find(params[:id])\nend\n</code></pre>\n\n<p>This will create a database query which returns a single row. <code>.find</code> raises a <code>ActiveRecord::NotFound</code> exception if the record is not found. Rails catches this error and shows a 404 page. <code>Article.find_by(id: params[:id])</code> is the \"safe\" alternative that does not raise.</p>\n\n<p>Your code is problematic since <code>list = Article.all</code> will load all the records out of the database which is slow and will exhaust the memory on the server if you have enough articles. Its the least effective way possible to solve the task.</p>\n\n<p>If you want to just test for existence use <code>.exists?</code> or <code>.any?</code>. This creates a <code>COUNT</code> query instead of selecting the rows.</p>\n\n<pre><code>Article.where(title: 'Hello World').exists?\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 12357235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c67b684c9c9c22b0a85c0b5be1f6f1b?s=128&d=identicon&r=PG&f=1", "display_name": "Aurelle", "link": "https://stackoverflow.com/users/12357235/aurelle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 58807463, "answer_count": 2, "score": 0, "last_activity_date": 1573516806, "creation_date": 1573499503, "question_id": 58807314, "link": "https://stackoverflow.com/questions/58807314/ruby-on-rails-beginner-question-equality", "title": "Ruby on Rails beginner question : equality", "body": "<p>I'm starting to know ROR and I was doing a kind of blog with articles, etc...\nI did this code :</p>\n\n<pre><code>def show\n id = params[:id]\n list = Article.all\n is_valid = false\n\nlist.all.each do |article|\n  if article.id == id\n    @is_valid = true\n    break\n  end\nend\n</code></pre>\n\n<p>As you can see, this code just wants to check if the article ID exists or not. So I'm testing equality between id and article.id (which's a model linked to the appropriated table in the database) BUT when I try to use or display @is_valid boolean I saw that article.id == id is FALSE every time, even if article.id = 2 and id = 2. I tried to think about everything that can make this occuring, but I admit I still misunderstand this.</p>\n\n<p>Then I ask you if you know why this is occuring. Of course, an equality like 2 == 2 will change @is_valid to true. </p>\n\n<p>Thank you for your help !</p>\n"}, {"tags": ["ruby", "rest-client"], "comments": [{"owner": {"reputation": 841, "user_id": 12294425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dxWNY.jpg?s=128&g=1", "display_name": "calebkm", "link": "https://stackoverflow.com/users/12294425/calebkm"}, "edited": false, "score": 0, "creation_date": 1573487528, "post_id": 58804432, "comment_id": 103889004, "body": "I know you&#39;re on Ubuntu and not OSX, but this thread might be useful for you: <a href=\"https://github.com/rvm/rvm/issues/3995\" rel=\"nofollow noreferrer\">github.com/rvm/rvm/issues/3995</a>"}], "answers": [{"comments": [{"owner": {"reputation": 2883, "user_id": 1521627, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Lf9w1.jpg?s=128&g=1", "display_name": "Tuan", "link": "https://stackoverflow.com/users/1521627/tuan"}, "edited": false, "score": 3, "creation_date": 1573569122, "post_id": 58805574, "comment_id": 103918544, "body": "need to remove <code>&#47;usr&#47;local&#47;bin&#47;make</code> also"}], "tags": [], "owner": {"reputation": 1919, "user_id": 384689, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a66498e80512ef50822cceb2a2f5cba3?s=128&d=identicon&r=PG", "display_name": "claasz", "link": "https://stackoverflow.com/users/384689/claasz"}, "is_accepted": true, "score": 1, "last_activity_date": 1573491251, "creation_date": 1573491251, "answer_id": 58805574, "question_id": 58804432, "link": "https://stackoverflow.com/questions/58804432/undefined-local-variable-or-method-make-for-mainobject-nameerror/58805574#58805574", "title": "undefined local variable or method `make&#39; for main:Object (NameError)", "body": "<p>Usually,</p>\n\n<pre><code>sudo apt-get install build-essential\n</code></pre>\n\n<p>should work.</p>\n"}], "owner": {"reputation": 2883, "user_id": 1521627, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/Lf9w1.jpg?s=128&g=1", "display_name": "Tuan", "link": "https://stackoverflow.com/users/1521627/tuan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 469, "favorite_count": 0, "accepted_answer_id": 58805574, "answer_count": 1, "score": 0, "last_activity_date": 1573491251, "creation_date": 1573486819, "question_id": 58804432, "link": "https://stackoverflow.com/questions/58804432/undefined-local-variable-or-method-make-for-mainobject-nameerror", "title": "undefined local variable or method `make&#39; for main:Object (NameError)", "body": "<p>I got below error on Ubuntu 18 when trying to install rest-client <code>sudo gem install rest-client</code>:\n</p>\n\n<pre><code>current directory: /var/lib/gems/2.5.0/gems/unf_ext-0.0.7.6/ext/unf_ext\n/usr/bin/ruby2.5 -r ./siteconf20191111-4360-816cyg.rb extconf.rb\nchecking for -lstdc++... no\ncreating Makefile\n\ncurrent directory: /var/lib/gems/2.5.0/gems/unf_ext-0.0.7.6/ext/unf_ext\nmake \"DESTDIR=\" clean\n/var/lib/gems/2.5.0/gems/make-0.3.1/bin/make:4:in `&lt;top (required)&gt;': undefined local variable or method `make' for main:Object (NameError)\n    from /usr/local/bin/make:23:in `load'\n    from /usr/local/bin/make:23:in `&lt;main&gt;'\n\ncurrent directory: /var/lib/gems/2.5.0/gems/unf_ext-0.0.7.6/ext/unf_ext\nmake \"DESTDIR=\"\n/var/lib/gems/2.5.0/gems/make-0.3.1/bin/make:4:in `&lt;top (required)&gt;': undefined local variable or method `make' for main:Object (NameError)\n    from /usr/local/bin/make:23:in `load'\n    from /usr/local/bin/make:23:in `&lt;main&gt;'\n\nmake failed, exit code 1\n</code></pre>\n\n<p>Tried installing <code>gcc</code>, <code>ruby-dev</code>, <code>make</code> but it didn't help!<br>\nAnyone could help me?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 12158301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hbud4.jpg?s=128&g=1", "display_name": "Ayaka Moronaga", "link": "https://stackoverflow.com/users/12158301/ayaka-moronaga"}, "edited": false, "score": 2, "creation_date": 1573519027, "post_id": 58804718, "comment_id": 103900323, "body": "I chenged [ _form.html.erb ] before &lt;%= f.fields_for :bird_condition do |condition| %&gt; after &lt;%= f.fields_for :bird_conditions do |condition| %&gt;  I have solved the problem. thank you very much!!"}, {"owner": {"reputation": 841, "user_id": 12294425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dxWNY.jpg?s=128&g=1", "display_name": "calebkm", "link": "https://stackoverflow.com/users/12294425/calebkm"}, "reply_to_user": {"reputation": 25, "user_id": 12158301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hbud4.jpg?s=128&g=1", "display_name": "Ayaka Moronaga", "link": "https://stackoverflow.com/users/12158301/ayaka-moronaga"}, "edited": false, "score": 0, "creation_date": 1573574057, "post_id": 58804718, "comment_id": 103921341, "body": "I&#39;m so glad you got it working @AyakaMoronaga! If this answer helped, please use the green checkmark to mark it as the correct answer!"}], "tags": [], "owner": {"reputation": 841, "user_id": 12294425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dxWNY.jpg?s=128&g=1", "display_name": "calebkm", "link": "https://stackoverflow.com/users/12294425/calebkm"}, "is_accepted": true, "score": 1, "last_activity_date": 1573574160, "last_edit_date": 1573574160, "creation_date": 1573487939, "answer_id": 58804718, "question_id": 58804250, "link": "https://stackoverflow.com/questions/58804250/when-using-accepts-nested-attributes-for-to-save-two-models-the-following-error/58804718#58804718", "title": "when using accepts_nested_attributes_for to save two models the following error [Unpermitted parameter:] shows", "body": "<p>In your form you have <code>:bird_condition</code> but in your <code>params</code> you have <code>bird_conditions_attributes</code> ... you just need to adjust the params  in your controller:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>def bird_params\n  params\n    .require(:bird)\n    .permit(\n      :name,\n      ...\n      bird_conditions: [ # Use `bird_conditions` here.\n        :id,\n        ...\n     ]\n   )\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 12158301, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hbud4.jpg?s=128&g=1", "display_name": "Ayaka Moronaga", "link": "https://stackoverflow.com/users/12158301/ayaka-moronaga"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 58804718, "answer_count": 1, "score": 1, "last_activity_date": 1573574160, "creation_date": 1573486126, "last_edit_date": 1573486519, "question_id": 58804250, "link": "https://stackoverflow.com/questions/58804250/when-using-accepts-nested-attributes-for-to-save-two-models-the-following-error", "title": "when using accepts_nested_attributes_for to save two models the following error [Unpermitted parameter:] shows", "body": "<p>I linked the following two tables.\nI want to send the written data from the form to two different tables and  save it.\nBut I can't save too the child table.</p>\n\n<p>I'm a beginner and I tried for two days.but I don't know.\nCan you please help me?</p>\n\n<p><strong>bird table</strong></p>\n\n<ul>\n<li>id </li>\n<li>name</li>\n<li>breed</li>\n<li>sex ...</li>\n</ul>\n\n<p><strong>bird_condition table</strong></p>\n\n<ul>\n<li>id</li>\n<li>ave_weight</li>\n<li>body_shape</li>\n<li>...\n(bigint \"bird_id\")</li>\n</ul>\n\n<p><hr>\nVersion Rails 6.0.0</p>\n\n<hr>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#app/models/bird.rb\nclass Bird &lt; ApplicationRecord\n    has_many :bird_conditions, dependent: :destroy\n    accepts_nested_attributes_for :bird_conditions, allow_destroy: true :reject_bird_condition\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#app/models/bird_condition.rb\n    belongs_to :bird, optional: true\nend\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#app/controllers/birds_controller.rb\nclass BirdsController &lt; ApplicationController\n  before_action :set_bird,only: [:edit, :update, :destroy]\n  before_action :authenticate_user!\n  before_action :correct_user,only: [:edit, :destroy]\n\n  def index\n    @birds = current_user.birds.order(created_at: :desc)\n  end\n\n  def new\n    @bird = Bird.new\n    @bird.bird_conditions.build\n  end\n\n  def edit\n  end\n\n  def update\n    @bird.update!(bird_params)\n    redirect_to birds_path,notice: \"upload\"\n  end\n\n  def create\n    @bird = current_user.birds.new(bird_params)\n    if @bird.save\n        logger.debug \"bird: #{@bird.attributes.inspect}\"\n        redirect_to birds_path, notice: \"create\"\n    else\n        render :new\n    end\n  end\n\n  def destroy\n    @bird.destroy\n    redirect_to birds_path,notice: \"delete\"\n  end\n\n  private\n\n    def set_bird\n      @bird = current_user.birds.find(params[:id])\n    end\n\n    def correct_user\n      @bird = current_user.birds.find_by(id: params[:id])\n      redirect_to birds_path if @bird.nil?\n    end\n\n    def bird_params\n        params\n        .require(:bird)\n        .permit(\n          :name,\n          :breed_id,\n          :sex,\n          :birthday,\n          :personality,\n          :appeareance,\n          :srarus_flg,\n          :lost_day,\n          :lost_place,\n          :day_of_death,\n          :image,\n          bird_conditions_attributes:[\n            :id,\n            :ave_weight,\n            :body_shape,\n            :hospital,\n            :medical_history,\n            :medication,\n            :insurance,\n            :estrous_behavior,\n            :estrous_personality,\n            :bird_id\n          ]\n        )\n    end\nend\n\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#app/views/birds/_form.html.erb\n&lt;div class=\"container\"&gt;\n    &lt;%= form_with model: bird, local: true do |f| %&gt;\n            &lt;table class=\"table-bordered\"&gt;\n                &lt;div class=\"form-group\"&gt;\n                    &lt;tr&gt;\n                        &lt;th&gt;&lt;%= f.label :name %&gt;&lt;/th&gt;\n                        &lt;td&gt;&lt;%= f.text_field :name %&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n                    &lt;tr&gt;\n                        &lt;th&gt;&lt;%= f.label :breed %&gt;&lt;/th&gt;\n                        &lt;td&gt;&lt;%= f.collection_select :breed_id, Breed.all, :id, :name, include_brank: 'select' %&gt;&lt;/td&gt;\n                    &lt;/tr&gt;\n\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301cabbreviation\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\u301c\n                        &lt;%= f.fields_for :bird_condition do |condition| %&gt; \n                            &lt;%= render partial: 'form_condition', locals:{condition: condition}%&gt;\n                        &lt;% end %&gt;\n                &lt;/div&gt;&lt;!-- .form-group --&gt;\n            &lt;/table&gt;&lt;br&gt;\n                &lt;%= f.submit nil, class: 'btn btn-primary'%&gt;\n    &lt;% end %&gt;\n&lt;/div&gt;&lt;!-- .container --&gt;\n</code></pre>\n\n<pre class=\"lang-rb prettyprint-override\"><code>#app/views/birds/_form_condition.html.erb\n                &lt;div class=\"form-group\"&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;&lt;%= condition.label :ave_weight %&gt;&lt;/th&gt;\n                            &lt;td&gt;&lt;%= condition.number_field :ave_weight %&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;&lt;%= condition.label :body_shape %&gt;&lt;/th&gt;\n                            &lt;td&gt;\n                            &lt;%= condition.radio_button :body_shape, :medium %&gt;\n                            &lt;%= condition.label :body_shape, :\u666e\u901a%&gt;\n                            &lt;%= condition.radio_button :body_shape, :slim%&gt;\n                            &lt;%= condition.label :body_shape, :\u75e9\u305b\u304e\u307f%&gt;\n                            &lt;%= condition.radio_button :body_shape, :bony%&gt;\n                            &lt;%= condition.label :body_shape, :\u75e9\u305b%&gt;\n                            &lt;%= condition.radio_button :body_shape, :chubby%&gt;\n                            &lt;%= condition.label :body_shape, :\u592a\u308a\u304e\u307f%&gt;\n                            &lt;%= condition.radio_button :body_shape, :fat%&gt;\n                            &lt;%= condition.label :body_shape, :\u80a5\u6e80%&gt;\n                            &lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;&lt;%= condition.label :hospital %&gt;&lt;/th&gt;\n                            &lt;td&gt;&lt;%= condition.text_field :hospital %&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;&lt;%= condition.label :medical_history %&gt;&lt;/th&gt;\n                            &lt;td&gt;&lt;%= condition.text_field :medical_history %&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;&lt;%= condition.label :medication %&gt;&lt;/th&gt;\n                            &lt;td&gt;&lt;%= condition.text_field :medication %&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;&lt;%= condition.label :insurance %&gt;&lt;/th&gt;\n                            &lt;td&gt;&lt;%= condition.text_field :insurance %&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;&lt;%= condition.label :estrous_behavior %&gt;&lt;/th&gt;\n                            &lt;td&gt;&lt;%= condition.text_field :estrous_behavior %&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                        &lt;tr&gt;\n                            &lt;th&gt;&lt;%= condition.label :estrous_personality %&gt;&lt;/th&gt;\n                            &lt;td&gt;&lt;%= condition.text_field :estrous_personality %&gt;&lt;/td&gt;\n                        &lt;/tr&gt;\n                &lt;/div&gt;&lt;!-- .form-group --&gt;\n</code></pre>\n\n<pre><code>#error\uff08log\uff09\nUnpermitted parameter: :bird_condition\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1573495217, "post_id": 58803977, "comment_id": 103892514, "body": "You&#39;ve got a typo in the array code block. I don&#39;t believe your intention is <code>Book.all = [Book1,Book2]</code>. Shouldn&#39;t that be <code>myArray = [Book1, Book2]</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 5, "last_activity_date": 1573488845, "last_edit_date": 1573488845, "creation_date": 1573486000, "answer_id": 58804213, "question_id": 58803977, "link": "https://stackoverflow.com/questions/58803977/difference-between-class-book-all-and-an-array-of-books/58804213#58804213", "title": "Difference between class Book.all and an array of books", "body": "<p><em>The question is how can I get the same result with an array</em>:</p>\n\n<pre><code>Book.where(id: [Book1, Book2]).class\n#  Book::ActiveRecord_Relation\n</code></pre>\n\n<p>The thing is, how you define <code>to_csv</code>. If it's at a class level (meaning, a class method within the Book model) you'll have access to it when invoking it in a <code>Post::ActiveRecord_Relation</code> book as it works through ActiveRecord delegation:</p>\n\n<pre><code>Book.all.respond_to?(:to_csv)\n# true\n\nBook.all.method(:to_csv).source_location\n# [\"/Users/user/.rbenv/versions/2.6.3/lib/ruby/gems/2.6.0/gems/activerecord-6.0.1/lib/active_record/relation/delegation.rb\", 64] # or similar\n</code></pre>\n\n<p>While an array of books is just that, an array of books. And if you haven't touched the Array class, there won't be a <code>to_csv</code> method:</p>\n\n<pre><code>[Book1, Book2].class\n# Array\n\n[Book1, Book2].respond_to?(:to_csv)\n# false\n</code></pre>\n\n<p>Hence, no method definition:</p>\n\n<pre><code>[Book1, Book2].method(:to_csv).source_location\n# NameError: undefined method `to_csv' for class `Array'\n# Did you mean?  to_s\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1573487321, "creation_date": 1573487321, "answer_id": 58804566, "question_id": 58803977, "link": "https://stackoverflow.com/questions/58803977/difference-between-class-book-all-and-an-array-of-books/58804566#58804566", "title": "Difference between class Book.all and an array of books", "body": "<p>In Rails the <code>.all</code> method returns an <code>ActiveRecord_Relation</code> object.\nWhile this object type has some similarities as <code>Array</code>, such as methods inherited by <code>Enumerable</code>, the object is not an actual instance of <code>Array</code> class. </p>\n\n<p>The short answer is that you really can't and probably should not expect an instance of <code>Array</code> to behave like an instance of <code>ActiveRecord_Relation</code>. </p>\n\n<p>But what you may really be trying to do is this:</p>\n\n<pre><code>books = Book.where(id: [Book1.id, Book2.id])\n</code></pre>\n\n<p>This WILL return an <code>ActiveRecord_Relation</code> object. So now you should be able to do</p>\n\n<pre><code>books.to_csv\n</code></pre>\n\n<p>Perhaps do some reading on </p>\n\n<p><a href=\"https://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/association_basics.html</a></p>\n\n<p><a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Relation.html\" rel=\"nofollow noreferrer\">https://api.rubyonrails.org/classes/ActiveRecord/Relation.html</a></p>\n"}], "owner": {"reputation": 45, "user_id": 9948390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04264a2f0a51133da4b51b8aca527f4d?s=128&d=identicon&r=PG&f=1", "display_name": "miha019", "link": "https://stackoverflow.com/users/9948390/miha019"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 58804213, "answer_count": 2, "score": 4, "last_activity_date": 1573488845, "creation_date": 1573485066, "last_edit_date": 1573486777, "question_id": 58803977, "link": "https://stackoverflow.com/questions/58803977/difference-between-class-book-all-and-an-array-of-books", "title": "Difference between class Book.all and an array of books", "body": "<p>I ve got a class named Book with a method <code>self.to_csv</code> . \nThis works:</p>\n\n<pre><code>books = Book.all \nbooks.to_csv \n</code></pre>\n\n<p>But if i have an array of books, it won t. The question is how can I get the same result with an array?</p>\n\n<pre><code>Book.all = [Book1,Book2]\nmyArray = [Book1,Book2]\n</code></pre>\n\n<p>What s the difference?</p>\n"}, {"tags": ["ruby", "cucumber", "httparty"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573574265, "post_id": 58803840, "comment_id": 103921468, "body": "That isn&#39;t an error. Post the stack trace."}, {"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573580130, "post_id": 58803840, "comment_id": 103924561, "body": "@anothermh how can I do this? I tried to put wtf command but just get &quot;Error: No most-recent exception&quot;"}, {"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573583788, "post_id": 58803840, "comment_id": 103926194, "body": "Ok, I using wtf command correctly, but got this &quot;Error: No most-recent exception&quot; response"}, {"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573585309, "post_id": 58803840, "comment_id": 103926815, "body": "Maybe the api are producing this rescue? Even with a 200 and ok msg"}, {"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573588019, "post_id": 58803840, "comment_id": 103927971, "body": "&quot;I&#39;m just get a Exception while running a Cucumber test&quot; how do you know you got an exception if you don&#39;t see an exception?"}, {"owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573595406, "post_id": 58803840, "comment_id": 103930873, "body": "I thought if I get a &quot;rescue Exception&quot; could be a Exception. I only see that because I used pry-nav to interrupt the loop. I just used Kubernetes to get the API log, and found a timeout when I get in this step. Maybe this can be the error"}], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "is_accepted": false, "score": 0, "last_activity_date": 1573663482, "creation_date": 1573663482, "answer_id": 58841763, "question_id": 58803840, "link": "https://stackoverflow.com/questions/58803840/cucumber-rescue-exception-ruby-httparty/58841763#58841763", "title": "Cucumber rescue Exception (Ruby/HTTParty)", "body": "<p>It was a MYSQL problem. When I request the API, MYSQL don't close the requisition, so I get a lot of timeouts when I check on Kubernetes.</p>\n\n<pre><code>Exception Caught by LogRequestResponseMiddleware:\n1) ----- Exception Type\nMySql.Data.MySqlClient.MySqlException\n1) ----- Exception Source\nMySql.Data\n1) ----- Exception TargetSite\nMySql.Data.MySqlClient.Driver GetConnection()\n1) ----- Exception Message\nerror connecting: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reached.\nMessage = error connecting: Timeout expired.  The timeout period elapsed prior to obtaining a connection from the pool.  This may have occurred because all pooled connections were in use and max pool size was reac\nhed.\n</code></pre>\n\n<p>So I republished the API and automation works fine.</p>\n"}, {"tags": [], "owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "is_accepted": true, "score": 0, "last_activity_date": 1612574791, "creation_date": 1612574791, "answer_id": 66072709, "question_id": 58803840, "link": "https://stackoverflow.com/questions/58803840/cucumber-rescue-exception-ruby-httparty/66072709#66072709", "title": "Cucumber rescue Exception (Ruby/HTTParty)", "body": "<p>This isn't a error. This is a response send by Ruby when I get a failure in the step.</p>\n"}], "owner": {"reputation": 60, "user_id": 10802314, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4snMgcSZjWo/AAAAAAAAAAI/AAAAAAAANxM/1lc6gCj10mc/photo.jpg?sz=128", "display_name": "holyonline", "link": "https://stackoverflow.com/users/10802314/holyonline"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 66072709, "answer_count": 2, "score": 0, "last_activity_date": 1612574791, "creation_date": 1573484544, "last_edit_date": 1573653171, "question_id": 58803840, "link": "https://stackoverflow.com/questions/58803840/cucumber-rescue-exception-ruby-httparty", "title": "Cucumber rescue Exception (Ruby/HTTParty)", "body": "<p>I'm just get a Exception while running a Cucumber test and I tried to find what I can do for it, but no luck about that.</p>\n\n<p>When I made a post in the last step:</p>\n\n<pre><code>When('accept terms of use') do\n  until @o == 200\n  @o = CadastroApp.sign_term1.code\n  sleep 1\n  end\nend\n\nclass CadastroApp\n  include HTTParty\n   def self.sign_term1\n   post(\"#{$uat_uri}agree/multipleterms\",\n     body: {\n       'ContractsId': $contract1,\n       'deviceType': 'Smartphone',\n       'Platform': 'ios',\n       'Model': 'Iphone XS max',\n     }.to_json,\n     headers: {\n       'Authorization': \"Bearer #{$auth_token}\",\n       'Content-Type': 'application/json'\n     })\n   end\n  end\n</code></pre>\n\n<p>I got the error:</p>\n\n<pre><code>52: def self.cucumber_run_with_backtrace_filtering(pseudo_method)\n53:   begin\n54:     yield\n55:   rescue Exception =&gt; e\n56:     instance_exec_invocation_line = \"#{__FILE__}:#{__LINE__ - 2}:in `cucumber_run_with_backtrace_filtering'\"\n57:     replace_instance_exec_invocation_line!((e.backtrace || []), instance_exec_invocation_line, pseudo_method)\n58:     raise e\n59:   end\n60: end\n</code></pre>\n\n<p>I don't know if it is a problem, but I was using a lot of \"until @variable == 200\" to loop the api until I got response code 200.</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1573484667, "post_id": 58803105, "comment_id": 103887579, "body": "Maybe have a look at answer to <a href=\"https://stackoverflow.com/questions/38935467/nested-checkboxes-in-rails\">this question</a>"}], "answers": [{"tags": [], "owner": {"reputation": 841, "user_id": 12294425, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dxWNY.jpg?s=128&g=1", "display_name": "calebkm", "link": "https://stackoverflow.com/users/12294425/calebkm"}, "is_accepted": false, "score": 0, "last_activity_date": 1573490083, "creation_date": 1573490083, "answer_id": 58805247, "question_id": 58803105, "link": "https://stackoverflow.com/questions/58803105/create-check-box-from-database-on-view-using-each-and-puts-value-and-id/58805247#58805247", "title": "Create check_box from database on view using each and puts value and id", "body": "<p>One way to do it would be to setup your form with both a <code>hidden_field_tag</code> and a <code>checkbox_tag</code> for each checkbox input:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;%= form_for ...%&gt;\n  &lt;% @search_inactive.each do |p| %&gt;\n    &lt;%= hidden_field_tag \"search_inactive[#{p.id}]\", false %&gt;\n    &lt;%= check_box_tag \"search_inactive[#{p.id}]\", true %&gt; \n  &lt;% end %&gt;\n\n  &lt;% @search_active.each do |p| %&gt;\n    &lt;%= hidden_field_tag \"search_active[#{p.id}]\", false %&gt;\n    &lt;%= check_box_tag \"search_active[#{p.id}]\", true, true %&gt; # true here to have it checked by default \n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Now when you submit your form the params will look like:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>{\n  \"search_inactive\"=&gt;{\"2\"=&gt;\"false\", \"4\"=&gt;\"false\", \"71\"=&gt;\"false\", \"72\"=&gt;\"false\", \"73\"=&gt;\"false\", \"74\"=&gt;\"false\"},\n  \"search_active\"=&gt;{\"102\"=&gt;\"true\", \"104\"=&gt;\"true\", \"171\"=&gt;\"true\", \"172\"=&gt;\"true\", \"173\"=&gt;\"true\", \"174\"=&gt;\"true\"}\n}\n</code></pre>\n\n<p>The extra <code>hidden_field_tag</code> allows the form to submit <code>false</code> when the checkbox is NOT checked. But, if the checkbox is checked by a user in the UI the form will submit <code>true</code>. This is a trick that <a href=\"https://api.rubyonrails.org/v5.2.3/classes/ActionView/Helpers/FormHelper.html\" rel=\"nofollow noreferrer\">Rails usually does for you automatically when generating a form</a>, but since you're building out the form yourself you need to include the hidden tag explicitly. </p>\n"}], "owner": {"reputation": 13, "user_id": 12161078, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mAHNqZC8b9MJctmhTbjWR5g-AIkMo84yng_fxQCdg=k-s128", "display_name": "Victor Coelho", "link": "https://stackoverflow.com/users/12161078/victor-coelho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 18, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573490083, "creation_date": 1573481812, "question_id": 58803105, "link": "https://stackoverflow.com/questions/58803105/create-check-box-from-database-on-view-using-each-and-puts-value-and-id", "title": "Create check_box from database on view using each and puts value and id", "body": "<p>i'm trying to display one checkbox for every id that comes from the database could help me, following my code tried but is displaying more than 1 checkbox in the same  check_box = \"id: 1\", check_box \"id: 2\" </p>\n\n<p>I want to display this way </p>\n\n<pre><code>&lt;td&gt; check_box=\"id1\" value=\"false\"&lt;/td&gt; \n&lt;td&gt; check_box=\"id2\" value=\"true\"&lt;/td&gt; \n</code></pre>\n\n<p><strong>i want too this if one check_box \nthis checked on submit form on rails console puts:</strong> </p>\n\n<pre><code>Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"b3kaOUAgyJHqho70958585SVSv7a1Eo3Yd2z54=\", \"@search_inactive\"=&gt;\"30\",\"true\"}\n\nParameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"b3kaOUAgyJHqho70958585Sassaffdaaz=\", \"@search_inactive\"=&gt;\"29\",\"false\"}\n</code></pre>\n\n<p><strong>My View:</strong></p>\n\n<pre><code>&lt;tr&gt;\n&lt;td&gt;\n &lt;%= link_to \"Answer\", \"https://docs.google.com/forms/d/1WdpuW2pD-bqhlSmC77sWb3_nz56NAF-kHSh5--GkLnY/edit\", :target =&gt; \"_blank\", :class =&gt; \"btn_forms_gf\" %&gt;\n  &lt;td align=\"center\"&gt;\n  &lt;%= form_for :app_changes, :url =&gt; {:controller =&gt; :user, :action =&gt; :show_search } do |f| %&gt;\n  &lt;% @search_inactive.each do |p| %&gt;\n  &lt;%= check_box_tag \"@search_inactive\", {}, p.id %&gt;\n  &lt;% end %&gt;\n  &lt;%= link_to_function('Disable', \"$('form').submit()\", :app_changes =&gt; @show_search, :class =&gt; \"btn_save\") %&gt;\n  &lt;% end %&gt;\n  &lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>My Controller to render page with all searchs inactives and actives</strong></p>\n\n<pre><code>     def show_search\n       @show_search_active = Search.find_by_sql(\"select * from search where active is true\")\n       @show_search_inactive = Search.find_by_sql(\"select * from search where active is false\")\n   render('/users/show_search_users', :layout =&gt; true)\n   end\n</code></pre>\n"}, {"tags": ["html", "mysql", "sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14813, "user_id": 14673, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5B0nG.png?s=128&g=1", "display_name": "Luc M", "link": "https://stackoverflow.com/users/14673/luc-m"}, "edited": false, "score": 0, "creation_date": 1573481599, "post_id": 58802983, "comment_id": 103885942, "body": "What can you use to fetch data ? Perl, Python, C, bash, Cobol... ?"}, {"owner": {"reputation": 13, "user_id": 11113926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610508f74d40f9c804a11777ad57e7eb?s=128&d=identicon&r=PG&f=1", "display_name": "Toma", "link": "https://stackoverflow.com/users/11113926/toma"}, "reply_to_user": {"reputation": 14813, "user_id": 14673, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/5B0nG.png?s=128&g=1", "display_name": "Luc M", "link": "https://stackoverflow.com/users/14673/luc-m"}, "edited": false, "score": 0, "creation_date": 1573481785, "post_id": 58802983, "comment_id": 103886016, "body": "My bad i forgot to mention im building a ruby on rails app right now, I&#39;ll edit my question"}], "answers": [{"comments": [{"owner": {"reputation": 76, "user_id": 12354535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/748976b537651e7904ee08296a4010a8?s=128&d=identicon&r=PG", "display_name": "Nils M.", "link": "https://stackoverflow.com/users/12354535/nils-m"}, "reply_to_user": {"reputation": 13, "user_id": 11113926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610508f74d40f9c804a11777ad57e7eb?s=128&d=identicon&r=PG&f=1", "display_name": "Toma", "link": "https://stackoverflow.com/users/11113926/toma"}, "edited": false, "score": 0, "creation_date": 1573484318, "post_id": 58803090, "comment_id": 103887389, "body": "Im glad this fixed it for you, please select the answer as the correct answer so future Stack overflow users can see it too"}], "tags": [], "owner": {"reputation": 76, "user_id": 12354535, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/748976b537651e7904ee08296a4010a8?s=128&d=identicon&r=PG", "display_name": "Nils M.", "link": "https://stackoverflow.com/users/12354535/nils-m"}, "is_accepted": true, "score": 0, "last_activity_date": 1573484461, "last_edit_date": 1573484461, "creation_date": 1573481768, "answer_id": 58803090, "question_id": 58802983, "link": "https://stackoverflow.com/questions/58802983/populate-an-html-dropdown-list-with-data-from-mysql-database-without-php/58803090#58803090", "title": "Populate an HTML DropDown List with data from mysql database without PHP", "body": "<p><strong>The easy answer</strong></p>\n\n<p>plain html</p>\n\n<pre class=\"lang-html prettyprint-override\"><code>&lt;select name=\"clients\"&gt;\n    &lt;option value=\"1\"&gt;Thomas Carrier&lt;/option&gt;\n    &lt;option value=\"2\"&gt;Michel Carrier&lt;/option&gt;\n    ...\n&lt;/select&gt;\n</code></pre>\n\n<p>or with ruby (<a href=\"https://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow noreferrer\">https://guides.rubyonrails.org/layouts_and_rendering.html</a>)</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>&lt;select name=\"clients\"&gt;\n    &lt;% @clients.each do |client| %&gt;\n        &lt;option value=\"&lt;%= client.id %&gt;\"&gt;&lt;%= client.firstName %&gt; &lt;%= client.lastName %&gt;&lt;/option&gt;\n    &lt;% end %&gt;\n&lt;/select&gt;\n</code></pre>\n\n<p><strong>Also refer to Yaniv Iny's answer to for a better more correct way</strong></p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 4539805, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b261ac6943200b4e864a9f2e1dcd250d?s=128&d=identicon&r=PG", "display_name": "Yaniv Iny", "link": "https://stackoverflow.com/users/4539805/yaniv-iny"}, "is_accepted": false, "score": 1, "last_activity_date": 1573483970, "creation_date": 1573483970, "answer_id": 58803701, "question_id": 58802983, "link": "https://stackoverflow.com/questions/58802983/populate-an-html-dropdown-list-with-data-from-mysql-database-without-php/58803701#58803701", "title": "Populate an HTML DropDown List with data from mysql database without PHP", "body": "<p>this is another option which I think is more the \"rails\" way:</p>\n\n<p>You should add this to your client.rb model:</p>\n\n<pre><code>def full_name\n first_name + ' ' + last_name\nend\n</code></pre>\n\n<p>and then in your view something like this:</p>\n\n<pre><code>&lt;%= select_tag(\"clients\", options_from_collection_for_select(@clients, \"id\", \"full_name\"), include_blank: '--SELECT--') %&gt;\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 11113926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/610508f74d40f9c804a11777ad57e7eb?s=128&d=identicon&r=PG&f=1", "display_name": "Toma", "link": "https://stackoverflow.com/users/11113926/toma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 171, "favorite_count": 0, "accepted_answer_id": 58803090, "answer_count": 2, "score": 1, "last_activity_date": 1616437826, "creation_date": 1573481374, "last_edit_date": 1616437826, "question_id": 58802983, "link": "https://stackoverflow.com/questions/58802983/populate-an-html-dropdown-list-with-data-from-mysql-database-without-php", "title": "Populate an HTML DropDown List with data from mysql database without PHP", "body": "<p>I'm currently building a rails app where im trying to fetch data from different tables from my sql database and I need to put that fetched data (id, first_name, last_name) into an HTML Drop-down where the user is going to select between all possible choices, for exemple:</p>\n<p>DROPDOWN Clients:</p>\n<h2>default:    --SELECT--</h2>\n<pre><code>        1 Thomas Carrier\n</code></pre>\n<hr />\n<pre><code>        2 Michel Carrier\n</code></pre>\n<hr />\n<pre><code>        3 Yvon Dupuis\n</code></pre>\n<hr />\n<p>So if we take the first choice, 1 is the id of the first employee, and his first name (Thomas) and last name (Carrier)</p>\n<p>I keep finding stuff about php but I cannot use php!</p>\n<p>Thanks for the help</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 5060, "user_id": 10522579, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7GQ6a.jpg?s=128&g=1", "display_name": "ray", "link": "https://stackoverflow.com/users/10522579/ray"}, "edited": false, "score": 1, "creation_date": 1573479747, "post_id": 58802523, "comment_id": 103884968, "body": "Yes, you are close!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1573547939, "post_id": 58802523, "comment_id": 103907709, "body": "In the linked code, <code>self</code> refers to <code>Redis</code>, so <code>class Store &lt; self</code> is equivalent to <code>class Store &lt; Redis</code>."}], "answers": [{"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1573507276, "post_id": 58802852, "comment_id": 103897064, "body": "Nitpick: <code>Bar</code> is <i>not</i> nested under <code>Foo</code>. There is no such thing as nested classes in Ruby. The <i>constant</i> <code>Bar</code> is defined inside the class <code>Foo</code>, but there <i>is no relationship whatsoever</i> between the <i>class</i> <code>Bar</code> and the <i>class</i> <code>Foo</code>. (Well, except for the fact that <code>Bar</code> inherits from <code>Foo</code>, but I am referring to the more general case of <code>class Foo &lt; Qux; class Bar &lt; Garble; end end</code>.) There are <i>tons</i> of Ruby tutorials that talk about nested classes, and there are tons of questions in <a href=\"https://stackoverflow.com/questions/tagged/ruby\">ruby</a> on <a href=\"https://stackoverflow.com\">Stack Overflow</a> where people are confused because nested classes don&#39;t seems to work, and the \u2026"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1573507313, "post_id": 58802852, "comment_id": 103897077, "body": "\u2026 simple reason is that Ruby <i>doesn&#39;t have nested classes</i>, and we should simply never talk about them as if Ruby did have nested classes."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1573547728, "post_id": 58802852, "comment_id": 103907611, "body": "@J&#246;rgWMittag on the other hand, if <code>Bar</code> were not nested under <code>Foo</code>, we couldn&#39;t use <code>self</code> to refer to <code>Foo</code> ;-)"}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1573549654, "post_id": 58802852, "comment_id": 103908569, "body": "@J&#246;rgWMittag is it fair to say that the constant <code>Bar</code> is nested under <code>Foo</code>, whereas the class <code>Bar</code> inherits from <code>Foo</code>?"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 6, "last_activity_date": 1573485616, "last_edit_date": 1573485616, "creation_date": 1573480871, "answer_id": 58802852, "question_id": 58802523, "link": "https://stackoverflow.com/questions/58802523/what-does-class-foo-self-do-in-ruby/58802852#58802852", "title": "What does `class Foo &lt; self` do in Ruby?", "body": "<pre><code>class Foo &lt; Bar\nend\n</code></pre>\n\n<p>Is how you tell Ruby that <code>Foo</code> inherits from <code>Bar</code>.</p>\n\n<p>Within a class definition, <code>self</code> refers to the class itself:</p>\n\n<pre><code># prints Foo\nclass Foo\n  puts self\nend\n</code></pre>\n\n<p>So</p>\n\n<pre><code>class Foo\n  class Bar &lt; self\n  end\nend\n</code></pre>\n\n<p>Just says that <code>Bar</code> is nested under <code>Foo</code> and it inherits from it.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1573548718, "post_id": 58809318, "comment_id": 103908095, "body": "I think the OP was under the impression that <code>self</code> in <code>class Foo &lt; self</code> refers to the class itself, i.e. <code>Foo</code> instead of <code>Bar</code>. (hence <i>&quot;with itself as superclass&quot;</i>)"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 4, "last_activity_date": 1573509904, "creation_date": 1573509904, "answer_id": 58809318, "question_id": 58802523, "link": "https://stackoverflow.com/questions/58802523/what-does-class-foo-self-do-in-ruby/58809318#58809318", "title": "What does `class Foo &lt; self` do in Ruby?", "body": "<p>The main thing that you seem to be messing is just this: the superclass portion of a Ruby class definition is an <em>arbitrary Ruby expression</em>.</p>\n\n<p>So, something like this is perfectly legal:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Foo &lt; if rand &lt; 0.5 then Bar else Qux end end\n</code></pre>\n\n<p>Obviously, this doesn't make sense, but for example, in _why the lucky stiff's brilliant little web micro framework <a href=\"http://ruby-camping.com\" rel=\"nofollow noreferrer\"><em>Camping</em></a>, routes are defined like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Edit &lt; R '/post/(\\d+)/edit'\n</code></pre>\n\n<p>and Migrations are defined like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class BlogInitialSchemaCreation &lt; V 1.0\n</code></pre>\n\n<p>In <a href=\"https://edgeguides.rubyonrails.org/active_record_migrations.html\" rel=\"nofollow noreferrer\"><code>ActiveRecord</code></a>, migrations are defined like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class CreateProducts &lt; ActiveRecord::Migration[5.0]\n</code></pre>\n\n<p>All of this simply uses the fact that whatever is to the right of the <code>&lt;</code> in a class definition can by <em>any arbitrary Ruby expression</em> which is evaluated when the class definition is evaluated.</p>\n"}], "owner": {"reputation": 9740, "user_id": 7816, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/38d5090defb7d065bf310074c289c6eb?s=128&d=identicon&r=PG", "display_name": "KaptajnKold", "link": "https://stackoverflow.com/users/7816/kaptajnkold"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 58802852, "answer_count": 2, "score": 1, "last_activity_date": 1573509904, "creation_date": 1573479669, "question_id": 58802523, "link": "https://stackoverflow.com/questions/58802523/what-does-class-foo-self-do-in-ruby", "title": "What does `class Foo &lt; self` do in Ruby?", "body": "<p>Looking through the <a href=\"https://github.com/redis-store/redis-store/blob/fc4cd1bcc2f7a7359c8754285cdbe63a8321e37e/lib/redis/store/namespace.rb#L2\" rel=\"nofollow noreferrer\">sourcecode</a> of the redis-store RubyGem, I stumbled upon this syntax I hadn't seen before:</p>\n\n<pre><code>class Foo &lt; self\n  # ...\nend\n</code></pre>\n\n<p>My Google-Fu apparently isn't powerful enough, because I've been able to find nothing that describes what this does.</p>\n\n<p>What I'm <em>guessing</em> this does, is somehow reopening Foo, extending it with itself as superclass, thereby making it possible to override methods that can call the original definition as <code>super</code>. Am I close?</p>\n"}, {"tags": ["ruby", "mobile", "automation", "appium"], "comments": [{"owner": {"reputation": 11, "user_id": 12355108, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCWIhcG-TUcmUEcZEn4f7RnbmoxU_aPecN3kJT6xw=k-s128", "display_name": "Zaif Minhas", "link": "https://stackoverflow.com/users/12355108/zaif-minhas"}, "edited": false, "score": 0, "creation_date": 1573475632, "post_id": 58801205, "comment_id": 103882913, "body": "I have tried using &#39;sleep&#39; function but still no joy"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 12355108, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCWIhcG-TUcmUEcZEn4f7RnbmoxU_aPecN3kJT6xw=k-s128", "display_name": "Zaif Minhas", "link": "https://stackoverflow.com/users/12355108/zaif-minhas"}, "edited": false, "score": 0, "creation_date": 1573586189, "post_id": 58806050, "comment_id": 103927179, "body": "Hi @Mani Thank you for your suggestion. Unfortunately, I am still getting the same error."}, {"owner": {"reputation": 1150, "user_id": 1312415, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4cccdbada1d0879e21b5f8f0f58b8bb6?s=128&d=identicon&r=PG", "display_name": "Mani", "link": "https://stackoverflow.com/users/1312415/mani"}, "reply_to_user": {"reputation": 11, "user_id": 12355108, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCWIhcG-TUcmUEcZEn4f7RnbmoxU_aPecN3kJT6xw=k-s128", "display_name": "Zaif Minhas", "link": "https://stackoverflow.com/users/12355108/zaif-minhas"}, "edited": false, "score": 0, "creation_date": 1573616012, "post_id": 58806050, "comment_id": 103935745, "body": "please post your appium logs to further debug this issue"}, {"owner": {"reputation": 11, "user_id": 12355108, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCWIhcG-TUcmUEcZEn4f7RnbmoxU_aPecN3kJT6xw=k-s128", "display_name": "Zaif Minhas", "link": "https://stackoverflow.com/users/12355108/zaif-minhas"}, "edited": false, "score": 0, "creation_date": 1573635782, "post_id": 58806050, "comment_id": 103942267, "body": "Hi @Mani The log is too long to fit in this comments section so please view it via this google drive link: <a href=\"https://docs.google.com/document/d/1Vulw9j_ru4DVzFzOu5QawNU54REHDbR5yN4UAclNats/edit?usp=sharing\" rel=\"nofollow noreferrer\">docs.google.com/document/d/&hellip;</a>  Thank you"}, {"owner": {"reputation": 11, "user_id": 12355108, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCWIhcG-TUcmUEcZEn4f7RnbmoxU_aPecN3kJT6xw=k-s128", "display_name": "Zaif Minhas", "link": "https://stackoverflow.com/users/12355108/zaif-minhas"}, "edited": false, "score": 0, "creation_date": 1573657138, "post_id": 58806050, "comment_id": 103953862, "body": "Hi @Mani I was able to find a solution. I added <code>appWaitActivity</code> to env.rb. This allowed the second page to load. Thank you for your time and all the best"}], "tags": [], "owner": {"reputation": 1150, "user_id": 1312415, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/4cccdbada1d0879e21b5f8f0f58b8bb6?s=128&d=identicon&r=PG", "display_name": "Mani", "link": "https://stackoverflow.com/users/1312415/mani"}, "is_accepted": false, "score": 0, "last_activity_date": 1573493463, "creation_date": 1573493463, "answer_id": 58806050, "question_id": 58801205, "link": "https://stackoverflow.com/questions/58801205/appium-test-not-going-any-further-after-splash-screen/58806050#58806050", "title": "Appium test not going any further after Splash Screen", "body": "<p>Try with following capabilities</p>\n\n<pre><code>           deviceName: :Anyname,\n           platformName: :Android,\n           automation_name: :uiautomator2,\n           app: 'C:\\Users\\zminhas\\Desktop\\three_app_automation\\features\\support\\biometrics.apk',\n           appPackage: \"com.hutchison3g.planet3\",\n           appActivity: \".SplashScreenActivity\",\n           noReset: true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 13553671, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-_G4GV5Rbviw/AAAAAAAAAAI/AAAAAAAAAAA/AMZuucm-WW_o5WmNd9fIevXG7khxMAN-hw/photo.jpg?sz=128", "display_name": "Ajay Singh", "link": "https://stackoverflow.com/users/13553671/ajay-singh"}, "is_accepted": false, "score": 0, "last_activity_date": 1589613769, "creation_date": 1589613769, "answer_id": 61833288, "question_id": 58801205, "link": "https://stackoverflow.com/questions/58801205/appium-test-not-going-any-further-after-splash-screen/61833288#61833288", "title": "Appium test not going any further after Splash Screen", "body": "<p>I was having the same issue when an app was given to me in an interview. but after 2 days  I was able to find the solution to the issue related to Splash Screen being stuck and not going to the second screen using script/appium but manually it was working fine.\nThe issue is something related to INTENT Activity\nSolution:\nI added some extra line of code to script/capabilities to appium and it worked fine.\nTry using these lines in capabilities for the apps that have splash screen issue.</p>\n\n<pre><code>capabilities.setCapability(\"androidCoverage\",\"com.my.Pkg/com.my.Pkg.instrumentation.MyInstrumentation\");\ncapabilities.setCapability(\"androidCoverageEndIntent\",\"com.example.pkg.END_EMMA\");\ncapabilities.setCapability(\"intentAction\",\"android.intent.action.MAIN\");\ncapabilities.setCapability(\"intentCategory\",\"android.intent.category.LAUNCHER\");\ncapabilities.setCapability(\"intentFlags\",\"0x10200000\");\n</code></pre>\n\n<p>Please Let me know if it worked for you also?</p>\n"}], "owner": {"reputation": 11, "user_id": 12355108, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mCWIhcG-TUcmUEcZEn4f7RnbmoxU_aPecN3kJT6xw=k-s128", "display_name": "Zaif Minhas", "link": "https://stackoverflow.com/users/12355108/zaif-minhas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 813, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1589613769, "creation_date": 1573474744, "question_id": 58801205, "link": "https://stackoverflow.com/questions/58801205/appium-test-not-going-any-further-after-splash-screen", "title": "Appium test not going any further after Splash Screen", "body": "<p>I'm hoping someone can help.\nI am testing the Three App where correct behavior should be once the app launches, a splash screen is shown for a few seconds, then a login page is presented.</p>\n\n<p>I'm trying to automate this using appium but once the automated test opens the splash screen, the test ends.\nI am shown this error message:</p>\n\n<pre><code>NoSuchElementError: An element could not be located on the page using the given search parameters. at AndroidUiautomator2Driver.findElOrEls (C:\\Users\\zminhas\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-android-driver\\lib\\commands\\find.js:75:11)\n</code></pre>\n\n<p>Here is my env.rb code:</p>\n\n<pre><code>require \"appium_lib\"\nrequire \"pry\"\n\n\nopts = {\n         caps: {\n           deviceName: :Anyname,\n           platformName: :Android,\n           app: 'C:\\Users\\zminhas\\Desktop\\three_app_automation\\features\\support\\biometrics.apk',\n           appPackage: \"com.hutchison3g.planet3\",\n           appActivity: \".SplashScreenActivity\",\n           noReset: true\n         },\n         appium_lib: {\n           #wait_timeout: 30\n\n         }\n       }\nAppium::Driver.new(opts, true).start_driver\nAppium.promote_appium_methods Object\n\n</code></pre>\n\n<p>And my hooks.rb code:</p>\n\n<pre><code>Before do\n    $driver.start_driver    \nend\n\nAfter do\n    $driver.driver_quit\nend\n</code></pre>\n\n<p>Here is the full results screen:</p>\n\n<pre><code>$ cucumber\n*** WARNING: You must use ANSICON 1.31 or higher (https://github.com/adoxa/ansicon/) to get coloured output on Windows\nFeature: All external URLs work as expected within the More Tab\n\n2019-11-11 12:08:13 WARN Selenium [DEPRECATION] Selenium::WebDriver::Error::TimeOutError is deprecated. Use Selenium::WebDriver::Error::TimeoutError (ensure the driver supports W3C WebDriver specification) instead.\n  Scenario: test                        # features/more_tab.feature:3\n    Given I see the enter number screen # features/step_definitions/more_tab_steps.rb:1\n      An element could not be located on the page using the given search parameters. (Selenium::WebDriver::Error::NoSuchElementError)\n      NoSuchElementError: An element could not be located on the page using the given search parameters.\n          at AndroidUiautomator2Driver.findElOrEls (C:\\Users\\zminhas\\AppData\\Local\\Programs\\Appium\\resources\\app\\node_modules\\appium\\node_modules\\appium-android-driver\\lib\\commands\\find.js:75:11)\n      ./features/step_definitions/more_tab_steps.rb:2:in `\"I see the enter number screen\"'\n      features/more_tab.feature:4:in `Given I see the enter number screen'\n\nFailing Scenarios:\ncucumber features/more_tab.feature:3 # Scenario: test\n\n1 scenario (1 failed)\n1 step (1 failed)\n0m14.888s\n</code></pre>\n\n<p>Thank you for your time</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "ruby-on-rails-5", "bundler"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1573481765, "post_id": 58800700, "comment_id": 103886010, "body": "Telling us that you <i>&quot;tried all the methods&quot;</i>, without explicitly saying what &quot;all of thee methods&quot; are, isn&#39;t very helpful. How do we know whether then thing we suggest hasn&#39;t already been tried by you? The most common solutions to this problem can be found <a href=\"https://github.com/shakacode/react-webpack-rails-tutorial/issues/266\" rel=\"nofollow noreferrer\">here</a>, for example."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1573481928, "post_id": 58800700, "comment_id": 103886107, "body": "Some side notes: (1) You&#39;re using an old ruby version (<code>2.2.4</code>). Is that intentional/necessary? It&#39;s almost always a good idea to use the latest version (currently <code>2.6.5</code>), unless you have a good reason not to. (2) You&#39;re installing a gem with <code>sudo</code>?? This is a strong indication that your system ruby permissions are messed up. There&#39;s a high chance you&#39;ll benefit from uninstalling ruby and starting again; following installation instructions carefully so that ruby permissions are on your user, not <code>root</code>."}, {"owner": {"reputation": 37, "user_id": 9318132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b481ef06771448731a79ac0951e96c?s=128&d=identicon&r=PG&f=1", "display_name": "anand ", "link": "https://stackoverflow.com/users/9318132/anand"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1573485855, "post_id": 58800700, "comment_id": 103888183, "body": "@TomLord actually I tried all the suggested mehod available on stackoverflow and the reference given by you also but that didn&#39;t solve the issue."}, {"owner": {"reputation": 37, "user_id": 9318132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b481ef06771448731a79ac0951e96c?s=128&d=identicon&r=PG&f=1", "display_name": "anand ", "link": "https://stackoverflow.com/users/9318132/anand"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1573486302, "post_id": 58800700, "comment_id": 103888410, "body": "@TomLord           I am bound  to use 2.2.4 version only so I can not upgrade my ruby version .         I am installing gems with sudo because without sudo it gives permission error may be this is the problem , Okay I will  follow your suggestion and will tell you it worked or not , Thanks for reply"}, {"owner": {"reputation": 37, "user_id": 9318132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b481ef06771448731a79ac0951e96c?s=128&d=identicon&r=PG&f=1", "display_name": "anand ", "link": "https://stackoverflow.com/users/9318132/anand"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1573538779, "post_id": 58800700, "comment_id": 103904239, "body": "@TomLord after uninstalling ruby and rbenv and reinstall I get this .Your user account isn&#39;t allowed to install to the system RubyGems.   You can cancel this installation and run:    bundle install --path vendor/bundle"}, {"owner": {"reputation": 37, "user_id": 9318132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b481ef06771448731a79ac0951e96c?s=128&d=identicon&r=PG&f=1", "display_name": "anand ", "link": "https://stackoverflow.com/users/9318132/anand"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1573538829, "post_id": 58800700, "comment_id": 103904257, "body": "@TomLord  to install the gems into ./vendor/bundle/, or you can enter your password   and install the bundled gems to RubyGems using sudo.                                           could you please help me how i can fix this problem."}], "owner": {"reputation": 37, "user_id": 9318132, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/16b481ef06771448731a79ac0951e96c?s=128&d=identicon&r=PG&f=1", "display_name": "anand ", "link": "https://stackoverflow.com/users/9318132/anand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 262, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573486372, "creation_date": 1573472638, "last_edit_date": 1573486372, "question_id": 58800700, "link": "https://stackoverflow.com/questions/58800700/installing-therubyracer-0-12-2-with-native-extensions-gemextbuilderror-er", "title": "Installing therubyracer 0.12.2 with native extensions - Gem::Ext::BuildError: ERROR: Failed to build gem native extension", "body": "<p>When installing therubyracer 0.12.2 with native extensions, I get the error:</p>\n\n<blockquote>\n  <p>Gem::Ext::BuildError: ERROR: Failed to build gem native extension</p>\n</blockquote>\n\n<p>I tried all methods, like uninstalling libv8 then installing therubyracer. Nothing worked for me.</p>\n\n<p>Command and output:</p>\n\n<pre><code>&gt;$ sudo gem install therubyracer -v '0.12.2' --source 'http://rubygems.org/'\n\n\nBuilding native extensions.  This could take a while...\nERROR:  Error installing therubyracer:\n    ERROR: Failed to build gem native extension.\n\n    /Users/letsventure/.rbenv/versions/2.2.4/bin/ruby -r ./siteconf20191111-5081-xr5qij.rb extconf.rb\nchecking for main() in -lpthread... yes\nchecking for main() in -lobjc... yes\nchecking for v8.h... no\n*** extconf.rb failed ***\nCould not create Makefile due to some reason, probably lack of necessary\nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\nProvided configuration options:\n    --with-opt-dir\n    --without-opt-dir\n    --with-opt-include\n    --without-opt-include=${opt-dir}/include\n    --with-opt-lib\n    --without-opt-lib=${opt-dir}/lib\n    --with-make-prog\n    --without-make-prog\n    --srcdir=.\n    --curdir\n    --ruby=/Users/letsventure/.rbenv/versions/2.2.4/bin/$(RUBY_BASE_NAME)\n    --with-pthreadlib\n    --without-pthreadlib\n    --with-objclib\n    --without-objclib\n    --enable-debug\n    --disable-debug\n    --with-v8-dir\n    --without-v8-dir\n    --with-v8-include\n    --without-v8-include=${v8-dir}/include\n    --with-v8-lib\n    --without-v8-lib=${v8-dir}/lib\n/Users/letsventure/.rbenv/versions/2.2.4/lib/ruby/gems/2.2.0/gems/libv8-3.16.14.19/ext/libv8/location.rb:50:in `configure': By using --with-system-v8, you have chosen to use the version  (Libv8::Location::System::NotFoundError)\nof V8 found on your system and *not* the one that is bundled with \nthe libv8 rubygem. \n\nHowever, your system version of v8 could not be located. \n\nPlease make sure your system version of v8 that is compatible \nwith 3.16.14.19 installed. You may need to use the \n--with-v8-dir option if it is installed in a non-standard location\n    from /Users/letsventure/.rbenv/versions/2.2.4/lib/ruby/gems/2.2.0/gems/libv8-3.16.14.19/lib/libv8.rb:7:in `configure_makefile'\n    from extconf.rb:32:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Users/letsventure/.rbenv/versions/2.2.4/lib/ruby/gems/2.2.0/gems/therubyracer-0.12.2 for inspection.\nResults logged to /Users/letsventure/.rbenv/versions/2.2.4/lib/ruby/gems/2.2.0/extensions/x86_64-darwin-19/2.2.0-static/therubyracer-0.12.2/gem_make.out\n</code></pre>\n\n<p>Could anyone please help me to solve this issue? If you know the answer, would you also please explain why this is happening?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-s3", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 162605, "user_id": 174777, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6PnNW.jpg?s=128&g=1", "display_name": "John Rotenstein", "link": "https://stackoverflow.com/users/174777/john-rotenstein"}, "is_accepted": true, "score": 0, "last_activity_date": 1573473118, "creation_date": 1573473118, "answer_id": 58800833, "question_id": 58798284, "link": "https://stackoverflow.com/questions/58798284/upload-a-folder-to-s3-bucket-in-rails/58800833#58800833", "title": "Upload a Folder to S3 bucket in Rails", "body": "<p>There is no Amazon S3 API call to upload multiple files. You will need to <strong>upload one at a time</strong>, but you can do them in parallel if your programming language does multi-threading.</p>\n\n<p>If you just need to copy files rather than including this functionality within your own app, you could use the <a href=\"http://aws.amazon.com/cli/\" rel=\"nofollow noreferrer\">AWS Command-Line Interface (CLI)</a>. It provides a <code>aws s3 cp --recursive</code> command and a <code>aws s3 sync</code> command that can copy whole directories for you. (It recursively copies each file.)</p>\n"}], "owner": {"reputation": 35, "user_id": 8002952, "user_type": "registered", "profile_image": "https://graph.facebook.com/661748747364922/picture?type=large", "display_name": "Shahbaz Zaidi", "link": "https://stackoverflow.com/users/8002952/shahbaz-zaidi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 58800833, "answer_count": 1, "score": 0, "last_activity_date": 1573473118, "creation_date": 1573462915, "last_edit_date": 1573465197, "question_id": 58798284, "link": "https://stackoverflow.com/questions/58798284/upload-a-folder-to-s3-bucket-in-rails", "title": "Upload a Folder to S3 bucket in Rails", "body": "<p>How can I upload an entire folder to the S3 Bucket or all the files of my folder to s3 bucket folder.</p>\n\n<p>Right now I am only able to upload a file using the following code :\nI want to upload a folder having  .gif,.jpeg,.html etc kind of files in it .</p>\n\n<pre><code>  def myfunction(location,source_file)\n            s3 = Aws::S3::Resource.new(region:'region-name')\n            obj = s3.bucket(bucket-name).object(location)\n            obj.upload_file(source_file)\n        end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "environment-variables", "asdf-vm"], "owner": {"reputation": 2695, "user_id": 6488361, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QLWMu.jpg?s=128&g=1", "display_name": "Kaka Ruto", "link": "https://stackoverflow.com/users/6488361/kaka-ruto"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 222, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1573504746, "creation_date": 1573456597, "last_edit_date": 1573504746, "question_id": 58797005, "link": "https://stackoverflow.com/questions/58797005/how-to-set-env-variables-using-asdf-in-a-rails-project", "title": "How to set env variables using ASDF in a Rails project", "body": "<p>Rbenv uses <code>rbenv-vars</code> to specify per-application environment variables in Rails.</p>\n\n<p>Most version managers read the <code>.env</code> file in every project for the environment variables.</p>\n\n<p>However, I can't find a way to make <a href=\"https://github.com/asdf-vm/asdf-ruby\" rel=\"nofollow noreferrer\">asdf-vm</a> and <a href=\"https://github.com/asdf-vm/asdf-ruby\" rel=\"nofollow noreferrer\">asdf-ruby</a> to read the <code>.env</code> file and export all the env variables in there (or any file with the env variables).</p>\n\n<p>The docs on the same are quite scanty.</p>\n\n<p>How do you set environment variables using <code>asdf-vm</code> or <code>asdf-ruby</code> on a Rails project?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1573455368, "creation_date": 1573455368, "answer_id": 58796784, "question_id": 58796666, "link": "https://stackoverflow.com/questions/58796666/assign-value-to-a-variable-using-operator-with-if-condition-in-ruby/58796784#58796784", "title": "Assign value to a variable using || operator with if condition in Ruby", "body": "<p><code>competitions.where(code: params[:code])</code> returns a <code>Relation</code> object which is always truthy.</p>\n\n<p>Luckily enough, it implements <code>#presence</code> method, returning either the value if it\u2019s not blank, or <code>nil</code>. So, this should work:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>competitions.where(code: params[:code]).presence || ...\n</code></pre>\n"}], "owner": {"reputation": 892, "user_id": 7773783, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5bb636d4ba09884cefcea116363328a2?s=128&d=identicon&r=PG&f=1", "display_name": "Lax_Sam", "link": "https://stackoverflow.com/users/7773783/lax-sam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 58796784, "answer_count": 1, "score": 2, "last_activity_date": 1573457497, "creation_date": 1573454624, "last_edit_date": 1573457497, "question_id": 58796666, "link": "https://stackoverflow.com/questions/58796666/assign-value-to-a-variable-using-operator-with-if-condition-in-ruby", "title": "Assign value to a variable using || operator with if condition in Ruby", "body": "<p>I am trying to write logic for a search query. There are many different conditions with different parameters. One parameter sent from form is <code>code</code>. So there are <code>code</code> values in two different tables: <code>competitions</code> and <code>responses</code>. What I need is to check the <code>params[:code]</code> value first in <code>competitions</code> table and if it does not exist then check in <code>responses</code> table. If it does not exist in either table then it should return <code>nil</code>. I am trying to write it in a single <code>if</code> statement. The code I tried is below:</p>\n\n<pre><code>competitions = Competition.includes(:event, :responses)\nif params[:code].present?\n  competitions = (competitions.where(code: params[:code])) || \n  (competitions.joins(:responses).where(responses: { code: params[:code] }))\n</code></pre>\n\n<p>The above code checks only the value of <code>competitions.where(code: params[:code])</code>. If that value is <code>[]</code>, then it is not evaluating the second condition. What changes should I do to make the above code work as per the requirements mentioned above?</p>\n"}, {"tags": ["arrays", "ruby", "string", "byte", "bit"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1573458383, "post_id": 58794409, "comment_id": 103875405, "body": "Your <code>cipher</code> string contains 85 characters. How should the remaining 5 characters be handled?"}, {"owner": {"reputation": 11741, "user_id": 1934428, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/072774c5d4204a1c2385560e6114a887?s=128&d=identicon&r=PG", "display_name": "user1934428", "link": "https://stackoverflow.com/users/1934428/user1934428"}, "edited": false, "score": 0, "creation_date": 1573460028, "post_id": 58794409, "comment_id": 103875932, "body": "@KarolMazurek : Check the value of <code>j</code>. I bet it is an index outside of the <code>cipher_byte</code> array by the time the error occurs."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1573460575, "post_id": 58794537, "comment_id": 103876127, "body": "<i>&quot;you cannot yet index into it using [j]&quot;</i> \u2013 you can. <code>Array#[]</code> returns <code>nil</code> if the index is out of range. That&#39;s why the OP is getting a <code>NoMethodError</code> for <code>nil</code> rather than an <code>IndexError</code>"}], "tags": [], "owner": {"reputation": 1932, "user_id": 979255, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/06ce4c0f7ee07cf79c81ac6602f5d502?s=128&d=identicon&r=PG", "display_name": "j6m8", "link": "https://stackoverflow.com/users/979255/j6m8"}, "is_accepted": false, "score": 0, "last_activity_date": 1573436038, "creation_date": 1573436038, "answer_id": 58794537, "question_id": 58794409, "link": "https://stackoverflow.com/questions/58794409/bit-array-from-string/58794537#58794537", "title": "Bit array from string", "body": "<p>You are trying to push to <code>cipher_byte[j]</code>, which, as the error is telling you, isn't set to a value yet. (On the first iteration of the loop, you can imagine that <code>cipher_byte</code> is of length 0, since it's set to <code>[]</code>. Therefore, you cannot yet index into it using <code>[j]</code>.)</p>\n\n<p>You may want <code>cipher_byte.push</code>, rather than trying to push to a specific position. In Ruby, <code>.push</code> on an array will add that value to the end of the array; you don't need to reference that position with <code>j</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1573497287, "post_id": 58794538, "comment_id": 103893281, "body": "aka, put <code>cipher_byte[j] ||= []</code> before the line <code>cipher_byte[j].push(cipher[i])</code>. Which assigns the current <code>cipher_byte[j]</code> to an empty array if it&#39;s currently falsy."}], "tags": [], "owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "is_accepted": false, "score": 3, "last_activity_date": 1573436040, "creation_date": 1573436040, "answer_id": 58794538, "question_id": 58794409, "link": "https://stackoverflow.com/questions/58794409/bit-array-from-string/58794538#58794538", "title": "Bit array from string", "body": "<p>You're indexing an empty array (cipher_byte) and getting nil. Then calling push on an instance of nil</p>\n\n<p>You'll want to create a new array every etc iterations, then push that sub-array to the main array. </p>\n"}, {"tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": false, "score": 4, "last_activity_date": 1573436134, "creation_date": 1573436134, "answer_id": 58794543, "question_id": 58794409, "link": "https://stackoverflow.com/questions/58794409/bit-array-from-string/58794543#58794543", "title": "Bit array from string", "body": "<p>Easiest:</p>\n\n<pre><code>cipher.each_char.each_slice(8).map(&amp;:join)\n</code></pre>\n\n<p>Faster:</p>\n\n<pre><code>(0...cipher.length).step(8).map { |i| cipher[i, 8] }\n</code></pre>\n\n<p>Less code means less places an error could hide (as long the code is still readable). Ruby provides many idioms and methods to make things very intuitive and easy on the programmer. A <code>while</code> loop with a counter is rarely Rubyish; a <code>while</code> loop with an unconditionally incrementing counter never is.</p>\n"}, {"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1573469299, "post_id": 58794990, "comment_id": 103880045, "body": "Note that this solution leaves out trailing characters if not dividable by eight."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 8, "last_activity_date": 1573440805, "creation_date": 1573440805, "answer_id": 58794990, "question_id": 58794409, "link": "https://stackoverflow.com/questions/58794409/bit-array-from-string/58794990#58794990", "title": "Bit array from string", "body": "<pre><code>cipher.scan(/.{8}/)\n  #=&gt; [\"01111011\", \"10010111\", \"00100101\", \"00000001\", \"10101000\",\n  #    \"00100011\", \"11011100\", \"00110101\", \"10010000\", \"11001011\"]\n</code></pre>\n"}], "owner": {"reputation": 27, "user_id": 11582737, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nj7eyjxT6g8/AAAAAAAAAAI/AAAAAAAAAAg/jBWOSwVtMAw/photo.jpg?sz=128", "display_name": "Karol Mazurek", "link": "https://stackoverflow.com/users/11582737/karol-mazurek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 0, "accepted_answer_id": 58794990, "answer_count": 4, "score": 0, "last_activity_date": 1573440805, "creation_date": 1573434480, "question_id": 58794409, "link": "https://stackoverflow.com/questions/58794409/bit-array-from-string", "title": "Bit array from string", "body": "<p>I've got a string:</p>\n\n<pre><code>cipher = \"0111101110010111001001010000000110101000001000111101110000110101100100001100101100000\"\n</code></pre>\n\n<p>I want to slice it and store in array like this:\n[\"01111011\", \"10010111\" ... ] </p>\n\n<p>I tried this code, but i've got an error: </p>\n\n<blockquote>\n  <p>\"cz.rb:16:in <code>&lt;main&gt;': undefined method</code>push' for nil:NilClass\n  (NoMethodError)\"</p>\n</blockquote>\n\n<pre><code>i,j = 0,0\ncipher_byte = []\nwhile i &lt; cipher.length\n  if i != 0 and i % 8 == 0\n   j+=1\n  end\n  cipher_byte[j].push(cipher[i])\n  p cipher_byte\n  i+=1\nend\n</code></pre>\n\n<p>What's wrong with this?\nIt's ruby.</p>\n"}, {"tags": ["ruby", "macos", "cocoapods", "homebrew", "rvm"], "answers": [{"tags": [], "owner": {"reputation": 1323, "user_id": 1321751, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8d3d449b147c016517854ffd1ba94d9e?s=128&d=identicon&r=PG", "display_name": "mystic cola", "link": "https://stackoverflow.com/users/1321751/mystic-cola"}, "is_accepted": false, "score": 0, "last_activity_date": 1573434690, "creation_date": 1573434690, "answer_id": 58794436, "question_id": 58794068, "link": "https://stackoverflow.com/questions/58794068/cant-get-cocoapods-to-work-in-a-mixed-ruby-environment-osx-sierra/58794436#58794436", "title": "Can&#39;t get Cocoapods to work in a mixed Ruby Environment (OSX Sierra)", "body": "<p>Well THIS was a fun one.  Something screwed up must've happened when I tried to run:</p>\n\n<pre><code>sudo gem install -n /usr/local/bin cocoapods\n</code></pre>\n\n<p>Probably should've just run: \"brew install cocoapods\" but it's been a LONG time since I've run Homebrew.  I almost forgot the \"brew\" command existed.</p>\n\n<p>Anyway it became confused about which version of ruby I was using so I fixed this by making a .ruby-gemset file:</p>\n\n<p><strong>.ruby-gemset</strong></p>\n\n<pre><code>homebrew\n</code></pre>\n\n<p>...and a .ruby-version file:</p>\n\n<p><strong>.ruby-version</strong></p>\n\n<pre><code>ruby-2.3.3\n</code></pre>\n\n<p>After that it was a simple matter of running \"gem install bundler\" and \"bundle install\" with </p>\n\n<pre><code>gem 'cocoapods' \n</code></pre>\n\n<p>...in the Gemfile.</p>\n\n<p>That was it! Now Cocoapods works just fine and it's using the version of Ruby that I want it to use.</p>\n"}], "owner": {"reputation": 1323, "user_id": 1321751, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/8d3d449b147c016517854ffd1ba94d9e?s=128&d=identicon&r=PG", "display_name": "mystic cola", "link": "https://stackoverflow.com/users/1321751/mystic-cola"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 500, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1573434690, "creation_date": 1573430488, "question_id": 58794068, "link": "https://stackoverflow.com/questions/58794068/cant-get-cocoapods-to-work-in-a-mixed-ruby-environment-osx-sierra", "title": "Can&#39;t get Cocoapods to work in a mixed Ruby Environment (OSX Sierra)", "body": "<p>So I'm running OSX Sierra and I have a couple of Rails apps installed and Ruby 2.3.1 installed using rvm.</p>\n\n<p>This seems to have created some sort of a conflict with Cocoapods which was installed using Homebrew (brew install cocoapods).  Orginally I ran into the error that thread_safe wasn't installed... so I installed that (gem install thread_safe) THEN i ran into the problem that i18n wasn't installed... so I installed that... but I keep getting the error that it ISN'T installed.</p>\n\n<p>It looks like cocoapods is trying to run another ruby version (2.6.5) from /usr/bin/ while it's simultaneously trying to run gems from 2.3.1.</p>\n\n<p>I have NO IDEA how to fix this. Any help would be appreciated:</p>\n\n<pre><code>Traceback (most recent call last):\n    19: from /usr/local/Cellar/cocoapods/1.8.4/libexec/bin/pod:23:in `&lt;main&gt;'\n    18: from /usr/local/Cellar/cocoapods/1.8.4/libexec/bin/pod:23:in `load'\n    17: from /Users/rainless/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/cocoapods-1.8.4/bin/pod:36:in `&lt;top (required)&gt;'\n    16: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    15: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    14: from /Users/rainless/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/cocoapods-1.8.4/lib/cocoapods.rb:8:in `&lt;top (required)&gt;'\n    13: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    12: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n    11: from /Users/rainless/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.11.1/lib/active_support/core_ext/string/inflections.rb:1:in `&lt;top (required)&gt;'\n    10: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n     9: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n     8: from /Users/rainless/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.11.1/lib/active_support/inflector/methods.rb:3:in `&lt;top (required)&gt;'\n     7: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n     6: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n     5: from /Users/rainless/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.11.1/lib/active_support/inflections.rb:1:in `&lt;top (required)&gt;'\n     4: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n     3: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n     2: from /Users/rainless/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.11.1/lib/active_support/inflector/inflections.rb:1:in `&lt;top (required)&gt;'\n     1: from /usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require'\n/usr/local/Cellar/ruby/2.6.5/lib/ruby/2.6.0/rubygems/core_ext/kernel_require.rb:54:in `require': cannot load such file -- thread_safe (LoadError)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "reactjs", "redux", "react-router"], "answers": [{"tags": [], "owner": {"reputation": 77, "user_id": 11144349, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VAzzlupOBcg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-skDx5te7sG0o3DKxwwjmNHcW-A/mo/photo.jpg?sz=128", "display_name": "Morks", "link": "https://stackoverflow.com/users/11144349/morks"}, "is_accepted": false, "score": 0, "last_activity_date": 1573598583, "creation_date": 1573598583, "answer_id": 58827788, "question_id": 58793987, "link": "https://stackoverflow.com/questions/58793987/how-to-accomplish-nested-resources-with-rails-react-and-redux/58827788#58827788", "title": "How to accomplish nested resources with Rails, react, and Redux", "body": "<p>I just pushed those actions all into the reviews reducer and actions.</p>\n"}], "owner": {"reputation": 77, "user_id": 11144349, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-VAzzlupOBcg/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rc-skDx5te7sG0o3DKxwwjmNHcW-A/mo/photo.jpg?sz=128", "display_name": "Morks", "link": "https://stackoverflow.com/users/11144349/morks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573598583, "creation_date": 1573429564, "question_id": 58793987, "link": "https://stackoverflow.com/questions/58793987/how-to-accomplish-nested-resources-with-rails-react-and-redux", "title": "How to accomplish nested resources with Rails, react, and Redux", "body": "<p>My project has 3 models: users, concerts and reviews. I do not quite understand how to change between rendering nested and un-nested resources with React and redux. For example, having my reviews container render all reviews, a user's reviews, or a concert's reviews. In rails land this was easy because I could just define <code>@reviews</code> based on if I received a concert id or user id in the params. But for react/ redux I do not know how to achieve this.</p>\n\n<p>Currently I have reducers for reviews and for userReviews. My reviews container switches between them based on the url pathname. Do I need another reducer for concertReviews? That seems dirty. What else can I do?</p>\n"}, {"tags": ["regex", "ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1573423048, "post_id": 58793208, "comment_id": 103868223, "body": "What about something like <code>&#39;strdex&#39;</code> as an input?"}, {"owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1573423345, "post_id": 58793208, "comment_id": 103868270, "body": "<code>strdex</code> should return false. I edited my question to include a few more examples."}], "answers": [{"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 3, "last_activity_date": 1573422714, "creation_date": 1573422714, "answer_id": 58793259, "question_id": 58793208, "link": "https://stackoverflow.com/questions/58793208/how-can-i-return-true-only-if-one-of-a-set-of-strings-matches/58793259#58793259", "title": "How can I return true only if one of a set of strings matches?", "body": "<p>If you have to use a regex you may use</p>\n\n<pre><code>/\\A(?!(?:.*(str|con|dex|wis|int|cha)){2}).*\\g&lt;1&gt;/m\n</code></pre>\n\n<p>See the <a href=\"https://rubular.com/r/Q2EUfyAyHVFtVB\" rel=\"nofollow noreferrer\">regex demo</a></p>\n\n<p><strong>Details</strong></p>\n\n<ul>\n<li><code>\\A</code> - start of string</li>\n<li><code>(?!(?:.*(str|con|dex|wis|int|cha)){2})</code> - no two occurrences of any 0+ chars followed with <code>str</code>, <code>con</code>, <code>dex</code>, <code>wis</code>, <code>int</code>, <code>cha</code></li>\n<li><code>.*</code> - any 0+ chars as many as possible </li>\n<li><code>\\g&lt;1&gt;</code> - Group 1 pattern (<code>str</code>, <code>con</code>, <code>dex</code>, <code>wis</code>, <code>int</code> or <code>cha</code>).</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 8, "last_activity_date": 1573423783, "creation_date": 1573423783, "answer_id": 58793408, "question_id": 58793208, "link": "https://stackoverflow.com/questions/58793208/how-can-i-return-true-only-if-one-of-a-set-of-strings-matches/58793408#58793408", "title": "How can I return true only if one of a set of strings matches?", "body": "<p>I'd probably go with <a href=\"https://ruby-doc.org/core/String.html#method-i-scan\" rel=\"noreferrer\"><code>String#scan</code></a> and a simple regex so that you can understand what you've done later:</p>\n\n<pre><code>if input.scan(/str|dex|con|int|wis|cha/).length == 1\n  # Found exactly one\nelse\n  # Didn't find it or found too many\nend\n</code></pre>\n\n<p>That also makes it easier to distinguish between the various ways it can fail.</p>\n\n<p>Presumably your strings will be relatively small so scanning the string for all the matches won't have any noticeable overhead.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1580531187, "last_edit_date": 1580531187, "creation_date": 1573431235, "answer_id": 58794139, "question_id": 58793208, "link": "https://stackoverflow.com/questions/58793208/how-can-i-return-true-only-if-one-of-a-set-of-strings-matches/58794139#58794139", "title": "How can I return true only if one of a set of strings matches?", "body": "<p>The following are three ways to answer the question without creating an intermediate array. All employ the regular expression:</p>\n\n<pre><code>R = /str|con|dex|wis|int|cha/\n</code></pre>\n\n<p>and return the following:</p>\n\n<pre><code>one_match? \"It wasn't a con, really\"              #=&gt; true \none_match? \"That sounds to me like a wild guess.\" #=&gt; falsy (nil or false) \none_match? \"Both int and dex are present.\"        #=&gt; falsy (nil or false) \none_match? \"Three is an integer.\"                 #=&gt; true \none_match? \"Both int and indexes are present.\"    #=&gt; falsy (nil or false) \n</code></pre>\n\n<p><strong>#1 Do first and last match begin at the same index?</strong> </p>\n\n<pre><code>def one_match?(s)\n  (idx = s.index(R)) &amp;&amp; idx == s.rindex(R)\nend\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-index\" rel=\"nofollow noreferrer\">String#index</a> and <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-rindex\" rel=\"nofollow noreferrer\">String#rindex</a>.</p>\n\n<p><strong>#2 Use the form of <code>String#index</code> that takes an argument equal to the index at which the search is to begin.</strong></p>\n\n<pre><code>def one_match?(s)\n  s.index(R) &amp;&amp; s.index(R, Regexp.last_match.end(0)).nil?\nend\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Regexp.html#method-c-last_match\" rel=\"nofollow noreferrer\">Regexp::last_match</a> and <a href=\"https://ruby-doc.org/core-2.6.3/MatchData.html#method-i-end\" rel=\"nofollow noreferrer\">MatchData#end</a>. <code>Regexp.last_match</code> can be replaced by <code>$~</code>.</p>\n\n<p><strong>#3 Use the form of <a href=\"https://ruby-doc.org/core-2.6.3/String.html#method-i-gsub\" rel=\"nofollow noreferrer\">String#gsub</a> that takes one argument and no block to create an enumerator that generates matches</strong> </p>\n\n<pre><code>def one_match?(s)\n  s.gsub(/str|con|dex|wis|int|cha/).count { true } == 1\nend\n</code></pre>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.6.3/Enumerable.html#method-i-count\" rel=\"nofollow noreferrer\">Enumerable#count</a>.</p>\n\n<p>Alternatively,</p>\n\n<pre><code>s.gsub(/str|con|dex|wis|int|cha/).to_a.size == 1\n</code></pre>\n\n<p>though this has the disadvantage of creating a temporary array.</p>\n\n<p><strong>To match whole words only</strong></p>\n\n<p>In the penultimate example <code>'int'</code> matches <code>'int'</code> in <code>'integer'</code> and in the last match <code>'dex'</code> matches <code>'dex'</code> in <code>'indexes'</code>. To enforce full-word matches the regular expression can be changed to:</p>\n\n<pre><code>/\\b(?:str|con|dex|wis|int|cha)\\b/\n</code></pre>\n"}], "owner": {"reputation": 165, "user_id": 12326207, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDHsGq7X3-xykfi7nBJ3k3l1ptfcveGFc1DZ-Mj=k-s128", "display_name": "Richard", "link": "https://stackoverflow.com/users/12326207/richard"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 58793408, "answer_count": 3, "score": 4, "last_activity_date": 1580531187, "creation_date": 1573422280, "last_edit_date": 1573423298, "question_id": 58793208, "link": "https://stackoverflow.com/questions/58793208/how-can-i-return-true-only-if-one-of-a-set-of-strings-matches", "title": "How can I return true only if one of a set of strings matches?", "body": "<p>I want to return true if the user enters only one of a set of possible matches. Similar to an XOR operator, but only one string out of the entire group may exist in the input. Here is my code:</p>\n\n<pre><code>if input.match?(/str|con|dex|wis|int|cha/)\n</code></pre>\n\n<p>The following <code>input</code>s should return true:</p>\n\n<pre><code>+2 int\n-3con\nstr\ncon\nwisdom\ndexterity\n</code></pre>\n\n<p>The following <code>input</code>s should return false:</p>\n\n<pre><code>+1 int +2 cha\n-4dex+3con-1cha\nint cha\nstr dex\ncon wis cha\nstrength intelligence\nstrdex\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "postgresql", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 7060, "user_id": 1103892, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b34241dc41bec4c72dafa9cdd256fc26?s=128&d=identicon&r=PG&f=1", "display_name": "tomekfranek", "link": "https://stackoverflow.com/users/1103892/tomekfranek"}, "edited": false, "score": 0, "creation_date": 1573413778, "post_id": 58792068, "comment_id": 103865926, "body": "I think the problem still exists because we still <code>SUM</code> <i>ALL</i> <code>User</code> <code>mountain_routes.hearts_count</code> and we want to only get <code>hearts_count</code>  from <code>mountain_routes</code> in given date. But your solution will solve second problem how to order results by result of this <code>SUM</code>"}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1573414777, "last_edit_date": 1573414777, "creation_date": 1573413185, "answer_id": 58792068, "question_id": 58792012, "link": "https://stackoverflow.com/questions/58792012/how-to-add-where-scope-to-sum-in-activerecord/58792068#58792068", "title": "How to add where scope to SUM in ActiveRecord?", "body": "<p>You could use add an alias to <code>SUM(mountain_routes.hearts_count)</code> and use it in the order by clause:</p>\n\n<pre><code>::Db::User\n  .joins(:mountain_routes)\n  .where(mountain_routes: { route_type: :regular_climbing, created_at: range })\n  .select('users.id, SUM(mountain_routes.hearts_count) AS total_mountain_routes_hearts_count')\n  .group(:id)\n  .order('total_mountain_routes_hearts_count DESC')\n</code></pre>\n\n<p>You must first get rid of the distinct method, as you're already grouping by the <code>users.id</code>.</p>\n"}], "owner": {"reputation": 7060, "user_id": 1103892, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/b34241dc41bec4c72dafa9cdd256fc26?s=128&d=identicon&r=PG&f=1", "display_name": "tomekfranek", "link": "https://stackoverflow.com/users/1103892/tomekfranek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 1, "accepted_answer_id": 58792068, "answer_count": 1, "score": 1, "last_activity_date": 1573414777, "creation_date": 1573412790, "last_edit_date": 1573413101, "question_id": 58792012, "link": "https://stackoverflow.com/questions/58792012/how-to-add-where-scope-to-sum-in-activerecord", "title": "How to add where scope to SUM in ActiveRecord?", "body": "<p>I want to return Users sorted by their <code>mountain_routes.hearts_count</code> in current season.</p>\n\n<p>I already wrote a method for that, but my problem is <strong>it SUMs by all mountain_routes of the user</strong> and I want to only sort by <strong>SUM of users's mountain_routes in given <code>range</code></strong>.</p>\n\n<pre><code>def best_of_season\n  range = start_date..end_date\n  ::Db::User\n    .joins(:mountain_routes)\n    .where(mountain_routes: { route_type: 'regular_climbing', created_at: range })\n    .select('users.id, SUM(mountain_routes.hearts_count)')\n    .group('users.id')\n    .distinct\n    .order('SUM(mountain_routes.hearts_count) DESC')\nend\n</code></pre>\n\n<p>So the problem is in this part <code>SUM(mountain_routes.hearts_count)</code>.\nHow to put there only mountain routes in given <code>range</code>?</p>\n\n<p>I want to receive an output like this:</p>\n\n<pre><code>NAME   | HEARTS in this season\nThomas | 5\nDave   | 3\nErick  | 1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rbenv"], "comments": [{"owner": {"reputation": 61438, "user_id": 63034, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/ZXKMO.jpg?s=128&g=1", "display_name": "mikej", "link": "https://stackoverflow.com/users/63034/mikej"}, "edited": false, "score": 1, "creation_date": 1573405170, "post_id": 58790425, "comment_id": 103863474, "body": "Looks like you don&#39;t have the rbenv shims in your path, or the entry for the shims is after the entry for <code>&#47;usr&#47;bin</code>. What&#39;s the output when you run <code>which ruby</code> and <code>echo $PATH</code>?"}, {"owner": {"reputation": 136, "user_id": 5992910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d02e951c0b60c9b165357146dc2190f9?s=128&d=identicon&r=PG&f=1", "display_name": "datadaveshin", "link": "https://stackoverflow.com/users/5992910/datadaveshin"}, "edited": false, "score": 0, "creation_date": 1574144084, "post_id": 58790425, "comment_id": 104115892, "body": "^^ what&#39;s the answer to mikej&#39;s comment?"}], "answers": [{"comments": [{"owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "edited": false, "score": 0, "creation_date": 1573491330, "post_id": 58790510, "comment_id": 103890867, "body": "I did exactly like that when run still say error as there is not the right version of ruby installed"}], "tags": [], "owner": {"reputation": 5259, "user_id": 715286, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/BqXXo.jpg?s=128&g=1", "display_name": "Qortex", "link": "https://stackoverflow.com/users/715286/qortex"}, "is_accepted": false, "score": -1, "last_activity_date": 1573402344, "creation_date": 1573402344, "answer_id": 58790510, "question_id": 58790425, "link": "https://stackoverflow.com/questions/58790425/why-rbenv-does-not-work-on-mac-os-catalina/58790510#58790510", "title": "Why rbenv does not work on Mac OS Catalina", "body": "<p>Don't use a <code>global</code> versioning.</p>\n\n<p>Instead, put a file named <code>.ruby-version</code> at the root of your Rails project, with a single line content <code>2.4.1</code>.</p>\n\n<pre><code>echo \"2.4.1\" &gt; /your/rails/project/.ruby-version\n</code></pre>\n\n<p>It will tell <code>rbenv</code> to use this ruby version when current directory is your project directory.</p>\n"}, {"comments": [{"owner": {"reputation": 13638, "user_id": 4374566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d5ab25523e9e65cec29bb4fa303bd3?s=128&d=identicon&r=PG", "display_name": "Agney", "link": "https://stackoverflow.com/users/4374566/agney"}, "edited": false, "score": 1, "creation_date": 1579607543, "post_id": 58804915, "comment_id": 105815057, "body": "MacOS Catalina uses zsh by default, if you are using the same you want to add the line to <code>~&#47;.zshrc</code>"}, {"owner": {"reputation": 659, "user_id": 2695716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/51Wgc.jpg?s=128&g=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/2695716/dennis"}, "reply_to_user": {"reputation": 13638, "user_id": 4374566, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/61d5ab25523e9e65cec29bb4fa303bd3?s=128&d=identicon&r=PG", "display_name": "Agney", "link": "https://stackoverflow.com/users/4374566/agney"}, "edited": false, "score": 0, "creation_date": 1579710166, "post_id": 58804915, "comment_id": 105859539, "body": "Excellent addition. I&#39;ve updated my answer to reflect your comment."}], "tags": [], "owner": {"reputation": 659, "user_id": 2695716, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/51Wgc.jpg?s=128&g=1", "display_name": "Dennis", "link": "https://stackoverflow.com/users/2695716/dennis"}, "is_accepted": false, "score": 5, "last_activity_date": 1579710136, "last_edit_date": 1579710136, "creation_date": 1573488788, "answer_id": 58804915, "question_id": 58790425, "link": "https://stackoverflow.com/questions/58790425/why-rbenv-does-not-work-on-mac-os-catalina/58804915#58804915", "title": "Why rbenv does not work on Mac OS Catalina", "body": "<p>Try <code>eval \"$(rbenv init -)\"</code>. If that solves your problem, add that line to your .bash_profile or ~/.zshrc (Credits to @Agney, see comment below)</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 3520823, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2dc56cdf954818859ec748b155127929?s=128&d=identicon&r=PG&f=1", "display_name": "Jennifer Byrne", "link": "https://stackoverflow.com/users/3520823/jennifer-byrne"}, "is_accepted": false, "score": 0, "last_activity_date": 1578600019, "creation_date": 1578600019, "answer_id": 59671302, "question_id": 58790425, "link": "https://stackoverflow.com/questions/58790425/why-rbenv-does-not-work-on-mac-os-catalina/59671302#59671302", "title": "Why rbenv does not work on Mac OS Catalina", "body": "<p>It's likely Catalina's switch from bash to zsh that's causing the problem:</p>\n\n<p><a href=\"https://programmingzen.com/installing-rbenv-on-zsh-on-macos/\" rel=\"nofollow noreferrer\">https://programmingzen.com/installing-rbenv-on-zsh-on-macos/</a></p>\n\n<p>Thankfully, it's pretty simple to go back to bash:</p>\n\n<p><a href=\"https://www.howtogeek.com/444596/how-to-change-the-default-shell-to-bash-in-macos-catalina/\" rel=\"nofollow noreferrer\">https://www.howtogeek.com/444596/how-to-change-the-default-shell-to-bash-in-macos-catalina/</a></p>\n"}], "owner": {"reputation": 1251, "user_id": 7882685, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/94b65eaecdd85aebae0bcbca18d4b651?s=128&d=identicon&r=PG&f=1", "display_name": "Jakub", "link": "https://stackoverflow.com/users/7882685/jakub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1854, "favorite_count": 1, "answer_count": 3, "score": 2, "last_activity_date": 1579710136, "creation_date": 1573401738, "question_id": 58790425, "link": "https://stackoverflow.com/questions/58790425/why-rbenv-does-not-work-on-mac-os-catalina", "title": "Why rbenv does not work on Mac OS Catalina", "body": "<p>I'm trying to run a Ruby on Rails project which has the version <code>2.4.1</code>and my system is <code>2.6.x</code>.\nWhat I did was install via Rbenv the old version of Ruby then I did the following commands:</p>\n\n<pre><code>rbenv global 2.4.1 -&gt; to change global Ruby version\n\nruby -v \nruby 2.6.5p114\n\nrbenv global\n2.4.1\n</code></pre>\n\n<p>So there is something wrong as I would like to use 2.4.1 but seems not working that. I'm unable to start the bundle as it is saying I don't have 2.4.1 installed.</p>\n\n<p>I need a solution to Mac OS Catalina as I did as I found online but nothing works and cannot be started the project. </p>\n"}, {"tags": ["ruby", "postgresql"], "comments": [{"owner": {"reputation": 876, "user_id": 1178968, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/4d574942e2627e5a01262657dda8a299?s=128&d=identicon&r=PG", "display_name": "acrogenesis", "link": "https://stackoverflow.com/users/1178968/acrogenesis"}, "edited": false, "score": 2, "creation_date": 1573400241, "post_id": 58790106, "comment_id": 103862111, "body": "What error does running <code>gem install pg -v &#39;1.1.4&#39; --source &#39;https:&#47;&#47;rubygems.org&#47;&#39;</code> give."}, {"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1573405119, "post_id": 58790106, "comment_id": 103863454, "body": "Which operating system?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1573470009, "post_id": 58790106, "comment_id": 103880378, "body": "What is the error? What have you tried? There are several common solutions to this which you can find online, e.g. <a href=\"https://stackoverflow.com/questions/19262312/installing-pg-gem-on-os-x-failure-to-build-native-extension\">these</a>"}], "owner": {"reputation": 9, "user_id": 8963882, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-0EtrQBSRTxI/AAAAAAAAAAI/AAAAAAAAc_s/IzlgVR8ljBg/photo.jpg?sz=128", "display_name": "Shubinder Virk", "link": "https://stackoverflow.com/users/8963882/shubinder-virk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573399772, "creation_date": 1573399772, "question_id": 58790106, "link": "https://stackoverflow.com/questions/58790106/postgres-pg-gem-cannot-be-installed", "title": "Postgres &#39;pg&#39; gem cannot be installed", "body": "<p>I have included the pg gem in the Gemfile with a \"gem 'pg' \", but it is throwing the following error. </p>\n\n<p>An error occurred while installing pg (1.1.4), and Bundler cannot continue.\nMake sure that <code>gem install pg -v '1.1.4' --source 'https://rubygems.org/'</code> succeeds before bundling.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 2, "last_activity_date": 1573397284, "creation_date": 1573397284, "answer_id": 58789785, "question_id": 58789282, "link": "https://stackoverflow.com/questions/58789282/rails-query-to-select-parent-record-only-where-all-has-manys-association-are-t/58789785#58789785", "title": "Rails query to select parent record only where all has_many&#39;s association are `true`", "body": "<p>The join clause won't be enough because you need to check that the <code>read</code> column value for each <code>page</code> children from a book parent isn't false.</p>\n\n<p>You can explicitly add the needed filter using <code>where</code>:</p>\n\n<pre><code>Book.where.not(id: Page.where(read: false).select(:book_id))\n</code></pre>\n\n<p>By using <code>select</code> in <code>Page.where(read: false)</code> Rails performs a single query like:</p>\n\n<pre><code>SELECT \"books\".*\nFROM \"books\"\nWHERE \"books\".\"id\" NOT IN (\n  SELECT \"pages\".\"book_id\"\n  FROM \"pages\"\n  WHERE \"pages\".\"read\" = $1\n) [[\"read\", false]]\n</code></pre>\n"}], "owner": {"reputation": 1366, "user_id": 1843422, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/l4DDN.jpg?s=128&g=1", "display_name": "There Are Four Lights", "link": "https://stackoverflow.com/users/1843422/there-are-four-lights"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 1, "accepted_answer_id": 58789785, "answer_count": 1, "score": 2, "last_activity_date": 1573407511, "creation_date": 1573393677, "last_edit_date": 1573395429, "question_id": 58789282, "link": "https://stackoverflow.com/questions/58789282/rails-query-to-select-parent-record-only-where-all-has-manys-association-are-t", "title": "Rails query to select parent record only where all has_many&#39;s association are `true`", "body": "<ul>\n<li><p>Book <code>has_many</code> Pages</p></li>\n<li><p>Page <code>belongs_to</code> Book</p></li>\n<li><p>Page has a boolean attribute <code>read</code></p></li>\n</ul>\n\n<p>This way a Book id: 1 record may have:</p>\n\n<ul>\n<li>page 1 with <code>read</code> true</li>\n<li>page 2 with <code>read</code> true</li>\n<li>page 3 with <code>read</code> false</li>\n</ul>\n\n<p>And then, Book id: 2 is:</p>\n\n<ul>\n<li>page 1 with <code>read</code> true</li>\n<li>page 2 with <code>read</code> true</li>\n</ul>\n\n<p>This way only Book id: 2 must be returned from the query.</p>\n\n<p>Currently I have:</p>\n\n<pre><code>Book.includes(:pages).where(pages: {read: true})\n</code></pre>\n\n<p>And it's returning both Book <code>id: 1</code> and <code>id: 2</code>.</p>\n\n<p>How it could be fixed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "edited": false, "score": 0, "creation_date": 1573393444, "post_id": 58789220, "comment_id": 103860339, "body": "Sorry, typo, corrected it now"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1573488143, "post_id": 58789367, "comment_id": 103889315, "body": "<code>a.all?(String)</code> should work too (in a recent ruby)"}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 4, "last_activity_date": 1573486491, "last_edit_date": 1573486491, "creation_date": 1573394305, "answer_id": 58789367, "question_id": 58789220, "link": "https://stackoverflow.com/questions/58789220/ruby-two-conditions-in-case-statement/58789367#58789367", "title": "Ruby: Two conditions in Case statement", "body": "<p>The conditions in a <code>case</code> statement are not Boolean expressions; they are values that are compared against the target object using the <code>===</code> operator. Of course, any class can override that operator, but the predefined one only returns true for a small set of conditions (like <code>is_a?</code>, equals, is contained in, <code>=~</code>...). Having a Boolean expression as the <code>when</code> condition doesn't trigger a match when that expression is true; it triggers a match when the target object <code>===</code> the value of the expression, and for most objects, <code>obj === true</code> is not itself true.</p>\n\n<p>So you might want to swap out your <code>case</code> for an <code>if</code>/<code>else</code> chain in this instance:</p>\n\n<pre><code>if a.is_a? String\n  puts 'string'\nelsif a.is_a?(Array) &amp;&amp; a.all? { |obj| obj.is_a? String }\n  puts 'an array with only string classes'\nelse\n  raise ArgumentError, \"unsupported object #{a}:#{a.class}\"\nend\n</code></pre>\n\n<p>Or do a nested check inside the case condition. But then you would have two <code>else</code> states, one for the <code>if</code> (meaning it matched the array case but wasn't all strings) and one for the <code>case</code> (meaning it was something else entirely). So rather than duplicate the error-handling code like that, I used a boolean variable to indicate when an error needed to be <code>raise</code>d:</p>\n\n<pre><code>ok = false\ncase a\n when String\n  puts 'string'\n  ok = true\n when Array\n  if a.all? { |obj| obj.is_a? String }\n    puts 'an array with only string classes'\n    ok = true\n  end\nend\nif !ok \n  raise ArgumentError, \"unsupported object #{a}:#{a.class}\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 0, "last_activity_date": 1573488430, "last_edit_date": 1573488430, "creation_date": 1573487866, "answer_id": 58804698, "question_id": 58789220, "link": "https://stackoverflow.com/questions/58789220/ruby-two-conditions-in-case-statement/58804698#58804698", "title": "Ruby: Two conditions in Case statement", "body": "<p>Use pattern-matching!</p>\n\n<pre><code>a = ['one','twon']\n\ncase a\nin String\n  puts 'string'\nin Array if a.all?(String)\n  puts 'an array with only string classes'\nelse\n  raise ArgumentError, \"unsupported object #{a}:#{a.class}\"\nend\n</code></pre>\n\n<hr>\n\n<p><sup>* ruby 2.7+<br/>\n** experimental feature</sup></p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 58789367, "answer_count": 2, "score": 0, "last_activity_date": 1573488430, "creation_date": 1573393157, "last_edit_date": 1573393431, "question_id": 58789220, "link": "https://stackoverflow.com/questions/58789220/ruby-two-conditions-in-case-statement", "title": "Ruby: Two conditions in Case statement", "body": "<p>How do I use a case statement and check for two conditions?</p>\n\n<p>I need to check that an item is an array and only contains string classes.</p>\n\n<pre><code>a = ['one','twon']  # =&gt; [\"one\", \"twon\"]\n\ncase a                                                                         # =&gt; \nwhen String\n  puts \"string\nwhen Array &amp;&amp; a.all?{|obj| obj.is_a?(String) }\n   puts 'an array with only string classes'\nelse\n  raise ArgumentError, \"unsupported object #{obj}:#{obj.class}\"\nend\n</code></pre>\n\n<p>The above code returns the <code>else</code> case, when it should be returning the \"an array with only string classes\" statement</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 3, "creation_date": 1573395835, "post_id": 58789081, "comment_id": 103860937, "body": "This is a very generic question.  Sometimes inheritance makes sense, sometimes including or extending via a module makes sense, and sometimes injecting an object with the method(s) might make sense (aka strategy pattern).  Perhaps you can provide more details, such as what the shared method does and how it relates to both classes."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1573409967, "post_id": 58789081, "comment_id": 103864851, "body": "@nPn probably just showing them an example of inheritance and including a module would answer the question"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1573414552, "creation_date": 1573414552, "answer_id": 58792244, "question_id": 58789081, "link": "https://stackoverflow.com/questions/58789081/how-to-share-methods-between-rails-sidekiq-workers/58792244#58792244", "title": "How to share methods between rails sidekiq workers", "body": "<p>You can put your shared methods in a module and just include them into your worker classes.  </p>\n\n<pre><code>module Workify\n  def method_to_share\n    puts \"hooray we're DRY!\"\n  end\nend\n\nclass PriceReminderWorker\n  include Sidekiq::Worker\n  sidekiq_options queue: 'price_alerts'\nend\n\nclass PriceNotificationWorker\n  include Sidekiq::Worker\n  sidekiq_options queue: 'price_alerts'\nend\n</code></pre>\n\n<p>Both worker classes now have access to the method defined in the module.</p>\n"}, {"tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": true, "score": 1, "last_activity_date": 1573418604, "last_edit_date": 1573418604, "creation_date": 1573418297, "answer_id": 58792715, "question_id": 58789081, "link": "https://stackoverflow.com/questions/58789081/how-to-share-methods-between-rails-sidekiq-workers/58792715#58792715", "title": "How to share methods between rails sidekiq workers", "body": "<p>I would use inheritance if it makes sense to you for example that <code>PriceReminderWorker</code> and <code>PriceNotificationWorker</code> are both a <code>PriceWorker</code> and the methods you want to share make sense in the <code>PriceWorker</code> context.  For example in Rails it makes sense that all Models are an <code>ApplicationRecord</code></p>\n\n<p>I would include the methods in a Module, if the methods you want to share merely take advantage of some common \"trait\" that both classes share.  For example in Ruby both the Array class and the Hash class share a \"trait\", they both implement a <code>foreach</code> method that can accept a block and call that block for each member of its collection.  In this case both classes include the <code>Enumerable</code> module. </p>\n"}], "owner": {"reputation": 725, "user_id": 9774506, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Falko", "link": "https://stackoverflow.com/users/9774506/falko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 388, "favorite_count": 0, "accepted_answer_id": 58792715, "answer_count": 2, "score": 1, "last_activity_date": 1573418604, "creation_date": 1573392174, "last_edit_date": 1573393022, "question_id": 58789081, "link": "https://stackoverflow.com/questions/58789081/how-to-share-methods-between-rails-sidekiq-workers", "title": "How to share methods between rails sidekiq workers", "body": "<p>I have two sidekiq workers in a rails app and I'm wondering what the best way to share code between them would be.</p>\n\n<pre><code>class PriceReminderWorker\n  include Sidekiq::Worker\n  sidekiq_options queue: 'price_alerts'\n\n  def method_to_share\n    stuff\n  end \nend\n</code></pre>\n\n<p>and </p>\n\n<pre><code>class PriceNotificationWorker\n  include Sidekiq::Worker\n  sidekiq_options queue: 'price_alerts'\n\n  def method_to_share\n    stuff\n  end \nend\n</code></pre>\n\n<p>Would the 'rails/ruby way' to be inherit from a parent class, or add a new module perhaps?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1573413659, "post_id": 58789005, "comment_id": 103865900, "body": "If this were <a href=\"https://codegolf.stackexchange.com/\">Code Golf</a> I&#39;d suggest <code>arr==arr.grep(String)</code>."}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 2, "creation_date": 1573424410, "post_id": 58789030, "comment_id": 103868509, "body": "If you use one of the newer Ruby versions you could also provide a pattern: <code>collection.all?(String)</code>"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 5, "last_activity_date": 1573391745, "creation_date": 1573391745, "answer_id": 58789030, "question_id": 58789005, "link": "https://stackoverflow.com/questions/58789005/check-that-array-only-contains-string-objects/58789030#58789030", "title": "Check that array only contains string objects", "body": "<p>What about using <a href=\"https://ruby-doc.org/core-2.5.1/Enumerable.html#method-i-all-3F\" rel=\"noreferrer\"><code>all?</code></a></p>\n\n<pre><code>def contains_only_string_class(collection)\n  collection.all? { |obj| obj.is_a?(String) }\nend\n</code></pre>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1573391745, "creation_date": 1573391577, "question_id": 58789005, "link": "https://stackoverflow.com/questions/58789005/check-that-array-only-contains-string-objects", "title": "Check that array only contains string objects", "body": "<p>Is there a more concise way than the below to check if an array only contains String class objects?</p>\n\n<pre><code>a = ['one','twon','three']  # =&gt; [\"one\", \"twon\", \"three\"]\n\nb = ['one','twon', 1 ]  # =&gt; [\"one\", \"twon\", 1]\n\nc = ['one','twon', {one: 1} ]  # =&gt; [\"one\", \"twon\", {:one=&gt;1}]\n\ndef contains_only_string_class(object)\n  uniq_a= object.map{ |i| i.class }.uniq          # =&gt; [String], [String, Integer], [String, Hash]\n  uniq_a.include?(String) &amp; (uniq_a.length == 1)  # =&gt; true,     false,             false\nend                                               # =&gt; :contains_only_string_class\n\ncontains_only_string_class(a)  # =&gt; true\ncontains_only_string_class(b)  # =&gt; false\ncontains_only_string_class(c)  # =&gt; false\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 1, "creation_date": 1573425817, "post_id": 58788364, "comment_id": 103868843, "body": "If only there were some way to mark Ruby methods as <code>private</code> so developers knew they should stay away from them! If only."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573507965, "post_id": 58788364, "comment_id": 103897317, "body": "@anothermh: Unfortunately, good names are finite resources. For example, <code>send</code> is a good name for a method that sends a message to an object, it is also a good name for a method that sends an email. Now, if you write an <code>Email</code> class that has a <code>send</code> method, you have just broken reflection. That&#39;s why Ruby calls the method <code>__send__</code> (and provides <code>send</code> only as an optional alias)."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1573507816, "creation_date": 1573507816, "answer_id": 58808953, "question_id": 58788364, "link": "https://stackoverflow.com/questions/58788364/some-wrapper-syntax-when-to-use-and-not-use/58808953#58808953", "title": "__some_wrapper__ syntax (when to use and not use)", "body": "<blockquote>\n  <p>I have seen this syntax in ruby for a number of items and I wanted to learn more about when it's used.</p>\n</blockquote>\n\n<p>This is just a method definition like any other method definition. An underscore is a legal part of an identifier. It doesn't have any special meaning whatsoever.</p>\n\n<blockquote>\n  <p>When and where are two lower dashes <code>__</code> before and after a name used? What's the rule for it? I have seen it used for method names, and such.</p>\n</blockquote>\n\n<p>As with any other name, a developer uses such a name when she thinks that it is the right name to use for this thing. There is absolutely no difference whatsoever between the names <code>\u2705</code> or <code>foo</code> or <code>add</code> or <code>__some_wrapper__</code>. You choose the name which best conveys the intent of the method.</p>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1573507816, "creation_date": 1573386655, "question_id": 58788364, "link": "https://stackoverflow.com/questions/58788364/some-wrapper-syntax-when-to-use-and-not-use", "title": "__some_wrapper__ syntax (when to use and not use)", "body": "<p>I have seen this syntax in ruby for a number of items and I wanted to learn more about when it's used.</p>\n\n<pre><code>def  __some_wrapper__\n  @__some_wrapper__ ||= SomeClass.new(self)\nend\n</code></pre>\n\n<p>When and where are two lower dashes <code>__</code> before and after a name used? What's the rule for it? I have seen it used for method names, and such.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance", "subclass"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1573405462, "post_id": 58787007, "comment_id": 103863569, "body": "Why <code>force: :cascade</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1573405580, "creation_date": 1573405580, "answer_id": 58790981, "question_id": 58787007, "link": "https://stackoverflow.com/questions/58787007/ruby-inheritance-child-instance-has-only-parent-attributes/58790981#58790981", "title": "Ruby inheritance - child instance has only parent attributes", "body": "<p>In Ruby you an really only inherit from another class if you're using <a href=\"https://api.rubyonrails.org/classes/ActiveRecord/Inheritance.html\" rel=\"nofollow noreferrer\">Single Table Inheritance</a>, that is two types that share a common table and the table has a string <code>type</code> column.</p>\n\n<p>Since you're declaring <code>B</code> to be a subclass of <code>A</code>, ActiveRecord takes that to mean the <code>b</code> table is irrelevant, that <code>B</code> uses the <code>A</code> table.</p>\n\n<p>What you need is:</p>\n\n<pre><code>create_table \"a\", force: :cascade do |t|\n  t.string \"type\"\n  t.string \"name\"\n  t.string \"bankname\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\nend\n</code></pre>\n\n<p>Where now you can accommodate STI. Note that all columns are visible to all models, but you can make \"bankname\" optional for A, or just ignore it, leave it unused.</p>\n"}], "owner": {"reputation": 33, "user_id": 8458558, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qUWTU.jpg?s=128&g=1", "display_name": "Yony Yossef", "link": "https://stackoverflow.com/users/8458558/yony-yossef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 139, "favorite_count": 0, "accepted_answer_id": 58790981, "answer_count": 1, "score": 1, "last_activity_date": 1573440432, "creation_date": 1573375492, "last_edit_date": 1573440432, "question_id": 58787007, "link": "https://stackoverflow.com/questions/58787007/ruby-inheritance-child-instance-has-only-parent-attributes", "title": "Ruby inheritance - child instance has only parent attributes", "body": "<p>it is my first time using Ruby subclass inheritence.\nI have a parent class A with an attribute \"name:string\",\nand a child class B &lt; A with an attribute \"bankname:string\".</p>\n\n<p>When I use rails console to create a B instance (B.new) I get an object with \"name:string\" only, and without the \"bankname:string\" attribute.</p>\n\n<p>My Schema looks like this:</p>\n\n<pre><code> create_table \"a\", force: :cascade do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"b\", force: :cascade do |t|\n    t.string   \"bankname\"\n    t.datetime \"created_at\",     null: false\n    t.datetime \"updated_at\",     null: false\n  end\n</code></pre>\n\n<p>My models are:</p>\n\n<pre><code>class A &lt; ApplicationRecord\nend\n\nclass B &lt; A\nend\n</code></pre>\n\n<p>Console:</p>\n\n<pre><code>2.4.0 :010 &gt; c = B.new\n =&gt; #&lt;B id: nil, name: nil, created_at: nil, updated_at: nil&gt;\n</code></pre>\n"}, {"tags": ["ruby", "rvm"], "comments": [{"owner": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573426412, "post_id": 58786273, "comment_id": 103868976, "body": "Did you read rake.log?"}, {"owner": {"reputation": 1, "user_id": 12349985, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDZsDLHvOKhbybmjrtxhjo4pVG1AFbTD3b82FEnPQ=k-s128", "display_name": "Marisa Kirisame", "link": "https://stackoverflow.com/users/12349985/marisa-kirisame"}, "reply_to_user": {"reputation": 6462, "user_id": 3784008, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/55ou4.jpg?s=128&g=1", "display_name": "anothermh", "link": "https://stackoverflow.com/users/3784008/anothermh"}, "edited": false, "score": 0, "creation_date": 1573915635, "post_id": 58786273, "comment_id": 104049085, "body": "Yes ,it had. But it has 9k lines . I added it."}], "owner": {"reputation": 1, "user_id": 12349985, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AAuE7mDZsDLHvOKhbybmjrtxhjo4pVG1AFbTD3b82FEnPQ=k-s128", "display_name": "Marisa Kirisame", "link": "https://stackoverflow.com/users/12349985/marisa-kirisame"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1573916337, "creation_date": 1573367213, "last_edit_date": 1573916337, "question_id": 58786273, "link": "https://stackoverflow.com/questions/58786273/error-running-ruby-2-3-1rubinius-rake-install-trace", "title": "Error running ruby-2.3.1@rubinius/rake install --trace&#39;", "body": "<p>I wanted to install rbx in my PC. After installing rvm on my wsl(ubuntu), I try \"rvm install rbx\" command. But it has some problems when it's compiling.</p>\n\n<p>The OS is Windows 10's wsl(Ubuntu), and installed ruby 2.5,rvm 1.29.9.</p>\n\n<pre><code>marisa@DESKTOP-IHFBOLV:~$ rvm install rbx --\nrbx-4.1 - #removing src/rbx-4.1..\nChecking requirements for ubuntu.\nRequirements installation successful.\nruby-2.3.1@rubinius - #regenerating binstubs...........\nrbx-4.1 - #downloading rubinius-4.1, this may take a while depending on your connection...\nrbx-4.1 - #extracting rubinius-4.1 to /usr/share/rvm/src/rbx-4.1.....\nrbx-4.1 - #configuring......................\nrbx-4.1 - #compiling...................................................................................................\n</code></pre>\n\n<p>|</p>\n\n<pre><code>Error running '/home/marisa/.rvm/wrappers/ruby-2.3.1@rubinius/rake install --trace',\nplease read /home/marisa/.rvm/log/1573364723_rbx-4.1/rake.log\n</code></pre>\n\n<p>Because of the length of log (about 9k lines) , I show a part of the end of log :</p>\n\n<pre><code>creating extconf.h\ncreating Makefile\nmake\ncompiling openssl_missing.c\nIn file included from openssl_missing.c:21:\n./openssl_missing.h:78:31: error: too many arguments provided to function-like macro invocation\nEVP_MD_CTX *EVP_MD_CTX_create(void);\n                          ^\n/usr/include/openssl/evp.h:537:10: note: macro 'EVP_MD_CTX_create' defined here\n# define EVP_MD_CTX_create()     EVP_MD_CTX_new()\n     ^\nIn file included from openssl_missing.c:21:\n./openssl_missing.h:82:22: warning: type specifier missing, defaults to 'int' [-Wimplicit-int]\nvoid EVP_MD_CTX_init(EVP_MD_CTX *ctx);\n                 ^\n./openssl_missing.h:82:6: error: conflicting types for 'EVP_MD_CTX_reset'\nvoid EVP_MD_CTX_init(EVP_MD_CTX *ctx);\n ^\n/usr/include/openssl/evp.h:538:34: note: expanded from macro 'EVP_MD_CTX_init'\n# define EVP_MD_CTX_init(ctx)    EVP_MD_CTX_reset((ctx))\n/usr/include/openssl/evp.h:535:5: note: previous declaration is here\nint EVP_MD_CTX_reset(EVP_MD_CTX *ctx);\n    ^\nIn file included from openssl_missing.c:21:\n./openssl_missing.h:90:25: warning: type specifier missing, defaults to 'int' [-Wimplicit-int]\nvoid EVP_MD_CTX_destroy(EVP_MD_CTX *ctx);\n                    ^\n./openssl_missing.h:90:6: error: conflicting types for 'EVP_MD_CTX_free'\nvoid EVP_MD_CTX_destroy(EVP_MD_CTX *ctx);\n     ^\n/usr/include/openssl/evp.h:539:34: note: expanded from macro 'EVP_MD_CTX_destroy'\n# define EVP_MD_CTX_destroy(ctx) EVP_MD_CTX_free((ctx))\n                             ^\n/usr/include/openssl/evp.h:536:6: note: previous declaration is here\nvoid EVP_MD_CTX_free(EVP_MD_CTX *ctx);\n ^\nopenssl_missing.c:53:19: error: too many arguments provided to function-like macro invocation\nEVP_MD_CTX_create(void)\n              ^\n/usr/include/openssl/evp.h:537:10: note: macro 'EVP_MD_CTX_create' defined here\n# define EVP_MD_CTX_create()     EVP_MD_CTX_new()\n         ^\nopenssl_missing.c:53:18: error: expected ';' after top level declarator                                                 \nEVP_MD_CTX_create(void)                                                                                                                  \n^\n             ;\n2 warnings and 5 errors generated.\nMakefile:229: recipe for target 'openssl_missing.o' failed\nmake: *** [openssl_missing.o] Error 1\nrake aborted!\nCommand failed with status (2): [make...]\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/file_utils.rb:66:in `block in create_she\\ll_runner'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/file_utils.rb:57:in `sh'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/file_utils_ext.rb:37:in `sh'\n/usr/share/rvm/src/rbx-4.1/rakelib/core.rake:137:in `block in build_extension'\nopenssl_missing.c:53:18: error: expected ';' after top level declarator\nEVP_MD_CTX_create(void)\n/usr/share/rvm/src/rbx-4.1/rakelib/core.rake:202:in `block (3 levels) in &lt;top (required)&gt;'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/file_list.rb:81:in `each'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake- 10.4.2/lib/rake/file_list.rb:81:in `each'\n/usr/share/rvm/src/rbx-4.1/rakelib/core.rake:201:in `block (2 levels) in &lt;top (required)&gt;'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:240:in `block in execute'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `each'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:235:in `execute'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:179:in `block in invoke_with_cal\\l_chain'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:201:in `block in invoke_prerequi\\sites'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `each'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `invoke_prerequisites'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:178:in `block in invoke_with_cal\\l_chain'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:201:in `block in invoke_prerequi\\sites'                                                                                                                  \n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `each'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `invoke_prerequisites'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:178:in `block in invoke_with_cal\\l_chain'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:201:in `block in invoke_prerequi\\sites'                                                                                                                  \n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `each'                    \n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:199:in `invoke_prerequisites'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:178:in `block in invoke_with_cal\\l_chain'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:172:in `invoke_with_call_chain'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/task.rb:165:in `invoke'                  \n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/application.rb:150:in `invoke_task'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block (2 levels) \\in top_level'                                                                                                           \n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `each'             /usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/application.rb:106:in `block in top_leve\\l'                                                                                                                      \n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/application.rb:115:in `run_with_threads'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/application.rb:100:in `top_level'        \n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/application.rb:78:in `block in run'\n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/application.rb:176:in `standard_exceptio\\n_handling'                                                                                                             \n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/lib/rake/application.rb:75:in `run'               \n/usr/share/rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/rake-10.4.2/bin/rake:33:in `&lt;top (required)&gt;'\n/usr/share/rvm/rubies/ruby-2.3.1/bin/rake:23:in `load'\n/usr/share/rvm/rubies/ruby-2.3.1/bin/rake:23:in `&lt;main&gt;'\n/home/marisa/.rvm/gems/ruby-2.3.1@rubinius/bin/ruby_executable_hooks:24:in `eval'\n/home/marisa/.rvm/gems/ruby-2.3.1@rubinius/bin/ruby_executable_hooks:24:in `&lt;main&gt;'\nTasks: TOP =&gt; install =&gt; build:build =&gt; core:build =&gt; codedb:extensions\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "sorting"], "comments": [{"owner": {"reputation": 25637, "user_id": 6243352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/715f60f9edc65642a6805752cfeebb27?s=128&d=identicon&r=PG&f=1", "display_name": "ggorlen", "link": "https://stackoverflow.com/users/6243352/ggorlen"}, "edited": false, "score": 0, "creation_date": 1573359542, "post_id": 58785615, "comment_id": 103854283, "body": "Can you show what <code>cards</code> looks like and a concrete example of the actual and expected results? Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 541, "user_id": 12244608, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rP6EG.jpg?s=128&g=1", "display_name": "TedTran2019", "link": "https://stackoverflow.com/users/12244608/tedtran2019"}, "edited": false, "score": 0, "creation_date": 1573369406, "post_id": 58785844, "comment_id": 103855453, "body": "Damn, that&#39;s clean as hell. I&#39;ve always done the full |a, b| a &lt;=&gt; b, and swapping to b &lt;=&gt; a for a reverse sort. But that way you did it is actually so much cleaner"}], "tags": [], "owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "is_accepted": false, "score": 1, "last_activity_date": 1573361748, "creation_date": 1573361748, "answer_id": 58785844, "question_id": 58785615, "link": "https://stackoverflow.com/questions/58785615/how-to-sort-array-in-descending-order/58785844#58785844", "title": "How to sort array in descending order", "body": "<p>You should use the sort_by method of Ruby's <a href=\"https://ruby-doc.org/core-2.6.5/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\">Enumerable</a> module. </p>\n\n<p>The basic idea is you provide a block that maps each value in the enumeration into a numerical value that can be used to sort the collection.</p>\n\n<p>For example if you have a collection of Strings and you want to sort them by length you can use something like this where each item in the collection is mapped to its size/length.  The first example sorts the array in ascending order while the second sorts in descending order.</p>\n\n<pre><code>my_array = [\"a\", \"aa\", \"aaaa\", \"aaa\"]\n\nputs my_array.sort_by { |item| item.size }\nputs my_array.sort_by { |item| -item.size }\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 12073412, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4bda2b9a82fca2bc202a988fd938cc16?s=128&d=identicon&r=PG&f=1", "display_name": "codebaby2", "link": "https://stackoverflow.com/users/12073412/codebaby2"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 0, "closed_date": 1573362737, "answer_count": 1, "score": 0, "last_activity_date": 1573361748, "creation_date": 1573358424, "question_id": 58785615, "link": "https://stackoverflow.com/questions/58785615/how-to-sort-array-in-descending-order", "closed_reason": "Duplicate", "title": "How to sort array in descending order", "body": "<p>I have a method that prints out my cards below. I want to create a method that will print out the cards in descending order. I would have to create a new method. I've tried a few things but here I am. </p>\n\n<pre><code>    def print_cards    \n      cards.all.each.with_index(1) do |card, index|\n        puts \"#{index}. #{card.name}\"\n      end \n    end \n\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 1, "creation_date": 1573363280, "post_id": 58785603, "comment_id": 103854686, "body": "Questions seeking debugging help (&quot;why isn&#39;t this code working?&quot;) must include the desired behavior, a specific problem or error and the shortest code necessary to reproduce it in the question itself. See: <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">How to create a Minimal, Reproducible Example</a>. Move the code out of the view code, provide minimal input data in <code>orders</code>."}], "answers": [{"comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1573368073, "post_id": 58786329, "comment_id": 103855272, "body": "Yes, I was just about to comment, it looks like you are summing the inner <code>map</code> but not the outer one. Glad you figured it out!"}], "tags": [], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "is_accepted": true, "score": 1, "last_activity_date": 1573367999, "creation_date": 1573367999, "answer_id": 58786329, "question_id": 58785603, "link": "https://stackoverflow.com/questions/58785603/output-sum-of-decimal-float-array-rails/58786329#58786329", "title": "Output sum of decimal/float array rails", "body": "<pre><code>&lt;%= @orders.map do |order| %&gt;\n   &lt;% if Product.exists?(sku: order.line_items.where().map {|li| li.sku }) %&gt;\n      &lt;% order.line_items.where(vendor_name: @vendor.vendor_name).map do |li| %&gt;\n          &lt;% if Product.exists?(sku: li.sku) %&gt;\n              &lt;% product = Product.find_by(sku: li.sku ) %&gt;\n              &lt;% ((li.store_price.to_d * li.store_fulfillable_quantity) - (product.production_price * li.store_fulfillable_quantity)) * (0.70) %&gt;\n          &lt;% end %&gt;\n       &lt;% end.compact.sum %&gt;\n   &lt;% end %&gt;\n&lt;% end.compact.sum %&gt;\n</code></pre>\n\n<p>Is how i got it to work</p>\n"}, {"tags": [], "owner": {"reputation": 314, "user_id": 9948990, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0153057b15f61830fd2df6e2fad26562?s=128&d=identicon&r=PG&f=1", "display_name": "moe zarrinfam", "link": "https://stackoverflow.com/users/9948990/moe-zarrinfam"}, "is_accepted": false, "score": 0, "last_activity_date": 1573383385, "creation_date": 1573383385, "answer_id": 58787946, "question_id": 58785603, "link": "https://stackoverflow.com/questions/58785603/output-sum-of-decimal-float-array-rails/58787946#58787946", "title": "Output sum of decimal/float array rails", "body": "<p>method <code>reduce</code> in arrays designed for getting reduced value of collection:</p>\n\n<pre><code>array.compact.reduce(:+)\n# =&gt; Sum of array\n</code></pre>\n\n<p>more info about <a href=\"https://apidock.com/ruby/Enumerable/reduce\" rel=\"nofollow noreferrer\">reduce</a></p>\n"}], "owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 58786329, "answer_count": 2, "score": 0, "last_activity_date": 1573383385, "creation_date": 1573358263, "question_id": 58785603, "link": "https://stackoverflow.com/questions/58785603/output-sum-of-decimal-float-array-rails", "title": "Output sum of decimal/float array rails", "body": "<p>I have the following which i thought would get me the sum of the array but doesnt:</p>\n\n<pre><code>&lt;% @orders.each do |order| %&gt;\n   &lt;% if Product.exists?(sku: order.line_items.where().map {|li| li.sku }) %&gt;\n      &lt;%= order.line_items.where(vendor_name: @vendor.vendor_name).map do |li| %&gt;\n          &lt;% if Product.exists?(sku: li.sku) %&gt;\n              &lt;% product = Product.find_by(sku: li.sku ) %&gt;\n              &lt;% ((li.store_price.to_d * li.store_fulfillable_quantity) - (product.production_price * li.store_fulfillable_quantity)) * (0.70) %&gt;\n          &lt;% end %&gt;\n       &lt;% end.compact.sum %&gt;\n   &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The output is something like:</p>\n\n<p><code>25.21 25.21 12.66 5.33 12.66 9.01</code></p>\n\n<p>I need to add these numbers.  How can I do this with the decimals/floats?</p>\n\n<p>When I use </p>\n\n<pre><code>&lt;%= @orders.each do |order| %&gt;\n</code></pre>\n\n<p>I get <code>undefined method + for nilclass</code> for the line that is on, and it's not nil but obviously I'm missing some factor on how sum works.</p>\n"}]