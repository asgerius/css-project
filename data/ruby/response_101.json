[{"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems", "mailchimp"], "comments": [{"owner": {"reputation": 567, "user_id": 2133083, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1eff23520876dc4ba8e040424fedbc4b?s=128&d=identicon&r=PG", "display_name": "Tom Connolly", "link": "https://stackoverflow.com/users/2133083/tom-connolly"}, "edited": false, "score": 0, "creation_date": 1481766505, "post_id": 41154013, "comment_id": 69512143, "body": "The Rails guides on how to set up email is pretty clear Binding of caller has nothing to do with email. Show 1. At what point is the Mailer supposed to act (sometimes this is in the model, sometimes in the controller. Show us both the controller for and the model for wherever you are capturing the visitor information. Does it populate the :users table? Start with posting these and the exact error message you&#39;re getting, and you&#39;ll get help from me or someone else."}, {"owner": {"reputation": 13, "user_id": 7144385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f3276ed1820d074d48bb30772391bb?s=128&d=identicon&r=PG&f=1", "display_name": "aspiring", "link": "https://stackoverflow.com/users/7144385/aspiring"}, "reply_to_user": {"reputation": 567, "user_id": 2133083, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1eff23520876dc4ba8e040424fedbc4b?s=128&d=identicon&r=PG", "display_name": "Tom Connolly", "link": "https://stackoverflow.com/users/2133083/tom-connolly"}, "edited": false, "score": 0, "creation_date": 1481769171, "post_id": 41154013, "comment_id": 69512817, "body": "ok sir thank you I will"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 7144385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f3276ed1820d074d48bb30772391bb?s=128&d=identicon&r=PG&f=1", "display_name": "aspiring", "link": "https://stackoverflow.com/users/7144385/aspiring"}, "edited": false, "score": 0, "creation_date": 1482519383, "post_id": 41158275, "comment_id": 69816066, "body": "Thank you sir , still on the learning curve , however I need to read the basics again . I noticed the problem already and will resolve this issue later on as I progress.Thank you for all the help"}], "tags": [], "owner": {"reputation": 426, "user_id": 4908755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VslE1.jpg?s=128&g=1", "display_name": "Neeraj Rana", "link": "https://stackoverflow.com/users/4908755/neeraj-rana"}, "is_accepted": false, "score": 0, "last_activity_date": 1481785412, "creation_date": 1481785412, "answer_id": 41158275, "question_id": 41154013, "link": "https://stackoverflow.com/questions/41154013/an-smtp-to-address-is-required-to-send-a-message-argument-errror/41158275#41158275", "title": "An SMTP To address is required to send a message/Argument Errror", "body": "<p>You need to generate a mailer first.</p>\n\n<pre><code>rails g mailer example_mailer\n</code></pre>\n\n<p>app/mailers/example_mailer.rb This file will be generated by this line.</p>\n\n<p>Then you need to create a method in your mailer where u can define whom to send mail. you can give direct email id or you can take it from database. As in my given example u need to pass user to this method and it will send email to that user's email. </p>\n\n<pre><code>  def sample_email(user)\n    @user = user\n    mail(to: @user.email, subject: 'Sample Email')\n  end\n</code></pre>\n\n<p>Create a HTML template for how your mail will look </p>\n\n<blockquote>\n  <p>app/views/example_mailer/sample_email.html.erb</p>\n</blockquote>\n\n<pre><code>&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n  &lt;head&gt;\n    &lt;meta content='text/html; charset=UTF-8' http-equiv='Content-Type' /&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;h1&gt;Hi &lt;%= @user.name %&gt;&lt;/h1&gt;\n    &lt;p&gt;\n      Sample mail sent using smtp.\n    &lt;/p&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>Then you need to configure your smtp in /config/environments/production.rb or /config/environments/development.rb whichever environment you are using.</p>\n\n<pre><code>config.action_mailer.delivery_method = :smtp\n# SMTP settings for gmail\nconfig.action_mailer.smtp_settings = {\n :address              =&gt; \"smtp.gmail.com\",\n :port                 =&gt; 587,\n :user_name            =&gt; 'username@gmail.com',\n :password             =&gt; 'Gmail password',\n :authentication       =&gt; \"plain\",\n:enable_starttls_auto =&gt; true\n}\n</code></pre>\n\n<p>Then you need to trigger your mail action any any method from where you are sending mails. </p>\n\n<pre><code>ExampleMailer.sample_email(@user).deliver\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 7144385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58f3276ed1820d074d48bb30772391bb?s=128&d=identicon&r=PG&f=1", "display_name": "aspiring", "link": "https://stackoverflow.com/users/7144385/aspiring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481785412, "creation_date": 1481758177, "question_id": 41154013, "link": "https://stackoverflow.com/questions/41154013/an-smtp-to-address-is-required-to-send-a-message-argument-errror", "title": "An SMTP To address is required to send a message/Argument Errror", "body": "<p><a href=\"https://i.stack.imgur.com/7MLi2.jpg\" rel=\"nofollow noreferrer\">ArgumentError at /contacts\nAn SMTP To address is required to send a message. Set the message smtp_envelope_to, to, cc, or bcc address.</a></p>\n\n<p>Good Day Guys,I am having trouble debugging this myself and have consumed so much time I needed your help and explanation as to how why it didn't work.</p>\n\n<p>Things I did already:\n1.Added gem 'binding_of_caller'\n2.bundle install</p>\n\n<p>goal: \nIs when a visitor submit a contact form it supposed to send me a email message automatically.</p>\n\n<p>My woes/confusion:</p>\n\n<p>1.How do you set your email in secrets.yml or put your email wherein you configured the contact form request directly to your email\n2.What I did is put\n  to:myemail.com > secrets.yml both in production and development \n3.Am I right?</p>\n\n<p>Please explain this to me as I am going in depth on ruby on rails.</p>\n"}, {"tags": ["ruby", "apache", "tomcat", "dashing"], "comments": [{"owner": {"reputation": 18098, "user_id": 276232, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c7dd5b284cb4046a3f3dd0ede614e12a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schultz", "link": "https://stackoverflow.com/users/276232/christopher-schultz"}, "edited": false, "score": 0, "creation_date": 1481843389, "post_id": 41153985, "comment_id": 69550233, "body": "<b>DO NOT USE <code>ProxyRequests On</code>. This will enable forward-proxying which is NOT what you want.</b>"}, {"owner": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "reply_to_user": {"reputation": 18098, "user_id": 276232, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/c7dd5b284cb4046a3f3dd0ede614e12a?s=128&d=identicon&r=PG&f=1", "display_name": "Christopher Schultz", "link": "https://stackoverflow.com/users/276232/christopher-schultz"}, "edited": false, "score": 0, "creation_date": 1481916882, "post_id": 41153985, "comment_id": 69582365, "body": "@ChristopherSchultz Thanks, you&#39;re right I didn&#39;t need that"}], "answers": [{"comments": [{"owner": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 0, "creation_date": 1481816679, "post_id": 41160001, "comment_id": 69536505, "body": "But the how cant I get setup the <code>RewriteCond</code> for this. The <code>RewriteRule</code> should only affect the Ruby application (App2)."}, {"owner": {"reputation": 8781, "user_id": 1145196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53c5ca172519bd0b533ff762ecccf05?s=128&d=identicon&r=PG", "display_name": "Dusan Bajic", "link": "https://stackoverflow.com/users/1145196/dusan-bajic"}, "reply_to_user": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 0, "creation_date": 1481817107, "post_id": 41160001, "comment_id": 69536783, "body": "There was nothing about Rewrite in your question :). What URL exactly do you want to rewrite, and to what?"}, {"owner": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 0, "creation_date": 1481826153, "post_id": 41160001, "comment_id": 69542016, "body": "I&#39;d like to rewrite the response coming back from <code>http:&#47;&#47;192.168.0.62:3030&#47;</code>. The Rewrite in the question does that, but seems  The problem is, the response header says the referrer is 192.168.0.62 so i had to use the Reverse definition from the question"}, {"owner": {"reputation": 8781, "user_id": 1145196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53c5ca172519bd0b533ff762ecccf05?s=128&d=identicon&r=PG", "display_name": "Dusan Bajic", "link": "https://stackoverflow.com/users/1145196/dusan-bajic"}, "reply_to_user": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 0, "creation_date": 1481837027, "post_id": 41160001, "comment_id": 69547562, "body": "I don&#39;t understand what are you trying to achieve (beside simple proxying to two backend apps, depending on the URI): mod_rewrite is rewriting requests, not responses; Referer: is request header, not response header. What exactly doesn&#39;t work if you just use the ProxyPass directives as above, can you give an example?"}, {"owner": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "edited": false, "score": 0, "creation_date": 1482165542, "post_id": 41160001, "comment_id": 69653184, "body": "Thanks, I figured out that my issue isn&#39;t the app server as much as it is the application I&#39;m trying to host."}], "tags": [], "owner": {"reputation": 8781, "user_id": 1145196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d53c5ca172519bd0b533ff762ecccf05?s=128&d=identicon&r=PG", "display_name": "Dusan Bajic", "link": "https://stackoverflow.com/users/1145196/dusan-bajic"}, "is_accepted": true, "score": 1, "last_activity_date": 1481792162, "creation_date": 1481792162, "answer_id": 41160001, "question_id": 41153985, "link": "https://stackoverflow.com/questions/41153985/host-2-application-under-one-domain-apache-httpd/41160001#41160001", "title": "Host 2 application under one domain Apache HTTPD", "body": "<p>It should be as simple as this:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n  ServerName mysingledomain.com\n  ProxyPreserveHost On\n\n  ProxyPass /App1/  http://127.0.0.1:8080/\n  ProxyPassReverse /App1/  http://127.0.0.1:8080/\n\n  ProxyPass /App2/  http://127.0.0.1:3030/\n  ProxyPassReverse /App2/  http://127.0.0.1:3030/\n&lt;/VirtualHost&gt;\n</code></pre>\n"}], "owner": {"reputation": 918, "user_id": 2133905, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/Y4wcC.jpg?s=128&g=1", "display_name": "SGM1", "link": "https://stackoverflow.com/users/2133905/sgm1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 137, "favorite_count": 0, "accepted_answer_id": 41160001, "answer_count": 1, "score": 0, "last_activity_date": 1481843500, "creation_date": 1481757982, "last_edit_date": 1495542652, "question_id": 41153985, "link": "https://stackoverflow.com/questions/41153985/host-2-application-under-one-domain-apache-httpd", "title": "Host 2 application under one domain Apache HTTPD", "body": "<p>I'm trying to configure Apache HTTPD 2.4 to front two different applications being hosted on the same server.</p>\n\n<p>App1 is reachable on port 8080 (Tomcat)</p>\n\n<pre><code>mysingledomain.com:8080\n</code></pre>\n\n<p>App2 is reachable on port 3030 (Ruby [Dashing])</p>\n\n<pre><code>mysingledomain.com:3030\n</code></pre>\n\n<p>What I want to do is reach them respectively as <code>mysingledomain.com/App1</code> and <code>mysingledomain.com/App2</code></p>\n\n<p>My situation is a lot like how this question start:\n<a href=\"https://stackoverflow.com/questions/12339044/how-to-run-multiple-sites-on-one-apache-instance\">Host 2 Sites in HTTPD</a></p>\n\n<p>These are both SPA applications but I'm getting quite confused on how to set this up when I do not have a DocumentRoot to separate the configuration.</p>\n\n<p>How would I setup HTTPD to front the HTTP requests in this manner?</p>\n\n<p>I was able to configure the ruby application to adhere to a subpath with the following configuration, but this affects the other:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n  ProxyRequests On # &lt;---- WARNING DO NOT DO THIS\n  ProxyVia On\n  ProxyPreserveHost On\n  RewriteEngine On\n\n  ProxyPass \"/app2\"  \"http://192.168.0.62:3030/\" retry=0\n  ProxyPassReverse \"/app2/\"  \"http://192.168.0.62/\"\n\n  RewriteRule   \"^/assets/(.*)\"    \"/app2/assets/$1\"  [R]\n  RewriteRule   \"^/views/(.*)\"    \"/app2/views/$1\"  [R]\n&lt;/VirtualHost&gt;\n</code></pre>\n"}, {"tags": ["ruby", "reverse"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1481802526, "post_id": 41153903, "comment_id": 69527371, "body": "I&#39;ve updated my answer, see for a more Rubyish approach."}], "answers": [{"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": true, "score": 0, "last_activity_date": 1481912334, "last_edit_date": 1481912334, "creation_date": 1481758736, "answer_id": 41154102, "question_id": 41153903, "link": "https://stackoverflow.com/questions/41153903/ruby-reverse-mutating-list/41154102#41154102", "title": "Ruby: reverse, mutating list", "body": "<p>This <em>mutates</em> the original array as requested. <code>nil</code> is eliminated by being aware that the last element of the list is at <code>list[list.length-1]</code>.</p>\n\n<pre><code>def reverse(list)\n  a = list.length-1\n  while a &gt;= 0\n    list &lt;&lt; list[a]\n    list.delete_at(a)\n    a = a - 1\n  end\n  list\nend\n\np reverse([1, 2, 3]) #=&gt; [3, 2, 1]\n</code></pre>\n\n<p>A more Ruby way could be as follows:</p>\n\n<pre><code>arr.sort_by!.with_index { |_,i| -i }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1481776571, "last_edit_date": 1481776571, "creation_date": 1481770582, "answer_id": 41155684, "question_id": 41153903, "link": "https://stackoverflow.com/questions/41153903/ruby-reverse-mutating-list/41155684#41155684", "title": "Ruby: reverse, mutating list", "body": "<p>I understand the list is to be reversed in place (mutated). Below are two ways to do that.</p>\n\n<p>If the list is not to be mutated, simply operate on a copy:</p>\n\n<pre><code>def non_mutating_reverse(list)\n  reverse(list.dup)\nend\n</code></pre>\n\n<p><strong>#1</strong></p>\n\n<p>Use <em>parallel assignment</em> (sometimes called <em>multiple assignment</em>).</p>\n\n<pre><code>def reverse(list)\n  (list.size/2).times { |i| list[i], list[-1-i] = list[-1-i], list[i] }\n  list\nend\n\nlist = [1,2,3]\nreverse list     #=&gt; [3, 2, 1] \nlist             #=&gt; [3, 2, 1] \n</code></pre>\n\n<p>Notice that when the size of the list is odd (as in this example), the middle element is not moved.</p>\n\n<p><strong>#2</strong></p>\n\n<pre><code>def reverse(list)\n  list.replace(list.size.times.with_object([]) { |i,a| a.unshift(list[i]) })\nend\n\nlist = [1,2,3]\nreverse list     #=&gt; [3, 2, 1] \nlist             #=&gt; [3, 2, 1] \n</code></pre>\n"}], "owner": {"reputation": 43, "user_id": 7196884, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/689a2eeb24b654dbbf439a4b52e8aa9b?s=128&d=identicon&r=PG&f=1", "display_name": "dzikakoza", "link": "https://stackoverflow.com/users/7196884/dzikakoza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "accepted_answer_id": 41154102, "answer_count": 2, "score": 0, "last_activity_date": 1481912334, "creation_date": 1481757521, "last_edit_date": 1481757662, "question_id": 41153903, "link": "https://stackoverflow.com/questions/41153903/ruby-reverse-mutating-list", "title": "Ruby: reverse, mutating list", "body": "<p>I'm trying to write a method, which reverses a list, but not using .reverse.\nHere is my code:</p>\n\n<pre><code>def reverse(list)\n\n  a = list.length\n\n  while a &gt;= 0\n    list &lt;&lt; list[a]\n    a = a - 1\n  end\n  list\nend\n\nprint reverse([1,2,3])\n</code></pre>\n\n<p>My expected result isn't [3,2,1] but [1, 2, 3, nil, 3, 2, 1]</p>\n\n<p>Do you have any advice how to not repeat the original list once again, but only mutate it? </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1481757577, "post_id": 41153701, "comment_id": 69509760, "body": "Are you using ruby or jruby?"}, {"owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "reply_to_user": {"reputation": 6596, "user_id": 5021321, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/29f10a1b457e63d44e3a221e89e32c17?s=128&d=identicon&r=PG", "display_name": "Eli Sadoff", "link": "https://stackoverflow.com/users/5021321/eli-sadoff"}, "edited": false, "score": 0, "creation_date": 1481757804, "post_id": 41153701, "comment_id": 69509810, "body": "Ruby since I&#39;m using <code>irb</code>, but I&#39;ve tried it with <code>jirb</code> too and I get the same result."}], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 122, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481756771, "creation_date": 1481756357, "last_edit_date": 1481756771, "question_id": 41153701, "link": "https://stackoverflow.com/questions/41153701/loaderror-cannot-load-such-file-commons-math-2-2-jar", "title": "LoadError: cannot load such file -- commons-math-2.2.jar", "body": "<p>I'm trying to use this gem: <a href=\"http://sciruby.com/blog/2013/11/07/statistics-with-ruby-time-series-and-general-linear-models/\" rel=\"nofollow noreferrer\">Statsample, short blog post about using it</a></p>\n\n<p>Here is a quick way to reproduce the error (using ruby 2.3.1p112)</p>\n\n<pre><code>gem install statsample\ngem install statsample-timeseries\nirb\nrequire 'statsample-timeseries'\n</code></pre>\n\n<p>Result:</p>\n\n<pre><code>LoadError: cannot load such file -- commons-math-2.2.jar\n</code></pre>\n\n<p>I've tried installing some additional gems/libs but they don't make the error go away.</p>\n\n<pre><code>gem install sciruby-full\napt-get install libcommons-math-java\n</code></pre>\n\n<p>It's not clear what I'm missing. Do I need to <code>apt-get</code> a certain library? Why is it trying to load a jar?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 173, "user_id": 4933098, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ec3ab3be25ee9c09b825139c9578804?s=128&d=identicon&r=PG&f=1", "display_name": "MLZ", "link": "https://stackoverflow.com/users/4933098/mlz"}, "edited": false, "score": 0, "creation_date": 1481760862, "post_id": 41153823, "comment_id": 69510667, "body": "That worked, thank you for your explanation. So your saying by using render, Rails fetched people/index.html.erb using only the data inside sessions#create, while completely skipping over processing people#index?"}, {"owner": {"reputation": 516, "user_id": 3295407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WqEep.png?s=128&g=1", "display_name": "etdev", "link": "https://stackoverflow.com/users/3295407/etdev"}, "reply_to_user": {"reputation": 173, "user_id": 4933098, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ec3ab3be25ee9c09b825139c9578804?s=128&d=identicon&r=PG&f=1", "display_name": "MLZ", "link": "https://stackoverflow.com/users/4933098/mlz"}, "edited": false, "score": 1, "creation_date": 1481850133, "post_id": 41153823, "comment_id": 69552151, "body": "Yep.  You need to make a new request to access a different controller action.  The render method doesn&#39;t make requests, but the redirect_to method does."}], "tags": [], "owner": {"reputation": 516, "user_id": 3295407, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/WqEep.png?s=128&g=1", "display_name": "etdev", "link": "https://stackoverflow.com/users/3295407/etdev"}, "is_accepted": true, "score": 1, "last_activity_date": 1481756959, "creation_date": 1481756959, "answer_id": 41153823, "question_id": 41153642, "link": "https://stackoverflow.com/questions/41153642/rails-is-not-able-to-grab-an-object-array-when-i-render-a-controller-action/41153823#41153823", "title": "Rails is not able to grab an object array when I render a controller action", "body": "<p>The <code>render</code> method just renders a template using the data in the current action.  You should use <code>redirect_to</code> instead.</p>\n\n<p>From the <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow noreferrer\">Rails layouts and rendering guide:</a></p>\n\n<blockquote>\n  <p>Another way to handle returning responses to an HTTP request is with\n  redirect_to. As you've seen, render tells Rails which view (or other\n  asset) to use in constructing a response. The redirect_to method does\n  something completely different: it tells the browser to send a new\n  request for a different URL.</p>\n</blockquote>\n\n<p>You probably want something like this:</p>\n\n<pre><code>def create\n  @person = Person.find_by(email: params[:session][:email].downcase)\n  if @person &amp;&amp; @person.authenticate(params[:session][:password])\n    session[:user_id] = @person.id\n    redirect_to people_path\n  else\n    render 'new'\n  end\nend\n</code></pre>\n\n<p>Note I also changed it to <code>render 'new'</code> since the controller is <code>sessions</code> not <code>session</code> and you don't even need to specify it in this case.</p>\n\n<p>I would also consider renaming the <code>@person</code> instance variable in the <code>people#index</code> action to <code>@people</code>.</p>\n"}], "owner": {"reputation": 173, "user_id": 4933098, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/1ec3ab3be25ee9c09b825139c9578804?s=128&d=identicon&r=PG&f=1", "display_name": "MLZ", "link": "https://stackoverflow.com/users/4933098/mlz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 41153823, "answer_count": 1, "score": 0, "last_activity_date": 1481756959, "creation_date": 1481756081, "question_id": 41153642, "link": "https://stackoverflow.com/questions/41153642/rails-is-not-able-to-grab-an-object-array-when-i-render-a-controller-action", "title": "Rails is not able to grab an object array when I render a controller action", "body": "<p>I have 2 controllers:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\ndef create\n  @person = Person.find_by(email: params[:session][:email].downcase)\n  if @person &amp;&amp; @person.authenticate(params[:session][:password])\n    session[:user_id] = @person.id\n    render('people/index')\n  else\n    render('session/new')\n  end\nend\n\nclass PeopleController &lt; ApplicationController\n\ndef index\n  @person = Person.all\nend\n</code></pre>\n\n<p>My view is the following:</p>\n\n<pre><code>...\n\n&lt;% @person.each do |p| %&gt;\n&lt;tr&gt;\n  &lt;td&gt;&lt;%= p.name %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= p.gender %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= p.birthdate %&gt;&lt;/td&gt;\n  &lt;td&gt;&lt;%= p.interests_concatenated %&gt;&lt;/td&gt;\n&lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>When I enter a user's credential and try to login, I get the following error message:</p>\n\n<p>NoMethodError in Sessions#create\nShowing /Users/fizz/workspace/rails_people/app/views/people/index.html.erb where line #11 raised:\nundefined method `each' for #Person:0x007fd345aa1778</p>\n\n<p>It looks like Rails is not grabbing the Person.all array and setting it into the @person variable, but why?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "methods"], "answers": [{"tags": [], "owner": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "is_accepted": true, "score": 1, "last_activity_date": 1481789938, "creation_date": 1481789938, "answer_id": 41159411, "question_id": 41153627, "link": "https://stackoverflow.com/questions/41153627/how-to-add-a-method-to-a-ruby-on-rails-class-that-operates-on-a-collection-crite/41159411#41159411", "title": "How to add a method to a Ruby on Rails class that operates on a collection/criteria of objects?", "body": "<p>the <code>all</code> class method returns the current scope so you can use that.  You can use <code>self</code> for the same effect.  But the best of all is that you can just call an existing scope which should work as well.</p>\n\n<pre><code>def self.oldest_approval_date\n  oldest = which_are_compliant.oldest_state_change.first\n  oldest ? oldest.current_compliance_state_date : nil\nend\n</code></pre>\n"}], "owner": {"reputation": 442, "user_id": 1091619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd785cf24cda2b82dc4a31f38949f814?s=128&d=identicon&r=PG", "display_name": "Chip Roberson", "link": "https://stackoverflow.com/users/1091619/chip-roberson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "accepted_answer_id": 41159411, "answer_count": 1, "score": 0, "last_activity_date": 1481789938, "creation_date": 1481755992, "last_edit_date": 1495542293, "question_id": 41153627, "link": "https://stackoverflow.com/questions/41153627/how-to-add-a-method-to-a-ruby-on-rails-class-that-operates-on-a-collection-crite", "title": "How to add a method to a Ruby on Rails class that operates on a collection/criteria of objects?", "body": "<p>I know that I can create an instance method to operate on a particular instance of class and a class method to operate on the class itself. I also know that I can define scopes to select a group of objects based on some criteria I specify.</p>\n\n<p>However, in my case, I have a field <code>date_of_last_approval</code> and I want to take an initial set of objects (pops) and then filter down until I find the oldest and then extract that field. With scopes and the AndAnd gem, I created a class method like this:</p>\n\n<pre><code>def self.oldest_approval_date(pops)\n  oldest = pops.which_are_compliant.oldest_state_change.first\n  oldest ? oldest.current_compliance_state_date : nil\nend\n</code></pre>\n\n<p>which I can call as <code>x = Pop.oldest_approval_date(user.pops)</code>.</p>\n\n<p>However, it seems to me that I should be able to define a method that operates at the tail end of a chain of scopes, so I could have:</p>\n\n<pre><code>x = user.pops.oldest_approval_date\n</code></pre>\n\n<p>I found <a href=\"https://stackoverflow.com/questions/19336070/how-to-add-a-method-to-an-activerecord-collection\">one article</a> which seems to address this but I was surprised there is not more discussion around this. What is the general philosophy regarding designing methods like this and if it is acceptable what is the best form? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "encryption", "devise", "bcrypt"], "comments": [{"owner": {"reputation": 567, "user_id": 2133083, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1eff23520876dc4ba8e040424fedbc4b?s=128&d=identicon&r=PG", "display_name": "Tom Connolly", "link": "https://stackoverflow.com/users/2133083/tom-connolly"}, "edited": false, "score": 0, "creation_date": 1481768068, "post_id": 41153588, "comment_id": 69512532, "body": "I&#39;m confused about whether you can be in production and development at the same time, and even if you could be why you would want to? If you&#39;re deployed you have access to only the production db, afaik.  You are correct that the passwords will never match. There&#39;s a way to suppress the password in the logs, if that is what you&#39;re wanting to protect. How about not creating the user until he has supplied a password? That password will be seen only by him, as Devise will encrypt it on its way to the server."}, {"owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "reply_to_user": {"reputation": 567, "user_id": 2133083, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1eff23520876dc4ba8e040424fedbc4b?s=128&d=identicon&r=PG", "display_name": "Tom Connolly", "link": "https://stackoverflow.com/users/2133083/tom-connolly"}, "edited": false, "score": 0, "creation_date": 1481817870, "post_id": 41153588, "comment_id": 69537338, "body": "Yeah production and staging are on two separate servers and separate IP addresses. I only have access to the plain text password at the moment the user signs in so the workaround I have now is to send that password over HTTP to sign into staging and if it passes send back a Devise <code>:authentication_token</code> and redirect with <code>?token=xxx</code> appended to the url. I would much prefer to compare two encrypted passwords if possible."}], "owner": {"reputation": 1825, "user_id": 772309, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/e22e46e4e9a0bc49ae068749a1315e86?s=128&d=identicon&r=PG", "display_name": "Ryan Grush", "link": "https://stackoverflow.com/users/772309/ryan-grush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 146, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481755807, "creation_date": 1481755807, "question_id": 41153588, "link": "https://stackoverflow.com/questions/41153588/compare-two-bcrypt-encrypted-hashes-ruby", "title": "Compare two BCrypt encrypted hashes (Ruby)", "body": "<p>I have two encrypted hashes that I want to compare and see if they are the same original plain text passwords, is that possible?</p>\n\n<p>I control both databases (one is staging, the other production). My use case is that I want to have it so that when a user logs into production, it will check the staging environment and attempt to log them into by comparing the encrypted password hash from each database. The main reason is I might have to do this after the initially login (won't have the plain text password at that point) and would like to avoid passing the plain text over HTTPS. </p>\n\n<p>The problem that I'm figuring out now is that the same plain text password will have a different encrypted output. I'm using Devise in Rails btw if that helps.</p>\n\n<p><strong>Production</strong></p>\n\n<p>\"welcome\" = <code>\"$2a$10$vl0ydq1FXBbJr4Fi46xgcebjfXcvTn.gDEPWkcEI92eMQHom1s20C\"</code></p>\n\n<p><strong>Staging</strong></p>\n\n<p>\"welcome\" = <code>\"$2a$10$qJXnbMhDMsfAFXlUAXlRsOH1oQFIYg4GkW6.zlFMgqoX24xKhsDUm\"</code></p>\n"}, {"tags": ["ruby", "constructor"], "comments": [{"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1481756954, "post_id": 41153571, "comment_id": 69509545, "body": "I don&#39;t really understand why would you want to do that, but what you came up with seems to fit your purpose, except <code>post_init</code> in your code is a class method, however you&#39;re calling it from instance methods and this won&#39;t work."}, {"owner": {"reputation": 682, "user_id": 4987722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df03c42e897cd09c3f714542cd930fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Codoscope", "link": "https://stackoverflow.com/users/4987722/codoscope"}, "reply_to_user": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1481757190, "post_id": 41153571, "comment_id": 69509640, "body": "I made a mistake about the class method, it should be an instance method. I updated the post in consequence."}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1481759724, "post_id": 41153571, "comment_id": 69510360, "body": "Have you thought about directly changing <code>@y</code>, where you need? it looks like a more common and straight forward approach"}, {"owner": {"reputation": 682, "user_id": 4987722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df03c42e897cd09c3f714542cd930fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Codoscope", "link": "https://stackoverflow.com/users/4987722/codoscope"}, "reply_to_user": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1481760047, "post_id": 41153571, "comment_id": 69510435, "body": "Actually this is a simplified code to explain my problem. You can also considerate that there are no arguments for the constructors but that I want to give two different behaviors for a private instantiation than for a public one."}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1481782594, "post_id": 41154315, "comment_id": 69516502, "body": "<code>since classes are constants</code> I think class&#39; name is a constant pointing to a class, but class itself is nit a constant :)"}, {"owner": {"reputation": 682, "user_id": 4987722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df03c42e897cd09c3f714542cd930fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Codoscope", "link": "https://stackoverflow.com/users/4987722/codoscope"}, "edited": false, "score": 0, "creation_date": 1481838369, "post_id": 41154315, "comment_id": 69548218, "body": "I don&#39;t understand the first solution. How should the returned anonymous class be useful? Does it inherit from the main class? The second solution seems clearer, but it is very bad for the user because he has to deal with two classes for no apparent reasons. You have a point nonetheless so +1."}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 1, "last_activity_date": 1481760198, "last_edit_date": 1495540959, "creation_date": 1481760198, "answer_id": 41154315, "question_id": 41153571, "link": "https://stackoverflow.com/questions/41153571/have-a-different-public-constructor-than-a-private-one/41154315#41154315", "title": "Have a different public constructor than a private one", "body": "<p>A simple way is to accept options for initialize, you can have an <code>if</code> statement in there that covers the private or public cases. </p>\n\n<p>Ruby doesn't really have this concept of 'private class' in a simple way such as saying 'private'.</p>\n\n<p>You can see <a href=\"https://stackoverflow.com/questions/2873903/how-to-i-make-private-class-constants-in-ruby\">How to I make private class constants in Ruby</a> for a way to make a private constant (since classes are constants). You'd make a class method that returns an anonymous class (<code>Class.new do ... end</code>). Then mark that class method private with <code>private_class_method</code>.</p>\n\n<p>A better solution would be to make two classes with different initializes. Common functionality could be in a separate class or module.  If it's a class, then the way to include them in the 'public/private' classes would be inheritance. If it's a module, then you'd <code>include/extend</code>. </p>\n"}, {"comments": [{"owner": {"reputation": 682, "user_id": 4987722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df03c42e897cd09c3f714542cd930fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Codoscope", "link": "https://stackoverflow.com/users/4987722/codoscope"}, "edited": false, "score": 0, "creation_date": 1485993163, "post_id": 41869493, "comment_id": 71160993, "body": "Can the &quot;konstructor&quot; <code>with_position</code> be under <code>private</code>?"}, {"owner": {"reputation": 338, "user_id": 1554439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb7c8b36b741d1fc9295d6eca2849e6d?s=128&d=identicon&r=PG", "display_name": "snovity", "link": "https://stackoverflow.com/users/1554439/snovity"}, "reply_to_user": {"reputation": 682, "user_id": 4987722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df03c42e897cd09c3f714542cd930fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Codoscope", "link": "https://stackoverflow.com/users/4987722/codoscope"}, "edited": false, "score": 0, "creation_date": 1486032751, "post_id": 41869493, "comment_id": 71176964, "body": "you can read the details of how Ruby constructors work in general here <a href=\"https://github.com/snovity/konstructor#details\" rel=\"nofollow noreferrer\">github.com/snovity/konstructor#details</a>"}], "tags": [], "owner": {"reputation": 338, "user_id": 1554439, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bb7c8b36b741d1fc9295d6eca2849e6d?s=128&d=identicon&r=PG", "display_name": "snovity", "link": "https://stackoverflow.com/users/1554439/snovity"}, "is_accepted": true, "score": 1, "last_activity_date": 1485419637, "creation_date": 1485419637, "answer_id": 41869493, "question_id": 41153571, "link": "https://stackoverflow.com/questions/41153571/have-a-different-public-constructor-than-a-private-one/41869493#41869493", "title": "Have a different public constructor than a private one", "body": "<p>I guess this would do what you expect.</p>\n\n<pre><code>class C\n  def initialize(x, y = 0)\n    @x = x\n    @y = y\n  end\n\n  def self.with_position\n    new(3, 4)\n  end\nend\n\nc1 = C.new(5)\nc2 = C.with_position\n</code></pre>\n\n<p>If you want to prohibit setting <code>y</code> by anyone from outside the class, you can use some private method behind the scenes (as you suggested) and <a href=\"https://github.com/snovity/konstructor\" rel=\"nofollow noreferrer\">konstructor</a> gem</p>\n\n<pre><code>class C\n  def initialize(x)\n    set_coords(x, 0)\n  end\n\n  konstructor\n  def with_position\n    set_coords(3, 4)\n  end\n\n  private\n\n  def set_coords(x, y)\n    @x = x\n    @y = y\n  end\nend\n\nc1 = C.new(5)\nc2 = C.with_position\n</code></pre>\n"}], "owner": {"reputation": 682, "user_id": 4987722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df03c42e897cd09c3f714542cd930fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Codoscope", "link": "https://stackoverflow.com/users/4987722/codoscope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 41869493, "answer_count": 2, "score": 0, "last_activity_date": 1485419637, "creation_date": 1481755743, "last_edit_date": 1495535488, "question_id": 41153571, "link": "https://stackoverflow.com/questions/41153571/have-a-different-public-constructor-than-a-private-one", "title": "Have a different public constructor than a private one", "body": "<p>I read that it is <a href=\"https://stackoverflow.com/questions/3958735/in-ruby-is-there-a-way-to-overload-the-initialize-constructor\">not possible</a> to have several constructors for a class. So the following code won't work:</p>\n\n<pre><code>class C\n    def initialize x\n        initialize x,0\n    end\n\n    # Some methods using the private constructor\u2026\n\n    def foo\n        # \u2026\n        bar = C.new 3,4\n        # \u2026\n    end\n\n    private\n\n    def initialize x,y\n        @x = x\n        @y = y\n    end\nend\n</code></pre>\n\n<p>I have thought about replacing the public constructor by a static method, but that would prevent other classes to extend <code>C</code>. I also have thought about making a private post-initializing method:</p>\n\n<pre><code>class C\n    def initialize x\n        post_init x,0\n    end\n\n    # Some methods using the private constructor\u2026\n\n    def foo\n        # \u2026\n        bar = C.new baz\n        bar.post_init 3,4\n        # \u2026\n    end\n\n    private\n\n    def post_init x,y\n        @x = x\n        @y = y\n    end\nend\n</code></pre>\n\n<p>But here, the post_init is called twice, which is not a good thing.</p>\n\n<p>Is there a way to give a public constructor, while having in private a more complete way to make a new instance? If not, what is the best way to do something similar?</p>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "twitter-bootstrap", "heroku"], "comments": [{"owner": {"reputation": 567, "user_id": 2133083, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1eff23520876dc4ba8e040424fedbc4b?s=128&d=identicon&r=PG", "display_name": "Tom Connolly", "link": "https://stackoverflow.com/users/2133083/tom-connolly"}, "edited": false, "score": 0, "creation_date": 1481768852, "post_id": 41153124, "comment_id": 69512724, "body": "I don&#39;t know whether you&#39;ve already seen this:Relative asset paths  Some bower components (eg. Bootstrap) have relative urls in the CSS files for imports, images, etc. Rails prefers using helper methods for linking to assets within CSS. Relative paths can cause issues when assets are precompiled for production."}, {"owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "reply_to_user": {"reputation": 567, "user_id": 2133083, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/1eff23520876dc4ba8e040424fedbc4b?s=128&d=identicon&r=PG", "display_name": "Tom Connolly", "link": "https://stackoverflow.com/users/2133083/tom-connolly"}, "edited": false, "score": 0, "creation_date": 1481817503, "post_id": 41153124, "comment_id": 69537081, "body": "@TomConnolly thanks, I will look into this."}], "owner": {"user_type": "does_not_exist", "display_name": "user3246933"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 45, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481753570, "creation_date": 1481753570, "question_id": 41153124, "link": "https://stackoverflow.com/questions/41153124/heroku-rails-app-bootstrap-not-loading-from-bowerfile", "title": "Heroku Rails app, Bootstrap not loading from Bowerfile", "body": "<p>Using Heroku to deploy my Rails application for some testing. Application deploys fine, however the Bootstrap is not loaded from the Bowerfile. To clarify, I have a Bowerfile in the main directory that contains <code>asset 'bootstrap-sass-official'</code>(when application is running locally, everything works as expected). I also have the <code>'bower-rails'</code> gem installed, as well as the required line in the application.css file <code>require 'bootstrap-sass-official'</code>. I also have the <code>rake assets:precompile</code> running at the time of deployment with no issues. I have also tried running <code>heroku rake bower:install</code> which tells me to install Bower via npm, which I already have installed. </p>\n\n<p>I have looked for solutions, but no luck. Help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "ruby-on-rails-5", "pundit"], "comments": [{"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1481755921, "post_id": 41153093, "comment_id": 69509139, "body": "Could you please provide your gallery factory?"}, {"owner": {"reputation": 311, "user_id": 2718180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HYXB3.png?s=128&g=1", "display_name": "Lenocam", "link": "https://stackoverflow.com/users/2718180/lenocam"}, "reply_to_user": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1481758352, "post_id": 41153093, "comment_id": 69509973, "body": "@nikitaMisharin I added the gallery factory."}], "owner": {"reputation": 311, "user_id": 2718180, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/HYXB3.png?s=128&g=1", "display_name": "Lenocam", "link": "https://stackoverflow.com/users/2718180/lenocam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 230, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481758258, "creation_date": 1481753413, "last_edit_date": 1481758258, "question_id": 41153093, "link": "https://stackoverflow.com/questions/41153093/is-this-rspec-spec-actually-proving-that-my-pundit-policy-is-restricting-access", "title": "Is this RSpec spec actually proving that my Pundit Policy is restricting access to the show action?", "body": "<p>I'm struggling to understand Pundit generally, but specifically how to test it. I've gotten my test to pass by ignoring some things from examples online that seemed to have no effect on what I was doing or didn't seem to be having the right info passed to it. Now I'm not sure the thing I did is actually proving that my Policy is working or whether I've bypassed the test.</p>\n\n<p><strong><em>I'm testing that a visitor who tries to access someone's gallery does not have access to it.</em></strong> In the event that a visitor would type in <code>http://localhost:3000/galleries/1</code> to the browser they wouldn't get access. This does happen in practice, the visitor is redirected to the sign in page, but I'm trying to learn how to do testing using RSpec and Pundit, so I can use the tools with confidence and accuracy. </p>\n\n<p>A little help is appreciated. Below is what I believe to be the important code:</p>\n\n<p>gallery_policy_spec.rb</p>\n\n<pre><code>RSpec.describe GalleryPolicy do\n  #Pretty sure I skipped over subject because I kept getting errors \n  #saying user and gallery were undefined variables\n  subject { GalleryPolicy.new(user, gallery) }  \n\n  context \"for a vistor\" do #passes I know why\n    it \"has(gallery) a valid factory\" do\n      expect(FactoryGirl.build(:gallery)).to be_valid\n    end\n\n    it 'has(user) a valid factory' do #passes I know why\n      expect(FactoryGirl.build(:user)).to be_valid\n    end\n\n    permissions :show? do #passes but I don't know why\n      it \"denies access to show if visitor\" do\n        expect(GalleryPolicy).not_to permit(FactoryGirl.build(:user, id: nil), FactoryGirl.create(:gallery))\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>gallery_policy.rb</p>\n\n<pre><code>class GalleryPolicy &lt; ApplicationPolicy\n  attr_reader :user, :model\n\n  def initialize(user, model)\n    @user = user\n    @gallery = model\n  end\n\n  class Scope &lt; Scope\n    def resolve\n        scope.where(:user_id == user.id)\n    end\n  end\n\n  def show?\n    @gallery.user == @user\n  end\n\n  def new?\n    create?\n  end\n\n  def new?\n    true\n  end\nend\n</code></pre>\n\n<p>application_policy.rb\n<em>I think this is standard, but I didn't want to leave out valuable info</em></p>\n\n<pre><code>class ApplicationPolicy\n  attr_reader :user, :record\n\n  def initialize(user, record)\n    raise Pundit::NotAuthorizedError, \"must be logged in\" unless user\n    @user = user\n    @record = record\n  end\n\n  def index?\n    false\n  end\n\n  def show?\n    false\n  end\n\n  def create?\n    false\n  end\n\n  def new?\n    create?\n  end\n\n  def update?\n    false\n  end\n\n  def edit?\n    update?\n  end\n\n  def destroy?\n    false\n  end\n\n  class Scope\n    attr_reader :user, :scope\n\n    def initialize(user, scope)\n      @user = user\n      @scope = scope\n    end\n\n    def resolve\n      scope\n    end\n  end\nend\n</code></pre>\n\n<p>gallery.rb #factory</p>\n\n<pre><code>FactoryGirl.define do\n  factory :gallery do\n    title { Faker::Book.title }\n    association :user\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 40236, "user_id": 923315, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/j6lLI.jpg?s=128&g=1", "display_name": "peter", "link": "https://stackoverflow.com/users/923315/peter"}, "is_accepted": false, "score": 2, "last_activity_date": 1481753102, "creation_date": 1481753102, "answer_id": 41153038, "question_id": 41152919, "link": "https://stackoverflow.com/questions/41152919/difference-between-take-while-and-select/41153038#41153038", "title": "Difference between #take_while and #select", "body": "<p>There is a difference, take_while stops from the moment the evaluation in the block is false, select will continue and evaluate everything.</p>\n\n<pre><code>[1,2,3,4,1].take_while{ |e| e &lt; 3 } # prints [1,2]\n[1,2,3,4,1].select{ |e| e &lt; 3 } # prints [1,2,1]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1263, "user_id": 554852, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a16dc63a0c26bda6e20af835f5224b11?s=128&d=identicon&r=PG", "display_name": "Giridhar Bandi", "link": "https://stackoverflow.com/users/554852/giridhar-bandi"}, "is_accepted": false, "score": 3, "last_activity_date": 1481773386, "last_edit_date": 1481773386, "creation_date": 1481753158, "answer_id": 41153048, "question_id": 41152919, "link": "https://stackoverflow.com/questions/41152919/difference-between-take-while-and-select/41153048#41153048", "title": "Difference between #take_while and #select", "body": "<p><strong>take_while</strong> returns an array of all prior elements until the block returns nil or false. </p>\n\n<p><strong>select</strong> returns an array containing those elements for which the block returns a true value. so for example if you have [1,2,3,4,1] <strong>select</strong> would return [1,2,1]</p>\n\n<pre><code>p [1,2,3,4,1].select     { |e| e &lt; 3 } # prints [1,2,1]\n</code></pre>\n\n<p>Where as <strong>take_while</strong> would return [1,2]</p>\n\n<p><code>p [1,2,3,4,1].take_while { |e| e &lt; 3 } # prints [1,2]</code></p>\n"}], "owner": {"reputation": 6373, "user_id": 2715384, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/hwUTZ.jpg?s=128&g=1", "display_name": "the_prole", "link": "https://stackoverflow.com/users/2715384/the-prole"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 340, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1481773386, "creation_date": 1481752579, "question_id": 41152919, "link": "https://stackoverflow.com/questions/41152919/difference-between-take-while-and-select", "title": "Difference between #take_while and #select", "body": "<p>What is the difference between <code>#take_while</code> and <code>#select</code></p>\n\n<p>Don't both methods do the same thing?</p>\n\n<pre><code>p [1,2,3,4].take_while { |e| e &lt; 3 } # prints [1,2]\np [1,2,3,4].select     { |e| e &lt; 3 } # prints [1,2]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "edited": false, "score": 0, "creation_date": 1481752099, "post_id": 41152148, "comment_id": 69507687, "body": "Are you sure that you are in the base folder of your app ?"}, {"owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "edited": false, "score": 1, "creation_date": 1481752590, "post_id": 41152148, "comment_id": 69507892, "body": "Could you post a link to your project to see the structure ? Remember that for Rails to start up, you need bin/rails, bin/bundle, config/boot, etc."}, {"owner": {"reputation": 511, "user_id": 2364401, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/BeNhZ.png?s=128&g=1", "display_name": "xander-miller", "link": "https://stackoverflow.com/users/2364401/xander-miller"}, "reply_to_user": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "edited": false, "score": 0, "creation_date": 1481761219, "post_id": 41152148, "comment_id": 69510776, "body": "I&#39;m a definitely in the base folder.  My bin/directory was empty, thanks!"}, {"owner": {"reputation": 511, "user_id": 2364401, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/BeNhZ.png?s=128&g=1", "display_name": "xander-miller", "link": "https://stackoverflow.com/users/2364401/xander-miller"}, "reply_to_user": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "edited": false, "score": 0, "creation_date": 1481761590, "post_id": 41152148, "comment_id": 69510876, "body": "@AlexanderLuna Repairing the <code>&#47;bin</code> directory fixed my problem. Thanks! If you write the comment as an answer I will mark it as the solution."}, {"owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "edited": false, "score": 0, "creation_date": 1481770068, "post_id": 41152148, "comment_id": 69513035, "body": "Thank you and great to hear that it worked for you."}], "answers": [{"tags": [], "owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "is_accepted": true, "score": 1, "last_activity_date": 1481770043, "creation_date": 1481770043, "answer_id": 41155597, "question_id": 41152148, "link": "https://stackoverflow.com/questions/41152148/rails-server-not-working-when-copying-back-from-staging-deploy/41155597#41155597", "title": "Rails server not working when copying back from staging deploy", "body": "<p>Remember that for Rails to start up, you need bin/rails, bin/bundle, config/boot, etc. </p>\n\n<p>If you restore those files, it should work again.</p>\n"}], "owner": {"reputation": 511, "user_id": 2364401, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/BeNhZ.png?s=128&g=1", "display_name": "xander-miller", "link": "https://stackoverflow.com/users/2364401/xander-miller"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 41155597, "answer_count": 1, "score": 1, "last_activity_date": 1481770043, "creation_date": 1481749456, "last_edit_date": 1481751349, "question_id": 41152148, "link": "https://stackoverflow.com/questions/41152148/rails-server-not-working-when-copying-back-from-staging-deploy", "title": "Rails server not working when copying back from staging deploy", "body": "<p>I ssh copied a rails app from a staging server because the development repository has been lost. My goal is to create a new development code base using the deployed code as a source. So far I have removed a hidden <code>.bundle</code> folder and replaces several aliases with folders and files. I then ran <code>bundle install</code>. For the database I did a sql dump from staging and used it to build a development database. I think I'm ready to run <code>rails server</code>. But when I try to run <code>rails server</code> in the base directory. It gives me the rails command line help as if I was running <code>rails s</code> in a directory with no app. </p>\n\n<p>I'm not even sure if it is possible to reverse a deploy this way. I've looked at the <a href=\"http://guides.rubyonrails.org/initialization.html\" rel=\"nofollow noreferrer\">rails guide on the app initialization process</a> and all the files seem to be in place.</p>\n"}, {"tags": ["ruby", "cucumber", "page-object-gem"], "comments": [{"owner": {"reputation": 950, "user_id": 1280823, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a240570479cea78f23a249104cb2778a?s=128&d=identicon&r=PG", "display_name": "Evmorov", "link": "https://stackoverflow.com/users/1280823/evmorov"}, "edited": false, "score": 0, "creation_date": 1481750755, "post_id": 41151719, "comment_id": 69507075, "body": "In your example in HTML you have a link with <code>id=&quot;oepLinkId&quot;</code>, but in your page object you use <code>:id =&gt; &#39;reportLinkId&#39;</code>"}, {"owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "reply_to_user": {"reputation": 950, "user_id": 1280823, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a240570479cea78f23a249104cb2778a?s=128&d=identicon&r=PG", "display_name": "Evmorov", "link": "https://stackoverflow.com/users/1280823/evmorov"}, "edited": false, "score": 0, "creation_date": 1481751651, "post_id": 41151719, "comment_id": 69507475, "body": "@Evmorov Good catch. That was a typo. I updated my question. The problem still exists. Thanks!"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1481752650, "post_id": 41151719, "comment_id": 69507911, "body": "Your code works fine for me on a simple page. Have you tried your code on a page that just has that link? What browser are you using (I tried Chrome and IE11). I was using Ruby 2.3, but seems less likely to be the issue."}, {"owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1481810067, "post_id": 41151719, "comment_id": 69532084, "body": "@JustinKo Hi Justin, I updated my question with some additional information. The link is a sub-menu, I do hover it first, then I verify it to be disabled or not by checking its <code>class</code> attribute. I cannot make it work yet. Any thoughts please?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1481821405, "post_id": 41151719, "comment_id": 69539479, "body": "Are there interactions on the page that cause the &quot;disabledLinks&quot; class to be added/removed from the link? Please also try reproducing the problem on a simple HTML page with just this one link. That would help rule out the problem being with Selenium or a driver."}, {"owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1481823549, "post_id": 41151719, "comment_id": 69540693, "body": "@Justin Hi Justin, thanks for your comments. I updated my question with additional information. The `disabledLinks&#39; attribute is added when a user does not have the access. But it happens at the time the user logs in to the application. Thanks!"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1481824531, "post_id": 41151719, "comment_id": 69541205, "body": "Is that the actual HTML the actual DOM the driver is seeing when the test runs? It just seems suspicious that it would return an empty String if there is a value. As well, is &quot;reportLinkId&quot; the actual ID? It seems rather generic, which might mean there are multiple on the page and you are retrieving the wrong one? What do you get if you do <code>puts @browser.find_elements(:id, &#39;reportLinkId&#39;).count</code>"}, {"owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1481826209, "post_id": 41151719, "comment_id": 69542048, "body": "@JustinKo Hi Justin, I tried that, it prints <code>1</code>.  There are other links, but they are not for reporting, so this id is unique."}], "answers": [{"tags": [], "owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "is_accepted": false, "score": 0, "last_activity_date": 1482937981, "creation_date": 1482937981, "answer_id": 41364797, "question_id": 41151719, "link": "https://stackoverflow.com/questions/41151719/ruby-cucumber-use-page-object-to-get-attribute/41364797#41364797", "title": "Ruby cucumber: use page object to get attribute", "body": "<p>Here is what happened. The id value was changed during development. I updated it and it worked. Thanks to all!</p>\n"}], "owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 430, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482937981, "creation_date": 1481747846, "last_edit_date": 1481823405, "question_id": 41151719, "link": "https://stackoverflow.com/questions/41151719/ruby-cucumber-use-page-object-to-get-attribute", "title": "Ruby cucumber: use page object to get attribute", "body": "<p>I am looking for a way to verify link is disabled. It is a sub-menu link, I hover over to the <code>home menu</code> link, then the list of sub-menu link displays. Because of certain user role, this user cannot access to the reporting page, so I need to verify the link is disabled. The <code>class</code> attribute indicates that. </p>\n\n<p>HTML:</p>\n\n<pre><code>  &lt;div id=\"homeMenu\"&gt;\n    &lt;ul&gt;\n       &lt;li class=\"has-sub\"&gt;\n          &lt;a class=\"homeButton\" href=\"/report-web\"&gt;&lt;/a&gt;\n          &lt;ul id=\"homeLinks\"&gt;\n             &lt;li id=\"oepLiId\"&gt;\n                  &lt;a id=\"reportLinkId\" class=\"disabledLinks\" href=\"/report-web/openItems?subApp=OEP&amp;rptid=15\"&gt;\n                  &lt;span id=\"reportLinkName\"&gt;Reporting Processing&lt;/span&gt;\n                &lt;/a&gt;\n             &lt;/li&gt;\n         &lt;/ul&gt;\n         &lt;/li&gt;\n       &lt;/ul&gt;\n    &lt;/div&gt;\n</code></pre>\n\n<p>I use puts as below:</p>\n\n<pre><code>   link = @browser.find_element(:id, 'reportLinkId')\n   puts link.displayed?\n   puts link.enabled?\n</code></pre>\n\n<p>It prints: </p>\n\n<pre><code>   true\n   true\n</code></pre>\n\n<p>The link is <code>displayed</code> and <code>enabled</code>. The only way I can think of is to check the <code>class</code> attribute to see if it is defined as <code>disabledLinks</code>. </p>\n\n<p>use page object: </p>\n\n<pre><code>       link(:report_link, :id =&gt; 'reportLinkId')\n\n\n      class_attribute = report_link_element.attribute('class')\n      expect(class_attribute.eql?('disabledLinks')).to be true\n</code></pre>\n\n<p>Not use page object:</p>\n\n<pre><code>      class_attribute = @browser.find_element(:id, 'reportLinkId').attribute('class')\n</code></pre>\n\n<p>However, both ways, I got <code>class_attribute</code> is empty.</p>\n\n<p>Environment: </p>\n\n<pre><code>  Ruby: 1.9.3\n  Cucumber: 2.1.0\n  Selenium Webdriver: 2.53.4 \n  page-object: 1.2.0\n</code></pre>\n\n<p>What am I missing? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 3275761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFjPs.png?s=128&g=1", "display_name": "rkentmc", "link": "https://stackoverflow.com/users/3275761/rkentmc"}, "edited": false, "score": 0, "creation_date": 1481817180, "post_id": 41152671, "comment_id": 69536828, "body": "Thanks for the response! We are still getting the same error :&lt;code&gt;expecting &lt;&quot;errors/5xx&quot;&gt; but rendering with &lt;[]&gt; ./spec/controllers/packages_controller_spec.rb:91:in <code>block (4 levels) in &lt;top (required)&gt;&#39; -e:1:in </code>load&#39; -e:1:in `&lt;main&gt;&#39;&lt;/code&gt; I think we need to stub the render in order to provide code coverage but can&#39;t find a way to do it. Do you have any ideas?"}, {"owner": {"reputation": 13, "user_id": 3275761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFjPs.png?s=128&g=1", "display_name": "rkentmc", "link": "https://stackoverflow.com/users/3275761/rkentmc"}, "edited": false, "score": 0, "creation_date": 1481819139, "post_id": 41152671, "comment_id": 69538121, "body": "This works: <code>context &#39;URI is invalid&#39; do       before do         allow(PackageServices).to receive(:getpackage).and_raise(URI::InvalidURIError)       end        it &#39;returns 200 after 404 from GET #edit error&#39; do         allow(controller).to receive(:ensure_logged_in).and_return(true)         get :edit, params: { id: 1 }         expect(response.code).to eq(&#39;200&#39;)         expect(response).to render_template(&#39;errors&#47;5xx&#39;)        end     end</code>"}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "reply_to_user": {"reputation": 13, "user_id": 3275761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFjPs.png?s=128&g=1", "display_name": "rkentmc", "link": "https://stackoverflow.com/users/3275761/rkentmc"}, "edited": false, "score": 0, "creation_date": 1481820296, "post_id": 41152671, "comment_id": 69538852, "body": "@rkentmc <code>ensure_logged_in</code> wasn&#39;t in the code you&#39;ve provided, so I could only base my answer on what I saw"}, {"owner": {"reputation": 13, "user_id": 3275761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFjPs.png?s=128&g=1", "display_name": "rkentmc", "link": "https://stackoverflow.com/users/3275761/rkentmc"}, "edited": false, "score": 0, "creation_date": 1482170082, "post_id": 41152671, "comment_id": 69655717, "body": "Just updating for the entry in case some one else has a similar issue. We were not calling the right resource, in this case it would be an instance of our get method"}], "tags": [], "owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "is_accepted": false, "score": 0, "last_activity_date": 1481751595, "creation_date": 1481751595, "answer_id": 41152671, "question_id": 41151621, "link": "https://stackoverflow.com/questions/41151621/rspec-not-testing-render-wont-allow-us-to-stub-render-action/41152671#41152671", "title": "Rspec not testing render, won&#39;t allow us to stub render action", "body": "<p>I  believe the stabbing was incorrect. Try the following code, it should work.</p>\n\n<pre><code>context 'URI is invalid' do\n  before do\n    allow(PackageServices).toreceive(:getpackage).and_raise(URI::InvalidURIError)\n  end\n\n  it 'returns 200 after 404 from GET #edit error' do  \n    expect(response.code).to eq(200) # =&gt; covers the 200\n    expect(response).to render_template('errors/5xx') # =&gt; doesn't read \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 3275761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cFjPs.png?s=128&g=1", "display_name": "rkentmc", "link": "https://stackoverflow.com/users/3275761/rkentmc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 390, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481757895, "creation_date": 1481747400, "last_edit_date": 1481757895, "question_id": 41151621, "link": "https://stackoverflow.com/questions/41151621/rspec-not-testing-render-wont-allow-us-to-stub-render-action", "title": "Rspec not testing render, won&#39;t allow us to stub render action", "body": "<p>Rails 5.0.0.1\nRspec 3.5.4\nRuby 2.3.1</p>\n\n<p>We have been trying to provide test coverage for our rails application. We have a rescue in a private method that Rspec is not reaching. </p>\n\n<p>Rspec:</p>\n\n<pre><code>it 'returns 200 after 404 from GET #edit error' do\n  allow(controller).to receive(:getpackages).and_return(URI::InvalidURIError)    \n  expect(response.code).to eq(200) # =&gt; covers the 200\n  expect(response).to render_template('errors/5xx') # =&gt; doesn't read \nend\n</code></pre>\n\n<p>Rails:</p>\n\n<pre><code>private\n\ndef set_package\n  @package = PackageServices.getpackage params[:id]\nrescue URI::InvalidURIError\n  render 'errors/5xx'\nend\n</code></pre>\n\n<p>Error message:</p>\n\n<pre><code>expecting &lt;\"errors/5xx\"&gt; but rendering with &lt;[]&gt;\n  ./spec/controllers/packages_controller_spec.rb:139:in `block (3 levels) in &lt;top (required)&gt;'\n  -e:1:in `load'\n  -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>We have tried to assert_template, tried to stub it using stub_template, installed a gem rails-controller-testing (not rspec), but we have run out of ideas and every google link is purple. Is this a bug in Rspec or are we going about it the wrong way?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 28138, "user_id": 337166, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/fKzgt.jpg?s=128&g=1", "display_name": "jvnill", "link": "https://stackoverflow.com/users/337166/jvnill"}, "edited": false, "score": 0, "creation_date": 1481791932, "post_id": 41150707, "comment_id": 69520879, "body": "if you are following convention, you most probably don&#39;t have an <code>@post</code> instance variable in the index action.  You have <code>@posts</code> and then you loop through it using <code>each</code>, ie <code>@posts.each do |post|</code>.  So change <code>@post</code> to <code>post</code> in the index view and see if that works."}], "answers": [{"comments": [{"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744394, "post_id": 41150782, "comment_id": 69503769, "body": "It still says undefined method `user_id&#39; for nil:NilClass for line 40 which is:  &lt;% if current_user.id == @post.user_id %&gt;"}, {"owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744526, "post_id": 41150782, "comment_id": 69503837, "body": "what do you get if you just do <code>&lt;%= current_user.id %&gt; &lt;%= @post.user_id %&gt;</code>"}, {"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744583, "post_id": 41150782, "comment_id": 69503865, "body": "Do I not need the if statemnet though?"}, {"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744609, "post_id": 41150782, "comment_id": 69503877, "body": "The current_user and post.user_id have to be the same."}, {"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744678, "post_id": 41150782, "comment_id": 69503905, "body": "undefined method `user_id&#39; for nil:NilClass  is at  &lt;% if current_user.id == @post.user_id %&gt;  it doesn&#39;t know what user_id is"}, {"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744705, "post_id": 41150782, "comment_id": 69503924, "body": "Even though i have this line of code working in the same file:  &lt;td&gt;&lt;%= post.user_id%&gt;&lt;/td&gt;"}, {"owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744764, "post_id": 41150782, "comment_id": 69503961, "body": "I am thinking that you are not login, and you don&#39;t have a <code>current_user</code> object"}, {"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744809, "post_id": 41150782, "comment_id": 69503986, "body": "I do have a user logged in! I appreciate your help so much I am desperate."}, {"owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744811, "post_id": 41150782, "comment_id": 69503989, "body": "I just made a change <code>if current_user &amp;&amp; current_user.id == @post.user_id</code>"}, {"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744861, "post_id": 41150782, "comment_id": 69504019, "body": "I still get the same error it doesn&#39;t know what user_id is."}, {"owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744937, "post_id": 41150782, "comment_id": 69504066, "body": "in your db / migrations do you have a <code>user_id</code> make sure that there is not a typo"}, {"owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744973, "post_id": 41150782, "comment_id": 69504088, "body": "Look in the console if you can see <code>Post.last.user_id</code>"}, {"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481744998, "post_id": 41150782, "comment_id": 69504103, "body": "I do have that yes! user_id has worked every other time I used it in this application"}, {"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481745030, "post_id": 41150782, "comment_id": 69504124, "body": "Where and how do I view the console?"}, {"owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481745159, "post_id": 41150782, "comment_id": 69504207, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/130634/discussion-between-thor-odinson-and-jill1993\">continue this discussion in chat</a>."}, {"owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481745185, "post_id": 41150782, "comment_id": 69504223, "body": "can you see other elements of the <code>@post</code> ?"}, {"owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481745275, "post_id": 41150782, "comment_id": 69504290, "body": "you can find the console by doing <code>rails c</code> in the terminal"}], "tags": [], "owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "is_accepted": false, "score": 1, "last_activity_date": 1481745135, "last_edit_date": 1481745135, "creation_date": 1481744243, "answer_id": 41150782, "question_id": 41150707, "link": "https://stackoverflow.com/questions/41150707/ruby-on-rails-how-to-allow-only-current-user-to-edit-and-delete-posts-they-have/41150782#41150782", "title": "Ruby-On-Rails How to allow only current user to edit and delete posts they have created", "body": "<p>you want to make sure that the if statement is out side of the TD tag</p>\n\n<pre><code>    &lt;% if current_user &amp;&amp; current_user.id == @post.user_id %&gt;\n      &lt;td&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Edit', edit_post_path(@post) %&gt;&lt;/td&gt;\n      &lt;td&gt;&lt;%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n    &lt;% end %&gt;\n\n\n\n #Post Controller \n  class Post &lt; ApplicationController\n    ...\n    def show\n      @post = Post.find(params[:id])\n    end\n    ...\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481745582, "post_id": 41151035, "comment_id": 69504464, "body": "When you say post view do you mean index view?"}, {"owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481745653, "post_id": 41151035, "comment_id": 69504495, "body": "I added your code to my posts index view and then i got this error  undefined method `current_user?&#39; for #&lt;#&lt;Class:0xa3f40b8&gt;:0x62c3688&gt;"}, {"owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481745867, "post_id": 41151035, "comment_id": 69504621, "body": "You didn&#39;t add the code from the SessionHelper. Do you login users and do you set the current_user ?"}, {"owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "reply_to_user": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "edited": false, "score": 0, "creation_date": 1481745890, "post_id": 41151035, "comment_id": 69504634, "body": "Yes, the index view."}], "tags": [], "owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "is_accepted": true, "score": 2, "last_activity_date": 1481745071, "creation_date": 1481745071, "answer_id": 41151035, "question_id": 41150707, "link": "https://stackoverflow.com/questions/41150707/ruby-on-rails-how-to-allow-only-current-user-to-edit-and-delete-posts-they-have/41151035#41151035", "title": "Ruby-On-Rails How to allow only current user to edit and delete posts they have created", "body": "<p>I do a before action filter for the edit, update and destroy action:</p>\n\n<pre><code>before_action :correct_user, only: [:edit, :update, :destroy]\n\ndef correct_user\n    @post = Post.find_by(id: params[:id])  // find the post\n    unless current_user?(@post.user)\n      redirect_to user_path(current_user)\n    end\n  end\n</code></pre>\n\n<p><code>current_user?(@post.user)</code> this checks if the current_user and the @post.user that you defined when you create a new post are the same.</p>\n\n<p>In my sessionHelper I have to methods for defining the current user:</p>\n\n<pre><code>  def current_user?(user)\n    user == current_user\n  end\n\n  def current_user\n    if(user_id = session[:user_id])\n      @current_user ||= User.find_by(id: user_id)\n    end\n  end\n</code></pre>\n\n<p>In your post view you have to add conditional code to render the edit and delete links only if the user is the correct one:</p>\n\n<pre><code>&lt;% if current_user?(post.user) %&gt;\n          &lt;%= link_to \"Edit\", edit_micropost_path(micropost) %&gt;\n          &lt;%= link_to \"Delete\", micropost, method: :delete, data: { confirm: \"Do you want to delete this post ?\"}%&gt;\n          &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 421, "user_id": 6434370, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/L5wME.jpg?s=128&g=1", "display_name": "Jill", "link": "https://stackoverflow.com/users/6434370/jill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1808, "favorite_count": 0, "accepted_answer_id": 41151035, "answer_count": 2, "score": 1, "last_activity_date": 1481745135, "creation_date": 1481743929, "question_id": 41150707, "link": "https://stackoverflow.com/questions/41150707/ruby-on-rails-how-to-allow-only-current-user-to-edit-and-delete-posts-they-have", "title": "Ruby-On-Rails How to allow only current user to edit and delete posts they have created", "body": "<p>I am making a blog application and when the user is viewing the post index view I want them to only edit and delete posts they have created. I am getting the following error:</p>\n\n<p>undefined method `user_id' for nil:NilClass</p>\n\n<p>views/posts/index.html</p>\n\n<pre><code>    &lt;td&gt;&lt;% if current_user.id == @post.user_id %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_post_path(@post) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n        &lt;% end %&gt;\n</code></pre>\n\n<p>The above is my if statement that allows user to only edit and delete posts they have created.</p>\n\n<p>create method in post_controller:</p>\n\n<pre><code>def create\n    @post = Post.new(post_params)\n    @post.user = current_user\n\n    respond_to do |format|\n      if @post.save\n        format.html { redirect_to @post, notice: 'Post was successfully created.' }\n        format.json { render :show, status: :created, location: @post }\n      else\n        format.html { render :new }\n        form\n\nat.json { render json: @post.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "is_accepted": false, "score": 4, "last_activity_date": 1481748870, "last_edit_date": 1481748870, "creation_date": 1481743410, "answer_id": 41150564, "question_id": 41150497, "link": "https://stackoverflow.com/questions/41150497/what-does-format-refer-to-in-rails-and-how-does-it-interact-with-the-path-a/41150564#41150564", "title": "What does (.:format) refer to in Rails and how does it interact with the _path and _url helpers?", "body": "<p>Those are the standard routes generated by a Rails <code>resources</code> helper in the routes file.</p>\n\n<p><code>(.:format)</code> refers to a variable/parameter you can pass to the helper that will turn the request into the format defined:</p>\n\n<pre><code>/posts.json # will handle the requests as JSON\n/posts  # will handle the request as the default, html.\n</code></pre>\n\n<p>You can read more about this in \"<a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">Rails Routing from the Outside In</a>\".</p>\n"}, {"comments": [{"owner": {"reputation": 55, "user_id": 6487251, "user_type": "registered", "profile_image": "https://graph.facebook.com/627352710766939/picture?type=large", "display_name": "Zarc Rowden", "link": "https://stackoverflow.com/users/6487251/zarc-rowden"}, "edited": false, "score": 0, "creation_date": 1481745575, "post_id": 41150682, "comment_id": 69504459, "body": "Thanks a lot chris!"}], "tags": [], "owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "is_accepted": false, "score": 5, "last_activity_date": 1481744202, "last_edit_date": 1481744202, "creation_date": 1481743839, "answer_id": 41150682, "question_id": 41150497, "link": "https://stackoverflow.com/questions/41150497/what-does-format-refer-to-in-rails-and-how-does-it-interact-with-the-path-a/41150682#41150682", "title": "What does (.:format) refer to in Rails and how does it interact with the _path and _url helpers?", "body": "<p>The parenthesis denote an optional bound parameter in the pattern. It's saying that if there is a dot in the URL followed by some text, that will become available as <code>params[:format]</code>, but that is optional for the route to be matched.</p>\n\n<p>That means that the URL can pass in the format:</p>\n\n<pre><code>GET /posts\nGET /posts.json\nGET /posts.pdf\nGET /posts.xml\n</code></pre>\n\n<p>The default is understood to be <code>html</code>.</p>\n\n<p>When building a URL with a <code>_path</code> or <code>_url</code> helper, you can pass the format as another value for the URL:</p>\n\n<pre><code># href will be /posts.json\nlink_to 'Posts JSON', posts_path(:json)\n\n# href will be /posts/1234.json\nlink_to @post.title, post_path(@post, :json)\n</code></pre>\n\n<p>In the controller, you can respond to these formats in different ways:</p>\n\n<pre><code>def index\n  @posts = Post.order(created_at: :desc)\n\n  respond_to do |format|\n    format.html # This will render `index.html.erb` automatically\n\n    format.json { render json: @posts }\n\n    format.csv do\n      # Do some CSV stuff here\n    end\n  end\nend\n</code></pre>\n\n<p>The section on <a href=\"http://guides.rubyonrails.org/routing.html#bound-parameters\" rel=\"noreferrer\">Bound Parameters</a> in the guides sort of mentions the function of parenthesis in a roundabout way:</p>\n\n<blockquote>\n  <p>since <code>:action</code> and <code>:id</code> are optional parameters, denoted by parentheses.</p>\n</blockquote>\n\n<p>This is referring to the example route:</p>\n\n<pre><code>get ':controller(/:action(/:id))'\n</code></pre>\n"}], "owner": {"reputation": 55, "user_id": 6487251, "user_type": "registered", "profile_image": "https://graph.facebook.com/627352710766939/picture?type=large", "display_name": "Zarc Rowden", "link": "https://stackoverflow.com/users/6487251/zarc-rowden"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1020, "favorite_count": 0, "closed_date": 1481773609, "answer_count": 2, "score": -1, "last_activity_date": 1481748953, "creation_date": 1481743183, "last_edit_date": 1481748953, "question_id": 41150497, "link": "https://stackoverflow.com/questions/41150497/what-does-format-refer-to-in-rails-and-how-does-it-interact-with-the-path-a", "closed_reason": "Duplicate", "title": "What does (.:format) refer to in Rails and how does it interact with the _path and _url helpers?", "body": "<p>I've been writing my routes manually but gave up after realizing how pointless that would be in Rails given that a large part of the purpose of this framework is automating repetition. </p>\n\n<p>After generating my routes using Rails' <code>resources</code> keyword, I'm unable to find any explicit documentation explaining what the <code>(.:format)</code> parameter represents. I'm also unclear on how <code>_path</code> and <code>_url</code> helpers engage these routes: </p>\n\n<pre><code>posts     GET    /posts(.:format)              posts#index\n          POST   /posts(.:format) posts#create\nnew_post  GET    /posts/new(.:format)       posts#new\nedit_post GET    /posts/:id/edit(.:format) posts#edit\npost      GET    /posts/:id(.:format)           posts#show\n          PATCH  /posts/:id(.:format)            posts#update\n          PUT    /posts/:id(.:format)            posts#update\n          DELETE /posts/:id(.:format)            posts#destroy\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "edited": false, "score": 1, "creation_date": 1481744285, "post_id": 41150645, "comment_id": 69503718, "body": "I added this line <code>config.action_mailer.delivery_method = :sendmail</code>  and it worked, thanks"}, {"owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "reply_to_user": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "edited": false, "score": 0, "creation_date": 1481744398, "post_id": 41150645, "comment_id": 69503772, "body": "I am glad that I was able to help :)"}], "tags": [], "owner": {"reputation": 180, "user_id": 7291464, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P1Scs.jpg?s=128&g=1", "display_name": "Thor odinson", "link": "https://stackoverflow.com/users/7291464/thor-odinson"}, "is_accepted": true, "score": 1, "last_activity_date": 1481749282, "last_edit_date": 1592644375, "creation_date": 1481743725, "answer_id": 41150645, "question_id": 41150284, "link": "https://stackoverflow.com/questions/41150284/how-to-fix-an-exception-notification-error-and-send-a-letter/41150645#41150645", "title": "How to fix an Exception Notification error, and send a letter", "body": "<p>Are you sure it's <a href=\"https://github.com/chrisbutcher/postoffice\" rel=\"nofollow noreferrer\">Postoffice</a>  and not <a href=\"https://github.com/moomerman/postman\" rel=\"nofollow noreferrer\">postman</a>?</p>\n<blockquote>\n<h1>Postoffice</h1>\n<p>Rails gem to validate format of various world postal and zip codes,</p>\n</blockquote>\n<p>If it's postman you should look in your production.rb:</p>\n<pre><code>#config/environments/production.rb\n...\n\nconfig.action_mailer.raise_delivery_errors = true\nconfig.action_mailer.default_url_options = { :host =&gt; 'example.com' }\nconfig.action_mailer.perform_deliveries = true\nActionMailer::Base.smtp_settings = {\n  :port           =&gt; '25', # or 2525\n  :address        =&gt; ENV['POSTMARK_SMTP_SERVER'],\n  :user_name      =&gt; ENV['POSTMARK_API_TOKEN'],\n  :password       =&gt; ENV['POSTMARK_API_TOKEN'],\n  :domain         =&gt; 'example.com',\n  :authentication =&gt; :cram_md5, # or :plain for plain-text authentication\n  :enable_starttls_auto =&gt; true, # or false for unencrypted connection\n}\nActionMailer::Base.delivery_method = :smtp\n\n...\n</code></pre>\n"}], "owner": {"reputation": 583, "user_id": 6532309, "user_type": "registered", "accept_rate": 67, "profile_image": "https://lh6.googleusercontent.com/-i_I-gCdbAyM/AAAAAAAAAAI/AAAAAAAAAIk/_RwOEctiQ_s/photo.jpg?sz=128", "display_name": "Andy", "link": "https://stackoverflow.com/users/6532309/andy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 152, "favorite_count": 0, "accepted_answer_id": 41150645, "answer_count": 1, "score": 0, "last_activity_date": 1481749282, "creation_date": 1481742450, "last_edit_date": 1481749180, "question_id": 41150284, "link": "https://stackoverflow.com/questions/41150284/how-to-fix-an-exception-notification-error-and-send-a-letter", "title": "How to fix an Exception Notification error, and send a letter", "body": "<p>When I send a letter to Postoffice through the <a href=\"https://github.com/smartinez87/exception_notification\" rel=\"nofollow noreferrer\">Exception Notification</a> gem there is an error, and a letter is not sent in production:</p>\n\n<pre><code>Error: An error occurred when sending a notification using 'email' notifier. Net::SMTPFatalError: 550 &lt;example@exmple.com&gt;, Recipient unknown\n</code></pre>\n\n<p>Locally through <a href=\"https://github.com/ryanb/letter_opener\" rel=\"nofollow noreferrer\">Letter Opener</a> everything works well. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "rspec"], "comments": [{"owner": {"reputation": 1135, "user_id": 251045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgiVA.png?s=128&g=1", "display_name": "lightalloy", "link": "https://stackoverflow.com/users/251045/lightalloy"}, "edited": false, "score": 2, "creation_date": 1481741431, "post_id": 41149680, "comment_id": 69502226, "body": "That&#39;s nothing to do with the question itself, but I would suggest using snake_case for method name and rename it to clear_cart (<a href=\"https://github.com/bbatsov/ruby-style-guide#snake-case-symbols-methods-vars\" rel=\"nofollow noreferrer\">github.com/bbatsov/&hellip;</a>)"}, {"owner": {"reputation": 1035, "user_id": 5554198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-OsD5IkhG7Sc/AAAAAAAAAAI/AAAAAAAADXQ/mun69ZJ2bP0/photo.jpg?sz=128", "display_name": "Vishal Nagda", "link": "https://stackoverflow.com/users/5554198/vishal-nagda"}, "reply_to_user": {"reputation": 1135, "user_id": 251045, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jgiVA.png?s=128&g=1", "display_name": "lightalloy", "link": "https://stackoverflow.com/users/251045/lightalloy"}, "edited": false, "score": 0, "creation_date": 1481741836, "post_id": 41149680, "comment_id": 69502470, "body": "@lightalloy your suggestion will be appreciated. Thank you :)"}], "answers": [{"tags": [], "owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "is_accepted": true, "score": 4, "last_activity_date": 1481741163, "creation_date": 1481741163, "answer_id": 41149921, "question_id": 41149680, "link": "https://stackoverflow.com/questions/41149680/redirect-to-action-index-in-rspec/41149921#41149921", "title": "redirect_to :action =&gt; :index in Rspec", "body": "<p>If you have expect matchers the following code should work</p>\n\n<pre><code>describe \"GET #clearCart\" do\n  subject { get :clearCart }\n  it { is_expected.to redirect_to(action: :index) }\nend\n</code></pre>\n\n<p>In case of shoulda matchers use</p>\n\n<pre><code>describe \"GET #clearCart\" do\n  before { get :clearCart }\n  it { should redirect_to(action: :index) }\nend\n</code></pre>\n"}], "owner": {"reputation": 1035, "user_id": 5554198, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-OsD5IkhG7Sc/AAAAAAAAAAI/AAAAAAAADXQ/mun69ZJ2bP0/photo.jpg?sz=128", "display_name": "Vishal Nagda", "link": "https://stackoverflow.com/users/5554198/vishal-nagda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 41149921, "answer_count": 1, "score": 0, "last_activity_date": 1481741163, "creation_date": 1481740372, "question_id": 41149680, "link": "https://stackoverflow.com/questions/41149680/redirect-to-action-index-in-rspec", "title": "redirect_to :action =&gt; :index in Rspec", "body": "<p><br>\nI tried to google for the exact solution for my problem but didn't found any appropriate result, so I'm asking for the solution here.<br><br>\n<em><strong>Here is the important information</strong></em><br>\n<strong>Ruby Version</strong> : <em>ruby 2.2.4p230 (2015-12-16 revision 53155) [x86_64-darwin15]</em><br>\n<strong>Rails Version</strong> : <em>Rails 4.2.0</em><br>\n<strong>Rspec Version</strong> : <em>3.5.4</em><br><br>\nI've a controller which has an action called <code>clearCart</code> which basically functions to clearing the <code>cart session</code><br><br>\n<strong>Here is my action</strong></p>\n\n<pre><code>def clearCart\n  session[:cart] = nil\n  redirect_to :action =&gt; :index\nend\n</code></pre>\n\n<p>The main aim for the above action is to test <code>redirect_to :action =&gt; :index</code>.</p>\n\n<p><strong>Routes for the same action</strong> (if needed)<br></p>\n\n<pre><code>get 'cart/clear' =&gt; 'cart#clearCart'\n</code></pre>\n\n<p><strong>Here is the <em>Rspec</em> test to test the same action</strong></p>\n\n<pre><code>describe \"GET #clearCart\" do\n  it \"should clear cart\" do\n    get :clearCart\n    subject { get :clearCart }\n    subject.should redirect_to :action =&gt; :index\n    # expect(response).to redirect_to(:index)\n    # response.should redirect_to :index\n    # before { post :clearCart }\n    # render 'index'\n    # specify { response.should redirect_to('frontend/cart/index') }\n  end\nend\n</code></pre>\n\n<p><em>(comments are the possible way which I tried to execute the test)</em></p>\n\n<p><strong>Here is my <em>index action</em></strong> (if needed)</p>\n\n<pre><code>def index\n  render 'frontend/cart/index' ,layout: false\nend\n</code></pre>\n\n<p>I usually refer <a href=\"https://www.relishapp.com/rspec/rspec-rails/v/2-5/docs/matchers/redirect-to-matcher\" rel=\"nofollow noreferrer\">RELISH</a> for guidance.</p>\n\n<p>Thanks in advance for help.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 540, "user_id": 5609876, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b9fb0cf118e9cbf9a15d52d7071e554b?s=128&d=identicon&r=PG", "display_name": "E.Arrowood", "link": "https://stackoverflow.com/users/5609876/e-arrowood"}, "edited": false, "score": 0, "creation_date": 1589248005, "post_id": 41149285, "comment_id": 109211907, "body": "What is the default encoding for this method when it returns a string?"}], "tags": [], "owner": {"reputation": 14704, "user_id": 908515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/f1L9v.png?s=128&g=1", "display_name": "undur_gongor", "link": "https://stackoverflow.com/users/908515/undur-gongor"}, "is_accepted": true, "score": 9, "last_activity_date": 1481738959, "creation_date": 1481738959, "answer_id": 41149285, "question_id": 41149233, "link": "https://stackoverflow.com/questions/41149233/why-is-file-read-path-to-file-not-in-ruby-docs/41149285#41149285", "title": "Why is File.read(&#39;/path/to/file&#39;) not in Ruby docs?", "body": "<p>It is documented: </p>\n\n<p><a href=\"http://ruby-doc.org/core-2.3.3/IO.html#method-c-read\" rel=\"noreferrer\">http://ruby-doc.org/core-2.3.3/IO.html#method-c-read</a></p>\n\n<p>The method is inherited from <code>IO</code> though.</p>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 6, "last_activity_date": 1481739147, "creation_date": 1481739147, "answer_id": 41149329, "question_id": 41149233, "link": "https://stackoverflow.com/questions/41149233/why-is-file-read-path-to-file-not-in-ruby-docs/41149329#41149329", "title": "Why is File.read(&#39;/path/to/file&#39;) not in Ruby docs?", "body": "<p>Use Ruby to investigate:</p>\n\n<pre><code>File.methods.include? :read\n #=&gt; true \nFile.methods(false).include? :read                                                                    \n #=&gt; false \nFile.ancestors\n #=&gt; [File, IO, File::Constants, Enumerable, Object, Kernel, BasicObject] \nIO.methods(false).include? :read\n #=&gt; true  \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1482158047, "post_id": 41149935, "comment_id": 69648344, "body": "Excellent answer Eric, thanks for sharing- I didn&#39;t know about these techniques. Also quite useful is <a href=\"http://ruby-doc.org/core-2.3.3/Method.html#method-i-owner\" rel=\"nofollow noreferrer\">Method#owner</a> i.e. <code>File.method(:read).owner #=&gt; #&lt;Class:IO&gt;</code> and <code>[&#39;array&#39;].method(:flatten).owner #=&gt; Array</code>."}, {"owner": {"reputation": 195, "user_id": 1462575, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/84d6e3eac75a18d138c6a78977fcc0e8?s=128&d=identicon&r=PG", "display_name": "Riley Guerin", "link": "https://stackoverflow.com/users/1462575/riley-guerin"}, "edited": false, "score": 0, "creation_date": 1484608494, "post_id": 41149935, "comment_id": 70570247, "body": "This is a very compelling feature of PRY"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 4, "last_activity_date": 1481741886, "last_edit_date": 1481741886, "creation_date": 1481741203, "answer_id": 41149935, "question_id": 41149233, "link": "https://stackoverflow.com/questions/41149233/why-is-file-read-path-to-file-not-in-ruby-docs/41149935#41149935", "title": "Why is File.read(&#39;/path/to/file&#39;) not in Ruby docs?", "body": "<p>It goes even easier :</p>\n\n<pre><code>File.method(:read)\n#=&gt; #&lt;Method: File(IO).read&gt;\n\n['array'].method(:flatten)\n#=&gt; #&lt;Method: Array#flatten&gt;\n</code></pre>\n\n<p>If present, the class or module between parenthesis is the place where the method is defined.</p>\n\n<p>For class methods, the syntax is <code>Class.method</code>.</p>\n\n<p>For instance methods, the syntax is <code>Class#method</code>.</p>\n\n<p>So <code>#&lt;Method: File(IO).read&gt;</code> means that <code>read</code> is a class method, defined in <code>IO</code> and available to the <code>File</code> class.</p>\n\n<p>For a method that has been defined in plain Ruby (and not C), you can use <code>Method#source_location</code>:</p>\n\n<pre><code>require 'set'\nSet.new.method(:replace).source_location\n#=&gt; [\"~/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/set.rb\", 142]\n</code></pre>\n\n<p>So <code>Set#replace</code> is defined in the specified Ruby file, at line 142.</p>\n\n<p>If you use <a href=\"https://github.com/pry/pry/wiki/Source-browsing\" rel=\"nofollow noreferrer\">PRY</a> as an alternative to IRB, you can even use :</p>\n\n<pre><code>show-source Set#replace\n#=&gt; \nFrom: /home/ricou/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/set.rb @ line 142:\nOwner: Set\nVisibility: public\nNumber of lines: 10\n\ndef replace(enum)\n  if enum.instance_of?(self.class)\n    @hash.replace(enum.instance_variable_get(:@hash))\n  else\n    clear\n    merge(enum)\n  end\n\n  self\nend\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 1462575, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/84d6e3eac75a18d138c6a78977fcc0e8?s=128&d=identicon&r=PG", "display_name": "Riley Guerin", "link": "https://stackoverflow.com/users/1462575/riley-guerin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 572, "favorite_count": 1, "accepted_answer_id": 41149285, "answer_count": 3, "score": 5, "last_activity_date": 1481741886, "creation_date": 1481738753, "question_id": 41149233, "link": "https://stackoverflow.com/questions/41149233/why-is-file-read-path-to-file-not-in-ruby-docs", "title": "Why is File.read(&#39;/path/to/file&#39;) not in Ruby docs?", "body": "<p>Why is the <code>File.read</code> method not documented in <a href=\"http://ruby-doc.org/core-2.3.3/File.html\" rel=\"noreferrer\">http://ruby-doc.org/core-2.3.3/File.html</a> when it clearly exists:</p>\n\n<pre><code>$ irb\nirb(main):001:0&gt; File.read('readme.md')\n=&gt; \"hello world\"\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1481741580, "post_id": 41149008, "comment_id": 69502309, "body": "to answer the actual question <code>i</code> is the case insensitive flag so the regex would be <code>&#47;#{color}&#47;i</code>  <a href=\"https://repl.it/EqS4\" rel=\"nofollow noreferrer\">example</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": false, "score": 3, "last_activity_date": 1481737973, "creation_date": 1481737973, "answer_id": 41149039, "question_id": 41149008, "link": "https://stackoverflow.com/questions/41149008/case-insensitive-regex-matching-in-ruby/41149039#41149039", "title": "Case insensitive regex matching in Ruby", "body": "<p>You can use downcase in the argument</p>\n\n<pre><code>def validate_rangers(color)\n  rangers = [\"red\", \"blue\", \"yellow\", \"pink\", \"black\"]\n  rangers.include?(color.downcase)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481741399, "post_id": 41149932, "comment_id": 69502209, "body": "<code>map</code> is redundant, <code>any?</code> takes block itself. Also, <code>rangers = %w|red blue yellow pink black|.map { |w| &#47;#{w}&#47;i }</code> looks less phpish."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481741701, "post_id": 41149932, "comment_id": 69502388, "body": "That&#39;s really over the top there with multiple regular expressions. Hint: <a href=\"https://ruby-doc.org/core-2.3.3/Regexp.html#method-c-union\" rel=\"nofollow noreferrer\"><code>Regexp.union</code></a>"}], "tags": [], "owner": {"reputation": 4711, "user_id": 83729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5071d40db06ac987180c40e675b7193b?s=128&d=identicon&r=PG", "display_name": "msergeant", "link": "https://stackoverflow.com/users/83729/msergeant"}, "is_accepted": false, "score": 0, "last_activity_date": 1481741199, "creation_date": 1481741199, "answer_id": 41149932, "question_id": 41149008, "link": "https://stackoverflow.com/questions/41149008/case-insensitive-regex-matching-in-ruby/41149932#41149932", "title": "Case insensitive regex matching in Ruby", "body": "<p>Array.grep uses === for comparisons. To actually use regex as your comparison, you could change your array to be regexes instead of strings:</p>\n\n<pre><code>  rangers = [/red/, /blue/, /yellow/, /pink/, /black/]\n</code></pre>\n\n<p>and then in your comparison, use regex match (=~) instead of ====:</p>\n\n<pre><code> rangers.map{|ranger| ranger =~ color }.any?\n</code></pre>\n\n<p>And to make the case insensitive comparison, you can add i to the end of your regex values. All together, it would look like this:</p>\n\n<pre><code>def validate_rangers(color)\n  rangers = [/red/i, /blue/i, /yellow/i, /pink/i, /black/i]\n  rangers.map{|ranger| ranger =~ color }.any?\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481741652, "post_id": 41150054, "comment_id": 69502349, "body": "Why not <code>find</code> or <code>include?</code>?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481741715, "post_id": 41150054, "comment_id": 69502401, "body": "@tadman <code>find</code> is not technically a boolean response <code>nil</code> or first object. Although when used as a conditional it will still function as a boolean given ruby&#39;s truthy/falsey implementation. <code>include?</code> on the other hand I can agree with."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1481741784, "post_id": 41150054, "comment_id": 69502439, "body": "@tadman for no reason: there were already answers using <code>find</code>/<code>include?</code> methods, I showed up more elegant (read: less readable) one. I am almost sure, invoking the <code>proc</code> as above is faster."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1481741700, "last_edit_date": 1481741700, "creation_date": 1481741624, "answer_id": 41150054, "question_id": 41149008, "link": "https://stackoverflow.com/questions/41149008/case-insensitive-regex-matching-in-ruby/41150054#41150054", "title": "Case insensitive regex matching in Ruby", "body": "<p>You don\u2019t need a regexp here:</p>\n\n<pre><code>def validate_rangers(color)\n  rangers = %w|red blue yellow pink black|\n  rangers.any? &amp;color.downcase.method(:==)\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1481743125, "post_id": 41150201, "comment_id": 69503143, "body": "While this implementation seems a bit extreme for the given example it is definitely a worthwhile contribution and the addition of <code>to_s</code> to avoid data type issues offers an excellent addition."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481743510, "post_id": 41150201, "comment_id": 69503348, "body": "Lovely regular expression construct."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481745145, "post_id": 41150201, "comment_id": 69504196, "body": "Unless you already have an array, you could just use a literal, i.e. <code>RANGERS = &#47;\\A(?:red|blue|yellow|pink|black)\\z&#47;i</code>. And since it is a case insensitive regular expression, you can simply write <code>!!RANGERS.match(color)</code> (and <a href=\"https://ruby-doc.org/core-2.4.0_preview3/Regexp.html#method-i-match-3F\" rel=\"nofollow noreferrer\">soon</a> <code>RANGERS.match?(color)</code>)."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481745420, "post_id": 41150201, "comment_id": 69504375, "body": "@Stefan Yeah, technically true, but sometimes it&#39;s nice to have that as an intermediate array so you can easily abstract that a bit more to read in from JSON, YAML, or some other form of config file with minimal changes. When I see a list like this, I see a list that will change fairly often."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 6, "last_activity_date": 1481742157, "creation_date": 1481742157, "answer_id": 41150201, "question_id": 41149008, "link": "https://stackoverflow.com/questions/41149008/case-insensitive-regex-matching-in-ruby/41150201#41150201", "title": "Case insensitive regex matching in Ruby", "body": "<p>The more idiomatic Ruby way of solving this problem looks like this:</p>\n\n<pre><code># Define a constant that defines the colors once and once only.\nRANGERS = [\"red\", \"blue\", \"yellow\", \"pink\", \"black\"]\n\ndef validates_rangers(color)\n  # Check against an arbitrary object that may or may not be a string,\n  # and downcase it to match better.\n  RANGERS.include?(color.to_s.downcase)\nend\n</code></pre>\n\n<p>If you're doing this frequently you might want to use a <code>Set</code> to optimize performance:</p>\n\n<pre><code>RANGERS = Set.new([\"red\", \"blue\", \"yellow\", \"pink\", \"black\"])\n</code></pre>\n\n<p>That doesn't require any code changes, but lookups are considerably faster.</p>\n\n<p>If you're intent on using a regular expression:</p>\n\n<pre><code># Construct a case-insensitive regular expression that anchors to the\n# beginning and end of the string \\A...\\z\nRANGERS = Regexp.new(\n  '\\A(?:%s)\\z' % Regexp.union(\"red\", \"blue\", \"yellow\", \"pink\", \"black\"),\n  Regexp::IGNORECASE\n)\n\ndef validates_rangers(color)\n  # Double negation returns true/false instead of MatchData\n  !!RANGERS.match(color.to_s.downcase)\nend\n\nvalidates_rangers(\"Red\")\n# =&gt; true\nvalidates_rangers(\"dred\")\n# =&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": false, "score": 13, "last_activity_date": 1482335403, "creation_date": 1482335403, "answer_id": 41266812, "question_id": 41149008, "link": "https://stackoverflow.com/questions/41149008/case-insensitive-regex-matching-in-ruby/41266812#41266812", "title": "Case insensitive regex matching in Ruby", "body": "<p>You can use the insensitive flag:</p>\n\n<pre><code>rangers.grep(/#{color}/i).any?\n</code></pre>\n\n<p>Since the flag makes the regex insensitive, it will match whatever case in <code>red</code></p>\n\n<p><strong><a href=\"https://repl.it/EqS4/1\" rel=\"noreferrer\">Working demo</a></strong></p>\n\n<pre><code>def validate_rangers(color)\n  rangers = [\"red\", \"blue\", \"yellow\", \"pink\", \"black\"]\n  rangers.grep(/#{color}/i).any?\nend\n</code></pre>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8359, "favorite_count": 2, "accepted_answer_id": 41150201, "answer_count": 5, "score": 4, "last_activity_date": 1482335446, "creation_date": 1481737834, "question_id": 41149008, "link": "https://stackoverflow.com/questions/41149008/case-insensitive-regex-matching-in-ruby", "title": "Case insensitive regex matching in Ruby", "body": "<p>I have an array with a list of power rangers colors, <code>rangers = [\"red\", \"blue\", \"yellow\", \"pink\", \"black\"]</code></p>\n\n<p>I want to validate if a given argument matches the power rangers colors, but the problem is the argument may come in different case (uppercase, lowercase, mix).</p>\n\n<p>Example:</p>\n\n<pre><code>def validate_rangers(color)\n  rangers = [\"red\", \"blue\", \"yellow\", \"pink\", \"black\"]\n  rangers.grep(color).any?\nend\n\nvalidates_rangers(\"red\") #=&gt; true\n</code></pre>\n\n<p>but</p>\n\n<pre><code>validates_rangers(\"Red\") #=&gt; false. Needs to be true.\n</code></pre>\n\n<p>How can I use case insensitive grep? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ruby-on-rails-5", "helper"], "comments": [{"owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "edited": false, "score": 0, "creation_date": 1481737956, "post_id": 41148569, "comment_id": 69500420, "body": "Why don&#39;t you do <code>include ApplicationHelper</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1481737411, "post_id": 41148767, "comment_id": 69500133, "body": "It is now telling me to: ``method_missing&#39;: undefined method <code>helper&#39; for MyMailer (call &#39;MyMailer.connection&#39; to establish a connection):Class (NoMethodError)</code> Where should I do that?"}, {"owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "reply_to_user": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1481737502, "post_id": 41148767, "comment_id": 69500194, "body": "Why are you writing: <code>helper :application</code>? You wanna methods from <code>ApplicationHelper</code>, write <code>include ApplicationHelper</code>."}], "tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1481736974, "creation_date": 1481736974, "answer_id": 41148767, "question_id": 41148569, "link": "https://stackoverflow.com/questions/41148569/rails-5-nomethoderror-undefined-method-helper-for-mymailer/41148767#41148767", "title": "Rails 5: NoMethodError: undefined method `helper&#39; for MyMailer", "body": "<p>For every model you have in your Rails application, there should exist a table, named after the plural version of the name of the model. So in your case, since the name of your model is: <code>MyMailer</code> so you should create a table named: <code>my_mailers</code>.</p>\n\n<pre><code>rails g migration create_my_mailers\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "is_accepted": false, "score": 1, "last_activity_date": 1481740173, "creation_date": 1481740173, "answer_id": 41149619, "question_id": 41148569, "link": "https://stackoverflow.com/questions/41148569/rails-5-nomethoderror-undefined-method-helper-for-mymailer/41149619#41149619", "title": "Rails 5: NoMethodError: undefined method `helper&#39; for MyMailer", "body": "<p>The error is because you are calling helper in your Mailer. If you want to include the application helper or any helper in your Mailer you have to use the \"include\" keyword.</p>\n\n<pre><code> class MyMailer &lt; ApplicationRecord \n    helper :application # This line is causing the error \n    include Devise::Controllers::UrlHelpers \n    default template_path: 'devise/mailer'\nend\n</code></pre>\n\n<p>This is how you should include your application helper</p>\n\n<pre><code>class MyMailer &lt; ApplicationRecord \n    include ApplicationHelper\n    include Devise::Controllers::UrlHelpers \n    default template_path: 'devise/mailer'\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "is_accepted": true, "score": 2, "last_activity_date": 1481740512, "creation_date": 1481740512, "answer_id": 41149726, "question_id": 41148569, "link": "https://stackoverflow.com/questions/41148569/rails-5-nomethoderror-undefined-method-helper-for-mymailer/41149726#41149726", "title": "Rails 5: NoMethodError: undefined method `helper&#39; for MyMailer", "body": "<p>if it really is a Mailer as opposed to a Model, you should probably inherit from <code>ApplicationMailer</code> as opposed to <code>ApplicationRecord</code>, else it is going to be be looking for tables in your DB to back it. </p>\n\n<pre><code>class MyMailer &lt; ApplicationMailer\n   .....\nend \n</code></pre>\n"}], "owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 485, "favorite_count": 0, "accepted_answer_id": 41149726, "answer_count": 3, "score": 1, "last_activity_date": 1481740512, "creation_date": 1481736195, "question_id": 41148569, "link": "https://stackoverflow.com/questions/41148569/rails-5-nomethoderror-undefined-method-helper-for-mymailer", "title": "Rails 5: NoMethodError: undefined method `helper&#39; for MyMailer", "body": "<p>I have a simple rails 5 application with devise and whenever I try to signup, I get the following error:</p>\n\n<blockquote>\n  <p>NoMethodError in Devise::RegistrationsController#create\n  undefined method `helper' for MyMailer(Table doesn't exist):Class</p>\n</blockquote>\n\n<p>The error occurs in line 2:</p>\n\n<pre><code>class MyMailer &lt; ApplicationRecord \n    helper :application # gives access to all helpers defined within `application_helper`.\n    include Devise::Controllers::UrlHelpers # Optional. eg. `confirmation_url`\n    default template_path: 'devise/mailer' # to make sure that your mailer uses the devise views\nend\n</code></pre>\n\n<p>Do you have any idea why this class cannot find my application helpers?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1481742438, "post_id": 41150105, "comment_id": 69502799, "body": "It continue not working. Still getting <code>nil</code> as the value of href attribute."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1481749920, "post_id": 41150105, "comment_id": 69506686, "body": "Yes, now it works. I didn&#39;t know it was possible to mention attributes of a node in this &quot;hash-like&quot; way. Thanks for your help!"}], "tags": [], "owner": {"reputation": 4457, "user_id": 5281693, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5fN4R.jpg?s=128&g=1", "display_name": "Alexander Luna", "link": "https://stackoverflow.com/users/5281693/alexander-luna"}, "is_accepted": true, "score": 2, "last_activity_date": 1481749620, "last_edit_date": 1481749620, "creation_date": 1481741797, "answer_id": 41150105, "question_id": 41148280, "link": "https://stackoverflow.com/questions/41148280/nokogiri-returning-href-attribute-as-nil/41150105#41150105", "title": "Nokogiri returning href attribute as nil", "body": "<p>Get the anchor tag first and then pass the href attribute.</p>\n\n<p>You get the anchor tag already with this code:</p>\n\n<pre><code>['h1','h2','h3','a'].each do |tag|\n  doc.xpath(\"//#{tag}\").each do |cont|\n  end\nend\n</code></pre>\n\n<p>Now you only use <code>cont</code> that contains the anchor tag to get its href using <code>cont['href']</code>:</p>\n\n<pre><code>content = Content.create({site_id: site.id, text: cont['href'], content_type: 'href', content_tag: tag })\n</code></pre>\n"}], "owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 156, "favorite_count": 0, "accepted_answer_id": 41150105, "answer_count": 1, "score": 1, "last_activity_date": 1481749717, "creation_date": 1481735240, "last_edit_date": 1481749717, "question_id": 41148280, "link": "https://stackoverflow.com/questions/41148280/nokogiri-returning-href-attribute-as-nil", "title": "Nokogiri returning href attribute as nil", "body": "<p>I am building a small API with just two endpoints (at least by now) defined in my config/routes.rb by:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  get '/api/list',      to: 'api#list'\n  get '/api/add/:url',  to: 'api#add'\n\nend\n</code></pre>\n\n<p>One of the endpoints receives an URL and I parse and store some of its contents with the following code in app/controllers/api_controller.rb:</p>\n\n<pre><code>require 'nokogiri'\nrequire 'httparty'\n\nclass ApiController &lt; ApplicationController\n\n  def list\n  end\n\n  def add\n    @url = \"http://#{params[:url]}\"\n    site = Site.create(url: @url)\n    site.save!\n    page = HTTParty.get(@url)\n    doc = Nokogiri::HTML(page)\n    ['h1','h2','h3','a'].each do |tag|\n      doc.xpath(\"//#{tag}\").each do |cont|\n        if (tag == 'a') then\n          content = Content.create({site_id: site.id, text: cont.at_xpath('/a/@href').to_s.strip!, content_type: 'href', content_tag: tag })\n        else \n          content = Content.create({site_id: site.id, text: cont.text().to_s.strip!, content_type: 'tag_content', content_tag: tag })\n        end\n        content.save!\n      end\n    end\n  end\n\nend\n</code></pre>\n\n<p>I managed to get the contents of <code>&lt;h1&gt;</code>, <code>&lt;h2&gt;</code> and <code>&lt;h3&gt;</code> tags perfectly, but the content of the <code>href</code> attributes for <code>&lt;a&gt;</code> tags is being saved as <code>nil</code> and I really don't know what is wrong with this:</p>\n\n<pre><code>cont.at_xpath('/a/@href').to_s.strip!\n</code></pre>\n\n<p>expression.</p>\n\n<p>I already tried:</p>\n\n<pre><code>cont.at_xpath('/@href').to_s.strip!\n</code></pre>\n\n<p>since <code>cont</code> is already the <code>a</code> node in this case, but it happened the same.</p>\n\n<p>I am using Rails 5 and I started my project with <code>--api</code>.</p>\n\n<p>Any hints?</p>\n"}, {"tags": ["ruby", "centos", "chef-infra", "test-kitchen"], "answers": [{"comments": [{"owner": {"reputation": 15030, "user_id": 3627607, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd5fd623c0fdd0c93a2535cf6293ec5d?s=128&d=identicon&r=PG", "display_name": "Tensibai", "link": "https://stackoverflow.com/users/3627607/tensibai"}, "edited": false, "score": 1, "creation_date": 1481792695, "post_id": 41159484, "comment_id": 69521277, "body": "<code>sudo su -l myuser</code> should do also and save a bash process and a context switch"}, {"owner": {"reputation": 1037, "user_id": 6812637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-QEVKvPalxzI/AAAAAAAAAAI/AAAAAAAAAA8/CSUfpoapG14/photo.jpg?sz=128", "display_name": "Navarro", "link": "https://stackoverflow.com/users/6812637/navarro"}, "edited": false, "score": 0, "creation_date": 1481795372, "post_id": 41159484, "comment_id": 69523033, "body": "The main problem is that if the user needs to have a certain ulimit set to a process start (Like Elasticsearch with nproc), the process fails on every kitchen run and I can&#39;t build tests around it running as it should.  It seems to be more an issue about how Chef impersonates the users that start a service. :("}, {"owner": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "edited": false, "score": 0, "creation_date": 1481798612, "post_id": 41159484, "comment_id": 69525104, "body": "Chef doesn&#39;t impersonate user, init script does. Maybe you don&#39;t create limit file early enough? However this is &#39;an issue&#39; for another question."}, {"owner": {"reputation": 1037, "user_id": 6812637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-QEVKvPalxzI/AAAAAAAAAAI/AAAAAAAAAA8/CSUfpoapG14/photo.jpg?sz=128", "display_name": "Navarro", "link": "https://stackoverflow.com/users/6812637/navarro"}, "edited": false, "score": 0, "creation_date": 1481812842, "post_id": 41159484, "comment_id": 69534018, "body": "Maybe you&#39;re right. Or maybe is more a question related with Vagrant as a Kitchen driver.  The strange thing here is that I don&#39;t face this issue when loading my policyfiles in real machines instead of the Kitchen-Vagrant&#39;s VMs."}], "tags": [], "owner": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "is_accepted": false, "score": 1, "last_activity_date": 1481790176, "creation_date": 1481790176, "answer_id": 41159484, "question_id": 41148266, "link": "https://stackoverflow.com/questions/41148266/ulimit-in-test-kitchen/41159484#41159484", "title": "ulimit in test kitchen", "body": "<p>When you login using <code>kitchen login</code> default user is <code>vagrant</code>, if you want to check limits for user <code>myuser</code>, run:</p>\n\n<ol>\n<li><code>sudo su -</code></li>\n<li><code>su -l myuser</code></li>\n<li><code>ulimit -a</code></li>\n</ol>\n\n<p>It works for me ;-)</p>\n"}], "owner": {"reputation": 1037, "user_id": 6812637, "user_type": "registered", "accept_rate": 78, "profile_image": "https://lh4.googleusercontent.com/-QEVKvPalxzI/AAAAAAAAAAI/AAAAAAAAAA8/CSUfpoapG14/photo.jpg?sz=128", "display_name": "Navarro", "link": "https://stackoverflow.com/users/6812637/navarro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 191, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481790176, "creation_date": 1481735159, "question_id": 41148266, "link": "https://stackoverflow.com/questions/41148266/ulimit-in-test-kitchen", "title": "ulimit in test kitchen", "body": "<p>The operating system is <code>Centos 7</code>, I am using <code>Test Kitchen 1.13.2</code> and <code>centos-7.2</code> default vagrant box.</p>\n\n<p>I need nproc to be above a certain limit for one user, for this I modified <code>/etc/security/limits.d/20-nproc.conf</code> (Which overrides <code>/etc/security/limits.conf</code>) and added</p>\n\n<pre><code>myuser    soft    nproc    99999\n</code></pre>\n\n<p>However, after rebooting the VM created by kitchen and I log via <code>kitchen login</code> and run <code>ulimit -a</code> I see this:</p>\n\n<pre><code>core file size          (blocks, -c) 0\ndata seg size           (kbytes, -d) unlimited\nscheduling priority             (-e) 0\nfile size               (blocks, -f) unlimited\npending signals                 (-i) 1878\nmax locked memory       (kbytes, -l) 64\nmax memory size         (kbytes, -m) unlimited\nopen files                      (-n) 1024\npipe size            (512 bytes, -p) 8\nPOSIX message queues     (bytes, -q) 819200\nreal-time priority              (-r) 0\nstack size              (kbytes, -s) 8192\ncpu time               (seconds, -t) unlimited\nmax user processes              (-u) 1878\nvirtual memory          (kbytes, -v) unlimited\nfile locks                      (-x) unlimited\n</code></pre>\n\n<p>I am afraid there is something in the way Kitchen connects to the VMs it generates that does not load <code>limits.conf</code> configuration. Any idea how to be able to test this locally on Kitchen?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 9878, "user_id": 3315785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/YsMo6.jpg?s=128&g=1", "display_name": "j-dexx", "link": "https://stackoverflow.com/users/3315785/j-dexx"}, "edited": false, "score": 0, "creation_date": 1481734517, "post_id": 41148003, "comment_id": 69498429, "body": "If it fails validation it won&#39;t try and save it so will never hit the unique index (unless you use a save method that ignores validation)"}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1481734905, "creation_date": 1481734905, "answer_id": 41148189, "question_id": 41148003, "link": "https://stackoverflow.com/questions/41148003/active-record-raise-recordnotunique-instead-of-taken/41148189#41148189", "title": "active record raise recordnotunique instead of taken", "body": "<p>If you want to have an <code>ActiveRecord::RecordNotUnique</code> exception instead of an <code>:taken</code> validation error, you need to do two things:</p>\n\n<ol>\n<li>Add an unique index to your database column</li>\n<li>Remove the uniqueness validation from your model</li>\n</ol>\n"}], "owner": {"reputation": 312, "user_id": 6901133, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/524e04dea88388e3079ccecf773f2576?s=128&d=identicon&r=PG&f=1", "display_name": "abdul ahmad", "link": "https://stackoverflow.com/users/6901133/abdul-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "accepted_answer_id": 41148189, "answer_count": 1, "score": 0, "last_activity_date": 1481734905, "creation_date": 1481734318, "question_id": 41148003, "link": "https://stackoverflow.com/questions/41148003/active-record-raise-recordnotunique-instead-of-taken", "title": "active record raise recordnotunique instead of taken", "body": "<p>I have an <code>ActiveRecord</code> model with an email validation that validates uniqueness:</p>\n\n<pre><code>  validates :email,\n            allow_blank: true,\n            format: { with: /\\A.*@.*\\z/ },\n            uniqueness: true\n</code></pre>\n\n<p>When I try to insert a new record with the same email, it gives me the following error: </p>\n\n<blockquote>\n  <p>@messages={:email=>[\"has already been taken\"]}, @details={:email=>[{:error=>:taken, :value=>\"liberty_w@example.com\"}</p>\n</blockquote>\n\n<p>However, I want it to raise <code>ActiveRecord::RecordNotUnique</code>.</p>\n\n<p>Is this possible?</p>\n\n<p>I have tried adding an email index in a migration, with <code>unique: true</code> but that didnt do anything. What else can I try?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "devise"], "answers": [{"tags": [], "owner": {"reputation": 331, "user_id": 5028816, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-XhXi57-YBBc/AAAAAAAAAAI/AAAAAAAAB5s/8qeW6IUKiKA/photo.jpg?sz=128", "display_name": "Tim Lawrenz", "link": "https://stackoverflow.com/users/5028816/tim-lawrenz"}, "is_accepted": false, "score": 0, "last_activity_date": 1481740686, "creation_date": 1481740686, "answer_id": 41149788, "question_id": 41147704, "link": "https://stackoverflow.com/questions/41147704/how-can-i-render-the-devise-signin-and-signup-views-on-the-layout-to-be-availabl/41149788#41149788", "title": "How can I render the devise signin and signup views on the layout to be available on all pages", "body": "<p>You could extract the views from devise (mainly good for more customization) by running</p>\n\n<pre><code>rails generate devise:views\n</code></pre>\n\n<p>This will extract the devise views into your app/views path. Take the forms from there and add them to your existing application template.</p>\n\n<p>See the <a href=\"https://github.com/plataformatec/devise#configuring-views\" rel=\"nofollow noreferrer\">devise documentation</a> for more information.</p>\n"}], "owner": {"reputation": 356, "user_id": 6146583, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/LrVic.jpg?s=128&g=1", "display_name": "Dreeub", "link": "https://stackoverflow.com/users/6146583/dreeub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481740686, "creation_date": 1481733513, "question_id": 41147704, "link": "https://stackoverflow.com/questions/41147704/how-can-i-render-the-devise-signin-and-signup-views-on-the-layout-to-be-availabl", "title": "How can I render the devise signin and signup views on the layout to be available on all pages", "body": "<p>I want to show the devise login and signup pages on all views of my application, so it can be publicly accessible from anywhere, How can achieve this so I dont need to use the devise requests to show only the login or signup form?</p>\n"}, {"tags": ["ruby", "selenium"], "answers": [{"tags": [], "owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "is_accepted": false, "score": 0, "last_activity_date": 1481731936, "creation_date": 1481731936, "answer_id": 41147210, "question_id": 41147066, "link": "https://stackoverflow.com/questions/41147066/selenium-search-bar-protected-undefined-local-element-or-method/41147210#41147210", "title": "Selenium search bar protected ? &quot; undefined local element or method&quot;", "body": "<p>It's saying that you don't have <code>element</code> defined before attempting to call those methods. If you aren't trying to find a child element from an element, use the <code>find_element</code> method off of your <code>driver</code> instance</p>\n"}, {"comments": [{"owner": {"reputation": 51, "user_id": 3436597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe1135517afbad7cf06f915edc3f0655?s=128&d=identicon&r=PG&f=1", "display_name": "Goeast", "link": "https://stackoverflow.com/users/3436597/goeast"}, "edited": false, "score": 0, "creation_date": 1481732230, "post_id": 41147216, "comment_id": 69496892, "body": "This is totally the answer... When I posted i found the solution... Thank you so much anyway !"}, {"owner": {"reputation": 2183, "user_id": 1869007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a5485a7313b368471cfe092e95fd7bea?s=128&d=identicon&r=PG", "display_name": "Lucas Tierney", "link": "https://stackoverflow.com/users/1869007/lucas-tierney"}, "edited": false, "score": 0, "creation_date": 1481732753, "post_id": 41147216, "comment_id": 69497272, "body": "Can you accept the answer so people don&#39;t think it&#39;s still unanswered?"}], "tags": [], "owner": {"reputation": 697, "user_id": 2375814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/827ceac7cc9d39e8db4abe2495f9f0ce?s=128&d=identicon&r=PG&f=1", "display_name": "Josh", "link": "https://stackoverflow.com/users/2375814/josh"}, "is_accepted": true, "score": 2, "last_activity_date": 1481731953, "creation_date": 1481731953, "answer_id": 41147216, "question_id": 41147066, "link": "https://stackoverflow.com/questions/41147066/selenium-search-bar-protected-undefined-local-element-or-method/41147216#41147216", "title": "Selenium search bar protected ? &quot; undefined local element or method&quot;", "body": "<p>I think it looks like an issue with your code, e.g.:</p>\n\n<pre><code>element = element.find_element\n</code></pre>\n\n<p>More specifically this bit:</p>\n\n<pre><code>element.find_element\n</code></pre>\n\n<p>Shouldn't that be:</p>\n\n<pre><code>browser.find_element\n</code></pre>\n\n<p>or</p>\n\n<pre><code>driver.find_element\n</code></pre>\n\n<p>(or similar) ?</p>\n"}], "owner": {"reputation": 51, "user_id": 3436597, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fe1135517afbad7cf06f915edc3f0655?s=128&d=identicon&r=PG&f=1", "display_name": "Goeast", "link": "https://stackoverflow.com/users/3436597/goeast"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 41147216, "answer_count": 2, "score": 0, "last_activity_date": 1481731953, "creation_date": 1481731501, "question_id": 41147066, "link": "https://stackoverflow.com/questions/41147066/selenium-search-bar-protected-undefined-local-element-or-method", "title": "Selenium search bar protected ? &quot; undefined local element or method&quot;", "body": "<p>I am using selenium trying to send a key to a search bar.</p>\n\n<p>This is the code of the search bar.</p>\n\n<pre><code>&lt;input type=\"text\" value=\"XXXXXXX\" onblur=\"ga('send', 'event', \n'Search', 'Champ_de_recherche');\" name=\"champs\" id=\"input_search\" aria-\nlabel=\"Recherche XXX.com\" autocapitalize=\"none\" autocorrect=\"off\"&gt;\n</code></pre>\n\n<p>I am unable to locate it with selenium using name / css / class or id selector</p>\n\n<pre><code>element = element.find_element(:id, \"input_search\")\nelement = element.find_element(:name, \"champs\")\n</code></pre>\n\n<p>both are returning <em>\"undefined local variable or method `element' for main:Object (NameError)\"</em></p>\n\n<p>any guess ? </p>\n"}, {"tags": ["ruby", "csv", "ruby-on-rails-4", "xls", "roo-gem"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1481734395, "post_id": 41146903, "comment_id": 69498372, "body": "<a href=\"https://github.com/roo-rb/roo/blob/33e20b202d9c6d6c8ec97e132a67059de7ef45c8/lib/roo/base.rb#L695\" rel=\"nofollow noreferrer\"><code>Roo::Base#to_csv</code></a> tries to guess the cell type and occasionally fails. You should read the rows one by one, using <code>excelx_value(row, col)</code> or even explicitly specifying the type to be <code>String</code>."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481735705, "post_id": 41146903, "comment_id": 69499151, "body": "Can you use excelx_value(row, col) even if the file is not an xlsx file (e.g. an xls file)?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481736084, "post_id": 41146903, "comment_id": 69499390, "body": "I never dealt with <code>xls</code> files, sorry."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1481743718, "post_id": 41146903, "comment_id": 69503434, "body": "<code>cell</code> in <code>roo-xls</code> should provide you with the same functionality as <code>excelx_value</code> since <code>excelx_value</code> is deprecated and simple refers to <code>cell_value</code> (<code>roo</code> implements <code>Cell</code> as a class where as <code>roo-xls</code> implements cells in an <code>Array</code> of <code>Hash</code> Objects)"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1510324786, "creation_date": 1481731048, "last_edit_date": 1510324786, "question_id": 41146903, "link": "https://stackoverflow.com/questions/41146903/how-do-i-get-xls-data-to-appear-in-csv-form-the-same-way-it-displays-in-the-file", "title": "How do I get XLS data to appear in CSV form the same way it displays in the file?", "body": "<p>I\u2019m using Rails 4.2.7 and am using the roo-xls gem.  I parse my .xls file using the following code</p>\n\n<pre><code>book = Roo::Spreadsheet.open(file_location)\nsheet = book.sheet(0)\ntext = sheet.to_csv\narr_of_arrs = CSV.parse(text)\n</code></pre>\n\n<p>One oddity I\u2019m noticing, is that cells in my XLS file that read as \u201c53:52.56\u201d appear in my CSV data as \u201c0.037413888888888885\u201d.  All the other cells appear in the CSV data the same way they do in the XLS file.  How can I get this one row to show up in my CSV data the same way it appears in the XLS file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "configuration", "profiler"], "answers": [{"tags": [], "owner": {"reputation": 3145, "user_id": 1067145, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/27ee4361799dc32f89db00ad5f8e5ec0?s=128&d=identicon&r=PG", "display_name": "Max Wallace", "link": "https://stackoverflow.com/users/1067145/max-wallace"}, "is_accepted": true, "score": 0, "last_activity_date": 1481729830, "creation_date": 1481729830, "answer_id": 41146467, "question_id": 41146466, "link": "https://stackoverflow.com/questions/41146466/how-can-i-ignore-many-endpoints-in-skylight/41146467#41146467", "title": "How can I ignore many endpoints in Skylight?", "body": "<p>Here's one solution-- create a Rake task to dynamically generate the list of endpoints you want to ignore:</p>\n\n<pre><code>task generate_ignored_endpoints_list_for_skylight: :environment do\n  Rails.application.eager_load!\n  ParentController.descendants.flat_map do |controller_class|\n    controller_class.action_methods.map do |method_name|\n      \"#{controller_class.name}##{method_name}\"\n    end\n  end.each do |name|\n    puts name\n  end\nend\n</code></pre>\n\n<p>This will work well if the endpoints you want to ignore are grouped under a parent controller (e.g. <code>Admin::ApplicationController</code> if you're using <a href=\"https://github.com/thoughtbot/administrate\" rel=\"nofollow noreferrer\">Administrate</a>). </p>\n"}], "owner": {"reputation": 3145, "user_id": 1067145, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/27ee4361799dc32f89db00ad5f8e5ec0?s=128&d=identicon&r=PG", "display_name": "Max Wallace", "link": "https://stackoverflow.com/users/1067145/max-wallace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 41146467, "answer_count": 1, "score": 1, "last_activity_date": 1481729830, "creation_date": 1481729830, "question_id": 41146466, "link": "https://stackoverflow.com/questions/41146466/how-can-i-ignore-many-endpoints-in-skylight", "title": "How can I ignore many endpoints in Skylight?", "body": "<p><a href=\"https://www.skylight.io/\" rel=\"nofollow noreferrer\">Skylight</a> allows you to ignore a list of endpoints by specifying them in your <code>skylight.yml</code> (see <a href=\"https://docs.skylight.io/getting-set-up/#agent-configuration-general-options-ignoring-heartbeat-endpoints\" rel=\"nofollow noreferrer\">Ignoring heartbeat endpoints</a>). But this list doesn't support wildcards and I have a <em>lot</em> of endpoints I want to ignore-- what should I do?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1481729842, "post_id": 41146244, "comment_id": 69495247, "body": "What have you tries so far? Please include your code in the post, including its output/any errors."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481730204, "post_id": 41146244, "comment_id": 69495476, "body": "<i>Sidenote:</i> the advice to use <code>raise</code> here is uhmmm... a bit strange. Regexp for the word, <i>not preceeding by a quote</i> is: <code>&#47;(?&lt;!&quot;)Paragraph&#47;</code>."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1481730568, "post_id": 41146244, "comment_id": 69495715, "body": "How can we help you improve your current implementation if you don&#39;t show it to us?"}, {"owner": {"reputation": 1, "user_id": 7257648, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7537ff210907405b717d33313566db3c?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7257648/jack"}, "edited": false, "score": 0, "creation_date": 1481732919, "post_id": 41146244, "comment_id": 69497403, "body": "My parser is a big project, there are many files cooperating together. Every line is checked for many different Regexps. If line is empty, I use next if line.empty?. I wanted to use if line.quote; raise;end, but it stops the whole thing"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481740466, "post_id": 41146244, "comment_id": 69501691, "body": "The usual pattern in Ruby when iterating and processing elements is <code>each</code> on the elements involved, but I don&#39;t see any code here. This sample data is also pretty thin. Normally documents of this sort have so-called smart-quotes in them like <code>\u201cSample text\u201d</code> and things like <code>\u201cGadzooks,\u201d exclaimed the mad scientist.</code> where the very idea of what&#39;s quoted is sometimes subtle."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1481740478, "post_id": 41146468, "comment_id": 69501695, "body": "I&#39;m not sure what this answers, if it answers anything at all. Also, when linking to documentation try and link to the current version whenever possible, which is now 2.3.3."}], "tags": [], "owner": {"reputation": 145, "user_id": 4963694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfW4p.png?s=128&g=1", "display_name": "Captain Chaos", "link": "https://stackoverflow.com/users/4963694/captain-chaos"}, "is_accepted": false, "score": 0, "last_activity_date": 1481730611, "last_edit_date": 1481730611, "creation_date": 1481729839, "answer_id": 41146468, "question_id": 41146244, "link": "https://stackoverflow.com/questions/41146244/ruby-stop-program-from-executing-in-certain-way/41146468#41146468", "title": "Ruby - stop program from executing in certain way", "body": "<p>OK, so I'm still a bit of a beginner, I don't know if there is a way to direct the regex to ignore things inside quotes, but if I wanted to solve this problem, I would first make a copy of the text to be parsed, run a regex over that and delete everything inside quotes, then run the parser over the remaining text. </p>\n\n<p>A bit kludgy and inelegant I admit, and may have performance issues over a large enough text, but it would get the job done. </p>\n\n<p>See <a href=\"https://ruby-doc.org/core-2.1.1/Regexp.html\" rel=\"nofollow noreferrer\">HERE</a> for link to documentation of ruby regex. About a third of the way down it discusses quotes: </p>\n\n<p>/\\p{Pi}/ - 'Punctuation: Initial Quote'</p>\n\n<p>/\\p{Pf}/ - 'Punctuation: Final Quote'</p>\n\n<p>You may be able to bake that into the regex with the ^ to direct it to ignore items in quotes. </p>\n"}], "owner": {"reputation": 1, "user_id": 7257648, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/7537ff210907405b717d33313566db3c?s=128&d=identicon&r=PG&f=1", "display_name": "Jack", "link": "https://stackoverflow.com/users/7257648/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481730611, "creation_date": 1481729178, "question_id": 41146244, "link": "https://stackoverflow.com/questions/41146244/ruby-stop-program-from-executing-in-certain-way", "title": "Ruby - stop program from executing in certain way", "body": "<p>I wrote a parser, which recognizes elements of text based on certain pattern.\nMy program is able to recognize paragraph, chapter etc. The problem is it shouldn't recognize elements, when there's a quote. For example:</p>\n\n<pre><code>Paragraph 1\nSomething here...\n</code></pre>\n\n<p>would be proceed as Paragraph.\nAnd:</p>\n\n<pre><code>  Paragraph 1\n  \"Paragraph 2\"\n</code></pre>\n\n<p>shouldn't. But as my program is based on regexp patterns, it looks for the word \"Paragraph\". I'm going line by line and recognize patterns for each line. I don't know how to tell my program: if you see quotes mark, leave text alone without doing anything? My mentor told me to use raise, but I'm not sure how to do it.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 2, "creation_date": 1481729118, "post_id": 41146182, "comment_id": 69494805, "body": "<code>string.split(&#39;.&#47;&#39;)  =&gt; [&quot;&quot;, &quot;component&#47;unit&quot;] </code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 2, "creation_date": 1481733790, "post_id": 41146182, "comment_id": 69497971, "body": "This is what&#39;s sometimes called an <a href=\"http://xyproblem.info/\" rel=\"nofollow noreferrer\">XY Problem</a>. You could use <code>String#split</code>, but there are other (arguably better) ways that don&#39;t. It would have been better to simply explain what you want to do, so the use of <code>split</code> would have been confined to your code."}], "answers": [{"comments": [{"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 1, "creation_date": 1481729295, "post_id": 41146258, "comment_id": 69494923, "body": "Its working.. my bad I didn&#39;t try without using forward slash inside of split. Thanks!"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1481792137, "post_id": 41146258, "comment_id": 69520989, "body": "This will break for &quot;./my/special./file&quot;, but i hope your list is sane :)"}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": true, "score": 5, "last_activity_date": 1481729218, "creation_date": 1481729218, "answer_id": 41146258, "question_id": 41146182, "link": "https://stackoverflow.com/questions/41146182/how-to-split-a-string-which-contains-multiple-forward-slashes/41146258#41146258", "title": "How to split a string which contains multiple forward slashes", "body": "<p>I think, this should help you:</p>\n\n<pre><code>string = './component/unit'\n\nstring.split('./') \n#=&gt; [\"\", \"component/unit\"]\n\nstring.split('./').last\n#=&gt; \"component/unit\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1481792411, "post_id": 41146415, "comment_id": 69521129, "body": "This solution will break &quot;freaking/path./oups&quot;. Probably better would be to anchor the regex on beginning of string ( ^ ) &#39;./component./unit&#39;.gsub(/^\\.\\//,&#39;&#39;) - assuming its about filepaths."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1481792680, "post_id": 41146415, "comment_id": 69521267, "body": "I upvoted your answer : it&#39;s pretty clean. But if you name a folder <code>&quot;freaking&#47;path.&#47;oups&quot;</code>, you deserve any bug which might appear. ;)"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "edited": false, "score": 0, "creation_date": 1481793996, "post_id": 41146415, "comment_id": 69522075, "body": "Absoluteley :) But its easily changed by using the ^-anchor, which i think you should include in your answer ;)"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 5, "last_activity_date": 1481729700, "creation_date": 1481729700, "answer_id": 41146415, "question_id": 41146182, "link": "https://stackoverflow.com/questions/41146182/how-to-split-a-string-which-contains-multiple-forward-slashes/41146415#41146415", "title": "How to split a string which contains multiple forward slashes", "body": "<p>Your regex was almost fine :</p>\n\n<pre><code>split(/\\.\\//)\n</code></pre>\n\n<p>You need to escape both <code>.</code> (any character) and <code>/</code> (regex delimiter).</p>\n\n<p>As an alternative, you could just remove the first <code>'./'</code> substring :</p>\n\n<pre><code>'./component/unit'.sub('./','')\n#=&gt; \"component/unit\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 0, "last_activity_date": 1506281452, "last_edit_date": 1506281452, "creation_date": 1481731882, "answer_id": 41147187, "question_id": 41146182, "link": "https://stackoverflow.com/questions/41146182/how-to-split-a-string-which-contains-multiple-forward-slashes/41147187#41147187", "title": "How to split a string which contains multiple forward slashes", "body": "<p>Using a positive lookbehind, you could do use regex:</p>\n\n<pre><code>reg  = /(?&lt;=\\.\\/)[\\w+\\/]+\\w+\\z/\n</code></pre>\n\n<h3>Demo</h3>\n\n<pre><code>str  = './component'\nstr2 = './component/unit'\nstr3 = './component/unit/ruby'\nstr4 = './component/unit/ruby/regex'\n\n[str, str2, str3, str4].each { |s| puts s[reg] }\n#component\n#component/unit\n#component/unit/ruby\n#component/unit/ruby/regex\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1481760940, "post_id": 41153288, "comment_id": 69510693, "body": "Fair comment, it would however be great to see an answer to the question using your approach:)"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1481791218, "post_id": 41153288, "comment_id": 69520482, "body": "@sagarpandya82 Yes you are right, I will provide a &quot;solution&quot;. Although I doubt that the question really reflects the specific problem."}], "tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": false, "score": 2, "last_activity_date": 1481791271, "last_edit_date": 1481791271, "creation_date": 1481754248, "answer_id": 41153288, "question_id": 41146182, "link": "https://stackoverflow.com/questions/41146182/how-to-split-a-string-which-contains-multiple-forward-slashes/41153288#41153288", "title": "How to split a string which contains multiple forward slashes", "body": "<p>All the other answers are fine, but I think you are not really dealing with a <code>String</code> here but with a <code>URI</code> or <code>Pathname</code>, so I would advise you to use these classes if you can. If so, please adjust the title, as it is not about do-it-yourself-regexes, but about proper use of the available libraries.</p>\n\n<p>Link to the ruby doc:</p>\n\n<p><a href=\"https://docs.ruby-lang.org/en/2.1.0/URI.html\" rel=\"nofollow noreferrer\">https://docs.ruby-lang.org/en/2.1.0/URI.html</a>\nand\n<a href=\"https://ruby-doc.org/stdlib-2.1.0/libdoc/pathname/rdoc/Pathname.html\" rel=\"nofollow noreferrer\">https://ruby-doc.org/stdlib-2.1.0/libdoc/pathname/rdoc/Pathname.html</a></p>\n\n<p>An example with <strong>Pathname</strong> is:</p>\n\n<pre><code>require 'pathname'\n\npathname = Pathname.new('./component/unit')\nputs pathname.cleanpath # =&gt; \"component/unit\"\n#    pathname.to_s      # =&gt; \"component/unit\"\n</code></pre>\n\n<p>Whether this is a good idea (and/or using URI would be cool too) also depends on what your real problem is, i.e. what you want to do with the extracted String. As stated, I doubt a bit that you are really intested in Strings.</p>\n"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 830, "favorite_count": 1, "accepted_answer_id": 41146258, "answer_count": 4, "score": 2, "last_activity_date": 1506281452, "creation_date": 1481729026, "last_edit_date": 1481795490, "question_id": 41146182, "link": "https://stackoverflow.com/questions/41146182/how-to-split-a-string-which-contains-multiple-forward-slashes", "title": "How to split a string which contains multiple forward slashes", "body": "<p>I have a string as given below,</p>\n\n<pre><code>./component/unit\n</code></pre>\n\n<p>and need to split to get result as <code>component/unit</code> which I will use this as key for inserting hash. </p>\n\n<p>I tried with <code>.split(/.\\//).last</code> but its giving result as <code>unit</code> only not getting <code>component/unit</code>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "carrierwave"], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 3185654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/33cod.jpg?s=128&g=1", "display_name": "Twizty", "link": "https://stackoverflow.com/users/3185654/twizty"}, "is_accepted": false, "score": 2, "last_activity_date": 1481728797, "creation_date": 1481728797, "answer_id": 41146095, "question_id": 41145929, "link": "https://stackoverflow.com/questions/41145929/using-carrierwave-how-can-i-make-sure-the-remote-url-is-valid-picture-before-tr/41146095#41146095", "title": "Using Carrierwave, how can I make sure the remote url is valid picture before trying to save it to the record?", "body": "<p>You may want to make <code>HEAD</code> http-request to the picture url, and check response headers.</p>\n"}, {"tags": [], "owner": {"reputation": 4538, "user_id": 809830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdd9801d2717096282258b192edc7793?s=128&d=identicon&r=PG", "display_name": "Alex Kojin", "link": "https://stackoverflow.com/users/809830/alex-kojin"}, "is_accepted": true, "score": 1, "last_activity_date": 1481729227, "last_edit_date": 1481729227, "creation_date": 1481728907, "answer_id": 41146133, "question_id": 41145929, "link": "https://stackoverflow.com/questions/41145929/using-carrierwave-how-can-i-make-sure-the-remote-url-is-valid-picture-before-tr/41146133#41146133", "title": "Using Carrierwave, how can I make sure the remote url is valid picture before trying to save it to the record?", "body": "<p>I often use <a href=\"https://github.com/sdsykes/fastimage\" rel=\"nofollow noreferrer\">FastImage</a> gem to fast find image size and type. You can too use to check image is valid or not. </p>\n\n<pre><code>FastImage.type('https://github.com/sdsykes/fastimage') \n=&gt; nil\n\nFastImage.type('https://www.google.ru/images/branding/googlelogo/2x/googlelogo_color_120x44dp.png')\n =&gt; :png \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1481729958, "last_edit_date": 1481729958, "creation_date": 1481729246, "answer_id": 41146266, "question_id": 41145929, "link": "https://stackoverflow.com/questions/41145929/using-carrierwave-how-can-i-make-sure-the-remote-url-is-valid-picture-before-tr/41146266#41146266", "title": "Using Carrierwave, how can I make sure the remote url is valid picture before trying to save it to the record?", "body": "<p>Ruby has a <a href=\"https://ruby-doc.org/stdlib-2.3.3/libdoc/net/http/rdoc/Net/HTTP.html\" rel=\"nofollow noreferrer\">stdlib HTTP library</a> that you can use:</p>\n\n<pre><code>uri = URI('http://example.com/some_path?query=string')\n\nNet::HTTP.start(uri.host, uri.port) do |http|\n  response = http.head('/')\n  if response.is_a?(Net::HTTPSuccess)\n    puts \"Yay\"\n  else\n    puts \"Oh noes\"\n  end\nend\n</code></pre>\n\n<p>To create a validation which checks if URL is valid you would do:</p>\n\n<pre><code>require 'net/http'\nclass Thing &lt; ApplicationRecord\n  validates :headshot_url_must_be_valid, if: -&gt; { headshot_url.present? }\n\n  def headshot_url_must_be_valid\n    uri = URI(headshot_url)\n    Net::HTTP.start(uri.host, uri.port) do |http|\n     response = http.head('/')\n     unless response.is_a?(Net::HTTPSuccess)\n       # This is how you would normally do validation\n       # errors.add(:headshot_url, \"is invalid. #{res.code} - #{res.msg}\")\n       self[:headshot_url] = nil\n     end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5645, "user_id": 394241, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/3053d95e25ab78a2c696b6e24c7dd8cf?s=128&d=identicon&r=PG", "display_name": "daveomcd", "link": "https://stackoverflow.com/users/394241/daveomcd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 41146133, "answer_count": 3, "score": 0, "last_activity_date": 1481729958, "creation_date": 1481728286, "question_id": 41145929, "link": "https://stackoverflow.com/questions/41145929/using-carrierwave-how-can-i-make-sure-the-remote-url-is-valid-picture-before-tr", "title": "Using Carrierwave, how can I make sure the remote url is valid picture before trying to save it to the record?", "body": "<p>I was attempting to save my picture files in the following manner in my ActiveJob, but a lot of my records were showing up as invalid. After looking into why, it appears the remote url isn't finding a valid picture and is returning a 404 error message.  How can I change my current setup to (1) attempt to get the picture, (2) if it's an invalid link then ignore it and still save the record -- just without the picture?</p>\n\n<p>My current setup...</p>\n\n<pre><code>if self.headshot_url.present?\n   player_record.remote_headshot_image_url = self.headshot_url\n   if !player_record.valid?\n     player_record.remote_headshot_image_url = nil\n   end\nend\n</code></pre>\n"}, {"tags": ["ruby", "irb"], "answers": [{"comments": [{"owner": {"reputation": 1504, "user_id": 3536450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d7d9026d96e8a5733927cb70c20010a1?s=128&d=identicon&r=PG", "display_name": "dfherr", "link": "https://stackoverflow.com/users/3536450/dfherr"}, "edited": false, "score": 0, "creation_date": 1481728538, "post_id": 41145674, "comment_id": 69494450, "body": "totally forgot about pry. I didn&#39;t use your meta settings but rebinded my up/down arrow keys to do that. <code>&quot;\\e[A&quot;: history-search-backward</code>  Will that have any weird sideeffects as inputrc is not really irb specific ;)?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 1504, "user_id": 3536450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d7d9026d96e8a5733927cb70c20010a1?s=128&d=identicon&r=PG", "display_name": "dfherr", "link": "https://stackoverflow.com/users/3536450/dfherr"}, "edited": false, "score": 0, "creation_date": 1481728780, "post_id": 41145674, "comment_id": 69494600, "body": "No, it won\u2019t. It\u2019s a system-wide setting, just be aware of that."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1481727532, "creation_date": 1481727532, "answer_id": 41145674, "question_id": 41145213, "link": "https://stackoverflow.com/questions/41145213/history-search-backward-for-ruby-irb/41145674#41145674", "title": "History-search-backward for ruby irb", "body": "<p>Put these lines to your <code>~/.inputrc</code>:</p>\n\n<pre><code>set input-meta Off\nset convert-meta On\n\nMeta-p: history-search-backward\nMeta-n: history-search-forward\n</code></pre>\n\n<p>(change the last two lines to use keys of your choice.) Restart <code>irb</code>/<code>pry</code>. Enjoy.</p>\n\n<hr>\n\n<p><em>Sidenote:</em> consider trying <a href=\"http://pryrepl.org/\" rel=\"nofollow noreferrer\"><code>pry</code></a> instead of <code>irb</code> (with <a href=\"https://github.com/pry/pry/wiki/History\" rel=\"nofollow noreferrer\"><code>pry-history</code></a> plugin installed.) It\u2019s worth it.</p>\n"}], "owner": {"reputation": 1504, "user_id": 3536450, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/d7d9026d96e8a5733927cb70c20010a1?s=128&d=identicon&r=PG", "display_name": "dfherr", "link": "https://stackoverflow.com/users/3536450/dfherr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 41145674, "answer_count": 1, "score": 2, "last_activity_date": 1481727532, "creation_date": 1481726172, "question_id": 41145213, "link": "https://stackoverflow.com/questions/41145213/history-search-backward-for-ruby-irb", "title": "History-search-backward for ruby irb", "body": "<p>I would like the <code>history-search-backward</code> and <code>history-search-forward</code> mechanisms from bash for the ruby irb, which allow me to cycle through matching history entries based on a already given input.</p>\n\n<p>Is this feature even available? I already enabled the IRB history and searched the documentation to no avail.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 9674, "user_id": 359957, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0ada7b97d85873855231744286452af4?s=128&d=identicon&r=PG", "display_name": "James Chevalier", "link": "https://stackoverflow.com/users/359957/james-chevalier"}, "edited": false, "score": 0, "creation_date": 1481726797, "post_id": 41145357, "comment_id": 69493222, "body": "Ah, I see - so that &quot;Ruby creates a new local variable <code>list</code>&quot; part happens sometime prior to the line that contains <code>+=</code> ... That&#39;s why if I add <code>puts list</code> just prior to the <code>+=</code> line, it outputs <code>nil</code> ..."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 9674, "user_id": 359957, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0ada7b97d85873855231744286452af4?s=128&d=identicon&r=PG", "display_name": "James Chevalier", "link": "https://stackoverflow.com/users/359957/james-chevalier"}, "edited": false, "score": 1, "creation_date": 1481727256, "post_id": 41145357, "comment_id": 69493579, "body": "@JamesChevalier it happens at the parser level. The parser sees an assignment and marks <code>list</code> as a local variable. Prior to that line, <code>list</code> should resolve to the method and return <code>[]</code>. Not sure why you got <code>nil</code>, maybe the line was already evaluated."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1481727625, "post_id": 41145357, "comment_id": 69493843, "body": "With <code>attr_reader :list</code>, I&#39;d understand this behaviour, because <code>self.list=</code> wouldn&#39;t be defined. But with <code>attr_accessor</code> ? BTW, it really seems to be related to the fact that <code>a=a</code> is nil when <code>a</code> is undefined."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1481727935, "post_id": 41145357, "comment_id": 69494044, "body": "@EricDuminil that&#39;s how Ruby works \u2013 assignment methods always need an explicit receiver."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481728328, "post_id": 41145357, "comment_id": 69494293, "body": "@Stefan : Got it, thanks. I didn&#39;t notice the documentation excerpt. You could explain why the local variable <code>list</code> is nil, and your answer would be perfect."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481728355, "post_id": 41145357, "comment_id": 69494311, "body": "... and this actually allows you to have both, local variables and instance method: <code>list=</code> assigns to a local variable and <code>self.list=</code> calls the method. If Ruby would treat <code>list=</code> as a method call, it would be impossible to create a local variable with the same name."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1481730700, "post_id": 41145357, "comment_id": 69495813, "body": "\u201cassignment methods always need an explicit receiver\u201d\u2014or an explicit method invocation <code>method(:list=).call(42)</code> :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481731034, "post_id": 41145357, "comment_id": 69496050, "body": "@mudasobwa not sure if that is explicit or implicit ;-) BTW, <code>send(:list=, 42)</code> would also work."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481731508, "post_id": 41145357, "comment_id": 69496398, "body": "Since the public accessor is declared, pedantic rubyists call <code>public_send</code>!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1481734633, "post_id": 41145357, "comment_id": 69498506, "body": "Excellent answer. You might say <i>when</i> the expansion of the <a href=\"https://docs.ruby-lang.org/en/2.0.0/syntax/assignment_rdoc.html#label-Abbreviated+Assignment\" rel=\"nofollow noreferrer\">abbreviated assignment</a> by the parser takes place."}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 7, "last_activity_date": 1481728982, "last_edit_date": 1481728982, "creation_date": 1481726604, "answer_id": 41145357, "question_id": 41145121, "link": "https://stackoverflow.com/questions/41145121/why-does-reset-the-value-of-the-variable-its-operating-on-to-nil/41145357#41145357", "title": "Why does += reset the value of the variable it&#39;s operating on to nil?", "body": "<p><code>list += [1, 2, 3]</code> is equivalent to:</p>\n\n<pre><code>list = list + [1, 2, 3]\n</code></pre>\n\n<p>Because this is an <a href=\"http://ruby-doc.org/core/doc/syntax/assignment_rdoc.html\" rel=\"nofollow noreferrer\">assignment</a>, Ruby creates a new <em>local variable</em> <code>list</code>, shadowing your <code>list</code> method. From the documentation:</p>\n\n<blockquote>\n  <p>When using method assignment you must always have a receiver. If you do not have a receiver, Ruby assumes you are assigning to a local variable</p>\n</blockquote>\n\n<p>More specifically, the local variable <code>list</code> is created when the parser encounters <code>list =</code>. Like uninitialized instance variables and global variables, it has a value of <code>nil</code>. Attempting to evaluate the assignment's right-hand side <code>list + [1, 2, 3]</code> therefore fails, because it is equivalent to:</p>\n\n<pre><code>nil + [1, 2, 3]\n# NoMethodError: undefined method `+' for nil:NilClass\n</code></pre>\n\n<p>So to get the expected result, you have to provide an explicit receiver:</p>\n\n<pre><code>self.list += [1, 2, 3]\n</code></pre>\n\n<p>Or directly assign to the instance variable:</p>\n\n<pre><code>@list += [1, 2, 3]\n</code></pre>\n\n<p>Or use a method that modifies the receiver:</p>\n\n<pre><code>list.concat [1, 2, 3]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1481727106, "post_id": 41145447, "comment_id": 69493480, "body": "<code>list.push(*_some_method(options))</code> is probably even more efficient. And <code>.concat</code> should top even that :)"}, {"owner": {"reputation": 9674, "user_id": 359957, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0ada7b97d85873855231744286452af4?s=128&d=identicon&r=PG", "display_name": "James Chevalier", "link": "https://stackoverflow.com/users/359957/james-chevalier"}, "edited": false, "score": 0, "creation_date": 1481727645, "post_id": 41145447, "comment_id": 69493862, "body": "Yeah, I ran a benchmark comparing the 3 &amp; push/concat do slightly out-perform shovel/flatten - <a href=\"https://gist.github.com/JamesChevalier/1a6fabde0b56c08691aecb48a37c7174\" rel=\"nofollow noreferrer\">gist.github.com/JamesChevalier/1a6fabde0b56c08691aecb48a37c7&zwnj;&#8203;174</a>"}, {"owner": {"reputation": 31, "user_id": 6709936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc27eb7878b00d118669c20e2ed87cb3?s=128&d=identicon&r=PG", "display_name": "Steve Friedman", "link": "https://stackoverflow.com/users/6709936/steve-friedman"}, "edited": false, "score": 0, "creation_date": 1481728356, "post_id": 41145447, "comment_id": 69494313, "body": "I use <code>list +=</code> when I&#39;m appending one list with another, e.g.: <code>numbers += [3,4,5]</code> adds three new Numeric elements to <code>numbers</code> while <code>numbers &lt;&lt; [3,4,5]</code> adds one Array element. Seems like <code>list.concat</code> is the in-place version of <code>list +=</code>, if that&#39;s what you actually need. In fact, I bet <code>list + x</code> is just implemented as <code>list.dup.concat(x)</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481729705, "post_id": 41145447, "comment_id": 69495163, "body": "<i>&quot;I bet <code>list + x</code> is just implemented as <code>list.dup.concat(x)</code>&quot;</i> \u2013 <code>Array#+</code> creates a new array with the final size and <code>memcpy</code>s both arrays into it. That&#39;s more efficient than duplicating and resizing."}, {"owner": {"reputation": 31, "user_id": 6709936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc27eb7878b00d118669c20e2ed87cb3?s=128&d=identicon&r=PG", "display_name": "Steve Friedman", "link": "https://stackoverflow.com/users/6709936/steve-friedman"}, "edited": false, "score": 0, "creation_date": 1481747749, "post_id": 41145447, "comment_id": 69505559, "body": "Curious about the fact that the debugger returns a <code>list</code> of <code>nil</code> before the <code>list +=</code> statement. I modified my test code as follows:"}, {"owner": {"reputation": 31, "user_id": 6709936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc27eb7878b00d118669c20e2ed87cb3?s=128&d=identicon&r=PG", "display_name": "Steve Friedman", "link": "https://stackoverflow.com/users/6709936/steve-friedman"}, "edited": false, "score": 0, "creation_date": 1481747839, "post_id": 41145447, "comment_id": 69505601, "body": "class Thing         def foo; &#39;BAR&#39;; end         def baz; before = foo; foo = &#39;ODD&#39;; [before, foo]; end     end Thing.new.baz"}, {"owner": {"reputation": 31, "user_id": 6709936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc27eb7878b00d118669c20e2ed87cb3?s=128&d=identicon&r=PG", "display_name": "Steve Friedman", "link": "https://stackoverflow.com/users/6709936/steve-friedman"}, "edited": false, "score": 0, "creation_date": 1481748349, "post_id": 41145447, "comment_id": 69505875, "body": "Wierd StackOverflow formatting aside, <code>Thing.new.baz</code> returns <code>[&quot;BAR&quot;, &quot;ODD&quot;]</code>, which suggests <code>foo</code> returns the method call before <code>foo =</code> and the local variable after."}], "tags": [], "owner": {"reputation": 31, "user_id": 6709936, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc27eb7878b00d118669c20e2ed87cb3?s=128&d=identicon&r=PG", "display_name": "Steve Friedman", "link": "https://stackoverflow.com/users/6709936/steve-friedman"}, "is_accepted": false, "score": 1, "last_activity_date": 1481726840, "creation_date": 1481726840, "answer_id": 41145447, "question_id": 41145121, "link": "https://stackoverflow.com/questions/41145121/why-does-reset-the-value-of-the-variable-its-operating-on-to-nil/41145447#41145447", "title": "Why does += reset the value of the variable it&#39;s operating on to nil?", "body": "<p>I believe <code>list += _some_method(options)</code> is internally compiling into <code>list = list + _some_method(options)</code>. Despite the existence of a <code>list</code> method, Ruby interprets <code>list = :anything</code> as defining a new local variable called <code>list</code>, overriding the interpretation of <code>list</code> within the scope of the method call. When Ruby mistakenly jumps to the 'local variable' conclusion, it has to be told with <code>self.</code>. This is why switching to <code>self.list += _some_method(options)</code> works.</p>\n\n<pre><code>class Thing\n    def foo; 'BAR'; end\n    def baz; foo = 'ODD'; foo; end\nend\n\nThing.new.foo #=&gt; \"BAR\" \nThing.new.baz #=&gt; \"ODD\" \n</code></pre>\n\n<p>But I agree using <code>list &lt;&lt;</code> followed by a <code>flatten(1)</code> is still more efficient.</p>\n"}], "owner": {"reputation": 9674, "user_id": 359957, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0ada7b97d85873855231744286452af4?s=128&d=identicon&r=PG", "display_name": "James Chevalier", "link": "https://stackoverflow.com/users/359957/james-chevalier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 113, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1481728982, "creation_date": 1481725903, "last_edit_date": 1495535442, "question_id": 41145121, "link": "https://stackoverflow.com/questions/41145121/why-does-reset-the-value-of-the-variable-its-operating-on-to-nil", "title": "Why does += reset the value of the variable it&#39;s operating on to nil?", "body": "<p>Taking this piece of code as an example:</p>\n\n<pre><code>class Thing\n  attr_accessor :options, :list\n\n  def initialize\n    @list    = []\n    @options = { published_at_end: 'NOW', published_at_start: 'NOW-2DAYS' }\n  end\n\n  def run\n    # If you replace this comment with a debugger, the value of list is nil\n    list += _some_method(options)\n    return list\n  end\n\n  private\n\n  def _some_method(options)\n    [options[:published_at_start], 1, 2, 3, 4, options[:published_at_end]]\n  end\nend\n</code></pre>\n\n<p>If you copy/paste that into irb, then run:</p>\n\n<ul>\n<li><code>t = Thing.new</code></li>\n<li><code>t.run</code></li>\n</ul>\n\n<p>It will output this error:</p>\n\n<pre><code>NoMethodError: undefined method `+' for nil:NilClass\n</code></pre>\n\n<p>If you remove the <code>+=</code> line (leaving just the <code>return</code> line), it returns <code>[]</code>... So from what I can tell, it's just the presence of <code>+=</code> that sets <code>list</code> to <code>nil</code>.\nI also find it interesting that it's value is <code>nil</code> in the line <em>before</em> the <code>+=</code> call (see my comment in the code example).</p>\n\n<p>Alternatively, if you use <code>&lt;&lt;</code> with <code>flatten</code> instead, you'll get the expected result:</p>\n\n<pre><code>class Thing\n  attr_accessor :options, :list\n\n  def initialize\n    @list    = []\n    @options = { published_at_end: 'NOW', published_at_start: 'NOW-2DAYS' }\n  end\n\n  def run\n    list &lt;&lt; _some_method(options)\n    list.flatten\n  end\n\n  private\n\n  def _some_method(options)\n    [options[:published_at_start], 1, 2, 3, 4, options[:published_at_end]]\n  end\nend\n</code></pre>\n\n<p>If you copy/paste that into irb, then run:</p>\n\n<ul>\n<li><code>t = Thing.new</code></li>\n<li><code>t.run</code></li>\n</ul>\n\n<p>It will output <code>['NOW-2DAYS', 1, 2, 3, 4, 'NOW']</code>.</p>\n\n<hr>\n\n<p>Why does <code>+=</code> reset the value of <code>list</code> to <code>nil</code>?\nAdditionally, how does it set its value to <code>nil</code> prior to <code>+=</code> being called?</p>\n\n<p>Semi-related / helpful side note - I'm going to use shovel (<code>&lt;&lt;</code>) with <code>flatten</code> because of <a href=\"https://stackoverflow.com/a/4685182\">performance reasons</a>, but I'm still interested why the variable gets reset to <code>nil</code>.</p>\n"}, {"tags": ["ruby", "xpath", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "edited": false, "score": 0, "creation_date": 1481787280, "post_id": 41149149, "comment_id": 69518557, "body": "Thank you matt. Works perfectly. Where did you learn to work with nokogiri? I can&#39;t seem to find very many good tutorials for noobs."}], "tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 1, "last_activity_date": 1481738386, "creation_date": 1481738386, "answer_id": 41149149, "question_id": 41145043, "link": "https://stackoverflow.com/questions/41145043/how-to-get-text-from-a-paragraph-without-including-text-from-some-child-element/41149149#41149149", "title": "How to get text from a paragraph without including text from some child element Nokogiri", "body": "<p>You can select all child elements of the <code>w:p</code>, and then use a predicate with <a href=\"https://www.w3.org/TR/xpath/#function-not\" rel=\"nofollow noreferrer\"><code>not()</code></a> and <a href=\"https://www.w3.org/TR/xpath/#function-name\" rel=\"nofollow noreferrer\"><code>name()</code></a> to filter out the <code>w:del</code> elements.</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>@all_paragraph_nodes.each_with_index do |p, index|\n  text_nodes = p.xpath(\"*[not(name(.)='w:del')]//text()\")\n  # ... process however you want\nend\n</code></pre>\n\n<p>You will probably need to remove the empty text nodes. You could do this in Ruby, or you could filter them out in XPath with <a href=\"https://www.w3.org/TR/xpath/#function-normalize-space\" rel=\"nofollow noreferrer\"><code>normalize-space()</code></a></p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>p.xpath(\"*[not(name(.)='w:del')]//text()[normalize-space()]\")\n</code></pre>\n"}], "owner": {"reputation": 6994, "user_id": 623266, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/aab060b3da7fa08ba0b531e2204c6469?s=128&d=identicon&r=PG", "display_name": "chell", "link": "https://stackoverflow.com/users/623266/chell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 41149149, "answer_count": 1, "score": 0, "last_activity_date": 1481738416, "creation_date": 1481725665, "last_edit_date": 1481738416, "question_id": 41145043, "link": "https://stackoverflow.com/questions/41145043/how-to-get-text-from-a-paragraph-without-including-text-from-some-child-element", "title": "How to get text from a paragraph without including text from some child element Nokogiri", "body": "\n\n<pre><code>&lt;w:p&gt;\n    &lt;w:r&gt;\n        &lt;w:t&gt;The table predicted, with &lt;/w:t&gt;\n    &lt;/w:r&gt;\n    &lt;w:ins w:author=\"RKH RKH\" w:date=\"2016-11-06T17:53:00Z\" w:id=\"0\"&gt;\n        &lt;w:r&gt;\n            &lt;w:t&gt;impressive&lt;/w:t&gt;\n        &lt;/w:r&gt;\n    &lt;/w:ins&gt;\n    &lt;w:del w:author=\"RKH RKH\" w:date=\"2016-11-06T17:53:00Z\" w:id=\"1\"&gt;\n        &lt;w:r w:rsidDel=\"001F31B2\" w:rsidRPr=\"001F31B2\"&gt;\n            &lt;w:delText&gt;stunning&lt;/w:delText&gt;\n        &lt;/w:r&gt;\n    &lt;/w:del&gt;\n &lt;/w:p&gt;\n&lt;w:p&gt;\n    &lt;w:r&gt;\n        &lt;w:t&gt;The man started &lt;/w:t&gt;\n    &lt;/w:r&gt;\n    &lt;w:ins w:author=\"RKH RKH\" w:date=\"2016-11-06T17:53:00Z\" w:id=\"0\"&gt;\n        &lt;w:r&gt;\n            &lt;w:t&gt;to run.&lt;/w:t&gt;\n        &lt;/w:r&gt;\n    &lt;/w:ins&gt;\n    &lt;w:del w:author=\"RKH RKH\" w:date=\"2016-11-06T17:53:00Z\" w:id=\"1\"&gt;\n        &lt;w:r w:rsidDel=\"001F31B2\" w:rsidRPr=\"001F31B2\"&gt;\n            &lt;w:delText&gt;to hike.&lt;/w:delText&gt;\n        &lt;/w:r&gt;\n    &lt;/w:del&gt;\n &lt;/w:p&gt;\n</code></pre>\n\n<p>I get the paragraphs as follows and loop through them.</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>@all_paragraph_nodes = @file.xpath('//w:p')\n\n@all_paragraph_nodes.each_with_index do |p, index|\n...\n</code></pre>\n\n<p>I want to get the text from each paragraph in the loop excluding the text inside of the  <code>&lt;w:del&gt;</code> element.</p>\n\n<p>How can I do this using Nokogiri?</p>\n"}, {"tags": ["ruby", "ubuntu", "rubygems"], "comments": [{"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1481739220, "post_id": 41145030, "comment_id": 69501047, "body": "What is the minimum version of <code>json</code> that it requires?"}, {"owner": {"reputation": 23, "user_id": 7296971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b06c5ffb108a85cc751578bd6e349d?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Sanders", "link": "https://stackoverflow.com/users/7296971/alex-sanders"}, "reply_to_user": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 0, "creation_date": 1481800675, "post_id": 41145030, "comment_id": 69526297, "body": "Runtime Dependencies: json ~&gt; 1.7.0   launchy ~&gt; 0.3.0   ------ Development Dependencies: rspec ~&gt; 2.5 ------- I think that means at least 1.7.0. source: <a href=\"https://rubygems.org/gems/rumember/versions/1.0.1\" rel=\"nofollow noreferrer\">rubygems.org/gems/rumember/versions/1.0.1</a>"}], "owner": {"reputation": 23, "user_id": 7296971, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95b06c5ffb108a85cc751578bd6e349d?s=128&d=identicon&r=PG&f=1", "display_name": "Alex Sanders", "link": "https://stackoverflow.com/users/7296971/alex-sanders"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 205, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481805550, "creation_date": 1481725618, "last_edit_date": 1481805550, "question_id": 41145030, "link": "https://stackoverflow.com/questions/41145030/errors-installing-gem-rumember-in-ubuntu-16-4-lts", "title": "errors installing gem &quot;rumember&quot; in Ubuntu 16.4 LTS", "body": "<p>I tried for several hours to get the rumember gem installed and running. </p>\n\n<p>After a failed upgrade of my system to 16.4 Ubuntu LTS i had to reinstall the system completely (with 16.4. But now I cant get the rumember gem to work again. </p>\n\n<p>I googled a lot and tried several approaches. e.g. I installed the ruby-dev package for headers and I ran sudo gem update --system \nand got \"Latest version currently installed ...\" </p>\n\n<p>I see that the json version in the errors is 1.7.7 and in my system its 1.8.3. but i don't know if that matters. </p>\n\n<p>Thats how far I got. Thanks for any Ideas on the topic. </p>\n\n<p><strong>Update 1:</strong> I just tried to install it on a fresh VM Ubuntu LTS 16.4. Install ruby, install ruby-dev, gem install rumember. Same problems occur. So it's not just my setup.</p>\n\n<hr>\n\n<p>sudo gem install rumember</p>\n\n<p>outputs:</p>\n\n<pre><code>    ERROR:  Error installing rumember:\nERROR: Failed to build gem native extension.\n\ncurrent directory: /var/lib/gems/2.3.0/gems/json-1.7.7/ext/json/ext/generator\n/usr/bin/ruby2.3 -r ./siteconf20161214-5373-1y3th00.rb extconf.rb\ncreating Makefile\n\ncurrent directory: /var/lib/gems/2.3.0/gems/json-1.7.7/ext/json/ext/generator\nmake \"DESTDIR=\" clean\n\ncurrent directory: /var/lib/gems/2.3.0/gems/json-1.7.7/ext/json/ext/generator\nmake \"DESTDIR=\"\ncompiling generator.c\nIn file included from generator.c:1:0:\n../fbuffer/fbuffer.h: In function \u2018fbuffer_to_s\u2019:\n../fbuffer/fbuffer.h:175:47: error: macro \"rb_str_new\" requires 2 arguments, but only 1 given\n VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n                                           ^\n../fbuffer/fbuffer.h:175:20: warning: initialization makes integer from pointer without a cast [-Wint-conversion]\n VALUE result = rb_str_new(FBUFFER_PAIR(fb));\n                ^\nMakefile:239: recipe for target 'generator.o' failed\nmake: *** [generator.o] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /var/lib/gems/2.3.0/gems/json-1.7.7 for inspection.\nResults logged to /var/lib/gems/2.3.0/extensions/x86_64-linux/2.3.0/json-1.7.7/gem_make.out\n</code></pre>\n\n<p>gem list outputs: </p>\n\n<pre><code>bigdecimal (default: 1.2.8)  \nbundler (1.11.2) \nconfiguration (1.3.4) \ndid_you_mean (1.0.0) \ndiff-lcs (1.2.5) \nio-console (default: 0.4.5) \njson (default: 1.8.3) \nlaunchy (0.3.7) \nminitest (5.8.4) \nmolinillo (0.4.3) \nnet-http-persistent (2.9.4) \nnet-telnet (0.1.1) \npower_assert (0.2.7) \npsych (default: 2.0.17) \nrake (10.5.0) \nrdoc (default: 4.2.1) \nrspec (3.5.0) \nrspec-core (3.5.4)\nrspec-expectations (3.5.0) \nrspec-mocks (3.5.0) \nrspec-support (3.5.0) \nrubygems-update (2.0.3) \ntest-unit (3.1.7) \nthor (0.19.1)  \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "infinite-scroll", "kaminari"], "answers": [{"tags": [], "owner": {"reputation": 61, "user_id": 3275852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f9697e7142bf1e1e85a7c40b8f99c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3275852", "link": "https://stackoverflow.com/users/3275852/user3275852"}, "is_accepted": false, "score": 1, "last_activity_date": 1481798412, "creation_date": 1481798412, "answer_id": 41162097, "question_id": 41144582, "link": "https://stackoverflow.com/questions/41144582/paginate-multiple-models-with-ajax-params/41162097#41162097", "title": "Paginate multiple models with Ajax &amp; Params", "body": "<p>Since the if statement disrupted the ajax call, I had to work around it:</p>\n\n<p>I merged _covers.html.haml and _items.html.haml to one partial _models.html.haml:</p>\n\n<pre><code>- if @models.any?\n    .models= render @models\n    .pagination= link_to_next_page @models, 'View More', params: params, remote: true\n- else\n    .text-center= \"Nothing yet...\"\n</code></pre>\n\n<p>and handled the conditions in the controller:</p>\n\n<pre><code>  def show  \n    if !params[:filter] || params[:filter] == \"covers\"  \n      @models = @user.get_voted(Cover).page(params[:page]) \n    elsif params[:filter] == \"items\"  \n      @models = @user.get_voted(Item).page(params[:page])\n    end \n    respond_to :html, :js          \n  end\n</code></pre>\n\n<p>hope this helps anyone!</p>\n"}], "owner": {"reputation": 61, "user_id": 3275852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c5f9697e7142bf1e1e85a7c40b8f99c1?s=128&d=identicon&r=PG&f=1", "display_name": "user3275852", "link": "https://stackoverflow.com/users/3275852/user3275852"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481798412, "creation_date": 1481724279, "question_id": 41144582, "link": "https://stackoverflow.com/questions/41144582/paginate-multiple-models-with-ajax-params", "title": "Paginate multiple models with Ajax &amp; Params", "body": "<p>In my app I allow users to like item/cover object which they can later view in their profile. </p>\n\n<p>I have a profile model that shows a list of items and covers in separate tabs. \nA user clicks on a link to selects which list to view, which sends the object name to params[:filter] and reloads the page with the correct list.</p>\n\n<p>I am now trying to create infinite scroll for both lists with <a href=\"https://github.com/amatsuda/kaminari\" rel=\"nofollow noreferrer\">Kaminari</a> and ajax. It works fine for each list seperatly but when i try to use an if statement with params (in profiles/show.js.haml) the loading breaks. \nany thoughts?</p>\n\n<p><strong>profiles_controller.rb</strong> </p>\n\n<pre><code>class ProfilesController &lt; ApplicationController\n  def show  \n    @covers = @user.get_voted(Cover).page(params[:page]) \n    @items = @user.get_voted(Item).page(params[:page])\n    respond_to :html, :js          \n  end\nend\n</code></pre>\n\n<p><strong>profiles/show.html.haml</strong></p>\n\n<pre><code>.menu\n  = link_to 'Covers', profile_path(filter: \"covers\")\n  = link_to 'Items', profile_path(filter: \"items\") \n.objects\n  = render 'profiles/covers' if !params[:filter] || params[:filter] == \"covers\"\n  = render 'profiles/items' if params[:filter] == \"items\"\n</code></pre>\n\n<p><strong>profiles/_covers.rb</strong></p>\n\n<pre><code>- if @covers.any?\n    .covers= render @covers\n    .pagination= link_to_next_page @covers, 'View More', params: params, remote: true\n- else\n    = \"No covers yet...\"\n</code></pre>\n\n<p><strong>profiles/_items.rb</strong></p>\n\n<pre><code>- if @items.any?\n    .items= render @items\n    .pagination= link_to_next_page @items, 'View More', params: params, remote: true\n- else\n    = \"No items yet...\" \n</code></pre>\n\n<p><strong>profiles/show.js.haml</strong></p>\n\n<pre><code>- if !params[:filter] || params[:filter] == \"covers\"\n    $('.covers').append(\"#{j render @covers}\");\n    - if @covers.last_page?\n      $('.pagination').remove();    \n    - else\n      $('.pagination').html(\"#{j link_to_next_page(@covers,'View More', params: params, remote: true)}\");\n\n- if params[:filter] == \"items\"\n    $('.items').append(\"#{j render @items}\");\n    - if @items.last_page?\n      $('.pagination').remove();    \n    - else  \n      $('.pagination').html(\"#{j link_to_next_page(@items,'View More', params: params, remote: true)}\");\n</code></pre>\n\n<p><strong>app/assets/javascripts/pagination.js</strong></p>\n\n<pre><code>$(function() {\n  if ($('.pagination').size() &gt; 0) {\n    $(window).on('scroll', function() {\n      var next_page_url = $('.pagination a[rel=next]').attr('href');\n      if (next_page_url &amp;&amp; $(window).scrollTop() &gt; $(document).height() - $(window).height() - 200) {\n        $('.pagination').html('&lt;img src=\"/assets/ajax-loader.gif\" alt=\"Loading...\"/&gt;');\n        $.getScript(next_page_url);\n  }\n});\n</code></pre>\n\n<p>}\n});</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "foreign-keys"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481724489, "post_id": 41144455, "comment_id": 69491714, "body": "Welcome to stackoverflow. Please don&#39;t use the snippets feature for Ruby or just arbitrary code. Its for creating runnable JS/CSS/HTML examples. Also you should include the relevant portions of the error message as text in the question body as text. Respond by editing the answer - not by commenting."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7152683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abbcd238c953ad6c6e8558cbca0ab8a?s=128&d=identicon&r=PG&f=1", "display_name": "Coi Ng", "link": "https://stackoverflow.com/users/7152683/coi-ng"}, "edited": false, "score": 0, "creation_date": 1482064224, "post_id": 41145081, "comment_id": 69615394, "body": "Hey, thanks for your answer. But I think you got mw wrong. I want to use the same foreign from table WORDS twice in table TRANSLATIONS."}, {"owner": {"reputation": 11, "user_id": 7152683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abbcd238c953ad6c6e8558cbca0ab8a?s=128&d=identicon&r=PG&f=1", "display_name": "Coi Ng", "link": "https://stackoverflow.com/users/7152683/coi-ng"}, "edited": false, "score": 0, "creation_date": 1482064365, "post_id": 41145081, "comment_id": 69615428, "body": "*foreign key @max"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 11, "user_id": 7152683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abbcd238c953ad6c6e8558cbca0ab8a?s=128&d=identicon&r=PG&f=1", "display_name": "Coi Ng", "link": "https://stackoverflow.com/users/7152683/coi-ng"}, "edited": false, "score": 0, "creation_date": 1482064812, "post_id": 41145081, "comment_id": 69615529, "body": "Your whole DB design is backwards. Using the same key won&#39;t fix the problem."}, {"owner": {"reputation": 11, "user_id": 7152683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abbcd238c953ad6c6e8558cbca0ab8a?s=128&d=identicon&r=PG&f=1", "display_name": "Coi Ng", "link": "https://stackoverflow.com/users/7152683/coi-ng"}, "edited": false, "score": 0, "creation_date": 1482066852, "post_id": 41145081, "comment_id": 69616077, "body": "This is exactly what i want to achieve: <a href=\"http://www.emreakkas.com/ruby-on-rails/rails-multiple-columns-to-the-same-tables-key\" rel=\"nofollow noreferrer\">emreakkas.com/ruby-on-rails/&hellip;</a>"}, {"owner": {"reputation": 11, "user_id": 7152683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abbcd238c953ad6c6e8558cbca0ab8a?s=128&d=identicon&r=PG&f=1", "display_name": "Coi Ng", "link": "https://stackoverflow.com/users/7152683/coi-ng"}, "edited": false, "score": 0, "creation_date": 1482159743, "post_id": 41145081, "comment_id": 69649482, "body": "@<a href=\"http://stackoverflow.com/users/544825/max\">stackoverflow.com/users/544825/max</a> could you have a look again please. Thank you"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1481725767, "creation_date": 1481725767, "answer_id": 41145081, "question_id": 41144455, "link": "https://stackoverflow.com/questions/41144455/ruby-on-rails-using-foreign-key-twice-in-the-same-table/41145081#41145081", "title": "Ruby on Rails: Using Foreign Key twice in the same table?", "body": "<p>If you are looking to build a translations table this is how you would do it: </p>\n\n<pre><code>class Word &lt; ApplicationRecord\n  has_many :translations\n  has_many :languages, through: :translations\nend\n\nclass Language &lt; ApplicationRecord\n  has_many :translations\n  has_many :words, through: :translations\nend\n\nclass Translation &lt; ApplicationRecord\n  belongs_to :language\n  belongs_to :word\nend\n</code></pre>\n\n<p>But Rails already has <a href=\"http://guides.rubyonrails.org/i18n.html\" rel=\"nofollow noreferrer\">a built in i18n API</a> which handles translations that you should take a look at first before reinventing the wheel.</p>\n"}], "owner": {"reputation": 11, "user_id": 7152683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4abbcd238c953ad6c6e8558cbca0ab8a?s=128&d=identicon&r=PG&f=1", "display_name": "Coi Ng", "link": "https://stackoverflow.com/users/7152683/coi-ng"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 260, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1482067413, "creation_date": 1481723891, "last_edit_date": 1482067413, "question_id": 41144455, "link": "https://stackoverflow.com/questions/41144455/ruby-on-rails-using-foreign-key-twice-in-the-same-table", "title": "Ruby on Rails: Using Foreign Key twice in the same table?", "body": "<p>I have two models:</p>\n\n<pre><code>class Word &lt; ApplicationRecord\n  has_many :g_words, class_name: 'Translation', foreign_key: 'g_id'\n  has_many :v_words, class_name: 'Translation', foreign_key: 'v_id'\nend\n\nclass Translation &lt; ApplicationRecord\n  belongs_to :g, class_name: 'Word', required: true\n  belongs_to :v, class_name: 'Word', required: true\nend\n</code></pre>\n\n<p><strong>Table Translations</strong></p>\n\n<pre><code>t.text \"note\", limit: 65535\nt.datetime \"created_at\", null: false\nt.datetime \"updated_at\", null: false\nt.integer  \"g_id\"\nt.integer  \"v_id\"\n</code></pre>\n\n<p>In table <strong>Words</strong> I already inserted 2 values:</p>\n\n<pre><code>id     body\n1      Home\n2      Maison\n</code></pre>\n\n<p>When I create a new Translation with</p>\n\n<pre><code>g_id     v_id\n1        2\n</code></pre>\n\n<p>Then the following error appears. <a href=\"https://i.stack.imgur.com/EsCcK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EsCcK.png\" alt=\"enter image description here\"></a></p>\n\n<p>The search a lot on the internet about my problem and here is a post about what I want to achieve exactly: <a href=\"http://www.emreakkas.com/ruby-on-rails/rails-multiple-columns-to-the-same-tables-key\" rel=\"nofollow noreferrer\">http://www.emreakkas.com/ruby-on-rails/rails-multiple-columns-to-the-same-tables-key</a></p>\n\n<p>I tried to implemented and failed. </p>\n\n<p>I don't know whether I implented the associations wrong or I declared the wrong foreign Keys. I really don't know where to start finding the error. I hope you can help me! Thank you!</p>\n"}, {"tags": ["c#", "ruby", "dll", "com", "win32ole"], "answers": [{"comments": [{"owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "edited": false, "score": 0, "creation_date": 1481728734, "post_id": 41145993, "comment_id": 69494576, "body": "Thanks for the answer joe, Couple of things: 1) [assembly: ComVisible( false )] could be at the AssemblyInfo.cs file and will make all classes com visible (i have this configured) at my project.  2) I need to understand, if it is registered via VS15, does this mean this dll is available through out the entire OS? or is it &quot;alive&quot; only in the VS15 dir?"}, {"owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "reply_to_user": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "edited": false, "score": 0, "creation_date": 1481728902, "post_id": 41145993, "comment_id": 69494669, "body": "The entries in the registry necessary for COM will be throughout the entire OS assuming that you run VS as an elevated administrator.  A quick trick to test if it is working is to write a VBS script:  <code>Dim obj</code>  <code>set obj = CreateObject(&quot;ComLIb.LogWriter&quot;)</code>  <code>MsgBox TypeName(obj)</code>  Having trouble...  Run it via c:\\windows\\system32\\wscript.exe  and run it via c:\\windows\\SysWow64\\wscript.exe  By default it should succeed with the one in the SysWow64 directory.  THis will tell you whether it is registered correctly."}, {"owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "edited": false, "score": 0, "creation_date": 1481729074, "post_id": 41145993, "comment_id": 69494779, "body": "Ok, thanks once again... Still have no idea what is going wrong over here. seems like im doing everything as i should."}, {"owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "reply_to_user": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "edited": false, "score": 0, "creation_date": 1481729607, "post_id": 41145993, "comment_id": 69495107, "body": "You should still declare a Guid for your class."}], "tags": [], "owner": {"reputation": 5085, "user_id": 1181353, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/zqKlZ.jpg?s=128&g=1", "display_name": "Joseph Willcoxson", "link": "https://stackoverflow.com/users/1181353/joseph-willcoxson"}, "is_accepted": false, "score": 1, "last_activity_date": 1481730215, "last_edit_date": 1481730215, "creation_date": 1481728480, "answer_id": 41145993, "question_id": 41144215, "link": "https://stackoverflow.com/questions/41144215/cant-load-net-dll-from-ruby/41145993#41145993", "title": "Can&#39;t load .NET dll from ruby", "body": "<p>Only classes that are marked ComVisible will be exported to the appropriate keys during registration.  It's also a very, very good idea (I'd say mandatory) to have a Guid attribute instead of taking the default which can change during every compilation. You can also have your own ProgId attribute, but often the default of Namespace.ClassName is sufficient (where Namespace is the namespace your class is in and ClassName is the name of your class).</p>\n\n<p>Try this:</p>\n\n<pre><code>using System;\nusing System.IO;\nusing System.Runtime.InteropServices;\n\nnamespace ComLib\n{\n    [ComVisible(true)] // needs to be marked ComVisible \n    [Guid(\"ad4c28c9-4612-4ac3-8ca4-04a343f4f2b9\")] // generate your own\n    public class LogWriter\n    {\n        public void WriteLine(string line)\n        {\n            using (var log = new StreamWriter(File.OpenWrite(@\"c:\\log.file\")))\n            {\n                log.WriteLine(line);\n            }\n        }\n    }\n}\n</code></pre>\n\n<p>That's what I see from the .NET side.  I don't have any experience with trying to consume from Ruby.</p>\n\n<p>It will also help if your Ruby process is 32-bit.  VIsual Studio generally only registers the class with the 32-bit runtime system on 64-bit OSes.</p>\n\n<p>For standalone registration outside of the IDE, use something like:</p>\n\n<pre><code>regasm.exe /tlb /codebase YourDll.dll\n</code></pre>\n\n<p>Make sure you use the regasm.exe for the correct .NET runtime and correct 32/64-bit flavor.</p>\n\n<p>If your DLL is registered correctly with COM, it should be callable via VBScript.  Make a simple VBScript called Test.vbs:</p>\n\n<pre><code>Dim obj\nset obj = CreateObject(\"ComLib.LogWriter\")\nMsgBox TypeName(obj)\n</code></pre>\n\n<p>If you double click on the filename, in explorer or just type test.vbs from the command line shell it will try to run the VBS program with wscript.exe in c:\\windows\\system32\\wscript.exe.</p>\n\n<p>It will probably fail on a 64-bit OS because by default VS only registers the .NET assembly for COM with the 32-bit subsystem.  To try and run it on the 32-bit subsystem, try:</p>\n\n<pre><code>c:\\windows\\syswow64\\wscript.exe test.vbs\n</code></pre>\n\n<p>If either of those methods fails, then your DLL is not registered correctly.</p>\n"}, {"tags": [], "owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "is_accepted": false, "score": 0, "last_activity_date": 1481803530, "creation_date": 1481803530, "answer_id": 41163768, "question_id": 41144215, "link": "https://stackoverflow.com/questions/41144215/cant-load-net-dll-from-ruby/41163768#41163768", "title": "Can&#39;t load .NET dll from ruby", "body": "<p>Solved it, in what might seem to be a rather weird solution.</p>\n\n<p>Changed this:</p>\n\n<pre><code>lib = WIN32OLE.new('RubyToCSharp.ComLib.LogWriter')\n</code></pre>\n\n<p>To this:</p>\n\n<pre><code>lib = WIN32OLE.new('ComLib.LogWriter')\n</code></pre>\n\n<p>And everything worked.</p>\n"}], "owner": {"reputation": 13170, "user_id": 576786, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/b405b994cc05e0bb0ba0cb5b9c3fd1a3?s=128&d=identicon&r=PG", "display_name": "Itzik984", "link": "https://stackoverflow.com/users/576786/itzik984"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 330, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1521032875, "creation_date": 1481723209, "last_edit_date": 1592644375, "question_id": 41144215, "link": "https://stackoverflow.com/questions/41144215/cant-load-net-dll-from-ruby", "title": "Can&#39;t load .NET dll from ruby", "body": "<p>I have followed the steps described in this question:</p>\n<p><a href=\"https://stackoverflow.com/questions/265879/can-ruby-import-a-net-dll\">Can Ruby import a .NET dll?</a></p>\n<p>And so, i have this c# code:</p>\n<pre><code>using System;\nusing System.IO;\n\nnamespace ComLib\n{\n    public class LogWriter\n    {\n        public void WriteLine(string line)\n        {\n            using (var log = new StreamWriter(File.OpenWrite(@&quot;c:\\log.file&quot;)))\n            {\n                log.WriteLine(line);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Under a solution named: <code>RubyToCSharp</code></p>\n<p>I checked the <code>Register for COM interop</code> in VS and created the following ruby code:</p>\n<pre><code>require &quot;win32ole&quot;\n\nlib = WIN32OLE.new('RubyToCSharp.ComLib.LogWriter')\nlib.WriteLine('calling .net from ruby via COM, hooray!')\n</code></pre>\n<p>And now i tried to run this ruby from powerShell and i keep getting this error:</p>\n<pre><code>./exmpl.rb:4:in `initialize': unknown OLE server: `RubyToCSharp.ComLib.LogWriter' (WIN32OLERuntimeError)\n    HRESULT error code:0x800401f3\n      Invalid class string\n        from ./exmpl.rb:4:in `new'\n        from ./exmpl.rb:4:in `&lt;main&gt;'\n</code></pre>\n<p>Any thoughts on what i am missing out over here?</p>\n<h1>EDIT</h1>\n<p>After checking if my dll was register according to <a href=\"https://stackoverflow.com/questions/4966508/how-to-check-com-dll-is-registered-or-not-with-c\">this SO question</a>,\nIt seems that indeed my dll is registered, but still, the same error happens.</p>\n<p>Really confused over here...</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 6640336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pvqcd.jpg?s=128&g=1", "display_name": "JITENDRA KUSHVAHA", "link": "https://stackoverflow.com/users/6640336/jitendra-kushvaha"}, "edited": false, "score": 0, "creation_date": 1481789499, "post_id": 41144452, "comment_id": 69519626, "body": "In my code i changed <b>method: :get to method: :post</b> and also changed into routes like this <b>get &#39;jobs/capture_validation_process&#39; =&gt;&#39;jobs#capture_validation_process&#39;, as: :capture_validation_process</b>  to <b>post &#39;jobs/capture_validation_process&#39; =&gt;&#39;jobs#capture_validation_process&#39;, as: :capture_validation_process</b>"}, {"owner": {"reputation": 426, "user_id": 4908755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VslE1.jpg?s=128&g=1", "display_name": "Neeraj Rana", "link": "https://stackoverflow.com/users/4908755/neeraj-rana"}, "reply_to_user": {"reputation": 137, "user_id": 6640336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pvqcd.jpg?s=128&g=1", "display_name": "JITENDRA KUSHVAHA", "link": "https://stackoverflow.com/users/6640336/jitendra-kushvaha"}, "edited": false, "score": 0, "creation_date": 1481789633, "post_id": 41144452, "comment_id": 69519689, "body": "Did it work?? If there is any problem. And if my answer helped you please upvote and accept the answer."}, {"owner": {"reputation": 137, "user_id": 6640336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pvqcd.jpg?s=128&g=1", "display_name": "JITENDRA KUSHVAHA", "link": "https://stackoverflow.com/users/6640336/jitendra-kushvaha"}, "edited": false, "score": 0, "creation_date": 1481789764, "post_id": 41144452, "comment_id": 69519742, "body": "But it didn&#39;t work, my question is when i click on submit button then my form controller method will be call means capture_validation_process  then i want to get text_file value in a variable before save like this can_name = params[:applied_candidate_name]. Please look my controller"}, {"owner": {"reputation": 426, "user_id": 4908755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VslE1.jpg?s=128&g=1", "display_name": "Neeraj Rana", "link": "https://stackoverflow.com/users/4908755/neeraj-rana"}, "reply_to_user": {"reputation": 137, "user_id": 6640336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pvqcd.jpg?s=128&g=1", "display_name": "JITENDRA KUSHVAHA", "link": "https://stackoverflow.com/users/6640336/jitendra-kushvaha"}, "edited": false, "score": 0, "creation_date": 1481793946, "post_id": 41144452, "comment_id": 69522036, "body": "This is your mistake you are suing semicolon at end  can_name = params[:applied_candidate_name]; can_name = params[:applied_candidate_name]"}, {"owner": {"reputation": 137, "user_id": 6640336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pvqcd.jpg?s=128&g=1", "display_name": "JITENDRA KUSHVAHA", "link": "https://stackoverflow.com/users/6640336/jitendra-kushvaha"}, "edited": false, "score": 0, "creation_date": 1481799637, "post_id": 41144452, "comment_id": 69525714, "body": "i remove semicolon but still my problems is not solved. I have also try this logger.debug &quot;candidate work flow: #params[:applied_candidate_name].inspect}&quot; then i got this out put  candidate work flow: nil"}, {"owner": {"reputation": 426, "user_id": 4908755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VslE1.jpg?s=128&g=1", "display_name": "Neeraj Rana", "link": "https://stackoverflow.com/users/4908755/neeraj-rana"}, "reply_to_user": {"reputation": 137, "user_id": 6640336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pvqcd.jpg?s=128&g=1", "display_name": "JITENDRA KUSHVAHA", "link": "https://stackoverflow.com/users/6640336/jitendra-kushvaha"}, "edited": false, "score": 0, "creation_date": 1481802741, "post_id": 41144452, "comment_id": 69527511, "body": "It should work there must be problem some where else can you please share your route code also. And try using simple-form gem It will help you in writing your forms in easier way."}, {"owner": {"reputation": 137, "user_id": 6640336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pvqcd.jpg?s=128&g=1", "display_name": "JITENDRA KUSHVAHA", "link": "https://stackoverflow.com/users/6640336/jitendra-kushvaha"}, "edited": false, "score": 0, "creation_date": 1481808116, "post_id": 41144452, "comment_id": 69530711, "body": "My routes.rb file is  namespace :candidate do  post &#39;jobs/capture_validation_process&#39; =&gt;&#39;jobs#capture_validation_process&#39;, as: :capture_validation_process end please check this"}], "tags": [], "owner": {"reputation": 426, "user_id": 4908755, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VslE1.jpg?s=128&g=1", "display_name": "Neeraj Rana", "link": "https://stackoverflow.com/users/4908755/neeraj-rana"}, "is_accepted": false, "score": 0, "last_activity_date": 1481724713, "last_edit_date": 1481724713, "creation_date": 1481723887, "answer_id": 41144452, "question_id": 41144190, "link": "https://stackoverflow.com/questions/41144190/take-text-filed-value-in-a-variable-using-controller-and-views-in-rails/41144452#41144452", "title": "Take text_filed value in a variable using controller and views in rails", "body": "<p>When we send data and we want to save in our database. We use post method. You are using get method please change your method to <code>method: :post</code> in your <code>form_for</code> tag. And update your request type in routes file also.</p>\n\n<p>Try this</p>\n\n<p><code>&lt;%= form_for :validation_screens, url: candidate_capture_validation_process_path(@validation_screen), method: :post do |f| %</code>></p>\n"}], "owner": {"reputation": 137, "user_id": 6640336, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/pvqcd.jpg?s=128&g=1", "display_name": "JITENDRA KUSHVAHA", "link": "https://stackoverflow.com/users/6640336/jitendra-kushvaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481799679, "creation_date": 1481723144, "last_edit_date": 1481799679, "question_id": 41144190, "link": "https://stackoverflow.com/questions/41144190/take-text-filed-value-in-a-variable-using-controller-and-views-in-rails", "title": "Take text_filed value in a variable using controller and views in rails", "body": "<p>I am new in ruby on rails. I want to take text_field value in a variable and variable define in the controller method.</p>\n\n<p>When will I click on the submit button then the value of test_filed insert into controller method variable.</p>\n\n<p>this is my <strong>_step.html.erb</strong></p>\n\n<pre><code>&lt;%= form_for :validation_screens, url: candidate_capture_validation_process_path(@validation_screen), method: :get do |f| %&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;label class=\"control-label\"&gt;Role / Designation&lt;/label&gt;\n    &lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt; &lt;i class=\"fa fa-user\"&gt;&lt;/i&gt; &lt;/span&gt;\n      &lt;%= f.text_field :role, {disabled: true, :value=&gt;job.title, class: 'form-control' } %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;label class=\"control-label\"&gt;Candidate Name&lt;/label&gt;\n    &lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt; &lt;i class=\"fa fa-user\"&gt;&lt;/i&gt; &lt;/span&gt;\n      &lt;%= f.text_field :applied_candidate_name, {disabled: true, :value=&gt;applied_candidate.first_name+\" \"+applied_candidate.last_name, class: 'form-control' } %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;label class=\"control-label\"&gt;Apply Name&lt;/label&gt;\n    &lt;div class=\"input-group\"&gt; &lt;span class=\"input-group-addon\"&gt; &lt;i class=\"fa fa-user\"&gt;&lt;/i&gt; &lt;/span&gt;\n      &lt;%= f.text_field :emp_candidate_name, {disabled: true, :value=&gt;user.first_name+\" \"+user.last_name, class: 'form-control' } %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Here I want to take <code>&lt;%= f.text_filed :emp_candidate_name %&gt;</code></p>\n\n<p>This is my controller <strong>candidate_controller.rb</strong></p>\n\n<pre><code>class CandidateController &lt; BaseController\n\n    def capture_validation_process\n        logger.debug \"candidate work flow: #{params[:applied_candidate_name].inspect}\"\n\n        can_name = params[:applied_candidate_name]\n\n        @validation_screen = ValidationScreen.new(save_validate_process_params)\n        @validation_screen.save\n    end\n\nend\n</code></pre>\n\n<p>then I got this output</p>\n\n<blockquote>\n  <p>User Load (0.8ms)  SELECT  <code>users</code>.* FROM <code>users</code> WHERE <code>users</code>.<code>id</code> =\n  11  ORDER BY <code>users</code>.<code>id</code> ASC LIMIT 1 candidate work flow: nil</p>\n</blockquote>\n\n<p>Please tell me where I am wrong, and what is problems</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "apartment-gem"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481722854, "post_id": 41143753, "comment_id": 69490565, "body": "You are trying to create a new <code>Member</code> and save it <i>before</i> the respective <code>User</code> was saved. Without seeing your code we can\u2019t tell you more."}, {"owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481779942, "post_id": 41143753, "comment_id": 69515560, "body": "The User is already saved in the public schema and i want to use that."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481781927, "post_id": 41143753, "comment_id": 69516288, "body": "<b>Without seeing your code we can\u2019t tell you more.</b>"}, {"owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481784071, "post_id": 41143753, "comment_id": 69517104, "body": "Have you worked with apartment gem boss ?"}, {"owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481784486, "post_id": 41143753, "comment_id": 69517275, "body": "If a new project is created, it will trigger to create a new member with the corresponding user. Project are beginning created with the same user, no issue it picks the user from the public schema. But when we create member it gives above error.  after_create :add_creator_as_member  def add_creator_as_member       self.users &lt;&lt; self.user end"}, {"owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481797702, "post_id": 41143753, "comment_id": 69524496, "body": "After alot of head banging I wounded up removing,       remove_foreign_key :members , :users I know this is not correct but for now it&#39;s working."}], "owner": {"reputation": 1249, "user_id": 5224982, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/20a0ec1c0a5a8a9e5690fb30e7cb4a01?s=128&d=identicon&r=PG&f=1", "display_name": "Muaaz Rafi", "link": "https://stackoverflow.com/users/5224982/muaaz-rafi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 166, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1527620366, "creation_date": 1481721762, "question_id": 41143753, "link": "https://stackoverflow.com/questions/41143753/invalidforeignkey-apartment-gem-when-creating-records", "title": "InvalidForeignKey Apartment Gem when creating records", "body": "<p>I have excluded user model in apartment initializer file. </p>\n\n<pre><code>config.excluded_models = %w{Franchise User Franchiser}\n</code></pre>\n\n<p>I have a ternary model between project and user but when i add members it throughs beneath error. </p>\n\n<pre><code>ActiveRecord::InvalidForeignKey (PG::ForeignKeyViolation: ERROR:  insert or update on table \"members\" violates foreign key constraint \"fk_rails_2e88fb7ce9\"\nDETAIL:  Key (user_id)=(6) is not present in table \"users\".\n: INSERT INTO \"members\" (\"user_id\", \"project_id\", \"created_at\", \"updated_at\", \"email\") VALUES ($1, $2, $3, $4, $5) RETURNING \"id\"):\n</code></pre>\n\n<p>Any help will be apperciated. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "forgot-password"], "comments": [{"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 1, "creation_date": 1481721747, "post_id": 41143639, "comment_id": 69489816, "body": "Where it says FILL_IN you are supposed to put in code there.  He left those empty as part of the exercises, so you are supposed to figure out what goes in there and then write the code."}, {"owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "reply_to_user": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 0, "creation_date": 1481723355, "post_id": 41143639, "comment_id": 69490947, "body": "@RockwellRice I&#39;m really new to Ruby, and i can&#39;t find a mentioning on the tutorial of what i should fill in, i thought it would get that parameter by it self?"}, {"owner": {"reputation": 3521, "user_id": 2521680, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/6D935.jpg?s=128&g=1", "display_name": "Rockwell Rice", "link": "https://stackoverflow.com/users/2521680/rockwell-rice"}, "edited": false, "score": 1, "creation_date": 1481723519, "post_id": 41143639, "comment_id": 69491061, "body": "No it will not happen by itself, he is basically saying that part of the exercise is to figure out what code goes in there.  I would re-read that chapter and see if you can understand it well enough to fill that in.  That is kind of the point of that.  For instance, in that show method you would want to redirect back to the root url unless what condition was met?  Once you know that answer then figure out how to check for that with code.  It is not something you have not gone over at that point so it is not something new you have to figure out."}], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 7624190, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-0taf-V8dS_w/AAAAAAAAAAI/AAAAAAAAAEI/gTuzbkBhoDE/photo.jpg?sz=128", "display_name": "ghada", "link": "https://stackoverflow.com/users/7624190/ghada"}, "is_accepted": true, "score": 3, "last_activity_date": 1488093698, "last_edit_date": 1488093698, "creation_date": 1488091677, "answer_id": 42465589, "question_id": 41143639, "link": "https://stackoverflow.com/questions/41143639/michael-hartls-rails-tutorial-chapter-11-12-multiple-erros-and-mails-not-bei/42465589#42465589", "title": "Michael Hartl&#39;s Rails tutorial chapter 11 &amp; 12: multiple erros and mails not being send", "body": "<pre><code>def index\n  @users = User. where(activated: true) . paginate(page: params[:page] )\nend\n\ndef show\n  @user = User. find(params[:id] )\n  redirect_to root_url and return unless true\nend\n\ndef activate\n    update_columns(activated: true, activated_at: Time.zone.now)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27, "user_id": 10227479, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-cQ3_ySbopps/AAAAAAAAAAI/AAAAAAAAAAA/AAnnY7qhmWpU9EFjC-A0FeFamlDYxH_MNQ/mo/photo.jpg?sz=128", "display_name": "spd_25", "link": "https://stackoverflow.com/users/10227479/spd-25"}, "is_accepted": false, "score": 1, "last_activity_date": 1536507676, "last_edit_date": 1536507676, "creation_date": 1536507568, "answer_id": 52246081, "question_id": 41143639, "link": "https://stackoverflow.com/questions/41143639/michael-hartls-rails-tutorial-chapter-11-12-multiple-erros-and-mails-not-bei/52246081#52246081", "title": "Michael Hartl&#39;s Rails tutorial chapter 11 &amp; 12: multiple erros and mails not being send", "body": "<p>It should be:  </p>\n\n<pre><code>update_columns(reset_digest:  User.digest(reset_token), reset_sent_at: Time.zone.now)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2327, "user_id": 11271432, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0327f4c2d7593ae3c7185a66d69d81b?s=128&d=identicon&r=PG&f=1", "display_name": "Cray", "link": "https://stackoverflow.com/users/11271432/cray"}, "edited": false, "score": 4, "creation_date": 1578575932, "post_id": 59664611, "comment_id": 105488519, "body": "Consider adding a short explanation on what this code does to your answer"}], "tags": [], "owner": {"reputation": 23, "user_id": 12682761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4fe548864ce0585d690b4c64afde7eac?s=128&d=identicon&r=PG", "display_name": "Louis Lescure", "link": "https://stackoverflow.com/users/12682761/louis-lescure"}, "is_accepted": false, "score": 0, "last_activity_date": 1578574981, "creation_date": 1578574981, "answer_id": 59664611, "question_id": 41143639, "link": "https://stackoverflow.com/questions/41143639/michael-hartls-rails-tutorial-chapter-11-12-multiple-erros-and-mails-not-bei/59664611#59664611", "title": "Michael Hartl&#39;s Rails tutorial chapter 11 &amp; 12: multiple erros and mails not being send", "body": "<pre><code>def index\n    @users = User.where(activated: true).paginate(page: params[:page])\n  end\n\n  def show\n    @user = User.find(params[:id])\n    redirect_to root_url and return unless @user.activated?\n    @microposts = @user.microposts.paginate(page: params[:page])\n  end\n</code></pre>\n"}], "owner": {"reputation": 859, "user_id": 6034998, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh5.googleusercontent.com/-vtaWMdlttYk/AAAAAAAAAAI/AAAAAAAAADA/nVgDy2-nrds/photo.jpg?sz=128", "display_name": "Salman", "link": "https://stackoverflow.com/users/6034998/salman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 929, "favorite_count": 0, "accepted_answer_id": 42465589, "answer_count": 3, "score": 0, "last_activity_date": 1578574981, "creation_date": 1481721432, "question_id": 41143639, "link": "https://stackoverflow.com/questions/41143639/michael-hartls-rails-tutorial-chapter-11-12-multiple-erros-and-mails-not-bei", "title": "Michael Hartl&#39;s Rails tutorial chapter 11 &amp; 12: multiple erros and mails not being send", "body": "<p>I'm currently at step 12 with the rails tutorial and am having problems with sending the account activation emails and visiting certain pages( i get errors)</p>\n\n<p>When requesting a password reset I get the following error</p>\n\n<pre><code>NameError in PasswordResetsController#create\n\nuninitialized constant User::FILL_IN\n\nExtracted source (around line #62):\n\n  def create_reset_digest\n    self.reset_token = User.new_token\n\n    (the code below is highlighted red)\n\n    update_columns(reset_digest:  FILL_IN, reset_sent_at: FILL_IN)\n\n  end\n\n  # Sends password reset email.\n</code></pre>\n\n<p>source being: </p>\n\n<pre><code>app/models/user.rb:62:in `create_reset_digest'\napp/controllers/password_resets_controller.rb:12:in `create'\n</code></pre>\n\n<p><strong>app/models/user.rb</strong></p>\n\n<pre><code>class User &lt; ApplicationRecord\n    attr_accessor :remember_token, :activation_token, :reset_token\n  before_save   :downcase_email\n  before_create :create_activation_digest\n  validates :name,  presence: true, length: { maximum: 50 }\n  VALID_EMAIL_REGEX = /\\A[\\w+\\-.]+@[a-z\\d\\-.]+\\.[a-z]+\\z/i\n  validates :email, presence: true, length: { maximum: 255 },\n                    format: { with: VALID_EMAIL_REGEX },\n                    uniqueness: { case_sensitive: false }\n  has_secure_password\n  validates :password, presence: true, length: { minimum: 6 }, allow_nil: true\n\n  # Returns the hash digest of the given string.\n  def User.digest(string)\n    cost = ActiveModel::SecurePassword.min_cost ? BCrypt::Engine::MIN_COST :\n                                                  BCrypt::Engine.cost\n    BCrypt::Password.create(string, cost: cost)\n  end\n\n\n  # Returns a random token.\n  def User.new_token\n    SecureRandom.urlsafe_base64\n  end\n\n  # Remembers a user in the database for use in persistent sessions.\n  def remember\n    self.remember_token = User.new_token\n    update_attribute(:remember_digest, User.digest(remember_token))\n  end\n\n  # Returns true if the given token matches the digest.\n  def authenticated?(remember_token)\n    return false if remember_digest.nil?\n    BCrypt::Password.new(remember_digest).is_password?(remember_token)\n  end\n\n  # Forgets a user.\n  def forget\n    update_attribute(:remember_digest, nil)\n  end\n\n  def authenticated?(attribute, token)\n    digest = send(\"#{attribute}_digest\")\n    return false if digest.nil?\n    BCrypt::Password.new(digest).is_password?(token)\n  end\n\n  # Activates an account.\n  def activate\n    update_columns(activated: FILL_IN, activated_at: FILL_IN)\n  end\n\n  # Sends activation email.\n  def send_activation_email\n    UserMailer.account_activation(self).deliver_now\n  end\n\n  # Sets the password reset attributes.\n  def create_reset_digest\n    self.reset_token = User.new_token\n    update_columns(reset_digest:  FILL_IN, reset_sent_at: FILL_IN)\n  end\n\n  # Sends password reset email.\n  def send_password_reset_email\n    UserMailer.password_reset(self).deliver_now\n  end\n\n    # Returns true if a password reset has expired.\n  def password_reset_expired?\n    reset_sent_at &lt; 2.hours.ago\n  end\n\n  private\n\n    # Converts email to all lower-case.\n    def downcase_email\n      self.email = email.downcase\n    end\n\n    # Creates and assigns the activation token and digest.\n    def create_activation_digest\n      self.activation_token  = User.new_token\n      self.activation_digest = User.digest(activation_token)\n    end\nend\n</code></pre>\n\n<p><strong>app/controllers/password_resets_controller.rb</strong></p>\n\n<pre><code>class PasswordResetsController &lt; ApplicationController\n  before_action :get_user,         only: [:edit, :update]\n  before_action :valid_user,       only: [:edit, :update]\n  before_action :check_expiration, only: [:edit, :update]    # Case (1)\n\n  def new\n  end\n\n  def create\n    @user = User.find_by(email: params[:password_reset][:email].downcase)\n    if @user\n      @user.create_reset_digest\n      @user.send_password_reset_email\n      flash[:info] = \"Email sent with password reset instructions\"\n      redirect_to root_url\n    else\n      flash.now[:danger] = \"Email address not found\"\n      render 'new'\n    end\n  end\n\n  def edit\n  end\n\n  def update\n    if params[:user][:password].empty?\n      @user.errors.add(:password, \"can't be empty\")\n      render 'edit'\n    elsif @user.update_attributes(user_params)\n      log_in @user\n      @user.update_attribute(:reset_digest, nil)\n      flash[:success] = \"Password has been reset.\"\n      redirect_to @user\n    else\n      render 'edit'\n    end\n  end\n\n  private\n\n    def user_params\n      params.require(:user).permit(:password, :password_confirmation)\n    end\n\n    # Before filters\n\n    def get_user\n      @user = User.find_by(email: params[:email])\n    end\n\n    # Confirms a valid user.\n    def valid_user\n      unless (@user &amp;&amp; @user.activated? &amp;&amp;\n              @user.authenticated?(:reset, params[:id]))\n        redirect_to root_url\n      end\n    end\n\n    # Checks expiration of reset token.\n    def check_expiration\n      if @user.password_reset_expired?\n        flash[:danger] = \"Password reset has expired.\"\n        redirect_to new_password_reset_url\n      end\n    end\nend\n</code></pre>\n\n<p>When i try to view a user i get the following error</p>\n\n<pre><code>NameError in UsersController#show\nuninitialized constant UsersController::FILL_IN\n\nExtracted source (around line #12):\n\n  def show\n    @user = User.find(params[:id])\n\n    (the code below being red)\n\n    redirect_to root_url and return unless FILL_IN\n\n  end\n\n  def new\n</code></pre>\n\n<p>source being :</p>\n\n<pre><code>app/controllers/users_controller.rb:12:in `show'\n</code></pre>\n\n<p><strong>app/controllers/users_controller.rb</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  before_action :logged_in_user, only: [:index, :edit, :update, :destroy]\n  before_action :correct_user,   only: [:edit, :update]\n  before_action :admin_user,     only: :destroy\n\n  def index\n    @users = User.where(activated: FILL_IN).paginate(page: params[:page])\n  end\n\n  def show\n    @user = User.find(params[:id])\n    redirect_to root_url and return unless FILL_IN\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      @user.send_activation_email\n      flash[:info] = \"Please check your email to activate your account.\"\n      redirect_to root_url\n    else\n      render 'new'\n    end\n  end\n\n  def edit\n    @user = User.find(params[:id])\n  end\n\n  def update\n    @user = User.find(params[:id])\n    if @user.update_attributes(user_params)\n            flash[:success] = \"Profile updated\"\n      redirect_to @user\n    else\n      render 'edit'\n    end\n  end\n\n   def destroy\n    User.find(params[:id]).destroy\n    flash[:success] = \"User deleted\"\n    redirect_to users_url\n  end\n\n    # Returns true if the given token matches the digest.\n  def authenticated?(attribute, token)\n    digest = send(\"#{attribute}_digest\")\n    return false if digest.nil?\n    BCrypt::Password.new(digest).is_password?(token)\n  end\n\n  private\n\n    def user_params\n      params.require(:user).permit(:name, :company, :phone, :email, :password,\n                                   :password_confirmation)\n    end\n\n# Confirms a logged-in user.\n    def logged_in_user\n      unless logged_in?\n             store_location\n        flash[:danger] = \"Please log in.\"\n        redirect_to login_url\n      end\n    end\n\n    # Confirms the correct user.\n    def correct_user\n      @user = User.find(params[:id])\n      redirect_to(root_url) unless @user == current_user\n    end\n\n        def admin_user\n      redirect_to(root_url) unless current_user.admin?\n    end\n\nend\n</code></pre>\n\n<p>I've been at this for over a day searching for answers on different posts and retracing and redoing my steps, but I've got no clue what I've done wrong. </p>\n\n<p>I can't visit the user pages and when I submit forget password i get errors</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 18224, "user_id": 406987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8865b16d4f3493cfae865af2b3247fd3?s=128&d=identicon&r=PG", "display_name": "Doon", "link": "https://stackoverflow.com/users/406987/doon"}, "edited": false, "score": 0, "creation_date": 1481720763, "post_id": 41143388, "comment_id": 69489194, "body": "is the model the cart model?  Unless I am missing something <code>add_bike</code> &lt;&gt; <code>add_product</code> ?"}, {"owner": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 1, "creation_date": 1481720960, "post_id": 41143388, "comment_id": 69489291, "body": "The code seems incomplete.  If not, then <code>@cart</code> is not initialized."}, {"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1481722001, "post_id": 41143388, "comment_id": 69489993, "body": "Where&#39;s the rest of the code when you call <code>add_bike</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 67, "user_id": 7044017, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-p1kdg1V6cqg/AAAAAAAAAAI/AAAAAAAAAI8/-VS0Mx4sAqo/photo.jpg?sz=128", "display_name": "KOD459", "link": "https://stackoverflow.com/users/7044017/kod459"}, "edited": false, "score": 0, "creation_date": 1481722107, "post_id": 41143424, "comment_id": 69490057, "body": "I didn&#39;t have before_action :current_cart, only: [:create]. That seems to be the problem"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481725107, "post_id": 41143424, "comment_id": 69492097, "body": "You shouldn&#39;t use answers to ask for clarification, that&#39;s what comments are for."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481725265, "post_id": 41143424, "comment_id": 69492209, "body": "Let&#39;s say it was a rhetorical question. Given his <code>current_cart</code> method and the error he got, it was clear that <code>current_cart</code> wasn&#39;t called. Still, I updated my answer. Thanks for the comment"}, {"owner": {"reputation": 67, "user_id": 7044017, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-p1kdg1V6cqg/AAAAAAAAAAI/AAAAAAAAAI8/-VS0Mx4sAqo/photo.jpg?sz=128", "display_name": "KOD459", "link": "https://stackoverflow.com/users/7044017/kod459"}, "edited": false, "score": 0, "creation_date": 1481728297, "post_id": 41143424, "comment_id": 69494269, "body": "Thanks Eric, really helped. Don&#39;t mind that Stefan lad"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481728387, "post_id": 41143424, "comment_id": 69494330, "body": "That &quot;Stefan lad&quot; also happens to be a very valuable source of Ruby info. ;)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481732332, "post_id": 41143424, "comment_id": 69496972, "body": "Sorry if I sounded rude."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1481725260, "last_edit_date": 1481725260, "creation_date": 1481720789, "answer_id": 41143424, "question_id": 41143388, "link": "https://stackoverflow.com/questions/41143388/undefined-method-for-nilnilclass/41143424#41143424", "title": "Undefined method &#39;&#39; for nil:NilClass", "body": "<p><code>@cart</code> isn't initialized in your controller, and is equal to <code>nil</code>.</p>\n\n<p>Your <code>@cart</code> isn't a cart, and <code>add_bike</code> isn't defined for something that isn't a cart.</p>\n\n<p>You should show us what happens before <code>@cart.add_bike(bike.id)</code></p>\n\n<p>Update :</p>\n\n<ul>\n<li><p>It looks like you don't call <code>current_cart</code> before using <code>@cart.add_bike(bike.id)</code></p></li>\n<li><p>Your <code>current_cart</code> defines <code>@cart</code> but returns <code>@cart.id</code> when a new <code>@cart</code> is created.</p></li>\n</ul>\n"}], "owner": {"reputation": 67, "user_id": 7044017, "user_type": "registered", "accept_rate": 57, "profile_image": "https://lh6.googleusercontent.com/-p1kdg1V6cqg/AAAAAAAAAAI/AAAAAAAAAI8/-VS0Mx4sAqo/photo.jpg?sz=128", "display_name": "KOD459", "link": "https://stackoverflow.com/users/7044017/kod459"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 119, "favorite_count": 0, "accepted_answer_id": 41143424, "answer_count": 1, "score": 1, "last_activity_date": 1481727447, "creation_date": 1481720642, "last_edit_date": 1481727447, "question_id": 41143388, "link": "https://stackoverflow.com/questions/41143388/undefined-method-for-nilnilclass", "title": "Undefined method &#39;&#39; for nil:NilClass", "body": "<p>Just trying to make a simple shopping cart for an application selling bikes using ruby. This error has me bogged down so any help would be very appreciated! </p>\n\n<p>The error comes up when I want to add something to the cart. Its something to do with my controller of the lineitems or my cart model.</p>\n\n<p>For my line items:</p>\n\n<pre><code>@lineitem = @cart.add_bike(bike.id)\n</code></pre>\n\n<p>For my model:</p>\n\n<pre><code>def add_bike(bike_id)\n  current_item = lineitems.find_by_bike_id(bike_id)\n  if current_item\n    current_item.quantity +=1\n  else\n    current_item = lineitems.new(bike_id: bike_id)\n    current_item.quantity = 1\n  end\n  current_item          #this is returning the current_item object  \nend\n</code></pre>\n\n<p>My error in full is <code>undefined method `add_bike' for nil:NilClass</code></p>\n\n<pre><code>def current_cart\n  @cart = Cart.find(session[:cart_id])\n  rescue ActiveRecord::RecordNotFound\n    @cart = Cart.create\n    session[:cart_id] = @cart.id\n  end\nend\n</code></pre>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 4480, "user_id": 259889, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/aba1af6d6197093c880797a82e1bc2a2?s=128&d=identicon&r=PG", "display_name": "Sid", "link": "https://stackoverflow.com/users/259889/sid"}, "edited": false, "score": 0, "creation_date": 1481720336, "post_id": 41143141, "comment_id": 69488896, "body": "Can you please post the error stack trace?  Also see if this  link helps:  <a href=\"http://stackoverflow.com/a/13524362/259889\">stackoverflow.com/a/13524362/259889</a>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481720617, "post_id": 41143141, "comment_id": 69489085, "body": "The part within <code>#logo</code> doesn&#39;t look like valid Haml."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7079852"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481722958, "post_id": 41143141, "comment_id": 69490645, "body": "Hi @Stefan, I don&#39;t know why it is greyed out in this code but that part works fine, it shows a logo that when clicked brings the users back to the home page. That part works fine, but do you think it is affecting what is beneath it?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481723292, "post_id": 41143141, "comment_id": 69490902, "body": "@C13 yes, that is what I meant by &quot;within&quot;. You can&#39;t just mix Haml and HTML / ERB."}, {"owner": {"user_type": "does_not_exist", "display_name": "user7079852"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481723906, "post_id": 41143141, "comment_id": 69491339, "body": "@Stefan I took out that line and I&#39;m still getting the original problem which is that there&#39;s an error when I want the search bar to appear."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7079852"}, "edited": false, "score": 0, "creation_date": 1481722401, "post_id": 41143459, "comment_id": 69490250, "body": "I get an error saying &quot;Illegal nesting: content can&#39;t be both given on the same line as %div and nested within it.&quot; on the line beginning with &#39; = form_tag &#39;"}], "tags": [], "owner": {"reputation": 1114, "user_id": 5934752, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7tGT8.jpg?s=128&g=1", "display_name": "Ravi Mariya", "link": "https://stackoverflow.com/users/5934752/ravi-mariya"}, "is_accepted": false, "score": 0, "last_activity_date": 1527688530, "last_edit_date": 1527688530, "creation_date": 1481720902, "answer_id": 41143459, "question_id": 41143141, "link": "https://stackoverflow.com/questions/41143141/i-cant-get-a-search-bar-to-appear-in-my-ruby-application/41143459#41143459", "title": "I can&#39;t get a search bar to appear in my Ruby application", "body": "<p>you are using ERB syntax inside HAML view so it should be HAML syntax and not ERB</p>\n\n<pre><code>.wrapper.clearfix\n  = form_tag(search_path, method: :get) do\n    = text_field_tag(:post_title, params[:post_title])\n    = submit_tag \"Search\"\n</code></pre>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7079852"}, "edited": false, "score": 0, "creation_date": 1481722497, "post_id": 41143496, "comment_id": 69490311, "body": "Hi, No that code won&#39;t work for me, I get this error &#39;Illegal nesting: content can&#39;t be both given on the same line as %div and nested within it.&#39; around the line %li , I don&#39;t know what this error means nor how to fix it."}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1481723529, "post_id": 41143496, "comment_id": 69491071, "body": "@C13 yeah, right, sorry. Changed the answer, should work now"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7079852"}, "edited": false, "score": 0, "creation_date": 1481724619, "post_id": 41143496, "comment_id": 69491793, "body": "That&#39;s not working either, it says there are lots of syntax errors in it, 18 to be precise. I don&#39;t know what&#39;s wrong with that code at all, I can&#39;t understand why there&#39;s no search box appearing."}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1481727513, "post_id": 41143496, "comment_id": 69493769, "body": "@C13 can you post a few first lines, please?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7079852"}, "edited": false, "score": 0, "creation_date": 1481729064, "post_id": 41143496, "comment_id": 69494772, "body": "I turned the server off for an hour and restarted it, the search bar is appearing now... Thank you! Now I have an issue with the search results, thanks for the help Nikita Misharin!"}, {"owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "edited": false, "score": 0, "creation_date": 1481734422, "post_id": 41143496, "comment_id": 69498381, "body": "@C13 No worries. Although you can choose the answer as the best, if it helped"}], "tags": [], "owner": {"reputation": 1743, "user_id": 4308435, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Vgr6X.jpg?s=128&g=1", "display_name": "Nikita Misharin", "link": "https://stackoverflow.com/users/4308435/nikita-misharin"}, "is_accepted": true, "score": 0, "last_activity_date": 1481723465, "last_edit_date": 1481723465, "creation_date": 1481720985, "answer_id": 41143496, "question_id": 41143141, "link": "https://stackoverflow.com/questions/41143141/i-cant-get-a-search-bar-to-appear-in-my-ruby-application/41143496#41143496", "title": "I can&#39;t get a search bar to appear in my Ruby application", "body": "<p>Through 5th to 9th lines, you have erb, where the rest of the template written in HAML.</p>\n\n<p>This code should work as expected</p>\n\n<pre><code>%body  \n    %header  \n        .wrapper.clearfix  \n            #logo= link_to \"Scribble\", root_path  \n            %li\n                = form_tag(search_path, method: :get) do \n                    = text_field_tag(:post_title, params[:post_title])\n                    = submit_tag \"Search\"\n            %nav  \n                - if user_signed_in?  \n                    = link_to current_user.name, edit_user_registration_path  \n                    = link_to \"Add New Inspiration\", new_post_path, class: \"button\"  \n                - else  \n                    = link_to \"Sign in\", new_user_session_path  \n                    = link_to \"Sign Up\", new_user_registration_path, class: \"button\"  \n    %p.notice= notice  \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7079852"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 112, "favorite_count": 0, "accepted_answer_id": 41143496, "answer_count": 2, "score": 1, "last_activity_date": 1527688530, "creation_date": 1481719908, "last_edit_date": 1481720322, "question_id": 41143141, "link": "https://stackoverflow.com/questions/41143141/i-cant-get-a-search-bar-to-appear-in-my-ruby-application", "title": "I can&#39;t get a search bar to appear in my Ruby application", "body": "<p>I have a Ruby application and am trying to implement a search function. I have the code to handle the search request but I can't get the search bar to appear, I have coded it into my <code>application.html.haml</code> but I get an Illegal Nesting error. What am I doing wrong?</p>\n\n<pre><code>%body  \n    %header  \n        .wrapper.clearfix  \n            #logo= link_to \"Scribble\", root_path  \n                &lt;li&gt;&lt;%= form_tag(search_path, method: :get) do %&gt;  \n                    &lt;%= text_field_tag(:post_title, params[:post_title]) %&gt;  \n                    &lt;%= submit_tag \"Search\" %&gt;  \n                &lt;% end %&gt;  \n            %nav  \n                - if user_signed_in?  \n                    = link_to current_user.name, edit_user_registration_path  \n                    = link_to \"Add New Inspiration\", new_post_path, class: \"button\"  \n                - else  \n                    = link_to \"Sign in\", new_user_session_path  \n                    = link_to \"Sign Up\", new_user_registration_path, class: \"button\"  \n    %p.notice= notice  \n</code></pre>\n"}, {"tags": ["ruby", "scope", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 46, "user_id": 1517185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b61c8867669b4e3bebad8de3bca58a4d?s=128&d=identicon&r=PG", "display_name": "Lars Vonk", "link": "https://stackoverflow.com/users/1517185/lars-vonk"}, "is_accepted": true, "score": 1, "last_activity_date": 1484079232, "creation_date": 1484079232, "answer_id": 41577550, "question_id": 41142580, "link": "https://stackoverflow.com/questions/41142580/how-to-split-a-sinatra-app-with-different-scopes/41577550#41577550", "title": "How to split a Sinatra app with different scopes?", "body": "<p>I don't think this is achievable in the way you are trying. If you have methods with similar names in different modules mixed into a single class the last just wins.</p>\n\n<p>So in this case I would create a <a href=\"http://www.sinatrarb.com/intro.html#Sinatra::Base%20-%20Middleware,%20Libraries,%20and%20Modular%20Apps\" rel=\"nofollow noreferrer\">modular app</a> combined with a config.ru to setup your application.</p>\n\n<pre><code>class OneRegister &lt; Sinatra::Base\n    # helpers here\nend\n\nclass SecondRegister &lt; Sinatra::Base\n    # helpers here\nend\n</code></pre>\n\n<p>In config.ru</p>\n\n<pre><code>app = Rack::URLMap.new(\n  '/one-endpoint' =&gt; OneRegister,\n  '/second-endpoint' =&gt; TwoRegister \n)\n\nrun app\n</code></pre>\n\n<p>No you helpers are scoped to a single class.</p>\n"}], "owner": {"reputation": 11572, "user_id": 462015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e98ec4b9f3be7294da5328857b07de49?s=128&d=identicon&r=PG", "display_name": "Arturo Herrero", "link": "https://stackoverflow.com/users/462015/arturo-herrero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 143, "favorite_count": 0, "accepted_answer_id": 41577550, "answer_count": 1, "score": 1, "last_activity_date": 1484079232, "creation_date": 1481718230, "question_id": 41142580, "link": "https://stackoverflow.com/questions/41142580/how-to-split-a-sinatra-app-with-different-scopes", "title": "How to split a Sinatra app with different scopes?", "body": "<p>I'm splitting a large Sinatra file into different files using registers. This is one way to have a <a href=\"http://www.sinatrarb.com/extensions.html\" rel=\"nofollow noreferrer\">modular Sinatra app using extensions</a>.</p>\n\n<p>I'm ending up with something like the following code:</p>\n\n<pre><code>MyApp &lt; Sinatra::Base\n  register OneRegister\n  register SecondRegister\nend\n</code></pre>\n\n<hr>\n\n<pre><code>module OneRegister\n  def self.registered(app)\n    app.helpers OneRegisterHelper\n\n    app.get \"/one-endpoint\" do\n      do_stuff\n    end\n  end\n\n  module OneRegisterHelper\n    def do_stuff\n      # Some code\n    end\n  end\nend\n</code></pre>\n\n<hr>\n\n<pre><code>module SecondRegister\n  def self.registered(app)\n    app.helpers SecondRegisterHelper\n\n    app.get \"/second-endpoint\" do\n      do_stuff\n    end\n  end\n\n  module SecondRegisterHelper\n    def do_stuff\n      # Different code\n    end\n  end\nend\n</code></pre>\n\n<p>The problem is how Sinatra works with registers and helpers. Every time I create a new helper for a register I'm polluting the main Sinatra app scope with the methods in the helpers.</p>\n\n<p>So, the method <code>do_stuff</code> is going to be overwritten by the <code>SecondRegisterHelper</code> (this is how Ruby works when including a module) but I'd like to have different implementations for the methods without worry if I'm using the same method name or a different one (image an app with 25 registers with small methods in each one).</p>\n\n<p>Basically, I'd like to have different registers with private methods because I usually write very small private methods with a single responsibility. Any ideas, how I can achieve this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routing", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1481721834, "post_id": 41143359, "comment_id": 69489888, "body": "Also the canonical CRUD actions (show, index, create, destroy, update) can be augmented with extra verbs but if you are ever using a synonym like <code>add</code> or <code>remove</code> or listing or nested resource with <code>def things</code>. You are doing it wrong."}, {"owner": {"reputation": 569, "user_id": 3978366, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/adfd542c717f83dc36ff74636c60fe15?s=128&d=identicon&r=PG", "display_name": "Terry Raimondo", "link": "https://stackoverflow.com/users/3978366/terry-raimondo"}, "edited": false, "score": 0, "creation_date": 1481721899, "post_id": 41143359, "comment_id": 69489921, "body": "Thank you for your clear explanation, however with your last example, how will you wrap a create action with 2 contexts (model belongs to 2 others) ? Like in the Bonus question in my post. How to create a relation object when the 2 parents need to be present at once"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 569, "user_id": 3978366, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/adfd542c717f83dc36ff74636c60fe15?s=128&d=identicon&r=PG", "display_name": "Terry Raimondo", "link": "https://stackoverflow.com/users/3978366/terry-raimondo"}, "edited": false, "score": 1, "creation_date": 1481722020, "post_id": 41143359, "comment_id": 69490007, "body": "You don&#39;t. Use the most important model as context and pass the other relations as params."}, {"owner": {"reputation": 569, "user_id": 3978366, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/adfd542c717f83dc36ff74636c60fe15?s=128&d=identicon&r=PG", "display_name": "Terry Raimondo", "link": "https://stackoverflow.com/users/3978366/terry-raimondo"}, "edited": false, "score": 0, "creation_date": 1481722235, "post_id": 41143359, "comment_id": 69490132, "body": "Ok ! Thank you very much ! If I get it right it should look like this: POST /api/v1/candidates/1/accounts?source_id=2."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 4, "last_activity_date": 1481721799, "last_edit_date": 1481721799, "creation_date": 1481720550, "answer_id": 41143359, "question_id": 41142529, "link": "https://stackoverflow.com/questions/41142529/rails-5-restful-api-with-advanced-relations/41143359#41143359", "title": "Rails 5 RESTful API with advanced relations", "body": "<p>The best practice is to never* nest resources more than one level and only nest where the nesting is necessary or provides context. </p>\n\n<p>Remember than any record with a unique id or uid can be fetched directly without context. So nesting member routes needlessly will make your API overcomplicated and really wordy.</p>\n\n<pre><code>DELETE /as/:id\nis a lot better than\nDELETE /as/:a_id/bs/:b_id/c/:id # Are you kidding me!\n</code></pre>\n\n<p>Lets say take a classical microblogging app as an example:</p>\n\n<pre><code>class User\n  has_many :posts, foreign_key: 'author_id'\n  has_many :comments\nend\n\nclass Post\n  belongs_to :author, class_name: 'User'\nend\n\nclass Comment\n  belongs_to :user\n  belongs_to :post\nend\n</code></pre>\n\n<p>You could declare the routes as:</p>\n\n<pre><code>resources :users do\n  scope module: :users do\n    resources :posts, only: [:index]\n    resources :comments, only: [:index]\n  end\nend\n\nresources :posts do\n  resources :comments, module: :posts, only: [:index, :create]\nend\n\nresources :comments, only: [:index, :destroy, :update]\n</code></pre>\n\n<p>Using the module option lets us destinguish between the controllers for a \"base resource\" and its nested representation:</p>\n\n<pre><code>class API::V1::PostsController &lt; ApplicationController\n  # GET /api/v1/posts\n  def index\n    @posts = Post.all\n  end\n\n  def show\n    # ...\n  end\n  def destroy\n    # ...\n  end\n  def update\n    # ...\n  end\nend\n\n# Represents posts that belong to a user\nclass API::V1::Users::PostsController &lt; ApplicationController\n  # GET /api/v1/users/:user_id/posts\n  def index\n    @user = User.eager_load(:posts).find(params[:user_id])\n    respond_with(@user.posts)\n  end\nend\n</code></pre>\n\n<p>In some cases you will want to nest to nest the create action as well if the resources should be created in the context of another:</p>\n\n<pre><code>class API::V1::Posts::CommentsController &lt; ApplicationController\n  # PATCH /api/v1/posts/:post_id/comments\n  def create\n    @post = Post.find(params[:post_id])\n    @comment = @post.comments.create(comment_params)\n    respond_with(@comment)\n  end\n\n  # GET /api/v1/posts/:post_id/comments\n  def index\n    @post = Post.eager_load(:comments).find(params[:post_id])\n    respond_with(@post.comments)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 569, "user_id": 3978366, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/adfd542c717f83dc36ff74636c60fe15?s=128&d=identicon&r=PG", "display_name": "Terry Raimondo", "link": "https://stackoverflow.com/users/3978366/terry-raimondo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 1, "accepted_answer_id": 41143359, "answer_count": 1, "score": 2, "last_activity_date": 1481721799, "creation_date": 1481718078, "question_id": 41142529, "link": "https://stackoverflow.com/questions/41142529/rails-5-restful-api-with-advanced-relations", "title": "Rails 5 RESTful API with advanced relations", "body": "<p>I have many resources with advanced relations (habtm/hm/hmt etc..), everything you can imagine, but now it's time to write a beautiful routing for this API.\nThe problem is, I can't fin the best practices about nested resource + advanced relations ro do my routing, here is what I am trying to do:</p>\n\n<p>Here are my models with the concerned relations</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code># app/models/candidate.rb\nclass Candidate &lt; ApplicationRecord\n  include Sociable, Locatable\n\n  belongs_to :user\n  has_many :sourcing_accounts\n  has_many :accounts, through: :sourcing_accounts\n  has_many :users, through: :sourcing_accounts\nend\n\n# app/models/sourcing_account.rb\nclass SourcingAccount &lt; ApplicationRecord\n  belongs_to :account\n  belongs_to :candidate\n  belongs_to :user\nend\n\n# app/models/user.rb\nclass User &lt; ApplicationRecord\n  include Sociable\n\n  has_many :candidates\n  has_many :campaigns\n  has_many :sourcing_account\nend\n</code></pre>\n\n<p>For this example, I am willing to permit to create a relation between a <code>Candidate</code> and a <code>User</code> by creating a <code>SourcingAccount</code>.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>resources :candidates do\n  resources :accounts\n  resources :users, only: [:index] do\n    post :remove\n    post :add\n  end\nend\n</code></pre>\n\n<p>It generates:</p>\n\n<pre><code>v1_candidate_user_remove POST   /v1/candidates/:candidate_id/users/:user_id/remove(.:format) api/v1/users#remove {:subdomain=&gt;\"api\", :format=&gt;:json}\n   v1_candidate_user_add POST   /v1/candidates/:candidate_id/users/:user_id/add(.:format)    api/v1/users#add {:subdomain=&gt;\"api\", :format=&gt;:json}\n</code></pre>\n\n<p>I did not found anything about this. Is there best practices ???\nIf not, what do you think would be the best for this case ?</p>\n\n<p>Without precisions, Rails wants to route this to users#remove and users#add, which I think is totally wrong. These actions must not belong to the users controller. </p>\n\n<p>Bonus:</p>\n\n<p>What should look like a polymorphic route to create an <code>Account</code> belonging to 2 other models (with presence validation) the 2 models are <code>Source</code> and the other one is polymorphic <code>[Candidate,User] # for example</code>, (they are <code>Sociable</code> models) </p>\n"}, {"tags": ["ruby", "cucumber", "capybara"], "answers": [{"comments": [{"owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 0, "creation_date": 1481718953, "post_id": 41142157, "comment_id": 69487958, "body": "That&#39;s great thank you, I&#39;m getting the same for &#39;expect&#39; step, I&#39;ve tried to include  include RSpec::Expectations but it  does&#39;nt help"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "edited": false, "score": 1, "creation_date": 1481719009, "post_id": 41142157, "comment_id": 69487996, "body": "@Tom n/p :) There is no sense in having RSpec in Ruby class. Tests should be separated."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1481716965, "creation_date": 1481716965, "answer_id": 41142157, "question_id": 41142105, "link": "https://stackoverflow.com/questions/41142105/using-capybara-within-a-ruby-class/41142157#41142157", "title": "Using Capybara within a Ruby class", "body": "<p>You should include <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/DSL\" rel=\"nofollow noreferrer\"><code>Capybara::DSL</code></a>:</p>\n\n<pre><code>require 'capybara/dsl'\n\nclass UserAdmin\n  include Capybara::DSL\n  Capybara.run_server = false\n  # ...\nend\n</code></pre>\n"}], "owner": {"reputation": 855, "user_id": 3759265, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/19a877022888fb56ba9c69541a3f09db?s=128&d=identicon&r=PG&f=1", "display_name": "Tom", "link": "https://stackoverflow.com/users/3759265/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 165, "favorite_count": 0, "accepted_answer_id": 41142157, "answer_count": 1, "score": -1, "last_activity_date": 1481726960, "creation_date": 1481716817, "last_edit_date": 1481726960, "question_id": 41142105, "link": "https://stackoverflow.com/questions/41142105/using-capybara-within-a-ruby-class", "title": "Using Capybara within a Ruby class", "body": "<p>I'm just experimenting a little with Cucumber and Capybara.</p>\n\n<p>I'm writing a class that will perform some user admin for me.</p>\n\n<p>I have the following class:</p>\n\n<pre><code>  class UserAdmin\n\n  def initialize(data)\n    @data = data\n  end\n\n  def add_user\n    require 'rspec/expectations'\n    require 'capybara/cucumber'\n    require 'capybara/helpers'\n\n    @data.hashes.each do |user_details|\n      load_user_data(user_details)\n\n    fill_in('firstname', with: @first_name)\n    fill_in('surname', with: @last_name)\n    fill_in('username', with: @new_username)\n    fill_in('usernameConfirmation', with: @confirm_new_username)\n\n    click_button_add_user\n\n    end\n  end\n</code></pre>\n\n<p>When I try and create an instance of this class, I get `NoMethodError: undefined method fill_in' for #</p>\n\n<p>I thought by requieing Capybara etc, I could use their methods in my class.</p>\n\n<p>Clearly I'm wrong, could anyone point out where I've gone wrong please?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 104, "user_id": 3185654, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/33cod.jpg?s=128&g=1", "display_name": "Twizty", "link": "https://stackoverflow.com/users/3185654/twizty"}, "is_accepted": false, "score": 1, "last_activity_date": 1481717128, "creation_date": 1481717128, "answer_id": 41142207, "question_id": 41141837, "link": "https://stackoverflow.com/questions/41141837/rails-factorygirl-create-specific-factories-in-order-to-meet-fk-dependancies/41142207#41142207", "title": "Rails FactoryGirl - Create specific factories in order to meet fk dependancies", "body": "<p>Have you tried adding <code>association :address</code> to the <code>customer</code> factory? It would be easier to help if you showed your <code>customer</code> and <code>address</code> factories.</p>\n"}, {"comments": [{"owner": {"reputation": 1357, "user_id": 4370885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc5bf7a6307b29d51154924b65d6dd47?s=128&d=identicon&r=PG&f=1", "display_name": "theDrifter", "link": "https://stackoverflow.com/users/4370885/thedrifter"}, "edited": false, "score": 0, "creation_date": 1481720119, "post_id": 41142287, "comment_id": 69488761, "body": "Yes of course that was it. I did setup the fk&#39;s to fix values for quick testing -.- ... Of course it ended up like this :) The one file per factory is a great tip btw!"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1481717359, "creation_date": 1481717359, "answer_id": 41142287, "question_id": 41141837, "link": "https://stackoverflow.com/questions/41141837/rails-factorygirl-create-specific-factories-in-order-to-meet-fk-dependancies/41142287#41142287", "title": "Rails FactoryGirl - Create specific factories in order to meet fk dependancies", "body": "<p>I would really be consistent and use one file per factory (model) for consistency. Don't make others dig around. </p>\n\n<pre><code># spec/factories/addresses.rb\nFactoryGirl.define do\n  factory :address do\n    # ...\n  end\nend\n\n# spec/factories/customers.rb\nFactoryGirl.define do\n  factory :customer do\n    association :address\n    # or the short form\n    address\n  end\nend\n</code></pre>\n\n<p>All you need to do is reference the <code>address</code> factory from customer. And <a href=\"https://github.com/thoughtbot/factory_girl/blob/master/GETTING_STARTED.md#associations\" rel=\"nofollow noreferrer\">factory_girl will create the associated record</a>. </p>\n"}], "owner": {"reputation": 1357, "user_id": 4370885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc5bf7a6307b29d51154924b65d6dd47?s=128&d=identicon&r=PG&f=1", "display_name": "theDrifter", "link": "https://stackoverflow.com/users/4370885/thedrifter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 41142287, "answer_count": 2, "score": 0, "last_activity_date": 1481717359, "creation_date": 1481716091, "question_id": 41141837, "link": "https://stackoverflow.com/questions/41141837/rails-factorygirl-create-specific-factories-in-order-to-meet-fk-dependancies", "title": "Rails FactoryGirl - Create specific factories in order to meet fk dependancies", "body": "<p>Factories are defined in multiple files under <code>/factories/</code> or in the <code>factories.rb</code> file</p>\n\n<pre><code>spec/factories/*.rb\nspec/factories.rb\n</code></pre>\n\n<p>The model customer test needs the <code>customer</code> factory. This factory has a foreign key pointing to an <code>address</code> factory. </p>\n\n<ul>\n<li>Address factory is defined in <code>/spec/factories.rb</code></li>\n<li>Customer factory is defined in <code>spec/factories/customer.rb</code></li>\n</ul>\n\n<p>Now if i run</p>\n\n<pre><code>rspec spec/model/customer_spec.rb\n</code></pre>\n\n<p>i get the following error</p>\n\n<pre><code>postgresql_adapter.rb:602:in `exec_prepared': PG::ForeignKeyViolation:\nERROR:  insert or update on table \"customers\" violates foreign key constraint \"fk_rails_580b7e1bd8\" (ActiveRecord::InvalidForeignKey)\nDETAIL:  Key (address_id)=(1) is not present in table \"addresses\".\n: INSERT INTO \"customers\" (\"date_of_birth\", \"created_at\", \"updated_at\", , \"female_household_members\", \"male_household_members\", \"pin_code\", \"national_id\", ) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9) RETURNING \"id\"\n</code></pre>\n\n<p>FactoryGril tries to build the customer factory first and failes because of the missing entry in the address table.</p>\n\n<p>How can i avoid these dependency issues? Can i somehow define to build some basic factories first ? </p>\n"}, {"tags": ["ruby", "variables", "module", "parent-child", "mixins"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 1, "creation_date": 1481714659, "post_id": 41141224, "comment_id": 69485279, "body": "you are not trying to fetch a variable from parent class here. Instead you are trying to fetch it from some other object of the parent class"}, {"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1481714997, "post_id": 41141224, "comment_id": 69485470, "body": "<code>@total_money</code> will be stored in the instantiated object and not in the class itself. <code>new_settings</code> is a instance of <code>Settings</code> class while <code>player_fabrizio</code>is an instance of the <code>Player</code> class that is not aware of the <code>new_settings</code> object."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1557571393, "post_id": 41141224, "comment_id": 98815825, "body": "@lcguida yes, the concept of <code>instance</code> and <code>class</code> variable was not clear to me at that time, but it was even less clear to me how to easily retrieve the object instances and pass it to another object. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1481715386, "post_id": 41141521, "comment_id": 69485704, "body": "@Chowlett&#39;s solution looks good too. It will work (and is better solution) if you have global settings for all the players you will be creating. Instead if you can create multiple games with different settings, then you could use this one."}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1481727759, "post_id": 41141521, "comment_id": 69493939, "body": "Thank to everyone for the amazing help. I could not understand this alone. Regards  Fabrizio"}, {"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1557571561, "post_id": 41141521, "comment_id": 98815862, "body": "Thanks for the great explanation to my first question on StackOverflow, it helped me better understand the concepts of Object Oriented Programming. It was hard for me to understand abstract concepts, but these comments and answers made it very clear!  I learn from this question to avoid too much abstraction in programming."}], "tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 1, "last_activity_date": 1481715130, "creation_date": 1481715130, "answer_id": 41141521, "question_id": 41141224, "link": "https://stackoverflow.com/questions/41141224/ruby-using-mixins-to-get-a-parent-variable-calculated-in-a-module/41141521#41141521", "title": "Ruby - Using Mixins to get a Parent Variable calculated in a Module", "body": "<p>I would rename <code>Settings</code> to <code>Game</code> and do it as follows (though you are free to use whatever name suits you):</p>\n\n<pre><code>class Game\n  include Variables\n  attr_reader :totalmoney\nend\n\nclass Player\n  attr_reader :game\n\n  def initialize(game, kingdom, king)\n    @game = game\n    @playerData = [kingdom, king]\n  end\n\n  def calculate\n    print game.totalmoney\n    # rest of the logic here\n  end\nend\n\ngame = Game.new\ngame.globalSettings(100, 2)\n\nplayer_fabrizio = Player.new(game, \"MyDinasty\", \"Fabrizio\")\nplayer_fabrizio.calculate\n</code></pre>\n\n<p>Let me know if it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "edited": false, "score": 0, "creation_date": 1557571247, "post_id": 41141531, "comment_id": 98815805, "body": "Thanks for your answer to my first StackOverflow question, in December 2016 I just started learning Ruby and It was very hard to understand the concepts of Object Oriented Programming. Thanks!"}], "tags": [], "owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "is_accepted": false, "score": 1, "last_activity_date": 1481715176, "creation_date": 1481715176, "answer_id": 41141531, "question_id": 41141224, "link": "https://stackoverflow.com/questions/41141224/ruby-using-mixins-to-get-a-parent-variable-calculated-in-a-module/41141531#41141531", "title": "Ruby - Using Mixins to get a Parent Variable calculated in a Module", "body": "<p>Short answer - you're setting <code>@totalmoney</code>, which is an <em>instance</em> member variable of <code>new_settings</code>, so <code>player_fabrizio</code> has no access to it. You probably want to set a <em>class</em> member variable of <code>Settings</code>.</p>\n\n<p>In more detail - the module is a bit of a side issue here. By including <code>Variables</code> into <code>Settings</code>, you are effectively pasting the code of <code>Variables</code> into <code>Settings</code>. So what you have is equivalent to this:</p>\n\n<pre><code>class Settings        \n    attr_reader :totalmoney\n\n    def globalSettings(totalmoney, nplayer)\n        @totalmoney = totalmoney\n        return @totalmoney\n    end\nend\n\nclass Player &lt; Settings\n    def initialize(kingdom, king)\n        @playerData = [kingdom, king]\n    end\n    def calculate\n        print @totalmoney\n    end\nend\n\nnew_settings = Settings.new\nnew_settings.globalSettings(100, 2)\n\nplayer_fabrizio = Player.new(\"MyDinasty\", \"Fabrizio\")\nplayer_fabrizio.calculate                # no output\n</code></pre>\n\n<p>By the end of this, you have a <code>Settings</code> object called <code>new_settings</code>, with <code>@totalmoney</code> set to 100; and you have a <code>Player</code> object (which is also a <code>Settings</code>) named <code>player_fabrizio</code>, which doesn't have <code>@totalmoney</code> set at all.</p>\n\n<p>What you may want is the following:</p>\n\n<pre><code>class Settings        \n    def self.globalSettings(totalmoney, nplayer)\n        @@totalmoney = totalmoney\n    end\nend\n\nclass Player &lt; Settings\n    def initialize(kingdom, king)\n        @playerData = [kingdom, king]\n    end\n    def calculate\n        print @@totalmoney\n    end\nend\n\nSettings.globalSettings(100, 2)\n\nplayer_fabrizio = Player.new(\"MyDinasty\", \"Fabrizio\")\nplayer_fabrizio.calculate\n</code></pre>\n\n<p>Note the <code>@@</code> in front of <code>@@totalmoney</code>, denoting it as a <em>class</em> member. I've also made <code>globalsettings</code> a class method, so you don't need a <code>Settings</code> object in hand to change the global settings.</p>\n\n<p>To be honest, though, I'm a bit dubious about inheriting <code>Player</code> from <code>Settings</code> - a player is not a special type of settings! Personally, I'd probably do something more like:</p>\n\n<pre><code>class Settings\n    def self.globalSettings(totalmoney, nplayer)\n        @@totalmoney = totalmoney\n    end\n\n    def self.totalmoney\n      @@totalmoney\n    end\nend\n\nclass Player\n    def initialize(kingdom, king)\n        @playerData = [kingdom, king]\n    end\n    def calculate\n        print Settings.totalmoney\n    end\nend\n\nSettings.globalSettings(100, 2)\n\nplayer_fabrizio = Player.new(\"MyDinasty\", \"Fabrizio\")\nplayer_fabrizio.calculate\n</code></pre>\n"}], "owner": {"reputation": 5535, "user_id": 7295772, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZhWhR.jpg?s=128&g=1", "display_name": "Fabrizio Bertoglio", "link": "https://stackoverflow.com/users/7295772/fabrizio-bertoglio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 211, "favorite_count": 0, "accepted_answer_id": 41141521, "answer_count": 2, "score": 0, "last_activity_date": 1481715176, "creation_date": 1481714187, "last_edit_date": 1495535419, "question_id": 41141224, "link": "https://stackoverflow.com/questions/41141224/ruby-using-mixins-to-get-a-parent-variable-calculated-in-a-module", "title": "Ruby - Using Mixins to get a Parent Variable calculated in a Module", "body": "<p>Thanks a lot for your help.\nI have a Parent, a Child and a Module in two separate files. <code>player_fabrizio</code> is the Instance of the <code>Player</code> class, which is child of <code>Settings</code>. The instance <code>player_fabrizio</code> needs to use the <code>@totalmoney</code> variable of the instance <code>new_settings</code>. </p>\n\n<pre><code>require_relative \"modules_test\"\n\nclass Settings\n    include Variables\n    attr_reader :totalmoney\nend\n\nclass Player &lt; Settings\n    def initialize(kingdom, king)\n        @playerData = [kingdom, king]\n    end\n    def calculate\n        print @totalmoney\n    end\nend\n\nnew_settings = Settings.new\nnew_settings.globalSettings(100, 2)\n\nplayer_fabrizio = Player.new(\"MyDinasty\", \"Fabrizio\")\nplayer_fabrizio.calculate                # no output\n</code></pre>\n\n<p>This is the file modules_test.rb. <code>new_setting</code> uses the method <code>globalSettings</code> of the <code>module Variables</code> to set the <code>@totalmoney</code> variable. </p>\n\n<pre><code>module Variables\n    def globalSettings(totalmoney, nplayer)\n        @totalmoney = totalmoney\n        return @totalmoney\n    end\nend\n</code></pre>\n\n<p>The result of the method <code>player_fabrizio.calculate</code> should be 100, but instead no output is give.\nI searched the forum, but I was not able to find a question. I read a question that had a similar issue, but I was not able to find an answer.</p>\n\n<p>Thanks a lot for you help\nFabrizio</p>\n\n<p>(<a href=\"https://stackoverflow.com/questions/16869832/ruby-mixin-instance-variables-and-methods\">Ruby, mixin instance variables and methods</a>)</p>\n"}, {"tags": ["ruby", "automation", "watir", "watir-webdriver"], "comments": [{"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1481713429, "post_id": 41140887, "comment_id": 69484570, "body": "Do you want to get locate the row using cell?"}, {"owner": {"reputation": 286, "user_id": 6349403, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/ce09db1dc600f8c20326e791aa8e0e6c?s=128&d=identicon&r=PG&f=1", "display_name": "Gopal", "link": "https://stackoverflow.com/users/6349403/gopal"}, "edited": false, "score": 0, "creation_date": 1481713470, "post_id": 41140887, "comment_id": 69484593, "body": "Can you add your coding as well for reference?"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1481725894, "post_id": 41140887, "comment_id": 69492623, "body": "When you say &quot;parent of specific row&quot; are you trying to get the <code>tr</code> element containing the cell or the parent of the <code>tr</code> that contains the cell? The wording suggests the latter, but I would think you want the former?"}], "answers": [{"tags": [], "owner": {"reputation": 15, "user_id": 6076731, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1d82ef942e04295637f65f66df0e6e71?s=128&d=identicon&r=PG&f=1", "display_name": "Pravin", "link": "https://stackoverflow.com/users/6076731/pravin"}, "is_accepted": false, "score": 0, "last_activity_date": 1481713768, "creation_date": 1481713768, "answer_id": 41141114, "question_id": 41140887, "link": "https://stackoverflow.com/questions/41140887/fetch-parent-of-a-specific-row-in-a-table-without-iteration/41141114#41141114", "title": "Fetch parent of a specific row in a table without iteration", "body": "<p>You can use this one:</p>\n\n<p><strong>parent::node()</strong></p>\n\n<p>The below example will selects the parent node of the input tag of Id='email'.\nEx: <strong>//input[@id='email']/parent::*</strong></p>\n\n<p>the above can also be re-written as<br>\n<strong>//input[@id='email']/..</strong></p>\n\n<p><a href=\"http://www.seleniumeasy.com/selenium-tutorials/xpath-tutorial-for-selenium\" rel=\"nofollow noreferrer\">XPath tutorial for Selenium</a></p>\n"}, {"tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 2, "last_activity_date": 1481725701, "creation_date": 1481725701, "answer_id": 41145057, "question_id": 41140887, "link": "https://stackoverflow.com/questions/41140887/fetch-parent-of-a-specific-row-in-a-table-without-iteration/41145057#41145057", "title": "Fetch parent of a specific row in a table without iteration", "body": "<p>There's no need for anything fancy, Watir has an <code>Element#parent</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1487623348, "post_id": 41145070, "comment_id": 71858382, "body": "This is now implemented in Watir 6.2! <a href=\"http://watir.github.io/watir-6-2/\" rel=\"nofollow noreferrer\">watir.github.io/watir-6-2</a> No More XPath!"}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 3, "last_activity_date": 1481726248, "last_edit_date": 1481726248, "creation_date": 1481725731, "answer_id": 41145070, "question_id": 41140887, "link": "https://stackoverflow.com/questions/41140887/fetch-parent-of-a-specific-row-in-a-table-without-iteration/41145070#41145070", "title": "Fetch parent of a specific row in a table without iteration", "body": "<p>You can use the <code>parent</code> method to find the parent of an element. Assuming that you have located a table cell, let's call it <code>cell</code>, you can get its row using <code>parent</code> and then the parent of the row with another call to <code>parent</code>:</p>\n\n<pre><code>cell.parent\n#=&gt; a &lt;tr&gt; element\n\ncell.parent.parent\n#=&gt; the parent of the specific row - a &lt;tbody&gt; element in this case\n</code></pre>\n\n<p>Chaining multiple <code>parent</code> calls can become tedious and difficult to maintain. For example, you would have to call <code>parent</code> 4 times to get the table cell of the \"copy\" link. If you are after an ancestor (ie not immediate parent), you are better off using XPath:</p>\n\n<pre><code>cell.table(xpath: './ancestor::table')\n#=&gt; the &lt;table&gt; element containing the cell\n\nbrowser.link(text: 'copy').tr(xpath: './ancestor::tr')\n#=&gt; the &lt;tr&gt; element containing a copy link\n</code></pre>\n\n<p>Hopefully <a href=\"https://github.com/watir/watir/pull/451\" rel=\"nofollow noreferrer\">Issue 451</a> will be implemented soon, which will remove the need for XPath. You would be able to call:</p>\n\n<pre><code>cell.parent(tag_name: 'table') # equivalent to `cell.table(xpath: './ancestor::table')`\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 3661533, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/0b21cca9ee08f0940e73056f82c50d53?s=128&d=identicon&r=PG&f=1", "display_name": "irs102info", "link": "https://stackoverflow.com/users/3661533/irs102info"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 272, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1481726248, "creation_date": 1481713062, "question_id": 41140887, "link": "https://stackoverflow.com/questions/41140887/fetch-parent-of-a-specific-row-in-a-table-without-iteration", "title": "Fetch parent of a specific row in a table without iteration", "body": "<p>Consider the below table structure contains many rows with multiple column values. I need to identify the parent of specific row, which has to be identified using the cell .</p>\n\n<pre><code>&lt;table class = 'grid'&gt;\n&lt;thead id = 'header'&gt;\n&lt;/thead&gt;\n&lt;tbody&gt;\n&lt;tr&gt;\n &lt;td&gt;\n &lt;span class=\"group\"&gt;\n  &lt;span class=\"group__link\"&gt;&lt;a class=\"disabledlink\"\"&gt;copy&lt;/a&gt;\n  &lt;/span&gt;\n &lt;/span&gt;\n &lt;/td&gt;\n &lt;td class=\"COLUMNNAME\"&gt;ACE&lt;/td&gt;\n &lt;td class=\"COLUMNLONGNAME\"&gt;Adverse Childhood Experiences&lt;/td&gt;\n    &lt;li&gt;Family Medicine&lt;/li&gt;\n    &lt;li&gt;General Practice&lt;/li&gt;\n &lt;/td&gt;\n &lt;td class=\"COLUMNSEXFILTER\"&gt;Both&lt;/td&gt;\n &lt;td class=\"COLUMNAGEFILTERMIN\"&gt;Any&lt;/td&gt;\n &lt;td class=\"COLUMNTYPE\"&gt;Score Only&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;\n &lt;td class=\"nowrap\" showactionitem=\"2\"&gt;\n &lt;span class=\"group\"&gt;\n  &lt;span class=\"group__link\"&gt;&lt;a onclick=\"Check()\" href=\"#\"&gt;copy&lt;/a&gt;\n  &lt;/span&gt;\n &lt;/span&gt;\n &lt;/td&gt;\n &lt;td class=\"COLUMNNAME\"&gt;AM-PAC&lt;/td&gt;\n &lt;td class=\"COLUMNLONGNAME\"&gt;AM-PAC Generic Outpatient Basic Mobility Short Form&lt;/td&gt;\n &lt;td class=\"COLUMNNOTE\"&gt;&lt;/td&gt;\n &lt;td class=\"COLUMNRESTRICTEDYN\"&gt;No&lt;/td&gt;\n &lt;td class=\"COLUMNSPECIALTYID\"&gt;&lt;/td&gt;\n &lt;td class=\"COLUMNSEXFILTER\"&gt;Both&lt;/td&gt;\n &lt;td class=\"COLUMNAGEFILTERMIN\"&gt;Any&lt;/td&gt;\n &lt;td class=\"COLUMNTYPE\"&gt;Score Only&lt;/td&gt;\n&lt;/tr&gt;\n&lt;tr&gt;&lt;/tr&gt;\n&lt;tr&gt;&lt;/tr&gt;\n&lt;/tbody&gt;&lt;/thead&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Likewise this table contains around 100 rows. I did the same using iteration and it is working fine.\nIs it possible to find the parent of specific row without iteration?</p>\n"}, {"tags": ["ruby", "docker", "chef-infra"], "comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1481735748, "post_id": 41140114, "comment_id": 69499177, "body": "Please stop asking the same question over and over."}, {"owner": {"reputation": 1179, "user_id": 7224714, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/O86ux.jpg?s=128&g=1", "display_name": "asur", "link": "https://stackoverflow.com/users/7224714/asur"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1481773547, "post_id": 41140114, "comment_id": 69513913, "body": "@coderanger I am not able t find a solution for this. So I am trying different ways to achieve this. In case you can help me than plz."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1481821331, "post_id": 41140114, "comment_id": 69539430, "body": "You have been told several times that this is not what Docker is for."}], "answers": [{"tags": [], "owner": {"reputation": 1179, "user_id": 7224714, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/O86ux.jpg?s=128&g=1", "display_name": "asur", "link": "https://stackoverflow.com/users/7224714/asur"}, "is_accepted": false, "score": 1, "last_activity_date": 1482738416, "creation_date": 1482738416, "answer_id": 41328061, "question_id": 41140114, "link": "https://stackoverflow.com/questions/41140114/command-under-docker-exec-is-not-reflecting-in-front-end/41328061#41328061", "title": "command under docker_exec is not reflecting in front end", "body": "<p>Finally this has been achieved.</p>\n\n<pre><code>#\n# Cookbook Name:: chef-docker\n# Recipe:: default\n#\n# Copyright 2016, \n#\n# All rights reserved - Do Not Redistribute\n#\ndocker_service 'default' do\n  action [:create, :start]\nend\n# Pull latest image\ndocker_image node['chef-docker']['docker_platform'] do\n  tag 'latest'\n  action :pull\nend\n# Run container \ndocker_container node['chef-docker']['container_name'] do\n  repo node['chef-docker']['container_repo']\n  tag 'latest'\n  command '/bin/bash'\n  port '8080:8080'\n  tty true\n  privileged false\n  action :run\nend\n\nexecute 'Install wget' do\ncommand \"docker exec -i #{node['chef-docker']['container_name']} /bin/bash -c 'yum -y install wget'\"\naction:run\nend\n\nexecute 'pull jenkins.sh script from github' do\ncommand \"docker exec -i #{node['chef-docker']['container_name']} /bin/bash -c 'wget -k -P/tmp/ https://github.com/rahulkumardbit/Products/raw/master/jenkins-centos-7.sh'\"\naction:run\nend\n\nexecute 'Setting permission to Jenkins.sh file' do\ncommand \"docker exec -i #{node['chef-docker']['container_name']} /bin/bash -c 'cd /tmp &amp;&amp; chmod +x jenkins-centos-7.sh'\"\naction:run\nend\n\nexecute 'Jenkins install' do\ncommand \"docker exec -i #{node['chef-docker']['container_name']} /bin/bash -c 'cd /tmp &amp;&amp; ./jenkins-centos-7.sh'\"\naction:run\nend\n</code></pre>\n"}], "owner": {"reputation": 1179, "user_id": 7224714, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/O86ux.jpg?s=128&g=1", "display_name": "asur", "link": "https://stackoverflow.com/users/7224714/asur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1482738416, "creation_date": 1481710888, "question_id": 41140114, "link": "https://stackoverflow.com/questions/41140114/command-under-docker-exec-is-not-reflecting-in-front-end", "title": "command under docker_exec is not reflecting in front end", "body": "<p>I am trying to install java inside a container using below chef-recipe. No errors were observed but when I login into container I could not see java installed into it.I know docker_exec is having issues. Please help</p>\n\n<pre><code>docker_image node['chef-docker']['docker-platform'] do\n  tag 'latest'\n  action :pull\nend\n\ndocker_container node['chef-docker']['container-name'] do\n  repo node['chef-docker']['container-repo']\n  command '/bin/bash'\n  port '1234:1234'\n  tty true\n  action :run\n  end    \n**docker_exec 'install-jenkins' do\n  container 'First'\n  command ['yum -y install java']\n  end**\n</code></pre>\n\n<p>Logs and Commands executed</p>\n\n<pre><code>[root@sonatadocker ~]# **chef-client -r recipe[chef-docker::default]**\nStarting Chef Client, version 12.16.42\nresolving cookbooks for run list: [\"chef-docker::default\"]\nSynchronizing Cookbooks:\n  - chef-docker (0.1.0)\n  - docker (2.9.6)\n  - compat_resource (12.14.7)\n  - openssh (2.1.0)\n  - iptables (1.0.0)\nInstalling Cookbook Gems:\nCompiling Cookbooks...\nConverging 4 resources\nRecipe: chef-docker::default\n  * docker_service[default] action create\n    * docker_installation_script[default] action create\n      * yum_package[curl] action install (up to date)\n      * execute[install docker] action run (up to date)\n       (up to date)\n     (up to date)\n  * docker_service[default] action start\n    * docker_service_manager_sysvinit_rhel[default] action start\n      * directory[/usr/libexec/docker] action create (up to date)\n      * template[/usr/libexec/docker/docker-wait-ready] action create (up to date)\n      * execute[groupadd docker] action run (skipped due to not_if)\n      * link[/usr/bin/docker] action create (skipped due to not_if)\n      * template[/etc/init.d/docker] action create (up to date)\n      * template[/etc/sysconfig/docker] action create (up to date)\n      * service[docker] action enable (up to date)\n      * service[docker] action start (up to date)\n       (up to date)\n     (up to date)\n  * docker_image[centos] action pull (up to date)\n  * docker_container[First] action run\n    - create First\n    -   set container_name              to \"First\" (default value)\n    -   set repo                        to \"centos\"\n    -   set tag                         to \"latest\" (default value)\n    -   set command                     to \"/bin/bash\"\n    .\n    .\n    .\n\n    -   set volumes_binds               to nil (default value)\n    - starting First\n  * docker_exec[install-jenkins] action run\n    *- executing [\"yum -y install java\"] on First*\n\nRunning handlers:\nRunning handlers complete\nChef Client finished, 2/17 resources updated in 11 seconds\n[root@sonatadocker ~]# docker ps -a\nCONTAINER ID        IMAGE               COMMAND                CREATED             STATUS                    PORTS                    NAMES\n4bfcf1f8b52c        centos:latest       \"/bin/bash\"            7 seconds ago       Up 5 seconds              0.0.0.0:1234-&gt;1234/tcp   First\n94621e057a21        jpetazzo/nsenter    \"/bin/sh -c /install   26 hours ago        Exited (0) 26 hours ago                            pensive_goldstine\n[root@sonatadocker ~]# docker exec -it 4bfcf1f8b52c /bin/bash\n[root@4bfcf1f8b52c /]# java -version\nbash: java: command not found\n[root@4bfcf1f8b52c /]#\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "sorting", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 219167, "user_id": 2380830, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/5qiYa.jpg?s=128&g=1", "display_name": "Bathsheba", "link": "https://stackoverflow.com/users/2380830/bathsheba"}, "edited": false, "score": 0, "creation_date": 1481709671, "post_id": 41139621, "comment_id": 69482272, "body": "Are these integer or floating point values?"}, {"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1481709878, "post_id": 41139621, "comment_id": 69482405, "body": "Please add the  actual input and desired output."}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 2, "creation_date": 1481710602, "post_id": 41139621, "comment_id": 69482816, "body": "<code>hash.sort_by { |k,v| v || Float::INFINITY }.to_h</code>"}], "answers": [{"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 2, "last_activity_date": 1481711637, "last_edit_date": 1481711637, "creation_date": 1481710913, "answer_id": 41140124, "question_id": 41139621, "link": "https://stackoverflow.com/questions/41139621/how-to-do-sort-by-value-when-its-nil/41140124#41140124", "title": "how to do sort_by value when it&#39;s nil", "body": "<p>Your question isn't clear, but as I understand, this should help you.</p>\n\n<pre><code>#&gt; hash\n#=&gt; {:b=&gt;nil, :c=&gt;4, :v=&gt;7}\n\nhash.sort_by { |_,value| value || Float::INFINITY }.to_h\n#=&gt; {:c=&gt;4, :v=&gt;7, :b=&gt;nil}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1481712734, "post_id": 41140674, "comment_id": 69484113, "body": "Nice, but you should briefly explain what&#39;s going on."}], "tags": [], "owner": {"reputation": 412, "user_id": 5947585, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mUkEe.jpg?s=128&g=1", "display_name": "Ishtiaque05", "link": "https://stackoverflow.com/users/5947585/ishtiaque05"}, "is_accepted": false, "score": 2, "last_activity_date": 1481712688, "last_edit_date": 1481712688, "creation_date": 1481712442, "answer_id": 41140674, "question_id": 41139621, "link": "https://stackoverflow.com/questions/41139621/how-to-do-sort-by-value-when-its-nil/41140674#41140674", "title": "how to do sort_by value when it&#39;s nil", "body": "<pre><code>[2, 5, 1, nil, 7, 3, nil, nil, 4, 6].sort_by { |i| [i ? 0 : 1, i] }\n#=&gt; [1, 2, 3, 4, 5, 6, 7, nil, nil, nil]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1481713777, "post_id": 41141068, "comment_id": 69484784, "body": "But what if the hash contains a number above 99,999,999? It would appear after the <code>nil</code> values."}], "tags": [], "owner": {"reputation": 70, "user_id": 2790916, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/GkYog.jpg?s=128&g=1", "display_name": "ank", "link": "https://stackoverflow.com/users/2790916/ank"}, "is_accepted": false, "score": 0, "last_activity_date": 1481713628, "creation_date": 1481713628, "answer_id": 41141068, "question_id": 41139621, "link": "https://stackoverflow.com/questions/41139621/how-to-do-sort-by-value-when-its-nil/41141068#41141068", "title": "how to do sort_by value when it&#39;s nil", "body": "<pre><code> hash.sort_by{|k,v| [v ? v : 99999999]}.to_h\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 7283348, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/669978321f5d7dd822a720926e10875b?s=128&d=identicon&r=PG&f=1", "display_name": "qwqw", "link": "https://stackoverflow.com/users/7283348/qwqw"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1361, "favorite_count": 0, "answer_count": 3, "score": -4, "last_activity_date": 1481713628, "creation_date": 1481709422, "question_id": 41139621, "link": "https://stackoverflow.com/questions/41139621/how-to-do-sort-by-value-when-its-nil", "title": "how to do sort_by value when it&#39;s nil", "body": "<p>How to avoid comparision with nil?\nI want the nil value to be the last element when sorting:    </p>\n\n<pre><code>hash.sort_by{|k,v| [v.present? ? v : 99999999]}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481707505, "post_id": 41138915, "comment_id": 69480893, "body": "What do you mean, &quot;split the lines&quot;?"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481707754, "post_id": 41138915, "comment_id": 69481045, "body": "I meant to say while iterating each line just put them into different variable or hash something like that. Basically I am planning to segregate them"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1481707844, "post_id": 41138915, "comment_id": 69481103, "body": "yeaaah, so, while iterating line by line, do put them in separate variables or a hash or something. What&#39;s the question, again? (I&#39;m assuming you already know how to iterate line by line)"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481708851, "post_id": 41138915, "comment_id": 69481742, "body": "Yeah I knew how to iterate line by line, but my query is how to get lines only between particular matched string lines."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1481709104, "post_id": 41138915, "comment_id": 69481894, "body": "Iterate until you see <code>&quot;- Nodes&quot;</code>. From then on, put all lines into a special hash. Do that until you see <code>&quot;- Jakarta&quot;</code>."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481714003, "post_id": 41138915, "comment_id": 69484911, "body": "@SergioTulentsev special hashes were introduced in 2.3 only."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481714551, "post_id": 41138915, "comment_id": 69485202, "body": "@mudasobwa: huh, what special hashes? :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481715041, "post_id": 41138915, "comment_id": 69485490, "body": "@SergioTulentsev your previous comment here stated \u201citerate, blah-blah, then <i>put all lines into <b>a special hash</b></i>.\u201d"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481715322, "post_id": 41138915, "comment_id": 69485663, "body": "@mudasobwa: yes, but there were no special hashes in 2.3. If that was a joke, I didn&#39;t get it :)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481715480, "post_id": 41138915, "comment_id": 69485763, "body": "@SergioTulentsev As we now can see it was an unsuccessful attempt to joke :)"}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481712618, "post_id": 41140623, "comment_id": 69484051, "body": "Perfect use case for the <a href=\"http://nithinbekal.com/posts/ruby-flip-flop/\" rel=\"nofollow noreferrer\">flip-flop operator</a>."}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1481712930, "post_id": 41140623, "comment_id": 69484253, "body": "@Eric Thanks! It worked nice!!"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481713172, "post_id": 41140623, "comment_id": 69484385, "body": "@mudasobwa : Wow. Never heard of it. It includes both extremes, though. See <code>File.foreach(&#39;data.txt&#39;){|line| puts line if line.include?(&#39;Nodes&#39;) .. line.include?(&#39;Jakarta&#39;)}</code>"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481713298, "post_id": 41140623, "comment_id": 69484481, "body": "Your solution nevertheless has <code>.drop(1)</code> call :)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481713443, "post_id": 41140623, "comment_id": 69484580, "body": "Yes. Except with <code>reverse + drop(1) + reverse</code>, I don&#39;t know how to drop the last element."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481713870, "post_id": 41140623, "comment_id": 69484836, "body": "May I ask what\u2019s wrong with <code>drop_while(!nodes).take_while(!jakarta)[1..-1]</code>?"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481714299, "post_id": 41140623, "comment_id": 69485074, "body": "@mudasobwa Could you please stop finding simple answers to my supposedly complex questions? ;)"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481714372, "post_id": 41140623, "comment_id": 69485121, "body": "@EricDuminil Roger that! :)"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 1, "last_activity_date": 1481714086, "last_edit_date": 1481714086, "creation_date": 1481712275, "answer_id": 41140623, "question_id": 41138915, "link": "https://stackoverflow.com/questions/41138915/ruby-split-lines-from-files-while-iterating-each-line/41140623#41140623", "title": "ruby split lines from files while iterating each line", "body": "<p>Here's an interesting solution with Enumerators :</p>\n\n<pre><code>middle_lines = File.open('data.txt') do |file|\n  every_line             = file.each_line\n  every_line_til_Jakarta = every_line.take_while { |line| !line.include?('Jakarta') }\n  every_line_after_nodes = every_line_til_Jakarta.drop_while { |l| !l.include?('Nodes') } # Lines include 'Nodes' line\n  every_line_after_nodes.drop(1) # Remove 'Nodes' line\nend\n\np middle_lines\n# =&gt; [\"  * status of sub string 1\\n\", \"  * status of sub string 2 \\n\"]\n</code></pre>\n\n<p>Or as a one-liner :</p>\n\n<pre><code>middle_lines = File.readlines('data.txt').take_while{|l| !l.include?('Jakarta')}.drop_while{|l| !l.include?('Nodes')}.drop(1)\n</code></pre>\n\n<p>Note : if <code>Nodes</code> isn't found, an empty Array will be returned. If <code>Jakarta</code> isn't found, every line after <code>Nodes</code> will be returned.\nIf you want an empty Array in both cases, you can use this :</p>\n\n<pre><code>module Enumerable\n  def lines_after(substring)\n    drop_while{|l| !l.include?(substring)}.drop(1)\n  end\n\n  def lines_before(substring)\n    reverse.lines_after(substring).reverse\n  end\nend\n</code></pre>\n\n<p>Use it with :</p>\n\n<pre><code>File.readlines('data.txt').lines_after(\"Nodes\").lines_before(\"Jakarta\") # or \nFile.readlines('data.txt').lines_before(\"Jakarta\").lines_after(\"Nodes\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1481712434, "creation_date": 1481712434, "answer_id": 41140672, "question_id": 41138915, "link": "https://stackoverflow.com/questions/41138915/ruby-split-lines-from-files-while-iterating-each-line/41140672#41140672", "title": "ruby split lines from files while iterating each line", "body": "<pre><code>\u03bb = -&gt;(items) { puts \"Items are: #{items}\" }\n\ninput.scan(/(?&lt;=\\A|\\n).*?(?=\\n- |\\z)/m).each do |e|\n  head, *rest = e.split(/\\n+/)\n  \u03bb.(rest) unless rest.empty?\nend\n\n#\u21d2 Items are: [\n#    \"  * status of sub string 1\",\n#    \"  * status of sub string 2 \"\n# ]\n</code></pre>\n\n<p>Here we declare the <code>lambda</code> to handle subitems. In the example above it just spits them out, but it might provide a sophisticated handler as well.</p>\n\n<p>Then we split items and iterate split, as soon as split part contains subitems, the <code>lambda</code> is being called on the result.</p>\n"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 255, "favorite_count": 0, "closed_date": 1481734178, "accepted_answer_id": 41140623, "answer_count": 2, "score": -1, "last_activity_date": 1481714086, "creation_date": 1481707409, "question_id": 41138915, "link": "https://stackoverflow.com/questions/41138915/ruby-split-lines-from-files-while-iterating-each-line", "closed_reason": "Needs details or clarity", "title": "ruby split lines from files while iterating each line", "body": "<p>I have a log fine which contains status of my application related components and when I iterated that log file by each line I need to split all the lines which relies between to lines.</p>\n\n<p>For example I have below log file,</p>\n\n<pre><code>- Component 1 Check\n- Nodes check\n  * status of sub string 1\n  * status of sub string 2 \n- Jakarta component check\n</code></pre>\n\n<p>so in the above example, I need to split the lines between \"<code>- Nodes</code>\" and \"<code>- Jakarta</code>\"</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1481707598, "post_id": 41138777, "comment_id": 69480948, "body": "<code>&#39;...WAITING^H^H^H^H^H^H^H^H^H^H&#39;.delete(&#39;&#47;^H&#39;)</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1481707766, "post_id": 41138777, "comment_id": 69481052, "body": "@AlexGolubenko : No. it deletes too much : <code>&#39;...WAIHTING^H^H^H^H^H^H^H^H^H^H&#39;.delete(&#39;&#47;^H&#39;)</code> -&gt; <code>&quot;...WAITING&quot;</code>"}, {"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481707936, "post_id": 41138777, "comment_id": 69481158, "body": "@EricDuminil your right"}], "answers": [{"comments": [{"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 1, "creation_date": 1481708792, "post_id": 41138966, "comment_id": 69481703, "body": "Its <code>&quot;^H&quot;</code> not backspaces and this is what I found when I cat that file with <code>-e</code> options. Its hidden character and even if I put <code>^H</code> in gsub its not working. I think need to get the ASCII value of this hidden character and delete it. Is there way to get the ASCII value of this hidden character.   Also the characters <code>&quot;...WAITING&quot;</code> also hidden one and not visible it normally and was able to view using <code>cat -e</code> only."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 1, "creation_date": 1481708893, "post_id": 41138966, "comment_id": 69481766, "body": "Okay. Could you please update your question with the result of <code>your_string_with_hidden_chars.each_byte.to_a</code>?"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 1, "creation_date": 1481709077, "post_id": 41138966, "comment_id": 69481876, "body": "Here is the output,  <code>irb(main):001:0&gt; str=&quot;...WAITING^H^H^H^H^H^H^H^H^H^H[   OK   ]&quot; =&gt; &quot;...WAITING^H^H^H^H^H^H^H^H^H^H[   OK   ]&quot; irb(main):002:0&gt; str.each_byte.to_a =&gt; [46, 46, 46, 87, 65, 73, 84, 73, 78, 71, 94, 72, 94, 72, 94, 72, 94, 72, 94, 72, 94, 72, 94, 72, 94, 72, 94, 72, 94, 72, 91, 32, 32, 32, 79, 75, 32, 32, 32, 93] irb(main):003:0&gt;</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1481709463, "post_id": 41138966, "comment_id": 69482133, "body": "You copy-pasted this string from the log file into your irb, right? That&#39;s too late, it already removed the hidden chars. <code>gsub</code> works fine with the bytes you sent me. You could copy the log file, only keep this &quot;WAITING&quot; line and read it with : <code>File.open(&quot;your.log&quot;).each_byte.to_a</code>"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1481709772, "post_id": 41138966, "comment_id": 69482344, "body": "I did copy past from <code>cat -e</code> output of log file, since there only I was to see these hidden characters. Do I need to copy past only the line that are visible normally?"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1481709995, "post_id": 41138966, "comment_id": 69482473, "body": "Here are the details,  From vi editor I was able to see below lines,  <code>...WAITING^H^H^H^H^H^H^H^H^H^H[   OK   ] ^[[?12l^[[?25hDone!</code>  In irb mode, <code>irb(main):001:0&gt; File.open(&quot;&#47;tmp&#47;testfile&quot;).each_byte.to_a =&gt; [46, 46, 46, 87, 65, 73, 84, 73, 78, 71, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 91, 32, 32, 32, 79, 75, 32, 32, 32, 93, 10, 27, 91, 63, 49, 50, 108, 27, 91, 63, 50, 53, 104, 68, 111, 110, 101, 33, 10, 10] irb(main):002:0&gt;</code>  in cat, <code># cat &#47;tmp&#47;testfile [   OK   ] Done! #</code>  in cat -e, <code># cat -e &#47;tmp&#47;sadfsadf ...WAITING^H^H^H^H^H^H^H^H^H^H[   OK   ]$ ^[[?12l^[[?25hDone!$ $ #</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 2, "creation_date": 1481710382, "post_id": 41138966, "comment_id": 69482692, "body": "Thanks. You see all the <code>8</code>? Those are backspaces. The <code>delete(&quot;\\b&quot;)</code> should work fine, as long as you work on the data that is directly coming from your file. Not a string that has been copied from <code>cat</code> or <code>vim</code>."}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1481711228, "post_id": 41138966, "comment_id": 69483162, "body": "hmm its not working. I just checked on source code its <code>\\c</code> .  <code>&quot;${txtdim}${txtflsh}...WAITING${txtrst}\\c&quot;</code>"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1481711435, "post_id": 41138966, "comment_id": 69483316, "body": "I&#39;m not sure what <code>\\c</code> means. It could (<a href=\"http://stackoverflow.com/questions/19743964/where-can-i-find-string-escape-sequences-in-the-ruby-documentation\" title=\"where can i find string escape sequences in the ruby documentation\">stackoverflow.com/questions/19743964/&hellip;</a>) mean &quot;don&#39;t output the trailing newline&quot;. I suspect all the &quot;\\b&quot;s come from <code>txtrst</code>"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1481713635, "post_id": 41138966, "comment_id": 69484704, "body": "In that link which you provide below is the catch, <code>\\cx or \\C-x    control character, where x is an ASCII printable character</code>  basically \\c will remove newline character and combine next line output with previous line"}, {"owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "edited": false, "score": 0, "creation_date": 1481722013, "post_id": 41138966, "comment_id": 69490003, "body": "Ok it worked with <code>delete(&quot;\\b&quot;)</code>. Looks like I was trying wrongly earlier. Thank you so much!"}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": true, "score": 7, "last_activity_date": 1481710834, "last_edit_date": 1481710834, "creation_date": 1481707592, "answer_id": 41138966, "question_id": 41138777, "link": "https://stackoverflow.com/questions/41138777/ruby-remove-ctrl-h-characters/41138966#41138966", "title": "ruby remove ctrl-H characters", "body": "<h1>Theory</h1>\n\n<h3>Backspaces ?</h3>\n\n<p>If the <code>ctrl-H</code> characters are backspaces :</p>\n\n<pre><code>puts \"foo\\b\\b\\bbar\"\n#=&gt; \"bar\"\n\nputs \"foo\\b\\b\\bbar\".delete(\"\\b\")\n#=&gt; \"foobar\"\n</code></pre>\n\n<p>NOTE: <code>delete</code> is fine here, because we use it with just one character.</p>\n\n<h3>Or \"^H\" substring ?</h3>\n\n<p>If the <code>ctrl-H</code> characters are <code>\"^H\"</code> :</p>\n\n<pre><code>puts \"foo^H^H^Hbar\".gsub(/\\^H/,'')\n#=&gt; \"foobar\"\n</code></pre>\n\n<p>NOTE: <code>delete</code> wouldn't work here, because it would also remove every <code>H</code> character from the strings, not just the substring <code>^H</code>. Also, using <code>delete(\"^H\")</code> means <code>delete every character that isn't a 'H'</code>. So :</p>\n\n<pre><code>\"foo^H^H^Hbar\".delete(\"^H\") =&gt; \"HHH\"\n</code></pre>\n\n<h1>Test</h1>\n\n<p>With :</p>\n\n<pre><code>bytes = [46, 46, 46, 87, 65, 73, 84, 73, 78, 71, 8, 8, 8, 8, 8, 8, 8, 8, 8, 8, 91, 32, 32, 32, 79, 75, 32, 32, 32, 93, 10, 27, 91, 63, 49, 50, 108, 27, 91, 63, 50, 53, 104, 68, 111, 110, 101, 33, 10, 10]\n</code></pre>\n\n<p>We get :</p>\n\n<pre><code>string = bytes.map(&amp;:chr).join\nstring # =&gt; \"...WAITING\\b\\b\\b\\b\\b\\b\\b\\b\\b\\b[   OK   ]\\n\\e[?12l\\e[?25hDone!\\n\\n\"\nputs string\n# [   OK   ]\n# Done!\n#\n</code></pre>\n\n<p>Bytes equal to <code>8</code> are backspaces, and they delete <code>WAITING</code> when displayed with <code>puts</code>.\nThe first alternative should work fine :</p>\n\n<pre><code>puts string.delete(\"\\b\")\n# ...WAITING[   OK   ]\n# Done!\n</code></pre>\n\n<p>NOTE: This only works on the original data, in which backspaces are byte <code>8</code>. Any copy-paste, use of <code>cat</code>, <code>|</code> or text editor might convert those to <code>\"^H\"</code> or other string.</p>\n"}], "owner": {"reputation": 759, "user_id": 2077644, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/49dde1608911b1724d850a8eb6f408d4?s=128&d=identicon&r=PG", "display_name": "Karthi1234", "link": "https://stackoverflow.com/users/2077644/karthi1234"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 1, "accepted_answer_id": 41138966, "answer_count": 1, "score": 1, "last_activity_date": 1481710834, "creation_date": 1481706971, "question_id": 41138777, "link": "https://stackoverflow.com/questions/41138777/ruby-remove-ctrl-h-characters", "title": "ruby remove ctrl-H characters", "body": "<p>On one of my log file I have the below hidden values and color ASCII codes,</p>\n\n<pre><code>...WAITING^H^H^H^H^H^H^H^H^H^H\n</code></pre>\n\n<p>I was able to remove the color ASCII codes using below method,</p>\n\n<pre><code>gsub(/\\e\\[(\\d+)(;(\\d+))?m/, '')\n</code></pre>\n\n<p>but am still unable to remove that mentioned above hidden characters. Is there any way to get them rid of?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1481706517, "post_id": 41138538, "comment_id": 69480325, "body": "url-escape special characters in the parameter: <code>http:&#47;&#47;localhost:3000&#47;api&#47;v1&#47;http%3A%2F%2Fstackoverflow.com%&zwnj;&#8203;2F</code>. If this isn&#39;t enough, escape the dot too."}, {"owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481707071, "post_id": 41138538, "comment_id": 69480661, "body": "But encoding will be done on the params.......The Param I am getting is already splitted......It is not a complete url"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481707112, "post_id": 41138538, "comment_id": 69480682, "body": "Nah, encode it <b>before</b> you send the request. In the api client. Not the api server, of course."}, {"owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481707393, "post_id": 41138538, "comment_id": 69480836, "body": "Thanks but Oskar Laska&#39;s answer worked. Thanks alot"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1481708529, "post_id": 41138538, "comment_id": 69481517, "body": "But why? If you want to create a method with takes a url param you would URI encode it and pass it in the query string. What you are creating is just a very greedy catchall that will mask 404 errors."}, {"owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "edited": false, "score": 0, "creation_date": 1481709114, "post_id": 41138538, "comment_id": 69481896, "body": "Ok. But how can I encode it before sending the request........User will write a random url and that will be passed in params then, how can I encode it before taht"}], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 6787940, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DyUT8.jpg?s=128&g=1", "display_name": "Oskar Laska", "link": "https://stackoverflow.com/users/6787940/oskar-laska"}, "is_accepted": true, "score": 0, "last_activity_date": 1481709412, "last_edit_date": 1481709412, "creation_date": 1481707236, "answer_id": 41138864, "question_id": 41138538, "link": "https://stackoverflow.com/questions/41138538/dynamic-urls-in-rails-params/41138864#41138864", "title": "dynamic urls in rails params", "body": "<p>Try changing <code>defaults</code> to <code>constraints</code>:</p>\n\n<pre><code>Rails.application.routes.draw do\n    namespace :api, constraints: { format: :json } do\n      namespace :v1 do # resources :orders\n        get \"*link\" =&gt; \"application#parse_link\"\n      end\n    end\nend\n</code></pre>\n\n<p>Notice: it will constraint format to be json, not only set it as default. Rails treated <code>.com</code> at end of your URL as response type.</p>\n"}], "owner": {"reputation": 515, "user_id": 4118252, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/a873f0d22f24426762ccf352aa933e6e?s=128&d=identicon&r=PG&f=1", "display_name": "Inzamam Tahir", "link": "https://stackoverflow.com/users/4118252/inzamam-tahir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 570, "favorite_count": 0, "accepted_answer_id": 41138864, "answer_count": 1, "score": 0, "last_activity_date": 1481709412, "creation_date": 1481706239, "last_edit_date": 1481707154, "question_id": 41138538, "link": "https://stackoverflow.com/questions/41138538/dynamic-urls-in-rails-params", "title": "dynamic urls in rails params", "body": "<p>I am practicing to make API in rails. The api has currently only one end point which receives a url via get request. My routes are:</p>\n\n<pre><code>Rails.application.routes.draw do\n  # For details on the DSL available within this file, see http://guides.rubyonrails.org/routing.html\n    namespace :api, defaults: { format: :json } do\n      namespace :v1 do # resources :orders\n        get \"*link\" =&gt; \"application#parse_link\"\n      end\n    end\nend\n</code></pre>\n\n<p>My Application Controller Code:</p>\n\n<pre><code>require 'open-uri'\n\nclass Api::V1::ApplicationController &lt; ActionController::Base\n    respond_to :json\n  # protect_from_forgery with: :exception\n\n  def parse_link\n\n        begin\n\n            url = URI.parse(params[:link])\n            doc = Nokogiri::HTML(open(url).read)\n\n        rescue\n            redirect_to 'http://localhost:3000/'\n        end\n\n  end\nend\n</code></pre>\n\n<p>When I send urls like this: </p>\n\n<pre><code>http://localhost:3000/api/v1/http://stackoverflow.com/questions/41138538/dynamic-urls-in-rails-params\n</code></pre>\n\n<p>It works fine</p>\n\n<p>But the following type of urls does not work:</p>\n\n<pre><code>http://localhost:3000/api/v1/http://stackoverflow.com/\n</code></pre>\n\n<p>In this case, it splits the link and give me these params</p>\n\n<pre><code>&lt;ActionController::Parameters {\"link\"=&gt;\"http:/stackoverflow\", \"format\"=&gt;\"com\"} permitted: true&gt;\n</code></pre>\n\n<p>As you can see it splits the given url and save half of it in link param and the \".com\" part in format params.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481713400, "post_id": 41137611, "comment_id": 69484553, "body": "Is the document badly malformed? Have you tried validating it?"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1481739874, "post_id": 41137611, "comment_id": 69501412, "body": "it&#39;s possible, due to include ordering. that you&#39;re not actually calling Capybaras <code>within</code> there, and are instead just creating the RSpec <code>be_within</code> matcher (which is aliased as <code>within</code>), which ignores the block passed to it, so you&#39;re not actually running the expectation.  You can verify that by calling <code>page.within</code> instead of just <code>within</code>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1481838351, "post_id": 41137611, "comment_id": 69548210, "body": "show the html that is on the page that contains the expected text? Is the content actually visible? By default Capybara only finds visible elements and contents"}], "owner": {"reputation": 8109, "user_id": 153574, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/240fded6e397da0150db90ce28b91ac0?s=128&d=identicon&r=PG", "display_name": "bjelli", "link": "https://stackoverflow.com/users/153574/bjelli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 509, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1481897057, "creation_date": 1481702885, "last_edit_date": 1481897057, "question_id": 41137611, "link": "https://stackoverflow.com/questions/41137611/rspec-capybara-expectpage-and-page-within-cannot-see-loaded-page", "title": "rspec + capybara: expect(page) and page.within() cannot see loaded page?", "body": "<p>I'm using rspec 3.4.3 and capybara 2.7 in a feature-spec.</p>\n\n<p>when I run this test:</p>\n\n<pre><code> visit course_path( @course )\n expect(page).to have_content('short_title')\n</code></pre>\n\n<p>it turns red:</p>\n\n<pre><code> Failure/Error: expect(page).to have_content('short_title')\n Capybara::ElementNotFound:\n   Unable to find xpath \"/html\"\n</code></pre>\n\n<p>when I change the test to </p>\n\n<pre><code> visit course_path( @course )\n within('body') do\n   expect(page).to have_content('short_title')\n end\n</code></pre>\n\n<p>the test turns green, but as Thomas noted below, this is only because <code>within</code> is not doing any work.</p>\n\n<p>when I use</p>\n\n<pre><code> visit course_path( @course )\n page.within('body') do\n   expect(page).to have_content('short_title')\n end \n</code></pre>\n\n<p>it turns red again with</p>\n\n<pre><code> Capybara::ElementNotFound:\n   Unable to find css \"body\"\n</code></pre>\n\n<p>If I output page.html just after the visit  I can see\nthat the page is acutally there, has valid html and of course\ncontains a body and the text. everything is visible, no \nfancyfull javascript or css at all.</p>\n\n<p>what is happening here?</p>\n"}, {"tags": ["ruby", "rubygems", "rbenv", "pry"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1481698039, "post_id": 41136301, "comment_id": 69476097, "body": "What is the reason of using gems without native extensions? Nothing will work nevertheless. You should install a compiler and only then <code>gem pristine</code>, and make sure that all native extensions are finally built successfully."}, {"owner": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 1, "creation_date": 1481700859, "post_id": 41136301, "comment_id": 69477393, "body": "Try <code>gem uninstall bundler</code> then <code>gem install bundler</code>"}, {"owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "reply_to_user": {"reputation": 921, "user_id": 3172183, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dscm0.png?s=128&g=1", "display_name": "amrdruid", "link": "https://stackoverflow.com/users/3172183/amrdruid"}, "edited": false, "score": 0, "creation_date": 1481702407, "post_id": 41136301, "comment_id": 69478148, "body": "@Druid I tried that. The same result."}], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 6100005, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Ci6HLXLJSCQ/AAAAAAAAAAI/AAAAAAAADCw/Z70ZfBgThKk/photo.jpg?sz=128", "display_name": "Max Coplan", "link": "https://stackoverflow.com/users/6100005/max-coplan"}, "edited": false, "score": 0, "creation_date": 1613526856, "post_id": 44488576, "comment_id": 117100085, "body": "I get   <code>bash \u276f gem uninstall bundler Gem bundler-2.2.9 cannot be uninstalled because it is a default gem </code>"}], "tags": [], "owner": {"reputation": 158, "user_id": 3965443, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de8112e8991591c5703b2ecb890c36a3?s=128&d=identicon&r=PG&f=1", "display_name": "Hassan Ahmed", "link": "https://stackoverflow.com/users/3965443/hassan-ahmed"}, "is_accepted": false, "score": 3, "last_activity_date": 1497213687, "creation_date": 1497213687, "answer_id": 44488576, "question_id": 41136301, "link": "https://stackoverflow.com/questions/41136301/why-i-got-many-ignoring-messages-when-i-run-pry/44488576#44488576", "title": "Why I got many ignoring messages when I run pry?", "body": "<p>Had this issue today after I switched ruby from 2.3 to 2.4 via RVM</p>\n\n<p>I solved this by</p>\n\n<pre><code>gem uninstall bundler\ngem install bundler\ngem pristine --all\n</code></pre>\n"}], "owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1392, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1497213687, "creation_date": 1481697567, "question_id": 41136301, "link": "https://stackoverflow.com/questions/41136301/why-i-got-many-ignoring-messages-when-i-run-pry", "title": "Why I got many ignoring messages when I run pry?", "body": "<p>I am using rbenv and have installed a 2.3.1 version:</p>\n\n<pre><code>\u279c  ~ rbenv versions\n  system\n* 2.3.1 (set by /Users/s_zhang/.rbenv/version)\n</code></pre>\n\n<p>When I run <code>pry</code> in my terminal, I got:</p>\n\n<pre><code>\u279c  ~ pry\nIgnoring bcrypt-3.1.11 because its extensions are not built.  Try: gem pristine bcrypt --version 3.1.11\nIgnoring bcrypt-3.1.10 because its extensions are not built.  Try: gem pristine bcrypt --version 3.1.10\nIgnoring binding_of_caller-0.7.2 because its extensions are not built.  Try: gem pristine binding_of_caller --version 0.7.2\nIgnoring byebug-9.0.6 because its extensions are not built.  Try: gem pristine byebug --version 9.0.6\nIgnoring byebug-9.0.5 because its extensions are not built.  Try: gem pristine byebug --version 9.0.5\nIgnoring curb-0.9.3 because its extensions are not built.  Try: gem pristine curb --version 0.9.3\nIgnoring debug_inspector-0.0.2 because its extensions are not built.  Try: gem pristine debug_inspector --version 0.0.2\nIgnoring bcrypt-3.1.11 because its extensions are not built.  Try: gem pristine bcrypt --version 3.1.11\nIgnoring bcrypt-3.1.10 because its extensions are not built.  Try: gem pristine bcrypt --version 3.1.10\nIgnoring binding_of_caller-0.7.2 because its extensions are not built.  Try: gem pristine binding_of_caller --version 0.7.2\nIgnoring byebug-9.0.6 because its extensions are not built.  Try: gem pristine byebug --version 9.0.6\nIgnoring byebug-9.0.5 because its extensions are not built.  Try: gem pristine byebug --version 9.0.5\nIgnoring curb-0.9.3 because its extensions are not built.  Try: gem pristine curb --version 0.9.3\nIgnoring debug_inspector-0.0.2 because its extensions are not built.  Try: gem pristine debug_inspector --version 0.0.2\nIgnoring ffi-1.9.14 because its extensions are not built.  Try: gem pristine ffi --version 1.9.14\nIgnoring hitimes-1.2.4 because its extensions are not built.  Try: gem pristine hitimes --version 1.2.4\nIgnoring mysql2-0.4.4 because its extensions are not built.  Try: gem pristine mysql2 --version 0.4.4\nIgnoring mysql2-0.3.20 because its extensions are not built.  Try: gem pristine mysql2 --version 0.3.20\nIgnoring nio4r-1.2.1 because its extensions are not built.  Try: gem pristine nio4r --version 1.2.1\nIgnoring nokogiri-1.6.8.1 because its extensions are not built.  Try: gem pristine nokogiri --version 1.6.8.1\nIgnoring nokogiri-1.6.8 because its extensions are not built.  Try: gem pristine nokogiri --version 1.6.8\nIgnoring nokogiri-1.6.7 because its extensions are not built.  Try: gem pristine nokogiri --version 1.6.7\nIgnoring oj-2.17.5 because its extensions are not built.  Try: gem pristine oj --version 2.17.5\nIgnoring puma-3.6.2 because its extensions are not built.  Try: gem pristine puma --version 3.6.2\nIgnoring puma-3.6.0 because its extensions are not built.  Try: gem pristine puma --version 3.6.0\nIgnoring puma-2.16.0 because its extensions are not built.  Try: gem pristine puma --version 2.16.0\nIgnoring puma-2.15.3 because its extensions are not built.  Try: gem pristine puma --version 2.15.3\nIgnoring ruby-ll-2.1.2 because its extensions are not built.  Try: gem pristine ruby-ll --version 2.1.2\nIgnoring sqlite3-1.3.12 because its extensions are not built.  Try: gem pristine sqlite3 --version 1.3.12\nIgnoring therubyracer-0.12.2 because its extensions are not built.  Try: gem pristine therubyracer --version 0.12.2\nIgnoring unf_ext-0.0.7.2 because its extensions are not built.  Try: gem pristine unf_ext --version 0.0.7.2\nIgnoring websocket-driver-0.6.4 because its extensions are not built.  Try: gem pristine websocket-driver --version 0.6.4\nIgnoring yajl-ruby-1.2.1 because its extensions are not built.  Try: gem pristine yajl-ruby --version 1.2.1\n[1] pry(main)&gt;\n</code></pre>\n\n<p>My gem list:</p>\n\n<pre><code>\u279c  ~ gem list\n\n*** LOCAL GEMS ***\n\nansi (1.5.0)\nast (2.3.0)\nbcrypt (3.1.11)\nbigdecimal (1.2.8)\nbinding_of_caller (0.7.2)\nbyebug (9.0.6)\ncoderay (1.1.1)\ncurb (0.9.3)\ndebug_inspector (0.0.2)\ndid_you_mean (1.0.0)\nffi (1.9.14)\nhitimes (1.2.4)\nio-console (0.4.5)\njson (1.8.3)\nlibv8 (3.16.14.17 x86_64-darwin-16)\nmethod_source (0.8.2)\nmini_portile2 (2.1.0)\nminitest (5.8.3)\nmysql2 (0.4.5)\nnet-telnet (0.1.1)\nnio4r (1.2.1)\nnokogiri (1.6.8.1)\noj (2.18.0)\npower_assert (0.2.6)\npry (0.10.4)\npry-remote (0.1.8)\npsych (2.0.17)\npuma (3.6.2)\nrake (10.4.2)\nrdoc (4.2.1)\nref (2.0.0)\nruby-ll (2.1.2)\nslop (3.6.0)\nsqlite3 (1.3.12)\ntest-unit (3.1.5)\ntherubyracer (0.12.2)\nunf_ext (0.0.7.2)\nwebsocket-driver (0.6.4)\nwebsocket-extensions (0.1.2)\nyajl-ruby (1.3.0)\n</code></pre>\n\n<p>I have find a way like <code>gem pristine --all</code>. But not work for me.</p>\n"}, {"tags": ["html", "css", "ruby", "button", "mobile"], "comments": [{"owner": {"reputation": 17588, "user_id": 652669, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/sKUTK.jpg?s=128&g=1", "display_name": "GG.", "link": "https://stackoverflow.com/users/652669/gg"}, "edited": false, "score": 0, "creation_date": 1481697154, "post_id": 41136172, "comment_id": 69475770, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/3885018/active-pseudo-class-doesnt-work-in-mobile-safari\">:active pseudo-class doesn&#39;t work in mobile safari</a>"}, {"owner": {"reputation": 30794, "user_id": 1906356, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-nOR-lGSM4OQ/AAAAAAAAAAI/AAAAAAAAAKc/JK3VzYOOB-I/photo.jpg?sz=128", "display_name": "madalinivascu", "link": "https://stackoverflow.com/users/1906356/madalinivascu"}, "edited": false, "score": 0, "creation_date": 1481697245, "post_id": 41136172, "comment_id": 69475807, "body": "how about <code>:visited</code>"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1481697946, "post_id": 41136194, "comment_id": 69476065, "body": "Do you know how I could integrate with ruby? Updated question. Trying to figure it out on my own right now, but if u know it I&#39;d appreciate it :)"}, {"owner": {"reputation": 57402, "user_id": 5496973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JH9iD.jpg?s=128&g=1", "display_name": "Suren Srapyan", "link": "https://stackoverflow.com/users/5496973/suren-srapyan"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1481698022, "post_id": 41136194, "comment_id": 69476093, "body": "@AnthonyGalli.com actually you don&#39;t need to change your question from html/js to ruby. You had to open a new question. What about Ruby, sorry I don&#39;t know Ruby"}], "tags": [], "owner": {"reputation": 57402, "user_id": 5496973, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JH9iD.jpg?s=128&g=1", "display_name": "Suren Srapyan", "link": "https://stackoverflow.com/users/5496973/suren-srapyan"}, "is_accepted": true, "score": 8, "last_activity_date": 1481697118, "creation_date": 1481697118, "answer_id": 41136194, "question_id": 41136172, "link": "https://stackoverflow.com/questions/41136172/make-button-active-on-mobile/41136194#41136194", "title": "Make button active on mobile?", "body": "<p>You need to use <code>ontouchstart</code> event on the button. Simply use</p>\n\n<p><code>ontouchstart=\"\"</code> on your element and <code>:active</code> will work.</p>\n\n<pre><code>&lt;button ontouchstart=\"\"&gt;An Example&lt;/button&gt;\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1845, "favorite_count": 0, "accepted_answer_id": 41136194, "answer_count": 1, "score": 1, "last_activity_date": 1481698362, "creation_date": 1481697023, "last_edit_date": 1481698362, "question_id": 41136172, "link": "https://stackoverflow.com/questions/41136172/make-button-active-on-mobile", "title": "Make button active on mobile?", "body": "<p>When a user clicks a button...</p>\n\n<pre><code>#featured-challenge-button {\n  background-color: #446CB3;\n  box-shadow: 3px 3px 5px black;\n  &amp;:hover {\n    background-color: #ccac00;\n    box-shadow: none; \n  }\n  &amp;:active {\n    background-color: #ccac00;\n    box-shadow: none; \n  }\n  &amp;:focus {\n    background-color: #ccac00;\n    box-shadow: none; \n  }\n}\n</code></pre>\n\n<p>Button Examples:</p>\n\n<pre><code># link_to\n&lt;%= link_to next_challenge_path, class: \"btn\", id: \"featured-challenge-button\" do %&gt;\n  &lt;span class=\"glyphicon glyphicon-plus\"&gt;&lt;/span&gt;\n&lt;% end %&gt;\n\n# submit\n&lt;%= button_tag(type: 'submit', class: \"btn\", id: \"featured-challenge-button\")  do %&gt;\n  Save\n&lt;% end %&gt;\n</code></pre>\n\n<p>how can I show that it is immediately pressed?</p>\n\n<p>On the browser it works, but on my iPhone there is no effect on the button upon being clicked. The only indication that the button was clicked is the loading bar on the top of the screen.</p>\n\n<p>Am I using <code>:active</code> wrong or is there another CSS technique or is there a javascript solution?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "testing", "activerecord"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1481693417, "post_id": 41135445, "comment_id": 69474433, "body": "Can you post the <code>line_item_params</code> method?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1481695594, "post_id": 41135445, "comment_id": 69475217, "body": "Are you able to update the line item in your application?"}], "answers": [{"comments": [{"owner": {"reputation": 109, "user_id": 6253493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8BMYp.jpg?s=128&g=1", "display_name": "jamesemcc", "link": "https://stackoverflow.com/users/6253493/jamesemcc"}, "edited": false, "score": 0, "creation_date": 1481781673, "post_id": 41136161, "comment_id": 69516202, "body": "Awesome, thanks unkmas! I think it stemmed from accidentally writing <code>product:reference</code> instead of <code>product:references</code> when I generated the LineItem."}], "tags": [], "owner": {"reputation": 888, "user_id": 3355934, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/dd10fc1565fa16a700c6e50d478b07ff?s=128&d=identicon&r=PG", "display_name": "unkmas", "link": "https://stackoverflow.com/users/3355934/unkmas"}, "is_accepted": true, "score": 1, "last_activity_date": 1481696987, "creation_date": 1481696987, "answer_id": 41136161, "question_id": 41135445, "link": "https://stackoverflow.com/questions/41135445/rails-5-failing-test-activerecordassociationtypemismatch/41136161#41136161", "title": "Rails 5 Failing Test ActiveRecord::AssociationTypeMismatch", "body": "<p>Ok. There are problems not only in your test, but in app.</p>\n\n<ol>\n<li><a href=\"https://github.com/jamesemcc/depot/blob/master/app/controllers/line_items_controller.rb#L75\" rel=\"nofollow noreferrer\">https://github.com/jamesemcc/depot/blob/master/app/controllers/line_items_controller.rb#L75</a> You should permit <code>product_id</code>, not <code>product</code> here. You cannot pass <code>Product</code> object from browser.</li>\n<li>You should pass <code>product_id</code> from view and from test</li>\n</ol>\n\n<p>Good Luck!</p>\n"}], "owner": {"reputation": 109, "user_id": 6253493, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/8BMYp.jpg?s=128&g=1", "display_name": "jamesemcc", "link": "https://stackoverflow.com/users/6253493/jamesemcc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 354, "favorite_count": 0, "accepted_answer_id": 41136161, "answer_count": 1, "score": 0, "last_activity_date": 1481696987, "creation_date": 1481693239, "question_id": 41135445, "link": "https://stackoverflow.com/questions/41135445/rails-5-failing-test-activerecordassociationtypemismatch", "title": "Rails 5 Failing Test ActiveRecord::AssociationTypeMismatch", "body": "<p>I'm currently working through <em>Agile Development with Rails 5</em> and have run into an issue with my testing. Namely, there is an association mismatch going on where it expects the Product but gets a String. I've tried fixing the line in my line_items_controller_test.rb from @line_item.product to @line_item.product_id to no avail and have poked around as much as I know how.</p>\n\n<p>Here is my test file line_items_controller_test.rb</p>\n\n<pre><code>  test \"should update line_item\" do\n    patch line_item_url(@line_item), params: { line_item: { cart_id: @line_item.cart_id, product: @line_item.product } }\n    assert_redirected_to line_item_url(@line_item)\n  end\n</code></pre>\n\n<p>and my test failure from the terminal</p>\n\n<pre><code>Error:\nLineItemsControllerTest#test_should_update_line_item:\nActiveRecord::AssociationTypeMismatch: Product(#70143083725900) expected, got String(#70143078473840)\n    app/controllers/line_items_controller.rb:47:in `block in update'\n    app/controllers/line_items_controller.rb:46:in `update'\n    test/controllers/line_items_controller_test.rb:40:in `block in &lt;class:LineItemsControllerTest&gt;'\n\n\nbin/rails test test/controllers/line_items_controller_test.rb:39\n</code></pre>\n\n<p>and here is the controller itself where it mentions 47 and 46 beginning with respond_to</p>\n\n<pre><code>  def update\n    respond_to do |format|\n      if @line_item.update(line_item_params)\n        format.html { redirect_to @line_item, notice: 'Line item was successfully updated.' }\n        format.json { render :show, status: :ok, location: @line_item }\n      else\n        format.html { render :edit }\n        format.json { render json: @line_item.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>Let me know if there's any more info you need. You can also check my repo at <a href=\"https://github.com/jamesemcc/depot\" rel=\"nofollow noreferrer\">https://github.com/jamesemcc/depot</a></p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1481693789, "post_id": 41135470, "comment_id": 69474575, "body": "Thanks for the answer. So how can I code when I need the external_todo_service.create doesn&#39;t take <code>description</code>. I&#39;d love to make it optionally. In the example, description doesn&#39;t belong to <code>todo</code> object."}, {"owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "edited": false, "score": 0, "creation_date": 1481693837, "post_id": 41135470, "comment_id": 69474592, "body": "<code>Todo::Add.call(OBJECT, description: &#39;some detail for todo&#39;)</code>"}], "tags": [], "owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "is_accepted": false, "score": 0, "last_activity_date": 1481693348, "creation_date": 1481693348, "answer_id": 41135470, "question_id": 41135358, "link": "https://stackoverflow.com/questions/41135358/how-to-insert-additional-columns-within-method-in-ruby/41135470#41135470", "title": "How to insert additional columns within method in Ruby", "body": "<p>Given your code, the most logical would be to extend the <code>Todo</code> class with a new attribute (description) and use it in the <code>call</code> implementation. Also, i wouldnt store <code>todo</code> instance attributes (like <code>todo_name</code>) in the beginning:</p>\n\n<pre><code>  def initialize(todo)\n    @todo = todo\n  end\n\n def call\n    detail = external_todo_service.create(\n      name: @todo.name,\n      description: @todo.description\n    )\n    ...\n  end\n</code></pre>\n\n<p>Your question is very broad though. It really depends on how your client code will use the functionality, how the third party service works, etc.pp.</p>\n"}, {"tags": [], "owner": {"reputation": 306, "user_id": 2766815, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ec7df10ee3c05bce7438d0dc64e57f7c?s=128&d=identicon&r=PG", "display_name": "ithinkiknowruby", "link": "https://stackoverflow.com/users/2766815/ithinkiknowruby"}, "is_accepted": false, "score": 0, "last_activity_date": 1481696717, "creation_date": 1481696717, "answer_id": 41136113, "question_id": 41135358, "link": "https://stackoverflow.com/questions/41135358/how-to-insert-additional-columns-within-method-in-ruby/41136113#41136113", "title": "How to insert additional columns within method in Ruby", "body": "<p>I'm confused by your code.  I associate call like this:\n<a href=\"https://ruby-doc.org/core-2.2.0/Proc.html#method-i-call\" rel=\"nofollow noreferrer\">Ruby class definition (call)</a></p>\n\n<p>In other words, as far as I know, call isn't something you implement, it invokes the method that precedes it, passing in variables.</p>\n\n<p>If my understanding is correct, your call probably invokes the initialize method on your class.  Which means you should be able to do something like this:</p>\n\n<pre><code>def initialize(todo, params)\n   @todo = todo\n   @todo_name = todo.name\n   @description = params[:description]\nend\n</code></pre>\n\n<p>In theory you can delete the method implementation of call on the class since it's a reserved ruby method and you would be overwriting it which might be bad.</p>\n\n<p>And it might be more legible if you wrote the code like this:</p>\n\n<pre><code>Todo::Add.new(OBJECT, description: 'some detail for todo')\n</code></pre>\n"}], "owner": {"reputation": 4742, "user_id": 2850944, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/ceb654fd6366aedf95144e49bb505b8f?s=128&d=identicon&r=PG&f=1", "display_name": "Toshi", "link": "https://stackoverflow.com/users/2850944/toshi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481696717, "creation_date": 1481692750, "last_edit_date": 1481695383, "question_id": 41135358, "link": "https://stackoverflow.com/questions/41135358/how-to-insert-additional-columns-within-method-in-ruby", "title": "How to insert additional columns within method in Ruby", "body": "<p>Here is an example,\nBasically this is third party API wrapper.</p>\n\n<pre><code>class Todo::Add\n  attr_reader :todo, :todo_name\n\n  def self.call(*args)\n    new(*args).call\n  end\n\n  def initialize(todo)\n    @todo = todo\n    @todo_name = todo.name\n  end\n\n  def call\n    detail = external_todo_service.create(\n      name: todo_name\n    )\n\n    # do something ...\n\n  rescue TodoServiceError =&gt; e\n    list.errors[:base] &lt;&lt; e.message\n    list\n  end\nend\n</code></pre>\n\n<p>And We can call this with something like <code>Todo::Add.call(OBJECT)</code>.</p>\n\n<p>However what if I'd love to add some <code>description</code> parameter to third party api request optionally.\nHow can I add it efficiently as an option?</p>\n\n<p><code>Todo::Add.call(OBJECT, description: 'some detail for todo')</code></p>\n\n<pre><code>  def call\n    detail = external_todo_service.create(\n      name: todo_name\n      description: description\n    )\n\n    # do something ...\n\n  rescue TodoServiceError =&gt; e\n    list.errors[:base] &lt;&lt; e.message\n    list\n  end\n</code></pre>\n\n<p>Any ideas?</p>\n\n<p><strong>UPDATE</strong>\nWhen I call this method without <code>description</code> parameter, external_todo_service.create() <code>description</code> parameter is going to be removed as well ideally.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "rubygems"], "comments": [{"owner": {"reputation": 1594, "user_id": 2681997, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/qgKiM.jpg?s=128&g=1", "display_name": "Ajay Barot", "link": "https://stackoverflow.com/users/2681997/ajay-barot"}, "edited": false, "score": 0, "creation_date": 1481693225, "post_id": 41135238, "comment_id": 69474365, "body": "Please let us know which gem and gem version you used for <code>amazon s3</code>. also let us know your <code>rails version</code>."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1481701111, "post_id": 41135238, "comment_id": 69477532, "body": "the gem you are trying is really old. <a href=\"https://github.com/marcel/aws-s3/tree/master/lib/aws/s3\" rel=\"nofollow noreferrer\">github.com/marcel/aws-s3/tree/master/lib/aws/s3</a>  look at this issue -<a href=\"https://github.com/marcel/aws-s3/issues/98\" rel=\"nofollow noreferrer\">github.com/marcel/aws-s3/issues/98</a>"}], "owner": {"reputation": 87, "user_id": 4267220, "user_type": "registered", "profile_image": "https://graph.facebook.com/1251519740/picture?type=large", "display_name": "Gonzo Nick", "link": "https://stackoverflow.com/users/4267220/gonzo-nick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 80, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481696830, "creation_date": 1481692045, "last_edit_date": 1481696830, "question_id": 41135238, "link": "https://stackoverflow.com/questions/41135238/rails-g-controller-aws-s3-syntax-error", "title": "Rails g Controller AWS S3 Syntax error", "body": "<p>I'm new to using rails with aws s3 and want am gaining experience through tutorials. I'm stuck on generating the controller and views because of a files syntax, This is my process. </p>\n\n<pre><code>rails g controller Songs index upload delete\n</code></pre>\n\n<p>Below is the output of the command :</p>\n\n<pre><code>/var/lib/gems/2.3.0/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:223:in `class_eval': /var/lib/gems/2.3.0/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:223: `@@{' is not allowed as a class variable name (SyntaxError)\n/var/lib/gems/2.3.0/gems/aws-s3-0.6.3/lib/aws/s3/extensions.rb:223: syntax error, unexpected end-of-inputunless defined? @@{:instance_writer=&gt;true}\n</code></pre>\n\n<p>Is it as simple to deleting '@@{' in the file ? That doesn't seem logical to me because I haven't done any editing to any of these rb files.</p>\n\n<p>Please help me understand this more.</p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481692091, "post_id": 41135123, "comment_id": 69474032, "body": "Thanks!  I receive the error &quot;undefined method <code>sale_date&#39; for &quot;12&#47;12&#47;2016&quot;:String&quot; for this line </code>   &lt;%= sale_group.first.sale_date.strftime(&quot;%m/%d/%Y&quot;) %&gt;`"}], "tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1481691434, "last_edit_date": 1495542633, "creation_date": 1481691434, "answer_id": 41135123, "question_id": 41135015, "link": "https://stackoverflow.com/questions/41135015/rails-show-subtotal-by-date/41135123#41135123", "title": "Rails Show Subtotal by Date", "body": "<p>My first thought, if there are not too many @sales, we can use ruby group_by method to group by sale_date. Ideally, it would be:</p>\n\n<pre><code>&lt;% sales_group = @sales.to_a.group_by{ |sale| sale.sale_date.strftime(\"%m/%d/%Y\") } %&gt;\n&lt;% @sales_group.each do |sale_group| %&gt;      \n   &lt;%= sale_group.first.sale_date.strftime(\"%m/%d/%Y\") %&gt;\n   &lt;%= number_to_currency(sale_group.sum(&amp;:amount)) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>You can move the logic of sales_group to controller &amp; if there is a lot of @sales records, you may use database query instead of ruby.</p>\n\n<p>This is a good reference <a href=\"https://stackoverflow.com/a/4061462/1789479\">https://stackoverflow.com/a/4061462/1789479</a></p>\n"}, {"comments": [{"owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481693282, "post_id": 41135308, "comment_id": 69474387, "body": "Thanks!  I received this error <code>undefined method </code>sale_date&#39; for [Mon, 12 Dec 2016, #&lt;BigDecimal:bbcbc90,&#39;0.65E0&#39;,9(18)&gt;]:Array` on <code>&lt;td&gt;&lt;%= number_to_currency(sale.amount) %&gt;&lt;&#47;td&gt;</code>"}, {"owner": {"reputation": 36, "user_id": 5952396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6ca3eabea9f8fcdb1d5457faeb4363?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislav Gospodinov", "link": "https://stackoverflow.com/users/5952396/stanislav-gospodinov"}, "reply_to_user": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481693605, "post_id": 41135308, "comment_id": 69474504, "body": "This is because the result of this scope is not <code>ActiveRecord::Relation</code>. It is a <code>Hash</code>"}, {"owner": {"reputation": 36, "user_id": 5952396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6ca3eabea9f8fcdb1d5457faeb4363?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislav Gospodinov", "link": "https://stackoverflow.com/users/5952396/stanislav-gospodinov"}, "reply_to_user": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481693643, "post_id": 41135308, "comment_id": 69474520, "body": "You can iterate over it like this"}, {"owner": {"reputation": 36, "user_id": 5952396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6ca3eabea9f8fcdb1d5457faeb4363?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislav Gospodinov", "link": "https://stackoverflow.com/users/5952396/stanislav-gospodinov"}, "reply_to_user": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481693839, "post_id": 41135308, "comment_id": 69474593, "body": "<code>each do |key, value|    Sale.find(key).strftime(&quot;%m&#47;%d&#47;%Y&quot;)    number_to_currency(value) end</code>"}, {"owner": {"reputation": 36, "user_id": 5952396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6ca3eabea9f8fcdb1d5457faeb4363?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislav Gospodinov", "link": "https://stackoverflow.com/users/5952396/stanislav-gospodinov"}, "reply_to_user": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481693982, "post_id": 41135308, "comment_id": 69474633, "body": "Sorry for the 3 long comments answer, I&#39;m new in this."}, {"owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481694563, "post_id": 41135308, "comment_id": 69474870, "body": "Thanks Stanislav Gospodinov!  I&#39;m not sure what I&#39;m doing wrong, but when I  put this in the view <code>&lt;% @sales.each do |key, value| Sale.find(key).strftime(&quot;%m&#47;%d&#47;%Y&quot;) number_to_currency(value) %&gt;</code> to replace <code>&lt;% @sales.each do |sale| %&gt;</code>, I get this error <code>C:&#47;Sites&#47;sales&#47;app&#47;views&#47;sales&#47;index.html.erb:22: syntax error, unexpected tIDENTIFIER, expecting keyword_end ...(&quot;%m&#47;%d&#47;%Y&quot;) number_to_currency(value) ... ^</code>. In my controller <code>@sales= @user.sales.subtotal</code>.  In the model, `  scope :subtotal, -&gt; { group(:sale_date).sum(:amount) }`"}, {"owner": {"reputation": 36, "user_id": 5952396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6ca3eabea9f8fcdb1d5457faeb4363?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislav Gospodinov", "link": "https://stackoverflow.com/users/5952396/stanislav-gospodinov"}, "reply_to_user": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481695682, "post_id": 41135308, "comment_id": 69475249, "body": "You should write something like: <code>&lt;% sales.each does |key, value| %&gt;   &lt;%= Sale.find(key).strftime(&quot;%m&#47;%d&#47;%Y&quot;) %&gt;   &lt;%= number_to_currency(value) %&gt; &lt;%= end %&gt;</code> This is syntaxis error."}, {"owner": {"reputation": 36, "user_id": 5952396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6ca3eabea9f8fcdb1d5457faeb4363?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislav Gospodinov", "link": "https://stackoverflow.com/users/5952396/stanislav-gospodinov"}, "reply_to_user": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481695845, "post_id": 41135308, "comment_id": 69475311, "body": "Sorry my fault the end of the code segment must be <code>&lt;% end %&gt;</code> without = before the <code>end</code> key word"}, {"owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "edited": false, "score": 0, "creation_date": 1481696746, "post_id": 41135308, "comment_id": 69475615, "body": "Hmmmm.  I have this error now <code>undefined method </code>strftime&#39; for #&lt;Sale:0x991fe30&gt;` for this line <code>&lt;%= Sale.find(key).strftime(&quot;%m&#47;%d&#47;%Y&quot;) %&gt;</code>."}], "tags": [], "owner": {"reputation": 36, "user_id": 5952396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6ca3eabea9f8fcdb1d5457faeb4363?s=128&d=identicon&r=PG&f=1", "display_name": "Stanislav Gospodinov", "link": "https://stackoverflow.com/users/5952396/stanislav-gospodinov"}, "is_accepted": false, "score": 1, "last_activity_date": 1481692531, "creation_date": 1481692531, "answer_id": 41135308, "question_id": 41135015, "link": "https://stackoverflow.com/questions/41135015/rails-show-subtotal-by-date/41135308#41135308", "title": "Rails Show Subtotal by Date", "body": "<p>If you are not familiar with scopes in rails I recommend you to read <a href=\"http://guides.rubyonrails.org/active_record_querying.html#scopes\" rel=\"nofollow noreferrer\">this</a>.</p>\n\n<p>A possible solution to your problem is to add the following scope to your <code>Sales</code> model.</p>\n\n<pre><code>scope :amount_per_sale, -&gt; { group(:sale_date).sum(:amount) }\n</code></pre>\n\n<p>This scope will produse <code>hash</code> which contains the dates of a sale as keys and the amount as values.\nIf you want to use this scope in combination with user instance it's very easy too.</p>\n\n<pre><code>@user.sales.amount_per_sale\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": true, "score": 0, "last_activity_date": 1481700039, "creation_date": 1481700039, "answer_id": 41136932, "question_id": 41135015, "link": "https://stackoverflow.com/questions/41135015/rails-show-subtotal-by-date/41136932#41136932", "title": "Rails Show Subtotal by Date", "body": "<p>Try this:</p>\n\n<pre><code>&lt;% @sales.group_by(&amp;:sale_date).each do |sale| %&gt;      \n   &lt;%= sale[0].strftime(\"%m/%d/%Y\") %&gt;\n   &lt;%= number_to_currency(sale[1].sum(&amp;:amount)) %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 3234, "user_id": 994581, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/5ff79a62688297a354a41d772f20a547?s=128&d=identicon&r=PG", "display_name": "yellowreign", "link": "https://stackoverflow.com/users/994581/yellowreign"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 41136932, "answer_count": 3, "score": 0, "last_activity_date": 1481700039, "creation_date": 1481690690, "question_id": 41135015, "link": "https://stackoverflow.com/questions/41135015/rails-show-subtotal-by-date", "title": "Rails Show Subtotal by Date", "body": "<p>I'm using mySQL for my Rails 4 app and I have a <code>Sale</code> model that has the fields <code>sale_date</code>, <code>amount</code>, and <code>user_id</code>.</p>\n\n<p>What I'm trying to do is show the total amount per sale date.</p>\n\n<pre><code>&lt;% @sales.each do |sale| %&gt;      \n   &lt;%= sale.sale_date.strftime(\"%m/%d/%Y\") %&gt;\n   &lt;%= number_to_currency(sale.amount) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Currently, my controller only has this (which obviously doesn't subtotal):</p>\n\n<pre><code>@sales = @user.sales\n</code></pre>\n\n<p>How can I show sales subtotaled by date? Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481688234, "post_id": 41134137, "comment_id": 69473098, "body": "Ruby convention is for methods ending in question mark to return booleans. So if the purpose of the method changes, it might be smart to change the name too."}], "answers": [{"tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": true, "score": 1, "last_activity_date": 1481684941, "creation_date": 1481684941, "answer_id": 41134201, "question_id": 41134137, "link": "https://stackoverflow.com/questions/41134137/finding-the-instance-of-a-model-not-trueclass/41134201#41134201", "title": "Finding the instance of a model not true:class", "body": "<p>Remove <code>exists?</code> from <code>FailedImage.where(md5: md5)</code>. </p>\n\n<p>This would return you an array of records.</p>\n\n<p>Model method should look as follows:</p>\n\n<pre><code>def self.stored?(image_path)\n  md5 = Digest::MD5.file(image_path).hexdigest\n  FailedImage.where(md5: md5)\nend\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 41134201, "answer_count": 1, "score": 0, "last_activity_date": 1481684941, "creation_date": 1481684447, "question_id": 41134137, "link": "https://stackoverflow.com/questions/41134137/finding-the-instance-of-a-model-not-trueclass", "title": "Finding the instance of a model not true:class", "body": "<p>I currently have a method that returns true or false if a record exists?. It does it's job find but I need to return that record that it found and update it with new information. The code I have right now does not as I want it to. Here is my code</p>\n\n<h1>Model method:</h1>\n\n<pre><code>def self.stored?(image_path)\n  md5 = Digest::MD5.file(image_path).hexdigest\n\n  FailedImage.where(md5: md5).exists?\nend\n</code></pre>\n\n<p>This returns a true class. I want it to return a record.</p>\n\n<h1>controller</h1>\n\n<pre><code>if failed_image = FailedImage.stored?(context.download_path)\n  failed_image.update_from_image_optimization(context.image_optimization)\nend\n</code></pre>\n\n<p>I get this error <code>undefined method update_from_image_optimization for true:TrueClass</code> This is because it is returning true class when I want a record. Anybody know how I can achieve this?</p>\n"}, {"tags": ["json", "ruby", "ruby-on-rails-3"], "answers": [{"comments": [{"owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "edited": false, "score": 0, "creation_date": 1481684316, "post_id": 41134071, "comment_id": 69472144, "body": "I want to used find_each in that method to process object in batches."}, {"owner": {"reputation": 146, "user_id": 1477596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7833d73d992903f1f66bb155cee88754?s=128&d=identicon&r=PG", "display_name": "JackBites", "link": "https://stackoverflow.com/users/1477596/jackbites"}, "reply_to_user": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "edited": false, "score": 0, "creation_date": 1481684567, "post_id": 41134071, "comment_id": 69472208, "body": "do you want stream the looping? what is your expectation json?"}, {"owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "edited": false, "score": 0, "creation_date": 1481684960, "post_id": 41134071, "comment_id": 69472307, "body": "This is my expected JSON <code>[{&quot;id&quot;:&quot;12345&quot;,&quot;updated_at&quot;:&quot;2016-11-18T20:31:23Z&quot;},{&quot;id&quot;:&quot;1&zwnj;&#8203;2222&quot;,&quot;updated_at&quot;:&quot;&zwnj;&#8203;2016-11-18T20:39:18Z&zwnj;&#8203;&quot;}]</code>"}], "tags": [], "owner": {"reputation": 146, "user_id": 1477596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7833d73d992903f1f66bb155cee88754?s=128&d=identicon&r=PG", "display_name": "JackBites", "link": "https://stackoverflow.com/users/1477596/jackbites"}, "is_accepted": false, "score": 0, "last_activity_date": 1481684060, "creation_date": 1481684060, "answer_id": 41134071, "question_id": 41133836, "link": "https://stackoverflow.com/questions/41133836/newbie-ruby-on-rails-i-am-getting-doublerendererror-while-using-find-each/41134071#41134071", "title": "Newbie: Ruby on rails. I am getting DoubleRenderError while using find_each", "body": "<p>You are only allowed to render one time per request, when you execute looping with render in the block it will render as many as the total item in the collection.</p>\n\n<p>here is solution from me:</p>\n\n<pre><code>def get_list_of_Item_IDs_from_some_where \n  jsons = Item.where(\"created_at &gt;= ? and location = ?\", Date.today - params[:days].to_i, params[:location]).to_json(only: [:id, :updated_at])\n  render json: jsons\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "is_accepted": true, "score": 1, "last_activity_date": 1481689191, "creation_date": 1481689191, "answer_id": 41134781, "question_id": 41133836, "link": "https://stackoverflow.com/questions/41133836/newbie-ruby-on-rails-i-am-getting-doublerendererror-while-using-find-each/41134781#41134781", "title": "Newbie: Ruby on rails. I am getting DoubleRenderError while using find_each", "body": "<p>This worked for me. </p>\n\n<pre><code>def get_list_of_Item_IDs_from_some_where \n  serialized_item_ids_and_updated_at = []\n  Item.where(\"created_at &gt;= ? and location = ?\", Date.today - params[:days].to_i, params[:location]).find_each do |item|\n  serialized_item_ids_and_updated_at &lt;&lt; item.as_json(only: [:id, :updated_at])\n  end\n  respond_to do |format|\n    format.html\n    format.json { render json: serialized_item_ids_and_updated_at }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 370, "user_id": 4526617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3fc0643deb79dffedb7bf9dfdc9d9346?s=128&d=identicon&r=PG&f=1", "display_name": "Kavincat", "link": "https://stackoverflow.com/users/4526617/kavincat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "accepted_answer_id": 41134781, "answer_count": 2, "score": 1, "last_activity_date": 1481689191, "creation_date": 1481682454, "last_edit_date": 1481684404, "question_id": 41133836, "link": "https://stackoverflow.com/questions/41133836/newbie-ruby-on-rails-i-am-getting-doublerendererror-while-using-find-each", "title": "Newbie: Ruby on rails. I am getting DoubleRenderError while using find_each", "body": "<p>I have API method which return JSON data.<br>\nExample</p>\n\n<pre><code> http://myapp/items/get_list_of_Item_IDs_from_some_where.json?days=50&amp;location=CA\n</code></pre>\n\n<p>Method in the controller which is working:</p>\n\n<pre><code>def get_list_of_Item_IDs_from_some_where \n  item = Item.where(\"created_at &gt;= ? and location = ?\", Date.today - params[:days].to_i, params[:location])\n    serialized_item_ids_and_updated_at = item.as_json(only: [:id, :updated_at])\n    respond_to do |format|\n      format.html\n      format.json { render json: serialized_item_ids_and_updated_at }\n    end\nend\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>[{\"id\":\"12345\",\"updated_at\":\"2016-11-18T20:31:23Z\"},{\"id\":\"12222\",\"updated_at\":\"2016-11-18T20:39:18Z\"}]\n</code></pre>\n\n<p>Method in the controller which is not working when I tired to use find_each in that method.</p>\n\n<pre><code>def get_list_of_Item_IDs_from_some_where \n  Item.where(\"created_at &gt;= ? and location = ?\", Date.today - params[:days].to_i, params[:location]).find_each do |item|\n    serialized_item_ids_and_updated_at = item.as_json(only: [:id, :updated_at])\n    respond_to do |format|\n      format.html\n      format.json { render json: serialized_item_ids_and_updated_at }\n    end\n  end\nend\n</code></pre>\n\n<p>Output:</p>\n\n<p>I will get this error:</p>\n\n<pre><code>AbstractController::DoubleRenderError \n</code></pre>\n"}, {"tags": ["ruby", "bundler"], "answers": [{"comments": [{"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1481749046, "post_id": 41133882, "comment_id": 69506258, "body": "The first one still requires <i>me</i> to remember to do it, which was what I was trying to avoid - but with a tweak to the gem path, the second one seems to work perfectly. Here&#39;s the generic version: <code>bundle config build.puma $(dirname $(dirname $(gem which puma))) -- --with-opt-include=&#47;usr&#47;local&#47;opt&#47;openssl&#47;include</code>"}, {"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1481749282, "post_id": 41133882, "comment_id": 69506372, "body": "In fact, since I&#39;m using RVM and the gem is installed inside a specific Ruby folder, this should restrict it to that version of Ruby as well :)"}], "tags": [], "owner": {"reputation": 146, "user_id": 1477596, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7833d73d992903f1f66bb155cee88754?s=128&d=identicon&r=PG", "display_name": "JackBites", "link": "https://stackoverflow.com/users/1477596/jackbites"}, "is_accepted": true, "score": 1, "last_activity_date": 1481682775, "creation_date": 1481682775, "answer_id": 41133882, "question_id": 41133708, "link": "https://stackoverflow.com/questions/41133708/set-bundler-config-for-specific-version-of-a-gem/41133882#41133882", "title": "Set Bundler config for specific version of a gem", "body": "<p>have you tried the following ways?</p>\n\n<pre><code>gem install puma -v '2.9.0' -- --with-opt-include=/usr/local/opt/openssl/include\n</code></pre>\n\n<p>OR </p>\n\n<pre><code>bundle config build.puma /path/to/local/git/puma/2.9.0 -- --with-opt-include=/usr/local/opt/openssl/include\n</code></pre>\n"}], "owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 41133882, "answer_count": 1, "score": 0, "last_activity_date": 1481682775, "creation_date": 1481681527, "question_id": 41133708, "link": "https://stackoverflow.com/questions/41133708/set-bundler-config-for-specific-version-of-a-gem", "title": "Set Bundler config for specific version of a gem", "body": "<p>I'm wanting to install an older version of the Puma gem, using Bundler. Based on <a href=\"https://github.com/puma/puma/issues/718#issuecomment-122632128\" rel=\"nofollow noreferrer\">this comment in GitHub</a>, I'm able to determine that it needs <code>--with-opt-include=/usr/local/opt/openssl/include</code> to work.</p>\n\n<p>I'd like to use that option every time I install this gem. I know I can add it to <code>bundle config</code>...</p>\n\n<pre><code>bundle config build.puma -- --with-opt-include=/usr/local/opt/openssl/include\n</code></pre>\n\n<p>... but I only want that to apply to Puma v2.9.0. Is that possible?</p>\n"}, {"tags": ["ruby", "rake", "minitest", "guard"], "answers": [{"comments": [{"owner": {"reputation": 774, "user_id": 251094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4EEbp.jpg?s=128&g=1", "display_name": "hoff2", "link": "https://stackoverflow.com/users/251094/hoff2"}, "edited": false, "score": 1, "creation_date": 1596136578, "post_id": 41136478, "comment_id": 111722687, "body": "I believe the question was &quot;Why am I getting these warnings?&quot; this does not answer that."}, {"owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "reply_to_user": {"reputation": 774, "user_id": 251094, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/4EEbp.jpg?s=128&g=1", "display_name": "hoff2", "link": "https://stackoverflow.com/users/251094/hoff2"}, "edited": false, "score": 0, "creation_date": 1596173903, "post_id": 41136478, "comment_id": 111732937, "body": "@hoff2 the error says it all, there are circular requires. But since they are often in gems, turning it off is the only way to get rid of them."}], "tags": [], "owner": {"reputation": 4930, "user_id": 5276188, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/N2sAW.jpg?s=128&g=1", "display_name": "Doktor OSwaldo", "link": "https://stackoverflow.com/users/5276188/doktor-oswaldo"}, "is_accepted": true, "score": 6, "last_activity_date": 1481698377, "creation_date": 1481698377, "answer_id": 41136478, "question_id": 41133677, "link": "https://stackoverflow.com/questions/41133677/guard-warning-warning-loading-in-progress-circular-require-considered-harmful/41136478#41136478", "title": "Guard warning &quot;warning: loading in progress, circular require considered harmful&quot;", "body": "<p>If you just want to turn off the warnings, you can do so in the rake test task setup:</p>\n\n<pre><code>require 'rake/testtask'\ntask :default =&gt; [:test]\nRake::TestTask.new do |t|\n  t.libs &lt;&lt; 'test'\n  t.pattern = \"test/test_*\"\n  t.warning = false\nend\n</code></pre>\n"}], "owner": {"reputation": 6391, "user_id": 2909897, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/LMSiW.jpg?s=128&g=1", "display_name": "mbigras", "link": "https://stackoverflow.com/users/2909897/mbigras"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1854, "favorite_count": 0, "accepted_answer_id": 41136478, "answer_count": 1, "score": 3, "last_activity_date": 1481698377, "creation_date": 1481681283, "last_edit_date": 1495540957, "question_id": 41133677, "link": "https://stackoverflow.com/questions/41133677/guard-warning-warning-loading-in-progress-circular-require-considered-harmful", "title": "Guard warning &quot;warning: loading in progress, circular require considered harmful&quot;", "body": "<p>I have a simple Ruby test envinvorment set up with:\nminitest, guard, guard-minitest, and terminal-notifier-guard.</p>\n\n<p>I'm using the following <code>Rakefile</code> so my tests are run by default because that's what Travis CI does by default.</p>\n\n<pre><code>require 'rake/testtask'\ntask :default =&gt; [:test]\nRake::TestTask.new do |t|\n  t.libs &lt;&lt; 'test'\n  t.pattern = \"test/test_*\"\nend\n</code></pre>\n\n<p>The tests do run and pass but I get multiple screens worth of warnings. I found <a href=\"https://stackoverflow.com/questions/24072876/too-many-warnings-about-circular-require-when-run-rspec\">an answer</a> and <a href=\"https://stackoverflow.com/questions/24176446/rspec-capybara-loading-in-progress-circular-require-considered-harmful\">another answer</a>.</p>\n\n<p>But it seems like those solutions are specific to rails and rspec.</p>\n\n<p>Why am I getting these warnings?</p>\n\n<p>You can find the full project on <a href=\"https://github.com/mbigras/some_working_ruby_minitest_guard_notifier_env\" rel=\"nofollow noreferrer\">GitHub</a> and the full error output in this <a href=\"https://gist.github.com/0dd0709042b6e435d9ded22d0de68a31\" rel=\"nofollow noreferrer\">gist</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "view", "controller"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7115974, "user_type": "registered", "profile_image": "https://graph.facebook.com/1523030287712298/picture?type=large", "display_name": "Eduardo Tafner", "link": "https://stackoverflow.com/users/7115974/eduardo-tafner"}, "edited": false, "score": 0, "creation_date": 1481681000, "post_id": 41133558, "comment_id": 69471344, "body": "Ah yes thank you very much, can&#39;t believe I didn&#39;t see that. I&#39;m now getting:  undefined method `+&#39; for nil:NilClass  . So I assume I should use some sort of increment method rails already has for me."}, {"owner": {"reputation": 467, "user_id": 7223087, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/209467049504827/picture?type=large", "display_name": "Connor Gurney", "link": "https://stackoverflow.com/users/7223087/connor-gurney"}, "reply_to_user": {"reputation": 11, "user_id": 7115974, "user_type": "registered", "profile_image": "https://graph.facebook.com/1523030287712298/picture?type=large", "display_name": "Eduardo Tafner", "link": "https://stackoverflow.com/users/7115974/eduardo-tafner"}, "edited": false, "score": 0, "creation_date": 1481681344, "post_id": 41133558, "comment_id": 69471425, "body": "@EduardoTafner: That will be because you&#39;re starting from 0 which defaults to <code>nil:NilClass</code>. You can use <code>@comment.increment(&#39;upVote&#39;)</code> to increment by 1."}], "tags": [], "owner": {"reputation": 467, "user_id": 7223087, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/209467049504827/picture?type=large", "display_name": "Connor Gurney", "link": "https://stackoverflow.com/users/7223087/connor-gurney"}, "is_accepted": false, "score": 0, "last_activity_date": 1481680379, "creation_date": 1481680379, "answer_id": 41133558, "question_id": 41133535, "link": "https://stackoverflow.com/questions/41133535/how-to-change-a-column-attribute-with-a-link-button-ruby-on-rails/41133558#41133558", "title": "How to change a column attribute with a link/button - Ruby on Rails", "body": "<p>By the looks of things, <code>:comment</code> should be <code>:comment_id</code> like so.</p>\n\n<pre><code>@comment = Comment.find(params[:comment_id])\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1041, "user_id": 2814270, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ezuBx.jpg?s=128&g=1", "display_name": "thanhnha1103", "link": "https://stackoverflow.com/users/2814270/thanhnha1103"}, "is_accepted": false, "score": 0, "last_activity_date": 1481683644, "creation_date": 1481683644, "answer_id": 41134019, "question_id": 41133535, "link": "https://stackoverflow.com/questions/41133535/how-to-change-a-column-attribute-with-a-link-button-ruby-on-rails/41134019#41134019", "title": "How to change a column attribute with a link/button - Ruby on Rails", "body": "<pre><code>put :upvote\n</code></pre>\n\n<p>Should be</p>\n\n<pre><code>put :upvote, on: :member\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7115974, "user_type": "registered", "profile_image": "https://graph.facebook.com/1523030287712298/picture?type=large", "display_name": "Eduardo Tafner", "link": "https://stackoverflow.com/users/7115974/eduardo-tafner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481683644, "creation_date": 1481680238, "question_id": 41133535, "link": "https://stackoverflow.com/questions/41133535/how-to-change-a-column-attribute-with-a-link-button-ruby-on-rails", "title": "How to change a column attribute with a link/button - Ruby on Rails", "body": "<p>I am learning RoR and I'm currently trying to have an up-vote system implemented into my website. Users can log on and post comments on a forum and then upvote other comments on that forum.</p>\n\n<p><strong>Controller code</strong></p>\n\n<pre><code> def upvote\n    @comment = Comment.find(params[:comment])\n    @comment.update_attribute('upVote', @comment.upvote + 1)\n    redirect_to :back\n end\n</code></pre>\n\n<p><strong>Link in show</strong></p>\n\n<pre><code> &lt;%= link_to 'Up Vote', comment_upvote_path(comment.id), method: :put %&gt;\n</code></pre>\n\n<p>I tried substituting (comment.id) with comment to no avail.</p>\n\n<p><strong>Routes</strong></p>\n\n<pre><code>get 'upvote', :to=&gt;'comments#upvote'\n\nresources :comments do\n put :upvote\nend\n</code></pre>\n\n<p>The error that I'm getting happens when I click to upvote:</p>\n\n<p>Couldn't find Comment with 'id'=</p>\n\n<p>app/controllers/comments_controller.rb:26:in `upvote'\nRequest</p>\n\n<p>Parameters:</p>\n\n<p>{\"_method\"=>\"put\",\n \"authenticity_token\"=>\"HNXyufzGsXi/SZoJsa+2uouMKVYlH6vYTHOF8iMgj6zAHO13jApk+QO33xEonkcoFgMugwYQZpSom1+KbVRe7g==\",\n \"comment_id\"=>\"11\"}</p>\n\n<p>I checked and a comment with the id of 11 exists, so I really do not know what is causing this error. Any help would be very much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "database"], "answers": [{"comments": [{"owner": {"reputation": 682, "user_id": 4987722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df03c42e897cd09c3f714542cd930fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Codoscope", "link": "https://stackoverflow.com/users/4987722/codoscope"}, "edited": false, "score": 0, "creation_date": 1481742806, "post_id": 41134372, "comment_id": 69502987, "body": "That&#39;s definitely a better solution. I guess that there is no direct command to do it then."}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": true, "score": 3, "last_activity_date": 1481686016, "creation_date": 1481686016, "answer_id": 41134372, "question_id": 41133521, "link": "https://stackoverflow.com/questions/41133521/revert-a-migration-without-changing-the-schema/41134372#41134372", "title": "Revert a migration without changing the schema", "body": "<p>You should have a <code>schema_migrations</code> table in your database with a single <code>version</code> column which will have the numerical portion of your migration. Simply delete that row.</p>\n"}], "owner": {"reputation": 682, "user_id": 4987722, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/df03c42e897cd09c3f714542cd930fe2?s=128&d=identicon&r=PG&f=1", "display_name": "Codoscope", "link": "https://stackoverflow.com/users/4987722/codoscope"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 41134372, "answer_count": 1, "score": 0, "last_activity_date": 1481686016, "creation_date": 1481680104, "last_edit_date": 1495542632, "question_id": 41133521, "link": "https://stackoverflow.com/questions/41133521/revert-a-migration-without-changing-the-schema", "title": "Revert a migration without changing the schema", "body": "<p>The last migration that I ran was not completed because of errors. It can't be reverted with <code>rails db:rollback</code> (nor with <code>rake db:migrate:down VERSION=xxx</code>) because this commands tries to drop databases that were not created (or that I destroyed to try to solve the issue).</p>\n\n<p>Is there a way to switch to <code>down</code> the status of the last migration, and that it doesn't try to affect the database?</p>\n\n<p>The following worked: editing the migration file, renaming the <code>change</code> method to <code>up</code>, adding an empty <code>down</code> method, and running the <code>rails db:rollback</code> again. Nonetheless, I was wondering if there was a better solution.</p>\n\n<p>(Note that this question is not about <a href=\"https://stackoverflow.com/questions/686852/rolling-back-a-failed-rails-migration\">cleaning up the failures</a> but just about switching the last migration status to <code>down</code>.)</p>\n"}, {"tags": ["ruby", "readline", "pry"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481688528, "post_id": 41133206, "comment_id": 69473157, "body": "are you using a gemfile? What are you trying to run?"}, {"owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481689720, "post_id": 41133206, "comment_id": 69473420, "body": "@maxpleaner I just want to run some basic ruby code. When I type <code>pry</code> in the terminal, I want to write ruby only. So I didn&#39;t use a Gemfile."}], "answers": [{"comments": [{"owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "edited": false, "score": 0, "creation_date": 1481696138, "post_id": 41135065, "comment_id": 69475410, "body": "Thank you. After I run it and run <code>pry</code> again, I got many <code>Ignoring</code> messages like <code>Ignoring bcrypt-3.1.11 because its extensions are not built.  Try: gem pristine bcrypt --version 3.1.11</code>."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "reply_to_user": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "edited": false, "score": 0, "creation_date": 1481698492, "post_id": 41135065, "comment_id": 69476295, "body": "Sorry, that may have not been the best advice here. Try <code>gem pristine --all</code> now"}], "tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1481691093, "creation_date": 1481691093, "answer_id": 41135065, "question_id": 41133206, "link": "https://stackoverflow.com/questions/41133206/found-plugin-pry-remote-but-could-not-require-pry-remote/41135065#41135065", "title": "Found plugin pry-remote, but could not require &#39;pry-remote&#39;", "body": "<p>Try running</p>\n\n<pre><code>gem uninstall pry-remote\n</code></pre>\n\n<p>Then hopefully pry will run</p>\n"}], "owner": {"reputation": 607, "user_id": 6785635, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/b3f4f269a077d438fb5a9a9297726095?s=128&d=identicon&r=PG&f=1", "display_name": "s_zhang", "link": "https://stackoverflow.com/users/6785635/s-zhang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 170, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481691093, "creation_date": 1481677855, "question_id": 41133206, "link": "https://stackoverflow.com/questions/41133206/found-plugin-pry-remote-but-could-not-require-pry-remote", "title": "Found plugin pry-remote, but could not require &#39;pry-remote&#39;", "body": "<p>When I run <code>pry</code> in my terminal, I got this message:</p>\n\n<pre><code>Found plugin pry-remote, but could not require 'pry-remote'\ndlopen(/usr/local/Cellar/ruby/2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle, 9): Library not loaded: /usr/local/opt/readline/lib/libreadline.6.dylib\n  Referenced from: /usr/local/Cellar/ruby/2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n  Reason: image not found - /usr/local/Cellar/ruby/2.3.1/lib/ruby/2.3.0/x86_64-darwin15/readline.bundle\n[1] pry(main)&gt;\n</code></pre>\n\n<p>But I can use pry. Why it require <code>pry-remote</code>? If the <code>readline</code> has problem, is it necessary to reinstall ruby again?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 6839, "user_id": 4180797, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/727a435b2d2ef77feabab175060d00ae?s=128&d=identicon&r=PG", "display_name": "James L.", "link": "https://stackoverflow.com/users/4180797/james-l"}, "edited": false, "score": 0, "creation_date": 1500398505, "post_id": 41135173, "comment_id": 77314792, "body": "Do you need to create those foreign keys in a migration, or is specifying them in the model enough?"}, {"owner": {"reputation": 56, "user_id": 1476950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzRf9.jpg?s=128&g=1", "display_name": "Mauricio Gomes", "link": "https://stackoverflow.com/users/1476950/mauricio-gomes"}, "reply_to_user": {"reputation": 6839, "user_id": 4180797, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/727a435b2d2ef77feabab175060d00ae?s=128&d=identicon&r=PG", "display_name": "James L.", "link": "https://stackoverflow.com/users/4180797/james-l"}, "edited": false, "score": 1, "creation_date": 1500486109, "post_id": 41135173, "comment_id": 77362259, "body": "@JamesLowrey Specifying them in the model here just assists ActiveRecord with the lookups. If you want the DB to properly constrain the foreign key, you need to add it to the migration as well."}], "tags": [], "owner": {"reputation": 56, "user_id": 1476950, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/vzRf9.jpg?s=128&g=1", "display_name": "Mauricio Gomes", "link": "https://stackoverflow.com/users/1476950/mauricio-gomes"}, "is_accepted": true, "score": 4, "last_activity_date": 1481691687, "creation_date": 1481691687, "answer_id": 41135173, "question_id": 41132949, "link": "https://stackoverflow.com/questions/41132949/class-name-foreign-key-in-rails-model/41135173#41135173", "title": "class_name foreign_key in Rails model", "body": "<p>The naming here is kind of strange, but the purpose of <code>:class_name</code> is to allow you to use a class that is different from the one Rails expects. When you have a <code>belongs_to :user</code> on a model, Rails would expect that to point to a parent class called <code>User</code>. In your example, Rails skips looking for a <code>User</code> class and instead looks to the <code>Question</code> model.</p>\n\n<p>The most common usage of this, though, is when a non-default association name makes more sense than the default. So a more apt example is when you have a <code>User</code> model and <code>Competition</code> model wherein each competition has one user as a winner. You could have each <code>Competition</code> belong to a <code>User</code>, but that wouldn't be as expressive. Instead you may want to have the relationship be referred to as <code>winner</code>:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :winners, class_name: \"Competition\", foreign_key: \"competition_id\"\nend\n\nclass Competition &lt; ActiveRecord::Base\n  belongs_to :winner, class_name: \"User\", foreign_key: \"winner_id\"\nend\n</code></pre>\n\n<p>This allows you to refer to users as <code>winners</code>:</p>\n\n<pre><code>competition = Competition.first\ncompetition.winner\n</code></pre>\n\n<p>This is a lot more expressive than if you were to write <code>competition.user</code>.</p>\n"}], "owner": {"reputation": 805, "user_id": 4472094, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/aYQD4.jpg?s=128&g=1", "display_name": "Gundam Meister", "link": "https://stackoverflow.com/users/4472094/gundam-meister"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1992, "favorite_count": 2, "accepted_answer_id": 41135173, "answer_count": 1, "score": 2, "last_activity_date": 1481691687, "creation_date": 1481675853, "question_id": 41132949, "link": "https://stackoverflow.com/questions/41132949/class-name-foreign-key-in-rails-model", "title": "class_name foreign_key in Rails model", "body": "<p>I recently come across this code. User has many Answer. What is the purpose of the :class_name and :foreign_key ? </p>\n\n<pre><code>class Answer &lt; ApplicationRecord\n    belongs_to :user, :class_name =&gt; 'Question\", :foreign_key =&gt; 'question_id'\nend\n</code></pre>\n"}, {"tags": ["ruby", "postgresql", "sequel"], "comments": [{"owner": {"reputation": 329, "user_id": 2138047, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/yhPF9.png?s=128&g=1", "display_name": "Luan Huynh", "link": "https://stackoverflow.com/users/2138047/luan-huynh"}, "edited": false, "score": 0, "creation_date": 1481690048, "post_id": 41132837, "comment_id": 69473497, "body": "Please show a sample data, <code>order by ... limit</code>"}], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": true, "score": 0, "last_activity_date": 1481732943, "creation_date": 1481732943, "answer_id": 41147529, "question_id": 41132837, "link": "https://stackoverflow.com/questions/41132837/how-to-query-many-to-many-associations-with-sequel-gem-and-postgres/41147529#41147529", "title": "How to query many_to_many associations with Sequel gem and Postgres", "body": "<p>Probably best to use a model for the join table:</p>\n\n<pre><code>class PlaylistTrack &lt; Sequel::Model(:playlists_tracks)\n  many_to_one :playlist\n  many_to_one :track\n\n  def self.top10_tracks\n    group_and_count(:track_id).\n      reverse(:count).\n      limit(10).\n      eager(:track).\n      all.\n      map(&amp;:track)\n  end\nend\n</code></pre>\n\n<p>Note that this does two queries, but it makes sure the resulting array of tracks is ordered by popularity.</p>\n\n<p>If you want to, you can do it in a single query without a join table model:</p>\n\n<pre><code>def Track.top10\n  join(:playlists_tracks, :track_id=&gt;:id).\n    group{tracks[:id]}.\n    select_all(:tracks).\n    select_append{count(tracks[:id])}.\n    order{count(tracks[:id]).desc}.\n    limit(10).\n    all\nend\n</code></pre>\n\n<p>Note that this uses non-standard SQL, since it selects non-aggregate expressions you aren't grouping by, but it does work in PostgreSQL.  You could have this work with standard SQL by grouping by all columns in the tracks table.</p>\n"}], "owner": {"reputation": 517, "user_id": 4200859, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/72fe764d26ac6cb9d3a5bbeaa45fc1be?s=128&d=identicon&r=PG&f=1", "display_name": "Max", "link": "https://stackoverflow.com/users/4200859/max"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 213, "favorite_count": 0, "accepted_answer_id": 41147529, "answer_count": 1, "score": 0, "last_activity_date": 1481732943, "creation_date": 1481675148, "question_id": 41132837, "link": "https://stackoverflow.com/questions/41132837/how-to-query-many-to-many-associations-with-sequel-gem-and-postgres", "title": "How to query many_to_many associations with Sequel gem and Postgres", "body": "<p>I'm using the Sequel gem to connect to my Postgres database - I've got Playlists and Tracks, which have a many_to_many relationship.</p>\n\n<p>I'm having a hard time wrapping my head around the most effective way to query the top 10 most frequent tracks seen on playlists. Can someone give me an example of how to pull this off?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby", "ruby-on-rails-4", "erb"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481674999, "post_id": 41132772, "comment_id": 69469807, "body": "What do you mean?  You are passing the local variable <code>className</code> and also referencing <code>className</code>. Are you sure this is not just a typo or sloppy error?"}, {"owner": {"reputation": 7599, "user_id": 6730305, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/g0QG2.jpg?s=128&g=1", "display_name": "stackjlei", "link": "https://stackoverflow.com/users/6730305/stackjlei"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481675077, "post_id": 41132772, "comment_id": 69469831, "body": "<code>className</code> is not getting into the partial as &quot;classy&quot;. I want my div to get the class &quot;classy&quot;"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481675694, "post_id": 41132772, "comment_id": 69469992, "body": "It should be <code>&lt;%= className if local_assigns.has_key?(:className)  %&gt;</code>. Since <code>className</code> and <code>className?</code> are not the same. <code>local_assigns.has_key?(:className)</code> is a way of safely checking if the local variable is set."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 1, "last_activity_date": 1481677499, "creation_date": 1481677499, "answer_id": 41133146, "question_id": 41132772, "link": "https://stackoverflow.com/questions/41132772/inject-local-variables-into-rails-partial/41133146#41133146", "title": "Inject local variables into rails partial", "body": "<p>To check if a local variable is set use <code>local_assigns.has_key?(:some_key)</code> or <code>local_assigns[:some_key]</code> to safely access the local variable.</p>\n\n<p>A nifty way of handling the common task of building a list of classes is:</p>\n\n<pre><code>module ApplicationHelper\n  # Takes an array or list of classes and returns a string\n  # Example:\n  #  class_list('a', 'b', nil, 'c')\n  #  =&gt; \"a b\"\n  #  class_list(['a', 'b', nil, 'c'])\n  #  =&gt; \"a b c\"\n  def class_list(*classes)\n    [*classes].flatten.compact.join(' ') \n  end\nend\n</code></pre>\n\n<p>Then you can do:</p>\n\n<pre><code>&lt;div class=\"&lt;%= class_list('regular-div', local_assigns[:className]) %&gt;\"&gt;&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 7599, "user_id": 6730305, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/g0QG2.jpg?s=128&g=1", "display_name": "stackjlei", "link": "https://stackoverflow.com/users/6730305/stackjlei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 132, "favorite_count": 0, "accepted_answer_id": 41133146, "answer_count": 1, "score": 0, "last_activity_date": 1481677499, "creation_date": 1481674647, "question_id": 41132772, "link": "https://stackoverflow.com/questions/41132772/inject-local-variables-into-rails-partial", "title": "Inject local variables into rails partial", "body": "<p>I want my partial below to get the <code>classy</code> class from it being injected through locals, but I keep getting undefined method for classy.</p>\n\n<p>//view</p>\n\n<pre><code>&lt;%= render layout: \"layouts/partial\", locals: {className: \"classy\"} do %&gt;\n...\n&lt;% end&gt;\n</code></pre>\n\n<p>//partial</p>\n\n<pre><code>&lt;div class=\"regular-div &lt;%=className if className?%&gt;\"&gt;&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "chef-infra", "aws-opsworks", "tiny-tds"], "comments": [{"owner": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "edited": false, "score": 2, "creation_date": 1481697206, "post_id": 41132674, "comment_id": 69475793, "body": "It shouldn&#39;t use <code>libruby.so.2.1</code> if you have ruby 2.2.4. You have environment mixed up somehow - multiple ruby versions with incorrect PATH/GEM_HOME/GEM_PATH."}, {"owner": {"reputation": 590, "user_id": 847154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41ee9dc375c8676a5d2645062c373d79?s=128&d=identicon&r=PG", "display_name": "Aristata", "link": "https://stackoverflow.com/users/847154/aristata"}, "reply_to_user": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "edited": false, "score": 0, "creation_date": 1481728731, "post_id": 41132674, "comment_id": 69494574, "body": "Why do you say that, and what should it be using? Any idea how I should proceed to begin looking into this?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1481735680, "post_id": 41132674, "comment_id": 69499140, "body": "Use <code>ldd</code> to check the dynamic linkages"}, {"owner": {"reputation": 590, "user_id": 847154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41ee9dc375c8676a5d2645062c373d79?s=128&d=identicon&r=PG", "display_name": "Aristata", "link": "https://stackoverflow.com/users/847154/aristata"}, "edited": false, "score": 0, "creation_date": 1481738073, "post_id": 41132674, "comment_id": 69500484, "body": "I have updated the question with the results of calling ldd on the file, and I see that libruby.so.2.1 is not found, but I am not sure what that is telling me."}, {"owner": {"reputation": 1365, "user_id": 4894399, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-tY1Cz7EDNxc/AAAAAAAAAAI/AAAAAAAABb4/3Qa15VP4_ZY/photo.jpg?sz=128", "display_name": "Szymon Szypulski", "link": "https://stackoverflow.com/users/4894399/szymon-szypulski"}, "edited": false, "score": 0, "creation_date": 1481788654, "post_id": 41132674, "comment_id": 69519196, "body": "I&#39;m not sure how did you put ruby2.1 .so in 2.2, but you can try <code>bundle exec gem pristine</code> you may need to add <code>--path &#47;srv&#47;www&#47;api&#47;shared&#47;vendor&#47;bundle&#47;</code> but it shouldn&#39;t be needed if you run command from <code>current</code> directory."}, {"owner": {"reputation": 590, "user_id": 847154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41ee9dc375c8676a5d2645062c373d79?s=128&d=identicon&r=PG", "display_name": "Aristata", "link": "https://stackoverflow.com/users/847154/aristata"}, "edited": false, "score": 0, "creation_date": 1481846076, "post_id": 41132674, "comment_id": 69551078, "body": "I didn&#39;t put any ruby anywhere. I have tried your gem pristine, that does not work. I am feeling a little defeated here, I need an explanation about what might be going wrong but all I seem to be getting are fragments of things with no reason described behind them. Why do you think I have multiple ruby versions. What is the libruby file in the fist place? What would cause the wrong one to load -- those are the answers I need."}, {"owner": {"reputation": 880, "user_id": 7864424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Th956.jpg?s=128&g=1", "display_name": "Prateek Gupta", "link": "https://stackoverflow.com/users/7864424/prateek-gupta"}, "edited": false, "score": 0, "creation_date": 1582021639, "post_id": 41132674, "comment_id": 106624171, "body": "@Aristata, Did you find get the solution to it or not? I&#39;m also facing the same error. It would be great if you can share the solution. Thanks!"}, {"owner": {"reputation": 590, "user_id": 847154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41ee9dc375c8676a5d2645062c373d79?s=128&d=identicon&r=PG", "display_name": "Aristata", "link": "https://stackoverflow.com/users/847154/aristata"}, "reply_to_user": {"reputation": 880, "user_id": 7864424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Th956.jpg?s=128&g=1", "display_name": "Prateek Gupta", "link": "https://stackoverflow.com/users/7864424/prateek-gupta"}, "edited": false, "score": 0, "creation_date": 1582130484, "post_id": 41132674, "comment_id": 106673796, "body": "@PrateekGupta I wish I could share it - I am having a hard time even remembering the problem! If I had to guess I would say I ended up ensuring I only had one ruby version. I wish I could be more helpful, this was a lot of projects ago!!"}, {"owner": {"reputation": 880, "user_id": 7864424, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Th956.jpg?s=128&g=1", "display_name": "Prateek Gupta", "link": "https://stackoverflow.com/users/7864424/prateek-gupta"}, "edited": false, "score": 0, "creation_date": 1582188955, "post_id": 41132674, "comment_id": 106693607, "body": "Hi @Aristata, thanks for replying. I got it fixed by reinstalling ruby, somehow the ruby installation was messed up."}], "owner": {"reputation": 590, "user_id": 847154, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/41ee9dc375c8676a5d2645062c373d79?s=128&d=identicon&r=PG", "display_name": "Aristata", "link": "https://stackoverflow.com/users/847154/aristata"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2469, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1481738361, "creation_date": 1481673939, "last_edit_date": 1481738361, "question_id": 41132674, "link": "https://stackoverflow.com/questions/41132674/rake-causing-loaderror-libruby-so-2-1-cannot-open-shared-object-file-file-ex", "title": "Rake causing LoadError: libruby.so.2.1: cannot open shared object file - file exists", "body": "<p>I am trying to use the chef community cookbook <a href=\"https://github.com/ajgon/opsworks_ruby\" rel=\"nofollow noreferrer\">opsworks_ruby</a> to deploy a rails app. I am currently running into an issue with one of my gems, <a href=\"https://github.com/rails-sqlserver/tiny_tds\" rel=\"nofollow noreferrer\">tiny_tds</a> version <a href=\"https://github.com/rails-sqlserver/tiny_tds/tree/v0.9.5.beta.10\" rel=\"nofollow noreferrer\">0.9.5.beta.10</a>.</p>\n\n<p>When trying to migrate the database with the following command:</p>\n\n<pre><code>/usr/local/bin/bundle exec rake db:migrate\n</code></pre>\n\n<p>I am getting this error:</p>\n\n<pre><code>STDERR: rake aborted!\nLoadError: libruby.so.2.1: cannot open shared object file: No such file or directory - /srv/www/api/shared/vendor/bundle/ruby/2.2/extensions/x86_64-linux/2.2/tiny_tds-0.9.5.beta.10/tiny_tds/tiny_tds.so\n/srv/www/api/shared/vendor/bundle/ruby/2.2/gems/tiny_tds-0.9.5.beta.10/lib/tiny_tds.rb:36:in `require'\n/srv/www/api/shared/vendor/bundle/ruby/2.2/gems/tiny_tds-0.9.5.beta.10/lib/tiny_tds.rb:36:in `&lt;top (required)&gt;'\n/usr/local/share/ruby/gems/2.2/gems/bundler-1.13.6/lib/bundler/runtime.rb:91:in `require'\n/usr/local/share/ruby/gems/2.2/gems/bundler-1.13.6/lib/bundler/runtime.rb:91:in `block (2 levels) in require'\n/usr/local/share/ruby/gems/2.2/gems/bundler-1.13.6/lib/bundler/runtime.rb:86:in `each'\n/usr/local/share/ruby/gems/2.2/gems/bundler-1.13.6/lib/bundler/runtime.rb:86:in `block in require'\n/usr/local/share/ruby/gems/2.2/gems/bundler-1.13.6/lib/bundler/runtime.rb:75:in `each'\n/usr/local/share/ruby/gems/2.2/gems/bundler-1.13.6/lib/bundler/runtime.rb:75:in `require'\n/usr/local/share/ruby/gems/2.2/gems/bundler-1.13.6/lib/bundler.rb:106:in `require'\n</code></pre>\n\n<p>However when I ssh into the server and</p>\n\n<pre><code>file /srv/www/api/shared/vendor/bundle/ruby/2.2/extensions/x86_64-linux/2.2/tiny_tds-0.9.5.beta.10/tiny_tds/tiny_tds.so\n</code></pre>\n\n<p>I get this as a response:</p>\n\n<pre><code>[...]tiny_tds.so: ELF 64-bit LSB shared object, x86-64, version 1 (SYSV), dynamically linked, BuildID[sha1]=cce05b6143516778339554cb7b1e2db232bb155e, not stripped\n</code></pre>\n\n<p>So the file is clearly there, why can't it be found?</p>\n\n<p>I currently have ruby 2.2.4 installed.</p>\n\n<p>Calling </p>\n\n<pre><code>ldd /srv/www/api/shared/vendor/bundle/ruby/2.2/extensions/x86_64-linux/2.2/tiny_tds-0.9.5.beta.10/tiny_tds/tiny_tds.so\n</code></pre>\n\n<p>Gives me this:</p>\n\n<pre><code>linux-vdso.so.1 =&gt;  (0x00007ffe73dcf000)\nlibruby.so.2.1 =&gt; not found\nlibct.so.4 =&gt; not found\nlibsybdb.so.5 =&gt; not found\nlibpthread.so.0 =&gt; /lib64/libpthread.so.0 (0x00007fee58fe0000)\nlibdl.so.2 =&gt; /lib64/libdl.so.2 (0x00007fee58ddb000)\nlibcrypt.so.1 =&gt; /lib64/libcrypt.so.1 (0x00007fee58ba4000)\nlibm.so.6 =&gt; /lib64/libm.so.6 (0x00007fee588a2000)\nlibc.so.6 =&gt; /lib64/libc.so.6 (0x00007fee584df000)\n/lib64/ld-linux-x86-64.so.2 (0x0000556740bd7000)\nlibfreebl3.so =&gt; /lib64/libfreebl3.so (0x00007fee582dd000)\n</code></pre>\n\n<p>Also, looking into paths and whatnot:</p>\n\n<pre><code>$ echo $PATH\n&gt; /usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/aws/bin:/home/ec2-user/.local/bin:/home/ec2-user/bin\n\n$ echo $GEM_HOME\n&gt;\n\n$ echo $GEM_PATH\n&gt; \n\n$ which ruby\n&gt; /usr/bin/ruby\n\n$ /usr/bin/ruby -v\n&gt; ruby 2.2.4p230 (2015-12-16 revision 53155) [x86_64-linux-gnu]\n</code></pre>\n\n<p>I notice I have no GEM_HOME or GEM_PATH, but my ruby looks correct?</p>\n\n<p>Can anyone help me resolve this issue?</p>\n"}, {"tags": ["ruby", "selenium", "capybara"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481672471, "post_id": 41131268, "comment_id": 69469078, "body": "you can rescue that error. But maybe the error is being raised before your rescue block. Does <code>within_frame(&#39;blah&#39;) { }</code> raise it?"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1481725720, "post_id": 41131268, "comment_id": 69492488, "body": "no, the <code>find(:css, pf.LOC_BTN_SAVE_BLAH).click</code> produces an alert window which raises the error"}], "answers": [{"comments": [{"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1481729238, "post_id": 41133468, "comment_id": 69494879, "body": "sadly the unhandled alert error, went away, so I&#39;ll keep a watch and mark this answered as soon as possible."}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482161244, "post_id": 41133468, "comment_id": 69650530, "body": "Sadly the error is back, even with the fix, I added the entire error."}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482162367, "post_id": 41133468, "comment_id": 69651241, "body": "@TangibleDream which is line 37 of setup_sd.rb ?"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482162758, "post_id": 41133468, "comment_id": 69651524, "body": "within_frame(&#39;blah&#39;) do"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "reply_to_user": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482187659, "post_id": 41133468, "comment_id": 69664025, "body": "@TangibleDream Then that&#39;s the line that&#39;s raising the exception, you need to move your rescue outside of the within_frame \u2013  or --  accepting the alert is just causing another alert to open, in which case you need to fix that in your app"}, {"owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "edited": false, "score": 0, "creation_date": 1482247271, "post_id": 41133468, "comment_id": 69691248, "body": "I think that fixed it.  It moved along to the next issue which I think is fixed as well.  Thanks to the sporadic nature of this bug,  I won&#39;t know for sure until I witness it being bypassed.  Thanks Thomas"}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1481679736, "creation_date": 1481679736, "answer_id": 41133468, "question_id": 41131268, "link": "https://stackoverflow.com/questions/41131268/can-i-rescue-out-of-a-unhandledalerterror/41133468#41133468", "title": "Can I rescue out of a UnhandledAlertError?", "body": "<p>Selenium::WebDriver::Error::UnhandledAlertError can definitely be rescued , if you catch it at the end of the block where it was thrown.  Depending on which browser you are using you may (some browsers auto-clear when raising the error) need to clear the alert by calling <code>page.accept_alert</code> before continuing on, otherwise the next page action will re-raise the same error.</p>\n"}], "owner": {"reputation": 551, "user_id": 844645, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/95e55b1155026924f3f1263595e53ef8?s=128&d=identicon&r=PG", "display_name": "TangibleDream", "link": "https://stackoverflow.com/users/844645/tangibledream"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 117, "favorite_count": 0, "accepted_answer_id": 41133468, "answer_count": 1, "score": 0, "last_activity_date": 1482161179, "creation_date": 1481666247, "last_edit_date": 1482161179, "question_id": 41131268, "link": "https://stackoverflow.com/questions/41131268/can-i-rescue-out-of-a-unhandledalerterror", "title": "Can I rescue out of a UnhandledAlertError?", "body": "<p>If I get an error such as...</p>\n\n<pre><code>Modal dialog present: \"The data could not be loaded.\" (Selenium::WebDriver\n::Error::UnhandledAlertError)\n</code></pre>\n\n<p>Error Extended</p>\n\n<pre><code>     And save the product.\n     # features/step_definitions/setup_sd.rb:35\n  Modal dialog present: \"The data could not be loaded.\"(Selenium::WebDriver\n ::Error::UnhandledAlertError)\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profi\nle20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/command-p\nrocessor.js:12770:in `nsCommandProcessor.prototype.execute'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/driver-component.js:9576:in `Dispatcher.executeAs/&lt;'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/driver-component.js:9723:in `Resource.prototype.handle'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/driver-component.js:9670:in `Dispatcher.prototype.dispatch'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/driver-component.js:12544:in `WebDriverServer/&lt;.handle'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/httpd.js:2054:in `createHandlerFunc/&lt;'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/httpd.js:2387:in `ServerHandler.prototype.handleResponse'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/httpd.js:1223:in `Connection.prototype.process'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/httpd.js:1677:in `RequestReader.prototype._handleResponse'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/httpd.js:1525:in `RequestReader.prototype._processBody'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/httpd.js:1393:in `RequestReader.prototype.onInputStreamReady'\n  [remote server] resource://gre/components/nsPrompter.js:394:in `openModalWindow'\n  [remote server] resource://gre/components/nsPrompter.js:491:in `ModalPrompter.prototype.openPrompt'\n  [remote server] resource://gre/components/nsPrompter.js:543:in `ModalPrompter.prototype.alert'\n  [remote server] file:///C:/Users/blah/AppData/Local/Temp/webdriver-profile20161219-65588-1gtvf51/extensions/fxdriver@googlecode.com/components/prompt-service.js:4800:in `ObservingAlert.prototype.alert'\n  [remote server] http://10.20.13.39:17007/ScriptResource.axd?d=OwfU9dJwZwohiTGVGwSmnis5Sz77zh88m4xormA1BrE_-VNmQFnovvsDzNzH0qQCr6JjS2t6QbrSRBO86wKNXm1cO31z7GUAtLwQK7eaJqY5kZhHVmGxOxCJOEbh_mzvIE82nn2eWB69U7ZhzAQgCM43cXTVpLMGGjDVeilur_aPJt6ieH-q_9a1xO06Hhnb0&amp;t=5df05159:1:in `_z19F'\n  ./features/step_definitions/setup_sd.rb:37:in `/^save the product\\.$/'\n  features/product_setup/Setup05_template_var_textbox.feature:8:in `And save the product.'\n</code></pre>\n\n<p>can I rescue out?</p>\n\n<pre><code> When(/^save the product\\.$/) do\n   pf = blah_page.new\n   within_frame('blah') do\n     sleep(2)\n     begin\n       find(:css, pf.LOC_BTN_SAVE_BLAH).click\n     #rescue Selenium::WebDriver::Error::UnhandledAlertError #error still raises\n     rescue #error still raises\n       page.accept_alert\n       sleep(0.05)\n     end\n   end\n end\n</code></pre>\n\n<p>I have been able to rescue out of element_not_found, I was wondering if there is something preventing from rescuing out of this error type as well.</p>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby", "recursion", "flood-fill"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481668417, "post_id": 41131040, "comment_id": 69467755, "body": "Please read &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot;. We need the minimal code and input data that demonstrates the problem, along with your expected output. What error code do you get? Also, in Ruby we use snake_case for variable names. camelCaseIsTooHardToRead."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1481723225, "post_id": 41131040, "comment_id": 69490853, "body": "This <code>oldColor = array_1</code> makes no sense. Why are you discarding the argument and replacing it with a copy of the image?"}, {"owner": {"reputation": 11, "user_id": 7286595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c0945f24e2dab6de712138b6e8e8230?s=128&d=identicon&r=PG&f=1", "display_name": "LeeKay220", "link": "https://stackoverflow.com/users/7286595/leekay220"}, "edited": false, "score": 0, "creation_date": 1481819798, "post_id": 41131040, "comment_id": 69538537, "body": "My thought process was to have the oldColors contain what was originally there then to have newColors have the fill responsibility. Will this not work out? I&#39;m fairly new to ruby and would like to be pointed in the right direction to get this working"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7286595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c0945f24e2dab6de712138b6e8e8230?s=128&d=identicon&r=PG&f=1", "display_name": "LeeKay220", "link": "https://stackoverflow.com/users/7286595/leekay220"}, "edited": false, "score": 0, "creation_date": 1481695673, "post_id": 41131775, "comment_id": 69475243, "body": "Can you explain further? How would I go about correcting it? I havent gotten around to implementing boxHeight and boxWeight because I first wanted to make sure the recursive fill function works for at least one of the colours"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 1, "last_activity_date": 1481669277, "last_edit_date": 1481669277, "creation_date": 1481668689, "answer_id": 41131775, "question_id": 41131040, "link": "https://stackoverflow.com/questions/41131040/ruby-recursive-flood-it/41131775#41131775", "title": "Ruby Recursive flood-it", "body": "<p>This short-circuits your code execution:</p>\n\n<pre><code>if array_1[row][column] != oldColor\n  return\n</code></pre>\n\n<p>Once it hits <code>return</code> it returns <code>nil</code> from the method and nothing else will be evaluated.</p>\n\n<p><code>boxHeight</code> and <code>boxWeight</code> are never initialized and <code>newColor</code> gets overwritten by the <code>gets</code> which probably shouldn't happen.</p>\n\n<p>And finally, the code is missing a trailing <code>end</code>. I'd recommend using a tool to reformat or reindent your code automatically, which will really help avoid such problems.</p>\n"}, {"comments": [{"owner": {"reputation": 11, "user_id": 7286595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c0945f24e2dab6de712138b6e8e8230?s=128&d=identicon&r=PG&f=1", "display_name": "LeeKay220", "link": "https://stackoverflow.com/users/7286595/leekay220"}, "edited": false, "score": 0, "creation_date": 1481821906, "post_id": 41144212, "comment_id": 69539763, "body": "So doing one of those two will then allow it to exit the loop once it registers the change?"}], "tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 0, "last_activity_date": 1481723204, "creation_date": 1481723204, "answer_id": 41144212, "question_id": 41131040, "link": "https://stackoverflow.com/questions/41131040/ruby-recursive-flood-it/41144212#41144212", "title": "Ruby Recursive flood-it", "body": "<p>Ruby if statements don't work like in C or Java where you can write something like</p>\n\n<pre><code>if array_1[row][column] != oldColor\n  return\n</code></pre>\n\n<p>You either need an <code>end</code> or you need to put the if <em>after</em> the return.</p>\n\n<pre><code>if array_1[row][column] != oldColor\n  return\nend\n# or\nreturn if array_1[row][column] != oldColor\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 7286595, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c0945f24e2dab6de712138b6e8e8230?s=128&d=identicon&r=PG&f=1", "display_name": "LeeKay220", "link": "https://stackoverflow.com/users/7286595/leekay220"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 361, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481723204, "creation_date": 1481665286, "last_edit_date": 1481696308, "question_id": 41131040, "link": "https://stackoverflow.com/questions/41131040/ruby-recursive-flood-it", "title": "Ruby Recursive flood-it", "body": "<p>I'm trying to make a flood-fill that asks for user input starting from the top right corner of a randomly generated array filled with numbers 1-6 that are represented by 'colours'. I added the oldColor/newColor feature just now and I get error message and I'm not exactly sure why. Other then that, the algorithm keeps going on asking for input without printing what the new flood-fill looks like in each step.</p>\n\n<pre><code>    def floodfill(array_1, row, column, colours, oldColor, newColor)\n          #colours is an array of the 6 colours i'm going to be using\n          boxHeight = array_1.length\n          boxWeight = array_1[0].length\n          oldColor = array_1\n          #puts oldColor\n          print \"&gt; \"\n          newColor = gets.chomp.downcase\n\n          if array_1[row][column] != oldColor\n            return\n            if newColor == \"r\"\n              newColor = colours[:red]\n              array_1[row][column] = newColor\n              floodfill(array_1, row + 1, column, colours, newColor) # right\n              floodfill(array_1, row - 1, column, colours, newColor) # left\n              floodfill(array_1, row, column + 1, colours, newColor) # down\n              floodfill(array_1, row, column - 1, colours, newColor)# up\n              print_it\n            else\n              puts \"didnt get that\"\n              array_1.each do |row|\n                row.each do |c|\n                  print c\n                end\n              puts\n            end\n          end\n        end\n      end\nfloodfill(array_1,14,9,colours,0,0)\n</code></pre>\n\n<p>I cant directly post images, but here is what my output currently looks like and then the failure message \n<a href=\"https://imgur.com/a/88UrK\" rel=\"nofollow noreferrer\">http://imgur.com/a/88UrK</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "time"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1481706795, "post_id": 41130853, "comment_id": 69480484, "body": "BTW, I can&#39;t reproduce your first example. Are you sure that it works in Rails 3.x? I&#39;m getting an <code>ArgumentError</code>."}], "answers": [{"comments": [{"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1481665239, "post_id": 41130983, "comment_id": 69466273, "body": "Interesting, but how does that explain the fact that removing the space made it parse successfully?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1481665285, "post_id": 41130983, "comment_id": 69466295, "body": "@DiegoSalazar: parsing time is very hard. I guess there&#39;s a bug or two there. Or maybe it&#39;s even a feature."}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1481665495, "post_id": 41130983, "comment_id": 69466406, "body": "There are so many ways to write a time that there has to be conflicts. <code>mm&#47;dd</code> <code>dd&#47;mm</code> is a good example. It&#39;s not a bug, it&#39;s information theory."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 1, "creation_date": 1481665662, "post_id": 41130983, "comment_id": 69466492, "body": "@EricDuminil: yes, not talking about <code>mm&#47;dd</code> vs <code>dd&#47;mm</code>. That ambiguity is unresolvable for cases like <code>07&#47;12</code>. But how do we explain that it parses correctly without that space? I, as a human, would not parse that."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1481666290, "post_id": 41130983, "comment_id": 69466816, "body": "@DiegoSalazar: I vaguely remember reading a post here about exactly this issue (default date format changed with rails upgrade), but can&#39;t find it now. :("}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1481669730, "last_edit_date": 1481669730, "creation_date": 1481665022, "answer_id": 41130983, "question_id": 41130853, "link": "https://stackoverflow.com/questions/41130853/why-does-time-parse-fail-in-rails-4-and-5-but-not-in-rails-3-for-date-strings-wi/41130983#41130983", "title": "Why does Time.parse fail in Rails 4 and 5 but not in Rails 3 for date strings with a space between the date and time?", "body": "<p>Apparently, in Rails 4 and later, that string is interpreted as <code>dd/mm/yyyy</code> (as it <em>should</em>, if you ask me. To hell with <code>mm/dd/yyyy</code>).</p>\n\n<p>But if you want that, the proper solution would be to specify the format, not <code>gsub</code> random spaces!</p>\n\n<pre><code>Time.strptime \"12/13/2016 3:11 PM\", '%m/%d/%Y %H:%M %p'\n=&gt; 2016-12-13 15:11:00 -0500\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481665564, "post_id": 41130997, "comment_id": 69466446, "body": "I guess it&#39;s a matter of personal taste. It did save one whole character though!"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481665758, "post_id": 41130997, "comment_id": 69466551, "body": "I think it&#39;s more than my taste. Now you see <i>exactly</i> how many occurences you&#39;re trying to match. As opposed to <i>counting</i> them every time you read the regex."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1481665856, "post_id": 41130997, "comment_id": 69466611, "body": "Also you can use alternate regex delimiters and save on escaping slashes <code>%r[(\\d{2})&#47;(\\d{2})&#47;(\\d{4})]</code> :)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481671574, "post_id": 41130997, "comment_id": 69468804, "body": "Downvoter: feel free to explain why. This code works and answers the question just fine."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 0, "last_activity_date": 1481665392, "last_edit_date": 1481665392, "creation_date": 1481665095, "answer_id": 41130997, "question_id": 41130853, "link": "https://stackoverflow.com/questions/41130853/why-does-time-parse-fail-in-rails-4-and-5-but-not-in-rails-3-for-date-strings-wi/41130997#41130997", "title": "Why does Time.parse fail in Rails 4 and 5 but not in Rails 3 for date strings with a space between the date and time?", "body": "<p>If you're sure the date is in <code>mm/dd/yyyy</code> format, you could switch <code>dd</code> and <code>mm</code> with a regex :</p>\n\n<pre><code>Time.parse '12/13/2016 3:11 PM'.sub(/(\\d{2})\\/(\\d{2})\\/(\\d{4})/, '\\2/\\1/\\3')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481706094, "post_id": 41138360, "comment_id": 69480085, "body": "Interesting. Yeah, handling time is hard. And we&#39;re not even dealing with timezones here! :)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 1, "last_activity_date": 1481705704, "creation_date": 1481705704, "answer_id": 41138360, "question_id": 41130853, "link": "https://stackoverflow.com/questions/41130853/why-does-time-parse-fail-in-rails-4-and-5-but-not-in-rails-3-for-date-strings-wi/41138360#41138360", "title": "Why does Time.parse fail in Rails 4 and 5 but not in Rails 3 for date strings with a space between the date and time?", "body": "<p>Regarding the \"why\", this is what's happening:</p>\n\n<pre><code>Date._parse('12/13/2016 3:11 PM')\n#=&gt; {:hour=&gt;15, :min=&gt;11, :year=&gt;2016, :mon=&gt;13, :mday=&gt;12}\n</code></pre>\n\n<p>versus:</p>\n\n<pre><code>Date._parse('12/13/20163:11 PM')\n#=&gt; {:hour=&gt;15, :min=&gt;11, :mon=&gt;12, :mday=&gt;13}\n</code></pre>\n\n<p>Without a space, the year is not recognized as such and <code>12/13</code> becomes <code>mm/dd</code>.</p>\n"}], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 41130983, "answer_count": 3, "score": 1, "last_activity_date": 1481705704, "creation_date": 1481664472, "question_id": 41130853, "link": "https://stackoverflow.com/questions/41130853/why-does-time-parse-fail-in-rails-4-and-5-but-not-in-rails-3-for-date-strings-wi", "title": "Why does Time.parse fail in Rails 4 and 5 but not in Rails 3 for date strings with a space between the date and time?", "body": "<p>In investigating a bug I ran into after upgrading an old Rails 3 app to Rails 4, I noticed that Time.parse fails when this date string contains a space, but parses correctly when the space is removed:</p>\n\n<p>In Rails 3.3.33.5:</p>\n\n<pre><code>Time.parse \"12/13/2016 3:11 PM\"\n=&gt; 2016-12-13 15:11:00 -0500\n</code></pre>\n\n<p>But in Rails 4 and 5:</p>\n\n<pre><code>Time.parse \"12/13/2016 3:11 PM\"\nArgumentError: argument out of range\nfrom /Users/diego/.rvm/rubies/ruby-2.3.0/lib/ruby/2.3.0/time.rb:302:in `local'\n</code></pre>\n\n<p>But if I remove the space between the date and time it works:</p>\n\n<pre><code>Time.parse \"12/13/20163:11 PM\"\n=&gt; 2016-12-13 15:11:00 -0500\n</code></pre>\n\n<p>The previous also works in Rails 3. I'm stumped as to what happened between the two versions of Rails that broke Time parse when there's a space between the date and time. Any ideas?</p>\n\n<p>As a solution, because I need to be backwards compatible, I'm rescuing the ArgumentError and gsubbing the space out of the date string and trying again. Is there a better solution for this?</p>\n\n<p>Both examples were done in Ruby 2.2.5</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 5704, "user_id": 1236336, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/9b3d57108481b0576bad482a82e698e6?s=128&d=identicon&r=PG", "display_name": "Graham Slick", "link": "https://stackoverflow.com/users/1236336/graham-slick"}, "edited": false, "score": 0, "creation_date": 1481666971, "post_id": 41130463, "comment_id": 69467114, "body": "Why downvoting without explaining why ? Completely useless. If you think the question needs improvement or shouldn&#39;t be here, explain it to the OP so he/she learns."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 2, "last_activity_date": 1481663927, "last_edit_date": 1481663927, "creation_date": 1481662931, "answer_id": 41130483, "question_id": 41130463, "link": "https://stackoverflow.com/questions/41130463/ruby-on-rails-turn-each-iteration-into-an-array/41130483#41130483", "title": "Ruby on Rails turn each iteration into an array", "body": "<p>You can use <code>map</code>:</p>\n\n<pre><code>&lt;%= @state.map(&amp;:id) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2765, "user_id": 5864985, "user_type": "registered", "accept_rate": 95, "profile_image": "https://i.stack.imgur.com/UlhbW.jpg?s=128&g=1", "display_name": "Ronan Lopes", "link": "https://stackoverflow.com/users/5864985/ronan-lopes"}, "is_accepted": false, "score": 2, "last_activity_date": 1481662933, "creation_date": 1481662933, "answer_id": 41130485, "question_id": 41130463, "link": "https://stackoverflow.com/questions/41130463/ruby-on-rails-turn-each-iteration-into-an-array/41130485#41130485", "title": "Ruby on Rails turn each iteration into an array", "body": "<p><code>@state.map(&amp;:id)</code> would give you the same result!</p>\n"}, {"tags": [], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "is_accepted": true, "score": 3, "last_activity_date": 1481664318, "last_edit_date": 1481664318, "creation_date": 1481663422, "answer_id": 41130600, "question_id": 41130463, "link": "https://stackoverflow.com/questions/41130463/ruby-on-rails-turn-each-iteration-into-an-array/41130600#41130600", "title": "Ruby on Rails turn each iteration into an array", "body": "<p>There is a method that does just that!</p>\n\n<p>What you are looking for is the <code>map</code> method.</p>\n\n<blockquote>\n  <p>Creates a new array containing the values returned by the block.</p>\n</blockquote>\n\n<p><a href=\"http://apidock.com/ruby/Array/map\" rel=\"nofollow noreferrer\">http://apidock.com/ruby/Array/map</a></p>\n\n<p>The documentation states, creates an array containing the values returned by a block.</p>\n\n<pre><code>@state.map do |state|\n  state.id\nend\n=&gt; [1,2,3,...]\n</code></pre>\n\n<p>Which is the same as:</p>\n\n<pre><code>@state.map(&amp;:id)\n=&gt; [1,2,3,...]\n</code></pre>\n\n<p>But uses the Ruby Enumerable shorthand.</p>\n"}], "owner": {"reputation": 41, "user_id": 4351893, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/7e536cb57018260dfd1537489ff9ecdd?s=128&d=identicon&r=PG&f=1", "display_name": "Grant Leslie", "link": "https://stackoverflow.com/users/4351893/grant-leslie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 240, "favorite_count": 0, "accepted_answer_id": 41130600, "answer_count": 3, "score": 0, "last_activity_date": 1481664318, "creation_date": 1481662849, "last_edit_date": 1481663511, "question_id": 41130463, "link": "https://stackoverflow.com/questions/41130463/ruby-on-rails-turn-each-iteration-into-an-array", "title": "Ruby on Rails turn each iteration into an array", "body": "<p>I feel like this is such an easy question</p>\n\n<pre><code>&lt;% @state.cities.each do |city| %&gt;\n   &lt;%= city.id %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>puts the ids as follows:</p>\n\n<pre><code>1\n2\n3 etc...\n</code></pre>\n\n<p>How do I turn the iteration into an array?</p>\n\n<p>so it outputs as follows:</p>\n\n<pre><code>[1,2,3,4,etc...] \n</code></pre>\n"}, {"tags": ["ruby", "r", "macos", "terminal"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1481677191, "post_id": 41130326, "comment_id": 69470357, "body": "Do you still get the beeps if you run <code>ruby my_script.rb | tr -d &quot;\\a&quot;</code>?"}], "owner": {"reputation": 1160, "user_id": 488019, "user_type": "registered", "accept_rate": 97, "profile_image": "https://i.stack.imgur.com/YqT4e.png?s=128&g=1", "display_name": "Daniel Garc&#237;a Baena", "link": "https://stackoverflow.com/users/488019/daniel-garc%c3%ada-baena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 47, "favorite_count": 1, "answer_count": 0, "score": 3, "last_activity_date": 1481669233, "creation_date": 1481662279, "last_edit_date": 1481669233, "question_id": 41130326, "link": "https://stackoverflow.com/questions/41130326/teminal-beeps-with-rinruby", "title": "Teminal Beeps with rinruby", "body": "<p>I am using the snippet of code bellow for calling some R code from Ruby. I have been making calculations and it seems to work fine but when I run it in OS X Terminal I am hearing a beep for each R line. There is any way to avoid getting the beeps? Am I doing something wrong?</p>\n\n<p>Thanks in advance!</p>\n\n<pre><code>require 'rinruby'\n\nr = RinRuby.new(:echo =&gt; false)\nr.x = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11]\nr.y = [0, 0, 0.129, 0, 0.129, 0.13, 0.261, 0.131, 0.131, 0.263, 0, 0.398]\nr.eval &lt;&lt;EOF\n    lm1 &lt;- lm(y ~ x)\n    slope = lm1$coefficients[2]\nEOF\n\np r.pull(\"slope\")\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481663768, "post_id": 41129969, "comment_id": 69465497, "body": "If the code works and you want a better way you should consider using <a href=\"https://codereview.stackexchange.com\">Code Review</a> instead of <a href=\"https://stackoverflow.com\">Stack Overflow</a>."}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1481661766, "post_id": 41130060, "comment_id": 69464451, "body": "And it&#39;s all there is to it. Not sure there is a better/simpler approach :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1481661954, "post_id": 41130060, "comment_id": 69464571, "body": "or <code>hsh.flat_map { |*k, v| k * v }</code>"}], "tags": [], "owner": {"reputation": 60090, "user_id": 188031, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/p2YIF.jpg?s=128&g=1", "display_name": "tokland", "link": "https://stackoverflow.com/users/188031/tokland"}, "is_accepted": false, "score": 8, "last_activity_date": 1481661153, "creation_date": 1481661153, "answer_id": 41130060, "question_id": 41129969, "link": "https://stackoverflow.com/questions/41129969/how-to-create-an-array-from-a-hash-that-has-elements-and-frequencies/41130060#41130060", "title": "How to create an array from a hash that has elements and frequencies", "body": "<pre><code>arr = hsh.flat_map { |k, v| [k] * v }\n#=&gt; [\"a\", \"a\", \"b\", \"b\", \"b\", \"c\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": false, "score": 0, "last_activity_date": 1481661160, "creation_date": 1481661160, "answer_id": 41130062, "question_id": 41129969, "link": "https://stackoverflow.com/questions/41129969/how-to-create-an-array-from-a-hash-that-has-elements-and-frequencies/41130062#41130062", "title": "How to create an array from a hash that has elements and frequencies", "body": "<p>Your approach seems fine, but you can also write it like this</p>\n\n<pre><code>hash.flat_map { |k,v| v.times.map { k } }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1190, "user_id": 1047937, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cc0285786275cb21edfefbc3d527e6de?s=128&d=identicon&r=PG&f=1", "display_name": "dgmora", "link": "https://stackoverflow.com/users/1047937/dgmora"}, "is_accepted": true, "score": 2, "last_activity_date": 1481663983, "last_edit_date": 1481663983, "creation_date": 1481661307, "answer_id": 41130099, "question_id": 41129969, "link": "https://stackoverflow.com/questions/41129969/how-to-create-an-array-from-a-hash-that-has-elements-and-frequencies/41130099#41130099", "title": "How to create an array from a hash that has elements and frequencies", "body": "<p>You can do a one liner like:</p>\n\n<pre><code>hsh.map { |k,v| Array.new(v,k) }.flatten\n</code></pre>\n\n<p><em>map iterates as <code>each</code> and returns an array with the result of each iteration</em>. For each entry, you create a new array with of <code>v</code> elements with default value <code>k</code>. As the result of <code>map</code> will be an array of arrays, you need to flatten it.</p>\n\n<p>or </p>\n\n<pre><code>hsh.each_with_object([]) do|(k, v),arr| \n  v.times { arr &lt;&lt; k }\nend\n</code></pre>\n\n<p><em><code>each_with_object</code> iterates and gives you an object as well, which you pass initially</em>. Typically you use this object to accumulate data. It's similar to yours but you don't have to initialize the array in another line</p>\n\n<p>But honestly, they don't look very readable.</p>\n"}], "owner": {"reputation": 91, "user_id": 6003207, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/e4f2597a46fb264edcaff707f3ac86d9?s=128&d=identicon&r=PG&f=1", "display_name": "Sn_Srm", "link": "https://stackoverflow.com/users/6003207/sn-srm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 41130099, "answer_count": 3, "score": 1, "last_activity_date": 1481663983, "creation_date": 1481660705, "last_edit_date": 1481663925, "question_id": 41129969, "link": "https://stackoverflow.com/questions/41129969/how-to-create-an-array-from-a-hash-that-has-elements-and-frequencies", "title": "How to create an array from a hash that has elements and frequencies", "body": "<p>I have a hash where each key corresponds to its frequency:</p>\n\n<pre><code>hsh = {'a' =&gt; 2, 'b' =&gt; 3, 'c' =&gt; 1}\n</code></pre>\n\n<p>which I want to break down into an array:</p>\n\n<pre><code>arr = ['a', 'a', 'b', 'b', 'b', 'c']\n</code></pre>\n\n<p>I used the following approach which works fine, but is there a better way to do it?</p>\n\n<pre><code>arr = []\nhsh.each do |x,y|\n  y.times do\n    arr &lt;&lt; x\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "heroku", "puma"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1481660542, "post_id": 41129751, "comment_id": 69463754, "body": "That looks pretty average to me. The high &quot;floor&quot; is probably because Puma keeps your Rails application spun up and ready to go. I would only really worry if it starts to spike or stays at an elevated level."}, {"owner": {"reputation": 423, "user_id": 5431754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5863d37dc94dc07fa2341f87605a97a3?s=128&d=identicon&r=PG&f=1", "display_name": "Parker ", "link": "https://stackoverflow.com/users/5431754/parker"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481660758, "post_id": 41129751, "comment_id": 69463886, "body": "Thanks for the clarification, Max. As my application gets more traffic, does the memory usage increase at a linear rate, i.e. Im going to need 512MB of memory if my traffic now doubles? Or is it more like a natural log graph where the memory usage increases at a diminishing rate as traffic increases?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1481661377, "post_id": 41129751, "comment_id": 69464216, "body": "Its usually more like a natural log graph."}, {"owner": {"reputation": 423, "user_id": 5431754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5863d37dc94dc07fa2341f87605a97a3?s=128&d=identicon&r=PG&f=1", "display_name": "Parker ", "link": "https://stackoverflow.com/users/5431754/parker"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481662885, "post_id": 41129751, "comment_id": 69465046, "body": "Thank you for the help Max."}], "owner": {"reputation": 423, "user_id": 5431754, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5863d37dc94dc07fa2341f87605a97a3?s=128&d=identicon&r=PG&f=1", "display_name": "Parker ", "link": "https://stackoverflow.com/users/5431754/parker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 760, "favorite_count": 1, "answer_count": 0, "score": 2, "last_activity_date": 1481659938, "creation_date": 1481659938, "question_id": 41129751, "link": "https://stackoverflow.com/questions/41129751/heroku-memory-usage-high-in-rails-app", "title": "Heroku memory usage high in rails app", "body": "<p>I have a Ruby on Rails application deployed with Heroku; it has one Standard-1X web dyno (512MB) and one Standard-1X worker dyno (512MB). I use Puma and Redis (with RedisToGo) and Sidekiq for background jobs.</p>\n\n<p>I regularly check the metrics for traffic and memory usage, etc. in the Heroku dashboard. I'm a little confused because my app seems to be using a high amount of memory considering its activity. </p>\n\n<p>Every day it really only gets a few visits from a couple users and a few visits from web crawlers. Despite this low amount of traffic, my web dyno memory usage is pretty high. On most days, the graph looks like this for the web dyno memory usage:\n<a href=\"https://i.stack.imgur.com/AogFx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AogFx.png\" alt=\"enter image description here\"></a></p>\n\n<p>As you can see, it sits at around 256MB all day (the dip on the left is a daily dyno restart).</p>\n\n<p>On the other hand, the <em>worker</em> dyno's average memory usage total is about 112 MB.</p>\n\n<p>Is there an explanation for these relatively high memory usages? Or are these simply typical for a deployed application? I've looked at other answers on StackOverflow and it doesn't look like a memory leak.</p>\n\n<p>In case it helps, here is my Procfile and my Puma and Redis initializers.</p>\n\n<p><strong>Procfile</strong></p>\n\n<pre><code>web: bundle exec puma -C config/puma.rb\nworker: bundle exec sidekiq -c 5 -v\n</code></pre>\n\n<p><strong>Puma.rb</strong></p>\n\n<pre><code>workers Integer(ENV['WEB_CONCURRENCY'] || 2)\nthreads_count = Integer(ENV['RAILS_MAX_THREADS'] || 5)\nthreads threads_count, threads_count\npreload_app!\nrackup      DefaultRackup\nport        ENV['PORT']     || 3000\nenvironment ENV['RACK_ENV'] || 'development'\non_worker_boot do\n      ActiveRecord::Base.establish_connection\nend\n</code></pre>\n\n<p><strong>Redis.rb</strong></p>\n\n<pre><code>uri = ENV[\"REDISTOGO_URL\"] || \"redis://localhost:6379/\"\nREDIS = Redis.new(:url =&gt; uri)\n</code></pre>\n\n<p>Thanks in advance for any tips.</p>\n"}, {"tags": ["ruby", "rubygems", "bundler", "puppet"], "answers": [{"comments": [{"owner": {"reputation": 4459, "user_id": 127251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b6273d6505f5cead55793f95dbe7873?s=128&d=identicon&r=PG", "display_name": "Paul Chernoch", "link": "https://stackoverflow.com/users/127251/paul-chernoch"}, "edited": false, "score": 1, "creation_date": 1481661696, "post_id": 41129988, "comment_id": 69464419, "body": "Yes, 1.9 is old, but we are upgrading from 1.8.7! I am aware of HOW to specify a version, the question is finding out WHICH version of bundler goes with with 1.9.3. We are installing bundler using apt-get install."}, {"owner": {"reputation": 1190, "user_id": 1047937, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cc0285786275cb21edfefbc3d527e6de?s=128&d=identicon&r=PG&f=1", "display_name": "dgmora", "link": "https://stackoverflow.com/users/1047937/dgmora"}, "reply_to_user": {"reputation": 4459, "user_id": 127251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b6273d6505f5cead55793f95dbe7873?s=128&d=identicon&r=PG", "display_name": "Paul Chernoch", "link": "https://stackoverflow.com/users/127251/paul-chernoch"}, "edited": false, "score": 0, "creation_date": 1481662078, "post_id": 41129988, "comment_id": 69464636, "body": "That&#39;s a thing that feels weird for me :) (I&#39;m just not familiar with installing it that way). I guess you can&#39;t install bundler doing <code>gem install bundler</code> and forget about what&#39;s version is valid or not, right?"}, {"owner": {"reputation": 1190, "user_id": 1047937, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cc0285786275cb21edfefbc3d527e6de?s=128&d=identicon&r=PG&f=1", "display_name": "dgmora", "link": "https://stackoverflow.com/users/1047937/dgmora"}, "reply_to_user": {"reputation": 4459, "user_id": 127251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b6273d6505f5cead55793f95dbe7873?s=128&d=identicon&r=PG", "display_name": "Paul Chernoch", "link": "https://stackoverflow.com/users/127251/paul-chernoch"}, "edited": false, "score": 0, "creation_date": 1481662168, "post_id": 41129988, "comment_id": 69464698, "body": "Anyhow, does it work if you check bundler gemspec? There it states which ruby version and rubygem versions it needs <a href=\"https://github.com/bundler/bundler/blob/master/bundler.gemspec\" rel=\"nofollow noreferrer\">github.com/bundler/bundler/blob/master/bundler.gemspec</a>"}, {"owner": {"reputation": 4459, "user_id": 127251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b6273d6505f5cead55793f95dbe7873?s=128&d=identicon&r=PG", "display_name": "Paul Chernoch", "link": "https://stackoverflow.com/users/127251/paul-chernoch"}, "edited": false, "score": 1, "creation_date": 1481663369, "post_id": 41129988, "comment_id": 69465297, "body": "I have been instructed to spot check our rails2 application to see if bundle install works and the application continues to come up, which should be an adequate test. And yes, one normally will install bundler using gem install, but in puppet it is so EASY to use apt-get that we are already doing it that way."}], "tags": [], "owner": {"reputation": 1190, "user_id": 1047937, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/cc0285786275cb21edfefbc3d527e6de?s=128&d=identicon&r=PG&f=1", "display_name": "dgmora", "link": "https://stackoverflow.com/users/1047937/dgmora"}, "is_accepted": false, "score": -1, "last_activity_date": 1481660788, "creation_date": 1481660788, "answer_id": 41129988, "question_id": 41129731, "link": "https://stackoverflow.com/questions/41129731/how-do-i-find-which-versions-of-ruby-gem-and-bundler-are-compatible/41129988#41129988", "title": "How do I find which versions of ruby, gem and bundler are compatible?", "body": "<p>It might be helpful if you indicate the problem, or what you're trying to do. Nevertheless:</p>\n\n<p><code>gem</code> is a command that is built-in in ruby from 1.9+, so whatever comes installed with Ruby should be fine.</p>\n\n<p><code>bunlder</code> is a RubyGem, normally installed by doing <code>gem install bundler</code>. You can specify the version by doing <code>gem install -v &lt;version&gt;</code>. Either it gets installed correctly or you get an error. Can you install bundler doing that?</p>\n\n<p>And lastly, unless you need it for a specific reason, 1.9 is very old :)</p>\n"}], "owner": {"reputation": 4459, "user_id": 127251, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/9b6273d6505f5cead55793f95dbe7873?s=128&d=identicon&r=PG", "display_name": "Paul Chernoch", "link": "https://stackoverflow.com/users/127251/paul-chernoch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 614, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1481660788, "creation_date": 1481659829, "question_id": 41129731, "link": "https://stackoverflow.com/questions/41129731/how-do-i-find-which-versions-of-ruby-gem-and-bundler-are-compatible", "title": "How do I find which versions of ruby, gem and bundler are compatible?", "body": "<p>I am using puppet to install ruby 1.9.3 as the system ruby on an Ubuntu Trusty Vagrant container. I also install Bundler. I am told that \"gem\" is installed as part of the installation of ruby.</p>\n\n<ul>\n<li><p>How do I know which versions of gem go with this version of ruby?</p></li>\n<li><p>How do I know which versions of bundler go with this version of ruby?</p></li>\n<li><p>Here is a fragment of puppet code:</p>\n\n<p>$other_reqs = [\n    ...\n    'ruby1.9.3',\n    'ruby-bundler',\n    'rubygems-integration',\n    ...\n  ]</p>\n\n<p>package{ $other_reqs: ensure => 'installed'} -> Package['percona-toolkit']</p></li>\n</ul>\n\n<p>The package declaration will default to using apt-get to download packages. Clearly the line with 'ruby1.9.3' will get the 1.9.3 version of ruby. It also installed gem 1.8.23. Is this a compatible version of gem? How do I know?</p>\n\n<p>The line with 'ruby-bundler' installed Bundler version 1.3.5. Is this a compatible version of Bundler? Or should I indicate a specific version in my requirements array? Where ought I look to find this information?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-administrate", "administrate"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1481659492, "post_id": 41129581, "comment_id": 69463180, "body": "<a href=\"https://github.com/thoughtbot/administrate/issues/502\" rel=\"nofollow noreferrer\">github.com/thoughtbot/administrate/issues/502</a>"}], "answers": [{"comments": [{"owner": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "edited": false, "score": 0, "creation_date": 1481756921, "post_id": 41130229, "comment_id": 69509529, "body": "do I place it back into the routes after deleting it and running the command?"}, {"owner": {"reputation": 1454, "user_id": 6509507, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/IU0E8.jpg?s=128&g=1", "display_name": "Blackcoat77", "link": "https://stackoverflow.com/users/6509507/blackcoat77"}, "reply_to_user": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "edited": false, "score": 1, "creation_date": 1481862943, "post_id": 41130229, "comment_id": 69554983, "body": "No need. Just run : <code>rails generate administrate:install</code>  again and it will generate routes. But before doing it, be sure that you have some models installed."}, {"owner": {"reputation": 1454, "user_id": 6509507, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/IU0E8.jpg?s=128&g=1", "display_name": "Blackcoat77", "link": "https://stackoverflow.com/users/6509507/blackcoat77"}, "reply_to_user": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "edited": false, "score": 1, "creation_date": 1481865982, "post_id": 41130229, "comment_id": 69555740, "body": "I tried to install administrate, but I run into multiple errors, and dependency problems. I prefer this rails_admin gem instead: (<a href=\"https://github.com/sferik/rails_admin\" rel=\"nofollow noreferrer\">github.com/sferik/rails_admin</a>)  There is a nice tutorial about administrate from this link: (<a href=\"https://gorails.com/episodes/administrate\" rel=\"nofollow noreferrer\">gorails.com/episodes/administrate</a>)"}, {"owner": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "edited": false, "score": 1, "creation_date": 1481869442, "post_id": 41130229, "comment_id": 69556904, "body": "yeah I decided I am just going to go with rails_admin. The reason why administrate was so appealing to me was the fact that it is super flexible. But I will just go with rails_admin. It seems like administrate still has some issues it needs to figure out."}, {"owner": {"reputation": 1454, "user_id": 6509507, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/IU0E8.jpg?s=128&g=1", "display_name": "Blackcoat77", "link": "https://stackoverflow.com/users/6509507/blackcoat77"}, "reply_to_user": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "edited": false, "score": 1, "creation_date": 1481897242, "post_id": 41130229, "comment_id": 69572000, "body": "Totally agree. Rails_admin can be flexible too, after you set up properly configuration. On the other side it can be tricky, once CanCanCan and Devise kick in. There are plenty of good tuts around to start with:   <a href=\"https://youtu.be/agzm_O-pZFE\" rel=\"nofollow noreferrer\">link</a>  <a href=\"https://github.com/sferik/rails_admin/wiki/Cancancan\" rel=\"nofollow noreferrer\">link</a>"}], "tags": [], "owner": {"reputation": 1454, "user_id": 6509507, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/IU0E8.jpg?s=128&g=1", "display_name": "Blackcoat77", "link": "https://stackoverflow.com/users/6509507/blackcoat77"}, "is_accepted": true, "score": 1, "last_activity_date": 1481896513, "last_edit_date": 1481896513, "creation_date": 1481661858, "answer_id": 41130229, "question_id": 41129581, "link": "https://stackoverflow.com/questions/41129581/undefined-method-camelize-for-nilnilclass-nomethoderror-in-rails-using-admi/41130229#41130229", "title": "Undefined method `camelize&#39; for nil:NilClass (NoMethodError) in Rails using Administrate framework", "body": "<p>Try deleting generated code from <strong>routes.rb</strong>:</p>\n\n<pre><code>  namespace :admin do\n    root to: \"#index\"\n  end\n</code></pre>\n\n<p>and run again:</p>\n\n<p><code>rails generate administrate:install</code>:</p>\n"}], "owner": {"reputation": 179, "user_id": 6753997, "user_type": "registered", "accept_rate": 44, "profile_image": "https://i.stack.imgur.com/8KICN.png?s=128&g=1", "display_name": "jshaf", "link": "https://stackoverflow.com/users/6753997/jshaf"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 728, "favorite_count": 0, "accepted_answer_id": 41130229, "answer_count": 1, "score": 1, "last_activity_date": 1481896513, "creation_date": 1481659252, "last_edit_date": 1592644375, "question_id": 41129581, "link": "https://stackoverflow.com/questions/41129581/undefined-method-camelize-for-nilnilclass-nomethoderror-in-rails-using-admi", "title": "Undefined method `camelize&#39; for nil:NilClass (NoMethodError) in Rails using Administrate framework", "body": "<p>I am trying to use Administrate to create a customizable/flexible admin dashboard for a web app I am working on. I have followed the instructions on <a href=\"https://github.com/thoughtbot/administrate\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/administrate</a></p>\n<p>I keep getting this recurring error:</p>\n<pre><code>`block in class_name': undefined method `camelize' for nil:NilClass (NoMethodError)\n</code></pre>\n<p>even though I create a Admin model (as suggested by previous posts and questions). The steps I took:</p>\n<ol>\n<li>rails generate model Admin</li>\n<li>rake db:migrate</li>\n<li>rails generate administrate:install</li>\n</ol>\nroutes.rb\n<pre><code>Rails.application.routes.draw do\n\n  namespace :admin do\n    root to: &quot;#index&quot;\n  end\n  # welcome\n  root 'welcome#index'\n  get 'welcome/index'\nend \n</code></pre>\n<p>Please let me know if there is anything else I can provide to help you answer the question!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1481664243, "post_id": 41129502, "comment_id": 69465743, "body": "Welcome to Stack Overflow. Please read &quot;<a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>&quot; and its included links, along with &quot;<a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>&quot; and <a href=\"http://meta.stackoverflow.com/q/261592/128421\">meta.stackoverflow.com/q/261592/128421</a>. We&#39;d like to know what you tried and what problem you had. If you didn&#39;t try, why not? As is, it looks like you want us to solve the problem for you or recommend tools, both of which are off-topic."}], "answers": [{"tags": [], "owner": {"reputation": 3945, "user_id": 2325598, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/wbO59.jpg?s=128&g=1", "display_name": "Dan Rubio", "link": "https://stackoverflow.com/users/2325598/dan-rubio"}, "is_accepted": false, "score": 0, "last_activity_date": 1481661146, "creation_date": 1481661146, "answer_id": 41130057, "question_id": 41129502, "link": "https://stackoverflow.com/questions/41129502/how-to-filter-specific-urls-from-rails-log/41130057#41130057", "title": "How to filter specific URLs from Rails&#39; log", "body": "<p>I believe this is what you want:</p>\n\n<p><a href=\"https://github.com/evrone/quiet_assets\" rel=\"nofollow noreferrer\">Quiet Assets Gem</a></p>\n"}], "owner": {"reputation": 3947, "user_id": 278823, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/WOF8F.png?s=128&g=1", "display_name": "Kalyan Maddu", "link": "https://stackoverflow.com/users/278823/kalyan-maddu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 106, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1481664101, "creation_date": 1481658982, "last_edit_date": 1481664101, "question_id": 41129502, "link": "https://stackoverflow.com/questions/41129502/how-to-filter-specific-urls-from-rails-log", "title": "How to filter specific URLs from Rails&#39; log", "body": "<p>How can I filter specific URLs from appearing in Rails logs in Development environment. </p>\n\n<p>For example, I do not want this to appear in my development log: </p>\n\n<pre><code>Started GET \"/uploads/photos/1/image.jpg\" for ::1 at 2016-12-13 14:36:42 -0500\nDEBUG: Chewy strategies stack: [2] &lt;- atomic @ /Users/kalyanmaddu/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/chewy-0.8.4/lib/chewy/railtie.rb:17\nActionController::RoutingError (No route matches [GET] \"/uploads/photos/1/image.jpg\"):\n  actionpack (4.2.6) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'\n  newrelic_rpm (3.15.2.317)\n...\n</code></pre>\n\n<p>I am on Rails 4.2.6.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "openshift", "production"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481662877, "post_id": 41129494, "comment_id": 69465042, "body": "Did you try actually looking at the logs? <a href=\"https://developers.openshift.com/managing-your-applications/log-files.html\" rel=\"nofollow noreferrer\">developers.openshift.com/managing-your-applications/&hellip;</a>"}, {"owner": {"reputation": 599, "user_id": 5903989, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d4364dc9b6676df2c8f37c0c05d3d910?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/5903989/simon"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481671984, "post_id": 41129494, "comment_id": 69468934, "body": "I stumbled across the command <code>oc logs dc&#47;&lt;app&gt;</code> and will write its response on my question, thanks ;)"}], "answers": [{"tags": [], "owner": {"reputation": 599, "user_id": 5903989, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d4364dc9b6676df2c8f37c0c05d3d910?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/5903989/simon"}, "is_accepted": true, "score": 1, "last_activity_date": 1481674193, "creation_date": 1481674193, "answer_id": 41132705, "question_id": 41129494, "link": "https://stackoverflow.com/questions/41129494/openshift-nextgen-and-rails-an-unhandled-lowlevel-error-occurred/41132705#41132705", "title": "OpenShift NextGen and Rails - An unhandled lowlevel error occurred", "body": "<p>Solved. I found out eventually the <code>rake secret</code> command generates a hash for you, then used <code>oc env dc/&lt;app&gt; SECRET_KEY_BASE=&lt;hash&gt;</code> and rebuilt the app with <code>oc start-build &lt;app&gt;</code></p>\n"}], "owner": {"reputation": 599, "user_id": 5903989, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d4364dc9b6676df2c8f37c0c05d3d910?s=128&d=identicon&r=PG", "display_name": "Simon", "link": "https://stackoverflow.com/users/5903989/simon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 118, "favorite_count": 0, "accepted_answer_id": 41132705, "answer_count": 1, "score": 0, "last_activity_date": 1481674193, "creation_date": 1481658958, "last_edit_date": 1481673504, "question_id": 41129494, "link": "https://stackoverflow.com/questions/41129494/openshift-nextgen-and-rails-an-unhandled-lowlevel-error-occurred", "title": "OpenShift NextGen and Rails - An unhandled lowlevel error occurred", "body": "<p>I'm an OpenShift newbie and just a while ago I managed to deploy a basic Rails app with the Next Gen console.\nI did a few tweaks to the app, namely created a home controller with</p>\n\n<pre><code>`rails g controller home index`\n</code></pre>\n\n<p>and updated the <code>config/routes.rb</code> file by setting the root route to <code>root 'home#index'</code> instead of <code>get 'home/index'</code>.\nNow the local rails server points correctly to the index page when running in development environment, so there is no problem at all.\nBut when I pushed the updated content to the git remote repository and and started a new build with</p>\n\n<pre><code>oc start-build &lt;app&gt;\n</code></pre>\n\n<p>and reloaded the page with the OpenShift production environment, nothing is shown but</p>\n\n<pre><code>An unhandled lowlevel error occurred. The application logs may have details.\n</code></pre>\n\n<p>Edit: the command <code>oc logs dc/&lt;app&gt;</code> returned me this as \"root error\":</p>\n\n<pre><code>#&lt;RuntimeError: Missing `secret_key_base` for 'production' environment, set this value in `config/secrets.yml`&gt;\n</code></pre>\n\n<p>Then my <code>config/secrets.yml</code> in the production section reads:</p>\n\n<pre><code># Do not keep production secrets in the repository,\n# instead read values from the environment.\nproduction:\n  secret_key_base: &lt;%= ENV[\"SECRET_KEY_BASE\"] %&gt;\n</code></pre>\n\n<p>Now I guess this has to do with setting up environment variables in an OpenShift environment. I found out the command</p>\n\n<pre><code>oc env dc/&lt;app&gt; &lt;ENV_VARIABLE&gt;=&lt;value&gt;\n</code></pre>\n\n<p>from <a href=\"https://docs.openshift.com/enterprise/3.0/dev_guide/environment_variables.html#set-environment-variables\" rel=\"nofollow noreferrer\">this guide</a>. Is it the correct one? If yes, how to generate a proper SECRET_KEY_BASE value?</p>\n\n<p>Any help is of course highly appreciated, thank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "selenium", "watir-webdriver", "minitest"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1481660138, "post_id": 41129478, "comment_id": 69463526, "body": "Have you updated your Chromedriver to one that supports Chrome v54?"}, {"owner": {"reputation": 11, "user_id": 7292829, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kIK7JxW3DfM/AAAAAAAAAAI/AAAAAAAADN0/Np_9HZ-AQ9s/photo.jpg?sz=128", "display_name": "Nick Brill", "link": "https://stackoverflow.com/users/7292829/nick-brill"}, "reply_to_user": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 0, "creation_date": 1481664168, "post_id": 41129478, "comment_id": 69465704, "body": "Thanks for the reply Justin.  Unfortunately, updating to v2.26 of ChromeDriver didn&#39;t solve my issue."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7292829, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kIK7JxW3DfM/AAAAAAAAAAI/AAAAAAAADN0/Np_9HZ-AQ9s/photo.jpg?sz=128", "display_name": "Nick Brill", "link": "https://stackoverflow.com/users/7292829/nick-brill"}, "edited": false, "score": 0, "creation_date": 1481664197, "post_id": 41130175, "comment_id": 69465722, "body": "Thanks for the reply titusfortner.  Unfortunately, updating to v2.26 of ChromeDriver didn&#39;t solve my issue."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1481661650, "creation_date": 1481661650, "answer_id": 41130175, "question_id": 41129478, "link": "https://stackoverflow.com/questions/41129478/blank-page-opened-when-trying-to-start-a-selenium-test-on-chrome-v54-0-2810-98-a/41130175#41130175", "title": "Blank page opened when trying to start a Selenium test on Chrome v54.0.2810.98 and Selenium webdriver 2.53.0", "body": "<p>The answer to your question is yes.</p>\n\n<p>Like Justin suggested, the most important factor is keeping <a href=\"https://sites.google.com/a/chromium.org/chromedriver/downloads\" rel=\"nofollow noreferrer\">chromedriver version</a> matched with Chrome browser version. </p>\n\n<p>Beyond that, the latest of everything provides a number of benefits. watir-webdriver is deprecated in favor of Watir 6.0, which requires selenium 3, which requires updating to at least ruby 2.0, but ideally to a supported version of ruby. :-)</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 7292829, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kIK7JxW3DfM/AAAAAAAAAAI/AAAAAAAADN0/Np_9HZ-AQ9s/photo.jpg?sz=128", "display_name": "Nick Brill", "link": "https://stackoverflow.com/users/7292829/nick-brill"}, "is_accepted": false, "score": 1, "last_activity_date": 1481836769, "creation_date": 1481836769, "answer_id": 41173503, "question_id": 41129478, "link": "https://stackoverflow.com/questions/41129478/blank-page-opened-when-trying-to-start-a-selenium-test-on-chrome-v54-0-2810-98-a/41173503#41173503", "title": "Blank page opened when trying to start a Selenium test on Chrome v54.0.2810.98 and Selenium webdriver 2.53.0", "body": "<p>Running <code>rm -rf ~/.chromedriver-helper</code> solved this issue.</p>\n"}], "owner": {"reputation": 11, "user_id": 7292829, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-kIK7JxW3DfM/AAAAAAAAAAI/AAAAAAAADN0/Np_9HZ-AQ9s/photo.jpg?sz=128", "display_name": "Nick Brill", "link": "https://stackoverflow.com/users/7292829/nick-brill"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1481975038, "creation_date": 1481658933, "last_edit_date": 1481975038, "question_id": 41129478, "link": "https://stackoverflow.com/questions/41129478/blank-page-opened-when-trying-to-start-a-selenium-test-on-chrome-v54-0-2810-98-a", "title": "Blank page opened when trying to start a Selenium test on Chrome v54.0.2810.98 and Selenium webdriver 2.53.0", "body": "<p>I am trying to Start a Selenium test in Chrome but I am only seeing a blank page.  This only started happening after updating to the version 54.0.2810.98 (64-bit) of Chrome.  </p>\n\n<p>This is the version of <code>watir-webdriver</code> I am using:  <code>0.7.0.8.</code></p>\n\n<pre><code>OS Version:  10.11.6, El Capitan\n</code></pre>\n\n<p>My questions are:</p>\n\n<p>Does my combination of watir-webdriver, selenium-webdriver work with the latest version of Chrome?</p>\n\n<p>If it does, what do i need to do to get it running again?</p>\n\n<p>If not, do I need to update to Selenium3?  </p>\n\n<p>Here is the stack trace:</p>\n\n<pre><code>Minitest::UnexpectedError: Errno::ECONNREFUSED: Connection refused - connect(2)\n    /Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:763:in `initialize'\n    /Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:763:in `open'\n    /Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:763:in `block in connect'\n    /Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/timeout.rb:69:in `timeout'\n    /Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/timeout.rb:100:in `timeout'\n    /Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:763:in `connect'\n    /Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:756:in `do_start'\n    /Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:745:in `start'\n    /Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:1285:in `request'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/default.rb:107:in `response_for'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/default.rb:58:in `request'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/common.rb:59:in `call'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/bridge.rb:649:in `raw_execute'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/bridge.rb:627:in `execute'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/bridge.rb:238:in `getWindowHandles'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/common/target_locator.rb:75:in `ensure in window'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/common/target_locator.rb:78:in `window'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/watir-webdriver-0.7.0.8/lib/watir-webdriver/window.rb:193:in `use'\n    /Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/watir-webdriver-0.7.0.8/lib/watir-webdriver/window.rb:96:in `maximize'\n    /Users/nickbrill/sportngin/selenium-finance/test/utilities/selenium_utilities.rb:44:in `start_selenium'\n    /Users/nickbrill/sportngin/selenium-finance/test/base_test.rb:12:in `setup'\n/Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:763:in `initialize'\n/Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:763:in `open'\n/Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:763:in `block in connect'\n/Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/timeout.rb:69:in `timeout'\n/Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/timeout.rb:100:in `timeout'\n/Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:763:in `connect'\n/Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:756:in `do_start'\n/Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:745:in `start'\n/Users/nickbrill/.rvm/rubies/ruby-1.9.3-p551/lib/ruby/1.9.1/net/http.rb:1285:in `request'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/default.rb:107:in `response_for'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/default.rb:58:in `request'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/http/common.rb:59:in `call'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/bridge.rb:649:in `raw_execute'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/bridge.rb:627:in `execute'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/remote/bridge.rb:238:in `getWindowHandles'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/common/target_locator.rb:75:in `ensure in window'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/selenium-webdriver-2.53.0/lib/selenium/webdriver/common/target_locator.rb:78:in `window'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/watir-webdriver-0.7.0.8/lib/watir-webdriver/window.rb:193:in `use'\n/Users/nickbrill/.rvm/gems/ruby-1.9.3-p551@selenium-finance/gems/watir-webdriver-0.7.0.8/lib/watir-webdriver/window.rb:96:in `maximize'\n</code></pre>\n"}, {"tags": ["ruby", "recursion"], "comments": [{"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 1, "creation_date": 1481661379, "post_id": 41128857, "comment_id": 69464220, "body": "If it&#39;s any comfort, this code is procedural and awful.  For example, the expression &quot;part_length.to_l &gt; node.rect[:length].to_l &quot; could be a method #is_too_long, and many of the other expressions could similarly be methods in their own right. The entire findBestFit method ought to be a class, and &quot;findBestFit(node.left, part_length, part_width)&quot; ought instead to be &quot;BestFit.new(node: node.left, part: part).call&quot;. The good news is that you have an excellent learning opportunity in which you turn this procedural mess into properly object-oriented code: <a href=\"http://www.poodr.com\" rel=\"nofollow noreferrer\">poodr.com</a>"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "edited": false, "score": 0, "creation_date": 1481663610, "post_id": 41128857, "comment_id": 69465410, "body": "to compound on what @DavidAldridge said the early returns (other than the initial one <code>return nil if node==nil</code> which would be better as <code>return node unless node</code>) are awful as well. This should be extrapolated into a class to handle the logic and would offer a much cleaner interface and more logical understanding of the process. BTW who wrote this because it does not seem to follow even the basics of ruby convention including <code>snake_case</code> naming."}, {"owner": {"reputation": 392, "user_id": 1134900, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6c32b21ac5ee22ebae3939a63347d483?s=128&d=identicon&r=PG", "display_name": "JoMojo", "link": "https://stackoverflow.com/users/1134900/jomojo"}, "edited": false, "score": 0, "creation_date": 1481664407, "post_id": 41128857, "comment_id": 69465836, "body": "Glad the code isn&#39;t that easy to understand... I&#39;m usually pretty good at figuring out what code does but this has got me baffled to say the least! The code is part of a sketchup plugin found here <a href=\"https://extensions.sketchup.com/en/content/cutlist\" rel=\"nofollow noreferrer\">extensions.sketchup.com/en/content/cutlist</a> From my understanding the guy who originally wrote the code just gave up updating it and the guy who took over has passed away. I wanted to create a cut sheet plugin from scratch but figured since most of the leg work has already been done I could work with it but damn I&#39;m having a hard time figuring out the code!"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481664682, "post_id": 41128857, "comment_id": 69465980, "body": "Do you have tests for it? Could you write some? It&#39;s a lot easier to refactor complex code when you can run tests after each code modification."}, {"owner": {"reputation": 392, "user_id": 1134900, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6c32b21ac5ee22ebae3939a63347d483?s=128&d=identicon&r=PG", "display_name": "JoMojo", "link": "https://stackoverflow.com/users/1134900/jomojo"}, "reply_to_user": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "edited": false, "score": 0, "creation_date": 1481665170, "post_id": 41128857, "comment_id": 69466233, "body": "@EricDuminil yes I&#39;m able to test changes through sketchup but this part of the code I just can&#39;t figure out how it comes to the conclusion of a &#39;best fit&#39;."}], "owner": {"reputation": 392, "user_id": 1134900, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/6c32b21ac5ee22ebae3939a63347d483?s=128&d=identicon&r=PG", "display_name": "JoMojo", "link": "https://stackoverflow.com/users/1134900/jomojo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1481664405, "creation_date": 1481656493, "last_edit_date": 1481664405, "question_id": 41128857, "link": "https://stackoverflow.com/questions/41128857/trying-to-figure-out-this-ruby-snippet-of-code-described-as-a-recursice-search", "title": "Trying to figure out this ruby snippet of code described as a recursice search", "body": "<p>The code snippet is part of a cut sheet algorithm that I'm trying to improve on and modify. </p>\n\n<p>Here's the code with notes left from the previous coder. I'm trying to figure out how the code finds the 'best fit'. I was expecting some sort of array comparison of results but I've never come across recursive search as it's described and don't understand how a result is achieved and, how I could improve on the results:</p>\n\n<pre><code># use a recursive search to find the best spot for a part\n# best fit means least wastage ie: the area of the piece to place comes closes to the area of the space\n# from the given Node, return a result if it is a leaf node, otherwise go left, then go right recursively.\n# returns the chosen best leaf node\n\n\ndef findBestFit(node, part_length, part_width)\n    return nil      if node==nil    # nothing here if this is a nil node\n    # am i in a node or a leaf\n    leaf=false\n    leaf=true       if node.getNodeType==\"leaf\"\n\n    if leaf # look at the leaf if we are a leaf\n        # won't fit if length is too short\n        # Note: make the comparisons here after applying the length transformation.\n        # This gives the same level of accuracy as the model units - which is what is relevant for layout\n        # Otherwise, there may be inaccurate comparisons between internal numbers which have been\n        # subjected to scaling, multiplication etc which can make round numbers into floats thus preventing\n        # parts from fitting when by all practical measures, they do.\n\n        return nil  if part_length.to_l &gt; node.rect[:length].to_l               # won't fit if length is too narrow\n        return nil  if part_width.to_l &gt; node.rect[:width].to_l                 # won't fit if width is too narrow\n        return node                                                             # fits, so return as a potential best fit\n    end\n\n    # it's a node\n    bestLeft=findBestFit(node.left, part_length, part_width)    #go left\n    bestRight=findBestFit(node.right, part_length, part_width)  #go right\n\n    return nil          if bestLeft==nil &amp;&amp; bestRight==nil  # now determine which is the best. No brainer if one or both are nil\n    return bestLeft     if bestRight== nil\n    return bestRight    if bestLeft==nil\n\n    # otherwise both are potentials and we have to choose one\n    # pick based on best fit  ie: least amount of waste left or the one further to the origin of the board or both. User can select\n    # the bias, otherwise we use both rules and try to pack the parts from left to right\n    # (note area on the board must &gt;= the part size because of earlier decisions)\n\n    part_area=part_length*part_width\n    ruleA=(((bestLeft.rect[:length]*bestLeft.rect[:width])-part_area)&lt;=((bestRight.rect[:length]*bestRight.rect[:width])-part_area)) &amp;&amp; @layoutOptions[:layoutRuleA]\n    ruleB=(bestLeft.rect[:xy][0]&lt;bestRight.rect[:xy][0]) &amp;&amp; @layoutOptions[:layoutRuleB]\n\n    return bestLeft     if ruleA || ruleB\n    return bestRight\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 3590, "user_id": 1494245, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a50a2dcc33b58918f27664b7646d92b7?s=128&d=identicon&r=PG", "display_name": "Sean Huber", "link": "https://stackoverflow.com/users/1494245/sean-huber"}, "edited": false, "score": 0, "creation_date": 1481653958, "post_id": 41128098, "comment_id": 69460216, "body": "<code>:locals</code> is an option for <code>render</code>, not <code>link_to</code>."}, {"owner": {"reputation": 121, "user_id": 1437362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/icbsF.jpg?s=128&g=1", "display_name": "Dhanabal", "link": "https://stackoverflow.com/users/1437362/dhanabal"}, "edited": false, "score": 0, "creation_date": 1481654232, "post_id": 41128098, "comment_id": 69460350, "body": "pass locals while you rendering partial not in link_to helper."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481655056, "post_id": 41128098, "comment_id": 69460752, "body": "The <code>ruby-on-rails-x</code>  tags are to indicate that the question is for a specific version of rails. Don&#39;t use more than one."}], "answers": [{"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481656663, "post_id": 41128804, "comment_id": 69461623, "body": "At your skill level I would skip the modal and just implement it in as just plain old links that renders another page with the form. Later you can add the modal as a form of progressive enhancement."}, {"owner": {"reputation": 7, "user_id": 4727373, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205593644154011/picture?type=large", "display_name": "Ethan Orcutt", "link": "https://stackoverflow.com/users/4727373/ethan-orcutt"}, "edited": false, "score": 0, "creation_date": 1481660760, "post_id": 41128804, "comment_id": 69463889, "body": "Thanks for the links and the info, I&#39;ll probably follow what you said and just get it working before I try and make it fancy."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 0, "last_activity_date": 1481656761, "last_edit_date": 1481656761, "creation_date": 1481656283, "answer_id": 41128804, "question_id": 41128098, "link": "https://stackoverflow.com/questions/41128098/how-to-pass-a-local-string-to-a-partial-in-ruby-on-rails/41128804#41128804", "title": "How to pass a local string to a partial in ruby on rails", "body": "<p>You're mixing together a few quite different concepts and you should probaly get the basics straight before attempting this task. </p>\n\n<p>To pass a variable between requests you would use params. This can be be in the form of URL segment, the query string or the request body (by using a form). Since a variable on the server does not persist between requests you can't pass local variables to <code>link_to</code> and I have no idea where you got the notion that it would work. </p>\n\n<ul>\n<li><a href=\"https://www.codecademy.com/articles/request-response-cycle-dynamic\" rel=\"nofollow noreferrer\">https://www.codecademy.com/articles/request-response-cycle-dynamic</a></li>\n<li><a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/routing.html</a></li>\n</ul>\n\n<p><code>locals</code> on the other hand is a way to assign a local variable in the rendering context of a partial. You can use this to pass any type of data.</p>\n\n<pre><code># foo/index.html.erb\n&lt;%= render :bar, locals: { a: 1 } %&gt;\n\n# foo/_bar.html.erb\n&lt;% if a == 1 %&gt;\n\n&lt;% elsef a ==  2 %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>But to get back to your question. There are a few different ways to solve it. </p>\n\n<p>The first is to include all the forms on the page and then swap the content of the modal based on what user clicks. You can do this by using plain old html anchor links instead of <code>link_to</code> and creating a javascript listener which intercepts the click event and instead opens the link target in a modal.</p>\n\n<p>The second is to use an ajax request to fetch the rendered version of a partial. You would then open a partial with the content fetched from the ajax request.</p>\n\n<p>This can be solved in a number of ways by for example using <code>jQuery.load</code> or the rails ujs components and creating a <code>.js.erb</code> template.</p>\n\n<ul>\n<li><a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/working_with_javascript_in_rails.html</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 7292705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc6af17958a5e3a26445eacf23c16d4f?s=128&d=identicon&r=PG", "display_name": "Victor A.M.", "link": "https://stackoverflow.com/users/7292705/victor-a-m"}, "is_accepted": false, "score": 0, "last_activity_date": 1481656483, "creation_date": 1481656483, "answer_id": 41128853, "question_id": 41128098, "link": "https://stackoverflow.com/questions/41128098/how-to-pass-a-local-string-to-a-partial-in-ruby-on-rails/41128853#41128853", "title": "How to pass a local string to a partial in ruby on rails", "body": "<p>As some people comented, the \"partial\" option is for the render method, not the link_to.</p>\n\n<p>Something like this would probably work for you:</p>\n\n<pre><code>&lt;a href=\"#modalTemplate\" data-toggle=\"modal\" class=\"list-group-item\"&gt;Add New Customer&lt;/a&gt;\n&lt;%= render \"your/modal/partial/path\" %&gt;\n</code></pre>\n\n<p><strong>Unrelated Tip:</strong></p>\n\n<p>Avoid at all costs setting instance variables in the view. In this case you should probably had set it at the controller :)</p>\n"}], "owner": {"reputation": 7, "user_id": 4727373, "user_type": "registered", "profile_image": "https://graph.facebook.com/10205593644154011/picture?type=large", "display_name": "Ethan Orcutt", "link": "https://stackoverflow.com/users/4727373/ethan-orcutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 889, "favorite_count": 0, "accepted_answer_id": 41128804, "answer_count": 2, "score": 0, "last_activity_date": 1481656761, "creation_date": 1481653722, "last_edit_date": 1481655136, "question_id": 41128098, "link": "https://stackoverflow.com/questions/41128098/how-to-pass-a-local-string-to-a-partial-in-ruby-on-rails", "title": "How to pass a local string to a partial in ruby on rails", "body": "<p><strong>TL;DR Version of Question</strong></p>\n\n<p>Is it possible to pass a string to a partial and have the partial use that string in an if statement or switch case.</p>\n\n<p>Am I breaking some valuable rule of Rails by having the views talk directly to each other?</p>\n\n<p><strong>Long Version w/ Code Snippets</strong></p>\n\n<p>I think it's safe to say that at this point in time I've read every post there is about how to pass a local variable. I'm still having trouble with accomplishing this. I'm very new to rails, like.. 1 week of learning, so what I'm trying to do might be completely incorrect.</p>\n\n<p>Anyways, I have it set up so that when a user clicks a link on the navbar a bootstrap modal loads with the correct form inside of it. I've set each unique form as their own partial so that I can just drop there in where needed and I've also setup the modal as a partial. I'm trying to follow this DRY method and make it so that in the modal partial it has a if/else or switch logic that only loads the correct form based on what the link passes it.</p>\n\n<p>Modal Partial:</p>\n\n<pre><code>&lt;!-- Modal --&gt;\n&lt;div class=\"modal fade\" id=\"modalTemplate\" tabindex=\"-1\" role=\"dialog\" aria-labelledby=\"myModalLabel\"&gt;\n  &lt;div class=\"modal-dialog\" role=\"document\"&gt;\n    &lt;div class=\"modal-content\"&gt;\n      &lt;div class=\"modal-header\"&gt;\n        &lt;button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\"&gt;&lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;&lt;/button&gt;\n        &lt;h4 class=\"modal-title\" id=\"myModalLabel\"&gt;Modal Template&lt;/h4&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-body\"&gt;\n        &lt;% if %VARIABLE% == \"%PASSED-INPUT%\" %&gt;\n          &lt;% @customer = Customer.new %&gt;\n          &lt;%= render \"customers/new\" %&gt;\n        &lt;% elsif %VARIABLE% == \"%PASSED-INPUT%\" %&gt;\n          --&gt; Do something else\n        &lt;% end %&gt;\n      &lt;/div&gt;\n      &lt;div class=\"modal-footer\"&gt;\n        &lt;button type=\"button\" class=\"btn btn-default\" data-dismiss=\"modal\"&gt;Close&lt;/button&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>NavBar Partial:</p>\n\n<pre><code>&lt;%= render 'layouts/modal_template' %&gt;\n\n&lt;nav class=\"navbar navbar-default navbar-fixed-side\"&gt;\n    &lt;h6 class=\"navbar-heading\"&gt;Customer Management&lt;/h6&gt;\n  &lt;div class=\"list-group\"&gt;\n    &lt;%= link_to \"Add New Customer\", '#modalTemplate', 'data-toggle' =&gt; 'modal', what_to_render: \"Test\", class: 'list-group-item' %&gt;\n    &lt;%= link_to \"Manage Customers\", '#', class: 'list-group-item' %&gt;\n    &lt;/div&gt;\n    &lt;h6 class=\"navbar-section-heading\"&gt;Customer Status Management&lt;/h6&gt;\n    &lt;div class=\"list-group\"&gt;\n    &lt;%= link_to \"Add New Customer Status\", new_customers_status_path, class: 'list-group-item' %&gt;\n    &lt;%= link_to \"Manage Customer Statuses\", '#', class: 'list-group-item' %&gt;\n    &lt;/div&gt;\n&lt;/nav&gt;\n</code></pre>\n\n<p>The Main View for this Page:</p>\n\n<pre><code>&lt;div class=\"container-fluid\"&gt;\n  &lt;div class=\"row\"&gt;\n    &lt;div class=\"col-sm-3 col-lg-2\"&gt;\n      &lt;%= render 'layouts/side-nav' %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-sm-9 col-lg-10\"&gt;\n      &lt;div class=\"well\"&gt;\n        &lt;%= render 'test' %&gt;\n        &lt;%= render 'view_customers' %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Now, the \"Added New Customer\" link_to is the part that is giving me the most trouble. I've tried every different combination provided online, but it always seems to be based around the idea of working with an object or something from the database. Thing is, I'm just trying to load a different page based on the selected button all while using the same modal partial.</p>\n\n<p>link_to Examples that I've Tried:</p>\n\n<pre><code>&lt;%= link_to \"Add New Customer\", '#modalTemplate', 'data-toggle' =&gt; 'modal', what_to_render: \"Test\", class: 'list-group-item' %&gt;\n&lt;%= link_to \"Add New Customer\", '#modalTemplate', 'data-toggle' =&gt; 'modal', :locals =&gt; { what_to_render: \"Test\" }, class: 'list-group-item' %&gt;\n</code></pre>\n\n<p>There are more, but I've deleted so many lines of code at this point that I've lost them. Some included using the link_to with :partial and :locals</p>\n"}, {"tags": ["ruby", "hashmap"], "answers": [{"comments": [{"owner": {"reputation": 232, "user_id": 4862640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7642972465bfdd71ba069f37f075c95b?s=128&d=identicon&r=PG&f=1", "display_name": "antimuon", "link": "https://stackoverflow.com/users/4862640/antimuon"}, "edited": false, "score": 0, "creation_date": 1481660341, "post_id": 41128076, "comment_id": 69463641, "body": "That works! Thanks. Is it possible to use a similar method to access all the keys and pull the data?"}, {"owner": {"reputation": 232, "user_id": 4862640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7642972465bfdd71ba069f37f075c95b?s=128&d=identicon&r=PG&f=1", "display_name": "antimuon", "link": "https://stackoverflow.com/users/4862640/antimuon"}, "edited": false, "score": 0, "creation_date": 1481664117, "post_id": 41128076, "comment_id": 69465680, "body": "This is great but for some reason it won&#39;t work for me...once I add in [:mtm], for example, I get an error about from (irb):650:in `block in irb_binding&#39;...maybe I can&#39;t use it in irb? If I do this a.map { |_k, v| v.first } it prints the whole map."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 232, "user_id": 4862640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7642972465bfdd71ba069f37f075c95b?s=128&d=identicon&r=PG&f=1", "display_name": "antimuon", "link": "https://stackoverflow.com/users/4862640/antimuon"}, "edited": false, "score": 1, "creation_date": 1481711727, "post_id": 41128076, "comment_id": 69483498, "body": "@antimuon it should in irb, pry and elsewhere. Double check spelling :)"}, {"owner": {"reputation": 232, "user_id": 4862640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7642972465bfdd71ba069f37f075c95b?s=128&d=identicon&r=PG&f=1", "display_name": "antimuon", "link": "https://stackoverflow.com/users/4862640/antimuon"}, "edited": false, "score": 0, "creation_date": 1481736639, "post_id": 41128076, "comment_id": 69499735, "body": "I think I know what I did wrong...I tried to &#39;lookup&#39; more than one value such as v.first[:book, :mtm]...I extended it using                                           var.map { |_k, v| v.first.values_at(:book, :mtm) } to return more than one value. Thanks!"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1481660775, "last_edit_date": 1481660775, "creation_date": 1481653624, "answer_id": 41128076, "question_id": 41128022, "link": "https://stackoverflow.com/questions/41128022/accessing-nested-hash-map-in-ruby/41128076#41128076", "title": "Accessing nested hash map in Ruby", "body": "<pre><code>a['key_3']               # [{:book=&gt;\"abc\", :trade_id=&gt;\"125\", :ccy=&gt;\"eur\", :mtm=&gt;1908055, :\"161205\"=&gt;-23279, :\"161206\"=&gt;-730, :\"161207\"=&gt;-513, :\"161208\"=&gt;19933, :\"161209\"=&gt;-21555}]\n  .first                 # {:book=&gt;\"abc\", :trade_id=&gt;\"125\", :ccy=&gt;\"eur\", :mtm=&gt;1908055, :\"161205\"=&gt;-23279, :\"161206\"=&gt;-730, :\"161207\"=&gt;-513, :\"161208\"=&gt;19933, :\"161209\"=&gt;-21555}\n  .values_at(:ccy, :mtm) # [\"eur\", 1908055]\n#=&gt; [\"eur\", 1908055]\n</code></pre>\n\n<h1>EDIT</h1>\n\n<p>To traverse the hash and map by nested key use <a href=\"https://ruby-doc.org/core-2.3.3/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\">Enumerable#<code>map</code></a>:</p>\n\n<pre><code>a.map { |_k, v| v.first[:mtm] }\n#=&gt; [2000000, -150000, 1908055]\na.map {|k, v| v.first[:\"161205\"]}\n#=&gt; [-5045, 5178, -23279]\n</code></pre>\n\n<p>P.S.</p>\n\n<p><code>{\"eur\",\"1908055\"}</code> is not a valid object in Ruby.</p>\n"}, {"tags": [], "owner": {"reputation": 122, "user_id": 2179487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926fa9e2982586847ec48c62b1cd08e9?s=128&d=identicon&r=PG", "display_name": "ProZsolt", "link": "https://stackoverflow.com/users/2179487/prozsolt"}, "is_accepted": false, "score": -2, "last_activity_date": 1481653877, "creation_date": 1481653877, "answer_id": 41128133, "question_id": 41128022, "link": "https://stackoverflow.com/questions/41128022/accessing-nested-hash-map-in-ruby/41128133#41128133", "title": "Accessing nested hash map in Ruby", "body": "<p>Your inside hash is inside an array.</p>\n\n<p><code>first</code> will gets the first element of the array</p>\n\n<p><code>h['key_3'].first.values_at(:ccy, :mtm)</code> can work.</p>\n"}, {"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1481653968, "post_id": 41128145, "comment_id": 69460222, "body": "dig is good, but AFAIK won&#39;t do to return values at multiple keys (<code>:ccy, :mtm...</code>)"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1481654641, "post_id": 41128145, "comment_id": 69460545, "body": "True. I updated the example with <code>&amp;.</code> and <code>values_at</code>. Thanks."}, {"owner": {"reputation": 232, "user_id": 4862640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7642972465bfdd71ba069f37f075c95b?s=128&d=identicon&r=PG&f=1", "display_name": "antimuon", "link": "https://stackoverflow.com/users/4862640/antimuon"}, "edited": false, "score": 0, "creation_date": 1481660138, "post_id": 41128145, "comment_id": 69463528, "body": "I am using 2.25 so I can&#39;t use dig but I will check out with 2.3."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1481714960, "last_edit_date": 1481714960, "creation_date": 1481653906, "answer_id": 41128145, "question_id": 41128022, "link": "https://stackoverflow.com/questions/41128022/accessing-nested-hash-map-in-ruby/41128145#41128145", "title": "Accessing nested hash map in Ruby", "body": "<h1>Iterate over all the keys, books and attributes :</h1>\n\n<pre><code>h.each do |key, books|\n  puts key\n  books.each do |book|\n    # Use values_at to define variables\n    name, trade_id, price, currency = book.values_at(:book, :trade_id, :mtm, :ccy)\n\n    puts \"#{name} : #{price} #{currency} (#{trade_id})\"\n\n    # or iterate over all key/values :\n    book.each do |attribute, value|\n      puts \"#{attribute} : #{value}\"\n    end\n\n    puts\n  end\nend\n</code></pre>\n\n<p>It outputs :</p>\n\n<pre><code>key_1\nabc : 2000000 usd (123)\nbook : abc\ntrade_id : 123\nccy : usd\nmtm : 2000000\n161205 : -5045\n161206 : 600\n161207 : 494\n161208 : -2646\n161209 : -231\n\nkey_2\nabc : -150000 gbp (124)\nbook : abc\ntrade_id : 124\nccy : gbp\nmtm : -150000\n161205 : 5178\n161206 : 20669\n161207 : -18771\n161208 : 214\n161209 : 22251\n\nkey_3\nabc : 1908055 eur (125)\nbook : abc\ntrade_id : 125\nccy : eur\nmtm : 1908055\n161205 : -23279\n161206 : -730\n161207 : -513\n161208 : 19933\n161209 : -21555\n</code></pre>\n\n<h1>Get one value, nested in the Hashes/Arrays :</h1>\n\n<p>That's a perfect job for <a href=\"https://ruby-doc.org/core-2.3.1/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">dig</a> if you're using Ruby 2.3 :</p>\n\n<pre><code>h.dig(\"key_3\", 0, :ccy) # =&gt; \"eur\"\nh.dig(\"key_3\", 0, :mtm) # =&gt; 1908055\n</code></pre>\n\n<p>It \"drills\" through Hashes and Arrays, and you don't have to worry about errors if an object isn't found :</p>\n\n<pre><code>h.dig(\"key_4\", 0, :ccy) # =&gt; nil\n</code></pre>\n\n<p>You can combine it with <a href=\"http://ruby-doc.org/core-2.3.1/Hash.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>values_at</code></a> and <a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\"><code>&amp;.</code></a> for a safe navigation and multiple values. No exception should be raised if an object isn't found :</p>\n\n<pre><code>h.dig(\"key_3\", 0)&amp;.values_at(:ccy, :mtm) #=&gt; [\"eur\", 1908055]\nprice, currency = h.dig(\"key_3\", 0)&amp;.values_at(:mtm, :ccy)\nprice # =&gt; 1908055\ncurrency # =&gt; \"eur\"\n</code></pre>\n"}], "owner": {"reputation": 232, "user_id": 4862640, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/7642972465bfdd71ba069f37f075c95b?s=128&d=identicon&r=PG&f=1", "display_name": "antimuon", "link": "https://stackoverflow.com/users/4862640/antimuon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1973, "favorite_count": 2, "accepted_answer_id": 41128076, "answer_count": 3, "score": 1, "last_activity_date": 1481714960, "creation_date": 1481653414, "last_edit_date": 1481653824, "question_id": 41128022, "link": "https://stackoverflow.com/questions/41128022/accessing-nested-hash-map-in-ruby", "title": "Accessing nested hash map in Ruby", "body": "<p>I have a flat data structure in csv format that I have turned into a hash whereby set a key on one of the column in the file...so we have key_1, key_2, Key_3, each key has the associated values for the associated row </p>\n\n<p>This is a example of the flat file...</p>\n\n<pre><code>key     book  id    ccy  mtm      161205 161206 161207 161208 161209\nkey_1   abc   123   usd  2000000  -5045  600    494    -2646  -231\nkey_2   abc   124   gbp  -150000  5178   20669  -1871  214    22251\nkey_3   abc   125   eur  1908055  -23279 -730   -513   -19933 -21555\n</code></pre>\n\n<p>And this is it after I create the hash...</p>\n\n<pre><code>{\"key_1\"=&gt;\n   [{:book=&gt;\"abc\",\n     :trade_id=&gt;\"123\",\n     :ccy=&gt;\"usd\",\n     :mtm=&gt;2000000,\n     :\"161205\"=&gt;-5045,\n     :\"161206\"=&gt;600,\n     :\"161207\"=&gt;494,\n     :\"161208\"=&gt;-2646,\n     :\"161209\"=&gt;-231}],\n\"key_2\"=&gt;\n   [{:book=&gt;\"abc\",\n     :trade_id=&gt;\"124\",\n     :ccy=&gt;\"gbp\",\n     :mtm=&gt;-150000,\n     :\"161205\"=&gt;5178,\n     :\"161206\"=&gt;20669,\n     :\"161207\"=&gt;-18771,\n     :\"161208\"=&gt;214,\n     :\"161209\"=&gt;22251}],\n \"key_3\"=&gt;\n   [{:book=&gt;\"abc\",\n     :trade_id=&gt;\"125\",\n     :ccy=&gt;\"eur\",\n     :mtm=&gt;1908055,\n     :\"161205\"=&gt;-23279,\n     :\"161206\"=&gt;-730,\n     :\"161207\"=&gt;-513,\n     :\"161208\"=&gt;19933,\n     :\"161209\"=&gt;-21555}]}\n</code></pre>\n\n<p>The problem I am running into is that I can't seem to access the nested hash. I would like to be able to drill into the hash...so something like this...</p>\n\n<pre><code>p h.select { |key| key == \"key_3\" } [ :ccy, :mtm \" ]\n</code></pre>\n\n<p>would give me an output like...</p>\n\n<pre><code>[{\"eur\",\"1908055\"}]\n</code></pre>\n\n<p>I would also like to be able to do things like aggregation across the keys.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1481652201, "post_id": 41127638, "comment_id": 69459336, "body": "what is the error you see ? tried printing it out ?"}, {"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 0, "creation_date": 1481652292, "post_id": 41127638, "comment_id": 69459402, "body": "a lot simpler solution is to just use <code>Devise</code> if you are interested in getting all these details anyway"}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1481653161, "post_id": 41127638, "comment_id": 69459831, "body": "May I ask what your motivation for capturing the ip address at sign up is?"}, {"owner": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "edited": false, "score": 0, "creation_date": 1481653433, "post_id": 41127638, "comment_id": 69459973, "body": "I plan to use devise on my next app.  Right now I&#39;m just wanting to do things from scratch since I&#39;m new.  I really have no use for grabbing the IP.  Im just curious and trying different things in case I need something to reference in the future.  I&#39;m creating a personal site and going through examples."}, {"owner": {"reputation": 3180, "user_id": 4659816, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/5TNaW.jpg?s=128&g=1", "display_name": "David", "link": "https://stackoverflow.com/users/4659816/david"}, "edited": false, "score": 0, "creation_date": 1481653828, "post_id": 41127638, "comment_id": 69460168, "body": "ah I see - curiosity is good :) Just bear in mind that IP&#39;s aren&#39;t static and can change from session to session or even during a session, so shouldn&#39;t be used as a mechanism for identifying users - but I&#39;m sure you have considered that anyway."}], "answers": [{"comments": [{"owner": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "edited": false, "score": 0, "creation_date": 1481658046, "post_id": 41127720, "comment_id": 69462345, "body": "Just curious, why is best to verify using the email address instead of name?"}, {"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "reply_to_user": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "edited": false, "score": 0, "creation_date": 1481660002, "post_id": 41127720, "comment_id": 69463459, "body": "People can easily have the same name, however email address must be unique by their nature. Two John Smiths using Hotmail will never have the same email address (e.g. <code>johnsmith@hotmail.com</code>, <code>johnsmith2@hotmail.com</code>). Plus email addresses also have conditions around case sensitivity that can be relied on."}], "tags": [], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1481660220, "last_edit_date": 1481660220, "creation_date": 1481652203, "answer_id": 41127720, "question_id": 41127638, "link": "https://stackoverflow.com/questions/41127638/how-to-obtain-ip-address-of-new-user-when-they-sign-up-in-ruby-on-rails/41127720#41127720", "title": "How to obtain IP address of new user when they sign up in Ruby on Rails?", "body": "<p>Try this:</p>\n\n<pre><code>def create\n  if User.exists?(name: params[:user][:name]) # should definitely be :email\n    redirect_to '/articles'\n  else\n    user = User.new(user_params)\n    user.ip_addr = request.remote_ip # &lt;= added\n    if user.save\n      session[:user_id] = user.id\n      redirect_to '/'\n    else\n      redirect_to '/signup'\n    end\n  end\nend\n</code></pre>\n\n<p>You don't need to send <code>ip_addr</code> through the form (i.e. <code>user_params</code>), just handle this within the request.</p>\n\n<p>Also, I would assign the users ip on login, since it might change from session to session.</p>\n"}], "owner": {"reputation": 587, "user_id": 1473641, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/2e1f431cce8a104400fc6ef5f3da497a?s=128&d=identicon&r=PG", "display_name": "Prox", "link": "https://stackoverflow.com/users/1473641/prox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 41127720, "answer_count": 1, "score": 0, "last_activity_date": 1487678761, "creation_date": 1481651902, "question_id": 41127638, "link": "https://stackoverflow.com/questions/41127638/how-to-obtain-ip-address-of-new-user-when-they-sign-up-in-ruby-on-rails", "title": "How to obtain IP address of new user when they sign up in Ruby on Rails?", "body": "<p>I created a an ip_addr column for my users table.  I have a signup page in which the user can enter a username, email, and password and it saves the data.  I also want to obtain the IP address when a new user creates an account.  Is there a simple way to go about doing this?  I have been playing with request.remote_ip with no luck.  Any ideas on how I could place this in my users_controller.rb?</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  invisible_captcha only: [:create], honeypot: :spam_detected\n\n  def spam_detected\n    redirect_to 'http://officeofstrategicinfluence.com/spam/'\n  end\n\n  def new\n  end\n\n  def create\n    if User.exists?(name: params[:user][:name])  # you can change :name to :email/etc\n      redirect_to '/articles?username_email_already exists'\n    else\n      user = User.new(user_params)\n      if user.save\n        session[:user_id] = user.id\n        redirect_to '/'\n      else\n        redirect_to '/signup'\n      end\n    end\n  end\nprivate\n\n  def user_params\n    params.require(:user).permit(:name, :email, :password, :password_confirmation, :ip_addr)\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 9369, "user_id": 3724716, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/db6186238a22752875cea1841a19d769?s=128&d=identicon&r=PG", "display_name": "Arun Kumar Mohan", "link": "https://stackoverflow.com/users/3724716/arun-kumar-mohan"}, "is_accepted": false, "score": 1, "last_activity_date": 1481651112, "creation_date": 1481651112, "answer_id": 41127425, "question_id": 41127301, "link": "https://stackoverflow.com/questions/41127301/keeping-first-word-and-remove-the-remaining-word-in-ruby/41127425#41127425", "title": "Keeping first word and remove the remaining word in Ruby", "body": "<p>A simple solution is to remove all <code>batman</code>s that are preceded by a space.</p>\n\n<pre><code>str.gsub!(/ batman/i, '')\n</code></pre>\n\n<p>In action:</p>\n\n<pre><code>str = 'batman joker BATMAN robin batMan catwoman'\n=&gt; \"batman joker BATMAN robin batMan catwoman\"\nstr.gsub!(/ batman/i, '')\n=&gt; \"batman joker robin catwoman\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1481870671, "post_id": 41127973, "comment_id": 69557470, "body": "This returns <code>&quot;Batman is not  without alfred &quot;, leaving an extra space after </code>&#39;not&#39;` and <code>&#39;alfred&#39;</code>. The OP&#39;s examples show those extra spaces being removed."}], "tags": [], "owner": {"reputation": 122, "user_id": 2179487, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926fa9e2982586847ec48c62b1cd08e9?s=128&d=identicon&r=PG", "display_name": "ProZsolt", "link": "https://stackoverflow.com/users/2179487/prozsolt"}, "is_accepted": true, "score": 1, "last_activity_date": 1481653222, "creation_date": 1481653222, "answer_id": 41127973, "question_id": 41127301, "link": "https://stackoverflow.com/questions/41127301/keeping-first-word-and-remove-the-remaining-word-in-ruby/41127973#41127973", "title": "Keeping first word and remove the remaining word in Ruby", "body": "<pre><code>str.gsub!(/(?i)(?&lt;!^)batman/, '')\n</code></pre>\n\n<p><code>(?i)</code> case insensitive</p>\n\n<p><code>(?&lt;!^)</code> lookbehind that the start of the line is not immediately before it</p>\n"}, {"tags": [], "owner": {"reputation": 11718, "user_id": 1827631, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/I24JN.png?s=128&g=1", "display_name": "hirolau", "link": "https://stackoverflow.com/users/1827631/hirolau"}, "is_accepted": false, "score": 2, "last_activity_date": 1481664067, "creation_date": 1481664067, "answer_id": 41130751, "question_id": 41127301, "link": "https://stackoverflow.com/questions/41127301/keeping-first-word-and-remove-the-remaining-word-in-ruby/41130751#41130751", "title": "Keeping first word and remove the remaining word in Ruby", "body": "<p>And here is a non-regexp version:</p>\n\n<pre><code>str.split.delete_if.with_index do |word,index|\n  index &gt; 0 and word.downcase == \"batman\"\nend.join(' ')\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1481786333, "creation_date": 1481786333, "answer_id": 41158503, "question_id": 41127301, "link": "https://stackoverflow.com/questions/41127301/keeping-first-word-and-remove-the-remaining-word-in-ruby/41158503#41158503", "title": "Keeping first word and remove the remaining word in Ruby", "body": "<pre><code>str = \"Batman is not batman without alfred, batman's batmanman\"\n\nstr.gsub(/\\sbatman\\b/i, '')\n  #=&gt; \"Batman is not without alfred,'s batmanman\"\n</code></pre>\n\n<p>The word break <code>\\b</code> is needed to avoid returning</p>\n\n<pre><code>\"Batman is not without alfred,'s man\"\n</code></pre>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 41127973, "answer_count": 4, "score": 0, "last_activity_date": 1481786333, "creation_date": 1481650694, "question_id": 41127301, "link": "https://stackoverflow.com/questions/41127301/keeping-first-word-and-remove-the-remaining-word-in-ruby", "title": "Keeping first word and remove the remaining word in Ruby", "body": "<p>I have a string</p>\n\n<pre><code>str = \"Batman is not batman without alfred batman\"\n</code></pre>\n\n<p>I need to remove all instances of <code>batman</code> (<strong>case insensitive</strong>), but keep batman if and only if it is the first word of the string.</p>\n\n<p>Some examples:</p>\n\n<pre><code>Batman is not batman without alfred batman #=&gt; Batman is not without alfred\n## first batman is kept, remaining batman is removed.\n\nbatman joker BATMAN robin batMan catwoman #=&gt; batman joker robin catwoman \n## removes all other batman instances and keep only the first batman because it is the first word.\n\njoker batMaN alfred batmobile batman #=&gt; joker alfred batmobile\n## removes all batman instances because batman is not the first word. \n</code></pre>\n\n<p>The case of first batman instance doesn't matter.</p>\n\n<p>I tried <code>str.gsub(/(batman)+/i,\"\")</code>, but it removes all instances instead. How can I keep <code>batman</code> if and only if it is the first word in the sentence, and remove other <code>batman</code>s?</p>\n"}, {"tags": ["ruby", "jenkins", "cucumber", "xvfb", "headless-browser"], "answers": [{"comments": [{"owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "edited": false, "score": 0, "creation_date": 1481722403, "post_id": 41128789, "comment_id": 69490251, "body": "Thank you Ludwig! I tried the command:  Xvfb :001 -nolisten inet6"}, {"owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "edited": false, "score": 0, "creation_date": 1481723100, "post_id": 41128789, "comment_id": 69490753, "body": "Hi Ludwid, I no long see those message after I used the command above.  Now I am facing other errors, I updated my question with additional information. Please let me know what you think. Thanks!"}, {"owner": {"reputation": 1767, "user_id": 4110406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/64150ed89bffb39ecd38f1f573afaaed?s=128&d=identicon&r=PG&f=1", "display_name": "Ludwig Schulze", "link": "https://stackoverflow.com/users/4110406/ludwig-schulze"}, "reply_to_user": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "edited": false, "score": 0, "creation_date": 1481829636, "post_id": 41128789, "comment_id": 69543858, "body": "I have answered your original question. I will not play this game where you add more problems to your question every time the previous problem is solved. Good luck and all the best whishes."}, {"owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "edited": false, "score": 0, "creation_date": 1481830031, "post_id": 41128789, "comment_id": 69544073, "body": "Hi Ludwig, Thank you for your answer. That was very helpful! I will submit a new question. Thanks again!"}], "tags": [], "owner": {"reputation": 1767, "user_id": 4110406, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/64150ed89bffb39ecd38f1f573afaaed?s=128&d=identicon&r=PG&f=1", "display_name": "Ludwig Schulze", "link": "https://stackoverflow.com/users/4110406/ludwig-schulze"}, "is_accepted": false, "score": 0, "last_activity_date": 1481656258, "creation_date": 1481656258, "answer_id": 41128789, "question_id": 41126897, "link": "https://stackoverflow.com/questions/41126897/headless-test-automation-with-firefox-using-xvfb-on-linux-jenkins-ci-server/41128789#41128789", "title": "Headless test automation with Firefox using Xvfb on linux Jenkins CI server", "body": "<p>There is no error, or you forgot to include it.</p>\n\n<p>The example output you posted does not contain the word \"error\".</p>\n\n<p>You might be misled by the \"Unable to open socket for inet6\" message(s). To me this looks like informational messages that ipv6 will not be used by this x server. Initialization after that succeeds, so most likely ipv4 worked ok or something.</p>\n"}], "owner": {"reputation": 133, "user_id": 3314970, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/6fef289d1bd5eea887f6ce1749d5fc58?s=128&d=identicon&r=PG", "display_name": "fongfong", "link": "https://stackoverflow.com/users/3314970/fongfong"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 699, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481911361, "creation_date": 1481649355, "last_edit_date": 1481911361, "question_id": 41126897, "link": "https://stackoverflow.com/questions/41126897/headless-test-automation-with-firefox-using-xvfb-on-linux-jenkins-ci-server", "title": "Headless test automation with Firefox using Xvfb on linux Jenkins CI server", "body": "<p>I am trying to use Xvfb with firefox to run test automation headless. However, I am getting the following message on starting xvfb.</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>XSERVTransSocketOpenCOTSServer: Unable to open socket for inet6\r\n_XSERVTransOpen: transport open failed for inet6/cvms1247:99\r\n_XSERVTransMakeAllCOTSServerListeners: failed to open listener for inet6\r\nInitializing built-in extension Generic Event Extension\r\nInitializing built-in extension SHAPE\r\nInitializing built-in extension MIT-SHM\r\nInitializing built-in extension XInputExtension\r\nInitializing built-in extension XTEST\r\nInitializing built-in extension BIG-REQUESTS\r\nInitializing built-in extension SYNC\r\nInitializing built-in extension XKEYBOARD\r\nInitializing built-in extension XC-MISC\r\nInitializing built-in extension SECURITY\r\nInitializing built-in extension XINERAMA\r\nInitializing built-in extension XFIXES\r\nInitializing built-in extension RENDER\r\nInitializing built-in extension RANDR\r\nInitializing built-in extension COMPOSITE\r\nInitializing built-in extension DAMAGE\r\nInitializing built-in extension MIT-SCREEN-SAVER\r\nInitializing built-in extension DOUBLE-BUFFER\r\nInitializing built-in extension RECORD\r\nInitializing built-in extension DPMS\r\nInitializing built-in extension Present\r\nInitializing built-in extension X-Resource\r\nInitializing built-in extension XVideo\r\nInitializing built-in extension XVideo-MotionCompensation\r\nInitializing built-in extension SELinux\r\nInitializing built-in extension GLX</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Then I tried the following command:</p>\n\n<pre><code>  Xvfb :001 -nolisten inet6\n  export http_proxy=http-proxy.nwie.net:8080\n</code></pre>\n\n<p>The following message disappeared.</p>\n\n<pre><code>  XSERVTransSocketOpenCOTSServer: Unable to open socket for inet6\n _XSERVTransOpen: transport open failed for inet6/cvms1247:99\n _XSERVTransMakeAllCOTSServerListeners: failed to open listener for inet6\n</code></pre>\n\n<p>The usage of headless:</p>\n\n<pre><code>  if OS::windows? || ENV['PhantomJS'] == 'true'\n    browser = Selenium::WebDriver.for :remote, url: 'http://localhost:8001'\n  elsif OS::linux?\n    require 'headless'\n    headless = Headless.new\n    headless.start\n    browser = Selenium::WebDriver.for :firefox\n    at_exit do\n      browser.close\n      headless.destroy\n    end\n  else\n    raise 'Unknown OS'\n  end\n</code></pre>\n\n<p>Environment: </p>\n\n<pre><code> Ruby: 1.9.3\n Jenkins: 1.58\n Selenium webdriver: 2.53\n headless: 2.3.1\n Xvfb: yum install xorg-x11-server-Xvfb\n firefox: 33.0\n Linux: 2.6.32-573.12.1.el6.x86_64\n</code></pre>\n\n<p>What am I missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "authentication", "devise"], "comments": [{"owner": {"reputation": 712, "user_id": 4191738, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wKXDY.jpg?s=128&g=1", "display_name": "Sculper", "link": "https://stackoverflow.com/users/4191738/sculper"}, "edited": false, "score": 0, "creation_date": 1481649520, "post_id": 41126717, "comment_id": 69457740, "body": "Might be a silly question, but is <code>&lt;%= csrf_meta_tags %&gt;</code> present in your layout?"}], "answers": [{"comments": [{"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1481650087, "post_id": 41126901, "comment_id": 69458084, "body": "I configured devise to work on subdomain and main domain"}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1481650229, "post_id": 41126901, "comment_id": 69458174, "body": "I need to pass subdomain as empty to go to the right url"}, {"owner": {"reputation": 121, "user_id": 1437362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/icbsF.jpg?s=128&g=1", "display_name": "Dhanabal", "link": "https://stackoverflow.com/users/1437362/dhanabal"}, "reply_to_user": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 1, "creation_date": 1481650332, "post_id": 41126901, "comment_id": 69458231, "body": "Rails.application.config.session_store :cookie_store, key: &#39;_my_app_session&#39;, domain: :all have you added this line in the configuration?"}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "edited": false, "score": 0, "creation_date": 1481650499, "post_id": 41126901, "comment_id": 69458343, "body": "I have.  .      .        .  ."}], "tags": [], "owner": {"reputation": 121, "user_id": 1437362, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/icbsF.jpg?s=128&g=1", "display_name": "Dhanabal", "link": "https://stackoverflow.com/users/1437362/dhanabal"}, "is_accepted": false, "score": 0, "last_activity_date": 1481649368, "creation_date": 1481649368, "answer_id": 41126901, "question_id": 41126717, "link": "https://stackoverflow.com/questions/41126717/rails-4-invalidauthenticitytoken/41126901#41126901", "title": "Rails 4: InvalidAuthenticityToken", "body": "<p>I think it's not because of the Devise, youre passing subdomain as empty, so it redirects_to <a href=\"http://lvh.me:3000/\" rel=\"nofollow noreferrer\">http://lvh.me:3000/</a> and you're on <a href=\"http://subdomain.lvh.me:3000\" rel=\"nofollow noreferrer\">http://subdomain.lvh.me:3000</a>. So it's considering as a separate site. So it raised a <a href=\"https://en.wikipedia.org/wiki/Cross-site_request_forgery\" rel=\"nofollow noreferrer\">CSRF</a> authenticity token.</p>\n"}], "owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 419, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481650638, "creation_date": 1481648699, "last_edit_date": 1481650638, "question_id": 41126717, "link": "https://stackoverflow.com/questions/41126717/rails-4-invalidauthenticitytoken", "title": "Rails 4: InvalidAuthenticityToken", "body": "<p>I am on the site of my app: <code>subdomain.lvh.me:3000/new</code> with</p>\n\n<pre><code>= link_to \"Delete\", item_url(@item, subdomain: \"\"), method: :delete\n</code></pre>\n\n<p>If I click on that link, I get redirected to the right url but I get this error:</p>\n\n<blockquote>\n  <p>ActionController::InvalidAuthenticityToken in ItemsController#destroy\n  ActionController::InvalidAuthenticityToken</p>\n</blockquote>\n\n<p><br>\n<strong>Sidenotes:</strong><br></p>\n\n<ul>\n<li>I am using devise to handle users.</li>\n<li>A Local storage object gets\ncreated for <code>http://lvh.me:3000/</code></li>\n</ul>\n\n<p><br>\n<em>Any idea why this is happening? Devise itself works across all subdomains.</em></p>\n\n<p><br>\n<strong>Log:</strong><br></p>\n\n<pre><code>Started DELETE \"/items/322146979\" for 127.0.0.1 at 2016-12-13 18:03:18 +0100\nProcessing by ItemsController#destroy as HTML\n  Parameters: {\"subdomain\"=&gt;\"\", \"id\"=&gt;\"322146979\"}\nCan't verify CSRF token authenticity\nCompleted 422 Unprocessable Entity in 1ms (ActiveRecord: 0.0ms)\n</code></pre>\n"}, {"tags": ["ruby", "algorithm"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1481648124, "post_id": 41126506, "comment_id": 69456841, "body": "I don&#39;t think there&#39;s an stdlib-powered one-liner here"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1481648277, "post_id": 41126506, "comment_id": 69456936, "body": "This needs a LOT of tests/examples. Especially for weird corner cases. But looks interesting. If it were an exercise on <a href=\"http://exercism.io\" rel=\"nofollow noreferrer\">exercism</a>, I&#39;d solve it :)"}, {"owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "edited": false, "score": 0, "creation_date": 1481648324, "post_id": 41126506, "comment_id": 69456980, "body": "I&#39;m curious what a simple solution without all the edge cases would look like."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1481648379, "post_id": 41126506, "comment_id": 69457029, "body": "Well, give it a try and maybe you&#39;ll find out. :)"}, {"owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "edited": false, "score": 0, "creation_date": 1481648917, "post_id": 41126506, "comment_id": 69457365, "body": "That&#39;s the spirit. Who needs StackOverflow when you can go figure it out yourself?"}, {"owner": {"reputation": 31885, "user_id": 1008938, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/EOZbS.png?s=128&g=1", "display_name": "Linuxios", "link": "https://stackoverflow.com/users/1008938/linuxios"}, "edited": false, "score": 0, "creation_date": 1481649023, "post_id": 41126506, "comment_id": 69457437, "body": "Can you explain the rules of the subtraction a little more specifically? It&#39;s rather unclear how (0-50) - (4-8) is (0-3)."}, {"owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "edited": false, "score": 0, "creation_date": 1481649312, "post_id": 41126506, "comment_id": 69457608, "body": "<code>(0-50) - (4-8) = (0-3, 9-50)</code> Notice that there is a void in <code>0-50</code> between 4 and 8."}, {"owner": {"reputation": 4311, "user_id": 741992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3a2d7257021bf728eab69025ea0a5fd?s=128&d=identicon&r=PG", "display_name": "petrkotek", "link": "https://stackoverflow.com/users/741992/petrkotek"}, "edited": false, "score": 1, "creation_date": 1483110940, "post_id": 41126506, "comment_id": 69998716, "body": "I needed the same thing, just in golang. (also the ranges can have &quot;value&quot; in my case, but it&#39;s basically nothing more than the same range repeated multiple times) See the code in this gist: <a href=\"https://gist.github.com/petrkotek/317dbcf6a73387682bc8d899b09c36df\" rel=\"nofollow noreferrer\">gist.github.com/petrkotek/317dbcf6a73387682bc8d899b09c36df</a> --- basically the idea is to find all breaking points (from &amp; to values) and diff for them; afterwards you iterate over sorted breaking points &amp; generate the output :) hope it helps!"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1481650437, "creation_date": 1481650437, "answer_id": 41127233, "question_id": 41126506, "link": "https://stackoverflow.com/questions/41126506/subtract-range-of-numbers-algorithm/41127233#41127233", "title": "Subtract Range of Numbers Algorithm", "body": "<p>This is a deliberately na\u00efve solution. It's not efficient, but easy to comprehend and quite short.</p>\n\n<p>Deconstruct <code>arr0</code> into a list of numbers:</p>\n\n<pre><code>n1 = arr0.flat_map { |a, b| (a..b).to_a }\n#=&gt; [0, 1, ..., 49, 50, 60, 61, ..., 79, 80, 100, 101, ..., 149, 150]\n</code></pre>\n\n<p>Same for <code>arr1</code>:</p>\n\n<pre><code>n2 = arr1.flat_map { |a, b| (a..b).to_a }\n#=&gt; [4, 5, 6, 7, 8, 15, 16, 17, 18, 19, 20]\n</code></pre>\n\n<p>Then, subtract <code>n2</code> from <code>n1</code> and recombine consecutive numbers:</p>\n\n<pre><code>(n1 - n2).chunk_while { |a, b| a.succ == b }.map(&amp;:minmax)\n#=&gt; [[0, 3], [9, 14], [21, 50], [60, 80], [100, 150]]\n</code></pre>\n"}], "owner": {"reputation": 5794, "user_id": 850224, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/65b467905691337e208944fcb34c7f57?s=128&d=identicon&r=PG", "display_name": "Artem Kalinchuk", "link": "https://stackoverflow.com/users/850224/artem-kalinchuk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 396, "favorite_count": 2, "accepted_answer_id": 41127233, "answer_count": 1, "score": 2, "last_activity_date": 1481650437, "creation_date": 1481648069, "question_id": 41126506, "link": "https://stackoverflow.com/questions/41126506/subtract-range-of-numbers-algorithm", "title": "Subtract Range of Numbers Algorithm", "body": "<p>How would I accomplish the following: Take one array of ranges and subtract another array of ranges from it.</p>\n\n<p>For example:</p>\n\n<pre><code>arr0 = [[0,50],[60,80],[100,150]] # 0-50, 60-80, etc.\n\narr1 = [[4,8],[15,20]] # 4-8, 15-20, etc.\n\n# arr0 - arr1 magic\n\nresult = [[0,3],[9,14],[21,50],[60,80],[100,150]] # 0-3, 9-14, etc.\n</code></pre>\n\n<p>What's the cleanest and most efficient way to do this in Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "google-app-engine", "ruby-on-rails-4", "google-cloud-vision"], "answers": [{"comments": [{"owner": {"reputation": 2594, "user_id": 2628223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbHga.jpg?s=128&g=1", "display_name": "BigRon", "link": "https://stackoverflow.com/users/2628223/bigron"}, "edited": false, "score": 1, "creation_date": 1481652835, "post_id": 41127724, "comment_id": 69459662, "body": "Aaah, so don&#39;t convert to Base64 at all. Just use a tmpfile... Nice!"}], "tags": [], "owner": {"reputation": 1116, "user_id": 4122847, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-5Bhoo3PIj7w/AAAAAAAAAAI/AAAAAAAAAF4/OEnQcnM3iI0/photo.jpg?sz=128", "display_name": "Abdoo Dev", "link": "https://stackoverflow.com/users/4122847/abdoo-dev"}, "is_accepted": true, "score": 3, "last_activity_date": 1481734273, "last_edit_date": 1481734273, "creation_date": 1481652216, "answer_id": 41127724, "question_id": 41126381, "link": "https://stackoverflow.com/questions/41126381/how-to-upload-an-image-at-url-for-google-vision-api-ruby/41127724#41127724", "title": "How to upload an image at url for Google Vision API - Ruby", "body": "<p>If you are going to use Google-Cloud-Vision gem, you need to follow the gem documentation (uses non encoded images), maybe he did that under the hood..</p>\n\n<p>Based on the documentation of the gem <a href=\"http://www.rubydoc.info/gems/google-cloud-vision/0.20.0/Google/Cloud/Vision/Image\" rel=\"nofollow noreferrer\">google-cloud-vision</a> , you can convert your image like the code bellow</p>\n\n<pre><code>open image_url do |img|\n  @vision = Google::Cloud::Vision.new\n\n  image = @vision.image(img)\n  # you can also use the class method from_io\n  # image = Google::Cloud::Vision::Image.from_io(img, @vision)\n\n  annotation = @vision.annotate(image, labels: true, text: true)\nend\n</code></pre>\n"}], "owner": {"reputation": 2594, "user_id": 2628223, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dbHga.jpg?s=128&g=1", "display_name": "BigRon", "link": "https://stackoverflow.com/users/2628223/bigron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1265, "favorite_count": 0, "accepted_answer_id": 41127724, "answer_count": 1, "score": 1, "last_activity_date": 1481734273, "creation_date": 1481647738, "last_edit_date": 1592644375, "question_id": 41126381, "link": "https://stackoverflow.com/questions/41126381/how-to-upload-an-image-at-url-for-google-vision-api-ruby", "title": "How to upload an image at url for Google Vision API - Ruby", "body": "<h2>How do I upload an S3 URL image properly for Google Vision?</h2>\n<p>I am attempting to send an image (saved at an AWS S3 URL) to Google Vision with Base64 encoding per the 2nd option in the <a href=\"https://cloud.google.com/vision/docs/best-practices#image_data\" rel=\"nofollow noreferrer\">documentation</a> listed below:</p>\n<blockquote>\n<p><strong>Images sent to the Google Cloud Vision API can be supplied in two ways:</strong></p>\n<ol>\n<li><p>Using Google Cloud Storage URIs of the form gs://bucketname/path/to/image_filename</p>\n</li>\n<li><p>As image data sent within the JSON request. Because image data must be supplied as ASCII text, all image data should be escaped using base64 encoding.</p>\n</li>\n</ol>\n</blockquote>\n<p>I am using the <a href=\"https://github.com/GoogleCloudPlatform/google-cloud-ruby/blob/master/google-cloud-vision/README.md\" rel=\"nofollow noreferrer\">Google-Cloud-Vision Gem</a>.</p>\n<p>I have tried <a href=\"https://stackoverflow.com/a/1547631/2628223\">this previous answer about Base64 encoding</a>, with a minor modification:</p>\n<pre><code>require 'google/cloud/vision'\nrequire 'base64'\nrequire 'googleauth'\nrequire 'open-uri'\n\nencoded_image = Base64.strict_encode64(open(image_url, &amp;:read))\n\n@vision = Google::Cloud::Vision.new\nimage = @vision.image(encoded_image)\nannotation = @vision.annotate(image, labels: true, text: true)\n</code></pre>\n<p>I have tried images at AWS URLs and images at other urls.</p>\n<p><strong>Every time I get this error from the Google-Cloud-Vision gem:\n<code>ArgumentError: Unable to convert (my_base_64_encoded_image) to an image</code></strong></p>\n<h3>Update - successfully encoded and decoded image in ruby only</h3>\n<p>I have confirmed that this code: <code>encoded_image = Base64.strict_encode64(open(image_url, &amp;:read))</code> works via the following:</p>\n<pre><code># Using a random image from the interwebs\nimage_url = &quot;https://storage.googleapis.com/gweb-uniblog-publish-prod/static/blog/images/google-200x200.7714256da16f.png&quot;\nencoded_image = Base64.strict_encode64(open(image_url, &amp;:read))\n\n### now try to decode the encoded_image\nFile.open(&quot;my-new-image.jpg&quot;, &quot;wb&quot;) do |file|\n  file.write(Base64.strict_decode64(encoded_image))\nend\n### great success\n</code></pre>\n<p><strong>So what's google's problem with this? I am properly encoded.</strong></p>\n"}, {"tags": ["javascript", "ruby"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1481667079, "post_id": 41125752, "comment_id": 69467170, "body": "Your Ruby code is broken: you are using the <code>[]</code> method, but that method is not part of the <code>Enumerable</code> protocol. The same applies to <code>length</code>. Also, <code>each</code> should return an <code>Enumerator</code> when called without a block, which your method doesn&#39;t do."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7184349"}, "edited": false, "score": 0, "creation_date": 1481646996, "post_id": 41125907, "comment_id": 69456080, "body": "No. I am trying to see what is under the hood of the forEach loop."}], "tags": [], "owner": {"reputation": 16720, "user_id": 209591, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/0ff9c3a23e73d87375f89ab6ccf62e31?s=128&d=identicon&r=PG", "display_name": "Geert-Jan", "link": "https://stackoverflow.com/users/209591/geert-jan"}, "is_accepted": false, "score": 0, "last_activity_date": 1481646358, "creation_date": 1481646358, "answer_id": 41125907, "question_id": 41125752, "link": "https://stackoverflow.com/questions/41125752/javascript-foreach-loop-how-to-reconstruct-it/41125907#41125907", "title": "Javascript forEach loop - How to reconstruct it?", "body": "<p>Are you just looking for a way to iterate a javascript array using the while-construct? </p>\n\n<p>if so:</p>\n\n<pre><code>const arr = [\"some\", \"value\", \"here\"];\nlet i =0;\n\nwhile(i &lt; arr.length){\n //use contents of arr[i] to do something useful\n i++;\n}\n</code></pre>\n\n<p>Perhaps I'm missing something</p>\n"}, {"tags": [], "owner": {"reputation": 6000, "user_id": 1597872, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/3m5XT.jpg?s=128&g=1", "display_name": "GilZ", "link": "https://stackoverflow.com/users/1597872/gilz"}, "is_accepted": false, "score": 0, "last_activity_date": 1481646965, "creation_date": 1481646965, "answer_id": 41126114, "question_id": 41125752, "link": "https://stackoverflow.com/questions/41125752/javascript-foreach-loop-how-to-reconstruct-it/41126114#41126114", "title": "Javascript forEach loop - How to reconstruct it?", "body": "<p>Maybe you're looking for something like generator functions?</p>\n\n<pre><code>const myArray = [1,2,3,4,5];\nfunction* constructEach(){\n  let index = 0;\n  while(index &lt; 3)\n    yield myArray[index++];\n}\n\nvar gen = constructEach();\n\nconsole.log(gen.next().value); // 0\nconsole.log(gen.next().value); // 1\nconsole.log(gen.next().value); // 2\nconsole.log(gen.next().value); // undefined\n</code></pre>\n\n<p>(This example was shamelessly stolen from <a href=\"https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Statements/function*\" rel=\"nofollow noreferrer\">MDN</a>)</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7184349"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1483418336, "creation_date": 1481645942, "last_edit_date": 1483418336, "question_id": 41125752, "link": "https://stackoverflow.com/questions/41125752/javascript-foreach-loop-how-to-reconstruct-it", "title": "Javascript forEach loop - How to reconstruct it?", "body": "<p>In Ruby, we can reconstruct the each loop for an array using the \n1) while loop, 2) yield statement (to pass value to a block), and 3) class Array (to make the method available to the Array class); as follows:</p>\n\n<pre><code>class Array\n    def reconstructed_each\n        n = 0\n        while n &lt; self.length\n            yield(self[n])\n            n += 1\n        end\n        self\n    end\nend\n</code></pre>\n\n<p>In Javascript, I reconstructed the forEach loop for an array using a similar fashion; as follows:</p>\n\n<pre><code>Array.prototype.reconstructedforEach = function(c) {\n    var n = 0;\n    while (n &lt; this.length) {\n        c(this[n]);\n        n += 1;\n    }\n};\n</code></pre>\n\n<p>The part I am not sure about is how to make the above function available to arrays only, but not other types of object e.g. number. </p>\n\n<p><strong>UPDATE:</strong> I have it figured out. The above code snippet has been edited accordingly.</p>\n"}, {"tags": ["ruby", "openid"], "owner": {"reputation": 302, "user_id": 6858358, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38d738b4c7b89ab44ad6c0f7d56fb2e4?s=128&d=identicon&r=PG", "display_name": "Sander", "link": "https://stackoverflow.com/users/6858358/sander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1481645856, "creation_date": 1481645856, "question_id": 41125720, "link": "https://stackoverflow.com/questions/41125720/how-to-login-using-openid-with-a-script", "title": "How to login using openid with a script", "body": "<p>I'm trying to automate retrieving information from a website using OpenID login. How do I navigate the authentication process? Looking at libraries they seem designed to make use of, or be the openid server, rather than sit in the middle.</p>\n\n<p>I imagine it involves.</p>\n\n<ol>\n<li>Some request to the OpenID server to get a login token. The script will have the username/password hardcoded. I know, not ideal.</li>\n<li>Cookies to send to the server to prove I'm logged in.</li>\n</ol>\n\n<p>But I'm not really clear on the details of these two requests, or whether there would be more steps.</p>\n"}, {"tags": ["ruby", "rspec", "capybara"], "comments": [{"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "edited": false, "score": 0, "creation_date": 1481645345, "post_id": 41125479, "comment_id": 69454967, "body": "Do you get timeouts accessing your own application or an external service?"}, {"owner": {"reputation": 1989, "user_id": 1995600, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/7a20921c83940ce92363d28a6d84a712?s=128&d=identicon&r=PG", "display_name": "DMH", "link": "https://stackoverflow.com/users/1995600/dmh"}, "edited": false, "score": 0, "creation_date": 1481645452, "post_id": 41125479, "comment_id": 69455038, "body": "If you are getting <code>Net::ReadTimeout</code> from external services/API&#39;s I would recommend stubbing them. Webmock <a href=\"https://github.com/bblimke/webmock\" rel=\"nofollow noreferrer\">github.com/bblimke/webmock</a> is brilliant for this."}], "answers": [{"tags": [], "owner": {"reputation": 727, "user_id": 4024964, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/t0rq7.png?s=128&g=1", "display_name": "Phil", "link": "https://stackoverflow.com/users/4024964/phil"}, "is_accepted": false, "score": 1, "last_activity_date": 1481725265, "last_edit_date": 1481725265, "creation_date": 1481724928, "answer_id": 41144776, "question_id": 41125479, "link": "https://stackoverflow.com/questions/41125479/rspec-how-to-rescue-and-retry-the-test/41144776#41144776", "title": "RSpec - how to rescue and retry the test?", "body": "<p>I use a ruby gem called <a href=\"https://github.com/rstacruz/rspec-repeat\" rel=\"nofollow noreferrer\">rspec-repeat</a>.  Out of a few hundred automated tests, we might run into a flaky one here or there and this helps us get past false negatives.</p>\n\n<p>Ideally it's best to continue to diagnose these flaky tests, but this helps alleviate issues in the interim.</p>\n\n<p>Side note, <code>rspec-repeat</code> based off of a another library named <code>rspec-retry</code>, but I find the code base for this one to be tidier and the configuration easier to use.  </p>\n"}, {"tags": [], "owner": {"reputation": 31446, "user_id": 18804, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/058ed9c852869d7557262a8d2ce8783b?s=128&d=identicon&r=PG", "display_name": "philant", "link": "https://stackoverflow.com/users/18804/philant"}, "is_accepted": false, "score": 0, "last_activity_date": 1582477212, "last_edit_date": 1582477212, "creation_date": 1571851016, "answer_id": 58527975, "question_id": 41125479, "link": "https://stackoverflow.com/questions/41125479/rspec-how-to-rescue-and-retry-the-test/58527975#58527975", "title": "RSpec - how to rescue and retry the test?", "body": "<p>The following method uses the <a href=\"https://github.com/foursquare/wait\" rel=\"nofollow noreferrer\">wait gem</a> to retry a test - or a portion of a test, possibly just an assertion. \nIt </p>\n\n<pre><code>def retry_test(&amp;block)\n  Wait.new(delay: 0.5, attempts: 10).until do\n    begin\n      yield    \n      true # test passed\n    rescue RSpec::Expectations::ExpectationNotMetError =&gt; x\n      # make sure it failed for the expected reason\n      expect(x.to_s).to match /Net::ReadTimeout/\n      false # test failed, will retry\n    end\n  end\nend\n</code></pre>\n\n<p>One can verify why it failed, and report a failure immediately if ever the test failed for another reason.</p>\n\n<pre><code>it 'should get a response' do\n  retry_test do\n    # The entire test, or just the portion to retry\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1811, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1582477212, "creation_date": 1481645069, "last_edit_date": 1481647885, "question_id": 41125479, "link": "https://stackoverflow.com/questions/41125479/rspec-how-to-rescue-and-retry-the-test", "title": "RSpec - how to rescue and retry the test?", "body": "<p>We have intermittently failing tests due to <code>Net::ReadTimeout</code> errors.</p>\n\n<p>We have yet to figure out a permanent fix.  For right now we want to try rescuing that specific error and re-running the test.  Not a ideal solution or true fix but we need something in the short term.</p>\n\n<p>How can we re-run the rspec test that failed?  I mean how can the test suite do this automatically for that test?</p>\n\n<p>We can catch the error like this:</p>\n\n<pre><code># spec/support/capybara.rb\ndef rescue_net_read_timeout(max_tries = 1, tries = 0, &amp;block)\n  yield\nrescue Net::ReadTimeout =&gt; e\n  Rails.logger.error e.message\nend\n</code></pre>\n\n<p>but how do we make it try re-running that test?\nWe want to try re-running the test and then if the re-run passes move on with  no error (ideally log it though), else fail for real and consider the test and hence the suite to have failed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash"], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1481643809, "creation_date": 1481643809, "answer_id": 41125065, "question_id": 41124987, "link": "https://stackoverflow.com/questions/41124987/how-to-merge-hash-of-hash-without-replacing-first-hash/41125065#41125065", "title": "How to merge hash of hash without replacing first hash", "body": "<p>Use <a href=\"https://ruby-doc.org/core-2.3.3/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\"><code>Hash#merge</code></a> with a block:</p>\n\n<pre><code>h1.merge(h2) do |k, v1, v2|\n  v1.is_a?(Hash) &amp;&amp; v2.is_a?(Hash) ? v1.merge(v2) : v2\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 967, "user_id": 4636289, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TvFhy.png?s=128&g=1", "display_name": "Atchyut Nagabhairava", "link": "https://stackoverflow.com/users/4636289/atchyut-nagabhairava"}, "edited": false, "score": 0, "creation_date": 1481695640, "post_id": 41125493, "comment_id": 69475228, "body": "Thanks for the answer, But I Got to know deep_merge was deprecated in rails 5"}, {"owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "reply_to_user": {"reputation": 967, "user_id": 4636289, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TvFhy.png?s=128&g=1", "display_name": "Atchyut Nagabhairava", "link": "https://stackoverflow.com/users/4636289/atchyut-nagabhairava"}, "edited": false, "score": 0, "creation_date": 1481709638, "post_id": 41125493, "comment_id": 69482251, "body": "Thanks for the info, I didn&#39;t know that. Rails sure is a moving target! By the way, the accepted answer doesn&#39;t work in the general case. <code>h1 =  {a: {b: {c: 1} } }; h2 =  {a: {b: {d: 2} } }</code> doesn&#39;t get merged correctly for example."}], "tags": [], "owner": {"reputation": 48049, "user_id": 6419007, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/CwqtX.jpg?s=128&g=1", "display_name": "Eric Duminil", "link": "https://stackoverflow.com/users/6419007/eric-duminil"}, "is_accepted": false, "score": 1, "last_activity_date": 1481708614, "last_edit_date": 1495542290, "creation_date": 1481645121, "answer_id": 41125493, "question_id": 41124987, "link": "https://stackoverflow.com/questions/41124987/how-to-merge-hash-of-hash-without-replacing-first-hash/41125493#41125493", "title": "How to merge hash of hash without replacing first hash", "body": "<p><code>deep_merge</code> works just fine, but it needs to be defined. </p>\n\n<h1>Plain Ruby</h1>\n\n<pre><code>class Hash\n  def deep_merge(h2)\n    merge(h2) { |_, v1, v2| v1.is_a?(Hash) &amp;&amp; v2.is_a?(Hash) ? v1.deep_merge(v2) : v2 }\n  end\nend\n\nh1 =  { a: 1, b: 2, d: { g: 7, h: 6 } }\nh2 =  { a: 1, b: 2, d: { m: 4, n: 5 } }\n\nh1.deep_merge(h2)\n# =&gt; {:a=&gt;1, :b=&gt;2, :d=&gt;{:g=&gt;7, :h=&gt;6, :m=&gt;4, :n=&gt;5}}\n</code></pre>\n\n<p>This method definition has the advantage of being recursive, and working with Hashes of any depth (see this <a href=\"https://stackoverflow.com/questions/41109599/ruby-merging-a-nested-hash-without-overwriting/41109737?noredirect=1#comment69429458_41109737\">example</a> from yesterday).</p>\n\n<p>Finally, if you want the exact same output as in your example, you need <code>h2.merge(h1)</code>:</p>\n\n<pre><code>h2.deep_merge(h1) #=&gt; {:a=&gt;1, :b=&gt;2, :d=&gt;{:g=&gt;7, :h=&gt;6, :m=&gt;4, :n=&gt;5}}\nh1.deep_merge(h2) #=&gt; {:a=&gt;1, :b=&gt;2, :d=&gt;{:m=&gt;4, :n=&gt;5, :g=&gt;7, :h=&gt;6}}\n</code></pre>\n\n<h1>Rails 3 &amp; 4</h1>\n\n<p><code>Hash#deep_merge</code> comes with <a href=\"http://apidock.com/rails/Hash/deep_merge\" rel=\"nofollow noreferrer\">Rails 3 &amp; 4</a>.</p>\n\n<p>If you use Rails, there's no need to define anything before using <code>deep_merge</code></p>\n\n<p>If you have Rails installed, and want to use <code>deep_merge</code> in plain Ruby scripts, you can use :</p>\n\n<pre><code>require 'active_support/core_ext/hash'\nh1.deep_merge(h2)\n#=&gt; {:a=&gt;1, :b=&gt;2, :d=&gt;{:g=&gt;7, :h=&gt;6, :m=&gt;4, :n=&gt;5}}\n</code></pre>\n"}], "owner": {"reputation": 967, "user_id": 4636289, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/TvFhy.png?s=128&g=1", "display_name": "Atchyut Nagabhairava", "link": "https://stackoverflow.com/users/4636289/atchyut-nagabhairava"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 618, "favorite_count": 0, "accepted_answer_id": 41125065, "answer_count": 2, "score": 1, "last_activity_date": 1481708614, "creation_date": 1481643582, "question_id": 41124987, "link": "https://stackoverflow.com/questions/41124987/how-to-merge-hash-of-hash-without-replacing-first-hash", "title": "How to merge hash of hash without replacing first hash", "body": "<p>Consider two hashes:</p>\n\n<pre><code>     h1 =  {a: 1, b: 2, d: {g: 7, h: 6}}\n     h2 =  {a: 1, b: 2, d: {m: 4, n: 5}}\n</code></pre>\n\n<p>I was trying merge both hashes as:</p>\n\n<pre><code>h1.merge(h2)\n</code></pre>\n\n<p>Result: {:a=>1, :b=>2, :d=>{:m=>4, :n=>5}}</p>\n\n<p>Can someone guide me to get a hash like:</p>\n\n<pre><code>{:a=&gt;1, :b=&gt;2, :d=&gt;{:m=&gt;4, :n=&gt;5, :g=&gt;7, :h=&gt;6}} \n</code></pre>\n\n<p>I had tried using <em>deep_merge</em> as suggested by some of other answers which didn't work.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1481644023, "post_id": 41124962, "comment_id": 69454101, "body": "I don&#39;t think you need to call the chain of modules for initializing <code>Edit</code>. You can simply include it in a specific context and then just do <code>Edit.new</code>. Take a look at this answer: <a href=\"http://stackoverflow.com/a/14855256/3284936\">stackoverflow.com/a/14855256/3284936</a>"}, {"owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "reply_to_user": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1481644091, "post_id": 41124962, "comment_id": 69454143, "body": "@Dimitry_N I don&#39;t want to use <code>include</code>. Rails autoloads everything from the <code>app&#47;</code> directory anyway."}], "answers": [{"comments": [{"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 0, "creation_date": 1481648346, "post_id": 41125176, "comment_id": 69456998, "body": "also you&#39;re violating Rails&#39; conventions of singular naming in models and plural naming in Controllers. This will cause issues with the inflections."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "reply_to_user": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 0, "creation_date": 1481648963, "post_id": 41125176, "comment_id": 69457398, "body": "@engineerDave - Say more, please?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 1, "creation_date": 1481649576, "post_id": 41125176, "comment_id": 69457776, "body": "@engineerDave: there are no models or controllers here. So I think it&#39;s fine :)"}, {"owner": {"reputation": 3811, "user_id": 793330, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/432566b982c73ead26d886951ca7a05c?s=128&d=identicon&r=PG", "display_name": "engineerDave", "link": "https://stackoverflow.com/users/793330/engineerdave"}, "edited": false, "score": 0, "creation_date": 1481661563, "post_id": 41125176, "comment_id": 69464335, "body": "true but the module naming usually follows the singular model naming too. It might cause some issues if you ever need to use singularize or pluralize that&#39;s all I&#39;m saying."}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1481662020, "post_id": 41125176, "comment_id": 69464602, "body": "I may be reading it wrong, but it seems like rails uses plurals quite commonly for module names. For example: <a href=\"http://api.rubyonrails.org/classes/ActiveRecord.html\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActiveRecord.html</a>"}], "tags": [], "owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "is_accepted": true, "score": 1, "last_activity_date": 1481644191, "creation_date": 1481644191, "answer_id": 41125176, "question_id": 41124962, "link": "https://stackoverflow.com/questions/41124962/rails-and-modules/41125176#41125176", "title": "Rails and modules", "body": "<p>The first level under <code>app</code> isn't considered part of the namespace. It's why you don't say, for instance:</p>\n\n<pre><code>module Models\n  class Foo &lt; ActiveRecord::Base\n  end\nend \n</code></pre>\n\n<p>for a model like <code>app/models/foo.rb</code>. </p>\n\n<p>If you want <code>Queries</code> in your namespace, you could do something like:</p>\n\n<pre><code>app/queries/queries/invoices/edit\n</code></pre>\n\n<p>But, that looks icky to me. I think I'd do something more like:</p>\n\n<pre><code>app/queries/invoice_queries/edit\n</code></pre>\n\n<p>and then:</p>\n\n<pre><code>module InvoiceQueries\n  class Edit\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "edited": false, "score": 0, "creation_date": 1481658524, "post_id": 41125255, "comment_id": 69462641, "body": "I tried your way. I have <code>Queries::Invoices::Edit</code> class in <code>app&#47;lib&#47;queries&#47;invoices&#47;edit.rb</code> and there is the same problem. Dropping the <code>Querires</code> module works."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "edited": false, "score": 0, "creation_date": 1481658749, "post_id": 41125255, "comment_id": 69462759, "body": "@pmichna Interesting. What&#39;s in your <code>autoload_paths</code>?"}, {"owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "edited": false, "score": 0, "creation_date": 1481708025, "post_id": 41125255, "comment_id": 69481213, "body": "I haven&#39;t modified it, so it&#39;s the default for Rails 5. Running <code>bin&#47;rails r &#39;puts ActiveSupport::Dependencies.autoload_paths&#39;</code> returns among others <code>my_project&#47;app&#47;queries</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "edited": false, "score": 0, "creation_date": 1481708876, "post_id": 41125255, "comment_id": 69481753, "body": "@pmichna Did you not remove <code>app&#47;queries&#47;invoices&#47;edit.rb</code>?"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1481644435, "creation_date": 1481644435, "answer_id": 41125255, "question_id": 41124962, "link": "https://stackoverflow.com/questions/41124962/rails-and-modules/41125255#41125255", "title": "Rails and modules", "body": "<p>@jvillian's answer is correct. However, I don't like both choices :)</p>\n\n<p>What I do in my projects is put all those custom object types into <code>app/lib</code></p>\n\n<pre><code>app/lib/queries/invoices/edit.rb\napp/lib/services/invoices/sync.rb\n</code></pre>\n\n<p>This way <code>lib</code> serves as that padding, which pushes <code>queries</code> to be part of namespace. Also, all your \"non-standard\" code is nicely contained in one directory.</p>\n"}], "owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 41125176, "answer_count": 2, "score": 0, "last_activity_date": 1481644435, "creation_date": 1481643486, "question_id": 41124962, "link": "https://stackoverflow.com/questions/41124962/rails-and-modules", "title": "Rails and modules", "body": "<p>I want to create a module for query objects. I created a file:</p>\n\n<pre><code>app/queries/invoices/edit.rb\n</code></pre>\n\n<p>with this class:</p>\n\n<pre><code>module Queries\n  module Invoices\n    class Edit\n    end\n  end\nend\n</code></pre>\n\n<p>However, I can't initialize it:</p>\n\n<pre><code>2.3.3 :001 &gt; Queries::Invoices::Edit.new\nNameError: uninitialized constant Queries\n</code></pre>\n\n<p>When I omit the <code>Queries</code> module, everything works:</p>\n\n<pre><code>module Invoices\n  class Edit\n  end\nend\n\n\n2.3.3 :005 &gt; Invoices::Edit.new\n=&gt; #&lt;Invoices::Edit:0x007fc729e15558&gt;\n</code></pre>\n\n<p>Why is that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation"], "comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481648996, "post_id": 41124715, "comment_id": 69457424, "body": "First consider if you really should be reinventing the authentication wheel. Unless you are doing it out of curiosity or your case is so extremely special that no existing solution works for you the answer is NO."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481649206, "post_id": 41124715, "comment_id": 69457554, "body": "You can create a tableless Session model by including <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Model.html\" rel=\"nofollow noreferrer\">ActiveModel::Model</a> but its not really a good solution since you should be doing authentication on the Rack level which is how Warden does it. What this means is that you should have a piece of middleware in front of your rails application which judges if the authentication strategy is valid or not."}], "answers": [{"comments": [{"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1481644264, "post_id": 41125170, "comment_id": 69454256, "body": "How do I pass the alert if I&#39;m doing a render?"}, {"owner": {"reputation": 1315, "user_id": 7133623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oTRkmNT7RVY/AAAAAAAAAAI/AAAAAAAABjU/A9o9mSGxL60/photo.jpg?sz=128", "display_name": "cdimitroulas", "link": "https://stackoverflow.com/users/7133623/cdimitroulas"}, "reply_to_user": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1481644353, "post_id": 41125170, "comment_id": 69454325, "body": "I believe most of the alerts will be passed automatically by the model validations/authentication. I&#39;m not sure about if the user account is locked out though"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1481644394, "post_id": 41125170, "comment_id": 69454353, "body": "alert seems to be only available on redirect and not render"}, {"owner": {"reputation": 1315, "user_id": 7133623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oTRkmNT7RVY/AAAAAAAAAAI/AAAAAAAABjU/A9o9mSGxL60/photo.jpg?sz=128", "display_name": "cdimitroulas", "link": "https://stackoverflow.com/users/7133623/cdimitroulas"}, "reply_to_user": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1481644527, "post_id": 41125170, "comment_id": 69454429, "body": "is there a reason you absolutely want it to be an alert? I think you can use a flash notice in a render"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1481644557, "post_id": 41125170, "comment_id": 69454455, "body": "alert is a flash is it not?"}, {"owner": {"reputation": 1315, "user_id": 7133623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oTRkmNT7RVY/AAAAAAAAAAI/AAAAAAAABjU/A9o9mSGxL60/photo.jpg?sz=128", "display_name": "cdimitroulas", "link": "https://stackoverflow.com/users/7133623/cdimitroulas"}, "reply_to_user": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1481644682, "post_id": 41125170, "comment_id": 69454537, "body": "You can pass a flash notice to a render by writing it in a line previous to the render. flash[:notice] = &quot;message&quot; see this link for an example (<a href=\"http://stackoverflow.com/questions/4770762/how-to-render-edit-view-and-post-flash-message-in-rails3\" title=\"how to render edit view and post flash message in rails3\">stackoverflow.com/questions/4770762/&hellip;</a>)"}, {"owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1481645998, "post_id": 41125170, "comment_id": 69455393, "body": "Ah cool so you can. Two problems with the render though, I lose the redirect_url param on the url and I also lose the page title and so have to redeclare it again. How can I keep the url intact?"}, {"owner": {"reputation": 1315, "user_id": 7133623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oTRkmNT7RVY/AAAAAAAAAAI/AAAAAAAABjU/A9o9mSGxL60/photo.jpg?sz=128", "display_name": "cdimitroulas", "link": "https://stackoverflow.com/users/7133623/cdimitroulas"}, "reply_to_user": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "edited": false, "score": 0, "creation_date": 1481647308, "post_id": 41125170, "comment_id": 69456306, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/130543/discussion-between-cdimitroulas-and-cameron\">continue this discussion in chat</a>."}], "tags": [], "owner": {"reputation": 1315, "user_id": 7133623, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-oTRkmNT7RVY/AAAAAAAAAAI/AAAAAAAABjU/A9o9mSGxL60/photo.jpg?sz=128", "display_name": "cdimitroulas", "link": "https://stackoverflow.com/users/7133623/cdimitroulas"}, "is_accepted": false, "score": 0, "last_activity_date": 1481644280, "last_edit_date": 1481644280, "creation_date": 1481644166, "answer_id": 41125170, "question_id": 41124715, "link": "https://stackoverflow.com/questions/41124715/validate-rails-login/41125170#41125170", "title": "Validate Rails login", "body": "<p>Rather than redirecting back to your login_path you can just render :new. E.g.</p>\n\n<pre><code>def create\n  user = User.find_by_email(params[:session][:email])\n  if user &amp;&amp; user.authenticate(params[:session][:password])\n    session[:user_id] = user.id\n    redirect_to params[:redirect_url].present? ? view_context.b64_decode(params[:redirect_url]) : '/admin/dashboard'\n  else\n    render :new\n  end\nend\n</code></pre>\n\n<p>If you are using a simple_form_for for your login then you can add this line to show the errors on your form:</p>\n\n<pre><code>&lt;%= f.error_notification %&gt;\n</code></pre>\n\n<p>I'm not sure if this will show all of the errors you mentioned but it should definitely show if the email or password was blank/incorrect.</p>\n"}], "owner": {"reputation": 24638, "user_id": 302533, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/6rsH5.jpg?s=128&g=1", "display_name": "Cameron", "link": "https://stackoverflow.com/users/302533/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1261, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1481645744, "creation_date": 1481642735, "last_edit_date": 1481645744, "question_id": 41124715, "link": "https://stackoverflow.com/questions/41124715/validate-rails-login", "title": "Validate Rails login", "body": "<p>I have a SessionsController in my Rails app like so:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n\n  def new\n    if @current_user.present?\n      redirect_to dashboard_path\n    else\n      @title = 'Log in'\n      render :layout =&gt; 'other'\n    end\n  end\n\n  def create\n    user = User.find_by_email(params[:session][:email])\n    if user &amp;&amp; user.authenticate(params[:session][:password])\n      session[:user_id] = user.id\n      redirect_to params[:redirect_url].present? ? view_context.b64_decode(params[:redirect_url]) : '/admin/dashboard'\n    else\n      redirect_to login_path(params[:redirect_url].present? ? {:redirect_url =&gt; params[:redirect_url]} : {}), :alert =&gt; 'Invalid credentials'\n    end\n  end\n\nend\n</code></pre>\n\n<p>So basically two methods, one to show the login form, and one to handle the post request to check the credentials. On success, create a session and redirect, or on error, redirect back the login form with an alert.</p>\n\n<p>However I'd like to use the Rails validations to give more information about what the issue was, e.g. email or password blank, incorrect email or password combination, locked out user, etc.</p>\n\n<p>I can't create a model because I don't have a DB table called Sessions, so I wouldn't want to use that... How can I use the Rails validations to validate a form like this?</p>\n\n<p>The only way I could think of getting the level of detail I was after was to create a method like so and then call that from the controller.</p>\n\n<pre><code>def check_login\n  if params[:session][:email].blank? &amp;&amp; params[:session][:password].present?\n    redirect('Email address missing')\n  elsif params[:session][:email].present? &amp;&amp; params[:session][:password].blank?\n    redirect('Password missing')\n  elsif params[:session][:email].blank? &amp;&amp; params[:session][:password].blank?\n    redirect('Email address and password missing')\n  else\n    user = User.where(email: params[:session][:email]).first\n    if user.present?\n      if user.authenticate(params[:session][:password])\n        session[:user_id] = user.id\n        redirect_to params[:redirect_url].present? ? view_context.b64_decode(params[:redirect_url]) : '/admin/dashboard'\n      else\n        redirect('Incorrect email/password combo')\n      end\n    else\n      redirect('Unknown user')\n    end\n  end\nend\n\ndef redirect(alert)\n  redirect_to login_path(params[:redirect_url].present? ? {:redirect_url =&gt; params[:redirect_url]} : {}), :alert =&gt; alert\nend\n</code></pre>\n\n<p>and then my controller method is just:</p>\n\n<pre><code>  def create\n    @session = check_login\n  end\n</code></pre>\n\n<p>But is their a cleaner way to do it using the Rails validators?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1481643229, "post_id": 41124738, "comment_id": 69453543, "body": "Thanks for the answer - I&#39;ve not used the rails-controller-testing gem so am just reading up on what it can offer now."}, {"owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1481643299, "post_id": 41124738, "comment_id": 69453588, "body": "@Mark, <code>rails-controller-testing</code> was previously part of rails. In rails 5 it got removed (as per the described reason)."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1481643568, "post_id": 41124738, "comment_id": 69453784, "body": "Don&#39;t use <code>rails-controller-testing</code> for a new project. Instead go with a future proof testing strategy. <a href=\"https://everydayrails.com/2016/08/29/replace-rspec-controller-tests.html\" rel=\"nofollow noreferrer\">everydayrails.com/2016/08/29/&hellip;</a>"}], "tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": false, "score": 0, "last_activity_date": 1481642799, "creation_date": 1481642799, "answer_id": 41124738, "question_id": 41124661, "link": "https://stackoverflow.com/questions/41124661/rspec-testing-instance-variables-within-a-controller/41124738#41124738", "title": "RSpec - testing instance variables within a controller", "body": "<p>You can use <a href=\"https://www.relishapp.com/rspec/rspec-rails/docs/controller-specs\" rel=\"nofollow noreferrer\"><code>assigns</code></a>:</p>\n\n<pre><code>expect(assigns(:circle).administrator).to eq parent\n</code></pre>\n\n<hr>\n\n<p>However, note that with rails 5, this gets deprecated. The rational being that checking the assigned instance variables in controllers is too fragile and implementation specific.</p>\n\n<p>The recommended alternative is either to test side effects (for example if this actually got persisted to the db) or do full feature tests. </p>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1481644350, "post_id": 41124942, "comment_id": 69454318, "body": "Unfortunatly rspec-rails is currently lagging behind the state of the art and the documentation does not really mirror the shift in testing methodology that came with Rails 5. Controller specs are on the way out though as they rely on components that may get yanked in the near future."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1481644947, "post_id": 41124942, "comment_id": 69454722, "body": "I did think I was probably approaching it wrong in the first place - it didn&#39;t occur to me to perform the tests in the model itself.  I&#39;ve used assigns for now which works, however will structure this as you&#39;ve suggested in the future.  Thanks for the help."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 2, "last_activity_date": 1481643420, "creation_date": 1481643420, "answer_id": 41124942, "question_id": 41124661, "link": "https://stackoverflow.com/questions/41124661/rspec-testing-instance-variables-within-a-controller/41124942#41124942", "title": "RSpec - testing instance variables within a controller", "body": "<p>You're approaching the problem wrong. Test the behavior of the controller. Not its implementation.</p>\n\n<p>If this is a legacy application you can use <code>assigns</code> to access the <code>@circle</code> instance variable of the controller:</p>\n\n<pre><code>context 'with a parent signed in' do\n  before do\n    sign_in parent\n  end\n  it 'builds a new circle with the current parent as administrator' do\n    get :new\n    expect(assigns(:circle).administrator).to equal(parent)\n  end\nend\n</code></pre>\n\n<p><a href=\"https://github.com/rails/rails/issues/18950\" rel=\"nofollow noreferrer\">But Rails 5 removes <code>assigns</code></a> and using it is not encouraged in new projects.\nInstead I would use a feature spec and actually test the steps of creating a circle:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.feature 'Circles' do\n\n  let(:parent) { create(:parent) }\n\n  context \"a guest user\" do\n    scenario \"can not create circles\" do\n      visit new_circle_path\n      expect(page).to have_content 'Please sign in'\n    end\n  end\n\n  context \"when signed in\" do\n    background do\n      login_as parent\n    end\n\n    scenario \"can create circles\" do\n       visit new_circle_path\n       fill_in 'name', with: 'Test Circle'\n       expect do\n         click_button 'Create circle'\n       end.to change(parent.circles, :count).by(+1)\n       expect(page).to have_content 'Test Circle'\n    end \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3685, "favorite_count": 0, "accepted_answer_id": 41124942, "answer_count": 2, "score": 0, "last_activity_date": 1481643420, "creation_date": 1481642574, "last_edit_date": 1481643153, "question_id": 41124661, "link": "https://stackoverflow.com/questions/41124661/rspec-testing-instance-variables-within-a-controller", "title": "RSpec - testing instance variables within a controller", "body": "<p>I have a new action which creates a circle and assigns the current parent as its administrator:</p>\n\n<pre><code>def new\n  return redirect_to(root_path) unless parent\n  @circle = Circle.new(administrator: parent)\nend\n</code></pre>\n\n<p>I'm trying to test that the administrator ID is properly set, and have written out my test as such:</p>\n\n<pre><code>context 'with a parent signed in' do\n  before do\n    sign_in parent\n    allow(controller).to receive(:circle).and_return(circle)\n    allow(Circle).to receive(:new).and_return(circle)\n  end\n\n  it 'builds a new circle with the current parent as administrator' do\n    get :new\n    expect(@circle.administrator).to equal(parent)\n  end\nend\n</code></pre>\n\n<p>This obviously throws an error as <code>@circle</code> is <code>nil</code>. How can I access the new object that hasn't yet been saved from my controller tests? I'm guessing it is some variety of allow / let but as I say all my searches have yielded nothing so far.</p>\n"}]