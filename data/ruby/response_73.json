[{"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 93, "user_id": 6396911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0423d64d3883527bb316e07817d904?s=128&d=identicon&r=PG&f=1", "display_name": "user6396911", "link": "https://stackoverflow.com/users/6396911/user6396911"}, "is_accepted": false, "score": 0, "last_activity_date": 1464825424, "creation_date": 1464825424, "answer_id": 37580616, "question_id": 37580578, "link": "https://stackoverflow.com/questions/37580578/trying-to-run-a-testsuite-for-c-with-on-a-ruby-server-and-it-gives-an-error/37580616#37580616", "title": "trying to run a testsuite for c with on a ruby server and it gives an error", "body": "<p>Tried it once more did work, dont know what the issue though</p>\n"}], "owner": {"reputation": 93, "user_id": 6396911, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d0423d64d3883527bb316e07817d904?s=128&d=identicon&r=PG&f=1", "display_name": "user6396911", "link": "https://stackoverflow.com/users/6396911/user6396911"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464825424, "creation_date": 1464825070, "question_id": 37580578, "link": "https://stackoverflow.com/questions/37580578/trying-to-run-a-testsuite-for-c-with-on-a-ruby-server-and-it-gives-an-error", "title": "trying to run a testsuite for c with on a ruby server and it gives an error", "body": "<hr>\n\n<p><strong>* Starting server on port 18000                   <em></strong>\n    <strong></em> Visit <a href=\"http://localhost:18000\" rel=\"nofollow\">http://localhost:18000</a> to view testsuite. *</strong>\n    *******************************************************\n    [2016-06-01 16:44:22] INFO  WEBrick 1.3.1\n    [2016-06-01 16:44:22] INFO  ruby 1.9.3 (2013-11-22) [x86_64-linux]\n    [2016-06-01 16:44:22] WARN  TCPServer Error: Address already in use - bind(2)\n    [2016-06-01 16:44:22] INFO  WEBrick::HTTPServer#start: pid=2736 port=18000</p>\n\n<pre><code>//after searching through the stackoverflow tried lsof -wni tcp:3000 and kill //-9 2376, didnt help\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1464824284, "post_id": 37580403, "comment_id": 62647792, "body": "What do you mean by &quot;large&quot;? Just roughly. 1000? 1000000? 1000000000?"}, {"owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "reply_to_user": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1464824422, "post_id": 37580403, "comment_id": 62647826, "body": "Good question, I thought about qualifying it.  In Ruby terms, I&#39;ll bet it&#39;s not that big.  Just shy of 10,000."}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1464824665, "post_id": 37580403, "comment_id": 62647884, "body": "OK, then it should not be a problem to keep it all in the memory at once."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464833211, "post_id": 37580403, "comment_id": 62649764, "body": "I hope you don&#39;t mind me editing your question. I simply reformatted to avoid the need for readers to scroll horizontally."}, {"owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1464883209, "post_id": 37580403, "comment_id": 62678591, "body": "Thanks Cary--not at all :)"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1464824611, "post_id": 37580486, "comment_id": 62647875, "body": "Fred, your solution will be marked correct one regardless of what sense other folks make--due to your awesome profile pic.  I&#39;m a dad as of 11 months ago and that pic makes me happy :-)  Kidding of course, let&#39;s see what others come up with.  Thank you in advance--this is very concise."}, {"owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "reply_to_user": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1464824803, "post_id": 37580486, "comment_id": 62647923, "body": "congratulations - being a dad is the best!"}, {"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 1, "creation_date": 1464825373, "post_id": 37580486, "comment_id": 62648075, "body": "I suggest you change the key from <code>:activation_status</code> to <code>&quot;activation_status&quot;</code> in order to match the expected result. I also suggest to either use <code>map</code> xor modify the existing array&#39;s elements (then use <code>each</code>)."}, {"owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "edited": false, "score": 0, "creation_date": 1464825675, "post_id": 37580486, "comment_id": 62648165, "body": "good call on the index - the OP did specify a string key for the result hash"}, {"owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1464826694, "post_id": 37580486, "comment_id": 62648429, "body": "I will mark one of the answers correct tomorrow, I am fried and need to review this when I can think straight.  Both seem to work with the sample data, so I need to figure out how they differ and which is more the &#39;Ruby Way&#39;.  Thanks very much!"}, {"owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1464885621, "post_id": 37580486, "comment_id": 62680124, "body": "I&#39;m not sure why at all, but when I use this code I get a <code>no implicit conversion of String into Integer (TypeError)</code> -- however, when I use Raffael&#39;s code, it works.  Can you explain how I could adapt this code (maybe to take into account <code>nil</code>&#39;s or something?)"}, {"owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "reply_to_user": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1464887924, "post_id": 37580486, "comment_id": 62681545, "body": "I can&#39;t see off hand where that error would come from. I didn&#39;t realize that operating on <code>nestling</code> inside of the <code>each</code> loop was actually operating on hsh2 in place. I think that makes @Raffael &#39;s solution the superior one; that is, unless you wanted to keep <code>hsh2</code> the way it is and create a copy"}], "tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": false, "score": 1, "last_activity_date": 1464825568, "last_edit_date": 1464825568, "creation_date": 1464824469, "answer_id": 37580486, "question_id": 37580403, "link": "https://stackoverflow.com/questions/37580403/ruby-merge-two-hashes-with-no-like-keys-based-on-matching-value/37580486#37580486", "title": "Ruby - Merge two hashes with no like keys based on matching value", "body": "<p>This will do it:</p>\n\n<pre><code>hsh2.map { |h| h.merge 'activation_status' =&gt; hsh1[h['host']] }\n</code></pre>\n\n<p>However, I think it will make a copy of the data instead of just walking the array of hashes and adding the appropriate key=>value pair. I don't think it would have a huge impact on performance unless your data set is large enough to consume a significant portion of the memory allocated to your app.</p>\n"}, {"comments": [{"owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "edited": false, "score": 0, "creation_date": 1464826700, "post_id": 37580527, "comment_id": 62648431, "body": "I will mark one of the answers correct tomorrow, I am fried and need to review this when I can think straight.  Both seem to work with the sample data, so I need to figure out how they differ and which is more the &#39;Ruby Way&#39;.  Thanks very much!"}], "tags": [], "owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "is_accepted": false, "score": 3, "last_activity_date": 1464824681, "creation_date": 1464824681, "answer_id": 37580527, "question_id": 37580403, "link": "https://stackoverflow.com/questions/37580403/ruby-merge-two-hashes-with-no-like-keys-based-on-matching-value/37580527#37580527", "title": "Ruby - Merge two hashes with no like keys based on matching value", "body": "<p>I suggest something along the lines of:</p>\n\n<pre><code>hash3 = hash2.map do |nestling|\n  host = nestling[\"host\"]\n  status = hash1[host]\n  nestling[\"activation_status\"] = status\n  nestling\nend\n</code></pre>\n\n<p>Which of course you can shrink down a bit. This version uses less variables and in-place edit of <code>hash2</code>:</p>\n\n<pre><code>hash2.each do |nestling|\n  nestling[\"activation_status\"] = hash1[nestling[\"host\"]]\nend\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 3875042, "user_type": "registered", "accept_rate": 89, "profile_image": "https://graph.facebook.com/1557167620/picture?type=large", "display_name": "Kurt W", "link": "https://stackoverflow.com/users/3875042/kurt-w"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464832124, "creation_date": 1464823852, "last_edit_date": 1464832124, "question_id": 37580403, "link": "https://stackoverflow.com/questions/37580403/ruby-merge-two-hashes-with-no-like-keys-based-on-matching-value", "title": "Ruby - Merge two hashes with no like keys based on matching value", "body": "<p>I would like to find an efficient way to merge two hashes together and the resulting hash must contain all original data <strong>and a new key/value pair</strong> based on criteria below.  There are no keys in common between the two hashes, however the key in one hash matches the value of a key in the adjacent hash.</p>\n\n<p>Also note that the second hash is actually an array of hashes.</p>\n\n<p>I am working with a relatively large data set, so looking for an efficient solution but hoping to keep the code readable at the same time since it will likely end up in production.</p>\n\n<p><strong>Here is the structure of my data:</strong></p>\n\n<pre><code># Hash\nhsh1 = { \"devicename1\"=&gt;\"active\", \"devicename2\"=&gt;\"passive\", \"devicename3\"=&gt;\"passive\" }\n\n# Array of Hashes\nhsh2 = [ { \"host\" =&gt; \"devicename3\", \"secure\" =&gt; true  },\n         { \"host\" =&gt; \"devicename2\", \"secure\" =&gt; true  },\n         { \"host\" =&gt; \"devicename1\", \"secure\" =&gt; false } ]\n</code></pre>\n\n<p><strong>Here is what I need to accomplish:</strong></p>\n\n<p>I need to merge the data from <code>hsh1</code> into <code>hsh2</code> keeping all of the original key/value pairs in <code>hsh2</code> and adding a new key called <code>activation_status</code> using the the data in <code>hsh1</code>.</p>\n\n<p>The resulting <code>hsh2</code> would be as follows:</p>\n\n<pre><code>hsh2 = [{ \"host\"=&gt;\"devicename3\", \"secure\"=&gt;true,  \"activation_status\"=&gt;\"passive\" },\n        { \"host\"=&gt;\"devicename2\", \"secure\"=&gt;true,  \"activation_status\"=&gt;\"passive\" },\n        { \"host\"=&gt;\"devicename1\", \"secure\"=&gt;false, \"activation_status\"=&gt;\"active\"  }]\n</code></pre>\n\n<p>This may already be answered on StackOverflow but I looked for some time and couldn't find a match. My apologies in advance if this is a duplicate.</p>\n"}, {"tags": ["ruby", "watir", "pageobjects"], "comments": [{"owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "edited": false, "score": 4, "creation_date": 1464822626, "post_id": 37580156, "comment_id": 62647317, "body": "You should never have two html elements with the same id."}, {"owner": {"reputation": 1, "user_id": 6412024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeaef62c55d225974ec06fe4cfed020?s=128&d=identicon&r=PG&f=1", "display_name": "Rocker", "link": "https://stackoverflow.com/users/6412024/rocker"}, "reply_to_user": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "edited": false, "score": 0, "creation_date": 1464823277, "post_id": 37580156, "comment_id": 62647495, "body": "Somehow the web developer has used the same id. what if one of the element is hidden?"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 1, "creation_date": 1464823442, "post_id": 37580156, "comment_id": 62647548, "body": "Having two elements on the same page with the same id is broken code.  It doesn&#39;t matter what type the elements are, <b>any</b> two elements with the same id on the same page is wrong.  It&#39;s a bug, and it needs to be fixed, just like any other bug."}], "answers": [{"tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 1, "last_activity_date": 1464960580, "last_edit_date": 1464960580, "creation_date": 1464843440, "answer_id": 37582968, "question_id": 37580156, "link": "https://stackoverflow.com/questions/37580156/finding-specific-element-which-exists-in-multiple-places-but-has-same-id-class/37582968#37582968", "title": "finding specific element which exists in multiple places but has same id,class", "body": "<p>As mentioned in the comments, the best solution is to update the fields to have unique ids. </p>\n\n<p>However, assuming that is not possible, you can solve the problem using an <code>:index</code> locator. The following page object finds the 2nd color field, which is equivalent to Watir's <code>@b.text_field(:id =&gt; 'color', :index =&gt; 1).set</code>:</p>\n\n<pre><code>class MyPage\n  include PageObject\n\n  text_field(:color_1, id: 'color', index: 0)\n  text_field(:color_2, id: 'color', index: 1)\nend\n</code></pre>\n\n<p>Which would be called like:</p>\n\n<pre><code>page = MyPage.new(browser)\npage.color_1 = 'red'\npage.color_2 = 'blue'\n</code></pre>\n\n<p>If you are actually trying to the last field, ie replicate <code>@b.text_fields(:id =&gt; 'color').last.set</code>, then the <code>:index</code> would be \"-1\":</p>\n\n<pre><code>text_field(:color_2, id: 'color', index: -1)\n</code></pre>\n\n<p>Note that similar can be done when locating the fields dynamically within a method (as opposed to defined by an accessor):</p>\n\n<pre><code>class MyPage\n  include PageObject\n\n  def set_colors(color_1, color_2)\n    text_field_element(id: 'color', index: 0).value = color_1\n    text_field_element(id: 'color', index: 1).value = color_2\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1464960192, "post_id": 37614850, "comment_id": 62713683, "body": "I believe the question is looking for a page-object gem solution as opposed to a pure Watir solution."}], "tags": [], "owner": {"reputation": 11, "user_id": 2771635, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/03ab02b7140a5f7769b5fb4276c6a72c?s=128&d=identicon&r=PG&f=1", "display_name": "saruchi", "link": "https://stackoverflow.com/users/2771635/saruchi"}, "is_accepted": false, "score": 0, "last_activity_date": 1464958577, "last_edit_date": 1464958577, "creation_date": 1464958153, "answer_id": 37614850, "question_id": 37580156, "link": "https://stackoverflow.com/questions/37580156/finding-specific-element-which-exists-in-multiple-places-but-has-same-id-class/37614850#37614850", "title": "finding specific element which exists in multiple places but has same id,class", "body": "<pre><code>@b.text_fields(:id=&gt;'color',:index=&gt;1).set \"red\"\n</code></pre>\n\n<p>This can solve your problem. </p>\n"}], "owner": {"reputation": 1, "user_id": 6412024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6eeaef62c55d225974ec06fe4cfed020?s=128&d=identicon&r=PG&f=1", "display_name": "Rocker", "link": "https://stackoverflow.com/users/6412024/rocker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 574, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464960580, "creation_date": 1464822178, "question_id": 37580156, "link": "https://stackoverflow.com/questions/37580156/finding-specific-element-which-exists-in-multiple-places-but-has-same-id-class", "title": "finding specific element which exists in multiple places but has same id,class", "body": "<p>How to find an element  if it exists in multiple places in a page but has same id under same class?\nFor example:\nThere are two text fields with the same id and I would like to choose the 2nd one.\nIt works when I just write the watir/ruby(without using page object)\n@b.text_fields(:id => 'color').last.set \"red\"</p>\n\n<p>But I am unsuccessful so far to make it work using page object.</p>\n\n<p>Thanks in advance</p>\n"}, {"tags": ["ruby", "csv"], "answers": [{"comments": [{"owner": {"reputation": 83, "user_id": 3130824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68b8c9069b69f81d1fa0519ba63d6e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Thonanth Siddef", "link": "https://stackoverflow.com/users/3130824/thonanth-siddef"}, "edited": false, "score": 1, "creation_date": 1464824201, "post_id": 37580406, "comment_id": 62647764, "body": "Thank you very much for your answer! I had no idea this was a thing and I&#39;m sorry that I hadn&#39;t found that bug report on my own. I try to solve my problems myself before I run anything by stack, but I guess this is just one I&#39;ll have to live with. Thanks again!!!"}], "tags": [], "owner": {"reputation": 10812, "user_id": 1241782, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/576b21d9efadc9217270e971fd6d5027?s=128&d=identicon&r=PG", "display_name": "Mike S", "link": "https://stackoverflow.com/users/1241782/mike-s"}, "is_accepted": true, "score": 2, "last_activity_date": 1464823867, "last_edit_date": 1495540366, "creation_date": 1464823867, "answer_id": 37580406, "question_id": 37580055, "link": "https://stackoverflow.com/questions/37580055/how-to-get-headers-from-a-csv-read-on-a-csv-file-with-only-a-header-row-in-ruby/37580406#37580406", "title": "How to get headers from a CSV.read on a CSV file with only a header row in ruby", "body": "<p>The behavior you are experiencing is expected. A somewhat similar question two years ago had an <a href=\"https://stackoverflow.com/a/22102521/1241782\">answer that pointed out the same issue</a> you're having. That person opened a <a href=\"https://bugs.ruby-lang.org/issues/9582\" rel=\"nofollow noreferrer\">bug report for Ruby</a> where the Ruby devs responded and rejected it. And according to some people that is technically not a well-formed CSV.</p>\n\n<p>However, I agree with you and the person who opened the bug. The <code>headers: true</code> option should fill out the <code>CSV.headers</code> regardless of whether there is actually data on the following lines or not. The current behavior seems baffling and will only lead to bugs in code.</p>\n\n<p>As a quick fix for your issue I would simply pass <code>return_headers: true</code> and begrudgingly skip over the first entry in the result, which will always be the header row.</p>\n"}], "owner": {"reputation": 83, "user_id": 3130824, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68b8c9069b69f81d1fa0519ba63d6e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Thonanth Siddef", "link": "https://stackoverflow.com/users/3130824/thonanth-siddef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2033, "favorite_count": 0, "accepted_answer_id": 37580406, "answer_count": 1, "score": 2, "last_activity_date": 1464823867, "creation_date": 1464821555, "question_id": 37580055, "link": "https://stackoverflow.com/questions/37580055/how-to-get-headers-from-a-csv-read-on-a-csv-file-with-only-a-header-row-in-ruby", "title": "How to get headers from a CSV.read on a CSV file with only a header row in ruby", "body": "<p>So, I've been messing around with CSV files in Ruby, and I've come across an issue. In my testing, a call of x = CSV.read(file, headers:true) on a file which only contains the header row will return a table, that, when converted to an array, returns [[]], and calling x.headers returns []. I can circumvent this problem by setting return_headers:true, but I don't actually want the file to return its headers, I just want the headers. When I add in a fake, second row, x.headers actually returns the headers, and :return_headers does not need to be set to true. </p>\n\n<p>Here is some code from before and after adding a row to help visualize the issue.</p>\n\n<p>With headers:true, return_headers:true on a csv file with only the header row:</p>\n\n<pre><code>a = CSV.read(\"June.csv\", headers:true, return_headers:true) # &lt;CSV::Table mode:col_or_row row_count:1&gt;\na[0] # &lt;CSV::Row \"Day\":\"Day\" \"Time\":\"Time\"&gt;\na.headers # =&gt; [\"Day\", \"Time\"]\n</code></pre>\n\n<p>With only headers:true on a csv file with only the header row:</p>\n\n<pre><code>b = CSV.read(\"June.csv\", headers:true) #&lt;CSV::Table mode:col_or_row row_count:1&gt;\nb[0] # =&gt; nil\nb.headers # =&gt; []\n</code></pre>\n\n<p>With only headers:true on a csv file with the fake second row:</p>\n\n<pre><code>c = CSV.read(\"June.csv\", headers:true) #&lt;CSV::Table mode:col_or_row row_count:2&gt;\nc.headers # =&gt; [\"Day\", \"Time\"]\nc[\"Day\"] # =&gt; [\"6/1\"]\n</code></pre>\n\n<p>I can't depend on the CSV file I have to always have a second row, because my program intends to build on it. What am I doing wrong? Is this the intended behavior, or is the problem in my setup, somehow? Do I have to do a read just for the headers, and then another read to get the behavior I would like? I've searched for a good while, but am still having trouble</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1464821184, "post_id": 37579984, "comment_id": 62646864, "body": "Looks like your Ruby installation is mangled. Try reinstalling <code>debug_inspector</code>. <code>gem uninstall</code> and redo."}, {"owner": {"reputation": 191, "user_id": 4852752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1efbd9a44e4f246711915575c8d435d3?s=128&d=identicon&r=PG&f=1", "display_name": "John E.", "link": "https://stackoverflow.com/users/4852752/john-e"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464821297, "post_id": 37579984, "comment_id": 62646903, "body": "@tadman wow...thank you so much! Works"}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 4852752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1efbd9a44e4f246711915575c8d435d3?s=128&d=identicon&r=PG&f=1", "display_name": "John E.", "link": "https://stackoverflow.com/users/4852752/john-e"}, "edited": false, "score": 0, "creation_date": 1464964578, "post_id": 37580235, "comment_id": 62716826, "body": "Thank you! Helped a lot :)"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1464822654, "creation_date": 1464822654, "answer_id": 37580235, "question_id": 37579984, "link": "https://stackoverflow.com/questions/37579984/ruby-incompatible-library-version/37580235#37580235", "title": "Ruby: incompatible library version", "body": "<p>If you see an error relating to <code>.bundle</code> it's generally the case that your gem was compiled against a version of some shared library that's been updated or removed.</p>\n\n<p>The normal fix for this is to uninstall and reinstall the offending gem. That will link it to the current version you have.</p>\n"}], "owner": {"reputation": 191, "user_id": 4852752, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1efbd9a44e4f246711915575c8d435d3?s=128&d=identicon&r=PG&f=1", "display_name": "John E.", "link": "https://stackoverflow.com/users/4852752/john-e"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5441, "favorite_count": 0, "accepted_answer_id": 37580235, "answer_count": 1, "score": 0, "last_activity_date": 1464822654, "creation_date": 1464821044, "question_id": 37579984, "link": "https://stackoverflow.com/questions/37579984/ruby-incompatible-library-version", "title": "Ruby: incompatible library version", "body": "<p>I am learning Ruby on Rails, so I've created my first project and I got this error: </p>\n\n<pre><code>/Users/Anton/.rvm/gems/ruby-2.3.0/gems/debug_inspector-0.0.2/lib/debug_inspector.rb:6:in `require': incompatible library version - /Users/Anton/.rvm/gems/ruby-2.3.0/gems/debug_inspector-0.0.2/lib/debug_inspector.bundle (fatal)\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/debug_inspector-0.0.2/lib/debug_inspector.rb:6:in `&lt;top (required)&gt;'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/binding_of_caller-0.7.2/lib/binding_of_caller/mri2.rb:1:in `require'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/binding_of_caller-0.7.2/lib/binding_of_caller/mri2.rb:1:in `&lt;top (required)&gt;'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/binding_of_caller-0.7.2/lib/binding_of_caller.rb:9:in `require'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/binding_of_caller-0.7.2/lib/binding_of_caller.rb:9:in `&lt;top (required)&gt;'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/web-console-2.3.0/lib/web_console.rb:1:in `require'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/web-console-2.3.0/lib/web_console.rb:1:in `&lt;top (required)&gt;'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/web-console-2.3.0/lib/web-console.rb:1:in `require'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/web-console-2.3.0/lib/web-console.rb:1:in `&lt;top (required)&gt;'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/bundler-1.12.5/lib/bundler/runtime.rb:86:in `require'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/bundler-1.12.5/lib/bundler/runtime.rb:86:in `block (2 levels) in require'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/bundler-1.12.5/lib/bundler/runtime.rb:81:in `each'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/bundler-1.12.5/lib/bundler/runtime.rb:81:in `block in require'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/bundler-1.12.5/lib/bundler/runtime.rb:70:in `each'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/bundler-1.12.5/lib/bundler/runtime.rb:70:in `require'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/bundler-1.12.5/lib/bundler.rb:102:in `require'\nfrom /Users/Anton/Work/2-Work/s-art-main/config/application.rb:7:in `&lt;top (required)&gt;'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:78:in `require'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:78:in `block in server'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `tap'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:75:in `server'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0@global/gems/railties-4.2.6/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\nfrom /Users/Anton/Work/2-Work/s-art-main/bin/rails:9:in `require'\nfrom /Users/Anton/Work/2-Work/s-art-main/bin/rails:9:in `&lt;top (required)&gt;'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/spring-1.7.1/lib/spring/client/rails.rb:28:in `load'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/spring-1.7.1/lib/spring/client/rails.rb:28:in `call'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/spring-1.7.1/lib/spring/client/command.rb:7:in `call'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/spring-1.7.1/lib/spring/client.rb:30:in `run'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/spring-1.7.1/bin/spring:49:in `&lt;top (required)&gt;'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/spring-1.7.1/lib/spring/binstub.rb:11:in `load'\nfrom /Users/Anton/.rvm/gems/ruby-2.3.0/gems/spring-1.7.1/lib/spring/binstub.rb:11:in `&lt;top (required)&gt;'\nfrom /Users/Anton/Work/2-Work/s-art-main/bin/spring:13:in `require'\nfrom /Users/Anton/Work/2-Work/s-art-main/bin/spring:13:in `&lt;top (required)&gt;'\nfrom bin/rails:3:in `load'\nfrom bin/rails:3:in `&lt;main&gt;'\n</code></pre>\n\n<p>Can you please help me? I've googled tons of similar errors and still haven't found the right answer.</p>\n\n<pre><code>Rails 4.2.6\nruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin15]\n</code></pre>\n\n<p>Thank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "user-profile"], "answers": [{"comments": [{"owner": {"reputation": 189, "user_id": 5421158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a05bab7d65c0b8c9dd0086022d7011c1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Graves", "link": "https://stackoverflow.com/users/5421158/d-graves"}, "edited": false, "score": 0, "creation_date": 1464821446, "post_id": 37580012, "comment_id": 62646952, "body": "Works perfect thank you! Im guessing it was messing up cause I didn&#39;t have (@post.user.id). Really thank you so much"}, {"owner": {"reputation": 162, "user_id": 2472652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92497a3219be93c27cf2a954d0a1fa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2472652/kevin"}, "edited": false, "score": 0, "creation_date": 1464865729, "post_id": 37580012, "comment_id": 62665064, "body": "You could even do user_path(@post.user) and Rails is smart enough to know to use id from user."}], "tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": true, "score": 1, "last_activity_date": 1464821254, "creation_date": 1464821254, "answer_id": 37580012, "question_id": 37579880, "link": "https://stackoverflow.com/questions/37579880/linking-to-profile-page-by-username-on-ruby/37580012#37580012", "title": "Linking to profile page by username on Ruby", "body": "<p>Could you try this ? ( <code>user_path(@post.user.id)</code> )</p>\n\n<pre><code>&lt;p&gt;&lt;strong&gt;&lt;%= link_to(@post.user.username.capitalize, user_path(@post.user.id)) if @post.user %&gt;&lt;/strong&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 189, "user_id": 5421158, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a05bab7d65c0b8c9dd0086022d7011c1?s=128&d=identicon&r=PG&f=1", "display_name": "D.Graves", "link": "https://stackoverflow.com/users/5421158/d-graves"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "accepted_answer_id": 37580012, "answer_count": 1, "score": 0, "last_activity_date": 1464821254, "creation_date": 1464820453, "last_edit_date": 1464821226, "question_id": 37579880, "link": "https://stackoverflow.com/questions/37579880/linking-to-profile-page-by-username-on-ruby", "title": "Linking to profile page by username on Ruby", "body": "<p>What I want to be able to do is when someone clicks on a picture they will see the user who uploaded that pictures username and I want them to be able to click that username and go to that persons profile page. </p>\n\n<p>Here is my issue I have it working for the first post. I do have multiple users and the posts show the correct username for each one. It links perfectly fine. But for any post after that it throws up an error and the user id gets higher for each post.</p>\n\n<p>This is my profile page so the posts know that this user posts these pics. And when I click the first picture and the username it correctly takes me to here. </p>\n\n<p><a href=\"https://i.stack.imgur.com/PhVWf.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PhVWf.png\" alt=\"enter image description here\"></a></p>\n\n<p>Now when I click the 2nd picture I get this. And if I click the 3rd pic I get couldn't find user with \"id\"=2. Even though the post recognizes who posted the pic by having the correct username.</p>\n\n<p><a href=\"https://i.stack.imgur.com/sgUNK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sgUNK.png\" alt=\"enter image description here\"></a></p>\n\n<p>This is the code I have on my show for the posts</p>\n\n<pre><code>&lt;div class=\"panel-body\"&gt;\n\n    &lt;p&gt;&lt;strong&gt;&lt;%= link_to(@post.user.username.capitalize, user_path) if @post.user %&gt;&lt;/strong&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= @post.description %&gt;&lt;/p&gt;\n    &lt;% if @post.user == current_user %&gt;\n     &lt;%= link_to 'Edit', edit_post_path(@post) %&gt;\n    &lt;% end %&gt;\n\n  &lt;/div&gt;\n</code></pre>\n\n<p>Again it works perfectly fine for the 1st upload If you guys need to see more code I will gladly upload it</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 538, "user_id": 4942501, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/01df718ae071cabc2f077114e4ab4908?s=128&d=identicon&r=PG&f=1", "display_name": "Jared", "link": "https://stackoverflow.com/users/4942501/jared"}, "edited": false, "score": 0, "creation_date": 1464818863, "post_id": 37579546, "comment_id": 62646025, "body": "check out this gem: <a href=\"https://github.com/tmlee/time_difference\" rel=\"nofollow noreferrer\">github.com/tmlee/time_difference</a>"}], "answers": [{"tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": false, "score": 1, "last_activity_date": 1464819772, "last_edit_date": 1495541279, "creation_date": 1464819253, "answer_id": 37579637, "question_id": 37579546, "link": "https://stackoverflow.com/questions/37579546/method-to-render-how-many-days-remain-in-membership-ruby-on-rails/37579637#37579637", "title": "Method to render how many days remain in membership - Ruby on Rails", "body": "<p>Basically, you just want to take the number of days between <code>created_at + 1.year</code> and today's date (that you can have by doing <code>Date.today</code>). If you make <code>date1 - date2</code> it returns the number of days between date1 and date2. </p>\n\n<p>Please note that (as mentionned here <a href=\"https://stackoverflow.com/questions/4502245/how-can-i-find-the-number-of-days-between-two-date-objects-in-ruby\">How can I find the number of days between two Date objects in Ruby?</a>), since Ruby 2.1.3, the difference of dates returns a Rational. So you get <code>(5/1)</code> instead of <code>5</code>. To solve this, just use <code>to_i</code>. If you are using a version of Ruby older than 2.1.3 you should be able to remove <code>to_i</code>. Overall we get :</p>\n\n<pre><code> def days_till_expired\n    (created_at + 1.year - Date.today).to_i\n end\n</code></pre>\n\n<p>You might have to use <code>require 'date'</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1464819725, "post_id": 37579664, "comment_id": 62646366, "body": "This works great but its a float datatype. Do you know how I can change it to a int?"}, {"owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "reply_to_user": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1464819832, "post_id": 37579664, "comment_id": 62646403, "body": "Updated above... Change if you want to round differently"}, {"owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "reply_to_user": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1464820144, "post_id": 37579664, "comment_id": 62646501, "body": "FYI, I don&#39;t think you should use the expiration date to be dependent on creation date. It should be a field in the database that you probably assign the first time. You can update this method accordingly =)"}, {"owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1464821230, "post_id": 37579664, "comment_id": 62646876, "body": "Thank @Abdo! just to be clear, the expiration date should be its on field?"}, {"owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "reply_to_user": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "edited": false, "score": 0, "creation_date": 1464821469, "post_id": 37579664, "comment_id": 62646961, "body": "@CameronBass certainly. You want to be able to extend it later, no? So it must have its own field :-)"}], "tags": [], "owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "is_accepted": true, "score": 1, "last_activity_date": 1464819806, "last_edit_date": 1464819806, "creation_date": 1464819383, "answer_id": 37579664, "question_id": 37579546, "link": "https://stackoverflow.com/questions/37579546/method-to-render-how-many-days-remain-in-membership-ruby-on-rails/37579664#37579664", "title": "Method to render how many days remain in membership - Ruby on Rails", "body": "<p>How about this</p>\n\n<pre><code>def days_till_expiration\n  ((created_at + 1.year) - DateTime.now).to_i / 1.day\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1011, "user_id": 5282616, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb253109f60df40f46cb8d80621074ce?s=128&d=identicon&r=PG&f=1", "display_name": "Dharmesh Rupani", "link": "https://stackoverflow.com/users/5282616/dharmesh-rupani"}, "is_accepted": false, "score": 1, "last_activity_date": 1464819937, "creation_date": 1464819937, "answer_id": 37579779, "question_id": 37579546, "link": "https://stackoverflow.com/questions/37579546/method-to-render-how-many-days-remain-in-membership-ruby-on-rails/37579779#37579779", "title": "Method to render how many days remain in membership - Ruby on Rails", "body": "<p>You can do it with <code>gem time_diff</code> :\n<a href=\"http://www.rubydoc.info/gems/time_diff/0.3.0\" rel=\"nofollow\">http://www.rubydoc.info/gems/time_diff/0.3.0</a></p>\n\n<p>Without using any external gem, you can easily get differences between dates using a method like this:   </p>\n\n<pre><code>def days_till_expired\n   delta = created_at + 1.year - Date.today\n   %w[days].collect do |step|\n      days = 1.send(step)\n      (delta / days).to_i.tap do\n          delta %= days\n      end\n   end\nend\n</code></pre>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 158, "favorite_count": 0, "accepted_answer_id": 37579664, "answer_count": 3, "score": 1, "last_activity_date": 1464852536, "creation_date": 1464818660, "last_edit_date": 1464852536, "question_id": 37579546, "link": "https://stackoverflow.com/questions/37579546/method-to-render-how-many-days-remain-in-membership-ruby-on-rails", "title": "Method to render how many days remain in membership - Ruby on Rails", "body": "<p>Currently I have method called <code>expiration_date</code> that calls the created_at and adds 1 year to that date. I now would like to make a method that says essentially how many days are left until it is <code>expiration_date</code> and call that on the view. I'll show my Model code for clarity and hopefully this will make more sense. </p>\n\n<p>MODEL</p>\n\n<pre><code>class Subscriber &lt; ActiveRecord::Base\n  validates :first_name, presence: true\n  validates :last_name, presence: true\n  validates :email, presence: true\n  validates :phone_number, presence: true\n\n  def date_joined\n   created_at.strftime(\"%-m/%-d/%-y\")\n  end\n\n  def expiration_date\n   (created_at + 1.year).strftime(\"%-m/%-d/%-y\")\n  end\n\n  def days_till_expired\n    #code\n  end\nend\n</code></pre>\n\n<p>CONTROLLER</p>\n\n<pre><code>class SubscribersController &lt; ApplicationController\n  def index\n    @subscriber = Subscriber.all\n  end\n\n  def new\n    @subscriber = Subscriber.new\n  end\n\n  def create\n    @subscriber = Subscriber.create(subscriber_params)\n    if @subscriber.save\n      flash[:notice] = \"Subscriber Has Been Successfully Created\"\n      redirect_to new_subscriber_path(:subscriber)\n    else\n      render \"new\"\n    end\n  end\n\n  def search\n    @subscriber = Subscriber.new\n  end\n\n  def visit\n    @subscriber = Subscriber.find_by_phone_number(params[:phone_number])\n    if @subscriber\n      @subscriber.visit =+ 1\n      @subscriber.save\n      redirect_to subscribers_search_path(:subscriber)\n    else\n      render \"search\"\n    end\n  end\nend\n</code></pre>\n\n<p>I have a view form where a user will type in their phone_number and it will flash a notice to aware them how much time they have left. I think that I will need to grab the user params of their phone number when it's sent in. does this make sense?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1464855261, "post_id": 37579487, "comment_id": 62657959, "body": "Please describe what happens when you list the quirks and what should happen instead."}, {"owner": {"reputation": 41, "user_id": 6411076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdb61460a48af523975b80c9e5ffe49?s=128&d=identicon&r=PG&f=1", "display_name": "whatsinahat", "link": "https://stackoverflow.com/users/6411076/whatsinahat"}, "reply_to_user": {"reputation": 2481, "user_id": 1212000, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZPwGy.png?s=128&g=1", "display_name": "Raffael", "link": "https://stackoverflow.com/users/1212000/raffael"}, "edited": false, "score": 0, "creation_date": 1464933326, "post_id": 37579487, "comment_id": 62697714, "body": "I added what I&#39;ve done, and am editing it as I come closer to a solution."}], "answers": [{"tags": [], "owner": {"reputation": 41, "user_id": 6411076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdb61460a48af523975b80c9e5ffe49?s=128&d=identicon&r=PG&f=1", "display_name": "whatsinahat", "link": "https://stackoverflow.com/users/6411076/whatsinahat"}, "is_accepted": true, "score": 1, "last_activity_date": 1464936668, "creation_date": 1464936668, "answer_id": 37607769, "question_id": 37579487, "link": "https://stackoverflow.com/questions/37579487/paginate-many-has-many-belongs-to-relationships-in-rails-with-will-paginate/37607769#37607769", "title": "Paginate many has_many belongs_to relationships in Rails with will_paginate", "body": "<p>The overall look should be:</p>\n\n<pre><code>UsersController\n  def show\n    @user = User.find(params[:id])\n    @potatoes = @user.potatoes.paginate(page: params[:page])\n    @quirks = Quirk.where(potato: @user.potatoes).paginate(page: params[:page])\n  end\n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;%= render @potatoes %&gt;\n&lt;%= render @quirks %&gt;\n\n&lt;%= will_paginate @potatoes, :params_name =&gt; 'page' %&gt;\n</code></pre>\n\n<p>_potato.html.erb</p>\n\n<pre><code>&lt;%= potato.potato_name %&gt;\n</code></pre>\n\n<p>_quirk.html.erb</p>\n\n<pre><code>&lt;%= quirk.quirk_name %&gt;\n</code></pre>\n\n<p>The error was in calling pagination on a pagination with @potatoes and @quirks in the UsersController. Additionally I changed :params_name back to the default page so both models would change at the same time. To change them separately, use potatoes_page and quirks_page as shown in the question.  I also removed </p>\n\n<pre><code>&lt;%= will_paginate @quirks %&gt;\n</code></pre>\n\n<p>because I was getting two next bars. If you are changing @potatoes and @quirks separately, you would need to include it.</p>\n"}], "owner": {"reputation": 41, "user_id": 6411076, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fdb61460a48af523975b80c9e5ffe49?s=128&d=identicon&r=PG&f=1", "display_name": "whatsinahat", "link": "https://stackoverflow.com/users/6411076/whatsinahat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 716, "favorite_count": 0, "accepted_answer_id": 37607769, "answer_count": 1, "score": 3, "last_activity_date": 1464937054, "creation_date": 1464818331, "last_edit_date": 1464937054, "question_id": 37579487, "link": "https://stackoverflow.com/questions/37579487/paginate-many-has-many-belongs-to-relationships-in-rails-with-will-paginate", "title": "Paginate many has_many belongs_to relationships in Rails with will_paginate", "body": "<p>A user has_many potatoes. Potatoes belong_to a user. A potato has_many quirks. Quirks belong_to potatoes.</p>\n\n<p>I want to display my potatoes and their associated quirks together in my Users show and Paginate using the will_paginate gem like below.</p>\n\n<pre><code>potato_names -&gt; sweet potato    russet potato   mystery potato\nquirk_name -&gt;   shiny           rough           purple\nquirk_name -&gt;   big             brown           orange\nquirk_name -&gt;   old             medium          blue\n</code></pre>\n\n<p>My users controller pre-pagination</p>\n\n<pre><code>UsersController\n\n  def show\n    @user = User.find(params[:id])\n    @potatoes = @user.potatoes\n    @quirks = Quirk.where(potato: @potatoes)\n  end\n</code></pre>\n\n<p>I can paginate potatoes by changing the UsersController -</p>\n\n<pre><code>@potatoes = @user.potatoes.paginate(page: params[:page])\n</code></pre>\n\n<p>and Users - show.html.erb</p>\n\n<pre><code>&lt;%= @potatoes.potato_name %&gt;\n&lt;%= will_paginate @potatoes %&gt;\n</code></pre>\n\n<p>but how can I get quirks to paginate with the potatoes so that when I click next I get the potatoes and quirks associated with the next set? Initially I was getting potatoes to paginate and quirks to just show itself, which is why I didn't display quirks previously. I wasn't understanding the .pagination call well enough.</p>\n\n<p>I can call :param_name to specify the parameter name for page number, and make sure that it's working appropriately.</p>\n\n<p><a href=\"https://github.com/mislav/will_paginate/wiki/API-documentation\" rel=\"nofollow\">will_paginate documentation</a></p>\n\n<p>I can do</p>\n\n<pre><code>UsersController\n  def show\n    @user = User.find(params[:id])\n    @potatoes = @user.potatoes.paginate(page: params[:potatoes_page])\n    @quirks = Quirk.where(potato: @potatoes).paginate(page: params[:quirks_page])\n  end\n</code></pre>\n\n<p>show.html.erb</p>\n\n<pre><code>&lt;%= render @potatoes %&gt;\n&lt;%= render @quirks %&gt;\n\n&lt;%= will_paginate @potatoes, :params_name =&gt; 'potatoes_page' %&gt;\n&lt;%= will_paginate @quirks, :params_name =&gt; 'quirks_page' %&gt;\n</code></pre>\n\n<p>_potato.html.erb</p>\n\n<pre><code> &lt;%= potato.potato_name %&gt;\n</code></pre>\n\n<p>_quirk.html.erb</p>\n\n<pre><code> &lt;%= quirk.quirk_name %&gt;\n</code></pre>\n\n<p>This should give me potatoes and quirks paging separately... But when I next page potatoes, potatoes is paging and quirks is disappearing. When I next page quirks page, potatoes stays the same and only quirks changes.</p>\n\n<p>I believe that the above error is because I'm calling pagination in the potatoes query, then using the potatoes query to call pagination again.</p>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1464818815, "post_id": 37579461, "comment_id": 62646009, "body": "Wow I love such a simple solution haha and to think how many hours I just spent on that. Thanks for your help :)"}, {"owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1464818900, "post_id": 37579461, "comment_id": 62646039, "body": "Glad to hear this helped! Btw, you need to simplify your code quite a bit. You have a fat view. Also, don&#39;t put scripts in views AND don&#39;t put styles in there too =) Best of luck!"}], "tags": [], "owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "is_accepted": true, "score": 1, "last_activity_date": 1464818216, "creation_date": 1464818216, "answer_id": 37579461, "question_id": 37579176, "link": "https://stackoverflow.com/questions/37579176/how-to-save-attribute-which-is-being-overridden-as-nil/37579461#37579461", "title": "How to save attribute which is being overridden as nil?", "body": "<p>You can only have ONE and only ONE html id with the same name on a page. In your case, all your hidden fields have the same id <code>#ranking</code>.</p>\n\n<p>Your jQuery selector will pick the first. Which explains why you're facing the issue.</p>\n\n<p>Just give your hidden field a class and inside your click function, search the children for the ranking hidden field.</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 23, "favorite_count": 0, "accepted_answer_id": 37579461, "answer_count": 1, "score": 0, "last_activity_date": 1464818216, "creation_date": 1464816869, "question_id": 37579176, "link": "https://stackoverflow.com/questions/37579176/how-to-save-attribute-which-is-being-overridden-as-nil", "title": "How to save attribute which is being overridden as nil?", "body": "<p>The <code>ranking</code> only saves if the user saved it under the note that was first in chronological order.</p>\n\n<p><a href=\"https://i.stack.imgur.com/VK6em.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VK6em.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>challenges/show</strong></p>\n\n<pre><code>&lt;% @challenge.dates_challenged.first(@challenge.days_challenged + @challenge.missed_days).each_with_index do |date, i| %&gt;\n  &lt;% if @notes.any? { |note| note.notes_date.strftime(\"%m/%d/%y\") == date.strftime(\"%m/%d/%y\") } %&gt;\n    &lt;% @notes.each do |note| %&gt;\n      &lt;% if note.notes_text.present? %&gt;\n        &lt;% if note.notes_date.strftime(\"%m/%d/%y\") == date.strftime(\"%m/%d/%y\") %&gt;\n          &lt;div class=\"notes-notes-background\"&gt;\n            &lt;% if note.ranking == 1 %&gt;\n              &lt;%= image_tag '1.png', class: 'note-emoticon' %&gt;\n            &lt;% elsif note.ranking == 2 %&gt;\n              &lt;%= image_tag '2.png', class: 'note-emoticon' %&gt;\n            &lt;% elsif note.ranking == 3 %&gt;\n              &lt;%= image_tag '3.png', class: 'note-emoticon' %&gt;\n            &lt;% elsif note.ranking == 4 %&gt;\n              &lt;%= image_tag '4.png', class: 'note-emoticon' %&gt;\n            &lt;% end %&gt;\n            &lt;div style=\"font-weight: bold; font-size: 14px; color: #a0b4f0;\"&gt;DAY &lt;%= i + 1 %&gt;&lt;/div&gt;\n            &lt;b&gt;&lt;%= note.notes_date.strftime(\"%b %d, %Y\") %&gt;&lt;/b&gt;&lt;br&gt;&lt;br&gt;\n            &lt;div style=\"margin-left: 20px; margin-right: 20px;\"&gt;\n              &lt;%= link_to edit_note_path(note) do %&gt;\n                &lt;%= simple_format note.notes_text %&gt;\n              &lt;% end %&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;% end %&gt;\n      &lt;% else %&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;% else %&gt;\n    &lt;div class=\"notes-form-background\" style=\"padding-top: 1em;\"&gt;\n      &lt;div style=\"margin-bottom: -19px; color: #a0b4f0; font-weight: bold; font-size: 14px; color: #a0b4f0;\"&gt;DAY &lt;%= i + 1 %&gt;&lt;/div&gt;&lt;br&gt;\n      &lt;div style=\"color: #eee;\"&gt;&lt;%= date.strftime(\"%b %d, %Y\") %&gt;&lt;/div&gt;\n      &lt;div style=\"margin-left: 20px; margin-right: 20px;\"&gt;\n        &lt;%= render 'notes/form', :date =&gt; date %&gt;\n      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>notes/form</strong></p>\n\n<pre><code>&lt;%= form_for [@notable, @note] do |f| %&gt;\n  &lt;%= f.hidden_field(:ranking, id: 'ranking') %&gt;\n  &lt;%= image_tag('1.png', data: { ranking: 1 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('2.png', data: { ranking: 2 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('3.png', data: { ranking: 3 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('4.png', data: { ranking: 4 }, class: 'image-clicker') %&gt;\n&lt;% end %&gt;\n\n&lt;script&gt;\n  $('.image-clicker').click(function() {\n    $('#ranking').val($(this).data('ranking'));\n    $('.clicked').removeClass('clicked')\n    $(this).addClass('clicked');\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>Everything else from the note is being saved such as the <code>text</code>, just not the <code>ranking</code>.</p>\n"}, {"tags": ["ruby", "key", "yaml"], "answers": [{"comments": [{"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464816558, "post_id": 37579063, "comment_id": 62645116, "body": "Yes, but it would be easier if I could put all of them to have one value, the emails for those three are the same email."}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 1, "last_activity_date": 1464816427, "creation_date": 1464816427, "answer_id": 37579063, "question_id": 37579011, "link": "https://stackoverflow.com/questions/37579011/giving-a-yaml-file-more-than-one-key-while-only-using-one-value-for-the-keys/37579063#37579063", "title": "Giving a YAML file more than one key, while only using one value for the keys", "body": "<p>I don't know if I get correctly but I think you want something like</p>\n\n<pre><code>emails:\n  ETA: email1@example.com\n  SOL: email2@example.com\n  VETS: email3@example.com\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "edited": false, "score": 0, "creation_date": 1464820863, "post_id": 37579934, "comment_id": 62646762, "body": "If you have multiple emails, you can also create groups, each group would have an email, and a list of emails."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464821274, "post_id": 37579934, "comment_id": 62646892, "body": "So I would have to create another aspect for each email correct? And then for each group I can call it using something like: <code>*email</code>"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464821937, "post_id": 37579934, "comment_id": 62647129, "body": "I see how that could work, but I&#39;d have to be able to call the advocates from a single key for example: <code>[&#39;group&#39;][etc][&#39;email&#39;]</code> so giving them <code>group1</code>,<code>group2</code>,etc. won&#39;t work in this case.."}, {"owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "reply_to_user": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 1, "creation_date": 1464822052, "post_id": 37579934, "comment_id": 62647160, "body": "Add all groups under a groups key and loop through the groups array. YAML can act just like a db. It depends what you want to do."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1464833668, "post_id": 37579934, "comment_id": 62649854, "body": "Your yaml doesn&#39;t validate."}, {"owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1464840028, "post_id": 37579934, "comment_id": 62651183, "body": "@7stud There was  a typo that was fixed."}], "tags": [], "owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "is_accepted": true, "score": 2, "last_activity_date": 1464837505, "last_edit_date": 1464837505, "creation_date": 1464820706, "answer_id": 37579934, "question_id": 37579011, "link": "https://stackoverflow.com/questions/37579011/giving-a-yaml-file-more-than-one-key-while-only-using-one-value-for-the-keys/37579934#37579934", "title": "Giving a YAML file more than one key, while only using one value for the keys", "body": "<p>** UPDATE **\nI think you have multiple emails and each group has a longer list.</p>\n\n<pre><code>group1:\n  email: me@email.com\n  list:\n    - ETA\n    - SOL\n    - VETS\ngroup2:\n  email: me2@email.com\n  list:\n    - ONE\n    - TWO\n    - THREE\n</code></pre>\n\n<p>** END UPDATE **</p>\n\n<p>If I understand correctly and that you want the same email:</p>\n\n<pre><code>email: &amp;email me@email.com\n\nemails:\n  ETA: *email\n  SOL: *email\n  VETS: *email\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>pry(main)&gt; YAML.load(File.read('foo.yml'))\n=&gt; {\"email\"=&gt;\"me@email.com\", \"emails\"=&gt;{\"ETA\"=&gt;\"me@email.com\", \"SOL\"=&gt;\"me@email.com\", \"VETS\"=&gt;\"me@email.com\"}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "edited": false, "score": 0, "creation_date": 1464840126, "post_id": 37580636, "comment_id": 62651207, "body": "Interesting &quot;new&quot; syntax! :-)"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1464843188, "post_id": 37580636, "comment_id": 62652196, "body": "Say  I want to look up the email for ETA.  How would I do that?  Is that practical?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 12249, "user_id": 226255, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/e27613dbdd5ddff09392912d58a50821?s=128&d=identicon&r=PG", "display_name": "Abdo", "link": "https://stackoverflow.com/users/226255/abdo"}, "edited": false, "score": 0, "creation_date": 1464846610, "post_id": 37580636, "comment_id": 62653363, "body": "It&#39;s not as practical as it would be with @Abdo&#39;s answer. It would look like this: <code>data[&quot;agencies&quot;].find {|keys, val| keys.include?(&quot;ETA&quot;) }.last</code> (whereas with Abdo&#39;s it would be <code>data[&quot;emails&quot;][&quot;ETA&quot;]</code>)."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1464891705, "post_id": 37580636, "comment_id": 62683603, "body": "This is awesome, I didn&#39;t know you could use <code>?</code> as syntax"}, {"owner": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1464900950, "post_id": 37580636, "comment_id": 62688706, "body": "+1 I did not know you could do this in Ruby. Although the YAML spec allows arbitrary nodes as mapping keys (as long as they are unique), my <code>ruamel.yaml</code> parser for Python only allows scalars and sequences (as the <code>dict</code> keys have to be hashable). I have to think about a solution for that. Minor detail: the double quotes around the email addresses are superfluous"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 50175, "user_id": 1307905, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a38a4f5f180194ac457cdc057f1be6e3?s=128&d=identicon&r=PG", "display_name": "Anthon", "link": "https://stackoverflow.com/users/1307905/anthon"}, "edited": false, "score": 0, "creation_date": 1464908438, "post_id": 37580636, "comment_id": 62691541, "body": "@Anthon Quite right about the quotes. They&#39;re leftover from copying OP&#39;s code. I&#39;ll edit."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 2, "last_activity_date": 1464908465, "last_edit_date": 1464908465, "creation_date": 1464825576, "answer_id": 37580636, "question_id": 37579011, "link": "https://stackoverflow.com/questions/37579011/giving-a-yaml-file-more-than-one-key-while-only-using-one-value-for-the-keys/37580636#37580636", "title": "Giving a YAML file more than one key, while only using one value for the keys", "body": "<p>I'm not sure this is the best solution to your problem, but you can use anything as a key in a YAML mapping, including a sequence (array). It looks like this:</p>\n\n<pre class=\"lang-yaml prettyprint-override\"><code>agencies:\n  ? - ETA\n    - SOL\n    - VETS\n    - EMC\n  : advocate_email: example@example.com\n  ? - some\n    - other\n    - ones\n  : advocate_email: example1@example1.com\n</code></pre>\n\n<p>Each <code>?</code> denotes a key and the subsequent <code>:</code> denotes a value. To demonstrate:</p>\n\n<pre><code>require \"pp\"\nrequire \"yaml\"\n\nyaml = &lt;&lt;YML\nagencies:\n  ? - ETA\n    - SOL\n    - VETS\n    - EMC\n  : advocate_email: example@example.com\n  ? - some\n    - other\n    - ones\n  : advocate_email: example1@example1.com\nYML\n\npp YAML.load(yaml)\n# =&gt; {\"agencies\"=&gt;\n#      {[\"ETA\", \"SOL\", \"VETS\", \"EMC\"]=&gt;{\"advocate_email\"=&gt;\"example@example.com\"},\n#       [\"some\", \"other\", \"ones\"]=&gt;{\"advocate_email\"=&gt;\"example1@example1.com\"}}}\n</code></pre>\n"}], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1421, "favorite_count": 0, "accepted_answer_id": 37579934, "answer_count": 3, "score": 0, "last_activity_date": 1464908465, "creation_date": 1464816172, "last_edit_date": 1464818029, "question_id": 37579011, "link": "https://stackoverflow.com/questions/37579011/giving-a-yaml-file-more-than-one-key-while-only-using-one-value-for-the-keys", "title": "Giving a YAML file more than one key, while only using one value for the keys", "body": "<p>I have an issue where I need to make a yaml file that will contain the following keys:</p>\n\n<blockquote>\n  <p>ETA SOL VETS EMC</p>\n</blockquote>\n\n<p>From these keys I need one value that will be an email address all four of the keys are the same email address, is it possible to make a yaml file with more then one key, and only one value..?</p>\n\n<p>For example:</p>\n\n<pre><code>agencies:\n         - ETA\n         - SOL\n         - VETS\n         - EMC\n            advocate_email: \"example@example.com\" #&lt;= Give these four the same value\n         - some\n         - other\n         - ones\n             advocate_email: \"example1@example1.com\" #&lt;= Give three another value.. So one and so forth\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "partials", "renderpartial"], "comments": [{"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1464816760, "post_id": 37578793, "comment_id": 62645223, "body": "u can just pass <code>@user</code> like this <code>collection: @user</code> and loop it in render file <code>@user.items</code>. Also try like this <code>&lt;%= render partial: &quot;&#47;users&#47;item&quot;, locals: {user_items: @user.items} %&gt;</code>"}], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1464825121, "post_id": 37579202, "comment_id": 62648011, "body": "Thanks for the suggestion! I tried to the render the partial as described above, and while the template renders static elements, I am still unable to display the item data, much less the item data tied to a specific user."}], "tags": [], "owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "is_accepted": false, "score": 0, "last_activity_date": 1464816968, "creation_date": 1464816968, "answer_id": 37579202, "question_id": 37578793, "link": "https://stackoverflow.com/questions/37578793/rails-partial-template-with-collection-not-rendering-correctly/37579202#37579202", "title": "Rails partial template with collection not rendering correctly", "body": "<p>Try to render it like this:</p>\n\n<pre><code>&lt;%= render partial: \"/users/item\", locals: {user_items: @user.items} %&gt;\n</code></pre>\n\n<p>and loop it in _partial file:</p>\n\n<pre><code>&lt;% user_items.each do |item| %&gt;\n...\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1464826085, "post_id": 37580200, "comment_id": 62648279, "body": "Exactly, the original code should work but it should also render items for a given user. I&#39;ve used the same format before and this is the first time I&#39;ve had a problem. From my limited previous experience, <code>&lt;%= render partial: &quot;&#47;users&#47;item&quot;, collection: @user.items %&gt;</code> should display items associated with a particular user since calling the <code>.items</code> method on <code>@user</code> should result in an array of the user&#39;s associated item objects. This tutorial does a better job explaining <a href=\"http://tutorials.jumpstartlab.com/projects/blogger.html#i2:-adding-comments\" rel=\"nofollow noreferrer\">See Displaying Comments for an Article</a>."}], "tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": false, "score": 0, "last_activity_date": 1464822389, "creation_date": 1464822389, "answer_id": 37580200, "question_id": 37578793, "link": "https://stackoverflow.com/questions/37578793/rails-partial-template-with-collection-not-rendering-correctly/37580200#37580200", "title": "Rails partial template with collection not rendering correctly", "body": "<p>You're expecting the template rendering to be smarter than it is - it's rendering all the items because that's what's in <code>@items</code> - it doesn't know you only want items for a given user. Nothing wrong with the original code</p>\n\n<pre><code>render partial: \"/users/item\", collection: @user.item\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1464839826, "post_id": 37580790, "comment_id": 62651133, "body": "Thank you!! <code>@user.inspect</code> returns the correct user object. However, <code>@user.items</code> does not return the expected collection of items, so my ActiveRecord associations and/or migrations are the issue! Oddly, my rails console shows that each item is being assigned a user_id foreign key and my user model has  <code>has_many :items, :foreign_key =&gt; &#39;user_id&#39;, :primary_key =&gt; &#39;user_id&#39;</code> and my item model has <code>belongs_to :user, :foreign_key =&gt; &#39;user_id&#39;, :primary_key =&gt; &#39;user_id&#39;</code>, so I\u2019m still not clear as to why  <code>@user.items</code> does not return an items collection. I&#39;m thinking it&#39;s likely my migrations."}, {"owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "reply_to_user": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1464864039, "post_id": 37580790, "comment_id": 62664034, "body": "Try changing those declarations in your Models to just: <code>has_many :items</code> in your User model, and <code>belongs_to :user</code> in your Item model. However, before or after doing this you will also have to reverse some previous migrations. You could do this like this: <a href=\"http://edgeguides.rubyonrails.org/active_record_migrations.html#reverting-previous-migrations\" rel=\"nofollow noreferrer\">edgeguides.rubyonrails.org/&hellip;</a> (more elegant but slightly more complex). Personally, just because I&#39;m lazy, I would probably just create new migration files to drop the User table and Item table completely and then run migrations to build them with the proper associations."}, {"owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "reply_to_user": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1464864332, "post_id": 37580790, "comment_id": 62664220, "body": "Google <code>drop_table</code> for rails migrations for how to drop tables. You might hit database problems, but remember if you get in a proper muddle, you can always just do <code>rake db:drop db:create db:migrate</code> which will completely destroy and rebuild your database, based on your current migration files (you will have to add data again after this). Again, I&#39;d recommend writing some RSpec tests with the shoulda gem, because I <i>think</i> (but I&#39;m not sure) it doesn&#39;t just test the association declarations in your models, but also that your db schema is setup properly."}, {"owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "reply_to_user": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1464864350, "post_id": 37580790, "comment_id": 62664231, "body": "This would save a lot of time in the long run (the beauty of TDD!)"}, {"owner": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1464981753, "post_id": 37580790, "comment_id": 62726514, "body": "I can\u2019t thank you enough for the incredibly detailed help! After modifying my models as you\u2019ve described, I ran <code>rake db:rollback STEP=6</code> (I had a lot of migrations), edited my migration files according to <a href=\"http://guides.rubyonrails.org/v3.2/migrations.html#changing-migrations\" rel=\"nofollow noreferrer\">RailsGuides - Changing Migrations</a>, and then ran <code>rake db:migrate</code>. I then created some new users and added items to each. Now my items and user are showing up correctly when the partial renders! THANK YOU!"}, {"owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "reply_to_user": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1464997037, "post_id": 37580790, "comment_id": 62732212, "body": "Hey that&#39;s really great! Very glad I could help. Good effort getting all of that fixed - reversing migrations and sorting out the database can be very confusing when you&#39;re not used to it, so big pat on the back to you - glad you got it sorted."}, {"owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "reply_to_user": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "edited": false, "score": 0, "creation_date": 1464998014, "post_id": 37580790, "comment_id": 62732431, "body": "Oh and knowing how to debug is probably the most important skill (but this is a skill that you&#39;re always improving on and never truly master), but you have to know what tools to use. In short, for Rails, byebug (or pry), rails console, and <code>puts</code> are your friends. Also, in general, when writing new code, take the smallest possible, simplest possible, babysteps and test each step as you go (either manually or using TDD)."}], "tags": [], "owner": {"reputation": 1603, "user_id": 4111480, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/efe2b8fc71222d6b38cf9f0e866a9878?s=128&d=identicon&r=PG&f=1", "display_name": "Yorkshireman", "link": "https://stackoverflow.com/users/4111480/yorkshireman"}, "is_accepted": true, "score": 2, "last_activity_date": 1464827312, "last_edit_date": 1464827312, "creation_date": 1464826738, "answer_id": 37580790, "question_id": 37578793, "link": "https://stackoverflow.com/questions/37578793/rails-partial-template-with-collection-not-rendering-correctly/37580790#37580790", "title": "Rails partial template with collection not rendering correctly", "body": "<p>Install the byebug gem, either by running <code>gem install byebug</code> on your command line or by putting byebug in your Gemfile (then run <code>bundle install</code>).</p>\n\n<p>Put <code>byebug</code> just after the @user declaration in your UsersController, like this:</p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  before_action :set_user, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @users = User.all\n    render :index\n  end\n\n  def show\n    @user = User.find(params[:id])\n    byebug\n</code></pre>\n\n<p>Then start your local server and go the user show view in your browser. The page won't render, because when it hits <code>byebug</code> the server pauses.</p>\n\n<p>When this happens, go back to your Terminal and look at your server log. It will be waiting for your commands. Type <code>@user</code> and press Enter. What does it return?</p>\n\n<p>Also try <code>@user.inspect</code>. Does it return a User object?</p>\n\n<p>Then do <code>@user.items</code>. What does that return? If <code>@user.items</code> returns the expected collection of items, then there is something wrong with how you are passing that to the view, or what you're doing with it in the view.</p>\n\n<p>If <code>@user.items</code> doesn't return a collection of items, then that's why it isn't showing in your view! In this case, it's probably something to do with your ActiveRecord associations and/or your migrations.</p>\n\n<p>Another possibility is that the current Items in your database may have been created before you had the associations setup, so they won't have a user_id. You can check this in your rails console. Make sure you have Items in your database that have the same user_id as your current_user.</p>\n\n<p>Another good thing to do in your rails console would be to assign a User, that you think has some Items, to a variable eg <code>user = User.first</code>, and then do <code>user.items</code>. Does that work?</p>\n\n<p>I also recommend writing some RSpec tests, at least at Model level to test that the proper associations exist. The <a href=\"https://github.com/thoughtbot/shoulda\" rel=\"nofollow\">shoulda gem</a> is great for this.</p>\n\n<p>Comment here with your findings.</p>\n"}], "owner": {"reputation": 75, "user_id": 5879949, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/abede5808c72a22f2cef70790641c8c6?s=128&d=identicon&r=PG&f=1", "display_name": "Code Goose", "link": "https://stackoverflow.com/users/5879949/code-goose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1291, "favorite_count": 0, "accepted_answer_id": 37580790, "answer_count": 3, "score": 0, "last_activity_date": 1464827312, "creation_date": 1464815250, "last_edit_date": 1464824727, "question_id": 37578793, "link": "https://stackoverflow.com/questions/37578793/rails-partial-template-with-collection-not-rendering-correctly", "title": "Rails partial template with collection not rendering correctly", "body": "<p>I have been troubleshooting this error for hours and I have no idea what I\u2019m doing wrong. I simply can\u2019t get the items collection to properly display for an individual user. Each item belongs to a single user and each user has many items. Right now, my partial is not rendering on the users show view. </p>\n\n<p>If I change <code>&lt;%= render partial: \"/users/item\", collection: @user.items %&gt;</code>\n to <code>&lt;%= render partial: \"/users/item\", collection: @items %&gt;</code> then the partial template is rendered, but all items are displayed regardless of which user they belong to. After checking the database, each item entry is being properly stored with a foreign key user_id, so that isn\u2019t the issue. </p>\n\n<p><strong>How do I get the correct items to display for each user?</strong> I have used partials several times before and I\u2019ve cross-referenced old and new code. I can\u2019t see the difference and I\u2019m losing my mind. I\u2019ve searched the general internets, Stack Overflow, and reviewed the <a href=\"http://guides.rubyonrails.org/layouts_and_rendering.html\" rel=\"nofollow\">Rails Guides for Layouts and Rendering</a>. I've posted the relevant code below and happy to post anything else. Please help!</p>\n\n<p><strong>views/users/_item.html.erb</strong></p>\n\n<pre><code>&lt;div&gt;\n  &lt;h4&gt;ITEM: &lt;%= item.title %&gt;&lt;/h4&gt;\n  &lt;p class=\"item\"&gt;&lt;%= item.cost %&gt;&lt;/p&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>views/users/show.html.erb</strong></p>\n\n<pre><code>&lt;h1&gt;Users#show&lt;/h1&gt;\n&lt;p&gt;Find me in app/views/users/show.html.erb&lt;/p&gt;\n\n&lt;div&gt;&lt;%= @user.first_name %&gt;&lt;/div&gt;\n\n&lt;h3&gt;My List&lt;/h3&gt;\n&lt;%= render partial: \"/users/item\", collection: @user.items %&gt;\n\n&lt;span&gt;ADD ITEM&amp;nbsp;&lt;%= link_to image_tag(\"Plus-50.png\"), new_user_item_path(@user), class: \"items-nved\" %&gt; &lt;/span&gt;\n</code></pre>\n\n<p><strong>controllers/users_controller.rb</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n\n  before_action :set_user, only: [:show, :edit, :update, :destroy]\n\n  def index\n    @users = User.all\n    render :index\n  end\n\n  def show\n    @user = User.find(params[:id])\n    # @item = Item.find(params[:id])\n    @items = Item.all\n    @item = Item.new\n    @item.user_id = @user.id\n  end\n\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      redirect_to new_session_path, method: :get\n    else\n      render \"new\"\n   end\n  end\n\n  def edit\n  end\n\n  def update\n  end\n\n  def destroy\n  end\n\n  private\n  def set_user\n   @user = User.find(params[:id])\n  end\n\n  def user_params\n    params.require(:user).permit(:first_name, :last_name, :birthday, :city, :state, :email, :password, :password_confirmation)\n  end\nend\n</code></pre>\n\n<p><strong>controllers/items_controller.rb</strong></p>\n\n<pre><code>class ItemsController &lt; ApplicationController\n\n  include ItemsHelper\n\n  before_filter :require_login, only: [:new, :create, :update, :destroy]\n\n  def index\n    @current_user = current_user\n    @items = Item.all\n  end\n\n  def show\n    @user = current_user\n    @item = Item.find(params[:id])\n  end\n\n  def new\n    @user = current_user\n    @item = Item.new\n  end\n\n  def create\n    @user = current_user\n    @item = Item.new(item_params)\n    @item.user_id = params[:user_id] # set user_id param from database to current_user id\n    @item.save\n\n    redirect_to user_item_path(@user, @item)\n  end\n\n  def edit\n    @user = current_user\n    @item = Item.find(params[:id])\n  end\n\n  def update\n   @user = current_user\n   @item = Item.find(params[:id])\n   @item.update(item_params)\n   redirect_to user_path(@user)\n  end\n\n  def destroy\n    @user = User.find params[:user_id]\n    @item = Item.find(params[:id])\n    @item.destroy\n    redirect_to user_path(@user)\n  end\nend\n\nprivate\n  def user_params\n    params.require(:user).permit(:first_name, :last_name, :birthday, :city, :state, :email, :password, :password_confirmation)\n  end\n\n  def require_login\n    unless logged_in?\n      flash[:error] = \"You must be logged in to access this section\"\n      redirect_to new_login_url # halts request cycle\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "testunit"], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 6, "last_activity_date": 1464880791, "creation_date": 1464880791, "answer_id": 37595917, "question_id": 37578488, "link": "https://stackoverflow.com/questions/37578488/how-to-generate-a-temporary-file-for-use-in-a-unit-test/37595917#37595917", "title": "How to generate a temporary file for use in a unit test?", "body": "<p><a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/tempfile/rdoc/Tempfile.html#method-c-create\" rel=\"noreferrer\">The <code>.create</code> and <code>.new</code> methods of Ruby's <code>Tempfile</code> take a second argument which is the directory you want the file to be in</a>, and files created by <code>Tempfile</code> are automatically deleted when the temporary file's <code>File</code> object is garbage-collected or Ruby exits. So you can create a temporary file,</p>\n\n<pre><code>tempfile = Tempfile.new('filename', 'directoryname')\n</code></pre>\n\n<p>write to it, do your test and let Ruby clean it up for you.</p>\n\n<p>Note that the first argument is not the entire unqualified name of the file, but a part to which <code>Tempfile</code> adds disambiguating characters, so you can safely do it more than once in a test suite.</p>\n\n<p>Also, if you need the file to have a particular suffix, you can do e.g.</p>\n\n<pre><code>tempfile = Tempfile.new(['filename', '.rb'], 'directoryname')\n</code></pre>\n"}], "owner": {"reputation": 6929, "user_id": 4909076, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/73808a90d5413f6f9dfd6e4090c02bda?s=128&d=identicon&r=PG&f=1", "display_name": "tim_xyz", "link": "https://stackoverflow.com/users/4909076/tim-xyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3918, "favorite_count": 0, "accepted_answer_id": 37595917, "answer_count": 1, "score": 2, "last_activity_date": 1464880845, "creation_date": 1464814041, "last_edit_date": 1464880845, "question_id": 37578488, "link": "https://stackoverflow.com/questions/37578488/how-to-generate-a-temporary-file-for-use-in-a-unit-test", "title": "How to generate a temporary file for use in a unit test?", "body": "<p>The method to test allows adding a <code>path</code> to additional files the user adds which contain data.</p>\n\n<p>For example, the user might store a file called <code>data.txt</code> in the <code>/workspace/data</code> directory. And we want to add the path to this directory to an already existing array called <code>DATA_PATH</code>.</p>\n\n<p><strong>Method:</strong></p>\n\n<pre><code>def add_custom_path(path)\n  DATA_PATH.unshift(path)\nend\n</code></pre>\n\n<p>Where <code>path</code> is a location in a Rails app where the user stores a file.</p>\n\n<p>The gem uses <code>test-unit</code>.</p>\n\n<p><strong>Question:</strong></p>\n\n<p>Is there a way to temparily generate a file in some directory, run an <code>assert_not_empty</code> test, and then have the file disappear?</p>\n\n<p>I don't have experience writing tests for gems so any guidance would be very appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "edited": false, "score": 1, "creation_date": 1464816571, "post_id": 37578332, "comment_id": 62645124, "body": "i don&#39;t really have the time to provide a full answer or to make sure it&#39;s really  what you want, but since you still have no answer: You should look into Ruby&#39;s <code>super</code> method to invoke original method"}, {"owner": {"reputation": 679, "user_id": 3499961, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/fHjY4.png?s=128&g=1", "display_name": "Badr Tazi", "link": "https://stackoverflow.com/users/3499961/badr-tazi"}, "reply_to_user": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "edited": false, "score": 0, "creation_date": 1464821248, "post_id": 37578332, "comment_id": 62646882, "body": "Thanks for your answer! I know how <code>super</code> works, but it didn&#39;t work and alias_method helped me fix that. The main issue however is with the <code>if browser.mobile?</code> line, I have updated my question, can you please take a look? Please don&#39;t hesitate to leave a comment again anything you say can guide me to the right direction :)"}], "owner": {"reputation": 679, "user_id": 3499961, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/fHjY4.png?s=128&g=1", "display_name": "Badr Tazi", "link": "https://stackoverflow.com/users/3499961/badr-tazi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 422, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464821090, "creation_date": 1464813434, "last_edit_date": 1464821090, "question_id": 37578332, "link": "https://stackoverflow.com/questions/37578332/overriding-a-method-from-a-gem-with-a-condition-in-rails-4", "title": "Overriding a method from a gem with a condition in Rails 4", "body": "<p>I am using the gritter gem for displaying simple notifications in my rails app. In my controllers I use the gflash method which later adds a notification in a view like so:</p>\n\n<pre><code>gflash notification: \"Welcome to my awesome website!\"\n</code></pre>\n\n<p>Now the problem is that I am making completely different views for mobile, and I need to override <a href=\"https://github.com/RobinBrouwer/gritter/blob/master/lib/gritter/gflash.rb\" rel=\"nofollow\">this method which is located in the Gflash module</a>. What I want is something that looks like this:</p>\n\n<pre><code>If the browser is a mobile browser\n  Do this\nelse\n  Use the original gflash method in Gritter::Gflash\nend\n</code></pre>\n\n<p>So I added an initializer in config/initializers/custom_gritter.rb:</p>\n\n<pre><code>Gritter::Gflash.module_eval do\n    def gflash *args\n            @@mobile_notifications == [] ? @@mobile_notifications.push(args[0][:notice]) : @@mobile_notifications = [args[0][:notice]]\n    end\n\n    def self.mobile_notifications\n        @@mobile_notifications ||= []\n    end\n\n    def self.reset_mobile_notifications\n        @@mobile_notifications = nil\n    end\nend\n</code></pre>\n\n<p>This allows me to have access to the user notifications in my controllers or views and it works fine:</p>\n\n<pre><code>Gritter::Gflash.mobile_notifications\n</code></pre>\n\n<p>But I still have to make sure it overrides only if the user has a mobile device so I changed the custom_gritter.rb file to:</p>\n\n<pre><code>Gritter::Gflash.module_eval do\n    alias_method :original_gflash, :gflash\n    def gflash *args\n        puts \"override works\"\n        if browser.mobile?\n            puts \"detected mobile browser\"\n            @@mobile_notifications == [] ? @@mobile_notifications.push(args[0][:notice]) : @@mobile_notifications = [args[0][:notice]]\n        else\n            original_gflash\n        end\n    end\n\n    def self.mobile_notifications\n        @@mobile_notifications ||= []\n    end\n\n    def self.reset_mobile_notifications\n        @@mobile_notifications = nil\n    end\nend\n</code></pre>\n\n<p>In my terminal I see \"override works\" but I don't see \"detected mobile browser\" which means that the condition doesn't work. the <code>browser.mobile?</code> method is provided by the <a href=\"https://github.com/fnando/browser\" rel=\"nofollow\">browser gem</a>. I also used the is_mobile_request? method from <a href=\"https://github.com/tscolari/mobylette\" rel=\"nofollow\">the mobylette gem</a> but I have the exact same issue.</p>\n\n<p>Why isn't it working? Does the module have access to the methods in the other gems? Is this a bad approach to solve my problem ? Any suggestion/idea would be greatly appreciated, thanks in advance !</p>\n\n<p><strong>update:</strong> I don't have an error which means that it considers <code>browser.mobile?</code> to be false even when I'm opening my browser on a mobile( with chrome). I could confirm this by adding <code>puts \"not mobile browser\"</code> after the else statement, which appeared in my terminal.</p>\n\n<p>Any idea why <code>browser.mobile?</code> returns true in a controller and false in this module?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "plugins", "redmine"], "answers": [{"comments": [{"owner": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464814081, "post_id": 37578300, "comment_id": 62643850, "body": "First I changed to  <b>flash[:notice] = &#39;test&#39;</b>  Then I deleted the plugin.  After every change, I did:  <b>rake redmine:plugins:migrate RAILS_ENV=production</b> and <b>/etc/init.d/apache2 restart</b>"}, {"owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "reply_to_user": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464815029, "post_id": 37578300, "comment_id": 62644367, "body": "@djcaesar9114 Are you making these changes on a live site?  If so, you&#39;re playing a dangerous game.  Anyway, what Rails server are you using?  Passenger, Unicorn, Puma, Webrick, etc,.  I mean restarting that service.  That should do it."}, {"owner": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464815216, "post_id": 37578300, "comment_id": 62644466, "body": "I don&#39;t know what you mean with &quot;a live site&quot;. I&#39;m developing a Redmine Plugin, and I have a Redmine working on my computer, the Redmine I&#39;m testing the plugin with. I restarted passenger, but I still get the same error :("}], "tags": [], "owner": {"reputation": 3439, "user_id": 5665799, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/YOrLl.jpg?s=128&g=1", "display_name": "Kieran E", "link": "https://stackoverflow.com/users/5665799/kieran-e"}, "is_accepted": false, "score": 0, "last_activity_date": 1464813317, "creation_date": 1464813317, "answer_id": 37578300, "question_id": 37578286, "link": "https://stackoverflow.com/questions/37578286/impossible-to-delete-a-flash/37578300#37578300", "title": "Impossible to delete a flash", "body": "<p>Have you restarted the server?  Or you can use <code>flash[:notice] = nil</code> to remove it.</p>\n"}, {"comments": [{"owner": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464816636, "post_id": 37578973, "comment_id": 62645159, "body": "OK great, changing the session secret key did solve my problem. However, I really don&#39;t understand why this problem appear..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464816724, "post_id": 37578973, "comment_id": 62645204, "body": "That value persists in your session until a page is successfully rendered. Since you kept getting an exception it could never run to completion."}, {"owner": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464817027, "post_id": 37578973, "comment_id": 62645332, "body": "OK. But now when I change the value of <b>flash[:notice]</b>, it won&#39;t change. I&#39;m a beginner in Rails (I come from PHP), so it means I have to change the session token every time I make a change in my code?  Thanks anyway :)"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464817078, "post_id": 37578973, "comment_id": 62645353, "body": "No, the value will change <i>if</i> the request can be completed. The session update occurs at the end of the request. Clearing sessions should only be necessary if you really mess something up, like you have here."}, {"owner": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464817686, "post_id": 37578973, "comment_id": 62645590, "body": "OK, I understand now. Rails really is different from PHP! Thanks a lot, tonight I&#39;ll be able to sleep now."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464817891, "post_id": 37578973, "comment_id": 62645668, "body": "By default Rails stores the session data in a cookie, and a cookie is only updated when the request completes. PHP stores the session ID in the cookie and the rest on disk but if you like Rails can also operate this way. The default is safer for multi-server installations."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 0, "last_activity_date": 1464816009, "creation_date": 1464816009, "answer_id": 37578973, "question_id": 37578286, "link": "https://stackoverflow.com/questions/37578286/impossible-to-delete-a-flash/37578973#37578973", "title": "Impossible to delete a flash", "body": "<p>This is stored in your session, so usually changing the session secret key will invalidate all sessions and discard any old session data.</p>\n\n<p>You can also try and <code>rescue</code> to clear it out as a one-time deal.</p>\n"}, {"comments": [{"owner": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464817553, "post_id": 37579178, "comment_id": 62645541, "body": "Actually this html_safe error comes from the fact that it looks for a value I don&#39;t have anymore (:label_presta_added). And what I don&#39;t understand is where does Rails find this value, whereas I erased it from my code. Apparently some data is stored in the sessions."}, {"owner": {"reputation": 76, "user_id": 5868733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460fda9ac6e0b3e344e81f73112a22df?s=128&d=identicon&r=PG&f=1", "display_name": "tanvir2362", "link": "https://stackoverflow.com/users/5868733/tanvir2362"}, "reply_to_user": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "edited": false, "score": 0, "creation_date": 1464818003, "post_id": 37579178, "comment_id": 62645709, "body": "Yes, I understood that. Thought restarting the server should have cleared the session, so I thought may be you will have to remove html_safe from that method and try again. But apparently the session was never cleared. Good that your problem is solved. :)"}], "tags": [], "owner": {"reputation": 76, "user_id": 5868733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/460fda9ac6e0b3e344e81f73112a22df?s=128&d=identicon&r=PG&f=1", "display_name": "tanvir2362", "link": "https://stackoverflow.com/users/5868733/tanvir2362"}, "is_accepted": false, "score": 0, "last_activity_date": 1464816886, "last_edit_date": 1495541327, "creation_date": 1464816886, "answer_id": 37579178, "question_id": 37578286, "link": "https://stackoverflow.com/questions/37578286/impossible-to-delete-a-flash/37579178#37579178", "title": "Impossible to delete a flash", "body": "<p>It looks like it throws a html_safe error. Can you see if the method which is rendering the flash is using html_safe? It looks like its coming from there. </p>\n\n<p>Not sure exactly, may be shooting in the dark.\nBut read these and try may be:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/35365927/actionviewtemplateerrorundefined-method-html-safe-for-nilnilclass\">actionview::template::error(undefined method &#39;html_safe&#39; for nil:NilClass)</a></p>\n\n<p><a href=\"http://www.redmine.org/issues/8477\" rel=\"nofollow noreferrer\">http://www.redmine.org/issues/8477</a></p>\n"}], "owner": {"reputation": 1129, "user_id": 1098303, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/4TxaL.png?s=128&g=1", "display_name": "djcaesar9114", "link": "https://stackoverflow.com/users/1098303/djcaesar9114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 136, "favorite_count": 0, "accepted_answer_id": 37578973, "answer_count": 3, "score": 0, "last_activity_date": 1464817178, "creation_date": 1464813250, "last_edit_date": 1464817178, "question_id": 37578286, "link": "https://stackoverflow.com/questions/37578286/impossible-to-delete-a-flash", "title": "Impossible to delete a flash", "body": "<p>I made a mistake before migrating a plugin, and have written</p>\n\n<pre><code>flash[:notice] = :label_presta_added\n</code></pre>\n\n<p>instead of </p>\n\n<pre><code>flash[:notice] = l(:label_presta_added)\n</code></pre>\n\n<p>I corrected my mistake but it seems that my Redmine Plugin has trashed my Redmine. Even though I delete my plugin a migrate once again, I still get this error:</p>\n\n<pre><code>    Started GET \"/\" for 127.0.0.1 at 2016-06-01 22:21:37 +0200\nProcessing by WelcomeController#index as HTML\n  Current user: admin (id=1)\n  Rendered welcome/index.html.erb within layouts/base (28.1ms)\nCompleted 500 Internal Server Error in 366ms (ActiveRecord: 116.0ms)\n\nActionView::Template::Error (undefined method `html_safe' for :label_presta_added:Symbol\nDid you mean?  html_safe?):\n     97:     &lt;div id=\"sidebar\"&gt;\n     98:         &lt;%= yield :sidebar %&gt;\n     99:         &lt;%= view_layouts_base_sidebar_hook_response %&gt;\n    100:     &lt;/div&gt;\n    101: \n    102:     &lt;div id=\"content\"&gt;\n    103:         &lt;%= render_flash_messages %&gt;\n  app/helpers/application_helper.rb:312:in `block in render_flash_messages'\n  app/helpers/application_helper.rb:311:in `render_flash_messages'\n  app/views/layouts/base.html.erb:100:in `_app_views_layouts_base_html_erb__4104276684161420982_39604440'\n  lib/redmine/sudo_mode.rb:63:in `sudo_mode'\n</code></pre>\n\n<p>Can somebody give me a hand here?\nThanks in advance!</p>\n"}, {"tags": ["ruby", "rubymine", "jetbrains-ide", "jetbrains-hub"], "owner": {"reputation": 91, "user_id": 3593112, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4c06a88fe57b5aebebb96dd938b5df99?s=128&d=identicon&r=PG&f=1", "display_name": "denqxotl", "link": "https://stackoverflow.com/users/3593112/denqxotl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464813171, "creation_date": 1464813171, "question_id": 37578258, "link": "https://stackoverflow.com/questions/37578258/idea-vim-bind-go-file-rubymine", "title": "Idea Vim bind go file (RubyMine)", "body": "<p>How can I bind <code>gf</code> in idea vim (it should behaves like in vim). Same thing with <code>gv</code> (go view), <code>gm</code> (go model), etc.</p>\n\n<p>Thank you for answers</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu", "server"], "comments": [{"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 1, "creation_date": 1464811038, "post_id": 37577639, "comment_id": 62642232, "body": "<code>gem install rails</code>"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6394919"}, "reply_to_user": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 0, "creation_date": 1464811671, "post_id": 37577639, "comment_id": 62642588, "body": "I tried but i get the same error, I must be install others dependencies?"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1464811738, "post_id": 37577639, "comment_id": 62642625, "body": "uninstall and install rails gem."}, {"owner": {"reputation": 552, "user_id": 4789789, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/e345d89712d63b16a426a0a2c65c8c55?s=128&d=identicon&r=PG&f=1", "display_name": "gonzalo2000", "link": "https://stackoverflow.com/users/4789789/gonzalo2000"}, "edited": false, "score": 0, "creation_date": 1464812142, "post_id": 37577639, "comment_id": 62642842, "body": "Are you running the command from the folder where your project is located?"}, {"owner": {"reputation": 2345, "user_id": 4511585, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/IC7eZ.jpg?s=128&g=1", "display_name": "albttx", "link": "https://stackoverflow.com/users/4511585/albttx"}, "edited": false, "score": 0, "creation_date": 1464812773, "post_id": 37577639, "comment_id": 62643140, "body": "maybe try install with rvm"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6394919"}, "edited": false, "score": 0, "creation_date": 1464815084, "post_id": 37577639, "comment_id": 62644401, "body": "i try in genieacs-gui"}, {"owner": {"reputation": 5237, "user_id": 2325924, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/XSXrT.jpg?s=128&g=1", "display_name": "7urkm3n", "link": "https://stackoverflow.com/users/2325924/7urkm3n"}, "edited": false, "score": 0, "creation_date": 1464817203, "post_id": 37577639, "comment_id": 62645410, "body": "@HRIZI did u create new rails app <code>rails new my_app</code> ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6394919"}, "edited": false, "score": 0, "creation_date": 1464817728, "post_id": 37577639, "comment_id": 62645604, "body": "no, I just run the command <code>rails server</code> in the folder genieacs-gui"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6394919"}, "edited": false, "score": 0, "creation_date": 1464816010, "post_id": 37578751, "comment_id": 62644857, "body": "I tried then I type the command <code>sudo rails server</code> in the folder genieacs-gui, then i get this error <code>&#47;usr&#47;lib&#47;ruby&#47;2.3.0&#47;rubygems&#47;dependency.rb:319:in </code>to_specs&#39;: Could not find &#39;tzinfo&#39; (~&gt; 1.1) among 85 total gem(s) (Gem::LoadError)`"}], "tags": [], "owner": {"reputation": 776, "user_id": 5512319, "user_type": "registered", "accept_rate": 72, "profile_image": "https://i.stack.imgur.com/iPfQS.gif?s=128&g=1", "display_name": "RubyDigger19", "link": "https://stackoverflow.com/users/5512319/rubydigger19"}, "is_accepted": false, "score": 0, "last_activity_date": 1464815069, "creation_date": 1464815069, "answer_id": 37578751, "question_id": 37577639, "link": "https://stackoverflow.com/questions/37577639/command-rails-server/37578751#37578751", "title": "Command Rails server", "body": "<p>My advice is to install rbenv via homebrew in case you install ti with rvm. I also had some trouble with rvm but this worked for me. </p>\n\n<p>Also you can start your rails server only if you are in your project folder.</p>\n\n<pre><code>brew install rbenv ruby-build\n\n# Add rbenv to bash so that it loads every time you open a terminal\necho 'if which rbenv &gt; /dev/null; then eval \"$(rbenv init -)\"; fi' &gt;&gt; ~/.bash_profile\nsource ~/.bash_profile\n\n# Install Ruby\nrbenv install 2.3.1\nrbenv global 2.3.1\nruby -v\n</code></pre>\n\n<p>And then install rails </p>\n\n<pre><code>gem install rails -v 4.2.6\nrbenv rehash\nrails -v\n# Rails 4.2.6\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2066, "user_id": 1065226, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b77c0f9fb52bbc37013e6afaca68a02e?s=128&d=identicon&r=PG", "display_name": "Liker777", "link": "https://stackoverflow.com/users/1065226/liker777"}, "edited": false, "score": 0, "creation_date": 1486739384, "post_id": 37579231, "comment_id": 71490174, "body": "Thanks! It helped me also! I ve got the following error: /usr/local/bin/rails:23:in <code>load&#39;: cannot load such file -- &#47;usr&#47;share&#47;rubygems-integration&#47;all&#47;gems&#47;railties-4.2.6&#47;bin&#47;&zwnj;&#8203;rails (LoadError) \tfrom &#47;usr&#47;local&#47;bin&#47;rails:23:in </code>&lt;main&gt;&#39;"}], "tags": [], "owner": {"reputation": 1011, "user_id": 5282616, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/bb253109f60df40f46cb8d80621074ce?s=128&d=identicon&r=PG&f=1", "display_name": "Dharmesh Rupani", "link": "https://stackoverflow.com/users/5282616/dharmesh-rupani"}, "is_accepted": false, "score": 6, "last_activity_date": 1464817073, "creation_date": 1464817073, "answer_id": 37579231, "question_id": 37577639, "link": "https://stackoverflow.com/questions/37577639/command-rails-server/37579231#37579231", "title": "Command Rails server", "body": "<p>Try to run following command:</p>\n\n<pre><code>sudo gem install rails\n</code></pre>\n\n<p>and</p>\n\n<pre><code>sudo bundle install\n</code></pre>\n\n<p>and start your terminal again after closing once, then execute..</p>\n\n<p><strong><code>rails server</code></strong></p>\n"}, {"tags": [], "owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1464829496, "last_edit_date": 1464829496, "creation_date": 1464817731, "answer_id": 37579359, "question_id": 37577639, "link": "https://stackoverflow.com/questions/37577639/command-rails-server/37579359#37579359", "title": "Command Rails server", "body": "<p>Try these commands:</p>\n\n<ol>\n<li><code>gem update --system</code> </li>\n<li><code>bundle install</code></li>\n<li><code>rails server</code></li>\n</ol>\n\n<p>Or as a one-liner:</p>\n\n<pre><code>gem update --system; bundle install; rails server\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6394919"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1924, "favorite_count": 0, "accepted_answer_id": 37579359, "answer_count": 3, "score": 2, "last_activity_date": 1527817561, "creation_date": 1464810839, "last_edit_date": 1527817561, "question_id": 37577639, "link": "https://stackoverflow.com/questions/37577639/command-rails-server", "title": "Command Rails server", "body": "<p>I tried this command <code>rails server</code>, then I get this error </p>\n\n<pre><code>/usr/local/bin/rails:23:in `load': cannot load such file -- /usr/share/rubygems-integration/all/gems/railties-4.2.6/bin/rails (LoadError)\n    from /usr/local/bin/rails:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 3135, "user_id": 999885, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/bcb4c25d35f72623890eb3eda86a8f3a?s=128&d=identicon&r=PG", "display_name": "omarsafwany", "link": "https://stackoverflow.com/users/999885/omarsafwany"}, "edited": false, "score": 1, "creation_date": 1464811340, "post_id": 37577603, "comment_id": 62642406, "body": "What a clumsy mistake :/. Thank you"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 3, "last_activity_date": 1464810698, "creation_date": 1464810698, "answer_id": 37577603, "question_id": 37577528, "link": "https://stackoverflow.com/questions/37577528/rails-delete-method-not-working/37577603#37577603", "title": "Rails - delete method not working", "body": "<p>You missed in your <code>link_to</code>call the <code>method: :delete</code>, otherwise you do a GET call.</p>\n"}], "owner": {"reputation": 3135, "user_id": 999885, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/bcb4c25d35f72623890eb3eda86a8f3a?s=128&d=identicon&r=PG", "display_name": "omarsafwany", "link": "https://stackoverflow.com/users/999885/omarsafwany"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1484248885, "creation_date": 1464810469, "last_edit_date": 1464891241, "question_id": 37577528, "link": "https://stackoverflow.com/questions/37577528/rails-delete-method-not-working", "title": "Rails - delete method not working", "body": "<p>I am trying to delete an entry as specified in the docs but I keep getting en error stating <code>NoMethodError in Tasks#show</code> and the entry is not deleted.</p>\n\n<p>index.html.erb:</p>\n\n<pre><code>&lt;%= link_to 'Delete', destroy_task_path(task['id']), data: { confirm: 'Are you sure?' } %&gt;\n</code></pre>\n\n<p>route.rb:</p>\n\n<pre><code>delete '/tasks/:id', to: 'tasks#destroy', as: 'destroy_task'\nresources :tasks\nroot 'home#index'\n</code></pre>\n\n<p>tasks_controller.rb</p>\n\n<pre><code>def destroy\n  uri = URI.parse(\"http://localhost/tasks/public/api/tasks/\"+params[:id])\n  http = Net::HTTP.new(uri.host, uri.port)\n  request = Net::HTTP::Delete.new(uri.path)\n  redirect_to :tasks, notice: 'Task was successfully destroyed.'\nend\n</code></pre>\n\n<p>What am I doing wrong here?! and why does it get redirected to show?!</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464809748, "post_id": 37577255, "comment_id": 62641554, "body": "Perhaps you want <code>array.map(&amp;:to_s).include?(name.to_s)</code>."}, {"owner": {"reputation": 51, "user_id": 6395923, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2f21df96dac2cb2e11dbd546b21250c9?s=128&d=identicon&r=PG&f=1", "display_name": "bubai93", "link": "https://stackoverflow.com/users/6395923/bubai93"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464812222, "post_id": 37577255, "comment_id": 62642877, "body": "Yup it worked. Thanks"}, {"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1464817745, "post_id": 37577255, "comment_id": 62645614, "body": "don&#39;t hesitate to mark the question answered by Cary."}], "answers": [{"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 1, "creation_date": 1464811907, "post_id": 37577393, "comment_id": 62642713, "body": "You don&#39;t need to have an if statement. Just return the result of the check."}], "tags": [], "owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "is_accepted": false, "score": 1, "last_activity_date": 1464812022, "last_edit_date": 1464812022, "creation_date": 1464809869, "answer_id": 37577393, "question_id": 37577255, "link": "https://stackoverflow.com/questions/37577255/how-to-match-a-symbol-with-a-string-in-ruby/37577393#37577393", "title": "How to match a symbol with a string in Ruby", "body": "<p>Put your array into your method definition like so:</p>\n\n<pre><code>def check(name)\n  array = [\"day\",:night]\n  array.include? name.to_s or array.include? name.to_sym  \nend\n\np check(\"day\") #=&gt; true\np check(:day) #=&gt; true\np check(\"night\") #=&gt; true\np check(\"hyperspace\") #=&gt; false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 5, "last_activity_date": 1464810139, "creation_date": 1464810139, "answer_id": 37577454, "question_id": 37577255, "link": "https://stackoverflow.com/questions/37577255/how-to-match-a-symbol-with-a-string-in-ruby/37577454#37577454", "title": "How to match a symbol with a string in Ruby", "body": "<pre><code>def check(name, array)\n  array.map(&amp;:to_s).include?(name.to_s)\nend\n\narray = [\"day\",:night]\n\ncheck(\"day\", array)   #=&gt; true\ncheck(:day, array)    #=&gt; true\ncheck(\"night\", array) #=&gt; true\ncheck(:night, array)  #=&gt; true\ncheck(\"cat\", array)   #=&gt; false\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6395923, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2f21df96dac2cb2e11dbd546b21250c9?s=128&d=identicon&r=PG&f=1", "display_name": "bubai93", "link": "https://stackoverflow.com/users/6395923/bubai93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1608, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464814872, "creation_date": 1464809381, "last_edit_date": 1464814872, "question_id": 37577255, "link": "https://stackoverflow.com/questions/37577255/how-to-match-a-symbol-with-a-string-in-ruby", "title": "How to match a symbol with a string in Ruby", "body": "<p>I have an array that contains both string and symbol </p>\n\n<p>In my function I am getting a string to check if the array contains that or not. </p>\n\n<pre><code>array = [\"day\",:night]\n\ndef check(name)\n    if array.include? name or array.include? name.to_sym\n         return true\n    else\n         return false\n   end\nend\n</code></pre>\n\n<p>If the input is \"day\" it returns <code>true</code>. If the input is \"night\" it returns <code>false</code>. I want to return <code>true</code> in case of \"night\" as I converted this to check if a symbol with the same name exists.</p>\n\n<p>How can I make this function work so that it compares a symbol (<code>:night</code>) with a string (<code>\"night\"</code>) and returns <code>true</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 875, "user_id": 1213341, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f8d3dc6ff251858d56451294f2efbbcc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1213341/anton"}, "is_accepted": false, "score": 1, "last_activity_date": 1465576150, "creation_date": 1465576150, "answer_id": 37753087, "question_id": 37577191, "link": "https://stackoverflow.com/questions/37577191/rails-find-in-batches-with-locking/37753087#37753087", "title": "Rails find_in_batches with locking", "body": "<p>I ended up implementing my own <code>find_in_batches_with_lock</code>:</p>\n\n<pre><code>def find_in_batches_with_lock(scope, user, batch_size: 1000)\n  last_processed_id = 0\n  records = []\n  begin\n    user.transaction do\n      records = scope.where(\"id &gt; ?\", last_processed_id)\n                     .order(:id).limit(batch_size).lock.all\n      next if records.empty?\n      yield records\n      last_processed_id = records.last.id\n    end\n  end while !records.empty?\nend\n</code></pre>\n"}], "owner": {"reputation": 875, "user_id": 1213341, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f8d3dc6ff251858d56451294f2efbbcc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1213341/anton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 917, "favorite_count": 0, "answer_count": 1, "score": 4, "last_activity_date": 1465576150, "creation_date": 1464809116, "question_id": 37577191, "link": "https://stackoverflow.com/questions/37577191/rails-find-in-batches-with-locking", "title": "Rails find_in_batches with locking", "body": "<p>I need to process large number of records in batches. And each batch should be processed in it's own transaction. Is there way to wrap each batch in transaction and lock all records in batch at the same time?</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>Model.scheduled_now.lock.find_in_batches do |batch|\n  model_ids = batch.map(&amp;:id)\n  Model.update_all({status: 'delivering'}, {\"id IN (?)\" , model_ids})\n\n  # creates and updates other DB records\n  # and triggers background job\n  perform_delivery_actions(batch)\nend\n</code></pre>\n\n<p>Does <code>SELECT FOR UPDATE</code> in this example commits transaction after each batch?\nOr I need to put internal transaction block and lock records manually inside each batch (which means one more query)?</p>\n\n<p>The reason I don't want to put outer transaction block is that I want to commit each batch separately, not a whole thing at once.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "factory-bot"], "comments": [{"owner": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 0, "creation_date": 1464808152, "post_id": 37576655, "comment_id": 62640736, "body": "Have you looked at associations in the FactoryGirl docs? I think what you are looking for is called a transient <a href=\"http://www.rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md#Associations\" rel=\"nofollow noreferrer\">rubydoc.info/gems/factory_girl/file/&hellip;</a>"}, {"owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "reply_to_user": {"reputation": 3129, "user_id": 227397, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lVdnG.jpg?s=128&g=1", "display_name": "Jeff Price", "link": "https://stackoverflow.com/users/227397/jeff-price"}, "edited": false, "score": 0, "creation_date": 1464808497, "post_id": 37576655, "comment_id": 62640899, "body": "@JeffPrice yes I did look at the associations section.  It does not show how I can custom type in the attributes within the actual spec.  All I saw was that it shows how to use inheritance for a factory so that you can specify associated traits that way, but that feels like overkill because I only want to specify these attributes for one small spec."}], "answers": [{"tags": [], "owner": {"reputation": 778, "user_id": 1952739, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/338ec1cd4d081f781a966b42fde090d0?s=128&d=identicon&r=PG", "display_name": "unused", "link": "https://stackoverflow.com/users/1952739/unused"}, "is_accepted": true, "score": 2, "last_activity_date": 1464847082, "creation_date": 1464847082, "answer_id": 37583763, "question_id": 37576655, "link": "https://stackoverflow.com/questions/37576655/factorygirl-specifying-attributes-on-associated-model/37583763#37583763", "title": "FactoryGirl: specifying attributes on associated model", "body": "<p>You can simply set the corresponding call argument with the needed Object.</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>user = create(:user, first_name: \"Harald\")\nblog = create(:blog, user: user)\n# or inline if preferred\nblog = create(:blog, user: create(:user, first_name: \"Heinz\"))\n</code></pre>\n\n<p>Note: Don't forget to rather use build than create wherever possible to speedup your tests :)</p>\n"}], "owner": {"reputation": 6076, "user_id": 4044009, "user_type": "registered", "accept_rate": 98, "profile_image": "https://www.gravatar.com/avatar/42e57031eb7d02c47c9afaecfc878638?s=128&d=identicon&r=PG&f=1", "display_name": "Neil", "link": "https://stackoverflow.com/users/4044009/neil"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1139, "favorite_count": 0, "accepted_answer_id": 37583763, "answer_count": 1, "score": 1, "last_activity_date": 1464847082, "creation_date": 1464807242, "question_id": 37576655, "link": "https://stackoverflow.com/questions/37576655/factorygirl-specifying-attributes-on-associated-model", "title": "FactoryGirl: specifying attributes on associated model", "body": "<p>I have two simple factories: One for <code>user</code> and one for <code>blog</code>.  When creating a blog, it must have an associated <code>user</code>, so this is reflected in the blog factory:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :user do\n  end\nend\n\nFactoryGirl.define do\n  factory :blog do\n    user #specifying the required association\n  end\nend\n</code></pre>\n\n<p>Now I can create a blog in a spec like so:</p>\n\n<pre><code>blog = create(:blog)\n</code></pre>\n\n<p>what I am not sure of how to do in the spec is how to specify some <em>custom attributes on the associated <code>user</code> record</em> immediately when the <code>blog</code> record is first created.  </p>\n\n<p>For example: when creating the <code>blog</code> record (which also creates an associated <code>user</code> record), I want to specify the <code>first_name</code> attribute on that associated <code>user</code> record.  Something like:</p>\n\n<pre><code>blog = create(:blog, associated_user: (first_name: 'foobar) )\n</code></pre>\n\n<p>That syntax up above doesn't work but I want to do something like that.  I did look at the <a href=\"http://www.rubydoc.info/gems/factory_girl/file/GETTING_STARTED.md\" rel=\"nofollow\">factory girl docs</a>, and I have been googling but have been unable to figure this one out. </p>\n\n<p><strong>Question</strong>:  How do I set some custom attributes on an associated object when creating an object with factory girl?</p>\n"}, {"tags": ["javascript", "jquery", "ruby", "title"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1464807345, "post_id": 37576546, "comment_id": 62640387, "body": "What have you tried? According to Google there are about 150 prepositions in the English language. Have you made a list of the ones you don&#39;t want capitalized?"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464807580, "post_id": 37576546, "comment_id": 62640479, "body": "I could just add more prepositions as I go, but to start &quot;on, but, of&quot; is good enough. Yes I did a lot of google, but I couldn&#39;t find anything that solves for my question @Jordan"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1464975963, "post_id": 37593225, "comment_id": 62723631, "body": "Hey sir you know how I can include exceptions for a few prepositions like, &quot;on, but, of, etc&quot;?"}, {"owner": {"reputation": 516, "user_id": 3975479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/331de3c6d3488f1a8ef29cf2e94bec76?s=128&d=identicon&r=PG&f=1", "display_name": "Hiren Bhalani", "link": "https://stackoverflow.com/users/3975479/hiren-bhalani"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 1, "creation_date": 1465289977, "post_id": 37593225, "comment_id": 62826971, "body": "We can do this, to achieve this we have to check complete word, in this case, we can&#39;t titleize word until we get complete world(or press a space). Or we have to downcase the string. after get complete word which is exceptional."}], "tags": [], "owner": {"reputation": 516, "user_id": 3975479, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/331de3c6d3488f1a8ef29cf2e94bec76?s=128&d=identicon&r=PG&f=1", "display_name": "Hiren Bhalani", "link": "https://stackoverflow.com/users/3975479/hiren-bhalani"}, "is_accepted": true, "score": 4, "last_activity_date": 1464873947, "creation_date": 1464873947, "answer_id": 37593225, "question_id": 37576546, "link": "https://stackoverflow.com/questions/37576546/how-to-titleize-words-in-text-area/37593225#37593225", "title": "How to titleize words in text_area?", "body": "<p>If you are using Jquery, your problem will be solved by code given below.</p>\n\n<pre><code>function makeTitle(slug) {\n    var words = slug.split(' ');\n\n    $.each(words, function(index, word){\n        words[index] = word.charAt(0).toUpperCase() + word.slice(1);\n    });\n\n    return words.join(' ');\n}\n\n$(element_selector).on('keyup', function(){ $(this).val( makeTitle($(this).val())) })\n</code></pre>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2551, "favorite_count": 0, "accepted_answer_id": 37593225, "answer_count": 1, "score": 1, "last_activity_date": 1464873947, "creation_date": 1464806876, "last_edit_date": 1464809072, "question_id": 37576546, "link": "https://stackoverflow.com/questions/37576546/how-to-titleize-words-in-text-area", "title": "How to titleize words in text_area?", "body": "<p>How to titleize/captialize words (with the exception of some prepositions) in the text_area as the user types in their words in real time? </p>\n\n<pre><code>&lt;%= f.text_area :name %&gt;\n</code></pre>\n\n<p>For example, to create the same behavior as this website: <a href=\"http://titlecapitalization.com/\" rel=\"nofollow\">http://titlecapitalization.com/</a></p>\n"}, {"tags": ["ruby", "cmd", "chef-infra"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 1, "creation_date": 1464806918, "post_id": 37576528, "comment_id": 62640172, "body": "Why wouldn&#39;t you just use Ruby instead of shelling out?"}, {"owner": {"reputation": 35, "user_id": 6386220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ea5c1f9be65636d2a8d94da5ff9aa7?s=128&d=identicon&r=PG&f=1", "display_name": "joemost45", "link": "https://stackoverflow.com/users/6386220/joemost45"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1464807252, "post_id": 37576528, "comment_id": 62640348, "body": "@DaveNewton I&#39;d use ruby.. honestly i am just new to ruby and just was trying to use what I know how to do..."}, {"owner": {"reputation": 35, "user_id": 6386220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ea5c1f9be65636d2a8d94da5ff9aa7?s=128&d=identicon&r=PG&f=1", "display_name": "joemost45", "link": "https://stackoverflow.com/users/6386220/joemost45"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1464807262, "post_id": 37576528, "comment_id": 62640354, "body": "HOw would I just use Ruby?"}], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 6386220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ea5c1f9be65636d2a8d94da5ff9aa7?s=128&d=identicon&r=PG&f=1", "display_name": "joemost45", "link": "https://stackoverflow.com/users/6386220/joemost45"}, "edited": false, "score": 0, "creation_date": 1464808049, "post_id": 37576789, "comment_id": 62640696, "body": "well, you just solved my question haha.. thats exactly what I was trying to do.. Thanks!"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1464807731, "creation_date": 1464807731, "answer_id": 37576789, "question_id": 37576528, "link": "https://stackoverflow.com/questions/37576528/run-command-in-cmd-from-ruby/37576789#37576789", "title": "Run command in cmd from Ruby", "body": "<p>Are you trying to access the Chef Server URL from inside Chef? You can use <code>Chef::Config[:chef_server_url]</code> but the deeper question is what you trying to do?</p>\n"}, {"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1464817246, "post_id": 37576918, "comment_id": 62645429, "body": "While correct for Ruby, this is wrong for Chef where we use a different gem for command execution."}], "tags": [], "owner": {"reputation": 1948, "user_id": 497719, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/b6ea7c507a8b6b89b0cedab323a8c953?s=128&d=identicon&r=PG", "display_name": "voxobscuro", "link": "https://stackoverflow.com/users/497719/voxobscuro"}, "is_accepted": false, "score": 0, "last_activity_date": 1464808197, "creation_date": 1464808197, "answer_id": 37576918, "question_id": 37576528, "link": "https://stackoverflow.com/questions/37576528/run-command-in-cmd-from-ruby/37576918#37576918", "title": "Run command in cmd from Ruby", "body": "<p>The short answer to your question is that there is more than one way to run a system command in ruby:</p>\n\n<ul>\n<li>The <a href=\"http://ruby-doc.org/core-2.3.1/Kernel.html#method-i-system\" rel=\"nofollow\">Kernel#system</a> method takes a plain string, so as long as you can get your command accurately represented in a string, it should work. Something like <code>system 'find /i \"chef_server_url\" C:/chef/client.rb'</code> should work.</li>\n<li>Backticks will do similar, which should look something like this: <code>find /i \"chef_server_url\" c:/chef/client.rb</code> (wrap in `backticks`, I'm not sure how to format on StackExchange).</li>\n</ul>\n\n<p>I'd first recommend getting a string representation of your command, <code>puts</code> it out, copy paste to a command window. If it works, then send it through <code>system</code>.</p>\n\n<p>However, like others here, I suspect there is a better solution to the underlying problem you're trying to solve.</p>\n\n<p>I'm not anywhere near a windows computer for testing, so you'll have to experiment with these.</p>\n"}], "owner": {"reputation": 35, "user_id": 6386220, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3ea5c1f9be65636d2a8d94da5ff9aa7?s=128&d=identicon&r=PG&f=1", "display_name": "joemost45", "link": "https://stackoverflow.com/users/6386220/joemost45"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 37576789, "answer_count": 2, "score": -1, "last_activity_date": 1464816748, "creation_date": 1464806827, "last_edit_date": 1464816748, "question_id": 37576528, "link": "https://stackoverflow.com/questions/37576528/run-command-in-cmd-from-ruby", "title": "Run command in cmd from Ruby", "body": "<p>I know this is probably a really simple question, but I am having a really hard time finding a solution. I am working on windows in cmd. I am simply trying to use this command:</p>\n\n<pre><code>find /i \\\"chef_server_url\\\" C:/chef/client.rb\n</code></pre>\n\n<p>I know the command works. It simply returns a url in a file that I wanted to check.</p>\n\n<p>I want to execute this in code and return the results in my code. But I am having a hard time formatting the string especially with the escape characters</p>\n\n<p>I am using <code>%x[]</code> to do so. So ideally I would just say<br>\n<code>%x[find /i \\\"chef_server_url\\\" C:/chef/client.rb]</code></p>\n\n<p>But the <code>c:/chef/client.rb</code> will not format correctly because it thinks /c and /c are not supposed to be that way</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 814, "user_id": 4364874, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh6.googleusercontent.com/-QH-Tgeb8oVQ/AAAAAAAAAAI/AAAAAAAABrM/kkZdzQex2k0/photo.jpg?sz=128", "display_name": "Zachary Weixelbaum", "link": "https://stackoverflow.com/users/4364874/zachary-weixelbaum"}, "edited": false, "score": 0, "creation_date": 1464811063, "post_id": 37577361, "comment_id": 62642241, "body": "How do I write the proper link so that it calls these methods?"}, {"owner": {"reputation": 2957, "user_id": 4921818, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/a16de181c77eb7d275e996e2df3e5438?s=128&d=identicon&r=PG", "display_name": "tam5", "link": "https://stackoverflow.com/users/4921818/tam5"}, "edited": false, "score": 0, "creation_date": 1464812435, "post_id": 37577361, "comment_id": 62642970, "body": "link_to(body, url, html_options = {})"}], "tags": [], "owner": {"reputation": 162, "user_id": 2472652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92497a3219be93c27cf2a954d0a1fa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2472652/kevin"}, "is_accepted": true, "score": 1, "last_activity_date": 1464812792, "last_edit_date": 1464812792, "creation_date": 1464809709, "answer_id": 37577361, "question_id": 37576508, "link": "https://stackoverflow.com/questions/37576508/create-link-in-ruby-on-rails-to-update-a-specific-database-entry/37577361#37577361", "title": "Create link in Ruby on Rails to update a specific database entry", "body": "<p>AJAX would be a good fit here, but that would complicate the question, so I will stick to doing it with Rails.</p>\n\n<p>You will first need to edit your routes.rb file to include something like:</p>\n\n<pre><code>get '/remove_container/:user_id', to: 'users#remove_container', :as =&gt; :remove_container\nget '/add_container/:user_id', to: 'users#add_container', :as =&gt; :add_container\n</code></pre>\n\n<p>Then add methods in your Users controller:</p>\n\n<pre><code>def remove_container\n  user_id = params[:user_id]\n  @user = User.find user_id\n  # code to change container number\n  redirect_to edit_user_path(@user)\nend\ndef add_container\n  user_id = params[:user_id]\n  @user = User.find user_id\n  # code to change container number\n  redirect_to edit_user_path(@user)\nend\n</code></pre>\n\n<p>There are a lot of things to make this better, but this should get you going in the right direction anyway.</p>\n\n<p>Links to these could be made manually or done with paths:</p>\n\n<pre><code>&lt;a href=\"/remove_container/[:user_id]\"&gt;Remove Container&lt;/a&gt;\n</code></pre>\n\n<p>or</p>\n\n<pre><code>link_to \"Remove Container\", remove_container_path(@user)\n</code></pre>\n"}], "owner": {"reputation": 814, "user_id": 4364874, "user_type": "registered", "accept_rate": 92, "profile_image": "https://lh6.googleusercontent.com/-QH-Tgeb8oVQ/AAAAAAAAAAI/AAAAAAAABrM/kkZdzQex2k0/photo.jpg?sz=128", "display_name": "Zachary Weixelbaum", "link": "https://stackoverflow.com/users/4364874/zachary-weixelbaum"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 37577361, "answer_count": 1, "score": 1, "last_activity_date": 1464812792, "creation_date": 1464806753, "last_edit_date": 1464808535, "question_id": 37576508, "link": "https://stackoverflow.com/questions/37576508/create-link-in-ruby-on-rails-to-update-a-specific-database-entry", "title": "Create link in Ruby on Rails to update a specific database entry", "body": "<p>I am new to Ruby on Rails and I want to create a very simple application. I used scaffolding to create a database called users. Two of the fields in users are <code>limit</code> and <code>containers</code>, which is the max number of containers a user can have and the remaining total containers that they can have. They both start off at a given number (e.g. 15), but when a user takes one <code>containers</code> will go down to 14 and will continue to decrease every time they take one, until it reaches 0. When a user returns a container, the number for <code>container</code> goes up by one until the max number, 15 in my example.</p>\n\n<p>Since I created this using Ruby scaffolding, I can just go to the edit page for each user right now and manually change the <code>containers</code> value, but that can allow me to change it to any number. On the <code>users/:id</code> page I want to have a link like the edit link that is there right now</p>\n\n<pre><code>&lt;%= link_to 'Edit', edit_user_path(@user) %&gt;\n</code></pre>\n\n<p>and have something similar, but along the lines of</p>\n\n<pre><code>&lt;%= link_to 'Take container', #run method to decrease and return here# %&gt;\n&lt;%= link_to 'Return container', #run method to increase and return here# %&gt;\n</code></pre>\n\n<p>For now, all I care about is just changing the number and elsewhere I will be rendering the user information.</p>\n"}, {"tags": ["ruby", "bash"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1464819922, "post_id": 37576105, "comment_id": 62646433, "body": "Have you even tried what you are asking? It works exactly as you have described in your question."}], "answers": [{"tags": [], "owner": {"reputation": 2172, "user_id": 4412925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf7fa1503a3820659b27943c99d463a0?s=128&d=identicon&r=PG&f=1", "display_name": "Nabeel", "link": "https://stackoverflow.com/users/4412925/nabeel"}, "is_accepted": true, "score": 3, "last_activity_date": 1464807140, "last_edit_date": 1464807140, "creation_date": 1464806836, "answer_id": 37576530, "question_id": 37576105, "link": "https://stackoverflow.com/questions/37576105/how-do-i-use-bash-to-get-a-ruby-variable/37576530#37576530", "title": "How do I use Bash to get a Ruby variable?", "body": "<p>You can use it as such.</p>\n\n<pre><code>#!/bin/bash\nSOME_VARIABLE=`ruby script.rb`\n</code></pre>\n\n<p>If for example you want to export an environment variable.</p>\n\n<pre><code>export SOME_ENV=`ruby script.rb`\n$ echo $SOME_ENV\n16\n</code></pre>\n\n<p>More information on <a href=\"https://en.wikipedia.org/wiki/Command_substitution\" rel=\"nofollow\">command substitution</a>.</p>\n"}], "owner": {"reputation": 2635, "user_id": 1435711, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/9fac7fe4c7290024faee8bfe6367f130?s=128&d=identicon&r=PG", "display_name": "Username", "link": "https://stackoverflow.com/users/1435711/username"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 413, "favorite_count": 0, "accepted_answer_id": 37576530, "answer_count": 1, "score": 1, "last_activity_date": 1464807140, "creation_date": 1464805316, "question_id": 37576105, "link": "https://stackoverflow.com/questions/37576105/how-do-i-use-bash-to-get-a-ruby-variable", "title": "How do I use Bash to get a Ruby variable?", "body": "<p>I have a Ruby script called <code>script.rb</code>, which looks like this:</p>\n\n<pre><code>puts 16\n</code></pre>\n\n<p>I have a Bash script that looks like this:</p>\n\n<pre><code>#!/bin/bash\nSOME_VARIABLE=$(ruby script.rb)\n</code></pre>\n\n<p>I want <code>SOME_VARIABLE</code> to be equal to <code>16</code>, or whatever else I decide to <code>puts</code> from <code>script.rb</code>.</p>\n\n<p>How do I do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations", "associative-array"], "comments": [{"owner": {"reputation": 590, "user_id": 4043683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/12e3f4eae384edbcc842bded6a055a06?s=128&d=identicon&r=PG&f=1", "display_name": "augustoccesar", "link": "https://stackoverflow.com/users/4043683/augustoccesar"}, "edited": false, "score": 0, "creation_date": 1464805175, "post_id": 37576039, "comment_id": 62639218, "body": "<code>belongs_to_many</code> association? An order can belong to more than one user?"}, {"owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "reply_to_user": {"reputation": 590, "user_id": 4043683, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/12e3f4eae384edbcc842bded6a055a06?s=128&d=identicon&r=PG&f=1", "display_name": "augustoccesar", "link": "https://stackoverflow.com/users/4043683/augustoccesar"}, "edited": false, "score": 0, "creation_date": 1464805282, "post_id": 37576039, "comment_id": 62639282, "body": "@augustoccesar Oops, sorry about that - typo."}], "answers": [{"comments": [{"owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "edited": false, "score": 0, "creation_date": 1464806915, "post_id": 37576267, "comment_id": 62640168, "body": "Thanks for the help &amp; info :) Yes, it&#39;s all working now."}], "tags": [], "owner": {"reputation": 162, "user_id": 2472652, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e92497a3219be93c27cf2a954d0a1fa7?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/2472652/kevin"}, "is_accepted": false, "score": 1, "last_activity_date": 1464805884, "creation_date": 1464805884, "answer_id": 37576267, "question_id": 37576039, "link": "https://stackoverflow.com/questions/37576039/setting-up-a-has-many-association-in-rails-that-auto-updates/37576267#37576267", "title": "Setting up a has_many association in Rails that auto-updates", "body": "<p>This is a parent child situation.  User is the parent and Order is the child.  Parents don't store foreign keys, only the children.  If you have the models set up correctly, User should have has_many.  Then you should be able to:</p>\n\n<pre><code>user.orders\n</code></pre>\n\n<p>As long as new orders get the user_id properly stored, all should work correctly.</p>\n"}, {"comments": [{"owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "edited": false, "score": 0, "creation_date": 1464806869, "post_id": 37576270, "comment_id": 62640146, "body": "Thank you very much for your help! It&#39;s all working now with count. Stupid error on my behalf, not used to all this stuff being done for me in the background!"}], "tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": true, "score": 1, "last_activity_date": 1464805896, "creation_date": 1464805896, "answer_id": 37576270, "question_id": 37576039, "link": "https://stackoverflow.com/questions/37576039/setting-up-a-has-many-association-in-rails-that-auto-updates/37576270#37576270", "title": "Setting up a has_many association in Rails that auto-updates", "body": "<p>Your model now is enough:</p>\n\n<pre><code>class Order &lt; ActiveRecord::Base\n  belongs_to :user # foreign_key user_id\nend\n\nclass User &lt; ActiveRecord::Base\n  has_many :orders\nend\n</code></pre>\n\n<p>Your view code:</p>\n\n<pre><code>&lt;% @orders.each do |order| %&gt;\n  &lt;% if order.user %&gt;\n    Y\n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Before if order doesn't belong to user, <code>order.user</code> would be nil, so if it is not nil, order belongs to user, and user has at least 1 order!</p>\n\n<p>Otherwise if you want to check a user has any order or not, just do this:</p>\n\n<pre><code>user.orders.count &gt; 0\n</code></pre>\n"}], "owner": {"reputation": 245, "user_id": 992104, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/349db56856a2c7d282918884e706ebda?s=128&d=identicon&r=PG", "display_name": "Joe", "link": "https://stackoverflow.com/users/992104/joe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 37576270, "answer_count": 2, "score": 0, "last_activity_date": 1464805896, "creation_date": 1464805082, "last_edit_date": 1464805263, "question_id": 37576039, "link": "https://stackoverflow.com/questions/37576039/setting-up-a-has-many-association-in-rails-that-auto-updates", "title": "Setting up a has_many association in Rails that auto-updates", "body": "<p>first off, sorry for the noobish question. I'm migrating a Sinatra app to Rails, and having a bit of difficulty with it, since I'm new to the Rails side.</p>\n\n<p>I have two models, User and Order. I've set up a has_many &amp; belongs_to association in the models, and I've added a user_id association column in orders.</p>\n\n<p>But I feel like users should have an association column of some kind too? (Though I'm not sure how to set that up)</p>\n\n<p>Specifically, I want to be able to look at an order, and tell whether the customer has ordered before, as such:</p>\n\n<pre><code>&lt;% @orders.each do |order| %&gt;\n&lt;% if (order.user.orders &gt; 1) %&gt; Y&lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>But while I can get to the user, I can't then access all orders they're associated with. How do I set up a column to do this, preferably with it updating automatically when a new order is assigned to them?</p>\n"}, {"tags": ["ruby", "capybara"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1464805218, "post_id": 37575930, "comment_id": 62639242, "body": "Looks like the page elements are in a <code>iframe</code>.  This SO answer might help: <a href=\"http://stackoverflow.com/questions/16034224/handling-iframe-with-capybara-ruby\" title=\"handling iframe with capybara ruby\">stackoverflow.com/questions/16034224/&hellip;</a>"}, {"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1464805323, "post_id": 37575930, "comment_id": 62639307, "body": "Your image doesn&#39;t show what the actual text in the button is - is it maybe &#39;Search&#39;  (case matters when trying to click on a button by the text it is showing)"}, {"owner": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1464867698, "post_id": 37575930, "comment_id": 62666434, "body": "thanks but I do no have frame here?"}], "answers": [{"tags": [], "owner": {"reputation": 13, "user_id": 6411327, "user_type": "registered", "profile_image": "https://graph.facebook.com/1718061328431904/picture?type=large", "display_name": "Yan Matveychuk", "link": "https://stackoverflow.com/users/6411327/yan-matveychuk"}, "is_accepted": false, "score": 0, "last_activity_date": 1464810592, "creation_date": 1464810592, "answer_id": 37577567, "question_id": 37575930, "link": "https://stackoverflow.com/questions/37575930/ruby-capybara-unable-to-find-link-or-button-search/37577567#37577567", "title": "Ruby capybara Unable to find link or button &quot;search&quot;", "body": "<p>try <code>find(\"button[aria-label='Search']\")</code> it probably can help \nyou can read about clicks here \n<a href=\"http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions\" rel=\"nofollow\">http://www.rubydoc.info/github/jnicklas/capybara/master/Capybara/Node/Actions</a></p>\n"}, {"tags": [], "owner": {"reputation": 486, "user_id": 3092914, "user_type": "registered", "profile_image": "https://graph.facebook.com/100001649362276/picture?type=large", "display_name": "dmr", "link": "https://stackoverflow.com/users/3092914/dmr"}, "is_accepted": false, "score": 0, "last_activity_date": 1464818513, "creation_date": 1464818513, "answer_id": 37579524, "question_id": 37575930, "link": "https://stackoverflow.com/questions/37575930/ruby-capybara-unable-to-find-link-or-button-search/37579524#37579524", "title": "Ruby capybara Unable to find link or button &quot;search&quot;", "body": "<p>As <code>click on</code> does not support css selectors you can use <code>find</code> instead </p>\n\n<p><code>find(:css,  \"button.search-form-button\").click</code></p>\n"}], "owner": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 580, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464818513, "creation_date": 1464804662, "last_edit_date": 1464804873, "question_id": 37575930, "link": "https://stackoverflow.com/questions/37575930/ruby-capybara-unable-to-find-link-or-button-search", "title": "Ruby capybara Unable to find link or button &quot;search&quot;", "body": "<p>I have the problem with a simple script:</p>\n\n<pre><code>Given(/^I am on the main home page$/) do\n  visit 'xxx.se'\nend\nWhen(/^I search for \"(.*?)\"$/) do\n|search_term|\n  fill_in 'q', :with =&gt; search_term\n  click_on 'search'\nend\nThen(/^videos of large rodents are returned$/) do\n\n  expect(page).to have_content 'Samsung'\n</code></pre>\n\n<p>but I got an error</p>\n\n<pre><code>Capybara::ElementNotFound: Unable to find link or button \"search\"\n./features/step_definitions/steps.rb:7:in `/^I search for \"(.*?)\"$/'\n</code></pre>\n\n<p>link to inspect element here:\n<a href=\"http://imgur.com/GLbbg7e\" rel=\"nofollow\">http://imgur.com/GLbbg7e</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1464804917, "post_id": 37575914, "comment_id": 62639082, "body": "What I want is this: &quot;abcdefhijklm...&quot;  I want to keep 12 characters and add the 3 dots. That would be a total of 15 characters. Using 15 is argument still does not give desired result: str.truncate(15)  =&gt; &quot;abcdefhijklmno&quot;"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1464805155, "post_id": 37575914, "comment_id": 62639206, "body": "@Donato, it is very strange behavior, cause your string do not need to truncate, it is full. Just add <code>...</code> if you want: <code>str.size &gt; 15 ? &quot;#{str}...&quot; : str.truncate(15)</code>"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1464805583, "post_id": 37575914, "comment_id": 62639423, "body": "@Donato or you can write your own method like: <code>&quot;12334554&quot;.first(3) + &quot;...&quot;</code>"}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1464804599, "creation_date": 1464804599, "answer_id": 37575914, "question_id": 37575861, "link": "https://stackoverflow.com/questions/37575861/truncate-text-after-exceeding-certain-size/37575914#37575914", "title": "truncate text after exceeding certain size", "body": "<p>argument of <code>truncate</code> means size of output string (with \"...\"):</p>\n\n<pre><code>str.truncate(13)\n=&gt; \"abcdefhijk...\"\nstr.truncate(13).size\n=&gt; 13\n</code></pre>\n\n<p>You can change default omission(<code>...</code>) by empty space if you want:</p>\n\n<pre><code>str.truncate(13, omission: '')\n=&gt; \"abcdefhijklmn\"\n</code></pre>\n\n<p>More about Rails <code>String#truncate</code> <a href=\"http://api.rubyonrails.org/classes/String.html#method-i-truncate\" rel=\"nofollow\">here</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1464805816, "post_id": 37576185, "comment_id": 62639554, "body": "May be simplified: <code>&quot;#{str.first(len)}#{&#39;...&#39; if str.size &gt; len }&quot;</code>"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1464805921, "post_id": 37576185, "comment_id": 62639620, "body": "By the way, this answer is almost full copy of my comments)"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1464806011, "post_id": 37576185, "comment_id": 62639682, "body": "And you&#39;ve added <code>Or slightly simplified</code> section only after my last comment too)"}, {"owner": {"reputation": 6952, "user_id": 114583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6bbb0d3de873b4188eed6814ff9c08e7?s=128&d=identicon&r=PG", "display_name": "Dathan", "link": "https://stackoverflow.com/users/114583/dathan"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1464806024, "post_id": 37576185, "comment_id": 62639692, "body": "Sure &#39;nuff. If you want to move your comments into your answer where they&#39;re more discoverable, I&#39;m happy to delete my answer, since you beat me to the punch. If not, I&#39;ll leave it as is - I think answers are superior to comment threads in terms of discoverability."}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 1, "creation_date": 1464806353, "post_id": 37576185, "comment_id": 62639877, "body": "No need to delete, you can just add <code>as mentioned in comments</code> in future, it is a really good tone. Sorry for my rudeness, i did not want to offend you."}, {"owner": {"reputation": 6952, "user_id": 114583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6bbb0d3de873b4188eed6814ff9c08e7?s=128&d=identicon&r=PG", "display_name": "Dathan", "link": "https://stackoverflow.com/users/114583/dathan"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1464806381, "post_id": 37576185, "comment_id": 62639894, "body": "Works for me. Cheers!"}], "tags": [], "owner": {"reputation": 6952, "user_id": 114583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6bbb0d3de873b4188eed6814ff9c08e7?s=128&d=identicon&r=PG", "display_name": "Dathan", "link": "https://stackoverflow.com/users/114583/dathan"}, "is_accepted": false, "score": 1, "last_activity_date": 1464806407, "last_edit_date": 1464806407, "creation_date": 1464805594, "answer_id": 37576185, "question_id": 37575861, "link": "https://stackoverflow.com/questions/37575861/truncate-text-after-exceeding-certain-size/37576185#37576185", "title": "truncate text after exceeding certain size", "body": "<p>I don't believe <code>str.truncate</code> will do what you want out of the box. But since it's really just an extra <code>if</code> statement, it's easy to write:</p>\n\n<pre><code>def trunc(str, length)\n  addition = str.length &gt; length ? '...' : ''\n  \"#{str.truncate(length, omission: '')}#{addition}\"\nend\n</code></pre>\n\n<p>Or slightly simplified, and without a Rails dependency (as mentioned by Ilya in the comments):</p>\n\n<pre><code>def trunc(str, len)\n  \"#{str.first(len)}#{'...' if str.size &gt; len}\"\nend\n</code></pre>\n\n<p>And the test cases:</p>\n\n<pre><code>2.2.1 :005 &gt; s = 'abcdefghijklmno'\n =&gt; \"abcdefghijklmno\"\n2.2.1 :006 &gt; trunc(s, 20)\n =&gt; \"abcdefghijklmno\"\n2.2.1 :007 &gt; trunc(s, 15)\n =&gt; \"abcdefghijklmno\"\n2.2.1 :008 &gt; trunc(s, 14)\n =&gt; \"abcdefghijklmn...\"\n2.2.1 :009 &gt; trunc(s, 13)\n =&gt; \"abcdefghijklm...\"\n2.2.1 :010 &gt; trunc(s, 0)\n =&gt; \"...\"\n2.2.1 :011 &gt; trunc(s, 1)\n =&gt; \"a...\"\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 365, "favorite_count": 0, "accepted_answer_id": 37575914, "answer_count": 2, "score": 0, "last_activity_date": 1464806407, "creation_date": 1464804397, "question_id": 37575861, "link": "https://stackoverflow.com/questions/37575861/truncate-text-after-exceeding-certain-size", "title": "truncate text after exceeding certain size", "body": "<p>Rails offers the <code>truncate</code> method when you want to truncate text that exceeds a certain character length. This is the example provided <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/TextHelper.html#method-i-truncate\" rel=\"nofollow\">here</a>:</p>\n\n<pre><code>truncate(\"Once upon a time in a world far far away\")\n# =&gt; \"Once upon a time in a world...\"\n</code></pre>\n\n<p>It truncates a given text after a given :length if text is longer than :length </p>\n\n<p>But I have the following example:</p>\n\n<pre><code>str = \"abcdefhijklmno\"\n</code></pre>\n\n<p>After 12 characters I want it truncated, so the above text should look like this:</p>\n\n<pre><code>abcdefhijklm...\n</code></pre>\n\n<p>But I tried using the truncate method and cannot get the desired result:</p>\n\n<pre><code>&gt; str = \"abcdefhijklmno\"\n =&gt; \"abcdefhijklmno\" \n&gt; str.truncate(15)\n =&gt; \"abcdefhijklmno\" \n&gt; str.truncate(14)\n =&gt; \"abcdefhijklmno\" \n&gt; str.truncate(13)\n =&gt; \"abcdefhijk...\" \n&gt; str.truncate(12)\n =&gt; \"abcdefhij...\"\n</code></pre>\n\n<p>I would think that <code>truncate(12)</code> would do it but it truncates after 9 characters. What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 297, "user_id": 4616973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vkEXc.jpg?s=128&g=1", "display_name": "xeitor", "link": "https://stackoverflow.com/users/4616973/xeitor"}, "edited": false, "score": 0, "creation_date": 1464833173, "post_id": 37575771, "comment_id": 62649754, "body": "Of course the red page wont appear on heroku. You should fix the error in development and the push to heroku with the error fixed."}], "answers": [{"tags": [], "owner": {"reputation": 1925, "user_id": 2386548, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/fb0c86baa20f25404248077f3c01e0b8?s=128&d=identicon&r=PG", "display_name": "Carpela", "link": "https://stackoverflow.com/users/2386548/carpela"}, "is_accepted": false, "score": 0, "last_activity_date": 1464975333, "creation_date": 1464975333, "answer_id": 37620415, "question_id": 37575771, "link": "https://stackoverflow.com/questions/37575771/actioncontrollerroutingerror-is-not-handled-on-heroku/37620415#37620415", "title": "ActionController::RoutingError is not handled on heroku", "body": "<p>A Heroku production server set up with default settings will not show you the error messages on screen when they happen (you wouldn't want your users to see the details of what's going wrong, I guess). </p>\n\n<p>You might want to install the heroku <a href=\"https://github.com/heroku/rails_12factor\" rel=\"nofollow\">rails12factor</a> gem . This will make sure a little more information gets passed to your logs. </p>\n\n<p>You can access these through </p>\n\n<pre><code>heroku logs\n</code></pre>\n\n<p>in the console to look at the logs or install one of the heroku logging add-ons for something a little more usable.</p>\n"}], "owner": {"reputation": 2202, "user_id": 1156761, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/c259c1adbed8fb52084c9b80c5d9f52a?s=128&d=identicon&r=PG", "display_name": "Chris Yeung", "link": "https://stackoverflow.com/users/1156761/chris-yeung"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 289, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464975333, "creation_date": 1464804044, "question_id": 37575771, "link": "https://stackoverflow.com/questions/37575771/actioncontrollerroutingerror-is-not-handled-on-heroku", "title": "ActionController::RoutingError is not handled on heroku", "body": "<p>I have a rails application with the following configs:</p>\n\n<p>Heroku config:</p>\n\n<pre><code>RACK_ENV:                     production\nRAILS_ENV:                    test\n</code></pre>\n\n<p>test.rb</p>\n\n<pre><code>  config.consider_all_requests_local       = true\n  config.action_controller.perform_caching = false\n</code></pre>\n\n<p>production.rb</p>\n\n<pre><code>  config.consider_all_requests_local       = false\n  config.action_controller.perform_caching = true\n</code></pre>\n\n<p>application_controller.rb</p>\n\n<pre><code>  rescue_from Pundit::NotAuthorizedError do |exception|\n    raise ActionController::RoutingError.new('Not Found')     \n  end\n</code></pre>\n\n<p>In development environment, when I try to access an unauthorized page like /admin, the detailed \"Routing Error\" red page will come out, but when I pushed to heroku and try to access the same page again. the server would return 500 and the website would shows <code>An unhandled lowlevel error occurred. The application logs may have details:</code>Rack app error: #` I tried tuning the test and production environment rb but doesn't work. any thoughts?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6952, "user_id": 114583, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6bbb0d3de873b4188eed6814ff9c08e7?s=128&d=identicon&r=PG", "display_name": "Dathan", "link": "https://stackoverflow.com/users/114583/dathan"}, "edited": false, "score": 0, "creation_date": 1464805912, "post_id": 37575630, "comment_id": 62639616, "body": "I see no reason for a downvote. It&#39;s a beginner question, for sure, but the problem description is understandable and it comes with a minimal, complete code sample. This is the sort of question behavior that should be upvoted!"}], "answers": [{"tags": [], "owner": {"reputation": 814, "user_id": 4088940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff71521ddfe58931cbe2e655394c0dca?s=128&d=identicon&r=PG&f=1", "display_name": "mlovic", "link": "https://stackoverflow.com/users/4088940/mlovic"}, "is_accepted": false, "score": 4, "last_activity_date": 1464804331, "creation_date": 1464804331, "answer_id": 37575846, "question_id": 37575630, "link": "https://stackoverflow.com/questions/37575630/upcase-method-not-returning-upcased-string/37575846#37575846", "title": "Upcase method not returning upcased string", "body": "<p><code>puts</code> prints its argument, but it's return value is always <code>nil</code>:</p>\n\n<pre><code>&gt; val = (puts \"Hello World\")\nHello World\n=&gt; nil\n&gt; val\n=&gt; nil\n</code></pre>\n\n<p>In your code, the return value of <code>large</code> is always nil, so the comparison with a <code>string</code> always returns <code>false</code>. </p>\n\n<p>This is  probably closer to what you want:</p>\n\n<pre><code>def large(string)\n  if string.size &gt; 20\n    string.upcase!\n  else\n    string\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 0, "last_activity_date": 1464811586, "last_edit_date": 1464811586, "creation_date": 1464804360, "answer_id": 37575851, "question_id": 37575630, "link": "https://stackoverflow.com/questions/37575630/upcase-method-not-returning-upcased-string/37575851#37575851", "title": "Upcase method not returning upcased string", "body": "<p><code>puts</code> prints on screen AND returns <code>nil</code>. <code>nil</code> and <code>false</code> in Ruby, in a boolean context, are <code>false</code>. Everything else is <code>true</code>. So your method <code>large</code>returns <code>nil</code>. You should write it like this</p>\n\n<pre><code>def large(string)\n    if string.size &gt; 20\n        string.upcase!\n    else\n        string\n    end\nend\n</code></pre>\n\n<p>A better way would be</p>\n\n<pre><code>def large(string)\n  string.size &gt; 20 ? string.upcase : string\nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6402930, "user_type": "registered", "profile_image": "https://graph.facebook.com/484359281761339/picture?type=large", "display_name": "Jesus Diaz", "link": "https://stackoverflow.com/users/6402930/jesus-diaz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1505069929, "creation_date": 1464803574, "last_edit_date": 1505069929, "question_id": 37575630, "link": "https://stackoverflow.com/questions/37575630/upcase-method-not-returning-upcased-string", "title": "Upcase method not returning upcased string", "body": "<p>I keep getting false in these simple Ruby tests:</p>\n\n<pre><code>def large(string)\n  if string.size &gt; 20\n    puts string.upcase!\n  else\n    puts string\n  end\nend\n</code></pre>\n\n<p>test:</p>\n\n<pre><code>p large(\"Hola vamos a la comida\") == \"HOLA VAMOS A LA COMIDA\"\np large(\"Es hora de dormir\") == \"Es hora de dormir\"\n</code></pre>\n\n<p>What is needed to make them work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 321, "user_id": 2441134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XAnlP.jpg?s=128&g=1", "display_name": "warder57", "link": "https://stackoverflow.com/users/2441134/warder57"}, "edited": false, "score": 0, "creation_date": 1464804868, "post_id": 37575619, "comment_id": 62639054, "body": "Can update trigger a destroy like this? Either you should be calling <code>job.destroy()</code>, or I&#39;m missing something about how ActiveRecord works."}, {"owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "reply_to_user": {"reputation": 321, "user_id": 2441134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XAnlP.jpg?s=128&g=1", "display_name": "warder57", "link": "https://stackoverflow.com/users/2441134/warder57"}, "edited": false, "score": 0, "creation_date": 1464804933, "post_id": 37575619, "comment_id": 62639092, "body": "My thought that it should, especially as update triggers the save/create callbacks. Seems like a commit action should either trigger all callbacks or none of them."}], "answers": [{"comments": [{"owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "edited": false, "score": 0, "creation_date": 1464807209, "post_id": 37576313, "comment_id": 62640321, "body": "<code>after_destroy :call_me, on: [ :update ]</code> did not work, there aren&#39;t any callbacks at all being fired in the child record."}], "tags": [], "owner": {"reputation": 321, "user_id": 2441134, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/XAnlP.jpg?s=128&g=1", "display_name": "warder57", "link": "https://stackoverflow.com/users/2441134/warder57"}, "is_accepted": false, "score": 0, "last_activity_date": 1464806060, "creation_date": 1464806060, "answer_id": 37576313, "question_id": 37575619, "link": "https://stackoverflow.com/questions/37575619/rails-destroy-callbacks-for-child-records-not-firing-on-parent-update/37576313#37576313", "title": "Rails destroy callbacks for child records not firing on parent update", "body": "<p><code>after_destroy</code> is not in the list of callbacks triggered by <code>update</code>:\n<a href=\"http://guides.rubyonrails.org/active_record_callbacks.html\" rel=\"nofollow\">http://guides.rubyonrails.org/active_record_callbacks.html</a> (Section 3.2)</p>\n\n<p>The docs make it look like this would work:</p>\n\n<p><code>after_destroy :call_me, on: [ :update ]</code></p>\n"}, {"tags": [], "owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "is_accepted": true, "score": 0, "last_activity_date": 1464812827, "creation_date": 1464812827, "answer_id": 37578161, "question_id": 37575619, "link": "https://stackoverflow.com/questions/37575619/rails-destroy-callbacks-for-child-records-not-firing-on-parent-update/37578161#37578161", "title": "Rails destroy callbacks for child records not firing on parent update", "body": "<p>I solved this by using <code>after_remove</code>. After searching the <a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/associations/collection_association.rb#L549\" rel=\"nofollow\">Rails source regarding collection associations</a>: </p>\n\n<pre><code>def remove_records(existing_records, records, method)\n  records.each { |record| callback(:before_remove, record) }\n\n  delete_records(existing_records, method) if existing_records.any?\n  records.each { |record| target.delete(record) }\n\n  records.each { |record| callback(:after_remove, record) }\nend\n</code></pre>\n\n<p>You can see that the <code>before_remove</code> and <code>after_remove</code> callbacks are called anytime child record is deleted, regardless of <code>delete</code> or <code>destroy</code>. </p>\n\n<p>So, when adding an <code>after_remove</code> callback to my parent class, I can manually trigger a method on each child record deleted. Which is what I was after.</p>\n\n<pre><code>class Job\n  has_many :assignments, dependent: :destroy\n  has_many :scheduled_assignments, -&gt; { scheduled }, \n                                    class_name: 'Assignment', \n                                    after_remove: :teardown_assignment\n\n  accepts_nested_attributes_for :scheduled_assignments, dependent_destroy: true\n\n  def teardown_assignment(assignment)\n    # callback here\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 4023, "user_id": 396964, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/9d5d2fc7ebac788a7eca7acd89a96485?s=128&d=identicon&r=PG", "display_name": "chrismanderson", "link": "https://stackoverflow.com/users/396964/chrismanderson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 870, "favorite_count": 0, "accepted_answer_id": 37578161, "answer_count": 2, "score": 0, "last_activity_date": 1464812827, "creation_date": 1464803537, "last_edit_date": 1464807249, "question_id": 37575619, "link": "https://stackoverflow.com/questions/37575619/rails-destroy-callbacks-for-child-records-not-firing-on-parent-update", "title": "Rails destroy callbacks for child records not firing on parent update", "body": "<p>I'm seeing an issue where destroy callbacks on a child record are not being fired when deleting the child record of a parent model. This issue emerged when updating records from a form, though I don't think that's relevant.</p>\n\n<pre><code>class Job\n  has_many :assignments, dependent: :destroy\n  has_many :scheduled_assignments, -&gt; { scheduled }, class_name: 'Assignment'\n\n  accepts_nested_attributes_for :scheduled_assignments, dependent_destroy: true\nend\n\n\nclass Assignment\n  belongs_to :job\n\n  after_destroy :call_me\n  after_save :call_me\n\n  def call_me\n    puts \"I got called\"\n  end\nend\n\njob = Job.create\njob.update({ scheduled_assignment_ids: [1] })\n  # a scheduled assignment is created, and the after_save \n  # callback is called in assignment\n\njob.update({ scheduled_assignment_ids: [] })\n   # the scheduled assignment is deleted, \n   # but the after_destroy callback is not fired\n</code></pre>\n\n<p>Because the Rails doc mention the child record should be deleted with a 'destroy' action, not 'delete', I'd expect callbacks to be fired on the <code>Assignment</code> object being deleted.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "kaminari"], "answers": [{"tags": [], "owner": {"reputation": 187, "user_id": 6336729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/64c5fc54f76f2ac5812eeb9e5d2427bb?s=128&d=identicon&r=PG&f=1", "display_name": "Seifer", "link": "https://stackoverflow.com/users/6336729/seifer"}, "is_accepted": false, "score": 0, "last_activity_date": 1464807919, "creation_date": 1464807919, "answer_id": 37576848, "question_id": 37575400, "link": "https://stackoverflow.com/questions/37575400/rails-kaminari-pagination-gives-me-duplicates/37576848#37576848", "title": "Rails &amp; Kaminari: pagination gives me duplicates", "body": "<p>I found the solution. For the people who may come across the same problem in the future.</p>\n\n<p>In my recipe partial I had @recipes.each do |recipe| ....\nThat was the problem, removing that line fixed the duplicate problem. </p>\n"}], "owner": {"reputation": 187, "user_id": 6336729, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/64c5fc54f76f2ac5812eeb9e5d2427bb?s=128&d=identicon&r=PG&f=1", "display_name": "Seifer", "link": "https://stackoverflow.com/users/6336729/seifer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 332, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464807919, "creation_date": 1464802759, "question_id": 37575400, "link": "https://stackoverflow.com/questions/37575400/rails-kaminari-pagination-gives-me-duplicates", "title": "Rails &amp; Kaminari: pagination gives me duplicates", "body": "<p>I am using the gem <a href=\"https://github.com/amatsuda/kaminari\" rel=\"nofollow\">Kaminari</a> with AJAX. The AJAX part is working fine. However, when I say in my controller <strong>.per(3)</strong> it returns me every object times 3. So when I have 9 recipes, it returns me 27 recipes (making duplicates). I only get unique objects when I say <strong>.per(1)</strong>, but I don't want a new page for every single object.</p>\n\n<p>Please help me with this issue. Thank you in advance.</p>\n\n<p><strong>My controller:</strong></p>\n\n<pre><code>class RecipesController &lt; ApplicationController\n  skip_before_action :authenticate_user!\n  def index\n    if params[:search]\n      @recipes = Recipe.search(params[:search]).order('created_at DESC').page(params[:page]).per(3)\n    else\n      @recipes = Recipe.order('created_at DESC').page(params[:page]).per(3)\n    end\n  end\nend\n</code></pre>\n\n<p><strong>My view:</strong></p>\n\n<pre><code>&lt;div class=\"container is-medium\" id=\"product-recipe\"&gt;\n  &lt;%= render @recipes %&gt;\n&lt;/div&gt;\n\n&lt;% if @recipes.present? %&gt;\n  &lt;div class=\"apple_pagination\" id=\"paginator\"&gt;\n    &lt;%= paginate @recipes, :remote =&gt; true %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>index.js.erb:</strong></p>\n\n<pre><code>$('#product-recipe').html('&lt;%= escape_javascript render(@recipes) %&gt;');\n$('#paginator').html('&lt;%= escape_javascript(paginate(@recipes, :remote =&gt; true).to_s) %&gt;');\n</code></pre>\n"}, {"tags": ["ruby", "gcc", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 60, "user_id": 4009374, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8d5b2ada50cbc9867cc67bba269f8a8?s=128&d=identicon&r=PG&f=1", "display_name": "Basher52", "link": "https://stackoverflow.com/users/4009374/basher52"}, "is_accepted": false, "score": 0, "last_activity_date": 1464899587, "creation_date": 1464899587, "answer_id": 37601588, "question_id": 37575109, "link": "https://stackoverflow.com/questions/37575109/faulty-ruby-rbconfig-rb-file-from-ipkg-ng/37601588#37601588", "title": "Faulty Ruby rbconfig.rb file from IPKG-ng", "body": "<p>As mentioned earlier I had to replace the hard coded links with the correct ones.</p>\n\n<p>Below is the FAULTY rbconfig.rb file that came with default installation of ipkg:</p>\n\n<pre><code># This file was created by mkconfig.rb when ruby was built.  Any\n# changes made to this file will be lost the next time ruby is built.\n\nmodule RbConfig\n  RUBY_VERSION == \"2.2.0\" or\n    raise \"ruby lib version (2.2.0) doesn't match executable version (#{RUBY_VERSION})\"\n\n  TOPDIR = File.dirname(__FILE__).chomp!(\"/lib/ruby/2.2.0/arm-linux-gnu\")\n  DESTDIR = '' unless defined? DESTDIR\n  CONFIG = {}\n  CONFIG[\"DESTDIR\"] = DESTDIR\n  CONFIG[\"MAJOR\"] = \"2\"\n  CONFIG[\"MINOR\"] = \"2\"\n  CONFIG[\"TEENY\"] = \"0\"\n  CONFIG[\"PATCHLEVEL\"] = \"0\"\n  CONFIG[\"INSTALL\"] = '/usr/bin/install -c'\n  CONFIG[\"EXEEXT\"] = \"\"\n  CONFIG[\"prefix\"] = (TOPDIR || DESTDIR + \"/opt\")\n  CONFIG[\"ruby_install_name\"] = \"$(RUBY_BASE_NAME)\"\n  CONFIG[\"RUBY_INSTALL_NAME\"] = \"$(RUBY_BASE_NAME)\"\n  CONFIG[\"RUBY_SO_NAME\"] = \"$(RUBY_BASE_NAME)\"\n  CONFIG[\"DESTDIR\"] = \"\"\n  CONFIG[\"exec\"] = \"exec\"\n  CONFIG[\"ruby_pc\"] = \"ruby-2.2.pc\"\n  CONFIG[\"PACKAGE\"] = \"ruby\"\n  CONFIG[\"BUILTIN_TRANSSRCS\"] = \" newline.c\"\n  CONFIG[\"USE_RUBYGEMS\"] = \"YES\"\n  CONFIG[\"MANTYPE\"] = \"doc\"\n  CONFIG[\"NROFF\"] = \"/usr/bin/nroff\"\n  CONFIG[\"vendorarchhdrdir\"] = \"$(vendorhdrdir)/$(sitearch)\"\n  CONFIG[\"sitearchhdrdir\"] = \"$(sitehdrdir)/$(sitearch)\"\n  CONFIG[\"rubyarchhdrdir\"] = \"$(rubyhdrdir)/$(arch)\"\n  CONFIG[\"vendorhdrdir\"] = \"$(rubyhdrdir)/vendor_ruby\"\n  CONFIG[\"sitehdrdir\"] = \"$(rubyhdrdir)/site_ruby\"\n  CONFIG[\"rubyhdrdir\"] = \"$(includedir)/$(RUBY_VERSION_NAME)\"\n  CONFIG[\"RUBY_SEARCH_PATH\"] = \"\"\n  CONFIG[\"UNIVERSAL_INTS\"] = \"\"\n  CONFIG[\"UNIVERSAL_ARCHNAMES\"] = \"\"\n  CONFIG[\"configure_args\"] = \" '--build=x86_64-pc-linux-gnu' '--host=arm-linux' '--target=arm-linux' '--prefix=/opt' '--with-sitedir=/opt/local/lib/ruby/site_ruby' '--disable-nls' '--with-opt-dir=/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt' '--with-target-dir=/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt' '--enable-shared' '--disable-ipv6' '--disable-install-doc' 'build_alias=x86_64-pc-linux-gnu' 'host_alias=arm-linux' 'target_alias=arm-linux' 'CC=/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-gcc' 'LDFLAGS=-Wl,--dynamic-linker=/opt/lib/ld-linux-armhf.so.3 -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib -Wl,-rpath,/opt/lib -Wl,-rpath-link,/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib ' 'CPPFLAGS=-O2   -pipe -I/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/include ' 'CXX=/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-g++' 'CPP=/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-gcc -E'\"\n  CONFIG[\"vendorarchdir\"] = \"$(vendorlibdir)/$(sitearch)\"\n  CONFIG[\"vendorlibdir\"] = \"$(vendordir)/$(ruby_version)\"\n  CONFIG[\"vendordir\"] = \"$(rubylibprefix)/vendor_ruby\"\n  CONFIG[\"sitearchdir\"] = \"$(sitelibdir)/$(sitearch)\"\n  CONFIG[\"sitelibdir\"] = \"$(sitedir)/$(ruby_version)\"\n  CONFIG[\"sitedir\"] = \"$(DESTDIR)/opt/local/lib/ruby/site_ruby\"\n  CONFIG[\"rubyarchdir\"] = \"$(rubylibdir)/$(arch)\"\n  CONFIG[\"rubylibdir\"] = \"$(rubylibprefix)/$(ruby_version)\"\n  CONFIG[\"ruby_version\"] = \"2.2.0\"\n  CONFIG[\"sitearch\"] = \"$(arch)\"\n  CONFIG[\"arch\"] = \"arm-linux-gnu\"\n  CONFIG[\"sitearchincludedir\"] = \"$(includedir)/$(sitearch)\"\n  CONFIG[\"archincludedir\"] = \"$(includedir)/$(arch)\"\n  CONFIG[\"sitearchlibdir\"] = \"$(libdir)/$(sitearch)\"\n  CONFIG[\"archlibdir\"] = \"$(libdir)/$(arch)\"\n  CONFIG[\"libdirname\"] = \"libdir\"\n  CONFIG[\"RUBY_EXEC_PREFIX\"] = \"/opt\"\n  CONFIG[\"RUBY_LIB_VERSION\"] = \"\"\n  CONFIG[\"RUBY_LIB_VERSION_STYLE\"] = \"3\\t/* full */\"\n  CONFIG[\"RI_BASE_NAME\"] = \"ri\"\n  CONFIG[\"ridir\"] = \"$(datarootdir)/$(RI_BASE_NAME)\"\n  CONFIG[\"rubysitearchprefix\"] = \"$(rubylibprefix)/$(sitearch)\"\n  CONFIG[\"rubyarchprefix\"] = \"$(rubylibprefix)/$(arch)\"\n  CONFIG[\"MAKEFILES\"] = \"Makefile GNUmakefile\"\n  CONFIG[\"PLATFORM_DIR\"] = \"\"\n  CONFIG[\"THREAD_MODEL\"] = \"pthread\"\n  CONFIG[\"SYMBOL_PREFIX\"] = \"\"\n  CONFIG[\"EXPORT_PREFIX\"] = \"\"\n  CONFIG[\"COMMON_HEADERS\"] = \"\"\n  CONFIG[\"COMMON_MACROS\"] = \"\"\n  CONFIG[\"COMMON_LIBS\"] = \"\"\n  CONFIG[\"MAINLIBS\"] = \"\"\n  CONFIG[\"ENABLE_SHARED\"] = \"yes\"\n  CONFIG[\"DLDLIBS\"] = \" -lc\"\n  CONFIG[\"SOLIBS\"] = \"$(LIBS)\"\n  CONFIG[\"LIBRUBYARG_SHARED\"] = \"-Wl,-R$(libdir) -l$(RUBY_SO_NAME)\"\n  CONFIG[\"LIBRUBYARG_STATIC\"] = \"-Wl,-R$(libdir) -l$(RUBY_SO_NAME)-static\"\n  CONFIG[\"LIBRUBYARG\"] = \"$(LIBRUBYARG_SHARED)\"\n  CONFIG[\"LIBRUBY\"] = \"$(LIBRUBY_SO)\"\n  CONFIG[\"LIBRUBY_ALIASES\"] = \"lib$(RUBY_SO_NAME).so.$(MAJOR).$(MINOR) lib$(RUBY_SO_NAME).so\"\n  CONFIG[\"LIBRUBY_SO\"] = \"lib$(RUBY_SO_NAME).so.$(MAJOR).$(MINOR).$(TEENY)\"\n  CONFIG[\"LIBRUBY_A\"] = \"lib$(RUBY_SO_NAME)-static.a\"\n  CONFIG[\"RUBYW_INSTALL_NAME\"] = \"\"\n  CONFIG[\"rubyw_install_name\"] = \"\"\n  CONFIG[\"EXTDLDFLAGS\"] = \"\"\n  CONFIG[\"EXTLDFLAGS\"] = \"\"\n  CONFIG[\"strict_warnflags\"] = \"-std=iso9899:1999\"\n  CONFIG[\"warnflags\"] = \"-Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration -Wdeprecated-declarations -Wno-packed-bitfield-compat\"\n  CONFIG[\"debugflags\"] = \"-ggdb3\"\n  CONFIG[\"optflags\"] = \"-O3 -fno-fast-math\"\n  CONFIG[\"cxxflags\"] = \" $(optflags) $(debugflags) $(warnflags)\"\n  CONFIG[\"cflags\"] = \" $(optflags) $(debugflags) $(warnflags)\"\n  CONFIG[\"cppflags\"] = \"\"\n  CONFIG[\"NULLCMD\"] = \":\"\n  CONFIG[\"DLNOBJ\"] = \"dln.o\"\n  CONFIG[\"INSTALLDOC\"] = \"nodoc\"\n  CONFIG[\"CAPITARGET\"] = \"nodoc\"\n  CONFIG[\"RDOCTARGET\"] = \"nodoc\"\n  CONFIG[\"DTRACE_GLOMMED_OBJ\"] = \"\"\n  CONFIG[\"DTRACE_OBJ\"] = \"\"\n  CONFIG[\"DTRACE_EXT\"] = \"dmyh\"\n  CONFIG[\"EXECUTABLE_EXTS\"] = \"\"\n  CONFIG[\"ARCHFILE\"] = \"\"\n  CONFIG[\"LIBRUBY_RELATIVE\"] = \"no\"\n  CONFIG[\"EXTOUT\"] = \".ext\"\n  CONFIG[\"RUNRUBY_COMMAND\"] = \"$(MINIRUBY) -I`cd $(srcdir)/lib; pwd`\"\n  CONFIG[\"PREP\"] = \"$(arch)-fake.rb\"\n  CONFIG[\"BTESTRUBY\"] = \"$(MINIRUBY)\"\n  CONFIG[\"CROSS_COMPILING\"] = \"yes\"\n  CONFIG[\"TEST_RUNNABLE\"] = \"no\"\n  CONFIG[\"rubylibprefix\"] = \"$(libdir)/$(RUBY_BASE_NAME)\"\n  CONFIG[\"setup\"] = \"Setup\"\n  CONFIG[\"ENCSTATIC\"] = \"\"\n  CONFIG[\"EXTSTATIC\"] = \"\"\n  CONFIG[\"STRIP\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-strip -S -x\"\n  CONFIG[\"TRY_LINK\"] = \"\"\n  CONFIG[\"LIBPATHENV\"] = \"LD_LIBRARY_PATH\"\n  CONFIG[\"RPATHFLAG\"] = \" -Wl,-R%1$-s\"\n  CONFIG[\"LIBPATHFLAG\"] = \" -L%1$-s\"\n  CONFIG[\"LINK_SO\"] = \"\"\n  CONFIG[\"ASMEXT\"] = \"S\"\n  CONFIG[\"LIBEXT\"] = \"a\"\n  CONFIG[\"DLEXT2\"] = \"\"\n  CONFIG[\"DLEXT\"] = \"so\"\n  CONFIG[\"LDSHAREDXX\"] = \"$(CXX) -shared\"\n  CONFIG[\"LDSHARED\"] = \"$(CC) -shared\"\n  CONFIG[\"CCDLFLAGS\"] = \"-fPIC\"\n  CONFIG[\"STATIC\"] = \"\"\n  CONFIG[\"ARCH_FLAG\"] = \"\"\n  CONFIG[\"DLDFLAGS\"] = \"-Wl,--dynamic-linker=/opt/lib/ld-linux-armhf.so.3 -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib -Wl,-rpath,/opt/lib -Wl,-rpath-link,/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib  -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib  -Wl,-R/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib \"\n  CONFIG[\"ALLOCA\"] = \"\"\n  CONFIG[\"codesign\"] = \"\"\n  CONFIG[\"POSTLINK\"] = \":\"\n  CONFIG[\"WERRORFLAG\"] = \"-Werror\"\n  CONFIG[\"CHDIR\"] = \"cd -P\"\n  CONFIG[\"RMALL\"] = \"rm -fr\"\n  CONFIG[\"RMDIRS\"] = \"rmdir --ignore-fail-on-non-empty -p\"\n  CONFIG[\"RMDIR\"] = \"rmdir --ignore-fail-on-non-empty\"\n  CONFIG[\"CP\"] = \"cp\"\n  CONFIG[\"RM\"] = \"rm -f\"\n  CONFIG[\"PKG_CONFIG\"] = \"/home/jenkins/Optware-ng/scripts/pkg-config.sh\"\n  CONFIG[\"PYTHON\"] = \"\"\n  CONFIG[\"DOXYGEN\"] = \"doxygen\"\n  CONFIG[\"DOT\"] = \"\"\n  CONFIG[\"DTRACE\"] = \"\"\n  CONFIG[\"MAKEDIRS\"] = \"/bin/mkdir -p\"\n  CONFIG[\"MKDIR_P\"] = \"/bin/mkdir -p\"\n  CONFIG[\"INSTALL_DATA\"] = \"$(INSTALL) -m 644\"\n  CONFIG[\"INSTALL_SCRIPT\"] = \"$(INSTALL)\"\n  CONFIG[\"INSTALL_PROGRAM\"] = \"$(INSTALL)\"\n  CONFIG[\"SET_MAKE\"] = \"\"\n  CONFIG[\"LN_S\"] = \"ln -s\"\n  CONFIG[\"NM\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-nm\"\n  CONFIG[\"DLLWRAP\"] = \"\"\n  CONFIG[\"WINDRES\"] = \"\"\n  CONFIG[\"OBJCOPY\"] = \":\"\n  CONFIG[\"OBJDUMP\"] = \"objdump\"\n  CONFIG[\"ASFLAGS\"] = \"\"\n  CONFIG[\"AS\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-as\"\n  CONFIG[\"AR\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-ar\"\n  CONFIG[\"RANLIB\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-ranlib\"\n  CONFIG[\"try_header\"] = \"\"\n  CONFIG[\"CC_VERSION\"] = \"$(CC) -v\"\n  CONFIG[\"COUTFLAG\"] = \"-o \"\n  CONFIG[\"OUTFLAG\"] = \"-o \"\n  CONFIG[\"CPPOUTFILE\"] = \"-o conftest.i\"\n  CONFIG[\"GNU_LD\"] = \"yes\"\n  CONFIG[\"LD\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-ld\"\n  CONFIG[\"GCC\"] = \"yes\"\n  CONFIG[\"EGREP\"] = \"/bin/grep -E\"\n  CONFIG[\"GREP\"] = \"/bin/grep\"\n  CONFIG[\"CPP\"] = \"$(CC) -E\"\n  CONFIG[\"CXXFLAGS\"] = \"$(cxxflags)\"\n  CONFIG[\"OBJEXT\"] = \"o\"\n  CONFIG[\"CPPFLAGS\"] = \"-O2   -pipe -I/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/include  -I/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/include $(DEFS) $(cppflags)\"\n  CONFIG[\"LDFLAGS\"] = \"-L. -Wl,--dynamic-linker=/opt/lib/ld-linux-armhf.so.3 -Wl,-rpath,/opt/lib -Wl,-rpath-link,/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib  -fstack-protector -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib -rdynamic -Wl,-export-dynamic -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib  -Wl,-R/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib \"\n  CONFIG[\"CFLAGS\"] = \"$(cflags)  -fPIC\"\n  CONFIG[\"CXX\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-g++\"\n  CONFIG[\"CC\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-gcc\"\n  CONFIG[\"NACL_LIB_PATH\"] = \"\"\n  CONFIG[\"NACL_SDK_VARIANT\"] = \"\"\n  CONFIG[\"NACL_SDK_ROOT\"] = \"\"\n  CONFIG[\"NACL_TOOLCHAIN\"] = \"\"\n  CONFIG[\"target_os\"] = \"linux-gnu\"\n  CONFIG[\"target_vendor\"] = \"unknown\"\n  CONFIG[\"target_cpu\"] = \"arm\"\n  CONFIG[\"target\"] = \"arm-unknown-linux-gnu\"\n  CONFIG[\"host_os\"] = \"linux-gnu\"\n  CONFIG[\"host_vendor\"] = \"unknown\"\n  CONFIG[\"host_cpu\"] = \"arm\"\n  CONFIG[\"host\"] = \"arm-unknown-linux-gnu\"\n  CONFIG[\"RUBY_VERSION_NAME\"] = \"$(RUBY_BASE_NAME)-$(ruby_version)\"\n  CONFIG[\"RUBYW_BASE_NAME\"] = \"rubyw\"\n  CONFIG[\"RUBY_BASE_NAME\"] = \"ruby\"\n  CONFIG[\"build_os\"] = \"linux-gnu\"\n  CONFIG[\"build_vendor\"] = \"pc\"\n  CONFIG[\"build_cpu\"] = \"x86_64\"\n  CONFIG[\"build\"] = \"x86_64-pc-linux-gnu\"\n  CONFIG[\"RUBY_PROGRAM_VERSION\"] = \"2.2.0\"\n  CONFIG[\"HAVE_BASERUBY\"] = \"yes\"\n  CONFIG[\"target_alias\"] = \"arm-linux\"\n  CONFIG[\"host_alias\"] = \"arm-linux\"\n  CONFIG[\"build_alias\"] = \"x86_64-pc-linux-gnu\"\n  CONFIG[\"LIBS\"] = \"-lpthread -lgmp -ldl -lcrypt -lm \"\n  CONFIG[\"ECHO_T\"] = \"\"\n  CONFIG[\"ECHO_N\"] = \"-n\"\n  CONFIG[\"ECHO_C\"] = \"\"\n  CONFIG[\"DEFS\"] = \"-D_FILE_OFFSET_BITS=64\"\n  CONFIG[\"mandir\"] = \"$(datarootdir)/man\"\n  CONFIG[\"localedir\"] = \"$(datarootdir)/locale\"\n  CONFIG[\"libdir\"] = \"$(exec_prefix)/lib\"\n  CONFIG[\"psdir\"] = \"$(docdir)\"\n  CONFIG[\"pdfdir\"] = \"$(docdir)\"\n  CONFIG[\"dvidir\"] = \"$(docdir)\"\n  CONFIG[\"htmldir\"] = \"$(docdir)\"\n  CONFIG[\"infodir\"] = \"$(datarootdir)/info\"\n  CONFIG[\"docdir\"] = \"$(datarootdir)/doc/$(PACKAGE)\"\n  CONFIG[\"oldincludedir\"] = \"/usr/include\"\n  CONFIG[\"includedir\"] = \"$(prefix)/include\"\n  CONFIG[\"localstatedir\"] = \"$(prefix)/var\"\n  CONFIG[\"sharedstatedir\"] = \"$(prefix)/com\"\n  CONFIG[\"sysconfdir\"] = \"$(prefix)/etc\"\n  CONFIG[\"datadir\"] = \"$(datarootdir)\"\n  CONFIG[\"datarootdir\"] = \"$(prefix)/share\"\n  CONFIG[\"libexecdir\"] = \"$(exec_prefix)/libexec\"\n  CONFIG[\"sbindir\"] = \"$(exec_prefix)/sbin\"\n  CONFIG[\"bindir\"] = \"$(exec_prefix)/bin\"\n  CONFIG[\"exec_prefix\"] = \"$(prefix)\"\n  CONFIG[\"PACKAGE_URL\"] = \"\"\n  CONFIG[\"PACKAGE_BUGREPORT\"] = \"\"\n  CONFIG[\"PACKAGE_STRING\"] = \"\"\n  CONFIG[\"PACKAGE_VERSION\"] = \"\"\n  CONFIG[\"PACKAGE_TARNAME\"] = \"\"\n  CONFIG[\"PACKAGE_NAME\"] = \"\"\n  CONFIG[\"PATH_SEPARATOR\"] = \":\"\n  CONFIG[\"SHELL\"] = \"/bin/bash\"\n  CONFIG[\"archdir\"] = \"$(rubyarchdir)\"\n  CONFIG[\"topdir\"] = File.dirname(__FILE__)\n  MAKEFILE_CONFIG = {}\n  CONFIG.each{|k,v| MAKEFILE_CONFIG[k] = v.dup}\n  def RbConfig::expand(val, config = CONFIG)\n    newval = val.gsub(/\\$\\$|\\$\\(([^()]+)\\)|\\$\\{([^{}]+)\\}/) {\n      var = $&amp;\n      if !(v = $1 || $2)\n    '$'\n      elsif key = config[v = v[/\\A[^:]+(?=(?::(.*?)=(.*))?\\z)/]]\n    pat, sub = $1, $2\n    config[v] = false\n    config[v] = RbConfig::expand(key, config)\n    key = key.gsub(/#{Regexp.quote(pat)}(?=\\s|\\z)/n) {sub} if pat\n    key\n      else\n    var\n      end\n    }\n    val.replace(newval) unless newval == val\n    val\n  end\n  CONFIG.each_value do |val|\n    RbConfig::expand(val)\n  end\n\n  # returns the absolute pathname of the ruby command.\n  def RbConfig.ruby\n    File.join(\n      RbConfig::CONFIG[\"bindir\"],\n      RbConfig::CONFIG[\"ruby_install_name\"] + RbConfig::CONFIG[\"EXEEXT\"]\n    )\n  end\nend\nCROSS_COMPILING = nil unless defined? CROSS_COMPILING\n</code></pre>\n\n<p>Working rbconfig.rb where I replaced the paths where needed:</p>\n\n<pre><code># This file was created by mkconfig.rb when ruby was built.  Any\n# changes made to this file will be lost the next time ruby is built.\n\nmodule RbConfig\n  RUBY_VERSION == \"2.2.0\" or\n    raise \"ruby lib version (2.2.0) doesn't match executable version (#{RUBY_VERSION})\"\n\n  TOPDIR = File.dirname(__FILE__).chomp!(\"/lib/ruby/2.2.0/arm-linux-gnu\")\n  DESTDIR = '' unless defined? DESTDIR\n  CONFIG = {}\n  CONFIG[\"DESTDIR\"] = DESTDIR\n  CONFIG[\"MAJOR\"] = \"2\"\n  CONFIG[\"MINOR\"] = \"2\"\n  CONFIG[\"TEENY\"] = \"0\"\n  CONFIG[\"PATCHLEVEL\"] = \"0\"\n  CONFIG[\"INSTALL\"] = '/usr/bin/install -c'\n  CONFIG[\"EXEEXT\"] = \"\"\n  CONFIG[\"prefix\"] = (TOPDIR || DESTDIR + \"/opt\")\n  CONFIG[\"ruby_install_name\"] = \"$(RUBY_BASE_NAME)\"\n  CONFIG[\"RUBY_INSTALL_NAME\"] = \"$(RUBY_BASE_NAME)\"\n  CONFIG[\"RUBY_SO_NAME\"] = \"$(RUBY_BASE_NAME)\"\n  CONFIG[\"DESTDIR\"] = \"\"\n  CONFIG[\"exec\"] = \"exec\"\n  CONFIG[\"ruby_pc\"] = \"ruby-2.2.pc\"\n  CONFIG[\"PACKAGE\"] = \"ruby\"\n  CONFIG[\"BUILTIN_TRANSSRCS\"] = \" newline.c\"\n  CONFIG[\"USE_RUBYGEMS\"] = \"YES\"\n  CONFIG[\"MANTYPE\"] = \"doc\"\n  CONFIG[\"NROFF\"] = \"/usr/bin/nroff\"\n  CONFIG[\"vendorarchhdrdir\"] = \"$(vendorhdrdir)/$(sitearch)\"\n  CONFIG[\"sitearchhdrdir\"] = \"$(sitehdrdir)/$(sitearch)\"\n  CONFIG[\"rubyarchhdrdir\"] = \"$(rubyhdrdir)/$(arch)\"\n  CONFIG[\"vendorhdrdir\"] = \"$(rubyhdrdir)/vendor_ruby\"\n  CONFIG[\"sitehdrdir\"] = \"$(rubyhdrdir)/site_ruby\"\n  CONFIG[\"rubyhdrdir\"] = \"$(includedir)/$(RUBY_VERSION_NAME)\"\n  CONFIG[\"RUBY_SEARCH_PATH\"] = \"\"\n  CONFIG[\"UNIVERSAL_INTS\"] = \"\"\n  CONFIG[\"UNIVERSAL_ARCHNAMES\"] = \"\"\n  CONFIG[\"configure_args\"] = \" '--build=x86_64-pc-linux-gnu' '--host=arm-linux' '--target=arm-linux' '--prefix=/opt' '--with-sitedir=/opt/local/lib/ruby/site_ruby' '--disable-nls' '--with-opt-dir=/opt' '--with-target-dir=/opt' '--enable-shared' '--disable-ipv6' '--disable-install-doc' 'build_alias=x86_64-pc-linux-gnu' 'host_alias=arm-linux' 'target_alias=arm-linux' 'CC=/opt/bin/gcc' 'LDFLAGS=-Wl,--dynamic-linker=/opt/lib/ld-linux-armhf.so.3 -L/opt/lib -Wl,-rpath,/opt/lib -Wl,-rpath-link,/opt/lib ' 'CPPFLAGS=-O2   -pipe -I/opt/include ' 'CXX=/opt/bin/g++' 'CPP=/opt/bin/gcc -E'\"\n  CONFIG[\"vendorarchdir\"] = \"$(vendorlibdir)/$(sitearch)\"\n  CONFIG[\"vendorlibdir\"] = \"$(vendordir)/$(ruby_version)\"\n  CONFIG[\"vendordir\"] = \"$(rubylibprefix)/vendor_ruby\"\n  CONFIG[\"sitearchdir\"] = \"$(sitelibdir)/$(sitearch)\"\n  CONFIG[\"sitelibdir\"] = \"$(sitedir)/$(ruby_version)\"\n  CONFIG[\"sitedir\"] = \"$(DESTDIR)/opt/local/lib/ruby/site_ruby\"\n  CONFIG[\"rubyarchdir\"] = \"$(rubylibdir)/$(arch)\"\n  CONFIG[\"rubylibdir\"] = \"$(rubylibprefix)/$(ruby_version)\"\n  CONFIG[\"ruby_version\"] = \"2.2.0\"\n  CONFIG[\"sitearch\"] = \"$(arch)\"\n  CONFIG[\"arch\"] = \"arm-linux-gnu\"\n  CONFIG[\"sitearchincludedir\"] = \"$(includedir)/$(sitearch)\"\n  CONFIG[\"archincludedir\"] = \"$(includedir)/$(arch)\"\n  CONFIG[\"sitearchlibdir\"] = \"$(libdir)/$(sitearch)\"\n  CONFIG[\"archlibdir\"] = \"$(libdir)/$(arch)\"\n  CONFIG[\"libdirname\"] = \"libdir\"\n  CONFIG[\"RUBY_EXEC_PREFIX\"] = \"/opt\"\n  CONFIG[\"RUBY_LIB_VERSION\"] = \"\"\n  CONFIG[\"RUBY_LIB_VERSION_STYLE\"] = \"3\\t/* full */\"\n  CONFIG[\"RI_BASE_NAME\"] = \"ri\"\n  CONFIG[\"ridir\"] = \"$(datarootdir)/$(RI_BASE_NAME)\"\n  CONFIG[\"rubysitearchprefix\"] = \"$(rubylibprefix)/$(sitearch)\"\n  CONFIG[\"rubyarchprefix\"] = \"$(rubylibprefix)/$(arch)\"\n  CONFIG[\"MAKEFILES\"] = \"Makefile GNUmakefile\"\n  CONFIG[\"PLATFORM_DIR\"] = \"\"\n  CONFIG[\"THREAD_MODEL\"] = \"pthread\"\n  CONFIG[\"SYMBOL_PREFIX\"] = \"\"\n  CONFIG[\"EXPORT_PREFIX\"] = \"\"\n  CONFIG[\"COMMON_HEADERS\"] = \"\"\n  CONFIG[\"COMMON_MACROS\"] = \"\"\n  CONFIG[\"COMMON_LIBS\"] = \"\"\n  CONFIG[\"MAINLIBS\"] = \"\"\n  CONFIG[\"ENABLE_SHARED\"] = \"yes\"\n  CONFIG[\"DLDLIBS\"] = \" -lc\"\n  CONFIG[\"SOLIBS\"] = \"$(LIBS)\"\n  CONFIG[\"LIBRUBYARG_SHARED\"] = \"-Wl,-R$(libdir) -l$(RUBY_SO_NAME)\"\n  CONFIG[\"LIBRUBYARG_STATIC\"] = \"-Wl,-R$(libdir) -l$(RUBY_SO_NAME)-static\"\n  CONFIG[\"LIBRUBYARG\"] = \"$(LIBRUBYARG_SHARED)\"\n  CONFIG[\"LIBRUBY\"] = \"$(LIBRUBY_SO)\"\n  CONFIG[\"LIBRUBY_ALIASES\"] = \"lib$(RUBY_SO_NAME).so.$(MAJOR).$(MINOR) lib$(RUBY_SO_NAME).so\"\n  CONFIG[\"LIBRUBY_SO\"] = \"lib$(RUBY_SO_NAME).so.$(MAJOR).$(MINOR).$(TEENY)\"\n  CONFIG[\"LIBRUBY_A\"] = \"lib$(RUBY_SO_NAME)-static.a\"\n  CONFIG[\"RUBYW_INSTALL_NAME\"] = \"\"\n  CONFIG[\"rubyw_install_name\"] = \"\"\n  CONFIG[\"EXTDLDFLAGS\"] = \"\"\n  CONFIG[\"EXTLDFLAGS\"] = \"\"\n  CONFIG[\"strict_warnflags\"] = \"-std=iso9899:1999\"\n  CONFIG[\"warnflags\"] = \"-Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration -Wdeprecated-declarations -Wno-packed-bitfield-compat\"\n  CONFIG[\"debugflags\"] = \"-ggdb3\"\n  CONFIG[\"optflags\"] = \"-O3 -fno-fast-math\"\n  CONFIG[\"cxxflags\"] = \" $(optflags) $(debugflags) $(warnflags)\"\n  CONFIG[\"cflags\"] = \" $(optflags) $(debugflags) $(warnflags)\"\n  CONFIG[\"cppflags\"] = \"\"\n  CONFIG[\"NULLCMD\"] = \":\"\n  CONFIG[\"DLNOBJ\"] = \"dln.o\"\n  CONFIG[\"INSTALLDOC\"] = \"nodoc\"\n  CONFIG[\"CAPITARGET\"] = \"nodoc\"\n  CONFIG[\"RDOCTARGET\"] = \"nodoc\"\n  CONFIG[\"DTRACE_GLOMMED_OBJ\"] = \"\"\n  CONFIG[\"DTRACE_OBJ\"] = \"\"\n  CONFIG[\"DTRACE_EXT\"] = \"dmyh\"\n  CONFIG[\"EXECUTABLE_EXTS\"] = \"\"\n  CONFIG[\"ARCHFILE\"] = \"\"\n  CONFIG[\"LIBRUBY_RELATIVE\"] = \"no\"\n  CONFIG[\"EXTOUT\"] = \".ext\"\n  CONFIG[\"RUNRUBY_COMMAND\"] = \"$(MINIRUBY) -I`cd $(srcdir)/lib; pwd`\"\n  CONFIG[\"PREP\"] = \"$(arch)-fake.rb\"\n  CONFIG[\"BTESTRUBY\"] = \"$(MINIRUBY)\"\n  CONFIG[\"CROSS_COMPILING\"] = \"yes\"\n  CONFIG[\"TEST_RUNNABLE\"] = \"no\"\n  CONFIG[\"rubylibprefix\"] = \"$(libdir)/$(RUBY_BASE_NAME)\"\n  CONFIG[\"setup\"] = \"Setup\"\n  CONFIG[\"ENCSTATIC\"] = \"\"\n  CONFIG[\"EXTSTATIC\"] = \"\"\n  CONFIG[\"STRIP\"] = \"/opt/bin/strip -S -x\"\n  CONFIG[\"TRY_LINK\"] = \"\"\n  CONFIG[\"LIBPATHENV\"] = \"LD_LIBRARY_PATH\"\n  CONFIG[\"RPATHFLAG\"] = \" -Wl,-R%1$-s\"\n  CONFIG[\"LIBPATHFLAG\"] = \" -L%1$-s\"\n  CONFIG[\"LINK_SO\"] = \"\"\n  CONFIG[\"ASMEXT\"] = \"S\"\n  CONFIG[\"LIBEXT\"] = \"a\"\n  CONFIG[\"DLEXT2\"] = \"\"\n  CONFIG[\"DLEXT\"] = \"so\"\n  CONFIG[\"LDSHAREDXX\"] = \"$(CXX) -shared\"\n  CONFIG[\"LDSHARED\"] = \"$(CC) -shared\"\n  CONFIG[\"CCDLFLAGS\"] = \"-fPIC\"\n  CONFIG[\"STATIC\"] = \"\"\n  CONFIG[\"ARCH_FLAG\"] = \"\"\n  CONFIG[\"DLDFLAGS\"] = \"-Wl,--dynamic-linker=/opt/lib/ld-linux-armhf.so.3 -L/opt/lib -Wl,-rpath,/opt/lib -Wl,-rpath-link,/opt/lib  -L/opt/lib  -Wl,-R/opt/lib \"\n  CONFIG[\"ALLOCA\"] = \"\"\n  CONFIG[\"codesign\"] = \"\"\n  CONFIG[\"POSTLINK\"] = \":\"\n  CONFIG[\"WERRORFLAG\"] = \"-Werror\"\n  CONFIG[\"CHDIR\"] = \"cd -P\"\n  CONFIG[\"RMALL\"] = \"rm -fr\"\n  CONFIG[\"RMDIRS\"] = \"rmdir --ignore-fail-on-non-empty -p\"\n  CONFIG[\"RMDIR\"] = \"rmdir --ignore-fail-on-non-empty\"\n  CONFIG[\"CP\"] = \"cp\"\n  CONFIG[\"RM\"] = \"rm -f\"\n  CONFIG[\"PKG_CONFIG\"] = \"/home/jenkins/Optware-ng/scripts/pkg-config.sh\"\n  CONFIG[\"PYTHON\"] = \"\"\n  CONFIG[\"DOXYGEN\"] = \"doxygen\"\n  CONFIG[\"DOT\"] = \"\"\n  CONFIG[\"DTRACE\"] = \"\"\n  CONFIG[\"MAKEDIRS\"] = \"/bin/mkdir -p\"\n  CONFIG[\"MKDIR_P\"] = \"/bin/mkdir -p\"\n  CONFIG[\"INSTALL_DATA\"] = \"$(INSTALL) -m 644\"\n  CONFIG[\"INSTALL_SCRIPT\"] = \"$(INSTALL)\"\n  CONFIG[\"INSTALL_PROGRAM\"] = \"$(INSTALL)\"\n  CONFIG[\"SET_MAKE\"] = \"\"\n  CONFIG[\"LN_S\"] = \"ln -s\"\n  CONFIG[\"NM\"] = \"/opt/bin/nm\"\n  CONFIG[\"DLLWRAP\"] = \"\"\n  CONFIG[\"WINDRES\"] = \"\"\n  CONFIG[\"OBJCOPY\"] = \":\"\n  CONFIG[\"OBJDUMP\"] = \"objdump\"\n  CONFIG[\"ASFLAGS\"] = \"\"\n  CONFIG[\"AS\"] = \"/opt/bin/as\"\n  CONFIG[\"AR\"] = \"/opt/bin/ar\"\n  CONFIG[\"RANLIB\"] = \"/opt/bin/ranlib\"\n  CONFIG[\"try_header\"] = \"\"\n  CONFIG[\"CC_VERSION\"] = \"$(CC) -v\"\n  CONFIG[\"COUTFLAG\"] = \"-o \"\n  CONFIG[\"OUTFLAG\"] = \"-o \"\n  CONFIG[\"CPPOUTFILE\"] = \"-o conftest.i\"\n  CONFIG[\"GNU_LD\"] = \"yes\"\n  CONFIG[\"LD\"] = \"/opt/bin/ld\"\n  CONFIG[\"GCC\"] = \"yes\"\n  CONFIG[\"EGREP\"] = \"/bin/grep -E\"\n  CONFIG[\"GREP\"] = \"/bin/grep\"\n  CONFIG[\"CPP\"] = \"$(CC) -E\"\n  CONFIG[\"CXXFLAGS\"] = \"$(cxxflags)\"\n  CONFIG[\"OBJEXT\"] = \"o\"\n  CONFIG[\"CPPFLAGS\"] = \"-O2   -pipe -I/opt/include  -I/opt/include $(DEFS) $(cppflags)\"\n  CONFIG[\"LDFLAGS\"] = \"-L. -Wl,--dynamic-linker=/opt/lib/ld-linux-armhf.so.3 -Wl,-rpath,/opt/lib -Wl,-rpath-link,/opt/lib  -fstack-protector -L/opt/lib -rdynamic -Wl,-export-dynamic -L/opt/lib  -Wl,-R/opt/lib \"\n  CONFIG[\"CFLAGS\"] = \"$(cflags)  -fPIC\"\n  CONFIG[\"CXX\"] = \"/opt/bin/g++\"\n  CONFIG[\"CC\"] = \"/opt/bin/gcc\"\n  CONFIG[\"NACL_LIB_PATH\"] = \"\"\n  CONFIG[\"NACL_SDK_VARIANT\"] = \"\"\n  CONFIG[\"NACL_SDK_ROOT\"] = \"\"\n  CONFIG[\"NACL_TOOLCHAIN\"] = \"\"\n  CONFIG[\"target_os\"] = \"linux-gnu\"\n  CONFIG[\"target_vendor\"] = \"unknown\"\n  CONFIG[\"target_cpu\"] = \"arm\"\n  CONFIG[\"target\"] = \"arm-unknown-linux-gnu\"\n  CONFIG[\"host_os\"] = \"linux-gnu\"\n  CONFIG[\"host_vendor\"] = \"unknown\"\n  CONFIG[\"host_cpu\"] = \"arm\"\n  CONFIG[\"host\"] = \"arm-unknown-linux-gnu\"\n  CONFIG[\"RUBY_VERSION_NAME\"] = \"$(RUBY_BASE_NAME)-$(ruby_version)\"\n  CONFIG[\"RUBYW_BASE_NAME\"] = \"rubyw\"\n  CONFIG[\"RUBY_BASE_NAME\"] = \"ruby\"\n  CONFIG[\"build_os\"] = \"linux-gnu\"\n  CONFIG[\"build_vendor\"] = \"pc\"\n  CONFIG[\"build_cpu\"] = \"x86_64\"\n  CONFIG[\"build\"] = \"x86_64-pc-linux-gnu\"\n  CONFIG[\"RUBY_PROGRAM_VERSION\"] = \"2.2.0\"\n  CONFIG[\"HAVE_BASERUBY\"] = \"yes\"\n  CONFIG[\"target_alias\"] = \"arm-linux\"\n  CONFIG[\"host_alias\"] = \"arm-linux\"\n  CONFIG[\"build_alias\"] = \"x86_64-pc-linux-gnu\"\n  CONFIG[\"LIBS\"] = \"-lpthread -lgmp -ldl -lcrypt -lm \"\n  CONFIG[\"ECHO_T\"] = \"\"\n  CONFIG[\"ECHO_N\"] = \"-n\"\n  CONFIG[\"ECHO_C\"] = \"\"\n  CONFIG[\"DEFS\"] = \"-D_FILE_OFFSET_BITS=64\"\n  CONFIG[\"mandir\"] = \"$(datarootdir)/man\"\n  CONFIG[\"localedir\"] = \"$(datarootdir)/locale\"\n  CONFIG[\"libdir\"] = \"$(exec_prefix)/lib\"\n  CONFIG[\"psdir\"] = \"$(docdir)\"\n  CONFIG[\"pdfdir\"] = \"$(docdir)\"\n  CONFIG[\"dvidir\"] = \"$(docdir)\"\n  CONFIG[\"htmldir\"] = \"$(docdir)\"\n  CONFIG[\"infodir\"] = \"$(datarootdir)/info\"\n  CONFIG[\"docdir\"] = \"$(datarootdir)/doc/$(PACKAGE)\"\n  CONFIG[\"oldincludedir\"] = \"/usr/include\"\n  CONFIG[\"includedir\"] = \"$(prefix)/include\"\n  CONFIG[\"localstatedir\"] = \"$(prefix)/var\"\n  CONFIG[\"sharedstatedir\"] = \"$(prefix)/com\"\n  CONFIG[\"sysconfdir\"] = \"$(prefix)/etc\"\n  CONFIG[\"datadir\"] = \"$(datarootdir)\"\n  CONFIG[\"datarootdir\"] = \"$(prefix)/share\"\n  CONFIG[\"libexecdir\"] = \"$(exec_prefix)/libexec\"\n  CONFIG[\"sbindir\"] = \"$(exec_prefix)/sbin\"\n  CONFIG[\"bindir\"] = \"$(exec_prefix)/bin\"\n  CONFIG[\"exec_prefix\"] = \"$(prefix)\"\n  CONFIG[\"PACKAGE_URL\"] = \"\"\n  CONFIG[\"PACKAGE_BUGREPORT\"] = \"\"\n  CONFIG[\"PACKAGE_STRING\"] = \"\"\n  CONFIG[\"PACKAGE_VERSION\"] = \"\"\n  CONFIG[\"PACKAGE_TARNAME\"] = \"\"\n  CONFIG[\"PACKAGE_NAME\"] = \"\"\n  CONFIG[\"PATH_SEPARATOR\"] = \":\"\n  CONFIG[\"SHELL\"] = \"/bin/bash\"\n  CONFIG[\"archdir\"] = \"$(rubyarchdir)\"\n  CONFIG[\"topdir\"] = File.dirname(__FILE__)\n  MAKEFILE_CONFIG = {}\n  CONFIG.each{|k,v| MAKEFILE_CONFIG[k] = v.dup}\n  def RbConfig::expand(val, config = CONFIG)\n    newval = val.gsub(/\\$\\$|\\$\\(([^()]+)\\)|\\$\\{([^{}]+)\\}/) {\n      var = $&amp;\n      if !(v = $1 || $2)\n    '$'\n      elsif key = config[v = v[/\\A[^:]+(?=(?::(.*?)=(.*))?\\z)/]]\n    pat, sub = $1, $2\n    config[v] = false\n    config[v] = RbConfig::expand(key, config)\n    key = key.gsub(/#{Regexp.quote(pat)}(?=\\s|\\z)/n) {sub} if pat\n    key\n      else\n    var\n      end\n    }\n    val.replace(newval) unless newval == val\n    val\n  end\n  CONFIG.each_value do |val|\n    RbConfig::expand(val)\n  end\n\n  # returns the absolute pathname of the ruby command.\n  def RbConfig.ruby\n    File.join(\n      RbConfig::CONFIG[\"bindir\"],\n      RbConfig::CONFIG[\"ruby_install_name\"] + RbConfig::CONFIG[\"EXEEXT\"]\n    )\n  end\nend\nCROSS_COMPILING = nil unless defined? CROSS_COMPILING\n</code></pre>\n\n<p>After that there was still a problem where it threw the error about not finding -lgcc_s (which is apperently libgcc_s.so). I did however found the library  <code>/opt/lib/libgcc_s.so.1</code>. So I could solve the problem by:</p>\n\n<p><code>ln -s /opt/lib/libgcc_s.so /opt/lib/libgcc_s.so.1]</code></p>\n\n<p>After this the installation went as normal using:</p>\n\n<pre><code>gem install nokogiri\ngem install mechanize\ngem install bcrypt\n</code></pre>\n"}], "owner": {"reputation": 60, "user_id": 4009374, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/b8d5b2ada50cbc9867cc67bba269f8a8?s=128&d=identicon&r=PG&f=1", "display_name": "Basher52", "link": "https://stackoverflow.com/users/4009374/basher52"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464899587, "creation_date": 1464801692, "question_id": 37575109, "link": "https://stackoverflow.com/questions/37575109/faulty-ruby-rbconfig-rb-file-from-ipkg-ng", "title": "Faulty Ruby rbconfig.rb file from IPKG-ng", "body": "<p>I have a Synology NAS (DS214+) where I used optware-ng (<a href=\"https://github.com/Optware/Optware-ng\" rel=\"nofollow\">https://github.com/Optware/Optware-ng</a>) to install ruby.</p>\n\n<p>Ruby comes with 'gem' to manage the ruby gems and I'm able to install simple gems using gem, but when trying to install bcrypt or nokogiri or mechanize, I run into errors because these gems need to do native compilations using gcc and such which fails.</p>\n\n<p>I found out that the problem lies with the <strong>rbconfig.rb</strong> file which should reference to correct binaries of gcc, as, dl, and such. </p>\n\n<p>It however refers to incorrect hard coded paths, example:</p>\n\n<pre><code>CONFIG[\"CC\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-gcc\"\n</code></pre>\n\n<p>while it should be:</p>\n\n<pre><code>CONFIG[\"CC\"] = \"/opt/bin/gcc\"\n</code></pre>\n\n<p>Even after modifying these paths, it still doesn't work although it is now able to compile some parts at least. I'm still looking over some things probably in this configuration file.</p>\n\n<p>Below is the faulty configuration file.</p>\n\n<pre><code># This file was created by mkconfig.rb when ruby was built.  Any\n# changes made to this file will be lost the next time ruby is built.\n\nmodule RbConfig\n  RUBY_VERSION == \"2.2.0\" or\n    raise \"ruby lib version (2.2.0) doesn't match executable version (#{RUBY_VERSION})\"\n\n  TOPDIR = File.dirname(__FILE__).chomp!(\"/lib/ruby/2.2.0/arm-linux-gnu\")\n  DESTDIR = '' unless defined? DESTDIR\n  CONFIG = {}\n  CONFIG[\"DESTDIR\"] = DESTDIR\n  CONFIG[\"MAJOR\"] = \"2\"\n  CONFIG[\"MINOR\"] = \"2\"\n  CONFIG[\"TEENY\"] = \"0\"\n  CONFIG[\"PATCHLEVEL\"] = \"0\"\n  CONFIG[\"INSTALL\"] = '/usr/bin/install -c'\n  CONFIG[\"EXEEXT\"] = \"\"\n  CONFIG[\"prefix\"] = (TOPDIR || DESTDIR + \"/opt\")\n  CONFIG[\"ruby_install_name\"] = \"$(RUBY_BASE_NAME)\"\n  CONFIG[\"RUBY_INSTALL_NAME\"] = \"$(RUBY_BASE_NAME)\"\n  CONFIG[\"RUBY_SO_NAME\"] = \"$(RUBY_BASE_NAME)\"\n  CONFIG[\"DESTDIR\"] = \"\"\n  CONFIG[\"exec\"] = \"exec\"\n  CONFIG[\"ruby_pc\"] = \"ruby-2.2.pc\"\n  CONFIG[\"PACKAGE\"] = \"ruby\"\n  CONFIG[\"BUILTIN_TRANSSRCS\"] = \" newline.c\"\n  CONFIG[\"USE_RUBYGEMS\"] = \"YES\"\n  CONFIG[\"MANTYPE\"] = \"doc\"\n  CONFIG[\"NROFF\"] = \"/usr/bin/nroff\"\n  CONFIG[\"vendorarchhdrdir\"] = \"$(vendorhdrdir)/$(sitearch)\"\n  CONFIG[\"sitearchhdrdir\"] = \"$(sitehdrdir)/$(sitearch)\"\n  CONFIG[\"rubyarchhdrdir\"] = \"$(rubyhdrdir)/$(arch)\"\n  CONFIG[\"vendorhdrdir\"] = \"$(rubyhdrdir)/vendor_ruby\"\n  CONFIG[\"sitehdrdir\"] = \"$(rubyhdrdir)/site_ruby\"\n  CONFIG[\"rubyhdrdir\"] = \"$(includedir)/$(RUBY_VERSION_NAME)\"\n  CONFIG[\"RUBY_SEARCH_PATH\"] = \"\"\n  CONFIG[\"UNIVERSAL_INTS\"] = \"\"\n  CONFIG[\"UNIVERSAL_ARCHNAMES\"] = \"\"\n  CONFIG[\"configure_args\"] = \" '--build=x86_64-pc-linux-gnu' '--host=arm-linux' '--target=arm-linux' '--prefix=/opt' '--with-sitedir=/opt/local/lib/ruby/site_ruby' '--disable-nls' '--with-opt-dir=/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt' '--with-target-dir=/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt' '--enable-shared' '--disable-ipv6' '--disable-install-doc' 'build_alias=x86_64-pc-linux-gnu' 'host_alias=arm-linux' 'target_alias=arm-linux' 'CC=/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-gcc' 'LDFLAGS=-Wl,--dynamic-linker=/opt/lib/ld-linux-armhf.so.3 -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib -Wl,-rpath,/opt/lib -Wl,-rpath-link,/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib ' 'CPPFLAGS=-O2   -pipe -I/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/include ' 'CXX=/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-g++' 'CPP=/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-gcc -E'\"\n  CONFIG[\"vendorarchdir\"] = \"$(vendorlibdir)/$(sitearch)\"\n  CONFIG[\"vendorlibdir\"] = \"$(vendordir)/$(ruby_version)\"\n  CONFIG[\"vendordir\"] = \"$(rubylibprefix)/vendor_ruby\"\n  CONFIG[\"sitearchdir\"] = \"$(sitelibdir)/$(sitearch)\"\n  CONFIG[\"sitelibdir\"] = \"$(sitedir)/$(ruby_version)\"\n  CONFIG[\"sitedir\"] = \"$(DESTDIR)/opt/local/lib/ruby/site_ruby\"\n  CONFIG[\"rubyarchdir\"] = \"$(rubylibdir)/$(arch)\"\n  CONFIG[\"rubylibdir\"] = \"$(rubylibprefix)/$(ruby_version)\"\n  CONFIG[\"ruby_version\"] = \"2.2.0\"\n  CONFIG[\"sitearch\"] = \"$(arch)\"\n  CONFIG[\"arch\"] = \"arm-linux-gnu\"\n  CONFIG[\"sitearchincludedir\"] = \"$(includedir)/$(sitearch)\"\n  CONFIG[\"archincludedir\"] = \"$(includedir)/$(arch)\"\n  CONFIG[\"sitearchlibdir\"] = \"$(libdir)/$(sitearch)\"\n  CONFIG[\"archlibdir\"] = \"$(libdir)/$(arch)\"\n  CONFIG[\"libdirname\"] = \"libdir\"\n  CONFIG[\"RUBY_EXEC_PREFIX\"] = \"/opt\"\n  CONFIG[\"RUBY_LIB_VERSION\"] = \"\"\n  CONFIG[\"RUBY_LIB_VERSION_STYLE\"] = \"3\\t/* full */\"\n  CONFIG[\"RI_BASE_NAME\"] = \"ri\"\n  CONFIG[\"ridir\"] = \"$(datarootdir)/$(RI_BASE_NAME)\"\n  CONFIG[\"rubysitearchprefix\"] = \"$(rubylibprefix)/$(sitearch)\"\n  CONFIG[\"rubyarchprefix\"] = \"$(rubylibprefix)/$(arch)\"\n  CONFIG[\"MAKEFILES\"] = \"Makefile GNUmakefile\"\n  CONFIG[\"PLATFORM_DIR\"] = \"\"\n  CONFIG[\"THREAD_MODEL\"] = \"pthread\"\n  CONFIG[\"SYMBOL_PREFIX\"] = \"\"\n  CONFIG[\"EXPORT_PREFIX\"] = \"\"\n  CONFIG[\"COMMON_HEADERS\"] = \"\"\n  CONFIG[\"COMMON_MACROS\"] = \"\"\n  CONFIG[\"COMMON_LIBS\"] = \"\"\n  CONFIG[\"MAINLIBS\"] = \"\"\n  CONFIG[\"ENABLE_SHARED\"] = \"yes\"\n  CONFIG[\"DLDLIBS\"] = \" -lc\"\n  CONFIG[\"SOLIBS\"] = \"$(LIBS)\"\n  CONFIG[\"LIBRUBYARG_SHARED\"] = \"-Wl,-R$(libdir) -l$(RUBY_SO_NAME)\"\n  CONFIG[\"LIBRUBYARG_STATIC\"] = \"-Wl,-R$(libdir) -l$(RUBY_SO_NAME)-static\"\n  CONFIG[\"LIBRUBYARG\"] = \"$(LIBRUBYARG_SHARED)\"\n  CONFIG[\"LIBRUBY\"] = \"$(LIBRUBY_SO)\"\n  CONFIG[\"LIBRUBY_ALIASES\"] = \"lib$(RUBY_SO_NAME).so.$(MAJOR).$(MINOR) lib$(RUBY_SO_NAME).so\"\n  CONFIG[\"LIBRUBY_SO\"] = \"lib$(RUBY_SO_NAME).so.$(MAJOR).$(MINOR).$(TEENY)\"\n  CONFIG[\"LIBRUBY_A\"] = \"lib$(RUBY_SO_NAME)-static.a\"\n  CONFIG[\"RUBYW_INSTALL_NAME\"] = \"\"\n  CONFIG[\"rubyw_install_name\"] = \"\"\n  CONFIG[\"EXTDLDFLAGS\"] = \"\"\n  CONFIG[\"EXTLDFLAGS\"] = \"\"\n  CONFIG[\"strict_warnflags\"] = \"-std=iso9899:1999\"\n  CONFIG[\"warnflags\"] = \"-Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wunused-variable -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration -Wdeprecated-declarations -Wno-packed-bitfield-compat\"\n  CONFIG[\"debugflags\"] = \"-ggdb3\"\n  CONFIG[\"optflags\"] = \"-O3 -fno-fast-math\"\n  CONFIG[\"cxxflags\"] = \" $(optflags) $(debugflags) $(warnflags)\"\n  CONFIG[\"cflags\"] = \" $(optflags) $(debugflags) $(warnflags)\"\n  CONFIG[\"cppflags\"] = \"\"\n  CONFIG[\"NULLCMD\"] = \":\"\n  CONFIG[\"DLNOBJ\"] = \"dln.o\"\n  CONFIG[\"INSTALLDOC\"] = \"nodoc\"\n  CONFIG[\"CAPITARGET\"] = \"nodoc\"\n  CONFIG[\"RDOCTARGET\"] = \"nodoc\"\n  CONFIG[\"DTRACE_GLOMMED_OBJ\"] = \"\"\n  CONFIG[\"DTRACE_OBJ\"] = \"\"\n  CONFIG[\"DTRACE_EXT\"] = \"dmyh\"\n  CONFIG[\"EXECUTABLE_EXTS\"] = \"\"\n  CONFIG[\"ARCHFILE\"] = \"\"\n  CONFIG[\"LIBRUBY_RELATIVE\"] = \"no\"\n  CONFIG[\"EXTOUT\"] = \".ext\"\n  CONFIG[\"RUNRUBY_COMMAND\"] = \"$(MINIRUBY) -I`cd $(srcdir)/lib; pwd`\"\n  CONFIG[\"PREP\"] = \"$(arch)-fake.rb\"\n  CONFIG[\"BTESTRUBY\"] = \"$(MINIRUBY)\"\n  CONFIG[\"CROSS_COMPILING\"] = \"yes\"\n  CONFIG[\"TEST_RUNNABLE\"] = \"no\"\n  CONFIG[\"rubylibprefix\"] = \"$(libdir)/$(RUBY_BASE_NAME)\"\n  CONFIG[\"setup\"] = \"Setup\"\n  CONFIG[\"ENCSTATIC\"] = \"\"\n  CONFIG[\"EXTSTATIC\"] = \"\"\n  CONFIG[\"STRIP\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-strip -S -x\"\n  CONFIG[\"TRY_LINK\"] = \"\"\n  CONFIG[\"LIBPATHENV\"] = \"LD_LIBRARY_PATH\"\n  CONFIG[\"RPATHFLAG\"] = \" -Wl,-R%1$-s\"\n  CONFIG[\"LIBPATHFLAG\"] = \" -L%1$-s\"\n  CONFIG[\"LINK_SO\"] = \"\"\n  CONFIG[\"ASMEXT\"] = \"S\"\n  CONFIG[\"LIBEXT\"] = \"a\"\n  CONFIG[\"DLEXT2\"] = \"\"\n  CONFIG[\"DLEXT\"] = \"so\"\n  CONFIG[\"LDSHAREDXX\"] = \"$(CXX) -shared\"\n  CONFIG[\"LDSHARED\"] = \"$(CC) -shared\"\n  CONFIG[\"CCDLFLAGS\"] = \"-fPIC\"\n  CONFIG[\"STATIC\"] = \"\"\n  CONFIG[\"ARCH_FLAG\"] = \"\"\n  CONFIG[\"DLDFLAGS\"] = \"-Wl,--dynamic-linker=/opt/lib/ld-linux-armhf.so.3 -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib -Wl,-rpath,/opt/lib -Wl,-rpath-link,/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib  -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib  -Wl,-R/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib \"\n  CONFIG[\"ALLOCA\"] = \"\"\n  CONFIG[\"codesign\"] = \"\"\n  CONFIG[\"POSTLINK\"] = \":\"\n  CONFIG[\"WERRORFLAG\"] = \"-Werror\"\n  CONFIG[\"CHDIR\"] = \"cd -P\"\n  CONFIG[\"RMALL\"] = \"rm -fr\"\n  CONFIG[\"RMDIRS\"] = \"rmdir --ignore-fail-on-non-empty -p\"\n  CONFIG[\"RMDIR\"] = \"rmdir --ignore-fail-on-non-empty\"\n  CONFIG[\"CP\"] = \"cp\"\n  CONFIG[\"RM\"] = \"rm -f\"\n  CONFIG[\"PKG_CONFIG\"] = \"/home/jenkins/Optware-ng/scripts/pkg-config.sh\"\n  CONFIG[\"PYTHON\"] = \"\"\n  CONFIG[\"DOXYGEN\"] = \"doxygen\"\n  CONFIG[\"DOT\"] = \"\"\n  CONFIG[\"DTRACE\"] = \"\"\n  CONFIG[\"MAKEDIRS\"] = \"/bin/mkdir -p\"\n  CONFIG[\"MKDIR_P\"] = \"/bin/mkdir -p\"\n  CONFIG[\"INSTALL_DATA\"] = \"$(INSTALL) -m 644\"\n  CONFIG[\"INSTALL_SCRIPT\"] = \"$(INSTALL)\"\n  CONFIG[\"INSTALL_PROGRAM\"] = \"$(INSTALL)\"\n  CONFIG[\"SET_MAKE\"] = \"\"\n  CONFIG[\"LN_S\"] = \"ln -s\"\n  CONFIG[\"NM\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-nm\"\n  CONFIG[\"DLLWRAP\"] = \"\"\n  CONFIG[\"WINDRES\"] = \"\"\n  CONFIG[\"OBJCOPY\"] = \":\"\n  CONFIG[\"OBJDUMP\"] = \"objdump\"\n  CONFIG[\"ASFLAGS\"] = \"\"\n  CONFIG[\"AS\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-as\"\n  CONFIG[\"AR\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-ar\"\n  CONFIG[\"RANLIB\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-ranlib\"\n  CONFIG[\"try_header\"] = \"\"\n  CONFIG[\"CC_VERSION\"] = \"$(CC) -v\"\n  CONFIG[\"COUTFLAG\"] = \"-o \"\n  CONFIG[\"OUTFLAG\"] = \"-o \"\n  CONFIG[\"CPPOUTFILE\"] = \"-o conftest.i\"\n  CONFIG[\"GNU_LD\"] = \"yes\"\n  CONFIG[\"LD\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-ld\"\n  CONFIG[\"GCC\"] = \"yes\"\n  CONFIG[\"EGREP\"] = \"/bin/grep -E\"\n  CONFIG[\"GREP\"] = \"/bin/grep\"\n  CONFIG[\"CPP\"] = \"$(CC) -E\"\n  CONFIG[\"CXXFLAGS\"] = \"$(cxxflags)\"\n  CONFIG[\"OBJEXT\"] = \"o\"\n  CONFIG[\"CPPFLAGS\"] = \"-O2   -pipe -I/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/include  -I/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/include $(DEFS) $(cppflags)\"\n  CONFIG[\"LDFLAGS\"] = \"-L. -Wl,--dynamic-linker=/opt/lib/ld-linux-armhf.so.3 -Wl,-rpath,/opt/lib -Wl,-rpath-link,/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib  -fstack-protector -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib -rdynamic -Wl,-export-dynamic -L/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib  -Wl,-R/home/jenkins/Optware-ng/buildroot-armeabihf/staging/opt/lib \"\n  CONFIG[\"CFLAGS\"] = \"$(cflags)  -fPIC\"\n  CONFIG[\"CXX\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-g++\"\n  CONFIG[\"CC\"] = \"/home/jenkins/Optware-ng/buildroot-armeabihf/toolchain/buildroot-armhf-linux-3.2.66-glibc-5.3.0/bin/arm-buildroot-linux-gnueabihf-gcc\"\n  CONFIG[\"NACL_LIB_PATH\"] = \"\"\n  CONFIG[\"NACL_SDK_VARIANT\"] = \"\"\n  CONFIG[\"NACL_SDK_ROOT\"] = \"\"\n  CONFIG[\"NACL_TOOLCHAIN\"] = \"\"\n  CONFIG[\"target_os\"] = \"linux-gnu\"\n  CONFIG[\"target_vendor\"] = \"unknown\"\n  CONFIG[\"target_cpu\"] = \"arm\"\n  CONFIG[\"target\"] = \"arm-unknown-linux-gnu\"\n  CONFIG[\"host_os\"] = \"linux-gnu\"\n  CONFIG[\"host_vendor\"] = \"unknown\"\n  CONFIG[\"host_cpu\"] = \"arm\"\n  CONFIG[\"host\"] = \"arm-unknown-linux-gnu\"\n  CONFIG[\"RUBY_VERSION_NAME\"] = \"$(RUBY_BASE_NAME)-$(ruby_version)\"\n  CONFIG[\"RUBYW_BASE_NAME\"] = \"rubyw\"\n  CONFIG[\"RUBY_BASE_NAME\"] = \"ruby\"\n  CONFIG[\"build_os\"] = \"linux-gnu\"\n  CONFIG[\"build_vendor\"] = \"pc\"\n  CONFIG[\"build_cpu\"] = \"x86_64\"\n  CONFIG[\"build\"] = \"x86_64-pc-linux-gnu\"\n  CONFIG[\"RUBY_PROGRAM_VERSION\"] = \"2.2.0\"\n  CONFIG[\"HAVE_BASERUBY\"] = \"yes\"\n  CONFIG[\"target_alias\"] = \"arm-linux\"\n  CONFIG[\"host_alias\"] = \"arm-linux\"\n  CONFIG[\"build_alias\"] = \"x86_64-pc-linux-gnu\"\n  CONFIG[\"LIBS\"] = \"-lpthread -lgmp -ldl -lcrypt -lm \"\n  CONFIG[\"ECHO_T\"] = \"\"\n  CONFIG[\"ECHO_N\"] = \"-n\"\n  CONFIG[\"ECHO_C\"] = \"\"\n  CONFIG[\"DEFS\"] = \"-D_FILE_OFFSET_BITS=64\"\n  CONFIG[\"mandir\"] = \"$(datarootdir)/man\"\n  CONFIG[\"localedir\"] = \"$(datarootdir)/locale\"\n  CONFIG[\"libdir\"] = \"$(exec_prefix)/lib\"\n  CONFIG[\"psdir\"] = \"$(docdir)\"\n  CONFIG[\"pdfdir\"] = \"$(docdir)\"\n  CONFIG[\"dvidir\"] = \"$(docdir)\"\n  CONFIG[\"htmldir\"] = \"$(docdir)\"\n  CONFIG[\"infodir\"] = \"$(datarootdir)/info\"\n  CONFIG[\"docdir\"] = \"$(datarootdir)/doc/$(PACKAGE)\"\n  CONFIG[\"oldincludedir\"] = \"/usr/include\"\n  CONFIG[\"includedir\"] = \"$(prefix)/include\"\n  CONFIG[\"localstatedir\"] = \"$(prefix)/var\"\n  CONFIG[\"sharedstatedir\"] = \"$(prefix)/com\"\n  CONFIG[\"sysconfdir\"] = \"$(prefix)/etc\"\n  CONFIG[\"datadir\"] = \"$(datarootdir)\"\n  CONFIG[\"datarootdir\"] = \"$(prefix)/share\"\n  CONFIG[\"libexecdir\"] = \"$(exec_prefix)/libexec\"\n  CONFIG[\"sbindir\"] = \"$(exec_prefix)/sbin\"\n  CONFIG[\"bindir\"] = \"$(exec_prefix)/bin\"\n  CONFIG[\"exec_prefix\"] = \"$(prefix)\"\n  CONFIG[\"PACKAGE_URL\"] = \"\"\n  CONFIG[\"PACKAGE_BUGREPORT\"] = \"\"\n  CONFIG[\"PACKAGE_STRING\"] = \"\"\n  CONFIG[\"PACKAGE_VERSION\"] = \"\"\n  CONFIG[\"PACKAGE_TARNAME\"] = \"\"\n  CONFIG[\"PACKAGE_NAME\"] = \"\"\n  CONFIG[\"PATH_SEPARATOR\"] = \":\"\n  CONFIG[\"SHELL\"] = \"/bin/bash\"\n  CONFIG[\"archdir\"] = \"$(rubyarchdir)\"\n  CONFIG[\"topdir\"] = File.dirname(__FILE__)\n  MAKEFILE_CONFIG = {}\n  CONFIG.each{|k,v| MAKEFILE_CONFIG[k] = v.dup}\n  def RbConfig::expand(val, config = CONFIG)\n    newval = val.gsub(/\\$\\$|\\$\\(([^()]+)\\)|\\$\\{([^{}]+)\\}/) {\n      var = $&amp;\n      if !(v = $1 || $2)\n        '$'\n      elsif key = config[v = v[/\\A[^:]+(?=(?::(.*?)=(.*))?\\z)/]]\n        pat, sub = $1, $2\n        config[v] = false\n        config[v] = RbConfig::expand(key, config)\n        key = key.gsub(/#{Regexp.quote(pat)}(?=\\s|\\z)/n) {sub} if pat\n        key\n      else\n        var\n      end\n    }\n    val.replace(newval) unless newval == val\n    val\n  end\n  CONFIG.each_value do |val|\n    RbConfig::expand(val)\n  end\n\n  # returns the absolute pathname of the ruby command.\n  def RbConfig.ruby\n    File.join(\n      RbConfig::CONFIG[\"bindir\"],\n      RbConfig::CONFIG[\"ruby_install_name\"] + RbConfig::CONFIG[\"EXEEXT\"]\n    )\n  end\nend\nCROSS_COMPILING = nil unless defined? CROSS_COMPILING\n</code></pre>\n\n<p>The problem that I know run in to trying to install bcrypt by:</p>\n\n<pre><code>gem install bcrypt\n</code></pre>\n\n<p>is that binary 'ld' can't find the necessary library (probably again a path issue)</p>\n\n<pre><code>linking shared-object bcrypt_ext.so\n/volume1/@optware/bin/../lib/gcc/arm-buildroot-linux-gnueabihf/5.3.0/../../../../arm-buildroot-linux-gnueabihf/bin/ld: cannot find -lgcc_s\n</code></pre>\n\n<p>as the library is present at</p>\n\n<pre><code>/opt/lib/libgcc_s.so.1\n</code></pre>\n\n<p>Does anyone notice any other problems in the configuration file or if anyone could provide a working configuration file so that I can compare it with my faulty one.</p>\n"}, {"tags": ["ruby", "unit-testing", "guard"], "answers": [{"tags": [], "owner": {"reputation": 1939, "user_id": 1190046, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c0f2dbac5297d75eb31ee0d93c40ecf0?s=128&d=identicon&r=PG", "display_name": "Cezary Baginski", "link": "https://stackoverflow.com/users/1190046/cezary-baginski"}, "is_accepted": false, "score": 0, "last_activity_date": 1465122682, "creation_date": 1465122682, "answer_id": 37640882, "question_id": 37575062, "link": "https://stackoverflow.com/questions/37575062/annoying-guard-notification-when-testing/37640882#37640882", "title": "Annoying Guard notification when testing", "body": "<p>Seems like there's some weird conflict...</p>\n\n<p>The reason is that <code>Guard::Notifier.connect</code> isn't connected. Normally, when you run guard, <code>Guard.setup</code> is called which does this.</p>\n\n<p>If you're not using guard (e.g. interactively), then calling the following from your Rakefile should work around the problem:</p>\n\n<pre><code>  Guard::Notifier.connect(notify: false, silent: true)\n  Guard::Notifier.disconnect\n</code></pre>\n\n<p>This will initialize the variable.</p>\n\n<p>For a faster response, always report such issues on the project page on Github. If you can share the project where this occurs, maybe a better fix is possible. (It's best to provide a repository, since it really speeds up fixing things and often errors like this are very hard to simulate without the exact code).</p>\n"}], "owner": {"reputation": 295, "user_id": 6183021, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/c9a176dde1953ecc4d5d28d639e4588b?s=128&d=identicon&r=PG&f=1", "display_name": "mc92", "link": "https://stackoverflow.com/users/6183021/mc92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1465122682, "creation_date": 1464801504, "question_id": 37575062, "link": "https://stackoverflow.com/questions/37575062/annoying-guard-notification-when-testing", "title": "Annoying Guard notification when testing", "body": "<p>Recently I made a simple ruby application and have been using minitest to test it.</p>\n\n<p>Following the advice of the Head First Ruby book, I automated this testing using Rake(I'll write what it told me to put in the Rakefile at the end of this post, in case that helps). The test seems to run fine (everything passes in a way I would expect it to), but I always get this notification at the end of it all:</p>\n\n<p>rvm/gems/ruby-2.3.0/gems/guard-2.14.0/lib/guard/notifier.rb:28: warning: instance variable @notifier not initialized</p>\n\n<p>Testing things manually by telling ruby to include which files I want, does not have this issue, only when I use \"rake test\" to test things.</p>\n\n<p>As far as I can tell, this is related to when I set up Guard when I was following Michael Hartl's Rails Tutorial, at the end of chapter 3. I followed the directions for setting that up (correctly, as far as I can tell), and this was all in a completely different folder(ultimately my ruby and rails projects do have the same parent folder that they sit in, but are themselves in completely separate ruby_projects and rails_projects folders). If possible, I would like to stop this notification on my ruby application that I am testing. Is there a good way to do this?</p>\n\n<p>Contents of the Rakefile I am using, if that helps:\n    require \"rake/testtask\"</p>\n\n<pre><code>  Rake::TestTask.new(:test) do |t|\n  t.libs &lt;&lt; \"lib\"\n  t.test_files=FileList['test/**/test_*.rb']\nend\n</code></pre>\n\n<p>My test file requires minitest/autorun, and the file for the application that I am testing, then has the normal tests</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "callback", "checkout"], "comments": [{"owner": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "edited": false, "score": 0, "creation_date": 1464801274, "post_id": 37574881, "comment_id": 62637086, "body": "How is params getting into LineItems?"}, {"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "reply_to_user": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "edited": false, "score": 0, "creation_date": 1464801444, "post_id": 37574881, "comment_id": 62637181, "body": "@ken I was trying to find the LineItem using id?"}, {"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "reply_to_user": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "edited": false, "score": 0, "creation_date": 1464801569, "post_id": 37574881, "comment_id": 62637258, "body": "@ken I thought using the callback could pass the params"}, {"owner": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "edited": false, "score": 0, "creation_date": 1464801794, "post_id": 37574881, "comment_id": 62637389, "body": "In your udp function, I don&#39;t see how it is getting the params variable."}, {"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "reply_to_user": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "edited": false, "score": 0, "creation_date": 1464802128, "post_id": 37574881, "comment_id": 62637586, "body": "@ken do i need to find LineItems again in the &quot;upd&quot; method?"}, {"owner": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "edited": false, "score": 0, "creation_date": 1464803094, "post_id": 37574881, "comment_id": 62638170, "body": "No, but you are using params there: <code>product.decrement!(quantity: params[:quantity])</code>"}, {"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "reply_to_user": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "edited": false, "score": 0, "creation_date": 1464803660, "post_id": 37574881, "comment_id": 62638462, "body": "@ken I&#39;m using  <code>product.decrement!(quantity: params[:quantity])</code> because LineItem <code>belongs_to :product</code>"}, {"owner": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "edited": false, "score": 0, "creation_date": 1464803798, "post_id": 37574881, "comment_id": 62638529, "body": "But you aren&#39;t passing <code>params</code> to the method."}, {"owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "reply_to_user": {"reputation": 1462, "user_id": 1230053, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1bc0f56c16d50540f99313692762924e?s=128&d=identicon&r=PG", "display_name": "Ken Stipek", "link": "https://stackoverflow.com/users/1230053/ken-stipek"}, "edited": false, "score": 0, "creation_date": 1464803854, "post_id": 37574881, "comment_id": 62638555, "body": "@ken how do i do that?"}], "answers": [{"tags": [], "owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "is_accepted": true, "score": 0, "last_activity_date": 1464878022, "creation_date": 1464878022, "answer_id": 37594853, "question_id": 37574881, "link": "https://stackoverflow.com/questions/37574881/rails-update-product-quantity/37594853#37594853", "title": "Rails update product quantity", "body": "<p>The params hash is only available in the controller. You cannot access it in the model. You have to pass params[:quantity] to the upd method as a method parameter as such:</p>\n\n<pre><code>def update_quantity\n  @line_item = LineItem.find(params[:id])\n  @line_item.upd(params[:quantity])\nend\n\ndef upd(quantity)\n  if cart.purchased_at\n    product.decrement!(quantity: quantity)\n  end\nend\n</code></pre>\n\n<p>Also, you should consider using Time.current instead of Time.now in order to account for the time zone your application is configured with in application.rb unless you just want to use whatever time is local.</p>\n"}], "owner": {"reputation": 83, "user_id": 6094382, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/8e8e88e3b7ba5f9d802fe180c7649988?s=128&d=identicon&r=PG&f=1", "display_name": "Rails_learner", "link": "https://stackoverflow.com/users/6094382/rails-learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 803, "favorite_count": 0, "accepted_answer_id": 37594853, "answer_count": 1, "score": 0, "last_activity_date": 1464878022, "creation_date": 1464800846, "question_id": 37574881, "link": "https://stackoverflow.com/questions/37574881/rails-update-product-quantity", "title": "Rails update product quantity", "body": "<p>I followed Ryan Bates screencasts using paypal standard payments and i basically now have to send checkout info from the Cart model.\nI'm a bit stuck with trying to update product quantity after the transaction is completed. </p>\n\n<p>I tried using a callback but to no avail. Any help would be appreciated</p>\n\n<p>The closest i got was to use this update quantity callback but for some reason, it is updating the wrong cart. Not sure whether it picks up the wrong line item or its when it checks the cart it goes wrong</p>\n\n<pre><code> class PaymentNotification &lt; ActiveRecord::Base\n   belongs_to :cart\n   serialize :params\n   after_create :mark_cart_as_purchased, :update_quantity\n\n\nprivate\n\ndef mark_cart_as_purchased\n  if status == \"Completed\"\n    cart.update_attribute(:purchased_at, Time.now)\n  end\nend\n\ndef update_quantity\n  @line_item = LineItem.find(params[:id])\n  @line_item.upd\nend\nend\n</code></pre>\n\n<p>Line Item Class</p>\n\n<pre><code>class LineItem &lt; ActiveRecord::Base\n  belongs_to :order\n  belongs_to :product\n  belongs_to :cart\n  belongs_to :stock\n  after_create :stock_stat \n\n\n   def total_price\n     product.price * quantity\n   end\n\n   def upd\n     if cart.purchased_at\n       product.decrement!(quantity: params[:quantity])\n      end\n    end\n\n end\n</code></pre>\n"}, {"tags": ["ruby", "dry"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464800065, "post_id": 37574455, "comment_id": 62636382, "body": "Can you narrow down your requirements here a little? A concrete example of what you&#39;re trying to find would help. Does the code differ by indentation? By variable names? Doing it by hand is usually the most reliable way, automatic detection only catches copy-paste jobs. Ruby&#39;s &quot;Don&#39;t Repeat Yourself&quot; methodology involves careful analysis and reduction of code to its essentials."}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464800355, "post_id": 37574455, "comment_id": 62636550, "body": "Methods that are mostly the same, or stretches of repeated code that kind of thing. Isn&#39;t there a code tool like rubocop for helping to dry up code?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464800438, "post_id": 37574455, "comment_id": 62636597, "body": "There&#39;s tools like <a href=\"https://codeclimate.com\" rel=\"nofollow noreferrer\">CodeClimate</a> and Rubocop, absolutely. If you have stretches of repeated code it sounds like your development process is total anarchy. How does any of that pass a code review?"}, {"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464801333, "post_id": 37574455, "comment_id": 62637115, "body": "When I&#39;m not the one doing the coding. It was coded in what appears to be a slapdash manner by a really junior developer.  After fixing a few bugs and adding few features one of my next tasks is to start optimising the job scripts, so I want to know how much is repeated across the files so I can dry it up by centralising it into a utility class.   Let&#39;s just say I my first thought on it was &quot;why dear god, why?&quot;.  That said and done though, it does work."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1464802087, "post_id": 37574455, "comment_id": 62637544, "body": "You need to clarify what you mean by &quot;repeating code&quot;. If one file contains the line <code>&quot;x = 3&quot;</code> in two places, is that repeating code? If two files each contain lines <code>&quot;x = 3&quot;</code>, is that repeating code? Have you considered just rewriting the code? Patching crappy code can be a big time-waster in the long-run."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464909210, "post_id": 37574455, "comment_id": 62691783, "body": "@CarySwoveland: One can define clones carefully, enabling a mechanical engine to find them.   CloneDR defines a clone as 2 or more code blocks of code that meet similarity criteria, found in any designated set of files:  at least a certain minimum size (nobody cares about 3 character clones), not differing more than K places.  See &quot;detection parameters&quot; in my answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "edited": false, "score": 0, "creation_date": 1464909630, "post_id": 37574455, "comment_id": 62691906, "body": "@Ira, that&#39;s fine, but the OP still needs to define what he or she means by &quot;repeating code&quot;."}, {"owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464912598, "post_id": 37574455, "comment_id": 62692678, "body": "@CarySwoveland:  &quot;repeating code&quot; == &quot;clone&quot;.  OP can control the definition by providing the parameter values, unless OP means something else."}], "answers": [{"comments": [{"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1464819652, "post_id": 37578052, "comment_id": 62646336, "body": "Perfect! Thank you sir, please have a cookie!  P.s. I&#39;m sooo going to run flog on those scripts and just see how painful the code really is."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1464846054, "post_id": 37578052, "comment_id": 62653157, "body": "If you are looking for more static code checks, look at: flay, flog, reek, rubocop, and more from this list: <a href=\"https://www.ruby-toolbox.com/categories/code_metrics\" rel=\"nofollow noreferrer\">ruby-toolbox.com/categories/code_metrics</a>  or just check MetricFu which combines various metrics. And thanks for the cookie:-)"}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 6, "last_activity_date": 1464812367, "creation_date": 1464812367, "answer_id": 37578052, "question_id": 37574455, "link": "https://stackoverflow.com/questions/37574455/tool-to-scan-ruby-code-files-for-repeating-or-similar-code-chunks/37578052#37578052", "title": "tool to scan ruby code files for repeating or similar code chunks", "body": "<p>You can look at <em>flay</em>: <a href=\"https://github.com/seattlerb/flay\" rel=\"noreferrer\">https://github.com/seattlerb/flay</a>\nFrom the docs:</p>\n\n<blockquote>\n  <p>Flay analyzes code for structural similarities. Differences in literal\n  values, variable, class, method names, whitespace, programming style,\n  braces vs do/end, etc are all ignored. Making this totally rad.</p>\n</blockquote>\n\n<p>Or, depending on your budget, you can create an account with one of the hosted static code analysis services and push your code there for a checkup.</p>\n"}, {"comments": [{"owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "edited": false, "score": 0, "creation_date": 1464946313, "post_id": 37603517, "comment_id": 62704886, "body": "Nice! should be super useful when hunting for code to re-factor."}], "tags": [], "owner": {"reputation": 88411, "user_id": 120163, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/OPDmg.jpg?s=128&g=1", "display_name": "Ira Baxter", "link": "https://stackoverflow.com/users/120163/ira-baxter"}, "is_accepted": false, "score": 2, "last_activity_date": 1464948036, "last_edit_date": 1464948036, "creation_date": 1464908772, "answer_id": 37603517, "question_id": 37574455, "link": "https://stackoverflow.com/questions/37574455/tool-to-scan-ruby-code-files-for-repeating-or-similar-code-chunks/37603517#37603517", "title": "tool to scan ruby code files for repeating or similar code chunks", "body": "<p>Our <a href=\"http://www.semanticdesigns.com/Products/Clone/\" rel=\"nofollow noreferrer\">CloneDR</a> tool can do this; we are just finishing one up for Ruby.  It hunts for duplicate code that matches a set of constraints (on size, # points of variation, similarity of the matching part/total, etc.).</p>\n\n<p>Here are samples of a CloneDR run against most of the Metasploit code base.\nThat's about 460K SLOC of Ruby code; (at least) 14% of the code base is clones.</p>\n\n<p>The first picture below is the summary page.  The second is an example detected clone (one of some 3000 found in that code base); you might want to click on this picture in your browser and use the \"+\" button to make it a bit larger and easier to see.</p>\n\n<p><a href=\"https://i.stack.imgur.com/vLyTd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vLyTd.png\" alt=\"Summary Page from Ruby CloneDR run\"></a> </p>\n\n<p><a href=\"https://i.stack.imgur.com/TbAEh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TbAEh.png\" alt=\"Example Ruby Clone\"></a></p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 522, "favorite_count": 0, "accepted_answer_id": 37578052, "answer_count": 2, "score": 2, "last_activity_date": 1464948036, "creation_date": 1464799547, "question_id": 37574455, "link": "https://stackoverflow.com/questions/37574455/tool-to-scan-ruby-code-files-for-repeating-or-similar-code-chunks", "title": "tool to scan ruby code files for repeating or similar code chunks", "body": "<p>Is there a way to scan ruby files for repeating code? </p>\n\n<p>I have almost 30 files each between 200-1000 lines of  code and I need to optimize and refactor them. </p>\n\n<p>I was thinking of moving repeated code to a utility class that can be used across all files. </p>\n\n<p>Is there some kind of scanning tool to easily find and mark chunks of repeated or similar code?</p>\n\n<p>Or am I just going to have to bite the proverbial bullet and do it by hand?</p>\n"}, {"tags": ["arrays", "ruby", "for-loop", "tcl"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1464799526, "post_id": 37574118, "comment_id": 62636081, "body": "More generally: <code>[1,2,3,4].each_slice(2)  {|r| puts r.join(&#39; &#39;) }</code>"}, {"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1464802645, "post_id": 37574118, "comment_id": 62637880, "body": "@tadman, sure, but my code is more similar with source code, so I&#39;ve decided write exact by this."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 9, "last_activity_date": 1480670289, "last_edit_date": 1480670289, "creation_date": 1464798432, "answer_id": 37574118, "question_id": 37574101, "link": "https://stackoverflow.com/questions/37574101/how-can-one-loop-in-a-ruby-with-2-variables-on-array/37574118#37574118", "title": "How can one loop in a ruby with 2 variables on Array", "body": "<p>You can get the same output by this way:</p>\n\n<pre><code>[1,2,3,4].each_slice(2) {|a, b| puts \"#{a} #{b}\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1464802569, "creation_date": 1464802569, "answer_id": 37575334, "question_id": 37574101, "link": "https://stackoverflow.com/questions/37574101/how-can-one-loop-in-a-ruby-with-2-variables-on-array/37575334#37575334", "title": "How can one loop in a ruby with 2 variables on Array", "body": "<pre><code>puts [1,2,33,44].join(' ').scan /\\d+\\s\\d+/\n1 2\n33 44\n</code></pre>\n"}], "owner": {"reputation": 2689, "user_id": 1134991, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/e102cb584a0fba3cd07b0a4d79350ba2?s=128&d=identicon&r=PG", "display_name": "user1134991", "link": "https://stackoverflow.com/users/1134991/user1134991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 37574118, "answer_count": 2, "score": 3, "last_activity_date": 1489943358, "creation_date": 1464798372, "last_edit_date": 1489943358, "question_id": 37574101, "link": "https://stackoverflow.com/questions/37574101/how-can-one-loop-in-a-ruby-with-2-variables-on-array", "title": "How can one loop in a ruby with 2 variables on Array", "body": "<p>In Tcl, if you have a list with even elements, one can loop two elements at a time. See this code:</p>\n\n<pre><code>foreach { a b } [ list 1 2 3 4 ] {\n    puts \"${a} ${b}\"\n}\n</code></pre>\n\n<p>Will output:<br></p>\n\n<pre><code>1 2\n3 4\n</code></pre>\n\n<p>How can one get the same behavior with Ruby?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user3720516"}, "edited": false, "score": 0, "creation_date": 1464797913, "post_id": 37573900, "comment_id": 62635059, "body": "Can you post your categorization and movie model?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1464798338, "post_id": 37573900, "comment_id": 62635319, "body": "Where exactly you get that error? Please post the full error stack."}], "answers": [{"comments": [{"owner": {"reputation": 195, "user_id": 4945447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5a66bffbc69cdc1f9332df1dcda9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "hamza-jutt", "link": "https://stackoverflow.com/users/4945447/hamza-jutt"}, "edited": false, "score": 0, "creation_date": 1464798503, "post_id": 37574084, "comment_id": 62635435, "body": "Could you suggest a better way to code to avoid such mistakes. IDE?"}, {"owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "reply_to_user": {"reputation": 195, "user_id": 4945447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5a66bffbc69cdc1f9332df1dcda9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "hamza-jutt", "link": "https://stackoverflow.com/users/4945447/hamza-jutt"}, "edited": false, "score": 0, "creation_date": 1464798649, "post_id": 37574084, "comment_id": 62635539, "body": "I suppose &quot;experience&quot; is the best answer.  I don&#39;t know if an IDE would help as your code is valid Ruby code, just not what you wanted."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 195, "user_id": 4945447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5a66bffbc69cdc1f9332df1dcda9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "hamza-jutt", "link": "https://stackoverflow.com/users/4945447/hamza-jutt"}, "edited": false, "score": 0, "creation_date": 1464800385, "post_id": 37574084, "comment_id": 62636564, "body": "@Geek101 Syntax highlighting helps considerably, but developing an eye for these things comes naturally over time."}], "tags": [], "owner": {"reputation": 2231, "user_id": 1238868, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b9884f1eabc8587f2c9dfd2b1ccf9a6?s=128&d=identicon&r=PG", "display_name": "Michael Chaney", "link": "https://stackoverflow.com/users/1238868/michael-chaney"}, "is_accepted": true, "score": 3, "last_activity_date": 1464798322, "creation_date": 1464798322, "answer_id": 37574084, "question_id": 37573900, "link": "https://stackoverflow.com/questions/37573900/ruby-on-rails-has-many-through-association/37574084#37574084", "title": "ruby on rails. has many through association", "body": "<pre><code>has_many :movies, :through =&gt; categorizations\n</code></pre>\n\n<p>You need to have a colon before \"categorizations\":</p>\n\n<pre><code>has_many :movies, :through =&gt; :categorizations\n</code></pre>\n"}], "owner": {"reputation": 195, "user_id": 4945447, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5a66bffbc69cdc1f9332df1dcda9fd4?s=128&d=identicon&r=PG&f=1", "display_name": "hamza-jutt", "link": "https://stackoverflow.com/users/4945447/hamza-jutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 37574084, "answer_count": 1, "score": -1, "last_activity_date": 1502798141, "creation_date": 1464797737, "last_edit_date": 1502798141, "question_id": 37573900, "link": "https://stackoverflow.com/questions/37573900/ruby-on-rails-has-many-through-association", "title": "ruby on rails. has many through association", "body": "<p>I have a genre and movie models they are associated with has many through. when calling from browser i'm receiving error about categorization which is join model.<br/><br/>\nError:  undefined local variable or method `categorizations' for Class:0x00000007be0120>\n<br/>\nThis is the controller...</p>\n\n<pre><code>class GenreController &lt; ApplicationController\n\n   def updateList\n     result=Net::HTTP.get(URI.parse('url'))\n     json = JSON.parse(result)\n\n     json['genres'].each do |data|\n       obj = Genre.new(\n            tmdb_id: data['id'],\n            name: data['name']\n            )\n     end\n\n   end\n\nend\n</code></pre>\n\n<p>this is model</p>\n\n<pre><code>class Genre &lt; ActiveRecord::Base\n\n  has_many :categorizations\n  has_many :movies, :through =&gt; categorizations\n\nend\n</code></pre>\n\n<p>i know that there should be validations for this but right now i'm just populating genre table. There should be a create but i'm just trying to see the result.</p>\n\n<p><strong>EDIT</strong>:<br/></p>\n\n<p>Model for categorization</p>\n\n<pre><code>class Categorization &lt; ActiveRecord::Base\n\n  belongs_to :movie\n  belongs_to :genre\nend\n</code></pre>\n\n<p>Model for Movies</p>\n\n<pre><code>  class Movie &lt; ActiveRecord::Base\n\n      has_many :roles\n      has_many :actors, :through =&gt; :roles\n\n      has_many :watchlists\n      has_many :users, :through =&gt; :watchlists\n\n      has_many :categorizations\n      has_many :genres, :through =&gt; :categorizations\n\n      has_many :videos\n\n  end\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "charts", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 117, "user_id": 3100235, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/430a660f85cd96003da3e33e927bf2fe?s=128&d=identicon&r=PG&f=1", "display_name": "user3100235", "link": "https://stackoverflow.com/users/3100235/user3100235"}, "is_accepted": false, "score": 0, "last_activity_date": 1464812884, "creation_date": 1464812884, "answer_id": 37578176, "question_id": 37573646, "link": "https://stackoverflow.com/questions/37573646/which-charting-libraries-gems-for-ruby-allow-me-to-create-scatter-charts-using/37578176#37578176", "title": "Which charting libraries (gems) for ruby allow me to create scatter charts using time as the x axis?", "body": "<p>May be you can try <a href=\"http://www.advsofteng.com\" rel=\"nofollow\">ChartDirector</a>. There is a Ruby edition available.</p>\n"}], "owner": {"reputation": 53, "user_id": 3658362, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2272f009445ce9dacde2b2d775682d26?s=128&d=identicon&r=PG&f=1", "display_name": "user3658362", "link": "https://stackoverflow.com/users/3658362/user3658362"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 101, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1464812884, "creation_date": 1464796919, "question_id": 37573646, "link": "https://stackoverflow.com/questions/37573646/which-charting-libraries-gems-for-ruby-allow-me-to-create-scatter-charts-using", "title": "Which charting libraries (gems) for ruby allow me to create scatter charts using time as the x axis?", "body": "<p>So I love the (relatively new) <code>chartkick</code> gem for ruby -- its so stupid easy to use -- but it does not support scatter plots with time as the x axis. As it is, I'm stuck with charts of irregularly collected blood sugars in a line chart that look like this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Eha3W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Eha3W.png\" alt=\"blood sugar data\"></a></p>\n\n<p>Feel free to create your own account at bloodsugarcloud.com and start measurin! </p>\n\n<p>Anyway, this data visualization is misleading in a line chart format because the format presumes a continuity in the readings which is anything but the case.</p>\n\n<p>Have cracked open the <code>googlecharts</code> gem documentation and it does not appear at least at first to support this functionality either.</p>\n\n<p>I know I risk falling on the sword as far as karma points go for asking this question (do your worst!) but would greatly appreciate some suggestions on ruby charting libraries to use. I can sort of do javascript, so perhaps I could pass in unix epoch timestamps (integers) as the x values and get javascript to reinterpret those in the x axis interval labels as dates? That seems drastic. Please advise.</p>\n\n<p>EDIT: Some ideas</p>\n\n<ul>\n<li>perhaps I could use javascript to inform highcharts (which chartkick uses) to a.) create dots where each point is on the chart and b.) tell it NOT to connect the dots with lines. Also seems drastic.</li>\n</ul>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services"], "answers": [{"tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": true, "score": 1, "last_activity_date": 1464796896, "creation_date": 1464796896, "answer_id": 37573639, "question_id": 37573441, "link": "https://stackoverflow.com/questions/37573441/how-to-use-paperclip-to-retrieve-an-image-over-https-using-ror/37573639#37573639", "title": "How to use PaperClip to retrieve an image over HTTPS using RoR?", "body": "<p>theres an option for <code>has_attached_file</code> in your model that specifies the protocol to use</p>\n\n<pre><code># app/models/shop.rb\nhas_attached_file :image,\n                  storage: :s3,\n                  s3_protocol: :https #specify the protocol as https\n</code></pre>\n\n<p>the <a href=\"http://www.rubydoc.info/github/thoughtbot/paperclip/master/Paperclip/Storage/S3\" rel=\"nofollow\">documentation</a> explains the various options</p>\n"}], "owner": {"reputation": 628, "user_id": 2070577, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1ee42bbc4496d24a120db7048c462231?s=128&d=identicon&r=PG", "display_name": "Frederico Novack Amaral Pereir", "link": "https://stackoverflow.com/users/2070577/frederico-novack-amaral-pereir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 223, "favorite_count": 0, "accepted_answer_id": 37573639, "answer_count": 1, "score": 0, "last_activity_date": 1464797597, "creation_date": 1464796284, "last_edit_date": 1464797597, "question_id": 37573441, "link": "https://stackoverflow.com/questions/37573441/how-to-use-paperclip-to-retrieve-an-image-over-https-using-ror", "title": "How to use PaperClip to retrieve an image over HTTPS using RoR?", "body": "<p>I have an application which stores and retrieves images from Amazons <code>AWS</code>.</p>\n\n<p>In order to do that I'm using paperclip. </p>\n\n<p>I use an SSL certification for my application and so require all calls to use HTTPS.</p>\n\n<p>In order to get an image from Amazon <code>AWS</code> I do the following:</p>\n\n<pre><code>&lt;div class=\"col-md-6 col-md-offset-3 shopHeader\"&gt;\n  &lt;img class=\"img-responsive center-block\" widith=\"150px\" height=\"100px\" src=&lt;%= @shop.image.url(:original, timestamp:false) %&gt;&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>And when the page loads calls an URL such as  <a href=\"http://cardapiopsbrasil.s3.amazonaws.com/original/shop/221\" rel=\"nofollow\">http://cardapiopsbrasil.s3.amazonaws.com/original/shop/221</a></p>\n\n<p>Instead I need to use HTTPS by generating a link such as <a href=\"https://cardapiopsbrasil.s3.amazonaws.com/original/shop/221\" rel=\"nofollow\">https://cardapiopsbrasil.s3.amazonaws.com/original/shop/221</a></p>\n\n<p>However I'm receiving some warnings such as:</p>\n\n<pre><code>Mixed Content: The page at 'https://cardapioalfenas.com.br/' was loaded over HTTPS, but requested an insecure image 'http://cardapiopsbrasil.s3.amazonaws.com/original/shop/221'. This content should also be served over HTTPS.\n</code></pre>\n\n<p>Is there any way to tell Paperclip or my application to use HTTPS calls to get these images?</p>\n"}, {"tags": ["ruby", "shell", "argv"], "comments": [{"owner": {"reputation": 5582, "user_id": 27060, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/50576d785edd6db7d1999810863bcb01?s=128&d=identicon&r=PG", "display_name": "Reuben Mallaby", "link": "https://stackoverflow.com/users/27060/reuben-mallaby"}, "edited": false, "score": 0, "creation_date": 1464796442, "post_id": 37573428, "comment_id": 62634176, "body": "If you actually desire an answer please post all relevant code/files."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464800538, "post_id": 37573428, "comment_id": 62636652, "body": "At some point you&#39;ll want to take input from STDIN, though since you don&#39;t really transform anything here, I&#39;m confused as to what this program actually does. <code>echo ... &gt; .&#47;data_files&#47;list.txt</code> would be a lot easier."}], "answers": [{"comments": [{"owner": {"reputation": 901, "user_id": 3007294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc770b97c7c648be73003e9435424bac?s=128&d=identicon&r=PG&f=1", "display_name": "user3007294", "link": "https://stackoverflow.com/users/3007294/user3007294"}, "edited": false, "score": 0, "creation_date": 1464796580, "post_id": 37573456, "comment_id": 62634253, "body": "Thanks Mark! Great explanation (and I just tried it and it works!). Will accept in 9 minutes"}], "tags": [], "owner": {"reputation": 80721, "user_id": 797049, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/5f4f7a23e3d0134123a66015bdc4edd1?s=128&d=identicon&r=PG", "display_name": "Mark Reed", "link": "https://stackoverflow.com/users/797049/mark-reed"}, "is_accepted": true, "score": 2, "last_activity_date": 1464796346, "creation_date": 1464796346, "answer_id": 37573456, "question_id": 37573428, "link": "https://stackoverflow.com/questions/37573428/writing-file-with-argv-ruby/37573456#37573456", "title": "Writing File with ARGV Ruby", "body": "<p>The shell doesn't recognize <code>\\n</code> as a newline in regular single-quoted strings; you are passing literal backslash-n to Ruby. (And Ruby doesn't process input strings the way it does literal strings in Ruby code.)</p>\n\n<p>If your shell is bash, you can use <code>$'...'</code> ANSI strings instead:</p>\n\n<pre><code>ruby start.rb $'$100.00\\nteddy bear,$5.00\\nshirt,$22.75\\npants,$50.35'\n</code></pre>\n\n<p>Otherwise, you can use literal newlines:</p>\n\n<pre><code>ruby start.rb '$100.00\nteddy bear,$5.00\nshirt,$22.75\npants,$50.35'\n</code></pre>\n"}], "owner": {"reputation": 901, "user_id": 3007294, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/fc770b97c7c648be73003e9435424bac?s=128&d=identicon&r=PG&f=1", "display_name": "user3007294", "link": "https://stackoverflow.com/users/3007294/user3007294"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 37573456, "answer_count": 1, "score": 0, "last_activity_date": 1464796361, "creation_date": 1464796246, "last_edit_date": 1464796361, "question_id": 37573428, "link": "https://stackoverflow.com/questions/37573428/writing-file-with-argv-ruby", "title": "Writing File with ARGV Ruby", "body": "<p>I am trying to get my output to look like this: </p>\n\n<pre><code>$100.00\nteddy bear,$5.00\nshirt,$22.75\npants,$50.35\n</code></pre>\n\n<p>However, when I run the command to write the input to the file, I get the wrong format:</p>\n\n<pre><code>ruby start.rb '$100.00\\nteddy bear,$5.00\\nshirt,$22.75\\npants,$50.35'\n</code></pre>\n\n<p>start.rb:</p>\n\n<pre><code>input  = ARGV.first\nFile.open('./data_files/list.txt', 'w') {|file| file.write(input)}\n</code></pre>\n\n<p>Final output (in my data_files/list.txt file):</p>\n\n<pre><code>$100.00\\nteddy bear,$5.00\\nshirt,$22.75\\npants,$50.35\n</code></pre>\n\n<p>Any idea how to write the file so it appears in the correct format?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1464796009, "post_id": 37573245, "comment_id": 62633888, "body": "Could you show the request params or the controller log? And also you OrderMovie model?"}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "edited": false, "score": 0, "creation_date": 1464796968, "post_id": 37573245, "comment_id": 62634502, "body": "Provide the stack trace. It doesn&#39;t look like the error has happened in the method <code>payMovie</code> (which is invalid Ruby identifier BTW)."}, {"owner": {"reputation": 11, "user_id": 6224979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1085096518180096/picture?type=large", "display_name": "Sarah Kieninger", "link": "https://stackoverflow.com/users/6224979/sarah-kieninger"}, "edited": false, "score": 0, "creation_date": 1464797159, "post_id": 37573245, "comment_id": 62634615, "body": "why is it a invalid identifier?"}, {"owner": {"reputation": 11, "user_id": 6224979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1085096518180096/picture?type=large", "display_name": "Sarah Kieninger", "link": "https://stackoverflow.com/users/6224979/sarah-kieninger"}, "edited": false, "score": 0, "creation_date": 1464797214, "post_id": 37573245, "comment_id": 62634647, "body": "stack trace added above. thanks"}, {"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1464797337, "post_id": 37573245, "comment_id": 62634710, "body": "can you add the routes file, and the method <code>order_params</code> of the controller. this is a shot in the dark without those things, but it looks like this is a <code>show</code> route, and you&#39;re passing the value as <code>id</code> when it needs to be named <code>order</code>"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1464798118, "post_id": 37573245, "comment_id": 62635187, "body": "Please post the <code>order_params</code> method."}, {"owner": {"reputation": 11, "user_id": 6224979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1085096518180096/picture?type=large", "display_name": "Sarah Kieninger", "link": "https://stackoverflow.com/users/6224979/sarah-kieninger"}, "edited": false, "score": 0, "creation_date": 1465224834, "post_id": 37573245, "comment_id": 62799657, "body": "don&#39;t have a function order_params. routes added above"}], "owner": {"reputation": 11, "user_id": 6224979, "user_type": "registered", "profile_image": "https://graph.facebook.com/1085096518180096/picture?type=large", "display_name": "Sarah Kieninger", "link": "https://stackoverflow.com/users/6224979/sarah-kieninger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1465224805, "creation_date": 1464795786, "last_edit_date": 1465224805, "question_id": 37573245, "link": "https://stackoverflow.com/questions/37573245/rails-param-is-missing-or-the-value-is-empty-order", "title": "Rails param is missing or the value is empty: order", "body": "<p>I want to call a controller action in my rails application like this:</p>\n\n<pre><code>&lt;%= link_to image_tag(\"paypal.gif\", :margin =&gt; \"0\" ), {:controller =&gt; :orders, :action =&gt; :payMovie, :id =&gt; @movie.id}, :class=&gt;\"pull-right btn btn-default\" %&gt;\n</code></pre>\n\n<p>The controller looks like this:</p>\n\n<pre><code>class OrdersController &lt; ActionController::Base\n\n  ActionController::Parameters.permit_all_parameters = true\n  layout \"application\"\n  skip_before_action :user_logged_in\n\n  #Movie-Bestellung erstellen\n  def payMovie\n    @order = OrderMovie.new\n    @order.user &lt;&lt; User.find(session[:user_id])\n    @movie = Movie.find params[:id]\n\n    puts \"sssssssssssss\"\n    puts @movie.inspect\n\n    @order.price = @movie.movieprice\n    @order.currency = @movie.currency\n    @order.movie &lt;&lt; @movie\n    if @order.save\n      flash[:notice] = t(\"flash.saved\")\n      redirect_to :back\n    else\n      redirect_to :back\n    end\n  end\n\nend\n</code></pre>\n\n<p>But then I got this error:</p>\n\n<pre><code>ActionController::ParameterMissing in OrdersController#payMovie\nparam is missing or the value is empty: order\n</code></pre>\n\n<p>What is the problem in this case?</p>\n\n<p>Thanks at all</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>model:</p>\n\n<pre><code>class OrderMovie &lt; ActiveRecord::Base\n  has_one :users\n  has_one :movies\nend\n\n\n\nRequest\n\nParameters:\n\n{\"id\"=&gt;\"6\"}\n</code></pre>\n\n<p>The ID is the ID of the movie I search with the Movie.find params[:id]</p>\n\n<pre><code>actionpack (4.2.1) lib/action_controller/metal/strong_parameters.rb:249:in `require'\napp/controllers/orders_controller.rb:21:in `order_params'\napp/controllers/orders_controller.rb:9:in `payMovie'\nactionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:88:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'\nactionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'\nactionview (4.2.1) lib/action_view/rendering.rb:30:in `process'\nactionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'\nactionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\nactionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `call'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'\nactionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'\nactionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `each'\nactionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'\nrack (1.6.4) lib/rack/etag.rb:24:in `call'\nrack (1.6.4) lib/rack/conditionalget.rb:25:in `call'\nrack (1.6.4) lib/rack/head.rb:13:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'\nrack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'\nrack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'\nactiverecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'\nactiverecord (4.2.1) lib/active_record/migration.rb:378:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:88:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nweb-console (2.3.0) lib/web_console/middleware.rb:20:in `block in call'\nweb-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'\nweb-console (2.3.0) lib/web_console/middleware.rb:18:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'\nactivesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.2.1) lib/rails/rack/logger.rb:20:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\nrack (1.6.4) lib/rack/runtime.rb:18:in `call'\nactivesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'\nrack (1.6.4) lib/rack/sendfile.rb:113:in `call'\nrailties (4.2.1) lib/rails/engine.rb:518:in `call'\nrailties (4.2.1) lib/rails/application.rb:164:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nrack (1.6.4) lib/rack/content_length.rb:15:in `call'\nrack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'\n/home/felix/.rvm/rubies/ruby-2.0.0-p643/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'\n/home/felix/.rvm/rubies/ruby-2.0.0-p643/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'\n/home/felix/.rvm/rubies/ruby-2.0.0-p643/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'\nRequest\n\nParameters:\n\n{\"id\"=&gt;\"6\"}\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>routes.rb</p>\n\n<pre><code> resources :api_users, :as =&gt; :users\n\n  get '/:controller(/:action(/:id))'\n  post '/:controller(/:action(/:id))'\n  get '/' =&gt; 'startsites#index'\n</code></pre>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464797043, "post_id": 37573176, "comment_id": 62634547, "body": "Are duplicates allowed, e.g. <code>[&quot;RED&#39;&quot;, &quot;RED&quot;, &quot;GREEN&quot;, &quot;GREEN&quot;]</code>?"}, {"owner": {"reputation": 21, "user_id": 6217310, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5ad9fc98cb64407a5e81338e1dfe6312?s=128&d=identicon&r=PG&f=1", "display_name": "d_zero", "link": "https://stackoverflow.com/users/6217310/d-zero"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464797340, "post_id": 37573176, "comment_id": 62634714, "body": "Duplicates are allowed."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1464798309, "post_id": 37573176, "comment_id": 62635303, "body": "@Stefan, what is the wavelength of <code>&quot;RED&#39;&quot;</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1464808633, "post_id": 37573176, "comment_id": 62640975, "body": "@CarySwoveland uhm, well, <code>&#39;</code> most certainly denotes a complementary color. Yeah that&#39;s it, RED&#39; is CYAN. Definitely not a typo ;-)"}], "answers": [{"tags": [], "owner": {"reputation": 1116, "user_id": 573988, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/E2Tih.jpg?s=128&g=1", "display_name": "Erik Johansson", "link": "https://stackoverflow.com/users/573988/erik-johansson"}, "is_accepted": false, "score": 0, "last_activity_date": 1464795839, "creation_date": 1464795839, "answer_id": 37573270, "question_id": 37573176, "link": "https://stackoverflow.com/questions/37573176/how-to-check-if-any-elements-of-an-array-are-not-included-in-another-array/37573270#37573270", "title": "How to check if any elements of an array are not included in another array?", "body": "<p>You should have a look at the <code>Set</code> object and <code>subset?</code> function. </p>\n\n<p><a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/set/rdoc/Set.html\" rel=\"nofollow\">http://ruby-doc.org/stdlib-2.3.1/libdoc/set/rdoc/Set.html</a></p>\n\n<p>You can convert your arrays to Sets by using the <code>to_set</code> function on your array</p>\n"}, {"tags": [], "owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "is_accepted": true, "score": 2, "last_activity_date": 1464796477, "last_edit_date": 1464796477, "creation_date": 1464796222, "answer_id": 37573418, "question_id": 37573176, "link": "https://stackoverflow.com/questions/37573176/how-to-check-if-any-elements-of-an-array-are-not-included-in-another-array/37573418#37573418", "title": "How to check if any elements of an array are not included in another array?", "body": "<p>You could do the following to check if <code>code</code> has only elements from <code>@@colours</code></p>\n\n<pre><code>(code - @@colours).empty?\n</code></pre>\n\n<p>Above expression will be <code>true</code> if <code>code</code> contains only elements from <code>@@colours</code>, else it will be <code>false</code>.</p>\n\n<hr>\n\n<p>PS: In the code sample in question, <code>code</code> is once shown as containing input from <code>gets</code> and another time shown as an array of processed inputs.  In the above solution, I am assuming <code>code = [\"RED\", \"GREEN\", \"BLUE\", \"YELLOW\"]</code></p>\n"}, {"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1464796447, "post_id": 37573457, "comment_id": 62634180, "body": "it seems very similar with @WandMaker answer"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1464796345, "creation_date": 1464796345, "answer_id": 37573457, "question_id": 37573176, "link": "https://stackoverflow.com/questions/37573176/how-to-check-if-any-elements-of-an-array-are-not-included-in-another-array/37573457#37573457", "title": "How to check if any elements of an array are not included in another array?", "body": "<p>You could just subtract the allowed elements from the input. If the result isn't empty, then there was an element in the input that is not in the list of allowed values:</p>\n\n<pre><code>allowed = [1,2,3]\n\ninput = [1,2]\ninput - allowed #=&gt; []\n\ninput = [1,5]\ninput - allow   #=&gt; [5]\n</code></pre>\n\n<p>As a bonus this returns the element that is not allow and can be used in an error message.</p>\n"}], "owner": {"reputation": 21, "user_id": 6217310, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5ad9fc98cb64407a5e81338e1dfe6312?s=128&d=identicon&r=PG&f=1", "display_name": "d_zero", "link": "https://stackoverflow.com/users/6217310/d-zero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 37573418, "answer_count": 3, "score": 0, "last_activity_date": 1464797054, "creation_date": 1464795615, "last_edit_date": 1464797054, "question_id": 37573176, "link": "https://stackoverflow.com/questions/37573176/how-to-check-if-any-elements-of-an-array-are-not-included-in-another-array", "title": "How to check if any elements of an array are not included in another array?", "body": "<p>I'm making a player vs computer Mastermind (the board game) program as part of learning Ruby.</p>\n\n<p><em>If  you don't know Mastermind, basically it's a two-player game where one player creates a code of four colours (i.e. \"red red blue yellow\") and the opponent tries to guess that code.</em></p>\n\n<p>The game initializes with a set of available colours and an empty code:</p>\n\n<pre><code>@@colours = [\"RED\", \"BLUE\", \"YELLOW\", \"GREEN\", \"ORANGE\", \"WHITE\"]\n@code = []\n</code></pre>\n\n<p>I can ask the user to set a code like this:</p>\n\n<pre><code>puts \"Please set your code:\"\ncode = gets.chomp.downcase.split(\"\")\n@code &lt;&lt; code\n</code></pre>\n\n<p>The user inputs the code like so: <code>rgby</code> => <code>code = [\"RED\", \"GREEN\", \"BLUE\", \"YELLOW\"]</code>. </p>\n\n<p><em>(There will be a method which changes, i.e. \"r\" to \"RED\", please assume that happens somewhere in my program.)</em></p>\n\n<p>I want to make sure the player can only use colours included in <code>@@colours</code>, i.e. <code>pxgb</code> would not work.</p>\n\n<p>Pseudo-code would be along the lines of:</p>\n\n<blockquote>\n  <p>If all input colours are found in <code>@@colours</code>, update <code>@code</code>.</p>\n</blockquote>\n\n<p>or conversely</p>\n\n<blockquote>\n  <p>If any input colours are not found in <code>@@colours</code>, do not update <code>@code</code> (and possibly do something else).</p>\n</blockquote>\n\n<p>How do I write this? I'm not too familiar with error handling so I was trying to do it with out but I'm willing to learn if that's the best way to go.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "thor"], "comments": [{"owner": {"reputation": 6927, "user_id": 1546713, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VCDMo.jpg?s=128&g=1", "display_name": "azrosen92", "link": "https://stackoverflow.com/users/1546713/azrosen92"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1464896110, "post_id": 37572516, "comment_id": 62686151, "body": "Thank you @DaveSchweisguth"}], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 0, "last_activity_date": 1464931170, "last_edit_date": 1464931170, "creation_date": 1464897079, "answer_id": 37600888, "question_id": 37572516, "link": "https://stackoverflow.com/questions/37572516/running-rspec-for-rails-project-from-within-sub-project/37600888#37600888", "title": "Running RSpec for Rails project from within sub-project", "body": "<p>I don't think there's a way to get RSpec, or even bundler, to somehow use a different set of gems in the same Ruby process. You could probably figure out how to get bundler to load a <em>second</em> Gemfile full of gems in the same Ruby process, but that would eventually cause problems when your command-line tool and your Rails app needed mutually incompatible gems. (<a href=\"http://technology.indiegogo.com/2014/11/\" rel=\"nofollow\">Something like this has happened to me.</a>)</p>\n\n<p>Instead, just run the rspec command with <code>system</code> (or one of the many other ways to run executables that Ruby provides):</p>\n\n<pre><code>system \"bundle exec rspec #{specs_to_run.join(' ')}\",\n  chdir: File.expand_path(File.dirname($PROGRAM_NAME) + '/..')\n</code></pre>\n\n<p><code>system</code>'s return value (i.e. rspec's exit status) will tell you if the tests passed or failed.</p>\n"}], "owner": {"reputation": 6927, "user_id": 1546713, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/VCDMo.jpg?s=128&g=1", "display_name": "azrosen92", "link": "https://stackoverflow.com/users/1546713/azrosen92"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 107, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464931170, "creation_date": 1464793815, "last_edit_date": 1464897178, "question_id": 37572516, "link": "https://stackoverflow.com/questions/37572516/running-rspec-for-rails-project-from-within-sub-project", "title": "Running RSpec for Rails project from within sub-project", "body": "<p>I am writing a command line tool (using thor) for my Rails project that is supposed to retrieve a list of specs to run and then run them. However, this tool is in a subdirectory within my Rails project with its own Gemfile. The directory structure looks like this:</p>\n\n<pre><code>- rails_project\n  - Gemfile\n  - command_line_tool\n    - commands.rb\n    - Gemfile\n</code></pre>\n\n<p>The command in <code>commands.rb</code> calls the function:</p>\n\n<pre><code>def specs_command\n  specs_to_run = get_specs_to_run()\n  RSpec::Core::Runner.run(specs_to_run)\nend\n</code></pre>\n\n<p><code>rails_project</code> obviously has Rails in its <code>Gemfile</code> but <code>command_line_tool</code> does not, so when I run <code>specs_command</code> in <code>commands.rb</code>, it fails with the error <code>LoadError: cannot load such file -- rails</code> because it's trying to run RSpec specs in its parent directory. Is there a way to force RSpec to use the Rails dependency of another project? I would like to be able to do this without adding Rails as a dependency to my command line tool.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "owner": {"reputation": 2103, "user_id": 3162553, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/5a4b9cec47f016074898f79d29293d9b?s=128&d=identicon&r=PG&f=1", "display_name": "user3162553", "link": "https://stackoverflow.com/users/3162553/user3162553"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 98, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464793628, "creation_date": 1464793628, "question_id": 37572457, "link": "https://stackoverflow.com/questions/37572457/adding-a-one-to-many-relationship-on-a-bitmask-field-in-rails", "title": "Adding a one to many relationship on a bitmask field in rails", "body": "<p>I'm using an integer column in my model as a bitmask to store different potential properties about an object. I'm using a mask because there's a fixed number of categories that will never change so storing it as a record in a database isn't accurate.  However, there's potentially an unlimited number of subcategories that are related to the categories.  I'm having trouble understanding how this association would be set up.</p>\n\n<p>Let's say I have a product model that has 2 types of cost categories such as manufacture and installation. Each cost category will have at least 1 subcategory that is what went into the manufacture, what went into installation.  For example, manufacture might include the buying of a particular part but that is not part of the installation.  The problem is, how can a one-to-many relationship be set up between manufacture and a subcategory?  </p>\n\n<p>I have set up the product model to use bitmasks with this gem: <a href=\"https://github.com/joelmoss/bitmask_attributes\" rel=\"nofollow\">https://github.com/joelmoss/bitmask_attributes</a>.</p>\n\n<pre><code>class Product &lt; ActiveRecord::Base\n  bitmask :cost_categories, as: [:manufacture, :installation]\nend\n\nclass SubCategory &lt; ActiveRecord::Base\n  belongs_to ...\nend\n</code></pre>\n\n<p>I can easily add or check categories but I don't know how I can relate <code>:manufacture</code> or <code>:installation</code> to a separate model.</p>\n\n<p>I would like to be able to do something like this <code>Product.first.cost_categories.first.subcategories</code></p>\n\n<p>How can I add a subcategory relationship between the different bitmasked attributes? Is this possible? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464793693, "post_id": 37572331, "comment_id": 62632274, "body": "Do you want to use PostgreSQL? If yes, then install PostgreSQL before you install the <code>pg</code> gem. Otherwise remove the <code>pg</code> gem from your <code>Gemfile</code> and replace it with a gem for the database you want to use (<code>sqlite</code>, <code>mysql2</code>)."}, {"owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "edited": false, "score": 0, "creation_date": 1464793773, "post_id": 37572331, "comment_id": 62632326, "body": "This might help: <a href=\"http://stackoverflow.com/questions/6040583/cant-find-the-libpq-fe-h-header-when-trying-to-install-pg-gem\" title=\"cant find the libpq fe h header when trying to install pg gem\">stackoverflow.com/questions/6040583/&hellip;</a>"}], "answers": [{"comments": [{"owner": {"reputation": 331, "user_id": 3730857, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/653559ca626dd618577888f5e0cfbf75?s=128&d=identicon&r=PG&f=1", "display_name": "Rose", "link": "https://stackoverflow.com/users/3730857/rose"}, "edited": false, "score": 0, "creation_date": 1464795819, "post_id": 37572420, "comment_id": 62633769, "body": "I didn&#39;t think I would need the database, but that worked. Thanks!"}], "tags": [], "owner": {"reputation": 1887, "user_id": 4948732, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh4.googleusercontent.com/-ZnN3lJjklJg/AAAAAAAAAAI/AAAAAAAAAWE/zqGtDAyXfjo/photo.jpg?sz=128", "display_name": "thesecretmaster", "link": "https://stackoverflow.com/users/4948732/thesecretmaster"}, "is_accepted": true, "score": 0, "last_activity_date": 1479671893, "last_edit_date": 1479671893, "creation_date": 1464793515, "answer_id": 37572420, "question_id": 37572331, "link": "https://stackoverflow.com/questions/37572331/bundle-install-fails-without-postgresql/37572420#37572420", "title": "bundle install fails without postgresql", "body": "<p>Yes, in order to install the <code>pg</code> gem you must have postgresql installed. You can find downloads and install instruction on <a href=\"https://www.postgresql.org/download/\" rel=\"nofollow noreferrer\">their website</a>.</p>\n\n<p>Specifically it says you need a <code>pg_config</code> file, which I guess would be created upon installation.</p>\n"}], "owner": {"reputation": 331, "user_id": 3730857, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/653559ca626dd618577888f5e0cfbf75?s=128&d=identicon&r=PG&f=1", "display_name": "Rose", "link": "https://stackoverflow.com/users/3730857/rose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 459, "favorite_count": 0, "accepted_answer_id": 37572420, "answer_count": 1, "score": 0, "last_activity_date": 1479671893, "creation_date": 1464793220, "last_edit_date": 1495541233, "question_id": 37572331, "link": "https://stackoverflow.com/questions/37572331/bundle-install-fails-without-postgresql", "title": "bundle install fails without postgresql", "body": "<p>When I run <code>bundle install</code> I get this error:</p>\n\n<pre><code>Gem::Ext::BuildError: ERROR: Failed to build gem native extension.\n\ncurrent directory: /usr/local/lib/ruby/gems/2.3.0/gems/pg-0.18.4/ext\n/usr/local/opt/ruby/bin/ruby -r ./siteconf20160601-64492-1nt86nq.rb extconf.rb\nchecking for pg_config... no\nNo pg_config... trying anyway. If building fails, please try again with\n--with-pg-config=/path/to/pg_config\nchecking for libpq-fe.h... no\nCan't find the 'libpq-fe.h header\n*** extconf.rb failed ***\n\nCould not create Makefile due to some reason, probably lack of necessary \nlibraries and/or headers.  Check the mkmf.log file for more details.  You may\nneed configuration options.\n\n... [a long list of config options] ...\n\nAn error occurred while installing pg (0.18.4), and Bundler cannot continue.\nMake sure that `gem install pg -v '0.18.4'` succeeds before bundling.\n</code></pre>\n\n<p>Then when I try <code>gem install pg -v '0.18.4'</code> like it suggests I get the same error without the suggestion to run the command I just tried. I'm not running postgres and have never installed it, so I'm a bit confused about why this is happening.</p>\n\n<p>There is a similar question here, but again, I don't have postgresql. Do I need it? Question: <a href=\"https://stackoverflow.com/questions/22058310/gem-install-pg-v-0-12-2-error-on-mac\">gem install pg -v 0.12.2 error on mac</a></p>\n\n<p>Any help is appreciated. Thank you. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "grouped-collection-select"], "answers": [{"tags": [], "owner": {"reputation": 814, "user_id": 4088940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff71521ddfe58931cbe2e655394c0dca?s=128&d=identicon&r=PG&f=1", "display_name": "mlovic", "link": "https://stackoverflow.com/users/4088940/mlovic"}, "is_accepted": true, "score": 2, "last_activity_date": 1464794700, "last_edit_date": 1464794700, "creation_date": 1464793320, "answer_id": 37572362, "question_id": 37572252, "link": "https://stackoverflow.com/questions/37572252/collection-select-display-multiple-fields-in-dropdown/37572362#37572362", "title": "Collection_Select display multiple fields in dropdown", "body": "<p>You could add a method to your <code>Airport</code> model with the formatted string that you would like display. Something like:</p>\n\n<pre><code>def formatted_name\n  \"#{iata} | #{name} | #{icao}\"\nend\n</code></pre>\n\n<p>And then pass that method to <code>collection_select</code> instead of <code>:name</code>. So:</p>\n\n<pre><code>&lt;%= collection_select :claim, :d_airport_id, Airport.order('name'), :id, :formatted_name, {:prompt =&gt; true} %&gt;\n</code></pre>\n\n<p><br>\nSee the documentation <a href=\"http://www.rubydoc.info/docs/rails/4.1.7/ActionView%2FHelpers%2FFormOptionsHelper%3Acollection_select\" rel=\"nofollow\">here</a>. The argument in question is referred to as the <code>:text_method</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 5427611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ed0ix.jpg?s=128&g=1", "display_name": "Dearg", "link": "https://stackoverflow.com/users/5427611/dearg"}, "edited": false, "score": 0, "creation_date": 1464953368, "post_id": 37572392, "comment_id": 62709107, "body": "thank you for your answer and link too. Both answers seem to be pretty identical so i chose the first provided as the accepted answer. Thanks again."}], "tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": false, "score": 0, "last_activity_date": 1464793429, "last_edit_date": 1495541757, "creation_date": 1464793429, "answer_id": 37572392, "question_id": 37572252, "link": "https://stackoverflow.com/questions/37572252/collection-select-display-multiple-fields-in-dropdown/37572392#37572392", "title": "Collection_Select display multiple fields in dropdown", "body": "<p>The following should help you : <a href=\"https://stackoverflow.com/questions/22519540/rails-4-concatenate-fields-in-collection-select\">rails 4 -- concatenate fields in collection_select</a></p>\n\n<p>Basically, you create in your <code>Airport</code> model a new method (in <code>models/Airport.rb</code>):</p>\n\n<pre><code>def collection_select_nice_data\n  \"#{iata} | #{name} | #{icao}\"\nend\n</code></pre>\n\n<p>And in <code>_form.html.erb</code> you use the newly created <code>collection_select_nice_data</code>:</p>\n\n<pre><code>&lt;%= collection_select :claim, :d_airport_id, Airport.order('name'), :id, :collection_select_nice_data, {:prompt =&gt; true} %&gt;\n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 5427611, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ed0ix.jpg?s=128&g=1", "display_name": "Dearg", "link": "https://stackoverflow.com/users/5427611/dearg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1532, "favorite_count": 1, "accepted_answer_id": 37572362, "answer_count": 2, "score": 2, "last_activity_date": 1464796040, "creation_date": 1464793022, "last_edit_date": 1464796040, "question_id": 37572252, "link": "https://stackoverflow.com/questions/37572252/collection-select-display-multiple-fields-in-dropdown", "title": "Collection_Select display multiple fields in dropdown", "body": "<p>I'm using collection_select which connects to my Airports model.</p>\n\n<p><strong>Claim</strong></p>\n\n<pre><code>belongs_to  :departure_airport, :class_name =&gt; 'Airport', :foreign_key =&gt; 'd_airport_id'\nbelongs_to  :arrival_airport,   :class_name =&gt; 'Airport', :foreign_key =&gt; 'a_airport_id'\n</code></pre>\n\n<p><strong>Airport</strong></p>\n\n<pre><code>has_many :claims\n</code></pre>\n\n<p><strong>_form.html.erb</strong></p>\n\n<pre><code>&lt;%= collection_select :claim, :d_airport_id, Airport.order('name'), :id, :name, {:prompt =&gt; true} %&gt;\n</code></pre>\n\n<hr>\n\n<p>Currently the dropdown displays \"Manchester International Airport\" (For example) however i would like to include other field names from the same model.</p>\n\n<p>MAN | Manchester International Airport | EGCC (Desired result)</p>\n\n<p>MAN &amp; EGCC are both columns in the Airport model named iata &amp; icao respectfully.</p>\n\n<hr>\n\n<p>I will continue to only save the airport_id however for display purposes that additional information in the dropdown would be great.</p>\n"}, {"tags": ["ruby", "haml", "erb"], "answers": [{"tags": [], "owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "is_accepted": false, "score": 1, "last_activity_date": 1464793366, "last_edit_date": 1464793366, "creation_date": 1464792904, "answer_id": 37572203, "question_id": 37571693, "link": "https://stackoverflow.com/questions/37571693/error-after-migration-from-erb-to-haml/37572203#37572203", "title": "Error after migration from ERB to HAML", "body": "<p>You are not using HAML syntax.</p>\n\n<p>Instead of</p>\n\n<pre><code>= content_tag :tr do                                                                                            \n  concat content_tag(:td, t('consumer.labels.secondary_phone_number'))                                        \n  concat content_tag(:td, display_phone_number(consumer.secondary_isd_code, consumer.secondary_phone_number)) |\nend if consumer.secondary_phone_number\n</code></pre>\n\n<p>write</p>\n\n<pre><code>- if consumer.secondary_phone_number\n  %tr\n    %td= t('consumer.labels.secondary_phone_number'))\n    %td= display_phone_number(consumer.secondary_isd_code, consumer.secondary_phone_number))\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 6410166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf09c8d430f123cbd366b95393316cf9?s=128&d=identicon&r=PG&f=1", "display_name": "Kristiyan Atanasov", "link": "https://stackoverflow.com/users/6410166/kristiyan-atanasov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 26, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1464793366, "creation_date": 1464791668, "question_id": 37571693, "link": "https://stackoverflow.com/questions/37571693/error-after-migration-from-erb-to-haml", "title": "Error after migration from ERB to HAML", "body": "<p>The working ERB before the convert :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>&lt;table class=\"tabularData tabularData--tableInner\"&gt;\r\n   &lt;tbody&gt;\r\n     &lt;%= content_tag :tr do\r\n       concat content_tag(:td, t('consumer.labels.account_number'), width: \"180\")\r\n       concat content_tag(:td, consumer.account_number)\r\n     end if consumer.account_number %&gt;\r\n \r\n     &lt;%= content_tag :tr do\r\n       concat content_tag(:td, t('consumer.labels.paybyvouchers_id'))\r\n       concat content_tag(:td, consumer.paybyvouchers_id)\r\n     end if consumer.paybyvouchers_id %&gt;\r\n \r\n     &lt;%= content_tag :tr do\r\n       concat content_tag(:td, t('consumer.labels.created_on'), width: \"180\")\r\n       concat content_tag(:td, display_date(consumer.created_at)[:defaultFormat])\r\n     end %&gt;\r\n \r\n     &lt;%= content_tag :tr do\r\n       concat content_tag(:td, t('consumer.labels.date_of_birth'))\r\n       concat content_tag(:td, display_date(consumer.date_of_birth)[:defaultFormat])\r\n     end %&gt;\r\n \r\n     &lt;%= content_tag :tr do\r\n       concat content_tag(:td, t('consumer.labels.age'))\r\n       concat content_tag(:td, consumer.age.value)\r\n     end %&gt;\r\n \r\n     &lt;%= content_tag :tr do\r\n       concat content_tag(:td, t('consumer.labels.preferred_language'))\r\n       concat content_tag(:td, consumer.language.name)\r\n     end %&gt;\r\n \r\n     &lt;%= content_tag :tr do\r\n       concat content_tag(:td, t('consumer.labels.country_of_nationality'))\r\n       concat content_tag(:td, consumer.country_of_nationality.name)\r\n     end %&gt;\r\n \r\n     &lt;%= content_tag :tr do\r\n       content_tag(:td, t('consumer.labels.address')) +\r\n       content_tag(:td) do\r\n         concat consumer.address_line_1\r\n         if consumer.address_line_2.present?\r\n           concat tag(:br, nil, true)\r\n           concat consumer.address_line_2\r\n         end\r\n         concat tag(:br, nil, true)\r\n         concat consumer.postcode\r\n         concat tag(:br, nil, true)\r\n         concat consumer.city\r\n         if consumer.state.present?\r\n           concat tag(:br, nil, true)\r\n           concat consumer.state\r\n         end\r\n         concat tag(:br, nil, true)\r\n         concat consumer.country.name\r\n       end\r\n     end %&gt;\r\n \r\n     &lt;%= content_tag :tr do\r\n       concat content_tag(:td, t('consumer.labels.primary_phone_number'))\r\n       concat content_tag(:td, display_phone_number(consumer.primary_isd_code, consumer.primary_phone_number))\r\n     end %&gt;\r\n \r\n     &lt;%= content_tag :tr do\r\n       concat content_tag(:td, t('consumer.labels.secondary_phone_number'))\r\n       concat content_tag(:td, display_phone_number(consumer.secondary_isd_code, consumer.secondary_phone_number))\r\n     end if consumer.secondary_phone_number %&gt;\r\n   &lt;/tbody&gt;\r\n &lt;/table&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Not working HAML after the convert:</p>\n\n<p>And the error : /Users/app/views/shared/_consumer_personal_details_table.html.haml:3: syntax error, unexpected tIDENTIFIER, expecting keyword_end ..._number'), width: \"180\") concat content_tag(:td, consumer.ac... ... ^ </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>%table.tabularData.tabularData--tableInner\r\n  %tbody\r\n    = content_tag :tr do                                                           |\r\n        concat content_tag(:td, t('consumer.labels.account_number'), width: \"180\") |\r\n        concat content_tag(:td, consumer.account_number)                           |\r\n      end if consumer.account_number                                               |\r\n    = content_tag :tr do                                               |\r\n        concat content_tag(:td, t('consumer.labels.paybyvouchers_id')) |\r\n        concat content_tag(:td, consumer.paybyvouchers_id)             |\r\n      end if consumer.paybyvouchers_id                                 |\r\n    = content_tag :tr do                                                           |\r\n        concat content_tag(:td, t('consumer.labels.created_on'), width: \"180\")     |\r\n        concat content_tag(:td, display_date(consumer.created_at)[:defaultFormat]) |\r\n      end                                                                          |\r\n    = content_tag :tr do                                                              |\r\n        concat content_tag(:td, t('consumer.labels.date_of_birth'))                   |\r\n        concat content_tag(:td, display_date(consumer.date_of_birth)[:defaultFormat]) |\r\n      end                                                                             |\r\n    = content_tag :tr do                                  |\r\n        concat content_tag(:td, t('consumer.labels.age')) |\r\n        concat content_tag(:td, consumer.age.value)       |\r\n      end                                                 |\r\n    = content_tag :tr do                                                 |\r\n        concat content_tag(:td, t('consumer.labels.preferred_language')) |\r\n        concat content_tag(:td, consumer.language.name)                  |\r\n      end                                                                |\r\n    = content_tag :tr do                                                     |\r\n        concat content_tag(:td, t('consumer.labels.country_of_nationality')) |\r\n        concat content_tag(:td, consumer.country_of_nationality.name)        |\r\n      end                                                                    |\r\n    = content_tag :tr do                                 |\r\n        content_tag(:td, t('consumer.labels.address')) + |\r\n        content_tag(:td) do                              |\r\n          concat consumer.address_line_1                 |\r\n          if consumer.address_line_2.present?            |\r\n            concat tag(:br, nil, true)                   |\r\n            concat consumer.address_line_2               |\r\n          end                                            |\r\n          concat tag(:br, nil, true)                     |\r\n          concat consumer.postcode                       |\r\n          concat tag(:br, nil, true)                     |\r\n          concat consumer.city                           |\r\n          if consumer.state.present?                     |\r\n            concat tag(:br, nil, true)                   |\r\n            concat consumer.state                        |\r\n          end                                            |\r\n          concat tag(:br, nil, true)                     |\r\n          concat consumer.country.name                   |\r\n        end                                              |\r\n      end                                                |\r\n    = content_tag :tr do                                                                                        |\r\n        concat content_tag(:td, t('consumer.labels.primary_phone_number'))                                      |\r\n        concat content_tag(:td, display_phone_number(consumer.primary_isd_code, consumer.primary_phone_number)) |\r\n      end                                                                                                       |\r\n    = content_tag :tr do                                                                                            |\r\n        concat content_tag(:td, t('consumer.labels.secondary_phone_number'))                                        |\r\n        concat content_tag(:td, display_phone_number(consumer.secondary_isd_code, consumer.secondary_phone_number)) |\r\n      end if consumer.secondary_phone_number      </code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby", "file", "scripting", "copy"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464792857, "post_id": 37571258, "comment_id": 62631656, "body": "BTW, <code>File.exists?</code> is deprecated, you should use <code>File.exist?</code>"}, {"owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464803608, "post_id": 37571258, "comment_id": 62638438, "body": "Thanks, Stephan! I changed it. It seems to be working except for the overwrite problem in the destination directory."}], "answers": [{"comments": [{"owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "edited": false, "score": 0, "creation_date": 1464792010, "post_id": 37571557, "comment_id": 62631012, "body": "Thanks! By full name, do you mean I need to check the file by it&#39;s full path? What is File.join doing here?"}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "reply_to_user": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "edited": false, "score": 0, "creation_date": 1464792662, "post_id": 37571557, "comment_id": 62631509, "body": "@MaileThiesen it appends 3-rd folder path before file name"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "edited": false, "score": 0, "creation_date": 1464792781, "post_id": 37571557, "comment_id": 62631585, "body": "@MaileThiesen <code>glob</code> return file names (paths) relative to the library path. Calling <code>File.exist?</code> without prepending that path (that&#39;s what <code>join</code> is doing), checks if the file exists in the <i>current</i> directory."}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464792885, "post_id": 37571557, "comment_id": 62631673, "body": "@Stefan yes, in current, but you says that it rewrites a file in any case, event when it exists in 3rd folder too"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464794068, "post_id": 37571557, "comment_id": 62632530, "body": "@\u041c\u0430\u043b\u044a\u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a <i>&quot;you says that it rewrites a file in any case&quot;</i> did I? Sorry, I don&#39;t understand your comment :-)"}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464794211, "post_id": 37571557, "comment_id": 62632621, "body": "@Stefan <code>The code still overwrites the files in the third directory even if they already exist.</code> what is it in your post?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464794494, "post_id": 37571557, "comment_id": 62632846, "body": "Maile Thiesen posted the question, not me. I just added a comment to explain what <code>File.join</code> is doing in your code."}, {"owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "edited": false, "score": 0, "creation_date": 1465222907, "post_id": 37571557, "comment_id": 62798346, "body": "I refactored the code, but now I&#39;m getting a no method error. I can&#39;t figure out why..."}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "reply_to_user": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "edited": false, "score": 0, "creation_date": 1465309702, "post_id": 37571557, "comment_id": 62841209, "body": "@MaileThiesen which one?"}], "tags": [], "owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "is_accepted": false, "score": 0, "last_activity_date": 1464794552, "last_edit_date": 1464794552, "creation_date": 1464791295, "answer_id": 37571557, "question_id": 37571258, "link": "https://stackoverflow.com/questions/37571258/ruby-how-to-copy-files-to-a-specific-directory-if-the-file-does-not-exist/37571557#37571557", "title": "RUBY - How to copy files to a specific directory if the file does not exist", "body": "<p>It seems you are validating files by its just file names, but you have to check them by full name, like this:</p>\n\n<pre><code>existing_file = File.basename(existing_file)\n\nif path.include?(File.basename(filename))\n   FileUtils.cp(path, library_path_3) unless File.exist?(File.join(library_path_3, existing_file))\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "edited": false, "score": 0, "creation_date": 1465223956, "post_id": 37576419, "comment_id": 62799074, "body": "This worked! when I added &#39;destination.map&#39; and underscores back into dir names. Thank you so much!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "edited": false, "score": 0, "creation_date": 1465227255, "post_id": 37576419, "comment_id": 62801353, "body": "Thanks for the catch, Maile."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1465227069, "last_edit_date": 1465227069, "creation_date": 1464806384, "answer_id": 37576419, "question_id": 37571258, "link": "https://stackoverflow.com/questions/37571258/ruby-how-to-copy-files-to-a-specific-directory-if-the-file-does-not-exist/37576419#37576419", "title": "RUBY - How to copy files to a specific directory if the file does not exist", "body": "<pre><code>bn = dir1.map { |fn| File.basename fn } - destination.map { |fn| File.basename fn }\ndir2.each { |fn| FileUtils.cp(fn, library_path_3) if bn.include? File.basename(fn) }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "is_accepted": false, "score": 0, "last_activity_date": 1465223052, "creation_date": 1465223052, "answer_id": 37659945, "question_id": 37571258, "link": "https://stackoverflow.com/questions/37571258/ruby-how-to-copy-files-to-a-specific-directory-if-the-file-does-not-exist/37659945#37659945", "title": "RUBY - How to copy files to a specific directory if the file does not exist", "body": "<pre><code>dir_1.each do |file|\n  filename = File.basename(file)\n  if exists_in_dir2?(filename) &amp;&amp; exists_in_dir3?(filename) == false\n    copy_to_destination(filename) \n  end\nend\n\ndef copy_to_destination(filename)\n    File.copy(filename, \"#{library_path_3}/{filename}\")\nend\n\ndef exists_in_dir2?(filename)\n    dir_2.each do |path|\n        path.include?(\"#{filename}\")\n    end\nend\n\ndef exists_in_dir3?(filename)\n    destination.each do |existing_file|\n        File.exist?(\"#{filename}\")\n    end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "is_accepted": false, "score": 0, "last_activity_date": 1465307149, "creation_date": 1465307149, "answer_id": 37681206, "question_id": 37571258, "link": "https://stackoverflow.com/questions/37571258/ruby-how-to-copy-files-to-a-specific-directory-if-the-file-does-not-exist/37681206#37681206", "title": "RUBY - How to copy files to a specific directory if the file does not exist", "body": "<p>Here's the final script that is working based on @Cary Swoveland's answer. Thanks all!</p>\n\n<pre><code>require 'FileUtils'\n\nlibrary_path_1 = ARGV[0]\nlibrary_path_2 = ARGV[1]\nlibrary_path_3 = ARGV[2]\n\n# check the managed media folder for files, look in original capture scratch for all files in managed media.\n# if files in managed media exist in original capture scratch, copy them to the destination folder.\n\nmanaged_media_folder = Dir.glob(library_path_1 + \"/**/*\").select{ |x| File.file? x }\noriginal_capture_scratch = Dir.glob(library_path_2 + \"/**/*\").select{ |x| File.file? x }\ndestination = Dir.glob(library_path_3 + \"/**/*\").select{ |x| File.file? x }\n\nbn = managed_media_folder.map { |fn| File.basename fn } - destination.map { |fn| File.basename fn }\noriginal_capture_scratch.each do |fn| \n  if bn.include? File.basename(fn)\n    puts fn\n    FileUtils.cp(fn, library_path_3) \n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 5833718, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh6.googleusercontent.com/-J_fDaNYMJqE/AAAAAAAAAAI/AAAAAAAABTA/KJEa4-Tqo2U/photo.jpg?sz=128", "display_name": "Maile Thiesen", "link": "https://stackoverflow.com/users/5833718/maile-thiesen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1863, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1465307149, "creation_date": 1464790502, "last_edit_date": 1464790825, "question_id": 37571258, "link": "https://stackoverflow.com/questions/37571258/ruby-how-to-copy-files-to-a-specific-directory-if-the-file-does-not-exist", "title": "RUBY - How to copy files to a specific directory if the file does not exist", "body": "<p>I think this is a pretty simple question, but I'm stuck. </p>\n\n<p>I'm trying to write a script to look in the first directory, then check a second directory to see if there are matching files. If the files do match, I need to copy the files from the second directory to a third directory, only if they do not already exist in the third directory. </p>\n\n<p>Here's a copy of what I have so far. The code still overwrites the files in the third directory even if they already exist. What am I doing wrong?</p>\n\n<p>Thanks!</p>\n\n<pre><code>#!/usr/bin/ruby\n\nrequire 'FileUtils'\n\nlibrary_path_1 = ARGV[0]\nlibrary_path_2 = ARGV[1]\nlibrary_path_3 = ARGV[2]\n\ndir_1 = Dir.glob(library_path_1 + \"/**/*\").select{ |x| File.file? x }\ndir_2 = Dir.glob(library_path_2 + \"/**/*\").select{ |x| File.file? x }\ndestination = Dir.glob(library_path_3 + \"/**/*\").select{ |x| File.file? x }\n\ndir_1.each do |filename|\n  dir_2.each do |path|\n    destination.each do |existing_file|\n\n      existing_file = File.basename(existing_file)\n\n      if path.include?(File.basename(filename))\n        FileUtils.cp(path, library_path_3) unless File.exists?(existing_file)\n      end\n\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "linux"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1464793702, "post_id": 37570460, "comment_id": 62632278, "body": "<code>ls -l ~&#47;.bundle&#47;cache&#47;compact_index&#47;</code> and see the permissions."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1464794216, "post_id": 37570460, "comment_id": 62632622, "body": "The permission of the sub directories should be at most 1777 (<code>drwxrwxrwt</code>), which is world writable and sticky. BTW mine is 0755 (<code>drwxr-xr-x</code>)."}, {"owner": {"reputation": 111, "user_id": 4665321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-MtIllGFSv7M/AAAAAAAAAAI/AAAAAAAAABQ/gJ1fhz4QuUQ/photo.jpg?sz=128", "display_name": "echo3", "link": "https://stackoverflow.com/users/4665321/echo3"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1464797814, "post_id": 37570460, "comment_id": 62635004, "body": "I have tried modifying the permissions to no avail. the output of your ls is:   drwxrwxrwx 1 rand 1000 8192 Jun  1 12:15 rubygems.org.443.29b0360b937aa4d161703e6160654e47"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1464822463, "post_id": 37570460, "comment_id": 62647274, "body": "That&#39;s the problem. <code>drwxrwxrwx</code> (0777) means anyone can create/remove/move any file in that dir. <code>drwxrwxrwt</code> (1777, note the trailing <code>t</code>) means anyone can create file in that dir, but only the creator of that file can remove/move it."}], "answers": [{"comments": [{"owner": {"reputation": 303, "user_id": 484360, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/9LxRQ.jpg?s=128&g=1", "display_name": "mikedhart", "link": "https://stackoverflow.com/users/484360/mikedhart"}, "edited": false, "score": 1, "creation_date": 1466691174, "post_id": 37580448, "comment_id": 63431891, "body": "Worked for me after I added the -R flag. So, my final command looked like this:  <code>chmod 0755 ~&#47;.bundle&#47;cache&#47;compact_index&#47;rubygems.org.443.29b0360b937aa&zwnj;&#8203;4d161703e6160654e47 -R</code>"}, {"owner": {"reputation": 1521, "user_id": 1274846, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/048371ccb94bbd3aae9ac0ca20c0a31c?s=128&d=identicon&r=PG", "display_name": "Trinculo", "link": "https://stackoverflow.com/users/1274846/trinculo"}, "reply_to_user": {"reputation": 303, "user_id": 484360, "user_type": "registered", "accept_rate": 14, "profile_image": "https://i.stack.imgur.com/9LxRQ.jpg?s=128&g=1", "display_name": "mikedhart", "link": "https://stackoverflow.com/users/484360/mikedhart"}, "edited": false, "score": 0, "creation_date": 1466787969, "post_id": 37580448, "comment_id": 63479143, "body": "@mikedhart - Thanks, mine did not work without the -R switch"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 4, "last_activity_date": 1464824657, "last_edit_date": 1464824657, "creation_date": 1464824230, "answer_id": 37580448, "question_id": 37570460, "link": "https://stackoverflow.com/questions/37570460/argumenterror-parent-directory-is-world-writable-but-not-sticky-bundle-install/37580448#37580448", "title": "ArgumentError: parent directory is world writable but not sticky (bundle install)", "body": "<p>First, run command</p>\n\n<pre><code>ls -l ~/.bundle/cache/compact_index/\n</code></pre>\n\n<p>You should see something like</p>\n\n<pre><code>drwxr-xr-x  3 myname  staff  102 Jun  1 23:03 rubygems.org.443.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n</code></pre>\n\n<p>(I'm a miserable Chinese programmer so my folder is <code>ruby.taobao.org.443.07113fbafd9bf5f337f3f6cee4b3a723</code>. I guess the dir name is <code>&lt;rubygems source domain&gt;.&lt;rubygems source port (443 for HTTPS)&gt;.&lt;checksum&gt;</code>)</p>\n\n<p>Pay attention to the <code>drwxr-xr-x</code> part, and make sure it's <strong>NOT</strong> <code>drwxrwxrwx</code>.</p>\n\n<p>If it is <code>drwxrwxrwx</code>, then change it by the command</p>\n\n<pre><code>chmod 0755 rubygems.org.443.xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx\n</code></pre>\n\n<p><code>drwxrwxrwx</code> (0777) means anyone can create any file in that dir (<strong>world writable</strong>) as well as remove/move them (<strong>not sticky</strong>). Bundler (>= 1.12.4) uses <code>compact_index</code> which in turn uses <code>Dir::mktmpdir</code> to create sub directories in that dir.</p>\n\n<p>For security reason, the method <code>Dir::mktmpdir</code> verifies the permission of the parent dir of the to-be-created tmp dir. If the permission is 0777 (drwxrwxrwx) then you will see this error because it's insecure.</p>\n\n<p>0755 (drwxr-xr-x) is fine because only the owner (user) of that directory can create/delete/move files or sub directories in that dir (not world writable). Anyone else can only list their information.</p>\n\n<p>1777 (drwxrwxrwt) is also fine because anyone can create file or sub directory in that dir (world writable), but only the creator of that file can remove/move it (<strong>sticky</strong>).</p>\n"}, {"comments": [{"owner": {"reputation": 2213, "user_id": 5157221, "user_type": "registered", "accept_rate": 70, "profile_image": "https://lh4.googleusercontent.com/-YW9dXs0bMLY/AAAAAAAAAAI/AAAAAAAAD3E/cEQZYkX5qWw/photo.jpg?sz=128", "display_name": "Suriyaa", "link": "https://stackoverflow.com/users/5157221/suriyaa"}, "edited": false, "score": 5, "creation_date": 1470828955, "post_id": 37632467, "comment_id": 65106147, "body": "This worked for me on &quot;Bash on Ubuntu&quot; on Windows 10, too!"}], "tags": [], "owner": {"reputation": 151, "user_id": 6423533, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/24aa76d664783ff2886ca81d9ff177cf?s=128&d=identicon&r=PG&f=1", "display_name": "baocheng liao", "link": "https://stackoverflow.com/users/6423533/baocheng-liao"}, "is_accepted": false, "score": 11, "last_activity_date": 1465057325, "creation_date": 1465057325, "answer_id": 37632467, "question_id": 37570460, "link": "https://stackoverflow.com/questions/37570460/argumenterror-parent-directory-is-world-writable-but-not-sticky-bundle-install/37632467#37632467", "title": "ArgumentError: parent directory is world writable but not sticky (bundle install)", "body": "<p>Try this:</p>\n\n<p><code>chmod +t -R ~/.bundle/cache</code></p>\n\n<p>it works for me.</p>\n"}, {"tags": [], "owner": {"reputation": 4279, "user_id": 1191830, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/IV49t.jpg?s=128&g=1", "display_name": "mpalencia", "link": "https://stackoverflow.com/users/1191830/mpalencia"}, "is_accepted": false, "score": 0, "last_activity_date": 1467018738, "creation_date": 1467018738, "answer_id": 38050003, "question_id": 37570460, "link": "https://stackoverflow.com/questions/37570460/argumenterror-parent-directory-is-world-writable-but-not-sticky-bundle-install/38050003#38050003", "title": "ArgumentError: parent directory is world writable but not sticky (bundle install)", "body": "<p>This worked for me</p>\n\n<pre><code>sudo chmod +t -R ~/.bundle/cache/compact_index/\n</code></pre>\n"}], "owner": {"reputation": 111, "user_id": 4665321, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh4.googleusercontent.com/-MtIllGFSv7M/AAAAAAAAAAI/AAAAAAAAABQ/gJ1fhz4QuUQ/photo.jpg?sz=128", "display_name": "echo3", "link": "https://stackoverflow.com/users/4665321/echo3"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 2, "accepted_answer_id": 37580448, "answer_count": 3, "score": 7, "last_activity_date": 1467018738, "creation_date": 1464788470, "question_id": 37570460, "link": "https://stackoverflow.com/questions/37570460/argumenterror-parent-directory-is-world-writable-but-not-sticky-bundle-install", "title": "ArgumentError: parent directory is world writable but not sticky (bundle install)", "body": "<p><a href=\"https://github.com/bundler/bundler/issues/4599\" rel=\"noreferrer\">Link to github for error printout</a></p>\n\n<p>When i try to bundle install I receive the above error. I have tried what other posts suggest and the github community doesn't know the answer.</p>\n\n<p>I am running Arch and am using zsh for my shell. </p>\n\n<p>Updated Environment:</p>\n\n<blockquote>\n  <p>Bundler   1.12.5</p>\n  \n  <p>Rubygems  2.5.1   </p>\n  \n  <p>Ruby 2.3.1p112 (2016-04-26 revision 54768)[x86_64-linux]</p>\n  \n  <p>GEM_HOME  /usr/lib/ruby/gems/2.3.0   </p>\n  \n  <p>GEM_PATH /usr/lib/ruby/gems/2.3.0:/home/.gem/ruby/2.3.0  </p>\n  \n  <p>Git       2.8.3  </p>\n  \n  <p>open_gem (1.5.0)</p>\n</blockquote>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "edited": false, "score": 1, "creation_date": 1464787487, "post_id": 37570011, "comment_id": 62627279, "body": "try running gem update --system before anything else"}, {"owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "reply_to_user": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "edited": false, "score": 0, "creation_date": 1464787720, "post_id": 37570011, "comment_id": 62627485, "body": "@Boltz0r Thank you so much,I will try\u2026."}, {"owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "reply_to_user": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "edited": false, "score": 0, "creation_date": 1464787816, "post_id": 37570011, "comment_id": 62627560, "body": "@Boltz0r But the same error showed \u2026."}, {"owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "edited": false, "score": 1, "creation_date": 1464787876, "post_id": 37570011, "comment_id": 62627605, "body": "i think it&#39;s your rubygems host thats wrong... give me a second"}, {"owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "edited": false, "score": 1, "creation_date": 1464788045, "post_id": 37570011, "comment_id": 62627744, "body": "bundle config mirror.<a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a>"}, {"owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "edited": false, "score": 1, "creation_date": 1464788249, "post_id": 37570011, "comment_id": 62627919, "body": "show me your gemfile please"}, {"owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "reply_to_user": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "edited": false, "score": 0, "creation_date": 1464790785, "post_id": 37570011, "comment_id": 62630070, "body": "Ok, @Boltz0r   Based on your advice solved it..."}], "answers": [{"comments": [{"owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "edited": false, "score": 0, "creation_date": 1464791088, "post_id": 37571391, "comment_id": 62630305, "body": "Yeah perhaps that\u2019s the root cause .How to learn it ?Give me some advice."}, {"owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "edited": false, "score": 0, "creation_date": 1464791614, "post_id": 37571391, "comment_id": 62630701, "body": "But How to change the mirror ,same error occurred  when installing sqlite3\u2026@BoltzOr"}, {"owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "reply_to_user": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "edited": false, "score": 1, "creation_date": 1464791652, "post_id": 37571391, "comment_id": 62630732, "body": "in your gemfile you have a line saying source &#39;xxxxxxx&#39; change it to source &#39; &#39;<a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a>&#39;"}, {"owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "edited": false, "score": 0, "creation_date": 1464792325, "post_id": 37571391, "comment_id": 62631254, "body": "I tried this command line order.gem sources -remove <a href=\"https://ruby.taobao.org\" rel=\"nofollow noreferrer\">ruby.taobao.org</a> The information is source emove not present in cache bogon:blog zhaoxinqiang$ gem sources -a <a href=\"https://rubygems.org\" rel=\"nofollow noreferrer\">rubygems.org</a> the information is \u201cEPIPE: Broken pipe - SSL_connect (<a href=\"https://rubygems.org/specs.4.8.gz\" rel=\"nofollow noreferrer\">rubygems.org/specs.4.8.gz</a>)&quot;"}, {"owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "edited": false, "score": 0, "creation_date": 1464796831, "post_id": 37571391, "comment_id": 62634418, "body": "@BoltzOr change the source of gem ,but it cannot work well.I set the source as you said,but it told me failed to open TCP connection to rubygems.global.ssl.fastly.net:443 (Connection reset by peer - connect(2) for &quot;rubygems.global.ssl.fastly.net&quot; port 443)\u2026\u2026."}, {"owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "edited": false, "score": 0, "creation_date": 1464800451, "post_id": 37571391, "comment_id": 62636608, "body": "I cannot change gem file ,I tried to change it to <a href=\"https://rubygems.org/\" rel=\"nofollow noreferrer\">link</a>.But failed @BoltzOr\u2026\u2026"}, {"owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "reply_to_user": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "edited": false, "score": 1, "creation_date": 1464800588, "post_id": 37571391, "comment_id": 62636683, "body": "Post your gemfile into the question please"}, {"owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "edited": false, "score": 0, "creation_date": 1464831214, "post_id": 37571391, "comment_id": 62649349, "body": "Ok,I will try @Boltz0r"}], "tags": [], "owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "is_accepted": true, "score": 2, "last_activity_date": 1464790856, "creation_date": 1464790856, "answer_id": 37571391, "question_id": 37570011, "link": "https://stackoverflow.com/questions/37570011/when-install-bundle-failed-to-install-sass/37571391#37571391", "title": "When install bundle,failed to install sass?", "body": "<p>you dont have the correct source for your gems: change:</p>\n\n<p><strong>gemfile</strong></p>\n\n<pre><code>source 'https://rubygems.org'\n</code></pre>\n"}], "owner": {"reputation": 166, "user_id": 5524641, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/1u0zz.jpg?s=128&g=1", "display_name": "Marc Steven", "link": "https://stackoverflow.com/users/5524641/marc-steven"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 1, "accepted_answer_id": 37571391, "answer_count": 1, "score": 1, "last_activity_date": 1464790856, "creation_date": 1464787401, "last_edit_date": 1464790532, "question_id": 37570011, "link": "https://stackoverflow.com/questions/37570011/when-install-bundle-failed-to-install-sass", "title": "When install bundle,failed to install sass?", "body": "<p>When install bundle, error messages always displayed.\nAs when you execute the order of installing bundle every time,they will show you the one error info.\nNow when installed sass,the error information is \u201c  While executing gem ... (Gem::RemoteFetcher::UnknownHostError)\n    no such name (<a href=\"https://ruby.taobao.org/quick/Marshal.4.8/sass-3.4.22.gemspec.rz\" rel=\"nofollow\">https://ruby.taobao.org/quick/Marshal.4.8/sass-3.4.22.gemspec.rz</a>)\u201d.\nI\u2019m new here,so hope get everyone\u2019s help.Thank you so much in advance\u2026...</p>\n"}, {"tags": ["ruby", "fibers"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1464801619, "post_id": 37569910, "comment_id": 62637289, "body": "Why are your fibers calling resume on themselves?"}, {"owner": {"reputation": 1893, "user_id": 741326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/544276e94455fea1fb3b2fbb3a06d3b3?s=128&d=identicon&r=PG", "display_name": "saarp", "link": "https://stackoverflow.com/users/741326/saarp"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1464805274, "post_id": 37569910, "comment_id": 62639274, "body": "@FrederickCheung - Tried it without the Fiber.current.resume. Still doesn&#39;t yield the expected result which is: 1) kick off threads, 2) wait until first returns, 3) wait until 2nd returns, 4) done."}], "answers": [{"comments": [{"owner": {"reputation": 1893, "user_id": 741326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/544276e94455fea1fb3b2fbb3a06d3b3?s=128&d=identicon&r=PG", "display_name": "saarp", "link": "https://stackoverflow.com/users/741326/saarp"}, "edited": false, "score": 0, "creation_date": 1465245703, "post_id": 37639515, "comment_id": 62811331, "body": "Thanks, @vaibhav. The &#39;sleep&#39; is actually going to be replaced by call to two Defferable results that are serialized using EM::Synchrony.sync, so O think that should handle the parallel execution aspects. I still need to verify that."}], "tags": [], "owner": {"reputation": 106, "user_id": 912448, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/f9f51bffd5db1a17855baa6f0389edb4?s=128&d=identicon&r=PG", "display_name": "vaibhav", "link": "https://stackoverflow.com/users/912448/vaibhav"}, "is_accepted": true, "score": 1, "last_activity_date": 1465111899, "creation_date": 1465111899, "answer_id": 37639515, "question_id": 37569910, "link": "https://stackoverflow.com/questions/37569910/simple-parallelism-with-fibers/37639515#37639515", "title": "Simple parallelism with Fibers?", "body": "<p>Fibers by themselves will not let you achieve parallelism, at least not without using some sort of callback mechanism such as eventmachine framework.</p>\n\n<p>What you wrote is simply trying to interleave synchronous execution among code blocks. The reason you do not get expected sequence is because while you did simulate the kick-off, you never resumed the fibers after yeilding. </p>\n\n<p>You might find the following post useful, particularly the example at the end: <br>\n<a href=\"http://schmurfy.github.io/2011/09/25/on_fibers_and_threads.html\" rel=\"nofollow\">http://schmurfy.github.io/2011/09/25/on_fibers_and_threads.html</a></p>\n\n<p>Another example showing fibers transferring control to each other: <br>\n<a href=\"https://gist.github.com/aprescott/971008\" rel=\"nofollow\">https://gist.github.com/aprescott/971008</a></p>\n\n<p>This should give you expected results:</p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'fiber'\n\nf1 = Fiber.new do\n    puts \"Fiber1 starting @ #{Time.new}.\"\n    Fiber.yield\n    sleep 2\n    puts \"Fiber1 done @ #{Time.new}.\"\n    1\nend\nf2 = Fiber.new do\n    puts \"Fiber2 starting @ #{Time.new}.\"\n    Fiber.yield\n    sleep 2\n    puts \"Fiber2 done @ #{Time.new}.\"\n    2\nend\n\nputs \"Waiting @ #{Time.new}.\"\nr1 = f1.resume\nputs \"f1 back @ #{Time.new} - #{r1}.\"\nr2 = f2.resume\nputs \"f2 back @ #{Time.new} - #{r2}.\"\n\n# Resume right after the yield in the fiber block and \n# execute until it encounters another yield or the block ends.\nputs \"Resuming f1\"\nf1.resume \nputs \"Resuming f2\"\nf2.resume\n\nsleep 1\nputs \"Done @ #{Time.now}.\"\n</code></pre>\n\n<p>Output:</p>\n\n<pre><code>Waiting @ 2016-06-05 00:35:29 -0700.\nFiber1 starting @ 2016-06-05 00:35:29 -0700.\nf1 back @ 2016-06-05 00:35:29 -0700 - .\nFiber2 starting @ 2016-06-05 00:35:29 -0700.\nf2 back @ 2016-06-05 00:35:29 -0700 - .\nResuming f1\nFiber1 done @ 2016-06-05 00:35:31 -0700.\nResuming f2\nFiber2 done @ 2016-06-05 00:35:33 -0700.\nDone @ 2016-06-05 00:35:34 -0700.\n</code></pre>\n"}], "owner": {"reputation": 1893, "user_id": 741326, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/544276e94455fea1fb3b2fbb3a06d3b3?s=128&d=identicon&r=PG", "display_name": "saarp", "link": "https://stackoverflow.com/users/741326/saarp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 37639515, "answer_count": 1, "score": 0, "last_activity_date": 1465111899, "creation_date": 1464787135, "last_edit_date": 1464814664, "question_id": 37569910, "link": "https://stackoverflow.com/questions/37569910/simple-parallelism-with-fibers", "title": "Simple parallelism with Fibers?", "body": "<p>I'm trying to validate a basic yield/resume pattern with two Fibers. However, the yield/resume mechanism doesn't seem to work. I have tried a few variations but can't find my mistake.</p>\n\n<p>Expected sequence of events:</p>\n\n<ol>\n<li>kick off threads (time 0)</li>\n<li>wait until first returns (time +2sec)</li>\n<li>wait until 2nd returns (time +2sec)</li>\n<li>done (time > +3sec)</li>\n</ol>\n\n<p><strong>Try #1</strong></p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'fiber'\n\nf1 = Fiber.new do\n    puts \"Fiber1 starting @ #{Time.new}.\"\n    fib1 = Fiber.current\n    Fiber.yield\n    sleep 2\n    puts \"Fiber1 done @ #{Time.new}.\"\n    fib1.resume(1)\nend\nf2 = Fiber.new do\n    puts \"Fiber2 starting @ #{Time.new}.\"\n    fib2 = Fiber.current\n    Fiber.yield\n    sleep 2\n    puts \"Fiber2 done @ #{Time.new}.\"\n    fib2.resume(2)\nend\n\nputs \"Waiting @ #{Time.new}.\"\nr1 = f1.resume\nputs \"f1 back @ #{Time.new} - #{r1}.\"\nr2 = f2.resume\nputs \"f2 back @ #{Time.new} - #{r2}.\"\n\nsleep 1\nputs \"Done @ #{Time.now}.\"\n</code></pre>\n\n<p>This results in:</p>\n\n<pre><code>Waiting @ 2016-06-01 06:15:52 -0700.\nFiber1 starting @ 2016-06-01 06:15:52 -0700.\nf1 back @ 2016-06-01 06:15:52 -0700 - .\nFiber2 starting @ 2016-06-01 06:15:52 -0700.\nf2 back @ 2016-06-01 06:15:52 -0700 - .\nDone @ 2016-06-01 06:15:53 -0700.\n</code></pre>\n\n<p>Adding a second <code>resume</code> results in a FiberError. </p>\n\n<p><strong>Try #2</strong></p>\n\n<pre><code>#!/usr/bin/env ruby\n\nrequire 'fiber'\n\nf1 = Fiber.new do\n    puts \"Fiber1 starting @ #{Time.new}.\"\n    Fiber.yield\n    sleep 2\n    puts \"Fiber1 done @ #{Time.new}.\"\n    1\nend\nf2 = Fiber.new do\n    puts \"Fiber2 starting @ #{Time.new}.\"\n    Fiber.yield\n    sleep 2\n    puts \"Fiber2 done @ #{Time.new}.\"\n    2\nend\n\nputs \"Waiting @ #{Time.new}.\"\nr1 = f1.resume\nputs \"f1 back @ #{Time.new} - #{r1}.\"\nr2 = f2.resume\nputs \"f2 back @ #{Time.new} - #{r2}.\"\n\nsleep 1\nputs \"Done @ #{Time.now}.\"\n</code></pre>\n\n<p>This results in:</p>\n\n<pre><code>Waiting @ 2016-06-01 10:53:17 -0700.\nFiber1 starting @ 2016-06-01 10:53:17 -0700.\nf1 back @ 2016-06-01 10:53:17 -0700 - .\nFiber2 starting @ 2016-06-01 10:53:17 -0700.\nf2 back @ 2016-06-01 10:53:17 -0700 - .\nDone @ 2016-06-01 10:53:18 -0700.\n</code></pre>\n\n<p>In both cases, the start/end time is the same and result not returned.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "jbuilder"], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 3888859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6610dc3b9f4bc7c68bdbf058e4066bc9?s=128&d=identicon&r=PG", "display_name": "Morozzzko", "link": "https://stackoverflow.com/users/3888859/morozzzko"}, "edited": false, "score": 0, "creation_date": 1464789247, "post_id": 37569725, "comment_id": 62628781, "body": "I get the same result. It won&#39;t camelize hash keys"}, {"owner": {"reputation": 426, "user_id": 5086701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZffNM.jpg?s=128&g=1", "display_name": "beaorn", "link": "https://stackoverflow.com/users/5086701/beaorn"}, "reply_to_user": {"reputation": 393, "user_id": 3888859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6610dc3b9f4bc7c68bdbf058e4066bc9?s=128&d=identicon&r=PG", "display_name": "Morozzzko", "link": "https://stackoverflow.com/users/3888859/morozzzko"}, "edited": false, "score": 0, "creation_date": 1464789871, "post_id": 37569725, "comment_id": 62629285, "body": "Hmm, i&#39;m sure you did, but you restarted your rails server after adding that right? You are also sure that jbuilder is rendering the JSON template and rails isn&#39;t just falling back to to_json ? You may need to look into building array of hashes loaded into json.array <a href=\"http://www.rubydoc.info/github/rails/jbuilder/Jbuilder:array\" rel=\"nofollow noreferrer\">rubydoc.info/github/rails/jbuilder/Jbuilder:array</a>!"}, {"owner": {"reputation": 393, "user_id": 3888859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6610dc3b9f4bc7c68bdbf058e4066bc9?s=128&d=identicon&r=PG", "display_name": "Morozzzko", "link": "https://stackoverflow.com/users/3888859/morozzzko"}, "edited": false, "score": 0, "creation_date": 1464790500, "post_id": 37569725, "comment_id": 62629817, "body": "Yes, I did restart it. Even did it a few times, just to be sure. I am not entirely sure about to_json. I&#39;d be happy if you could explain this one. Currently I have a workaround using loops, which I will post if nobody finds a better solution."}, {"owner": {"reputation": 426, "user_id": 5086701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZffNM.jpg?s=128&g=1", "display_name": "beaorn", "link": "https://stackoverflow.com/users/5086701/beaorn"}, "reply_to_user": {"reputation": 393, "user_id": 3888859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6610dc3b9f4bc7c68bdbf058e4066bc9?s=128&d=identicon&r=PG", "display_name": "Morozzzko", "link": "https://stackoverflow.com/users/3888859/morozzzko"}, "edited": false, "score": 0, "creation_date": 1464790776, "post_id": 37569725, "comment_id": 62630060, "body": "It still sounds to me like its defaulting to rendering using to_json and bypassing Jbuilder so the camelize transformation is not getting applied. <a href=\"https://github.com/rails/jbuilder/issues/236\" rel=\"nofollow noreferrer\">github.com/rails/jbuilder/issues/236</a>"}], "tags": [], "owner": {"reputation": 426, "user_id": 5086701, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZffNM.jpg?s=128&g=1", "display_name": "beaorn", "link": "https://stackoverflow.com/users/5086701/beaorn"}, "is_accepted": false, "score": 2, "last_activity_date": 1464786713, "creation_date": 1464786713, "answer_id": 37569725, "question_id": 37569439, "link": "https://stackoverflow.com/questions/37569439/automatically-convert-hash-keys-to-camelcase-in-jbuilder/37569725#37569725", "title": "Automatically convert hash keys to camelCase in JBuilder", "body": "<p>Try setting this globally in your application (like config/environment.rb for example)</p>\n\n<pre><code>Jbuilder.key_format camelize: :lower\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 393, "user_id": 3888859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6610dc3b9f4bc7c68bdbf058e4066bc9?s=128&d=identicon&r=PG", "display_name": "Morozzzko", "link": "https://stackoverflow.com/users/3888859/morozzzko"}, "is_accepted": true, "score": 4, "last_activity_date": 1465210251, "last_edit_date": 1465210251, "creation_date": 1465200170, "answer_id": 37652340, "question_id": 37569439, "link": "https://stackoverflow.com/questions/37569439/automatically-convert-hash-keys-to-camelcase-in-jbuilder/37652340#37652340", "title": "Automatically convert hash keys to camelCase in JBuilder", "body": "<p>As Bryce has mentioned, Jbuilder uses to_json instead of processing the hash.</p>\n\n<p>A simple solution is to use <code>json.set!</code> to manually serialize the hash. </p>\n\n<pre><code>json.key_format! camelize: :lower\n\njson.data_object do\n  @foo.each do |key, value|\n    json.set! key, value\n  end\nend\n</code></pre>\n\n<p>Although, there is an issue: if @foo is empty, it won't create an object at all. These are the solutions I found:</p>\n\n<ol>\n<li><p>Define an empty hash before the serialization</p>\n\n<pre><code>json.key_format! camelize: :lower\n\njson.data_object({}) # don't forget parentheses or Ruby will handle {} as a block \n\njson.data_object do\n  @foo.each do |key, value|\n    json.set! key, value\n  end\nend\n</code></pre></li>\n<li><p>Serialize an empty hash if the source variable is empty</p>\n\n<pre><code>json.key_format! camelize: :lower\n\nif (@foo.empty?) do \n  json.data_object({})\nelse \n  json.data_object do\n    @foo.each do |key, value|\n      json.set! key, value\n    end\n  end\nend\n</code></pre>\n\n<p>Or if you prefer your code flat</p>\n\n<pre><code>json.key_format! camelize: :lower\n\njson.data_object({}) if @foo.empty?\n\njson.data_object do\n  @foo.each do |key, value|\n    json.set! key, value\n  end\nend unless @foo.empty?\n</code></pre></li>\n</ol>\n\n<p>However, those solutions will not work if you have to serialize nested objects. You can achieve deep serialization by monkeypatching the <code>json</code> object inside Jbuilder</p>\n\n<pre><code>def json.hash!(name, hash)\n  if hash.empty?\n    set! name, {}\n  else\n    set! name do\n      hash.each do |key, value|\n        if value.is_a?(Hash)\n          hash! key, value\n        else\n          set! key, value\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p>Then you can simply use <code>json.hash! :data_object, @foo</code> and get the desired result.</p>\n"}, {"tags": [], "owner": {"reputation": 94, "user_id": 871674, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f90fa1b733cf3e964d2e8ec1c40c1a8?s=128&d=identicon&r=PG", "display_name": "Sergio Azevedo", "link": "https://stackoverflow.com/users/871674/sergio-azevedo"}, "is_accepted": false, "score": 1, "last_activity_date": 1541682004, "last_edit_date": 1541682004, "creation_date": 1519313388, "answer_id": 48931198, "question_id": 37569439, "link": "https://stackoverflow.com/questions/37569439/automatically-convert-hash-keys-to-camelcase-in-jbuilder/48931198#48931198", "title": "Automatically convert hash keys to camelCase in JBuilder", "body": "<p>I'm not sure if this is still relevant. But for the ones that are still looking for an elegant solution, I recommend taking a look on: </p>\n\n<p><a href=\"https://github.com/vigetlabs/olive_branch\" rel=\"nofollow noreferrer\">https://github.com/vigetlabs/olive_branch</a></p>\n\n<blockquote>\n  <p>This gem lets your API users pass in and receive camelCased or dash-cased keys, while your Rails app receives and produces snake_cased ones.</p>\n</blockquote>\n\n<p>Here is a post where the author explains the idea behind this gem.\n<a href=\"https://www.viget.com/articles/introducing-olivebranch/\" rel=\"nofollow noreferrer\">https://www.viget.com/articles/introducing-olivebranch/</a></p>\n\n<p>Hope it helps</p>\n"}], "owner": {"reputation": 393, "user_id": 3888859, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6610dc3b9f4bc7c68bdbf058e4066bc9?s=128&d=identicon&r=PG", "display_name": "Morozzzko", "link": "https://stackoverflow.com/users/3888859/morozzzko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3753, "favorite_count": 0, "accepted_answer_id": 37652340, "answer_count": 3, "score": 3, "last_activity_date": 1541682004, "creation_date": 1464785986, "question_id": 37569439, "link": "https://stackoverflow.com/questions/37569439/automatically-convert-hash-keys-to-camelcase-in-jbuilder", "title": "Automatically convert hash keys to camelCase in JBuilder", "body": "<p>I am using JBuilder version 2.4.1 and Rails 4.2.6. I am trying to serialize a complex object to JSON. The code looks as follows:</p>\n\n<pre><code>json.key_format! camelize: :lower\n\njson.data_object @foo\n</code></pre>\n\n<p><code>@foo</code> looks like this:</p>\n\n<pre><code>{\n  key: 'value',\n  long_key: 'value'\n}\n</code></pre>\n\n<p>I expect it to be rendered as </p>\n\n<pre><code>{\n  \"dataObject\": {\n    \"key\": \"value\",\n    \"longKey\": \"value\"\n  }\n}\n</code></pre>\n\n<p>But instead it keeps the original hash keys, only converting data_object into camelCase</p>\n\n<pre><code>{\n  \"dataObject\": {\n    \"key\": \"value\",\n    \"long_key\": \"value\"\n  }\n}\n</code></pre>\n\n<p><strong>So the question is</strong>: what is the proper way to camelize hash keys using JBuilder? </p>\n"}, {"tags": ["arrays", "ruby", "hash", "unique"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1464786300, "post_id": 37569312, "comment_id": 62626255, "body": "What&#39;s the logic behind that? Keep the item that comes last or the one with larger value for <code>&#39;name&#39;</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464788649, "post_id": 37570167, "comment_id": 62628278, "body": "or <code>.values.map(&amp;:last)</code>"}, {"owner": {"reputation": 47, "user_id": 4753759, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-ga8mkDJkjP0/AAAAAAAAAAI/AAAAAAAAACs/ZZrk9I9TiJc/photo.jpg?sz=128", "display_name": "Khachatur Saribekyan", "link": "https://stackoverflow.com/users/4753759/khachatur-saribekyan"}, "edited": false, "score": 0, "creation_date": 1464788723, "post_id": 37570167, "comment_id": 62628343, "body": "Yea, maybe the question a little bit strange. Thank you too, your solution is also helped me."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 47, "user_id": 4753759, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-ga8mkDJkjP0/AAAAAAAAAAI/AAAAAAAAACs/ZZrk9I9TiJc/photo.jpg?sz=128", "display_name": "Khachatur Saribekyan", "link": "https://stackoverflow.com/users/4753759/khachatur-saribekyan"}, "edited": false, "score": 2, "creation_date": 1464788854, "post_id": 37570167, "comment_id": 62628457, "body": "@KhachaturSaribekyan did you see <a href=\"http://stackoverflow.com/questions/37569312/remove-duplicates-items-from-ruby#comment62626255_37569312\">my above comment</a>? It would be helpful if you could clarify your question."}, {"owner": {"reputation": 47, "user_id": 4753759, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-ga8mkDJkjP0/AAAAAAAAAAI/AAAAAAAAACs/ZZrk9I9TiJc/photo.jpg?sz=128", "display_name": "Khachatur Saribekyan", "link": "https://stackoverflow.com/users/4753759/khachatur-saribekyan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464789581, "post_id": 37570167, "comment_id": 62629045, "body": "@Stefan I can&#39;t explain a whole problem, because it&#39;s hard to explain, but your written solution already helped me to fix the big problem that I had."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 47, "user_id": 4753759, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-ga8mkDJkjP0/AAAAAAAAAAI/AAAAAAAAACs/ZZrk9I9TiJc/photo.jpg?sz=128", "display_name": "Khachatur Saribekyan", "link": "https://stackoverflow.com/users/4753759/khachatur-saribekyan"}, "edited": false, "score": 0, "creation_date": 1464789884, "post_id": 37570167, "comment_id": 62629295, "body": "@KhachaturSaribekyan I&#39;m just asking you to explain your logic for selecting the item. There are two items with a <code>line_number</code> of <code>1</code>. How do you decide which one to keep and which one to drop?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464801574, "post_id": 37570167, "comment_id": 62637263, "body": "Do we know the order of elements of the values (arrays) of the hash produced by <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-group_by\" rel=\"nofollow noreferrer\">Enumerable#group_by</a>? It is not specified in the doc."}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1464787768, "creation_date": 1464787768, "answer_id": 37570167, "question_id": 37569312, "link": "https://stackoverflow.com/questions/37569312/remove-duplicates-items-from-hash/37570167#37570167", "title": "Remove duplicates items from Hash", "body": "<p>Very strange question, but, maybe, it can help you:</p>\n\n<pre><code>input.group_by { |i| i['line_number'] }.values.map! { |i| i.last }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 47, "user_id": 4753759, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-ga8mkDJkjP0/AAAAAAAAAAI/AAAAAAAAACs/ZZrk9I9TiJc/photo.jpg?sz=128", "display_name": "Khachatur Saribekyan", "link": "https://stackoverflow.com/users/4753759/khachatur-saribekyan"}, "edited": false, "score": 0, "creation_date": 1464788570, "post_id": 37570364, "comment_id": 62628205, "body": "Thank you Santhosh, that really helped me"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464801272, "post_id": 37570364, "comment_id": 62637084, "body": "My preference, so far. Consider a hash-like name as a replacement for <code>obj</code>. The latter sounds like it could be any kind of object, but we know it&#39;s a hash."}, {"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464846638, "post_id": 37570364, "comment_id": 62653373, "body": "Thanks @CarySwoveland, Both block arguments are Hashes, couldn&#39;t think of a name to differentiate the two."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464851179, "post_id": 37570364, "comment_id": 62655570, "body": "I often use <code>h</code>, <code>g</code> and <code>f</code> for hashes (in that order). It may not help others read my code, but it tells me the object referenced is a hash. I suppose everyone has their own preferences for naming block variables."}], "tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": false, "score": 1, "last_activity_date": 1464788251, "creation_date": 1464788251, "answer_id": 37570364, "question_id": 37569312, "link": "https://stackoverflow.com/questions/37569312/remove-duplicates-items-from-hash/37570364#37570364", "title": "Remove duplicates items from Hash", "body": "<p>If you want to keep the last one, you can do this</p>\n\n<pre><code>input.each_with_object({}) {|h, obj| obj[h['line_number']] = h}.values\n# =&gt; [{\"line_number\"=&gt;1, \"name\"=&gt;\"Name2\", \"value\"=&gt;\"Value\"},\n# =&gt;  {\"line_number\"=&gt;2, \"name\"=&gt;\"AnotherName\", \"value\"=&gt;\"AnotherValue\"}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1464794191, "post_id": 37572259, "comment_id": 62632609, "body": "You have to add another <code>reverse</code> at the end."}, {"owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464796604, "post_id": 37572259, "comment_id": 62634269, "body": "Yeah, if the resulting order is important. That has not been specified."}], "tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1464793036, "creation_date": 1464793036, "answer_id": 37572259, "question_id": 37569312, "link": "https://stackoverflow.com/questions/37569312/remove-duplicates-items-from-hash/37572259#37572259", "title": "Remove duplicates items from Hash", "body": "<p>If you want to keep the last instead of the first one, why not simply</p>\n\n<pre><code>input.reverse.uniq { |i| i['line_number'] }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1464799970, "creation_date": 1464799970, "answer_id": 37574590, "question_id": 37569312, "link": "https://stackoverflow.com/questions/37569312/remove-duplicates-items-from-hash/37574590#37574590", "title": "Remove duplicates items from Hash", "body": "<pre><code>input.each_with_object({}) { |g,h| h.update(g['line_number']=&gt;g) }.values\n  #=&gt; [{\"line_number\"=&gt;1, \"name\"=&gt;\"Name2\", \"value\"=&gt;\"Value\"},\n  #    {\"line_number\"=&gt;2, \"name\"=&gt;\"AnotherName\", \"value\"=&gt;\"AnotherValue\"}] \n</code></pre>\n"}], "owner": {"reputation": 47, "user_id": 4753759, "user_type": "registered", "accept_rate": 20, "profile_image": "https://lh4.googleusercontent.com/-ga8mkDJkjP0/AAAAAAAAAAI/AAAAAAAAACs/ZZrk9I9TiJc/photo.jpg?sz=128", "display_name": "Khachatur Saribekyan", "link": "https://stackoverflow.com/users/4753759/khachatur-saribekyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1464800495, "creation_date": 1464785668, "last_edit_date": 1464800495, "question_id": 37569312, "link": "https://stackoverflow.com/questions/37569312/remove-duplicates-items-from-hash", "title": "Remove duplicates items from Hash", "body": "<p>I have the following array of hashes</p>\n\n<pre><code>input = [\n  {'line_number' =&gt; 1, 'name' =&gt; 'Name1', 'value' =&gt; 'Value'},\n  {'line_number' =&gt; 1, 'name' =&gt; 'Name2', 'value' =&gt; 'Value'},\n  {'line_number' =&gt; 2, 'name' =&gt; 'AnotherName', 'value' =&gt; 'AnotherValue'}\n]\n</code></pre>\n\n<p>I want, which after checking for uniqueness the output would be</p>\n\n<pre><code>output = [\n  {'line_number' =&gt; 1, 'name' =&gt; 'Name2', 'value' =&gt; 'Value'},\n  {'line_number' =&gt; 2, 'name' =&gt; 'AnotherName', 'value' =&gt; 'AnotherValue'}\n]\n</code></pre>\n\n<p>because simple uniqueness <pre>input.uniq! { |i| i['line_number'] }</pre>\ngive me</p>\n\n<pre><code>output = [\n  {'line_number' =&gt; 1, 'name' =&gt; 'Name1', 'value' =&gt; 'Value'},\n  {'line_number' =&gt; 2, 'name' =&gt; 'AnotherName', 'value' =&gt; 'AnotherValue'}\n]\n</code></pre>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1464785985, "post_id": 37569184, "comment_id": 62625973, "body": "are you sure :notice is symbol? try like case type.to_s and also and check &quot;notice&quot;, &quot;alert&quot; instead of symbols"}, {"owner": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "reply_to_user": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1464786328, "post_id": 37569184, "comment_id": 62626277, "body": "@Thorin works with strings!  Thanks.  Couldn&#39;t find documentation that explains it, but it works.  I thought flash was a hash and so that it had to use symbols."}, {"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1464787640, "post_id": 37569184, "comment_id": 62627421, "body": "I have updated your code and add in answer"}], "answers": [{"tags": [], "owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "is_accepted": true, "score": 1, "last_activity_date": 1464787612, "creation_date": 1464787612, "answer_id": 37570110, "question_id": 37569184, "link": "https://stackoverflow.com/questions/37569184/rails-flash-message-not-displaying-as-intended-using-ruby-case-statement/37570110#37570110", "title": "Rails - Flash message not displaying as intended using ruby case statement", "body": "<p>Change your code to</p>\n\n<pre><code>&lt;% flash.each do |type, message| %&gt;\n    &lt;% case type.to_s %&gt;\n    &lt;% when \"notice\", \"alert\" %&gt;\n      &lt;% if message.is_a? Array %&gt;\n        &lt;% message.each do |msg| %&gt;\n          &lt;div class=\"alert alert-info\"&gt;\n            &lt;a class=\"close\" data-dismiss=\"alert\"&gt;&amp;#215;&lt;/a&gt;\n            &lt;%= msg.html_safe %&gt;\n          &lt;/div&gt;\n        &lt;% end%&gt;\n      &lt;% else %&gt;\n        &lt;div class=\"alert &lt;%= flash_class type %&gt;\"&gt;\n          &lt;a class=\"close\" data-dismiss=\"alert\"&gt;&amp;#215;&lt;/a&gt;\n          &lt;%= message %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n  \n"}], "owner": {"reputation": 1949, "user_id": 4584963, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/03a8016a0af94bd53303411018a847e2?s=128&d=identicon&r=PG&f=1", "display_name": "user4584963", "link": "https://stackoverflow.com/users/4584963/user4584963"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 37570110, "answer_count": 1, "score": 0, "last_activity_date": 1464787612, "creation_date": 1464785419, "question_id": 37569184, "link": "https://stackoverflow.com/questions/37569184/rails-flash-message-not-displaying-as-intended-using-ruby-case-statement", "title": "Rails - Flash message not displaying as intended using ruby case statement", "body": "<p>In my rails app I am using various keys for flash.  Some to display a message but also some to temporarily store data.  I only want :notice, and :alert to display when present.  Here is my code.</p>\n\n<pre><code>  &lt;% flash.each do |type, message| %&gt;\n    &lt;% case type %&gt;\n    &lt;% when :notice, :alert %&gt;\n      &lt;% if message.is_a? Array %&gt;\n        &lt;% message.each do |msg| %&gt;\n          &lt;div class=\"alert alert-info\"&gt;\n            &lt;a class=\"close\" data-dismiss=\"alert\"&gt;&amp;#215;&lt;/a&gt;\n            &lt;%= msg.html_safe %&gt;\n          &lt;/div&gt;\n        &lt;% end%&gt;\n      &lt;% else %&gt;\n        &lt;div class=\"alert &lt;%= flash_class type %&gt;\"&gt;\n          &lt;a class=\"close\" data-dismiss=\"alert\"&gt;&amp;#215;&lt;/a&gt;\n          &lt;%= message %&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>I can't figure out why nothing is displaying.  It works fine when I remove the case statement but then every flash gets displayed which I don't want.</p>\n"}, {"tags": ["ruby", "selenium", "cucumber", "capybara", "rubymine"], "answers": [{"tags": [], "owner": {"reputation": 847, "user_id": 1482694, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8e4742341658d0f90de0b770fc4f01f?s=128&d=identicon&r=PG&f=1", "display_name": "Sam", "link": "https://stackoverflow.com/users/1482694/sam"}, "is_accepted": false, "score": 0, "last_activity_date": 1464790628, "creation_date": 1464790628, "answer_id": 37571303, "question_id": 37569038, "link": "https://stackoverflow.com/questions/37569038/how-much-rework-do-i-have-to-do-when-moving-from-simple-automation-to-page-objec/37571303#37571303", "title": "How much rework do i have to do when moving from simple automation to Page Object Model framework using Cucumber and Selenium/Capybara?", "body": "<p>Well this can be a very opinionated question, but I'll try to keep it simple: </p>\n\n<p>If you already have well structured and modularised code (cucumber features and step defs), it won't take significant changes to move to POM. Its essentially a different structuring technique to keep your code organised and keep your changes minimal/confined. </p>\n\n<p>Gems like <a href=\"https://github.com/natritmeyer/site_prism\" rel=\"nofollow\">siteprism</a> can help you with creating well structured page objects, if you are open to learn an additional DSL (for siteprism) on top of cucumber / capybara. Or you can roll out your own without any additional libraries, though it would demand a thorough understanding of POM architecture and best practices.</p>\n\n<p>Hope that helps. </p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3254489, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000315579989/picture?type=large", "display_name": "bbortolato", "link": "https://stackoverflow.com/users/3254489/bbortolato"}, "is_accepted": false, "score": 0, "last_activity_date": 1464988652, "creation_date": 1464988652, "answer_id": 37623554, "question_id": 37569038, "link": "https://stackoverflow.com/questions/37569038/how-much-rework-do-i-have-to-do-when-moving-from-simple-automation-to-page-objec/37623554#37623554", "title": "How much rework do i have to do when moving from simple automation to Page Object Model framework using Cucumber and Selenium/Capybara?", "body": "<p>I believe you will have a little work to migrate and meet increasingly the tool, the Framework POM only shows speed gain when you have some pages that already are mapped, it might take some time to be shown in reports, but I believe it has much to gain, organization, clarity and speed are some of the advantages of migration.</p>\n\n<p>In my work I help other QAs learning and use POM in one day, a lot of guys use xpath to find objects, I just show how they can reuse that xpaths in a page object.</p>\n\n<p>The second step I show to use method, not only elements, then they can reuse a lot of code and stop repeat steps, find where they break and use a simple method in siteprism page, example:</p>\n\n<pre><code>element :field_login , :xpath, \"login\"\nelement :field_password, :xpath, \"password\"\nelement :login_button, :xpath, \"login_button\"\n\ndef authenticate (username, password)\n    field_login.set username\n    field.password.set password\n\n    LoginPage.new if login_button.click\nend\n</code></pre>\n\n<p>My next step is show to leave to use xpath and use css elements.</p>\n\n<p>And after some sprints, they understand the beneficts of the framework, and it is default for all automation, include the DEVs can understand and help in tests now.</p>\n"}, {"tags": [], "owner": {"reputation": 3257, "user_id": 4341733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b1793f226cb3189da8bc9c6264d72b7?s=128&d=identicon&r=PG", "display_name": "diabolist", "link": "https://stackoverflow.com/users/4341733/diabolist"}, "is_accepted": false, "score": 0, "last_activity_date": 1465392039, "creation_date": 1465392039, "answer_id": 37703720, "question_id": 37569038, "link": "https://stackoverflow.com/questions/37569038/how-much-rework-do-i-have-to-do-when-moving-from-simple-automation-to-page-objec/37703720#37703720", "title": "How much rework do i have to do when moving from simple automation to Page Object Model framework using Cucumber and Selenium/Capybara?", "body": "<p>Warning this answer is somewhat controversial.</p>\n\n<p>I'd say don't bother using the Page Object Model, its fundamentally flawed. The web is about resources and representations (REST) not about pages. BDD is about behaviour, not pages. </p>\n\n<p>The danger with POM (particularly when you are not experienced) is that you write lots of scenarios to test what is on each page. When really what you should be doing is writing scenarios that confirm that some behaviour exists.</p>\n"}], "owner": {"reputation": 75, "user_id": 2161166, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/c6e07647406164c8a38d5f2719facf97?s=128&d=identicon&r=PG", "display_name": "Pankaj Sharma", "link": "https://stackoverflow.com/users/2161166/pankaj-sharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1465392039, "creation_date": 1464785103, "question_id": 37569038, "link": "https://stackoverflow.com/questions/37569038/how-much-rework-do-i-have-to-do-when-moving-from-simple-automation-to-page-objec", "title": "How much rework do i have to do when moving from simple automation to Page Object Model framework using Cucumber and Selenium/Capybara?", "body": "<p>My Goal is to create a Page Object Model Automation framework using Cucumber with capybara/selenium for mu client project. Currently my knowledge related to Page Object Model gem is very limited and at the same time i want to show some delivery by creating automation scripts using cucumber and capybara. So i am in the process of creating some feature files and subsequent step definitions. </p>\n\n<p>So my question is, If i move to simple automation to POM framework, how much rework i have to do in terms of scripts and also if this approach is correct. Please guide me as i am pretty new to ruby automation.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "edited": false, "score": 0, "creation_date": 1464786169, "post_id": 37569222, "comment_id": 62626128, "body": "Thank you, stupid of me not to think about that. Have a nice day!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1464895505, "post_id": 37569222, "comment_id": 62685806, "body": "Not just <code>[a.first[&quot;_id&quot;]]</code>?"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1464785490, "creation_date": 1464785490, "answer_id": 37569222, "question_id": 37569029, "link": "https://stackoverflow.com/questions/37569029/ruby-hash-to-array/37569222#37569222", "title": "Ruby - hash to array", "body": "<p>If you just had a hash:</p>\n\n<pre><code>h = {\"_id\"=&gt;BSON::ObjectId('569a58b8e301d083c300000c')}\n</code></pre>\n\n<p>and you wanted to fetch the <code>BSON::ObectId</code>, you would call <code>Hash#[]</code>:</p>\n\n<pre><code>h[\"_id\"] #=&gt; BSON::ObjectId('569a58b8e301d083c300000c')\n</code></pre>\n\n<p>The same works with <code>map</code>:</p>\n\n<pre><code>a.map { |h| h[\"_id\"] }\n#=&gt; [BSON::ObjectId('569a58b8e301d083c300000c')]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "is_accepted": false, "score": 0, "last_activity_date": 1464787817, "creation_date": 1464787817, "answer_id": 37570186, "question_id": 37569029, "link": "https://stackoverflow.com/questions/37569029/ruby-hash-to-array/37570186#37570186", "title": "Ruby - hash to array", "body": "<p>A cleaner solution. </p>\n\n<pre><code>a = [{\"id\"=&gt;\"1234\"},{\"id\"=&gt;\"9876\"}]\na.flat_map(&amp;:values)\n=&gt; [\"1234\", \"9876\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "is_accepted": false, "score": 0, "last_activity_date": 1464788096, "creation_date": 1464788096, "answer_id": 37570305, "question_id": 37569029, "link": "https://stackoverflow.com/questions/37569029/ruby-hash-to-array/37570305#37570305", "title": "Ruby - hash to array", "body": "<p>I'd use values, then call flatten.</p>\n\n<pre><code>a.collect(:&amp;values).flatten\n</code></pre>\n\n<p>Or, if there'll only ever be one value</p>\n\n<pre><code>a[0].values[0]\n</code></pre>\n"}], "owner": {"reputation": 283, "user_id": 5962592, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/09e937e3c5361ac06e5c17d9f0a133db?s=128&d=identicon&r=PG&f=1", "display_name": "Jes", "link": "https://stackoverflow.com/users/5962592/jes"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 37569222, "answer_count": 3, "score": 1, "last_activity_date": 1464788096, "creation_date": 1464785051, "question_id": 37569029, "link": "https://stackoverflow.com/questions/37569029/ruby-hash-to-array", "title": "Ruby - hash to array", "body": "<p>I have:</p>\n\n<pre><code>a =  [{\"_id\"=&gt;BSON::ObjectId('569a58b8e301d083c300000c')}]\n</code></pre>\n\n<p>and I want it to be:</p>\n\n<pre><code>[BSON::ObjectId('569a58bee301d083c3000752')]\n</code></pre>\n\n<p>I was experimenting with</p>\n\n<pre><code>a.map{|e| e.map{|k, v| v }}\n</code></pre>\n\n<p>but it gives me nested array:</p>\n\n<pre><code>[[BSON::ObjectId('569a58b8e301d083c300000c')]]\n</code></pre>\n\n<p>I'll appreciate any help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1464784651, "post_id": 37568590, "comment_id": 62624806, "body": "This is nothing like unix pipes, if that&#39;s what you were asking."}, {"owner": {"reputation": 27, "user_id": 4507443, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/892178007471604/picture?type=large", "display_name": "bbparis", "link": "https://stackoverflow.com/users/4507443/bbparis"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1464785144, "post_id": 37568590, "comment_id": 62625221, "body": "Hello, I know it is a simple question, but it is still hard for me to understand the role of pipe. I don&#39;t care about the rating of my profile on stackoverflow, I care about my knowledge; What is mean inside a Ruby on Rails code, with we use pipes, this is what I was asking for. Thanks for your negative reaction."}, {"owner": {"reputation": 27, "user_id": 4507443, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/892178007471604/picture?type=large", "display_name": "bbparis", "link": "https://stackoverflow.com/users/4507443/bbparis"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1464785197, "post_id": 37568590, "comment_id": 62625278, "body": "@Sergio, NO, I&#39;m just asking about the role of pipes inside Ruby code. Thanks for your comment"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1464785770, "post_id": 37568590, "comment_id": 62625794, "body": "If you truly do care about your knowledge, you shouldn&#39;t be getting piecemeal knowledge of very basic ruby syntax constructs from stackoverflow questions. You should be reading a book."}, {"owner": {"reputation": 27, "user_id": 4507443, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/892178007471604/picture?type=large", "display_name": "bbparis", "link": "https://stackoverflow.com/users/4507443/bbparis"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1464785893, "post_id": 37568590, "comment_id": 62625894, "body": "you are right Sergio, I&#39;m following now video learning ( a course for the beginner) about 260 videos. I thought I can come to here for any question. Anyway, not easy to understand all things in one time."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1464800588, "post_id": 37568590, "comment_id": 62636684, "body": "Among those 260 videos, there must be several about blocks. Find those and watch. Should clear the concept for you."}, {"owner": {"reputation": 27, "user_id": 4507443, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/892178007471604/picture?type=large", "display_name": "bbparis", "link": "https://stackoverflow.com/users/4507443/bbparis"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1464800794, "post_id": 37568590, "comment_id": 62636791, "body": "I&#39;m at 20% now of the course, but so happy. Anyway he explained quickly about the do, and I&#39;m still learning. I will not post here any future simple question, do you know a good community to help me understand these small issues ? Thanks again for your help Sergio!"}], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 4507443, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/892178007471604/picture?type=large", "display_name": "bbparis", "link": "https://stackoverflow.com/users/4507443/bbparis"}, "edited": false, "score": 0, "creation_date": 1464785946, "post_id": 37568785, "comment_id": 62625939, "body": "Thank you Munyari, interesting and I&#39;m following the link now."}], "tags": [], "owner": {"reputation": 85, "user_id": 3160670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/df9633028183d10ffc326989259e6bdc?s=128&d=identicon&r=PG&f=1", "display_name": "Munyari", "link": "https://stackoverflow.com/users/3160670/munyari"}, "is_accepted": false, "score": 1, "last_activity_date": 1464784492, "last_edit_date": 1495540366, "creation_date": 1464784492, "answer_id": 37568785, "question_id": 37568590, "link": "https://stackoverflow.com/questions/37568590/some-simple-questions-about-ruby-on-rails/37568785#37568785", "title": "Some simple questions about Ruby on Rails", "body": "<p>What you see here is a block, one of ruby's most powerful language constructs. <code>create_table</code> is called with the first parameter being a symbol indicating the name of the table, and the second parameter being a block (the bits between <code>do</code> and <code>end</code>). Assuming this is Rails, you can read more about that method <a href=\"http://guides.rubyonrails.org/active_record_migrations.html#creating-a-table\" rel=\"nofollow noreferrer\" title=\"here\">here</a>. The pipes indicate that <code>t</code> is a block parameter, which in this case refers to the table being created. </p>\n\n<p><a href=\"https://stackoverflow.com/a/4912143/3160670\">This answer</a> goes into more depth about what blocks are. </p>\n"}], "owner": {"reputation": 27, "user_id": 4507443, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/892178007471604/picture?type=large", "display_name": "bbparis", "link": "https://stackoverflow.com/users/4507443/bbparis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "closed_date": 1464784701, "answer_count": 1, "score": -1, "last_activity_date": 1464800230, "creation_date": 1464783893, "last_edit_date": 1464800230, "question_id": 37568590, "link": "https://stackoverflow.com/questions/37568590/some-simple-questions-about-ruby-on-rails", "closed_reason": "Duplicate", "title": "Some simple questions about Ruby on Rails", "body": "<p>The following simple code in a migration file in Ruby on Rails :</p>\n\n<pre><code>def change\ncreate_table :articles do |t|\n  t.string :title \nend\n</code></pre>\n\n<p>Can I understand it like that :</p>\n\n<p>1:  <code>create_table</code> is a ruby built-in ( or Ruby on Rails ? ) to create a table</p>\n\n<p>2: <code>:articles</code> is the table name, so clear</p>\n\n<p>3: This is the most important for me to illustrate in my brain. <code>do |t|</code> means to execute what is behind it ? this is mean <code>do</code> will add the table in the database, and gives it the value <code>t</code> ???</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "upgrade"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1464785686, "post_id": 37567964, "comment_id": 62625719, "body": "What have you done to track down the cause of this performance drop? Is it only affecting specific areas of the application? Could that lead to any clues, e.g. gems which are being heavily used here?"}], "answers": [{"tags": [], "owner": {"reputation": 1835, "user_id": 2432586, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702ff02114c19ee71758c0ba2cdc0e41?s=128&d=identicon&r=PG", "display_name": "Donovan Thomson", "link": "https://stackoverflow.com/users/2432586/donovan-thomson"}, "is_accepted": true, "score": 0, "last_activity_date": 1465275988, "creation_date": 1465275988, "answer_id": 37670900, "question_id": 37567964, "link": "https://stackoverflow.com/questions/37567964/performance-issues-when-upgrading-from-ruby-1-9-3-to-2-2-2/37670900#37670900", "title": "Performance issues when upgrading from ruby 1.9.3 to 2.2.2", "body": "<p>It appears that the cause of the performance drop related to garbage collection. We managed to realise a significant improvement in performance by setting <code>RUBY_GC_MALLOC_LIMIT=90000000</code></p>\n\n<p>We used the following as a resource\n<a href=\"https://meta.discourse.org/t/tuning-ruby-and-rails-for-discourse/4126\" rel=\"nofollow\">https://meta.discourse.org/t/tuning-ruby-and-rails-for-discourse/4126</a></p>\n"}], "owner": {"reputation": 1835, "user_id": 2432586, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702ff02114c19ee71758c0ba2cdc0e41?s=128&d=identicon&r=PG", "display_name": "Donovan Thomson", "link": "https://stackoverflow.com/users/2432586/donovan-thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 201, "favorite_count": 0, "accepted_answer_id": 37670900, "answer_count": 1, "score": 4, "last_activity_date": 1465275988, "creation_date": 1464782197, "question_id": 37567964, "link": "https://stackoverflow.com/questions/37567964/performance-issues-when-upgrading-from-ruby-1-9-3-to-2-2-2", "title": "Performance issues when upgrading from ruby 1.9.3 to 2.2.2", "body": "<p>When upgraded from ruby-1.9.3-p545 to ruby-2.2.2 we experienced a 50% drop in performance on our application. I have done a fair amount of reading around this and I suspect that this may be a result of the change in the way that ruby does garbage collection. </p>\n\n<p>The confusing thing is that there have been no noticeable changes on our server metrics. We have not seen a spike in memory usage. If garbage collection was causing a performance slow down would we see a spike in memory usage ? Is this a sign that the performance issues are being caused elsewhere ? Possible by gems not playing nicely together ?</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 5747951, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-y7gPx05xGJ0/AAAAAAAAAAI/AAAAAAAAAG4/nwnudI01L28/photo.jpg?sz=128", "display_name": "Megan Woodruff", "link": "https://stackoverflow.com/users/5747951/megan-woodruff"}, "edited": false, "score": 0, "creation_date": 1464785162, "post_id": 37568497, "comment_id": 62625237, "body": "This works great! I guess my only question now is how to display the current value in the number input. This is an edit form in rails that was being populate with that value, but now with the new html format how would I display that value in the field? Nevermind, I forgot to add a value into the number field input! thanks for your help!"}, {"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "reply_to_user": {"reputation": 194, "user_id": 5747951, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-y7gPx05xGJ0/AAAAAAAAAAI/AAAAAAAAAG4/nwnudI01L28/photo.jpg?sz=128", "display_name": "Megan Woodruff", "link": "https://stackoverflow.com/users/5747951/megan-woodruff"}, "edited": false, "score": 0, "creation_date": 1464789258, "post_id": 37568497, "comment_id": 62628790, "body": "@MeganWoodruff you don&#39;t need to change html, add <code>id</code> and remove <code>read_only</code> in your field like <code>&lt;%= f.number_field :weight_number, :id =&gt; &quot;weight_number_id&quot; , class=&quot;form-control&quot;%&gt;</code>"}], "tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": true, "score": 0, "last_activity_date": 1464783649, "creation_date": 1464783649, "answer_id": 37568497, "question_id": 37567647, "link": "https://stackoverflow.com/questions/37567647/rails4-form-dynamic-read-only-field/37568497#37568497", "title": "Rails4 form dynamic read only field", "body": "<p>Try:</p>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>&lt;input type=\"checkbox\" name=\"suspended\" id=\"checkbox1\" value=\"test\"/&gt;\n&lt;input type=\"number\" name=\"weight_number\" id=\"weight_number_id\"&gt;\n</code></pre>\n\n<p><strong>Jquery:</strong></p>\n\n<pre><code>$(document).ready(function() {\n  $(\"#checkbox1\").change(function() {\n    if (!this.checked) {\n      $(\"#weight_number_id\").attr('readonly', 'true');\n    }\n    else {\n      $(\"#weight_number_id\").removeAttr('readonly');\n    }\n  });\n  //triger change event in case checkbox checked when user accessed page\n  $(\"#checkbox1\").trigger(\"change\")\n});\n</code></pre>\n\n<h2><a href=\"http://jsfiddle.net/cc5T3/181/\" rel=\"nofollow\">Working Demo</a></h2>\n"}], "owner": {"reputation": 194, "user_id": 5747951, "user_type": "registered", "accept_rate": 79, "profile_image": "https://lh5.googleusercontent.com/-y7gPx05xGJ0/AAAAAAAAAAI/AAAAAAAAAG4/nwnudI01L28/photo.jpg?sz=128", "display_name": "Megan Woodruff", "link": "https://stackoverflow.com/users/5747951/megan-woodruff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 1, "accepted_answer_id": 37568497, "answer_count": 1, "score": 1, "last_activity_date": 1464783649, "creation_date": 1464781336, "last_edit_date": 1464782771, "question_id": 37567647, "link": "https://stackoverflow.com/questions/37567647/rails4-form-dynamic-read-only-field", "title": "Rails4 form dynamic read only field", "body": "<p>I have a rails form that needs at field to be readonly or not depending on the checkbox the user clicks. So far I have</p>\n\n<pre><code>&lt;%= form_for @weight, remote: true do |f| %&gt;\n  &lt;div class= \"modal-body\"&gt;\n     &lt;input id=\"checkbox1\" type=\"checkbox\" onclick=\"ReadOnly()\"&gt;&lt;/input&gt;\n     &lt;%= f.label :weight_number, class=\"control-label\"%&gt;\n     &lt;%= f.number_field :weight_number, :readonly =&gt; true, class=\"form-control\"%&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n &lt;script&gt;\n    function ReadOnly(){\n      if(document.getElementById('checkbox1').checked{ \n        //make the number field editable\n      }\n    }\n &lt;/script&gt;\n</code></pre>\n\n<p>Is there a clean and concise why do this. I've never had to manipulate a ruby line via JavaScript before, but I would like to toggle that numbe field between :readonly => true and :readonly => false.</p>\n"}, {"tags": ["ruby", "nginx", "sinatra", "passenger"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464781474, "post_id": 37567594, "comment_id": 62622441, "body": "What is your problem? Do you get an error? What is the error message?"}, {"owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464783058, "post_id": 37567594, "comment_id": 62623622, "body": "The Nginx error log shows: [error] 21037#0: *7 directory index of &quot;/home/user/demo.my-example.com/sinatra/&quot; is forbidden, server: demo.my-example.com, request: &quot;GET / HTTP/1.1&quot;, host: &quot;demo.my-example.com&quot;"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 3, "creation_date": 1464784983, "post_id": 37567594, "comment_id": 62625074, "body": "Shouldn\u2019t the <code>root</code> entry point at your apps <code>public</code> dir, not the apps top level dir?"}, {"owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1464793672, "post_id": 37567594, "comment_id": 62632249, "body": "Thanks @matt I had assumed I didn&#39;t need a public folder for Sinatra but when I created one things fell into place. I had to remove disable :run, :reload and set :environment, :production from the config.ru also."}, {"owner": {"reputation": 2380, "user_id": 1498579, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/qHxWR.png?s=128&g=1", "display_name": "harsh4u", "link": "https://stackoverflow.com/users/1498579/harsh4u"}, "edited": false, "score": 0, "creation_date": 1530517681, "post_id": 37567594, "comment_id": 89247241, "body": "Is this issue resolved? Please send Right answer for it. @MarkRobinson"}, {"owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "reply_to_user": {"reputation": 2380, "user_id": 1498579, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/qHxWR.png?s=128&g=1", "display_name": "harsh4u", "link": "https://stackoverflow.com/users/1498579/harsh4u"}, "edited": false, "score": 0, "creation_date": 1530532748, "post_id": 37567594, "comment_id": 89255480, "body": "@harsh4u see answer below"}], "answers": [{"comments": [{"owner": {"reputation": 2380, "user_id": 1498579, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/qHxWR.png?s=128&g=1", "display_name": "harsh4u", "link": "https://stackoverflow.com/users/1498579/harsh4u"}, "edited": false, "score": 0, "creation_date": 1530603755, "post_id": 51135682, "comment_id": 89281957, "body": "Ok, thanks for the update. Is it for CentOS? I have a issue on centOS. Is there any specific configuration for it?"}, {"owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "reply_to_user": {"reputation": 2380, "user_id": 1498579, "user_type": "registered", "accept_rate": 8, "profile_image": "https://i.stack.imgur.com/qHxWR.png?s=128&g=1", "display_name": "harsh4u", "link": "https://stackoverflow.com/users/1498579/harsh4u"}, "edited": false, "score": 0, "creation_date": 1530630047, "post_id": 51135682, "comment_id": 89298735, "body": "@harsh4u it&#39;s the same configuration in development as production"}], "tags": [], "owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "is_accepted": true, "score": 0, "last_activity_date": 1530532651, "creation_date": 1530532651, "answer_id": 51135682, "question_id": 37567594, "link": "https://stackoverflow.com/questions/37567594/how-to-run-sinatra-app-in-passenger-with-nginx/51135682#51135682", "title": "How to run Sinatra App in Passenger with Nginx?", "body": "<p>/home/user/demo.my-example.com/sinatra/config.ru</p>\n\n<pre><code>require 'rubygems'\nGem.clear_paths\n\nrequire \"./stripe\"\nrun StripeApp\n</code></pre>\n"}], "owner": {"reputation": 1223, "user_id": 203915, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e0ad9c420de52f2d9e0513d448e579c?s=128&d=identicon&r=PG", "display_name": "Mark Robinson", "link": "https://stackoverflow.com/users/203915/mark-robinson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1568, "favorite_count": 0, "accepted_answer_id": 51135682, "answer_count": 1, "score": 2, "last_activity_date": 1530532651, "creation_date": 1464781211, "question_id": 37567594, "link": "https://stackoverflow.com/questions/37567594/how-to-run-sinatra-app-in-passenger-with-nginx", "title": "How to run Sinatra App in Passenger with Nginx?", "body": "<p>I'm trying to run a very simple Sinatra app using my existing Nginx &amp; Passenger setup. I'm familiar with running Rails on Passenger but this is my first time setting up Sinatra.</p>\n\n<p>I've installed Sinatra through bundler and RVM. Take a look at my configuration and tell me what I'm doing wrong.</p>\n\n<p>Nginx conf:</p>\n\n<pre><code>server {\n  listen       80;\n  server_name  demo.my-example.com;\n  root /home/user/demo.my-example.com/sinatra;     \n\n  passenger_ruby /usr/local/rvm/wrappers/ruby-2.3.1@my_gemset/ruby;\n  passenger_enabled on;\n}\n</code></pre>\n\n<p>/home/user/demo.my-example.com/sinatra/config.ru</p>\n\n<pre><code>require 'rubygems'\nGem.clear_paths\ndisable :run, :reload\nset :environment, :production\n\nrequire \"./stripe\"\nrun StripeApp\n</code></pre>\n\n<p>/home/user/demo.my-example.com/sinatra/stripe.rb</p>\n\n<pre><code>require 'sinatra/base'\nclass StripeApp &lt; Sinatra::Base\n  get '/' do \n   \"Hello world\"\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464780387, "post_id": 37567194, "comment_id": 62621715, "body": "Do you use a version control software like git?"}, {"owner": {"reputation": 31, "user_id": 6409139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f5c77dd1195563fb67750582ba9e?s=128&d=identicon&r=PG&f=1", "display_name": "ysr1991", "link": "https://stackoverflow.com/users/6409139/ysr1991"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464780515, "post_id": 37567194, "comment_id": 62621803, "body": "I messed up, I haven&#39;t used it in a while. So that&#39;s not a preferable solution."}, {"owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "edited": false, "score": 0, "creation_date": 1464780701, "post_id": 37567194, "comment_id": 62621939, "body": "Trying things like <a href=\"https://github.com/MiniProfiler/rack-mini-profiler\" rel=\"nofollow noreferrer\">Rack-mini-profiler</a> - could it help? Or you assume the request processing <i>starts</i> after long period, not that it takes long period?"}, {"owner": {"reputation": 31, "user_id": 6409139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f5c77dd1195563fb67750582ba9e?s=128&d=identicon&r=PG&f=1", "display_name": "ysr1991", "link": "https://stackoverflow.com/users/6409139/ysr1991"}, "edited": false, "score": 0, "creation_date": 1464781242, "post_id": 37567194, "comment_id": 62622298, "body": "This is not a page specific issue, all pages are slow if it is the first request made. While this was not the case before."}, {"owner": {"reputation": 4386, "user_id": 922016, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b3e4ded635f3ccfc9b5676b8cfbfa515?s=128&d=identicon&r=PG", "display_name": "pmichna", "link": "https://stackoverflow.com/users/922016/pmichna"}, "edited": false, "score": 0, "creation_date": 1464793613, "post_id": 37567194, "comment_id": 62632200, "body": "Anything interesting in the logs of your rails application?"}, {"owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "edited": false, "score": 0, "creation_date": 1464803934, "post_id": 37567194, "comment_id": 62638603, "body": "I noticed the same issue in my new company&#39;s project, I suspect Passenger  may be responsible for it (I had no issue with Puma or webrick). Did you find a solution?"}, {"owner": {"reputation": 31, "user_id": 6409139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f5c77dd1195563fb67750582ba9e?s=128&d=identicon&r=PG&f=1", "display_name": "ysr1991", "link": "https://stackoverflow.com/users/6409139/ysr1991"}, "edited": false, "score": 0, "creation_date": 1464862772, "post_id": 37567194, "comment_id": 62663196, "body": "@pminchna, nothing at all."}, {"owner": {"reputation": 31, "user_id": 6409139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f5c77dd1195563fb67750582ba9e?s=128&d=identicon&r=PG&f=1", "display_name": "ysr1991", "link": "https://stackoverflow.com/users/6409139/ysr1991"}, "reply_to_user": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "edited": false, "score": 0, "creation_date": 1464862796, "post_id": 37567194, "comment_id": 62663213, "body": "@user3033467 Not yet, still trying though"}], "answers": [{"tags": [], "owner": {"reputation": 31, "user_id": 6409139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f5c77dd1195563fb67750582ba9e?s=128&d=identicon&r=PG&f=1", "display_name": "ysr1991", "link": "https://stackoverflow.com/users/6409139/ysr1991"}, "is_accepted": false, "score": 0, "last_activity_date": 1464891742, "creation_date": 1464891742, "answer_id": 37599446, "question_id": 37567194, "link": "https://stackoverflow.com/questions/37567194/first-request-to-rails-app-extremely-slow/37599446#37599446", "title": "First request to rails app extremely slow", "body": "<p><strong>Answer</strong></p>\n\n<p>In production on localhost somehow my assets aren't served up (while they do appear in the public directory after a precompile).</p>\n\n<p>In production.rb:\n<strong><em>config.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present?</em></strong> \nwas changed to:\n<strong><em>config.serve_static_files = true</em></strong> or even \n<strong><em>config.serve_static_assets = true.</em></strong></p>\n\n<p>This also slows the first request down in a development environment apparently</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2713722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e9510562d816dff89c73dae98a955e4?s=128&d=identicon&r=PG&f=1", "display_name": "dead_man", "link": "https://stackoverflow.com/users/2713722/dead-man"}, "is_accepted": false, "score": -1, "last_activity_date": 1496508889, "last_edit_date": 1496508889, "creation_date": 1496507279, "answer_id": 44346145, "question_id": 37567194, "link": "https://stackoverflow.com/questions/37567194/first-request-to-rails-app-extremely-slow/44346145#44346145", "title": "First request to rails app extremely slow", "body": "<p>I have this problem too, and i found bottleneck.\nProblem in realization OpenSSL::Random.random_bytes on Windows (see this: <a href=\"https://github.com/rails/rails/issues/25805\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/issues/25805</a>). It used for cookies.</p>\n\n<p>I wrote this solution for my debug machine. But this is very dangerous and not must be used in production</p>\n\n<pre><code>module OpenSSL\n  module Random\n    def self.random_bytes(length)\n      ::Random.new.bytes(length)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6409139, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1a1f5c77dd1195563fb67750582ba9e?s=128&d=identicon&r=PG&f=1", "display_name": "ysr1991", "link": "https://stackoverflow.com/users/6409139/ysr1991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 932, "favorite_count": 0, "answer_count": 2, "score": 3, "last_activity_date": 1496508889, "creation_date": 1464780021, "last_edit_date": 1464864558, "question_id": 37567194, "link": "https://stackoverflow.com/questions/37567194/first-request-to-rails-app-extremely-slow", "title": "First request to rails app extremely slow", "body": "<p>The first request to my rails app is extremely slow in all environments.</p>\n\n<p>This should not be due different way of caching/loading gems. It was fine two hours ago and no major changes are made.</p>\n\n<p>What I did the hours before I noticed my app turned slow:</p>\n\n<ul>\n<li><p>I messed around in <strong>production.rb</strong> (NOT in <strong>development.rb</strong>): I was playing around with <strong><em>config.serve_static_assets = true</em></strong></p></li>\n<li><p>I did a bunch of tasks to diagnose why asset pipeline did not load my stylesheets and images in production (like <strong><em>rake assets:precompile RAILS_ENV=production</em></strong> and <strong><em>rake:clean assets:precompile</em></strong>).</p></li>\n</ul>\n\n<p>Afterwards I obviously tried to undo all the changes I made, but for some reason my app is now slow in development, while it was perfectly fine before.</p>\n\n<p><strong>How can I fix this?</strong></p>\n\n<p>Thanks in advance :-)</p>\n\n<p><strong>UPDATE 1</strong></p>\n\n<p>When I send a request for localhost:3000, only after 12-13 seconds I receive:\n<strong><em>Started GET \"/\" for ::1 at</em></strong> <em>random time</em></p>\n\n<p>Rendering behaving is normal. All requests after the first one are fine.</p>\n\n<p><strong>UPDATE 2</strong></p>\n\n<p>In an older version of my application I did the following:</p>\n\n<ul>\n<li>Replace the old 'app'-folder with the newer one</li>\n<li>Replace the old 'db'-files with the newer one</li>\n<li>Replace the old 'config'-files with the newer one</li>\n</ul>\n\n<p>Everything is running smoothly and still have no clue as to what was wrong in the first place. Please note that the version of the app from yesterday still runs slow, so this is not a non-rails related issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "devise"], "comments": [{"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464780430, "post_id": 37567187, "comment_id": 62621748, "body": "is that server information given after you click login button?"}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464780756, "post_id": 37567187, "comment_id": 62621976, "body": "Yes the message is from after clicking the login button"}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464780917, "post_id": 37567187, "comment_id": 62622086, "body": "what is the value of  url: session_path(resource_name)   ?"}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464781132, "post_id": 37567187, "comment_id": 62622227, "body": "the value is :user , the same name as the model which is automatically created by devise."}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464781172, "post_id": 37567187, "comment_id": 62622255, "body": "I meant what is the path of url, not the resource name"}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464781309, "post_id": 37567187, "comment_id": 62622338, "body": "path: new_user_session, verb: GET,  url:  /users/sign_in(.:format)          , controller action: devise/sessions#new"}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464781634, "post_id": 37567187, "comment_id": 62622523, "body": "when rendered it looks like : &lt;form class=&quot;new_user&quot; id=&quot;new_user&quot; action=&quot;/users/sign_in&quot; accept-charset=&quot;UTF-8&quot; method=&quot;post&quot;&gt;&lt;input name=&quot;utf8&quot; type=&quot;hidden&quot; value=&quot;&amp;#x2713;&quot; /&gt;&lt;input type=&quot;hidden&quot; name=&quot;authenticity_token&quot; value=&quot;P5NdpCBLkJPXFeSE098P3pQKzoz4olaz2TpkvRTaMGr/v7kBR1/cu&zwnj;&#8203;6kvDIXmNFmgP/GXo4HRw&zwnj;&#8203;6qs0RBeLEhPWg==&quot; /&gt;"}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464781754, "post_id": 37567187, "comment_id": 62622618, "body": "ath: new_user_session, verb: GET  &lt;--is this the path set on the submit form ? it should not be like that."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464782758, "post_id": 37567187, "comment_id": 62623383, "body": "I understand your point, and it seems like thats indeed the cause of the problem but how do i change the get to post. I&#39;ve only been using the default devise paths. I tried creating a create.html.erb file in the devise/sessions folder and i edited the link to the login page to user_session_path but its still not working and its still processing a get method."}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464783200, "post_id": 37567187, "comment_id": 62623710, "body": "i have updated my answer, can you find out wether it helps?"}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464783686, "post_id": 37567187, "comment_id": 62624058, "body": "Hmm no it still gives the same error. and it is : Processing by Devise::SessionsController#new as HTML"}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464783931, "post_id": 37567187, "comment_id": 62624237, "body": "then explicitly tell the post method like this , form_for( :user, url: user_session_path, method: :post) do |f|"}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464784240, "post_id": 37567187, "comment_id": 62624454, "body": "if that dosent work try restarting server. as you may already have logged in."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464784299, "post_id": 37567187, "comment_id": 62624503, "body": "still no luck mate. It goes wrong when i enter the page, before even submitting, it says: Started GET &quot;/users/sign_in&quot; for ::1 at 2016-06-01 14:32:08 +0200 Processing by Devise::SessionsController#new as HTML"}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464784468, "post_id": 37567187, "comment_id": 62624650, "body": "please check the rails console. user has sign_in_count filed. if that is 0 then you havenot logged in. But if that number&gt;0 then you have successfully logged in."}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464784648, "post_id": 37567187, "comment_id": 62624802, "body": "that is perfectly normal. before submitting, there is always almost Processing by Devise::SessionsController#new as HTML.  this is saying that you have clicked login button and the login form is rendered. main thing is what it says after submitting."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464784819, "post_id": 37567187, "comment_id": 62624948, "body": "Ok&#233; what i did was, delete the new.html.erb (which was automatically created by devise:views) and i made a create.html.erb with the same layout. Now when i go to sign_in it gives me the standard devise layout and when i fill in my information it brings me to my custom layout and when i fill my information again it suddenly works. I&#39;m logged in. but how do i get to my custom layout instantly .... this is stressing me out, one error after the other."}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464785000, "post_id": 37567187, "comment_id": 62625093, "body": "new.html.erb is where you keep your form.  create.html.erb is not needed here.    when the action new gets hit, it render the new.html.erb. after submitting this form, it will go the devise session controller create action. it is all in the form url"}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464785145, "post_id": 37567187, "comment_id": 62625222, "body": "try a fresh project. follow this post <a href=\"http://guides.railsgirls.com/devise\" rel=\"nofollow noreferrer\">guides.railsgirls.com/devise</a>"}, {"owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464785209, "post_id": 37567187, "comment_id": 62625292, "body": "remember failure is what teaches us. its frustating, but it will pay its worth. happy coding.   also dont forget to update this post , if you manage to solve this problem. you are already one step closer."}, {"owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "reply_to_user": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "edited": false, "score": 0, "creation_date": 1464793263, "post_id": 37567187, "comment_id": 62631935, "body": "I fixed the issue and posted the answer.. thanks for all your help i really appreciated it."}], "answers": [{"tags": [], "owner": {"reputation": 587, "user_id": 4466202, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh5.googleusercontent.com/-ZgsCesLWLLQ/AAAAAAAAAAI/AAAAAAAAAFI/dJ2sEaHMC7I/photo.jpg?sz=128", "display_name": "Ccr", "link": "https://stackoverflow.com/users/4466202/ccr"}, "is_accepted": false, "score": 1, "last_activity_date": 1464784221, "last_edit_date": 1464784221, "creation_date": 1464781630, "answer_id": 37567756, "question_id": 37567187, "link": "https://stackoverflow.com/questions/37567187/devise-login-doesnt-work-no-error-messages/37567756#37567756", "title": "Devise login doesn&#39;t work / no error messages", "body": "<p>if that response from server is given after you submit the form,\nthen you have messed up something. check your routes.</p>\n\n<p>when we submit the login form, server should show</p>\n\n<pre><code>Processing by Devise::SessionsController#create as HTML\n</code></pre>\n\n<p>also, when the form is submited the request is in POST like below</p>\n\n<pre><code>Started POST \"/users/sign_in\" for ::1 at 2016-06-01 17:11:36 +0545\n</code></pre>\n\n<p>but your server is sending a Get request. </p>\n\n<pre><code>Started GET \"/users/sign_in?utf8=%E2%9C%93&amp;authenticit...\n</code></pre>\n\n<blockquote>\n  <p>path: new_user_session, verb: GET, url: /users/sign_in(.:format)</p>\n</blockquote>\n\n<p>the path should be <code>user_session_path</code> with verb POST</p>\n\n<p><strong>update</strong>: \ntry this and see what happens.</p>\n\n<pre><code>form_for( :user, url: user_session_path) do |f|\n</code></pre>\n\n<p><strong>update2:</strong>\nalso I have found that if you are already logged in, and still  try to log in again without logout, it is again redirected to SessionsController#new. try restarting your server and observe the server during the first login.</p>\n"}, {"tags": [], "owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "is_accepted": true, "score": 2, "last_activity_date": 1464793187, "creation_date": 1464793187, "answer_id": 37572319, "question_id": 37567187, "link": "https://stackoverflow.com/questions/37567187/devise-login-doesnt-work-no-error-messages/37572319#37572319", "title": "Devise login doesn&#39;t work / no error messages", "body": "<p>The answer was rather simple all along</p>\n\n<p>I had to change <code>&lt;form class=\"sign-box\"&gt;</code> to <code>&lt;div class=\"sign-box\"&gt;</code>\ncause apparently you can't have a ruby form_for tag inside a html form attribute.</p>\n"}], "owner": {"reputation": 866, "user_id": 5768081, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/NGa7y.jpg?s=128&g=1", "display_name": "luissimo", "link": "https://stackoverflow.com/users/5768081/luissimo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1513, "favorite_count": 0, "accepted_answer_id": 37572319, "answer_count": 2, "score": 1, "last_activity_date": 1464793187, "creation_date": 1464779995, "question_id": 37567187, "link": "https://stackoverflow.com/questions/37567187/devise-login-doesnt-work-no-error-messages", "title": "Devise login doesn&#39;t work / no error messages", "body": "<p>Guys i've looked everywhere to fix this issue but I'm out of luck.</p>\n\n<p>I got a devise login system and i signed up an account admin@admin.com in development and on the log i got the confirmation email and i went to that email and so my account got confirmed. Now when i try to login the console gives me this message:</p>\n\n<pre><code>Started GET \"/users/sign_in?utf8=%E2%9C%93&amp;authenticity_token=iHIEXxGHWaIdtAGhcZ7EKvEEEYGmoEfgr1K8NcKb9nFIXuD6dpMVimOO6aBEdZJUWv9Irt%2FT0vnaucjW%2BgmJQQ%3D%3D&amp;user%5Bemail%5D=admin%40admin.com&amp;user%5Bpassword%5D=[FILTERED]&amp;user%5Bremember_me%5D=0&amp;commit=Log+in\" for ::1 at 2016-06-01 13:11:54 +0200\nProcessing by Devise::SessionsController#new as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"iHIEXxGHWaIdtAGhcZ7EKvEEEYGmoEfgr1K8NcKb9nFIXuD6dpMVimOO6aBEdZJUWv9Irt/T0vnaucjW+gmJQQ==\", \"user\"=&gt;{\"email\"=&gt;\"admin@admin.com\", \"password\"=&gt;\"[FILTERED]\", \"remember_me\"=&gt;\"0\"}, \"commit\"=&gt;\"Log in\"}\n  Rendered devise/sessions/new.html.erb within layouts/application (3.7ms)\n  Rendered partials/_header.html.erb (0.5ms)\n  Rendered partials/_menu.html.erb (0.2ms)\n  Rendered shared/_breadcrumbs.html.erb (0.0ms)\n  Rendered partials/_footer.html.erb (0.0ms)\n  Rendered partials/_javascripts.html.erb (0.0ms)\nCompleted 200 OK in 143ms (Views: 52.6ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>After this the page just refreshes and i'm not logged in.\nWhen i go to resend confirmation instructions it says 'email is already confirmed, try signing in'</p>\n\n<p>My sign in form looks like this:</p>\n\n<pre><code>&lt;% provide(:title, \"Sign in\") %&gt;\n&lt;div class=\"col-md-12\"&gt;\n  &lt;form class=\"sign-box\"&gt;\n    &lt;header class=\"sign-title\"&gt; Sign in &lt;/header&gt;\n\n    &lt;%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %&gt;\n\n        &lt;% if devise_error_messages!.present? %&gt;\n            &lt;div class=\"alert alert-warning alert-icon alert-close alert-dismissable fade in\" role=\"alert\"&gt;\n              &lt;button type=\"button\" class=\"close\" data-dismiss=\"alert\" aria-label=\"Close\"&gt;\n                &lt;span aria-hidden=\"true\"&gt;&amp;times;&lt;/span&gt;\n              &lt;/button&gt;\n              &lt;i class=\"font-icon font-icon-warning\"&gt;&lt;/i&gt;\n              &lt;%= devise_error_messages! %&gt;\n            &lt;/div&gt;\n        &lt;% end %&gt;\n\n      &lt;div class=\"field form-group\"&gt;\n        &lt;%= f.label :email, class: 'float-left' %&gt;&lt;br /&gt;\n        &lt;%= f.email_field :email, class: 'form-control', autofocus: true %&gt;\n      &lt;/div&gt;\n\n      &lt;div class=\"field form-group\"&gt;\n        &lt;%= f.label :password, class: 'float-left' %&gt;&lt;%= link_to 'Forgot your password?', new_user_password_path, class: 'float-right reset' %&gt;\n        &lt;%= f.password_field :password, class: 'form-control', autocomplete: \"off\" %&gt;\n      &lt;/div&gt;\n\n      &lt;% if devise_mapping.rememberable? -%&gt;\n        &lt;div class=\"field form-group\"&gt;\n          &lt;div class=\"checkbox float-left\"&gt;\n            &lt;%= f.check_box :remember_me %&gt;\n            &lt;%= f.label :remember_me %&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;% end -%&gt;\n\n      &lt;div class=\"actions\"&gt;\n        &lt;%= f.submit \"Log in\", class: 'btn btn-rounded' %&gt;\n      &lt;/div&gt;\n\n        &lt;p class=\"sign-note\"&gt;New to our website? &lt;%= link_to \"Sign Up\", new_user_registration_path %&gt;&lt;/p&gt;\n    &lt;% end %&gt;\n  &lt;/form&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>What could it be guys? I'm out of options after trying for days.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "multiple-inheritance"], "answers": [{"tags": [], "owner": {"reputation": 66, "user_id": 5888716, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7e4c73244a91942d79cdb93176097fa?s=128&d=identicon&r=PG&f=1", "display_name": "Ruslan", "link": "https://stackoverflow.com/users/5888716/ruslan"}, "is_accepted": false, "score": 0, "last_activity_date": 1464788419, "creation_date": 1464788419, "answer_id": 37570437, "question_id": 37566687, "link": "https://stackoverflow.com/questions/37566687/multi-table-inheritance-on-rails-active-record/37570437#37570437", "title": "Multi table Inheritance on rails (active record)", "body": "<p>I have used Single Table Inheritance quite a bit and it works really well.</p>\n\n<p>However in this case, you can have one table with common attributes and then different tables for the attributes that are not shared. You can specify the relationship in inherited models. </p>\n\n<p>Or you can have a single table with a serialised column to store different attributes. But that will get clunky if you try to do a search on them.</p>\n\n<p>Probably Multi Table Inheritance will be the best way to go</p>\n\n<p>The only way to know if the gem is good is to try it</p>\n"}], "owner": {"reputation": 1007, "user_id": 5351714, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ed8a93ea89809e3812bdfb926389ff96?s=128&d=identicon&r=PG&f=1", "display_name": "lolix", "link": "https://stackoverflow.com/users/5351714/lolix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 387, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1464788419, "creation_date": 1464778573, "question_id": 37566687, "link": "https://stackoverflow.com/questions/37566687/multi-table-inheritance-on-rails-active-record", "title": "Multi table Inheritance on rails (active record)", "body": "<p>I am trying implement a Multi table Inheritance. In my situation I am trying modeling Appliances. Appliances have common attributes like price, name and model but there are different types of appliances like TV, Freezer, Fridge with different attributes (temperature, size, etc...).</p>\n\n<p>I search and I found this gem <a href=\"https://github.com/hzamani/active_record-acts_as\" rel=\"nofollow\">https://github.com/hzamani/active_record-acts_as</a>. What you think ? What is the best way to implement this ? There is other pattern to implement this ?</p>\n"}, {"tags": ["ruby", "json", "key-value"], "comments": [{"owner": {"reputation": 2437, "user_id": 4058838, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/56c7770d8f5d6b9ec7a13e82fbf0a59c?s=128&d=identicon&r=PG", "display_name": "Amit Badheka", "link": "https://stackoverflow.com/users/4058838/amit-badheka"}, "edited": false, "score": 1, "creation_date": 1464778792, "post_id": 37566626, "comment_id": 62620581, "body": "Can you put a valid JSON?"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464785391, "post_id": 37566626, "comment_id": 62625447, "body": "I think it&#39;s helpful to view JSON as only a way of expressing objects.  You&#39;ll probably want to parse the JSON into Ruby objects, perform your operations with those objectes, and write that to JSON, right?  JSON is only the very beginning and the very end of the journey."}], "owner": {"reputation": 33, "user_id": 6409006, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/496468e8710d2eb3fdd63dfa54f9e9de?s=128&d=identicon&r=PG&f=1", "display_name": "Rendevou", "link": "https://stackoverflow.com/users/6409006/rendevou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 142, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464783718, "creation_date": 1464778437, "last_edit_date": 1464783718, "question_id": 37566626, "link": "https://stackoverflow.com/questions/37566626/json-data-manipulation-using-ruby", "title": "JSON data manipulation using ruby", "body": "<p>I have a json file that I want to search using ruby and remove the key-value pair by identifying any one key out of a particular set of keys. I also need to rename a key wherever present in json file. I am stuck at this problem. The json file can be nested multiple times. Is DFS a good idea for traversal or I must look for hashing. I am facing error whenever I try. I am new to ruby.\nSample JSON file.</p>\n\n<p>eg- here i want to delete <code>R_a</code> and <code>R_b</code> and rename <code>R_a</code> to <code>R</code>.\n  The <strong>output</strong> should look something like this:</p>\n\n<pre><code>f1:{\n    f11:abc\n    f12:def\n    R:[0 1]\n},\nf2: {\nf21:abc\nR:[0 1]\n},\nf3:{\nf31:klm\n}\nR:[5 9]\n}\n</code></pre>\n\n<p>for the <strong>input</strong>:</p>\n\n<pre><code>{\nf1: {\nf11:abc\nf12:def\nR_a:[0 1]\n},\nf2:\n{ f21:abc\nR_a:[0 1]\nR_b:[3 0]\nR_c:[6 7]\n}\nf3: {\nf31:klm\nR_b:[8 9]\n}\nR_a:[5 9]\nR_b:[3 7]\n}\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 1, "creation_date": 1464778372, "post_id": 37566402, "comment_id": 62620245, "body": "why you need this ?"}, {"owner": {"reputation": 639, "user_id": 1956964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0jQ4l.png?s=128&g=1", "display_name": "dr. strange", "link": "https://stackoverflow.com/users/1956964/dr-strange"}, "reply_to_user": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "edited": false, "score": 0, "creation_date": 1464778969, "post_id": 37566402, "comment_id": 62620695, "body": "to improve script writing skill in ruby."}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 5, "creation_date": 1464779224, "post_id": 37566402, "comment_id": 62620888, "body": "<code>val.&#47;(ded.to_f)</code> doesn&#39;t use a Ruby operator in the syntax sense. <code>Math.exp( Math.log(val) - Math.log(ded) )</code> doesn&#39;t do division directly, but it doesn&#39;t implement division logic as performed by fp processor. I don&#39;t see how either of these improve script writing either. The problem is more a computer science or maths thing. Could you be clearer on the goal of what you mean by &quot;operator&quot;, and what kind of solutions you have been told are allowed? Without a clear goal, the &quot;best&quot; way to write that script is <i>to not write the script</i> . . . especially if &quot;best&quot; means most efficient"}, {"owner": {"reputation": 715, "user_id": 1261158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6849c34a3862c8c5c3f9f515bbcbfa05?s=128&d=identicon&r=PG", "display_name": "pshoukry", "link": "https://stackoverflow.com/users/1261158/pshoukry"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1464781388, "post_id": 37566402, "comment_id": 62622384, "body": "I added a solution, but I have to agree with @NeilSlater this is a computer science or math than enhance script writing."}], "answers": [{"tags": [], "owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "is_accepted": false, "score": 1, "last_activity_date": 1464779480, "creation_date": 1464779480, "answer_id": 37567001, "question_id": 37566402, "link": "https://stackoverflow.com/questions/37566402/divide-number-without-divide-operator-using-ruby/37567001#37567001", "title": "Divide number without divide operator using ruby", "body": "<pre><code>def divide_me(val,ded)\n    i = 1; new_num=0\n    rem = val.to_f % ded\n    val = val - rem\n    while (val != new_num)\n        i += 1\n        new_num = ded * i\n    end\n    temp = 0.01\n    temp += 0.01 until ded * temp &gt;= rem\n    return i + temp.round(2)\nend\n\np divide_me(14,4)\n=&gt;3.5\np divide_me(15,4)\n=&gt;3.75\np divide_me(16,7)\n=&gt;2.29\n</code></pre>\n\n<p>Expanding on your existing code, this will get you to reasonably accurate 2 decimal places. Remove the .round(2) to see how inaccurate floats are.</p>\n"}, {"tags": [], "owner": {"reputation": 901, "user_id": 3872380, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/wy14q.jpg?s=128&g=1", "display_name": "Mukesh", "link": "https://stackoverflow.com/users/3872380/mukesh"}, "is_accepted": false, "score": 0, "last_activity_date": 1464780091, "creation_date": 1464780091, "answer_id": 37567223, "question_id": 37566402, "link": "https://stackoverflow.com/questions/37566402/divide-number-without-divide-operator-using-ruby/37567223#37567223", "title": "Divide number without divide operator using ruby", "body": "<p>This logic may help you</p>\n\n<pre><code>val = 14\nded = 4\n\nr = val % ded\nvalue = val -r\n\nv_ck = 0\ni = 0\nwhile( value != v_ck ) \n\n    i+=1\n    v_ck =  ded * i\nend\n\nded_ck = 0\nj = 0\nwhile(ded_ck != ded)    \n   j += 1 \n   ded_ck = r * j\nend\n\nputs  i.to_s+\".\"+j.to_s\n</code></pre>\n"}], "owner": {"reputation": 639, "user_id": 1956964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0jQ4l.png?s=128&g=1", "display_name": "dr. strange", "link": "https://stackoverflow.com/users/1956964/dr-strange"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "answer_count": 2, "score": -6, "last_activity_date": 1464781022, "creation_date": 1464777826, "question_id": 37566402, "link": "https://stackoverflow.com/questions/37566402/divide-number-without-divide-operator-using-ruby", "title": "Divide number without divide operator using ruby", "body": "<p>I want to divide number without divide operator</p>\n\n<pre><code>def divede_me(val,ded)\n    i = 1; new_num=0\n    rem = val % ded\n    val = val - rem\n    while (val != new_num)\n        i += 1      \n        new_num = ded * i       \n    end \n    return i\nend\n\np divede_me(14,4)\n</code></pre>\n\n<p>above script return 3 but i want floating point also (for Ex. 3.5) and best way to write above script.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "edited": false, "score": 0, "creation_date": 1464778491, "post_id": 37566234, "comment_id": 62620340, "body": "Will <a href=\"http://stackoverflow.com/questions/2328984/rails-extending-activerecordbase\">this</a> question help?"}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1464778738, "post_id": 37566234, "comment_id": 62620544, "body": "for me it can be resided in two places: 1. <code>lib&#47;models&#47;...</code> and 2. <code>app&#47;models&#47;concern</code>. the modules from both places should be explicitly included/extended to the model"}, {"owner": {"reputation": 379, "user_id": 5941617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b31e5e9a64252e84b40190beb943ac2d?s=128&d=identicon&r=PG&f=1", "display_name": "A. Neumann", "link": "https://stackoverflow.com/users/5941617/a-neumann"}, "edited": false, "score": 0, "creation_date": 1464779644, "post_id": 37566234, "comment_id": 62621196, "body": "Can you explain why you do it this way? The proposal down below for example is somehow different (put model related stuff in a sub-folder)"}], "answers": [{"tags": [], "owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "is_accepted": false, "score": 1, "last_activity_date": 1464778539, "creation_date": 1464778539, "answer_id": 37566673, "question_id": 37566234, "link": "https://stackoverflow.com/questions/37566234/where-to-properly-outsource-model-code-in-rails-4/37566673#37566673", "title": "Where to properly outsource model code in rails 4?", "body": "<p>I started putting stuff like that in subfolders of <code>models</code> and namespacing things accordingly. In your specific case I'd put it in something like <code>models/place/translator.rb</code> (or similar) and call the class <code>Place::Translator</code>.</p>\n\n<p>If you just want a sort of logical separation but will not use the same functionality elsewhere you can use <a href=\"http://api.rubyonrails.org/v4.1/classes/Module/Concerning.html\" rel=\"nofollow\">concerning</a> instead of a separate concern.</p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1464779637, "creation_date": 1464779637, "answer_id": 37567044, "question_id": 37566234, "link": "https://stackoverflow.com/questions/37566234/where-to-properly-outsource-model-code-in-rails-4/37567044#37567044", "title": "Where to properly outsource model code in rails 4?", "body": "<p>There are many options and most of them are primarily opinion-based. It depends on if you plan to reuse that class, how complex your application already is and if the new class has any external dependency. </p>\n\n<p>I would think about: create your own gem, add to <code>app/models</code>, add a new <code>app/translators</code> directory, perhaps in <code>lib</code>...</p>\n"}], "owner": {"reputation": 379, "user_id": 5941617, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/b31e5e9a64252e84b40190beb943ac2d?s=128&d=identicon&r=PG&f=1", "display_name": "A. Neumann", "link": "https://stackoverflow.com/users/5941617/a-neumann"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 35, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464779637, "creation_date": 1464777372, "question_id": 37566234, "link": "https://stackoverflow.com/questions/37566234/where-to-properly-outsource-model-code-in-rails-4", "title": "Where to properly outsource model code in rails 4?", "body": "<p>In a model of mine I'm using the bing translator gem for automatic translation of a model attribute via a <code>after_create</code> callback:</p>\n\n<pre><code>class Place &lt; ActiveRecord::Base\n\n  after_create :auto_translate\n\n  ....\n\n  # AUTO_TRANSLATE STUFF\n  def initialize_bing_translator(bing_id, bing_secret)\n    t = BingTranslator.new(bing_id, bing_secret)\n    &lt;do other stuff&gt;\n  end\n\n  def auto_translate\n    &lt;do stuff&gt;\n  end\n\n  &lt;further auto_translate methods&gt;\n</code></pre>\n\n<p>The whole bunch of functions seems to bloat the model code a little so I want to put it into some extra module. <strong>Where</strong> exactly shall I place the .rb-file? Is this a use-case for a concern (a concept I did not fully understood)? Is it better to define a seperate module in the model file itself or to place it in <code>/lib/user_modules/</code>? Is there sth like a rule-of-thumb? The information available on the web are confusing me a little and I'd be glad if someone could shed some light on that issue for me!</p>\n"}, {"tags": ["ruby", "constructor", "initialization", "keyword-argument"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464781838, "post_id": 37566224, "comment_id": 62622678, "body": "<code>wheel: nil</code> would be equivalent"}], "answers": [{"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464787304, "post_id": 37567287, "comment_id": 62627123, "body": "Agis, and if I do what Stefan suggested in the comment above?"}], "tags": [], "owner": {"reputation": 29080, "user_id": 1242778, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/AKoAV.jpg?s=128&g=1", "display_name": "Agis", "link": "https://stackoverflow.com/users/1242778/agis"}, "is_accepted": false, "score": 0, "last_activity_date": 1464780274, "creation_date": 1464780274, "answer_id": 37567287, "question_id": 37566224, "link": "https://stackoverflow.com/questions/37566224/ruby-initialization-with-keyword-args/37567287#37567287", "title": "ruby initialization with keyword args", "body": "<p>Your example with keywords argument is not equivalent to the old way, because <code>:wheel</code> will be required, whereas in the old code it wasn't.</p>\n\n<p>You can't use keyword args if you want the keywords to be optional.</p>\n"}, {"comments": [{"owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "edited": false, "score": 0, "creation_date": 1464798242, "post_id": 37573286, "comment_id": 62635264, "body": "Jorg, thanks for the detailed answer! I&#39;ve got 2 questions though: 1. Could you pls tell me you use <code>@chainring = args[:chainring]</code> instead of <code>@chainring = chainring</code> (question also goes for @cog and @wheel) in the last example? 2. So if I wanna make wheel optional then I can just use <code>wheel: nil</code> in the args, but if I wanna make it required then just use <code>wheel:</code> in the argument?"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 5, "last_activity_date": 1464817382, "last_edit_date": 1464817382, "creation_date": 1464795896, "answer_id": 37573286, "question_id": 37566224, "link": "https://stackoverflow.com/questions/37566224/ruby-initialization-with-keyword-args/37573286#37573286", "title": "ruby initialization with keyword args", "body": "<p>The <em>literal</em> equivalent would be this:</p>\n\n<pre><code>class Gear\n  def initialize(**args)\n    @chainring = args.fetch(:chainring, 40)\n    @cog =  args.fetch(:cog, 10)\n    @wheel = args[:wheel]\n  end\nend\n</code></pre>\n\n<p>The original code allows arbitrary keys to be passed and just ignores the ones it doesn't need, therefore, we use the **ksplat to allow arbitrary arguments.</p>\n\n<p>We could refactor that code to this:</p>\n\n<pre><code>class Gear\n  def initialize(chainring: 40, cog: 10, **args)\n    @chainring = chainring\n    @cog = cog\n    @wheel = args[:wheel]\n  end\nend\n</code></pre>\n\n<p>This reads slightly better. But it's still bad design: why allow the user to pass arbitrary keys? It's most likely to be a bug, when an unused key is passed. E.g. the user calls <code>Gear.new(cgo: 20)</code>, which is clearly a typo, but instead of getting an error, he will silently get wrong data (a <code>cog</code> value of <code>10</code>).</p>\n\n<pre><code>class Gear\n  def initialize(chainring: 40, cog: 10, wheel: nil)\n    @chainring = chainring\n    @cog = cog\n    @wheel = wheel\n  end\nend\n</code></pre>\n\n<p>This is equivalent to the <em>intended</em> behavior of the original code, I would guess. It behaves differently, in that it doesn't allow arbitrary keys to be passed, but I don't think that makes sense anyway. So, while not equivalent, it is arguably <em>better</em>.</p>\n\n<p>However, there is still a problem (that also exists in the original code): it is possible to not pass <code>wheel</code>, making <code>wheel</code> end up <code>nil</code>. However, <code>wheel</code> is used unconditionally (e.g. in <code>diameter</code>), which means, it will blow up at runtime when <code>wheel</code> is <code>nil</code>. So, it is better to require <code>wheel</code> to be passed:</p>\n\n<pre><code>class Gear\n  def initialize(chainring: 40, cog: 10, wheel:)\n    @chainring = chainring\n    @cog = cog\n    @wheel = wheel\n  end\nend\n</code></pre>\n\n<p>Which is, of course, exactly what you had. This is <em>not</em> equivalent in behavior, but I would ague it <em>is</em> equivalent in <em>intent</em> and is arguably much better and more correct.</p>\n"}], "owner": {"reputation": 2210, "user_id": 4811651, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ozvMA.jpg?s=128&g=1", "display_name": "Sean Magyar", "link": "https://stackoverflow.com/users/4811651/sean-magyar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1523, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1464817382, "creation_date": 1464777347, "question_id": 37566224, "link": "https://stackoverflow.com/questions/37566224/ruby-initialization-with-keyword-args", "title": "ruby initialization with keyword args", "body": "<p>I'm reading the POODR book and it uses the old syntax for initialization with default values. I wanna implement the same with the new syntax.</p>\n\n<pre><code>class Gear\n  attr_reader :chainring, :cog, :wheel\n  def initialize(args)\n    @chainring = args.fetch(:chainring, 40)\n    @cog =  args.fetch(:cog, 10)\n    @wheel = args[:wheel]\n  end\n\n  def gear_inches\n    ratio * diameter\n  end\n\n  def diameter\n    wheel * diameter\n  end\nend\n\nGear.new(chainring: 52, cog: 11, wheel: Wheel.new(26,1.5)).gear_inches\n</code></pre>\n\n<p>How would this look like with the new keyword args? This is my guess below, but not sure if it results the same for the wheel like above.</p>\n\n<pre><code>class Gear\n  attr_reader :chainring, :cog, :wheel\n  def initialize(chainring: 40, cog: 10, wheel:) #is this good here for wheel?\n    @chainring = chainring\n    @cog = cog\n    @wheel = wheel #is this good here for wheel?\n  end\n\n  ......\nend\n</code></pre>\n"}, {"tags": ["ruby", "rest", "rubygems", "sensu"], "comments": [{"owner": {"reputation": 752, "user_id": 3218830, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/b49bccdb43e803fa91b36f215c7a27ec?s=128&d=identicon&r=PG&f=1", "display_name": "Kobbe", "link": "https://stackoverflow.com/users/3218830/kobbe"}, "edited": false, "score": 0, "creation_date": 1464779516, "post_id": 37565178, "comment_id": 62621096, "body": "Have you even tried to search on &#39;require: cannot load such file&#39;? There are tons of solutions."}], "answers": [{"tags": [], "owner": {"reputation": 2077, "user_id": 628781, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/28701a15cc3faa9779462f597c5efa20?s=128&d=identicon&r=PG", "display_name": "Ken Brittain", "link": "https://stackoverflow.com/users/628781/ken-brittain"}, "is_accepted": false, "score": 0, "last_activity_date": 1465474140, "creation_date": 1465474140, "answer_id": 37725599, "question_id": 37565178, "link": "https://stackoverflow.com/questions/37565178/sensu-ruby-rest-client-1-8-0-issue/37725599#37725599", "title": "Sensu Ruby rest-client-1.8.0 issue", "body": "<p>Your Sensu installation installation has an embedded <code>ruby</code> distribution. Locate your sensu, default is <code>/opt/sensu/embedded</code>, and run the <code>gem</code> from the <code>bin</code> directory contained within. This should apply the gem to the proper ruby location.</p>\n"}, {"tags": [], "owner": {"reputation": 319, "user_id": 6336357, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/305c6c0e41d22e364762b4eb6a959cf7?s=128&d=identicon&r=PG", "display_name": "Rick Rackow", "link": "https://stackoverflow.com/users/6336357/rick-rackow"}, "is_accepted": false, "score": 0, "last_activity_date": 1465491409, "creation_date": 1465491409, "answer_id": 37732027, "question_id": 37565178, "link": "https://stackoverflow.com/questions/37565178/sensu-ruby-rest-client-1-8-0-issue/37732027#37732027", "title": "Sensu Ruby rest-client-1.8.0 issue", "body": "<p>You are using the embedded ruby and this error message hints, that you don\u2019t have the rest-client gem installed there.\nIt\u2019s not really useful if you do \n<code>gem install rest-client</code>\nbecause this is not what you will be using </p>\n\n<p>you want \n<code>/opt/sensu/embedded/bin/gem install rest-client</code>, so that it gets installed to embedded ruby gems of sense</p>\n"}, {"tags": [], "owner": {"reputation": 34972, "user_id": 3288890, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/sSQpx.jpg?s=128&g=1", "display_name": "Adiii", "link": "https://stackoverflow.com/users/3288890/adiii"}, "is_accepted": false, "score": 0, "last_activity_date": 1554723838, "creation_date": 1554723838, "answer_id": 55572695, "question_id": 37565178, "link": "https://stackoverflow.com/questions/37565178/sensu-ruby-rest-client-1-8-0-issue/55572695#55572695", "title": "Sensu Ruby rest-client-1.8.0 issue", "body": "<p>The question is too old and already answered, but I was working to set new AMI based on Amazon ECS, and this plugin suck my whole day with the above error, so nothing work, tried everything.</p>\n\n<p>Even update everything but still no luck,</p>\n\n<p>Then tried with a specific version and which solve my issue.</p>\n\n<pre><code>/opt/sensu/embedded/bin/gem install rest-client -v=1.7.2\n</code></pre>\n\n<p>And credit definitely goes to this article.</p>\n\n<p><a href=\"https://docs.bmc.com/docs/ReleaseProcessMgt/50/installing/installing-alternate-ruby-interpreter\" rel=\"nofollow noreferrer\">https://docs.bmc.com/docs/ReleaseProcessMgt/50/installing/installing-alternate-ruby-interpreter</a></p>\n"}], "owner": {"reputation": 39, "user_id": 5023065, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/7da100df1f4022ce02edfb5dbdcacc1c?s=128&d=identicon&r=PG&f=1", "display_name": "Mohamed Safi", "link": "https://stackoverflow.com/users/5023065/mohamed-safi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 274, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1554723838, "creation_date": 1464774552, "question_id": 37565178, "link": "https://stackoverflow.com/questions/37565178/sensu-ruby-rest-client-1-8-0-issue", "title": "Sensu Ruby rest-client-1.8.0 issue", "body": "<p>We are doing an application in which we have to find from where the message is triggering to RabbitMQ. We found that the message is posting to RabbitMQ  from process.rb file. We tried to make a rest call to get what  message is getting posted to RabbitMQ. So we added a gem rest-client-1.8.0 in our ubuntu machine. And we tried to add some code in server/process.rb and also we added require 'rest-client' in the code. </p>\n\n<p>I have added the header \"rest-client\" as show below.</p>\n\n<pre><code>require \"sensu/server/filter\"\nrequire \"sensu/server/mutate\"\nrequire \"sensu/server/handle\"\nrequire \"rest-client\"\n</code></pre>\n\n<p>Error:</p>\n\n<p>/opt/sensu/embedded/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in <code>require': cannot load such file -- rest-client (LoadError)\n    from /opt/sensu/embedded/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in</code>require'\n    from /opt/sensu/embedded/lib/ruby/gems/2.0.0/gems/sensu-0.20.3/lib/sensu/server/process.rb:5:in <code>&lt;top (required)&gt;'\n    from /opt/sensu/embedded/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in</code>require'\n    from /opt/sensu/embedded/lib/ruby/2.0.0/rubygems/core_ext/kernel_require.rb:55:in <code>require'\n    from /opt/sensu/embedded/lib/ruby/gems/2.0.0/gems/sensu-0.20.3/bin/sensu-server:7:in</code>'\n    from /opt/sensu/bin/sensu-server:23:in <code>load'\n    from /opt/sensu/bin/sensu-server:23:in</code>'</p>\n\n<p>Sensu is installed in the path \"/opt/sensu/embedded/lib/ruby/gems/2.0.0/gems/sensu-0.20.3/lib/sensu\" in our ubuntu machine. We tried to install the rest-client gem inside sensu as we found Sensu will run on its own Ruby. But we faced the same issue. Can you tell us where we have to install the gem? Is there any alternative way? I have to consume the message and i have to pass the payload in rest calls.</p>\n"}, {"tags": ["ruby", "metaprogramming"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464774496, "post_id": 37564928, "comment_id": 62617498, "body": "What is wrong with the response of the <code>caller</code> method?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1464775034, "post_id": 37564928, "comment_id": 62617872, "body": "<code>caller</code> returns the current execution stack, in the format: <code>file:line: in `method&#39;</code>. What&#39;s wrong with that?"}, {"owner": {"reputation": 17010, "user_id": 2912282, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/5HEmE.jpg?s=128&g=1", "display_name": "Milan Nos&#225;\u013e", "link": "https://stackoverflow.com/users/2912282/milan-nos%c3%a1%c4%be"}, "edited": false, "score": 0, "creation_date": 1464778574, "post_id": 37564928, "comment_id": 62620411, "body": "just did not want to parse it"}], "answers": [{"tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 6, "last_activity_date": 1549301939, "last_edit_date": 1549301939, "creation_date": 1464775353, "answer_id": 37565500, "question_id": 37564928, "link": "https://stackoverflow.com/questions/37564928/how-to-find-out-from-which-line-number-the-method-was-called-in-ruby/37565500#37565500", "title": "How to find out from which line number the method was called in Ruby?", "body": "<p>You can use <code>caller_locations</code> which has been added recently. It returns an array of <code>Location</code> objects. See <a href=\"http://ruby-doc.org/core-2.2.3/Thread/Backtrace/Location.html\" rel=\"nofollow noreferrer\">http://ruby-doc.org/core-2.2.3/Thread/Backtrace/Location.html</a> for details.</p>\n\n<p>No need to parse the return of <code>caller</code>. Hooray.</p>\n\n<p>To add on to this <code>caller_locations.first</code> or <code>caller_locations(0)</code> gets the last method location, increment the parameter to pull specific steps.</p>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1464778198, "post_id": 37565520, "comment_id": 62620111, "body": "using caller_locations will spare you from parsing strings."}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1464783865, "post_id": 37565520, "comment_id": 62624188, "body": "@pascalbetz I did not know it, I saw your answer afterwards which is way better. I just did not edit my answer because it works and also it gives an alternative way of doing it. Also, I did not want to paraphrase your answer."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1464784067, "post_id": 37565520, "comment_id": 62624325, "body": "Yes, the method was only added recently. It&#39;s also said to be more performant."}], "tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": false, "score": 1, "last_activity_date": 1464775404, "creation_date": 1464775404, "answer_id": 37565520, "question_id": 37564928, "link": "https://stackoverflow.com/questions/37564928/how-to-find-out-from-which-line-number-the-method-was-called-in-ruby/37565520#37565520", "title": "How to find out from which line number the method was called in Ruby?", "body": "<p>To get the line of the ast function call <code>caller[0].scan(/\\d+/).first</code> :</p>\n\n<pre><code>def func0\n  func1\nend\n\ndef func1\n  func2\nend\n\n\ndef func2\n  func3\nend\n\ndef func3\n  p caller[0].scan(/\\d+/).first\nend\n\nfunc0\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1464783144, "post_id": 37567177, "comment_id": 62623676, "body": "no, he is looking for the line number where the method is called."}], "tags": [], "owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "is_accepted": false, "score": 2, "last_activity_date": 1464779963, "creation_date": 1464779963, "answer_id": 37567177, "question_id": 37564928, "link": "https://stackoverflow.com/questions/37564928/how-to-find-out-from-which-line-number-the-method-was-called-in-ruby/37567177#37567177", "title": "How to find out from which line number the method was called in Ruby?", "body": "<pre><code>def b\n  puts \"world\"\nend\n\ndef a\n  puts \"hello\"\nend\n\np method(:a).source_location\n=&gt; [\"filename.rb\", 5]\n</code></pre>\n\n<p>Is this what your after?</p>\n"}], "owner": {"reputation": 17010, "user_id": 2912282, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/5HEmE.jpg?s=128&g=1", "display_name": "Milan Nos&#225;\u013e", "link": "https://stackoverflow.com/users/2912282/milan-nos%c3%a1%c4%be"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 0, "accepted_answer_id": 37565500, "answer_count": 3, "score": 3, "last_activity_date": 1549301939, "creation_date": 1464773979, "question_id": 37564928, "link": "https://stackoverflow.com/questions/37564928/how-to-find-out-from-which-line-number-the-method-was-called-in-ruby", "title": "How to find out from which line number the method was called in Ruby?", "body": "<p>Let us have a following simple example:</p>\n\n<pre><code>def funny_function(param)\n  lineNumber = __LINE__  # this gives me the current line number\n  puts lineNumber\nend\n</code></pre>\n\n<p>As we can see, I can get the current line number. However, my question is, <strong>is there a non-intrusive way to find out from which line number (and even a file) the method was called?</strong></p>\n\n<p>Non-intrusive meaning that I don't want the method user to know about that, she just has to provide the <code>param</code> parameter, e.g.:</p>\n\n<pre><code>funny_function 'Haha'\n</code></pre>\n\n<p>Maybe something like <code>caller.__LINE__</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postfix-mta", "gemfile", "mail-server"], "comments": [{"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1464774444, "post_id": 37564804, "comment_id": 62617460, "body": "have you tried: <code>bundle exec rake db:migrate</code>?"}, {"owner": {"reputation": 1, "user_id": 6408729, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zPHLH_nU4zM/AAAAAAAAAAI/AAAAAAAAAEE/-aESj5_5a68/photo.jpg?sz=128", "display_name": "Cassie Gamble", "link": "https://stackoverflow.com/users/6408729/cassie-gamble"}, "reply_to_user": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1464777199, "post_id": 37564804, "comment_id": 62619382, "body": "types error: rake aborted! Mysql2::Error: Can&#39;t connect to local MySQL server through socket &#39;mysql socket path (/var/mysql/mysql.sock)&#39; (2)  Tasks: TOP =&gt; db:migrate (See full trace by running task with --trace)"}, {"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1464777308, "post_id": 37564804, "comment_id": 62619466, "body": "so problem is in mysql server"}, {"owner": {"reputation": 1, "user_id": 6408729, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zPHLH_nU4zM/AAAAAAAAAAI/AAAAAAAAAEE/-aESj5_5a68/photo.jpg?sz=128", "display_name": "Cassie Gamble", "link": "https://stackoverflow.com/users/6408729/cassie-gamble"}, "reply_to_user": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 0, "creation_date": 1464796198, "post_id": 37564804, "comment_id": 62634011, "body": "Yes, i see. Can it be caused by missing or renamed MySQL folder?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 6408729, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zPHLH_nU4zM/AAAAAAAAAAI/AAAAAAAAAEE/-aESj5_5a68/photo.jpg?sz=128", "display_name": "Cassie Gamble", "link": "https://stackoverflow.com/users/6408729/cassie-gamble"}, "is_accepted": false, "score": 0, "last_activity_date": 1466509183, "creation_date": 1466509183, "answer_id": 37943422, "question_id": 37564804, "link": "https://stackoverflow.com/questions/37564804/posty-api-error-there-was-an-error-in-your-gemfile-and-bundler-cannot-continue/37943422#37943422", "title": "Posty_API error: There was an error in your Gemfile, and Bundler cannot continue", "body": "<p>I just added host of remote SQL server, created test database, made <code>rake db:migrate</code>, then moved tables to old database and made <code>rake db:migrate</code> once more time.</p>\n"}], "owner": {"reputation": 1, "user_id": 6408729, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-zPHLH_nU4zM/AAAAAAAAAAI/AAAAAAAAAEE/-aESj5_5a68/photo.jpg?sz=128", "display_name": "Cassie Gamble", "link": "https://stackoverflow.com/users/6408729/cassie-gamble"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 61, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1466509183, "creation_date": 1464773705, "question_id": 37564804, "link": "https://stackoverflow.com/questions/37564804/posty-api-error-there-was-an-error-in-your-gemfile-and-bundler-cannot-continue", "title": "Posty_API error: There was an error in your Gemfile, and Bundler cannot continue", "body": "<p>I'm trying to install posty_API on my mailserver (uses MySQL and Postfix) and it shows error on command <code>rake db:migrate</code>  </p>\n\n<blockquote>\n  <p>There was an error in your Gemfile, and Bundler cannot continue.</p>\n</blockquote>\n\n<p>Gemfile: </p>\n\n<pre><code>    source 'http://rubygems.org'\n\ngem 'rack', '~&gt; 1.5.2'\ngem 'rake', '~&gt; 10.3.2'\ngem 'grape', '~&gt; 0.7.0'\ngem 'activerecord', '~&gt; 3.2.22',:require =&gt; 'active_record'\ngem 'json'\ngem 'grape-swagger'\ngem 'rack-cors', :require =&gt; 'rack/cors'\ngem 'schema_plus', '~&gt; 1.5.1'\n\ngroup :test, :development do\n  gem 'rspec'\n  gem 'rack-test',:require =&gt; 'rack/test'\n  gem 'shotgun'\n  gem 'racksh'\n  gem 'rubocop'\nend\n\ngroup :mysql, optional: true do\n  gem 'mysql2', '~&gt; 0.3.16'\nend\n\ngroup :postgresql, optional: true do\n  gem 'pg', '~&gt; 0.18.4'\n  gem 'activerecord-postgresql-adapter'\nend\n</code></pre>\n\n<p>In addition, when i tried to run it via <code>bundle install</code> i saw </p>\n\n<blockquote>\n  <p>Bundle complete! 16 Gemfile dependencies, 45 gems now installed. Gems\n  in the group db were not installed.</p>\n</blockquote>\n\n<p>I will be glad to any help. Thanks.</p>\n"}, {"tags": ["ruby", "multithreading", "concurrency"], "comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464782666, "post_id": 37564633, "comment_id": 62623308, "body": "Vlad, check out the <code>map</code> method, it&#39;s very handy.  You can simplify your code by doing: <code>threads = service.map...</code>.  Also, <code>service</code> should probably be named <code>services</code> to indicate plural."}], "answers": [{"comments": [{"owner": {"reputation": 130, "user_id": 5899485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh3.googleusercontent.com/-_bdSanOHh2E/AAAAAAAAAAI/AAAAAAAASI8/4U6xp3d_I1Q/photo.jpg?sz=128", "display_name": "Vlad Cenan", "link": "https://stackoverflow.com/users/5899485/vlad-cenan"}, "edited": false, "score": 0, "creation_date": 1464776757, "post_id": 37565594, "comment_id": 62619056, "body": "Yes is working, thanks a lot for the ideea, basically it returns a HASH like this {&quot;8x694&quot;=&gt;&quot;Microservice: microservice1Port: 27580Node: node404{\\&quot;..."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1464782386, "post_id": 37565594, "comment_id": 62623095, "body": "The threads join can be implemented more concisely as <code>threads.each(&amp;:join)</code>.  Doesn&#39;t this already wait for all threads to complete?  What does <code>ThreadsWait</code> add?"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464782453, "post_id": 37565594, "comment_id": 62623136, "body": "Vlad, you&#39;re right.  The strings should have new lines at the end (like mine should have). Also, something I&#39;ve found to be handy is that instead of building a string, to build a hash, with descriptive key names.  Then you can use awesome_print to output them in a very readable way."}, {"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464783100, "post_id": 37565594, "comment_id": 62623639, "body": "@KeithBennett Bennett <code>threads.each(&amp;:join)</code> doesn&#39;t wait for all threads to complete. It runs the threads and continues executing code in next line. In this case, when you <code>p h</code> without <code>ThreadsWait..</code> you will see that the hash does not contain complete output."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 1, "creation_date": 1464785227, "post_id": 37565594, "comment_id": 62625307, "body": "@maicher I don&#39;t understand why you say that.  This is <i>exactly</i> what <code>Thread#join</code> does, is it not?  From the docs at <a href=\"http://ruby-doc.org/core-2.2.0/Thread.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/Thread.html</a>: &quot;The calling thread will suspend execution and run this thread.&quot;  Try this: <code>p Time.now; t1 = Thread.new { sleep(3) }; t2 = Thread.new { sleep(5) }; [t1, t2].each(&amp;:join); p Time.now</code>"}, {"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "edited": false, "score": 0, "creation_date": 1464787673, "post_id": 37565594, "comment_id": 62627443, "body": "You&#39;re right. <code>ThreadsWait</code> is not necessary in this case. In your example <code>[t1, t2].each(&amp;:join)</code> gives exactly the same effect as  <code>ThreadsWait.all_waits(t1, t2)</code>. Thank&#39;s for pointing this out!"}], "tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": true, "score": 1, "last_activity_date": 1464787832, "last_edit_date": 1464787832, "creation_date": 1464775611, "answer_id": 37565594, "question_id": 37564633, "link": "https://stackoverflow.com/questions/37564633/add-multithreads-concurency-in-script/37565594#37565594", "title": "Add multithreads/concurency in script", "body": "<p>Instead of <code>puts</code> write output to a variable (hash).\nIf you wand to wait for all threads to finish their job before showing the output, use <code>ThreadsWait</code> class.</p>\n\n<pre><code>require 'thwait'\nfile = File.read('./services.json')\ndata_hash = JSON.parse(file)\n\nh = {}\nthreads = []\nservice = data_hash.keys\nservice.each do |microservice|\nthreads &lt;&lt; Thread.new do\n  thread_id = Thread.current.object_id.to_s(36)\n  begin\n  h[thread_id] = \"Microservice: #{microservice}\"\n  port = data_hash[\"#{microservice}\"]['port']\n  h[thread_id] &lt;&lt; \"Port: #{port}\"\n\n  nodes = \"knife search 'chef_environment:#{env} AND recipe:#{microservice}' -i\"\n  node = %x[ #{nodes} ].split\n    node.each do |n|\n    h[thread_id]&lt;&lt; \"Node: #{n}\"\n    uri = URI(\"http://#{n}:#{port}/healthcheck?count=10\")\n    res = Net::HTTP.get_response(uri)\n    status = Net::HTTP.get(uri)\n    h[thread_id] &lt;&lt; res.code\n    h[thread_id] &lt;&lt; status\n    h[thread_id] &lt;&lt; res.message\n  end\n\nrescue Net::ReadTimeout\n  h[thread_id] &lt;&lt; \"ReadTimeout Error\"\n  next\nend\nend\nend\nthreads.each do |thread|\n  thread.join\nend\n\n# wait untill all threads finish their job\nThreadsWait.all_waits(*threads)\n\np h\n</code></pre>\n\n<p>[edit]</p>\n\n<p><code>ThreadsWait.all_waits(*threads)</code> is redundant in above code and can be omitted, since line <code>treads.each do |thread| thread.join end</code> does exactely the same thing.</p>\n"}, {"comments": [{"owner": {"reputation": 130, "user_id": 5899485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh3.googleusercontent.com/-_bdSanOHh2E/AAAAAAAAAAI/AAAAAAAASI8/4U6xp3d_I1Q/photo.jpg?sz=128", "display_name": "Vlad Cenan", "link": "https://stackoverflow.com/users/5899485/vlad-cenan"}, "edited": false, "score": 0, "creation_date": 1464776938, "post_id": 37565704, "comment_id": 62619179, "body": "I tried this solution also and is working , any ideea how to break this to view each item on a new line?"}, {"owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "edited": false, "score": 1, "creation_date": 1464777327, "post_id": 37565704, "comment_id": 62619485, "body": "Change report to array: <code>report = []</code> and then in the end <code>puts report.join(&quot;\\n&quot;)</code>"}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 1, "last_activity_date": 1464775902, "creation_date": 1464775902, "answer_id": 37565704, "question_id": 37564633, "link": "https://stackoverflow.com/questions/37564633/add-multithreads-concurency-in-script/37565704#37565704", "title": "Add multithreads/concurency in script", "body": "<p>Instead of outputting the data as you get it using <code>puts</code>, you can collect it all in a string and then <code>puts</code> it once at the end.  Strings can take the <code>&lt;&lt;</code> operator (implemented as a method in Ruby), so you can just initialize the string, add to it, and then output it at the end, like this:</p>\n\n<pre><code>report = ''\nreport &lt;&lt; 'first thing'\nreport &lt;&lt; 'second thing'\nputs report\n</code></pre>\n\n<p>You could even save them all up together and print them all after all were finished if you want.</p>\n"}], "owner": {"reputation": 130, "user_id": 5899485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh3.googleusercontent.com/-_bdSanOHh2E/AAAAAAAAAAI/AAAAAAAASI8/4U6xp3d_I1Q/photo.jpg?sz=128", "display_name": "Vlad Cenan", "link": "https://stackoverflow.com/users/5899485/vlad-cenan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 1, "accepted_answer_id": 37565594, "answer_count": 2, "score": 0, "last_activity_date": 1464787832, "creation_date": 1464773292, "question_id": 37564633, "link": "https://stackoverflow.com/questions/37564633/add-multithreads-concurency-in-script", "title": "Add multithreads/concurency in script", "body": "<p>I created a script which checks healthcheck and ports status from a .json file populated with microservices.\nSo for every microservice from the .json file the script will output the HTTP status and healthcheck body and other small details, and I want to add multithreading here in order to return all the output at once.Please see the script below:</p>\n\n<pre><code>#!/usr/bin/env ruby\n... get the environment argument part...\n\nfile = File.read('./services.json')\ndata_hash = JSON.parse(file)\n\nthreads = []\nservice = data_hash.keys\nservice.each do |microservice|\nthreads &lt;&lt; Thread.new do\n  begin\n  puts \"Microservice: #{microservice}\"\n  port = data_hash[\"#{microservice}\"]['port']\n  puts \"Port: #{port}\"\n\n  nodes = \"knife search 'chef_environment:#{env} AND recipe:#{microservice}' -i\"\n  node = %x[ #{nodes} ].split\n    node.each do |n|\n    puts \"Node: #{n}\"\n    uri = URI(\"http://#{n}:#{port}/healthcheck?count=10\")\n    res = Net::HTTP.get_response(uri)\n    status = Net::HTTP.get(uri)\n    puts res.code\n    puts status\n    puts res.message\n  end\n\nrescue Net::ReadTimeout\n  puts \"ReadTimeout Error\"\n  next\nend\nend\nend\nthreads.each do |thread|\n  thread.join\nend\n</code></pre>\n\n<p>Anyway in this way the script return first the puts \"Microservice: #{microservice}\" and puts \"Port: #{port}\" and after this it will return the nodes and only after the STATUS.\nHow can I return all the data for each loop together? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "rspec", "mongoid5"], "answers": [{"comments": [{"owner": {"reputation": 560, "user_id": 4255620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a0cf2115a9f79cf2c39c8bdde6c179?s=128&d=identicon&r=PG", "display_name": "Daniel Ruiz", "link": "https://stackoverflow.com/users/4255620/daniel-ruiz"}, "edited": false, "score": 0, "creation_date": 1464788545, "post_id": 37564939, "comment_id": 62628184, "body": "Thank you for your suggestion. I&#39;m trying to apply the second workaround you stated, but I encountered some problems with the autoloading of <code>activerecord</code> models. It seems like <code>config.autoload_paths</code> variable cannot be modified in the environment-specific files, as it&#39;s mentioned in <a href=\"http://guides.rubyonrails.org/autoloading_and_reloading_constants.html#autoload-paths\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>"}, {"owner": {"reputation": 4054, "user_id": 3626701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401db4625e42a7797db528d1f7ddcb00?s=128&d=identicon&r=PG", "display_name": "Oss", "link": "https://stackoverflow.com/users/3626701/oss"}, "reply_to_user": {"reputation": 560, "user_id": 4255620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a0cf2115a9f79cf2c39c8bdde6c179?s=128&d=identicon&r=PG", "display_name": "Daniel Ruiz", "link": "https://stackoverflow.com/users/4255620/daniel-ruiz"}, "edited": false, "score": 0, "creation_date": 1464788796, "post_id": 37564939, "comment_id": 62628410, "body": "Check this answer about <code>config.eager_load_paths</code>  and how it acts different between development and production <a href=\"http://stackoverflow.com/questions/19773266/confusing-about-autoload-paths-vs-eager-load-paths-in-rails-4\" title=\"confusing about autoload paths vs eager load paths in rails 4\">stackoverflow.com/questions/19773266/&hellip;</a> , I think it will be useful."}, {"owner": {"reputation": 560, "user_id": 4255620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a0cf2115a9f79cf2c39c8bdde6c179?s=128&d=identicon&r=PG", "display_name": "Daniel Ruiz", "link": "https://stackoverflow.com/users/4255620/daniel-ruiz"}, "edited": false, "score": 0, "creation_date": 1464851336, "post_id": 37564939, "comment_id": 62655668, "body": "Thanks again for your help, Mohamed! I was able to isolate the loading of my <code>activerecord</code> models and the require of <code>activerecord</code>&#39;s railtie in <i>config/application.rb</i> using conditions like <code>require &#39;active_record&#47;railtie&#39; unless Rails.env.test?</code> and <code>config.autoload_paths += Dir[Rails.root.join(&#39;lib&#39;, &#39;antifraud&#39;, &#39;**&#47;&#39;)] unless Rails.env.test?</code>. Currently, when I run my specs they all fail returning the same error: <code>ActiveRecord::ConnectionNotEstablished: No connection pool for ActiveRecord::Base</code> Does this error make sense to you? Would you know how to solve it?"}], "tags": [], "owner": {"reputation": 4054, "user_id": 3626701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401db4625e42a7797db528d1f7ddcb00?s=128&d=identicon&r=PG", "display_name": "Oss", "link": "https://stackoverflow.com/users/3626701/oss"}, "is_accepted": false, "score": 1, "last_activity_date": 1464773995, "creation_date": 1464773995, "answer_id": 37564939, "question_id": 37564339, "link": "https://stackoverflow.com/questions/37564339/my-rails-4-2-6-app-uses-two-databases-can-i-only-use-one-for-testing-purposes/37564939#37564939", "title": "My Rails 4.2.6 app uses two databases. Can I only use one for testing purposes?", "body": "<p><em>Here are two workarounds</em></p>\n\n<p><strong>Either: Add a sqlite database for your test env.</strong></p>\n\n<pre><code>test:\n  adapter: sqlite3\n  database: db/test.sqlite3\n  pool: 5\n  timeout: 5000\n</code></pre>\n\n<p><strong>Or: Move your autoload from <code>application.rb</code> to environment specific configs and move the <code>activerecord</code> gem to a <code>development</code> env on your <code>Gemfile</code>.</strong></p>\n\n<p><em>Gemfile</em></p>\n\n<pre><code>group :development do\n  gem 'activerecord'\nend\n</code></pre>\n\n<p><em>config/application.rb</em>: </p>\n\n<ul>\n<li><p>First: move this to <code>config/environments/test.rb</code> and <code>config/environments/development.rb</code> (keep in mind which models you want to exclude from the <code>test</code> env, i.e. the <code>activerecord</code> mo</p>\n\n<pre><code>config.autoload_paths += WHATEVER\n</code></pre></li>\n</ul>\n\n<p>Remove <code>require 'rails/all'</code> line and require frameworks you want to use specifically in each environment file too.</p>\n"}, {"tags": [], "owner": {"reputation": 560, "user_id": 4255620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a0cf2115a9f79cf2c39c8bdde6c179?s=128&d=identicon&r=PG", "display_name": "Daniel Ruiz", "link": "https://stackoverflow.com/users/4255620/daniel-ruiz"}, "is_accepted": true, "score": 1, "last_activity_date": 1464863698, "last_edit_date": 1495542243, "creation_date": 1464863698, "answer_id": 37589391, "question_id": 37564339, "link": "https://stackoverflow.com/questions/37564339/my-rails-4-2-6-app-uses-two-databases-can-i-only-use-one-for-testing-purposes/37589391#37589391", "title": "My Rails 4.2.6 app uses two databases. Can I only use one for testing purposes?", "body": "<p>I decided to answer my own question as the provided answers didn't fit my needs.</p>\n\n<p>After many trials and errors I was able to avoid connecting to a MySQL database in <em>test</em> environment adapting the information given in this <a href=\"https://stackoverflow.com/questions/19729840/how-do-i-selectively-disable-a-remote-db-connection-during-rspec-tests\">question post</a>.</p>\n\n<p>The only thing I needed to do was to add the following gem to my <strong>Gemfile</strong>:</p>\n\n<pre><code>group :test do\n  gem 'activerecord-nulldb-adapter'\nend\n</code></pre>\n\n<p>This gem installs the <a href=\"https://github.com/nulldb/nulldb\" rel=\"nofollow noreferrer\">NullDB</a> database adapter in the project, which enables ActiveRecord to establish a connection without the need to define a real database. </p>\n\n<p>Last but not least, I updated my <strong>config/database.yml</strong> adding the parameters of a database connection in <em>test</em> environment that uses the new adapter:</p>\n\n<pre><code>test:\n  adapter: nulldb\n  encoding: utf8\n  reconnect: false\n  database: mysql_test\n  pool: 5\n  username: user\n  password: pass\n  socket: /var/run/mysqld/mysqld.sock\n</code></pre>\n"}], "owner": {"reputation": 560, "user_id": 4255620, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/76a0cf2115a9f79cf2c39c8bdde6c179?s=128&d=identicon&r=PG", "display_name": "Daniel Ruiz", "link": "https://stackoverflow.com/users/4255620/daniel-ruiz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 241, "favorite_count": 0, "accepted_answer_id": 37589391, "answer_count": 2, "score": 3, "last_activity_date": 1464863698, "creation_date": 1464772540, "question_id": 37564339, "link": "https://stackoverflow.com/questions/37564339/my-rails-4-2-6-app-uses-two-databases-can-i-only-use-one-for-testing-purposes", "title": "My Rails 4.2.6 app uses two databases. Can I only use one for testing purposes?", "body": "<p>I have a web application in Rails 4.2.6 that was originally using MongoDB (through Mongoid 5) as its main database. However, now I need to connect to a MySQL database to only read some additional data for my app.</p>\n\n<p>So far, I have required ActiveRecord in my project and was able to establish the connection with the aforementioned database in development environment. My configuration files for this matter are:</p>\n\n<p><strong>mongoid.yml</strong></p>\n\n<pre><code>development:\n  clients:\n    default:\n      database: mongo_development\n      hosts:\n        - localhost:27017\n      options:\ntest:\n  clients:\n    default:\n      database: mongo_test\n      hosts:\n        - localhost:27017\n      options:\n        read:\n          mode: :primary\n        max_pool_size: 1\n  options:\n    raise_not_found_error: false\n</code></pre>\n\n<p><strong>database.yml</strong></p>\n\n<pre><code>development:\n  adapter: mysql2\n  encoding: utf8\n  reconnect: false\n  database: mysql_development\n  pool: 5\n  username: user\n  password: pass\n  socket: /var/run/mysqld/mysqld.sock\n</code></pre>\n\n<p>The problem arrives when I run my test suite. I am using RSpec and executing <code>bundle exec rspec spec</code> yields the following error message:</p>\n\n<pre><code> /home/user/.rvm/gems/ruby-2.1.6@global/gems/activerecord-4.2.6/lib/active_record/connection_adapters/connection_specification.rb:248:in `resolve_symbol_connection': 'test' database is not configured. Available: [\"development\"] (ActiveRecord::AdapterNotSpecified)\n</code></pre>\n\n<p>ActiveRecord complains for not having a test database to connect, but the problem is that I don't have a MySQL database for testing purposes: the specs I wrote only interact with Mongoid models.</p>\n\n<p>I was considering creating an empty MySQL database as a hack, but I want to know first if I could configure ActiveRecord not to connect to a test database and use only <code>mongo_test</code>.</p>\n\n<p>Is it possible to do what I want? Does anybody know how to do this?  </p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 839, "user_id": 1602887, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/37b4552182ff520babdd52ce2dacb545?s=128&d=identicon&r=PG", "display_name": "Ben-J", "link": "https://stackoverflow.com/users/1602887/ben-j"}, "edited": false, "score": 0, "creation_date": 1464772521, "post_id": 37564295, "comment_id": 62616039, "body": "Just don&#39;t send nil variables to your erb, check it before!"}], "answers": [{"comments": [{"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "edited": false, "score": 0, "creation_date": 1464773040, "post_id": 37564363, "comment_id": 62616452, "body": "missing <code>SiteConfiguration.gallery_path</code> in my image path. Please check <code>&lt;img  alt=&quot;Dsc 0380&quot; src=&quot;&#47;DSC_0380.jpg&quot;&gt;</code>"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "edited": false, "score": 0, "creation_date": 1464773076, "post_id": 37564363, "comment_id": 62616472, "body": "My Image path should be- <code>&lt;img alt=&quot;Dsc 0380&quot; src=&quot;&#47;uploads&#47;gallery&#47;DSC_0380.jpg&quot;&gt;</code>"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "edited": false, "score": 0, "creation_date": 1464773660, "post_id": 37564363, "comment_id": 62616873, "body": "I saw you updated answer. Let me know how to print my <code>settings.yml</code> <code>gallery_path</code> in my view(erb) file?"}, {"owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "edited": false, "score": 0, "creation_date": 1464774581, "post_id": 37564363, "comment_id": 62617558, "body": "Yes I just generate config file. Now working fine. No need <code>SiteConfiguration</code> Thank you dear."}], "tags": [], "owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "is_accepted": true, "score": 2, "last_activity_date": 1464774306, "last_edit_date": 1464774306, "creation_date": 1464772599, "answer_id": 37564363, "question_id": 37564295, "link": "https://stackoverflow.com/questions/37564295/how-to-fix-no-implicit-conversion-of-nil-into-string-in-ruby/37564363#37564363", "title": "How to fix &quot;no implicit conversion of nil into String&quot; in Ruby", "body": "<p>You can use lazy evaluation to string:</p>\n\n<pre><code>&lt;img src=\"&lt;%= \"#{root_path}#{SiteConfiguration.gallery_path}#{@gallery.image}\" %&gt;\" alt=\"\" /&gt;\n</code></pre>\n\n<p>but be better to make sure, why exactly one of the field becomes <code>nil</code>? Also move the code to helper or decorator.</p>\n\n<p>To make configuration customizable use <a href=\"https://github.com/railsconfig/config\" rel=\"nofollow\"><code>config</code></a> gem. So you will have just a YML-file:</p>\n\n<p><strong>config/settings.yml</strong>:</p>\n\n<pre><code>---\nsite_name: 'Site Name Here'\nbanner_path: 'uploads/banners/'\navatar_path: 'uploads/avatar/'\ngallery_path: 'uploads/gallery/'\ncategory_path: 'uploads/category/'\n</code></pre>\n\n<p>So here you have to use <code>Settings</code> constant instead of <code>SiteConfiguration</code>:</p>\n\n<pre><code>&lt;img src=\"&lt;%= \"#{root_path}#{Settings.gallery_path}#{@gallery.image}\" %&gt;\" alt=\"\" /&gt;\n</code></pre>\n"}], "owner": {"reputation": 3436, "user_id": 2330905, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/310e0eecea5a8f5c6bcf7ee7be2b5b49?s=128&d=identicon&r=PG", "display_name": "Chinmay235", "link": "https://stackoverflow.com/users/2330905/chinmay235"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10411, "favorite_count": 1, "accepted_answer_id": 37564363, "answer_count": 1, "score": 1, "last_activity_date": 1464790934, "creation_date": 1464772421, "last_edit_date": 1592644375, "question_id": 37564295, "link": "https://stackoverflow.com/questions/37564295/how-to-fix-no-implicit-conversion-of-nil-into-string-in-ruby", "title": "How to fix &quot;no implicit conversion of nil into String&quot; in Ruby", "body": "<p>I am developing one small web application in my local machine. I want to set my some common information globally.\nHere is my code:</p>\n<p><em>app/controllers/concerns/site_configuration.rb</em></p>\n<pre><code>module SiteConfiguration\n  mattr_accessor :site_name\n  mattr_accessor :banner_path\n  mattr_accessor :avatar_path  \n  mattr_accessor :gallery_path  \n  mattr_accessor :category_path  \nend\n</code></pre>\n<p><em>config/environment.rb</em></p>\n<pre><code>SiteConfiguration.site_name = 'Site Name Here'\nSiteConfiguration.banner_path = 'uploads/banners/'\nSiteConfiguration.avatar_path = 'uploads/avatar/'\nSiteConfiguration.gallery_path = 'uploads/gallery/'\nSiteConfiguration.category_path = 'uploads/category/'\n</code></pre>\n<p><em>app/views/galleries/index.html.erb</em></p>\n<pre><code>&lt;img src=&quot;&lt;%=root_path+SiteConfiguration.gallery_path+@gallery.image %&gt;&quot; alt=&quot;&quot; /&gt;\n</code></pre>\n<p><strong>Here is I am getting error message</strong></p>\n<blockquote>\n<p>TypeError in Galleries#index</p>\n<p>Showing D:/xxx/project/app/views/galleries/index.html.erb where line #1 raised:</p>\n<p>no implicit conversion of nil into String</p>\n</blockquote>\n<p>Above code working fine. But one big problem is whatever changes I made every time there is a need to restart the server.</p>\n<p>If I restart server then its working fine. After few min if need any changes I am getting same error message. Let me know what is the problem there?</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "performance", "activerecord"], "comments": [{"owner": {"reputation": 69229, "user_id": 53341, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/98geJ.png?s=128&g=1", "display_name": "MatBailie", "link": "https://stackoverflow.com/users/53341/matbailie"}, "edited": false, "score": 2, "creation_date": 1464772909, "post_id": 37564186, "comment_id": 62616339, "body": "Not sure about the RoR syntax, but the SQL way to do it is; Create a data-set containing [1,2,3] and then identify which don&#39;t exist in the target table...   <code>SELECT sample.* FROM (SELECT 1 AS id UNION ALL SELECT 2 AS id UNION ALL SELECT 3 AS id) sample LEFT JOIN target ON target.id = sample.id WHERE target.id IS NULL</code>"}, {"owner": {"reputation": 17379, "user_id": 1836143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ddoM.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1836143/alexander"}, "reply_to_user": {"reputation": 69229, "user_id": 53341, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/98geJ.png?s=128&g=1", "display_name": "MatBailie", "link": "https://stackoverflow.com/users/53341/matbailie"}, "edited": false, "score": 0, "creation_date": 1464773722, "post_id": 37564186, "comment_id": 62616921, "body": "@MatBailie +1 for providing a pure SQL solution"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464776240, "post_id": 37564401, "comment_id": 62618691, "body": "You can use <code>.ids</code> instead of <code>.pluck(:id)</code>"}, {"owner": {"reputation": 956, "user_id": 1684772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a0eb44ebf1ed954f1e5022af3d05f1c?s=128&d=identicon&r=PG", "display_name": "Sebin", "link": "https://stackoverflow.com/users/1684772/sebin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464776387, "post_id": 37564401, "comment_id": 62618802, "body": "Thank you @Stefan. That was something new for me. I am updating the answer."}], "tags": [], "owner": {"reputation": 956, "user_id": 1684772, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a0eb44ebf1ed954f1e5022af3d05f1c?s=128&d=identicon&r=PG", "display_name": "Sebin", "link": "https://stackoverflow.com/users/1684772/sebin"}, "is_accepted": true, "score": 6, "last_activity_date": 1485325110, "last_edit_date": 1495541806, "creation_date": 1464772704, "answer_id": 37564401, "question_id": 37564186, "link": "https://stackoverflow.com/questions/37564186/how-to-filter-the-values-of-a-model-column-that-dont-exist-in-the-database/37564401#37564401", "title": "How to filter the values of a model column, that don&#39;t exist in the database?", "body": "<p>You can use like given below if you are using rails 4 or above</p>\n\n<pre><code>ids = [1, 2, 3]\nexisting_ids = Model.where(id: ids).ids\nids - existing_ids\n</code></pre>\n\n<p>If you are using rails 3, you need</p>\n\n<pre><code>ids = [1, 2, 3]\nexisting_ids = Model.where(id: ids).pluck(:id)\nids - existing_ids\n</code></pre>\n\n<p>Read more about <code>pluck</code> and <code>ids</code> <a href=\"http://guides.rubyonrails.org/active_record_querying.html#pluck\" rel=\"nofollow noreferrer\">here</a> and <a href=\"http://guides.rubyonrails.org/active_record_querying.html#ids\" rel=\"nofollow noreferrer\">here</a> respectively.</p>\n\n<p>Thank you <a href=\"https://stackoverflow.com/users/477037/stefan\">Stefan</a> for pointing me about <code>ids</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 17379, "user_id": 1836143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ddoM.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1836143/alexander"}, "edited": false, "score": 0, "creation_date": 1464774353, "post_id": 37564538, "comment_id": 62617372, "body": "Thank you for your answer. Two things: you don&#39;t need the <code>all</code> for <code>pluck</code>, you can do MyModel.pluck(:id) directly and Sebin&#39;s answer is a bit more efficient, as it potentially instantiates a smaller array (haven&#39;t bench-marked it though)."}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "reply_to_user": {"reputation": 17379, "user_id": 1836143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ddoM.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1836143/alexander"}, "edited": false, "score": 1, "creation_date": 1464774595, "post_id": 37564538, "comment_id": 62617569, "body": "@AlexPopov It seems you did not see my edits, but I had already edited my answer to make it more efficient exactly as you said in fact ;)"}], "tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": false, "score": 3, "last_activity_date": 1464773493, "last_edit_date": 1464773493, "creation_date": 1464773077, "answer_id": 37564538, "question_id": 37564186, "link": "https://stackoverflow.com/questions/37564186/how-to-filter-the-values-of-a-model-column-that-dont-exist-in-the-database/37564538#37564538", "title": "How to filter the values of a model column, that don&#39;t exist in the database?", "body": "<p>TL;DR : If <code>ids</code> is the array of ids you want to check and MyModel is the name of your model then the following is an array of the ids that do not exist : <code>ids - MyModel.where(id: ids).pluck(:id)</code></p>\n\n<hr>\n\n<p><code>MyModel.where(id: ids)</code> will return all records for <code>MyModel</code> that have an id matching one of the values of your <code>ids</code> array. But if you add <code>.pluck(:id)</code> will return an array of only the ids for those records. So <code>MyModel.where(id: ids).pluck(:id)</code> is the array of record ids that match your <code>ids</code> array values.</p>\n\n<p>Then you can use the minus operator to make the difference of the two arrays. <code>array1 - array2</code> returns only the elements of array1 that are not in array2.</p>\n\n<p>So putting everything together you get <code>ids - MyModel.where(id: ids).pluck(:id)</code>.</p>\n"}], "owner": {"reputation": 17379, "user_id": 1836143, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/8ddoM.jpg?s=128&g=1", "display_name": "Alexander", "link": "https://stackoverflow.com/users/1836143/alexander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 37564401, "answer_count": 2, "score": 2, "last_activity_date": 1485325110, "creation_date": 1464772113, "question_id": 37564186, "link": "https://stackoverflow.com/questions/37564186/how-to-filter-the-values-of-a-model-column-that-dont-exist-in-the-database", "title": "How to filter the values of a model column, that don&#39;t exist in the database?", "body": "<p>Given an array of model ids:</p>\n\n<pre><code>ids = [1, 2, 3]\n</code></pre>\n\n<p>How can I get an array of the ids, which do not already exist in the database? I can do:</p>\n\n<pre><code>ids.reject { |id| Model.exists?(id: id) }\n</code></pre>\n\n<p>but I don't want to make a separate database query for every id. What is the way to get the non-existent ids in a single database query?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sockets", "printing"], "comments": [{"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 1, "creation_date": 1464771832, "post_id": 37563824, "comment_id": 62615562, "body": "I guess you need to use <code>puts</code> instead of <code>write</code> to also include a new line at the end of the message."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1464778009, "post_id": 37563824, "comment_id": 62619981, "body": "If you&#39;re using the socket to send a single string, you could use open with a block to avoid having to explicitly close the socket.  If you execute this in a shell: <code>nc -l 9999</code> then you can test socket clients in another shell, e.g. in irb: <code>TCPSocket.open(&#39;localhost&#39;, 9999) { |s| s &lt;&lt; &quot;Hi&quot; }</code>."}, {"owner": {"reputation": 2237, "user_id": 2881939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/100000776760878/picture?type=large", "display_name": "Sanjay Salunkhe", "link": "https://stackoverflow.com/users/2881939/sanjay-salunkhe"}, "reply_to_user": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1465462640, "post_id": 37563824, "comment_id": 62914571, "body": "@BoraMa - I tried puts instead of write but still not working.. here is the command that i tried... sock.puts &#39;MARK START\\n&#39;"}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1465463582, "post_id": 37563824, "comment_id": 62915180, "body": "Nono, either try <code>sock.write &quot;MARK START\\n&quot;</code> or <code>sock.puts &#39;MARK START&#39;</code>. Note the difference in quotes: double quotes will send <code>\\n</code> as a special character (new line) whereas single quotes will send it verbatim which is not what you want."}, {"owner": {"reputation": 2237, "user_id": 2881939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/100000776760878/picture?type=large", "display_name": "Sanjay Salunkhe", "link": "https://stackoverflow.com/users/2881939/sanjay-salunkhe"}, "reply_to_user": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1465463986, "post_id": 37563824, "comment_id": 62915431, "body": "@BoraMa - Still not working . I tried sock.write &quot;MARK START\\n&quot; and it is returning value 11 and sock.puts &#39;MARK START&#39; it returns nil value."}, {"owner": {"reputation": 14087, "user_id": 1544012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bbaed9ca8e4320fd64d1989c0e0f488b?s=128&d=identicon&r=PG", "display_name": "BoraMa", "link": "https://stackoverflow.com/users/1544012/borama"}, "edited": false, "score": 0, "creation_date": 1465464276, "post_id": 37563824, "comment_id": 62915638, "body": "Well, the return values are not that relevant (<code>write</code> just returns the number of bytes written, <code>puts</code> returns <code>nil</code>). So that fact that it still does not work means that the problem is in something else. What kind of protocol for communicating with the printer is that anyway?"}, {"owner": {"reputation": 2237, "user_id": 2881939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/100000776760878/picture?type=large", "display_name": "Sanjay Salunkhe", "link": "https://stackoverflow.com/users/2881939/sanjay-salunkhe"}, "edited": false, "score": 0, "creation_date": 1465464772, "post_id": 37563824, "comment_id": 62915985, "body": "printer is using dynmark 3 protocol. i don&#39;t know much about this protocol. But my general question is if we can connect with putty with &quot;raw&quot; connection type then we should be able to connect it with ruby socket programming. I don&#39;t know why socket programming is not working."}], "owner": {"reputation": 2237, "user_id": 2881939, "user_type": "registered", "accept_rate": 52, "profile_image": "https://graph.facebook.com/100000776760878/picture?type=large", "display_name": "Sanjay Salunkhe", "link": "https://stackoverflow.com/users/2881939/sanjay-salunkhe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 162, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464771098, "creation_date": 1464771098, "question_id": 37563824, "link": "https://stackoverflow.com/questions/37563824/how-to-communicate-with-printer-from-ruby-language", "title": "How to communicate with printer from ruby language?", "body": "<p>I want to communicate with printer by using ruby language. i am using socket programming to communicate with printer. my printer ip is \"192.168.24.687\" and port number is \"20000\". </p>\n\n<p>Below is the code that i am using to communicate with printer</p>\n\n<pre><code>require 'socket'\nsock = TCPSocket.new('192.168.24.687', 20000)\nsock.write 'MARK START'\nsock.close\n</code></pre>\n\n<p>In the above code i am sending \"MARK START\" command to the printer which will turn printer ON , but it's not working. with above code i am able to established connection with remote server but not able to send \"MARK START\" command.</p>\n\n<p>But the same is working with putty. with putty i am using connection type as <code>\"raw\"</code> and connecting to the printer.After connection is successful i can send command \"MARK START\" to putty and able to turn on printer.</p>\n\n<p>I want to know why my code is not able to send \"MARK START\" command to printer??</p>\n\n<p>Thanks,\nSanjay Salunkhe</p>\n"}, {"tags": ["ruby", "dropbox", "dropbox-api"], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 672753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c10c8d26c821786eb09bcf4859434a21?s=128&d=identicon&r=PG", "display_name": "pooja", "link": "https://stackoverflow.com/users/672753/pooja"}, "edited": false, "score": 0, "creation_date": 1466153619, "post_id": 37631214, "comment_id": 63209520, "body": "Thanks @Greg. Any plans to introduce SDK for ruby in near future? Also, It seems API v2 only uses OAuth2 which requires to set redirect URL to be set. But our application uses OAuth1 and redirect url can be localhost or IP of the machine which keeps on changing. Hence preventing us to use OAuth2.  In such case, how can we migrate to V2 ?"}, {"owner": {"reputation": 13778, "user_id": 1305693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da01d21aaa750b4cca96f2eb6017ce94?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1305693/greg"}, "reply_to_user": {"reputation": 299, "user_id": 672753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c10c8d26c821786eb09bcf4859434a21?s=128&d=identicon&r=PG", "display_name": "pooja", "link": "https://stackoverflow.com/users/672753/pooja"}, "edited": false, "score": 0, "creation_date": 1466186337, "post_id": 37631214, "comment_id": 63230021, "body": "I don&#39;t have any news on a potential Ruby SDK for Dropbox API v2. API v2 does only support OAuth 2. If you don&#39;t have a stable redirect URI to use, you can use the &quot;code&quot; flow without a redirect URI at all."}, {"owner": {"reputation": 13778, "user_id": 1305693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da01d21aaa750b4cca96f2eb6017ce94?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1305693/greg"}, "reply_to_user": {"reputation": 299, "user_id": 672753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c10c8d26c821786eb09bcf4859434a21?s=128&d=identicon&r=PG", "display_name": "pooja", "link": "https://stackoverflow.com/users/672753/pooja"}, "edited": false, "score": 0, "creation_date": 1467173738, "post_id": 37631214, "comment_id": 63616082, "body": "The /oauth2/authorize documentation has information on the code flow here: <a href=\"https://www.dropbox.com/developers/documentation/http/documentation#oauth2-authorize\" rel=\"nofollow noreferrer\">dropbox.com/developers/documentation/http/&hellip;</a> Also, this blog post may be helpful: <a href=\"https://blogs.dropbox.com/developers/2013/07/using-oauth-2-0-with-the-core-api/\" rel=\"nofollow noreferrer\">blogs.dropbox.com/developers/2013/07/&hellip;</a>"}, {"owner": {"reputation": 299, "user_id": 672753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c10c8d26c821786eb09bcf4859434a21?s=128&d=identicon&r=PG", "display_name": "pooja", "link": "https://stackoverflow.com/users/672753/pooja"}, "edited": false, "score": 0, "creation_date": 1467175360, "post_id": 37631214, "comment_id": 63616538, "body": "Thanks Greg for you help"}], "tags": [], "owner": {"reputation": 13778, "user_id": 1305693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/da01d21aaa750b4cca96f2eb6017ce94?s=128&d=identicon&r=PG", "display_name": "Greg", "link": "https://stackoverflow.com/users/1305693/greg"}, "is_accepted": true, "score": 0, "last_activity_date": 1465049433, "creation_date": 1465049433, "answer_id": 37631214, "question_id": 37563345, "link": "https://stackoverflow.com/questions/37563345/dropbox-api-v2-sdk-for-ruby/37631214#37631214", "title": "Dropbox api v2 sdk for ruby", "body": "<p>Unfortunately, Dropbox does not offer an official Ruby SDK for Dropbox API v2.</p>\n\n<p>You'd either need to modify the SDK/library you're using, or implement your app using the <a href=\"https://www.dropbox.com/developers/documentation/http/documentation\" rel=\"nofollow\">HTTP endpoints</a> directly. </p>\n\n<p>There's a migration guide here:</p>\n\n<p><a href=\"https://www.dropbox.com/developers/reference/migration-guide\" rel=\"nofollow\">https://www.dropbox.com/developers/reference/migration-guide</a></p>\n"}, {"comments": [{"owner": {"reputation": 531, "user_id": 814224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6906033528a1accc1e2a64fb327f851?s=128&d=identicon&r=PG", "display_name": "xuuso", "link": "https://stackoverflow.com/users/814224/xuuso"}, "reply_to_user": {"reputation": 2707, "user_id": 594982, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/a1da1bec10afbbbadcac473dc95dfb8d?s=128&d=identicon&r=PG", "display_name": "rassom", "link": "https://stackoverflow.com/users/594982/rassom"}, "edited": false, "score": 0, "creation_date": 1477039833, "post_id": 38727380, "comment_id": 67612027, "body": "I only saw it a few days ago. We seem to be doing the same thing so we should get in touch."}], "tags": [], "owner": {"reputation": 531, "user_id": 814224, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a6906033528a1accc1e2a64fb327f851?s=128&d=identicon&r=PG", "display_name": "xuuso", "link": "https://stackoverflow.com/users/814224/xuuso"}, "is_accepted": false, "score": 4, "last_activity_date": 1470160519, "creation_date": 1470160519, "answer_id": 38727380, "question_id": 37563345, "link": "https://stackoverflow.com/questions/37563345/dropbox-api-v2-sdk-for-ruby/38727380#38727380", "title": "Dropbox api v2 sdk for ruby", "body": "<p>I've just published a small library that aims to fill this gap: <a href=\"https://rubygems.org/gems/dropbox_api\" rel=\"nofollow\">https://rubygems.org/gems/dropbox_api</a></p>\n\n<p>Many endpoints are pending and documentation needs to be improved, but it's the best you'll find right now.</p>\n\n<p>I hope it helps you.</p>\n"}], "owner": {"reputation": 299, "user_id": 672753, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/c10c8d26c821786eb09bcf4859434a21?s=128&d=identicon&r=PG", "display_name": "pooja", "link": "https://stackoverflow.com/users/672753/pooja"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1235, "favorite_count": 0, "accepted_answer_id": 37631214, "answer_count": 2, "score": 0, "last_activity_date": 1474531861, "creation_date": 1464769786, "last_edit_date": 1464949725, "question_id": 37563345, "link": "https://stackoverflow.com/questions/37563345/dropbox-api-v2-sdk-for-ruby", "title": "Dropbox api v2 sdk for ruby", "body": "<p>Has anyone came across Dropbox migration from API v1 to v2? </p>\n\n<p>I could not find <code>ruby-sdk</code> for <code>v2</code> in official documentation. If I want to migrate from <code>v1</code> to <code>v2</code>, Should I manually do all the changes in existing <code>ruby-sdk</code> for <code>v1</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1464769579, "post_id": 37563203, "comment_id": 62614093, "body": "What is the exact error? Please post it in the question. Also as i can see you are using <code>calculate_days</code> instead of <code>calculate</code> which is your model method."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464770045, "post_id": 37563203, "comment_id": 62614397, "body": "<code>Date.parase</code>? Do you mean <code>Date.parse</code>?"}, {"owner": {"reputation": 63, "user_id": 3675617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3cdcf28b573e57672b2c791a506ebef?s=128&d=identicon&r=PG", "display_name": "Jose", "link": "https://stackoverflow.com/users/3675617/jose"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464770426, "post_id": 37563203, "comment_id": 62614661, "body": "@spickermann and Pavan, whoops. Typed it wrongly here. Nonetheless, is that the right way of passing from a controller to a model right? How do I go about storing the data in the &quot;credit&quot; field?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1464770629, "post_id": 37563203, "comment_id": 62614788, "body": "The <code>:from_date</code>, <code>:to_date</code> should be <i>Date objects</i> rather than <i>attributes</i>, so that <code>calculate</code> method receives the correct arguments."}, {"owner": {"reputation": 63, "user_id": 3675617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3cdcf28b573e57672b2c791a506ebef?s=128&d=identicon&r=PG", "display_name": "Jose", "link": "https://stackoverflow.com/users/3675617/jose"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1464771833, "post_id": 37563203, "comment_id": 62615563, "body": "@Pavan both :from_date and :to_date are DateTime objects when I initially setup the field."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464772127, "post_id": 37563203, "comment_id": 62615773, "body": "What model has a <code>credit</code> attribute? The model with the <code>self.calculate</code> method?"}, {"owner": {"reputation": 63, "user_id": 3675617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3cdcf28b573e57672b2c791a506ebef?s=128&d=identicon&r=PG", "display_name": "Jose", "link": "https://stackoverflow.com/users/3675617/jose"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1464814941, "post_id": 37563203, "comment_id": 62644325, "body": "@spickermann yep. same model."}], "answers": [{"comments": [{"owner": {"reputation": 436, "user_id": 1490614, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/zfWou.jpg?s=128&g=1", "display_name": "Bradley Marques", "link": "https://stackoverflow.com/users/1490614/bradley-marques"}, "edited": false, "score": 0, "creation_date": 1464777010, "post_id": 37563934, "comment_id": 62619229, "body": "That seems correct to me, if you are indeed passing parameters to the <code>#new</code> action.  If not, you could set default arguments (such as <code>Date.today</code> and <code>Date.today + 1</code>) in the function, if that makes sense for your context."}, {"owner": {"reputation": 63, "user_id": 3675617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3cdcf28b573e57672b2c791a506ebef?s=128&d=identicon&r=PG", "display_name": "Jose", "link": "https://stackoverflow.com/users/3675617/jose"}, "edited": false, "score": 0, "creation_date": 1464814899, "post_id": 37563934, "comment_id": 62644307, "body": "Thank you for your help, however, I am getting the following error: <code>no implicit conversion of nil into String</code>"}, {"owner": {"reputation": 4054, "user_id": 3626701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401db4625e42a7797db528d1f7ddcb00?s=128&d=identicon&r=PG", "display_name": "Oss", "link": "https://stackoverflow.com/users/3626701/oss"}, "edited": false, "score": 0, "creation_date": 1464856587, "post_id": 37563934, "comment_id": 62658778, "body": "So your <code>params[:from_date]</code> or <code>params[:to_date]</code> is nil, that is an error from <code>Date#parse</code>"}], "tags": [], "owner": {"reputation": 4054, "user_id": 3626701, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/401db4625e42a7797db528d1f7ddcb00?s=128&d=identicon&r=PG", "display_name": "Oss", "link": "https://stackoverflow.com/users/3626701/oss"}, "is_accepted": false, "score": 1, "last_activity_date": 1464771386, "creation_date": 1464771386, "answer_id": 37563934, "question_id": 37563203, "link": "https://stackoverflow.com/questions/37563203/passing-from-a-controller-to-a-model/37563934#37563934", "title": "Passing from a Controller to a Model", "body": "<p>What you need here is pass <code>String</code> objects instead of <code>Symbol</code> objects.</p>\n\n<p>So instead of <code>@vacations = Vacation.calculate(:from_date, :to_date)</code>, you probably need to pass <code>params[:from_date]</code> and <code>params[:to_date]</code> which should be strings like <code>20/01/2016</code>, etc...</p>\n\n<p>Your code should be</p>\n\n<pre><code>@vacations = Vacation.calculate(params[:from_date], params[:to_date])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 63, "user_id": 3675617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3cdcf28b573e57672b2c791a506ebef?s=128&d=identicon&r=PG", "display_name": "Jose", "link": "https://stackoverflow.com/users/3675617/jose"}, "edited": false, "score": 0, "creation_date": 1464855013, "post_id": 37584417, "comment_id": 62657814, "body": "Worked like a charm! I had to add <code>+1</code> at the end of the <code>self.credit</code>. Other than that, awesome!"}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 63, "user_id": 3675617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3cdcf28b573e57672b2c791a506ebef?s=128&d=identicon&r=PG", "display_name": "Jose", "link": "https://stackoverflow.com/users/3675617/jose"}, "edited": false, "score": 0, "creation_date": 1464859115, "post_id": 37584417, "comment_id": 62660522, "body": "@Jose: You are right, this happens because <code>business_days_until</code> doesn&#39;t include the <code>from_day</code>, but only counts the numbers of business days until the <code>to_day</code> is reached. I updated my answer."}, {"owner": {"reputation": 63, "user_id": 3675617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3cdcf28b573e57672b2c791a506ebef?s=128&d=identicon&r=PG", "display_name": "Jose", "link": "https://stackoverflow.com/users/3675617/jose"}, "edited": false, "score": 0, "creation_date": 1464872243, "post_id": 37584417, "comment_id": 62669812, "body": "Awesome! You are a champ. Thanks again."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1464859018, "last_edit_date": 1464859018, "creation_date": 1464849504, "answer_id": 37584417, "question_id": 37563203, "link": "https://stackoverflow.com/questions/37563203/passing-from-a-controller-to-a-model/37584417#37584417", "title": "Passing from a Controller to a Model", "body": "<p>I think there is no need for an extra method, since all attributes (<code>from_date</code>, <code>end_date</code> and <code>credit</code>) are stored in the same model. </p>\n\n<p>I would just set <code>from_date</code> and <code>end_date</code> in the initializer and calculate <code>credit</code> with a callback before validation:</p>\n\n<pre><code># in the model\nbefore_validation :calculate_credit\n\nprivate\n  def calculate_credit\n    if from_date &amp;&amp; to_date\n      # `+ 1` because the user takes off both days (`from_date` and `to_date`),\n      # but `business_days_until` doesn't count the `from_day`. \n      self.credit = from_date.business_days_until(to_date) + 1\n    end\n  end\n\n# in the controller\ndef new\n  @vacation = current_user.vacations.build\nend\n\ndef create\n  @vacation = current_user.vacations.build(vacation_params)\n\n  if @vacation.save\n    # @vacation.credit would return the calculated credit at this point\n  else\n    # ...\n  end\nend\n\nprivate\n  def vacation_params\n    params.require(:vacation).permit(:from_date, :to_date)\n  end\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 3675617, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d3cdcf28b573e57672b2c791a506ebef?s=128&d=identicon&r=PG", "display_name": "Jose", "link": "https://stackoverflow.com/users/3675617/jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "accepted_answer_id": 37584417, "answer_count": 2, "score": 0, "last_activity_date": 1464859018, "creation_date": 1464769404, "last_edit_date": 1464771143, "question_id": 37563203, "link": "https://stackoverflow.com/questions/37563203/passing-from-a-controller-to-a-model", "title": "Passing from a Controller to a Model", "body": "<p>Pretty new to RoR. Wonder if anyone can help me with this issue. </p>\n\n<p>I got a gem called \"business_time\" which calculates the business days between two dates. I have set up a method in the model which does all the calculations. </p>\n\n<p>I have a field called \"credit\" which should hold the number of business days. Here's what I have:</p>\n\n<p>MODEL</p>\n\n<pre><code>def self.calculate(from_date,to_date)\n   days = 0\n\n   date_1 = Date.parse(from_date)\n   date 2 = Date.parse(to_date)\n   days = date_1.business_days_until(date2)\n\n   days\nend\n</code></pre>\n\n<p>CONTROLLER</p>\n\n<pre><code>def new\n   @vacation = current_user.vacations.build\n   @vacations = Vacation.calculate(:from_date, :to_date)\nend\n</code></pre>\n\n<p>I got an error referencing something about a string. </p>\n\n<p>Furthermore, how do I go about storing the data from the method into the field called \"credit\"?</p>\n\n<p>Thanks guys.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1464769098, "post_id": 37562999, "comment_id": 62613791, "body": "Try changing <code>@items = @user.items.create(params.require[:items].permit(:name))</code> to <code>@items = @user.items.create(params.require(:item).permit(:name))</code>"}, {"owner": {"reputation": 133, "user_id": 5704114, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/569420476566976/picture?type=large", "display_name": "Ethan Franson", "link": "https://stackoverflow.com/users/5704114/ethan-franson"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1464769921, "post_id": 37562999, "comment_id": 62614318, "body": "Thanks soooooo much!!! I was going crazy haha."}], "answers": [{"tags": [], "owner": {"reputation": 639, "user_id": 1956964, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/0jQ4l.png?s=128&g=1", "display_name": "dr. strange", "link": "https://stackoverflow.com/users/1956964/dr-strange"}, "is_accepted": false, "score": 0, "last_activity_date": 1464770264, "creation_date": 1464770264, "answer_id": 37563500, "question_id": 37562999, "link": "https://stackoverflow.com/questions/37562999/i-cant-get-my-new-to-do-list-item-to-post/37563500#37563500", "title": "I can&#39;t get my new to do list item to post.", "body": "<p>Replace </p>\n\n<pre><code>@items = @user.items.create(params.require[:items].permit(:name))\n</code></pre>\n\n<p>with</p>\n\n<pre><code>@items = @user.items.create(params.require(:item).permit(:name))\n</code></pre>\n\n<p>in your <code>ItemsController</code> <code>create</code> method.</p>\n"}, {"comments": [{"owner": {"reputation": 133, "user_id": 5704114, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/569420476566976/picture?type=large", "display_name": "Ethan Franson", "link": "https://stackoverflow.com/users/5704114/ethan-franson"}, "edited": false, "score": 1, "creation_date": 1464770583, "post_id": 37563582, "comment_id": 62614752, "body": "You saved me! I am really thankful that you took the time to help me out!"}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": true, "score": 1, "last_activity_date": 1464770691, "last_edit_date": 1464770691, "creation_date": 1464770438, "answer_id": 37563582, "question_id": 37562999, "link": "https://stackoverflow.com/questions/37562999/i-cant-get-my-new-to-do-list-item-to-post/37563582#37563582", "title": "I can&#39;t get my new to do list item to post.", "body": "<blockquote>\n  <p>ArgumentError in ItemsController#create, wrong number of arguments (0\n  for 1)</p>\n</blockquote>\n\n<p>As I aid, it should be</p>\n\n<pre><code>@items = @user.items.create(params.require(:item).permit(:name))\n</code></pre>\n\n<p>Also, to go by with <em>Rails way</em>, you can call it by a <em>private method</em> like below</p>\n\n<pre><code>#items_controller\n\nclass ItemsController &lt; ApplicationController\n  def create\n    @user = User.find(params[:user_id])\n    @items = @user.items.create(item_params)\n    redirect_to @user\n  end\n\n  private\n  def item_params\n    @items = @user.items.create(params.require(:item).permit(:name))\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 133, "user_id": 5704114, "user_type": "registered", "accept_rate": 60, "profile_image": "https://graph.facebook.com/569420476566976/picture?type=large", "display_name": "Ethan Franson", "link": "https://stackoverflow.com/users/5704114/ethan-franson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 37563582, "answer_count": 2, "score": 1, "last_activity_date": 1464770691, "creation_date": 1464768668, "question_id": 37562999, "link": "https://stackoverflow.com/questions/37562999/i-cant-get-my-new-to-do-list-item-to-post", "title": "I can&#39;t get my new to do list item to post.", "body": "<p>I have been trying to follow the steps to get my do make a to do list. Everything has been going smoothly until I submit my item. I keep getting a error saying \"ArgumentError in ItemsController#create, wrong number of arguments (0 for 1)\". It highlights the second line under my create method saying thats where the problem is. My code in my controllers look like so. </p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def show\n   @user = params[:id].blank? ? current_user : User.find(params[:id])\n   @items = @user.items\n  end\nend\n\nclass ItemsController &lt; ApplicationController\n def create\n  @user = User.find(params[:user_id])\n  @items = @user.items.create(params.require[:items].permit(:name))\n  redirect_to @user\n end\nend\n</code></pre>\n\n<p>I am not sure why it's giving me a arguments error. I have been following a video, and theirs is working, so i'm stumped. Also I don't know if you need to see my db migrate but here it is:</p>\n\n<pre><code>class CreateItems &lt; ActiveRecord::Migration\n def change\n  create_table :items do |t|\n   t.string :name\n   t.references :user, index: true, foreign_key: true\n\n   t.timestamps null: false\n  end\nend\n</code></pre>\n\n<p>end\nIf anyone could help me out I would be very much appreciated! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "html-table"], "comments": [{"owner": {"reputation": 839, "user_id": 1602887, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/37b4552182ff520babdd52ce2dacb545?s=128&d=identicon&r=PG", "display_name": "Ben-J", "link": "https://stackoverflow.com/users/1602887/ben-j"}, "edited": false, "score": 0, "creation_date": 1464772342, "post_id": 37562988, "comment_id": 62615918, "body": "Did you try .sort ?"}, {"owner": {"reputation": 113, "user_id": 4388364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0422e9956b962fb53475516eeefd49db?s=128&d=identicon&r=PG&f=1", "display_name": "Phueal", "link": "https://stackoverflow.com/users/4388364/phueal"}, "reply_to_user": {"reputation": 839, "user_id": 1602887, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/37b4552182ff520babdd52ce2dacb545?s=128&d=identicon&r=PG", "display_name": "Ben-J", "link": "https://stackoverflow.com/users/1602887/ben-j"}, "edited": false, "score": 0, "creation_date": 1464772945, "post_id": 37562988, "comment_id": 62616372, "body": "Yep, thank you, I tried both <code>.sort</code> and <code>.sort_by</code> on @stock - I&#39;ll update the question to clarify that. I tried a simple @stock.sort, as well as some variations such as <code>@stock.sort_by { |a| a[0] }</code>, and <code>@stock.sort{|a,b| b[:name] &lt;=&gt; a[:name]}</code>, based on other answers I&#39;d found on this site. None worked, but of course I may have got the syntax wrong. In particular I am not confident that I fully understand the structure and indexing of the @stock array."}, {"owner": {"reputation": 940, "user_id": 4537473, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ccdbe6f3dfecb0d497779d656c944ac3?s=128&d=identicon&r=PG", "display_name": "David K-J", "link": "https://stackoverflow.com/users/4537473/david-k-j"}, "edited": false, "score": 0, "creation_date": 1464775036, "post_id": 37562988, "comment_id": 62617873, "body": "<code>@stock</code> is not an array. It is an instance variable, that was declared as a Hash: <code>@stock = {}</code>. You probably want to <code>@stock.sort_by { |k,v| v }</code>, or just <code>@stock.keys.sort.each { |k| }</code>"}, {"owner": {"reputation": 113, "user_id": 4388364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0422e9956b962fb53475516eeefd49db?s=128&d=identicon&r=PG&f=1", "display_name": "Phueal", "link": "https://stackoverflow.com/users/4388364/phueal"}, "edited": false, "score": 0, "creation_date": 1464787987, "post_id": 37562988, "comment_id": 62627702, "body": "Thank you for clarifying that for me, I had missed that distinction! Unfortunately neither of these solutions worked."}], "answers": [{"tags": [], "owner": {"reputation": 223, "user_id": 2028584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1QZ2.png?s=128&g=1", "display_name": "Patrick De Marta", "link": "https://stackoverflow.com/users/2028584/patrick-de-marta"}, "is_accepted": false, "score": 1, "last_activity_date": 1464800437, "last_edit_date": 1464800437, "creation_date": 1464774890, "answer_id": 37565308, "question_id": 37562988, "link": "https://stackoverflow.com/questions/37562988/ruby-on-rails-problems-displaying-a-sorted-table/37565308#37565308", "title": "Ruby-on-Rails - Problems displaying a sorted table", "body": "<p>Hash in Ruby 1.8.7 was not ordered, so you can't rely on the order of the keys in @stock.</p>\n\n<p>As a workaround, first I'd query Drug selecting only <strong>id</strong> and <strong>name</strong> fields</p>\n\n<pre><code>all_drugs = Drug.find(:all, :select =&gt; \"id, name\")\n</code></pre>\n\n<p>as you are querying for single drug attributes later in the code.</p>\n\n<p>Then I'd create an empty @stock_keys <strong>array</strong> to collect drug names, just after the     @stock hash definition</p>\n\n<pre><code>@stock = {}\n@stock_keys = []\n</code></pre>\n\n<p>and push drug names in it, right after your query for drug_id</p>\n\n<pre><code>drug = Drug.find(drug_id)\ndrug_name = drug.name\n@stock_keys &lt;&lt; drug_name \n@stock[drug_name] = ...\n</code></pre>\n\n<p>At the end of the iteration on <strong>all_drugs</strong>, in your controller, I'd sort the @stock_keys array</p>\n\n<pre><code>@stock_keys.sort!\n</code></pre>\n\n<p>Then, in the view, I'd iterate over the @stock_keys array, retrieving at each step the drug's values from the @stock hash</p>\n\n<pre><code> @stock_keys.each do |name|\n    values = @stock[name] \n    prescribed = values[\"prescribed\"]\n    ...\n end\n</code></pre>\n\n<p>I hope this can help.</p>\n"}, {"comments": [{"owner": {"reputation": 113, "user_id": 4388364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0422e9956b962fb53475516eeefd49db?s=128&d=identicon&r=PG&f=1", "display_name": "Phueal", "link": "https://stackoverflow.com/users/4388364/phueal"}, "edited": false, "score": 0, "creation_date": 1464781956, "post_id": 37566014, "comment_id": 62622775, "body": "Thank you, but this made no difference - the list is still unsorted."}, {"owner": {"reputation": 715, "user_id": 1261158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6849c34a3862c8c5c3f9f515bbcbfa05?s=128&d=identicon&r=PG", "display_name": "pshoukry", "link": "https://stackoverflow.com/users/1261158/pshoukry"}, "reply_to_user": {"reputation": 113, "user_id": 4388364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0422e9956b962fb53475516eeefd49db?s=128&d=identicon&r=PG&f=1", "display_name": "Phueal", "link": "https://stackoverflow.com/users/4388364/phueal"}, "edited": false, "score": 0, "creation_date": 1464783126, "post_id": 37566014, "comment_id": 62623663, "body": "can you dump the &quot;@stock&quot; variable and send me the first 3 rows, &#39;puts @stock&#39;"}, {"owner": {"reputation": 113, "user_id": 4388364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0422e9956b962fb53475516eeefd49db?s=128&d=identicon&r=PG&f=1", "display_name": "Phueal", "link": "https://stackoverflow.com/users/4388364/phueal"}, "edited": false, "score": 0, "creation_date": 1464787882, "post_id": 37566014, "comment_id": 62627611, "body": "Start of the dump looks like this (dummy data of course): {&quot;Paracetamol (250mg)&quot;=&gt;{&quot;receipts&quot;=&gt;10000.0, &quot;prescribed&quot;=&gt;0, &quot;dispensed&quot;=&gt;0, &quot;last_activity&quot;=&gt;&quot;In stock&quot;, &quot;removed&quot;=&gt;0, &quot;stock_at&quot;=&gt;10000.0}, &quot;Paracetamol (1g)&quot;=&gt;{&quot;receipts&quot;=&gt;10000.0, &quot;prescribed&quot;=&gt;0, &quot;dispensed&quot;=&gt;0, &quot;last_activity&quot;=&gt;&quot;In stock&quot;, &quot;removed&quot;=&gt;0, &quot;stock_at&quot;=&gt;10000.0}, &quot;EFV (Efavirenz 600mg tablet)&quot;=&gt;  N.B. I reloaded the server a couple of times and each time the order of the drugs varies."}, {"owner": {"reputation": 715, "user_id": 1261158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6849c34a3862c8c5c3f9f515bbcbfa05?s=128&d=identicon&r=PG", "display_name": "pshoukry", "link": "https://stackoverflow.com/users/1261158/pshoukry"}, "reply_to_user": {"reputation": 113, "user_id": 4388364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0422e9956b962fb53475516eeefd49db?s=128&d=identicon&r=PG&f=1", "display_name": "Phueal", "link": "https://stackoverflow.com/users/4388364/phueal"}, "edited": false, "score": 0, "creation_date": 1464792267, "post_id": 37566014, "comment_id": 62631211, "body": "Please try     Hash[@stock.sort_by {|s, v| s.downcase}].each{|name,values|  -- Don&#39;t forget to add the v in |s, v|"}, {"owner": {"reputation": 223, "user_id": 2028584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1QZ2.png?s=128&g=1", "display_name": "Patrick De Marta", "link": "https://stackoverflow.com/users/2028584/patrick-de-marta"}, "edited": false, "score": 0, "creation_date": 1464800642, "post_id": 37566014, "comment_id": 62636707, "body": "I suspect that as another hash is being created the issue with unordered hash in ruby 1.8.7 is still generating a &#39;random&#39; order of drugs in the view."}, {"owner": {"reputation": 715, "user_id": 1261158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6849c34a3862c8c5c3f9f515bbcbfa05?s=128&d=identicon&r=PG", "display_name": "pshoukry", "link": "https://stackoverflow.com/users/1261158/pshoukry"}, "edited": false, "score": 0, "creation_date": 1464808414, "post_id": 37566014, "comment_id": 62640866, "body": "Yup that&#39;s why i am directly iterating on the newly created hash"}, {"owner": {"reputation": 223, "user_id": 2028584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1QZ2.png?s=128&g=1", "display_name": "Patrick De Marta", "link": "https://stackoverflow.com/users/2028584/patrick-de-marta"}, "edited": false, "score": 0, "creation_date": 1464809607, "post_id": 37566014, "comment_id": 62641478, "body": "I see, I&#39;d like to try it (need to install 1.8.7 though). I was thinking that even if the newly created hash is sorted, when it is iterated through &#39;each&#39; it results in unpredictable ordering (guess I&#39;m wrong :) So let me rbenv install 1.8.7!"}, {"owner": {"reputation": 223, "user_id": 2028584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1QZ2.png?s=128&g=1", "display_name": "Patrick De Marta", "link": "https://stackoverflow.com/users/2028584/patrick-de-marta"}, "edited": false, "score": 0, "creation_date": 1464812750, "post_id": 37566014, "comment_id": 62643128, "body": "ouch.. resuscitating ruby 1.8.7 seems much harder then I thought :("}, {"owner": {"reputation": 715, "user_id": 1261158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6849c34a3862c8c5c3f9f515bbcbfa05?s=128&d=identicon&r=PG", "display_name": "pshoukry", "link": "https://stackoverflow.com/users/1261158/pshoukry"}, "edited": false, "score": 0, "creation_date": 1464813292, "post_id": 37566014, "comment_id": 62643415, "body": "TBH, I am not sure since i didn&#39;t test on 1.8.7. if it didn&#39;t work i will pull a dockerfile with ruby 1.8.7 and give it a shot too."}, {"owner": {"reputation": 223, "user_id": 2028584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1QZ2.png?s=128&g=1", "display_name": "Patrick De Marta", "link": "https://stackoverflow.com/users/2028584/patrick-de-marta"}, "edited": false, "score": 0, "creation_date": 1464814044, "post_id": 37566014, "comment_id": 62643826, "body": "I will try docker too, then, as I&#39;m failing in all attempts to install ruby 1.8.7 on my mac and on a ubuntu 14.04."}, {"owner": {"reputation": 223, "user_id": 2028584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1QZ2.png?s=128&g=1", "display_name": "Patrick De Marta", "link": "https://stackoverflow.com/users/2028584/patrick-de-marta"}, "edited": false, "score": 0, "creation_date": 1464816599, "post_id": 37566014, "comment_id": 62645141, "body": "So, here are my experiment&#39;s results on 1.8.7:  stock = {&quot;Foo&quot;=&gt;3, &quot;Bar&quot;=&gt;1, &quot;Fizz&quot;=&gt;7, &quot;Buzz&quot;=&gt;5, &quot;Alot&quot;=&gt;42} =&gt; {&quot;Fizz&quot;=&gt;7, &quot;Alot&quot;=&gt;42, &quot;Bar&quot;=&gt;1, &quot;Foo&quot;=&gt;3, &quot;Buzz&quot;=&gt;5} irb(main):002:0&gt; Hash[stock.sort_by {|s,v| s.downcase}].each{|key,val| puts &quot;#{key} #{val}&quot;} Fizz 7 Bar 1 Alot 42 Foo 3 Buzz 5 =&gt; {&quot;Fizz&quot;=&gt;7, &quot;Bar&quot;=&gt;1, &quot;Alot&quot;=&gt;42, &quot;Foo&quot;=&gt;3, &quot;Buzz&quot;=&gt;5}  and it seems ruby 1.8.7 is messing with the hash sorting anyway (sorry but I want able to format the output properly in this comment)"}, {"owner": {"reputation": 113, "user_id": 4388364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0422e9956b962fb53475516eeefd49db?s=128&d=identicon&r=PG&f=1", "display_name": "Phueal", "link": "https://stackoverflow.com/users/4388364/phueal"}, "reply_to_user": {"reputation": 223, "user_id": 2028584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1QZ2.png?s=128&g=1", "display_name": "Patrick De Marta", "link": "https://stackoverflow.com/users/2028584/patrick-de-marta"}, "edited": false, "score": 0, "creation_date": 1464877551, "post_id": 37566014, "comment_id": 62674172, "body": "This seems to be perfect, thank you!    @patrick-de-marta - Thank you, I liked your solution too and intuitively think it would have worked. I was halfway to testing it but had to rewrite a lot of code for reasons not directly related to the problem (it was trying to display the full drug list of several hundred drugs, which was going beyond the page length and not even showing any names, etc. - all things I was sorting out but which prevented me testing it properly), sorry.  Also I feel your pain - it took me almost a full day to get Ruby 1.8.7 set up with all the deprecated dependencies..."}, {"owner": {"reputation": 223, "user_id": 2028584, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/H1QZ2.png?s=128&g=1", "display_name": "Patrick De Marta", "link": "https://stackoverflow.com/users/2028584/patrick-de-marta"}, "edited": false, "score": 0, "creation_date": 1464877912, "post_id": 37566014, "comment_id": 62674467, "body": "you&#39;re welcome, happy you solved it in the easiest way for your workflow"}, {"owner": {"reputation": 715, "user_id": 1261158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6849c34a3862c8c5c3f9f515bbcbfa05?s=128&d=identicon&r=PG", "display_name": "pshoukry", "link": "https://stackoverflow.com/users/1261158/pshoukry"}, "reply_to_user": {"reputation": 113, "user_id": 4388364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0422e9956b962fb53475516eeefd49db?s=128&d=identicon&r=PG&f=1", "display_name": "Phueal", "link": "https://stackoverflow.com/users/4388364/phueal"}, "edited": false, "score": 0, "creation_date": 1464877927, "post_id": 37566014, "comment_id": 62674482, "body": "@Phueal, great. but please consider an update, working with an obsolete version of ruby could quickly turn to a nightmare."}], "tags": [], "owner": {"reputation": 715, "user_id": 1261158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6849c34a3862c8c5c3f9f515bbcbfa05?s=128&d=identicon&r=PG", "display_name": "pshoukry", "link": "https://stackoverflow.com/users/1261158/pshoukry"}, "is_accepted": true, "score": 1, "last_activity_date": 1464866125, "last_edit_date": 1495540725, "creation_date": 1464776787, "answer_id": 37566014, "question_id": 37562988, "link": "https://stackoverflow.com/questions/37562988/ruby-on-rails-problems-displaying-a-sorted-table/37566014#37566014", "title": "Ruby-on-Rails - Problems displaying a sorted table", "body": "<p>Hashes are unordered by definition in ruby 1.8.7(please check <a href=\"https://stackoverflow.com/questions/489139/ruby-1-8-hashsort-not-return-hash-but-array-better-way-to-do-this\">Ruby 1.8: Hash#sort not return hash but array (better way to do this?)</a>) hence we have to use the order as array. There can be no such thing as a sorted Hash. in your view change the line</p>\n\n<pre><code>@stock.each{|name,values|\n</code></pre>\n\n<p>to</p>\n\n<pre><code>@stock.sort_by {|s, v| s.downcase}.each{|name,values|\n</code></pre>\n"}], "owner": {"reputation": 113, "user_id": 4388364, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0422e9956b962fb53475516eeefd49db?s=128&d=identicon&r=PG&f=1", "display_name": "Phueal", "link": "https://stackoverflow.com/users/4388364/phueal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 60, "favorite_count": 0, "accepted_answer_id": 37566014, "answer_count": 2, "score": 0, "last_activity_date": 1464866125, "creation_date": 1464768632, "last_edit_date": 1464773254, "question_id": 37562988, "link": "https://stackoverflow.com/questions/37562988/ruby-on-rails-problems-displaying-a-sorted-table", "title": "Ruby-on-Rails - Problems displaying a sorted table", "body": "<p>I am new to Ruby, and working on code written by someone else. We are having to work with deprecated versions: Ruby 1.8.7, and Rails 2.3.5 - because this is a charity in the developing world and there is no capacity to upgrade.</p>\n\n<p>I have a report which produces a table (a drug inventory), and need to sort it by the drug's name.</p>\n\n<p>The relevant controller code looks like this:</p>\n\n<pre><code>all_drugs = Drug.find(:all,\n                      :order =&gt; \"name ASC\")\n@stock = {}\nall_drugs.each{ |drug|\n  drug_id = drug.drug_id\n  first_date = Pharmacy.active.find(:first,\n                                    :conditions =&gt;[\"drug_id =?\",drug_id],\n                                    :order =&gt; \"encounter_date\").encounter_date.to_date rescue nil\n  next if first_date.blank?\n  next if first_date &gt; @end_date\n\n  start_date = @start_date\n  end_date = @end_date\n\n  stock_at = Pharmacy.stock_at(drug_id,end_date)\n  if stock_at &gt; 0\n    last_activity = \"In stock\"\n    else last_activity = Pharmacy.last_activity(drug_id,end_date)\n  end\n\n  drug = Drug.find(drug_id)\n  drug_name = drug.name\n  @stock[drug_name] = {\"dispensed\" =&gt; 0,\"stock_at\" =&gt; 0,\"removed\" =&gt; 0, \"receipts\" =&gt; 0,\"prescribed\" =&gt; 0,\"last_activity\" =&gt; 0}\n  @stock[drug_name][\"dispensed\"] = Pharmacy.dispensed_drugs_since(drug.id,start_date,end_date)\n  @stock[drug_name][\"stock_at\"] = stock_at\n  @stock[drug_name][\"removed\"] = Pharmacy.total_removed(drug.id,start_date,end_date)\n  @stock[drug_name][\"receipts\"] = Pharmacy.total_delivered(drug.id,start_date,end_date)\n  @stock[drug_name][\"prescribed\"] = Pharmacy.prescribed_drugs_since(drug.id,start_date,end_date)\n  @stock[drug_name][\"last_activity\"] = last_activity\n}\n</code></pre>\n\n<p>The relevant view code looks like this:</p>\n\n<pre><code>&lt;%count = 1\n@stock.each{|name,values|\n  prescribed = values[\"prescribed\"]\n  receipts = values[\"receipts\"]\n  dispensed = values[\"dispensed\"]\n  removed = values[\"removed\"]\n  stock_at = values[\"stock_at\"]\n  last_activity = values[\"last_activity\"]\n%&gt;\n\n  &lt;tr&gt;\n    &lt;td class=\"color_&lt;%=color%&gt;\"&gt;&lt;%=name%&gt;&lt;/td&gt;\n    &lt;td class=\"color_&lt;%=color%&gt; caldata\" id=\"stock_at_&lt;%=count%&gt;\"&gt;&lt;%=stock_at%&gt;&lt;/td&gt;\n    &lt;td class=\"color_&lt;%=color%&gt; caldata\" id=\"removed_&lt;%=count%&gt;\"&gt;&lt;%=removed%&gt;&lt;/td&gt;\n    &lt;td class=\"color_&lt;%=color%&gt; caldata\" id=\"prescribed_&lt;%=count%&gt;\"&gt;&lt;%=prescribed%&gt;&lt;/td&gt;\n    &lt;td class=\"color_&lt;%=color%&gt; caldata\" id=\"dispensed_&lt;%=count%&gt;\"&gt;&lt;%=dispensed%&gt;&lt;/td&gt;\n    &lt;td class=\"color_&lt;%=color%&gt; caldata\" id=\"last_activity_&lt;%=count%&gt;\"&gt;&lt;%=last_activity%&gt;&lt;/td&gt;\n    &lt;td class=\"color_&lt;%=color%&gt; caldata\" id=\"receipts_&lt;%=count%&gt;\"&gt;&lt;%=receipts%&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;% count+=1\n}%&gt;\n</code></pre>\n\n<p>This happily produces the correct table but in a random order (re-starting the server and reloading the page will give the table in a new order).</p>\n\n<p>I have tried a variety of options found online. I tried <code>@stock.all.order</code> (doesn't work in Rails 2.x), <code>@stock.find</code> (doesn't accept 2 arguments, <code>:all</code> and <code>:order</code>, and using just <code>:order</code> doesn't help), <code>@stock.sort</code> (no effect), and <code>@stock.sort_by</code> (no effect). All of those placed either at the end of the controller code or just before the <code>@stock.each</code> in the view code.</p>\n\n<p>I have to say I am particularly baffled that the order is random - I would have presumed that even if I was failing to order it by name, the order would still be consistent...</p>\n\n<p>Any help would be very much appreciated!</p>\n"}, {"tags": ["ruby", "rubymotion"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 5197260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u6gHstVKYxo/AAAAAAAAAAI/AAAAAAAABGU/PmFdUGAnhAw/photo.jpg?sz=128", "display_name": "markfrost", "link": "https://stackoverflow.com/users/5197260/markfrost"}, "is_accepted": true, "score": 0, "last_activity_date": 1464772817, "last_edit_date": 1464772817, "creation_date": 1464769472, "answer_id": 37563228, "question_id": 37562817, "link": "https://stackoverflow.com/questions/37562817/app-cannot-find-app-width-ruby-motion-query/37563228#37563228", "title": "app cannot find app_width (Ruby motion query)", "body": "<p><code>app_width</code> is deprecated and has been removed in version 1.2.0.</p>\n\n<p>Use <code>device_width</code> or <code>screen_width</code> instead.</p>\n"}], "owner": {"reputation": 36, "user_id": 5197260, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-u6gHstVKYxo/AAAAAAAAAAI/AAAAAAAABGU/PmFdUGAnhAw/photo.jpg?sz=128", "display_name": "markfrost", "link": "https://stackoverflow.com/users/5197260/markfrost"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 37563228, "answer_count": 1, "score": 0, "last_activity_date": 1464772817, "creation_date": 1464768126, "last_edit_date": 1592644375, "question_id": 37562817, "link": "https://stackoverflow.com/questions/37562817/app-cannot-find-app-width-ruby-motion-query", "title": "app cannot find app_width (Ruby motion query)", "body": "<p>My app can't find <code>app_width</code>.</p>\n<h3>Error</h3>\n<blockquote>\n<p>undefined local variable or method <code>app_width</code> for #&lt;<code>MainStylesheet</code>:0x10b563030 ...&gt; (NameError)</p>\n</blockquote>\n<h3>main_stylesheet.rb</h3>\n<pre><code>class MainStylesheet &lt; ApplicationStylesheet\n\n  ...\n\n  def logo_text(st)\n    st.image = image.resource('logo-text')\n    if landscape?\n\n    else\n      st.frame = {t: 250, w: app_width, h: 60, centered: :horizontal}\n    end\n\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "search"], "answers": [{"comments": [{"owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464768432, "post_id": 37562821, "comment_id": 62613404, "body": "Awesome that did the trick! just a side question here, is there any way to search multiple columns ie by a fires and last name? and to search where cap letters are not manditory? right now in my demo i have three test users but when i lower case their names it wont display? ill give you best ! thanks"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "edited": false, "score": 0, "creation_date": 1464768814, "post_id": 37562821, "comment_id": 62613612, "body": "Yes, of course. If you just want some simple functionality, then you could implement it all manually - e.g. in Postgresql, just use <code>ILIKE</code> instead of <code>LIKE</code> for case insensitivity. If you&#39;re looking for some more advanced tools, I&#39;d recommend something like Ransack (<a href=\"https://github.com/activerecord-hackery/ransack\" rel=\"nofollow noreferrer\">github.com/activerecord-hackery/ransack</a>) - check out this screencast (<a href=\"http://railscasts.com/episodes/370-ransack\" rel=\"nofollow noreferrer\">railscasts.com/episodes/370-ransack</a>) for a quick start guide."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1464768136, "creation_date": 1464768136, "answer_id": 37562821, "question_id": 37562703, "link": "https://stackoverflow.com/questions/37562703/undefined-local-variable-or-method-params-when-implementing-search-field/37562821#37562821", "title": "undefined local variable or method `params&#39; when implementing Search Field", "body": "<p>You cannot access the <code>params</code> hash inside the model. This is only accessible from controllers.</p>\n\n<p>Instead of:</p>\n\n<pre><code>@admins = Admin.where([\"name LIKE ?\",\"%#{params[:search]}%\"])\n</code></pre>\n\n<p>Use:</p>\n\n<pre><code>@admins = Admin.where([\"name LIKE ?\",\"%#{search}%\"])\n</code></pre>\n\n<p>And then in the controller, pass the value as you are doing already:</p>\n\n<pre><code>Admin.search(params[:search])\n</code></pre>\n"}], "owner": {"reputation": 1180, "user_id": 4825744, "user_type": "registered", "accept_rate": 88, "profile_image": "https://graph.facebook.com/10155467328840293/picture?type=large", "display_name": "Shawn Wilson", "link": "https://stackoverflow.com/users/4825744/shawn-wilson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 919, "favorite_count": 0, "accepted_answer_id": 37562821, "answer_count": 1, "score": 0, "last_activity_date": 1464768136, "creation_date": 1464767783, "question_id": 37562703, "link": "https://stackoverflow.com/questions/37562703/undefined-local-variable-or-method-params-when-implementing-search-field", "title": "undefined local variable or method `params&#39; when implementing Search Field", "body": "<p>I am doing a tutorial from Stuck.io on implementing a search field on my admin model, so someone can search for a specific admin. the form is appearing, however when I try to use the search I am getting an error field and I don't know where I've gone wrong. </p>\n\n<p>The Exact error I am getting is: </p>\n\n<pre><code>NameError at /admins\nundefined local variable or method `params' for #&lt;Class:0x007f91e39df950&gt;\n</code></pre>\n\n<p><strong>My custom Devise Admin Controller:</strong> (to create an index and show page)</p>\n\n<pre><code>class AdminController &lt; ApplicationController\n  before_action :authenticate_admin!\n\n  def index\n    @admins = Admin.all\n    # Search Query\n    @admins = Admin.search(params[:search])\n  end\n\n  def show\n    @admin = Admin.find_by_admin_ident(params[:id])\n  end\n\nend\n</code></pre>\n\n<p><strong>Routes for my custom Admin controller:</strong></p>\n\n<pre><code>           admins GET    /admins(.:format)                  admin#index\n            admin GET    /admins/:id(.:format)              admin#show\n</code></pre>\n\n<p><strong>My Admin Model:</strong> Search method</p>\n\n<pre><code>class Admin &lt; ActiveRecord::Base\n\n  # Search Functionality\n  def self.search(search)\n    if search\n      @admins = Admin.where([\"name LIKE ?\",\"%#{params[:search]}%\"])\n    else\n      all\n    end\n  end\n\nend\n</code></pre>\n\n<p><strong>And finally my Search form:</strong></p>\n\n<pre><code>&lt;div class=\"col-md-4\"&gt;\n  &lt;div class=\"info-block\"&gt;\n    &lt;%= form_tag admins_path, :method =&gt; 'get' do %&gt;\n      &lt;%= text_field_tag :search, params[:search], :class =&gt; 'form-control', :id =&gt; 'admin-search-field' %&gt;\n      &lt;center&gt;&lt;%= submit_tag \"Search Users\", :class =&gt; 'btn btn-default btn-sm', :id =&gt; 'search-btn' %&gt;&lt;/center&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>Thanks in advance for your input! Please let me know if you need anything more!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "curl", "libcurl", "curb"], "owner": {"reputation": 677, "user_id": 5306420, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/fdf6d0a7c2a4d6a5e4d1b772175da542?s=128&d=identicon&r=PG&f=1", "display_name": "punitcse", "link": "https://stackoverflow.com/users/5306420/punitcse"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 646, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464765969, "creation_date": 1464765969, "last_edit_date": 1495541785, "question_id": 37562078, "link": "https://stackoverflow.com/questions/37562078/how-to-resolve-curlerrconnectionfailederror-calling-http-get-method-of-ruby", "title": "How to resolve Curl::Err::ConnectionFailedError calling http_get method of ruby curb gem?", "body": "<p>when I call <code>http_get</code> method of curb gem like</p>\n\n<pre><code>Curl::Easy.http_get(url)\n</code></pre>\n\n<p>I am getting an exception</p>\n\n<pre><code>error='Curl::Err::ConnectionFailedError: Couldn't connect to server' duration=7805.63 view=0.00 db=1.33 remote_ip=127.0.0.1\n\n  Curl::Err::ConnectionFailedError - Couldn't connect to server:\n  curb (0.9.3) lib/curl/easy.rb:73:in `perform'\n  curb (0.9.3) lib/curl/easy.rb:296:in `http'\n  curb (0.9.3) lib/curl/easy.rb:296:in `http_get'\n  curb (0.9.3) lib/curl/easy.rb:347:in `http_get' \n  () home/punitcse/projects/project-name/core/modulename/here.rb:30:in `block in route'\n</code></pre>\n\n<p>The issue is only producing in my system on other system it is working fine.I have tried various things to resolve this issue like I have rebuild the <code>curl</code> with <code>ares</code> as this link suggested <a href=\"https://stackoverflow.com/questions/14466130/how-do-i-install-curl-with-ares-enabled\">How do I install curl with ares enabled</a> . I tried to debug the gem but could not completely understand why the error is coming.</p>\n\n<p>Here is the output of curl version</p>\n\n<pre><code>$ curl --version\ncurl 7.35.0 (x86_64-unknown-linux-gnu) libcurl/7.35.0 OpenSSL/1.0.1f zlib/1.2.8 libidn/1.28 librtmp/2.3\nProtocols: dict file ftp ftps gopher http https imap imaps ldap ldaps pop3 pop3s rtmp rtsp smtp smtps telnet tftp \nFeatures: AsynchDNS GSS-Negotiate IDN IPv6 Largefile NTLM NTLM_WB SSL libz TLS-SRP \n</code></pre>\n\n<p>Please let me know if anything else is needed.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1464766091, "post_id": 37561032, "comment_id": 62612012, "body": "You&#39;re probably obsessing over nothing here - unless this is all your app does it&#39;s very unlikely to be a bottleneck."}], "answers": [{"comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1464766202, "post_id": 37561268, "comment_id": 62612084, "body": "No need to use <code>each_with_object</code>.Why not just <code>each</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1464769948, "post_id": 37561268, "comment_id": 62614347, "body": "@Caspar, thanks. I&#39;ve edited. <code>each_with_object</code> was a relic from  different approach  I took initially."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1466049788, "last_edit_date": 1466049788, "creation_date": 1464763447, "answer_id": 37561268, "question_id": 37561032, "link": "https://stackoverflow.com/questions/37561032/optimize-map-within-a-loop/37561268#37561268", "title": "Optimize map within a loop", "body": "<p>As I understand the question, you could do the following.</p>\n\n<pre><code>def print(dataset, select_fields)\n  dataset.each { |h,a| puts h.values_at(*select_fields).join(' ') }\nend\n</code></pre>\n\n<p>See <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-values_at\" rel=\"nofollow\">Hash#values_at</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "edited": false, "score": 0, "creation_date": 1464766016, "post_id": 37561504, "comment_id": 62611976, "body": "Since he wants to print it, you could already make it faster by not concatenating it into a string. Just print every line as it comes up."}], "tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": true, "score": 1, "last_activity_date": 1464764227, "creation_date": 1464764227, "answer_id": 37561504, "question_id": 37561032, "link": "https://stackoverflow.com/questions/37561032/optimize-map-within-a-loop/37561504#37561504", "title": "Optimize map within a loop", "body": "<p>my print is about 30%  faster on my machine. I'm pretty sure there are guys who can make it much faster than I did. In general try to iterate over a specific array once. Btw - when you are testing code, avoid any puts, because it slows your tests tremendously.</p>\n\n<pre><code>set = [\n  {:last_name=&gt;\"Smith\", :first_name=&gt;\"John\", :city=&gt;\"New York City\", :birthdate=&gt;\"5/29/1986\"},\n  {:last_name=&gt;\"Bar\", :first_name=&gt;\"Foo\", :city=&gt;\"Chicago\", :birthdate=&gt;\"5/29/1986\"},\n]\n\ndef my_print(dataset, select_fields)  \n  output = ''\n  dataset.each do |set|\n    select_fields.each do |sf|\n      output &lt;&lt; \"#{set[sf]} \"\n    end\n    output[-1] = \"\\n\"\n  end  \n  output\nend\n\ndef your_print(dataset, select_fields)\n  output = ''\n  dataset.each do |set|\n    output += select_fields.map { |key| set[key] }.join(' ') + \"\\n\"\n  end\n  output  \nend\n\nBenchmark.bm do |bm|\n  bm.report do\n    1_000_000.times do\n      my_print(set, [:first_name, :last_name])\n    end\n  end\nend\n\nBenchmark.bm do |bm|\n  bm.report do\n    1_000_000.times do\n      your_print(set, [:first_name, :last_name])\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1846, "user_id": 2816949, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/LPiwD.jpg?s=128&g=1", "display_name": "theartofbeing", "link": "https://stackoverflow.com/users/2816949/theartofbeing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 37561504, "answer_count": 2, "score": 1, "last_activity_date": 1466049788, "creation_date": 1464762619, "question_id": 37561032, "link": "https://stackoverflow.com/questions/37561032/optimize-map-within-a-loop", "title": "Optimize map within a loop", "body": "<p>I have a dataset that is an array of hashes</p>\n\n<pre><code>[\n  {:last_name=&gt;\"Smith\", :first_name=&gt;\"John\", :city=&gt;\"New York City\", :birthdate=&gt;\"5/29/1986\"},\n  {:last_name=&gt;\"Bar\", :first_name=&gt;\"Foo\", :city=&gt;\"Chicago\", :birthdate=&gt;\"5/29/1986\"},\n  ...\n]\n</code></pre>\n\n<p>I want to print the values in a specific order. Currently I'm doing it this way:</p>\n\n<pre><code>def print(dataset, select_fields)\n  output = ''\n  dataset.each do |set|\n    output += select_fields.map { |key| set[key] }.join(' ') + \"\\n\"\n  end\n  puts output\nend\n</code></pre>\n\n<p>Because I'm calling <code>map</code> within <code>each</code> I believe this is pretty slow. Maybe O(n\u00b2) slow?</p>\n\n<p>Is there any way to optimize this? Using Ruby 2.2.1</p>\n"}, {"tags": ["ruby", "class", "variables", "instance"], "comments": [{"owner": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 2, "creation_date": 1464762413, "post_id": 37560887, "comment_id": 62610042, "body": "Where are you calling <code>playing_for</code> that sets value for <code>@num_of_years</code>?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464762626, "post_id": 37560887, "comment_id": 62610145, "body": "There&#39;s another error: <code>Time.new.strftime(&quot;%Y&quot;)</code> returns a string, so <code>current_year - @start_year</code> becomes <code>&quot;2016&quot; - 2009</code> which doesn&#39;t work (you can&#39;t subtract a number from a string). Use <code>Time.new.year</code> instead."}, {"owner": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1464762911, "post_id": 37560887, "comment_id": 62610299, "body": "@Stefan Thank you!!!"}, {"owner": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "reply_to_user": {"reputation": 17357, "user_id": 794242, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/e871d15815cfef926f21737a5ccd30c4?s=128&d=identicon&r=PG", "display_name": "Wand Maker", "link": "https://stackoverflow.com/users/794242/wand-maker"}, "edited": false, "score": 0, "creation_date": 1464762966, "post_id": 37560887, "comment_id": 62610328, "body": "@WandMaker Sorry I don&#39;t understand your question..."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 3, "last_activity_date": 1464764875, "last_edit_date": 1495535643, "creation_date": 1464763124, "answer_id": 37561183, "question_id": 37560887, "link": "https://stackoverflow.com/questions/37560887/ruby-beginner-instance-variable-not-showing/37561183#37561183", "title": "Ruby beginner. Instance variable not showing", "body": "<p><code>@num_of_years</code> ist not printed, because the variable wasn't set (uninitialized instance variables have a value of <code>nil</code> and <code>\"#{nil}\"</code> results in an empty string).</p>\n\n<p><code>@name</code>, <code>@age</code> and <code>@start_year</code> are all set in <code>initialize</code> which is invoked by calling <code>Player.new</code>, and <code>to_s</code> is invoked by <code>puts</code>:</p>\n\n<pre><code>jon = Player.new(\"jon\", 41, 2009) # &lt;- \"new\" calls Player#initialize\nputs jon                          # &lt;- \"puts\" calls Player#to_s\n</code></pre>\n\n<p><code>@num_of_years</code> on the other hand is set in <code>playing_for</code> which is never called (this is what Wand Maker <a href=\"https://stackoverflow.com/questions/37560887/ruby-beginner-instance-variable-not-showing/37561183#comment62610042_37560887\">wanted to say</a>).</p>\n\n<p>You could call the method manually before calling <code>puts</code>: (remember to fix <a href=\"https://stackoverflow.com/questions/37560887/ruby-beginner-instance-variable-not-showing#comment62610145_37560887\">the bug</a> by replacing <code>strftime(\"%Y\")</code> with <code>year</code>)</p>\n\n<pre><code>jon = Player.new(\"jon\", 41, 2009)\n#=&gt; #&lt;Player:0x007fab8a8aa448 @name=\"Jon\", @age=41, @start_year=2009&gt;\njon.to_s\n#=&gt; \"Hi, my name is Jon. I am 41 years old. I have been playing Ultimate for  years.\"\njon.playing_for\n#=&gt; 7\njon.to_s\n#=&gt; \"Hi, my name is Jon. I am 41 years old. I have been playing Ultimate for 7 years.\"\n\nputs jon\n</code></pre>\n\n<p>Prints:</p>\n\n<pre><code>Hi, my name is Jon. I am 41 years old. I have been playing Ultimate for 7 years.\n</code></pre>\n\n<p>But remembering to call the method every time becomes tedious very quickly.</p>\n\n<p>It's easier to set <code>@num_of_years</code> in initialize, just like the other instance variables:</p>\n\n<pre><code>class Player   \n  def initialize (name, age, start_year)\n    @name         = name.capitalize\n    @age          = age\n    @start_year   = start_year\n    @num_of_years = Time.new.year - start_year\n  end\n\n  def to_s\n    \"Hi, my name is #{@name}. I am #{@age} years old. I have been playing Ultimate for #{@num_of_years} years.\"\n  end\nend\n\nputs Player.new(\"jon\", 41, 2009)\n#=&gt; Hi, my name is Jon. I am 41 years old. I have been playing Ultimate for 7 years.\n</code></pre>\n\n<p>Or you could define a method to calculate the difference. But you don't need another instance variable in this case, just return the value:</p>\n\n<pre><code>class Player\n  def initialize (name, age, start_year)\n    @name         = name.capitalize\n    @age          = age\n    @start_year   = start_year\n  end\n\n  def playing_for\n    Time.new.year - @start_year\n  end\n\n  def to_s\n    \"Hi, my name is #{@name}. I am #{@age} years old. I have been playing Ultimate for #{playing_for} years.\"\n  end\nend\n\nputs Player.new(\"jon\", 41, 2009)\n#=&gt; Hi, my name is Jon. I am 41 years old. I have been playing Ultimate for 7 years.\n</code></pre>\n\n<p>Take a look at the <code>to_s</code> method. I've replaced <code>#{@num_of_years}</code> with <code>#{playing_for}</code>.</p>\n"}], "owner": {"reputation": 163, "user_id": 6385598, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh4.googleusercontent.com/-Z9Wlhtst6dw/AAAAAAAAAAI/AAAAAAAAFTc/yvtsJV4l5yQ/photo.jpg?sz=128", "display_name": "iswg", "link": "https://stackoverflow.com/users/6385598/iswg"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 37561183, "answer_count": 1, "score": 0, "last_activity_date": 1464764875, "creation_date": 1464762177, "last_edit_date": 1464763664, "question_id": 37560887, "link": "https://stackoverflow.com/questions/37560887/ruby-beginner-instance-variable-not-showing", "title": "Ruby beginner. Instance variable not showing", "body": "<pre><code>class Player\n  def initialize (name, age, start_year)\n    @name       = name.capitalize\n    @age        = age\n    @start_year = start_year\n  end\n\n  def playing_for\n    current_year  = Time.new.strftime(\"%Y\")\n    num_of_years  = current_year - @start_year\n    @num_of_years = num_of_years\n  end\n\n  def to_s\n    \"Hi, my name is #{@name}. I am #{@age} years old. I have been playing Ultimate for #{@num_of_years} years.\"\n  end\nend\n\njon = Player.new(\"jon\", 41, 2009)\nputs jon\n</code></pre>\n\n<p>When I run the above code in Terminal, it shows as:</p>\n\n<pre><code>Hi my name is Jon. I am 41 years old. I have been playing Ultimate for  years.\n</code></pre>\n\n<p>and doesn't show the <code>#{@num_of_years}</code>.</p>\n\n<p>Clearly there's something wrong with the way I've defined <code>@num_of_years</code>, but I can't figure out what.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 6059, "user_id": 1197246, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/1c752a51e48f7574720d80c2468006e7?s=128&d=identicon&r=PG", "display_name": "Tom Prats", "link": "https://stackoverflow.com/users/1197246/tom-prats"}, "is_accepted": false, "score": 0, "last_activity_date": 1464761914, "creation_date": 1464761914, "answer_id": 37560827, "question_id": 37560554, "link": "https://stackoverflow.com/questions/37560554/parameter-id-changes-with-custom-controller/37560827#37560827", "title": "Parameter ID changes with custom controller", "body": "<p>'form_for' with an active record object tries to identify the URL from the object. If it has an ID, it uses the update route, otherwise it uses the create route. Initially it identifies it as something like</p>\n\n<blockquote>\n  <p>/reservation/1</p>\n</blockquote>\n\n<p>But when you explicitly pass something as the URL it will override it. Now our URL looks like</p>\n\n<blockquote>\n  <p>/reservation/index</p>\n</blockquote>\n\n<p>I recommend looking into the 'form_for' documentation, but what could really solve your problem would be to explicitly pass the whole URL, instead of just the controller. That way you could get the ID in the right place</p>\n"}, {"tags": [], "owner": {"reputation": 4719, "user_id": 6060774, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/d51934aeeed54c14084d35942eb0b85e?s=128&d=identicon&r=PG&f=1", "display_name": "alexi2", "link": "https://stackoverflow.com/users/6060774/alexi2"}, "is_accepted": false, "score": 0, "last_activity_date": 1464764431, "creation_date": 1464764431, "answer_id": 37561568, "question_id": 37560554, "link": "https://stackoverflow.com/questions/37560554/parameter-id-changes-with-custom-controller/37561568#37561568", "title": "Parameter ID changes with custom controller", "body": "<p>In the form you can place the following line of code which will pass the :id to the controller in the POST request.</p>\n\n<pre><code>&lt;%= hidden_field_tag(:id, params[:id]) %&gt;\n</code></pre>\n\n<p>You might have to add a method to convert it to an integer within the controller.</p>\n\n<pre><code>params[:id].to_i\n</code></pre>\n\n<p>Depending on how you have your db setup.</p>\n"}], "owner": {"reputation": 457, "user_id": 1244081, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/acd3105f8cec0788810a97aa7d978472?s=128&d=identicon&r=PG", "display_name": "Cameron Aziz", "link": "https://stackoverflow.com/users/1244081/cameron-aziz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464764431, "creation_date": 1464760792, "last_edit_date": 1464762519, "question_id": 37560554, "link": "https://stackoverflow.com/questions/37560554/parameter-id-changes-with-custom-controller", "title": "Parameter ID changes with custom controller", "body": "<p>When the <code>form_for</code> is as so:</p>\n\n<pre><code>&lt;%= form_for @reservation, remote: true do |f| %&gt;\n</code></pre>\n\n<p>I get the following params:</p>\n\n<blockquote>\n  <p>Parameters: {\"utf8\"=>\"\u2713\", \"reservation\"=>{\"party_size\"=>\"1\",\n  \"persons_attributes\"=>{\"0\"=>{\"first_name\"=>\"Big Name\",\n  \"last_name\"=>\"test\", \"meal_id\"=>\"1\", \"id\"=>\"24\"},\n  \"1\"=>{\"first_name\"=>\"\", \"last_name\"=>\"\", \"meal_id\"=>\"1\"}},\n  \"address\"=>\"test\", \"city\"=>\"Test\", \"state\"=>\"te\", \"zip\"=>\"te\"},\n  \"commit\"=>\"submit\", \"id\"=>\"24\"}</p>\n</blockquote>\n\n<p>But when I put a custom controller onto the <code>form_for</code>, as so</p>\n\n<pre><code>&lt;%= form_for @reservation, url: {controller: 'static_pages'}, remote: true do |f| %&gt;\n</code></pre>\n\n<p>I get the following params:</p>\n\n<blockquote>\n  <p>Parameters: {\"utf8\"=>\"\u2713\", \"reservation\"=>{\"party_size\"=>\"1\",\n  \"persons_attributes\"=>{\"0\"=>{\"first_name\"=>\"Big Name\",\n  \"last_name\"=>\"test\", \"meal_id\"=>\"1\", \"id\"=>\"24\"},\n  \"1\"=>{\"first_name\"=>\"\", \"last_name\"=>\"\", \"meal_id\"=>\"1\"}},\n  \"address\"=>\"test\", \"city\"=>\"Test\", \"state\"=>\"te\", \"zip\"=>\"te\"},\n  \"commit\"=>\"submit\", \"id\"=>\"index\"}</p>\n</blockquote>\n\n<p>How do I ensure that the <code>params[:id]</code> remains the same? All I need is the standard <code>form_for</code> with a different controller called (the same for is used for both <code>new</code>\\ <code>create</code> and <code>edit</code>\\ <code>update</code>).</p>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "impressionist"], "answers": [{"comments": [{"owner": {"reputation": 1107, "user_id": 5047667, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ca1a6fe2f74ba5bac284363c1f8427a?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5047667/dmitriy"}, "edited": false, "score": 0, "creation_date": 1464764544, "post_id": 37560520, "comment_id": 62611154, "body": "i added include Impressionist::IsImpressionable. reloaded server same error"}, {"owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "reply_to_user": {"reputation": 1107, "user_id": 5047667, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ca1a6fe2f74ba5bac284363c1f8427a?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5047667/dmitriy"}, "edited": false, "score": 0, "creation_date": 1464768036, "post_id": 37560520, "comment_id": 62613147, "body": "commenting out <code>impressionist(@project)</code>  from controller show method may solve the issue."}], "tags": [], "owner": {"reputation": 5242, "user_id": 3083848, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/JMddU.jpg?s=128&g=1", "display_name": "Emu", "link": "https://stackoverflow.com/users/3083848/emu"}, "is_accepted": false, "score": 0, "last_activity_date": 1464768861, "last_edit_date": 1464768861, "creation_date": 1464760662, "answer_id": 37560520, "question_id": 37560375, "link": "https://stackoverflow.com/questions/37560375/project-impressionist-count-wrong-number-of-arguments-given-2-expected-0-1/37560520#37560520", "title": "@project.impressionist_count - wrong number of arguments (given 2, expected 0..1)", "body": "<p>Your <strong>model</strong> should be like:</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n ..........................\n  include Impressionist::IsImpressionable\n  is_impressionable\n\n .............................\n\nend\n</code></pre>\n\n<p>In <strong>controller</strong>:</p>\n\n<pre><code>def show\n  @new_response = @project.responses.build\n  # impressionist(@project) //comment out this line\n end\n</code></pre>\n"}], "owner": {"reputation": 1107, "user_id": 5047667, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/4ca1a6fe2f74ba5bac284363c1f8427a?s=128&d=identicon&r=PG&f=1", "display_name": "Dmitriy", "link": "https://stackoverflow.com/users/5047667/dmitriy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 562, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464768861, "creation_date": 1464760052, "last_edit_date": 1464766533, "question_id": 37560375, "link": "https://stackoverflow.com/questions/37560375/project-impressionist-count-wrong-number-of-arguments-given-2-expected-0-1", "title": "@project.impressionist_count - wrong number of arguments (given 2, expected 0..1)", "body": "<p>I use rails 5</p>\n\n<p>I want to count the number of views of the project</p>\n\n<p>I installed <code>gem 'impressionist'</code></p>\n\n<p>Generate the impressions table migration</p>\n\n<pre><code>rails g impressionist\n</code></pre>\n\n<p>Run the migration</p>\n\n<pre><code>rake db:migrate\n</code></pre>\n\n<p>In view projects/show.html.erb</p>\n\n<pre><code>&lt;%= @project.impressionist_count %&gt;\n</code></pre>\n\n<p><strong>Displayed error on line &lt;%= @project.impressionist_count %> wrong number of arguments (given 2, expected 0..1)</strong>  I am at a loss to identify the cause of the error.</p>\n\n<p><strong>Logs:</strong></p>\n\n<pre><code>app/views/projects/show.html.erb:89:in `_app_views_projects_show_html_erb___149972252570834158_69970117978380'\n  Rendering /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-5.0.0.rc1/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout\n  Rendering /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-5.0.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-5.0.0.rc1/lib/action_dispatch/middleware/templates/rescues/_source.html.erb (8.9ms)\n  Rendering /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-5.0.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-5.0.0.rc1/lib/action_dispatch/middleware/templates/rescues/_trace.html.erb (5.1ms)\n  Rendering /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-5.0.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-5.0.0.rc1/lib/action_dispatch/middleware/templates/rescues/_request_and_response.html.erb (1.7ms)\n  Rendered /usr/local/rvm/gems/ruby-2.3.0/gems/actionpack-5.0.0.rc1/lib/action_dispatch/middleware/templates/rescues/template_error.html.erb within rescues/layout (121.7ms)\nDEPRECATION WARNING: #original_exception is deprecated. Use #cause instead. (called from status_code_with_paginate at /usr/local/rvm/gems/ruby-2.3.0/gems/will_paginate-3.1.0/lib/will_paginate/railtie.rb:49)\n</code></pre>\n\n<p><strong>In rails console:</strong></p>\n\n<pre><code>pry(main)&gt; project.impressionist_count\nArgumentError: wrong number of arguments (given 2, expected 0..1)\nfrom /usr/local/rvm/gems/ruby-2.3.0/gems/activerecord-5.0.0.rc1/lib/active_record/associations/collection_proxy.rb:731:in `count'\n</code></pre>\n\n<p><strong>Model Project</strong></p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n ..........................\n\n  is_impressionable\n\n.............................\n\nend\n</code></pre>\n\n<p><strong>ProjectsController</strong></p>\n\n<pre><code>class ProjectsController &lt; ApplicationController\n  before_action :set_project, only: [:show, :edit, :update]\n  before_action :authenticate_user!, only: [:new, :edit] \n  before_action :require_permission, only: [:edit]\n  before_action :set_freelancer, only: [:show]\n  before_action :set_response_current_user, only: :show, if:  :exist_response?\n  after_action :verify_authorized, only: [:update]  \n\n  impressionist :actions =&gt; [:show]\n\n    def show\n      @new_response = @project.responses.build\n      impressionist(@project)\n    end\n...............................................\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "paypal", "controller", "paypal-ipn"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464758183, "post_id": 37559916, "comment_id": 62608239, "body": "You forgot to describe what problem you&#39;re having."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4778326"}, "edited": false, "score": 0, "creation_date": 1490629902, "post_id": 37559916, "comment_id": 73186148, "body": "Did you ever get this figured out? Facing the same issue."}], "owner": {"reputation": 437, "user_id": 4643020, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/10152761017948295/picture?type=large", "display_name": "Michael Lombardo", "link": "https://stackoverflow.com/users/4643020/michael-lombardo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1464758872, "creation_date": 1464757955, "last_edit_date": 1464758872, "question_id": 37559916, "link": "https://stackoverflow.com/questions/37559916/paypal-adaptive-payments-ipnnotificationurl", "title": "paypal adaptive payments: ipnNotificationUrl", "body": "<p>I am using adaptive payments in paypal. Also using ngrok for test site. After the payment has been received a notification is suppose to be passed. I am trying to update my database with a t when the notification gets passed. Im not receiving a t from my code and how do I even know without the update from the database that the notificationURL is working? Maybe someone can help me out?? thank you!!  </p>\n\n<p>At the bottom of the controller is where i make the notify for the database. In paypal business tools i put my website url.</p>\n\n<p>RegistrationsController:</p>\n\n<pre><code>def create \n\n         #send request to paypal\n         @reservation = current_user.reservations.create(reservation_params)\n        @reviser = Reviser.find(params[:reviser_id])\n\n        if @reservation\n\n            require 'paypal-sdk-adaptivepayments'\n\n\n        reviserprice = @reservation.total\n        commission = 0.05\n\n        # Build API call\n        @api = PayPal::SDK::AdaptivePayments.new\n        @pay = @api.build_pay({\n            :actionType =&gt; \"PAY\",\n            :cancelUrl =&gt; \"http://4e8c6120.ngrok.io/revisers/#{@reviser.id}\",\n            :returnUrl =&gt; \"http://4e8c6120.ngrok.io/revisers/#{@reviser.id}\",\n            :currencyCode =&gt; \"USD\",\n            :feesPayer =&gt; \"SENDER\",\n            #ipnNotificationUrl                                     ipn_notify\n            :ipnNotificationUrl =&gt; \"http://4e8c6120.ngrok.io/paypal/ipn_notify\",\n            :item_name =&gt; \"@reservation.reviser.essay_type\",\n            :item_number =&gt; \"@reservation.id\",\n            :receiverList =&gt; {\n                :receiver =&gt; [\n                    {\n                        :amount =&gt; reviserprice * 0.1,\n                        :email =&gt; \"birdsinthatcity-facilitator@gmail.com\",\n                        # :primary =&gt; true\n                    },\n                    {\n                        #Before deploying make sure to change the email to current_user.email\n                        :amount =&gt; reviserprice * 0.9,\n                        :email =&gt; \"birdsinthatcity-buyer@gmail.com\",\n                        # :primary =&gt; false\n                    }\n                ]\n            },\n        } || default_api_value)\n\n        # Make API call\n                    @pay_response = @api.pay(@pay)\n\n        # Access Response\n                if @pay_response.success? &amp;&amp; @pay_response.payment_exec_status != \"ERROR\"\n                  @pay_response.payKey\n\n                    redirect_to @api.payment_url(@pay_response)  # Url to complete payment\n\n                    # redirect_to @reservation.room, alert: \"Yes\"\n\n                else\n                  @pay_response.error\n                    redirect_to @reservation.reviser, alert: \"FUCK\"\n                end\n\n\n        else\n            redirect_to @reservation.reviser, alert: \"Opps, Something went wrong!!\"\n    end\nend\n\nprotect_from_forgery except: [:notify]\ndef notify\n    params.permit!\n    status = params[:payment_status]\n\n    reservation = Reservation.find(params[:item_number])\n\n    if status = \"Completed\"\n        reservation.update_attributes status: true\n    else\n        reservation.destroy\n    end\n    render nothing: true\nend\n</code></pre>\n"}, {"tags": ["ruby", "design-patterns"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1464754489, "post_id": 37559248, "comment_id": 62607005, "body": "Your question is unclear. What do you mean by &quot;relying on a class or module&quot;? Could you edit your question to include example code?"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 0, "creation_date": 1464758828, "post_id": 37559248, "comment_id": 62608499, "body": "I wonder why you want to use the decorator pattern here.  Why not just validate the arguments inline?  Doing so is about three simple lines."}, {"owner": {"reputation": 637, "user_id": 4689935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QEHKO.png?s=128&g=1", "display_name": "Crixx93", "link": "https://stackoverflow.com/users/4689935/crixx93"}, "edited": false, "score": 0, "creation_date": 1464782358, "post_id": 37559248, "comment_id": 62623069, "body": "Is not just in this method really, there are other methods in my software that could use this decorator too."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1464754674, "creation_date": 1464754674, "answer_id": 37559343, "question_id": 37559248, "link": "https://stackoverflow.com/questions/37559248/decorating-a-method-in-ruby/37559343#37559343", "title": "Decorating a method in Ruby", "body": "<p>Normally when you're talking about decorators you'd use that in the context of a class, not a single method.</p>\n\n<p>Here's an example of a class you can decorate:</p>\n\n<pre><code>class ValidatorSet\n  def initialize\n    @validators = [ ]\n  end\n\n  def &lt;&lt;(validator)\n    @validators &lt;&lt; validator\n  end\n\n  def valid?(list)\n    @validators.all? do |v|\n      if v.respond_to?(:valid?)\n        v.valid?(list)\n      else\n        list.all?(&amp;v)\n      end\n    end\n  end\nend\n\nclass IsUnderTen\n  def valid?(list)\n    list.all? { |n| n &lt; 10 }\n  end\nend\n\nvalidator = ValidatorSet.new\nvalidator &lt;&lt; IsUnderTen.new\nvalidator &lt;&lt; lambda { |n| n &gt; 0 }\n\nvalidator.valid?([ 1, 2, 3, 4, 5 ])\n# =&gt; true\n\nvalidator.valid?([ -1 ])\n# =&gt; false\n\nvalidator.valid?([ 9, 10, 11, 12 ])\n# =&gt; false\n</code></pre>\n\n<p>You see this sort of thing used in the ActiveRecord validation chain.</p>\n"}, {"comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 637, "user_id": 4689935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QEHKO.png?s=128&g=1", "display_name": "Crixx93", "link": "https://stackoverflow.com/users/4689935/crixx93"}, "edited": false, "score": 0, "creation_date": 1466783257, "post_id": 37927318, "comment_id": 63476601, "body": "Thanks. I actually wrote it down top-to-bottom directly inside the answer window on <a href=\"https://stackoverflow.com\">Stack Overflow</a>, and only then copy&amp;pasted it into Pry, and it worked on the very first try. That&#39;s usually a good sign for a clean and simple design :-D"}, {"owner": {"reputation": 5624, "user_id": 54247, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1700eeb3b7d7cc960e03a016be7dcaff?s=128&d=identicon&r=PG", "display_name": "dolzenko", "link": "https://stackoverflow.com/users/54247/dolzenko"}, "edited": false, "score": 0, "creation_date": 1506426384, "post_id": 37927318, "comment_id": 79808205, "body": "Upvoted, that said I&#39;m so <i>happy</i> refinements never catched up and really hope they never will, not something I would ever use in my code. And yes, I&#39;ve been to monkey patching, facets library (if anybody even remember that now) alias_method_chain and all that stuff, but time and practice (enterprise mostly) proved it&#39;s baaaad design, don&#39;t do it kids!"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 5, "last_activity_date": 1466439561, "creation_date": 1466439561, "answer_id": 37927318, "question_id": 37559248, "link": "https://stackoverflow.com/questions/37559248/decorating-a-method-in-ruby/37927318#37927318", "title": "Decorating a method in Ruby", "body": "<p>Here's a simple example of how to wrap methods with a validator:</p>\n\n<pre><code>class Foo\n  def foo(a, b, c)\n    p a, b, c\n  end\n\n  def bar(a, b)\n    p a, b\n  end\n\n  validate(:foo, :bar) {|*args, &amp;blk| args.reduce(:+) == 6 } \nend\n</code></pre>\n\n<p>The <code>Module#validate</code> method takes a list of method names, and a block with the validation logic for those methods.</p>\n\n<pre><code>foo = Foo.new\n\nfoo.foo(1, 2, 3)\n# 1\n# 2\n# 3\n\nfoo.bar(2, 4)\n# 2\n# 4\n\nfoo.foo(2, 3, 4)\n# [2, 3, 4] (Validator::ValidationError)\n\nfoo.bar(2, 3)\n# [2, 3] (Validator::ValidationError)\n</code></pre>\n\n<p>As you can see, the validator rejected the argument list in the last two calls because they didn't pass the condition in the block.</p>\n\n<p>This is the \"magic\" which makes it all happen, which isn't actually that magic. We generate a <code>module</code> which overrides the methods we want to validate with a version that <code>raise</code>s an exception if the validation fails and then simply calls <code>super</code>. Then we <code>prepend</code> that module to the class/module that we are currently in, i.e. the one that the call to the <code>validate</code> method is in. And that's it, basically.</p>\n\n<p>I chose to also be a good Ruby citizen and wrap the whole thing in a Refinement, so you need to say </p>\n\n<pre><code>using Validator\n</code></pre>\n\n<p>to actually activate it.</p>\n\n<pre><code>module Validator\n  class ValidationError &lt; ArgumentError; end\n\n  refine Module do\n    def validate(*methods, &amp;validator)\n      prepend(Module.new do\n        methods.each do |method|\n          define_method(method) do |*args, &amp;blk|\n            raise ValidationError, args.inspect unless yield *args\n            super(*args, &amp;blk)\n          end\n        end\n      end)\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 637, "user_id": 4689935, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/QEHKO.png?s=128&g=1", "display_name": "Crixx93", "link": "https://stackoverflow.com/users/4689935/crixx93"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1936, "favorite_count": 2, "accepted_answer_id": 37927318, "answer_count": 2, "score": 2, "last_activity_date": 1466439561, "creation_date": 1464754004, "last_edit_date": 1464782737, "question_id": 37559248, "link": "https://stackoverflow.com/questions/37559248/decorating-a-method-in-ruby", "title": "Decorating a method in Ruby", "body": "<p>I have method that takes as a parameter an array of integer numbers, and I would like to use the decorator pattern to validate first if each of the numbers in the array is in a specified range.</p>\n\n<p>I've seen decorator in ruby that extend class or include modules, but this seems a little excesive to me, is there a way to just decorate a method without relaying on a class or module ?</p>\n\n<p><strong>EDIT</strong>\nI have several methods that takes an array as parameter, and need to validate the range of the items. Instead of inline coding the validation in each of this method, I want a decorator for all of this methods, but I was wondering if decorator classes/modules are the only ones that exist in Ruby ?</p>\n\n<pre><code>class MyClass\n ..some code here ...\n def method(array)\n   ..some code here...\n end\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464755306, "post_id": 37559230, "comment_id": 62607222, "body": "I don&#39;t know if it&#39;ll solve your problem, but this gem popped up on google and seems promising: <a href=\"https://github.com/jpastuszek/capture-output/blob/master/README.md\" rel=\"nofollow noreferrer\">github.com/jpastuszek/capture-output/blob/master/README.md</a>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464757844, "post_id": 37559230, "comment_id": 62608085, "body": "You could make a custom IO derived class that behaves like <code>tap</code> and allows you to display it as well as pass it through."}, {"owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464759409, "post_id": 37559230, "comment_id": 62608747, "body": "@Jordan I tried that gem and it is having the same problem of not showing full output."}, {"owner": {"reputation": 3090, "user_id": 3804420, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7143c03b5b0e42cb070947af0d60ebd1?s=128&d=identicon&r=PG", "display_name": "gmuraleekrishna", "link": "https://stackoverflow.com/users/3804420/gmuraleekrishna"}, "edited": false, "score": 0, "creation_date": 1464759419, "post_id": 37559230, "comment_id": 62608755, "body": "This can be a <a href=\"http://mywiki.wooledge.org/XyProblem\" rel=\"nofollow noreferrer\">XY problem</a>. Please explain why you want to do this. it might help a different solution altogether."}, {"owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "reply_to_user": {"reputation": 3090, "user_id": 3804420, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7143c03b5b0e42cb070947af0d60ebd1?s=128&d=identicon&r=PG", "display_name": "gmuraleekrishna", "link": "https://stackoverflow.com/users/3804420/gmuraleekrishna"}, "edited": false, "score": 0, "creation_date": 1464759618, "post_id": 37559230, "comment_id": 62608837, "body": "@gmuraleekrishna I am creating a rake task that would run <code>rspec spec</code> for a number of different ruby versions and at the end it would summarize how many tests failed for each ruby version.   So I would capture the result of running <code>rspec spec</code> for each ruby version then I will use regular expression to print the number of failed example. That&#39;s the plan."}], "owner": {"reputation": 1984, "user_id": 2623749, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/fcbbc9a5894aea56bce09a71a25e560f?s=128&d=identicon&r=PG", "display_name": "Lokesh", "link": "https://stackoverflow.com/users/2623749/lokesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 227, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1464755111, "creation_date": 1464753882, "last_edit_date": 1464755111, "question_id": 37559230, "link": "https://stackoverflow.com/questions/37559230/display-and-capture-stdout-in-ruby", "title": "Display AND Capture stdout in Ruby", "body": "<p>I'm struggling to write a rake task that can at the same time capture stdout and display the output to the screen. I have used many alternatives and nothing works. Here are some of them:</p>\n\n<ol>\n<li><p><code>stdout = sh('rake spec')</code></p>\n\n<p>This is the closest I have ever got. The problem with this one is that the rake aborts. I think its because of failed specs.</p></li>\n<li><p><code>stdout, stderr, status = Open3.capture3('rake spec')</code></p>\n\n<p>This captures the output but doesn't display the output at the same time.</p></li>\n<li><p><code>rake spec</code> enclosed in backticks</p>\n\n<p>This should work but it doesn't give me the whole output, I don't know why.</p></li>\n</ol>\n\n<p>Please help, I want something which captures the output and at the same time displays the output as it normally does.</p>\n"}, {"tags": ["ruby", "sinatra", "forms", "http-post"], "comments": [{"owner": {"reputation": 21, "user_id": 5759291, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cv3x2IEQxQ4/AAAAAAAAAAI/AAAAAAAAAGw/QtfRHc6eh_M/photo.jpg?sz=128", "display_name": "Devin Duren", "link": "https://stackoverflow.com/users/5759291/devin-duren"}, "edited": false, "score": 0, "creation_date": 1464752895, "post_id": 37559072, "comment_id": 62606559, "body": "This is also my first question here, so any tips on making my question better are also welcome."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464760343, "post_id": 37559072, "comment_id": 62609111, "body": "There doesn&#39;t appear to be anything in your form being posted."}, {"owner": {"reputation": 1135, "user_id": 1638009, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/cce87e94a76af5a587b5c9fe48461910?s=128&d=identicon&r=PG", "display_name": "Shimu", "link": "https://stackoverflow.com/users/1638009/shimu"}, "edited": false, "score": 0, "creation_date": 1464760557, "post_id": 37559072, "comment_id": 62609206, "body": "Try using an input field with a value and name, additional to your submit button. Then there will be something to send to the server"}, {"owner": {"reputation": 21, "user_id": 5759291, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cv3x2IEQxQ4/AAAAAAAAAAI/AAAAAAAAAGw/QtfRHc6eh_M/photo.jpg?sz=128", "display_name": "Devin Duren", "link": "https://stackoverflow.com/users/5759291/devin-duren"}, "edited": false, "score": 0, "creation_date": 1464799419, "post_id": 37559072, "comment_id": 62636014, "body": "I probably should have mentioned, this is on an intermediary page that is just used to re-direct to the correct page, and am using embedded ruby to determine what that should be.  I will edit the question to reflect this."}], "answers": [{"tags": [], "owner": {"reputation": 21, "user_id": 5759291, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cv3x2IEQxQ4/AAAAAAAAAAI/AAAAAAAAAGw/QtfRHc6eh_M/photo.jpg?sz=128", "display_name": "Devin Duren", "link": "https://stackoverflow.com/users/5759291/devin-duren"}, "is_accepted": false, "score": 0, "last_activity_date": 1464815323, "creation_date": 1464815323, "answer_id": 37578810, "question_id": 37559072, "link": "https://stackoverflow.com/questions/37559072/why-is-sinatra-web-server-giving-a-500-error-from-this-post-method/37578810#37578810", "title": "Why is Sinatra web server giving a 500 error from this POST method?", "body": "<p>After removing the enctype= attribute, the form is now working as intended. </p>\n\n<p>From what I've learned, the enctype attribute is only used when uploading a file that needs to be submitted with the form. I had it included here because of past issues on different forms where logic errors occurred when it was not included. </p>\n\n<p>Thanks to all for the comments and suggestions.</p>\n"}], "owner": {"reputation": 21, "user_id": 5759291, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-Cv3x2IEQxQ4/AAAAAAAAAAI/AAAAAAAAAGw/QtfRHc6eh_M/photo.jpg?sz=128", "display_name": "Devin Duren", "link": "https://stackoverflow.com/users/5759291/devin-duren"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 563, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1464815323, "creation_date": 1464752841, "last_edit_date": 1592644375, "question_id": 37559072, "link": "https://stackoverflow.com/questions/37559072/why-is-sinatra-web-server-giving-a-500-error-from-this-post-method", "title": "Why is Sinatra web server giving a 500 error from this POST method?", "body": "<p>I'm building a Ruby web app with Sinatra, and am using a form to pass parameters to a POST page, which should have rendered dynamic content based on those parameters.</p>\n<p>However, when it came time to test the POST method and submitting the form, the following was displayed in the browser:</p>\n<blockquote>\n<p>Internal Server Error</p>\n<p>bad content body</p>\n</blockquote>\n<p>When this happens, the error log shows:</p>\n<blockquote>\n<p>Error: EOFError: bad content body</p>\n</blockquote>\n<p>followed by a stacktrace of files I'm not working with and then:</p>\n<pre><code>&quot;POST /list/AUser'sName&quot; HTTP/1.1 500 294\n</code></pre>\n<p>Code for the form:</p>\n<p>Note - This page is just used for redirecting to a different page, determining the correct form action= attribute.</p>\n<pre><code>&lt;form action=&quot;/list/&lt;%=name%&gt;&quot; method='post' enctype=&quot;multipart/form-data&quot;&gt; \n    &lt;input type='Submit'/&gt;\n&lt;/form&gt;\n</code></pre>\n<p>POST method in the server.rb file:</p>\n<pre><code>post '/list/:name' do\n    &quot;Hello World&quot;\nend\n</code></pre>\n"}, {"tags": ["ruby", "constants"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 3, "creation_date": 1464750252, "post_id": 37558719, "comment_id": 62605885, "body": "Why wouldn&#39;t it? You&#39;re not assigning to or redefining the constant--you&#39;re doing something to the object <i>referenced</i> by that constant. Nitpick: <code>&lt;&lt;</code> isn&#39;t any sort of assignment, it&#39;s a method."}, {"owner": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1464750714, "post_id": 37558719, "comment_id": 62605988, "body": "@dave-newton &lt;&lt; did appear to be like a method to me too, i.e., it appends. But in the same Ruby book I referenced above, it shows the following examples as abbreviated assignments: x &lt;&lt;= y (x = x &lt;&lt; y) and x &gt;&gt;= y (x = x &gt;&gt; y). This is adding to my confusion."}, {"owner": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "reply_to_user": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1464751085, "post_id": 37558719, "comment_id": 62606085, "body": "Ok, @DaveNewton. I get your comment now and understand the difference between assigning (changing the object reference) and modifying the object referenced by the constant (reference is to the same object, but modified). Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464751209, "post_id": 37558807, "comment_id": 62606113, "body": "I wouldn&#39;t say it&#39;s odd at all. I think most, or at least many, OOP-ish languages with mutable objects behave similarly."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464751258, "post_id": 37558807, "comment_id": 62606124, "body": "Say compared to <code>const</code> in other languages. They&#39;re barely &quot;constant&quot; in Ruby!"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464753793, "post_id": 37558807, "comment_id": 62606811, "body": "That&#39;s what I mean. Apart from Ruby&#39;s very odd ability to reassign constants, its constants behave very similarly to, say, variables initialized with <code>const</code> pointing to an object C++ or Objective-C, or <code>final</code> in Java, <code>readonly</code> in C#, <code>let</code> in Swift (for reference types, i.e. classes but not structs), or <code>const</code> in JavaScript."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1464754015, "post_id": 37558807, "comment_id": 62606876, "body": "In C++ <code>const</code> infers both <i>immutability</i> and <i>permanence</i> though it is possible to have a <code>const</code> pointer to a non-<code>const</code> thing. Generally <code>const</code> is a hint to the compiler that it&#39;s okay to presume that value won&#39;t change. In Ruby you have no guarantee of immutability at all, and as for permanence, well, making something a constant is more of a promise and it could be reminded later."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1466441229, "post_id": 37558807, "comment_id": 63306200, "body": "@tadman: I think your answer is somewhat misleading, due to some sloppiness (I tried to come up with a better, more neutral, word, but as a non-native, nothing springs to mind, sorry) in wording: a) he is <i>not</i> modifying the constant, he is modifying the <i>object</i> the constant refers to, and b) you can&#39;t freeze constants, only objects."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1464750923, "creation_date": 1464750923, "answer_id": 37558807, "question_id": 37558719, "link": "https://stackoverflow.com/questions/37558719/assignment-to-constant-within-body-of-method/37558807#37558807", "title": "Assignment to constant within body of method", "body": "<p>The odd thing about constants in Ruby is you can <em>define</em> them once, but modify them endlessly unless they're frozen. The first one is a problem because you're switching which object <code>PERSONS</code> refers to. In the second case you're adding something to an existing object, this is allowed.</p>\n\n<p>Technically it's possible to redefine constants but this is best avoided.</p>\n"}], "owner": {"reputation": 191, "user_id": 5264722, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d51852beefbdf3ba06c3f65217435606?s=128&d=identicon&r=PG&f=1", "display_name": "PiperWarrior", "link": "https://stackoverflow.com/users/5264722/piperwarrior"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 37558807, "answer_count": 1, "score": 1, "last_activity_date": 1464750923, "creation_date": 1464750170, "question_id": 37558719, "link": "https://stackoverflow.com/questions/37558719/assignment-to-constant-within-body-of-method", "title": "Assignment to constant within body of method", "body": "<p>\"The Ruby Programming Language\" by David Flanagan &amp; Yukihiro Matsumoto states the following in Section 4.5.2 Assigning to Constants</p>\n\n<blockquote>\n  <p>Assignment to constants is not allowed within the body of a method.</p>\n</blockquote>\n\n<p>I understand the premise and try two variations of code:</p>\n\n<pre><code>PERSONS = {}\n\ndef create_persons(filename)\n  File.foreach(filename).with_index do |line, number|\n    array = line.split(' ').unshift(number+1)\n    hash = {:id =&gt; array[0],:first_name =&gt; array[1], :last_name =&gt; array[2], :email =&gt; array[3]}\n    PERSONS = hash\n  end\nend\n</code></pre>\n\n<p>I get an error:</p>\n\n<pre><code>santa.rb:13: dynamic constant assignment\n    PERSONS = hash\n             ^\n</code></pre>\n\n<p>The I try second version, where instead of assigning using the equal operator, I initialize an empty array as constant and use the append operator to append hash to empty array. This works!</p>\n\n<pre><code>PERSONS = []\n\ndef create_persons(filename)\n  File.foreach(filename).with_index do |line, number|\n    array = line.split(' ').unshift(number+1)\n    hash = {:id =&gt; array[0],:first_name =&gt; array[1], :last_name =&gt; array[2], :email =&gt; array[3]}\n    PERSONS &lt;&lt; hash\n  end\nend\n</code></pre>\n\n<p>My question is why does the second version work when I use the &lt;&lt; assignment operator, but does not work with = assignment operator.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 0, "creation_date": 1464750498, "post_id": 37558705, "comment_id": 62605940, "body": "Are you using rails?"}, {"owner": {"reputation": 59, "user_id": 6383881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/101cdb2be904b45b0cc21ed8b29dbab5?s=128&d=identicon&r=PG&f=1", "display_name": "Nate_LADE", "link": "https://stackoverflow.com/users/6383881/nate-lade"}, "reply_to_user": {"reputation": 2371, "user_id": 270006, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/874bcba40024d48919097b29a25e852d?s=128&d=identicon&r=PG", "display_name": "\u0179V -", "link": "https://stackoverflow.com/users/270006/%c5%b9v"}, "edited": false, "score": 0, "creation_date": 1464751596, "post_id": 37558705, "comment_id": 62606220, "body": "No just Ruby, using notepad++ and CMD with Ruby."}, {"owner": {"reputation": 59, "user_id": 6383881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/101cdb2be904b45b0cc21ed8b29dbab5?s=128&d=identicon&r=PG&f=1", "display_name": "Nate_LADE", "link": "https://stackoverflow.com/users/6383881/nate-lade"}, "edited": false, "score": 0, "creation_date": 1464752847, "post_id": 37558705, "comment_id": 62606550, "body": "I&#39;m not making assumptions, I&#39;m requiring a certain format for the phone numbers (888) 555-1234, and checking that an email address is in a valid format like: name@me.com. The name section should be able to include any character, an @ symbol to separate the name and domain, and .com or a similar format."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464752913, "post_id": 37558705, "comment_id": 62606564, "body": "@tadman I think your scorn is premature. It looks to me like OP is writing this program as an exercise in learning Ruby, not as a production application."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1464753305, "post_id": 37558705, "comment_id": 62606666, "body": "@Natela I understand where you&#39;re coming from, but <code>sergei@google</code> is theoretically a valid email address because <a href=\"http://www.theregister.co.uk/2014/11/26/google_turns_on_google_internet_extension/\" rel=\"nofollow noreferrer\"><code>.google</code> is a thing</a>: Your presumption that there will be at least two components to the domain is not correct. There&#39;s nothing more infuriating to people than when they end up <a href=\"http://www.wired.com/2015/11/null/\" rel=\"nofollow noreferrer\">falling victim to sloppy programming</a> or how <a href=\"http://usatoday30.usatoday.com/news/nation/2008-02-21-2916826860_x.htm\" rel=\"nofollow noreferrer\">people with apostrophes in their name are always having trouble</a>."}, {"owner": {"reputation": 59, "user_id": 6383881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/101cdb2be904b45b0cc21ed8b29dbab5?s=128&d=identicon&r=PG&f=1", "display_name": "Nate_LADE", "link": "https://stackoverflow.com/users/6383881/nate-lade"}, "edited": false, "score": 0, "creation_date": 1464753417, "post_id": 37558705, "comment_id": 62606700, "body": "I am trying to teach myself ruby by trying to solve problems in a book I purchased. &quot;Ruby Programming&quot; by Jerry Lee Ford Jr. The problem specifies that the format must have a domain name with .com, .edu, or something similar."}], "answers": [{"comments": [{"owner": {"reputation": 59, "user_id": 6383881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/101cdb2be904b45b0cc21ed8b29dbab5?s=128&d=identicon&r=PG&f=1", "display_name": "Nate_LADE", "link": "https://stackoverflow.com/users/6383881/nate-lade"}, "edited": false, "score": 0, "creation_date": 1464753800, "post_id": 37558970, "comment_id": 62606812, "body": "Thanks Jordan. How to I implement the phone number validation within the loop so it stops when a valid 10 digit number is entered.]"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "reply_to_user": {"reputation": 59, "user_id": 6383881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/101cdb2be904b45b0cc21ed8b29dbab5?s=128&d=identicon&r=PG&f=1", "display_name": "Nate_LADE", "link": "https://stackoverflow.com/users/6383881/nate-lade"}, "edited": false, "score": 0, "creation_date": 1464754131, "post_id": 37558970, "comment_id": 62606912, "body": "Separate your input/output logic from your validation logic. Don&#39;t print error messages in your validation methods. Have the logic that accepts user input call <code>phone_number</code> in a loop and check its return value (it could perhaps return <code>nil</code> if the value is invalid)."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": true, "score": 1, "last_activity_date": 1464753901, "last_edit_date": 1464753901, "creation_date": 1464752097, "answer_id": 37558970, "question_id": 37558705, "link": "https://stackoverflow.com/questions/37558705/ruby-validation-of-name-email-and-phone-number/37558970#37558970", "title": "Ruby validation of name, email, and phone number", "body": "<p>I suspect you didn't intend to use the assignment operator here:</p>\n\n<pre><code>if (email = /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\Z/i)\n</code></pre>\n\n<p>Try this:</p>\n\n<pre><code>if email =~ /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\Z/i\n</code></pre>\n\n<p>You have a similar error in the <code>phone_number</code> method:</p>\n\n<pre><code>if number = 10\n</code></pre>\n\n<p>I'm not sure what you intended here. Perhaps this?</p>\n\n<pre><code>if number.size == 10\n</code></pre>\n\n<p>You have more problems, however. Take a look at this loop:</p>\n\n<pre><code>loop do\n  if number.size == 10\n    break   \n  else\n    puts \"Invalid phone number entered. Please try again.\"\n  end\nend\n</code></pre>\n\n<p>How will the user ever exit this loop if the number is invalid? The value of <code>number</code> never changes.</p>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 1, "last_activity_date": 1464753800, "creation_date": 1464753800, "answer_id": 37559214, "question_id": 37558705, "link": "https://stackoverflow.com/questions/37558705/ruby-validation-of-name-email-and-phone-number/37559214#37559214", "title": "Ruby validation of name, email, and phone number", "body": "<p>Here's a Ruby flavoured approach to what you're trying to do:</p>\n\n<pre><code># Define constants for things that are special and get re-used.\nEMAIL_PATTERN = /\\A\\S+@\\S+\\z/\n\n# Methods that test something and return true or false often end with\n# a question mark (?) to indicate this.\ndef valid_email?(email)\n  !!email.match(EMAIL_PATTERN)\nend\n\n# Try and keep your support methods separate from the main body of\n# your program.\n\nputs \"Enter your email address (joe@info.com): \"\n\n# This sets up a loop that waits until you get a valid response.\nwhile (email = gets)\n  email = gets\n\n  if valid_email?(email)\n    puts \"Great, that looks like it could work\"\n    break\n  else\n    # Note that the message is rendered here, not in the validation\n    # method, so there's no assumptions about how this method is used.\n    puts \"Invalid email address entered. Please try again. \"\n  end\nend\n</code></pre>\n\n<p>If you try and structure your code this way you'll find it's a lot easier to keep things organized. This is one of the big challenges when learning programming so as not to get overwhelmed.</p>\n\n<p>Regular expressions are great for validating things that conform to a very specific pattern, but try not to get overly confident in the pattern of everyday things. Even the humble IPv4 address comes in a multitude of forms.</p>\n"}], "owner": {"reputation": 59, "user_id": 6383881, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/101cdb2be904b45b0cc21ed8b29dbab5?s=128&d=identicon&r=PG&f=1", "display_name": "Nate_LADE", "link": "https://stackoverflow.com/users/6383881/nate-lade"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 371, "favorite_count": 1, "accepted_answer_id": 37558970, "answer_count": 2, "score": 1, "last_activity_date": 1464755624, "creation_date": 1464750112, "last_edit_date": 1464755624, "question_id": 37558705, "link": "https://stackoverflow.com/questions/37558705/ruby-validation-of-name-email-and-phone-number", "title": "Ruby validation of name, email, and phone number", "body": "<p>After creating the loop to check that the phone number is 10 characters I believe the phone issue is now resolved. Now I'm working with checking the email address, name, and making sure it outputs correctly, and making sure 2 names are entered by the user. Having issues getting the email address to validate and output in the correct format.</p>\n\n<pre><code>    NAME_PATTERN = /([\\w\\-\\']{2,})([\\s]+)([\\w\\-\\']{2,})/\n    EMAIL_PATTERN = /\\A([^@\\s]+)@((?:[-a-z0-9]+\\.)+[a-z]{2,})\\Z/i\n    PHONE_PATTERN = /^(?:\\+?1\\s*(?:[.-]\\s*)?)?(?:\\(\\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\\s*\\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\\s*(?:[.-]\\s*)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\\s*(?:[.-]\\s*)?([0-9]{4})$/\n\n    def valid_name?(name)\n        !!name.match(NAME_PATTERN)\n    end\n\n    puts \"Enter your first and last name (John Doe): \"\n\n    while (name=gets)\n\n        names = name.split(\" \", 2)\n        if valid_name?(name)\n            puts \"Great, that looks like it could work.\"\n            break\n            else\n            puts \"Please enter first and last name.\"\n        end\n    end\n\n    def valid_email?(email)\n        !!email.match(EMAIL_PATTERN)\n    end\n\n    puts \"Enter your email address (joe@info.com): \"\n\n    while (email = gets)\n\n        if valid_email?(email)\n            puts \"Great, that looks like it could work.\"\n            break\n        else\n            puts \"Invalid email address entered. Please try again. \"\n        end\n    end\n\n    def valid_phone?(number)\n        !!number.match(PHONE_PATTERN)\n    end\n\n    puts \"Enter your phone number including area code (numbers only): \"\n\n    while (number=gets)\n\n        if valid_phone?(number)\n            puts \"Great, that looks like it could work.\"\n            break   \n        else\n            puts \"Invalid phone number entered. Please try again.\"\n            end\n    end\n\n    puts names\n    puts email\n    puts number\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1464751147, "post_id": 37558685, "comment_id": 62606095, "body": "you don&#39;t need to ask <code>Rails.env.development? == &quot;development&quot;</code>, <code>Rails.env.development?</code> is enough. I don&#39;t see any errors here, but, trying that <code>ilike</code> on my env throws an error cos I don&#39;t have that extension installed... do you have it installed?"}, {"owner": {"reputation": 49, "user_id": 6112891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/856828008ccc4db9c3f73ba83296bdea?s=128&d=identicon&r=PG&f=1", "display_name": "Keenanp", "link": "https://stackoverflow.com/users/6112891/keenanp"}, "reply_to_user": {"reputation": 1136, "user_id": 5215927, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/w06Fv.jpg?s=128&g=1", "display_name": "mr_sudaca", "link": "https://stackoverflow.com/users/5215927/mr-sudaca"}, "edited": false, "score": 0, "creation_date": 1464752403, "post_id": 37558685, "comment_id": 62606438, "body": "Aha, I think this would work to but I went with &#39;if Rails.env == &quot;development&quot; construction instead since it worked and I tried it first. Interesting, I didn&#39;t have to install the extension. I&#39;m deploying on heroku, so maybe it&#39;s supported? I&#39;ll look into it more and post the answer. Thanks"}], "answers": [{"comments": [{"owner": {"reputation": 20813, "user_id": 4911842, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Wb3RO.png?s=128&g=1", "display_name": "developer033", "link": "https://stackoverflow.com/users/4911842/developer033"}, "edited": false, "score": 0, "creation_date": 1464751380, "post_id": 37558844, "comment_id": 62606163, "body": "I like your <code>if&#47;else</code> construction. :)"}, {"owner": {"reputation": 49, "user_id": 6112891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/856828008ccc4db9c3f73ba83296bdea?s=128&d=identicon&r=PG&f=1", "display_name": "Keenanp", "link": "https://stackoverflow.com/users/6112891/keenanp"}, "edited": false, "score": 0, "creation_date": 1464751718, "post_id": 37558844, "comment_id": 62606262, "body": "Ahh I see, Rails.env.development? is a boolean. I wasn&#39;t sure. It still isn&#39;t functioning unfortunately, but I will post the code when it is. Thanks"}], "tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": false, "score": 1, "last_activity_date": 1464751592, "last_edit_date": 1464751592, "creation_date": 1464751250, "answer_id": 37558844, "question_id": 37558685, "link": "https://stackoverflow.com/questions/37558685/controller-actions-dependent-on-environment/37558844#37558844", "title": "Controller actions dependent on environment", "body": "<p>There are some issues with your code:</p>\n\n<ul>\n<li><code>Rails.env.development? == \"development\"</code> is not correct, I think it should be <code>Rails.env.development?</code>, because <code>Rails.env.development?</code> returns true/false already</li>\n<li>The query string will be \"name LIKE '%?%'\", because if just use `name LIKE ?\", it is not enough!</li>\n</ul>\n\n<p>In summary, your code would be:</p>\n\n<pre><code>def index\n  name_env = if Rails.env.development?\n    \"name LIKE '%?%'\"\n  else\n    \"name ilike '%?%'\"\n  end \n\n  search_term = params[:q]\n  @products = if search_term\n    Product.where(name_env, search_term)\n  else\n    Product.all\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 49, "user_id": 6112891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/856828008ccc4db9c3f73ba83296bdea?s=128&d=identicon&r=PG&f=1", "display_name": "Keenanp", "link": "https://stackoverflow.com/users/6112891/keenanp"}, "edited": false, "score": 0, "creation_date": 1464752541, "post_id": 37558887, "comment_id": 62606466, "body": "Thanks Rantelo, I thought about what you said and updated it to look like this: <code>def index &#47;&#47;   if Rails.env == &quot;development&quot; &#47;&#47;     name_env = &quot;name LIKE ?&quot; &#47;&#47;     else &#47;&#47;     name_env = &quot;name ilike ?&quot; &#47;&#47;     end &#47;&#47;    if params[:q] &#47;&#47;     search_term = params[:q] &#47;&#47;     @products = Product.where(name_env, &quot;%#{search_term}%&quot;) &#47;&#47;   else &#47;&#47;     @products = Product.all &#47;&#47;   end &#47;&#47; end</code> It works perfectly. Thanks again (sry not sure how to add line breaks in comments)"}], "tags": [], "owner": {"reputation": 126, "user_id": 4092177, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/bJ9aL.jpg?s=128&g=1", "display_name": "Rantelo", "link": "https://stackoverflow.com/users/4092177/rantelo"}, "is_accepted": true, "score": 2, "last_activity_date": 1464751507, "creation_date": 1464751507, "answer_id": 37558887, "question_id": 37558685, "link": "https://stackoverflow.com/questions/37558685/controller-actions-dependent-on-environment/37558887#37558887", "title": "Controller actions dependent on environment", "body": "<p>The problem is that you are asking Rails if it is in development mode and Rails responds you with true (which is different of \"development\")</p>\n\n<p>irb> Rails.env.development?\n => true </p>\n\n<p>What you could do is remove the development after Rails.env so it will be equal to the String \"development\"</p>\n\n<p>irb> Rails.env\n => \"development\"</p>\n\n<p>Or just remove the part where you compare to the String \"development\" since Rails.env.development? returns a Boolean</p>\n"}, {"tags": [], "owner": {"reputation": 702, "user_id": 2813483, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/a806405fb6823e63f56544a44d1323b1?s=128&d=identicon&r=PG&f=1", "display_name": "tessie", "link": "https://stackoverflow.com/users/2813483/tessie"}, "is_accepted": false, "score": 0, "last_activity_date": 1464760038, "creation_date": 1464760038, "answer_id": 37560373, "question_id": 37558685, "link": "https://stackoverflow.com/questions/37558685/controller-actions-dependent-on-environment/37560373#37560373", "title": "Controller actions dependent on environment", "body": "<p>Rails.env.development? == \"development\" would be false in development as Rails.env.development? would be true in development</p>\n"}], "owner": {"reputation": 49, "user_id": 6112891, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/856828008ccc4db9c3f73ba83296bdea?s=128&d=identicon&r=PG&f=1", "display_name": "Keenanp", "link": "https://stackoverflow.com/users/6112891/keenanp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 37558887, "answer_count": 3, "score": 1, "last_activity_date": 1464760038, "creation_date": 1464749981, "question_id": 37558685, "link": "https://stackoverflow.com/questions/37558685/controller-actions-dependent-on-environment", "title": "Controller actions dependent on environment", "body": "<p>simple question here\nI'm trying to define a variable in my controller based on what environment my app is deployed in. Specifically, I want to search for products by any string or partial string in the name, using the SQL term LIKE in my dev. environment and iLIKE in the production environment.</p>\n\n<p>This is what I have, but I'm running into an invalid statement error. I'm quite green with ruby and rails, so I think it may be a syntax error. Thoughts?</p>\n\n<p>Thanks!</p>\n\n<p>products_controller:</p>\n\n<pre><code>def index\n  if Rails.env.development? == \"development\"\n    name_env = \"name LIKE ?\"\n    else\n    name_env = \"name ilike ?\"\n    end \n\n  if params[:q]\n    search_term = params[:q]\n    @products = Product.where(name_env, \"%#{search_term}%\")\n  else\n    @products = Product.all\n  end\nend\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "google-maps"], "answers": [{"comments": [{"owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1464770625, "post_id": 37559917, "comment_id": 62614784, "body": "Hi Matej, thanks for this. Do you mean its bad practice to clone the repos and reference them inside a project or is it bad practice to reference the github file. The other posts suggest bad practice to rely on the github reference."}, {"owner": {"reputation": 4863, "user_id": 2661226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0c7416373de29add9e6a21bbfe545b1?s=128&d=identicon&r=PG", "display_name": "Matej P.", "link": "https://stackoverflow.com/users/2661226/matej-p"}, "reply_to_user": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "edited": false, "score": 0, "creation_date": 1464774343, "post_id": 37559917, "comment_id": 62617363, "body": "Yes. You should not reference from github. Cloning the repo and referencing them inside is absolutely ok. That&#39;s the main reason I linked the other answers, I am glad you understood what I meant :)"}], "tags": [], "owner": {"reputation": 4863, "user_id": 2661226, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a0c7416373de29add9e6a21bbfe545b1?s=128&d=identicon&r=PG", "display_name": "Matej P.", "link": "https://stackoverflow.com/users/2661226/matej-p"}, "is_accepted": true, "score": 0, "last_activity_date": 1464757960, "last_edit_date": 1495541757, "creation_date": 1464757960, "answer_id": 37559917, "question_id": 37558410, "link": "https://stackoverflow.com/questions/37558410/rails-4-gmaps4rails-map-wont-render/37559917#37559917", "title": "Rails 4 - Gmaps4Rails - map won&#39;t render", "body": "<p>So your problem is with these two lines:</p>\n\n<pre><code>&lt;script src=\"//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js\"&gt;&lt;/script&gt;\n&lt;script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Somebody referenced <code>markerclusterer</code> and <code>infobox</code> libraries directly from Google SVN (which is a bad practise) and the library was moved to Github couple of weeks ago.</p>\n\n<p>You can download the <code>infobox</code> library from <a href=\"https://github.com/googlemaps/v3-utility-library/tree/master/infobox/src\" rel=\"nofollow noreferrer\">here</a> to your project and reference <code>infobox_packed.js</code> file:</p>\n\n<pre><code>&lt;script src='path/to/infobox_packed.js' type='text/javascript'&gt;&lt;/script&gt;\n</code></pre>\n\n<p>Similarly, you can download the marker clusterer library <a href=\"https://github.com/googlemaps/js-marker-clusterer\" rel=\"nofollow noreferrer\">here</a>. Careful: for marker cluster you will need both <code>src</code> and <code>images</code>.</p>\n\n<p>Please read this <a href=\"https://stackoverflow.com/questions/37171426/google-maps-api-v3-infobox-js-removed\">SO question and answers</a>, also <a href=\"https://stackoverflow.com/questions/37469525/add-custom-image-to-marker-cluster-without-overwriting-markers\">this one</a> and maybe <a href=\"https://stackoverflow.com/questions/37179980/markercluster-v3-stopped-working-properly\">this one</a>. I strongly advice you to read all the answers in the questions, as some of them contain bad solutions (reference libraries from the new github location, instead of downloading them to your project and referencing them from there is bad practise)</p>\n"}], "owner": {"reputation": 3634, "user_id": 2860931, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/968ddbc21b4695b3fba4665b69d231b5?s=128&d=identicon&r=PG&f=1", "display_name": "Mel", "link": "https://stackoverflow.com/users/2860931/mel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 579, "favorite_count": 0, "accepted_answer_id": 37559917, "answer_count": 1, "score": 0, "last_activity_date": 1464757960, "creation_date": 1464747610, "question_id": 37558410, "link": "https://stackoverflow.com/questions/37558410/rails-4-gmaps4rails-map-wont-render", "title": "Rails 4 - Gmaps4Rails - map won&#39;t render", "body": "<p>I'm struggling to get my google maps to work in my Rails app. </p>\n\n<p>It was all working fine - I moved on to work on the next feature and have come back to find it no longer works.</p>\n\n<p>I have models for address, profile and project. I use address in each of profile and project In each case, the map does not display.</p>\n\n<p>The associations between models are:</p>\n\n<p>Address</p>\n\n<pre><code>belongs_to :addressable, :polymorphic =&gt; true\n</code></pre>\n\n<p>Profile</p>\n\n<pre><code>has_many :addresses, as: :addressable\n    accepts_nested_attributes_for :addresses,  reject_if: :all_blank, allow_destroy: true\n</code></pre>\n\n<p>Project</p>\n\n<pre><code>has_many :addresses, as: :addressable\n    accepts_nested_attributes_for :addresses,  reject_if: :all_blank, allow_destroy: true\n</code></pre>\n\n<p>The controller show functions are:</p>\n\n<p>Address</p>\n\n<pre><code>def create\n    @address = Address.new(address_params)\n    authorize @address\n\n    respond_to do |format|\n      if @address.save\n        format.html { redirect_to @address, notice: 'Address was successfully created.' }\n        format.json { render :show, status: :created, location: @address }\n      else\n        format.html { render :new }\n        format.json { render json: @address.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n</code></pre>\n\n<p>Profile</p>\n\n<pre><code>def show\n    # debugger\n    @profile = Profile.includes(:industries).find(params[:id])\n    # @organisation = Organisation.find(params[:organisation_id])\n    # @profiles = @organisation.profiles\n    @addresses = @profile.addresses\n\n      @hash = Gmaps4rails.build_markers(@addresses) do |address, marker|\n        marker.lat address.latitude\n        marker.lng address.longitude\n        marker.infowindow address.full_address\n      end\n  end\n</code></pre>\n\n<p>Project</p>\n\n<pre><code>def show\n    @invite = Invite.new\n    @project = Project.find(params[:id])\n    @addresses = @project.addresses\n\n      @hash = Gmaps4rails.build_markers(@addresses) do |address, marker|\n        marker.lat address.latitude\n        marker.lng address.longitude\n        marker.infowindow address.full_address\n\n      end\n</code></pre>\n\n<p>In my profiles show, I have:</p>\n\n<pre><code>  &lt;%= render partial: \"profiles/main_address\" %&gt;\n</code></pre>\n\n<p>In profiles/main address, I have:</p>\n\n<pre><code>&lt;script src=\"//maps.google.com/maps/api/js?v=3.18&amp;sensor=false&amp;client=&amp;key=&amp;libraries=geometry&amp;language=&amp;hl=&amp;region=\"&gt;&lt;/script&gt; \n&lt;script src=\"//google-maps-utility-library-v3.googlecode.com/svn/tags/markerclustererplus/2.0.14/src/markerclusterer_packed.js\"&gt;&lt;/script&gt;\n&lt;script src='//google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.1.9/src/infobox_packed.js' type='text/javascript'&gt;&lt;/script&gt; &lt;!-- only if you need custom infoboxes --&gt;\n\n&lt;div style='width: 800px;'&gt;\n  &lt;div id=\"map\" style='width: 800px; height: 400px;'&gt;&lt;/div&gt;\n&lt;/div&gt;\n\n&lt;script&gt;\nhandler = Gmaps.build('Google');\nhandler.buildMap({ provider: {}, internal: {id: 'map'}}, function(){\n  markers = handler.addMarkers(&lt;%=raw @hash.to_json %&gt;);\n  handler.bounds.extendWith(markers);\n  handler.fitMapToBounds();\n  handler.getMap().setZoom(8);\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>I have the same process in my projects folder for showing the project address.</p>\n\n<p>In my gem file I have:</p>\n\n<pre><code>gem 'google-api-client', '~&gt; 0.7.1', require: 'google/api_client'\ngem 'gmaps4rails', '~&gt; 2.1', '&gt;= 2.1.2'\ngem 'underscore-rails'\n</code></pre>\n\n<p>I can't figure out why I just get a blank space instead of a map showing the address.</p>\n\n<p>In my console inspector, I can see a red error that says:</p>\n\n<pre><code>primitives.self-5b8a3a6\u2026.js?body=1:16 Uncaught ReferenceError: MarkerClusterer is not definedGmaps.Google.Primitives @ primitives.self-5b8a3a6\u2026.js?body=1:16Gmaps.Objects.Handler.Handler.setPrimitives @ handler.self-2f220ca\u2026.js?body=1:122Handler @ handler.self-2f220ca\u2026.js?body=1:8Gmaps.build @ base.self-8dd1d1a\u2026.js?body=1:9(anonymous function) @ 14:760\n</code></pre>\n\n<p>Googling the error, Uncaught ReferenceError: MarkerClusterer is not defined, the gem maker suggests running:</p>\n\n<pre><code>rails generate gmaps4rails:install\n</code></pre>\n\n<p>When I try that, I get an error that says:</p>\n\n<pre><code>Running via Spring preloader in process 93390\nCould not find generator 'gmaps4rails:install'. Maybe you meant 'paper_trail:install', 'gmaps4rails:copy_js' or 'responders:install'\n</code></pre>\n\n<p>My console inspector also shows a number of warnings related to gmaps, as:</p>\n\n<pre><code>Google Maps API warning: NoApiKeys https://developers.google.com/maps/documentation/javascript/error-messages#no-api-keys\nutil.js:220 Google Maps API warning: RetiredVersion https://developers.google.com/maps/documentation/javascript/error-messages#retired-version\nutil.js:220 Google Maps API warning: SensorNotRequired https://developers.google.com/maps/documentation/javascript/error-messages#sensor-not-required\nutil.js:220 Google Maps API warning: InvalidClientId https://developers.google.com/maps/documentation/javascript/error-messages#invalid-client-id\nutil.js:220 Google Maps API warning: InvalidKey https://developers.google.com/maps/documentation/javascript/error-messages#invalid-key\n14:1 Failed to decode downloaded font: http://localhost:3000/assets/flaticon-080b09d3f53cb13c2f9d9a4c53ad7a71206bd8e2390c3e18d2b42ce9388a49a6.woff\n</code></pre>\n\n<p>I have an api key - I just don't know where to put it in my code.</p>\n\n<p>Can anyone see how to help. I don't mind if I don't solve the warning problems with Gmaps, but I do want to get back to where I was when the map displayed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "routing"], "answers": [{"comments": [{"owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464756197, "post_id": 37558690, "comment_id": 62607486, "body": "still getting a no route match. I removed the /:query. This error: <code>No route matches [POST] &quot;&#47;&quot;</code>"}, {"owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "reply_to_user": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464756497, "post_id": 37558690, "comment_id": 62607581, "body": "<code>simple_form_for search_path, method: &quot;get&quot; do |q|</code> The form is a post by default and your route is a get."}, {"owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464756664, "post_id": 37558690, "comment_id": 62607635, "body": "I&#39;m getting closer! no error, but it doesn&#39;t go to the search page, it stays on the welcome page (where the input field is), and nothing happens except for the url, it changes to this: <code>http:&#47;&#47;localhost:3000&#47;?utf8=\u2713&amp;%2Fb%5Bquery%5D=testing</code> When I type testing. it doesn&#39;t go to <code>http:&#47;&#47;localhost:3000&#47;q?query=testing</code> like you mentioned"}, {"owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "reply_to_user": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464756836, "post_id": 37558690, "comment_id": 62607702, "body": "can you paste your full routes definition now? Can&#39;t see what you have in front of you. and inspect the form on the page and tell us what the &lt;form&gt; tag shows."}, {"owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "reply_to_user": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464757049, "post_id": 37558690, "comment_id": 62607795, "body": "have updated my answer with a revision, maybe you didn&#39;t do /q"}, {"owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464757180, "post_id": 37558690, "comment_id": 62607845, "body": "updated my question up there. i added the <code>&#47;</code> but still didn&#39;t work"}, {"owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "reply_to_user": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464757416, "post_id": 37558690, "comment_id": 62607924, "body": "<code>&quot;name=&quot;&#47;q[query]&quot;</code> is invalid. Please update all with the error, not &quot;still didn&#39;t work&quot;"}, {"owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464757496, "post_id": 37558690, "comment_id": 62607951, "body": "I don&#39;t get an error, the page just doesn&#39;t go anywhere, it just changes the URL with the string without redirecting to the search page."}, {"owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464757828, "post_id": 37558690, "comment_id": 62608082, "body": "First off, thanks for helping me! Really appreciate it. So I&#39;m getting close to where its supposed to be, its going to the page, but the URL isn&#39;t coming out how its supposed to be like you suggested <code>q?query=this</code>. Instead, its shooting out the ugly url: <code>http:&#47;&#47;localhost:3000&#47;q?utf8=\u2713&amp;query%5Bquery%5D=this</code>"}, {"owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "reply_to_user": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464757991, "post_id": 37558690, "comment_id": 62608153, "body": "The url is wrong because of <code>name=&quot;&#47;q[query]&quot;</code> you really need to update the post so we can establish what you have."}, {"owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464758336, "post_id": 37558690, "comment_id": 62608296, "body": "i just updated the post to show what i currently have"}, {"owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "edited": false, "score": 0, "creation_date": 1464760705, "post_id": 37558690, "comment_id": 62609272, "body": "changing it to <code>= text_field_tag &#39;query&#39;</code> did the trick. Thank you!"}], "tags": [], "owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "is_accepted": true, "score": 3, "last_activity_date": 1464759847, "last_edit_date": 1464759847, "creation_date": 1464750000, "answer_id": 37558690, "question_id": 37558399, "link": "https://stackoverflow.com/questions/37558399/rails-4-creating-custom-search-form-with-custom-routes/37558690#37558690", "title": "rails 4: creating custom search form with custom routes", "body": "<p>remove the /:query as your sending it as a query param not a path param.\nmake it <code>/q</code></p>\n\n<p>Also form might have to be</p>\n\n<p><code>= simple_form_for :search, url: search_path do |q|</code></p>\n\n<p>The form will submit <a href=\"http://example.com/q?query=this\" rel=\"nofollow\">http://example.com/q?query=this</a> not <a href=\"http://example.com/q/this/\" rel=\"nofollow\">http://example.com/q/this/</a></p>\n\n<p>URL issue,</p>\n\n<p>The problem is the simple form is wrapping it in a model. So your params would be <code>params[:query][:query]</code> for the input. You can just you <code>text_field_tag 'query'</code> instead of <code>q.input :query</code></p>\n"}], "owner": {"reputation": 7430, "user_id": 659751, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/X4DC1.jpg?s=128&g=1", "display_name": "hellomello", "link": "https://stackoverflow.com/users/659751/hellomello"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 492, "favorite_count": 0, "accepted_answer_id": 37558690, "answer_count": 1, "score": 0, "last_activity_date": 1464759847, "creation_date": 1464747541, "last_edit_date": 1464758327, "question_id": 37558399, "link": "https://stackoverflow.com/questions/37558399/rails-4-creating-custom-search-form-with-custom-routes", "title": "rails 4: creating custom search form with custom routes", "body": "<p>I think this should be an easy problem, but I just can't figure it out right now. Been coding all day, need another set of eyes.</p>\n\n<p>Current URL is being displayed:</p>\n\n<pre><code>http://localhost:3000/q?utf8=\u2713&amp;query%5Bquery%5D=testing\n</code></pre>\n\n<p>as opposed to</p>\n\n<pre><code>http://localhost:3000/q?query=testing\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n\n  resources :biz do\n    member do\n      get 'photo'\n    end\n  end\n  get '/q' =&gt; 'search#index', as: :search\n\n\n  root 'welcome#index'\n\nend\n</code></pre>\n\n<p><strong>welcome/index.haml</strong></p>\n\n<pre><code>= simple_form_for :query, url: search_path, method: \"get\" do |q|\n  = q.input :query\n</code></pre>\n\n<p>I have a <strong>search_controller.rb</strong></p>\n\n<pre><code>class SearchController &lt; ApplicationController\n  def index\n    if params.has_key?(:query)\n      @query = Model.q(params[:query])\n    else\n      redirect_to root_path\n    end\n  end\nend\n</code></pre>\n\n<p>What should I need to fix or add?</p>\n\n<p><strong>Form from inspector</strong></p>\n\n<pre><code>&lt;form novalidate=\"novalidate\" class=\"simple_form /q\" action=\"/q\" accept-charset=\"UTF-8\" method=\"get\"&gt;\n  &lt;input name=\"utf8\" type=\"hidden\" value=\"\u2713\"&gt;        \n  &lt;div class=\"form-group string required query_query\"&gt;\n    &lt;label class=\"string required control-label\" for=\"query_query\"&gt;\n      &lt;abbr title=\"required\"&gt;&lt;/abbr&gt; Query\n    &lt;/label&gt;\n  &lt;input class=\"string required form-control\" type=\"text\" name=\"query[query]\" id=\"query_query\"&gt;      \n  &lt;/div&gt;           \n&lt;/form&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "checkbox", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464753027, "post_id": 37558838, "comment_id": 62606598, "body": "Thanks for your help! That works... mostly :) but I&#39;d like to maintain the current record as true while setting all others as false. Also this does not check if the checkbox is true/checked so all records will be updated to false either way (not what I&#39;m looking for)."}, {"owner": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464753737, "post_id": 37558838, "comment_id": 62606799, "body": "I&#39;ve changed <code>after_save</code> to <code>before_save</code> which solves the first problem. Still looking for a way to check if checkbox is checked."}, {"owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "reply_to_user": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464754738, "post_id": 37558838, "comment_id": 62607070, "body": "@LKB didn&#39;n understood that you need to keep existing record with <code>true</code>. In that case please have a look on @index&#39;s answer. It will keep existing record with <code>update_checkbox = true</code>"}], "tags": [], "owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "is_accepted": false, "score": 1, "last_activity_date": 1464755394, "last_edit_date": 1464755394, "creation_date": 1464751217, "answer_id": 37558838, "question_id": 37558031, "link": "https://stackoverflow.com/questions/37558031/update-record-if-checkbox-is-checked/37558838#37558838", "title": "Update record if checkbox is checked", "body": "<p>You can achieve that by  ActiveRecord <code>after_save</code> callback</p>\n\n<pre><code>after_save :reset_update_checkbox\n\ndef reset_update_checkbox\n  Article.where(:update_checkbox =&gt; true).update_all(:update_checkbox =&gt; false)\nend\n</code></pre>\n\n<p><code>after_save</code> callback will run after create/update and reset your <code>update_checkbox</code> field to false.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Please consider this solution. Based on @index's asnwer</p>\n\n<pre><code>after_create :reset_and_update\nafter_update :reset_and_update if update_checkbox_checked?\n\ndef reset_and_update\n  Article.where(\"id = ? and update_checkbox = ?\", self.id, true).update_all(update_checkbox: false)\nend\n\ndef update_checkbox_checked?\n  self.update_checkbox\nend\n</code></pre>\n\n<p>I'm pretty sure it will do the trick.</p>\n"}, {"comments": [{"owner": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464754839, "post_id": 37559252, "comment_id": 62607100, "body": "Thanks for your answer! I gave it a go and it is replacing the previous <code>update_checkbox</code> values to false, but it&#39;s doing it if the new record&#39;s checkbox is true <i>and</i> false."}, {"owner": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464756996, "post_id": 37559252, "comment_id": 62607770, "body": "It seems that the checkbox check is being completely ignored. Any idea?"}, {"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "reply_to_user": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464761714, "post_id": 37559252, "comment_id": 62609717, "body": "Do you create the record with <code>update_checkbox</code> as <code>true</code> by default?"}, {"owner": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464761765, "post_id": 37559252, "comment_id": 62609747, "body": "It&#39;s false by default - <code>t.boolean  &quot;update_checkbox&quot;, default: false</code>. It&#39;s strange because it seems the <code>reset_and_update</code> function is called no matter <code>update_checkbox</code> value."}, {"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "reply_to_user": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464762120, "post_id": 37559252, "comment_id": 62609908, "body": "A so it should apply to even create? Check my update if that fits. Only one would be true right, all would be false except the last one checked?"}, {"owner": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464762281, "post_id": 37559252, "comment_id": 62609976, "body": "That&#39;s correct, only one record will be true at a single point in time (the last one checked), the rest should be false. The updated code still has the same issue. Hm..."}, {"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "reply_to_user": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464771609, "post_id": 37559252, "comment_id": 62615410, "body": "Hrmn... Weird. That should exclude the last record cause of the <code>not</code> part. Can you check the sql generated by the <code>Article.where...</code>?"}, {"owner": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464823912, "post_id": 37559252, "comment_id": 62647689, "body": "There&#39;s nothing really wrong with the <code>where</code> statement, just that it runs no matter the checkbox state.  <code>SELECT  &quot;articles&quot;.* FROM &quot;articles&quot;  WHERE &quot;articles&quot;.&quot;id&quot; = ? LIMIT 1  [[&quot;id&quot;, 72]] UPDATE &quot;articles&quot; SET \u201cupdate_checkbox\u201d = &#39;f&#39; WHERE (&quot;articles&quot;.&quot;id&quot; != 72)</code>. According to this checkbox is either a &#39;1&#39; or &#39;0&#39; - <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-check_box\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a> so maybe I should check for &#39;1&#39; instead of true/false?"}, {"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "reply_to_user": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464846327, "post_id": 37559252, "comment_id": 62653261, "body": "<code>if</code> should receive <code>true&#47;false</code>. Maybe just keep checking what&#39;s the value inside <code>update_checkbox_checked?</code> like checking what <code>self.update_checkbox</code>&#39;s value is and go from there."}, {"owner": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464847261, "post_id": 37559252, "comment_id": 62653638, "body": "How can I print the value to console? (Sorry I&#39;m new to Ruby!)"}, {"owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "reply_to_user": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "edited": false, "score": 0, "creation_date": 1464849475, "post_id": 37559252, "comment_id": 62654656, "body": "Updated answer to add <code>puts</code> for console. See lowest section."}], "tags": [], "owner": {"reputation": 3387, "user_id": 978906, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/996f9b10f66cffa29e3949029930f9e4?s=128&d=identicon&r=PG", "display_name": "index", "link": "https://stackoverflow.com/users/978906/index"}, "is_accepted": false, "score": 1, "last_activity_date": 1464849442, "last_edit_date": 1464849442, "creation_date": 1464754016, "answer_id": 37559252, "question_id": 37558031, "link": "https://stackoverflow.com/questions/37558031/update-record-if-checkbox-is-checked/37559252#37559252", "title": "Update record if checkbox is checked", "body": "<p>You could use a callback and do something like this:</p>\n\n<pre><code>after_save :reset_and_update if update_checkbox_checked?\n\ndef reset_and_update\n  Article.where.not(id: self.id).update_all(update_checkbox: false)\nend\n\ndef update_checkbox_checked?\n  self.update_checkbox\nend\n</code></pre>\n\n<p><code>after_create</code> would just update all the other records to <code>false</code>. Whilst <code>after_update</code> would check first if <code>update_checkbox</code> is true and update all aside from self to <code>false</code>.</p>\n\n<p>Test the data using this:</p>\n\n<pre><code>def update_checkbox_checked?\n  puts \"this checkbox value is #{self.update_checkbox}\"\n  puts self\n  self.update_checkbox\nend\n</code></pre>\n"}], "owner": {"reputation": 1000, "user_id": 2380071, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/4d86676a2b190abd251f8bb4a32c5321?s=128&d=identicon&r=PG&f=1", "display_name": "LKB", "link": "https://stackoverflow.com/users/2380071/lkb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464849442, "creation_date": 1464744292, "question_id": 37558031, "link": "https://stackoverflow.com/questions/37558031/update-record-if-checkbox-is-checked", "title": "Update record if checkbox is checked", "body": "<p>I'm trying to check if the checkbox has been selected, and if so to then update all records where a particular column (<code>update_checkbox</code> - a boolean value in my table) is true.</p>\n\n<p>The main aim is so only one record in the column can ever be 'true', and when a new record is created/edited and the checkbox checked then this record will be true and turn the other to false.</p>\n\n<p>Under models/article.rb:</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n  if :update_checkbox == '1'\n    #find records where update_checkbox is true &amp; update to false\n    Article.where(:update_checkbox =&gt; true).update_all(:update_checkbox =&gt; false)\n  end\nend\n</code></pre>\n\n<p>I can update my records fine but it's the 'if checkbox is checked' part I'm having trouble with - currently when I create a new record with <code>update_checkbox</code> checked the row with this flag set to true is not being set to false. Any help is appreciated!</p>\n"}, {"tags": ["ruby", "regex", "jekyll", "rouge"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1464743715, "post_id": 37557939, "comment_id": 62604385, "body": "Adding a small example and the desired result would be helpful. If you do that, be sure to assign a variable to each input value (<code>str = &quot;...&quot;</code>) so that readers can refer to the variables without having to define them."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 2, "last_activity_date": 1464745132, "creation_date": 1464745132, "answer_id": 37558137, "question_id": 37557939, "link": "https://stackoverflow.com/questions/37557939/match-a-string-but-capture-only-substring-of-its-match-in-ruby/37558137#37558137", "title": "Match a string but capture only substring of it&#39;s match in ruby", "body": "<p>I suspect you're overthinking this. You don't need lookahead or lookbehind here.</p>\n\n<pre><code>str = \"foo --word1 &lt;word2&gt; word3=anyNumber.word4\"\n\np /--(\\w+)/.match(str).captures\n# =&gt; [\"word1\"]\n\np /&lt;([^&gt;]+)&gt;/.match(str).captures\n# =&gt; [\"word2\"]\n\np /(\\w+)=([\\w.]+)/.match(str).captures\n# =&gt; [\"word3\", \"anyNumber.word4\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1464745382, "creation_date": 1464745382, "answer_id": 37558162, "question_id": 37557939, "link": "https://stackoverflow.com/questions/37557939/match-a-string-but-capture-only-substring-of-its-match-in-ruby/37558162#37558162", "title": "Match a string but capture only substring of it&#39;s match in ruby", "body": "<pre><code>str = \"--hopscotch &lt;dodgeball&gt; cat=9.lives\"\n\nstr[/(?&lt;=\\-\\-)\\w+/]\n  #=&gt; \"hopscotch\" \nstr[/(?&lt;=\\&lt;)\\w+(?=\\&gt;)/]\n  #=&gt; \"dodgeball\" \nstr.scan /(?:\\w+(?=\\=))|(?&lt;=\\=)\\d+\\.\\w+/\n  #=&gt; [\"cat\", \"9.lives\"] \n</code></pre>\n"}], "owner": {"reputation": 273, "user_id": 5952159, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/43ecbcb29e480758190211b25c85f70c?s=128&d=identicon&r=PG", "display_name": "Dennis Grinch", "link": "https://stackoverflow.com/users/5952159/dennis-grinch"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1464745382, "creation_date": 1464743508, "question_id": 37557939, "link": "https://stackoverflow.com/questions/37557939/match-a-string-but-capture-only-substring-of-its-match-in-ruby", "title": "Match a string but capture only substring of it&#39;s match in ruby", "body": "<p>I am extending <code>rouge</code> shell lexer for my <code>jekyll</code> site and I want to do the following.</p>\n\n<ol>\n<li>Match <code>--word</code>. Capture <code>word</code>, discard <code>--</code>.</li>\n<li>Match <code>&lt;word&gt;</code>. Capture <code>word</code>, discard both <code>&lt;</code> and <code>&gt;</code>.</li>\n<li>Match <code>word=anyNumber.word</code>. Capture <code>word</code> and <code>anyNumber.word</code>, discard <code>=</code>.</li>\n</ol>\n\n<p>First I have tried <code>/(?=-+)\\w/</code>, didn't match anything, then I tried to do reverse and discard <code>word</code> such as <code>/-+(?=\\w*)/</code>, and it worked. What I am doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord"], "comments": [{"owner": {"reputation": 902, "user_id": 6080209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fv6iS.jpg?s=128&g=1", "display_name": "M. Karim", "link": "https://stackoverflow.com/users/6080209/m-karim"}, "edited": false, "score": 0, "creation_date": 1464747177, "post_id": 37557786, "comment_id": 62605169, "body": "Do you want the result in <code>ActiveRecord Relation Object</code> or converting it into an <code>Array</code> is ok?"}, {"owner": {"reputation": 768, "user_id": 6010868, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6804161e8c7410a173defda7332185?s=128&d=identicon&r=PG&f=1", "display_name": "HashRocket", "link": "https://stackoverflow.com/users/6010868/hashrocket"}, "reply_to_user": {"reputation": 902, "user_id": 6080209, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Fv6iS.jpg?s=128&g=1", "display_name": "M. Karim", "link": "https://stackoverflow.com/users/6080209/m-karim"}, "edited": false, "score": 0, "creation_date": 1464747314, "post_id": 37557786, "comment_id": 62605200, "body": "I already solve the question. I posted my answer below."}], "answers": [{"tags": [], "owner": {"reputation": 768, "user_id": 6010868, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6804161e8c7410a173defda7332185?s=128&d=identicon&r=PG&f=1", "display_name": "HashRocket", "link": "https://stackoverflow.com/users/6010868/hashrocket"}, "is_accepted": true, "score": 1, "last_activity_date": 1464743016, "creation_date": 1464743016, "answer_id": 37557890, "question_id": 37557786, "link": "https://stackoverflow.com/questions/37557786/move-one-object-in-collection-of-objects-in-rails/37557890#37557890", "title": "Move one object in collection of objects in rails", "body": "<p>I already got the answer. Here is what I made to made my question above worked.</p>\n\n<pre><code>@users = User.all\nuser_ids = User.pluck(:id)\nuser_ids.delete(2)\nnew_user_ids = [2]\n\nuser_ids.each do |id|\n  new_user_ids &lt;&lt; id\nend\n\n@users.sort_by { |user| new_user_ids.index(user.id) }\n</code></pre>\n\n<p>And this made perfect!</p>\n"}, {"comments": [{"owner": {"reputation": 768, "user_id": 6010868, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6804161e8c7410a173defda7332185?s=128&d=identicon&r=PG&f=1", "display_name": "HashRocket", "link": "https://stackoverflow.com/users/6010868/hashrocket"}, "edited": false, "score": 0, "creation_date": 1464744809, "post_id": 37558071, "comment_id": 62604638, "body": "You are just swapping the object. And your code is not flexible. You have only 2 in an object. What if I have more that 100? You mean I modify the swap! method? My answer below is just enough."}, {"owner": {"reputation": 1630, "user_id": 4509585, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7023402d04ae775b7c6fa46626e38136?s=128&d=identicon&r=PG&f=1", "display_name": "pyfl88", "link": "https://stackoverflow.com/users/4509585/pyfl88"}, "reply_to_user": {"reputation": 768, "user_id": 6010868, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6804161e8c7410a173defda7332185?s=128&d=identicon&r=PG&f=1", "display_name": "HashRocket", "link": "https://stackoverflow.com/users/6010868/hashrocket"}, "edited": false, "score": 0, "creation_date": 1464745636, "post_id": 37558071, "comment_id": 62604818, "body": "Your question is about move one object up? Well if you want more flexibility why not just change the arg <code>b = a - 1</code> to <code>b</code>, so we can swap to whichever index we want?"}], "tags": [], "owner": {"reputation": 1630, "user_id": 4509585, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/7023402d04ae775b7c6fa46626e38136?s=128&d=identicon&r=PG&f=1", "display_name": "pyfl88", "link": "https://stackoverflow.com/users/4509585/pyfl88"}, "is_accepted": false, "score": -1, "last_activity_date": 1464744599, "creation_date": 1464744599, "answer_id": 37558071, "question_id": 37557786, "link": "https://stackoverflow.com/questions/37557786/move-one-object-in-collection-of-objects-in-rails/37558071#37558071", "title": "Move one object in collection of objects in rails", "body": "<p>We can also do it in a way like this: </p>\n\n<p>Add a new method to Array. lib/rails_extensions.rb</p>\n\n<pre><code>class Array\n\n  def swap!(a, b = a - 1)\n           self[a], self[b] = self[b], self[a]\n      self\n  end\n\nend\n</code></pre>\n\n<p>Then add this in config/environment.rb</p>\n\n<pre><code>require 'rails_extensions'\n</code></pre>\n\n<p>So we can use the method <code>swap!</code> for arrays and it will swap the object with the one before it. We can do something like this:</p>\n\n<pre><code>@users = User.all #[&lt;#User id: 1&gt;, &lt;#User id: 2&gt;]\nuser_id = @users.rindex {|user| user.id == 2}\n@users = @users.swap!(user_id) #[&lt;#User id: 2&gt;, &lt;#User id: 1&gt;]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 768, "user_id": 6010868, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6804161e8c7410a173defda7332185?s=128&d=identicon&r=PG&f=1", "display_name": "HashRocket", "link": "https://stackoverflow.com/users/6010868/hashrocket"}, "edited": false, "score": 0, "creation_date": 1464745406, "post_id": 37558106, "comment_id": 62604766, "body": "Not sorting an id, it&#39;s the whole User object in collection of objects."}], "tags": [], "owner": {"reputation": 967, "user_id": 6402365, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5800785891cb5a0d35199bd27bc34287?s=128&d=identicon&r=PG&f=1", "display_name": "Ropeney", "link": "https://stackoverflow.com/users/6402365/ropeney"}, "is_accepted": false, "score": -1, "last_activity_date": 1464744912, "creation_date": 1464744912, "answer_id": 37558106, "question_id": 37557786, "link": "https://stackoverflow.com/questions/37557786/move-one-object-in-collection-of-objects-in-rails/37558106#37558106", "title": "Move one object in collection of objects in rails", "body": "<p>is this too ugly?</p>\n\n<pre><code>hash = [{ id: 1}, {id: 2}, {id: 3}]\nhash.unshift(hash.delete(hash.select {|h| h[:id] == 2 }.first))\n=&gt; [{:id=&gt;2}, {:id=&gt;1}, {:id=&gt;3}]\n</code></pre>\n"}], "owner": {"reputation": 768, "user_id": 6010868, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7a6804161e8c7410a173defda7332185?s=128&d=identicon&r=PG&f=1", "display_name": "HashRocket", "link": "https://stackoverflow.com/users/6010868/hashrocket"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 37557890, "answer_count": 3, "score": 1, "last_activity_date": 1464744912, "creation_date": 1464742101, "question_id": 37557786, "link": "https://stackoverflow.com/questions/37557786/move-one-object-in-collection-of-objects-in-rails", "title": "Move one object in collection of objects in rails", "body": "<p>Here is the scenario, I have these objects. Let's assume that this is a <code>User</code>:</p>\n\n<p>The object came from:</p>\n\n<pre><code>@user = User.all\n</code></pre>\n\n<p>User Object</p>\n\n<pre><code>[&lt;#User id: 1, firstname: \"John\", lastname: \"Pond\"&gt;,&lt;#User id: 2, firstname: \"Paul\", lastname: \"Rich\"&gt;,&lt;#User id: 3, firstname: \"Jasmine\", lastname: \"Ong\"&gt;]\n</code></pre>\n\n<p>How can I move one object up, for example I want to move <code>User.id == 2</code>? The result I want is shown below.</p>\n\n<pre><code>[&lt;#User id: 2, firstname: \"Paul\", lastname: \"Rich\"&gt;,&lt;#User id: 1, firstname: \"John\", lastname: \"Pond\"&gt;,&lt;#User id: 3, firstname: \"Jasmine\", lastname: \"Ong\"&gt;]\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "edited": false, "score": 1, "creation_date": 1464740764, "post_id": 37557620, "comment_id": 62603762, "body": "Put it in <code>initialize</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8007, "user_id": 6336139, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/yZ1gA.png?s=128&g=1", "display_name": "T. Claverie", "link": "https://stackoverflow.com/users/6336139/t-claverie"}, "is_accepted": false, "score": 1, "last_activity_date": 1464740898, "creation_date": 1464740898, "answer_id": 37557653, "question_id": 37557620, "link": "https://stackoverflow.com/questions/37557620/how-can-i-call-a-method-when-an-object-is-initialized/37557653#37557653", "title": "How can I call a method when an object is initialized?", "body": "<p>You can call methods inside of other methods, <code>initialize</code> is no exception:</p>\n\n<pre><code>def initialize(file)\n    @creek = Creek::Book.new file\n    @sheet= @creek.sheets[0]\n    @cop_log = {}\n    read_spreadsheet\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 126343, "user_id": 14660, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/e55e0ec3c00f834d78fbdddeaa36e308?s=128&d=identicon&r=PG", "display_name": "Schwern", "link": "https://stackoverflow.com/users/14660/schwern"}, "is_accepted": true, "score": 2, "last_activity_date": 1464740935, "creation_date": 1464740935, "answer_id": 37557658, "question_id": 37557620, "link": "https://stackoverflow.com/questions/37557620/how-can-i-call-a-method-when-an-object-is-initialized/37557658#37557658", "title": "How can I call a method when an object is initialized?", "body": "<p>The object already exists by the time <code>initialize</code> is called, it just hasn't been initialized yet. So you can call methods in <code>initialize</code>, but do it after the rest of the object has been initialized, especially <code>@sheet</code>.</p>\n\n<pre><code>  def initialize(file)\n    @creek = Creek::Book.new file\n    @sheet= @creek.sheets[0]\n    @cop_log = {}\n\n    read_spreadsheet\n  end\n</code></pre>\n\n<p><code>read_spreadsheet</code> is shorthand for <code>self.read_spreadsheet</code>. <a href=\"https://stackoverflow.com/questions/6669527/use-of-ruby-self-keyword\"><code>self</code></a> is the object <code>initialize</code> (or any other method) was called with. In this case <code>self</code> is your freshly created <code>ChangeOrderLog</code> object.</p>\n"}], "owner": {"reputation": 880, "user_id": 5279080, "user_type": "registered", "accept_rate": 68, "profile_image": "https://lh5.googleusercontent.com/-LoDm6XYbQug/AAAAAAAAAAI/AAAAAAAAABE/t33anFH2T3I/photo.jpg?sz=128", "display_name": "alilland", "link": "https://stackoverflow.com/users/5279080/alilland"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "accepted_answer_id": 37557658, "answer_count": 2, "score": 0, "last_activity_date": 1464740981, "creation_date": 1464740620, "last_edit_date": 1464740981, "question_id": 37557620, "link": "https://stackoverflow.com/questions/37557620/how-can-i-call-a-method-when-an-object-is-initialized", "title": "How can I call a method when an object is initialized?", "body": "<p>Rather than calling <code>cop_log.read_spreadsheet</code> how can I call the method <code>read_spreadsheet</code> directly inside my class when I use <code>ChangeOrderLog.new('path/to/file')</code>? </p>\n\n<p><code>cop_log.read_spreadsheet</code> populates the <code>@cop_log</code> hash with the data from an excel spreadsheet, is there any way I can populate my hash from within my ChangeOrderLog class instead of outside of it?</p>\n\n<pre><code>require 'creek'\n\nclass ChangeOrderLog\n  attr_reader :creek, :sheet\n  attr_accessor :cop_log\n  def initialize(file)\n    @creek = Creek::Book.new file\n    @sheet= @creek.sheets[0]\n    @cop_log = {}\n  end\n  def read_spreadsheet\n    sheet.rows.each { |row| cop_log.merge!(row) }\n  end\n  def job_number\n    return cop_log['G1']\n  end\nend\n\ncop_log = ChangeOrderLog.new('path/to/file')\ncop_log.read_spreadsheet\nputs cop_log.job_number\n</code></pre>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1464779311, "post_id": 37557483, "comment_id": 62620960, "body": "Cannot reproduce. Maybe you can <a href=\"https://github.com/jekyll/jekyll/issues/new\" rel=\"nofollow noreferrer\">fill a Jekyll issue</a>."}, {"owner": {"reputation": 182, "user_id": 5661856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa6c7d3298aa5709088daf46294787a?s=128&d=identicon&r=PG&f=1", "display_name": "socialpiranha", "link": "https://stackoverflow.com/users/5661856/socialpiranha"}, "reply_to_user": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1464904471, "post_id": 37557483, "comment_id": 62690221, "body": "Hmm, thanks for checking! I&#39;ll do that."}, {"owner": {"reputation": 1352, "user_id": 1508105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/78a3f468d2325d1c68448be659a64417?s=128&d=identicon&r=PG", "display_name": "Alex Johnson", "link": "https://stackoverflow.com/users/1508105/alex-johnson"}, "edited": false, "score": 3, "creation_date": 1465238025, "post_id": 37557483, "comment_id": 62807371, "body": "By any chance are you editing files in the <code>&#47;_site&#47;</code> folder? This folder gets overwritten when Jekyll detects changes and re-builds your site."}], "owner": {"reputation": 182, "user_id": 5661856, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0fa6c7d3298aa5709088daf46294787a?s=128&d=identicon&r=PG&f=1", "display_name": "socialpiranha", "link": "https://stackoverflow.com/users/5661856/socialpiranha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 511, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1464739472, "creation_date": 1464739472, "question_id": 37557483, "link": "https://stackoverflow.com/questions/37557483/jekyll-keeps-replacing-file-with-default-file", "title": "Jekyll keeps replacing file with default file", "body": "<p>This only happens 50% of the time, but sometimes when I change and save my <code>index.html</code> or <code>main.scss</code> file, all of my code is reverted to the original default Jekyll files. </p>\n\n<p>When I <code>undo</code> the change I've made, I can see my old code.</p>\n\n<p>To create my Jekyll files, here's all I've done (<a href=\"http://jekyllrb.com/\" rel=\"nofollow\">from the Jekyll docs</a>):</p>\n\n<pre><code> $ gem install jekyll\n $ jekyll new my-awesome-site\n $ cd my-awesome-site\n ~/my-awesome-site $ jekyll serve\n</code></pre>\n\n<p>After this happens, my terminal looks like this:</p>\n\n<pre><code>Auto-regeneration: enabled for '/Users/myname/dev/foldername'\nConfiguration file: /Users/myname/dev/foldername/_config.yml\nServer address: http://127.0.0.1:4000/\nServer running... press ctrl-c to stop.\n[2016-05-31 17:27:44] ERROR `/css/style.css' not found.\n[2016-05-31 17:27:44] ERROR `/js/main.js' not found.\nRegenerating: 1 file(s) changed at 2016-05-31 17:27:59 ...done in 0.128183 seconds.\n</code></pre>\n\n<p>I'm new to using Jekyll, but I'm assuming that this is happening because I have <em>Auto-regeneration</em> enabled, but I'm not sure.</p>\n"}]