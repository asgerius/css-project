[{"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "edited": false, "score": 0, "creation_date": 1507763867, "post_id": 46698940, "comment_id": 80345450, "body": "Remove the <code>puts</code> in the assignments to <code>softdrinks</code>, <code>beers</code>, and <code>drink</code> because the call to <code>puts</code> returns <code>nil</code>."}, {"owner": {"reputation": 29, "user_id": 8761537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ddbad141e40a3f84e86e3856b473a?s=128&d=identicon&r=PG&f=1", "display_name": "capper", "link": "https://stackoverflow.com/users/8761537/capper"}, "reply_to_user": {"reputation": 78771, "user_id": 831878, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1d1a4823c46ad92f357b4bb7e74a64b0?s=128&d=identicon&r=PG", "display_name": "Ray Toal", "link": "https://stackoverflow.com/users/831878/ray-toal"}, "edited": false, "score": 0, "creation_date": 1507764304, "post_id": 46698940, "comment_id": 80345556, "body": "I am an idiot... it works now. Thank you so much. I&#39;ve been browsing around on stackoverflow for a couple hours, but every thread I&#39;ve seen has been to complicated for me to comprehend. But yeah, thanks again"}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 1, "creation_date": 1507768064, "post_id": 46698940, "comment_id": 80346424, "body": "You&#39;re not an idiot you are just learning. In time, things will make sense and these types of error will happen infrequently."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507786123, "post_id": 46698940, "comment_id": 80351108, "body": "When, in SO questions, you report an exception having been raised, please also report the line in which it occurred."}], "answers": [{"tags": [], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "is_accepted": false, "score": 1, "last_activity_date": 1508021753, "last_edit_date": 1508021753, "creation_date": 1507767984, "answer_id": 46699547, "question_id": 46698940, "link": "https://stackoverflow.com/questions/46698940/no-implicit-conversion-of-nil-into-string-ruby/46699547#46699547", "title": "No implicit conversion of nil into String - ruby", "body": "<p><code>puts</code> returns <code>nil</code> so in your code here you are assigning <code>nil</code> to local variables <code>sofdrinks</code>, <code>beers</code> and <code>drink</code>.</p>\n\n<p>Here is what you need to do:</p>\n\n<pre><code>def sumprogram\n      softd = IO.readlines(\"softdrinks.txt\").map! {|s| s.to_i}\n      beers = IO.readlines(\"beers.txt\").map! {|s| s.to_i}\n      drink = IO.readlines(\"drinks.txt\").map! {|s| s.to_i}\n      softdrinks = softd.sum\n      beers = beers.sum\n      drink = drink.sum\n      puts \"\\n\\nBeverages consumed thus far \"\n      puts \" \" + softdrinks + \"\\t - \\t \" + beers + \"\\t - \" + drink + \".\"\nend\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 8761537, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8e0ddbad141e40a3f84e86e3856b473a?s=128&d=identicon&r=PG&f=1", "display_name": "capper", "link": "https://stackoverflow.com/users/8761537/capper"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3073, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1508021753, "creation_date": 1507763743, "last_edit_date": 1507793139, "question_id": 46698940, "link": "https://stackoverflow.com/questions/46698940/no-implicit-conversion-of-nil-into-string-ruby", "title": "No implicit conversion of nil into String - ruby", "body": "<p>I get the error \"No implicit conversion of nil into String.\" and I just can't find the error.</p>\n\n<p>Here are the lines that are messing with me.</p>\n\n<pre><code>def sumprogram\n  softd = IO.readlines(\"softdrinks.txt\").map! {|s| s.to_i}\n  beers = IO.readlines(\"beers.txt\").map! {|s| s.to_i}\n  drink = IO.readlines(\"drinks.txt\").map! {|s| s.to_i}\n  softdrinks = puts softd.sum\n  beers = puts beers.sum\n  drink = puts drink.sum\n  puts \"\\n\\nBeverages consumed thus far \"\n  puts \" \" + softdrinks + \"\\t - \\t \" + beers + \"\\t - \" + drink + \".\"\nend\n</code></pre>\n\n<p>It's the last line, before the end that is the problem. The tables im trying to display are the individuals sums of different arrays.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "multithreading", "rubygems"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507761270, "post_id": 46698492, "comment_id": 80344741, "body": "What do you get? As a note having multiple threads writing to the console at the same time is a good way to get things mixed up. One thread should handle output."}, {"owner": {"reputation": 141, "user_id": 5301781, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xeQLO.jpg?s=128&g=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/5301781/darlyn"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507761373, "post_id": 46698492, "comment_id": 80344773, "body": "Thanks for the answer, I edited again and I need to get the person name 1, person name 2, person name 3 by console. could you please help me ?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507761444, "post_id": 46698492, "comment_id": 80344795, "body": "If you need this in order, threads are going to mess things up. Why are you threading things? You&#39;ll need to collect that output somehow and sort before displaying."}], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 0, "last_activity_date": 1507784717, "creation_date": 1507784717, "answer_id": 46701791, "question_id": 46698492, "link": "https://stackoverflow.com/questions/46698492/how-do-i-run-a-method-inside-of-a-class-with-thread-from-ruby/46701791#46701791", "title": "How do I run a method inside of a class with thread from ruby?", "body": "<p>The issue with this code is that it fires off multiple threads before calling <code>join</code> - in this time, some of the threads could be called in incorrect order, owing to the asynchronous nature of threads. </p>\n\n<p>One option would be to simply <code>join</code> as soon as the thread is invoked. This will in effect pause the iteration until the thread completes, so you know they'll stay in order:</p>\n\n<pre><code>100.times do |number|\n  person= Person.new\n  person.name= number.to_s\n  Thread.new {person.say_hello}.join\nend\n</code></pre>\n\n<p>Note there is really no point in using a thread here, but it will at least show you can <code>join</code> works.</p>\n\n<p>Another option (which also unnecessarily uses threads) is so delay the thread invocation by storing it as a lambda. This is basically the same thing but allows you to split it up into two iterations:</p>\n\n<pre><code>queue_threads= []\n1..100.times do |number|\n  person= Person.new\n  person.name= number.to_s\n  thread_lambda = -&gt; { Thread.new {person.say_hello} }\n  queue_threads.push(thread_lambda)\nend\nqueue_threads.map {|thread_lambda| thread_lambda.call.join}\n</code></pre>\n\n<p>Also note that <code>1..100.times</code> isn't doing what you think it is. It is the same thing as saying <code>100.times</code>, so, for example, if you said <code>99..100.times</code>, the 99 is ignored and it would be 100 iterations and not only 1. If you want to iterate over a range, you could use something like <code>99..100.each do |i|</code>.</p>\n"}], "owner": {"reputation": 141, "user_id": 5301781, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/xeQLO.jpg?s=128&g=1", "display_name": "Darlyn", "link": "https://stackoverflow.com/users/5301781/darlyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 782, "favorite_count": 1, "accepted_answer_id": 46701791, "answer_count": 1, "score": -2, "last_activity_date": 1507784717, "creation_date": 1507760668, "last_edit_date": 1507761216, "question_id": 46698492, "link": "https://stackoverflow.com/questions/46698492/how-do-i-run-a-method-inside-of-a-class-with-thread-from-ruby", "title": "How do I run a method inside of a class with thread from ruby?", "body": "<p><strong>I have a class and attributes there</strong></p>\n\n<pre><code>class Person\n  attr_accessor :name\n  def say_hello\n   puts \"person name #{self.name} \"\n  end\nend\n</code></pre>\n\n<p><strong>Now I want execute the method say_hello but with this thread</strong></p>\n\n<pre><code>queue_thread= []\n1..100.times do |number|\n  person= Person.new\n  person.name= number.to_s\n   thread_to_run=Thread.new {person.say_hello}\n   queue_thread &lt;&lt; thread_to_run\nend\nqueue_thread.map {|thread_current| thread_current.join}\n</code></pre>\n\n<p><strong><em>do you have some idea how do it ? I looked and the proplem is than thread is not recognition the vars by instance of object.</em></strong></p>\n\n<p><strong>the answers correct should be this in console</strong></p>\n\n<pre><code>\"person name 1\"\n\"person name 2\"\n\"person name ...\"\n\"person name etc\"\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "twitter-bootstrap", "heroku"], "comments": [{"owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507760947, "post_id": 46698432, "comment_id": 80344647, "body": "Are you getting any errors in the console?"}, {"owner": {"reputation": 297, "user_id": 4616973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vkEXc.jpg?s=128&g=1", "display_name": "xeitor", "link": "https://stackoverflow.com/users/4616973/xeitor"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507761210, "post_id": 46698432, "comment_id": 80344721, "body": "There you go @Preston"}, {"owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507761419, "post_id": 46698432, "comment_id": 80344789, "body": "Is the file for the <code>carousel</code> function being loaded?"}, {"owner": {"reputation": 297, "user_id": 4616973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vkEXc.jpg?s=128&g=1", "display_name": "xeitor", "link": "https://stackoverflow.com/users/4616973/xeitor"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507761449, "post_id": 46698432, "comment_id": 80344797, "body": "How can I check that? @Preston"}, {"owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507761493, "post_id": 46698432, "comment_id": 80344811, "body": "In the dev tools look at the resources and the file should be in the Scripts folder."}, {"owner": {"reputation": 297, "user_id": 4616973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vkEXc.jpg?s=128&g=1", "display_name": "xeitor", "link": "https://stackoverflow.com/users/4616973/xeitor"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507761769, "post_id": 46698432, "comment_id": 80344884, "body": "Yes, it is being loaded.@Preston"}, {"owner": {"reputation": 297, "user_id": 4616973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vkEXc.jpg?s=128&g=1", "display_name": "xeitor", "link": "https://stackoverflow.com/users/4616973/xeitor"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507761926, "post_id": 46698432, "comment_id": 80344929, "body": "Now that you mentioned, comparing the files that are being loaded locally to the ones being load in production, the ones locally are a lot more. @Preston"}, {"owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507762092, "post_id": 46698432, "comment_id": 80344977, "body": "Are you compressing the .js assets in production?"}, {"owner": {"reputation": 297, "user_id": 4616973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vkEXc.jpg?s=128&g=1", "display_name": "xeitor", "link": "https://stackoverflow.com/users/4616973/xeitor"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507762225, "post_id": 46698432, "comment_id": 80345011, "body": "No, should I? @Preston"}, {"owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507762541, "post_id": 46698432, "comment_id": 80345103, "body": "try <code>config.assets.debug = true</code> in your production.rb file."}, {"owner": {"reputation": 297, "user_id": 4616973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vkEXc.jpg?s=128&g=1", "display_name": "xeitor", "link": "https://stackoverflow.com/users/4616973/xeitor"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507762727, "post_id": 46698432, "comment_id": 80345160, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/156504/discussion-between-ezequiel-and-preston\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "is_accepted": true, "score": 1, "last_activity_date": 1507765032, "creation_date": 1507765032, "answer_id": 46699134, "question_id": 46698432, "link": "https://stackoverflow.com/questions/46698432/javascript-working-locally-but-not-on-production/46699134#46699134", "title": "Javascript working locally but not on production", "body": "<p>Try putting <code>config.assets.debug = true</code> in your production.rb file and see if that fixes it.  I'm guessing there is an error in the middle of your compressed JS file causing the rest of the functions to not be executed.</p>\n"}], "owner": {"reputation": 297, "user_id": 4616973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vkEXc.jpg?s=128&g=1", "display_name": "xeitor", "link": "https://stackoverflow.com/users/4616973/xeitor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 46699134, "answer_count": 1, "score": 0, "last_activity_date": 1507765032, "creation_date": 1507760326, "last_edit_date": 1507761192, "question_id": 46698432, "link": "https://stackoverflow.com/questions/46698432/javascript-working-locally-but-not-on-production", "title": "Javascript working locally but not on production", "body": "<p>I have been trying to solve this issue for weeks, but with no succes so instead of looking for the answear in other peoples questions, I thought I should write my own.</p>\n\n<p>The problem is as follows. A couple of weeks ago I finished one of my rails projects, so I pushed the repo to heroku. Everything seemed to work fine, but then I notice that my navbar toogle was not working and my carousel neither. Locally ther work perfectly.</p>\n\n<p>Currently it is hosted on heroku.</p>\n\n<p>These are the things I have tried.</p>\n\n<ol>\n<li>Assets precompiled and clean</li>\n<li>Installed <code>gem 'rails_12factor'</code></li>\n<li>Reordered app.js as follows </li>\n</ol>\n\n\n\n<pre class=\"lang-js prettyprint-override\"><code>//= require jquery\n//= require jquery_ujs\n//= require jquery-ui\n//= require twitter/bootstrap\n//= require lightbox\n//= require_tree .\n//= require owl.carousel\n</code></pre>\n\n<ol start=\"4\">\n<li><p>I even deployed my app to digital ocean(I thought that heroku was the problem)</p></li>\n<li><p>I tried to use a different bootstrap gem. <code>gem 'bootstrap-sass'</code>but still the same issue.\nSo, basically some of the js is not working the way it should. I even tryed to use a different type of slider named flickity, I downloaded the js and css of flickity, precompile, then push but in heroku seems to be broken.</p></li>\n<li>Followed the nex stackoverflow questions:</li>\n</ol>\n\n<p>Here is my code: </p>\n\n<p>production.rb\n</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>config.serve_static_files = true\nconfig.assets.compile = true\n</code></pre>\n\n<p>Gemfile\n</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>gem \"twitter-bootstrap-rails\"\ngem 'lightbox2-rails'\ngem \"font-awesome-rails\"\ngem 'activeadmin'\ngem 'owlcarousel-rails'\ngem 'rails_12factor', group: :production\ngem \"rmagick\"\ngem \"carrierwave\"\ngem \"mini_magick\"\ngem 'kaminari'\ngem 'jquery-ui-rails'\ngem 'sprockets_better_errors'\ngroup :development do\n  gem 'capistrano',         require: false\n  gem 'capistrano-rvm',     require: false\n  gem 'capistrano-rails',   require: false\n  gem 'capistrano-bundler', require: false\n  gem 'capistrano3-puma',   require: false\nend\ngem 'devise'\ngem 'cancan'\ngem 'draper'\ngem 'pundit'\ngem 'rails'\ngem \"puma\"\ngem 'pg', '~&gt; 0.20.0'\ngem 'jquery-rails'\ngem 'jbuilder', '~&gt; 2.0'\n</code></pre>\n\n<p>aplication.css\n</p>\n\n<pre class=\"lang-css prettyprint-override\"><code> *= require lightbox\n *= require font-awesome\n *= require bootstrap\n *= require_tree .\n *= require owl.carousel\n *= require owl.theme\n</code></pre>\n\n<p>console error</p>\n\n<pre class=\"lang-css prettyprint-override\"><code>Uncaught TypeError: $(...).carousel is not a function(\u2026)\n</code></pre>\n\n<p>This error may explain why the carousel does not work. But I have tryed another ones and the they dont work either. And what about the navbar toogle?</p>\n\n<p>There is this one too </p>\n\n<p><code>Uncaught TypeError: Cannot read property 'bridge' of undefined(\u2026)</code></p>\n\n<p>If you need any more information let me know please.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rvm", "gemfile"], "answers": [{"comments": [{"owner": {"reputation": 27, "user_id": 6109088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14888676ddcd5754b055742cc455d69?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/6109088/sandy"}, "edited": false, "score": 0, "creation_date": 1507761938, "post_id": 46698542, "comment_id": 80344932, "body": "I tried that, it keeps giving me an error.  Sandys-MacBook-Pro:roughhouse-web sandychow$ rvm uninstall 2.2.5 ruby-2.2.5 - #removing rubies/ruby-2.2.5...........................................&zwnj;&#8203;.................- Error running &#39;__rvm_rm_rf /Users/sandychow/.rvm/rubies/ruby-2.2.5&#39;, please read /Users/sandychow/.rvm/log/1507761866_ruby-2.2.5/remove.rubie&zwnj;&#8203;s.log"}, {"owner": {"reputation": 4320, "user_id": 3922099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZHBBc.jpg?s=128&g=1", "display_name": "Dan Kreiger", "link": "https://stackoverflow.com/users/3922099/dan-kreiger"}, "reply_to_user": {"reputation": 27, "user_id": 6109088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14888676ddcd5754b055742cc455d69?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/6109088/sandy"}, "edited": false, "score": 0, "creation_date": 1507762225, "post_id": 46698542, "comment_id": 80345012, "body": "<a href=\"https://github.com/rvm/rvm/issues/2959\" rel=\"nofollow noreferrer\">This thread</a> may be helpful. It looks like you might be able to fix that by running: <code>rvm fix-permissions</code>"}, {"owner": {"reputation": 27, "user_id": 6109088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14888676ddcd5754b055742cc455d69?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/6109088/sandy"}, "edited": false, "score": 0, "creation_date": 1507778665, "post_id": 46698542, "comment_id": 80348912, "body": "It works now. I don&#39;t know what happened to it and I was getting a lot of errors from the 2.2.5 version. But some guy helped me at work and typed rvm remove 2.2.5 and then reinstalled it and nwo it works."}, {"owner": {"reputation": 27, "user_id": 6109088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14888676ddcd5754b055742cc455d69?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/6109088/sandy"}, "edited": false, "score": 0, "creation_date": 1507842317, "post_id": 46698542, "comment_id": 80384187, "body": "yup! Thanks for helping too! I ran into the same issue again when I try to type &quot;bundle update&quot; and could not remove it.   For anyone who needs help cleaning up all RVM traces go to <a href=\"https://rvm.io/support/troubleshooting\" rel=\"nofollow noreferrer\">rvm.io/support/troubleshooting</a> and scroll down to  &quot;How do I completely clean out all traces of RVM from my system, including for system wide installs?&quot;"}], "tags": [], "owner": {"reputation": 4320, "user_id": 3922099, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/ZHBBc.jpg?s=128&g=1", "display_name": "Dan Kreiger", "link": "https://stackoverflow.com/users/3922099/dan-kreiger"}, "is_accepted": false, "score": 0, "last_activity_date": 1507761967, "last_edit_date": 1507761967, "creation_date": 1507761059, "answer_id": 46698542, "question_id": 46698429, "link": "https://stackoverflow.com/questions/46698429/im-getting-an-error-when-installing-ruby-and-rvm-on-the-terminal/46698542#46698542", "title": "I&#39;m getting an error when installing Ruby and RVM on the terminal", "body": "<p>To specify a Ruby version in your Gemfile, simply include the version towards the top:</p>\n\n<p>For Ruby 2.4.2, you can do this:</p>\n\n<pre><code># Gemfile\n\nsource \"https://rubygems.org\"\nruby \"2.4.2\"\n\n# ... your gems on the following lines ...\n</code></pre>\n\n<p>If you want to uninstall a Ruby version, execute:</p>\n\n<pre><code>$ rvm uninstall &lt;version_number&gt;\n</code></pre>\n\n<p>So to uninstall version 2.2.5, execute:</p>\n\n<pre><code>$ rvm uninstall 2.2.5\n</code></pre>\n\n<p>Note: don't include the <code>$</code> sign. That's just there to represent your terminal window.</p>\n\n<p>More information on specifying Ruby versions in your Gemfile can be found at these links:</p>\n\n<ul>\n<li><a href=\"https://devcenter.heroku.com/articles/ruby-versions\" rel=\"nofollow noreferrer\">Heroku - Ruby versions</a></li>\n<li><a href=\"https://coderwall.com/p/mrgqiw/specify-ruby-version-in-gemfile\" rel=\"nofollow noreferrer\">Coderwall</a></li>\n</ul>\n\n<hr>\n\n<p>If you still experience issues, you may need to install or update <code>bundler</code>:</p>\n\n<pre><code>$ gem install bundler\n</code></pre>\n\n<p>or </p>\n\n<pre><code>$ gem update bundler\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "is_accepted": false, "score": 0, "last_activity_date": 1507769627, "creation_date": 1507769627, "answer_id": 46699721, "question_id": 46698429, "link": "https://stackoverflow.com/questions/46698429/im-getting-an-error-when-installing-ruby-and-rvm-on-the-terminal/46699721#46699721", "title": "I&#39;m getting an error when installing Ruby and RVM on the terminal", "body": "<p>As your Gemfile specified ruby 2.2.5 and your rvm ruby version is 2.4.2, you can simply update the project gems bundle to fix the issue by doing</p>\n\n<pre><code>   bundle update\n</code></pre>\n\n<p>This will update all the gems in your Gemfile file to get compatible with your current ruby version. </p>\n"}], "owner": {"reputation": 27, "user_id": 6109088, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d14888676ddcd5754b055742cc455d69?s=128&d=identicon&r=PG&f=1", "display_name": "Sandy", "link": "https://stackoverflow.com/users/6109088/sandy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 656, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507769627, "creation_date": 1507760306, "question_id": 46698429, "link": "https://stackoverflow.com/questions/46698429/im-getting-an-error-when-installing-ruby-and-rvm-on-the-terminal", "title": "I&#39;m getting an error when installing Ruby and RVM on the terminal", "body": "<p>How do I uninstall the old ruby versions and how do can I update to GemFile to 2.4.2?</p>\n\n<p>Sandys-MacBook-Pro:roughhouse-web sandychow$ bundle install\nYour Ruby version is 2.4.2, but your Gemfile specified 2.2.5\nSandys-MacBook-Pro:roughhouse-web sandychow$ rvm list</p>\n\n<p>rvm rubies</p>\n\n<p>ruby-2.1.5 [ missing bin/ruby ]\n   ruby-2.2.5 [ missing bin/ruby ]\n * ruby-2.4.1 [ x86_64 ]\n=> ruby-2.4.2 [ x86_64 ]</p>\n"}, {"tags": ["ruby", "rspec", "module"], "comments": [{"owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "edited": false, "score": 0, "creation_date": 1507808583, "post_id": 46698109, "comment_id": 80363744, "body": "Where is <code>open_file</code>defined ?"}, {"owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "reply_to_user": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "edited": false, "score": 0, "creation_date": 1507818746, "post_id": 46698109, "comment_id": 80370918, "body": "@BernardK, open_file is defined in a class in another file within the common project. I will update the question. thanks"}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "edited": false, "score": 0, "creation_date": 1507838869, "post_id": 46715751, "comment_id": 80382375, "body": "I ended up using <code>extend Common</code> to get the <code>open_file</code> method to work, like you described. The code now runs successfully. Thank you for the help. I may also need to use <code>include Common</code> though, due to using module instance methods within a def method in <i>my_class.rb</i>. Or i could change the instance methods to <code>def self.my_method</code> correct?"}, {"owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "reply_to_user": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "edited": false, "score": 0, "creation_date": 1507839439, "post_id": 46715751, "comment_id": 80382677, "body": "@AustinL No, if you change the instance methods to <code>def self.my_method</code>, it becomes a singleton (class) method, and will no longer be available as instance method. The best is <code>include</code> followed by <code>extend</code>."}, {"owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "edited": false, "score": 0, "creation_date": 1507839724, "post_id": 46715751, "comment_id": 80382813, "body": "Sounds good, I will go ahead and use both <code>include Common</code> and <code>extend Common</code>. Thank you"}], "tags": [], "owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "is_accepted": true, "score": 1, "last_activity_date": 1507837491, "last_edit_date": 1507837491, "creation_date": 1507829957, "answer_id": 46715751, "question_id": 46698109, "link": "https://stackoverflow.com/questions/46698109/ruby-how-to-include-outside-module-in-rspec-test/46715751#46715751", "title": "Ruby: How to include outside module in Rspec test", "body": "<p>I should have seen the problem immediately, but didn't. You see the difference between :</p>\n\n<pre><code>lib/my_class.rb:9:in `&lt;class:MyClass&gt;': undefined method `open_file' for MyClass:Class (NoMethodError)\n</code></pre>\n\n<p>when <code>open_file</code> appears in the body of MyClass, and :</p>\n\n<pre><code>lib/my_class.rb:16:in `m': undefined method `open_file' for #&lt;MyClass:0x007fbb0d10cc30&gt; (NoMethodError)\n</code></pre>\n\n<p>if I put it in a <code>def</code> :</p>\n\n<pre><code>def m\n    @error_file = open_file('error_file.txt')\n</code></pre>\n\n<p>In the first case, you are in the body of <code>MyClass</code>, where <code>open_file</code> is not defined. In the second case, I had removed the <code>include Common</code>.</p>\n\n<p>To do my research, I've defined the minimum necessary to reproduce the error.\nFile <code>.../lib/file_utils.rb</code>, same as yours.</p>\n\n<p>File <code>.../lib/common.rb</code> :</p>\n\n<pre><code>require_relative 'file_utils'\n\nmodule Common\n    puts \"Common instance methods before include : #{instance_methods(true).sort}\"\n    include FileUtils\n    puts \"Common instance methods after  include : #{instance_methods(true).sort}\"\n\n    puts \"Common class methods before extend : #{singleton_methods(true).sort}\"\n    extend FileUtils\n    puts \"Common class methods after  extend : #{singleton_methods(true).sort}\"\nend\n</code></pre>\n\n<p>File <code>.../lib/my_class.rb</code> :</p>\n\n<pre><code>require_relative 'common'\n\nclass MyClass\n#    puts \"MyClass methods before include : #{instance_methods(true).sort}\"\n    include Common\n#    puts \"MyClass methods after  include : #{instance_methods(true).sort}\"\n\n    puts \"self=#{self}\"\n    puts \"MyClass class methods before extend : #{singleton_methods(true).sort}\"\n    extend Common\n    puts \"MyClass class methods after  extend : #{singleton_methods(true).sort}\"\n    @error_file = open_file('error_file.txt')\n    puts \"in MyClass error_file=#{@error_file}\"\n\n    def m\n        @error_file = open_file('error_file.txt')\n        puts \"in m error_file=#{@error_file}\"\n    end\nend\n\nMyClass.new.m\n</code></pre>\n\n<p>Execution :</p>\n\n<pre><code>$ ruby -w lib/my_class.rb \nCommon instance methods before include : []\nCommon instance methods after  include : [:open_file]\nCommon class methods before extend : []\nCommon class methods after  extend : [:open_file]\nself=MyClass\nMyClass class methods before extend : []\nMyClass class methods after  extend : [:open_file]\nin MyClass error_file=#&lt;File:0x007ff2621fcdc0&gt;\nin m error_file=#&lt;File:0x007ff2621fc938&gt;\n</code></pre>\n\n<p><strong>Explanation</strong></p>\n\n<p>Due to the way you use <code>@error_file = open_file('error_file.txt')</code>, you are in the body of <code>MyClass</code>, which is executed only when the interpreter reads the class definition. When a method like <code>open_file</code> is used without a receiver, it is sent to the implicit receiver <code>self</code>, which is <code>MyClass</code>. But as it is defined, <code>open_file</code> is not a class method, it is an instance method.</p>\n\n<p>If you need a class method (more exactly a singleton method), you have to define it as</p>\n\n<pre><code>def self.open_file(file_name)\n</code></pre>\n\n<p>or use <code>extend &lt;module&gt;</code>.</p>\n"}], "owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 0, "accepted_answer_id": 46715751, "answer_count": 1, "score": 0, "last_activity_date": 1507837491, "creation_date": 1507758651, "last_edit_date": 1507818903, "question_id": 46698109, "link": "https://stackoverflow.com/questions/46698109/ruby-how-to-include-outside-module-in-rspec-test", "title": "Ruby: How to include outside module in Rspec test", "body": "<p>I have 2 projects, a \"common code\" project that i have made into a big module that pulls in other modules like so:</p>\n\n<p>Here is the folder structure of \"my-common-project\":</p>\n\n<ul>\n<li><strong>my-common-project</strong>\n\n<ul>\n<li><strong>common</strong>\n\n<ul>\n<li>file_utils.rb</li>\n<li>rest-client.rb</li>\n<li>other ruby files with modules...</li>\n</ul></li>\n<li>common.rb</li>\n<li>Gemfile</li>\n<li>etc...</li>\n</ul></li>\n</ul>\n\n<h1>common.rb</h1>\n\n<pre><code>require 'bundler'\nBundler.require\nrequire_relative './common/file-utils.rb'\nrequire_relative './common/rest_client.rb'\n...\n\nmodule Common\n  include FileUtils\n  include RestClient\n  # include other modules here...\n</code></pre>\n\n<h1>file_utils.rb</h1>\n\n<pre><code>module Common\n  module FileUtils\n\n    def open_file(file_name)\n      dir = File.expand_path('') &lt;&lt; '/lib'\n      FileUtils.mkdir_p(dir) unless File.directory?(dir)\n      File.open(File.expand_path('') &lt;&lt; \"/lib/#{file_name}\", 'w')\n    end\n  end\nend\n</code></pre>\n\n<p>I also have an Rspec project where i am doing a test:</p>\n\n<ul>\n<li><strong>my-rspec-project</strong>\n\n<ul>\n<li><strong>spec</strong>\n\n<ul>\n<li>my_test_spec.rb</li>\n<li>spec_helper.rb</li>\n<li><strong>lib</strong>\n\n<ul>\n<li>my_class.rb</li>\n</ul></li>\n</ul></li>\n<li>.rspec</li>\n<li>Gemfile</li>\n<li>etc...</li>\n</ul></li>\n</ul>\n\n<h1>spec_helper.rb</h1>\n\n<pre><code>require 'bundler'\nrequire 'csv'\nrequire_relative './lib/fp_relationship_api'\nrequire_relative './../../../../../RubyProjects/mksta-common/common'\n\nBundler.require\n\nRSpec.configure do |config|\n  ...\n  config.include Common\n  ...\nend\n</code></pre>\n\n<h1>my_class.rb</h1>\n\n<pre><code>require \"#{File.expand_path('') &lt;&lt; '/spec_helper'}\"\n\nclass MyClass\n\ninclude Common\n\n  @error_file = open_file('error_file.txt')\n  ...\nend\n</code></pre>\n\n<p>I get the error:</p>\n\n<blockquote>\n  <p>undefined method `open_file' for MyClass:Class (NoMethodError)</p>\n</blockquote>\n\n<p>Can anyone see what went wrong?</p>\n"}, {"tags": ["ruby", "cygwin", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 8143160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I4Fi3.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8143160/michael"}, "edited": false, "score": 0, "creation_date": 1510361702, "post_id": 46703057, "comment_id": 81417154, "body": "I decided to use Windows Subsystem for Linux to get Jekyll working. That said, I will use Cygwin to provide a &quot;Unixy&quot; way of running my Windows commands and use WSL when Cygwin cannot get the job done."}], "tags": [], "owner": {"reputation": 664, "user_id": 285039, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8814af34687e80a17894e482e72b0111?s=128&d=identicon&r=PG", "display_name": "DA.", "link": "https://stackoverflow.com/users/285039/da"}, "is_accepted": false, "score": 0, "last_activity_date": 1507790600, "creation_date": 1507790600, "answer_id": 46703057, "question_id": 46698060, "link": "https://stackoverflow.com/questions/46698060/error-installing-jekyll-in-cygwin/46703057#46703057", "title": "Error Installing Jekyll in Cygwin", "body": "<p>I had the same issue when <a href=\"https://andydunkel.net/windows/software/2017/06/05/jekyll_windows_bash.html\" rel=\"nofollow noreferrer\">installing Jekyll and Ruby in the Windows 10 Bash Linux Subsystem</a>. It turned out, that the development package from Ruby was missing. I had to install it first:</p>\n\n<pre><code>sudo apt-get install ruby2.4-dev\n</code></pre>\n\n<p>In my case. Try to install the dev package in Cygwin package manager, in your case its version 2.3.</p>\n\n<p>Andy</p>\n"}, {"tags": [], "owner": {"reputation": 1065, "user_id": 7360, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/85c7304fa55147d89583c0d1c38e6328?s=128&d=identicon&r=PG", "display_name": "David", "link": "https://stackoverflow.com/users/7360/david"}, "is_accepted": false, "score": 0, "last_activity_date": 1539787123, "creation_date": 1539787123, "answer_id": 52857514, "question_id": 46698060, "link": "https://stackoverflow.com/questions/46698060/error-installing-jekyll-in-cygwin/52857514#52857514", "title": "Error Installing Jekyll in Cygwin", "body": "<p>For the record, I encountered the same problem Michael did, and installing the <code>ruby-devel</code> package (using the Cygwin Setup installer) solved my problem. A missing <code>*-devel</code> Cygwin package is a common cause of errors about missing header files.</p>\n"}], "owner": {"reputation": 31, "user_id": 8143160, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/I4Fi3.jpg?s=128&g=1", "display_name": "Michael", "link": "https://stackoverflow.com/users/8143160/michael"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 418, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1539787123, "creation_date": 1507758395, "question_id": 46698060, "link": "https://stackoverflow.com/questions/46698060/error-installing-jekyll-in-cygwin", "title": "Error Installing Jekyll in Cygwin", "body": "<p>So I attempted to install Jekyll on Windows through Cygwin and I encountered an error when I tried to install Jekyll through Cygwin. Here is the output.</p>\n\n<pre><code>Michael@X556UAK: ~$ gem install jekyll\nBuilding native extensions.  This could take a while...\nERROR:  Error installing jekyll:\n    ERROR: Failed to build gem native extension.\n\ncurrent directory: /c/Users/Michael/.gem/ruby/2.3.0/gems/ffi-1.9.18/ext/ffi_c\n/usr/bin/ruby.exe -r ./siteconf20171011-7692-lgoixq.rb extconf.rb\nmkmf.rb can't find header files for ruby at /usr/share/ruby/include/ruby.h\n\nextconf failed, exit code 1\n\nGem files will remain installed in /c/Users/Michael/.gem/ruby/2.3.0/gems/ffi-   1.9.18 for inspection.\nResults logged to /c/Users/Michael/.gem/ruby/2.3.0/extensions/x86_64-cygwin/2.3.0/ffi-1.9.18/gem_make.out\n</code></pre>\n\n<p>I conducted some research online and I wasn't able to find a solution. I tried running Cygwin as an administrator and I still got that error message. </p>\n\n<p>What can I do to fix this issue?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundler"], "comments": [{"owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507761326, "post_id": 46697842, "comment_id": 80344758, "body": "Did you look at this <a href=\"https://stackoverflow.com/questions/7434263/can-i-force-a-gems-dependencies-in-gemfile\" title=\"can i force a gems dependencies in gemfile\">stackoverflow.com/questions/7434263/&hellip;</a> ?"}, {"owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507761790, "post_id": 46697842, "comment_id": 80344889, "body": "@Preston no I didn&#39;t come across that one. I&#39;ll study it now and see if it helps, then report back here."}, {"owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507763512, "post_id": 46697842, "comment_id": 80345366, "body": "@Preston thanks for giving me more info! Unfortunately, I just think that answer is what I did here in &quot;try #2&quot; above. &quot;You&#39;ll need to explicitly specify the B gem in your Gemfile to use a git repository or another version. &quot;"}, {"owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507763652, "post_id": 46697842, "comment_id": 80345402, "body": "@Preston it does make me think though. The parent gem of hydra-derivatives, hydra-works, lists a pessimistic version of ~&gt; 3.0, so that means anything up to 4.0. Weird, since it says it&#39;s locked at 3.2.1."}, {"owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507764219, "post_id": 46697842, "comment_id": 80345532, "body": "Try forking the hydra-works gem and setting the dependencies yourself"}, {"owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "reply_to_user": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "edited": false, "score": 0, "creation_date": 1507764317, "post_id": 46697842, "comment_id": 80345560, "body": "@Preson that&#39;s what I was thinking of doing, but look at what they have it set at already: <a href=\"https://github.com/samvera/hydra-works/blob/master/hydra-works.gemspec#L23\" rel=\"nofollow noreferrer\">github.com/samvera/hydra-works/blob/master/&hellip;</a> It should be able to go up to &lt; 4.0."}], "answers": [{"comments": [{"owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "edited": false, "score": 0, "creation_date": 1507846420, "post_id": 46714963, "comment_id": 80386047, "body": "Got switched to a different priority. Will return to this and give it the attention it deserves. Currently writing some tests to see why the hell the bug popped up instead of just assuming upgrading the gem is the solution!"}, {"owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "edited": false, "score": 0, "creation_date": 1508185392, "post_id": 46714963, "comment_id": 80502822, "body": "after some experimenting and fact checking, I can confirm that the latest version of hydra-derivatives 3.3.2 ends up depending on faraday (~&gt; 0.12.1), however another gem depends on faraday (~&gt; 0.9.0). So this is my problem! I am going to experiment with forking iiif-presentation (~&gt; 0.1.0) and bumping gemspec for faraday up to faraday (~&gt; 0.12.1). Sorry for the waste of time, I wish I knew more going into this!"}, {"owner": {"reputation": 11332, "user_id": 52499, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/e13c0896a2408caf559934466737f716?s=128&d=identicon&r=PG", "display_name": "x-yuri", "link": "https://stackoverflow.com/users/52499/x-yuri"}, "edited": false, "score": 0, "creation_date": 1553562727, "post_id": 46714963, "comment_id": 97421690, "body": "Temporarily adding indirect dependency (<code>json</code>) and running <code>bundle update json</code> worked for me."}], "tags": [], "owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "is_accepted": false, "score": 1, "last_activity_date": 1507826887, "creation_date": 1507826887, "answer_id": 46714963, "question_id": 46697842, "link": "https://stackoverflow.com/questions/46697842/how-does-one-upgrade-a-specific-ruby-gem-to-a-specific-or-the-latest-version/46714963#46714963", "title": "How does one upgrade a specific ruby gem to a specific (or the latest) version?", "body": "<p>Remove the hydra-works gem from your Gemfile.\nEither remove the gem and its dependencies by hand from the installed gem location or if you have the application in its own Ruby environment using <code>rbenv</code> or <code>rvm</code>  run <code>bundle clean --force</code>.<br>\nBeware <code>bundle clean --force</code> will remove all of the gems in the Ruby version other than those specified in your Gemfile.  If you have other applications that use the same version of Ruby you'll have to reinstall the gems for that application if they are different than what you are using in this application.</p>\n\n<p>Add this to your Gemfile</p>\n\n<pre><code>gem 'hydra-derivatives', '~&gt; 3.3.2'\ngem 'hydra-works'\n</code></pre>\n\n<p>And run <code>bundle install</code></p>\n\n<p>You should see the correct dependency version now in your Gemfile.lock</p>\n"}], "owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 12177, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1507826887, "creation_date": 1507757254, "last_edit_date": 1507766734, "question_id": 46697842, "link": "https://stackoverflow.com/questions/46697842/how-does-one-upgrade-a-specific-ruby-gem-to-a-specific-or-the-latest-version", "title": "How does one upgrade a specific ruby gem to a specific (or the latest) version?", "body": "<p>I am trying to upgrade a gem (<code>hydra-derivatives</code>) to version <a href=\"https://rubygems.org/gems/hydra-derivatives\" rel=\"nofollow noreferrer\">3.3.2</a> to see if it solves a bug we are having.</p>\n\n<p><strong>hydra-derivatives</strong> is not a <strong>Gemfile</strong> gem; it's bundled as a dependency of another gem, called <code>hydra-works</code>.</p>\n\n<h1>What I've Tried</h1>\n\n<ol>\n<li><a href=\"http://bundler.io/blog/2017/03/28/bundler-1-14-so-many-fixes.html\" rel=\"nofollow noreferrer\"><code>bundle update --conservative\nhydra-derivatives</code></a> but that only upgraded hydra-derivatives to\n3.2.2 (&amp; we want 3.3.2) and its dependency <code>mini_magick</code> from 4.5.1 to 4.8.0</li>\n<li><p>adding <code>gem 'hydra-derivatives', '~&gt; 3.3.2'</code> but that gave me:</p>\n\n<pre><code>You have requested:\n  hydra-derivatives ~&gt; 3.3.2\n\nThe bundle currently has hydra-derivatives locked at 3.2.1.\nTry running `bundle update hydra-derivatives`\n\nIf you are updating multiple gems in your Gemfile at once,\ntry passing them all to `bundle update`\n</code></pre></li>\n<li><p>I don't want to run <code>bundle update hydra-derivatives</code> because I don't want it to update a bunch of unnecessary gems and cause problems, hence why I read about <code>--conservative</code></p>\n\n<p>a. I ran this anyway to test it, and it upgraded target gem to only 3.2.2 and 15 gems in total!</p></li>\n</ol>\n"}, {"tags": ["arrays", "ruby", "max", "time-complexity", "min"], "comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1507757139, "post_id": 46697730, "comment_id": 80343299, "body": "What&#39;s being done with the <code>etc...</code>?  That may be relevant to why the person who wrote this didn&#39;t just say <code>min_price = stock_prices.min</code>.  For instance, maybe it&#39;s a sequential process and the logic is premised on the lowest stock price seen so far."}, {"owner": {"reputation": 322, "user_id": 8756461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb80c5a935e43c5deea97cd4f4b1248?s=128&d=identicon&r=PG&f=1", "display_name": "George.", "link": "https://stackoverflow.com/users/8756461/george"}, "reply_to_user": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1507757510, "post_id": 46697730, "comment_id": 80343468, "body": "yes it is a sequential process and is based on the lowest stock price when comparing the initial min price and current price. But I am confused about what the time complexity of this code snippet, specifically when implementing .min and .max within .each method. I thought by using .min, it requires another iteration within .each, which leads me to believe the time complexity takes longer than O(n)?"}, {"owner": {"reputation": 1920, "user_id": 2993768, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/rF0mH.png?s=128&g=1", "display_name": "stujo", "link": "https://stackoverflow.com/users/2993768/stujo"}, "edited": false, "score": 0, "creation_date": 1507761127, "post_id": 46697730, "comment_id": 80344706, "body": "I believe the code here is O(n), that is it is linear based on the length of stock prices"}], "answers": [{"comments": [{"owner": {"reputation": 322, "user_id": 8756461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb80c5a935e43c5deea97cd4f4b1248?s=128&d=identicon&r=PG&f=1", "display_name": "George.", "link": "https://stackoverflow.com/users/8756461/george"}, "edited": false, "score": 0, "creation_date": 1507758754, "post_id": 46697920, "comment_id": 80343976, "body": "Ok, thanks for the answer. Generally speaking, if the array was larger, say of length 1000, the min/max method would take linear time since it has iterate through each element correct? I&#39;m asking because ill have to be more careful when liberally using .min or max within another iterator if I wanted to optimize runtime"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1507759468, "post_id": 46697920, "comment_id": 80344208, "body": "<code>min</code> is linear in the size of the array <i>it is iterating over</i>. BUT! In this case, the size of the array that <code>min</code> is iterating over is bounded by a constant (2 in the original example, 1000 in your hypothetical). <i>Whenever</i> a function is bounded by a constant, it is in O(1). (Just plug it into the definition of Big-Oh and you&#39;ll see.) Bottom line: always be careful to rigorously define what &quot;n&quot; is, when talking about time complexity as a function of n."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 322, "user_id": 8756461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb80c5a935e43c5deea97cd4f4b1248?s=128&d=identicon&r=PG&f=1", "display_name": "George.", "link": "https://stackoverflow.com/users/8756461/george"}, "edited": false, "score": 0, "creation_date": 1507759485, "post_id": 46697920, "comment_id": 80344213, "body": "@GeorgeV. No, because it&#39;s not iterating through the original array.  The <code>each</code> block creates temporary arrays containing only 2 elements, so the amount of work per iteration has nothing to do with the original array length."}, {"owner": {"reputation": 322, "user_id": 8756461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb80c5a935e43c5deea97cd4f4b1248?s=128&d=identicon&r=PG&f=1", "display_name": "George.", "link": "https://stackoverflow.com/users/8756461/george"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1507763455, "post_id": 46697920, "comment_id": 80345355, "body": "@J&#246;rgWMittag Ok. For clarification, if I performed this operation:"}, {"owner": {"reputation": 322, "user_id": 8756461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb80c5a935e43c5deea97cd4f4b1248?s=128&d=identicon&r=PG&f=1", "display_name": "George.", "link": "https://stackoverflow.com/users/8756461/george"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1507764076, "post_id": 46697920, "comment_id": 80345500, "body": "@J&#246;rgWMittag Whoops, didn&#39;t know pressing ENTER would post comment... Ok. For clarification, if I performed .max on arr in this example :           arr = Array.new(100) { rand(1000) } ;         arr.max   ...Invoking the <code>.max</code> method to find the max value in <code>arr</code> would be constant time because the length of array, specified as 100, is constant, correct?  Assuming the way <code>.max</code> method works is it looks at every element in the array to find and return the max value, in this case it is still considered constant time because n is known."}, {"owner": {"reputation": 322, "user_id": 8756461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb80c5a935e43c5deea97cd4f4b1248?s=128&d=identicon&r=PG&f=1", "display_name": "George.", "link": "https://stackoverflow.com/users/8756461/george"}, "edited": false, "score": 1, "creation_date": 1507766937, "post_id": 46697920, "comment_id": 80346154, "body": "@pjs I now understand your answer. <code>n</code> is independent from the .min and .max operation conducted within the each method, and since <code>.min</code> and <code>.max</code> is invoked on an array that is always bounded by a constant of 2 elements, each operation is constant. Even if <code>.min</code> and <code>.max</code> is invoked on an array containing 10000 elements, the operation is still constant because the size of the array that <code>min</code> is called on is known."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 322, "user_id": 8756461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb80c5a935e43c5deea97cd4f4b1248?s=128&d=identicon&r=PG&f=1", "display_name": "George.", "link": "https://stackoverflow.com/users/8756461/george"}, "edited": false, "score": 0, "creation_date": 1507767373, "post_id": 46697920, "comment_id": 80346259, "body": "@GeorgeV. Correct, but it also illustrates that constant time operations can have honking big constants. But if you do a honking big constant time operation for each of the of the elements in an array of size N you are doing a honking big constant amount of work N times, which is still O(N).  Remember, at the heart of it big-O notation tells you how a problem <b><i>scales</i></b> with N, not how much time it takes for a fixed value of N."}], "tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": true, "score": 1, "last_activity_date": 1507757672, "creation_date": 1507757672, "answer_id": 46697920, "question_id": 46697730, "link": "https://stackoverflow.com/questions/46697730/how-does-rubys-min-and-max-method-work-and-what-is-the-time-complexity-when/46697920#46697920", "title": "How does ruby&#39;s .min and .max method work, and what is the time complexity when using those methods to find min or max value in an array?", "body": "<p>The <code>.min</code> and <code>.max</code> operations in the <code>each</code> are being applied to arrays with only 2 elements, so each is an O(1) operation. Changing n, the number of elements in <code>stock_prices</code>, won't change the amount of time to find either the <code>.min</code> or <code>.max</code> in each iteration, they are independent of n.  Consequently, the entire block is O(n).</p>\n"}], "owner": {"reputation": 322, "user_id": 8756461, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbb80c5a935e43c5deea97cd4f4b1248?s=128&d=identicon&r=PG&f=1", "display_name": "George.", "link": "https://stackoverflow.com/users/8756461/george"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1750, "favorite_count": 0, "accepted_answer_id": 46697920, "answer_count": 1, "score": 0, "last_activity_date": 1507757672, "creation_date": 1507756729, "last_edit_date": 1507757168, "question_id": 46697730, "link": "https://stackoverflow.com/questions/46697730/how-does-rubys-min-and-max-method-work-and-what-is-the-time-complexity-when", "title": "How does ruby&#39;s .min and .max method work, and what is the time complexity when using those methods to find min or max value in an array?", "body": "<p>Context: </p>\n\n<p>I was looking at an algorithms problem to determine max_stock_profit when given an array of stock prices. I was trying to determine the time complexity of said method, and encountered a <code>.min</code> used on an array within the <code>each</code> method. This led me to asking the question titled in this post.</p>\n\n<p>Generally speaking, when simply looking at the <code>.min</code> or <code>.max</code> method on an array of length 1,000,000 for example, wouldn't running <code>.min</code> or <code>.max</code> on the array require linear time O(n) to determine a min or max value, where n is the length of the array?..</p>\n\n<p>If so, then based on the example code shown below, by running <code>.min</code> or <code>.max</code> method within an <code>each</code> method, wouldn't the time complexity be O(n^2) since it needs to run another iteration within the <code>each</code> method to determine min value? I think the code snippet should be running at O(n) time but my lack of understanding of how <code>.min</code> and <code>.max</code> works is what's causing great confusion.</p>\n\n<p>Is it because since <code>.min</code> is invoked on an array containing only 2 values, it is okay assume that line of code operates in constant time O(1)? Any help to clear my misunderstanding of what's going on would be appreciated. Thanks.</p>\n\n<p>Example code snippet: </p>\n\n<pre><code>stock_prices = [5, 7, 2 ,4, 9, 1, 8]\nmin_price = stock_prices[0]\nmax_profit = 0\n\nstock_prices.each do |current_price|\n    min_price = [min_price, current_price].min\n    potential_profit = current_price - min_price  \n    max_profit = [max_profit, potential_profit].max\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507755061, "post_id": 46697281, "comment_id": 80342403, "body": "&quot;how would I shovel a new object into the array hash[:one]&quot; - huh? like you do above. <code>hash[:one] &lt;&lt; &quot;uno&quot;</code>. After that, <code>hash[:one]</code> <i>will</i> have <code>&quot;uno&quot;</code>. Or were you asking something else?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507755234, "post_id": 46697281, "comment_id": 80342471, "body": "<a href=\"https://www.ruby-forum.com/topic/4409379\" rel=\"nofollow noreferrer\">ruby-forum.com/topic/4409379</a>"}, {"owner": {"reputation": 1068, "user_id": 2712925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AC3j5.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/2712925/scott"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507755690, "post_id": 46697281, "comment_id": 80342694, "body": "@SergioTulentsev I&#39;m asking why the array at hash[:one] is the same array at hash[:two]"}, {"owner": {"reputation": 881859, "user_id": 100297, "user_type": "moderator", "profile_image": "https://www.gravatar.com/avatar/24780fb6df85a943c7aea0402c843737?s=128&d=identicon&r=PG", "display_name": "Martijn Pieters", "link": "https://stackoverflow.com/users/100297/martijn-pieters"}, "reply_to_user": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "edited": false, "score": 1, "creation_date": 1511784165, "post_id": 46697281, "comment_id": 81976667, "body": "@marmeladze: <code>ruby-koans</code> is a meta tag, please don&#39;t create such tags, we burninated the tag for a reason, see <a href=\"//meta.stackoverflow.com/q/275935\">Burninate Project Euler</a>"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1507755521, "post_id": 46697409, "comment_id": 80342611, "body": "Important to note that when doing <code>hash[:one] &lt;&lt; &quot;uno&quot;</code>, you are not adding new entries in the hash (and, therefore, the default-value-on-missing-key is what is always returned)"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507755778, "post_id": 46697409, "comment_id": 80342734, "body": "@SergioTulentsev good point"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 2, "last_activity_date": 1507755769, "last_edit_date": 1507755769, "creation_date": 1507755348, "answer_id": 46697409, "question_id": 46697281, "link": "https://stackoverflow.com/questions/46697281/why-does-shoveling-a-string-into-a-hash-cause-this-result/46697409#46697409", "title": "Why does shoveling a string into a hash cause this result?", "body": "<p>You have created a new <code>Hash</code> with an <code>Array</code> as an accumulator when the key is not present so </p>\n\n<pre><code>hash = Hash.new([]) \nhash[:one] &lt;&lt; \"uno\" \nhash[:one] == [\"uno\"] #=&gt; true\n</code></pre>\n\n<p>but </p>\n\n<pre><code>hash[:two] &lt;&lt; \"dos\" \n(hash[:one] == hash[:two]) &amp;&amp; (hash[:two] == [\"uno\",\"dos\"]) #=&gt; true\nhash[:three] == [\"uno\",\"dos\"] #=&gt; true\n</code></pre>\n\n<p>because <code>[\"uno\",\"dos\"]</code> is the original array created with the <code>Hash</code> and <code>hash[:non_existant_key]</code> points to it. </p>\n\n<p><strong>Note:</strong> no keys have actually been added to <code>hash</code> in this case. It would be similar to </p>\n\n<pre><code> a = []\n hash = {}\n hash.fetch(:one,a) &lt;&lt; 'uno'\n hash.fetch(:two,a) &lt;&lt; 'dos'\n hash.fetch(:three, a) \n #=&gt; ['uno','dos']\n hash\n #=&gt; {}\n</code></pre>\n\n<p>To solve this you can use this syntax as mentioned in your second test</p>\n\n<pre><code>hash = Hash.new {|h,k| h[k] = [] } \n</code></pre>\n\n<p>This means fro every new key instantiate a new <code>Array</code> as its value rather than reusing the same <code>Array</code> over and over again</p>\n\n<p>This is the problem with the <code>Hash.new(obj)</code> syntax when <code>obj</code> is a mutable object </p>\n"}, {"comments": [{"owner": {"reputation": 1068, "user_id": 2712925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AC3j5.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/2712925/scott"}, "edited": false, "score": 0, "creation_date": 1507756399, "post_id": 46697473, "comment_id": 80343009, "body": "Thanks, I completely spaced about the keys not even being assigned anything. I tried that and printed the value and it worked like I expected. Very clear answer."}], "tags": [], "owner": {"reputation": 78607, "user_id": 319403, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e92a9af9e53cc8e5af575c4b18b34c21?s=128&d=identicon&r=PG", "display_name": "cHao", "link": "https://stackoverflow.com/users/319403/chao"}, "is_accepted": true, "score": 4, "last_activity_date": 1507755572, "creation_date": 1507755572, "answer_id": 46697473, "question_id": 46697281, "link": "https://stackoverflow.com/questions/46697281/why-does-shoveling-a-string-into-a-hash-cause-this-result/46697473#46697473", "title": "Why does shoveling a string into a hash cause this result?", "body": "<p>A hint as to the reason is in the name of the tests.</p>\n\n<p><code>test_default_value_is_the_same_object</code> is there to show you that when you ask for <code>hash[:some_value_that_doesnt_exist_yet]</code>, by default, you get back the default value you specified -- which is the <em>same object</em> every time. By modifying that object, you modify it for every nonexistent key. Modifying <code>hash[:one]</code> also modifies <code>hash[:two]</code>.</p>\n\n<p><code>test_default_value_with_block</code> shows the construction of a Hash using a block, which will be used to provide a new value for each key. When you do it like that, the values for <code>hash[:one]</code> and <code>hash[:two]</code> are distinct.</p>\n"}], "owner": {"reputation": 1068, "user_id": 2712925, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/AC3j5.jpg?s=128&g=1", "display_name": "Scott", "link": "https://stackoverflow.com/users/2712925/scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "closed_date": 1538539862, "accepted_answer_id": 46697473, "answer_count": 2, "score": 2, "last_activity_date": 1511783973, "creation_date": 1507754880, "last_edit_date": 1511783973, "question_id": 46697281, "link": "https://stackoverflow.com/questions/46697281/why-does-shoveling-a-string-into-a-hash-cause-this-result", "closed_reason": "Duplicate", "title": "Why does shoveling a string into a hash cause this result?", "body": "<p>I'm working through the Ruby Koans in order to get a better grasp on Ruby and TDD. I got to Line 93 in the code in <code>about_hashes.rb</code> and this confuses me how it would be shoveled into the default constructor instead of the hash value. Just out of curiosity I tried using the same thing with a string as the parameter of the constructor and it produced a similar result.</p>\n\n<p><strong>Now my question is why, whatever key I use, the same object is retrieved and how would I shovel a new object into the array at a specific key in a hash in the method</strong> <code>test_default_value_is_the_same_object</code><strong>?</strong></p>\n\n<pre><code>def test_default_value_is_the_same_object\n    hash = Hash.new([])\n\n    hash[:one] &lt;&lt; \"uno\"\n    hash[:two] &lt;&lt; \"dos\"\n\n    assert_equal [\"uno\", \"dos\"], hash[:one] #why not [\"uno\"]?\n    assert_equal [\"uno\", \"dos\"], hash[:two] #why not [\"dos\"]?\n    assert_equal [\"uno\", \"dos\"], hash[:three] #why not []?\n\n    assert_equal true, hash[:one].object_id == hash[:two].object_id\n  end\n\ndef test_default_value_with_block\n    hash = Hash.new {|hash, key| hash[key] = [] }\n\n    hash[:one] &lt;&lt; \"uno\"\n    hash[:two] &lt;&lt; \"dos\"\n\n    assert_equal [\"uno\"], hash[:one]\n    assert_equal [\"dos\"], hash[:two]\n    assert_equal [], hash[:three]\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507828933, "post_id": 46697267, "comment_id": 80377181, "body": "The attributes are constants (e.g, <code>FOO</code>) whose values are not given (and <code>FOO | BAR</code> only makes sense for certain values of those constants). Do youactually mean <code>FOO</code> to be a literal, such as <code>:FOO</code> or <code>&quot;FOO&quot;</code>? If so, please edit and consider <code>[Format.new(10, 12, [:FOO]), Format.new(13, 16, [:FOO, :BAR]), Format.new(17, 20, [:FOO])]</code> as the desired return value. I assume <code>[:FOO]</code> in <code>[Format.new(10, 12, [:FOO])</code> means the range <code>10..12</code> is wholly within the range <code>10..20</code> and not wholly within <code>12..16</code>. Is that correct?"}, {"owner": {"reputation": 315, "user_id": 5367513, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7bc3967ca71ebcd3dbb20b5b7552a904?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Syn&#225;\u010dek", "link": "https://stackoverflow.com/users/5367513/jan-syn%c3%a1%c4%8dek"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507835253, "post_id": 46697267, "comment_id": 80380594, "body": "I edited the question and added a working code example. I hope that makes things clearer. Thank you!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507839691, "post_id": 46697267, "comment_id": 80382797, "body": "Very clear now, except I don&#39;t think you answered the last question of my earlier comment (whether it is <code>[:FOO, :BAR]</code> or <code>FOO | BAR</code>). I could perhaps answer it by studying your code, but an explanation (by way of an edit) would be helpful. I&#39;ll see if I can come up with something."}, {"owner": {"reputation": 315, "user_id": 5367513, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7bc3967ca71ebcd3dbb20b5b7552a904?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Syn&#225;\u010dek", "link": "https://stackoverflow.com/users/5367513/jan-syn%c3%a1%c4%8dek"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1507882146, "post_id": 46697267, "comment_id": 80396820, "body": "Edited again. I changed FOO and BAR to something more meaningful and added an illustration to clarify the whole thing. If the two ranges were <code>10..12</code> and <code>12..16</code>, they would overlap on the 12th item."}], "answers": [{"tags": [], "owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "is_accepted": false, "score": 1, "last_activity_date": 1507940551, "creation_date": 1507940551, "answer_id": 46739583, "question_id": 46697267, "link": "https://stackoverflow.com/questions/46697267/how-to-merge-overlapping-structures-with-ranges-in-them/46739583#46739583", "title": "How to merge overlapping structures with ranges in them", "body": "<p>One possible solution (I'm not an expert Rubyist) :</p>\n\n<pre><code># file .../split_range/lib/t.rb\n\nclass SplitRange\n        # Answer a hash.\n        # There will be two or three of the following keys :\n        # :ar1left  : part of range1 outside and left of range2\n        # :br2left  : part of range2 outside and left of range1\n        # :ccommon  : part common to range1 and range2\n        # :dr1right : part of range1 outside and right of range2\n        # :er2right : part of range2 outside and right of range1\n        # Note : letters a b c d e have been added to help writing test expectations\n        #        in the same order as the result of merge.\n        # The value is an array of numbers from ranges.\n    def partition(p_range1, p_range2)\n#        puts \"r1=#{p_range1}  r2=#{p_range2}\"\n        group1 = p_range1.group_by{ | e | e &lt; p_range2.first ? :ar1left : p_range2.cover?(e) ? :ccommon : :dr1right }\n        group2 = p_range2.group_by{ | e | e &lt; p_range1.first ? :br2left : p_range1.cover?(e) ? :ccommon : :er2right }\n        group1.merge(group2)\n    end\nend # class SplitRange\n\nclass Format &lt; Struct.new(:from, :to, :attributes)\n    def self.merge(f1, f2)\n        formats = []\n        groups = SplitRange.new.partition(f1.from..f1.to, f2.from..f2.to)\n        #puts groups\n        groups.sort_by{ | k, v | k}.each do | key, value |\n            case key\n            when :ar1left\n                formats &lt;&lt; Format.new(value.first, value.last, f1.attributes)\n            when :br2left\n                formats &lt;&lt; Format.new(value.first, value.last, f2.attributes)\n            when :ccommon\n                formats &lt;&lt; Format.new(value.first, value.last, f1.attributes | f2.attributes)\n            when :dr1right\n                formats &lt;&lt; Format.new(value.first, value.last, f1.attributes)\n            when :er2right\n                formats &lt;&lt; Format.new(value.first, value.last, f2.attributes)\n            end\n        end\n\n        formats\n    end\nend # class Format\n\nif __FILE__ == $0\nthen\n    f1 = Format.new(1, 9, [:foo])\n    f2 = Format.new(4, 7, [:bar])\n    puts Format.merge(f1, f2)\nend\n</code></pre>\n\n<p>Execution :</p>\n\n<pre><code>$ ruby -w lib/t.rb \n#&lt;struct Format from=1, to=3, attributes=[:foo]&gt;\n#&lt;struct Format from=4, to=7, attributes=[:foo, :bar]&gt;\n#&lt;struct Format from=8, to=9, attributes=[:foo]&gt;\n</code></pre>\n\n<p>I have written two RSpec tests, one to test <code>SplitRange</code> :</p>\n\n<pre><code># file .../split_range/spec/t_split_spec.rb\n\nrequire 't'\n\nRSpec.describe SplitRange do\n    describe '#partition' do\n        let(:rleft)      {  1..5 }\n        let(:rcenter)    { 10..20 }\n        let(:rright)     { 24..26 }\n        let(:rovleft)    { 8..12 }\n        let(:rinside)    { 12..16 }\n        let(:rovright)   { 18..24 }\n        let(:rleft_a)    { rleft.to_a }\n        let(:rcenter_a)  { rcenter.to_a }\n        let(:rright_a)   { rright.to_a }\n        let(:rovleft_a)  { rovleft.to_a }\n        let(:rinside_a)  { rinside.to_a }\n        let(:rovright_a) { rovright.to_a }\n\n        def helperCommon(a1, a2)\n            # answers elements common to both arrays\n            a1.select { | e | a2.include?(e) } \n        end\n\n        context 'non overlapping' do\n            it 'values of r1 smaller than r2 go to :ar1left' do\n                groups = SplitRange.new.partition(rleft, rcenter)\n                expect(groups[:ar1left]).to eq(rleft_a)\n            end\n\n            it 'values of r2 smaller than r1 go to :br2left' do\n                groups = SplitRange.new.partition(rcenter, rleft)\n                expect(groups[:br2left]).to eq(rleft_a)\n            end\n\n            it 'values of r1 greater than r2 go to :dr1right' do\n                groups = SplitRange.new.partition(rright, rcenter)\n                expect(groups[:dr1right]).to eq(rright_a)\n            end\n\n            it 'values of r2 greater than r1 go to :er2right' do\n                groups = SplitRange.new.partition(rcenter, rright)\n                expect(groups[:er2right]).to eq(rright_a)\n            end\n        end # context 'non overlapping'\n\n        context 'overlapping r2 from left to right' do\n            it 'values of r2 smaller than r1 go to :br2left' do\n                groups = SplitRange.new.partition(rcenter, rovleft)\n                expect(groups[:br2left]).to eq(rovleft_a - rcenter_a)\n            end\n\n            it 'values of r2 (left) common to r1 go to :ccommon' do\n                groups = SplitRange.new.partition(rcenter, rovleft)\n                expect(groups[:ccommon]).to eq(helperCommon(rcenter_a, rovleft_a))\n            end\n\n            it 'values of r2 (inside) common to r1 go to :ccommon' do\n                groups = SplitRange.new.partition(rcenter, rinside)\n                expect(groups[:ccommon]).to eq(helperCommon(rcenter_a, rinside_a))\n            end\n\n            it 'values of r2 (right) common to r1 go to :ccommon' do\n                groups = SplitRange.new.partition(rcenter, rovright)\n                expect(groups[:ccommon]).to eq(helperCommon(rcenter_a, rovright_a))\n            end\n\n            it 'values of r2 greater than r1 go to :er2right' do\n                groups = SplitRange.new.partition(rcenter, rovright)\n                expect(groups[:er2right]).to eq(rovright_a - rcenter_a)\n            end\n        end # context 'overlapping r2 from left to right'\n\n        context 'overlapping r1 from left to right' do\n            it 'values of r1 smaller than r2 go to :ar1left' do\n                groups = SplitRange.new.partition(rovleft, rcenter)\n                expect(groups[:ar1left]).to eq(rovleft_a - rcenter_a)\n            end\n\n            it 'values of r1 (left) common to r2 go to :ccommon' do\n                groups = SplitRange.new.partition(rovleft, rcenter)\n                expect(groups[:ccommon]).to eq(helperCommon(rovleft_a, rcenter_a))\n            end\n\n            it 'values of r1 (inside) common to r2 go to :ccommon' do\n                groups = SplitRange.new.partition(rinside, rcenter)\n                expect(groups[:ccommon]).to eq(helperCommon(rinside_a, rcenter_a))\n            end\n\n            it 'values of r1 (right) common to r2 go to :ccommon' do\n                groups = SplitRange.new.partition(rovright, rcenter)\n                expect(groups[:ccommon]).to eq(helperCommon(rovright_a, rcenter_a))\n            end\n\n            it 'values of r1 greater than r2 go to :dr1right' do\n                groups = SplitRange.new.partition(rovright, rcenter)\n                expect(groups[:dr1right]).to eq(rovright_a - rcenter_a)\n            end\n        end # context 'overlapping r1 from left to right'\n    end # describe '#partition'\nend # describe SplitRange\n</code></pre>\n\n<p>and one to test <code>merge</code> : </p>\n\n<pre><code># file .../split_range/spec/t_merge_spec.rb\n\nrequire 't'\n\nRSpec.describe Format do\n    describe '.merge' do\n=begin\n        let(:rleft)      {  1..5 }\n        let(:rcenter)    { 10..20 }\n        let(:rright)     { 24..26 }\n        let(:rovleft)    { 8..12 }\n        let(:rinside)    { 12..16 }\n        let(:rovright)   { 18..24 }\n=end\n        context 'moving r1 over r2' do\n            it 'non overlapping r1 on the left of r2' do\n                f1 = Format.new(1, 5, [:foo])\n                f2 = Format.new(10, 20, [:bar])\n                expect(Format.merge(f1, f2)).to eq([Format.new(1, 5, [:foo]), Format.new(10, 20, [:bar])])\n            end\n\n            it 'overlapping r1 on the left of r2' do\n                f1 = Format.new(8, 12, [:foo])\n                f2 = Format.new(10, 20, [:bar])\n                expect(Format.merge(f1, f2)).to \\\n                    eq([Format.new(8, 9, [:foo]), Format.new(10, 12, [:foo, :bar]), Format.new(13, 20, [:bar])])\n            end\n\n            it 'overlapping r1 inside r2' do\n                f1 = Format.new(12, 16, [:foo])\n                f2 = Format.new(10, 20, [:bar])\n                expect(Format.merge(f1, f2)).to \\\n                    eq([Format.new(10, 11, [:bar]), Format.new(12, 16, [:foo, :bar]), Format.new(17, 20, [:bar])])\n            end\n\n            it 'overlapping r1 on the right of r2' do\n                f1 = Format.new(18, 24, [:foo])\n                f2 = Format.new(10, 20, [:bar])\n                expect(Format.merge(f1, f2)).to \\\n                    eq([Format.new(10, 17, [:bar]), Format.new(18, 20, [:foo, :bar]), Format.new(21, 24, [:foo])])\n            end\n\n            it 'non overlapping r1 on the right of r2' do\n                f1 = Format.new(24, 26, [:foo])\n                f2 = Format.new(10, 20, [:bar])\n                expect(Format.merge(f1, f2)).to eq([Format.new(10, 20, [:bar]), Format.new(24, 26, [:foo])])\n            end\n        end # context 'moving r1 over r2'\n\n        context 'moving r2 under r1' do\n            it 'non overlapping r2 on the left of r1' do\n                f1 = Format.new(10, 20, [:foo])\n                f2 = Format.new(1, 5, [:bar])\n                expect(Format.merge(f1, f2)).to eq([Format.new(1, 5, [:bar]), Format.new(10, 20, [:foo])])\n            end\n\n            it 'overlapping r2 on the left of r1' do\n                f1 = Format.new(10, 20, [:foo])\n                f2 = Format.new(8, 12, [:bar])\n                expect(Format.merge(f1, f2)).to \\\n                    eq([Format.new(8, 9, [:bar]), Format.new(10, 12, [:foo, :bar]), Format.new(13, 20, [:foo])])\n            end\n\n            it 'overlapping r2 inside r1' do\n                f1 = Format.new(10, 20, [:foo])\n                f2 = Format.new(12, 16, [:bar])\n                expect(Format.merge(f1, f2)).to \\\n                    eq([Format.new(10, 11, [:foo]), Format.new(12, 16, [:foo, :bar]), Format.new(17, 20, [:foo])])\n            end\n\n            it 'overlapping r2 on the right of r1' do\n                f1 = Format.new(10, 20, [:foo])\n                f2 = Format.new(18, 24, [:bar])\n                expect(Format.merge(f1, f2)).to \\\n                    eq([Format.new(10, 17, [:foo]), Format.new(18, 20, [:foo, :bar]), Format.new(21, 24, [:bar])])\n            end\n\n            it 'non overlapping r2 on the right of r1' do\n                f1 = Format.new(10, 20, [:foo])\n                f2 = Format.new(24, 26, [:bar])\n                expect(Format.merge(f1, f2)).to eq([Format.new(10, 20, [:foo]), Format.new(24, 26, [:bar])])\n            end\n        end # context 'moving r1 over r2'\n    end # describe '.merge'\nend # describe Format\n</code></pre>\n\n<p>Execution :</p>\n\n<pre><code>$ rspec -fd\n\nFormat\n  .merge\n    moving r1 over r2\n      non overlapping r1 on the left of r2\n      overlapping r1 on the left of r2\n      overlapping r1 inside r2\n      overlapping r1 on the right of r2\n      non overlapping r1 on the right of r2\n    moving r2 under r1\n      non overlapping r2 on the left of r1\n      overlapping r2 on the left of r1\n      overlapping r2 inside r1\n      overlapping r2 on the right of r1\n      non overlapping r2 on the right of r1\n\nSplitRange\n  #partition\n    non overlapping\n      values of r1 smaller than r2 go to :ar1left\n      values of r2 smaller than r1 go to :br2left\n      values of r1 greater than r2 go to :dr1right\n      values of r2 greater than r1 go to :er2right\n    overlapping r2 from left to right\n      values of r2 smaller than r1 go to :br2left\n      values of r2 (left) common to r1 go to :ccommon\n      values of r2 (inside) common to r1 go to :ccommon\n      values of r2 (right) common to r1 go to :ccommon\n      values of r2 greater than r1 go to :er2right\n    overlapping r1 from left to right\n      values of r1 smaller than r2 go to :ar1left\n      values of r1 (left) common to r2 go to :ccommon\n      values of r1 (inside) common to r2 go to :ccommon\n      values of r1 (right) common to r2 go to :ccommon\n      values of r1 greater than r2 go to :dr1right\n\nFinished in 0.0093 seconds (files took 0.11066 seconds to load)\n24 examples, 0 failures\n</code></pre>\n\n<p>All tests are green (Ruby 2.4, RSpec 3.6).</p>\n"}, {"comments": [{"owner": {"reputation": 315, "user_id": 5367513, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7bc3967ca71ebcd3dbb20b5b7552a904?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Syn&#225;\u010dek", "link": "https://stackoverflow.com/users/5367513/jan-syn%c3%a1%c4%8dek"}, "edited": false, "score": 0, "creation_date": 1508142740, "post_id": 46752014, "comment_id": 80477292, "body": "Impressive piece of code, I&#39;m still trying to wrap my brain around it, thank you! I forgot to add that I&#39;m quite new to Ruby, so this answer will probably take me a while to figure out."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1508045270, "creation_date": 1508045270, "answer_id": 46752014, "question_id": 46697267, "link": "https://stackoverflow.com/questions/46697267/how-to-merge-overlapping-structures-with-ranges-in-them/46752014#46752014", "title": "How to merge overlapping structures with ranges in them", "body": "<p><strong>Structure of solution</strong></p>\n\n<p>I have defined</p>\n\n<pre><code>Format = Struct.new(:range, :attributes)\n</code></pre>\n\n<p>and instances of the class <code>Format</code> such as</p>\n\n<pre><code>Format.new(10..20, :BAR)\n</code></pre>\n\n<p>Here <code>@attribute</code> equals a symbol but it could be any Ruby object.</p>\n\n<p>I will then construct and return an array of instances of <code>Format</code> such as </p>\n\n<pre><code>Format.new(12..15, [:FOO, :BAR])\n</code></pre>\n\n<p>This is interpreted as meaning that the original instances of <code>Format</code> for which <code>@attributes</code> equal <code>:FOO</code> and <code>:BAR</code> have values of <code>@range</code> that cover the interval <code>12..15</code>. Moreover, these instances of <code>Format</code> (for which the value of <code>@attributes</code> is an array) have the non-overlapping ranges asked for by the question. The order of the elements in the arrays (the values of <code>@attributes</code>) is not specified.</p>\n\n<p>The values (arrays) of <code>@attributes</code> can then be manipulate as desired. For example, <code>[3,5]</code> might be converted to <code>3|5</code>.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def merge_formats(*formats)\n  fmod = formats.map { |e| Format.new(e.range, [e.attributes]) }.\n                 sort_by { |e| e.range.begin }\n  a = []\n  while fmod.any?\n    b = []\n    while fmod.any? &amp;&amp; (b.empty? || (fmod.first.range.begin == b.first.range.begin))\n      b &lt;&lt; fmod.shift\n    end\n    next_end = b.min_by { |f| f.range.end }.range.end\n    next_end = [next_end, fmod.first.range.begin-1].min if fmod.any?\n    a &lt;&lt; Format.new(b.first.range.begin..next_end, b.map { |f| f.attributes.first })\n    while b.any?\n      f = b.shift\n      fmod.unshift(Format.new(next_end+1..f.range.end, f.attributes)) if\n        f.range.end &gt; next_end\n    end\n  end\n  a\nend\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>Format = Struct.new(:range, :attributes)\n\nf1 = Format.new(10..20, :FOO)\nf2 = Format.new(12..16, :BAR)\nmerge_formats(f1, f2)\n  #=&gt; [#&lt;struct Format range=10..11, attributes=[:FOO]&gt;,\n  #    #&lt;struct Format range=12..16, attributes=[:FOO, :BAR]&gt;,\n  #    #&lt;struct Format range=17..20, attributes=[:FOO]&gt;]\n\nf1 = Format.new(12..16, :BAR)\nf2 = Format.new(10..11, :FOO)\nmerge_formats(f1, f2)\n  #=&gt; [#&lt;struct Format range=10..11, attributes=[:FOO]&gt;,\n  #    #&lt;struct Format range=12..16, attributes=[:BAR]&gt;]\n\nf1 = Format.new(12..16, :BAR)\nf2 = Format.new(10..20, :FOO)\nf3 = Format.new(14..24, :BAZ)\nf4 = Format.new(15..18, :QUX)\nmerge_formats(f1, f2, f3, f4)\n  #=&gt; [#&lt;struct Format range=10..11, attributes=[:FOO]&gt;,\n  #    #&lt;struct Format range=12..13, attributes=[:FOO, :BAR]&gt;,\n  #    #&lt;struct Format range=14..14, attributes=[:BAR, :FOO, :BAZ]&gt;,\n  #    #&lt;struct Format range=15..16, attributes=[:BAZ, :FOO, :BAR, :QUX]&gt;,\n  #    #&lt;struct Format range=17..18, attributes=[:QUX, :FOO, :BAZ]&gt;,\n  #    #&lt;struct Format range=19..20, attributes=[:BAZ, :FOO]&gt;,\n  #    #&lt;struct Format range=21..24, attributes=[:BAZ]&gt;]\n</code></pre>\n"}], "owner": {"reputation": 315, "user_id": 5367513, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/7bc3967ca71ebcd3dbb20b5b7552a904?s=128&d=identicon&r=PG&f=1", "display_name": "Jan Syn&#225;\u010dek", "link": "https://stackoverflow.com/users/5367513/jan-syn%c3%a1%c4%8dek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 141, "favorite_count": 0, "accepted_answer_id": 46752014, "answer_count": 2, "score": 0, "last_activity_date": 1508045270, "creation_date": 1507754784, "last_edit_date": 1507882679, "question_id": 46697267, "link": "https://stackoverflow.com/questions/46697267/how-to-merge-overlapping-structures-with-ranges-in-them", "title": "How to merge overlapping structures with ranges in them", "body": "<p>I have a class <code>Format</code>, which is a data structure carrying information about text formatting:</p>\n\n<pre><code>Format = Struct.new(:from, :to, :attributes)\n</code></pre>\n\n<p>(I don't care whether it is <code>Format.new(from, to, attrs)</code> or <code>Format.new(range, attrs)</code>.)</p>\n\n<p>Among <code>Format</code> instances <code>f1</code> and <code>f2</code>, I want to define an operation <code>merge_formats(f1, f2)</code>, which merges overlapping formats, for example when syntax highlighting and selection should be applied to the same region of text. Similarly for cases where the ranges are disjunct, overlap only on one side, etc. It is described by the following diagrams:</p>\n\n<pre><code>INPUT:\n          +---+---+---+---+---+---+---+---+---+\nformat1 = | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | , attributes1\n          +---+---+---+---+---+---+---+---+---+\n                      +---+---+---+---+\nformat2 =             | 4 | 5 | 6 | 7 | , attributes2\n                      +---+---+---+---+\n\nRESULT:\n          +---+---+---+\npart1 =   | 1 | 2 | 3 |, attributes1 \n          +---+---+---+\n                      +---+---+---+---+\npart2 =               | 4 | 5 | 6 | 7 | , attributes1 + attributes2\n                      +---+---+---+---+\n                                      +---+---+\npart3 =                               | 8 | 9 | , attributes1\n                                      +---+---+\n</code></pre>\n\n<p>Particular application should look like this:</p>\n\n<pre><code>merge_formats(Format.new(1, 9, attributes1), Format.new(4, 7, attributes2))\n# =&gt; [Format.new(1, 3, attributes1), Format.new(4, 7, attributes1 + attributes2), Format.new(8, 9, attributes1)]\n</code></pre>\n\n<p><code>attribute1</code> and <code>attribute2</code> are anything that can be added, in this case flags (integers, hence the <code>|</code> operator). If they were <code>:attribute1</code> and <code>:attribute2</code>, then as the addition\" operation would be <code>Array.push</code>, and the result could be:</p>\n\n<pre><code># =&gt; [Format.new(1, 3, [:attribute1]), Format.new(4, 7, [:attribute1, :attribute2]), Format.new(8, 9, [:attribute1])]\n</code></pre>\n\n<p>Is there a nice Ruby way how to solve this?</p>\n\n<hr>\n\n<p>I came across <a href=\"https://stackoverflow.com/questions/28030931\">this</a>, in which one of the answers cleverly uses <code>flat_map</code> to detect the edges, but that's not usable in my case, as the other information is lost. I came up with this, and I don't like it:</p>\n\n<pre><code>Format = Struct.new(:from, :to, :attributes) do\n  def self.compare(f1, f2)\n    if f2.from &lt; f1.from &amp;&amp; f2.to &gt; f1.to\n      :includes\n    elsif f2.from &gt;= f1.from &amp;&amp; f2.to &lt;= f1.to\n      :inside\n    elsif f2.from &lt; f1.from &amp;&amp; (f1.from..f1.to).include?(f2.to)\n      :left\n    elsif (f1.from..f1.to).include?(f2.from) &amp;&amp; f2.to &gt; f1.to\n      :right\n    else\n      :outside\n    end\n  end\n\n  def self.merge(f1, f2)\n    case compare(f1, f2)\n    when :includes\n      [Format.new(f2.from, f1.from-1, f2.attributes),\n       Format.new(f2.from, f1.to, f1.attributes | f2.attributes),\n       Format.new(f1.to+1, f2.to, f2.attributes),\n      ]\n    when :inside\n      if f2.from == f1.from &amp;&amp; f2.to == f1.to\n        [Format.new(f2.from, f2.to, f1.attributes | f2.attributes)]\n      else\n        [Format.new(f1.from, f2.from-1, f1.attributes),\n         Format.new(f2.from, f2.to, f1.attributes | f2.attributes),\n         Format.new(f2.to+1, f1.to, f1.attributes),\n        ]\n      end\n    when :left\n      r = [Format.new(f2.from, f1.from-1, f2.attributes),\n           Format.new(f1.from, f2.to, f1.attributes | f2.attributes)]\n      r &lt;&lt; Format.new(f2.to+1, f1.to, f1.attributes) if f2.to != f1.to\n      r\n    when :right\n      r = []\n      r &lt;&lt; Format.new(f1.from, f2.from-1, f1.attributes) if f2.from != f1.from\n      r &lt;&lt; Format.new(f2.from, f1.to, f1.attributes | f2.attributes)\n      r &lt;&lt; Format.new(f1.to+1, f2.to, f2.attributes)\n      r\n    else\n      if f2.from &lt; f1.from\n        [f2, f1]\n      else\n        [f1, f2]\n      end\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "algorithm", "multidimensional-array"], "comments": [{"owner": {"reputation": 3286, "user_id": 1851041, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736f0189c216f8d9ece902e96fd37f6a?s=128&d=identicon&r=PG", "display_name": "BernardK", "link": "https://stackoverflow.com/users/1851041/bernardk"}, "edited": false, "score": 0, "creation_date": 1507808127, "post_id": 46696795, "comment_id": 80363469, "body": "In Ruby you should avoid C or Java style <code>for</code> loops, use iterators, which free you from caring about array limits. I have added a more Rubyesque solution."}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 8761422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6868311dd2938be641c1168a55a4381?s=128&d=identicon&r=PG&f=1", "display_name": "masato.takaha", "link": "https://stackoverflow.com/users/8761422/masato-takaha"}, "edited": false, "score": 0, "creation_date": 1507755690, "post_id": 46697043, "comment_id": 80342693, "body": "Thanks for the clarification on ranges in Ruby!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507884151, "post_id": 46697043, "comment_id": 80397803, "body": "Your explanation is correct, but the proposed solution doesn&#39;t work: <code>(3..0).reverse_each.to_a</code> is empty, too. That&#39;s because <code>reverse_each</code> builds a temporary array based on <code>each</code> (which is already empty) and then iterates that (empty) array in reverse order."}, {"owner": {"reputation": 81, "user_id": 796394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e96d562e1a97e508d355ab6d008f284c?s=128&d=identicon&r=PG", "display_name": "hxiong", "link": "https://stackoverflow.com/users/796394/hxiong"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1507929958, "post_id": 46697043, "comment_id": 80423359, "body": "@Stefan That&#39;s why I didn&#39;t propose <code>(3..0).reverse_each</code>. I proposed <code>(0..3).reverse_each</code>, with <code>l = 0</code> and <code>r = 3</code>, in this case. :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507978614, "post_id": 46697043, "comment_id": 80433483, "body": "@HengXiong your right, I&#39;ve overlooked that you changed <code>r..l</code> to <code>l..r</code>."}], "tags": [], "owner": {"reputation": 81, "user_id": 796394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e96d562e1a97e508d355ab6d008f284c?s=128&d=identicon&r=PG", "display_name": "hxiong", "link": "https://stackoverflow.com/users/796394/hxiong"}, "is_accepted": true, "score": 2, "last_activity_date": 1507753922, "creation_date": 1507753922, "answer_id": 46697043, "question_id": 46696795, "link": "https://stackoverflow.com/questions/46696795/printing-matrix-in-spiral-order/46697043#46697043", "title": "Printing Matrix in Spiral Order", "body": "<p>The bugs in your code are at <code>r..l</code> and <code>b..t</code>, where <code>r</code> is greater than <code>l</code>, and <code>b</code> is greater than <code>t</code>. When you define a range from a higher integer to a lower integer, the range is actually empty. For example:</p>\n\n<pre><code>irb&gt; (0..3).to_a\n =&gt; [0, 1, 2, 3]\nirb&gt; (3..0).to_a\n =&gt; []\n</code></pre>\n\n<p>To fix your backwards iteration code, you can change the <code>for i in r..l</code> loop to <code>(l..r).reverse_each do |i| ... end</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 478, "user_id": 5810912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/il66y.jpg?s=128&g=1", "display_name": "imerso", "link": "https://stackoverflow.com/users/5810912/imerso"}, "edited": false, "score": 0, "creation_date": 1507754140, "post_id": 46697051, "comment_id": 80341917, "body": "I am not sure who answered first here, as I edited the code because of a mis-alignment. Oh well..."}, {"owner": {"reputation": 13, "user_id": 8761422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6868311dd2938be641c1168a55a4381?s=128&d=identicon&r=PG&f=1", "display_name": "masato.takaha", "link": "https://stackoverflow.com/users/8761422/masato-takaha"}, "edited": false, "score": 0, "creation_date": 1507755871, "post_id": 46697051, "comment_id": 80342777, "body": "Thanks for the information on downto! @heng used the reverse_each method, but I was just wondering if you can also implement downto in the .each do loops? If so, would you mind sharing an example?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507884483, "post_id": 46697051, "comment_id": 80397981, "body": "<code>for i in r.downto(l)</code> \u2013 the combination for <code>for</code> and <code>downto</code> looks odd to me. Since <code>downto</code> already provides iteration, you should simply use <code>r.downto(l) do |i|</code>."}], "tags": [], "owner": {"reputation": 478, "user_id": 5810912, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/il66y.jpg?s=128&g=1", "display_name": "imerso", "link": "https://stackoverflow.com/users/5810912/imerso"}, "is_accepted": false, "score": 0, "last_activity_date": 1507884199, "last_edit_date": 1507884199, "creation_date": 1507753984, "answer_id": 46697051, "question_id": 46696795, "link": "https://stackoverflow.com/questions/46696795/printing-matrix-in-spiral-order/46697051#46697051", "title": "Printing Matrix in Spiral Order", "body": "<p>You should use <code>downto</code> in the decreasing loops.</p>\n\n<p>Here is your code fixed:</p>\n\n<pre><code>def print_circ(arr, row, col)\n  t = 0\n  b = row - 1\n  l = 0\n  r = col - 1\n  dir = 0\n\n  while t &lt;= b and l &lt;= r do\n\n    if dir == 0\n      for i in l..r\n        puts arr[t][i]\n      end\n      t += 1\n    end\n\n    if dir == 1\n      for i in t..b\n        puts arr[i][r]\n      end\n      r -= 1\n    end\n\n    if dir == 2\n      for i in r.downto(l)\n        puts arr[b][i]\n      end\n      b -= 1\n    end\n\n    if dir == 3\n      for i in b.downto(t)\n        puts arr[i][l]\n      end\n      l += 1\n    end\n\n    dir = (dir+1)%4\n\n  end\n\nend\n\nprint_circ([[2,4,6,8],[5,9,12,16],[2,11,5,9],[3,2,1,8]], 4, 4)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 0, "last_activity_date": 1507885034, "last_edit_date": 1507885034, "creation_date": 1507762275, "answer_id": 46698730, "question_id": 46696795, "link": "https://stackoverflow.com/questions/46696795/printing-matrix-in-spiral-order/46698730#46698730", "title": "Printing Matrix in Spiral Order", "body": "<p>The problem with your code was already solved. I just wanted to provide a more idiomatic version of your code:</p>\n\n<pre><code>def each_spiral_value(arr)\n  t = 0\n  b = arr.size - 1\n  l = 0\n  r = arr.first.size - 1\n  dir = [:right, :down, :left, :up].cycle\n\n  while t &lt;= b &amp;&amp; l &lt;= r\n    case dir.next\n    when :right\n      l.upto(r) { |i| yield arr[t][i] }\n      t += 1\n    when :down\n      t.upto(b) { |i| yield arr[i][r] }\n      r -= 1\n    when :left\n      r.downto(l) { |i| yield arr[b][i] }\n      b -= 1\n    when :up\n      b.downto(t) { |i| yield arr[i][l] }\n      l += 1\n    end\n  end\nend\n\neach_spiral_value(a) { |v| puts v }\n</code></pre>\n\n<p>Changes:</p>\n\n<ul>\n<li>instead of being passed explicitly, <code>b</code> and <code>r</code> are calculated from the array's <a href=\"http://ruby-doc.org/core-2.4.2/Array.html#method-i-size\" rel=\"nofollow noreferrer\"><code>size</code></a> and the size of its <a href=\"http://ruby-doc.org/core-2.4.2/Array.html#method-i-first\" rel=\"nofollow noreferrer\"><code>first</code></a> element respectively</li>\n<li>the directional values were changed from numbers to symbols</li>\n<li><code>dir</code> uses <a href=\"http://ruby-doc.org/core-2.4.2/Array.html#method-i-cycle\" rel=\"nofollow noreferrer\"><code>cycle</code></a> to create an enumerator that is cycled by calling <a href=\"http://ruby-doc.org/core-2.4.2/Enumerator.html#method-i-next\" rel=\"nofollow noreferrer\"><code>next</code></a></li>\n<li>a <code>case</code> statement is used instead of multiple <code>if</code> statements</li>\n<li><code>for</code> loops were replaced by <a href=\"http://ruby-doc.org/core-2.4.2/Integer.html#method-i-upto\" rel=\"nofollow noreferrer\"><code>upto</code></a> and <a href=\"http://ruby-doc.org/core-2.4.2/Integer.html#method-i-downto\" rel=\"nofollow noreferrer\"><code>downto</code></a> loops</li>\n<li>printing the values was extracted from the method, the values are yielded instead (the caller decides what to do with it)</li>\n</ul>\n\n<p>Instead of calling <code>next</code> manually, you could also pass a block to <code>cycle</code>. This would effectively replace your <code>while</code> loop:</p>\n\n<pre><code>[:right, :down, :left, :up].cycle do |dir|\n  break if t &gt; b || l &gt; r\n  case dir\n    # ...\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 8761422, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f6868311dd2938be641c1168a55a4381?s=128&d=identicon&r=PG&f=1", "display_name": "masato.takaha", "link": "https://stackoverflow.com/users/8761422/masato-takaha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 1, "accepted_answer_id": 46697043, "answer_count": 3, "score": 0, "last_activity_date": 1507885034, "creation_date": 1507752938, "last_edit_date": 1507753217, "question_id": 46696795, "link": "https://stackoverflow.com/questions/46696795/printing-matrix-in-spiral-order", "title": "Printing Matrix in Spiral Order", "body": "<p>I am trying to print an array in spiral order (clockwise), but my code isn't printing things correctly.</p>\n\n<p>My array is:</p>\n\n<pre><code>a = [\n      [2,  4,  6,  8],\n      [5,  9, 12, 16],\n      [2, 11,  5,  9],\n      [3,  2,  1,  8]\n    ]\n</code></pre>\n\n<p>My solution:</p>\n\n<pre><code>def print_circ(arr, row, col)\n  t = 0\n  b = row - 1\n  l = 0\n  r = col - 1\n  dir = 0\n  while t &lt;= b and l &lt;= r do\n    if dir == 0\n      for i in l..r\n        puts arr[t][i]\n      end\n      t += 1\n    end\n    if dir == 1\n      for i in t..b\n        puts arr[i][r]\n      end\n      r -= 1\n    end\n    if dir == 2\n      for i in r..l\n        puts arr[b][i]\n      end\n      b -= 1\n    end\n    if dir == 3\n      for i in b..t\n        puts arr[i][l]\n      end\n      l += 1\n    end\n    dir = (dir+1)%4\n  end\nend\n</code></pre>\n\n<p>When I run this, it doesn't print out the bottom or the left edges:</p>\n\n<pre><code>2\n4\n6\n8\n16\n9\n8\n9\n12\n5\n11\n</code></pre>\n\n<p>Can anyone please help me understand what is wrong with my code?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "rubymine"], "comments": [{"owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "edited": false, "score": 0, "creation_date": 1507753017, "post_id": 46696756, "comment_id": 80341384, "body": "Hmm, could down-voter please comment on why this is a bad question? I did quite a bit of searching first to make sure this was the appropriate stack exchange."}], "answers": [{"comments": [{"owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "edited": false, "score": 0, "creation_date": 1507753353, "post_id": 46696846, "comment_id": 80341527, "body": "This worked perfectly Heng. Thanks so much. Will accept as soon as 5min threshold is up."}], "tags": [], "owner": {"reputation": 81, "user_id": 796394, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e96d562e1a97e508d355ab6d008f284c?s=128&d=identicon&r=PG", "display_name": "hxiong", "link": "https://stackoverflow.com/users/796394/hxiong"}, "is_accepted": true, "score": 2, "last_activity_date": 1507753113, "creation_date": 1507753113, "answer_id": 46696846, "question_id": 46696756, "link": "https://stackoverflow.com/questions/46696756/how-do-i-make-external-libraries-gems-show-up-inside-rubymines-project-view/46696846#46696846", "title": "How do I make external libraries (gems) show up inside Rubymine&#39;s project view?", "body": "<p>Go to File -> Settings -> Languages &amp; Frameworks -> Ruby SDK and Gems. Then select the correct version of Ruby your code is using (in this case, 2.3.1). This should make the \"External Libraries\" section on project window to load from the correct version of gem home. Restart Rubymine if necessary.</p>\n"}], "owner": {"reputation": 1369, "user_id": 1032882, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/dN0sX.jpg?s=128&g=1", "display_name": "RudyOnRails", "link": "https://stackoverflow.com/users/1032882/rudyonrails"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 575, "favorite_count": 0, "accepted_answer_id": 46696846, "answer_count": 1, "score": 2, "last_activity_date": 1507753113, "creation_date": 1507752739, "question_id": 46696756, "link": "https://stackoverflow.com/questions/46696756/how-do-i-make-external-libraries-gems-show-up-inside-rubymines-project-view", "title": "How do I make external libraries (gems) show up inside Rubymine&#39;s project view?", "body": "<p>I am looking to be able to Cmd+click into a method name and have it jump to the gem's source code like I can within my Rails app.</p>\n\n<p>In the past I've used Rubymine and I remember it automatically loading the folders for all the gems, in the \"project view\" on the left side, at the bottom, titled \"External Libraries.\" For some reason I am only getting what's in the picture below. I feel as if it may be some sort of RVM issue because it's only showing 2.0.0 when this project has a .ruby-version of 2.3.1.</p>\n\n<p><a href=\"https://i.stack.imgur.com/4kErd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4kErd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 0, "last_activity_date": 1507752524, "last_edit_date": 1507752524, "creation_date": 1507751097, "answer_id": 46696317, "question_id": 46696229, "link": "https://stackoverflow.com/questions/46696229/how-to-pluck-multiple-attributes-in-rails-3-x/46696317#46696317", "title": "How to pluck multiple attributes in Rails 3.x?", "body": "<p>To avoid loading all of the objects you could do this:</p>\n\n<pre><code>hash = Hash.new\nActiveRecord::Base.connection.execute(\"SELECT id, name FROM persons\").each {|person| hash[person['id'].to_s] = person['name'].to_s}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 799, "user_id": 2559093, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/eOwPf.jpg?s=128&g=1", "display_name": "OneNeptune", "link": "https://stackoverflow.com/users/2559093/oneneptune"}, "is_accepted": true, "score": 3, "last_activity_date": 1507751343, "creation_date": 1507751343, "answer_id": 46696379, "question_id": 46696229, "link": "https://stackoverflow.com/questions/46696229/how-to-pluck-multiple-attributes-in-rails-3-x/46696379#46696379", "title": "How to pluck multiple attributes in Rails 3.x?", "body": "<p>Here's a pretty good write up of this situation and various tactics for handling it: <a href=\"http://meltingice.net/2013/06/11/pluck-multiple-columns-rails/\" rel=\"nofollow noreferrer\">Plucking Multiple Columns in Rails 3</a></p>\n\n<p>My preference of suggested solutions there is to make and include a module: </p>\n\n<pre><code># multi_pluck.rb\nrequire 'active_support/concern'\n\nmodule MultiPluck\n  extend ActiveSupport::Concern\n\n  included do\n    def self.pluck_all(relation, *args)\n      connection.select_all(relation.select(args))\n    end\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1507811740, "last_edit_date": 1507811740, "creation_date": 1507752861, "answer_id": 46696785, "question_id": 46696229, "link": "https://stackoverflow.com/questions/46696229/how-to-pluck-multiple-attributes-in-rails-3-x/46696785#46696785", "title": "How to pluck multiple attributes in Rails 3.x?", "body": "<pre><code>class Person &lt; ActiveRecord::Base\n  attr_accessible :name\n\n  def self.pluck_id_and_name\n     result = connection.select_all(select(:id, :name))\n     if result.any?\n       # if you are using Ruby 2.1+\n       result.to_h\n       # Works in 1.9.3+\n       Hash[result]\n     end\n  end\nend\n</code></pre>\n\n<p>Since the result should be an array of arrays we can use nifty trick to get a hash with the first element as keys and the second as values:</p>\n\n<pre><code>Hash[ [ [1, \"Joe\"], [2, \"Jill\"] ] ] \n# =&gt; { 1 =&gt; \"Joe\", 2 =&gt; \"Jill\"}\n</code></pre>\n\n<p>See:</p>\n\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/9270972/convert-array-of-2-element-arrays-into-a-hash-where-duplicate-keys-append-addit\">Convert array of 2-element arrays into a hash, where duplicate keys append additional values</a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 856, "user_id": 2131983, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3sKfa.jpg?s=128&g=1", "display_name": "khiav reoy", "link": "https://stackoverflow.com/users/2131983/khiav-reoy"}, "is_accepted": false, "score": 0, "last_activity_date": 1525172626, "creation_date": 1525172626, "answer_id": 50115368, "question_id": 46696229, "link": "https://stackoverflow.com/questions/46696229/how-to-pluck-multiple-attributes-in-rails-3-x/50115368#50115368", "title": "How to pluck multiple attributes in Rails 3.x?", "body": "<p>My company used one of the tactics from <a href=\"http://meltingice.net/2013/06/11/pluck-multiple-columns-rails/\" rel=\"nofollow noreferrer\">Plucking Multiple Columns in Rails 3</a> before.\nBut we had trouble upgrading from Rails 3 to Rails 4 because it didn't work in Rails 4. </p>\n\n<p>I suggest using <a href=\"https://github.com/khiav223577/pluck_all\" rel=\"nofollow noreferrer\">pluck_all</a> gem which has high test coverage in Rails 3, 4, 5, so you will not worry about future upgrades.</p>\n"}], "owner": {"reputation": 8101, "user_id": 319422, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/es5xA.jpg?s=128&g=1", "display_name": "Manuel Ebert", "link": "https://stackoverflow.com/users/319422/manuel-ebert"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 844, "favorite_count": 0, "accepted_answer_id": 46696379, "answer_count": 4, "score": 1, "last_activity_date": 1525172626, "creation_date": 1507750767, "last_edit_date": 1508569678, "question_id": 46696229, "link": "https://stackoverflow.com/questions/46696229/how-to-pluck-multiple-attributes-in-rails-3-x", "title": "How to pluck multiple attributes in Rails 3.x?", "body": "<p>I have an ActiveRecord model like this:</p>\n\n<pre><code>class Person &lt; ActiveRecord::Base\n  attr_accessible :name\nend\n</code></pre>\n\n<p>and need to get a hash mapping <code>Person</code>'s <code>id</code>s to their <code>name</code>s:</p>\n\n<pre><code>{1 =&gt; \"Paul\", 2 =&gt; \"Aliyah\", 3 =&gt; ... }\n</code></pre>\n\n<p>Now, the obvious way would be</p>\n\n<pre><code>Person.all.collect { |p| [p.id, p.name] }.to_h\n</code></pre>\n\n<p>However, I don't need to instantiate every <code>Person</code>, I just need the hash. In Rails 4, I can <code>.pluck(:id, :name)</code> instead of <code>collect</code>, however in 3.x, <code>pluck</code> takes only one argument. However I found this workaround to get what I want without loading the models:</p>\n\n<pre><code>Person.all.group(:id).minimum(:name)\n</code></pre>\n\n<p><strong>Question:</strong> will I burn in hell? Also, is there a more elegant way to do this, and are there any drawbacks of this hacky approach that I may not be aware of? Thanks!</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "string", "ace-editor"], "comments": [{"owner": {"reputation": 1513, "user_id": 3596851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CVyMB.jpg?s=128&g=1", "display_name": "Harsha pps", "link": "https://stackoverflow.com/users/3596851/harsha-pps"}, "edited": false, "score": 0, "creation_date": 1507781957, "post_id": 46696224, "comment_id": 80349802, "body": "Can you provide a working demo of the problem you are facing?"}, {"owner": {"reputation": 1513, "user_id": 3596851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CVyMB.jpg?s=128&g=1", "display_name": "Harsha pps", "link": "https://stackoverflow.com/users/3596851/harsha-pps"}, "edited": false, "score": 0, "creation_date": 1508056306, "post_id": 46696224, "comment_id": 80452039, "body": "Everything looks fine here, I guess you need to convert &quot;&lt;%= @submission.source_code.inspect[1..-2] %&gt;&quot; to the text format. Could you try to convert the &quot;&lt;%= @submission.source_code.inspect[1..-2] %&gt;&quot; using .html() and then try to display in the editor."}, {"owner": {"reputation": 150, "user_id": 7876571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-GY85012qFfI/AAAAAAAAAAI/AAAAAAAAAJQ/XtcnhSqnqE0/photo.jpg?sz=128", "display_name": "yzhan", "link": "https://stackoverflow.com/users/7876571/yzhan"}, "reply_to_user": {"reputation": 1513, "user_id": 3596851, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/CVyMB.jpg?s=128&g=1", "display_name": "Harsha pps", "link": "https://stackoverflow.com/users/3596851/harsha-pps"}, "edited": false, "score": 0, "creation_date": 1508085984, "post_id": 46696224, "comment_id": 80460233, "body": "Hi Harsha, thx for the reply! I fixed it using raw() in ruby, which is pretty similar to what you suggested. Another fix is that I changed the hidden input field to a textarea, so that the tabs can be saved."}], "owner": {"reputation": 150, "user_id": 7876571, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-GY85012qFfI/AAAAAAAAAAI/AAAAAAAAAJQ/XtcnhSqnqE0/photo.jpg?sz=128", "display_name": "yzhan", "link": "https://stackoverflow.com/users/7876571/yzhan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 204, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507848335, "creation_date": 1507750756, "last_edit_date": 1507848335, "question_id": 46696224, "link": "https://stackoverflow.com/questions/46696224/putting-strings-with-tabs-into-ace-editor", "title": "Putting strings with tabs into Ace editor?", "body": "<p>I have an ace editor embedded in my web page, and I want to save/load a string of code from the database and plug it into ace editor with <code>editor.setValue(sometext)</code></p>\n\n<p>The code string in my db is like <code>public class Solution {\\n\\t\\n}</code>, and in my page.js I have the following code to inject the string into editor:\n<code>\neditor.setValue(\"&lt;%= @submission.source_code.inspect[1..-2] %&gt;\", 1);\n</code>\nwhere <code>@submission.source_code</code> is the code I want, and I used <code>.inspect</code> in ruby to get rid of the &amp;quot thing. </p>\n\n<p>But if I modify the code in editor and save, the next time I load the code from db it just fits every line into same line with many spaces. So I wonder how can I save the code into db and make it still have the same format for the next load?</p>\n\n<p>Here's my code for the page with editor:</p>\n\n<pre><code>&lt;%= form_for(@submission, url: save_path) do |f| %&gt;\n  &lt;pre id=\"editor\" style=\"height: 86vh; margin-bottom: 0px\"&gt;&lt;/pre&gt;\n  &lt;%= f.text_field :source_code, id: :submission_source_code %&gt;\n  &lt;%= f.number_field :assignment_id, id: :submission_assignment_id, style: \"display: none\", :value =&gt; @assignment.id %&gt;\n&lt;% end %&gt;\n\n&lt;script&gt;\n  var editor = ace.edit(\"editor\");\n  var input = $('input[id=\"submission_source_code\"]').hide();\n  editor.setTheme(\"ace/theme/xcode\");\n  editor.getSession().setMode(\"ace/mode/java\");\n  editor.setShowPrintMargin(false);\n  editor.setOptions({fontSize: \"14px\"});\n  editor.setValue(\"&lt;%= @submission.source_code.inspect[1..-2] %&gt;\", 1);\n  editor.getSession().on('change', function() {\n    input.val(editor.getSession().getValue());\n    console.log(input.val());\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p>For example, when I save the following code:</p>\n\n<pre><code>public class Solution {\n    public int fib(int n) {\n        return n;\n    }\n}\n</code></pre>\n\n<p>it becomes this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/UgSGC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UgSGC.png\" alt=\"Saved text\"></a></p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1507751300, "post_id": 46696191, "comment_id": 80340487, "body": "What is the use-case here? <code>grep</code> can get you 90% of the way here without any custom code."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1507751518, "post_id": 46696191, "comment_id": 80340622, "body": "The <i>inner</i> loop prints out the <i>outter</i> loops line for as many inner lines there are. Also, don&#39;t you have to <i>rewind</i> the inner loop&#39;s file position each pass of the outter loop ? You could fix that by moving the print to the outter loop, only printing the word match when there is a match, then break to the outter loop"}, {"owner": {"reputation": 73, "user_id": 4930591, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/342303e8171fd0e2533ba0c86e91a112?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/4930591/ssharma"}, "edited": false, "score": 0, "creation_date": 1507751761, "post_id": 46696191, "comment_id": 80340758, "body": "Yeah, i think you are correct. how do I change position of the line iterator ? so that it starts at the next line instead of starting from the top each time."}, {"owner": {"reputation": 73, "user_id": 4930591, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/342303e8171fd0e2533ba0c86e91a112?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/4930591/ssharma"}, "edited": false, "score": 0, "creation_date": 1507751810, "post_id": 46696191, "comment_id": 80340787, "body": "The use case here is that I want to delete the matched lines. so first step is to detect match and then delete them."}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1508173304, "post_id": 46696191, "comment_id": 80496384, "body": "@ssharma This is exactly what <code>grep</code>, <code>diff</code>, and similar tools are for. Don&#39;t reinvent the wheel."}], "answers": [{"tags": [], "owner": {"reputation": 73, "user_id": 4930591, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/342303e8171fd0e2533ba0c86e91a112?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/4930591/ssharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1507754524, "creation_date": 1507754524, "answer_id": 46697194, "question_id": 46696191, "link": "https://stackoverflow.com/questions/46696191/pass-regex-from-a-external-file-ruby/46697194#46697194", "title": "pass regex from a external file ruby", "body": "<p>The code worked after I switch to using readlines method instead of each</p>\n\n<pre><code>   #!/usr/bin/env ruby\n\n\n    require 'rubygems'\n\n    regexen=''\n\n    file = 'main.log'\n    replace_file = 'clean.log'\n    logfile_du = File.open(file, mode='r')\n\n    params_file = File.open(replace_file,mode='r')\n    i=1\n    File.readlines('main.log').each do |line1|\n\n    print \"#{i}\\n\"\n    line1.chomp!\n    File.readlines('clean.log').each do |line|\n\n            line.chomp!\n            regexen = /#{line}.*/\n\n\n    if line1 =~ /#{regexen}/\n        print \"match\\n\"\n      #  print line1\n    else\n      print \"no_match\\n\"\n\n    end\n    end\n\n    i=i+1\n    end\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4930591, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/342303e8171fd0e2533ba0c86e91a112?s=128&d=identicon&r=PG&f=1", "display_name": "ssharma", "link": "https://stackoverflow.com/users/4930591/ssharma"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507754524, "creation_date": 1507750591, "last_edit_date": 1507754465, "question_id": 46696191, "link": "https://stackoverflow.com/questions/46696191/pass-regex-from-a-external-file-ruby", "title": "pass regex from a external file ruby", "body": "<p>I have 2 files. File 1 (main.log) is a text file with a bunch of text. File 2 (clean.log) is also a text file. I want to be able to detect the presence of text from file 2 in file 1 on a line by line basis. Here is what I have right now for my ruby script </p>\n\n<pre><code>  require 'rubygems'\n  regexen=''\n  file = 'main.log'\n  replace_file = 'clean.log'\n  logfile_du = File.open(file, mode='r')\n  params_file = File.open(replace_file,mode='r')\n  logfile_du.each {\n  |line1|\n  line1.chomp!\n  params_file.each {\n          |line|\n          line.chomp!\n          regexen = /^#{line}.*/\n\n  print line1\n\n  if line1 =~ /#{regexen}/\n      print \"match\\n\"\n  else\n    print \"no_match\\n\"\n  end\n  }\n  }\n</code></pre>\n\n<p>here is the main.log file </p>\n\n<pre><code>  #DoNotEditThisLine: UndoCommandFile 206.40.123.77 17.0b ERBS_NODE_MODEL_H_1_167_COMPLETE stopfile=/tmp/27006\n\n  gs+\n\n  crn ENodeBFunction=1,EUtranCellFDD=311480-936016-3\n  acBarringForCsfb acBarringFactor=95,acBarringTime=64,acBarringForSpecialAC=false false false false false\n  acBarringForEmergency false\n  acBarringForMoData acBarringFactor=95,acBarringTime=64,acBarringForSpecialAC=false false false false false\n  acBarringForMoSignalling acBarringFactor=95,acBarringTime=64,acBarringForSpecialAC=false false false false false\n  acBarringInfoPresent true\n</code></pre>\n\n<p>Here is the clean.log file</p>\n\n<pre><code>acBarringForCsfb\nacBarringForMoData\nacBarringForMoSignalling\nacBarringPresence\n</code></pre>\n\n<p>Current output that I am getting </p>\n\n<pre><code> #DoNotEditThisLine: UndoCommandFile 206.40.123.77 17.0b \n ERBS_NODE_MODEL_H_1_167_COMPLETE stopfile=/tmp/27006\n no_match\n  #DoNotEditThisLine: UndoCommandFile 206.40.123.77 17.0b \n  ERBS_NODE_MODEL_H_1_167_COMPLETE stopfile=/tmp/27006\n  no_match\n  #DoNotEditThisLine: UndoCommandFile 206.40.123.77 17.0b \n  ERBS_NODE_MODEL_H_1_167_COMPLETE stopfile=/tmp/27006\n  no_match\n  #DoNotEditThisLine: UndoCommandFile 206.40.123.77 17.0b \n  ERBS_NODE_MODEL_H_1_167_COMPLETE stopfile=/tmp/27006\n   no_match\n</code></pre>\n\n<p>Expected Output</p>\n\n<pre><code>    #DoNotEditThisLine: UndoCommandFile 206.40.123.77 17.0b ERBS_NODE_MODEL_H_1_167_COMPLETE stopfile=/tmp/27006\n    no_match\n    gs+\n    no_match\n    crn ENodeBFunction=1,EUtranCellFDD=311480-936016-3\n    no_match\n    acBarringForCsfb acBarringFactor=95,acBarringTime=64,acBarringForSpecialAC=false false false false false\n    match\n    acBarringForEmergency false\n    no_match\n    acBarringForMoData acBarringFactor=95,acBarringTime=64,acBarringForSpecialAC=false false false false false\n    match\n    acBarringForMoSignalling acBarringFactor=95,acBarringTime=64,acBarringForSpecialAC=false false false false false\n    match\n    acBarringInfoPresent true\n    no_match\n</code></pre>\n\n<p>Can someone please advise what I am missing here. </p>\n\n<p>Update - The code worked after I switch to using readlines method instead of each</p>\n\n<pre><code>    #!/usr/bin/env ruby\n\n\n    require 'rubygems'\n\n    regexen=''\n\n    file = 'main.log'\n    replace_file = 'clean.log'\n    i=1\n    File.readlines('main.log').each do |line1|\n\n    print \"#{i}\\n\"\n    line1.chomp!\n    File.readlines('clean.log').each do |line|\n\n            line.chomp!\n            regexen = /#{line}.*/\n\n\n    if line1 =~ /#{regexen}/\n        print \"match\\n\"\n      #  print line1\n    else\n      print \"no_match\\n\"\n\n    end\n    end\n\n    i=i+1\n    end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "nginx", "amazon-ec2"], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 4550403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14364880500224999f9884ba736f3b4e?s=128&d=identicon&r=PG", "display_name": "Guilherme", "link": "https://stackoverflow.com/users/4550403/guilherme"}, "edited": false, "score": 0, "creation_date": 1507815927, "post_id": 46710447, "comment_id": 80368834, "body": "Email from AWS support: &quot;That being said, you have to configure your nginx server in such a way that it will return 200ok for the requests without the host header. After modifying this, to verify if you have set it up correctly, run the following command from another linux instance in the same VPC.&quot; Command : curl -Iv  <a href=\"http://INTERNALIP//index.html\" rel=\"nofollow noreferrer\">INTERNALIP//index.html</a> I tried to change sites-enabled to &quot;&quot; but the 404 error persists on curl"}], "tags": [], "owner": {"reputation": 151, "user_id": 8031217, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dzCiP.png?s=128&g=1", "display_name": "Rops42", "link": "https://stackoverflow.com/users/8031217/rops42"}, "is_accepted": false, "score": 0, "last_activity_date": 1507813669, "creation_date": 1507813669, "answer_id": 46710447, "question_id": 46695703, "link": "https://stackoverflow.com/questions/46695703/how-to-use-https-in-aws-on-ngix-server/46710447#46710447", "title": "How to use Https in AWS on Ngix server?", "body": "<p>i suppose the error is simply from your ELB configuration,<br>\nif you really want that your nginx use <strong>443 Port</strong> on your EC2 you need to set this type of <strong>listener</strong> :</p>\n\n<p><strong>HTTPS - Port 443 | Instance Protocol HTTPS | INSTANCE PORT 443</strong><br>\nand not</p>\n\n<blockquote>\n  <p>HTTPS - Port 443 | Instance Protocol HTTP | INSTANCE PORT 80 |</p>\n</blockquote>\n\n<p>Or you simply configure Nginx to only listen on the 80 port, the ELB will sign and redirect 443 to 80 and everything works with HTTPS as well.</p>\n"}, {"comments": [{"owner": {"reputation": 842, "user_id": 1618432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/AkQRk.jpg?s=128&g=1", "display_name": "MagicLAMP", "link": "https://stackoverflow.com/users/1618432/magiclamp"}, "edited": false, "score": 0, "creation_date": 1538716215, "post_id": 46716842, "comment_id": 92247780, "body": "The only issue with this is that if uwsgi goes down, you will never know"}], "tags": [], "owner": {"reputation": 31, "user_id": 4550403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14364880500224999f9884ba736f3b4e?s=128&d=identicon&r=PG", "display_name": "Guilherme", "link": "https://stackoverflow.com/users/4550403/guilherme"}, "is_accepted": true, "score": 0, "last_activity_date": 1507834083, "creation_date": 1507834083, "answer_id": 46716842, "question_id": 46695703, "link": "https://stackoverflow.com/questions/46695703/how-to-use-https-in-aws-on-ngix-server/46716842#46716842", "title": "How to use Https in AWS on Ngix server?", "body": "<p>I Solved: </p>\n\n<p>In nginx/sites-enabled:</p>\n\n<pre><code>location /elb-health {\n  return 200;\n  access_log off;\n}\n</code></pre>\n\n<p>Changed the ELB health check to /elb-heatlh and AWS ELB stop to return 503</p>\n"}, {"tags": [], "owner": {"reputation": 842, "user_id": 1618432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://i.stack.imgur.com/AkQRk.jpg?s=128&g=1", "display_name": "MagicLAMP", "link": "https://stackoverflow.com/users/1618432/magiclamp"}, "is_accepted": false, "score": 0, "last_activity_date": 1538719032, "creation_date": 1538719032, "answer_id": 52659149, "question_id": 46695703, "link": "https://stackoverflow.com/questions/46695703/how-to-use-https-in-aws-on-ngix-server/52659149#52659149", "title": "How to use Https in AWS on Ngix server?", "body": "<p>The accepted answer has an issue in that, though the health check will remove instances where the web server (nginx in this case) is not running, it does not identify instances where uwsgi (or gunicorn or whatever) that interfaces between the web server and your ruby (or in my case django) application is running. </p>\n\n<p>Here is what I did. </p>\n\n<ul>\n<li>First, I did not set up a special security group, assuming that if\nthe load balancers can access the instance, then the health check\ncan. This turned out to be a safe assumption. This was not obvious, and AWS work backwards in that they firewall everything, and then expect you to  create security groups to allow access where needed. This is good security, but without telling you the IP addresses of sources for things such as 'health checks', confounds troubleshooting. </li>\n<li>Then I set ALLOWED_HOSTS = ['*']. What this does in django is it allows the application to be accessed from any domain name (including the raw IP) that resolves to an IP that accesses the server. I have no idea wether the AWS health check will use an internal IP or an external IP for the server, and as AWS prides the use of 'Elastic' IP, I have no idea if either interface IPs are static. This is pretty safe, as AWS already firewalls the hell out of your instances making them so inaccessible they can't be used.</li>\n<li>I Put the following directive in my nginx/sites-enabled/conf file that identified the '/health/' endpoint and did <em>not</em> redirect to https if it was present. Once again, the only things that should be able to access your instances on port 80 are your load balancers.\n\n<blockquote>\n<pre><code>  if ($http_x_forwarded_proto != 'https') {\n    set $redirect_to_https 1;\n  }\n  if ($request_uri = '/health/') {\n    set $redirect_to_https 0;\n  }\n  if ($redirect_to_https = 1) {\n    rewrite ^ https://www.example.com$request_uri? permanent;\n  }\n</code></pre>\n</blockquote></li>\n<li>Then I created and end point '/health/' and a simple http template that returned a simple page not inheriting CSS or anything from the base template. It simply is a heading. Below is the returned page with crowd88-prodb.py in my /etc/hosts to resolve the IP. This works because I have a security group for my static IP to the instances.\n<a href=\"https://i.stack.imgur.com/NYuXu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NYuXu.png\" alt=\"enter image description here\"></a></li>\n<li>NOW, the HTTP health check on port 80 from AWS will have a 200 OK returned when accessing the instances serving my web application, and if uwsgi breaks or stops, a 504 gateway error will be returned, the health check will recognise something is wrong and remove the instance from the load balancer.</li>\n</ul>\n\n<p>This was a lot easier to do with Rackspace, which (other than not being as internationally quick serving http requests) have a better interface to determine working instances. Also Rackspace actually have online chat and a telephone number as well as a ticket generating service. I could not even log a ticket with AWS, and none of the support documents gives detail on the health check. Another thing that bugs me is exactly one health check is available on the classic load balancer. You can't turn it off, you can't add another check. Considering every job advert I have seen for full stack <em>only</em> specifies knowledge of AWS, I think Australian industry needs to look at other solutions such as Digital Ocean and Rackspace. AWS is good if your site has customers all over the world, but if most of your traffic comes from the same country, there is no advantage with AWS in my opinion.</p>\n"}], "owner": {"reputation": 31, "user_id": 4550403, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/14364880500224999f9884ba736f3b4e?s=128&d=identicon&r=PG", "display_name": "Guilherme", "link": "https://stackoverflow.com/users/4550403/guilherme"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 1, "accepted_answer_id": 46716842, "answer_count": 3, "score": 2, "last_activity_date": 1538719032, "creation_date": 1507748488, "last_edit_date": 1507816282, "question_id": 46695703, "link": "https://stackoverflow.com/questions/46695703/how-to-use-https-in-aws-on-ngix-server", "title": "How to use Https in AWS on Ngix server?", "body": "<p>I could not make HTTPS work in my application. \nFirst I used A Type DNS on Route 53 with an Elastic Ip and http works, but when I tried to work on https, I tried to create a Load Balancer, and using the alias on A type, occurs 503 error.</p>\n\n<p>I did:</p>\n\n<p>1) In my domain's DNS panel (registro.br) added 4 Amazon DNS:\n2) In Amazon Certificate Manager, I created a certificate for my domain;</p>\n\n<p>3) In Security Groups - Inbound Tab, I included the HTTPS (HTTPS - TCP - 443 - 0.0.0.0/0)</p>\n\n<p>4) I created a Classic Load Balancer and included 2 listners:</p>\n\n<ul>\n<li>HTTP - Port 80</li>\n<li>HTTPS - Port 443 | Instance Protocol HTTP | INSTANCE PORT 80 | Associate my certificate (step 1 - ACM Amazon Certificate Manger)</li>\n</ul>\n\n<p>5) In Amazon Route 53 - Hosted Zones, I added 2 records in my hosted zone:</p>\n\n<ol>\n<li>CNAME www with value mydomain .com</li>\n<li>Type A IPv4 Address | Alias YES | Alias Target: My Load Balancer</li>\n</ol>\n\n<p>In tutorials I saw (youtube + internet), only with the steps above the HTTPS works on Amazon EC2. But, the tutorials is not for NGINX and Ruby On Rails.</p>\n\n<p>Some prints: \n<a href=\"https://i.stack.imgur.com/feeS3.png\" rel=\"nofollow noreferrer\">Load Balancer</a>\n<a href=\"https://i.stack.imgur.com/7Dk9q.png\" rel=\"nofollow noreferrer\">Route 53</a></p>\n\n<p>My Environment:</p>\n\n<p>OS: Ubuntu 14.04.2 LTS\nruby -v: ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-linux]\nrails -v: Rails 4.2.3\nnginx -v: nginx/1.8.0</p>\n\n<hr>\n\n<p>EMAIL FROM AWS SUPPORT:</p>\n\n<p>the reason that we see 503 errors are because the backend instance is failing ELB health checks and ELB is marking the instance as unhealthy. If there are no healthy instances, the ELB will not forward the request to the backend instance and will return HTTP 503 error code. (Healthy Host Count metric link below)</p>\n\n<p>Hence, now we have to verify why the health checks are failing. Once we fix this, the ELB will be sending the requests to your backend nginx server.</p>\n\n<p>Looking at some internal logs, I could see that your backend instance is returning a 404 error for the health check requests coming from load balancer nodes. Hence I ran some tests against your instance 34.234.9.186.</p>\n\n<p>I noticed that autonomosapp.com.br is currently pointing to the IP 34.234.9.186. Here is what I found:\nCurl http:// ELASTIC IP /index.html - responds with a 404 not found error (you could try this on the browser as well, you will see a 404 error)\nCurl http :// autonomosapp . com. br /index.html - responds with 200 ok (Successful response)</p>\n\n<p>Though both these requests are pointing to the same IP and port, the output is different. This could happen if you have virtual hosts configured in your nginx configuration file to return different web pages based on the host header. ELB will be sending health check requests to the private IP address of the backend instance and the URL of these health check requests looks like http:// 172.31.95.37:80 // index.html. Since, these requests does not have \"autonomosapp.com.br\" in the host header, your backends are returning 404 error.</p>\n\n<p>Note: 172.31.95.37 is the private IP address of your instance.</p>\n\n<p>That being said, you have to configure your nginx server in such a way that it will return 200ok for the requests without the host header.</p>\n\n<p>After modifying this, to verify if you have set it up correctly, run the following command from another linux instance in the same VPC.</p>\n\n<p>Command : curl -Iv  http:// 172.31.95.37:80 //index.html</p>\n\n<p>If this command returns a 200 ok, the health checks are more likely to succeed. If they are still failing, please get back to me.</p>\n\n<hr>\n\n<p>UPDATE: I tried to change sites-enabled in nginx config to \"\" but the error persists</p>\n"}, {"tags": ["ruby", "evernote"], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 7044855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8853c5bb96a922687efac6e58c25bf0?s=128&d=identicon&r=PG", "display_name": "prieber", "link": "https://stackoverflow.com/users/7044855/prieber"}, "edited": false, "score": 0, "creation_date": 1508876383, "post_id": 46799451, "comment_id": 80786078, "body": "Thanks for your comment, I&#39;ll try that."}], "tags": [], "owner": {"reputation": 1219, "user_id": 1691992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/be812dd3d775e199257109b5865d40cb?s=128&d=identicon&r=PG", "display_name": "kentaro", "link": "https://stackoverflow.com/users/1691992/kentaro"}, "is_accepted": true, "score": 1, "last_activity_date": 1508275479, "creation_date": 1508275479, "answer_id": 46799451, "question_id": 46694930, "link": "https://stackoverflow.com/questions/46694930/evernoteedamnotestorenoteresultspec-is-not-defined/46799451#46799451", "title": "::Evernote::EDAM::NoteStore::NoteResultSpec is not defined", "body": "<p>You can use <a href=\"https://dev.evernote.com/doc/reference/NoteStore.html#Fn_NoteStore_getNote\" rel=\"nofollow noreferrer\">NoteStore.getNote</a> with <code>withContent</code> true to get note contents.</p>\n"}], "owner": {"reputation": 392, "user_id": 7044855, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b8853c5bb96a922687efac6e58c25bf0?s=128&d=identicon&r=PG", "display_name": "prieber", "link": "https://stackoverflow.com/users/7044855/prieber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 46799451, "answer_count": 1, "score": 0, "last_activity_date": 1508275479, "creation_date": 1507745513, "question_id": 46694930, "link": "https://stackoverflow.com/questions/46694930/evernoteedamnotestorenoteresultspec-is-not-defined", "title": "::Evernote::EDAM::NoteStore::NoteResultSpec is not defined", "body": "<p>The API documentation provides a struct for a NoteResultSpec, which ostensibly allows one to include note content in an API request, but this does not appear to be available in the Ruby SDK.  I can get metadata using NotesMetadatResultSpec, but this does not include note content.</p>\n\n<p><a href=\"https://dev.evernote.com/doc/reference/NoteStore.html#Struct_NoteResultSpec\" rel=\"nofollow noreferrer\">https://dev.evernote.com/doc/reference/NoteStore.html#Struct_NoteResultSpec</a></p>\n\n<p>Is there any way to get note content using the ruby SDK?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1507744763, "post_id": 46694604, "comment_id": 80337179, "body": "<code>Object.method(:include?)</code> reveals that this method is <a href=\"http://ruby-doc.org/core-2.4.2/Module.html#method-i-include-3F\" rel=\"nofollow noreferrer\"><code>Module#include?</code></a> \u2013 it checks whether the given module was included in the receiver."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1507745678, "post_id": 46694604, "comment_id": 80337646, "body": "@pushpamk it&#39;s always helpful to have some context. Add the project&#39;s name and (if possible) provide a link to the code in question."}], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 3, "last_activity_date": 1507744897, "creation_date": 1507744897, "answer_id": 46694753, "question_id": 46694604, "link": "https://stackoverflow.com/questions/46694604/what-is-self-class-include-means-here/46694753#46694753", "title": "what is &quot;self.class.include?&quot; means here?", "body": "<p><code>self.class</code>, called inside an instance method, returns the reference to the object class. The <a href=\"http://ruby-doc.org/core-2.4.2/Module.html#method-i-include-3F\" rel=\"nofollow noreferrer\"><code>Module#include?</code></a> method returns <code>true</code> if the module passed as argument is included in the current module.</p>\n\n<p>In other words, the code you referenced is actually checking if the class of the instance you are manipulating is mixing <code>Single</code> or <code>Stager</code> classes.</p>\n\n<p>Here's an example:</p>\n\n<pre><code>module One\nend\n\nclass Two\n  include One\nend\n\nclass Three\nend\n\nt = Two.new\nt.class.include?(One)\n# =&gt; true\n\nt = Three.new\nt.class.include?(One)\n# =&gt; false\n</code></pre>\n"}], "owner": {"reputation": 102, "user_id": 8075327, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/1900ae2249cf89e22fd586a18508ea6c?s=128&d=identicon&r=PG&f=1", "display_name": "Pushpam Kumar", "link": "https://stackoverflow.com/users/8075327/pushpam-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 257, "favorite_count": 0, "accepted_answer_id": 46694753, "answer_count": 1, "score": 0, "last_activity_date": 1507744897, "creation_date": 1507744320, "question_id": 46694604, "link": "https://stackoverflow.com/questions/46694604/what-is-self-class-include-means-here", "title": "what is &quot;self.class.include?&quot; means here?", "body": "<pre><code>if self.class.include?(Msf::Payload::Single) and\n  self.class.include?(Msf::Payload::Stager)\n  self.module_info['Stage'] = {}\n</code></pre>\n\n<p>I tried to execute \"puts self.class\" output was \"Object\". Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "roo-gem"], "answers": [{"tags": [], "owner": {"reputation": 1106, "user_id": 6454624, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-54Cw2TNXh84/AAAAAAAAAAI/AAAAAAAAAC4/Ivxon84Rp4k/photo.jpg?sz=128", "display_name": "Adim", "link": "https://stackoverflow.com/users/6454624/adim"}, "is_accepted": false, "score": 0, "last_activity_date": 1508077785, "creation_date": 1508077785, "answer_id": 46756143, "question_id": 46694594, "link": "https://stackoverflow.com/questions/46694594/heroku-scheduler-with-custom-intervals-using-simple-scheduler/46756143#46756143", "title": "Heroku Scheduler with Custom Intervals using &quot;simple_scheduler&quot;", "body": "<p>This can be easily achieved. Say we have a task named example_task, we can do this:</p>\n\n<pre><code>example_task:\n  class: \"ExampleJob\"\n  every: \"1.week\"\n  at: \"Sat 23:45\"\n</code></pre>\n\n<p>Note that <code>ExampleJob</code> has to extend <code>ActiveJob::Base</code> and implement the perform method which will hold the logic for your task.</p>\n"}], "owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 436, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1509348885, "creation_date": 1507744266, "last_edit_date": 1509348885, "question_id": 46694594, "link": "https://stackoverflow.com/questions/46694594/heroku-scheduler-with-custom-intervals-using-simple-scheduler", "title": "Heroku Scheduler with Custom Intervals using &quot;simple_scheduler&quot;", "body": "<p>I want run an scheduler at every saturday at 11.45pm, But if use <strong>whenever</strong> gem it will not support in heroku, How can we write Heroku Scheduler with Custom Intervals?</p>\n\n<p>Answer:</p>\n\n<p>Simple Scheduler is a scheduling add-on that is designed to be used with Sidekiq and Heroku Scheduler.It gives you the ability to schedule tasks at any interval without adding a clock process. Heroku Scheduler only allows you to schedule tasks every 10 minutes, every hour, or every day.</p>\n\n<p>STEP 1: gem \"simple_scheduler\"\nSTEP 2: bundle\nSTEP 3: Create the file config/simple_scheduler.yml in your Rails project:</p>\n\n<pre><code># Global configuration options. These can also be set on each task.\nqueue_ahead: 360 # Number of minutes to queue jobs into the future\ntz: nil # The application time zone will be used by default if not set\n\n# Runs once every 2 minutes\nsimple_task:\n  class: \"SomeActiveJob\"\n  every: \"2.minutes\"\n\n# Runs once every day at 4:00 AM. The job will expire after 23 hours, which means the\n# job will not run if 23 hours passes (server downtime) before the job is actually run\novernight_task:\n  class: \"SomeSidekiqWorker\"\n  every: \"1.day\"\n  at: \"4:00\"\n  expires_after: \"23.hours\"\n\n# Runs once every half hour, starting on the 30 min mark\nhalf_hour_task:\n  class: \"HalfHourTask\"\n  every: \"30.minutes\"\n  at: \"*:30\"\n\n# Runs once every week on Saturdays at 12:00 AM\nweekly_task:\n  class: \"WeeklyJob\"\n  every: \"1.week\"\n  at: \"Sat 0:00\"\n  tz: \"America/New_York\"\n</code></pre>\n\n<p>STEP 4: Add the rake task to Heroku Scheduler and set it to run every 10 minutes: <strong>rake simple_scheduler</strong></p>\n\n<p>For more information you can follow below link,</p>\n\n<p><a href=\"https://github.com/simplymadeapps/simple_scheduler\" rel=\"nofollow noreferrer\">https://github.com/simplymadeapps/simple_scheduler</a></p>\n"}, {"tags": ["jquery", "ruby-on-rails", "ruby", "jquery-rails"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1507744563, "post_id": 46694587, "comment_id": 80337082, "body": "What is that gem?"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1507745116, "post_id": 46694587, "comment_id": 80337355, "body": "Does the link have surrounding ids or classes that you can use to find the link?"}, {"owner": {"reputation": 717, "user_id": 5187888, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc8537959ea53f5c42080417802fa742?s=128&d=identicon&r=PG&f=1", "display_name": "Wings2fly", "link": "https://stackoverflow.com/users/5187888/wings2fly"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1507745469, "post_id": 46694587, "comment_id": 80337533, "body": "It is blazer - for creating dashboards @Sebasti&#225;nPalma"}, {"owner": {"reputation": 717, "user_id": 5187888, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc8537959ea53f5c42080417802fa742?s=128&d=identicon&r=PG&f=1", "display_name": "Wings2fly", "link": "https://stackoverflow.com/users/5187888/wings2fly"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1507745512, "post_id": 46694587, "comment_id": 80337558, "body": "Nope, I couldn&#39;t find any @jvillian"}], "answers": [{"comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1507744801, "post_id": 46694721, "comment_id": 80337195, "body": "What about if isn&#39;t the only one anchor with text &quot;Home&quot;?"}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1507744855, "post_id": 46694721, "comment_id": 80337227, "body": "@Sebasti&#225;nPalma thats why I mentioned earlier itself. Its option for him to choose"}], "tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": true, "score": 2, "last_activity_date": 1507745277, "last_edit_date": 1507745277, "creation_date": 1507744735, "answer_id": 46694721, "question_id": 46694587, "link": "https://stackoverflow.com/questions/46694587/jquery-params-to-access-ruby-link-to/46694721#46694721", "title": "Jquery Params to access ruby (link_to)", "body": "<p>It not difficult to identify element but I will be inconsistent as there might be other elements with similar property. </p>\n\n<p>We can't identify your link based on class as there is no unique class.\nSimilarly for id as well.</p>\n\n<p>If you want to do it with Content you can use it like below</p>\n\n<pre><code>$(\"a:contains('Home')\") \n</code></pre>\n\n<p><strong>####****To be more specific about identifying your element.#####</strong></p>\n\n<p>If you know where home link redirects,I mean href content. you can do like \nthis.(Assuming root_path is '/home')</p>\n\n<pre><code>$(\"a:contains('Home')[href='/home']\")\n</code></pre>\n"}], "owner": {"reputation": 717, "user_id": 5187888, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/fc8537959ea53f5c42080417802fa742?s=128&d=identicon&r=PG&f=1", "display_name": "Wings2fly", "link": "https://stackoverflow.com/users/5187888/wings2fly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9, "favorite_count": 0, "accepted_answer_id": 46694721, "answer_count": 1, "score": 0, "last_activity_date": 1507745277, "creation_date": 1507744250, "question_id": 46694587, "link": "https://stackoverflow.com/questions/46694587/jquery-params-to-access-ruby-link-to", "title": "Jquery Params to access ruby (link_to)", "body": "<p>I need to access this link  <code>&lt;%= link_to \"Home\", root_path, class: \"btn btn-primary\" %&gt;</code> in jquery to disable it in my code.\nThe link is given in ruby gem due to which I am unable to add class or id to this link.</p>\n\n<p>Is there any way to access this link other than using id or class?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "simple-form"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1507743877, "post_id": 46694416, "comment_id": 80336647, "body": "try using <code>as: :gds</code> instead"}, {"owner": {"reputation": 2417, "user_id": 343495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/823c21aefa18ab5a917aea66cc3c0519?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/343495/drew"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1507744031, "post_id": 46694416, "comment_id": 80336746, "body": "worked like a charm! thanks @MrYoshiji! If you want to add as an answer, I&#39;ll accept it as an answer!"}], "answers": [{"tags": [], "owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "is_accepted": true, "score": 2, "last_activity_date": 1507750125, "creation_date": 1507750125, "answer_id": 46696077, "question_id": 46694416, "link": "https://stackoverflow.com/questions/46694416/simple-form-custom-input-not-being-recognized/46696077#46696077", "title": "Simple Form - Custom Input Not Being Recognized", "body": "<p>Your custom class must have a suffix <code>Input</code>, and to use it you must remove that suffix from the <code>underscore</code> version of that class name.</p>\n\n<hr>\n\n<p>In your case:</p>\n\n<pre><code># class name is GdsInput\nreg.input :first_name, {...}, as: :gds\n</code></pre>\n"}], "owner": {"reputation": 2417, "user_id": 343495, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/823c21aefa18ab5a917aea66cc3c0519?s=128&d=identicon&r=PG", "display_name": "Drew", "link": "https://stackoverflow.com/users/343495/drew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 46696077, "answer_count": 1, "score": 2, "last_activity_date": 1507750125, "creation_date": 1507743612, "last_edit_date": 1507743888, "question_id": 46694416, "link": "https://stackoverflow.com/questions/46694416/simple-form-custom-input-not-being-recognized", "title": "Simple Form - Custom Input Not Being Recognized", "body": "<p>So I'm wanting to have a custom input component defined for a simple form and have the following:</p>\n\n<pre><code># app/inputs/gds_input.rb\nclass GdsInput &lt; SimpleForm::Inputs::Base\n  def input(wrapper_options = nil)\n    binding.pry\n  end\nend\n</code></pre>\n\n<p>And then in a form I have the following:</p>\n\n<pre><code>&lt;%= builder.simple_fields_for :registration, registration do |reg| %&gt;\n  &lt;fieldset&gt;\n    &lt;%= reg.input :first_name, required: true, input_html: { maxlength: 40, class: 'gds-Input' }, as: :gds_input %&gt;\n  &lt;/fieldset&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>However I'm getting a <code>No input found for gds_input</code> error at RunTime.</p>\n\n<p>Any thoughts as to that for which I had not accounted?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "is_accepted": false, "score": 1, "last_activity_date": 1507743126, "creation_date": 1507743126, "answer_id": 46694300, "question_id": 46694059, "link": "https://stackoverflow.com/questions/46694059/ruby-on-rails-count-the-number-of-records-per-category-after-filtering/46694300#46694300", "title": "Ruby on rails: count the number of records per category after filtering", "body": "<p>In Rails <code>where</code> is an <code>ActiveRecord</code> method, a query interface for retrieving data from your database. In your example you'd have to do this instead:</p>\n\n<pre><code>&lt;%= category.articles.where(title: params[:q][:title_cont]).count %&gt;\n</code></pre>\n\n<p><a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">Active Record Query Interface</a></p>\n"}, {"comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1507747837, "post_id": 46694490, "comment_id": 80338808, "body": "Are you sure @diana is looking for a matching substring? He would have to use a wildcard if that&#39;s the case."}, {"owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 1, "creation_date": 1507811351, "post_id": 46694490, "comment_id": 80365650, "body": "I can&#39;t be sure, but ransack title_cont is a wildcard match. If she was looking for exact match, she would go with title_eq.  PS: I am not sure, but I think that Diana is a girl :)"}], "tags": [], "owner": {"reputation": 1655, "user_id": 1587541, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9f9a8cdad3107b443ceeee42bb4456e1?s=128&d=identicon&r=PG", "display_name": "AntonTkachov", "link": "https://stackoverflow.com/users/1587541/antontkachov"}, "is_accepted": true, "score": 0, "last_activity_date": 1507747887, "last_edit_date": 1507747887, "creation_date": 1507743882, "answer_id": 46694490, "question_id": 46694059, "link": "https://stackoverflow.com/questions/46694059/ruby-on-rails-count-the-number-of-records-per-category-after-filtering/46694490#46694490", "title": "Ruby on rails: count the number of records per category after filtering", "body": "<p>Diana!</p>\n\n<p>You are using select on articles array and pass <code>article</code> variable to a block. <code>article</code> variable contains just a plain Article. This object doesn't have <code>.where</code> method.</p>\n\n<p>Rewrite:</p>\n\n<pre><code>category.articles.select{|article| article.where(title == params[:q][:title_cont])}.count\n</code></pre>\n\n<p>To:</p>\n\n<pre><code>category.articles.ransack(params[:q]).result.count\n</code></pre>\n\n<p>But this code is still can be refactored and improved a lot. Can you share a full view please?</p>\n\n<p><strong>Edited</strong></p>\n\n<pre><code>category.articles.where(title: params[:q][:title_cont]).count\n</code></pre>\n\n<p>Is a bad solution, because it will check for articles with fully equal title, while you are looking for articles which title contains substring of <code>params[:q][:title_cont]</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": false, "score": 0, "last_activity_date": 1507744173, "creation_date": 1507744173, "answer_id": 46694566, "question_id": 46694059, "link": "https://stackoverflow.com/questions/46694059/ruby-on-rails-count-the-number-of-records-per-category-after-filtering/46694566#46694566", "title": "Ruby on rails: count the number of records per category after filtering", "body": "<p><strong>WHY?</strong> </p>\n\n<p>You are trying to execute where condition on Article object,Not on Article relation. </p>\n\n<p><strong><em>Either replace</em></strong> </p>\n\n<pre><code>&lt;p&gt;&lt;%= category.articles.select{|article| article.where(title == params[:q][:title_cont])}.count %&gt;&lt;/p&gt;\n</code></pre>\n\n<p><strong><em>with</em></strong> </p>\n\n<pre><code>&lt;p&gt;&lt;%= category.articles.select{|article| article.class.where(title == params[:q][:title_cont])}.count %&gt;&lt;/p&gt;\n</code></pre>\n\n<h1>OR</h1>\n\n<p>Right approach</p>\n\n<pre><code>&lt;p&gt;&lt;%= category.articles.where(title: params[:q][:title_cont]).count %&gt;&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 791, "user_id": 7689318, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/8f1cb679b9ddd3e6cc685fcc6547dba9?s=128&d=identicon&r=PG&f=1", "display_name": "doyz", "link": "https://stackoverflow.com/users/7689318/doyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 701, "favorite_count": 0, "accepted_answer_id": 46694490, "answer_count": 3, "score": 1, "last_activity_date": 1507747887, "creation_date": 1507742126, "question_id": 46694059, "link": "https://stackoverflow.com/questions/46694059/ruby-on-rails-count-the-number-of-records-per-category-after-filtering", "title": "Ruby on rails: count the number of records per category after filtering", "body": "<p>I have a Ransack search form on browse.html.erb which filters articles by title and category. When i first enter the browse page without doing any search, i want a list of all categories with the count of articles belonging to the category to be rendered on the sidebar. After I submit a search, i want the list of categories and article count to be updated based on the search results. </p>\n\n<p>I am unable to understand why this error occurs:</p>\n\n<pre><code>undefined method `where' for #&lt;Article:0x007f1e60f193e0&gt;\n</code></pre>\n\n<p>browse.html.erb</p>\n\n<pre><code>  &lt;% @categories.each do |category| %&gt;\n    &lt;p&gt;&lt;%= link_to category.name, browse_articles_path(category: category.name) %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= category.articles.select{|article| article.where(title == params[:q][:title_cont])}.count %&gt;&lt;/p&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p><strong>articles_controller.rb</strong></p>\n\n<pre><code>  def browse\n    @q = Article.ransack(params[:q])\n    @articles = @q.result.includes(:categories, :users)\n    if params[:q][:title_cont] == present?\n      @categories = Category.joins(:articles).where('article.title LIKE ?', params[:q][:title_cont]).uniq\n    else\n      @categories = Category.includes(:articles).order('name ASC').all\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby", "lambda", "functional-programming", "currying"], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 4709288, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100004662579220/picture?type=large", "display_name": "Martin Trueman", "link": "https://stackoverflow.com/users/4709288/martin-trueman"}, "edited": false, "score": 0, "creation_date": 1507742984, "post_id": 46693814, "comment_id": 80336205, "body": "Thanks for your help in using &#39;last&#39;, and I note that the &#39;base = funcky.call(base,ray.first)&#39; part can be tucked into the second parameter of the fold_l invocation to avoid the assignment statement. The currying is still a problem. Following your suggestions, I now get an error on BOTH statements..."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 45, "user_id": 4709288, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100004662579220/picture?type=large", "display_name": "Martin Trueman", "link": "https://stackoverflow.com/users/4709288/martin-trueman"}, "edited": false, "score": 0, "creation_date": 1507745231, "post_id": 46693814, "comment_id": 80337422, "body": "If this solves your problem of mangling arguments then it&#39;s a solution to the original issue. If you have additional problems it&#39;s worth opening that up as a new question that&#39;s focused on that particular angle."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1507750617, "post_id": 46693814, "comment_id": 80340120, "body": "Not only is it &quot;rude to damage the arguments&quot; (nice wordsmithing!), but it is my understanding that a basic tenet of functional programming is that code must not have side-effects, such as the mutation of arguments."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 2, "last_activity_date": 1507741209, "creation_date": 1507741209, "answer_id": 46693814, "question_id": 46693712, "link": "https://stackoverflow.com/questions/46693712/folding-and-currying-with-ruby/46693814#46693814", "title": "folding and currying with Ruby", "body": "<p>Rework your <code>fold_l</code> function to not mangle the arguments its given:</p>\n\n<pre><code>def fold_l(ray, base, funcky)\n  return base if ray.empty?\n\n  base = funcky.call(base,ray.first)\n\n  fold_l(ray.last(ray.length-1),base,funcky)\nend\n</code></pre>\n\n<p>This uses <code>last</code> to return a copy of the arguments minus the first. It's also not necessary to use <code>lambda</code> here as you want a named function, so you may as well declare it formally. <code>lambda</code> is reserved for situations where you don't necessarily have a name for it.</p>\n\n<p>Note that in Ruby it's generally rude to damage the arguments your method's given unless there's an understanding that it's acceptable. Most methods make copies if they need to perform alterations.</p>\n"}, {"comments": [{"owner": {"reputation": 45, "user_id": 4709288, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100004662579220/picture?type=large", "display_name": "Martin Trueman", "link": "https://stackoverflow.com/users/4709288/martin-trueman"}, "edited": false, "score": 0, "creation_date": 1507856171, "post_id": 46699356, "comment_id": 80388596, "body": "Thanks for your answer. I liked the &#39;(x, *xs)&#39; trick, though Ruby syntax didn&#39;t make it any easier to figure out. I needed 4 nested parens in the argument to get a small sample to run ie:                                 def sample((x,*xs))"}], "tags": [], "owner": {"reputation": 106013, "user_id": 633183, "user_type": "registered", "accept_rate": 66, "profile_image": "https://i.stack.imgur.com/RHeN9.png?s=128&g=1", "display_name": "Thank you", "link": "https://stackoverflow.com/users/633183/thank-you"}, "is_accepted": false, "score": 1, "last_activity_date": 1507767447, "last_edit_date": 1507767447, "creation_date": 1507766682, "answer_id": 46699356, "question_id": 46693712, "link": "https://stackoverflow.com/questions/46693712/folding-and-currying-with-ruby/46699356#46699356", "title": "folding and currying with Ruby", "body": "<p>I would probably implement <code>foldl</code> like this \u2013 and always be careful when using recursion in languages that don't support tail call optimisation (<a href=\"https://stackoverflow.com/a/43596323/633183\">read more</a>)</p>\n\n<pre><code>foldl = -&gt; (f, acc, (x,*xs)) do\n  if x.nil? then\n    acc\n  else\n    foldl.call f, (f.call acc, x), xs\n  end\nend\n\nadd = -&gt; (x,y) do\n  x + y\nend\n\nlength =\n  foldl.curry\n    . (-&gt; (acc,_) { acc + 1 })\n    . (0) \n\ndata = [ 1, 2, 3, 4, 5 ]\n\np foldl.call add, 0, data\n# =&gt; 15\n\np length.call data\n# =&gt; 5\n</code></pre>\n\n<p>as per @tadman's recommendation, using a normal <code>def/end</code> block is probably better but that's just a matter of preference \u2013 note that currying is no longer necessary with this style</p>\n\n<pre><code>def foldl f, acc, (x,*xs)\n  if x.nil? then\n    acc\n  else\n    foldl f, (f.call acc, x), xs\n  end\nend\n\ndef add x, y\n  x + y\nend\n\ndef length xs\n  foldl (-&gt; (acc,_) { acc + 1 }), 0, xs\nend\n\ndata = [ 1, 2, 3, 4, 5 ]\n\np foldl method(:add), 0, data\n# =&gt; 15\n\np length data\n# =&gt; 5\n</code></pre>\n\n<hr>\n"}], "owner": {"reputation": 45, "user_id": 4709288, "user_type": "registered", "accept_rate": 33, "profile_image": "https://graph.facebook.com/100004662579220/picture?type=large", "display_name": "Martin Trueman", "link": "https://stackoverflow.com/users/4709288/martin-trueman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 509, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1507767447, "creation_date": 1507740818, "question_id": 46693712, "link": "https://stackoverflow.com/questions/46693712/folding-and-currying-with-ruby", "title": "folding and currying with Ruby", "body": "<p>I'm exploring Functional Programming with the Ruby language. Below is my version of a Fold in Ruby. I've tested it on a variety of functions, reverse, filter, map etc, and it returns the results as expected. But it mutates data and needs assignment statements. Can anyone help me to do the same but without violating the Functional paradigm? Can anyone help me with the partial application of the curried function at the bottom? I suspect there something obvious I'm missing. Thanks.</p>\n\n<pre><code>fold_l = lambda do |ray, base, funcky|\n    if ray == []\n        base\n    else\n        base = funcky.call(base,ray.first)\n        ray.shift\n        fold_l.call(ray,base,funcky)\n    end\nend\n\nabc = [1, 2, 3, 4, 5, 6, 7]\nmapper = lambda {|sum, x| sum &lt;&lt; x*x}\nlengthy = lambda {|sum, _| sum + 1}\n\np fold_l.call(abc,[],mapper)  ## works fine\np abc                         ## but mutates data!!\nabc = [1, 2, 3, 4, 5, 6, 7]\n\np curryFold = fold_l.curry.(abc).(0).(lengthy) ## works fine\nlengthC = curryFold.(base:0).(funcky:lengthy)  \np lengthC.call.(abc)  ## but this gives error\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1507739955, "post_id": 46693439, "comment_id": 80334548, "body": "have you tried to see the output of <code>JSON.load(File.read(&#39;config&#47;plaque_data.json&#39;))</code>? (in your irb console for example)"}, {"owner": {"reputation": 2525, "user_id": 3200391, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/dc8c798b0aaf54577e388f7bc177093c?s=128&d=identicon&r=PG", "display_name": "Charles Smith", "link": "https://stackoverflow.com/users/3200391/charles-smith"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1507740044, "post_id": 46693439, "comment_id": 80334601, "body": "@MrYoshiji this is what is printed in console <code>=&gt; {&quot;products&quot;=&gt;[{&quot;name&quot;=&gt;&quot;Large Plaque&quot;, &quot;price&quot;=&gt;&quot;2500&quot;}, {&quot;name&quot;=&gt;&quot;Small Plaque&quot;, &quot;price&quot;=&gt;&quot;1500&quot;}]}</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1507740737, "post_id": 46693439, "comment_id": 80334978, "body": "You really should specify the full path to that file, like <code>Rails.root.join(&#39;config&#47;plaque_data.json&#39;)</code>."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1507742583, "post_id": 46693439, "comment_id": 80335990, "body": "Also, if the <code>plaque_data.json</code> file is not meant to change, you might want to load it at the server start and cache it instead of reading it every time this action is hit"}], "answers": [{"tags": [], "owner": {"reputation": 184, "user_id": 351007, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8b5409cd6ece6474f12ab1cfb0cc0770?s=128&d=identicon&r=PG", "display_name": "jeremy04", "link": "https://stackoverflow.com/users/351007/jeremy04"}, "is_accepted": true, "score": 2, "last_activity_date": 1507740944, "creation_date": 1507740944, "answer_id": 46693739, "question_id": 46693439, "link": "https://stackoverflow.com/questions/46693439/iterate-over-json-array-in-rails5/46693739#46693739", "title": "Iterate over JSON Array in Rails5", "body": "<p>Since 'k' is a hash, you need to access k['name'] and k['price'] to extract price and name.</p>\n\n<p>Also when you use .each on an array, you normally only declare one block argument (You have two, k and v ). </p>\n\n<p>You normally write 2 block arguments for Hashes (and lots of other Enumerable methods), which is possibly what you thought you were iterating over, but </p>\n\n<pre><code>@plaqy['products']\n</code></pre>\n\n<p>is an array</p>\n"}, {"tags": [], "owner": {"reputation": 101, "user_id": 5020418, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-1LRcPwuyh94/AAAAAAAAAAI/AAAAAAAAAZc/6J1MX-wIpY4/photo.jpg?sz=128", "display_name": "Eric Firth", "link": "https://stackoverflow.com/users/5020418/eric-firth"}, "is_accepted": false, "score": 0, "last_activity_date": 1507744024, "creation_date": 1507744024, "answer_id": 46694533, "question_id": 46693439, "link": "https://stackoverflow.com/questions/46693439/iterate-over-json-array-in-rails5/46694533#46694533", "title": "Iterate over JSON Array in Rails5", "body": "<p>Just to expand on the above answer, in your view you are iterating over an array, but treating it like a hash. So you might want to change your view to something like:</p>\n\n<p><strong>views/plaqueorders/new.html.erb</strong></p>\n\n<pre><code>...\n&lt;% @plaqy['products'].each do |product|%&gt;\n Name: &lt;%= product['name'] %&gt;\n Price: $&lt;%= product['price'] %&gt;\n&lt;% end %&gt;\n...\n</code></pre>\n\n<p>Obviously the block will change based on how you want to render each product, but something like that will work.</p>\n\n<p>If you want to loop over the hashes because you don't know what the shape is (strange but okay), you'd want something like </p>\n\n<pre><code>...\n&lt;% @plaqy['products'].each do |product|%&gt;\n &lt;% product.each do |key, value| %&gt;\n   &lt;%= key %&gt;: &lt;%= value %&gt;\n &lt;% end %&gt;\n&lt;% end %&gt;\n...\n</code></pre>\n\n<p>Naming the variables of an each loop k, v is generally reserved for hashes. But in your code, the k wasn't the key of the hash but rather each individual product.</p>\n"}], "owner": {"reputation": 2525, "user_id": 3200391, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/dc8c798b0aaf54577e388f7bc177093c?s=128&d=identicon&r=PG", "display_name": "Charles Smith", "link": "https://stackoverflow.com/users/3200391/charles-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1526, "favorite_count": 0, "accepted_answer_id": 46693739, "answer_count": 2, "score": 1, "last_activity_date": 1507744024, "creation_date": 1507739855, "question_id": 46693439, "link": "https://stackoverflow.com/questions/46693439/iterate-over-json-array-in-rails5", "title": "Iterate over JSON Array in Rails5", "body": "<p>I know I am missing something probably very obvious.  I am trying to iterate over a JSON array in my Rails5 view. I tried several things but can't seem to get the proper items to render.  The below code renders <code>{\"name\"=&gt;\"Large Plaque\", \"price\"=&gt;\"2500\"} {\"name\"=&gt;\"Small Plaque\", \"price\"=&gt;\"1500\"}</code> to my view.</p>\n\n<p><strong>config/plaque_data.json</strong></p>\n\n<pre><code>{\n  \"products\": [\n    {\n      \"name\": \"Large Plaque\",\n      \"price\": \"2500\"\n    },\n    {\n      \"name\": \"Small Plaque\",\n      \"price\": \"1500\"\n    }\n  ]\n}\n</code></pre>\n\n<p><strong>controllers/plaqueorders_controller.rb</strong></p>\n\n<pre><code>...\ndef new\n @plaqy = JSON.load File.read('config/plaque_data.json')\nend\n...\n</code></pre>\n\n<p><strong>views/plaqueorders/new.html.erb</strong></p>\n\n<pre><code>...\n&lt;% @plaqy['products'].each do |k, v| { name: k, price: v } %&gt;\n &lt;%= k %&gt;\n&lt;% end %&gt;\n...\n</code></pre>\n"}, {"tags": ["json", "ruby", "validation", "jsonschema"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507738583, "post_id": 46692947, "comment_id": 80333751, "body": "Try testing with a tool like this <a href=\"http://www.jsonschemavalidator.net\" rel=\"nofollow noreferrer\">JSON Schema Validator</a>. It&#39;s found errors with your example even with the missing <code>,</code> added."}, {"owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507738797, "post_id": 46692947, "comment_id": 80333879, "body": "@tadman, I see where the comma was missing and i have added it in. That was a copy error. I will check out that site and see if i can find an answer."}, {"owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507741328, "post_id": 46692947, "comment_id": 80335342, "body": "I&#39;m still getting an invalid result"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507741463, "post_id": 46692947, "comment_id": 80335403, "body": "Have you tried using a generator like <a href=\"https://jsonschema.net/#/editor\" rel=\"nofollow noreferrer\">this one</a> to produce a baseline reference?"}, {"owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1507744162, "post_id": 46692947, "comment_id": 80336826, "body": "@tadman, I will give this a try to create an accurate base. I noticed the generator CAN create the &quot;required&quot; attribute and i think that is half of my problem. I will take another stab at this. thanks!"}], "answers": [{"comments": [{"owner": {"reputation": 14922, "user_id": 1320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387effdc9ab501aa1a2c36992208435d?s=128&d=identicon&r=PG", "display_name": "Jason Desrosiers", "link": "https://stackoverflow.com/users/1320693/jason-desrosiers"}, "edited": false, "score": 0, "creation_date": 1507870890, "post_id": 46695075, "comment_id": 80391861, "body": "<code>additionalItems</code> has no effect in this schema.  <code>additionaltems</code> only applies when <code>items</code> is an array.  Otherwise, it looks good!"}, {"owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "reply_to_user": {"reputation": 14922, "user_id": 1320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387effdc9ab501aa1a2c36992208435d?s=128&d=identicon&r=PG", "display_name": "Jason Desrosiers", "link": "https://stackoverflow.com/users/1320693/jason-desrosiers"}, "edited": false, "score": 0, "creation_date": 1507906639, "post_id": 46695075, "comment_id": 80411861, "body": "@Jason, thanks for the comment. While unnecessary, it shouldn&#39;t hurt to leave <code>additionalItems</code> in, correct? And is there a way to have this schema fail if any more properties exist in the json response being validated?"}, {"owner": {"reputation": 14922, "user_id": 1320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387effdc9ab501aa1a2c36992208435d?s=128&d=identicon&r=PG", "display_name": "Jason Desrosiers", "link": "https://stackoverflow.com/users/1320693/jason-desrosiers"}, "edited": false, "score": 0, "creation_date": 1508123063, "post_id": 46695075, "comment_id": 80469972, "body": "It doesn&#39;t hurt in the sense that leaving it will not change the validation behavior.  But, I can&#39;t imagine why you would want to have something in your schema that is used incorrectly and does nothing."}, {"owner": {"reputation": 14922, "user_id": 1320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387effdc9ab501aa1a2c36992208435d?s=128&d=identicon&r=PG", "display_name": "Jason Desrosiers", "link": "https://stackoverflow.com/users/1320693/jason-desrosiers"}, "edited": false, "score": 0, "creation_date": 1508124893, "post_id": 46695075, "comment_id": 80470386, "body": "You can add <code>&quot;additionalProperties&quot;: false</code> to you object schemas and validation will fail when the JSON has extra properties.  However, I always recommend that it is better to simply ignore these properties instead of forbidding them."}, {"owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "reply_to_user": {"reputation": 14922, "user_id": 1320693, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/387effdc9ab501aa1a2c36992208435d?s=128&d=identicon&r=PG", "display_name": "Jason Desrosiers", "link": "https://stackoverflow.com/users/1320693/jason-desrosiers"}, "edited": false, "score": 0, "creation_date": 1508169269, "post_id": 46695075, "comment_id": 80494302, "body": "I would like the validation to fail if the JSON has any extra properties other than what is specifically required in the schema. We want to know if anything has been added over time since this is coming from a service used by external areas who expect a very specific response."}], "tags": [], "owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "is_accepted": true, "score": 0, "last_activity_date": 1507747651, "last_edit_date": 1507747651, "creation_date": 1507746123, "answer_id": 46695075, "question_id": 46692947, "link": "https://stackoverflow.com/questions/46692947/ruby-json-schema-validator-not-returning-expected-result/46695075#46695075", "title": "Ruby JSON Schema Validator Not Returning Expected Result", "body": "<p>Using the suggestion provided by @tadman, I came upon this solution:</p>\n\n<pre><code>schema = {\n  '$schema': 'http://json-schema.org/draft-06/schema#',\n  'properties': {\n    'hierarchies': {\n      'additionalItems': false,\n      'items': {\n        'additionalItems': false,\n        'properties': {\n          'depth': { 'type': 'integer' },\n          'hierarchyId': { 'type': 'string' },\n          'hierarchyNodes': {\n            'additionalItems': false,\n            'items': {\n              'additionalItems': false,\n              'properties': {\n                'id': { 'type': 'string' },\n                'nodeId': { 'type': 'string' }\n              },\n              'required': ['nodeId', 'id'],\n              'type': 'object'\n            },\n            'type': 'array'\n          }\n        },\n        'required': ['hierarchyId', 'depth', 'hierarchyNodes'],\n        'type': 'object'\n      },\n      'type': 'array'\n    }\n  },\n  'required': ['hierarchies'],\n  'type': 'object'\n}\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 5858411, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/jjyS2.jpg?s=128&g=1", "display_name": "Austin L", "link": "https://stackoverflow.com/users/5858411/austin-l"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 559, "favorite_count": 0, "accepted_answer_id": 46695075, "answer_count": 1, "score": 0, "last_activity_date": 1507747651, "creation_date": 1507738243, "last_edit_date": 1507746334, "question_id": 46692947, "link": "https://stackoverflow.com/questions/46692947/ruby-json-schema-validator-not-returning-expected-result", "title": "Ruby JSON Schema Validator Not Returning Expected Result", "body": "<p>I am using the JSON schema validator gem to verify a response is coming back with expected keys and value types. My data should be coming back in the following JSON format:</p>\n\n<pre><code>{\n    \"hierarchies\": [\n        {\n            \"hierarchyId\": \"123ABC456DEF789\",\n            \"depth\": 1,\n            \"hierarchyNodes\": [\n                {\n                    \"nodeId\": \"ANID123456FORNODE789\",\n                    \"id\": \"12345678\"\n                }\n            ]\n        }\n    ]\n}\n</code></pre>\n\n<ul>\n<li>\"hierarchies\" can be an array of 0..N elements</li>\n<li>\"hierarchyNodes\" can also be an array of 0..N elements</li>\n</ul>\n\n<p>My current schema is the following (I am missing the node arrays currently):</p>\n\n<pre><code>schema = {\n  '$schema' =&gt; 'http://json-schema.org/draft-04/schema#',\n  type: 'object',\n  properties: {\n    hierarchies: {\n      type: 'array',\n      properties: {\n        object_items: {\n          type: 'object',\n          properties: {\n            hierarchyId: { type: 'string' },\n            depth: { type: 'integer' }\n          },\n          required: [:hierarchyId, :depth],\n          additionalProperties: false\n        }\n      },\n      required: [:object_items]\n    }\n  },\n  required: [:hierarchies]\n}\n</code></pre>\n\n<p>For some reason, the following returns true when the expected result should be false for all of these:</p>\n\n<blockquote>\n  <p>0> JSON::Validator.validate(schema, {hierarchies: [{}] })\n  => true</p>\n  \n  <p>0> JSON::Validator.validate(schema, {hierarchies: [{hierarchyId: 'hi', depth: 1, something: 'hey'}] })\n  => true</p>\n  \n  <p>0> JSON::Validator.validate(schema, {x: [{a: 'something'}] })\n  => true</p>\n</blockquote>\n\n<p>An expected True result would have the following schema, and only this schema:</p>\n\n<blockquote>\n  <p>JSON::Validator.validate(schema, {hierarchies: [{hierarchyId: 'id',\n  depth: 1}] })</p>\n</blockquote>\n\n<p>Can someone let me know where i have gone wrong with setting up the validation schema?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1507743511, "post_id": 46691783, "comment_id": 80336472, "body": "Usually <code>Object.const_get</code> is used to get top-level constants."}], "tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 5, "last_activity_date": 1507734571, "creation_date": 1507734571, "answer_id": 46691783, "question_id": 46691666, "link": "https://stackoverflow.com/questions/46691666/using-constantize-to-invoke-both-a-class-and-method-from-separate-strings/46691783#46691783", "title": "Using .constantize to invoke both a class and method from separate strings", "body": "<p>You can use <code>const_get</code>:</p>\n\n<pre><code>Class.const_get(class_name).new(params).public_send(method_name)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 3, "last_activity_date": 1507734589, "creation_date": 1507734589, "answer_id": 46691792, "question_id": 46691666, "link": "https://stackoverflow.com/questions/46691666/using-constantize-to-invoke-both-a-class-and-method-from-separate-strings/46691792#46691792", "title": "Using .constantize to invoke both a class and method from separate strings", "body": "<p><code>class_name.constantize.new(params).send(method_name)</code> should work?</p>\n\n<p>If you want to send args with the method, you can use, for example, <code>.send(method_name, params)</code></p>\n\n<p>If you're getting the data from external sources, I'm not sure how secure <code>constantize</code> is, but it works smoothly and is nicely readable. You can also use <code>classify</code> if the format of the class name could vary.</p>\n"}, {"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 2, "creation_date": 1507739380, "post_id": 46693162, "comment_id": 80334217, "body": "What is the reason? <code>NameError</code>(constantize) vs <code>NoMethodError</code>(safe_constantize)? IMO, <code>NameError</code> is clearer."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1507738981, "creation_date": 1507738981, "answer_id": 46693162, "question_id": 46691666, "link": "https://stackoverflow.com/questions/46691666/using-constantize-to-invoke-both-a-class-and-method-from-separate-strings/46693162#46693162", "title": "Using .constantize to invoke both a class and method from separate strings", "body": "<p>You tagged your question with <code>ruby-on-rails</code>, therefore I suggest using <a href=\"http://api.rubyonrails.org/v5.1/classes/ActiveSupport/Inflector.html#method-i-safe_constantize\" rel=\"nofollow noreferrer\"><code>safe_constantize</code></a> (available in Rails only) and <a href=\"https://ruby-doc.org/core-2.4.2/Object.html#method-i-public_send\" rel=\"nofollow noreferrer\"><code>public_send</code></a> (plain Ruby):</p>\n\n<pre><code>class_name = 'Some::Class'\nmethod_name = 'a_method'\nparams = {foo: 'bar'}\n\nclass_name.safe_constantize.new(params).public_send(method_name)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1507744636, "creation_date": 1507744636, "answer_id": 46694693, "question_id": 46691666, "link": "https://stackoverflow.com/questions/46691666/using-constantize-to-invoke-both-a-class-and-method-from-separate-strings/46694693#46694693", "title": "Using .constantize to invoke both a class and method from separate strings", "body": "<p>If the use of <a href=\"https://ruby-doc.org/core-2.4.2/Kernel.html#method-i-eval\" rel=\"nofollow noreferrer\">Kernel#eval</a> is safe you could do the following.</p>\n\n<pre><code>module Some\n  class Klass\n    def initialize(params)\n      @params = params\n    end\n    def a_method\n      puts \"keys = #{@params.keys}\"\n    end\n  end\nend\n\nclass_name = 'Some::Klass'\nparams = { foo: 'bar', oof: 'rab' }\nmethod_name = 'a_method'\n\nstr = \"%s.new(%s).%s\" % [class_name, params, method_name]\n  #=&gt; \"Some::Klass.new({:foo=&gt;\\\"bar\\\", :oof=&gt;\\\"rab\\\"}).a_method\"\neval str\nkeys = [:foo, :oof]\n</code></pre>\n\n<p>This approach obviously has wide application.</p>\n"}], "owner": {"reputation": 1035, "user_id": 1562489, "user_type": "registered", "accept_rate": 51, "profile_image": "https://i.stack.imgur.com/ApdKz.jpg?s=128&g=1", "display_name": "David Sigley", "link": "https://stackoverflow.com/users/1562489/david-sigley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1443, "favorite_count": 0, "accepted_answer_id": 46691783, "answer_count": 4, "score": 2, "last_activity_date": 1507744636, "creation_date": 1507734229, "question_id": 46691666, "link": "https://stackoverflow.com/questions/46691666/using-constantize-to-invoke-both-a-class-and-method-from-separate-strings", "title": "Using .constantize to invoke both a class and method from separate strings", "body": "<p>I'm trying to call a class and method which are both stored as strings in the DB. \nI would be looking to create an object from these 2 strings</p>\n\n<pre><code>class_name = 'Some::Class'\nmethod_name = 'a_method'\nparams = {foo: 'bar'}\n\nclass_name.new(params).method_name\n</code></pre>\n\n<p>I have used Contantize before for a similar approach, but I'm not sure exactly what the best solution is here?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 8194, "user_id": 2939522, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bd19d576c9c16df4826f16f9503c03d?s=128&d=identicon&r=PG&f=1", "display_name": "duxfox--", "link": "https://stackoverflow.com/users/2939522/duxfox"}, "is_accepted": true, "score": 9, "last_activity_date": 1507734558, "creation_date": 1507734558, "answer_id": 46691781, "question_id": 46691656, "link": "https://stackoverflow.com/questions/46691656/skip-before-action-in-child-controller/46691781#46691781", "title": "skip before action in child controller", "body": "<p>I found the answer, this is the syntax</p>\n\n<pre><code>class OtherController &lt; ApplicationController\n  skip_before_action :prep_data, only: [:custom_action_method]\n\n  def custom_action_method\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 8194, "user_id": 2939522, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/3bd19d576c9c16df4826f16f9503c03d?s=128&d=identicon&r=PG&f=1", "display_name": "duxfox--", "link": "https://stackoverflow.com/users/2939522/duxfox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1985, "favorite_count": 0, "accepted_answer_id": 46691781, "answer_count": 1, "score": 4, "last_activity_date": 1507734558, "creation_date": 1507734213, "question_id": 46691656, "link": "https://stackoverflow.com/questions/46691656/skip-before-action-in-child-controller", "title": "skip before action in child controller", "body": "<p>I have an application controller where I'm handling some authentication</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  before_action :prep_data\n  def prep_data\n   # code...\n   # authenticate\n  end\nend\n</code></pre>\n\n<p>and I have a controller that inherits from this one</p>\n\n<pre><code>class OtherController &lt; ApplicationController\n  def custom_action_method\n  end\nend\n</code></pre>\n\n<p>can I skip the <code>before_action</code> hook for the <code>OtherController</code> for a custom action method <code>custom_action_method</code></p>\n"}, {"tags": ["ruby", "string", "gsub"], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1507736044, "post_id": 46692255, "comment_id": 80332152, "body": "It&#39;s an <code>if</code> statement, not a method. Yes, you can."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "edited": false, "score": 0, "creation_date": 1507736146, "post_id": 46692255, "comment_id": 80332219, "body": "(So long as you first define the <code>my_function</code> method, and make it return <code>true</code>) try running this in a console. It works fine."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1507737220, "post_id": 46692255, "comment_id": 80332953, "body": "Thanks but you have hard-coded several things in your solution.  I was just listing &quot;b&quot; and &quot;c&quot; as an example.  There are a number of parametesr that can cause my_function(str1, str2) to be true.  What if I&#39;m just given a long string of text?  How do I make the logic work then?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1507737369, "post_id": 46692255, "comment_id": 80333055, "body": "@Dave Sorry, I don&#39;t understand... You obviously wouldn&#39;t hardcode those strings in your application; you&#39;d make it into a method that accepts parameters. I only gave hardcoded values so that the code sample is complete."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1507737578, "post_id": 46692255, "comment_id": 80333177, "body": "Hi @Tom, if &quot;strip_from_string&quot; only contains a &quot;string_to_change&quot; parameter, what goes in the &quot;....&quot; block?  That is essentially what my question is."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507739352, "post_id": 46692255, "comment_id": 80334194, "body": "The <code>....</code> block is what I wrote in my answer!! Based on your question, I presumed that <code>string_to_change</code>, <code>str1</code> and <code>str2</code> were three variables you are given. Are you instead, actually, saying that you need to scan for all consecutive words in the string and only then remove them if <code>my_function(word1, word2)</code> returns true?"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1507741076, "post_id": 46692255, "comment_id": 80335203, "body": "Yes you have summarized it correctly -- I&#39;m sayihng that I need to scan for all consecutive words in the string and only then remove them if my_function(word1, word2) returns true."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507743281, "post_id": 46692255, "comment_id": 80336353, "body": "OK, can you please edit your question to explain this clearly. I will update my answer too."}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1507750369, "post_id": 46692255, "comment_id": 80339996, "body": "Hey thanks so much for your expanded answer.  I included the output of waht I get from yoru question.  I used a very simple &quot;My_function&quot;, whcih was &#39;word1.eql?(&quot;hello&quot;) &amp;&amp; word2.eql?(&quot;world&quot;)&#39;.  However, the resulting string is getting a bit mangled.  Hopefully I&#39;m applyihng your logic properly.  Let me know if I&#39;m not."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507798049, "post_id": 46692255, "comment_id": 80357125, "body": "Oh... Yeah, sorry, you need to use <code>gsub!(full_match, &#39;&#39;)</code>, not <code>delete!(full_match)</code>. My bad. <a href=\"https://ruby-doc.org/core/String.html#method-i-delete\" rel=\"nofollow noreferrer\"><code>String#delete!</code></a> will delete <i>all supplied characters</i>, not just an exact string match."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507798080, "post_id": 46692255, "comment_id": 80357151, "body": "I would highly advise you to try experimenting with things like this yourself! Learning to program is not just about copy+pasting answers from StackOverflow ;)"}, {"owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1507903527, "post_id": 46692255, "comment_id": 80409722, "body": "Really appreciate your suggestions here.  Tried replacing &quot;delete!&quot; with &quot;gsub!&quot; but now nothing happens (nothign is replaced)."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "edited": false, "score": 0, "creation_date": 1507904725, "post_id": 46692255, "comment_id": 80410571, "body": "Did you add the second parameter of an empty string? It works fine for me."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1507797947, "last_edit_date": 1507797947, "creation_date": 1507735920, "answer_id": 46692255, "question_id": 46691639, "link": "https://stackoverflow.com/questions/46691639/how-do-i-apply-gsub-subject-to-a-function/46692255#46692255", "title": "How do I apply gsub subject to a function?", "body": "<p><strong>Edit:</strong> This is an updated answer, based on the comments below. I have left my original answer at the bottom.</p>\n\n<p>Scanning a string for \"two consecutive words\" is a bit tricky. Your best option is probably to use the <code>\\b</code> anchor in a regex, which signifies a \"word boundary\":</p>\n\n<pre><code>string_to_change = \"a   b   c d\"\n\nmatches = string_to_change.scan(/\\b((\\S+?)\\b.*?\\b(\\S+?))\\b/)\n  # =&gt; [[\"a   b\", \"a\", \"b\"], [\"c d\", \"c\", \"d\"]]\n</code></pre>\n\n<p>...Where the first string is the \"full match\" (including any whitespace or punctuation), the others are the two words.</p>\n\n<p>To break down that regex:</p>\n\n<ul>\n<li><code>\\b</code> means \"word boundary\". I have placed one of each side of both strings. <em>This solution assumes that <code>str1</code> and <code>str2</code> are both a single word</em>. (If they contain spaces, then I don't know what behaviour you expect?)</li>\n<li><code>\\S+?</code> means \"one or more non-whitespace character\". (Matching non-greedily, so it will stop matching at the <strong>first</strong> word boundary). </li>\n</ul>\n\n<p>You can then remove each \"full match\" from the string, if the method returns true for the two words:</p>\n\n<pre><code>matches.each do |full_match, word1, word2|\n  string_to_change.gsub!(full_match, '') if my_function(word1, word2)\nend\n</code></pre>\n\n<p>One thing that's <em>not accounted for</em> here (you didn't specify this well in your question...) was how to handle strings containing three or more words. For example, consider the following:</p>\n\n<pre><code>\"hello world this is a test\"\n</code></pre>\n\n<p>Suppose <code>my_function(word1, word2)</code> returns <code>true</code> only for the pairs: <code>\"world\", \"this\"</code> and <code>\"hello\", \"is\"</code>.</p>\n\n<p>My code above will <em>only</em> look at the pairs: <code>\"hello\", \"world\"</code>, <code>\"this\", \"is\"</code> and <code>\"a\", \"test\"</code>. But perhaps it should actually:</p>\n\n<ol>\n<li>Look at <em>all</em> pairs of words, i.e. match all words with the left- and right- hand side.</li>\n<li>Delete pairs of words <strong>repeatedly</strong>, i.e. after the initial pair: <code>\"world this\"</code> is removed, the string should be re-scanned and then <code>\"hello is\"</code> should also be removed?</li>\n</ol>\n\n<p>If such further enhancements are needed, then please explain them clearly in a new question (if you are struggling to solve the problem yourself).</p>\n\n<hr>\n\n<p><strong>Original answer:</strong></p>\n\n<pre><code>str1 = \"b\"\nstr2 = \"c\"\nstring_to_change = \"a   b   c d\"\n\nif my_function(str1, str2)\n  string_to_change.gsub!(/\\b#{str1}\\b\\s+\\b#{str2}\\b/, \"\")\nend\n</code></pre>\n\n<p>To break down that regex:</p>\n\n<ul>\n<li><code>\\b</code> means \"word boundary\". I have placed one of each side of both strings. <em>This solution assumes that <code>str1</code> and <code>str2</code> are both a single word</em>. (If they contain spaces, then I don't know what behaviour you expect?)</li>\n<li><code>\\s+</code> means \"one or more whitespace character\". You may wish to tweak this to allow other punctuation too, such as a comma or full stop. A fully generic solution to this issue could in fact be:</li>\n</ul>\n\n<p>.</p>\n\n<pre><code>string_to_change.gsub!(/\\b#{str1}\\b.(\\B.)*#{str2}\\b/, \"\")\n\n# Or equivalently:\n\nstring_to_change.gsub!(/\\b#{str1}\\b(.\\B)*.#{str2}\\b/, \"\")\n</code></pre>\n\n<p><code>.(\\B.)*</code> is instead collecting each character, one at a time, always checking that it's not the first letter of a word (i.e. is proceeded by a non-word boundary).</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 46692255, "answer_count": 1, "score": 0, "last_activity_date": 1507797947, "creation_date": 1507734158, "last_edit_date": 1507750264, "question_id": 46691639, "link": "https://stackoverflow.com/questions/46691639/how-do-i-apply-gsub-subject-to-a-function", "title": "How do I apply gsub subject to a function?", "body": "<p>I\"m using Rails 5 and Ruby 2.4.  I have a function</p>\n\n<pre><code>my_function(str1, str2)\n</code></pre>\n\n<p>that will return true or false given two string arguments.  What I would like to do is given a larger string, for instance</p>\n\n<pre><code>\"a   b   c d\"\n</code></pre>\n\n<p>I would like to replace two consecutive \"words\" (a word by my definition is a sequence of characters followed by a word boundary) with the empty string if the expression</p>\n\n<pre><code>my_function(str1, str2)\n</code></pre>\n\n<p>evaluates to true for those two consecutive words.  So for instance, if</p>\n\n<pre><code>my_function(\"b\", \"c\") \n</code></pre>\n\n<p>evaluates to true, I would like the above string to become</p>\n\n<pre><code>\"a    d\"\n</code></pre>\n\n<p>How do I do this?</p>\n\n<p><b>Edit:</b> I'm including the output based on Tom Lord's answer ...</p>\n\n<p>If I use</p>\n\n<pre><code>  def stuff(line)\n    matches = line.scan(/\\b((\\S+?)\\b.*?\\b(\\S+?))\\b/)\n    matches.each do |full_match, word1, word2|\n      line.delete!(full_match) if word1.eql?(\"hello\") &amp;&amp; word2.eql?(\"world\") \n    end\n  end\n</code></pre>\n\n<p>and line is</p>\n\n<pre><code>\"hello world this is a test\"\n</code></pre>\n\n<p>the resulting string line is</p>\n\n<pre><code>\"tisisatst\"\n</code></pre>\n\n<p>THis is not quite what I expected.  THe result should be </p>\n\n<pre><code>\" this is a test\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "activerecord", "ruby-on-rails-5"], "answers": [{"tags": [], "owner": {"reputation": 1230, "user_id": 3323777, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/9b57e9b0115e6d0356bd4d7502d5cbb9?s=128&d=identicon&r=PG&f=1", "display_name": "eugene-nikolaev", "link": "https://stackoverflow.com/users/3323777/eugene-nikolaev"}, "is_accepted": false, "score": 1, "last_activity_date": 1507753160, "creation_date": 1507753160, "answer_id": 46696865, "question_id": 46691557, "link": "https://stackoverflow.com/questions/46691557/rails-is-there-any-way-to-load-database-information-during-initialization/46696865#46696865", "title": "Rails: Is there any way to load database information during initialization?", "body": "<p>Unfortunately you didn't specify the tables' sizes.\nIf they have moderate sizes, I'd use the <code>Rails.cache</code> instead memoizing that fetches in controllers.</p>\n\n<p>You can read more details here:</p>\n\n<p><a href=\"https://devcenter.heroku.com/articles/caching-strategies#low-level-caching\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/caching-strategies#low-level-caching</a></p>\n\n<p>By the way the data should be memoized as class variables not instance variables (also I would store <code>Foo.all.to_a</code> - so array instead of AR relation).\n<br>\nThough I don't recommend to do it anyway because I am not sure how often Heroku could reload the app.\nAlso it is for sure a hack and <code>Rails.cache</code> is indeed more preferable way to implement such caching. Furthermore, it provides a method to invalidate.</p>\n"}], "owner": {"reputation": 4159, "user_id": 1959050, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/421de4eb68c9e4a007b0c90f05c15999?s=128&d=identicon&r=PG", "display_name": "Philip7899", "link": "https://stackoverflow.com/users/1959050/philip7899"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507753160, "creation_date": 1507733983, "question_id": 46691557, "link": "https://stackoverflow.com/questions/46691557/rails-is-there-any-way-to-load-database-information-during-initialization", "title": "Rails: Is there any way to load database information during initialization?", "body": "<p>I have some tables that are rarely changed.  Unfortunately, I need to call these tables quite often in controllers and that adds load time to certain pages.  For example, in one controller I have:</p>\n\n<pre><code>class PagesController &lt; ApplicationController\n    def index\n        @groups = Group.all\n        @events = Event.all\n    end\nend\n</code></pre>\n\n<p>It then occured to me that since groups and events rarely change, I could load these variables in initializers or as constants in a model so that they don't actually need to query the database in the moment.  I changed the above to the following:</p>\n\n<pre><code>class Group &lt; ApplicationRecord\n    ALL = Group.all\nend\nclass Event &lt; ApplicationRecord\n    ALL = Event.all\nend\n\nclass PagesController\n    def index\n        @groups = Group::ALL\n        @events = Event::ALL\n   end\nend\n</code></pre>\n\n<p>The above solution actually works in development.  In production on Heroku, however, it loads the variables in the controller.  I also tried setting up an initializer and defining <code>::Groups = Group.all</code> but this still loads the data when called in the controller.  Is there any way to load database info during initialization in a way that will work on Heroku?  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model", "scope", "polymorphic-associations"], "comments": [{"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507742537, "post_id": 46691022, "comment_id": 80335960, "body": "please share your association between user and TimeRegistration, user and SickRegistration,  SickRegistration and Mutation, TimeRegistration and  Mutation"}, {"owner": {"reputation": 31, "user_id": 8759019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4jetCVWGIfw/AAAAAAAAAAI/AAAAAAAADNI/gjMBfBYgJ9k/photo.jpg?sz=128", "display_name": "Ronald Boekhoudt", "link": "https://stackoverflow.com/users/8759019/ronald-boekhoudt"}, "reply_to_user": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507796558, "post_id": 46691022, "comment_id": 80356283, "body": "Edited: Added the association between user and TimeRegistration and user and SickRegistration"}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "edited": false, "score": 0, "creation_date": 1507801274, "post_id": 46691022, "comment_id": 80359194, "body": "check my solution"}], "answers": [{"comments": [{"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 0, "creation_date": 1507733427, "post_id": 46691315, "comment_id": 80330321, "body": "It will need to be Rails 4+"}, {"owner": {"reputation": 31, "user_id": 8759019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4jetCVWGIfw/AAAAAAAAAAI/AAAAAAAADNI/gjMBfBYgJ9k/photo.jpg?sz=128", "display_name": "Ronald Boekhoudt", "link": "https://stackoverflow.com/users/8759019/ronald-boekhoudt"}, "edited": false, "score": 0, "creation_date": 1507733934, "post_id": 46691315, "comment_id": 80330679, "body": "Thanks for your answer. The Query is looking for a model User (mutationable_type) in the mutations table, but there is no link from Mutation to User, only to TimeRegistration and SickRegistration are mutationable_types."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1507749612, "post_id": 46691315, "comment_id": 80339651, "body": "This will not work. If you want to query a nested association you have to pass it as: <code>where(mutationable: { user: { name: name } })</code>"}], "tags": [], "owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "is_accepted": false, "score": -1, "last_activity_date": 1507822726, "last_edit_date": 1507822726, "creation_date": 1507733337, "answer_id": 46691315, "question_id": 46691022, "link": "https://stackoverflow.com/questions/46691022/scope-on-polymorpic-model-in-ruby-on-rails/46691315#46691315", "title": "Scope on Polymorpic model in Ruby on Rails", "body": "<p>Try </p>\n\n<pre><code> scope :with_name, -&gt; (name) { where(mutationable: User.where(name: name)) }\n</code></pre>\n\n<blockquote>\n  <blockquote>\n    <p>edited. added )</p>\n  </blockquote>\n</blockquote>\n\n<p><strong>Edit2:</strong> </p>\n\n<p>My bad for my \"wrong quick solution\" due to not reading carefully enough, but I see the question has been edited and it is more clear now. </p>\n\n<p>Knowing what you want to achieve I would suggest a different approach. Mutable should not be hardcoded looking at specific models because it will limit the flexibility provided by the polymorphic associations and will break 'Law of Demeter' </p>\n\n<p>To get a collection of mutations of a particular set of XXXRegistrations I would do:</p>\n\n<p>a. Use STI so the queriable XXXRegistrations, extend a Registration model. Add a scope to filter by user. </p>\n\n<pre><code>SickRegistration &lt; Registration\n</code></pre>\n\n<p>b. Query Registration for user and then get the mutations </p>\n\n<pre><code>Registration.for_user(user).joins(:mutations) \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 31, "user_id": 8759019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4jetCVWGIfw/AAAAAAAAAAI/AAAAAAAADNI/gjMBfBYgJ9k/photo.jpg?sz=128", "display_name": "Ronald Boekhoudt", "link": "https://stackoverflow.com/users/8759019/ronald-boekhoudt"}, "edited": false, "score": 0, "creation_date": 1507802766, "post_id": 46706310, "comment_id": 80360186, "body": "Adding the results by + is resulting in an array instead of an Active Record. Additional scopes can&#39;t be performed on an array."}, {"owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "reply_to_user": {"reputation": 31, "user_id": 8759019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4jetCVWGIfw/AAAAAAAAAAI/AAAAAAAADNI/gjMBfBYgJ9k/photo.jpg?sz=128", "display_name": "Ronald Boekhoudt", "link": "https://stackoverflow.com/users/8759019/ronald-boekhoudt"}, "edited": false, "score": 0, "creation_date": 1507814435, "post_id": 46706310, "comment_id": 80367773, "body": "@RonaldBoekhoudt It gives ActiveRecord relation only. no worries.check once"}, {"owner": {"reputation": 31, "user_id": 8759019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4jetCVWGIfw/AAAAAAAAAAI/AAAAAAAADNI/gjMBfBYgJ9k/photo.jpg?sz=128", "display_name": "Ronald Boekhoudt", "link": "https://stackoverflow.com/users/8759019/ronald-boekhoudt"}, "edited": false, "score": 0, "creation_date": 1507820497, "post_id": 46706310, "comment_id": 80372179, "body": "I have multiple scopes on the model. After this scope, another scope is performed. This can&#39;t be done because the result of joining individual results is an Array. NoMethodError (undefined method `till_date&#39; for []:Array):"}], "tags": [], "owner": {"reputation": 2372, "user_id": 8478218, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/r0tjM.jpg?s=128&g=1", "display_name": "krishnar", "link": "https://stackoverflow.com/users/8478218/krishnar"}, "is_accepted": false, "score": 0, "last_activity_date": 1507812173, "last_edit_date": 1507812173, "creation_date": 1507801252, "answer_id": 46706310, "question_id": 46691022, "link": "https://stackoverflow.com/questions/46691022/scope-on-polymorpic-model-in-ruby-on-rails/46706310#46706310", "title": "Scope on Polymorpic model in Ruby on Rails", "body": "<h3>******TRY THIS*****</h3>\n\n<p><strong>Mutation.rb</strong></p>\n\n<pre><code>belongs_to :sick_registation, -&gt;{where(mutations: {mutationable_type: 'SickRegistation'})},\nforeign_key: 'mutationable_id'\n\nbelongs_to :time_registation, -&gt;{where(mutations: {mutationable_type: 'TimeRegistation'})},\nforeign_key: 'mutationable_id'\n\nscope :with_name, -&gt;(name){ \n  joins(sick_registation: :user).where(user:{name: name}) +\n  joins(time_registation: :user).where(user:{name: name})\n}\n</code></pre>\n\n<p><strong>Explanation</strong>:\nThere is no direct relation between your polymorphic relation and user.\nSo, I am joining the results of individual associated i.e sick and time.</p>\n"}], "owner": {"reputation": 31, "user_id": 8759019, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-4jetCVWGIfw/AAAAAAAAAAI/AAAAAAAADNI/gjMBfBYgJ9k/photo.jpg?sz=128", "display_name": "Ronald Boekhoudt", "link": "https://stackoverflow.com/users/8759019/ronald-boekhoudt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1507822726, "creation_date": 1507732567, "last_edit_date": 1507795562, "question_id": 46691022, "link": "https://stackoverflow.com/questions/46691022/scope-on-polymorpic-model-in-ruby-on-rails", "title": "Scope on Polymorpic model in Ruby on Rails", "body": "<p>Is it possible to make a scope for a polymorphic model in the following case?</p>\n\n<p>I have a polymorphic model named Mutations.</p>\n\n<pre><code>class Mutation &lt; ApplicationRecord\n    belongs_to :mutationable, :polymorphic =&gt; true\nend\n</code></pre>\n\n<p>A Mutation belongs to both models TimeRegistration and SickRegistration. A TimeRegistration and a  SickRegistration (Mutationable) belongs_to a User.</p>\n\n<pre><code>class SickRegistration &lt; ApplicationRecord\n  belongs_to :user\n  has_many :mutations, as: :mutationable\nend\n\nclass TimeRegistration &lt; ApplicationRecord\n  belongs_to :user\n  has_many :mutations, as: :mutationable\nend\n</code></pre>\n\n<p>I want to create a scope for the Mutation whereby i can retrieve a collection of Mutations by a given user name. I have more scopes already on the Mutation model, so this one must be joined with the other used scopes (used for filtering).</p>\n\n<p>So something like this on the Mutation Model:</p>\n\n<pre><code> scope :with_name, -&gt; (name) { joins(mutationable: :user).where('users.name = ?', name) }\n</code></pre>\n\n<p>This won't work. I've also tried to make a delegate on the Mutation model and to make a custom SQL Query with multiple joins on the mutationable models, but without success. I think there must be an (more easy) way to do this, but i can't find any good examples or ansewers for this problem. </p>\n\n<p>Please help. Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "asset-pipeline", "sprockets"], "comments": [{"owner": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 1, "creation_date": 1507732649, "post_id": 46690756, "comment_id": 80329790, "body": "try:  &lt;//= require autocomplete_locations/location_autocomplete&gt; instead of //= require autocomplete_locations/locationAutocomplete"}, {"owner": {"reputation": 412, "user_id": 4779465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rxj3q.png?s=128&g=1", "display_name": "Prasanth_Rubyist", "link": "https://stackoverflow.com/users/4779465/prasanth-rubyist"}, "edited": false, "score": 0, "creation_date": 1507743502, "post_id": 46690756, "comment_id": 80336466, "body": "Can you try //= require autocomplete_location"}, {"owner": {"reputation": 336, "user_id": 5842415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-WynCLhW5zNo/AAAAAAAAAAI/AAAAAAAAAVw/QVoLAEd8w7k/photo.jpg?sz=128", "display_name": "Mukarram Ali", "link": "https://stackoverflow.com/users/5842415/mukarram-ali"}, "reply_to_user": {"reputation": 412, "user_id": 4779465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rxj3q.png?s=128&g=1", "display_name": "Prasanth_Rubyist", "link": "https://stackoverflow.com/users/4779465/prasanth-rubyist"}, "edited": false, "score": 0, "creation_date": 1507789140, "post_id": 46690756, "comment_id": 80352377, "body": "@prasanthrubyist tried, can&#39;t find file error"}, {"owner": {"reputation": 336, "user_id": 5842415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-WynCLhW5zNo/AAAAAAAAAAI/AAAAAAAAAVw/QVoLAEd8w7k/photo.jpg?sz=128", "display_name": "Mukarram Ali", "link": "https://stackoverflow.com/users/5842415/mukarram-ali"}, "reply_to_user": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 0, "creation_date": 1507789226, "post_id": 46690756, "comment_id": 80352415, "body": "@LuisMenjivar did you try this? it doesn&#39;t work."}, {"owner": {"reputation": 412, "user_id": 4779465, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/rxj3q.png?s=128&g=1", "display_name": "Prasanth_Rubyist", "link": "https://stackoverflow.com/users/4779465/prasanth-rubyist"}, "edited": false, "score": 0, "creation_date": 1507794784, "post_id": 46690756, "comment_id": 80355236, "body": "Check your file name and also make sure your file in vender folder"}, {"owner": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 0, "creation_date": 1507910700, "post_id": 46690756, "comment_id": 80414300, "body": "@Mukarram I did not try it. But I saw that you named the file <code>location_autocomplete.js</code> and the error is telling you that it cannot find a file named <code>locationAutocomplete</code>"}, {"owner": {"reputation": 336, "user_id": 5842415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-WynCLhW5zNo/AAAAAAAAAAI/AAAAAAAAAVw/QVoLAEd8w7k/photo.jpg?sz=128", "display_name": "Mukarram Ali", "link": "https://stackoverflow.com/users/5842415/mukarram-ali"}, "reply_to_user": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 0, "creation_date": 1507967657, "post_id": 46690756, "comment_id": 80430640, "body": "@LuisMenjivar Sorry, it was my mistake. Update the question. It&#39;s not the reason though."}], "answers": [{"tags": [], "owner": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "is_accepted": false, "score": 1, "last_activity_date": 1507994980, "creation_date": 1507994980, "answer_id": 46746191, "question_id": 46690756, "link": "https://stackoverflow.com/questions/46690756/unable-to-require-a-js-file-from-a-gem-in-asset-pipeline/46746191#46746191", "title": "Unable to require a js file from a gem in asset pipeline", "body": "<p><code>//= require autocomplete_locations/location_autocomplete</code> is still not the same as <code>'autocomplete_locations/location_autocomplete</code>. The folder being required is <code>autocomplete_locations</code> and the name of the folder containing the file is <code>autocomplete_location</code>. I didn't catch that neither on my previous comment. If that does not solve the issue. Try requiring and testing a different javascript file just to make sure it is not a problem with the asset pipeline. </p>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 5842415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-WynCLhW5zNo/AAAAAAAAAAI/AAAAAAAAAVw/QVoLAEd8w7k/photo.jpg?sz=128", "display_name": "Mukarram Ali", "link": "https://stackoverflow.com/users/5842415/mukarram-ali"}, "is_accepted": false, "score": 1, "last_activity_date": 1508584528, "creation_date": 1508584528, "answer_id": 46862674, "question_id": 46690756, "link": "https://stackoverflow.com/questions/46690756/unable-to-require-a-js-file-from-a-gem-in-asset-pipeline/46862674#46862674", "title": "Unable to require a js file from a gem in asset pipeline", "body": "<p>Thanks for your suggestions, after struggling through several hit and trial, I solved this by adding below code in lib/autocomplete_locations.rb:</p>\n\n<pre><code>  class Engine &lt; ::Rails::Engine\n    environment = Sprockets::Environment.new\n    environment.append_path '../vendor/assets/javascripts'\n  end\n</code></pre>\n\n<p>Now I am able to require my assets in rails project.</p>\n"}], "owner": {"reputation": 336, "user_id": 5842415, "user_type": "registered", "accept_rate": 22, "profile_image": "https://lh6.googleusercontent.com/-WynCLhW5zNo/AAAAAAAAAAI/AAAAAAAAAVw/QVoLAEd8w7k/photo.jpg?sz=128", "display_name": "Mukarram Ali", "link": "https://stackoverflow.com/users/5842415/mukarram-ali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1508584528, "creation_date": 1507731816, "last_edit_date": 1507967607, "question_id": 46690756, "link": "https://stackoverflow.com/questions/46690756/unable-to-require-a-js-file-from-a-gem-in-asset-pipeline", "title": "Unable to require a js file from a gem in asset pipeline", "body": "<p>I have a local gem. And there is a js file: </p>\n\n<pre><code>  app/assets/javascripts/autocomplete_location/location_autocomplete.js\n</code></pre>\n\n<p>Now I am trying to use this gem in my rails project. I am able to use it's other ruby files, but can't include the above js file. I have tried putting engine.rb file in my gem. Still no luck.</p>\n\n<p>I tried</p>\n\n<pre><code>  //= require autocomplete_locations/location_autocomplete\n</code></pre>\n\n<p>in application.js file of my project. Still, when I start server and open any page, it throws this error:</p>\n\n<pre><code> Sprockets::FileNotFound &gt; couldn't find file 'autocomplete_locations/location_autocomplete' with type 'application/javascript' \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "race-condition"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507729994, "post_id": 46689868, "comment_id": 80327814, "body": "What is the actual error? A thread should be able to see the parent thread&#39;s var&#39;s until the child thread changes them (copy on write)."}, {"owner": {"reputation": 123, "user_id": 6350336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd3337e63d7e41cbf2a329f14215336?s=128&d=identicon&r=PG&f=1", "display_name": "A. Jasinski", "link": "https://stackoverflow.com/users/6350336/a-jasinski"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507788721, "post_id": 46689868, "comment_id": 80352197, "body": "@Kris When i run the test on one thread the request works, returns with status 401 and the matcher fails. With more than one thread the test throws <code>ActionDispatch::IllegalStateError: header already sent</code> error. Logging <code>current_user</code> returns <code>nil</code>"}, {"owner": {"reputation": 596, "user_id": 1924951, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b81cae1fb43808ac23a2188258ca9e4?s=128&d=identicon&r=PG", "display_name": "Robert Pankowecki", "link": "https://stackoverflow.com/users/1924951/robert-pankowecki"}, "edited": false, "score": 1, "creation_date": 1507792859, "post_id": 46689868, "comment_id": 80354215, "body": "The blog post was written for testing models/service objects. I am not sure if controllers tests are thread-safe in Rails. If there are many requests which request/response do you expect to be testing? It might be easier for you to test this logic if you extract non-http related concerns to a service and test that without doing HTTP requests."}, {"owner": {"reputation": 123, "user_id": 6350336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd3337e63d7e41cbf2a329f14215336?s=128&d=identicon&r=PG&f=1", "display_name": "A. Jasinski", "link": "https://stackoverflow.com/users/6350336/a-jasinski"}, "reply_to_user": {"reputation": 596, "user_id": 1924951, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/9b81cae1fb43808ac23a2188258ca9e4?s=128&d=identicon&r=PG", "display_name": "Robert Pankowecki", "link": "https://stackoverflow.com/users/1924951/robert-pankowecki"}, "edited": false, "score": 1, "creation_date": 1507795472, "post_id": 46689868, "comment_id": 80355654, "body": "@RobertPankowecki Moving the logic to a service object and rewriting the test for it fixed the issue. Thanks a lot!"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507797911, "post_id": 46689868, "comment_id": 80357033, "body": "I don&#39;t know but it sounds like dispatch might not be threadsafe, what version of Rails are you using? Also all gems used in that code path would need to be threadsafe to get deterministic tests."}, {"owner": {"reputation": 123, "user_id": 6350336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd3337e63d7e41cbf2a329f14215336?s=128&d=identicon&r=PG&f=1", "display_name": "A. Jasinski", "link": "https://stackoverflow.com/users/6350336/a-jasinski"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507798215, "post_id": 46689868, "comment_id": 80357227, "body": "@Kris I&#39;m using Rails 5.1.4 with ruby 2.4.2"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507805662, "post_id": 46689868, "comment_id": 80361972, "body": "Apparently this can be caused by older version Devise. But you found a work around anyway :)"}], "owner": {"reputation": 123, "user_id": 6350336, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ebd3337e63d7e41cbf2a329f14215336?s=128&d=identicon&r=PG&f=1", "display_name": "A. Jasinski", "link": "https://stackoverflow.com/users/6350336/a-jasinski"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1556, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1507729538, "creation_date": 1507729538, "question_id": 46689868, "link": "https://stackoverflow.com/questions/46689868/rspec-testing-race-conditions", "title": "RSpec - testing race conditions", "body": "<p>I'm trying to write a RSpec controller test checking for race conditions based on <a href=\"http://blog.arkency.com/2015/09/testing-race-conditions/\" rel=\"nofollow noreferrer\">this blog post</a>, but created <code>Thread</code>s don't \"see\" the <code>User</code>s created at the beginning of the test.\nThe blog post suggests to change <code>config.use_transactional_fixtures</code> to <code>false</code>, but even with this setting <code>User</code>s aren't visible.</p>\n\n<p>Here's the test:</p>\n\n<pre><code>it \"avoids race conditions\" do\n  u = create(:user, :without_settings)\n  u_2 = create(:user, :without_settings)\n\n  wait_for_it = true\n\n  threads = Array.new(4).map {\n    Thread.new do\n      true while wait_for_it\n      # send the request\n      signed_post(\n        u,\n        api_v1_blockades_path,\n        params: {\n          blockade: {\n            blocked_user_id: u_2.id,\n            reason: 11\n          }\n        }\n      )\n    end\n  }\n\n  wait_for_it = false\n  threads.map(&amp;:join)\n\n  expect(u.blockades.count).to eq(1)\nend\n</code></pre>\n\n<p>For authentication i'm using the <a href=\"https://github.com/mgomes/api_auth\" rel=\"nofollow noreferrer\">ApiAuth gem</a>:</p>\n\n<pre><code>before_action :api_authenticate\n\nprivate\n\ndef current_user\n  @current_user ||= User.find_by(id: ApiAuth.access_id(request))\nend\n\ndef api_authenticate\n  head(:unauthorized) unless current_user &amp;&amp; ApiAuth.authentic?(request, current_user.auth_token)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rspec", "shoulda"], "comments": [{"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507730146, "post_id": 46689722, "comment_id": 80327930, "body": "Are you deleting everything in the database before each test in run?"}, {"owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507730246, "post_id": 46689722, "comment_id": 80328028, "body": "looks like <code>self.rooms.count</code> self is nil? What is <code>self</code>?"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507730436, "post_id": 46689722, "comment_id": 80328156, "body": "@kris: I set this up a long time ago but I think yes. I&#39;ll add a gist that might be useful from my spec_helper right now"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "reply_to_user": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "edited": false, "score": 0, "creation_date": 1507730495, "post_id": 46689722, "comment_id": 80328195, "body": "well this method is inside my file models/room.rb so self is a Room. my method uses self.building.rooms.count =&gt; so self is the current room then self.building goes to find the building which the room belongs to and self.building.rooms.count goes to count all the rooms from the latter."}, {"owner": {"reputation": 1230, "user_id": 511203, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7ec96aadd672b8056173e4e8a5225d8b?s=128&d=identicon&r=PG", "display_name": "Mike Gorski", "link": "https://stackoverflow.com/users/511203/mike-gorski"}, "edited": false, "score": 0, "creation_date": 1507733607, "post_id": 46689722, "comment_id": 80330437, "body": "Your error mentions <code>self.rooms.count &lt; 15</code> while your sample code says <code>self.building.rooms.count &lt; 15</code>. Which is correct?"}, {"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1507733991, "post_id": 46689722, "comment_id": 80330725, "body": "Edited it. The right one is self.building.rooms.count. Sorry for mistyping/copying my original code."}], "answers": [{"comments": [{"owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "edited": false, "score": 0, "creation_date": 1507754163, "post_id": 46693800, "comment_id": 80341933, "body": "thanks. I&#39;m using Factory_girl(not here in this precise test, but I could use it). Will try tomorrow."}], "tags": [], "owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "is_accepted": false, "score": 1, "last_activity_date": 1507741158, "creation_date": 1507741158, "answer_id": 46693800, "question_id": 46689722, "link": "https://stackoverflow.com/questions/46689722/custom-validator-on-associated-model-make-other-rspec-model-tests-break/46693800#46693800", "title": "Custom validator on associated model make other Rspec model tests break", "body": "<p>For custom validations you'll need to instantiate a new <code>Room</code> object in your tests. If you don't have something like <code>factory_girl</code> or <code>fabrication</code> in place to create objects for your test, you can do this:</p>\n\n<pre><code>before(:each) do\n  @admin_user = AdminUser.create!(...attributes)\n  @building = Building.create!(...attributes)\n  @room = Room.create!(building_id: @building.id, admin_user_id: @admin_user.id)\nend\n</code></pre>\n\n<p>Then make sure you're calling your validation on the instance instead of your <code>Room</code> class:</p>\n\n<pre><code>def total_number_rooms_limited_to_15\n  errors[:base] &lt;&lt;  \"There can't be more...\".html_safe \n  unless ( building.present? &amp;&amp; building.rooms.count &lt; 15 )\nend\n</code></pre>\n"}], "owner": {"reputation": 3791, "user_id": 1467802, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/c370a1855b3094ca8b0e737822164a1a?s=128&d=identicon&r=PG", "display_name": "Mathieu", "link": "https://stackoverflow.com/users/1467802/mathieu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 557, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1507741158, "creation_date": 1507729165, "last_edit_date": 1507733935, "question_id": 46689722, "link": "https://stackoverflow.com/questions/46689722/custom-validator-on-associated-model-make-other-rspec-model-tests-break", "title": "Custom validator on associated model make other Rspec model tests break", "body": "<p>I have 2 models sharing a simple belong_to/has_many relation: Room belongs to Building</p>\n\n<p>I created a custom validator called total_number_rooms_limited_to_15 that ensures I can't create more than 15 rooms for a given Building.</p>\n\n<pre><code>class Room &lt; ActiveRecord::Base\n\n    # -- Relationships --------------------------------------------------------\n  belongs_to :admin_user,     :foreign_key =&gt; 'admin_user_id'\n  belongs_to :building,        :foreign_key =&gt; 'building_id'\n\n  # -- Validations ----------------------------------------------------------              \n\n  validates :room_filename,\n              presence: true             \n\n  # associated models primary key validates \n  validates :admin_user_id,\n     presence: true\n  validates :building_id,\n     presence: true  \n\n  validate :total_number_rooms_limited_to_15\n\n  private\n\n    def total_number_rooms_limited_to_15\n      errors[:base] &lt;&lt;  \"There can't be more than 15 rooms. There are already 15 .\n                        &lt;br/&gt;Please remove another one or drop trying adding this one.\".html_safe \n          unless ( self.building.rooms.count &lt; 15 )\n    end\n</code></pre>\n\n<p>But the problem is that after creating this new validator, all my \"usual\" basic tests fail. </p>\n\n<pre><code>require 'spec_helper'\n\nRSpec.describe Room, type: :model do\n\n  before(:each) do\n    @attr = {\n      room_filename:                               \"xyz\" \n    }\n  end  \n\n  # -- Models Tests --------------------------------------------------------\n  describe \"tests on ST's models validations for room_filename\" do\n    it { is_expected.to validate_presence_of(:room_filename) }    \n    it { is_expected.not_to allow_value(\" \").for(:room_filename) }    \n  end\n</code></pre>\n\n<p>All give me the following error message:</p>\n\n<pre><code>1) Room tests on ST's models validations for room_filename should validate that :room_filename cannot be empty/falsy\n     Failure/Error:\n       errors[:base] &lt;&lt;  \"There can't be more than 15 rooms. There are already 15 .\n                         &lt;br/&gt;Please remove another one or drop trying adding this one.\".html_safe unless ( self.building.rooms.count &lt; 15 )\n\n     NoMethodError:\n       undefined method `rooms' for nil:NilClass\n</code></pre>\n\n<p>I tried adding inside @attr the attribute a associated \"virtual\" building but it not work out;, getting the same error message:</p>\n\n<pre><code>before(:each) do\n    @attr = {\n      room_filename:                               \"xyz\",\n      building_id:                                 1\n    }\n</code></pre>\n\n<p><strong>ADDED INFO</strong></p>\n\n<pre><code>config.before(:suite) do\n    DatabaseCleaner.clean_with(:truncation, :except =&gt; %w(roles)) \n  end\n\n  config.before(:each) do\n    DatabaseCleaner.strategy = :transaction\n  end\n\n  config.before(:each, js: true) do\n    DatabaseCleaner.strategy = :truncation\n  end\n\n  config.before(:each) do\n    DatabaseCleaner.start\n  end\n\n  config.after(:each) do\n    DatabaseCleaner.clean\n  end\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507734551, "post_id": 46689595, "comment_id": 80331108, "body": "Your <code>@keywords</code> update logic (last line) is flawed. If <code>entry</code> is a hash, it could contain multiple <code>keyword =&gt; definition</code> pairs. Adding only <code>entry.keys.first</code> to <code>@keywords</code> would miss the other keywords. Likewise, if a keyword already exists, you would add it twice to <code>@keywords</code>."}, {"owner": {"reputation": 100, "user_id": 8733172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ada955e457e59debfeb55f29f24c500e?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/8733172/luke"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1507735781, "post_id": 46689595, "comment_id": 80331978, "body": "Nice catch, thanks.  Looking back, it&#39;s probably best to make keywords a getter that just returns the keys in entries rather than its own instance variable."}], "answers": [{"comments": [{"owner": {"reputation": 100, "user_id": 8733172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ada955e457e59debfeb55f29f24c500e?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/8733172/luke"}, "edited": false, "score": 0, "creation_date": 1507730175, "post_id": 46689974, "comment_id": 80327960, "body": "Ah, it seems I was mistaken.  The second implementation does work after all.  Thanks for the clarification!  In regards to the setter, is it only invoked outside of the class definition (i.e. on instances of the class)?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 100, "user_id": 8733172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ada955e457e59debfeb55f29f24c500e?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/8733172/luke"}, "edited": false, "score": 0, "creation_date": 1507730789, "post_id": 46689974, "comment_id": 80328425, "body": "@LukeEspina: no, it can be invoked from inside the class too. But in your case, you were setting ivars directly, without using the setters. The setter usage would be: <code>self.entries = ...</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 100, "user_id": 8733172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ada955e457e59debfeb55f29f24c500e?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/8733172/luke"}, "edited": false, "score": 0, "creation_date": 1507730870, "post_id": 46689974, "comment_id": 80328489, "body": "@LukeEspina: btw, don&#39;t forget to accept (and maybe upvote) helpful answers."}, {"owner": {"reputation": 100, "user_id": 8733172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ada955e457e59debfeb55f29f24c500e?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/8733172/luke"}, "edited": false, "score": 1, "creation_date": 1507730990, "post_id": 46689974, "comment_id": 80328570, "body": "Thanks for the reminder, I&#39;m brand new here.  You&#39;ve been very helpful.  I didn&#39;t realize there was a difference between using @var and self.var until your comment."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 3, "last_activity_date": 1507730951, "last_edit_date": 1507730951, "creation_date": 1507729857, "answer_id": 46689974, "question_id": 46689595, "link": "https://stackoverflow.com/questions/46689595/ruby-is-there-a-way-to-access-and-alter-member-variables-directly/46689974#46689974", "title": "Ruby: is there a way to access (and alter) member variables directly?", "body": "<blockquote>\n  <p>I use the public setter method by invoking the '=' operator</p>\n</blockquote>\n\n<p>No, you don't. No setter invocation there.</p>\n\n<blockquote>\n  <p>If the above example did work as intended, it would seem to be a bit more efficient than the first implementation.</p>\n</blockquote>\n\n<p>False. This example is doing <strong>exactly</strong> the same thing (save for the ivar assignment, which is a single instruction), Therefore, performance will be identical. Always measure performance, don't assume or guess.</p>\n\n<hr>\n\n<pre><code>  def add(entry)\n    if entry.instance_of?(Hash)\n      @entries.merge!(entry)\n    else\n      @entries.merge!({entry =&gt; nil})\n    end\n    @keywords.push(entry.keys.first).sort!\n  end\n</code></pre>\n\n<blockquote>\n  <p>In the above example, in practice none of the member variables @entries, @keywords are actually updated after a call to add is made</p>\n</blockquote>\n\n<p>They should update. Must be an error in the calling code. BTW, you should write it like this:</p>\n\n<pre><code>  def add(entry)\n    if entry.instance_of?(Hash)\n      entries.merge!(entry)\n    else\n      entries.merge!({entry =&gt; nil})\n    end\n    keywords.push(entry.keys.first).sort!\n  end\n</code></pre>\n\n<p>You have defined the getter methods. It's a shame that they're sitting unused.</p>\n"}], "owner": {"reputation": 100, "user_id": 8733172, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ada955e457e59debfeb55f29f24c500e?s=128&d=identicon&r=PG&f=1", "display_name": "Luke", "link": "https://stackoverflow.com/users/8733172/luke"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 46689974, "answer_count": 1, "score": 1, "last_activity_date": 1507739470, "creation_date": 1507728823, "last_edit_date": 1507739470, "question_id": 46689595, "link": "https://stackoverflow.com/questions/46689595/ruby-is-there-a-way-to-access-and-alter-member-variables-directly", "title": "Ruby: is there a way to access (and alter) member variables directly?", "body": "<p>I'm new to ruby (and OOP best practices) and I'm currently working through some exercises involving classes.  One of them has me making a dictionary that maps \"keywords\" to their \"definitions\".  Below is a simplified version:  </p>\n\n<pre><code>class Dictionary\n  attr_accessor :entries, :keywords\n\n  def initialize(opts = {})\n    @entries = opts\n    @keywords = opts.keys.sort\n  end\nend\n</code></pre>\n\n<p>Anyhow, I have a question about altering the value of member variables within a class implementation. Below I have an example of an instance method where I need to update the values of @entries and @keywords.  </p>\n\n<pre><code>def add(entry)\n    if entry.instance_of?(Hash)\n      @entries = @entries.merge!(entry)\n    else\n      @entries = entries.merge!({entry =&gt; nil})\n    end\n    @keywords = @entries.keys.sort\n  end\n</code></pre>\n\n<p>In the above example, I use the public setter method by invoking the '=' operator.<br>\nThis has some slight performance drawbacks as I am creating a new Hash when that r-value is evaluated.  </p>\n\n<p>I know that it's typically best to use setters when accessing instances of variables, but I'm wondering if it's possible (even if not advised) to alter member variables of a class without using setters?  For example, in a language like python you can call a member function on a member variable that alters its value if you don't use getters/setters. In ruby, however, it seems that getters and setters are required for access (unless I'm mistaken).  I was thinking that perhaps there is a way to implement a getter as returning a reference to the member variable so it behaves like direct access?  The way I am imagining this, the result would look something like this form an intuitive point of view:</p>\n\n<pre><code> def add(entry)\n    if entry.instance_of?(Hash)\n      @entries.merge!(entry)\n    else\n      @entries.merge!({entry =&gt; nil})\n    end\n    @keywords.push(entry.keys.first).sort!\n  end\n</code></pre>\n\n<p>(In the above example, in practice none of the member variables @entries, @keywords are actually updated after a call to add is made, but you get the idea of what its' supposed to do.)  If the above example did work as intended, it would seem to be a bit more efficient than the first implementation.</p>\n\n<p>Is there any way in Ruby to do something like this?  Thanks.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1507728749, "post_id": 46689305, "comment_id": 80326845, "body": "why so complex? <code>Range-&gt;Enumerator-&gt;Array-&gt;...</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "edited": false, "score": 0, "creation_date": 1507729259, "post_id": 46689305, "comment_id": 80327226, "body": "@Ilya: Good point. In this particular example there is, indeed, a simpler way, as evidenced by your answer. Still, <code>each_cons</code> is worth learning about. Super-useful at times. :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1507730296, "post_id": 46689305, "comment_id": 80328058, "body": "IMO, <code>each_cons</code> communicates the intent more clearly, and I don&#39;t find <code>years.each_cons(2).map { |pair| pair.join(&#39;-&#39;) }</code> to be complex at all."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1507728007, "creation_date": 1507728007, "answer_id": 46689305, "question_id": 46689270, "link": "https://stackoverflow.com/questions/46689270/how-can-i-separate-integers-as-dual-parts-in-ruby/46689305#46689305", "title": "How can I separate integers as dual parts in ruby", "body": "<p><a href=\"https://ruby-doc.org/core-2.4.2/Enumerable.html#method-i-each_cons\" rel=\"nofollow noreferrer\">Enumerable#each_cons</a></p>\n\n<blockquote>\n  <p>Iterates the given block for each array of consecutive  elements. </p>\n</blockquote>\n\n<pre><code>(2014..Time.now.year + 1).each_cons(2).to_a # =&gt; [[2014, 2015], [2015, 2016], [2016, 2017], [2017, 2018]]\n</code></pre>\n\n<p>I believe you can handle the rest.</p>\n"}, {"tags": [], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "is_accepted": true, "score": 2, "last_activity_date": 1507728890, "last_edit_date": 1507728890, "creation_date": 1507728275, "answer_id": 46689407, "question_id": 46689270, "link": "https://stackoverflow.com/questions/46689270/how-can-i-separate-integers-as-dual-parts-in-ruby/46689407#46689407", "title": "How can I separate integers as dual parts in ruby", "body": "<p>No need to reinvent the wheel, just use <code>map</code>:</p>\n\n<pre><code>(2014..Time.now.year).map { |year| \"#{year}-#{year + 1}\" } \n#=&gt; [\"2014-2015\", \"2015-2016\", \"2016-2017\", \"2017-2018\"]\n</code></pre>\n"}], "owner": {"reputation": 75, "user_id": 6455352, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/91e3f00833da702c2f2bcce21e27cfbc?s=128&d=identicon&r=PG&f=1", "display_name": "Ecmel Kaytazo\u011flu", "link": "https://stackoverflow.com/users/6455352/ecmel-kaytazo%c4%9flu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 46689407, "answer_count": 2, "score": 0, "last_activity_date": 1511339048, "creation_date": 1507727905, "last_edit_date": 1511339048, "question_id": 46689270, "link": "https://stackoverflow.com/questions/46689270/how-can-i-separate-integers-as-dual-parts-in-ruby", "title": "How can I separate integers as dual parts in ruby", "body": "<p>I have defined an array:</p>\n\n<pre><code>years = (2014..Time.now.year + 1).to_a\n#=&gt; [2014, 2015, 2016, 2017, 2018]\n</code></pre>\n\n<p>I want to show an output like this:</p>\n\n<pre><code>['2014-2015', '2015-2016', '2016-2017', '2017-2018']\n</code></pre>\n\n<p>Do you have any good advice?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "websocket", "ruby-on-rails-5", "actioncable"], "comments": [{"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1508270698, "post_id": 46689243, "comment_id": 80543482, "body": "Have a look at Guest user creation... <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Create-a-guest-user\" rel=\"nofollow noreferrer\">as explained by the Devise Wiki</a>"}, {"owner": {"reputation": 268, "user_id": 4786224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a19cd69274ae3af0731891a5e23500a0?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/4786224/boris"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1508314282, "post_id": 46689243, "comment_id": 80558067, "body": "Thanks for your feedback, @Myst, unfortunately I cannot create (guest) users for every single websocket connection ... I will need to temporarily identify the connection by UUID without using Devise"}, {"owner": {"reputation": 215, "user_id": 5144754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de3bd1b351ae4f4c6dd8d7ba9055c61?s=128&d=identicon&r=PG", "display_name": "Osmond", "link": "https://stackoverflow.com/users/5144754/osmond"}, "edited": false, "score": 0, "creation_date": 1520187088, "post_id": 46689243, "comment_id": 85202554, "body": "@Boris Did you find any solution? I need this for my electron app"}, {"owner": {"reputation": 268, "user_id": 4786224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a19cd69274ae3af0731891a5e23500a0?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/4786224/boris"}, "reply_to_user": {"reputation": 215, "user_id": 5144754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0de3bd1b351ae4f4c6dd8d7ba9055c61?s=128&d=identicon&r=PG", "display_name": "Osmond", "link": "https://stackoverflow.com/users/5144754/osmond"}, "edited": false, "score": 0, "creation_date": 1520326405, "post_id": 46689243, "comment_id": 85258083, "body": "@Osmond Not a satisfying one, unfortunately. I moved the token creation for the anonymous channel to the <code>subscribed</code> method. It works, but it&#39;s not ideal."}], "answers": [{"comments": [{"owner": {"reputation": 268, "user_id": 4786224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a19cd69274ae3af0731891a5e23500a0?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/4786224/boris"}, "edited": false, "score": 0, "creation_date": 1520853741, "post_id": 49206829, "comment_id": 85471003, "body": "Thanks, I agree it makes sense to keep the logic in the connect method. In you solution, a user with an active Devise session would not have a <code>uuid</code> when using the anonymous channel. How would you deal with this, fallback to <code>current_user.id</code>?"}, {"owner": {"reputation": 268, "user_id": 4786224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a19cd69274ae3af0731891a5e23500a0?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/4786224/boris"}, "edited": false, "score": 0, "creation_date": 1520860555, "post_id": 49206829, "comment_id": 85475468, "body": "After reflection, I simply decided to assign <code>uuid</code> no matter if a Devise session exists or not. Accepting your answer, thanks for your help."}, {"owner": {"reputation": 1442, "user_id": 293635, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a1138c5194d88faf551e3c5a4f2b2f33?s=128&d=identicon&r=PG", "display_name": "siannopollo", "link": "https://stackoverflow.com/users/293635/siannopollo"}, "edited": false, "score": 1, "creation_date": 1523212609, "post_id": 49206829, "comment_id": 86455846, "body": "If you want an actual UUID you should be using <code>SecureRandom.uuid</code>."}, {"owner": {"reputation": 3232, "user_id": 2430657, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8bfe1d100d07683f88d44c5fb17bc416?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2430657/alexander"}, "edited": false, "score": 0, "creation_date": 1565118094, "post_id": 49206829, "comment_id": 101249157, "body": "Thank you very much for this answer! It was of critical help to me. For those that don&#39;t use devise, I stored the UUID in a cookie upon accessing a specific route and then used the cookie to authenticate the anonymous user. This worked great for my use case."}, {"owner": {"reputation": 902, "user_id": 1141295, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/97b9b8f80603342071aef3122c401e34?s=128&d=identicon&r=PG", "display_name": "hananamar", "link": "https://stackoverflow.com/users/1141295/hananamar"}, "edited": false, "score": 1, "creation_date": 1575451380, "post_id": 49206829, "comment_id": 104567431, "body": "I noticed your solution never reaches the <code>reject_unauthorized_connection</code> command. Not a big deal if you are fine with accepting all connections."}], "tags": [], "owner": {"reputation": 108, "user_id": 4388763, "user_type": "registered", "profile_image": "https://graph.facebook.com/649949719/picture?type=large", "display_name": "Yazed Jamal", "link": "https://stackoverflow.com/users/4388763/yazed-jamal"}, "is_accepted": true, "score": 5, "last_activity_date": 1520669374, "creation_date": 1520669374, "answer_id": 49206829, "question_id": 46689243, "link": "https://stackoverflow.com/questions/46689243/using-actioncable-with-multiple-identification-methods/49206829#49206829", "title": "Using ActionCable with multiple identification methods", "body": "<p>Hi I came into the same problem, after looking at your solution in rails github comment, I assume it is better to create the token and keep the logic in the connect method.</p>\n\n<p>So what I do was just utillize the the warden checking and if it is nil just create the anonymous token and otherwise. For this to work, I need to declare 2 identifier :uuid and :current_user</p>\n\n<pre><code>class Connection &lt; ActionCable::Connection::Base\nidentified_by :current_user, :uuid\n\n\n def connect\n\n   if !env['warden'].user\n     self.uuid = SecureRandom.urlsafe_base64\n   else\n     self.current_user = find_verified_user\n   end\n\n end\n\n protected\n\n def find_verified_user # this checks whether a user is authenticated with devise\n\n   if verified_user = env['warden'].user\n\n     verified_user\n   else\n\n     reject_unauthorized_connection\n   end\n end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 268, "user_id": 4786224, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a19cd69274ae3af0731891a5e23500a0?s=128&d=identicon&r=PG&f=1", "display_name": "Boris", "link": "https://stackoverflow.com/users/4786224/boris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2165, "favorite_count": 0, "accepted_answer_id": 49206829, "answer_count": 1, "score": 7, "last_activity_date": 1520669374, "creation_date": 1507727824, "last_edit_date": 1507794022, "question_id": 46689243, "link": "https://stackoverflow.com/questions/46689243/using-actioncable-with-multiple-identification-methods", "title": "Using ActionCable with multiple identification methods", "body": "<p>I develop a Ruby on Rails 5.1 application using ActionCable. <a href=\"https://rubytutorial.io/actioncable-devise-authentication/\" rel=\"noreferrer\">User authentification via Devise</a> works fine for several channels. Now, I want to add a <strong>second type of channels</strong> which does not require any user authentification. More precisely, I would like to enable anonymous website visitors to chat with support staff.</p>\n\n<p>My current implementation of <code>ApplicationCable::Connection</code> for authenticated users looks like this:</p>\n\n<pre><code># app/channels/application_cable/connection.rb\n\nmodule ApplicationCable\n  class Connection &lt; ActionCable::Connection::Base\n    identified_by :current_user\n\n    def connect\n      self.current_user = find_verified_user\n    end\n\n    protected\n\n    def find_verified_user\n      user = User.find_by(id: cookies.signed['user.id'])\n      return user if user\n      fail 'User needs to be authenticated.'\n    end\n  end\nend\n</code></pre>\n\n<p>Anonymous users will be identified by some random UUID (<a href=\"https://ruby-doc.org/stdlib-2.2.3/libdoc/securerandom/rdoc/SecureRandom.html#method-c-urlsafe_base64\" rel=\"noreferrer\"><code>SecureRandom.urlsafe_base64</code></a>).</p>\n\n<p><strong>Question:</strong></p>\n\n<p>How do I best add this new type of channels? Could I add a boolean flag <code>require_authentification</code> somewhere, override it in my inherited channel class for anonymous communication, and switch the identification method in <code>Connection</code> depending on this attribute? Or would I rather have to implement a completely new module, say <code>AnonymousApplicationCable</code>?</p>\n"}, {"tags": ["ruby", "bundler"], "comments": [{"owner": {"reputation": 968, "user_id": 2226554, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/22287da4edff4cb0ba1ea1767d85a101?s=128&d=identicon&r=PG", "display_name": "Gaurav24", "link": "https://stackoverflow.com/users/2226554/gaurav24"}, "edited": false, "score": 0, "creation_date": 1508589106, "post_id": 46689198, "comment_id": 80673916, "body": "why don&#39;t you try rvm gemsets <a href=\"https://rvm.io/gemsets\" rel=\"nofollow noreferrer\">rvm.io/gemsets</a> ?"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 0, "last_activity_date": 1507740456, "creation_date": 1507740456, "answer_id": 46693613, "question_id": 46689198, "link": "https://stackoverflow.com/questions/46689198/how-to-enforce-bundle-install-location/46693613#46693613", "title": "How to enforce bundle install location", "body": "<p>Who's to say it will be accidental? It really depends on what context you're talking about here. I have my Ruby set up so that <code>bundle install</code> works without requiring <code>sudo</code>, it's all done through <a href=\"https://github.com/rbenv/rbenv\" rel=\"nofollow noreferrer\"><code>rbenv</code></a> automatically. The same is true with <a href=\"https://rvm.io\" rel=\"nofollow noreferrer\"><code>rvm</code></a> if done as a user-level install.</p>\n\n<p>When it comes to deploying apps and you want to make sure it's deployed correctly, that's where tools like <a href=\"http://capistranorb.com\" rel=\"nofollow noreferrer\">Capistrano</a> come into play: Create a deployment script that will apply the correct procedure every time.</p>\n\n<p>Checking in a <code>.bundle/config</code> is really rude from a dev perspective, just like checking in any other user-specific preferences you might have. It causes no end of conflict with other team members.</p>\n"}], "owner": {"reputation": 5829, "user_id": 1154610, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/fe52b3d3928f49a5057987549d39d1cb?s=128&d=identicon&r=PG", "display_name": "Remco Haszing", "link": "https://stackoverflow.com/users/1154610/remco-haszing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 31, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507740456, "creation_date": 1507727677, "question_id": 46689198, "link": "https://stackoverflow.com/questions/46689198/how-to-enforce-bundle-install-location", "title": "How to enforce bundle install location", "body": "<p>I come from a Python and JavaScript background.</p>\n\n<p>When developing a JavaScript project, dependencies are installed in a <code>node_modules</code> directory in the project root.</p>\n\n<p>When developing Python project, typically virtualenvwrapper is used. In this case dependencies are installed in a virtual environment, which is located in <code>~/.virtualenvs/&lt;project_name&gt;</code> by default.</p>\n\n<p>Now I need to use a ruby tool for a project. The tool that appears to be the most promising for a similar setup as described above, is bundler.</p>\n\n<p>However, the default installation location for bundler is system-wide. I consider this to be harmful.</p>\n\n<p>For one of my systems, it will prompt for a password, at which point I can still abort.</p>\n\n<p>However, for my other system I can write into the global ruby installation. I'm using a homebrew installed ruby here. Bundle will just install dependencies globally.</p>\n\n<p>I know I can specify the installation location by adding <code>--path</code>, but this is easy to forget.</p>\n\n<p>One way to enforce an installation path is by committing <code>.bundle/config</code>. It would just have to contain this:</p>\n\n<pre><code>---\nBUNDLE_PATH: \".\"\n</code></pre>\n\n<p>However, some googling around shows that it's not adviced to commit this file.</p>\n\n<p>What is the recommended way to prevent accidental global installations using bundler?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "answers": [{"tags": [], "owner": {"reputation": 366, "user_id": 5776145, "user_type": "registered", "profile_image": "https://graph.facebook.com/1011697098887441/picture?type=large", "display_name": "Dmitry Umarov", "link": "https://stackoverflow.com/users/5776145/dmitry-umarov"}, "is_accepted": true, "score": 1, "last_activity_date": 1507732083, "creation_date": 1507732083, "answer_id": 46690846, "question_id": 46688803, "link": "https://stackoverflow.com/questions/46688803/writing-sql-query-with-a-date-range-using-postgresql-and-ruby-on-rails/46690846#46690846", "title": "Writing SQL query with a date range using postgresql and ruby on rails", "body": "<p>You must use <a href=\"https://www.postgresql.org/docs/current/static/sql-select.html#sql-distinct\" rel=\"nofollow noreferrer\">DISTINCT ON</a> clause.</p>\n\n<pre><code>SELECT DISTINCT ON (created_at, meter_id) created_at, meter_id, voltage\nFROM meter_info\nWHERE created_at BETWEEN '2017-10-10' AND '2017-10-11'\nORDER BY created_at, meter_id, id DESC\n;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 187, "user_id": 996779, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bfbb5496684d049b07e9ad4e39299273?s=128&d=identicon&r=PG", "display_name": "Jo&#227;o Costa", "link": "https://stackoverflow.com/users/996779/jo%c3%a3o-costa"}, "is_accepted": false, "score": 1, "last_activity_date": 1507734392, "creation_date": 1507734392, "answer_id": 46691724, "question_id": 46688803, "link": "https://stackoverflow.com/questions/46688803/writing-sql-query-with-a-date-range-using-postgresql-and-ruby-on-rails/46691724#46691724", "title": "Writing SQL query with a date range using postgresql and ruby on rails", "body": "<p>If you want to use rails active record you can do it this way:</p>\n\n<pre><code>start_date = Date.new 2017, 10, 10\nend_date = Date.new 2017, 10, 11\nMeterInfo.select(\"DISTINCT ON (created_at::date, meter_id) * \").where(created_at: start_date..end_date).order(\"created_at::date, meter_id, id DESC\")\n</code></pre>\n\n<p>Note that I'm assuming your 'created_at' column is a datetime and thus need to be converted to a date for grouping using postgresql ::date.</p>\n"}], "owner": {"reputation": 571, "user_id": 1463066, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/xz6x0.jpg?s=128&g=1", "display_name": "monsur", "link": "https://stackoverflow.com/users/1463066/monsur"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 46690846, "answer_count": 2, "score": 0, "last_activity_date": 1507734392, "creation_date": 1507726683, "question_id": 46688803, "link": "https://stackoverflow.com/questions/46688803/writing-sql-query-with-a-date-range-using-postgresql-and-ruby-on-rails", "title": "Writing SQL query with a date range using postgresql and ruby on rails", "body": "<p>I am having problem writing a sql statement with the following tables.\nI have two tables one is <code>meter</code> another one is <code>meter_info</code>.\n<code>meter</code> table has below columns </p>\n\n<pre><code>id, name, created_at\n</code></pre>\n\n<p>and <code>meter_info</code> has bellow columns</p>\n\n<pre><code>id, voltage, meter_id, created_at \n</code></pre>\n\n<p>data is being saved continuously to <code>meter_info</code> table. \nI want to write a query that will take a date range and give me exactly one meter info within each date for each of the meter.</p>\n\n<p>so let's say I have three meters in my meter table.</p>\n\n<pre><code> id     name      created_at\n 1      meter-a   2017-10-10\n 2      meter-b   2017-10-11\n</code></pre>\n\n<p>and in my meter table i have alot of data </p>\n\n<pre><code>id    voltage    created_at     meter_id\n1      15         2017-10-10      1\n2      16         2017-10-10      1\n3      14         2017-10-10      2\n4      15         2017-10-10      2\n5      13         2017-10-11      1\n6      11         2017-10-11      1\n7      13         2017-10-11      2\n8      12         2017-10-11      2\n</code></pre>\n\n<p>Now I want to write a query that will take a date range parameter and out put like bellow(data range is <code>2017-10-10</code>to <code>2017-10-11</code>)</p>\n\n<pre><code>created_at     meter_id     voltage\n2017-10-10         1           16\n2017-10-10         2           15\n2017-10-11         1           11\n2017-10-11         2           12\n</code></pre>\n\n<p>so I want the last record of each meter within the date.\nI don't know how to write the sql query.\nI am using <code>Postgresql</code> and <code>Ruby on Rails</code>.\nThanks a ton in advance.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1507725075, "post_id": 46688137, "comment_id": 80324003, "body": "Each call to <code>pets</code> assigns a new hash to <code>@pets</code>. Either move the assignment into <code>initialize</code> or use <code>@pets ||= { ... }</code>."}, {"owner": {"reputation": 3214, "user_id": 753177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/6170482ed9f92c8f61b91d91772cf764?s=128&d=identicon&r=PG", "display_name": "John", "link": "https://stackoverflow.com/users/753177/john"}, "edited": false, "score": 3, "creation_date": 1507725959, "post_id": 46688137, "comment_id": 80324616, "body": "Also, I believe you want to do <code>self.pets[:fishes].push(Fish.new(name))</code>.  Otherwise, you&#39;re just setting the key to the single <code>Fish</code> instance every time."}, {"owner": {"reputation": 789, "user_id": 8758793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZupKk.jpg?s=128&g=1", "display_name": "Matt Hough", "link": "https://stackoverflow.com/users/8758793/matt-hough"}, "edited": false, "score": 0, "creation_date": 1507726725, "post_id": 46688137, "comment_id": 80325178, "body": "Thank you Stefan. That worked. I hadn&#39;t learned ||= yet. Is there another way to do this? I feel like this is a cheat way out because I wrote bad code?  Also, John, I just noticed that when fixing the code up. Thanks anyway!"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1507727075, "post_id": 46688934, "comment_id": 80325480, "body": "That&#39;s not a &quot;cheat way&quot;. In fact, it&#39;s a very common ruby idiom, called &quot;memoization&quot;."}], "tags": [], "owner": {"reputation": 789, "user_id": 8758793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZupKk.jpg?s=128&g=1", "display_name": "Matt Hough", "link": "https://stackoverflow.com/users/8758793/matt-hough"}, "is_accepted": false, "score": 1, "last_activity_date": 1507726977, "creation_date": 1507726977, "answer_id": 46688934, "question_id": 46688137, "link": "https://stackoverflow.com/questions/46688137/cant-add-to-instances-hash-ruby/46688934#46688934", "title": "Can&#39;t add to instance&#39;s hash (ruby)", "body": "<p>As Stefan pointed out, each call to <code>pets</code> asssigns a new hash to <code>@pets</code>. Adding <code>||=</code> in the pets method fixed this.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def pets\n  @pets ||= {cats: [], dogs: [], fishes: []}\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 33085, "user_id": 2423164, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Nxbnp.jpg?s=128&g=1", "display_name": "ndnenkov", "link": "https://stackoverflow.com/users/2423164/ndnenkov"}, "is_accepted": true, "score": 1, "last_activity_date": 1507730508, "creation_date": 1507730508, "answer_id": 46690228, "question_id": 46688137, "link": "https://stackoverflow.com/questions/46688137/cant-add-to-instances-hash-ruby/46690228#46690228", "title": "Can&#39;t add to instance&#39;s hash (ruby)", "body": "<p>@Matt's solution works.</p>\n\n<p>I'll just add that I see no reason why <code>pets</code>' evaluation should be lazy here. Hence you can just inline it in the constructor and add a reader:</p>\n\n<pre><code>class Owner\n  attr_accessor :name\n  attr_reader :pets\n\n  def initialize(name)\n    @pets = {cats: [], dogs: [], fishes: []}\n  end\n\n  def buy_fish(name)\n    @pets[:fishes] &lt;&lt; Fish.new(name)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 789, "user_id": 8758793, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/ZupKk.jpg?s=128&g=1", "display_name": "Matt Hough", "link": "https://stackoverflow.com/users/8758793/matt-hough"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 46690228, "answer_count": 2, "score": 1, "last_activity_date": 1507730583, "creation_date": 1507724586, "last_edit_date": 1507730583, "question_id": 46688137, "link": "https://stackoverflow.com/questions/46688137/cant-add-to-instances-hash-ruby", "title": "Can&#39;t add to instance&#39;s hash (ruby)", "body": "<p>I am having trouble using <code>#buy_fish</code> to add to the instance's <code>#pets</code> hash. It successfully returns what is being added to the hash, but the hash doesn't change.</p>\n\n<p><strong>Owner Class</strong></p>\n\n<pre><code>class Owner\n  attr_accessor :name\n\n  def initialize(name)\n    pets\n  end\n\n  def pets\n    @pets = {cats: [], dogs: [], fishes: []}\n  end\n\n  def buy_fish(name)\n    self.pets[:fishes] &lt;&lt; Fish.new(name)\n  end\nend\n</code></pre>\n\n<p><strong>Fish Class</strong></p>\n\n<pre><code>class Fish\n  attr_reader :name\n\n  def initialize(name)\n    @name = name\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "windows", "compiler-errors", "msys2"], "comments": [{"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1507729746, "post_id": 46687050, "comment_id": 80327605, "body": "MSYS2 already has Ruby packages that run on both the MSYS2 Posix runtime and the MinGW runtime.  Are you sure you need to compile it yourself?  What runtime do you want to use?"}, {"owner": {"reputation": 70793, "user_id": 28128, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4e974a514f0764fdfe99a8915f192002?s=128&d=identicon&r=PG", "display_name": "David Grayson", "link": "https://stackoverflow.com/users/28128/david-grayson"}, "edited": false, "score": 0, "creation_date": 1507729826, "post_id": 46687050, "comment_id": 80327672, "body": "Installing Rails on Windows has historically been frought with peril.  It&#39;s better to use a Linux virtual machine or the new Windows Subsystem for Linux (WSL) since all the Ruby gems, and extensions, were developed and tested on Linux.  If you really must install Rails on Windows, probably you should take a path that many have taken before you, like <a href=\"http://railsinstaller.org/\" rel=\"nofollow noreferrer\">RailsInstaller</a>."}], "owner": {"reputation": 782, "user_id": 1341889, "user_type": "registered", "accept_rate": 21, "profile_image": "https://www.gravatar.com/avatar/1537a43f0f86ae9cd596bcab01a23343?s=128&d=identicon&r=PG", "display_name": "VladacusB", "link": "https://stackoverflow.com/users/1341889/vladacusb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 604, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507721160, "creation_date": 1507721160, "question_id": 46687050, "link": "https://stackoverflow.com/questions/46687050/ruby-compile-with-msys2-dev-tools-windows", "title": "Ruby compile with MSYS2 dev tools Windows", "body": "<p>Trying to compile Ruby 2.4.2 on Windows with MSYS2 but to no avail...\nAfter ./configure and entering make in terminal, this is the error message I got:</p>\n\n<pre><code>qnexus@quad MSYS ~/dev/ruby-2.4.2\n$ make\n        CC = gcc\n        LD = ld\n        LDSHARED = ld\n        CFLAGS = -O3 -fno-fast-math -ggdb3 -Wall -Wextra -Wno-unused-parameter -Wno-parentheses -Wno-long-long -Wno-missing-field-initializers -Wno-tautological-compare -Wno-parentheses-equality -Wno-constant-logical-operand -Wno-self-assign -Wunused-variable -Wimplicit-int -Wpointer-arith -Wwrite-strings -Wdeclaration-after-statement -Wimplicit-function-declaration -Wdeprecated-declarations -Wno-packed-bitfield-compat -Wsuggest-attribute=noreturn -Wsuggest-attribute=format -Wno-maybe-uninitialized -std=gnu99\n        XCFLAGS = -D_FORTIFY_SOURCE=2 -fstack-protector -fno-strict-overflow -fvisibility=hidden -fexcess-precision=standard -DRUBY_EXPORT -fPIE\n        CPPFLAGS =   -I. -I.ext/include/i686-msys -I./include -I. -I./enc/unicode/9.0.0\n        DLDFLAGS = -fstack-protector -pie\n        SOLIBS =\ngcc (GCC) 6.3.0\n...\ncompiling ruby.c\nruby.c: In function \u2018push_include_cygwin\u2019:\nruby.c:320:2: error: #error no cygwin_conv_path\n #error no cygwin_conv_path\n  ^~~~~\n...\nmake: *** [Makefile:365: ruby.o] Error 1\n</code></pre>\n\n<p>Here is the C function in ruby.c file where compiler generates this error:</p>\n\n<pre><code>static void\npush_include_cygwin(const char *path, VALUE (*filter)(VALUE))\n{\n    const char *p, *s;\n    char rubylib[FILENAME_MAX];\n    VALUE buf = 0;\n\n    p = path;\n    while (*p) {\n    unsigned int len;\n    while (*p == ';')\n        p++;\n    if (!*p) break;\n    for (s = p; *s &amp;&amp; *s != ';'; s = CharNext(s));\n    len = s - p;\n    if (*s) {\n        if (!buf) {\n        buf = rb_str_new(p, len);\n        p = RSTRING_PTR(buf);\n        }\n        else {\n        rb_str_resize(buf, len);\n        p = strncpy(RSTRING_PTR(buf), p, len);\n        }\n    }\n#ifdef HAVE_CYGWIN_CONV_PATH\n#define CONV_TO_POSIX_PATH(p, lib) \\\n    cygwin_conv_path(CCP_WIN_A_TO_POSIX|CCP_RELATIVE, (p), (lib), sizeof(lib))\n#else\n# error no cygwin_conv_path\n#endif\n\n\n    if (CONV_TO_POSIX_PATH(p, rubylib) == 0)\n        p = rubylib;\n    push_include(p, filter);\n    if (!*s) break;\n    p = s + 1;\n    }\n\n}\n</code></pre>\n\n<p>Using MSYS2 with development tools installed:</p>\n\n<p>pacman -S --needed base-devel msys2-devel</p>\n\n<p>I would like to compile ruby and then to install rails on Windows.</p>\n\n<p>How can I configure make so it compiles on Windows with MSYS2?\nIs there any step by step guide how to compile ruby on Windows with MSYS2?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507721602, "post_id": 46687031, "comment_id": 80321742, "body": "How/why did <code>nextval(&#39;coaches_id_seq1&#39;::regclass)</code> get added to your schema? You&#39;ve shown the &quot;before and after&quot; schemas, but not explained what caused the change."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507721829, "post_id": 46687031, "comment_id": 80321881, "body": "The only relevant thing I see in the rails upgrade guide is <a href=\"http://guides.rubyonrails.org/upgrading_ruby_on_rails.html#foreign-key-support\" rel=\"nofollow noreferrer\">this</a>, which is in reference to a Rails 4.1 --&gt; 4.2 upgrade; which is not what your question is apparently in relation to?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507721917, "post_id": 46687031, "comment_id": 80321930, "body": "... Or perhaps this is in reference to <a href=\"http://guides.rubyonrails.org/upgrading_ruby_on_rails.html#new-framework-defaults\" rel=\"nofollow noreferrer\">section 3.20.6</a>??"}, {"owner": {"reputation": 11, "user_id": 8752404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc294d4426c22362a2f501b44230ab7?s=128&d=identicon&r=PG&f=1", "display_name": "J Cleare", "link": "https://stackoverflow.com/users/8752404/j-cleare"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507723703, "post_id": 46687031, "comment_id": 80323099, "body": "I&#39;m unsure why this change was made. It was an automated change that occurred during the Rails version update."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1507731389, "post_id": 46687031, "comment_id": 80328861, "body": "Are you saying that you don&#39;t know the reproduction steps? You can&#39;t remember what tools you used / commands you ran / guide you followed? What happens if you just revert to the &quot;old&quot; schema?"}, {"owner": {"reputation": 777, "user_id": 4043127, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TQN72.jpg?s=128&g=1", "display_name": "Luis Menjivar", "link": "https://stackoverflow.com/users/4043127/luis-menjivar"}, "edited": false, "score": 0, "creation_date": 1507734027, "post_id": 46687031, "comment_id": 80330752, "body": "I had an issue updating my database to rails 5.1. What solved it was stating the rails version in my migration. Don&#39;t know if that will solve your issue but its worth a try. I defined it like so <code>class CreatePosts &lt; ActiveRecord::Migration[5.1]</code>"}, {"owner": {"reputation": 11, "user_id": 8752404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc294d4426c22362a2f501b44230ab7?s=128&d=identicon&r=PG&f=1", "display_name": "J Cleare", "link": "https://stackoverflow.com/users/8752404/j-cleare"}, "edited": false, "score": 0, "creation_date": 1509623914, "post_id": 46687031, "comment_id": 81097625, "body": "I attempted this update for the second time and have discovered that the schema.rb is altered when running <code>bundle exec rails db:migrate</code>.  This is what triggers the change from: <code>create_table &quot;coaches&quot;, force: :cascade do |t|</code> to: <code>create_table &quot;coaches&quot;, id: :integer, default: -&gt; { &quot;nextval(&#39;coaches_id_seq1&#39;::regclass)&quot; }, force: :cascade do |t|</code>  If anyone has any idea why this is happening please let me know."}], "owner": {"reputation": 11, "user_id": 8752404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fdc294d4426c22362a2f501b44230ab7?s=128&d=identicon&r=PG&f=1", "display_name": "J Cleare", "link": "https://stackoverflow.com/users/8752404/j-cleare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 115, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1509624192, "creation_date": 1507721097, "last_edit_date": 1509624192, "question_id": 46687031, "link": "https://stackoverflow.com/questions/46687031/updating-to-rails-5-schema-issue", "title": "Updating to Rails 5 schema issue", "body": "<p>Recently I have been attempting to update an existing Ruby on Rails application from Rails version 4.2.7.1 to version 5.0.6.\nAfter spending a fair amount of time resolving issues I attempted to run <code>bundle exec rake db:schema:load</code> however I am met with several problems related to my 'schema.rb'.</p>\n\n<p>My problems seem to be coming from a specific table in my schema.</p>\n\n<p>Rails 4.2.7.1 version:</p>\n\n<pre><code>create_table \"coaches\", force: :cascade do |t|\n    t.integer  \"user_id\"\n    t.datetime \"created_at\",    null: false\n    t.datetime \"updated_at\",    null: false\n    t.string   \"desired_hours\"\nend\n</code></pre>\n\n<p>Rails 5.0.6 version:</p>\n\n<pre><code>create_table \"coaches\", id: :integer, default: -&gt; { \"nextval('coaches_id_seq1'::regclass)\" }, force: :cascade do |t|\n    t.integer  \"user_id\"\n    t.datetime \"created_at\",    null: false\n    t.datetime \"updated_at\",    null: false\n    t.string   \"desired_hours\"\n  end\n</code></pre>\n\n<p>I seem to be encountering a number of issues due to this <code>nextval('coaches_id_seq1'::regclass)</code> addition to the schema table.</p>\n\n<p>When I run <code>bundle exec rake db:schema:load</code> I am met with a warning <code>ActiveRecord::StatementInvalid: PG::UndefinedTable: ERROR:  relation \"coaches_id_seq1\" does not exist</code></p>\n\n<p>I have attempted to remove this line (<code>nextval('coaches_id_seq1'::regclass)</code>) from the table. However this lead to a number of errors:</p>\n\n<p><code>ActiveRecord::StatementInvalid:\n       PG::NotNullViolation: ERROR:  null value in column \"id\" violates not-null constraint\n       DETAIL:  Failing row contains (null, 92, 2010-09-01 07:00:25.133275, 2010-09-01 07:00:25.133275, null).\n       : INSERT INTO \"coaches\" (\"user_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3) RETURNING \"id\"</code></p>\n\n<p>I have also tried using <code>bundle exec rake db:structure:load</code> however this has resulted in even more errors.</p>\n\n<p>Any help regarding this problem would be greatly appreciated!</p>\n\n<p>Many Thanks!</p>\n\n<p>UPDATE</p>\n\n<p>After a second attempt I discovered that running <code>bundle exec rake db:migrate</code>, is what triggers the change in the schema.rb. Any help in this matter would be greatly appreciated.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1507721432, "post_id": 46686913, "comment_id": 80321617, "body": "Less code? This is only 2 lines. If you really need, you can reduce it to one line using each_with_object, like: <code>result = h1.each_with_object({}) {|(key, value), h3| h3[value] = h2[key] }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 105, "user_id": 5654472, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cDVkM.jpg?s=128&g=1", "display_name": "msayen", "link": "https://stackoverflow.com/users/5654472/msayen"}, "edited": false, "score": 4, "creation_date": 1507722493, "post_id": 46687369, "comment_id": 80322277, "body": "Thank you, but it does not work when I change the order in 2nd hash, for example: h2 = {key2: &#39;Blue&#39;, key1: &#39;Red&#39;}."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 105, "user_id": 5654472, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cDVkM.jpg?s=128&g=1", "display_name": "msayen", "link": "https://stackoverflow.com/users/5654472/msayen"}, "edited": false, "score": 0, "creation_date": 1507723216, "post_id": 46687369, "comment_id": 80322783, "body": "@msayen <code>h1.values.zip(h2.values_at(*h1.keys)).to_h</code> would fix that. <a href=\"http://ruby-doc.org/core-2.4.2/Hash.html#method-i-values_at\" rel=\"nofollow noreferrer\"><code>values_at</code></a> fetches the values for the given keys (in that order). Maybe you should change your example code accordingly so we don&#39;t make wrong assumptions."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1507722168, "creation_date": 1507722168, "answer_id": 46687369, "question_id": 46686913, "link": "https://stackoverflow.com/questions/46686913/join-two-ruby-hashes-by-keys/46687369#46687369", "title": "Join two Ruby hashes by keys", "body": "<p>Zip the values:</p>\n\n<pre><code>h1 = {key1: 'Roses are', key2: 'Violets are'}\nh2 = {key1: 'Red', key2: 'Blue'}\nresult = h1.values.zip(h2.values).to_h\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1507723670, "last_edit_date": 1507723670, "creation_date": 1507722833, "answer_id": 46687577, "question_id": 46686913, "link": "https://stackoverflow.com/questions/46686913/join-two-ruby-hashes-by-keys/46687577#46687577", "title": "Join two Ruby hashes by keys", "body": "<p>You want a 1:1 mapping, so <a href=\"http://ruby-doc.org/core-2.4.2/Enumerable.html#method-i-map\" rel=\"nofollow noreferrer\"><code>map</code></a> would work:</p>\n\n<pre><code>h1.map { |k, v| ... }\n</code></pre>\n\n<p>The values from <code>h1</code> become the new keys:</p>\n\n<pre><code>h1.map { |k, v| [v, ...] }\n</code></pre>\n\n<p>The corresponding values from <code>h2</code> become the new values:</p>\n\n<pre><code>h1.map { |k, v| [v, h2[k]] }\n#=&gt; [[\"Roses are\", \"Red\"], [\"Violets are\", \"Blue\"]]\n</code></pre>\n\n<p>And <a href=\"http://ruby-doc.org/core-2.4.2/Array.html#method-i-to_h\" rel=\"nofollow noreferrer\"><code>to_h</code></a> converts that back into a hash:</p>\n\n<pre><code>h1.map { |k, v| [v, h2[k]] }.to_h\n#=&gt; {\"Roses are\"=&gt;\"Red\", \"Violets are\"=&gt;\"Blue\"}\n</code></pre>\n"}], "owner": {"reputation": 105, "user_id": 5654472, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/cDVkM.jpg?s=128&g=1", "display_name": "msayen", "link": "https://stackoverflow.com/users/5654472/msayen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 46687577, "answer_count": 2, "score": 0, "last_activity_date": 1507724416, "creation_date": 1507720754, "last_edit_date": 1507724138, "question_id": 46686913, "link": "https://stackoverflow.com/questions/46686913/join-two-ruby-hashes-by-keys", "title": "Join two Ruby hashes by keys", "body": "<p>I have two hashes that look like this:</p>\n\n<pre><code>h1 = {key1: 'Roses are', key2: 'Violets are'}\nh2 = {key1: 'Red', key2: 'Blue'}\n</code></pre>\n\n<p>I would like to join them by keys so that I get a hash like this:</p>\n\n<pre><code>result = {'Roses are' =&gt; 'Red', 'Violets are' =&gt; 'Blue'}\n</code></pre>\n\n<p>I have some code that does the trick:</p>\n\n<pre><code>result = {}\nh1.each { |key, value| result[value] = h2[key] }\n</code></pre>\n\n<p>I wonder if there is a method in the standard lib to do this or whether this can be done with less code.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"tags": [], "owner": {"reputation": 4139, "user_id": 287030, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/19ba76c0ea06a862e42e3cf49b286cbd?s=128&d=identicon&r=PG", "display_name": "Kjir", "link": "https://stackoverflow.com/users/287030/kjir"}, "is_accepted": true, "score": 0, "last_activity_date": 1507724033, "creation_date": 1507724033, "answer_id": 46687954, "question_id": 46686469, "link": "https://stackoverflow.com/questions/46686469/activerecordrecordnotfound-like-response-handling/46687954#46687954", "title": "ActiveRecord::RecordNotFound like response handling", "body": "<p>I would suggest you use <a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Rescuable/ClassMethods.html#method-i-rescue_from\" rel=\"nofollow noreferrer\"><code>rescue_from</code></a> in your ApplicationController:</p>\n\n<pre><code>class ApplicationController\n  rescue_from MyOwnException do |exception|\n    render 'my_error_view'\n  end\nend\n</code></pre>\n\n<p>Alternatively you could use the exception_app, setting it like this in <code>config/application.rb</code>:</p>\n\n<pre><code>config.exceptions_app = routes\n</code></pre>\n\n<p>You can then control the rendering of the errors through the routes:</p>\n\n<pre><code>match '/404', to: 'exceptions#handle_404'\n</code></pre>\n\n<p>You can find more details on this blog post: <a href=\"https://blog.simplificator.com/2015/03/13/handling-errors-in-ruby-on-rails/\" rel=\"nofollow noreferrer\">Handling errors in Ruby on Rails</a></p>\n"}], "owner": {"reputation": 87, "user_id": 8070825, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/69004026ff28a9a881b636c81ae38d82?s=128&d=identicon&r=PG&f=1", "display_name": "Mongoid", "link": "https://stackoverflow.com/users/8070825/mongoid"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 604, "favorite_count": 0, "accepted_answer_id": 46687954, "answer_count": 1, "score": 0, "last_activity_date": 1507724033, "creation_date": 1507719394, "question_id": 46686469, "link": "https://stackoverflow.com/questions/46686469/activerecordrecordnotfound-like-response-handling", "title": "ActiveRecord::RecordNotFound like response handling", "body": "<p>I have a code example like this :</p>\n\n<pre><code>def update\n  if @transaction.update(transaction_params)\n    render :show, status: :ok\n  else\n    render json: @transaction.errors, status: :unprocessable_entity\n  end\nend\n</code></pre>\n\n<p>And when I try to update record which does not exist, in other words controller raises ActiveRecord::RecordNotFound. I don't need to rescue and render anything, as this exception has its own response handler or something, this is what I get in the response when provided invalid id to the method above, postman screenshot:</p>\n\n<p><a href=\"https://i.stack.imgur.com/DMBBs.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DMBBs.png\" alt=\"enter image description here\"></a></p>\n\n<p>Here is text version:</p>\n\n<pre><code>{\n    \"status\": 404,\n    \"error\": \"Not Found\",\n    \"exception\": \"#&lt;ActiveRecord::RecordNotFound: Couldn't find Transaction with 'id'=88 [WHERE \\\"transactions\\\".\\\"active\\\" = ?]&gt;\",\n    \"traces\": {\n        \"Application Trace\": [\n            {\n                \"id\": 6,\n                \"trace\": \"app/controllers/api/v1/transactions_controller.rb:42:in `set_transaction'\"\n            }\n        ],\n        \"Framework Trace\": [\n            {\n                \"id\": 0,\n                \"trace\": \"vendor/bundle/gems/activerecord-5.1.4/lib/active_record/relation/finder_methods.rb:343:in `raise_record_not_found_exception!'\"\n            },\n            {\n</code></pre>\n\n<p>However when I add my own controller class, and I raise it from the model, I get 500 if I don't specifically rescue it, in the controller. </p>\n\n<p>How is this done for ActiveRecord::RecordNotFound? How can I add a response handler to my custom error?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5459054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-OCgS_oxlX3o/AAAAAAAAAAI/AAAAAAAAADA/fgV3d3k1Loo/photo.jpg?sz=128", "display_name": "Leeder", "link": "https://stackoverflow.com/users/5459054/leeder"}, "edited": false, "score": 0, "creation_date": 1507719509, "post_id": 46686084, "comment_id": 80320437, "body": "It gives the same result. All the masters, who provides at least one of the services, not all of them."}, {"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "reply_to_user": {"reputation": 57, "user_id": 5459054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-OCgS_oxlX3o/AAAAAAAAAAI/AAAAAAAAADA/fgV3d3k1Loo/photo.jpg?sz=128", "display_name": "Leeder", "link": "https://stackoverflow.com/users/5459054/leeder"}, "edited": false, "score": 0, "creation_date": 1507719588, "post_id": 46686084, "comment_id": 80320495, "body": "Oh sorry, you want masters are there in every service?"}, {"owner": {"reputation": 57, "user_id": 5459054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-OCgS_oxlX3o/AAAAAAAAAAI/AAAAAAAAADA/fgV3d3k1Loo/photo.jpg?sz=128", "display_name": "Leeder", "link": "https://stackoverflow.com/users/5459054/leeder"}, "edited": false, "score": 0, "creation_date": 1507720107, "post_id": 46686084, "comment_id": 80320790, "body": "Done, please take a look."}, {"owner": {"reputation": 57, "user_id": 5459054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-OCgS_oxlX3o/AAAAAAAAAAI/AAAAAAAAADA/fgV3d3k1Loo/photo.jpg?sz=128", "display_name": "Leeder", "link": "https://stackoverflow.com/users/5459054/leeder"}, "edited": false, "score": 0, "creation_date": 1507726212, "post_id": 46686084, "comment_id": 80324797, "body": "Gives an exception. I removed @ from @masters.select, and now it&#39;s working.. but no matter what is chosen, returns empty array. I don&#39;t get what (services - master.services.map(&amp;:id)).empty? is, but seems it doesn&#39;t work... :("}, {"owner": {"reputation": 57, "user_id": 5459054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-OCgS_oxlX3o/AAAAAAAAAAI/AAAAAAAAADA/fgV3d3k1Loo/photo.jpg?sz=128", "display_name": "Leeder", "link": "https://stackoverflow.com/users/5459054/leeder"}, "edited": false, "score": 0, "creation_date": 1507726865, "post_id": 46686084, "comment_id": 80325310, "body": "masters contains all the masters associated with these master_services, but @masters is []"}, {"owner": {"reputation": 57, "user_id": 5459054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-OCgS_oxlX3o/AAAAAAAAAAI/AAAAAAAAADA/fgV3d3k1Loo/photo.jpg?sz=128", "display_name": "Leeder", "link": "https://stackoverflow.com/users/5459054/leeder"}, "edited": false, "score": 1, "creation_date": 1507729658, "post_id": 46686084, "comment_id": 80327535, "body": "Bingo! services = services.map {|service| service.to_i} does it. My services array was array of strings. ActiveRecord did to_i by itself, I think, but the (services - master.services.map(&amp;:id)) did not. Thank you very much!"}, {"owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "reply_to_user": {"reputation": 57, "user_id": 5459054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-OCgS_oxlX3o/AAAAAAAAAAI/AAAAAAAAADA/fgV3d3k1Loo/photo.jpg?sz=128", "display_name": "Leeder", "link": "https://stackoverflow.com/users/5459054/leeder"}, "edited": false, "score": 0, "creation_date": 1507730469, "post_id": 46686084, "comment_id": 80328178, "body": "You&#39;re welcome. added explanation. take a look. thanks."}], "tags": [], "owner": {"reputation": 2537, "user_id": 5371321, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/ZFyVo.jpg?s=128&g=1", "display_name": "Narasimha Reddy - Geeker", "link": "https://stackoverflow.com/users/5371321/narasimha-reddy-geeker"}, "is_accepted": true, "score": 1, "last_activity_date": 1507730437, "last_edit_date": 1507730437, "creation_date": 1507718250, "answer_id": 46686084, "question_id": 46685837, "link": "https://stackoverflow.com/questions/46685837/rails-5-select-common-associations/46686084#46686084", "title": "Rails 5. Select common associations", "body": "<p>You can achive this like this also</p>\n\n<pre><code>master_ids = MasterService.where(service_id: services)\n                          .map(&amp;:master_id)\n                          .uniq\nmasters = Master.where(id: master_ids)\n</code></pre>\n\n<p><strong>Update:</strong></p>\n\n<p>In this way you can achieve the result you are looking for</p>\n\n<pre><code>services = params[:service_ids]\nmasters = Master.joins(:master_services).where(\"master_services.service_id\": services)\n@masters = masters.select {|master| (services - master.services.map(&amp;:id)).empty? }\n@masters.uniq \n</code></pre>\n\n<p>in this</p>\n\n<pre><code>masters.select {|master| (services - master.services.map(&amp;:id)).empty? }\n</code></pre>\n\n<p>we are selecting masters who has all the services we are looking for,<br>\nfor example, if we are looking for services = [1, 3] <br></p>\n\n<p>Masters Shrink has services = [1, 2, 3] <br>\nwe are doing <code>services - master.services.map(&amp;:id)</code><br>\nwhich means [1, 3] - [1, 2, 3] = [] means empty. so we will select this master. because he has all services we are looking for.</p>\n\n<p>Master Helen - [1, 3] - [3, 1, 4] = [] empty, we'll select.<br>\nMaster Francois - [1, 3] - [3] = [1] not empty. we won't select. </p>\n"}], "owner": {"reputation": 57, "user_id": 5459054, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh3.googleusercontent.com/-OCgS_oxlX3o/AAAAAAAAAAI/AAAAAAAAADA/fgV3d3k1Loo/photo.jpg?sz=128", "display_name": "Leeder", "link": "https://stackoverflow.com/users/5459054/leeder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 46686084, "answer_count": 1, "score": 1, "last_activity_date": 1507730437, "creation_date": 1507717548, "last_edit_date": 1507721713, "question_id": 46685837, "link": "https://stackoverflow.com/questions/46685837/rails-5-select-common-associations", "title": "Rails 5. Select common associations", "body": "<p>I have 2 models, connected with has_many :through association.</p>\n\n<pre><code>service has_many :masters, through: :master_services\nmaster has_many :services, through: :master_services\n</code></pre>\n\n<p>The reason I used HMT: is that I need to give some details to each master/service intersection, like price and duration.</p>\n\n<p>Via AJAX I transmit into controller an array of service_ids, and I should return into my view an array of Masters, (important!) who provides all of the enlisted services.</p>\n\n<p>What I have got now:</p>\n\n<pre><code>services = params[:service_ids] #get array of service_ids\n@services = Service.where(id: services) #get array of arrays of services (mindblowing)\n@masters = @services.map {|service| service.masters } #get master for each service\n\n@masters.flatten! #transform array of arrays into a plain array\n@masters.uniq! #I don't need repeats\n</code></pre>\n\n<p>But this @services = Service.where(id: services) returns all masters for these services. It is translated to SQL like </p>\n\n<pre><code>SELECT * FROM services WHERE id in ('5', '6', '7')\n</code></pre>\n\n<p>It gives some results, but not what I want to achieve. I need a list of masters, who is in each of these services, common for all of the services. So I need your help, dear community. I don't know, maybe there is a way to do it via ActiveRecord, or with some transformation of the resulting arrays.</p>\n\n<p><strong>Explanation</strong></p>\n\n<p>Master Josh provides services: Car washing (id 1), Neural surgery (id 2), Shrink (id 3).\nMaster Helen provides services: Shrink (id 3), Car washing (id 1), Body double (id 4).\nMaster Francois provices services: Shrink (id 3).</p>\n\n<p>I want if Shrink is chosen, get all of the Masters. \nIf Shrink AND Car washing are chosen, get only Josh and Helen, as they provide both services, and Francois doesn't.\nIf only the Car washing is chosen, then get the same array of Josh and Helen.\nAnd, by any chance, if the Neural surgery and Body double are chosen, get none - none of these masters provides both services.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "is_accepted": false, "score": 1, "last_activity_date": 1507716829, "creation_date": 1507716829, "answer_id": 46685579, "question_id": 46685364, "link": "https://stackoverflow.com/questions/46685364/active-admin-sortable-tree-causes-error-when-trying-to-use-it/46685579#46685579", "title": "active_admin-sortable_tree causes error when trying to use it", "body": "<p>Ok, so I was right, the execution context changes from a standard index to a <code>IndexAsSortable</code> as a result I wrongly assumed that the same methods would exist but they don't, hence things like column and so on don't exist.</p>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507716829, "creation_date": 1507716258, "question_id": 46685364, "link": "https://stackoverflow.com/questions/46685364/active-admin-sortable-tree-causes-error-when-trying-to-use-it", "title": "active_admin-sortable_tree causes error when trying to use it", "body": "<p>Assuming the following:</p>\n\n<pre><code>ActiveAdmin.register Section do\n  menu :label =&gt; \"Sections used in the menu\"\n  menu :parent =&gt; \"CMS\", priority: 1\n  permit_params :name,:section_type, :visible,sections: [], sections_id: []\n\n  sortable tree: true,\n           sorting_attribute: :position,\n           max_levels: 1,\n           collapsible: true\n\n  index as: :sortable do\n    selectable_column\n    id_column\n\n    column :name\n    column :section_type\n    column :visible do |section|\n      section.visible ? status_tag(\"yes\",class: :ok) : status_tag(\"no\")\n    end\n    actions\n  end\nend\n</code></pre>\n\n<p>incase it's needed, section.rb:</p>\n\n<pre><code>class Section &lt; ActiveRecord::Base\n\n  belongs_to :parent, class_name: self.to_s, foreign_key: 'section_id'\n  has_many :children, class_name: self.to_s, foreign_key: 'section_id'\n\n  scope :roots, -&gt; {where(section_id: nil)}\nend\n</code></pre>\n\n<p>I get the following Error: </p>\n\n<pre><code>undefined local variable or method `selectable_column' for \"                  &lt;div class=\\\"index_as_sortable\\\"&gt;&lt;/div&gt;\\n\":ActiveAdmin::Views::IndexAsSortable\n</code></pre>\n\n<p>This goes away if I remove <code>as: :sortable</code> but this is of course not going to work (obviously as I can't then use the sortable tree).</p>\n\n<p>I'm guessing the error happens because by doing <code>as: :sortable</code> causes the execution context for the index block to change and the new execution context doesn't have the index methods.</p>\n\n<p>Regardless, how do I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 157, "user_id": 1843919, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/993a0.png?s=128&g=1", "display_name": "Rebel Rider", "link": "https://stackoverflow.com/users/1843919/rebel-rider"}, "edited": false, "score": 0, "creation_date": 1507716668, "post_id": 46685303, "comment_id": 80318602, "body": "put it in hidden_field"}], "answers": [{"tags": [], "owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "is_accepted": false, "score": 0, "last_activity_date": 1507723669, "creation_date": 1507723669, "answer_id": 46687843, "question_id": 46685303, "link": "https://stackoverflow.com/questions/46685303/product-number-for-user-id-rails/46687843#46687843", "title": "product.number for user_id rails", "body": "<p>Firstly you need configure devise gem for authentication to your user model to add user_id column to your products table.</p>\n\n<pre><code>rails g migartion add_user_id_to_products user_id:integer:index\n</code></pre>\n\n<p>In your users model</p>\n\n<pre><code> class User &lt; ApplicationRecord\n\n    has_many  :products\n end\n</code></pre>\n\n<p>In your products model</p>\n\n<pre><code> class Products &lt; ApplicationRecord\n\n belongs_to :user\n\n end\n</code></pre>\n\n<p>As your user and products are associated through has_many and belongs_to.\nyou can as below in the products controller</p>\n\n<pre><code> class ProductsController &lt; ApplicationController\n\n  def index\n\n @products = Product.all \nend\n\ndef new\n\n  @product = Product.new\n\nend\n\n  def create\n    @product = current_user.products.build(product_params)\n\n\n    if @product.save\n\n     redirect_to edit_product_path(@product), notice: \"Saved...\"\n\n\n\n    else\n         render :new \n\n    end\n\n  end\n\n\nprivate\n\n\ndef product_params\n    params.require(:product).permit( :title, :description, :category)\nend\n\nend\n</code></pre>\n\n<p>If the data is successfully saved into the database, you will find the user_id column of the products table filled with the id of the current_user.</p>\n\n<p>To get all the products of a particular user</p>\n\n<p>In your users controller show action</p>\n\n<pre><code>def show\n\n @user_products = @user.products\n\nend\n</code></pre>\n\n<p>The @user_products will have all the products belonging to the corresponding user.</p>\n"}], "owner": {"reputation": 9, "user_id": 6224017, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/6765b1baecd45e727534dfa404ee08ef?s=128&d=identicon&r=PG&f=1", "display_name": "Boboss", "link": "https://stackoverflow.com/users/6224017/boboss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507723669, "creation_date": 1507716108, "question_id": 46685303, "link": "https://stackoverflow.com/questions/46685303/product-number-for-user-id-rails", "title": "product.number for user_id rails", "body": "<p>I have a question for rails.</p>\n\n<p>I have a User controller,\nI have a Product controller.</p>\n\n<p>I have a user id references in product:db.</p>\n\n<p>How to puts User.product number in Html?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507713385, "post_id": 46684328, "comment_id": 80316316, "body": "JFYI, it&#39;s &quot;business&quot;, not &quot;buisness&quot;"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1507713451, "post_id": 46684328, "comment_id": 80316370, "body": "&quot;Currently I have no associations between the models&quot; - that&#39;s what you need to fix."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1507714451, "last_edit_date": 1507714451, "creation_date": 1507714032, "answer_id": 46684587, "question_id": 46684328, "link": "https://stackoverflow.com/questions/46684328/rails-show-name-instead-of-id-in-a-show-page/46684587#46684587", "title": "Rails: show name instead of Id in a show page", "body": "<p>Try something like this</p>\n\n<pre><code>class Item &lt; ActiveRecord::Base\n  belongs_to :account \nend\n</code></pre>\n\n<p>Into the view</p>\n\n<pre><code>&lt;% if @item.account %&gt;\n  &lt;%= @item.account.buisness_name %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Should be <code>business_name</code>, as @Sergio Tulentsev already told you</p>\n\n<p>I updated my answer because I noticed from the table that the <code>account_id</code> has not a <code>not null</code> constraint</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 3, "creation_date": 1507714320, "post_id": 46684632, "comment_id": 80317043, "body": "Might want to use <code>prefix: true</code> on that delegate. Items don&#39;t usually have business names. :)"}, {"owner": {"reputation": 505, "user_id": 5909738, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/jNscA.jpg?s=128&g=1", "display_name": "Tashows", "link": "https://stackoverflow.com/users/5909738/tashows"}, "edited": false, "score": 0, "creation_date": 1542206723, "post_id": 46684632, "comment_id": 93486291, "body": "you could also do <code>@item.account.try(:bussiness_name)</code> which is pretty clean. The delegate solution works fine, but if you catch yourself in need of multiple scenarios like this and lots of conditions inside the view, you might want to check what a <code>decorator</code> is. The draper gem (<a href=\"https://github.com/drapergem/draper\" rel=\"nofollow noreferrer\">github.com/drapergem/draper</a>) is a good start."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 2, "last_activity_date": 1507744653, "last_edit_date": 1507744653, "creation_date": 1507714173, "answer_id": 46684632, "question_id": 46684328, "link": "https://stackoverflow.com/questions/46684328/rails-show-name-instead-of-id-in-a-show-page/46684632#46684632", "title": "Rails: show name instead of Id in a show page", "body": "<p>If you have </p>\n\n<pre><code>&lt;%= @item.account_id %&gt;\n</code></pre>\n\n<p>The horrible way to get the account would be</p>\n\n<pre><code>&lt;%= Account.find_by(id: @item.account_id).try(:buisness_name) %&gt;\n</code></pre>\n\n<p>Much smarter would be </p>\n\n<pre><code>class Item\n\n  belongs_to :account\n\n  delegate :buisness_name, to: :account, prefix: true, allow_nil: true \n</code></pre>\n\n<p>And then in the view...</p>\n\n<pre><code>&lt;%= @item.account_buisness_name %&gt;\n</code></pre>\n"}], "owner": {"reputation": 685, "user_id": 7458849, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/89kDb.jpg?s=128&g=1", "display_name": "Theopap", "link": "https://stackoverflow.com/users/7458849/theopap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 369, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1507744653, "creation_date": 1507713252, "last_edit_date": 1507713481, "question_id": 46684328, "link": "https://stackoverflow.com/questions/46684328/rails-show-name-instead-of-id-in-a-show-page", "title": "Rails: show name instead of Id in a show page", "body": "<p>I have two tables, <code>accounts</code> and <code>items</code> and I would like to <code>show</code> the <code>buisness_name</code> instead of the <code>id</code>from the accounts table on the <code>view/items/show.html.erb</code> page.</p>\n\n<p>Currently I have no associations between the models, but I have the <code>account_id</code> column in the <code>items</code> table. </p>\n\n<pre><code> create_table \"accounts\", force: :cascade do |t|\n    t.string \"buisness_name\"\n    t.string \"web_site\"\n    t.string \"phone_number\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n end\n\ncreate_table \"items\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"description\"\n    t.string \"image\"\n    t.decimal \"price\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"category_id\"\n    t.json \"attachments\"\n    t.integer \"account_id\"\nend\n</code></pre>\n\n<p>I'm getting the <code>account_id</code> via this: <code>&lt;%= @item.account_id %&gt;</code>, but I would like to show the <code>buisness_name</code> instead.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "websocket", "ruby-on-rails-5", "actioncable"], "answers": [{"tags": [], "owner": {"reputation": 185, "user_id": 7733552, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0585b2af4349bcf8312cad05f837ab9?s=128&d=identicon&r=PG&f=1", "display_name": "megahra", "link": "https://stackoverflow.com/users/7733552/megahra"}, "is_accepted": true, "score": 0, "last_activity_date": 1509200114, "last_edit_date": 1509200114, "creation_date": 1509049864, "answer_id": 46963293, "question_id": 46683252, "link": "https://stackoverflow.com/questions/46683252/actioncable-display-correct-number-of-connected-users-problems-multiple-tabs/46963293#46963293", "title": "ActionCable display correct number of connected users (problems: multiple tabs, disconnects)", "body": "<p>I finally at least got it to work for counting all users to the server (not by room) by doing this:</p>\n\n<p>CoffeeScript of my channel:</p>\n\n<pre><code>App.online_status = App.cable.subscriptions.create \"OnlineStatusChannel\",\n  connected: -&gt;\n    # Called when the subscription is ready for use on the server\n    #update counter whenever a connection is established\n    App.online_status.update_students_counter()\n\n  disconnected: -&gt;\n    # Called when the subscription has been terminated by the server\n    App.cable.subscriptions.remove(this)\n    @perform 'unsubscribed'\n\n  received: (data) -&gt;\n    # Called when there's incoming data on the websocket for this channel\n    val = data.counter-1 #-1 since the user who calls this method is also counted, but we only want to count other users\n    #update \"students_counter\"-element in view:\n    $('#students_counter').text(val)\n\n  update_students_counter: -&gt;\n    @perform 'update_students_counter'\n</code></pre>\n\n<p>Ruby backend of my channel:</p>\n\n<pre><code>class OnlineStatusChannel &lt; ApplicationCable::Channel\n  def subscribed\n    #stream_from \"specific_channel\"\n  end\n\n  def unsubscribed\n    # Any cleanup needed when channel is unsubscribed\n    #update counter whenever a connection closes\n    ActionCable.server.broadcast(specific_channel, counter: count_unique_connections )\n  end\n\n  def update_students_counter\n    ActionCable.server.broadcast(specific_channel, counter: count_unique_connections )\n  end\n\n  private:\n  #Counts all users connected to the ActionCable server\n  def count_unique_connections\n    connected_users = []\n    ActionCable.server.connections.each do |connection|\n      connected_users.push(connection.current_user.id)\n    end\n    return connected_users.uniq.length\n  end\nend\n</code></pre>\n\n<p>And now it works! When a user connects, the counter increments, when a user closes his window or logs off it decrements. And when a user is logged on with more than 1 tab or window they are only counted once. :)</p>\n"}], "owner": {"reputation": 185, "user_id": 7733552, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d0585b2af4349bcf8312cad05f837ab9?s=128&d=identicon&r=PG&f=1", "display_name": "megahra", "link": "https://stackoverflow.com/users/7733552/megahra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 967, "favorite_count": 2, "accepted_answer_id": 46963293, "answer_count": 1, "score": 0, "last_activity_date": 1509200114, "creation_date": 1507710070, "last_edit_date": 1507731057, "question_id": 46683252, "link": "https://stackoverflow.com/questions/46683252/actioncable-display-correct-number-of-connected-users-problems-multiple-tabs", "title": "ActionCable display correct number of connected users (problems: multiple tabs, disconnects)", "body": "<p>I'm a Rails beginner building a quiz webapp. Currently I'm using <code>ActionCable.server.connections.length</code> to display how many people are connected to my quiz, but there are multiple problems:</p>\n\n<ol>\n<li>When the page is reloaded half of the time <strong>the old connection is not disconnected properly</strong> by ActionCable, so the number keeps rising even though it shouldn't</li>\n<li><strong>it only gives you the current number of connections for the specific thread this is called in</strong>, as @edwardmp pointed out in <a href=\"https://stackoverflow.com/questions/32905259/actioncable-how-to-display-number-of-connected-users\">this actioncable-how-to-display-number-of-connected-users thread</a> (which also means, that the number of connections displayed for the quiz hoster, which is one type of user in my app, can vary from the number of connections displayed to a quiz participant)</li>\n<li>When a user connects with <strong>multiple browser windows each connection is counted seperately</strong> which falsely inflates the number of participants</li>\n<li>And last but not least: it would be great to be able to display the <strong>number of people connected per room</strong> of my channel, instead of across all rooms</li>\n</ol>\n\n<p>I've noticed that most answers concerning this topic use a Redis server, so I was wondering if that is generally recommended for what I'm trying to do and why. (e.g. here: <a href=\"https://stackoverflow.com/questions/37289441/actioncable-connected-users-list\">Actioncable connected users list</a> )</p>\n\n<p>I currently use Devise and cookies for my authentication. </p>\n\n<p>Any pointers or answers to even part of my questions would be greatly appreciated :)</p>\n"}, {"tags": ["ruby", "automation", "rubygems", "cucumber", "reporting"], "comments": [{"owner": {"reputation": 2705, "user_id": 1899926, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/215754c0c3a3444a99446e99c2cbf9dd?s=128&d=identicon&r=PG", "display_name": "Barodapride", "link": "https://stackoverflow.com/users/1899926/barodapride"}, "edited": false, "score": 0, "creation_date": 1508944606, "post_id": 46682960, "comment_id": 80819419, "body": "it seems that the gem is incompatible with the latest version of Cucumber. If you use Cucumber 2.4.x it will work."}, {"owner": {"reputation": 31, "user_id": 6672342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da78987df9ac7a608a9c30da927aaf?s=128&d=identicon&r=PG&f=1", "display_name": "Genex", "link": "https://stackoverflow.com/users/6672342/genex"}, "reply_to_user": {"reputation": 2705, "user_id": 1899926, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/215754c0c3a3444a99446e99c2cbf9dd?s=128&d=identicon&r=PG", "display_name": "Barodapride", "link": "https://stackoverflow.com/users/1899926/barodapride"}, "edited": false, "score": 0, "creation_date": 1514290595, "post_id": 46682960, "comment_id": 82925691, "body": "@Barodapride  After degrading the cucumber version, the gem starts working, but it only shows the count of feature file, steps and scenarios. I m not getting the count of passed and failed scenarios. Is there any way of getting the passed failed stats ???"}], "owner": {"reputation": 31, "user_id": 6672342, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63da78987df9ac7a608a9c30da927aaf?s=128&d=identicon&r=PG&f=1", "display_name": "Genex", "link": "https://stackoverflow.com/users/6672342/genex"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 161, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507709603, "creation_date": 1507709082, "last_edit_date": 1507709603, "question_id": 46682960, "link": "https://stackoverflow.com/questions/46682960/cucumber-statistics-gem-not-working", "title": "Cucumber statistics gem not working", "body": "<p>I am using Cucumber Capybara with Ruby for automation. I have install the cucumber statistics gem for reporting purpose. I have added require 'cucumber_statistics/autoload' in env.rb file. After successful execution of feature file it is showing error as :</p>\n\n<p>undefined method <code>regexp_source' for #&lt;Cucumber::Glue::StepDefinition:0x0000000293dda0&gt; (NoMethodError)\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber_statistics-2.3.0/lib/cucumber_statistics/formatter.rb:29:in</code>after_step_result'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/formatter/ignore_missing_messages.rb:11:in <code>method_missing'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/formatter/legacy_api/ast.rb:117:in</code>accept'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/formatter/legacy_api/adapter.rb:580:in <code>step_invocation'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/formatter/legacy_api/adapter.rb:543:in</code>step_invocation'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/formatter/legacy_api/adapter.rb:387:in <code>print_step'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/formatter/legacy_api/adapter.rb:251:in</code>after_test_step'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/formatter/legacy_api/adapter.rb:107:in <code>after_test_step'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/formatter/legacy_api/adapter.rb:31:in</code>block in initialize'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/event_bus.rb:34:in <code>call'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/event_bus.rb:34:in</code>block in broadcast'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/event_bus.rb:34:in <code>each'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/event_bus.rb:34:in</code>broadcast'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/event_bus.rb:40:in <code>method_missing'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/runner.rb:35:in</code>around_hook'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/around_hook.rb:12:in <code>describe_to'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/case.rb:120:in</code>block (2 levels) in compose_around_hooks'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/case.rb:121:in <code>call'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/case.rb:121:in</code>compose_around_hooks'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/case.rb:26:in <code>block in describe_to'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/runner.rb:19:in</code>call'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/runner.rb:19:in <code>test_case'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/case.rb:25:in</code>describe_to'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/filters/prepare_world.rb:12:in <code>test_case'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/case.rb:25:in</code>describe_to'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/filter.rb:57:in <code>test_case'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/filters/retry.rb:18:in</code>test_case'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/case.rb:25:in <code>describe_to'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/filters/quit.rb:12:in</code>test_case'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/case.rb:25:in <code>describe_to'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/filters/broadcast_test_run_started_event.rb:20:in</code>block in done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/filters/broadcast_test_run_started_event.rb:19:in <code>map'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/filters/broadcast_test_run_started_event.rb:19:in</code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/filter.rb:62:in <code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/filter.rb:62:in</code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/filter.rb:62:in <code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/filter.rb:62:in</code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/filter.rb:62:in <code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/filters/locations_filter.rb:20:in</code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/filter.rb:62:in <code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/test/filters/tag_filter.rb:18:in</code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/compiler.rb:24:in <code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core/gherkin/parser.rb:37:in</code>done'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core.rb:32:in <code>parse'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-core-3.0.0/lib/cucumber/core.rb:21:in</code>compile'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/runtime.rb:74:in <code>run!'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/lib/cucumber/cli/main.rb:33:in</code>execute!'\n/usr/local/rvm/gems/ruby-2.2.2/gems/cucumber-3.0.1/bin/cucumber:9:in <code>&lt;top (required)&gt;'\n/usr/local/rvm/gems/ruby-2.2.2/bin/cucumber:23:in</code>load'\n/usr/local/rvm/gems/ruby-2.2.2/bin/cucumber:23:in `'</p>\n\n<p>Ruby version = '2.2.2`\nRails = '4.2.7'\nCucumber = '3.0.1'</p>\n\n<p>Is there any other reporting mechanism that i can use for ruby-cucumber automation?</p>\n"}, {"tags": ["ruby", "cucumber", "ui-automation", "calabash-android"], "comments": [{"owner": {"reputation": 428, "user_id": 7085109, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/296582f3beae795250570156c3aaaf43?s=128&d=identicon&r=PG&f=1", "display_name": "Mr Cas", "link": "https://stackoverflow.com/users/7085109/mr-cas"}, "edited": false, "score": 0, "creation_date": 1507727301, "post_id": 46682467, "comment_id": 80325646, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/18997808/how-to-write-step-definition-of-calabash-android\">How to write step definition of Calabash Android</a>"}], "answers": [{"tags": [], "owner": {"reputation": 826, "user_id": 1515962, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc6e7463a12876a6a3ee6599b7127a4e?s=128&d=identicon&r=PG", "display_name": "AlekseiPetrovski", "link": "https://stackoverflow.com/users/1515962/alekseipetrovski"}, "is_accepted": false, "score": 0, "last_activity_date": 1507762677, "creation_date": 1507762677, "answer_id": 46698789, "question_id": 46682467, "link": "https://stackoverflow.com/questions/46682467/cucumber-step-definition-for-android/46698789#46698789", "title": "Cucumber Step definition for android", "body": "<p>First, inside features folder, create new folder <code>step_definitions</code> then inside this folder create new file <code>login_steps.rb</code> and now inside <code>login_steps.rb</code> you can create your's step definitions.\nTo get snippets, you can execute cucumber --dry-run and copy paste result to <code>login_steps.rb</code>.</p>\n\n<p><code>cucumber --dry-run</code> will find all steps without step definitions and will return snippets that you can use.</p>\n"}], "owner": {"reputation": 101, "user_id": 6492719, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/dc53d17d290da77b381e97ff35ad6a98?s=128&d=identicon&r=PG&f=1", "display_name": "Rajat Porwal", "link": "https://stackoverflow.com/users/6492719/rajat-porwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 123, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507762677, "creation_date": 1507707485, "question_id": 46682467, "link": "https://stackoverflow.com/questions/46682467/cucumber-step-definition-for-android", "title": "Cucumber Step definition for android", "body": "<p>I am completely new to calabash or cucumber.\nCan Anyone help me in writing calabash cucumber Step definition for entering username and password from a table?</p>\n\n<p>I need to do something like this:</p>\n\n<pre><code>Scenario Outline: check for Login\n\nThen I enter &lt;username&gt; into input field number 1\nThen I enter &lt;pass&gt; into input field number 2\nThen I press \"Login\"\nThen I should see &lt;msg&gt; \nThen I wait for 2 seconds \n\nExamples:\n| username | pass| msg|\n| hekidh@gmail.com | pass1212 | Incorrect Username and/or password|\n| sdgh@gmail.com | first212 | Incorrect Username and/or password|\n| xyx@gmail.com | second1234 | Incorrect Username and/or password|\n| abc@gmail.com | qwerty | success |\n</code></pre>\n\n<p>For doing this I need to write step definition but I don't know how to write it and where to write it?</p>\n\n<p>I saw step_defination.rb file in feature folder so do I need to write the definition in that file or need to create another file? </p>\n"}, {"tags": ["ruby", "chef-infra", "chef-recipe"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1507706333, "post_id": 46682085, "comment_id": 80311879, "body": "Have you tried something? where are you stuck?"}, {"owner": {"reputation": 197, "user_id": 6482719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd504f893ebb2c5320ee288daad9a533?s=128&d=identicon&r=PG&f=1", "display_name": "hlesnt395", "link": "https://stackoverflow.com/users/6482719/hlesnt395"}, "reply_to_user": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1507709939, "post_id": 46682085, "comment_id": 80314131, "body": "I got this.  <code>time = Time.now.strftime(&quot;%F-%T&quot;)</code> <code>Dir.mkdir &quot;#{node[&#39;default&#39;][&#39;default_backup_path&#39;]}&#47;appname_#{time}&quot;</code>  But now my problem is how to make this directory name as a variable."}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 6482719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd504f893ebb2c5320ee288daad9a533?s=128&d=identicon&r=PG&f=1", "display_name": "hlesnt395", "link": "https://stackoverflow.com/users/6482719/hlesnt395"}, "edited": false, "score": 0, "creation_date": 1507895088, "post_id": 46688878, "comment_id": 80404303, "body": "Thanks vase. I&#39;m trying do something like below.  ` FileUtils.cp_r Dir.glob&quot;#{node[&#39;default&#39;][&#39;home&#39;]}/standalone/deployments/(&zwnj;&#8203;&#39;*.ear&#39;)&quot;, &quot;#{node[&#39;default&#39;][&#39;default_backup_path&#39;]}/oms_bkp_#{time}/&quot;&zwnj;&#8203;`  which is giving me below error. could you please help me on this?  TypeError: no implicit conversion of String into Integer"}], "tags": [], "owner": {"reputation": 319, "user_id": 6884527, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/58339134cacec9b3825da9861889a035?s=128&d=identicon&r=PG&f=1", "display_name": "vase", "link": "https://stackoverflow.com/users/6884527/vase"}, "is_accepted": true, "score": 1, "last_activity_date": 1507726875, "creation_date": 1507726875, "answer_id": 46688878, "question_id": 46682085, "link": "https://stackoverflow.com/questions/46682085/create-directory-with-timestamp-in-chef/46688878#46688878", "title": "create directory with timestamp in chef", "body": "<p>While Chef is a DSL, it is still first and foremost pure Ruby. You should try to learn a little about Ruby basics before committing to Chef entirely, because a lot of what you might want to do will be more efficient if you know the language.</p>\n\n<pre><code>time = Time.now.strftime(\"%F-%T\").gsub(':','')\ndir = \"appname_bkp_#{time}\"\npath = ::File.join(node['default']['default_backup_path'], dir)\n\n# Chef resource to create a directory with default properties\ndirectory path\n</code></pre>\n"}], "owner": {"reputation": 197, "user_id": 6482719, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/fd504f893ebb2c5320ee288daad9a533?s=128&d=identicon&r=PG&f=1", "display_name": "hlesnt395", "link": "https://stackoverflow.com/users/6482719/hlesnt395"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 421, "favorite_count": 0, "accepted_answer_id": 46688878, "answer_count": 1, "score": -1, "last_activity_date": 1507726875, "creation_date": 1507706262, "question_id": 46682085, "link": "https://stackoverflow.com/questions/46682085/create-directory-with-timestamp-in-chef", "title": "create directory with timestamp in chef", "body": "<p>I want to create a directory from chef recipe to backup my existing artifacts. i want to create the backup directory with following format. </p>\n\n<blockquote>\n  <p>appname_bkp_17-10-11-125845</p>\n</blockquote>\n\n<p>for example I need to create this directory and add the directory name into a variable which is something like;</p>\n\n<blockquote>\n  <p>bkp_dir_name =  appname_bkp_17-10-11-125845</p>\n</blockquote>\n\n<p>Please advice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "strong-parameters", "has-one"], "owner": {"reputation": 331, "user_id": 7020299, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/6lN5r.jpg?s=128&g=1", "display_name": "Misu", "link": "https://stackoverflow.com/users/7020299/misu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 368, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507797382, "creation_date": 1507701090, "last_edit_date": 1507797382, "question_id": 46680732, "link": "https://stackoverflow.com/questions/46680732/rails-5-set-has-one-association-with-strong-params", "title": "Rails 5 set has_one association with strong params", "body": "<p>I am developing a Rails 5 application in which I encountered the following difficulty.</p>\n\n<p>I've got two models, let's say <code>Kid</code> and <code>Toy</code>, which are in one-to-one relationship like this:</p>\n\n<pre><code>class Kid &lt; ActiveRecord::Base\n  has_one :toy\nend\n\nclass Toy\n  belongs_to :kid, optional: true\nend\n</code></pre>\n\n<p>So the <code>toys</code> can belong to zero or one <code>kid</code>, and from day to day it can change - it is always another <code>kid</code>'s responsibility to look after a certain <code>toy</code>. Now, when I edit a <code>toy</code>, changing its <code>kid</code> is easy as can be: I just send <code>kid_id</code> in the strong params to update the record:</p>\n\n<pre><code>params.require(:toy).permit(:name, :type, :kid_id)\n</code></pre>\n\n<p>But recently, I was asked to implement the changing feature from the other way too, that is, when editing a kid, I should do something like this:</p>\n\n<pre><code>params.require(:kid).permit(:name, :age, :toy_id)\n</code></pre>\n\n<p>The problem is that - while <code>belongs_to</code> works with <code>association_id</code> and even <code>has_many</code> provides <code>association_ids</code> getter and setter - <code>has_one</code> relationship has nothing like this. What is more, <code>has_one</code> association gets saved the moment I call <code>association = @record</code>. So I simply cannot set it by sending the <code>toy_id</code> in the strong parameters.</p>\n\n<p>I could do something like <code>@kid.update(kid_params); @kid.toy = @toy</code> on the controller level, but that would rather bring model logics to my controller, not to mention that I want to check if the newly assigned <code>toy</code> did not belong to another <code>kid</code>, which I imagine as some kind of validation.</p>\n\n<p>The best I could come up with was to define some rails-like methods for <code>Kid</code> class like</p>\n\n<pre><code>def toy_id\n  @toy_id = toy.id unless defined?(@toy_id)\n  @toy_id\nend\n\ndef toy_id_changed?\n  toy_id != toy.id\nend\n</code></pre>\n\n<p>and set a <code>validation</code> and a <code>before_commit</code> callback</p>\n\n<pre><code>validate if: -&gt; { toy_id.present? &amp;&amp; toy_id_changed? } do\n  errors.add :toy_id, :other_has_it if new_toy.kid_id.present? &amp;&amp; new_toy.kid_id != id\nend\nbefore_commit if: -&gt; { toy_id_changed? } do\n  toy = new_toy\nend\n\nprivate\ndef new_toy\n  @new_toy ||= Toy.find(toy_id)\nend\n</code></pre>\n\n<p>So far it works as expected, and now I can send <code>toy_id</code> in the strong params list to update a <code>kid</code>, and it updates the <code>toy</code> association if -\n and only if - there is no validation error. I have even put it in a concern to be nice and separated.</p>\n\n<p>My question is: isn't there a rails way to do this? haven't I reinvented the wheel?</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 465, "user_id": 3566194, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000448365269/picture?type=large", "display_name": "Morris", "link": "https://stackoverflow.com/users/3566194/morris"}, "edited": false, "score": 0, "creation_date": 1507704173, "post_id": 46680690, "comment_id": 80310597, "body": "What`s being printed in your view on Reminder: s.reminder?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8755767"}, "edited": false, "score": 0, "creation_date": 1507704305, "post_id": 46680690, "comment_id": 80310674, "body": "sorry i got confused i changed s.reminder to s.id. Thanks for the help"}, {"owner": {"reputation": 465, "user_id": 3566194, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000448365269/picture?type=large", "display_name": "Morris", "link": "https://stackoverflow.com/users/3566194/morris"}, "edited": false, "score": 0, "creation_date": 1507704366, "post_id": 46680690, "comment_id": 80310707, "body": "Don&#39;t worry. Is it working now? If so, mark it as answered"}, {"owner": {"user_type": "does_not_exist", "display_name": "user8755767"}, "edited": false, "score": 0, "creation_date": 1507705301, "post_id": 46680690, "comment_id": 80311270, "body": "yes last question do you have an idea how to use the same form for creating and editing in ruby on rails"}, {"owner": {"reputation": 465, "user_id": 3566194, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000448365269/picture?type=large", "display_name": "Morris", "link": "https://stackoverflow.com/users/3566194/morris"}, "edited": false, "score": 0, "creation_date": 1507705380, "post_id": 46680690, "comment_id": 80311318, "body": "You can create a partial. Create a file like _form.html.erb and put your form inside it. Then, in your edit.html.erb and new.html.erb use &lt;%= render &#39;form&#39; %&gt;"}], "tags": [], "owner": {"reputation": 465, "user_id": 3566194, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000448365269/picture?type=large", "display_name": "Morris", "link": "https://stackoverflow.com/users/3566194/morris"}, "is_accepted": true, "score": 0, "last_activity_date": 1507701371, "last_edit_date": 1507701371, "creation_date": 1507700709, "answer_id": 46680690, "question_id": 46680584, "link": "https://stackoverflow.com/questions/46680584/foreign-key-form-for-in-rails/46680690#46680690", "title": "Foreign Key Form For in Rails", "body": "<p>You can change the method attribute from link_to and pass admin and reminder through its parameters</p>\n\n<pre><code>&lt;% link_to 'Update', user_reminder_path(s, s.reminder), method: :patch %&gt; \n&lt;% link_to 'Delete', user_reminder_path(s, s.reminder), method: :delete %&gt; \n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8755767"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 0, "accepted_answer_id": 46680690, "answer_count": 1, "score": 1, "last_activity_date": 1507706782, "creation_date": 1507700179, "last_edit_date": 1507706782, "question_id": 46680584, "link": "https://stackoverflow.com/questions/46680584/foreign-key-form-for-in-rails", "title": "Foreign Key Form For in Rails", "body": "<p>Error on the link_to. How can i access the reminders#destroy and reminders#update on the rake routes requiring a user_id and an id?</p>\n\n<pre><code>   Error\n   &lt;% link_to 'Update', user_reminder_path(s) %&gt; \n   &lt;% link_to 'Delete', user_reminder_path(s) %&gt; \n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-5", "friendly-id"], "answers": [{"tags": [], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "is_accepted": true, "score": 0, "last_activity_date": 1507696870, "creation_date": 1507696870, "answer_id": 46679971, "question_id": 46679642, "link": "https://stackoverflow.com/questions/46679642/conditionally-reset-slug-using-friendly-id-gem/46679971#46679971", "title": "Conditionally reset slug using friendly_id gem", "body": "<p>It turns out the solution is quite simple. The problem is that the update parameters come through with slug set to an empty string (<code>{\"slug\"=&gt;\"\"}</code>) instead of <code>nil</code>. I am using the <code>strip_attributes</code> gem to convert empty strings to nil, but <code>strip_attributes</code> wasn't getting called until after <code>friendly_id</code> had already checked to see if the <code>slug</code> field was <code>nil</code>. </p>\n\n<p>I solved the problem by switching the order of the callbacks to fire <code>strip_attributes</code> before <code>friendly_id</code>:</p>\n\n<pre><code>class Organization &lt; ApplicationRecord\n  extend FriendlyId\n  strip_attributes\n  friendly_id :name, use: :slugged\nend\n</code></pre>\n"}], "owner": {"reputation": 4600, "user_id": 5961578, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/df7cbfdd2a92a7926af3bbb8648318aa?s=128&d=identicon&r=PG", "display_name": "moveson", "link": "https://stackoverflow.com/users/5961578/moveson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 221, "favorite_count": 0, "accepted_answer_id": 46679971, "answer_count": 1, "score": 0, "last_activity_date": 1507696870, "creation_date": 1507694722, "question_id": 46679642, "link": "https://stackoverflow.com/questions/46679642/conditionally-reset-slug-using-friendly-id-gem", "title": "Conditionally reset slug using friendly_id gem", "body": "<p>My app assigns slugs in the usual way using the friendly_id gem:</p>\n\n<pre><code>class Organization &lt; ApplicationRecord\n  extend FriendlyId\n  friendly_id :name, use: :slugged\n  strip_attributes\nend\n</code></pre>\n\n<p>When a user changes the organization.name, by default the slug does not change. But I want to give the user the option to reset the slug to match the name.</p>\n\n<p>From the console, this is simple:</p>\n\n<pre><code>&gt;&gt; organization.update(slug: nil)\n</code></pre>\n\n<p>Friendly_id jumps in with a before_validate hook and generates a new slug. But if I try setting <code>slug</code> to <code>nil</code> using the OrganizationsController#update method, it doesn't work:</p>\n\n<pre><code>Started PATCH \"/organizations/slo-mo-100?organization%5Bslug%5D=\" for 127.0.0.1 at 2017-10-10 16:37:30 -0600\nProcessing by OrganizationsController#update as HTML\n  Parameters: {\"organization\"=&gt;{\"slug\"=&gt;\"\"}, \"id\"=&gt;\"slo-mo-100\"}\n  Organization Load (0.5ms)  SELECT  \"organizations\".* FROM \"organizations\" WHERE \"organizations\".\"slug\" = $1 ORDER BY \"organizations\".\"id\" ASC LIMIT $2  [[\"slug\", \"slo-mo-100\"], [\"LIMIT\", 1]]\n   (0.3ms)  BEGIN\n  SQL (4.1ms)  UPDATE \"organizations\" SET \"slug\" = $1, \"updated_at\" = $2 WHERE \"organizations\".\"id\" = $3  [[\"slug\", nil], [\"updated_at\", \"2017-10-10 22:37:30.077956\"], [\"id\", 1]]\n   (0.2ms)  ROLLBACK\nCompleted 500 Internal Server Error in 24ms (ActiveRecord: 6.2ms)\n\nPG::NotNullViolation - ERROR:  null value in column \"slug\" violates not-null constraint\n</code></pre>\n\n<p>I'd like the #update action to act just like the console does, that is, to assign a new slug when the incoming value is set to nil.</p>\n"}, {"tags": ["ruby", "selenium", "automation", "cucumber", "watir"], "answers": [{"tags": [], "owner": {"reputation": 1113, "user_id": 1250190, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/42209a6704f712d1eadbc28a4f024c9e?s=128&d=identicon&r=PG", "display_name": "pjd", "link": "https://stackoverflow.com/users/1250190/pjd"}, "is_accepted": true, "score": 3, "last_activity_date": 1507699350, "creation_date": 1507699350, "answer_id": 46680424, "question_id": 46679636, "link": "https://stackoverflow.com/questions/46679636/can-not-click-the-same-element-class-using-watir/46680424#46680424", "title": "Can Not Click The Same Element Class Using Watir", "body": "<p>I guess all of these tabs are part of the same web page? I.e., all in the same HTML?</p>\n\n<p>If that is the case, <code>driver.button class: ['btn btn-primary']</code> is going to stop when it finds the first instance in the HTML, but that isn't the button you are looking for every time (it's the button in the first tab, where your script worked as you expected).</p>\n\n<p>The best options in my mind are</p>\n\n<ul>\n<li>find a way to uniquely identify the button in each tab (for example, use <code>id</code> instead of <code>class</code> if possible), or</li>\n<li>pull all the buttons into a collection and click the button using its collection index after you figure out which index aligns with each tab. For example,</li>\n</ul>\n\n<p><code>button_collection = browser.buttons(:class, ['btn', 'btn-primary'])</code>\n<code>button_collection[2].click # Will click the 3rd button in the collection</code></p>\n"}, {"comments": [{"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "edited": false, "score": 0, "creation_date": 1507705065, "post_id": 46681633, "comment_id": 80311123, "body": "If someone answers your question, please accept their answer, they would get 15 points, you need to click the tick symbol at the top left of their answer."}], "tags": [], "owner": {"reputation": 140, "user_id": 6948197, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83235c900136f9a7e3681bae82db841?s=128&d=identicon&r=PG&f=1", "display_name": "Fandratt Muda", "link": "https://stackoverflow.com/users/6948197/fandratt-muda"}, "is_accepted": false, "score": 0, "last_activity_date": 1507704779, "creation_date": 1507704779, "answer_id": 46681633, "question_id": 46679636, "link": "https://stackoverflow.com/questions/46679636/can-not-click-the-same-element-class-using-watir/46681633#46681633", "title": "Can Not Click The Same Element Class Using Watir", "body": "<p>After reading the suggestions from pjd,\nI modified it a bit and got it working like this:</p>\n\n<pre><code>buildingTypeTab = driver.a id: \"tab-master-tab-building\"\nbuildingTypeTab.wait_until_present\nif buildingTypeTab.exists?\n  buildingTypeTab.click\nend\n\n  addNewButton = driver.button(:class =&gt; ['btn btn-primary'], :index =&gt; 2)\n  addNewButton.wait_until_present\n  if addNewButton.exists?\n      addNewButton.click\n  end\n</code></pre>\n\n<p>As pjd said, yes all these tabs are part of the same HTML</p>\n\n<p>Thank you.</p>\n"}], "owner": {"reputation": 140, "user_id": 6948197, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d83235c900136f9a7e3681bae82db841?s=128&d=identicon&r=PG&f=1", "display_name": "Fandratt Muda", "link": "https://stackoverflow.com/users/6948197/fandratt-muda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 189, "favorite_count": 0, "accepted_answer_id": 46680424, "answer_count": 2, "score": 1, "last_activity_date": 1507704779, "creation_date": 1507694683, "question_id": 46679636, "link": "https://stackoverflow.com/questions/46679636/can-not-click-the-same-element-class-using-watir", "title": "Can Not Click The Same Element Class Using Watir", "body": "<p>I have the following screen:\n<a href=\"https://i.stack.imgur.com/5U3qX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/5U3qX.png\" alt=\"enter image description here\"></a>\nAnd I use the following Ruby script to click the \"Add New\" button:</p>\n\n<pre><code>vendorTab = driver.a id: \"tab-master-tab-vendor\"\n  vendorTab.wait_until_present\n  if vendorTab.exists?\n    vendorTab.click\n  end\n\n  addNewButton = driver.button class: ['btn btn-primary']\n  addNewButton.wait_until_present\n  if addNewButton.exists?\n      addNewButton.click\n  end\n</code></pre>\n\n<p>But, when I move to another tab and try to click the same \"Add New\" button, the Ruby script doesn't work.\n<a href=\"https://i.stack.imgur.com/yTylJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/yTylJ.png\" alt=\"enter image description here\"></a>\nIs there anything wrong with my Ruby code?</p>\n\n<pre><code>buildingTypeTab = driver.a id: \"tab-master-tab-building\"\nbuildingTypeTab.wait_until_present\nif buildingTypeTab.exists?\n  buildingTypeTab.click\nend\n\n  addNewButton = driver.button class: ['btn btn-primary']\n  addNewButton.wait_until_present\n  if addNewButton.exists?\n      addNewButton.click\n  end\n</code></pre>\n\n<p>I Appreciate your help. Thank you very much.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "roo-gem"], "comments": [{"owner": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "edited": false, "score": 0, "creation_date": 1507692312, "post_id": 46679251, "comment_id": 80306620, "body": "Doesn\u2018t look like a full URL"}, {"owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "reply_to_user": {"reputation": 3334, "user_id": 4473327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hP14q.jpg?s=128&g=1", "display_name": "neuhaus", "link": "https://stackoverflow.com/users/4473327/neuhaus"}, "edited": false, "score": 0, "creation_date": 1507692980, "post_id": 46679251, "comment_id": 80306760, "body": "@neuhaus, I tried with full url followed by https, header = spreadsheet.row(1), Errno::ENOENT: No such file or directory rb_sysopen - /uploads/imported_files/7a6f0463-b3cd-48f8-a579-bc27951242fe&zwnj;&#8203;/13c96e3e-d3f3-4ed8-&zwnj;&#8203;8d9a-b9ea03c0cc8c.cs&zwnj;&#8203;v"}], "answers": [{"comments": [{"owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "edited": false, "score": 0, "creation_date": 1507705219, "post_id": 46680658, "comment_id": 80311229, "body": "I accept your answer, but it is not working with  spreadsheet = Roo::Spreadsheet.open(open(imported_file.file_url)), throwing ArgumentError: Can&#39;t detect the type of /tmp/open-uri20171011-8816-ckswos - please use the :extension option to declare its type. but after passing extension along with this spreadsheet = Roo::Spreadsheet.open(open(imported_file.file_url), extension: :csv) it was working fine, but I am thinking it is not a perfect solution"}, {"owner": {"reputation": 28830, "user_id": 221213, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bbfbca5273f9d020ef4ccfbadcecccba?s=128&d=identicon&r=PG", "display_name": "KARASZI Istv&#225;n", "link": "https://stackoverflow.com/users/221213/karaszi-istv%c3%a1n"}, "reply_to_user": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "edited": false, "score": 0, "creation_date": 1507709093, "post_id": 46680658, "comment_id": 80313597, "body": "I believe Roo is trying to - questionably - guess the file type by the extension and <code>open-uri</code> downloads the URL to a temporary file, that is the reason you need to set the extension."}], "tags": [], "owner": {"reputation": 28830, "user_id": 221213, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bbfbca5273f9d020ef4ccfbadcecccba?s=128&d=identicon&r=PG", "display_name": "KARASZI Istv&#225;n", "link": "https://stackoverflow.com/users/221213/karaszi-istv%c3%a1n"}, "is_accepted": false, "score": 4, "last_activity_date": 1507700567, "creation_date": 1507700567, "answer_id": 46680658, "question_id": 46679251, "link": "https://stackoverflow.com/questions/46679251/getting-errnoenoent-no-such-file-or-directory-rb-sysopen-when-trying-to-ope/46680658#46680658", "title": "Getting Errno::ENOENT: No such file or directory @ rb_sysopen When trying to open remote file url in Roo gem(Ruby on rails)", "body": "<p>To open URLs you should require the <code>open-uri</code> library first:</p>\n\n<pre><code>require 'open-uri'\n</code></pre>\n\n<p>See the example:</p>\n\n<pre><code>open('http://example.com/')\n# throws Errno::ENOENT: No such file or directory @ rb_sysopen - http://example.com/\n\nrequire 'open-uri'\nopen('http://example.com/')\n# opens the website\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 28830, "user_id": 221213, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bbfbca5273f9d020ef4ccfbadcecccba?s=128&d=identicon&r=PG", "display_name": "KARASZI Istv&#225;n", "link": "https://stackoverflow.com/users/221213/karaszi-istv%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1507715761, "post_id": 46684675, "comment_id": 80317962, "body": "I don&#39;t recommend hiding all the exceptions with <code>rescue nil</code> since it can shadow a lot of issues."}, {"owner": {"reputation": 28830, "user_id": 221213, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bbfbca5273f9d020ef4ccfbadcecccba?s=128&d=identicon&r=PG", "display_name": "KARASZI Istv&#225;n", "link": "https://stackoverflow.com/users/221213/karaszi-istv%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1507738707, "post_id": 46684675, "comment_id": 80333826, "body": "Did you need to require the <code>open-uri</code>?"}, {"owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "reply_to_user": {"reputation": 28830, "user_id": 221213, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bbfbca5273f9d020ef4ccfbadcecccba?s=128&d=identicon&r=PG", "display_name": "KARASZI Istv&#225;n", "link": "https://stackoverflow.com/users/221213/karaszi-istv%c3%a1n"}, "edited": false, "score": 0, "creation_date": 1507740307, "post_id": 46684675, "comment_id": 80334753, "body": "@KARASZI Istv&#225;n, Not required without require it was working"}], "tags": [], "owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "is_accepted": true, "score": 2, "last_activity_date": 1507714268, "creation_date": 1507714268, "answer_id": 46684675, "question_id": 46679251, "link": "https://stackoverflow.com/questions/46679251/getting-errnoenoent-no-such-file-or-directory-rb-sysopen-when-trying-to-ope/46684675#46684675", "title": "Getting Errno::ENOENT: No such file or directory @ rb_sysopen When trying to open remote file url in Roo gem(Ruby on rails)", "body": "<p>Finally following code is worked for me.     </p>\n\n<pre><code>spreadsheet = Roo::Spreadsheet.open(open(imported_file.file_url), extension: File.extname(imported_file.file_url).gsub('.','').to_sym) rescue nil\n</code></pre>\n"}], "owner": {"reputation": 515, "user_id": 5924564, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6i09CKFBb2E/AAAAAAAAAAI/AAAAAAAAAMw/E-23EUWi1ao/photo.jpg?sz=128", "display_name": "Nataraja B", "link": "https://stackoverflow.com/users/5924564/nataraja-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3942, "favorite_count": 0, "accepted_answer_id": 46684675, "answer_count": 2, "score": 2, "last_activity_date": 1509372128, "creation_date": 1507692159, "last_edit_date": 1509372128, "question_id": 46679251, "link": "https://stackoverflow.com/questions/46679251/getting-errnoenoent-no-such-file-or-directory-rb-sysopen-when-trying-to-ope", "title": "Getting Errno::ENOENT: No such file or directory @ rb_sysopen When trying to open remote file url in Roo gem(Ruby on rails)", "body": "<p>I have stored an file in AWS s3 storage when trying to open an file to import data using <strong>roo</strong> gem, It raising following error <code>Errno::ENOENT: No such file or directory @ rb_sysopen</code> </p>\n\n<pre><code>def self.import(file, user_id)\n        imported_file = ImportedFile.find(file)\n        spreadsheet = Roo::Spreadsheet.open(open(imported_file.file_url), extension: :csv)\n        spreadsheet = Roo::Spreadsheet.open(imported_file.file)\n      header = spreadsheet.row(1)//raising error here\nend\n</code></pre>\n\n<p>I even tried this also </p>\n\n<pre><code>spreadsheet = Roo::Spreadsheet.open(imported_file.file_url)\n</code></pre>\n\n<p>Getting below error in log</p>\n\n<pre><code>Errno::ENOENT: No such file or directory @ rb_sysopen - /uploads/imported_files/7a6f0463-b3cd-48f8-a579-bc27951242fe/13c96e3e-d3f3-4ed8-8d9a-b9ea03c0cc8c.csv\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "controller"], "answers": [{"tags": [], "owner": {"reputation": 5519, "user_id": 938947, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/f611b152b4fa9fe2a05f4ee9b84fdcb7?s=128&d=identicon&r=PG", "display_name": "widjajayd", "link": "https://stackoverflow.com/users/938947/widjajayd"}, "is_accepted": false, "score": 0, "last_activity_date": 1507683466, "creation_date": 1507683466, "answer_id": 46678120, "question_id": 46678025, "link": "https://stackoverflow.com/questions/46678025/displaying-categories-in-ascending-order/46678120#46678120", "title": "Displaying Categories in Ascending Order", "body": "<p>yes you can, here is the sample (consider you using form_for with f as form variable) </p>\n\n<pre><code>&lt;%= f.select :category_id, Category.uniq.pluck(:name, :id).sort, { include_blank: true }, { class: 'your class name' } %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 990, "user_id": 7240463, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/RQUCc.jpg?s=128&g=1", "display_name": "current_user", "link": "https://stackoverflow.com/users/7240463/current-user"}, "is_accepted": false, "score": 0, "last_activity_date": 1507690082, "creation_date": 1507690082, "answer_id": 46678991, "question_id": 46678025, "link": "https://stackoverflow.com/questions/46678025/displaying-categories-in-ascending-order/46678991#46678991", "title": "Displaying Categories in Ascending Order", "body": "<p>If your category is associated with a resource and you are trying to display all the categories in a form that needs to be saved.I am assuming that you have a resource like articles and wants to add a category to the article while saving into the database.</p>\n\n<pre><code>    def new\n    @article = Article.new\n    @temp = Category.alphabetically\n    @categories = @temp.all.map{|c| [ c.name, c.id ] }\n    end\n</code></pre>\n\n<p>in your categories model</p>\n\n<p>category.rb</p>\n\n<pre><code> class Category &lt; ApplicationRecord\n    scope :alphabetically, -&gt; { order(name: :asc) }\n end\n</code></pre>\n\n<p>In the view </p>\n\n<p>_form.html.erb</p>\n\n<pre><code> &lt;%= select_tag(:category_id, options_for_select(@categories), class: \"form-control\", :prompt =&gt; \"Select one!\") %&gt;\n</code></pre>\n\n<p>Please let me know if you have any issues.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3145539, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eb3d6250748bc89a84abea3b429cbe3?s=128&d=identicon&r=PG&f=1", "display_name": "Vinu", "link": "https://stackoverflow.com/users/3145539/vinu"}, "is_accepted": false, "score": 0, "last_activity_date": 1507730111, "creation_date": 1507730111, "answer_id": 46690071, "question_id": 46678025, "link": "https://stackoverflow.com/questions/46678025/displaying-categories-in-ascending-order/46690071#46690071", "title": "Displaying Categories in Ascending Order", "body": "<p>You can call all categories in ascending order based on your attribute name</p>\n\n<p>@categories = Categories.all(:order => \"name ASC\")</p>\n\n<p>here \"name Asc\" name refers to category name</p>\n\n<p>try this in rails console ..You can see that order</p>\n"}], "owner": {"reputation": 1, "user_id": 8754613, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-L5ln0_AUcmI/AAAAAAAAAAI/AAAAAAAAAB4/17-tYJ-KZzM/photo.jpg?sz=128", "display_name": "Sebi S", "link": "https://stackoverflow.com/users/8754613/sebi-s"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 213, "favorite_count": 0, "answer_count": 3, "score": -1, "last_activity_date": 1507730111, "creation_date": 1507682723, "question_id": 46678025, "link": "https://stackoverflow.com/questions/46678025/displaying-categories-in-ascending-order", "title": "Displaying Categories in Ascending Order", "body": "<p>I am building a dropdown menu that displays categories in Ruby on Rails and would like to display the dropdown in alphabetical order (A...Z).</p>\n\n<p>Question:\n<strong><em>\"Can I order the dropdown menu alphabetically via editing the methods in the controller or views?\"</em></strong></p>\n\n<p>Since they are not alphabetically seeded in the database, I was wondering if there was a way to have data display data that currently looks like this by default:<br>\n<br>\n|<em>DROPDOWN</em>|<br>\n|_Cooking____|<br>\n|_Zoology____|<br>\n|_History_____|<br>\n|_Gardening__|<br>\n|_Archery____|<br>\n<br>\ninto:<br>\n<br>\n|DROPDOWN|<br>\n|_Archery____|<br>\n|_Cooking____|<br>\n|_Gardening__|<br>\n|_History_____|<br>\n|_Zoology____|<br>\n<br>\nCurrently, Categories has values <em>id, name, created_at, and updated_at</em>.</p>\n\n<p>Here is a snippet of the database's ActiveRecord relation:</p>\n\n<p>ActiveRecord::Relation<br>\nCategory id: 1, name: \"Technology\", created_at: \"2017-10-10 21:48:59\", updated_at: \"2017-10-10 21:48:59\"<br> \nCategory id: 2, name: \"Horror/Mystery\", created_at: \"2017-10-10 21:50:38\", updated_at: \"2017-10-11 00:06:38\"<br> \nCategory id: 3, name: \"Fantasy\", created_at: \"2017-10-10 21:50:43\", updated_at: \"2017-10-10 21:50:43\"<br>\nCategory id: 4, name: \"Historical Fiction\", created_at: \"2017-10-10 21:50:51\", updated_at: \"2017-10-10 21:50:51\"<br>\n</p>\n\n<p>If this is not sufficient, I can provide the relevant files to help shed light on the issue.</p>\n\n<p>Thank you for taking time out of your day to give me a hand!</p>\n"}, {"tags": ["ruby", "regex", "numbers"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1507706825, "post_id": 46678021, "comment_id": 80312182, "body": "<code>(\\+|plus)</code> \u2013 do you also want to match the word <code>plus</code> in addition to <code>+</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 9971, "user_id": 8255744, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de22299534b5a8ed244ee8ff4aa6c481?s=128&d=identicon&r=PG&f=1", "display_name": "Simple Lime", "link": "https://stackoverflow.com/users/8255744/simple-lime"}, "edited": false, "score": 0, "creation_date": 1507691079, "post_id": 46678245, "comment_id": 80306337, "body": "you can also use <code>\\D</code> instead of <code>[^\\d]</code>"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 3, "last_activity_date": 1507750088, "last_edit_date": 1507750088, "creation_date": 1507684463, "answer_id": 46678245, "question_id": 46678021, "link": "https://stackoverflow.com/questions/46678021/how-do-i-match-something-only-if-a-character-doesnt-follow-a-pattern/46678245#46678245", "title": "How do I match something only if a character doesn&#39;t follow a pattern?", "body": "<pre><code>r = /\\A   # match beginning of string\n     \\d+  # match one or more digits\n     \\+   # match plus sign\n     \\D*  # match zero or more characters other than a digit\n     \\z   # match end of string\n    /x    # free-spacing regex definition mode\n\n\"23+abcdef\".match?(r)\n  #=&gt; true\n\"1111111+  __++\".match?(r)\n  #=&gt; true\n\"23 abcdef\".match?(r)\n  #=&gt; false\n\"2+3\".match?(r)\n  #=&gt; false\n\"2+ L43\".match?(r)\n  #=&gt; false\n</code></pre>\n\n<p>If at least one character that is not a digit is to follow <code>'+'</code>, change  <code>\\D*</code> in the regex to <code>\\D+</code>.</p>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 46678245, "answer_count": 1, "score": 0, "last_activity_date": 1507750088, "creation_date": 1507682668, "question_id": 46678021, "link": "https://stackoverflow.com/questions/46678021/how-do-i-match-something-only-if-a-character-doesnt-follow-a-pattern", "title": "How do I match something only if a character doesn&#39;t follow a pattern?", "body": "<p>I\"m using Ruby 2.4  How do I write a regular expression that matches a series of numbers, the plus sign and then any sequence that follows provided that sequence doesn't contain another number?  For example, this would match per my rules</p>\n\n<pre><code>23+abcdef\n</code></pre>\n\n<p>as would this</p>\n\n<pre><code>1111111+  __++\n</code></pre>\n\n<p>But this would not</p>\n\n<pre><code>2+3\n</code></pre>\n\n<p>Neither would this</p>\n\n<pre><code>2+ L43\n</code></pre>\n\n<p>I tried this but was unsuccessful ...</p>\n\n<pre><code>/\\d+[[:space:]]*(\\+|plus).*([^\\d]|$)/i.match(mystr)\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 385, "user_id": 3318043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38b9a9589bc51426c7a77b972caccd9b?s=128&d=identicon&r=PG", "display_name": "srajappa", "link": "https://stackoverflow.com/users/3318043/srajappa"}, "edited": false, "score": 0, "creation_date": 1507712248, "post_id": 46679883, "comment_id": 80315512, "body": "My requirement was to access the attributes from the Role file. Yes, you are right that they get merged with the attributes in the <i>node</i>. I overlooked this part and was indeed using &quot;Chef in a wrong way&quot;. Thanks for patiently helping me with this :)"}], "tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": true, "score": 1, "last_activity_date": 1507696250, "creation_date": 1507696250, "answer_id": 46679883, "question_id": 46677666, "link": "https://stackoverflow.com/questions/46677666/how-can-a-node-read-a-role-file/46679883#46679883", "title": "How can a node read a role file?", "body": "<p>As you write that the <strong>node</strong> \"mycomputer\" has the given role in its run list applied, the contained information is kind of \"automatically\" available. To be precise, the attributes (and additional run list entries) are automatically merged with other attributes (from environments, cookbooks, etc).</p>\n\n<p>So if your role \"myrole\" defines the following attributes:</p>\n\n\n\n<pre class=\"lang-rb prettyprint-override\"><code>default_attributes 'apache2' =&gt; {\n  'listen_ports' =&gt; [ '80', '443' ]\n}\n</code></pre>\n\n<p>this will be accessible during the chef run on your node via</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>node['apache2']['listen_ports']\n</code></pre>\n\n<p>Attributes are fundamental concept of chef and should solve your problem to define some information in a role and read it during the chef run on some node.</p>\n\n<p>You find more information about that concept in the docs about <a href=\"https://docs.chef.io/roles.html#attribute-precedence\" rel=\"nofollow noreferrer\">Attribute Precedence</a>. There's not really a way to read the plain file - if you really think you need to do so, you're using Chef in a wrong way. Better state with your next question, what your ultimate goal is.</p>\n"}], "owner": {"reputation": 385, "user_id": 3318043, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/38b9a9589bc51426c7a77b972caccd9b?s=128&d=identicon&r=PG", "display_name": "srajappa", "link": "https://stackoverflow.com/users/3318043/srajappa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 46679883, "answer_count": 1, "score": 0, "last_activity_date": 1507696250, "creation_date": 1507679614, "question_id": 46677666, "link": "https://stackoverflow.com/questions/46677666/how-can-a-node-read-a-role-file", "title": "How can a node read a role file?", "body": "<p>Say we have a node named <strong><em>mycomputer</em></strong>. And it has a role in it's run_list say <code>myrole</code>.</p>\n\n<p>Now, the <strong><em>mycomputer</em></strong> wants to access and read the role file which is present in it's run_list. </p>\n\n<p>Is there a way to do this ?</p>\n\n<hr>\n\n<p>I tried </p>\n\n<pre><code>knife role show myrole\n</code></pre>\n\n<p>As it doesn't have knife.rb and user-key.pem file (.chef directory) so it cannot access it. </p>\n\n<hr>\n\n<p>Please let me know if there is a way to access the role file viz. <code>myrole</code>. </p>\n"}, {"tags": ["ruby", "git", "commit"], "answers": [{"comments": [{"owner": {"reputation": 1690, "user_id": 4602919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9c8081c1665f7277b43cf167af5ccf28?s=128&d=identicon&r=PG&f=1", "display_name": "Asara", "link": "https://stackoverflow.com/users/4602919/asara"}, "edited": false, "score": 0, "creation_date": 1507678750, "post_id": 46677189, "comment_id": 80303466, "body": "the git repo is already there on the server where I wants to run the ruby script, I dont need to push, just commit."}], "tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": false, "score": 1, "last_activity_date": 1507676074, "last_edit_date": 1507676074, "creation_date": 1507675907, "answer_id": 46677189, "question_id": 46677141, "link": "https://stackoverflow.com/questions/46677141/run-git-from-within-ruby-script/46677189#46677189", "title": "run git from within ruby script", "body": "<p>Just use a Git library like <code>ruby-git</code>- establish the repo in a temp folder, pull the project into it, change the file, commit it, push it, and delete the repo. (Assuming it's a rare operation. If not, you should probably establish a permanent repo folder and just keep pulling, committing, and pushing it.)</p>\n"}, {"tags": [], "owner": {"reputation": 149, "user_id": 2421658, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7919e23b60db82b77d97e0ae5fc44a50?s=128&d=identicon&r=PG", "display_name": "Preston", "link": "https://stackoverflow.com/users/2421658/preston"}, "is_accepted": true, "score": 4, "last_activity_date": 1507687610, "creation_date": 1507687610, "answer_id": 46678647, "question_id": 46677141, "link": "https://stackoverflow.com/questions/46677141/run-git-from-within-ruby-script/46678647#46678647", "title": "run git from within ruby script", "body": "<p>Call a shell command in your ruby script.  There are lots of ways to execute a shell command in ruby.  Backticks are one of them.  Look at this <a href=\"https://stackoverflow.com/questions/2232/calling-shell-commands-from-ruby\">Calling shell commands from Ruby</a> for more.</p>\n\n<pre><code>`git commit -am \"Committing from ruby script\"`\n</code></pre>\n"}], "owner": {"reputation": 1690, "user_id": 4602919, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9c8081c1665f7277b43cf167af5ccf28?s=128&d=identicon&r=PG&f=1", "display_name": "Asara", "link": "https://stackoverflow.com/users/4602919/asara"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 416, "favorite_count": 1, "accepted_answer_id": 46678647, "answer_count": 2, "score": 1, "last_activity_date": 1507687610, "creation_date": 1507675619, "question_id": 46677141, "link": "https://stackoverflow.com/questions/46677141/run-git-from-within-ruby-script", "title": "run git from within ruby script", "body": "<p>I want to dave or change a file with ruby, thats no problem. But this file is part of a git repository that needs to be commited after the change. How can I achieve that with the ruby script?</p>\n"}, {"tags": ["html", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1060, "user_id": 5369466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f49eb1ce3f9e74d05105d2e6827e82b4?s=128&d=identicon&r=PG", "display_name": "Nathan Hinchey", "link": "https://stackoverflow.com/users/5369466/nathan-hinchey"}, "edited": false, "score": 1, "creation_date": 1507675164, "post_id": 46676966, "comment_id": 80302530, "body": "Are you specifying a <code>value</code> attribute for your radio buttons?"}, {"owner": {"reputation": 560, "user_id": 7721999, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/bRWQu.jpg?s=128&g=1", "display_name": "Andy", "link": "https://stackoverflow.com/users/7721999/andy"}, "edited": false, "score": 0, "creation_date": 1507681005, "post_id": 46676966, "comment_id": 80303970, "body": "Can you please paste the output of your terminal after you submit the form?"}, {"owner": {"reputation": 465, "user_id": 3566194, "user_type": "registered", "accept_rate": 43, "profile_image": "https://graph.facebook.com/100000448365269/picture?type=large", "display_name": "Morris", "link": "https://stackoverflow.com/users/3566194/morris"}, "edited": false, "score": 0, "creation_date": 1507687607, "post_id": 46676966, "comment_id": 80305498, "body": "Are you adding this parameter to your strong parameters?"}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 8611220, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v2oas.jpg?s=128&g=1", "display_name": "\u122doll\u03b9n", "link": "https://stackoverflow.com/users/8611220/%e1%88%adoll%ce%b9n"}, "edited": false, "score": 0, "creation_date": 1507731919, "post_id": 46682477, "comment_id": 80329262, "body": "Perfect! I appreciate your help very much, and the explanation made sense. Thank you!"}], "tags": [], "owner": {"reputation": 5669, "user_id": 7429104, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/TZAPt.jpg?s=128&g=1", "display_name": "Aman", "link": "https://stackoverflow.com/users/7429104/aman"}, "is_accepted": true, "score": 0, "last_activity_date": 1507709744, "last_edit_date": 1507709744, "creation_date": 1507707516, "answer_id": 46682477, "question_id": 46676966, "link": "https://stackoverflow.com/questions/46676966/radio-buttons-not-submitting-data/46682477#46682477", "title": "Radio Buttons Not Submitting Data", "body": "<p>Reason being you have changed the name of radio button from <code>content</code> to <code>radios</code>\nso if your are searching <code>params[:respond][:content]</code> it will result to <code>nil</code>, here you need to search <code>params[:respond][:radios]</code>.</p>\n\n<p>However if you are using strong parameter and your field_name is also content then i would suggest you not to specify the name of radio button.</p>\n\n<pre><code>&lt;%= f.radio_button :content, @ans.content, :type =&gt; \"radio\", :id =&gt;\"radio#{@ans.id}\"%&gt;\n</code></pre>\n\n<p>it automatically takes name of radio button as <code>content</code> you can see it by inspect element in browser</p>\n\n<p>thanks</p>\n"}], "owner": {"reputation": 41, "user_id": 8611220, "user_type": "registered", "accept_rate": 38, "profile_image": "https://i.stack.imgur.com/v2oas.jpg?s=128&g=1", "display_name": "\u122doll\u03b9n", "link": "https://stackoverflow.com/users/8611220/%e1%88%adoll%ce%b9n"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 46682477, "answer_count": 1, "score": 0, "last_activity_date": 1507709744, "creation_date": 1507674391, "question_id": 46676966, "link": "https://stackoverflow.com/questions/46676966/radio-buttons-not-submitting-data", "title": "Radio Buttons Not Submitting Data", "body": "<p>I'm making a quiz-type application and created the form to submit answers. It all works well, the question_id and user_id get submitted to the database, but the content never goes through. It always shows as nil. I'm 99% sure the problem is with my form, so here it is:</p>\n\n<pre><code>  &lt;%= form_for @respond do |f| %&gt;\n    &lt;%= f.text_field :question_id, value: @q.id, :style =&gt; \"position:absolute;left:3000px;\" %&gt;\n    &lt;%= f.text_field :user_id, value: current_user.id, :style =&gt; \"position:absolute;left:3000px;\" %&gt;\n      &lt;% for @ans in Answer.all.where('question_id = ?', @q.id) %&gt;\n          &lt;%= f.radio_button :content, @ans.content, :type =&gt; \"radio\", :name =&gt; \"radios\", :id =&gt; \"radio#{@ans.id}\"%&gt;\n          &lt;label for=\"radio&lt;%= @ans.id %&gt;\" class=\"btn-lg btn-secondary\" style=\"width:100%;background-color:#eaeaea;margin-bottom:20px\"&gt;&lt;%= @ans.content %&gt;&lt;/label&gt;\n      &lt;% end %&gt;\n      &lt;div class=\"actions\"&gt;\n      &lt;%= f.submit \"Submit\", :class =&gt; \"btn-lg btn-primary\", :style =&gt; \"width:100%;margin-top:20px;margin-bottom:20px;\" %&gt;\n     &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p>I'm probably just missing something juvenile, but it's beyond me at this point. Any help would be appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "roo-gem"], "answers": [{"comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "edited": false, "score": 0, "creation_date": 1507672627, "post_id": 46676281, "comment_id": 80301635, "body": "Perfect. Upvoted and accepted. I forget that the return value of <code>puts</code> is not what gets printed to the console. The line wraps don&#39;t work but that&#39;s because I have to figure out how to get the wrap style applied to my rows."}], "tags": [], "owner": {"reputation": 5250, "user_id": 5154683, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eae81933dce5ced9ec019414bbd4f0f4?s=128&d=identicon&r=PG&f=1", "display_name": "Robert Nubel", "link": "https://stackoverflow.com/users/5154683/robert-nubel"}, "is_accepted": true, "score": 1, "last_activity_date": 1507670753, "creation_date": 1507670753, "answer_id": 46676281, "question_id": 46676028, "link": "https://stackoverflow.com/questions/46676028/rails-roo-gem-xlsx-output-contains-the-object-not-the-output-of-method/46676281#46676281", "title": "Rails Roo gem .xlsx output contains the object not the output of method", "body": "<p>The problem is that your <code>print_results</code> method prints out what you want to stdout (that is, the console), but still returns the original hash. The return value of the method is all that matters to Roo.</p>\n\n<p>What you want to do is rewrite print_results to return the formatted string:</p>\n\n<pre><code>def print_results\n  self.results.map do |k,v|\n    \"#{k.titleize}:#{v.humanize}\\r\\n\"\n  end.join\nend\n</code></pre>\n\n<p>This will return a string (note the use of <code>.join</code> to combine the array of strings returned by <code>.map</code>) that you can throw into Roo and get your desired output.</p>\n"}], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 154, "favorite_count": 0, "accepted_answer_id": 46676281, "answer_count": 1, "score": 0, "last_activity_date": 1507670753, "creation_date": 1507669560, "question_id": 46676028, "link": "https://stackoverflow.com/questions/46676028/rails-roo-gem-xlsx-output-contains-the-object-not-the-output-of-method", "title": "Rails Roo gem .xlsx output contains the object not the output of method", "body": "<p>I am using the Roo gem to output a spreadsheet from a Rails app. One of my columns is a hash (Postgres DB). I would like to format the cell contents into something more readable. I am using a method to return a human readable cell. </p>\n\n<p>The column data looks like this:</p>\n\n<pre><code>Inspection.first.results\n=&gt; {\"soiled\"=&gt;\"oil on back\",\n\"assigned_to\"=&gt;\"Warehouse@firedatasolutions.com\",\n\"contaminated\"=&gt;\"blood on left cuff\",\n\"inspection_date\"=&gt;\"01/01/2017\",\n\"physical_damage_seam_integrity\"=&gt;\"\",\n\"physical_damage_thermal_damage\"=&gt;\"\",\n\"physical_damage_reflective_trim\"=&gt;\"\",\n\"physical_damage_rips_tears_cuts\"=&gt;\"small tear on right sleeve\",\n\"correct_assembly_size_compatibility_of_shell_liner_and_drd\"=&gt;\"\",\n\"physical_damage_damaged_or_missing_hardware_or_closure_systems\"=&gt;\"\"}\n</code></pre>\n\n<p>In my Inspections model I defined the following method:</p>\n\n<pre><code>def print_results\n  self.results.each do |k,v|\n    puts \"#{k.titleize}:#{v.humanize}\\r\\n\"\n  end\nend\n</code></pre>\n\n<p>So in the console I get this:</p>\n\n<pre><code>Inspection.first.print_results\n\nSoiled:Oil on back\nAssigned To:Warehouse\nContaminated:Blood on left cuff\nInspection Date:01/01/2017\nPhysical Damage Seam Integrity:\nPhysical Damage Thermal Damage:\nPhysical Damage Reflective Trim:\nPhysical Damage Rips Tears Cuts:Small tear on right sleeve\nCorrect Assembly Size Compatibility Of Shell Liner And Drd:\nPhysical Damage Damaged Or Missing Hardware Or Closure Systems:\n=&gt; {\"soiled\"=&gt;\"oil on back\",\n \"assigned_to\"=&gt;\"Warehouse\",\n \"contaminated\"=&gt;\"blood on left cuff\",\n \"inspection_date\"=&gt;\"01/01/2017\",\n \"physical_damage_seam_integrity\"=&gt;\"\",\n \"physical_damage_thermal_damage\"=&gt;\"\",\n \"physical_damage_reflective_trim\"=&gt;\"\",\n \"physical_damage_rips_tears_cuts\"=&gt;\"small tear on right sleeve\",\n \"correct_assembly_size_compatibility_of_shell_liner_and_drd\"=&gt;\"\",\n \"physical_damage_damaged_or_missing_hardware_or_closure_systems\"=&gt;\"\"}\n</code></pre>\n\n<p>But when I put this in the index.xlsx.axlsx file</p>\n\n<pre><code>wb = xlsx_package.workbook\nwb.add_worksheet(name: \"Inspections\") do |sheet|\n  sheet.add_row ['Serial Number', 'Category', 'Inspection Type', 'Date', \n   'Pass/Fail', 'Assigned To', 'Inspected By', 'Inspection Details']\n  @inspections.each do |inspection|\n    sheet.add_row [inspection.ppe.serial, inspection.ppe.category, \n    inspection.advanced? ? 'Advanced' : 'Routine',\n    inspection.results['inspection_date'], \n    inspection.passed? ? 'Pass' : 'Fail', \n    inspection.ppe.user.last_first_name,\n    inspection.user.last_first_name, \n    inspection.print_results]\n  end\nend\n</code></pre>\n\n<p>The output in the spreadsheet is the original hash, not the results of the print statement. </p>\n\n<pre><code>{\"soiled\"=&gt;\"oil on back\", \n\"assigned_to\"=&gt;\"Warehouse\", \n\"contaminated\"=&gt;\"blood on left cuff\", \"inspection_date\"=&gt;\"01/01/2017\", \n\"physical_damage_seam_integrity\"=&gt;\"\", \n\"physical_damage_thermal_damage\"=&gt;\"\", \n\"physical_damage_reflective_trim\"=&gt;\"\", \n\"physical_damage_rips_tears_cuts\"=&gt;\"small tear on right sleeve\", \n\"correct_assembly_size_compatibility_of_shell_liner_and_drd\"=&gt;\"\", \n\"physical_damage_damaged_or_missing_hardware_or_closure_systems\"=&gt;\"\"}\n</code></pre>\n\n<p>Is it possible to get the output of the method into the cell rather than the hash object?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "rubymine"], "comments": [{"owner": {"reputation": 1349, "user_id": 6163262, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7f3655350c57cb94195d64808b7ba61?s=128&d=identicon&r=PG&f=1", "display_name": "whodini9", "link": "https://stackoverflow.com/users/6163262/whodini9"}, "edited": false, "score": 1, "creation_date": 1507669119, "post_id": 46675411, "comment_id": 80300106, "body": "Have you installed the devkit?"}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1507676156, "post_id": 46675411, "comment_id": 80302770, "body": "It&#39;s best not to post your error as screenshot, just paste it into the question if you are able."}, {"owner": {"reputation": 1323, "user_id": 8206432, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh3.googleusercontent.com/-23DNVlLluZk/AAAAAAAAAAI/AAAAAAAAAEo/Ebjepzhl6i8/photo.jpg?sz=128", "display_name": "Jack Moody", "link": "https://stackoverflow.com/users/8206432/jack-moody"}, "edited": false, "score": 0, "creation_date": 1507681092, "post_id": 46675411, "comment_id": 80303984, "body": "Have you installed Ruby yet? You must have Ruby installed on your computer before you can run the Rails framework."}, {"owner": {"reputation": 11, "user_id": 7865660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/522238bef7c6b8c25086bea6a2187ddf?s=128&d=identicon&r=PG&f=1", "display_name": "Vardan", "link": "https://stackoverflow.com/users/7865660/vardan"}, "edited": false, "score": 0, "creation_date": 1507693601, "post_id": 46675411, "comment_id": 80306874, "body": "Yes I&#39;ve insstalled both ruby and msys32. I can run ruby programs but I can&#39;t install rails."}], "owner": {"reputation": 11, "user_id": 7865660, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/522238bef7c6b8c25086bea6a2187ddf?s=128&d=identicon&r=PG&f=1", "display_name": "Vardan", "link": "https://stackoverflow.com/users/7865660/vardan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507686286, "creation_date": 1507667198, "last_edit_date": 1507686286, "question_id": 46675411, "link": "https://stackoverflow.com/questions/46675411/gem-install-rails-fails-to-be-executed", "title": "gem install rails fails to be executed", "body": "<p>This command doesn't work and brings the following error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/BNKN3.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BNKN3.png\" alt=\"enter image description here\"></a></p>\n\n<p>And this is the screenshot of the file that in which I should have seen the error:</p>\n\n<p><a href=\"https://i.stack.imgur.com/laUw1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/laUw1.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby", "gitlab", "markdown", "yard"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1507667308, "post_id": 46675338, "comment_id": 80299190, "body": "That does not make sense. The purpose of markdown is for human to write and let the computer generate html from it. If you have html from the beginning, why would you need a markdown file?"}, {"owner": {"reputation": 119, "user_id": 6206626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300a4d34a04354b8c91cf2c7a81f4fb3?s=128&d=identicon&r=PG&f=1", "display_name": "R. V.", "link": "https://stackoverflow.com/users/6206626/r-v"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507667704, "post_id": 46675338, "comment_id": 80299376, "body": "I do not have any html. I have documentation in code as in with comments. So basically need a parser to parse comment and generate .md files out of that? Does that makes sense?"}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 1, "creation_date": 1507668283, "post_id": 46675338, "comment_id": 80299659, "body": "Would <a href=\"http://20over20.com/post/15841809298/changing-yards-markup-format-to-markdown-or\" rel=\"nofollow noreferrer\">20over20.com/post/15841809298/&hellip;</a> help?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1507669059, "post_id": 46675338, "comment_id": 80300068, "body": "This has been available since <code>0.7.4</code> you just need <code>redcarpet</code> or <code>rdiscount</code>"}, {"owner": {"reputation": 119, "user_id": 6206626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300a4d34a04354b8c91cf2c7a81f4fb3?s=128&d=identicon&r=PG&f=1", "display_name": "R. V.", "link": "https://stackoverflow.com/users/6206626/r-v"}, "edited": false, "score": 0, "creation_date": 1507669389, "post_id": 46675338, "comment_id": 80300272, "body": "Already tries that. It seems that it is there to support documentation written in markdown. So it will parse your markup if it is in markdown and still generate html pages."}, {"owner": {"reputation": 24616, "user_id": 866026, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/96fae8527632d33d7bf929fada83e8d1?s=128&d=identicon&r=PG", "display_name": "Waylan", "link": "https://stackoverflow.com/users/866026/waylan"}, "edited": false, "score": 0, "creation_date": 1507674163, "post_id": 46675338, "comment_id": 80302222, "body": "Yeah, anything that handles Markdown will almost certainly output HTML (or possibly some other non-Markdown format). I&#39;ve never seen any tool which outputs Markdown that isn&#39;t converting from another format. I suppose you could convert to HTML and then back to Markdown, but that&#39;s less than ideal."}], "owner": {"reputation": 119, "user_id": 6206626, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/300a4d34a04354b8c91cf2c7a81f4fb3?s=128&d=identicon&r=PG&f=1", "display_name": "R. V.", "link": "https://stackoverflow.com/users/6206626/r-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 561, "favorite_count": 3, "answer_count": 0, "score": 3, "last_activity_date": 1507666941, "creation_date": 1507666941, "question_id": 46675338, "link": "https://stackoverflow.com/questions/46675338/yard-to-generate-markdown-files-instead-of-html", "title": "yard to generate markdown files instead of html?", "body": "<p>I am trying to automate documentation using markdown compatible wiki without having a separate server.\nI have ruby code with yard compatible documentation. If I run\n<code>yard doc</code>, it generates html files in <code>./doc</code> directory.</p>\n\n<p>Would it be possible to generate <code>.md</code> files from the code using <code>yard</code>? So that I can simply add these files to GitLab or GitHub wiki or other markdown supported wiki?</p>\n\n<p>Sorry if the question is repeated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1997, "user_id": 1637183, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/34c35d942fd31cb88655c18232404314?s=128&d=identicon&r=PG", "display_name": "TopperH", "link": "https://stackoverflow.com/users/1637183/topperh"}, "edited": false, "score": 0, "creation_date": 1507664118, "post_id": 46674515, "comment_id": 80297560, "body": "you can use a range &quot;[*1..4].each do |i|&quot;"}, {"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "reply_to_user": {"reputation": 1997, "user_id": 1637183, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/34c35d942fd31cb88655c18232404314?s=128&d=identicon&r=PG", "display_name": "TopperH", "link": "https://stackoverflow.com/users/1637183/topperh"}, "edited": false, "score": 0, "creation_date": 1507664238, "post_id": 46674515, "comment_id": 80297628, "body": "@TopperH <code>id</code> is not in order :( Also, maybe i should use associations not to pass the user.id every time?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 1997, "user_id": 1637183, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/34c35d942fd31cb88655c18232404314?s=128&d=identicon&r=PG", "display_name": "TopperH", "link": "https://stackoverflow.com/users/1637183/topperh"}, "edited": false, "score": 0, "creation_date": 1507664464, "post_id": 46674515, "comment_id": 80297717, "body": "@TopperH Why not <code>(1..4).each do |i|</code>?"}, {"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507664511, "post_id": 46674515, "comment_id": 80297747, "body": "@tadman because i have to add items with id 24,85,90 and 11"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507664649, "post_id": 46674515, "comment_id": 80297811, "body": "@Src I meant as an alternative to the odd splatterized range inside an array approach."}], "answers": [{"comments": [{"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1507664805, "post_id": 46674713, "comment_id": 80297876, "body": "Thank you for the reply. My task is to add those items in Inventory for after creating user. How can i do that using code you written?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1507664836, "post_id": 46674713, "comment_id": 80297890, "body": "You can put that snippet of code anywhere you want, even in an <code>after_create</code> callback."}, {"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "edited": false, "score": 0, "creation_date": 1507664969, "post_id": 46674713, "comment_id": 80297960, "body": "Oh, wait a second, now i got that) Thank&#39;s)"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1507667297, "post_id": 46674713, "comment_id": 80299179, "body": "There is no need to iterate in the last example - you can use the shovel (&lt;&lt;)   operator to assign a whole array or collection. <code>@user.items &lt;&lt; Item.where(id: ids)</code>"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 5, "last_activity_date": 1507664623, "creation_date": 1507664623, "answer_id": 46674713, "question_id": 46674515, "link": "https://stackoverflow.com/questions/46674515/create-associations-after-record-creation/46674713#46674713", "title": "Create associations after record creation", "body": "<p>Ofen you can solve this with <code>has_many :through</code>:</p>\n\n<pre><code>class Inventory\n  belongs_to :user\n  belongs_to :item\nend\n\nclass User\n  has_many :inventories\n  has_many :items, through: :inventories\nend\n</code></pre>\n\n<p>Then you can add them straight-up:</p>\n\n<pre><code>items.each do |item|\n  @user.items &lt;&lt; item\nend\n</code></pre>\n\n<p>If you have only ID values:</p>\n\n<pre><code>Item.where(id: ids).each do |item|\n  @user.items &lt;&lt; item\nend\n</code></pre>\n\n<p>That's generally efficient enough to get the job done. If you're experiencing severe load problems with this you can always do it with a bulk-insert plugin, but that's usually a last-resort.</p>\n"}], "owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 46674713, "answer_count": 1, "score": 0, "last_activity_date": 1507664644, "creation_date": 1507663827, "last_edit_date": 1507664474, "question_id": 46674515, "link": "https://stackoverflow.com/questions/46674515/create-associations-after-record-creation", "title": "Create associations after record creation", "body": "<p>I need to create 4 records in table <code>inventory</code> after creating a user. I know that i need to use callback <code>after_create</code>, but i guess it is not good according to the best practices and DRY principle to have 4 lines like this:</p>\n\n<pre><code>def create_items\n    Item.create({user_id: self.id, item_id: 1})\n    Item.create({user_id: self.id, item_id: 2})\n    ...\nend\n</code></pre>\n\n<p>Or maybe even like that?</p>\n\n<pre><code>def create_items\n    self.inventories.create([\n        {item_id: 1},\n        {item_id: 2}\n    ])\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1507664219, "post_id": 46674034, "comment_id": 80297616, "body": "If you have an <code>attr_accessor</code> it will be exposed. Are you asking how you can get this to show up in the output of <code>to_json</code>?"}, {"owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507670934, "post_id": 46674034, "comment_id": 80300943, "body": "@tadman Yes. Also, when i&#39;m doing something like <code>@user.inspect</code>, i can&#39;t see it either"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1507671664, "post_id": 46674034, "comment_id": 80301254, "body": "I&#39;d either make it an actual column and forget about the cost or go through the trouble of overriding <code>inspect</code> and <code>as_json</code> and so on."}], "answers": [{"tags": [], "owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "is_accepted": false, "score": 0, "last_activity_date": 1507671746, "creation_date": 1507671746, "answer_id": 46676492, "question_id": 46674034, "link": "https://stackoverflow.com/questions/46674034/make-virtual-attribute-listed/46676492#46676492", "title": "Make virtual attribute listed", "body": "<p>I needed to explicitly define method (accessors) like so: </p>\n\n<pre><code>@user.to_json(methods: [:damage])\n</code></pre>\n"}], "owner": {"reputation": 3865, "user_id": 4829408, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/9ff8f70cf1f3f172084d5042abf22d64?s=128&d=identicon&r=PG&f=1", "display_name": "Src", "link": "https://stackoverflow.com/users/4829408/src"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 49, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507671746, "creation_date": 1507661889, "question_id": 46674034, "link": "https://stackoverflow.com/questions/46674034/make-virtual-attribute-listed", "title": "Make virtual attribute listed", "body": "<p>How to make my virtual attribute listed. I have a virtual attribute <code>attr_accessor :damage</code> and callback <code>after_find</code> that populate that attribute with some value. So how can i make that attribute listed in <code>@user</code> variable, so i can pass that variable to front-end (using <code>react-rails</code> gem) and use it like object property with javascript?</p>\n"}, {"tags": ["ruby", "hash", "detect"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1507654699, "post_id": 46671888, "comment_id": 80292587, "body": "Take a look at the <a href=\"https://stackoverflow.com/a/46656045/477037\">answer to your previous question</a> \u2013 hashes take <b>two arguments</b> in these methods, the key and its value, i.e. <code>detect { |k, v| ... }</code>"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1507654937, "post_id": 46671942, "comment_id": 80292725, "body": "The <code>do ... end</code> syntax is a bit unusual here, given the assignment and the very short block content."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507658297, "post_id": 46671942, "comment_id": 80294527, "body": "@Stefan It&#39;s the long form version of <code>{ ... }</code> which tends to make what&#39;s going on inside a lot more clear since it&#39;s exposed on its own line. That also makes adding comments easier."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 2, "last_activity_date": 1507654164, "creation_date": 1507654164, "answer_id": 46671942, "question_id": 46671888, "link": "https://stackoverflow.com/questions/46671888/how-do-i-iterate-through-a-hash-until-i-find-a-matching-element/46671942#46671942", "title": "How do I iterate through a hash until I find a matching element?", "body": "<p>Same principle applies:</p>\n\n<pre><code>h = {1 =&gt; [\"abc\"], 2 =&gt; [\"ccc\", \"ddd\"]}\n\nh.find do |_, l|\n  l.size == 1\nend\n# =&gt; [ 1, [\"abc\"]]\n</code></pre>\n\n<p>Now if you're looking for that as a more useful variable set:</p>\n\n<pre><code>key, value = h.find do |_, l|\n  l.size == 1\nend\n# =&gt; [ 1, [\"abc\"]]\nkey\n# =&gt; 1\nvalue\n# =&gt; [\"abc\"]\n</code></pre>\n\n<p>If you only care about the values, then it's even easier:</p>\n\n<pre><code>list = h.values.find do |l|\n  l.size == 1\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 461, "favorite_count": 0, "closed_date": 1507655124, "accepted_answer_id": 46671942, "answer_count": 1, "score": 0, "last_activity_date": 1507654164, "creation_date": 1507653960, "question_id": 46671888, "link": "https://stackoverflow.com/questions/46671888/how-do-i-iterate-through-a-hash-until-i-find-a-matching-element", "closed_reason": "Duplicate", "title": "How do I iterate through a hash until I find a matching element?", "body": "<p>I have a hash that maps integers to arrays.  For example</p>\n\n<pre><code>{1 =&gt; [\"abc\"], 2 =&gt; [\"ccc\", \"ddd\"]}\n</code></pre>\n\n<p>How do I iterate through the hash until I find an entry in which the value only has an array size of 1?  Normally I could do </p>\n\n<pre><code>arr.detect{|element| element.size == 1}\n</code></pre>\n\n<p>but that only works for arrays.  I'm not sure how to apply a similar logic to hashes.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 3367, "user_id": 822256, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2ITN7.png?s=128&g=1", "display_name": "sa77", "link": "https://stackoverflow.com/users/822256/sa77"}, "edited": false, "score": 0, "creation_date": 1507652192, "post_id": 46670858, "comment_id": 80291183, "body": "you need to have <code>foo_bar_path(foo_bar)</code> on <code>&lt;td&gt;&lt;%= link_to &#39;Show&#39;, foo_bar %&gt;&lt;&#47;td&gt;</code>"}, {"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1507652766, "post_id": 46670858, "comment_id": 80291520, "body": "Please attach <code>rake routes</code> output, it should be helpful for debugging."}, {"owner": {"reputation": 597, "user_id": 4298591, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-aXlKvLEDX-I/AAAAAAAAAAI/AAAAAAAAIZY/F9Rj1oGuE1Y/photo.jpg?sz=128", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4298591/benjamin"}, "reply_to_user": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1507653389, "post_id": 46670858, "comment_id": 80291882, "body": "@StanislavMekhonoshin I won&#39;t be able to run rake routes or rails routes because it&#39;s an engine. However, I have attached my routes.rb file. Hopefully that&#39;ll suffice"}, {"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1507657748, "post_id": 46670858, "comment_id": 80294207, "body": "It <i>looks</i> like you&#39;re in process of developing an engine. If so, it seems like you&#39;re making things extra-hard on yourself. The file structure seems unconventional. Naming your engine <code>Engine</code> seems like it might cause eventual problems. You&#39;re not testing in a conventional <code>spec&#47;dummy</code> way. I could be wrong, so apologies in advance. Just some observations."}, {"owner": {"reputation": 597, "user_id": 4298591, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-aXlKvLEDX-I/AAAAAAAAAAI/AAAAAAAAIZY/F9Rj1oGuE1Y/photo.jpg?sz=128", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4298591/benjamin"}, "reply_to_user": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 0, "creation_date": 1507660293, "post_id": 46670858, "comment_id": 80295613, "body": "@jvillian The name of the engine is not engine. I simply changed it to make the files a little more generalized. :)"}], "owner": {"reputation": 597, "user_id": 4298591, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh6.googleusercontent.com/-aXlKvLEDX-I/AAAAAAAAAAI/AAAAAAAAIZY/F9Rj1oGuE1Y/photo.jpg?sz=128", "display_name": "Benjamin", "link": "https://stackoverflow.com/users/4298591/benjamin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507653310, "creation_date": 1507650513, "last_edit_date": 1507653310, "question_id": 46670858, "link": "https://stackoverflow.com/questions/46670858/undefined-url-helper-method-for-anonymous-class", "title": "Undefined URL Helper Method for Anonymous Class", "body": "<p>I ran a scaffold command for rails and have been unable to get the specs working for the views. They always fail when a URL helper method is called saying something such as:</p>\n\n<pre><code>  1) engine/foo/bar/index renders a list of foo/bar\n Failure/Error: &lt;td&gt;&lt;%= link_to 'Show', foo_bar %&gt;&lt;/td&gt;\n\n ActionView::Template::Error:\n   undefined method `foo_bar_path' for #&lt;#&lt;Class:0x007fed161bf908&gt;:0x007fed13d25750&gt;\n</code></pre>\n\n<p>I've attempted including the URL helpers in the spec, but that gives me another error. </p>\n\n<p>I've checked out <a href=\"https://github.com/rspec/rspec-rails/issues/476\" rel=\"nofollow noreferrer\">https://github.com/rspec/rspec-rails/issues/476</a> and tried the solutions posted there with no help. I've tried multiple other solutions posted with no dice. In all I haven't been able to figure out why or how to fix this failure. I'm using ruby version 2.3.0, rails version 4.2.7.1, rspec-core 3.6.0, and rails-rspec 3.6.1.</p>\n\n<p>My project directory for the views looks like this:</p>\n\n<pre><code>Project\n  app\n   views\n     engine\n       foo\n         bars\n           index.html.erb\n  spec\n    views\n      engine\n        foo\n          bars\n            index.html.erb_spec.rb\n</code></pre>\n\n<p>My index.html.erb file looks like this:</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n\n&lt;h1&gt;Listing Foo Bars&lt;/h1&gt;\n\n&lt;table&gt;\n  &lt;thead&gt;\n    &lt;tr&gt;\n      &lt;th&gt;Displays&lt;/th&gt;\n      &lt;th colspan=\"3\"&gt;&lt;/th&gt;\n    &lt;/tr&gt;\n  &lt;/thead&gt;\n\n  &lt;tbody&gt;\n    &lt;% @foo_bars.each do |foo_bar| %&gt;\n      &lt;tr&gt;\n        &lt;td&gt;&lt;%= foo_bar.display %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Show', foo_bar %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Edit', edit_foo_bar_path(foo_bar) %&gt;&lt;/td&gt;\n        &lt;td&gt;&lt;%= link_to 'Destroy', foo_bar, method: :delete, data: { confirm: 'Are you sure?' } %&gt;&lt;/td&gt;\n      &lt;/tr&gt;\n    &lt;% end %&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n\n&lt;br&gt;\n\n&lt;%= link_to 'New Bar', new_foo_bar_path %&gt;\n</code></pre>\n\n<p>The spec for the above file is:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe 'engine/foo/bars/index', type: :view do\n\n  before(:each) do\n    assign(:foo_bars, [\n      Engine::Foo::Bar.create!(display: 'Display'),\n      Engine::Foo::Bar.create!(display: 'Display')\n    ])\n  end\n\n  it 'renders a list of foo/bars' do\n    render\n    assert_select 'tr&gt;td', text: 'Display'.to_s, :count =&gt; 2\n  end\nend\n</code></pre>\n\n<p>My routes.rb is:</p>\n\n<pre><code>Engine::Engine.routes.draw do\n\n  namespace :foo do\n    resources :bars\n  end\nend\n</code></pre>\n\n<p>Any help is appreciated.</p>\n"}, {"tags": ["ruby", "macos", "homebrew", "travis-ci"], "comments": [{"owner": {"reputation": 3549, "user_id": 658270, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/56a007a4b2c47b141bd39790278f88a7?s=128&d=identicon&r=PG", "display_name": "Sonia Hamilton", "link": "https://stackoverflow.com/users/658270/sonia-hamilton"}, "edited": false, "score": 0, "creation_date": 1507711667, "post_id": 46670305, "comment_id": 80315137, "body": "I&#39;m having a similar problem installing mutt. I&#39;m reading through the following, don&#39;t know if relevant <a href=\"https://discuss.circleci.com/t/homebrew-must-be-run-under-ruby-2-3-runtimeerror/17232/6\" rel=\"nofollow noreferrer\">discuss.circleci.com/t/&hellip;</a>"}, {"owner": {"reputation": 5470, "user_id": 2052097, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/KOzAT.jpg?s=128&g=1", "display_name": "z atef", "link": "https://stackoverflow.com/users/2052097/z-atef"}, "edited": false, "score": 0, "creation_date": 1507851540, "post_id": 46670305, "comment_id": 80387514, "body": "Seems like you are using rvm to manage versions of Ruby. Is that right?"}], "answers": [{"tags": [], "owner": {"reputation": 2321, "user_id": 1951600, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/866b44450dedde45f3679579ce0acdae?s=128&d=identicon&r=PG", "display_name": "jturney", "link": "https://stackoverflow.com/users/1951600/jturney"}, "is_accepted": true, "score": 12, "last_activity_date": 1507850859, "creation_date": 1507850859, "answer_id": 46720349, "question_id": 46670305, "link": "https://stackoverflow.com/questions/46670305/how-to-change-ruby-version-for-homebrew-in-macos-in-travis-ci/46720349#46720349", "title": "How to change Ruby version for Homebrew in macOS in Travis CI?", "body": "<p>Your choices seem to be to either use </p>\n\n<pre><code>brew update\nbrew install whatever\n</code></pre>\n\n<p>or</p>\n\n<pre><code>HOMEBREW_NO_AUTO_UPDATE=1 brew install whatever\n</code></pre>\n\n<p>The advice in <a href=\"https://docs.travis-ci.com/user/reference/osx/\" rel=\"noreferrer\">travis documentation</a> to not do a <code>brew update</code> if it doesn't seem to be needed seems to leave you at risk of random breakage when brew's ruby requirement is changed...</p>\n"}, {"comments": [{"owner": {"reputation": 28569, "user_id": 1922568, "user_type": "registered", "accept_rate": 74, "profile_image": "https://i.stack.imgur.com/UDzW1.jpg?s=128&g=1", "display_name": "Joe Audette", "link": "https://stackoverflow.com/users/1922568/joe-audette"}, "edited": false, "score": 1, "creation_date": 1508098439, "post_id": 46756693, "comment_id": 80464491, "body": "I can confirm this worked for me with --version 2.0.0 because my projects need the 2.0 .NET Core SDK. Thanks for sharing this solution."}], "tags": [], "owner": {"reputation": 3991, "user_id": 365837, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/ZnI9W.png?s=128&g=1", "display_name": "Rok Povsic", "link": "https://stackoverflow.com/users/365837/rok-povsic"}, "is_accepted": false, "score": 2, "last_activity_date": 1508269070, "last_edit_date": 1508269070, "creation_date": 1508081221, "answer_id": 46756693, "question_id": 46670305, "link": "https://stackoverflow.com/questions/46670305/how-to-change-ruby-version-for-homebrew-in-macos-in-travis-ci/46756693#46756693", "title": "How to change Ruby version for Homebrew in macOS in Travis CI?", "body": "<p>For .NET Core projects: you can avoid using brew by not using Travis' default .NET Core but installing it using the Microsoft's .NET core sh script. I used to have <code>mono</code> and <code>dotnet</code> version definitions set which I've found were not needed after switching to the sh script. I was able to fix the <code>Homebrew must be run under Ruby 2.3!</code> error by removing those two definitions (although I then had to update <code>libunwind8</code> on Linux before doing the .NET core install).</p>\n\n<p>Here's the complete .travis.yaml for running .NET core project test on osx and linux.</p>\n\n<pre><code>language: csharp\n\nbefore_install:\n  - if [ \"$OS\" = \"linux\" ]; then sudo apt-get install libunwind8; fi\n\nscript:\n  - wget https://dot.net/v1/dotnet-install.sh &amp;&amp; chmod +x dotnet-install.sh\n  - ./dotnet-install.sh --version 1.1.4 --install-dir $HOME/.dotnet\n  - $HOME/.dotnet/dotnet restore\n  - $HOME/.dotnet/dotnet test YOUR_CSPROJ_FILE_PATH\n\nmatrix:\n  include:\n    - os: linux\n      dist: trusty\n      env: OS=linux\n    - os: osx\n      osx_image: xcode9\n      env: OS=osx\n\nbranches:\n  only:\n    - master\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 2692710, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3777882b361ded7e2ef0b6fd271cb47e?s=128&d=identicon&r=PG&f=1", "display_name": "lexisvar", "link": "https://stackoverflow.com/users/2692710/lexisvar"}, "is_accepted": false, "score": 9, "last_activity_date": 1508724308, "creation_date": 1508724308, "answer_id": 46881000, "question_id": 46670305, "link": "https://stackoverflow.com/questions/46670305/how-to-change-ruby-version-for-homebrew-in-macos-in-travis-ci/46881000#46881000", "title": "How to change Ruby version for Homebrew in macOS in Travis CI?", "body": "<ul>\n<li>brew update</li>\n<li>brew install ruby-build</li>\n<li>brew install rbenv</li>\n<li>rbenv install [version_required]</li>\n<li>rbenv global [version_required]</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 647, "user_id": 2334082, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/72ad7503ab873bbf81040a0fb80e5ee8?s=128&d=identicon&r=PG", "display_name": "leompeters", "link": "https://stackoverflow.com/users/2334082/leompeters"}, "is_accepted": false, "score": 0, "last_activity_date": 1509038148, "creation_date": 1509038148, "answer_id": 46960183, "question_id": 46670305, "link": "https://stackoverflow.com/questions/46670305/how-to-change-ruby-version-for-homebrew-in-macos-in-travis-ci/46960183#46960183", "title": "How to change Ruby version for Homebrew in macOS in Travis CI?", "body": "<p>I got success on changing Ruby version for Homebrew in macOS, creating a personal access token on GitHub and setting it on my Mac as:</p>\n\n<p><a href=\"https://github.com/settings/tokens/new?scopes=gist,public_repo&amp;description=Homebrew\" rel=\"nofollow noreferrer\">https://github.com/settings/tokens/new?scopes=gist,public_repo&amp;description=Homebrew</a></p>\n\n<p>And then set the token with:</p>\n\n<pre><code>export HOMEBREW_GITHUB_API_TOKEN=\"your_new_token\"\n</code></pre>\n\n<blockquote>\n  <p>If you already has this token set, you can clear them with:</p>\n\n<pre><code>printf \"protocol=https\\nhost=github.com\\n\" | git credential-osxkeychain erase\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 61, "user_id": 3744503, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/87e643c23162a3a997d58ce4db6efd0d?s=128&d=identicon&r=PG&f=1", "display_name": "venna", "link": "https://stackoverflow.com/users/3744503/venna"}, "is_accepted": false, "score": 1, "last_activity_date": 1510200701, "creation_date": 1510200701, "answer_id": 47193784, "question_id": 46670305, "link": "https://stackoverflow.com/questions/46670305/how-to-change-ruby-version-for-homebrew-in-macos-in-travis-ci/47193784#47193784", "title": "How to change Ruby version for Homebrew in macOS in Travis CI?", "body": "<p>running <code>brew update</code> before <code>brew install package_name</code></p>\n"}], "owner": {"reputation": 332, "user_id": 6118233, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/dc8e797f01f99a9a3e0b26c25fab4a5c?s=128&d=identicon&r=PG&f=1", "display_name": "One Normal Night", "link": "https://stackoverflow.com/users/6118233/one-normal-night"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11928, "favorite_count": 1, "accepted_answer_id": 46720349, "answer_count": 5, "score": 11, "last_activity_date": 1510200701, "creation_date": 1507648565, "question_id": 46670305, "link": "https://stackoverflow.com/questions/46670305/how-to-change-ruby-version-for-homebrew-in-macos-in-travis-ci", "title": "How to change Ruby version for Homebrew in macOS in Travis CI?", "body": "<p>Trying to run</p>\n\n<pre><code>if [[ \"$TRAVIS_OS_NAME\" == \"osx\" ]]; then brew install python3; fi\n</code></pre>\n\n<p>in <code>before_install</code>, I end up with</p>\n\n<pre><code>/usr/local/Homebrew/Library/Homebrew/brew.rb:12:in \\`&lt;main&gt;': Homebrew must be run under Ruby 2.3! (RuntimeError)  \n\nThe command \"if [[ \"$TRAVIS_OS_NAME\" == \"osx\" ]]; then brew install python3; fi\" failed and exited with 1 during .\n\nYour build has been stopped.\n\n/Users/travis/.travis/job_stages: line 166: shell_session_update: command not found  \n</code></pre>\n\n<p>So I assume the issue here is that <code>ruby</code> is on version 2.0, which I confirmed with <code>ruby --version</code>. The funny thing is, my builds just stopped working all of the sudden, without any change to .travis.yml.<br>\nSo how do I actually change Ruby versions?</p>\n\n<p>Might be important to not, that before <code>git clone</code> is run I get this:</p>\n\n<pre><code>$ rvm use\n\nWarning! PATH is not properly set up, '/Users/travis/.rvm/gems/ruby-2.0.0-p648/bin' is not at first place,\n\n         usually this is caused by shell initialization files - check them for 'PATH=...' entries,\n\n         it might also help to re-add RVM to your dotfiles: 'rvm get stable --auto-dotfiles',\n\n         to fix temporarily in this shell session run: 'rvm use ruby-2.0.0-p648'.\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1507648458, "post_id": 46670069, "comment_id": 80288953, "body": "<a href=\"http://guides.rubyonrails.org/association_basics.html#the-has-many-through-association\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> OP should follow this"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1507648511, "post_id": 46670069, "comment_id": 80288975, "body": "@Mark: you think that&#39;s the case?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1507648773, "post_id": 46670069, "comment_id": 80289143, "body": "@Mark: the guide - that&#39;s for certain. It&#39;s just that your link points directly to <code>has_many :through</code> section. And I&#39;m not yet sure about that."}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1507648856, "post_id": 46670069, "comment_id": 80289190, "body": "Ahhh I&#39;m with you yup I linked to the wrong section my bad! But it probably won&#39;t hurt him to read it anyway :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1507648224, "last_edit_date": 1507648224, "creation_date": 1507647919, "answer_id": 46670069, "question_id": 46669996, "link": "https://stackoverflow.com/questions/46669996/activerecord-complains-column-for-reference-doesnt-exist-so-i-create-it-manu/46670069#46670069", "title": "ActiveRecord complains column (for reference) doesn&#39;t exist, so I create it manually and it complains it does exist", "body": "<blockquote>\n  <p>when I'm trying to create a plural column (for a <code>has_many</code>)?</p>\n</blockquote>\n\n<p>You're approaching this from the wrong end. How do you imagine this column to contain multiple/infinite ids? It's not how rails expects things to be.</p>\n\n<p>In a <code>has_many</code> relationship, the foreign key column is on the <code>belongs_to</code> side. And column name should be singular, naturally. For it can only hold one id.</p>\n\n<pre><code>t.references :section\n</code></pre>\n"}], "owner": {"reputation": 2184, "user_id": 3536548, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/qEPjr.png?s=128&g=1", "display_name": "Thermatix", "link": "https://stackoverflow.com/users/3536548/thermatix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 46670069, "answer_count": 1, "score": 0, "last_activity_date": 1507648224, "creation_date": 1507647735, "question_id": 46669996, "link": "https://stackoverflow.com/questions/46669996/activerecord-complains-column-for-reference-doesnt-exist-so-i-create-it-manu", "title": "ActiveRecord complains column (for reference) doesn&#39;t exist, so I create it manually and it complains it does exist", "body": "<p>Assuming for the following migration:</p>\n\n<pre><code>class AddSectionReferences &lt; ActiveRecord::Migration\n  def change\n\n    add_reference :sections, :sections, index: true, foreign_key: true, on_delete: :nullify \n    add_reference :sections, :parent\n  end\nend\n</code></pre>\n\n<p>It complains:</p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::UndefinedColumn: ERROR:  column \"section_id\" referenced in foreign key constraint does not exist\n: ALTER TABLE \"sections\" ADD CONSTRAINT \"fk_rails_810c69e885\"\n</code></pre>\n\n<p>so if I add:</p>\n\n<pre><code>add_column :sections, :sections_id, :integer\n</code></pre>\n\n<p>before the reference it then complains: </p>\n\n<pre><code>ActiveRecord::StatementInvalid: PG::DuplicateColumn: ERROR:  column \"sections_id\" of relation \"sections\" already exists\n: ALTER TABLE \"sections\" ADD \"sections_id\" integer\n</code></pre>\n\n<p>What is going on, why is it looking for a <code>section_id</code> column in the first error when I'm trying to create a plural column (for a has_many)?</p>\n"}, {"tags": ["ruby", "character-encoding", "rack"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507647413, "post_id": 46669827, "comment_id": 80288222, "body": "What is your question?"}, {"owner": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1507652994, "post_id": 46669827, "comment_id": 80291648, "body": "Which versions of ruby do you use on production/dev machines?"}, {"owner": {"reputation": 1, "user_id": 8749559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4598babddb6fd63e945ef192f86bbca?s=128&d=identicon&r=PG&f=1", "display_name": "Joharu", "link": "https://stackoverflow.com/users/8749559/joharu"}, "reply_to_user": {"reputation": 3593, "user_id": 613256, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/JuDL2.jpg?s=128&g=1", "display_name": "Stanislav Mekhonoshin", "link": "https://stackoverflow.com/users/613256/stanislav-mekhonoshin"}, "edited": false, "score": 0, "creation_date": 1507664313, "post_id": 46669827, "comment_id": 80297656, "body": "@StanislavMekhonoshin 2.4.2"}], "answers": [{"tags": [], "owner": {"reputation": 7568, "user_id": 492969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b936bf1ffa62366b2c107de33361cc41?s=128&d=identicon&r=PG", "display_name": "three", "link": "https://stackoverflow.com/users/492969/three"}, "is_accepted": false, "score": 0, "last_activity_date": 1507913168, "creation_date": 1507913168, "answer_id": 46734518, "question_id": 46669827, "link": "https://stackoverflow.com/questions/46669827/invalidbytesequenceerror-in-a-ruby-rack-web-app-with-chinese-characters/46734518#46734518", "title": "InvalidByteSequenceError in a ruby/rack web app with chinese characters", "body": "<p>This might be a problem with String input encodings. Strings you receive via <code>params</code> for example.</p>\n\n<p>I had to enforce the encoding to UTF-8 via:</p>\n\n<p><code>\"Some String\".force_encoding(\"UTF-8\")</code></p>\n\n<p>which stopped the error messages.</p>\n"}], "owner": {"reputation": 1, "user_id": 8749559, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c4598babddb6fd63e945ef192f86bbca?s=128&d=identicon&r=PG&f=1", "display_name": "Joharu", "link": "https://stackoverflow.com/users/8749559/joharu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 82, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1507913168, "creation_date": 1507647225, "last_edit_date": 1507665351, "question_id": 46669827, "link": "https://stackoverflow.com/questions/46669827/invalidbytesequenceerror-in-a-ruby-rack-web-app-with-chinese-characters", "title": "InvalidByteSequenceError in a ruby/rack web app with chinese characters", "body": "<p>In my Ruby/Rack app I have static characters from Chinese and Japanese, in the ruby code and HTML views. When I'm running my app, I get an exception:</p>\n\n<pre><code>Encoding::InvalidByteSequenceError at /\n/my_app/index.html.erb is not valid US-ASCII\n</code></pre>\n\n<p>It happens only on a production server, on locally -- not. \nMy local machine -- Linux, remote server -- FreeBSD.</p>\n\n<p>I've tried \"save with encoding --> utf-8\" but it didn't help.</p>\n\n<p>I'm not using encode/decode function in ruby code -- those characters are just statically embedded in my files.</p>\n"}, {"tags": ["ruby", "kiba-etl"], "answers": [{"tags": [], "owner": {"reputation": 8681, "user_id": 20302, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/91eb330fb36d1e03c856574dfb77d2bc?s=128&d=identicon&r=PG", "display_name": "Thibaut Barr&#232;re", "link": "https://stackoverflow.com/users/20302/thibaut-barr%c3%a8re"}, "is_accepted": false, "score": 0, "last_activity_date": 1507650593, "creation_date": 1507650593, "answer_id": 46670879, "question_id": 46669165, "link": "https://stackoverflow.com/questions/46669165/using-kiba-is-it-possible-to-define-and-run-two-pipelines-in-the-same-file-usi/46670879#46670879", "title": "Using Kiba: Is it possible to define and run two pipelines in the same file? Using an intermediate destination &amp; a second source", "body": "<p>To directly answer your question: you cannot define 2 pipelines inside the same Kiba file. You can have multiple sources or destinations, but the rows will all go through each transform, and through each destination too.</p>\n\n<p>That said you have quite a few options before resorting to splitting into 2 pipelines, depending on your specific use case.</p>\n\n<p>I'm going to email you to ask a few more detailed questions in private, in order to properly reply here later.</p>\n"}], "owner": {"reputation": 1, "user_id": 2809630, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bea343efb924fdb3a07775a642dc17ad?s=128&d=identicon&r=PG", "display_name": "AlexHeeton", "link": "https://stackoverflow.com/users/2809630/alexheeton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 103, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507650593, "creation_date": 1507645318, "question_id": 46669165, "link": "https://stackoverflow.com/questions/46669165/using-kiba-is-it-possible-to-define-and-run-two-pipelines-in-the-same-file-usi", "title": "Using Kiba: Is it possible to define and run two pipelines in the same file? Using an intermediate destination &amp; a second source", "body": "<p>My processing has a \"condense\" step before needing further processing:  </p>\n\n<p>Source: Raw event/analytics logs of various users. </p>\n\n<p>Transform: Insert each row into a hash according to UserID. </p>\n\n<p>Destination / Output: An in-memory hash like: </p>\n\n<pre><code>{ \n  \"user1\" =&gt; [event, event,...], \n  \"user2\" =&gt; [event, event,...] \n}\n</code></pre>\n\n<p>Now, I've got no need to store these user groups anywhere, I'd just like to carry on processing them. Is there a common pattern with Kiba for using an intermediate destination? E.g. </p>\n\n<pre><code># First pass\nsource EventSource # 10,000 rows of single events\ntransform {|row| insert_into_user_hash(row)}\n@users = Hash.new\ndestination UserDestination, users: @users\n\n# Second pass\nsource UserSource, users: @users # 100 rows of grouped events, created in the previous step\ntransform {|row| analyse_user(row)} \n</code></pre>\n\n<p>I'm digging around the code and it appears that all transforms in a file are applied to the source, so I was wondering how other people have approached this, if at all. I could save to an intermediate store and run another ETL script, but was hoping for a cleaner way - we're planning lots of these \"condense\" steps. </p>\n"}, {"tags": ["mysql", "sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1507642552, "post_id": 46668125, "comment_id": 80284728, "body": "If you just want all rows where the foreign key matches, what is the &quot;search&quot; logic for? Just use <code>table1.table2s</code> to get all <code>table2</code> records for a given <code>table1</code>."}, {"owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1507642711, "post_id": 46668125, "comment_id": 80284831, "body": "@meagar in the front end I have a search box where the user can search for names. The search logic is used to returned the matching records with the ones that are associated through the foreign key"}, {"owner": {"reputation": 36501, "user_id": 3785, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/91e799ee062d66b9a2da8428d28038a0?s=128&d=identicon&r=PG", "display_name": "Mario F", "link": "https://stackoverflow.com/users/3785/mario-f"}, "edited": false, "score": 0, "creation_date": 1507642763, "post_id": 46668125, "comment_id": 80284874, "body": "as far as I understand it, he wants to search for a query in <code>name</code>, and then return all the records that either have that name, or share the same <code>fk</code>. So for <code>John</code>, the result would be <code>Table1.find(1).table2s</code>"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1507642770, "post_id": 46668125, "comment_id": 80284880, "body": "Please include an example of your expected inputs and output, and include <i>real</i> code. The only sample of Ruby code in your question is incomplete. What is <code>includes</code> being chained off of?"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1507644418, "post_id": 46668125, "comment_id": 80286094, "body": "I&#39;m still not clear what you&#39;re asking here. What is the expected output, a list of <code>Category</code> objects, or a list of <code>CategoryType</code> objects? A <code>where</code> on <code>Category</code> cannot return a list of <code>CategoryType</code> objects, assuming you&#39;re <code>table2</code> is actually meant to represent <code>CategoryTypes</code> and <code>table1</code> is meant to represent <code>Category</code>."}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1507644620, "post_id": 46668125, "comment_id": 80286236, "body": "Worst table naming ever! But anyway, once you get your first @record like &quot;John&quot; you could do:   records = Table2.where(id: @record.table1.fk)"}, {"owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1507644828, "post_id": 46668125, "comment_id": 80286389, "body": "@meagar When I use where in Category, it searches on CategoryTypes and returns the id of Category and the record that was found in CategoryTypes. However, I also want to return the records that contain the same fk of the CategoryTypes record that was found."}, {"owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "reply_to_user": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1507645188, "post_id": 46668125, "comment_id": 80286633, "body": "@bkunzi01 is it possible to return everything at once?"}], "answers": [{"comments": [{"owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "edited": false, "score": 0, "creation_date": 1507720934, "post_id": 46672340, "comment_id": 80321277, "body": "Thank you for your response, not sure this will work as I am in Category and I still want the results from the main table."}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1507656019, "last_edit_date": 1507656019, "creation_date": 1507655677, "answer_id": 46672340, "question_id": 46668125, "link": "https://stackoverflow.com/questions/46668125/include-all-records-associated-with-a-record-that-has-been-found-when-search-is/46672340#46672340", "title": "Include all records associated with a record that has been found when search is used in Ruby on Rails", "body": "<p>I think what you are looking for is </p>\n\n<pre><code>CategoryType.where(fk: CategoryType.where('category_types.name LIKE ?', \"%#{search}%\").select(:fk))\n</code></pre>\n\n<p>This will generate the following sudo sql</p>\n\n<pre><code>SELECT \n   category_types.*\nFROM \n   category_types\nWHERE \n   category_types.fk IN (\n     SELECT \n        category_types.fk \n     FROM  \n        category_types\n     WHERE \n        category_types.name LIKE '%JOHN%'\n    )\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "is_accepted": true, "score": 0, "last_activity_date": 1507721266, "creation_date": 1507721266, "answer_id": 46687089, "question_id": 46668125, "link": "https://stackoverflow.com/questions/46668125/include-all-records-associated-with-a-record-that-has-been-found-when-search-is/46687089#46687089", "title": "Include all records associated with a record that has been found when search is used in Ruby on Rails", "body": "<p>I solved this by doing a query that returns all of the records for the main table and then using their ids to return the records from the second table. I am thinking that may be another way to get all the results at once, but for now this will do.</p>\n\n<pre><code>@records = joins(:category_typed).select('categories.id').where('category_types.name LIKE ?, \"%#{search}%\")\nwhere(id: @records.ids)\n</code></pre>\n"}], "owner": {"reputation": 1545, "user_id": 4708773, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/1365fd163d419008009cb165ba8a37ed?s=128&d=identicon&r=PG&f=1", "display_name": "Victor Luna", "link": "https://stackoverflow.com/users/4708773/victor-luna"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 46687089, "answer_count": 2, "score": -1, "last_activity_date": 1507721266, "creation_date": 1507642360, "last_edit_date": 1507643321, "question_id": 46668125, "link": "https://stackoverflow.com/questions/46668125/include-all-records-associated-with-a-record-that-has-been-found-when-search-is", "title": "Include all records associated with a record that has been found when search is used in Ruby on Rails", "body": "<p>When trying to search for a record in rails I want to be able to return all records that are associated with that id. For instance, if I search for \"John\", I want to be able to return all records with the same fk.</p>\n\n<p>Table 1</p>\n\n<pre><code>| id | \n------\n| 1  |\n| 2  |\n</code></pre>\n\n<p>Table 2</p>\n\n<pre><code>| id | fk | name  |\n-------------------\n| 1  | 1  | John  |\n| 2  | 1  |  Doe  |\n| 3  | 2  | David |\n| 4  | 2  | Smith |\n</code></pre>\n\n<p>SQL</p>\n\n<p>Rails code in controller</p>\n\n<pre><code>includes(:table2).where('table2.name LIKE ?', \"%#{search}%\").references(:table2)\n</code></pre>\n\n<p>SQL returned</p>\n\n<pre><code>SELECT FROM `table1` LEFT OUTER JOIN `table2` ON `table2`.`fk` = `table1`.`id` WHERE (table2.name LIKE '%John%') AND `table1`.`id` IN (1)\n</code></pre>\n\n<p>This only returns the row where the search is found. How would I return the record with same fk?</p>\n\n<p>table1 uses <code>has_many :table2</code> and table2 uses <code>belongs_to :table1</code></p>\n\n<p>Thanks in advance!</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>index.html.erb just contains a form that submits the input to the controller and the controller runs the query and returns the result.</p>\n\n<p>Expected input: <strong>John</strong></p>\n\n<p>Expected result: </p>\n\n<pre><code>| id | fk | name |\n------------------\n| 1  | 1  | John |\n| 2  | 1  | Doe  |\n</code></pre>\n\n<p>index.html.erb</p>\n\n<pre><code>&lt;%= form_tag(categories_path, method: :get, :enforce_utf8 =&gt; false, id: \"search-input\") do %&gt;\n  &lt;%= text_field_tag :search, params[:search] %&gt;\n  &lt;button type=\"submit\"&gt;&lt;/button&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>categories_controller.rb</p>\n\n<pre><code>def index\n  @categories = Category.search(params[:search])\nend\n\ndef Category.search(search)\n  includes(:category_type).where('category_type.name LIKE ?', \"%#{search}%\").references(:category_type)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "carrierwave", "carrierwave-backgrounder"], "comments": [{"owner": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1507642027, "post_id": 46667168, "comment_id": 80284362, "body": "out of curiosity, what resources do you mean when you say &#39;ec2 resources&#39;? Is it adding up on your billing or just slowing your instance down?"}, {"owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "reply_to_user": {"reputation": 12464, "user_id": 1376448, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6f16da5431a99911ebc32093a28bc591?s=128&d=identicon&r=PG", "display_name": "kiddorails", "link": "https://stackoverflow.com/users/1376448/kiddorails"}, "edited": false, "score": 0, "creation_date": 1507648750, "post_id": 46667168, "comment_id": 80289131, "body": "@kiddorails billing. As I said, I&#39;m not using it otherwise."}], "owner": {"reputation": 1075, "user_id": 6561814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/AiS9a.png?s=128&g=1", "display_name": "jonhue", "link": "https://stackoverflow.com/users/6561814/jonhue"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1507639532, "creation_date": 1507639532, "question_id": 46667168, "link": "https://stackoverflow.com/questions/46667168/carrierwave-backgrounder-consuming-aws-ec2-resources", "title": "Carrierwave Backgrounder consuming AWS EC2 resources", "body": "<p>I recently added the <a href=\"https://github.com/lardawge/carrierwave_backgrounder\" rel=\"nofollow noreferrer\"><code>carrierwave_backgrounder</code> gem</a> to my project - and since then have seen some usage of my EC2 resources (I previously did not use them at all).</p>\n\n<p>How can I instead process versions of my files within the current process (worker) as I did without the gem and just upload them to s3 - significantly reducing costs?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "bundle"], "comments": [{"owner": {"reputation": 332, "user_id": 2000445, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000720229840/picture?type=large", "display_name": "Vinod Kumar", "link": "https://stackoverflow.com/users/2000445/vinod-kumar"}, "edited": false, "score": 0, "creation_date": 1507640190, "post_id": 46666869, "comment_id": 80283026, "body": "i have already install devKit... Error is :    rake db:migrate Could not find nio4r-2.1.0 in any of the sources Run <code>bundle install</code> to install missing gems."}, {"owner": {"reputation": 332, "user_id": 2000445, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000720229840/picture?type=large", "display_name": "Vinod Kumar", "link": "https://stackoverflow.com/users/2000445/vinod-kumar"}, "edited": false, "score": 0, "creation_date": 1507641820, "post_id": 46666869, "comment_id": 80284208, "body": "Finally i have resolved the issue, i was using power shell .. and it was not working .. now using cmd and it works :)"}], "answers": [{"comments": [{"owner": {"reputation": 332, "user_id": 2000445, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000720229840/picture?type=large", "display_name": "Vinod Kumar", "link": "https://stackoverflow.com/users/2000445/vinod-kumar"}, "edited": false, "score": 0, "creation_date": 1507639062, "post_id": 46666950, "comment_id": 80282223, "body": "Thank you for answer.. i have already installed &quot;For use with Ruby 2.0 to 2.3 (x64 - 64bits only)&quot;  ruby -v shows me    ==   ruby 2.4.2p198 (2017-09-14 revision 59899) [x64-mingw32]"}, {"owner": {"reputation": 332, "user_id": 2000445, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000720229840/picture?type=large", "display_name": "Vinod Kumar", "link": "https://stackoverflow.com/users/2000445/vinod-kumar"}, "edited": false, "score": 0, "creation_date": 1507640152, "post_id": 46666950, "comment_id": 80282999, "body": "main Error :   rake db:migrate Could not find nio4r-2.1.0 in any of the sources Run <code>bundle install</code> to install missing gems."}], "tags": [], "owner": {"reputation": 299, "user_id": 1420014, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QH0Cj.jpg?s=128&g=1", "display_name": "Vaibhav Maheshwari", "link": "https://stackoverflow.com/users/1420014/vaibhav-maheshwari"}, "is_accepted": false, "score": 0, "last_activity_date": 1507638911, "creation_date": 1507638911, "answer_id": 46666950, "question_id": 46666869, "link": "https://stackoverflow.com/questions/46666869/rake-dbmigrate-could-not-find-nio4r-2-1-0-in-any-of-the-sources-run-bundle-i/46666950#46666950", "title": "rake db:migrate : Could not find nio4r-2.1.0 in any of the sources Run `bundle install` to install missing gems", "body": "<p>I think you are missing the development kit of Ruby for windows. Go to the following link, <a href=\"https://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">https://rubyinstaller.org/downloads/</a> and download the mentioned/latest version of Ruby. </p>\n\n<p>If the problem still persists, feel free to comment on this answer. </p>\n"}, {"tags": [], "owner": {"reputation": 332, "user_id": 2000445, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000720229840/picture?type=large", "display_name": "Vinod Kumar", "link": "https://stackoverflow.com/users/2000445/vinod-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1507641856, "creation_date": 1507641856, "answer_id": 46667948, "question_id": 46666869, "link": "https://stackoverflow.com/questions/46666869/rake-dbmigrate-could-not-find-nio4r-2-1-0-in-any-of-the-sources-run-bundle-i/46667948#46667948", "title": "rake db:migrate : Could not find nio4r-2.1.0 in any of the sources Run `bundle install` to install missing gems", "body": "<p>Finally i have resolved the issue, i was using power shell .. and it was not working .. now using cmd and it works :)</p>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 5668582, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1sJ24.jpg?s=128&g=1", "display_name": "kia", "link": "https://stackoverflow.com/users/5668582/kia"}, "is_accepted": false, "score": 0, "last_activity_date": 1562596418, "last_edit_date": 1562596418, "creation_date": 1562579085, "answer_id": 56932247, "question_id": 46666869, "link": "https://stackoverflow.com/questions/46666869/rake-dbmigrate-could-not-find-nio4r-2-1-0-in-any-of-the-sources-run-bundle-i/56932247#56932247", "title": "rake db:migrate : Could not find nio4r-2.1.0 in any of the sources Run `bundle install` to install missing gems", "body": "<p>You are using the system's <code>rails</code>. You must run <code>gem install rake</code> and then run <code>rake db:migrate</code>.</p>\n"}], "owner": {"reputation": 332, "user_id": 2000445, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000720229840/picture?type=large", "display_name": "Vinod Kumar", "link": "https://stackoverflow.com/users/2000445/vinod-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 461, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1562596418, "creation_date": 1507638662, "question_id": 46666869, "link": "https://stackoverflow.com/questions/46666869/rake-dbmigrate-could-not-find-nio4r-2-1-0-in-any-of-the-sources-run-bundle-i", "title": "rake db:migrate : Could not find nio4r-2.1.0 in any of the sources Run `bundle install` to install missing gems", "body": "<p>i have setup a rails application on windows 10 and going to migrate database but i am getting issue </p>\n\n<pre><code>rake db:migrate\nCould not find nio4r-2.1.0 in any of the sources\nRun `bundle install` to install missing gems.\n</code></pre>\n\n<p>i have update and install blundler </p>\n\n<p>anyone have any idea why this is happning</p>\n\n<p>gem_make.out shows me:</p>\n\n<pre><code>You have to install development tools first.\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:588:in `try_cpp'\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:1095:in `block in have_header'\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:945:in `block in checking_for'\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:351:in `block (2 levels) in postpone'\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:321:in `open'\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:351:in `block in postpone'\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:321:in `open'\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:347:in `postpone'\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:944:in `checking_for'\n    from D:/Ruby24-x64/lib/ruby/2.4.0/mkmf.rb:1094:in `have_header'\n    from extconf.rb:5:in `&lt;main&gt;' \n</code></pre>\n\n<p>what i have missed in it.</p>\n"}, {"tags": ["javascript", "jquery", "ruby", "ajax", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 675, "user_id": 2835925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3314679720eb571d69e4b7791a6a263?s=128&d=identicon&r=PG&f=1", "display_name": "Walk", "link": "https://stackoverflow.com/users/2835925/walk"}, "edited": false, "score": 0, "creation_date": 1507633729, "post_id": 46665188, "comment_id": 80278609, "body": "What jQuery version are you using?"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 675, "user_id": 2835925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3314679720eb571d69e4b7791a6a263?s=128&d=identicon&r=PG&f=1", "display_name": "Walk", "link": "https://stackoverflow.com/users/2835925/walk"}, "edited": false, "score": 0, "creation_date": 1507633935, "post_id": 46665188, "comment_id": 80278724, "body": "@Walk 1.8.3. But, how does that matter?"}, {"owner": {"reputation": 675, "user_id": 2835925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3314679720eb571d69e4b7791a6a263?s=128&d=identicon&r=PG&f=1", "display_name": "Walk", "link": "https://stackoverflow.com/users/2835925/walk"}, "edited": false, "score": 0, "creation_date": 1507634079, "post_id": 46665188, "comment_id": 80278820, "body": "I believe it&#39;s a bug in jQuery 1.x and 2.x, it shouldn&#39;t be executed immediately in 3.x. Check this page <a href=\"https://github.com/jquery/jquery/issues/2432\" rel=\"nofollow noreferrer\">github.com/jquery/jquery/issues/2432</a> I guess you&#39;ll have to <code>eval</code> result to achieve same functionality."}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1507634338, "post_id": 46665188, "comment_id": 80278975, "body": "<code>only jQuery request executes the JS code</code> - the problem is, it shouldn&#39;t. what <code>content-type</code> header is returned in the response"}, {"owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "reply_to_user": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1507634543, "post_id": 46665188, "comment_id": 80279097, "body": "@JaromandaX It&#39;s <code>Content-Type:text&#47;javascript; charset=utf-8</code> for both the cases"}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "edited": false, "score": 0, "creation_date": 1507634734, "post_id": 46665188, "comment_id": 80279210, "body": "hmm, wonder if jquery does something stupid with the response then, because you <b>don&#39;t</b> want AJAX to arbitrarily execute - that&#39;s not what AJAX is about"}, {"owner": {"reputation": 47165, "user_id": 5053002, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab6a9edfd2614014563162586c1b0697?s=128&d=identicon&r=PG", "display_name": "Jaromanda X", "link": "https://stackoverflow.com/users/5053002/jaromanda-x"}, "reply_to_user": {"reputation": 675, "user_id": 2835925, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d3314679720eb571d69e4b7791a6a263?s=128&d=identicon&r=PG&f=1", "display_name": "Walk", "link": "https://stackoverflow.com/users/2835925/walk"}, "edited": false, "score": 0, "creation_date": 1507634801, "post_id": 46665188, "comment_id": 80279240, "body": "@Walk - <code>I guess you&#39;ll have to eval result</code> - or create a script tag and shove the response into it :p"}], "answers": [{"tags": [], "owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "is_accepted": true, "score": 0, "last_activity_date": 1507637215, "creation_date": 1507637215, "answer_id": 46666377, "question_id": 46665188, "link": "https://stackoverflow.com/questions/46665188/jquery-ajax-works-but-not-native-js-ajax/46666377#46666377", "title": "jQuery ajax works but not native JS ajax", "body": "<p>Ok, I found the answer. I digged inside <code>jQuery.ajax</code> code and found that <code>jQuery.ajax</code> also executes <strong>done</strong> within it's code that evaluates the response. So, in native JS we can evaluate the response, like:</p>\n\n<pre><code>var xhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');\n\nxhttp.open(\"GET\", url, true);\nxhttp.onreadystatechange = function() {\n    if (xhttp.readyState &gt; 3 &amp;&amp; xhttp.status == 200) {\n      eval(xhttp.responseText); // This line does the trick\n    }\n  };\nxhttp.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\nxhttp.send();\n</code></pre>\n"}], "owner": {"reputation": 3618, "user_id": 2968762, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/EhAX3.png?s=128&g=1", "display_name": "Abhi", "link": "https://stackoverflow.com/users/2968762/abhi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 55, "favorite_count": 1, "accepted_answer_id": 46666377, "answer_count": 1, "score": 0, "last_activity_date": 1507637215, "creation_date": 1507633538, "question_id": 46665188, "link": "https://stackoverflow.com/questions/46665188/jquery-ajax-works-but-not-native-js-ajax", "title": "jQuery ajax works but not native JS ajax", "body": "<p>I have the following code:</p>\n\n<p><strong>Controller</strong></p>\n\n<pre><code>def some_method\n respond_to do |format|\n   format.js { render js: \"alert();\" }\n end\nend\n</code></pre>\n\n<p><strong>JS</strong></p>\n\n<p>This executes alert();</p>\n\n<pre><code>jQuery.ajax({\n url: url\n});\n</code></pre>\n\n<p>This doesn't executes alert();</p>\n\n<pre><code>var xhttp = window.XMLHttpRequest ? new XMLHttpRequest() : new ActiveXObject('Microsoft.XMLHTTP');\nxhttp.open(\"GET\", url, true);\nxhttp.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\nxhttp.send();\n</code></pre>\n\n<p>What is so different in jQuery than plain JavaScript?</p>\n\n<p><strong>Note</strong>:</p>\n\n<p>1> Both the requests fire the AJAX. But, only jQuery request executes the JS code, but not native JS AJAX.</p>\n\n<p>2> I have already compared, <strong>Request</strong> and <strong>Response</strong> headers for both types of requests. But, I don't find any difference.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507628829, "post_id": 46663528, "comment_id": 80275415, "body": "If you are using a library, then make that clear."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507628911, "post_id": 46663528, "comment_id": 80275465, "body": "@sawa: to his credit, it&#39;s not always obvious which things are rails and not standard ruby. You can&#39;t expect him to add tags for all the gems in his gemfile."}, {"owner": {"reputation": 1392, "user_id": 2922609, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/JRouJ.png?s=128&g=1", "display_name": "ivanibash", "link": "https://stackoverflow.com/users/2922609/ivanibash"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507629117, "post_id": 46663528, "comment_id": 80275596, "body": "@sawa Yeah I am using Rails but the question doesn&#39;t imply that I need a Rails method to do what I want, if there is a native Ruby one. I just happened to use a rails method in my example. I&#39;ll update the question anyway."}], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 11, "last_activity_date": 1507634144, "last_edit_date": 1507634144, "creation_date": 1507628741, "answer_id": 46663597, "question_id": 46663528, "link": "https://stackoverflow.com/questions/46663528/conditional-assignment-with-empty-strings/46663597#46663597", "title": "Conditional assignment with empty strings", "body": "<p>This is where you use <code>present?</code>'s brother, <a href=\"http://api.rubyonrails.org/classes/Object.html#method-i-presence\" rel=\"noreferrer\"><code>presence</code></a> (assuming you use rails or at least active support).</p>\n\n<pre><code>x = this_var.presence || that_var.presence || last_resort\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "edited": false, "score": 0, "creation_date": 1507663019, "post_id": 46663867, "comment_id": 80297073, "body": "what about <code>.compact.first</code> ?)"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 5, "last_activity_date": 1507629507, "creation_date": 1507629507, "answer_id": 46663867, "question_id": 46663528, "link": "https://stackoverflow.com/questions/46663528/conditional-assignment-with-empty-strings/46663867#46663867", "title": "Conditional assignment with empty strings", "body": "<pre><code>x = [this_var, that_var, last_resort].find(&amp;:present?)\n</code></pre>\n"}], "owner": {"reputation": 1392, "user_id": 2922609, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/JRouJ.png?s=128&g=1", "display_name": "ivanibash", "link": "https://stackoverflow.com/users/2922609/ivanibash"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 521, "favorite_count": 0, "accepted_answer_id": 46663597, "answer_count": 2, "score": 2, "last_activity_date": 1507634144, "creation_date": 1507628570, "last_edit_date": 1507629217, "question_id": 46663528, "link": "https://stackoverflow.com/questions/46663528/conditional-assignment-with-empty-strings", "title": "Conditional assignment with empty strings", "body": "<p>I love conditional assignment syntax in Ruby and use it all the time:</p>\n\n<pre><code>x = this_var || that_var\n</code></pre>\n\n<p>Right now I am working with several APIs, which return empty strings for non-existing values. Since empty string evaluates to true in Ruby I can no longer use the syntax above to set default values. It gets worse when I have several \"levels\" of defaults, e.g. \"if this var doesn't exist set it to that var, if that doesn't exist too, set it to yet another var\". So I end up doing this:</p>\n\n<pre><code>x = if this_var.present?\n       this_var\n    elsif that_var.present?\n       that_var\n    else\n       last_resort\n    end\n</code></pre>\n\n<p>The <code>.present?</code> method helps but not much. How would I write something like this in a more concise way?</p>\n\n<p>I am using Rails 4 so Rails methods are welcome as an answer :)</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1507629115, "post_id": 46662832, "comment_id": 80275594, "body": "you should do it with websockets. In Rails 5 they are implemented with <code>ActionCable</code> <a href=\"http://guides.rubyonrails.org/action_cable_overview.html\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/action_cable_overview.html</a>"}, {"owner": {"reputation": 598, "user_id": 3522082, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/73aaa074502f78ed1d5556458ccc2037?s=128&d=identicon&r=PG", "display_name": "Navin", "link": "https://stackoverflow.com/users/3522082/navin"}, "reply_to_user": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1507629233, "post_id": 46662832, "comment_id": 80275675, "body": "Yes, I can able to do with websocket or faye. I need some specific idea to do"}, {"owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "edited": false, "score": 0, "creation_date": 1507633589, "post_id": 46662832, "comment_id": 80278517, "body": "was it helpful my answer?"}], "answers": [{"tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": false, "score": 0, "last_activity_date": 1507629479, "creation_date": 1507629479, "answer_id": 46663857, "question_id": 46662832, "link": "https://stackoverflow.com/questions/46662832/replicate-iframe-to-another-user/46663857#46663857", "title": "Replicate Iframe to another user", "body": "<p>Whilst this question is pretty broad, you should definitely use websockets in order to achieve it.</p>\n\n<p>You can refer to the <a href=\"http://guides.rubyonrails.org/action_cable_overview.html\" rel=\"nofollow noreferrer\">official documentation</a> of <strong>ActionCable</strong>.</p>\n\n<p>You will find a plenty of tutorials, such as:</p>\n\n<ul>\n<li>This <a href=\"https://medium.com/rubyinside/action-cable-hello-world-with-rails-5-1-efc475b0208b\" rel=\"nofollow noreferrer\">RubyInside</a></li>\n<li><em>Learn Enough Action Cable to Be Dangerous</em> book by <a href=\"https://www.learnenough.com/action-cable-tutorial\" rel=\"nofollow noreferrer\">Micheal Hartl</a></li>\n</ul>\n\n<p>Another approach could be to use a ReactJS component instead of your iframe (see this <a href=\"https://www.airpair.com/reactjs/posts/reactjs-a-guide-for-rails-developers\" rel=\"nofollow noreferrer\">quickstart guide</a>)</p>\n"}], "owner": {"reputation": 598, "user_id": 3522082, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/73aaa074502f78ed1d5556458ccc2037?s=128&d=identicon&r=PG", "display_name": "Navin", "link": "https://stackoverflow.com/users/3522082/navin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507629479, "creation_date": 1507626633, "question_id": 46662832, "link": "https://stackoverflow.com/questions/46662832/replicate-iframe-to-another-user", "title": "Replicate Iframe to another user", "body": "<p>I am showing some websites in a iframe on my rails application. What I want is to replicate same iframe content to another user in a different browser. For example if person 1 clicking link in iframe it has to reflect in person 2 browser iframe. Give me some ideas to accomplish this one. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "asynchronous"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1507627043, "creation_date": 1507627043, "answer_id": 46662979, "question_id": 46662746, "link": "https://stackoverflow.com/questions/46662746/activejobs-queue/46662979#46662979", "title": "ActiveJobs Queue", "body": "<p>One way is to put those jobs on a special queue</p>\n\n<pre><code>class MyHttpJob &lt; ApplicationJob\n  queue_as :serial_creation\n  #....\nend\n</code></pre>\n\n<p>And have only one worker on that queue. No concurrency => automatic serialization. Of course, this has serious performance limitations. But if your one worker can handle the traffic, it's a good easy approach.</p>\n"}], "owner": {"reputation": 687, "user_id": 409096, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/sDacS.jpg?s=128&g=1", "display_name": "Javier Valencia", "link": "https://stackoverflow.com/users/409096/javier-valencia"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 46662979, "answer_count": 1, "score": 0, "last_activity_date": 1507666155, "creation_date": 1507626421, "last_edit_date": 1507666155, "question_id": 46662746, "link": "https://stackoverflow.com/questions/46662746/activejobs-queue", "title": "ActiveJobs Queue", "body": "<p>I have a RoR app with some model that need to do a provision to remote APIs. But in two of them, I need to do many provisioning HTTP requests and I use ActiveJob to this task.</p>\n\n<p>The problem's what I need to maintain a creation order for these HTTP request, but ActiveJob doesn't.</p>\n\n<p>How to process many async tasks with ActiveJob in a certain sequence?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "tor", "socks", "torsocks"], "answers": [{"tags": [], "owner": {"reputation": 68, "user_id": 3187396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54473ab0d509674da09ae1664128a95f?s=128&d=identicon&r=PG&f=1", "display_name": "sukorenomw", "link": "https://stackoverflow.com/users/3187396/sukorenomw"}, "is_accepted": true, "score": 1, "last_activity_date": 1507739241, "creation_date": 1507739241, "answer_id": 46693251, "question_id": 46662462, "link": "https://stackoverflow.com/questions/46662462/how-can-modify-httparty-gem-for-using-nethttp-socksproxy/46693251#46693251", "title": "How can modify HTTParty gem for using Net::HTTP.SOCKSProxy", "body": "<p>You could use another gem such as <a href=\"https://github.com/excon/excon\" rel=\"nofollow noreferrer\">excon</a>\nthis gem support http proxy</p>\n"}], "owner": {"reputation": 117, "user_id": 3527673, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/af095df229db019e1dd32bd081a101e5?s=128&d=identicon&r=PG&f=1", "display_name": "melnik_vasya", "link": "https://stackoverflow.com/users/3527673/melnik-vasya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 222, "favorite_count": 0, "accepted_answer_id": 46693251, "answer_count": 1, "score": 1, "last_activity_date": 1507739241, "creation_date": 1507625624, "question_id": 46662462, "link": "https://stackoverflow.com/questions/46662462/how-can-modify-httparty-gem-for-using-nethttp-socksproxy", "title": "How can modify HTTParty gem for using Net::HTTP.SOCKSProxy", "body": "<p>I want to be able to make requests with HTTParty via the tor. This functionality isn't yet available in HTTParty gem. How can I change modify it to do requests in combination with Net::HTTP.SOCKSProxy</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 1, "creation_date": 1507626024, "post_id": 46662442, "comment_id": 80273543, "body": "You should pay a little bit more attention on your writing : it is unclear what you are asking, and your exemple look like it could be shorter (you don&#39;t need the controller / helper code IMHO)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 1, "creation_date": 1507626287, "post_id": 46662442, "comment_id": 80273716, "body": "@UlysseBN: no, I find that controller/helper code are necessary here to demonstrate the issue. It&#39;s not a question about hashes, it&#39;s a question about behaviour of flash. Ok, maybe not [entire] helper :)"}, {"owner": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1507626431, "post_id": 46662442, "comment_id": 80273802, "body": "So the unnecessary part would be the last one on hash"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 6460, "user_id": 6320039, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/U4QjP.jpg?s=128&g=1", "display_name": "Ulysse BN", "link": "https://stackoverflow.com/users/6320039/ulysse-bn"}, "edited": false, "score": 0, "creation_date": 1507626566, "post_id": 46662442, "comment_id": 80273895, "body": "@UlysseBN: that one is useful too (although can be much prettified). It shows that hash works as expected. But not flash, which seemingly is a hash too. This is research effort, what we encourage. :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507633618, "post_id": 46662442, "comment_id": 80278536, "body": "@sawa: \ud83d\udc4d   on cleaning up that IRB mess. :)"}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1507643414, "post_id": 46662442, "comment_id": 80285370, "body": "See HashWithIndifferentAccess: <a href=\"https://apidock.com/rails/Hash/with_indifferent_access\" rel=\"nofollow noreferrer\">apidock.com/rails/Hash/with_indifferent_access</a>"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 1, "creation_date": 1507643950, "post_id": 46662442, "comment_id": 80285774, "body": "I don&#39;t really see why you would do this in the first place. The whole point of the flash hash is pass messages to the user. Unless they are all user facing you&#39;re doing it wrong."}], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507633259, "post_id": 46662636, "comment_id": 80278298, "body": "Since <code>to_hash</code> is applies, I don&#39;t think <code>FlashHash</code> or whatever is relevant. It is just a hash."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1507633377, "post_id": 46662636, "comment_id": 80278382, "body": "@sawa: on the contrary, It being a <code>FlashHash</code> is super-relevant. It&#39;s what does the conversion."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 2, "last_activity_date": 1507633802, "last_edit_date": 1507633802, "creation_date": 1507626110, "answer_id": 46662636, "question_id": 46662442, "link": "https://stackoverflow.com/questions/46662442/ruby-on-rails-flash/46662636#46662636", "title": "Ruby on Rails flash", "body": "<p>You seem to think that <code>flash</code> is a hash. It's not. It's a <a href=\"http://api.rubyonrails.org/v5.1.4/classes/ActionDispatch/Flash/FlashHash.html\" rel=\"nofollow noreferrer\"><code>FlashHash</code></a>. And its <code>[]=</code> method casts keys to strings.</p>\n\n<p><a href=\"http://api.rubyonrails.org/v5.1.4/classes/ActionDispatch/Flash/FlashHash.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\">http://api.rubyonrails.org/v5.1.4/classes/ActionDispatch/Flash/FlashHash.html#method-i-5B-5D-3D</a></p>\n\n<pre><code># File actionpack/lib/action_dispatch/middleware/flash.rb, line 153\ndef []=(k, v)\n  k = k.to_s\n  @discard.delete k\n  @flashes[k] = v\nend\n</code></pre>\n\n<p>That's how your <code>:notice</code> becomes <code>'notice'</code> (before it's stored anywhere).</p>\n"}], "owner": {"reputation": 25, "user_id": 8113729, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bda54520a4cdd750419e91499578235b?s=128&d=identicon&r=PG&f=1", "display_name": "Luke.T", "link": "https://stackoverflow.com/users/8113729/luke-t"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 130, "favorite_count": 0, "accepted_answer_id": 46662636, "answer_count": 1, "score": -1, "last_activity_date": 1507633802, "creation_date": 1507625565, "last_edit_date": 1507633671, "question_id": 46662442, "link": "https://stackoverflow.com/questions/46662442/ruby-on-rails-flash", "title": "Ruby on Rails flash", "body": "<p>I have controller:</p>\n\n<pre><code>class GroupsController &lt; ApplicationController\n  def index\n    flash[:notice] = \"GoodNight\"\n  end\nend\n</code></pre>\n\n<p>and helper:</p>\n\n<pre><code>module FlashesHelper\n  FLASHES_CLASS ={alert: \"danger\", notice: \"success\", warning: \"warning\"}.freeze    \n  def flash_class(key)\n    FLASHES_CLASS.fetch(key.to_sym, key)\n  end\n  def user_facing_flashes\n    flash.to_hash.slice(:notice, :alert, :warning)\n  end\nend\n</code></pre>\n\n<p>I'm confused that when I do:</p>\n\n<pre><code>flash.to_hash.slice(:notice, :alert, :warning)\n</code></pre>\n\n<p>it doesn't work but if I do:</p>\n\n<pre><code>flash.to_hash.slice(\"notice\", \"alert\", \"warning\")\n</code></pre>\n\n<p>it works.</p>\n\n<p>If I try something like this:</p>\n\n<pre><code>book = Hash.new\nbook[:matz] = \"Ruby\"\nbook.to_hash.slice(:matz) # =&gt; {:matz =&gt; \"Ruby\"}\nbook.to_hash.slice(\"matz\") # =&gt; {}\n</code></pre>\n\n<p>Please tell me why.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5", "ransack"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1507640912, "post_id": 46661933, "comment_id": 80283567, "body": "You forgot the <code>=</code> (equal sign) <code>&lt;% f.select :age_group_in,#... %&gt;</code> should be <code>&lt;%= f.select :age_group_in,#... %&gt;</code>. There are likely other issues with your <code>ransacker</code> but this is why the drop down doesn&#39;t render."}, {"owner": {"reputation": 791, "user_id": 7689318, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/8f1cb679b9ddd3e6cc685fcc6547dba9?s=128&d=identicon&r=PG&f=1", "display_name": "doyz", "link": "https://stackoverflow.com/users/7689318/doyz"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1507647587, "post_id": 46661933, "comment_id": 80288345, "body": "@engineersmnky that was careless of me. yes, there is a problem with my ransacker syntax as i am now getting the above error after i click submit."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1507650089, "post_id": 46661933, "comment_id": 80289963, "body": "Yeah I figured but I think you should probably think about your logic a bit as well. For example at what point do you expect <code>months_between</code> to be greater than 12 and how do you expect your third and forth conditions to ever apply? right now <code>months_between</code> has a maximum range of 0-11 (because <code>DateTime#month</code> will return 1-12) and the second condition is <code>&lt;= 12</code> which will always be true."}], "answers": [{"comments": [{"owner": {"reputation": 791, "user_id": 7689318, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/8f1cb679b9ddd3e6cc685fcc6547dba9?s=128&d=identicon&r=PG&f=1", "display_name": "doyz", "link": "https://stackoverflow.com/users/7689318/doyz"}, "edited": false, "score": 0, "creation_date": 1507658528, "post_id": 46671210, "comment_id": 80294650, "body": "I get 2 error: 1) syntax error: unexpected end-of-input, 2( can&#39;t find string &quot;SQL&quot; anywhere before EOF in the editor itself."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 791, "user_id": 7689318, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/8f1cb679b9ddd3e6cc685fcc6547dba9?s=128&d=identicon&r=PG&f=1", "display_name": "doyz", "link": "https://stackoverflow.com/users/7689318/doyz"}, "edited": false, "score": 0, "creation_date": 1507658784, "post_id": 46671210, "comment_id": 80294788, "body": "@diana are you sure you used exactly what I posted including the <code>SQL</code> before <code>Arel.sql(query)</code>? works fine in <a href=\"https://repl.it/MZUM/1\" rel=\"nofollow noreferrer\">this Gist</a>"}, {"owner": {"reputation": 791, "user_id": 7689318, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/8f1cb679b9ddd3e6cc685fcc6547dba9?s=128&d=identicon&r=PG&f=1", "display_name": "doyz", "link": "https://stackoverflow.com/users/7689318/doyz"}, "edited": false, "score": 0, "creation_date": 1507697938, "post_id": 46671210, "comment_id": 80308063, "body": "yeah.. it works now after i copied and pasted again, but strange this is happening...<a href=\"https://screenshots.firefox.com/qYIxobvqy3jy49D8/ide.c9.io\" rel=\"nofollow noreferrer\">screenshots.firefox.com/qYIxobvqy3jy49D8/ide.c9.&zwnj;&#8203;io</a>, i am now getting an ActiveRecord::StatementInvalid error --&gt; PG::SyntaxError: ERROR:  syntax error at or near &quot;Arel&quot; LINE 1: ...year&#39;, CURRENT_DATE) - DATE_PART(&#39;year&#39;, #&lt;struct Arel::Attr..."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 791, "user_id": 7689318, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/8f1cb679b9ddd3e6cc685fcc6547dba9?s=128&d=identicon&r=PG&f=1", "display_name": "doyz", "link": "https://stackoverflow.com/users/7689318/doyz"}, "edited": false, "score": 0, "creation_date": 1507720686, "post_id": 46671210, "comment_id": 80321117, "body": "@diana that was my mistake updated now. You could also just change the <code>parent.table[:created_at]</code> to articles.created_at"}], "tags": [], "owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "is_accepted": false, "score": 0, "last_activity_date": 1507720654, "last_edit_date": 1507720654, "creation_date": 1507651625, "answer_id": 46671210, "question_id": 46661933, "link": "https://stackoverflow.com/questions/46661933/ror-ransack-filter-results-by-range-of-numbers-age-categories/46671210#46671210", "title": "ROR + Ransack: FIlter results by range of numbers (age categories)", "body": "<p>You could create a <code>ransacker</code> like so </p>\n\n<pre><code>class Article &lt; ApplicationRecord\n\n  ransacker :age_group do |parent| \n    query= &lt;&lt;-SQL \n       CASE ((DATE_PART('year', CURRENT_DATE) - DATE_PART('year', #{parent.table[:created_at].to_sql})) * 12 +\n          (DATE_PART('month', CURRENT_DATE) - DATE_PART('month', #{parent.table[:created_at].to_sql})))\n         WHEN 0,1 THEN \"less than 1 month ago\"\n         WHEN 2,3 THEN \"less than 3 months ago\"\n         WHEN 4,5,6,7,8,9,10,11,12 THEN \"less than 1 year ago\"\n         ELSE \"more than 1 year ago\"\n       END\n    SQL \n    Arel.sql(query)\n  end\n</code></pre>\n\n<p>And then change  <code>:age_group_in</code> in your view to <code>:age_group_eq</code>. This answer assumes <code>postgres</code> if you are using something like <code>MSSQL</code> then the <code>CASE</code> potion is simplified to <code>DATEDIFF(m,#{parent.table[:created_at]},GETDATE())</code>.</p>\n\n<p>This lacks daily accuracy but I think it is close enough for your usage</p>\n"}], "owner": {"reputation": 791, "user_id": 7689318, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/8f1cb679b9ddd3e6cc685fcc6547dba9?s=128&d=identicon&r=PG&f=1", "display_name": "doyz", "link": "https://stackoverflow.com/users/7689318/doyz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 356, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507720654, "creation_date": 1507623974, "last_edit_date": 1507647857, "question_id": 46661933, "link": "https://stackoverflow.com/questions/46661933/ror-ransack-filter-results-by-range-of-numbers-age-categories", "title": "ROR + Ransack: FIlter results by range of numbers (age categories)", "body": "<p>I'm trying to allow filter criteria by age categories using Ransack. However, i do not have age category as part of the articles table, but as a method in articles model. I have referenced this other </p>\n\n<p>I want users to be able to filter articles with created_at dates belonging to an age category, however, i cant seem to understand why the options_for_select list for selecting the age category is not being rendered at all. When i checked in the rails console, there is not content between the div tag.</p>\n\n<p>However, the dropdown list for options_from_collection_for_select is rendered.</p>\n\n<p><strong>schema:</strong></p>\n\n<pre><code>  create_table \"articles\", force: :cascade do |t|\n    t.string \"title\"\n    t.text \"description\"\n    t.bigint \"user_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n</code></pre>\n\n<p><strong>browse.html.erb</strong></p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n  &lt;div class =\"row\"&gt;\n    &lt;div class=\"col-md-6 col-sm-6 col-xs-6\"&gt;\n      &lt;%= f.select :categories_name_cont, options_from_collection_for_select(Category.all, \"id\", \"name\", @q.categories_name_eq), \n                                                                            { :prompt =&gt; \"Any Category\" },\n                                                                            { class: \"form-control\" } %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-6 col-sm-6 col-xs-6\"&gt;\n      &lt;% f.select :age_group_in, options_for_select([[\"more than 1 year ago\", \"more than 1 year ago\"],\n                                                    [\"less than 1 year ago\", \"less than 1 year ago\"],\n                                                    [\"less than 3 months ago\", \"less than 3 months ago\"],\n                                                    [\"less than 1 month ago\", \"less than 1 month ago\"]]), \n                                                    { :prompt =&gt; \"Any Age Group\" }, \n                                                    { class: \"form-control\" } %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>articles controller</strong></p>\n\n<pre><code>def browse\n  @q = Article.ransack(params[:q])\n  @articles_morefilter = @q.result.includes(:categories, :users)\nend\n</code></pre>\n\n<p><strong>model: article.rb</strong></p>\n\n<pre><code>  def age_group\n    months_between = Date.today.month - self.created_at.month\n    if months_between &gt; 12\n        \"more than 1 year ago\"\n    elsif months_between  &lt;= 12\n        \"less than 1 year ago\"\n    elsif months_between  &lt;= 3\n        \"less than 3 months ago\"\n    elsif months_between &lt;= 1\n        \"less than 1 month ago\"\n    end\n  end\n\nransacker :age_group, :formatter =&gt; proc {|v| Date.today.month - v.created_at.month} do |parent|\n  parent.table[:created_at]\nend\n</code></pre>\n\n<p><strong>EDIT: I fixed it by adding = after &lt;% to render the field.</strong> I am now getting a new error, seems that there is a problem with the Ransacker syntax.</p>\n\n<pre><code>PG::InvalidDatetimeFormat: ERROR:  invalid input syntax for type timestamp: \"less than 1 month ago\"\nLINE 1: ...name\" ILIKE '%1%' AND \"articles\".\"created_at\" IN ('less than...\n</code></pre>\n\n<p>When i test changing <code>parent.table[:created_at]</code> to <code>parent.table[:age_group]</code>, i get this error instead:</p>\n\n<pre><code>PG::UndefinedColumn: ERROR:  column articles.age_group does not exist\nLINE 1: ...ry_id\" WHERE (\"categories\".\"name\" ILIKE '%3%' AND \"articles\"...\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "bundle-install"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1507631427, "post_id": 46660984, "comment_id": 80277046, "body": "<code>bundler</code> and <code>git</code> don&#39;t depend on each other, they are unrelated and fulfill two different responsibilities. You might use both in the same project but you can use <code>bundler</code> without <code>git</code> and <code>git</code> without <code>bundler</code>. Therefore your question is unclear to me."}], "answers": [{"tags": [], "owner": {"reputation": 2260, "user_id": 5687152, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/J754G.jpg?s=128&g=1", "display_name": "mabe02", "link": "https://stackoverflow.com/users/5687152/mabe02"}, "is_accepted": false, "score": 0, "last_activity_date": 1507622348, "creation_date": 1507622348, "answer_id": 46661466, "question_id": 46660984, "link": "https://stackoverflow.com/questions/46660984/ruby-workflow-bundle-install/46661466#46661466", "title": "Ruby Workflow - Bundle Install", "body": "<p>You will need to launch <code>bundle install</code> every time that you update your <code>Gemfile</code>.</p>\n\n<p>Before you run it, make sure you have <code>bundler</code> gem installed:</p>\n\n<pre><code>$ gem install bundler\n</code></pre>\n\n<p>You can integrate this command and several others adding some <a href=\"https://git-scm.com/book/gr/v2/Customizing-Git-Git-Hooks\" rel=\"nofollow noreferrer\">git hooks</a>. For example, I use <a href=\"https://github.com/brigade/overcommit\" rel=\"nofollow noreferrer\"><code>overcommit</code> gem</a> to make sure that some actions are performed before commit, merge and push.</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4838458, "user_type": "registered", "profile_image": "https://graph.facebook.com/839795156069799/picture?type=large", "display_name": "Unathi", "link": "https://stackoverflow.com/users/4838458/unathi"}, "is_accepted": false, "score": 0, "last_activity_date": 1507641751, "creation_date": 1507641751, "answer_id": 46667895, "question_id": 46660984, "link": "https://stackoverflow.com/questions/46660984/ruby-workflow-bundle-install/46667895#46667895", "title": "Ruby Workflow - Bundle Install", "body": "<p>You would want to ensure that you have run <code>bundle install</code> before adding files to a git commit.\nYou should be in the habit of running <code>bundle install</code> every time your <code>Gemfile</code> is changed.</p>\n\n<p><strong><em>Please note:</em></strong> Git and Bundler are <em>independent</em>. The only reason you want to have run <code>bundle install</code> before adding to git is to ensure that your <code>Gemfile.lock</code> is updated to contain the latest information.</p>\n"}], "owner": {"reputation": 1, "user_id": 5480583, "user_type": "registered", "profile_image": "https://graph.facebook.com/1072271052817019/picture?type=large", "display_name": "Juan Liner", "link": "https://stackoverflow.com/users/5480583/juan-liner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1507641751, "creation_date": 1507620759, "question_id": 46660984, "link": "https://stackoverflow.com/questions/46660984/ruby-workflow-bundle-install", "title": "Ruby Workflow - Bundle Install", "body": "<p>Where does bundle install fit into the add-commit-push workflow?  In other words, when is it necessary.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 6780066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c6ef08006356661fc28205728fe372?s=128&d=identicon&r=PG&f=1", "display_name": "Georgeheap", "link": "https://stackoverflow.com/users/6780066/georgeheap"}, "edited": false, "score": 0, "creation_date": 1507626049, "post_id": 46660994, "comment_id": 80273565, "body": "This didn&#39;t seem to fix it but I have solved the problem now. Thanks for the tip about checking save. I am adding that now."}], "tags": [], "owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "is_accepted": false, "score": 1, "last_activity_date": 1507621138, "last_edit_date": 1507621138, "creation_date": 1507620794, "answer_id": 46660994, "question_id": 46660214, "link": "https://stackoverflow.com/questions/46660214/rails-rspec-test-fails-when-it-works-in-app/46660994#46660994", "title": "Rails Rspec test fails when it works in app", "body": "<p><code>let</code> is lazily evaluated. When the <code>before</code> block is executed there are no records, because the <code>let</code> blocks haven't yet been called.</p>\n\n<p>Either change <code>let</code> to <code>let!</code> to execute the block immediately or call <code>booking_6</code> and <code>booking_7</code> right before <code>Booking.auto_lock_guests</code></p>\n\n<p>EDIT:</p>\n\n<p>Also you don't check wether the <code>booking.save</code> succeeded. If <code>booking.save</code> failed - you would never know. :)</p>\n\n<p>The <code>next unless booking.guests_completed_at &lt;= 1.day.ago</code> could probably be rewritten as a query: <code>where(Booking.arel_table[:guests_completed_at].gt(1.day.ago))</code></p>\n"}, {"comments": [{"owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 0, "creation_date": 1507630871, "post_id": 46662588, "comment_id": 80276710, "body": "I&#39;m puzzled on how this can work, as I&#39;d be sure that both bookings have not been created at the time when calling <code>Booking.auto_lock_guests</code>, but if it works, it works."}], "tags": [], "owner": {"reputation": 85, "user_id": 6780066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c6ef08006356661fc28205728fe372?s=128&d=identicon&r=PG&f=1", "display_name": "Georgeheap", "link": "https://stackoverflow.com/users/6780066/georgeheap"}, "is_accepted": true, "score": 0, "last_activity_date": 1507625953, "creation_date": 1507625953, "answer_id": 46662588, "question_id": 46660214, "link": "https://stackoverflow.com/questions/46660214/rails-rspec-test-fails-when-it-works-in-app/46662588#46662588", "title": "Rails Rspec test fails when it works in app", "body": "<p>I ended up having to add this into the before action after calling Booking.auto_lock_guests and it worked.</p>\n\n<pre><code>before do\n  Booking.auto_lock_guests\n  booking_7.reload\n  booking_6.reload\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1507634972, "post_id": 46665503, "comment_id": 80279347, "body": "If you really have to pull the records out of the db make sure you do it <a href=\"http://api.rubyonrails.org/v5.1/classes/ActiveRecord/Batches.html\" rel=\"nofollow noreferrer\">in batches</a>."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1507635090, "post_id": 46665503, "comment_id": 80279427, "body": "Also <code>context</code> should be used for context for example <code>context &quot;when the user is signed in&quot;</code>. <code>describe</code> blocks should be used to describe what it is that you are testing."}, {"owner": {"reputation": 85, "user_id": 6780066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c6ef08006356661fc28205728fe372?s=128&d=identicon&r=PG&f=1", "display_name": "Georgeheap", "link": "https://stackoverflow.com/users/6780066/georgeheap"}, "edited": false, "score": 0, "creation_date": 1507637916, "post_id": 46665503, "comment_id": 80281367, "body": "I am doing something after with the bookings that I didn&#39;t list here as that portion worked. I am definitely changing it to have the extra where though as that will limit the number of bookings that come through. But I don&#39;t think I can do the update_all as I appear to then lose the array of bookings and then can&#39;t find the guests within the bookings."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 85, "user_id": 6780066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c6ef08006356661fc28205728fe372?s=128&d=identicon&r=PG&f=1", "display_name": "Georgeheap", "link": "https://stackoverflow.com/users/6780066/georgeheap"}, "edited": false, "score": 0, "creation_date": 1507639447, "post_id": 46665503, "comment_id": 80282514, "body": "Well thats the whole idea - the records are not loaded into memory. If you have to load them into memory use <code>.find_each</code> but see if you can get it done by using a join query to get the guest as it will be much more performant."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1507635133, "last_edit_date": 1507635133, "creation_date": 1507634558, "answer_id": 46665503, "question_id": 46660214, "link": "https://stackoverflow.com/questions/46660214/rails-rspec-test-fails-when-it-works-in-app/46665503#46665503", "title": "Rails Rspec test fails when it works in app", "body": "<p>You don't need to iterate through the records in the first place. In fact it will cause problems as your app scales since pulling all those records into memory will exhaust the servers (or dynos) memory.</p>\n\n<p>You can select the records from the database and update them in a single query: </p>\n\n<pre><code>class Booking\n  def self.auto_lock_guests!\n    bookings = Booking.where(guests_completed: true, locked: false)\n                      .where('guests_completed_at &lt;= ?', 1.day.ago)\n    bookings.update_all(locked: true)\n  end\nend\n</code></pre>\n\n<p>The difference in execution time between many individual UPDATE queries and an updating many rows at once can be massive.</p>\n\n<p>To test it you can create multiple records and use change expectations:</p>\n\n<pre><code># use describe and not context for methods.\ndescribe \".auto_lock_guests\" do\n  # let! is not lazy loading\n  let!(:old_booking) { FactoryGirl.create(:booking, date: 7.days.ago, guests_completed: true, guests_completed_at: 3.days.ago, locked: false )}\n  let!(:new_booking) { FactoryGirl.create(:booking, date: Date.today, guests_completed: true, guests_completed_at: DateTime.now, locked: false )}\n\n   it 'locks a booking with a guests_completed date older than a day ago' do\n     expect do\n       Bookings.auto_lock_guests! &amp;&amp; old_booking.reload\n     end.to change { old_booking.locked }.from(false).to(true)\n   end\n\n   it 'does not lock a when guests_completed date is less than a day ago' do\n     expect do\n       Bookings.auto_lock_guests! &amp;&amp; new_booking.reload\n     end.to_not change { new_booking.locked }.from(false).to(true)\n   end\nend\n</code></pre>\n\n<p>Using <code>change</code> is a very good idea when testing methods that change the database as they verify both the initial state and the result.</p>\n"}], "owner": {"reputation": 85, "user_id": 6780066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d5c6ef08006356661fc28205728fe372?s=128&d=identicon&r=PG&f=1", "display_name": "Georgeheap", "link": "https://stackoverflow.com/users/6780066/georgeheap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 111, "favorite_count": 0, "accepted_answer_id": 46662588, "answer_count": 3, "score": 0, "last_activity_date": 1507635133, "creation_date": 1507617927, "question_id": 46660214, "link": "https://stackoverflow.com/questions/46660214/rails-rspec-test-fails-when-it-works-in-app", "title": "Rails Rspec test fails when it works in app", "body": "<p>I have the following code and test that I can't seem to make pass. The code should be auto locking all bookings that have been completed over 24 hours ago. </p>\n\n<p>When I put a pry into the test and run the first line of Booking.auto_lock_guests nothing happens. When I type booking_7 and after type Booking.auto_lock_guests then it changes locked to true. Is this something to do with the way let is set up that it is not showing up in Booking.all? Or is it the way I have written the test? </p>\n\n<p>Any help would be greatly appreciated.</p>\n\n<pre><code>  def self.auto_lock_guests\n    bookings = Booking.where(guests_completed: true, locked: false)\n    bookings.each do |booking|\n      next unless booking.guests_completed_at &lt;= 1.day.ago\n      booking.locked = true\n      booking.save\n    end\n  end\n\n\n  context 'auto_lock_guests' do\n    let(:booking_6) { FactoryGirl.create(:booking, date: Date.today - 5.day, guests_completed: true, guests_completed_at: DateTime.now, locked: false )}\n    let(:booking_7) { FactoryGirl.create(:booking, date: Date.today - 5.day, guests_completed: true, guests_completed_at: DateTime.now - 3.day, locked: false )}\n    before do\n      Booking.auto_lock_guests\n    end\n    it 'should only lock bookings with a guests_completed date older than a day ago' do\n      expect(booking_7.locked).to eq(true)\n      expect(booking_6.locked).to eq(false)\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 1, "last_activity_date": 1507617333, "creation_date": 1507617333, "answer_id": 46660055, "question_id": 46659976, "link": "https://stackoverflow.com/questions/46659976/rails-param-is-missing-or-the-value-is-empty-even-with-matching-names/46660055#46660055", "title": "Rails - param is missing or the value is empty - even with matching names", "body": "<p>Because <code>@application</code> is an instance of <code>RegisteredApplication</code> I am pretty sure that your params would look like this:</p>\n\n<pre><code>{ registered_application: { name : # ...\n</code></pre>\n\n<p>You can see the format of the parameter hash in your log file.</p>\n\n<p>Therefore your <code>application_params</code> method must look like this:</p>\n\n<pre><code>def application_params\n  params.require(:registered_application).permit(:name, :url)\nend\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 8685414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53ab952fbef0d29ecc9033b6e9500bd1?s=128&d=identicon&r=PG&f=1", "display_name": "Mac", "link": "https://stackoverflow.com/users/8685414/mac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 46660055, "answer_count": 1, "score": 0, "last_activity_date": 1507617333, "creation_date": 1507617058, "question_id": 46659976, "link": "https://stackoverflow.com/questions/46659976/rails-param-is-missing-or-the-value-is-empty-even-with-matching-names", "title": "Rails - param is missing or the value is empty - even with matching names", "body": "<p>I know this title has been used alot.  However, my code is different from most similar questions here on Stackoverflow.</p>\n\n<p>When I use my form to enter data into the database I get this error:</p>\n\n<pre><code>param is missing or the value is empty: application\n</code></pre>\n\n<p>My controller code is:</p>\n\n<pre><code>def new\n  @application = RegisteredApplication.new\nend\n\ndef create\n  @application = RegisteredApplication.new(application_params)\n\n  @application.user = current_user\n\n  if @application.save\n    redirect_to @application, notice: \"Your new application is now registered\"\n  else\n    flash.now[:alert] = \"Error registering application. Please try again.\"\n    render :new\n  end\nend\n\nprivate\n\ndef application_params\n  params.require(:application).permit(:name, :url)\nend\n</code></pre>\n\n<p>The new.html.erb file:</p>\n\n<pre><code>&lt;h1&gt;Register New Application&lt;/h1&gt;\n&lt;%= render partial: 'form', locals: { application: @application } %&gt;\n</code></pre>\n\n<p>And the _form.html.erb file:</p>\n\n<pre><code>&lt;%= form_for(application) do |f| %&gt;\n    &lt;% if application.errors.any? %&gt;\n        &lt;div class=\"alert alert-danger\"&gt;\n          &lt;h4&gt;&lt;%= pluralize(application.errors.count, \"error\") %&gt;.&lt;/h4&gt;\n          &lt;ul&gt;\n            &lt;% application.errors.full_messages.each do |msg| %&gt;\n                &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n            &lt;% end %&gt;\n          &lt;/ul&gt;\n        &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :name %&gt;\n      &lt;%= f.text_field :name, class: 'form-control', placeholder: \"Enter application name\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :url %&gt;\n      &lt;%= f.text_field :url, rows: 8, class: 'form-control', placeholder: \"Enter application url\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n      &lt;%= f.submit \"Save\", class: 'btn btn-success' %&gt;\n    &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Most people posting this particular question don't match the name in the 'create' method with whats in require().  But, don't all my names match?  For further information, if I remove require(:application) so that it looks like this:</p>\n\n<pre><code>params.permit(:name, :url)\n</code></pre>\n\n<p>the above allows it to go to the database, however, it doesn't pass the information.  It creates a row in the DB, but the fields are nil.  Really confused here.  Thanks in advanced.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wsdl", "soap-client", "savon"], "owner": {"reputation": 11, "user_id": 8732352, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/42aa4eda2852c610d89903c3bf2ae427?s=128&d=identicon&r=PG&f=1", "display_name": "Vishal Jagtap", "link": "https://stackoverflow.com/users/8732352/vishal-jagtap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 187, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1507616132, "creation_date": 1507616132, "question_id": 46659745, "link": "https://stackoverflow.com/questions/46659745/pass-complex-type-parameter-as-object-in-savon", "title": "Pass complex type parameter as object in Savon", "body": "<p>I want to pass the object as a parameter in Savon call. I am passing hash with type as follows</p>\n\n<pre><code>require 'savon' \n\nclass Test\ndef operation \nclient = Savon.client(wsdl:'Web service wsdl link for eg http://google.com?wsdl')\n\n//in this case p_request is the name of TestMessage type which i got while reading from wsdl \n\ndata = { 'p_request' =&gt; { 'Request' =&gt; 'Test',\n                      'Result' =&gt; 'empty'} }\n\nresponse = client.call(:ping1, message: data)\n</code></pre>\n\n<p>but I am getting NULL response. How to pass of Complex type in Savon call?</p>\n\n<p>Any help is appreciated.</p>\n\n<p>Please find WSDL</p>\n\n<pre><code>&lt;wsdl:types&gt;\n&lt;xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" elementFormDefault=\"qualified\" targetNamespace=\"http://tempuri.org/\"&gt;\n&lt;xs:import namespace=\"http://schemas.datacontract.org/2004/07/Xipaysandbox\"/&gt;\n&lt;xs:element name=\"Ping1\"&gt;\n&lt;xs:complexType&gt;\n&lt;xs:sequence&gt;\n&lt;xs:element xmlns:q1=\"http://schemas.datacontract.org/2004/07/Xipaysandbox\" minOccurs=\"0\" name=\"p_request\" nillable=\"true\" type=\"q1:TestMessage\"/&gt;\n&lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n&lt;/xs:element&gt;\n\n&lt;xs:schema xmlns:xs=\"http://www.w3.org/2001/XMLSchema\" xmlns:tns=\"http://schemas.datacontract.org/2004/07/Xipaysandbox\" elementFormDefault=\"qualified\" targetNamespace=\"http://schemas.datacontract.org/2004/07/Xipaysandbox\"&gt;\n&lt;xs:import namespace=\"http://schemas.microsoft.com/2003/10/Serialization/\"/&gt;\n&lt;xs:complexType name=\"TestMessage\"&gt;\n&lt;xs:sequence&gt;\n&lt;xs:element minOccurs=\"0\" name=\"Request\" nillable=\"true\" type=\"xs:string\"/&gt;\n&lt;xs:element minOccurs=\"0\" name=\"Result\" nillable=\"true\" type=\"xs:string\"/&gt;\n&lt;/xs:sequence&gt;\n&lt;/xs:complexType&gt;\n&lt;xs:element name=\"TestMessage\" nillable=\"true\" type=\"tns:TestMessage\"/&gt;\n&lt;/xs:schema&gt;\n&lt;/wsdl:types&gt;\n</code></pre>\n"}, {"tags": ["ruby", "github", "rubygems", "installation"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 8749582, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612605168810312/picture?type=large", "display_name": "Leobama ", "link": "https://stackoverflow.com/users/8749582/leobama"}, "edited": false, "score": 0, "creation_date": 1507605608, "post_id": 46658068, "comment_id": 80265029, "body": "this gem is not in the ruby database and it can&#39;t be installed with that command and the instructions aren&#39;t in the readme."}, {"owner": {"reputation": 99, "user_id": 8747591, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yP3GXQrszH4/AAAAAAAAAAI/AAAAAAAAACg/383PpooeqQY/photo.jpg?sz=128", "display_name": "Daniel Owsley", "link": "https://stackoverflow.com/users/8747591/daniel-owsley"}, "reply_to_user": {"reputation": 1, "user_id": 8749582, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612605168810312/picture?type=large", "display_name": "Leobama ", "link": "https://stackoverflow.com/users/8749582/leobama"}, "edited": false, "score": 0, "creation_date": 1507605733, "post_id": 46658068, "comment_id": 80265057, "body": "If that is the case then you need to follow the solution that Rick Majpruz provided. This also means that this isn&#39;t a gem. Instead it is just a ruby project."}], "tags": [], "owner": {"reputation": 99, "user_id": 8747591, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yP3GXQrszH4/AAAAAAAAAAI/AAAAAAAAACg/383PpooeqQY/photo.jpg?sz=128", "display_name": "Daniel Owsley", "link": "https://stackoverflow.com/users/8747591/daniel-owsley"}, "is_accepted": false, "score": 1, "last_activity_date": 1507605054, "creation_date": 1507605054, "answer_id": 46658068, "question_id": 46658022, "link": "https://stackoverflow.com/questions/46658022/how-can-i-install-this-gem/46658068#46658068", "title": "How can I install this gem?", "body": "<p>Git is not the tool to install gems. You install a gem with <code>gem install</code>. The instructions to do so are usually provided on a gem's github readme.</p>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 8749582, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612605168810312/picture?type=large", "display_name": "Leobama ", "link": "https://stackoverflow.com/users/8749582/leobama"}, "edited": false, "score": 0, "creation_date": 1507606020, "post_id": 46658086, "comment_id": 80265118, "body": "I tried it but neither is recognized as command by the console."}, {"owner": {"reputation": 631, "user_id": 6514691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ee33b08c26c153742e975d043ab892f?s=128&d=identicon&r=PG&f=1", "display_name": "Rick Majpruz", "link": "https://stackoverflow.com/users/6514691/rick-majpruz"}, "reply_to_user": {"reputation": 1, "user_id": 8749582, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612605168810312/picture?type=large", "display_name": "Leobama ", "link": "https://stackoverflow.com/users/8749582/leobama"}, "edited": false, "score": 0, "creation_date": 1507606367, "post_id": 46658086, "comment_id": 80265177, "body": "Odd. Because that command is recognized for me. What OS are you using? If it is Linux or MacOS then issue <code>which git</code> at the console ... there&#39;s something equivalent on Windows. Maybe you don&#39;t have git installed? If not then search on installing git for your specific OS."}], "tags": [], "owner": {"reputation": 631, "user_id": 6514691, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0ee33b08c26c153742e975d043ab892f?s=128&d=identicon&r=PG&f=1", "display_name": "Rick Majpruz", "link": "https://stackoverflow.com/users/6514691/rick-majpruz"}, "is_accepted": false, "score": 1, "last_activity_date": 1507605257, "creation_date": 1507605257, "answer_id": 46658086, "question_id": 46658022, "link": "https://stackoverflow.com/questions/46658022/how-can-i-install-this-gem/46658086#46658086", "title": "How can I install this gem?", "body": "<p>Remember to include <code>clone</code> with your <code>git</code> command:</p>\n\n<pre><code>$ git clone https://github.com/xofred/deviantart-gallery-downloader.git\n</code></pre>\n\n<p>This will clone a copy of the code on the GitHub repo. Then follow the instructions in the <code>README.md</code> file to complete the install and start using.</p>\n\n<p>... or follow Daniel Owsley's answer and just use <code>gem install</code> if you're not interested in getting the repo source.</p>\n"}], "owner": {"reputation": 1, "user_id": 8749582, "user_type": "registered", "profile_image": "https://graph.facebook.com/1612605168810312/picture?type=large", "display_name": "Leobama ", "link": "https://stackoverflow.com/users/8749582/leobama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "answer_count": 2, "score": -3, "last_activity_date": 1507605257, "creation_date": 1507604708, "question_id": 46658022, "link": "https://stackoverflow.com/questions/46658022/how-can-i-install-this-gem", "title": "How can I install this gem?", "body": "<p>I have tried to install this gem from github with the command git but the console doesn't recognize it as a command.\nAny other alternative ways to install it? link: <a href=\"https://github.com/xofred/deviantart-gallery-downloader\" rel=\"nofollow noreferrer\">https://github.com/xofred/deviantart-gallery-downloader</a> Thanks in advance.</p>\n"}, {"tags": ["arrays", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 99, "user_id": 8747591, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-yP3GXQrszH4/AAAAAAAAAAI/AAAAAAAAACg/383PpooeqQY/photo.jpg?sz=128", "display_name": "Daniel Owsley", "link": "https://stackoverflow.com/users/8747591/daniel-owsley"}, "is_accepted": true, "score": 0, "last_activity_date": 1507642874, "last_edit_date": 1507642874, "creation_date": 1507604686, "answer_id": 46658017, "question_id": 46657994, "link": "https://stackoverflow.com/questions/46657994/how-to-add-contents-in-an-array-in-unit-test/46658017#46658017", "title": "how to add contents in an array in unit test", "body": "<p>You can merge in the attributes:</p>\n\n<pre><code>parsed_response.merge('f' =&gt; f_output.attributes)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 4838458, "user_type": "registered", "profile_image": "https://graph.facebook.com/839795156069799/picture?type=large", "display_name": "Unathi", "link": "https://stackoverflow.com/users/4838458/unathi"}, "is_accepted": false, "score": 0, "last_activity_date": 1507642670, "creation_date": 1507642670, "answer_id": 46668231, "question_id": 46657994, "link": "https://stackoverflow.com/questions/46657994/how-to-add-contents-in-an-array-in-unit-test/46668231#46668231", "title": "how to add contents in an array in unit test", "body": "<p>You can use <a href=\"https://ruby-doc.org/core-2.2.0/Hash.html#method-i-merge\" rel=\"nofollow noreferrer\">Hash#merge</a>.</p>\n\n<p>So if you wanted it to always be a part of your <strong>parsed_response</strong>, you can change your <code>let</code> statement to something like:</p>\n\n<pre><code>let(:parsed_response) { JSON.parse(response.body).merge('f' =&gt; f_output.attribtutes) }\n</code></pre>\n"}], "owner": {"reputation": 115, "user_id": 8518596, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/ae6e753c58a8469c11e87444002683ae?s=128&d=identicon&r=PG&f=1", "display_name": "Nicholas james", "link": "https://stackoverflow.com/users/8518596/nicholas-james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "accepted_answer_id": 46658017, "answer_count": 2, "score": -3, "last_activity_date": 1507642874, "creation_date": 1507604488, "question_id": 46657994, "link": "https://stackoverflow.com/questions/46657994/how-to-add-contents-in-an-array-in-unit-test", "title": "how to add contents in an array in unit test", "body": "<p>I have following statement</p>\n\n<pre><code>    let(:parsed_response) { JSON.parse(response.body) }\n</code></pre>\n\n<p>It returns me following output</p>\n\n<pre><code>{\"a\"=&gt;1, \"b\"=&gt;\"2\", \"c\"=&gt;\"3\", \"d\"=&gt;\"4\", \"e\"=&gt;\"5\", \"f\"=&gt;[]}\n</code></pre>\n\n<p>and i have following statement</p>\n\n<pre><code>  let(:f_output) do\n    FactoryGirl.create(:something,\n                       g: something.id,\n                       h: something2.id,\n                       i: 'something')\n  end\n</code></pre>\n\n<p>How can i load f element from first statement output with the result from f_output object?</p>\n\n<pre><code>{\"a\"=&gt;1, \"b\"=&gt;\"abc\", \"c\"=&gt;\"def\", \"d\"=&gt;\"ges\", \"e\"=&gt;\"ehd\", \"f\"=&gt;[\"g\"=&gt;\"kjl\", \"h\"=&gt;\"oel\", \"i\"=&gt;\"pde\"]}\n</code></pre>\n"}, {"tags": ["ruby", "pseudo-globals"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1507602577, "post_id": 46657536, "comment_id": 80264397, "body": "If you&#39;re looking to extract values, consider using <code>scan</code> instead of <code>gsub</code>."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1507656168, "post_id": 46657536, "comment_id": 80293355, "body": "To fetch the amount use <code>&quot;Retailer Staff $5.60&quot;[&#47;\\$(\\d+(\\.\\d+)?)&#47;, 1]</code>"}], "answers": [{"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": false, "score": 2, "last_activity_date": 1507602432, "creation_date": 1507602432, "answer_id": 46657777, "question_id": 46657536, "link": "https://stackoverflow.com/questions/46657536/gsub-caching-groups/46657777#46657777", "title": "gsub caching groups?", "body": "<p>Your code doesn't really make sense and it doesn't do what you think it does.</p>\n\n<p><code>$1</code> is a global variable so the first <code>gsub</code> will replace the matched pattern with whatever was in <code>$1</code> <em>before</em> you called <code>gsub</code>. This:</p>\n\n<pre><code>\"Retailer Staff $5.60\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, $1)\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>confusion = $1\n\"Retailer Staff $5.60\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, confusion)\n</code></pre>\n\n<p>when you really mean to say:</p>\n\n<pre><code>\"Retailer Staff $5.60\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/) { $1 }\n</code></pre>\n\n<p>so that <code>gsub</code> can set <code>$1</code> before yielding to the block.</p>\n\n<p>Once you understand when <code>$1</code> is set and when it is being evaluated then everything else falls into place. Your first <code>gsub</code> ends up setting <code>$1</code> to <code>'5.60'</code> and then your next call is just an overcomplicated way of saying:</p>\n\n<pre><code>\"Retailer Staff $5\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, '5.60')\n</code></pre>\n\n<p>and it sets <code>$1</code> to <code>'5'</code>. And so on.</p>\n"}, {"tags": [], "owner": {"reputation": 2886, "user_id": 2660531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75352c499497b518d2d5f67d6b6066c0?s=128&d=identicon&r=PG", "display_name": "rdubya", "link": "https://stackoverflow.com/users/2660531/rdubya"}, "is_accepted": true, "score": 2, "last_activity_date": 1507602862, "last_edit_date": 1507602862, "creation_date": 1507602510, "answer_id": 46657789, "question_id": 46657536, "link": "https://stackoverflow.com/questions/46657536/gsub-caching-groups/46657789#46657789", "title": "gsub caching groups?", "body": "<p>I believe this is happening because <code>$1</code> actually is a global reference to the first capturing group found in the last regular expression that was processed: <a href=\"http://ruby-doc.org/core-2.4.2/Regexp.html#class-Regexp-label-Special+global+variables\" rel=\"nofollow noreferrer\">ruby 2.4 docs</a>. So in your case you probably had already tested the regex and matched on \"5.60\". Here is an annotated snippet that I ran in ruby 2.0:</p>\n\n<pre><code># Since no regex has executed yet $1 is nil\nirb(main):001:0&gt; \"Retailer Staff $5.60\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, $1)\nTypeError: no implicit conversion of nil into String\n    from (irb):1:in 'gsub'\n    from (irb):1\n    from /usr/bin/irb:12:in '&lt;main&gt;'\nirb(main):002:0&gt; \"Retailer Staff $5.60\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, 'some value')\n=&gt; \"some value\"\nirb(main):003:0&gt; $1   # Now we have executed a regex so $1 is set\n=&gt; \"5.60\"             \nirb(main):004:0&gt; \"Retailer Staff $5.60\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, $1) \n=&gt; \"5.60\"\nirb(main):005:0&gt; $1   # This is still the same value because we matched the same string\n=&gt; \"5.60\"             \nirb(main):006:0&gt; \"Retailer Staff $5\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, $1)\n=&gt; \"5.60\"\nirb(main):007:0&gt; $1   # Now we have matched the 5 so $1 has the new value\n=&gt; \"5\"                \nirb(main):008:0&gt; \"Retailer Staff $5\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, $1)\n=&gt; \"5\"\nirb(main):009:0&gt; $1\n=&gt; \"5\"\n</code></pre>\n"}], "owner": {"reputation": 9584, "user_id": 1420684, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/78242bebaa42db9b1f771e6c19a074fe?s=128&d=identicon&r=PG&f=1", "display_name": "Mirror318", "link": "https://stackoverflow.com/users/1420684/mirror318"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "accepted_answer_id": 46657789, "answer_count": 2, "score": 0, "last_activity_date": 1507616582, "creation_date": 1507600648, "last_edit_date": 1507616582, "question_id": 46657536, "link": "https://stackoverflow.com/questions/46657536/gsub-caching-groups", "title": "gsub caching groups?", "body": "<p>If I run this code:</p>\n\n<pre><code>\"Retailer Staff $5.60\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, $1)\n# =&gt; 5.60\n</code></pre>\n\n<p>and then I change the value to:</p>\n\n<pre><code>\"Retailer Staff $5\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, $1)\n# =&gt; 5.60\n</code></pre>\n\n<p>the answer stays at <code>5.60</code>. Then, if I run the same line again, I get:</p>\n\n<pre><code>\"Retailer Staff $5\".gsub(/.*\\$(\\d+(\\.\\d+)?).*/, $1)\n# =&gt; 5\n</code></pre>\n\n<p>What's happening? Why would the same code run twice give two answers? Is <code>gsub</code> caching something?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "pg-search"], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 8749164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7b381bca7eaafdbd6bcecbcc4a5d4b?s=128&d=identicon&r=PG&f=1", "display_name": "Dauncing", "link": "https://stackoverflow.com/users/8749164/dauncing"}, "edited": false, "score": 0, "creation_date": 1507761484, "post_id": 46693419, "comment_id": 80344807, "body": "I tried a similar approach already using the :if attribute. The problem is that I would need to call current_user from within my model. I managed to get the current_user object inside the model using a custom module even though you&#39;re not supposed to, but it broke the search indexing function.  <code>multisearchable :against =&gt; [:title, :year, :user_id], :if =&gt; lambda { |record| record.user_id == Current.user.id }</code>  Maybe you had a more elegant way to do this inside the model?  Thanks again"}, {"owner": {"reputation": 7, "user_id": 8749164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7b381bca7eaafdbd6bcecbcc4a5d4b?s=128&d=identicon&r=PG&f=1", "display_name": "Dauncing", "link": "https://stackoverflow.com/users/8749164/dauncing"}, "edited": false, "score": 0, "creation_date": 1507784605, "post_id": 46693419, "comment_id": 80350541, "body": "I have a workaround but I think it will not perform well at scale. The follow code can be loaded in the search controller <code>results = PgSearch.multisearch(query).map(&amp;:searchable).select{|record&zwnj;&#8203;| record.user_id == current_user.id }.sort_by(&amp;sortField.to_sym)</code>   Would love a more elegant solution if anyone can suggest something."}], "tags": [], "owner": {"reputation": 68, "user_id": 3187396, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/54473ab0d509674da09ae1664128a95f?s=128&d=identicon&r=PG&f=1", "display_name": "sukorenomw", "link": "https://stackoverflow.com/users/3187396/sukorenomw"}, "is_accepted": false, "score": 0, "last_activity_date": 1507739792, "creation_date": 1507739792, "answer_id": 46693419, "question_id": 46657019, "link": "https://stackoverflow.com/questions/46657019/customize-pg-search-to-only-show-current-users-content/46693419#46693419", "title": "Customize pg_search to only show current user&#39;s content", "body": "<p>You can use pg_search_scope as described in <a href=\"https://github.com/Casecommons/pg_search#pg_search_scope\" rel=\"nofollow noreferrer\">pg_search_scope</a></p>\n\n<p>in your case is <a href=\"https://github.com/Casecommons/pg_search#configuring-multi-search\" rel=\"nofollow noreferrer\">pg_search_scope multi-search</a></p>\n"}, {"comments": [{"owner": {"reputation": 7, "user_id": 8749164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7b381bca7eaafdbd6bcecbcc4a5d4b?s=128&d=identicon&r=PG&f=1", "display_name": "Dauncing", "link": "https://stackoverflow.com/users/8749164/dauncing"}, "edited": false, "score": 0, "creation_date": 1568744642, "post_id": 47191164, "comment_id": 102369315, "body": "There is now a solution for this baked into pg_search, the additional_attributes feature \u2014 <a href=\"https://github.com/Casecommons/pg_search#more-options\" rel=\"nofollow noreferrer\">github.com/Casecommons/pg_search#more-options</a>"}], "tags": [], "owner": {"reputation": 926, "user_id": 2406315, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/BQoj3.jpg?s=128&g=1", "display_name": "bobbdelsol", "link": "https://stackoverflow.com/users/2406315/bobbdelsol"}, "is_accepted": true, "score": 0, "last_activity_date": 1510182963, "last_edit_date": 1510182963, "creation_date": 1510181961, "answer_id": 47191164, "question_id": 46657019, "link": "https://stackoverflow.com/questions/46657019/customize-pg-search-to-only-show-current-users-content/47191164#47191164", "title": "Customize pg_search to only show current user&#39;s content", "body": "<p>I am just starting to work with PgSearch, but based on what I see, you can only apply filters on what data gets sent into their database pg_search_documents.  So you cannot isolate on a particular user for the search that you do later.  They simply concat the various fields into their content field and reference the model and record they came from. This allows easy searches to find the records which match the criteria, but then you have to post process the data.</p>\n\n<p>To do what you're suggesting would require creating a search table for each user.</p>\n\n<p>if you include the user_id in your against criteria (should be in the content), then you can post process the data quickly since the ID will be in the content.  If it is at the end of the :against list, it will be at the end of the content, so you can strip it off quickly and process against it</p>\n"}], "owner": {"reputation": 7, "user_id": 8749164, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fc7b381bca7eaafdbd6bcecbcc4a5d4b?s=128&d=identicon&r=PG&f=1", "display_name": "Dauncing", "link": "https://stackoverflow.com/users/8749164/dauncing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 372, "favorite_count": 1, "accepted_answer_id": 47191164, "answer_count": 2, "score": 0, "last_activity_date": 1510182963, "creation_date": 1507596228, "last_edit_date": 1507696754, "question_id": 46657019, "link": "https://stackoverflow.com/questions/46657019/customize-pg-search-to-only-show-current-users-content", "title": "Customize pg_search to only show current user&#39;s content", "body": "<p>I have a multiuser site, and I want users to be able to full-text multi-model search <em>only</em> their own content. </p>\n\n<p>My Work model belongs_to: :users. Here's a snippet of work.rb :</p>\n\n<pre><code>class Work &lt; ApplicationRecord\n  include PgSearch\n  belongs_to :user\n  \u2026\n</code></pre>\n\n<p>The ideal scenario would be something like this in my controller:</p>\n\n<pre><code>@results = PgSearch.multisearch('spring').where(:_user_id =&gt; current_user.id)\n</code></pre>\n\n<p>I was able to easily do this using the Searchkick gem with Elasticsearch by using this line of code:</p>\n\n<pre><code>@results = Searchkick.search query, where: {user_id: current_user.id}\n</code></pre>\n\n<p>I can't use Elasticsearch anymore unfortunately.</p>\n\n<p>How can I implement similar functionality in pg_search?</p>\n\n<p>Thanks a lot</p>\n"}, {"tags": ["javascript", "ruby", "shopify", "liquid"], "answers": [{"comments": [{"owner": {"reputation": 2473, "user_id": 5481714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8258ffa13cee232e0da6c87f5d1bb32f?s=128&d=identicon&r=PG&f=1", "display_name": "kawnah", "link": "https://stackoverflow.com/users/5481714/kawnah"}, "edited": false, "score": 0, "creation_date": 1507758925, "post_id": 46659923, "comment_id": 80344029, "body": "This isn&#39;t working, I need to have it so when a variant link is followed it shows the selected variant image on the product page. Does that make sense?"}, {"owner": {"reputation": 10262, "user_id": 2329464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07c1b92b1c0090716296537fc12d028b?s=128&d=identicon&r=PG", "display_name": "drip", "link": "https://stackoverflow.com/users/2329464/drip"}, "reply_to_user": {"reputation": 2473, "user_id": 5481714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8258ffa13cee232e0da6c87f5d1bb32f?s=128&d=identicon&r=PG&f=1", "display_name": "kawnah", "link": "https://stackoverflow.com/users/5481714/kawnah"}, "edited": false, "score": 0, "creation_date": 1507785522, "post_id": 46659923, "comment_id": 80350882, "body": "And the provided code doesn&#39;t do that? I&#39;m not sure if what you asking and what you are looking is the same thing."}], "tags": [], "owner": {"reputation": 10262, "user_id": 2329464, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/07c1b92b1c0090716296537fc12d028b?s=128&d=identicon&r=PG", "display_name": "drip", "link": "https://stackoverflow.com/users/2329464/drip"}, "is_accepted": false, "score": 1, "last_activity_date": 1507616886, "creation_date": 1507616886, "answer_id": 46659923, "question_id": 46656427, "link": "https://stackoverflow.com/questions/46656427/shopify-variant-link-show-variant-image-of-selection/46659923#46659923", "title": "Shopify variant link - show variant image of selection", "body": "<p>The proper way to target this is the following.</p>\n\n<pre><code>{% assign featured_image = product.selected_or_first_available_variant.image | img_url: 'master' %}\n</code></pre>\n\n<p>Refer to the Variant Object documentation: <a href=\"https://help.shopify.com/themes/liquid/objects/variant\" rel=\"nofollow noreferrer\">https://help.shopify.com/themes/liquid/objects/variant</a></p>\n"}], "owner": {"reputation": 2473, "user_id": 5481714, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8258ffa13cee232e0da6c87f5d1bb32f?s=128&d=identicon&r=PG&f=1", "display_name": "kawnah", "link": "https://stackoverflow.com/users/5481714/kawnah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 192, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1507616886, "creation_date": 1507591447, "question_id": 46656427, "link": "https://stackoverflow.com/questions/46656427/shopify-variant-link-show-variant-image-of-selection", "title": "Shopify variant link - show variant image of selection", "body": "<p>On a store im working on, when you follow a link to a specific variant (/products/the-product?variant=12345678901) the image on the product page is the featured image of the product. It needs to be the variant image of the selected variant. </p>\n\n<p>How do I go about doing this? I've tried editing product.liquid to:</p>\n\n<p><code>{% assign featured_image = product.selected_or_first_available_variant.featured_image  %}</code></p>\n\n<p><code>{% assign featured_image = variant.image %}</code></p>\n\n<p>but neither work. </p>\n\n<p>How should I do this?</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1507604937, "post_id": 46655979, "comment_id": 80264892, "body": "You can use <code>select</code> or <code>reject</code>."}], "answers": [{"tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": false, "score": 2, "last_activity_date": 1507589319, "last_edit_date": 1507589319, "creation_date": 1507588626, "answer_id": 46656007, "question_id": 46655979, "link": "https://stackoverflow.com/questions/46655979/how-do-i-find-keys-in-my-hash-to-map-to-elements-that-match-a-condition/46656007#46656007", "title": "How do I find keys in my hash to map to elements that match a condition?", "body": "<p>Anything like this?</p>\n\n<pre><code>hash.each_key.select { |key| hash[key].count &gt;= 2 }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "edited": false, "score": 1, "creation_date": 1507593593, "post_id": 46656045, "comment_id": 80262398, "body": "This answer seems more flexible   result = hash.select{|_, a| a.length &gt; 1} #hash with the value/pair that meet the requirement     result.keys                               #the keys"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1507588870, "creation_date": 1507588870, "answer_id": 46656045, "question_id": 46655979, "link": "https://stackoverflow.com/questions/46655979/how-do-i-find-keys-in-my-hash-to-map-to-elements-that-match-a-condition/46656045#46656045", "title": "How do I find keys in my hash to map to elements that match a condition?", "body": "<pre><code>{1 =&gt; [\"abc\"], 2 =&gt; [\"ccc\", \"ddd\"]}.select{|_, a| a.length &gt; 1}.keys\n# =&gt; [2]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": 0, "last_activity_date": 1507622043, "creation_date": 1507622043, "answer_id": 46661374, "question_id": 46655979, "link": "https://stackoverflow.com/questions/46655979/how-do-i-find-keys-in-my-hash-to-map-to-elements-that-match-a-condition/46661374#46661374", "title": "How do I find keys in my hash to map to elements that match a condition?", "body": "<p>One more possible solution :)</p>\n\n<pre><code>{1 =&gt; [\"abc\"], 2 =&gt; [\"ccc\", \"ddd\"]}.map { |k, v| k if v.size &gt; 1 }.compact\n# =&gt; [2]\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7055375"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 46656045, "answer_count": 3, "score": 0, "last_activity_date": 1507622043, "creation_date": 1507588531, "question_id": 46655979, "link": "https://stackoverflow.com/questions/46655979/how-do-i-find-keys-in-my-hash-to-map-to-elements-that-match-a-condition", "title": "How do I find keys in my hash to map to elements that match a condition?", "body": "<p>I have a hash that maps integers to arrays.  For example</p>\n\n<pre><code>{1 =&gt; [\"abc\"], 2 =&gt; [\"ccc\", \"ddd\"]}\n</code></pre>\n\n<p>How do I get all the keys from my hash that have arrays with at least 2 elements in them?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1507602649, "post_id": 46656360, "comment_id": 80264409, "body": "You <code>raise</code> <i>or</i> you <code>return</code>. Doing both looks very, very odd. The <code>raise</code> is going to pop an exeption and the <code>return</code> will never, ever run."}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1507629098, "last_edit_date": 1507629098, "creation_date": 1507590974, "answer_id": 46656360, "question_id": 46655957, "link": "https://stackoverflow.com/questions/46655957/how-to-restrict-use-of-specific-attributes-to-specific-subclasses-in-ruby-on-rai/46656360#46656360", "title": "How to restrict use of specific attributes to specific subclasses in Ruby on Rails", "body": "<p>You can do this by creating custom setters and getters:</p>\n\n<pre><code>class MyError &lt; StdError; end\n\nclass Block &lt; ApplicationRecord\n  def video_name\n    raise MyError unless video?\n    super\n  end\n\n  def video_name=(value)\n    raise MyError unless video?\n    super\n  end\n\n  def video?\n    self.class.name == 'VideoBlock'\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1507602834, "creation_date": 1507602834, "answer_id": 46657831, "question_id": 46655957, "link": "https://stackoverflow.com/questions/46655957/how-to-restrict-use-of-specific-attributes-to-specific-subclasses-in-ruby-on-rai/46657831#46657831", "title": "How to restrict use of specific attributes to specific subclasses in Ruby on Rails", "body": "<p>If you want to wall these off in subclasses, you need to decide how you want to handle this. Do you want to just ignore data put in there, or do you want to freak out and catch on fire?</p>\n\n<p>For catching on fire:</p>\n\n<pre><code>class Video\n  validates :text_name,\n    absence: true\nend\n</code></pre>\n\n<p>That will wall off various attributes in this sub-class by raising validation exceptions.</p>\n\n<p>For ignoring:</p>\n\n<pre><code>class Video\n  def text_name=(v)\n    # Ignored\n  end\nend\n</code></pre>\n\n<p>This is less desirable since it eats data that you might want to actually save but due to a bug are losing.</p>\n"}], "owner": {"reputation": 2022, "user_id": 625666, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/e87d1a868b2dd5c385bcfb83944bc840?s=128&d=identicon&r=PG", "display_name": "Daniel May", "link": "https://stackoverflow.com/users/625666/daniel-may"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 46657831, "answer_count": 2, "score": -1, "last_activity_date": 1507629098, "creation_date": 1507588454, "question_id": 46655957, "link": "https://stackoverflow.com/questions/46655957/how-to-restrict-use-of-specific-attributes-to-specific-subclasses-in-ruby-on-rai", "title": "How to restrict use of specific attributes to specific subclasses in Ruby on Rails", "body": "<p>I've got classes in a single-table inheritance hierarchy that look like this:</p>\n\n<pre><code># Table name: blocks\n#\n#  video_name    :string  \n#  text_name     :string           \n#\n\nclass Block &lt; ApplicationRecord\n   ...\nend\n\nclass VideoBlock &lt; Block\nend\n\nclass TextBlock &lt; Block\nend\n</code></pre>\n\n<p>The <code>blocks</code> table holds all the attributes that <code>Block</code> subclasses will use. </p>\n\n<p>I'd like to specify how you can access:</p>\n\n<ul>\n<li><code>video_name</code> only when you are dealing with <code>VideoBlock</code> objects</li>\n<li><code>text_name</code> only when you are dealing with <code>TextBlock</code> objects</li>\n</ul>\n\n<p>How do I do this in Ruby on Rails? (using 5.x specifically)</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 3612, "user_id": 2865270, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1198391393/picture?type=large", "display_name": "Fred Willmore", "link": "https://stackoverflow.com/users/2865270/fred-willmore"}, "is_accepted": true, "score": 0, "last_activity_date": 1507588736, "creation_date": 1507588736, "answer_id": 46656026, "question_id": 46655927, "link": "https://stackoverflow.com/questions/46655927/chess-game-changing-the-object-being-iterated-on/46656026#46656026", "title": "Chess game, Changing the object being iterated on.", "body": "<p>You are modifying <code>element</code> which is a local copy of the object in row[]. I think you want to modify row[]. You can use <code>each_with_index</code> instead of <code>each</code> when iterating through the row:</p>\n\n<pre><code>row.each_with_index do |element, index|\n</code></pre>\n\n<p>and then modify the element in the row:</p>\n\n<pre><code>row[index] = \" \"\n</code></pre>\n"}], "owner": {"reputation": 257, "user_id": 6642551, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/1145135395532946/picture?type=large", "display_name": "Jacob Moore", "link": "https://stackoverflow.com/users/6642551/jacob-moore"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 46656026, "answer_count": 1, "score": 0, "last_activity_date": 1507588736, "creation_date": 1507588260, "question_id": 46655927, "link": "https://stackoverflow.com/questions/46655927/chess-game-changing-the-object-being-iterated-on", "title": "Chess game, Changing the object being iterated on.", "body": "<p>This is my method that is supposed to check for a check mate. One part of it is not working correctly. While @board[][] = element works when I try to change \"element\" which is the element being iterated on to a string, nothing happens. It stays whatever object it was. Is it not possible to change an element being iterated on with .each ?</p>\n\n<pre><code>@board[move[0]][move[1]] = element \nelement = \"\u2002\"\n</code></pre>\n\n<p>@board is an array of arrays, filled with strings and chess piece objects. If check is true the method is supposed to iterate through every pieces possible moves to see if any break the check. </p>\n\n<pre><code>  def check_mate(color) \n    @board.each do |row|\n      row.each do |element|\n        if element == \"\u2002\"\n        elsif element.color != color \n          elsif element.possible_moves(@board).each do |move|\n            if check(color) == true\n              save_game\n              @board[move[0]][move[1]] = element \n              element = \"\u2002\"\n              display\n              if check(color) == true \n                load_game\n              elsif check(color) != true \n                return true \n                break\n              end\n            else return true   \n            end \n          end\n        end\n      end\n    end   \n  end \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "macos", "selenium-chromedriver", "watir"], "comments": [{"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "edited": false, "score": 1, "creation_date": 1507644958, "post_id": 46654689, "comment_id": 80286471, "body": "The behaviours you mentioned are not particularly abnormal. The error mentioned is just the inspection of the browser object. Chromedriver by default will close when the session ends. You mention the browser closing without actually traveling, but you don&#39;t mention calling the <code>goto</code> method. It would help if you could elaborate on the problem so that we can reproduce the issue."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1507746537, "post_id": 46654689, "comment_id": 80338102, "body": "show us the code that is causing the error... we know you are following a tutorial, but that does not mean you have necessarily copied the code faithfully or modified it correctly to your needs."}], "answers": [{"tags": [], "owner": {"reputation": 29, "user_id": 7248627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/56vV1.jpg?s=128&g=1", "display_name": "swxft", "link": "https://stackoverflow.com/users/7248627/swxft"}, "is_accepted": false, "score": 0, "last_activity_date": 1507756149, "creation_date": 1507756149, "answer_id": 46697586, "question_id": 46654689, "link": "https://stackoverflow.com/questions/46654689/web-browser-not-opening-using-watir/46697586#46697586", "title": "Web browser not opening using Watir", "body": "<p>Silly mistake on my part, chromedriver wasn't properly installed. I came across <a href=\"http://codrspace.com/rails4sandeep/install-and-set-path-to-chromedriver-on-mac-or-linux/\" rel=\"nofollow noreferrer\">this</a> post. Here are the steps I took: </p>\n\n<pre><code>$ cd $HOME/Downloads\n$ wget http://chromedriver.storage.googleapis.com/2.20/chromedriver_mac32.zip\n$ unzip chromedriver_mac32.zip\n$ mkdir -p $HOME/bin\n$ mv chromedriver $HOME/bin\n$ echo \"export PATH=$PATH:$HOME/bin\" &gt;&gt; $HOME/.bash_profile\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 7248627, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/56vV1.jpg?s=128&g=1", "display_name": "swxft", "link": "https://stackoverflow.com/users/7248627/swxft"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 324, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1507756149, "creation_date": 1507581902, "last_edit_date": 1507583850, "question_id": 46654689, "link": "https://stackoverflow.com/questions/46654689/web-browser-not-opening-using-watir", "title": "Web browser not opening using Watir", "body": "<p>I'm trying to open my browser using Watir with Ruby. I was able to run my script and open the browser once. Now I'm getting the error:</p>\n\n<pre><code>#&lt;Watir::Browser:0x586947ae595497d2 url=\"data:,\" title=\"\"&gt;\n</code></pre>\n\n<p>Title should be equal to \"data.\" Chrome will open and then close without actually traveling to a webpage.</p>\n\n<p>These were my steps after installing watir and chromedriver\n1) rails c. 2) browser = Watir::Browser.new(:chrome)</p>\n\n<p>I'm following a tutorial: <a href=\"https://youtu.be/1UYBAn69Qrk?t=4m24s\" rel=\"nofollow noreferrer\">https://youtu.be/1UYBAn69Qrk?t=4m24s</a></p>\n\n<p>Any help would be greatly appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "roo-gem"], "owner": {"reputation": 321, "user_id": 7768323, "user_type": "registered", "accept_rate": 27, "profile_image": "https://www.gravatar.com/avatar/4dc775ad1110dce42d259e3592704dcd?s=128&d=identicon&r=PG&f=1", "display_name": "jeff", "link": "https://stackoverflow.com/users/7768323/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1509360332, "creation_date": 1507578634, "last_edit_date": 1509360332, "question_id": 46653978, "link": "https://stackoverflow.com/questions/46653978/import-records-using-the-gem-roo", "title": "import records using the gem roo", "body": "<p>I am trying to import records to the database using the gem roo using excel files, it works pretty well making use of <a href=\"http://railscasts.com/episodes/396-importing-csv-and-excel?autoplay=true\" rel=\"nofollow noreferrer\">this tutorial</a>, I am importing nested records belonging to the relation \"has_one\" when importing again the excel me updates the data, but how can I update the data of those nested resources that are of \"has_many\"? if every time I import the file with the same data again it re-creates the record, this is my model:</p>\n\n<pre><code>class Cliente &lt; ActiveRecord::Base\n\n  has_many :reldaycli, class_name: \"Reldayc\", foreign_key: \"CodCli\"\n  accepts_nested_attributes_for :reldaycli, reject_if: proc{|attributes| attributes['RutaId'].blank?}\n\n\n    def self.import(file,empresa)#importar\n      @errors = []\n      spreadsheet = open_spreadsheet(file)\n      header = spreadsheet.row(1)\n      (2..spreadsheet.last_row).each do |i|\n        row = Hash[[header, spreadsheet.row(i)].transpose]\n        cliente = find_by_IdCli(row[\"Clave\"]) || new\n        cliente.attributes = {IdCli: row[\"Clave\"], Nombre: row[\"Encargado\"], NombreCorto: row[\"Nombre Comercial\"], Direccion: row[\"Calle y N\u00b0\"], CP: row[\"C.P\"], Colonia: row[\"Colonia\"], Latitud: row[\"Latitud\"], Longitud: row[\"Longitud\"], Referencia: row[\"Referencia\"], Status: row[\"Activo\"], Telefono: row[\"Tel\u00e9fono\"], Tel2: row[\"Tel. Celular\"], Email: row[\"Email\"], Horario: row[\"Horario\"], Credito: row[\"Credito\"], LimiteCredito: row[\"Limite Credito\"], DiasCreedito: row[\"D\u00edas Credito\"], Saldo: row[\"Saldo inicial\"], VisitaObligada: row[\"Visita Obligada\"], FirmaObligada: row[\"Firma Obligada\"], IdEmpresa: empresa}\n\n\n        cliente.reldaycli_attributes = [{RutaId: row[\"IdRuta\"], idVendedor: row[\"IdVendedor\"], Lunes: row[\"Lunes\"], Martes: row[\"Martes\"], Miercoles: row[\"Mi\u00e9rcoles\"], Jueves: row[\"Jueves\"], Viernes: row[\"Viernes\"], Sabado: row[\"S\u00e1bado\"], Domingo: row[\"Domingo\"], IdEmpresa: empresa}]\n\n\n\n        if cliente.save\n          # stuff to do on successful save\n         else\n           cliente.errors.full_messages.each do |message|\n             @errors &lt;&lt; \"Error fila #{i}, columna #{message}\"\n           end\n         end\n\n\n      end\n      @errors #  &lt;- need to return the @errors array\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby"], "comments": [{"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1507578539, "post_id": 46653832, "comment_id": 80257237, "body": "In <code>rails console</code>, does <code>Model.first.photos.first.image.url(:medium)</code> give you what you are expecting? Perhaps you have to cast it to a <code>String</code>? <code>photo.image.url(:medium).to_s</code>. Another thing, you might want to consider <code>map</code> over <code>each</code> for this case: <code>self.photos.map { |p| p.image.url(:medium).to_s }</code>"}, {"owner": {"reputation": 79, "user_id": 8567436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O7Cd0.png?s=128&g=1", "display_name": "luke.hawk", "link": "https://stackoverflow.com/users/8567436/luke-hawk"}, "reply_to_user": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1507631503, "post_id": 46653832, "comment_id": 80277107, "body": "@ddubs Sorry for the late response! <code>Model.first.photos.first.image.url(:medium)</code> indeed gives me what I&#39;m expecting. However, this only gives me the last image url. When I do <code>Model.first.photos.image.url(:medium)</code> I get an error saying that image is an undefined method. I basically need all image url (in an array). I will give your other suggestions a shot now!"}, {"owner": {"reputation": 79, "user_id": 8567436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O7Cd0.png?s=128&g=1", "display_name": "luke.hawk", "link": "https://stackoverflow.com/users/8567436/luke-hawk"}, "reply_to_user": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1507632225, "post_id": 46653832, "comment_id": 80277575, "body": "<code>self.photos.map { |p| p.image.url(:medium)}</code> actually did the job. Thanks!"}, {"owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "edited": false, "score": 0, "creation_date": 1507637776, "post_id": 46653832, "comment_id": 80281270, "body": "Great! I added that as an answer."}], "answers": [{"tags": [], "owner": {"reputation": 1342, "user_id": 1143549, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/45da1bf4376d6f184e41de57e03789b9?s=128&d=identicon&r=PG", "display_name": "Derek Wright", "link": "https://stackoverflow.com/users/1143549/derek-wright"}, "is_accepted": true, "score": 0, "last_activity_date": 1507637762, "creation_date": 1507637762, "answer_id": 46666547, "question_id": 46653832, "link": "https://stackoverflow.com/questions/46653832/how-to-get-multiple-paperclip-urls-as-json/46666547#46666547", "title": "How to get multiple Paperclip URLs as JSON?", "body": "<p>Try using map instead of each to return an array:</p>\n\n<pre><code>def return_all_photos\n  self.photos.map { |p| p.image.url(:medium) }\nend\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 8567436, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O7Cd0.png?s=128&g=1", "display_name": "luke.hawk", "link": "https://stackoverflow.com/users/8567436/luke-hawk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 46666547, "answer_count": 1, "score": 0, "last_activity_date": 1507637762, "creation_date": 1507577958, "question_id": 46653832, "link": "https://stackoverflow.com/questions/46653832/how-to-get-multiple-paperclip-urls-as-json", "title": "How to get multiple Paperclip URLs as JSON?", "body": "<p>I use Paperclip to handle photo uploads to my application, whereas a certain model can have many photos. So far everything works well, however, I <strong>need</strong> all photo URLs injected in my view as JSON <strong>using a helper</strong> method.</p>\n\n<p>So, I have a model:</p>\n\n<pre><code>class Model &lt; ApplicationRecord\n  ...\n\n    def return_all_photos\n        self.photos.each do |photo|\n          photo.image.url(:medium)\n        end\n    end\n  ...\nend\n</code></pre>\n\n<p>And a helper:</p>\n\n<pre><code>module ModelsHelper\n\n   def data_as_json(item)\n   {\n     ...\n\n     gallery_photos: item.return_all_photos\n\n     ...\n\n    }.to_json\n   end\nend\n</code></pre>\n\n<p>I don't get any errors, but not the behavior as expected. Instead of having an array with the URLs in the JSON data, I get an array of objects in the JSON data, which looks like the following (screenshot from my devtools):</p>\n\n<p><a href=\"https://i.stack.imgur.com/DuoQc.png\" rel=\"nofollow noreferrer\">Screenshot</a></p>\n\n<p>Does anyone have an idea what causes the issue and why the according URLs are not returned? </p>\n"}, {"tags": ["ruby", "web-scraping", "web-crawler", "nokogiri"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1507581533, "post_id": 46653567, "comment_id": 80258503, "body": "Are you sure there are elements with that class?"}], "answers": [{"tags": [], "owner": {"reputation": 1379, "user_id": 2101252, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JXPjA.jpg?s=128&g=1", "display_name": "s1mpl3", "link": "https://stackoverflow.com/users/2101252/s1mpl3"}, "is_accepted": false, "score": 0, "last_activity_date": 1507585101, "creation_date": 1507585101, "answer_id": 46655358, "question_id": 46653567, "link": "https://stackoverflow.com/questions/46653567/webscraping-nokogiri-unable-to-pick-any-classes/46655358#46655358", "title": "Webscraping Nokogiri unable to pick any classes", "body": "<p>It looks like something is swapping the classes so what you see in the browser is not what you are getting from the http call. In this case from _XWk to _tA</p>\n\n<pre><code>  page = HTTParty.get('https://www.google.com/search?q=ford+fusion+msrp&amp;oq=ford+fusion+msrp&amp;aqs=chrome.0.0l6.11452j0j7&amp;sourceid=chrome&amp;ie=UTF-8')\n  parse_page = Nokogiri::HTML(page)\n  parse_page.css('._tA').map(&amp;:text) \n\n# &gt;&gt;[\"Up to 23 city / 34 highway\", \"From $22,610\", \"175 to 325\u00a0hp\", \"192\u2033 L x 73\u2033 W x 58\u2033 H\", \"3,431 to 3,681\u00a0lbs\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 1866340, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4a76269e3e21642b9329e78b3fe32420?s=128&d=identicon&r=PG", "display_name": "riktubrs", "link": "https://stackoverflow.com/users/1866340/riktubrs"}, "is_accepted": false, "score": 0, "last_activity_date": 1507932207, "creation_date": 1507932207, "answer_id": 46738601, "question_id": 46653567, "link": "https://stackoverflow.com/questions/46653567/webscraping-nokogiri-unable-to-pick-any-classes/46738601#46738601", "title": "Webscraping Nokogiri unable to pick any classes", "body": "<p>Change <code>parse_page.css('_XWk')</code> to <code>parse_page.css('._XWk')</code></p>\n\n<p>Note the dot (<code>.</code>) difference. The dot references a class.</p>\n\n<p>Using <code>parse_page.css('_XWk')</code>, nokogiri doesn't know wether _XWk is a class, id, data attribute etc..</p>\n"}], "owner": {"reputation": 591, "user_id": 3755036, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/4feUb.jpg?s=128&g=1", "display_name": "qaispak", "link": "https://stackoverflow.com/users/3755036/qaispak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1612122994, "creation_date": 1507576808, "last_edit_date": 1612122994, "question_id": 46653567, "link": "https://stackoverflow.com/questions/46653567/webscraping-nokogiri-unable-to-pick-any-classes", "title": "Webscraping Nokogiri unable to pick any classes", "body": "<p>I am using this page:\n<a href=\"https://www.google.com/search?q=ford+fusion+msrp&amp;oq=ford+fusion+msrp&amp;aqs=chrome.0.0l6.2942j0j7&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">https://www.google.com/search?q=ford+fusion+msrp&amp;oq=ford+fusion+msrp&amp;aqs=chrome.0.0l6.2942j0j7&amp;sourceid=chrome&amp;ie=UTF-8</a></p>\n\n<p>I am trying to get the this element: class=\"_XWk\"</p>\n\n<pre><code>  page = HTTParty.get('https://www.google.com/search?q=ford+fusion+msrp&amp;oq=ford+fusion+msrp&amp;aqs=chrome.0.0l6.11452j0j7&amp;sourceid=chrome&amp;ie=UTF-8')\n\n  parse_page = Nokogiri::HTML(page)\n  parse_page.css('_XWk')\n</code></pre>\n\n<p>Here I can see the whole page in parse_page but when I try the .cc('classname') I don't see anything. Am I using the method the wrong way?</p>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "api", "has-and-belongs-to-many"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1507575831, "post_id": 46653186, "comment_id": 80255837, "body": "I don&#39;t use serializer so I am not that much familiar with some bits of your code. Though can you point where in your code you add the products to your order ? Maybe you can copy the view (erb) file where this is handled too.."}, {"owner": {"reputation": 759, "user_id": 5266581, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-4WBTC_1yMB8/AAAAAAAAAAI/AAAAAAAAACI/pCGef6nYJik/photo.jpg?sz=128", "display_name": "Engr.Tanbir Hasan", "link": "https://stackoverflow.com/users/5266581/engr-tanbir-hasan"}, "edited": false, "score": 0, "creation_date": 1507576393, "post_id": 46653186, "comment_id": 80256143, "body": "I am also facing same problem . But there is none erb file while you&#39;re using active record serializer gem."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 8747867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8940bbf4bb14c8c68d931db6d03cfb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Taci Roy", "link": "https://stackoverflow.com/users/8747867/taci-roy"}, "edited": false, "score": 0, "creation_date": 1507602723, "post_id": 46654871, "comment_id": 80264421, "body": "order_params[:product_ids] returns nil when I requested from json API. Why ?"}, {"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "reply_to_user": {"reputation": 85, "user_id": 8747867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8940bbf4bb14c8c68d931db6d03cfb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Taci Roy", "link": "https://stackoverflow.com/users/8747867/taci-roy"}, "edited": false, "score": 0, "creation_date": 1507603060, "post_id": 46654871, "comment_id": 80264509, "body": "It sounds like you have two problems. The first problem is that the join table records aren&#39;t being created. The solution I presented above should fix that, have you verified that records are now being created? If they are and your json output is still incorrect, then your Order serializer is wrong. Adding info above."}, {"owner": {"reputation": 85, "user_id": 8747867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8940bbf4bb14c8c68d931db6d03cfb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Taci Roy", "link": "https://stackoverflow.com/users/8747867/taci-roy"}, "edited": false, "score": 0, "creation_date": 1507603861, "post_id": 46654871, "comment_id": 80264657, "body": "Your given method is correct, I checked it @products = Product.where(id: 3), then join table is being created. But when I debug and find that order_params[:product_ids] returns always nil and order_params does not contain any product_ids! Is my json format incorrect ? Your <code>serializable_hash</code> returns error, it requires two missing arguments."}, {"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "reply_to_user": {"reputation": 85, "user_id": 8747867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8940bbf4bb14c8c68d931db6d03cfb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Taci Roy", "link": "https://stackoverflow.com/users/8747867/taci-roy"}, "edited": false, "score": 0, "creation_date": 1507604604, "post_id": 46654871, "comment_id": 80264818, "body": "Updated code, removing the excess parameters you were passing into the <code>ProductSerializer</code>. I&#39;ve tested this on a local repository and it works as expected. If you&#39;re still getting errors you&#39;re going to need to post more details and maybe even link the repo."}, {"owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "reply_to_user": {"reputation": 85, "user_id": 8747867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8940bbf4bb14c8c68d931db6d03cfb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Taci Roy", "link": "https://stackoverflow.com/users/8747867/taci-roy"}, "edited": false, "score": 0, "creation_date": 1507605238, "post_id": 46654871, "comment_id": 80264949, "body": "Post the full error you&#39;re receiving. No one can solve this for you without detailed information."}], "tags": [], "owner": {"reputation": 3538, "user_id": 693491, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/f30193798802607aa97082c4529fcc28?s=128&d=identicon&r=PG", "display_name": "Tyler Ferraro", "link": "https://stackoverflow.com/users/693491/tyler-ferraro"}, "is_accepted": false, "score": 1, "last_activity_date": 1507604556, "last_edit_date": 1507604556, "creation_date": 1507582671, "answer_id": 46654871, "question_id": 46653186, "link": "https://stackoverflow.com/questions/46653186/habtm-relationship-with-rails-api-does-not-work/46654871#46654871", "title": "HABTM relationship with rails API does not work", "body": "<p>As far as I know, Rails doesn't automatically handle creating the join records when given a list of ids. Therefore when you're calling <code>@order = Order.new(order_params)</code> and expecting it to know how to handle <code>product_ids: [3]</code>, it's just ignoring it.</p>\n\n<p>If you modify your <code>create</code> endpoint with the below, you should see the join records being created.</p>\n\n<pre><code># POST /api/orders\ndef create\n  @order = Order.new(order_params)\n\n  if @order.save\n    # Find products\n    @products = Product.where(id: order_params[:product_ids])\n    # Create join table records\n    @products.each { |product| product.orders &lt;&lt; order }\n\n    render json: @order, status: :created, location: api_order_url(@order)\n  else\n    render json: @order.errors, status: :unprocessable_entity\n  end\nend\n</code></pre>\n\n<p>This is just one possible solution that doesn't do any error checking. Depending how secure and robust your application needs to be you may need to create a service that wraps this and handles validating that products are found before creating the order and associating the records.</p>\n\n<p>EDIT: OrderSerializer</p>\n\n<p>Once you've verified that the join table records are being created properly. Check that your serializers are working, they have great documentation. I believe you can swap out your current <code>products</code> method in the <code>OrderSerializer</code> with this:</p>\n\n<pre><code>class OrderSerializer &lt; ActiveModel::Serializer\n  attributes :id, :discount, :brute, :net, :payed, :payed_at, :products      \n\n  def products\n    object.products.map do |product|\n      ProductSerializer.new(product).serializable_hash\n    end\n  end\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 85, "user_id": 8747867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8940bbf4bb14c8c68d931db6d03cfb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Taci Roy", "link": "https://stackoverflow.com/users/8747867/taci-roy"}, "edited": false, "score": 0, "creation_date": 1507616460, "post_id": 46659761, "comment_id": 80268133, "body": "Thanks @Engr. Tanbir Hasan, You deserve a medal."}], "tags": [], "owner": {"reputation": 759, "user_id": 5266581, "user_type": "registered", "accept_rate": 87, "profile_image": "https://lh3.googleusercontent.com/-4WBTC_1yMB8/AAAAAAAAAAI/AAAAAAAAACI/pCGef6nYJik/photo.jpg?sz=128", "display_name": "Engr.Tanbir Hasan", "link": "https://stackoverflow.com/users/5266581/engr-tanbir-hasan"}, "is_accepted": true, "score": 3, "last_activity_date": 1507616221, "creation_date": 1507616221, "answer_id": 46659761, "question_id": 46653186, "link": "https://stackoverflow.com/questions/46653186/habtm-relationship-with-rails-api-does-not-work/46659761#46659761", "title": "HABTM relationship with rails API does not work", "body": "<p>Finally I have solved in your problem.Just add an attribute in your model.</p>\n\n<p>Order Model:</p>\n\n<pre><code>class Order &lt; ApplicationRecord\n  attribute :product_ids\n  validates_presence_of :brute, :net\n  has_and_belongs_to_many :products      \nend\n</code></pre>\n\n<p>Order Serializer:</p>\n\n<pre><code>class OrderSerializer &lt; ActiveModel::Serializer\n  attributes :id, :discount, :brute, :net, :payed, :payed_at\n  has_many :products\nend\n</code></pre>\n\n<p>And create method in your order api:</p>\n\n<pre><code># POST /api/orders\n    def create\n      @order = Order.new(order_params)\n\n      if @order.save\n        # Find products\n        @products = Product.where(id: order_params[:product_ids])\n        # Create join table records\n        @products.each { |product| product.orders &lt;&lt; @order }\n\n        render json: @order, status: :created, location: api_order_url(@order)\n      else\n        render json: @order.errors, status: :unprocessable_entity\n      end\n    end\n</code></pre>\n\n<p>I have tested in locally and it works! Happy Programming :)</p>\n"}], "owner": {"reputation": 85, "user_id": 8747867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8940bbf4bb14c8c68d931db6d03cfb6e?s=128&d=identicon&r=PG&f=1", "display_name": "Taci Roy", "link": "https://stackoverflow.com/users/8747867/taci-roy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 531, "favorite_count": 2, "accepted_answer_id": 46659761, "answer_count": 2, "score": 2, "last_activity_date": 1507616221, "creation_date": 1507575222, "last_edit_date": 1507575520, "question_id": 46653186, "link": "https://stackoverflow.com/questions/46653186/habtm-relationship-with-rails-api-does-not-work", "title": "HABTM relationship with rails API does not work", "body": "<p>I am new in Ruby on Rails. I am making a Rails API using Rails 5.1, active record serializer, doorkeeper and devise gem.</p>\n\n<p>I have an <code>Order</code> table and it has many products. The relation between order and product is many-to-many.</p>\n\n<p>Order model:</p>\n\n<pre><code>class Order &lt; ApplicationRecord      \n  validates_presence_of :brute, :net\n  has_and_belongs_to_many :products      \nend\n</code></pre>\n\n<p>Product model:</p>\n\n<pre><code>class Product &lt; ApplicationRecord\n  belongs_to :category\n  validates_presence_of :name, :price\n  validates_uniqueness_of :name\n  has_and_belongs_to_many :orders\nend\n</code></pre>\n\n<p>I have a join table named <code>orders_products</code>.</p>\n\n<p>Order serializer:</p>\n\n<pre><code>class OrderSerializer &lt; ActiveModel::Serializer\n  attributes :id, :discount, :brute, :net, :payed, :payed_at, :products      \n\n  def products\n    object.products.map do |product|\n      ProductSerializer.new(product, scope: scope, root: false, event: object)\n    end\n  end\n\nend\n</code></pre>\n\n<p>Product serializer:   </p>\n\n<pre><code> class ProductSerializer &lt; ActiveModel::Serializer\n  attributes :id, :name, :price, :description\n  has_one :category\nend\n</code></pre>\n\n<p>Order controller:</p>\n\n<pre><code>module Api\n  class OrdersController &lt; ApiController\n    before_action :set_order, only: [:show, :update, :destroy]\n\n    # GET /api/orders\n    def index\n      @orders = Order.all\n\n      render json: @orders\n    end\n\n    # GET /api/orders/1\n    def show\n      render json: @order\n    end\n\n    # POST /api/orders\n    def create\n      @order = Order.new(order_params)\n\n      if @order.save\n        render json: @order, status: :created, location: api_order_url(@order)\n      else\n        render json: @order.errors, status: :unprocessable_entity\n      end\n    end\n\n    # PATCH/PUT /api/orders/1\n    def update\n      if @order.present?\n        if @order.update(order_params)\n          render json: @order\n        else\n          render json: @order.errors, status: :unprocessable_entity\n        end\n      end\n    end\n\n    # DELETE /api/orders/1\n    def destroy\n      @order.destroy if @order.present?\n    end\n\n    private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_order\n      @order = Order.find(params[:id])\n    rescue ActiveRecord::RecordNotFound\n      Rails.logger.error{ 'Order record is not found' }\n      nil\n    end\n\n    # Only allow a trusted parameter \"white list\" through.\n    def order_params\n      params.require(:order).permit(:discount, :brute, :net, :payed, :payed_at, product_ids: [])\n    end\n  end\nend\n</code></pre>\n\n<p>When I post some order json data from API generator app like Postman/Insomnia, Order is being saved in orders table but no data saved in <code>orders_products</code> join table.</p>\n\n<p>My request(POST <a href=\"http://localhost:3000/api/orders\" rel=\"nofollow noreferrer\">http://localhost:3000/api/orders</a>) of order json:</p>\n\n<pre><code>{\n        \"discount\": 110,\n        \"brute\": 100,\n        \"net\": 200,\n        \"payed\": null,\n        \"payed_at\": null,          \n        \"product_ids\": [3]\n}\n</code></pre>\n\n<p>I try to find the solution but I failed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rabbitmq", "sneakers"], "comments": [{"owner": {"reputation": 182, "user_id": 2957761, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/41d6a2d8025efe66374adcd281406c29?s=128&d=identicon&r=PG&f=1", "display_name": "Paul Etscheit", "link": "https://stackoverflow.com/users/2957761/paul-etscheit"}, "edited": false, "score": 0, "creation_date": 1516095490, "post_id": 46652958, "comment_id": 83539539, "body": "Have you found a solution for this? Having the exact same problem and would be interested to know how you solved it."}], "answers": [{"tags": [], "owner": {"reputation": 11, "user_id": 6089589, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-ffsNXHxMkhw/AAAAAAAAAAI/AAAAAAAABLo/A8B-qHs8m8M/photo.jpg?sz=128", "display_name": "Mario", "link": "https://stackoverflow.com/users/6089589/mario"}, "is_accepted": false, "score": 1, "last_activity_date": 1540918094, "creation_date": 1540918094, "answer_id": 53069198, "question_id": 46652958, "link": "https://stackoverflow.com/questions/46652958/rabbitmq-sneakers-limit-specific-queue-to-only-one-worker-at-a-time/53069198#53069198", "title": "RabbitMQ/Sneakers - Limit specific queue to only one worker at a time?", "body": "<p>For further references, Argus9's request can be archived following the below steps:</p>\n\n<p>1) You can control your worker's opts to be:</p>\n\n<pre><code>class YourWorker\ninclude Sneakers::Worker\nfrom_queue \"your_queue\",\n           :env =&gt; nil,\n           :ack =&gt; true,\n           :workers =&gt; 1, #Number of per-cpu processes to run\n           :prefetch =&gt; 1, #This param will define that single message will be fetched per time\n           :threads =&gt; 1, #This will define that you have single thread running\n           :heartbeat =&gt; 2,\n           :share_threads =&gt; true,\n           :timeout_job_after =&gt; 3600,\n           :exchange =&gt; 'your_exchange'\n\ndef work(args={})\n #... your steps here\nend \nend\n</code></pre>\n\n<p>2) You need to pay attention to what you have specified in your sneakers.rb as initial parameters (as its consumed by the Sneakers::Runner at worker initialization), so be sure to have the correct params in there like:</p>\n\n<pre><code>Sneakers.configure  :amqp =&gt; url,\n                :daemonize =&gt; true,\n                :ack =&gt; true,\n                :prefetch =&gt; 1,\n                :threads =&gt; 1,\n                :start_worker_delay =&gt; 0.1,  \n                :workers =&gt; 1,               \n                :exchange =&gt; \"your_exchange\",\n                :exchange_type =&gt; :direct,\n                :log =&gt; \"log/sneakers.log\"\nSneakers.logger.level = Logger::DEBUG\n</code></pre>\n\n<p>You can also build some extra controls using the RabbitMQ API, which will enables you to check things like if is there already some message been processing?... etc what is not that easy to be archived using bunny and so.\nUsing a very simple code like:</p>\n\n<pre><code>    def queue_info\n    queues_infos = {}    \n    rabbitmqctl_url = \"http://127.0.0.1:15672\"\n    rabbitmqctl_user = \"your_user\"\n    rabbitmqctl_password = \"your_password\"\n    uri = URI.parse(\"#{rabbitmqctl_url}/api/queues\")\n    request = Net::HTTP::Get.new(uri)\n    request.basic_auth(rabbitmqctl_user, rabbitmqctl_password)\n    req_options = { use_ssl: uri.scheme == 'https' }\n    response = Net::HTTP.start(uri.hostname, uri.port, req_options)  do |http|\n      http.request(request)\n    end\n    queue_details = JSON.parse(response.body)\n    queue_details.each do |queue|\n      queues_infos[queue['name'].to_s] = {  name: queue['name'],\n                                            msg_total: queue['messages'],\n                                            msg_ready: queue['messages_ready'],\n                                            msg_unacknowlged: queue['messages_unacknowledged'],\n                                            state: queue['state'],\n                                            consumers: queue['consumers'] }\n    end\n    return queues_infos\nend\n</code></pre>\n"}], "owner": {"reputation": 1549, "user_id": 1594097, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/0487c4cdd633c17168020dbae62de9e5?s=128&d=identicon&r=PG", "display_name": "Argus9", "link": "https://stackoverflow.com/users/1594097/argus9"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 855, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1540918094, "creation_date": 1507574286, "question_id": 46652958, "link": "https://stackoverflow.com/questions/46652958/rabbitmq-sneakers-limit-specific-queue-to-only-one-worker-at-a-time", "title": "RabbitMQ/Sneakers - Limit specific queue to only one worker at a time?", "body": "<p>I have a use case with RabbitMQ and the Sneakers gem where I have multiple Workers running to respond to several dozen queues in my project. So it's very likely that workers may be processing messages from the same queue at the same time.</p>\n\n<p>With one queue in particular, though - let's call it <code>:one_at_a_time</code> - I only ever want one worker to be able to process a message from the queue at any given time.</p>\n\n<p>The reason I want to do this is because the worker is designed to perform the following actions:</p>\n\n<ol>\n<li>Look up an AR object by the passed-in ID</li>\n<li>Check that an attribute - let's say :worked - is set.\n\n<ol>\n<li>If <code>true</code>, then <code>ack!</code> the message.</li>\n<li>If <code>false</code>, email a user, then set <code>:worked</code> to true.</li>\n</ol></li>\n</ol>\n\n<p>This is designed so that I don't accidentally email the user twice in case two messages are created in rapid succession with the same object ID. And this design would work fine if only one worker ever listened to this queue at any given time, because the first run would go through steps 1 -> 2 -> 2, then the next run would go through steps 1 -> 2 -> 1 and would not email the user. But in testing, I found that there is the potential for a race condition where two workers will pull a message off the <code>:one_at_a_time</code> queue at the same time, get past the check that <code>:worked</code> is set, and both send an email.</p>\n\n<p>So with all this in mind, is there a way I can limit the number of workers that listen to a queue? Thank you.</p>\n"}]