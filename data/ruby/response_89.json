[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1474509641, "post_id": 39628081, "comment_id": 66563388, "body": "What specifically do you mean by &quot;not working&quot;? Does <code>BooksController#destroy</code> not get called? Does <code>set_book</code> fail? Does <code>@book.destroy</code> fail? Any errors in the JavaScript console? Anything in the server logs?"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1474526576, "post_id": 39628081, "comment_id": 66568617, "body": "you need to debug <code>set_book</code> and <code>authenticate_user!</code> filters if everything is getting assigned correctly there."}], "answers": [{"tags": [], "owner": {"reputation": 2562, "user_id": 4344085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ilSIn.jpg?s=128&g=1", "display_name": "Khanh Pham", "link": "https://stackoverflow.com/users/4344085/khanh-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1474501487, "creation_date": 1474501487, "answer_id": 39628130, "question_id": 39628081, "link": "https://stackoverflow.com/questions/39628081/destroy-function-isnt-functioning-in-ror/39628130#39628130", "title": "Destroy function isn&#39;t functioning in RoR", "body": "<p>Make sure that you put  <code>//= require jquery_ujs</code> to \n<code>assets/javascripts/application.js</code>.</p>\n"}], "owner": {"reputation": 119, "user_id": 5138483, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-RuNxA5LKmi0/AAAAAAAAAAI/AAAAAAAAAB8/cO0_liklbvc/photo.jpg?sz=128", "display_name": "Jawakar Selvaraj", "link": "https://stackoverflow.com/users/5138483/jawakar-selvaraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474501487, "creation_date": 1474501124, "question_id": 39628081, "link": "https://stackoverflow.com/questions/39628081/destroy-function-isnt-functioning-in-ror", "title": "Destroy function isn&#39;t functioning in RoR", "body": "<pre><code>class BooksController &lt; ApplicationController\n  before_action :set_book, only: [:show, :edit, :update, :destroy]\n  before_action :authenticate_user!, except: [:index, :show]\n\n\n\n  def show\n    @reviews = Review.where(book_id: @book.id).order(\"created_at DESC\")\n\n      if @reviews.blank?\n        @avg_review = 0\n      else\n        @avg_review = @reviews.average(:rating).round(2)\n    end\n  end\n\n\n  def destroy\n    @book.destroy\n    respond_to do |format|\n      format.html { redirect_to books_url, notice: 'Book was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n\n\n  private\n    def set_book\n      @book = Book.find(params[:id])\n    end\n\n    def book_params\n      params.require(:book).permit(:title, :author, :language, :year, :description, :total_pages, :rating, :image)\n    end\n\n  end\n</code></pre>\n\n<p>This is my bookscontroller and my \"delete\" in show file is as below.</p>\n\n<pre><code>&lt;%= link_to 'Delete', book, \n    data: { confirm: 'Are you sure?' }, method: :delete %&gt;\n</code></pre>\n\n<p>I am getting a link, but its not working. What is wrong with my code. Thanks in advance.</p>\n"}, {"tags": ["mysql", "ruby-on-rails", "ruby", "gis", "mariadb"], "owner": {"reputation": 226, "user_id": 267333, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/83077b61a67f9d344d66fcee26428c37?s=128&d=identicon&r=PG", "display_name": "Shinta", "link": "https://stackoverflow.com/users/267333/shinta"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 2, "answer_count": 0, "score": 2, "last_activity_date": 1525475603, "creation_date": 1474500323, "last_edit_date": 1525475603, "question_id": 39627982, "link": "https://stackoverflow.com/questions/39627982/rails-5-custom-database-types-for-gis-mariadb", "title": "Rails 5 custom database types? For GIS + MariaDB", "body": "<p>For the 10th time I need to do some GIS stuff in a project, in the pass all I needed was lat/long datatypes and used Solr or something else to process them, now I don't want to that and I want to be capable of using MariaDB/Mysql GIS features.</p>\n\n<p>I don't a problem on creating my queries by hand, that's cool when I need to GET something, but when I want to create or update Rails is making my life difficult.</p>\n\n<p>So I'm asking if someone knows how to add code in the RAILS to DB and DB to RAILS part to correctly parse the data.</p>\n\n<p>Eg:</p>\n\n<p>I want to have a POLYGON in my table:</p>\n\n<pre><code>create_table :venues, options: 'ENGINE=MyISAM DEFAULT CHARSET=utf8' do |t|\n    t.column :name, :string\n    t.column :geofence, :geometry\n    t.timestamps\nend\n</code></pre>\n\n<p>No problem with that, let's ditch Rails for a moment and let's do a normal insert, peace of cake:</p>\n\n<pre><code>INSERT INTO venues (name, geofence) VALUES ('A Name', PolygonFromText('POLYGON((25.774 -80.190,18.466 -66.118,32.321 -64.757,32.321 -64.757,25.774 -80.190))'));\n</code></pre>\n\n<p>Now if you want to this in Rails you can't, because it treats the <code>:geometry</code> like a string, so can't do any of these:</p>\n\n<pre><code>v = Venue.new(name: 'hello')\nv.geofence = \"PolygonFromText('POLYGON((25.774 -80.190,18.466 -66.118,32.321 -64.757,32.321 -64.757,25.774 -80.190))')\"\nv.save\n</code></pre>\n\n<p>Because it will add quotes and stuff to the inserts and updates. Like this:</p>\n\n<p><code>INSERT INTO venues (name, geofence, created_at, updated_at) VALUES ('A name', 'PolygonFromText(\\\"POLYGON((25.774 -80.190,18.466 -66.118,32.321 -64.757,32.321 -64.757,25.774 -80.190))\\\")', '2016-09-21 16:56:23', '2016-09-21 16:56:23')</code></p>\n\n<p>So, I just want to avoid Rails add those for me, and have the ability to assign EXACTLY what I need to do inserts.</p>\n\n<p>Thanks guys, hope you can help me.</p>\n"}, {"tags": ["ruby", "icalendar"], "answers": [{"tags": [], "owner": {"reputation": 55, "user_id": 4903337, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf52f16cf6d51847ad2580efcf87896b?s=128&d=identicon&r=PG&f=1", "display_name": "Allen", "link": "https://stackoverflow.com/users/4903337/allen"}, "is_accepted": true, "score": 0, "last_activity_date": 1474500360, "creation_date": 1474500360, "answer_id": 39627989, "question_id": 39627882, "link": "https://stackoverflow.com/questions/39627882/ruby-rails-how-to-sort-icalendar-file-data-by-dtstart/39627989#39627989", "title": "Ruby/Rails: How to sort icalendar file data by dtstart?", "body": "<p>Just figured this out. Redo the controller like so: </p>\n\n<pre><code>require 'icalendar'\nrequire 'net/http'\n\n    uri = URI('https://calendar.google.com/calendar/ical/7d9i7je5o16ec6cje702gvlih0hqa9um%40import.calendar.google.com/public/basic.ics')\n    calendar = Net::HTTP.get(uri)\n    cals = Icalendar::Calendar.parse(calendar)\n    cal = cals.first\n    all_events = cal.events\n    @sorted_events = all_events.sort! { |a,b| a.dtstart &lt;=&gt; b.dtstart }\n</code></pre>\n\n<p>Then use @sorted_events instead of @holidays in your view:</p>\n\n<pre><code>&lt;% @sorted_events.each do |x| %&gt;\n        &lt;div class=\"event\"&gt;\n            &lt;div class=\"event-title\"&gt;&lt;strong&gt;&lt;%= x.summary.upcase %&gt;&lt;/strong&gt;&lt;/div&gt;\n            &lt;div class=\"event-room\"&gt;Room &lt;%= x.location %&gt;&lt;span class=\"event-time\"&gt;&lt;%= x.dtstart.strftime('%I:%M%p') + ' to ' + x.dtend.strftime('%I:%M%p') %&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>That should do the trick. The <code>.sort!</code> method doesn't work in <code>irb</code>. </p>\n"}], "owner": {"reputation": 55, "user_id": 4903337, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/bf52f16cf6d51847ad2580efcf87896b?s=128&d=identicon&r=PG&f=1", "display_name": "Allen", "link": "https://stackoverflow.com/users/4903337/allen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 356, "favorite_count": 0, "accepted_answer_id": 39627989, "answer_count": 1, "score": 0, "last_activity_date": 1474500360, "creation_date": 1474499600, "question_id": 39627882, "link": "https://stackoverflow.com/questions/39627882/ruby-rails-how-to-sort-icalendar-file-data-by-dtstart", "title": "Ruby/Rails: How to sort icalendar file data by dtstart?", "body": "<p>I am using the <a href=\"https://github.com/icalendar/icalendar\" rel=\"nofollow\">icalendar</a> gem to parse arbitrary public Google Calendar ICS exports and display them in a Rails applications. The problem is that the events are showing up in reverse alphabetical order. I am trying to figure out how to sort them in chronological order by start time (dtstart). </p>\n\n<p>Controller:</p>\n\n<pre><code>require 'icalendar'\nrequire 'net/https'\n\nuri = URI('https://calendar.google.com/calendar/ical/7d9i7je5o16ec6cje702gvlih0hqa9um%40import.calendar.google.com/public/basic.ics')\n# above is an example calendar of Argentinian holidays\n# the actual calendar would theoretically have hour/minute start/end times\ncalendar = Net::HTTP.get(uri)\ncals = Icalendar::Calendar.parse(calendar)\ncal = cals.first\n@holidays = cal.events\n</code></pre>\n\n<p>View: </p>\n\n<pre><code>&lt;% @holidays.each do |x| %&gt;\n        &lt;div class=\"event\"&gt;\n            &lt;div class=\"event-title\"&gt;&lt;strong&gt;&lt;%= x.summary.upcase %&gt;&lt;/strong&gt;&lt;/div&gt;\n            &lt;div class=\"event-room\"&gt;Room &lt;%= x.location %&gt;&lt;span class=\"event-time\"&gt;&lt;%= x.dtstart.strftime('%I:%M%p') + ' to ' + x.dtend.strftime('%I:%M%p') %&gt;&lt;/span&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This results in the events rendering in the DOM in reverse alphabetical order rather than chronological order (preferably by dtstart). </p>\n\n<p>Unfortunately, it seems the <code>sort_by!</code> method within <code>ICalendar</code> is undefined. </p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1474499812, "post_id": 39627880, "comment_id": 66561301, "body": "Do mind your indentation, otherwise it&#39;s really hard to see where is wrong."}], "answers": [{"tags": [], "owner": {"reputation": 76, "user_id": 6860910, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1b1bac92cc39e5672f20e52ea30eb64d?s=128&d=identicon&r=PG&f=1", "display_name": "StehtimSchilf", "link": "https://stackoverflow.com/users/6860910/stehtimschilf"}, "is_accepted": false, "score": 1, "last_activity_date": 1474499873, "creation_date": 1474499873, "answer_id": 39627908, "question_id": 39627880, "link": "https://stackoverflow.com/questions/39627880/adding-odd-numbers-in-an-array-not-providing-the-correct-output/39627908#39627908", "title": "Adding odd numbers in an array not providing the correct output", "body": "<p>have a look at your if-statement: result+=1, don't add 1 but add the the number you are currently testing: result += numbers[index]</p>\n\n<p>SiS</p>\n"}, {"tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": false, "score": 2, "last_activity_date": 1474499878, "creation_date": 1474499878, "answer_id": 39627909, "question_id": 39627880, "link": "https://stackoverflow.com/questions/39627880/adding-odd-numbers-in-an-array-not-providing-the-correct-output/39627909#39627909", "title": "Adding odd numbers in an array not providing the correct output", "body": "<p><code>return result</code> will cause the code to exit right then and there... it will only ever add up the first number, then exit the whole method forever... it will never look at the other elements of the array.</p>\n\n<p>Having now indented your code properly you can see that this line is inside the while loop...\nprobably you want that to be outside the while loop... it is much easier to see this kind of bug when you properly indent your code. You should always indent your code... it seems unimportant until you come across a bug like this... it's always important. it's a good habit to start now. ;)</p>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474517438, "post_id": 39628036, "comment_id": 66565286, "body": "My initial thought was that &quot;or even better&quot; was not better because it requires two passes through the array. After reflection, though, I agree with you because <code>select</code> and <code>reduce</code> are both written in C, so it&#39;s probably faster than your first method. Breaking it into two sequential operations also makes it easier to debug and test. Note you can write <code>.reduce(:+)</code>. (See the doc.)"}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1474500657, "creation_date": 1474500657, "answer_id": 39628036, "question_id": 39627880, "link": "https://stackoverflow.com/questions/39627880/adding-odd-numbers-in-an-array-not-providing-the-correct-output/39628036#39628036", "title": "Adding odd numbers in an array not providing the correct output", "body": "<pre><code>def odd_sum(numbers)\n  index = 0\n  result = 0 \n  while index &lt; numbers.length\n    if (numbers[index] % 2 != 0)\n      result += 1\n    end\n    index +=1\n    return result\n  end\nend  \n\nputs odd_sum([1,2,4,5,7,9]) currently my output is 1 should be 22\nputs odd_sum([0,6,4,4]) currently output 0\nputs odd_sum([1,2,1]) currently output 1 should be 2\n</code></pre>\n\n<p>On the line <code>result += 1</code>, you are adding <code>1</code> each time there is an odd number, so it's not a sum, but rather a count. </p>\n\n<p>On the line <code>return result</code>, the program will immediately end when it hits the <code>return</code>. So, since the first number in the first array is odd, the program increments result by 1, and then returned result. </p>\n\n<p>What you want to do is <code>result += numbers[index]</code>, and return the result at the end of the while loop. </p>\n\n<p>In Ruby, there's often a better way to do things, while loops are meant for when you don't know how many times you are looping. In this case, you know exactly how many times, so I would suggest using an iterator. </p>\n\n<pre><code>def odd_sum(numbers)\n  result = 0\n  numbers.each do |num|\n    result += num if num.odd?\n  end\nend\n</code></pre>\n\n<p>Or even better</p>\n\n<pre><code>def odd_sum(numbers)\n  numbers.select(&amp;:odd?).reduce(&amp;:+)\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 5890540, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hvnu8.jpg?s=128&g=1", "display_name": "Enzo", "link": "https://stackoverflow.com/users/5890540/enzo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 751, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1474505321, "creation_date": 1474499581, "last_edit_date": 1474505321, "question_id": 39627880, "link": "https://stackoverflow.com/questions/39627880/adding-odd-numbers-in-an-array-not-providing-the-correct-output", "title": "Adding odd numbers in an array not providing the correct output", "body": "<p>one of my ruby programs that detects odd numbers in an array and adds them together does not provide the correct output. Given that I am learning ruby and this is a logic mistake, I can't easily deduct where I make a mistake.\nHere is the Code:</p>\n\n<pre><code>def odd_sum(numbers)\n  index = 0\n  result = 0 \n  while index &lt; numbers.length\n    if (numbers[index] % 2 != 0)\n      result += 1\n    end\n    index +=1\n    return result\n  end\nend  \n\nputs odd_sum([1,2,4,5,7,9]) currently my output is 1 should be 22\nputs odd_sum([0,6,4,4]) currently output 0\nputs odd_sum([1,2,1]) currently output 1 should be 2\n</code></pre>\n\n<p>Question: Why is my output wrong? Any way to make this cleaner or better?\nI'm running all this in a program called oddball.rb on cloud9.</p>\n"}, {"tags": ["ruby", "methods", "module", "include"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474495048, "post_id": 39627142, "comment_id": 66559956, "body": "I cannot reproduce this."}, {"owner": {"reputation": 1122, "user_id": 4249632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c374d3088b82556c41945816b9ce5c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Hertz", "link": "https://stackoverflow.com/users/4249632/ryan-hertz"}, "edited": false, "score": 0, "creation_date": 1474495658, "post_id": 39627142, "comment_id": 66560162, "body": "I get an error at the include line: <code>&gt; ivan.greet(&#39;spanish&#39;) NoMethodError: undefined method </code>include&#39; for #&lt;Baby:0x007ff75228cf98 @name=&quot;Ivan&quot;&gt;`"}, {"owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "edited": false, "score": 0, "creation_date": 1474496190, "post_id": 39627142, "comment_id": 66560345, "body": "yeah, regarding @davidhu2000 I updated the code. I&#39;m sorry."}], "answers": [{"comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474496389, "post_id": 39627369, "comment_id": 66560411, "body": "<code>greet</code> method is throwing an error on an instance of <code>Baby</code>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474496511, "post_id": 39627369, "comment_id": 66560447, "body": "I&#39;m calling <code>greet(spanish)</code> and the error I get is: <code>undefined local variable or method </code>spanish&#39; for main:Object (NameError)`."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474496552, "post_id": 39627369, "comment_id": 66560458, "body": "you need to put spanish in quotes, like <code>greet(&#39;spanish&#39;)</code>, because you are passing in a string, not a variable"}, {"owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "edited": false, "score": 0, "creation_date": 1474496699, "post_id": 39627369, "comment_id": 66560510, "body": "But, what if calling the module takes a lot of time, so I want to use it after a validation inside the method, not for every instance of the class. I mean, I want to use this method or not after validating something inside the instance method? @davidhu2000"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 1, "creation_date": 1474497419, "post_id": 39627369, "comment_id": 66560712, "body": "Is <code>GreetLanguages</code> added to the singleton class of each instance?"}, {"owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "edited": false, "score": 0, "creation_date": 1475465905, "post_id": 39627369, "comment_id": 66938669, "body": "the reason to add module into method is in order to load some data from mongo by the module only when the class method is called."}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1474496017, "creation_date": 1474496017, "answer_id": 39627369, "question_id": 39627142, "link": "https://stackoverflow.com/questions/39627142/include-module-into-method-ruby/39627369#39627369", "title": "Include module into method ruby", "body": "<pre><code>module GreetLanguages\n  def spanish\n    \"Hola\"\n  end\n\n  def english\n    \"Hi\"\n  end\nend\n\nclass Baby\n\n  def initialize(name)\n    @name = name\n  end\n\n  def greet(language)\n    extend GreetLanguages\n    send(language)\n  end\nend\n</code></pre>\n\n<p>So, I managed to get this code working using <code>extend</code>. Also, in your <code>send</code> function, you need to remove the quotes, because you are not sending the string <code>\"language\"</code>, you are sending the variable language which represent the string <code>\"spanish\"</code> or <code>\"english\"</code>. </p>\n\n<p>So, <code>include</code> doesn't have a direct receiver, so it is basically calling it on <code>self</code>. When you use <code>include</code> in the instance method for the class <code>Baby</code>, you are adding the module to an instance of <code>ivan</code>, which doesn't make any sense. </p>\n\n<p><code>extend</code> adds the module as class methods, so the instance itself can call the method. So, we are adding the module to the instance of <code>ivan</code>, and now when we can call <code>greet</code>. </p>\n\n<p>I really can't see any reason for doing this, it's best to use <code>include</code> in the class level. </p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 0, "last_activity_date": 1474507828, "last_edit_date": 1474507828, "creation_date": 1474505730, "answer_id": 39628632, "question_id": 39627142, "link": "https://stackoverflow.com/questions/39627142/include-module-into-method-ruby/39628632#39628632", "title": "Include module into method ruby", "body": "<p>The module contains two instance methods. You want to send them to an instance, not to the class, so you need to <code>include</code> the module (using <a href=\"https://ruby-doc.org/core-2.3.1/Module.html#method-i-include\" rel=\"nofollow\">Module#include</a>), not <code>extend</code>it.  To invoke <code>include</code> from within an instance method (<code>self</code> being the instance), you must send <code>include</code> to <code>self.class</code>. You therefore need to write the following.</p>\n\n<pre><code>class Baby\n  def initialize(name)\n    @name = name\n  end\n  def greet(language)\n    self.class.include GreetLanguages\n    send(language)\n  end\nend\n\nivan = Baby.new('Iv\u00e1n')\nivan.greet('spanish')\n  #=&gt; \"Hola\"\n\nBaby.instance_methods.include?(:english) &amp;&amp; Baby.instance_methods.include?(:spanish)\n  #=&gt; true\n\nivan.greet('english')\n  #=&gt; \"Hi\"\n</code></pre>\n\n<p>You can alternatively write <code>ivan.greet(:spanish)</code>.</p>\n\n<p>You would use <a href=\"https://ruby-doc.org/core-2.3.1/Object.html#method-i-extend\" rel=\"nofollow\">Object#extend</a> if you wanted to convert the instance methods in the module to class methods when you bring them into the class.</p>\n\n<pre><code>class Baby\n  def initialize(name)\n    @name = name\n  end\n  def extend_mod\n    self.class.extend GreetLanguages\n  end\nend\n\nBaby.new('Iv\u00e1n').extend_mod\nBaby.methods.include?(:spanish) &amp;&amp; Baby.methods.include?(:english) #=&gt; true  \n\nBaby.spanish\n  #=&gt; \"Hola\"\nBaby.english\n  #=&gt; \"Hi\"\n</code></pre>\n\n<p>It is unusual to invoke <code>include</code> or <code>extend</code> from within an instance method. I don't know why one would want to do that.</p>\n"}], "owner": {"reputation": 531, "user_id": 4801466, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-LKQUV9yTvkc/AAAAAAAAAAI/AAAAAAAAABM/3umg80-LeJM/photo.jpg?sz=128", "display_name": "Iv&#225;n Cort&#233;s Romero", "link": "https://stackoverflow.com/users/4801466/iv%c3%a1n-cort%c3%a9s-romero"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1812, "favorite_count": 0, "accepted_answer_id": 39628632, "answer_count": 2, "score": 2, "last_activity_date": 1474507828, "creation_date": 1474494723, "last_edit_date": 1474496144, "question_id": 39627142, "link": "https://stackoverflow.com/questions/39627142/include-module-into-method-ruby", "title": "Include module into method ruby", "body": "<p>I have used module to extend class functionality. But suddenly I wonder if it is ok if I include a module directly into a method of the class instead of into the class like this:</p>\n\n<p>Original use:</p>\n\n<p>model:</p>\n\n<pre><code>class Baby\n  include CommunicationSkills\n\n  def initialize(name)\n    @name = name\n  end\nend\n</code></pre>\n\n<p>module:</p>\n\n<pre><code>module CommunicationSkills\n  def greet\n    \"Hi\"\n  end\nend\n</code></pre>\n\n<p>so we can:</p>\n\n<pre><code>ivan = Baby.new('Iv\u00e1n')\nivan.greet\n=&gt; \"Hi\"\n</code></pre>\n\n<p>but what if I include the method inside a method directly:</p>\n\n<pre><code>class Baby\n\n  def initialize(name)\n    @name = name\n  end\n\n  def greet(language)\n    extend GreetLanguages\n    send(language)\n  end\nend\n</code></pre>\n\n<p>module:</p>\n\n<pre><code>module GreetLanguages\n  def spanish\n    \"Hola\"\n  end\n\n  def english\n     \"Hi\"\n  end\nend\n</code></pre>\n\n<p>so:</p>\n\n<pre><code>ivan = Baby.new('Iv\u00e1n')\nivan.greet('spanish')\n=&gt; \"Hola\"\nivan.greet('english')\n=&gt; \"Hi\"\n</code></pre>\n\n<p>I know that this is posible, but conceptually it is right?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 3, "creation_date": 1474494325, "post_id": 39627028, "comment_id": 66559613, "body": "Probably worth reading a few introductory texts. <i>The Well Grounded Rubyist</i> is a good intro, others are available."}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474499054, "post_id": 39627028, "comment_id": 66561128, "body": "As @sagarpandya82 says, tutorials/text books for Ruby will help you more than Google searches. You can&#39;t search for something like your <code>tquery</code> example but you could search for string interpolation or interpolating variables into strings. The same problem will occur querying about other languages because it&#39;s not the specific syntax you want to look up. But, again, tutorials will help you more."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1474548524, "post_id": 39627028, "comment_id": 66582698, "body": "I&#39;m voting to close this question as off-topic because it is about how to use a search engine, not about programming."}, {"owner": {"reputation": 393, "user_id": 2708215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09b61fdf2abd311263f2ab2e4c0a48aa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2708215/andrew"}, "edited": false, "score": 0, "creation_date": 1474563168, "post_id": 39627028, "comment_id": 66592911, "body": "I think of it as how to apply a valuable tool to the improvement of programming.  It&#39;s a bit broader than &quot;how to use a search engine&quot;.  It also includes what engine would be best to use, and how.  The fact that an upvoted and useful suggestion of an engine has been made supports that.  On the other hand, if you have suggestions on how to improve the question, or a better place or tagset, I would appreciate it."}], "answers": [{"comments": [{"owner": {"reputation": 393, "user_id": 2708215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09b61fdf2abd311263f2ab2e4c0a48aa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2708215/andrew"}, "edited": false, "score": 0, "creation_date": 1474495218, "post_id": 39627093, "comment_id": 66560005, "body": "Oh, very nice.  I&#39;ve never used Symbolhound.  Time to explore... Thank you."}], "tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": false, "score": 2, "last_activity_date": 1474494452, "creation_date": 1474494452, "answer_id": 39627093, "question_id": 39627028, "link": "https://stackoverflow.com/questions/39627028/best-way-to-search-ruby-syntax-in-search-engine/39627093#39627093", "title": "Best way to search Ruby syntax in search engine", "body": "<p>Symbolhound is pretty good for this. For example, <a href=\"http://symbolhound.com/?q=ruby+%23%7B%7D\" rel=\"nofollow\">here's the search for Ruby's <code>#{}</code></a>.</p>\n\n<p>Mind, as you can see from the results, it doesn't necessarily come immediately back and tell you what the notation you searched for is <em>named</em>, or how it's <em>defined</em>, but it does return some helpful results to get you started. It's especially useful for punctuation-based syntax elements that are difficult or impossible to search for in other search engines.</p>\n"}], "owner": {"reputation": 393, "user_id": 2708215, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/09b61fdf2abd311263f2ab2e4c0a48aa?s=128&d=identicon&r=PG&f=1", "display_name": "Andrew", "link": "https://stackoverflow.com/users/2708215/andrew"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 1, "answer_count": 1, "score": -1, "last_activity_date": 1474494452, "creation_date": 1474494152, "question_id": 39627028, "link": "https://stackoverflow.com/questions/39627028/best-way-to-search-ruby-syntax-in-search-engine", "title": "Best way to search Ruby syntax in search engine", "body": "<p>I'd like to know what suggestions there are for Googling (or using other search engines if preferable) for Ruby syntax.  I'm very new, and a substantial part of my baptism by fire comes by way of reading other people's code.  Ruby in particular can be challenging this way-- it's fantastically compact and easy to read if you know how to read it, so to speak.  But figuring that out can be difficult at times.  It's worth it, but difficult.  So, for example, let's say I encounter an expression like this:</p>\n\n<pre><code>tquery = \"#{MASTER_URL}#{query_str}\"\n</code></pre>\n\n<p>Well, apparently there's something going on with the syntax #{stuff}, but what?  A variable being manipulated, it seems?  If you encountered such an expression and didn't know about interpolation/substitution and have no ready access to someone to ask directly, how would you go about Googling that?  That's just an example, of course, but I hope it illustrates the type of problem I'd like to address.</p>\n\n<p>Also, if there are better tags to apply to this post please let me know and I will add.  Thank you.</p>\n"}, {"tags": ["ruby", "rspec", "parameter-passing"], "answers": [{"comments": [{"owner": {"reputation": 218, "user_id": 1633724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996667a3e43913e24c8a5ae738b4daa2?s=128&d=identicon&r=PG", "display_name": "Nth boss", "link": "https://stackoverflow.com/users/1633724/nth-boss"}, "edited": false, "score": 3, "creation_date": 1474506428, "post_id": 39627069, "comment_id": 66562682, "body": "The problem with using let is that it is only cached for the duration of the example. If I have 10 &quot;it&quot;s in my test then it is going to calculate the value of the let variable 10 times. In my case it is imperative that I build the result once for the entire context, not for each &quot;it&quot;. Otherwise my unit tests will run for more than a day and no one will use them."}, {"owner": {"reputation": 1421, "user_id": 2399340, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/8bcbc4be042297d06c4f64db21a08b5d?s=128&d=identicon&r=PG", "display_name": "WojciechKo", "link": "https://stackoverflow.com/users/2399340/wojciechko"}, "edited": false, "score": 0, "creation_date": 1567592087, "post_id": 39627069, "comment_id": 102005936, "body": "You can use <a href=\"https://test-prof.evilmartians.io/#/let_it_be\" rel=\"nofollow noreferrer\">test-prof.evilmartians.io/#/let_it_be</a> to prevent this behaviour and cache <code>let</code> between examples."}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 2, "last_activity_date": 1474494353, "creation_date": 1474494353, "answer_id": 39627069, "question_id": 39626805, "link": "https://stackoverflow.com/questions/39626805/passing-parameters-to-an-rspec-shared-example/39627069#39627069", "title": "Passing parameters to an rspec shared example", "body": "<p>you can use <code>let</code>.</p>\n\n<pre><code>let(:result)     { build_result({some_parameters}) }\n</code></pre>\n\n<p>This creates an instance variable that you can use in your test later.</p>\n\n<p>Accord to documentation on <a href=\"http://betterspecs.org/#let\" rel=\"nofollow\"><code>let</code></a>, </p>\n\n<blockquote>\n  <p>When you have to assign a variable instead of using a before block to\n  create an instance variable, use let. Using let the variable lazy\n  loads only when it is used the first time in the test and get cached\n  until that specific test is finished.</p>\n  \n  <p><strong>BAD</strong></p>\n\n<pre><code>describe '#type_id' do\n  before { @resource = FactoryGirl.create :device }\n  before { @type     = Type.find @resource.type_id }\n\n  it 'sets the type_id field' do\n    expect(@resource.type_id).to equal(@type.id)\n  end\nend\n</code></pre>\n  \n  <p><strong>GOOD</strong></p>\n\n<pre><code>describe '#type_id' do\n  let(:resource) { FactoryGirl.create :device }\n  let(:type)     { Type.find resource.type_id }\n\n  it 'sets the type_id field' do\n    expect(resource.type_id).to equal(type.id)\n  end\nend\n</code></pre>\n</blockquote>\n"}, {"comments": [{"owner": {"reputation": 316, "user_id": 3605569, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/39fe05f71f980d9dd4b3fbaf28f4c8ca?s=128&d=identicon&r=PG&f=1", "display_name": "Etienne Cha", "link": "https://stackoverflow.com/users/3605569/etienne-cha"}, "edited": false, "score": 2, "creation_date": 1521644616, "post_id": 39627191, "comment_id": 85821089, "body": "This is the answer you were looking for when you visited this page"}, {"owner": {"reputation": 2371, "user_id": 565637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a45c1be949bd9cdef95e770ff985dfa8?s=128&d=identicon&r=PG", "display_name": "gamliela", "link": "https://stackoverflow.com/users/565637/gamliela"}, "edited": false, "score": 9, "creation_date": 1523490715, "post_id": 39627191, "comment_id": 86587338, "body": "And what if <code>my_argument</code> was defined with <code>let</code>? It will not work."}, {"owner": {"reputation": 9754, "user_id": 636762, "user_type": "registered", "accept_rate": 63, "profile_image": "https://www.gravatar.com/avatar/52351c68bff7878307faa6ad4056cb27?s=128&d=identicon&r=PG", "display_name": "Rakib", "link": "https://stackoverflow.com/users/636762/rakib"}, "reply_to_user": {"reputation": 2371, "user_id": 565637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a45c1be949bd9cdef95e770ff985dfa8?s=128&d=identicon&r=PG", "display_name": "gamliela", "link": "https://stackoverflow.com/users/565637/gamliela"}, "edited": false, "score": 4, "creation_date": 1529650846, "post_id": 39627191, "comment_id": 88959797, "body": "Same question as @gamliela. Can a variable defined with <code>let</code> be passed to shared_examples?"}, {"owner": {"reputation": 1164, "user_id": 625745, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38010a01153b0c926db4491c0937e068?s=128&d=identicon&r=PG&f=1", "display_name": "Michael Franzl", "link": "https://stackoverflow.com/users/625745/michael-franzl"}, "reply_to_user": {"reputation": 2371, "user_id": 565637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a45c1be949bd9cdef95e770ff985dfa8?s=128&d=identicon&r=PG", "display_name": "gamliela", "link": "https://stackoverflow.com/users/565637/gamliela"}, "edited": false, "score": 6, "creation_date": 1553677030, "post_id": 39627191, "comment_id": 97468612, "body": "@gamliela, if <code>my_argument</code> was defined with <code>let</code>, there would be no need to pass it as an argument. You would simply use it directly in <code>shared_examples</code>."}, {"owner": {"reputation": 2371, "user_id": 565637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a45c1be949bd9cdef95e770ff985dfa8?s=128&d=identicon&r=PG", "display_name": "gamliela", "link": "https://stackoverflow.com/users/565637/gamliela"}, "edited": false, "score": 0, "creation_date": 1553769796, "post_id": 39627191, "comment_id": 97511406, "body": "Then that would be a code smell. Especially when the shared examples block is defined in a different file. A shared function should not implicitly rely on global symbols whose semantic meaning might be different on context."}, {"owner": {"reputation": 15926, "user_id": 474597, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cf5fcf12effe4798f02aa84def25c684?s=128&d=identicon&r=PG", "display_name": "lulalala", "link": "https://stackoverflow.com/users/474597/lulalala"}, "reply_to_user": {"reputation": 2371, "user_id": 565637, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/a45c1be949bd9cdef95e770ff985dfa8?s=128&d=identicon&r=PG", "display_name": "gamliela", "link": "https://stackoverflow.com/users/565637/gamliela"}, "edited": false, "score": 1, "creation_date": 1588827609, "post_id": 39627191, "comment_id": 109050905, "body": "@gamliela you can pass the factory bot argument as parameter, and in the example group use these in a <code>let</code>."}], "tags": [], "owner": {"reputation": 1122, "user_id": 4249632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c374d3088b82556c41945816b9ce5c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Hertz", "link": "https://stackoverflow.com/users/4249632/ryan-hertz"}, "is_accepted": false, "score": 84, "last_activity_date": 1474494960, "creation_date": 1474494960, "answer_id": 39627191, "question_id": 39626805, "link": "https://stackoverflow.com/questions/39626805/passing-parameters-to-an-rspec-shared-example/39627191#39627191", "title": "Passing parameters to an rspec shared example", "body": "<p>You can pass arguments to shared examples like this:</p>\n\n<pre><code>shared_examples_for \"A result\" do |argument|\n # some tests with argument\nend\n</code></pre>\n\n<p>And then pass in <code>my_argument</code> like this:</p>\n\n<pre><code>it_behaves_like \"A result\", my_argument\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 218, "user_id": 1633724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996667a3e43913e24c8a5ae738b4daa2?s=128&d=identicon&r=PG", "display_name": "Nth boss", "link": "https://stackoverflow.com/users/1633724/nth-boss"}, "edited": false, "score": 0, "creation_date": 1475163105, "post_id": 39645526, "comment_id": 66843130, "body": "It&#39;s not what I was hoping for but it&#39;s the best answer so far."}], "tags": [], "owner": {"reputation": 1556, "user_id": 6156030, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6ab58120061222262e44544b199af476?s=128&d=identicon&r=PG&f=1", "display_name": "Laura Paakkinen", "link": "https://stackoverflow.com/users/6156030/laura-paakkinen"}, "is_accepted": true, "score": 0, "last_activity_date": 1519380504, "last_edit_date": 1519380504, "creation_date": 1474566042, "answer_id": 39645526, "question_id": 39626805, "link": "https://stackoverflow.com/questions/39626805/passing-parameters-to-an-rspec-shared-example/39645526#39645526", "title": "Passing parameters to an rspec shared example", "body": "<p>You could group all you assertions on result into a single example. This way the let is only evaluated once.</p>\n\n<pre><code>RSpec.describe 'Test Description' do\n  context 'for params x and y' do\n    let(:expected_x) { 'x' }\n    let(:expected_y) { 'y' }\n\n    subject { build_result({x: 'x', y: 'y'}) }\n\n    specify :aggregate_failures do\n      expect(subject.x).to eq(expected_x)\n      expect(subject.y).to eq(expected_y)\n    end\n  end\nend\n</code></pre>\n\n<p>It does go against the \"one test, one assertion\" guideline, but if the operation is very costly, I think it is a reasonable approach. With <a href=\"https://www.relishapp.com/rspec/rspec-core/docs/expectation-framework-integration/aggregating-failures\" rel=\"nofollow noreferrer\"><code>:aggregate_failures</code></a> you will get separate failures for each assertion, so you won't be missing out on that.</p>\n"}, {"tags": [], "owner": {"reputation": 756, "user_id": 8247133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6SM3.jpg?s=128&g=1", "display_name": "Touseef Murtaza", "link": "https://stackoverflow.com/users/8247133/touseef-murtaza"}, "is_accepted": false, "score": 0, "last_activity_date": 1585383431, "creation_date": 1585383431, "answer_id": 60898810, "question_id": 39626805, "link": "https://stackoverflow.com/questions/39626805/passing-parameters-to-an-rspec-shared-example/60898810#60898810", "title": "Passing parameters to an rspec shared example", "body": "<p>If you wanted to pass arguments to the shared_example spec file, you should use something like </p>\n\n<pre><code>it_behaves_like 'SHARED_EXAMPLE_NAME', { params1: param2, param2: param2 }\n</code></pre>\n\n<p>You can also pass the parameters without hash encapsulation. It depends on how you are going to utilize that param into your shared file.\nIn my case, I have to call the API with the dynamic params.</p>\n\n<pre><code>RSpec.shared_examples 'SHARED_EXAMPLE_NAME' do |params = {}|\n</code></pre>\n\n<p><strong>FYI:</strong> You cannot pass <em>Factory</em> data as param into the shared_example spec file. You have to explicitly call the factory into the shared_example spec file.</p>\n"}], "owner": {"reputation": 218, "user_id": 1633724, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/996667a3e43913e24c8a5ae738b4daa2?s=128&d=identicon&r=PG", "display_name": "Nth boss", "link": "https://stackoverflow.com/users/1633724/nth-boss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 11868, "favorite_count": 2, "accepted_answer_id": 39645526, "answer_count": 4, "score": 18, "last_activity_date": 1585383431, "creation_date": 1474493030, "last_edit_date": 1511258272, "question_id": 39626805, "link": "https://stackoverflow.com/questions/39626805/passing-parameters-to-an-rspec-shared-example", "title": "Passing parameters to an rspec shared example", "body": "<p>I have a process that returns a result set that I want to test for validity using rspec. The process will return different results based on parameters but there are many examples that are common to all of them so I would like to create a set of common examples that I can run against all of them.</p>\n\n<p>I know that the preferred practice is to use let to build the result. The problem is that each process takes a minute or two to generate a result and I have probably 30 examples. With all of the permutations based on different parameters I am running about 500 examples.If I had to rebuild the result for each example the test would run more than a day.</p>\n\n<p>So instead I am building a result in a before(:all) block and assigning it to an attribute something like this:</p>\n\n<pre><code>RSpec.describe 'Test Description' do\n  attr_reader :result\n\n  before(:all)\n    @result = build_result({some_parameters})\n  end\n\n  context 'Some context' do\n    it 'Looks lik a result' do \n      expect(result.something).to ...\n    end\n\n    it 'Feels lik a result' do \n      expect(result.something).to ...\n    end\n  end\nend\n</code></pre>\n\n<p>Maybe there is a better way than using an attribute. I want to do something like this:</p>\n\n<pre><code>RSpec.describe 'Test Description' do\n  attr_reader :result\n\n  before(:all)\n    @result = build_result({some_parameters})\n  end\n\n  context 'Some context' do\n    it_behaves_like \"A result\" result\n  end\nend\n</code></pre>\n\n<p>Using an attribute in this context fails. Is there a different way to do this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 332, "user_id": 2074939, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/d349e69c4345bbf4f72df96b9b711504?s=128&d=identicon&r=PG", "display_name": "rolkos", "link": "https://stackoverflow.com/users/2074939/rolkos"}, "is_accepted": true, "score": 2, "last_activity_date": 1475669545, "last_edit_date": 1495535450, "creation_date": 1475666995, "answer_id": 39872787, "question_id": 39626132, "link": "https://stackoverflow.com/questions/39626132/ignoring-bcrypt-3-1-11-because-its-extensions-are-not-built-try-gem-pristine-b/39872787#39872787", "title": "Ignoring bcrypt-3.1.11 because its extensions are not built. Try: gem pristine bcrypt --version 3.1.11", "body": "<p>Probably during update you have also installed new XCode, it includes libs required to build extensions. But it will not work until you accept XCode licence, and install new components. XCode will do it for you on first run. </p>\n\n<p>So, first run XCode, accept licence, install missing components (XCode should automatically ask if you like to install them). </p>\n\n<p>It might be required to reinstall ruby. (Described here: <a href=\"https://stackoverflow.com/a/16775469/2074939\">https://stackoverflow.com/a/16775469/2074939</a>)</p>\n\n<p>Restart console.</p>\n\n<p>If this is first time you install Ruby and Ruby on Rail on your system I recommend reading this:\n<a href=\"https://gorails.com/setup/osx/10.12-sierra\" rel=\"nofollow noreferrer\">https://gorails.com/setup/osx/10.12-sierra\n</a></p>\n"}, {"tags": [], "owner": {"reputation": 1180, "user_id": 2465671, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/fk3Sh.jpg?s=128&g=1", "display_name": "Joe", "link": "https://stackoverflow.com/users/2465671/joe"}, "is_accepted": false, "score": 1, "last_activity_date": 1483629235, "last_edit_date": 1483629235, "creation_date": 1483563547, "answer_id": 41473122, "question_id": 39626132, "link": "https://stackoverflow.com/questions/39626132/ignoring-bcrypt-3-1-11-because-its-extensions-are-not-built-try-gem-pristine-b/41473122#41473122", "title": "Ignoring bcrypt-3.1.11 because its extensions are not built. Try: gem pristine bcrypt --version 3.1.11", "body": "<p>I just spent the day trying to resolve a similar issue. The issue is probably coming from conflicts in your  <code>.gem</code> folder in <code>~/.gem/ruby</code> from your current ruby version or an older one. To fix this, you can manually delete those folders and re-install your rails gems via:\n<code>\nrm -rf ~/.gem/ruby/&lt;ruby_version&gt;\ngem install bundler\nbundle install\n</code></p>\n\n<p>The folder will be regenerated next time you use that ruby version. If you're using a ruby package manager(ie. Chruby), you should be able to switch ruby versions in your app and see which Ruby versions are coming up with the warning and only delete the gems for that version via the command above.</p>\n\n<p>Other solutions I found suggested running <code>gem pristine -a</code>, on all of your existing ruby versions, but that didn't seem to solve the issue on my end.</p>\n"}, {"tags": [], "owner": {"reputation": 756, "user_id": 8247133, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/J6SM3.jpg?s=128&g=1", "display_name": "Touseef Murtaza", "link": "https://stackoverflow.com/users/8247133/touseef-murtaza"}, "is_accepted": false, "score": 2, "last_activity_date": 1530122975, "creation_date": 1530122975, "answer_id": 51068998, "question_id": 39626132, "link": "https://stackoverflow.com/questions/39626132/ignoring-bcrypt-3-1-11-because-its-extensions-are-not-built-try-gem-pristine-b/51068998#51068998", "title": "Ignoring bcrypt-3.1.11 because its extensions are not built. Try: gem pristine bcrypt --version 3.1.11", "body": "<p>Reinstall your current gem and issue will be fixed.</p>\n\n<p>In my case, i used</p>\n\n<pre><code>rvm reinstall ruby-2.2.5\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 336, "user_id": 11482524, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Dwbp6mpnZls/AAAAAAAAAAI/AAAAAAAAAAA/ACHi3rdBw4qCmA-kl8N9l93sIN0UzjQxQQ/mo/photo.jpg?sz=128", "display_name": "Jacob Benaim", "link": "https://stackoverflow.com/users/11482524/jacob-benaim"}, "is_accepted": false, "score": 2, "last_activity_date": 1569795504, "last_edit_date": 1569795504, "creation_date": 1569794410, "answer_id": 58159529, "question_id": 39626132, "link": "https://stackoverflow.com/questions/39626132/ignoring-bcrypt-3-1-11-because-its-extensions-are-not-built-try-gem-pristine-b/58159529#58159529", "title": "Ignoring bcrypt-3.1.11 because its extensions are not built. Try: gem pristine bcrypt --version 3.1.11", "body": "<pre><code>gem pristine -a\nbundle install\nbundle update\n</code></pre>\n\n<p>solved this for me </p>\n\n<p>I had these lines commented out as well due to a previous try, not sure if it helped. </p>\n\n<pre><code># gem 'spring'\n# gem 'spring-watcher-listen', '~&gt; 2.0.0'\n</code></pre>\n"}], "owner": {"reputation": 2523, "user_id": 4896926, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a05323f7d95e1eea7c584b760d915618?s=128&d=identicon&r=PG", "display_name": "Chutipong Roobklom", "link": "https://stackoverflow.com/users/4896926/chutipong-roobklom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6802, "favorite_count": 1, "accepted_answer_id": 39872787, "answer_count": 4, "score": 1, "last_activity_date": 1569795504, "creation_date": 1474490167, "question_id": 39626132, "link": "https://stackoverflow.com/questions/39626132/ignoring-bcrypt-3-1-11-because-its-extensions-are-not-built-try-gem-pristine-b", "title": "Ignoring bcrypt-3.1.11 because its extensions are not built. Try: gem pristine bcrypt --version 3.1.11", "body": "<p><strong>In MacOS Sierra [22 Sept 2016]</strong></p>\n\n<p>after upgrade ruby to 5.3.1 via <strong>rvm</strong> and then checked <strong>ruby -v</strong></p>\n\n<pre><code>ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin16]\n</code></pre>\n\n<p>Then I tried to install rails by using gem</p>\n\n<pre><code>gem install rails -v 5.0.0.1\n</code></pre>\n\n<p>it shows errors </p>\n\n<pre><code>  Ignoring bcrypt-3.1.11 because its extensions are not built.  Try: gem pristine bcrypt --version 3.1.11\nIgnoring binding_of_caller-0.7.2 because its extensions are not built.  Try: gem pristine binding_of_caller --version 0.7.2\nIgnoring byebug-9.0.5 because its extensions are not built.  Try: gem pristine byebug --version 9.0.5\nIgnoring byebug-8.2.2 because its extensions are not built.  Try: gem pristine byebug --version 8.2.2\nIgnoring capybara-webkit-1.11.1 because its extensions are not built.  Try: gem pristine capybara-webkit --version 1.11.1\nIgnoring debug_inspector-0.0.2 because its extensions are not built.  Try: gem pristine debug_inspector --version 0.0.2\n/Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require': incompatible library version - /Users/chutipongroobklom/.rvm/gems/ruby-2.3.1/gems/io-console-0.4.6/lib/io/console.bundle (fatal)\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/user_interaction.rb:9:in `&lt;top (required)&gt;'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/command.rb:10:in `&lt;top (required)&gt;'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/command_manager.rb:8:in `&lt;top (required)&gt;'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/gem_runner.rb:9:in `&lt;top (required)&gt;'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /Users/chutipongroobklom/.rvm/rubies/ruby-2.3.1/bin/gem:9:in `&lt;main&gt;'\n</code></pre>\n\n<ol>\n<li>What's going on ?</li>\n<li>What is the root cause ?</li>\n<li>What should I do next ?</li>\n<li>How can I prevent this error in the future ?</li>\n</ol>\n\n<p>Thank you in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474488100, "post_id": 39625547, "comment_id": 66556381, "body": "please show us the actual result and the expected result."}, {"owner": {"reputation": 1288, "user_id": 2344804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JnZ76.jpg?s=128&g=1", "display_name": "d34n5", "link": "https://stackoverflow.com/users/2344804/d34n5"}, "edited": false, "score": 0, "creation_date": 1474494748, "post_id": 39625547, "comment_id": 66559823, "body": "You should search for the <code>full_name</code> outside of the 3 last record query, not in the <code>where</code> clause."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 4285237, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1476d62769406dc5ef791a838788641c?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/4285237/samuel"}, "edited": false, "score": 0, "creation_date": 1474489234, "post_id": 39625692, "comment_id": 66557024, "body": "Thanks @bcd for the explanation. This solved the issue."}], "tags": [], "owner": {"reputation": 3957, "user_id": 187004, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/94464371b17302eadec74810ec480aaf?s=128&d=identicon&r=PG", "display_name": "Cristian Bica", "link": "https://stackoverflow.com/users/187004/cristian-bica"}, "is_accepted": true, "score": 4, "last_activity_date": 1474494177, "last_edit_date": 1474494177, "creation_date": 1474488512, "answer_id": 39625692, "question_id": 39625547, "link": "https://stackoverflow.com/questions/39625547/rails-comparison-on-the-last-3-updated-records-of-model/39625692#39625692", "title": "Rails - Comparison on the last 3 updated records of Model", "body": "<p>You can achieve this at database level only with subqueries: select last 3 records and from those last 3 records search for fullname. What your example query does is search for all records with the given fullname and sorts by updated_at. Given that you only require 3 records you could do this in user space:</p>\n\n<pre><code>Playlist.order(updated_at: :desc).limit(3).any?{ |playlist| playlist.fullname == @last_fullname }\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 4285237, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1476d62769406dc5ef791a838788641c?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/4285237/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 39625692, "answer_count": 1, "score": 0, "last_activity_date": 1474494177, "creation_date": 1474488014, "last_edit_date": 1474488793, "question_id": 39625547, "link": "https://stackoverflow.com/questions/39625547/rails-comparison-on-the-last-3-updated-records-of-model", "title": "Rails - Comparison on the last 3 updated records of Model", "body": "<p>I'm having issue with a comparison in Ruby on Rails. I want to check if a fullname is the last 3 updated records in the database. For some reason it checks the whole database. </p>\n\n<pre><code>if Playlist.where(fullname: @last_fullname).order(updated_at: :desc).limit(3).exists?\n  puts \"records exists in last 3 updated records\"\nelse\n  puts \"record not found\"\nend\n</code></pre>\n\n<p>Not sure if the syntax is correct or should be broken up. It doesn't give me an error but the result is not what is expected.</p>\n\n<p>EDIT: the expected result is that when a record is not within the last 3 updated then it should give \"record not found\". If the record is within the last 3 updated it should give \"record exists in last 3 updated records\". </p>\n\n<p>What I'm getting when the @last_fullname exists in the database is that it will always give \"records exists in last 3 updated records\" eventhough it's not in the last 3 updated.</p>\n\n<p>I'm only getting \"record not found\" when it doesn't exits in the database.</p>\n\n<p>Any idea?</p>\n"}, {"tags": ["ruby", "api", "twitter"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474490967, "post_id": 39625510, "comment_id": 66557967, "body": "link is dead. Also <code>followers</code> will be a single request for the specified user and will return a list limited to 20 users you would then need to use the next_cursor to navigate so 8000 followers would result in 400 requests. The <code>&#47;followers</code> endpoint  is limited to 15 Requests per 15 minute window (30 if using app auth) by the Twitter API. Is there a reason you are trying to do this an if so 8000 followers will take you ~ 6.7 hours (3.3 hours using app_auth) to aggregate in this fashion. <a href=\"https://dev.twitter.com/rest/reference/get/followers/list\" rel=\"nofollow noreferrer\">Twitter REST API /followers/list</a>"}, {"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474491052, "post_id": 39625510, "comment_id": 66558005, "body": "yeah but with one request you should get 5000 users, si it should take like 2 minutes max."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474491197, "post_id": 39625510, "comment_id": 66558084, "body": "Where did you get the idea of 5000 users? Twitter Docs say 20. Although this is scalable to 200 so I guess you could get 8000 done in ~40 minutes. given you pass the count option to be 200 on every request."}, {"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474491390, "post_id": 39625510, "comment_id": 66558182, "body": "here: <a href=\"http://stackoverflow.com/questions/16600103/ruby-twitter-gem-rate-limit-exceeded\" title=\"ruby twitter gem rate limit exceeded\">stackoverflow.com/questions/16600103/&hellip;</a> but also others, people are able to scrape millions, so I doubt they are doing it by 20. Also i can scrape few hundred in just seconds, but i need scrape at least hundreds of thousands in few hours."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474491498, "post_id": 39625510, "comment_id": 66558232, "body": "5000 is for the ids only not the users themselves. <a href=\"https://dev.twitter.com/rest/reference/get/followers/ids\" rel=\"nofollow noreferrer\">Twitter Documentation</a> is very helpful and explicit"}, {"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474492079, "post_id": 39625510, "comment_id": 66558548, "body": "But I have found this in twitter gem documentation, could it be used somehow? <a href=\"http://www.rubydoc.info/gems/twitter/Twitter/RateLimit\" rel=\"nofollow noreferrer\">rubydoc.info/gems/twitter/Twitter/RateLimit</a>"}, {"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474493945, "post_id": 39625510, "comment_id": 66559451, "body": "Ok now i see you were right, so i had error in my code all the time :) thanks al ot for help"}, {"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474499129, "post_id": 39625510, "comment_id": 66561144, "body": "So i replaced @client.followers(names) with @client.follower_ids(names), but that gives me errors. Any idea how to replace it correctly? thanks"}, {"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474533779, "post_id": 39625510, "comment_id": 66572886, "body": "Ok i found the solutions altering this code <a href=\"https://gist.github.com/sferik/9630519\" rel=\"nofollow noreferrer\">gist.github.com/sferik/9630519</a>, but thanks for pointing me in right direction :)"}], "owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474491092, "creation_date": 1474487889, "last_edit_date": 1474491092, "question_id": 39625510, "link": "https://stackoverflow.com/questions/39625510/how-to-avoid-hitting-rate-limits-using-twitter-rest-api-in-my-ruby-follower-scra", "title": "How to avoid hitting rate limits using twitter REST API in my ruby follower scraper", "body": "<p>I'm keep hitting \"Rate limit exceeded TooManyRequests\" error in my ruby twitter follower scraper. I have tried adding \"sleep\", like this</p>\n\n<pre><code>def my_userarray(users)\n  userarray = []\n  users.each do |user|\n    userarray &lt;&lt; user.screen_name\nsleep 3\n  end\n  return userarray\nend\n</code></pre>\n\n<p>but it does not work. Either it takes extremely long time, or I hit limit. I'm getting this error even with small number of followers, like 8000. I have also tried adding this:</p>\n\n<pre><code>puts \"sleeping 60\"\nsleep 60\n</code></pre>\n\n<p>to <a href=\"https://github.com/sferik/twitter/blob/master/lib/twitter/rest/utils.rb\" rel=\"nofollow\">https://github.com/sferik/twitter/blob/master/lib/twitter/rest/utils.rb</a>\nbut it also does not work. These were the only solutions I could find searching it for whole day. Thanks for any help.</p>\n\n<p>This is how my code looks now:</p>\n\n<pre><code>def my_usernames\n \"detnewsRodBeard\"\nend\n\ndef my_userinfo(names)\n  @client.followers(names)\nend\n\ndef my_userarray(users)\n  userarray = []\n  users.each do |user|\n    userarray &lt;&lt; user.screen_name\n\n  end\n  return userarray\nend\n\ndef my_users\n my_userarray(my_userinfo(my_usernames))\nend\n\ndef my_csv(my_users)\n  CSV.open('./my_users.csv','a+') do |csv|\n    my_users.each do |k,v|\n      csv &lt;&lt; [k,v]\n    end\n  end\nend\n\nmy_csv(my_users)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "edited": false, "score": 0, "creation_date": 1474990568, "post_id": 39625429, "comment_id": 66755033, "body": "Any luck getting this to install?"}], "answers": [{"tags": [], "owner": {"reputation": 1745, "user_id": 821662, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/620cbc94dd8f978c169efe25b97a663b?s=128&d=identicon&r=PG", "display_name": "Kulgar", "link": "https://stackoverflow.com/users/821662/kulgar"}, "is_accepted": false, "score": 1, "last_activity_date": 1474993142, "last_edit_date": 1495541435, "creation_date": 1474993142, "answer_id": 39729692, "question_id": 39625429, "link": "https://stackoverflow.com/questions/39625429/error-installing-nokogiri-xmlsec-me-harder-mac-el-capitan/39729692#39729692", "title": "Error installing Nokogiri-xmlsec-me-harder Mac El Capitan", "body": "<p>I faced it myself and this one isn't easy. </p>\n\n<p>First there is a typo in  /usr/local/Cellar/libxmlsec1/1.2.20_1/include/xmlsec1/xmlsec/templates.h</p>\n\n<p>Line 12, you have to replace <code>__XMLSEC_TEMPALTES_H__</code>by <code>__XMLSEC_TEMPLATES_H__</code></p>\n\n<p>I then faced another issue (I think due to a XCode 8 bug...): \n<code>ld: file not found: /usr/lib/system/libsystem_symptoms.dylib for architecture x86_64</code></p>\n\n<p>I found this answer: <a href=\"https://stackoverflow.com/questions/39536144/libsystem-symptoms-dylib-missing-in-xcode-8/39611855\">libsystem_symptoms.dylib missing in Xcode 8</a> </p>\n\n<p>But the first solution cannot be used here and the second one didn't work. So I went to <code>/Applications/Xcode.app/Contents/Developer/Platforms/MacOSX.platform/Developer/SDKs/MacOSX10.12.sdk/usr/lib</code> and performed my own sed:</p>\n\n<p><code>grep -irl /usr/lib/system/libsystem_symptoms.dylib * | xargs sudo /usr/bin/sed -i.backup -e\"s/\\/usr\\/lib\\/system\\/libsystem_symptoms.dylib, / /\"</code></p>\n\n<p>This command will create backup files (with .backup extension) for each modified file in case something goes wrong. </p>\n\n<p>Only then nokogiri-xmlsec-me-harder could be installed. </p>\n"}, {"comments": [{"owner": {"reputation": 2558, "user_id": 1157242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a9d4b10e0b35be38592bed9e4e5457e3?s=128&d=identicon&r=PG", "display_name": "PJSCopeland", "link": "https://stackoverflow.com/users/1157242/pjscopeland"}, "edited": false, "score": 0, "creation_date": 1506560016, "post_id": 43506581, "comment_id": 79873881, "body": "I found this worked with <code>nokogiri-xmlsec</code>, but there was more to do with <code>nokogiri-xmlsec-me-harder</code> (as per @Kulgar&#39;s <a href=\"https://stackoverflow.com/a/39729692/1157242\">answer</a>, which was more work than it was worth for me)."}], "tags": [], "owner": {"reputation": 246, "user_id": 3946042, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c1ee6e460265caf3c4324311216405e7?s=128&d=identicon&r=PG&f=1", "display_name": "ebrohman", "link": "https://stackoverflow.com/users/3946042/ebrohman"}, "is_accepted": false, "score": 4, "last_activity_date": 1492638120, "creation_date": 1492638120, "answer_id": 43506581, "question_id": 39625429, "link": "https://stackoverflow.com/questions/39625429/error-installing-nokogiri-xmlsec-me-harder-mac-el-capitan/43506581#43506581", "title": "Error installing Nokogiri-xmlsec-me-harder Mac El Capitan", "body": "<p>I had the same issue on EL Capitan and my fix was to:</p>\n\n<p><code>brew install libxmlsec1</code></p>\n\n<p>after which <code>bundle install</code> worked.</p>\n"}], "owner": {"reputation": 11, "user_id": 3781380, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7498009ad033815c950fcc91aae2b1cf?s=128&d=identicon&r=PG&f=1", "display_name": "user3781380", "link": "https://stackoverflow.com/users/3781380/user3781380"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1078, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1492638120, "creation_date": 1474487596, "question_id": 39625429, "link": "https://stackoverflow.com/questions/39625429/error-installing-nokogiri-xmlsec-me-harder-mac-el-capitan", "title": "Error installing Nokogiri-xmlsec-me-harder Mac El Capitan", "body": "<h2>get this error when doing bundle install:</h2>\n\n<pre><code>An error occurred while installing nokogiri-xmlsec-me-harder (0.9.3pre), and\nBundler cannot continue.\n</code></pre>\n\n<hr>\n\n<h2>I've tried all the different suggestions for installing nokigori but none worked so I tried:</h2>\n\n<pre><code>gem install nokogiri-xmlsec-me-harder\n\nFetching: nokogiri-xmlsec-me-harder-0.9.2.gem (100%)\nBuilding native extensions.  This could take a while...\nERROR:  Error installing nokogiri-xmlsec-me-harder:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Users/sylviaalowden/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/nokogiri-xmlsec-me-harder-0.9.2/ext/nokogiri_ext_xmlsec\n/Users/sylviaalowden/.rvm/rubies/ruby-2.3.1/bin/ruby -r ./siteconf20160921-62548-1ly6yoh.rb extconf.rb\nchecking for ruby.h... yes\nClfags: $(cflags)  -fno-common -pipe -DXMLSEC_CRYPTO=\\\"openssl\\\" -D__XMLSEC_FUNCTION__=__FUNCTION__ -DXMLSEC_NO_SIZE_T -DXMLSEC_NO_GOST=1 -DXMLSEC_NO_XKMS=1 -DXMLSEC_NO_CRYPTO_DYNAMIC_LOADING=1 -DXMLSEC_OPENSSL_100=1 -DXMLSEC_CRYPTO_OPENSSL=1 -fvisibility=hidden\ncreating Makefile\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/sylviaalowden/.rvm/gems/ruby-2.3.1@global/extensions/x86_64-darwin-15/2.3.0/nokogiri-xmlsec-me-harder-0.9.2/mkmf.log\n\ncurrent directory: /Users/sylviaalowden/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/nokogiri-xmlsec-me-harder-0.9.2/ext/nokogiri_ext_xmlsec\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Users/sylviaalowden/.rvm/rubies/ruby-2.3.1/lib/ruby/gems/2.3.0/gems/nokogiri-xmlsec-me-harder-0.9.2/ext/nokogiri_ext_xmlsec\nmake \"DESTDIR=\"\ncompiling init.c\nIn file included from init.c:1:\nIn file included from ./xmlsecrb.h:19:\n/usr/local/Cellar/libxmlsec1/1.2.20_1/include/xmlsec1/xmlsec/templates.h:11:9: warning: '__XMLSEC_TEMPLATES_H__' is used as a header guard here, followed by #define of a different macro [-Wheader-guard]\n#ifndef __XMLSEC_TEMPLATES_H__\n        ^~~~~~~~~~~~~~~~~~~~~~\n/usr/local/Cellar/libxmlsec1/1.2.20_1/include/xmlsec1/xmlsec/templates.h:12:9: note: '__XMLSEC_TEMPALTES_H__' is defined here; did you mean '__XMLSEC_TEMPLATES_H__'?\n#define __XMLSEC_TEMPALTES_H__\n        ^~~~~~~~~~~~~~~~~~~~~~\n        __XMLSEC_TEMPLATES_H__\n1 warning generated.\ncompiling nokogiri_decrypt_with_key.c\nIn file included from nokogiri_decrypt_with_key.c:1:\nIn file included from ./xmlsecrb.h:19:\n/usr/local/Cellar/libxmlsec1/1.2.20_1/include/xmlsec1/xmlsec/templates.h:11:9: warning: '__XMLSEC_TEMPLATES_H__' is used as a header guard here, \n........................\n/usr/local/Cellar/libxmlsec1/1.2.20_1/include/xmlsec1/xmlsec/templates.h:12:9: note: '__XMLSEC_TEMPALTES_H__' is defined here; did you mean '__XMLSEC_TEMPLATES_H__'?\n#define __XMLSEC_TEMPALTES_H__\n        ^~~~~~~~~~~~~~~~~~~~~~\n        __XMLSEC_TEMPLATES_H__\n1 warning generated.\nlinking shared-object nokogiri_ext_xmlsec.bundle\nld: file not found: /usr/lib/system/libsystem_symptoms.dylib for architecture x86_64\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [nokogiri_ext_xmlsec.bundle] Error 1\n\nmake failed, exit code 2\n</code></pre>\n\n<p>Only showing beginning and end of mkmf.log for space reasons. How can I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "edited": false, "score": 0, "creation_date": 1474486361, "post_id": 39624963, "comment_id": 66555431, "body": "I get an error for users that don&#39;t have 4 photos. How could I write an if statement that says <code>if user has 4 photos</code>. I am new to ruby and learning"}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "reply_to_user": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "edited": false, "score": 0, "creation_date": 1474486408, "post_id": 39624963, "comment_id": 66555459, "body": "please elaborate on what do you want to display in cases where user has 1, 2, and 3 photos?"}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "reply_to_user": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "edited": false, "score": 0, "creation_date": 1474487314, "post_id": 39624963, "comment_id": 66555938, "body": "what about if user only have 1 or 3 pictures?"}, {"owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "edited": false, "score": 0, "creation_date": 1474487457, "post_id": 39624963, "comment_id": 66556003, "body": "If user has 2 photos. Show the first row. If the user has 4 photos, show the second row also. If the user has less that 2, show no photos"}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": true, "score": 2, "last_activity_date": 1474487929, "last_edit_date": 1474487929, "creation_date": 1474485850, "answer_id": 39624963, "question_id": 39624924, "link": "https://stackoverflow.com/questions/39624924/how-to-display-the-last-third-and-forth-photos-with-photo-last/39624963#39624963", "title": "How to display the last third and forth photos with `@photo.last()`", "body": "<p>You can use the <code>[]</code> method on the <code>photos</code> array. </p>\n\n<p><code>-1</code> gets the last element, <code>-2</code> gets the 2nd to last, and so on. </p>\n\n<pre><code> @user.photos[-2..-1].each #=&gt; return the last two pictures\n</code></pre>\n\n<p>Of course, you can simply use the <code>@user.photos.last(2).each</code> in this case. </p>\n\n<pre><code> @user.photos[-4..-3].each #=&gt; return the last 3-4 pictures. \n</code></pre>\n\n<p>This will throw an error unless <code>@user.photos</code> has a length of at least 4, otherwise, you will be trying to access values that does not exist. So, to check for that, you can wrap the <code>div</code> in an <code>if</code> statement. </p>\n\n<pre><code>&lt;% if @user.photos.length &gt;= 2 %&gt;\n  &lt;div class=\"photo-box\"&gt;\n    &lt;% @user.photos.last(2).each do |photo| %&gt;\n      ...\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;% if @user.photos.length &gt;= 4 %&gt;\n  &lt;div class=\"photo-box\"&gt;\n    &lt;% @user.photos[-4..-3].each do |photo| %&gt;\n      ...\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "edited": false, "score": 0, "creation_date": 1474494208, "post_id": 39626399, "comment_id": 66559572, "body": "The accepted answer is good, but I like this answer better, it&#39;s both more concise, and more easily adjusted to new layouts."}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": false, "score": 1, "last_activity_date": 1474491200, "creation_date": 1474491200, "answer_id": 39626399, "question_id": 39624924, "link": "https://stackoverflow.com/questions/39624924/how-to-display-the-last-third-and-forth-photos-with-photo-last/39626399#39626399", "title": "How to display the last third and forth photos with `@photo.last()`", "body": "<p>I would get the last four in an array, and then divide them into two sets of two using <a href=\"http://apidock.com/rails/Array/in_groups_of\" rel=\"nofollow\">#in_groups_of</a>.</p>\n\n<p>You can then iterate through the two arrays of two photos each to create the divs. This methods easily extends to n groups of m photos.</p>\n\n<p>Something like:</p>\n\n<pre><code>&lt;%- @user.photos.last(4).in_groups_of(2, false).each do |photo_group| %&gt;\n  &lt;div class=\"photo-box\"&gt;\n    &lt;%- photo_group.each do |photo| %&gt;\n      &lt;a href=\"&lt;%= user_photo_path(@user.username, photo.id) %&gt;\" class=\"photo-thumbnail\"&gt;\n        &lt;div class=\"photo-mini\"&gt;\n          &lt;%= image_tag photo.url %&gt;\n        &lt;/div&gt;\n      &lt;/a&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 39624963, "answer_count": 2, "score": 0, "last_activity_date": 1474491200, "creation_date": 1474485708, "last_edit_date": 1474487941, "question_id": 39624924, "link": "https://stackoverflow.com/questions/39624924/how-to-display-the-last-third-and-forth-photos-with-photo-last", "title": "How to display the last third and forth photos with `@photo.last()`", "body": "<p>On my user profile, I want to add 4 of the latest photos uploaded by that user. Originally, I had <code>&lt;%- @user.photos.last(4).each do |photo| %&gt;</code>. This code works, but it doesn't work with my layout. So I need one row that displays the last 2 photos, while the second row displays the last 3-4 photos.</p>\n\n<p>Here is what I came up with and the line <code>&lt;%- @user.photos.last(3,4).each do |photo| %&gt;</code> does not work. I've also tried <code>(3-4)</code></p>\n\n<pre><code>&lt;div class=\"photo-box\"&gt;\n  &lt;%- @user.photos.last(2).each do |photo| %&gt;\n    &lt;a href=\"&lt;%= user_photo_path(@user.username, photo.id) %&gt;\" class=\"photo-thumbnail\"&gt;\n      &lt;div class=\"photo-mini\"&gt;\n        &lt;%= image_tag photo.url %&gt;\n      &lt;/div&gt;\n    &lt;/a&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n\n&lt;div class=\"photo-box\"&gt;\n  &lt;%- @user.photos.last(3,4).each do |photo| %&gt;\n    &lt;a href=\"&lt;%= user_photo_path(@user.username, photo.id) %&gt;\" class=\"photo-thumbnail\"&gt;\n      &lt;div class=\"photo-mini\"&gt;\n        &lt;%= image_tag photo.url %&gt;\n      &lt;/div&gt;\n    &lt;/a&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "permutation"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1474484846, "post_id": 39624580, "comment_id": 66554583, "body": "<code>{ obj1, obj2, obj3 }</code> is not a valid object in Ruby"}, {"owner": {"reputation": 45, "user_id": 6782592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e6097cc0b919fc04b54fd591af91e2?s=128&d=identicon&r=PG&f=1", "display_name": "ackacky.bashmachckin", "link": "https://stackoverflow.com/users/6782592/ackacky-bashmachckin"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1474484912, "post_id": 39624580, "comment_id": 66554616, "body": "@AndreyDeineko, I know, I just used math notation for sets."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1474485586, "post_id": 39624580, "comment_id": 66554984, "body": "ackacky, there are two problems with the definition of <code>set</code>. @Andrey mentioned one. The second is that <code>obj1</code> (and the others) are either variables with unknown values or unspecified methods. For the purpose of the question you should make them literals, strings or symbols. You need to write, say, <code>require &#39;set&#39;; set = [:obj1, :obj2, :obj3].to_set #=&gt; #&lt;Set: {:obj1, :obj2, :obj3}&gt;</code> (or <code>Set.new [:obj1, :obj2, :obj3]</code>). You need to edit to fix that."}, {"owner": {"reputation": 45, "user_id": 6782592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e6097cc0b919fc04b54fd591af91e2?s=128&d=identicon&r=PG&f=1", "display_name": "ackacky.bashmachckin", "link": "https://stackoverflow.com/users/6782592/ackacky-bashmachckin"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474485958, "post_id": 39624580, "comment_id": 66555188, "body": "@CarySwoveland, I am sorry if question isn&#39;t clear, but permutation generation problem itself is described not as ruby problem. It&#39;s just abstract description of problem."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1474486620, "post_id": 39624580, "comment_id": 66555584, "body": "Please do not alter the question once comments or answers have been posted, but if you do, note that you have done so in your edit. Silent changes can render comments and answers incorrect or nonsensical."}], "answers": [{"comments": [{"owner": {"reputation": 45, "user_id": 6782592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e6097cc0b919fc04b54fd591af91e2?s=128&d=identicon&r=PG&f=1", "display_name": "ackacky.bashmachckin", "link": "https://stackoverflow.com/users/6782592/ackacky-bashmachckin"}, "edited": false, "score": 0, "creation_date": 1474485566, "post_id": 39624710, "comment_id": 66554967, "body": "so if <code>length=3</code>,<code>[1, 2, 1]</code> should be valid, but <code>permutation.uniq.one?</code> will return false"}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474485625, "post_id": 39624710, "comment_id": 66555004, "body": "it should return false, the <code>reject</code> method removes any element where the block returns true. So <code>[1,2,1]</code> will not be rejected."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 45, "user_id": 6782592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e6097cc0b919fc04b54fd591af91e2?s=128&d=identicon&r=PG&f=1", "display_name": "ackacky.bashmachckin", "link": "https://stackoverflow.com/users/6782592/ackacky-bashmachckin"}, "edited": false, "score": 0, "creation_date": 1474485664, "post_id": 39624710, "comment_id": 66555028, "body": "@ackacky.bashmachckin it will return <code>false</code>, because you asked to reject if all the same"}, {"owner": {"reputation": 45, "user_id": 6782592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e6097cc0b919fc04b54fd591af91e2?s=128&d=identicon&r=PG&f=1", "display_name": "ackacky.bashmachckin", "link": "https://stackoverflow.com/users/6782592/ackacky-bashmachckin"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474485810, "post_id": 39624710, "comment_id": 66555099, "body": "@davidhu2000, yes, you&#39;re right. the problem is that <code>[1, 1, 2]</code> <code>[1, 2, 2]</code> will not be rejected too."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474485910, "post_id": 39624710, "comment_id": 66555165, "body": "Are those supposed to be rejected? I thought you will only reject <code>[1,1,1]</code>?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 2, "creation_date": 1474485950, "post_id": 39624710, "comment_id": 66555185, "body": "This is the correct answer for a <b>generic</b> filter method. However, for the special case of only filtering the &quot;repeated values&quot;, you should just use <code>Array#permutation</code> - and then there&#39;s no need for any <code>Array#reject</code> stuff."}, {"owner": {"reputation": 45, "user_id": 6782592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e6097cc0b919fc04b54fd591af91e2?s=128&d=identicon&r=PG&f=1", "display_name": "ackacky.bashmachckin", "link": "https://stackoverflow.com/users/6782592/ackacky-bashmachckin"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1474486256, "post_id": 39624710, "comment_id": 66555360, "body": "@TomLord, no in this special case I need to filter permutations where two equals objects are one after another. For example, if <code>set = {&#39;a&#39;, &#39;b&#39;, &#39;c&#39;}</code> and <code>length=3</code> then we need to filter out <code>&quot;aab&quot;, &quot;abb&quot;, &quot;bba&quot;, ...</code> and not to filter out <code>&quot;aba&quot;</code>"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 45, "user_id": 6782592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e6097cc0b919fc04b54fd591af91e2?s=128&d=identicon&r=PG&f=1", "display_name": "ackacky.bashmachckin", "link": "https://stackoverflow.com/users/6782592/ackacky-bashmachckin"}, "edited": false, "score": 0, "creation_date": 1474486525, "post_id": 39624710, "comment_id": 66555527, "body": "@ackacky.bashmachckin so <code>&quot;aha&quot;</code> does not have consecutive letters, why to filter it?"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1474486543, "post_id": 39624710, "comment_id": 66555539, "body": "You did not make this at all clear in your question. Based on this <b>new</b> information, I can provide an answer below - but please try to explain the requirements better in future."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 2, "last_activity_date": 1474485010, "creation_date": 1474485010, "answer_id": 39624710, "question_id": 39624580, "link": "https://stackoverflow.com/questions/39624580/generate-a-filtered-subset-of-repeated-permutations-of-an-array-of-objects-with/39624710#39624710", "title": "Generate a filtered subset of repeated permutations of an array of objects (with given length k)", "body": "<p>Pass a block where you perform your \"filtering\". So to remove those with identical elements you'd go with:</p>\n\n<pre><code>a = [1,2,3]\na.repeated_permutation(2).reject { |permutation| permutation.uniq.one? }\n#=&gt; [[1, 2], [1, 3], [2, 1], [2, 3], [3, 1], [3, 2]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 3, "last_activity_date": 1474486948, "last_edit_date": 1474486948, "creation_date": 1474485557, "answer_id": 39624877, "question_id": 39624580, "link": "https://stackoverflow.com/questions/39624580/generate-a-filtered-subset-of-repeated-permutations-of-an-array-of-objects-with/39624877#39624877", "title": "Generate a filtered subset of repeated permutations of an array of objects (with given length k)", "body": "<p>If all you need is to remove any pairs that are the same obj, you can simply use the <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-permutation\" rel=\"nofollow\"><code>permutation</code></a> method.</p>\n\n<pre><code>arr = [1,2,3]\narr.permutation(2).to_a\n\n#=&gt;  [[1, 2], [1, 3], [2, 1], [2, 3], [3, 1], [3, 2]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 2, "last_activity_date": 1474488339, "last_edit_date": 1474488339, "creation_date": 1474487462, "answer_id": 39625392, "question_id": 39624580, "link": "https://stackoverflow.com/questions/39624580/generate-a-filtered-subset-of-repeated-permutations-of-an-array-of-objects-with/39625392#39625392", "title": "Generate a filtered subset of repeated permutations of an array of objects (with given length k)", "body": "<p>Given an arbitrary input array:</p>\n\n<pre><code>a = [1, 2, 3, 3, 4]\n</code></pre>\n\n<p>If you <em>only</em> wish to generate the unique permutations, then you can simply do:</p>\n\n<pre><code>a.uniq.permutation(2)\n</code></pre>\n\n<p>(<code>uniq</code> is not needed, if you know the initial array contains unique elements!)</p>\n\n<p>However, as a more general solution, you must do:</p>\n\n<pre><code>a.repeated_permutation(2).reject { |permutation| ** FILTER RULE GOES HERE ** }\n</code></pre>\n\n<p>So for example, if you wish to filter all results which do not have <strong>two consecutive repeated values</strong>, then you can do:</p>\n\n<pre><code>a.repeated_permutation(2).reject do |permutation|\n  permutation.each_cons(2).any? {|x, y| x == y}\nend\n</code></pre>\n\n<p>Taking this to the extreme, here is a generalised method:</p>\n\n<pre><code>def filtered_permutations(array, length)\n  array.repeated_permutation(length).reject{|permutation| yield(permutation)}\nend\n\n# Or, if you prefer:\n\ndef filtered_permutations(array, length, &amp;block)\n  array.repeated_permutation(length).reject(&amp;block)\nend\n\n# Usage:\n\na = [1, 2, 3, 3, 4]\n\nfiltered_permutations(a, 2) {|permutation| permutation.each_cons(2).any? {|x, y| x == y} }\n\n# Or, if you prefer:\nfiltered_permutations(a, 2) {|permutation| permutation.each_cons(2).any? {|consecutive| consecutive.uniq.one?} }\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 6782592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f2e6097cc0b919fc04b54fd591af91e2?s=128&d=identicon&r=PG&f=1", "display_name": "ackacky.bashmachckin", "link": "https://stackoverflow.com/users/6782592/ackacky-bashmachckin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 150, "favorite_count": 1, "accepted_answer_id": 39625392, "answer_count": 3, "score": 1, "last_activity_date": 1474488339, "creation_date": 1474484615, "last_edit_date": 1474485597, "question_id": 39624580, "link": "https://stackoverflow.com/questions/39624580/generate-a-filtered-subset-of-repeated-permutations-of-an-array-of-objects-with", "title": "Generate a filtered subset of repeated permutations of an array of objects (with given length k)", "body": "<p>I'm new to Ruby. I need to generate all combinations of objects based on a length. </p>\n\n<p>For example, <code>array = [obj1, obj2, obj3]</code>, <code>length = 2</code>, then combinations are:</p>\n\n<pre><code>[\n  [obj1, obj1],\n  [obj1, obj2],\n  [obj1, obj3],\n  # ...\n  [obj3, obj3]\n]\n</code></pre>\n\n<p>I know I can use <code>repeated_permutation</code> method for this problem, but I need also to be able to <strong>filter</strong> some permutations. For example, to filter out permutations where 2 identical objects are one after another, i.e. like this <code>[obj1, obj1]</code>.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 1771, "user_id": 1527705, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/c9492bbc620d46e96b5cc2efac5b1f54?s=128&d=identicon&r=PG", "display_name": "knrz", "link": "https://stackoverflow.com/users/1527705/knrz"}, "is_accepted": true, "score": 3, "last_activity_date": 1474484546, "creation_date": 1474484546, "answer_id": 39624557, "question_id": 39624480, "link": "https://stackoverflow.com/questions/39624480/how-to-return-intersecting-array-in-ruby-and-preserve-up-lowercase/39624557#39624557", "title": "How to return intersecting array in ruby and preserve up/lowercase?", "body": "<p>This'll get the intersection, but id doesn't exactly use the funky <code>&amp;</code> operator or sets.</p>\n\n<pre><code>def coffee(rest)\n  acceptable_coffee = [\"dark\", \"blend\", \"handsome\"]\n  rest.select { |name| acceptable_coffee.include? name.downcase }\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474512145, "post_id": 39625170, "comment_id": 66564005, "body": "You method won&#39;t work for <code>coffee([&quot;Dark&quot;])</code>, assuming it should return <code>[&quot;Dark&quot;]</code>."}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1474486661, "creation_date": 1474486661, "answer_id": 39625170, "question_id": 39624480, "link": "https://stackoverflow.com/questions/39624480/how-to-return-intersecting-array-in-ruby-and-preserve-up-lowercase/39625170#39625170", "title": "How to return intersecting array in ruby and preserve up/lowercase?", "body": "<p>This isn't the prettiest way, but you can do this to preserve the upper case.</p>\n\n<pre><code>def coffee(arr)\n  acceptable_coffee = [\"dark\", \"blend\", \"handsome\"]\n  good_coffee = (acceptable_coffee &amp; arr) + (arr &amp; acceptable_coffee.map(&amp;:upcase))\nend\n\ncoffee(arr1) #=&gt; [\"dark\", \"HANDSOME\"]\ncoffee(arr2) #=&gt; [\"dark\", \"BLEND\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1474490268, "last_edit_date": 1474490268, "creation_date": 1474487589, "answer_id": 39625427, "question_id": 39624480, "link": "https://stackoverflow.com/questions/39624480/how-to-return-intersecting-array-in-ruby-and-preserve-up-lowercase/39625427#39625427", "title": "How to return intersecting array in ruby and preserve up/lowercase?", "body": "<pre><code>def coffee(arr, acceptable)\n  r = /#{acceptable.join('|')}/i\n  arr.select { |s| s =~ r }\nend\n\nacceptable = [\"dark\", \"blend\", \"handsome\"]\n\ncoffee [\"dark\", \"decaf\", \"java\", \"HANDSOME\"], acceptable\n  #=&gt; [\"dark\", \"HANDSOME\"] \ncoffee [\"dark\", \"smooth\", \"BLEND\"], acceptable\n  #=&gt; [\"dark\", \"BLEND\"] \n</code></pre>\n\n<p>Note</p>\n\n<pre><code>r = /#{acceptable.join('|')}/i\n  #=&gt; /dark|blend|handsome/i\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1474502600, "creation_date": 1474502600, "answer_id": 39628248, "question_id": 39624480, "link": "https://stackoverflow.com/questions/39624480/how-to-return-intersecting-array-in-ruby-and-preserve-up-lowercase/39628248#39628248", "title": "How to return intersecting array in ruby and preserve up/lowercase?", "body": "<p>I always turn to regular expression when I want to select strings that match a pattern.</p>\n\n<pre><code>def coffee(arr)\n  acceptable_coffee = /\\A(?:dark|blend|handsome)\\z/i\n  good_coffee = arr.grep(acceptable_coffee)\nend\n\narr1 = [\"dark\", \"decaf\", \"java\", \"HANDSOME\"]\narr2 = [\"dark\", \"smooth\", \"BLEND\"]\n\ncoffee(arr1)  #=&gt; [\"dark\", \"HANDSOME\"]\ncoffee(arr2)  #=&gt; [\"dark\", \"BLEND\"]\n</code></pre>\n\n<p>Explain about the regexp <code>/\\A(?:dark|blend|handsome)\\z/i</code>:</p>\n\n<p><code>\\A</code> matches the beginning of a string (before the first character).<br>\n<code>(?:)</code> is a non-capture group, where I can put <code>|</code>.<br>\n<code>|</code> reads \"or\".<br>\n<code>\\z</code> matches the end of a string (after the last character).<br>\nThe trailing <code>i</code> outside <code>/.../</code> means ignore case.</p>\n"}], "owner": {"reputation": 4275, "user_id": 5739288, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/mRf6m.jpg?s=128&g=1", "display_name": "Iggy", "link": "https://stackoverflow.com/users/5739288/iggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 34, "favorite_count": 0, "accepted_answer_id": 39624557, "answer_count": 4, "score": 1, "last_activity_date": 1474502600, "creation_date": 1474484301, "question_id": 39624480, "link": "https://stackoverflow.com/questions/39624480/how-to-return-intersecting-array-in-ruby-and-preserve-up-lowercase", "title": "How to return intersecting array in ruby and preserve up/lowercase?", "body": "<p>I want to create a function that returns a list of array contained in another list of array. This is what I came up with:</p>\n\n<pre><code>def coffee(arr)\n  acceptable_coffee = [\"dark\", \"blend\", \"handsome\"]\n  good_coffee = acceptable_coffee &amp; arr.map{|n| n.downcase}\nend\n</code></pre>\n\n<p>Possible inputs may contain the elements in <code>acceptable_coffee</code>.Their case might not always be downcase, i.e.:</p>\n\n<pre><code>arr1 = [\"dark\", \"decaf\", \"java\", \"HANDSOME\"]\narr2 = [\"dark\", \"smooth\", \"BLEND\"]\n</code></pre>\n\n<p>I want the function to return the array that contains acceptable elements while preserving their up/downcase. The function then, should return:</p>\n\n<pre><code>coffee(arr1) #=&gt; [\"dark\", \"HANDSOME\"]\ncoffee(arr2) #=&gt; [\"dark\", \"BLEND\"]\n</code></pre>\n\n<p>Currently it is returning <code>[\"dark\", \"handsome\"]</code> and <code>[\"dark\", \"blend\"]</code>, respectively. If I don't do downcase, it won't intersect properly. How can I return the intersecting array while preserving the up/downcase? Don't worry about other edge cases. Assume the possible array inputs' elements are either completely uppercased/ completely lowercased, like the example.</p>\n"}, {"tags": ["ruby", "xpath", "web-scraping", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1474499504, "post_id": 39624398, "comment_id": 66561231, "body": "Rule #1: Don&#39;t rely on the output of the browser or a tool embedded in a browser to find the selector, or even the layout of the HTML. Browsers mess with the HTML. Instead, use <code>wget</code>, <code>curl</code> or <code>nokogiri</code> at the command line and look at it there to see exactly what Nokogiri sees. Odds are very good there&#39;s DHTML involved so what you want isn&#39;t in the page until the JavaScript interpreter loads it."}], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 6859951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de3baecffbd97862322270a53063ba86?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/6859951/j-doe"}, "edited": false, "score": 0, "creation_date": 1474547861, "post_id": 39627958, "comment_id": 66582193, "body": "thanks, that is very helpful"}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 0, "last_activity_date": 1474500126, "creation_date": 1474500126, "answer_id": 39627958, "question_id": 39624398, "link": "https://stackoverflow.com/questions/39624398/ruby-nokogiri-xpath-and-pgatour-com/39627958#39627958", "title": "ruby, nokogiri, xpath and pgatour.com", "body": "<p>It's <em>REALLY</em> important to first see if the HTML is static or dynamic. There are many ways to do so, but a very simple test is to use Nokogiri at the command line:</p>\n\n<pre><code>&gt;nokogiri 'http://www.pgatour.com/tournaments/safeway-open/past-results.html'\nYour document is stored in @doc...\nWelcome to NOKOGIRI. You are using ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]. Have fun ;)\n&gt;&gt; @doc.at('#pastResultsData')\n&lt;div id=\"pastResultsData\" class=\"clearfix module-tournament-past-results\"/&gt;\n</code></pre>\n\n<p>Looking for <code>#pastResultsData</code> will find any tag with that ID. The value returned shows the <code>&lt;div&gt;</code> tag is empty, which usually means it's waiting to be used as a container to be filled later by DHTML.</p>\n\n<p>And, at that point Nokogiri can't help you, you'll need to either retrieve the content then parse that, or use something that parses JavaScript.</p>\n"}], "owner": {"reputation": 23, "user_id": 6859951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/de3baecffbd97862322270a53063ba86?s=128&d=identicon&r=PG&f=1", "display_name": "J. Doe", "link": "https://stackoverflow.com/users/6859951/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 71, "favorite_count": 1, "closed_date": 1474500244, "accepted_answer_id": 39627958, "answer_count": 1, "score": 1, "last_activity_date": 1474500126, "creation_date": 1474483956, "last_edit_date": 1474484646, "question_id": 39624398, "link": "https://stackoverflow.com/questions/39624398/ruby-nokogiri-xpath-and-pgatour-com", "closed_reason": "Duplicate", "title": "ruby, nokogiri, xpath and pgatour.com", "body": "<p>I am trying to pull some historical data from pgatour.com using a ruby script, but I can't seem to get it to pull any data at all.</p>\n\n<p>I know this has been discussed before, but I've tried all the solutions that I've come across and coming up blank, so now I'm stripping everything down to the most basic thing I can think of to try to find out if it's me or the website.</p>\n\n<p>I am now just trying to grab one element of a table and then print it to the console</p>\n\n<p>To get the xpath, I opened up chrome developer tools, found a score in the table and right-clicked to copy Xpath and then just used that directly in the code, but still get nothing</p>\n\n<pre><code>require 'open-uri'\nrequire 'nokogiri'\n\nurl = \"http://www.pgatour.com/tournaments/safeway-open/past-results.html\"\nhtml = open(url)\ndoc = Nokogiri::HTML(html)\nputs doc.xpath('//*[@id=\"pastResultsData\"]/ul/li[1]/table/tbody/tr[2]/td[5]').text\n</code></pre>\n\n<p>Am I doing something wrong? or is the site structured so that a simple solution like what I've done above will not work?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "api", "environment-variables", "capistrano"], "comments": [{"owner": {"reputation": 1498, "user_id": 3719597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7bLC.jpg?s=128&g=1", "display_name": "ollpu", "link": "https://stackoverflow.com/users/3719597/ollpu"}, "edited": false, "score": 0, "creation_date": 1474483820, "post_id": 39624035, "comment_id": 66554042, "body": "I personally have opted to store secrets and such in files in a directory that is not included in the version-control system after experimenting with getting the environment variables to be properly propagated. Just be careful!"}, {"owner": {"reputation": 17539, "user_id": 512453, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/e0372e5193a1dd972857e7498cdd8643?s=128&d=identicon&r=PG", "display_name": "Teddy", "link": "https://stackoverflow.com/users/512453/teddy"}, "reply_to_user": {"reputation": 1498, "user_id": 3719597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7bLC.jpg?s=128&g=1", "display_name": "ollpu", "link": "https://stackoverflow.com/users/3719597/ollpu"}, "edited": false, "score": 0, "creation_date": 1474485081, "post_id": 39624035, "comment_id": 66554702, "body": "Checkout the dotenv gem, it basically does what @ollpu said to do.  <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">github.com/bkeepers/dotenv</a>"}, {"owner": {"reputation": 2121, "user_id": 1358592, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/ccb08bd4985792b43283b90df6dd24cd?s=128&d=identicon&r=PG", "display_name": "MeesterPatat", "link": "https://stackoverflow.com/users/1358592/meesterpatat"}, "reply_to_user": {"reputation": 1498, "user_id": 3719597, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/F7bLC.jpg?s=128&g=1", "display_name": "ollpu", "link": "https://stackoverflow.com/users/3719597/ollpu"}, "edited": false, "score": 0, "creation_date": 1474489692, "post_id": 39624035, "comment_id": 66557269, "body": "@ollpu: So basically adding the files manually to the rails dir after deploy? How do you read those files after you added them to the dir?"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1474494884, "post_id": 39624035, "comment_id": 66559885, "body": "Check the documentation for the server os. There almost always is a way to set ENV vars in a shell independent way."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1474495732, "post_id": 39624035, "comment_id": 66560190, "body": "For example you could add them to <code>&#47;etc&#47;rc.local</code> or <code>&#47;etc&#47;environments</code>. please tell what OS you are using on your server for detailed instructions."}, {"owner": {"reputation": 2121, "user_id": 1358592, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/ccb08bd4985792b43283b90df6dd24cd?s=128&d=identicon&r=PG", "display_name": "MeesterPatat", "link": "https://stackoverflow.com/users/1358592/meesterpatat"}, "reply_to_user": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "edited": false, "score": 0, "creation_date": 1474498110, "post_id": 39624035, "comment_id": 66560909, "body": "@max i&#39;m using centos 6.5"}], "answers": [{"comments": [{"owner": {"reputation": 2121, "user_id": 1358592, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/ccb08bd4985792b43283b90df6dd24cd?s=128&d=identicon&r=PG", "display_name": "MeesterPatat", "link": "https://stackoverflow.com/users/1358592/meesterpatat"}, "edited": false, "score": 0, "creation_date": 1474619224, "post_id": 39628182, "comment_id": 66614519, "body": "dotenv sounds good, but how do I test it locally before deploying?"}, {"owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "reply_to_user": {"reputation": 2121, "user_id": 1358592, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/ccb08bd4985792b43283b90df6dd24cd?s=128&d=identicon&r=PG", "display_name": "MeesterPatat", "link": "https://stackoverflow.com/users/1358592/meesterpatat"}, "edited": false, "score": 0, "creation_date": 1474693887, "post_id": 39628182, "comment_id": 66646530, "body": "dotenv works the same way locally. Just put KEY=value variables in <code>.env.development</code> in the root of your Rails project and then start the app normally with <code>rails server</code>. Those variables will be loaded and available through <code>ENV</code>. You might need to run <code>spring stop</code> first to guarantee a cold boot."}], "tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": false, "score": 22, "last_activity_date": 1474501972, "creation_date": 1474501972, "answer_id": 39628182, "question_id": 39624035, "link": "https://stackoverflow.com/questions/39624035/capistrano-and-api-keys-in-env-variables/39628182#39628182", "title": "Capistrano and API keys in ENV variables?", "body": "<p>There are a few ways that work well with Capistrano, in my experience.</p>\n\n<p><strong>rbenv-vars</strong></p>\n\n<p>If you use Ruby via Rbenv on your server, then you are in luck. There is a Rbenv plugin called <a href=\"https://github.com/rbenv/rbenv-vars\" rel=\"noreferrer\">rbenv-vars</a> that automatically injects environment variables into any Ruby process, which would include your Rails app. Just add your variables to <code>~/.rbenv/vars</code> on the server using <code>KEY=value</code> syntax. That's it.</p>\n\n<p><strong>dotenv</strong></p>\n\n<p>The <a href=\"https://github.com/bkeepers/dotenv\" rel=\"noreferrer\">dotenv</a> gem is a similar solution, but it works as a gem you add to your Rails app and doesn't require Rbenv or any other supporting tools. Add <code>dotenv-rails</code> to your Gemfile and deploy. Dotenv will automatically look for a <code>.env.production</code> file in the root of your Rails app. For Capistrano, create a <code>.env.production</code> file on the server inside Capistrano's <code>shared</code> directory, and then add <code>.env.production</code> to <code>:linked_files</code>. Now every deploy will link to it. Declare your variables using <code>KEY=value</code> syntax.</p>\n\n<p><strong>.bashrc</strong></p>\n\n<p>Declare your variables with <code>export KEY=value</code> syntax at very top of the <code>~/.bashrc</code> file on the server. On Ubuntu, this file is evaluated even during an non-interactive SSH session. Just make sure you place the declarations on the top, before this case statement:</p>\n\n<pre><code># If not running interactively, don't do anything\ncase $- in\n    *i*) ;;\n      *) return;;\nesac\n</code></pre>\n\n<p>CentOS may be a different story, so YMMV.</p>\n"}, {"tags": [], "owner": {"reputation": 6132, "user_id": 894209, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/37aeb9f5242f93cec35e98e464ed7424?s=128&d=identicon&r=PG", "display_name": "Itay Grudev", "link": "https://stackoverflow.com/users/894209/itay-grudev"}, "is_accepted": false, "score": 2, "last_activity_date": 1505503141, "creation_date": 1505503141, "answer_id": 46246223, "question_id": 39624035, "link": "https://stackoverflow.com/questions/39624035/capistrano-and-api-keys-in-env-variables/46246223#46246223", "title": "Capistrano and API keys in ENV variables?", "body": "<p>I made a Capistrano plugin <a href=\"https://github.com/itay-grudev/capistrano-env_config\" rel=\"nofollow noreferrer\"><code>capistrano-env_config</code></a> some time ago for managing and syncing environment variables across a Capistrano cluster which works by modifying the <code>/etc/environment</code> file to make environment variables available throughout the system. It's easy to use and is similar to how you can set environment variables with the Heroku toolbelt. Here are some examples:</p>\n\n<pre><code>cap env:list\ncap env:get[VARIABLE_NAME, VARIABLE_NAME, ...] \ncap env:unset[VARIABLE_NAME, VARIABLE_NAME, ...] \ncap env:set[VARIABLE_NAME=VALUE, VARIABLE_NAME=VALUE, ...] \ncap env:sync\n</code></pre>\n"}], "owner": {"reputation": 2121, "user_id": 1358592, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/ccb08bd4985792b43283b90df6dd24cd?s=128&d=identicon&r=PG", "display_name": "MeesterPatat", "link": "https://stackoverflow.com/users/1358592/meesterpatat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4110, "favorite_count": 2, "answer_count": 2, "score": 9, "last_activity_date": 1505503141, "creation_date": 1474482631, "question_id": 39624035, "link": "https://stackoverflow.com/questions/39624035/capistrano-and-api-keys-in-env-variables", "title": "Capistrano and API keys in ENV variables?", "body": "<p>I'm deploying my rails app with Capistrano. I want to save some API keys on the server as an environment variable. Those API keys should be accessible to my rails app that is deployed with Capistrano. Those API keys should also be accessible to a separate ruby file that is run as a daemon. </p>\n\n<p>setting the API keys in environment variables seems like the ideal solution, however, I can't access them in my rails app with <code>ENV[\"SOME_KEY\"]</code>. </p>\n\n<p>According to <a href=\"http://capistranorb.com/documentation/faq/why-does-something-work-in-my-ssh-session-but-not-in-capistrano/\" rel=\"noreferrer\">this post</a>, because capistrano runs as non interactive and non login, <code>~/.bashrc</code> and <code>~/.bash_profile</code> are not loaded. The flowchart suggests that I should use <code>$BASH_ENV</code>.</p>\n\n<p>Can I just add my api keys in <code>$BASH_ENV</code> and access them in my rails app and in the ruby file that is a daemon with <code>ENV[\"SOME_KEY\"]</code>?</p>\n\n<p>I'm also thinking of just adding the api keys to a file somewhere on the server and symlinking it to the ruby file dir and rails dir and just open and reading it. Would this be possible?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1474482168, "post_id": 39623833, "comment_id": 66553154, "body": "Fix the quotes, btw. Right now it&#39;s invalid ruby code and some people here <i>will</i> object :)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1474513678, "post_id": 39623833, "comment_id": 66564369, "body": "You followed @Sergio&#39;s advice to fix the quotes but you still have a mix of single and double quotes. That offends my sensibilities, so I object!"}], "answers": [{"comments": [{"owner": {"reputation": 291, "user_id": 1272163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ddb022bdcfd4e03c0a27fba3fde11160?s=128&d=identicon&r=PG", "display_name": "Caleb Sayre", "link": "https://stackoverflow.com/users/1272163/caleb-sayre"}, "edited": false, "score": 0, "creation_date": 1474483700, "post_id": 39623918, "comment_id": 66553972, "body": "argh... I might have made my example too simple... What if there was an id in the has as well, so that foo would be this:     <code>foo = [{id: 1, name: &#39;Eric Cartman&#39;, email: &#39;eric@southpark.com&#39;},        {id: 2, name: &#39;Eric Cartman&#39;, email: &#39;cartmanfamily@gmail.com&#39;},        {id: 3, name: &quot;Cartman&#39;s mom&quot;, email: &#39;cartmanfamily@gmail.com&#39;},        {id: 4, name: &#39;Eric Cartman&#39;, email: &#39;eric@southpark.com&#39;}]</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1474512835, "post_id": 39623918, "comment_id": 66564187, "body": "There&#39;s no need to announce edits in answers and the bold face is neither needed nor attractive. I suggest you simply rewrite your answer if you think of improvements or wish to implement suggestions made by others. Piling it onto to what you previously wrote is just a distraction. Write answers as you would a book or a blog, where revisions are normal."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6225298"}, "is_accepted": true, "score": 2, "last_activity_date": 1474528825, "last_edit_date": 1474528825, "creation_date": 1474482304, "answer_id": 39623918, "question_id": 39623833, "link": "https://stackoverflow.com/questions/39623833/how-to-use-uniq-with-hashes-for-unique-pairs/39623918#39623918", "title": "How to use .uniq with hashes for unique pairs?", "body": "<p><code>foo.uniq</code> should work just fine.\nSince </p>\n\n<pre><code>{name: \"cartman\", email: \"cartman@sp.com\"} == {name: \"cartman\", email: \"cartman@sp.com\"} # =&gt; True\n{name: \"stan\", email: \"stan@sp.com\"} == {name: \"cartman\", email: \"cartman@sp.com\"} # =&gt; False\n</code></pre>\n\n<p>The <code>==</code> operator check if every field of the hash have the same values. So <code>.uniq</code> will work how you want it to work!</p>\n\n<p>If there is more than only the email and name field you should use the <code>uniq</code> method with a block:</p>\n\n<pre><code>foo.uniq { |x| [x[:name], x[:email]] }\n</code></pre>\n\n<p>It will keep only the uniq combination of the name and email.</p>\n\n<p>Hope it helped, happy ruby coding!</p>\n"}, {"tags": [], "owner": {"reputation": 1548, "user_id": 1246279, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e2533d5a4299cad329268e552c47fa8d?s=128&d=identicon&r=PG", "display_name": "philomory", "link": "https://stackoverflow.com/users/1246279/philomory"}, "is_accepted": false, "score": 1, "last_activity_date": 1474486260, "creation_date": 1474486260, "answer_id": 39625077, "question_id": 39623833, "link": "https://stackoverflow.com/questions/39623833/how-to-use-uniq-with-hashes-for-unique-pairs/39625077#39625077", "title": "How to use .uniq with hashes for unique pairs?", "body": "<p><a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-i-uniq\" rel=\"nofollow\"><code>Array#uniq</code></a> takes a block:</p>\n\n<pre><code>foo = [{id: 1, name: 'Eric Cartman', email: 'eric@southpark.com'},\n       {id: 2, name: 'Eric Cartman', email: 'cartmanfamily@gmail.com'},\n       {id: 3, name: \"Cartman's mom\", email: 'cartmanfamily@gmail.com'},\n       {id: 4, name: 'Eric Cartman', email: 'eric@southpark.com'}]\n\nbar = foo.uniq {|h| [h[:name], h[:email]] }\n\nbar == [{id: 1, name: 'Eric Cartman', email: 'eric@southpark.com'},\n        {id: 2, name: 'Eric Cartman', email: 'cartmanfamily@gmail.com'},\n        {id: 3, name: \"Cartman's mom\", email: 'cartmanfamily@gmail.com'}] #=&gt; true\n</code></pre>\n\n<p>Per the documentation, \"If a block is given, it will use the return value of the block for comparison.\"</p>\n"}], "owner": {"reputation": 291, "user_id": 1272163, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/ddb022bdcfd4e03c0a27fba3fde11160?s=128&d=identicon&r=PG", "display_name": "Caleb Sayre", "link": "https://stackoverflow.com/users/1272163/caleb-sayre"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 0, "accepted_answer_id": 39623918, "answer_count": 2, "score": -1, "last_activity_date": 1474528825, "creation_date": 1474481970, "last_edit_date": 1474483884, "question_id": 39623833, "link": "https://stackoverflow.com/questions/39623833/how-to-use-uniq-with-hashes-for-unique-pairs", "title": "How to use .uniq with hashes for unique pairs?", "body": "<p>Lets say I have an array with several hashes of emails and names.  For example I have something like this:</p>\n\n<pre><code>foo = [{id: 1, name: 'Eric Cartman', email: 'eric@southpark.com'},\n       {id: 2, name: 'Eric Cartman', email: 'cartmanfamily@gmail.com'},\n       {id: 3, name: \"Cartman's mom\", email: 'cartmanfamily@gmail.com'},\n       {id: 4, name: 'Eric Cartman', email: 'eric@southpark.com'}]\n</code></pre>\n\n<p>How can I use <code>.uniq</code> to return unique values based on the combination of name and email?  For example I want to return something like this:</p>\n\n<pre><code>[{id: 1, name: 'Eric Cartman', email: 'eric@southpark.com'},\n{id: 2, name: 'Eric Cartman', email: 'cartmanfamily@gmail.com'},\n{id: 3, name: \"Cartman's mom\", email: 'cartmanfamily@gmail.com'}]\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra", "rubocop"], "answers": [{"tags": [], "owner": {"reputation": 359, "user_id": 2829355, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/befaF.png?s=128&g=1", "display_name": "skohrs", "link": "https://stackoverflow.com/users/2829355/skohrs"}, "is_accepted": false, "score": 0, "last_activity_date": 1474554972, "creation_date": 1474554972, "answer_id": 39642039, "question_id": 39623821, "link": "https://stackoverflow.com/questions/39623821/custom-rubocop-to-search-for-configurable-urls/39642039#39642039", "title": "Custom RuboCop to search for configurable URLs?", "body": "<p>Here's a solution which seems to work for now.  Hopefully, it helps someone else.</p>\n\n<p><strong>lib/rubocop/cop/acme/allowed_supermarkets.rb</strong></p>\n\n<pre><code># encoding: utf-8\n# frozen_string_literal: true\n\nrequire 'uri'\n\nmodule RuboCop\n  module Cop\n    module ACME\n      # This cop checks that only allowed supermarkets are used within Berksfiles.\n      #\n      # The default regexp for an acceptable allowed supermarkets can be found in\n      # config/default.yml.  The default can be changed in your .rubocop.yml as follows:\n      #\n      # ACME/AllowedSupermarkets:\n      #   Sources:\n      #     - 'https://supermarket.acme.com'\n      #     - 'https://supermarket.trusted.com'\n      #\n      class AllowedSupermarkets &lt; Cop\n        MSG = 'Only the use of authorized Chef Supermarkets are allowed.'.freeze\n\n        def investigate(processed_source)\n          processed_source.lines.each_with_index do |line, index|\n            next unless line.start_with?('source')\n\n            range = source_range(processed_source.buffer,\n                                 index + 1,\n                                 (line.rstrip.length)...(line.length))\n\n            add_offense(range, range, MSG) unless match_uri(line)\n          end\n        end\n\n        def match_uri(string)\n          string.match(uri_regexp) { |m| true if valid_uri?(m[0]) }\n        rescue\n          false\n        end\n\n        def valid_uri?(uri_ish_string)\n          URI.parse(uri_ish_string)\n          true\n        rescue\n          false\n        end\n\n        def uri_regexp\n          @regexp = Regexp.union(cop_config['Sources'])\n        end\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 359, "user_id": 2829355, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/befaF.png?s=128&g=1", "display_name": "skohrs", "link": "https://stackoverflow.com/users/2829355/skohrs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 74, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474554972, "creation_date": 1474481936, "last_edit_date": 1474547515, "question_id": 39623821, "link": "https://stackoverflow.com/questions/39623821/custom-rubocop-to-search-for-configurable-urls", "title": "Custom RuboCop to search for configurable URLs?", "body": "<p>I'm writing a custom RuboCop plugin to enforce specific URLs in a Berksfile.  I might have taken on more than my limited Ruby knowledge will support at this time.</p>\n\n<p>Here is some pseduo code.  Am I even close?</p>\n\n<p><strong>config/default.yml:</strong></p>\n\n<pre><code>ACME/ApprovedSupermarkets:\n  Description: 'Enforce the use of only authorized Chef Supermarkets.'\n  Enabled: true\n  Include:\n    - '**/Berksfile'\n  Severity: error\n  Sources:\n    - 'https://supermarket.acme.com'\n    - 'https://supermarket.trusted.com'\n</code></pre>\n\n<p><strong>lib/rubocop/cop/acme/approved_supermarkets.rb</strong></p>\n\n<pre><code># encoding: utf-8\n# frozen_string_literal: true\n\nrequire 'uri'\n\nmodule RuboCop\n  module Cop\n    module ACME\n      # This cop checks that only allowed supermarkets are used within Berksfiles.\n      class ApprovedSupermarkets &lt; Cop\n\n        MSG = 'Only the use of authorized Chef Supermarkets are allowed.'.freeze\n\n        def investigate(processed_source)\n          processed_source.lines.each_with_index do |line, index|\n            check_line(line, index)\n          end\n        end\n\n        def check_line(line, index)\n          return if match_uris(line)\n\n          add_offense(nil, index, MSG)\n        end\n\n        def match_uris(string)\n          matches = []\n          string.scan(uri_regexp) do\n            matches &lt;&lt; $LAST_MATCH_INFO if valid_uri?($LAST_MATCH_INFO[0])\n          end\n          matches\n        end\n\n        def valid_uri?(uri_ish_string)\n          URI.parse(uri_ish_string)\n          true\n        rescue\n          false\n        end\n\n        def uri_regexp\n          @regexp ||= URI.regexp(cop_config['Sources'])\n        end\n      end\n    end\n  end\nend\n</code></pre>\n\n<p><strong>spec/rubocop/cop/acme/approved_supermarkets_spec.rb:</strong></p>\n\n<pre><code># encoding: utf-8\n\nrequire 'spec_helper'\n\ndescribe Rubocop::Cop::ACME::ApprovedSupermarkets do\n  subject(:cop) { described_class.new }\n  let(:cop_config) { cop_config }\n\n  cop_config['Sources'].each do |source|\n    it 'accepts #{source} as an authorized supermarket' do\n      inspect_source(cop, \"source '#{source}'\")\n      expect(cop.offenses).to be_empty\n    end\n  end\nend\n</code></pre>\n\n<p><strong>Berksfile (which should fail)</strong></p>\n\n<pre><code>source 'https://supermarket.untrusted.com'\n\nmetadata\n</code></pre>\n\n<p>We'd like to write several other internal cops, which is why I chose to develop a RuboCop plugin vs. adding an issue to the RuboCop project.  Any help is appreciated.</p>\n"}, {"tags": ["ruby", "oauth", "rest-client"], "answers": [{"tags": [], "owner": {"reputation": 515, "user_id": 3981312, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ec2f8899cb31327d8ec61352fcd09f8?s=128&d=identicon&r=PG&f=1", "display_name": "mancocapac", "link": "https://stackoverflow.com/users/3981312/mancocapac"}, "is_accepted": false, "score": 1, "last_activity_date": 1474487874, "creation_date": 1474487874, "answer_id": 39625507, "question_id": 39623672, "link": "https://stackoverflow.com/questions/39623672/ruby-oauth-gem-hmac-sha1-401-invalid-signature/39625507#39625507", "title": "Ruby Oauth Gem HMAC-SHA1 401 Invalid Signature", "body": "<p>The problem was I incorrectly set the base url. I saw this: <a href=\"https://dev.twitter.com/oauth/overview/creating-signatures\" rel=\"nofollow\">Creating a signature</a> and </p>\n\n<blockquote>\n  <p>The base URL is the URL to which the request is directed, minus any query string or hash parameters. It is important to use the correct protocol here, so make sure that the \u201chttps://\u201d or \u201chttp://\u201d portion of the URL matches the actual request sent to the API. I adjusted my base_url accordingly</p>\n</blockquote>\n\n<pre><code>base_uri = 'http://dockerized-magento.local'\nbase_path = 'api/rest'\n\nbase_url = base_uri + '/' + base_path + '/customers'\n</code></pre>\n\n<p>and changed </p>\n\n<pre><code>     @consumer=OAuth::Consumer.new auth['consumer_key'],\n                           auth['consumer_secret'],\n                           {:site=&gt; base_url}\n</code></pre>\n\n<p>I am updating the code above for clarity.</p>\n"}], "owner": {"reputation": 515, "user_id": 3981312, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/6ec2f8899cb31327d8ec61352fcd09f8?s=128&d=identicon&r=PG&f=1", "display_name": "mancocapac", "link": "https://stackoverflow.com/users/3981312/mancocapac"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 576, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474488818, "creation_date": 1474481380, "last_edit_date": 1474488818, "question_id": 39623672, "link": "https://stackoverflow.com/questions/39623672/ruby-oauth-gem-hmac-sha1-401-invalid-signature", "title": "Ruby Oauth Gem HMAC-SHA1 401 Invalid Signature", "body": "<p>I'm using rest-client with oauth, the oauth headers are getting generated, but the hmac-sha1 signature is invalid.</p>\n\n<p>The server doesn't accept signature encoding, returns 401 oauth_problem signature_invalid. </p>\n\n<pre><code>oauth_signature=\"9aOk2oM2%2FczpqHBJ95MhcF%2Bp6XU%3D\",  \noauth_signature_method=\"HMAC-SHA1\"\n</code></pre>\n\n<p>Running in Postman with \"Encode OAuth signature\" un-selected works fine.\nPostman gives same 401 invalid signature when this option is turned on.</p>\n\n<p>Is this encoding the problem, is there a similar option for oauth gem and how can I set it?</p>\n\n<pre><code>require 'rubygems'\n\nrequire 'oauth'\nrequire 'rest-client'\n\n# auth keys read in from file\nbase_uri = 'http://dockerized-magento.local'\nbase_path = 'api/rest'\nbase_url = base_uri + '/' + base_path + '/customers'   # the fix\n\n @consumer=OAuth::Consumer.new auth['consumer_key'],\n                               auth['consumer_secret'],\n                               {:site =&gt; base_url }      # the fix\n # this was the error\n #                              {:site=&gt; base_uri + base_path}\n\n# Create the access_token for all traffic\naccess_token = OAuth::AccessToken.new(@consumer, \n                                      auth['token'], auth['token_secret'])\n\nRestClient.add_before_execution_proc do |req, params|\n  access_token.sign! req\nend\n\nresponse = RestClient::Request.execute(method: :get, url: url, \n                                       timeout: 60, \n                                       headers: {'Cache-Control' =&gt; 'no-cache'})\n</code></pre>\n\n<p>rest-client 2.0 with oauth gem 0.5.1., ruby 2.2.2, not using ruby-on-rails</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474480711, "post_id": 39623457, "comment_id": 66552417, "body": "Here&#39;s a hint: <code>30.minutes.to_i</code> returns <code>1800</code>. (remove <code>to_i</code> to find the explanation)"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474481791, "post_id": 39623457, "comment_id": 66552948, "body": "well <code>to_i</code> doesnt do much when i remove it. It erases the decimal part of the difference between the two dates. Though the <code>minutes</code> seems to be a valid Ruby method but not related to Time, that&#39;s why I guess my result is all messed up. I have found <code>to_f</code> which  instead returns the number of seconds I can then divide by 60 : <code>(date1-date2).to_f&#47;60</code> . I still have a discrepancy but I guess it&#39;s because of one being UTC and the other +0200. will try to fix it .."}], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1474482303, "post_id": 39623854, "comment_id": 66553213, "body": "thanks you are correct. I applied  <code>to_f</code> to the result but redondant. Actually I had a time zone discrepancy too. the following works : <code>(date1.utc-date2.utc)&#47;60</code>"}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user6225298"}, "is_accepted": true, "score": 2, "last_activity_date": 1474482043, "creation_date": 1474482043, "answer_id": 39623854, "question_id": 39623457, "link": "https://stackoverflow.com/questions/39623457/date-substraction-returning-odd-value/39623854#39623854", "title": "Date substraction returning odd value", "body": "<p>The <code>.minutes</code> is what makes the thing don't work. Remove it and it should work.\nIf you want to find the gap in minutes between to date you just have to substract them, divide the result per 60 and round it.</p>\n\n<pre><code>((date1 - date2) / 60).round\n</code></pre>\n\n<p>Hope it helped, happy ruby coding!</p>\n"}, {"comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1474485010, "post_id": 39624408, "comment_id": 66554672, "body": "indeed. this is the answer I use. I leave the right answer with Gregory as it is very close and mark yours as useful. tks"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1474485056, "post_id": 39624408, "comment_id": 66554697, "body": "I thought <code>time1</code> was a better name for a <code>Time</code> object than <code>date1</code>. :-)"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1474485194, "post_id": 39624408, "comment_id": 66554762, "body": "well I use neither. in my code, one is a raw <code>Time.now.utc</code> and the other is a call to created_at on the very record. Tried to make it simple ^^"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1474484031, "creation_date": 1474484031, "answer_id": 39624408, "question_id": 39623457, "link": "https://stackoverflow.com/questions/39623457/date-substraction-returning-odd-value/39624408#39624408", "title": "Date substraction returning odd value", "body": "<p>You need to first convert the local time (<code>time1</code>) to UTC time, or UTC time (<code>time2</code>) to local time.</p>\n\n<pre><code>require 'time'\n\ntime1 = Time.parse('2016-09-21 19:44:52 +0200')\n  #=&gt; 2016-09-21 19:44:52 +0200 \ntime2 = Time.parse('2016-09-21 17:23:16 UTC')\n  #=&gt; 2016-09-21 17:23:16 UTC \n\n(time1.utc - time2)/60\n  #=&gt; 21.6\n</code></pre>\n"}], "owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 39623854, "answer_count": 2, "score": 0, "last_activity_date": 1474484031, "creation_date": 1474480566, "question_id": 39623457, "link": "https://stackoverflow.com/questions/39623457/date-substraction-returning-odd-value", "title": "Date substraction returning odd value", "body": "<p>I am trying to allow the destruction of a record only if this record has been created within the last 30 minutes. </p>\n\n<p>Then I retrieve the <code>created_at</code> value of my record (date2) and check against <code>Time.now</code> (date1) :</p>\n\n<pre><code>date1 = 2016-09-21 19:44:52 +0200\ndate2 = 2016-09-21 17:23:16 UTC\n</code></pre>\n\n<p>then I just substract the two : </p>\n\n<pre><code>(date1-date2).minutes.to_i\n</code></pre>\n\n<p>But the result returned is in the 10s of thousands (something like 97000) and increasing very fast when i refresh..(as <code>Time.now</code> changes)  <strong>whereas we should only get 141 minutes</strong> as per above example values</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 4943, "user_id": 454176, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/c030J.jpg?s=128&g=1", "display_name": "Sean", "link": "https://stackoverflow.com/users/454176/sean"}, "edited": false, "score": 1, "creation_date": 1474518324, "post_id": 39623372, "comment_id": 66565499, "body": "You deserve some bonus points for thinking in C but writing in Ruby! However, doing so in Ruby can often lead to horribly inefficient code. Instead, whenever possible, use the built-in functional-programming-esque methods like <code>map</code>, <code>inject</code>, <code>tap</code>, and <code>select</code>. All of those methods are implemented in C, so the interpreter has significantly less to do when performing your algorithm."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1474483240, "last_edit_date": 1474483240, "creation_date": 1474482913, "answer_id": 39624116, "question_id": 39623372, "link": "https://stackoverflow.com/questions/39623372/return-first-and-last-element-in-sequences/39624116#39624116", "title": "Return first and last element in sequences", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-chunk_while\" rel=\"nofollow\"><code>chunk_while</code></a> to find consecutive numbers: (this is also an example in the docs)</p>\n\n<pre><code>sequences.chunk_while { |i, j| i + 1 == j }.to_a\n#=&gt; [[2, 3, 4], [7], [12, 13, 14, 15]]\n</code></pre>\n\n<p>And <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>map</code></a> along with <a href=\"http://ruby-doc.org/core-2.3.1/Array.html#method-i-values_at\" rel=\"nofollow\"><code>values_at</code></a> to extract each sub-array's first and last element:</p>\n\n<pre><code>sequences.chunk_while { |i, j| i + 1 == j }.map { |a| a.values_at(0, -1) }\n#=&gt; [[2, 4], [7, 7], [12, 15]]\n</code></pre>\n\n<p>Or more verbose:</p>\n\n<pre><code>....map { |a| [a.first, a.last] }\n</code></pre>\n"}], "owner": {"reputation": 25043, "user_id": 1417223, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/dbdfe3d2d5f87f172757ada1438f3d16?s=128&d=identicon&r=PG", "display_name": "Fellow Stranger", "link": "https://stackoverflow.com/users/1417223/fellow-stranger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 283, "favorite_count": 0, "accepted_answer_id": 39624116, "answer_count": 1, "score": 2, "last_activity_date": 1474483240, "creation_date": 1474480258, "question_id": 39623372, "link": "https://stackoverflow.com/questions/39623372/return-first-and-last-element-in-sequences", "title": "Return first and last element in sequences", "body": "<p>I have an array that consists of concatenated sets of incremental (+1) sequences. Here's an example with three sequences:</p>\n\n<pre><code>sequences = [2,3,4,7,12,13,14,15]\n</code></pre>\n\n<p>I'm trying to get first and last element of each sequence and return an array with those values. From the array above, the result should look like this:  </p>\n\n<pre><code>[[2,4][7,7][12,15]]  \n</code></pre>\n\n<p>I've come up with this pretty naive solution that I thought would work, but it only returns the first sequence. Any idea why? And/or any suggestion of a better solution in whole?</p>\n\n<pre><code>new_array   = []\nstart_point = sequences[0]\nend_point   = sequences[0]\n\nsequences.map do |element|\n  if element == end_point + 1\n    end_point = element\n  elsif element == end_point\n    next\n  else\n    new_array &lt;&lt; [start_point, end_point]\n    startpoint   = element\n    end_point = element\n  end\nend\nreturn new_array\n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "ruby-on-rails-4", "sass"], "answers": [{"comments": [{"owner": {"reputation": 159, "user_id": 6789165, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2390e9333ab37c397ce2b94840de5864?s=128&d=identicon&r=PG&f=1", "display_name": "Gugubaight", "link": "https://stackoverflow.com/users/6789165/gugubaight"}, "edited": false, "score": 0, "creation_date": 1474481892, "post_id": 39623587, "comment_id": 66553006, "body": "Thanks! How am I able to do that within haml? This does not work: <code>#head{:style =&gt; &quot;background-image: url(&#39;cover.png&#39;);&quot;}</code>"}, {"owner": {"reputation": 1147, "user_id": 920852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3aefbb92ea1ab4baa971e04ac926302?s=128&d=identicon&r=PG", "display_name": "kylekeesling", "link": "https://stackoverflow.com/users/920852/kylekeesling"}, "reply_to_user": {"reputation": 159, "user_id": 6789165, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2390e9333ab37c397ce2b94840de5864?s=128&d=identicon&r=PG&f=1", "display_name": "Gugubaight", "link": "https://stackoverflow.com/users/6789165/gugubaight"}, "edited": false, "score": 0, "creation_date": 1474486361, "post_id": 39623587, "comment_id": 66555432, "body": "I don&#39;t use HAML but it looks like you are setting a style tag on the header element, which isn&#39;t right. My example set an inline style on the body tag. Also you may need to use !important on the inline style in order to get it to override your default style."}, {"owner": {"reputation": 159, "user_id": 6789165, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2390e9333ab37c397ce2b94840de5864?s=128&d=identicon&r=PG&f=1", "display_name": "Gugubaight", "link": "https://stackoverflow.com/users/6789165/gugubaight"}, "edited": false, "score": 0, "creation_date": 1474488425, "post_id": 39623587, "comment_id": 66556552, "body": "Hmm.. This is nod an header element, just a div I gave that id to. I have removed that default state from my css, so currently I get just a whit background."}, {"owner": {"reputation": 159, "user_id": 6789165, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2390e9333ab37c397ce2b94840de5864?s=128&d=identicon&r=PG&f=1", "display_name": "Gugubaight", "link": "https://stackoverflow.com/users/6789165/gugubaight"}, "edited": false, "score": 1, "creation_date": 1474572043, "post_id": 39623587, "comment_id": 66597791, "body": "I fixed it by implementing it as <code>image_tag</code> and styled it to look like a background. Thanks for your help :)"}], "tags": [], "owner": {"reputation": 1147, "user_id": 920852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3aefbb92ea1ab4baa971e04ac926302?s=128&d=identicon&r=PG", "display_name": "kylekeesling", "link": "https://stackoverflow.com/users/920852/kylekeesling"}, "is_accepted": false, "score": 3, "last_activity_date": 1585745727, "last_edit_date": 1585745727, "creation_date": 1474481064, "answer_id": 39623587, "question_id": 39623334, "link": "https://stackoverflow.com/questions/39623334/rails-4-how-to-access-database-in-scss/39623587#39623587", "title": "Rails 4: How to access database in SCSS", "body": "<p>It's not possible as far as I know to have your SCSS file access dynamic data like models, current_user information, etc, you can really only render static ruby code.</p>\n\n<p>That said you could add some code to your layout file, or create a custom one for these pages, that checks to see if the item has uploaded a custom image and change it there, with inline styling/CSS.</p>\n\n<p>Something like:</p>\n\n<pre><code>&lt;% if @item.cover_filename.url.exists? %&gt;\n  &lt;body style=\"background-image: url('&lt;%= @item.cover_filename.url) %&gt;');\"&gt;\n&lt;% else %&gt;\n  &lt;body&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 159, "user_id": 6789165, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/2390e9333ab37c397ce2b94840de5864?s=128&d=identicon&r=PG&f=1", "display_name": "Gugubaight", "link": "https://stackoverflow.com/users/6789165/gugubaight"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1585745727, "creation_date": 1474480153, "question_id": 39623334, "link": "https://stackoverflow.com/questions/39623334/rails-4-how-to-access-database-in-scss", "title": "Rails 4: How to access database in SCSS", "body": "<p>I have implemented a CarrierWave Uploader into my Rails Project. Now I want to set the uploaded file as background within my SCSS File.</p>\n\n<p>That way I access the image in haml:</p>\n\n<pre><code>= image_tag @item.cover_filename.url\n</code></pre>\n\n<p>And this is my SCSS:</p>\n\n<pre><code>#head {\n    background-image: url('cover.png'); /* change this from my current placeholder to the uploaded file. */\n    background-size: cover;\n    background-repeat: no-repeat;\n    background-position: center center;\n}\n</code></pre>\n\n<p>Thanks in advance for any help! Please tell me if you need additional information.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "chef-infra", "chef-recipe", "cookbook"], "answers": [{"tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1474478397, "creation_date": 1474478397, "answer_id": 39622826, "question_id": 39622701, "link": "https://stackoverflow.com/questions/39622701/how-to-remove-or-delete-a-service-using-service-resource-within-chef/39622826#39622826", "title": "How to remove or delete a service using &#39;service resource&#39; within Chef?", "body": "<p>This is not something Chef has an abstraction for. Service frameworks are very widely varying in how a \"remove\" action would work so coming up with a \"smallest common API\" would be tricky. My <code>poise_service</code> resource does manage the underlying files but it can only remove a service it created generally speaking.</p>\n"}, {"comments": [{"owner": {"reputation": 12486, "user_id": 5640649, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/ab190da855988ffae29d287c7d55ebbe?s=128&d=identicon&r=PG", "display_name": "lealceldeiro", "link": "https://stackoverflow.com/users/5640649/lealceldeiro"}, "edited": false, "score": 0, "creation_date": 1487894314, "post_id": 42427889, "comment_id": 72002386, "body": "you should try always to avoid using links for answering the questions, since links break on time. You should try to quote the most relevant part of the content shown on the link you mentioned."}], "tags": [], "owner": {"reputation": 13, "user_id": 6702390, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/126366400067978ea988cbf40296165b?s=128&d=identicon&r=PG&f=1", "display_name": "Teloric", "link": "https://stackoverflow.com/users/6702390/teloric"}, "is_accepted": false, "score": 0, "last_activity_date": 1487891173, "creation_date": 1487891173, "answer_id": 42427889, "question_id": 39622701, "link": "https://stackoverflow.com/questions/39622701/how-to-remove-or-delete-a-service-using-service-resource-within-chef/42427889#42427889", "title": "How to remove or delete a service using &#39;service resource&#39; within Chef?", "body": "<p>I believe the best you would be able to do is stop/disable the service and then use a package declaration to remove it.</p>\n\n<p><a href=\"https://docs.chef.io/resource_package.html\" rel=\"nofollow noreferrer\">https://docs.chef.io/resource_package.html</a></p>\n\n<p>probably :remove or :purge depending on if you want to kill config files also.</p>\n"}], "owner": {"reputation": 8777, "user_id": 5632400, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/dd1581444277a110a7b803f5ab4e4d14?s=128&d=identicon&r=PG&f=1", "display_name": "meallhour", "link": "https://stackoverflow.com/users/5632400/meallhour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 866, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1487891173, "creation_date": 1474478035, "question_id": 39622701, "link": "https://stackoverflow.com/questions/39622701/how-to-remove-or-delete-a-service-using-service-resource-within-chef", "title": "How to remove or delete a service using &#39;service resource&#39; within Chef?", "body": "<p>I am using the <code>service resource</code> as below:</p>\n\n<pre><code>service \"chef-client\" do\n  service_name \"chef-client\"\n  action [ :stop, :disable ]\nend\n</code></pre>\n\n<p>However, instead of disabling the service <code>I want to remove or delete the service.</code></p>\n"}, {"tags": ["ruby", "inheritance", "error-handling", "custom-error-handling", "airbrake"], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 4885544, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-H0p6asvUOZI/AAAAAAAAAAI/AAAAAAAAAM4/FJqaX7xIMtQ/photo.jpg?sz=128", "display_name": "sclem72", "link": "https://stackoverflow.com/users/4885544/sclem72"}, "edited": false, "score": 0, "creation_date": 1474487870, "post_id": 39623102, "comment_id": 66556259, "body": "Thanks! I will try this out. I understand that you never want to rescue an Exception. But I am running an application that does one thing, and that one thing is to collect data through a pipeline system (implemented with fibers/threads). Once one worker is fired, it fires hundreds of jobs simultaneously, and with it being a sidekiq execution, I am not notified of collections that didn&#39;t happen. I don&#39;t necessarily want it to throw an exception because I want to keep the workers running. When you say &quot;So sidekiq does his job,&quot; do you mean let him keep retrying jobs?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 366, "user_id": 4885544, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-H0p6asvUOZI/AAAAAAAAAAI/AAAAAAAAAM4/FJqaX7xIMtQ/photo.jpg?sz=128", "display_name": "sclem72", "link": "https://stackoverflow.com/users/4885544/sclem72"}, "edited": false, "score": 0, "creation_date": 1474488493, "post_id": 39623102, "comment_id": 66556582, "body": "\u2018When you say &quot;So sidekiq does his job,&quot; do you mean let him keep retrying jobs?\u2019\u2014Yes. Sidekiq will either retry or silently skip retries depending on <code>retry: true|false</code> parameter specified in <code>Worker</code> implementation. BTW, rescueing <code>Exception</code> makes not much sense, since <code>OutOfMemory</code> and other <code>Exception</code> are not handable in general."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1474479418, "creation_date": 1474479418, "answer_id": 39623102, "question_id": 39621603, "link": "https://stackoverflow.com/questions/39621603/ruby-error-handling-rescuing-exceptions-in-subclasses/39623102#39623102", "title": "Ruby error handling: Rescuing Exceptions in Subclasses", "body": "<p>There is a bottleneck in <code>Sidekiq</code> that basically executes everything: <a href=\"https://github.com/mperham/sidekiq/blob/be3073afc3926575be0984fa671eb92325066e93/lib/sidekiq/processor.rb#L154\" rel=\"nofollow\"><code>Sidekiq::Processor#execute_job</code></a>, that receives two arguments <code>(worker, cloned_args)</code> and subsequently calls <code>worker.perform(*cloned_args)</code>. So, for your purpose I would go with prepending the module to it:</p>\n\n<pre><code>Sidekiq::Processor.prepend(Module.new do\n  def execute_job(worker, cloned_args)\n    super # CALL ORIGINAL\n  rescue =&gt; e # NEVER RESCUE FROM EXCEPTION!!!\n    Airbrake.notify(e) # NOTIFY\n    raise e # RE-RAISE SO SIDEKIQ DOES HIS JOB\n  end\nend)\n</code></pre>\n\n<p>Call this before your first job and you are done: all errors, happened during Sidekiq\u2019s calling workers are now airbraked.</p>\n\n<p>Hope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 366, "user_id": 4885544, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-H0p6asvUOZI/AAAAAAAAAAI/AAAAAAAAAM4/FJqaX7xIMtQ/photo.jpg?sz=128", "display_name": "sclem72", "link": "https://stackoverflow.com/users/4885544/sclem72"}, "edited": false, "score": 1, "creation_date": 1474494743, "post_id": 39626596, "comment_id": 66559820, "body": "Hey Devon! Long time no see, hope all is well! That&#39;s awesome, I&#39;m going to look into this!"}], "tags": [], "owner": {"reputation": 151, "user_id": 3877936, "user_type": "registered", "profile_image": "https://graph.facebook.com/1257280585/picture?type=large", "display_name": "Devon C. Estes", "link": "https://stackoverflow.com/users/3877936/devon-c-estes"}, "is_accepted": false, "score": 0, "last_activity_date": 1474491979, "creation_date": 1474491979, "answer_id": 39626596, "question_id": 39621603, "link": "https://stackoverflow.com/questions/39621603/ruby-error-handling-rescuing-exceptions-in-subclasses/39626596#39626596", "title": "Ruby error handling: Rescuing Exceptions in Subclasses", "body": "<p>I use a similar construct to alert me to failures in some chron jobs and ping a slack channel, but the good part is it doesn't require inheritance! A naive version of that would look something like this:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class AirbrakeNotifier\n  def safe_run\n    yield\n  rescue StandardError =&gt; e\n    log_error(e)\n    raise e\n  end\n\n  private\n\n  def log_error(e)\n    # do your logging here\n  end\nend\n</code></pre>\n\n<p>And then your workers would look something like this:</p>\n\n<pre><code>class AmazonAdapter\n  include Sidekiq::Worker\n\n  def perform(id)\n    AirbrakeNotifier.new.safe_run { get_results_from_api(id) }\n  end\nend\n</code></pre>\n\n<p>This gives you much more flexibility to configure logging in different ways that you want per class, per process, or really however you can think!</p>\n"}], "owner": {"reputation": 366, "user_id": 4885544, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh5.googleusercontent.com/-H0p6asvUOZI/AAAAAAAAAAI/AAAAAAAAAM4/FJqaX7xIMtQ/photo.jpg?sz=128", "display_name": "sclem72", "link": "https://stackoverflow.com/users/4885544/sclem72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1014, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1474491979, "creation_date": 1474474321, "question_id": 39621603, "link": "https://stackoverflow.com/questions/39621603/ruby-error-handling-rescuing-exceptions-in-subclasses", "title": "Ruby error handling: Rescuing Exceptions in Subclasses", "body": "<p>I have a collection of Adpapter classes that connect to various APIs and what not. Here is a simple, general example of how each adapter is set up:</p>\n\n<pre><code>class AmazonAdapter\n    include Sidekiq::Worker\n    def perform(id)\n        get_results_from_api(id)\n    end\nend\n\nclass WalmartAdapter\n    include Sidekiq::Worker\n    def perform(id)\n        get_results_from_api(id)\n    end\nend\n</code></pre>\n\n<p>So generally, by calling <code>AmazonAdapter.new(500)</code>, it is going to connect to the API and return results subject to what you pass in as the ID. This is all part of a Sidekiq collection process and run as a background job, so it won't necessarily throw obvious exceptions or errors to alert me when something went wrong.</p>\n\n<p>I would like to use AirBrake's notification system to notify me when the API's don't connect properly or if any other errors were thrown, but without stopping the collection process or sidekiq. I was hoping to mainstream the error handling and notification system.</p>\n\n<p>Some thoughts I have are to create a ParentClass that the subclasses can inherit from that looks something similar to this:</p>\n\n<pre><code>class Adapter\n    include Sidekiq::Worker\n    def perform(id)\n        begin\n            #execute subclass perform method\n        rescue Exception =&gt; e\n            Airbrake.notify(e)\n        end\n    end\nend\n</code></pre>\n\n<p>But I am not really sure on the best way to go about this. I could really use some advice or help on this one, Thanks!</p>\n"}, {"tags": ["ruby", "multithreading", "sass", "compass-sass", "compass"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1474473377, "post_id": 39621269, "comment_id": 66548286, "body": "<i>&quot;each thread will run on the same arg value&quot;</i> -- I don&#39;t see why that would happen; your code looks fine to me. How are you running the script? (What command do you type into the console?)"}, {"owner": {"reputation": 63, "user_id": 6440953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RVQHD.jpg?s=128&g=1", "display_name": "Octavian Fedorovici", "link": "https://stackoverflow.com/users/6440953/octavian-fedorovici"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1474473582, "post_id": 39621269, "comment_id": 66548437, "body": "I edited the question to include my java callback in Ant which is used to call the ruby script"}, {"owner": {"reputation": 63, "user_id": 6440953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RVQHD.jpg?s=128&g=1", "display_name": "Octavian Fedorovici", "link": "https://stackoverflow.com/users/6440953/octavian-fedorovici"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1474474154, "post_id": 39621269, "comment_id": 66548779, "body": "it is weird because if I just do a &quot;print arg&quot; inside the thread, that works fine, which makes me think the problem is coming from the Compass::Exec::SubCommandUIs running in parallel."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1474474545, "post_id": 39621269, "comment_id": 66549010, "body": "What does <code>ARGV</code> <i>actually</i> equal? Is it <code>[&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]</code>, or <code>[&quot;arg1 arg2 arg3&quot;]</code>? Use <code>p ARGV</code>, or <code>puts ARGV.inspect</code> to see. My <i>suspicion</i> is that <code>&lt;arg line=&quot;...&quot;</code> is cramming everything into a single argument, but I cannot say without more information."}, {"owner": {"reputation": 63, "user_id": 6440953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RVQHD.jpg?s=128&g=1", "display_name": "Octavian Fedorovici", "link": "https://stackoverflow.com/users/6440953/octavian-fedorovici"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1474475037, "post_id": 39621269, "comment_id": 66549302, "body": "I tried <code>p ARGV</code> and <code>puts ARGV.inspect</code> and they both output <code>[&quot;arg1&quot;, &quot;arg2&quot;, &quot;arg3&quot;]</code>"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1474475814, "post_id": 39621269, "comment_id": 66549738, "body": "OK, then going back to my original point: <i>&quot;each thread will run on the same arg value&quot;</i> - I don&#39;t know what you mean. The <code>each</code> loop should go through each item in that array. Can you produce a minimal example that reproduces your issue?"}], "answers": [{"comments": [{"owner": {"reputation": 63, "user_id": 6440953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RVQHD.jpg?s=128&g=1", "display_name": "Octavian Fedorovici", "link": "https://stackoverflow.com/users/6440953/octavian-fedorovici"}, "edited": false, "score": 0, "creation_date": 1474532401, "post_id": 39625816, "comment_id": 66572096, "body": "Thanks for the answer, they both output the arguments as expected. It must be the <b>Compass::Exec::SubCommandUI</b> that is actually not thread safe."}, {"owner": {"reputation": 63, "user_id": 6440953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RVQHD.jpg?s=128&g=1", "display_name": "Octavian Fedorovici", "link": "https://stackoverflow.com/users/6440953/octavian-fedorovici"}, "edited": false, "score": 0, "creation_date": 1474537605, "post_id": 39625816, "comment_id": 66575387, "body": "I actually solved my problem with <code>sleep 1</code> added outside the <code>Thread.new</code> in the args iteration loop..."}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "reply_to_user": {"reputation": 63, "user_id": 6440953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RVQHD.jpg?s=128&g=1", "display_name": "Octavian Fedorovici", "link": "https://stackoverflow.com/users/6440953/octavian-fedorovici"}, "edited": false, "score": 0, "creation_date": 1474712529, "post_id": 39625816, "comment_id": 66650908, "body": "I don&#39;t think that this is a proper solution to the error you are seeing."}], "tags": [], "owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "is_accepted": true, "score": 0, "last_activity_date": 1474488934, "creation_date": 1474488934, "answer_id": 39625816, "question_id": 39621269, "link": "https://stackoverflow.com/questions/39621269/how-do-you-iterate-over-argv-and-create-a-thread-for-each-value-in-the-array-in/39625816#39625816", "title": "How do you iterate over ARGV and create a Thread for each value in the array in Ruby", "body": "<p>Can you run following and tell us the output?\nYou can run it with args or use the default args that are specified in the script. \nIt is just two ways of passing variables (i prefer the second one). I think this is a minimal sample that does not require anything extra.</p>\n\n<pre><code>args = ARGV.size &gt; 0 ? ARGV : ['arg1', 'arg2', 'arg3']\n\nputs \"args is #{args} and has size #{args.size}\"\nthreads = args.map do |arg|\n  Thread.new do\n    sleep 1\n    print \"Arg is: #{arg}\\n\"\n  end\nend\n\nthreads.each(&amp;:join)\n\nputs \"--\"\n\n\nthreads = args.map do |arg|\n  Thread.new(arg) do |value|\n    sleep 1\n    print \"Arg is: #{value}\\n\"\n  end\nend\n\nthreads.each(&amp;:join)\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 6440953, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RVQHD.jpg?s=128&g=1", "display_name": "Octavian Fedorovici", "link": "https://stackoverflow.com/users/6440953/octavian-fedorovici"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "accepted_answer_id": 39625816, "answer_count": 1, "score": 0, "last_activity_date": 1474488934, "creation_date": 1474473175, "last_edit_date": 1474474468, "question_id": 39621269, "link": "https://stackoverflow.com/questions/39621269/how-do-you-iterate-over-argv-and-create-a-thread-for-each-value-in-the-array-in", "title": "How do you iterate over ARGV and create a Thread for each value in the array in Ruby", "body": "<p>I'm trying to create a Ruby script that launches a separate thread for each of the arguments passed in ARGV, but I can't figure out how to iterate over them and pass them in the thread as constants (or thread-safe). Something like:</p>\n\n<h1>compile.rb</h1>\n\n<pre><code>require 'rubygems'\nrequire 'compass'\nrequire 'compass/exec'\n\nthreads = []\nARGV.each do |arg|\n  threads &lt;&lt; Thread.new { Compass::Exec::SubCommandUI.new([\"compile\", arg]).run! }\nend\nthreads.each { |thr| thr.join }\n</code></pre>\n\n<p>The result is that it will create the expected number of threads, but each thread will run on the same arg value (the loop doesn't work as expected).</p>\n\n<p>I'm trying to run it from Ant, like this:</p>\n\n<h1>build.xml</h1>\n\n<pre><code>&lt;java fork=\"true\" failonerror=\"true\" classpathref=\"jruby.classpath\" classname=\"org.jruby.Main\"&gt;\n    &lt;arg path=\"${ext.path}\\compile.rb\"&gt;&lt;/arg&gt;\n    &lt;arg line=\"${config.rb.dirs.str}\"&gt;&lt;/arg&gt;\n&lt;/java&gt;\n</code></pre>\n\n<p>where \"config.rb.dirs.str\" contains my paths to multiple Sass projects, space separated.</p>\n\n<p>I'm a newbie in Ruby, so please don't judge. Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 540, "user_id": 6272415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd2b51523096b5c5a54e64ce0633156a?s=128&d=identicon&r=PG", "display_name": "katniss.everbean", "link": "https://stackoverflow.com/users/6272415/katniss-everbean"}, "edited": false, "score": 0, "creation_date": 1474473228, "post_id": 39621231, "comment_id": 66548175, "body": "I would add to this that <code>last(5)</code> returns an array, so you need to iterate through that array for the block to run as expected. Without <code>each</code>,  <code>|photo|</code> just represents the entire array and the resulting block won&#39;t work."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1474477061, "post_id": 39621231, "comment_id": 66550478, "body": "Without <code>each</code> the block is ignored as <code>last</code> has no use for it."}], "tags": [], "owner": {"reputation": 552, "user_id": 2568891, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/716c5dc7ac5f04258d5e58fb8de2c355?s=128&d=identicon&r=PG&f=1", "display_name": "Pandya M. Nandan", "link": "https://stackoverflow.com/users/2568891/pandya-m-nandan"}, "is_accepted": false, "score": 3, "last_activity_date": 1474473076, "creation_date": 1474473076, "answer_id": 39621231, "question_id": 39621092, "link": "https://stackoverflow.com/questions/39621092/limiting-photos-with-photos-last5-isnt-working/39621231#39621231", "title": "Limiting photos with `@photos.last(5)` isn&#39;t working", "body": "<p>Please take some time to go though documentation once again. it is just a minor problem.</p>\n\n<pre><code>&lt;%- @user.photos.last(5).each do ....\n</code></pre>\n"}], "owner": {"reputation": 221, "user_id": 5535908, "user_type": "registered", "accept_rate": 52, "profile_image": "https://www.gravatar.com/avatar/ff8ecf8d47500eb8a5269b8a0cc5dc8e?s=128&d=identicon&r=PG&f=1", "display_name": "GVS", "link": "https://stackoverflow.com/users/5535908/gvs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 20, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474473076, "creation_date": 1474472662, "question_id": 39621092, "link": "https://stackoverflow.com/questions/39621092/limiting-photos-with-photos-last5-isnt-working", "title": "Limiting photos with `@photos.last(5)` isn&#39;t working", "body": "<p>This code doesn't throw any errors, but no photos appear. The <code>&lt;div&gt;</code> around the code is empty when I check in inspect element. If I change <code>@user.photos.last(5)</code> to <code>@user.photos.each</code>, the photos appears. But I want to show only 5 of the most recently added photos.</p>\n\n<pre><code>&lt;%- @user.photos.last(5) do |photo| %&gt;\n  &lt;div class=\"col-xs-6 col-md-3 no-padding\"&gt;\n    &lt;a href=\"&lt;%= user_photo_path(@user.username, photo.id) %&gt;\" class=\"photo-thumbnail\"&gt;\n      &lt;%= image_tag photo.url %&gt;\n    &lt;/a&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>What am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "edited": false, "score": 0, "creation_date": 1474472816, "post_id": 39621043, "comment_id": 66547912, "body": "Basically how can i validate that :title is not empty in this hash passed in categories_attributes before i destroy it?"}], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "edited": false, "score": 0, "creation_date": 1474473403, "post_id": 39621320, "comment_id": 66548307, "body": "got the following error below <code>undefined method </code>presisted?&#39; for #&lt;Category id: nil, title: &quot;&quot;, created_at: nil, updated_at: nil&gt;`"}, {"owner": {"reputation": 62179, "user_id": 163203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354dbc60f05bbc3ea25cdf2c14540caf?s=128&d=identicon&r=PG", "display_name": "Harish Shetty", "link": "https://stackoverflow.com/users/163203/harish-shetty"}, "reply_to_user": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "edited": false, "score": 0, "creation_date": 1474473449, "post_id": 39621320, "comment_id": 66548335, "body": "Fixed the typo, try now."}, {"owner": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "edited": false, "score": 0, "creation_date": 1474473520, "post_id": 39621320, "comment_id": 66548393, "body": "I never seen the presisted? before"}, {"owner": {"reputation": 62179, "user_id": 163203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354dbc60f05bbc3ea25cdf2c14540caf?s=128&d=identicon&r=PG", "display_name": "Harish Shetty", "link": "https://stackoverflow.com/users/163203/harish-shetty"}, "reply_to_user": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "edited": false, "score": 0, "creation_date": 1474473586, "post_id": 39621320, "comment_id": 66548442, "body": "In Rails <code>persisted?</code> and <code>new_record?</code> are twins. Doc can be found here: <a href=\"http://apidock.com/rails/ActiveRecord/Persistence/persisted%3F\" rel=\"nofollow noreferrer\">apidock.com/rails/ActiveRecord/Persistence/persisted%3F</a>"}, {"owner": {"reputation": 62179, "user_id": 163203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354dbc60f05bbc3ea25cdf2c14540caf?s=128&d=identicon&r=PG", "display_name": "Harish Shetty", "link": "https://stackoverflow.com/users/163203/harish-shetty"}, "reply_to_user": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "edited": false, "score": 0, "creation_date": 1474473709, "post_id": 39621320, "comment_id": 66548520, "body": "I would surround the call or the method block within a transaction. Otherwise, rails commits for every <code>has_many</code> append."}], "tags": [], "owner": {"reputation": 62179, "user_id": 163203, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/354dbc60f05bbc3ea25cdf2c14540caf?s=128&d=identicon&r=PG", "display_name": "Harish Shetty", "link": "https://stackoverflow.com/users/163203/harish-shetty"}, "is_accepted": true, "score": 1, "last_activity_date": 1474473432, "last_edit_date": 1474473432, "creation_date": 1474473359, "answer_id": 39621320, "question_id": 39621043, "link": "https://stackoverflow.com/questions/39621043/destroy-an-object-in-model-file-if-its-missing-a-condition/39621320#39621320", "title": "Destroy an object in model file if its missing a condition", "body": "<p>Try this:</p>\n\n<pre><code>def categories_attributes=(categories_attributes)\n  categories_attributes.values.each do |category_attribute|\n    category = Category.find_or_create_by(category_attribute)\n    if category.title?\n      categories &lt;&lt; category\n    elsif category.persisted?\n      category.destroy\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 36, "favorite_count": 0, "accepted_answer_id": 39621320, "answer_count": 1, "score": 0, "last_activity_date": 1474473432, "creation_date": 1474472539, "question_id": 39621043, "link": "https://stackoverflow.com/questions/39621043/destroy-an-object-in-model-file-if-its-missing-a-condition", "title": "Destroy an object in model file if its missing a condition", "body": "<p>How can i destroy this object if its category_attributes(:title) is empty?</p>\n\n<pre><code>def categories_attributes=(categories_attributes)\n    categories_attributes.values.each do |category_attribute|\n      category = Category.find_or_create_by(category_attribute)\n      categories &lt;&lt; category\n    end\n  end\n</code></pre>\n"}, {"tags": ["android", "ruby-on-rails", "ruby", "cordova"], "comments": [{"owner": {"reputation": 1393, "user_id": 6206501, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JENfJ.jpg?s=128&g=1", "display_name": "Abhilash Reddy", "link": "https://stackoverflow.com/users/6206501/abhilash-reddy"}, "edited": false, "score": 0, "creation_date": 1474472228, "post_id": 39620820, "comment_id": 66547544, "body": "There is a difference between a mobile app and web app. You can create an API and use that API with mobile app to communicate with the web app"}], "answers": [{"tags": [], "owner": {"reputation": 10385, "user_id": 4032703, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/8imMA.png?s=128&g=1", "display_name": "EJoshuaS - Reinstate Monica", "link": "https://stackoverflow.com/users/4032703/ejoshuas-reinstate-monica"}, "is_accepted": false, "score": 0, "last_activity_date": 1474473426, "creation_date": 1474473426, "answer_id": 39621338, "question_id": 39620820, "link": "https://stackoverflow.com/questions/39620820/how-can-i-make-an-app-by-phonegap-or-cordova-using-ruby-on-rails/39621338#39621338", "title": "How can I make an app by phonegap or cordova using ruby on rails?", "body": "<p>Phonegap uses primarily JavaScript/HTML5/CSS so it's not clear that you'd be able to \"directly\" reuse your existing codebase as a Phonegap application in the \"now it's a web site, now it's a mobile app\" sense. The answer that elimcjah posted does present some reasonable ideas though.</p>\n\n<p>As a broader point, the first question when creating an app is what its value-add over a mobile site is (especially since you already have a functioning web site). I'd consider whether you want to make sure that your existing web site conforms to the principals of <a href=\"https://en.wikipedia.org/wiki/Responsive_web_design\" rel=\"nofollow\">responsive design</a> or if you really do need to make this an app. It's actually not all <em>that</em> easy to convince people to install an app and keep it there, especially if there's not a perceived value add over their mobile site. There's also the additional expense and effort of submitting the app to the various play stores (which will likely require a subscription fee and may have a non-trivial \"vetting\" process; Apple's vetting process is notoriously stringent).</p>\n"}], "owner": {"reputation": 1, "user_id": 5642288, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0b2870b05d369ff1a39ef8fd688513db?s=128&d=identicon&r=PG&f=1", "display_name": "Jiyeong Hwang", "link": "https://stackoverflow.com/users/5642288/jiyeong-hwang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1474473426, "creation_date": 1474471897, "question_id": 39620820, "link": "https://stackoverflow.com/questions/39620820/how-can-i-make-an-app-by-phonegap-or-cordova-using-ruby-on-rails", "title": "How can I make an app by phonegap or cordova using ruby on rails?", "body": "<p>I made a website by ruby on rails on c9 and I want to make this as a mobile application.</p>\n\n<p>I found there are cordova, phonegap and etc.</p>\n\n<p>I don't know how to use my previous code I wrote on c9 by using ruby on rails.</p>\n\n<p>Is there any way to use my ruby on rails code to make an android application by cordova or phonegap.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actionmailer", "axlsx"], "answers": [{"comments": [{"owner": {"reputation": 1095, "user_id": 558473, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/9bc1f80f0ada847e6a306a36f1e62d0a?s=128&d=identicon&r=PG", "display_name": "Habax", "link": "https://stackoverflow.com/users/558473/habax"}, "edited": false, "score": 0, "creation_date": 1542634288, "post_id": 39677213, "comment_id": 93627022, "body": "This was the answer"}], "tags": [], "owner": {"reputation": 1995, "user_id": 1011964, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c74ae7d92a97e1fe53489f66c32a718?s=128&d=identicon&r=PG", "display_name": "noel", "link": "https://stackoverflow.com/users/1011964/noel"}, "is_accepted": false, "score": 0, "last_activity_date": 1474725881, "creation_date": 1474725881, "answer_id": 39677213, "question_id": 39620276, "link": "https://stackoverflow.com/questions/39620276/attaching-axlsx-view-to-mail-rails-mailer/39677213#39677213", "title": "Attaching AXLSX view to mail Rails Mailer", "body": "<p>Have you tried passing layout: false? What versions of axlsx, axlsx_rails, rails, and rubyzip are you using?</p>\n"}, {"tags": [], "owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "is_accepted": true, "score": 0, "last_activity_date": 1474909335, "creation_date": 1474909335, "answer_id": 39708451, "question_id": 39620276, "link": "https://stackoverflow.com/questions/39620276/attaching-axlsx-view-to-mail-rails-mailer/39708451#39708451", "title": "Attaching AXLSX view to mail Rails Mailer", "body": "<p>In the end it all came down to moving the controller code into a lib file. This way I call it in the controller to get the data if it needs to be rendered via web-requests as well as via the Mailer method where I recreate the <code>@variables</code> the view template is looking for.</p>\n\n<p>Here is the finished salient parts of the report mailer method:</p>\n\n<pre><code>data = ReportUtils.get_data(args)\nxlsx = render_to_string(template: 'path/to/report.xlsx', locals: {:@period =&gt; period, :@date_ranges =&gt; data[:date_ranges], :@data =&gt; data[:data]})\nattachments[\"report.xlsx\"] = {content: xlsx, mime_type: Mime::XLSX}\n</code></pre>\n"}], "owner": {"reputation": 3798, "user_id": 1012952, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/572a69029f51ac0b75b5195c53495fc9?s=128&d=identicon&r=PG", "display_name": "Killerpixler", "link": "https://stackoverflow.com/users/1012952/killerpixler"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1385, "favorite_count": 0, "accepted_answer_id": 39708451, "answer_count": 2, "score": 1, "last_activity_date": 1474909335, "creation_date": 1474470475, "last_edit_date": 1474482801, "question_id": 39620276, "link": "https://stackoverflow.com/questions/39620276/attaching-axlsx-view-to-mail-rails-mailer", "title": "Attaching AXLSX view to mail Rails Mailer", "body": "<p>According to the <a href=\"https://github.com/straydogstudio/axlsx_rails\" rel=\"nofollow\">GitHub Page</a> for the <code>axlsx</code> gem I should use this syntax to render a xlsx view to a file and attach it:</p>\n\n<pre><code>xlsx = render_to_string handlers: [:axlsx], formats: [:xlsx], template: \"users/export\", locals: {users: users}\nattachments[\"Users.xlsx\"] = {mime_type: Mime::XLSX, content: xlsx}\n</code></pre>\n\n<p>Here is my mail method:</p>\n\n<pre><code>xlsx = render_to_string(handlers: [:axlsx], formats: [:xlsx], template: 'v1/reports/reportxyz', params: {start_date: '2016-09-12', period: 'weekly'})\nattachments[\"report.xlsx\"] = {content: xlsx, mime_type: Mime::XLSX}\nmail(to: \"my@email.address\", subject: \"Report\", format: \"text\")\n</code></pre>\n\n<p>However I get this error when I try and call the mailer method:</p>\n\n<pre><code>ActionView::MissingTemplate: Missing template layouts/mailer with {:locale=&gt;[:en], :formats=&gt;[:xlsx], :variants=&gt;[], :handlers=&gt;[:axlsx]}. Searched in:\n  * \"path/to/project/app/views\"\n</code></pre>\n\n<p>Why is the <code>render_to_string</code> method affecting what the mailer view the mailer is trying to render? locgially I don't have a <code>mailer.xlsx.axlsx</code> file in my <code>app/views/layouts</code> folder but rather the <code>mailer.text.erb</code> I am trying to use as with other emails.</p>\n\n<p>EDIT</p>\n\n<p>I changed the render line to <code>xlsx = render_to_string(template: 'v1/reports/azamara_social', params: {start_date: '2016-09-12', period: 'weekly'})</code></p>\n\n<p>And now it seems to try and render the <code>xlsx</code> view but of course gets <code>nil:NilClass</code> errors when the <code>xlsx</code> view tries to reference instance variables defined in the reports controller.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1474471937, "post_id": 39620320, "comment_id": 66547356, "body": "im getting this error  <code>ERROR mailchimp You must provide a MailChimp API key {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;5sO+oVCDUD949rHpZz4RSxnSqpfXGZ9p9XwF+&zwnj;&#8203;NO6HOkYPpfB95v1Wrn6E&zwnj;&#8203;gxR7N+rEpVHOHuRtEaBA&zwnj;&#8203;hNmoWTYVA==&quot;, &quot;group_name&quot;=&gt;&quot;suscriptores&quot;, &quot;group&quot;=&gt;&quot;newsletter&quot;, &quot;email&quot;=&gt;&quot;henry07_03@hotmail.com&quot;, &quot;commit&quot;=&gt;&quot;SUSCRIBIRSE&quot;, &quot;controller&quot;=&gt;&quot;subscribe&quot;, &quot;action&quot;=&gt;&quot;create&quot;}</code>"}, {"owner": {"reputation": 1142, "user_id": 3562561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5455f5135299cdb6b4640148fa176f9f?s=128&d=identicon&r=PG", "display_name": "treiff", "link": "https://stackoverflow.com/users/3562561/treiff"}, "reply_to_user": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1474472079, "post_id": 39620320, "comment_id": 66547444, "body": "Yeah, that seems to be a different issue regarding <code>Mailchimp</code>.  It seems there is some configuration your missing regarding your API key."}, {"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1474472810, "post_id": 39620320, "comment_id": 66547910, "body": "No, i&#39;m defining the API_KEY in Application.yml"}, {"owner": {"reputation": 1142, "user_id": 3562561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5455f5135299cdb6b4640148fa176f9f?s=128&d=identicon&r=PG", "display_name": "treiff", "link": "https://stackoverflow.com/users/3562561/treiff"}, "reply_to_user": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1474473976, "post_id": 39620320, "comment_id": 66548683, "body": "Okay, and you have set your <code>ENV_VARS</code> in production on heroku as well?Under <code>Settings &gt; Config Vars</code>."}], "tags": [], "owner": {"reputation": 1142, "user_id": 3562561, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/5455f5135299cdb6b4640148fa176f9f?s=128&d=identicon&r=PG", "display_name": "treiff", "link": "https://stackoverflow.com/users/3562561/treiff"}, "is_accepted": false, "score": 1, "last_activity_date": 1474471940, "last_edit_date": 1474471940, "creation_date": 1474470563, "answer_id": 39620320, "question_id": 39620234, "link": "https://stackoverflow.com/questions/39620234/rails-in-private-nil-is-not-a-symbo-l-typeerror/39620320#39620320", "title": "Rails - in `private&#39;: nil is not a symbo l (TypeError)", "body": "<p>I belive You need your method on a new line after you call <code>private</code>:</p>\n\n<pre><code>private \n\n  def user_params(params)\n    user = {\n      email: params[:email].try(:downcase),\n      first_name: params[:first_name].try(:titleize),\n      last_name: params[:last_name].try(:titleize),\n      city: params[:city].try(:titleize),\n      phone: params[:phone],\n      comment: params[:comment].try(:titleize)\n    }\n    user\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1474473596, "post_id": 39620652, "comment_id": 66548447, "body": "Hi, i put the code as you have indicated , and now I have this error.  <code>ActionView::Template::Error (No route matches {:action=&gt;&quot;create&quot;, :controller=&gt;&quot;subscribe&quot;}):</code> in local server works, but in production server doesn&#39;t work"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1474474843, "post_id": 39620652, "comment_id": 66549189, "body": "I would need to see your updated code to properly understand this error. Since this is unrelated to your original question (which is now resolved), please <a href=\"http://stackoverflow.com/questions/ask\">submit it as a new question</a>."}, {"owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "edited": false, "score": 0, "creation_date": 1474475885, "post_id": 39620652, "comment_id": 66549785, "body": "Thank you very much , after making these changes to syntax I had to set the MailChimp API_KEY in the production server and it worked ."}], "tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 0, "last_activity_date": 1474471421, "creation_date": 1474471421, "answer_id": 39620652, "question_id": 39620234, "link": "https://stackoverflow.com/questions/39620234/rails-in-private-nil-is-not-a-symbo-l-typeerror/39620652#39620652", "title": "Rails - in `private&#39;: nil is not a symbo l (TypeError)", "body": "<p>Since <a href=\"https://bugs.ruby-lang.org/issues/3753\" rel=\"nofollow\">ruby version <strong>2.1</strong></a> (!!), method definitions return a symbol for the method name.</p>\n\n<p>Hence, the following code:</p>\n\n<pre><code>def my_method\n  # ...\nend\n\nprivate :my_method\n</code></pre>\n\n<p>Can be simplified, in the way you have done:</p>\n\n<pre><code>private def my_method\n  # ...\nend\n</code></pre>\n\n<p>Looking at the stack trace, it seems your production server is still running ruby version <code>2.0.0</code>. On this older ruby version, method definitions return <code>nil</code> - so your code is invalid.</p>\n\n<p>Ideally, you should just update the production ruby version. If that's not an option, either write the code as:</p>\n\n<pre><code># Put this at the BOTTOM of the class\n\nprivate \n\ndef user_params(params)\n  # ...\nend\n</code></pre>\n\n<p>Or:</p>\n\n<pre><code># Put this anywhere in the class\n\ndef user_params(params)\n  # ...\nend\nprivate :user_params\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 6722882, "user_type": "registered", "accept_rate": 83, "profile_image": "https://lh3.googleusercontent.com/-r62G1PEZLq0/AAAAAAAAAAI/AAAAAAAAAds/l8zbkiHXQ7g/photo.jpg?sz=128", "display_name": "iFurniture", "link": "https://stackoverflow.com/users/6722882/ifurniture"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 39620652, "answer_count": 2, "score": 0, "last_activity_date": 1474472366, "creation_date": 1474470358, "last_edit_date": 1474472366, "question_id": 39620234, "link": "https://stackoverflow.com/questions/39620234/rails-in-private-nil-is-not-a-symbo-l-typeerror", "title": "Rails - in `private&#39;: nil is not a symbo l (TypeError)", "body": "<p>it appears in the production server, while in local server it not appears, the issue is in the Subscribe_Controller, there I define what parameters are sent to MailChimp for the mailing list , here is the error log from <code>$heroku run rails console</code>.</p>\n\n<pre><code>/app/app/controllers/subscribe_controller.rb:11:in `private': nil is not a symbo\nl (TypeError)\n        from /app/app/controllers/subscribe_controller.rb:11:in `&lt;class:Subscrib\neController&gt;'\n        from /app/app/controllers/subscribe_controller.rb:1:in `&lt;top (required)&gt;\n'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:274:in `require'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:274:in `block in require'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:240:in `load_dependency'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:274:in `require'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:360:in `require_or_load'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:317:in `depend_on'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:233:in `require_dependency'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/engin\ne.rb:472:in `block (2 levels) in eager_load!'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/engin\ne.rb:471:in `each'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/engin\ne.rb:471:in `block in eager_load!'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/engin\ne.rb:469:in `each'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/engin\ne.rb:469:in `eager_load!'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/engin\ne.rb:346:in `eager_load!'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/appli\ncation/finisher.rb:56:in `each'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/appli\ncation/finisher.rb:56:in `block in &lt;module:Finisher&gt;'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:30:in `instance_exec'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:30:in `run'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:55:in `block in run_initializers'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:150:in `block in tso\nrt_each'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:183:in `block (2 lev\nels) in each_strongly_connected_component'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:210:in `block (2 lev\nels) in each_strongly_connected_component_from'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:210:in `block (2 lev\nels) in each_strongly_connected_component_from'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:210:in `block (2 lev\nels) in each_strongly_connected_component_from'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:219:in `each_strongl\ny_connected_component_from'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:209:in `block in eac\nh_strongly_connected_component_from'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:44:in `each'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:44:in `tsort_each_child'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:203:in `each_strongl\ny_connected_component_from'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:209:in `block in eac\nh_strongly_connected_component_from'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:44:in `each'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:44:in `tsort_each_child'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:203:in `each_strongl\ny_connected_component_from'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:209:in `block in eac\nh_strongly_connected_component_from'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:44:in `each'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:44:in `tsort_each_child'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:203:in `each_strongl\ny_connected_component_from'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:182:in `block in eac\nh_strongly_connected_component'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:180:in `each'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:180:in `each_strongl\ny_connected_component'\n        from /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/tsort.rb:148:in `tsort_each'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/initi\nalizable.rb:54:in `run_initializers'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/appli\ncation.rb:352:in `initialize!'\n        from /app/config/environment.rb:5:in `&lt;top (required)&gt;'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:274:in `require'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:274:in `block in require'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:240:in `load_dependency'\n        from /app/vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.7.1/lib/active\n_support/dependencies.rb:274:in `require'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/appli\ncation.rb:328:in `require_environment!'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/comma\nnds/commands_tasks.rb:142:in `require_application_and_environment!'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/comma\nnds/commands_tasks.rb:67:in `console'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/comma\nnds/commands_tasks.rb:39:in `run_command!'\n        from /app/vendor/bundle/ruby/2.0.0/gems/railties-4.2.7.1/lib/rails/comma\nnds.rb:17:in `&lt;top (required)&gt;'\n        from /app/bin/rails:4:in `require'\n        from /app/bin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>here is the log from the production server:</p>\n\n<pre><code>2016-09-21T14:53:45.788249+00:00 heroku[router]: at=error code=H10 desc=\"App crashed\" method=GET path=\"/\" host=www.ifurniture.pe request_id=4e9cd392-23bb-4160-8f2b-e9886cf25016 fwd=\"190.234.106.227\" dyno= connect= service= status=503 bytes=\n</code></pre>\n\n<p>this is the Subscribe_Controller.rb file..</p>\n\n<pre><code>class SubscribeController &lt; ApplicationController\n  def create\n    logger.info \"suscripcion #{params.inspect}\"\n    user = user_params(params)\n    MailchimpWrapper.subscribe(user, params[:group_name], params[:group])\n    redirect_to '/gracias'\n    rescue Mailchimp::Error =&gt; e\n      logger.error \"ERROR mailchimp #{e.message} #{params.inspect}\"\n    end\n\n  private def user_params(params)\n    user = {\n      email: params[:email].try(:downcase),\n      first_name: params[:first_name].try(:titleize),\n      last_name: params[:last_name].try(:titleize),\n      city: params[:city].try(:titleize),\n      phone: params[:phone],\n      comment: params[:comment].try(:titleize)\n    }\n    user\n  end\nend\n</code></pre>\n\n<p>I define the method in a new line like this..</p>\n\n<pre><code>  private \n  def user_params(params)\n    user = {\n      email: params[:email].try(:downcase),\n      first_name: params[:first_name].try(:titleize),\n      last_name: params[:last_name].try(:titleize),\n      city: params[:city].try(:titleize),\n      phone: params[:phone],\n      comment: params[:comment].try(:titleize)\n    }\n    user\n  end\nend\n</code></pre>\n\n<p>and get this error in production server...</p>\n\n<pre><code>2016-09-21T15:28:29.628087+00:00 app[web.1]: Started POST \"/suscribir\" for 190.234.106.227 at 2016-09-21 15:28:29 +0000\n\n2016-09-21T15:28:29.635751+00:00 app[web.1]: Processing by SubscribeController#create as HTML\n\n2016-09-21T15:28:29.635762+00:00 app[web.1]:   Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"5sO+oVCDUD949rHpZz4RSxnSqpfXGZ9p9XwF+NO6HOkYPpfB95v1Wrn6EgxR7N+rEpVHOHuRtEaBAhNmoWTYVA==\", \"group_name\"=&gt;\"suscriptores\", \"group\"=&gt;\"newsletter\", \"email\"=&gt;\"henry07_03@hotmail.com\", \"commit\"=&gt;\"SUSCRIBIRSE\"}\n\n2016-09-21T15:28:29.635763+00:00 app[web.1]: suscripcion {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"5sO+oVCDUD949rHpZz4RSxnSqpfXGZ9p9XwF+NO6HOkYPpfB95v1Wrn6EgxR7N+rEpVHOHuRtEaBAhNmoWTYVA==\", \"group_name\"=&gt;\"suscriptores\", \"group\"=&gt;\"newsletter\", \"email\"=&gt;\"henry07_03@hotmail.com\", \"commit\"=&gt;\"SUSCRIBIRSE\", \"controller\"=&gt;\"subscribe\", \"action\"=&gt;\"create\"}\n\n2016-09-21T15:28:29.638002+00:00 app[web.1]: ERROR mailchimp You must provide a MailChimp API key {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"5sO+oVCDUD949rHpZz4RSxnSqpfXGZ9p9XwF+NO6HOkYPpfB95v1Wrn6EgxR7N+rEpVHOHuRtEaBAhNmoWTYVA==\", \"group_name\"=&gt;\"suscriptores\", \"group\"=&gt;\"newsletter\", \"email\"=&gt;\"henry07_03@hotmail.com\", \"commit\"=&gt;\"SUSCRIBIRSE\", \"controller\"=&gt;\"subscribe\", \"action\"=&gt;\"create\"}\n\n2016-09-21T15:28:29.657213+00:00 app[web.1]:   [1m[35mRefinery::Page Load (0.8ms)[0m  SELECT  \"refinery_pages\".* FROM \"refinery_pages\" WHERE \"refinery_pages\".\"menu_match\" = $1  ORDER BY \"refinery_pages\".\"id\" ASC LIMIT 1  [[\"menu_match\", \"^/404$\"]]\n\n2016-09-21T15:28:29.661415+00:00 app[web.1]:   [1m[36mRefinery::PagePart Load (2.1ms)[0m  [1mSELECT \"refinery_page_parts\".* FROM \"refinery_page_parts\" WHERE \"refinery_page_parts\".\"refinery_page_id\" IN (2)  ORDER BY position ASC[0m\n</code></pre>\n\n<p>I'll be attentive to your answers.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 6, "last_activity_date": 1474469343, "creation_date": 1474469343, "answer_id": 39619867, "question_id": 39619746, "link": "https://stackoverflow.com/questions/39619746/ruby-check-if-at-least-one-element-from-collection-meets-condition/39619867#39619867", "title": "Ruby Check if at least one element from collection meets condition", "body": "<p>If <code>is_active</code> is a database column than you might want to write:</p>\n\n<pre><code>Controller.exists?(user_id: id, is_active: true)\n</code></pre>\n\n<p>If is needs to be calculated:</p>\n\n<pre><code>User.find(id).controllers.any?(&amp;:is_active)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": false, "score": 0, "last_activity_date": 1474469456, "creation_date": 1474469456, "answer_id": 39619887, "question_id": 39619746, "link": "https://stackoverflow.com/questions/39619746/ruby-check-if-at-least-one-element-from-collection-meets-condition/39619887#39619887", "title": "Ruby Check if at least one element from collection meets condition", "body": "<p>try  rails way </p>\n\n<pre><code>unless User.find(id).controllers.where(is_active: true).any?\n  #your code\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 836604, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/0f23ece0252c877b4d0e544a9871cf88?s=128&d=identicon&r=PG", "display_name": "brunto", "link": "https://stackoverflow.com/users/836604/brunto"}, "is_accepted": false, "score": 0, "last_activity_date": 1474469717, "creation_date": 1474469717, "answer_id": 39619988, "question_id": 39619746, "link": "https://stackoverflow.com/questions/39619746/ruby-check-if-at-least-one-element-from-collection-meets-condition/39619988#39619988", "title": "Ruby Check if at least one element from collection meets condition", "body": "<pre><code>User.joins(:controllers).where(id: id, controller: {is_active: true}).count &gt; 0\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 552, "user_id": 2568891, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/716c5dc7ac5f04258d5e58fb8de2c355?s=128&d=identicon&r=PG&f=1", "display_name": "Pandya M. Nandan", "link": "https://stackoverflow.com/users/2568891/pandya-m-nandan"}, "is_accepted": false, "score": 3, "last_activity_date": 1479932212, "last_edit_date": 1479932212, "creation_date": 1474473832, "answer_id": 39621464, "question_id": 39619746, "link": "https://stackoverflow.com/questions/39619746/ruby-check-if-at-least-one-element-from-collection-meets-condition/39621464#39621464", "title": "Ruby Check if at least one element from collection meets condition", "body": "<pre><code>user.controllers.any?(&amp;:is_active)\n</code></pre>\n\n<p>would be the best option here.</p>\n"}], "owner": {"reputation": 1357, "user_id": 4370885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc5bf7a6307b29d51154924b65d6dd47?s=128&d=identicon&r=PG&f=1", "display_name": "theDrifter", "link": "https://stackoverflow.com/users/4370885/thedrifter"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1383, "favorite_count": 0, "accepted_answer_id": 39619867, "answer_count": 4, "score": 2, "last_activity_date": 1479932212, "creation_date": 1474468955, "question_id": 39619746, "link": "https://stackoverflow.com/questions/39619746/ruby-check-if-at-least-one-element-from-collection-meets-condition", "title": "Ruby Check if at least one element from collection meets condition", "body": "<p>My models have the following relation</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :controllers\nend\n\nclass Controller &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p><code>Controller</code> has a boolean called <code>is_active</code>.</p>\n\n<p>I would like to raise an exception if all controller objects which belong to a specific user object are <code>is_active</code> false.</p>\n\n<p>Unfortunately i struggle  putting this sentence into code. </p>\n\n<pre><code># if for all controllers is_active false is met, raise exception\n# ~&gt;  need to find one controller which is active\narray = []\nUser.find(id).controllers.each do |c|\n   array &lt;&lt; c.is_active\nend\nunless array.include?('true') \n raise ...\nend\n</code></pre>\n\n<p>It feels like there is a more <code>rubisch</code> way to write this. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "solr"], "comments": [{"owner": {"reputation": 1248, "user_id": 1848302, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c8d1cafa57d9dd3863ed21193de612bb?s=128&d=identicon&r=PG", "display_name": "Alex Lynham", "link": "https://stackoverflow.com/users/1848302/alex-lynham"}, "edited": false, "score": 0, "creation_date": 1474468254, "post_id": 39619358, "comment_id": 66544951, "body": "Is solr definitely running?"}, {"owner": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "edited": false, "score": 0, "creation_date": 1474468774, "post_id": 39619358, "comment_id": 66545301, "body": "Does the URL actually work outside of Ruby? Does Solr answer on that URL? Is the Solr server running on the same machine?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6574649"}, "reply_to_user": {"reputation": 37387, "user_id": 137650, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/418a42c29b040f2e0a51eea5330e2b7f?s=128&d=identicon&r=PG", "display_name": "MatsLindh", "link": "https://stackoverflow.com/users/137650/matslindh"}, "edited": false, "score": 0, "creation_date": 1474468938, "post_id": 39619358, "comment_id": 66545396, "body": "@MatsLindh, &quot;<a href=\"http://127.0.0.1:8983/solr\" rel=\"nofollow noreferrer\">127.0.0.1:8983/solr</a>&quot; does."}, {"owner": {"reputation": 1248, "user_id": 1848302, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c8d1cafa57d9dd3863ed21193de612bb?s=128&d=identicon&r=PG", "display_name": "Alex Lynham", "link": "https://stackoverflow.com/users/1848302/alex-lynham"}, "edited": false, "score": 0, "creation_date": 1474469019, "post_id": 39619358, "comment_id": 66545447, "body": "Okay, does the index exist then? The reindex task is likely to fail if the index isn&#39;t there"}, {"owner": {"user_type": "does_not_exist", "display_name": "user6574649"}, "reply_to_user": {"reputation": 1248, "user_id": 1848302, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c8d1cafa57d9dd3863ed21193de612bb?s=128&d=identicon&r=PG", "display_name": "Alex Lynham", "link": "https://stackoverflow.com/users/1848302/alex-lynham"}, "edited": false, "score": 0, "creation_date": 1474469156, "post_id": 39619358, "comment_id": 66545538, "body": "@AlexLynham, <a href=\"http://127.0.0.1:8983/solr/default\" rel=\"nofollow noreferrer\">127.0.0.1:8983/solr/default</a> doesn&#39;t exist, how to create it?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6574649"}, "edited": false, "score": 0, "creation_date": 1474636926, "post_id": 39635389, "comment_id": 66625438, "body": "the 2nd links describes how to do that with a &quot;jar&quot; file. but how can I use it? I&#39;m on Rails, not in java."}, {"owner": {"user_type": "does_not_exist", "display_name": "user6574649"}, "edited": false, "score": 0, "creation_date": 1474636973, "post_id": 39635389, "comment_id": 66625482, "body": "I&#39;ve added &quot;searchable&quot; to my model, the goal now is to start solr and set it up."}], "tags": [], "owner": {"reputation": 1248, "user_id": 1848302, "user_type": "registered", "accept_rate": 36, "profile_image": "https://www.gravatar.com/avatar/c8d1cafa57d9dd3863ed21193de612bb?s=128&d=identicon&r=PG", "display_name": "Alex Lynham", "link": "https://stackoverflow.com/users/1848302/alex-lynham"}, "is_accepted": false, "score": 0, "last_activity_date": 1474536929, "creation_date": 1474536929, "answer_id": 39635389, "question_id": 39619358, "link": "https://stackoverflow.com/questions/39619358/solr-wont-start-reindexing-not-found/39635389#39635389", "title": "Solr won&#39;t start reindexing -- Not found", "body": "<p>You need to create the index. <a href=\"https://cwiki.apache.org/confluence/display/solr/Introduction+to+Solr+Indexing\" rel=\"nofollow\">Here</a> are the docs on indexing and how to create your index. <a href=\"http://www.solrtutorial.com/solr-in-5-minutes.html\" rel=\"nofollow\">Here</a>'s a much quicker but less thorough introduction.</p>\n\n<p>As you're using sunspot, you probably want to <a href=\"https://github.com/sunspot/sunspot\" rel=\"nofollow\">read their docs first</a>. Essentially you need to add a searchable block to your objects to index. After you've added that block, the objects will index on next save, or you can call the rake task you mentioned above. </p>\n\n<p>Here's the example they give for a <code>Post</code> object:</p>\n\n<pre><code>class Post &lt; ActiveRecord::Base\n  searchable do\n    text :title, :body\n    text :comments do\n      comments.map { |comment| comment.body }\n    end\n\n    boolean :featured\n    integer :blog_id\n    integer :author_id\n    integer :category_ids, :multiple =&gt; true\n    double  :average_rating\n    time    :published_at\n    time    :expired_at\n\n    string  :sort_title do\n      title.downcase.gsub(/^(an?|the)/, '')\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6574649"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 119, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474536929, "creation_date": 1474467882, "question_id": 39619358, "link": "https://stackoverflow.com/questions/39619358/solr-wont-start-reindexing-not-found", "title": "Solr won&#39;t start reindexing -- Not found", "body": "<p>I've tried different approaches to get solr to work, in particular, these <a href=\"https://stackoverflow.com/questions/19657351/rake-sunspotreindex-rake-aborted-rsolrerrorhttp-404-not-found\">rake sunspot:reindex rake aborted! RSolr::Error::Http - 404 Not Found</a>, but I've ended up with this yet:</p>\n\n<pre><code> $ bundle exec rake sunspot:reindex\n=&gt; Solr server started\n\nrake aborted!\nRSolr::Error::Http: RSolr::Error::Http - 404 Not Found\nError:     Not Found\n\nURI: http://127.0.0.1:8983/solr/default/update?wt=ruby\nRequest Headers: {\"Content-Type\"=&gt;\"text/xml\"}\nRequest Data: \"&lt;?xml version=\\\"1.0\\\" encoding=\\\"UTF-8\\\"?&gt;&lt;delete&gt;&lt;query&gt;type:ActsAsTaggableOn\\\\:\\\\:Tag&lt;/query&gt;&lt;/delete&gt;\"\n</code></pre>\n\n<p>How to fix it?</p>\n"}, {"tags": ["ruby", "macos", "terminal", "admin", "homebrew"], "comments": [{"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1474469423, "post_id": 39619329, "comment_id": 66545652, "body": "Who told you you&#39;re &quot;required&quot; to install homebrew?  OS X has ruby 2.0 right out of the box."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1474469564, "post_id": 39619329, "comment_id": 66545746, "body": "Please only ask about a single topic in a question.  Break your &quot;Also,...&quot; paragraph into a separate question, since it&#39;s a distinct topic from your earlier paragraphs."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1474476550, "post_id": 39619329, "comment_id": 66550163, "body": "Also, you don&#39;t need to use <code>sudo</code> to install Homebrew (and furthermore the docs actively discourage you from doing so). Refer to the second sentence in the <a href=\"https://github.com/Homebrew/brew/blob/a381b597d3ebf40887b50657df269d867a209eb7/docs/Installation.md\" rel=\"nofollow noreferrer\">installations docs</a>."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1474503223, "post_id": 39619329, "comment_id": 66562085, "body": "There are lots of online ruby tutorials that run in-browser (e.g. codeschool, code academy, etc.).  Nothing to install...well...assuming you have a browser."}], "owner": {"reputation": 695, "user_id": 6858850, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/ahkmG.jpg?s=128&g=1", "display_name": "Peter Zacharias", "link": "https://stackoverflow.com/users/6858850/peter-zacharias"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 54, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474467805, "creation_date": 1474467805, "question_id": 39619329, "link": "https://stackoverflow.com/questions/39619329/using-a-standard-user-account-to-learn-programming-on-os-x-sudo-required", "title": "Using a Standard User Account to learn Programming on OS X - &#39;sudo&#39; required?", "body": "<p>I want to learn programming, and am worried I will mess things up with my computer. There are also many packages, etc. that I will only want to try out and after some time things can get quite messy. That's why I have created a separate user account only for programming, etc. so that in case it gets too messy, I can just delete the whole account and start anew.</p>\n\n<p>I now wanted to try out some ruby, and was required to install homebrew. That required me to log in as sudo however. I thus did this from my admin account. Then I had to install ruby by running</p>\n\n<blockquote>\n  <p>brew install ruby</p>\n</blockquote>\n\n<p>This, again, needs to be done from the admin account / with sudo rights. But my whole point was to have this separate user account to not have everything on the system and clutter things up. I want to have it locally in my user account. Why does this not work, what am I doing wrong?</p>\n\n<p>Also, if I try to type in my sudo password in the terminal of my coding account, it doesn't accept it. I can install things when I am logged into my admin account, but am not able to install anything from my coding account, by just typing the sudo pw in the terminal. why is that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474467794, "post_id": 39619315, "comment_id": 66544616, "body": "I&#39;m trying to create a new Permit, so the problem probably related to CREATE action."}, {"owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "reply_to_user": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474467939, "post_id": 39619315, "comment_id": 66544722, "body": "You have to do it anyway, respecting current problem, can you add more information about error ?"}, {"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474468840, "post_id": 39619315, "comment_id": 66545336, "body": "It doesn&#39;t show me any arrow, just the permit data can&#39;t save into the database due to the user is not declared. Which the user should be declare since they have relationship."}], "tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": false, "score": 0, "last_activity_date": 1474467738, "creation_date": 1474467738, "answer_id": 39619315, "question_id": 39619150, "link": "https://stackoverflow.com/questions/39619150/rails-not-able-to-save-data-association/39619315#39619315", "title": "Rails Not able to save data, association", "body": "<p>Where exactly is your error ? If in <code>update</code> action, you have to change your <code>before_action</code>. You must add there <code>:update</code> action.</p>\n\n<pre><code>before_action :set_permit, only: [:show, :destroy, :update]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474470373, "post_id": 39619719, "comment_id": 66546300, "body": "This solved my current problem. The permit saved but it saved under every user caused every user able to access it. In the permit controller create action, i tried to change this line to @permits = Permit.new(permit_params) to @permit = current_user.Permit(permit_parasm).  This error showed &quot;NoMethodError in PermitsController#create undefined method `Permit&#39; for #&lt;User:0xa20ce10&gt;&quot;"}, {"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "reply_to_user": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474485567, "post_id": 39619719, "comment_id": 66554968, "body": "<code>@permit = current_user.Permit(permit_params)</code> is not a correct syntax. you may want something like: <code>@permit = Permit.new(permit_params)</code> and then assign user like <code>@permit.user = current_user</code> or you can add a <code>has_one :permit</code> association in <code>user</code> model and in <code>permit controller</code> use <code>@permit = current_user.build_permit(permit_params)</code>"}, {"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "reply_to_user": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474527039, "post_id": 39619719, "comment_id": 66568846, "body": "@GaryVlc if my answer solved your problem then would you mind to accept it as an answer ?"}, {"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474546178, "post_id": 39619719, "comment_id": 66581019, "body": "Hey @sajan Thanks for your answer. But now I haven&#39;t try the solution. Definitely will respond yo your answer once I try it."}], "tags": [], "owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "is_accepted": false, "score": 1, "last_activity_date": 1474468886, "creation_date": 1474468886, "answer_id": 39619719, "question_id": 39619150, "link": "https://stackoverflow.com/questions/39619150/rails-not-able-to-save-data-association/39619719#39619719", "title": "Rails Not able to save data, association", "body": "<p>I guess you are using Rails 5. The problem is you have <code>belongs_to</code> association on <code>permit</code> that is belongs to <code>user</code> but while creating <code>permit</code> you are not associating any user with it and in <strong>Rails 5</strong> it is mandatory to assign data to <code>belongs_to</code> association i.e you can not save <code>permit</code> when it don't have <code>user_id</code> so try to assign a <code>user_id</code> to <code>permit</code>. <a href=\"http://blog.bigbinary.com/2016/02/15/rails-5-makes-belong-to-association-required-by-default.html\" rel=\"nofollow\">refer this for change to rails 5 belongs_to association</a></p>\n"}], "owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1474567981, "creation_date": 1474467369, "last_edit_date": 1474567981, "question_id": 39619150, "link": "https://stackoverflow.com/questions/39619150/rails-not-able-to-save-data-association", "title": "Rails Not able to save data, association", "body": "<p>I'm doing a parking permit website. The problem I met is that I'm not able to save my data to the PERMIT database which associated with the USER database. The problem i think is I didn't bring the user to the permit(Maybe i missed something). I found out the error when I trying to save from Permit.errors.full_messages is [\"User must exist\"]. Any help is appreciated, Thank you!</p>\n\n<p>Schema.rb</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160920143651) do\n\n  create_table \"permits\", force: :cascade do |t|\n    t.string   \"vehicle_type\"\n    t.string   \"name\"\n    t.string   \"studentid\"\n    t.string   \"department\"\n    t.string   \"carplate\"\n    t.string   \"duration\"\n    t.date     \"permitstart\"\n    t.date     \"permitend\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\",   null: false\n    t.datetime \"updated_at\",   null: false\n    t.index [\"user_id\"], name: \"index_permits_on_user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"email\"\n    t.datetime \"created_at\",      null: false\n    t.datetime \"updated_at\",      null: false\n    t.string   \"password_digest\"\n    t.integer  \"user_type\"\n  end\n\nend\n</code></pre>\n\n<p>Create_permit.rb</p>\n\n<pre><code>class CreatePermits &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :permits do |t|\n      t.string :vehicle_type\n      t.string :name\n      t.string :studentid\n      t.string :department\n      t.string :carplate\n      t.string :duration\n      t.date :permitstart\n      t.date :permitend\n      t.references :user, foreign_key: true\n\n      t.timestamps\n    end\n    add_index :permits, :user_id\n  end\nend\n</code></pre>\n\n<p>Permit_controller</p>\n\n<pre><code>class PermitsController &lt; ApplicationController\n  before_action :set_permit, only: [:show, :destroy]\n  def index\n    @permits = Permit.all\n  end\n\n  def new\n    @permits = Permit.new\n  end\n\n  def create\n    @permits = Permit.new(permit_params)\n\n      if @permits.save\n        redirect_to @permits\n      else\n        redirect_to contact_path\n      end\n\n  end\n\n  def destroy\n    Permit.destroy_all(user_id: 1)\n    respond_to do |format|\n      format.html { redirect_to users_url, notice: 'Permit was successfully canceled.' }\n      format.json { head :no_content }\n    end\n  end\n\n  def show\n    @permits = Permit.find(params[:id])\n  end\n\n  def update\n    respond_to do |format|\n      if @permits.update(user_params)\n        format.html { redirect_to @user, notice: 'Permit was successfully updated.' }\n        format.json { render :show, status: :ok, location: @user }\n      else\n        format.html { render :edit }\n        format.json { render json: @user.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  private\n  # Use callbacks to share common setup or constraints between actions.\n  def set_permit\n    @permits = Permit.find(params[:id])\n  end\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def permit_params\n    params.require(:permit).permit(:vehicle_type, :name, :studentid, :department, :carplate, :duration, :permitstart, :permitend)\n  end\nend\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  has_many :permits\n  has_secure_password\nend\n</code></pre>\n\n<p>Permit.rb</p>\n\n<pre><code>    class Permit &lt; ApplicationRecord\n    belongs_to :user\n    end\n\npermit/new.html.erb\n&lt;% provide(:title, 'New Permit') %&gt;\n&lt;h1&gt;Permit Application&lt;/h1&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= form_for(@permits) do |f| %&gt;\n\n        &lt;%= f.label :\"Vehicle\" %&gt;\n        &lt;%= f.text_field :vehicle_type, class: 'form-control' %&gt;\n\n        &lt;%= f.label :\"License Plate\" %&gt;\n        &lt;%= f.text_field :carplate, class: 'form-control' %&gt;\n\n        &lt;%= f.label :\"Student ID\" %&gt;\n        &lt;%= f.text_field :studentid, class: 'form-control' %&gt;\n\n        &lt;%= f.label :name %&gt;\n        &lt;%= f.text_field :name, class: 'form-control' %&gt;\n\n        &lt;%= f.label :\"Department of applicant\" %&gt;\n        &lt;%= f.text_field :department, class: 'form-control' %&gt;\n\n        &lt;%= f.label :permit_start %&gt;\n        &lt;%= f.date_select :permitstart, class: 'form-control' %&gt;\n\n        &lt;%= f.label :permit_end %&gt;\n        &lt;%= f.date_select :permitend,  class: 'form-control'  %&gt;\n\n\n        &lt;%= f.submit \"Submit\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "devise", "rails-admin"], "owner": {"reputation": 11, "user_id": 6678961, "user_type": "registered", "profile_image": "https://graph.facebook.com/1211568702207918/picture?type=large", "display_name": "Alex Matze", "link": "https://stackoverflow.com/users/6678961/alex-matze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 664, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1474467314, "creation_date": 1474467314, "question_id": 39619129, "link": "https://stackoverflow.com/questions/39619129/how-can-i-authenticate-a-user-with-admin-attribute-for-rails-admin-with-devise", "title": "How can I authenticate a user with admin attribute for rails_admin with devise", "body": "<p>I am fairly new to ruby on rails. I habe set up a mysql database, connected it with a rails app, installed the devise gem and rails_admin gem. So far so good, everything works as it should. Now I also added a usergroup attribute to the users table, to identify different user group. Only \"admin\" should be allowed to access rails admin. I already use the predefined commands in /app/config/initializers/rails_admin.rb</p>\n\n<pre><code>   RailsAdmin.config do |config|\n\n  ### Popular gems integration\n\n  ## == Devise ==\n   config.authenticate_with do\n     warden.authenticate! scope: :admin\n   end\n   config.current_user_method(&amp;:current_user)\n\n  ## == Cancan ==\n  # config.authorize_with :cancan\n\n  ## == Pundit ==\n  # config.authorize_with :pundit\n\n  ## == PaperTrail ==\n  # config.audit_with :paper_trail, 'User', 'PaperTrail::Version' # PaperTrail &gt;= 3.0.0\n\n  ### More at https://github.com/sferik/rails_admin/wiki/Base-configuration\n\n  ## == Gravatar integration ==\n  ## To disable Gravatar integration in Navigation Bar set to false\n  # config.show_gravatar true\n\n  config.actions do\n    dashboard                     # mandatory\n    index                         # mandatory\n    new\n    export\n    bulk_delete\n    show\n    edit\n    delete\n    show_in_app\n\n    ## With an audit adapter, you can add:\n    # history_index\n    # history_show\n  end\nend\n</code></pre>\n\n<p>This works so far that you have to login before you can access the page. Now there also has to be a check wether  current_user.usergroup = 'admin'.</p>\n\n<p>In devise this is also explained as one possible method to 'handle' usergroups.\n<a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-Role\" rel=\"nofollow\">https://github.com/plataformatec/devise/wiki/How-To:-Add-an-Admin-Role</a></p>\n\n<p>But I am pretty confused how to insert this check into the config that way.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 525, "user_id": 6225310, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/p0hUv.jpg?s=128&g=1", "display_name": "Kamae", "link": "https://stackoverflow.com/users/6225310/kamae"}, "edited": false, "score": 0, "creation_date": 1474467339, "post_id": 39619011, "comment_id": 66544252, "body": "Try:  if(line.size &gt; 0){         puts &quot;&#39;#{line.split(&#39;|&#39;)[2]}&#39;&quot;         @arr &lt;&lt; line }"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474477303, "post_id": 39619011, "comment_id": 66550623, "body": "I suggest you write <code>@arr = []; File.foreach(&#39;animals.txt&#39;) { |line| @arr &lt;&lt; line.chomp }; @arr #=&gt; [&quot;col1|col2|col3&quot;, &quot;col1|col2|col3&quot;, &quot;col1|col2|col3&quot;]</code>."}], "answers": [{"tags": [], "owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "is_accepted": true, "score": 2, "last_activity_date": 1474467817, "last_edit_date": 1474467817, "creation_date": 1474467328, "answer_id": 39619134, "question_id": 39619011, "link": "https://stackoverflow.com/questions/39619011/how-to-cut-end-of-line-when-reading-files/39619134#39619134", "title": "How to cut end of line when reading files?", "body": "<p>Your code fails because when the file is read completely, <code>file.gets</code> returns <code>nil</code>, and calling <code>.chomp</code> on that throws the error you mentioned.</p>\n\n<p>You could, however, call <code>.chomp()</code> inside the <code>while</code> block, where is it guaranteed that <code>line</code> is not <code>nil</code>.</p>\n\n<p>For example, instead of</p>\n\n<pre><code>puts \"'#{line.split('|')[2]}'\"\n</code></pre>\n\n<p>you could do</p>\n\n<pre><code>puts \"'#{line.chomp.split('|')[2]}'\"\n</code></pre>\n"}], "owner": {"reputation": 40992, "user_id": 40106, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/164ca8ba426bdb10381290b9617d3ea7?s=128&d=identicon&r=PG&f=1", "display_name": "4thSpace", "link": "https://stackoverflow.com/users/40106/4thspace"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 39619134, "answer_count": 1, "score": 0, "last_activity_date": 1474467817, "creation_date": 1474466997, "question_id": 39619011, "link": "https://stackoverflow.com/questions/39619011/how-to-cut-end-of-line-when-reading-files", "title": "How to cut end of line when reading files?", "body": "<p>I'm reading the contents of a file into an array. The last item in a line is bringing the end of line character with it, which I don't want. Here's what I'm doing:</p>\n\n<pre><code>@arr = []\nFile.open('somefile.txt', 'r') do |file|  \n    while (line = file.gets)\n        puts \"'#{line.split('|')[2]}'\"\n        @arr &lt;&lt; line\n    end\nend\n</code></pre>\n\n<p>Data in the file looks like this:</p>\n\n<pre><code>col1|col2|col3\ncol1|col2|col3\ncol1|col2|col3\n</code></pre>\n\n<p>For <code>col3</code>, it is including the end of line character. I can tell this from the above <code>puts</code>, which outputs:</p>\n\n<blockquote>\n  <p>'col3<br>\n  '</p>\n</blockquote>\n\n<p>I've tried file.gets.chomp but that throws the following error:</p>\n\n<blockquote>\n  <p>undefined method `chomp' for nil:NilClass (NoMethodError)</p>\n</blockquote>\n\n<p>How do I remove the end of line character?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "reply_to_user": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1474465630, "post_id": 39618202, "comment_id": 66542893, "body": "def to_uri(ipt_string)      point = ipt_string.gsub(&#39;{&#39;, &#39;#{&#39;)"}, {"owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1474465671, "post_id": 39618202, "comment_id": 66542929, "body": "is it a String?"}, {"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "reply_to_user": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1474465965, "post_id": 39618202, "comment_id": 66543178, "body": "yes. if i hit the uri.. whether the uri contains all the strings or not. just want to check this"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474466094, "post_id": 39618202, "comment_id": 66543280, "body": "Hit the uri? All the strings? Please provide some context, I have no idea what you are talking about :-)"}, {"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474466922, "post_id": 39618202, "comment_id": 66543946, "body": "suppose i&#39;m hitting an uri&#39;s endpoint .. &amp; i want to check whether the mentioned strings are present on that endpoint or not"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474467053, "post_id": 39618202, "comment_id": 66544040, "body": "Could you give an example?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474467155, "post_id": 39618202, "comment_id": 66544111, "body": "Sorry, I mean an example of your input. How does a typical <code>ipt_string</code> look like?"}, {"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474467240, "post_id": 39618202, "comment_id": 66544186, "body": "[link] (<a href=\"https://www.flipkart.com/womens-footwear/heels/pr?sid=osp,iko,6q1&amp;otracker=nmenu_sub_Women_0_Heels\" rel=\"nofollow noreferrer\">flipkart.com/womens-footwear/heels/&hellip;</a>)  suppose i&#39;m hitting the above url &amp; i want to check whether it contains &quot;heels&quot; or not.. like this.."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474467552, "post_id": 39618202, "comment_id": 66544431, "body": "Do you want to check whether that URL contains the string <code>&quot;heels&quot;</code> or whether the HTML document contains <code>&quot;heels&quot;</code>?"}, {"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474467618, "post_id": 39618202, "comment_id": 66544496, "body": "whether the url contains &#39;heels&#39;"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474467811, "post_id": 39618202, "comment_id": 66544623, "body": "And what about an URL containing the string within another word, e.g. <code>flipkart.com&#47;wheels&#47;</code>. Should it match or do you want to match whole words or maybe whole path segments only? (the latter would involve splitting the URL into its components)"}, {"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474468035, "post_id": 39618202, "comment_id": 66544793, "body": "i want to match <b>/heels/</b> only"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474468349, "post_id": 39618202, "comment_id": 66545020, "body": "Thank you very much for the explanation. You should add the information from the comments to your question and edit your example code to reflect your actual problem (i.e. provide a value for <code>ipt_string</code>, use <code>&#39;&#47;heels&#47;&#39;</code> instead of <code>&#39;a&#39;</code> etc). Furthermore you should either clarify what this <code>gsub</code> is about or remove it from your example."}], "answers": [{"comments": [{"owner": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1474466471, "post_id": 39618539, "comment_id": 66543595, "body": "A string without spaces would fail the first test, no?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 3467, "user_id": 906511, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/61286bced0ae2da15261439d1bb62297?s=128&d=identicon&r=PG", "display_name": "lcguida", "link": "https://stackoverflow.com/users/906511/lcguida"}, "edited": false, "score": 0, "creation_date": 1474466526, "post_id": 39618539, "comment_id": 66543619, "body": "@lcguida indeed, it ought to be <code>.split(&#39;&#39;)</code>, edited, thanks!"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474467030, "post_id": 39618539, "comment_id": 66544026, "body": "@Stefan indeed shorter :)"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474468422, "post_id": 39618539, "comment_id": 66545067, "body": "Regarding your edit: I assume each of the strings is actually a path segment."}, {"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474468536, "post_id": 39618539, "comment_id": 66545139, "body": "suppose there are 5 strings like &#39;/heels/&#39;   .. so i can&#39;t always use <b>.include?</b>  i want to optimize this.."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474468717, "post_id": 39618539, "comment_id": 66545269, "body": "@J.Adhikari as you can see, your question is still unclear. There are probably various ways to solve it, and I&#39;d like to see more answers. So please take the time to edit your question."}, {"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474468794, "post_id": 39618539, "comment_id": 66545307, "body": "yes. each of the string is actually a path segment.@Stefan"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474468968, "post_id": 39618539, "comment_id": 66545419, "body": "@J.Adhikari I&#39;ve edited the answer for the case of multiple path&#39;s segments.  Have to leave for a short while now"}, {"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474522069, "post_id": 39618539, "comment_id": 66566611, "body": "@AndreyDeineko how to write all the path segment into <code>list_of_strings</code>  i&#39;ve modified my code. can you suggest how to write all the path segment into <code>list_of_strings</code> ."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 1, "creation_date": 1474522176, "post_id": 39618539, "comment_id": 66566654, "body": "@J.Adhikari yeah, just create an array: list_of_strings = [&#39;foo&#39;, &#39;bar&#39;, &#39;baz&#39;]"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474536048, "post_id": 39618539, "comment_id": 66574325, "body": "@J.Adhikari make sure to accept the answer if that&#39;s working (checkmark on the left of the answer)"}, {"owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474536511, "post_id": 39618539, "comment_id": 66574626, "body": "what does <code>none?</code> do?  if it was <code>point.include?(&#39;&#47;catogories&#47;&#39;)</code> then what i can do?? @AndreyDeineko"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "edited": false, "score": 0, "creation_date": 1474536590, "post_id": 39618539, "comment_id": 66574670, "body": "@J.Adhikari Check <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-none-3F\" rel=\"nofollow noreferrer\">Enumerable#<code>none?</code></a>"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 5, "last_activity_date": 1474468894, "last_edit_date": 1474468894, "creation_date": 1474465861, "answer_id": 39618539, "question_id": 39618202, "link": "https://stackoverflow.com/questions/39618202/how-can-i-simplify-too-many-and-or-in-ruby/39618539#39618539", "title": "How can I simplify too many AND/OR in ruby", "body": "<p>First option:</p>\n\n<pre><code>if @profile &amp;&amp; (%w(a b c d e) &amp; point.split('')).none?\n</code></pre>\n\n<p>Other option would be to use a regex:</p>\n\n<pre><code>if @profile &amp;&amp; !point.match(/[abcde]/)\n</code></pre>\n\n<p>As @Stefan pointed in comments, somewhat shorter version:</p>\n\n<pre><code>if @profile &amp;&amp; point !~ /[abcde]/\n</code></pre>\n\n<hr>\n\n<p>As to the OP comment on the checking</p>\n\n<blockquote>\n  <p>whether the url contains <code>'/heels/'</code></p>\n</blockquote>\n\n<p>Since it is a specific string of characters you're looking for, I think checking for inclusion would do:</p>\n\n<pre><code>if @profile &amp;&amp; !point.include?('/heels/')\n</code></pre>\n\n<h1>EDIT</h1>\n\n<p>Having a <code>list_of_strings</code> that you want to check for within a <code>point</code>, you could go with:</p>\n\n<pre><code>if @profile &amp;&amp; list_of_strings.none? { |str| point.include?(str) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474478378, "post_id": 39618556, "comment_id": 66551181, "body": "I suggest <code>&#39;pet&#39; !~ &#47;[abcde]&#47; #=&gt; false; &#39;pot&#39; !~ &#47;[abcde]&#47; #=&gt; true</code>."}], "tags": [], "owner": {"reputation": 1122, "user_id": 4249632, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7c374d3088b82556c41945816b9ce5c2?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Hertz", "link": "https://stackoverflow.com/users/4249632/ryan-hertz"}, "is_accepted": false, "score": 2, "last_activity_date": 1474465918, "creation_date": 1474465918, "answer_id": 39618556, "question_id": 39618202, "link": "https://stackoverflow.com/questions/39618202/how-can-i-simplify-too-many-and-or-in-ruby/39618556#39618556", "title": "How can I simplify too many AND/OR in ruby", "body": "<p>You could use <code>match</code> with a regular expression:</p>\n\n<pre><code>&gt; \"a string of text\".match(/[abcde]/).nil?\n =&gt; false\n&gt; \"a string of text\".match(/[zq]/).nil?\n =&gt; true\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1474465934, "creation_date": 1474465934, "answer_id": 39618565, "question_id": 39618202, "link": "https://stackoverflow.com/questions/39618202/how-can-i-simplify-too-many-and-or-in-ruby/39618565#39618565", "title": "How can I simplify too many AND/OR in ruby", "body": "<pre><code>if @profile &amp;&amp; (/[abcde]/.match(point)).nil?\n</code></pre>\n\n<p>or </p>\n\n<pre><code>if @profile &amp;&amp; (/[abcde]/ =~ point).nil?\n</code></pre>\n"}], "owner": {"reputation": 123, "user_id": 6858583, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4f547ac5a3ab569fa83195da30b55a2a?s=128&d=identicon&r=PG&f=1", "display_name": "J.Adhikari", "link": "https://stackoverflow.com/users/6858583/j-adhikari"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 39618539, "answer_count": 3, "score": 2, "last_activity_date": 1474521826, "creation_date": 1474465080, "last_edit_date": 1474521826, "question_id": 39618202, "link": "https://stackoverflow.com/questions/39618202/how-can-i-simplify-too-many-and-or-in-ruby", "title": "How can I simplify too many AND/OR in ruby", "body": "<p>Below is my code. How to simplify this code?<br>\nI just want to avoid too many <code>&amp;&amp;</code> conditions.</p>\n\n<p>Suppose I've two url:</p>\n\n<pre><code>ipt_string = www.abc.com/catogories/profile/heels/\n\nipt_string = www.abc.com/me/payment/auth/\n\n    def to_uri(ipt_string)\n        point = ipt_string.gsub('{', '#{')\n        if @profile &amp;&amp; \n           !point.include?('/catogories/') &amp;&amp; \n           !point.include?('/profile/') &amp;&amp; \n           !point.include?('/heels/') &amp;&amp; \n           !point.include?('/me/') &amp;&amp; \n           !point.include?('/payment/') &amp;&amp; \n           !point.include?('/auth/')\n        { ... }\n</code></pre>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 30536, "user_id": 400222, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/75febe3a9bd5b1ad9cb63fceccb6aa31?s=128&d=identicon&r=PG", "display_name": "StephenKing", "link": "https://stackoverflow.com/users/400222/stephenking"}, "is_accepted": true, "score": 6, "last_activity_date": 1474465609, "creation_date": 1474465609, "answer_id": 39618430, "question_id": 39618040, "link": "https://stackoverflow.com/questions/39618040/how-to-explicitly-reference-core-classes-in-ruby/39618430#39618430", "title": "How to explicitly reference core classes in Ruby?", "body": "<p>Prepend the class name with <code>::</code>, i.e., <code>::File</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 12201, "user_id": 584676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/8Zc84.jpg?s=128&g=1", "display_name": "Bender the Greatest", "link": "https://stackoverflow.com/users/584676/bender-the-greatest"}, "edited": false, "score": 0, "creation_date": 1474910081, "post_id": 39693177, "comment_id": 66715216, "body": "Overload was probably not the right term to use here. I meant that Chef clearly also had a File class, which File was resolving to instead of the ::File class. I meant &quot;overload&quot; similarly to what it means to use the same name for multiple functions or methods, though I don&#39;t know a better term to use when referring to classes that &quot;stomp&quot; on other classes that might be available."}, {"owner": {"reputation": 12201, "user_id": 584676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/8Zc84.jpg?s=128&g=1", "display_name": "Bender the Greatest", "link": "https://stackoverflow.com/users/584676/bender-the-greatest"}, "edited": false, "score": 0, "creation_date": 1474910637, "post_id": 39693177, "comment_id": 66715518, "body": "In either event, thanks for the correction. I&#39;ve edited the original question to use a different moniker to describe the behavior I was experiencing."}], "tags": [], "owner": {"reputation": 3556, "user_id": 506908, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84c874984f69ef596764255efcd79113?s=128&d=identicon&r=PG", "display_name": "lamont", "link": "https://stackoverflow.com/users/506908/lamont"}, "is_accepted": false, "score": 1, "last_activity_date": 1474849875, "creation_date": 1474849875, "answer_id": 39693177, "question_id": 39618040, "link": "https://stackoverflow.com/questions/39618040/how-to-explicitly-reference-core-classes-in-ruby/39693177#39693177", "title": "How to explicitly reference core classes in Ruby?", "body": "<p>Note that Chef itself does not overload anything here.  The problem is that you are in a <code>::Chef::Resource::RubyBlock</code> and you're attempting to do a symbol lookup on \"File\".  The Ruby Language searches upwards and finds <code>::Chef::Resource::File</code> before it finds <code>::File</code>.  The correct solution is to use <code>::File.dirname</code> and that is simply a feature (which could not be easily changed without a ton of breakage) of Ruby.</p>\n"}], "owner": {"reputation": 12201, "user_id": 584676, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/8Zc84.jpg?s=128&g=1", "display_name": "Bender the Greatest", "link": "https://stackoverflow.com/users/584676/bender-the-greatest"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "accepted_answer_id": 39618430, "answer_count": 2, "score": 1, "last_activity_date": 1474910576, "creation_date": 1474464689, "last_edit_date": 1474910576, "question_id": 39618040, "link": "https://stackoverflow.com/questions/39618040/how-to-explicitly-reference-core-classes-in-ruby", "title": "How to explicitly reference core classes in Ruby?", "body": "<p>I'm working with Chef, and I have run into a situation where I need to use the Ruby <code>File.dirname()</code> class method. Problem is, Chef has it's own <code>Chef::Resource::File</code> class which is resolved when executing code within a <code>ruby_block</code> resource. How can one explicitly reference the core namespace File class when there is a naming conflict?</p>\n"}, {"tags": ["mysql", "ruby", "macos", "rubygems", "macos-sierra"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474469116, "post_id": 39617761, "comment_id": 66545510, "body": "I wonder if this answers your question: <a href=\"https://stackoverflow.com/questions/30834421/error-when-trying-to-install-app-with-mysql2-gem\" title=\"error when trying to install app with mysql2 gem\">stackoverflow.com/questions/30834421/&hellip;</a>"}, {"owner": {"reputation": 5743, "user_id": 977687, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/67ddb32384a4b119e289644190aadad3?s=128&d=identicon&r=PG", "display_name": "Caio Tarifa", "link": "https://stackoverflow.com/users/977687/caio-tarifa"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474474172, "post_id": 39617761, "comment_id": 66548793, "body": "Thanks, @spickermann. But it doesn&#39;t help me, same results after <code>brew install openssl</code>."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 2, "creation_date": 1474485378, "post_id": 39617761, "comment_id": 66554874, "body": "Did you also try <code>brew reinstall openssl &amp;&amp; brew link openssl --force</code>"}, {"owner": {"reputation": 143, "user_id": 2681105, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c7fa7078805cfa1b24e6fd524359055c?s=128&d=identicon&r=PG", "display_name": "Tony Hsieh", "link": "https://stackoverflow.com/users/2681105/tony-hsieh"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1475573212, "post_id": 39617761, "comment_id": 66985564, "body": "@spickermann This works for me!"}, {"owner": {"reputation": 870, "user_id": 740004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/3181e5b8bc041593b6f481f137e461ad?s=128&d=identicon&r=PG", "display_name": "zx1986", "link": "https://stackoverflow.com/users/740004/zx1986"}, "edited": false, "score": 0, "creation_date": 1560670583, "post_id": 39617761, "comment_id": 99807762, "body": "<a href=\"https://qiita.com/tktcorporation/items/0ef8c930fc18ce72c301\" rel=\"nofollow noreferrer\">qiita.com/tktcorporation/items/0ef8c930fc18ce72c301</a>"}], "answers": [{"comments": [{"owner": {"reputation": 342, "user_id": 7368783, "user_type": "registered", "accept_rate": 20, "profile_image": "https://i.stack.imgur.com/iedz3.jpg?s=128&g=1", "display_name": "Naveen Honest Raj K", "link": "https://stackoverflow.com/users/7368783/naveen-honest-raj-k"}, "edited": false, "score": 1, "creation_date": 1502883086, "post_id": 39628488, "comment_id": 78382684, "body": "This worked for me. It threw me &quot;nil build&quot; warning. I tried bundle install in next line, it worked for me. Thanks man."}, {"owner": {"reputation": 534, "user_id": 1055045, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e3bea0eb5ce2333ae2839f56c198ff4?s=128&d=identicon&r=PG", "display_name": "dft", "link": "https://stackoverflow.com/users/1055045/dft"}, "edited": false, "score": 0, "creation_date": 1510125069, "post_id": 39628488, "comment_id": 81296299, "body": "Yeah works, thanks for saving me from banging my head for hours more"}, {"owner": {"reputation": 11394, "user_id": 794481, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/344337b6819f2f513fa80bb227be3c2d?s=128&d=identicon&r=PG", "display_name": "Tallboy", "link": "https://stackoverflow.com/users/794481/tallboy"}, "edited": false, "score": 2, "creation_date": 1549922018, "post_id": 39628488, "comment_id": 96071369, "body": "Thank god... Alessandro, Lady Gaga should do a song about you"}, {"owner": {"reputation": 649, "user_id": 5032236, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0225cc03143205e3cc88f1e44a4765b7?s=128&d=identicon&r=PG&f=1", "display_name": "Amituuush", "link": "https://stackoverflow.com/users/5032236/amituuush"}, "edited": false, "score": 0, "creation_date": 1554836321, "post_id": 39628488, "comment_id": 97895367, "body": "I second that ^^"}, {"owner": {"reputation": 628, "user_id": 2970582, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/0i4u3.jpg?s=128&g=1", "display_name": "Sathish", "link": "https://stackoverflow.com/users/2970582/sathish"}, "edited": false, "score": 1, "creation_date": 1567870373, "post_id": 39628488, "comment_id": 102098766, "body": "response after the command: <code>You are replacing the current local value of build.mysql2, which is currently nil</code> running <code>bundle install</code> after this worked"}, {"owner": {"reputation": 3733, "user_id": 3443096, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/j4QAh.jpg?s=128&g=1", "display_name": "Cokorda Raka", "link": "https://stackoverflow.com/users/3443096/cokorda-raka"}, "edited": false, "score": 0, "creation_date": 1580147715, "post_id": 39628488, "comment_id": 105994532, "body": "Thanks. This works for me, without installing xcode."}, {"owner": {"reputation": 387, "user_id": 1438478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/161330b50e55ef9cc72f5e9bc9b056c3?s=128&d=identicon&r=PG", "display_name": "Fralcon", "link": "https://stackoverflow.com/users/1438478/fralcon"}, "edited": false, "score": 0, "creation_date": 1591816569, "post_id": 39628488, "comment_id": 110203972, "body": "I tried this but it didn&#39;t work for me on 10.15 Catalina. See Fed C&#39;s fix for what worked."}], "tags": [], "owner": {"reputation": 2299, "user_id": 6861120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7a1e3d06e1b66b5d3963b7cdf4b780a?s=128&d=identicon&r=PG", "display_name": "Alessandro Berardi", "link": "https://stackoverflow.com/users/6861120/alessandro-berardi"}, "is_accepted": false, "score": 66, "last_activity_date": 1474504478, "creation_date": 1474504478, "answer_id": 39628488, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/39628488#39628488", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>When you install openssl via brew, you should get the following message:</p>\n\n<blockquote>\n  <p>Apple has deprecated use of OpenSSL in favor of its own TLS and crypto libraries</p>\n  \n  <p>Generally there are no consequences of this for you. If you build your\n  own software and it requires this formula, you'll need to add to your\n  build variables:</p>\n  \n  <p>LDFLAGS:  -L/usr/local/opt/openssl/lib<br>\n     CPPFLAGS: -I/usr/local/opt/openssl/include<br>\n     PKG_CONFIG_PATH: /usr/local/opt/openssl/lib/pkgconfig  </p>\n</blockquote>\n\n<p>You can set these build flags (for the local application) by running the following:</p>\n\n<pre><code>bundle config --local build.mysql2 \"--with-ldflags=-L/usr/local/opt/openssl/lib --with-cppflags=-I/usr/local/opt/openssl/include\"\n</code></pre>\n\n<p>This worked for me.</p>\n\n<p>See <a href=\"http://bundler.io/v1.13/man/bundle-config.1.html\">bundler's documentation</a> for more information.</p>\n"}, {"comments": [{"owner": {"reputation": 307, "user_id": 857497, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3efada5ea46799f091968fa307dc7f7?s=128&d=identicon&r=PG", "display_name": "arthur bryant", "link": "https://stackoverflow.com/users/857497/arthur-bryant"}, "edited": false, "score": 1, "creation_date": 1481619104, "post_id": 39730475, "comment_id": 69437823, "body": "I encountered the same problem after I update to MacOS Sierra 10.12.1  Thanks!"}, {"owner": {"reputation": 1298, "user_id": 1290849, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/5HVgI.png?s=128&g=1", "display_name": "Qasim", "link": "https://stackoverflow.com/users/1290849/qasim"}, "edited": false, "score": 0, "creation_date": 1492758534, "post_id": 39730475, "comment_id": 74124372, "body": "After doing this I got a different error: <code>Permission denied @ rb_sysopen</code>. That got fixed by using Sudo: <code>sudo bundle install</code>. Not an ideal solution, but hey, it worked!"}, {"owner": {"reputation": 7972, "user_id": 543315, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1b1cc141d08272ff09997044dc980e8c?s=128&d=identicon&r=PG", "display_name": "Nic Cottrell", "link": "https://stackoverflow.com/users/543315/nic-cottrell"}, "edited": false, "score": 8, "creation_date": 1495401012, "post_id": 39730475, "comment_id": 75223841, "body": "On my 10.12.4 is just says <code>xcode-select: error: command line tools are already installed, use &quot;Software Update&quot; to install updates</code>. Any other way to force reinstall?"}, {"owner": {"reputation": 387, "user_id": 1438478, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/161330b50e55ef9cc72f5e9bc9b056c3?s=128&d=identicon&r=PG", "display_name": "Fralcon", "link": "https://stackoverflow.com/users/1438478/fralcon"}, "reply_to_user": {"reputation": 7972, "user_id": 543315, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/1b1cc141d08272ff09997044dc980e8c?s=128&d=identicon&r=PG", "display_name": "Nic Cottrell", "link": "https://stackoverflow.com/users/543315/nic-cottrell"}, "edited": false, "score": 0, "creation_date": 1591816790, "post_id": 39730475, "comment_id": 110204081, "body": "@NicCottrell When running brew doctor I saw this message  Warning: A newer Command Line Tools release is available. Update them from Software Update in System Preferences or run:   softwareupdate --all --install --force  If that doesn&#39;t show you an update run:   sudo rm -rf /Library/Developer/CommandLineTools   sudo xcode-select --install"}], "tags": [], "owner": {"reputation": 1147, "user_id": 920852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f3aefbb92ea1ab4baa971e04ac926302?s=128&d=identicon&r=PG", "display_name": "kylekeesling", "link": "https://stackoverflow.com/users/920852/kylekeesling"}, "is_accepted": false, "score": 102, "last_activity_date": 1474995758, "creation_date": 1474995758, "answer_id": 39730475, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/39730475#39730475", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>I just had the same problem, tried all of the solutions listed above, then commenced to bang my head against they keyboard for a couple of hours.</p>\n\n<p>I then thought to try and install/reinstall the Xcode Command Line Tools:</p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>Once I did that the mysql2 gem installed w/ no problems. I hope that does the trick!</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 3152401, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/926724115932756600c3281ac6f3b2db?s=128&d=identicon&r=PG&f=1", "display_name": "Takavost", "link": "https://stackoverflow.com/users/3152401/takavost"}, "is_accepted": false, "score": -2, "last_activity_date": 1475725597, "creation_date": 1475725597, "answer_id": 39887200, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/39887200#39887200", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>First, you should try 2 answer in <a href=\"https://stackoverflow.com/questions/30834421/error-when-trying-to-install-app-with-mysql2-gem\">here</a>\nIf you installed openssl but it still don't work. You should try to o refresh gems reference. A got the same issue and it worked for me.</p>\n\n<p><code>gem source -r https://rubygems.org/</code></p>\n\n<p><code>gem source -a https://rubygems.org/</code></p>\n"}, {"comments": [{"owner": {"reputation": 405, "user_id": 1351813, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3565ada7efb902086f0a896a48223c36?s=128&d=identicon&r=PG", "display_name": "Cory Ringdahl", "link": "https://stackoverflow.com/users/1351813/cory-ringdahl"}, "edited": false, "score": 0, "creation_date": 1500402450, "post_id": 42662670, "comment_id": 77317066, "body": "Same worked with Percona, though I had to force it: <code>brew link --force percona-server56</code>"}], "tags": [], "owner": {"reputation": 309, "user_id": 2403892, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c07419a5b0760e65a14ef9cf5c9cfbf9?s=128&d=identicon&r=PG", "display_name": "Stuart Hannig", "link": "https://stackoverflow.com/users/2403892/stuart-hannig"}, "is_accepted": false, "score": 12, "last_activity_date": 1488945044, "creation_date": 1488945044, "answer_id": 42662670, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/42662670#42662670", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>I am here to share my fix, since the other answers didn't work. </p>\n\n<p>For my environment, I need MySQL 5.6 so I had to use:</p>\n\n<p><code>brew install mysql56</code> instead of <code>brew install mysql</code></p>\n\n<p>Bundle installing the mysql2 gem kept failing, until:</p>\n\n<p><code>brew link mysql56</code></p>\n\n<p>I also ran afterwards:</p>\n\n<p><code>mysql.server start</code></p>\n\n<p>The last step might be unnecessary, but <strong>just</strong> in case.</p>\n"}, {"comments": [{"owner": {"reputation": 88, "user_id": 1720272, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fc19f2aee74fbb16d1f6627d27518f5?s=128&d=identicon&r=PG", "display_name": "sergey.radov", "link": "https://stackoverflow.com/users/1720272/sergey-radov"}, "edited": false, "score": 1, "creation_date": 1572807528, "post_id": 43606384, "comment_id": 103666490, "body": "This solution works time-to-time. After 10.14 it refers to App Store."}], "tags": [], "owner": {"reputation": 2111, "user_id": 1846982, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/9979071c5c3697ae9e8b8f50062a1782?s=128&d=identicon&r=PG&f=1", "display_name": "Bloomberg", "link": "https://stackoverflow.com/users/1846982/bloomberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1493111671, "creation_date": 1493111671, "answer_id": 43606384, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/43606384#43606384", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>Try installing xcode-select --install</p>\n"}, {"tags": [], "owner": {"reputation": 19, "user_id": 7192722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0eefe70aaa82e00ddd9c7614aec0cf43?s=128&d=identicon&r=PG&f=1", "display_name": "Paulissimo", "link": "https://stackoverflow.com/users/7192722/paulissimo"}, "is_accepted": false, "score": 1, "last_activity_date": 1495208326, "creation_date": 1495208326, "answer_id": 44074030, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/44074030#44074030", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>So I ran into this similar issue and for me it turned out to be a wrong ruby version and incompatible MySQL version.   I use ruby 2.3 on most of my projects but inherited a 2.1 project.  Changing to rvm to use 2.1 got me a little further.</p>\n\n<p>Then I found this: <a href=\"https://github.com/brianmario/mysql2/issues/603\" rel=\"nofollow noreferrer\">https://github.com/brianmario/mysql2/issues/603</a> that said you had to use mysql2 gem version greater than 0.3.17 with MySQL version 5.7</p>\n\n<p>Updated gem to 0.3.17 and it fired right up.   Hope this helps someone.</p>\n"}, {"comments": [{"owner": {"reputation": 13468, "user_id": 635887, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/63a54e77591e1f9a75d3be9a195db45f?s=128&d=identicon&r=PG", "display_name": "Ray Hunter", "link": "https://stackoverflow.com/users/635887/ray-hunter"}, "edited": false, "score": 0, "creation_date": 1515462030, "post_id": 45070262, "comment_id": 83300244, "body": "Also ran the command <b>xcode-select --install</b> as well and that worked for me."}], "tags": [], "owner": {"reputation": 103, "user_id": 5733972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ac227c01bdb68a77d7ed015738ed830?s=128&d=identicon&r=PG", "display_name": "B Liu", "link": "https://stackoverflow.com/users/5733972/b-liu"}, "is_accepted": false, "score": 2, "last_activity_date": 1499911292, "creation_date": 1499911292, "answer_id": 45070262, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/45070262#45070262", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>Almost the same scenario as @Caio Tarifa, Ruby 2.3.3, mysql 5.6 and mysql2. Tried on couple of solutions above and finally make it work with @kylekeesling's approach.</p>\n\n<p>First, tried on solution 1 by @spickermann: </p>\n\n<pre><code>brew reinstall openssl &amp;&amp; brew link openssl --force\n</code></pre>\n\n<p>Nothing happened, same error shown.</p>\n\n<p>Second, tried on solution by @Alessandro Berardi: </p>\n\n<pre><code>bundle config --local build.mysql2 \"--with-ldflags=-L/usr/local/opt/openssl/lib --with-cppflags=-I/usr/local/opt/openssl/include\"\n</code></pre>\n\n<p>This got different but more errors since it overwrite gem extension's config so all gem extension installation failed.</p>\n\n<p>Finally, tried on @kylekeesling solution:</p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>It fix mysql gem issue as well as nikogiri. Since I already intall Xcode, in my case it's reinstall the Xcode Command Line Tools.  </p>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 1422059, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/68b931b9d46b25d65d6e404b0c9ca549?s=128&d=identicon&r=PG&f=1", "display_name": "MIA", "link": "https://stackoverflow.com/users/1422059/mia"}, "edited": false, "score": 0, "creation_date": 1562229238, "post_id": 55603562, "comment_id": 100315012, "body": "Thank you! I was not comfortable <code>bundle config</code> either."}, {"owner": {"reputation": 562, "user_id": 7091659, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qEgyy.jpg?s=128&g=1", "display_name": "Cuong Vo", "link": "https://stackoverflow.com/users/7091659/cuong-vo"}, "edited": false, "score": 0, "creation_date": 1608106251, "post_id": 55603562, "comment_id": 115478100, "body": "Great! Thanks man, it worked for me."}], "tags": [], "owner": {"reputation": 679, "user_id": 1391598, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/884f2cefcf98aa542f22a6870c8de9e2?s=128&d=identicon&r=PG", "display_name": "Yoav Epstein", "link": "https://stackoverflow.com/users/1391598/yoav-epstein"}, "is_accepted": false, "score": 19, "last_activity_date": 1554860671, "creation_date": 1554860671, "answer_id": 55603562, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/55603562#55603562", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>Lots of great answers, I was able to combine them into this:</p>\n\n<pre><code>gem install mysql2 --source 'https://rubygems.org/' -- --with-ldflags=-L/usr/local/opt/openssl/lib --with-cppflags=-I/usr/local/opt/openssl/include\n</code></pre>\n\n<p>because I was not comfortable with <code>bundle config</code></p>\n"}, {"tags": [], "owner": {"reputation": 105, "user_id": 9272737, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-E_FNFd54uV4/AAAAAAAAAAI/AAAAAAAAAYI/Zr70ZKLdUgc/photo.jpg?sz=128", "display_name": "Fed C", "link": "https://stackoverflow.com/users/9272737/fed-c"}, "is_accepted": false, "score": 8, "last_activity_date": 1573255466, "creation_date": 1573255466, "answer_id": 58774914, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/58774914#58774914", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>With Mac OS 10.15 Catalina when I tried Alessandro's fix the gem and extensions could be installed correctly but <code>bundle install</code> failed. What worked  was just:</p>\n\n<pre><code>bundle config --local build.mysql2 \"--with-ldflags=-L/usr/local/opt/openssl/lib\"\n</code></pre>\n\n<p>without the <code>cppflags</code> part.</p>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 3503608, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5f1f2298cd3edc7378a86972e3f34be0?s=128&d=identicon&r=PG&f=1", "display_name": "Ebram Sherif", "link": "https://stackoverflow.com/users/3503608/ebram-sherif"}, "is_accepted": false, "score": 0, "last_activity_date": 1574012484, "creation_date": 1574012484, "answer_id": 58903307, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/58903307#58903307", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>If none of the above works .. like in my case, doing this solved the issue\n<code>brew install openssl</code></p>\n\n<p>FYI: i am using MacOS Catalina</p>\n"}, {"comments": [{"owner": {"reputation": 1542, "user_id": 241367, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/92846a05a82bdafc979bd6166337461c?s=128&d=identicon&r=PG", "display_name": "thekingoftruth", "link": "https://stackoverflow.com/users/241367/thekingoftruth"}, "edited": false, "score": 0, "creation_date": 1586236876, "post_id": 60642078, "comment_id": 108046784, "body": "This worked for someone I was helping who was on Sierra. My computer, which is on Mojave, worked with cppflags included, however."}], "tags": [], "owner": {"reputation": 41, "user_id": 4534697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ecdb4d01a1d0d6953c509012f819e121?s=128&d=identicon&r=PG&f=1", "display_name": "Codecode", "link": "https://stackoverflow.com/users/4534697/codecode"}, "is_accepted": false, "score": 3, "last_activity_date": 1583964192, "last_edit_date": 1583964192, "creation_date": 1583949733, "answer_id": 60642078, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/60642078#60642078", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>Here's what worked for me.</p>\n\n<p>Originally I ran: </p>\n\n<pre><code>$ bundle config --local build.mysql2 \"--with-ldflags=-L/usr/local/opt/openssl/lib --with-cppflags=-I/usr/local/opt/openssl/include\"\n</code></pre>\n\n<p>then</p>\n\n<pre><code>$ bundle install\n</code></pre>\n\n<p>I received an error in  /Users/.../.bundle/ruby/2.5.0/extensions/x86_64-darwin-18/2.5.0/mysql2-0.5.3/mkmf.log :</p>\n\n<p><strong>clang: error: unsupported option '--with-cppflags=-I/usr/local/opt/openssl/include'</strong></p>\n\n<p>So I removed <em>\"--with-cppflags=-I/usr/local/opt/openssl/include\"</em></p>\n\n<p>Then ran:</p>\n\n<pre><code>$ bundle config --local build.mysql2 \"--with-ldflags=-L/usr/local/opt/openssl/lib\"\n</code></pre>\n\n<p>followed by:</p>\n\n<pre><code>$ bundle install\n</code></pre>\n\n<p>Which worked.</p>\n"}, {"tags": [], "owner": {"reputation": 157, "user_id": 1031702, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/029f198b9057e5c8683e9b1001954d56?s=128&d=identicon&r=PG", "display_name": "Gregory Ray", "link": "https://stackoverflow.com/users/1031702/gregory-ray"}, "is_accepted": false, "score": 0, "last_activity_date": 1596406757, "creation_date": 1596406757, "answer_id": 63221554, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra/63221554#63221554", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>So I tried everything here to no avail. Seems like a problem with ruby 2.6.0, I downgraded to 2.3.4p301 and everything worked fine (with <code>bundle config --local build.mysql2 &quot;--with-ldflags=-L/usr/local/opt/openssl/lib --with-cppflags=-I/usr/local/opt/openssl/include&quot;</code>)</p>\n"}], "owner": {"reputation": 5743, "user_id": 977687, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/67ddb32384a4b119e289644190aadad3?s=128&d=identicon&r=PG", "display_name": "Caio Tarifa", "link": "https://stackoverflow.com/users/977687/caio-tarifa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21882, "favorite_count": 14, "answer_count": 12, "score": 50, "last_activity_date": 1596406757, "creation_date": 1474463987, "question_id": 39617761, "link": "https://stackoverflow.com/questions/39617761/cant-install-mysql2-gem-on-macos-sierra", "title": "Can&#39;t install mysql2 gem on macOS Sierra", "body": "<p>I'm setting up my development environment in the new <strong>macOS Sierra</strong> \uf8ff.</p>\n\n<p>First of all, I installed <strong>Rbenv</strong>, <strong>Ruby (2.3.1)</strong>, <strong>Homebrew</strong> and so the latest version of <strong>MySQL (5.7.15)</strong>.</p>\n\n<pre><code>$ brew install mysql\n$ mysql.server start\n</code></pre>\n\n<p>Ok, MySQL was initialized. Time to install the <strong>mysql2</strong> gem...</p>\n\n<pre><code>$ gem install mysql2 -- --with-mysql-config=/usr/local/Cellar/mysql/5.7.15/bin/mysql_config\n</code></pre>\n\n<p>But it didn't work. \ud83d\ude1e </p>\n\n<hr>\n\n<pre><code>Building native extensions with: '--with-mysql-config=/usr/local/Cellar/mysql/5.7.15/bin/mysql_config'\nThis could take a while...\nERROR:  Error installing mysql2:\n    ERROR: Failed to build gem native extension.\n\n    current directory: /Users/macuser/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/mysql2-0.4.4/ext/mysql2\n/Users/macuser/.rbenv/versions/2.3.1/bin/ruby -r ./siteconf20160921-16853-x1boio.rb extconf.rb --with-mysql-config=/usr/local/Cellar/mysql/5.7.15/bin/mysql_config\nchecking for ruby/thread.h... yes\nchecking for rb_thread_call_without_gvl() in ruby/thread.h... yes\nchecking for rb_thread_blocking_region()... no\nchecking for rb_wait_for_single_fd()... yes\nchecking for rb_hash_dup()... yes\nchecking for rb_intern3()... yes\n-----\nUsing mysql_config at /usr/local/Cellar/mysql/5.7.15/bin/mysql_config\n-----\nchecking for mysql.h... yes\nchecking for errmsg.h... yes\nchecking for mysqld_error.h... yes\n-----\nDont know how to set rpath on your system, if MySQL libraries are not in path mysql2 may not load\n-----\n-----\nSetting libpath to /usr/local/Cellar/mysql/5.7.15/lib\n-----\ncreating Makefile\n\nTo see why this extension failed to compile, please check the mkmf.log which can be found here:\n\n  /Users/macuser/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-16/2.3.0-static/mysql2-0.4.4/mkmf.log\n\ncurrent directory: /Users/macuser/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/mysql2-0.4.4/ext/mysql2\nmake \"DESTDIR=\" clean\n\ncurrent directory: /Users/macuser/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/mysql2-0.4.4/ext/mysql2\nmake \"DESTDIR=\"\ncompiling client.c\ncompiling infile.c\ncompiling mysql2_ext.c\ncompiling result.c\ncompiling statement.c\nlinking shared-object mysql2/mysql2.bundle\nld: library not found for -lssl\nclang: error: linker command failed with exit code 1 (use -v to see invocation)\nmake: *** [mysql2.bundle] Error 1\n\nmake failed, exit code 2\n\nGem files will remain installed in /Users/macuser/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/mysql2-0.4.4 for inspection.\nResults logged to /Users/macuser/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/extensions/x86_64-darwin-16/2.3.0-static/mysql2-0.4.4/gem_make.out\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 1698, "user_id": 4587148, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/VjBAv.jpg?s=128&g=1", "display_name": "Sajan", "link": "https://stackoverflow.com/users/4587148/sajan"}, "edited": false, "score": 0, "creation_date": 1474466801, "post_id": 39617534, "comment_id": 66543844, "body": "Though you solved it, I think the problem was you were doing all operations like <code>assets:clobber</code> and <code>assets:precompile</code> inside a <code>heroku</code> instance of app instead of doing that in your local instance and pushing to heroku. And about your question, I wonder that too since I have started using heroku (i.e 1 year)."}], "answers": [{"comments": [{"owner": {"reputation": 164, "user_id": 3138171, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5e2b3ece676ae5dbfbbb3be9967255df?s=128&d=identicon&r=PG&f=1", "display_name": "YigitOzkavci", "link": "https://stackoverflow.com/users/3138171/yigitozkavci"}, "edited": false, "score": 0, "creation_date": 1474463989, "post_id": 39617596, "comment_id": 66541763, "body": "I already have github integration with enabled auto deploy. As I stated, I am pretty sure the application has been deployed."}, {"owner": {"reputation": 2292, "user_id": 5448888, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/898095120243525/picture?type=large", "display_name": "Chakreshwar Sharma", "link": "https://stackoverflow.com/users/5448888/chakreshwar-sharma"}, "reply_to_user": {"reputation": 164, "user_id": 3138171, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5e2b3ece676ae5dbfbbb3be9967255df?s=128&d=identicon&r=PG&f=1", "display_name": "YigitOzkavci", "link": "https://stackoverflow.com/users/3138171/yigitozkavci"}, "edited": false, "score": 0, "creation_date": 1474464079, "post_id": 39617596, "comment_id": 66541809, "body": "check the status of our code by git status, if it displays any files, then u need to add &amp; commit them"}, {"owner": {"reputation": 164, "user_id": 3138171, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5e2b3ece676ae5dbfbbb3be9967255df?s=128&d=identicon&r=PG&f=1", "display_name": "YigitOzkavci", "link": "https://stackoverflow.com/users/3138171/yigitozkavci"}, "edited": false, "score": 0, "creation_date": 1474464520, "post_id": 39617596, "comment_id": 66542108, "body": "What I want to know is, do we need to include our precompiled assets for committing? Isn&#39;t that violeting the reason behind compiling assets?  And as I said, I am sure that the problem isn&#39;t with the commits or pushes."}], "tags": [], "owner": {"reputation": 2292, "user_id": 5448888, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/898095120243525/picture?type=large", "display_name": "Chakreshwar Sharma", "link": "https://stackoverflow.com/users/5448888/chakreshwar-sharma"}, "is_accepted": false, "score": 0, "last_activity_date": 1474463611, "creation_date": 1474463611, "answer_id": 39617596, "question_id": 39617534, "link": "https://stackoverflow.com/questions/39617534/heroku-is-serving-old-assets-for-rails-5-application/39617596#39617596", "title": "Heroku is serving old assets for Rails 5 application", "body": "<p>You need to commit your changes first.\nThen execute <code>git push heroku yourbranch:master</code></p>\n"}, {"comments": [{"owner": {"reputation": 2510, "user_id": 2995613, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/3eb082f2910fcc8ebc7bb2f5ce5bc9ce?s=128&d=identicon&r=PG", "display_name": "Daniel", "link": "https://stackoverflow.com/users/2995613/daniel"}, "edited": false, "score": 2, "creation_date": 1488160276, "post_id": 41136177, "comment_id": 72093660, "body": "This is a botched solution.... You don&#39;t want to add the compiled assets to your git repository."}], "tags": [], "owner": {"reputation": 884, "user_id": 1675491, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LeqdU.jpg?s=128&g=1", "display_name": "Sandeep Kapil", "link": "https://stackoverflow.com/users/1675491/sandeep-kapil"}, "is_accepted": false, "score": 2, "last_activity_date": 1481697040, "creation_date": 1481697040, "answer_id": 41136177, "question_id": 39617534, "link": "https://stackoverflow.com/questions/39617534/heroku-is-serving-old-assets-for-rails-5-application/41136177#41136177", "title": "Heroku is serving old assets for Rails 5 application", "body": "<p>Run on local</p>\n\n<pre><code>RAILS_ENV=production bundle exec rake assets:precompile\n</code></pre>\n\n<p>Next <code>git add .</code></p>\n\n<p>Next <code>got commit -m\"assets precompile\"</code></p>\n\n<p>Next <code>git push origin yourBranchName</code></p>\n\n<p>Deploy on heroku and you are done</p>\n"}], "owner": {"reputation": 164, "user_id": 3138171, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/5e2b3ece676ae5dbfbbb3be9967255df?s=128&d=identicon&r=PG&f=1", "display_name": "YigitOzkavci", "link": "https://stackoverflow.com/users/3138171/yigitozkavci"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1509, "favorite_count": 1, "answer_count": 2, "score": 6, "last_activity_date": 1481697040, "creation_date": 1474463490, "last_edit_date": 1474466539, "question_id": 39617534, "link": "https://stackoverflow.com/questions/39617534/heroku-is-serving-old-assets-for-rails-5-application", "title": "Heroku is serving old assets for Rails 5 application", "body": "<p>I've deployed a new version of a Rails 5 app on Heroku, running on cedar-14 stack. It didn't precompile while deploying, so I did <code>heroku run rake assets:precompile</code> manually. Still, I can see it includes old assets while requiring <code>css</code> and <code>js</code> files.</p>\n\n<p>My files are in <code>app/assets</code> so it's not possible that directory isn't in assets compile path.</p>\n\n<p>My config on <code>application.rb</code> and <code>production.rb</code>:</p>\n\n<pre><code>config.assets.compile = true\n\n# I checked the environment variable, it responds to 'enabled',\n# which would return true for the option.\nconfig.public_file_server.enabled = ENV['RAILS_SERVE_STATIC_FILES'].present?\n\n# Which I changed to expire old assets.\nconfig.assets.version='1.1'\n</code></pre>\n\n<p>I tried these, but they didn't work:</p>\n\n<ul>\n<li><code>$ heroku restart</code></li>\n<li><code>$ heroku run rake assets:precompile</code></li>\n<li><code>$ heroku run rake assets:clobber</code></li>\n</ul>\n\n<p>The weird thing with these is that they do not affect assets in heroku server, which I checked with <code>$ heroku run ls public/assets</code>. Even after <code>$ rake assets:precompile</code>, even though it says this:</p>\n\n<pre><code>WRITING /app/public/assets/application-{VERY_LONG_HASH}.js\nWRITING /app/public/assets/application-{VERY_LONG_HASH}.js.gz\nWRITING /app/public/assets/application-{VERY_LONG_HASH}.css\nWRITING /app/public/assets/application-{VERY_LONG_HASH}.css.gz\n</code></pre>\n\n<p>when I peek with the <code>$ heroku run ls public/assets</code>, I still see old assets staying there.</p>\n\n<p><strong>EDIT:</strong> I solved it by deleting all the local assets in <code>public/assets</code>, recompiling them with <code>$ rake assets:clean &amp;&amp; rake assets:precompile</code> and including these assets in my <code>git</code> repository. Here is one concern:</p>\n\n<p>Shouldn't heroku be responsible of compiling my assets on the fly? I think I shouldn't be compiling my assets everytime I deploy my application. Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 244, "user_id": 3212137, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33a8f7bb50e0128916320f53052bbf2c?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Kumar", "link": "https://stackoverflow.com/users/3212137/akash-kumar"}, "is_accepted": false, "score": 0, "last_activity_date": 1474464582, "last_edit_date": 1495541300, "creation_date": 1474464582, "answer_id": 39618004, "question_id": 39617299, "link": "https://stackoverflow.com/questions/39617299/unexpected-error-while-processing-request-invalid-byte-sequence-in-utf-8/39618004#39618004", "title": "Unexpected error while processing request: invalid byte sequence in UTF-8 #", "body": "<p>just added</p>\n\n<pre><code>gem \"handle_invalid_percent_encoding_requests\"\n</code></pre>\n\n<p>working fine !</p>\n\n<p>solution from <a href=\"https://stackoverflow.com/a/24894410/3212137\">https://stackoverflow.com/a/24894410/3212137</a></p>\n"}], "owner": {"reputation": 244, "user_id": 3212137, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/33a8f7bb50e0128916320f53052bbf2c?s=128&d=identicon&r=PG&f=1", "display_name": "Akash Kumar", "link": "https://stackoverflow.com/users/3212137/akash-kumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 373, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474464582, "creation_date": 1474462835, "last_edit_date": 1474463472, "question_id": 39617299, "link": "https://stackoverflow.com/questions/39617299/unexpected-error-while-processing-request-invalid-byte-sequence-in-utf-8", "title": "Unexpected error while processing request: invalid byte sequence in UTF-8 #", "body": "<p>when enable rack-mini-profiler gem, it gives error</p>\n\n<pre><code>Unexpected error while processing request: invalid byte sequence in UTF-8\n</code></pre>\n\n<p>using</p>\n\n<pre><code> Rails v4.0.6\n\n rack-mini-profiler 0.10.1\n\n Ruby 2.2.0\n</code></pre>\n\n<p>only happen if enable rake-mini-profiler, otherwise application working fine.</p>\n\n<p>backtrace:</p>\n\n<pre><code>Unexpected error while processing request: invalid byte sequence in UTF-8\n\n/home/aa/.rvm/gems/ruby-2.2.0/gems/rack-mini-profiler-0.10.1/lib/mini_profiler/client_settings.rb:24:in `split'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/rack-mini-profiler-0.10.1/lib/mini_profiler/client_settings.rb:24:in `initialize'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/rack-mini-profiler-0.10.1/lib/mini_profiler/profiler.rb:153:in `new'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/rack-mini-profiler-0.10.1/lib/mini_profiler/profiler.rb:153:in `call'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/railties-4.0.6/lib/rails/engine.rb:511:in `call'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/railties-4.0.6/lib/rails/application.rb:97:in `call'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/rack-1.5.5/lib/rack/content_length.rb:14:in `call'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/thin-1.6.4/lib/thin/connection.rb:86:in `block in pre_process'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/thin-1.6.4/lib/thin/connection.rb:84:in `catch'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/thin-1.6.4/lib/thin/connection.rb:84:in `pre_process'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/thin-1.6.4/lib/thin/connection.rb:53:in `process'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/thin-1.6.4/lib/thin/connection.rb:39:in `receive_data'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.8/lib/eventmachine.rb:193:in `run_machine'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/eventmachine-1.0.8/lib/eventmachine.rb:193:in `run'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/thin-1.6.4/lib/thin/backends/base.rb:73:in `start'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/thin-1.6.4/lib/thin/server.rb:162:in `start'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/rack-1.5.5/lib/rack/handler/thin.rb:16:in `run'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/rack-1.5.5/lib/rack/server.rb:264:in `start'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/railties-4.0.6/lib/rails/commands/server.rb:84:in `start'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/railties-4.0.6/lib/rails/commands.rb:76:in `block in &lt;top (required)&gt;'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/railties-4.0.6/lib/rails/commands.rb:71:in `tap'\n/home/aa/.rvm/gems/ruby-2.2.0/gems/railties-4.0.6/lib/rails/commands.rb:71:in `&lt;top (required)&gt;'\nbin/rails:4:in `require'\nbin/rails:4:in `&lt;main&gt;'\n</code></pre>\n\n<p>I'm not sure, i think this error keep coming after 'Slim-Rails' gem</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "ruby-on-rails-4", "testunit"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1474459163, "post_id": 39615747, "comment_id": 66538413, "body": "Can you please post the full stack trace (not just the error message)? Because usually a stack trace will tell you the exact file and line in which the error happened and all methods that were involved calling that method."}, {"owner": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474459486, "post_id": 39615747, "comment_id": 66538626, "body": "I updated the question. I couldn&#39;t trace the unit test but I posted for the fixture error.."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1474459573, "post_id": 39615747, "comment_id": 66538685, "body": "Seems like the problem is in your fixtures file. Can you please post your fixtures? Or search for <code>users</code> within these files und just post that part?"}, {"owner": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474459737, "post_id": 39615747, "comment_id": 66538798, "body": "I added a part of the fixture. Could it be because of the plan reference inside erb?"}, {"owner": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474460931, "post_id": 39615747, "comment_id": 66539541, "body": "I have an user model, and the test database (mysql 2) has the users table, too, with all the foreign keys. Other fixtures have the same erb reference: &lt;%= users(:one).id %&gt;, but not an &#39;users&#39; string. Other models do associate users, also there is an association with user table attributes to the table users."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 1, "creation_date": 1474461277, "post_id": 39615747, "comment_id": 66539782, "body": "Is the fixtures file named <code>test&#47;fixtures&#47;users.yml</code>?"}, {"owner": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474467679, "post_id": 39615747, "comment_id": 66544546, "body": "Yes, it is. (filling some characters)"}], "answers": [{"comments": [{"owner": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "edited": false, "score": 1, "creation_date": 1474461321, "post_id": 39616593, "comment_id": 66539814, "body": "My user model migration was deleted, as I am working on a legacy database. Could that be the problem? (so my schema does not reflect my database)"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "edited": false, "score": 0, "creation_date": 1474461329, "post_id": 39616593, "comment_id": 66539825, "body": "Yes.  Since error <code>undefined method &#39;users&#39; </code> it indicates that the Class is not defined anywhere."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "edited": false, "score": 0, "creation_date": 1474461384, "post_id": 39616593, "comment_id": 66539857, "body": "try <code>rake db:test:prepare</code>"}, {"owner": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "edited": false, "score": 0, "creation_date": 1474461439, "post_id": 39616593, "comment_id": 66539897, "body": "I have the class user, the model is in app/models/user.rb, and everything works well in production or development.. this problem is only on the test database."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "edited": false, "score": 0, "creation_date": 1474462101, "post_id": 39616593, "comment_id": 66540408, "body": "what happens if you change <code>&lt;%= users(:one).id %&gt;</code> to <code>&lt;%= user(:one).id %&gt;</code>  based on your comment, not your question."}, {"owner": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "edited": false, "score": 0, "creation_date": 1474462470, "post_id": 39616593, "comment_id": 66540686, "body": "I tried already, same error ( changed once everything at singular, then everything at plural)..."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1474462132, "last_edit_date": 1474462132, "creation_date": 1474460996, "answer_id": 39616593, "question_id": 39615747, "link": "https://stackoverflow.com/questions/39615747/rails-unit-test-undefined-method-users/39616593#39616593", "title": "Rails unit test - undefined method &#39;users&#39;", "body": "<p>Check if you have a valid model file called <code>app/models/user.rb</code> and that if you generated the user model using <code>rails g model user</code> or if you have created a migration for the user table, that you run your migrations.</p>\n\n<pre><code>RAILS_ENV=test rake db:migrate\n</code></pre>\n\n<p>Your <code>app/models/user.rb</code> should contain at the very least:</p>\n\n<pre><code> class User &lt; ActiveRecord::Base\n end\n</code></pre>\n\n<p>UPDATE:  Your comment below says you've deleted the migration file.  You can always get your test DB to mirror development DB by doing\n    rake db:test:prepare</p>\n"}, {"tags": [], "owner": {"reputation": 79, "user_id": 2895951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f2c5c4ecf689d410126017e657018a1?s=128&d=identicon&r=PG&f=1", "display_name": "Eran Peer", "link": "https://stackoverflow.com/users/2895951/eran-peer"}, "is_accepted": true, "score": 1, "last_activity_date": 1474638683, "creation_date": 1474638683, "answer_id": 39662506, "question_id": 39615747, "link": "https://stackoverflow.com/questions/39615747/rails-unit-test-undefined-method-users/39662506#39662506", "title": "Rails unit test - undefined method &#39;users&#39;", "body": "<p>Try This:</p>\n\n<pre>one:\n      email: ioana1@ioana.com\n      name: Ioana1\n      password: MyString\n      verified: 1\n      token: MyString\n      remember_token: MyString\n      plan: p0\n      subscription_id: 1\n      subscription_next_bill_date:\n      email_hash: 1\n      referred_by_user: two (or the way you named the self reference)\n      subscription_status: deleted\n</pre>\n\n<p><a href=\"http://api.rubyonrails.org/v2.3/classes/Fixtures.html\" rel=\"nofollow\">http://api.rubyonrails.org/v2.3/classes/Fixtures.html</a></p>\n"}], "owner": {"reputation": 129, "user_id": 6564641, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh5.googleusercontent.com/-bSQaV7d5t48/AAAAAAAAAAI/AAAAAAAAACM/0OZHDHYsV94/photo.jpg?sz=128", "display_name": "Ioana Surdu Bob", "link": "https://stackoverflow.com/users/6564641/ioana-surdu-bob"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1465, "favorite_count": 0, "accepted_answer_id": 39662506, "answer_count": 2, "score": 2, "last_activity_date": 1474638683, "creation_date": 1474458526, "last_edit_date": 1474462068, "question_id": 39615747, "link": "https://stackoverflow.com/questions/39615747/rails-unit-test-undefined-method-users", "title": "Rails unit test - undefined method &#39;users&#39;", "body": "<p>I've been trying to figure out how to test, but nothing seems to solve my issue. Every time I try to run any test, I get this error:</p>\n\n<pre><code>NoMethodError: undefined method `users' for #&lt;#&lt;Class:0x00560775e00768&gt;:0x00560775e00470&gt;\n</code></pre>\n\n<p>How i run my test inside a model: <code>ruby test/models/plan_test.rb</code></p>\n\n<p>I am trying to run the most basic test (the one Rails gave me as an example), so it is not linked to any model/fixture.\nMy model:</p>\n\n<pre><code>require File.expand_path(\"../../test_helper\", __FILE__)\n\nclass PlanTest &lt; ActiveSupport::TestCase\n  test \"the truth\" do\n    assert true\n  end\nend\n</code></pre>\n\n<p>I have created an empty test database, too, and when I try to add the fixtures inside the database, I get the same error.</p>\n\n<p>Thank you for looking :)</p>\n\n<p>Edit: \nTrace on the fixture command(<code>rake db:fixtures:load RAILS_ENV=test --trace</code>):</p>\n\n<pre><code>[DEPRECATION] `last_comment` is deprecated.  Please use `last_description` instead.\n** Invoke db:fixtures:load (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Invoke db:load_config (first_time)\n** Execute db:load_config\n** Execute db:fixtures:load\nrake aborted!\nNoMethodError: undefined method `users' for #&lt;#&lt;Class:0x005555661d3920&gt;:0x005555661d3830&gt;\n(erb):4:in `get_binding'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/2.2.0/erb.rb:863:in `eval'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/2.2.0/erb.rb:863:in `result'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixture_set/file.rb:42:in `render'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixture_set/file.rb:33:in `rows'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixture_set/file.rb:24:in `each'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:760:in `block (2 levels) in read_fixture_files'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixture_set/file.rb:15:in `open'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:759:in `block in read_fixture_files'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:758:in `each'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:758:in `each_with_object'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:758:in `read_fixture_files'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:590:in `initialize'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:514:in `new'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:514:in `block (2 levels) in create_fixtures'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:511:in `map'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:511:in `block in create_fixtures'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:288:in `disable_referential_integrity'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/fixtures.rb:508:in `create_fixtures'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/activerecord-4.2.5/lib/active_record/railties/databases.rake:206:in `block (3 levels) in &lt;top (required)&gt;'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/task.rb:248:in `call'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/task.rb:248:in `block in execute'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/task.rb:243:in `each'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/task.rb:243:in `execute'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/task.rb:187:in `block in invoke_with_call_chain'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/2.2.0/monitor.rb:211:in `mon_synchronize'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/task.rb:180:in `invoke_with_call_chain'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/task.rb:173:in `invoke'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:152:in `invoke_task'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:108:in `block (2 levels) in top_level'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:108:in `each'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:108:in `block in top_level'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:117:in `run_with_threads'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:102:in `top_level'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:80:in `block in run'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:178:in `standard_exception_handling'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/lib/rake/application.rb:77:in `run'\n/home/ioana/.rbenv/versions/2.2.3/lib/ruby/gems/2.2.0/gems/rake-11.2.2/exe/rake:27:in `&lt;top (required)&gt;'\n/home/ioana/.rbenv/versions/2.2.3/bin/rake:23:in `load'\n/home/ioana/.rbenv/versions/2.2.3/bin/rake:23:in `&lt;main&gt;'\nTasks: TOP =&gt; db:fixtures:load\n</code></pre>\n\n<p>Part of my user fixture (all of them have the same structure):</p>\n\n<pre><code>one:\n  email: ioana1@ioana.com\n  name: Ioana1\n  password: MyString\n  verified: 1\n  token: MyString\n  remember_token: MyString\n  plan_id: &lt;%= plan(:p0).id %&gt;\n  subscription_id: 1\n  subscription_next_bill_date:\n  email_hash: 1\n  referred_by_user_id: &lt;%= users(:two).id %&gt;\n  subscription_status: deleted\n\nthree:\n  email: ioana3@ioana.com\n  name: Ioana3\n  password: MyString\n  verified: 1\n  token: MyString\n  remember_token: MyString\n  plan_id: &lt;%= plan(:p1).id %&gt;\n  subscription_id: 1\n  subscription_next_bill_date: 2016-08-04\n  subscription_update_url: MyString\n  subscription_cancel_url: MyString\n  email_hash: 1\n  subscription_registration_date: 2016-07-04\n  subscription_status: active\n</code></pre>\n"}, {"tags": ["ruby", "undo-redo", "paper-trail-gem"], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 2765296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f124e1ab0c27bc5e3c32ddc0954322?s=128&d=identicon&r=PG&f=1", "display_name": "turbogeek421", "link": "https://stackoverflow.com/users/2765296/turbogeek421"}, "edited": false, "score": 0, "creation_date": 1474528287, "post_id": 39619552, "comment_id": 66569555, "body": "This is exactly what I am using, but it still turns PaperTrail off completely instead of just turning it off for the objects being reified."}], "tags": [], "owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "is_accepted": false, "score": 4, "last_activity_date": 1474468460, "creation_date": 1474468460, "answer_id": 39619552, "question_id": 39615709, "link": "https://stackoverflow.com/questions/39615709/how-can-i-temporarily-disable-papertrail-when-reifying-a-version/39619552#39619552", "title": "How can I temporarily disable PaperTrail when reifying a version?", "body": "<p>I once accomplished something similar by mixing in something like this:</p>\n\n<pre><code>def without_papertrail\n  PaperTrail.disable\n  yield if block_given?\n  PaperTrail.enable\nend\n</code></pre>\n\n<p>Then you can do something similar to your objective</p>\n\n<pre><code>without_papertrail { version.reify.save }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7752, "user_id": 1087469, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/84cd9fd20832381fc78084aac4cb4b6c?s=128&d=identicon&r=PG", "display_name": "leifg", "link": "https://stackoverflow.com/users/1087469/leifg"}, "edited": false, "score": 3, "creation_date": 1534156733, "post_id": 41350384, "comment_id": 90594546, "body": "The API was recently depcreated. The new API is: <code>PaperTrail.request.disable_model(MyModel)</code>"}], "tags": [], "owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "is_accepted": false, "score": 3, "last_activity_date": 1483100129, "last_edit_date": 1483100129, "creation_date": 1482863564, "answer_id": 41350384, "question_id": 39615709, "link": "https://stackoverflow.com/questions/39615709/how-can-i-temporarily-disable-papertrail-when-reifying-a-version/41350384#41350384", "title": "How can I temporarily disable PaperTrail when reifying a version?", "body": "<p>You can disable paper trail for a particular model, using either of two syntaxes:</p>\n\n<pre><code>m = MyModel.find(123)\nm.paper_trail.without_versioning do\n  # No versioning of `m` happens in this block\nend\n</code></pre>\n\n<p>Note: Since it is called on a model instance, it seems as though this might naturally disable versioning on just that instance, but this syntax disables versioning on the entire model.</p>\n\n<p>The other syntax:</p>\n\n<pre><code>MyModel.paper_trail.disable\n# No versioning of MyModel happens here\nMyModel.paper_trail.enable\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1211, "user_id": 10993539, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NKkKh.png?s=128&g=1", "display_name": "localhostdotdev", "link": "https://stackoverflow.com/users/10993539/localhostdotdev"}, "is_accepted": false, "score": 0, "last_activity_date": 1556071489, "creation_date": 1556071489, "answer_id": 55821367, "question_id": 39615709, "link": "https://stackoverflow.com/questions/39615709/how-can-i-temporarily-disable-papertrail-when-reifying-a-version/55821367#55821367", "title": "How can I temporarily disable PaperTrail when reifying a version?", "body": "<p>from the readme: <a href=\"https://github.com/paper-trail-gem/paper_trail#7-testing\" rel=\"nofollow noreferrer\">https://github.com/paper-trail-gem/paper_trail#7-testing</a></p>\n\n<pre><code>PaperTrail.enabled = false\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 394, "user_id": 5114104, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EWk9k.jpg?s=128&g=1", "display_name": "coisnepe", "link": "https://stackoverflow.com/users/5114104/coisnepe"}, "is_accepted": false, "score": 1, "last_activity_date": 1563971642, "creation_date": 1563971642, "answer_id": 57183073, "question_id": 39615709, "link": "https://stackoverflow.com/questions/39615709/how-can-i-temporarily-disable-papertrail-when-reifying-a-version/57183073#57183073", "title": "How can I temporarily disable PaperTrail when reifying a version?", "body": "<p>As of today, gem version <em>10.3.0</em>, the correct way to achieve this is, as per the <a href=\"https://github.com/paper-trail-gem/paper_trail#per-class\" rel=\"nofollow noreferrer\">gem documentation</a>:</p>\n\n<pre><code>PaperTrail.request.disable_model(Banana)\n# changes to Banana model do not create versions,\n# but eg. changes to Kiwi model do.\nPaperTrail.request.enable_model(Banana)\n</code></pre>\n"}], "owner": {"reputation": 41, "user_id": 2765296, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/06f124e1ab0c27bc5e3c32ddc0954322?s=128&d=identicon&r=PG&f=1", "display_name": "turbogeek421", "link": "https://stackoverflow.com/users/2765296/turbogeek421"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2270, "favorite_count": 0, "answer_count": 4, "score": 3, "last_activity_date": 1563971642, "creation_date": 1474458417, "question_id": 39615709, "link": "https://stackoverflow.com/questions/39615709/how-can-i-temporarily-disable-papertrail-when-reifying-a-version", "title": "How can I temporarily disable PaperTrail when reifying a version?", "body": "<p>I am using <code>paper_trail</code> for undo/redo functionality in my site and am having a problem when I call <code>reify.save</code> on a <code>version</code> in that on <code>save</code> and new <code>PaperTrail::Version</code> gets created.</p>\n\n<p>Is there a way to turn off PaperTrail during the saving of a reified object?</p>\n\n<p>I understand that <code>PaperTrail.enabled = false</code> is possible, but I don't want other changes being made a the same time to not be recorded.</p>\n\n<p>My ideal solution would be something along the lines of:</p>\n\n<p><code>PaperTrail.disable { version.reify.save }</code></p>\n"}, {"tags": ["ruby", "command-line-arguments"], "comments": [{"owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1474458315, "post_id": 39615630, "comment_id": 66537861, "body": "<code>p</code> is <a href=\"http://ruby-doc.org/core-2.3.1/Kernel.html#method-i-p\" rel=\"nofollow noreferrer\">defined in <code>Kernel</code></a>, so it is (almost) always available in Ruby. <code>p obj</code> is equivalent to <code>puts obj.inspect</code>."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1474460019, "post_id": 39615792, "comment_id": 66538952, "body": "To be precise, <code>p</code> is available in instances of all classes, explicitly including <code>Kernel</code> and/or derived from <code>Object</code>, including <code>main</code>. It is <i>not defined</i> in instances of classes, derived directly from <code>BasicObject</code> and not including <code>Kernel</code> (usually this happens to DSL.) BTW, upvoted for great formatting."}], "tags": [], "owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "is_accepted": true, "score": 3, "last_activity_date": 1474459163, "last_edit_date": 1474459163, "creation_date": 1474458651, "answer_id": 39615792, "question_id": 39615630, "link": "https://stackoverflow.com/questions/39615630/ruby-example-with-exclamation-mark/39615792#39615792", "title": "Ruby example with exclamation mark", "body": "<p>To answer your questions:</p>\n\n<blockquote>\n  <p>I can understand the exclamation mark on the \"end.parse\" line (but I expected a parameter after that)</p>\n</blockquote>\n\n<p><a href=\"https://docs.ruby-lang.org/en/2.1.0/OptionParser.html#method-i-parse-21\" rel=\"nofollow\">The documentation</a> states that <code>parse!</code> takes an optional <code>argv</code> parameter. If it is not supplied, it defaults to <code>default_argv</code>, which I imagine is the string containing the arguments passed to this script in the command line.</p>\n\n<blockquote>\n  <p>p hasn't been declared, and I can't understand if it's part of the example source</p>\n</blockquote>\n\n<p><code>p</code> is <a href=\"http://ruby-doc.org/core-2.3.1/Kernel.html#method-i-p\" rel=\"nofollow\">defined in <code>Kernel</code></a>, so it is (almost) always available in Ruby. <code>p obj</code> is equivalent to <code>puts obj.inspect</code>.</p>\n\n<p>In this context, <code>p</code> is just used to illustrate that after parsing the arguments, the <code>options</code> hash contains all the flags/options you defined in the OptionParser block.</p>\n\n<blockquote>\n  <p>And how do I use the '-v' option? Do I simply check if options[:v] is nil or true?</p>\n</blockquote>\n\n<p>Yes, but that would actually be <code>options[:verbose]</code>.</p>\n\n<blockquote>\n  <p>Last thing, what happens to the other options? Does the OptionParser only parse switches? What if I had other parameters after the '-v'? Like <code>myscript -v duck ketchup banana</code>?</p>\n</blockquote>\n\n<p>You will have to make multiple calls to <code>opts.on</code> to match all the other switches/arguments you are interested in. Look at the documentation <a href=\"https://docs.ruby-lang.org/en/2.1.0/OptionParser.html#method-i-make_switch\" rel=\"nofollow\">here</a> for explanations on how to do that.</p>\n"}], "owner": {"reputation": 2843, "user_id": 113644, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/LWJVp.png?s=128&g=1", "display_name": "G B", "link": "https://stackoverflow.com/users/113644/g-b"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 89, "favorite_count": 0, "accepted_answer_id": 39615792, "answer_count": 1, "score": 1, "last_activity_date": 1474459163, "creation_date": 1474458173, "question_id": 39615630, "link": "https://stackoverflow.com/questions/39615630/ruby-example-with-exclamation-mark", "title": "Ruby example with exclamation mark", "body": "<p>I am writing a script with different options in ruby, and I can't understand how the OptionParser could help me.</p>\n\n<p>In particular, there is an example in the documentation: <a href=\"https://docs.ruby-lang.org/en/2.1.0/OptionParser.html\" rel=\"nofollow\">https://docs.ruby-lang.org/en/2.1.0/OptionParser.html</a></p>\n\n<pre><code>require 'optparse'\n\noptions = {}\nOptionParser.new do |opts|\n  opts.banner = \"Usage: example.rb [options]\"\n\n  opts.on(\"-v\", \"--[no-]verbose\", \"Run verbosely\") do |v|\n    options[:verbose] = v\n  end\nend.parse!\n\np options\np ARGV\n</code></pre>\n\n<p>I can understand the exclamation mark on the \"end.parse\" line (but I expected a parameter after that), but I find the following 2 lines confusing, <code>p</code> hasn't been declared, and I can't understand if it's part of the example source.</p>\n\n<p>And how do I use the '-v' option? Do I simply check if options[:v] is <code>nil</code> or <code>true</code>?</p>\n\n<p>Last thing, what happens to the other options? Does the OptionParser only parse switches? What if I had other parameters after the '-v'? Like <code>myscript -v duck ketchup banana</code>?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 1, "creation_date": 1474456778, "post_id": 39615071, "comment_id": 66536826, "body": "Do you mean you want to print the array like that?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 1, "creation_date": 1474457293, "post_id": 39615071, "comment_id": 66537176, "body": "what you want is not an object."}, {"owner": {"reputation": 362, "user_id": 2867261, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/99d0909f4d2f75970d0183fe9dfef4cb?s=128&d=identicon&r=PG&f=1", "display_name": "Sambit", "link": "https://stackoverflow.com/users/2867261/sambit"}, "edited": false, "score": 0, "creation_date": 1474457445, "post_id": 39615071, "comment_id": 66537287, "body": "Try [&quot;1&quot;, &quot;2&quot;, &quot;3&quot;].map{ |val| &quot;&#39;#{val}&#39;&quot; }.join(&#39;, &#39;)"}], "answers": [{"comments": [{"owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "edited": false, "score": 0, "creation_date": 1474456817, "post_id": 39615110, "comment_id": 66536862, "body": "Doesn&#39;t have quotes around the individual elements or the trailing comma."}], "tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": false, "score": 0, "last_activity_date": 1474456768, "creation_date": 1474456768, "answer_id": 39615110, "question_id": 39615071, "link": "https://stackoverflow.com/questions/39615071/need-to-remove-ruby-array-brackets/39615110#39615110", "title": "Need to remove ruby array brackets", "body": "<p>You expect string ? </p>\n\n<pre><code>array = [\"1\",\"2\",\"3\"]\n\nnew = array.join(',')\n#=&gt; \"1,2,3\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2386, "user_id": 2933305, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/223ba397b1fef4a7bec7bfc59ca74f11?s=128&d=identicon&r=PG", "display_name": "maicher", "link": "https://stackoverflow.com/users/2933305/maicher"}, "is_accepted": false, "score": 2, "last_activity_date": 1474457117, "last_edit_date": 1474457117, "creation_date": 1474456780, "answer_id": 39615115, "question_id": 39615071, "link": "https://stackoverflow.com/questions/39615071/need-to-remove-ruby-array-brackets/39615115#39615115", "title": "Need to remove ruby array brackets", "body": "<p>The name of that operation is to 'convert an array to a list'.</p>\n\n<p>It can be done by splat operator (<code>*</code>):</p>\n\n<pre><code>array = [\"1\",\"2\",\"3\"]\n\n*array\n</code></pre>\n\n<p>Hovewer it's hard to demonstrate, because you can not print lists in irb.</p>\n\n<p>OR</p>\n\n<p>You just want to print the array with added brackets. If so, that line of code could help:</p>\n\n<pre><code>array = [\"1\",\"2\",\"3\"]\n\nprint array.map{ |item| \"\\\"#{item}\\\"\" }.join(', ')\n</code></pre>\n\n<p>It adds brackets (by escaping <code>\"</code> symbol) to each array element and then joins the elements by comma.</p>\n"}, {"tags": [], "owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "is_accepted": false, "score": 0, "last_activity_date": 1474460428, "creation_date": 1474460428, "answer_id": 39616413, "question_id": 39615071, "link": "https://stackoverflow.com/questions/39615071/need-to-remove-ruby-array-brackets/39616413#39616413", "title": "Need to remove ruby array brackets", "body": "<pre><code>&gt; puts array.join(',').gsub(/(\\d)/, '\\'\\1\\'')\n#=&gt; '1','2','3'\n</code></pre>\n"}], "owner": {"reputation": 238, "user_id": 3316493, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iUdvI.jpg?s=128&g=1", "display_name": "kamlesh", "link": "https://stackoverflow.com/users/3316493/kamlesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1057, "favorite_count": 0, "closed_date": 1474460327, "answer_count": 3, "score": -6, "last_activity_date": 1474460802, "creation_date": 1474456671, "last_edit_date": 1474460802, "question_id": 39615071, "link": "https://stackoverflow.com/questions/39615071/need-to-remove-ruby-array-brackets", "closed_reason": "Needs details or clarity", "title": "Need to remove ruby array brackets", "body": "<p><strong>I have an array like</strong> </p>\n\n<pre><code>Array = [\"1\",\"2\",\"3\"]\n</code></pre>\n\n<p>And I need result like</p>\n\n<pre><code>\"1,2,3\"\n</code></pre>\n\n<p>How do I proceed?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "rubygems", "ruby-on-rails-3.2"], "answers": [{"tags": [], "owner": {"reputation": 56, "user_id": 3359827, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eb9a005d6af2549b537d87dba2209395?s=128&d=identicon&r=PG&f=1", "display_name": "Flooo49", "link": "https://stackoverflow.com/users/3359827/flooo49"}, "is_accepted": true, "score": 2, "last_activity_date": 1485361992, "creation_date": 1485361992, "answer_id": 41856805, "question_id": 39614951, "link": "https://stackoverflow.com/questions/39614951/how-to-make-a-pre-emptive-basic-authentication-call-using-savon-client-in-ruby/41856805#41856805", "title": "How to make a pre-emptive basic authentication call using savon client in ruby?", "body": "<p>I got the exact same problem</p>\n\n<p>here the solution :</p>\n\n<pre><code>realm = Base64.strict_encode64(\"VENTURE:VENTURE\")\nclient = Savon.client(\n    wsdl:'/Users/sp/jda_notifications/TransportationManagerService.wsdl',\n    headers: { 'Authorization' =&gt; \"Basic #{realm}\"}\n)\n</code></pre>\n\n<p>We have to use headers which edit http headers and not soap_header.</p>\n"}], "owner": {"reputation": 25, "user_id": 1724991, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8e8b843e83aecb547057e537dbd9bfe4?s=128&d=identicon&r=PG", "display_name": "user1724991", "link": "https://stackoverflow.com/users/1724991/user1724991"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 320, "favorite_count": 0, "accepted_answer_id": 41856805, "answer_count": 1, "score": 0, "last_activity_date": 1485361992, "creation_date": 1474456333, "question_id": 39614951, "link": "https://stackoverflow.com/questions/39614951/how-to-make-a-pre-emptive-basic-authentication-call-using-savon-client-in-ruby", "title": "How to make a pre-emptive basic authentication call using savon client in ruby?", "body": "<p>I am doing the following code in savon but unable to do as it requires pre-emptive authorization. I have verified in soapUI but unable to run in savon.\nCould somebody help?    </p>\n\n<pre><code>client = Savon.client(ssl_verify_mode: :none) do\n  wsdl '/Users/sp/jda_notifications/TransportationManagerService.wsdl'\n  endpoint 'http://localhost:8088/webservices/services/TransportationManager'\n  basic_auth('VENTURE', 'VENTURE')\nend\n</code></pre>\n"}, {"tags": ["ruby", "amazon-web-services", "centos", "rbenv", "rubinius"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1474455310, "post_id": 39614182, "comment_id": 66535864, "body": "Looks like there&#39;s a compilation error; possibly because of missing libraries on your machine. The full error log is in <code>&#47;tmp&#47;ruby-build.20160921192313.24426.log</code> - there will hopefully be a better clue in there, above the bottom 10 lines which have been displayed. Can you please include (the key lines of?) this file in your post?"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1474458398, "creation_date": 1474458398, "answer_id": 39615701, "question_id": 39614182, "link": "https://stackoverflow.com/questions/39614182/rbenv-cannot-install-rubinius/39615701#39615701", "title": "Rbenv cannot install rubinius", "body": "<p>Without a full look at log file it's hard to know exactly what the problem is.  I was able to install on OSX 10.9.4 with latest version of ruby-build installed with homebrew.  I had to <code>brew install llvm</code> first however.</p>\n\n<p>I suggest have a look at <a href=\"https://github.com/rbenv/ruby-build\" rel=\"nofollow\">https://github.com/rbenv/ruby-build</a> which <code>rbenv install</code> uses under the hood.  In my experience with using <code>rbenv install</code> the issue is usually using the wrong c compiler, or missing libraries.</p>\n\n<p>Some useful commands to check what your system defaults are:</p>\n\n<pre><code>which cc\nwhich g++\ncc --version\ng++ --version\n</code></pre>\n\n<p>Check your $PATH settings <code>echo $PATH</code></p>\n"}], "owner": {"reputation": 195, "user_id": 1419836, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/1690948d411d19b3b0ff850b1375db6b?s=128&d=identicon&r=PG", "display_name": "C\u1ee5t C&#225;nh", "link": "https://stackoverflow.com/users/1419836/c%e1%bb%a5t-c%c3%a1nh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 225, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474458398, "creation_date": 1474454209, "last_edit_date": 1474455090, "question_id": 39614182, "link": "https://stackoverflow.com/questions/39614182/rbenv-cannot-install-rubinius", "title": "Rbenv cannot install rubinius", "body": "<p>I'm trying to install <code>rubinius</code> via <code>rbenv</code> and this error came out. I'm not sure what's wrong here.</p>\n\n<p>Here is the (successful) result of installing <code>jruby</code>:</p>\n\n<pre><code>[app@onepiece-web02 log]$ rbenv install jruby-1.7.25 \nDownloading jruby-bin-1.7.25.tar.gz... \n-&gt; https://dqw8nmjcqpjn7.cloudfront.net/03a26ace9be8b7f7a4fce3e0dfd106dfe2d7f48c750c3b1dc74046663e5b57a1 \nInstalling jruby-1.7.25... \nInstalled jruby-1.7.25 to /home/app/.rbenv/versions/jruby-1.7.25 \n</code></pre>\n\n<p>And here is the (failed) result of installing <code>rubinius</code>:     </p>\n\n<pre><code>[app@onepiece-web02 log]$ rbenv install rbx-3.42 \nDownloading rubinius-3.42.tar.bz2... \n-&gt; https://dqw8nmjcqpjn7.cloudfront.net/4fc4413101100f6393894632eef522c2667a821856ac32eb99ccecab2aeeae85 \nInstalling rubinius-3.42... \n\nBUILD FAILED (Amazon Linux AMI 2016.03 using ruby-build 20160913-7-gaa1a7a3) \n\nInspect or clean up the working tree at /tmp/ruby-build.20160921192313.24426 \nResults logged to /tmp/ruby-build.20160921192313.24426.log \n\nLast 10 log lines: \nrake aborted! \nError compiling \n/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/bundle/ruby/2.3.0/gems/daedalus-core-0.5.0/lib/daedalus.rb:68:in `command' \n/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/bundle/ruby/2.3.0/gems/daedalus-core-0.5.0/lib/daedalus.rb:234:in `cxx_compile' \n/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/bundle/ruby/2.3.0/gems/daedalus-core-0.5.0/lib/daedalus.rb:221:in `compile' \n/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/bundle/ruby/2.3.0/gems/daedalus-core-0.5.0/lib/daedalus.rb:433:in `build' \n/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/bundle/ruby/2.3.0/gems/daedalus-core-0.5.0/lib/daedalus.rb:895:in `block (2 levels) in perform_tasks' \nTasks: TOP =&gt; install =&gt; build:build =&gt; machine/vm \n(See full trace by running task with --trace) \nError: g++ -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/machine -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/machine/include -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/machine/builtin -I. -Imachine/test/cxxtest -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/libsodium/src/libsodium/include -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/udis86 -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/libffi/include -Ivendor/double-conversion/src -DHAVE_CONFIG_H -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/machine/include/capi -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/oniguruma -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/libtommath -pipe -Wall -fno-omit-frame-pointer -g -fPIC  -O2 -DHAS_EXECINFO -DHAVE_SPT_REUSEARGV -DHAVE_CLOCK_GETTIME -DHAVE_NL_LANGINFO -DHAVE_POSIX_FADVISE -DHAVE_STRNLEN -DHAVE_TIMERFD -DHAVE_INOTIFY -DHAVE_STRUCT_STAT_ST_ATIM -DHAVE_STRUCT_STAT_ST_MTIM -DHAVE_STRUCT_STAT_ST_CTIM -DHAVE_TM_GMTOFF -DHAVE_TM_ZONE -DHAVE_TIMEZONE -DHAVE_TZNAME -DHAVE_DAYLIGHT -DHAVE_ALLOCA_H -DHAVE_STRING_H -DHAVE_SYS_TIME_H -DHAVE_SYS_TIMES_H -DHAVE_SYS_TYPES_H -DHAVE_UNISTD_H -DHAVE_STDARG_H -DSTRERROR_R_CHAR_P -I/tmp/ruby-build.20160921192313.24426/rubinius-3.42/vendor/rapidjson -I/usr/include -I/usr/include -D_GNU_SOURCE -g -pipe -Wall -Wp,-D_FORTIFY_SOURCE=2 -fexceptions -fstack-protector --param=ssp-buffer-size=4 -m64 -mtune=generic -fPIC -DENABLE_LLVM -Wno-unused-function -Werror -DRBX_PROFILER -D__STDC_LIMIT_MACROS -D__STDC_CONSTANT_MACROS -D_LARGEFILE_SOURCE -D_FILE_OFFSET_BITS=64 -fno-rtti -fvisibility-inlines-hidden    -std=c++11 -c -o machine/artifacts/logger.cpp.o machine/logger.cpp\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474451190, "post_id": 39612976, "comment_id": 66533077, "body": "Just do <code>def votable; build(:question); end</code>"}, {"owner": {"reputation": 197, "user_id": 5181996, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/s8ALP.jpg?s=128&g=1", "display_name": "anti-k", "link": "https://stackoverflow.com/users/5181996/anti-k"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474451579, "post_id": 39612976, "comment_id": 66533328, "body": "def votable  build(:question)  end I do recieve a similar error(updated)"}], "answers": [{"comments": [{"owner": {"reputation": 197, "user_id": 5181996, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/s8ALP.jpg?s=128&g=1", "display_name": "anti-k", "link": "https://stackoverflow.com/users/5181996/anti-k"}, "edited": false, "score": 0, "creation_date": 1474452322, "post_id": 39613349, "comment_id": 66533843, "body": "And how should I address this subject in my spec?"}], "tags": [], "owner": {"reputation": 16672, "user_id": 22237, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/hkobD.png?s=128&g=1", "display_name": "Kris", "link": "https://stackoverflow.com/users/22237/kris"}, "is_accepted": true, "score": 1, "last_activity_date": 1474452023, "creation_date": 1474452023, "answer_id": 39613349, "question_id": 39612976, "link": "https://stackoverflow.com/questions/39612976/how-to-set-a-shared-example/39613349#39613349", "title": "How to set a shared example?", "body": "<p>Instead of having a <code>votable</code> method could you set the <code>subject</code> as such:</p>\n\n<pre><code>it_behaves_like 'User Votable' do\n  subject { build(:question) }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 25857, "user_id": 820254, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eb7f91e7b7b3457ca57701a40f920f2a?s=128&d=identicon&r=PG", "display_name": "Chris Salzberg", "link": "https://stackoverflow.com/users/820254/chris-salzberg"}, "is_accepted": false, "score": 1, "last_activity_date": 1474463532, "creation_date": 1474463532, "answer_id": 39617552, "question_id": 39612976, "link": "https://stackoverflow.com/questions/39612976/how-to-set-a-shared-example/39617552#39617552", "title": "How to set a shared example?", "body": "<p>You actually don't need to use <code>subject</code>, you can just set whatever context you want using <code>let</code> and it will be available within the block:</p>\n\n<pre><code>describe 'user_voted?' do \n  let(:votable) { build(:question) }\n  it_behaves_like 'User Votable'\nend\n</code></pre>\n\n<p>Then you can just refer to <code>votable</code> within your shared example and it will be defined by the context:</p>\n\n<pre><code>RSpec.shared_examples_for 'User Votable' do\n  let!(:user) { create :user } \n  let!(:sample_user) { create :user }   \n  let!(:vote) { create :vote, user: user, votable: votable, vote_field: 1 }\n\n  it 'user different from resource user is acceptable' do        \n    expect(votable.user_voted?(sample_user)).to be_falsy\n  end   \n\n  it 'user similar to resource user is acceptable' do\n    expect(votable.user_voted?(user)).to be_truthy\n  end\nend\n</code></pre>\n\n<p>You can also incidentally pass parameters into the <code>it_behaves_like</code> block for more flexibility.</p>\n\n<p>Ref: <a href=\"https://relishapp.com/rspec/rspec-core/docs/example-groups/shared-examples#providing-context-to-a-shared-group-using-a-block\" rel=\"nofollow\">Providing context to a shared group using a block</a></p>\n\n<p>(Note: fixed some spelling typos above.)</p>\n"}], "owner": {"reputation": 197, "user_id": 5181996, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/s8ALP.jpg?s=128&g=1", "display_name": "anti-k", "link": "https://stackoverflow.com/users/5181996/anti-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 0, "accepted_answer_id": 39613349, "answer_count": 2, "score": 0, "last_activity_date": 1474463532, "creation_date": 1474451089, "last_edit_date": 1474451641, "question_id": 39612976, "link": "https://stackoverflow.com/questions/39612976/how-to-set-a-shared-example", "title": "How to set a shared example?", "body": "<p>I'm just learning to write specs in ruby, and rails. So I do have two similar models that act similar when voted: question and answer. So I try to not duplicate code and write shared example for this two.</p>\n\n<pre><code>RSpec.shared_examples_for 'User Votable' do\n\n  let!(:user){ create :user } \n  let!(:sample_user){ create :user }   \n  let!(:vote){ create :vote, user: user, votable: votable, vote_field: 1}   \n\n  it 'user different from resource user is accapteble' do        \n    expect(votable.user_voted?(sample_user)).to be_falsy\n  end   \n\n  it 'user similar to resource user is accapteble' do\n\n    expect(votable.user_voted?(user)).to be_truthy\n  end\n\nend\n</code></pre>\n\n<p>And a test itself</p>\n\n<pre><code>describe 'user_voted?' do \n  def votable\n    subject{ build(:question)}\n  end\n  it_behaves_like 'User Votable'\nend\n</code></pre>\n\n<p>The last it in this spec fails( I think because of subject - it does not change when I create a vote)\nSo I would be very happy if I could manage and understand how to do it right way. And very thankful for any advice</p>\n\n<p>Also when I try to use mock like this, it complains on not having primary key</p>\n\n<pre><code>allow(:question){create :question}\n\nFailures:\n</code></pre>\n\n<p>1) Question user_voted? behaves like User Votable user similar to resource user is accapteble\n     Failure/Error: expect(votable.user_voted?(user)).to be_truthy</p>\n\n<pre><code>   expected: truthy value\n        got: false\n Shared Example Group: \"User Votable\" called from ./spec/models/question_spec.rb:23\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1474451010, "post_id": 39612885, "comment_id": 66532965, "body": "<b>Don&#39;t</b> rescue <code>Exception</code>. Always use a more specific class."}, {"owner": {"reputation": 184, "user_id": 1107909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82acc8439b76594615c5f78124a488dd?s=128&d=identicon&r=PG", "display_name": "enjaku", "link": "https://stackoverflow.com/users/1107909/enjaku"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474451635, "post_id": 39612885, "comment_id": 66533360, "body": "I use ruby 2.1, there is no method <code>dig</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474451883, "post_id": 39612885, "comment_id": 66533526, "body": "In this case, you can steal <a href=\"https://github.com/rubinius/rubinius/blob/master/core/hash.rb#L534-L541\" rel=\"nofollow noreferrer\">implementation from Rubinius</a>."}], "owner": {"reputation": 184, "user_id": 1107909, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/82acc8439b76594615c5f78124a488dd?s=128&d=identicon&r=PG", "display_name": "enjaku", "link": "https://stackoverflow.com/users/1107909/enjaku"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 56, "favorite_count": 0, "closed_date": 1474450955, "answer_count": 0, "score": 2, "last_activity_date": 1474450842, "creation_date": 1474450842, "question_id": 39612885, "link": "https://stackoverflow.com/questions/39612885/check-if-hash-keys-exist-in-ruby", "closed_reason": "Duplicate", "title": "check if hash keys exist in ruby", "body": "<p>I have a big hash and I know that I almost always can get the data I need from <code>hash['info'][1]['summary_result']['gsb']</code>. But from time to time these keys may not exist. To avoid an error I use <code>rescue</code> like this:</p>\n\n<pre><code>begin\n  return hash['info'][1]['summary_result']['gsb']\nrescue Exception\n  return nil\nend\n</code></pre>\n\n<p>Are there any shorter methods to do it?</p>\n"}, {"tags": ["ruby", "jekyll"], "comments": [{"owner": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474463488, "post_id": 39612827, "comment_id": 66541395, "body": "Have you tried <code>sudo gem install bundler</code> ?"}, {"owner": {"reputation": 1, "user_id": 6731220, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HueNqFWwWjg/AAAAAAAAAAI/AAAAAAAAhCo/tFjgIkmDi0o/photo.jpg?sz=128", "display_name": "Daniel Nguyen", "link": "https://stackoverflow.com/users/6731220/daniel-nguyen"}, "reply_to_user": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474464390, "post_id": 39612827, "comment_id": 66542014, "body": "I did without sudo. And there was no warning error at all. It&#39;s that a problem."}, {"owner": {"reputation": 1, "user_id": 6731220, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HueNqFWwWjg/AAAAAAAAAAI/AAAAAAAAhCo/tFjgIkmDi0o/photo.jpg?sz=128", "display_name": "Daniel Nguyen", "link": "https://stackoverflow.com/users/6731220/daniel-nguyen"}, "reply_to_user": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474469882, "post_id": 39612827, "comment_id": 66545967, "body": "If I am right after <code>sudo install bundler</code>, I have made a mess in my system-wide ruby. Now, I abandon my macOS ruby and start reading about Docker container. I will come back to fix my macOS Ruby later. is this a good strategy? my first lesson in stack overflow, do check the profile before try on my own computer."}, {"owner": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474472671, "post_id": 39612827, "comment_id": 66547829, "body": "Yeah ! if you have a virtualization for ruby and you are not using the system one, it&#39;s fine. But, do have a knowledge about what virtualization you have used like <code>rbenv</code> or <code>rvm</code>."}, {"owner": {"reputation": 1, "user_id": 6731220, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HueNqFWwWjg/AAAAAAAAAAI/AAAAAAAAhCo/tFjgIkmDi0o/photo.jpg?sz=128", "display_name": "Daniel Nguyen", "link": "https://stackoverflow.com/users/6731220/daniel-nguyen"}, "reply_to_user": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474472858, "post_id": 39612827, "comment_id": 66547950, "body": "I used rbenv and the warning is my original post. After sudo bundler I got a different warning. This time bundler has not found the gem that template needed to run."}, {"owner": {"reputation": 46692, "user_id": 1548376, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qCZQw.gif?s=128&g=1", "display_name": "David Jacquel", "link": "https://stackoverflow.com/users/1548376/david-jacquel"}, "edited": false, "score": 0, "creation_date": 1474473529, "post_id": 39612827, "comment_id": 66548399, "body": "Try <code>bundle install</code> and then <code>bundle exec jekyll serve</code>"}, {"owner": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474474172, "post_id": 39612827, "comment_id": 66548792, "body": "If you have rbenv and installed ruby from rbenv, you don&#39;t need to use sudo. sudo helps save the gems for your system ruby. use <code>bundle exec</code> before each command if you are getting errors. P.S. The <code>bundler</code> gem also has to be installed from the ruby installed from <code>rbenv</code> like <code>bundle install bundler</code>, then only the bundle command will work for the ruby installed from rbenv."}, {"owner": {"reputation": 1, "user_id": 6731220, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HueNqFWwWjg/AAAAAAAAAAI/AAAAAAAAhCo/tFjgIkmDi0o/photo.jpg?sz=128", "display_name": "Daniel Nguyen", "link": "https://stackoverflow.com/users/6731220/daniel-nguyen"}, "edited": false, "score": 0, "creation_date": 1474510346, "post_id": 39612827, "comment_id": 66563549, "body": "Thank tGeek and David. it works like a charm."}, {"owner": {"reputation": 1, "user_id": 6731220, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HueNqFWwWjg/AAAAAAAAAAI/AAAAAAAAhCo/tFjgIkmDi0o/photo.jpg?sz=128", "display_name": "Daniel Nguyen", "link": "https://stackoverflow.com/users/6731220/daniel-nguyen"}, "edited": false, "score": 0, "creation_date": 1474526853, "post_id": 39612827, "comment_id": 66568744, "body": "My last question in this topic is that why I can&#39;t use <code>bundle exec Jekyll serve</code> in another theme, the warning is that no gemfile available. In the template, it has something to make the different result."}], "owner": {"reputation": 1, "user_id": 6731220, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-HueNqFWwWjg/AAAAAAAAAAI/AAAAAAAAhCo/tFjgIkmDi0o/photo.jpg?sz=128", "display_name": "Daniel Nguyen", "link": "https://stackoverflow.com/users/6731220/daniel-nguyen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 99, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474460503, "creation_date": 1474450675, "last_edit_date": 1474460503, "question_id": 39612827, "link": "https://stackoverflow.com/questions/39612827/jekyll-template-a-feeling-responsive-cant-build-by-jekyll-build-watch", "title": "Jekyll template, A Feeling Responsive, can&#39;t build by &quot;jekyll build --watch&quot;", "body": "<p>I am getting used to build a simple website through many templates. My final personal website will use A Feeling Responsive GH Pages template. And I had run into a error. </p>\n\n<p>My own research pointed to a new feature in macOS called SIP. I could not install many dependencies to get this build successfully. I will include a snipet of the error here so that you guys can help me out. </p>\n\n<pre><code>Tos-MacBook-Pro:my-example-site duongnguyen$ jekyll build --watch\n/usr/local/Cellar/ruby/2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in\n\n\n\n`require': cannot load such file -- bundler (LoadError)\n        from /usr/local/Cellar/ruby/2.3.1/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n        from /usr/local/lib/ruby/gems/2.3.0/gems/jekyll-3.2.1/lib/jekyll/plugin_manager.rb:34:in `require_from_bundler'\n        from /usr/local/lib/ruby/gems/2.3.0/gems/jekyll-3.2.1/exe/jekyll:9:in `&lt;top (required)&gt;'\n        from /usr/local/bin/jekyll:23:in `load'\n        from /usr/local/bin/jekyll:23:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 1, "creation_date": 1474452643, "post_id": 39612685, "comment_id": 66534064, "body": "Did you try to use <code>send_file</code> instead of <code>send_data</code>?"}, {"owner": {"reputation": 155, "user_id": 1351923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e90f5f2053a45b118f1ecae8c06030?s=128&d=identicon&r=PG", "display_name": "Bhimasen Rautaray", "link": "https://stackoverflow.com/users/1351923/bhimasen-rautaray"}, "reply_to_user": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1474454562, "post_id": 39612685, "comment_id": 66535334, "body": "Thanks a lot for yr help. now send_file is working."}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "edited": false, "score": 0, "creation_date": 1474457748, "post_id": 39612685, "comment_id": 66537506, "body": "If you don&#39;t mind I will post it as answer so you can accept it."}], "answers": [{"comments": [{"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "reply_to_user": {"reputation": 155, "user_id": 1351923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e90f5f2053a45b118f1ecae8c06030?s=128&d=identicon&r=PG", "display_name": "Bhimasen Rautaray", "link": "https://stackoverflow.com/users/1351923/bhimasen-rautaray"}, "edited": false, "score": 0, "creation_date": 1474459167, "post_id": 39615498, "comment_id": 66538418, "body": "I didn&#39;t work with the gem so I can said with 100% sure but I think it can&#39;t be done. The gem allows you to create <code>.pptx</code> file, it&#39;s not convert tool. Also I don&#39;t understand why do you have <code>.html.erb</code> and what you want to do with it."}, {"owner": {"reputation": 155, "user_id": 1351923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e90f5f2053a45b118f1ecae8c06030?s=128&d=identicon&r=PG", "display_name": "Bhimasen Rautaray", "link": "https://stackoverflow.com/users/1351923/bhimasen-rautaray"}, "edited": false, "score": 0, "creation_date": 1474459493, "post_id": 39615498, "comment_id": 66538631, "body": "I have previous 50 cusomer details with description and image in html.erb file  which is rendering on html request. Now I want to download those customer details and images descriptions as pptx files                                        how I will add so many costumer details and images  and their descriptions in @deck onject which is object of PowerPoint::Presentation.new"}, {"owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "reply_to_user": {"reputation": 155, "user_id": 1351923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e90f5f2053a45b118f1ecae8c06030?s=128&d=identicon&r=PG", "display_name": "Bhimasen Rautaray", "link": "https://stackoverflow.com/users/1351923/bhimasen-rautaray"}, "edited": false, "score": 0, "creation_date": 1474460408, "post_id": 39615498, "comment_id": 66539206, "body": "As I sad I didn&#39;t use the gem. I think you should do it manually."}], "tags": [], "owner": {"reputation": 2131, "user_id": 3475678, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/230e565cac4491b28134bb92bfc28a70?s=128&d=identicon&r=PG&f=1", "display_name": "Aleksey", "link": "https://stackoverflow.com/users/3475678/aleksey"}, "is_accepted": false, "score": 1, "last_activity_date": 1474457774, "creation_date": 1474457774, "answer_id": 39615498, "question_id": 39612685, "link": "https://stackoverflow.com/questions/39612685/downloading-ppt-format-in-rails-using-powerpoint-ruby-gem/39615498#39615498", "title": "downloading ppt format in rails using powerpoint ruby gem", "body": "<p>Try to use <code>send_file</code> instead of <code>send_data</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 155, "user_id": 1351923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e90f5f2053a45b118f1ecae8c06030?s=128&d=identicon&r=PG", "display_name": "Bhimasen Rautaray", "link": "https://stackoverflow.com/users/1351923/bhimasen-rautaray"}, "is_accepted": false, "score": 0, "last_activity_date": 1474531116, "creation_date": 1474531116, "answer_id": 39633418, "question_id": 39612685, "link": "https://stackoverflow.com/questions/39612685/downloading-ppt-format-in-rails-using-powerpoint-ruby-gem/39633418#39633418", "title": "downloading ppt format in rails using powerpoint ruby gem", "body": "<p>You can customize powerpoint gem according to your need . </p>\n\n<p>clone gem at this url <a href=\"https://github.com/pythonicrubyist/powerpoint\" rel=\"nofollow\">powerpoint gem</a> </p>\n\n<p>put it into ur vender folder.</p>\n\n<p>In your gem file change like this:\n gem \"powerpoint\", path: \"vendor/powerpoint\"</p>\n\n<p>so that it will call methods of gem from vender folder and you can do customisation in your vender folder according to your need.</p>\n\n<p>you can get all metods here: <a href=\"https://github.com/pythonicrubyist/powerpoint/blob/master/lib/powerpoint/presentation.rb\" rel=\"nofollow\">presentation method</a></p>\n\n<p>you can call multiple methods like this :\n@deck.add_pictorial_slide title, image_path\n@deck.add_text_picture_slide title, image_path, content</p>\n\n<p>You can increase sliders with loop like this:</p>\n\n<p>def add_pictorial_slide(title, image_path, coords = {})</p>\n\n<pre><code>  (1..5).each do |i|\n\n     @slides &lt;&lt; Powerpoint::Slide::Pictorial.new(presentation: self,title:title, image_path: image_path, coords: coords)\n\n end \n</code></pre>\n\n<p>end</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 2792265, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1a7622f119e0adbc635ef889ef954883?s=128&d=identicon&r=PG&f=1", "display_name": "dhyan", "link": "https://stackoverflow.com/users/2792265/dhyan"}, "is_accepted": false, "score": 0, "last_activity_date": 1477058032, "creation_date": 1477058032, "answer_id": 40178501, "question_id": 39612685, "link": "https://stackoverflow.com/questions/39612685/downloading-ppt-format-in-rails-using-powerpoint-ruby-gem/40178501#40178501", "title": "downloading ppt format in rails using powerpoint ruby gem", "body": "<p>I have used it recently and had to <a href=\"https://github.com/dhyan/powerpoint/tree/customize-text-slide\" rel=\"nofollow\">customize</a> it as per my need. Guess you already have it resolved. For problems related to having it saved on local file-system, i had to upload it to s3 and then use <code>send_data</code> for the download part. Using <code>tempfile</code>, i didn't have to worry much about storing/deleting these ppt files manually from the local file-system. Hope that helps!</p>\n"}], "owner": {"reputation": 155, "user_id": 1351923, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2e90f5f2053a45b118f1ecae8c06030?s=128&d=identicon&r=PG", "display_name": "Bhimasen Rautaray", "link": "https://stackoverflow.com/users/1351923/bhimasen-rautaray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 524, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1477058032, "creation_date": 1474450295, "last_edit_date": 1474455358, "question_id": 39612685, "link": "https://stackoverflow.com/questions/39612685/downloading-ppt-format-in-rails-using-powerpoint-ruby-gem", "title": "downloading ppt format in rails using powerpoint ruby gem", "body": "<p><strong>1st Part:</strong>\nI Have implemented powerpoint gem in rails 3.2 and ruby 1.9.2</p>\n\n<p>I am just trying to download a html.erb file in pptx format</p>\n\n<p>My codes like this:</p>\n\n<p>@filters = generate_filters_for_manual_report(params)</p>\n\n<p>@deck = Powerpoint::Presentation.new</p>\n\n<p>title = 'Bicycle Of the Mind'</p>\n\n<p>subtitle = 'created by Steve Jobs'</p>\n\n<p>@deck.add_intro title, subtitle</p>\n\n<p>@deck.save('/home/sahil/test6.pptx')</p>\n\n<p>send_data @deck,  :filename => '/home/sahil/test6.pptx', \n   :disposition => 'inline', :type => \"multipart/related\"</p>\n\n<p>it is getting saved in local directory as a pptx file. but unbable to downlaod as as pptx file.</p>\n\n<p><strong>Part2</strong></p>\n\n<p>the above is for text how Can i implement so that html.erb file for customer details and customer image  will be show in pptx slider.</p>\n\n<p>Any help will be greatly appreciated. thanks</p>\n\n<p>Thanks @peter a lot for yr help. now send_file is working. but the issue is here i am using some static data with with @deck variable. how I will  add my .html.erb  file contents (with text and image) to @deck variable. I have so many images and texts . Also its getting saved in local directory as a pptx file format(In the above case as\"/home/sahil/test6.pptx\"). I dont want to save in local directory . I need to send directly in send file</p>\n"}, {"tags": ["ruby", "iteration", "puppet", "erb"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474450162, "post_id": 39611636, "comment_id": 66532405, "body": "I am not sure where the single quotes <code>&#39;</code> in the generated versions are coming from. They a probably already part of <code>$::oracle_homes</code>. Can you please post how the original <code>$::oracle_homes</code> looks like?"}, {"owner": {"reputation": 12661, "user_id": 5343387, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/15a14cec3014822297a08ed6dfae2563?s=128&d=identicon&r=PG&f=1", "display_name": "Matt Schuchard", "link": "https://stackoverflow.com/users/5343387/matt-schuchard"}, "edited": false, "score": 1, "creation_date": 1474457771, "post_id": 39611636, "comment_id": 66537525, "body": "Consider doing the fact value manipulation fully inside of the template instead of doing some inside the manifest and then passing it to the template for further manipulation."}], "answers": [{"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 4, "last_activity_date": 1474449999, "creation_date": 1474449999, "answer_id": 39612561, "question_id": 39611636, "link": "https://stackoverflow.com/questions/39611636/erb-iterate-over-an-array-and-output-each-value-as-part-of-a-one-line-string/39612561#39612561", "title": "ERB: iterate over an array and output each value as part of a one line string", "body": "<p>I would try to replace</p>\n\n<pre><code>3 &lt;% @oracle_homes.each do |oracle_home| -%&gt;\n4 Cmnd_Alias SQLPLUS = &lt;%= oracle_home -%&gt;/bin/sqlplus\n5 Cmnd_Alias SRVCTL  = &lt;%= oracle_home -%&gt;/bin/srvctl\n6 Cmnd_Alias VOTEDSK = &lt;%= oracle_home -%&gt;/bin/crsctl query css votedisk\n7 &lt;% end -%&gt;  \n</code></pre>\n\n<p>with</p>\n\n<pre><code>Cmnd_Alias SQLPLUS = &lt;%= @oracle_homes.map { |path| \"#{path}/bin/sqlplus\" }.join(', ') %&gt;\nCmnd_Alias SRVCTL  = &lt;%= @oracle_homes.map { |path| \"#{path}/bin/srvctl\" }.join(', ') %&gt;\nCmnd_Alias VOTEDSK = &lt;%= @oracle_homes.map { |path| \"#{path}/bin/crsctl query css votedisk\" }.join(', ') %&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 27, "user_id": 1740859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NisEB.jpg?s=128&g=1", "display_name": "Alkesh", "link": "https://stackoverflow.com/users/1740859/alkesh"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474528725, "post_id": 39612865, "comment_id": 66569802, "body": "I am more worried about the time complexity. Looping on the same array thrice."}, {"owner": {"reputation": 27, "user_id": 1740859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NisEB.jpg?s=128&g=1", "display_name": "Alkesh", "link": "https://stackoverflow.com/users/1740859/alkesh"}, "reply_to_user": {"reputation": 120941, "user_id": 2402272, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1182b1d5518a596d4e8cfe0567a65c4d?s=128&d=identicon&r=PG", "display_name": "John Bollinger", "link": "https://stackoverflow.com/users/2402272/john-bollinger"}, "edited": false, "score": 0, "creation_date": 1474713003, "post_id": 39612865, "comment_id": 66651027, "body": "it&#39;s still the wrong result? Can you help me where the flow is wrong"}], "tags": [], "owner": {"reputation": 27, "user_id": 1740859, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NisEB.jpg?s=128&g=1", "display_name": "Alkesh", "link": "https://stackoverflow.com/users/1740859/alkesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1474451174, "last_edit_date": 1474451174, "creation_date": 1474450781, "answer_id": 39612865, "question_id": 39611636, "link": "https://stackoverflow.com/questions/39611636/erb-iterate-over-an-array-and-output-each-value-as-part-of-a-one-line-string/39612865#39612865", "title": "ERB: iterate over an array and output each value as part of a one line string", "body": "<pre><code>sql_plus = []\n\nsrv_ctl = []\n\nvote_desk = []\n\n&lt;% @oracle_homes.each do |oracle_home| -%&gt;\n\n    sql_plus &lt;&lt; \"#{oracle_home}/bin/sqlplus\"\n\n    srv_ctl &lt;&lt; \"#{oracle_home}/bin/srvctl\"\n\n    vote_desk &lt;&lt; \"#{oracle_home}/bin/crsctl query css votedisk\"  \n&lt;% end -%&gt;\n\nCmnd_Alias SQLPLUS = sql_plus.join(', ')\n\nCmnd_Alias SRVCTL  = srv_ctl.join(', ')\n\nCmnd_Alias VOTEDSK = vote_desk.join(', ')\n</code></pre>\n"}], "owner": {"reputation": 243, "user_id": 6857273, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-Ooo_KH-W8eY/AAAAAAAAAAI/AAAAAAAAfFs/bir1rD9r7Ag/photo.jpg?sz=128", "display_name": "Christian Mei&#223;ner", "link": "https://stackoverflow.com/users/6857273/christian-mei%c3%9fner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1104, "favorite_count": 0, "accepted_answer_id": 39612561, "answer_count": 2, "score": 2, "last_activity_date": 1474460799, "creation_date": 1474447564, "last_edit_date": 1474460799, "question_id": 39611636, "link": "https://stackoverflow.com/questions/39611636/erb-iterate-over-an-array-and-output-each-value-as-part-of-a-one-line-string", "title": "ERB: iterate over an array and output each value as part of a one line string", "body": "<p>I am trying to write a sudoers file by iterating over an array which comes from a puppet array.</p>\n\n<p>Here is my puppet class. It defines an array <code>oracle_homes</code></p>\n\n<pre><code>1 class oracle_home {\n2   $oracle_homes = split($::oracle_homes, ',')\n3   file { '/tmp/oracle_homes':\n4     ensure  =&gt; file,\n5     content =&gt; template('oracle/oracle.sudoer.erb'),\n6   } \n7 }       \n8 \n9 require oracle_home\n</code></pre>\n\n<p>and here is the erb template.</p>\n\n<pre><code> 1 Defaults    env_keep += \"ORACLE_BASE ORACLE_HOME TNS_ADMIN\"\n 2 \n 3 &lt;% @oracle_homes.each do |oracle_home| -%&gt;\n 4 Cmnd_Alias SQLPLUS = &lt;%= oracle_home -%&gt;/bin/sqlplus\n 5 Cmnd_Alias SRVCTL  = &lt;%= oracle_home -%&gt;/bin/srvctl\n 6 Cmnd_Alias VOTEDSK = &lt;%= oracle_home -%&gt;/bin/crsctl query css votedisk\n 7 &lt;% end -%&gt;  \n 8 \n 9 Runas_Alias DB    = oracle, regdb\n10 Runas_Alias GRID  = oracle, grid\n11 \n12 zabbix ALL = (GRID) NOPASSWD: VOTEDSK\n13 zabbix ALL = (DB) NOPASSWD: SQLPLUS\n14 zabbix ALL = (GRID) NOPASSWD: SRVCTL\n15 \n16 Defaults:zabbix !authenticate\n17 Defaults:zabbix !syslog\n</code></pre>\n\n<p>From lines 3 to 6 I am trying to generate the <code>Cmnd_Alias</code> but the output is not what I need. </p>\n\n<p>I get</p>\n\n<pre><code> 1  Defaults    env_keep += \"ORACLE_BASE ORACLE_HOME TNS_ADMIN\"\n 2  \n 3  Cmnd_Alias SQLPLUS = '/opt/oracle/regdb/product/12.1.0.2/dbhome_1'/bin/sqlplus\n 4  Cmnd_Alias SRVCTL  = '/opt/oracle/regdb/product/12.1.0.2/dbhome_1'/bin/srvctl\n 5  Cmnd_Alias VOTEDSK = '/opt/oracle/regdb/product/12.1.0.2/dbhome_1'/bin/crsctl query css votedisk\n 6  Cmnd_Alias SQLPLUS = '/opt/oracle/regdb/product/11.2.0.4/dbhome_1'/bin/sqlplus\n 7  Cmnd_Alias SRVCTL  = '/opt/oracle/regdb/product/11.2.0.4/dbhome_1'/bin/srvctl\n 8  Cmnd_Alias VOTEDSK = '/opt/oracle/regdb/product/11.2.0.4/dbhome_1'/bin/crsctl query css votedisk\n 9  \n10  Runas_Alias DB    = oracle, regdb\n11  Runas_Alias GRID  = oracle, grid\n12  \n13  zabbix ALL = (GRID) NOPASSWD: VOTEDSK\n14  zabbix ALL = (DB) NOPASSWD: SQLPLUS\n15  zabbix ALL = (GRID) NOPASSWD: SRVCTL\n16  \n17  Defaults:zabbix !authenticate\n18  Defaults:zabbix !syslog\n</code></pre>\n\n<p>How can I change the iteration syntax to generate <code>Cmnd_Alias</code> lines like</p>\n\n<pre><code>Cmnd_Alias SQLPLUS = /opt/oracle/regdb/product/12.1.0.2/dbhome_1/bin/sqlplus, /opt/oracle/regdb/product/11.2.0.4/dbhome_1/bin/sqlplus\nCmnd_Alias VOTEDSK = /opt/oracle/regdb/product/12.1.0.2/dbhome_1/bin/crsctl query css votedisk, /opt/oracle/regdb/product/11.2.0.4/dbhome_1/bin/crsctl query css votedisk\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec", "callback"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1474445888, "post_id": 39611024, "comment_id": 66529523, "body": "Have you tried to narrow down the problem? Can you shorten the example any further or maybe even create a minimal example?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474448025, "post_id": 39611024, "comment_id": 66530863, "body": "BTW, the <code>do</code> after <code>before_save</code> is missing. Maybe it is just a copy and paste error but it could also be the cause of your problem. In either case, it makes your example code invalid."}], "answers": [{"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474446963, "post_id": 39611203, "comment_id": 66530146, "body": "I was thinking the same at first, but this cannot be the reason, because <code>puts</code> doesn&#39;t return an <code>truthy</code> value. <code>puts</code> returns <code>nil</code> what is <code>falsey</code>. See <b><a href=\"https://ruby-doc.org/core-2.3.1/Kernel.html#method-i-puts\" rel=\"nofollow noreferrer\">docs</a></b>"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474446994, "post_id": 39611203, "comment_id": 66530162, "body": "Rails 4 behaves <a href=\"http://api.rubyonrails.org/v4.2.7.1/classes/ActiveRecord/Callbacks.html#module-ActiveRecord::Callbacks-label-Canceling+callbacks\" rel=\"nofollow noreferrer\">slightly different</a>: you have to return <code>false</code> to stop the callback chain. Anything else, including <code>nil</code>, does <i>not</i> stop it."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474447293, "post_id": 39611203, "comment_id": 66530357, "body": "@spickermann &amp; Stefan you are both right. I corrected my awnser. Thanks!"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474448145, "post_id": 39611203, "comment_id": 66530951, "body": "Your explanation seems reasonable, but I can&#39;t see how the OP&#39;s <code>before_save</code> code could return <code>false</code>."}, {"owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474448353, "post_id": 39611203, "comment_id": 66531097, "body": "@Stefan maybe a custom implementation for <code>calendar_alert_type</code> or the source code is incomplet."}, {"owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "edited": false, "score": 0, "creation_date": 1474474794, "post_id": 39611203, "comment_id": 66549153, "body": "if self.new_record? != true then it&#39;d return false. thanks for telling me about this!"}], "tags": [], "owner": {"reputation": 2460, "user_id": 3940126, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0222b0a3b16a79649265eabba7e05add?s=128&d=identicon&r=PG&f=1", "display_name": "slowjack2k", "link": "https://stackoverflow.com/users/3940126/slowjack2k"}, "is_accepted": true, "score": 0, "last_activity_date": 1474447844, "last_edit_date": 1474447844, "creation_date": 1474446317, "answer_id": 39611203, "question_id": 39611024, "link": "https://stackoverflow.com/questions/39611024/rspec-test-passing-only-when-theres-a-puts-in-the-model/39611203#39611203", "title": "Rspec test passing only when there&#39;s a PUTS in the model", "body": "<p>This behavior depends on your Rails version. Before Rails 5 you can return anything except <code>false</code> value to keep on running. A <code>false</code> will abort the <code>before_*</code> callback chain. <code>puts 'whatever'</code> returns a  nil. So every thing works. Your <code>if</code> block seems to return a <code>false</code> (custom implemation for <code>calendar_alert_type</code>?). In this case the chain is holded.</p>\n\n<p>With Rails 5 you have to <code>throw(:abort)</code> to stop callback handling.</p>\n"}], "owner": {"reputation": 3351, "user_id": 2731253, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/bf88a5179da66f2e54012dd30b6f31cb?s=128&d=identicon&r=PG&f=1", "display_name": "james", "link": "https://stackoverflow.com/users/2731253/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 179, "favorite_count": 0, "accepted_answer_id": 39611203, "answer_count": 1, "score": 0, "last_activity_date": 1474447844, "creation_date": 1474445731, "question_id": 39611024, "link": "https://stackoverflow.com/questions/39611024/rspec-test-passing-only-when-theres-a-puts-in-the-model", "title": "Rspec test passing only when there&#39;s a PUTS in the model", "body": "<p>The <code>puts</code> statement must be having some kind of weird effect that I'm not seeing here... </p>\n\n<p>I have an <code>Order</code> model. There's a callback on the model where the callback requires the model to be fully committed; i.e., I need to use an <code>after_commit</code>. However, the determinant of if the callback should run or not requires <code>ActiveRecord::Dirty</code> and therefore requires a <code>before_save</code> (or <code>after_save</code>, but I use <code>before_save</code> based on some other non-essential info).</p>\n\n<p>I have combined the two thusly:</p>\n\n<pre><code>class Order\n  # not stored in DB, used solely to help the before_save to after_commit transition\n  attr_accessor :calendar_alert_type, :twilio_alerter\n\n  before_save\n    if self.calendar_alert_type.nil?\n      if self.new_record?\n        self.calendar_alert_type = \"create, both\"\n      elsif self.email_changed?\n        self.calendar_alert_type = \"update, both\" \n      elsif self.delivery_start_changed? || self.delivery_end_changed? || (type_logistics_attributes_modified.include? \"delivery\")\n        self.calendar_alert_type = \"update, start\"\n      elsif self.pickup_start_changed? || self.pickup_end_changed? || (type_logistics_attributes_modified.include? \"pickup\")\n        self.calendar_alert_type = \"update, end\"\n      end\n    end\n\n    puts \"whatever\"\n  end\n\n  after_commit do\n    if self.calendar_alert_type.present?\n      calendar_alert(self.calendar_alert_type) \n    end\n  end\nend\n\ndef calendar_alert(alert_info)\n  puts \"whatever\"\n  alert_type = alert_info.split(\",\")[0].strip\n  start_or_end = alert_info.split(\",\")[1].strip\n  if start_or_end == \"both\"\n    [\"start\",\"end\"].each do |which_end|\n      Calendar.send(alert_type, which_end, self.id)\n    end\n  else\n    Calendar.send(alert_type, start_or_end, self.id)\n  end\nend\n</code></pre>\n\n<p>All of the private methods and the <code>ActiveRecord::Dirty</code> statements are working appropriately. This is an example of a spec:</p>\n\n<pre><code>it \"email is updated\" do\n  Calendar.should_receive(:send).with(\"update\", \"start\", @order.id).ordered\n  Calendar.should_receive(:send).with(\"update\", \"end\", @order.id).ordered\n  find(\"[name='email']\").set(\"nes@example.com\")\n  find(\".submit-changes\").click\n  sleep(1)\nend\n\nit \"phone is updated\" do\n  ... #same format as above\nend\n</code></pre>\n\n<p>Literally all the specs like the above pass ONLY when EITHER <code>puts</code> statements is present. I feel like I'm missing something very basic here, just can't put my finger on it. It's super weird because the <code>puts</code> statement is spitting out random text...</p>\n\n<p>*Note, I'm totally aware that <code>should_receive</code> should be <code>expect_to_receive</code> and that I shouldn't use sleep and that expectation mocks on feature tests aren't good. Working on updating the specs separately from bad code days, but these shouldn't be causing this issue... (feel free to correct me)</p>\n"}, {"tags": ["ruby", "bundler", "bundle-install"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474445486, "post_id": 39610900, "comment_id": 66529313, "body": "What do you mean &quot;aren&#39;t mentioned in lockfile&quot;? If it&#39;s not in lockfile, then it&#39;s not a gem in gemfile or one of their dependencies and, therefore, bundle has nothing to do with it."}, {"owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474445580, "post_id": 39610900, "comment_id": 66529353, "body": "@SergioTulentsev When I&#39;ve just added a gem to <code>Gemfile</code>, and haven&#39;t yet run <code>bundle install</code>, which would list the gem in <code>Gemfile.lock</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474445860, "post_id": 39610900, "comment_id": 66529505, "body": "You sure that bundler doesn&#39;t install the latest version? I think it does."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474446038, "post_id": 39610900, "comment_id": 66529603, "body": "<code>bundle update</code>"}, {"owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474446872, "post_id": 39610900, "comment_id": 66530090, "body": "@Aetherus that updates everything."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474447979, "post_id": 39610900, "comment_id": 66530831, "body": "Then <code>bundle update some_gem</code>"}, {"owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1477017828, "post_id": 39610900, "comment_id": 67603415, "body": "@SergioTulentsev I&#39;ve added an example of this happening."}], "answers": [{"comments": [{"owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "edited": false, "score": 0, "creation_date": 1477017930, "post_id": 39613904, "comment_id": 67603437, "body": "I&#39;ve added an example reproduction to my question, suggesting that this approach won&#39;t work, at least for the version of bundler I was using."}], "tags": [], "owner": {"reputation": 61, "user_id": 6203407, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/MtzhE.jpg?s=128&g=1", "display_name": "Nguyen Hong Nhat", "link": "https://stackoverflow.com/users/6203407/nguyen-hong-nhat"}, "is_accepted": false, "score": 0, "last_activity_date": 1474453509, "creation_date": 1474453509, "answer_id": 39613904, "question_id": 39610900, "link": "https://stackoverflow.com/questions/39610900/how-to-install-newest-version-of-gems-not-mentioned-in-gemfile-lock-with-bundler/39613904#39613904", "title": "How to install newest version of gems not mentioned in Gemfile.lock with bundler", "body": "<p>If you want to have newest version gem, remove version in <code>Gemfile</code> and run <code>bundle install</code>  again.</p>\n"}], "owner": {"reputation": 70080, "user_id": 38765, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/01bbb59a1c3ef9960f25a97afe7e920f?s=128&d=identicon&r=PG", "display_name": "Andrew Grimm", "link": "https://stackoverflow.com/users/38765/andrew-grimm"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 777, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1477017792, "creation_date": 1474445377, "last_edit_date": 1477017792, "question_id": 39610900, "link": "https://stackoverflow.com/questions/39610900/how-to-install-newest-version-of-gems-not-mentioned-in-gemfile-lock-with-bundler", "title": "How to install newest version of gems not mentioned in Gemfile.lock with bundler", "body": "<p>When I add a gem to a project's <code>Gemfile</code> for the first time, but I have installed the gem previously while working on another project, it uses the existing version of the gem, rather than the latest version of the gem available.</p>\n\n<p>For example, using bundler version 1.11.2, I added <code>gem 'rubocop'</code> to a project's <code>Gemfile</code>, and running <code>bundle install</code> resulted in it using RuboCop version 0.42.0, rather than the current (as of 21 October 2016) version of 0.44.1:</p>\n\n<pre><code>rubocop (0.42.0)\n  parser (&gt;= 2.3.1.1, &lt; 3.0)\n  powerpack (~&gt; 0.1)\n  rainbow (&gt;= 1.99.1, &lt; 3.0)\n  ruby-progressbar (~&gt; 1.7)\n  unicode-display_width (~&gt; 1.0, &gt;= 1.0.1)\n</code></pre>\n\n<p>Running <code>bundle update rubocop</code> resulted in version 0.44.1 being used, without any pre-existing gems having their version changed. This indicates there weren't any constraints shopping me from using RuboCop version 0.44.1.</p>\n\n<pre><code>rubocop (0.44.1)\n  parser (&gt;= 2.3.1.1, &lt; 3.0)\n  powerpack (~&gt; 0.1)\n  rainbow (&gt;= 1.99.1, &lt; 3.0)\n  ruby-progressbar (~&gt; 1.7)\n  unicode-display_width (~&gt; 1.0, &gt;= 1.0.1)\n</code></pre>\n\n<p>When running <code>bundle install</code>, how can I tell it, for gems that aren't mentioned in <code>Gemfile.lock</code>, to download the newest compatible version of the gem, rather than use an older version which happens to be available on the local machine?</p>\n\n<p>I tried looking at <a href=\"http://bundler.io/v1.13/man/bundle-install.1.html\" rel=\"nofollow\">http://bundler.io/v1.13/man/bundle-install.1.html</a> but nothing there seemed to be relevant.</p>\n"}, {"tags": ["android", "ruby-on-rails", "ruby", "carrierwave", "image-uploading"], "answers": [{"tags": [], "owner": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "is_accepted": false, "score": 1, "last_activity_date": 1474446307, "last_edit_date": 1495540856, "creation_date": 1474446307, "answer_id": 39611200, "question_id": 39610833, "link": "https://stackoverflow.com/questions/39610833/image-gets-rotated-automatically-on-upload-in-rails/39611200#39611200", "title": "Image gets rotated automatically on upload in Rails", "body": "<p>Finally i got the solution here <a href=\"https://stackoverflow.com/a/18541893\">https://stackoverflow.com/a/18541893</a>,</p>\n\n<p>here are changes i done to get it fixed:</p>\n\n<p>added this in <code>avatar_uploader.rb</code>:</p>\n\n<pre><code>def auto_orient\n    manipulate! do |img|\n      img = img.auto_orient\n    end\nend \n</code></pre>\n\n<p>and used it as:</p>\n\n<pre><code>  version :thumb, :if =&gt; :image? do\n    process :auto_orient      // here it is used\n    process :crop\n    resize_to_fill(100, 100)\n  end\n\n  version :large, :if =&gt; :image? do\n    process :auto_orient      // here it is used\n    resize_to_limit(600, 600)\n  end\n</code></pre>\n\n<p>That's it :)</p>\n"}], "owner": {"reputation": 4659, "user_id": 3164751, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/jLKLy.jpg?s=128&g=1", "display_name": "Amrinder Singh", "link": "https://stackoverflow.com/users/3164751/amrinder-singh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1469, "favorite_count": 0, "closed_date": 1474449574, "answer_count": 1, "score": 0, "last_activity_date": 1509659196, "creation_date": 1474445178, "last_edit_date": 1509659196, "question_id": 39610833, "link": "https://stackoverflow.com/questions/39610833/image-gets-rotated-automatically-on-upload-in-rails", "closed_reason": "Duplicate", "title": "Image gets rotated automatically on upload in Rails", "body": "<p>I am using <code>carrierwave</code> as gem for uploading images in my Rails project, it works fine on all devices except Android, whenever I upload an image from an Android device then it gets rotated 90 degree.</p>\n\n<p>These are the gems used to upload image:</p>\n\n<pre><code>gem 'rmagick'\ngem 'carrierwave'\n</code></pre>\n\n<p>And here is the code from the <code>avatar_uploader.rb</code></p>\n\n<pre><code># encoding: utf-8\n\nclass AvatarUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  include CarrierWave::RMagick\n  # include CarrierWave::MiniMagick\n\n  # Choose what kind of storage to use for this uploader:\n  storage :file\n  # storage :fog\n\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  version :thumb, :if =&gt; :image? do\n    process :crop\n    resize_to_fill(100, 100)\n  end\n\n  version :large, :if =&gt; :image? do\n    resize_to_limit(600, 600)\n  end\n\n  def crop\n    if model.crop_x.present?\n      resize_to_limit(600, 600)\n      manipulate! do |img|\n        x = model.crop_x.to_i\n        y = model.crop_y.to_i\n        w = model.crop_w.to_i\n        h = model.crop_h.to_i\n        img.crop!(x, y, w, h)\n      end\n    end\n  end\n\n    protected\n\n    def image?(new_file)\n        new_file.content_type.include? 'image'\n    end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "sqlite"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474444484, "post_id": 39610579, "comment_id": 66528733, "body": "Are there any log entries in your <code>log&#47;development.log</code> when you try to create a permit?"}, {"owner": {"reputation": 2292, "user_id": 5448888, "user_type": "registered", "accept_rate": 56, "profile_image": "https://graph.facebook.com/898095120243525/picture?type=large", "display_name": "Chakreshwar Sharma", "link": "https://stackoverflow.com/users/5448888/chakreshwar-sharma"}, "edited": false, "score": 1, "creation_date": 1474444802, "post_id": 39610579, "comment_id": 66528915, "body": "As per the code , the permit form should gets saved without user as you havn&#39;t bind user somewhere in the form , paste the logs when you click on the submit button"}, {"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474444806, "post_id": 39610579, "comment_id": 66528917, "body": "Yep there is, the main thing from the log is direct me to the contact.html which is the ELSE statement"}, {"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474445049, "post_id": 39610579, "comment_id": 66529054, "body": "Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;XXX&quot;, &quot;permit&quot;=&gt;{&quot;vehicle_type&quot;=&gt;&quot;safd&quot;, &quot;carplate&quot;=&gt;&quot;aef&quot;, &quot;studentid&quot;=&gt;&quot;awer&quot;, &quot;name&quot;=&gt;&quot;ear&quot;, &quot;department&quot;=&gt;&quot;wera&quot;, &quot;permitstart(1i)&quot;=&gt;&quot;2016&quot;, &quot;permitstart(2i)&quot;=&gt;&quot;9&quot;, &quot;permitstart(3i)&quot;=&gt;&quot;21&quot;, &quot;permitend(1i)&quot;=&gt;&quot;2016&quot;, &quot;permitend(2i)&quot;=&gt;&quot;9&quot;, &quot;permitend(3i)&quot;=&gt;&quot;21&quot;}, &quot;commit&quot;=&gt;&quot;Submit&quot;}   [1m[35m (0.0ms)[0m  [1m[36mbegin transaction[0m   [1m[35m (0.0ms)[0m  [1m[31mrollback transaction[0m Redirected to <a href=\"http://127.0.0.1:3000/contact\" rel=\"nofollow noreferrer\">127.0.0.1:3000/contact</a> Completed 302 Found in 17ms (ActiveRecord: 1.0ms)"}, {"owner": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474445107, "post_id": 39610579, "comment_id": 66529095, "body": "Use <code>user_id</code> in the params in the <code>permit_params</code>. I guess it can solve, but I don&#39;t see anything wrong here. Give it a try though if you are in a page with a user logged in."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474445142, "post_id": 39610579, "comment_id": 66529117, "body": "which rails is it? I don&#39;t think it&#39;s 3."}, {"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474445458, "post_id": 39610579, "comment_id": 66529293, "body": "ruby 2.2.4p230 (2015-12-16 revision 53155)"}, {"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474465025, "post_id": 39610579, "comment_id": 66542456, "body": "Sorry it&#39;s Rails 5.0.0.1"}], "answers": [{"comments": [{"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474445307, "post_id": 39610780, "comment_id": 66529201, "body": "When i changed it to @permit.save!, it shows ActiveRecord::RecordInvalid in PermitsController#create Validation failed: User must exist"}, {"owner": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474445440, "post_id": 39610780, "comment_id": 66529280, "body": "Do you have a validation for <code>user_id</code> ? Are you doing this from a page with a user logged in ?"}, {"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474445505, "post_id": 39610780, "comment_id": 66529322, "body": "I don&#39;t have any validation on this, yep I set a condition which the user must logged in first"}, {"owner": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474446087, "post_id": 39610780, "comment_id": 66529634, "body": "Then follow my comment on your question and add <code>user_id</code> in <code>permit _params</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474459849, "post_id": 39610780, "comment_id": 66538863, "body": "@GaryVlc: you have belongs_to on your Permit. It is a required field in rails 4.2+. Assign user to your permit so that it can be saved."}, {"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474465085, "post_id": 39610780, "comment_id": 66542506, "body": "What do you mean? How do i bring user to my permit? Sorry I&#39;m new and kinda confusing."}, {"owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "edited": false, "score": 0, "creation_date": 1474465900, "post_id": 39610780, "comment_id": 66543120, "body": "Now if i delete the belongs_to it will worked, but the data will not save for the one specific user. Everyone will able to access it"}], "tags": [], "owner": {"reputation": 95, "user_id": 5005961, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/--axIyPOQlLo/AAAAAAAAAAI/AAAAAAAAAC8/8Q7tyWQw2WA/photo.jpg?sz=128", "display_name": "Indrajeet Mishra", "link": "https://stackoverflow.com/users/5005961/indrajeet-mishra"}, "is_accepted": false, "score": 3, "last_activity_date": 1474445093, "last_edit_date": 1474445093, "creation_date": 1474445012, "answer_id": 39610780, "question_id": 39610579, "link": "https://stackoverflow.com/questions/39610579/cant-save-my-data-into-sqlite-database/39610780#39610780", "title": "Can&#39;t save my data into sqlite database", "body": "<p>check with this <code>@permits.save!</code>.\nit shows the exact error.</p>\n"}, {"tags": [], "owner": {"reputation": 244, "user_id": 5460509, "user_type": "registered", "accept_rate": 89, "profile_image": "https://lh3.googleusercontent.com/-FmS68EmjGas/AAAAAAAAAAI/AAAAAAAAAG0/Zt5hJKTe-N0/photo.jpg?sz=128", "display_name": "Serhii Danovskyi", "link": "https://stackoverflow.com/users/5460509/serhii-danovskyi"}, "is_accepted": false, "score": 0, "last_activity_date": 1474451271, "creation_date": 1474451271, "answer_id": 39613051, "question_id": 39610579, "link": "https://stackoverflow.com/questions/39610579/cant-save-my-data-into-sqlite-database/39613051#39613051", "title": "Can&#39;t save my data into sqlite database", "body": "<pre><code>    module ApplicationHelper\n     #for current user to use through out the app\n        def current_user\n                 @current_user ||= session[:current_user_id] &amp;&amp; User.find_by_id(session[:current_user_id]) # Use find_by_id to get nil instead of an error if user doesn't exist\n               end\n end\n</code></pre>\n\n<p>and</p>\n\n<pre><code>def create\n        @permits = Permit.new(permit_params)\n        @permits.user = current_user\n        if @permits.save\n          redirect_to root_path\n        else\n          redirect_to contact_path\n        end\n      end\n</code></pre>\n\n<p>test it</p>\n"}, {"tags": [], "owner": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "is_accepted": false, "score": 0, "last_activity_date": 1474473882, "creation_date": 1474473882, "answer_id": 39621479, "question_id": 39610579, "link": "https://stackoverflow.com/questions/39610579/cant-save-my-data-into-sqlite-database/39621479#39621479", "title": "Can&#39;t save my data into sqlite database", "body": "<p>Or you can just say that a permit has a single user and avoid the confusion.</p>\n\n<pre><code>#models/permit.rb\nclass Permit &lt; ApplicationRecord\n    has_one :user\nend\n\n#controllers/permit_controller.rb\ndef create\n    @user = User.find(session[:user_id]) #use your session variable\n    @permits = Permit.new(permit_params)\n\n    if @permits.save\n      @user.permits &lt;&lt; @permits\n      redirect_to root_path\n    else\n      redirect_to contact_path\n    end\nend\n</code></pre>\n\n<p>It will save permits for the logged in user. </p>\n"}], "owner": {"reputation": 93, "user_id": 4223268, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/8ec3bb31a088e75ad3476310a33efa13?s=128&d=identicon&r=PG&f=1", "display_name": "Gary Vlc", "link": "https://stackoverflow.com/users/4223268/gary-vlc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1474473882, "creation_date": 1474444414, "last_edit_date": 1474445530, "question_id": 39610579, "link": "https://stackoverflow.com/questions/39610579/cant-save-my-data-into-sqlite-database", "title": "Can&#39;t save my data into sqlite database", "body": "<p>I am trying to implement a Parking Permit application page using ROR. I couldn't get my data saved into the database. The permit database is associated with the user also. The program won't save the data and execute the else statement. There is no error generated, i think i have missed something but i don't know the exact problem. Any help is appreciated!</p>\n\n<p>Permit_controller.rb</p>\n\n<pre><code>class PermitsController &lt; ApplicationController\n  before_action :set_permit, only: [:show, :destroy]\n  def index\n    @permits = Permit.all\n  end\n\n  def new\n    @permits = Permit.new\n  end\n\n  def create\n    @permits = Permit.new(permit_params)\n    if @permits.save\n      redirect_to root_path\n    else\n      redirect_to contact_path\n    end\n  end\n\n  def destroy\n  end\n\n  def show\n    @permits = Permit.find(params[:id])\n  end\n  private\n  # Use callbacks to share common setup or constraints between actions.\n  def set_permit\n    @permits = Permit.find(params[:id])\n  end\n\n  # Never trust parameters from the scary internet, only allow the white list through.\n  def permit_params\n    params.require(:permit).permit(:vehicle_type, :name, :studentid, :department, :carplate,:permitstart, :permitend)\n  end\nend\n</code></pre>\n\n<p>Permit.rb</p>\n\n<pre><code>class Permit &lt; ApplicationRecord\n  belongs_to :user\nend\n</code></pre>\n\n<p>Create_permit.rb</p>\n\n<pre><code>class CreatePermits &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :permits do |t|\n      t.string :vehicle_type\n      t.string :name\n      t.string :studentid\n      t.string :department\n      t.string :carplate\n      t.date :permitstart\n      t.date :permitend\n      t.references :user, foreign_key: true\n\n      t.timestamps\n    end\n    add_foreign_key :permits, :user\n    add_index :permits, [:user_id, :created_at]\n  end\nend\n</code></pre>\n\n<p>User.rb</p>\n\n<pre><code>    class User &lt; ApplicationRecord\n      has_secure_password\n      has_many :permits\n    end\n\n    #book pg 264 Validation\n\npermit/new.html.erb\n&lt;% provide(:title, 'New Permit') %&gt;\n&lt;h1&gt;Permit Application&lt;/h1&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-6 col-md-offset-3\"&gt;\n    &lt;%= form_for(@permits) do |f| %&gt;\n\n        &lt;%= f.label :\"Vehicle\" %&gt;\n        &lt;%= f.text_field :vehicle_type, class: 'form-control' %&gt;\n\n        &lt;%= f.label :\"License Plate\" %&gt;\n        &lt;%= f.text_field :carplate, class: 'form-control' %&gt;\n\n        &lt;%= f.label :\"Student ID\" %&gt;\n        &lt;%= f.text_field :studentid, class: 'form-control' %&gt;\n\n        &lt;%= f.label :name %&gt;\n        &lt;%= f.text_field :name, class: 'form-control' %&gt;\n\n        &lt;%= f.label :\"Department of applicant\" %&gt;\n        &lt;%= f.text_field :department, class: 'form-control' %&gt;\n\n        &lt;%= f.label :permit_start %&gt;\n        &lt;%= f.date_select :permitstart, class: 'form-control' %&gt;\n\n        &lt;%= f.label :permit_end %&gt;\n        &lt;%= f.date_select :permitend,  class: 'form-control'  %&gt;\n\n\n        &lt;%= f.submit \"Submit\", class: \"btn btn-primary\" %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>schema.rb</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20160921071908) do\n\n\n  create_table \"permits\", force: :cascade do |t|\n    t.string   \"vehicle_type\"\n    t.string   \"name\"\n    t.string   \"studentid\"\n    t.string   \"department\"\n    t.string   \"carplate\"\n    t.date     \"permitstart\"\n    t.date     \"permitend\"\n    t.integer  \"user_id\"\n    t.datetime \"created_at\",   null: false\n    t.datetime \"updated_at\",   null: false\n    t.index [\"user_id\"], name: \"index_permits_on_user_id\"\n  end\n\n  create_table \"users\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"email\"\n    t.datetime \"created_at\",      null: false\n    t.datetime \"updated_at\",      null: false\n    t.string   \"password_digest\"\n    t.integer  \"user_type\"\n  end\n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1474442437, "post_id": 39609466, "comment_id": 66527472, "body": "Did you try running your script without using a thread for each service?"}, {"owner": {"reputation": 130, "user_id": 5899485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh3.googleusercontent.com/-_bdSanOHh2E/AAAAAAAAAAI/AAAAAAAASI8/4U6xp3d_I1Q/photo.jpg?sz=128", "display_name": "Vlad Cenan", "link": "https://stackoverflow.com/users/5899485/vlad-cenan"}, "reply_to_user": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1474448056, "post_id": 39609466, "comment_id": 66530882, "body": "It was my mistake apparently it fails because of runtime error for nodes. Anyway I re-edit the question!"}], "owner": {"reputation": 130, "user_id": 5899485, "user_type": "registered", "accept_rate": 84, "profile_image": "https://lh3.googleusercontent.com/-_bdSanOHh2E/AAAAAAAAAAI/AAAAAAAASI8/4U6xp3d_I1Q/photo.jpg?sz=128", "display_name": "Vlad Cenan", "link": "https://stackoverflow.com/users/5899485/vlad-cenan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 32, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474448010, "creation_date": 1474441060, "last_edit_date": 1474448010, "question_id": 39609466, "link": "https://stackoverflow.com/questions/39609466/skip-runtime-error-inside-loop-cycle", "title": "Skip Runtime error inside loop cycle", "body": "<p>I created this ruby script which basically search all the nodes/servers from an environment based on recipes from each server node. The issue is that it's failling if a node is stopped with Runtime error and it will get the next microservice according to <em>h[thread_id] &lt;&lt; \"ReadTimeout Error\" next</em> </p>\n\n<pre><code>file = File.read(\"./#{srv}.json\")\ndata_hash = JSON.parse(file)\n\nh = {}\nthreads = []\nservice = data_hash.keys\nservice.each do |microservice|\nthreads &lt;&lt; Thread.new do\nthread_id = Thread.current.object_id.to_s(36)\n begin\n\n h[thread_id] = \"#{microservice}\"\n port = data_hash[\"#{microservice}\"]['adport']\n h[thread_id] &lt;&lt; \"\\nPort: #{port}\\n\"\n\n nodes = \"knife search 'chef_environment:#{env} AND recipe:#{microservice}' -i 2&gt;&amp;1 | sed '1,2d'\"\n node = %x[ #{nodes} ].split\n node.each do |n|\n h[thread_id] &lt;&lt; \"\\n Node: #{n} \\n\"\n uri = URI(\"http://#{n}:#{port}/healthcheck?count=10\")\n res = Net::HTTP.get_response(uri)\n status = Net::HTTP.get(uri)\n  h[thread_id] &lt;&lt; \"#{res.code}\"\n  h[thread_id] &lt;&lt; status\n  h[thread_id] &lt;&lt; res.message\nend\n\nrescue =&gt; e\n  h[thread_id] &lt;&lt; \"ReadTimeout Error\"\n  next\nend\nend\nend\n\nthreads.each do |thread|\n  thread.join\nend\nThreadsWait.all_waits(*threads)\nh.values.join(\"\\n\")\n</code></pre>\n\n<p>How can I skip only that node and get the results for the other found nodes inside this loop before it moves to the next microservice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "web", "methods", "symbols"], "answers": [{"tags": [], "owner": {"reputation": 139, "user_id": 6611266, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1427842067232960/picture?type=large", "display_name": "LeoCantThinkofAName", "link": "https://stackoverflow.com/users/6611266/leocantthinkofaname"}, "is_accepted": false, "score": -2, "last_activity_date": 1474443241, "last_edit_date": 1474443241, "creation_date": 1474442679, "answer_id": 39609997, "question_id": 39609305, "link": "https://stackoverflow.com/questions/39609305/some-questions-about-symbol-and-instance-method-in-ruby/39609997#39609997", "title": "Some questions about symbol and instance method in Ruby", "body": "<p>So it actually defined a <code>proc</code>, and make <code>:find</code> and <code>find_city</code> sort like key and value...Probably...</p>\n"}, {"tags": [], "owner": {"reputation": 6105, "user_id": 4002659, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c11c2eb99f1668b4d442780e34fc983d?s=128&d=identicon&r=PG&f=1", "display_name": "dp7", "link": "https://stackoverflow.com/users/4002659/dp7"}, "is_accepted": false, "score": 0, "last_activity_date": 1474442743, "last_edit_date": 1592644375, "creation_date": 1474442743, "answer_id": 39610021, "question_id": 39609305, "link": "https://stackoverflow.com/questions/39609305/some-questions-about-symbol-and-instance-method-in-ruby/39610021#39610021", "title": "Some questions about symbol and instance method in Ruby", "body": "<blockquote>\n<p><code>cities[:find] = method(:find_city)</code></p>\n</blockquote>\n<p>Here, <code>cities</code> is a hash and the method object returned by <code>method(:find_city)</code> is assigned to the hash key <code>find</code> which is a symbol.</p>\n<p>I think it depends upon you and the context of program where you are writing this.</p>\n<p>A simple <code>method_var =  method(:find_city)</code> would work here as well.</p>\n<hr>\n<blockquote>\n<p><code>method(:find_city)</code></p>\n<p>I know it allows me to call the find_city method. But again, why I have to put a colon before find_city? Does this code means parse the arguments I put in to symbols?</p>\n</blockquote>\n<p>Here, you are passing the method name as an argument, you have to either pass it as a <code>symbol</code> or <code>string</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 643, "user_id": 1463572, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/01bfce085158b21e02684c6531fc364b?s=128&d=identicon&r=PG", "display_name": "tpei", "link": "https://stackoverflow.com/users/1463572/tpei"}, "is_accepted": false, "score": 0, "last_activity_date": 1474442929, "creation_date": 1474442929, "answer_id": 39610095, "question_id": 39609305, "link": "https://stackoverflow.com/questions/39609305/some-questions-about-symbol-and-instance-method-in-ruby/39610095#39610095", "title": "Some questions about symbol and instance method in Ruby", "body": "<p>In Ruby, the <code>method</code> method creates a Method Object. This allow you to pass it around in your code and call it later using the <code>.call</code> method on your Method object.\nSince calling <code>method(my_method)</code> would evaluate <code>my_method</code> and pass the result to <code>method(...)</code>, you need a way to tell the <code>method</code> method which method to use. That's why you basically pass in the method name as a Symbol into the <code>method</code> method :D</p>\n"}, {"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1474555899, "post_id": 39615759, "comment_id": 66588014, "body": "<code>written in an alien style</code> :D +1!"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 2, "last_activity_date": 1474459466, "last_edit_date": 1474459466, "creation_date": 1474458557, "answer_id": 39615759, "question_id": 39609305, "link": "https://stackoverflow.com/questions/39609305/some-questions-about-symbol-and-instance-method-in-ruby/39615759#39615759", "title": "Some questions about symbol and instance method in Ruby", "body": "<p>I have to say that <em>Learn Ruby The Hard Way</em> gives us a really Really REALLY GOOD example of what we should NOT do. No rubyist will ever type such code in his/her projects. This piece of code is confusing, unreadable and is an abuse of metaprogramming.</p>\n\n<p>Anyway, I dissect that code for you.</p>\n\n<p>The confusing part starts with this line:</p>\n\n<pre><code>cities[:find] = method(:find_city)\n</code></pre>\n\n<p>Let's look at the right side of the <code>=</code>. It calls a method whose name is <code>method</code>, as you may guess, the return value of the method call is the method <code>find_city</code>, more precisely, a <code>Method</code> object that wraps the method <code>find_city</code> with its scope. Then that method is stored in the hash <code>cities</code>, with a symbol <code>:find</code> as the key. So the value of <code>cities</code> now become</p>\n\n<pre><code>{\n  'CA'=&gt; 'San Francisco', \n  'MI'=&gt; 'Detroit', \n  'FL'=&gt; 'Jacksonville',\n  'NY' =&gt; 'New York',\n  'OR' =&gt; 'Portland',\n  :find =&gt; #&lt;Method:main.find_city&gt;\n}\n</code></pre>\n\n<p>You can see that the last key-value pair is really really weird, and it shouldn't be there because the hash <code>cities</code> should only store states and their capitals. Heck!</p>\n\n<p>Then here comes this even weirder expression <code>cities[:find].call(cities, state)</code>. Let's see how this work.</p>\n\n<p><code>cities[:find]</code> simply retrieve the <code>Method</code> object from the hash (still remember what method it wraps?)</p>\n\n<p><code>cities[:find].call(cities, state)</code> invokes the method it wraps, which is <code>find_city</code>, in the scope that the <code>Method</code> object wraps, which is the top level object (a.k.a. <code>main</code>), <code>Method#call</code> returns whatever the method wrapped in returns. So this expression is just <code>find_city(cities, state)</code>, written in an alien style.</p>\n"}], "owner": {"reputation": 139, "user_id": 6611266, "user_type": "registered", "accept_rate": 29, "profile_image": "https://graph.facebook.com/1427842067232960/picture?type=large", "display_name": "LeoCantThinkofAName", "link": "https://stackoverflow.com/users/6611266/leocantthinkofaname"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 94, "favorite_count": 1, "answer_count": 4, "score": 3, "last_activity_date": 1474459466, "creation_date": 1474440560, "last_edit_date": 1474443255, "question_id": 39609305, "link": "https://stackoverflow.com/questions/39609305/some-questions-about-symbol-and-instance-method-in-ruby", "title": "Some questions about symbol and instance method in Ruby", "body": "<p>I'm currently try to learn ruby on 'Learn Ruby The Hard Way'\nHere's my question...</p>\n\n<p>The following code are from exercise 40:</p>\n\n<pre><code>cities = {'CA'=&gt; 'San Francisco', 'MI'=&gt; 'Detroit', 'FL'=&gt; 'Jacksonville'}\n\ncities['NY'] = 'New York'\ncities['OR'] = 'Portland'\n\ndef find_city(map, state)\n  if map.include? state\n    return map[state]\n  else\n    return 'Not found.'\n  end\nend\n\ncities[:find] = method(:find_city)\n\nwhile true\n  print 'State? (ENTER to quit) '\n  state = gets.chomp\n\n  break if state.empty?\n\n  puts cities[:find].call(cities, state)\nend\n</code></pre>\n\n<p>I played around with the code, and finally understand how it works.\nBut I still don't understand about two things:</p>\n\n<p>first...</p>\n\n<p>In about middle of the code,\nit defined a variable</p>\n\n<pre><code>cities[:find] = method(:find_city)\n</code></pre>\n\n<p>As what I know for now, the <code>:</code>(colon) declare a symbol.\nI want to know is it a better practice to name a variable as <code>cities[:find]</code>\ninstead of using <code>cities_find</code> in this case?</p>\n\n<p>I'm not quite sure what's the differences, or maybe it's much readable for most rubyist?</p>\n\n<p>And the second one is also about the same line.</p>\n\n<pre><code>method(:find_city)\n</code></pre>\n\n<p>I know it allows me to call the <code>find_city</code> method.\nBut again, why I have to put a colon before <code>find_city</code>?\nDoes this code means parse the arguments I put in to symbols?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474440566, "post_id": 39609277, "comment_id": 66526387, "body": "try using <code>each</code> and <code>push</code>."}, {"owner": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "reply_to_user": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474440630, "post_id": 39609277, "comment_id": 66526425, "body": "Ah @sagarpandya82 I want to own method for same output as array map"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 2, "creation_date": 1474444112, "post_id": 39609277, "comment_id": 66528501, "body": "Is there a question here?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474445608, "post_id": 39609277, "comment_id": 66529371, "body": "Have you tried to solve the problem yourself? What have you got so far? And by the way, is this homework?"}, {"owner": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474474467, "post_id": 39609277, "comment_id": 66548967, "body": "@Stefan I was using with alias only, so there is requirement for another method"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474451564, "post_id": 39611519, "comment_id": 66533319, "body": "Maybe <code>each_with_object</code> would be slightly more appropriate."}, {"owner": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "edited": false, "score": 0, "creation_date": 1474474556, "post_id": 39611519, "comment_id": 66549014, "body": "Can you explain &quot;return enum_for(<b>callee</b>)&quot; here why you took <b>callee</b> what does it mean?"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "edited": false, "score": 0, "creation_date": 1474474921, "post_id": 39611519, "comment_id": 66549224, "body": "@uishra: Is there anything unclear about the documentation? What <i>exactly</i> is unclear about the documentation?"}, {"owner": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474475085, "post_id": 39611519, "comment_id": 66549332, "body": "I got answer @Stefan  <b>callee</b> is intended to return the symbol with which the method was actually invoked."}, {"owner": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "edited": false, "score": 0, "creation_date": 1474531929, "post_id": 39611519, "comment_id": 66571807, "body": "@J&#246;rgWMittag Thank you! i check documentation then understand properly above word"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474570271, "post_id": 39611519, "comment_id": 66596757, "body": "...@Stefan&#39;s comment ends with &quot;;-)&quot; :-)."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1474447234, "creation_date": 1474447234, "answer_id": 39611519, "question_id": 39609277, "link": "https://stackoverflow.com/questions/39609277/create-own-arraymap-like-method/39611519#39611519", "title": "Create own Array#map like method", "body": "<p>The easiest way of creating a method with the same behavior of a different method is a simple <a href=\"http://ruby-doc.org/core/Module.html#method-i-alias_method\" rel=\"nofollow\">alias</a>:</p>\n\n<pre><code>class Array\n  alias_method :new_map_method, :map\nend\n</code></pre>\n\n<p>If, for whatever strange reason, you don't want to use <a href=\"http://ruby-doc.org/core/Array.html#method-i-map\" rel=\"nofollow\"><code>map</code></a>, you can use <a href=\"http://ruby-doc.org/core/Enumerable.html#method-i-inject\" rel=\"nofollow\"><code>inject</code></a> instead:</p>\n\n<pre><code>class Array\n  def new_map_method\n    return enum_for(__callee__) unless block_given?\n    inject([]) {|acc, el| acc &lt;&lt; yield(el) }\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474570456, "post_id": 39623027, "comment_id": 66596856, "body": "What about <code>[1,2,3].my_map</code>?  See <a href=\"http://ruby-doc.org/core-2.3.0/Array.html#method-i-map\" rel=\"nofollow noreferrer\">Array#map</a>."}, {"owner": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474633270, "post_id": 39623027, "comment_id": 66622922, "body": "@CarySwoveland Thanks for pointing, i am refactoring my code."}], "tags": [], "owner": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "is_accepted": false, "score": 1, "last_activity_date": 1474479121, "creation_date": 1474479121, "answer_id": 39623027, "question_id": 39609277, "link": "https://stackoverflow.com/questions/39609277/create-own-arraymap-like-method/39623027#39623027", "title": "Create own Array#map like method", "body": "<blockquote>\n  <p>Thanks guys! I also made one solution for my qeestion</p>\n</blockquote>\n\n<pre><code>class Array\n def my_map(&amp;block)\n  result = []\n  each do |element|\n   result &lt;&lt; block.call(element)\n  end\n  result\n end\nend\n</code></pre>\n\n<blockquote>\n  <p>function calling</p>\n</blockquote>\n\n<pre><code> [1,2,3].my_map(&amp;:to_s)\n</code></pre>\n\n<blockquote>\n  <p>output => [\"1\", \"2\", \"3\"] </p>\n</blockquote>\n\n<pre><code>[1, 2, 3, 4, 5].my_map do |x|\n  x\nend\n</code></pre>\n\n<blockquote>\n  <p>output => [1, 2, 3, 4, 5] </p>\n</blockquote>\n"}], "owner": {"reputation": 300, "user_id": 5233084, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh3.googleusercontent.com/-9zNPlKb6dr4/AAAAAAAAAAI/AAAAAAAAABM/lC1pWMXlp_U/photo.jpg?sz=128", "display_name": "umishra", "link": "https://stackoverflow.com/users/5233084/umishra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 198, "favorite_count": 0, "answer_count": 2, "score": -2, "last_activity_date": 1474479121, "creation_date": 1474440477, "last_edit_date": 1474443453, "question_id": 39609277, "link": "https://stackoverflow.com/questions/39609277/create-own-arraymap-like-method", "title": "Create own Array#map like method", "body": "<p>I want to create an instance method like <code>Array#my_map</code> and that method should behavior of the original <code>Array#map</code> method.\nI want to same output from new method as below:</p>\n\n<pre><code>arr = [1, 2, 3, 4]\narr.new_map_method do |x|\n x + 1\nend # =&gt; [2, 3, 4, 5]\n\narr.new_map_method(&amp;:to_s) # =&gt; [\"1\", \"2\", \"3\", \"4\"]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "edited": false, "score": 0, "creation_date": 1474440199, "post_id": 39609036, "comment_id": 66526195, "body": "use <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">includes method</a>  Please refer to that link."}, {"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "reply_to_user": {"reputation": 349, "user_id": 3848768, "user_type": "registered", "accept_rate": 27, "profile_image": "https://i.stack.imgur.com/sE6KE.jpg?s=128&g=1", "display_name": "Modi Ranga Nayakulu", "link": "https://stackoverflow.com/users/3848768/modi-ranga-nayakulu"}, "edited": false, "score": 0, "creation_date": 1474443322, "post_id": 39609036, "comment_id": 66528029, "body": "Already edited, Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1474442488, "post_id": 39609144, "comment_id": 66527506, "body": "Thanks, in fact I got three hierarchies of  sections on question, this can solve two hierarchies, but how do I solve three?"}], "tags": [], "owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "is_accepted": true, "score": 1, "last_activity_date": 1474443435, "last_edit_date": 1474443435, "creation_date": 1474440051, "answer_id": 39609144, "question_id": 39609036, "link": "https://stackoverflow.com/questions/39609036/rails-n1-query-with-has-many-association/39609144#39609144", "title": "Rails N+1 query with has_many association", "body": "<p>first thing the associations are really confusing. </p>\n\n<p>I think you are calling two hierarchies of sections on question, so changing this line should work </p>\n\n<pre><code>questions = Question.where(:id =&gt; q_ids).includes(section: :section)\n</code></pre>\n\n<p>You are accessing the parent section of <code>q.section</code> so we need to include that as well</p>\n\n<pre><code>parent_section = q.section.section rescue nil\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Its getting messier I am not sure if you should do this but i think this will solve the problem</p>\n\n<pre><code>questions = Question.where(:id =&gt; q_ids).includes(section: [section: :section])\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "edited": false, "score": 0, "creation_date": 1474443190, "post_id": 39609235, "comment_id": 66527945, "body": "Thanks, but it&#39;s not my original code actually, I&#39;ve updated my question. I have  a <code>while</code> inside each."}], "tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": false, "score": 0, "last_activity_date": 1474440358, "creation_date": 1474440358, "answer_id": 39609235, "question_id": 39609036, "link": "https://stackoverflow.com/questions/39609036/rails-n1-query-with-has-many-association/39609235#39609235", "title": "Rails N+1 query with has_many association", "body": "<p>instead this code:</p>\n\n<pre><code>  questions.each do |q|\n    section = {id: q.section.id, name: q.section.name}\n    parent_section = q.section.section rescue nil\n    p parent_section.id\n  end\n</code></pre>\n\n<p>put one query and iterate over its</p>\n\n<pre><code>parent_sections = Section.joins(sections: :questions).where(questions: {id:  questions.pluck(:id)})\nparent_sections.each { |section| p section.id }\n</code></pre>\n"}], "owner": {"reputation": 3691, "user_id": 3732906, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d83d53cbd84d7427ebfd45190b9ded9d?s=128&d=identicon&r=PG&f=1", "display_name": "Coda Chang", "link": "https://stackoverflow.com/users/3732906/coda-chang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 39609144, "answer_count": 2, "score": 0, "last_activity_date": 1474443435, "creation_date": 1474439655, "last_edit_date": 1474443040, "question_id": 39609036, "link": "https://stackoverflow.com/questions/39609036/rails-n1-query-with-has-many-association", "title": "Rails N+1 query with has_many association", "body": "<p>The model relationship is </p>\n\n<pre><code>section has_many :sections\nsection belong_to :section\nsection has_many :questions\nquestion_set has_many :questions, :through =&gt; :question_sets_questions\n</code></pre>\n\n<p>I encounter N+1 query problem, but I don't know how to figure it out. </p>\n\n<p>Here is code </p>\n\n<pre><code>def test\n  question_set_id = params[:qset_id].to_i\n  q_ids = QuestionSetsQuestion.where(:question_set_id =&gt; question_set_id).pluck(:question_id)\n  questions = Question.where(:id =&gt; q_ids).includes(:section)\n  questions.each do |q|\n    section = {id: q.section.id, name: q.section.name}\n    parent_section = q.section.section rescue nil\n    p parent_section.id\n  end\nend\n</code></pre>\n\n<p>The <code>bullet</code> gem said</p>\n\n<pre><code>N+1 Query detected\n  Section =&gt; [:section]\n  Add to your finder: :include =&gt; [:section]\nN+1 Query method call stack\n</code></pre>\n\n<p>Do I put the <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow\">includes</a> wrongly? </p>\n\n<h2>Update</h2>\n\n<p>Thanks @Deepak, <code>.includes(section: :section)</code> can solve two layers of sections. But actually I got three hierarchies of sections. The original code looks like</p>\n\n<pre><code>questions.each do |q|\n  section = {id: q.section.id, name: q.section.name}\n  parent_section = q.section.section rescue nil\n  while parent_section.present?\n    section = {id: parent_section.id, name: parent_section.name, children: [section]}\n    parent_section = parent_section.section rescue nil\n  end\n  p section \nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 3, "creation_date": 1474437706, "post_id": 39608461, "comment_id": 66525057, "body": "<code>+=</code>, <code>-=</code> are not operators. When ruby sees <code>x += 1</code> she converts that to <code>x = x + 1</code> and then evaluates that. <code>+=</code> (and the others) are provided merely for the convenience of the coder."}, {"owner": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474437923, "post_id": 39608461, "comment_id": 66525143, "body": "thank u @CarySwoveland"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474437954, "post_id": 39608461, "comment_id": 66525158, "body": "I closed it since in the linked answer\u2019s comments there is a perfect answer."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1474438179, "post_id": 39608461, "comment_id": 66525236, "body": "<code>+=</code> (and the others) is called <i>abbreviated assignment</i>."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474438687, "post_id": 39608461, "comment_id": 66525446, "body": "There is no such method called <code>+=</code>, so you can&#39;t <code>send</code> it."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474439774, "post_id": 39608461, "comment_id": 66525974, "body": "@mudasobwa I&#39;ve reopened the question. Although there is an answer in a comment, I think this question deserves an actual answer."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1474439896, "post_id": 39608461, "comment_id": 66526038, "body": "@Stefan sure, I doubted whether it should be closed or not and you made the right choice for me :)"}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1474440706, "post_id": 39608461, "comment_id": 66526461, "body": "The <code>send</code> method already automatically converts strings to symbols."}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 5, "last_activity_date": 1474442851, "last_edit_date": 1474442851, "creation_date": 1474441192, "answer_id": 39609502, "question_id": 39608461, "link": "https://stackoverflow.com/questions/39608461/how-to-convert-to-operator-in-ruby/39609502#39609502", "title": "how to convert &quot;+=&quot; to operator in ruby", "body": "<p><code>2.send(\"-\", 3)</code> works, because <code>-</code> is a method and <code>2</code> responds to that method:</p>\n\n<pre><code>2.respond_to?('-') #=&gt; true\n</code></pre>\n\n<p><code>=</code> and <code>+=</code> on the other hand are not methods:</p>\n\n<pre><code>2.respond_to?('=')  #=&gt; false\n2.respond_to?('+=') #=&gt; false\n</code></pre>\n\n<p>And even if <code>=</code> was a valid method<sup>1</sup>, then</p>\n\n<pre><code>a = 2\na.send(\"=\", 4)\n</code></pre>\n\n<p>would be equivalent to:</p>\n\n<pre><code>2.send(\"=\", 4)\n</code></pre>\n\n<p>or simply:</p>\n\n<pre><code>2 = 4\n</code></pre>\n\n<p>In other words: it would redefine <code>2</code> as <code>4</code>, something Ruby doesn't allow you to do.</p>\n\n<p>This is because variables (like <code>a</code> above) are not objects. <code>a.send</code> doesn't send a message to the variable <code>a</code>, but to the object, <code>a</code> is referring to (<code>2</code> in the example).</p>\n\n<p>The same applies to <a href=\"http://ruby-doc.org/core-2.3.1/doc/syntax/assignment_rdoc.html#label-Abbreviated+Assignment\" rel=\"nofollow\">abbreviated assignment</a> like <code>+=</code>:</p>\n\n<pre><code>a = 2\na += 2\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>a = 2\na = a + 2\n</code></pre>\n\n<p>You can just rewrite it as:</p>\n\n<pre><code>a = 2\na = a.send(\"+\", 2)\n</code></pre>\n\n<p>The assignment is not part of the method invocation.</p>\n\n<hr>\n\n<p><sup>1</sup> you can actually define a method <code>=</code> via <code>define_method</code>:</p>\n\n<pre><code>class Foo\n  define_method('=') { |other| puts \"`=' called with #{other}\" }\nend\n</code></pre>\n\n<p>But it is just an ordinary method. In particular, it does not and can not alter the variable the object was assigned-to or the object's identity:</p>\n\n<pre><code> f = Foo.new\n #=&gt; #&lt;Foo:0x007ff20c0eeda8&gt;\n f.send('=', 123)\n # `=' called with 123\n #=&gt; nil\n f\n #=&gt; #&lt;Foo:0x007ff20c0eeda8&gt;\n</code></pre>\n"}], "owner": {"reputation": 747, "user_id": 6477694, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/b295a4726fb5094fda67dcb001c90b11?s=128&d=identicon&r=PG&f=1", "display_name": "junk", "link": "https://stackoverflow.com/users/6477694/junk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1053, "favorite_count": 0, "accepted_answer_id": 39609502, "answer_count": 1, "score": 2, "last_activity_date": 1474442851, "creation_date": 1474437094, "last_edit_date": 1474439876, "question_id": 39608461, "link": "https://stackoverflow.com/questions/39608461/how-to-convert-to-operator-in-ruby", "title": "how to convert &quot;+=&quot; to operator in ruby", "body": "<p>I can convert <code>\"+\"</code> , <code>\"-\"</code> or <code>\"/\"</code> to operator use <code>2.send(\"-\",3)</code></p>\n\n<p>but it does not work with <code>\"+=\"</code></p>\n\n<pre><code>a = 2\na += 2 #=&gt; 4\n\na = 2\na.send(\"+=\", 4) #=&gt; NoMethodError: undefined method `+=' for 2:Fixnum\n</code></pre>\n\n<p>I have tried to convert symbol first ; but not works too;</p>\n\n<p>how to fix this?</p>\n"}, {"tags": ["ruby", "git", "post", "iframe"], "comments": [{"owner": {"reputation": 1580, "user_id": 449531, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b0281ec467c331131a3a679c82b29360?s=128&d=identicon&r=PG", "display_name": "zhon", "link": "https://stackoverflow.com/users/449531/zhon"}, "edited": false, "score": 0, "creation_date": 1474435523, "post_id": 39608129, "comment_id": 66524199, "body": "What does the <code>git</code> tag have to do with your question?"}, {"owner": {"reputation": 1, "user_id": 6856551, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155217080933625/picture?type=large", "display_name": "Harrison van der Page", "link": "https://stackoverflow.com/users/6856551/harrison-van-der-page"}, "reply_to_user": {"reputation": 1580, "user_id": 449531, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/b0281ec467c331131a3a679c82b29360?s=128&d=identicon&r=PG", "display_name": "zhon", "link": "https://stackoverflow.com/users/449531/zhon"}, "edited": false, "score": 0, "creation_date": 1474628671, "post_id": 39608129, "comment_id": 66620167, "body": "sorry, just came up with a suggested tag. guessing you dont know the answer to my question"}], "owner": {"reputation": 1, "user_id": 6856551, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155217080933625/picture?type=large", "display_name": "Harrison van der Page", "link": "https://stackoverflow.com/users/6856551/harrison-van-der-page"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 24, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474435325, "creation_date": 1474435325, "question_id": 39608129, "link": "https://stackoverflow.com/questions/39608129/allowing-users-to-post-iframe-videos", "title": "allowing Users to post Iframe videos", "body": "<p>am currently trying to recreate tumblr as a little way of learning ruby.\ni have hit a road block trying to allow users to be able to post iframe links into a post. </p>\n\n<p>i have tried making a new form-group to try pass in a users input of an iframe url but no i'm definitely not in the right place</p>\n\n<p>my git repo is <a href=\"https://github.com/harrison1234/vews_app\" rel=\"nofollow\">https://github.com/harrison1234/vews_app</a></p>\n\n<p>very new to ruby and have been searching around on stack overflow but finding it hard to connect peoples suggestions with my file types</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 3, "creation_date": 1474433436, "post_id": 39607762, "comment_id": 66523540, "body": "<code>def is_enough_words_to_play_game?; Word.verified.size &gt; 5; end</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1474435729, "post_id": 39607762, "comment_id": 66524279, "body": "<code>def i;Word.verified.size&gt;5;end</code>."}], "answers": [{"comments": [{"owner": {"reputation": 532, "user_id": 5841310, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/10206848519343961/picture?type=large", "display_name": "Hubert Jakubiak", "link": "https://stackoverflow.com/users/5841310/hubert-jakubiak"}, "edited": false, "score": 1, "creation_date": 1474434344, "post_id": 39607838, "comment_id": 66523803, "body": "Does it make sense to define such simple method?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 532, "user_id": 5841310, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/10206848519343961/picture?type=large", "display_name": "Hubert Jakubiak", "link": "https://stackoverflow.com/users/5841310/hubert-jakubiak"}, "edited": false, "score": 3, "creation_date": 1474434677, "post_id": 39607838, "comment_id": 66523930, "body": "@HubertJakubiak This is <i>exactly</i> how you define methods in Ruby that are clean, simple, and easy to understand. The only thing I&#39;m concerned about here is the magical number <code>5</code> which should be some kind of constant somewhere so its meaning is made clear."}, {"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "reply_to_user": {"reputation": 532, "user_id": 5841310, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/10206848519343961/picture?type=large", "display_name": "Hubert Jakubiak", "link": "https://stackoverflow.com/users/5841310/hubert-jakubiak"}, "edited": false, "score": 0, "creation_date": 1474439168, "post_id": 39607838, "comment_id": 66525678, "body": "@HubertJakubiak Yes becasue <code>is_enough_words_to_play_game?</code> gives the reader some context to work with, although your choice of method name could possibly be shortened."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "reply_to_user": {"reputation": 532, "user_id": 5841310, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/10206848519343961/picture?type=large", "display_name": "Hubert Jakubiak", "link": "https://stackoverflow.com/users/5841310/hubert-jakubiak"}, "edited": false, "score": 0, "creation_date": 1474440758, "post_id": 39607838, "comment_id": 66526492, "body": "@HubertJakubiak And the logic of the method may change over time, while the semantics remain the same."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474443065, "post_id": 39607838, "comment_id": 66527875, "body": "Last snippet is more maintainable too :)"}, {"owner": {"reputation": 532, "user_id": 5841310, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/10206848519343961/picture?type=large", "display_name": "Hubert Jakubiak", "link": "https://stackoverflow.com/users/5841310/hubert-jakubiak"}, "edited": false, "score": 0, "creation_date": 1474447736, "post_id": 39607838, "comment_id": 66530651, "body": "@spickermann Where I should keep constant <code>MIN_WORDS_FOR_GAME</code> in my application? Just before defining method?"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": true, "score": 5, "last_activity_date": 1474442689, "last_edit_date": 1474442689, "creation_date": 1474433760, "answer_id": 39607838, "question_id": 39607762, "link": "https://stackoverflow.com/questions/39607762/how-to-make-this-simple-method-even-shorter/39607838#39607838", "title": "How to make this simple method even shorter?", "body": "<p>You can just write:</p>\n\n<pre><code>def is_enough_words_to_play_game?\n  Word.verified.size &gt; 5\nend\n</code></pre>\n\n<p>Because <code>Word.verified.size &gt; 5</code> returns already a boolean.</p>\n\n<p>Or IMHO more readable:</p>\n\n<pre><code>MIN_WORDS_FOR_GAME = 6\n\ndef enough_words?\n  Word.verified.size &gt;= MIN_WORDS_FOR_GAME\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474452573, "post_id": 39611604, "comment_id": 66534026, "body": "The ternary is pointless in this context, because the condition already returns a boolean."}, {"owner": {"reputation": 170, "user_id": 6856761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2532418b05d963c173086b5aa5cb3dee?s=128&d=identicon&r=PG&f=1", "display_name": "sureshvignesh", "link": "https://stackoverflow.com/users/6856761/sureshvignesh"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1474888925, "post_id": 39611604, "comment_id": 66701032, "body": "Got it ! Thanks"}], "tags": [], "owner": {"reputation": 170, "user_id": 6856761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2532418b05d963c173086b5aa5cb3dee?s=128&d=identicon&r=PG&f=1", "display_name": "sureshvignesh", "link": "https://stackoverflow.com/users/6856761/sureshvignesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1474447461, "creation_date": 1474447461, "answer_id": 39611604, "question_id": 39607762, "link": "https://stackoverflow.com/questions/39607762/how-to-make-this-simple-method-even-shorter/39611604#39611604", "title": "How to make this simple method even shorter?", "body": "<p>I would write this as</p>\n\n<pre><code>def is_enough_words_to_play_game?\n  Word.verified.size &gt; 5 ? true:false\nend\n</code></pre>\n"}], "owner": {"reputation": 532, "user_id": 5841310, "user_type": "registered", "accept_rate": 47, "profile_image": "https://graph.facebook.com/10206848519343961/picture?type=large", "display_name": "Hubert Jakubiak", "link": "https://stackoverflow.com/users/5841310/hubert-jakubiak"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 39607838, "answer_count": 2, "score": -1, "last_activity_date": 1474447461, "creation_date": 1474433298, "question_id": 39607762, "link": "https://stackoverflow.com/questions/39607762/how-to-make-this-simple-method-even-shorter", "title": "How to make this simple method even shorter?", "body": "<p>I have very simple method in my application. I wonder if there is way to make it even shorter.</p>\n\n<pre><code>def is_enough_words_to_play_game?\n    if Word.verified.size &gt; 5\n        true\n    else\n        false\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongodb", "ruby-on-rails-3", "heroku"], "comments": [{"owner": {"reputation": 351, "user_id": 3527404, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7320be8fb67d0b0c790f739a8cb3c13f?s=128&d=identicon&r=PG&f=1", "display_name": "CfourPiO", "link": "https://stackoverflow.com/users/3527404/cfourpio"}, "edited": false, "score": 0, "creation_date": 1474433619, "post_id": 39607690, "comment_id": 66523583, "body": "Are you able to remove your Gemfile.lock and redo bundle install ?"}], "owner": {"reputation": 7, "user_id": 1379546, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/04b48ed6cd1e0e55867af3f6084bc013?s=128&d=identicon&r=PG", "display_name": "Sivakumar", "link": "https://stackoverflow.com/users/1379546/sivakumar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 78, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1474526226, "creation_date": 1474432830, "last_edit_date": 1474526226, "question_id": 39607690, "link": "https://stackoverflow.com/questions/39607690/upgrade-from-mongodb-2-6-to-mongodb-3-0-12-getting-authentication-error-in-rails", "title": "upgrade from mongodb 2.6 to mongodb 3.0.12 getting authentication error in rails + heroku", "body": "<p>upgraded mlab from 2.6 to 3.0.12. am getting following error in console while trying to connect to mongodb</p>\n\n<pre><code>Moped::Errors::AuthenticationFailure: The operation:\n#&lt;Moped::Protocol::Commands::Authenticate\n</code></pre>\n\n<p>please find my Gemfile.lock below</p>\n\n<pre><code>rails (3.1.1)\nruby 1.9.3p551\n\n  moped (~&gt; 1.2)\nmoped (1.5.3)\n\n  mongo (1.11.1)\n  mongoid (3.0.23)\nmongo\nmongoid\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1474432344, "post_id": 39607513, "comment_id": 66523213, "body": "Are you using a Ruby package manager like RVM?"}, {"owner": {"reputation": 53, "user_id": 6659029, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0b94d1af48e0a0a26b0421e64eb9c21a?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/6659029/jake"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1474432558, "post_id": 39607513, "comment_id": 66523278, "body": "Yes I am using rvm"}, {"owner": {"reputation": 793, "user_id": 1122265, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/e5e6392782fb2b1856409b89a62ae9f8?s=128&d=identicon&r=PG", "display_name": "Mathew P. Jones", "link": "https://stackoverflow.com/users/1122265/mathew-p-jones"}, "edited": false, "score": 0, "creation_date": 1474433441, "post_id": 39607513, "comment_id": 66523542, "body": "could you write down the command before you got that error?"}], "answers": [{"tags": [], "owner": {"reputation": 2562, "user_id": 4344085, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/ilSIn.jpg?s=128&g=1", "display_name": "Khanh Pham", "link": "https://stackoverflow.com/users/4344085/khanh-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1474433299, "last_edit_date": 1474433299, "creation_date": 1474432637, "answer_id": 39607649, "question_id": 39607513, "link": "https://stackoverflow.com/questions/39607513/cant-install-ruby-gems-gives-a-zlib-error/39607649#39607649", "title": "Can&#39;t install Ruby Gems - gives a zlib error", "body": "<p>I guess that you missed <code>zlib</code> package if you are using <code>rvm</code>.\n<a href=\"https://rvm.io/packages/zlib/\" rel=\"nofollow\">https://rvm.io/packages/zlib/</a></p>\n\n<p><strong>Update</strong>:</p>\n\n<p>I have two options, you can try one of them.</p>\n\n<p><em>Option1</em>:</p>\n\n<p>Copy and paste this command to your console:</p>\n\n<pre><code>rvm pkg install zlib\nrvm autolibs rvm_pkg\n</code></pre>\n\n<p><em>Option</em> 2:</p>\n\n<p>You need to install the <code>zlib</code> development headers.</p>\n\n<pre><code>xcode-select --install\n</code></pre>\n\n<p>Then <code>reinstall</code> your <code>gem</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 170, "user_id": 6856761, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2532418b05d963c173086b5aa5cb3dee?s=128&d=identicon&r=PG&f=1", "display_name": "sureshvignesh", "link": "https://stackoverflow.com/users/6856761/sureshvignesh"}, "is_accepted": false, "score": 1, "last_activity_date": 1474446002, "creation_date": 1474446002, "answer_id": 39611104, "question_id": 39607513, "link": "https://stackoverflow.com/questions/39607513/cant-install-ruby-gems-gives-a-zlib-error/39611104#39611104", "title": "Can&#39;t install Ruby Gems - gives a zlib error", "body": "<p>Install zlib in your machine</p>\n\n<pre><code>rvm get head\nrvm pkg remove\nrvm requirements run force\nrvm reinstall 1.9.3-p374\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 15, "user_id": 8150615, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2108483e022d317f2d09bc468cc53a9b?s=128&d=identicon&r=PG&f=1", "display_name": "Tai", "link": "https://stackoverflow.com/users/8150615/tai"}, "is_accepted": false, "score": 0, "last_activity_date": 1497291957, "creation_date": 1497291957, "answer_id": 44506316, "question_id": 39607513, "link": "https://stackoverflow.com/questions/39607513/cant-install-ruby-gems-gives-a-zlib-error/44506316#44506316", "title": "Can&#39;t install Ruby Gems - gives a zlib error", "body": "<p>If installing gems you used:</p>\n\n<p><em>sudo gem install nameOftheGem</em></p>\n\n<p>problem could be that you only use <em>sudo</em> if the stack was installed as root, so try the same as above without <em>sudo</em>.</p>\n"}], "owner": {"reputation": 53, "user_id": 6659029, "user_type": "registered", "accept_rate": 20, "profile_image": "https://www.gravatar.com/avatar/0b94d1af48e0a0a26b0421e64eb9c21a?s=128&d=identicon&r=PG&f=1", "display_name": "Jake", "link": "https://stackoverflow.com/users/6659029/jake"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3137, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1523214041, "creation_date": 1474431744, "question_id": 39607513, "link": "https://stackoverflow.com/questions/39607513/cant-install-ruby-gems-gives-a-zlib-error", "title": "Can&#39;t install Ruby Gems - gives a zlib error", "body": "<hr>\n\n<p>Whenever I try and install any ruby gem (trying to install rails), I get this error:</p>\n\n<pre><code>ERROR:  Loading command: update (LoadError)\n    cannot load such file -- zlib\nERROR:  While executing gem ... (NoMethodError)\n    undefined method `invoke_with_build_args' for nil:NilClass\n</code></pre>\n\n<p>I have tried everything I can think of; reinstalling ruby, trying different ruby versions, etc., but I keep getting this error.</p>\n\n<p>I am currently using Ruby Version 2.3.1, and I am on mac os x 10.11 El Capitan. I am trying to install the rails gem on my system so that I can use it in all my projects.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "edited": false, "score": 0, "creation_date": 1474432890, "post_id": 39607700, "comment_id": 66523362, "body": "I am trying to use a custom attribute not the accepts_nested_attributes_for thats included with rails"}, {"owner": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "edited": false, "score": 0, "creation_date": 1474432917, "post_id": 39607700, "comment_id": 66523373, "body": "The version of accepts_nested_attributes_for i posted works, im trying to replicate it into a custom version"}], "tags": [], "owner": {"reputation": 325, "user_id": 4643690, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-9_dmW_kS7R0/AAAAAAAAAAI/AAAAAAAAAAw/AeA0aY62T0w/photo.jpg?sz=128", "display_name": "bk chovatiya", "link": "https://stackoverflow.com/users/4643690/bk-chovatiya"}, "is_accepted": false, "score": 0, "last_activity_date": 1474432871, "creation_date": 1474432871, "answer_id": 39607700, "question_id": 39607400, "link": "https://stackoverflow.com/questions/39607400/custom-attributes-version-of-accepts-nested-attributes-for-with-reject-if/39607700#39607700", "title": "custom attributes version of accepts_nested_attributes_for with reject_if", "body": "<p>Do as this way</p>\n\n<pre><code>accepts_nested_attributes_for :categories, reject_if: :title_blank\n\ndef title_blank(attributed)\n  data = false\n  data = true if attributed.title.blank?\n  return data\nend\n</code></pre>\n"}], "owner": {"reputation": 390, "user_id": 4835675, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4ae280a74eadafa995d2ed1f2225cfd7?s=128&d=identicon&r=PG&f=1", "display_name": "Jabba the Hutt", "link": "https://stackoverflow.com/users/4835675/jabba-the-hutt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 290, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1474432871, "creation_date": 1474430876, "question_id": 39607400, "link": "https://stackoverflow.com/questions/39607400/custom-attributes-version-of-accepts-nested-attributes-for-with-reject-if", "title": "custom attributes version of accepts_nested_attributes_for with reject_if", "body": "<p>I am trying to create a custom version of this below</p>\n\n<pre><code>  accepts_nested_attributes_for :categories, :reject_if =&gt; proc { |hash| hash['title'].blank? }\n</code></pre>\n\n<p>So far what i got is </p>\n\n<pre><code>  def categories_attributes=(categories_attributes)\n    categories_attributes.values.each do |category_attribute|\n      category = Category.find_or_create_by(category_attribute)\n      categories &lt;&lt; category\n    end\n  end\n</code></pre>\n\n<p>But i am trying to add the reject_if part to it, i cant seem to figure it out. how can i replicate that portion into my custom attribute below?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["arrays", "ruby", "debugging", "multidimensional-array", "deep-copy"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474431273, "post_id": 39607241, "comment_id": 66522965, "body": "You have a problem that has come up many times on SO. You need define the array as follows: <code>@dotty_board = Array.new(10) { Array.new(10) { &quot;.&quot; } }</code>. Then <code>@dotty_board[1][2] = &quot;C&quot;</code> changes only that one element."}, {"owner": {"reputation": 514, "user_id": 6856276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ecAKM.jpg?s=128&g=1", "display_name": "globewalldesk", "link": "https://stackoverflow.com/users/6856276/globewalldesk"}, "edited": false, "score": 0, "creation_date": 1474431426, "post_id": 39607241, "comment_id": 66523005, "body": "Yep, you guys are right. That fixed it."}], "owner": {"reputation": 514, "user_id": 6856276, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/ecAKM.jpg?s=128&g=1", "display_name": "globewalldesk", "link": "https://stackoverflow.com/users/6856276/globewalldesk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 91, "favorite_count": 0, "closed_date": 1474436893, "answer_count": 0, "score": 1, "last_activity_date": 1475006178, "creation_date": 1474429881, "last_edit_date": 1495541703, "question_id": 39607241, "link": "https://stackoverflow.com/questions/39607241/ruby-changing-a-coordinate-in-a-two-dimensional-array-without-changing-all-valu", "closed_reason": "Duplicate", "title": "Ruby: Changing a coordinate in a two-dimensional array without changing all values of a column", "body": "<p>I'm befuddled. In <a href=\"https://github.com/globewalldesk/battleship_v3/blob/master/lib/fleet.rb#L100\" rel=\"nofollow noreferrer\">my Ruby code</a>, I've got a two-dimensional array of dots, which is assigned to an instance variable in a Battleship game:</p>\n\n<pre><code>@dotty_board = \n[[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"]]\n</code></pre>\n\n<p>Now if that's all it was, I could easily type</p>\n\n<pre><code>@dotty_board[5][5] = 'C'\nprint @dotty_board\n</code></pre>\n\n<p>and I'd see something like this, right?</p>\n\n<pre><code>[[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\", \".\"]]\n</code></pre>\n\n<p>In fact, I typed exactly that in a small Ruby test file. Of course it works that way.</p>\n\n<p>But in the context of my game code, I have a <code>@dotty_board</code> variable with precisely the above contents and I've confirmed its class is Array. (If it matters, I create it by a method call on an instance object. But it's not an instance object; it's an array.) I can type precisely the above two lines, and then, instead, I see this:</p>\n\n<pre><code>[[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"], \n[\".\", \".\", \".\", \".\", \".\", \"C\", \".\", \".\", \".\", \".\"]]\n</code></pre>\n\n<p>The sixth element of every row is now a 'C', not just of the sixth row. In other words, after I change the value of 5,5 to 'C', the value of 0,5 through 9,5 also changes to 'C'. I tried a lot of testing and research, and I can't figure it out. I just know I'm going to slap my forehead very audibly when someone reveals the secret. What the holy $#!+ could be going on? Any ideas?</p>\n\n<hr>\n\n<p>I've confirmed that the problem has something to do with my <code>@dotty_board</code> variable. I exactly copied my test code within the document itself, code that has the weird effect with <code>@dotty_board</code>. I then <code>@dotty_board</code> to <code>@ditty_board</code> and assigned this new variable to the two-dimensional array of dots you see above. Well, <code>ditty_board[5][5] = 'C'</code> works exactly as expected in that context, it changes only that one coordinate.</p>\n\n<p>But what on earth could there be about <code>@dotty_board</code> (an Array class object) that could make it have this different behavior?</p>\n\n<hr>\n\n<p>The answer is given below. It seems that the way my array was initialized was not right for an array whose values might need to be updated.</p>\n\n<hr>\n\n<p>A friend of mine heard my summary of the problem and solution, and nodded sagely, saying, \"Ah. <a href=\"https://stackoverflow.com/questions/184710/what-is-the-difference-between-a-deep-copy-and-a-shallow-copy\">Deep vs. shallow copy</a>.\"</p>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "coffeescript"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474434117, "post_id": 39606896, "comment_id": 66523722, "body": "You need to listen to the event <code>&#39;page:change&#39;</code>."}, {"owner": {"reputation": 402, "user_id": 3809903, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e1c36e71e453b8ecea77f2e8127942b?s=128&d=identicon&r=PG&f=1", "display_name": "kai", "link": "https://stackoverflow.com/users/3809903/kai"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474434238, "post_id": 39606896, "comment_id": 66523768, "body": "@Aetherus <code>page:change</code>  if adding this line js called double alerting. need delete line turbolinks:load ?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474436591, "post_id": 39606896, "comment_id": 66524607, "body": "Yes, you should delete it."}], "owner": {"reputation": 402, "user_id": 3809903, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9e1c36e71e453b8ecea77f2e8127942b?s=128&d=identicon&r=PG&f=1", "display_name": "kai", "link": "https://stackoverflow.com/users/3809903/kai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 240, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1474427296, "creation_date": 1474427296, "question_id": 39606896, "link": "https://stackoverflow.com/questions/39606896/rails-redirect-to-another-controller-doesnt-run-turbolinks", "title": "rails redirect_to another controller, doesn&#39;t run turbolinks", "body": "<p>Now my project run on rails5, turbolinks, etc</p>\n\n<p>My work flow is below.</p>\n\n<p>A_CONTROLLER_VIEW ->  CUSTOM_ACTION -> A_CONTROLLER(customize Data) --rediecting--> B_CONTROLLER_VIEW</p>\n\n<p>But B's coffeescript doesn't running.</p>\n\n<p>This is my code</p>\n\n<p>A_CONTROLLER.rb</p>\n\n<pre><code>class AController &lt; ApplicationController\n  def move\n\n    @a = A.find(params[:id])\n    b = b.new(some_info: @a.custom_info)\n    if b.save\n      @a.update_attributes(is_complete: true)\n      redirect_to edit_a_path(a), turbolinks: true\n    else\n      render :back\n    end \n end \n</code></pre>\n\n<p>B_CONTROLLER.rb</p>\n\n<pre><code>class BController &lt; ApplicationController\n  def edit\n    @b = B.find(params[:id])\n end \nend\n</code></pre>\n\n<p>assets/javascripts/b.js.coffee</p>\n\n<pre><code>ready = -&gt;\n  alert \"come\"\n$(document).on('turbolinks:load', ready) \n</code></pre>\n\n<p>If Refreshing page(after move to B_CONTROLLER page), script working.</p>\n\n<p>what is ircorrect my code?</p>\n"}, {"tags": ["ruby-on-rails", "sql-server", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 3995861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldoHK.png?s=128&g=1", "display_name": "dodoliu", "link": "https://stackoverflow.com/users/3995861/dodoliu"}, "edited": false, "score": 0, "creation_date": 1487753949, "post_id": 41447870, "comment_id": 71921883, "body": "Thanks for you answer. I have to give up the problem."}, {"owner": {"reputation": 11, "user_id": 3995861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldoHK.png?s=128&g=1", "display_name": "dodoliu", "link": "https://stackoverflow.com/users/3995861/dodoliu"}, "edited": false, "score": 0, "creation_date": 1487766476, "post_id": 41447870, "comment_id": 71930348, "body": "Because I cant&#39;t find the reason!"}], "tags": [], "owner": {"reputation": 462, "user_id": 2846739, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/iazmd.jpg?s=128&g=1", "display_name": "sensadrome", "link": "https://stackoverflow.com/users/2846739/sensadrome"}, "is_accepted": false, "score": 0, "last_activity_date": 1483460596, "creation_date": 1483460596, "answer_id": 41447870, "question_id": 39606666, "link": "https://stackoverflow.com/questions/39606666/no-connection-pool-for-useractionevent-when-connecting-to-sqlserver/41447870#41447870", "title": "&quot;No connection pool for UserActionEvent&quot; when connecting to SqlServer", "body": "<p>Not sure what the use case is here, but nonetheless I think the issue you are having is related to the use of the <code>establish_connection</code> method (from <code>ActiveRecord::Base</code> which you should be passing an argument to (instead of assigning it)</p>\n\n<pre><code>  establish_connection = db_config['Analytics']\n</code></pre>\n\n<p>should become:</p>\n\n<pre><code>  establish_connection db_config['Analytics']\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 3995861, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ldoHK.png?s=128&g=1", "display_name": "dodoliu", "link": "https://stackoverflow.com/users/3995861/dodoliu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1483460596, "creation_date": 1474425506, "last_edit_date": 1474426716, "question_id": 39606666, "link": "https://stackoverflow.com/questions/39606666/no-connection-pool-for-useractionevent-when-connecting-to-sqlserver", "title": "&quot;No connection pool for UserActionEvent&quot; when connecting to SqlServer", "body": "<p>I have a simple ruby script.<br>\nI need connection SqlServer and Mysql. I use gem 'mysql2' connection is successfully,but i use gem 'tiny_tds' and 'activerecord-sqlserver-adapter' is failed.\nmy error:</p>\n\n<pre><code>C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/activerecord-4.2.7.1/lib/active_record/connection_adapters/abstract/connection_pool.rb:570:in `retrieve_connection': No connection pool for UserActionEvent (ActiveRecord::ConnectionNotEstablished)\n    from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/activerecord-4.2.7.1/lib/active_record/connection_handling.rb:113:in `retrieve_connection'\n    from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/activerecord-4.2.7.1/lib/active_record/connection_handling.rb:87:in `connection'\n    from C:/Ruby22-x64/lib/ruby/gems/2.2.0/gems/activerecord-4.2.7.1/lib/active_record/querying.rb:39:in `find_by_sql'\n    from D:/work/rails_obj/export_data/business/tear_bb.rb:49:in `main'\n    from export_data.rb:22:in `main'\n    from export_data.rb:28:in `&lt;main&gt;'\n</code></pre>\n\n<p>my gemfile:</p>\n\n<pre><code>gem 'mysql2', '0.4.4'\ngem 'tiny_tds'\ngem 'activerecord-sqlserver-adapter'\ngem 'require_all', '1.3.3'\ngem 'activerecord', '~&gt;4.2.1'\n</code></pre>\n\n<p>my gemfile.lock:</p>\n\n<pre><code>GEM\n  remote: https://gems.ruby-china.org/\n  specs:\n    activemodel (4.2.7.1)\n      activesupport (= 4.2.7.1)\n      builder (~&gt; 3.1)\n    activerecord (4.2.7.1)\n      activemodel (= 4.2.7.1)\n      activesupport (= 4.2.7.1)\n      arel (~&gt; 6.0)\n    activerecord-sqlserver-adapter (4.2.15)\n      activerecord (~&gt; 4.2.1)\n    activesupport (4.2.7.1)\n      i18n (~&gt; 0.7)\n      json (~&gt; 1.7, &gt;= 1.7.7)\n      minitest (~&gt; 5.1)\n      thread_safe (~&gt; 0.3, &gt;= 0.3.4)\n      tzinfo (~&gt; 1.1)\n    arel (6.0.3)\n    builder (3.2.2)\n    i18n (0.7.0)\n    json (1.8.3)\n    mini_portile2 (2.1.0)\n    minitest (5.9.0)\n    mysql2 (0.4.4-x64-mingw32)\n    require_all (1.3.3)\n    thread_safe (0.3.5)\n    tiny_tds (1.0.4-x64-mingw32)\n      mini_portile2 (~&gt; 2.0)\n    tzinfo (1.2.2)\n      thread_safe (~&gt; 0.1)\n\nPLATFORMS\n  x64-mingw32\n\nDEPENDENCIES\n  activerecord (~&gt; 4.2.1)\n  activerecord-sqlserver-adapter\n  mysql2 (= 0.4.4)\n  require_all (= 1.3.3)\n  tiny_tds\n\nBUNDLED WITH\n   1.12.5\n</code></pre>\n\n<p>my code:</p>\n\n<pre><code>class AnalyticsBase &lt; ActiveRecord::Base\n  db_config = YAML::load File.open 'configs/sqlserver.yml'\n  establish_connection = db_config['Analytics']\n  self.abstract_class = true\nend\n\nclass UserActionEvent &lt; AnalyticsBase\n  self.table_name = 'UserActionEvent'\nend\n\nclass TearBb\n  def self.main\n    sql3 = \"select top 5 * from UserActionEvent\"\n    UserActionEvent.find_by_sql sql3\n  end\nend\n\nTearBb.main\n</code></pre>\n\n<p>configs/sqlserver.yml:</p>\n\n<pre><code>comm_config: &amp;comm\n  adapter: sqlserver\n  encoding: utf8\nAnalytics:\n  &lt;&lt;: *comm\n  host: myhost\n  port: myport\n  database: mydatabase\n  username: myusername\n  password: mypasword\n  timeout: 60000\n</code></pre>\n\n<p>my system: windows 7</p>\n\n<p>How do I deal with this problem?\nthanks!</p>\n"}, {"tags": ["php", "arrays", "ruby"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1474426597, "post_id": 39606635, "comment_id": 66521850, "body": "<code>input = { &#39;a&#39; =&gt; &#39;A&#39;, &#39;b&#39; =&gt; &#39;B&#39;, &#39;cdef&#39; =&gt; { &#39;c&#39; =&gt; &#39;C&#39;, ... } }</code>."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474437469, "post_id": 39606834, "comment_id": 66524949, "body": "I wonder how will assignment of nested element on level 10 look like with this approach. Please check my answer."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474462121, "post_id": 39606834, "comment_id": 66540425, "body": "it&#39;ll be ugly, i definitely like your solution better."}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 1, "last_activity_date": 1474426830, "creation_date": 1474426830, "answer_id": 39606834, "question_id": 39606635, "link": "https://stackoverflow.com/questions/39606635/does-ruby-have-similiar-multidimensional-array-like-in-php/39606834#39606834", "title": "Does ruby have similiar multidimensional array like in php?", "body": "<p>To fix your error, you need to initialize an empty hash before assigning a key-value pair. </p>\n\n<pre><code>input = Hash.new\ninput['a'] = 'A'               #=&gt; {\"a\"=&gt;\"A\"}\ninput['b'] = 'B'               #=&gt; {\"a\"=&gt;\"A\", \"b\"=&gt;\"B\"}\ninput['cdef'] = {}             #=&gt; {\"a\"=&gt;\"A\", \"b\"=&gt;\"B\", \"cdef\"=&gt;{}}\ninput['cdef']['c'] = 'C'       #=&gt; {\"a\"=&gt;\"A\", \"b\"=&gt;\"B\", \"cdef\"=&gt;{\"c\"=&gt;\"C\"}}\ninput['cdef']['d'] = 'D'       #=&gt; {\"a\"=&gt;\"A\", \"b\"=&gt;\"B\", \"cdef\"=&gt;{\"c\"=&gt;\"C\", \"d\"=&gt;\"D\"}}\ninput['cdef']['ef'] = {}       #=&gt; {\"a\"=&gt;\"A\", \"b\"=&gt;\"B\", \"cdef\"=&gt;{\"c\"=&gt;\"C\", \"d\"=&gt;\"D\", \"ef\"=&gt;{}}}\ninput['cdef']['ef']['e'] = 'E' #=&gt; {\"a\"=&gt;\"A\", \"b\"=&gt;\"B\", \"cdef\"=&gt;{\"c\"=&gt;\"C\", \"d\"=&gt;\"D\", \"ef\"=&gt;{\"e\"=&gt;\"E\"}}}\ninput['cdef']['ef']['f'] = 'F' #=&gt; {\"a\"=&gt;\"A\", \"b\"=&gt;\"B\", \"cdef\"=&gt;{\"c\"=&gt;\"C\", \"d\"=&gt;\"D\", \"ef\"=&gt;{\"e\"=&gt;\"E\", \"f\"=&gt;\"F\"}}}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474439775, "post_id": 39608535, "comment_id": 66525977, "body": "@SergioTulentsev thanks. It costs producing temporary redundant copy of the initial (and all nested having children) hash, though. But on human-operated hashes it should work fine."}, {"owner": {"reputation": 81, "user_id": 6803658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4056ad978b1a992840398a606efea87b?s=128&d=identicon&r=PG&f=1", "display_name": "Allen Jz", "link": "https://stackoverflow.com/users/6803658/allen-jz"}, "edited": false, "score": 0, "creation_date": 1474879106, "post_id": 39608535, "comment_id": 66694772, "body": "@mudasobwa thx!... but how do I use this trick after I copy a clone of another multidimentional hash into <code>input</code>,like I have <code>origin = {&#39;a&#39;=&gt;1,&#39;b&#39;=&gt;2,&#39;cd&#39;=&gt;{&#39;c&#39;=&gt;3,&#39;d&#39;=&gt;4}}</code>, and I copy origin into input,using <code>input = origin.clone</code>, then ur thick doesn&#39;t work,maybe <code>clone</code> operation has ruin the structure of input?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474879506, "post_id": 39608535, "comment_id": 66695022, "body": "In the first place, please stop calling hashes \u201cmultidimentional arrays,\u201d since they are not arrays by any means and php just implied a wrong usage of this term. Secondary, I did not understand the problem. As <code>origin</code> hash has <code>default_proc</code> declared, it\u2019s clone has is either. The last, but not least: you should\u2019ve asked another question on that, whether you have one."}, {"owner": {"reputation": 81, "user_id": 6803658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4056ad978b1a992840398a606efea87b?s=128&d=identicon&r=PG&f=1", "display_name": "Allen Jz", "link": "https://stackoverflow.com/users/6803658/allen-jz"}, "edited": false, "score": 0, "creation_date": 1474880256, "post_id": 39608535, "comment_id": 66695436, "body": "f, I called it &quot;multidimentional hash&quot;,since u haven&#39;t go through my question carefully with respect, I&#39;m ok with it , s, thx, I know where the point is, lbnl, my question has not been solved, why can&#39;t I ask more, MDZZ"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474880618, "post_id": 39608535, "comment_id": 66695659, "body": "Indeed, there was a \u201cmultidimentional hash,&quot; nevertheless, it\u2019s a plain old good \u201chash.\u201d Please also use English, since there is not a chatroom for 14-yo cheerleaders. Your problem has been solved, now you have another one about cloning hashes\u2014go ask it. SO is tended to implement a model 1 question per posting to make it easier for future readers to narrow their problem amongst the variety of already existing answers."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1474437388, "creation_date": 1474437388, "answer_id": 39608535, "question_id": 39606635, "link": "https://stackoverflow.com/questions/39606635/does-ruby-have-similiar-multidimensional-array-like-in-php/39608535#39608535", "title": "Does ruby have similiar multidimensional array like in php?", "body": "<p>Although the answer by @davidhu2000 is more or less correct, I would go with more robust solution: using <a href=\"https://ruby-doc.org/core-2.2.0/Hash.html#method-c-new\" rel=\"nofollow\"><code>default_proc</code></a> in the constructor. The <code>dup.clear</code> magic is to recursively pass the <code>default_proc</code> through to deeply nested elements:</p>\n\n<pre><code>input = Hash.new { |h, k| h[k] = h.dup.clear }\ninput['a'] = 'A' \ninput['b'] = 'B' \ninput['cdef']['c'] = 'C' \ninput['cdef']['d'] = 'D' \ninput['cdef']['ef']['e'] = 'E' \ninput['cdef']['ef']['f'] = 'F' \n\ninput\n</code></pre>\n\n<p>That way one does not need ugly redundant assignments:</p>\n\n<pre><code>input['cdef'] = {}\ninput['cdef']['ef'] = {} \n</code></pre>\n\n<p>Ninja assignment:</p>\n\n<pre><code>input = Hash.new { |h, k| h[k] = h.dup.clear }\ninput['a1']['a2']['a3']['a4']['a5'] = 42\ninput\n#\u21d2\u00a0{\"a1\" =&gt; {\"a2\" =&gt; {\"a3\" =&gt; {\"a4\" =&gt; {\"a5\" =&gt; 42}}}}}\n</code></pre>\n"}], "owner": {"reputation": 81, "user_id": 6803658, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/4056ad978b1a992840398a606efea87b?s=128&d=identicon&r=PG&f=1", "display_name": "Allen Jz", "link": "https://stackoverflow.com/users/6803658/allen-jz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 87, "favorite_count": 0, "accepted_answer_id": 39608535, "answer_count": 2, "score": 0, "last_activity_date": 1474438568, "creation_date": 1474425319, "last_edit_date": 1474438568, "question_id": 39606635, "link": "https://stackoverflow.com/questions/39606635/does-ruby-have-similiar-multidimensional-array-like-in-php", "title": "Does ruby have similiar multidimensional array like in php?", "body": "<p>like in php:</p>\n\n<pre><code>$input = [\n      'a' =&gt; 'A',\n      'b' =&gt; 'B',\n      'cdef' =&gt; [\n             'c' =&gt; 'C',\n             'd' =&gt; 'D',\n             'ef' =&gt; [\n                  'e' =&gt; 'E',\n                  'f' =&gt; 'F'\n             ]\n      ]\n]\n</code></pre>\n\n<p>maybe use Hash? never used ruby before :)</p>\n\n<p>When I worte code:</p>\n\n<pre><code>input = Hash.new\ninput['a'] = 'A'\ninput['b'] = 'B'\ninput['cdef']['c'] = 'C'\ninput['cdef']['d'] = 'D'\ninput['cdef']['ef']['e'] = 'E'\ninput['cdef']['ef']['f'] = 'F'\n</code></pre>\n\n<p>error at </p>\n\n<pre><code>  input['cdef']['c'] = 'C'\n</code></pre>\n\n<p>message :</p>\n\n<pre><code>[]=' for nil:NilClass\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "sorting", "csv"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474423901, "post_id": 39606431, "comment_id": 66521218, "body": "can you provide a small sample of the csv file? so we know what we are working with"}, {"owner": {"reputation": 1, "user_id": 5670478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a91a6f471f6208d303e6e48775691d11?s=128&d=identicon&r=PG&f=1", "display_name": "Damisa-Sarki", "link": "https://stackoverflow.com/users/5670478/damisa-sarki"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474424421, "post_id": 39606431, "comment_id": 66521335, "body": "gladly, but how? i don&#39;t want to copy pasta a bunch of random text."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474424439, "post_id": 39606431, "comment_id": 66521337, "body": "just a couple of riows will do."}, {"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474424574, "post_id": 39606431, "comment_id": 66521373, "body": "and also, where did you call the <code>sort</code>? I don&#39;t see it in your code."}, {"owner": {"reputation": 1, "user_id": 5670478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a91a6f471f6208d303e6e48775691d11?s=128&d=identicon&r=PG&f=1", "display_name": "Damisa-Sarki", "link": "https://stackoverflow.com/users/5670478/damisa-sarki"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474424810, "post_id": 39606431, "comment_id": 66521422, "body": "yeah, i removed it because I couldn&#39;t get it to work. I tried various places."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5670478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a91a6f471f6208d303e6e48775691d11?s=128&d=identicon&r=PG&f=1", "display_name": "Damisa-Sarki", "link": "https://stackoverflow.com/users/5670478/damisa-sarki"}, "edited": false, "score": 0, "creation_date": 1474480947, "post_id": 39606741, "comment_id": 66552524, "body": "Awesome - I think the hash idea made a low of sense in this case. This worked for me.  The only thing I changed was removing the <code>next if row[0] == &#39;id&#39;</code> line.   Instead I added <code>CSV.foreach(csvFile, headers: true)</code>  Thanks!"}], "tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": false, "score": 0, "last_activity_date": 1474426170, "creation_date": 1474426170, "answer_id": 39606741, "question_id": 39606431, "link": "https://stackoverflow.com/questions/39606431/parse-csv-convert-and-sort-as-array-in-ruby/39606741#39606741", "title": "Parse CSV, Convert, and Sort as Array in Ruby", "body": "<p>So, I modified the starting date of the first two rows so that they fall inside the time restriction. </p>\n\n<p>For reference, here is the csv file I used.</p>\n\n<pre><code>id,created_at,first_name,last_name,email,gender,company,currency,drug_brand,drug_name,drug_company,pill_color,frequency,start_date,end_date,other,words,bitcoin,word\n676,1351140260,Charles,Rice,crice49@i2i.jp,Male,Realbuzz,MDL,Nortriptyline Hydrochloride,Nortriptyline Hydrochloride,\"Physicians Total Care, inc.\",Maroon,monthly,1209564900,1331661153,Monthly,aliquet,1AeYC1Cc49p7J5hFqUcsgJFjXb5Pqa68AQ,\",./;'[]\\-=\"\n2002,1540878657,Margaret,Day,mdaydp@salon.com,Female,Devbug,IDR,RENOKIN HAIR REVITALIZING CONDITIONER,Dimethicone,\"Caregen Co., Ltd.\",Yellow,monthly,1158457018,1533561260,Weekly,cursus,164X1tNoUguVA8Xpg2vnp3cfYzhTRGxwoN,&lt;svg&gt;&lt;script&gt;0&lt;1&gt;alert('XSS')&lt;/script&gt;\n3324,1589084473,Anthony,Collins,acollinsil@java.com,Male,Avamm,EUR,FRUITOPIA,PYRITHIONE ZINC,CVS PHARMACY,Blue,weekly,1333192422,1520700521,Never,pharetra,15oqV5seTTsQZDJhagJoU2z5hB9m7QCRAj,\ufffd_\ufffd\ufffd_\u06d1\ufffd\u04d2\ufffd\u0291\ufffd\ufffd\n</code></pre>\n\n<p>A couple of problems with your code</p>\n\n<p>1) You declared <code>words = []</code> inside the <code>foreach</code> loop, so it resets each time. You don't want that. </p>\n\n<p>2) You are not keeping tracking of the starting date for each of the values you push into the <code>words</code> array. </p>\n\n<p>3) The first line of the csv file is headings, you are not taking that into account in your code. </p>\n\n<p>Here's what I did</p>\n\n<pre><code>require 'csv'\n\ncsvFile = 'test.csv'\nwords = {}\nCSV.foreach(csvFile) do |row|\n  next if row[0] == 'id'\n\n  int = row[13].to_i\n  if int &lt; 1283731200\n    words[row[13]] = row[16]\n  end\nend\nwords = words.sort.map(&amp;:last) #=&gt; [\"cursus\", \"aliquet\"]\n</code></pre>\n\n<p>I used a hash in this case. so you have a key-value pair of <code>starting_date =&gt; word</code>. </p>\n\n<p>The line <code>next if row[0] == 'id</code> checks if we are on the first row. If so, skip to the next iteration. </p>\n\n<p>Then, the last line, I sort the hash, which returns an array in the form of <code>[[starting_date1, word1], [starting_date2, word2]...]</code>, and I use <code>map</code> to select the last values, which are the words you want, so you end up with an array of words in ascending order by starting date. </p>\n"}], "owner": {"reputation": 1, "user_id": 5670478, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a91a6f471f6208d303e6e48775691d11?s=128&d=identicon&r=PG&f=1", "display_name": "Damisa-Sarki", "link": "https://stackoverflow.com/users/5670478/damisa-sarki"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 497, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474426170, "creation_date": 1474423726, "last_edit_date": 1592644375, "question_id": 39606431, "link": "https://stackoverflow.com/questions/39606431/parse-csv-convert-and-sort-as-array-in-ruby", "title": "Parse CSV, Convert, and Sort as Array in Ruby", "body": "<p>I am working through a coding challenge, and am stuck trying to sort my data.</p>\n<p>The challenge is to:</p>\n<ol>\n<li>Parse the data and find only rows where user started before 9/6/10.</li>\n<li>Order the &quot;start_dates&quot; in ascending order.</li>\n<li>Return/Print the resulting phrase from the &quot;words&quot; column.</li>\n</ol>\n<p>I am able to get the correct words, but not in the correct order.</p>\n<p>The start_dates need to be sorted in ascending order so the words will display in the right order.</p>\n<p>Here's my code:</p>\n<pre><code>require 'CSV'\n\ncsvFile = 'tse.csv'\n\nCSV.foreach(csvFile) do |row|\n  int = row[13].to_i\n  words = []\n  if int &lt; 1283731200\n    words.push(row[16])\n  end\n  puts words\nend\n</code></pre>\n<p><strong>Note:</strong> <code>1283731200</code> is the Unix timestamp for the date I need.</p>\n<p>How can I sort <code>row[13]</code>? Every combination of the sort method, but get back one of these errors:</p>\n<blockquote>\n<p>undefined method 'sort' for 0:Fixnum (NoMethodError)</p>\n<p>undefined method 'sort' for &quot;start_date&quot;:String (NoMethodError)</p>\n</blockquote>\n<p>CSV snippet:</p>\n<pre><code>id,created_at,first_name,last_name,email,gender,company,currency,drug_brand,drug_name,drug_company,pill_color,frequency,start_date,end_date,other,words,bitcoin,word\n676,1351140260,Charles,Rice,crice49@i2i.jp,Male,Realbuzz,MDL,Nortriptyline Hydrochloride,Nortriptyline Hydrochloride,&quot;Physicians Total Care, inc.&quot;,Maroon,monthly,1409564900,1331661153,Monthly,aliquet,1AeYC1Cc49p7J5hFqUcsgJFjXb5Pqa68AQ,&quot;,./;'[]\\-=&quot;\n2002,1540878657,Margaret,Day,mdaydp@salon.com,Female,Devbug,IDR,RENOKIN HAIR REVITALIZING CONDITIONER,Dimethicone,&quot;Caregen Co., Ltd.&quot;,Yellow,monthly,1458457018,1533561260,Weekly,cursus,164X1tNoUguVA8Xpg2vnp3cfYzhTRGxwoN,&lt;svg&gt;&lt;script&gt;0&lt;1&gt;alert('XSS')&lt;/script&gt;\n3324,1589084473,Anthony,Collins,acollinsil@java.com,Male,Avamm,EUR,FRUITOPIA,PYRITHIONE ZINC,CVS PHARMACY,Blue,weekly,1333192422,1520700521,Never,pharetra,15oqV5seTTsQZDJhagJoU2z5hB9m7QCRAj,\ufffd_\ufffd\ufffd_\u06d1\ufffd\u04d2\ufffd\u0291\ufffd\ufffd\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "answers": [{"comments": [{"owner": {"reputation": 57, "user_id": 5816827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/167cd3d867f5ba5cc6bad1f2b9bf0447?s=128&d=identicon&r=PG&f=1", "display_name": "marauder7", "link": "https://stackoverflow.com/users/5816827/marauder7"}, "edited": false, "score": 0, "creation_date": 1474460157, "post_id": 39606642, "comment_id": 66539038, "body": "Thanks, that was helpful. Do you have a suggestion about how to test the constructor though? I was thinking about testing that an object does not exist before calling new and then it does after and it has the correct instance variables. I&#39;m blanking as to how to test if the object has been created or not."}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "reply_to_user": {"reputation": 57, "user_id": 5816827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/167cd3d867f5ba5cc6bad1f2b9bf0447?s=128&d=identicon&r=PG&f=1", "display_name": "marauder7", "link": "https://stackoverflow.com/users/5816827/marauder7"}, "edited": false, "score": 0, "creation_date": 1474467674, "post_id": 39606642, "comment_id": 66544541, "body": "What I often do with classes like this is make available the instance variables through attribute readers (e.g., attr_reader :string_object, :gem_object at the top of ClassA).  If you do that then testing the assignment is pretty straightforward -- check the getter method value after instantiation."}, {"owner": {"reputation": 57, "user_id": 5816827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/167cd3d867f5ba5cc6bad1f2b9bf0447?s=128&d=identicon&r=PG&f=1", "display_name": "marauder7", "link": "https://stackoverflow.com/users/5816827/marauder7"}, "edited": false, "score": 0, "creation_date": 1474472017, "post_id": 39606642, "comment_id": 66547409, "body": "Thanks. I do have a question though. By creating the widgets method, aren&#39;t I required to find out exactly what gemObjectMethod1 returns and doesn&#39;t that go against the principle of abstraction?"}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "reply_to_user": {"reputation": 57, "user_id": 5816827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/167cd3d867f5ba5cc6bad1f2b9bf0447?s=128&d=identicon&r=PG&f=1", "display_name": "marauder7", "link": "https://stackoverflow.com/users/5816827/marauder7"}, "edited": false, "score": 0, "creation_date": 1474491215, "post_id": 39606642, "comment_id": 66558094, "body": "If you copy/past my idea above then you would be checking to see what gemObjectMethod1 returns, that&#39;s true.  I&#39;m not sure that you&#39;d be violating rules of abstraction any more than the pasted code already does -- unless gemObjectMethod2 happens to be a common method available on Enumerable or something similar.  The advantage of using a verifying double (instance_double above) is that it verifies the interface of the class against the method(s) you intend to call; that might be a big deal with a gem.  The alternative would be a generic double(&#39;widgets&#39;, gemObjectMethod2: true)"}, {"owner": {"reputation": 57, "user_id": 5816827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/167cd3d867f5ba5cc6bad1f2b9bf0447?s=128&d=identicon&r=PG&f=1", "display_name": "marauder7", "link": "https://stackoverflow.com/users/5816827/marauder7"}, "edited": false, "score": 0, "creation_date": 1474547788, "post_id": 39606642, "comment_id": 66582126, "body": "Makes sense. Thanks"}], "tags": [], "owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "is_accepted": true, "score": 1, "last_activity_date": 1474491320, "last_edit_date": 1474491320, "creation_date": 1474425380, "answer_id": 39606642, "question_id": 39606278, "link": "https://stackoverflow.com/questions/39606278/rspec-testing-of-a-class-which-uses-a-gem-object-as-an-instance-variable/39606642#39606642", "title": "RSpec testing of a class which uses a gem object as an instance variable", "body": "<p>In RSpec, 'receive' is a method that accepts a symbol that represents the name of a method.  (It allows you to chain a 'with' method that accepts the expected list of parameters.)  To fix the before-block you could do this:</p>\n\n<pre><code>before do\n  allow(subject.instance_variable_get(:@instance_variable1).gemObjectMethod1).to receive(:gemObjectMethod2).with(\"sample\").and_return([])\nend\n</code></pre>\n\n<p>The sheer ugliness of that, though, suggests that something is wrong.  And it is.  The code is violating the <a href=\"https://en.wikipedia.org/wiki/Law_of_Demeter\" rel=\"nofollow\">law of demeter</a> pretty badly and the test is being drawn into it.</p>\n\n<p>As a first attempt to clean it up, you might consider a method that \"caches\" the results of calling @instance_variable1.gemObjectMethod1.  Let's say that that first method returns an enumerable group of widgets.  You could change your class to include something like this:</p>\n\n<pre><code>def check_validity(a_string)\n  widgets.gemObjectMethod2(a_string).empty?\nend\n\nprivate\n\ndef widgets\n  @widgets ||= @instance_variable1.gemObjectMethod1\nend\n</code></pre>\n\n<p>Your class still knows a bit too much about the gem object, but now you have broken it down in such a way that you could refactor how you find widgets -- perhaps a different gem or your own implementation of it.  For the purposes of your testing, you can isolate that decision from the test by mocking widgets.</p>\n\n<pre><code>let(:gem_widgets) do\n  instance_double(GemObjectMethod1ResultClass, gemObjectMethod2: true)\nend\n\nbefore do\n  allow(subject).to receive(:widgets).and_return(gem_widgets)\n  allow(gem_widgets).to receive(:gemObjectMethod2).with(\"sample\").\n    and_return([])\nend\n\nit 'should pass with \"sample\"' do\n  expect(actual).to eql true\nend\n</code></pre>\n"}], "owner": {"reputation": 57, "user_id": 5816827, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/167cd3d867f5ba5cc6bad1f2b9bf0447?s=128&d=identicon&r=PG&f=1", "display_name": "marauder7", "link": "https://stackoverflow.com/users/5816827/marauder7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 157, "favorite_count": 0, "accepted_answer_id": 39606642, "answer_count": 1, "score": 1, "last_activity_date": 1474491320, "creation_date": 1474422488, "last_edit_date": 1474423448, "question_id": 39606278, "link": "https://stackoverflow.com/questions/39606278/rspec-testing-of-a-class-which-uses-a-gem-object-as-an-instance-variable", "title": "RSpec testing of a class which uses a gem object as an instance variable", "body": "<p>So I'm pretty new to Rspec and I'm trying to figure out how to write tests for a class that takes an object as a constructor parameter and sets that object to an instance variable. Then it calls that instance variable's object methods in other methods.</p>\n\n<p>Example:</p>\n\n<pre><code>class ClassA\n  def initialize(string_object, gem_object)\n    @instance_variable1 = gem_object\n    @string = string_object\n  end\n\n  def check_validity?(some_arg)\n    unless @instance_variable1.gemObjectMethod1.gemObjectMethod2(some_arg).empty?\n      return true\n    end\n    false\n  end\n  ..\n  ..\nend\n</code></pre>\n\n<p>I feel very lost in how to write specifications for this. For one I don't really understand what specifying a constructor actually entails. What I realize is that I'd have to find some way of mocking or stubbing the gem_object I'm getting as argument, but I'm not sure how. </p>\n\n<p>For the next method, what I've tried to this point is:</p>\n\n<pre><code>describe '#check_validity?' do\n  context 'gets empty list' do\n    let (:actual) { subject.check_validity?(\"sample\") }\n    before do\n      allow(subject).to receive(@instance_variable1.gemObjectMethod1.gemObjectMethod2).with(\"sample\").and_return([])\n    end\n    it 'returns false' do\n      expect(actual).to be false\n    end\n  end\nend\n</code></pre>\n\n<p>But this gives me error relating to my constructor saying that it expected 2 arguments but was given 0.</p>\n\n<p>Any help would be much appreciated! Also, I couldn't really find anything on line about specifying constructors with their arguments mocked. Maybe I'm looking in the wrong place or maybe missing something obvious as this is my first experience with BDD.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 991, "user_id": 3338439, "user_type": "registered", "profile_image": "https://graph.facebook.com/768618975/picture?type=large", "display_name": "Mingsheng", "link": "https://stackoverflow.com/users/3338439/mingsheng"}, "edited": false, "score": 1, "creation_date": 1474424995, "post_id": 39606234, "comment_id": 66521463, "body": "Can you be clearer about your final goal? Don&#39;t quite understand &quot;all groups where not all members has a particular request&quot;. Maybe provide an example if possible? It seems like you are looking for something along the lines of User.joins(...).search(...).where(&quot;...&quot;, @position), but I&#39;m just not sure what you are trying to achieve"}, {"owner": {"reputation": 991, "user_id": 3338439, "user_type": "registered", "profile_image": "https://graph.facebook.com/768618975/picture?type=large", "display_name": "Mingsheng", "link": "https://stackoverflow.com/users/3338439/mingsheng"}, "edited": false, "score": 0, "creation_date": 1474425363, "post_id": 39606234, "comment_id": 66521551, "body": "It seems like you are looking for something along the lines of User.joins(members: :requests).search(...).where(&quot;...&quot;, @position), but I&#39;m just not sure what you are trying to achieve. Note the nested join &quot;members: :requests)&quot;. Check in the console what query it generates."}, {"owner": {"reputation": 25, "user_id": 2472755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5374a79ebcde69122a277bd9e8fae9d5?s=128&d=identicon&r=PG", "display_name": "Niklas Granander", "link": "https://stackoverflow.com/users/2472755/niklas-granander"}, "reply_to_user": {"reputation": 991, "user_id": 3338439, "user_type": "registered", "profile_image": "https://graph.facebook.com/768618975/picture?type=large", "display_name": "Mingsheng", "link": "https://stackoverflow.com/users/3338439/mingsheng"}, "edited": false, "score": 0, "creation_date": 1474482070, "post_id": 39606234, "comment_id": 66553104, "body": "Thanks for replying @Mingsheng. Sorry if the question was unclear, I have updated it with a clarification."}], "owner": {"reputation": 25, "user_id": 2472755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5374a79ebcde69122a277bd9e8fae9d5?s=128&d=identicon&r=PG", "display_name": "Niklas Granander", "link": "https://stackoverflow.com/users/2472755/niklas-granander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474481991, "creation_date": 1474422066, "last_edit_date": 1474481991, "question_id": 39606234, "link": "https://stackoverflow.com/questions/39606234/querying-with-comparison-of-multiple-relationships-in-rails", "title": "Querying with comparison of multiple relationships in rails", "body": "<p>I have a structure like this:</p>\n\n<p>A <strong>Position</strong> has_many <strong>Requests</strong><br>\nA <strong>Request</strong> belongs_to a <strong>User</strong><br>\nA <strong>Group</strong> has_many <strong>:members</strong>, through: :memberships, source: :user</p>\n\n<p>I would like to get all groups where not all members has a particular request.  </p>\n\n<p><strong>UPDATE</strong>: I have a form were I can search for individual users and groups.<br>\nI can click a user and send him/her a request (and by that, create a request).<br>\nI can also click a group and send every user in that group a request in the same manner.  </p>\n\n<p>The position has multiple requests, and one request has one user.  </p>\n\n<p>As you can see, I can make sure that no user, having a request to a given position is shown in the search result.<br>\n<em>Bottom line: If every member in a group has a request to a given position, the group should not appear in the search result. If not all members of that group has a request, the group should be shown.</em></p>\n\n<p>Right now I manage to get individual users that doesn't belong to the request:</p>\n\n<pre><code>@users = User.search(query_str).where.not(id: @position.requests)\n</code></pre>\n\n<p>I'm trying to do something like</p>\n\n<pre><code>@groups = Group.search(query_str).where.not(\n            @position.request.include?(all users of a Group))\n</code></pre>\n\n<p>I made a method in <code>Position &lt; ActiveRecord::Base</code>:</p>\n\n<pre><code>def user_exists?(user)\n    # Check if user exists in position\n    self.requests.map(&amp;:user_id).include?(user.id)\nend\n\ndef all_users_exists?(users)\n    users.each do |user|\n      unless self.user_exists? user\n        return false\n      end\n    end\n  true\nend\n</code></pre>\n\n<p>The way I can come up with to filter out groups using this method is in the views when iterating over all groups, which feels like a terrible solution.</p>\n\n<pre><code>&lt;% @groups.each do |group| %&gt;\n    &lt;% unless @position.all_users_exists? group.members %&gt;\n         # Print list-item...\n</code></pre>\n\n<p>Could anyone please help me filtering out the groups with all members in a request when querying instead?</p>\n\n<p>Oh, and I'm using rails 4.2.5</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["arrays", "ruby", "random"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 2, "creation_date": 1474421213, "post_id": 39606116, "comment_id": 66520631, "body": "<code>&quot;#{array1.sample}#{array2.sample}#{array1.sample}&quot;</code>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474421463, "post_id": 39606116, "comment_id": 66520686, "body": "How can you, &quot;select a random element from one array and combine it with a randomly selected element from a second array&quot; to produce &quot;xby&quot;? Are you saying you want to randomly select an element from the first array, then randomly select an element from the second array and then randomly select a third element from the first array?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1474436554, "post_id": 39606116, "comment_id": 66524593, "body": "If you are sampling repeatedly you could construct an array of all (<code>3^3=27</code>) combinations and then sample from it: <code>arr = array1.product(array2, array1).map(&amp;:join) #=&gt; [&quot;xax&quot;, &quot;xay&quot;, &quot;xaz&quot;, &quot;xbx&quot;, &quot;xby&quot;, &quot;xbz&quot;, &quot;xcx&quot;, &quot;xcy&quot;, &quot;xcz&quot;, &quot;yax&quot;, &quot;yay&quot;, &quot;yaz&quot;, &quot;ybx&quot;, &quot;yby&quot;, &quot;ybz&quot;, &quot;ycx&quot;, &quot;ycy&quot;, &quot;ycz&quot;, &quot;zax&quot;, &quot;zay&quot;, &quot;zaz&quot;, &quot;zbx&quot;, &quot;zby&quot;, &quot;zbz&quot;, &quot;zcx&quot;, &quot;zcy&quot;, &quot;zcz&quot;]; arr.sample #=&gt; =&gt; &quot;zcx&quot;; arr.sample #=&gt; &quot;yay&quot; </code>."}], "answers": [{"tags": [], "owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "is_accepted": true, "score": 1, "last_activity_date": 1474422008, "creation_date": 1474422008, "answer_id": 39606227, "question_id": 39606116, "link": "https://stackoverflow.com/questions/39606116/combining-random-elements-of-multiple-arrays/39606227#39606227", "title": "Combining random elements of multiple arrays", "body": "<p>There are a few ways to do this. </p>\n\n<p><strong>1)</strong> You can use <code>sample</code> method.</p>\n\n<pre><code>array1.sample #=&gt; return a random element from the array.\n</code></pre>\n\n<p>Then you can use string interpolation like</p>\n\n<pre><code>result = \"#{array1.sample}#{array2.sample}#{array3.sample}\" #=&gt; ie \"xby\"\n</code></pre>\n\n<p><strong>2)</strong> You can generate random index values</p>\n\n<pre><code>array1[rand(array1.length)]\n</code></pre>\n\n<p>This will generate a random index from <code>0</code> to <code>length-1</code> and call the <code>[]</code> method on the array. You can then use string interpolation as well. </p>\n\n<p><strong>3)</strong> You can use the <code>shuffle</code> method then <code>first</code> method</p>\n\n<pre><code>array1.shuffle.first\n</code></pre>\n\n<p><code>shuffle</code> will, well, shuffle the array, and you can just return the first element.</p>\n\n<p>I'm just listing the few I can come up with off the top of my head. There are probably tons of other ways to do this. </p>\n"}, {"comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474422656, "post_id": 39606257, "comment_id": 66520937, "body": "this won&#39;t work all the time. OP wanted a specific order <code>(array1)(array2)(array1)</code>. You method will just return random 3 elements from the combined array, so you can result in <code>bzx</code>, which is the wrong order."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "reply_to_user": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474431303, "post_id": 39606257, "comment_id": 66522975, "body": "It wasn&#39;t clear that OP wanted specific order all the time, it came across as a &quot;fer instance...&quot;"}], "tags": [], "owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "is_accepted": false, "score": 1, "last_activity_date": 1474433780, "last_edit_date": 1474433780, "creation_date": 1474422290, "answer_id": 39606257, "question_id": 39606116, "link": "https://stackoverflow.com/questions/39606116/combining-random-elements-of-multiple-arrays/39606257#39606257", "title": "Combining random elements of multiple arrays", "body": "<p>How about</p>\n\n<pre><code>(array1 + array2).sample(3)   # =&gt; [\"b\", \"x\", \"a\"]\n</code></pre>\n\n<p>if you want your answer in array form, or</p>\n\n<pre><code>(array1 + array2).sample(3).join('')   # =&gt; \"zxb\"\n</code></pre>\n\n<p>if you want it in string form?</p>\n\n<p>If the order is supposed to explicitly be <code>[array1_elt, array2_elt, array1_elt]</code> and you don't want any element repeated, then the following should do the trick:</p>\n\n<pre><code>array1.sample(2).insert(1, array2.sample)\n</code></pre>\n\n<p>Again, append <code>.join('')</code> to stringify the result. </p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1474437340, "creation_date": 1474437340, "answer_id": 39608519, "question_id": 39606116, "link": "https://stackoverflow.com/questions/39606116/combining-random-elements-of-multiple-arrays/39608519#39608519", "title": "Combining random elements of multiple arrays", "body": "<p>I assume you wish to form an array <code>[a,b,c]</code>, where <code>a</code> and <code>c</code> are randomly selected from the first array and <code>b</code> is randomly selected from the second array, and then join the three elements of the array into a string.</p>\n\n<p>If you are sampling repeatedly it might be worthwhile to construct an array of all (<code>3^3=27</code>) combinations and then sample from that array:</p>\n\n<pre><code>arr = array1.product(array2, array1).map(&amp;:join)\n  #=&gt; [\"xax\", \"xay\", \"xaz\", \"xbx\", \"xby\", \"xbz\", \"xcx\", \"xcy\", \"xcz\",\n  #    \"yax\", \"yay\", \"yaz\", \"ybx\", \"yby\", \"ybz\", \"ycx\", \"ycy\", \"ycz\",\n  #    \"zax\", \"zay\", \"zaz\", \"zbx\", \"zby\", \"zbz\", \"zcx\", \"zcy\", \"zcz\"]\n\narr.sample #=&gt; \"zcx\"\narr.sample #=&gt; \"yay\"\narr.sample #=&gt; \"ycz\" \narr.sample #=&gt; \"xby\" \n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 6238310, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/900eb55f5ee908a41e921f44aec3de77?s=128&d=identicon&r=PG&f=1", "display_name": "777Newb", "link": "https://stackoverflow.com/users/6238310/777newb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 638, "favorite_count": 0, "accepted_answer_id": 39606227, "answer_count": 3, "score": 0, "last_activity_date": 1505557367, "creation_date": 1474420955, "last_edit_date": 1505557367, "question_id": 39606116, "link": "https://stackoverflow.com/questions/39606116/combining-random-elements-of-multiple-arrays", "title": "Combining random elements of multiple arrays", "body": "<p>In Ruby, how would I select a random element from one array and combine it with a randomly selected element from a second array?</p>\n\n<p>For example if I have the arrays: </p>\n\n<pre><code>    array1 = [\"x\", \"y\", \"z\"]\n    array2 = [\"a\", \"b\", \"c\"]\n</code></pre>\n\n<p>I'm looking for the output to be (array1_element)(array2_element)(array1_element) like xby or ycz or xbx so on and so forth. Can Ruby's .sample method be used on multiple arrays to print out a single string?  </p>\n"}, {"tags": ["ruby", "chef-infra", "chef-solo"], "answers": [{"comments": [{"owner": {"reputation": 3691, "user_id": 6130753, "user_type": "registered", "profile_image": "https://graph.facebook.com/10209143036838608/picture?type=large", "display_name": "Darryl RN", "link": "https://stackoverflow.com/users/6130753/darryl-rn"}, "edited": false, "score": 0, "creation_date": 1613706007, "post_id": 39606313, "comment_id": 117164650, "body": "I&#39;ve run <code>berks vendor [cookbook_path]</code>, but still the error occur. I wonder why does chef-solo couldn&#39;t find the cookbooks eventhough we already define the path in solo.rb??"}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1474422788, "creation_date": 1474422788, "answer_id": 39606313, "question_id": 39606018, "link": "https://stackoverflow.com/questions/39606018/trouble-with-chef-solo-missing-cookbooks/39606313#39606313", "title": "Trouble with chef-solo &quot;Missing Cookbooks&quot;", "body": "<p>Chef doesn't directly integrate with Berkshelf, so <code>chef-solo</code> knows nothing about that. Normally you would use something like <code>knife-solo</code> which ties them together, but you could also do it manually. Run <code>berks vendor /path/to/a/folder</code> and then set that folder as the <code>cookbook_path</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 216, "user_id": 962018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1dd8650189be7236708ec6d66ecf422?s=128&d=identicon&r=PG", "display_name": "Myles Merrell", "link": "https://stackoverflow.com/users/962018/myles-merrell"}, "is_accepted": false, "score": 0, "last_activity_date": 1476798252, "creation_date": 1476798252, "answer_id": 40109978, "question_id": 39606018, "link": "https://stackoverflow.com/questions/39606018/trouble-with-chef-solo-missing-cookbooks/40109978#40109978", "title": "Trouble with chef-solo &quot;Missing Cookbooks&quot;", "body": "<p>I ended up just going around the problem.</p>\n\n<p>I set up a chef-server on a virtual host, and do some final level testing on that.  I created nodes, bootstrapped them, then ran chef-client on the node.</p>\n\n<p>I also don't have a very large server configuration, so I just uploaded the cookbooks and dependent cookbooks by hands.  Which I'm pretty sure is why chef-zero was failing.  At some point in the future I will get Berkshelf working in conjunction with everything to help ease the cookbook dependency process.</p>\n"}], "owner": {"reputation": 216, "user_id": 962018, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/b1dd8650189be7236708ec6d66ecf422?s=128&d=identicon&r=PG", "display_name": "Myles Merrell", "link": "https://stackoverflow.com/users/962018/myles-merrell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 863, "favorite_count": 0, "accepted_answer_id": 39606313, "answer_count": 2, "score": 0, "last_activity_date": 1476798252, "creation_date": 1474420111, "question_id": 39606018, "link": "https://stackoverflow.com/questions/39606018/trouble-with-chef-solo-missing-cookbooks", "title": "Trouble with chef-solo &quot;Missing Cookbooks&quot;", "body": "<p>I am trying to run chef-solo, and I have the following configuration</p>\n\n<pre><code>/var/chef\n\n\u251c\u2500\u2500 cookbooks\n\u2502\u00a0\u00a0 \u251c\u2500\u2500 cc_db\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Berksfile\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 Berksfile.lock\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 chefignore\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 metadata.rb\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u251c\u2500\u2500 recipes\n\u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2502\u00a0\u00a0 \u2514\u2500\u2500 default.rb\n\u251c\u2500\u2500 node.json\n\u2514\u2500\u2500 solo.rb\n</code></pre>\n\n<p>node.json</p>\n\n<pre><code>{\n  \"run_list\": [ \"recipe[cc_db]\" ]\n}\n</code></pre>\n\n<p>solo.rb</p>\n\n<pre><code>file_cache_path \"/var/chef\"\n  cookbook_path \"/var/chef/cookbooks\"\n  json_attribs \"/var/chef/node.json\"\n</code></pre>\n\n<p>metadata.rb</p>\n\n<pre><code>depends 'database', '~&gt; 5.1.2'\ndepends 'mysql2_chef_gem', '~&gt; 1.0'\n</code></pre>\n\n<p>I've gotten this to work in a kitchen-test environment, but I'm trying it now on a different server using chef-solo.</p>\n\n<p>Whenever I run:\nchef-solo -c solo.rb</p>\n\n<p>I get:</p>\n\n<pre><code>resolving cookbooks for run list: [\"cc_db\"]\n\n================================================================================\nError Resolving Cookbooks for Run List:\n================================================================================\n\nMissing Cookbooks:\n------------------\nNo such cookbook: database\n\nExpanded Run List:\n------------------\n* cc_db\n\nPlatform:\n---------\nx86_64-linux\n\n\nRunning handlers:\n[2016-09-20T15:34:05-04:00] ERROR: Running exception handlers\nRunning handlers complete\n[2016-09-20T15:34:05-04:00] ERROR: Exception handlers complete\nChef Client failed. 0 resources updated in 02 seconds\n[2016-09-20T15:34:05-04:00] FATAL: Stacktrace dumped to /var/chef/chef-stacktrace.out\n[2016-09-20T15:34:05-04:00] FATAL: Please provide the contents of the stacktrace.out file if you file a bug report\n[2016-09-20T15:34:05-04:00] ERROR: 412 \"Precondition Failed\"\n[2016-09-20T15:34:05-04:00] FATAL: Chef::Exceptions::ChildConvergeError: Chef run process exited unsuccessfully (exit code 1)\n</code></pre>\n\n<p>I'm confused because the database cookbook seem to be installed with berks, but chef isn't picking it up.</p>\n\n<p>any help would be greatly appreciated.</p>\n\n<p>thanks.\nmyles.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 35, "user_id": 5833045, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/15b0db0aa1ba2592e363bf43925c0cb4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick bo", "link": "https://stackoverflow.com/users/5833045/nick-bo"}, "edited": false, "score": 0, "creation_date": 1474443376, "post_id": 39606044, "comment_id": 66528063, "body": "thanks, but i cant locate these files! it seems that this location doesn&#39;t exist"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 35, "user_id": 5833045, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/15b0db0aa1ba2592e363bf43925c0cb4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick bo", "link": "https://stackoverflow.com/users/5833045/nick-bo"}, "edited": false, "score": 0, "creation_date": 1474445627, "post_id": 39606044, "comment_id": 66529380, "body": "It&#39;s at <code>&#47;home&#47;themis&#47;.rvm&#47;gems&#47;ruby-2.3.0&#47;gems&#47;activesupport-4.0.3&#47;l&zwnj;&#8203;ib&#47;active_support&#47;va&zwnj;&#8203;lues&#47;time_zone.rb</code>"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1474421358, "last_edit_date": 1474421358, "creation_date": 1474420316, "answer_id": 39606044, "question_id": 39605947, "link": "https://stackoverflow.com/questions/39605947/rails-4-ruby-1-9-error-generating-mongoidconfig/39606044#39606044", "title": "Rails 4 &amp; Ruby 1.9 error generating mongoid:config", "body": "<p>This is an ActiveSupport bug (thus a Rails bug).</p>\n\n<p>Line 282 at <code>activesupport-4.0.3/lib/active_support/values/time_zone.rb</code> is</p>\n\n<pre><code>def parse(str, now=now)\n  # ...\nend\n</code></pre>\n\n<p>And line 308 of the same file is</p>\n\n<pre><code>def now\n  # ...\nend\n</code></pre>\n\n<p>The problem is at the default param <code>now=now</code>, which ruby struggles to understand whether the latter <code>now</code> is a method call or is just a local variable (the param itself).</p>\n\n<p>If you modify the <code>now=now</code> to <code>now=now()</code>, then all is fine.</p>\n\n<p>This bug is fixed in Rails 4.0.6.</p>\n"}], "owner": {"reputation": 35, "user_id": 5833045, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/15b0db0aa1ba2592e363bf43925c0cb4?s=128&d=identicon&r=PG&f=1", "display_name": "Nick bo", "link": "https://stackoverflow.com/users/5833045/nick-bo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1474458498, "creation_date": 1474419477, "last_edit_date": 1474458498, "question_id": 39605947, "link": "https://stackoverflow.com/questions/39605947/rails-4-ruby-1-9-error-generating-mongoidconfig", "title": "Rails 4 &amp; Ruby 1.9 error generating mongoid:config", "body": "<p>I'm trying to create a ruby on rails app which can be hosted on Openshift, but i encounter the following error when i try to use the <strong>rails g mongoid:config</strong> command through terminal. I've tried everything i found on stackoverflow but the error still persists! what am i doing wrong?</p>\n\n<p>here is the error:</p>\n\n<pre><code>/home/themis/.rvm/gems/ruby-2.3.0/gems/activesupport-4.0.3/lib/active_support/values/time_zone.rb:282: warning: circular argument reference - now\n/home/themis/rails4/config/application.rb:6:in `require': cannot load such file -- active_job/railtie (LoadError)\n    from /home/themis/rails4/config/application.rb:6:in `&lt;top (required)&gt;'\n    from /home/themis/.rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/application.rb:82:in `require'\n    from /home/themis/.rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/application.rb:82:in `preload'\n    from /home/themis/.rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/application.rb:143:in `serve'\n    from /home/themis/.rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/application.rb:131:in `block in run'\n    from /home/themis/.rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/application.rb:125:in `loop'\n    from /home/themis/.rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/application.rb:125:in `run'\n    from /home/themis/.rvm/gems/ruby-2.3.0/gems/spring-1.7.2/lib/spring/application/boot.rb:19:in `&lt;top (required)&gt;'\n    from /home/themis/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from /home/themis/.rvm/rubies/ruby-2.3.0/lib/ruby/site_ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from -e:1:in `&lt;main&gt;'\n</code></pre>\n\n<p>and my Gemfile</p>\n\n<pre><code>source 'https://rubygems.org'\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.0.3'\ngem 'mongoid', git: 'https://github.com/mongoid/mongoid.git'\ngem 'twitter-bootstrap-rails'  \ngem 'less-rails' \n# Use Puma as the app server\ngem 'puma', '~&gt; 3.0'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 4.0.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.2'\n# See https://github.com/rails/execjs#readme for more supported runtimes\ngem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\ngem 'turbolinks', '~&gt; 5'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.5'\ngem \"rspec\"\n# Use Redis adapter to run Action Cable in production\n# gem 'redis', '~&gt; 3.0'\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug', platform: :mri\nend\n\ngroup :development do\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n  gem 'web-console'\n  gem 'listen', '~&gt; 3.0.5'\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'spring-watcher-listen', '~&gt; 2.0.0'\nend\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 6687, "user_id": 6496010, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/4d564ef7fd53e4e76e5e520945dcc4c1?s=128&d=identicon&r=PG", "display_name": "davidhu", "link": "https://stackoverflow.com/users/6496010/davidhu"}, "edited": false, "score": 0, "creation_date": 1474417001, "post_id": 39605540, "comment_id": 66519563, "body": "This is an interesting question. Ruby is build on top of C, so I&#39;m guessing the while loop was inherited. The loop do structure is specific to Ruby, and kernel often hosted these methods"}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1474417049, "post_id": 39605540, "comment_id": 66519578, "body": "<a href=\"http://ruby-doc.org/core-2.3.1/doc/syntax/control_expressions_rdoc.html#label-while+Loop\" rel=\"nofollow noreferrer\"><code>while</code></a> is a control expression.  It&#39;s also a ruby <a href=\"https://ruby-doc.org/core-2.3.1/doc/keywords_rdoc.html\" rel=\"nofollow noreferrer\"><code>keyword</code></a>."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474417117, "post_id": 39605540, "comment_id": 66519599, "body": "<code>while</code> is a keyword. Other keywords involving control flow are <code>if</code>, <code>else</code>, <code>elsif</code>, <code>then</code>, <code>unless</code>, <code>until</code>, <code>for</code>, <code>case</code>, <code>when</code>, <code>next</code>, <code>break</code> and <code>return</code>."}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1474417153, "post_id": 39605540, "comment_id": 66519604, "body": "&quot;Ruby Programming&quot; says in its section about <b>Loops</b> (p.344 of my copy) says &quot;<i>loop</i>, which iterates its associated block, is not a language construct--it is a method in module <i>Kernel</i>.&quot;  By inference, <code>while</code>, <code>until</code>, and <code>for</code>, which were discussed before that, <i>are</i> language constructs."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 2, "creation_date": 1474418080, "post_id": 39605540, "comment_id": 66519789, "body": "Apparently, keywords are defined in the parser: <a href=\"http://stackoverflow.com/questions/9446150/where-are-keywords-defined-in-ruby\" title=\"where are keywords defined in ruby\">stackoverflow.com/questions/9446150/&hellip;</a>"}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1474439337, "post_id": 39605540, "comment_id": 66525751, "body": "and this is what it is compiled to in cruby <a href=\"https://github.com/ruby/ruby/blob/c3ceb1bff26a0dc59d7b93647e3a58c57e7c0440/compile.c#L4109-L4112\" rel=\"nofollow noreferrer\">github.com/ruby/ruby/blob/&hellip;</a>"}, {"owner": {"reputation": 962, "user_id": 135051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099c6c3a8010e978993611900370e943?s=128&d=identicon&r=PG", "display_name": "phss", "link": "https://stackoverflow.com/users/135051/phss"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1484490170, "post_id": 39605540, "comment_id": 70522572, "body": "@orde would you like to add an answer below?"}, {"owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "reply_to_user": {"reputation": 962, "user_id": 135051, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/099c6c3a8010e978993611900370e943?s=128&d=identicon&r=PG", "display_name": "phss", "link": "https://stackoverflow.com/users/135051/phss"}, "edited": false, "score": 0, "creation_date": 1492375881, "post_id": 39605540, "comment_id": 73940847, "body": "@phss If that&#39;s the answer, this should be marked as a duplicate :P"}], "owner": {"reputation": 39, "user_id": 6511304, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4599ea534bef8dd41aadf051d4f4dfea?s=128&d=identicon&r=PG&f=1", "display_name": "Pedro Cezar", "link": "https://stackoverflow.com/users/6511304/pedro-cezar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1474417016, "creation_date": 1474416277, "last_edit_date": 1474417016, "question_id": 39605540, "link": "https://stackoverflow.com/questions/39605540/where-is-the-while-loop-defined-in-ruby-standard-modules-classes", "title": "Where is the &#39;while&#39; loop defined in Ruby standard modules/classes?", "body": "<p>For example, <code>puts</code> is defined as a method of Kernel. Therefore, one can use Kernel.puts(\"anything\"). The same applies to <code>loop</code>:</p>\n\n<pre><code>Kernel.loop do\n   puts \"forever\"\nend\n</code></pre>\n\n<p>That said, where is <code>while</code> defined? Is <code>while</code> a method? If not, what is it exactly? </p>\n\n<p>Yes, it's a dumb question, but I am a beginner in programming.</p>\n"}, {"tags": ["java", "python", "ruby"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1474415041, "post_id": 39604672, "comment_id": 66519063, "body": "Asking us to help port code is off-topic. You need to do that work, then, when/as you run into problems, ask about that specific issue."}], "answers": [{"comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1474415160, "post_id": 39604992, "comment_id": 66519095, "body": "I&#39;d say <code>module_guid = &quot;\\xE1\\x9A\\x69\\x01...&quot;.force_encoding(&#39;ASCII-8BIT&#39;)</code>. On the other hand, <code>pack(&#39;c*&#39;)</code> already does the right thing."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1474415378, "post_id": 39604992, "comment_id": 66519158, "body": "@Amadan Maybe this is a silly question but what can happen if I don&#39;t force encoding?"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1474415598, "post_id": 39604992, "comment_id": 66519223, "body": "For example, <code>&quot;\\xE6\\x97\\xA5&quot;.length</code> is <code>1</code>, because it&#39;s one character in UTF-8 (default encoding)."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1474415776, "post_id": 39604992, "comment_id": 66519268, "body": "As I said before, <code>pack(&#39;c*&#39;)</code> already gives you <code>ASCII-8BIT</code>-encoded string, so forcing is not necessary there."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1474416229, "post_id": 39604992, "comment_id": 66519387, "body": "Interesting. <code>&quot;\\xE6\\x97\\xA5&quot;.length</code> is <code>1</code>, but <code>[0xe6, 0x97, 0xa5].pack(&#39;c*&#39;).length</code> is <code>3</code>. Ruby really is an intelligent language."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 2, "last_activity_date": 1474415825, "last_edit_date": 1474415825, "creation_date": 1474412340, "answer_id": 39604992, "question_id": 39604672, "link": "https://stackoverflow.com/questions/39604672/java-byte-array-to-ruby/39604992#39604992", "title": "Java byte array to Ruby", "body": "<ol>\n<li><p>There's no such thing as <code>byte</code> in Ruby. When you want to store a sequence of bytes, you store it in a string:</p>\n\n<pre><code>module_guid = \"\\xE1\\x9A\\x69\\x01...\".force_encoding('ASCII-8BIT')\n</code></pre>\n\n<p>If you want to copy and paste from Java code, then use:</p>\n\n<pre><code>module_guid = [0xe1, 0x9a, ...].pack('c*')\n</code></pre>\n\n<p>By the way, I didn't declare the variable as <code>ModuleGuid</code> because capitalized identifiers are for constants in Ruby, and I didn't see the <code>final</code> keyword in your Java code.</p></li>\n<li><p>Arrays in Ruby are just arrays. They can store any kind of objects. There's no <code>int[]</code> or <code>String[]</code> or <code>Whatever[]</code> in Ruby. Ruby arrays don't have fixed sizes and can be expanded or shrink any time. Your second piece of Java code can be rewritten as:</p>\n\n<pre><code>sensor_info = []\n</code></pre>\n\n<p>But, depending on your use-case, this statement itself may not be necessary because in Ruby you have sooooo many ways to obtain an array.</p></li>\n</ol>\n"}], "owner": {"reputation": 1, "user_id": 4077708, "user_type": "registered", "profile_image": "https://graph.facebook.com/639290090/picture?type=large", "display_name": "Tanay Lakhani", "link": "https://stackoverflow.com/users/4077708/tanay-lakhani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 400, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1474415825, "creation_date": 1474410374, "question_id": 39604672, "link": "https://stackoverflow.com/questions/39604672/java-byte-array-to-ruby", "title": "Java byte array to Ruby", "body": "<p>I have a Desktop application using java swing frames. I have to rewrite the application to either Ruby or python. However I understand java to certain extent - I need help rewriting certain piece of the code in java.</p>\n\n<p>1.</p>\n\n<pre><code>byte[] ModuleGuid = new byte[]{\n        (byte)0xe1, (byte)0x9a, (byte)0x69, (byte)0x01,\n        (byte)0xb8, (byte)0xc2, (byte)0x49, (byte)0x80,\n        (byte)0x87, (byte)0x7e, (byte)0x11, (byte)0xd4,\n        (byte)0xd8, (byte)0xf1, (byte)0xbe, (byte)0x79\n};\n</code></pre>\n\n<p>2.</p>\n\n<pre><code>JAVA_PvAPI_SensorInfoEx[] lptSensorInfo =\n        new JAVA_PvAPI_SensorInfoEx[(int)PsConstant.JAVA_PvAPI_GET_SENSOR_INFO_MAX];\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 1, "creation_date": 1474420521, "post_id": 39604459, "comment_id": 66520489, "body": "Can you be more specific about what &quot;doesn&#39;t work&quot;?"}, {"owner": {"reputation": 11, "user_id": 6855597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6828f9569dc97fb443fa78660992fab8?s=128&d=identicon&r=PG&f=1", "display_name": "Raghuvaran Chowda", "link": "https://stackoverflow.com/users/6855597/raghuvaran-chowda"}, "reply_to_user": {"reputation": 4987, "user_id": 3100515, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/dZSlO.jpg?s=128&g=1", "display_name": "Ajean", "link": "https://stackoverflow.com/users/3100515/ajean"}, "edited": false, "score": 0, "creation_date": 1474499723, "post_id": 39604459, "comment_id": 66561287, "body": "The intention of the code is to allow user to download the file without giving out any public URL as I want to track the downloads. Here this code doesn&#39;t work for downloading the file"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6855597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6828f9569dc97fb443fa78660992fab8?s=128&d=identicon&r=PG&f=1", "display_name": "Raghuvaran Chowda", "link": "https://stackoverflow.com/users/6855597/raghuvaran-chowda"}, "edited": false, "score": 0, "creation_date": 1474499621, "post_id": 39605310, "comment_id": 66561264, "body": "Thank you Hasmukh. But I don&#39;t want to give user a URL to file as I want to record &#39;who has downloaded what&#39; in the calling method."}], "tags": [], "owner": {"reputation": 1048, "user_id": 6166821, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-LpwuPY2Vfjw/AAAAAAAAAAI/AAAAAAAADS0/aT3BFBVyQEQ/photo.jpg?sz=128", "display_name": "Hasmukh Rathod", "link": "https://stackoverflow.com/users/6166821/hasmukh-rathod"}, "is_accepted": false, "score": 0, "last_activity_date": 1474414508, "creation_date": 1474414508, "answer_id": 39605310, "question_id": 39604459, "link": "https://stackoverflow.com/questions/39604459/i-want-to-download-file-by-passing-its-location-path-to-a-function-ruby-on-rail/39605310#39605310", "title": "I want to download file by passing its location_path to a function (Ruby on Rails)", "body": "<p>Try this in your <code>index.html.erb</code>:</p>\n\n<pre><code>&lt;p&gt;\n  &lt;% @filelist.each do |d|%&gt;\n  &lt;%= link_to \"#{d}\", '/lib/del.docx' %&gt;\n&lt;/p&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6855597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6828f9569dc97fb443fa78660992fab8?s=128&d=identicon&r=PG&f=1", "display_name": "Raghuvaran Chowda", "link": "https://stackoverflow.com/users/6855597/raghuvaran-chowda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474414508, "creation_date": 1474409147, "question_id": 39604459, "link": "https://stackoverflow.com/questions/39604459/i-want-to-download-file-by-passing-its-location-path-to-a-function-ruby-on-rail", "title": "I want to download file by passing its location_path to a function (Ruby on Rails)", "body": "<p>My View index.html.erb looks like this:</p>\n\n<pre><code>&lt;p&gt;&lt;% @filelist.each do |d|%&gt;\n    &lt;p&gt;&lt;%= link_to d, download_file(loc:\"/lib/\",file:\"del.docx\")%&gt;&lt;/p&gt;\n&lt;% end%&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>My Controller class</p>\n\n<pre><code>def index\n    @filelist = Dir.entries(\".\").select {|f| !File.directory? f}\nend\n\ndef download(loc,file)\n    send_file path:loc, filename:file\nend\n</code></pre>\n\n<p>But doesn't work. Can any one suggest any right way of doing this?</p>\n\n<p>I want to pass the file location to the method and the method should return file at the location and user should be able to download it.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "edited": false, "score": 0, "creation_date": 1474408954, "post_id": 39604347, "comment_id": 66517355, "body": "<code>2.3.1 :015 &gt; &#39;Module&#39;.constantize NoMethodError: undefined method &#39;constantize&#39; for &quot;Module&quot;:String</code>"}, {"owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "reply_to_user": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "edited": false, "score": 2, "creation_date": 1474409075, "post_id": 39604347, "comment_id": 66517396, "body": "you need rails console, not irb."}], "tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": true, "score": 3, "last_activity_date": 1474411049, "last_edit_date": 1474411049, "creation_date": 1474408614, "answer_id": 39604347, "question_id": 39604292, "link": "https://stackoverflow.com/questions/39604292/make-rails-recognise-my-class-inside-a-string/39604347#39604347", "title": "Make Rails recognise my class inside a string", "body": "<p>You can use <code>classify</code> and <code>constantize</code></p>\n\n<pre><code>my_class.classify.constantize.find_by # something\n</code></pre>\n\n<blockquote>\n  <p>classify</p>\n  \n  <p>Create a class name from a plural table\n  name like Rails does for table names to models. Note that this returns\n  a string and not a Class (To convert to an actual class follow\n  classify with constantize).</p>\n  \n  <p>constantize</p>\n  \n  <p>Tries to find a constant with the name specified in the argument\n  string.</p>\n</blockquote>\n\n<pre><code>'Module'.constantize     # =&gt; Module \n'Test::Unit'.constantize # =&gt; Test::Unit\n</code></pre>\n\n<p>If you are sure about your input, you need only <code>constantize</code></p>\n\n<pre><code>my_class.constantize.find_by # something\n</code></pre>\n"}], "owner": {"reputation": 1806, "user_id": 1290607, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/YHMrJ.png?s=128&g=1", "display_name": "Bula", "link": "https://stackoverflow.com/users/1290607/bula"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 62, "favorite_count": 0, "accepted_answer_id": 39604347, "answer_count": 1, "score": 2, "last_activity_date": 1474411049, "creation_date": 1474408363, "question_id": 39604292, "link": "https://stackoverflow.com/questions/39604292/make-rails-recognise-my-class-inside-a-string", "title": "Make Rails recognise my class inside a string", "body": "<p>I have a variable that stores the name of a class</p>\n\n<pre><code>my_class = \"Homework\"\n</code></pre>\n\n<p>This class has certain attributes which I would like to access </p>\n\n<pre><code>Homework.find_by\n</code></pre>\n\n<p>How can I make ruby see this string as an object?</p>\n\n<p>e.g.</p>\n\n<pre><code>my_class.find_by\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1474409617, "creation_date": 1474409617, "answer_id": 39604555, "question_id": 39603965, "link": "https://stackoverflow.com/questions/39603965/rails-validate-has-many-association-against-other-objects-in-collection/39604555#39604555", "title": "Rails validate has_many association against other objects in collection", "body": "<p>What is the importance of the order of phone numbers?\nIf you just want to omit fields that are empty strings try <a href=\"https://github.com/rubiety/nilify_blanks\" rel=\"nofollow\">https://github.com/rubiety/nilify_blanks</a></p>\n\n<p>I'm not sure why your validating the phone numbers in the User model in the first place.  Why not validate them in the model they belong to?</p>\n"}], "owner": {"reputation": 1082, "user_id": 5381605, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-5ZF_yJyjvcQ/AAAAAAAAAAI/AAAAAAAAAFM/lQbQAZxe2wo/photo.jpg?sz=128", "display_name": "binarymason", "link": "https://stackoverflow.com/users/5381605/binarymason"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 125, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1474409617, "creation_date": 1474406713, "last_edit_date": 1474407843, "question_id": 39603965, "link": "https://stackoverflow.com/questions/39603965/rails-validate-has-many-association-against-other-objects-in-collection", "title": "Rails validate has_many association against other objects in collection", "body": "<p>Say I have a <code>PhoneNumber</code> polymorphic model.  Many different models can <code>have_many</code> phone_numbers.  The forms on the frontend may differ slightly from model to model, but say I have a User form that allows phone numbers like this:</p>\n\n<p>User:</p>\n\n<p><code>first phone: ___________</code></p>\n\n<p><code>second phone: __________</code></p>\n\n<p><code>third phone: ___________</code></p>\n\n<p><hr>\nThe User model <code>has_many</code> phone_numbers and <code>accepts_nested_attributes</code> for them as well.  Say I have a requirement that phones must be filled out in order.</p>\n\n<p>I assume that means submitting all fields as empty strings and allowing server to do validations.  But how will it know if one <code>PhoneNumber</code> is alone or not?</p>\n\n<hr>\n\n<p>For example,  if I submit this form:</p>\n\n<p>User:</p>\n\n<pre><code>first phone: ___________\n\nsecond phone: 123-456-7890\n\nthird phone: 123-456-7890\n</code></pre>\n\n<p>There should be an error that looks something like this:</p>\n\n<p><code>second phone: 123-456-7890 \"error: cannot add phone number when 1st number is blank\"</code></p>\n\n<hr>\n\n<p>Or if I had a more complex form is submitted:</p>\n\n<p>User:</p>\n\n<pre><code>first phone: ___________\n\nsecond phone: 123-456-7890 \"error: cannot add phone number when 1st number is blank\"\n\nthird phone: 123-456-7890\n\nfourth phone: ___________\n\nfifth phone: 123-456-7890 \"error: cannot add phone number when 4th number is blank\"\n\nsixth phone: 123-456-7890\n</code></pre>\n\n<hr>\n\n<p>What is most elegent way of handling this?  Sending empty strings to the server and parsing them out seems dirty to me.  Here is code I have so far:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :phone_numbers, as: :callable\n  validate :phones_cant_be_incorrect_order\n\n  private\n\n  def phones_cant_be_incorrect_order\n    return unless phone_numbers.size &gt; 1\n    intentional_phone_numbers.each.with_index do |_phone, i|\n      previous_number = i.ordinalize\n      errors.add(\n        :\"phone_numbers.number\",\n        \"can't add phone number when #{previous_number} number is blank\"\n      ) unless previous_number_present?(phone_numbers, i)\n    end\n  end\n\n  # Parse out empty strings\n  # Example: If only first_phone was filled out, delete all other empty strings.\n  def intentional_phone_numbers\n    last_number_present = phone_numbers.reverse.find { |x| x.number.present? }\n    right_index = phone_numbers.index(last_number_present)\n\n    bad = phone_numbers[(right_index + 1)..-1]\n    self.phone_numbers = phone_numbers - bad\n  end\n\n  def previous_number_present?(array, index)\n    return true if index.zero?\n    array[index - 1].number.present?\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>That's a LOT of code just to make sure that nothing gets submitted out of order.  Surely there's a better way?</p>\n"}, {"tags": ["ruby", "soundcloud"], "answers": [{"comments": [{"owner": {"reputation": 275, "user_id": 1415821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4da5da3e82273affe2c421cd160f9a46?s=128&d=identicon&r=PG", "display_name": "AllTheCodez", "link": "https://stackoverflow.com/users/1415821/allthecodez"}, "edited": false, "score": 1, "creation_date": 1475251741, "post_id": 39618390, "comment_id": 66884290, "body": "good find. You are correct the endpoint works. Looks like it&#39;s an issue with the Ruby client."}], "tags": [], "owner": {"reputation": 3569, "user_id": 3582188, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/f6c31819cee0458456528df9c2e7a65e?s=128&d=identicon&r=PG", "display_name": "johnh10", "link": "https://stackoverflow.com/users/3582188/johnh10"}, "is_accepted": false, "score": 2, "last_activity_date": 1474465483, "creation_date": 1474465483, "answer_id": 39618390, "question_id": 39603731, "link": "https://stackoverflow.com/questions/39603731/soundcloud-resolve-endpoint-broken/39618390#39618390", "title": "Soundcloud /resolve endpoint broken?", "body": "<p>First thing is to check the endpoint directly. This works fine in the browser:</p>\n\n<p><a href=\"http://api.soundcloud.com/resolve.json?url=http://soundcloud.com/forss/voca-nomen-tuum&amp;client_id=YOUR_CLIENT_ID\" rel=\"nofollow\">http://api.soundcloud.com/resolve.json?url=http://soundcloud.com/forss/voca-nomen-tuum&amp;client_id=YOUR_CLIENT_ID</a></p>\n\n<p>The problem is somewhere in the code.</p>\n"}], "owner": {"reputation": 275, "user_id": 1415821, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4da5da3e82273affe2c421cd160f9a46?s=128&d=identicon&r=PG", "display_name": "AllTheCodez", "link": "https://stackoverflow.com/users/1415821/allthecodez"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 92, "favorite_count": 0, "closed_date": 1476221166, "answer_count": 1, "score": 0, "last_activity_date": 1474465483, "creation_date": 1474405640, "question_id": 39603731, "link": "https://stackoverflow.com/questions/39603731/soundcloud-resolve-endpoint-broken", "closed_reason": "Not suitable for this site", "title": "Soundcloud /resolve endpoint broken?", "body": "<p>Soundcloud Resolve endpoint returns \"SoundCloud::ResponseError: SoundCloud::ResponseError\", even with the test case given in the documentation. </p>\n\n<pre><code>require 'soundcloud'\n\n#create client with your app's credentials \nclient = Soundcloud.new(:client_id =&gt; 'YOUR_CLIENT_ID')\n\n# a permalink to a track \ntrack_url = 'http://soundcloud.com/forss/voca-nomen-tuum'\n\n# resolve track URL into track resource \ntrack = client.get('/resolve', :url =&gt; track_url)\n\n# result: \"SoundCloud::ResponseError: SoundCloud::ResponseError\"\n</code></pre>\n\n<p>Other endpoints work fine. Am I missing something, or is this down?</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1474405802, "post_id": 39603695, "comment_id": 66516101, "body": "The work-around is: Don&#39;t use <code>to_i</code>, or strip a leading <code>$</code>."}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 6855384, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243868502318445/picture?type=large", "display_name": "Colton Haugrud", "link": "https://stackoverflow.com/users/6855384/colton-haugrud"}, "edited": false, "score": 0, "creation_date": 1474405811, "post_id": 39603741, "comment_id": 66516104, "body": "Is there a way around this? Is there another string I can use? For the sake of my program, I would like the user to be able to input a &quot;$&quot; before their number."}, {"owner": {"reputation": 228875, "user_id": 84651, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b5ab789d3e28d1fad880f3fd1765b66?s=128&d=identicon&r=PG", "display_name": "Justin Niessner", "link": "https://stackoverflow.com/users/84651/justin-niessner"}, "reply_to_user": {"reputation": 11, "user_id": 6855384, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243868502318445/picture?type=large", "display_name": "Colton Haugrud", "link": "https://stackoverflow.com/users/6855384/colton-haugrud"}, "edited": false, "score": 0, "creation_date": 1474406091, "post_id": 39603741, "comment_id": 66516219, "body": "@ColtonHaugrud - Updated."}, {"owner": {"reputation": 11, "user_id": 6855384, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243868502318445/picture?type=large", "display_name": "Colton Haugrud", "link": "https://stackoverflow.com/users/6855384/colton-haugrud"}, "edited": false, "score": 0, "creation_date": 1474406995, "post_id": 39603741, "comment_id": 66516582, "body": "For this particular program, this works best and is easiest for me to understand. Thank you."}], "tags": [], "owner": {"reputation": 228875, "user_id": 84651, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/0b5ab789d3e28d1fad880f3fd1765b66?s=128&d=identicon&r=PG", "display_name": "Justin Niessner", "link": "https://stackoverflow.com/users/84651/justin-niessner"}, "is_accepted": false, "score": 0, "last_activity_date": 1474406061, "last_edit_date": 1474406061, "creation_date": 1474405689, "answer_id": 39603741, "question_id": 39603695, "link": "https://stackoverflow.com/questions/39603695/how-to-return-a-number-using-to-i-when-the-input-starts-with/39603741#39603741", "title": "How to return a number using to_i when the input starts with &quot;$&quot;", "body": "<p><code>String.to_i</code> only parses the leading numeric characters in a string and stops as soon as it hits a non-numeric character. In this case, <code>$</code> is non-numeric so you get <code>0</code>.</p>\n\n<p>This matches the behavior described in the documentation: <a href=\"http://ruby-doc.org/core-2.0.0/String.html#method-i-to_i\" rel=\"nofollow\">Class: String (Ruby 2.0.0)</a></p>\n\n<p>To properly parse the value, you'll need to strip the <code>$</code> from the start of the input using something like:</p>\n\n<pre><code>cost = gets.chomp.sub('$','').to_i\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 0, "last_activity_date": 1474417295, "last_edit_date": 1474417295, "creation_date": 1474416305, "answer_id": 39605545, "question_id": 39603695, "link": "https://stackoverflow.com/questions/39603695/how-to-return-a-number-using-to-i-when-the-input-starts-with/39605545#39605545", "title": "How to return a number using to_i when the input starts with &quot;$&quot;", "body": "<p>Meditate on these:</p>\n\n<pre><code>\"$1\\n\"[1..-1].to_i # =&gt; 1\n\"$1.99\\n\"[1..-1].to_i # =&gt; 1\n\"$100.99\\n\"[1..-1].to_i # =&gt; 100\n</code></pre>\n\n<p>This breaks down when there's a leading <code>-</code>:</p>\n\n<pre><code>\"-$100.99\\n\"[1..-1].to_i # =&gt; 0\n</code></pre>\n\n<p>That can be fixed using <code>sub</code> instead of a slice:</p>\n\n<pre><code>\"-$100.99\\n\".sub('$', '').to_i # =&gt; -100\n</code></pre>\n\n<p>The problem is, money is not all integers, so <code>to_i</code> is probably not really what you want. Instead you should be using <code>to_f</code>:</p>\n\n<pre><code>\"$1\\n\".sub('$', '').to_f # =&gt; 1.0\n\"$1.99\\n\".sub('$', '').to_f # =&gt; 1.99\n\"$100.99\\n\".sub('$', '').to_f # =&gt; 100.99\n\"-$100.99\\n\".sub('$', '').to_f # =&gt; -100.99\n\"$-100.99\\n\".sub('$', '').to_f # =&gt; -100.99\n</code></pre>\n\n<p>Note: It isn't necessary to use <code>chomp</code> to remove the trailing new-line. <code>to_i</code> and <code>to_f</code> will stop when they see a non-digit:</p>\n\n<pre><code>\"1\\n\".to_i # =&gt; 1\n\"1.99\\n\".to_f # =&gt; 1.99\n\n\"1 1\\n\".to_i # =&gt; 1\n\"1.99 2\\n\".to_f # =&gt; 1.99\n</code></pre>\n\n<p>Again, because of this behavior, <code>\"\\n\"</code> and <code>1\\n</code> or <code>2\\n</code> will be ignored.</p>\n"}], "owner": {"reputation": 11, "user_id": 6855384, "user_type": "registered", "profile_image": "https://graph.facebook.com/1243868502318445/picture?type=large", "display_name": "Colton Haugrud", "link": "https://stackoverflow.com/users/6855384/colton-haugrud"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 0, "accepted_answer_id": 39605545, "answer_count": 2, "score": 0, "last_activity_date": 1474417295, "creation_date": 1474405490, "last_edit_date": 1474415801, "question_id": 39603695, "link": "https://stackoverflow.com/questions/39603695/how-to-return-a-number-using-to-i-when-the-input-starts-with", "title": "How to return a number using to_i when the input starts with &quot;$&quot;", "body": "<p><code>to_i</code> returns 0 whenever the input starts by anything other than an integer. For example, if I input <code>$32</code> it returns 0, but if I enter <code>32</code>, it returns the number 32. I found another post that said <code>to_i</code> only accepts digits, but did not offer an alternative solution. </p>\n\n<p>Is there a way around this? I want the user to be able to input a \"$\" before their number. As it stands, my code looks like this:</p>\n\n<pre><code>puts\"What is the cost of a gallon of paint?\"\n\ncost=gets.chomp.to_i\n\ntotal_cost=cost*@gallons_needed\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "immutability"], "comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1474406048, "post_id": 39603653, "comment_id": 66516196, "body": "<i>Why</i> do you think you need this?"}, {"owner": {"reputation": 8973, "user_id": 3367144, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LZ7Af.png?s=128&g=1", "display_name": "kdbanman", "link": "https://stackoverflow.com/users/3367144/kdbanman"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1474406506, "post_id": 39603653, "comment_id": 66516392, "body": "@meagar good question!  I&#39;m integrating with an API that returns a set of required and optional parameters for a particular family of POSTs.  The set is large and dependent upon time and location, so they need to be handled dynamically.  For testing/proof of concept phase, I have a very thin, temporary UI over the returned parameter set to construct a POST, and I&#39;ve found a perfect little slot for such a key-freezable hash to reduce maintenance on that UI!"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1474406739, "post_id": 39603653, "comment_id": 66516480, "body": "Ok, then you really <i>don&#39;t</i> need this. What you need is a single line: <code>if to_lock.keys.include?(proposed_new_key)</code>. &quot;Locking&quot; the hash is a bad solution here. Just check whether the key exists, and refuse to insert it if it doesn&#39;t."}, {"owner": {"reputation": 8973, "user_id": 3367144, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LZ7Af.png?s=128&g=1", "display_name": "kdbanman", "link": "https://stackoverflow.com/users/3367144/kdbanman"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1474407266, "post_id": 39603653, "comment_id": 66516686, "body": "I don&#39;t have enough control over the code that consumes the hash to guarantee it&#39;s used that way.  Plus the exceptions would be a convenient-but-smelly way of handling illegal keys.  This is really just a temp solution :-)"}], "answers": [{"comments": [{"owner": {"reputation": 8973, "user_id": 3367144, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LZ7Af.png?s=128&g=1", "display_name": "kdbanman", "link": "https://stackoverflow.com/users/3367144/kdbanman"}, "edited": false, "score": 1, "creation_date": 1474406992, "post_id": 39603886, "comment_id": 66516581, "body": "Tight and interesting.  That run time override could even be monkey patched as a <code>#lock_keys</code> method on <code>Hash</code> to exactly fulfill my question&#39;s snippet.  Great point on <code>merge!</code> and friends too."}, {"owner": {"reputation": 7565, "user_id": 1021515, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/Z9QcP.jpg?s=128&g=1", "display_name": "mwp", "link": "https://stackoverflow.com/users/1021515/mwp"}, "edited": false, "score": 1, "creation_date": 1475094714, "post_id": 39603886, "comment_id": 66810169, "body": "<code>raise &#39;no&#39; unless key?(key)</code> might be more efficient, e.g. O(1) for hash lookup vs. O(n) for linear search. (<code>Array#include?</code> may build a hash behind the scenes before performing the search as a performance optimization, but it&#39;s still be faster to use an existing hash instead of building a new one.)"}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 3, "last_activity_date": 1474406359, "creation_date": 1474406359, "answer_id": 39603886, "question_id": 39603653, "link": "https://stackoverflow.com/questions/39603653/is-there-a-lightweight-way-to-lock-down-a-set-of-keys-on-a-hash/39603886#39603886", "title": "Is there a lightweight way to lock down a set of keys on a Hash?", "body": "<p>You can achieve this by defining a custom <code>[]=</code> for your \"to-lock\" instance of a hash, <em>after</em> you've added the allowed keys:</p>\n\n<pre><code>x = { name: nil, age: nil }\n\ndef x.[]=(key, value)\n  # blow up unless the key already exists in the hash\n  raise 'no' unless keys.include?(key)\n  super\nend\n\nx[:name] # nil\nx[:name] = \"Bob\" # \"Bob\"\n\nx[:size] # nil\nx[:size] = \"large\" # raise no\n</code></pre>\n\n<p>Note that this won't prevent you from inadvertently adding keys using something like <code>merge!</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1474945674, "last_edit_date": 1474945674, "creation_date": 1474927254, "answer_id": 39713092, "question_id": 39603653, "link": "https://stackoverflow.com/questions/39603653/is-there-a-lightweight-way-to-lock-down-a-set-of-keys-on-a-hash/39713092#39713092", "title": "Is there a lightweight way to lock down a set of keys on a Hash?", "body": "<p>@meagar has offered an interesting solution, but has pointed out that it only works when attempting to add a key-value pair using <code>Hash#[]</code>. Moreover, it does not prevent keys from being deleted.</p>\n\n<p>Here's another way, but it's rather kludgy, so I think you should probably be looking for a different way to <a href=\"http://idioms.thefreedictionary.com/There&#39;s+more+than+one+way+to+skin+a+cat\" rel=\"nofollow\">skin your cat</a>.</p>\n\n<pre><code>class Hash\n  def frozen_keys_create\n    self.merge(self) { |*_,v| [v] }.freeze\n  end\n\n  def frozen_keys_get_value(k)\n    self[k].first\n  end\n\n  def frozen_keys_put_value(k, new_value)\n    self[k].replace [new_value]\n    self\n  end\n\n  def frozen_keys_to_unfrozen\n    self.merge(self) { |*_,v| v.first }\n  end\nend\n</code></pre>\n\n<p>Now let's put them to use.</p>\n\n<p><em>Create a frozen hash with each value wrapped in an array</em></p>\n\n<pre><code>sounds = { :cat=&gt;\"meow\", :dog=&gt;\"woof\" }.frozen_keys_create\n  #=&gt; {:cat=&gt;[\"meow\"], :dog=&gt;[\"woof\"]}\nsounds.frozen?\n  #=&gt; true\n</code></pre>\n\n<p>This prevents keys from being added:</p>\n\n<pre><code>sounds[:pig] = \"oink\"\n  #=&gt; RuntimeError: can't modify frozen Hash\nsounds.update(:pig=&gt;\"oink\")\n  #=&gt; RuntimeError: can't modify frozen Hash\n</code></pre>\n\n<p>or deleted:</p>\n\n<pre><code>sounds.delete(:cat)\n  #=&gt; RuntimeError: can't modify frozen Hash\nsounds.reject! { |k,_| k==:cat }\n  #=&gt; RuntimeError: can't modify frozen Hash\n</code></pre>\n\n<p><em>Get a value</em></p>\n\n<pre><code>sounds.frozen_keys_get_value(:cat)\n  #=&gt; \"meow\"\n</code></pre>\n\n<p><em>Change a value</em></p>\n\n<pre><code>sounds.frozen_keys_put_value(:dog, \"oooooowwwww\")\n  #=&gt; {:cat=&gt;[\"meow\"], :dog=&gt;[\"oooooowwwww\"]}\n</code></pre>\n\n<p><em>Convert to a hash whose keys are not frozen</em></p>\n\n<pre><code>new_sounds = sounds.frozen_keys_to_unfrozen\n  #=&gt; {:cat=&gt;\"meow\", :dog=&gt;\"oooooowwwww\"} \nnew_sounds.frozen?\n  #=&gt; false \n</code></pre>\n\n<p><em>Add and delete keys</em></p>\n\n<p>Maybe even add (private, perhaps) methods to add or delete key(s) to override the desired behaviour.</p>\n\n<pre><code>class Hash\n  def frozen_keys_add_key_value(k, value)\n    frozen_keys_to_unfrozen.tap { |h| h[k] = value }.frozen_keys_create\n  end\n\n  def frozen_keys_delete_key(k)\n    frozen_keys_to_unfrozen.reject! { |key| key == k }.frozen_keys_create\n  end\nend\n\nsounds = { :cat=&gt;\"meow\", :dog=&gt;\"woof\" }.frozen_keys_create\n  #=&gt; {:cat=&gt;[\"meow\"], :dog=&gt;[\"oooowwww\"]}\nnew_sounds = sounds.frozen_keys_add_key_value(:pig, \"oink\")\n  #=&gt; {:cat=&gt;[\"meow\"], :dog=&gt;[\"woof\"], :pig=&gt;[\"oink\"]} \nnew_sounds.frozen?\n  #=&gt; true \nnewer_yet = new_sounds.frozen_keys_delete_key(:cat)\n  #=&gt; {:dog=&gt;[\"woof\"], :pig=&gt;[\"oink\"]} \nnewer_yet.frozen?\n  #=&gt; true \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2094, "user_id": 237129, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ff94ffd9e21dd379044ea0317634b97b?s=128&d=identicon&r=PG", "display_name": "jtzero", "link": "https://stackoverflow.com/users/237129/jtzero"}, "is_accepted": false, "score": 1, "last_activity_date": 1475094206, "creation_date": 1475094206, "answer_id": 39756990, "question_id": 39603653, "link": "https://stackoverflow.com/questions/39603653/is-there-a-lightweight-way-to-lock-down-a-set-of-keys-on-a-hash/39756990#39756990", "title": "Is there a lightweight way to lock down a set of keys on a Hash?", "body": "<p>Sounds like a great use-case for the built-in <a href=\"https://ruby-doc.org/core-2.2.0/Struct.html\" rel=\"nofollow\">Struct</a></p>\n\n<pre><code>irb(main):001:0&gt; s = Struct.new(:name, :age).new('Bill', 175)\n=&gt; #&lt;struct name=\"Bill\", age=175&gt;\nirb(main):002:0&gt; s.name = 'Bob'\n=&gt; \"Bob\"\nirb(main):003:0&gt; s.something_else\nNoMethodError: undefined method `something_else' for #&lt;struct name=\"Bob\", age=175&gt;\n    from (irb):3\n    from /home/jtzero/.rbenv/versions/2.3.0/bin/irb:11:in `&lt;main&gt;'\n</code></pre>\n"}], "owner": {"reputation": 8973, "user_id": 3367144, "user_type": "registered", "accept_rate": 91, "profile_image": "https://i.stack.imgur.com/LZ7Af.png?s=128&g=1", "display_name": "kdbanman", "link": "https://stackoverflow.com/users/3367144/kdbanman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 325, "favorite_count": 0, "accepted_answer_id": 39603886, "answer_count": 3, "score": 2, "last_activity_date": 1475094206, "creation_date": 1474405321, "last_edit_date": 1495535246, "question_id": 39603653, "link": "https://stackoverflow.com/questions/39603653/is-there-a-lightweight-way-to-lock-down-a-set-of-keys-on-a-hash", "title": "Is there a lightweight way to lock down a set of keys on a Hash?", "body": "<p><em>To be clear, I'm perfectly happy implementing this functionality as a custom class myself, but I want to make sure I'm not overlooking some bit of ruby or rails magic. I have googled every meaningful permutation of the keywords \"ruby rails hash keys values immutable lock freeze\".  But no luck so far!</em></p>\n\n<hr>\n\n<p><strong>Problem:</strong> I need to give a <code>Hash</code> a set of keys, possibly at run time, and then lock the set of keys without locking their values.  Something like the following:</p>\n\n<pre><code>to_lock = {}\nto_lock[:name] = \"Bill\"\nto_lock[:age] = 42\n\nto_lock.freeze_keys     # &lt;-- this is what I'm after, so that:\n\nto_lock[:name] = \"Bob\"  # &lt;-- this works fine,\nto_lock[:height]        # &lt;-- this returns nil, and\nto_lock[:height] = 175  # &lt;-- this throws some RuntimeError\n</code></pre>\n\n<p><strong>Question:</strong> Is there a bit of ruby or rails tooling to allow this?</p>\n\n<hr>\n\n<p>I know of <a href=\"https://ruby-doc.org/core-2.3.1/Object.html#method-i-freeze\" rel=\"nofollow noreferrer\"><code>Object#freeze</code></a> and of <a href=\"http://www.rubydoc.info/github/immutable-ruby/immutable-ruby/Immutable/Hash\" rel=\"nofollow noreferrer\"><code>Immutable::Hash</code></a>, but both lock keys <em>and</em> values.</p>\n\n<p>Sticking with out-of-the-box ruby, the use case could be mostly met by manipulating the methods or accessors of classes at runtime, as in <a href=\"https://stackoverflow.com/a/7527916/3367144\">this</a> or <a href=\"https://rosettacode.org/wiki/Add_a_variable_to_a_class_instance_at_runtime\" rel=\"nofollow noreferrer\">this</a>, then overriding <a href=\"https://ruby-doc.org/core-2.1.0/BasicObject.html#method-i-method_missing\" rel=\"nofollow noreferrer\"><code>#method_missing</code></a>.  But that feels quite a bit clunkier.  Those techniques also don't really \"lock\" the set of methods or accessors, it's just awkward to add more.  At that point it'd be better to simply write a class that exactly implements the snippet above and maintain it as needed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara", "browser-cache"], "comments": [{"owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 1, "creation_date": 1474409088, "post_id": 39603454, "comment_id": 66517403, "body": "page.driver.reset! is dependent on which driver you&#39;re using - Are you using the default rack-test driver, or selenium, or capybara-webkit, or poltergeist?"}, {"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "reply_to_user": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "edited": false, "score": 0, "creation_date": 1474423822, "post_id": 39603454, "comment_id": 66521205, "body": "I&#39;m using poltergeist."}], "answers": [{"comments": [{"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1474465716, "post_id": 39608089, "comment_id": 66542972, "body": "I&#39;m running Poltergeist 1.9 but when I ran that code Poltergeist responded with an undefined method error."}, {"owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "edited": false, "score": 0, "creation_date": 1474466330, "post_id": 39608089, "comment_id": 66543479, "body": "Sorry, didn&#39;t notice <code>1.10</code>. Updating and testing this now."}], "tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 1, "last_activity_date": 1474435104, "creation_date": 1474435104, "answer_id": 39608089, "question_id": 39603454, "link": "https://stackoverflow.com/questions/39603454/what-does-page-driver-reset-do/39608089#39608089", "title": "What does page.driver.reset! do?", "body": "<p>When using Poltergeist Driver#reset! doesn't clear the browser cache, but as long as you're running Poltergeist 1.10+ you can make sure it's cleared for your test by calling </p>\n\n<pre><code>page.driver.clear_memory_cache\n</code></pre>\n"}], "owner": {"reputation": 10344, "user_id": 1509401, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/HiLe4.jpg?s=128&g=1", "display_name": "thank_you", "link": "https://stackoverflow.com/users/1509401/thank-you"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 39608089, "answer_count": 1, "score": 0, "last_activity_date": 1474435104, "creation_date": 1474404442, "last_edit_date": 1474423843, "question_id": 39603454, "link": "https://stackoverflow.com/questions/39603454/what-does-page-driver-reset-do", "title": "What does page.driver.reset! do?", "body": "<p>I'm running a Capybara(poltergeist) test that is sensitive to cached files in the browser. I want to test to ensure that if a user is visiting the page without a cache, they can see a form.</p>\n\n<pre><code>context 'when user on page with empty cache' do\n  scenario 'sees form' do\n    page.driver.reset!\n    visit home_path\n    # test to see if form exists\n  end\nend\n</code></pre>\n\n<p>My question is this. Does <code>page.driver.reset!</code> reset the browser cache? </p>\n"}, {"tags": ["ruby", "get", "request", "http-headers", "net-http"], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1474410808, "creation_date": 1474410808, "answer_id": 39604751, "question_id": 39603326, "link": "https://stackoverflow.com/questions/39603326/how-do-i-figure-out-what-all-the-request-headers-in-my-request-object-are/39604751#39604751", "title": "How do I figure out what all the request headers in my request object are?", "body": "<p>try </p>\n\n<pre><code> req.each_key{|k| puts k}\n</code></pre>\n\n<p>or </p>\n\n<pre><code> req.each{|k,v| puts \"#{k} =&gt; #{v}\"}\n</code></pre>\n\n<p>to see methods on an object from inside console you can always do</p>\n\n<pre><code>req.methods - Ojbect.methods\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 39604751, "answer_count": 1, "score": 1, "last_activity_date": 1474417600, "creation_date": 1474403903, "last_edit_date": 1474417600, "question_id": 39603326, "link": "https://stackoverflow.com/questions/39603326/how-do-i-figure-out-what-all-the-request-headers-in-my-request-object-are", "title": "How do I figure out what all the request headers in my request object are?", "body": "<p>I\u2019m using Rails 4.2.7.  I have a request I set up like so:</p>\n\n<pre><code>2.3.0 :001 &gt; url = 'http://www.mydomeina.com/results/browse.cfm?ID=4187141102&amp;Gen=B&amp;Begin=1&amp;End=31&amp;Max=31'\n =&gt; \"http://www.mydomeina.com/results/browse.cfm?ID=4187141102&amp;Gen=B&amp;Begin=1&amp;End=31&amp;Max=31\" \n2.3.0 :002 &gt; uri = URI(url)\n =&gt; #&lt;URI::HTTP http://www.mydomeina.com/results/browse.cfm?ID=4187141102&amp;Gen=B&amp;Begin=1&amp;End=31&amp;Max=31&gt; \n2.3.0 :003 &gt; req = Net::HTTP::Get.new uri\n =&gt; #&lt;Net::HTTP::Get GET&gt; \n2.3.0 :004 &gt; req[\"Referer\"] = 'http://www.mydomeina.com/results/browse.cfm?ID=4187141102&amp;Gen=B&amp;Begin=1&amp;End=31&amp;Max=31'\n =&gt; \"http://www.mydomeina.com/results/browse.cfm?ID=4187141102&amp;Gen=B&amp;Begin=1&amp;End=31&amp;Max=31\" \n</code></pre>\n\n<p>I set <code>req[\"Referer\"]</code> as an example of setting a header.  There may be other headers in my request object.  How do I figure out what they all are?  This fails:</p>\n\n<pre><code>2.3.0 :009 &gt;   req.keys\nNoMethodError: undefined method `keys' for #&lt;Net::HTTP::Get GET&gt;\nDid you mean?  key?\n</code></pre>\n\n<p>as does <code>req.headers</code>.  How can I iterate over my request object to figure out what all the headers are?  It is not an option to construct the request object in a different way then what I am doing now.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "has-many-through", "nomethoderror"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1474403623, "post_id": 39603168, "comment_id": 66515085, "body": "do you really expect this <code>has_many :post_category_id, :through =&gt; :categorizations</code> to work?"}, {"owner": {"reputation": 6271, "user_id": 5327882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ff3d5b5c0725fe11ee9ddfa41a58f25?s=128&d=identicon&r=PG", "display_name": "ronatory", "link": "https://stackoverflow.com/users/5327882/ronatory"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1474403889, "post_id": 39603168, "comment_id": 66515204, "body": "@AndreyDeineko It was a try, to show that I tried another approach. Yes but in the end it will definitely not work"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1474404883, "post_id": 39603168, "comment_id": 66515693, "body": "could you add the params (from logs) from create action when you create post? (When having an initial setup)"}, {"owner": {"reputation": 6271, "user_id": 5327882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ff3d5b5c0725fe11ee9ddfa41a58f25?s=128&d=identicon&r=PG", "display_name": "ronatory", "link": "https://stackoverflow.com/users/5327882/ronatory"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1474405129, "post_id": 39603168, "comment_id": 66515797, "body": "yes, updated the question @AndreyDeineko"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1474405226, "post_id": 39603168, "comment_id": 66515845, "body": "i meant along with the error. I wanted to see, what was passed - may be there we can find the source of error. So bigger piece of logs needed :)"}, {"owner": {"reputation": 6271, "user_id": 5327882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ff3d5b5c0725fe11ee9ddfa41a58f25?s=128&d=identicon&r=PG", "display_name": "ronatory", "link": "https://stackoverflow.com/users/5327882/ronatory"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1474405784, "post_id": 39603168, "comment_id": 66516092, "body": "sry maybe I understand you wrong. This is what I get in the logs  <code>Processing by PostsController#create as JS   Parameters: {&quot;utf8&quot;=&gt;&quot;\u2713&quot;, &quot;authenticity_token&quot;=&gt;&quot;rKM0Owc+uNDMlB63nPMa&#47;nggszVffejp&#47;YGJx&zwnj;&#8203;kPldpTlJAzIhTGo3+LMu&zwnj;&#8203;zmFAM2Ca3CProJVTAvkp&zwnj;&#8203;bLgJRgNUw==&quot;, &quot;post&quot;=&gt;{&quot;post_categories&quot;=&gt;&quot;2&quot;, &quot;content&quot;=&gt;&quot;film film&quot;}}</code>"}], "answers": [{"comments": [{"owner": {"reputation": 6271, "user_id": 5327882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ff3d5b5c0725fe11ee9ddfa41a58f25?s=128&d=identicon&r=PG", "display_name": "ronatory", "link": "https://stackoverflow.com/users/5327882/ronatory"}, "edited": false, "score": 0, "creation_date": 1474441011, "post_id": 39604905, "comment_id": 66526651, "body": "Thanks, but now I get the error <code>no implicit conversion of Symbol into Integer</code>"}, {"owner": {"reputation": 1318, "user_id": 5586783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060731280703cb6c69bff0df57eb8898?s=128&d=identicon&r=PG", "display_name": "Andy Gauge", "link": "https://stackoverflow.com/users/5586783/andy-gauge"}, "reply_to_user": {"reputation": 6271, "user_id": 5327882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ff3d5b5c0725fe11ee9ddfa41a58f25?s=128&d=identicon&r=PG", "display_name": "ronatory", "link": "https://stackoverflow.com/users/5327882/ronatory"}, "edited": false, "score": 0, "creation_date": 1474471477, "post_id": 39604905, "comment_id": 66547037, "body": "try using &#39;post_categories[id]&#39;"}, {"owner": {"reputation": 6271, "user_id": 5327882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ff3d5b5c0725fe11ee9ddfa41a58f25?s=128&d=identicon&r=PG", "display_name": "ronatory", "link": "https://stackoverflow.com/users/5327882/ronatory"}, "edited": false, "score": 0, "creation_date": 1474472794, "post_id": 39604905, "comment_id": 66547903, "body": "stil not working, <code>undefined local variable or method id</code>"}], "tags": [], "owner": {"reputation": 1318, "user_id": 5586783, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/060731280703cb6c69bff0df57eb8898?s=128&d=identicon&r=PG", "display_name": "Andy Gauge", "link": "https://stackoverflow.com/users/5586783/andy-gauge"}, "is_accepted": false, "score": 0, "last_activity_date": 1474484176, "last_edit_date": 1495535652, "creation_date": 1474411789, "answer_id": 39604905, "question_id": 39603168, "link": "https://stackoverflow.com/questions/39603168/has-many-through-association-nomethoderror-undefined-method-each-for-str/39604905#39604905", "title": "has_many :through Association, NoMethodError (undefined method `each&#39; for &quot;&quot;:String) and save association", "body": "<p>I think you need to change this:</p>\n\n<pre><code>&lt;%= f.select :post_categories, options_from_collection_for_select(all_post_categories, :id, :name), {}, {class: 'selectpicker', :'data-live-search' =&gt; 'true', required: 'false' } %&gt;\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>  &lt;%= f.select :post_categories[:id],\n  options_from_collection_for_select(all_post_categories, :id, :name), \n  class: 'selectpicker', :'data-live-search' =&gt; 'true', required: 'false' , include_hidden: false} %&gt;\n</code></pre>\n\n<p>Shoot me if I'm wrong.</p>\n\n<p>Edited: include hidden:false for rails 4.2+ as per <a href=\"https://stackoverflow.com/questions/22131675/rails-multiple-select-form-no-implicit-conversion-of-string-into-integer\">SO 4585355</a></p>\n"}, {"tags": [], "owner": {"reputation": 6271, "user_id": 5327882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ff3d5b5c0725fe11ee9ddfa41a58f25?s=128&d=identicon&r=PG", "display_name": "ronatory", "link": "https://stackoverflow.com/users/5327882/ronatory"}, "is_accepted": true, "score": 1, "last_activity_date": 1474484977, "last_edit_date": 1495535652, "creation_date": 1474484977, "answer_id": 39624695, "question_id": 39603168, "link": "https://stackoverflow.com/questions/39603168/has-many-through-association-nomethoderror-undefined-method-each-for-str/39624695#39624695", "title": "has_many :through Association, NoMethodError (undefined method `each&#39; for &quot;&quot;:String) and save association", "body": "<p>I figured out a right solution for me with this <a href=\"https://stackoverflow.com/a/9917006/5327882\">answer</a> and this <a href=\"https://stackoverflow.com/questions/23253449/ruby-on-rails-4-select-multiple\">question</a>.</p>\n\n<p><strong>First solution to just save one Post::Category with a Post</strong></p>\n\n<p>Regarding to this <a href=\"https://stackoverflow.com/a/9917006/5327882\">answer</a>, I had to change my permit parameter in the posts_controller to this:</p>\n\n<pre><code>def post_params\n  params.require(:post).permit(:post_category_ids)\nend\n</code></pre>\n\n<p>Then I need also to change the select in the view where I create a post with a post_category to this:</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n  &lt;%= f.label :post_category_ids, :class =&gt; 'control-label', :value =&gt; 'Category: ' %&gt;\n  &lt;%= f.select :post_category_ids, options_from_collection_for_select(all_post_categories, :id, :name), {}, {class: 'selectpicker', :'data-live-search' =&gt; 'true', required: 'false' } %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>That's it. The rest of the code is still the same as I showed before my second try in my question.</p>\n\n<p><strong>Second solution to save multiple Post::Category with a Post</strong></p>\n\n<p>Regarding to this <a href=\"https://stackoverflow.com/questions/23253449/ruby-on-rails-4-select-multiple\">question</a>, I need to change my permit parameter in the posts_controller to this:</p>\n\n<pre><code>def post_params\n  params.require(:post).permit(:post_category_ids =&gt; [])\nend\n</code></pre>\n\n<p>And to select more than one Post::Category at the same time, I need to add <code>multiple: 'true'</code> to the select in the view:</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n  &lt;%= f.label :post_category_ids, :class =&gt; 'control-label', :value =&gt; 'Category: ' %&gt;\n  &lt;%= f.select :post_category_ids, options_from_collection_for_select(all_post_categories, :id, :name), {}, {class: 'selectpicker', :'data-live-search' =&gt; 'true', required: 'false', multiple: 'true' } %&gt;\n&lt;/div&gt;\n</code></pre>\n"}], "owner": {"reputation": 6271, "user_id": 5327882, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5ff3d5b5c0725fe11ee9ddfa41a58f25?s=128&d=identicon&r=PG", "display_name": "ronatory", "link": "https://stackoverflow.com/users/5327882/ronatory"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 1, "accepted_answer_id": 39624695, "answer_count": 2, "score": 2, "last_activity_date": 1474484977, "creation_date": 1474403208, "last_edit_date": 1495535652, "question_id": 39603168, "link": "https://stackoverflow.com/questions/39603168/has-many-through-association-nomethoderror-undefined-method-each-for-str", "title": "has_many :through Association, NoMethodError (undefined method `each&#39; for &quot;&quot;:String) and save association", "body": "<p>I can't get the has_many :through Association to work. And do I need to set something extra in the create method from the post_controller, to save also the post_category? (Below the code, the errors and my tries)</p>\n\n<p>I have a has_many :through Association with post, post_category and as join table categorization as follows:</p>\n\n<p>The Post Model:</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  has_many :categorizations\n  has_many :post_categories, :through =&gt; :categorizations\nend\n</code></pre>\n\n<p>The Post::Category Model (Used namespacing for better project structure):</p>\n\n<pre><code>class Post::Category &lt; ApplicationRecord\n  has_many :categorizations\n  has_many :posts, :through =&gt; :categorizations\nend\n</code></pre>\n\n<p>The Categorization Model (Used class_name, cause of the namespacing of Post::Category):</p>\n\n<pre><code>class Categorization &lt; ApplicationRecord\n  belongs_to :post\n  belongs_to :post_category, :class_name =&gt; 'Post::Category'\nend\n</code></pre>\n\n<p>And then I have in the view a select where I create a post with a post_category:</p>\n\n<pre><code>&lt;div class=\"form-group\"&gt;\n  &lt;%= f.label :post_categories, :class =&gt; 'control-label', :value =&gt; 'Category: ' %&gt;\n  &lt;%= f.select :post_categories, options_from_collection_for_select(all_post_categories, :id, :name), {}, {class: 'selectpicker', :'data-live-search' =&gt; 'true', required: 'false' } %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>In the posts_controller, I permitted the <code>:post_categories</code> symbol:</p>\n\n<pre><code>def post_params\n  params.require(:post).permit(:post_categories)\nend\n</code></pre>\n\n<p>Here is my migration file for the Association:</p>\n\n<pre><code>class CreateCategorizations &lt; ActiveRecord::Migration[5.0]\n  def change\n    create_table :categorizations do |t|\n      t.integer :post_id\n      t.integer :post_category_id\n\n      t.timestamps\n    end\n    add_index :categorizations, :post_id\n    add_index :categorizations, :post_category_id\n    # multiple-key index enforces uniqueness on (post_id, post_category_id)\n    # pairs, so that a category can't have the same post twice\n    add_index :categorizations, [:post_id, :post_category_id], unique: true\n  end\nend\n</code></pre>\n\n<p>When I try to submit the form, I get the following error in the logs:</p>\n\n<pre><code>NoMethodError (undefined method `each' for \"3\":String):\napp/controllers/posts_controller.rb:32:in `create'\n</code></pre>\n\n<p>So I searched for some answers ok -> <a href=\"https://stackoverflow.com/a/34706175/5327882\">You can't assign string to association</a>.</p>\n\n<p>I tried another way to make the association going to work.</p>\n\n<p>So I tried using the post_category_id, like recommended <a href=\"https://stackoverflow.com/a/27082653/5327882\">here</a></p>\n\n<p>I set in the select of the view </p>\n\n<pre><code>&lt;%= f.select :post_category_id, options_from_collection_for_select(all_post_categories, :id, :name), {}, {class: 'selectpicker', :'data-live-search' =&gt; 'true', required: 'false' } %&gt;\n</code></pre>\n\n<p>then in the posts_controller permit the category_id:</p>\n\n<pre><code>def post_params\n  params.require(:post).permit(:post_category_id)\nend\n</code></pre>\n\n<p>and in the Post model:</p>\n\n<pre><code>class Post &lt; ApplicationRecord\n  has_many :categorizations\n  has_many :post_category_id, :through =&gt; :categorizations\nend\n</code></pre>\n\n<p>This is the new error:</p>\n\n<pre><code>Could not find the source association(s) \"post_category_id\" or :post_category_id in model Categorization. Try 'has_many :post_category_id, :through =&gt; :categorizations, :source =&gt; &lt;name&gt;'. Is it one of post or post_category?\n</code></pre>\n\n<p>Ok makes sense, cause there is no <code>post_category_id</code> association.</p>\n\n<p><strong>Update:</strong></p>\n\n<p>The post_params:</p>\n\n<pre><code>&lt;ActionController::Parameters {\"content\"=&gt;\"content\", \"post_categories\"=&gt;\"2\"} permitted: true&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1474403153, "post_id": 39603040, "comment_id": 66514847, "body": "You forgot to tell us what you&#39;ve tried so far."}, {"owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1474404774, "post_id": 39603040, "comment_id": 66515648, "body": "Sure. I&#39;ve used many times <code>FileUtils</code> for copying files, moving, renaming, etc. What I can really get is how to tell Ruby to focus on files names, I thought about a regex but I&#39;m lacking the comparative part between file and folder names."}], "answers": [{"comments": [{"owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "edited": false, "score": 0, "creation_date": 1474408052, "post_id": 39603665, "comment_id": 66517005, "body": "Excellent. Thanks for explanation. I will make my try for optimizing it :)"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 3, "last_activity_date": 1474406490, "last_edit_date": 1474406490, "creation_date": 1474405378, "answer_id": 39603665, "question_id": 39603040, "link": "https://stackoverflow.com/questions/39603040/directory-with-a-number-of-files-and-subdirectories-i-need-to-move-those-files/39603665#39603665", "title": "Directory with a number of files and subdirectories: I need to move those files into each subdirectories,as per file name in Ruby", "body": "<p>Don't rush, try to solve your problem step by step. I would solve your problem in the following steps:</p>\n\n<p><strong>1. Separate files from subdirectories</strong></p>\n\n<pre><code>subdirectories, files = Dir['/path/to/the/directory/*'].partition{|path| File.directory?(path)}\n# TODO ...\n</code></pre>\n\n<p><strong>2. Iterate over the files and retrieve the basename of each file, without extension</strong></p>\n\n<pre><code>subdirectories, files = Dir['/path/to/the/directory/*'].partition{|path| File.directory?(path)}\n\nfiles.each do |file|\n  basename = File.basename(file, '.*')\n  # TODO ...\nend\n</code></pre>\n\n<p><strong>3. Find the subdirectory that the file should go to</strong></p>\n\n<pre><code>subdirectories, files = Dir['/path/to/the/directory/*'].partition{|path| File.directory?(path)}\n\nfiles.each do |file|\n  basename = File.basename(file, '.*')\n  subdirectory = subdirectories.find {|d| File.basename(d) =~ /^Folder \\d+ - #{Regexp.escape(basename)}$/}\n  # TODO ...\nend\n</code></pre>\n\n<p><strong>4. Move the file into that directory</strong></p>\n\n<pre><code>require 'fileutils'\n\nsubdirectories, files = Dir['/path/to/the/directory/*'].partition{|path| File.directory?(path)}\n\nfiles.each do |file|\n  basename = File.basename(file, '.*')\n  subdirectory = subdirectories.find {|d| File.basename(d) =~ /^Folder \\d+ - #{Regexp.escape(basename)}$/}\n  FileUtils.mv(file, subdirectory + '/')\nend\n</code></pre>\n\n<p>Done. But finding subdirectories using regexp is expensive and we don't want to do this for each file. Can you optimize it? </p>\n\n<p>HINT 1: Trade memory for time.<br>\nHINT 2: Hash.</p>\n"}, {"tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": false, "score": 0, "last_activity_date": 1474407772, "last_edit_date": 1474407772, "creation_date": 1474406064, "answer_id": 39603824, "question_id": 39603040, "link": "https://stackoverflow.com/questions/39603040/directory-with-a-number-of-files-and-subdirectories-i-need-to-move-those-files/39603824#39603824", "title": "Directory with a number of files and subdirectories: I need to move those files into each subdirectories,as per file name in Ruby", "body": "<p>And here is a faster but not cross-platform solution (assuming your working directory is the directory containing the files and subdirectories), and the code is a little bit chaotic:</p>\n\n<pre><code>subdirectories = `ls -d ./*/`.lines.each(&amp;:chomp!)\n\nsubdirectories.each do |dir|\n  basename = dir =~ /\\bFolder \\d+ - (\\w+)\\/$/ &amp;&amp; $1\n  next unless basename\n  `mv ./#{basename}.* #{dir}`\nend\n</code></pre>\n"}], "owner": {"reputation": 199, "user_id": 5599975, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/niUdi.jpg?s=128&g=1", "display_name": "Topa_14", "link": "https://stackoverflow.com/users/5599975/topa-14"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 68, "favorite_count": 0, "accepted_answer_id": 39603665, "answer_count": 2, "score": 2, "last_activity_date": 1474407772, "creation_date": 1474402528, "question_id": 39603040, "link": "https://stackoverflow.com/questions/39603040/directory-with-a-number-of-files-and-subdirectories-i-need-to-move-those-files", "title": "Directory with a number of files and subdirectories: I need to move those files into each subdirectories,as per file name in Ruby", "body": "<p>I have one directory with a number of files and subdirectories. I need to move those files into each subdirectories, depending on their naming. For instance:</p>\n\n<p>Files:</p>\n\n<pre><code>Hello.doc\nHello.txt\nHello.xls\nThis_is_a_test.doc\nThis_is_a_test.txt\nThis_is_a_test.xls\nAnother_file_to_move.ppt\nAnother_file_to_move.indd\n</code></pre>\n\n<p>Subdirectories:</p>\n\n<pre><code>Folder 01 - Hello\nFolder 02 - This_is_a_test\nFolder 03 - Another_file_to_move\n</code></pre>\n\n<p>What I need is to move the three files named <code>Hello</code> into folder <code>Folder 01 - Hello</code>; the three files called <code>This_is_a_test</code> into directory <code>Folder 02 - This_is_a_test</code> and the two files named <code>Another_file_to_move</code> into directory called <code>Folder 03 - Another_file_to_move</code>. I have hundreds of files, not just these ones.</p>\n\n<p>As it can be seen, the folder name contain the name of the file at the end, but at the beginning there is a <code>Folder</code> + <code>\\s</code> + a <code>number</code> + <code>\\s</code> + a <code>-</code>. This is a global pattern. </p>\n\n<p>Any help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1357, "user_id": 4370885, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/cc5bf7a6307b29d51154924b65d6dd47?s=128&d=identicon&r=PG&f=1", "display_name": "theDrifter", "link": "https://stackoverflow.com/users/4370885/thedrifter"}, "edited": false, "score": 0, "creation_date": 1474451670, "post_id": 39602893, "comment_id": 66533388, "body": "Maybe this is helpful for you. If the complexity of my SQl statement grows i prefer to invoke SQL directly. <code>http:&#47;&#47;api.rubyonrails.org&#47;classes&#47;ActiveRecord&#47;Querying.htm&zwnj;&#8203;l</code> so something like <code>ImedPatient.find_by_sql()</code> in your case"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474403015, "post_id": 39603061, "comment_id": 66514785, "body": "This is not Arel, btw. This is ActiveRecord. Arel code is much less pretty :) (<a href=\"https://github.com/rails/arel\" rel=\"nofollow noreferrer\"><code>users.where(users[:age].eq(10)).project(Arel.sql(&#39;*&#39;))</code></a>)"}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474403298, "post_id": 39603061, "comment_id": 66514920, "body": "Yes, I&#39;m quite aware."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474403404, "post_id": 39603061, "comment_id": 66514968, "body": "yet you say &quot;arel style&quot;. this is not quite arel style, is it?"}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474423090, "post_id": 39603061, "comment_id": 66521038, "body": "I suggested that you could use any ActiveRecord/arel style and gave an example of one such type of query.  The pedantic nitpicking is annoying.  Please stop.  I&#39;ve seen you do it in several other places and it sets you apart as a &quot;know it all&quot; who does not work well with others."}, {"owner": {"reputation": 31, "user_id": 6414205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8768328fc523b80caf3016cecc3d62b1?s=128&d=identicon&r=PG&f=1", "display_name": "ArtLion", "link": "https://stackoverflow.com/users/6414205/artlion"}, "edited": false, "score": 0, "creation_date": 1474449185, "post_id": 39603061, "comment_id": 66531754, "body": "I added through connection and &quot;arel&quot; style. I updated question and error result."}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "edited": false, "score": 0, "creation_date": 1474467222, "post_id": 39603061, "comment_id": 66544163, "body": "The form of the query is incorrect.  The &quot;has_many :widgets, through: :maker&quot; makes available a method with the same name as the argument to the call -- in this case widgets -- NOT the name of the joined class."}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "edited": false, "score": 0, "creation_date": 1474467325, "post_id": 39603061, "comment_id": 66544242, "body": "With ^ that in mind try this: imed_patient.imed_operator_contacts.where(value: &#39;+48501&#39;, r_ct_id: [1,2])"}], "tags": [], "owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "is_accepted": true, "score": 1, "last_activity_date": 1474402638, "creation_date": 1474402638, "answer_id": 39603061, "question_id": 39602893, "link": "https://stackoverflow.com/questions/39602893/how-to-write-correct-and-efficient-code-in-ruby-in-rails-equal-to-sql/39603061#39603061", "title": "How to write correct and efficient code in Ruby in Rails equal to SQL", "body": "<p>Try adding this to your ImedPatient:</p>\n\n<pre><code>has_many :imed_operator_contacts, through: :imed_operator\n</code></pre>\n\n<p>With that you should be able to use any ActiveRecord/arel style query:</p>\n\n<pre><code>imed_patient.imed_operator_contacts.where(value: '501')\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 6414205, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8768328fc523b80caf3016cecc3d62b1?s=128&d=identicon&r=PG&f=1", "display_name": "ArtLion", "link": "https://stackoverflow.com/users/6414205/artlion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 39603061, "answer_count": 1, "score": 0, "last_activity_date": 1474539669, "creation_date": 1474401948, "last_edit_date": 1495541850, "question_id": 39602893, "link": "https://stackoverflow.com/questions/39602893/how-to-write-correct-and-efficient-code-in-ruby-in-rails-equal-to-sql", "title": "How to write correct and efficient code in Ruby in Rails equal to SQL", "body": "<p>I stucked and I don't know how to write correct query in RoR to achieve active record.</p>\n\n<p>Relations between tables:</p>\n\n<pre><code>imed_patient has one imed_operator\nimed_operator has many imed_operator_contacts\nimed_patient has_many imed_operator_conatc through imed_operator\n</code></pre>\n\n<p>Definition of models :</p>\n\n<pre><code>class ImedOperator &lt; ActiveRecord::Base\n    self.table_name = \"imed_operator\"\n    self.primary_key = \"code\"\n\n  has_one :imed_patient, foreign_key: 'r_opr_code'\n  has_many :imed_operator_contact, :foreign_key =&gt; \"r_opr_code\"\nend\n\nclass ImedOperatorContact &lt; ActiveRecord::Base\n    self.table_name = \"imed_operator_contact\"\nend\n\nclass ImedPatient &lt; ActiveRecord::Base\n    self.table_name = \"imed_patient\"\n    self.primary_key = \"code\"\n\n    has_many :visit, :foreign_key =&gt; \"r_ptn_code\"\n    belongs_to :imed_operator , foreign_key: 'r_opr_code'\n    has_many :imed_operator_contact, through: :imed_operator\nend\n</code></pre>\n\n<p>Good SQL in PostgreSQL:</p>\n\n<pre><code>select * from imed_patient \n      INNER JOIN imed_operator ON imed_patient.r_opr_code = imed_operator.code \n      INNER JOIN imed_operator_contact ON imed_operator.code = imed_operator_contact.r_opr_code \n    where (imed_operator_contact.r_ct_id = 1 or imed_operator_contact.r_ct_id = 2) and imed_operator_contact.value = '501'\n</code></pre>\n\n<p>Code now (not working) is:</p>\n\n<pre><code>@pacjenci = ImedPatient.ImedOperatorContact.where('imed_operator_contact.r_ct_id = ? or imed_operator_contact.r_ct_id = ? and imed_operator_contact.value = ?',1,2,'+48501')\n</code></pre>\n\n<p>Error during run:</p>\n\n<blockquote>\n  <p>NoMethodError in PacjenciController#szukajpacjenttel undefined method\n  `ImedOperatorContact' for #</p>\n</blockquote>\n\n<p>Anybody can help me ?</p>\n\n<p>SOLVED</p>\n\n<p>Thanks guys for inspiration. I solved it by:</p>\n\n<pre><code>@pacjenci = ImedPatient.joins(:imed_operator).joins(:imed_operator_contact).where('imed_operator_contact.value' =&gt; '+48501', 'imed_operator_contact.r_ct_id' =&gt; [1,2]) \n</code></pre>\n\n<p>I used information from <a href=\"http://guides.rubyonrails.org/active_record_querying.html#joins\" rel=\"nofollow noreferrer\">here</a> point 12.1.3.2 Joining Nested Associations (Multiple Level)</p>\n\n<p>Special Thanks to <a href=\"https://stackoverflow.com/users/1266795/andyv\">Andy</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 299, "user_id": 3477051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ad01d820c7ebfc3f040268a31b179259?s=128&d=identicon&r=PG&f=1", "display_name": "user3477051", "link": "https://stackoverflow.com/users/3477051/user3477051"}, "edited": false, "score": 0, "creation_date": 1474401889, "post_id": 39602863, "comment_id": 66514225, "body": "I&#39;ve tried that as well and it gives the same result (/shops?currency=CAD)"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "reply_to_user": {"reputation": 299, "user_id": 3477051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ad01d820c7ebfc3f040268a31b179259?s=128&d=identicon&r=PG&f=1", "display_name": "user3477051", "link": "https://stackoverflow.com/users/3477051/user3477051"}, "edited": false, "score": 0, "creation_date": 1474401974, "post_id": 39602863, "comment_id": 66514263, "body": "Did you set it up in your routes file as &quot;resources :shops&quot;?"}, {"owner": {"reputation": 299, "user_id": 3477051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ad01d820c7ebfc3f040268a31b179259?s=128&d=identicon&r=PG&f=1", "display_name": "user3477051", "link": "https://stackoverflow.com/users/3477051/user3477051"}, "edited": false, "score": 0, "creation_date": 1474402071, "post_id": 39602863, "comment_id": 66514315, "body": "Sorry set what up? The route is set up and working, just doesn&#39;t add the extra param"}], "tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": false, "score": 0, "last_activity_date": 1474401788, "creation_date": 1474401788, "answer_id": 39602863, "question_id": 39602759, "link": "https://stackoverflow.com/questions/39602759/adding-second-parameter-to-url-in-rails/39602863#39602863", "title": "adding second parameter to URL in rails", "body": "<pre><code>%form{action: shops_path(sorting: 'alphabetically', currency: 'CAD')}\n</code></pre>\n\n<p>No need to merge the params hash like that when supplying params to a path helper!</p>\n"}, {"comments": [{"owner": {"reputation": 299, "user_id": 3477051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ad01d820c7ebfc3f040268a31b179259?s=128&d=identicon&r=PG&f=1", "display_name": "user3477051", "link": "https://stackoverflow.com/users/3477051/user3477051"}, "edited": false, "score": 0, "creation_date": 1474402103, "post_id": 39602899, "comment_id": 66514335, "body": "doesn&#39;t add the extra parameter to the URL, I see only 1 parameter"}, {"owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "reply_to_user": {"reputation": 299, "user_id": 3477051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ad01d820c7ebfc3f040268a31b179259?s=128&d=identicon&r=PG&f=1", "display_name": "user3477051", "link": "https://stackoverflow.com/users/3477051/user3477051"}, "edited": false, "score": 0, "creation_date": 1474402745, "post_id": 39602899, "comment_id": 66514654, "body": "<code>currency</code> key is already there in <code>select_tag</code>, you don&#39;t need to append that with the URL."}], "tags": [], "owner": {"reputation": 16396, "user_id": 2564298, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/BhG1x.jpg?s=128&g=1", "display_name": "Rajdeep Singh", "link": "https://stackoverflow.com/users/2564298/rajdeep-singh"}, "is_accepted": true, "score": 0, "last_activity_date": 1474402545, "last_edit_date": 1474402545, "creation_date": 1474401972, "answer_id": 39602899, "question_id": 39602759, "link": "https://stackoverflow.com/questions/39602759/adding-second-parameter-to-url-in-rails/39602899#39602899", "title": "adding second parameter to URL in rails", "body": "<p>Use <code>hidden_field_tag</code> instead,</p>\n\n<pre><code>= form_tag shops_path do\n  .input-group\n    = select_tag 'currency', options_for_select({'USA' =&gt; 'USD' , 'Canada' =&gt; 'CAD'}, params[:currency]), class: 'select2'\n    = hidden_field_tag :sorting, params[:sorting] \n</code></pre>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 299, "user_id": 3477051, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/ad01d820c7ebfc3f040268a31b179259?s=128&d=identicon&r=PG&f=1", "display_name": "user3477051", "link": "https://stackoverflow.com/users/3477051/user3477051"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 39602899, "answer_count": 2, "score": 0, "last_activity_date": 1474402545, "creation_date": 1474401385, "question_id": 39602759, "link": "https://stackoverflow.com/questions/39602759/adding-second-parameter-to-url-in-rails", "title": "adding second parameter to URL in rails", "body": "<p>I am trying to add a second parameter to the URL (and still keep the first parameter). eg I have the url /shops?sorting=alphabetically, and want to add the parameter currency=CAD</p>\n\n<pre><code>%form{action: shops_path(params.merge!({currency: params[:currency]}))}\n    .input-group\n      = select_tag 'currency', options_for_select({'USA' =&gt; 'USD' , 'Canada' =&gt; 'CAD'}, params[:currency]), class: 'select2'\n</code></pre>\n\n<p>In the code above, however, the parameter just gets replaced, eg I get /shops?currency=CAD instead of /shops?sorting=alphabetically&amp;currency=CAD\nWhat am I doing wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hash", "query-string", "urldecode"], "answers": [{"tags": [], "owner": {"reputation": 4265, "user_id": 4601088, "user_type": "registered", "accept_rate": 92, "profile_image": "https://i.stack.imgur.com/bN143.jpg?s=128&g=1", "display_name": "Bart\u0142omiej G\u0142adys", "link": "https://stackoverflow.com/users/4601088/bart%c5%82omiej-g%c5%82adys"}, "is_accepted": true, "score": 3, "last_activity_date": 1474400403, "creation_date": 1474400403, "answer_id": 39602505, "question_id": 39602454, "link": "https://stackoverflow.com/questions/39602454/how-do-i-turn-a-query-string-into-a-hash/39602505#39602505", "title": "How do I turn a query string into a hash?", "body": "<p>You can use <code>CGI.parse</code></p>\n\n<pre><code>CGI.parse('submitbutton=View&amp;a=b&amp;d=%26%26')\n#=&gt; {\"submitbutton\"=&gt;[\"View\"], \"a\"=&gt;[\"b\"], \"d\"=&gt;[\"&amp;&amp;\"]}\n</code></pre>\n"}], "owner": {"reputation": 16802, "user_id": 1235929, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/9f460ae7deb6fa19034c810a53b9fbac?s=128&d=identicon&r=PG", "display_name": "Dave", "link": "https://stackoverflow.com/users/1235929/dave"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1182, "favorite_count": 0, "closed_date": 1474400610, "accepted_answer_id": 39602505, "answer_count": 1, "score": 1, "last_activity_date": 1474400403, "creation_date": 1474400163, "question_id": 39602454, "link": "https://stackoverflow.com/questions/39602454/how-do-i-turn-a-query-string-into-a-hash", "closed_reason": "Duplicate", "title": "How do I turn a query string into a hash?", "body": "<p>I\u2019m using Ruby on Rails 4.2.7.  How do I take an encoded query string, like</p>\n\n<pre><code>submitbutton=View&amp;a=b&amp;d=%26%26\n</code></pre>\n\n<p>and turn it into a hash of name value pairs in which the values are url-unencoded?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "file", "csv"], "comments": [{"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1474400032, "post_id": 39602296, "comment_id": 66513173, "body": "possible that <code>:import</code> param is not permitted in your controller?"}, {"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "reply_to_user": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1474400274, "post_id": 39602296, "comment_id": 66513326, "body": "Would that just be as simple as adding params.permit.require(:import) to my controller?  I didn&#39;t realize import needed that."}, {"owner": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1474400358, "post_id": 39602296, "comment_id": 66513366, "body": "yes, and a way to check that is to see whether your logs return <code>unpermitted parameter :import</code> following the <code>POST</code> action."}, {"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "reply_to_user": {"reputation": 2549, "user_id": 3284936, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/TDrZU.jpg?s=128&g=1", "display_name": "dimitry_n", "link": "https://stackoverflow.com/users/3284936/dimitry-n"}, "edited": false, "score": 0, "creation_date": 1474400735, "post_id": 39602296, "comment_id": 66513589, "body": "Well, that changed my error to &quot;no implicit conversion of hash to string&quot;.  Which is odd, since I was certain CSV.read would turn it into an array of arrays rather than a hash."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1474400809, "post_id": 39602296, "comment_id": 66513628, "body": "<code>@import</code> vs <code>@imported</code>. Which is it? Also I think it should be <code>params[:import][:import]</code>"}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "edited": false, "score": 0, "creation_date": 1474402125, "post_id": 39602767, "comment_id": 66514345, "body": "Well, that definitely got me where I needed to go.  Thank you."}], "tags": [], "owner": {"reputation": 41082, "user_id": 82592, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/e1b105626dd9cfd15e543af82e470fd7?s=128&d=identicon&r=PG", "display_name": "Mladen Jablanovi\u0107", "link": "https://stackoverflow.com/users/82592/mladen-jablanovi%c4%87"}, "is_accepted": true, "score": 1, "last_activity_date": 1474401423, "creation_date": 1474401423, "answer_id": 39602767, "question_id": 39602296, "link": "https://stackoverflow.com/questions/39602296/rails-csv-file-upload-problems/39602767#39602767", "title": "Rails CSV file upload problems", "body": "<p>Sergio Tulentsev is right. You need to use <code>params[:import][:import]</code>. The first <code>import</code> being the name of your resource (comes from <code>form_for @import</code>, the second <code>import</code> being the field name (coming from <code>f.file_field :import</code>).</p>\n\n<p>More info at <a href=\"http://guides.rubyonrails.org/form_helpers.html#uploading-files\" rel=\"nofollow\">http://guides.rubyonrails.org/form_helpers.html#uploading-files</a></p>\n"}], "owner": {"reputation": 85, "user_id": 4843540, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/c6bd3509952392a7498c21c7724d3d8b?s=128&d=identicon&r=PG&f=1", "display_name": "Mascasc", "link": "https://stackoverflow.com/users/4843540/mascasc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 480, "favorite_count": 0, "accepted_answer_id": 39602767, "answer_count": 1, "score": 0, "last_activity_date": 1474401649, "creation_date": 1474399589, "last_edit_date": 1474401649, "question_id": 39602296, "link": "https://stackoverflow.com/questions/39602296/rails-csv-file-upload-problems", "title": "Rails CSV file upload problems", "body": "<p>I'm trying to upload a CSV file(without headers) to a form in Rails, and then change my database based on that file's contents.</p>\n\n<p>Now, the problem I'm having is that I know my routes must be correct, because I'm able to get to the correct method...but, my @imported variable is saying it is nil even when I upload a file. </p>\n\n<p>Is there any help I can get for this?  This will be my first file upload in rails, so we can cross this milestone together... </p>\n\n<p>Here is the form in my view, mapped to the #ship action:</p>\n\n<pre><code>&lt;%= form_for @import, :url =&gt; {:action =&gt; \"ship\", :controller =&gt; \"imports\"} do |f| %&gt;\n    &lt;%= f.file_field :import %&gt;\n    &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And here is the corresponding method in my controller:</p>\n\n<pre><code>def ship\n   @import = CSV.read(params[:file])\n   @import.each do |i|\n      Product.ship(@import[i][0]) #I believe the #read method imports\n   end                              #CSV files as an array of arrays\n  redirect_to \"/\"                   #But I have yet to get past the \n end                                #first line, so I'm unsure\n</code></pre>\n"}, {"tags": ["ruby", "api", "twitter"], "answers": [{"comments": [{"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "edited": false, "score": 0, "creation_date": 1474467188, "post_id": 39602049, "comment_id": 66544140, "body": "I dont really understand this, how will such short code save the results to csv file?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "edited": false, "score": 1, "creation_date": 1474468076, "post_id": 39602049, "comment_id": 66544825, "body": "To save the result into the file, the line would be a bit longer: <code>File.write(&#39;.&#47;my_users.csv&#39;, @client.followers(&quot;UHDTelevisions&quot;).map(&amp;:screen_name).join(&zwnj;&#8203;&#39;,&#39;))</code>."}, {"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "edited": false, "score": 0, "creation_date": 1474497776, "post_id": 39602049, "comment_id": 66560813, "body": "I just found out I cannot use client.followers, but I have to use client.follower_ids, however when I tried that in your code I got error that it does not recognize screen_name"}, {"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "edited": false, "score": 0, "creation_date": 1474498339, "post_id": 39602049, "comment_id": 66560978, "body": "When I deleted everything unnecesary, so the code looks like this: <code>print @client.follower_ids(&quot;detnewsRodBeard&quot;)</code> Im getting instead if IDs just this: Twitter::Cursor:0x3203220"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 1, "last_activity_date": 1474399015, "last_edit_date": 1474399015, "creation_date": 1474398646, "answer_id": 39602049, "question_id": 39601994, "link": "https://stackoverflow.com/questions/39601994/how-this-ruby-script-using-twitter-api-scrapes-user-ids/39602049#39602049", "title": "How this ruby script using twitter api scrapes user ids?", "body": "<p>Here is the line that builds a hash <code>{name \u21d2 id}</code>:</p>\n\n<pre><code>userhash[user.screen_name] = user.id.to_s\n</code></pre>\n\n<p>Here we already got the <code>user</code> object, that contains <code>id</code> amongst other user params. To return the list of names, one might simply:</p>\n\n<pre><code>@client.followers(\"UHDTelevisions\").map &amp;:screen_name\n</code></pre>\n\n<p>instead of all the code above.</p>\n"}, {"comments": [{"owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "edited": false, "score": 0, "creation_date": 1474498825, "post_id": 39603602, "comment_id": 66561083, "body": "thanks a lot, I found error in my code, i need to use client.follower_ids instead of client.followers, but when i tried with this code, getting error that it does not recognize screen_name and when i delete it, i get various other errors."}], "tags": [], "owner": {"reputation": 145, "user_id": 4963694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfW4p.png?s=128&g=1", "display_name": "Captain Chaos", "link": "https://stackoverflow.com/users/4963694/captain-chaos"}, "is_accepted": false, "score": 1, "last_activity_date": 1474405116, "creation_date": 1474405116, "answer_id": 39603602, "question_id": 39601994, "link": "https://stackoverflow.com/questions/39601994/how-this-ruby-script-using-twitter-api-scrapes-user-ids/39603602#39603602", "title": "How this ruby script using twitter api scrapes user ids?", "body": "<p>If you wanted to keep a parallel structure you could change it to have my_userarray (since you only need values, not key-value pairs, I assume)</p>\n\n<pre><code>def my_userarray(users)\n  userarray = []\n  users.each do |user|\n    userarray &lt;&lt; user.screen_name\n  end\n  return userarray\nend\n</code></pre>\n\n<p>You would need to update the my_users method as well, of course, to reflect the new method name for my_userarray</p>\n"}], "owner": {"reputation": 539, "user_id": 3281831, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/100002645507135/picture?type=large", "display_name": "user3281831", "link": "https://stackoverflow.com/users/3281831/user3281831"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1474405116, "creation_date": 1474398435, "last_edit_date": 1474398696, "question_id": 39601994, "link": "https://stackoverflow.com/questions/39601994/how-this-ruby-script-using-twitter-api-scrapes-user-ids", "title": "How this ruby script using twitter api scrapes user ids?", "body": "<p>Hello I have modified this older code to scrape twitter usernames, but for some reason it also scrapes user ids. I dont understand how it does that, since I dont see anywhere in the code \"user_id\" which you should use to get user ids according to twitter api documentation.\nHere is the code     </p>\n\n<pre><code>def my_usernames\n  \"UHDTelevisions\"\nend\n\ndef my_userinfo(names)\n  @client.followers(names)\nend\n\ndef my_userhash(users)\n  userhash = {}\n  users.each do |user|\n    userhash[user.screen_name] = user.id.to_s\n  end\n  return userhash\nend\n\ndef my_users\n  my_userhash(my_userinfo(my_usernames))\nend\n\ndef my_csv(my_users)\n  CSV.open('./my_users.csv','a+') do |csv|\n    my_users.each do |k,v|\n    csv &lt;&lt; [k,v]\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "edited": false, "score": 0, "creation_date": 1474400506, "post_id": 39601812, "comment_id": 66513466, "body": "What happens? Do you get an error?"}, {"owner": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "edited": false, "score": 0, "creation_date": 1474400569, "post_id": 39601812, "comment_id": 66513502, "body": "Why do you have <code>def departments</code> in your Library class?"}, {"owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "reply_to_user": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "edited": false, "score": 0, "creation_date": 1474400582, "post_id": 39601812, "comment_id": 66513510, "body": "When I try to destroy an object I get an SQL error saying that select * from normal_hours WHERE id = 3 doesn&#39;t exist."}, {"owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "reply_to_user": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "edited": false, "score": 0, "creation_date": 1474400669, "post_id": 39601812, "comment_id": 66513553, "body": "def departments was put in because library.departments was not already in the model for some reason so it gets the departments and lists them in the view.  That part is working correctly although there may be a better way to do it. I&#39;m new to rails so it could be something I&#39;m doing."}, {"owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "reply_to_user": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "edited": false, "score": 0, "creation_date": 1474400847, "post_id": 39601812, "comment_id": 66513645, "body": "Maybe I&#39;m overthinking the association, does the model get regenerated to automatically handle deleting of records if the department or library were to be deleted?"}, {"owner": {"reputation": 490, "user_id": 4895942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b5efdd44aa6381edbfa05480b4f44a?s=128&d=identicon&r=PG&f=1", "display_name": "John Feltz", "link": "https://stackoverflow.com/users/4895942/john-feltz"}, "edited": false, "score": 0, "creation_date": 1474400879, "post_id": 39601812, "comment_id": 66513668, "body": "The ERD leads me to think that your polymorphic setup isn&#39;t correct (unless that&#39;s an artifact of the drawing tool not understanding polymorphism).  Can you confirm that you have resource_id and resource_type as attributes of your NormalHour class?"}, {"owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "edited": false, "score": 0, "creation_date": 1474401980, "post_id": 39601812, "comment_id": 66514264, "body": "Might be my drawing, I did notice that the database wasn&#39;t migrating properly, but this was the updated mysql."}], "answers": [{"comments": [{"owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "edited": false, "score": 0, "creation_date": 1474401101, "post_id": 39602625, "comment_id": 66513782, "body": "Thanks.  I&#39;ll try again with your suggestions and see if I can&#39;t get something working."}, {"owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "edited": false, "score": 0, "creation_date": 1474460502, "post_id": 39602625, "comment_id": 66539264, "body": "I&#39;ve added the MySQL table."}, {"owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "edited": false, "score": 0, "creation_date": 1474461264, "post_id": 39602625, "comment_id": 66539773, "body": "How do I get the definition of departments to work with the has_many association? I had to define the departments method in my class because it wasn&#39;t available without defining it."}, {"owner": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "reply_to_user": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "edited": false, "score": 0, "creation_date": 1474461834, "post_id": 39602625, "comment_id": 66540204, "body": "@DavidJ.Davis Your department association should work. What exactly do you mean by - <i>it wasn&#39;t available</i> ?"}, {"owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "reply_to_user": {"reputation": 2070, "user_id": 1010826, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d926cfe6638d33207f97dbd5a5103ba1?s=128&d=identicon&r=PG", "display_name": "Magnuss", "link": "https://stackoverflow.com/users/1010826/magnuss"}, "edited": false, "score": 0, "creation_date": 1474462577, "post_id": 39602625, "comment_id": 66540756, "body": "@Magnuss in the view trying to access it with the following <code>&lt;% library.departments.each do |dept| %&gt;             &lt;li&gt; &lt;%= dept.name %&gt; &lt;&#47;li&gt;           &lt;% end %&gt;</code>  Library itself is coming from the loop of @libraries"}], "tags": [], "owner": {"reputation": 7668, "user_id": 29680, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/isyUF.jpg?s=128&g=1", "display_name": "John Naegle", "link": "https://stackoverflow.com/users/29680/john-naegle"}, "is_accepted": false, "score": 0, "last_activity_date": 1474400868, "creation_date": 1474400868, "answer_id": 39602625, "question_id": 39601812, "link": "https://stackoverflow.com/questions/39601812/rails-database-associations-polymorphic-association/39602625#39602625", "title": "Rails Database Associations Polymorphic Association", "body": "<p>I think you've got the schema wrong for polymorphic associations.  Take a look at the <a href=\"http://guides.rubyonrails.org/association_basics.html#polymorphic-associations\" rel=\"nofollow\">rails guide on polymorphic associations</a>.  Your normal_hours table should have two fields: resource_id and resource_type.  Using those two keys, a NormalHour can belong to either a Library or a Department.  In one case, the values in those fields would be \"5\" and \"Library\" and the other case \"12\" and \"Department\".   The schema in your picture is not polymorphic - its simply that NormalHour can belong to either of those.</p>\n\n<p>This could could be causing problems as well:</p>\n\n<pre><code>def departments\n  departments = Department.where(:library_id =&gt; self.id)\n end\n</code></pre>\n\n<p>That is overriding the definition of departments with the has_many association.</p>\n"}], "owner": {"reputation": 896, "user_id": 4351693, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/l7TpX.jpg?s=128&g=1", "display_name": "David J. Davis", "link": "https://stackoverflow.com/users/4351693/david-j-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1474556337, "creation_date": 1474397819, "last_edit_date": 1474556337, "question_id": 39601812, "link": "https://stackoverflow.com/questions/39601812/rails-database-associations-polymorphic-association", "title": "Rails Database Associations Polymorphic Association", "body": "<p>I've read a few of the help topics and the ruby documentation on PolyMorphic Associations and am still not sure if that is the way to go.  After struggling with the concept and trying to figure this out, I thought of reaching out here.</p>\n\n<p>What I tried so far was this, which breaks all other CRUD operations from happening in the libraries and departments models. </p>\n\n<p><strong>Normal Hours Class</strong> </p>\n\n<pre><code>class NormalHour &lt; ApplicationRecord\n  belongs_to :resource, polymorphic: true\nend\n</code></pre>\n\n<p><strong>Library Class</strong></p>\n\n<pre><code>class Library &lt; ApplicationRecord\n  has_many :departments, dependent: :destroy\n  has_many :normal_hours, as: :resource, dependent: :destroy\n\n  def departments\n      departments = Department.where(:library_id =&gt; self.id)\n  end\nend\n</code></pre>\n\n<p><strong>Departments Class</strong></p>\n\n<pre><code>class Department &lt; ApplicationRecord\n  belongs_to :library, inverse_of: :departments\n  has_many :normal_hours, as: :resource, dependent: :destroy\nend\n</code></pre>\n\n<p>The problem becomes that after adding those I can no longer add or delete anything from the libraries or departments.  </p>\n\n<p>Any thoughts?  Tutorials?  Samples?  Etc? </p>\n\n<p><a href=\"https://i.stack.imgur.com/jr0TQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jr0TQ.png\" alt=\"enter image description here\"></a></p>\n\n<h2>UPDATE</h2>\n\n<pre><code>+---------------+--------------+------+-----+---------+----------------+\n| Field         | Type         | Null | Key | Default | Extra          |\n+---------------+--------------+------+-----+---------+----------------+\n| id            | int(11)      | NO   | PRI | NULL    | auto_increment |\n| resource_type | varchar(255) | YES  | MUL | NULL    |                |\n| resource_id   | int(11)      | YES  |     | NULL    |                |\n| day_of_week   | int(11)      | YES  |     | NULL    |                |\n| open          | time         | YES  |     | NULL    |                |\n| close         | time         | YES  |     | NULL    |                |\n| created_at    | datetime     | NO   |     | NULL    |                |\n| updated_at    | datetime     | NO   |     | NULL    |                |\n+---------------+--------------+------+-----+---------+----------------+\n</code></pre>\n\n<h1>UPDATE 2</h1>\n\n<p>It appears that I'm having issues with the views now, but simplifying the view and modifying my Library and Department classes has fixed my original problem.  Now I'm trying to figure out the best case scenario for making a dynamic form that changes the type based on selected object and loads both libraries and departments into a select field.  </p>\n\n<p><em>removed</em> <code>dependent: :destroy</code></p>\n\n<p><strong>Library Class</strong></p>\n\n<pre><code>class Library &lt; ApplicationRecord\n  has_many :departments, dependent: :destroy\n  has_many :normal_hours, as: :resource\n\n  def departments\n      departments = Department.where(:library_id =&gt; self.id)\n  end\nend\n</code></pre>\n\n<p><strong>Departments Class</strong></p>\n\n<pre><code>class Department &lt; ApplicationRecord\n  belongs_to :library, inverse_of: :departments\n  has_many :normal_hours, as: :resource\nend\n</code></pre>\n\n<h1>UPDATE 3</h1>\n\n<h3>Problem Update:</h3>\n\n<p>After Update 2 I think my true problem is figuring out the views for this stuff.  I know that the department and library classes will have access to normal_hours information.  The problem that I'm having is in entering the data through forms and using that same form to update that data.  </p>\n\n<pre><code>  &lt;div class=\"field\" &gt;\n    &lt;%= f.collection_select(:resource_id, Library.all, :id, :name)  %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.collection_select(:resource_id, Department.all, :id, :reformat_name) %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>I need a condition to turn off the fields or hide the fields based on the type of information being entered.  I thought about putting a check button or question that uses JS to hide/show the correct drop down, but what kind of a logic do I need to change the specific class based on the type or is there a better way.  </p>\n\n<p>I was thinking that potentiall in the collection_select I could use the reference type to call the class <code>@normal_hours.resource_type.all</code> but I doubt that would instantiate a new class.  </p>\n"}, {"tags": ["ruby", "chef-infra", "serverspec", "inspec"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474398001, "post_id": 39601661, "comment_id": 66512001, "body": "I am not sure about <code>chef</code> but 1. why would not you <code>egrep</code> for <code>^\\s*kernel[^#]*nousb\\b</code> and check the result for truthy? and 2. are you sure <code>command</code> returns the <code>stdout</code>, not the result of command execution (I believe it\u2019s <code>0</code> here?)"}, {"owner": {"reputation": 787, "user_id": 6726990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25b10afe9155203945628b1dfbfb2b70?s=128&d=identicon&r=PG&f=1", "display_name": "Blooze", "link": "https://stackoverflow.com/users/6726990/blooze"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474398577, "post_id": 39601661, "comment_id": 66512347, "body": "That&#39;s a good call I will switch my egrep to exactly what I am matching for, big oversight on my part. And I think it is actually checking the stdout, since when I run the test, it passes that the output matches the pattern I&#39;m looking for."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474398846, "post_id": 39601661, "comment_id": 66512492, "body": "If it returns the <code>stdout</code>, you should be fine with what you were doing, since <code>match</code> works perfectly on multiline and <code>egrep</code> returns the plain string. There are no \u201cmultiple stdouts\u201c in the universe :)"}, {"owner": {"reputation": 787, "user_id": 6726990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25b10afe9155203945628b1dfbfb2b70?s=128&d=identicon&r=PG&f=1", "display_name": "Blooze", "link": "https://stackoverflow.com/users/6726990/blooze"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1474399033, "post_id": 39601661, "comment_id": 66512605, "body": "The issue though is the inspec portion, the describe command that I am running on the stdout is only checking one of the lines and considering it passing, I will edit my comment and clarify."}], "answers": [{"comments": [{"owner": {"reputation": 787, "user_id": 6726990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25b10afe9155203945628b1dfbfb2b70?s=128&d=identicon&r=PG&f=1", "display_name": "Blooze", "link": "https://stackoverflow.com/users/6726990/blooze"}, "edited": false, "score": 0, "creation_date": 1474399502, "post_id": 39602125, "comment_id": 66512860, "body": "Thanks for reaching out, I am however having the same issue where that describe will find one line that fits its match and mark it as passing, when I have lines that should be failing. (a line with kernel that does not have nousb on it)"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 787, "user_id": 6726990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25b10afe9155203945628b1dfbfb2b70?s=128&d=identicon&r=PG&f=1", "display_name": "Blooze", "link": "https://stackoverflow.com/users/6726990/blooze"}, "edited": false, "score": 0, "creation_date": 1474399913, "post_id": 39602125, "comment_id": 66513107, "body": "Then your regexp is bad, please include it above. You probably want something like this: <code>is_expected.to_not match &#47;^\\s*kernel \\d+(?! nousb)$&#47;m</code>"}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1474403308, "post_id": 39602125, "comment_id": 66514926, "body": "He&#39;s trying to ensure that <i>each</i> kernel line has <code>nousb</code>. The :content matcher will not suffice by itself."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1474403429, "post_id": 39602125, "comment_id": 66514977, "body": "Hence the <code>to_not</code> reverse matcher and a negative lookahead :) But it&#39;s definitely easier to write this in Ruby code than in a super-complex regexp."}, {"owner": {"reputation": 787, "user_id": 6726990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25b10afe9155203945628b1dfbfb2b70?s=128&d=identicon&r=PG&f=1", "display_name": "Blooze", "link": "https://stackoverflow.com/users/6726990/blooze"}, "edited": false, "score": 0, "creation_date": 1474404753, "post_id": 39602125, "comment_id": 66515642, "body": "I&#39;m a bit confused on the to_not part since the above mentions that it is expected to match, but do you have any references where I could read on doing this with Ruby instead of regex? I&#39;m pretty new to programming overall. Thanks"}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "edited": false, "score": 0, "creation_date": 1474405576, "post_id": 39602125, "comment_id": 66516016, "body": "@coderanger <code>its(:content) { is_expected.to_not match &#47;{#regex}&#47;m }</code> looks like it would work, but it doesn&#39;t. Besides being hard to read because of the inversion, what would you expect <code>&quot;kernel foo\\nbar&quot; !~ &#47;^\\s*kernel.*?(?!nousb)&#47;m</code> to return?"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1474406311, "post_id": 39602125, "comment_id": 66516317, "body": "Compiling zero width assertions in my brain is beyond my skills usually, I just load up regexpal.com and try it out until I&#39;m happy."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1474406582, "post_id": 39602125, "comment_id": 66516416, "body": "I added a probably clearer version that uses a bit more code."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 0, "last_activity_date": 1474406555, "last_edit_date": 1474406555, "creation_date": 1474398947, "answer_id": 39602125, "question_id": 39601661, "link": "https://stackoverflow.com/questions/39601661/inspec-serverspec-grabbing-multiple-stdouts-from-command-and-describing-them/39602125#39602125", "title": "Inspec/Serverspec grabbing multiple stdouts from command and describing them", "body": "<p>Use a <code>file</code> resource and Ruby's RegExp matching (as you are already doing).</p>\n\n<pre><code>describe file('/boot/grub/grub.conf') do\n  its(:content) { is_expected.to match /whatever/ }\nend\n</code></pre>\n\n<p>EDIT to show how to do this with Ruby code instead of fancy regexps:</p>\n\n<pre><code>describe file('/boot/grub/grub.conf') do\n  it do\n    # Get all the lines in the file.\n    lines = subject.content.split(/\\n/)\n    # Check for any line that _doesn't_ match the regexp.\n    without_nousb = lines.any? {|line| line !~ /^.*?kernel.*?nousb.*?$/ }\n    # Make a test assertion.\n    expect(without_nousb).to be false\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": -1, "last_activity_date": 1474399621, "creation_date": 1474399621, "answer_id": 39602304, "question_id": 39601661, "link": "https://stackoverflow.com/questions/39601661/inspec-serverspec-grabbing-multiple-stdouts-from-command-and-describing-them/39602304#39602304", "title": "Inspec/Serverspec grabbing multiple stdouts from command and describing them", "body": "<p>I finally got the question. Since you want to check all kernels:</p>\n\n<pre><code>output = command('egrep \"^[[:space:]]*kernel\" /boot/grub/grub.conf')\nok = output.split(\"\\n\")\n           .group_by { |line| line[/(?&lt;=kernel )(\\S*)/] }\n           .map { |kernel, lines| lines.any? { |line| line =~ /nousb/ } }\n           .all?\n\ndescribe output do\n  # OK must be TRUE\nend\n</code></pre>\n\n<p>Here we: </p>\n\n<ul>\n<li>split the output by lines</li>\n<li>group lines by kernel name (regexp might require adjustment)</li>\n<li>map the hash <code>{ kernel \u21d2 lines }</code> to true/false, depending on whether <code>nousb</code> is presented</li>\n<li>check that all kernels have this <code>nousb</code> line.</li>\n</ul>\n\n<p>The code above is aware of <code>grub.cfg</code> might contain many lines for the same kernel. \nHope it helps.</p>\n"}, {"comments": [{"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1474402384, "post_id": 39602591, "comment_id": 66514463, "body": "This is not related to InSpec (or Serverspec&#39;s remote mode) as it does not run on the target."}, {"owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "reply_to_user": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1474402816, "post_id": 39602591, "comment_id": 66514680, "body": "@coderanger This is covered by &quot;parse the file however you like.&quot; I&#39;m not prescribing the method for parsing the remote file; I&#39;m explaining how to create an effective spec for the validation."}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "edited": false, "score": 0, "creation_date": 1474403471, "post_id": 39602591, "comment_id": 66514995, "body": "With the edit, this is now better :) Before you had a <code>File.read</code> which will have no effect on a remote system."}], "tags": [], "owner": {"reputation": 71199, "user_id": 1301972, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/T5G7N.jpg?s=128&g=1", "display_name": "Todd A. Jacobs", "link": "https://stackoverflow.com/users/1301972/todd-a-jacobs"}, "is_accepted": false, "score": 0, "last_activity_date": 1474403228, "last_edit_date": 1492086984, "creation_date": 1474400743, "answer_id": 39602591, "question_id": 39601661, "link": "https://stackoverflow.com/questions/39601661/inspec-serverspec-grabbing-multiple-stdouts-from-command-and-describing-them/39602591#39602591", "title": "Inspec/Serverspec grabbing multiple stdouts from command and describing them", "body": "<h2>Test Your Parse <em>Results</em>, Not a Content Match</h2>\n\n<p>You have to write some code inside the block that will parse your grub.conf file and ensure that there is a <code>nousb</code> command <em>for each record</em>. You might also try the <a href=\"http://augeas.net/docs/references/1.4.0/lenses/files/grub-aug.html\" rel=\"nofollow noreferrer\">Augeas lens for grub</a> to validate the grub.conf for you. For example:</p>\n\n<pre><code>describe 'validate kernel parameters' do\n  it 'should include a \"nousb\" parameter on each line' do\n    # 1. parse your file however you like, then\n    # 2. store result as a Boolean.\n    expect(result).to be_true\n  end\nend\n</code></pre>\n\n<h2>Check Running Kernel</h2>\n\n<p>Alternatively, if you only care about the result of the <em>running</em> kernel, you can <a href=\"https://unix.stackexchange.com/a/48602/17673\">check the value</a> with something similar to:</p>\n\n<pre><code># 1. read the remote's /proc/cmdline however you like, then\n# 2. evaluate your match.\nexpect(command_line_contents).to match /\\bnousb\\b/\n</code></pre>\n"}], "owner": {"reputation": 787, "user_id": 6726990, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/25b10afe9155203945628b1dfbfb2b70?s=128&d=identicon&r=PG&f=1", "display_name": "Blooze", "link": "https://stackoverflow.com/users/6726990/blooze"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1840, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1481438600, "creation_date": 1474397360, "last_edit_date": 1481438600, "question_id": 39601661, "link": "https://stackoverflow.com/questions/39601661/inspec-serverspec-grabbing-multiple-stdouts-from-command-and-describing-them", "title": "Inspec/Serverspec grabbing multiple stdouts from command and describing them", "body": "<p>I'm attempting to create an inspec control that searches through every line that starts with kernel (and ignores whitespace) in /boot/grub/grub.conf and then checking every line to see if it has 'nousb' somewhere in the line. I'd like it to return a failure if nousb is not found. </p>\n\n<p>My issue is that I cannot figure out a way to grab/describe multiple stdouts from the grep in the event more than one line starts with kernel. Is that something I can accomplish using .each? Here is my code:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>control 'os-disable-usb-pcmcia' do\n  impact 0.5\n  title 'Disable USB and PCMCIA Devices'\n  desc \"ensure default kernel in grub has 'nousb' option\"\n\n  output = command('egrep \"^[[:space:]]*kernel\" /boot/grub/grub.conf')\n  describe output do\n    its('stdout') { should match /^\\s*kernel[^#]*nousb\\b/ } # match nousb anywhere in the 'kernel' line\n  end\nend\n</code></pre>\n\n<p>Edit for clarification. </p>\n\n<p>Say I have these lines in my conf file</p>\n\n<pre><code>kernel 1 nousb\nkernel 2\nkernel 3\nkernel 4\n</code></pre>\n\n<p>the test will consider it passing because the initial one matched what it was looking for despite multiple kernel lines not having the nousb requirement. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "session", "session-cookies"], "comments": [{"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474397466, "post_id": 39601527, "comment_id": 66511681, "body": "@7stud Why thread comes here ?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 2, "creation_date": 1474397874, "post_id": 39601527, "comment_id": 66511932, "body": "<code>session</code> is NOT a global hash. It&#39;s a METHOD that returns a new hash in the context of each request."}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474398437, "post_id": 39601527, "comment_id": 66512267, "body": "@Aetherus After returning the new hash, Is it maintains any data about logged in user in server side?"}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474399407, "post_id": 39601527, "comment_id": 66512808, "body": "I just gave an answer."}], "answers": [{"comments": [{"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474397791, "post_id": 39601673, "comment_id": 66511870, "body": "So, session is only on client side. Not in server side. So there is no session maintained in server. Is is right? If it is right then what is the security. After the session hash is sent to the client, then it is possible to access the server form client whenever we want, Until I safely have the session hash."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 1, "creation_date": 1474397848, "post_id": 39601673, "comment_id": 66511910, "body": "After reading the quote, that is your interpretation?  The client side has no idea that the Ruby language has even been invented yet.  Is it really your belief that <code>session[:id] = user.id</code> is client side code, e.g. javascript?"}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474398035, "post_id": 39601673, "comment_id": 66512023, "body": "As per the quote ` It will load an existing session if the user has already used the application.`. From where it is loaded. There is only one variable named &quot;session[:id]&quot;. It gets overwritten when the second users logs in. Then how it is possible to maintains the 1st user id and its hash ?"}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474398180, "post_id": 39601673, "comment_id": 66512123, "body": "No. Session[:id] = user.id is not only to client side. I expect it also maintains some session details for logged in users in server side."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474398611, "post_id": 39601673, "comment_id": 66512364, "body": "<i>From where it is loaded.</i> =&gt;  <code>session = all_sessions[session_id_from_cookie_in_client_request]; all_sessions[new_unique_session_id] = {} if not session</code>"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474399958, "post_id": 39601673, "comment_id": 66513126, "body": "Is it your belief that a variable named <code>session_id_from_cookie_in_client_request</code> is an actual variable name in Rails?"}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474400216, "post_id": 39601673, "comment_id": 66513292, "body": "No. It shows error on all_sessions. It didn&#39;t say as argument error."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "reply_to_user": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474434504, "post_id": 39601673, "comment_id": 66523858, "body": "@mrg: Right, because I made up all those variable names so that it would be clear what&#39;s going on."}], "tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 1, "last_activity_date": 1474397805, "last_edit_date": 1474397805, "creation_date": 1474397389, "answer_id": 39601673, "question_id": 39601527, "link": "https://stackoverflow.com/questions/39601527/how-session-works-in-rails/39601673#39601673", "title": "How session works in Rails", "body": "<blockquote>\n  <p>Most applications need to keep track of certain state of a particular\n  user. This could be the contents of a shopping basket or the user id\n  of the currently logged in user...Rails will create a new session automatically if a new user\n  accesses the application. It will load an existing session if the user\n  has already used the application.</p>\n  \n  <p>A session usually consists of a hash of values and a session id,\n  usually a 32-character string, to identify the hash. Every cookie sent\n  to the client's browser includes the session id. And the other way\n  round: the browser will send it to the server on every request from\n  the client.</p>\n</blockquote>\n\n<p><a href=\"http://guides.rubyonrails.org/security.html\" rel=\"nofollow\">http://guides.rubyonrails.org/security.html</a></p>\n\n<p>In other words, each unique user has their own session hash.  \"Global\" means that the session hash can be accessed inside any action/method.</p>\n"}, {"comments": [{"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474398375, "post_id": 39601935, "comment_id": 66512234, "body": "So, there is no session details maintained in server side. Except the request comes from the user. Is it right?"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "reply_to_user": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474398425, "post_id": 39601935, "comment_id": 66512255, "body": "The unique ID generated by your server is stored on the server-side and in the user&#39;s browser as a cookie.  Then each time a user checks a new page on your server, the unique id is compared between your server&#39;s key and it matches the two."}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474398485, "post_id": 39601935, "comment_id": 66512301, "body": "Where the Unique ID is stored."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1474398519, "post_id": 39601935, "comment_id": 66512318, "body": "@bkunzi01: I think in rails, by default, the entire session is stored in a cookie. Not only id."}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1474398567, "post_id": 39601935, "comment_id": 66512339, "body": "Yes sergio sorry if I made it sound like it was just a key!  Thanks for your rails contributions thus far I live off your Q&amp;A lol."}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474398658, "post_id": 39601935, "comment_id": 66512386, "body": "For Ex: If 10 users are logged in, How the server identify those request and where it keeps data about logged in users?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474398737, "post_id": 39601935, "comment_id": 66512429, "body": "@mrg: with session cookie storage, server simply decrypts the cookie from the request and there is your session object. Server doesn&#39;t keep data about logged in users."}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474398961, "post_id": 39601935, "comment_id": 66512566, "body": "So, How to delete a session."}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474399159, "post_id": 39601935, "comment_id": 66512671, "body": "How &quot;session={}&quot; deletes the cookies stored in client side?. Because we execute it in server side."}, {"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474399360, "post_id": 39601935, "comment_id": 66512786, "body": "No such reference gives about this. They simply says session creation and deletion."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1474399662, "post_id": 39601935, "comment_id": 66512952, "body": "Let me spell things out for you: 1) It is possible for sever side code to store information between requests such as a unique id.  All popular server side languages, e.g. php, ruby, python, perl, etc. provide that feature with an easy to use API.  2) It is possible for server side code to delete cookies.  Given those two possibilities, can you not reason out that it is possible for Rails to use a scheme to identify users by the information in their request, then look up stored information related to that user, and then delete the users information when the time comes?"}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1474399740, "post_id": 39601935, "comment_id": 66513006, "body": "You can reset a user&#39;s entire session by adding &quot;reset session&quot; to a controller action, you can delete the session via &quot;session.delete :id&quot; or whatever key you&#39;ve already set."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1474399853, "post_id": 39601935, "comment_id": 66513069, "body": "I gave you a code example of how such a scheme would work."}], "tags": [], "owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "is_accepted": false, "score": 0, "last_activity_date": 1474398201, "creation_date": 1474398201, "answer_id": 39601935, "question_id": 39601527, "link": "https://stackoverflow.com/questions/39601527/how-session-works-in-rails/39601935#39601935", "title": "How session works in Rails", "body": "<p>As 7stud stated, all sessions are created on a user by user basis.  Since HTTP is a \"stateless\" protocol, you would potentially need someone to enter their login information everytime they wanted to look at a new page or even refresh the existing one.  This is where sessions comes in.  In Rails, each session is assigned a unique session id (a 32 character string of random hex numbers) when it's created and a cookie containing this id is then sent to the client's browser.  From that point on, every request from the browser sends the session id back to the server thus maintaining continuity.  Normal guidelines to follow are you should only keep track of the bare minimum in a session such as info to determine the current user (like a primary key etc.). </p>\n"}, {"comments": [{"owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "edited": false, "score": 0, "creation_date": 1474399626, "post_id": 39602237, "comment_id": 66512934, "body": "Thanks. I understood. But when I delete the session as &quot;session[:id]=nil&quot;, then how it deletes the session cookies stored in client side."}, {"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 1, "creation_date": 1474399792, "post_id": 39602237, "comment_id": 66513037, "body": "Doesn&#39;t need to delete the client&#39;s cookie.  His/her cookie will no longer match with any key on the server and they&#39;ll be asked to login again etc."}, {"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 0, "creation_date": 1474400031, "post_id": 39602237, "comment_id": 66513171, "body": "If something changes in a session, Rails simply serializes and stores that session again."}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 8, "last_activity_date": 1474400424, "last_edit_date": 1474400424, "creation_date": 1474399355, "answer_id": 39602237, "question_id": 39601527, "link": "https://stackoverflow.com/questions/39601527/how-session-works-in-rails/39602237#39602237", "title": "How session works in Rails", "body": "<p><code>session</code> is not a global hash. It's a method that returns a new hash in the context of each request. How that hash is created depends on the underlying session store.</p>\n\n<p>Let's take a look at 2 typical session stores.</p>\n\n<p><strong>Encrypted cookie store</strong></p>\n\n<p>This is the default session store of Rails applications. Rails serializes then encrypts the whole session hashes into cookies, and stores those cookies on the clients (e.g. browsers). Each time a request hits Rails app, Rails decrypts then deserializes that session cookie to a hash. That hash is what the method <code>session</code> returns.</p>\n\n<p><strong>Redis session store</strong></p>\n\n<p>This session store is not shipped with Rails. It's a separate gem.</p>\n\n<p>With this session store, Rails serializes the session, gives it an ID (called session ID), and stores the ID-hash pair into Redis. Rails then set the session ID to cookie and send that cookie to the client. Each time a request hits Rails app, Rails retrieves the session ID from the cookie, gets the serialized session associated with that session ID from Redis, and deserializes that into a hash. That hash is what the method <code>session</code> returns.</p>\n"}], "owner": {"reputation": 6463, "user_id": 5063789, "user_type": "registered", "accept_rate": 35, "profile_image": "https://www.gravatar.com/avatar/57dfee355833ddc59127fc6a0584b908?s=128&d=identicon&r=PG&f=1", "display_name": "mohangraj", "link": "https://stackoverflow.com/users/5063789/mohangraj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2426, "favorite_count": 0, "accepted_answer_id": 39602237, "answer_count": 3, "score": 4, "last_activity_date": 1474400424, "creation_date": 1474396950, "question_id": 39601527, "link": "https://stackoverflow.com/questions/39601527/how-session-works-in-rails", "title": "How session works in Rails", "body": "<p>I Learn about session in rails. Most of the reference says that, the following is the way to create a session.</p>\n\n<p>Example: </p>\n\n<pre><code>session[:id]=user.id\n</code></pre>\n\n<p>Session is a global hash. My doubt is, if session is a global hash, then If more than one user try's to login, then the session variable gets \noverwrite or not ? Because, there will be only one global hash. So, if millions of user gets login, then how the same \"session[:id]\" hold\nall the users sessions. Is it possible to store more than one value in a single variable. And also how to delete a session for a particular\nuser. So, how session is handled in rails?</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1474396108, "post_id": 39601157, "comment_id": 66510910, "body": "Are you asking about the difference between the two? Or how can they both be used for debugging? These are two different questions."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1474403173, "post_id": 39601157, "comment_id": 66514856, "body": "In rails you see both at the same time. The app lication trace will tell you how your code is failing. Framework will will give you s lot more info and you can sometimes ignore it. For example if you see an error coming from a controller method the framework trace will tell you that it has gone through url parsing, routing, etc. That&#39;s what lead to the problem even though that&#39;s not where the problem is directly found. Honestly using trace to debug errors is just practice. You&#39;ll learn to recognize common errors. Using a debugger like pry is also immensely helpful."}, {"owner": {"reputation": 272, "user_id": 1922399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9c3dcfd8ca44f4cc1062567f9115c27?s=128&d=identicon&r=PG", "display_name": "Charan Kumar Borra", "link": "https://stackoverflow.com/users/1922399/charan-kumar-borra"}, "edited": false, "score": 0, "creation_date": 1474426637, "post_id": 39601157, "comment_id": 66521860, "body": "I need both difference and how they can be used"}], "owner": {"reputation": 272, "user_id": 1922399, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d9c3dcfd8ca44f4cc1062567f9115c27?s=128&d=identicon&r=PG", "display_name": "Charan Kumar Borra", "link": "https://stackoverflow.com/users/1922399/charan-kumar-borra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 62, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474395667, "creation_date": 1474395667, "question_id": 39601157, "link": "https://stackoverflow.com/questions/39601157/difference-between-application-trace-and-framework-trace", "title": "Difference between Application Trace and Framework Trace", "body": "<p>I am new to Rails. I want to know about the purpose of <strong>Application Trace</strong> and <strong>Framework Trace</strong> which are always shown if there is any error in our Rails application. So many developers while asking their question always post these traces to debug their problem. How these traces are helpful in order to debug our Errors in Rails.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 3997, "user_id": 3998420, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/55ea542584d3fd2a430c3d409bdafc95?s=128&d=identicon&r=PG&f=1", "display_name": "bkunzi01", "link": "https://stackoverflow.com/users/3998420/bkunzi01"}, "edited": false, "score": 0, "creation_date": 1474400347, "post_id": 39600866, "comment_id": 66513358, "body": "Taggings_count should be under the tags table...Make sure your migrations went through."}, {"owner": {"reputation": 3160, "user_id": 1266795, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7855792dbc5f3b4c365344314e2b1ad6?s=128&d=identicon&r=PG", "display_name": "AndyV", "link": "https://stackoverflow.com/users/1266795/andyv"}, "edited": false, "score": 0, "creation_date": 1474402852, "post_id": 39600866, "comment_id": 66514700, "body": "rake db:test:prepare"}], "owner": {"user_type": "does_not_exist", "display_name": "user6574649"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 69, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1474395854, "creation_date": 1474394608, "last_edit_date": 1474395854, "question_id": 39600866, "link": "https://stackoverflow.com/questions/39600866/acts-as-taggable-on-gem-taggings-count-does-not-exist", "title": "acts-as-taggable-on gem -- &quot;taggings_count&quot; does not exist", "body": "<p>After upgrading the gem <code>acts-as-taggable-on</code> and applying the migrations:</p>\n\n<pre><code>   rake acts_as_taggable_on_engine:install:migrations\n   rake db:migrate\n</code></pre>\n\n<p>I keep having the errors in my <strong>tests</strong>: </p>\n\n<pre><code>ActiveRecord::StatementInvalid:\n       PG::UndefinedColumn: ERROR:  column \"taggings_count\" does not exist                                                      \n       LINE 1: UPDATE \"tags\" SET \"taggings_count\" = COALESCE(\"taggings_coun...\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model"], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1474394012, "post_id": 39600630, "comment_id": 66509773, "body": "I think this should be <code>joins(stories: :chapters)</code> because <code>Saga</code> has no knowledge of <code>chapters</code> except through <code>stories</code> and the where clause could be <code>where(chapters: {published: true})</code>"}, {"owner": {"reputation": 143, "user_id": 3212306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7530194fcbcaba9d45d0b024fe02f2a5?s=128&d=identicon&r=PG", "display_name": "Sofiane G.", "link": "https://stackoverflow.com/users/3212306/sofiane-g"}, "edited": false, "score": 0, "creation_date": 1474394119, "post_id": 39600630, "comment_id": 66509833, "body": "Tried, and now I have this error: Association named &#39;chapters&#39; was not found on Saga; perhaps you misspelled it?"}, {"owner": {"reputation": 143, "user_id": 3212306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7530194fcbcaba9d45d0b024fe02f2a5?s=128&d=identicon&r=PG", "display_name": "Sofiane G.", "link": "https://stackoverflow.com/users/3212306/sofiane-g"}, "edited": false, "score": 0, "creation_date": 1474394280, "post_id": 39600630, "comment_id": 66509917, "body": "Replaced with <code>joins(stories: :chapters)</code>, and it is working ! Thanks a lot man !"}, {"owner": {"reputation": 490, "user_id": 4895942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b5efdd44aa6381edbfa05480b4f44a?s=128&d=identicon&r=PG&f=1", "display_name": "John Feltz", "link": "https://stackoverflow.com/users/4895942/john-feltz"}, "edited": false, "score": 0, "creation_date": 1474395023, "post_id": 39600630, "comment_id": 66510266, "body": "If you had <code>has_many :chapters, through: :stories</code> on the saga.rb model, what I posted originally would have worked..."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1474404475, "post_id": 39600630, "comment_id": 66515494, "body": "As a note <code>IS TRUE</code> would be database specific e.g. SQL Server likes <code>=1</code> where as <code>where(chapters: {published: true})</code> lets the adapter make the determination as to how to assemble the query"}], "tags": [], "owner": {"reputation": 490, "user_id": 4895942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b5efdd44aa6381edbfa05480b4f44a?s=128&d=identicon&r=PG&f=1", "display_name": "John Feltz", "link": "https://stackoverflow.com/users/4895942/john-feltz"}, "is_accepted": false, "score": 1, "last_activity_date": 1474394236, "last_edit_date": 1474394236, "creation_date": 1474393756, "answer_id": 39600630, "question_id": 39600516, "link": "https://stackoverflow.com/questions/39600516/rails-create-a-scope-based-on-grandchild-property/39600630#39600630", "title": "Rails - Create a scope based on grandchild property", "body": "<p>Try using the <code>.joins()</code> method of ActiveRecord:</p>\n\n<pre><code>class Saga &lt; ActiveRecord::Base\n  ...\n  scope :has_published_chapter, -&gt; {\n    joins(stories: :chapters).where(\"chapters.published IS TRUE\")\n  }\n</code></pre>\n"}], "owner": {"reputation": 143, "user_id": 3212306, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7530194fcbcaba9d45d0b024fe02f2a5?s=128&d=identicon&r=PG", "display_name": "Sofiane G.", "link": "https://stackoverflow.com/users/3212306/sofiane-g"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1474394236, "creation_date": 1474393284, "question_id": 39600516, "link": "https://stackoverflow.com/questions/39600516/rails-create-a-scope-based-on-grandchild-property", "title": "Rails - Create a scope based on grandchild property", "body": "<p>I'm trying to create a scope for a class based on the grandchild status.</p>\n\n<p>I have a class Saga, which has many stories which have many Chapters, and I want Saga to have a scope where only sagas with a chapter in a story is published. Chapter.published is a boolean</p>\n\n<pre><code>class Saga &lt; ActiveRecord::Base\n  has_many :stories, -&gt; { order(:order) }\n\n  def self.default_scope\n  end\nend\n\nclass Story &lt; ActiveRecord::Base\n  belongs_to :saga\n  has_many :chapters, -&gt; { order(:order) }\n\n  def self.default_scope\n    where(saga_id: nil)\n    lambda{ where('EXISTS (SELECT 1 FROM chapters WHERE chapters.published = 1 AND chapters.story_id = stories.id)') }\n  end\nend\n\nclass Chapter &lt; ActiveRecord::Base\n  belongs_to :story\n\n  def self.default_scope\n    where(published: true)\n  end\n\nend\n</code></pre>\n\n<p>Thanks for help !</p>\n"}, {"tags": ["ruby", "conditional"], "comments": [{"owner": {"reputation": 490, "user_id": 4895942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b5efdd44aa6381edbfa05480b4f44a?s=128&d=identicon&r=PG&f=1", "display_name": "John Feltz", "link": "https://stackoverflow.com/users/4895942/john-feltz"}, "edited": false, "score": 1, "creation_date": 1474393328, "post_id": 39600376, "comment_id": 66509413, "body": "Did you get an error or just get a result you weren&#39;t expecting?"}, {"owner": {"reputation": 287, "user_id": 6303358, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/12db49057a225f57813bd64061e18933?s=128&d=identicon&r=PG&f=1", "display_name": "gemart", "link": "https://stackoverflow.com/users/6303358/gemart"}, "reply_to_user": {"reputation": 490, "user_id": 4895942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b5efdd44aa6381edbfa05480b4f44a?s=128&d=identicon&r=PG&f=1", "display_name": "John Feltz", "link": "https://stackoverflow.com/users/4895942/john-feltz"}, "edited": false, "score": 1, "creation_date": 1474393465, "post_id": 39600376, "comment_id": 66509477, "body": "@JohnFeltz I&#39;m just wondering if it&#39;s ok to put multiple conditions in one line after <code>unless</code> like that"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 8, "creation_date": 1474393467, "post_id": 39600376, "comment_id": 66509479, "body": "no matter if valid or not. it is unreadable. refactor, move your conditions into a method."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 490, "user_id": 4895942, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b3b5efdd44aa6381edbfa05480b4f44a?s=128&d=identicon&r=PG&f=1", "display_name": "John Feltz", "link": "https://stackoverflow.com/users/4895942/john-feltz"}, "edited": false, "score": 1, "creation_date": 1474414208, "post_id": 39600376, "comment_id": 66518846, "body": "Your example either raised an exception or returned a result that was not what you wanted. Which is it? That&#39;s important information, which is why @John&#39;s raised the question, which you have not answered. If you actually haven&#39;t run any code, you can answer your own question by simply running a few examples."}], "answers": [{"comments": [{"owner": {"reputation": 287, "user_id": 6303358, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/12db49057a225f57813bd64061e18933?s=128&d=identicon&r=PG&f=1", "display_name": "gemart", "link": "https://stackoverflow.com/users/6303358/gemart"}, "edited": false, "score": 1, "creation_date": 1474395823, "post_id": 39600992, "comment_id": 66510739, "body": "so something like     @sales_opportunities &lt;&lt; auction unless auction.belongs_to_current_user? || auction.includes_current_user_bid? || auction.doesnt_include_condition"}, {"owner": {"reputation": 145, "user_id": 4963694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfW4p.png?s=128&g=1", "display_name": "Captain Chaos", "link": "https://stackoverflow.com/users/4963694/captain-chaos"}, "reply_to_user": {"reputation": 287, "user_id": 6303358, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/12db49057a225f57813bd64061e18933?s=128&d=identicon&r=PG&f=1", "display_name": "gemart", "link": "https://stackoverflow.com/users/6303358/gemart"}, "edited": false, "score": 0, "creation_date": 1474401759, "post_id": 39600992, "comment_id": 66514157, "body": "See @SergioTulentsev &#39;s answer, he hits the nail on the head."}], "tags": [], "owner": {"reputation": 145, "user_id": 4963694, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/RfW4p.png?s=128&g=1", "display_name": "Captain Chaos", "link": "https://stackoverflow.com/users/4963694/captain-chaos"}, "is_accepted": true, "score": 4, "last_activity_date": 1474395104, "creation_date": 1474395104, "answer_id": 39600992, "question_id": 39600376, "link": "https://stackoverflow.com/questions/39600376/using-conditionals-in-one-line-in-rails/39600992#39600992", "title": "Using conditionals in one line in rails", "body": "<p>Some thoughts:</p>\n\n<ol>\n<li>You can certainly put multiple conditions into one line after \"unless\" </li>\n<li>If you do so, you may need to confirm they return the proper results, even with edge cases (make sure that the || or &amp;&amp; has the proper scope, you may want parens to be explicit)</li>\n<li>Nonetheless, this is pretty hard to read. I would suggest pulling those conditionals out and making each into its own method. This will make it more readable, and if you need those conditions elsewhere, it will make your code more DRY. </li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1474414737, "post_id": 39601415, "comment_id": 66518985, "body": "In this specific case, maybe the keyword <code>or</code> is more readable than <code>||</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1474435838, "post_id": 39601415, "comment_id": 66524318, "body": "@Aetherus: debatable. Me, I clench my teeth when I see <code>or</code> in a conditional :)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 2, "last_activity_date": 1474396600, "creation_date": 1474396600, "answer_id": 39601415, "question_id": 39600376, "link": "https://stackoverflow.com/questions/39600376/using-conditionals-in-one-line-in-rails/39601415#39601415", "title": "Using conditionals in one line in rails", "body": "<p>What @CaptainChaos and @PascalBetz said. At the very minimum, extract parts of that condition to local vars with descriptive names. Something like this:</p>\n\n<pre><code>insider_user     = auction.company == current_user\nuser_placed_bids = (auction.bids &amp; current_user.bids).present?\npart_matches     = auction.condition.include?(part.condition)\n\n@sales_opportunities &lt;&lt; auction unless insider_user || user_placed_bids || !part_matches\n</code></pre>\n\n<p>Now this looks much more manageable, heh?</p>\n"}], "owner": {"reputation": 287, "user_id": 6303358, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/12db49057a225f57813bd64061e18933?s=128&d=identicon&r=PG&f=1", "display_name": "gemart", "link": "https://stackoverflow.com/users/6303358/gemart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 39600992, "answer_count": 2, "score": 0, "last_activity_date": 1474396600, "creation_date": 1474392710, "question_id": 39600376, "link": "https://stackoverflow.com/questions/39600376/using-conditionals-in-one-line-in-rails", "title": "Using conditionals in one line in rails", "body": "<p>Is this a valid way to impose a condition on a statement? I was having trouble using multiple &amp;&amp;'s or ||'s when using it in one line the other day.</p>\n\n<pre><code>@sales_opportunities &lt;&lt; auction unless auction.company == current_user || !(auction.bids &amp; current_user.bids).empty? || !auction.condition.include?(part.condition)\n</code></pre>\n"}]