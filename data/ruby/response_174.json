[{"tags": ["ruby", "csv", "background-process"], "comments": [{"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 1, "creation_date": 1525909337, "post_id": 50263334, "comment_id": 87545033, "body": "&quot;I was planning to use a CSV file as a backlog of things to do.&quot; - is there a reason for this somewhat arbitrary design choice?  Because this seems much more like you want some component that specializes in storage, perhaps in things you might call tables, and in those tables you could have rows that represent your to-do items..."}, {"owner": {"reputation": 4476, "user_id": 735779, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/19ffcd943c2ed18b79482f29f13014f6?s=128&d=identicon&r=PG", "display_name": "Hartator", "link": "https://stackoverflow.com/users/735779/hartator"}, "reply_to_user": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "edited": false, "score": 1, "creation_date": 1525909575, "post_id": 50263334, "comment_id": 87545090, "body": "Was just going towards what I felt was the simpler at the time, but probably a regular database makes more sense. It seems overkill though."}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1525910448, "creation_date": 1525910448, "answer_id": 50263650, "question_id": 50263334, "link": "https://stackoverflow.com/questions/50263334/reading-and-writing-the-same-csv-file-in-ruby/50263650#50263650", "title": "Reading and Writing the same CSV file in Ruby", "body": "<p>For data persistence you would be, in most cases, best served to select a tool designed for the job, a database.  You've already named enough of a reason to not use the hand spun CSV design as it is memory inefficient and proposes more problems then it likely solves.  Also, depending on the amount of data you need to process via the 3rd part API, you may want to handle multi-threaded processes where reading/writing to a single file won't work.</p>\n\n<p>You might wanna checkout <a href=\"https://github.com/jeremyevans/sequel\" rel=\"nofollow noreferrer\">https://github.com/jeremyevans/sequel</a>  </p>\n"}, {"tags": [], "owner": {"reputation": 38092, "user_id": 18706, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/cabf735ce7b8b4471ef46ea54f71832d?s=128&d=identicon&r=PG", "display_name": "mahemoff", "link": "https://stackoverflow.com/users/18706/mahemoff"}, "is_accepted": false, "score": 3, "last_activity_date": 1525911437, "last_edit_date": 1525911437, "creation_date": 1525910908, "answer_id": 50263708, "question_id": 50263334, "link": "https://stackoverflow.com/questions/50263334/reading-and-writing-the-same-csv-file-in-ruby/50263708#50263708", "title": "Reading and Writing the same CSV file in Ruby", "body": "<p>I'd use an embedded database for this purpose, such as SQLite or LevelDB.</p>\n\n<p>Unlike a regular database, you'll still get many of the benefits of a CSV file, ie it can be stored in a single file/folder and without any server or permissioning hassle. At the same time, you'll get the benefit of better I/O characteristic than reading and writing a monolithic file upon each update ... the library should be smart enough to be able to index records, minimise changes, and store things in memory while buffering output.</p>\n"}], "owner": {"reputation": 4476, "user_id": 735779, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/19ffcd943c2ed18b79482f29f13014f6?s=128&d=identicon&r=PG", "display_name": "Hartator", "link": "https://stackoverflow.com/users/735779/hartator"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 766, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525925707, "creation_date": 1525907738, "last_edit_date": 1525925707, "question_id": 50263334, "link": "https://stackoverflow.com/questions/50263334/reading-and-writing-the-same-csv-file-in-ruby", "title": "Reading and Writing the same CSV file in Ruby", "body": "<p>I have some processing to do involving a third party API, and I was planning to use a CSV file as a backlog of things to do. </p>\n\n<p>Example</p>\n\n<pre><code>Task to do   Resulting file\n#1           data/1.json\n#2           data/2.json\n#3           \n</code></pre>\n\n<p>So, #1 and #2 are already done. I want to work on #3, and save the CSV file as soon as <code>data/3.json</code> is completed. </p>\n\n<p>As the task is unstable and error prone, I want to save progress after each task in the CSV file.</p>\n\n<p>I've written this script in Ruby, it's working well, but as tasks are numerous (> 100k), it's written couple Megabytes to disk each time a task is processed. The whole thing. It seems a good way to kill my HD:</p>\n\n<pre><code>class CSVResolver\n\n  require 'csv'\n\n  attr_accessor :csv_path\n\n  def initialize csv_path:\n    self.csv_path = csv_path\n  end\n\n  def resolve\n    csv = CSV.read(csv_path)\n    csv.each_with_index do |row, index|\n      next if row[1] # Don't do anything if we've already processed this task, and got a JSON data\n      json = very_expensive_task_and_error_prone\n      row[1] = \"/data/#{index}.json\"\n      File.write row[1], JSON.pretty_generate(json)\n      csv[index] = row\n      CSV.open(csv_path, \"wb\") do |old_csv|\n        csv.each do |row|\n          old_csv &lt;&lt; row\n        end\n      end\n      resolve\n    end\n  end\n\nend\n</code></pre>\n\n<p>Is there any way to improve on this, like making the write to CSV file atomic?</p>\n"}, {"tags": ["ruby", "rspec", "sleep"], "answers": [{"comments": [{"owner": {"reputation": 404, "user_id": 4898339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-sGdV0oV4vfk/AAAAAAAAAAI/AAAAAAAAAbI/VR3u5V41qlU/photo.jpg?sz=128", "display_name": "AutomateFr33k", "link": "https://stackoverflow.com/users/4898339/automatefr33k"}, "edited": false, "score": 0, "creation_date": 1525910296, "post_id": 50263610, "comment_id": 87545262, "body": "Does that mean anything that is written in all the contexts, gets ran first and then the IT blocks get executed sequentially?"}, {"owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "reply_to_user": {"reputation": 404, "user_id": 4898339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-sGdV0oV4vfk/AAAAAAAAAAI/AAAAAAAAAbI/VR3u5V41qlU/photo.jpg?sz=128", "display_name": "AutomateFr33k", "link": "https://stackoverflow.com/users/4898339/automatefr33k"}, "edited": false, "score": 1, "creation_date": 1525910628, "post_id": 50263610, "comment_id": 87545332, "body": "Well, not <i>anything</i> in the contexts.  You could, for example, define a function in a context, and that isn&#39;t going to get &quot;run&quot; until you call it.  Also, it&#39;s not entirely safe to assume that the <code>it</code> blocks are going to get executed sequentially (you can have rspec randomize the order of your tests)."}, {"owner": {"reputation": 404, "user_id": 4898339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-sGdV0oV4vfk/AAAAAAAAAAI/AAAAAAAAAbI/VR3u5V41qlU/photo.jpg?sz=128", "display_name": "AutomateFr33k", "link": "https://stackoverflow.com/users/4898339/automatefr33k"}, "edited": false, "score": 0, "creation_date": 1525910731, "post_id": 50263610, "comment_id": 87545358, "body": "Sweet, thanks for the explanations marc. What my tests are doing is invoking different apis via a method which i call in the context. In the IT block i have the assertions. When i was executing the suite, i could see that all the APIs have been executed and only the assertions are being taken cared of in a sequential manner.."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525910736, "post_id": 50263610, "comment_id": 87545359, "body": "Marc is correct.  In fact it&#39;s generally better to have your tests randomized.  Each unit should pass regardless of test order.  If not, it indicates the design is defective."}], "tags": [], "owner": {"reputation": 2031, "user_id": 670339, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/942f0170639d3fd6d2bd3a2ce057e3e7?s=128&d=identicon&r=PG", "display_name": "Marc Talbot", "link": "https://stackoverflow.com/users/670339/marc-talbot"}, "is_accepted": true, "score": 1, "last_activity_date": 1525910143, "creation_date": 1525910143, "answer_id": 50263610, "question_id": 50263134, "link": "https://stackoverflow.com/questions/50263134/rspec-examples-continue-to-run-in-spite-of-sleep-being-encountered/50263610#50263610", "title": "Rspec examples continue to run in spite of sleep being encountered", "body": "<p>The <code>puts</code> is being executed as rspec processes your file, not in conjunction to the tests being run.  To prove this to yourself, you could try referencing an undefined local variable after the <code>it</code> statement.</p>\n\n<p>For example:</p>\n\n<pre><code>context \"example 1\" do\n  puts \"hello\"\n  it \"example 1 it\" do        \n    sleep(50)\n  end\n  puts \"goodbye\" + cruel_world\nend\n</code></pre>\n\n<p>When you run rspec, you're going to see your \"hello\", followed by </p>\n\n<p><code>An error occurred while loading ./spec/your_spec.rb</code></p>\n\n<p>Followed by the NameError from referencing cruel_world.</p>\n"}], "owner": {"reputation": 404, "user_id": 4898339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://lh6.googleusercontent.com/-sGdV0oV4vfk/AAAAAAAAAAI/AAAAAAAAAbI/VR3u5V41qlU/photo.jpg?sz=128", "display_name": "AutomateFr33k", "link": "https://stackoverflow.com/users/4898339/automatefr33k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "accepted_answer_id": 50263610, "answer_count": 1, "score": -1, "last_activity_date": 1525931852, "creation_date": 1525906242, "last_edit_date": 1525931852, "question_id": 50263134, "link": "https://stackoverflow.com/questions/50263134/rspec-examples-continue-to-run-in-spite-of-sleep-being-encountered", "title": "Rspec examples continue to run in spite of sleep being encountered", "body": "<p>I have the following rspec</p>\n\n<pre><code>context \"example 1\" do\n  puts \"hello\"\n  it \"example 1 it\" do\n    sleep(50)\n  end\nend\ncontext \"example 2\" do\n  puts \"thanks\"\n  it \"example 2 it\"\nend\nend\n</code></pre>\n\n<p>When I run this using rake, I get the following output:</p>\n\n<pre><code>hello\nthanks\n\nexample 1\n example 1 it\n  &lt;&lt;waits for 50s &gt;&gt;\n</code></pre>\n\n<p>Why is <code>thanks</code> printed while it is sleeping for 50s? I expect <code>thanks</code> to be printed only after the sleep is over.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user7386116"}, "edited": false, "score": 0, "creation_date": 1525908315, "post_id": 50263053, "comment_id": 87544826, "body": "how can i get arround that"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7386116"}, "edited": false, "score": 0, "creation_date": 1525913680, "post_id": 50263053, "comment_id": 87545994, "body": "thank you , I did update the rails to version 5.0.0 and it worked.  now can u help how to add chromedriver path on bash"}, {"owner": {"user_type": "does_not_exist", "display_name": "user7386116"}, "edited": false, "score": 0, "creation_date": 1525913763, "post_id": 50263053, "comment_id": 87546017, "body": "i upgrade rails to 5.0.0 and it worked. thank you Rosalynn"}, {"owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "edited": false, "score": 1, "creation_date": 1525915159, "post_id": 50263053, "comment_id": 87546286, "body": "You&#39;re welcome. I&#39;m not familiar with Chromedriver. You could open a new question for that if you can&#39;t find anything addressing it already."}], "tags": [], "owner": {"reputation": 314, "user_id": 9440171, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/d45BA.jpg?s=128&g=1", "display_name": "ashwood", "link": "https://stackoverflow.com/users/9440171/ashwood"}, "is_accepted": true, "score": 1, "last_activity_date": 1525910373, "last_edit_date": 1525910373, "creation_date": 1525905710, "answer_id": 50263053, "question_id": 50262638, "link": "https://stackoverflow.com/questions/50262638/deprecation-warning-for-activesupport-gem/50263053#50263053", "title": "Deprecation Warning for ActiveSupport Gem", "body": "<p>It looks like your error is because of your ruby/rails versions. </p>\n\n<p>See <a href=\"https://github.com/rails/rails/issues/27670\" rel=\"nofollow noreferrer\">Rails issue on Github</a></p>\n\n<p>To update your rails/ruby versions:</p>\n\n<p>Ruby -- go to the <a href=\"http://www.ruby-lang.org/en/downloads/\" rel=\"nofollow noreferrer\">ruby</a> downloads page and follow the instructions for your operating system. </p>\n\n<p>Rails -- go to the github instructions for <a href=\"http://railsapps.github.io/updating-rails.html\" rel=\"nofollow noreferrer\">updating rails</a></p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user7386116"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1134, "favorite_count": 1, "accepted_answer_id": 50263053, "answer_count": 1, "score": 0, "last_activity_date": 1576609411, "creation_date": 1525903096, "last_edit_date": 1576609411, "question_id": 50262638, "link": "https://stackoverflow.com/questions/50262638/deprecation-warning-for-activesupport-gem", "title": "Deprecation Warning for ActiveSupport Gem", "body": "<p>I am trying to open a rails console and keep giving me that error :</p>\n\n<pre><code> roberto@Fofa-Dell:/mnt/c/Users/farid/skyscrapper$ rails c\n /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:121:\n warning: constant ::Fixnum is deprecated\n /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:121:\n warning: constant ::Bignum is deprecated\n /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:131:in\n `block (2 levels) in &lt;class:Numeric&gt;': stack level too deep\n (SystemStackError)\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:131:in\n `block (2 levels) in &lt;class:Numeric&gt;'\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:131:in\n `block (2 levels) in &lt;class:Numeric&gt;'\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:131:in\n `block (2 levels) in &lt;class:Numeric&gt;'\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:131:in\n `block (2 levels) in &lt;class:Numeric&gt;'\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:131:in\n `block (2 levels) in &lt;class:Numeric&gt;'\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:131:in\n `block (2 levels) in &lt;class:Numeric&gt;'\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:131:in\n `block (2 levels) in &lt;class:Numeric&gt;'\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/activesupport-4.2.6/lib/active_support/core_ext/numeric/conversions.rb:131:in\n `block (2 levels) in &lt;class:Numeric&gt;'\n          ... 4036 levels...\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/railties-4.2.6/lib/rails/commands/commands_tasks.rb:39:in\n `run_command!'\n         from /home/roberto/.rvm/gems/ruby-2.4.1/gems/railties-4.2.6/lib/rails/commands.rb:17:in\n `&lt;top (required)&gt;'\n         from bin/rails:4:in `require'\n         from bin/rails:4:in `&lt;main&gt;' roberto@Fofa-Dell:/mnt/c/Users/farid/skyscrapper$\n</code></pre>\n\n<p>Can someone tell me what I am missing? I installed all the required gems, stopped sprint, and I'm still getting this message. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-3"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525909684, "post_id": 50262161, "comment_id": 87545118, "body": "That appears to be a key-value pair from a hash, which is not an object (the reason for the downvote, I expect). You need to make it a hash by enclosing it in braces. (If you don&#39;t, whether reasonable or not, expect more downvotes). While you&#39;re at it I suggest you assign it to a variable (e.g, <code>h = { note_attributes.. }</code>) so readers can refer to the variable in answers and comments."}], "answers": [{"comments": [{"owner": {"reputation": 1159, "user_id": 4537254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n6OpD.jpg?s=128&g=1", "display_name": "Andr&#233; Guimar&#227;es Sakata", "link": "https://stackoverflow.com/users/4537254/andr%c3%a9-guimar%c3%a3es-sakata"}, "reply_to_user": {"reputation": 477, "user_id": 7143457, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/06721b829ae33597d11184e74caad1fb?s=128&d=identicon&r=PG&f=1", "display_name": "chris cozzens", "link": "https://stackoverflow.com/users/7143457/chris-cozzens"}, "edited": false, "score": 1, "creation_date": 1525901210, "post_id": 50262255, "comment_id": 87542705, "body": "I put the name of your variable as &quot;object&quot;, but it should be something else."}, {"owner": {"reputation": 1159, "user_id": 4537254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n6OpD.jpg?s=128&g=1", "display_name": "Andr&#233; Guimar&#227;es Sakata", "link": "https://stackoverflow.com/users/4537254/andr%c3%a9-guimar%c3%a3es-sakata"}, "reply_to_user": {"reputation": 477, "user_id": 7143457, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/06721b829ae33597d11184e74caad1fb?s=128&d=identicon&r=PG&f=1", "display_name": "chris cozzens", "link": "https://stackoverflow.com/users/7143457/chris-cozzens"}, "edited": false, "score": 1, "creation_date": 1525901264, "post_id": 50262255, "comment_id": 87542731, "body": "The variable name is not shown in your piece of code."}, {"owner": {"reputation": 477, "user_id": 7143457, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/06721b829ae33597d11184e74caad1fb?s=128&d=identicon&r=PG&f=1", "display_name": "chris cozzens", "link": "https://stackoverflow.com/users/7143457/chris-cozzens"}, "edited": false, "score": 0, "creation_date": 1525901295, "post_id": 50262255, "comment_id": 87542743, "body": "yeah i caught that and did replace it as well, but it still didnt work.  It gave me undefined method `[]&#39; for #&lt;ShopifyAPI::Order:0x00000000XXXXXXXX&gt; ( which is my object )"}, {"owner": {"reputation": 1159, "user_id": 4537254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n6OpD.jpg?s=128&g=1", "display_name": "Andr&#233; Guimar&#227;es Sakata", "link": "https://stackoverflow.com/users/4537254/andr%c3%a9-guimar%c3%a3es-sakata"}, "reply_to_user": {"reputation": 477, "user_id": 7143457, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/06721b829ae33597d11184e74caad1fb?s=128&d=identicon&r=PG&f=1", "display_name": "chris cozzens", "link": "https://stackoverflow.com/users/7143457/chris-cozzens"}, "edited": false, "score": 1, "creation_date": 1525901875, "post_id": 50262255, "comment_id": 87542927, "body": "Can you try <code>object.note_attributes[0].name</code>? Also, I suggest you put the class name <code>ShopifyAPI::Order</code> in the question. Are you using <code>shopify_api</code> gem? If so, add it as a tag."}], "tags": [], "owner": {"reputation": 1159, "user_id": 4537254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n6OpD.jpg?s=128&g=1", "display_name": "Andr&#233; Guimar&#227;es Sakata", "link": "https://stackoverflow.com/users/4537254/andr%c3%a9-guimar%c3%a3es-sakata"}, "is_accepted": false, "score": 1, "last_activity_date": 1525902913, "last_edit_date": 1525902913, "creation_date": 1525900947, "answer_id": 50262255, "question_id": 50262161, "link": "https://stackoverflow.com/questions/50262161/accessing-data-inside-hash-array/50262255#50262255", "title": "Accessing Data inside hash / array", "body": "<p><code>object[:note_attributes][0][:name]</code></p>\n\n<p>Update because of the comments:</p>\n\n<p><code>object.note_attributes[0].name</code></p>\n"}, {"tags": [], "owner": {"reputation": 938, "user_id": 5718794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ll2bM.jpg?s=128&g=1", "display_name": "Alex Dovzhanyn", "link": "https://stackoverflow.com/users/5718794/alex-dovzhanyn"}, "is_accepted": true, "score": 1, "last_activity_date": 1525901902, "creation_date": 1525901902, "answer_id": 50262442, "question_id": 50262161, "link": "https://stackoverflow.com/questions/50262161/accessing-data-inside-hash-array/50262442#50262442", "title": "Accessing Data inside hash / array", "body": "<p>You should be able to do <code>note_attributes[0].name</code> to access it</p>\n"}, {"tags": [], "owner": {"reputation": 11, "user_id": 9767611, "user_type": "unregistered", "profile_image": "https://www.gravatar.com/avatar/bce6453aca8346aca4e60babe7bd0595?s=128&d=identicon&r=PG", "display_name": "phil", "link": "https://stackoverflow.com/users/9767611/phil"}, "is_accepted": false, "score": 0, "last_activity_date": 1525902506, "creation_date": 1525902506, "answer_id": 50262541, "question_id": 50262161, "link": "https://stackoverflow.com/questions/50262161/accessing-data-inside-hash-array/50262541#50262541", "title": "Accessing Data inside hash / array", "body": "<p>You have an array with a single hash inside. So you need to access the first element of the array to get your hash like this: <code>note_attributes[0]</code> or <code>note_attributes.first</code>.</p>\n\n<p>Then you can access elements inside the hash. In this case, your keys are symbols, which look like this: <code>:name</code>. </p>\n\n<p>Ruby hashes used to look like: <code>{ :name =&gt; \"Order_Count\" }</code>, but now you can use a colon instead of the arrow. Ruby makes it look especially nice when you use a symbol as a key and lets you do: <code>{ name: \"Order_Count\" }</code> (which is what you have done).</p>\n\n<p>So, to get the attribute with the key <code>:name</code> out of the hash in your array you would do this:</p>\n\n<pre><code>note_attributes[0][:name]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>note_attributes.first[:name]\n</code></pre>\n"}], "owner": {"reputation": 477, "user_id": 7143457, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/06721b829ae33597d11184e74caad1fb?s=128&d=identicon&r=PG&f=1", "display_name": "chris cozzens", "link": "https://stackoverflow.com/users/7143457/chris-cozzens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 425, "favorite_count": 0, "accepted_answer_id": 50262442, "answer_count": 3, "score": -2, "last_activity_date": 1525930384, "creation_date": 1525900472, "last_edit_date": 1525930384, "question_id": 50262161, "link": "https://stackoverflow.com/questions/50262161/accessing-data-inside-hash-array", "title": "Accessing Data inside hash / array", "body": "<p>Hello I have the following object ( simplified for example sake )</p>\n\n<pre><code>object = { note_attributes: [{ name: \"Order_Count\", value: 2 }] }\n</code></pre>\n\n<p>I am looking to access specifically the <code>\"Order_Count\"</code>. How do I do this in my rails app?</p>\n\n<p>I have tried <code>note_attributes.name</code> and <code>note_attributes[name]</code> but I have not had any luck.  </p>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 1159, "user_id": 4537254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n6OpD.jpg?s=128&g=1", "display_name": "Andr&#233; Guimar&#227;es Sakata", "link": "https://stackoverflow.com/users/4537254/andr%c3%a9-guimar%c3%a3es-sakata"}, "edited": false, "score": 1, "creation_date": 1525902845, "post_id": 50262473, "comment_id": 87543251, "body": "You&#39;re not able to call <code>Front.new.run!</code>, but use <code>Front.run!</code> instead."}, {"owner": {"reputation": 938, "user_id": 5718794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ll2bM.jpg?s=128&g=1", "display_name": "Alex Dovzhanyn", "link": "https://stackoverflow.com/users/5718794/alex-dovzhanyn"}, "reply_to_user": {"reputation": 1159, "user_id": 4537254, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/n6OpD.jpg?s=128&g=1", "display_name": "Andr&#233; Guimar&#227;es Sakata", "link": "https://stackoverflow.com/users/4537254/andr%c3%a9-guimar%c3%a3es-sakata"}, "edited": false, "score": 1, "creation_date": 1525909110, "post_id": 50262473, "comment_id": 87544992, "body": "Edited to match your comment above"}], "tags": [], "owner": {"reputation": 938, "user_id": 5718794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ll2bM.jpg?s=128&g=1", "display_name": "Alex Dovzhanyn", "link": "https://stackoverflow.com/users/5718794/alex-dovzhanyn"}, "is_accepted": true, "score": 3, "last_activity_date": 1525909044, "last_edit_date": 1525909044, "creation_date": 1525902094, "answer_id": 50262473, "question_id": 50262133, "link": "https://stackoverflow.com/questions/50262133/how-to-configure-sinatra-app-from-the-outside/50262473#50262473", "title": "How to configure Sinatra app from the outside?", "body": "<p>You have to pass the option in <em>before</em> initializing. The following should work:</p>\n\n<pre><code>Front.set :foo, 'Hello, world!'\napp = Front.run!\n</code></pre>\n\n<p>I've done this in one of my projects here: <a href=\"https://github.com/alexdovzhanyn/odyn/blob/f6f88d68dd9738b4857c26c185829ccd1190d423/nodelauncher.thor#L7\" rel=\"nofollow noreferrer\">https://github.com/alexdovzhanyn/odyn/blob/f6f88d68dd9738b4857c26c185829ccd1190d423/nodelauncher.thor#L7</a></p>\n"}], "owner": {"reputation": 93455, "user_id": 187141, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f9e28dc83496320c87c55b3cf988ab60?s=128&d=identicon&r=PG", "display_name": "yegor256", "link": "https://stackoverflow.com/users/187141/yegor256"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 50262473, "answer_count": 1, "score": 0, "last_activity_date": 1525909044, "creation_date": 1525900329, "question_id": 50262133, "link": "https://stackoverflow.com/questions/50262133/how-to-configure-sinatra-app-from-the-outside", "title": "How to configure Sinatra app from the outside?", "body": "<p>This is my code:</p>\n\n<pre><code>require 'sinatra/base'\nclass Front &lt; Sinatra::Base\n  get '/' do\n    settings.foo\n  end\nend\n</code></pre>\n\n<p>I'm running it like this:</p>\n\n<pre><code>app = Front.new\napp.set(:foo, 'Hello, world!') // doesn't work!\napp.run!\n</code></pre>\n\n<p>I want to inject that <code>foo</code> into the app somehow and pre-configure <a href=\"http://sinatrarb.com/configuration.html\" rel=\"nofollow noreferrer\">other params</a> before running. I'm getting:</p>\n\n<pre><code>undefined method `set' for #&lt;Sinatra::Wrapper:0x007fea3729a990&gt;\nDid you mean?  send (NoMethodError)\n</code></pre>\n\n<p>What's wrong?</p>\n"}, {"tags": ["ruby", "rvm", "linux-mint"], "answers": [{"comments": [{"owner": {"reputation": 75, "user_id": 2499073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e0c9411432ba81396f276fb3aa74e9?s=128&d=identicon&r=PG", "display_name": "NaNCat", "link": "https://stackoverflow.com/users/2499073/nancat"}, "edited": false, "score": 0, "creation_date": 1525901685, "post_id": 50261952, "comment_id": 87542867, "body": "That just gives me sudo&#39;s usage instructions."}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "reply_to_user": {"reputation": 75, "user_id": 2499073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e0c9411432ba81396f276fb3aa74e9?s=128&d=identicon&r=PG", "display_name": "NaNCat", "link": "https://stackoverflow.com/users/2499073/nancat"}, "edited": false, "score": 0, "creation_date": 1525902068, "post_id": 50261952, "comment_id": 87542993, "body": "put your argument on the end of the line; <code>requirements</code>."}], "tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": true, "score": 2, "last_activity_date": 1525899521, "creation_date": 1525899521, "answer_id": 50261952, "question_id": 50261866, "link": "https://stackoverflow.com/questions/50261866/rvm-requirements-not-working/50261952#50261952", "title": "rvm requirements not working", "body": "<p>Bypassing the standard warnings about abusing <code>sudo</code>, the <code>bash</code> hack</p>\n\n<pre><code>sudo `which rvm`\n</code></pre>\n\n<p>worked for me.</p>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 2420206, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d0b265e4eb7c20ec2555265dcfffd157?s=128&d=identicon&r=PG", "display_name": "texdevelopers", "link": "https://stackoverflow.com/users/2420206/texdevelopers"}, "is_accepted": false, "score": 0, "last_activity_date": 1525925533, "creation_date": 1525925533, "answer_id": 50265353, "question_id": 50261866, "link": "https://stackoverflow.com/questions/50261866/rvm-requirements-not-working/50265353#50265353", "title": "rvm requirements not working", "body": "<p>Have you seen this solution here ? RVM depends on apt-get update to return without any errors: <a href=\"https://stackoverflow.com/questions/23650992/ruby-rvm-apt-get-update-error\">Ruby RVM apt-get update error</a></p>\n\n<p>If you have errors running apt-get update, then the above link can fix your issues. The issue may be as mundane as one of your repositories being down for another, and unrelated, software on your computer</p>\n"}], "owner": {"reputation": 75, "user_id": 2499073, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e0e0c9411432ba81396f276fb3aa74e9?s=128&d=identicon&r=PG", "display_name": "NaNCat", "link": "https://stackoverflow.com/users/2499073/nancat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 377, "favorite_count": 0, "accepted_answer_id": 50261952, "answer_count": 2, "score": 1, "last_activity_date": 1525925533, "creation_date": 1525899147, "question_id": 50261866, "link": "https://stackoverflow.com/questions/50261866/rvm-requirements-not-working", "title": "rvm requirements not working", "body": "<p>I'm using Linux Mint 17.3 and I'm trying to upgrade ruby to 2.4 using this guide: <a href=\"https://tecadmin.net/install-ruby-on-rails-on-ubuntu/\" rel=\"nofollow noreferrer\">https://tecadmin.net/install-ruby-on-rails-on-ubuntu/</a></p>\n\n<p>The problem is that when I get to the step \"Install Ruby Dependencies\" and run <code>rvm requirements</code>, I get this error:</p>\n\n<pre><code>Checking requirements for mint.\nInstalling requirements for mint.\nmkdir: cannot create directory \u2018/usr/local/rvm/log/1525898101\u2019: Permission denied\ntee: /usr/local/rvm/log/1525898101/update_system.log: No such file or directory\nUpdating system..................\nError running 'requirements_debian_update_system ',\nplease read /usr/local/rvm/log/1525898101/update_system.log\nRequirements installation failed with status: 1.\n</code></pre>\n\n<p>Since I got \"permission denied\" when trying to write to a system directory, I next tried <code>sudo rvm requirements</code>, which gave me this error:</p>\n\n<pre><code>sudo: rvm: command not found\n</code></pre>\n\n<p>A few web searches later revealed that there's actually something called <code>rvmsudo</code>, but that doesn't help, either:</p>\n\n<pre><code>rvmsudo requirements\nsudo: requirements: command not found\n</code></pre>\n\n<p>What do I need to fix in order to get <code>rvm requirements</code> to run without errors?</p>\n"}, {"tags": ["json", "ruby", "sinatra", "locals"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525911777, "post_id": 50261861, "comment_id": 87545613, "body": "Why do you need to pass locals unless are you rendering a partial in your erb?  Can you post the erb code?"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 0, "last_activity_date": 1525912046, "creation_date": 1525912046, "answer_id": 50263828, "question_id": 50261861, "link": "https://stackoverflow.com/questions/50261861/sinatra-locals-not-displaying-in-erb/50263828#50263828", "title": "Sinatra - Locals not displaying in erb", "body": "<p>If you want to output the string version of your object in erb you can do</p>\n\n<pre><code>&lt;%= results.inspect %&gt;\n</code></pre>\n\n<p>But you probably just need it as a string so try change</p>\n\n<pre><code>@resp = JSON.pretty_generate(JSON.parse(json))\n</code></pre>\n\n<p>to </p>\n\n<pre><code>@resp = JSON.parse(json).to_s\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 9767322, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-gZheZS9S23Q/AAAAAAAAAAI/AAAAAAAAFqk/ujwkLX2u3yY/photo.jpg?sz=128", "display_name": "skmen", "link": "https://stackoverflow.com/users/9767322/skmen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 50263828, "answer_count": 1, "score": 0, "last_activity_date": 1525912046, "creation_date": 1525899124, "question_id": 50261861, "link": "https://stackoverflow.com/questions/50261861/sinatra-locals-not-displaying-in-erb", "title": "Sinatra - Locals not displaying in erb", "body": "<p>I have JSON that I want to display in a  tag on my submitted.erb but I can't get it to display.  When I PUT the JSON, I see the entirety of the parsed JSON in the console.</p>\n\n<p>Here's the flow:</p>\n\n<ol>\n<li>User submits a form from myform.erb</li>\n<li>In my post, the following is done with the JSON:</li>\n</ol>\n\n<p><code>put '/' do\n    require json\n    ...\n    @resp = JSON.pretty_generate(JSON.parse(json))\n    redirect \"/submitted/\"\nend</p>\n\n<p>get '/submitted/?' do\n    erb :submitted, :locals => {:results => @resp}\nend</code></p>\n\n<p>Then in my submitted.erb I have &lt;%= results %> in my pre tags.</p>\n"}, {"tags": ["ruby", "rest", "firebase", "google-api", "firebase-dynamic-links"], "comments": [{"owner": {"reputation": 18896, "user_id": 819314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d1af0e885746e39195c8ff3234f47d?s=128&d=identicon&r=PG", "display_name": "Ian Barber", "link": "https://stackoverflow.com/users/819314/ian-barber"}, "edited": false, "score": 1, "creation_date": 1525899741, "post_id": 50261812, "comment_id": 87542102, "body": "Is there an easy way to dump out the raw request that is being sent (ideally URL, headers and request body, though feel free to scrub auth header!)?"}, {"owner": {"reputation": 18896, "user_id": 819314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d1af0e885746e39195c8ff3234f47d?s=128&d=identicon&r=PG", "display_name": "Ian Barber", "link": "https://stackoverflow.com/users/819314/ian-barber"}, "edited": false, "score": 0, "creation_date": 1525899982, "post_id": 50261812, "comment_id": 87542204, "body": "Also, looking at the docs (<a href=\"https://firebase.google.com/docs/reference/dynamic-links/link-shortener\" rel=\"nofollow noreferrer\">firebase.google.com/docs/reference/dynamic-links/link-short&zwnj;&#8203;ener</a>) we don&#39;t highlight &quot;name&quot; - can you see if just passing the longDynamicLink helps?"}, {"owner": {"reputation": 621, "user_id": 498080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47915548cbcc438c8407595935951a6b?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/498080/cameron"}, "reply_to_user": {"reputation": 18896, "user_id": 819314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d1af0e885746e39195c8ff3234f47d?s=128&d=identicon&r=PG", "display_name": "Ian Barber", "link": "https://stackoverflow.com/users/819314/ian-barber"}, "edited": false, "score": 0, "creation_date": 1525903162, "post_id": 50261812, "comment_id": 87543337, "body": "@IanBarber sadly removing the <code>name</code> parameter results in <code>badRequest: Request contains an invalid argument.</code> (which doesn&#39;t make sense to me). It appears the <code>v1&#47;managedShortLinks:create</code> endpoint isn&#39;t documented, but it <i>is</i> mentioned in the service discovery document. I&#39;ll work on getting a raw request."}, {"owner": {"reputation": 18896, "user_id": 819314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d1af0e885746e39195c8ff3234f47d?s=128&d=identicon&r=PG", "display_name": "Ian Barber", "link": "https://stackoverflow.com/users/819314/ian-barber"}, "edited": false, "score": 0, "creation_date": 1525903252, "post_id": 50261812, "comment_id": 87543369, "body": "Michael&#39;s answer below is right (he works on Dynamic Links directly)! The managedshortlink API isn&#39;t currently available (though it is in the API, we don&#39;t document it), hence the error."}, {"owner": {"reputation": 621, "user_id": 498080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47915548cbcc438c8407595935951a6b?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/498080/cameron"}, "reply_to_user": {"reputation": 18896, "user_id": 819314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d1af0e885746e39195c8ff3234f47d?s=128&d=identicon&r=PG", "display_name": "Ian Barber", "link": "https://stackoverflow.com/users/819314/ian-barber"}, "edited": false, "score": 0, "creation_date": 1525903771, "post_id": 50261812, "comment_id": 87543540, "body": "Ah ok, I wondered about that. Is there any way to create a dynamic link that shows up in the Firebase console then?"}, {"owner": {"reputation": 18896, "user_id": 819314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d1af0e885746e39195c8ff3234f47d?s=128&d=identicon&r=PG", "display_name": "Ian Barber", "link": "https://stackoverflow.com/users/819314/ian-barber"}, "edited": false, "score": 0, "creation_date": 1525911576, "post_id": 50261812, "comment_id": 87545575, "body": "There is not right now, sorry - we&#39;re looking into getting that exposed (as you found), but nothing usable right now."}, {"owner": {"reputation": 621, "user_id": 498080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47915548cbcc438c8407595935951a6b?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/498080/cameron"}, "reply_to_user": {"reputation": 18896, "user_id": 819314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d1af0e885746e39195c8ff3234f47d?s=128&d=identicon&r=PG", "display_name": "Ian Barber", "link": "https://stackoverflow.com/users/819314/ian-barber"}, "edited": false, "score": 0, "creation_date": 1525923561, "post_id": 50261812, "comment_id": 87548176, "body": "Ok, thanks for letting me know. If you can share, any idea when that API will be ready?"}, {"owner": {"reputation": 621, "user_id": 498080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47915548cbcc438c8407595935951a6b?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/498080/cameron"}, "reply_to_user": {"reputation": 18896, "user_id": 819314, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47d1af0e885746e39195c8ff3234f47d?s=128&d=identicon&r=PG", "display_name": "Ian Barber", "link": "https://stackoverflow.com/users/819314/ian-barber"}, "edited": false, "score": 0, "creation_date": 1525973804, "post_id": 50261812, "comment_id": 87573610, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/170802/discussion-between-cameron-and-ian-barber\">continue this discussion in chat</a>."}], "answers": [{"comments": [{"owner": {"reputation": 621, "user_id": 498080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47915548cbcc438c8407595935951a6b?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/498080/cameron"}, "edited": false, "score": 0, "creation_date": 1525902527, "post_id": 50262179, "comment_id": 87543145, "body": "Unfortunately <code>CreateShortDynamicLinkRequest</code> uses the <code>shortLink</code> endpoint, which doesn&#39;t create a managed link and therefore doesn&#39;t show up in the Firebase console. I assume that&#39;s why it doesn&#39;t accept a <code>name</code> parameter either, since names are only useful for managed links."}, {"owner": {"reputation": 621, "user_id": 498080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47915548cbcc438c8407595935951a6b?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/498080/cameron"}, "edited": false, "score": 0, "creation_date": 1525973866, "post_id": 50262179, "comment_id": 87573646, "body": "Sadly because the managed link API isn&#39;t ready yet, this is the correct answer. Thanks @michael-hermanto."}, {"owner": {"reputation": 3001, "user_id": 671580, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/ce9e871134885854d5c3e3ab5fa83c3b?s=128&d=identicon&r=PG", "display_name": "shelll", "link": "https://stackoverflow.com/users/671580/shelll"}, "edited": false, "score": 1, "creation_date": 1529394449, "post_id": 50262179, "comment_id": 88845553, "body": "Anything new about exposing the managed short links API? We would like to create URLs with custom suffix via REST API. Thanks."}, {"owner": {"reputation": 1438, "user_id": 2417756, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/hnmhE.png?s=128&g=1", "display_name": "Waclock", "link": "https://stackoverflow.com/users/2417756/waclock"}, "edited": false, "score": 0, "creation_date": 1588199429, "post_id": 50262179, "comment_id": 108812370, "body": "They&#39;re not interchangeable though, I&#39;d love the ability to create a link with custom_suffix via REST API."}, {"owner": {"reputation": 801, "user_id": 5284473, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/3elQj.png?s=128&g=1", "display_name": "S. Roose", "link": "https://stackoverflow.com/users/5284473/s-roose"}, "edited": false, "score": 0, "creation_date": 1589960548, "post_id": 50262179, "comment_id": 109496414, "body": "Still waiting for the managedShortLinks to be exposed correctly #askFirebase"}], "tags": [], "owner": {"reputation": 12, "user_id": 9237758, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-GYtf1rbUks4/AAAAAAAAAAI/AAAAAAABBgU/0UYt9HNZ05Q/photo.jpg?sz=128", "display_name": "Michael Hermanto", "link": "https://stackoverflow.com/users/9237758/michael-hermanto"}, "is_accepted": true, "score": -3, "last_activity_date": 1525911064, "last_edit_date": 1525911064, "creation_date": 1525900576, "answer_id": 50262179, "question_id": 50261812, "link": "https://stackoverflow.com/questions/50261812/why-am-i-getting-a-server-error-from-the-firebase-dynamic-links-api/50262179#50262179", "title": "Why am I getting a server error from the Firebase dynamic links API?", "body": "<p>Please use <code>CreateShortDynamicLinkRequest</code> instead of <code>CreateManagedShortLinkRequest</code>.</p>\n"}], "owner": {"reputation": 621, "user_id": 498080, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/47915548cbcc438c8407595935951a6b?s=128&d=identicon&r=PG", "display_name": "Cameron", "link": "https://stackoverflow.com/users/498080/cameron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1188, "favorite_count": 0, "accepted_answer_id": 50262179, "answer_count": 1, "score": 2, "last_activity_date": 1525911064, "creation_date": 1525898940, "question_id": 50261812, "link": "https://stackoverflow.com/questions/50261812/why-am-i-getting-a-server-error-from-the-firebase-dynamic-links-api", "title": "Why am I getting a server error from the Firebase dynamic links API?", "body": "<p>I'm trying to create a managed dynamic link using the Firebase API and the <a href=\"https://github.com/google/google-api-ruby-client\" rel=\"nofollow noreferrer\">google-api-client Ruby gem</a>. Here's the code I'm using, complete with an inline Gemfile for easier testing:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>require 'bundler/inline'\n\ngemfile(true) do\n  gem 'google-api-client', '~&gt; 0.20'\nend\n\nrequire 'google/apis/firebasedynamiclinks_v1'\nrequire 'cgi'\n\ninclude Google::Apis::FirebasedynamiclinksV1\n\nservice = FirebaseDynamicLinksService.new.tap do |service|\n  service.authorization = Google::Auth::DefaultCredentials.make_creds(\n    json_key_io: File.open('path/to/auth.json'),\n    scope: ['https://www.googleapis.com/auth/firebase']\n  )\n\n  # do this until https://github.com/google/google-api-ruby-client/issues/652\n  # is fixed\n  service.instance_variable_set(\n    :@root_url, 'https://firebasedynamiclinks.googleapis.com/'\n  )\nend\n\nlink = CGI.escape('http://example.com')\n\nrequest = CreateManagedShortLinkRequest.new(\n  long_dynamic_link: \"https://f4w25.app.goo.gl/?link=#{link}&amp;ibi=com.foo.bar\",\n  name: 'Test test'\n)\n\nservice.create_managed_short_link(request)\n</code></pre>\n\n<p>This script errors with <code>Server error (Google::Apis::ServerError)</code>. The body of the response is:</p>\n\n<pre><code>{\n  \"error\": {\n    \"code\": 500,\n    \"message\": \"Internal error encountered.\",\n    \"errors\": [\n      {\n        \"message\": \"Internal error encountered.\",\n        \"domain\": \"global\",\n        \"reason\": \"backendError\"\n      }\n    ],\n    \"status\": \"INTERNAL\"\n  }\n}\n</code></pre>\n"}, {"tags": ["ruby", "rspec", "capybara", "screenshot"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": true, "score": 2, "last_activity_date": 1525899329, "creation_date": 1525899329, "answer_id": 50261910, "question_id": 50261681, "link": "https://stackoverflow.com/questions/50261681/screenshots-not-being-auto-generated-with-ruby-rspec/50261910#50261910", "title": "Screenshots not being auto generated with Ruby-Rspec", "body": "<p>You should be able to do that in an RSpec after block.  You can define that in your RSpec configuration, etc and should basically boil down to</p>\n\n<pre><code>after(:each) do |example|\n  if example.exception\n     # Do whatever you want to happen on failure\n     Capybara.current_session.save_and_open_screenshot\n  end \nend\n</code></pre>\n\n<p>You'd need that block to run before you reset the session, so it needs to be defined after whatever block you have defined for doing the reset.</p>\n"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 50261910, "answer_count": 1, "score": 0, "last_activity_date": 1525899329, "creation_date": 1525898447, "question_id": 50261681, "link": "https://stackoverflow.com/questions/50261681/screenshots-not-being-auto-generated-with-ruby-rspec", "title": "Screenshots not being auto generated with Ruby-Rspec", "body": "<p>I am using Ruby Rspec to test a webapp that doesn't use rails, thus I don't have a rails_helper.rb, just a spec_helper.rb. I can manually trigger a screenshot but I can't figure out how to trigger the screenshots on a failure.</p>\n\n<p><strong>spec_helper.rb:</strong></p>\n\n<pre><code># frozen-string-literal: true\nrequire 'rspec'\nrequire 'capybara/rspec'\nrequire 'capybara-screenshot/rspec'\nrequire 'capybara/dsl'\nrequire 'selenium-webdriver'\nrequire 'site_prism'\n\nDir[File.dirname(__FILE__) + '/page_objects/*/*.rb'].each do |page_object|\n  require page_object\nend\n\nCapybara.register_driver :selenium do |app|\n Capybara::Selenium::Driver.new(app, browser: :chrome)\nend\n\nCapybara.save_path = \"#{Dir.pwd}/screenshots\"\n\nCapybara.default_driver = :selenium\nCapybara.app_host = \"REDACTED\"\nCapybara.default_max_wait_time = 20\n</code></pre>\n\n<p><strong>my_spec.rb</strong></p>\n\n<pre><code>describe 'spec' do\n    before(:each) do\n      @my_page = login_and_open_my_page\n    end\n    it \"fails\" do\n       expect(5).to eq(6)\n    end\nend\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525898421, "post_id": 50261665, "comment_id": 87541470, "body": "Edit your post and reveal what breed of database you use. SQLite? MySQL?"}, {"owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525898557, "post_id": 50261665, "comment_id": 87541538, "body": "@phlip PostgreSQL, apologies"}], "answers": [{"tags": [], "owner": {"reputation": 43225, "user_id": 297087, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/17b3a5816f0647e9b0f7c49d60f93e7b?s=128&d=identicon&r=PG", "display_name": "Salil", "link": "https://stackoverflow.com/users/297087/salil"}, "is_accepted": false, "score": 1, "last_activity_date": 1525898808, "creation_date": 1525898808, "answer_id": 50261784, "question_id": 50261665, "link": "https://stackoverflow.com/questions/50261665/rails-5-ordering-by-created-at-but-show-nulls-last-of-another-column/50261784#50261784", "title": "Rails 5 - Ordering by created_at but show nulls last of another column", "body": "<p>Try something like following </p>\n\n<pre><code>SELECT field1, field2,\n  CASE\n    WHEN base_price IS NOT NULL THEN 1\n    ELSE 0\n  END \n  AS field3\nFROM services\nORDER BY (field3 DESC, created_at DESC)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 3, "last_activity_date": 1525898813, "creation_date": 1525898813, "answer_id": 50261786, "question_id": 50261665, "link": "https://stackoverflow.com/questions/50261665/rails-5-ordering-by-created-at-but-show-nulls-last-of-another-column/50261786#50261786", "title": "Rails 5 - Ordering by created_at but show nulls last of another column", "body": "<p>Use a case statement to specify all base_price non-null as 1 and all base_price null as 2 so they get sorted as two groups, 1 and 2.  Within the groups you can sort by created_at descending. </p>\n\n<pre><code>Service.order('CASE WHEN base_price IS NULL THEN 2 ELSE 1 END, created_at DESC')\n</code></pre>\n"}], "owner": {"reputation": 1218, "user_id": 4592910, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/d1558928d220b4f7302dca2fe2c38ce7?s=128&d=identicon&r=PG&f=1", "display_name": "Kathan", "link": "https://stackoverflow.com/users/4592910/kathan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 636, "favorite_count": 0, "accepted_answer_id": 50261786, "answer_count": 2, "score": 0, "last_activity_date": 1525898813, "creation_date": 1525898360, "last_edit_date": 1525898505, "question_id": 50261665, "link": "https://stackoverflow.com/questions/50261665/rails-5-ordering-by-created-at-but-show-nulls-last-of-another-column", "title": "Rails 5 - Ordering by created_at but show nulls last of another column", "body": "<p>Using Rails 5, with PostgreSQL. </p>\n\n<p>What I am trying to do: </p>\n\n<p>I have a <code>Service</code> model, with <code>created_at</code> and <code>base_price</code> attributes.</p>\n\n<p>I would like to order them by creation date but if the base price is <code>nil</code>, then keep those at the bottom, also ordered by creation.</p>\n\n<p>I have tried something like this:</p>\n\n<pre><code>Service.order('created_at DESC, base_price NULLS LAST')\n</code></pre>\n\n<p>but this does not achieve what I am looking for. </p>\n\n<p>Any help would be appreciated. I know there is a similar question, but there is no explanation and I am having a hard time implementing it.\nThanks! </p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1525894757, "post_id": 50260869, "comment_id": 87539773, "body": "Check all name parts individually: <code>selection.split(&quot; &quot;).all?{|name| str.include?(name)}</code>"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525894784, "post_id": 50260869, "comment_id": 87539778, "body": "@SergioTulentsev I need a regex solution, because ultimately I have to put this in a Mongoid query which requires regex."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 1, "creation_date": 1525894796, "post_id": 50260869, "comment_id": 87539785, "body": "Use lookaheads: <code>^(?=.*John)(?=.*Zeni)</code>"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1525894842, "post_id": 50260869, "comment_id": 87539812, "body": "Why use <code>Regexp.quote</code>? Do you have special chars to account for?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1525894933, "post_id": 50260869, "comment_id": 87539857, "body": "&quot;which requires regex.&quot; - not necessarily. Even in mongodb, you can combine invidual clauses with <code>$and</code>"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1525895137, "post_id": 50260869, "comment_id": 87539956, "body": "Try <code>pattern = Regexp.new(&quot;(?m)\\\\A(?=.*\\\\b#{selection.split(&#47;\\s+&#47;).join(&quot;\\\\&zwnj;&#8203;b)(?=.*\\\\b&quot;)}\\\\b)&quot;)</code>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1525895301, "post_id": 50260869, "comment_id": 87540023, "body": "@WiktorStribi\u017cew: I&#39;m not too well-versed in regex but doesn&#39;t this pattern assume word order? All examples show ordered match, but it&#39;s not explicitly specified in the question. :shrug:"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525895387, "post_id": 50260869, "comment_id": 87540065, "body": "@SergioTulentsev It creates the <a href=\"https://regex101.com/r/QHj6kN/2\" rel=\"nofollow noreferrer\"><code>(?m-ix:\\A(?=.*\\bJohn\\b)(?=.*\\bZeni\\b))</code></a> regex. It checks for the items (whole words) in any order."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525895854, "post_id": 50260869, "comment_id": 87540286, "body": "@SergioTulentsev order does not matter"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525896825, "post_id": 50260869, "comment_id": 87540737, "body": "I just read your comment about a regex being required. If so, that should be stated in the question itself."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525896874, "post_id": 50260869, "comment_id": 87540751, "body": "@CarySwoveland it is stated now."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525898163, "post_id": 50260869, "comment_id": 87541324, "body": "Could you work around the problem using lookaheads?"}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525898418, "post_id": 50260869, "comment_id": 87541466, "body": "@SergioTulentsev something like this would work in mongodb: Contact.where(name: /John/).and(name: /Zeni/). But I am dealing with an arbitrary number of words."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1525900252, "post_id": 50260869, "comment_id": 87542317, "body": "@WiktorStribi\u017cew, do you need the anchor <code>\\A</code> in your regex? Note that you are missing a double quote in <code>join</code>. I suggest you post this as an answer."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525900467, "post_id": 50260869, "comment_id": 87542412, "body": "@CarySwoveland All double quotes are there. The code is tested and working. Yes, <code>\\A</code> is very important, it makes the engine check for these requirements only once."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525900971, "post_id": 50260869, "comment_id": 87542607, "body": "@Wictor, I misread the <code>join</code>. Could you elaborate on your second sentence (and please do so in an answer)? I assume one is using, say, <code>match?</code>. If the string is multiline does the regex engine not check each lookahead in turn, searching the entire string for a match (without <code>\\A</code>)?"}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1525896566, "post_id": 50261066, "comment_id": 87540627, "body": "You may wish to generalize this so that it would work with an arbitrary number of words that must be contained in the string."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525896828, "post_id": 50261066, "comment_id": 87540740, "body": "Thank you. I may leave the code part alone since I don&#39;t Ruby."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525898285, "post_id": 50261066, "comment_id": 87541398, "body": "Yes @CarySwoveland is right. There will be an arbitrary number of words. It will not always be two. That is why I was trying to incorporate Regexp.quote."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1525901554, "post_id": 50261066, "comment_id": 87542820, "body": "@Donato If you are not sure about words, I used <code>map</code> to apply <code>Regexp.quote</code> for each word."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525907875, "post_id": 50261066, "comment_id": 87544718, "body": "You need word breaks so that <code>&quot;Paul&quot;</code> in <code>string</code> won&#39;t match <code>&quot;Paula&quot;</code> in the test string."}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": true, "score": 1, "last_activity_date": 1525901474, "last_edit_date": 1525901474, "creation_date": 1525895566, "answer_id": 50261066, "question_id": 50260869, "link": "https://stackoverflow.com/questions/50260869/match-multiple-words-anywhere-in-string/50261066#50261066", "title": "Match multiple words anywhere in string", "body": "<p>Use positive lookaheads to simulate <code>AND</code>:</p>\n\n<pre><code>string = \"Paul Zach\"\nre = '^(?=.*' + string.split(/\\s+/).map{ |x| Regexp.quote(x) }.join(')(?=.*') + ')'\n\"John Paul Mak Zach Jack Zen\" =~ /#{re}/\n</code></pre>\n\n<p>If matching through multiple lines is a need, enable <code>m</code> flag or use <code>[\\s\\S]</code> instead of <code>.</code>. You can ensure that words are not within other words using <code>\\b</code> token around them.</p>\n\n<p>Note: Order doesn't matter.</p>\n"}, {"comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525896742, "post_id": 50261136, "comment_id": 87540699, "body": "Do you think OP doesn&#39;t want to find a match on <code>John Paul,Zeni</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525897325, "post_id": 50261136, "comment_id": 87540929, "body": "@revo, if the string may contain punctuation I would suggest those characters be removed as a pre-processing step (<code>str.gsub(&#47;[[:punct:]]&#47;, &#39;&#39;)</code>). One may also want to downcase or upcase everything. If one were instead using a regex that might not be necessary but doing so would simplify the regex."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525897553, "post_id": 50261136, "comment_id": 87541035, "body": "You may wish to generalize this so that it would work on arbitrary word separators."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525897845, "post_id": 50261136, "comment_id": 87541176, "body": "The last sentence of the question (&quot;Regex solution is required.&quot;) was added after I posted my answer."}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525897935, "post_id": 50261136, "comment_id": 87541218, "body": "Yes, but first two sentences never changed."}, {"owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "edited": false, "score": 0, "creation_date": 1525906896, "post_id": 50261136, "comment_id": 87544494, "body": "While this is a better answer and deserves a +1, which I gave it, I really needed a regex in my case."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 4, "last_activity_date": 1525907606, "last_edit_date": 1525907606, "creation_date": 1525895926, "answer_id": 50261136, "question_id": 50260869, "link": "https://stackoverflow.com/questions/50260869/match-multiple-words-anywhere-in-string/50261136#50261136", "title": "Match multiple words anywhere in string", "body": "<pre><code>(\"John Zeni\".split - \"John Paul Zeni\".split).empty?\n  #=&gt; true\n</code></pre>\n\n<p>If <code>str</code> may contain punctuation we should remove those characters before splitting.</p>\n\n<pre><code>(\"John Zeni Lola\".split - \"John Lola Paul, Zeni.\".gsub(/[[:punct:]]/,'').split).empty?\n  #=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 5850, "user_id": 4501354, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/1230cfcc7f68488ad19d0022cf7b1a93?s=128&d=identicon&r=PG&f=1", "display_name": "Donato", "link": "https://stackoverflow.com/users/4501354/donato"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 352, "favorite_count": 0, "accepted_answer_id": 50261066, "answer_count": 2, "score": 0, "last_activity_date": 1525929770, "creation_date": 1525894665, "last_edit_date": 1525929770, "question_id": 50260869, "link": "https://stackoverflow.com/questions/50260869/match-multiple-words-anywhere-in-string", "title": "Match multiple words anywhere in string", "body": "<p>I want to check if all words in a string <code>selection</code> are present in another string. There will be an arbitrary number of words. This is not an OR. All words MUST be present in the matcher. Order does not matter. For example, when <code>selection</code> is <code>\"John Zeni\"</code>, it must match <code>\" John Paul Zeni\"</code> because both <code>\"John\"</code> and <code>\"Zeni\"</code> are in the matcher. If <code>selection</code> was just <code>\"John\"</code>, then it should match, but since there are multiple words, all words must match. Regex solution is required.</p>\n\n<p>This is what I tried:</p>\n\n<pre><code>selection = \"John Zeni\"\npattern = selection.split(\" \").join(\"|\")\n# =&gt; \"John|Zeni\"\n/#{Regexp.quote(pattern)}/\n# =&gt; /John\\|Zeni/ \n\" John Paul Zeni\".match(/#{Regexp.quote(pattern)}/)\n# =&gt; nil \n</code></pre>\n\n<p>Why doesn't it match? The problem is with <code>Regexp.quote</code> I think. It is important that both words match in the matcher. This also should not match:</p>\n\n<pre><code>\" John Paul Zeni\" =~ /(John|Zach)/ \n# =&gt; 1\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-5"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1525949684, "post_id": 50259380, "comment_id": 87559616, "body": "What do you mean by <i>&quot;rendering&quot;</i>?"}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1525890176, "post_id": 50259600, "comment_id": 87537468, "body": "It&#39;s also worth mentioning that you can override #inspect for an other representation for the console output. <a href=\"https://ruby-doc.org/core-2.5.0/Object.html#method-i-inspect\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.5.0/Object.html#method-i-inspect</a>"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1525939513, "post_id": 50259600, "comment_id": 87554219, "body": "&quot;I&#39;m not sure this will always be a great idea&quot; - I&#39;m not sure this is a great idea at all (to put it mildly) :)"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1525966643, "post_id": 50259600, "comment_id": 87569713, "body": "Yup, I&#39;d tend to use your approach @SergioTulentsev, but thought this, technically, answered the question (without any further context for the problem)."}, {"owner": {"reputation": 17223, "user_id": 133986, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81ffdc7467e20214e5cdce679a307eaf?s=128&d=identicon&r=PG", "display_name": "Mailo Sv\u011btel", "link": "https://stackoverflow.com/users/133986/mailo-sv%c4%9btel"}, "edited": false, "score": 0, "creation_date": 1525985484, "post_id": 50259600, "comment_id": 87579199, "body": "This is working solution, but as few of you mention it&#39;s probably not a good idea, because this would be happening everywhere. I would be happy with views. I was hoping for something like there is <a href=\"http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a> for column names, there would be something programatic for  data type of a column."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 17223, "user_id": 133986, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81ffdc7467e20214e5cdce679a307eaf?s=128&d=identicon&r=PG", "display_name": "Mailo Sv\u011btel", "link": "https://stackoverflow.com/users/133986/mailo-sv%c4%9btel"}, "edited": false, "score": 0, "creation_date": 1526031108, "post_id": 50259600, "comment_id": 87594493, "body": "Fair enough @Mailo, sounds sensible. Thanks for the update - will have a think with the added info."}], "tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 2, "last_activity_date": 1525889290, "creation_date": 1525889290, "answer_id": 50259600, "question_id": 50259380, "link": "https://stackoverflow.com/questions/50259380/overload-data-type-rendering-in-rails/50259600#50259600", "title": "Overload data type rendering in Rails", "body": "<p>You can do this by overwriting a class's <code>to_s</code> method, for example:</p>\n\n<pre><code>class TrueClass\n  def to_s\n    'foo' \n  end\nend\n\nputs true #=&gt; 'foo'\n</code></pre>\n\n<p>I'm not sure this will always be a great idea, but that's how it can be done :)</p>\n\n<p>For the integers, you'd need to write something to convert them, or use a gem like <a href=\"https://github.com/kslazarev/numbers_and_words\" rel=\"nofollow noreferrer\">numbers_and_words</a>, but the above approach would still apply.</p>\n\n<p>Hope that gets you in the right direction! Let me know if you've any questions.</p>\n"}, {"comments": [{"owner": {"reputation": 17223, "user_id": 133986, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81ffdc7467e20214e5cdce679a307eaf?s=128&d=identicon&r=PG", "display_name": "Mailo Sv\u011btel", "link": "https://stackoverflow.com/users/133986/mailo-sv%c4%9btel"}, "edited": false, "score": 0, "creation_date": 1525985612, "post_id": 50268357, "comment_id": 87579245, "body": "This is what I currently have. I was hoping for something more built-in"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 17223, "user_id": 133986, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81ffdc7467e20214e5cdce679a307eaf?s=128&d=identicon&r=PG", "display_name": "Mailo Sv\u011btel", "link": "https://stackoverflow.com/users/133986/mailo-sv%c4%9btel"}, "edited": false, "score": 0, "creation_date": 1525985788, "post_id": 50268357, "comment_id": 87579320, "body": "@Mailo: the other answer offerst a more &quot;built-in&quot; solution. You don&#39;t want that. :)"}, {"owner": {"reputation": 17223, "user_id": 133986, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81ffdc7467e20214e5cdce679a307eaf?s=128&d=identicon&r=PG", "display_name": "Mailo Sv\u011btel", "link": "https://stackoverflow.com/users/133986/mailo-sv%c4%9btel"}, "edited": false, "score": 0, "creation_date": 1525986216, "post_id": 50268357, "comment_id": 87579498, "body": "The other solution is changing Ruby type a would be happy with adjusting Rails reflection of DB type ;)"}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 1, "last_activity_date": 1525939739, "creation_date": 1525939739, "answer_id": 50268357, "question_id": 50259380, "link": "https://stackoverflow.com/questions/50259380/overload-data-type-rendering-in-rails/50268357#50268357", "title": "Overload data type rendering in Rails", "body": "<blockquote>\n  <p>Is there an easy way to overload data type rendering in Rails?</p>\n</blockquote>\n\n<p>Pass your data through a rendering helper:</p>\n\n<pre><code>class ApplicationHelper\n  # \"mf\" for my_format\n  def mf(value)\n    case value\n    when true\n      '\ud83d\udc4d'\n    when false\n      '\ud83d\udc4e'\n    when Integer\n      value.to_english_words # or something like that\n    else\n      value # unchanged\n    end\n  end\nend\n</code></pre>\n\n<p>Then, in the views.</p>\n\n<pre><code>&lt;%= mf user.approved? %&gt;\n&lt;%= mf user.age %&gt;\n</code></pre>\n"}], "owner": {"reputation": 17223, "user_id": 133986, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/81ffdc7467e20214e5cdce679a307eaf?s=128&d=identicon&r=PG", "display_name": "Mailo Sv\u011btel", "link": "https://stackoverflow.com/users/133986/mailo-sv%c4%9btel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525986136, "creation_date": 1525888468, "last_edit_date": 1525986136, "question_id": 50259380, "link": "https://stackoverflow.com/questions/50259380/overload-data-type-rendering-in-rails", "title": "Overload data type rendering in Rails", "body": "<p>Is there an easy way to overload data type rendering in Rails?</p>\n\n<p>For example having Boolean rendered as:</p>\n\n<pre><code>true  #=&gt; \ud83d\udc4d\nfalse #=&gt; \ud83d\udc4e\n</code></pre>\n\n<p>or Integer as:</p>\n\n<pre><code>6  #=&gt; 'six'\n10 #=&gt; 'ten'\n</code></pre>\n\n<p>I was hoping for something like there is <a href=\"http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/i18n.html#translations-for-active-record-models</a> for column names, there would be something programatic for  data type of a column.</p>\n\n<p>This is pretty close <a href=\"https://blog.arkency.com/2016/03/custom-typecasting-with-activerecord-virtus-and-dry-types/\" rel=\"nofollow noreferrer\">https://blog.arkency.com/2016/03/custom-typecasting-with-activerecord-virtus-and-dry-types/</a> . But something built-in would be nicer ;)</p>\n"}, {"tags": ["arrays", "ruby", "count"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525889726, "post_id": 50259259, "comment_id": 87537250, "body": "<code>count(obj)</code> uses <code>==</code> to count the number of elements equal to obj. So unless you&#39;re counting an array of regular expressions your code won&#39;t work. Moreover if it did work it still wouldn&#39;t count the integers because regex is used with strings."}], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1525891338, "post_id": 50259287, "comment_id": 87538085, "body": "Shorter version: <code>[&#39;a&#39;, &#39;b&#39;, &#39;c&#39;, 1, 2, 3].grep(Integer)</code>."}], "tags": [], "owner": {"reputation": 3930, "user_id": 4613236, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/wQZcm.jpg?s=128&g=1", "display_name": "Zoran", "link": "https://stackoverflow.com/users/4613236/zoran"}, "is_accepted": true, "score": 4, "last_activity_date": 1525888446, "last_edit_date": 1525888446, "creation_date": 1525888057, "answer_id": 50259287, "question_id": 50259259, "link": "https://stackoverflow.com/questions/50259259/ruby-count-integers-in-array/50259287#50259287", "title": "Ruby count integers in array", "body": "<p>The following should return the number of integers present within the array:</p>\n\n<pre><code>['a', 'b', 'c', 1, 2, 3].count { |e| e.is_a? Integer }\n# =&gt; 3\n</code></pre>\n\n<p>Since <code>#count</code> can accept a block, we have it check if an element is an <code>Integer</code>, if so it will be counted towards our returned total.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 1267, "user_id": 1718633, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/fabe1e6b28afc64cdbd3c071621a7565?s=128&d=identicon&r=PG", "display_name": "Rich_F", "link": "https://stackoverflow.com/users/1718633/rich-f"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 538, "favorite_count": 0, "accepted_answer_id": 50259287, "answer_count": 1, "score": 0, "last_activity_date": 1525888446, "creation_date": 1525887949, "question_id": 50259259, "link": "https://stackoverflow.com/questions/50259259/ruby-count-integers-in-array", "title": "Ruby count integers in array", "body": "<p>Is there a way I can count the number of integers in an array?  I have an array whose members come from <code>a-z</code> and <code>0-9</code>.  I want to count the number of integers in said array.  I tried:</p>\n\n<pre><code>myarray.count(/\\d/)\n</code></pre>\n\n<p>...but the <code>count</code> method doesn't regex.  </p>\n\n<pre><code>a = 'abcdefghijklmnopqrstuvwxyz'.split('')\na &lt;&lt; [0,1,2,3,4,5,6,7,8,9]\nt = a.sample(10)\np t.count(/\\d/)  # show me how many integers in here\n</code></pre>\n"}, {"tags": ["php", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 83063, "user_id": 2310830, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/P6rM1.png?s=128&g=1", "display_name": "RiggsFolly", "link": "https://stackoverflow.com/users/2310830/riggsfolly"}, "edited": false, "score": 0, "creation_date": 1525884813, "post_id": 50258413, "comment_id": 87534771, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/318144/what-is-the-difference-between-include-and-require-in-ruby\">What is the difference between include and require in Ruby?</a>"}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "edited": false, "score": 1, "creation_date": 1525885107, "post_id": 50258413, "comment_id": 87534920, "body": "This is not a duplicate of the nominated exemplar, although that question does have some relevance, since the solution to the OP&#39;s problem will use &quot;require&quot; and &quot;include.&quot;"}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 4, "last_activity_date": 1525885343, "creation_date": 1525885343, "answer_id": 50258574, "question_id": 50258413, "link": "https://stackoverflow.com/questions/50258413/what-to-use-class-or-module-in-ror/50258574#50258574", "title": "What to use: Class or Module, in ROR", "body": "<p>In Ruby you'll want to organize things into namespaces, and the best way to do that is through class and module declarations.</p>\n\n<p>Generally a <code>class</code> is something you'll <em>make an instance of</em>, and a <code>module</code> is something that's either \"mixed in\" (e.g. a set of methods imported by other modules or classes), or used directly.</p>\n\n<p>For example:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\nend\n</code></pre>\n\n<p>Here <code>Users</code> is a class because you <em>create</em> users, and each user is represented by an object.</p>\n\n<p>You can also declare methods as \"mixins\", or includable modules:</p>\n\n<pre><code>module UserPermissions\n  def can_delete_post?(post)\n    post.user_id == self.id\n  end\nend\n\nclass User &lt; ActiveRecord::Base\n  include UserPermissions\nend\n</code></pre>\n\n<p>Where now <code>user.can_delete_post?</code> is a valid method and that method executes inside the context of a given user instance.</p>\n\n<p>You can also make modules that are just collections of methods you can call directly:</p>\n\n<pre><code>module AppConfig\n  def self.account_limit\n    1\n  end\nend\n\nAppConfig.account_limit\n# =&gt; 1\n</code></pre>\n\n<p>Where you can call that method directly without having to <code>include</code> it. This is a fairly common pattern as well, it's just an organizational namespace.</p>\n\n<p>Like many object-oriented languages, especially <a href=\"https://en.wikipedia.org/wiki/Smalltalk\" rel=\"nofollow noreferrer\">Smalltalk</a>-derived ones, you'll want to read up on <a href=\"https://en.wikipedia.org/wiki/Design_Patterns\" rel=\"nofollow noreferrer\">object oriented design patterns</a> to see how to structure things properly.</p>\n"}], "owner": {"reputation": 21, "user_id": 9765049, "user_type": "registered", "profile_image": "https://graph.facebook.com/2001380616793978/picture?type=large", "display_name": "Rishabh Shukla", "link": "https://stackoverflow.com/users/9765049/rishabh-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1537195919, "creation_date": 1525884559, "last_edit_date": 1537195919, "question_id": 50258413, "link": "https://stackoverflow.com/questions/50258413/what-to-use-class-or-module-in-ror", "title": "What to use: Class or Module, in ROR", "body": "<p>I am new to ROR and trying to convert my PhP application to ROR application. There is one php file common.php which is included in almost all other files. Likewise common.php in turn uses RPCClient.php and User.php . Variables and methods are shared across php files. So, what should I use in ROR a class or a module as data is shared among various files.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 1, "creation_date": 1525884004, "post_id": 50258128, "comment_id": 87534363, "body": "Have you tried <code>account.save!</code> instead of <code>account.save</code>?"}], "answers": [{"tags": [], "owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "is_accepted": true, "score": 4, "last_activity_date": 1526027627, "last_edit_date": 1526027627, "creation_date": 1525885348, "answer_id": 50258576, "question_id": 50258128, "link": "https://stackoverflow.com/questions/50258128/activerecord-exception-is-not-throwing-within-service-object/50258576#50258576", "title": "ActiveRecord exception is not throwing within Service Object", "body": "<pre><code>def account_create\n  # Instead of this:\n  post_account_setup if account.save\n\n  # Do this:\n  account.save!\n  post_account_setup\nend\n</code></pre>\n\n<p>Calling <code>save</code> instead of <code>save!</code> will not raise an exception; it will just return <code>false</code>.</p>\n\n<p>Alternatively, some would argue that using an exception to control flow like this is bad practice. So instead, you could do something like:</p>\n\n<pre><code>def perform\n  # ...\n  if account.valid?\n    account.save! # This should never fail!\n    post_account_create\n    OpenStruct.new(success?: true, user: user, account: account, error: nil)\n  else\n    OpenStruct.new(success?: false, user: user, account: account, error: account.errors)\n  end\nend\n</code></pre>\n\n<p>Or, similarly:</p>\n\n<pre><code>def perform\n  # ...\n  if account.save\n    post_account_create\n    OpenStruct.new(success?: true, user: user, account: account, error: nil)\n  else\n    OpenStruct.new(success?: false, user: user, account: account, error: account.errors)\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "is_accepted": false, "score": 1, "last_activity_date": 1525888898, "creation_date": 1525888898, "answer_id": 50259505, "question_id": 50258128, "link": "https://stackoverflow.com/questions/50258128/activerecord-exception-is-not-throwing-within-service-object/50259505#50259505", "title": "ActiveRecord exception is not throwing within Service Object", "body": "<p>You could handle this simply in one line (broken into two here for readability):</p>\n\n<pre><code>def perform   \n  OpenStruct.new(success?: account.save, user: user, \n                 account: account, error: account.errors)\nend\n</code></pre>\n\n<p><strong><em>IF</em></strong> <code>post_account_create</code> could be moved to the model, which I'd suggest would be a <a href=\"https://www.sitepoint.com/10-ruby-on-rails-best-practices/\" rel=\"nofollow noreferrer\">more natural home for it</a>, i.e.</p>\n\n<p><strong>account.rb</strong></p>\n\n<pre><code>after_create :post_account_create\n</code></pre>\n\n<p>More info on the lifecycle <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p><code>account.errors</code> will return an empty array if there aren't any, which shouldn't be hard to handle elsewhere based on either its emptiness or the response's success.</p>\n\n<p>Hope that's useful.</p>\n"}], "owner": {"reputation": 145, "user_id": 3158642, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/4dd4bf3e8d7009cdbe06c5f6d8de6254?s=128&d=identicon&r=PG", "display_name": "Stephen", "link": "https://stackoverflow.com/users/3158642/stephen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 0, "accepted_answer_id": 50258576, "answer_count": 2, "score": 1, "last_activity_date": 1526027627, "creation_date": 1525883571, "question_id": 50258128, "link": "https://stackoverflow.com/questions/50258128/activerecord-exception-is-not-throwing-within-service-object", "title": "ActiveRecord exception is not throwing within Service Object", "body": "<p>In building a Service Object, the <code>RecordInvalid</code> exception is not being thrown when it should be. Instead, the code in the <code>else</code> block is run every time.</p>\n\n<pre><code># services/new_registration_service.rb\nclass NewRegistrationService\n\n  ...  \n\n  def perform    \n    begin\n      account_create\n    rescue ActiveRecord::RecordInvalid =&gt; exception\n      OpenStruct.new(success?: false, user: user, account: account, error: exception.message)\n    else\n      # this is running every time\n      OpenStruct.new(success?: true, user: user, account: account, error: nil)\n    end\n  end\n\n  private\n\n    ...\n\n    def account_create\n      # this is NOT saving, which I believe should\n      # throw the exception in the perform method\n      post_account_setup if account.save\n    end\n\n    ...\n\nend\n</code></pre>\n\n<p>This is what I'm running from my spec, where <code>account: name</code> is required:</p>\n\n<pre><code>post :create, params: { account: FactoryBot.attributes_for(:account, { name: nil }) }\n</code></pre>\n\n<p>Even when I <code>puts</code> the returned <code>account.name</code> value, it's <code>nil</code>... which is what should kick the <code>RecordInvalid</code> exception.</p>\n\n<pre><code># models/account.rb\nclass Account &lt; ApplicationRecord\n  resourcify\n  has_many :users\n  validates :name, presence: true\nend\n</code></pre>\n\n<p>Any ideas?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gsub"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1525882964, "post_id": 50257931, "comment_id": 87533788, "body": "The string <code>&quot;+1&quot;+...</code>...? What am I missing here?"}, {"owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1525883032, "post_id": 50257931, "comment_id": 87533827, "body": "You are missing the fact that I was likely trying to overcomplicate things. Haha."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1525883085, "post_id": 50257931, "comment_id": 87533857, "body": "Happens to the best of us. You may want to make a phone number &quot;canonicizer&quot; concern (module) that handles all sorts of broken and garbage data, as that way you can write tests for that method specifically."}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525884376, "post_id": 50257931, "comment_id": 87534545, "body": "<code>phone_number.prepend &quot;+1&quot;</code> ?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1527460397, "post_id": 50257931, "comment_id": 88125040, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/377768/string-concatenation-in-ruby\">String concatenation in Ruby</a>"}], "owner": {"reputation": 306, "user_id": 5007156, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/lA3OI.jpg?s=128&g=1", "display_name": "Mike Wiesenhart", "link": "https://stackoverflow.com/users/5007156/mike-wiesenhart"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 105, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1525883512, "creation_date": 1525882843, "last_edit_date": 1525883512, "question_id": 50257931, "link": "https://stackoverflow.com/questions/50257931/using-gsub-to-add-to-a-phone-number", "title": "Using gsub to add to a phone number", "body": "<p>I am trying to save a client\u2019s phone number to the DB and make it E.164 compliant so we can send them an SMS. We were using a gem to do this, but the powers that be decided they don\u2019t want to do it that way anymore. I am trying to accomplish this using a before_validation and a model method. I have pasted them below, but can\u2019t seem to figure out how to add a +1 that is required. Any help would be greatly appreciated.</p>\n\n<p>listing_collection.rb</p>\n\n<pre><code>before_validation :format_phone\n\ndef format_phone\n  self.client_phone = client_phone.gsub(/\\D/, '')\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1525883240, "post_id": 50257985, "comment_id": 87533946, "body": "That&#39;s the old way. <code>validates :subject, inclusion: [ ... ]</code> has been the style since at least Rails 3.x as per <a href=\"http://guides.rubyonrails.org/active_record_validations.html#inclusion\" rel=\"nofollow noreferrer\">the guide</a>."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525883359, "post_id": 50257985, "comment_id": 87534001, "body": "@tadman didnt know that and there is nothing about that in the docs"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525883395, "post_id": 50257985, "comment_id": 87534027, "body": "I linked to the docs there in a quick edit to explain better."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525883615, "post_id": 50257985, "comment_id": 87534147, "body": "@tadman Thats a link to the guide but a mean <a href=\"https://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_presence_of\" rel=\"nofollow noreferrer\"><code>validates_presence_of</code></a> and <a href=\"https://apidock.com/rails/ActiveRecord/Validations/ClassMethods/validates_inclusion_of\" rel=\"nofollow noreferrer\"><code>validates_inclusion_of</code></a> docs"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 1, "creation_date": 1525883703, "post_id": 50257985, "comment_id": 87534189, "body": "Those methods are defunct as the new <code>validates</code> method can do everything those individual methods used to do and more, so that&#39;s why they&#39;re no longer discussed."}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525885076, "post_id": 50257985, "comment_id": 87534904, "body": "@tadman I dont think these helper methods should be called &quot;defunct&quot; because then they would be depricated. And thats not the case. Just checked rails 5.2.0 docs and its there. <a href=\"https://apidock.com/rails/ActiveModel/Validations/ClassMethods/validates\" rel=\"nofollow noreferrer\"><code>validates</code></a> more handy tho but I guess its more about personal preference"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525885402, "post_id": 50257985, "comment_id": 87535073, "body": "I&#39;m saying &quot;defunct&quot; because they&#39;re not officially deprecated, but I have a feeling they will be soon. They&#39;re being maintained for backwards compatibility but it&#39;s highly probable that they&#39;ll start to generate deprecation warnings in the future."}], "tags": [], "owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "is_accepted": false, "score": 0, "last_activity_date": 1525884793, "last_edit_date": 1525884793, "creation_date": 1525883006, "answer_id": 50257985, "question_id": 50257727, "link": "https://stackoverflow.com/questions/50257727/using-rails-validations-how-do-i-whitelist-a-phrase-e-g-learn-ruby/50257985#50257985", "title": "Using Rails validations, how do I whitelist a phrase, e.g., &quot;Learn Ruby&quot;", "body": "<p>How about ActiveModel <a href=\"https://apidock.com/rails/ActiveModel/Validations/HelperMethods/validates_inclusion_of\" rel=\"nofollow noreferrer\"><code>validates_inclusion_of</code></a>?</p>\n\n<pre><code>validates_inclusion_of :subject, in: ['Learn Ruby', 'Learn Ruby on Rails'], message: 'Please select a valid Subject'\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "edited": false, "score": 1, "creation_date": 1525885280, "post_id": 50258079, "comment_id": 87535010, "body": "tadman, thanks, dumb error on my part.  I copied the validations from an old project, hence the <code>validates_presence_of</code>  With <code>validates</code> and an array it works.  I&#39;m accepting your answer; hopefully, it will help someone else.  There aren&#39;t any similar q&amp;a&#39;s on SO"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 3, "last_activity_date": 1525883787, "last_edit_date": 1525883787, "creation_date": 1525883378, "answer_id": 50258079, "question_id": 50257727, "link": "https://stackoverflow.com/questions/50257727/using-rails-validations-how-do-i-whitelist-a-phrase-e-g-learn-ruby/50258079#50258079", "title": "Using Rails validations, how do I whitelist a phrase, e.g., &quot;Learn Ruby&quot;", "body": "<p>It looks like you're mixing the old <code>validates_x_y</code> type methods with the Rails 3.x <code>validates</code> which is much more general purpose.</p>\n\n<p><code>validates_presence_of</code> is from the Rails 1.x era and can <em>only</em> deal with the presence of something. There's <code>validates_inclusion_of</code> as a counterpart, but the real answer is to use the <code>validates</code> call which can be configured to test for any number of things at once.</p>\n\n<p>The notation for that is:</p>\n\n<pre><code>validates :subject,\n  inclusion: {\n    in: [\n      'Learn Ruby',\n      'Learn Ruby on Rails'\n    ],\n    message: \"Please select a valid Subject\"\n  }\n</code></pre>\n\n<p>I've added some formatting as well to make what's going on more clear. Those one-liners can get really tangled.</p>\n\n<p>If your introduction is using those old-style <code>validates_presence_of</code> methods it's out of date and you should look for a more recent version, or a better reference. As a note the official <a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow noreferrer\">Rails documentation</a> is usually a great place to start.</p>\n"}], "owner": {"reputation": 313, "user_id": 3763682, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/f78eec0fd68366d8b40faacff41433fc?s=128&d=identicon&r=PG&f=1", "display_name": "user3763682", "link": "https://stackoverflow.com/users/3763682/user3763682"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 50258079, "answer_count": 2, "score": 2, "last_activity_date": 1525884793, "creation_date": 1525882073, "last_edit_date": 1525882382, "question_id": 50257727, "link": "https://stackoverflow.com/questions/50257727/using-rails-validations-how-do-i-whitelist-a-phrase-e-g-learn-ruby", "title": "Using Rails validations, how do I whitelist a phrase, e.g., &quot;Learn Ruby&quot;", "body": "<p>I have <code>validates_presence_of :subject, inclusion: { in: %w( 'Learn Ruby' 'Learn Ruby on Rails'), message: \"Please select a valid Subject\" }</code>  Learn Ruby and Learn Ruby on Rails are examples of what I'm trying to do.  </p>\n\n<p>I've tried using single and double quotes without success. </p>\n\n<p>I've also tried an array: <code>validates_presence_of :subject, inclusion: { in: ['Learn Ruby', 'Learn Ruby on Rails'], message: \"Please select a valid Subject\" }</code> without success.</p>\n\n<p>I'm familiar with the <a href=\"https://rubygems.org/gems/phrasing\" rel=\"nofollow noreferrer\">Phrasing gem</a>; however, installing it seems overkill.  (And, not having tried it, I'm not sure it will help here.)</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 0, "creation_date": 1525882819, "post_id": 50257598, "comment_id": 87533707, "body": "is there any relationship between <code>TranslationFile</code> and <code>TranslationGroup</code> or do you want to stock the data in a new/existing instance of <code>TransitionGroup</code>?"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "reply_to_user": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "edited": false, "score": 0, "creation_date": 1525883183, "post_id": 50257598, "comment_id": 87533909, "body": "@sovalina There is no relationship,Yes I want to stock the data in a new instance/existing instance."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525883600, "post_id": 50257598, "comment_id": 87534140, "body": "If there is no relationship, then why is this a concern of the model? Sounds to me like your architecture would benefit from a layer of abstraction. (I would need to know more context, but for example perhaps this data comes from an input form, and could be processed by a service object rather than an <code>after_create</code> on the model?)"}, {"owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1526026915, "post_id": 50257598, "comment_id": 87592092, "body": "@TomLord You&#39;re maybe right, let me give you the context, For the moment i&#39;m trying to upload .yml files, and then proccessing something on them, then trying to show them, that&#39;s why I have two tables, and the data I get from the translation_file, I&#39;m trying to stock it in Translation_group after processing some changes, but I&#39;m struggling to do so."}], "answers": [{"tags": [], "owner": {"reputation": 4769, "user_id": 9541423, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f816e0659e0cf40bbe0ef7224a3a56a0?s=128&d=identicon&r=PG", "display_name": "Sovalina", "link": "https://stackoverflow.com/users/9541423/sovalina"}, "is_accepted": false, "score": 1, "last_activity_date": 1525883777, "creation_date": 1525883777, "answer_id": 50258199, "question_id": 50257598, "link": "https://stackoverflow.com/questions/50257598/create-data-from-another-model/50258199#50258199", "title": "Create data from another model", "body": "<p>You can create/find any <code>TransitionGroup</code> you need inside the method:</p>\n\n<pre><code>def file_to_data\n  hash = YAML.load_file()#our file here\n  t = load_translation(hash)\n  group = TransitionGroup.find_by( #any attribute you want)\n  #or TransitionGroup.new\n\n  group.attribute_for_storing_data = t\n  group.save\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "is_accepted": true, "score": 1, "last_activity_date": 1526052734, "creation_date": 1526052734, "answer_id": 50295646, "question_id": 50257598, "link": "https://stackoverflow.com/questions/50257598/create-data-from-another-model/50295646#50295646", "title": "Create data from another model", "body": "<p>With the help of a friend, we created a new Class on /lib that we included in TranslationFile and since I was using Active Storage from Rails 5.2 we had play with the blob.</p>\n\n<pre><code>require 'translation_file_processor'\n\nclass TranslationFile &lt; ApplicationRecord\n  has_one_attached :file\n  after_create :transform_to_translation_groups\n\n  def transform_to_translation_groups\n    p = TranslationFileProcessor.new file.blob\n    p.process\n    true\n  end\n\nend\n</code></pre>\n\n<p>in the lib/translation_file_processor.rb </p>\n\n<pre><code>class TranslationFileProcessor\n   include ActiveStorage::Downloading\n   attr_reader :blob\n   attr_accessor :translations_hash\n\n    def initialize(blob)\n      @blob = blob\n    end\n\n    def process\n      download_blob_to_tempfile do |file|\n        ...\n      end\n      #hash to translation_group\n      ...\n      group = TranslationGroup.new\n      ...\n      group.save\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 67, "user_id": 3748480, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/1049328313/picture?type=large", "display_name": "Arb", "link": "https://stackoverflow.com/users/3748480/arb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 50295646, "answer_count": 2, "score": 1, "last_activity_date": 1526052734, "creation_date": 1525881610, "question_id": 50257598, "link": "https://stackoverflow.com/questions/50257598/create-data-from-another-model", "title": "Create data from another model", "body": "<p>I have 2  models: translation_file and translation_group, I upload files in translation_file and the data from those files I want to stock them in translation_group, I'm trying to use the after_create.</p>\n\n<p>in my models/translation_file.rb:</p>\n\n<pre><code>class TranslationFile &lt; ApplicationRecord\n  has_many_attached :yaml_files\n  after_create :file_to_data\n\n  def file_to_data\n    hash = YAML.load_file()#our file here\n    t = load_translation(hash)\n    #hash to translation_group\n  end\nend\n</code></pre>\n\n<p>Does anyone knows a way to do it? </p>\n"}, {"tags": ["ruby", "mongoid", "moped"], "comments": [{"owner": {"reputation": 1377, "user_id": 3011280, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/mkyAT.jpg?s=128&g=1", "display_name": "Oshan Wisumperuma", "link": "https://stackoverflow.com/users/3011280/oshan-wisumperuma"}, "edited": false, "score": 0, "creation_date": 1547576334, "post_id": 50256113, "comment_id": 95236152, "body": "why &quot;while&quot; loop? why sleep(300)"}], "owner": {"reputation": 171, "user_id": 7264802, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/9619647177653103cccb62e579a2cadc?s=128&d=identicon&r=PG&f=1", "display_name": "Praneetha", "link": "https://stackoverflow.com/users/7264802/praneetha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 21, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1525876899, "creation_date": 1525876899, "question_id": 50256113, "link": "https://stackoverflow.com/questions/50256113/mongo-query-through-ruby-script-takes-long-time-execute", "title": "mongo query through ruby script takes long time execute", "body": "<p>I have a ruby script which is connecting to a mongo db on remote server and does find_by query. Sometimes the execution takes less than 1 second where as sometimes it takes around 15mins to execute.What could be the reason for this behavior?</p>\n\n<p>script.rb</p>\n\n<pre><code>    require '/home/ubuntu/praneetha/check_mongo/publisher_models.rb'\n$stdout.sync = true\n\nbegin\n   count = 1\n    user_id = '53ce011f9937d923a4000001'\n    while(true)\n     puts \"count: #{count}\"\n      t1 = Time.now.utc\n      puts \"Time.now is ========= #{t1}\"\n      p = Puser.find_by(:puid =&gt; user_id)\n      puts \"puser is  ====#{p.class}\"\n      t2 = Time.now.utc\n       t3 = t2-t1\n      puts \"time taken =====&gt; #{t3}\"\n      if t3&gt;2\n        puts \"I have an error at time #{t1} and total time is #{t3} \"\n      end\n\n     count = count + 1\n     sleep(300)\n     end\n\nend\n</code></pre>\n\n<p>publisher_models.rb</p>\n\n<pre><code> require 'mongoid'\nrequire 'em-synchrony'\n\nclass Puser\n  include Mongoid::Document\n  field :email, type: String\n  #custom user id for the user. This should be indexed at the time of creation\n  field :puid, type: String\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1525877511, "post_id": 50256255, "comment_id": 87530375, "body": "thanks.  I am one of the authors of <code>hyperloop</code> so I thought if I added an explicit reference to the opal-jquery version (on github) that works, I would be all set, but it has no effect."}, {"owner": {"reputation": 938, "user_id": 5718794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ll2bM.jpg?s=128&g=1", "display_name": "Alex Dovzhanyn", "link": "https://stackoverflow.com/users/5718794/alex-dovzhanyn"}, "reply_to_user": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1525877605, "post_id": 50256255, "comment_id": 87530440, "body": "sorry, used the wrong gem name, i meant to clone opal-jquery and modify its gemfile. I&#39;ll edit the answer"}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "edited": false, "score": 0, "creation_date": 1525877800, "post_id": 50256255, "comment_id": 87530571, "body": "this version opal-jquery <code>gem &quot;opal-jquery&quot;, git: &quot;https:&#47;&#47;github.com&#47;opal&#47;opal-jquery.git&quot;, branch: &quot;master&quot;</code> works.   The problem is I have to explicitly specify it the application Gemfile... I am looking for a way to &quot;hide&quot; this inside of the <code>hyperloop</code> gem.  I.e. by adding it to hyperloop/Gemfile  but I can&#39;t get that to work."}, {"owner": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1525878061, "post_id": 50256255, "comment_id": 87530739, "body": "<a href=\"https://blog.presidentbeef.com/blog/2016/08/09/bundling-gem-dependencies-inside-ruby-gems/\" rel=\"nofollow noreferrer\">this blog post</a> details a process for bundling a gem with its dependencies."}, {"owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "reply_to_user": {"reputation": 4150, "user_id": 7470620, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/49f3026fe13841e41d1805178eed9a3c?s=128&d=identicon&r=PG", "display_name": "eiko", "link": "https://stackoverflow.com/users/7470620/eiko"}, "edited": false, "score": 0, "creation_date": 1525882173, "post_id": 50256255, "comment_id": 87533354, "body": "@eiko thanks.  It looks like that method only works if you include ALL the gems... I tried applying the method to just pull in opal-jquery and it doesn&#39;t work by itself.."}], "tags": [], "owner": {"reputation": 938, "user_id": 5718794, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ll2bM.jpg?s=128&g=1", "display_name": "Alex Dovzhanyn", "link": "https://stackoverflow.com/users/5718794/alex-dovzhanyn"}, "is_accepted": false, "score": 4, "last_activity_date": 1525877649, "last_edit_date": 1525877649, "creation_date": 1525877324, "answer_id": 50256255, "question_id": 50255965, "link": "https://stackoverflow.com/questions/50255965/force-ruby-gem-to-use-alternative-gem-source/50256255#50256255", "title": "force ruby gem to use alternative gem source", "body": "<p>There isn't really a way to manage the dependencies of your dependencies. You have 2 options here:</p>\n\n<p>1) Use an older version of opal <br>\n2) Clone the opal-jquery gem and modify its Gemfile, pointing to the version of opal you want it to use, then, in your Gemfile, point the opal-jquery gem to pull from your cloned version of the repo</p>\n\n<p>Neither of these is really ideal and you'd have issues if you ever decided to upgrade to a newer version of opal-jquery if you go with the second route</p>\n"}], "owner": {"reputation": 2584, "user_id": 859491, "user_type": "registered", "accept_rate": 46, "profile_image": "https://www.gravatar.com/avatar/6951e58d024aa7812271f8d52ff31646?s=128&d=identicon&r=PG", "display_name": "Mitch VanDuyn", "link": "https://stackoverflow.com/users/859491/mitch-vanduyn"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 121, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1525877649, "creation_date": 1525876367, "last_edit_date": 1525877452, "question_id": 50255965, "link": "https://stackoverflow.com/questions/50255965/force-ruby-gem-to-use-alternative-gem-source", "title": "force ruby gem to use alternative gem source", "body": "<p>I have a gem that I one of the owner/authors (<code>hyperloop</code>) that depends on another gem (<code>opal-rails</code>) which depends on another gem (<code>opal-jquery</code>).</p>\n\n<p>All gems depend on the gem <code>opal</code>.  The problem is the current released version of <code>opal-query</code> is locked to an older version of the <code>opal</code> gem.</p>\n\n<p>The version of <code>opal-jquery</code> on master is okay.  For whatever reason the author(s) have not pushed ruby gems, so I have to work around this.</p>\n\n<p>The work around is that I have to say</p>\n\n<pre><code>gem 'hyperloop'\ngem \"opal-jquery\", git: \"https://github.com/opal/opal-jquery.git\", branch: \"master\"\n</code></pre>\n\n<p>in the application Gemfile.</p>\n\n<p>I am hoping somebody can give a workaround that could be embedded in the <code>hyperloop</code> gemspec, so that the problem is taken care of there.</p>\n\n<p>I thought if I added </p>\n\n<pre><code>gem \"opal-jquery\", git: \"https://github.com/opal/opal-jquery.git\", branch: \"master\"\n</code></pre>\n\n<p>to the <code>hyperloop</code> Gemfile this would take care of it, but apparently not.</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525876001, "post_id": 50255573, "comment_id": 87529194, "body": "Two small Ruby points: 1.it is customary to omit parentheses when invoking a method that does not pass an argument (<code>m</code> rather than <code>m()</code>); and 2. <code>Array.new</code> (no arguments or block) is generally written <code>[]</code>."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1525876526, "post_id": 50255573, "comment_id": 87529649, "body": "As a general comment, I suggest you not be in such a rush to select an answer. You don\u2019t want to discourage other answers and may wish to give readers still working on answers time to finish before awarding the greenie."}], "answers": [{"comments": [{"owner": {"reputation": 424, "user_id": 2249869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d1e52cf17b7cf32d599f71d02fac1be5?s=128&d=identicon&r=PG", "display_name": "userFriendly", "link": "https://stackoverflow.com/users/2249869/userfriendly"}, "edited": false, "score": 1, "creation_date": 1525875627, "post_id": 50255660, "comment_id": 87528957, "body": "This worked -- I&#39;ll accept after 8 minutes. If I would have carefully read the <a href=\"https://ruby-doc.org/core-2.2.0/Array.html#method-c-new\" rel=\"nofollow noreferrer\">documentation</a> I guess I could have figured this out. Thanks!"}, {"owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "reply_to_user": {"reputation": 424, "user_id": 2249869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d1e52cf17b7cf32d599f71d02fac1be5?s=128&d=identicon&r=PG", "display_name": "userFriendly", "link": "https://stackoverflow.com/users/2249869/userfriendly"}, "edited": false, "score": 0, "creation_date": 1525875746, "post_id": 50255660, "comment_id": 87529041, "body": "My pleasure Sir"}], "tags": [], "owner": {"reputation": 27144, "user_id": 3857758, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/58c4295826435f049b7fc32b98c240f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ursus", "link": "https://stackoverflow.com/users/3857758/ursus"}, "is_accepted": true, "score": 6, "last_activity_date": 1549467323, "last_edit_date": 1549467323, "creation_date": 1525875386, "answer_id": 50255660, "question_id": 50255573, "link": "https://stackoverflow.com/questions/50255573/array-unexpected-multi-assignment/50255660#50255660", "title": "Array Unexpected Multi Assignment", "body": "<p>In that way you use the same reference for every sub array. Try this way</p>\n\n<pre><code>@master = Array.new(4) { Array.new(2) { Array.new } }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9659, "user_id": 6136634, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7487290ff90aebf6848d9c638c067bb?s=128&d=identicon&r=PG", "display_name": "Gerry", "link": "https://stackoverflow.com/users/6136634/gerry"}, "is_accepted": false, "score": 3, "last_activity_date": 1525875639, "creation_date": 1525875639, "answer_id": 50255731, "question_id": 50255573, "link": "https://stackoverflow.com/questions/50255573/array-unexpected-multi-assignment/50255731#50255731", "title": "Array Unexpected Multi Assignment", "body": "<p>You are creating one array an assigning it to every element of the first array; try running this code:</p>\n\n<pre><code>@master.each { |e| puts e.object_id }\n</code></pre>\n\n<p>Output (your ids will be different):</p>\n\n<pre><code>70192803217260\n70192803217260\n70192803217260\n70192803217260\n</code></pre>\n\n<p>As you can see, is the exact same object, so try using <code>@master = Array.new(4) { Array.new(2) { Array.new() } }</code> instead, which will create a new array for each item in the first array.</p>\n"}], "owner": {"reputation": 424, "user_id": 2249869, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/d1e52cf17b7cf32d599f71d02fac1be5?s=128&d=identicon&r=PG", "display_name": "userFriendly", "link": "https://stackoverflow.com/users/2249869/userfriendly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 50255660, "answer_count": 2, "score": 2, "last_activity_date": 1549467323, "creation_date": 1525875150, "question_id": 50255573, "link": "https://stackoverflow.com/questions/50255573/array-unexpected-multi-assignment", "title": "Array Unexpected Multi Assignment", "body": "<p>I have the following array:</p>\n\n<pre><code>@master = Array.new(4, Array.new(2, Array.new()))\n=&gt; [[[], []], [[], []], [[], []], [[], []]]\n</code></pre>\n\n<p>I'm attempting to assign the very first most value with:</p>\n\n<pre><code>@master[0][0] = \"x\"\n=&gt; \"x\"\n</code></pre>\n\n<p>But this is doing a multi assignment</p>\n\n<pre><code>@master\n=&gt; [[\"x\", []], [\"x\", []], [\"x\", []], [\"x\", []]]\n</code></pre>\n\n<p>How do I assign only the first value? I'm hoping to get the following Array: </p>\n\n<pre><code>@master\n=&gt; [[\"x\", []], [[], []], [[], []], [[], []]]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rubygems", "ruby-on-rails-3.2"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1525874399, "post_id": 50255094, "comment_id": 87528122, "body": "Just pass the &quot;splattened&quot; array response <code>OpenStruct.new(*[{&quot;testey&quot;:1213,&quot;Testex&quot;:&quot;2018-03-07&quot;}])</code>."}, {"owner": {"reputation": 17, "user_id": 9396842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9247efcc56c5622373c5cda59ea84f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ailton", "link": "https://stackoverflow.com/users/9396842/ailton"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1525875130, "post_id": 50255094, "comment_id": 87528594, "body": "This json [{&quot;testey&quot;:1213,&quot;Testex&quot;:&quot;2018-03-07&quot;}] is an example that comes from the response, i would like a parameter of the response is to pass collection"}], "answers": [{"comments": [{"owner": {"reputation": 4568, "user_id": 8712097, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/hevmE.jpg?s=128&g=1", "display_name": "Tom Aranda", "link": "https://stackoverflow.com/users/8712097/tom-aranda"}, "edited": false, "score": 0, "creation_date": 1525889451, "post_id": 50255915, "comment_id": 87537115, "body": "While this answer may be correct, adding an explanation would be more useful."}], "tags": [], "owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "is_accepted": true, "score": 1, "last_activity_date": 1525889933, "last_edit_date": 1525889933, "creation_date": 1525876238, "answer_id": 50255915, "question_id": 50255094, "link": "https://stackoverflow.com/questions/50255094/pass-parameter-from-json-httparty-to-ostruct/50255915#50255915", "title": "Pass parameter from Json Httparty to ostruct", "body": "<p>According to documentation <a href=\"http://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html#method-i-parse\" rel=\"nofollow noreferrer\">http://ruby-doc.org/stdlib-2.0.0/libdoc/json/rdoc/JSON.html#method-i-parse</a>    </p>\n\n<pre><code>JSON.parse(response.body, object_class: OpenStruct)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "edited": false, "score": 0, "creation_date": 1525942183, "post_id": 50261324, "comment_id": 87555514, "body": "What if you&#39;ll get response with 10 fields?"}], "tags": [], "owner": {"reputation": 17, "user_id": 9396842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9247efcc56c5622373c5cda59ea84f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ailton", "link": "https://stackoverflow.com/users/9396842/ailton"}, "is_accepted": false, "score": 0, "last_activity_date": 1525896860, "creation_date": 1525896860, "answer_id": 50261324, "question_id": 50255094, "link": "https://stackoverflow.com/questions/50255094/pass-parameter-from-json-httparty-to-ostruct/50261324#50261324", "title": "Pass parameter from Json Httparty to ostruct", "body": "<p><strong>I found a solution</strong> </p>\n\n<pre><code>response = HTTParty.get('http://localhost:3000/api/v2/teste')\n\nresponse['x'].each do |aux|\n  @msgx = aux['Testex']\n  @msgy = aux['testey']\nend\n\ncollection = [\n  OpenStruct.new(\n    :testex =&gt; @msgx,\n    :testey =&gt; @msgy\n   )\n]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 17, "user_id": 9396842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9247efcc56c5622373c5cda59ea84f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ailton", "link": "https://stackoverflow.com/users/9396842/ailton"}, "is_accepted": false, "score": 0, "last_activity_date": 1525955678, "creation_date": 1525955678, "answer_id": 50273121, "question_id": 50255094, "link": "https://stackoverflow.com/questions/50255094/pass-parameter-from-json-httparty-to-ostruct/50273121#50273121", "title": "Pass parameter from Json Httparty to ostruct", "body": "<p><strong>Your answer is nice Andriy-baran, The problem I have with this method is   \"[\"</strong> \n<strong>response from my response:{x:[{\"testey\":1213,\"Testex\":\"2018-03-07\"}]}</strong></p>\n\n<p>response = HTTParty.get('<a href=\"http://localhost:3000/api/v2/teste\" rel=\"nofollow noreferrer\">http://localhost:3000/api/v2/teste</a>')</p>\n\n<blockquote>\n  <p>If the answer were so {x:{\"testey\":1213,\"Testex\":\"2018-03-07\"}} would do it</p>\n</blockquote>\n\n<pre><code>response = HTTParty.get('http://localhost:3000/api/v2/teste')\nxy = JSON.parse(response.body, object_class: OpenStruct)\nputs xy.x.testey\n</code></pre>\n"}], "owner": {"reputation": 17, "user_id": 9396842, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a9247efcc56c5622373c5cda59ea84f9?s=128&d=identicon&r=PG&f=1", "display_name": "Ailton", "link": "https://stackoverflow.com/users/9396842/ailton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 134, "favorite_count": 0, "accepted_answer_id": 50255915, "answer_count": 3, "score": 0, "last_activity_date": 1525955678, "creation_date": 1525873827, "last_edit_date": 1525954840, "question_id": 50255094, "link": "https://stackoverflow.com/questions/50255094/pass-parameter-from-json-httparty-to-ostruct", "title": "Pass parameter from Json Httparty to ostruct", "body": "<p><strong>I would like to take data from the response is put inside collection</strong>    </p>\n\n<pre><code>require 'httparty'\nrequire 'ostruct'\nrequire 'nokogiri'\n\nresponse = HTTParty.get('http://localhost:3000/api/v2/teste')\n   #example response   {x:[{\"testey\":1213,\"Testex\":\"2018-03-07\"}]}\n\ncollection = [\n  OpenStruct.new(\n    :testex =&gt; '657758',\n    :testey =&gt; 'CTH6536'\n   )\n]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1545, "user_id": 5945124, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/0bdda1d3f79493ff3465001e77d9f202?s=128&d=identicon&r=PG&f=1", "display_name": "Zia Qamar", "link": "https://stackoverflow.com/users/5945124/zia-qamar"}, "edited": false, "score": 0, "creation_date": 1525869801, "post_id": 50253663, "comment_id": 87524638, "body": "add pg on production group only"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1525869981, "post_id": 50253663, "comment_id": 87524784, "body": "Did you try installing postgresql locally? What was the result?"}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525878622, "post_id": 50253663, "comment_id": 87531100, "body": "Do you have postgres? If not you can just download it from their website (it&#39;s free)"}], "answers": [{"tags": [], "owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "is_accepted": true, "score": 3, "last_activity_date": 1525869964, "creation_date": 1525869964, "answer_id": 50253788, "question_id": 50253663, "link": "https://stackoverflow.com/questions/50253663/postgresql-app-on-windows-not-working/50253788#50253788", "title": "PostgreSQL app on windows not working", "body": "<p>Maybe this will help you:\n<a href=\"https://stackoverflow.com/questions/4482239/postgresql-database-service\">postgreSQL database service</a></p>\n\n<p>As mentioned in the answer (user: ontrack) below </p>\n\n<p>Use services (start -> run -> services.msc) and look for the postgresql-[version] service.</p>\n\n<ul>\n<li>If it is not there you might have just installed pgAdmin and not installed PostgreSQL itself.</li>\n<li>If it is not running try to start it, if it won't start open the event-viewer (start -> run -> eventvwr) and look for error messages relating to the PostgreSQL service.</li>\n<li>If it does start check the startup type, if you want it to start with windows it should be \"Automatic\"; or perhaps \"Automatic, delayed start\" if you don't want it to slow down startup too much.</li>\n</ul>\n\n<hr>\n"}], "owner": {"reputation": 1006, "user_id": 4594902, "user_type": "registered", "accept_rate": 65, "profile_image": "https://graph.facebook.com/686173344826419/picture?type=large", "display_name": "Ilja KO", "link": "https://stackoverflow.com/users/4594902/ilja-ko"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 88, "favorite_count": 0, "accepted_answer_id": 50253788, "answer_count": 1, "score": 0, "last_activity_date": 1525869964, "creation_date": 1525869554, "question_id": 50253663, "link": "https://stackoverflow.com/questions/50253663/postgresql-app-on-windows-not-working", "title": "PostgreSQL app on windows not working", "body": "<p>I have a new app with psotgresql instead of sqlite3 and the command </p>\n\n<p><code>db:migrate</code></p>\n\n<p>is not working</p>\n\n<p>Here is the full log with <code>db:migrate --trace</code></p>\n\n<pre><code>    C:\\Users\\Jaiel\\Desktop\\Uebung_3_Elias_Kechter_s0555064_SoSe_2018_AI_Web_Entwicklung\\order_management&gt;rails db:migrate --trace\n** Invoke db:migrate (first_time)\n** Invoke environment (first_time)\n** Execute environment\n** Invoke db:load_config (first_time)\n** Execute db:load_config\n** Execute db:migrate\nrails aborted!\nPG::ConnectionBad: could not connect to server: Connection refused (0x0000274D/10061)\n        Is the server running on host \"localhost\" (::1) and accepting\n        TCP/IP connections on port 5432?\ncould not connect to server: Connection refused (0x0000274D/10061)\n        Is the server running on host \"localhost\" (127.0.0.1) and accepting\n        TCP/IP connections on port 5432?\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/pg-1.0.0-x86-mingw32/lib/pg.rb:56:in `initialize'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/pg-1.0.0-x86-mingw32/lib/pg.rb:56:in `new'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/pg-1.0.0-x86-mingw32/lib/pg.rb:56:in `connect'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:697:in `connect'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:221:in `initialize'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:38:in `new'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/postgresql_adapter.rb:38:in `postgresql_connection'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:759:in `new_connection'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:803:in `checkout_new_connection'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:782:in `try_to_checkout_new_connection'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:743:in `acquire_connection'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:500:in `checkout'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:374:in `connection'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_adapters/abstract/connection_pool.rb:931:in `retrieve_connection'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_handling.rb:116:in `retrieve_connection'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/connection_handling.rb:88:in `connection'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/schema_migration.rb:20:in `table_exists?'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/schema_migration.rb:24:in `create_table'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/migration.rb:1125:in `initialize'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/migration.rb:1007:in `new'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/migration.rb:1007:in `up'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/migration.rb:985:in `migrate'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/tasks/database_tasks.rb:171:in `migrate'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/activerecord-5.1.6/lib/active_record/railties/databases.rake:58:in `block (2 levels) in &lt;top (required)&gt;'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/task.rb:271:in `block in execute'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/task.rb:271:in `each'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/task.rb:271:in `execute'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/task.rb:213:in `block in invoke_with_call_chain'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/monitor.rb:214:in `mon_synchronize'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/task.rb:193:in `invoke_with_call_chain'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/task.rb:182:in `invoke'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/application.rb:160:in `invoke_task'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/application.rb:116:in `block (2 levels) in top_level'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/application.rb:116:in `each'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/application.rb:116:in `block in top_level'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/application.rb:125:in `run_with_threads'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/application.rb:110:in `top_level'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.6/lib/rails/commands/rake/rake_command.rb:21:in `block in perform'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/rake-12.3.1/lib/rake/application.rb:186:in `standard_exception_handling'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.6/lib/rails/commands/rake/rake_command.rb:18:in `perform'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.6/lib/rails/command.rb:46:in `invoke'\nC:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/railties-5.1.6/lib/rails/commands.rb:16:in `&lt;top (required)&gt;'\nbin/rails:4:in `require'\nbin/rails:4:in `&lt;main&gt;'\nTasks: TOP =&gt; db:migrate\n</code></pre>\n\n<p>I havent found any solution and im sad because it actuylla works with sqlite3 but I need to have postgresql for Heroku deployment...</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "edited": false, "score": 0, "creation_date": 1525869089, "post_id": 50253457, "comment_id": 87524131, "body": "Could you post your schema for the users table?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525870063, "post_id": 50253457, "comment_id": 87524850, "body": "<code>.where(&#39;birthdate BETWEEN ? AND ?&#39;, 22.years.ago + 1.day, 21.years.ago)</code> should work."}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1525870065, "post_id": 50253457, "comment_id": 87524853, "body": "Try <code>users.where(&quot;birthdate &gt;= ? AND birthdate &lt;= ?&quot;, 22.years.ago + 1.day, 21.years.ago)</code>"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1525870080, "post_id": 50253457, "comment_id": 87524867, "body": "You mean you want all users born in specific year?"}, {"owner": {"reputation": 169, "user_id": 4627150, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/930915593607785/picture?type=large", "display_name": "Mariel", "link": "https://stackoverflow.com/users/4627150/mariel"}, "edited": false, "score": 0, "creation_date": 1525870297, "post_id": 50253457, "comment_id": 87525016, "body": "is it possible if it&#39;s not range? just 21 years old only? like what marek said"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "edited": false, "score": 0, "creation_date": 1525870764, "post_id": 50253457, "comment_id": 87525361, "body": "This should work too: <code>.where(birthdate: (22.years.ago + 1.day)..21.years.ago)</code> You need a range, <b>not all people born in 1997 are actually 21</b>. Well, you can still build a method <code>_21_years_old</code> that returns a range."}], "answers": [{"comments": [{"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 1, "creation_date": 1525893176, "post_id": 50253957, "comment_id": 87539000, "body": "Two comments on this answer. 1. You can leave out the parentheses around the range. 2. You should replace the <code>...</code> (triple dots) with <code>..</code> (double dots). Triple dots will exclude the ending whereas double dots will include the ending. Since you end with <code>date.end_of_year</code> I assume you want to include the end of the year."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1525893313, "post_id": 50253957, "comment_id": 87539058, "body": "@JohanWentholt you&#39;re right, of course, I don&#39;t know what I was thinking about using &#39;exclusive&#39; range. Thank you."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 5, "last_activity_date": 1525893238, "last_edit_date": 1525893238, "creation_date": 1525870510, "answer_id": 50253957, "question_id": 50253457, "link": "https://stackoverflow.com/questions/50253457/how-to-filter-users-based-on-an-exact-year-with-date-as-a-column-in-the-database/50253957#50253957", "title": "How to filter users based on an exact year with date as a column in the database?", "body": "<p>You can use <code>Range</code> and methods <code>beginning_of_year</code> and <code>end_of_year</code>, like this:</p>\n\n<pre><code>date = 22.years.ago #example\nUser.where(birthdate: date.beginning_of_year..date.end_of_year)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 169, "user_id": 4627150, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/930915593607785/picture?type=large", "display_name": "Mariel", "link": "https://stackoverflow.com/users/4627150/mariel"}, "edited": false, "score": 0, "creation_date": 1525887741, "post_id": 50256010, "comment_id": 87536237, "body": "i have a question. This works only when the input  is birthday. How about if the input is only year?"}, {"owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "reply_to_user": {"reputation": 169, "user_id": 4627150, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/930915593607785/picture?type=large", "display_name": "Mariel", "link": "https://stackoverflow.com/users/4627150/mariel"}, "edited": false, "score": 0, "creation_date": 1525891575, "post_id": 50256010, "comment_id": 87538220, "body": "If I get your point, you can just do <code>users = User.filter_year(1997)</code> to fetch all people born in 1997 or <code>users = User.filter_month(5)</code> to fetch all people born in May. And so on... This applies to the column birthdate of User. model. You can not get people born between two dates. For that you must follow the reply form Marek or comments to your question post."}], "tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 1, "last_activity_date": 1525891627, "last_edit_date": 1525891627, "creation_date": 1525876499, "answer_id": 50256010, "question_id": 50253457, "link": "https://stackoverflow.com/questions/50253457/how-to-filter-users-based-on-an-exact-year-with-date-as-a-column-in-the-database/50256010#50256010", "title": "How to filter users based on an exact year with date as a column in the database?", "body": "<p>I read again your post and I guess you are looking for users which birthday is a given date. They born today n years ago.\nIf it's that, one way could be setup some filter in your User model like:</p>\n\n<pre><code>def self.filter_year(year)\n  where(\"cast(strftime('%Y', birthdate) as int) = ?\", year)\nend\n\ndef self.filter_month(month)\n  where(\"cast(strftime('%m', birthdate) as int) = ?\", month)\nend\n\ndef self.filter_day(day)\n  where(\"cast(strftime('%d', birthdate) as int) = ?\", day)\nend\n</code></pre>\n\n<p>Then call the filter as your will to get the collection of user:</p>\n\n<pre><code>users = User.filter_year(1997).filter_month(5).filter_day(9)\n</code></pre>\n\n<p>You get all user having their 21th birthday today.</p>\n\n<p>Maybe there is a better way, maybe this is not what you are looking for.</p>\n\n<p>But I hope this can help.</p>\n\n<p>Thanks to <a href=\"https://stackoverflow.com/a/9625690\">this answer</a>.</p>\n"}], "owner": {"reputation": 169, "user_id": 4627150, "user_type": "registered", "accept_rate": 85, "profile_image": "https://graph.facebook.com/930915593607785/picture?type=large", "display_name": "Mariel", "link": "https://stackoverflow.com/users/4627150/mariel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 61, "favorite_count": 0, "accepted_answer_id": 50253957, "answer_count": 2, "score": 2, "last_activity_date": 1525893238, "creation_date": 1525868886, "last_edit_date": 1525870377, "question_id": 50253457, "link": "https://stackoverflow.com/questions/50253457/how-to-filter-users-based-on-an-exact-year-with-date-as-a-column-in-the-database", "title": "How to filter users based on an exact year with date as a column in the database?", "body": "<p>I want to filter users using an SQL command on my model if the user is, for example, exactly 5 years old. How can I accomplish this? The range query works but removing the range does not return anything. <br><br>\n<b>This works but I want it to output exactly with the age of 21 years old(if the birthdate is 1997/01/01) and it shouldn't include 22 years old.</b> <br></p>\n\n<p><code>users = users.where([\"birthdate &gt;= ? AND birthdate &lt;= ?\", 22.years.ago + 1.day, 21.years.ago])</code></p>\n\n<p>I've tried this one but it doesn't output anything: <code>users = users.where([\"birthdate = ?\", 21.years.ago])</code></p>\n\n<p>schema for users <br></p>\n\n<pre><code>create_table \"users\", force: :cascade do |t|\nt.string \"email\", default: \"\", null: false\nt.string \"encrypted_password\", default: \"\", null: false\nt.string \"reset_password_token\"\nt.datetime \"reset_password_sent_at\"\nt.datetime \"remember_created_at\"\nt.integer \"sign_in_count\", default: 0, null: false\nt.datetime \"current_sign_in_at\"\nt.datetime \"last_sign_in_at\"\nt.inet \"current_sign_in_ip\"\nt.inet \"last_sign_in_ip\"\nt.string \"position\"\nt.string \"employee_id\"\nt.string \"first_name\"\nt.string \"middle_name\"\nt.string \"last_name\"\nt.string \"gender\"\nt.string \"address\"\nt.string \"sss_number\"\nt.string \"tin_number\"\nt.string \"phil_health\"\nt.string \"emergency_name\"\nt.string \"emergency_contact\"\nt.date \"birthdate\"\nt.date \"date_hired\"\nt.string \"role\", default: \"user\"\nt.integer \"department_id\"\nt.datetime \"created_at\", null: false\nt.datetime \"updated_at\", null: false\nt.index [\"email\"], name: \"index_users_on_email\", unique: true\nt.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n</code></pre>\n\n<p>end</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "redmine"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1525868541, "post_id": 50253285, "comment_id": 87523740, "body": "What version of Ruby are you using? Is it 1.8.x?"}, {"owner": {"reputation": 595, "user_id": 386499, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/138567534bcf4498e26477c49f8d86e6?s=128&d=identicon&r=PG", "display_name": "iamsumesh", "link": "https://stackoverflow.com/users/386499/iamsumesh"}, "reply_to_user": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1525870065, "post_id": 50253285, "comment_id": 87524855, "body": "[root@redmine]# ruby -v ruby 1.8.7 (2013-06-27 patchlevel 374) [x86_64-linux]"}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 1, "creation_date": 1525870133, "post_id": 50253285, "comment_id": 87524915, "body": "Redmine won&#39;t work on such old version, upgrade it to 2.2 at least."}], "answers": [{"tags": [], "owner": {"reputation": 6100, "user_id": 3704297, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/GjB9f.jpg?s=128&g=1", "display_name": "omikes", "link": "https://stackoverflow.com/users/3704297/omikes"}, "is_accepted": true, "score": 1, "last_activity_date": 1525906784, "creation_date": 1525906784, "answer_id": 50263205, "question_id": 50253285, "link": "https://stackoverflow.com/questions/50253285/email-configuration-in-redmine-throwing-parsing-error/50263205#50263205", "title": "email configuration in redmine throwing parsing error", "body": "<p>You're attempting to use Ruby 1.9's hash syntax in a 1.8 version of Ruby. Your line should look like this instead:</p>\n\n<pre><code>gem 'tzinfo-data', :platforms =&gt; [:mingw, :x64_mingw, :mswin]\n</code></pre>\n\n<p>(or upgrade Ruby)</p>\n"}], "owner": {"reputation": 595, "user_id": 386499, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/138567534bcf4498e26477c49f8d86e6?s=128&d=identicon&r=PG", "display_name": "iamsumesh", "link": "https://stackoverflow.com/users/386499/iamsumesh"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 50263205, "answer_count": 1, "score": 0, "last_activity_date": 1525906784, "creation_date": 1525868422, "question_id": 50253285, "link": "https://stackoverflow.com/questions/50253285/email-configuration-in-redmine-throwing-parsing-error", "title": "email configuration in redmine throwing parsing error", "body": "<p>We are new to ruby, we are trying to configure Redmine on our server, but facing the error, during configuring Redmine for Receiving Emails for receiving emails from IMAP/pop3 email servers. We are following (<a href=\"http://www.redmine.org/projects/redmine/wiki/RedmineReceivingEmails\" rel=\"nofollow noreferrer\">http://www.redmine.org/projects/redmine/wiki/RedmineReceivingEmails</a>)</p>\n\n<p>Error is</p>\n\n<pre><code>[root@redmine]# rake -f /app/redmine/Rakefile redmine:email:receive_imap RAILS_ENV=\"production\" host=hostname.com username=bug@hostname.com password=1234567890\n(in /app/redmine)\n\n[!] There was an error parsing `Gemfile`: compile error - syntax error, unexpected ':', expecting $end\ngem 'tzinfo-data', platforms: [:mingw, :x64_mingw, :mswin]\n                             ^. Bundler cannot continue.\n\n #  from /app/redmine/Gemfile:31\n #  -------------------------------------------\n #  # Windows does not include zoneinfo files, so bundle the tzinfo-data gem\n &gt;  gem 'tzinfo-data', platforms: [:mingw, :x64_mingw, :mswin]\n #  gem \"rbpdf\", \"~&gt; 1.19.3\"\n #  -------------------------------------------\n</code></pre>\n\n<p>Version details</p>\n\n<pre><code>[root@redmine]# ruby -v\nruby 1.8.7 (2013-06-27 patchlevel 374) [x86_64-linux]\n[root@redmine]# bundle -v\nBundler version 1.16.1\n[root@redmine]# gem -v\n1.3.7.1\n</code></pre>\n"}, {"tags": ["ruby", "amazon-s3", "file-upload", "aws-sdk", "progress"], "comments": [{"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1526058094, "post_id": 50253068, "comment_id": 87610955, "body": "Seen the latest code in their repo and I think it is still the same. Why doesn&#39;t the existing answer work for you?"}, {"owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "reply_to_user": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1526059298, "post_id": 50253068, "comment_id": 87611498, "body": "Because it\u2019s \u201chacky\u201d to say the least... We should normally be given a chunk argument much like in boto (python) or PHP... and it&#39;s so strange that this is not the case in Ruby... Plus the solution you are referring to is not a full example..."}, {"owner": {"reputation": 123770, "user_id": 2830850, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e48b39b77bf324de9aeefd6c5bfc10c6?s=128&d=identicon&r=PG&f=1", "display_name": "Tarun Lalwani", "link": "https://stackoverflow.com/users/2830850/tarun-lalwani"}, "edited": false, "score": 0, "creation_date": 1526059492, "post_id": 50253068, "comment_id": 87611585, "body": "Well a full example can be provided if that is a problem, but there is no documented way as of now. I am checking if there are any alternatives"}], "answers": [{"tags": [], "owner": {"reputation": 7206, "user_id": 153886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/3494c51ae32711dc7428334ef1cafa02?s=128&d=identicon&r=PG", "display_name": "Julik", "link": "https://stackoverflow.com/users/153886/julik"}, "is_accepted": true, "score": 11, "last_activity_date": 1526083928, "creation_date": 1526083928, "answer_id": 50301716, "question_id": 50253068, "link": "https://stackoverflow.com/questions/50253068/upload-to-s3-with-progress-in-plain-ruby-script/50301716#50301716", "title": "Upload to S3 with progress in plain Ruby script", "body": "<p>The example Trevor gives in <a href=\"https://stackoverflow.com/a/12147709/153886\">https://stackoverflow.com/a/12147709/153886</a> is not hacky from what I can see - just wiring things together. The SDK simply does not provide a feature for passing progress details on all operations. Plus, Trevor is the maintainer of the Ruby SDK at AWS so I trust his judgement.</p>\n\n<p>Expanding on his example</p>\n\n<pre><code>bar = ProgressBar.create(:title =&gt; \"Uploading action\", :starting_at =&gt; 0, :total =&gt; file.size)\nobj = s3.buckets['my-bucket'].objects['object-key']\nobj.write(:content_length =&gt; file.size) do |writable, n_bytes|\n  writable.write(file.read(n_bytes))\n  bar.progress += n_bytes\nend\n</code></pre>\n\n<p>If you want to have a progress block right in the <code>upload_file</code> method I believe you will need to open a PR to the SDK. It is not that strange that is not the case for Ruby (or for any other runtime) because, for example, there could be an optimisation in the HTTP client library that uses <code>IO.copy_stream</code> from your source <code>body</code> argument to the destination socket, which does not relay progress anywhere.</p>\n"}], "owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 722, "favorite_count": 3, "accepted_answer_id": 50301716, "answer_count": 1, "score": 10, "last_activity_date": 1526083928, "creation_date": 1525867841, "last_edit_date": 1526079279, "question_id": 50253068, "link": "https://stackoverflow.com/questions/50253068/upload-to-s3-with-progress-in-plain-ruby-script", "title": "Upload to S3 with progress in plain Ruby script", "body": "<p>This question is related to this one: <a href=\"https://stackoverflow.com/questions/12085751/tracking-upload-progress-of-file-to-s3-using-ruby-aws-sdk\">Tracking Upload Progress of File to S3 Using Ruby aws-sdk</a>,</p>\n\n<p>However since there is no clear solution to this I was wondering if there's a better/easier way (if one exists) of getting file upload progress with S3 using Ruby in 2018?</p>\n\n<p>In my current setup I'm basically creating a new <code>Resource</code>, fetch my bucket and call <code>upload_file</code> but I haven't yet found any options for passing blocks which would help in yielding some sort of progress.</p>\n\n<pre><code>...\n@connection = Aws::S3::Resource.new\n@s3_bucket = @connection.bucket(bucket)\n@s3_bucket.object(path).upload_file(data, {acl: 'public-read'})\n...\n</code></pre>\n\n<p>Is there a way to do this using the newest sdk-for-ruby v3?</p>\n\n<p>Any help (or even better a small example) would be great.</p>\n"}, {"tags": ["php", "ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 4602, "user_id": 1141264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4af75d466ec6c84e3a0a9f1de61233ae?s=128&d=identicon&r=PG", "display_name": "DickieBoy", "link": "https://stackoverflow.com/users/1141264/dickieboy"}, "is_accepted": false, "score": 2, "last_activity_date": 1525868693, "creation_date": 1525868693, "answer_id": 50253387, "question_id": 50252967, "link": "https://stackoverflow.com/questions/50252967/sets-the-value-of-a-configuration-option-in-rails/50253387#50253387", "title": "Sets the value of a configuration option in Rails", "body": "<p>So Rails has the notion of different environments. Usually 3(production, development and test), They each come with their own config files.</p>\n\n<p>You will find something like: <code>consider_all_requests_local</code> in those files. That is kind of the equivalent.</p>\n\n<p>AFAIK there is no direct translation of ini_set into Ruby.</p>\n"}], "owner": {"reputation": 1, "user_id": 9751822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596208437095364/picture?type=large", "display_name": "Rishabh Shukla", "link": "https://stackoverflow.com/users/9751822/rishabh-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 38, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1525868693, "creation_date": 1525867531, "last_edit_date": 1525867825, "question_id": 50252967, "link": "https://stackoverflow.com/questions/50252967/sets-the-value-of-a-configuration-option-in-rails", "title": "Sets the value of a configuration option in Rails", "body": "<p>I am new to rails and I am trying to convert a php application to a ROR one. Php has ini_set, which sets the value of a configuration option. How can I do this in ROR. </p>\n\n<pre><code>ini_set('error_reporting', E_NONE);\nini_set('display_errors','0');\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "exception", "error-code"], "comments": [{"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525867444, "post_id": 50252830, "comment_id": 87523012, "body": "Possible duplication question: <a href=\"https://stackoverflow.com/questions/2385799/how-to-redirect-to-a-404-in-rails?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\" title=\"how to redirect to a 404 in rails\">stackoverflow.com/questions/2385799/&hellip;</a>"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525869324, "post_id": 50252830, "comment_id": 87524282, "body": "its not duplicate...thats a different question"}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525869555, "post_id": 50252830, "comment_id": 87524436, "body": "It seems to me that you are trying to set a 404 page. There are a lot of tutorials and question here on SO teaching how to do that, as the link above."}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "reply_to_user": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525870032, "post_id": 50252830, "comment_id": 87524818, "body": "No i want to send some sort of information from code"}, {"owner": {"reputation": 449, "user_id": 5397051, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/68b724016d680eb143dd20e9da217b04?s=128&d=identicon&r=PG&f=1", "display_name": "Nathan Gouy", "link": "https://stackoverflow.com/users/5397051/nathan-gouy"}, "edited": false, "score": 0, "creation_date": 1525870943, "post_id": 50252830, "comment_id": 87525507, "body": "what do you mean by <code>define</code> ? Do you want to put some extras infos for coding purpose ? Or is it for your end-user ?"}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1525871742, "post_id": 50252830, "comment_id": 87526065, "body": "for end user who will use api&#39;s"}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525872560, "post_id": 50252830, "comment_id": 87526671, "body": "Do you want create a customize template/view page that when the end user get the status 401 the template/view will be display?"}, {"owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "edited": false, "score": 0, "creation_date": 1525934608, "post_id": 50252830, "comment_id": 87551889, "body": "@HaseebAhmad Did you check my answer? if it doesn&#39;t help so please explain more about your requirements."}], "answers": [{"tags": [], "owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "is_accepted": false, "score": 1, "last_activity_date": 1525933988, "last_edit_date": 1525933988, "creation_date": 1525874188, "answer_id": 50255228, "question_id": 50252830, "link": "https://stackoverflow.com/questions/50252830/how-to-define-custom-error-codes-for-api-in-rails/50255228#50255228", "title": "How to define custom error codes for api in rails", "body": "<p>First you need to define your custom exception:</p>\n\n<pre><code>class API::Unauthorized &lt; StandardError\n  attr_reader :code\n\n  def initialize(code)\n    super\n    @code = code\n  end\nend\n</code></pre>\n\n<p>Then in your APIController, use <a href=\"https://apidock.com/rails/ActiveSupport/Rescuable/ClassMethods/rescue_from\" rel=\"nofollow noreferrer\">rescue_from</a>, so add the following:</p>\n\n<pre><code>rescue_from StandardError, :with =&gt; :exception_handler\n\ndef exception_handler(exception)\n  if exception.is_a? API::Unauthorized\n    render json: { status: 401, message: \"Authentication issue\", code: exception.code }, status: unauthorized\n  end\nend\n</code></pre>\n\n<p>Now you can throw different exception codes based on your implementation by:</p>\n\n<pre><code>raise API::Unauthorized.new(1000)\n</code></pre>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 761, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525933988, "creation_date": 1525867107, "last_edit_date": 1525868367, "question_id": 50252830, "link": "https://stackoverflow.com/questions/50252830/how-to-define-custom-error-codes-for-api-in-rails", "title": "How to define custom error codes for api in rails", "body": "<p>I want to define custom error codes in my api response like</p>\n\n<pre><code>{ status: 401,message: \"Authentication issue\",code: 1000}\n</code></pre>\n\n<p>I want to define this 1000 code in my app with some documentation of explanation. How can I do that?</p>\n"}, {"tags": ["ruby", "chef-infra"], "answers": [{"comments": [{"owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1525939234, "post_id": 50258165, "comment_id": 87554123, "body": "Thank you, Could you pls. let me know how exactly the below constructs works <code>node.default[&#39;nginx&#39;][&#39;remote_ip_var&#39;] = &#39;remote_addr&#39; node.default[&#39;nginx&#39;][&#39;authorized_ips&#39;] = [&#39;127.0.0.1&#47;32&#39;]</code>  or  <code>:server_options =&gt;     node[:site][:matching_node][:server][:options],     :proxy_options =&gt;      node[:site][:matching_node][:proxy][:options]</code>  what exactly would be the final value of :server_options or <code>node.default[&#39;nginx&#39;][&#39;authorized_ips&#39;]</code>  whether nginx is assigned the <code>&#39;remote_addr&#39;</code> or any link where I can find further information would be also really helpful"}, {"owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "reply_to_user": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "edited": false, "score": 0, "creation_date": 1525956902, "post_id": 50258165, "comment_id": 87563666, "body": "You can find more info in our documentation <a href=\"https://docs.chef.io/attributes.html\" rel=\"nofollow noreferrer\">docs.chef.io/attributes.html</a>. You didn&#39;t give enough info to know what the actual values for all those things would be, it depends on too many things."}], "tags": [], "owner": {"reputation": 43208, "user_id": 78722, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf611565f0b79abd0b3dc200ad867661?s=128&d=identicon&r=PG", "display_name": "coderanger", "link": "https://stackoverflow.com/users/78722/coderanger"}, "is_accepted": false, "score": 1, "last_activity_date": 1525883674, "creation_date": 1525883674, "answer_id": 50258165, "question_id": 50252779, "link": "https://stackoverflow.com/questions/50252779/chef-ruby-terminologies/50258165#50258165", "title": "Chef/Ruby terminologies", "body": "<p>With normal Ruby Hashes, you would correct in assuming that <code>x['foo']</code> and <code>x[:foo]</code> are separate keys. However for simplicity, Chef's node attribute objects convert all keys to strings so you can use either syntax equally. We recommend (and our linter tool will help enforce) that you use strings, but some people prefer the visual style of symbols.</p>\n"}], "owner": {"reputation": 499, "user_id": 6760948, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/48c180d3ffe5cf06bf86515f9bc6776c?s=128&d=identicon&r=PG&f=1", "display_name": "voltas", "link": "https://stackoverflow.com/users/6760948/voltas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 19, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525883674, "creation_date": 1525866951, "question_id": 50252779, "link": "https://stackoverflow.com/questions/50252779/chef-ruby-terminologies", "title": "Chef/Ruby terminologies", "body": "<p>I have started with Chef and going thru the documentation (templates: <a href=\"https://docs.chef.io/resource_template.html\" rel=\"nofollow noreferrer\">https://docs.chef.io/resource_template.html</a> and and in multiple places I see the below format i.e 2 or 3 square brackets one after another. \nI have no prior Ruby experience so I'm not sure whether it's a Ruby stuff or particular to do with Chef.</p>\n\n<p>What exactly we're achieving with that construct ?  A basic example would do. </p>\n\n<p>For example w.r.t the below, what exactly those symbol does because on some places it has been declared with symbols and some don't. </p>\n\n<pre><code>node.default['nginx']['remote_ip_var'] = 'remote_addr'\nnode.default['nginx']['authorized_ips'] = ['127.0.0.1/32']\n\n:server_options =&gt;     node[:site][:matching_node][:server][:options],\n:proxy_options =&gt;      node[:site][:matching_node][:proxy][:options\n</code></pre>\n\n<p>I went thru the \"Ruby in twenty minutes\" documentation to get an overview before starting with Chef but couldn't get any information what I'm seeking</p>\n\n<p>Any help would be really helpful.</p>\n\n<pre><code>template '/etc/sudoers' do\n  source 'sudoers.erb'\n  variables(sudoers_groups: node['authorization']['sudo']['groups'],\n            sudoers_users: node['authorization']['sudo']['users'])\nend\n\nnode.default['nginx']['remote_ip_var'] = 'remote_addr'\nnode.default['nginx']['authorized_ips'] = ['127.0.0.1/32']\n\ntemplate \"#{node[:matching_node][:dir]}/sites-available/site_proxy.conf\" do\n  source 'site_proxy.matching_node.conf.erb'\n  variables(\n    :ssl_certificate =&gt;    \"#{node[:matching_node][:dir]}/shared/certificates/site_proxy.crt\",\n    :server_options =&gt;     node[:site][:matching_node][:server][:options],\n    :proxy_options =&gt;      node[:site][:matching_node][:proxy][:options]\n  )\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex", "macos", "terminal", "batch-rename"], "comments": [{"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525866542, "post_id": 50252588, "comment_id": 87522479, "body": "So you know the solution but looking for best fitting approach?"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525866656, "post_id": 50252588, "comment_id": 87522539, "body": "I know a solution, from here for a single pattern, but not two"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525866763, "post_id": 50252588, "comment_id": 87522595, "body": "Please elaborate on expected output. Currently it&#39;s hard to catch."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "reply_to_user": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "edited": false, "score": 0, "creation_date": 1525867065, "post_id": 50252588, "comment_id": 87522768, "body": "@revo updated above"}, {"owner": {"reputation": 41204, "user_id": 1072112, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fa3fecc914da2b7a82696d52729fc237?s=128&d=identicon&r=PG", "display_name": "ghoti", "link": "https://stackoverflow.com/users/1072112/ghoti"}, "edited": false, "score": 1, "creation_date": 1525868105, "post_id": 50252588, "comment_id": 87523417, "body": "What have you tried? Most of us here are happy to help you improve your craft, but are less happy acting as short order unpaid programming staff. Show us your work so far in an <a href=\"http://stackoverflow.com/help/mcve\">MCVE</a>, the result you were expecting and the results you got, and we&#39;ll help you figure it out."}], "answers": [{"comments": [{"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1525870675, "post_id": 50253205, "comment_id": 87525298, "body": "trying to do it with rename if possible, see above. any ideas?"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1525870781, "post_id": 50253205, "comment_id": 87525376, "body": "Try <code>&#39;s&#47;^.*?(?:(\\d\\d)Q(\\d)|(\\d)Q(\\d\\d))&#47;20$1$4Q$2$3_$0&#47;&#39;</code>."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1525870835, "post_id": 50253205, "comment_id": 87525424, "body": "I tried that got Use of uninitialized value $4 in concatenation (.) or string at (eval 2) line 1."}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1525871345, "post_id": 50253205, "comment_id": 87525794, "body": "I think if it finds the first pattern the second is nil. so it errors out"}, {"owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "reply_to_user": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 1, "creation_date": 1525871983, "post_id": 50253205, "comment_id": 87526232, "body": "@user2012677 It seems you can&#39;t get around this problem but I found that rename uses Perl regex flavor so modified regex to use features available in Perl. Try this <code>rename -n -e &#39;s&#47;^.*?(?|(\\d\\d)Q(\\d)|Q(\\d\\d)(?&lt;=(\\d)...))&#47;20$1Q$2_$&amp;&#47;&#39; *.pdf</code>"}, {"owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "edited": false, "score": 0, "creation_date": 1525872248, "post_id": 50253205, "comment_id": 87526426, "body": "Can you explain what it&#39;s doing?"}], "tags": [], "owner": {"reputation": 43580, "user_id": 1020526, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/Scjj8.jpg?s=128&g=1", "display_name": "revo", "link": "https://stackoverflow.com/users/1020526/revo"}, "is_accepted": true, "score": 1, "last_activity_date": 1525872903, "last_edit_date": 1592644375, "creation_date": 1525868181, "answer_id": 50253205, "question_id": 50252588, "link": "https://stackoverflow.com/questions/50252588/mac-os-x-rename-files-in-batch-2-patterns/50253205#50253205", "title": "Mac OS X Rename files in Batch (2 patterns)", "body": "<h2>Update</h2>\n<p><code>rename</code> uses Perl syntax for Regular Expressions. Following Perl it expects back-references to refer to a captured group otherwise that warning is displayed. Using Perl Regular Expressions there is a workaround for this using a <a href=\"https://www.regular-expressions.info/branchreset.html\" rel=\"nofollow noreferrer\">branch reset</a> construct <code>(?|(...)|(...)|...)</code> and a <a href=\"https://www.regular-expressions.info/lookaround.html\" rel=\"nofollow noreferrer\">positive lookbehind</a>:</p>\n<pre><code>^.*?(?|(\\d\\d)Q(\\d)|Q(\\d\\d)(?&lt;=(\\d)...))\n</code></pre>\n<p>replace with <code>20$1Q$2_$&amp;</code></p>\n<p>Regex breakdown:</p>\n<ul>\n<li><code>^</code> Match start of input string</li>\n<li><code>.*?</code> Match every thing (un-greedily) up to...</li>\n<li><code>(?|</code> Start of a branch reset construct\n<ul>\n<li><code>(\\d\\d)</code> Capture two digits in group 1</li>\n<li><code>Q</code> Match a <code>Q</code></li>\n<li><code>(\\d)</code> Capture a digit in group 2</li>\n<li><code>|</code> Or</li>\n<li><code>Q</code> Match a <code>Q</code></li>\n<li><code>(\\d\\d)</code> Capture two digits in group 1</li>\n<li><code>(?&lt;=(\\d)...)</code> Capture a digit preceding <code>Q</code> in group 2</li>\n</ul>\n</li>\n<li><code>)</code> End of construct</li>\n</ul>\n<p>This way both capturing groups exist at the same time, first capturing group always refers to 2 digits and second one to 1 digit and we don't need to deal with 4 different capturing groups.</p>\n<hr />\n<p>You could try to match both patterns starting with pattern with more digits at beginning, then use one replacement string that includes back-references to all capturing groups in order. Here is regex:</p>\n<pre><code>^.*?(?:(\\d\\d)Q(\\d)|(\\d)Q(\\d\\d))\n</code></pre>\n<p>and replacement string:</p>\n<pre><code>20\\1\\4Q\\2\\3_\\0\n</code></pre>\n<p>Ruby (<a href=\"https://ideone.com/J9QHjk\" rel=\"nofollow noreferrer\">Live demo</a>)</p>\n<pre><code>str.gsub(/^.*?(?:(\\d\\d)Q(\\d)|(\\d)Q(\\d\\d))/, '20\\1\\4Q\\2\\3_\\0')\n</code></pre>\n"}], "owner": {"reputation": 4416, "user_id": 2012677, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/8d7cb2fe712fb17f44f8c354bf37e7b5?s=128&d=identicon&r=PG&f=1", "display_name": "user2012677", "link": "https://stackoverflow.com/users/2012677/user2012677"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 647, "favorite_count": 0, "accepted_answer_id": 50253205, "answer_count": 1, "score": 1, "last_activity_date": 1525872903, "creation_date": 1525866275, "last_edit_date": 1525870447, "question_id": 50252588, "link": "https://stackoverflow.com/questions/50252588/mac-os-x-rename-files-in-batch-2-patterns", "title": "Mac OS X Rename files in Batch (2 patterns)", "body": "<p>I would like to match the <code>\\d\\dQ\\d</code> pattern or <code>\\dQ\\d\\d</code> pattern and reformat it in front of the file name.  Using OSX Terminal or ruby, what would be the best method to do this? It is a little more complicated because it is pattern 1 or pattern 2.</p>\n\n<p>In the first file, pattern \"3Q17\" for example is a date that means the 3rd quarter of year 2017. I need to add 2017Q3 in front of the file name. However, I have another pattern \"05Q1\" which means the 1st quarter of 2005, so I would need to add 2005Q1.</p>\n\n<p>Files:</p>\n\n<pre><code>ABC-EDFGH-JLG-Sample-3Q17-fIS.pdf \n                     ^^^^\n2Q13 ABC MF PM Example_fIS.pdf\n^^^^\n03Q1_FIS.pdf \n^^^^\n05Q1 ABC_IS.pdf\n^^^^\n</code></pre>\n\n<p>Files renamed:</p>\n\n<pre><code>2017Q3_ABC-EDFGH-JLG-Sample-3Q17-fIS.pdf\n2013Q2_2Q13 ABC MF PM Example_fIS.pdf\n2003Q1_03Q1_FIS.pdf\n2005Q1_05Q1 ABC_IS.pdf\n</code></pre>\n\n<p>This question helps with a single pattern, but not 2 patterns.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/24102974/mac-os-x-terminal-batch-rename?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">mac os x terminal batch rename</a></p>\n\n<p>My ruby code works fine:</p>\n\n<pre><code>Dir.glob(\"*.pdf\").each do |orig_name|\n    new_name = orig_name.gsub(/^.*?(?:(\\d\\d)Q(\\d)|(\\d)Q(\\d\\d))/, '20\\1\\4Q\\2\\3_\\0')\n    File.rename(orig_name, new_name)\nend\n</code></pre>\n\n<p>However, my rename script (using brew install rename) in the terminal provides the wrong results.</p>\n\n<pre><code>rename -n -e 's/^.*?(?:(\\d\\d)Q(\\d)|(\\d)Q(\\d\\d))/'20\\1\\4Q\\2\\3_\\0'/' *.pdf\n'03Q1_FIS.pdf' would be renamed to '2014Q23_0_FIS.pdf'\n'03Q1_vIS.pdf' would be renamed to '2014Q23_0_vIS.pdf'\n'05Q1 ABC_IS.pdf' would be renamed to '2014Q23_0 ABC_IS.pdf'\n'2Q13 ABC MF PM Example_fIS.pdf' would be renamed to '2014Q23_0 ABC MF PM Example_fIS.pdf'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "sqlite", "sequel"], "answers": [{"tags": [], "owner": {"reputation": 11331, "user_id": 132053, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f183bcc4176b308c9edabe79299e448f?s=128&d=identicon&r=PG", "display_name": "Jeremy Evans", "link": "https://stackoverflow.com/users/132053/jeremy-evans"}, "is_accepted": false, "score": 1, "last_activity_date": 1525877107, "creation_date": 1525877107, "answer_id": 50256175, "question_id": 50252473, "link": "https://stackoverflow.com/questions/50252473/how-do-i-fix-sequeldatabaseconnectionerror-while-changing-database/50256175#50256175", "title": "How do I fix Sequel::DatabaseConnectionError while changing database", "body": "<p>With the error being <code>SQLite3::CantOpenException: unable to open database file</code>, the issue is that the <code>ruby-sqlite3</code> driver cannot open the database file.  Try running <code>sqlite3 db/development.sqlite3</code> from the shell and see if you get the same or similar error.  If so, it could be the file doesn't exist or the user does not have access to it.  If not, it could be an issue in the <code>ruby-sqlite3</code> driver.</p>\n"}], "owner": {"reputation": 11, "user_id": 9625912, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-uChMycNqow0/AAAAAAAAAAI/AAAAAAAAADA/1qLLUf7Erxs/photo.jpg?sz=128", "display_name": "Andrey Anischik", "link": "https://stackoverflow.com/users/9625912/andrey-anischik"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 518, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1581288780, "creation_date": 1525865895, "last_edit_date": 1581288780, "question_id": 50252473, "link": "https://stackoverflow.com/questions/50252473/how-do-i-fix-sequeldatabaseconnectionerror-while-changing-database", "title": "How do I fix Sequel::DatabaseConnectionError while changing database", "body": "<p>In the process of transition from sqlite to postgresql, I use this command <code>taps server SQLite://db/development.sqlite3 jey 291298</code>, but then the following problem appears. Maybe something is wrong with Gemfile. My version of rails is 5.1.6.</p>\n\n<pre><code>C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/adapters/sqlite.rb:105:in `initialize': SQLite3::CantOpenException: unable to open database file (Sequel::DatabaseConnectionError)\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/adapters/sqlite.rb:105:in `new'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/adapters/sqlite.rb:105:in `connect'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/connection_pool.rb:126:in `make_new'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/connection_pool/threaded.rb:192:in `assign_connection'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/connection_pool/threaded.rb:133:in `acquire'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/connection_pool/threaded.rb:90:in `hold'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/database/connecting.rb:264:in `synchronize'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/database/connecting.rb:279:in `test_connection'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/database/connecting.rb:58:in `connect'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/sequel-5.8.0/lib/sequel/core.rb:116:in `connect'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/taps-0.3.24/lib/taps/db_session.rb:1:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/taps-0.3.24/lib/taps/server.rb:4:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/2.3.0/rubygems/core_ext/kernel_require.rb:55:in `require'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/taps-0.3.24/lib/taps/cli.rb:61:in `server'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/taps-0.3.24/lib/taps/cli.rb:27:in `run'\n    from C:/RailsInstaller/Ruby2.3.3/lib/ruby/gems/2.3.0/gems/taps-0.3.24/bin/taps:6:in `&lt;top (required)&gt;'\n    from C:/RailsInstaller/Ruby2.3.3/bin/taps:22:in `load'\n    from C:/RailsInstaller/Ruby2.3.3/bin/taps:22:in `&lt;main&gt;'\n</code></pre>\n\n<p><strong>Gemfile</strong></p>\n\n<pre><code>gem 'whenever', require: false\ngem 'bcrypt', platforms: :ruby\ngem 'cancan'\ngem 'devise' \ngem 'rubocop', require: false\ngem 'ransack'\ngem 'kaminari'\ngem 'nested_form'\ngem 'simple_form'\ngem 'state_machine'\ngem 'ruby-graphviz', :require =&gt; 'graphviz'\ngem 'stateful_enum'\ngem 'hpricot'\ngem 'highline'\ngem \"slim-rails\"  \ngem 'rails', '~&gt; 5.1.6'\ngem 'pg'\ngem 'resque'\ngem 'sinatra', '~&gt; 2.0.0.beta2'\ngem 'puma', '~&gt; 3.7'\ngem 'sass-rails', '~&gt; 5.0'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.2' \ngem 'turbolinks', '~&gt; 5'\ngem 'jbuilder', '~&gt; 2.5'\ngem 'bullet', group: 'development'\n</code></pre>\n\n<p><strong>Some fragments from Gemfile.lock:</strong></p>\n\n<pre><code>sequel (5.8.0)\nsinatra (2.0.1)\n  mustermann (~&gt; 1.0)\n  rack (~&gt; 2.0)\n  rack-protection (= 2.0.1)\n  tilt (~&gt; 2.0)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "jquery-select2", "select2-rails"], "comments": [{"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1525862602, "post_id": 50251430, "comment_id": 87519924, "body": "Ok. what did you try? Where you got stuck?"}, {"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "reply_to_user": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1525862858, "post_id": 50251430, "comment_id": 87520081, "body": "I tried implementing the f.collection_select line that I posted - says NoMethod error collection_select"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 2, "creation_date": 1525865138, "post_id": 50251430, "comment_id": 87521548, "body": "That&#39;s because <code>f</code> is <code>nil</code>. <i>#form_tag</i> doesn&#39;t pass any params to it&#39;s block. You&#39;ll have to use <i>#form_with</i> instead (set <code>local: true</code> if you want to keep the same behaviour). <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/FormHelper.html#method-i-form_with\" rel=\"nofollow noreferrer\">api.rubyonrails.org/classes/ActionView/Helpers/&hellip;</a>"}, {"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "reply_to_user": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1525865851, "post_id": 50251430, "comment_id": 87522043, "body": "@JohanWentholt Yes! Ive got my form working now, but the only problem I still have is whenever I try to submit my form, it won&#39;t actually switch the page to the chosen-search-object.. It changes the URL to <a href=\"http://localhost:3000/posts?utf8=%E2%9C%93&amp;post_id=16&amp;commit=Search\" rel=\"nofollow noreferrer\">localhost:3000/&hellip;</a> but wont actually change the page."}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1525867999, "post_id": 50251430, "comment_id": 87523325, "body": "If you want the exact same form as in you example you have to set the following: <code>form_with url: posts_path, method: :get, local: :true</code>. Do you have those options set? If yes, what request do you receive on the server?"}, {"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "edited": false, "score": 0, "creation_date": 1525868389, "post_id": 50251430, "comment_id": 87523633, "body": "Yes, I just updated my Question with my current code. I did that already with the link you sent.   Whenever I want to open a Post-Show-Page via the Submit button, it just changes the URL but won&#39;t actually change the page as I mentioned earlier. I will update my Question with the full request."}], "answers": [{"comments": [{"owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "edited": false, "score": 0, "creation_date": 1526365900, "post_id": 50338990, "comment_id": 87703112, "body": "Thank you so much for this detailed answer! I see the problem that I was going through now and was able to fix it.  Basically, your JavaScript example looks reasonable to me- but I still went with your alternative solution because it just works with the way I tried it. You have my upvote here and the best answer as well for sure!"}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": true, "score": 1, "last_activity_date": 1526334445, "last_edit_date": 1526334445, "creation_date": 1526331862, "answer_id": 50338990, "question_id": 50251430, "link": "https://stackoverflow.com/questions/50251430/ruby-on-rails-select2-submit-doesnt-work/50338990#50338990", "title": "Ruby on Rails select2 submit doesn&#39;t work", "body": "<p>The Rails framework is not wrong for sending you to that URL, since you set the <em>form_with</em> <code>:url</code> option to <code>posts_path</code>. This is equal to <code>/posts</code>.</p>\n\n<p>What you are trying to do is change the form action based on the select content. For this you'll need JavaScript to change the form action on the fly.</p>\n\n<p>Here is a simplified example:</p>\n\n<p><strong>app/views/some_directory/some_file.html.erb</strong></p>\n\n<pre><code>&lt;%= form_with url: posts_path, method: :get, local: true do |form| %&gt;\n  &lt;% options = {include_blank: 'Post titles'} %&gt;\n  &lt;% html_options = {\n     class: 'selectbooktitle form-control', \n     'data-change-form-action-with-value': true,\n  } %&gt;\n\n  &lt;%= form.collection_select :post_path, Post.all, method(:post_path), :title, options, html_options %&gt;\n  &lt;%= form.submit 'Search', class: 'btn btn-outline-success'%&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>app/assets/javascripts/some_file.coffee</strong></p>\n\n<pre><code>initChangeFormActionWithValue = (selectElement) -&gt;\n  selectElement       = $(selectElement)\n  closestAncestorForm = selectElement.closest('form')\n\n  selectElement.on 'change', -&gt;\n    closestAncestorForm.attr 'action', selectElement.val()\n\n$(document).on 'turbolinks:load', -&gt;\n  $('select[data-change-form-action-with-value=\"true\"]')\n    .each -&gt; initChangeFormActionWithValue(this)\n</code></pre>\n\n<p>Now when changing the select value the form is updated with the value of the selected option (which contains the post path). And when you submit your request you'll request <code>GET /posts/:id</code>.</p>\n\n<blockquote>\n  <p><strong>Note:</strong> This is a simplified solution. Which requests <code>GET /posts/:id</code> of the selected post. However the values of the form are also submitted. You can leave them unhandled, but should at least know that their there. So you are not surprised when you see the <em>post_path</em> or <em>submit</em> params in the show.</p>\n  \n  <p>Furthermore if you don't change the select at all when pressing submit you currently just request <code>GET /posts</code>. And if you change to select value to a post and back to <code>'Post titles'</code> (the blank value), the action is cleared. Which means you get the current URL.</p>\n</blockquote>\n\n<hr>\n\n<p>Alternatively you can go with your current solution. Than in your <em>PostsController#index</em> redirect to <em>PostsController#show</em> if <code>params[:post_id]</code> is present.</p>\n\n<pre><code>class PostsController &lt; ApplicationController\n\n  def index\n    return redirect_to post_path(params[:post_id]) if params[:post_id]\n\n    # other index code\n  end\n\nend\n</code></pre>\n"}], "owner": {"reputation": 194, "user_id": 9252006, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cf140a21843b445b7ea06baef8e054df?s=128&d=identicon&r=PG", "display_name": "benl96", "link": "https://stackoverflow.com/users/9252006/benl96"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 50338990, "answer_count": 1, "score": -1, "last_activity_date": 1526334445, "creation_date": 1525862532, "last_edit_date": 1526290693, "question_id": 50251430, "link": "https://stackoverflow.com/questions/50251430/ruby-on-rails-select2-submit-doesnt-work", "title": "Ruby on Rails select2 submit doesn&#39;t work", "body": "<pre><code>  https://select2.org/getting-started/basic-usage\n</code></pre>\n\n<p>I want to search for a Post title like the first example in the link above.</p>\n\n<p>Code:</p>\n\n<pre><code>&lt;!-- search --&gt;\n      &lt;div class=\"card my-auto\"&gt;\n        &lt;%= form_with url: posts_path, method: :get, local: :true do |f| %&gt;\n          &lt;div class=\"card-body\"&gt;\n            &lt;p&gt;Search for a Post title.&lt;/p&gt;\n            &lt;%= f.collection_select(:post_id, Post.all, :id, :title, {include_blank: 'Post titles'}, {class:'selectbooktitle form-control'}) %&gt;\n            &lt;hr&gt;\n            &lt;div class=\"input-group\"&gt;\n                &lt;span class=\"input-group-btn\"&gt;\n                  &lt;%= f.submit 'Search', class: 'btn btn-outline-success'%&gt;\n\n                &lt;/span&gt;\n        &lt;% end %&gt;\n        &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n</code></pre>\n\n<p>This is the Request from my server when clicking on Submit.</p>\n\n<pre><code>Started GET \"/posts?utf8=%E2%9C%93&amp;post_id=16&amp;commit=Search\" for 127.0.0.1 at 2018-05-09 14:18:51 +0200\nProcessing by PostsController#index as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"post_id\"=&gt;\"16\", \"commit\"=&gt;\"Search\"}\n  Rendering posts/index.html.erb within layouts/application\n  Post Load (0.3ms)  SELECT \"posts\".* FROM \"posts\"\n  Post Load (0.3ms)  SELECT \"posts\".* FROM \"posts\" ORDER BY created_at DESC\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  CACHE User Load (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  CACHE User Load (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  CACHE User Load (0.0ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 1], [\"LIMIT\", 1]]\n  User Load (0.2ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT $2  [[\"id\", 4], [\"LIMIT\", 1]]\n  Rendered posts/index.html.erb within layouts/application (10.2ms)\n  Category Load (0.3ms)  SELECT \"categories\".* FROM \"categories\"\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 ORDER BY \"users\".\"id\" ASC LIMIT $2  [[\"id\", 2], [\"LIMIT\", 1]]\n  Rendered layouts/_navbar.html.erb (4.5ms)\n  Rendered layouts/_alerts.html.erb (0.4ms)\n  Rendered layouts/_footer.html.erb (0.6ms)\nCompleted 200 OK in 59ms (Views: 55.0ms | ActiveRecord: 1.9ms)\n</code></pre>\n\n<p>Leads to this URL:</p>\n\n<pre><code>http://localhost:3000/posts?utf8=%E2%9C%93&amp;post_id=20&amp;commit=Search\n</code></pre>\n\n<p>it should lead to the following URL:</p>\n\n<pre><code>http://localhost:3000/posts/20\n</code></pre>\n\n<p>What am I doing wrong? </p>\n\n<p>Thank you in advance for any help!</p>\n"}, {"tags": ["ruby", "dynamic-dispatch"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1525862736, "post_id": 50250982, "comment_id": 87520004, "body": "Why do you have such string in the first place? Where does it come from?"}, {"owner": {"reputation": 449, "user_id": 6324558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695946b2499d7dcb2759724e66cfad38?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Delahaye", "link": "https://stackoverflow.com/users/6324558/alexis-delahaye"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1525863011, "post_id": 50250982, "comment_id": 87520165, "body": "in my rails app it comes from my <code>params[:sort_by]</code> , and it is the name of the column coming from the view. For example I have the column &#39;header.title&#39; so I do <code>@profiles.sort_by{ |a|        params[:sort_by].inject(a) { |r, m| r.send(m) }       }</code>  but I don&#39;t get why it should not be a legit question even if my string is made up ?"}], "answers": [{"tags": [], "owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "is_accepted": true, "score": 3, "last_activity_date": 1525861554, "creation_date": 1525861554, "answer_id": 50251094, "question_id": 50250982, "link": "https://stackoverflow.com/questions/50250982/ruby-dynamic-dispatch-with-consecutive-method-call/50251094#50251094", "title": "ruby dynamic dispatch with consecutive method call", "body": "<p>Try this:</p>\n\n<pre><code>a = A.new\nmethods_ary = dynamic_string.split('.')\nmethods_ary.inject(a) { |r, m| r.send(m) }\n</code></pre>\n"}], "owner": {"reputation": 449, "user_id": 6324558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695946b2499d7dcb2759724e66cfad38?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Delahaye", "link": "https://stackoverflow.com/users/6324558/alexis-delahaye"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 127, "favorite_count": 0, "accepted_answer_id": 50251094, "answer_count": 1, "score": -1, "last_activity_date": 1525861554, "creation_date": 1525861235, "question_id": 50250982, "link": "https://stackoverflow.com/questions/50250982/ruby-dynamic-dispatch-with-consecutive-method-call", "title": "ruby dynamic dispatch with consecutive method call", "body": "<p>I am encoutering a small problem while performing dynamic dispatch on some object in Ruby</p>\n\n<p>I want to call a method, but I can only obtain it using multiple calls</p>\n\n<p>i.e : <code>dynamic_string = 'my_object.other_object.this_method'</code></p>\n\n<p>I want to call <code>this_method</code> on <code>other_object</code> that I got from <code>my_object.other_object</code></p>\n\n<p>Here is my MCVE :</p>\n\n<pre><code>class A\n    attr_reader :b\n    def initialize\n        @b = B.new\n    end\nend\nclass B\n    def this\n        'i want this dynamically'\n    end\nend\n\na = A.new\na.b.this # =&gt; 'i want this dynamically'\ndynamic_string = 'b.this'\na.send(dynamic_string) # =&gt; error below\n</code></pre>\n\n<p><code>NoMethodError: undefined method 'b.this' for #&lt;A:0x000000025598b0 @b=#&lt;B:0x00000002559888&gt;&gt;</code></p>\n\n<p>From what I understand the send method is trying to call the litteral method <code>b.this</code> on the <code>a</code> object.</p>\n\n<p>I know that to make it work I have to make theses consecutive calls :</p>\n\n<p><code>a.send('b').send('this')</code> but I can't figure out how to make this dynamically</p>\n\n<p>How can I achieve consecutive dynamic calls ? ( in this example I only need 2 calls, but I would like a more generic solution if possible, that would work for every number of calls)</p>\n"}, {"tags": ["ruby", "modbus-tcp"], "answers": [{"tags": [], "owner": {"reputation": 712, "user_id": 2457149, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/y2FcA.png?s=128&g=1", "display_name": "Twonky", "link": "https://stackoverflow.com/users/2457149/twonky"}, "is_accepted": false, "score": 1, "last_activity_date": 1525864270, "creation_date": 1525864270, "answer_id": 50251969, "question_id": 50249372, "link": "https://stackoverflow.com/questions/50249372/modbus-tcp-communication-using-ruby-failing-to-implement-helloworld/50251969#50251969", "title": "ModBus TCP communication using Ruby: failing to implement HelloWorld", "body": "<p>Okay, this one was rather stupid. For the records (and others who might want to talk to their Helios using rmodbus):</p>\n\n<pre><code>slave.debug = 1 \n</code></pre>\n\n<p>turns on the debugging which outputs the byte stream sent to the modbus slave. The first bytes sequence is supposed to be: transaction number (2 byte), protocol specifier (2 byte, always zero), size of the following message (2 byte), unit identifier (1 byte, <em>always 180 for Helios KWL</em>).</p>\n\n<p>The slave needs to be initialized with its unit identifier 180, instead of 1:</p>\n\n<pre><code>client.with_slave(180) do |slave|\n</code></pre>\n"}], "owner": {"reputation": 712, "user_id": 2457149, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/y2FcA.png?s=128&g=1", "display_name": "Twonky", "link": "https://stackoverflow.com/users/2457149/twonky"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 409, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1525864270, "creation_date": 1525856415, "last_edit_date": 1525863201, "question_id": 50249372, "link": "https://stackoverflow.com/questions/50249372/modbus-tcp-communication-using-ruby-failing-to-implement-helloworld", "title": "ModBus TCP communication using Ruby: failing to implement HelloWorld", "body": "<p>I am able to communicate with a ventilation installation (<a href=\"https://www.heliosventilatoren.de/mbv/kwl_modbus_easycontrols_82269-001_0917.pdf\" rel=\"nofollow noreferrer\">Helios KWL EC 500 W</a> which supports holding registers only, english description starts at 50% of the file) using the <a href=\"http://www.modbusdriver.com/modpoll.html\" rel=\"nofollow noreferrer\">modpoll</a> utility v3.4. But I failed to transfer the very first communication to Ruby and the <a href=\"https://github.com/rmodbus/rmodbus\" rel=\"nofollow noreferrer\">rmodbus library</a> v1.3.3.</p>\n\n<p>With modpoll, I may request some temperature value with the command</p>\n\n<pre><code>./modpoll -m tcp -a 180 &lt;ipaddr&gt; 0x7630 0x3031 0x3034 0x0000\n</code></pre>\n\n<p>and then read the data using</p>\n\n<pre><code>./modpoll -m tcp -a 180 -t4:hex -c 8 -0 -1 &lt;ipaddr&gt;\n Protocol configuration: MODBUS/TCP\n Slave configuration...: address = 180, start reference = 1 (PDU), count = 8\n Communication.........: x.x.x.x, port 502, t/o 2.00 s, poll rate 1000 ms\n Data type.............: 16-bit register (hex), output (holding) register table\n -- Polling slave...\n [1]: 0x7630\n</code></pre>\n\n<p>which outputs 8 16bit registers as stated as example in the Helios modbus documentation. As very first step, I tried to move the read part to Ruby. However, my Ruby code times out:</p>\n\n<pre><code>require 'rmodbus'\nModBus::TCPClient.new(ipaddr, 502) do |client|\n  client.with_slave(1) do |slave|\n    slave.debug = true\n    puts slave.holding_registers[180..187]\n  end\nend\n</code></pre>\n\n<p>and throws the exception</p>\n\n<pre><code>/var/lib/gems/2.3.0/gems/rmodbus-1.3.3/lib/rmodbus/slave.rb:241:in `rescue in query': \nTimed out during read attempt (ModBus::Errors::ModBusTimeout)\nfrom /var/lib/gems/2.3.0/gems/rmodbus-1.3.3/lib/rmodbus/slave.rb:232:in `query'\nfrom /var/lib/gems/2.3.0/gems/rmodbus-1.3.3/lib/rmodbus/slave.rb:164:in `read_holding_registers'\n</code></pre>\n\n<p>What's wrong?</p>\n\n<p>I am not sure if / how to use the parameters output by modpoll \"address =180\" and \"start reference =1\". Is \"address\" equivalent to \"holding register #\"?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sqlite"], "comments": [{"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1525856910, "post_id": 50249153, "comment_id": 87516297, "body": "By default <code>Rails</code> comes in bundled with <code>Sqllite</code> only so it should not cause any problem. Can you search your <code>Gemfile.lock</code> for <code>Sqllite</code> gem and post the current installed version?"}, {"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1525857016, "post_id": 50249153, "comment_id": 87516351, "body": "Possible duplicate of <a href=\"https://stackoverflow.com/questions/17643897/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-on-ruby-on-rails\">cannot load such file -- sqlite3/sqlite3_native (LoadError) on ruby on rails</a>"}, {"owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "reply_to_user": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1525857274, "post_id": 50249153, "comment_id": 87516507, "body": "The question is a duplicate, yes, but as I stated in my post I have already looked at that answer and it didn&#39;t work"}, {"owner": {"reputation": 413, "user_id": 5149471, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-Sqr06HaqS7s/AAAAAAAAAAI/AAAAAAAAABc/0GICbgbAH0A/photo.jpg?sz=128", "display_name": "Akash Pinnaka", "link": "https://stackoverflow.com/users/5149471/akash-pinnaka"}, "edited": false, "score": 0, "creation_date": 1525857573, "post_id": 50249153, "comment_id": 87516703, "body": "In your gem file add the line <code>ruby &#39;2.5.1&#39;</code>.  It may work. Even it works, its not the permanent fix. Try this and let me know. We proceed further."}, {"owner": {"reputation": 653, "user_id": 8036445, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7bb5ed1c3c2b3b03d10f179fb8f4078c?s=128&d=identicon&r=PG", "display_name": "Velusamy Venkatraman", "link": "https://stackoverflow.com/users/8036445/velusamy-venkatraman"}, "edited": false, "score": 0, "creation_date": 1525858462, "post_id": 50249153, "comment_id": 87517285, "body": "Try to run command prompt on <code>run as a administrator</code> mode then try"}, {"owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "reply_to_user": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "edited": false, "score": 0, "creation_date": 1525871372, "post_id": 50249153, "comment_id": 87525810, "body": "@Swaps sqlite3 gem is version number 1.3.13"}, {"owner": {"reputation": 2500, "user_id": 1497597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e86c15a7b980952c674a567853249751?s=128&d=identicon&r=PG", "display_name": "D T", "link": "https://stackoverflow.com/users/1497597/d-t"}, "edited": false, "score": 0, "creation_date": 1526874276, "post_id": 50249153, "comment_id": 87897565, "body": "i have the same this problem: version install: Ruby+Devkit 2.5.1-1 (x64) at <a href=\"https://rubyinstaller.org/downloads/\" rel=\"nofollow noreferrer\">rubyinstaller.org/downloads</a>"}, {"owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "edited": false, "score": 0, "creation_date": 1526889307, "post_id": 50249153, "comment_id": 87902328, "body": "Please add your Gemfile."}, {"owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "reply_to_user": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "edited": false, "score": 0, "creation_date": 1526908095, "post_id": 50249153, "comment_id": 87912331, "body": "@SachinSingh Gemfile added"}, {"owner": {"reputation": 5579, "user_id": 3970701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/a937016807c66d89d0a62d7a1b235533?s=128&d=identicon&r=PG", "display_name": "Amin Shah Gilani", "link": "https://stackoverflow.com/users/3970701/amin-shah-gilani"}, "edited": false, "score": 0, "creation_date": 1526926709, "post_id": 50249153, "comment_id": 87922292, "body": "Try <code>bundle exec rails s</code>."}, {"owner": {"reputation": 6929, "user_id": 1262519, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/zvPMu.jpg?s=128&g=1", "display_name": "Sachin Singh", "link": "https://stackoverflow.com/users/1262519/sachin-singh"}, "edited": false, "score": 0, "creation_date": 1526969783, "post_id": 50249153, "comment_id": 87935014, "body": "@owen it does not seem to complete Gemfile, because the exception is coming from <code>bootsnap</code> gem, which is not present in Gemfile."}, {"owner": {"reputation": 2500, "user_id": 1497597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e86c15a7b980952c674a567853249751?s=128&d=identicon&r=PG", "display_name": "D T", "link": "https://stackoverflow.com/users/1497597/d-t"}, "edited": false, "score": 0, "creation_date": 1527073010, "post_id": 50249153, "comment_id": 87985926, "body": "People do not get this error? the problem : it can&#39;t load sqlite3. i changed s.require_paths= [&quot;lib/sqlite3_native&quot;] or reinstall sqlite3, but it still not working. if i create a Rails app and connect to Postgresql, It is ok."}], "answers": [{"comments": [{"owner": {"reputation": 3201, "user_id": 2892779, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/uvM8S.jpg?s=128&g=1", "display_name": "Jay Dorsey", "link": "https://stackoverflow.com/users/2892779/jay-dorsey"}, "edited": false, "score": 2, "creation_date": 1527101675, "post_id": 50455844, "comment_id": 88003874, "body": "Running the Linux subsystem comes with it&#39;s own caveats and problems (especially if the poster isn&#39;t familiar with Linux). It also may not be an option, because we don&#39;t know the posters requirements."}], "tags": [], "owner": {"reputation": 49, "user_id": 9824931, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e9c74859b632eb89ceb3195044b4786?s=128&d=identicon&r=PG&f=1", "display_name": "N0xFF", "link": "https://stackoverflow.com/users/9824931/n0xff"}, "is_accepted": false, "score": -4, "last_activity_date": 1526932948, "creation_date": 1526932948, "answer_id": 50455844, "question_id": 50249153, "link": "https://stackoverflow.com/questions/50249153/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-ruby-on-rails/50455844#50455844", "title": "cannot load such file \u2014 sqlite3/sqlite3_native (LoadError) Ruby on Rails", "body": "<p>Don't complicate your life in Windows 10.</p>\n\n<p>Install <strong>bash</strong>: </p>\n\n<ol>\n<li>Open <strong>Microsoft Store</strong>.</li>\n<li>Find and install <strong>Ubuntu</strong>.</li>\n<li>Run it and then you can install ruby/rails etc.</li>\n</ol>\n\n<p>So you can use all features without Windows-specific problems.</p>\n"}, {"comments": [{"owner": {"reputation": 2500, "user_id": 1497597, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/e86c15a7b980952c674a567853249751?s=128&d=identicon&r=PG", "display_name": "D T", "link": "https://stackoverflow.com/users/1497597/d-t"}, "edited": false, "score": 0, "creation_date": 1527129380, "post_id": 50490399, "comment_id": 88012881, "body": "Thanks, it had working. Unexpectedly, Ver has error but still released."}], "tags": [], "owner": {"reputation": 694, "user_id": 6481767, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/881dc5adac4bec55f445d812f2e32505?s=128&d=identicon&r=PG&f=1", "display_name": "Aaditya Maheshwari", "link": "https://stackoverflow.com/users/6481767/aaditya-maheshwari"}, "is_accepted": true, "score": 16, "last_activity_date": 1527084788, "last_edit_date": 1527084788, "creation_date": 1527084119, "answer_id": 50490399, "question_id": 50249153, "link": "https://stackoverflow.com/questions/50249153/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-ruby-on-rails/50490399#50490399", "title": "cannot load such file \u2014 sqlite3/sqlite3_native (LoadError) Ruby on Rails", "body": "<p>This should work for you since I had the exact same issue. Make sure you have this in your gemfile:</p>\n\n<p><code>gem 'sqlite3', git: \"https://github.com/larskanis/sqlite3-ruby\", branch: \"add-gemspec\"</code></p>\n\n<p>At the time of writing this post I can confirm this works for me.</p>\n\n<p>EDIT: For ref &amp; to keep track of the issue keep an eye on this: <a href=\"https://github.com/sparklemotion/sqlite3-ruby/pull/229\" rel=\"noreferrer\">https://github.com/sparklemotion/sqlite3-ruby/pull/229</a></p>\n\n<p>As you see, they merged the fix like 6 days ago, but I think the CD/CI tag on the repo says build failing hence they are yet to release the fix in the gem.\nFor now just refer the branch as the source &amp; you should be good.</p>\n"}, {"comments": [{"owner": {"reputation": 2059, "user_id": 80917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1bcec20cca6b6e9602403a90e74618ba?s=128&d=identicon&r=PG", "display_name": "se_pavel", "link": "https://stackoverflow.com/users/80917/se-pavel"}, "edited": false, "score": 0, "creation_date": 1528114556, "post_id": 50680295, "comment_id": 88370144, "body": "3) put sqlite3.dll to path"}], "tags": [], "owner": {"reputation": 2059, "user_id": 80917, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/1bcec20cca6b6e9602403a90e74618ba?s=128&d=identicon&r=PG", "display_name": "se_pavel", "link": "https://stackoverflow.com/users/80917/se-pavel"}, "is_accepted": false, "score": 0, "last_activity_date": 1528114215, "creation_date": 1528114215, "answer_id": 50680295, "question_id": 50249153, "link": "https://stackoverflow.com/questions/50249153/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-ruby-on-rails/50680295#50680295", "title": "cannot load such file \u2014 sqlite3/sqlite3_native (LoadError) Ruby on Rails", "body": "<p>on windows with chefdk\n1) download sqlite3.h/sqlite3.dll from original site\n2) gem install sqlite3 --platform ruby -- --with-opt-include=C:/sqlitedir --with-sqlite3-dir=C:/sqlitedir --with-sqlite3-lib=C:/sqlitedir </p>\n"}], "owner": {"reputation": 321, "user_id": 7631261, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/34c3f5c01682697bbf4c010f477c47f1?s=128&d=identicon&r=PG&f=1", "display_name": "Owen", "link": "https://stackoverflow.com/users/7631261/owen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5379, "favorite_count": 1, "accepted_answer_id": 50490399, "answer_count": 3, "score": 5, "last_activity_date": 1528114215, "creation_date": 1525855780, "last_edit_date": 1526969582, "question_id": 50249153, "link": "https://stackoverflow.com/questions/50249153/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-ruby-on-rails", "title": "cannot load such file \u2014 sqlite3/sqlite3_native (LoadError) Ruby on Rails", "body": "<p>I have looked at several other posts on this and tried the solutions without success. </p>\n\n<p>The question is marked as a duplicate of this solution \n<a href=\"https://stackoverflow.com/questions/17643897/cannot-load-such-file-sqlite3-sqlite3-native-loaderror-on-ruby-on-rails\">cannot load such file -- sqlite3/sqlite3_native (LoadError) on ruby on rails</a>\nbut the answer given didn't work for me. I simply got the same error</p>\n\n<p>I have just installed rails so everything is up-to-date\nI am using the following: Windows 10, ruby version 2.5.1, rails version 5.2.0</p>\n\n<p>have also tried updating SQLite gem with bundle update.</p>\n\n<p>here is the error:</p>\n\n<pre><code>C:\\proje&gt;rails s\n\nTraceback (most recent call last):\n\n        43: from bin/rails:4:in `&lt;main&gt;'\n\n        42: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require'\n\n        41: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency'\n\n        40: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'\n\n        39: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n\n        38: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n\n        37: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n\n        36: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n\n        35: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n\n        34: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands.rb:18:in `&lt;top (required)&gt;'\n\n        33: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/command.rb:46:in `invoke'\n\n        32: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/command/base.rb:65:in `perform'\n\n        31: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor.rb:387:in `dispatch'\n\n        30: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/invocation.rb:126:in `invoke_command'\n\n        29: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/thor-0.20.0/lib/thor/command.rb:27:in `run'\n\n        28: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `perform'\n\n        27: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:142:in `tap'\n\n        26: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/railties-5.2.0/lib/rails/commands/server/server_command.rb:145:in `block in perform'\n\n        25: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require'\n\n        24: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency'\n\n        23: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'\n\n        22: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:29:in `require'\n\n        21: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:20:in `require_with_bootsnap_lfi'\n\n        20: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n\n        19: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `block in require_with_bootsnap_lfi'\n\n        18: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:21:in `require'\n\n        17: from C:/proje/config/application.rb:7:in `&lt;top (required)&gt;'\n\n        16: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler.rb:114:in `require'\n\n        15: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:65:in `require'\n\n        14: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:65:in `each'\n\n        13: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:76:in `block in require'\n\n        12: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:76:in `each'\n\n        11: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bundler-1.16.1/lib/bundler/runtime.rb:81:in `block (2 levels) in require'\n\n        10: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:79:in `require'\n\n         9: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:70:in `require_with_bootsnap_lfi'\n\n         8: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/loaded_features_index.rb:65:in `register'\n\n         7: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:71:in `block in require_with_bootsnap_lfi'\n\n         6: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:71:in `require'\n\n         5: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/sqlite3-1.3.13-x64-mingw32/lib/sqlite3.rb:2:in `&lt;top (required)&gt;'\n\n         4: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/sqlite3-1.3.13-x64-mingw32/lib/sqlite3.rb:6:in `rescue in &lt;top (required)&gt;'\n\n         3: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `require'\n\n         2: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:249:in `load_dependency'\n\n         1: from C:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/activesupport-5.2.0/lib/active_support/dependencies.rb:283:in `block in require'\n\nC:/Ruby25-x64/lib/ruby/gems/2.5.0/gems/bootsnap-1.3.0/lib/bootsnap/load_path_cache/core_ext/kernel_require.rb:32:in `require': cannot load such file -- sqlite3/sqlite3_native (LoadError)\n\n\n\nC:\\proje&gt;\n</code></pre>\n\n<p>How can I proceed?</p>\n\n<p>EDIT: add Gemfile</p>\n\n<pre><code>source 'https://rubygems.org'\n\n    git_source(:github) do |repo_name|\n      repo_name = \"#{repo_name}/#{repo_name}\" unless repo_name.include?(\"/\")\n      \"https://github.com/#{repo_name}.git\"\n    end\n\n\n    # Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\n    gem 'rails', '~&gt; 5.0.7'\n    # Use sqlite3 as the database for Active Record\n    gem 'sqlite3'\n    # Use Puma as the app server\n    gem 'puma', '~&gt; 3.0'\n    # Use SCSS for stylesheets\n    gem 'sass-rails', '~&gt; 5.0'\n    # Use Uglifier as compressor for JavaScript assets\n    gem 'uglifier', '&gt;= 1.3.0'\n    # Use CoffeeScript for .coffee assets and views\n    gem 'coffee-rails', '~&gt; 4.2'\n    # See https://github.com/rails/execjs#readme for more supported runtimes\n    # gem 'therubyracer', platforms: :ruby\n\n    # Use jquery as the JavaScript library\n    gem 'jquery-rails'\n    # Turbolinks makes navigating your web application faster. Read more: https://github.com/turbolinks/turbolinks\n    gem 'turbolinks', '~&gt; 5'\n    # Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\n    gem 'jbuilder', '~&gt; 2.5'\n    # Use Redis adapter to run Action Cable in production\n    # gem 'redis', '~&gt; 3.0'\n    # Use ActiveModel has_secure_password\n    # gem 'bcrypt', '~&gt; 3.1.7'\n\n    # Use Capistrano for deployment\n    # gem 'capistrano-rails', group: :development\n\n    group :development, :test do\n      # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n      gem 'byebug', platform: :mri\n    end\n\n    group :development do\n      # Access an IRB console on exception pages or by using &lt;%= console %&gt; anywhere in the code.\n      gem 'web-console', '&gt;= 3.3.0'\n    end\n\n    # Windows does not include zoneinfo files, so bundle the tzinfo-data gem\n    gem 'tzinfo-data', platforms: [:mingw, :mswin, :x64_mingw, :jruby]\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1525858400, "post_id": 50246989, "comment_id": 87517246, "body": "From <a href=\"https://github.com/bbatsov/ruby-style-guide\" rel=\"nofollow noreferrer\">the ruby style guide</a>: The <code>and</code> and <code>or</code> keywords are banned. The minimal added readability is just not worth the high probability of introducing subtle bugs. For boolean expressions, always use <code>&amp;&amp;</code> and <code>||</code> instead."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1525858451, "post_id": 50246989, "comment_id": 87517281, "body": "This question is a good example of why using <code>and</code> and <code>or</code> cause more problems than they&#39;re worth. Frankly, I&#39;d rather see those key words just removed from the language. (But that will almost certainly never happen, due to backwards compatibility!)"}], "owner": {"reputation": 3833, "user_id": 1316649, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2853dcfa81b2519771bc048d23ec9b94?s=128&d=identicon&r=PG", "display_name": "fstang", "link": "https://stackoverflow.com/users/1316649/fstang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 41, "favorite_count": 0, "closed_date": 1525848118, "answer_count": 0, "score": 0, "last_activity_date": 1525848263, "creation_date": 1525847984, "last_edit_date": 1525848263, "question_id": 50246989, "link": "https://stackoverflow.com/questions/50246989/void-value-expression-error-in-return-statement", "closed_reason": "Duplicate", "title": "Void value expression error in return statement", "body": "<p>Why does calling <code>f()</code> with the following definition report <code>void value expression</code> error while calling <code>g()</code> is OK?</p>\n\n<pre><code>def f(n)\n  return n == 0 or n == 1\nend\n\ndef g(n)\n  return (n == 0 or n == 1)\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "edited": false, "score": 2, "creation_date": 1525842634, "post_id": 50245898, "comment_id": 87509212, "body": "What&#39;s the issue here? error message is self explanatory."}, {"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1525842663, "post_id": 50245898, "comment_id": 87509224, "body": "The error message is quite descriptive in this case, the problem is exactly what it says."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1525856848, "post_id": 50245898, "comment_id": 87516259, "body": "I think you need <code>blank?</code> instead of  <code>exists?</code>"}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8781387, "user_type": "registered", "profile_image": "https://graph.facebook.com/144941262915165/picture?type=large", "display_name": "Jesse Scott", "link": "https://stackoverflow.com/users/8781387/jesse-scott"}, "edited": false, "score": 0, "creation_date": 1525866187, "post_id": 50246369, "comment_id": 87522292, "body": "Thank you for your help!"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 0, "last_activity_date": 1525845172, "creation_date": 1525845172, "answer_id": 50246369, "question_id": 50245898, "link": "https://stackoverflow.com/questions/50245898/test2-rb15in-main-undefined-method-exists-for-skilleddevstring-nom/50246369#50246369", "title": "test2.rb:15:in `&lt;main&gt;&#39;: undefined method `exists?&#39; for &quot;skilleddev&quot;:String (NoMethodError)", "body": "<p>The error is raised, because a <code>String</code> object doesn't have <code>exists?</code> method. If you want to check whether a variable is defined, then you should use <code>defined?</code> method:</p>\n\n<pre><code>username = \"skilleddev\"\n\nif defined?(username)\n    puts \"Variable 'username' exists.\"\nelse\n    puts \"Variable 'username' does not exist.\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9663, "user_id": 5239030, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/76JEw.png?s=128&g=1", "display_name": "iGian", "link": "https://stackoverflow.com/users/5239030/igian"}, "is_accepted": false, "score": 0, "last_activity_date": 1525845421, "creation_date": 1525845421, "answer_id": 50246407, "question_id": 50245898, "link": "https://stackoverflow.com/questions/50245898/test2-rb15in-main-undefined-method-exists-for-skilleddevstring-nom/50246407#50246407", "title": "test2.rb:15:in `&lt;main&gt;&#39;: undefined method `exists?&#39; for &quot;skilleddev&quot;:String (NoMethodError)", "body": "<p>Or if you want to know if the variable is a string:</p>\n\n<pre><code>username = \"skilleddev\"\n\nif username.instance_of? String\n    puts \"Variable 'username' exists as String..\"\nelse\n    puts \"Variable 'username' does not exist as String.\"\nend\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 8781387, "user_type": "registered", "profile_image": "https://graph.facebook.com/144941262915165/picture?type=large", "display_name": "Jesse Scott", "link": "https://stackoverflow.com/users/8781387/jesse-scott"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 374, "favorite_count": 0, "accepted_answer_id": 50246369, "answer_count": 2, "score": -3, "last_activity_date": 1525845421, "creation_date": 1525842572, "question_id": 50245898, "link": "https://stackoverflow.com/questions/50245898/test2-rb15in-main-undefined-method-exists-for-skilleddevstring-nom", "title": "test2.rb:15:in `&lt;main&gt;&#39;: undefined method `exists?&#39; for &quot;skilleddev&quot;:String (NoMethodError)", "body": "<p>Someone please help me with this error! Any help is appreciated!</p>\n\n<pre><code>username = \"skilleddev\"\n\nif username.exists?\n    puts \"Variable 'username' exists.\"\nelse\n    puts \"Variable 'username' does not exist.\"\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services", "amazon-elastic-beanstalk"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1525859339, "post_id": 50245871, "comment_id": 87517849, "body": "I dont use Beanstalk, but make sure your Gemfile.lock is still not showing old ruby version. Do a bundle install to refresh it."}, {"owner": {"reputation": 643, "user_id": 3201940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff9740a9731820610e2bf815f34204bf?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/3201940/neha"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1525865028, "post_id": 50245871, "comment_id": 87521479, "body": "I had tried that but no success."}, {"owner": {"reputation": 4243, "user_id": 4638378, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/pGqPN.png?s=128&g=1", "display_name": "Brian", "link": "https://stackoverflow.com/users/4638378/brian"}, "edited": false, "score": 0, "creation_date": 1525885948, "post_id": 50245871, "comment_id": 87535351, "body": "Please post your <code>Gemfile</code> and <code>Gemfile.lock</code> files."}, {"owner": {"reputation": 2985, "user_id": 7122343, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nDdak.png?s=128&g=1", "display_name": "Nomura Nori", "link": "https://stackoverflow.com/users/7122343/nomura-nori"}, "edited": false, "score": 0, "creation_date": 1529632851, "post_id": 50245871, "comment_id": 88955129, "body": "Did you solve this? I am getting same problem"}, {"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "reply_to_user": {"reputation": 2985, "user_id": 7122343, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/nDdak.png?s=128&g=1", "display_name": "Nomura Nori", "link": "https://stackoverflow.com/users/7122343/nomura-nori"}, "edited": false, "score": 0, "creation_date": 1545374982, "post_id": 50245871, "comment_id": 94607524, "body": "@NomuraNori did anyone here solve this.  My ruby version is the latest but telling me its the older one...? and won&#39;t get onto aws deplyoemnt"}, {"owner": {"reputation": 128, "user_id": 6336246, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Rh608.png?s=128&g=1", "display_name": "Gerardo S", "link": "https://stackoverflow.com/users/6336246/gerardo-s"}, "edited": false, "score": 0, "creation_date": 1597803130, "post_id": 50245871, "comment_id": 112250350, "body": "Same here, still having this issue. Pleas shed a light if you&#39;ve solved it."}], "owner": {"reputation": 643, "user_id": 3201940, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ff9740a9731820610e2bf815f34204bf?s=128&d=identicon&r=PG&f=1", "display_name": "Neha", "link": "https://stackoverflow.com/users/3201940/neha"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 460, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1525853456, "creation_date": 1525842390, "last_edit_date": 1525853456, "question_id": 50245871, "link": "https://stackoverflow.com/questions/50245871/ruby-version-error-while-deploying-app-on-aws-elastic-beanstalk", "title": "Ruby Version Error while deploying app on AWS Elastic Beanstalk", "body": "<p>I am trying to deploy Ruby on Rails application on AWS Elastic Beanstalk. I am getting following error -</p>\n\n<pre><code>ERROR: [Instance: &lt;Instance ID&gt;] Command failed on instance. Return code: 18 Output: (TRUNCATED)...e ']'\n+ bundle install\nDon't run Bundler as root. Bundler can ask for sudo if it is needed, and\ninstalling your bundle as root will break this application for all non-root\nusers on this machine.\nYour Ruby version is 2.4.3, but your Gemfile specified 2.3.3.\nHook /opt/elasticbeanstalk/hooks/appdeploy/pre/10_bundle_install.sh failed. For more detail, check /var/log/eb-activity.log using console or EB CLI.\nINFO: Command execution completed on all instances. Summary: [Successful: 0, Failed: 1].\nERROR: Unsuccessful command execution on instance id(s) '&lt;Instance ID&gt;'. Aborting the operation.\nERROR: Failed to deploy application.\n</code></pre>\n\n<p>After I got this error, I had deleted ruby version number from Gemfile but still I was getting this error.</p>\n\n<p>After that I deployed app in a new Beanstalk environment without any mention of Ruby version in Gemfile. But I am still getting the same error.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "bitbucket"], "comments": [{"owner": {"reputation": 580, "user_id": 3579061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmimr.png?s=128&g=1", "display_name": "NuttLoose", "link": "https://stackoverflow.com/users/3579061/nuttloose"}, "edited": false, "score": 0, "creation_date": 1525841175, "post_id": 50245605, "comment_id": 87508747, "body": "Try &#39;git remote add origin &lt;url&gt;.git&#39;"}, {"owner": {"reputation": 580, "user_id": 3579061, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/cmimr.png?s=128&g=1", "display_name": "NuttLoose", "link": "https://stackoverflow.com/users/3579061/nuttloose"}, "edited": false, "score": 0, "creation_date": 1525841202, "post_id": 50245605, "comment_id": 87508755, "body": "Then, git commit -m &quot;my first commit&quot;,  and then, git push -u origin master"}], "answers": [{"comments": [{"owner": {"reputation": 2798, "user_id": 5054717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/852e9b7acb207733b51ddd93523a8fef?s=128&d=identicon&r=PG", "display_name": "Jim Redmond", "link": "https://stackoverflow.com/users/5054717/jim-redmond"}, "edited": false, "score": 0, "creation_date": 1525899633, "post_id": 50245696, "comment_id": 87542063, "body": "It&#39;s actually <code>.org</code>. <code>.com</code> will still work for SSH, but HTTPS will redirect - and some clients get weird about that."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "reply_to_user": {"reputation": 2798, "user_id": 5054717, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/852e9b7acb207733b51ddd93523a8fef?s=128&d=identicon&r=PG", "display_name": "Jim Redmond", "link": "https://stackoverflow.com/users/5054717/jim-redmond"}, "edited": false, "score": 0, "creation_date": 1525907801, "post_id": 50245696, "comment_id": 87544700, "body": "@JimRedmond Thank you. I have edited the answer accordingly."}, {"owner": {"reputation": 31, "user_id": 9630976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec26ad4f454dfc1e5c02cad6c6840f?s=128&d=identicon&r=PG&f=1", "display_name": "addysplendor", "link": "https://stackoverflow.com/users/9630976/addysplendor"}, "edited": false, "score": 0, "creation_date": 1525933829, "post_id": 50245696, "comment_id": 87551483, "body": "When tried to enter    :$ git push -u origin master ssh: connect to host bitbucket.org port 22: Network is unreachable fatal: Could not read from remote repository."}, {"owner": {"reputation": 31, "user_id": 9630976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec26ad4f454dfc1e5c02cad6c6840f?s=128&d=identicon&r=PG&f=1", "display_name": "addysplendor", "link": "https://stackoverflow.com/users/9630976/addysplendor"}, "edited": false, "score": 0, "creation_date": 1525934006, "post_id": 50245696, "comment_id": 87551568, "body": "And by add commits you mean what exactly? As of now I&#39;m only following a tutorial from pdf version of &quot;Ruby on Rails Tutorial (Rails 5) Learn Web Development with Rails,&quot; so bear with me..."}, {"owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "edited": false, "score": 0, "creation_date": 1525955623, "post_id": 50245696, "comment_id": 87562880, "body": "Does <a href=\"https://bitbucket.org/addyd/toy_app.git\" rel=\"nofollow noreferrer\">bitbucket.org/addyd/toy_app.git</a> exists? Is it a private repo? Do you have set your public ssh key to your profile? (<a href=\"https://confluence.atlassian.com/bitbucket/set-up-an-ssh-key-728138079.html\" rel=\"nofollow noreferrer\">confluence.atlassian.com/bitbucket/&hellip;</a>). Does <code>ssh -T git@bitbucket.org</code> works and displays a Welcome message?"}], "tags": [], "owner": {"reputation": 1034911, "user_id": 6309, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7aa22372b695ed2b26052c340f9097eb?s=128&d=identicon&r=PG", "display_name": "VonC", "link": "https://stackoverflow.com/users/6309/vonc"}, "is_accepted": false, "score": 0, "last_activity_date": 1525907785, "last_edit_date": 1525907785, "creation_date": 1525841271, "answer_id": 50245696, "question_id": 50245605, "link": "https://stackoverflow.com/questions/50245605/push-up-to-the-bitbucket-remote-repository-through-gitbash-command-line/50245696#50245696", "title": "Push up to the Bitbucket remote repository through gitbash command line", "body": "<p>The right command to update change origin would be:</p>\n\n<pre><code>git remote set-url origin ssh://git@bitbucket.org/addyd/toy_app.git\n</code></pre>\n\n<p>But you shouldn't need to update origin if it was set before, and if you cloned successfully that repo: add some commits, and then:</p>\n\n<pre><code>git push -u origin master\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 121, "user_id": 6784287, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-dw5PNRkpvfs/AAAAAAAAAAI/AAAAAAAAAIQ/yaWxLKH8-I0/photo.jpg?sz=128", "display_name": "Bhavya Bharti", "link": "https://stackoverflow.com/users/6784287/bhavya-bharti"}, "is_accepted": false, "score": 1, "last_activity_date": 1525841585, "creation_date": 1525841585, "answer_id": 50245736, "question_id": 50245605, "link": "https://stackoverflow.com/questions/50245605/push-up-to-the-bitbucket-remote-repository-through-gitbash-command-line/50245736#50245736", "title": "Push up to the Bitbucket remote repository through gitbash command line", "body": "<p>what it returned if enter the command <code>git remote -v</code></p>\n\n<p>if there is already a git remote origin exist it will print something like</p>\n\n<p><code>\norigin  https://bitbucket.com/addyd/toy_app.git(fetch)\norigin  https://bitbucket.com/addyd/toy_app.git(push)\n</code></p>\n\n<p>if it is already there and pointing to the right repository do ACP </p>\n\n<p><code>git add .\ngit commit -m \"commit message\"\ngit push origin branch</code></p>\n"}], "owner": {"reputation": 31, "user_id": 9630976, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f8ec26ad4f454dfc1e5c02cad6c6840f?s=128&d=identicon&r=PG&f=1", "display_name": "addysplendor", "link": "https://stackoverflow.com/users/9630976/addysplendor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 183, "favorite_count": 1, "answer_count": 2, "score": 2, "last_activity_date": 1525907785, "creation_date": 1525840646, "last_edit_date": 1525841350, "question_id": 50245605, "link": "https://stackoverflow.com/questions/50245605/push-up-to-the-bitbucket-remote-repository-through-gitbash-command-line", "title": "Push up to the Bitbucket remote repository through gitbash command line", "body": "<p>Created a repository on bitbucket. Trying to \"push up\" to the repository, though am unsure exactly what that means?</p>\n\n<p>Also, and more importantly, I get an error when trying to execute two lines:</p>\n\n<pre><code>$ git remote add origin git@bitbucket.com/addyd/toy_app.git/src/master\nfatal: remote origin already exists.\n\nAddy@DESKTOP-6L1EGSI MINGW64 /c/Sites/environment/toy_app (master) $\ngit remote add origin git@bitbucket.com/addyd/toy_app.git/src/master1\n</code></pre>\n\n<p>Any help? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "pundit"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525860013, "post_id": 50245282, "comment_id": 87518282, "body": "What is <code>logic to scope these records by user&#39;s portal permissions</code>? This information seems quite crucial to your problem. There are a couple of &quot;workarounds&quot; to pass additional context to Pundit, but (from experience) 95% of the time if you feel the need to use them then &quot;you&#39;re doing it wrong&quot;."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525860530, "post_id": 50245282, "comment_id": 87518628, "body": "For example, the <a href=\"https://github.com/varvet/pundit#additional-context\" rel=\"nofollow noreferrer\">pundit README shows another way of passing additional context, via the <code>pundit_user</code> method</a>, but also clearly says &quot;If you find yourself needing more context than [the current user and domain model], consider whether you are authorizing the right domain model&quot;. In other words, the question boils down to: <i>What resource are you trying to authorize</i>? (And how does that currently work?)"}, {"owner": {"reputation": 509, "user_id": 3026749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df9e47ce020f5fe19875c5be5c5f1002?s=128&d=identicon&r=PG", "display_name": "Obversity", "link": "https://stackoverflow.com/users/3026749/obversity"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1525910606, "post_id": 50245282, "comment_id": 87545326, "body": "&quot;What resource are you trying to authorize?&quot;  The problem isn&#39;t with authorizing records. The problem is with authorizing scopes. You&#39;re right though, I debated internally on whether to include any of the &quot;logic to scope these records by user&#39;s portal permissions&quot;. Basically, I have a <code>PortalUser</code> join model between portals and users. So my current solution is to set <code>pundit_user</code> to the <code>PortalUser</code> rather than the <code>User</code>. However, this doesn&#39;t work for the various levels of admin users who have access to all portals, and don&#39;t have portal users themselves."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525935233, "post_id": 50245282, "comment_id": 87552196, "body": "By &quot;resource&quot;, I did primarily mean a collection of records - i.e. The scope. Although I suspect the solution may impact individual records too. So, my question stands: can you show what the policy scope actually looks like? Maybe even the solution would be to change the definition of <code>current_user</code> globally across the whole application??!"}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525935291, "post_id": 50245282, "comment_id": 87552224, "body": "I can only hypothesise without seeing any concrete code."}], "answers": [{"comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 1, "creation_date": 1525860209, "post_id": 50246894, "comment_id": 87518400, "body": "IMO this is a very ugly workaround. You&#39;re changing the definition of <code>authorize</code>, which will (in a large rails application) infect 100s of files with a <code>nil</code> parameter in all of these method calls. And for what purpose? It&#39;s not even clear what problem you&#39;re trying to solve here; from experience, almost any real example can be solved without doing this, but I can&#39;t demonstrate how to do this without actually seeing the method body of your hypothetical <code>def update?(options)</code>."}, {"owner": {"reputation": 1166, "user_id": 882223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd45c3d279959bed4fc7ff575c7c885e?s=128&d=identicon&r=PG", "display_name": "Aref Aslani", "link": "https://stackoverflow.com/users/882223/aref-aslani"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525860806, "post_id": 50246894, "comment_id": 87518791, "body": "@TomLord No it&#39;s not required to add nil parameter in every method call. In the line containing <code>if options.nil?</code> it checks to send options parameter whenever it&#39;s needed. That whenever you use authorize method with options attribute, it expects that method on authorization class to accept one argument."}, {"owner": {"reputation": 1166, "user_id": 882223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd45c3d279959bed4fc7ff575c7c885e?s=128&d=identicon&r=PG", "display_name": "Aref Aslani", "link": "https://stackoverflow.com/users/882223/aref-aslani"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525860985, "post_id": 50246894, "comment_id": 87518901, "body": "@TomLord After all I think it&#39;s better to put <code>options</code> argument at the end of argument list like <code>def authorize(record, query, options)</code> so that you won&#39;t have to change any line of your code anywhere. But when using authorize method you should call it in one of these ways: <code>authorize(@product, nil, extra_param)</code> or <code>authorize(@product, :update?, extra_param)</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525861031, "post_id": 50246894, "comment_id": 87518919, "body": "It&#39;s required on any method call that also specifies a <code>query</code> though, isn&#39;t it? Method signatures like: <code>foo(nil, nil, nil, something_else)</code> are an anti-pattern; a problem that&#39;s usually solved by using named parameters instead. But either way, implementing your solution in a large rails app will - like I said - infect many invocations across other controllers."}, {"owner": {"reputation": 1166, "user_id": 882223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd45c3d279959bed4fc7ff575c7c885e?s=128&d=identicon&r=PG", "display_name": "Aref Aslani", "link": "https://stackoverflow.com/users/882223/aref-aslani"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525861142, "post_id": 50246894, "comment_id": 87518986, "body": "No. Because if you don&#39;t send options parameter (if it&#39;s nil) it will call authorize method as it was before: without options parameter <code>raise NotAuthorizedError, query: query, record: record, policy: policy unless policy.public_send(query)</code>."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525861170, "post_id": 50246894, "comment_id": 87519005, "body": "As for your second suggestion above, I like the idea of <code>authorize(@product, :update?, extra_param)</code> the most -- but once again I go back to my statement that this should almost never be needed in the first place. This has been a feature request in Pundit many times, and the library author has repeatedly explained/demonstrated why it&#39;s not necessary if you just pass a correct domain model to be authorized in the first place."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "reply_to_user": {"reputation": 1166, "user_id": 882223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd45c3d279959bed4fc7ff575c7c885e?s=128&d=identicon&r=PG", "display_name": "Aref Aslani", "link": "https://stackoverflow.com/users/882223/aref-aslani"}, "edited": false, "score": 0, "creation_date": 1525861205, "post_id": 50246894, "comment_id": 87519026, "body": "Let us <a href=\"https://chat.stackoverflow.com/rooms/170677/discussion-between-tom-lord-and-aref-aslani\">continue this discussion in chat</a>."}, {"owner": {"reputation": 1166, "user_id": 882223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd45c3d279959bed4fc7ff575c7c885e?s=128&d=identicon&r=PG", "display_name": "Aref Aslani", "link": "https://stackoverflow.com/users/882223/aref-aslani"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1525862013, "post_id": 50246894, "comment_id": 87519554, "body": "I&#39;ve updated my answer this way: <code>authorize(resource, query, extra_param)</code>"}], "tags": [], "owner": {"reputation": 1166, "user_id": 882223, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/dd45c3d279959bed4fc7ff575c7c885e?s=128&d=identicon&r=PG", "display_name": "Aref Aslani", "link": "https://stackoverflow.com/users/882223/aref-aslani"}, "is_accepted": false, "score": -1, "last_activity_date": 1525861707, "last_edit_date": 1525861707, "creation_date": 1525847645, "answer_id": 50246894, "question_id": 50245282, "link": "https://stackoverflow.com/questions/50245282/how-do-i-pass-extra-context-to-pundit-scopes/50246894#50246894", "title": "How do I pass extra context to Pundit scopes?", "body": "<p>Pundit authorization classes are plain old ruby classes. Using pundit <code>authorize</code> method you can pass an object to be authorized and an optional query. When you for example use authorize method as</p>\n\n<pre><code>authorize @product, :update?\n</code></pre>\n\n<p>the authorize method will call the <code>update?</code> method on the <code>ProductPolicy</code> class. If no query passed, controller action name + ? mark will be set as the query. Take a look at <a href=\"https://github.com/varvet/pundit/blob/57ec8879139a51f94dc9a9a9870bc9824e2c9c8a/lib/pundit.rb#L177-L187\" rel=\"nofollow noreferrer\">Pundit authorize method definition</a>.</p>\n\n<p>So for passing extra parameters to Pundit authorize method, you should override authorize method with an extra argument:</p>\n\n<pre><code>module Pundit\n  def authorize(record, query=nil, options=nil)\n    query ||= params[:action].to_s + \"?\"\n\n    @_pundit_policy_authorized = true\n\n    policy = policy(record)\n\n    if options.nil?\n      raise NotAuthorizedError, query: query, record: record, policy: policy unless policy.public_send(query)\n    else\n      raise NotAuthorizedError, query: query, record: record, policy: policy unless policy.public_send(query, options)\n    end\n  end\nend\n</code></pre>\n\n<p>Then in your policy class you could use this extra param</p>\n\n<pre><code>class ProductPolicy\n  ...\n  def update?(options)\n    ...\n  end\n\n  def new?\n    ...\n  end\n  ...\nend\n</code></pre>\n\n<p>As you can see, you can have policy methods that accept an extra options argument.</p>\n\n<p>Then you can use authorize method in your controllers in one of these ways:</p>\n\n<pre><code>authorize @product\nauthorize @product, nil, { owner: User.find(1) }\nauthorize @product, :some_method?, { owner: User.find(1) }\nauthorize @product, :some_method?\n</code></pre>\n"}], "owner": {"reputation": 509, "user_id": 3026749, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/df9e47ce020f5fe19875c5be5c5f1002?s=128&d=identicon&r=PG", "display_name": "Obversity", "link": "https://stackoverflow.com/users/3026749/obversity"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1958, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1525861707, "creation_date": 1525838070, "question_id": 50245282, "link": "https://stackoverflow.com/questions/50245282/how-do-i-pass-extra-context-to-pundit-scopes", "title": "How do I pass extra context to Pundit scopes?", "body": "<p>I have a system where a <code>User</code> can be associated with many <code>Portals</code>, however a user's permissions may differ between portals. </p>\n\n<p>For example, a user might be able to see unpublished posts in one portal, but not in another portal. </p>\n\n<p>For methods like <code>show?</code>, I can grab the portal off the record.</p>\n\n<pre><code>def show?\n  portal = record.portal\n  # logic to check whether, for this particular portal, \n  # this user has permission to view this record\nend\n</code></pre>\n\n<p>However that solution doesn't work for policy scopes. </p>\n\n<p>Is there any way I can, say, pass in the portal to <code>policy_scope</code> method in the controller? </p>\n\n<hr>\n\n<p>One solution I've seen around the place is to set a (temporary) attribute against the user, so that policy methods can use it. e.g.</p>\n\n<pre><code># model\nclass User &lt; ActiveRecord::Base\n  attr_accessor :current_portal\n  ...\nend\n\n# controller\nposts = portal.posts\ncurrent_user.current_portal = current_portal\npolicy_scope posts\n\n# policy Scope\ndef resolve\n  portal = user.current_portal\n  # logic to scope these records by user's portal permissions\nend\n</code></pre>\n\n<p>However this seems like a workaround, and I can definitely think of other scenarios where I'd like to be able to give authorisation logic more context as well, and I don't want this workaround to become a bad habit. </p>\n\n<p>Does anyone have any suggestions? </p>\n"}, {"tags": ["ruby", "windows", "focus", "watir", "sendkeys"], "comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525836279, "post_id": 50244842, "comment_id": 87507545, "body": "Kindly paste the whole error message"}, {"owner": {"reputation": 13, "user_id": 2869661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9ce1863869ee1de27ff91cb1127f74?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2869661/mark"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525836643, "post_id": 50244842, "comment_id": 87507615, "body": "&quot;timed out after 60 seconds&quot; is the whole error message I get when doing begin rescue Exception =&gt; e   puts &quot;\\nException caught as of #{Time.now}: #{e}&quot;"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525837388, "post_id": 50244842, "comment_id": 87507798, "body": "No remove the rescue block and run the program and get the whole message and update  it in the question.."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525847199, "post_id": 50244842, "comment_id": 87510980, "body": "Are you using WATIR(Powered by Selenium) Or WATIR -classic? Because <code>rautomation-0.17.0&#47;</code> is in watir-classic which has already been deprecated."}, {"owner": {"reputation": 13, "user_id": 2869661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9ce1863869ee1de27ff91cb1127f74?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2869661/mark"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525881689, "post_id": 50244842, "comment_id": 87533075, "body": "Thank you @Rajagopalan the browser window focus issue seemed to be a limitation of  now deprecated watir-classic.  Switching to later watir-webdriver solves the problem."}], "answers": [{"comments": [{"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525882224, "post_id": 50257703, "comment_id": 87533375, "body": "Okay, no problem"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1525893553, "post_id": 50257703, "comment_id": 87539180, "body": "Note that watir-webdriver is also deprecated and you should be using just plain &quot;watir&quot; and make sure it is version 6+"}, {"owner": {"reputation": 13, "user_id": 2869661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9ce1863869ee1de27ff91cb1127f74?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2869661/mark"}, "reply_to_user": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1525894163, "post_id": 50257703, "comment_id": 87539498, "body": "Right, @titusfortner, I uninstalled watir-classic, commonwatir, watir-webdriver, installed watir 6.10.3, and are doing require &#39;watir&#39;  Does that sound right?"}, {"owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "edited": false, "score": 0, "creation_date": 1525925599, "post_id": 50257703, "comment_id": 87548715, "body": "Yup, just wanted to make sure you were getting the latest and greatest. :)"}], "tags": [], "owner": {"reputation": 13, "user_id": 2869661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9ce1863869ee1de27ff91cb1127f74?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2869661/mark"}, "is_accepted": false, "score": 0, "last_activity_date": 1525881991, "creation_date": 1525881991, "answer_id": 50257703, "question_id": 50244842, "link": "https://stackoverflow.com/questions/50244842/ruby-watir-browser-send-keys-times-out-after-60-seconds-if-machine-unattended/50257703#50257703", "title": "ruby watir browser.send_keys times out after 60 seconds if machine unattended", "body": "<p>Thank you @Rajagopalan the browser window focus issue seemed to be a limitation of now deprecated watir-classic. Switching to latest watir-webdriver solves the problem.</p>\n"}], "owner": {"reputation": 13, "user_id": 2869661, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed9ce1863869ee1de27ff91cb1127f74?s=128&d=identicon&r=PG&f=1", "display_name": "Mark", "link": "https://stackoverflow.com/users/2869661/mark"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 127, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525881991, "creation_date": 1525834314, "last_edit_date": 1525841685, "question_id": 50244842, "link": "https://stackoverflow.com/questions/50244842/ruby-watir-browser-send-keys-times-out-after-60-seconds-if-machine-unattended", "title": "ruby watir browser.send_keys times out after 60 seconds if machine unattended", "body": "<p>I'm working with send_keys where I have to hit Enter </p>\n\n<pre><code>@ie.element(:css, \"#accountSwitcherSelect.dijitDownArrowButton\").send_keys :enter\n</code></pre>\n\n<p>which makes another object that switches accounts visible</p>\n\n<pre><code>@ie.div(:id =&gt; \"accountSwitcherSelect_dropdown\").table(:id =&gt; \"accountSwitcherSelect_menu\")\n</code></pre>\n\n<p>Here's the kicker, it works perfectly if I'm there, and the browser is in focus in the foreground.  </p>\n\n<p>But, if I either \na) lock the Windows OS screen, or \nb) are working on a Remote Desktop and switch out of RDP, or \nc) started running the ruby script from a scheduled task on an unattended machine \nit will see the first dropdown just fine </p>\n\n<pre><code>puts @ie.element(:css, \"#accountSwitcherSelect.dijitDownArrowButton\").visible?\n</code></pre>\n\n<p>but it never does   <em>send_keys :enter</em>   and never will see  <em>\"accountSwitcherSelect_menu\"</em> and throws</p>\n\n<blockquote>\n  <p>timed out after 60 seconds</p>\n</blockquote>\n\n<p>error </p>\n\n<p>watir 6.10.3, ruby 2.2.5, Windows OS, IE 11</p>\n\n<p>--Here's the full error message, where line 125 is</p>\n\n<pre><code>@ie.element(:css, \"#accountSwitcherSelect.dijitDownArrowButton\").send_keys :enter\n</code></pre>\n\n<blockquote>\n  <p>C:/ruby225/lib/ruby/gems/2.2.0/gems/rautomation-0.17.0/lib/rautomation/wait_helper.rb:20:in\n  <code>wait_until': timed out  after 60 seconds\n  (RAutomation::WaitHelper::TimeoutError)\n          from C:/ruby225/lib/ruby/gems/2.2.0/gems/rautomation-0.17.0/lib/rautomation/adapter/win_32/window.rb:153:in\n  </code>block in send_keys'\n          from C:/ruby225/lib/ruby/gems/2.2.0/gems/rautomation-0.17.0/lib/rautomation/adapter/win_32/window.rb:152:in\n  <code>each'\n          from C:/ruby225/lib/ruby/gems/2.2.0/gems/rautomation-0.17.0/lib/rautomation/adapter/win_32/window.rb:152:in\n  </code>send_keys'\n          from C:/ruby225/lib/ruby/gems/2.2.0/gems/rautomation-0.17.0/lib/rautomation/window.rb:192:in\n  <code>send_keys'\n          from C:/ruby225/lib/ruby/gems/2.2.0/gems/watir-classic-4.3.0/lib/watir-classic/browser.rb:452:in\n  </code>send_keys '\n          from C:/ruby225/lib/ruby/gems/2.2.0/gems/watir-classic-4.3.0/lib/watir-classic/element.rb:124:in\n  <code>send_keys '\n          from DeleteTriggers8.rb:125:in</code>block in '\n          from DeleteTriggers8.rb:106:in <code>each'\n          from DeleteTriggers8.rb:106:in</code>'</p>\n</blockquote>\n"}, {"tags": ["ruby", "regex", "uri"], "comments": [{"owner": {"reputation": 16007, "user_id": 8291949, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/a7pBo.gif?s=128&g=1", "display_name": "wp78de", "link": "https://stackoverflow.com/users/8291949/wp78de"}, "edited": false, "score": 0, "creation_date": 1525839488, "post_id": 50244403, "comment_id": 87508327, "body": "Is swoo.sh fixed?"}, {"owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "edited": false, "score": 0, "creation_date": 1525874120, "post_id": 50244403, "comment_id": 87527906, "body": "I would assume such links are clickable on twitter, which means the original HTML would have the actual URI in it, making this task trivial. Are you sure you can&#39;t use a different API/scraper to get the actual HTML content of the tweet?"}], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 4132922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116514ee1122866ad4817574ae9e2190?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/4132922/evan"}, "edited": false, "score": 0, "creation_date": 1525915897, "post_id": 50244433, "comment_id": 87546458, "body": "Thank you. You answering my immediate question was all that was needed!"}], "tags": [], "owner": {"reputation": 381813, "user_id": 1863229, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/4sh1l.png?s=128&g=1", "display_name": "Tim Biegeleisen", "link": "https://stackoverflow.com/users/1863229/tim-biegeleisen"}, "is_accepted": true, "score": 1, "last_activity_date": 1525830776, "creation_date": 1525830776, "answer_id": 50244433, "question_id": 50244403, "link": "https://stackoverflow.com/questions/50244403/extract-urls-from-string-ruby-regex-and-link-shortened/50244433#50244433", "title": "Extract URLs from String (Ruby) (Regex and link shortened)", "body": "<p>Here is one approach using <code>match</code>:</p>\n\n<pre><code>match = /(\\w+\\.\\w+\\/\\w+)/.match(\"Lorem ipsum lorem ipsum swoo.sh/12xfsW lorem ipsum\")\nif match\n    puts match[1]\nelse\n    puts \"no match\"\nend\n</code></pre>\n\n<p><a href=\"http://rextester.com/LKF93550\" rel=\"nofollow noreferrer\"><h2>Demo</h2></a></p>\n\n<p>If you also need the simultaneous ability to capture full URLs, then my answer would have to be updated.  This only answers your immediate question.</p>\n"}, {"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1525873942, "creation_date": 1525873942, "answer_id": 50255137, "question_id": 50244403, "link": "https://stackoverflow.com/questions/50244403/extract-urls-from-string-ruby-regex-and-link-shortened/50255137#50255137", "title": "Extract URLs from String (Ruby) (Regex and link shortened)", "body": "<p>We can use the fact that URIs can't contain spaces and Ruby has <a href=\"https://ruby-doc.org/stdlib/libdoc/uri/rdoc/URI/Generic.html\" rel=\"nofollow noreferrer\">URI::Generic</a> which will parse almost anything that looks URI-ish. Then we just need to filter out non-web-URIs, which I do by assuming that every web URI has to start with something like <code>foo.bar</code></p>\n\n<pre><code>require 'uri'\nrequire 'pathname'\n\ntweet.\n  split.\n  map { |s| URI.parse(s) rescue nil }.\n  select { |u| u &amp;&amp; (u.hostname || Pathname(u.path).each_filename.first =~ /\\w\\.\\w/) }\n</code></pre>\n\n<p>Example output</p>\n\n<pre><code>tweet = 'foo . &lt; google.com bar swoosh.sh/blah?q=bar http://google.com/bar'\n# the above returns\n# [#&lt;URI::Generic google.com&gt;, #&lt;URI::Generic swoosh.sh/blah?q=bar&gt;, #&lt;URI::HTTP http://google.com/bar&gt;]\n</code></pre>\n\n<p>This can't really work in general because of ambiguity. \"car.net\" looks like a shortened link, but in context it could be \"my neighbor threw a baseball through my window so i yanked the hubcabs off his car.net gain!!!\", where it's clearly just a missing space.</p>\n"}], "owner": {"reputation": 51, "user_id": 4132922, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/116514ee1122866ad4817574ae9e2190?s=128&d=identicon&r=PG&f=1", "display_name": "evan", "link": "https://stackoverflow.com/users/4132922/evan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 270, "favorite_count": 0, "accepted_answer_id": 50244433, "answer_count": 2, "score": 1, "last_activity_date": 1525873942, "creation_date": 1525830487, "question_id": 50244403, "link": "https://stackoverflow.com/questions/50244403/extract-urls-from-string-ruby-regex-and-link-shortened", "title": "Extract URLs from String (Ruby) (Regex and link shortened)", "body": "<p>I heard that <code>URI::extract()</code> only returns links with a <code>:</code>, however since I am grabbing a tweet, and it does not contain a <code>:</code>, I believe I would have to use a regular expression. I need to check for a \"swoo.sh/whatever\" link, and store it to a variable. However, how could I look for the first (which it returns automatically apparently), \"swoo.sh/whatever\" link, in regards to that I have to maintain everything after the <code>/</code>. For example, if the tweet says </p>\n\n<blockquote>\n  <p>Lorem ipsum lorem ipsum swoo.sh/12xfsW lorem ipsum</p>\n</blockquote>\n\n<p>How would I grab the swoo.sh link, and all the different things that come directly after the <code>/</code>?</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 3633, "user_id": 675154, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23da6806cab4830b5d1b15ef2a410541?s=128&d=identicon&r=PG", "display_name": "delta", "link": "https://stackoverflow.com/users/675154/delta"}, "edited": false, "score": 0, "creation_date": 1525827702, "post_id": 50244068, "comment_id": 87505857, "body": "what tools are you using for the job? extract in regex usually use capture group."}], "answers": [{"comments": [{"owner": {"reputation": 6315, "user_id": 5411198, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/FabOI.jpg?s=128&g=1", "display_name": "sergio MAGA", "link": "https://stackoverflow.com/users/5411198/sergio-maga"}, "edited": false, "score": 0, "creation_date": 1525837645, "post_id": 50244081, "comment_id": 87507870, "body": "This certainly provides an <code>awk</code> solution but OP needs Ruby&#39;s regex solution."}, {"owner": {"reputation": 3676, "user_id": 1166898, "user_type": "registered", "accept_rate": 32, "profile_image": "https://www.gravatar.com/avatar/0fc20bdaa2bbda327e40790844dafdd3?s=128&d=identicon&r=PG", "display_name": "CJ Dennis", "link": "https://stackoverflow.com/users/1166898/cj-dennis"}, "edited": false, "score": 0, "creation_date": 1525838322, "post_id": 50244081, "comment_id": 87508046, "body": "Please add some explanatory text."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525844566, "post_id": 50244081, "comment_id": 87509875, "body": "If you surround your expression with a pair of backticks you can execute it within a Ruby program: <code>`awk &#39;&#47;TOTAL&#47;{ print $4}&#39; test` #=&gt; &quot;89%\\n&quot;</code>. To get rid of the newline add <code>.chomp</code> after the ending backtick. The various ways of invoking system programs is discussed in answers to <a href=\"https://stackoverflow.com/questions/6338908/ruby-difference-between-exec-system-and-x-or-backticks\">this SO question</a>."}], "tags": [], "owner": {"reputation": 3633, "user_id": 675154, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/23da6806cab4830b5d1b15ef2a410541?s=128&d=identicon&r=PG", "display_name": "delta", "link": "https://stackoverflow.com/users/675154/delta"}, "is_accepted": false, "score": 0, "last_activity_date": 1525827519, "creation_date": 1525827519, "answer_id": 50244081, "question_id": 50244068, "link": "https://stackoverflow.com/questions/50244068/ruby-regular-expression-to-get-percentage-from-specific-line/50244081#50244081", "title": "Ruby Regular expression to get percentage from specific line", "body": "<p><code>awk '/TOTAL/{ print $4}' &lt;INPUT_FILE&gt;</code></p>\n"}, {"comments": [{"owner": {"reputation": 1260, "user_id": 1753864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f918502ca11c6137dba038206d40126?s=128&d=identicon&r=PG", "display_name": "Marco Herrarte", "link": "https://stackoverflow.com/users/1753864/marco-herrarte"}, "edited": false, "score": 0, "creation_date": 1525828579, "post_id": 50244119, "comment_id": 87506041, "body": "Thanks, the problem is that I don\u2019t have access to any tools, this needs to be achieved in the regular expression.."}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 1260, "user_id": 1753864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f918502ca11c6137dba038206d40126?s=128&d=identicon&r=PG", "display_name": "Marco Herrarte", "link": "https://stackoverflow.com/users/1753864/marco-herrarte"}, "edited": false, "score": 0, "creation_date": 1525837386, "post_id": 50244119, "comment_id": 87507796, "body": "@MarcoHerrarte, have you tried the regex without the parentheses? <code>TOTAL.*?\\d+%</code>"}, {"owner": {"reputation": 1260, "user_id": 1753864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f918502ca11c6137dba038206d40126?s=128&d=identicon&r=PG", "display_name": "Marco Herrarte", "link": "https://stackoverflow.com/users/1753864/marco-herrarte"}, "edited": false, "score": 0, "creation_date": 1525839094, "post_id": 50244119, "comment_id": 87508242, "body": "Thank you, \\K saved my day as you can see in my accepted answer!"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525844160, "post_id": 50244119, "comment_id": 87509732, "body": "Marco, in case it&#39;s not clear, this answer is correct."}, {"owner": {"reputation": 1260, "user_id": 1753864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f918502ca11c6137dba038206d40126?s=128&d=identicon&r=PG", "display_name": "Marco Herrarte", "link": "https://stackoverflow.com/users/1753864/marco-herrarte"}, "edited": false, "score": 0, "creation_date": 1525880514, "post_id": 50244119, "comment_id": 87532356, "body": "right, this helped capturing the group. thanks @FedericoPiazza"}, {"owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "reply_to_user": {"reputation": 1260, "user_id": 1753864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f918502ca11c6137dba038206d40126?s=128&d=identicon&r=PG", "display_name": "Marco Herrarte", "link": "https://stackoverflow.com/users/1753864/marco-herrarte"}, "edited": false, "score": 0, "creation_date": 1525881998, "post_id": 50244119, "comment_id": 87533245, "body": "@MarcoHerrarte glad to help"}], "tags": [], "owner": {"reputation": 27179, "user_id": 710099, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/0413774874b9baeccef7a5ba0344fec7?s=128&d=identicon&r=PG", "display_name": "Federico Piazza", "link": "https://stackoverflow.com/users/710099/federico-piazza"}, "is_accepted": true, "score": 2, "last_activity_date": 1525827863, "creation_date": 1525827863, "answer_id": 50244119, "question_id": 50244068, "link": "https://stackoverflow.com/questions/50244068/ruby-regular-expression-to-get-percentage-from-specific-line/50244119#50244119", "title": "Ruby Regular expression to get percentage from specific line", "body": "<p>You can use a regex like this:</p>\n\n<pre><code>TOTAL.*?(\\d+)%\n</code></pre>\n\n<p><strong><a href=\"https://regex101.com/r/CDKe3T/1\" rel=\"nofollow noreferrer\">Working demo</a></strong></p>\n\n<p>Or if you want to capture the <code>%</code> then</p>\n\n<pre><code>TOTAL.*?(\\d+%)\n</code></pre>\n\n<p>Then grab the content from the capturing group <code>$1</code></p>\n"}, {"comments": [{"owner": {"reputation": 1260, "user_id": 1753864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f918502ca11c6137dba038206d40126?s=128&d=identicon&r=PG", "display_name": "Marco Herrarte", "link": "https://stackoverflow.com/users/1753864/marco-herrarte"}, "edited": false, "score": 0, "creation_date": 1525839123, "post_id": 50244286, "comment_id": 87508250, "body": "Awesome! Thank you"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1525846826, "last_edit_date": 1525846826, "creation_date": 1525829493, "answer_id": 50244286, "question_id": 50244068, "link": "https://stackoverflow.com/questions/50244068/ruby-regular-expression-to-get-percentage-from-specific-line/50244286#50244286", "title": "Ruby Regular expression to get percentage from specific line", "body": "<pre><code>str=&lt;&lt;_\nName                              Stmts   Miss  Cover   Missing\n---------------------------------------------------------------\nsrc/global_information.py             8      1    88%   6\nsrc/settings.py                      38      0   100%\nsrc/storage_backends.py               4      4     0%   1-5\nsrc/urls.py                           8      0   100%\nusers/admin.py                        1      0   100%\nusers/apps.py                         3      3     0%   1-5\nusers/forms.py                        5      0   100%\nusers/models.py                       1      0   100%\nusers/tests/tests_views_urls.py       5      0   100%\nusers/urls.py                         5      0   100%\nusers/views.py                        1      1     0%   1\n---------------------------------------------------------------\nTOTAL                                79      9    89%\n_\n\nstr[/^TOTAL.*?\\K\\d+%/] #=&gt; \"89%\n</code></pre>\n\n<p><code>\\K</code> means discard everything matched so far. The non-greedy modifier <code>?</code> in <code>.*?</code> is needed. Without it the match before <code>\\K</code> would end with the next-to-last digit in the total percentage (here the <code>\"8\"</code> in <code>\"89%\"</code>, the <code>\"3\"</code> in <code>\"1234%\"</code>).</p>\n"}], "owner": {"reputation": 1260, "user_id": 1753864, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/7f918502ca11c6137dba038206d40126?s=128&d=identicon&r=PG", "display_name": "Marco Herrarte", "link": "https://stackoverflow.com/users/1753864/marco-herrarte"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 59, "favorite_count": 0, "accepted_answer_id": 50244119, "answer_count": 3, "score": 0, "last_activity_date": 1525846826, "creation_date": 1525827362, "last_edit_date": 1525828661, "question_id": 50244068, "link": "https://stackoverflow.com/questions/50244068/ruby-regular-expression-to-get-percentage-from-specific-line", "title": "Ruby Regular expression to get percentage from specific line", "body": "<p>I have the following output:</p>\n\n<pre><code>Name                              Stmts   Miss  Cover   Missing\n---------------------------------------------------------------\nsrc/global_information.py             8      1    88%   6\nsrc/settings.py                      38      0   100%\nsrc/storage_backends.py               4      4     0%   1-5\nsrc/urls.py                           8      0   100%\nusers/admin.py                        1      0   100%\nusers/apps.py                         3      3     0%   1-5\nusers/forms.py                        5      0   100%\nusers/models.py                       1      0   100%\nusers/tests/tests_views_urls.py       5      0   100%\nusers/urls.py                         5      0   100%\nusers/views.py                        1      1     0%   1\n---------------------------------------------------------------\nTOTAL                                79      9    89%\n</code></pre>\n\n<p>I need to get the TOTAL percentage, which is 89%. I try the following two regex:</p>\n\n<pre><code>TOTAL\\s+\\d+\\s+\\d+\\s+\\d+\\%\n</code></pre>\n\n<p>and</p>\n\n<pre><code>(?&lt;=TOTAL\\s).*\n</code></pre>\n\n<p>I can get the correct line but not sure how to extract the percentage part of it. This needs to be achieved in a regular expression due that I don\u2019t have access to any tool</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1525825234, "post_id": 50243723, "comment_id": 87505425, "body": "What seems to be the problem?  Also, what version of ruby are you using?  I get the following output on ruby-2.3.6 <code>Digest::MD5::hexdigest(&#39;test&#39;).to_i(16) #=&gt; 12707736894140473154801792860916528374</code>"}, {"owner": {"reputation": 2055, "user_id": 120191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f8ab061502145dc35168e1b8735e755?s=128&d=identicon&r=PG", "display_name": "Huey", "link": "https://stackoverflow.com/users/120191/huey"}, "reply_to_user": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525826227, "post_id": 50243723, "comment_id": 87505599, "body": "Next step is to convert to a float between 0 and 1."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525840744, "post_id": 50243723, "comment_id": 87508631, "body": "Digest::MD5::hexdigest returns a 128 bit string, which requires 2 ^ 128 = 3.4028237e+38 different numbers. On the other hand, Ruby&#39;s <code>Float</code> usually has a precision of 2.2204460492503131e-16. If you try to map the hash to float, much of your information would be gone."}], "answers": [{"tags": [], "owner": {"reputation": 2055, "user_id": 120191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f8ab061502145dc35168e1b8735e755?s=128&d=identicon&r=PG", "display_name": "Huey", "link": "https://stackoverflow.com/users/120191/huey"}, "is_accepted": true, "score": 1, "last_activity_date": 1525885975, "last_edit_date": 1525885975, "creation_date": 1525885171, "answer_id": 50258538, "question_id": 50243723, "link": "https://stackoverflow.com/questions/50243723/how-to-i-convert-the-output-of-an-md5-hash-into-a-float-between-0-and-1/50258538#50258538", "title": "How to I convert the output of an md5 hash into a float between 0 and 1", "body": "<p>I figured out the solution by porting the code that's listed here: <a href=\"http://blog.richardweiss.org/2016/12/25/hash-splits.html\" rel=\"nofollow noreferrer\">http://blog.richardweiss.org/2016/12/25/hash-splits.html</a></p>\n\n<pre><code>test_id_digest = Digest::MD5::hexdigest(user_id + experiment_name)\ntest_id_first_digits = test_id_digest[0..5]\ntest_id_final_int = test_id_final_int = test_id_first_digits.to_i(16)\n\nab_split = test_id_final_int.to_f/0xFFFFFF\n</code></pre>\n\n<p>The basic idea is to create the digest, then take the first six letters, then divide by the largest six digit hex string. </p>\n\n<p>The blog post referenced goes into verifying the randomness of this solution. </p>\n"}], "owner": {"reputation": 2055, "user_id": 120191, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/6f8ab061502145dc35168e1b8735e755?s=128&d=identicon&r=PG", "display_name": "Huey", "link": "https://stackoverflow.com/users/120191/huey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 334, "favorite_count": 0, "accepted_answer_id": 50258538, "answer_count": 1, "score": 1, "last_activity_date": 1525885975, "creation_date": 1525823846, "last_edit_date": 1525885903, "question_id": 50243723, "link": "https://stackoverflow.com/questions/50243723/how-to-i-convert-the-output-of-an-md5-hash-into-a-float-between-0-and-1", "title": "How to I convert the output of an md5 hash into a float between 0 and 1", "body": "<p>In A/B testing, it's fairly common to split based on modulo arthimetic, but that often causes overlapping experiments, i.e. if you used id % 2 == 0 as your split criteria, one set of users would be consistently getting into control or experiment.</p>\n\n<p>A solution I've heard about is to use hashing. I want to concatenate a <code>user_id</code> with an experiment name, hash it, and then convert that into a float between 0 and 1. I know how to do the hashing (<code>Digest::MD5::hexdigest('test').to_i(16)</code>) but I'm confused on the next steps for conversion to a float between 0 and 1. </p>\n\n<p>What are the steps? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "chartkick"], "answers": [{"tags": [], "owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "is_accepted": true, "score": 0, "last_activity_date": 1525839760, "creation_date": 1525839760, "answer_id": 50245478, "question_id": 50243457, "link": "https://stackoverflow.com/questions/50243457/how-do-i-get-associations-working-right-with-chartkick/50245478#50245478", "title": "How do I get associations working right with ChartKick?", "body": "<p>I figured out the correct way to do what I want:</p>\n\n<p><code>&lt;%= pie_chart @portfolio.port_stocks.joins(:stock).group(\"stocks.ticker\").sum(:current_value), prefix: \"$\", thousands: \",\" %&gt;</code></p>\n\n<p>That produces this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/9hcRE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9hcRE.png\" alt=\"pie-chart-with-names-and-values\"></a></p>\n"}], "owner": {"reputation": 29623, "user_id": 91970, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/64aa7d1e0eb006175565adb0a47a4452?s=128&d=identicon&r=PG", "display_name": "marcamillion", "link": "https://stackoverflow.com/users/91970/marcamillion"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "accepted_answer_id": 50245478, "answer_count": 1, "score": 0, "last_activity_date": 1525839760, "creation_date": 1525821443, "last_edit_date": 1525839347, "question_id": 50243457, "link": "https://stackoverflow.com/questions/50243457/how-do-i-get-associations-working-right-with-chartkick", "title": "How do I get associations working right with ChartKick?", "body": "<p>I can't seem to get ChartKick configured properly.</p>\n\n<p>What I am trying to do is to create a graph of the user's stock portfolio. The <code>portfolio</code> is a model, which has_many <code>PortStocks</code> each of which have a <code>current_value</code>. Each <code>PortStock</code> belongs to a <code>Stock</code>.</p>\n\n<p>My models look like this:</p>\n\n<pre><code># == Schema Information\n#\n# Table name: portfolios\n#\n#  id                   :bigint(8)        not null, primary key\n#  user_id              :integer\n#  current_dollar_value :float            default(0.0)\n#  dollar_change        :float            default(0.0)\n#\n\nclass Portfolio &lt; ApplicationRecord\n  belongs_to :user\n  has_many :port_stocks\nend\n\n# == Schema Information\n#\n# Table name: port_stocks\n#\n#  id             :bigint(8)        not null, primary key\n#  portfolio_id   :integer\n#  stock_id       :integer\n#  volume         :integer\n#\n\nclass PortStock &lt; ApplicationRecord\n  belongs_to :portfolio\n  belongs_to :stock\nend\n\n# == Schema Information\n#\n# Table name: stocks\n#\n#  id         :bigint(8)        not null, primary key\n#  ticker     :string\n#  name       :string\n#  price      :float\n#  created_at :datetime         not null\n#  updated_at :datetime         not null\n#\n\nclass Stock &lt; ApplicationRecord\n  has_many :port_stocks\nend\n</code></pre>\n\n<p>I tried the following:</p>\n\n<p><code>&lt;%= pie_chart @portfolio.port_stocks.group(:current_value).count %&gt;</code></p>\n\n<p>But that produced this pie chart:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Acipb.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Acipb.png\" alt=\"Pie-Chart-With-No-Labels\"></a></p>\n\n<p>So when I hover, it shows me the <code>current_value</code> which is good but it also shows me <code>: 1</code> which is weird. I want it to show me the name of each <code>stock</code>, which can be accessed as <code>port_stocks.stock.name</code> along with <code>port_stocks.current_value</code> for that <code>port_stock</code> that the <code>stock</code> belongs to.</p>\n\n<p><strong>Edit 1</strong></p>\n\n<p>So I tried this:</p>\n\n<p><code>&lt;%= pie_chart @portfolio.port_stocks.joins(:stock).group(\"stocks.ticker\").sum(:current_value) %&gt;</code></p>\n\n<p>That produces this:</p>\n\n<p><a href=\"https://i.stack.imgur.com/vsF11.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/vsF11.png\" alt=\"Pie-Chart-With-Names-Values-But-No-Formatting\"></a></p>\n\n<p>That seems to work, but I would like to be able to format the <code>current_value</code> as a currency (i.e. using <code>number_to_currency(current_value)</code>).</p>\n\n<p>Thoughts?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "solr", "sunspot", "sunspot-rails"], "answers": [{"tags": [], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "is_accepted": false, "score": 0, "last_activity_date": 1525884469, "creation_date": 1525884469, "answer_id": 50258394, "question_id": 50242159, "link": "https://stackoverflow.com/questions/50242159/solr-boost-if-id-included-in-array/50258394#50258394", "title": "Solr - Boost if id included in array", "body": "<p>The syntax in the question is working, but for no obvious reason I had to add ridiculously big boost number for it to work.</p>\n\n<pre><code>boost(500000) { with(:id, ids) }\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 1595868, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/2106152c457f7df0ef892b6814423cfc?s=128&d=identicon&r=PG", "display_name": "Anton", "link": "https://stackoverflow.com/users/1595868/anton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 143, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525884469, "creation_date": 1525813062, "question_id": 50242159, "link": "https://stackoverflow.com/questions/50242159/solr-boost-if-id-included-in-array", "title": "Solr - Boost if id included in array", "body": "<p>I am trying to add query time boost if id of the record included in a given array.  </p>\n\n<pre><code>ids = [1, 2, 3]\nProduct.solr_search do\n  fulltext search_params do\n    boost(50.0) { with(:id, ids) }\n  end\n  order_by(:score, :desc)\n  paginate(offset: search_options[:offset], per_page: search_options[:page_limit])\nend\n</code></pre>\n\n<p>What is the correct syntax to boost records that meet the condition of being included in the array?<br>\nIn the real app I have arrays with 100+ elements. With the above syntax was able to boost only when the array is only 2-3 elements.</p>\n"}, {"tags": ["ruby", "windows", "file-association"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 1, "creation_date": 1525811565, "post_id": 50241825, "comment_id": 87501312, "body": "Can you explain what &quot;does not work&quot; actually means?"}, {"owner": {"reputation": 31, "user_id": 9300463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y0SThPTV0pM/AAAAAAAAAAI/AAAAAAAAAOY/0sIEoa3giV8/photo.jpg?sz=128", "display_name": "dub", "link": "https://stackoverflow.com/users/9300463/dub"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1525811894, "post_id": 50241825, "comment_id": 87501450, "body": "@engineersmnky when i run this file it doesen&#39;t set the base program for the .pf file to be pfReader (&quot;Think like when you are running python file double click on it it runs python.exe same thing&quot;)"}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 9300463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y0SThPTV0pM/AAAAAAAAAAI/AAAAAAAAAOY/0sIEoa3giV8/photo.jpg?sz=128", "display_name": "dub", "link": "https://stackoverflow.com/users/9300463/dub"}, "edited": false, "score": 0, "creation_date": 1525814898, "post_id": 50242284, "comment_id": 87502626, "body": "Thanks can i ask how can i use &quot; instead of &#39; i think about that too but if i do system(&quot; ftype&quot;label&quot;=&quot;Code&quot; &quot;)  string would not be ftype&quot;label&quot;=&quot;Code&quot; instead it will be &quot;ftype&quot;,&quot;=&quot;,&quot; &quot; (Also would gave an error but you get my point)                                                                                                          --edit-- with a google search i found what i was looking for thanks"}], "tags": [], "owner": {"reputation": 30418, "user_id": 823617, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/DmWH1.png?s=128&g=1", "display_name": "Casper", "link": "https://stackoverflow.com/users/823617/casper"}, "is_accepted": true, "score": 1, "last_activity_date": 1525814012, "last_edit_date": 1525814012, "creation_date": 1525813675, "answer_id": 50242284, "question_id": 50241825, "link": "https://stackoverflow.com/questions/50241825/windows-file-association-with-ruby/50242284#50242284", "title": "Windows file association with ruby", "body": "<p>A good hint to debug problems like these is to replace <code>system</code> with <code>puts</code>. If you do that, you will realize the problem is on this line:</p>\n\n<pre><code>pth.gsub \"/\",\"\\\\\"\n</code></pre>\n\n<p>While you probably wanted this:</p>\n\n<pre><code>pth.gsub! \"/\",\"\\\\\"\n</code></pre>\n\n<p>Also I'm not sure the Windows cmd.exe likes single quotes, so you probably need to fix your <code>ftype</code> call also to use the proper double quotes:</p>\n\n<pre><code>system(\"ftype pfReader=\\\"#{pth}\\\" \\\"%1\\\"\")\n</code></pre>\n"}], "owner": {"reputation": 31, "user_id": 9300463, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Y0SThPTV0pM/AAAAAAAAAAI/AAAAAAAAAOY/0sIEoa3giV8/photo.jpg?sz=128", "display_name": "dub", "link": "https://stackoverflow.com/users/9300463/dub"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 50242284, "answer_count": 1, "score": -1, "last_activity_date": 1525814012, "creation_date": 1525811376, "question_id": 50241825, "link": "https://stackoverflow.com/questions/50241825/windows-file-association-with-ruby", "title": "Windows file association with ruby", "body": "<p>i am trying to change windows file association via ruby. Assoc part works but ftype does not work why it does not work?</p>\n\n<pre><code>    pth = Dir.pwd\n    pth &lt;&lt; \"/pfReader.exe\"\n\n    pth.gsub \"/\",\"\\\\\"\n\n\n    system(\"assoc .pf=pfReader\")\n    puts(\"assoc command is done \\n\")\n    system(\"ftype pfReader = '#{pth}' '%1'\")\n    puts(\"ftype command is done \\n\")\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing"], "comments": [{"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525808422, "post_id": 50241105, "comment_id": 87499767, "body": "In <code>assert @category.valid?</code> where does <code>@category</code> come from? And why isn&#39;t it <code>@user</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "reply_to_user": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525808494, "post_id": 50241105, "comment_id": 87499806, "body": "your right I changed it but I&#39;m still getting the same error."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "edited": false, "score": 0, "creation_date": 1525808549, "post_id": 50241130, "comment_id": 87499827, "body": "I&#39;ve tried that but I&#39;m still getting the same error"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525808631, "post_id": 50241130, "comment_id": 87499870, "body": "And inside <code>rails&#47;bin console</code> you can run <code>User.new(name: &#39;foo&#39;)</code> and it works, right?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "edited": false, "score": 0, "creation_date": 1525808881, "post_id": 50241130, "comment_id": 87500007, "body": "No it didnt but when I changed it to User.new(email:&quot;foo@hotmail.com&quot;) it worked on rails console. So I made the changes in my test so it says email instead of the name but I&#39;m still getting the same error"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525809100, "post_id": 50241130, "comment_id": 87500132, "body": "Someone suggested <code>bin&#47;rails db:migrate</code> but deleted it. Try it, even though you are migrated. Then try (on <code>bash</code>) <code>RAILS_ENV=test bin&#47;rails db:drop db:create</code>."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "edited": false, "score": 0, "creation_date": 1525809444, "post_id": 50241130, "comment_id": 87500312, "body": "I followed what you said, however I&#39;m still getting the same error as stated before."}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525809881, "post_id": 50241130, "comment_id": 87500529, "body": "Try (with MySQL) <code>bin&#47;rails dbconsole --environment test</code>, then <code>show tables;</code>. Does your test database have any tables?"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525810709, "post_id": 50241130, "comment_id": 87500905, "body": "Does <code># Could not dump table &quot;users&quot; because of following StandardError #   Unknown type &#39;false&#39; for column &#39;admin_role&#39;</code> have anything to do with it?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "edited": false, "score": 0, "creation_date": 1525895225, "post_id": 50241130, "comment_id": 87539991, "body": "Maybe but how would I go about fixing that?"}, {"owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "edited": false, "score": 0, "creation_date": 1525895711, "post_id": 50241130, "comment_id": 87540220, "body": "What kind of database do you have? Can you drop the database and migrate again to recreate it? Does <code>show tables;</code>, or the equivalent for your database, show what this <code>admin_role</code> is? You seem to be using Devise; did that create the <code>admin_role</code> field?"}], "tags": [], "owner": {"reputation": 5141, "user_id": 193980, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/aafa8848c4b764f080b1b31a51eab73d?s=128&d=identicon&r=PG", "display_name": "Phlip", "link": "https://stackoverflow.com/users/193980/phlip"}, "is_accepted": false, "score": 0, "last_activity_date": 1525808306, "creation_date": 1525808306, "answer_id": 50241130, "question_id": 50241105, "link": "https://stackoverflow.com/questions/50241105/user-test-not-working/50241130#50241130", "title": "user test not working", "body": "<p>Congratulations on testing. It's always better than debugging. Try <code>rake db:test:prepare</code>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9601213"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 104, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525862091, "creation_date": 1525808159, "last_edit_date": 1525862091, "question_id": 50241105, "link": "https://stackoverflow.com/questions/50241105/user-test-not-working", "title": "user test not working", "body": "<p>So this is my first time running test in rails and this is the error I'm getting.</p>\n\n<p>Running:</p>\n\n<p>E</p>\n\n<blockquote>\n  <p>Error: PostsControllerTest#test_should_show_post:\n  ActiveRecord::StatementInvalid: Could not find table 'users'</p>\n  \n  <p>bin/rails test test/controllers/posts_controller_test.rb:26</p>\n</blockquote>\n\n<p>E</p>\n\n<blockquote>\n  <p>Error: PostsControllerTest#test_should_update_post:\n  ActiveRecord::StatementInvalid: Could not find table 'users'</p>\n  \n  <p>bin/rails test test/controllers/posts_controller_test.rb:36</p>\n</blockquote>\n\n<p>E</p>\n\n<blockquote>\n  <p>Error: PostsControllerTest#test_should_create_post:\n  ActiveRecord::StatementInvalid: Could not find table 'users'</p>\n  \n  <p>bin/rails test test/controllers/posts_controller_test.rb:18</p>\n</blockquote>\n\n<p>E</p>\n\n<blockquote>\n  <p>Error: PostsControllerTest#test_should_destroy_post:\n  ActiveRecord::StatementInvalid: Could not find table 'users'</p>\n  \n  <p>bin/rails test test/controllers/posts_controller_test.rb:41</p>\n</blockquote>\n\n<p>E</p>\n\n<blockquote>\n  <p>Error: PostsControllerTest#test_should_get_new:\n  ActiveRecord::StatementInvalid: Could not find table 'users'</p>\n  \n  <p>bin/rails test test/controllers/posts_controller_test.rb:13</p>\n</blockquote>\n\n<p>E</p>\n\n<blockquote>\n  <p>Error: PostsControllerTest#test_should_get_index:\n  ActiveRecord::StatementInvalid: Could not find table 'users'</p>\n  \n  <p>bin/rails test test/controllers/posts_controller_test.rb:8</p>\n</blockquote>\n\n<p>E</p>\n\n<blockquote>\n  <p>Error: PostsControllerTest#test_should_get_edit:\n  ActiveRecord::StatementInvalid: Could not find table 'users'</p>\n  \n  <p>bin/rails test test/controllers/posts_controller_test.rb:31</p>\n</blockquote>\n\n<p>E</p>\n\n<blockquote>\n  <p>Error: UserTest#test_user_should_be_valid:\n  ActiveRecord::StatementInvalid: Could not find table 'users'</p>\n  \n  <p>bin/rails test test/models/user_test.rb:8</p>\n</blockquote>\n\n<p>E</p>\n\n<p>Error:</p>\n\n<blockquote>\n  <p>HomeControllerTest#test_should_get_index:\n  ActiveRecord::StatementInvalid: Could not find table 'users'</p>\n  \n  <p>bin/rails test test/controllers/home_controller_test.rb:4</p>\n</blockquote>\n\n<p>Finished in 0.316289s, 28.4550 runs/s, 0.0000 assertions/s.\n9 runs, 0 assertions, 0 failures, 9 errors, 0 skips</p>\n\n<p>It is saying that the user table could not be found, why is that. heres my code.</p>\n\n<pre><code>require 'test_helper'\n\nclass UserTest &lt; ActiveSupport::TestCase\n  def setup\n    @user=User.new(name:\"minhaj\")\n  end\n\n  test \"user should be valid\" do\n    assert @category.valid?\n  end\nend\n</code></pre>\n\n<h1>class DeviseCreateUsers &lt; ActiveRecord::Migration[5.1]</h1>\n\n<pre><code> def change\n    create_table :users do |t|\n      ## Database authenticatable\n      t.string :email,              null: false, default: \"\"\n      t.string :encrypted_password, null: false, default: \"\"\n\n      ## Recoverable\n      t.string   :reset_password_token\n      t.datetime :reset_password_sent_at\n\n      ## Rememberable\n      t.datetime :remember_created_at\n\n      ## Trackable\n      t.integer  :sign_in_count, default: 0, null: false\n      t.datetime :current_sign_in_at\n      t.datetime :last_sign_in_at\n      t.string   :current_sign_in_ip\n      t.string   :last_sign_in_ip\n\n      ## Confirmable\n      # t.string   :confirmation_token\n      # t.datetime :confirmed_at\n      # t.datetime :confirmation_sent_at\n      # t.string   :unconfirmed_email # Only if using reconfirmable\n\n      ## Lockable\n      # t.integer  :failed_attempts, default: 0, null: false # Only if lock strategy is :failed_attempts\n      # t.string   :unlock_token # Only if unlock strategy is :email or :both\n      # t.datetime :locked_at\n\n\n      t.timestamps null: false\n    end\n\n    add_index :users, :email,                unique: true\n    add_index :users, :reset_password_token, unique: true\n    # add_index :users, :confirmation_token,   unique: true\n    # add_index :users, :unlock_token,         unique: true\n  end\nend\n</code></pre>\n\n<h1>ActiveRecord::Schema.define(version: 20180413094453) do</h1>\n\n<pre><code>  create_table \"posts\", force: :cascade do |t|\n    t.datetime \"date\"\n    t.string \"name\"\n    t.integer \"user_id\"\n    t.text \"description\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.float \"latitude\"\n    t.float \"longitude\"\n    t.string \"address\"\n  end\n\n  create_table \"rsvps\", force: :cascade do |t|\n    t.integer \"user_id\"\n    t.integer \"post_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"post_id\"], name: \"index_rsvps_on_post_id\"\n    t.index [\"user_id\"], name: \"index_rsvps_on_user_id\"\n  end\n\n# Could not dump table \"users\" because of following StandardError\n#   Unknown type 'false' for column 'admin_role'\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "rspec"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525807641, "post_id": 50239999, "comment_id": 87499377, "body": "have have you installed ruby?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1525808110, "post_id": 50239999, "comment_id": 87499608, "body": "<code>which rspec</code> are you using?"}, {"owner": {"reputation": 11, "user_id": 3015755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac7ba6306d653648dfde2e8a7592d0eb?s=128&d=identicon&r=PG", "display_name": "coriander", "link": "https://stackoverflow.com/users/3015755/coriander"}, "edited": false, "score": 0, "creation_date": 1525812707, "post_id": 50239999, "comment_id": 87501764, "body": "How do I check rspec version? I&#39;m using ruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu]"}], "owner": {"reputation": 11, "user_id": 3015755, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ac7ba6306d653648dfde2e8a7592d0eb?s=128&d=identicon&r=PG", "display_name": "coriander", "link": "https://stackoverflow.com/users/3015755/coriander"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 217, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1525803785, "creation_date": 1525803785, "question_id": 50239999, "link": "https://stackoverflow.com/questions/50239999/rspec-usr-bin-env-ruby2-1-no-such-file-or-directory", "title": "$ rspec /usr/bin/env: \u2018ruby2.1\u2019: No such file or directory", "body": "<p>I'm on Ubuntu 16.04. When I run rspec I get this:</p>\n\n<pre><code>$ rspec\n\n/usr/bin/env: \u2018ruby2.1\u2019: No such file or directory\n</code></pre>\n\n<p>but that's not my ruby version</p>\n\n<pre><code>$ ruby -v\n\nruby 2.3.1p112 (2016-04-26) [x86_64-linux-gnu]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller"], "comments": [{"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525805521, "post_id": 50239739, "comment_id": 87498277, "body": "Not related to your question, but is that a real need to separate this problem in different URLs? You could easily use only on route instead of 3 to choose which plan the new user will get or let the user choose it."}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525805723, "post_id": 50239739, "comment_id": 87498384, "body": "From this line: &quot;ActionView::Template::Error: Couldn&#39;t find Plan with &#39;id&#39;=1&quot;. It seems that your test is trying to retrieve from the database the Plan object with id equal to 1, instead of choose which Plan the user will use (which is just pass as parameter the id). From that, I would say your problem comes from having 3 URL to represent the same problem. I don&#39;t know from the top of my mind a solution to the problem you are having."}, {"owner": {"reputation": 5, "user_id": 8539830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186567f33e54e63f5a2a5194188d105a?s=128&d=identicon&r=PG&f=1", "display_name": "S Horvath", "link": "https://stackoverflow.com/users/8539830/s-horvath"}, "reply_to_user": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525811117, "post_id": 50239739, "comment_id": 87501109, "body": "@PedroGabrielLima I just couldn&#39;t find a way to associate an existing plan with a user. This is the only way I could get it to work. Since I don&#39;t want to create a new plan (so no nested form), I just want to give the new member, an existing plan&#39;s ID in the plan_id column. Any suggestions?"}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525812628, "post_id": 50239739, "comment_id": 87501741, "body": "From &quot;I just couldn&#39;t find a way to associate an existing plan with a user&quot;, well, there is a way. You just need to add a way to the user select what plan they want, and send that to your controller with all the others information. I will post an answer with a general example of this."}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525813884, "post_id": 50239739, "comment_id": 87502213, "body": "I post another alternative to the way you can let the user choose the plan. To help you with your real problem, did you create the fixtures to the model Plan? If you don&#39;t, that is may the raise of error."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 8539830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186567f33e54e63f5a2a5194188d105a?s=128&d=identicon&r=PG&f=1", "display_name": "S Horvath", "link": "https://stackoverflow.com/users/8539830/s-horvath"}, "edited": false, "score": 0, "creation_date": 1525936996, "post_id": 50242313, "comment_id": 87553013, "body": "Thanks Pedro! I&#39;ll be using this instead. I ended up using collection_select instead, as it wasn&#39;t rendering the names or IDs. Gracias chamo!"}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "reply_to_user": {"reputation": 5, "user_id": 8539830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186567f33e54e63f5a2a5194188d105a?s=128&d=identicon&r=PG&f=1", "display_name": "S Horvath", "link": "https://stackoverflow.com/users/8539830/s-horvath"}, "edited": false, "score": 0, "creation_date": 1525958172, "post_id": 50242313, "comment_id": 87564349, "body": "@SHorvath, glad that it helped you!"}], "tags": [], "owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "is_accepted": true, "score": 0, "last_activity_date": 1525813803, "creation_date": 1525813803, "answer_id": 50242313, "question_id": 50239739, "link": "https://stackoverflow.com/questions/50239739/rails-test-error-when-attempting-to-find-associated-model-in-test/50242313#50242313", "title": "Rails test error when attempting to find associated model in test", "body": "<p>In your view, if you want that your user choose from the form, you could add the select input and let the user select what plan they want. But it's all possible that you pass this information through URL, as you already did.  </p>\n\n<p>View:</p>\n\n<pre><code>&lt;%= form_with(model: member, local: true) do |form| %&gt;\n\n  &lt;div class=\"field form-group\"&gt;\n    &lt;%= form.label :first_name, \"First Name\" %&gt;\n    &lt;%= form.text_field :first_name, \n                        id: :member_first_name,\n                        :class =&gt; \"form-control\",\n                        :required =&gt; true %&gt; \n  &lt;/div&gt;\n\n  &lt;div class=\"field form-group\"&gt;\n    &lt;%= form.label :plan, \"Choose your plan\" %&gt;\n    &lt;%= form.select :plan_id, \n        Plan.all {|p| [ p.name, p.id ]}, \n        { include_blank: false, selected: form.object.plan_id }, class: 'form-control' %&gt;\n  &lt;/div&gt;\n\n  &lt;%= f.submit \"Salvar\", class: \"btn btn-primary\" %&gt;  \n&lt;% end %&gt;\n</code></pre>\n\n<p>I believe the rest you already did it. In the controller you add to the white list of params the plan_id, and in your model you add model relations as has_many and belong. P.s: I didn't test this.</p>\n"}], "owner": {"reputation": 5, "user_id": 8539830, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/186567f33e54e63f5a2a5194188d105a?s=128&d=identicon&r=PG&f=1", "display_name": "S Horvath", "link": "https://stackoverflow.com/users/8539830/s-horvath"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 48, "favorite_count": 0, "accepted_answer_id": 50242313, "answer_count": 1, "score": 0, "last_activity_date": 1525813803, "creation_date": 1525802729, "question_id": 50239739, "link": "https://stackoverflow.com/questions/50239739/rails-test-error-when-attempting-to-find-associated-model-in-test", "title": "Rails test error when attempting to find associated model in test", "body": "<p>I am making an online library system with Ruby on Rails. Currently users can sign up, but to do so they must first choose a type of subscription plan.</p>\n\n<p>In the end, the best way I found to do this, was to pass a <code>plan_id</code> like so:</p>\n\n<pre><code>config/routes.rb\n\nget 'subscribe/paperback2u', to: 'members#new', :plan_id =&gt; 1\nget 'subscribe/paperback4u', to: 'members#new', :plan_id =&gt; 2\nget 'subscribe/paperback6u', to: 'members#new', :plan_id =&gt; 3\n</code></pre>\n\n<p>Then, <code>members/new.html.erb</code> pulls the <code>form</code> partial, which looks like this:</p>\n\n<pre><code>&lt;%= form_with(model: member, local: true) do |form| %&gt;\n  &lt;% plan_id = params[:plan_id] %&gt;\n\n  &lt;div class=\"field form-group\"&gt;\n    &lt;%= form.label :first_name, \"First Name\" %&gt;\n    &lt;%= form.text_field :first_name, \n                        id: :member_first_name,\n                        :class =&gt; \"form-control\",\n                        :required =&gt; true %&gt; \n  &lt;/div&gt;\n\n  &lt;div class=\"field form-group\"&gt;\n    &lt;%= form.label :last_name, \"Last Name\" %&gt;\n    &lt;%= form.text_field :last_name,\n                        id: :member_last_name,\n                        :class =&gt; \"form-control\",\n                        :required =&gt; true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field form-group\"&gt;\n    &lt;%= form.label :address_line_1, \"Address Line 1\" %&gt;\n    &lt;%= form.text_field :address_line_1,\n                        id: :member_address_line_1,\n                        :class =&gt; \"form-control\",\n                        :required =&gt; true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field form-group\"&gt;\n    &lt;%= form.label :address_line_2, \"Address Line 2\" %&gt;\n    &lt;%= form.text_field :address_line_2,\n                        id: :member_address_line_2,\n                        :class =&gt; \"form-control\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field form-group\"&gt;\n    &lt;%= form.label :town %&gt;\n    &lt;%= form.text_field :town,\n                        id: :member_town,\n                        :class =&gt; \"form-control\",\n                        :required =&gt; true %&gt;\n  &lt;/div&gt;\n</code></pre>\n\n<p>And the other fields for the member model.</p>\n\n<p>Then we get to:</p>\n\n<pre><code> 98 &lt;%= form.hidden_field :plan_id, value: params[:plan_id] %&gt;\n\n100 &lt;% if form.object.new_record? %&gt;\n101   &lt;%= render 'stripe-form' %&gt;\n102 &lt;% end %&gt;\n</code></pre>\n\n<p>I don't think <code>line 98</code> is doing anything, to be honest.</p>\n\n<p>Then the <code>stripe-form</code> partial looks like this:</p>\n\n<pre><code>1  &lt;div class=\"text-center\"&gt;\n2    &lt;script src=\"https://checkout.stripe.com/checkout.js\" class=\"stripe-button btn-primary\"\n3      data-key=\"&lt;%= Rails.configuration.stripe[:publishable_key] %&gt;\"\n4      data-description=\"Subscribe to ReadAll Library\"\n5      data-amount=&lt;%= (Plan.find(params[\"plan_id\"].to_i).display_price) * 100 %&gt;\n6      data-currency=\"gbp\"\n7      data-panelLabel=\"Subscribe for\"\n8      data-label=\"Subscribe\"\n9      data-locale=\"auto\"&gt;&lt;/script&gt;\n10 &lt;/div&gt;\n</code></pre>\n\n<p>The error I am getting is:</p>\n\n<pre><code>Error:\nMembersControllerTest#test_should_get_new:\nActionView::Template::Error: Couldn't find Plan with 'id'=1\n    app/views/members/_stripe-form.html.erb:5:in `_app_views_members__stripe_form_html_erb___374722773566915779_70180218242520'\n    app/views/members/_form.html.erb:101:in `block in _app_views_members__form_html_erb__2640496602018942691_70180179508500'\n    app/views/members/_form.html.erb:1:in `_app_views_members__form_html_erb__2640496602018942691_70180179508500'\n    app/views/members/new.html.erb:5:in `_app_views_members_new_html_erb___3025732295195500162_70180218177380'\n    test/controllers/members_controller_test.rb:16:in `block in &lt;class:MembersControllerTest&gt;'\n</code></pre>\n\n<p>The error I get if I add <code>puts response.body</code> in the tests is: \"Plan must exist\". Which it does! I have 3 different plans in my <code>plans</code> table. Each one has an ID, and everything works when I actually run it. It's just the test that doesn't work. I'd scrap the test if I could, but I need it as documentation for a project.</p>\n\n<p>Finally, here's my <code>Plan.rb</code> and <code>Member.rb</code></p>\n\n<pre><code>`plan.rb`\n\n class Plan &lt; ApplicationRecord\n   has_many :members\n end\n\n`member.rb`\n\n   class Member &lt; User\n1    require 'stripe'\n2 \n3    before_save :set_type\n4 \n5    belongs_to :plan\n6 \n7 \n8    def set_type\n9      self.type = \"Member\"\n10   end\n11\n12 end\n</code></pre>\n\n<p>And the schema for the two:</p>\n\n<pre><code>create_table \"plans\", force: :cascade do |t|\n  t.string \"stripe_id\"\n  t.string \"nickname\"\n  t.decimal \"display_price\"\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.string \"product\"\nend\n\ncreate_table \"users\", force: :cascade do |t|\n  bunch of user attributes (first_name, address, etc)\n  t.string \"type\" (members is a users type)\n  t.datetime \"created_at\", null: false\n  t.datetime \"updated_at\", null: false\n  t.string \"remember_digest\"\n  t.string \"customer_id\"\n  t.bigint \"plan_id\"\n  t.index [\"email\"], name: \"index_users_on_email\", unique: true\n  t.index [\"plan_id\"], name: \"index_users_on_plan_id\"\nend\n</code></pre>\n\n<p>I'm out of ideas. I appreciate any help you guys can give me. Cheers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "active-model-serializers", "json-api"], "answers": [{"comments": [{"owner": {"reputation": 154, "user_id": 1929671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9bed1f32e8f0cfca360dbfce66be38c?s=128&d=identicon&r=PG", "display_name": "Quentin Gaultier", "link": "https://stackoverflow.com/users/1929671/quentin-gaultier"}, "edited": false, "score": 0, "creation_date": 1525806625, "post_id": 50239608, "comment_id": 87498877, "body": "ok, so in rails: <i>serilalize</i> = <i>serialize</i> + <b>query missing data from db</b> , right ?"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "reply_to_user": {"reputation": 154, "user_id": 1929671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9bed1f32e8f0cfca360dbfce66be38c?s=128&d=identicon&r=PG", "display_name": "Quentin Gaultier", "link": "https://stackoverflow.com/users/1929671/quentin-gaultier"}, "edited": false, "score": 0, "creation_date": 1525856237, "post_id": 50239608, "comment_id": 87515891, "body": "Yes. The only alternatives would be: 1. Raise an error that it can&#39;t render because of missing data. 2. Set an error on a relevant object and return false as result (like with <i>ActiveRecord::Base</i>). But the implementation in my answer is where the Rails developers went with."}], "tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 1, "last_activity_date": 1525802881, "last_edit_date": 1525802881, "creation_date": 1525802172, "answer_id": 50239608, "question_id": 50239224, "link": "https://stackoverflow.com/questions/50239224/active-model-serializers-includes-and-why-a-serializer-is-querying-data/50239608#50239608", "title": "active_model_serializers, includes, and why a serializer is querying data?", "body": "<p>Yes, to include a association it first has to be fetched from the database. Otherwise how can it be included in the response?</p>\n\n<p>See the <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Serializers/JSON.html#method-i-as_json\" rel=\"nofollow noreferrer\">json serializer documentation</a>.</p>\n\n<p>The association is called by it's corresponding method. In your example that would be <em>Artist#tracks</em>. (See the <a href=\"https://github.com/rails/rails/blob/375a4143cf5caeb6159b338be824903edfd62836/activemodel/lib/active_model/serialization.rb#L186\" rel=\"nofollow noreferrer\">source code</a>.) <strong>This means that if you load the association before calling the serializer it will not call the database.</strong></p>\n\n<p>Example:</p>\n\n<pre><code>artist = Artist.first # &lt;= artists table gets queried\nartist.tracks.load # &lt;= tracks table gets queried\nrender json: artist, include: :tracks # &lt;= no queries\n</code></pre>\n"}], "owner": {"reputation": 154, "user_id": 1929671, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f9bed1f32e8f0cfca360dbfce66be38c?s=128&d=identicon&r=PG", "display_name": "Quentin Gaultier", "link": "https://stackoverflow.com/users/1929671/quentin-gaultier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 605, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525802881, "creation_date": 1525800545, "question_id": 50239224, "link": "https://stackoverflow.com/questions/50239224/active-model-serializers-includes-and-why-a-serializer-is-querying-data", "title": "active_model_serializers, includes, and why a serializer is querying data?", "body": "<p>When working with API, I am used to:</p>\n\n<ol>\n<li>execute some DB queries</li>\n<li>select the data I want in my response</li>\n<li>serialize the data, and send it to the client</li>\n</ol>\n\n<p><em>Now</em>, using <strong>active_model_serializers</strong>, I was assuming that in</p>\n\n<p><code>render json: artist, include: 'tracks'</code> </p>\n\n<p>the <code>include: 'tracks'</code> part would serialize <code>tracks</code>, if my artist had some tracks.</p>\n\n<p>But apparently, it will also fetch the tracks from the db for me.</p>\n\n<p><strong>Is it a normal behaviour</strong> ? Is the serializer supposed to make db queries ?</p>\n"}, {"tags": ["ruby", "nanoc"], "comments": [{"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525797707, "post_id": 50237862, "comment_id": 87494258, "body": "Let me see if I understand what you want. You have the variable <i>items</i> with URLs, and you want to extract some of these URLs from the <i>items</i> and... &quot;I&#39;m trying to create a URL that will list all of the manuals in one search.&quot;. This is weird, what you mean with that? Could explain better? And could also you give us some examples of URLs?"}, {"owner": {"reputation": 11, "user_id": 7511786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc767abcf41836613e9d7b237bd336c?s=128&d=identicon&r=PG&f=1", "display_name": "a_citizen", "link": "https://stackoverflow.com/users/7511786/a-citizen"}, "reply_to_user": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 0, "creation_date": 1525805102, "post_id": 50237862, "comment_id": 87498062, "body": "Sorry, I know it&#39;s confusing. Right now the above code searches our catalog and extracts all SUV manuals and creates a list of Chevy, GMC, BMW, etc each item linking to its item-specific manual. I want to create a URL that grabs all of the car companies in a search. The link would look like <a href=\"http://www.my_url.comSearch/&quot;Chevy&quot;OR&quot;GMC&quot;OR&quot;BMW\" rel=\"nofollow noreferrer\">my_url.comSearch/&quot;Chevy&quot;OR&quot;GMC&quot;OR&quot;BMW</a>&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 7511786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc767abcf41836613e9d7b237bd336c?s=128&d=identicon&r=PG&f=1", "display_name": "a_citizen", "link": "https://stackoverflow.com/users/7511786/a-citizen"}, "edited": false, "score": 0, "creation_date": 1525871928, "post_id": 50241256, "comment_id": 87526199, "body": "This helps immensely! Thanks for your time."}, {"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "reply_to_user": {"reputation": 11, "user_id": 7511786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc767abcf41836613e9d7b237bd336c?s=128&d=identicon&r=PG&f=1", "display_name": "a_citizen", "link": "https://stackoverflow.com/users/7511786/a-citizen"}, "edited": false, "score": 0, "creation_date": 1525872160, "post_id": 50241256, "comment_id": 87526369, "body": "@a_citizen could mark the answer as correct, if it helps you. Thanks."}], "tags": [], "owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "is_accepted": false, "score": 0, "last_activity_date": 1526051978, "last_edit_date": 1526051978, "creation_date": 1525808819, "answer_id": 50241256, "question_id": 50237862, "link": "https://stackoverflow.com/questions/50237862/linking-to-search-results-with-ruby/50241256#50241256", "title": "Linking to search results with Ruby", "body": "<p>As you didn't specify what <em>items</em> is returning, I did an general example:</p>\n\n<pre><code>require 'uri'\n\n# let suppose that your items query has the follow output\nmanuals = [\"Chevy\", \"GMC\", \"BMW\"]\n\n# build the url base\nurl = \"www.mycars.com/search/?list_of_cars=\"\n\n# build the parameter that will be passed by the url\nmanuals.each do |car|\n    url += car + \",\"\nend\n\n# remove the last added comma\nurl.slice!(-1)\n\nyour_new_url = URI::encode(url)\n\n# www.mycars.com/?list_of_cars=Chevy,GMC,BMW\n\n# In your controller, you will be able to get the parameter with\n# URI::decode(params[:list_of_cars]) and it will be a string:\n# \"Chevy,GMC,BMW\".split(',') method to get each value.\n</code></pre>\n\n<p>Some considerations:</p>\n\n<ul>\n<li><p>I don't know if you are gonna use this on view or controller, if will be in view, than wrap the code with the <code>&lt;% %&gt;</code> syntax. </p></li>\n<li><p>About the URL format, you can find more choices of how to build it in:\n<a href=\"https://stackoverflow.com/questions/6243051/how-to-pass-an-array-within-a-query-string?utm_medium=organic&amp;utm_source=google_rich_qa&amp;utm_campaign=google_rich_qa\">Passing array through URLs</a></p></li>\n<li><p>When writing question on SO, please, put more work on that. You will help us find a quick answer to your question, and you, for wait less for an answer.</p></li>\n<li><p>If you need something more specific, just ask and I can see if I can answer.</p></li>\n</ul>\n"}], "owner": {"reputation": 11, "user_id": 7511786, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9cc767abcf41836613e9d7b237bd336c?s=128&d=identicon&r=PG&f=1", "display_name": "a_citizen", "link": "https://stackoverflow.com/users/7511786/a-citizen"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1526051978, "creation_date": 1525795265, "question_id": 50237862, "link": "https://stackoverflow.com/questions/50237862/linking-to-search-results-with-ruby", "title": "Linking to search results with Ruby", "body": "<p>I'm a complete novice in Ruby and Nanoc, but a project has been put in my lap. Basically, the code for the page brings back individual URLs for each item linking them to the manual. I'm trying to create a URL that will list all of the manuals in one search. Any help is appreciated.</p>\n\n<p>Here's the code: </p>\n\n<pre><code>&lt;div&gt;\n  &lt;%\n    manuals = @items.find_all('/manuals/autos/*')\n      .select {|item| item[:tag] == 'suv' }\n      .sort_by {|item| item[:search] }\n\n    manuals.each_slice((manuals.size / 4.0).ceil).each do |manuals_column|\n  %&gt;\n    &lt;div&gt;\n      &lt;% manual_column.each do |manual| %&gt;\n        &lt;div&gt;\n          &lt;a href=\"&lt;%= app_url \"/SearchManual/\\\"#{manual[:search]}\\\"\" %&gt;\"&gt;\n            &lt;%= manual[:search] %&gt;\n          &lt;/a&gt;\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby", "algorithm", "mergesort"], "answers": [{"comments": [{"owner": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "edited": false, "score": 0, "creation_date": 1525796643, "post_id": 50237979, "comment_id": 87493662, "body": "Ah duh! merge sort is pretty confusing unless you almost write it out step by step it seems."}], "tags": [], "owner": {"reputation": 35084, "user_id": 585411, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/xvEpe.jpg?s=128&g=1", "display_name": "btilly", "link": "https://stackoverflow.com/users/585411/btilly"}, "is_accepted": true, "score": 2, "last_activity_date": 1525795675, "creation_date": 1525795675, "answer_id": 50237979, "question_id": 50237555, "link": "https://stackoverflow.com/questions/50237555/merge-sort-confusion-stack-level-too-deep/50237979#50237979", "title": "Merge Sort confusion, stack level too deep?", "body": "<p>The second call should be <code>mergeSort(arr,mid+1,endIndex)</code>.</p>\n\n<p>It works fine if you leave out the second call because you narrow in to the beginning.  It works fine if you leave out the first call because you narrow in to the end.  It fails if you have both because you go to sort the first half and find yourself on the second call still trying to sort the whole array...recursively.</p>\n"}], "owner": {"reputation": 1823, "user_id": 5065860, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/faadf161352c9fca88a34c8f05103185?s=128&d=identicon&r=PG&f=1", "display_name": "msmith1114", "link": "https://stackoverflow.com/users/5065860/msmith1114"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50237979, "answer_count": 1, "score": 0, "last_activity_date": 1525795675, "creation_date": 1525794284, "question_id": 50237555, "link": "https://stackoverflow.com/questions/50237555/merge-sort-confusion-stack-level-too-deep", "title": "Merge Sort confusion, stack level too deep?", "body": "<p>So Im learning merge sort (In Ruby) and I understand mostly of how it works, so I was just writing the beginning of the \"mergeSort\" functionality and splitting the arrays up:</p>\n\n<pre><code>array = [5,1,8,3,4,6,11,2]\n\ndef mergeSort(arr,beginIndex,endIndex)\n  if endIndex &gt; beginIndex\n    mid = (beginIndex+endIndex)/2 \n    puts mid\n    puts \"#{arr[0..mid]}\"\n    puts \"#{arr[mid+1..-1]}\"\n    mergeSort(arr,0,mid) #comment out here?\n    mergeSort(arr,mid+1,arr.length-1) #or here?\n\n  end\n\n\nend\nmergeSort(array,0,array.length-1)\n</code></pre>\n\n<p>So I understand whats happening, and whats printing out works correctly. However the strange thing is...if I comment out either one of the secondary nested <code>mergeSort</code>'s (where I say \"#comment out here? or here?) I get a printout like I would think. However if I leave both it'll go on forever until I get a \"stack level too deep\". Which is weird because commenting out either one it'll stop when the array is at 1 length.</p>\n\n<p>Why is this happening?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actioncontroller"], "answers": [{"tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 4, "last_activity_date": 1525791885, "creation_date": 1525791885, "answer_id": 50236761, "question_id": 50236606, "link": "https://stackoverflow.com/questions/50236606/why-am-i-getting-an-actioncontrollerurlgenerationerror-no-route-matches/50236761#50236761", "title": "Why am I getting an &quot;ActionController::UrlGenerationError: No route matches...&quot; error?", "body": "<p>You're hitting the wrong action. You're already in your Authentication controller so other than the params you just need the action:</p>\n\n<pre><code>post 'authenticate', params:  valid_credentials , headers: headers\n</code></pre>\n\n<p>The place you are posting must match the end point of the controller, whatever you've defined the method as, in this case 'authenticate'</p>\n"}], "owner": {"reputation": 106, "user_id": 4012872, "user_type": "registered", "profile_image": "https://graph.facebook.com/684643650/picture?type=large", "display_name": "Davie Overman", "link": "https://stackoverflow.com/users/4012872/davie-overman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 955, "favorite_count": 0, "accepted_answer_id": 50236761, "answer_count": 1, "score": 1, "last_activity_date": 1525791885, "creation_date": 1525791411, "question_id": 50236606, "link": "https://stackoverflow.com/questions/50236606/why-am-i-getting-an-actioncontrollerurlgenerationerror-no-route-matches", "title": "Why am I getting an &quot;ActionController::UrlGenerationError: No route matches...&quot; error?", "body": "<p>I am using ruby 2.3.1 with rails 5.0.7.  I have the following errors when running RSpec:</p>\n\n<p>Failures:</p>\n\n<p>1) AuthenticationController POST /auth/login when request is valid returns an authentication token\n     Failure/Error: before { post 'auth/login', params:  valid_credentials , headers: headers }</p>\n\n<pre><code> ActionController::UrlGenerationError:\n   No route matches {:action=&gt;\"auth/login\", :controller=&gt;\"authentication\", :email=&gt;\"foo@bar.com\", :password=&gt;\"foobar\"}\n # ./spec/controllers/authentication_controller_spec.rb:32:in `block (4 levels) in &lt;top (required)&gt;'\n # ./spec/rails_helper.rb:85:in `block (3 levels) in &lt;top (required)&gt;'\n # ./spec/rails_helper.rb:84:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>2) AuthenticationController POST /auth/login When request is invalid returns a failure message\n     Failure/Error: before { post '/auth/login', params: invalid_credentials, headers: headers }</p>\n\n<pre><code> ActionController::UrlGenerationError:\n   No route matches {:action=&gt;\"/auth/login\", :controller=&gt;\"authentication\", :email=&gt;\"paolo.jakubowski@quitzonbartoletti.net\", :password=&gt;\"30NoVoGu7h\"}\n # ./spec/controllers/authentication_controller_spec.rb:41:in `block (4 levels) in &lt;top (required)&gt;'\n # ./spec/rails_helper.rb:85:in `block (3 levels) in &lt;top (required)&gt;'\n # ./spec/rails_helper.rb:84:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>Here is my routes.rb:</p>\n\n<p>Rails.application.routes.draw do\n  # For details on the DSL available within this file, see <a href=\"http://guides.rubyonrails.org/routing.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/routing.html</a></p>\n\n<p>resources :todos do</p>\n\n<pre><code> resources :items\n</code></pre>\n\n<p>end</p>\n\n<p>post 'auth/login', to: 'authentication#authenticate'</p>\n\n<p>post 'signup', to: 'users#create'</p>\n\n<p>end</p>\n\n<p>Here are the generated routes:</p>\n\n<p>Prefix Verb   URI Pattern                         Controller#Action</p>\n\n<pre><code>    todo_items GET    /todos/:todo_id/items(.:format)     items#index\n\n       POST   /todos/:todo_id/items(.:format)     items#create\n\n\n    todo_item GET    /todos/:todo_id/items/:id(.:format) items#show\n\n       PATCH  /todos/:todo_id/items/:id(.:format) items#update\n\n       PUT    /todos/:todo_id/items/:id(.:format) items#update\n\n       DELETE /todos/:todo_id/items/:id(.:format) items#destroy\n\n todos GET    /todos(.:format)                    todos#index\n\n       POST   /todos(.:format)                    todos#create\n\n  todo GET    /todos/:id(.:format)                todos#show\n\n       PATCH  /todos/:id(.:format)                todos#update\n\n       PUT    /todos/:id(.:format)                todos#update\n\n       DELETE /todos/:id(.:format)                todos#destroy\n\n  auth_login POST   /auth/login(.:format)        authentication#authenticate\n\nsignup POST   /signup(.:format)                   users#create\n</code></pre>\n\n<p>Here is the authentication_controller.spec:</p>\n\n<pre><code>    require 'rails_helper'\n\n    RSpec.describe AuthenticationController, type: :controller do\n      # Authentication test suite\n      describe 'POST /auth/login' do\n        # create test user\n        let!(:user) { create(:user) }\n\n        # set headers for authorization\n        let(:headers) { valid_headers.except('Authorization')  }\n\n        # set test valid and invalid credentials\n        let(:valid_credentials) do \n           { \n              email: user.email, \n              password: user.password \n           } \n        end # let(:valid_credentials) do \n\n        let(:invalid_credentials) do \n          {\n             email: Faker::Internet.email,\n             password: Faker::Internet.password\n          }\n        end # let(:invalid_credentials) do \n\n        # set request.headers to our custom headers\n        # before { allow(request).to receive(:headers).and_return(headers) }\n\n        # returns auth token when request is valid\n        context 'when request is valid' do\n          before { post 'auth/login', params:  valid_credentials , headers: headers }\n\n          it 'returns an authentication token' do\n            expect(json['auth_token']).not_to be_nil\n          end #  it 'returns an authentication token' do\n        end #     context 'when request is valid' do\n\n        # returns failure message when request is invalid\n        context 'When request is invalid' do\n          before { post '/auth/login', params: invalid_credentials, headers: headers }\n\n          it 'returns a failure message' do\n            expect(json['message']).to match(/Invalid credentials/)\n          end # it 'returns a failure message' do\n        end # context 'When request is invalid' do\n\n\n      end # describe 'POST /auth/login' do\n\n    end # RSpec.describe AuthenticationController, type: :controller do\n</code></pre>\n\n<p>Here is authentication_controller:</p>\n\n<pre><code>    class AuthenticationController &lt; ApplicationController\n\n      skip_before_action :authorize_request, only: :authenticate\n      # return auth token once user is authenticated\n      def authenticate\n        auth_token = AuthenticateUser.new(auth_params[:email], auth_params[:password]).call\n        json_response(auth_token: auth_token)\n      end # def authenticate\n\n      private\n\n      def auth_params\n        params.permit(:email, :password)\n      end\n\n    end\n</code></pre>\n\n<p>Any assistance will be appreciated. Thanks in advance.</p>\n"}, {"tags": ["ruby", "passenger", "phusion"], "comments": [{"owner": {"reputation": 449, "user_id": 6324558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695946b2499d7dcb2759724e66cfad38?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Delahaye", "link": "https://stackoverflow.com/users/6324558/alexis-delahaye"}, "edited": false, "score": 0, "creation_date": 1525858127, "post_id": 50235165, "comment_id": 87517076, "body": "what command are you using (with backticks) to start Passenger? This <a href=\"https://stackoverflow.com/a/7260981/6324558\">answer</a> seems to start the Passenger daemon, (simply redirect the output of the command to a log file in bash to retrieve your STDOUT)"}, {"owner": {"reputation": 17, "user_id": 3493495, "user_type": "registered", "profile_image": "https://graph.facebook.com/614341912/picture?type=large", "display_name": "Alex Deva", "link": "https://stackoverflow.com/users/3493495/alex-deva"}, "reply_to_user": {"reputation": 449, "user_id": 6324558, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/695946b2499d7dcb2759724e66cfad38?s=128&d=identicon&r=PG&f=1", "display_name": "Alexis Delahaye", "link": "https://stackoverflow.com/users/6324558/alexis-delahaye"}, "edited": false, "score": 0, "creation_date": 1525946059, "post_id": 50235165, "comment_id": 87557578, "body": "I use <code>passenger start</code> or some variation of it."}], "answers": [{"comments": [{"owner": {"reputation": 17, "user_id": 3493495, "user_type": "registered", "profile_image": "https://graph.facebook.com/614341912/picture?type=large", "display_name": "Alex Deva", "link": "https://stackoverflow.com/users/3493495/alex-deva"}, "edited": false, "score": 0, "creation_date": 1525945807, "post_id": 50264562, "comment_id": 87557416, "body": "I didn&#39;t think about Kernel.exec; I think that&#39;s the way to go, as I&#39;m rather keep on Passenger for unrelated reasons. Thanks so much!"}], "tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": true, "score": 0, "last_activity_date": 1525918994, "creation_date": 1525918994, "answer_id": 50264562, "question_id": 50235165, "link": "https://stackoverflow.com/questions/50235165/start-phusion-passenger-from-ruby-code/50264562#50264562", "title": "Start Phusion Passenger from Ruby code", "body": "<p>Passanger is a C++ \"gem\" that actually runs the Ruby layer separated from the root server process.</p>\n\n<p>The developers consider this approach to protect the server from Ruby related issues (I think this isn't necessary, but it's definitely interesting).</p>\n\n<p>This leaves you with a couple of options:</p>\n\n<ol>\n<li><p>You could use <a href=\"https://ruby-doc.org/core-2.5.0/Kernel.html#method-i-exec\" rel=\"nofollow noreferrer\"><code>Kernel.exec</code></a> which <strong>replaces</strong> the current process with the command line you provide.</p></li>\n<li><p>You could use another server, such as <a href=\"https://github.com/puma/puma\" rel=\"nofollow noreferrer\">Puma</a>, <a href=\"https://github.com/boazsegev/iodine\" rel=\"nofollow noreferrer\">Iodine</a>, <a href=\"https://github.com/ohler55/agoo\" rel=\"nofollow noreferrer\">Agoo</a> or whatever you fancy.</p>\n\n<p>Each server has their advantages and their disadvantages so test and pick and choose.</p>\n\n<p>I know from experience that you can start all of them from within a block of code (or so I recall).</p></li>\n</ol>\n"}], "owner": {"reputation": 17, "user_id": 3493495, "user_type": "registered", "profile_image": "https://graph.facebook.com/614341912/picture?type=large", "display_name": "Alex Deva", "link": "https://stackoverflow.com/users/3493495/alex-deva"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 50264562, "answer_count": 1, "score": 0, "last_activity_date": 1525918994, "creation_date": 1525787080, "question_id": 50235165, "link": "https://stackoverflow.com/questions/50235165/start-phusion-passenger-from-ruby-code", "title": "Start Phusion Passenger from Ruby code", "body": "<p>I'd like to start the server from inside my gem code, the way Rails starts Unicorn, Puma, Webrick or whatever with \"rails server\". I'd like to have a binary like \"mygem server\" and that would start Passenger.</p>\n\n<p>I tried with backticks but I'd like to avoid spawning another process if it's at all possible. (Also, I lost the stdout from Passenger when I did that.)</p>\n\n<p>Is the command line the only way to start Passenger?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "redirect", "devise", "url-redirection"], "comments": [{"owner": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1525785651, "post_id": 50234407, "comment_id": 87486610, "body": "I believe you have to use something like <a href=\"https://github.com/lynndylanhurley/devise_token_auth\" rel=\"nofollow noreferrer\">github.com/lynndylanhurley/devise_token_auth</a> instead of <code>Devise</code> for SPA auth."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4412054"}, "reply_to_user": {"reputation": 2487, "user_id": 8098012, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0cbdb5ca9b079de1c9700271166feead?s=128&d=identicon&r=PG", "display_name": "Pavel Mikhailyuk", "link": "https://stackoverflow.com/users/8098012/pavel-mikhailyuk"}, "edited": false, "score": 0, "creation_date": 1525786625, "post_id": 50234407, "comment_id": 87487304, "body": "Thanks for your answer. But this is not the question."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4412054"}, "edited": false, "score": 0, "creation_date": 1525792745, "post_id": 50235150, "comment_id": 87491414, "body": "Great answer but I don&#39;t wanna mess the session. Thanks anyway!"}], "tags": [], "owner": {"reputation": 2090, "user_id": 5113690, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/cbKBX.png?s=128&g=1", "display_name": "m3characters", "link": "https://stackoverflow.com/users/5113690/m3characters"}, "is_accepted": false, "score": 0, "last_activity_date": 1525787042, "creation_date": 1525787042, "answer_id": 50235150, "question_id": 50234407, "link": "https://stackoverflow.com/questions/50234407/rails-devise-spa-redirect-to-custom-url-with-param-in-query-string-after-lo/50235150#50235150", "title": "Rails, devise, SPA, redirect to custom url (with param in query string) after logout and login (sign_out, sign_in)", "body": "<p>That's one problem of mixing SPA routes and non-spa routes. I think it's preferable to loose some upfront time translating devise into an api only response and then making the user session routing be SPA as well.</p>\n\n<p>I'm not sure if you can't access the request params in the devise controller, you should check, perhaps you can, but if not there is at least one other way you could work around this and that would be to have a <code>before_action</code> on your <code>application_controller.rb</code> before any devise logic, to just assign a session key based on the params, and in your <code>after_action</code> remove it, for example (just to illustrate):</p>\n\n<pre><code>#application_controller.rb\nbefore_action :set_continue\n#...\n\ndef set_continue\n  if params[:continue]\n    session[:continue] = params[:continue]\n  end\nend\n</code></pre>\n\n<p>This then would allow you to use it on the <code>after_sign_in_path</code>:</p>\n\n<pre><code>def after_sign_in_path_for(resource)\n  if session[:continue]\n     navigation = session[:continue]\n     session[:continue] = nil\n     navigation\n  else\n     your_regular_path_helper #or super I guess\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 775, "user_id": 1544440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75da798fa2e162ff6eab82bc51a2d3a3?s=128&d=identicon&r=PG", "display_name": "Omar Bahareth", "link": "https://stackoverflow.com/users/1544440/omar-bahareth"}, "is_accepted": false, "score": 0, "last_activity_date": 1525787827, "creation_date": 1525787827, "answer_id": 50235426, "question_id": 50234407, "link": "https://stackoverflow.com/questions/50234407/rails-devise-spa-redirect-to-custom-url-with-param-in-query-string-after-lo/50235426#50235426", "title": "Rails, devise, SPA, redirect to custom url (with param in query string) after logout and login (sign_out, sign_in)", "body": "<p>You can use <code>stored_location_for</code> and <code>store_location_for</code>. This example is taken from the Devise wiki's <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-redirect-to-a-specific-page-on-successful-sign-in\" rel=\"nofollow noreferrer\">How To: redirect to a specific page on successful sign in</a>.</p>\n\n<pre><code># some_controller.rb (or even the application_controller)\nif params[:redirect_to].present?\n  store_location_for(resource, params[:redirect_to])    \nend\n\n# application_controller.rb\nclass ApplicationController &lt; ActionController::Base\n  protect_from_forgery\n\n  protected  \n    def after_sign_in_path_for(resource)\n      sign_in_url = new_user_session_url\n      if request.referer == sign_in_url\n        super\n      else\n        stored_location_for(resource) || request.referer || root_path\n      end\n    end\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4412054"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 697, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1525787827, "creation_date": 1525784856, "question_id": 50234407, "link": "https://stackoverflow.com/questions/50234407/rails-devise-spa-redirect-to-custom-url-with-param-in-query-string-after-lo", "title": "Rails, devise, SPA, redirect to custom url (with param in query string) after logout and login (sign_out, sign_in)", "body": "<p>I have a default Rails app with <code>devise</code> gem and some routes are totally SPA (single page application).</p>\n\n<p>If I go on that SPA pages (let's say \"<code>/home</code>\") and I'm not authenticated (or the session is over) it redirects me to:</p>\n\n<ul>\n<li>\"<code>localhost:3000/users/sign_out</code>\"</li>\n<li>and then devise to \"<code>localhost:3000/users/sign_in</code>\"</li>\n</ul>\n\n<p>Everything good, but.</p>\n\n<p>What I need now is that if I go to let's say \"<code>/home/jobs</code>\" and like before I'm not authenticated or the session is over it redirects me to:</p>\n\n<ul>\n<li>\"<code>localhost:3000/users/sign_out?continue=localhost:3000/home/jobs</code>\" (I do that with javascript \"window.location.replace\")</li>\n<li>but then devise redirects me to \"<code>localhost:3000/users/sign_in</code>\"</li>\n<li>and after that I loose my \"<code>continue</code>\" params in query string and I cannot proceed to \"continue\" URL after login.</li>\n</ul>\n\n<p>I know about <code>after_sign_in_path_for</code> and <code>after_sign_out_path_for</code> but I think that doesn't work with params in query string, right?</p>\n\n<p>Is this a crazy scenario?</p>\n"}, {"tags": ["ruby", "hash", "variable-assignment"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1525784540, "post_id": 50234228, "comment_id": 87485891, "body": "There have been proposals for a feature to allow that, but at the moment, you cannot do that."}], "answers": [{"tags": [], "owner": {"reputation": 2322, "user_id": 3088748, "user_type": "registered", "accept_rate": 63, "profile_image": "https://graph.facebook.com/544821277/picture?type=large", "display_name": "AJFaraday", "link": "https://stackoverflow.com/users/3088748/ajfaraday"}, "is_accepted": false, "score": -1, "last_activity_date": 1525784719, "creation_date": 1525784719, "answer_id": 50234356, "question_id": 50234228, "link": "https://stackoverflow.com/questions/50234228/object-assignment-in-ruby-in-the-javascript-way/50234356#50234356", "title": "Object assignment in Ruby in the JavaScript way", "body": "<p>I'm not completely sure what you're trying to achieve here, but it sounds a little like OpenStruct.</p>\n\n<p>It takes any method name as an attribute, and any method name followed by an = as a setter...</p>\n\n<pre><code>require 'ostruct'\nx = OpenStruct.new(a: 'a', b: 'b')\n\nx.a\n# 'a'\nx.foo\n# nil\nx.foo = 'bar'\n# 'bar'\n</code></pre>\n"}], "owner": {"reputation": 6329, "user_id": 178728, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WEcsM.jpg?s=128&g=1", "display_name": "kstratis", "link": "https://stackoverflow.com/users/178728/kstratis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 198, "favorite_count": 1, "closed_date": 1525784957, "answer_count": 1, "score": 0, "last_activity_date": 1525784719, "creation_date": 1525784299, "last_edit_date": 1525784479, "question_id": 50234228, "link": "https://stackoverflow.com/questions/50234228/object-assignment-in-ruby-in-the-javascript-way", "closed_reason": "Duplicate", "title": "Object assignment in Ruby in the JavaScript way", "body": "<p>In JavaScript (ES6), I can write the following as a shortcut for creating a new object with a key and its value sharing the same name:</p>\n\n<pre><code>var a = 1\nvar b = 2\n\nvar myobject = { a, b };\n</code></pre>\n\n<p>This is essentially the same as:</p>\n\n<pre><code>var myobject = { a: a, b: b };\n</code></pre>\n\n<p>How can I do it for a Ruby hash?</p>\n"}, {"tags": ["ruby", "class", "object"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 4, "creation_date": 1525782864, "post_id": 50233706, "comment_id": 87484869, "body": "It&#39;d be nice if you posted code without the line numbers (so that we can copy/paste/run)"}], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1525783689, "post_id": 50234012, "comment_id": 87485366, "body": "You mean <code>CLogic.execute</code>, not <code>CLogic#execute</code>"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 2, "last_activity_date": 1525784030, "last_edit_date": 1525784030, "creation_date": 1525783604, "answer_id": 50234012, "question_id": 50233706, "link": "https://stackoverflow.com/questions/50233706/scope-of-modules-methods-and-extension-of-inner-classes/50234012#50234012", "title": "Scope of module&#39;s methods and extension of inner classes", "body": "<p>You defined <code>Ma#execute</code>, which was included in the main environment. That brings the definition into <code>Object</code>. Since <code>CLogic</code> is an instance of <code>Object</code>, <code>CLogic.execute</code> would be callable.</p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 3, "last_activity_date": 1525784091, "last_edit_date": 1525784091, "creation_date": 1525783620, "answer_id": 50234018, "question_id": 50233706, "link": "https://stackoverflow.com/questions/50233706/scope-of-modules-methods-and-extension-of-inner-classes/50234018#50234018", "title": "Scope of module&#39;s methods and extension of inner classes", "body": "<p>Including a module at top-level makes its instance methods available to all objects, not just <code>CLogic</code>:</p>\n\n<pre><code>include Ma\n123.execute    #=&gt; \"Module Ma executes.\"\n:foo.execute   #=&gt; \"Module Ma executes.\"\nArray.execute  #=&gt; \"Module Ma executes.\"\nCLogic.execute #=&gt; \"Module Ma executes.\"\n</code></pre>\n\n<p>It's basically like:</p>\n\n<pre><code>class Object\n  include Ma\nend\n</code></pre>\n"}], "owner": {"reputation": 3, "user_id": 5654142, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b73ffabb0028cd480357e302834c2f88?s=128&d=identicon&r=PG&f=1", "display_name": "J.Doe", "link": "https://stackoverflow.com/users/5654142/j-doe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 50234012, "answer_count": 2, "score": 0, "last_activity_date": 1525784091, "creation_date": 1525782650, "last_edit_date": 1525784015, "question_id": 50233706, "link": "https://stackoverflow.com/questions/50233706/scope-of-modules-methods-and-extension-of-inner-classes", "title": "Scope of module&#39;s methods and extension of inner classes", "body": "<p>I ran this script:</p>\n\n<pre><code>module Ma\n  class CLogic; end\n\n  def execute\n    \"Module Ma executes.\"\n  end\nend\n\ninclude Ma\nCLogic.execute # =&gt; \"Module Ma executes.\"\n</code></pre>\n\n<p>It executes <code>Ma#execute</code>. I expected something like <code>Undefined method 'execute' for class A.</code>. I want to understand why. Is class <code>CLogic</code> extended by the module because of the <code>include</code>?</p>\n"}, {"tags": ["ruby", "inheritance", "super"], "comments": [{"owner": {"reputation": 958, "user_id": 5666052, "user_type": "registered", "accept_rate": 58, "profile_image": "https://graph.facebook.com/100002574636751/picture?type=large", "display_name": "Pedro Gabriel Lima", "link": "https://stackoverflow.com/users/5666052/pedro-gabriel-lima"}, "edited": false, "score": 1, "creation_date": 1525782268, "post_id": 50233246, "comment_id": 87484491, "body": "I guess you are getting an error because Ruby doesn&#39;t support method overloading? When you Inheritance B &lt; A, you are passing all the publics and protected methods to class B, as both have the same methods name, but different number of arguments, it seems to me that you are overloading the class B."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 3, "creation_date": 1525783048, "post_id": 50233246, "comment_id": 87484983, "body": "It&#39;s easier if you think in terms of message sending. <code>method_1(arg)</code> sends the message <code>method_1</code> to <code>self</code>, i.e. to <code>inst_B</code>. Ruby then searches for a method matching that name, starting with <code>B</code>&#39;s methods and finds <code>B#method_1</code>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1525781795, "post_id": 50233376, "comment_id": 87484173, "body": "The OP is aware that <code>B#method_1</code> is called. The question is <i>why?</i>."}], "tags": [], "owner": {"reputation": 4420, "user_id": 1360318, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a60c954665247aae8de274c26e843867?s=128&d=identicon&r=PG", "display_name": "mbuechmann", "link": "https://stackoverflow.com/users/1360318/mbuechmann"}, "is_accepted": false, "score": 2, "last_activity_date": 1525782090, "last_edit_date": 1525782090, "creation_date": 1525781659, "answer_id": 50233376, "question_id": 50233246, "link": "https://stackoverflow.com/questions/50233246/super-and-inheritance-in-ruby/50233376#50233376", "title": "&#39;super&#39; and inheritance in Ruby", "body": "<p><code>method_2</code> in class <code>B</code> calls <code>method_2</code>(super) in class <code>A</code> with the arg <code>\"bar\"</code>. <code>method_2</code> in class <code>A</code> (called from class <code>B</code>) calls <code>method_1</code> in class <code>B</code> with the arg <code>\"bar\"</code>. <code>method_1</code> and <code>method_2</code> from class <code>B</code> override their namesakes from class <code>A</code>. That is why <code>method_1</code> from the inheriting class gets called.</p>\n"}, {"comments": [{"owner": {"reputation": 75, "user_id": 1667324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/90VFs.png?s=128&g=1", "display_name": "Fabien Teulieres", "link": "https://stackoverflow.com/users/1667324/fabien-teulieres"}, "edited": false, "score": 0, "creation_date": 1526956000, "post_id": 50234017, "comment_id": 87931154, "body": "<i>&quot;Remember that Ruby <b>doesn&#39;t</b> support method overloading (unless you use optional parameters)&quot;</i> nailed it for me. I naively assumed so, and that was the source of all my troubles. Thanks!"}], "tags": [], "owner": {"reputation": 775, "user_id": 1544440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75da798fa2e162ff6eab82bc51a2d3a3?s=128&d=identicon&r=PG", "display_name": "Omar Bahareth", "link": "https://stackoverflow.com/users/1544440/omar-bahareth"}, "is_accepted": true, "score": 4, "last_activity_date": 1525783616, "creation_date": 1525783616, "answer_id": 50234017, "question_id": 50233246, "link": "https://stackoverflow.com/questions/50233246/super-and-inheritance-in-ruby/50234017#50234017", "title": "&#39;super&#39; and inheritance in Ruby", "body": "<p>I modified your example to print out the current class in <code>A#method_1</code></p>\n\n<pre><code>def method_1(arg)\n   puts \"Using method_1 from class: '#{self.class}' with argument value '#{arg}'\"\nend\n</code></pre>\n\n<p>If you call <code>B#method_1</code>, you'll get this output</p>\n\n<pre><code>Using method_1 from class: 'B' with argument value 'foo'\n</code></pre>\n\n<p>As you said, it's calling <code>B#method_1</code> (which overrides <code>A#method_1</code>). The same applies to when <code>B#method_2</code> calls <code>super</code>, and then that tries to call <code>self#method_1</code>, which takes no arguments. <code>self</code> in this case is of type <code>B</code>, and <code>B</code> overrode <code>method_1</code> to take no arguments.</p>\n\n<p>Ruby first tries to find the method in <code>self</code> and calls it if it's found, otherwise it looks through that object's <code>ancestors</code> and calls the first version of the method it finds. In your case <code>self</code> has <code>method_1</code> which takes no arguments, and remember that Ruby doesn't support method overloading (unless you use optional parameters).</p>\n"}], "owner": {"reputation": 75, "user_id": 1667324, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/90VFs.png?s=128&g=1", "display_name": "Fabien Teulieres", "link": "https://stackoverflow.com/users/1667324/fabien-teulieres"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 50234017, "answer_count": 2, "score": 4, "last_activity_date": 1525785163, "creation_date": 1525781302, "last_edit_date": 1525785163, "question_id": 50233246, "link": "https://stackoverflow.com/questions/50233246/super-and-inheritance-in-ruby", "title": "&#39;super&#39; and inheritance in Ruby", "body": "<p>In class inheritance design below, class <code>B</code> inherits class <code>A</code>, and valuates its methods' arguments:</p>\n\n<pre><code>class A\n  def method_1(arg)\n     puts \"Using method_1 with argument value '#{arg}'\"\n  end\n\n  def method_2(arg)\n     method_1(arg)\n  end\nend\n\nclass B &lt; A\n   def method_1()\n      super(\"foo\")\n   end\n\n   def method_2()\n      super(\"bar\")\n   end\nend\n</code></pre>\n\n<p>Here's what I get when trying it:</p>\n\n<pre><code>inst_A = A.new\ninst_A.method_1(\"foo\")\n# &gt;&gt; Using method_1 with argument value 'foo'\ninst_A.method_2(\"bar\")\n# &gt;&gt; Using method_1 with argument value 'bar'\n</code></pre>\n\n<p>I no longer understand this:</p>\n\n<pre><code>inst_B = B.new\ninst_B.method_1\n# &gt;&gt; Using method_1 with argument value 'foo'\ninst_B.method_2\n# &gt;&gt; Error: #&lt;ArgumentError: wrong number of arguments (1 for 0)&gt;\n# &gt;&gt; &lt;main&gt;:11:in `method_1'\n# &gt;&gt; &lt;main&gt;:6:in `method_2'\n# &gt;&gt; &lt;main&gt;:16:in `method_2'\n</code></pre>\n\n<p>Why is <code>B#method_1</code> called when invoking <code>B#method_2</code>, and not <code>A#method_1</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "heroku-cli", "ruby-2.4"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525781839, "post_id": 50233044, "comment_id": 87484217, "body": "yes actually CSS apply successfully but it gives error so what I need to do after Your 1st option? like clean assets and recompile? can you give steps?"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "reply_to_user": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525781972, "post_id": 50233044, "comment_id": 87484303, "body": "you just need to add <code>config.assets.digest = false</code> in your environment file, thats it. I guess your heroku is running in production so you need to add this in <code>config&#47;environments&#47;production.rb</code>"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "reply_to_user": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525782307, "post_id": 50233044, "comment_id": 87484518, "body": "I don&#39;t understand what you are trying to ask?"}, {"owner": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525782566, "post_id": 50233044, "comment_id": 87484688, "body": "you told in the answer like my CSS is not converted properly so after update production.rb it will be converted (/assets/plugins/animate-908e25f4bf641868d8683022a5b62f54.cs&zwnj;&#8203;s)?"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "reply_to_user": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525783007, "post_id": 50233044, "comment_id": 87484961, "body": "No, what I said is you css is getting converted to /assets/plugins/animate-908e25f4bf641868d8683022a5b62f54.css&zwnj;&#8203;, that&#39;s why you are getting the errors, with <code>config.assets.digest = false</code> your css will not convert."}], "tags": [], "owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "is_accepted": true, "score": 0, "last_activity_date": 1525780660, "creation_date": 1525780660, "answer_id": 50233044, "question_id": 50232751, "link": "https://stackoverflow.com/questions/50232751/ruby-on-rails-5-1-4-css-files-not-found-it-gives-missing-error-in-browsers-con/50233044#50233044", "title": "Ruby on Rails 5.1.4 CSS files not found it gives missing error. in browser&#39;s console and heroku logs", "body": "<p>since all of the assets are masked before deployment check <a href=\"http://guides.rubyonrails.org/asset_pipeline.html#what-is-fingerprinting-and-why-should-i-care-questionmark\" rel=\"nofollow noreferrer\">fingerprinting</a> </p>\n\n<p>thus, all of your css are fingerprinted for e.g. </p>\n\n<pre><code>/assets/plugins/animate.css\n</code></pre>\n\n<p>must have converted into something like</p>\n\n<pre><code>/assets/plugins/animate-908e25f4bf641868d8683022a5b62f54.css\n</code></pre>\n\n<p>similarly to all of the other css.</p>\n\n<p>If you want to fix this, you have 2 options</p>\n\n<ol>\n<li><p>disable the asset fingerprinting</p>\n\n<pre><code>config.assets.digest = false  \n</code></pre>\n\n<p>For more info refer <a href=\"http://guides.rubyonrails.org/asset_pipeline.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/asset_pipeline.html</a></p></li>\n<li><p>use scss (its by default with ror), <a href=\"https://github.com/rails/sass-rails\" rel=\"nofollow noreferrer\">https://github.com/rails/sass-rails</a> </p>\n\n<ul>\n<li>change the file name home.css to home.scss</li>\n<li>change all <code>url('&lt;file-name&gt;')</code> to <code>asset-url('&lt;file-name&gt;')</code></li>\n</ul></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525781619, "post_id": 50233312, "comment_id": 87484042, "body": "Thanks, @omar but I already have the layout called home and I also  Load the CSS file via rails helper"}, {"owner": {"reputation": 775, "user_id": 1544440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75da798fa2e162ff6eab82bc51a2d3a3?s=128&d=identicon&r=PG", "display_name": "Omar Bahareth", "link": "https://stackoverflow.com/users/1544440/omar-bahareth"}, "reply_to_user": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525781683, "post_id": 50233312, "comment_id": 87484095, "body": "Could you show us how you&#39;re loading the file and your <code>config&#47;initializers&#47;assets.rb</code> ?"}, {"owner": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525781911, "post_id": 50233312, "comment_id": 87484261, "body": "i do  Rails.application.config.assets.precompile += %w( home.js home.css )"}, {"owner": {"reputation": 775, "user_id": 1544440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75da798fa2e162ff6eab82bc51a2d3a3?s=128&d=identicon&r=PG", "display_name": "Omar Bahareth", "link": "https://stackoverflow.com/users/1544440/omar-bahareth"}, "reply_to_user": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525781967, "post_id": 50233312, "comment_id": 87484299, "body": "Is <code>home.css</code> your theme? How and where are you loading the theme?"}, {"owner": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525782097, "post_id": 50233312, "comment_id": 87484368, "body": "I have a home layout under the home folder ii have all the CSS."}, {"owner": {"reputation": 775, "user_id": 1544440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75da798fa2e162ff6eab82bc51a2d3a3?s=128&d=identicon&r=PG", "display_name": "Omar Bahareth", "link": "https://stackoverflow.com/users/1544440/omar-bahareth"}, "reply_to_user": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "edited": false, "score": 0, "creation_date": 1525784772, "post_id": 50233312, "comment_id": 87486037, "body": "Then I would recommend going into the Rails console (<code>rails c</code>) and running <code>Rails.application.assets.paths</code> and see if the directory you want is included there, if not, then you probably need to either move it, prefix a missing part of the path in where you include it, or add to your path."}], "tags": [], "owner": {"reputation": 775, "user_id": 1544440, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75da798fa2e162ff6eab82bc51a2d3a3?s=128&d=identicon&r=PG", "display_name": "Omar Bahareth", "link": "https://stackoverflow.com/users/1544440/omar-bahareth"}, "is_accepted": false, "score": 0, "last_activity_date": 1525781471, "creation_date": 1525781471, "answer_id": 50233312, "question_id": 50232751, "link": "https://stackoverflow.com/questions/50232751/ruby-on-rails-5-1-4-css-files-not-found-it-gives-missing-error-in-browsers-con/50233312#50233312", "title": "Ruby on Rails 5.1.4 CSS files not found it gives missing error. in browser&#39;s console and heroku logs", "body": "<p>Are you using the asset pipeline to include the CSS file? It should take care of things like fingerprinting for you.</p>\n\n<p>Assuming you have your CSS theme file in <code>vendor/assets/stylesheets</code>, Rails would autoload it. You have two options, load it into your application.css file, or load it separately using helpers.</p>\n\n<p>Option 1: Loading the CSS file into <code>app/assets/stylesheets/application.css</code></p>\n\n<pre><code>/*\n *= require_self\n *= require my_theme\n */\n</code></pre>\n\n<p>Option 2: Loading the CSS file via <a href=\"http://guides.rubyonrails.org/asset_pipeline.html#coding-links-to-assets\" rel=\"nofollow noreferrer\">Rails helpers</a>:</p>\n\n<pre><code># application.html.erb\n&lt;%= stylesheet_link_tag \"my_theme\", media: \"all\" %&gt;\n</code></pre>\n\n<p>I also recommend also going over the <a href=\"http://guides.rubyonrails.org/asset_pipeline.html#asset-organization\" rel=\"nofollow noreferrer\">Asset Organization</a> section from the official Rails Asset Pipeline guide, it'll help you understand and follow conventions, so you don't have to deal with cases like this.</p>\n"}], "owner": {"reputation": 23, "user_id": 9758190, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-terFU-mrQrs/AAAAAAAAAAI/AAAAAAAAAEQ/Vke05HTmAyA/photo.jpg?sz=128", "display_name": "Ronak Bhatt", "link": "https://stackoverflow.com/users/9758190/ronak-bhatt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 50233044, "answer_count": 2, "score": 1, "last_activity_date": 1533632688, "creation_date": 1525779731, "last_edit_date": 1533632688, "question_id": 50232751, "link": "https://stackoverflow.com/questions/50232751/ruby-on-rails-5-1-4-css-files-not-found-it-gives-missing-error-in-browsers-con", "title": "Ruby on Rails 5.1.4 CSS files not found it gives missing error. in browser&#39;s console and heroku logs", "body": "<p>I am using a themeforest by asbab. I've added them to my ruby on rails app. It works perfectly fine in localhost. But when uploaded to heroku, the css files are not found. It wont load all the css files.</p>\n\n<p><strong>Ruby : 2.4.0</strong></p>\n\n<p><strong>Rails: 5.1.4</strong></p>\n\n<h2>Heroku logs</h2>\n\n<pre><code>2018-05-07T16:43:00.642798+00:00 heroku[router]: at=info method=GET path=\"/assets/header.css\" host=printorbuy.herokuapp.com request_id=354f10c5-98e6-408a-811a-dac5b5a357f2 fwd=\"157.32.106.197\" dyno=web.1 connect=0ms service=6ms status=404 bytes=1902 protocol=https\n2018-05-07T16:43:00.169047+00:00 app[web.1]: [9a3e2628-2587-4ea2-bc24-fb43f88193f4]   \n2018-05-07T16:43:00.169098+00:00 app[web.1]: [9a3e2628-2587-4ea2-bc24-fb43f88193f4] ActionController::RoutingError (No route matches [GET] \"/assets/simple-line-icons.css\"):\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "rake-task", "rakefile"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525779878, "post_id": 50232688, "comment_id": 87482877, "body": "What is your question?"}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525780773, "post_id": 50232688, "comment_id": 87483457, "body": "@sawa The question is clear from the post."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525780808, "post_id": 50232688, "comment_id": 87483483, "body": "Its ridiculous how people just tend to mark down questions for no reason."}], "answers": [{"comments": [{"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1525780723, "post_id": 50232768, "comment_id": 87483423, "body": "Thank you so much @MarekLipka"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 3, "last_activity_date": 1525779793, "creation_date": 1525779793, "answer_id": 50232768, "question_id": 50232688, "link": "https://stackoverflow.com/questions/50232688/nomethoderror-undefined-method-errors-for-array/50232768#50232768", "title": "NoMethodError: undefined method `errors&#39; for []:Array", "body": "<p>If you don't have any row in your <code>csv_string</code>, this line:</p>\n\n<pre><code>user = CsvImporter::User.create row.to_h\n</code></pre>\n\n<p>isn't executed, so <code>user</code> variable holds previous value, which is <code>[]</code>:</p>\n\n<pre><code>user = []\n</code></pre>\n\n<p>As we know, there's no method <code>errors</code> defined for <code>Array</code>, yet you try to call it in this line:</p>\n\n<pre><code>p \"Email duplicate record: #{user.email_address} - #{user.errors.full_messages.join(',')}\" if user.errors.any?\n</code></pre>\n\n<p>and that's why you get an error.</p>\n"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1230, "favorite_count": 0, "accepted_answer_id": 50232768, "answer_count": 1, "score": 0, "last_activity_date": 1525857609, "creation_date": 1525779528, "last_edit_date": 1525857609, "question_id": 50232688, "link": "https://stackoverflow.com/questions/50232688/nomethoderror-undefined-method-errors-for-array", "title": "NoMethodError: undefined method `errors&#39; for []:Array", "body": "<p>I get NoMethodError when I run <code>test</code> for the code below</p>\n\n<p><strong>csv_importer.rb</strong></p>\n\n<pre><code>require 'csv_importer/engine'\n\nclass WebImport\n  def initialize(url)\n    @url = url\n  end\n\n  def call\n    url = 'http://example.com/people.csv'\n    csv_string = open(url).read.force_encoding('UTF-8')\n\n    string_to_users(csv_string)\n  end\n\n  def string_to_users(csv_string)\n    counter = 0\n    duplicate_counter = 0\n\n    user = []\n    CSV.parse(csv_string, headers: true, header_converters: :symbol) do |row|\n      next unless row[:name].present? &amp;&amp; row[:email_address].present?\n      user = CsvImporter::User.create row.to_h\n      if user.persisted?\n        counter += 1\n      else\n        duplicate_counter += 1\n      end\n    end\n    p \"Email duplicate record: #{user.email_address} - #{user.errors.full_messages.join(',')}\" if user.errors.any?\n\n    p \"Imported #{counter} users, #{duplicate_counter} duplicate rows ain't added in total\"\n  end\nend\n</code></pre>\n\n<p><strong>csv_importer_test.rb</strong></p>\n\n<pre><code>require 'csv_importer/engine'\nrequire 'test_helper'\nrequire 'rake'\n\nclass CsvImporterTest &lt; ActiveSupport::TestCase\n\n  test 'truth' do\n    assert_kind_of Module, CsvImporter\n  end\n\n  test 'should override_application and import data' do\n    a = WebImport.new(url: 'http://example.com/people.csv')\n    a.string_to_users('Olaoluwa Afolabi')# &lt;-- I still get error even I put a comma separated list of attributes that is imported into the db here.\n    assert_equal User.count, 7\n  end\nend\n</code></pre>\n\n<p><strong>csv format in the url in the code:</strong>\nThis saves into DB once I run the Rake Task</p>\n\n<pre><code>Name,Email Address,Telephone Number,Website\nCoy Kunde,stone@stone.com,0800 382630,mills.net\n</code></pre>\n\n<p><strong>What I have done to debug:</strong></p>\n\n<p>I use <code>byebug</code> and I figured out the in <code>csv_importer_test.rb</code>, the line where I have <code>a.string_to_users('Olaoluwa Afolabi')</code> is throwing error. See byebug error below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/wERUK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wERUK.png\" alt=\"byebug error\"></a></p>\n\n<p>So, I when I run <code>rails test</code>, I get the error below:</p>\n\n<p><a href=\"https://i.stack.imgur.com/Z9Qg0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Z9Qg0.png\" alt=\"test error\"></a></p>\n\n<p>So, how do I solve this error, I have no clue what am doing wrong??</p>\n"}, {"tags": ["ruby", "rubygems", "jruby"], "answers": [{"tags": [], "owner": {"reputation": 6788, "user_id": 454312, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/jNMNF.jpg?s=128&g=1", "display_name": "kares", "link": "https://stackoverflow.com/users/454312/kares"}, "is_accepted": true, "score": 1, "last_activity_date": 1525871335, "creation_date": 1525871335, "answer_id": 50254221, "question_id": 50232551, "link": "https://stackoverflow.com/questions/50232551/sharing-gemfile-lock-between-jruby-and-mri/50254221#50254221", "title": "Sharing Gemfile.lock between JRuby and MRI", "body": "<p>that's fine and what you want. re-running <code>bundle</code> under MRI will be OK. so simply commit that into git and maybe re-run bundle under both Rubies when its changed.</p>\n\n<p>support for having gem dependencies relative to platform (as some gems might be native) has landed around Bundler 1.16 so make sure you're not using an older version. </p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9726814"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 86, "favorite_count": 0, "accepted_answer_id": 50254221, "answer_count": 1, "score": 1, "last_activity_date": 1525871335, "creation_date": 1525779014, "last_edit_date": 1525779966, "question_id": 50232551, "link": "https://stackoverflow.com/questions/50232551/sharing-gemfile-lock-between-jruby-and-mri", "title": "Sharing Gemfile.lock between JRuby and MRI", "body": "<p>I'm developing a gem that is compatible with JRuby and MRI without cross-compiling. I discovered that running <code>bundle install</code> on JRuby <a href=\"https://i.stack.imgur.com/NKdSr.png\" rel=\"nofollow noreferrer\">changes <code>Gemfile.lock</code></a>.</p>\n\n<p>And when I run <code>bundle install</code> on MRI, <code>Gemfile.lock</code> doesn't change back. But everything goes as expected. MRI bundler didn't try to install the new dependencies added by JRuby.</p>\n\n<p>How does bundler know that it shouldn't install those even if I didn't mention it?</p>\n\n<p>Is it safe to have a single <code>Gemfile.lock</code> for both JRuby and MRI?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "button", "boolean", "helper"], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 1, "last_activity_date": 1525779246, "creation_date": 1525779246, "answer_id": 50232622, "question_id": 50232532, "link": "https://stackoverflow.com/questions/50232532/using-helper-class-for-boolean-button/50232622#50232622", "title": "Using helper class for boolean button", "body": "<p>Or you can just provide the logic inside <code>button_to</code> helper:</p>\n\n<pre><code>&lt;%= button_to (user.active ? \"Block\" : \"Unblock\"), user_path(id: user.id, active: !user.active), class: 'btn btn-outline-dark',  method:  :patch %&gt;\n</code></pre>\n\n<p>Thus, if you still think it's verbose, you can move <code>(user.active ? \"Block\" : \"Unblock\")</code> logic into a helper of decorator.</p>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "is_accepted": false, "score": 0, "last_activity_date": 1525779354, "creation_date": 1525779354, "answer_id": 50232647, "question_id": 50232532, "link": "https://stackoverflow.com/questions/50232532/using-helper-class-for-boolean-button/50232647#50232647", "title": "Using helper class for boolean button", "body": "<p>In helpers: </p>\n\n<pre><code>def block_button(is_active)\n  button_to is_active ? 'Block' : 'Unblock', user_path(id: user.id, active: !is_active), class: 'btn btn-outline-dark',  method:  :patch\nend\n</code></pre>\n\n<p>In template</p>\n\n<pre><code>&lt;%= block_button(user.active) %&gt;\n</code></pre>\n"}], "owner": {"reputation": 89, "user_id": 9489349, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/311f6f5bab6da02e18d5819a55a77bbd?s=128&d=identicon&r=PG&f=1", "display_name": "Harini", "link": "https://stackoverflow.com/users/9489349/harini"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 50232622, "answer_count": 2, "score": 0, "last_activity_date": 1525779354, "creation_date": 1525778957, "question_id": 50232532, "link": "https://stackoverflow.com/questions/50232532/using-helper-class-for-boolean-button", "title": "Using helper class for boolean button", "body": "<p>My button is as follows</p>\n\n<pre><code>&lt;% if user.active == true  %&gt;\n        &lt;%= button_to \"Block\", user_path(id: user.id, active: false), class: 'btn btn-outline-dark',  method:  :patch %&gt;\n        &lt;%else%&gt;\n        &lt;%= button_to \"Unblock\", user_path(id: user.id, active: true), class: 'btn btn-outline-dark',  method: :patch %&gt;\n        &lt;%end%&gt;\n</code></pre>\n\n<p>I need to have helper class for the above view code instead of repeating the button twice. Can anyone help me with it </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "stripe-payments", "api-key"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 9757992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67cfb270d2a3122360b327b41a67d21?s=128&d=identicon&r=PG&f=1", "display_name": "Malus_khanot", "link": "https://stackoverflow.com/users/9757992/malus-khanot"}, "edited": false, "score": 0, "creation_date": 1525779159, "post_id": 50232391, "comment_id": 87482450, "body": "Yes I putted this code in my config/initializers/stripe.rb file ... and also I tried to restart the server with rails s but unfortunatelly the issue is still here"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": false, "score": 1, "last_activity_date": 1525778500, "creation_date": 1525778500, "answer_id": 50232391, "question_id": 50232223, "link": "https://stackoverflow.com/questions/50232223/ruby-on-rails-stripe-you-did-not-set-a-valid-publishable-key/50232391#50232391", "title": "Ruby on rails - Stripe : &quot;you did not set a valid publishable key&quot;", "body": "<p>From the guide you linked:</p>\n\n<blockquote>\n  <p>The application makes use of your publishable and secret API keys\n  to interact with Stripe. An initializer is a good place to set these\n  values, which will be provided when the application is started.</p>\n  \n  <p>Add the following to config/initializers/stripe.rb:</p>\n\n<pre><code>Rails.configuration.stripe = {\n  :publishable_key =&gt; ENV['PUBLISHABLE_KEY'],\n  :secret_key      =&gt; ENV['SECRET_KEY']\n}\n\nStripe.api_key = Rails.configuration.stripe[:secret_key]\n</code></pre>\n  \n  <p>These keys values are pulled out of environmental variables so as not\n  to hardcode them. It\u2019s best practice not to write API keys into your\n  code, where they could easily wind up in source control repositories\n  and other non-private destinations.</p>\n</blockquote>\n\n<p>Have you added that data into config/initializers/stripe.rb ?</p>\n\n<p>If so, you may need to restart your server as the files in config/initializers are only loaded on server startup</p>\n"}, {"comments": [{"owner": {"reputation": 65, "user_id": 9757992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67cfb270d2a3122360b327b41a67d21?s=128&d=identicon&r=PG&f=1", "display_name": "Malus_khanot", "link": "https://stackoverflow.com/users/9757992/malus-khanot"}, "edited": false, "score": 0, "creation_date": 1525779941, "post_id": 50232620, "comment_id": 87482921, "body": "I am using the gem dotenv-rails, but it&#39;s not working ... my .env files was in a .gitignore file so I putted my .env files in my root to try also but there is no change, I find the same issue"}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "reply_to_user": {"reputation": 65, "user_id": 9757992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67cfb270d2a3122360b327b41a67d21?s=128&d=identicon&r=PG&f=1", "display_name": "Malus_khanot", "link": "https://stackoverflow.com/users/9757992/malus-khanot"}, "edited": false, "score": 0, "creation_date": 1525781371, "post_id": 50232620, "comment_id": 87483851, "body": "@Malus_khanot, I checked this tutorial, all work perfectly with .env file. You must check your credentials - maybe you wrote the different names of keys or copy not full keys"}, {"owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "reply_to_user": {"reputation": 65, "user_id": 9757992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67cfb270d2a3122360b327b41a67d21?s=128&d=identicon&r=PG&f=1", "display_name": "Malus_khanot", "link": "https://stackoverflow.com/users/9757992/malus-khanot"}, "edited": false, "score": 0, "creation_date": 1525781466, "post_id": 50232620, "comment_id": 87483924, "body": "@Malus_khanot, can you provide that .env file?"}, {"owner": {"reputation": 65, "user_id": 9757992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67cfb270d2a3122360b327b41a67d21?s=128&d=identicon&r=PG&f=1", "display_name": "Malus_khanot", "link": "https://stackoverflow.com/users/9757992/malus-khanot"}, "edited": false, "score": 0, "creation_date": 1525873628, "post_id": 50232620, "comment_id": 87527490, "body": "Maybe it&#39;s an issue on my .env file ... here my .env file content with the test keys from the tutorial :                                                                  &gt; PUBLISHABLE_KEY = pk_test_6pRNASCoBOKtIshFeQd4XMUh                                                                            SECRET_KEY = sk_test_BQokikJOvBiI2HlWgH4olfQ2"}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 0, "last_activity_date": 1525779242, "creation_date": 1525779242, "answer_id": 50232620, "question_id": 50232223, "link": "https://stackoverflow.com/questions/50232223/ruby-on-rails-stripe-you-did-not-set-a-valid-publishable-key/50232620#50232620", "title": "Ruby on rails - Stripe : &quot;you did not set a valid publishable key&quot;", "body": "<blockquote>\n  <p>I am using a .env file to get the API keys and I use the test keys from the tutorial.</p>\n</blockquote>\n\n<p>Rails don't autoload environment variables from <code>.env</code> file. So, in the tutorial author set required variables from the console before server start, but you use <code>.env</code> file.\nTo fix that use gem <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow noreferrer\">dotenv-rails</a>: just add in your Gemfile(not need add the same lines as in gem description)</p>\n"}, {"tags": [], "owner": {"reputation": 111, "user_id": 9353090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/876bb416f2f996a4a4e8db62fa55ea98?s=128&d=identicon&r=PG", "display_name": "CanuckT", "link": "https://stackoverflow.com/users/9353090/canuckt"}, "is_accepted": false, "score": 0, "last_activity_date": 1545464411, "creation_date": 1545464411, "answer_id": 53893897, "question_id": 50232223, "link": "https://stackoverflow.com/questions/50232223/ruby-on-rails-stripe-you-did-not-set-a-valid-publishable-key/53893897#53893897", "title": "Ruby on rails - Stripe : &quot;you did not set a valid publishable key&quot;", "body": "<p>I was able to overcome the same type of error in another tutorial by changing the last line of the stripe.rb file to:</p>\n\n<pre><code>Stripe.api_key = Rails.application.credentials.stripe[:secret_key]\n</code></pre>\n\n<p>with the key being saved in the credentials.yml.enc file in rails 5.2</p>\n"}], "owner": {"reputation": 65, "user_id": 9757992, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e67cfb270d2a3122360b327b41a67d21?s=128&d=identicon&r=PG&f=1", "display_name": "Malus_khanot", "link": "https://stackoverflow.com/users/9757992/malus-khanot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1643, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1545464411, "creation_date": 1525777972, "last_edit_date": 1525873252, "question_id": 50232223, "link": "https://stackoverflow.com/questions/50232223/ruby-on-rails-stripe-you-did-not-set-a-valid-publishable-key", "title": "Ruby on rails - Stripe : &quot;you did not set a valid publishable key&quot;", "body": "<p>I have a problem I am following step by step this tutorial to include the gem stripe to my rails application : <a href=\"https://stripe.com/docs/checkout/rails\" rel=\"nofollow noreferrer\">https://stripe.com/docs/checkout/rails</a></p>\n\n<p>But I have an issue when I launch my payment: </p>\n\n<blockquote>\n  <p>you did not set a valid publishable key. Call <code>Stripe.setPublishableKey()</code> with your publishable key.</p>\n</blockquote>\n\n<p>The tutorial I am following doesn't use this method <code>Stripe.setPublishableKey()</code> and it seems working as well ...</p>\n\n<p>I am using a <code>.env</code> file to get the API keys and I use the test keys from the tutorial.</p>\n\n<p>Any idea for the solution ?!</p>\n\n<p>Thank you very much :) If you need more information please tell me</p>\n\n<p>My actual code is a copy/paste from the tutorial I use.</p>\n\n<h2>Edit 1</h2>\n\n<p>I don't understand why but it working when I push the project on Heroku ... but I still don't understand why it's failing on local</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "carrierwave"], "comments": [{"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 2, "creation_date": 1525774791, "post_id": 50231211, "comment_id": 87479726, "body": "Can you show your model?"}], "answers": [{"comments": [{"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1525775303, "post_id": 50231360, "comment_id": 87480032, "body": "file.exists is  a very slow process"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "reply_to_user": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1525775879, "post_id": 50231360, "comment_id": 87480372, "body": "It executes an http request to validate the file exists so takes around half a second depending on your connection. Not a lot you can do about that."}, {"owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "edited": false, "score": 0, "creation_date": 1525775962, "post_id": 50231360, "comment_id": 87480423, "body": "I am checking from s3"}], "tags": [], "owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "is_accepted": true, "score": 1, "last_activity_date": 1525775093, "creation_date": 1525775093, "answer_id": 50231360, "question_id": 50231211, "link": "https://stackoverflow.com/questions/50231211/how-to-check-image-version-exists-od-not-in-carrierwave-rails/50231360#50231360", "title": "How to check image version exists od not in carrierwave rails", "body": "<p>You don't have an image version called 'mobile' defined in your uploader.</p>\n\n<p>If you've called your uploader ImageUploader, then open up app/uploaders/image_uploader.rb</p>\n\n<p>Add the following version to the file:</p>\n\n<pre><code>  version :mobile do\n    process resize_to_fill: [620, 270]\n  end\n</code></pre>\n\n<p>Swap out the x and y sizes for whatever you need. After this all new images will have the 'mobile' attribute available. If you want it to apply to all old images, then you will need to save them and the new version will be available.</p>\n"}], "owner": {"reputation": 5144, "user_id": 5411461, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/RyJfN.jpg?s=128&g=1", "display_name": "Haseeb Ahmad", "link": "https://stackoverflow.com/users/5411461/haseeb-ahmad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 140, "favorite_count": 0, "accepted_answer_id": 50231360, "answer_count": 1, "score": 0, "last_activity_date": 1525775093, "creation_date": 1525774536, "question_id": 50231211, "link": "https://stackoverflow.com/questions/50231211/how-to-check-image-version-exists-od-not-in-carrierwave-rails", "title": "How to check image version exists od not in carrierwave rails", "body": "<p>Some pictures have mobile version or some have not. I want to check either mobile version existing or not</p>\n\n<p>I used</p>\n\n<pre><code>image.mobile.file.exists?\n</code></pre>\n\n<p>But it also giving error</p>\n\n<pre><code>NoMethodError: undefined method `mobile' for\n</code></pre>\n\n<p>How can I check that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu-18.04"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1525773783, "post_id": 50230910, "comment_id": 87479113, "body": "I had massive problems over the weekend with both rvm and rbenv on a fresh linux install - this helped me get some working with rbenv where I had the same error as you: <a href=\"https://github.com/rbenv/ruby-build/issues/834\" rel=\"nofollow noreferrer\">github.com/rbenv/ruby-build/issues/834</a> (it&#39;s something to do with SSL apparently)"}], "answers": [{"comments": [{"owner": {"reputation": 301, "user_id": 6701820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q_9g0OuM9ZQ/AAAAAAAAAAI/AAAAAAAAAEw/ktX4E3hT93s/photo.jpg?sz=128", "display_name": "TheVinspro", "link": "https://stackoverflow.com/users/6701820/thevinspro"}, "edited": false, "score": 0, "creation_date": 1525774678, "post_id": 50231174, "comment_id": 87479657, "body": "thanks @lacoster Before using this patch I just tried    rvm get head   rvm reload   rvm install ruby-2.1.1   rvm install ruby-2.1.10  now it&#39;s working, I don&#39;t how."}, {"owner": {"reputation": 301, "user_id": 6701820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q_9g0OuM9ZQ/AAAAAAAAAAI/AAAAAAAAAEw/ktX4E3hT93s/photo.jpg?sz=128", "display_name": "TheVinspro", "link": "https://stackoverflow.com/users/6701820/thevinspro"}, "edited": false, "score": 0, "creation_date": 1525775017, "post_id": 50231174, "comment_id": 87479861, "body": "rvm reload rvm install ruby-2.1.10  I already tried these before installing ruby-2.1.1 It didn&#39;t work for me that time."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1536213476, "last_edit_date": 1536213476, "creation_date": 1525774411, "answer_id": 50231174, "question_id": 50230910, "link": "https://stackoverflow.com/questions/50230910/error-running-rvm-make-j4-when-installing-ruby-2-1-10-on-ubuntu-18-04/50231174#50231174", "title": "Error running &#39;__rvm_make -j4&#39; when installing ruby 2.1.10 on ubuntu 18.04", "body": "<p>First try this:</p>\n\n<pre><code>rvm reload\nrvm install ruby-2.1.10\n</code></pre>\n\n<p>If you get same errors try installing with this patch, based on @mark 's comment,\nyou can use a patch file, but of course you probably wanna view the patch before running, it seems to correct SSL version problems.</p>\n\n<p>View the patch from <a href=\"https://gist.github.com/mislav/055441129184a1512bb5.txt\" rel=\"nofollow noreferrer\">here</a></p>\n\n<p>Then try install your version with the patch:</p>\n\n<pre><code>rvm install ruby-2.1.10 --patch https://gist.github.com/mislav/055441129184a1512bb5.txt\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 6885912, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64464ea1d18ca58e1a054c00f160e42e?s=128&d=identicon&r=PG", "display_name": "Akash_Sahu", "link": "https://stackoverflow.com/users/6885912/akash-sahu"}, "is_accepted": false, "score": 1, "last_activity_date": 1536212516, "creation_date": 1536212516, "answer_id": 52197199, "question_id": 50230910, "link": "https://stackoverflow.com/questions/50230910/error-running-rvm-make-j4-when-installing-ruby-2-1-10-on-ubuntu-18-04/52197199#52197199", "title": "Error running &#39;__rvm_make -j4&#39; when installing ruby 2.1.10 on ubuntu 18.04", "body": "<p><strong>I had same issue, installing 2.1.10.\nSolution that worked for me.</strong></p>\n\n<pre><code>rvm get master\nrvm reload\nrvm pkg install openssl\nrvm reinstall 2.2.10 --force -C --with-openssl-dir=$HOME/.rvm/usr\n</code></pre>\n"}], "owner": {"reputation": 301, "user_id": 6701820, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-Q_9g0OuM9ZQ/AAAAAAAAAAI/AAAAAAAAAEw/ktX4E3hT93s/photo.jpg?sz=128", "display_name": "TheVinspro", "link": "https://stackoverflow.com/users/6701820/thevinspro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 463, "favorite_count": 1, "accepted_answer_id": 50231174, "answer_count": 2, "score": 0, "last_activity_date": 1536213476, "creation_date": 1525773553, "question_id": 50230910, "link": "https://stackoverflow.com/questions/50230910/error-running-rvm-make-j4-when-installing-ruby-2-1-10-on-ubuntu-18-04", "title": "Error running &#39;__rvm_make -j4&#39; when installing ruby 2.1.10 on ubuntu 18.04", "body": "<p>I was doing set up a rails project which was on ruby-2.1.10 and rails-4.1.4.\nI tried a lot of solutions but nothing has worked for me, It already took my one day. \nplease help me to resolve this If anyone can help or already faced this issue.</p>\n\n<p><strong>solutions which I have tried.</strong> </p>\n\n<p><strong>1)</strong></p>\n\n<pre><code>rvm install 2.1.10\n</code></pre>\n\n<p><strong>2)</strong></p>\n\n<pre><code>rvm get head\n\nrvm install 2.1.10\n</code></pre>\n\n<p><strong>3)</strong></p>\n\n<pre><code>rvm get master\n\nrvm install ruby-2.1.10\n</code></pre>\n\n<p><strong>4)</strong></p>\n\n<pre><code>sudo apt-get install libcurl4-gnutls-dev libxml2 libxml2-dev libxslt1-dev ruby-dev\n\nrvm reinstall 2.1.10 --force\n</code></pre>\n\n<p><strong>5)</strong></p>\n\n<pre><code> rvm get head\n\n rvm reinstall all\n</code></pre>\n\n<p>I also tried to reinstall rvm and ruby using rbenv,\nusing rvm, using source files\n from this <a href=\"https://gorails.com/setup/ubuntu/18.04\" rel=\"nofollow noreferrer\">link</a></p>\n\n<p>each time I was facing this issue</p>\n\n<pre><code>Error running '__rvm_make -j4',\nplease read /home/mds/.rvm/log/1525769841_ruby-2.1.10/make.log\nThere has been an error while running make. Halting the installation.\n</code></pre>\n\n<p>When I opened this file /home/mds/.rvm/log/1525769841_ruby-2.1.10/make.log</p>\n\n<p>This is the log file <a href=\"https://github.com/vin-droid/error-files/blob/master/make.log\" rel=\"nofollow noreferrer\">link</a>.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ruby-debug"], "comments": [{"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1525772538, "post_id": 50230525, "comment_id": 87478318, "body": "Silly question - have you installed the gem or just added it to your gemfile?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 1, "creation_date": 1525772561, "post_id": 50230525, "comment_id": 87478338, "body": "If not then run either &#39;gem install ruby-debug&#39;, or &#39;bundle install&#39; to install all gems in your gemfile"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525772846, "post_id": 50230525, "comment_id": 87478511, "body": "What is your question?"}, {"owner": {"reputation": 478, "user_id": 5630632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/866372430d83cf577899327a6615b29c?s=128&d=identicon&r=PG&f=1", "display_name": "HK15", "link": "https://stackoverflow.com/users/5630632/hk15"}, "reply_to_user": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1525848104, "post_id": 50230525, "comment_id": 87511383, "body": "@Mark the debugger gem is installed.  If I run &quot;gem list -l&quot; I can see it into the list:"}, {"owner": {"reputation": 478, "user_id": 5630632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/866372430d83cf577899327a6615b29c?s=128&d=identicon&r=PG&f=1", "display_name": "HK15", "link": "https://stackoverflow.com/users/5630632/hk15"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525848287, "post_id": 50230525, "comment_id": 87511468, "body": "@sawa My question is: why Ruby ask me for &quot;ruby-debug&quot; gem even If I have installed the &quot;debugger gem&quot; according to the Ruby and Rails versions?"}, {"owner": {"reputation": 5312, "user_id": 6535997, "user_type": "registered", "accept_rate": 62, "profile_image": "https://graph.facebook.com/10156345016155058/picture?type=large", "display_name": "Mark", "link": "https://stackoverflow.com/users/6535997/mark"}, "edited": false, "score": 0, "creation_date": 1525857903, "post_id": 50230525, "comment_id": 87516938, "body": "@yuri what output does gem install ruby-debug give you?"}, {"owner": {"reputation": 478, "user_id": 5630632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/866372430d83cf577899327a6615b29c?s=128&d=identicon&r=PG&f=1", "display_name": "HK15", "link": "https://stackoverflow.com/users/5630632/hk15"}, "edited": false, "score": 0, "creation_date": 1525876608, "post_id": 50230525, "comment_id": 87529702, "body": "SOLVED: Was my fault. I run &quot;build install --with development&quot; and It works in order to use debugger gem. My ignorance, sorry"}], "answers": [{"tags": [], "owner": {"reputation": 478, "user_id": 5630632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/866372430d83cf577899327a6615b29c?s=128&d=identicon&r=PG&f=1", "display_name": "HK15", "link": "https://stackoverflow.com/users/5630632/hk15"}, "is_accepted": false, "score": 0, "last_activity_date": 1525871543, "creation_date": 1525871543, "answer_id": 50254288, "question_id": 50230525, "link": "https://stackoverflow.com/questions/50230525/need-to-install-ruby-debug-to-run-the-server-in-debugging-mode/50254288#50254288", "title": "Need to install ruby-debug to run the server in debugging mode", "body": "<p>@Mark</p>\n\n<pre><code>Fetching: hashie-3.5.7.gem (100%)\nSuccessfully installed hashie-3.5.7\nFetching: powerbar-1.0.18.gem (100%)\nSuccessfully installed powerbar-1.0.18\nFetching: minitar-0.6.1.gem (100%)\nThe `minitar` executable is no longer bundled with `minitar`. If you are\nexpecting this executable, make sure you also install `minitar-cli`.\nSuccessfully installed minitar-0.6.1\nFetching: minitar-cli-0.6.1.gem (100%)\nSuccessfully installed minitar-cli-0.6.1\nFetching: archive-tar-minitar-0.6.1.gem (100%)\n'archive-tar-minitar' has been deprecated; just install 'minitar'.\nSuccessfully installed archive-tar-minitar-0.6.1\nFetching: ruby_core_source-0.1.5.gem (100%)\nSuccessfully installed ruby_core_source-0.1.5\nFetching: linecache19-0.5.12.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed linecache19-0.5.12\nFetching: ruby-debug-base19-0.11.25.gem (100%)\nBuilding native extensions.  This could take a while...\nSuccessfully installed ruby-debug-base19-0.11.25\nFetching: ruby-debug19-0.11.6.gem (100%)\nruby-debug19's executable \"rdebug\" conflicts with debugger\nOverwrite the executable? [yN]  y\n</code></pre>\n\n<p>This is the gem install ruby-debug19 output</p>\n\n<p>I've also added </p>\n\n<pre><code>group :development do\n  gem 'ruby-debug'\nend\n</code></pre>\n\n<p>to my Gemfile then run:</p>\n\n<pre><code>bundle install\n</code></pre>\n\n<p>Unfortunately when I run:</p>\n\n<pre><code>rails s -e development --debugger\n</code></pre>\n\n<p>same error occurs</p>\n\n<pre><code>You need to install ruby-debug to run the server in debugging mode. With gems, use 'gem install ruby-debug'\n</code></pre>\n"}], "owner": {"reputation": 478, "user_id": 5630632, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/866372430d83cf577899327a6615b29c?s=128&d=identicon&r=PG&f=1", "display_name": "HK15", "link": "https://stackoverflow.com/users/5630632/hk15"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 165, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1525871543, "creation_date": 1525772354, "last_edit_date": 1525772812, "question_id": 50230525, "link": "https://stackoverflow.com/questions/50230525/need-to-install-ruby-debug-to-run-the-server-in-debugging-mode", "title": "Need to install ruby-debug to run the server in debugging mode", "body": "<p>I have a Ruby on Rails application with Ruby 1.9.3p327 and Rails 3.2.11. I'm trying to use the Ruby-debugger plug-in for Sublime Text. I installed the \"debugger\" gem. There is no \"ruby-debug19\" gem in my project. Here is a snippet from my Gemfile.</p>\n\n<pre><code>group :development do\n  gem 'debugger'\nend\n</code></pre>\n\n<p>My Gemfile.lock has:</p>\n\n<pre><code>debugger (1.6.1)\n      columnize (&gt;= 0.3.1)\n      debugger-linecache (~&gt; 1.2.0)\n      debugger-ruby_core_source (~&gt; 1.2.3)\n    debugger-linecache (1.2.0)\n    debugger-ruby_core_source (1.2.3)\n</code></pre>\n\n<p>When I try to start Webrick,</p>\n\n<pre><code>rails s -e development --debugger\n</code></pre>\n\n<p>an error is printed:</p>\n\n<pre><code>You need to install ruby-debug to run the server in debugging mode. With gems, use 'gem install ruby-debug'\n</code></pre>\n\n<p>I read that this issue is caused by the \"ruby-debug\" gem, and the solution is to use the \"debugger\" gem instead, but it's exactly what I'm doing.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "unit-testing", "rspec"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525772784, "post_id": 50230092, "comment_id": 87478475, "body": "Are you testing the search method or the initialize method? shouldn&#39;t you have separate tests for each of them?"}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user9569059"}, "edited": false, "score": 0, "creation_date": 1525772246, "post_id": 50230317, "comment_id": 87478123, "body": "Thanks ayush for your comment , yes that&#39;s exactly the error i got, so in &quot;&lt;Your Test Query&gt;&quot; should i write a query like : &quot;User.where( first_name.matches( user1.first_name ).or( last_name.matches( user1.last_name ) ))&quot; ?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525772417, "post_id": 50230317, "comment_id": 87478248, "body": "@noun7 probably not because it should be pure SQL, but consider this could be dangerous if the query can be constructed by a user."}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "edited": false, "score": 0, "creation_date": 1525772592, "post_id": 50230317, "comment_id": 87478355, "body": "you can try UserQueryHelper.new( &quot;sahnoun&quot; ) since you are later creating a test user with this name (sahnoun). Your test will pass."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9569059"}, "edited": false, "score": 0, "creation_date": 1525773213, "post_id": 50230317, "comment_id": 87478716, "body": "I did like you said but it didn&#39;t pass !"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "edited": false, "score": 0, "creation_date": 1525773961, "post_id": 50230317, "comment_id": 87479234, "body": "send me the output  <code>puts query.send( :search )</code>"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "edited": false, "score": 0, "creation_date": 1525775171, "post_id": 50230317, "comment_id": 87479954, "body": "check if User is getting created or not?  puts user1"}, {"owner": {"user_type": "does_not_exist", "display_name": "user9569059"}, "edited": false, "score": 0, "creation_date": 1525775635, "post_id": 50230317, "comment_id": 87480226, "body": "it&#39;s not created : nil :/"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "edited": false, "score": 0, "creation_date": 1525775893, "post_id": 50230317, "comment_id": 87480379, "body": "you will have to check why its not getting created, it should not be nil anyway, put debugger after <code>user1 = create :user, first_name: &quot;sahnoun&quot;, last_name: &quot;mabrouk&quot;</code> and check user1."}, {"owner": {"user_type": "does_not_exist", "display_name": "user9569059"}, "edited": false, "score": 0, "creation_date": 1525777114, "post_id": 50230317, "comment_id": 87481125, "body": "it&#39;s created and the test pass ok , I&#39;ll update my answer ! thx again"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "edited": false, "score": 0, "creation_date": 1525780917, "post_id": 50230317, "comment_id": 87483549, "body": "@noun7  congrats. Also upvote the answer if it was helpful :)"}], "tags": [], "owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "is_accepted": true, "score": 1, "last_activity_date": 1525771642, "creation_date": 1525771642, "answer_id": 50230317, "question_id": 50230092, "link": "https://stackoverflow.com/questions/50230092/rspec-rails-unit-test-database-query/50230317#50230317", "title": "rspec rails : unit test database query", "body": "<p>You must be getting an error <code>stack level too deep</code></p>\n\n<pre><code>let!( :query ) { UserQueryHelper.new( query ) }\n</code></pre>\n\n<p>is executing as </p>\n\n<pre><code>UserQueryHelper.new( UserQueryHelper.new (UserQueryHelper.new (....)))\n</code></pre>\n\n<p>it should be defined as </p>\n\n<pre><code>let!( :query ) { UserQueryHelper.new( \"&lt;Your Test Query&gt;\" ) }\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user9569059"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 835, "favorite_count": 0, "accepted_answer_id": 50230317, "answer_count": 1, "score": 0, "last_activity_date": 1525777132, "creation_date": 1525770925, "last_edit_date": 1525777132, "question_id": 50230092, "link": "https://stackoverflow.com/questions/50230092/rspec-rails-unit-test-database-query", "title": "rspec rails : unit test database query", "body": "<p>I have user model, query helper and a controller : the helper contain a method that return a list  of user when send a search query request from the view: </p>\n\n<pre><code>class UserQueryHelper\n\n  def initialize( query = nil )\n    @query = Arel.sql(\"UNACCENT('%#{ query }%')\")\n  end\n\n  def search\n    User.where( first_name.matches( @query ).or( last_name.matches( @query ) ))\n  end\n\nprotected\n\n  def users   ; User.arel_table   ; end\n\n  def first_name\n    Arel::Nodes::NamedFunction.new( \"UNACCENT\", [ users[ :first_name ] ] )\n  end\n\n  def last_name\n    Arel::Nodes::NamedFunction.new( \"UNACCENT\", [ users[ :last_name ] ] )\n  end\n\nend\n</code></pre>\n\n<p>in the model I call that helper  : </p>\n\n<pre><code>def self.search( query )\n    if query.present?\n      UserQueryHelper.new( query ).search\n    else\n      all\n    end\nend \n</code></pre>\n\n<p>and in the controller I get the list of user searched by the admin : </p>\n\n<pre><code>users_to_export = User.regular.search(params[:search]).includes( :company )\n</code></pre>\n\n<p>I want to write some unit test for this and I didn't got the right way to do it and I tried this code but it doesn't work : </p>\n\n<pre><code>  require 'spec_helper'\n\ndescribe UserQueryHelper do\n\n  let!( :query ) { UserQueryHelper.new( \"sahnoun\" ) }\n  it \"return user\" do\n    user1 = create :user, first_name: \"sahnoun\", last_name: \"mabrouk\", company: $company\n    expect( query.send( :search ) ).to include user1\n\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby", "installation", "rake", "redmine", "rake-task"], "comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525770554, "post_id": 50229407, "comment_id": 87477057, "body": "can you actually post full trace errors?"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 1, "creation_date": 1525771068, "post_id": 50229407, "comment_id": 87477386, "body": "Maybe you wanna try to install from <a href=\"https://github.com/redmine/redmine/releases/tag/0.8.7\" rel=\"nofollow noreferrer\">github.com/redmine/redmine/releases/tag/0.8.7</a>  not sure if that makes any difference"}], "answers": [{"tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 1, "last_activity_date": 1525771757, "last_edit_date": 1525771757, "creation_date": 1525771375, "answer_id": 50230228, "question_id": 50229407, "link": "https://stackoverflow.com/questions/50229407/cant-start-an-old-version-of-redmine-0-8-4/50230228#50230228", "title": "Can&#39;t start an old version of redmine (0.8.4)", "body": "<p>I would suggest following install instructions for your specific version from here: <a href=\"https://github.com/redmine/redmine/blob/0.8.7/doc/INSTALL\" rel=\"nofollow noreferrer\">https://github.com/redmine/redmine/blob/0.8.7/doc/INSTALL</a><br>\nwhich btw says tested with MySQL 5 so not sure if 5.5+ will work .</p>\n\n<p>And get the source code as well from <a href=\"https://github.com/redmine/redmine/releases/tag/0.8.7\" rel=\"nofollow noreferrer\">https://github.com/redmine/redmine/releases/tag/0.8.7</a></p>\n\n<p>But also maybe try prepending your commands:</p>\n\n<pre><code>RAILS_ENV=production bundle exec rake db:migrate\n\nbundle exec rake config/initializers/session_store.rb\n</code></pre>\n\n<p>If you still have problems, please post full stack trace errors</p>\n"}], "owner": {"reputation": 52402, "user_id": 47633, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/b072fc2897196b3bafcd337bc9c91e2d?s=128&d=identicon&r=PG", "display_name": "opensas", "link": "https://stackoverflow.com/users/47633/opensas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 45, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525771757, "creation_date": 1525768796, "question_id": 50229407, "link": "https://stackoverflow.com/questions/50229407/cant-start-an-old-version-of-redmine-0-8-4", "title": "Can&#39;t start an old version of redmine (0.8.4)", "body": "<p>I have to bring back and old version of redmine, and make it work on windows 7. I have a mysql backup but first I want to have a working installation.</p>\n\n<p>I installed ruby and rake</p>\n\n<pre><code>C:\\&gt;ruby --version\nruby 1.8.7 (2011-02-18 patchlevel 334) [i386-mingw32]\nC:\\&gt;gem --version\n1.5.2\nC:\\&gt;rake --version\nrake, version 0.8.7\n</code></pre>\n\n<p>I found <a href=\"https://es.osdn.net/projects/sfnet_redsf/downloads/redmine-0.8.4.tar.gz/\" rel=\"nofollow noreferrer\">here</a> an installable, uncompressed it, and tried to follow <a href=\"http://www.redmine.org/projects/redmine/wiki/RedmineInstall?version=146\" rel=\"nofollow noreferrer\">this guide</a></p>\n\n<p>I created the db (using mysql 5.5.12) and the redmine user.</p>\n\n<p>Configured it on config/database.yml</p>\n\n<p>When I try to exec <code>rake generate_session_store</code> I get:</p>\n\n<pre><code>C:\\devel\\redmine-test&gt;rake generate_session_store\n(in C:/devel/redmine-test)\nrake aborted!\nDon't know how to build task 'generate_session_store'\n\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>And then when I try to create the db I get:</p>\n\n<pre><code>C:\\devel\\redmine-test&gt;set RAILS_ENV=production\n\nC:\\devel\\redmine-test&gt;rake db:migrate\n(in C:/devel/redmine-test)\nrake aborted!\n#08S01Bad handshake\n\n(See full trace by running task with --trace)\n</code></pre>\n\n<p>Running with --trace effectively shows that it cannot connect to the db.</p>\n\n<p>Any idea what could be wrong?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "searchkick"], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 2112204, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/6e131ead37a7d2311b317f1a3c61a167?s=128&d=identicon&r=PG", "display_name": "Ruel Nopal", "link": "https://stackoverflow.com/users/2112204/ruel-nopal"}, "is_accepted": false, "score": 0, "last_activity_date": 1525765168, "creation_date": 1525765168, "answer_id": 50228385, "question_id": 50227996, "link": "https://stackoverflow.com/questions/50227996/how-to-change-keyword-to-numeric-in-elasticsearch/50228385#50228385", "title": "How To Change Keyword to Numeric in Elasticsearch?", "body": "<p>I found my Answer. What I did is change the column datatype from <strong>string</strong> to <strong>float.</strong></p>\n"}], "owner": {"reputation": 355, "user_id": 2112204, "user_type": "registered", "accept_rate": 10, "profile_image": "https://www.gravatar.com/avatar/6e131ead37a7d2311b317f1a3c61a167?s=128&d=identicon&r=PG", "display_name": "Ruel Nopal", "link": "https://stackoverflow.com/users/2112204/ruel-nopal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 413, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525765168, "creation_date": 1525763811, "question_id": 50227996, "link": "https://stackoverflow.com/questions/50227996/how-to-change-keyword-to-numeric-in-elasticsearch", "title": "How To Change Keyword to Numeric in Elasticsearch?", "body": "<p>Hello I have an error about Rails Elasticsearch with <code>searchkick gem</code> </p>\n\n<p>the error</p>\n\n<pre><code>Searchkick::InvalidQueryError ([400] {\"error\":{\"root_cause\":[{\"type\":\"illegal_argument_exception\",\"reason\":\"Expected numeric type on field [item_final_price], but got [keyword]\"}],\"type\":\"search_phase_execution_exception\",\"reason\":\"all shards failed\",\"phase\":\"query\",\"grouped\":true,\"failed_shards\":[{\"shard\":0,\"index\":\"items_development_20180507023923980\",\"node\":\"w7LqCILTTK-gndnoQB1cOQ\",\"reason\":{\"type\":\"illegal_argument_exception\",\"reason\":\"Expected numeric type on field [item_final_price], but got [keyword]\"}}]},\"status\":400}):\n</code></pre>\n\n<p>Basically telling me the error is <strong>expecting numeric type but the type is keywords</strong></p>\n\n<p>heres my search params</p>\n\n<p>in  controller.rb</p>\n\n<pre><code>def results\n    price_ranges = [{to: params[:max_price]}, {from: params[:min_price], to: params[:max_price]}, {from: params[:min_price]}]\n    @results = Item.search(params[:q], aggs: {item_final_price: {ranges: price_ranges}}, page: params[:page], per_page: 10) if params[:q].present?\nend\n</code></pre>\n\n<p>my views </p>\n\n<pre><code>&lt;%= form_tag results_path, method: :get, enforce_utf8: false, id: \"q_filter\" do %&gt;\n&lt;section class=\"widget widget-categories\"&gt;\n    &lt;%= hidden_field_tag :q, params[:q] %&gt;\n    &lt;h3 class=\"widget-title\"&gt;Price Range&lt;/h3&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;Price Between&lt;/label&gt;\n        &lt;%= number_field_tag :min_price, params[:min_price].to_f, class: \"form-control form-control-sm\", placeholder: \"Min Price\" %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"form-group\"&gt;\n        &lt;label&gt;And&lt;/label&gt;\n        &lt;%= number_field_tag :max_price, params[:max_price].to_f, class: \"form-control form-control-sm\", placeholder: \"Max Price\" %&gt;\n    &lt;/div&gt;\n    &lt;%= button_tag(type: \"submit\", name: nil, class: \"btn btn-outline-primary btn-sm btn-block\") do %&gt;\n        Filter Search\n    &lt;% end %&gt;\n&lt;/section&gt;\n</code></pre>\n\n\n\n<p>and my model</p>\n\n<pre><code>include Elasticsearch::Model\ninclude Elasticsearch::Model::Callbacks\nItem.import\n\nsearchkick callbacks: :async\n\ndef search_data\n    {\n        item_name: item_name,\n        item_details: item_details,\n        item_final_price: item_final_price\n    }\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "edited": false, "score": 0, "creation_date": 1525760943, "post_id": 50226954, "comment_id": 87471615, "body": "Please check my answer, let me know if it is working or not"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1525761590, "post_id": 50226954, "comment_id": 87471940, "body": "You can use <code>link_to_add</code> feature from <a href=\"https://github.com/ryanb/nested_form#usage\" rel=\"nofollow noreferrer\">github.com/ryanb/nested_form#usage</a>"}], "answers": [{"tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 3, "last_activity_date": 1525760411, "creation_date": 1525760411, "answer_id": 50227109, "question_id": 50226954, "link": "https://stackoverflow.com/questions/50226954/rails-5-1-4-fields-for-for-multiple-objects/50227109#50227109", "title": "Rails 5.1.4 fields_for for multiple objects", "body": "<p>If you fine with adding a new dependency, there's <a href=\"https://github.com/nathanvda/cocoon\" rel=\"nofollow noreferrer\">cacoon</a> gem, which allows you easier handle nested forms.</p>\n\n<p>It's an additional dependency, but the code for adding a new associated record is simple as:</p>\n\n<pre><code>&lt;%= form_for author do |f| %&gt;\n  ...\n  &lt;%= f.fields_for :books do |book| %&gt;\n    &lt;%= render 'book_fields', f: book %&gt;\n    &lt;%= link_to_add_association 'add book', f, :books %&gt;\n  &lt;%end%&gt;\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1525772516, "post_id": 50227180, "comment_id": 87478306, "body": "This looks really incomplete. Afaik <code>link_to_add_fields</code> method does not exist in rails. How does the the <code>link_to_add_fields</code> know what to render? Which gem do you use to provide this functionality?"}], "tags": [], "owner": {"reputation": 6207, "user_id": 5117953, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/Ca0RW.jpg?s=128&g=1", "display_name": "Vishal", "link": "https://stackoverflow.com/users/5117953/vishal"}, "is_accepted": false, "score": 1, "last_activity_date": 1525760672, "creation_date": 1525760672, "answer_id": 50227180, "question_id": 50226954, "link": "https://stackoverflow.com/questions/50226954/rails-5-1-4-fields-for-for-multiple-objects/50227180#50227180", "title": "Rails 5.1.4 fields_for for multiple objects", "body": "<p>author.rb</p>\n\n<pre><code>accepts_nested_attributes_for :books,\n    :allow_destroy =&gt; true,\n    :reject_if     =&gt; :all_blank\n</code></pre>\n\n<p>In your view file</p>\n\n<pre><code>&lt;div class=\"bank_account_details\"&gt;\n  &lt;%= f.fields_for :bank_account_details do |builder| %&gt;\n    &lt;p&gt;\n    Book: &lt;%= builder.text_field :name %&gt;\n          &lt;%= builder.check_box :_destroy %&gt;\n          &lt;%= builder.label :_destroy, \"Remove Book\" %&gt;\n    &lt;/p&gt;\n  &lt;% end %&gt;\n&lt;div&gt;\n&lt;%= link_to_add_fields \"Add Book\", f ,:books %&gt;\n</code></pre>\n\n<p>In your controller add parameters</p>\n\n<pre><code>params.require(:author).permit(:name, books_attributes: [:id, :name, :_destroy])\n</code></pre>\n"}], "owner": {"reputation": 79, "user_id": 6458393, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/614ee633c42e5631e90a900f3af55af1?s=128&d=identicon&r=PG&f=1", "display_name": "alex_the_emperor", "link": "https://stackoverflow.com/users/6458393/alex-the-emperor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 50227109, "answer_count": 2, "score": 1, "last_activity_date": 1525760672, "creation_date": 1525759777, "question_id": 50226954, "link": "https://stackoverflow.com/questions/50226954/rails-5-1-4-fields-for-for-multiple-objects", "title": "Rails 5.1.4 fields_for for multiple objects", "body": "<p>I have an <code>Author</code> and <code>Book</code> model. An Author can have many <code>Book</code>, but a Book can only have one <code>Author</code>.</p>\n\n<p>During the creation of a new <code>Author</code>, how do I add a \"New Book\" button which will add a fields_for for the <code>Author</code> form? I want to be able to add more than one <code>Book</code>. So far, the <a href=\"https://www.theodinproject.com/courses/ruby-on-rails/lessons/advanced-forms\" rel=\"nofollow noreferrer\">solution</a> that I have found is just to add a fixed number of fields_for, like this:</p>\n\n<pre><code>&lt;%= form_with(model: author, local: true) do |form| %&gt;\n...\n    &lt;% 5.times do %&gt;\n        &lt;%= form.fields_for :books do |books| %&gt;\n        ...\n        &lt;% end %&gt;\n    &lt;% end %&gt;\n...\n&lt;% end %&gt;\n</code></pre>\n\n<p>I do not want it to be like this, what if the author has more than 5 books? I want to be able to add books dynamically. Any solutions?</p>\n"}, {"tags": ["ruby", "yaml"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525749098, "post_id": 50225183, "comment_id": 87467819, "body": "I don&#39;t think that is what the OP is expecting. The OP seems to want to do it by themselves."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1525749545, "post_id": 50225183, "comment_id": 87467932, "body": "The question asked how to get key values.  &quot;do it by themselves&quot;  means exactly what?"}, {"owner": {"reputation": 23, "user_id": 9755962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "James", "link": "https://stackoverflow.com/users/9755962/james"}, "edited": false, "score": 1, "creation_date": 1525752556, "post_id": 50225183, "comment_id": 87468656, "body": "Thanks for your input, this could be helpful in the future."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1525748712, "creation_date": 1525748712, "answer_id": 50225183, "question_id": 50225116, "link": "https://stackoverflow.com/questions/50225116/parse-yaml-to-key-value-and-include-yaml-categories/50225183#50225183", "title": "Parse YAML to key value and include yaml categories", "body": "<p>You can easily convert YAML to a hash:</p>\n\n<pre><code>#test.yml\ntest:\n   line1: \"line 1 text\"\n   line2: \"line 2 text\"\n   line3: \"line 3 text\"\noptions:\n    item1: \"item 1 text\"\n    item2: \"item 2 text\"\n    item3: \"item 3 text\"\n\n\n#ruby\nhash = YAML.load File.read('test.yml')\n</code></pre>\n\n<p>Now you can do anything you want with the hash, get the keys, values etc.</p>\n\n<pre><code>hash['options']['item1'] #=&gt; \"item 1 text\"\nhash['test']['line1'] #=&gt; \"line 1 text\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 23, "user_id": 9755962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "James", "link": "https://stackoverflow.com/users/9755962/james"}, "edited": false, "score": 0, "creation_date": 1525749837, "post_id": 50225252, "comment_id": 87467993, "body": "This looks like the correct way of doing what I was trying to do, thanks."}, {"owner": {"reputation": 23, "user_id": 9755962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "James", "link": "https://stackoverflow.com/users/9755962/james"}, "edited": false, "score": 0, "creation_date": 1525751178, "post_id": 50225252, "comment_id": 87468322, "body": "What if there are multiple levels in the yaml?  Do I have to add another map?"}, {"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "reply_to_user": {"reputation": 23, "user_id": 9755962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "James", "link": "https://stackoverflow.com/users/9755962/james"}, "edited": false, "score": 0, "creation_date": 1525751392, "post_id": 50225252, "comment_id": 87468365, "body": "How&#39;s it, can you exemplify?"}, {"owner": {"reputation": 23, "user_id": 9755962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "James", "link": "https://stackoverflow.com/users/9755962/james"}, "edited": false, "score": 0, "creation_date": 1525751510, "post_id": 50225252, "comment_id": 87468389, "body": "I figured it out actually, I parse out the value by doing a value.map do |newkey, newvalue|  -  This way If I have a third nested yaml, it can break that down. Thanks again, helps a bunch. This mapping is new to me, I will have to do some research."}], "tags": [], "owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "is_accepted": true, "score": 0, "last_activity_date": 1525749226, "creation_date": 1525749226, "answer_id": 50225252, "question_id": 50225116, "link": "https://stackoverflow.com/questions/50225116/parse-yaml-to-key-value-and-include-yaml-categories/50225252#50225252", "title": "Parse YAML to key value and include yaml categories", "body": "<p>You could use the YAML#load_file, read each line and adapt it to your need:</p>\n\n<pre><code>foo = YAML.load_file('file.yaml').map do |key, value|\n  value.map { |k, v| \"#{key}/#{k}=#{v}\" }\nend\nfoo.each { |value| puts value }\n\n# test/line1=line 1 text\n# test/line2=line 2 text\n# test/line3=line 3 text\n# options/item1=item 1 text\n# options/item2=item 2 text\n# options/item3=item 3 text\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 9755962, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "James", "link": "https://stackoverflow.com/users/9755962/james"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "accepted_answer_id": 50225252, "answer_count": 2, "score": 2, "last_activity_date": 1525749226, "creation_date": 1525748159, "question_id": 50225116, "link": "https://stackoverflow.com/questions/50225116/parse-yaml-to-key-value-and-include-yaml-categories", "title": "Parse YAML to key value and include yaml categories", "body": "<p>Was looking to parse a YAML file into plain key=value strings. </p>\n\n<p>I have some initial structure, but I wanted to get some of the keys from a yaml as well. </p>\n\n<pre><code>test:\n   line1: \"line 1 text\"\n   line2: \"line 2 text\"\n   line3: \"line 3 text\"\noptions:\n    item1: \"item 1 text\"\n    item2: \"item 2 text\"\n    item3: \"item 3 text\"\n</code></pre>\n\n<p>Ruby:</p>\n\n<pre><code>File.open(\"test.yml\") do |f|  \n  f.each_line do |line|\n    line.chomp\n\n    if line =~ /:/\n        line.chop\n        line.sub!('\"', \"\")\n        line.sub!(\": \", \"=\")\n        line.gsub!(/\\A\"|\"\\Z/, '')\n        printline = line.strip\n        puts \"#{printline}\"\n        target.write( \"#{printline}\")\n    end\n  end\nend\n</code></pre>\n\n<p>The results currently look like </p>\n\n<pre><code>test:\nline1=line 1 text\nline2=line 2 text\nline3=line 4 text\noptions:\nitem1=item 1 text\nitem2=item 2 text\nitem3=item 3 text\n</code></pre>\n\n<p>But I am looking to add the category before like:</p>\n\n<pre><code>test/line1=line 1 text\ntest/line2=line 2 text\ntest/line3=line 3 text\noptions/item1=item 1 text\noptions/item2=item 2 text\noptions/item3=item 3 text\n</code></pre>\n\n<p>What is the best way to include the category for each line?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "devise", "apartment-gem"], "answers": [{"comments": [{"owner": {"reputation": 392, "user_id": 7682011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-EI7ZjLsSzu4/AAAAAAAAAAI/AAAAAAAAAAk/HnYNxa18k60/photo.jpg?sz=128", "display_name": "Jeremy Bray", "link": "https://stackoverflow.com/users/7682011/jeremy-bray"}, "edited": false, "score": 0, "creation_date": 1525776202, "post_id": 50228837, "comment_id": 87480566, "body": "You are awesome, it&#39;s apartment and uuid. Will post an update shortly"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "reply_to_user": {"reputation": 392, "user_id": 7682011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-EI7ZjLsSzu4/AAAAAAAAAAI/AAAAAAAAAAk/HnYNxa18k60/photo.jpg?sz=128", "display_name": "Jeremy Bray", "link": "https://stackoverflow.com/users/7682011/jeremy-bray"}, "edited": false, "score": 0, "creation_date": 1525780948, "post_id": 50228837, "comment_id": 87483570, "body": "happy to help :)"}, {"owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "reply_to_user": {"reputation": 392, "user_id": 7682011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-EI7ZjLsSzu4/AAAAAAAAAAI/AAAAAAAAAAk/HnYNxa18k60/photo.jpg?sz=128", "display_name": "Jeremy Bray", "link": "https://stackoverflow.com/users/7682011/jeremy-bray"}, "edited": false, "score": 0, "creation_date": 1525946583, "post_id": 50228837, "comment_id": 87557908, "body": "@JeremyBray can you try once with uuid_generate_v4(), i mean replace gen_random_uuid() with uuid_generate_v4()"}, {"owner": {"reputation": 392, "user_id": 7682011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-EI7ZjLsSzu4/AAAAAAAAAAI/AAAAAAAAAAk/HnYNxa18k60/photo.jpg?sz=128", "display_name": "Jeremy Bray", "link": "https://stackoverflow.com/users/7682011/jeremy-bray"}, "edited": false, "score": 0, "creation_date": 1526008135, "post_id": 50228837, "comment_id": 87585060, "body": "@AyushIodhi How would i change that? this is created by enable_extension &#39;uuid-ossp&#39;, enable_extension &#39;pgcrypto&#39; not a choice I made"}, {"owner": {"reputation": 2451, "user_id": 597082, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f4b3671d7e1ba608d1d9065fd3a964ff?s=128&d=identicon&r=PG", "display_name": "Dorian", "link": "https://stackoverflow.com/users/597082/dorian"}, "reply_to_user": {"reputation": 392, "user_id": 7682011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-EI7ZjLsSzu4/AAAAAAAAAAI/AAAAAAAAAAk/HnYNxa18k60/photo.jpg?sz=128", "display_name": "Jeremy Bray", "link": "https://stackoverflow.com/users/7682011/jeremy-bray"}, "edited": false, "score": 0, "creation_date": 1579419247, "post_id": 50228837, "comment_id": 105755651, "body": "@JeremyBray did you manage to make it work ? I&#39;m stuch by the same issue <code>PG::UndefinedFunction: ERROR: function gen_random_uuid() does not exist </code>"}, {"owner": {"reputation": 392, "user_id": 7682011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-EI7ZjLsSzu4/AAAAAAAAAAI/AAAAAAAAAAk/HnYNxa18k60/photo.jpg?sz=128", "display_name": "Jeremy Bray", "link": "https://stackoverflow.com/users/7682011/jeremy-bray"}, "reply_to_user": {"reputation": 2451, "user_id": 597082, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f4b3671d7e1ba608d1d9065fd3a964ff?s=128&d=identicon&r=PG", "display_name": "Dorian", "link": "https://stackoverflow.com/users/597082/dorian"}, "edited": false, "score": 0, "creation_date": 1579419717, "post_id": 50228837, "comment_id": 105755734, "body": "@Dorian, I don&#39;t think I did to be honest. But I think if you share your code with me in a question I can probably talk you through it. If you are not to invested in your apartment I could suggest a couple of other gems."}, {"owner": {"reputation": 2451, "user_id": 597082, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/f4b3671d7e1ba608d1d9065fd3a964ff?s=128&d=identicon&r=PG", "display_name": "Dorian", "link": "https://stackoverflow.com/users/597082/dorian"}, "edited": false, "score": 0, "creation_date": 1579420818, "post_id": 50228837, "comment_id": 105755922, "body": "Actually I&#39;ve just managed to make it work :) (but I&#39;m interested to other gem suggestions !) Thank you!"}], "tags": [], "owner": {"reputation": 304, "user_id": 4539041, "user_type": "registered", "accept_rate": 80, "profile_image": "https://lh5.googleusercontent.com/-AJsf1Uayt0I/AAAAAAAAAAI/AAAAAAAAABI/6pfKSQdBNaU/photo.jpg?sz=128", "display_name": "ayush lodhi", "link": "https://stackoverflow.com/users/4539041/ayush-lodhi"}, "is_accepted": false, "score": 3, "last_activity_date": 1525766645, "creation_date": 1525766645, "answer_id": 50228837, "question_id": 50224380, "link": "https://stackoverflow.com/questions/50224380/apartment-and-devise-not-creating-tenant/50228837#50228837", "title": "Apartment and Devise not creating tenant", "body": "<p>The problem is that <code>Apartment::Tenant.create('tenant_name')</code> is raising some error at database level, thus it effecting the future transactions.</p>\n\n<p><code>PG::InFailedSqlTransaction: ERROR: current transaction is aborted, commands ignored until end of transaction block : SET search_path TO \"public\"</code>, this is the not the actual error. Postgres raise this exception after the Apartment raised some error.</p>\n\n<p>To find out what is the error change <code>after_create :create_tenant</code> with <code>after_commit :create_tenant</code></p>\n"}], "owner": {"reputation": 392, "user_id": 7682011, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh3.googleusercontent.com/-EI7ZjLsSzu4/AAAAAAAAAAI/AAAAAAAAAAk/HnYNxa18k60/photo.jpg?sz=128", "display_name": "Jeremy Bray", "link": "https://stackoverflow.com/users/7682011/jeremy-bray"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 896, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1525817103, "creation_date": 1525741368, "last_edit_date": 1525817103, "question_id": 50224380, "link": "https://stackoverflow.com/questions/50224380/apartment-and-devise-not-creating-tenant", "title": "Apartment and Devise not creating tenant", "body": "<p>Hi I am working with apartment for the first time following along with <a href=\"https://gorails.com/episodes/multitenancy-with-apartment?autoplay=1\" rel=\"nofollow noreferrer\">https://gorails.com/episodes/multitenancy-with-apartment?autoplay=1</a> but I am using devise for authentication.</p>\n\n<p>When I go to create a new user and tenant I get the following error</p>\n\n<pre><code>    ActiveRecord::StatementInvalid in Devise::RegistrationsController#create\n\nPG::InFailedSqlTransaction: ERROR: current transaction is aborted, commands ignored until end of transaction block : SET search_path TO \"public\"\n\n  def create_tenant\n    Apartment::Tenant.create('tenant_name')\n  end\nend\n</code></pre>\n\n<p>I have a devise User model where I am creating a tenant on the user.account</p>\n\n<p>models/user.rb</p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  after_create :create_tenant\n\n  private\n\n  def create_tenant\n    Apartment::Tenant.create('tenant_name')\n  end\nend\n</code></pre>\n\n<p>devise/registrations/new</p>\n\n<pre><code>&lt;h2&gt;Sign up&lt;/h2&gt;\n\n&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :firstName %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :firstName %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :lastName %&gt;&lt;br/&gt;\n    &lt;%= f.text_field :lastName %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :account %&gt;&lt;br/&gt;\n    &lt;%= f.text_field :account%&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br/&gt;\n    &lt;%= f.email_field :email, autofocus: true, autocomplete: \"email\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password %&gt;\n    &lt;% if @minimum_password_length %&gt;\n    &lt;em&gt;(&lt;%= @minimum_password_length %&gt; characters minimum)&lt;/em&gt;\n    &lt;% end %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password_confirmation, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Sign up\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;%= render \"devise/shared/links\" %&gt;\n</code></pre>\n\n<p>controllers/application_controller.rb</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  protect_from_forgery with: :exception\n  before_action :configure_permitted_parameters, if: :devise_controller?\n\n  protected\n\n  def configure_permitted_parameters\n    devise_parameter_sanitizer.permit(:sign_up, keys: [:firstName, :lastName, :account])\n    devise_parameter_sanitizer.permit(:sign_in, keys: [:firstName, :lastName, :account])\n  end\nend\n</code></pre>\n\n<p>config/application.rb</p>\n\n<pre><code>require_relative 'boot'\n\nrequire 'rails/all'\nrequire  'csv'\nrequire 'apartment/elevators/subdomain'\n\nBundler.require(*Rails.groups)\n\nmodule AssetCatcher\n  class Application &lt; Rails::Application\n    config.load_defaults 5.1\n    config.generators do |g|\n      g.orm :active_record, primary_key_type: :uuid\n    end\n    config.middleware.use Apartment::Elevators::Subdomain\n  end\nend\n</code></pre>\n\n<p>config/initializers/apartment.rb</p>\n\n<pre><code># You can have Apartment route to the appropriate Tenant by adding some Rack middleware.\n# Apartment can support many different \"Elevators\" that can take care of this routing to your data.\n# Require whichever Elevator you're using below or none if you have a custom one.\n#\n# require 'apartment/elevators/generic'\n# require 'apartment/elevators/domain'\nrequire 'apartment/elevators/subdomain'\n# require 'apartment/elevators/first_subdomain'\n# require 'apartment/elevators/host'\n\n#\n# Apartment Configuration\n#\nApartment.configure do |config|\n\n  # Add any models that you do not want to be multi-tenanted, but remain in the global (public) namespace.\n  # A typical example would be a Customer or Tenant model that stores each Tenant's information.\n  #\n  # config.excluded_models = %w{ Tenant }\n\n  # In order to migrate all of your Tenants you need to provide a list of Tenant names to Apartment.\n  # You can make this dynamic by providing a Proc object to be called on migrations.\n  # This object should yield either:\n  # - an array of strings representing each Tenant name.\n  # - a hash which keys are tenant names, and values custom db config (must contain all key/values required in database.yml)\n  # config.tenant_names = lambda { User.pluck :account }\n  # config.tenant_names = lambda{ Customer.pluck(:tenant_name) }\n  # config.tenant_names = ['tenant1', 'tenant2']\n  # config.tenant_names = {\n  #   'tenant1' =&gt; {\n  #     adapter: 'postgresql',\n  #     host: 'some_server',\n  #     port: 5555,\n  #     database: 'postgres' # this is not the name of the tenant's db\n  #                          # but the name of the database to connect to before creating the tenant's db\n  #                          # mandatory in postgresql\n  #   },\n  #   'tenant2' =&gt; {\n  #     adapter:  'postgresql',\n  #     database: 'postgres' # this is not the name of the tenant's db\n  #                          # but the name of the database to connect to before creating the tenant's db\n  #                          # mandatory in postgresql\n  #   }\n  # }\n  # config.tenant_names = lambda do\n  #   Tenant.all.each_with_object({}) do |tenant, hash|\n  #     hash[tenant.name] = tenant.db_configuration\n  #   end\n  # end\n  #\n  config.tenant_names = lambda { User.pluck :account }\n  # PostgreSQL:\n  #   Specifies whether to use PostgreSQL schemas or create a new database per Tenant.\n  #\n  # MySQL:\n  #   Specifies whether to switch databases by using `use` statement or re-establish connection.\n  #\n  # The default behaviour is true.\n  #\n  # config.use_schemas = true\n\n  #\n  # ==&gt; PostgreSQL only options\n\n  # Apartment can be forced to use raw SQL dumps instead of schema.rb for creating new schemas.\n  # Use this when you are using some extra features in PostgreSQL that can't be represented in\n  # schema.rb, like materialized views etc. (only applies with use_schemas set to true).\n  # (Note: this option doesn't use db/structure.sql, it creates SQL dump by executing pg_dump)\n  #\n  # config.use_sql = false\n\n  # There are cases where you might want some schemas to always be in your search_path\n  # e.g when using a PostgreSQL extension like hstore.\n  # Any schemas added here will be available along with your selected Tenant.\n  #\n  # config.persistent_schemas = %w{ hstore }\n\n  # &lt;== PostgreSQL only options\n  #\n\n  # By default, and only when not using PostgreSQL schemas, Apartment will prepend the environment\n  # to the tenant name to ensure there is no conflict between your environments.\n  # This is mainly for the benefit of your development and test environments.\n  # Uncomment the line below if you want to disable this behaviour in production.\n  #\n  # config.prepend_environment = !Rails.env.production?\nend\n\n# Setup a custom Tenant switching middleware. The Proc should return the name of the Tenant that\n# you want to switch to.\n# Rails.application.config.middleware.use Apartment::Elevators::Generic, lambda { |request|\n#   request.host.split('.').first\n# }\n\n# Rails.application.config.middleware.use Apartment::Elevators::Domain\nRails.application.config.middleware.use Apartment::Elevators::Subdomain\n# Rails.application.config.middleware.use Apartment::Elevators::FirstSubdomain\n# Rails.application.config.middleware.use Apartment::Elevators::Host\n\nApartment::Elevators::Subdomain.excluded_subdomains = ['www']\n</code></pre>\n\n<p>I am sure I have missed something simple, abd appreciate your time</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>So I updated the models/user.rb </p>\n\n<pre><code>class User &lt; ApplicationRecord\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  after_commit :create_tenant\n\n  private\n\n  def create_tenant\n    Apartment::Tenant.create(account)\n  end\nend\n</code></pre>\n\n<p>You will notice two changes after_create became after_commit as per the advice given by. I then found the <a href=\"https://github.com/influitive/apartment/issues/342\" rel=\"nofollow noreferrer\">https://github.com/influitive/apartment/issues/342</a> on the apartment gem. It is labelled as closed, I added the following.</p>\n\n<h1>config/initializers/apartment.rb</h1>\n\n<pre><code>Apartment.configure do |config|\n  config.persistent_schemas = %w{uuid}\nend\n</code></pre>\n\n<p>Once apartment was able to commit I found the error is created by UUID. My subdomain is created but I hit the below error:</p>\n\n<pre><code>ActiveRecord::StatementInvalid in Devise::RegistrationsController#create\nPG::UndefinedFunction: ERROR: function gen_random_uuid() does not exist HINT: No function matches the given name and argument types. You might need to add explicit type casts. : CREATE TABLE \"asset_types\" (\"id\" uuid DEFAULT gen_random_uuid() NOT NULL PRIMARY KEY, \"name\" character varying, \"monthly\" decimal, \"quarterly\" decimal, \"halfyearly\" decimal, \"annual\" decimal, \"created_at\" timestamp NOT NULL, \"updated_at\" timestamp NOT NULL)\n</code></pre>\n\n<p>My Schema is as follows:</p>\n\n<pre><code>ActiveRecord::Schema.define(version: 20180507085312) do\n\n  # These are extensions that must be enabled in order to support this database\n  enable_extension \"plpgsql\"\n  enable_extension \"uuid-ossp\"\n  enable_extension \"pgcrypto\"\n\n  create_table \"asset_types\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.string \"name\"\n    t.decimal \"monthly\"\n    t.decimal \"quarterly\"\n    t.decimal \"halfyearly\"\n    t.decimal \"annual\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"asset_types_maintenance_specifications\", id: false, force: :cascade do |t|\n    t.uuid \"asset_type_id\", null: false\n    t.uuid \"maintenance_specification_id\", null: false\n    t.uuid \"[:asset_type_id, :maintenance_specification_id]\"\n  end\n\n  create_table \"frequencies\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.uuid \"maintenance_specification_id\"\n    t.uuid \"asset_type_id\"\n    t.boolean \"monthly\"\n    t.boolean \"quarterly\"\n    t.boolean \"halfyearly\"\n    t.boolean \"annual\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"asset_type_id\"], name: \"index_frequencies_on_asset_type_id\"\n    t.index [\"maintenance_specification_id\"], name: \"index_frequencies_on_maintenance_specification_id\"\n  end\n\n  create_table \"locations\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.string \"name\"\n    t.uuid \"site_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"site_id\"], name: \"index_locations_on_site_id\"\n  end\n\n  create_table \"maintenance_quotes\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.string \"section\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.uuid \"site_id\"\n    t.uuid \"maintenance_specification_id\"\n    t.index [\"maintenance_specification_id\"], name: \"index_maintenance_quotes_on_maintenance_specification_id\"\n    t.index [\"site_id\"], name: \"index_maintenance_quotes_on_site_id\"\n  end\n\n  create_table \"maintenance_quotes_sections\", id: false, force: :cascade do |t|\n    t.uuid \"maintenance_quote_id\", null: false\n    t.uuid \"section_id\", null: false\n    t.index [\"maintenance_quote_id\", \"section_id\"], name: \"maintenance_quote_sections\"\n  end\n\n  create_table \"maintenance_specifications\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.string \"name\"\n    t.uuid \"asset_type_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.index [\"asset_type_id\"], name: \"index_maintenance_specifications_on_asset_type_id\"\n  end\n\n  create_table \"manufacturers\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.string \"name\"\n    t.integer \"qualityScore\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"sections\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.string \"title\"\n    t.text \"body\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"site_assets\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.string \"name\"\n    t.string \"model\"\n    t.string \"serial\"\n    t.date \"installed\"\n    t.uuid \"site_id\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.integer \"condition\"\n    t.uuid \"asset_type_id\"\n    t.uuid \"location_id\"\n    t.uuid \"manufacturer_id\"\n    t.string \"refrigerant\"\n    t.string \"description\"\n    t.index [\"asset_type_id\"], name: \"index_site_assets_on_asset_type_id\"\n    t.index [\"location_id\"], name: \"index_site_assets_on_location_id\"\n    t.index [\"manufacturer_id\"], name: \"index_site_assets_on_manufacturer_id\"\n    t.index [\"site_id\"], name: \"index_site_assets_on_site_id\"\n  end\n\n  create_table \"sites\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.string \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"streetAddress\"\n    t.string \"suburb\"\n    t.string \"postcode\"\n    t.string \"state\"\n    t.string \"country\"\n    t.integer \"environment\"\n    t.integer \"market\"\n  end\n\n  create_table \"users\", id: :uuid, default: -&gt; { \"gen_random_uuid()\" }, force: :cascade do |t|\n    t.string \"email\", default: \"\", null: false\n    t.string \"encrypted_password\", default: \"\", null: false\n    t.string \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer \"sign_in_count\", default: 0, null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.inet \"current_sign_in_ip\"\n    t.inet \"last_sign_in_ip\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n    t.string \"firstName\"\n    t.string \"lastName\"\n    t.string \"account\"\n    t.index [\"email\"], name: \"index_users_on_email\", unique: true\n    t.index [\"reset_password_token\"], name: \"index_users_on_reset_password_token\", unique: true\n  end\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1525742443, "creation_date": 1525742443, "answer_id": 50224499, "question_id": 50224369, "link": "https://stackoverflow.com/questions/50224369/why-does-class-show-class-when-ancestors-include-class-is-false/50224499#50224499", "title": "Why does &#39;class&#39; show &#39;Class&#39; when &#39;ancestors.include? Class&#39; is &#39;false&#39;?", "body": "<p><code>User</code> is a class. All classes are instances of the class <code>Class</code> (i.e., <code>User.class #=&gt; Class</code>). Therefore, all instance methods defined on <code>Class</code>, or on <code>Class</code>'s ancestors, can be invoked on <code>User</code> (i.e., every instance method of <code>Class</code> is a class method of <code>User</code>).</p>\n\n<p>For example, one of <code>Class</code>'s instance methods is <code>instance_methods</code>. One can therefore execute <code>User.instance_methods</code> to obtain an array of <code>User</code>'s instance methods.</p>\n"}, {"comments": [{"owner": {"reputation": 33, "user_id": 2922725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qi0cF.jpg?s=128&g=1", "display_name": "borunbabu", "link": "https://stackoverflow.com/users/2922725/borunbabu"}, "edited": false, "score": 0, "creation_date": 1525757381, "post_id": 50224516, "comment_id": 87470118, "body": "I have restored the question in its original form. Editor had removed the reference to ApplicationRecord. I guess source of my question is: If User class inherits from ApplicationRecord, why is it (ApplicationRcord) not its class?"}, {"owner": {"reputation": 33, "user_id": 2922725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qi0cF.jpg?s=128&g=1", "display_name": "borunbabu", "link": "https://stackoverflow.com/users/2922725/borunbabu"}, "edited": false, "score": 0, "creation_date": 1525763374, "post_id": 50224516, "comment_id": 87472852, "body": "Moti, I am unclear about what you mean by Name.ancestors. What is Name?"}, {"owner": {"reputation": 3428, "user_id": 1029351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A3Yw.jpg?s=128&g=1", "display_name": "Moti Korets", "link": "https://stackoverflow.com/users/1029351/moti-korets"}, "reply_to_user": {"reputation": 33, "user_id": 2922725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qi0cF.jpg?s=128&g=1", "display_name": "borunbabu", "link": "https://stackoverflow.com/users/2922725/borunbabu"}, "edited": false, "score": 0, "creation_date": 1525764789, "post_id": 50224516, "comment_id": 87473686, "body": "<code>User</code> is an object of type <code>Class</code> thus <code>User.class</code> is <code>Class</code> as literal <code>1</code> is an object of type <code>Fixnum</code>. If you run <code>User.ancestors</code> you should see <code>ApplicationRecord</code> among them"}, {"owner": {"reputation": 3428, "user_id": 1029351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A3Yw.jpg?s=128&g=1", "display_name": "Moti Korets", "link": "https://stackoverflow.com/users/1029351/moti-korets"}, "reply_to_user": {"reputation": 33, "user_id": 2922725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qi0cF.jpg?s=128&g=1", "display_name": "borunbabu", "link": "https://stackoverflow.com/users/2922725/borunbabu"}, "edited": false, "score": 0, "creation_date": 1525764849, "post_id": 50224516, "comment_id": 87473717, "body": "Sorry for the confusion i meant <code>User</code> i edited my answer and comment. It is a bit confusing."}, {"owner": {"reputation": 3428, "user_id": 1029351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A3Yw.jpg?s=128&g=1", "display_name": "Moti Korets", "link": "https://stackoverflow.com/users/1029351/moti-korets"}, "reply_to_user": {"reputation": 33, "user_id": 2922725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qi0cF.jpg?s=128&g=1", "display_name": "borunbabu", "link": "https://stackoverflow.com/users/2922725/borunbabu"}, "edited": false, "score": 0, "creation_date": 1525765454, "post_id": 50224516, "comment_id": 87474041, "body": "You answer is very nice the main confusion point is to remember that a Class definition is also an object. And clarify where the methods such as <code>class</code> (<code>Object</code>) and <code>ancestors</code> (<code>Module</code> class) come form"}], "tags": [], "owner": {"reputation": 3428, "user_id": 1029351, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7A3Yw.jpg?s=128&g=1", "display_name": "Moti Korets", "link": "https://stackoverflow.com/users/1029351/moti-korets"}, "is_accepted": false, "score": 1, "last_activity_date": 1525764726, "last_edit_date": 1525764726, "creation_date": 1525742648, "answer_id": 50224516, "question_id": 50224369, "link": "https://stackoverflow.com/questions/50224369/why-does-class-show-class-when-ancestors-include-class-is-false/50224516#50224516", "title": "Why does &#39;class&#39; show &#39;Class&#39; when &#39;ancestors.include? Class&#39; is &#39;false&#39;?", "body": "<blockquote>\n  <p>Classes in Ruby are first-class objects\u2014each is an instance of class\n  <code>Class</code></p>\n</blockquote>\n\n<p><code>User</code> is an <strong>object</strong> of class <code>Class</code> (which inherits from <code>Object</code>). \n<a href=\"https://ruby-doc.org/core-2.2.0/Object.html#method-i-class\" rel=\"nofollow noreferrer\">class</a> is an instance method of <code>Object</code>. It returns the class of the object. Therefore, <code>User.class</code> returns <code>Class</code>. Every object will have this method, and it is useful to know what the object is (e.g., for debugging). Consider this code:</p>\n\n<pre><code>1.class\n# =&gt; Fixnum\n\"q\".class\n# =&gt; String\n</code></pre>\n\n<p>The reason why <code>User.ancestors</code> does not return <code>Class</code> is because it returns the modules included in the <code>module</code>. For example, <code>Class.ancestors</code> will include <code>Class</code>, but not <code>User</code> because <code>User</code> is an object of <code>Class</code>, which includes its own modules.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525763631, "post_id": 50227797, "comment_id": 87472993, "body": "<code>&#39;foo&#39;.class</code> returns <code>String</code> because <code>&#39;foo&#39;</code> is an instance of <code>String</code>. Why should <code>User.class</code> return <code>ApplicationRecord</code>? Obviously, <code>User</code> is not an instance of <code>ApplicationRecord</code>."}, {"owner": {"reputation": 33, "user_id": 2922725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qi0cF.jpg?s=128&g=1", "display_name": "borunbabu", "link": "https://stackoverflow.com/users/2922725/borunbabu"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525765182, "post_id": 50227797, "comment_id": 87473890, "body": "Because it is an object and it inherits from ApplicationRecord. Doesn&#39;t that amount to anything?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525765739, "post_id": 50227797, "comment_id": 87474187, "body": "But that&#39;s not what <code>class</code> is for. <code>class</code> returns the class an object has been instantiated from (instantiated != inherited). <code>User</code> is an instance of <code>Class</code>. It therefore responds to the instance methods of <code>Class</code>, like <a href=\"http://ruby-doc.org/core-2.5.0/Class.html#method-i-superclass\" rel=\"nofollow noreferrer\"><code>superclass</code></a>. It does not respond to the instance methods of <code>ApplicationRecord</code>."}, {"owner": {"reputation": 33, "user_id": 2922725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qi0cF.jpg?s=128&g=1", "display_name": "borunbabu", "link": "https://stackoverflow.com/users/2922725/borunbabu"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525766119, "post_id": 50227797, "comment_id": 87474390, "body": "Yes, that&#39;s what I am trying to get my head around. What is the use case for an instance that does not inherit? It will be a great help if you can explain that."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525767568, "post_id": 50227797, "comment_id": 87475222, "body": "What do you mean by <i>&quot;an instance that does not inherit&quot;</i>?"}], "tags": [], "owner": {"reputation": 33, "user_id": 2922725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qi0cF.jpg?s=128&g=1", "display_name": "borunbabu", "link": "https://stackoverflow.com/users/2922725/borunbabu"}, "is_accepted": false, "score": 1, "last_activity_date": 1525763084, "creation_date": 1525763084, "answer_id": 50227797, "question_id": 50224369, "link": "https://stackoverflow.com/questions/50224369/why-does-class-show-class-when-ancestors-include-class-is-false/50227797#50227797", "title": "Why does &#39;class&#39; show &#39;Class&#39; when &#39;ancestors.include? Class&#39; is &#39;false&#39;?", "body": "<p>After reading another <a href=\"https://stackoverflow.com/questions/19045195/understanding-ruby-class-and-ancestors-methods\">StackOverflow post</a>, I realized that it can only be understood by keeping the following in mind: </p>\n\n<ol>\n<li><code>User</code> class has a double role. It plays Class as well as Object. \n\n<ul>\n<li>As Class, it lets other classes inherit from it. </li>\n<li>As Object, it inherits the class method all the way up from the Object class.</li>\n</ul></li>\n<li><p>If I wanted my <code>User.class</code> to behave on the traditional lines (that is, <code>User.class</code> shows <code>ApplicationRecord</code>), then I have to override\nit as follows:</p>\n\n<p><code>class User\n  def self.class\n    self.superclass\n  end\nend</code></p></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 2, "last_activity_date": 1525767218, "last_edit_date": 1525767218, "creation_date": 1525766829, "answer_id": 50228885, "question_id": 50224369, "link": "https://stackoverflow.com/questions/50224369/why-does-class-show-class-when-ancestors-include-class-is-false/50228885#50228885", "title": "Why does &#39;class&#39; show &#39;Class&#39; when &#39;ancestors.include? Class&#39; is &#39;false&#39;?", "body": "<blockquote>\n  <p>What's the use case for the information supplied by the class method in such cases? What does it really tell me to be of practical use? It doesn't seem to have anything to do with inheritance.</p>\n</blockquote>\n\n<p><code>class</code> works the same way for every object. Calling <code>class</code> on a class provides the same information as calling <code>class</code> on an instance. That's because in Ruby, classes are instances, too.</p>\n\n<p><code>'foo'.class</code> returns <code>String</code> because <code>'foo'</code> is an instance of <code>String</code>. Likewise, <code>User.class</code> returns <code>Class</code> because <code>User</code> is an instance of <code>Class</code>.</p>\n\n<p>In particular, <code>User</code> is <em>not</em> an instance of <code>ApplicationRecord</code>.</p>\n\n<p>It might not be obvious that <code>User</code> is an instance of <code>Class</code> when  creating it via the <a href=\"http://ruby-doc.org/core-2.5.0/doc/syntax/modules_and_classes_rdoc.html#label-Defining+a+class\" rel=\"nofollow noreferrer\"><code>class</code></a> keyword:</p>\n\n<pre><code>class User &lt; ApplicationRecord; end\n</code></pre>\n\n<p>But it becomes very obvious when you create it explicitly via <a href=\"http://ruby-doc.org/core-2.5.0/Class.html#method-c-new\" rel=\"nofollow noreferrer\"><code>Class.new</code></a>: (both examples produce the same result)</p>\n\n<pre><code>User = Class.new(ApplicationRecord)\nUser.class #=&gt; Class\n</code></pre>\n\n<p>Because the above is just like: (using <code>String.new</code> for demonstration purposes)</p>\n\n<pre><code>foo = String.new('foo')\nfoo.class #=&gt; String\n</code></pre>\n"}], "owner": {"reputation": 33, "user_id": 2922725, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Qi0cF.jpg?s=128&g=1", "display_name": "borunbabu", "link": "https://stackoverflow.com/users/2922725/borunbabu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 50228885, "answer_count": 4, "score": 1, "last_activity_date": 1525767218, "creation_date": 1525741251, "last_edit_date": 1525757149, "question_id": 50224369, "link": "https://stackoverflow.com/questions/50224369/why-does-class-show-class-when-ancestors-include-class-is-false", "title": "Why does &#39;class&#39; show &#39;Class&#39; when &#39;ancestors.include? Class&#39; is &#39;false&#39;?", "body": "<p>I have a class <code>User</code> that inherits from ApplicationRecord. When I check <code>User.ancestors.include?(Class)</code>, the result is <code>false</code> but for <code>User.class</code>, the result is <code>Class</code>.</p>\n\n<p>What's the use case for the information supplied by the <code>class</code> method in such cases? What does it really tell me to be of practical use? It doesn't seem to have anything to do with inheritance.</p>\n"}, {"tags": ["ruby", "facebook", "facebook-graph-api", "facebook-business-sdk"], "comments": [{"owner": {"reputation": 442, "user_id": 1091619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd785cf24cda2b82dc4a31f38949f814?s=128&d=identicon&r=PG", "display_name": "Chip Roberson", "link": "https://stackoverflow.com/users/1091619/chip-roberson"}, "edited": false, "score": 0, "creation_date": 1525739910, "post_id": 50224045, "comment_id": 87465976, "body": "I&#39;m going to add this as a comment because I don&#39;t think it fully answers the question but I just came across <code>to_hash</code>, which seems to get all the data after at least one field has been access. <code>page.to_hash =&gt; {:id=&gt;&quot;125200950858892&quot;}</code>. Run <code>page.about</code>  and then <code>page.to_hash</code> returns <code>{:id=&gt;&quot;125200950858892&quot;, :about=&gt;&quot;Brandle&#174; delivers....&quot;, :fan_count=&gt;506, :username=&gt;&quot;BrandleSystem&quot;}</code>"}, {"owner": {"reputation": 442, "user_id": 1091619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd785cf24cda2b82dc4a31f38949f814?s=128&d=identicon&r=PG", "display_name": "Chip Roberson", "link": "https://stackoverflow.com/users/1091619/chip-roberson"}, "edited": false, "score": 0, "creation_date": 1525783002, "post_id": 50224045, "comment_id": 87484957, "body": "FWIW, I did post similar question and follow-up over in the Facebook Developer Community on Facebook: <a href=\"https://www.facebook.com/groups/fbdevelopers/permalink/1762976653745841/\" rel=\"nofollow noreferrer\">facebook.com/groups/fbdevelopers/permalink/1762976653745841</a>"}, {"owner": {"reputation": 442, "user_id": 1091619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd785cf24cda2b82dc4a31f38949f814?s=128&d=identicon&r=PG", "display_name": "Chip Roberson", "link": "https://stackoverflow.com/users/1091619/chip-roberson"}, "edited": false, "score": 0, "creation_date": 1525784697, "post_id": 50224045, "comment_id": 87485993, "body": "There is an issue open for the facebook-ruby-business-sdk requesting more documentation. It&#39;s been open since July of 2017: <a href=\"https://github.com/facebook/facebook-ruby-business-sdk/issues/4\" rel=\"nofollow noreferrer\">github.com/facebook/facebook-ruby-business-sdk/issues/4</a>"}], "answers": [{"tags": [], "owner": {"reputation": 442, "user_id": 1091619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd785cf24cda2b82dc4a31f38949f814?s=128&d=identicon&r=PG", "display_name": "Chip Roberson", "link": "https://stackoverflow.com/users/1091619/chip-roberson"}, "is_accepted": false, "score": 0, "last_activity_date": 1525750294, "creation_date": 1525750294, "answer_id": 50225387, "question_id": 50224045, "link": "https://stackoverflow.com/questions/50224045/how-to-retrieve-multiple-fields-for-a-page-using-facebook-business-sdk/50225387#50225387", "title": "How to retrieve multiple fields for a page using Facebook Business SDK", "body": "<p>OK, this is <em>an</em> answer but not necessary <em>the</em> answer. I think there still has to be a better answer but here is what we have discerned. </p>\n\n<p>Every time a call is made to one of the methods that returns an individual field, a call to the API is made. You can see from the values returned by <code>page.last_api_response.headers[\"date\"]</code>. However, once the first field is retrieved, all fields are available and can be retrieved via a call to <code>page.attributes</code> or <code>page.to_hash</code>.</p>\n\n<pre><code>006 &gt;   page = FacebookAds::Page.get('125200950858892', \"about,username,name,impressum,verification_status\")\n =&gt; #&lt;FacebookAds::Page {:id=&gt;\"125200950858892\"}&gt; \n007 &gt; page.last_api_response\n =&gt; nil \n008 &gt; page.attributes\n =&gt; {:id=&gt;\"125200950858892\"} \n\n010 &gt;   page.username\n =&gt; \"BrandleSystem\" \n012 &gt; page.attributes\n =&gt; {:id=&gt;\"125200950858892\", :about=&gt;\"Brandle\u00ae delivers social media security &amp; brand protection.  It's the easiest way to Discover, Inventory, Monitor &amp; Patrol your social presence!\", :username=&gt;\"BrandleSystem\", :name=&gt;\"Brandle\", :verification_status=&gt;\"not_verified\"} \n013 &gt; page.last_api_response.headers[\"date\"]\n =&gt; \"Tue, 08 May 2018 03:19:12 GMT\" \n\n015 &gt;   page.name\n =&gt; \"Brandle\" \n017 &gt; page.attributes\n =&gt; {:id=&gt;\"125200950858892\", :about=&gt;\"Brandle\u00ae delivers social media security &amp; brand protection.  It's the easiest way to Discover, Inventory, Monitor &amp; Patrol your social presence!\", :username=&gt;\"BrandleSystem\", :name=&gt;\"Brandle\", :verification_status=&gt;\"not_verified\"} \n018 &gt; page.last_api_response.headers[\"date\"]\n =&gt; \"Tue, 08 May 2018 03:20:02 GMT\" \n\n020 &gt;   page.to_hash\n</code></pre>\n\n<p>=> {:id=>\"125200950858892\", :about=>\"Brandle\u00ae delivers social media security &amp; brand protection.  It's the easiest way to Discover, Inventory, Monitor &amp; Patrol your social presence!\", :username=>\"BrandleSystem\", :name=>\"Brandle\", :verification_status=>\"not_verified\"}</p>\n\n<p>It would be nice if there was a more direct way to retrieve the attributes but that has not come to light yet.</p>\n"}], "owner": {"reputation": 442, "user_id": 1091619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bd785cf24cda2b82dc4a31f38949f814?s=128&d=identicon&r=PG", "display_name": "Chip Roberson", "link": "https://stackoverflow.com/users/1091619/chip-roberson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 208, "favorite_count": 2, "answer_count": 1, "score": 0, "last_activity_date": 1553042887, "creation_date": 1525738224, "last_edit_date": 1553042887, "question_id": 50224045, "link": "https://stackoverflow.com/questions/50224045/how-to-retrieve-multiple-fields-for-a-page-using-facebook-business-sdk", "title": "How to retrieve multiple fields for a page using Facebook Business SDK", "body": "<p>The recent changes announced by Facebook (e.g. April 24 and <a href=\"https://developers.facebook.com/blog/post/2018/05/01/facebook-business-sdk/\" rel=\"nofollow noreferrer\">May 1, 2018</a>) have resulted in us looking at the Facebook Business SDK, which from what I can tell is a descendent of the Facebook Marketing/Facebook Ads API. </p>\n\n<p>Facebook points one to their various gems on Github but most of the examples reference managing Ads and Campaigns. For example the <a href=\"https://github.com/facebook/facebook-ruby-business-sdk\" rel=\"nofollow noreferrer\">facebook/facebook-ruby-business-sdk</a>.</p>\n\n<p>Using their test.rb example from <a href=\"https://developers.facebook.com/docs/business-sdk/getting-started/#ruby\" rel=\"nofollow noreferrer\">Facebook's Getting Started</a> page, I was able to cobble together the following test. As you can see below, it appears each method call to retrieve a value of a field appears to result in a separate API call (or at least some form of network access):</p>\n\n<pre><code>1 &gt; FacebookAds.configure do |config|\n2 &gt;       config.access_token = '&lt;deleted&gt;'\n3?&gt;     config.app_secret = '&lt;deleted&gt;'\n4?&gt;   end\n =&gt; #&lt;FacebookAds::Config:0x007fd1f453ade0 @access_token=\"&lt;deleted&gt;\", @app_secret=\"&lt;deleted&gt;\"&gt; \n\n5 &gt;   page = FacebookAds::Page.get('125200950858892', \"about,fan_count,impressum,username\")\n =&gt; #&lt;FacebookAds::Page {:id=&gt;\"125200950858892\"}&gt; \n\n6 &gt; page.__all_fields\n =&gt; #&lt;Set: {:about, :fan_count, :impressum, :username, :id}&gt; \n\n7 &gt; page.about\n =&gt; \"Brandle\u00ae delivers social media security &amp; brand protection.  It's the easiest way to Discover, Inventory, Monitor &amp; Patrol your social presence!\" \n\n# Turn wifi off\n\n8 &gt;   page.username\nFaraday::ConnectionFailed: getaddrinfo: nodename nor servname provided, or not known\n\n# Turn wifi on\n\n9 &gt;   page.username\n =&gt; \"BrandleSystem\" \n</code></pre>\n\n<p>The Graph API itself makes retrieving multiple fields for a Page (node) very easy, so I don't understand why the new SDK seems to be so inefficient (or at least poorly documented) on its face. </p>\n\n<p>I think I'm missing something fairly obvious. There is a Batch API but I would assume that is more for retrieving multiple pages at a time, rather than retrieving multiple fields of a single page.</p>\n\n<p>I'm hoping someone else has figured this out.</p>\n\n<p>Thank you.</p>\n\n<p>PS: If anyone has the reputation points, which I lack, I think this thread should have <code>facebook-business-sdk</code> and <code>facebook-ruby-business-sdk</code> as tags.</p>\n"}, {"tags": ["ruby", "syntax", "block"], "comments": [{"owner": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 7, "creation_date": 1525738234, "post_id": 50223996, "comment_id": 87465641, "body": "Wrap the symbol argument - <code>myfunc(:user) { p &quot;BLOCK&quot; }</code>, otherwise there wouldn&#39;t be block being passed."}, {"owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "reply_to_user": {"reputation": 28612, "user_id": 5025116, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/7WdYi.jpg?s=128&g=1", "display_name": "Sebastian Palma", "link": "https://stackoverflow.com/users/5025116/sebastian-palma"}, "edited": false, "score": 0, "creation_date": 1525739474, "post_id": 50223996, "comment_id": 87465890, "body": "@SebastianPalma yes, that was it!"}], "owner": {"reputation": 2770, "user_id": 1198291, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/d82e5a799d05375969c7fa6fce0f2783?s=128&d=identicon&r=PG", "display_name": "dariush", "link": "https://stackoverflow.com/users/1198291/dariush"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1525750320, "creation_date": 1525737861, "last_edit_date": 1525750320, "question_id": 50223996, "link": "https://stackoverflow.com/questions/50223996/having-error-when-using-blocks", "title": "Having error when using blocks", "body": "<p>I have a method taking a block, and I called it as follows:</p>\n\n<pre><code>def myfunc(symbol, args: nil, &amp;block)\n  ...\nend\n\nmyfunc :user { p \"BLOCK\" }\n#&gt;&gt; SyntaxError ((irb):19: syntax error, unexpected '{', expecting end-of-input myfunc :user { p \"BLOCK\" }\n</code></pre>\n\n<p>If I call the method using <code>do</code> ... <code>end</code> block style, it works.</p>\n\n<p>What has been changed since Ruby 2.4, and how can I fix this?</p>\n"}, {"tags": ["ruby", "eval"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525742640, "post_id": 50223765, "comment_id": 87466520, "body": "Skimming through your code it looks like you&#39;re looking for <a href=\"https://stackoverflow.com/questions/4370960/what-is-attr-accessor-in-ruby\">attr_accessor and co</a>."}], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 2052750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fgstz.jpg?s=128&g=1", "display_name": "wintermute", "link": "https://stackoverflow.com/users/2052750/wintermute"}, "edited": false, "score": 0, "creation_date": 1525748826, "post_id": 50224685, "comment_id": 87467762, "body": "Thank you for your reply, that is a very interesting approach."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 447, "user_id": 2052750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fgstz.jpg?s=128&g=1", "display_name": "wintermute", "link": "https://stackoverflow.com/users/2052750/wintermute"}, "edited": false, "score": 1, "creation_date": 1525749171, "post_id": 50224685, "comment_id": 87467845, "body": "@wintermute no problem. Whenever you see code that is identical besides say the name of a variable, you can almost always use some kind of dynamic ruby methods and string interpolation to dry things up.  One downside of this approach however is if you have a large code base and are searching for a method definition, you might not find it with a full text search.  In those cases it may be worth adding comments with the generated method names."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 1, "last_activity_date": 1525746054, "last_edit_date": 1525746054, "creation_date": 1525744605, "answer_id": 50224685, "question_id": 50223765, "link": "https://stackoverflow.com/questions/50223765/generic-setter-for-instance-variables-in-ruby/50224685#50224685", "title": "Generic setter for instance variables in Ruby?", "body": "<p>There's nothing inherently \"wrong\" with your approach except the use of eval. \nHere's a more dynamic way to remove the duplication without needing use of eval</p>\n\n<pre><code>class Box\n  @@boxcounter = 0\n  @@totalvolume = 0.0\n\n  def initialize(length, width, height)\n    @length = length\n    @width = width\n    @height = height\n    @@boxcounter += 1\n    @@totalvolume += volume\n  end\n\n  def volume\n    volume = @length * @width * @height\n  end\n\n  def report\n    puts \"# of boxes: #{@@boxcounter}\"\n    puts \"Total volume: #{@@totalvolume}\"\n    puts \"Average volume per box: #{@@totalvolume / @@boxcounter}\"\n  end\n\n  def my_print\n    p self\n    puts \"Height: #{@height}\"\n  end\n\n  # dynamically define your methods to dry up the code:\n  %w[length width height].each do |method|\n    define_method(\"#{method}=\") do |arg|\n      @@totalvolume -= volume\n      instance_variable_set('@'+method, arg)\n      @@totalvolume += volume\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 2052750, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/fgstz.jpg?s=128&g=1", "display_name": "wintermute", "link": "https://stackoverflow.com/users/2052750/wintermute"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "accepted_answer_id": 50224685, "answer_count": 1, "score": 1, "last_activity_date": 1525746652, "creation_date": 1525735586, "last_edit_date": 1525746652, "question_id": 50223765, "link": "https://stackoverflow.com/questions/50223765/generic-setter-for-instance-variables-in-ruby", "title": "Generic setter for instance variables in Ruby?", "body": "<p>I'm defining a Box class in ruby which has 3 instance variables: @length, @width, @height, and 2 class variables: @@boxcounter and @@totalvolume.</p>\n\n<p>While the value of @@boxcounter can be updated inside the object constructor (initializer), updating the value of @@totalvolume becomes less trivial, since we have to recalculate the volume of the given object each time we change any of the instance variables (i.e. length, width, or height).</p>\n\n<p>I've come up with the following code to handle this use case:</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>class Box\n  @@boxcounter = 0\n  @@totalvolume = 0.0\n\n  def initialize(length, width, height)\n    @length = length\n    @width = width\n    @height = height\n    @@boxcounter += 1\n    @@totalvolume += volume\n  end\n\n  def volume\n    volume = @length * @width * @height\n  end\n\n  def report\n    puts \"# of boxes: #{@@boxcounter}\"\n    puts \"Total volume: #{@@totalvolume}\"\n    puts \"Average volume per box: #{@@totalvolume / @@boxcounter}\"\n  end\n\n  def my_print\n    p self\n    puts \"Length: #{@length}\"\n    puts \"Width: #{@width}\"\n    puts \"Height: #{@height}\"\n    puts\n  end\n\n  def length=(length)\n    @@totalvolume -= volume\n    @length = length\n    @@totalvolume += volume\n  end\n\n  def width=(width)\n    @@totalvolume -= volume\n    @width = width\n    @@totalvolume += volume\n  end\n\n  def height=(height)\n    @@totalvolume -= volume\n    @height = height\n    @@totalvolume += volume\n  end\nend\n</code></pre>\n\n<p>Since the idea of first class objects is still in my head after studying Scheme, I wondered, can I create a generic setter and use that to reduce the code repetition in each of the setters listed above? I tried this, but using eval seems to be a bit of a hack:</p>\n\n<pre><code>  def update_class_state(update_instance_variable)\n    @@totalvolume -= volume\n    eval update_instance_variable\n    @@totalvolume += volume\n  end\n\n  def length=(length)\n    update_class_state(\"@length = #{length}\")\n  end\n\n  def width=(width)\n    update_class_state(\"@width = #{width}\")\n  end\n\n  def height=(height)\n    update_class_state(\"@height = #{height}\")\n  end\n</code></pre>\n\n<p>\u2013 My question: Is it a bad practice to write code like this? Is there a more elegant solution to this approach?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "ruby-on-rails-5.2"], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 9755868, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-OFl1bJqYKJQ/AAAAAAAAAAI/AAAAAAAAAA4/2vRihH9UP7g/photo.jpg?sz=128", "display_name": "Kenji", "link": "https://stackoverflow.com/users/9755868/kenji"}, "is_accepted": false, "score": 0, "last_activity_date": 1525746403, "creation_date": 1525746403, "answer_id": 50224898, "question_id": 50223170, "link": "https://stackoverflow.com/questions/50223170/rails-5-project-without-activerecord-causing-model-generate-error/50224898#50224898", "title": "Rails 5 project without activerecord causing model generate error", "body": "<p>I assume you don't have an ORM. If that is the case then <code>running rails generate model</code> shouldn't do anything, it shouldn't even install sqlite by default. Try updating your sqlite gem</p>\n"}, {"tags": [], "owner": {"reputation": 3073, "user_id": 87972, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/91e9e297b26a2e81e18af01ff84338e8?s=128&d=identicon&r=PG", "display_name": "Hoa", "link": "https://stackoverflow.com/users/87972/hoa"}, "is_accepted": false, "score": 0, "last_activity_date": 1525773517, "creation_date": 1525773517, "answer_id": 50230895, "question_id": 50223170, "link": "https://stackoverflow.com/questions/50223170/rails-5-project-without-activerecord-causing-model-generate-error/50230895#50230895", "title": "Rails 5 project without activerecord causing model generate error", "body": "<p>The <code>$ bin/rails generate model ...</code> command actually creates a migration and an ActiveRecord model that's why you get the database-related error. See <a href=\"http://guides.rubyonrails.org/active_record_migrations.html#model-generators\" rel=\"nofollow noreferrer\">Model Generators</a>.</p>\n"}, {"comments": [{"owner": {"reputation": 174, "user_id": 2092386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/570442eded88e8ea5661524d44492e04?s=128&d=identicon&r=PG", "display_name": "sidneivl", "link": "https://stackoverflow.com/users/2092386/sidneivl"}, "edited": false, "score": 0, "creation_date": 1525806857, "post_id": 50231350, "comment_id": 87498972, "body": "So, If I want connect an external API using RestClient gem I need create my models manually, right? Because to create a model Rails by default necessity a database dependent?"}, {"owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "reply_to_user": {"reputation": 174, "user_id": 2092386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/570442eded88e8ea5661524d44492e04?s=128&d=identicon&r=PG", "display_name": "sidneivl", "link": "https://stackoverflow.com/users/2092386/sidneivl"}, "edited": false, "score": 0, "creation_date": 1525844183, "post_id": 50231350, "comment_id": 87509738, "body": "I haven&#39;t used the <code>RestClient</code> gem on my own, but yeah you can always create a model on your own. Afterall its just a class. If its inheriting <code>AR::Base</code> it&#39;ll have a functionality to work with DB table as well."}], "tags": [], "owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "is_accepted": false, "score": 1, "last_activity_date": 1525775041, "creation_date": 1525775041, "answer_id": 50231350, "question_id": 50223170, "link": "https://stackoverflow.com/questions/50223170/rails-5-project-without-activerecord-causing-model-generate-error/50231350#50231350", "title": "Rails 5 project without activerecord causing model generate error", "body": "<p>If you don't want to use <code>ActiveRecord</code> then there's no need to generate a model using <code>rails g</code>.\nYou can just go to the <code>app/models</code> directory in your application and create a plain ruby class to work with it as a model.</p>\n"}, {"comments": [{"owner": {"reputation": 174, "user_id": 2092386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/570442eded88e8ea5661524d44492e04?s=128&d=identicon&r=PG", "display_name": "sidneivl", "link": "https://stackoverflow.com/users/2092386/sidneivl"}, "edited": false, "score": 0, "creation_date": 1525806924, "post_id": 50232972, "comment_id": 87499002, "body": "I&#39;m using an external rest JSon API to data, so I need create my models manually, right?"}], "tags": [], "owner": {"reputation": 31, "user_id": 4402192, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/QKNdC.jpg?s=128&g=1", "display_name": "Prakash Thiru", "link": "https://stackoverflow.com/users/4402192/prakash-thiru"}, "is_accepted": false, "score": 1, "last_activity_date": 1525780419, "creation_date": 1525780419, "answer_id": 50232972, "question_id": 50223170, "link": "https://stackoverflow.com/questions/50223170/rails-5-project-without-activerecord-causing-model-generate-error/50232972#50232972", "title": "Rails 5 project without activerecord causing model generate error", "body": "<p>The command</p>\n\n<pre><code>rails g model MODEL\n</code></pre>\n\n<p>will generate <em>model, migration and fixtures</em>. And this is related to <strong>ORM</strong>. So rails will look at database configuration. There you would have mentioned the ORM client as</p>\n\n<pre><code>adapter: sqlite3\n</code></pre>\n\n<p>You need to install <strong>sqlite3 gem</strong> for this. Add</p>\n\n<pre><code>gem 'sqlite3'\n</code></pre>\n\n<p>to your <strong>Gemfile</strong></p>\n\n<p>If you want to add just model alone create file inside <code>app/models</code> folder. But whats the point in doing this? Rails will look for the <em>table name</em> respect to the model's <em>class name</em> and throw an error</p>\n"}], "owner": {"reputation": 174, "user_id": 2092386, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/570442eded88e8ea5661524d44492e04?s=128&d=identicon&r=PG", "display_name": "sidneivl", "link": "https://stackoverflow.com/users/2092386/sidneivl"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 650, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1525780419, "creation_date": 1525731006, "question_id": 50223170, "link": "https://stackoverflow.com/questions/50223170/rails-5-project-without-activerecord-causing-model-generate-error", "title": "Rails 5 project without activerecord causing model generate error", "body": "<p>I'm facing a problem in a project using Rails 5.2 without ActiveRecord.</p>\n\n<p>I've runned the command <code>rails new project --skip-active-record</code> and it's ok, but when I run a command to generate a model I get this error:</p>\n\n<blockquote>\n  <p>.rvm/gems/ruby-2.5.1/gems/bundler-1.16.1/lib/bundler/rubygems_integration.rb:404:in\n  `block (2 levels) in replace_gem': Error loading the 'sqlite3' Active\n  Record adapter. Missing a gem it depends on? sqlite3 is not part of\n  the bundle. Add it to your Gemfile. (Gem::LoadError)</p>\n</blockquote>\n\n<p>I didn't understand why it ask about sqlite 3 in active record if I disabled it and I search over internet and don't find anyone talking about.</p>\n\n<p>What is wrong?</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "sqlite", "heroku"], "comments": [{"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1525737905, "post_id": 50223046, "comment_id": 87465566, "body": "in your Heroku dashboard. Resources -&gt; addons. Have you added Heroku Postgres :: Database add-on ?"}, {"owner": {"reputation": 53, "user_id": 5904660, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9e2c044865378a0dfa5b95d00328c762?s=128&d=identicon&r=PG&f=1", "display_name": "crievino", "link": "https://stackoverflow.com/users/5904660/crievino"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1525768934, "post_id": 50223046, "comment_id": 87476017, "body": "Yes, I added the Postgres addon!"}, {"owner": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1525778393, "post_id": 50223046, "comment_id": 87481931, "body": "Have you chosen a web Dyno (the one for free is ok) and activated it ?"}, {"owner": {"reputation": 53, "user_id": 5904660, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9e2c044865378a0dfa5b95d00328c762?s=128&d=identicon&r=PG&f=1", "display_name": "crievino", "link": "https://stackoverflow.com/users/5904660/crievino"}, "reply_to_user": {"reputation": 1225, "user_id": 957185, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/4435b492655cf1dbd1897167f28ff6a0?s=128&d=identicon&r=PG", "display_name": "Maxence", "link": "https://stackoverflow.com/users/957185/maxence"}, "edited": false, "score": 0, "creation_date": 1525851280, "post_id": 50223046, "comment_id": 87513052, "body": "Yes. I found a solution by re-adding the Postgres addon on heroku. Now it works fine. Thanks for your help!"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 5904660, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9e2c044865378a0dfa5b95d00328c762?s=128&d=identicon&r=PG&f=1", "display_name": "crievino", "link": "https://stackoverflow.com/users/5904660/crievino"}, "edited": false, "score": 0, "creation_date": 1525851337, "post_id": 50224763, "comment_id": 87513075, "body": "Thanks, I re-added the postgres addon and now it works fine! Cheers"}], "tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": false, "score": 2, "last_activity_date": 1525745231, "creation_date": 1525745231, "answer_id": 50224763, "question_id": 50223046, "link": "https://stackoverflow.com/questions/50223046/postgres-db-not-working-on-heroku/50224763#50224763", "title": "Postgres db not working on Heroku", "body": "<p>You cannot create a database on Heroku using db:create (you cannot drop it neither). Your database is created when you add an add-on (such as Heroku Postgres). You can only migrate and seed. And if you want to start over, you can use pg:reset (instead of drop and create)</p>\n\n<p>So the correct sequence should be:</p>\n\n<ul>\n<li>add the Heroku add-on (such as Heroku Postgres). Add-ons are located here: <a href=\"https://elements.heroku.com/addons\" rel=\"nofollow noreferrer\">https://elements.heroku.com/addons</a>.</li>\n<li>rake db:migrate</li>\n<li>rake db:seed</li>\n</ul>\n\n<p>if you want to start over</p>\n\n<ul>\n<li>rake pg:reset</li>\n<li>rake db:migrate</li>\n<li>rake db:seed</li>\n</ul>\n\n<p>From Heroku documentation: <a href=\"https://devcenter.heroku.com/articles/heroku-postgresql\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/heroku-postgresql</a></p>\n\n<blockquote>\n  <p>The PostgreSQL user your database is assigned doesn\u2019t have permission to create or drop databases. To drop and recreate your database use pg:reset.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "is_accepted": false, "score": 2, "last_activity_date": 1525844074, "creation_date": 1525844074, "answer_id": 50246160, "question_id": 50223046, "link": "https://stackoverflow.com/questions/50223046/postgres-db-not-working-on-heroku/50246160#50246160", "title": "Postgres db not working on Heroku", "body": "<p>By default you don't need to create a db on <code>heroku</code>.\nJust run <code>heroku run rails db:migrate</code> and rest of the stuff will be handled by <code>heroku</code> itself.</p>\n\n<p>Also your <code>database.yml</code> should be changed to following for <code>Production</code> env.</p>\n\n<pre><code>production:\n  &lt;&lt;: *default\n  database: myapp_production\n  username: myapp\n  password: &lt;%= ENV['MYAPP_DATABASE_PASSWORD'] %&gt;\n</code></pre>\n\n<p>Also your rails app is by default assigned with a <code>Postgres addon</code>.\nYou can check this by running command <code>heroku addons</code> in the console.</p>\n\n<p>Source - </p>\n\n<ol>\n<li><a href=\"https://devcenter.heroku.com/articles/getting-started-with-rails5#migrate-your-database\" rel=\"nofollow noreferrer\">Heroku Getting Started Guide</a></li>\n<li><a href=\"https://devcenter.heroku.com/articles/heroku-postgresql\" rel=\"nofollow noreferrer\">Heroku Postgres Addon Guide</a></li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 2471, "user_id": 8063597, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41fe33a379a7894b9246569a6e0396aa?s=128&d=identicon&r=PG&f=1", "display_name": "Rohan", "link": "https://stackoverflow.com/users/8063597/rohan"}, "is_accepted": false, "score": 2, "last_activity_date": 1525847282, "creation_date": 1525847282, "answer_id": 50246804, "question_id": 50223046, "link": "https://stackoverflow.com/questions/50223046/postgres-db-not-working-on-heroku/50246804#50246804", "title": "Postgres db not working on Heroku", "body": "<p>As per the given stacktrace, it seems like you are trying to create a database on heroku which in turn is giving you Permission Denied Error.</p>\n\n<p>Firstly, you do not need to run</p>\n\n<pre><code>heroku run rake db:create\n</code></pre>\n\n<p>Instead run</p>\n\n<pre><code>heroku run rake db:migrate\n</code></pre>\n\n<p>and it should migrate the migrations which are down.</p>\n\n<p>For checking the current status of migrations run the following command:</p>\n\n<pre><code>heroku run rake db:migrate:status\n</code></pre>\n\n<p>Other Point you mentioned:</p>\n\n<p>-> I can't create or seed any data in the database\nAs already mentioned above you can't create a database as heroku does it for you . \nFor seeding data in the database run the following command:</p>\n\n<pre><code>heroku run rake db:seed\n</code></pre>\n"}], "owner": {"reputation": 53, "user_id": 5904660, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/9e2c044865378a0dfa5b95d00328c762?s=128&d=identicon&r=PG&f=1", "display_name": "crievino", "link": "https://stackoverflow.com/users/5904660/crievino"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2347, "favorite_count": 1, "answer_count": 3, "score": 1, "last_activity_date": 1525847282, "creation_date": 1525730372, "last_edit_date": 1525733855, "question_id": 50223046, "link": "https://stackoverflow.com/questions/50223046/postgres-db-not-working-on-heroku", "title": "Postgres db not working on Heroku", "body": "<p>I've spend several hours figuring out how to get my database up and running. I created a new rails app and wanted to deploy it to heroku. I followed the instructions from heroku (to switch from sqlite3 -> postgresql) but it just doesn't work. </p>\n\n<p>This is in my database.yml file: </p>\n\n<pre><code>default: &amp;default\n  adapter: postgresql\n  pool: 5\n  timeout: 5000\n\ndevelopment:\n  &lt;&lt;: *default\n  database: myapp_development\n\ntest:\n  &lt;&lt;: *default\n  database: myapp_test\n\nproduction:\n  &lt;&lt;: *default\n  database: myapp_production\n  url: &lt;%= ENV['DATABASE_URL'] %&gt;\n</code></pre>\n\n<p>I can't create or seed any data in the database. Sometimes it executes the db:migrate, but even then it doesn't create anything. This is what I get when running: </p>\n\n<pre><code>heroku run rake db:create\n\nFATAL: permission denied for database \"postgres\"\nDETAIL: User does not have CONNECT privilege.\n</code></pre>\n\n<p>Does anyone has an idea on how to solve this? I don't have a clue anymore ...</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["arrays", "ruby", "multidimensional-array"], "comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1525729982, "post_id": 50222794, "comment_id": 87463487, "body": "<code>puts array_name</code> would display all elements on separate lines as well."}], "answers": [{"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user8234757"}, "edited": false, "score": 0, "creation_date": 1525730343, "post_id": 50222939, "comment_id": 87463599, "body": "Ahhh, okay, this course I&#39;m doing only covered <code>puts</code> so I wasn&#39;t aware there was a separate method for specifically showing the array, thank you for the clarification!"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": true, "score": 6, "last_activity_date": 1525729770, "creation_date": 1525729770, "answer_id": 50222939, "question_id": 50222794, "link": "https://stackoverflow.com/questions/50222794/why-does-inspect-print-the-array-but-not-using-inspect-puts-each-element/50222939#50222939", "title": "Why does &#39;inspect&#39; print the array but not using &#39;inspect&#39; puts each element?", "body": "<p>Actually, this is how method <a href=\"https://ruby-doc.org/core-2.5.0/IO.html#method-i-puts\" rel=\"noreferrer\">puts</a> behave. From documentation:</p>\n\n<blockquote>\n  <p>If called with an array argument, writes each element on a new line. Each given object that isn't a string or array will be converted by calling its to_s method. If called without arguments, outputs a single newline.</p>\n</blockquote>\n\n<p>On the other hand, there <code>p</code> method in Ruby:</p>\n\n<blockquote>\n  <p>For each object, directly writes obj.inspect followed by a newline to the program\u2019s standard output.</p>\n</blockquote>\n\n<p>The following code will print the result you're expecting:</p>\n\n<pre><code>array_name.each do |i|\n  p i\nend\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user8234757"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 50222939, "answer_count": 1, "score": 3, "last_activity_date": 1525750888, "creation_date": 1525728931, "last_edit_date": 1525750888, "question_id": 50222794, "link": "https://stackoverflow.com/questions/50222794/why-does-inspect-print-the-array-but-not-using-inspect-puts-each-element", "title": "Why does &#39;inspect&#39; print the array but not using &#39;inspect&#39; puts each element?", "body": "<p>I have a nested array:</p>\n\n<pre><code>array_name = [\n  [\"Alice\", \"pizza\", \"soccer\"],\n  [\"Steve\", \"sushi\", \"hockey\"],\n  [\"Alex\", \"pasta\", \"none\"]\n]\n</code></pre>\n\n<p>When I use <code>inspect</code> in a loop:</p>\n\n<pre><code>array_name.each do |i|\n  puts i.inspect\nend\n</code></pre>\n\n<p>it outputs:</p>\n\n<pre><code>[\"Alice\", \"pizza\", \"soccer\"]\n[\"Steve\", \"sushi\", \"hockey\"]\n[\"Alex\", \"pasta\", \"none\"]\n</code></pre>\n\n<p>but using <code>puts</code> instead prints every element from every individual array:</p>\n\n<pre><code>array_name.each do |i|\n  puts i\nend\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>Alice\npizza\nsoccer\nSteve\nsushi\nhockey\nAlex\npasta\nnone\n</code></pre>\n\n<p>Why does <code>array_name.inspect</code> output the entire array like above?</p>\n\n<p>I read that <code>inspect</code> tries to print the coded version. I don't get, then, why the following shows the same output as the second code above:</p>\n\n<pre><code>array_name.each do |i|\n  i.each do |sub_i|\n    puts sub_i\n  end\nend\n</code></pre>\n\n<p>outputs:</p>\n\n<pre><code>Alice\npizza\nsoccer\nSteve\nsushi\nhockey\nAlex\npasta\nnone\n</code></pre>\n\n<p>The second and the third codes above give me the same output, which is not the array but the actual elements inside every array. Why is this?</p>\n"}, {"tags": ["ruby", "xpath", "watir"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1525734073, "post_id": 50222787, "comment_id": 87464669, "body": "Can you provide the (minimal amount of) HTML to reproduce the issue? Or provide the URL for the site-under-test?"}], "answers": [{"comments": [{"owner": {"reputation": 357, "user_id": 4330018, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AtTSq.jpg?s=128&g=1", "display_name": "Javier Bullrich", "link": "https://stackoverflow.com/users/4330018/javier-bullrich"}, "edited": false, "score": 0, "creation_date": 1526396076, "post_id": 50223918, "comment_id": 87722761, "body": "Your answer is correct. I found that the reason for Watir not finding all the divs was that when I go to the bottom of the page, React unloads the other span, so, by searching for the current spans, interacting, and then going to the bottom, I&#39;m having the desired functionality."}], "tags": [], "owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "is_accepted": true, "score": 0, "last_activity_date": 1525763104, "last_edit_date": 1525763104, "creation_date": 1525737068, "answer_id": 50223918, "question_id": 50222787, "link": "https://stackoverflow.com/questions/50222787/watir-not-finding-all-elements-with-a-class-name/50223918#50223918", "title": "Watir not finding all elements with a class name", "body": "<pre><code>likes = @browser.spans(:class =&gt; \"className\")\n</code></pre>\n\n<p>This one clearly wouldn't work because you are speaking like class name contains \"className\" so you better write with regular expression</p>\n\n<pre><code>likes = @browser.spans(:class =&gt; /className/)\n</code></pre>\n\n<p>Or go with your other option with a little correction since you only want span, you don't have to use * instead use <code>span</code></p>\n\n<pre><code>likes = @browser.elements(:xpath, \"//span[contains(@class, 'className')]\")\n</code></pre>\n\n<p>Watir usually wait until page loads completely when you are navigating one page to another, we don't have to use any static sleep statement but Since you say page loads more span when get to the bottom your case seems to be little different ,I strongly suspect the above code executes quickly even before page loads completely so put <code>sleep 5</code> to check whether you get increase in number of spans, so write the following code with  <code>sleep 5</code></p>\n\n<p>WATIR has the <code>execute_script</code> for you, so you don't have to use selenium <code>execute_script</code> directly</p>\n\n<pre><code>@browser.execute_script(\"window.scrollBy(0,document.body.scrollHeight)\")\nsleep 5\nlikes = @browser.elements(:xpath, \"//span[contains(@class, 'className')]\")\n</code></pre>\n"}], "owner": {"reputation": 357, "user_id": 4330018, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/AtTSq.jpg?s=128&g=1", "display_name": "Javier Bullrich", "link": "https://stackoverflow.com/users/4330018/javier-bullrich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 415, "favorite_count": 0, "accepted_answer_id": 50223918, "answer_count": 1, "score": 0, "last_activity_date": 1525763104, "creation_date": 1525728863, "last_edit_date": 1525734024, "question_id": 50222787, "link": "https://stackoverflow.com/questions/50222787/watir-not-finding-all-elements-with-a-class-name", "title": "Watir not finding all elements with a class name", "body": "<p>I'm trying to find all span elements which have a class in a \"feed\" website with Watir. </p>\n\n<p>The site loads more posts as I get to the bottom. \nI'm currently using the following code:</p>\n\n<pre><code># Go to the bottom of the page\nbrowser.driver.execute_script(\"window.scrollBy(0,document.body.scrollHeight)\")\nlikes = @browser.elements(:xpath, \"//*[contains(@class, 'className')]\")\n# I also tried with the following\nlikes = @browser.spans(:class =&gt; \"className\")\n</code></pre>\n\n<p>The element I'm searching follows the following style:</p>\n\n<pre><code>&lt;span class=\"random_value className \"&gt;Like&lt;/span&gt;\n</code></pre>\n\n<p>But when I'm doing a <code>likes.length</code> I got fewer elements (3) or none when there are, at least, 25 spans with the class <code>className</code>.</p>\n\n<p>Is there something wrong with my code?</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "rspec", "capybara"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 2, "last_activity_date": 1525731906, "creation_date": 1525731906, "answer_id": 50223318, "question_id": 50222543, "link": "https://stackoverflow.com/questions/50222543/ruby-selenium-capybara-not-timing-out/50223318#50223318", "title": "Ruby Selenium Capybara not timing out", "body": "<p>You don't mention what commands it's hanging on, but I'm going to guess it's in your <code>wait_for_ajax</code> method. If that's the case it's because you're using <code>Timeout.timeout</code> which is the most dangerous to use method Ruby provides.  The way it works is by starting a second thread which will then raise an exception in the original thread when the timeout occurs. The problem with that is the exception can occur anywhere in the original thread which means if the block inside the <code>timeout</code> call is doing anything non-trivial it can end up in a completely unrecoverable state (network comms, etc).  Basically <code>Timeout.timeout</code> can only ever be safely used with a VERY detailed knowledge of every little thing occurring it its block, which means it effectively should never be used around any calls to a third party library. Instead you should just use a timer and sleep if you need timeout.  Something like</p>\n\n<pre><code>def wait_for_ajax\n  start = Time.now\n  until page.evaluate_script('jQuery.active').zero? &amp;&amp; page.has_no_css?(\".k-loading-color\", wait: false) do\n    sleep 0.1\n    raise &lt;Some Error&gt; if (Time.now - start) &gt; Capybara.default_max_wait_time\n  end\nend\n</code></pre>\n\n<p>That being said you really shouldn't need <code>wait_for_ajax</code> with a useable UI and properly written tests.</p>\n\n<p>Additionally, by including <code>capybara/rspec</code> you've already set up for <code>reset_sessions</code> to be called after every test and for <code>Capybara::DSL</code> to be included into the types of tests it should be included into - <a href=\"https://github.com/teamcapybara/capybara/blob/master/lib/capybara/rspec.rb#L9\" rel=\"nofollow noreferrer\">https://github.com/teamcapybara/capybara/blob/master/lib/capybara/rspec.rb#L9</a> - so by adding your own <code>after</code> block you're just ending up calling <code>reset_sessions</code> twice after every test which is just a waste of time.</p>\n"}], "owner": {"reputation": 2096, "user_id": 2108990, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/886481640b3ab8f05cdf3be8c0efdad6?s=128&d=identicon&r=PG", "display_name": "Zack", "link": "https://stackoverflow.com/users/2108990/zack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525731906, "creation_date": 1525727770, "question_id": 50222543, "link": "https://stackoverflow.com/questions/50222543/ruby-selenium-capybara-not-timing-out", "title": "Ruby Selenium Capybara not timing out", "body": "<p>I'm having issues with my specs not timing out. Some of my specs are getting to a certain point and just hanging. I'm sure there is something wrong with one of the spec resulting in it being broken, what I can't figure out is why they are just hanging indefinitely when I have a timeout defined...</p>\n\n<pre><code># frozen-string-literal: true\nrequire 'rspec'\nrequire 'capybara/rspec'\nrequire 'capybara/dsl'\nrequire 'selenium-webdriver'\nrequire 'site_prism'\n\nDir[File.dirname(__FILE__) + '/page_objects/*/*.rb'].each do |page_object|\n  require page_object\nend\n\ndef wait_for_ajax\n  Timeout.timeout(Capybara.default_max_wait_time) do\n    loop until page.evaluate_script('jQuery.active').zero? &amp;&amp; page.has_no_css?(\".k-loading-color\")\n  end\nend\n\ndef whole_page\n  Capybara.current_session\nend\n\nCapybara.register_driver :selenium do |app|\n  Capybara::Selenium::Driver.new(app, browser: :chrome)\nend\n\nCapybara.default_driver = :selenium\nCapybara.app_host = #REDACTED\nCapybara.default_max_wait_time = 20\n\nRSpec.configure do |config|\n  config.before(:each) do\n    config.include Capybara::DSL\n  end\n\n  config.after(:each) do\n    Capybara.reset_sessions! \n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "google-api", "google-api-client"], "answers": [{"tags": [], "owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "is_accepted": false, "score": 0, "last_activity_date": 1525985211, "last_edit_date": 1525985211, "creation_date": 1525825065, "answer_id": 50243836, "question_id": 50221999, "link": "https://stackoverflow.com/questions/50221999/google-analytics-api-ruby-client-multiple-metrics/50243836#50243836", "title": "Google Analytics API ruby client - multiple metrics", "body": "<p>Here is my solution, together with a generic method for reporting Google Analytics data:</p>\n\n<p>This answer should be read in conjunction with <a href=\"https://developers.google.com/drive/v3/web/quickstart/ruby\" rel=\"nofollow noreferrer\">https://developers.google.com/drive/v3/web/quickstart/ruby</a></p>\n\n<pre><code>analytics = Google::Apis::AnalyticsreportingV4::AnalyticsReportingService.new\nanalytics.client_options.application_name = APPLICATION_NAME\nanalytics.authorization = authorize\n\ndef get_analytics_data( analytics,\n                        view_id,\n                        start_date: (Date.today + 1 - Date.today.wday) - 6, \n                        end_date: (Date.today + 1 - Date.today.wday),\n                        metrics: ['ga:sessions'],\n                        dimensions: [], \n                        order_bys: [],\n                        segments: nil, # array of hashes\n                        filter: nil,\n                        page_size: nil ) \n\n  get_reports_request_object = Google::Apis::AnalyticsreportingV4::GetReportsRequest.new\n\n  report_request_object = Google::Apis::AnalyticsreportingV4::ReportRequest.new\n\n  report_request_object.view_id = view_id\n\n  analytics_date_range_object = Google::Apis::AnalyticsreportingV4::DateRange.new\n  analytics_date_range_object.start_date = start_date\n  analytics_date_range_object.end_date = end_date\n\n  report_request_object.date_ranges = [analytics_date_range_object]\n\n#  report_request_metrics = []\n\n  report_request_object.metrics = []\n\n  metrics.each { |metric|\n    analytics_metric_object = Google::Apis::AnalyticsreportingV4::Metric.new\n    analytics_metric_object.expression = metric \n    report_request_object.metrics.push(analytics_metric_object) } \n\n#  report_request_object.metrics = report_request_metrics\n\n  unless dimensions.empty?\n\n     report_request_object.dimensions = []\n\n     dimensions.each { |dimension|\n        analytics_dimension_object = Google::Apis::AnalyticsreportingV4::Dimension.new\n        analytics_dimension_object.name = dimension\n        report_request_object.dimensions.push(analytics_dimension_object) }\n  end \n\n  unless segments.nil?\n\n    report_request_object.segments = []\n\n        analytics_segment_object = Google::Apis::AnalyticsreportingV4::Segment.new\n        analytics_dynamic_segment_object = Google::Apis::AnalyticsreportingV4::DynamicSegment.new\n        analytics_segment_definition_object = Google::Apis::AnalyticsreportingV4::SegmentDefinition.new\n        analytics_segment_filter_object = Google::Apis::AnalyticsreportingV4::SegmentFilter.new\n        analytics_simple_segment_object = Google::Apis::AnalyticsreportingV4::SimpleSegment.new\n        analytics_or_filters_for_segment_object = Google::Apis::AnalyticsreportingV4::OrFiltersForSegment.new         \n        analytics_segment_filter_clause_object = Google::Apis::AnalyticsreportingV4::SegmentFilterClause.new\n        analytics_segment_metric_filter_object = Google::Apis::AnalyticsreportingV4::SegmentMetricFilter.new\n\n        analytics_dimension_object = Google::Apis::AnalyticsreportingV4::Dimension.new\n        analytics_dimension_object.name = 'ga:segment'\n        report_request_object.dimensions.push(analytics_dimension_object)\n\n        analytics_or_filters_for_segment_object.segment_filter_clauses = []\n        analytics_simple_segment_object.or_filters_for_segment = []\n        analytics_segment_definition_object.segment_filters = []\n\n    segments.each { |segment|\n\n        analytics_segment_metric_filter_object.metric_name = segment[:metric_name]\n        analytics_segment_metric_filter_object.comparison_value = segment[:comparison_value]\n        analytics_segment_metric_filter_object.operator = segment[:operator]\n\n        analytics_segment_filter_clause_object.metric_filter = analytics_segment_metric_filter_object\n\n        analytics_or_filters_for_segment_object.segment_filter_clauses.push(analytics_segment_filter_clause_object)\n\n        analytics_simple_segment_object.or_filters_for_segment.push(analytics_or_filters_for_segment_object)\n\n        analytics_segment_filter_object.simple_segment = analytics_simple_segment_object\n\n        analytics_segment_definition_object.segment_filters.push(analytics_segment_filter_object)\n\n        analytics_dynamic_segment_object.name = segment[:name]\n        analytics_dynamic_segment_object.session_segment = analytics_segment_definition_object\n\n        analytics_segment_object.dynamic_segment = analytics_dynamic_segment_object \n\n        report_request_object.segments.push(analytics_segment_object) } \n  end\n\nunless order_bys.empty?\n\n report_request_object.order_bys = []\n\n order_bys.each { |orderby|\n    analytics_orderby_object = Google::Apis::AnalyticsreportingV4::OrderBy.new\n    analytics_orderby_object.field_name = orderby\n    analytics_orderby_object.sort_order = 'DESCENDING'\n    report_request_object.order_bys.push(analytics_orderby_object)}\nend\n\nunless filter.nil?\n  report_request_object.filters_expression = filter\nend\n\nunless page_size.nil?\n   report_request_object.page_size = page_size \nend\n\nget_reports_request_object.report_requests = [report_request_object]  \n\nresponse = analytics.batch_get_reports(get_reports_request_object)\nend\n</code></pre>\n\n<p>If using dimensions, you can report data like this:</p>\n\n<pre><code>response = get_analytics_data(analytics, VIEW_ID, metrics: ['ga:pageviews'], dimensions: ['ga:pagePath'], order_bys: ['ga:pageviews'], page_size: 25)\n\nresponse.reports.first.data.rows.each do |row|\n  puts row.dimensions\n  puts row.metrics.first.values.first.to_i\n  puts\nend\n</code></pre>\n"}], "owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 421, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525985211, "creation_date": 1525725127, "last_edit_date": 1525808564, "question_id": 50221999, "link": "https://stackoverflow.com/questions/50221999/google-analytics-api-ruby-client-multiple-metrics", "title": "Google Analytics API ruby client - multiple metrics", "body": "<p>I'm using the google API ruby client and I want to implement some more complex analytics queries such as suggested in this document</p>\n\n<p><a href=\"https://developers.google.com/analytics/devguides/reporting/core/v3/common-queries\" rel=\"nofollow noreferrer\">https://developers.google.com/analytics/devguides/reporting/core/v3/common-queries</a></p>\n\n<p>This document suggests that metrics can be supplied as a comma delimited string of multiple metrics but the API client only accepts an expression.</p>\n\n<p>How can I query on multiple metrics in a single query? The ruby client appears only to accept an expression which generally consists of a single metric such as sessions or pageviews like this:</p>\n\n<pre><code>metric = Google::Apis::AnalyticsreportingV4::Metric.new(expression: 'ga:sessions')\n</code></pre>\n\n<p>If I remove \"expression\" and enter a list of metrics I just get an error.</p>\n\n<blockquote>\n  <p>Invalid value 'ga:sessions;ga:pageviews' for metric parameter.</p>\n</blockquote>\n"}, {"tags": ["ruby-on-rails", "ruby", "minitest", "fixtures"], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 6787158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a5e58cf9b7a875356b2c58e5376861?s=128&d=identicon&r=PG&f=1", "display_name": "adkra", "link": "https://stackoverflow.com/users/6787158/adkra"}, "edited": false, "score": 1, "creation_date": 1525759792, "post_id": 50225075, "comment_id": 87471120, "body": "That&#39;s amazing, as you suggested I added: <code>three:</code> in <code>test&#47;fixtures&#47;surveys.yml</code> and suddenly it worked. Perhaps, because of polymorphic association there need to be one on one coverage."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": true, "score": 5, "last_activity_date": 1525748397, "last_edit_date": 1525748397, "creation_date": 1525747787, "answer_id": 50225075, "question_id": 50221962, "link": "https://stackoverflow.com/questions/50221962/rails-fixtures-and-namespace-model-activerecordfixturefixtureerror/50225075#50225075", "title": "Rails fixtures and namespace model - ActiveRecord::Fixture::FixtureError", "body": "<p>Make sure your database schema has not changed and that you didn't remove or rename the column or table in your database.  Whenever you change your schema and run your migrations, be sure to run this before running your tests:</p>\n\n<pre><code>rake db:test:prepare\n</code></pre>\n\n<p>Then try running your tests again.  If you get the same error, it indicates your test database is missing that column.  Check your migrations to make sure.</p>\n\n<p>Also, do you think maybe you need <code>three:</code> in <code>test/fixtures/surveys.yml</code> ?</p>\n"}], "owner": {"reputation": 53, "user_id": 6787158, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c3a5e58cf9b7a875356b2c58e5376861?s=128&d=identicon&r=PG&f=1", "display_name": "adkra", "link": "https://stackoverflow.com/users/6787158/adkra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 635, "favorite_count": 0, "accepted_answer_id": 50225075, "answer_count": 1, "score": 5, "last_activity_date": 1525748397, "creation_date": 1525724966, "question_id": 50221962, "link": "https://stackoverflow.com/questions/50221962/rails-fixtures-and-namespace-model-activerecordfixturefixtureerror", "title": "Rails fixtures and namespace model - ActiveRecord::Fixture::FixtureError", "body": "<p>in an app I work on test suite is done with Minitest and fixtures and I faced such a problem, I can't solve, neither find a solution.</p>\n\n<p>I have a model <code>Survey</code> and fixtures for it <code>test/fixtures/surveys.yml</code>:</p>\n\n<pre><code>one:\n  user: admin\n  name: Survey one\n  description: This is survey one\n  company: university\n  review_type: 1\n\ntwo:\n  user: admin\n  name: Survey two\n  description: This is survey two\n  company: university\n</code></pre>\n\n<p>also, I have namespace <code>surveys</code> and there a model for question - <code>Surveys::Question</code> (with polymorphic association), which has corresponding fixtures <code>test/fixtures/surveys/questions.yml</code>:</p>\n\n<pre><code>one:\n  sentence: Survey question one?\n  display_order: 1\n  question_type: 0\n  questionable: one (Survey)\n\ntwo:\n  sentence: Survey question two?\n  display_order: 2\n  question_type: 1\n  questionable: one (Survey)\n</code></pre>\n\n<p>So far so good, things work. But whenever I try to add another <code>questions</code> definition to fixtures, let's say:</p>\n\n<pre><code>three:\n  sentence: Survey question three?\n  display_order: 3\n  question_type: 2\n  questionable: one (Survey)\n</code></pre>\n\n<p>an error is raised: <code>ActiveRecord::Fixture::FixtureError: table \"surveys\" has no column named \"sentence\"</code></p>\n\n<p>I totally can't follow up, why suddenly <code>ActiveRecord::Fixtures</code> fails to follow up.</p>\n\n<p>I would be grateful for any suggestion on this.</p>\n"}, {"tags": ["ruby", "binding", "swig", "ff"], "answers": [{"tags": [], "owner": {"reputation": 81653, "user_id": 168175, "user_type": "moderator", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/qxeUf.jpg?s=128&g=1", "display_name": "Flexo", "link": "https://stackoverflow.com/users/168175/flexo"}, "is_accepted": false, "score": 0, "last_activity_date": 1526501273, "creation_date": 1526501273, "answer_id": 50379143, "question_id": 50221476, "link": "https://stackoverflow.com/questions/50221476/how-to-properly-include-library-path-and-other-flags-in-extconf-rb-for-swig/50379143#50379143", "title": "How to properly include library path and other flags in extconf.rb for SWIG?", "body": "<p>Knowing almost nothing about ruby or the build system here it seems likely you want to change it to be this:</p>\n\n<pre><code>require 'mkmf'\nsystem('swig -c++ -ruby example.i') or abort\n$CXXFLAGS += \" -I/usr/local/gr/include \"\n$LDFLAGS += \" -L/usr/local/gr/lib -lGR -lm -rpath,/usr/local/gr/lib \"\n\ncreate_makefile('example')\n</code></pre>\n\n<p>Because typically build systems split compiling and linking into two separate phases, with compile flags coming from variables named <code>CCFLAGS</code>/<code>CXXFLAGS</code> (for C and C++ compilers respectively) and linker flags coming from <code>LDFLAGS</code> by convention. </p>\n\n<p>The error message you see from clang indicates that it's being called as a compiler and telling you that when just compiling (and not linking) it ignores the extra options you have given it that only apply to linking.</p>\n\n<p>You may or may not need to remove the <code>-Wl</code> part of the argument as I've done here - the decision for that depends on whether you're calling a linker (/usr/bin/ld normally) directly, or using clang/gcc as a linker.</p>\n"}], "owner": {"reputation": 700, "user_id": 5668464, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/caaa9a33119f603eebf2ace9844c61c2?s=128&d=identicon&r=PG&f=1", "display_name": "ArafatK", "link": "https://stackoverflow.com/users/5668464/arafatk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 350, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1526501273, "creation_date": 1525722727, "question_id": 50221476, "link": "https://stackoverflow.com/questions/50221476/how-to-properly-include-library-path-and-other-flags-in-extconf-rb-for-swig", "title": "How to properly include library path and other flags in extconf.rb for SWIG?", "body": "<p>Suppose I were to compile a C file with command    </p>\n\n<pre><code>g++ a.cpp  -I/usr/local/gr/include -L/usr/local/gr/lib -lGR -lm -Wl,-rpath,/usr/local/gr/lib\n</code></pre>\n\n<p>How would I define the extconf.rb file in SWIG so that it doesn't ignore the linker paths?<br>\nThis is my current extconf.rb file.    </p>\n\n<pre><code>require 'mkmf'\nsystem('swig -c++ -ruby example.i') or abort\n$CXXFLAGS += \" -I/usr/local/gr/include -L/usr/local/gr/lib -lGR -lm -Wl,-rpath,/usr/local/gr/lib \"\ncreate_makefile('example')\n</code></pre>\n\n<p>It ignores the linker flags with the error </p>\n\n<pre><code>clang: warning: -lGR: 'linker' input unused [-Wunused-command-line-argument]\nclang: warning: -lm: 'linker' input unused [-Wunused-command-line-argument]\nclang: warning: -Wl,-rpath,/usr/local/gr/lib: 'linker' input unused [-Wunused-command-line-argument]\nclang: warning: argument unused during compilation: '-L/usr/local/gr/lib' [-Wunused-command-line-argument]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "json", "ruby", "rspec"], "comments": [{"owner": {"reputation": 18856, "user_id": 1359650, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/dffc4318ac93e728a26c8e8b51b4eb37?s=128&d=identicon&r=PG", "display_name": "jvillian", "link": "https://stackoverflow.com/users/1359650/jvillian"}, "edited": false, "score": 4, "creation_date": 1525723004, "post_id": 50221474, "comment_id": 87460420, "body": "Because <code>to_json</code> returns a string, not a hash? See the <a href=\"https://apidock.com/rails/ActiveRecord/Serialization/to_json\" rel=\"nofollow noreferrer\">docs</a>."}], "answers": [{"tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": true, "score": 4, "last_activity_date": 1525726139, "creation_date": 1525726139, "answer_id": 50222227, "question_id": 50221474, "link": "https://stackoverflow.com/questions/50221474/why-is-ruby-rails-to-json-returning-string-instead-of-hash/50222227#50222227", "title": "Why is ruby rails to_json returning string instead of hash?", "body": "<p>Don't manually convert the params to JSON. RSpec does it automatically for you and expects a hash of parameters and not a string.</p>\n\n<pre><code>let(:valid_credentials) do\n  { \n    email: user.email, \n    password: user.password \n  }\nend\n\nlet(:invalid_credentials) do \n  {\n    email: Faker::Internet.email,\n    password: Faker::Internet.password\n  }\nend\n</code></pre>\n\n<p>Additionally for a new project I would skip controller tests and <a href=\"https://everydayrails.com/2016/08/29/replace-rspec-controller-tests.html\" rel=\"nofollow noreferrer\">go straight for request specs which are more future proof</a>. </p>\n"}], "owner": {"reputation": 106, "user_id": 4012872, "user_type": "registered", "profile_image": "https://graph.facebook.com/684643650/picture?type=large", "display_name": "Davie Overman", "link": "https://stackoverflow.com/users/4012872/davie-overman"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 551, "favorite_count": 0, "accepted_answer_id": 50222227, "answer_count": 1, "score": 0, "last_activity_date": 1525726139, "creation_date": 1525722719, "question_id": 50221474, "link": "https://stackoverflow.com/questions/50221474/why-is-ruby-rails-to-json-returning-string-instead-of-hash", "title": "Why is ruby rails to_json returning string instead of hash?", "body": "<p>I am following a tutorial of building a JSON api using ruby version 2.3.1 and rails version 5.0.7.  The tutorial is located at <a href=\"https://scotch.io/tutorials/build-a-restful-json-api-with-rails-5-part-two\" rel=\"nofollow noreferrer\">https://scotch.io/tutorials/build-a-restful-json-api-with-rails-5-part-two</a> When running RSpec tests, I get:</p>\n\n<p>Failures:</p>\n\n<p>1) AuthenticationController POST /auth/login when request is valid returns an authentication token\n     Failure/Error: before { post 'auth/login', params: valid_credentials, headers: headers }</p>\n\n<pre><code> NoMethodError:\n   undefined method `symbolize_keys' for \"{\\\"email\\\":\\\"foo@bar.com\\\",\\\"password\\\":\\\"foobar\\\"}\":String\n # ./spec/controllers/authentication_controller_spec.rb:32:in `block (4 levels) in &lt;top (required)&gt;'\n # ./spec/rails_helper.rb:85:in `block (3 levels) in &lt;top (required)&gt;'\n # ./spec/rails_helper.rb:84:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>2) AuthenticationController POST /auth/login When request is invalid returns a failure message\n     Failure/Error: before { post '/auth/login', params: invalid_credentials, headers: headers }</p>\n\n<pre><code> NoMethodError:\n   undefined method `symbolize_keys' for #&lt;String:0x007fcb133e88f8&gt;\n # ./spec/controllers/authentication_controller_spec.rb:41:in `block (4 levels) in &lt;top (required)&gt;'\n # ./spec/rails_helper.rb:85:in `block (3 levels) in &lt;top (required)&gt;'\n # ./spec/rails_helper.rb:84:in `block (2 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>The AuthenticationControllerSpec to which it refers to is as follows:</p>\n\n<pre><code>    require 'rails_helper'\n    RSpec.describe AuthenticationController, type: :controller do\n      # Authentication test suite\n      describe 'POST /auth/login' do\n        # create test user\n        let!(:user) { create(:user) }\n\n        # set headers for authorization\n        let(:headers) { valid_headers.except('Authorization')  }\n\n        # set test valid and invalid credentials\n        let(:valid_credentials) do\n           { \n              email: user.email, \n              password: user.password \n           }.to_json \n        end # let(:valid_credentials) do \n\n        let(:invalid_credentials) do \n          {\n             email: Faker::Internet.email,\n             password: Faker::Internet.password\n          }.to_json\n        end # let(:invalid_credentials) do \n\n        # set request.headers to our custom headers\n        # before { allow(request).to receive(:headers).and_return(headers) }\n\n        # returns auth token when request is valid\n        context 'when request is valid' do\n          before { post 'auth/login', params: valid_credentials, headers: headers }\n\n          it 'returns an authentication token' do\n            expect(json['auth_token']).not_to be_nil\n          end #  it 'returns an authentication token' do\nend #     context 'when request is valid' do\n\n        # returns failure message when request is invalid\n        context 'When request is invalid' do\n          before { post '/auth/login', params: invalid_credentials, headers: headers }\n\n          it 'returns a failure message' do\n            expect(json['message']).to match(/Invalid credentials/)\n          end # it 'returns a failure message' do\n        end # context 'When request is invalid' do\n\n\n      end # describe 'POST /auth/login' do\n\n    end # RSpec.describe AuthenticationController, type: :controller do\n</code></pre>\n\n<p>I  think the only other relevant file is this module:</p>\n\n<pre><code>    module RequestSpecHelper\n      # Parse JSON response to ruby hash\n      def json\n        JSON.parse(response.body)\n      end\n    end\n</code></pre>\n\n<p>Thanks for any and all assistance.</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1525719791, "post_id": 50220726, "comment_id": 87458842, "body": "Indeed. that would work. Thank you. I also figured out how to pass in an optional array on initialization. Will add that as a separate answer."}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": false, "score": 1, "last_activity_date": 1525719312, "creation_date": 1525719312, "answer_id": 50220726, "question_id": 50220500, "link": "https://stackoverflow.com/questions/50220500/create-a-fixed-length-fifo-out-of-an-array-in-ruby/50220726#50220726", "title": "Create a fixed-length FIFO out of an Array in Ruby", "body": "<p>You probably looking for <a href=\"https://ruby-doc.org/core-2.5.0/Array.html#method-i-replace\" rel=\"nofollow noreferrer\">Array#replace</a> method.</p>\n\n<blockquote>\n  <p>Replaces the contents of self with the contents of other_ary, truncating or expanding if necessary.</p>\n</blockquote>\n\n<pre><code>a = FIFOList.new(5)\na.push(10) # now the content is [10]\na.replace([1,2,3,4,5]) # =&gt; now the content is [1,2,3,4,5]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 6706, "user_id": 569374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/948f8031e9110f7fc6d53ccb9abddb5f?s=128&d=identicon&r=PG", "display_name": "Michael Papile", "link": "https://stackoverflow.com/users/569374/michael-papile"}, "edited": false, "score": 0, "creation_date": 1525720445, "post_id": 50220853, "comment_id": 87459185, "body": "That&#39;s not going to do what you think it is. Calling super with the length is going to populate the array with <code>l * nil</code> So your if length check will always be true, and you will initially shift nils"}, {"owner": {"reputation": 6706, "user_id": 569374, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/948f8031e9110f7fc6d53ccb9abddb5f?s=128&d=identicon&r=PG", "display_name": "Michael Papile", "link": "https://stackoverflow.com/users/569374/michael-papile"}, "edited": false, "score": 0, "creation_date": 1525720537, "post_id": 50220853, "comment_id": 87459240, "body": "Also, remove the reader and writers as they are redundant as are the calls to <code>self</code>. The instance variable should be <code>@fifo_length</code> as we do not capitalize instance variables in Ruby as a style."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1525723822, "post_id": 50220853, "comment_id": 87460822, "body": "<code>init_value.class.to_s == &quot;Array&quot;</code> is not idiomatic Ruby. <code>init_value.is_a?(Array)</code> would be more idiomatic, although duck typing is preferable to explicit type checking,"}, {"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1525737587, "post_id": 50220853, "comment_id": 87465504, "body": "Thanks for the suggestions. I will incorporate them. As is obvious, I don&#39;t do Ruby every day ;-)."}], "tags": [], "owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "is_accepted": false, "score": 0, "last_activity_date": 1525719897, "creation_date": 1525719897, "answer_id": 50220853, "question_id": 50220500, "link": "https://stackoverflow.com/questions/50220500/create-a-fixed-length-fifo-out-of-an-array-in-ruby/50220853#50220853", "title": "Create a fixed-length FIFO out of an Array in Ruby", "body": "<p>I still wish I could do straight assignment and have it work, but this code does allow me to optionally initialize.</p>\n\n<pre><code>class FIFOList &lt; Array\n  attr_reader :FIFO_length\n  attr_writer :FIFO_length\n\n  def initialize(l, init_value = nil)\n    if init_value != nil &amp;&amp; init_value.class.to_s == \"Array\" &amp;&amp; init_value.length &lt;= l then\n      super(init_value)\n      @FIFO_length = l\n    elsif init_value == nil\n      super()\n      @FIFO_length = l\n    else\n      raise \"optional 2nd parameter required to be an Array\"\n    end\n  end\n\n  def push(element)\n    super(element)\n    self.shift if self.length &gt; @FIFO_length #truncate the FIFO to the defined length\n  end\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "edited": false, "score": 0, "creation_date": 1525737935, "post_id": 50221627, "comment_id": 87465571, "body": "I like this solution the best. It&#39;s what I had in mind all along... just didn&#39;t command the nuances of the language well enough to figure it out on my own. Thanks!"}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 3, "last_activity_date": 1525724810, "last_edit_date": 1525724810, "creation_date": 1525723402, "answer_id": 50221627, "question_id": 50220500, "link": "https://stackoverflow.com/questions/50220500/create-a-fixed-length-fifo-out-of-an-array-in-ruby/50221627#50221627", "title": "Create a fixed-length FIFO out of an Array in Ruby", "body": "<p>You already came up with your own solution, but here's mine:</p>\n\n<pre><code>class FIFOList &lt; Array\n  attr_reader :fifo_length\n\n  def initialize(len, arr=[])\n    arr = arr[-len, len] if arr.size &gt; len\n    super(arr)\n    @fifo_length = len\n  end\n\n  def push(*args)\n    if args.size &gt; fifo_length\n      return replace(args[-fifo_length, fifo_length])\n    end\n\n    num_to_shift = (size + args.size) - fifo_length\n    shift(num_to_shift) unless num_to_shift &lt; 0\n    super(*args)\n  end\nend\n\na = FIFOList.new(5, [\"a1\", \"a2\", \"a3\"])\np a # =&gt; [\"a1\", \"a2\", \"a3\"]\n\np a.push(\"b1\") # =&gt; [\"a1\", \"a2\", \"a3\", \"b1\"]\np a.push(\"c1\", \"c2\", \"c3\") # =&gt; [\"a3\", \"b1\", \"c1\", \"c2\", \"c3\"]\np a.push(\"d1\", \"d2\", \"d3\", \"d4\", \"d5\", \"d6\", \"d7\") # =&gt;  [\"d3\", \"d4\", \"d5\", \"d6\", \"d7\"]\n</code></pre>\n\n<p>Note that the constructor will automatically cut the initial array if it's too long, and <code>FIFOList#push</code> mirrors <code>Array#push</code> in that it takes any number of arguments and always returns <code>self</code> (and works correctly even if given too many arguments).</p>\n\n<p>Though some would object to monkey-patching Array, you could also add an <code>Array#to_fifo</code> convenience method that creates a FIFOList:</p>\n\n<pre><code>class Array\n  def to_fifo\n    FIFOList.new(size, self)\n  end\nend\n\na = [1,2,3,4,5].to_fifo\np a.class # =&gt; FIFOList\n</code></pre>\n\n<p>You can see it working on repl.it: <a href=\"https://repl.it/@jrunning/WillingJoyfulAttributes\" rel=\"nofollow noreferrer\">https://repl.it/@jrunning/WillingJoyfulAttributes</a></p>\n"}, {"comments": [{"owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "edited": false, "score": 0, "creation_date": 1525726205, "post_id": 50221855, "comment_id": 87461837, "body": "I have edited the answer to add a <code>self</code> method that does the trick of initializing with an array."}], "tags": [], "owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "is_accepted": false, "score": 3, "last_activity_date": 1525738651, "last_edit_date": 1525738651, "creation_date": 1525724486, "answer_id": 50221855, "question_id": 50220500, "link": "https://stackoverflow.com/questions/50220500/create-a-fixed-length-fifo-out-of-an-array-in-ruby/50221855#50221855", "title": "Create a fixed-length FIFO out of an Array in Ruby", "body": "<p>You can do something very similar without inheriting from <code>Array</code>, but using <strong>composition</strong> instead: </p>\n\n<pre><code>class FIFOList\n  attr_reader :size, :arr\n\n  def self.[](*values)\n    obj = self.new(values.size)\n    obj.arr = values\n    obj\n  end\n\n  def initialize(size)\n    @size = size\n    @arr  = Array.new\n  end\n\n  def push(element)\n    arr.push(element)\n    arr.shift if arr.length &gt; size\n    arr\n  end\nend\n</code></pre>\n\n<p>Then you can use it in a similar way:</p>\n\n<pre><code>a = FIFOList.new(3)\n# =&gt; #&lt;FIFOList:0x00007ffe87071150 @size=3, @arr=[nil, nil, nil]&gt;\na.push 1\n# =&gt; [nil, nil, 1]\na.push 2\n# =&gt; [nil, 1, 2]\na.push 3\n# =&gt; [1, 2, 3]\na.push 4\n# =&gt; [2, 3, 4]\na.arr\n# =&gt; [2, 3, 4]\n</code></pre>\n\n<p>Or if you want to use it without using <code>push</code> for each value:</p>\n\n<pre><code>a = FIFOList[1,2,3]\n# =&gt; #&lt;FIFOList:0x00007feea9015d70 @size=3, @arr=[1, 2, 3]&gt;\na.push 4\n# =&gt; [2, 3, 4]\n</code></pre>\n"}], "owner": {"reputation": 409, "user_id": 8116088, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/118e7985cfe1aa9a8dcc0c149d22f6dc?s=128&d=identicon&r=PG&f=1", "display_name": "user8116088", "link": "https://stackoverflow.com/users/8116088/user8116088"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 456, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1525738651, "creation_date": 1525718214, "question_id": 50220500, "link": "https://stackoverflow.com/questions/50220500/create-a-fixed-length-fifo-out-of-an-array-in-ruby", "title": "Create a fixed-length FIFO out of an Array in Ruby", "body": "<p>I need a FIFO list of a fixed size that can be set arbitrarily on object creation. An array works, but I'm tired of checking its size and popping off the oldest element every time I push a new value. I know people have said that subclassing Array is a bad idea, but I still want to do it as it's the most elegant solution to my need.</p>\n\n<p>Here's my code so far.</p>\n\n<pre><code>class FIFOList &lt; Array\n  attr_reader :FIFO_length\n  attr_writer :FIFO_length\n\n  def initialize(l)\n    super()\n    @FIFO_length = l\n  end\n\n  def push(element)\n    super(element)\n    self.shift if self.length &gt; @FIFO_length\n\nend\n</code></pre>\n\n<p>With this object, I can define a 25 element FIFO like so:</p>\n\n<pre><code>a = FIFOList.new(25)\n</code></pre>\n\n<p>and push elements on it all day long and always have the most recent 25. As long as I'm pushing elements on one at a time (a.push()), all is good. However, I'd like to be able to initialize a new FIFO with an array, just like one can with a native Array object.</p>\n\n<pre><code>a = [1,2,3,4,5]\n</code></pre>\n\n<p>Which yields an array a, of 5 elements. But that's not how it's working and I'm not sure what to do about it. Here's an IRB session showing the problem:</p>\n\n<pre><code>irb(main):008:0* a = FIFOList.new(5)\n=&gt; []\nirb(main):009:0&gt; a.class\n=&gt; FIFOList\nirb(main):010:0&gt; a = [1,2,3,4,5]\n=&gt; [1, 2, 3, 4, 5]\nirb(main):011:0&gt; a.class\n=&gt; Array\n</code></pre>\n\n<p>So instead of the static array getting assigned as the \"content\" of the FIFOList object, \"a\" simply becomes a reference to the new static array. That's not the behavior I want. From what reading I've done it seems like maybe I need to add methods to my FIFOList class to override [] and possibly []=, but I'm not sure how to do that. If that's not the right approach, I'd be happy with a \"load\" method that takes an array as a parameter and does the magic internally, but I'm not sure how to \"load\" the passed values into the self. Can someone help?</p>\n"}, {"tags": ["ruby", "workflow", "state-machine"], "answers": [{"tags": [], "owner": {"reputation": 745, "user_id": 3033467, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8a33988a3dc0d009236304ff4ad8d615?s=128&d=identicon&r=PG&f=1", "display_name": "user3033467", "link": "https://stackoverflow.com/users/3033467/user3033467"}, "is_accepted": false, "score": 0, "last_activity_date": 1525712262, "creation_date": 1525712262, "answer_id": 50219101, "question_id": 50219023, "link": "https://stackoverflow.com/questions/50219023/how-can-dynamically-verify-and-execute-a-method/50219101#50219101", "title": "how can dynamically verify and execute a method?", "body": "<p>Not sure I understand the question...<br>\nIs this what you want?</p>\n\n<pre><code>def do(name)\n  if respond_to?(\"#{name}!\") &amp;&amp; send(\"can_#{name}?\")\n    send(\"#{name}!\")\n  else\n    'Sorry...cant do that action...'\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 21, "user_id": 3063573, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/143804e41bf1ebbb8b3447d07a435121?s=128&d=identicon&r=PG", "display_name": "cesarmarinhorj", "link": "https://stackoverflow.com/users/3063573/cesarmarinhorj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 28, "favorite_count": 0, "closed_date": 1525713018, "answer_count": 1, "score": 0, "last_activity_date": 1568742772, "creation_date": 1525711997, "last_edit_date": 1568742772, "question_id": 50219023, "link": "https://stackoverflow.com/questions/50219023/how-can-dynamically-verify-and-execute-a-method", "closed_reason": "Duplicate", "title": "how can dynamically verify and execute a method?", "body": "<p>Using workflow is amazing! it defines states and new methods as \"can_submit?\" and so \"submit!\"</p>\n\n<p>there is a way to verify an action and so execute it?</p>\n\n<pre><code>def do(name)\n    canDoIt = eval \"self.can_\" + name + \"?\" \n    canDoIt ? eval \"self.\" + name + \"!\" : \"Sorry...cant do that action...\"\nend\n</code></pre>\n\n<p>how could be done?\nthanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "rake-task", "rakefile"], "comments": [{"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1525712914, "post_id": 50218911, "comment_id": 87455468, "body": "@theTinMan My apologies if mentioning you is inappropriate. I was informed to seek your hands for help because your answers tend to teach. Can you help me with this?"}], "answers": [{"comments": [{"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1525740155, "post_id": 50222528, "comment_id": 87466037, "body": "Thank you. That very Object Oriented. I have an error which is <code>NoMethodError: undefined method &#39;errors&#39; for []:Array</code> and it comes from the line <code>a.string_to_users(&quot;a,b,c,d&quot;)</code>. I passed in some real data there in a comma separated list but thats the error I get."}, {"owner": {"reputation": 13349, "user_id": 224334, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bfeafb6026cbf6128309744296c6d726?s=128&d=identicon&r=PG", "display_name": "RyanWilcox", "link": "https://stackoverflow.com/users/224334/ryanwilcox"}, "reply_to_user": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1525742931, "post_id": 50222528, "comment_id": 87466571, "body": "Well is created in the line user = User.create ... it should be returning a single record, but  when you run it looks like Ruby is thinking it&#39;s an array. Fire up the debugger and check what the value of user really is, maybe that will give you some insight."}, {"owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "edited": false, "score": 0, "creation_date": 1525769887, "post_id": 50222528, "comment_id": 87476641, "body": "Yes it definitely returns more than a single record to fill by database from csv file."}], "tags": [], "owner": {"reputation": 13349, "user_id": 224334, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/bfeafb6026cbf6128309744296c6d726?s=128&d=identicon&r=PG", "display_name": "RyanWilcox", "link": "https://stackoverflow.com/users/224334/ryanwilcox"}, "is_accepted": true, "score": 2, "last_activity_date": 1525727689, "creation_date": 1525727689, "answer_id": 50222528, "question_id": 50218911, "link": "https://stackoverflow.com/questions/50218911/writing-unit-test-for-a-rake-task/50222528#50222528", "title": "writing unit test for a rake task", "body": "<p>You've actually done the good thing here about keeping all of your task logic in a library file outside rake. I'd go a little further here...</p>\n\n<pre><code>require 'csv_importer/engine'\n\nclass WebImport\n  def initialize(url)\n    @url = url\n  end\n\n  def call\n    url = 'http://blablabla/people.csv'\n    csv_string = open(url).read.force_encoding('UTF-8')\n\n    string_to_users(csv_string)\n end\n\n def string_to_users(csv_string)\n    counter = 0\n    duplicate_counter = 0\n    ....\n end\nend\n</code></pre>\n\n<p>See here that we're removed how we call our method (we don't care if it's Rake or Ruby calling our method) AND potentially separated how we get our data.</p>\n\n<p>Next, I would write my test like the following:</p>\n\n<pre><code>test 'override_application' do\n  a = WebImport.new(url: 'http://blablabla/people.csv')\n\n  a.string_to_users(\"a,b,c,d,e\")  # &lt;-- a string you saved from some manual run, or that contains maybe a sample record with their exact format\n  assert_equal Users.count, 42\nend\n</code></pre>\n\n<p>Given that you've now seperated:</p>\n\n<ul>\n<li>how you call your code, because it's away from Rake in a separate library/module</li>\n<li>how your code gets it's data (normally being provided data by <code>call</code>... but you can insert data itself here)</li>\n</ul>\n\n<p>Then you should be all set to go with your test driven design!</p>\n"}], "owner": {"reputation": 1560, "user_id": 5614748, "user_type": "registered", "accept_rate": 68, "profile_image": "https://graph.facebook.com/10153324566173505/picture?type=large", "display_name": "Afolabi Olaoluwa Akinwumi", "link": "https://stackoverflow.com/users/5614748/afolabi-olaoluwa-akinwumi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 245, "favorite_count": 0, "accepted_answer_id": 50222528, "answer_count": 1, "score": 0, "last_activity_date": 1525727689, "creation_date": 1525711508, "question_id": 50218911, "link": "https://stackoverflow.com/questions/50218911/writing-unit-test-for-a-rake-task", "title": "writing unit test for a rake task", "body": "<p>I have a simple rails application where I import data from csv into my rails app which is functioning properly, but I have no idea where to start with testing this rake task, as well as where in a modular rails app. Any help would be appreciated. Thanks!</p>\n\n<p><strong>csv_importer.task</strong></p>\n\n<pre><code>require 'csv_importer/engine'\n\ntask users: :environment do\n  desc 'Import users from csv'\n\n  WebImport.new(url: 'http://blablabla/people.csv').call\nend\n</code></pre>\n\n<p><strong>csv_importer.rb</strong></p>\n\n<pre><code>require 'csv_importer/engine'\n\nclass WebImport\n  def initialize(url)\n    @url = url\n  end\n\n  def call\n    url = 'http://blablabla/people.csv'\n    # I forced encoding so avoid UndefinedConversionError \"\\xC3\" from ASCII-8BIT to UTF-8\n    csv_string = open(url).read.force_encoding('UTF-8')\n    counter = 0\n    duplicate_counter = 0\n\n    user = []\n    CSV.parse(csv_string, headers: true, header_converters: :symbol) do |row|\n      next unless row[:name].present? &amp;&amp; row[:email_address].present?\n      user = CsvImporter::User.create row.to_h\n      if user.persisted?\n        counter += 1\n      else\n        duplicate_counter += 1\n      end\n    end\n    p \"Email duplicate record: #{user.email_address} - #{user.errors.full_messages.join(',')}\" if user.errors.any?\n\n    p \"Imported #{counter} users, #{duplicate_counter} duplicate rows ain't added in total\"\n  end\nend\n</code></pre>\n\n<p><strong>What I have done:</strong></p>\n\n<p><strong>csv_importer_test.rb</strong></p>\n\n<pre><code>require 'test_helper'\nrequire 'rake'\n\nclass CsvImporter::Test &lt; ActiveSupport::TestCase\n  test 'truth' do\n    assert_kind_of Module, CsvImporter\n  end\n\n  test 'override_application' do\n    @rake = Rake::Application.new\n    Rake.application = @rake\n    assert_equal @rake, Rake.application\n  end\n\n  test '' do\n    # something here\n  end\nend\n</code></pre>\n\n<p>This works fine and fills my database. How do I write TestCase to capture this solution?</p>\n"}, {"tags": ["ruby", "ringcentral", "ringout", "caller-id"], "answers": [{"tags": [], "owner": {"reputation": 11161, "user_id": 1908967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vPwiV.jpg?s=128&g=1", "display_name": "Grokify", "link": "https://stackoverflow.com/users/1908967/grokify"}, "is_accepted": true, "score": 2, "last_activity_date": 1525758625, "last_edit_date": 1525758625, "creation_date": 1525711083, "answer_id": 50218809, "question_id": 50218436, "link": "https://stackoverflow.com/questions/50218436/is-it-possible-to-set-the-caller-id-cid-clid-to-blocked-in-ringout/50218809#50218809", "title": "Is it possible to set the caller id (CID/CLID) to Blocked in RingOut?", "body": "<p>You can accomplish this by setting the default RingOut Caller ID setting to <code>Blocked</code> for the extension and then making a RingOut call without an explicit <code>callerId</code> value so the default value will be used. You need to update the extension Caller ID setting separately from and before calling the the RingOut API. It's not currently possible set Caller ID to blocked in the RingOut API call itself.</p>\n\n<p>To set the caller ID to <code>Blocked</code> in an account, use the Update Caller ID API:</p>\n\n<p>API Reference: <a href=\"https://developer.ringcentral.com/api-docs/latest/index.html#!#RefUpdateCallerId\" rel=\"nofollow noreferrer\">https://developer.ringcentral.com/api-docs/latest/index.html#!#RefUpdateCallerId</a></p>\n\n<p>Here are some examples using HTTP and the Ruby SDK:</p>\n\n<p><strong>Update Caller ID API via HTTP</strong></p>\n\n<pre><code>PUT /restapi/v1.0/account/~/extension/~/caller-id\nAuthorization: Bearer &lt;myAccessToken&gt;\n\n{\n  \"byFeature\": [\n    {\n      \"feature\": \"RingOut\",\n      \"callerId\": {\n        \"type\": \"Blocked\"\n      }\n    }\n  ]\n}\n</code></pre>\n\n<p><strong>Update Caller ID API via Ruby SDK</strong></p>\n\n<p>Using the <a href=\"https://github.com/ringcentral/ringcentral-ruby\" rel=\"nofollow noreferrer\"><code>ringcentral-ruby</code> SDK</a>:</p>\n\n<pre><code>rc.put('/restapi/v1.0/account/~/extension/~/caller-id', payload: {\n  byFeature: [\n    {\n      feature: \"RingOut\",\n      callerId: {\n        type: \"Blocked\"\n      }\n    }\n  ]\n})\n</code></pre>\n\n<p><strong>Update Caller ID via Web UI</strong></p>\n\n<p>You can also update this setting using the Online Account Portal (<a href=\"https://service.ringcentral.com\" rel=\"nofollow noreferrer\">https://service.ringcentral.com</a>):</p>\n\n<p><code>Settings</code> > <code>Outbound Calls/Faxes</code> > <code>Caller ID</code> > <code>By Feature</code> > <code>RingOut from Web</code> > <code>Edit</code></p>\n\n<p><a href=\"https://i.stack.imgur.com/TwxmH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TwxmH.png\" alt=\"RingCentral Update Caller ID\"></a></p>\n\n<p><strong>Making the RingOut Call</strong></p>\n\n<p>When you make the RingOut call, simply omit the <code>callerId</code> property, and it will use the blocked value.</p>\n"}], "owner": {"reputation": 11161, "user_id": 1908967, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/vPwiV.jpg?s=128&g=1", "display_name": "Grokify", "link": "https://stackoverflow.com/users/1908967/grokify"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 50218809, "answer_count": 1, "score": 2, "last_activity_date": 1525758625, "creation_date": 1525709571, "last_edit_date": 1525712267, "question_id": 50218436, "link": "https://stackoverflow.com/questions/50218436/is-it-possible-to-set-the-caller-id-cid-clid-to-blocked-in-ringout", "title": "Is it possible to set the caller id (CID/CLID) to Blocked in RingOut?", "body": "<p>I'm using the RingCentral RingOut API and I'm wondering if I can block the <a href=\"https://en.wikipedia.org/wiki/Caller_ID\" rel=\"nofollow noreferrer\">caller ID</a>?</p>\n\n<p>The RingOut API only shows the <code>phoneNumber</code> property in the request format but RingCentral Online Account Portal can block the caller ID. Is there a way to do this?</p>\n\n<p>API Reference: <a href=\"https://developer.ringcentral.com/api-docs/latest/index.html#!#RefMakeRingOut\" rel=\"nofollow noreferrer\">https://developer.ringcentral.com/api-docs/latest/index.html#!#RefMakeRingOut</a></p>\n\n<p>Request:</p>\n\n<pre><code>POST /restapi/v1.0/account/~/extension/~/ring-out HTTP/1.1\n\n{\n    \"from\": {\"phoneNumber\": \"+14155550100\"},\n    \"callerId\": {\"phoneNumber\": \"+16505550100\"},\n    \"to\": {\"phoneNumber\": \"+12125550100\"},\n    \"playPrompt\": true\n}\n</code></pre>\n\n<p>I am using the Ruby SDK: <a href=\"https://github.com/ringcentral/ringcentral-ruby\" rel=\"nofollow noreferrer\">https://github.com/ringcentral/ringcentral-ruby</a></p>\n\n<pre><code>rc.post('/restapi/v1.0/account/~/extension/~/ring-out', payload: {\n  from: {phoneNumber: \"+14155550100\"},\n  callerId: {phoneNumber: \"+16505550100\"},\n  to: {phoneNumber: \"+12125550100\"},\n  playPrompt: true\n})\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "edited": false, "score": 4, "creation_date": 1525705874, "post_id": 50217200, "comment_id": 87451603, "body": "Prefer <code>cust_array</code> over <code>custArray</code> in Ruby. Also, &quot;c1001&quot; and :c1001 are not equivalent hash keys."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1525716177, "post_id": 50217200, "comment_id": 87457017, "body": "I suggest that in future you not be in such a rush to select an answer. There&#39;s no hurry."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 8009874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qTMc9.jpg?s=128&g=1", "display_name": "Toph", "link": "https://stackoverflow.com/users/8009874/toph"}, "edited": false, "score": 0, "creation_date": 1525705992, "post_id": 50217322, "comment_id": 87451679, "body": "Apologies, I edited the question.  That absolutely worked."}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 49, "user_id": 8009874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qTMc9.jpg?s=128&g=1", "display_name": "Toph", "link": "https://stackoverflow.com/users/8009874/toph"}, "edited": false, "score": 0, "creation_date": 1525706139, "post_id": 50217322, "comment_id": 87451772, "body": "I edited my answer as the first answer I gave was incorrect"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 49, "user_id": 8009874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qTMc9.jpg?s=128&g=1", "display_name": "Toph", "link": "https://stackoverflow.com/users/8009874/toph"}, "edited": false, "score": 0, "creation_date": 1525706953, "post_id": 50217322, "comment_id": 87452299, "body": "See last update. But also be aware, an array may contain multiple hashes that have the same keys.  So make sure however you&#39;re building your array, those keys are unique. Also prefer snake case in ruby <code>cust_array</code> vs <code>custArray</code>."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 2, "last_activity_date": 1525739521, "last_edit_date": 1525739521, "creation_date": 1525705712, "answer_id": 50217322, "question_id": 50217200, "link": "https://stackoverflow.com/questions/50217200/ruby-create-an-array-of-hashes/50217322#50217322", "title": "Ruby create an array of hashes", "body": "<p>You can use select from the array of hashes to see if the key is there:</p>\n\n<pre><code>target = custArray.find { |h| h.key? 'c1001' }\ntarget['c1001']['purchases'] &lt;&lt;  \"prod02\" unless target.nil?\n</code></pre>\n\n<p>Or if array contains multiple hashes with the same key:</p>\n\n<pre><code>custArray.select { |h| h.key? 'c1001' }.each do |h|\n  h['c1001']['purchases'] &lt;&lt;  \"prod02\" \nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "edited": false, "score": 0, "creation_date": 1525707662, "post_id": 50217720, "comment_id": 87452742, "body": "This solution will also handle if you have duplicate array values with the same hash key <code>c1001</code>"}], "tags": [], "owner": {"reputation": 1405, "user_id": 7023415, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a7f3b4db177eeb60558058e587628f7?s=128&d=identicon&r=PG&f=1", "display_name": "Leo", "link": "https://stackoverflow.com/users/7023415/leo"}, "is_accepted": false, "score": 1, "last_activity_date": 1525707033, "creation_date": 1525707033, "answer_id": 50217720, "question_id": 50217200, "link": "https://stackoverflow.com/questions/50217200/ruby-create-an-array-of-hashes/50217720#50217720", "title": "Ruby create an array of hashes", "body": "<p>Also, you can write something similar to code that you already provide</p>\n\n<pre><code>custArray.each do |h|\n  h['c1001']['purchases'] &lt;&lt; 'prod02' if h.keys.include?('c1001')\nend\n</code></pre>\n\n<p>That allows reducing the count of iteration loops</p>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 2, "last_activity_date": 1525709175, "creation_date": 1525709175, "answer_id": 50218316, "question_id": 50217200, "link": "https://stackoverflow.com/questions/50217200/ruby-create-an-array-of-hashes/50218316#50218316", "title": "Ruby create an array of hashes", "body": "<p>If you only want to update the first instance of the array you can do:</p>\n\n<pre><code>target = custArray.find { |hash| hash.key? 'c1001' }\ntarget['c1001']['purchases'] &lt;&lt; 'prod02' if target\n</code></pre>\n\n<p>If you want to update all instances of the array you can do (backslashes are for console purposes only):</p>\n\n<pre><code>custArray \\\n  .select { |hash| hash.key? 'c1001' } \\\n  .each { |hash| hash['c1001']['purchases'] &lt;&lt; 'prod02' }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2545, "user_id": 1808649, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/7OGag.jpg?s=128&g=1", "display_name": "Fran Martinez", "link": "https://stackoverflow.com/users/1808649/fran-martinez"}, "is_accepted": true, "score": 3, "last_activity_date": 1525710606, "creation_date": 1525710606, "answer_id": 50218698, "question_id": 50217200, "link": "https://stackoverflow.com/questions/50217200/ruby-create-an-array-of-hashes/50218698#50218698", "title": "Ruby create an array of hashes", "body": "<p>You can resolve it with:</p>\n\n<pre><code>if c = custArray.find { |h| h.key? 'c1001' }\n  c.dig('c1001', 'purchases') &lt;&lt; \"prod2\"\nend\n</code></pre>\n\n<p>Or if you can have more than one result with this key:</p>\n\n<pre><code>custArray.select { |h| h.key? 'c1001' }.each do |c|\n  c.dig('c1001', 'purchases') &lt;&lt; \"prod2\"\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1533670944, "creation_date": 1533670944, "answer_id": 51734329, "question_id": 50217200, "link": "https://stackoverflow.com/questions/50217200/ruby-create-an-array-of-hashes/51734329#51734329", "title": "Ruby create an array of hashes", "body": "<pre><code>custArray.find { |h| h.key?('c1001') }&amp;.dig('c1001', 'purchases')&amp;.push(\"prod02\")\n  #=&gt; [\"prod01\", \"prod02\"]\ncustArray\n  #=&gt; [{\"c1001\"=&gt;{\"purchases\"=&gt;[\"prod01\", \"prod02\"]}}]\n\ncustArray.find { |h| h.key?('c1002') }&amp;.dig('c1002', 'purchases')&amp;.push(\"prod02\")\n  #=&gt; nil\ncustArray\n  #=&gt; [{\"c1001\"=&gt;{\"purchases\"=&gt;[\"prod01\"]}}]\n\ncustArray.find { |h| h.key?('c1001') }&amp;.dig('c1001', 'popsicles')&amp;.push(\"prod02\")\n  #=&gt; nil\ncustArray\n  #=&gt; [{\"c1001\"=&gt;{\"purchases\"=&gt;[\"prod01\"]}}]\n</code></pre>\n\n<p><code>&amp;</code> is Ruby's <a href=\"http://mitrev.net/ruby/2015/11/13/the-operator-in-ruby/\" rel=\"nofollow noreferrer\">Safe Navigation Operator</a>. See also <a href=\"http://ruby-doc.org/core-2.4.0/Hash.html#method-i-dig\" rel=\"nofollow noreferrer\">Hash#dig</a>. Both made their debut in Ruby v2.3.</p>\n"}], "owner": {"reputation": 49, "user_id": 8009874, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qTMc9.jpg?s=128&g=1", "display_name": "Toph", "link": "https://stackoverflow.com/users/8009874/toph"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 209, "favorite_count": 0, "accepted_answer_id": 50218698, "answer_count": 5, "score": 2, "last_activity_date": 1533670944, "creation_date": 1525705266, "last_edit_date": 1525705891, "question_id": 50217200, "link": "https://stackoverflow.com/questions/50217200/ruby-create-an-array-of-hashes", "title": "Ruby create an array of hashes", "body": "<p>I've got a variable I'd like to use as a key to a hash that contains its own key and array.</p>\n\n<p>e.g.  </p>\n\n<pre><code>custArray = Array.new\ncustArray &lt;&lt; {\"c1001\" =&gt; {\"purchases\" =&gt; [\"prod01\"]}}\n</code></pre>\n\n<p>I want to be able to do something like:</p>\n\n<pre><code>if custArray[:c1001].exists?\n  custArray[{:c1001[\"purchases\"]} &lt;&lt; \"prod02\"]\nend\n</code></pre>\n\n<p>but I'm just totally stuck. </p>\n"}, {"tags": ["ruby", "continuous-integration", "rake", "travis-ci"], "answers": [{"comments": [{"owner": {"reputation": 1412, "user_id": 5168457, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ceb51d358a087b9c63c2f47c00da965f?s=128&d=identicon&r=PG&f=1", "display_name": "kgrg", "link": "https://stackoverflow.com/users/5168457/kgrg"}, "edited": false, "score": 0, "creation_date": 1553607799, "post_id": 55358313, "comment_id": 97441049, "body": "Could you please elaborate your answer in details, with some context and explanation, so it would be more understandable?"}], "tags": [], "owner": {"reputation": 51, "user_id": 9366231, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5q6vg.jpg?s=128&g=1", "display_name": "Douglas Rosa", "link": "https://stackoverflow.com/users/9366231/douglas-rosa"}, "is_accepted": false, "score": 0, "last_activity_date": 1553606698, "creation_date": 1553606698, "answer_id": 55358313, "question_id": 50216116, "link": "https://stackoverflow.com/questions/50216116/the-command-bundle-exec-rake-exited-with-1-in-travis-for-ruby-cucumber-automat/55358313#55358313", "title": "The command &quot;bundle exec rake&quot; exited with 1 in Travis for ruby cucumber automation script", "body": "<pre><code>before_install:\n  - gem install rake\n</code></pre>\n"}], "owner": {"reputation": 61, "user_id": 6676562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh6.googleusercontent.com/-pCI9lQj1zX0/AAAAAAAAAAI/AAAAAAAAAMU/ETqkAO90k64/photo.jpg?sz=128", "display_name": "Apzal Bahin", "link": "https://stackoverflow.com/users/6676562/apzal-bahin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1101, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1553606698, "creation_date": 1525701650, "last_edit_date": 1526299401, "question_id": 50216116, "link": "https://stackoverflow.com/questions/50216116/the-command-bundle-exec-rake-exited-with-1-in-travis-for-ruby-cucumber-automat", "title": "The command &quot;bundle exec rake&quot; exited with 1 in Travis for ruby cucumber automation script", "body": "<p>I am trying to run my sample work in Travis but getting below error.<a href=\"https://github.com/Apzal/RubyCucumberWatir.git\" rel=\"nofollow noreferrer\">Git hub project</a>:</p>\n\n<pre><code>$ bundle exec rake\n/home/travis/.rvm/rubies/ruby-2.3.3/bin/ruby -I \"lib\" \"/home/travis/.rvm/gems/ruby-2.3.3/gems/cucumber-2.4.0/bin/cucumber\" --profile default\nThe command \"bundle exec rake\" exited with 1.\n</code></pre>\n\n<p>Rake file:</p>\n\n<pre><code>require 'rubygems'\nrequire 'cucumber'\nrequire 'cucumber/rake/task'\n\nCucumber::Rake::Task.new(:features) do |t|\n  t.profile = 'default'\nend\n\ntask :default =&gt; :features\n</code></pre>\n\n<p>.travis.yml file</p>\n\n<pre><code>language: ruby\nrvm :\n    - 2.3.3\nbefore_install:\n  - gem update --system\n  - gem install bundler\ngemfile: gemfile\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "null"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1525702161, "post_id": 50215496, "comment_id": 87449193, "body": "<code>work_list</code> is a hash, not an array. Please edit to show the desired return value (Ruby object) for your example."}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 9747408, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CkWZIFMZMmU/AAAAAAAAAAI/AAAAAAAAADc/JRRdP4I13FM/photo.jpg?sz=128", "display_name": "X Cage", "link": "https://stackoverflow.com/users/9747408/x-cage"}, "edited": false, "score": 0, "creation_date": 1525707335, "post_id": 50215707, "comment_id": 87452542, "body": "Yeah, right. It works smooth when change to hash with symbol:"}], "tags": [], "owner": {"reputation": 13441, "user_id": 2199600, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/8sl6u.jpg?s=128&g=1", "display_name": "Igor Drozdov", "link": "https://stackoverflow.com/users/2199600/igor-drozdov"}, "is_accepted": false, "score": 2, "last_activity_date": 1525700472, "creation_date": 1525700472, "answer_id": 50215707, "question_id": 50215496, "link": "https://stackoverflow.com/questions/50215496/how-to-iterating-over-multidimensional-arrays-with-undefined-method-for-nil/50215707#50215707", "title": "How to iterating over multidimensional arrays with undefined method `[]&#39; for nil:NilClass?", "body": "<p>The problem with your code is that you're using <code>:</code> to build a hash:</p>\n\n<pre><code>\"workload\": {\n  \"process\": {\n    \"total\": 50, \n    \"finish\": 36, \n    \"un_finish\": 14, \n  }\n}\n</code></pre>\n\n<p>Which is valid syntax in Ruby, but the keys of this hash are going to be symbols, not strings as expected, so you need to access the data of this hash by symbols:</p>\n\n<pre><code>data_hash = work_list[:\"data\"]\ncount = 0\n\ndata_hash.each do |index, data|\n  work = data[:\"workload\"][:\"process\"][:\"total\"]\n  count += work\nend\n\nputs \"The total amount of works: #{count}\"\n</code></pre>\n\n<p>If you want to use strings, you need to construct hash as following:</p>\n\n<pre><code>\"workload\" =&gt; {\n  \"process\" =&gt; {\n    \"total\" =&gt; 50, \n    \"finish\" =&gt; 36, \n    \"un_finish\" =&gt; 14, \n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 476, "user_id": 2645167, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IEnRe.jpg?s=128&g=1", "display_name": "andriy-baran", "link": "https://stackoverflow.com/users/2645167/andriy-baran"}, "is_accepted": false, "score": 0, "last_activity_date": 1525700510, "creation_date": 1525700510, "answer_id": 50215722, "question_id": 50215496, "link": "https://stackoverflow.com/questions/50215496/how-to-iterating-over-multidimensional-arrays-with-undefined-method-for-nil/50215722#50215722", "title": "How to iterating over multidimensional arrays with undefined method `[]&#39; for nil:NilClass?", "body": "<p>You are iteration over a hash not array</p>\n\n<pre><code>list.each do |num, info|\n  work = info[\"workload\"][\"process\"][\"total\"]\n  count += work\nend\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 9747408, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-CkWZIFMZMmU/AAAAAAAAAAI/AAAAAAAAADc/JRRdP4I13FM/photo.jpg?sz=128", "display_name": "X Cage", "link": "https://stackoverflow.com/users/9747408/x-cage"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1525701075, "creation_date": 1525699854, "question_id": 50215496, "link": "https://stackoverflow.com/questions/50215496/how-to-iterating-over-multidimensional-arrays-with-undefined-method-for-nil", "title": "How to iterating over multidimensional arrays with undefined method `[]&#39; for nil:NilClass?", "body": "<p>I have array data like this:</p>\n\n<pre><code>work_list = {\n    \"data\": {\n        \"1\": {\n            \"team\": \"Design\", \n            \"members\": nil, \n            \"workload\": {\n                \"process\": {\n                    \"total\": 50, \n                    \"finish\": 36, \n                    \"un_finish\": 14, \n                }\n            } \n        },\n        \"2\": {\n            \"team\": \"Account\", \n            \"members\": 15, \n            \"workload\": {\n                \"process\": {\n                    \"total\": 30, \n                    \"finish\": 20, \n                    \"un_finish\": 10, \n                }\n            } \n        }\n    }\n}  \n</code></pre>\n\n<p>I want to calculte total amount of work both team by:</p>\n\n<pre><code>list = work_list[\"data\"]\ncount = 0\n\nlist.each do |num|\n    num.each do |details|\n       work = num[\"workload\"][\"process\"][\"total\"]\n       count += work\n    end\nend\n\nputs \"The total amount of works: #{count}\"\n</code></pre>\n\n<p>The error here is: \"undefined method `each' for nil:NilClass (NoMethodError)\"</p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 9030, "user_id": 5101476, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JCQrl.jpg?s=128&g=1", "display_name": "ice\u30c4", "link": "https://stackoverflow.com/users/5101476/ice%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1525699044, "post_id": 50212000, "comment_id": 87447036, "body": "<code>array[1..2] = array[1..2].rotate</code>"}], "answers": [{"tags": [], "owner": {"reputation": 785, "user_id": 4380137, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000986896620/picture?type=large", "display_name": "Chris Aby Antony", "link": "https://stackoverflow.com/users/4380137/chris-aby-antony"}, "is_accepted": false, "score": 2, "last_activity_date": 1525689128, "creation_date": 1525689128, "answer_id": 50212112, "question_id": 50212000, "link": "https://stackoverflow.com/questions/50212000/how-do-i-move-an-element-of-an-array-one-place-up-down-with-ruby/50212112#50212112", "title": "How do I move an element of an array one place up/down with Ruby", "body": "<p>Try this for swapping</p>\n\n<pre><code>array[0],array[1] = array[1],array[0]\n</code></pre>\n\n<p>or in general </p>\n\n<pre><code>array[i],array[i+1] = array[i+1],array[i]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 9, "last_activity_date": 1525689138, "creation_date": 1525689138, "answer_id": 50212116, "question_id": 50212000, "link": "https://stackoverflow.com/questions/50212000/how-do-i-move-an-element-of-an-array-one-place-up-down-with-ruby/50212116#50212116", "title": "How do I move an element of an array one place up/down with Ruby", "body": "<pre><code>array[1], array[2] = array[2], array[1]\narray #=&gt; [\"a\", \"c\", \"b\", \"d\"]\n</code></pre>\n\n<p>or</p>\n\n<pre><code>array[1, 2] = array.values_at(2, 1)\narray #=&gt; [\"a\", \"c\", \"b\", \"d\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "is_accepted": false, "score": 7, "last_activity_date": 1525693530, "last_edit_date": 1525693530, "creation_date": 1525689603, "answer_id": 50212261, "question_id": 50212000, "link": "https://stackoverflow.com/questions/50212000/how-do-i-move-an-element-of-an-array-one-place-up-down-with-ruby/50212261#50212261", "title": "How do I move an element of an array one place up/down with Ruby", "body": "<p>There is no build in function to do this. You can swap the values like so:</p>\n\n<pre><code>array = %w[a b c d]\narray[1..2] = array[1..2].reverse\narray #=&gt; [\"a\", \"c\", \"b\", \"d\"]\n</code></pre>\n\n<p>You could add some helper methods to the core array class.</p>\n\n<pre><code>class Array\n  def move_up(index)\n    self[index, 2] = self[index, 2].reverse\n    self\n  end\n\n  def move_down(index)\n    move_up(index - 1)\n  end\nend\n</code></pre>\n\n<p><strong>Note:</strong> Keep in mind that this solution mutates the original array. You could also opt for a version that creates a new array. For this version you can call <a href=\"http://ruby-doc.org/core-2.5.0/Object.html#method-i-dup\" rel=\"nofollow noreferrer\"><em>#dup</em></a> (<code>result = dup</code>) than work with <code>result</code> instead of <code>self</code>.</p>\n\n<p><strong>References:</strong></p>\n\n<ul>\n<li><a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-5B-5D\" rel=\"nofollow noreferrer\"><em>Array#[]</em></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-5B-5D-3D\" rel=\"nofollow noreferrer\"><em>Array#[]=</em></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-reverse\" rel=\"nofollow noreferrer\"><em>Array#reverse</em></a></li>\n<li><a href=\"http://ruby-doc.org/core-2.5.0/Object.html#method-i-dup\" rel=\"nofollow noreferrer\"><em>Object#dup</em></a></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 2, "last_activity_date": 1525698111, "creation_date": 1525698111, "answer_id": 50214895, "question_id": 50212000, "link": "https://stackoverflow.com/questions/50212000/how-do-i-move-an-element-of-an-array-one-place-up-down-with-ruby/50214895#50214895", "title": "How do I move an element of an array one place up/down with Ruby", "body": "<p>Assuming that you want to target the elements by their indices, a combination of <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-insert\" rel=\"nofollow noreferrer\"><code>insert</code></a> and <a href=\"http://ruby-doc.org/core-2.5.0/Array.html#method-i-delete_at\" rel=\"nofollow noreferrer\"><code>delete_at</code></a> would work:</p>\n\n<pre><code>array = %w[a b c d]\narray.insert(2, array.delete_at(1))\narray\n#=&gt; [\"a\", \"c\", \"b\", \"d\"]\n</code></pre>\n"}], "owner": {"reputation": 1183, "user_id": 2217725, "user_type": "registered", "accept_rate": 43, "profile_image": "https://i.stack.imgur.com/fp99h.jpg?s=128&g=1", "display_name": "royketelaar", "link": "https://stackoverflow.com/users/2217725/royketelaar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1039, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1525698111, "creation_date": 1525688670, "question_id": 50212000, "link": "https://stackoverflow.com/questions/50212000/how-do-i-move-an-element-of-an-array-one-place-up-down-with-ruby", "title": "How do I move an element of an array one place up/down with Ruby", "body": "<p>Let's say I have this array</p>\n\n<pre><code>array = ['a', 'b', 'c', 'd']\n</code></pre>\n\n<p>What is a good way to target an element (for example 'b') and switch it with the next element in line (in this case 'c') so the outcome becomes:</p>\n\n<pre><code>=&gt; ['a', 'c', 'b', 'd']\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "controller"], "comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "edited": false, "score": 0, "creation_date": 1525683780, "post_id": 50210501, "comment_id": 87437987, "body": "And the full error message is? also, which line does it point to?"}, {"owner": {"reputation": 1289, "user_id": 6583381, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/IoEUj.jpg?s=128&g=1", "display_name": "oj5th", "link": "https://stackoverflow.com/users/6583381/oj5th"}, "edited": false, "score": 0, "creation_date": 1525685294, "post_id": 50210501, "comment_id": 87438831, "body": "Can you fix the code posted? It is easy to read if you will post your whole class. You posted where the error is pointing but how can we check <code>line 31</code> if you break your code. And also, please post the full error message not just that line."}, {"owner": {"reputation": 4216, "user_id": 9269043, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3a2763bcfa8917a365c88f8639494de7?s=128&d=identicon&r=PG", "display_name": "Vasilisa", "link": "https://stackoverflow.com/users/9269043/vasilisa"}, "edited": false, "score": 0, "creation_date": 1525685880, "post_id": 50210501, "comment_id": 87439182, "body": "In which action you have an error? Add the whole log for this action"}], "answers": [{"tags": [], "owner": {"reputation": 2885, "user_id": 3372172, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Q3RaO.png?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/3372172/pablo"}, "is_accepted": false, "score": 0, "last_activity_date": 1525746768, "creation_date": 1525746768, "answer_id": 50224949, "question_id": 50210501, "link": "https://stackoverflow.com/questions/50210501/activerecordassociationtypemismatch-in-portfolioscontrollercreate/50224949#50224949", "title": "ActiveRecord::AssociationTypeMismatch in PortfoliosController#create", "body": "<p>You are calling <code>portfolio_params</code> in two different ways. In <code>update</code> you are not passing parameters; in <code>create</code> you are passing parameters. The usual way is not to pass any parameter.</p>\n\n<p>Moreover, you are permitting the <code>user</code> param, but it seems you are using <code>current_user</code>, so the <code>user</code> shouldn't be necessary.</p>\n\n<pre><code>def portfolio_params\n  params.require(:portfolio).permit(:design_name)\nend\n</code></pre>\n\n<p>And call it always without anything:</p>\n\n<pre><code>@portfolio = current_user.portfolios.new(portfolio_params)\n#I'm assuming a user has_many portfolios and a portfolio belongs_to user and has a user_id field in the database.\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 9720533, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "erin belot", "link": "https://stackoverflow.com/users/9720533/erin-belot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1525746768, "creation_date": 1525683683, "last_edit_date": 1525684178, "question_id": 50210501, "link": "https://stackoverflow.com/questions/50210501/activerecordassociationtypemismatch-in-portfolioscontrollercreate", "title": "ActiveRecord::AssociationTypeMismatch in PortfoliosController#create", "body": "<p>I'm struggling with this error, here's my controller code </p>\n\n<pre><code> class PortfoliosController &lt; ApplicationController\n      before_action :set_portfolio, only: [:show, :edit, :update, :destroy]\n      before_action :authenticate_user!, except: [:index]\n\n      # GET /portfolios\n      # GET /portfolios.json\n      def index\n        @portfolios = Portfolio.all\n      end\n\n      # GET /portfolios/1\n      # GET /portfolios/1.json\n      def show\n      end\n</code></pre>\n\n<p>I'm really new to coding and I'm not sure which code is critical for this error and which isn't so I've posted all the code in the controllers page</p>\n\n<pre><code>      # GET /portfolios/new\n      def new\n        @portfolio = Portfolio.new\n      end\n\n      # GET /portfolios/1/edit\n      def edit\n      end\n\n      # POST /portfolios\n      # POST /portfolios.json\n      def create\n        # init_params = portfolio_params\n        # init_params[:user] = current_user.id\n        puts params\n        @portfolio = Portfolio.new(portfolio_params(params[:portfolio]))\n\n        respond_to do |format|\n          if @portfolio.save\n            format.html { redirect_to @portfolio, notice: 'Portfolio was successfully created.' }\n            format.json { render :show, status: :created, location: @portfolio }\n          else\n            format.html { render :new }\n            format.json { render json: @portfolio.errors, status: :unprocessable_entity }\n          end\n        end\n      end\n</code></pre>\n\n<p>I'm just putting this comment here to break up the code so i can post</p>\n\n<pre><code>      # PATCH/PUT /portfolios/1\n      # PATCH/PUT /portfolios/1.json\n      def update\n        respond_to do |format|\n          if @portfolio.update(portfolio_params)\n            format.html { redirect_to @portfolio, notice: 'Portfolio was successfully updated.' }\n            format.json { render :show, status: :ok, location: @portfolio }\n          else\n            format.html { render :edit }\n            format.json { render json: @portfolio.errors, status: :unprocessable_entity }\n          end\n        end\n      end\n\n      # DELETE /portfolios/1\n      # DELETE /portfolios/1.json\n      def destroy\n        @portfolio.destroy\n        respond_to do |format|\n          format.html { redirect_to portfolios_url, notice: 'Portfolio was successfully destroyed.' }\n          format.json { head :no_content }\n        end\n      end\n\n      private\n        # Use callbacks to share common setup or constraints between actions.\n        def set_portfolio\n          @portfolio = Portfolio.find(params[:id])\n        end\n</code></pre>\n\n<p>I've played around with this last section a little, changing :user to :user.id but that didn't help, I also changed :design to :design_name</p>\n\n<pre><code>        def portfolio_params(params)\n          # params = params[:portfolio]\n          params.permit(:design_name, :user)\n\n          # user.id was changed back to user\n        end\n    end\n</code></pre>\n\n<p>Hey sorry! The full error code is:</p>\n\n<pre><code>   Extracted source (around line #31):\n29\n30\n31\n32\n33\n34\n\n    # init_params[:user] = current_user.id\n    puts params\n    @portfolio = Portfolio.new(portfolio_params(params[:portfolio]))\n\n    respond_to do |format|\n      if @portfolio.save\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 802, "user_id": 8728218, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/376ec53188ea3ec0271198a862516657?s=128&d=identicon&r=PG&f=1", "display_name": "Dyaniyal Wilson", "link": "https://stackoverflow.com/users/8728218/dyaniyal-wilson"}, "edited": false, "score": 0, "creation_date": 1525688532, "post_id": 50210385, "comment_id": 87440759, "body": "keep the database: name, same in the config/database.yml as the previous one . And make the necessary mysql setup. For development environment ."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 9751822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596208437095364/picture?type=large", "display_name": "Rishabh Shukla", "link": "https://stackoverflow.com/users/9751822/rishabh-shukla"}, "edited": false, "score": 0, "creation_date": 1525768497, "post_id": 50210579, "comment_id": 87475737, "body": "Thank you Mr Daryll for your help"}], "tags": [], "owner": {"reputation": 1856, "user_id": 848915, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/uTSIa.png?s=128&g=1", "display_name": "Daryll Santos", "link": "https://stackoverflow.com/users/848915/daryll-santos"}, "is_accepted": false, "score": 1, "last_activity_date": 1525683947, "creation_date": 1525683947, "answer_id": 50210579, "question_id": 50210385, "link": "https://stackoverflow.com/questions/50210385/connect-rails-application-to-already-existing-mysql-database/50210579#50210579", "title": "Connect Rails Application to already existing MySql Database", "body": "<p>Yes, check out <code>config/database.yml</code>, that's usually where the database configuration settings are stored. <a href=\"http://edgeguides.rubyonrails.org/configuring.html#configuring-a-database\" rel=\"nofollow noreferrer\">Here is the guide for that.</a> You have to install the mysql (or I believe <a href=\"https://github.com/brianmario/mysql2\" rel=\"nofollow noreferrer\">mysql2</a>) gem.</p>\n\n<p>From one of my older projects, this is what my <code>config/database.yml</code> looks like:</p>\n\n<pre><code>development:\n  adapter: mysql2\n  username: root\n  database: APP_NAME_development\n  host: localhost\ntest:\n  adapter: mysql2\n  username: root\n  database: APP_NAME_test\n  host: localhost\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 9751822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596208437095364/picture?type=large", "display_name": "Rishabh Shukla", "link": "https://stackoverflow.com/users/9751822/rishabh-shukla"}, "edited": false, "score": 0, "creation_date": 1525768460, "post_id": 50212384, "comment_id": 87475715, "body": "Thank you so much I was able to solve my problem I really really appreciate your time and help.  but is it possible to access and transfer data from and to tables with my rails views"}, {"owner": {"reputation": 1, "user_id": 9751822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596208437095364/picture?type=large", "display_name": "Rishabh Shukla", "link": "https://stackoverflow.com/users/9751822/rishabh-shukla"}, "edited": false, "score": 0, "creation_date": 1525785702, "post_id": 50212384, "comment_id": 87486644, "body": "and how about sending data to tables from controller. As for my signup view I have created a signup controller."}, {"owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "reply_to_user": {"reputation": 1, "user_id": 9751822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596208437095364/picture?type=large", "display_name": "Rishabh Shukla", "link": "https://stackoverflow.com/users/9751822/rishabh-shukla"}, "edited": false, "score": 0, "creation_date": 1525787671, "post_id": 50212384, "comment_id": 87488039, "body": "follow that great tutorial - <a href=\"https://www.railstutorial.org/book/sign_up\" rel=\"nofollow noreferrer\">railstutorial.org/book/sign_up</a>"}], "tags": [], "owner": {"reputation": 5483, "user_id": 4481312, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/teLso.jpg?s=128&g=1", "display_name": "marmeladze", "link": "https://stackoverflow.com/users/4481312/marmeladze"}, "is_accepted": true, "score": 4, "last_activity_date": 1525784271, "last_edit_date": 1525784271, "creation_date": 1525690004, "answer_id": 50212384, "question_id": 50210385, "link": "https://stackoverflow.com/questions/50210385/connect-rails-application-to-already-existing-mysql-database/50212384#50212384", "title": "Connect Rails Application to already existing MySql Database", "body": "<p>I guess you need more than <a href=\"https://stackoverflow.com/a/50210579/4481312\">Daryll Santos'</a> answer. His answer will guide you to establish a connection to database, but mapping tables to models needs more clearence.  </p>\n\n<p>As an answer to your <code>mysqli</code> alternative request, yes, <a href=\"https://dev.mysql.com/downloads/ruby.html\" rel=\"nofollow noreferrer\">ruby also has a mysql connector.</a> But you will not need it. </p>\n\n<p>Standard ROR bundle comes with a built-in orm module, called <a href=\"http://guides.rubyonrails.org/active_record_basics.html\" rel=\"nofollow noreferrer\">ActiveRecord</a>. </p>\n\n<p>Unless stated otherwise, AR take model names, pluralize them and maps to table having that name on connected database. There are also other conventions, such as primary key, foreign key namings etc. You can search AR docs for those.</p>\n\n<p>But you can override those behaviour, like</p>\n\n<pre><code>class Book\n  self.table_name = 'something_other_than_books'\nend\n</code></pre>\n\n<p>Thus, AR will look for <code>something_other_than_books</code> table and automatically twins its columns as properties to this class. As AR expects <code>id</code> field as primary key for that table, and if you have other than it, you also have to declare it explicitly. </p>\n\n<pre><code>class Book\n  self.table_name = 'something_other_than_books'\n  self.primary_key = 'book_id'\nend\n</code></pre>\n\n<p>Here is a guide for <a href=\"http://guides.rubyonrails.org/active_record_querying.html\" rel=\"nofollow noreferrer\">AR querying</a>. Btw, it has lots of similarities with Eloquent in PHP. You'll pick it easily if you are familiar with it.</p>\n\n<p>At least, lets show some examples and their SQL equivalents.</p>\n\n<pre><code>Book.find(2) # based on below model \n#=&gt; SELECT * FROM something_other_than_books WHERE book_id = 2\nBook.where(author: \"Jack London\")\n#=&gt; SELECT * FROM something_other_than_books WHERE author = 'Jack London'\nBook.pluck(:book_id, :author)\n#=&gt; SELECT book_id, author FROM something_other_than_books\nBook.order(book_id: :asc).pluck(:author)\n#=&gt; SELECT author FROM something_other_than_books ORDER BY book_id DESC\n</code></pre>\n\n<p><strong>UPDATE</strong></p>\n\n<p>Unlike raw PHP, Rails is MVC based, full stack web application. Alikes of Rails from PHP ecosystem are, Symfony, Laravel, Cake, Yii2, FuelPHP etc. One of the main advantages of an MVC framework is, you don't need to execute your sql queries inside your views. This means, you do not request for a file and wait it to execute an sql query wrapped with html code. Instead, you recieve a request, your router maps it to controller, it passes data to domain (model), recieves results, then render those data in a view file. </p>\n\n<p>Think about below php file (let's say books.php). </p>\n\n<pre><code>&lt;?php\n$servername = \"localhost\";\n$username = \"username\";\n$password = \"password\";\n$dbname = \"my_db\";\n$conn = new mysqli($servername, $username, $password, $dbname);\nif ($conn-&gt;connect_error) {\n    die(\"Connection failed: \" . $conn-&gt;connect_error);\n}\n$sql = \"SELECT book_id, author FROM something_other_than_books\";\n$result = $conn-&gt;query($sql);\nif ($result-&gt;num_rows &gt; 0) {\n    while($row = $result-&gt;fetch_assoc()) {\n        echo \"Book ID: \" . $row[\"book_id\"] . \" - Author: \" . $row[\"author\"] . \"&lt;br&gt;\";\n    }\n} else {\n    echo \"0 results found\";\n}\n$conn-&gt;close();\n?&gt; \n</code></pre>\n\n<p>So, when you send get request to <a href=\"http://yourdoma.in/books.php\" rel=\"nofollow noreferrer\">http://yourdoma.in/books.php</a>, you'll get list of books.</p>\n\n<p>In Rails, your code is better structured - this might seem a bit difficult first, but when your application grows, you'll find that, dealing with repetitive tasks are extremely easy. </p>\n\n<p>Steps to mimic above php script and its result in Rails. </p>\n\n<p>1.Define a route in your routes file</p>\n\n<pre><code>#config/routes.rb\nget '/books' =&gt; 'books#index'\n#or, resources :books, only: [:index]\n</code></pre>\n\n<p>2.Create a controller action</p>\n\n<pre><code>#app/controllers/books_controller.rb\nclass BooksController &lt; ApplicationController\n  def index\n    @books = Book.pluck(:book_id, :author)\n  end\nend\n</code></pre>\n\n<p>3.Book model </p>\n\n<pre><code>#app/models/book.rb \nclass Book &lt; ActiveRecord::Base\n  self.table_name = 'something_other_than_books'\n  self.primary_key = 'book_id'\nend\n</code></pre>\n\n<p>4.And finally view file. (if you do not explicitly state it, <em>index action</em> in books_controller.rb will try to render app/views/index.html.erb with <code>@books</code> instance variable)</p>\n\n<pre><code>#app/views/index.html.erb\n&lt;% @books.each do |book|  %&gt;\n  Book ID: &lt;%= book.book_id %&gt; - Author: &lt;%= book.author %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>If you use rails generators, you'll not need to create those files one by one, manually. Let me know if I can help you more.</p>\n"}], "owner": {"reputation": 1, "user_id": 9751822, "user_type": "registered", "profile_image": "https://graph.facebook.com/1596208437095364/picture?type=large", "display_name": "Rishabh Shukla", "link": "https://stackoverflow.com/users/9751822/rishabh-shukla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 451, "favorite_count": 0, "accepted_answer_id": 50212384, "answer_count": 2, "score": 0, "last_activity_date": 1525784271, "creation_date": 1525683153, "question_id": 50210385, "link": "https://stackoverflow.com/questions/50210385/connect-rails-application-to-already-existing-mysql-database", "title": "Connect Rails Application to already existing MySql Database", "body": "<p>I am new to Rails and really enjoying it. \nI am converting my php application to a ROR application. The app is using a MySql DB, so I want to connect the ROR application with that already created DB and want to preserve the data. php has mysqli functions, does ROR has anything similar to that ?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "memory-management", "garbage-collection", "profiling"], "owner": {"reputation": 1513, "user_id": 5746504, "user_type": "registered", "accept_rate": 91, "profile_image": "https://lh6.googleusercontent.com/-4c57-sWfrFM/AAAAAAAAAAI/AAAAAAAACog/XNKIq-S6CDg/photo.jpg?sz=128", "display_name": "Moamen Naanou", "link": "https://stackoverflow.com/users/5746504/moamen-naanou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 513, "favorite_count": 0, "answer_count": 0, "score": 4, "last_activity_date": 1526458652, "creation_date": 1525682886, "last_edit_date": 1526458652, "question_id": 50210316, "link": "https://stackoverflow.com/questions/50210316/implicit-vs-explicit-garbage-collection", "title": "Implicit vs explicit garbage collection", "body": "<p><strong>Background</strong>:</p>\n\n<p>I have created an API and I did profiling for memory usage &amp; process time for each web service using <a href=\"https://www.codementor.io/tylerboyd/finding-performance-bottlenecks-in-your-rails-api-du107r9zt\" rel=\"nofollow noreferrer\">this guide</a> and <a href=\"https://github.com/SamSaffron/memory_profiler\" rel=\"nofollow noreferrer\">memory profiler gem</a>.</p>\n\n<p>I created a table to keep all profiling results like this:</p>\n\n<pre><code>      Request      | Memory Usage(b) | Retained Memory(b) | Runtime(seconds)\n----------------------------------------------------------------------------\n  Post Login       | 444318          |   35649            | 1.254\n  Post Register    | 232071          |   32673            | 0.611\n  Get 10 Users     | 11947286        |   2670333          | 3.456\n  Get User By ID   | 834953          |   131300           | 0.834\n</code></pre>\n\n<p>Note: all numbers are the average number of calling the same service 3 consecutive times.</p>\n\n<p>And I read many guides and answers(like <a href=\"https://stackoverflow.com/questions/19523039/how-to-destroy-ruby-object\">this</a> and <a href=\"https://stackoverflow.com/questions/1121737/ruby-rails-garbage-collection\">this</a>) says that Garbage Collector is responsible for releasing memory and we should not explicitly interfere in memory management.</p>\n\n<p>Then I just forced the Garbage Collector to start after each action (for test purpose) by adding the following filter in APIController:</p>\n\n<pre><code>after_action :dispose\n\ndef dispose\n   GC.start\nend\n</code></pre>\n\n<p>And I found that Memory usage is reduced too much (more than 70%), retained memory almost same before and runtime is reduced as well.</p>\n\n<pre><code>      Request      | Memory Usage(b) | Retained Memory(b) | Runtime(seconds)\n----------------------------------------------------------------------------\n  Post Login       | 38636           |   34628            | 1.023\n  Post Register    | 37746           |   31522            | 0.583\n  Get 10 Users     | 2673040         |   2669032          | 2.254\n  Get User By ID   | 132281          |   128913           | 0.782\n</code></pre>\n\n<p><strong>Questions:</strong></p>\n\n<ol>\n<li>Is it good practice to add such filter and what are the side effects? </li>\n<li>I thought that runtime will be more than before, but it seems less, what can be the reason?</li>\n</ol>\n\n<p><strong>Update:</strong></p>\n\n<p>I'm using Ruby 2.3.0 and I've used <a href=\"https://github.com/ko1/gc_tracer\" rel=\"nofollow noreferrer\">gc_tracer gem</a> to monitor heap status because I'm afraid to have <a href=\"https://samsaffron.com/archive/2014/04/08/ruby-2-1-garbage-collection-ready-for-production\" rel=\"nofollow noreferrer\">old garbage collection issues highlighted in Ruby 2.0 &amp; 2.1</a></p>\n\n<blockquote>\n  <p>The issue is that the Ruby GC is triggered on total number of objects,\n  and not total amount of used memory</p>\n</blockquote>\n\n<p>Then to do a stress test, I run the following:</p>\n\n<pre><code>while true\n  \"a\" * (1024 ** 2)\nend\n</code></pre>\n\n<p>and result is that memory usage does not exceed the following limits (<a href=\"https://samsaffron.com/archive/2014/04/08/ruby-2-1-garbage-collection-ready-for-production\" rel=\"nofollow noreferrer\">it was exceeding before and GC wont be triggered</a>):</p>\n\n<pre><code>RUBY_GC_MALLOC_LIMIT_MAX\nRUBY_GC_OLDMALLOC_LIMIT_MAX\n</code></pre>\n\n<p>So now I'm pretty sure that same <code>GC</code> issues of 2.0 &amp; 2.1 don't exist anymore in 2.3, but still getting the following positive results by adding above mentioned filter (<code>after_action :dispose</code>):</p>\n\n<ul>\n<li>Heap memory enhanced by 5% to 10% (<a href=\"https://serverfault.com/questions/679451/what-could-cause-rubys-free-heap-slots-to-rapidly-increase\">check this related question</a>)</li>\n<li>General execution time enhanced by 20% to 40% (test done using third party tool <em>Postman</em> which consumes my API) </li>\n</ul>\n\n<p>I'm still looking for answers to my two questions above.</p>\n\n<p>Any feedback would be greatly appreciated</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "string"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1525703727, "post_id": 50210230, "comment_id": 87450271, "body": "Is the string guaranteed to contain two adjacent underscores?"}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1525684011, "post_id": 50210455, "comment_id": 87438122, "body": "Since you only want to replace the first occurrence, you should use <code>sub</code> instead of <code>gsub</code>. And you could use a positive lookahead to avoid the global variables, e.g. <code>sub(&#47;(.*?)(?=__)&#47;, &amp;:camelize)</code>"}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525684023, "post_id": 50210455, "comment_id": 87438132, "body": "Which Ruby Version are you using? camelize throws the error for me."}, {"owner": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1525684139, "post_id": 50210455, "comment_id": 87438200, "body": "@Stefan So it&#39;s available in Rails? Not in pure Ruby?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 3523, "user_id": 9043475, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/FNxvn.jpg?s=128&g=1", "display_name": "Rajagopalan", "link": "https://stackoverflow.com/users/9043475/rajagopalan"}, "edited": false, "score": 0, "creation_date": 1525684291, "post_id": 50210455, "comment_id": 87438294, "body": "@Rajagopalan yes, <code>camelize</code> is also used in the question (which has a  <code>ruby-on-rails</code> tag)"}, {"owner": {"reputation": 13442, "user_id": 3982562, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2a3c7aae1d762372cda697833c602ec8?s=128&d=identicon&r=PG", "display_name": "3limin4t0r", "link": "https://stackoverflow.com/users/3982562/3limin4t0r"}, "edited": false, "score": 0, "creation_date": 1525685448, "post_id": 50210455, "comment_id": 87438937, "body": "If you want avoid lazy quantifiers (<code>.*?</code>) you can change the regex into <code>&#47;([^_]|_(?!_))*(?=__)&#47;</code> instead."}], "tags": [], "owner": {"reputation": 1543, "user_id": 5801853, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/e1b0fbad41fb9e1ee84161ebff1ddbbc?s=128&d=identicon&r=PG", "display_name": "yzalavin", "link": "https://stackoverflow.com/users/5801853/yzalavin"}, "is_accepted": true, "score": 8, "last_activity_date": 1525684392, "last_edit_date": 1525684392, "creation_date": 1525683471, "answer_id": 50210455, "question_id": 50210230, "link": "https://stackoverflow.com/questions/50210230/camelize-up-to-a-certain-part-of-a-string/50210455#50210455", "title": "Camelize up to a certain part of a string", "body": "<p>The simplest option is to gsub part of your string.</p>\n\n<pre><code>'like_so__case'.gsub(/(.*?)(__.*)/) { \"#{$1.camelize}#{$2}\" }\n#=&gt; \"LikeSo__case\"\n</code></pre>\n\n<p>UPDATE</p>\n\n<p>Cleaner and faster way arising from comments.</p>\n\n<pre><code>'like_so__case__h'.sub(/(.*?)(?=__)/, &amp;:camelize)\n#=&gt; \"LikeSo__case__h\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 9297, "user_id": 764546, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/OfNpk.jpg?s=128&g=1", "display_name": "MikDiet", "link": "https://stackoverflow.com/users/764546/mikdiet"}, "is_accepted": false, "score": 1, "last_activity_date": 1525683822, "creation_date": 1525683822, "answer_id": 50210542, "question_id": 50210230, "link": "https://stackoverflow.com/questions/50210230/camelize-up-to-a-certain-part-of-a-string/50210542#50210542", "title": "Camelize up to a certain part of a string", "body": "<pre><code>s = \"like_so__case\"\n =&gt; \"like_so__case\" \ns.split('__', 2).tap { |s| s[0] = s[0].camelize }.join('__')\n =&gt; \"LikeSo__case\" \n</code></pre>\n\n<p>You of course could wrap it in string method</p>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 8500089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIT6I.jpg?s=128&g=1", "display_name": "Rasna Shakya", "link": "https://stackoverflow.com/users/8500089/rasna-shakya"}, "is_accepted": false, "score": 1, "last_activity_date": 1525684072, "creation_date": 1525684072, "answer_id": 50210614, "question_id": 50210230, "link": "https://stackoverflow.com/questions/50210230/camelize-up-to-a-certain-part-of-a-string/50210614#50210614", "title": "Camelize up to a certain part of a string", "body": "<p>For getting this <code>LikeSo__case</code>, we can do like:</p>\n\n<pre><code>s=\"like_so__case\"\ns.split('__').tap { |s| s[0] = s[0].camelize }.join('__') \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 37, "user_id": 5180263, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-PLnlcVK-DTI/AAAAAAAAAAI/AAAAAAAAAdU/hi2O37woQa4/photo.jpg?sz=128", "display_name": "Qiu Chaofan", "link": "https://stackoverflow.com/users/5180263/qiu-chaofan"}, "is_accepted": false, "score": 1, "last_activity_date": 1525684784, "creation_date": 1525684784, "answer_id": 50210806, "question_id": 50210230, "link": "https://stackoverflow.com/questions/50210230/camelize-up-to-a-certain-part-of-a-string/50210806#50210806", "title": "Camelize up to a certain part of a string", "body": "<p>Your description on the demand is not so clear.</p>\n\n<p>From your excepted result, I understand it as 'camelize a part of string until a pattern'. I should note one thing first that <code>camelize</code> is not part of Ruby's standard library of class <code>String</code>. <code>ActiveSupport::Inflector</code> provides it.</p>\n\n<p>So if you want to just camelize each part divided by a pattern, use <code>str.split('_').map(&amp;:capitalize).join('_')</code>. In your case, it returns <code>'Like_So__Case'</code>.</p>\n\n<p>Ruby's <code>String</code> has another instance method named <code>partition</code>, which splits the string into three parts (an array):</p>\n\n<ul>\n<li>Part before the pattern</li>\n<li>The pattern</li>\n<li>Part after the pattern</li>\n</ul>\n\n<p>So <code>str.partition('__').tap { |a| a[0] = a[0].split('_').map(&amp;:capitalize).join }.join</code> should be your answer in plain Ruby.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1525686448, "creation_date": 1525686448, "answer_id": 50211285, "question_id": 50210230, "link": "https://stackoverflow.com/questions/50210230/camelize-up-to-a-certain-part-of-a-string/50211285#50211285", "title": "Camelize up to a certain part of a string", "body": "<p>No need of relying on <code>camelize</code>. Simply, this:</p>\n\n<pre><code>\"like_so__case\"\n.gsub(/_?([a-z])([a-z]*)(?=.*__)/i){$1.upcase + $2.downcase}\n# =&gt; \"LikeSo__case\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4693885, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-SNFvVyz6iXw/AAAAAAAAAAI/AAAAAAAABhI/lHNSsay7HAg/photo.jpg?sz=128", "display_name": "sriram sridhar", "link": "https://stackoverflow.com/users/4693885/sriram-sridhar"}, "is_accepted": false, "score": 0, "last_activity_date": 1525688165, "creation_date": 1525688165, "answer_id": 50211862, "question_id": 50210230, "link": "https://stackoverflow.com/questions/50210230/camelize-up-to-a-certain-part-of-a-string/50211862#50211862", "title": "Camelize up to a certain part of a string", "body": "<pre><code>def camelize(s)\n  for i in 0..s.size-2 do\n    if s[i] == \"_\" and s[i+1] == \"_\" \n      next\n    elsif s[i] == \"_\" and s[i+1] != \"_\" and s[i-1] != \"_\"\n      s[i+1] = s[i+1].upcase\n      s[i] = \"\"\n    else\n      next\n    end\n  end\n  return s\nend\n</code></pre>\n\n<p>Use this method to solve your problem</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1525708253, "last_edit_date": 1525708253, "creation_date": 1525707313, "answer_id": 50217810, "question_id": 50210230, "link": "https://stackoverflow.com/questions/50210230/camelize-up-to-a-certain-part-of-a-string/50217810#50217810", "title": "Camelize up to a certain part of a string", "body": "<pre><code>s = \"like_so__case\"\n\ni = s.index('__')\n  #=&gt; 7\ns.tap { |s| s[0,i] = s[0,i].camelize }\n  #=&gt; LikeSo__case\n</code></pre>\n\n<p>The last line could be replaced by two lines:</p>\n\n<pre><code>s[0,i] = s[0,i].camelize\ns\n</code></pre>\n\n<p>If the original string is not to be mutated write</p>\n\n<pre><code>s.dup.tap { |s| s[0,i] = s[0,i].camelize }\n</code></pre>\n"}], "owner": {"reputation": 1420, "user_id": 1436610, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/Ow8Cb.jpg?s=128&g=1", "display_name": "Coding active", "link": "https://stackoverflow.com/users/1436610/coding-active"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 169, "favorite_count": 0, "accepted_answer_id": 50210455, "answer_count": 7, "score": 0, "last_activity_date": 1525708253, "creation_date": 1525682568, "last_edit_date": 1525686188, "question_id": 50210230, "link": "https://stackoverflow.com/questions/50210230/camelize-up-to-a-certain-part-of-a-string", "title": "Camelize up to a certain part of a string", "body": "<p>I have:</p>\n\n<pre><code>s = \"like_so__case\"\n</code></pre>\n\n<p><code>camelize</code> gives this:</p>\n\n<pre><code>s.camelize # =&gt; \"LikeSoCase\"\n</code></pre>\n\n<p>I'm looking for conversion up to a double underscore <code>__</code> to get:</p>\n\n<pre><code>\"LikeSo__case\"\n</code></pre>\n\n<p>How can I camelize only up to a certain part of a string?</p>\n"}, {"tags": ["ruby-on-rails", ".net", "ruby", "validation", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 117, "user_id": 2924562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CbKx.jpg?s=128&g=1", "display_name": "Am33d", "link": "https://stackoverflow.com/users/2924562/am33d"}, "edited": false, "score": 0, "creation_date": 1525686881, "post_id": 50209746, "comment_id": 87439759, "body": "thanks for replying. I tried the above snippet it didn&#39;t work but this works:    validates :name,            :presence =&gt; {:message =&gt; &quot;Title can&#39;t be blank.&quot; },           :uniqueness =&gt; {:message =&gt; &quot;Title already exists.&quot;},           :length =&gt; { :maximum =&gt; 5, :message =&gt; &quot;Must be less than 5 characters&quot;}"}, {"owner": {"reputation": 117, "user_id": 2924562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CbKx.jpg?s=128&g=1", "display_name": "Am33d", "link": "https://stackoverflow.com/users/2924562/am33d"}, "edited": false, "score": 0, "creation_date": 1525686958, "post_id": 50209746, "comment_id": 87439803, "body": "I had to add messages to each validations"}, {"owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "reply_to_user": {"reputation": 117, "user_id": 2924562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CbKx.jpg?s=128&g=1", "display_name": "Am33d", "link": "https://stackoverflow.com/users/2924562/am33d"}, "edited": false, "score": 0, "creation_date": 1525687268, "post_id": 50209746, "comment_id": 87440016, "body": "You should only need to do that if you need to override the standard rails error messages, otherwise the first version I gave should work.  I updated answer also with newer ruby syntax with custom messages."}], "tags": [], "owner": {"reputation": 8733, "user_id": 3625433, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/N7qK6.png?s=128&g=1", "display_name": "lacostenycoder", "link": "https://stackoverflow.com/users/3625433/lacostenycoder"}, "is_accepted": false, "score": 0, "last_activity_date": 1525687196, "last_edit_date": 1525687196, "creation_date": 1525680715, "answer_id": 50209746, "question_id": 50209084, "link": "https://stackoverflow.com/questions/50209084/is-there-something-like-nets-data-annotations-in-rails/50209746#50209746", "title": "Is there something like .NET&#39;s data annotations in rails?", "body": "<p>Rails uses ActiveRecord validations.  In many cases the default validations are easy to set up.  But if you want/or need customized validations that can all be done as well.   Read the documentation here:  </p>\n\n<p><a href=\"http://guides.rubyonrails.org/active_record_validations.html\" rel=\"nofollow noreferrer\">http://guides.rubyonrails.org/active_record_validations.html</a></p>\n\n<p>In your case this type of validation is built in to rails so it's simple as adding 1 line to your model:</p>\n\n<pre><code>class MyModel\n  validates :my_field_name, length: { maximum: 3 }, allow_blank: true\nend\n</code></pre>\n\n<p>This will validate the maximum length of your field.  You can also customize the validation error message:</p>\n\n<pre><code>class MyModel\n  validates :name, presence: {message: \"Title can't be blank.\" }, uniqueness: {message: \"Title already exists.\"}, length: { maximum: 5, message: \"Must be less than 5 characters\"}\nend\n</code></pre>\n"}], "owner": {"reputation": 117, "user_id": 2924562, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9CbKx.jpg?s=128&g=1", "display_name": "Am33d", "link": "https://stackoverflow.com/users/2924562/am33d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 52, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1525687196, "creation_date": 1525678059, "question_id": 50209084, "link": "https://stackoverflow.com/questions/50209084/is-there-something-like-nets-data-annotations-in-rails", "title": "Is there something like .NET&#39;s data annotations in rails?", "body": "<p>I was looking for something similar to .net's data annotations in rails, something like <a href=\"https://www.codeproject.com/Articles/826304/Basic-Introduction-to-Data-Annotation-in-NET-Frame\" rel=\"nofollow noreferrer\">this</a>. </p>\n\n<p>What I want to achieve by this is: I have some fields (they could be nil also) for which I want to check the length and if the length exceeds I want to display an error message. </p>\n\n<p>I want to club all the error messages related to, say all blog posts (which again have many separate fields) and then display them at once.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1525676859, "post_id": 50208742, "comment_id": 87434349, "body": "Make sure <code>@activity</code> is not <code>nil</code> before calling  method on it"}, {"owner": {"reputation": 19261, "user_id": 4758119, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/F4dJY.jpg?s=128&g=1", "display_name": "Deepak Mahakale", "link": "https://stackoverflow.com/users/4758119/deepak-mahakale"}, "edited": false, "score": 0, "creation_date": 1525676942, "post_id": 50208742, "comment_id": 87434391, "body": "Or you should use <code>&lt;%= @activity.try(:destination).try(:name) %&gt;</code> if you can&#39;t be sure @activity will be nil"}, {"owner": {"reputation": 4644, "user_id": 2594185, "user_type": "registered", "profile_image": "https://graph.facebook.com/100003773788931/picture?type=large", "display_name": "Jagdeep Singh", "link": "https://stackoverflow.com/users/2594185/jagdeep-singh"}, "edited": false, "score": 0, "creation_date": 1525692445, "post_id": 50208742, "comment_id": 87443004, "body": "Show the controller code where you set <code>@activity</code> and also post the logs for 2 requests 1. where the error occurs 2. where it doesn&#39;t ."}], "answers": [{"comments": [{"owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "edited": false, "score": 0, "creation_date": 1525676914, "post_id": 50208763, "comment_id": 87434376, "body": "If its nil, it should remain nil. Why does it fix itself on reloading?"}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "reply_to_user": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "edited": false, "score": 0, "creation_date": 1525677617, "post_id": 50208763, "comment_id": 87434731, "body": "It doesn&#39;t fix itself. It remains <code>nil</code>. Hence the error."}, {"owner": {"reputation": 1066, "user_id": 6204421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0yeJN.jpg?s=128&g=1", "display_name": "Santosh Aryal", "link": "https://stackoverflow.com/users/6204421/santosh-aryal"}, "edited": false, "score": 0, "creation_date": 1525677854, "post_id": 50208763, "comment_id": 87434868, "body": "Its not nill always. But it remains nil sometimes if the page is opened in new browser it returns nil but when refreshed the page it loads smoothly."}, {"owner": {"reputation": 1066, "user_id": 6204421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0yeJN.jpg?s=128&g=1", "display_name": "Santosh Aryal", "link": "https://stackoverflow.com/users/6204421/santosh-aryal"}, "edited": false, "score": 0, "creation_date": 1525677943, "post_id": 50208763, "comment_id": 87434922, "body": "Destination has activity and hence it not nil always."}, {"owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "reply_to_user": {"reputation": 1066, "user_id": 6204421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0yeJN.jpg?s=128&g=1", "display_name": "Santosh Aryal", "link": "https://stackoverflow.com/users/6204421/santosh-aryal"}, "edited": false, "score": 0, "creation_date": 1525678043, "post_id": 50208763, "comment_id": 87434962, "body": "@SantoshAryal I wouldn\u2019t worry about this bug if I were you unless its being produced on production."}, {"owner": {"reputation": 1066, "user_id": 6204421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0yeJN.jpg?s=128&g=1", "display_name": "Santosh Aryal", "link": "https://stackoverflow.com/users/6204421/santosh-aryal"}, "edited": false, "score": 0, "creation_date": 1525678326, "post_id": 50208763, "comment_id": 87435120, "body": "This bug comes in both production and development environment. And comes sometimes."}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 0, "last_activity_date": 1525676789, "creation_date": 1525676789, "answer_id": 50208763, "question_id": 50208742, "link": "https://stackoverflow.com/questions/50208742/actionviewtemplateerror-in-rails-application/50208763#50208763", "title": "ActionView::Template::Error in Rails Application", "body": "<p>It has nothing particularly to do with the template. Your <code>@activity</code> is sometimes <code>nil</code>, and sometimes not, just as the error message says.</p>\n"}, {"tags": [], "owner": {"reputation": 655, "user_id": 2267838, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/d5a108bc5392c7a355b756eaa0869465?s=128&d=identicon&r=PG", "display_name": "UsamaMan", "link": "https://stackoverflow.com/users/2267838/usamaman"}, "is_accepted": false, "score": 0, "last_activity_date": 1525677416, "creation_date": 1525677416, "answer_id": 50208922, "question_id": 50208742, "link": "https://stackoverflow.com/questions/50208742/actionviewtemplateerror-in-rails-application/50208922#50208922", "title": "ActionView::Template::Error in Rails Application", "body": "<p>I don\u2019t understand the unusual behaviour of the error appearing sometimes and not on the other times. Just to be on the safe side I think you should do one of the following things:</p>\n\n<pre><code>&lt;%= if @activity.destination %&gt;\n  &lt;%= @activity.destination.try(:name) %&gt;\n&lt;%= end %&gt;\n</code></pre>\n\n<p>Or</p>\n\n<pre><code>&lt;%= @activity&amp;.destination.try(:name) %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 8500089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/YIT6I.jpg?s=128&g=1", "display_name": "Rasna Shakya", "link": "https://stackoverflow.com/users/8500089/rasna-shakya"}, "is_accepted": false, "score": 1, "last_activity_date": 1526374273, "last_edit_date": 1526374273, "creation_date": 1525682662, "answer_id": 50210248, "question_id": 50208742, "link": "https://stackoverflow.com/questions/50208742/actionviewtemplateerror-in-rails-application/50210248#50210248", "title": "ActionView::Template::Error in Rails Application", "body": "<pre><code>ActionView::Template::Error (undefined method `destination' for nil:NilClass)\n</code></pre>\n\n<p>This means @activity is nil. so you can do like</p>\n\n<pre><code>&lt;% if @activity.present? %&gt;\n  &lt;%= @activity.destination.try(:name) %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This will solve your problem.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4960133, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bc9dc7c5fa2a0b4728b29c89cebd0129?s=128&d=identicon&r=PG&f=1", "display_name": "Harikesh Kolekar", "link": "https://stackoverflow.com/users/4960133/harikesh-kolekar"}, "is_accepted": false, "score": 0, "last_activity_date": 1525682775, "creation_date": 1525682775, "answer_id": 50210284, "question_id": 50208742, "link": "https://stackoverflow.com/questions/50208742/actionviewtemplateerror-in-rails-application/50210284#50210284", "title": "ActionView::Template::Error in Rails Application", "body": "<p>I don\u2019t understand the unusual behaviour of the error appearing sometimes and not on the other times. Just to be on the safe side I think you should do one of the following things:</p>\n\n<p><code>&lt;%= @activity.try(:destination).try(:name) %&gt;\n</code></p>\n"}], "owner": {"reputation": 1066, "user_id": 6204421, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/0yeJN.jpg?s=128&g=1", "display_name": "Santosh Aryal", "link": "https://stackoverflow.com/users/6204421/santosh-aryal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 703, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1526374273, "creation_date": 1525676707, "last_edit_date": 1525676871, "question_id": 50208742, "link": "https://stackoverflow.com/questions/50208742/actionviewtemplateerror-in-rails-application", "title": "ActionView::Template::Error in Rails Application", "body": "<p>For this code in the view,</p>\n\n<pre><code>&lt;%= @activity.destination.try(:name) %&gt;\n</code></pre>\n\n<p>I sometimes get a template error:</p>\n\n<pre><code>ActionView::Template::Error (undefined method `destination' for nil:NilClass)\n</code></pre>\n\n<p>and sometimes not.</p>\n\n<p>What type of bug is this?</p>\n"}]