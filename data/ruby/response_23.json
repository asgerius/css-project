[{"tags": ["ruby-on-rails", "ruby", "heroku"], "answers": [{"comments": [{"owner": {"reputation": 23, "user_id": 5021904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1af39c7ae0154c5573147c81b69649?s=128&d=identicon&r=PG&f=1", "display_name": "halois", "link": "https://stackoverflow.com/users/5021904/halois"}, "edited": false, "score": 0, "creation_date": 1434586620, "post_id": 30904429, "comment_id": 49847551, "body": "I thought this was an issue too but I have not made any changes to @user which was working. It&#39;s very peculiar. I have uploaded the code from my controller to the bottom."}, {"owner": {"reputation": 2597, "user_id": 1329321, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/c3c2bc221f92e4a674ac01510cf900f0?s=128&d=identicon&r=PG", "display_name": "Mike Manfrin", "link": "https://stackoverflow.com/users/1329321/mike-manfrin"}, "reply_to_user": {"reputation": 23, "user_id": 5021904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1af39c7ae0154c5573147c81b69649?s=128&d=identicon&r=PG&f=1", "display_name": "halois", "link": "https://stackoverflow.com/users/5021904/halois"}, "edited": false, "score": 0, "creation_date": 1434586743, "post_id": 30904429, "comment_id": 49847569, "body": "Your navbar code references <code>@user</code> on all pages -- so your index page will attempt to hit <code>@user</code> when it has not been set on your index action."}, {"owner": {"reputation": 23, "user_id": 5021904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1af39c7ae0154c5573147c81b69649?s=128&d=identicon&r=PG&f=1", "display_name": "halois", "link": "https://stackoverflow.com/users/5021904/halois"}, "edited": false, "score": 1, "creation_date": 1434588604, "post_id": 30904429, "comment_id": 49848026, "body": "Wow damn. It was working even without that line, I somehow deleted it before. Now I finally see it. Thank you Mike!"}], "tags": [], "owner": {"reputation": 2597, "user_id": 1329321, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/c3c2bc221f92e4a674ac01510cf900f0?s=128&d=identicon&r=PG", "display_name": "Mike Manfrin", "link": "https://stackoverflow.com/users/1329321/mike-manfrin"}, "is_accepted": false, "score": 2, "last_activity_date": 1434585748, "creation_date": 1434585748, "answer_id": 30904429, "question_id": 30904320, "link": "https://stackoverflow.com/questions/30904320/heroku-deployment-ruby-on-rails-log-error-cannot-find-my-column-variable/30904429#30904429", "title": "Heroku Deployment Ruby on Rails log error (cannot find my column variable?)", "body": "<p>The issue isn't to do with Heroku.</p>\n\n<p>In your view code, you are referencing <code>@user.id</code> -- the error being returned (\"<code>ActionView::Template::Error (undefined method 'id' for nil:NilClass)</code>\") means that you are calling <code>:id</code> on <code>nil</code> -- which means <code>@user</code> is <code>nil</code>.</p>\n\n<p>Check your controller code for where you are assigning <code>@user</code> and try to see why it might be empty. If you can't figure it out, edit your post to show the controller code.  </p>\n"}], "owner": {"reputation": 23, "user_id": 5021904, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5e1af39c7ae0154c5573147c81b69649?s=128&d=identicon&r=PG&f=1", "display_name": "halois", "link": "https://stackoverflow.com/users/5021904/halois"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434586438, "creation_date": 1434585034, "last_edit_date": 1434586438, "question_id": 30904320, "link": "https://stackoverflow.com/questions/30904320/heroku-deployment-ruby-on-rails-log-error-cannot-find-my-column-variable", "title": "Heroku Deployment Ruby on Rails log error (cannot find my column variable?)", "body": "<p>I am trying to deploy a ruby on rails project to Heroku. I successfully did this the first time but then I was trying to update jquery-turbolinks and somehow the entire application will no longer launch. Instead I simply have \"something went wrong\" error. I've reverted everything back to the original code but it seems I still cannot launch the application. I've tried to bundle update and heroku run rake db:migrate but these do not seem to fix the problem.</p>\n\n<p>heroku logs say:</p>\n\n<pre><code>2015-06-17T22:57:00.131666+00:00 app[web.1]:\n2015-06-17T22:57:00.687644+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=safe-dusk-1738.herokuapp.com request_id=ebbc37e0-825c-4c56-889e-93b40b0439f0 fwd=\"65.101.157.210\" dyno=web.1 connect=1ms service=6ms status=304 bytes=133\n2015-06-17T23:02:57.060664+00:00 heroku[slug-compiler]: Slug compilation started\n2015-06-17T23:02:57.060684+00:00 heroku[slug-compiler]: Slug compilation finished\n2015-06-17T23:02:57.005801+00:00 heroku[api]: Deploy 658b38c by email@gmail.com\n2015-06-17T23:02:57.005801+00:00 heroku[api]: Release v48 created by email@gmail.com\n2015-06-17T23:02:57.117163+00:00 heroku[web.1]: State changed from up to starting\n2015-06-17T23:03:00.396169+00:00 heroku[web.1]: Stopping all processes with SIGTERM\n2015-06-17T23:03:01.250804+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 18412 -e production`\n2015-06-17T23:03:01.190809+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:170:in `block in start'\n2015-06-17T23:03:01.190799+00:00 app[web.1]: [2015-06-17 23:03:01] FATAL SignalException: SIGTERM\n2015-06-17T23:03:01.190806+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:170:in `select'\n2015-06-17T23:03:01.190816+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/rack-1.5.4/lib/rack/server.rb:264:in `start'\n2015-06-17T23:03:01.190812+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:160:in `start'\n2015-06-17T23:03:01.190811+00:00 app[web.1]:    /app/vendor/ruby-2.0.0/lib/ruby/2.0.0/webrick/server.rb:32:in `start'\n2015-06-17T23:03:01.190820+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:81:in `block in server'\n2015-06-17T23:03:01.190825+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:40:in `run_command!'\n2015-06-17T23:03:01.190814+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/rack-1.5.4/lib/rack/handler/webrick.rb:14:in `run'\n2015-06-17T23:03:01.190818+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.1.8/lib/rails/commands/server.rb:69:in `start'\n2015-06-17T23:03:01.190827+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.1.8/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2015-06-17T23:03:01.190822+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:76:in `tap' 2015-06-17T23:03:01.190824+00:00 app[web.1]:    /app/vendor/bundle/ruby/2.0.0/gems/railties-4.1.8/lib/rails/commands/commands_tasks.rb:76:in `server'\n2015-06-17T23:03:01.192619+00:00 app[web.1]: [2015-06-17 23:03:01] INFO  WEBrick::HTTPServer#start done.\n2015-06-17T23:03:01.190829+00:00 app[web.1]:    bin/rails:4:in `require'\n2015-06-17T23:03:01.190830+00:00 app[web.1]:    bin/rails:4:in `&lt;main&gt;'\n2015-06-17T23:03:01.192513+00:00 app[web.1]: [2015-06-17 23:03:01] INFO  going to shutdown ...\n2015-06-17T23:03:01.192717+00:00 app[web.1]: Exiting\n2015-06-17T23:03:02.390504+00:00 heroku[web.1]: Process exited with status 143\n2015-06-17T23:03:05.130317+00:00 heroku[web.1]: State changed from starting to up\n2015-06-17T23:03:05.072848+00:00 app[web.1]: [2015-06-17 23:03:05] INFO  WEBrick 1.3.1\n2015-06-17T23:03:05.073257+00:00 app[web.1]: [2015-06-17 23:03:05] INFO  WEBrick::HTTPServer#start: pid=3 port=18412\n2015-06-17T23:03:05.072881+00:00 app[web.1]: [2015-06-17 23:03:05] INFO  ruby 2.0.0 (2015-04-13) [x86_64-linux]\n2015-06-17T23:37:45.403520+00:00 app[web.1]: =&gt; Rails 4.1.8 application starting in production on http://0.0.0.0:18412\n2015-06-17T23:37:45.403516+00:00 app[web.1]: =&gt; Booting WEBrick\n2015-06-17T23:37:45.403523+00:00 app[web.1]: =&gt; Run `rails server -h` for more startup options\n2015-06-17T23:37:45.403527+00:00 app[web.1]: Started GET \"/\" for 65.101.157.210 at 2015-06-17 23:37:45 +0000\n2015-06-17T23:37:45.403524+00:00 app[web.1]: =&gt; Notice: server is listening on all interfaces (0.0.0.0). Consider using 127.0.0.1 (--binding option)\n2015-06-17T23:37:45.403526+00:00 app[web.1]: =&gt; Ctrl-C to shutdown server\n2015-06-17T23:37:51.001585+00:00 app[web.1]: Processing by UsersController#index as HTML\n2015-06-17T23:37:51.023671+00:00 heroku[router]: at=info method=GET path=\"/\" host=safe-dusk-1738.herokuapp.com request_id=2dc68f54-45b7-4f1d-92ab-10ebb6ec6749 fwd=\"65.101.157.210\" dyno=web.1 connect=2ms service=5671ms status=500 bytes=1754\n2015-06-17T23:37:51.015670+00:00 app[web.1]:   Rendered partials/_navbar.html.erb (1.1ms)\n2015-06-17T23:37:51.015741+00:00 app[web.1]:   Rendered users/index.html.erb within layouts/application (3.2ms)\n2015-06-17T23:37:51.017553+00:00 app[web.1]: ActionView::Template::Error (undefined method `id' for nil:NilClass):\n2015-06-17T23:37:51.017571+00:00 app[web.1]:\n2015-06-17T23:37:51.017554+00:00 app[web.1]:     30:       &lt;/ul&gt;\n2015-06-17T23:37:51.017557+00:00 app[web.1]:     32:       &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n2015-06-17T23:37:51.017565+00:00 app[web.1]:   app/views/partials/_navbar.html.erb:33:in `_app_views_partials__navbar_html_erb__120412911408632626_69924047825640'\n2015-06-17T23:37:51.015890+00:00 app[web.1]: Completed 500 Internal Server Error in 14ms\n2015-06-17T23:37:51.017563+00:00 app[web.1]:     36:           &lt;ul class=\"dropdown-menu\" role=\"menu\"&gt;\n2015-06-17T23:37:51.017556+00:00 app[web.1]:     31:       &lt;!-- Right Side of Nav Bar --&gt;\n2015-06-17T23:37:51.017559+00:00 app[web.1]:     33:         &lt;li&gt;&lt;a href=\"#\"&gt;Welcome back, &lt;%=@user.id%&gt;&lt;/a&gt;&lt;/li&gt;\n2015-06-17T23:37:51.017562+00:00 app[web.1]:     35:           &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-expanded=\"false\"&gt;Account&lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt;\n2015-06-17T23:37:51.017551+00:00 app[web.1]:\n2015-06-17T23:37:51.017560+00:00 app[web.1]:     34:         &lt;li class=\"dropdown\"&gt;\n2015-06-17T23:37:51.017569+00:00 app[web.1]:   app/views/users/index.html.erb:54:in `_app_views_users_index_html_erb__1269627799293070153_69924047657220'\n2015-06-17T23:37:51.017570+00:00 app[web.1]:\n2015-06-17T23:37:52.182325+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=safe-dusk-1738.herokuapp.com request_id=7857ae9b-7e46-4c6c-941c-52260c1a6622 fwd=\"65.101.157.210\" dyno=web.1 connect=2ms service=4ms status=200 bytes=228\n2015-06-17T23:38:49.323603+00:00 heroku[api]: Starting process with command `db:migrate` by email@gmail.com\n2015-06-17T23:38:54.317178+00:00 heroku[run.9167]: Awaiting client\n2015-06-17T23:38:54.345438+00:00 heroku[run.9167]: Starting process with command `db:migrate`\n2015-06-17T23:38:54.624462+00:00 heroku[run.9167]: State changed from starting to up\n2015-06-17T23:38:56.468635+00:00 heroku[run.9167]: State changed from up to complete\n2015-06-17T23:38:56.455801+00:00 heroku[run.9167]: Process exited with status 127\n2015-06-17T23:39:47.429999+00:00 heroku[api]: Starting process with command `bundle exec rake` by email@gmail.com\n2015-06-17T23:39:51.479879+00:00 heroku[run.4407]: Awaiting client\n2015-06-17T23:39:51.535925+00:00 heroku[run.4407]: Starting process with command `bundle exec rake`\n2015-06-17T23:39:51.778399+00:00 heroku[run.4407]: State changed from starting to up\n2015-06-17T23:39:56.754893+00:00 heroku[run.4407]: Process exited with status 1\n2015-06-17T23:39:56.762444+00:00 heroku[run.4407]: State changed from up to complete\n2015-06-17T23:40:47.681100+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by email@gmail.com\n2015-06-17T23:40:53.651168+00:00 heroku[run.8024]: Starting process with command `bundle exec rake db:migrate`\n2015-06-17T23:40:53.610009+00:00 heroku[run.8024]: Awaiting client\n2015-06-17T23:40:53.798975+00:00 heroku[run.8024]: State changed from starting to up\n2015-06-17T23:41:03.639977+00:00 heroku[run.8024]: State changed from up to complete\n2015-06-17T23:41:03.626657+00:00 heroku[run.8024]: Process exited with status 0\n2015-06-17T23:41:26.493897+00:00 heroku[api]: Starting process with command `rails console` by email@gmail.com\n2015-06-17T23:41:30.348681+00:00 heroku[run.8888]: Awaiting client\n2015-06-17T23:41:30.417375+00:00 heroku[run.8888]: Starting process with command `rails console`\n2015-06-17T23:41:30.609619+00:00 heroku[run.8888]: State changed from starting to up\n2015-06-17T23:42:01.623246+00:00 heroku[run.8888]: State changed from up to complete\n2015-06-17T23:42:01.590101+00:00 heroku[run.8888]: Process exited with status 0\n2015-06-17T23:42:11.021886+00:00 heroku[router]: at=info method=GET path=\"/\" host=safe-dusk-1738.herokuapp.com request_id=464abcfc-3e80-4c32-ac10-52c4cf0816d1 fwd=\"65.101.157.210\" dyno=web.1 connect=2ms service=12ms status=500 bytes=1754\n2015-06-17T23:42:11.012701+00:00 app[web.1]: Started GET \"/\" for 65.101.157.210 at 2015-06-17 23:42:11 +0000\n2015-06-17T23:42:11.017657+00:00 app[web.1]:   Rendered partials/_navbar.html.erb (0.8ms)\n2015-06-17T23:42:11.015571+00:00 app[web.1]: Processing by UsersController#index as HTML\n2015-06-17T23:42:11.017726+00:00 app[web.1]:   Rendered users/index.html.erb within layouts/application (1.0ms)\n2015-06-17T23:42:11.017834+00:00 app[web.1]: Completed 500 Internal Server Error in 2ms\n2015-06-17T23:42:11.019330+00:00 app[web.1]:\n2015-06-17T23:42:11.019332+00:00 app[web.1]: ActionView::Template::Error (undefined method `id' for nil:NilClass):\n2015-06-17T23:42:11.019334+00:00 app[web.1]:     30:       &lt;/ul&gt;\n2015-06-17T23:42:11.019337+00:00 app[web.1]:     32:       &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n2015-06-17T23:42:11.019335+00:00 app[web.1]:     31:       &lt;!-- Right Side of Nav Bar --&gt;\n2015-06-17T23:42:11.019340+00:00 app[web.1]:     34:         &lt;li class=\"dropdown\"&gt;\n2015-06-17T23:42:11.019338+00:00 app[web.1]:     33:         &lt;li&gt;&lt;a href=\"#\"&gt;Welcome back, &lt;%=@user.id%&gt;&lt;/a&gt;&lt;/li&gt;\n2015-06-17T23:42:11.019342+00:00 app[web.1]:     35:           &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-expanded=\"false\"&gt;Account&lt;span class=\"caret\"&gt;&lt;/span&gt;&lt;/a&gt;\n2015-06-17T23:42:11.019343+00:00 app[web.1]:     36:           &lt;ul class=\"dropdown-menu\" role=\"menu\"&gt;\n2015-06-17T23:42:11.019345+00:00 app[web.1]:   app/views/partials/_navbar.html.erb:33:in `_app_views_partials__navbar_html_erb__120412911408632626_69924047825640'\n2015-06-17T23:42:11.019347+00:00 app[web.1]:   app/views/users/index.html.erb:54:in `_app_views_users_index_html_erb__1269627799293070153_69924047657220'\n2015-06-17T23:42:11.019348+00:00 app[web.1]:\n2015-06-17T23:42:11.019350+00:00 app[web.1]:\n2015-06-17T23:42:12.001393+00:00 heroku[router]: at=info method=GET path=\"/favicon.ico\" host=safe-dusk-1738.herokuapp.com request_id=d2aa6285-2b5a-4ac6-9a64-7fe476cdef8f fwd=\"65.101.157.210\" dyno=web.1 connect=2ms service=4ms status=304 bytes=133\n</code></pre>\n\n<hr>\n\n<p>User Controller Code:\nCan't seem to figure out what is wrong this was all working before with no problems. </p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def index\n    if flash[:errors]\n      @errors = flash[:errors]\n    end\n    if flash[:success]\n      @success = flash[:success]\n    end\n  end\n\n  def show\n    @user = User.find(params[:id])\n  end\n\n  def edit\n    @user = User.find(params[:id])\n  end\n\n  def create\n    @user = User.new(user_params)\n    if @user.save\n      flash[:success] = \"User successfully created!\"\n      session[:user_id] = @user.id\n      redirect_to '/mains'\n    else\n      flash[:errors] = @user.errors.full_messages\n      redirect_to '/users'\n    end\n  end\n\n  private\n    def user_params\n      params.require(:user).permit(:name, :email, :password,       :password_confirmation)\n    end\nend\n</code></pre>\n"}, {"tags": ["ios", "ruby", "gem", "cocoapods"], "comments": [{"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1434589709, "post_id": 30904194, "comment_id": 49848263, "body": "if it&#39;s a gem the normal gem things should apply. I would try &#39;bundle rake install&#39; read through this: <a href=\"http://rakeroutes.com/blog/lets-write-a-gem-part-one/\" rel=\"nofollow noreferrer\">rakeroutes.com/blog/lets-write-a-gem-part-one</a> <a href=\"http://rakeroutes.com/blog/lets-write-a-gem-part-two/\" rel=\"nofollow noreferrer\">rakeroutes.com/blog/lets-write-a-gem-part-two</a>"}], "answers": [{"tags": [], "owner": {"reputation": 34778, "user_id": 382906, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c054847fb6fd89d40f3f4ad44d6daaf1?s=128&d=identicon&r=PG", "display_name": "locoboy", "link": "https://stackoverflow.com/users/382906/locoboy"}, "is_accepted": false, "score": -1, "last_activity_date": 1434589430, "creation_date": 1434589430, "answer_id": 30904918, "question_id": 30904194, "link": "https://stackoverflow.com/questions/30904194/how-to-build-gem-from-modified-source/30904918#30904918", "title": "How to build gem from modified source?", "body": "<p>Probably need to modify the Gemfile directly and point it to your repo on git when installing it.</p>\n"}, {"tags": [], "owner": {"reputation": 141, "user_id": 2297531, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/505d7d4bbfbee809921005441e4e9a5d?s=128&d=identicon&r=PG", "display_name": "Jason Huang", "link": "https://stackoverflow.com/users/2297531/jason-huang"}, "is_accepted": true, "score": 0, "last_activity_date": 1434612140, "creation_date": 1434612140, "answer_id": 30908947, "question_id": 30904194, "link": "https://stackoverflow.com/questions/30904194/how-to-build-gem-from-modified-source/30908947#30908947", "title": "How to build gem from modified source?", "body": "<p>CocoaPods is a rubygem, if you are using bundler, specify local path in your Gemfile.</p>\n\n<p>gem 'cocoapods', :path => '~/modified_local_path'</p>\n\n<p>Actually, the CocoaPods document described the way to used unreleased version: <a href=\"https://guides.cocoapods.org/using/a-gemfile.html#using-master-cocoapods\" rel=\"nofollow\">https://guides.cocoapods.org/using/a-gemfile.html#using-master-cocoapods</a></p>\n"}], "owner": {"reputation": 26717, "user_id": 235334, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/6c3b2831a6074aea2c7e3e228f46ea7b?s=128&d=identicon&r=PG", "display_name": "TruMan1", "link": "https://stackoverflow.com/users/235334/truman1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 30908947, "answer_count": 2, "score": 0, "last_activity_date": 1436097543, "creation_date": 1434584039, "last_edit_date": 1436097543, "question_id": 30904194, "link": "https://stackoverflow.com/questions/30904194/how-to-build-gem-from-modified-source", "title": "How to build gem from modified source?", "body": "<p>I downloaded <a href=\"https://github.com/CocoaPods/CocoaPods\" rel=\"nofollow\">https://github.com/CocoaPods/CocoaPods</a> locally and modified the source, but now I want to build it into the <code>/bin</code> folder to test out my modifications locally. How do I do this so I can do <code>..../bin/pod install</code>?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 24747, "user_id": 1512956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JMDF.jpg?s=128&g=1", "display_name": "Marcelo De Polli", "link": "https://stackoverflow.com/users/1512956/marcelo-de-polli"}, "edited": false, "score": 1, "creation_date": 1434582994, "post_id": 30903984, "comment_id": 49846701, "body": "You&#39;re using an instance variable named <code>@blogs</code> in your view, but there isn&#39;t a corresponding controller action named <code>show</code> where you define that instance variable."}], "answers": [{"tags": [], "owner": {"reputation": 3232, "user_id": 2430657, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/8bfe1d100d07683f88d44c5fb17bc416?s=128&d=identicon&r=PG", "display_name": "Alexander", "link": "https://stackoverflow.com/users/2430657/alexander"}, "is_accepted": true, "score": 1, "last_activity_date": 1434584860, "last_edit_date": 1434584860, "creation_date": 1434584528, "answer_id": 30904263, "question_id": 30903984, "link": "https://stackoverflow.com/questions/30903984/showing-latest-blog-posts-in-rails/30904263#30904263", "title": "Showing latest blog posts in Rails", "body": "<p>Order your blog posts by date created when retrieving them from the database. Here's how your <code>index</code> action would look:</p>\n\n<pre><code>def index\n  @blog = Blog.order(\"created_at DESC\")\nend\n</code></pre>\n\n<p>This retrieves all blog posts from your database by their creation date in descending order. The most recent post will be at the beginning of the array (<code>@blog[0]</code>), while the oldest post will be at the very end of the array.</p>\n\n<p>I would recommend you pluralize the instance variable name so you know that it is an array:</p>\n\n<pre><code>def index\n  @blogs = Blog.order(\"created_at DESC\")\nend\n</code></pre>\n\n<p>Check out this <a href=\"http://guides.rubyonrails.org/active_record_querying.html#ordering\" rel=\"nofollow\">link</a> for more details on ordering using Active Record.</p>\n"}], "owner": {"reputation": 556, "user_id": 4316935, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/91c11f0640e132006aaddce32c727fe7?s=128&d=identicon&r=PG", "display_name": "Rod Argumedo", "link": "https://stackoverflow.com/users/4316935/rod-argumedo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 299, "favorite_count": 0, "accepted_answer_id": 30904263, "answer_count": 1, "score": 0, "last_activity_date": 1434584860, "creation_date": 1434582574, "question_id": 30903984, "link": "https://stackoverflow.com/questions/30903984/showing-latest-blog-posts-in-rails", "title": "Showing latest blog posts in Rails", "body": "<blockquote>\n  <p>TL;DR How can I achieve this behavior? Is it there any other method I could particularly use?</p>\n</blockquote>\n\n<p>I have a Rails application that has blog functionality. I am trying to display all recent posts in descending order but with no luck. Here are my sources:</p>\n\n<p>app/controllers/blog_controller.rb</p>\n\n<pre><code>class BlogController &lt; ApplicationController\n before_filter :authenticate_user!, except: [:index, :show]\n before_filter :set_blog, only: [:show, :edit, :update, :destroy]\n\ndef index\n  @blog = Blog.all\nend\n\ndef new\n  @blog = Blog.new\nend\n\ndef create\n  @blog = Blog.new(blog_params)\n\n redirect_to_blog_on(@blog.save, :error_template =&gt; :new, :notice =&gt; 'Post successfully posted.')   \nend\n\ndef update\n\n  redirect_to_blog_on(@blog.update(blog_params), :error_template =&gt; :edit, :notice =&gt; 'Post updated successfully.')\nend\n\ndef destroy\n  @blog.destroy\n\n  respond_to do |format|\n   format.html { redirect_to blog_index_url, :notice =&gt; 'Post deleted successfully.' }\n end\nend\n\nprivate\n\ndef set_blog\n  @blog = Blog.find(params[:id])\nend\n\ndef blog_params\n  params.require(:blog).permit(:title, :content)\nend\n\ndef redirect_to_blog_on(condition, error_template: nil, notice: '')\n  respond_to do |format|\n    if condition\n      format.html { redirect_to @blog, notice: notice }\n      format.json { render :show, status: :created, location: @blog }\n    else\n      format.html { render error_template }\n      format.json { render json: @blog.errors, status: :unprocessable_entity }\n     end\n   end\n  end\n end\n</code></pre>\n\n<p>Upon show.html.erb, I have a title and body content to begin with and I thought I could do some <code>Latest Posts</code> code but it failed me miserably.</p>\n\n<p>app/views/blog/show.html.erb</p>\n\n<pre><code>&lt;div class=\"container\"&gt;\n  &lt;h1&gt;&lt;%= @blog.title %&gt;&lt;hr&gt;&lt;/h1&gt;\n&lt;div class=\"row\"&gt;\n    &lt;div class='col-md-4'&gt;\n        &lt;p&gt;&lt;i class=\"glyphicon glyphicon-time\"&gt;&lt;/i&gt; Date Posted: &lt;%= @blog.created_at.to_s(:long) %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-offset-0\"&gt;\n        &lt;p&gt;&lt;% if @blog.created_at != @blog.updated_at %&gt;&lt;i class=\"glyphicon glyphicon-ok\"&gt;&lt;/i&gt; Updated at: &lt;%= @blog.updated_at.to_s(:long) %&gt;&lt;% end %&gt;&lt;/p&gt;\n    &lt;/div&gt;\n&lt;/div&gt;\n&lt;br&gt;\n&lt;div class=\"row\"&gt;\n    &lt;div class=\"col-lg-7\"&gt;\n    &lt;p&gt;&lt;%= markdown @blog.content %&gt;&lt;/p&gt;\n    &lt;div class=\"col-md-3\"&gt;\n        &lt;% if user_signed_in? %&gt;\n            &lt;%= link_to edit_blog_path(@blog) do %&gt;&lt;i class=\"glyphicon glyphicon-edit\"&gt;&lt;/i&gt; Edit&lt;% end %&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-3\"&gt;\n        &lt;% if user_signed_in? %&gt;\n            &lt;%= link_to blog_path(@blog), method: :delete, data: { confirm: 'Are you sure?' } do %&gt;&lt;i class=\"glyphicon glyphicon-trash\"&gt;&lt;/i&gt; Delete Post&lt;% end %&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"col-md-offset-8\"&gt;\n        &lt;h4&gt;Latest Posts&lt;/h4&gt;\n        &lt;% if @blog.present? %&gt;\n         &lt;% @blogs.each do |blog| %&gt;\n            &lt;%= link_to blog_path(blog) do %&gt;&lt;%= blog.title %&gt;&lt;% end %&gt;\n          &lt;% end %&gt;\n        &lt;% else %&gt;\n        &lt;h3&gt;Check back later!&lt;/h3&gt;\n        &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "inject"], "answers": [{"comments": [{"owner": {"reputation": 2597, "user_id": 1329321, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/c3c2bc221f92e4a674ac01510cf900f0?s=128&d=identicon&r=PG", "display_name": "Mike Manfrin", "link": "https://stackoverflow.com/users/1329321/mike-manfrin"}, "edited": false, "score": 0, "creation_date": 1434583234, "post_id": 30904044, "comment_id": 49846773, "body": "He&#39;s looking for the index at the point it passes, not the sum; which is what makes this tricky (inject doesn&#39;t pass index)."}, {"owner": {"reputation": 627, "user_id": 4880148, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09c41b8c824b6e23d9a8c6eb9ab4cb91?s=128&d=identicon&r=PG&f=1", "display_name": "treeseal7", "link": "https://stackoverflow.com/users/4880148/treeseal7"}, "edited": false, "score": 0, "creation_date": 1434583351, "post_id": 30904044, "comment_id": 49846802, "body": "thanks, that returns sum that first exceeds v, is it possible to return the index of the array that this occurred at?"}, {"owner": {"reputation": 627, "user_id": 4880148, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09c41b8c824b6e23d9a8c6eb9ab4cb91?s=128&d=identicon&r=PG&f=1", "display_name": "treeseal7", "link": "https://stackoverflow.com/users/4880148/treeseal7"}, "edited": false, "score": 1, "creation_date": 1434584265, "post_id": 30904044, "comment_id": 49847017, "body": "thanks, that works now.. didn&#39;t realise you could pass &#39;multiple memos&#39; using an array!"}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 627, "user_id": 4880148, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09c41b8c824b6e23d9a8c6eb9ab4cb91?s=128&d=identicon&r=PG&f=1", "display_name": "treeseal7", "link": "https://stackoverflow.com/users/4880148/treeseal7"}, "edited": false, "score": 1, "creation_date": 1434584704, "post_id": 30904044, "comment_id": 49847121, "body": "@wawmsey: that is an important realization! Yes, <code>inject</code> reduces an <code>Enumerable</code> down to a single value, however, that single value can be as complex as you want it to be \u2026 for example, itself an <code>Enumerable</code> or an <code>Array</code> or a <code>Hash</code> or \u2026"}], "tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": true, "score": 3, "last_activity_date": 1434583424, "last_edit_date": 1434583424, "creation_date": 1434582957, "answer_id": 30904044, "question_id": 30903949, "link": "https://stackoverflow.com/questions/30903949/ruby-inject-until-sum-exceeds-a-set-value-and-return-the-index-where-this-occurs/30904044#30904044", "title": "Ruby inject until sum exceeds a set value and return the index where this occurs", "body": "<p>For the sum:</p>\n\n<pre><code>a.inject do |sum,n|\n  break sum if sum &gt; v\n  sum + n\nend\n</code></pre>\n\n<p>For the index, idea is the same - you use the memo as an array and keep the sum in the first element:</p>\n\n<pre><code>a.inject([0,-1]) do |memo,n|\n  break [memo[0], memo[1]] if memo[0] &gt; v\n  [memo[0]+n, memo[1]+1]\nend\n</code></pre>\n\n<p>you need to look at the array after that</p>\n"}, {"tags": [], "owner": {"reputation": 2597, "user_id": 1329321, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/c3c2bc221f92e4a674ac01510cf900f0?s=128&d=identicon&r=PG", "display_name": "Mike Manfrin", "link": "https://stackoverflow.com/users/1329321/mike-manfrin"}, "is_accepted": false, "score": 1, "last_activity_date": 1434583389, "creation_date": 1434583389, "answer_id": 30904116, "question_id": 30903949, "link": "https://stackoverflow.com/questions/30903949/ruby-inject-until-sum-exceeds-a-set-value-and-return-the-index-where-this-occurs/30904116#30904116", "title": "Ruby inject until sum exceeds a set value and return the index where this occurs", "body": "<p>I think you'd have to <code>inject</code> over the indexes and access the outside array, since <code>inject</code> does not pass along the index; like so:</p>\n\n<pre><code>a.each_index.inject do |memo, i|\n  break i if memo &gt; v\n  memo + a[i]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 261375, "user_id": 174728, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eRO75.jpg?s=128&g=1", "display_name": "John La Rooy", "link": "https://stackoverflow.com/users/174728/john-la-rooy"}, "is_accepted": false, "score": 2, "last_activity_date": 1434593120, "last_edit_date": 1434593120, "creation_date": 1434591212, "answer_id": 30905109, "question_id": 30903949, "link": "https://stackoverflow.com/questions/30903949/ruby-inject-until-sum-exceeds-a-set-value-and-return-the-index-where-this-occurs/30905109#30905109", "title": "Ruby inject until sum exceeds a set value and return the index where this occurs", "body": "<p>A couple more ways</p>\n\n<pre><code>a.each_with_index.inject 0 do |acc, (n, idx)|\n     break idx - 1 if acc &gt; v\n     acc + n\nend\n</code></pre>\n\n<p>or</p>\n\n<pre><code>a.to_enum.with_index(-1).inject 0 do |acc, (n, idx)|\n     next acc + n if acc &lt; v\n     break idx\nend\n</code></pre>\n"}], "owner": {"reputation": 627, "user_id": 4880148, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09c41b8c824b6e23d9a8c6eb9ab4cb91?s=128&d=identicon&r=PG&f=1", "display_name": "treeseal7", "link": "https://stackoverflow.com/users/4880148/treeseal7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 871, "favorite_count": 2, "accepted_answer_id": 30904044, "answer_count": 3, "score": 3, "last_activity_date": 1434593120, "creation_date": 1434582355, "last_edit_date": 1434582931, "question_id": 30903949, "link": "https://stackoverflow.com/questions/30903949/ruby-inject-until-sum-exceeds-a-set-value-and-return-the-index-where-this-occurs", "title": "Ruby inject until sum exceeds a set value and return the index where this occurs", "body": "<p>With the following array and value:</p>\n\n<pre><code>v = 50\na = [10, 20, 25, 10, 15]\n</code></pre>\n\n<p>I want to iterate through the array adding up the values until the sum of these values exceeds the variable v. And then I want to be able to return the index in the array where that occurred. so...</p>\n\n<p>10 + 20 + 25 = 55 (which is the first point which the sum is greater that 'v')\nso index = 2</p>\n\n<p>Thanks for your help</p>\n"}, {"tags": ["ruby", "hash", "hashmap", "hashtable"], "comments": [{"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 1, "creation_date": 1434580713, "post_id": 30903539, "comment_id": 49846048, "body": "Here&#39;s a nice article which covers your question points: <a href=\"http://www.gotealeaf.com/blog/how-the-hash-works-in-ruby\" rel=\"nofollow noreferrer\">gotealeaf.com/blog/how-the-hash-works-in-ruby</a>"}, {"owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "edited": false, "score": 0, "creation_date": 1434581721, "post_id": 30903539, "comment_id": 49846378, "body": "this is more about a Hash in general or the implementation inRuby?"}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 1, "creation_date": 1434584561, "post_id": 30903539, "comment_id": 49847085, "body": "Ruby Under a Microscope has a complete explanation: <a href=\"https://rads.stackoverflow.com/amzn/click/com/1593275277\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">amazon.com/Ruby-Under-Microscope-Illustrated-Internals/dp/&hellip;</a>"}], "answers": [{"tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 2, "last_activity_date": 1434582245, "creation_date": 1434582245, "answer_id": 30903929, "question_id": 30903539, "link": "https://stackoverflow.com/questions/30903539/how-does-a-hash-in-a-language-like-ruby-work-under-the-hood/30903929#30903929", "title": "How does a hash (in a language like Ruby) work &quot;under the hood&quot;?", "body": "<p>If you are hardcore about this you could look at the implementation directly. This is what the hash ends up using:\n<a href=\"https://github.com/ruby/ruby/blob/c8b3f1b470e343e7408ab5883f046b1056d94ccc/st.c\" rel=\"nofollow\">https://github.com/ruby/ruby/blob/c8b3f1b470e343e7408ab5883f046b1056d94ccc/st.c</a></p>\n\n<p>The hash itself is here:\n<a href=\"https://github.com/ruby/ruby/blob/trunk/hash.c\" rel=\"nofollow\">https://github.com/ruby/ruby/blob/trunk/hash.c</a></p>\n\n<p>Most of the times, the article diego provided in comments will be more than enough</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 3, "last_activity_date": 1434583843, "creation_date": 1434583843, "answer_id": 30904170, "question_id": 30903539, "link": "https://stackoverflow.com/questions/30903539/how-does-a-hash-in-a-language-like-ruby-work-under-the-hood/30904170#30904170", "title": "How does a hash (in a language like Ruby) work &quot;under the hood&quot;?", "body": "<p>The Ruby Language Specification does not prescribe any particular implementation strategy for the <code>Hash</code> class. Every implementation is allowed to implement it however they want, provided they honor the contract.</p>\n\n<p>For example, here is Rubinius's implementation, which, being written in Ruby, is pretty easy to follow: <a href=\"https://github.com/rubinius/rubinius/blob/master/kernel/common/hash.rb\" rel=\"nofollow\"><code>kernel/common/hash.rb</code></a> This is a fairly traditional hashtable. (One other cool thing to note about this implementation is that it actually happens to be as fast as YARV's, which proves that Ruby code <em>can</em> be as efficient as hand-optimized C.)</p>\n\n<p>Rubinius also alternatively implements the <code>Hash</code> class with a <a href=\"https://wikipedia.org/wiki/Hash_array_mapped_trie\" rel=\"nofollow\">Hash Array Mapped Trie</a>: <a href=\"https://github.com/rubinius/rubinius/blob/master/kernel/common/hash_hamt.rb\" rel=\"nofollow\"><code>kernel/common/hash_hamt.rb</code></a> [Note: this implementation uses three VM primitives written in C++.]</p>\n\n<p>You can switch between those two implementations using a configuration option. So, not only is the <code>Hash</code> implementation different between different Ruby implementations, it might even be different between two runs of the exact same program on the exact same version of the exact same Ruby implementation!</p>\n\n<p>In IronRuby, Ruby's <code>Hash</code> class simply delegates to a .NET <code>System.Collections.Generic.Dictionary&lt;object, object&gt;</code>: <a href=\"https://github.com/IronLanguages/main/blob/master/Languages/Ruby/Ruby/Builtins/Hash.cs#L33\" rel=\"nofollow\"><code>Ruby/Builtins/Hash.cs</code></a>\nIn previous versions, it didn't even delegate, it was just simply a subclass: <a href=\"https://github.com/IronLanguages/main/blob/58be32c43694f2a35a96adacd863315513c5e8de/Languages/Ruby/Ruby/Builtins/Hash.cs#L30\" rel=\"nofollow\"><code>Ruby/Builtins/Hash.cs</code></a></p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 5651255, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/O0ujm.jpg?s=128&g=1", "display_name": "Dariya L.", "link": "https://stackoverflow.com/users/5651255/dariya-l"}, "is_accepted": false, "score": 0, "last_activity_date": 1529685885, "creation_date": 1529685885, "answer_id": 50992371, "question_id": 30903539, "link": "https://stackoverflow.com/questions/30903539/how-does-a-hash-in-a-language-like-ruby-work-under-the-hood/50992371#50992371", "title": "How does a hash (in a language like Ruby) work &quot;under the hood&quot;?", "body": "<p>In ruby 2.4, Hash table was moved to open addressing model, so I will describe only how Hash-tables structure works, but not how it is implemented in 2.4 and above.</p>\n\n<p>Let's imagine that we store all entries in an array. When we want to find something, we have to go through all the elements to match one. This can take a long time if we have a lot of elements and using a hash table lets us go directly to the cell with the required value by computing the hash function for that key.</p>\n\n<p>The hash table stores all values in the store (bins) groups, in a data structure similar to an array.</p>\n\n<p><a href=\"https://i.stack.imgur.com/3GJ5k.png\" rel=\"nofollow noreferrer\">How does hash table work</a></p>\n\n<p>When we add a new key-value pair, we need to calculate to which \"storage\" this pair will be inserted and we do this using the <code>.hash</code> method (hash function). The resulting value from the hash function is a pseudo-random number as it always produces the same number for the same value.</p>\n\n<p>Roughly speaking, <code>hash</code> returns the equivalent of the link to the memory location where \nthe current object is stored. However, for strings, the calculation is relative to the value.</p>\n\n<p>Having received a pseudo-random number, we have to calculate the number of the \"storage\" where the key-value pair will be stored.</p>\n\n<p><code>'a'.hash % 16 =&gt;9 \na - key \n16 - amount of storage \n9 - the storage number</code></p>\n\n<p>So, in Ruby the insertion works in the following way:</p>\n\n<p><a href=\"https://i.stack.imgur.com/QjBe2.png\" rel=\"nofollow noreferrer\">How insertion works</a></p>\n\n<ol>\n<li><p>It takes the hash of the key using the internal hash function.\n<code>:c.hash #=&gt; 2782</code></p></li>\n<li><p>After getting the hash value, with the help of modulo operation (2782 % 16) we will get the storage number where to keep our key-value pair <code>:d.hash % 16</code></p></li>\n<li><p>Add key-value to a linked list of the proper bin</p></li>\n</ol>\n\n<p>The search works as follows:</p>\n\n<p>The search works quite the same way:</p>\n\n<ol>\n<li>Determine \"hash\" function;</li>\n<li>Find \"storage\";</li>\n<li>Then iterate through the list and retrieve a hash element.</li>\n</ol>\n\n<p>In ruby, the average number of elements per bin is 5. With the increase in the number of records, the density of elements will grow in each repository (in fact, that size of hash-table is only 16 storages).</p>\n\n<p>If the density of the elements is large, for example 10_000 elements in one \"storage\", we will have to go through all the elements of this linked-list to find the corresponding record. And we'll go back to O(n) time, which is pretty bad.</p>\n\n<p>To avoid this, table rehash is applied. This means that hash-table size will be increased (up to the next number of - 16, 32, 64, 128, ...) and for all current elements the position in the \"storages\" will be recalculated.</p>\n\n<p>\"Rehash\" occurs when the number of all elements is greater than the maximum density multiplied by the current table size.</p>\n\n<p><code>81 &gt; 5 * 16 - rehash will be called when we add 81 elements to the table.</code></p>\n\n<p><code>num_entries &gt; ST_DEFAULT_MAX_DENSITY * table-&gt;num_bins</code></p>\n\n<p>When the number of entries reaches the maximum possible value for current hash-table, the number of \"storages\" in that hash-table increases (it takes next size-number from 16, 32, 64, 128), and it re-calculates and corrects positions for all entries in that hash.</p>\n\n<p>Check this article for a more in-depth explanation: <a href=\"https://anadea.info/blog/how-hash-table-works-ruby-examples\" rel=\"nofollow noreferrer\">Do You Know How Hash Table Works? (Ruby Examples)</a></p>\n"}], "owner": {"reputation": 671, "user_id": 1896742, "user_type": "registered", "accept_rate": 33, "profile_image": "https://i.stack.imgur.com/UrwvA.jpg?s=128&g=1", "display_name": "fibono", "link": "https://stackoverflow.com/users/1896742/fibono"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 358, "favorite_count": 0, "answer_count": 3, "score": 1, "last_activity_date": 1529685885, "creation_date": 1434580094, "question_id": 30903539, "link": "https://stackoverflow.com/questions/30903539/how-does-a-hash-in-a-language-like-ruby-work-under-the-hood", "title": "How does a hash (in a language like Ruby) work &quot;under the hood&quot;?", "body": "<p>I've read here and there about hash maps/tables, and can kind of understand the concept that a hash table is essentially a finite-sized array. The function could use the modulus operator to determine which index in the array corresponds to a particular key. If collisions occur, then a linked-list can be implemented to store all the collided values. This is my very-novice understanding, and I hope someone can expound on it/correct it in the context of a Ruby hash. In Ruby, all you really have to do is </p>\n\n<pre><code>hash = {}    \nhash[key] = value\n</code></pre>\n\n<p>and this creates a key with the corresponding value. Say that you're just storing a bunch of symbols as keys and numbers as values:</p>\n\n<pre><code>hash[:a] = 1\nhash[:b] = 2\n...\n</code></pre>\n\n<p>What exactly is happening under the hood in terms of storing the values in arrays and linked-lists? What would be an example of a collision? </p>\n"}, {"tags": ["ruby", "jenkins", "bitnami"], "answers": [{"tags": [], "owner": {"reputation": 1110, "user_id": 819260, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/606e218741b0e0b3294c1595472df53b?s=128&d=identicon&r=PG", "display_name": "Beltran", "link": "https://stackoverflow.com/users/819260/beltran"}, "is_accepted": true, "score": 0, "last_activity_date": 1434630214, "creation_date": 1434630214, "answer_id": 30915268, "question_id": 30903401, "link": "https://stackoverflow.com/questions/30903401/bitnami-jenkins-cannot-execute-cli/30915268#30915268", "title": "Bitnami Jenkins cannot execute CLI", "body": "<p>Bitnami developer here. This operation is not permitted by the OS X sandbox system for App Store apps. You can download Jenkins for OS X at <a href=\"https://bitnami.com/stack/jenkins/installer\" rel=\"nofollow\">https://bitnami.com/stack/jenkins/installer</a> that installs Jenkins in a folder but it is not sandboxed. I hope it helps. </p>\n"}], "owner": {"reputation": 470, "user_id": 975813, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/f2ec9b229347944e707633fb30b2a4a9?s=128&d=identicon&r=PG", "display_name": "pprochazka72", "link": "https://stackoverflow.com/users/975813/pprochazka72"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 78, "favorite_count": 0, "accepted_answer_id": 30915268, "answer_count": 1, "score": 0, "last_activity_date": 1434630214, "creation_date": 1434579477, "question_id": 30903401, "link": "https://stackoverflow.com/questions/30903401/bitnami-jenkins-cannot-execute-cli", "title": "Bitnami Jenkins cannot execute CLI", "body": "<p>I just installed BitNami Stack for Jenkins from <a href=\"https://itunes.apple.com/us/app/bitnami-stack-for-jenkins/id598883005?mt=12\" rel=\"nofollow\">App store</a>. In my jobs I want to execute one of my CLI (stored in Library/Ruby/Gems...). However, the console output fails with the following:</p>\n\n<pre><code>`getwd': Operation not permitted - getcwd (Errno::EPERM)\n</code></pre>\n\n<p>I suspect that the BitNami Stack for Jenkins (Library/Constainers/com.bitnami.jenkins) does not have the right permissions to execute that CLI?</p>\n"}, {"tags": ["ruby", "minitest", "ruby-mocha"], "answers": [{"comments": [{"owner": {"reputation": 4365, "user_id": 504331, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f04eb63c5350fbf814d05377a7768ae7?s=128&d=identicon&r=PG&f=1", "display_name": "JSBach", "link": "https://stackoverflow.com/users/504331/jsbach"}, "edited": false, "score": 0, "creation_date": 1434613736, "post_id": 30905149, "comment_id": 49856611, "body": "Thanks! I do know dependency injection from all the DI frameworks around for other languages. When I started this small project, I chose to &quot;hardcode&quot; the use of the OuptutGenerator to &quot;make things simpler&quot; (this is just a learning project), and when this issue surfaced I didn&#39;t realize I could use DI to deal with that. Thanks for the answer, it was really helpful :)"}], "tags": [], "owner": {"reputation": 5548, "user_id": 1006183, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f4d4e7e12544f6e3c660481f3bcccb0f?s=128&d=identicon&r=PG", "display_name": "Matt Sanders", "link": "https://stackoverflow.com/users/1006183/matt-sanders"}, "is_accepted": true, "score": 1, "last_activity_date": 1434591589, "creation_date": 1434591589, "answer_id": 30905149, "question_id": 30903166, "link": "https://stackoverflow.com/questions/30903166/how-do-i-verify-the-number-of-elements-and-content-of-an-array-using-parameterma/30905149#30905149", "title": "How do I verify the number of elements and content of an array using ParameterMatchers?", "body": "<p>What you are testing here demonstrates a kind of hard coupling. That is your primary class is always dependent on <code>OutputGenerator</code> which makes testing your outputs tricky and can lead to a lot of pain if/when you have to refactor your designs.</p>\n\n<p>A good pattern for this is <a href=\"https://en.wikipedia.org/wiki/Dependency_injection\" rel=\"nofollow\">dependency injection</a>. With this you can just write a temporary ruby object you can use to evalute the output of your function however you want:</p>\n\n<pre><code># in your main class...\n\nclass PairGenerator\n\n  def initialize(opts={})\n    @generator = opts[:generator] || OutputGenerator\n  end\n\n  def generate_pairs()\n    # prepare things\n    pairs = calculate_pairs()\n\n    @generator.write_to_file(path, pairs)\n  end\n\nend\n\n# in the test file...\n\n# mock class to be used later, this can be at the bottom of the\n# test file but here I'm putting it above so you are already\n# aware of what it is doing\n#\nclass MockGenerator\n  attr_reader :path, :pairs\n\n  def write_to_file(path, pairs)\n    @path = path\n    @pairs = pairs\n  end\nend\n\ndef test_find_pair_for_participant_only_one_pair\n\n  participant = Object.new\n  participant.stubs(:name).returns(\"Participant\")\n  participant.stubs(:dept).returns(\"D1\")\n\n  participant_one = Object.new\n  participant_one.stubs(:name).returns(\"P2\")\n  participant_one.stubs(:dept).returns(\"D2\")\n\n  available_participants = [participant_one]\n\n  # set up a mock generator\n  mock_generator = MockGenerator.new\n\n  # feed the mock to a new PairGenerator object as a dependency\n  pair_generator = PairGenerator.new(generator: mock_generator)\n\n  # assuming this is needed from your example\n  pair_generator.stubs(:get_random_participant).returns(participant)\n\n  # execute the code\n  pair_generator.generator_pairs\n\n  # output state is now captured in the mock, you can evaluate for\n  # all the test cases you care about\n  assert_equal 2, mock_generator.pairs.length\n  assert mock_generator.pairs.include?(participant)\nend\n</code></pre>\n\n<p>Hope this helps! Dependency Injection is not always appropriate but it is great for cases like this. </p>\n\n<p>Some other posts about the use of dependency injection you might find helpful:</p>\n\n<ul>\n<li><a href=\"https://gist.github.com/blairanderson/8072d951a480a590f0bd\" rel=\"nofollow\">Dependency Injection in Ruby</a></li>\n<li><a href=\"http://brandonhilkert.com/blog/a-ruby-refactor-exploring-dependency-injection-options/\" rel=\"nofollow\">A Ruby Refactor: Dependency Injection Options</a></li>\n<li><a href=\"http://sporto.github.io/blog/2013/09/25/simple-dependency-injection/\" rel=\"nofollow\">Simple Dependency Injection in Ruby</a></li>\n</ul>\n"}], "owner": {"reputation": 4365, "user_id": 504331, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f04eb63c5350fbf814d05377a7768ae7?s=128&d=identicon&r=PG&f=1", "display_name": "JSBach", "link": "https://stackoverflow.com/users/504331/jsbach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 30905149, "answer_count": 1, "score": 1, "last_activity_date": 1610403110, "creation_date": 1434578489, "last_edit_date": 1610403110, "question_id": 30903166, "link": "https://stackoverflow.com/questions/30903166/how-do-i-verify-the-number-of-elements-and-content-of-an-array-using-parameterma", "title": "How do I verify the number of elements and content of an array using ParameterMatchers?", "body": "<p>I am learning Ruby with TDD using Mocha and MiniTest.\nI have a class that has one public method and many private methods, so the only method my tests are going to tests are the public one.</p>\n\n<p>This public method does some processing and creates an array which is sent to another object:</p>\n\n<pre><code>def generate_pairs()\n        # prepare things\n        pairs = calculate_pairs()\n\n        OutputGenerator.write_to_file(path, pairs)\n    end\n</code></pre>\n\n<p>Great. To test it, I would like to mock the <code>OutputGenerator.write_to_file(path, pairs)</code> method and verify the parameters. My first test I could sucessfully implement:</p>\n\n<pre><code>def test_find_pair_for_participant_empty_participant\n\n      available_participants = []\n\n      OutputGenerator.expects(:write_to_file).once.with('pairs.csv', [])\n      InputParser.stubs(:parse).once.returns(available_participants)\n\n      pair = @pairGenerator.generate_pairs\n\n    end\n</code></pre>\n\n<p>Now I would like to test with one pair of participants.\nI am trying this</p>\n\n<pre><code> def test_find_pair_for_participant_only_one_pair\n\n      participant = Object.new\n      participant.stubs(:name).returns(\"Participant\")\n      participant.stubs(:dept).returns(\"D1\")\n\n      participant_one = Object.new\n      participant_one.stubs(:name).returns(\"P2\")\n      participant_one.stubs(:dept).returns(\"D2\")\n\n\n      available_participants = [participant_one]\n\n      OutputGenerator.expects(:write_to_file).once.with('pairs.csv', equals([Pair.new(participant, participant_one)])) # here it fails, of course\n      InputParser.stubs(:parse).once.returns(available_participants)\n      @obj.stubs(:get_random_participant).returns(participant)\n\n      pair = @obj.generate_pairs\n\n    end\n</code></pre>\n\n<p>The problem is that equals will only match the obj reference, not the content.</p>\n\n<p>Is there any way I can verify the content of the array? Verifying the number of elements inside the array would also be extremely useful.</p>\n\n<p>ps: I am sorry if the code doesn't follow ruby standards, I am doing this project to learn the language.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 131, "user_id": 4975304, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2466799bc64e50824137dccf218404a4?s=128&d=identicon&r=PG&f=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/4975304/clint"}, "edited": false, "score": 0, "creation_date": 1434577649, "post_id": 30902944, "comment_id": 49844818, "body": "Ya, I thought of doing that. But I just wanted to know if there was any easier way that I didn&#39;t know of."}, {"owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "reply_to_user": {"reputation": 761, "user_id": 978697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a032742c661bfede53d68ec6c467984?s=128&d=identicon&r=PG", "display_name": "rlecaro2", "link": "https://stackoverflow.com/users/978697/rlecaro2"}, "edited": false, "score": 0, "creation_date": 1434598711, "post_id": 30902944, "comment_id": 49850277, "body": "@rlecaro2 - wut? <code>hasOwnProperty</code> is Javascript but the poster said he is using Ruby"}, {"owner": {"reputation": 761, "user_id": 978697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8a032742c661bfede53d68ec6c467984?s=128&d=identicon&r=PG", "display_name": "rlecaro2", "link": "https://stackoverflow.com/users/978697/rlecaro2"}, "edited": false, "score": 0, "creation_date": 1434664893, "post_id": 30902944, "comment_id": 49889770, "body": "@CodyCaughlan my bad."}], "tags": [], "owner": {"reputation": 31012, "user_id": 25398, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/3690dee254e9aa9d98ff964a70e89f23?s=128&d=identicon&r=PG", "display_name": "Cody Caughlan", "link": "https://stackoverflow.com/users/25398/cody-caughlan"}, "is_accepted": false, "score": 0, "last_activity_date": 1434577500, "creation_date": 1434577500, "answer_id": 30902944, "question_id": 30902894, "link": "https://stackoverflow.com/questions/30902894/ruby-find-a-value-in-a-complex-json-object/30902944#30902944", "title": "Ruby Find a value in a complex JSON object", "body": "<p>If you dont know the structure of the JSON then you will need to do more work to inspect all possible keys. </p>\n\n<p>You might just have to do a recursive descent and iterate over all keys until you find the key whose name matches <code>key</code> and then grab its value.</p>\n"}], "owner": {"reputation": 131, "user_id": 4975304, "user_type": "registered", "accept_rate": 54, "profile_image": "https://www.gravatar.com/avatar/2466799bc64e50824137dccf218404a4?s=128&d=identicon&r=PG&f=1", "display_name": "Clint", "link": "https://stackoverflow.com/users/4975304/clint"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 169, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434577500, "creation_date": 1434577271, "question_id": 30902894, "link": "https://stackoverflow.com/questions/30902894/ruby-find-a-value-in-a-complex-json-object", "title": "Ruby Find a value in a complex JSON object", "body": "<p>I need to find the value of a particular key (say \"key\") in a JSON object. Since I am getting the JSON object dynamically, I do not know the structure of the JSON object.</p>\n\n<p>Could anyone tel me an easy way to find the value of a key in such a JSON object?</p>\n"}, {"tags": ["ruby", "notifications"], "comments": [{"owner": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 1, "creation_date": 1434579167, "post_id": 30902493, "comment_id": 49845445, "body": "are you talking about a subclass overriding your method or opening up your class and re-defining the methods?"}, {"owner": {"reputation": 548, "user_id": 1926615, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8cec8813fb078fbc7d909b277da51261?s=128&d=identicon&r=PG", "display_name": "NMO", "link": "https://stackoverflow.com/users/1926615/nmo"}, "reply_to_user": {"reputation": 14340, "user_id": 2612259, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/70fec6995fdcaebf6362e10bd501f34f?s=128&d=identicon&r=PG", "display_name": "nPn", "link": "https://stackoverflow.com/users/2612259/npn"}, "edited": false, "score": 0, "creation_date": 1434979919, "post_id": 30902493, "comment_id": 49992900, "body": "Opening up a class and re-defining."}], "owner": {"reputation": 548, "user_id": 1926615, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/8cec8813fb078fbc7d909b277da51261?s=128&d=identicon&r=PG", "display_name": "NMO", "link": "https://stackoverflow.com/users/1926615/nmo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 33, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434575518, "creation_date": 1434575518, "question_id": 30902493, "link": "https://stackoverflow.com/questions/30902493/get-notified-when-a-method-gets-redefined", "title": "Get notified when a method gets redefined", "body": "<p>I'm implementing an application which tracks all methods which are added\nto a class. So I need to be notified everytime a new method gets added\nto a class. I do it this way:</p>\n\n<pre><code>class Class\n  def singleton_method_added(method_name)\n    puts \"new singleton method added\"\n    do_something_with_this_info(self, method_name)\n  end\n\n  def method_added(method_name)\n    puts \"new method added\"\n    do_something_with_this_info(self, method_name)\n  end\nend\n</code></pre>\n\n<p>Very simple, but very effective yet.</p>\n\n<p>However, I have one concern doing it this way: When another Ruby\nlibrary/application also implements method_added/singleton_method_added\nin the class Class, then my implementation would be overridden. This is\nvery bad since my whole application relies on the code above. I know\nthat I can't prevent other applications from redefining my implementation of method_added/singleton_method_added and thats ok since I don't want to break the implementation of those applications.\nHowever, at least I need to be notified when\nmethod_added/singleton_method_added methods get overridden so that I can\nreact properly.</p>\n\n<p>So my question: Does some kind of hook/callback exist in Ruby which gets\ncalled each time a method has been redefined?</p>\n"}, {"tags": ["ruby", "csv", "quotes"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 1, "creation_date": 1434579397, "post_id": 30902114, "comment_id": 49845557, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/4854900/how-do-i-force-one-field-in-rubys-csv-output-to-be-wrapped-with-double-quotes\">How do I force one field in Ruby&#39;s CSV output to be wrapped with double-quotes?</a>"}, {"owner": {"reputation": 34778, "user_id": 382906, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c054847fb6fd89d40f3f4ad44d6daaf1?s=128&d=identicon&r=PG", "display_name": "locoboy", "link": "https://stackoverflow.com/users/382906/locoboy"}, "edited": false, "score": 0, "creation_date": 1434589691, "post_id": 30902114, "comment_id": 49848258, "body": "Can you describe this a bit more - what&#39;s the question here?"}, {"owner": {"reputation": 18048, "user_id": 661589, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54d910c2365b1e965a4007607a71b162?s=128&d=identicon&r=PG", "display_name": "Gavriel", "link": "https://stackoverflow.com/users/661589/gavriel"}, "reply_to_user": {"reputation": 34778, "user_id": 382906, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/c054847fb6fd89d40f3f4ad44d6daaf1?s=128&d=identicon&r=PG", "display_name": "locoboy", "link": "https://stackoverflow.com/users/382906/locoboy"}, "edited": false, "score": 0, "creation_date": 1434609695, "post_id": 30902114, "comment_id": 49854224, "body": "@locoboy I was hoping that there&#39;s an easy, nice solution like being able to describe the column types similar to how we pass the headers in CSV.open, something like: CSV.open(&quot;file.csv&quot;, &quot;wb&quot;, columns: {&#39;id&#39; =&gt; :no_quote, &#39;name&#39; =&gt; :quote}) Unfortunatelly it seems that my question was really a duplicate and there&#39;s no nice solution"}], "owner": {"reputation": 18048, "user_id": 661589, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/54d910c2365b1e965a4007607a71b162?s=128&d=identicon&r=PG", "display_name": "Gavriel", "link": "https://stackoverflow.com/users/661589/gavriel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 354, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434574146, "creation_date": 1434574146, "question_id": 30902114, "link": "https://stackoverflow.com/questions/30902114/format-csv-in-ruby-so-that-string-columns-have-double-quotes-but-numerical-colu", "title": "Format csv in ruby so that string columns have double-quotes, but numerical columns don&#39;t", "body": "<p>I am trying to output a CSV file in ruby, that looks like this:</p>\n\n<pre><code>\"numeric_column\",\"string_column\"\n1,\"string1\"\n2,\"long string\"\n</code></pre>\n\n<p>I could only find a way to have no quotes at all or quotes also on the numeric column.</p>\n\n<p>My code looks like this now:</p>\n\n<pre><code>CSV.open(\"file.csv\", \"wb\", force_quotes: true, headers: ['id', 'name'], write_headers: true) do |csv|\n    csv &lt;&lt; [id, name]\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1434574295, "post_id": 30902096, "comment_id": 49843240, "body": "What do you mean, exactly, by &quot;extra?&quot; Is this data that needs to be sent to the model which does not correspond to a field in the model?"}, {"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "reply_to_user": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 0, "creation_date": 1434574462, "post_id": 30902096, "comment_id": 49843322, "body": "@MarsAtomic there are other fields in the Model that I need to put data in.  I don&#39;t want to hide the parameters in the form since they could be tampered with."}], "answers": [{"comments": [{"owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "edited": false, "score": 0, "creation_date": 1434574920, "post_id": 30902158, "comment_id": 49843551, "body": "Awesome!  Worked like a charm!  Thanks"}], "tags": [], "owner": {"reputation": 24747, "user_id": 1512956, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/5JMDF.jpg?s=128&g=1", "display_name": "Marcelo De Polli", "link": "https://stackoverflow.com/users/1512956/marcelo-de-polli"}, "is_accepted": true, "score": 1, "last_activity_date": 1434575349, "last_edit_date": 1434575349, "creation_date": 1434574296, "answer_id": 30902158, "question_id": 30902096, "link": "https://stackoverflow.com/questions/30902096/how-do-i-add-extra-data-to-model-before-submit-from-form-in-rails/30902158#30902158", "title": "How do I add extra data to model before submit from form in Rails", "body": "<p>You can use the hash options of the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Core.html#method-c-new\" rel=\"nofollow\" title=\"http://api.rubyonrails.org/classes/ActiveRecord/Core.html#method-c-new\"><code>ActiveRecord::Core#new</code></a> method in your controller:</p>\n\n<pre><code>@user = User.new(user_params.merge(referrer_url: create_url))\n</code></pre>\n\n<p>Or move all that into a separate method for a clearer and more readable code:</p>\n\n<pre><code>@user = User.new(user_params_with_additional_data)\n\nprivate\n\ndef user_params_with_additional_data\n  user_params.merge(referrer_url: create_url)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10814, "user_id": 985241, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/802150025e2e8b524e4d5f01259738dc?s=128&d=identicon&r=PG", "display_name": "rmagnum2002", "link": "https://stackoverflow.com/users/985241/rmagnum2002"}, "is_accepted": false, "score": 0, "last_activity_date": 1434574949, "creation_date": 1434574949, "answer_id": 30902345, "question_id": 30902096, "link": "https://stackoverflow.com/questions/30902096/how-do-i-add-extra-data-to-model-before-submit-from-form-in-rails/30902345#30902345", "title": "How do I add extra data to model before submit from form in Rails", "body": "<p>This worked for me:</p>\n\n<p><strong>user.rb</strong></p>\n\n<pre><code>before_save :add_more_info\n\ndef add_more_info\n  self.referrer_url = create_url, \n  self.clout = calc_clout \nend\n</code></pre>\n\n<blockquote>\n  <p><strong>note</strong> I don't usually use <code>self</code> in model, but somehow this is the only way I could make it work with <code>before_save</code> callback </p>\n</blockquote>\n"}], "owner": {"reputation": 2074, "user_id": 688071, "user_type": "registered", "accept_rate": 67, "profile_image": "https://graph.facebook.com/1229375604/picture?type=large", "display_name": "Godzilla74", "link": "https://stackoverflow.com/users/688071/godzilla74"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 126, "favorite_count": 0, "accepted_answer_id": 30902158, "answer_count": 2, "score": 0, "last_activity_date": 1434575349, "creation_date": 1434574065, "question_id": 30902096, "link": "https://stackoverflow.com/questions/30902096/how-do-i-add-extra-data-to-model-before-submit-from-form-in-rails", "title": "How do I add extra data to model before submit from form in Rails", "body": "<p>I have a form that a user fills out that I need to add some extra 'behind the scenes' data to before creating the object in my DB.  For instance, data like a <code>referrer_url, clout_score</code> etc.  How do I go about doing it?  Are the methods something that should sit in the Controller or the Model?</p>\n\n<p>For instance, I need to be able to add what the method <code>create_url</code> returns to the :</p>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>class UsersController &lt; ApplicationController\n  def new\n    @user = User.new\n  end\n\n  def create\n    @user = User.new(user_params)\n      if @user.save\n        flash[:success] = \"You've been added to the waiting list!\"\n        render 'show'\n      else\n        render 'new'\n      end\n  end\n\n  private\n    def user_params\n      params.require(:user).permit(:name, :email, :use_type)\n    end\n\n    def create_url\n     url = SecureRandom.hex(4)\n    end\n</code></pre>\n\n<p>end</p>\n\n<p><strong>User Table in DB</strong></p>\n\n<pre><code>class CreateUsers &lt; ActiveRecord::Migration\n  def change\n    create_table :users do |t|\n      t.string :name\n      t.string :email\n      t.integer :init_spot\n      t.integer :current_spot\n      t.string :referrer_url\n      t.integer :clout\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>Should I just do an <code>@user.update_attributes</code> in the same controller action and call my methods that way? Like:</p>\n\n<pre><code>if @user.save\n      @user.update_attributes(referrer_url: create_url, clout: calc_clout, etc.)\n      flash[:success] .....\n      render 'new'\n</code></pre>\n\n<p>What's the best way to accomplish this?</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "macos", "ssl", "osx-yosemite"], "comments": [{"owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "edited": false, "score": 0, "creation_date": 1434578684, "post_id": 30901864, "comment_id": 49845270, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/29318874/ruby-was-sdk-v2-seahorseclientnetworkingerror-exception-ssl-connect\">ruby was-sdk v2 : Seahorse::Client::NetworkingError Exception: SSL_connect</a>"}], "answers": [{"tags": [], "owner": {"reputation": 592, "user_id": 422848, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ab10624eb702d9a9f3426fb88c1d987c?s=128&d=identicon&r=PG", "display_name": "Petrus Repo", "link": "https://stackoverflow.com/users/422848/petrus-repo"}, "is_accepted": false, "score": 3, "last_activity_date": 1444385437, "creation_date": 1444385437, "answer_id": 33035529, "question_id": 30901864, "link": "https://stackoverflow.com/questions/30901864/troubleshooting-ssl-certificates-ruby-mac-os-x-yosemite/33035529#33035529", "title": "Troubleshooting SSL certificates, Ruby, Mac OS X Yosemite", "body": "<p>In my case the problem was the following:</p>\n\n<ul>\n<li>Ruby installed as a binary with RVM assumed OpenSSL is in /etc/openssl</li>\n<li>OpenSSL had been installed with Homebrew to /usr/local/etc/openssl</li>\n</ul>\n\n<p>=> Mismatch; and symlinking /etc/openssl -> /usr/local/etc/openssl did not help.</p>\n\n<p>Compile RVM Ruby from sources: \n<code>rvm install VERSION --disable-binary</code></p>\n\n<p>After that, make sure your certificates are up-to-date: \n<code>rvm osx-ssl-certs update</code></p>\n"}], "owner": {"reputation": 103, "user_id": 4785150, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8021f73ecd5e002eb82d9efe40426966?s=128&d=identicon&r=PG&f=1", "display_name": "Jeff", "link": "https://stackoverflow.com/users/4785150/jeff"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 794, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1444385437, "creation_date": 1434573215, "last_edit_date": 1434573408, "question_id": 30901864, "link": "https://stackoverflow.com/questions/30901864/troubleshooting-ssl-certificates-ruby-mac-os-x-yosemite", "title": "Troubleshooting SSL certificates, Ruby, Mac OS X Yosemite", "body": "<p>On OS X Mavericks, I am getting the following error from my Ruby programs when I try to connect to various APIs:</p>\n\n<pre><code>Seahorse::Client::NetworkingError: SSL_connect returned=1 errno=0 \n    state=SSLv3 read server certificate B: certificate verify failed\n</code></pre>\n\n<p>What is the recommended solution to this?</p>\n"}, {"tags": ["arrays", "ruby", "string", "string-interpolation"], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1434573222, "creation_date": 1434573222, "answer_id": 30901865, "question_id": 30901754, "link": "https://stackoverflow.com/questions/30901754/how-can-i-convert-an-array-into-a-string-that-lists-each-item-next-to-its-positi/30901865#30901865", "title": "How can I convert an array into a string that lists each item next to its position in the array?", "body": "<p>Use <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-each_with_index\" rel=\"nofollow\"><code>each_with_index</code></a>:</p>\n\n<pre><code>teams = [\"Cowboys\", \"Heat\", \"Blue Devils\"]\nnumbered = teams.each_with_index.map { |team, i| \"#{i + 1}. #{team}\" }.join(\" \")\n# =&gt; \"1. Cowboys 2. Heat 3. Blue Devils\"\n</code></pre>\n\n<p>Then you can interpolate:</p>\n\n<pre><code>fave_teams = \"My #{teams.size} favorite teams: #{numbered}\"\n</code></pre>\n\n<p><code>each_with_index</code> adds the position of each element and returns an enumerator that you can map over with a block. The block receives each item and its index.</p>\n"}, {"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 0, "last_activity_date": 1434573233, "creation_date": 1434573233, "answer_id": 30901870, "question_id": 30901754, "link": "https://stackoverflow.com/questions/30901754/how-can-i-convert-an-array-into-a-string-that-lists-each-item-next-to-its-positi/30901870#30901870", "title": "How can I convert an array into a string that lists each item next to its position in the array?", "body": "<pre><code>teams.map.with_index(1) do |t, i|\n  \"#{ i }. #{ t }\"\nend.join( ' ' )\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4946643, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/654452fd0bd6660880b31cd189bc7912?s=128&d=identicon&r=PG&f=1", "display_name": "ROgbonna1", "link": "https://stackoverflow.com/users/4946643/rogbonna1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434573233, "creation_date": 1434572829, "question_id": 30901754, "link": "https://stackoverflow.com/questions/30901754/how-can-i-convert-an-array-into-a-string-that-lists-each-item-next-to-its-positi", "title": "How can I convert an array into a string that lists each item next to its position in the array?", "body": "<p>I would like to take an array...\n    <code>teams = [\"Cowboys\", \"Heat\", \"Blue Devils\"]</code></p>\n\n<p>...and convert this to a string...\n    <code># =&gt; \"1. Cowboys 2. Heat 3. Blue Devils\"</code></p>\n\n<p>...and use string interpolation to concatenate it with another string.</p>\n\n<p><code># =&gt; \"My three favorite teams: 1. Cowboys 2. Heat 3. Blue Devils\"</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 1, "creation_date": 1434572959, "post_id": 30901538, "comment_id": 49842468, "body": "You&#39;re already associating Venue to Review <code>has_many :reviews</code>. Do the same thing in User. Then in the controller where you create the review do <code>@review.user = current_user</code>."}], "answers": [{"tags": [], "owner": {"reputation": 8378, "user_id": 2076787, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2bfe965ab5ef94a0568bc61c36b46d4c?s=128&d=identicon&r=PG", "display_name": "D-side", "link": "https://stackoverflow.com/users/2076787/d-side"}, "is_accepted": true, "score": 1, "last_activity_date": 1434573070, "creation_date": 1434573070, "answer_id": 30901826, "question_id": 30901538, "link": "https://stackoverflow.com/questions/30901538/rails-associate-user-to-review/30901826#30901826", "title": "Rails - Associate user to review", "body": "<p>So what you want is to create a new <code>review</code> in two scopes at once: in <code>@venue.reviews</code> and <code>current_user.reviews</code>). <strong>Oh hang on</strong>, the latter is not even defined? Let's define that on <code>User</code> first:</p>\n\n<pre><code>has_many :reviews\n</code></pre>\n\n<p>Then instead of just <code>@venue.reviews</code> use a combination of two scopes:</p>\n\n<pre><code>  @venue.reviews.merge(current_user.reviews).create(review_params)\n# ^----------------this one----------------^\n</code></pre>\n\n<p>...and the created objects will have properties of both, unless they're conflicting, in which case the latter scope will take precedence.</p>\n"}], "owner": {"reputation": 513, "user_id": 3866214, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/43167464533036306044429bd947e7fa?s=128&d=identicon&r=PG&f=1", "display_name": "Banner", "link": "https://stackoverflow.com/users/3866214/banner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 138, "favorite_count": 1, "accepted_answer_id": 30901826, "answer_count": 1, "score": 0, "last_activity_date": 1434573070, "creation_date": 1434572095, "last_edit_date": 1495542139, "question_id": 30901538, "link": "https://stackoverflow.com/questions/30901538/rails-associate-user-to-review", "title": "Rails - Associate user to review", "body": "<p>I'm having difficulty associating a review to the current user. Here are my models:</p>\n\n<p>User model:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n\n\n  attr_accessor :password\n  before_save :encrypt_password\n\n  validates_confirmation_of :password\n  validates_presence_of :password, :on =&gt; :create\n  validates_presence_of :email, :first_name\n  validates_uniqueness_of :email\n\n  def self.authenticate(email, password)\n    user = find_by_email(email)\n    if user &amp;&amp; user.password_hash == BCrypt::Engine.hash_secret(password, user.password_salt)\n      user\n    else\n      nil\n    end\n  end\n\n  def encrypt_password\n    if password.present?\n      self.password_salt = BCrypt::Engine.generate_salt\n      self.password_hash = BCrypt::Engine.hash_secret(password, password_salt)\n    end\n  end\n\nend\n</code></pre>\n\n<p>Review model:</p>\n\n<pre><code>class Review &lt; ActiveRecord::Base\n\n    belongs_to :venue\n    belongs_to :user\n\nend\n</code></pre>\n\n<p>Venue model:</p>\n\n<pre><code>class Venue &lt; ActiveRecord::Base\n\n    has_many :reviews\n    has_many :menu_items\n\n  accepts_nested_attributes_for :reviews\n\nend\n</code></pre>\n\n<p>Review controller:</p>\n\n<pre><code>class ReviewsController &lt; ApplicationController\n\n  def create\n\n    @venue = Venue.find(params[:venue_id])\n    @review = @venue.reviews.create(review_params)\n\n    if @review.save\n      redirect_to venue_path(@venue)\n    else\n\n    end\n  end\n\n  private\n\n  def review_params\n    params.require(:review).permit(:title, :body, :rating)\n  end\n\nend\n</code></pre>\n\n<p>Just need a way to associate the review to the current user once the current user creates a new review for a venue.</p>\n\n<p>I made the authentication from scratch following a tutorial from here:</p>\n\n<p><a href=\"http://railscasts.com/episodes/250-authentication-from-scratch\" rel=\"nofollow noreferrer\">http://railscasts.com/episodes/250-authentication-from-scratch</a></p>\n\n<p>I consulted the following before posting but couldn't figure it out:</p>\n\n<p><a href=\"https://stackoverflow.com/questions/6983244/rails-associate-posts-with-user-and-location\">Rails: Associate posts with user and location</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/30299798/associate-user-id-to-the-comment-model\">Associate user_id to the comment model?</a></p>\n\n<p><a href=\"https://stackoverflow.com/questions/6009295/devise-how-to-associate-current-user-to-post\">Devise how to associate current user to post?</a></p>\n\n<p>Any help will be greatly appreciated, thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "external", "mailer"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1434571973, "post_id": 30901463, "comment_id": 49841937, "body": "so where did you define <code>uri</code>?"}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1434573285, "post_id": 30901463, "comment_id": 49842646, "body": "uri = URI(&#39;<a href=\"https://api.madmimi.com/mailer/to_list&#39;\" rel=\"nofollow noreferrer\">api.madmimi.com/mailer/to_list&#39;</a>) res = Net::HTTP.post_form(uri, &#39;promotion_name&#39; =&gt; &#39;bulletin&#39;, &#39;subject&#39; =&gt; &#39;Your Daily Bulletin Update&#39;, &#39;from&#39; =&gt; &#39;noreply@matsu-namibiaflood.opensciencedatacloud.org/&#39;, &#39;list_name&#39; =&gt; &#39;bulletin&#39;)"}, {"owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "reply_to_user": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1434573310, "post_id": 30901463, "comment_id": 49842664, "body": "I tried the above as well and it gave me                                       Net::HTTPBadRequest 400 Bad Request readbody=true&gt;"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5015989, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KU5ey.jpg?s=128&g=1", "display_name": "NikitaSmall", "link": "https://stackoverflow.com/users/5015989/nikitasmall"}, "is_accepted": false, "score": 0, "last_activity_date": 1434572320, "creation_date": 1434572320, "answer_id": 30901602, "question_id": 30901463, "link": "https://stackoverflow.com/questions/30901463/mad-mimi-error-when-trying-to-send-email-to-a-list/30901602#30901602", "title": "Mad Mimi Error When Trying to Send Email to a List", "body": "<p>As far as I know, you need to specify the <code>uri</code>, because it is a simple varible. So, if you need to use post-request to some url - you need to put your addres as first parameter at this method. </p>\n"}], "owner": {"reputation": 75, "user_id": 4085234, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/bdee164f0fa8b8ef5e1982d13269c844?s=128&d=identicon&r=PG&f=1", "display_name": "Jenny", "link": "https://stackoverflow.com/users/4085234/jenny"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 36, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434572320, "creation_date": 1434571858, "question_id": 30901463, "link": "https://stackoverflow.com/questions/30901463/mad-mimi-error-when-trying-to-send-email-to-a-list", "title": "Mad Mimi Error When Trying to Send Email to a List", "body": "<p>I am trying to get my Rails Application integrated with Mad Mimi to send out e-mails. Using the API which can be found at <a href=\"https://madmimi.com/developer/mailer/send-to-a-list?escape=false\" rel=\"nofollow\">https://madmimi.com/developer/mailer/send-to-a-list?escape=false</a></p>\n\n<p>Here is what I put into the ruby emulator on my terminal:</p>\n\n<pre><code>Net::HTTP.post_form(uri, 'promotion_name' =&gt; 'bulletin',     'subject' =&gt;     'Your Daily Bulletin Update', 'from' =&gt; 'noreply@matsu-    namibiaflood.opensciencedatacloud.org/', 'list_name' =&gt; 'bulletin')\n</code></pre>\n\n<p>Here is what was the result</p>\n\n<pre><code>NameError: undefined local variable or method `uri' for main:Object\nfrom (irb):8\nfrom /usr/bin/irb:12:in `&lt;main&gt;'\n</code></pre>\n\n<p>What should I do, and should I be putting this code somewhere else?</p>\n"}, {"tags": ["arrays", "ruby", "variables", "methods"], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 1647736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c9fe96ea3d73cfc08325f6539dd1a2?s=128&d=identicon&r=PG", "display_name": "user1647736", "link": "https://stackoverflow.com/users/1647736/user1647736"}, "edited": false, "score": 0, "creation_date": 1434571078, "post_id": 30900892, "comment_id": 49841359, "body": "Thank you! This gets me to a new error, but one problem down. :)"}], "tags": [], "owner": {"reputation": 36058, "user_id": 1157054, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/5c9d0ecbe3045579b72f96744c62735c?s=128&d=identicon&r=PG", "display_name": "Ajedi32", "link": "https://stackoverflow.com/users/1157054/ajedi32"}, "is_accepted": false, "score": 2, "last_activity_date": 1434570205, "last_edit_date": 1434570205, "creation_date": 1434570006, "answer_id": 30900892, "question_id": 30900866, "link": "https://stackoverflow.com/questions/30900866/ruby-deleting-a-variable-from-an-array/30900892#30900892", "title": "Ruby: Deleting a variable from an array", "body": "<p>There is no <code>delete!</code> method for an array. Perhaps you meant <a href=\"http://ruby-doc.org/core/Array.html#method-i-delete\" rel=\"nofollow\"><code>delete</code></a>?</p>\n\n<blockquote>\n  <h1>delete(obj) \u2192 item or nil</h1>\n  \n  <p>Deletes all items from self that are equal to obj.</p>\n  \n  <p>Returns the last deleted item, or nil if no matching item is found.</p>\n  \n  <p>If the optional code block is given, the result of the block is returned if the item is not found. (To remove nil elements and get an informative return value, use #compact!)</p>\n\n<pre><code>a = [ \"a\", \"b\", \"b\", \"b\", \"c\" ]\na.delete(\"b\")                   #=&gt; \"b\"\na                               #=&gt; [\"a\", \"c\"]\na.delete(\"z\")                   #=&gt; nil\na.delete(\"z\") { \"not found\" }   #=&gt; \"not found\"\n</code></pre>\n</blockquote>\n\n<p>Or, judging by the way you're using it, perhaps you <em>really</em> meant <a href=\"http://ruby-doc.org/core/Array.html#method-i-delete_at\" rel=\"nofollow\"><code>delete_at</code></a>:</p>\n\n<blockquote>\n  <h1>delete_at(index) \u2192 obj or nil</h1>\n  \n  <p>Deletes the element at the specified index, returning that element, or\n  nil if the index is out of range.</p>\n  \n  <p>See also #slice!</p>\n\n<pre><code>a = [\"ant\", \"bat\", \"cat\", \"dog\"]\na.delete_at(2)    #=&gt; \"cat\"\na                 #=&gt; [\"ant\", \"bat\", \"dog\"]\na.delete_at(99)   #=&gt; nil\n</code></pre>\n</blockquote>\n\n<p>You may also be interested in looking at some of the other methods on Array, such as <code>shuffle</code>, <code>sample</code>, and <code>pop</code>. Complete documentation is availble on <a href=\"http://ruby-doc.org/core/Array.html\" rel=\"nofollow\">ruby-doc.org</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 0, "last_activity_date": 1434570939, "last_edit_date": 1434570939, "creation_date": 1434570541, "answer_id": 30901049, "question_id": 30900866, "link": "https://stackoverflow.com/questions/30900866/ruby-deleting-a-variable-from-an-array/30901049#30901049", "title": "Ruby: Deleting a variable from an array", "body": "<p>If you are deleting the item just to make sure it's not drawn again then\n<a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-sample\" rel=\"nofollow\">Array#sample</a> is a possibility</p>\n\n<pre><code>ar = (1..8).to_a\np ar.sample(3) # =&gt; [1, 8, 6]\n</code></pre>\n\n<p>The array remains the same.</p>\n"}, {"tags": [], "owner": {"reputation": 740, "user_id": 3993528, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2a8e387fa8dfb4e2e1a2d827c0fdfd8?s=128&d=identicon&r=PG", "display_name": "Joseph", "link": "https://stackoverflow.com/users/3993528/joseph"}, "is_accepted": false, "score": 0, "last_activity_date": 1434571183, "creation_date": 1434571183, "answer_id": 30901250, "question_id": 30900866, "link": "https://stackoverflow.com/questions/30900866/ruby-deleting-a-variable-from-an-array/30901250#30901250", "title": "Ruby: Deleting a variable from an array", "body": "<p>As Ajedi32 says, look into <code>shuffle</code> and <code>pop</code> and get to know the various array methods.</p>\n\n<p>Then you can rewrite your code as:</p>\n\n<pre><code>array = (1..8).to_a\n# Create array of sequential numbers\n\ndraw = array.shuffle!.pop\n# randomize order of array in place, remove and return last element\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 337, "user_id": 3672937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/709b1399f6241d4254624ce290d184ef?s=128&d=identicon&r=PG&f=1", "display_name": "Brian Davis", "link": "https://stackoverflow.com/users/3672937/brian-davis"}, "is_accepted": false, "score": 0, "last_activity_date": 1434748272, "creation_date": 1434748272, "answer_id": 30947333, "question_id": 30900866, "link": "https://stackoverflow.com/questions/30900866/ruby-deleting-a-variable-from-an-array/30947333#30947333", "title": "Ruby: Deleting a variable from an array", "body": "<pre><code>&gt;&gt; a = (1..8).to_a\n=&gt; [1, 2, 3, 4, 5, 6, 7, 8]\n&gt;&gt; b = a.delete(a.sample)\n=&gt; 6\n&gt;&gt; a\n=&gt; [1, 2, 3, 4, 5, 7, 8]\n&gt;&gt; b\n=&gt; 6\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 1647736, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7c9fe96ea3d73cfc08325f6539dd1a2?s=128&d=identicon&r=PG", "display_name": "user1647736", "link": "https://stackoverflow.com/users/1647736/user1647736"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 242, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1434748272, "creation_date": 1434569887, "question_id": 30900866, "link": "https://stackoverflow.com/questions/30900866/ruby-deleting-a-variable-from-an-array", "title": "Ruby: Deleting a variable from an array", "body": "<p>Newbie here. Thanks in advance.</p>\n\n<p>The idea here is akin to pulling a card at random from a deck of cards. I want to permanently pull a random number out of the array.</p>\n\n<p>My code is giving me an error regarding the 'delete!' method. \"Undefined method <code>delete!' for [1, 2, 3, 4, 5, 6, 7, 8]:Array\n(repl):6:in</code>initialize'\". But for all I know there might be half a dozen errors in here.</p>\n\n<p>I've commented the code below so you can follow my amateur thought process. I'm sure there's some awesome way to write this all in two lines of code that I just haven't experienced yet. Can you help?</p>\n\n<pre><code>array = [1, 2, 3, 4, 5, 6, 7, 8]\n# Create array of sequential numbers\n\nhigh_number = array.length - 1\n# Determining length of array for next line, offset by 1 for array\n\nrand_number = rand(0..high_number)\n# Create a random number from 0 (first array position) through high num\n\ndraw = array[rand_number]\n# drawing that position number from array (passed on to another action)\n\narray.delete!(rand_number)\n# make sure the next time I loop through this array that number can't be drawn again\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "simple-form"], "comments": [{"owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "edited": false, "score": 0, "creation_date": 1434570096, "post_id": 30900802, "comment_id": 49840709, "body": "In Rails 4 the default HTTP verb used for updates is now <code>PATCH</code> (where it used to be <code>PUT</code>). It&#39;s primarily a change in semantics and shouldn&#39;t cause any issues with data not being saved."}, {"owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "reply_to_user": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "edited": false, "score": 0, "creation_date": 1434570188, "post_id": 30900802, "comment_id": 49840762, "body": "@neuronaut good to know -- one less thing to worry about! :)"}], "answers": [{"tags": [], "owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "is_accepted": true, "score": 0, "last_activity_date": 1434989149, "creation_date": 1434989149, "answer_id": 30984724, "question_id": 30900802, "link": "https://stackoverflow.com/questions/30900802/cant-update-existing-records-in-rails-app/30984724#30984724", "title": "Can&#39;t update existing records in Rails app", "body": "<p>This is what I ended up doing, based off this (replacing the word <code>user</code> with <code>event</code>): <a href=\"https://www.railstutorial.org/book/updating_and_deleting_users#sec-unsuccessful_edits\" rel=\"nofollow\">https://www.railstutorial.org/book/updating_and_deleting_users#sec-unsuccessful_edits</a></p>\n\n<p><code>events_controller.rb</code>:</p>\n\n<pre><code>def update\n    @event = Event.find(params[:id])\n    if @event.update_attributes(event_params)\n      # Handle a successful update.\n    else\n      render 'update'\n    end\n  end\n</code></pre>\n\n<p>Maybe deleting the <code>else render 'update'</code> might avoid the blank \"update an event\" page that shows up after I do it, but this is more of a back-end feature (users aren't going to have a link to edit these events) and it accepts changes, so i'm content. </p>\n"}], "owner": {"reputation": 660, "user_id": 4765229, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ed691896ec0e5fab87f8d9c8a9f10ea5?s=128&d=identicon&r=PG&f=1", "display_name": "Yami Medina", "link": "https://stackoverflow.com/users/4765229/yami-medina"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 30984724, "answer_count": 1, "score": 0, "last_activity_date": 1434989149, "creation_date": 1434569688, "last_edit_date": 1434731730, "question_id": 30900802, "link": "https://stackoverflow.com/questions/30900802/cant-update-existing-records-in-rails-app", "title": "Can&#39;t update existing records in Rails app", "body": "<p>It appears that everything saves properly on my Rails 4 app (using simple_form) when I create a new event, but when I try to update an existing event (by going to <code>events/3/edit</code>), it doesn't save any of the changes.</p>\n\n<p>Here is my console log:</p>\n\n<pre><code>Started PATCH \"/events/3\" for 12.43.117.2 at 2015-06-17 19:28:34 +0000\nStarted PATCH \"/events/3\" for 12.43.117.2 at 2015-06-17 19:28:34 +0000\nProcessing by EventsController#update as HTML\nProcessing by EventsController#update as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"tdCaXgxDSLNJg2qcsB91W9No3fJpu7Z7XDxktXGGJ5A=\", \"event\"=&gt;{\"event_name\"=&gt;\"Salute Miami\u2019s Bicycling Heroes: Reception for Kirk Munroe &amp; Wilson Larkins\", \"location\"=&gt;\"Coco Plum Woman's Club, 1375 Sunset Road, Miami, FL 33143\", \"event_date_time(1i)\"=&gt;\"2015\", \"event_date_time(2i)\"=&gt;\"6\", \"event_date_time(3i)\"=&gt;\"17\", \"event_date_time(4i)\"=&gt;\"12\", \"event_date_time(5i)\"=&gt;\"03\", \"description\"=&gt;\"Honor Kirk Munroe,\\r\\nblahbicycblah\", \"organizer\"=&gt;\"blah\", \"category\"=&gt;\"Community Event\"}, \"commit\"=&gt;\"Update Event\", \"id\"=&gt;\"3\"}\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"tdCaXgxDSLNJg2qcsB91W9No3fJpu7Z7XDxktXGGJ5A=\", \"event\"=&gt;{\"event_name\"=&gt;\"Salute Miami\u2019s Bicycling Heroes: Reception for Kirk Munroe &amp; Wilson Larkins\", \"location\"=&gt;\"Coco Plum Woman's Club, 1375 Sunset Road, Miami, FL 33143\", \"event_date_time(1i)\"=&gt;\"2015\", \"event_date_time(2i)\"=&gt;\"6\", \"event_date_time(3i)\"=&gt;\"17\", \"event_date_time(4i)\"=&gt;\"12\", \"event_date_time(5i)\"=&gt;\"03\", \"description\"=&gt;\"Honor Kirk Munroe,\\r\\nblahbicycblah\", \"organizer\"=&gt;\"blah\", \"category\"=&gt;\"Community Event\"}, \"commit\"=&gt;\"Update Event\", \"id\"=&gt;\"3\"}\n  Rendered events/update.html.erb within layouts/application (0.1ms)\n  Rendered events/update.html.erb within layouts/application (0.1ms)\nCompleted 200 OK in 173ms (Views: 171.3ms | ActiveRecord: 0.0ms)\nCompleted 200 OK in 173ms (Views: 171.3ms | ActiveRecord: 0.0ms)\n</code></pre>\n\n<p>After this happens, I get a blank update event page with no form fields on it. I then return to the event index and go back to the individual event only to find that it's the way it was originally. Whatever it's doing, it seems to be sending information twice (the original info first and then the updated), but for some reason the updates don't seem to be sticking.</p>\n\n<p>For what it's worth, the <code>def update</code> portion of the event controller is empty and i'm using a postgresql database.</p>\n\n<p>Github repo: <a href=\"https://github.com/yamilethmedina/wheels_registration\" rel=\"nofollow\">https://github.com/yamilethmedina/wheels_registration</a>\nTest server: <a href=\"https://wheels-registration-yamilethmedina.c9.io/\" rel=\"nofollow\">https://wheels-registration-yamilethmedina.c9.io/</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "wkhtmltopdf", "pdfkit"], "comments": [{"owner": {"reputation": 339644, "user_id": 118068, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/077db5466d3b58e7bbbd498dca173f04?s=128&d=identicon&r=PG", "display_name": "Marc B", "link": "https://stackoverflow.com/users/118068/marc-b"}, "edited": false, "score": 0, "creation_date": 1434568978, "post_id": 30900556, "comment_id": 49840019, "body": "I doubt they keep logs. since they&#39;re command-line apps, they&#39;d probably just spit out errors to stderr"}, {"owner": {"reputation": 36888, "user_id": 293280, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/6e6e22d81a1f4f394f62301be40c2e20?s=128&d=identicon&r=PG", "display_name": "Joshua Pinter", "link": "https://stackoverflow.com/users/293280/joshua-pinter"}, "edited": false, "score": 0, "creation_date": 1549211782, "post_id": 30900556, "comment_id": 95813776, "body": "The part you should try and remove is the <code>--quiet</code> in the command line. This will output lots more output and let you figure out where things are going wrong. Also, if you see a <code>Killed</code> in that output, check your computer&#39;s resources when that happens - you&#39;re likely running out of Memory/Swap."}], "answers": [{"tags": [], "owner": {"reputation": 35, "user_id": 2280482, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d4f2c5a9eb059cef72a406bb8b2b487b?s=128&d=identicon&r=PG", "display_name": "ahmadelmorshedy", "link": "https://stackoverflow.com/users/2280482/ahmadelmorshedy"}, "is_accepted": false, "score": 0, "last_activity_date": 1493556690, "creation_date": 1493556690, "answer_id": 43706562, "question_id": 30900556, "link": "https://stackoverflow.com/questions/30900556/where-i-can-find-pdfkit-or-wkhtmltopdf-logs/43706562#43706562", "title": "Where I can find pdfkit or wkhtmltopdf logs?", "body": "<p>You can try set verbose to true in PDFKit configuration.. for example, you may have config/application.rb file to be like this</p>\n\n<pre><code>require 'pdfkit'\nPDFKit.configure do |config|\n  # other options here\n  config.verbose = true #to turn off --quiet mode\nend\n</code></pre>\n\n<p>you can refer to <a href=\"https://github.com/pdfkit/pdfkit/blob/master/spec/pdfkit_spec.rb\" rel=\"nofollow noreferrer\">https://github.com/pdfkit/pdfkit/blob/master/spec/pdfkit_spec.rb</a> for configuration examples</p>\n"}], "owner": {"reputation": 1973, "user_id": 806495, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/c5c29b306703729375c68f4148527467?s=128&d=identicon&r=PG", "display_name": "Leszek Andrukanis", "link": "https://stackoverflow.com/users/806495/leszek-andrukanis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 2001, "favorite_count": 0, "answer_count": 1, "score": 5, "last_activity_date": 1493556690, "creation_date": 1434568870, "question_id": 30900556, "link": "https://stackoverflow.com/questions/30900556/where-i-can-find-pdfkit-or-wkhtmltopdf-logs", "title": "Where I can find pdfkit or wkhtmltopdf logs?", "body": "<p>I'm trying to debug issue with error on pdf generation in Ruby on Rails app. I'm using the pdfkit + wkhtmltopdf-binnary gems. Because of some issue I'm receiving the 500 and this info in logs:</p>\n\n<p><code>RuntimeError (command failed (exitstatus=1): /home/ubuntu/phys-track/shared/bundle/ruby/2.0.0/bin/wkhtmltopdf --quiet --page-size Letter --margin-top 0.75in --margin-right 0.75in --margin-bottom 0.75in --margin-left 0.75in --encoding UTF-8 - -):\n</code>\nI'm wondering where I can find any log where I can see any more verbose information about the issue.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "kaminari", "ransack"], "answers": [{"tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 0, "last_activity_date": 1434570901, "creation_date": 1434570901, "answer_id": 30901168, "question_id": 30900373, "link": "https://stackoverflow.com/questions/30900373/how-should-i-enable-paging-in-ransack-results-submitted-via-a-post/30901168#30901168", "title": "How should I enable paging in ransack results submitted via a POST", "body": "<p>You can <a href=\"https://github.com/amatsuda/kaminari#customizing-the-pagination-helper\" rel=\"nofollow\">override the views that Kaminari uses</a> and thusly change the anchor tags to use <code>method: :post</code>.</p>\n"}], "owner": {"reputation": 4587, "user_id": 1098873, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/47fe800ed32c2009b4f83d129e8657f9?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/1098873/eric"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 51, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434570901, "creation_date": 1434568354, "question_id": 30900373, "link": "https://stackoverflow.com/questions/30900373/how-should-i-enable-paging-in-ransack-results-submitted-via-a-post", "title": "How should I enable paging in ransack results submitted via a POST", "body": "<p>I am using Ransack to create a simple search form that will grow more complicated soon. Because I don't want to overflow the querystring, I am using POST to submit my search form. This works fine but now I want to add paging.</p>\n\n<p>Looking at Kaminari, it only seems to make anchor tags (GET) - which doesn't work for me.</p>\n\n<p>Can I use Kaminari and Ransack to create a search with paging and POSTed queries?</p>\n\n<p>This is all the latest versions of the gems.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "erb", "view-helpers"], "answers": [{"comments": [{"owner": {"reputation": 3245, "user_id": 2151934, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lCoBF.jpg?s=128&g=1", "display_name": "coding addicted", "link": "https://stackoverflow.com/users/2151934/coding-addicted"}, "edited": false, "score": 0, "creation_date": 1434568955, "post_id": 30900468, "comment_id": 49840003, "body": "You where faster than me! Is the to_s really necessary? I would add this for those who want some customization &lt;%= l @movie.release_at.to_date, format: :your_specific_format %&gt;. Here is the documentation: <a href=\"http://guides.rubyonrails.org/i18n.html#adding-date-time-formats\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/i18n.html#adding-date-time-formats</a>"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "reply_to_user": {"reputation": 3245, "user_id": 2151934, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/lCoBF.jpg?s=128&g=1", "display_name": "coding addicted", "link": "https://stackoverflow.com/users/2151934/coding-addicted"}, "edited": false, "score": 0, "creation_date": 1434569255, "post_id": 30900468, "comment_id": 49840216, "body": "@codingaddicted, the <code>to_s</code> is not strictly needed in this case since we&#39;re using the default format."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 2, "last_activity_date": 1434568639, "creation_date": 1434568639, "answer_id": 30900468, "question_id": 30900273, "link": "https://stackoverflow.com/questions/30900273/why-isnt-the-format-date-of-the-rails-view-being-properly-displayed-with-the-in/30900468#30900468", "title": "Why isn&#39;t the format date of the Rails view being properly displayed with the initializer?", "body": "<p>You've set the default Date format, but you said that the column is a datetime.  If you want the default Date format that you specified, you'll need to convert the value to a date:</p>\n\n<pre><code>&lt;%= movie.release_at.to_date.to_s %&gt;\n</code></pre>\n"}], "owner": {"reputation": 2757, "user_id": 2666125, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/c68f6b3fd36e24044c2ad394acf311cd?s=128&d=identicon&r=PG&f=1", "display_name": "Beast_Code", "link": "https://stackoverflow.com/users/2666125/beast-code"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 30900468, "answer_count": 1, "score": 1, "last_activity_date": 1434568639, "creation_date": 1434567955, "question_id": 30900273, "link": "https://stackoverflow.com/questions/30900273/why-isnt-the-format-date-of-the-rails-view-being-properly-displayed-with-the-in", "title": "Why isn&#39;t the format date of the Rails view being properly displayed with the initializer?", "body": "<p>On my view view, I have the following format I want to output:</p>\n\n<pre><code>&lt;tr&gt;\n  &lt;th&gt;Released:&lt;/th&gt;\n  &lt;td&gt;\n   &lt;%= movie.release_at.to_s(:release_date) %&gt;\n   (&lt;%= time_ago_in_words(movie.release_at) %&gt;)\n  &lt;/td&gt;\n&lt;/tr&gt;\n</code></pre>\n\n<p>The exact format I want is \"Month Day, Year\", so I created an initialize file with the following:</p>\n\n<pre><code>Date::DATE_FORMATS[:default] = \"%B %e, %Y\"\n</code></pre>\n\n<p>My database schema has a movies table with a field called <code>release_at</code> with the data type of <code>datetime</code> this is where I am attempting to extract the the data.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1434568280, "post_id": 30899994, "comment_id": 49839609, "body": "Check out <a href=\"https://github.com/seamusabshere/upsert\" rel=\"nofollow noreferrer\">github.com/seamusabshere/upsert</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "edited": false, "score": 0, "creation_date": 1434569363, "post_id": 30900563, "comment_id": 49840275, "body": "Raw sql insert is also what came into my mind for performance reasons. But  I don&#39;t want to exit on unique constraint. Is it possible that postgres just skips the record in case it already exists and continues inserting all other valid entries?"}, {"owner": {"reputation": 2678, "user_id": 2483138, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1320d18fa8806488f96baad70b29ce4c?s=128&d=identicon&r=PG", "display_name": "ABMagil", "link": "https://stackoverflow.com/users/2483138/abmagil"}, "reply_to_user": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "edited": false, "score": 0, "creation_date": 1434569556, "post_id": 30900563, "comment_id": 49840390, "body": "Perhaps, but that&#39;s a postgres question, not a rails one."}, {"owner": {"reputation": 2678, "user_id": 2483138, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1320d18fa8806488f96baad70b29ce4c?s=128&d=identicon&r=PG", "display_name": "ABMagil", "link": "https://stackoverflow.com/users/2483138/abmagil"}, "reply_to_user": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "edited": false, "score": 0, "creation_date": 1434569581, "post_id": 30900563, "comment_id": 49840406, "body": "That is to say, the answer to your question seems to be &quot;no&quot;"}], "tags": [], "owner": {"reputation": 2678, "user_id": 2483138, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1320d18fa8806488f96baad70b29ce4c?s=128&d=identicon&r=PG", "display_name": "ABMagil", "link": "https://stackoverflow.com/users/2483138/abmagil"}, "is_accepted": true, "score": 2, "last_activity_date": 1434568888, "creation_date": 1434568888, "answer_id": 30900563, "question_id": 30899994, "link": "https://stackoverflow.com/questions/30899994/how-can-i-bulk-save-activerecord-objects-with-validation-in-a-fast-way/30900563#30900563", "title": "How can I bulk save ActiveRecord Objects with validation in a fast way?", "body": "<p><code>find_or_create</code>, while a single method, actually performs two DB queries.  Not only is this slow, it's not even a guarantee of uniqueness (just a very high likelihood).  The same is true of <code>validates :uniqueness</code>.</p>\n\n<p>The fastest way to do what you want (with a guarantee of uniqueness) would probably be to build a <code>UNIQUE</code> constraint or index in the database.  Then, on save, if the insert fails, Rails will raise an exception.  That will prevent duplicate records, as well as being as fast as standard rails.</p>\n\n<p>If you want speed improvements over the \"Rails way\" (looping through records, as you're already doing), you'll need to get a bit tricky.  From <a href=\"https://www.coffeepowered.net/2009/01/23/mass-inserting-data-in-rails-without-killing-your-performance/\" rel=\"nofollow\">this article</a>, the fastest way to do it is to build a single insert with all your records in raw SQL, then run that statement.  Of course, that's predicated on guaranteeing within rails that you're not creating any duplicate records.</p>\n"}], "owner": {"reputation": 1944, "user_id": 877383, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/kds3Y.jpg?s=128&g=1", "display_name": "dc10", "link": "https://stackoverflow.com/users/877383/dc10"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1060, "favorite_count": 0, "accepted_answer_id": 30900563, "answer_count": 1, "score": 1, "last_activity_date": 1434568888, "creation_date": 1434567077, "question_id": 30899994, "link": "https://stackoverflow.com/questions/30899994/how-can-i-bulk-save-activerecord-objects-with-validation-in-a-fast-way", "title": "How can I bulk save ActiveRecord Objects with validation in a fast way?", "body": "<p>I want to save 1000 ActiveRecord Models in a fast way. \nI know about several options e.b. batch import gem or native insert with sql. But the problem is that these solutions do not check whether a record already exists.\nBefore a record gets saved I definitely  need to check before whether this record already exists by checking some attributes. Currently I iterate and do save like this</p>\n\n<pre><code>rate = Rate.find_or_create_by(\n            :supplier_id =&gt; acc.supplier_id,\n            :candidate_id =&gt; acc.id,\n            :total =&gt; self.total,\n            :catering =&gt; self.catering,\n            :arrival =&gt; arrival,\n            :departure =&gt; departure\n\n        ) do |r|\n          r.arrival = arrival\n          r.departure = departure\n          r.supplier_id = acc.supplier_id\n          r.total = self.total\n          r.currency = currency\n        end\n</code></pre>\n\n<p>How is this possible in a fast way with a lot of objects?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "bundler", "spree", "thor"], "comments": [{"owner": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 0, "creation_date": 1434571530, "post_id": 30899993, "comment_id": 49841692, "body": "Can you post your gemfile?"}, {"owner": {"reputation": 552, "user_id": 831036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb018011756216717fdcf05ac30aa67c?s=128&d=identicon&r=PG", "display_name": "huoxito", "link": "https://stackoverflow.com/users/831036/huoxito"}, "edited": false, "score": 0, "creation_date": 1434980788, "post_id": 30899993, "comment_id": 49993476, "body": "and how exactly are you trying to install? could you post the commands you&#39;re trying to run?"}, {"owner": {"reputation": 91, "user_id": 4901613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f49a8f190d09b2b8552b3fbf34ded272?s=128&d=identicon&r=PG&f=1", "display_name": "jared k", "link": "https://stackoverflow.com/users/4901613/jared-k"}, "reply_to_user": {"reputation": 552, "user_id": 831036, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cb018011756216717fdcf05ac30aa67c?s=128&d=identicon&r=PG", "display_name": "huoxito", "link": "https://stackoverflow.com/users/831036/huoxito"}, "edited": false, "score": 0, "creation_date": 1434992791, "post_id": 30899993, "comment_id": 50001684, "body": "@huoxito I added all of the combinations of commands I&#39;ve tried.  I&#39;ve tried each set of commands on clean rails apps (all 4.2.2).  They are the same as outlined on spree&#39;s github&#39;s page, and spree&#39;s getting started tutorial page"}, {"owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "edited": false, "score": 0, "creation_date": 1434993443, "post_id": 30899993, "comment_id": 50002001, "body": "Works ok for me.  What ruby version are you using? <code>ruby -v</code>  I am on <code>ruby 2.1.2p95</code>"}], "answers": [{"tags": [], "owner": {"reputation": 91, "user_id": 4901613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f49a8f190d09b2b8552b3fbf34ded272?s=128&d=identicon&r=PG&f=1", "display_name": "jared k", "link": "https://stackoverflow.com/users/4901613/jared-k"}, "is_accepted": true, "score": 0, "last_activity_date": 1435018267, "creation_date": 1435018267, "answer_id": 30991843, "question_id": 30899993, "link": "https://stackoverflow.com/questions/30899993/errors-when-trying-to-start-a-new-rails-app-with-spree-commerce/30991843#30991843", "title": "Errors when trying to start a new Rails app with Spree Commerce", "body": "<p>Solved the issue. Seems like it had something to do with RVM.</p>\n\n<p>I fixed it by creating a new gemset (although based on the same version of Ruby I was currently using), and creating a new rails app with that specific gemset.</p>\n\n<p>I then added spree to my gemfile, and ran the following commands:</p>\n\n<pre><code>$ bundle install\n$ rails g spree:install --sample=false --seed=false\n</code></pre>\n"}], "owner": {"reputation": 91, "user_id": 4901613, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f49a8f190d09b2b8552b3fbf34ded272?s=128&d=identicon&r=PG&f=1", "display_name": "jared k", "link": "https://stackoverflow.com/users/4901613/jared-k"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 362, "favorite_count": 0, "accepted_answer_id": 30991843, "answer_count": 1, "score": 0, "last_activity_date": 1435018267, "creation_date": 1434567076, "last_edit_date": 1434992676, "question_id": 30899993, "link": "https://stackoverflow.com/questions/30899993/errors-when-trying-to-start-a-new-rails-app-with-spree-commerce", "title": "Errors when trying to start a new Rails app with Spree Commerce", "body": "<p>I am getting the following error when trying to install Spree Commerce (a clean install) into a new rails application. </p>\n\n<p>Could not load generator \"generators/spree/install/install_generator\". Error: uninitialized constant Bundler::Thor::Base.</p>\n\n<p>Any help would be greatly appreciated!  I have already checked the resources on the SpreeCommerce Documentation, Spree's Github, and similar issues that have come up and those solutions do not work for me.</p>\n\n<p>Edit:  Here is my gemfile:</p>\n\n<pre><code>source 'https://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.2.0'\n# Use sqlite3 as the database for Active Record\ngem 'sqlite3'\n# Use SCSS for stylesheets\ngem 'sass-rails', '~&gt; 5.0'\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .coffee assets and views\ngem 'coffee-rails', '~&gt; 4.1.0'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n# gem 'therubyracer', platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n# Use ActiveModel has_secure_password\n# gem 'bcrypt', '~&gt; 3.1.7'\n\n# Use Unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\ngroup :development, :test do\n  # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\nend\n\n\ngem 'spree', '3.0.1'\ngem 'spree_gateway', github: 'spree/spree_gateway', branch: '3-0-stable'\ngem 'spree_auth_devise', github: 'spree/spree_auth_devise', branch: '3-0-    stable'\n</code></pre>\n\n<p>Here are the commands I have tried (all on clean new rails apps...all have the same resulting error as above):</p>\n\n<p>1)  I've tried using the methods listed on Spree's github page:</p>\n\n<pre><code>$ gem install spree\n$ rails _4.2.1_ new my_store\n$ spree install my_store\n</code></pre>\n\n<p>2)  I've tried adding spree gem manually to a new apps gemfile, and then:</p>\n\n<pre><code>$ bundle install\n$ rails g spree:install --sample=false --seed=false\n</code></pre>\n\n<p>3)  I've tried following the steps as outlined on the spreecommerce tutorial:</p>\n\n<pre><code>$ gem install spree_cmd\n$ rails new mystore\n$ spree install --auto-accept\n</code></pre>\n"}, {"tags": ["ruby", "tags", "cucumber", "rake"], "answers": [{"comments": [{"owner": {"reputation": 65, "user_id": 1505191, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4oz8y.jpg?s=128&g=1", "display_name": "mount986", "link": "https://stackoverflow.com/users/1505191/mount986"}, "edited": false, "score": 0, "creation_date": 1434736252, "post_id": 30918816, "comment_id": 49923464, "body": "I appreciate the help with running a single folder, that will certainly be helpful.  As you can imagine though, this specific scenario is a bit of a simplification.  In reality there are 100 folders I want to run, but only a few I want to exclude.  I imagine I can play around with using your suggestion to run multiple folders or use wild characters, but what I am really looking for is an &quot;exclude&quot; command."}, {"owner": {"reputation": 812, "user_id": 1155498, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e82b888c69fb4df9c906753f8336ddd0?s=128&d=identicon&r=PG", "display_name": "Sukuva", "link": "https://stackoverflow.com/users/1155498/sukuva"}, "reply_to_user": {"reputation": 65, "user_id": 1505191, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4oz8y.jpg?s=128&g=1", "display_name": "mount986", "link": "https://stackoverflow.com/users/1505191/mount986"}, "edited": false, "score": 0, "creation_date": 1434983045, "post_id": 30918816, "comment_id": 49995085, "body": "Okay, i got it. I think you can use tag feature (--tags ~@exclude) to exclude scenarios. Let me know if that works for you."}, {"owner": {"reputation": 65, "user_id": 1505191, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4oz8y.jpg?s=128&g=1", "display_name": "mount986", "link": "https://stackoverflow.com/users/1505191/mount986"}, "edited": false, "score": 0, "creation_date": 1435072998, "post_id": 30918816, "comment_id": 50041158, "body": "Ultimately this is what we ended up doing. However in the folder we want to exclude are ~25 features with 100s of scenarios.  Even if we add the tag at the feature level, that&#39;s 25 additional tags that need to be managed. It would be simpler if Cucumber had a way to include/exclude entire folders, but I&#39;m beginning to think that just doesn&#39;t exist as a feature.  Thank you for your help :)"}], "tags": [], "owner": {"reputation": 812, "user_id": 1155498, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/e82b888c69fb4df9c906753f8336ddd0?s=128&d=identicon&r=PG", "display_name": "Sukuva", "link": "https://stackoverflow.com/users/1155498/sukuva"}, "is_accepted": true, "score": 0, "last_activity_date": 1434639185, "creation_date": 1434639185, "answer_id": 30918816, "question_id": 30899929, "link": "https://stackoverflow.com/questions/30899929/how-to-exclude-files-directories-when-running-a-cucumber-rake-task/30918816#30918816", "title": "How to exclude files/directories when running a Cucumber Rake task?", "body": "<p><code>Cucumber::Rake::Task.new(:all_tag_1) do |t|\n  tags = '--tags ~@wip --tags @tag1'\n  t.cucumber_opts = \"features/scenarios/folder_1 --format html --out features/build_results/all_tag_1.html --format pretty #{tags} --format junit --out features/build_results/reports\"\nend</code></p>\n\n<p>This command will only run scenarios from features/scenarios/folder_1 folder... </p>\n"}], "owner": {"reputation": 65, "user_id": 1505191, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/4oz8y.jpg?s=128&g=1", "display_name": "mount986", "link": "https://stackoverflow.com/users/1505191/mount986"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1183, "favorite_count": 0, "accepted_answer_id": 30918816, "answer_count": 1, "score": 0, "last_activity_date": 1434639185, "creation_date": 1434566897, "last_edit_date": 1434568193, "question_id": 30899929, "link": "https://stackoverflow.com/questions/30899929/how-to-exclude-files-directories-when-running-a-cucumber-rake-task", "title": "How to exclude files/directories when running a Cucumber Rake task?", "body": "<p>I currently have two folders with different features within my scenarios folder:</p>\n\n<pre><code>features\n  scenarios\n    folder_1\n      first_feature.feature\n    folder_2\n      second_feature.feature\n</code></pre>\n\n<p>Inside these features I have many scenarios that share some different tags</p>\n\n<p>first_feature.feature:</p>\n\n<pre><code>Feature: One\n  @tag1 @tag2\n  Scenario: Scenario 1\n\n  @tag3\n  Scenario: Scenario 2\n</code></pre>\n\n<p>second_feature.feature:</p>\n\n<pre><code>Feature: Two\n  @tag1 @tag4\n  Scenario: Scenario 3\n</code></pre>\n\n<p>So here's the question:  I have a rake task which goes through my scenarios and runs everything with the tag @tag1. Right now that includes Scenario 1 in feature one and Sceanrio 3 in Feature 2.  Without changing any tags or scenarios, is there anything I can add to my rake task to tell it to ignore any tests in a certain file/folder?  In the example above, I would like my rake task to ignore any scenarios it finds in folder_2, so Scenario 3 will not run even though it has @tag1.</p>\n\n<p>My current rake task:</p>\n\n<pre><code>Cucumber::Rake::Task.new(:all_tag_1) do |t|\n  tags = '--tags ~@wip --tags @tag1'\n  t.cucumber_opts = \"--format html --out features/build_results/all_tag_1.html --format pretty #{tags} --format junit --out features/build_results/reports\"\nend\n</code></pre>\n\n<p>Part of the problem is that I have scoured the internet and Cucumber documentation and am unable to find anywhere that lists all of the valid options for cucumber_opts.  If anyone can even just point me in the right direction to find a list of the different possibilities, that would be much appreciated.</p>\n\n<p>Thank you.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "eclipse"], "comments": [{"owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "edited": false, "score": 0, "creation_date": 1434567427, "post_id": 30899849, "comment_id": 49839064, "body": "Thanks for downvoting without even commenting a reason for it, thanks a lot."}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 1, "creation_date": 1434572514, "post_id": 30899849, "comment_id": 49842227, "body": "If you have Rails set up, try starting WEBrick from the command line. <code>cd</code> to your_app_directory and try <code>rails s</code>. This will at least help you isolate the issue to your Rails installation vs your dev tools."}], "owner": {"reputation": 1176, "user_id": 2750877, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/65fe7528984db6c53fa2e13e9b574708?s=128&d=identicon&r=PG&f=1", "display_name": "bork", "link": "https://stackoverflow.com/users/2750877/bork"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434567340, "creation_date": 1434566659, "last_edit_date": 1434567340, "question_id": 30899849, "link": "https://stackoverflow.com/questions/30899849/radrails-an-internal-error-occurred-during-starting-server", "title": "RadRails: An internal error occurred during: &quot;Starting Server&quot;", "body": "<p>I've decided to learn some Ruby on Rails, but unfortunately I can't get the testing server to work. When I try to fire it up I get this message: <strong>RadRails: An internal error occurred during: \"Starting Server\"</strong>, and when I click OK in the message window the server's status is frozen at <strong>Starting</strong>. I get no other errors or messages.</p>\n\n<p>I use the RadRails - EasyEclipse for Ruby and Rails IDE (latest version as far as I'm concerned) and I've followed these instructions to set everyting up: <a href=\"http://www.easyeclipse.org/site/distributions/ruby-rails.html\" rel=\"nofollow\">http://www.easyeclipse.org/site/distributions/ruby-rails.html</a>.\nThe Apache server is up and running when I click the <strong>Manage Servers</strong>-tab in <strong>Bitnami Ruby Stack</strong></p>\n\n<p>Any help is appriciated.</p>\n"}, {"tags": ["ruby", "gem", "bundler"], "comments": [{"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1434572207, "post_id": 30899776, "comment_id": 49842066, "body": "Have you tried removing you Gemfile.lock and running <code>bundle</code> again?"}, {"owner": {"reputation": 25294, "user_id": 61072, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tYo7v.png?s=128&g=1", "display_name": "esilver", "link": "https://stackoverflow.com/users/61072/esilver"}, "reply_to_user": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "edited": false, "score": 0, "creation_date": 1434581096, "post_id": 30899776, "comment_id": 49846202, "body": "I had tried this yes."}], "answers": [{"comments": [{"owner": {"reputation": 25294, "user_id": 61072, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tYo7v.png?s=128&g=1", "display_name": "esilver", "link": "https://stackoverflow.com/users/61072/esilver"}, "edited": false, "score": 0, "creation_date": 1434581080, "post_id": 30902491, "comment_id": 49846194, "body": "Thanks for this insight! Can you tell me - is there a way for me to determine which version has been marked &quot;stable&quot;? For example, Google API client is at: <a href=\"https://rubygems.org/gems/google-api-client/versions\" rel=\"nofollow noreferrer\">rubygems.org/gems/google-api-client/versions</a>, but I don&#39;t see any &quot;stable&quot; tags. I did not see any &quot;stable&quot; tags in the github repo as well. Is there a handy way to list the &quot;stable&quot; version of a gem with gem or bundler?"}], "tags": [], "owner": {"reputation": 36, "user_id": 5015633, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-iGRlK07-R2s/AAAAAAAAAAI/AAAAAAAAB04/aVwOJhfPwaE/photo.jpg?sz=128", "display_name": "Sploadie", "link": "https://stackoverflow.com/users/5015633/sploadie"}, "is_accepted": true, "score": 0, "last_activity_date": 1434575499, "creation_date": 1434575499, "answer_id": 30902491, "question_id": 30899776, "link": "https://stackoverflow.com/questions/30899776/why-is-bundler-requiring-an-extremely-old-version-of-a-gem-when-version-not-spec/30902491#30902491", "title": "Why is bundler requiring an extremely old version of a gem when version not specified?", "body": "<p>Bundler uses rubygems, which, when not given a specific version, defaults to the last version marked 'stable', which, if the tag isn't maintained, can mean even terribly deprecated builds.</p>\n"}], "owner": {"reputation": 25294, "user_id": 61072, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/tYo7v.png?s=128&g=1", "display_name": "esilver", "link": "https://stackoverflow.com/users/61072/esilver"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 146, "favorite_count": 0, "accepted_answer_id": 30902491, "answer_count": 1, "score": 1, "last_activity_date": 1434575499, "creation_date": 1434566443, "last_edit_date": 1434571028, "question_id": 30899776, "link": "https://stackoverflow.com/questions/30899776/why-is-bundler-requiring-an-extremely-old-version-of-a-gem-when-version-not-spec", "title": "Why is bundler requiring an extremely old version of a gem when version not specified?", "body": "<p>I have a Gemfile that looks like this:</p>\n\n<pre><code>gem 'google-api-client', :require =&gt; 'google/api_client'\ngem 'my_baseimage', '0.0.3', :git =&gt; 'https://github.com/xxx/BaseImage.git'\n</code></pre>\n\n<p>I have a base gem that requires a bunch of common gems across projects. </p>\n\n<p>However, when I run <code>bundle install</code>, I see errors like this:</p>\n\n<pre><code>  In Gemfile:\n    activerecord (&gt;= 0) ruby depends on\n      activemodel (= 4.1.11) ruby depends on\n        activesupport (= 4.1.11) ruby\n\n    activerecord (&gt;= 0) ruby depends on\n      activemodel (= 4.1.11) ruby depends on\n        activesupport (= 4.1.11) ruby\n\n    google-api-client (&gt;= 0) ruby depends on\n      activesupport (~&gt; 3.2) ruby\nBundler could not find compatible versions for gem \"rack\":\n  In Gemfile:\n    rack-contrib (= 1.1.0) ruby depends on\n      rack (&gt;= 0.9.1) ruby\n\n    sinatra (&gt;= 0) ruby depends on\n      rack (~&gt; 1.4) ruby\n\n    google-api-client (&gt;= 0) ruby depends on\n      rack (= 1.2.0) ruby\n\n    rack (&gt;= 0) ruby\n</code></pre>\n\n<p><code>google-api-client</code> hasn't required rack 1.2 since, like, <a href=\"https://rubygems.org/gems/google-api-client/versions/0.1.0\" rel=\"nofollow\">version 0.1</a>, and moreover <code>my_baseimage</code> requires 0.7.1. When I run a <code>gem dependency -R</code>, I see this:</p>\n\n<pre><code>    google-api-client-0.7.1 (addressable (&gt;= 2.3.2))\n    google-api-client-0.7.1 (autoparse (&gt;= 0.3.3))\n    google-api-client-0.7.1 (extlib (&gt;= 0.9.15))\n    google-api-client-0.7.1 (faraday (&gt;= 0.9.0))\nGem google-api-client-0.7.1\n    google-api-client-0.7.1 (jwt (&gt;= 0.1.5))\n    google-api-client-0.7.1 (launchy (&gt;= 2.1.1))\n    google-api-client-0.7.1 (multi_json (&gt;= 1.0.0))\n    google-api-client-0.7.1 (rake (&gt;= 0.9.0, development))\n    google-api-client-0.7.1 (rake (&gt;= 0.9.0, development))\n    google-api-client-0.7.1 (retriable (&gt;= 1.4))\n    google-api-client-0.7.1 (rspec (&gt;= 2.11.0, development))\n    google-api-client-0.7.1 (signet (&gt;= 0.5.0))\n    google-api-client-0.7.1 (uuidtools (&gt;= 2.1.0))\n</code></pre>\n\n<p>I was able to work around this issue by, in my Gemfile, specifying 0.7.1, as follows:</p>\n\n<pre><code>gem 'google-api-client', '0.7.1', :require =&gt; 'google/api_client'\ngem 'my_baseimage', '0.0.3', :git =&gt; 'https://github.com/xxx/BaseImage.git'\n</code></pre>\n\n<p>However, I was hoping that in my project-specific gemfiles I would not have to specified gem versions, they'd just take them from <code>my_baseimage</code> as-is. </p>\n\n<p>Can anyone suggest why it would appear that <code>bundle install</code> is defaulting to a very old version of <code>google-api-client</code> when the dependency graph specifies the one I want (0.7.1) and <code>my_baseimage</code> also specifies the one I want (0.7.1)?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1434566491, "post_id": 30899727, "comment_id": 49838477, "body": "What do you mean by &quot;do it right&quot;?"}], "answers": [{"tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": false, "score": 0, "last_activity_date": 1434566553, "creation_date": 1434566553, "answer_id": 30899815, "question_id": 30899727, "link": "https://stackoverflow.com/questions/30899727/long-strong-params-line-breaking-using-rubocop/30899815#30899815", "title": "Long strong params line breaking using Rubocop", "body": "<p>One way is: You can break the code on multiple lines to make it more readable. But since, you are permitting a lot of attributes, that means there would be a lot of code in your controller, which is a bad thing per se. Controllers should always be skinny. </p>\n\n<pre><code>params.permit(:id, { \n  tree_service_categories_attributes: [ \n    :id, :title, :enabled, :_destroy, {\n      tree_service_category_items_attributes: [\n        :id, :image, :title, :description, :cost, :enabled\n      ] \n    }\n  ]\n})\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "is_accepted": true, "score": 1, "last_activity_date": 1434566627, "creation_date": 1434566627, "answer_id": 30899837, "question_id": 30899727, "link": "https://stackoverflow.com/questions/30899727/long-strong-params-line-breaking-using-rubocop/30899837#30899837", "title": "Long strong params line breaking using Rubocop", "body": "<p>This can depend upon the other rules you have turned on in Rubocop.  But it seems straight forward, just make the lines shorter.  Here's one easy way:</p>\n\n<pre><code>def categories_attrs\n  { tree_service_categories_attributes: [:id, :title, :enabled, :_destroy, items_attrs] }\nend\n\ndef items_attrs\n  { tree_service_category_items_attributes: [:id, :image, :title, :description, :cost, :enabled] }\nend\n\ndef tree_service_params\n  params.permit(:id, categories_attrs)\nend\n</code></pre>\n\n<p>You could also go multi-line, like this:</p>\n\n<pre><code>def tree_service_params\n  params.permit(:id, { \n    tree_service_categories_attributes: [\n      :id, :title, :enabled, :_destroy, {\n        tree_service_category_items_attributes: [\n          :id, :image, :title, :description, :cost, :enabled\n        ] \n      }\n    ]\n  })\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 99, "user_id": 4592295, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5c0d835cc74f96dfca4f109728f176c3?s=128&d=identicon&r=PG&f=1", "display_name": "Siddhant", "link": "https://stackoverflow.com/users/4592295/siddhant"}, "is_accepted": false, "score": 0, "last_activity_date": 1434569719, "last_edit_date": 1434569719, "creation_date": 1434568107, "answer_id": 30900310, "question_id": 30899727, "link": "https://stackoverflow.com/questions/30899727/long-strong-params-line-breaking-using-rubocop/30900310#30900310", "title": "Long strong params line breaking using Rubocop", "body": "<p>First solution(having different methods for different group of attributes) is more preferred if U have to take care of authorization as U will be able to authorize each methods independently in the first but not in the second.</p>\n\n<pre><code>def categories_attrs\n\n// if authorized return params object , if not return null.\n\n  { tree_service_categories_attributes: [:id, :title, :enabled, :_destroy, items_attrs] }\n\nend\n</code></pre>\n"}], "owner": {"reputation": 10113, "user_id": 895487, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/336ae3b2e846448b71eb7d69e3d96a75?s=128&d=identicon&r=PG&f=1", "display_name": "malcoauri", "link": "https://stackoverflow.com/users/895487/malcoauri"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 856, "favorite_count": 0, "accepted_answer_id": 30899837, "answer_count": 3, "score": 2, "last_activity_date": 1434569719, "creation_date": 1434566282, "question_id": 30899727, "link": "https://stackoverflow.com/questions/30899727/long-strong-params-line-breaking-using-rubocop", "title": "Long strong params line breaking using Rubocop", "body": "<p>There is the following code line:</p>\n\n<pre><code>  def tree_service_params\n    params.permit(:id, { tree_service_categories_attributes: [:id, :title, :enabled, :_destroy, { tree_service_category_items_attributes: [:id, :image, :title, :description, :cost, :enabled] }] })\n  end\n</code></pre>\n\n<p>This is simple Rails strong params. I need to break this line because it's too long. I use Rubocop to satisfy Ruby guidelines. How can I do it right? Thanks in advance! </p>\n"}, {"tags": ["php", "ruby", "capistrano", "web-deployment", "capistrano3"], "answers": [{"comments": [{"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1435335405, "post_id": 31064282, "comment_id": 50174158, "body": "Thank you for answer. Now I am currently using option # 2, but I thought about more nice solution. Ok I will try open new issue at GitHub."}, {"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1435648898, "post_id": 31064282, "comment_id": 50275034, "body": "I created pull request into this gem. See my updated answer."}, {"owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "reply_to_user": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1435858249, "post_id": 31064282, "comment_id": 50386989, "body": "Congrats on the getting the PR merged!"}], "tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": true, "score": 5, "last_activity_date": 1435288409, "creation_date": 1435288409, "answer_id": 31064282, "question_id": 30899477, "link": "https://stackoverflow.com/questions/30899477/capistrano-env-file-permissions/31064282#31064282", "title": "capistrano-env file permissions", "body": "<p>You have a couple options to make this nicer.</p>\n\n<ol>\n<li><p>It doesn't look like capistrano-env supports a custom permissions setting, but perhaps that feature could be added! <a href=\"https://github.com/masarakki/capistrano-env/issues\" rel=\"noreferrer\">Open an issue at GitHub</a> and maybe the project maintainer will add it.</p></li>\n<li><p>You could modify your <code>deploy.rb</code> to run the necessary <code>chmod</code> command for you. That way you wouldn't have to manually run chmod after each deploy.</p></li>\n</ol>\n\n<p>Something like this:</p>\n\n<pre><code># In deploy.rb\nafter \"capenv:copy\", \"capenv:chmod\" do\n  on roles(:all) do\n    execute \"chmod\", \"a+r\", \"#{release_path}/#{Capistrano::Env.filename}\"\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1435648860, "post_id": 31096847, "comment_id": 50274999, "body": "Thank you @Joshua for code sample. I created pull request on github and add new option into this gem. See my updated answer."}, {"owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "reply_to_user": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "edited": false, "score": 0, "creation_date": 1435685153, "post_id": 31096847, "comment_id": 50299595, "body": "@stepozer Neat! Great job with the pull request."}], "tags": [], "owner": {"reputation": 2009, "user_id": 20769, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/922e7e3c612566756735b2def78827d8?s=128&d=identicon&r=PG", "display_name": "Joshua", "link": "https://stackoverflow.com/users/20769/joshua"}, "is_accepted": false, "score": 4, "last_activity_date": 1435473172, "creation_date": 1435473172, "answer_id": 31096847, "question_id": 30899477, "link": "https://stackoverflow.com/questions/30899477/capistrano-env-file-permissions/31096847#31096847", "title": "capistrano-env file permissions", "body": "<p>Looking at the <a href=\"https://github.com/masarakki/capistrano-env/blob/master/lib/capistrano/env/v3/tasks/env.rake\" rel=\"nofollow\">capevn code</a> the upload is done in a single task. You can locally override the definition of that task so you can change the file permissions.  Put something like the following in deploy.rb</p>\n\n<pre><code>namespace :capenv do\n  desc 'copy .env to release_path'\n  task :copy do\n    on roles(:all) do\n      upload! StringIO.new(Capistrano::Env.to_s), \"#{release_path}/#{Capistrano::Env.filename}\", mode: 'a+r'\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 1212, "user_id": 3688538, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/9u2w3.png?s=128&g=1", "display_name": "stepozer", "link": "https://stackoverflow.com/users/3688538/stepozer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 539, "favorite_count": 0, "accepted_answer_id": 31064282, "answer_count": 2, "score": 6, "last_activity_date": 1435648757, "creation_date": 1434565513, "last_edit_date": 1435648757, "question_id": 30899477, "link": "https://stackoverflow.com/questions/30899477/capistrano-env-file-permissions", "title": "capistrano-env file permissions", "body": "<p>I use gem <code>capistrano-env</code> and found a small problem. My deploy script is:</p>\n\n<pre><code>Capistrano::Env.use do |env|\n  env.add 'DB_DSN', 'mysql:host=localhost;dbname=dbname'\n  env.add 'DB_USER', 'user'\n  env.add 'DB_PASS', 'pass'\nend\n</code></pre>\n\n<p>And this code create <code>.env</code> file on server after deploy. But! <code>.env</code> file permissions is 640 and my PHP script cannot read it. I can run <code>chmod</code> command after each deploy, but probably exist other nice solution?</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>I created <a href=\"https://github.com/masarakki/capistrano-env/pull/23\" rel=\"noreferrer\">pull request</a> and add new <code>filemode</code> option into this gem. So, now solution is:</p>\n\n<pre><code>Capistrano::Env.use do |env|\n  env.add 'DB_DSN', 'mysql:host=localhost;dbname=dbname'\n  env.add 'DB_USER', 'user'\n  env.add 'DB_PASS', 'pass'\n  env.filemode = 0644\nend\n</code></pre>\n"}, {"tags": ["sql", "ruby", "activerecord", "arel"], "comments": [{"owner": {"reputation": 5170, "user_id": 2622934, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/75041580faf9fba4c3282d529bf3a92c?s=128&d=identicon&r=PG", "display_name": "cschroed", "link": "https://stackoverflow.com/users/2622934/cschroed"}, "edited": false, "score": 2, "creation_date": 1434626667, "post_id": 30899226, "comment_id": 49865116, "body": "I don&#39;t know that ActiveRecord provides a nice way to do this but the Arel gem includes a <code>WITH RECURSIVE</code> test for its SelectManager <a href=\"https://github.com/rails/arel/blob/master/test/test_select_manager.rb\" rel=\"nofollow noreferrer\">here</a>."}], "answers": [{"comments": [{"owner": {"reputation": 3215, "user_id": 1574959, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/fa0d5afe9854289a5c4724e724eb74c3?s=128&d=identicon&r=PG", "display_name": "Phil Frost", "link": "https://stackoverflow.com/users/1574959/phil-frost"}, "edited": false, "score": 0, "creation_date": 1607000456, "post_id": 30924648, "comment_id": 115137885, "body": "You can skip the two-step process of querying for ids and then querying to load the rest of the row with <code>self.class.find_by_sql(manager.to_sql)</code>"}], "tags": [], "owner": {"reputation": 19398, "user_id": 435471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WvUmQ.jpg?s=128&g=1", "display_name": "Kyle Decot", "link": "https://stackoverflow.com/users/435471/kyle-decot"}, "is_accepted": true, "score": 4, "last_activity_date": 1434658338, "last_edit_date": 1434658338, "creation_date": 1434657440, "answer_id": 30924648, "question_id": 30899226, "link": "https://stackoverflow.com/questions/30899226/equivalent-for-sql-with-recursive-in-arel/30924648#30924648", "title": "Equivalent for SQL WITH RECURSIVE in Arel", "body": "<p>After taking a look at the test that @cschroed pointed me to I was able to refactor my raw SQL into:</p>\n\n<pre><code>def lineage\n  hierarchy = Arel::Table.new :hierarchy\n  recursive_table = Arel::Table.new(table_name).alias :recursive\n  select_manager = Arel::SelectManager.new(ActiveRecord::Base).freeze\n\n  non_recursive_term = select_manager.dup.tap do |m|\n    m.from table_name\n    m.project Arel.star\n    m.where arel_table[:id].eq(id)\n  end\n\n  recursive_term = select_manager.dup.tap do |m|\n    m.from recursive_table\n    m.project recursive_table[Arel.star]\n    m.join hierarchy\n    m.on recursive_table[:id].eq(hierarchy[:parent_id])\n  end\n\n  union = non_recursive_term.union :all, recursive_term\n  as_statement = Arel::Nodes::As.new hierarchy, union\n\n  manager = select_manager.dup.tap do |m|\n    m.with :recursive, as_statement\n    m.from hierarchy\n    m.project hierarchy[:id]\n  end\n\n  ids = ActiveRecord::Base.connection.execute(manager.to_sql).field_values('id')\n  ordering = ids.map { |id| arel_table[:id].eq(id) }\n\n  self.class.where(id: ids).order(ordering)\nend\n\nprivate\n\ndef arel_table\n  self.class.arel_table\nend\n\ndef table_name\n  self.class.table_name\nend\n</code></pre>\n"}], "owner": {"reputation": 19398, "user_id": 435471, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/WvUmQ.jpg?s=128&g=1", "display_name": "Kyle Decot", "link": "https://stackoverflow.com/users/435471/kyle-decot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 725, "favorite_count": 0, "accepted_answer_id": 30924648, "answer_count": 1, "score": 5, "last_activity_date": 1434658338, "creation_date": 1434564784, "last_edit_date": 1434565166, "question_id": 30899226, "link": "https://stackoverflow.com/questions/30899226/equivalent-for-sql-with-recursive-in-arel", "title": "Equivalent for SQL WITH RECURSIVE in Arel", "body": "<p>I have the following SQL which recursively gets all of the parents of a record using <code>WITH RECURSIVE</code>. What would the equivalent of this be in Arel?</p>\n\n<pre><code>table_name = self.class.table_name\narel_table = self.class.arel_table\n\nsql = &lt;&lt;-SQL\n  WITH RECURSIVE a AS (\n    SELECT * FROM #{table_name} WHERE id = '#{id}'\n      UNION ALL\n    SELECT b.* FROM #{table_name} b\n      JOIN a ON b.id = a.parent_id\n  ) SELECT id FROM a\nSQL\n\nids = ActiveRecord::Base.connection.execute(sql).field_values('id')\nordering = ids.map { |id| arel_table[:id].eq(id) }\nself.class.where(id: ids).order(ordering)\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "wrapper"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1434564477, "post_id": 30899062, "comment_id": 49837303, "body": "without an &quot;ugly ordered set of things&quot; how would you like it to determine order of operations? I guess you could set up a parser that would precedent the order of possible methods but for an API it makes more sense to make each operation separate so the best thing you could do is create a client like class that will hold the credentials and allow the end user to make additional requests through there."}, {"owner": {"reputation": 859, "user_id": 868047, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65cca092eec24c39aac3545ed9edf8d8?s=128&d=identicon&r=PG", "display_name": "jack_was_taken", "link": "https://stackoverflow.com/users/868047/jack-was-taken"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1434565060, "post_id": 30899062, "comment_id": 49837641, "body": "I guess my goal was to see if I could let the methods in a chain like <code>Wrapper.find(id).delete</code> be called in succession without returning and calling my ensure block. Or if there was a way I was unaware of to simply parse a chain of methods being called on an object (which doesn&#39;t make a whole lot of sense, but just thought I&#39;d check)."}], "answers": [{"tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 1, "last_activity_date": 1434591141, "creation_date": 1434591141, "answer_id": 30905100, "question_id": 30899062, "link": "https://stackoverflow.com/questions/30899062/call-arbitrary-chained-methods-on-wrapper-class/30905100#30905100", "title": "call arbitrary chained methods on wrapper class", "body": "<p>the way to do this is to define a proxy object and to pass that around instead of the actual thing.</p>\n\n<p>In the object itself, hold a reference to the Thing and override method_missing: <a href=\"http://ruby-doc.org/core-2.1.0/BasicObject.html#method-i-method_missing\" rel=\"nofollow\">http://ruby-doc.org/core-2.1.0/BasicObject.html#method-i-method_missing</a></p>\n\n<p>In the method missing do the thing you are doing today. In a nutshell this is what ActiveRecord is doing.</p>\n\n<p>As far as chaining things, I don't believe it would be a problem as methods that can be chained usually return references to self. When you call the 2nd method in the chain, you actually have done the work for the first one and have an object that has the 2nd method in the chain. The only trick you need to pay attention to is that you want to return a reference to the proxy class that encapsulates the thing instead of the actual return of the thing if you want the chaining to succeed.</p>\n\n<p>Give it a shot and ping me if you run into trouble and I can spin up a fully working example.</p>\n"}], "owner": {"reputation": 859, "user_id": 868047, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/65cca092eec24c39aac3545ed9edf8d8?s=128&d=identicon&r=PG", "display_name": "jack_was_taken", "link": "https://stackoverflow.com/users/868047/jack-was-taken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 93, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434591141, "creation_date": 1434564273, "last_edit_date": 1434565643, "question_id": 30899062, "link": "https://stackoverflow.com/questions/30899062/call-arbitrary-chained-methods-on-wrapper-class", "title": "call arbitrary chained methods on wrapper class", "body": "<p>I'm creating a wrapper class for an API because my application will need to call it with different credentials at different times. I started off passing the wrapper a method and arguments and then doing (basically) this when calling it</p>\n\n<pre><code>call\n  set_credentials\n  TheAPI::Thing.send(method, args)\nensure\n  reset_credentials_to_default\nend\n</code></pre>\n\n<p>HOWEVER, I realized that a challenge here is if I need to chain methods; this way I can only call one at a time; so for example I wouldn't be able to to <code>TheAPI::Thing.find(id).delete</code>. (At least, not without re-calling the credentials setter, which is undesirable since I have to fetch a token).</p>\n\n<p>Is there a way using ruby to collect the methods/args being chained onto an object? Or would I simply have to pass in some ugly ordered set of things?</p>\n\n<p>EDIT: Surely activerecord's query builder does something like this, collecting the chained methods before returning, and then after they're all collected, ensuring that as a final step the query is built, called, and returned? </p>\n"}, {"tags": ["ruby", "http", "asynchronous", "gem", "eventmachine"], "comments": [{"owner": {"reputation": 34214, "user_id": 1141839, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d6b5c46e3c79ab446329ff05949594cd?s=128&d=identicon&r=PG", "display_name": "PinnyM", "link": "https://stackoverflow.com/users/1141839/pinnym"}, "edited": false, "score": 1, "creation_date": 1434564373, "post_id": 30899019, "comment_id": 49837228, "body": "Any reason you can&#39;t just use <a href=\"http://stackoverflow.com/questions/6643964/asynchronous-http-request-in-ruby\">threads</a>?"}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1434567806, "post_id": 30899019, "comment_id": 49839305, "body": "you can always fall back to <code>IO.select</code> to implement nonblocking functionality: <a href=\"http://stackoverflow.com/questions/6165735/understanding-io-select-when-reading-socket-in-ruby\" title=\"understanding io select when reading socket in ruby\">stackoverflow.com/questions/6165735/&hellip;</a> if you want your api to respond faster, you might be much better off by using something like sidekiq for asynchronous tasks!"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1434568353, "post_id": 30899019, "comment_id": 49839653, "body": "Consider this: Ruby is a third-party library/package, as are many other things you add to a machine after the initial OS installation. It&#39;s just how OSS works. You have to decide to what extent you want to go with &quot;other&quot; software, but it&#39;s very common to rely on well-written and well-tested libraries/gems, whether they come from the core developers or not. (And, just because something comes from the core team doesn&#39;t automatically mean it&#39;s the best choice, it&#39;s just what is bundled.)"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1434568668, "post_id": 30899019, "comment_id": 49839835, "body": "As far as Event Machine, or other gems, look to see their activity level, whether they&#39;re currently supported, etc. I&#39;d recommend looking at the <a href=\"https://github.com/typhoeus/typhoeus\" rel=\"nofollow noreferrer\">Typhoeus/Hydra</a> duo. It&#39;s very powerful and fast and supports multiple request in parallel and it&#39;s easy to work with."}], "answers": [{"tags": [], "owner": {"reputation": 18079, "user_id": 503402, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/873ad707fb34aac8fbdfbfec676e02e9?s=128&d=identicon&r=PG", "display_name": "Max", "link": "https://stackoverflow.com/users/503402/max"}, "is_accepted": true, "score": 4, "last_activity_date": 1434569844, "creation_date": 1434569844, "answer_id": 30900854, "question_id": 30899019, "link": "https://stackoverflow.com/questions/30899019/does-ruby-support-nonblocking-http-requests-without-a-third-party-library/30900854#30900854", "title": "Does Ruby support nonblocking HTTP requests without a third-party library?", "body": "<p>Based on my tests, MRI does support nonblocking HTTP requests simply by using a thread. Threads don't always allow parallelism in Ruby due to the GIL, but <code>net/http</code> appears to be one of the exceptions:</p>\n\n<pre><code>require 'net/http'\nrequire 'benchmark'\n\nuri = URI('http://stackoverflow.com/questions/30899019/')\n\nn = 10\nBenchmark.bm do |b|\n  b.report { n.times { Net::HTTP.get(uri) } }\n  b.report { threads = Array.new(n) { Thread.new { Net::HTTP.get(uri) } }; threads.each(&amp;:join) }\nend\n#     user     system      total        real\n# 0.010000   0.010000   0.020000 (  0.102024)\n# 0.020000   0.010000   0.030000 (  0.025904)\n</code></pre>\n"}], "owner": {"reputation": 1557, "user_id": 5020937, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nBi8Q.jpg?s=128&g=1", "display_name": "Adam", "link": "https://stackoverflow.com/users/5020937/adam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1263, "favorite_count": 1, "accepted_answer_id": 30900854, "answer_count": 1, "score": 4, "last_activity_date": 1434569844, "creation_date": 1434564155, "last_edit_date": 1434568151, "question_id": 30899019, "link": "https://stackoverflow.com/questions/30899019/does-ruby-support-nonblocking-http-requests-without-a-third-party-library", "title": "Does Ruby support nonblocking HTTP requests without a third-party library?", "body": "<p>I am writing an API to access resources on one of my servers. Part of this API will make HTTP requests. In the name of good software design, I don't want my API to be blocking. </p>\n\n<p>I am fairly new to Ruby, but in Java I would provide an Asynchronous API that returns Futures of the response. In JavaScript I would take callbacks in my methods.</p>\n\n<p>I've searched for other Stack Overflow questions, and <a href=\"https://github.com/eventmachine/em-http-request\" rel=\"noreferrer\">https://github.com/eventmachine/em-http-request</a> seems to do what I want. However, I am hesitant to rely on a third-party library. Is there a Ruby native way to solve this problem, or do most developers rely on third-party libraries?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1434563916, "post_id": 30898908, "comment_id": 49836944, "body": "your variable <code>@product</code> is <code>nil</code> in your case"}, {"owner": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 0, "creation_date": 1434565548, "post_id": 30898908, "comment_id": 49837890, "body": "It would be helpful if you posted a controller"}, {"owner": {"reputation": 447, "user_id": 4363086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HESLi.jpg?s=128&g=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/4363086/xavier"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1434566293, "post_id": 30898908, "comment_id": 49838343, "body": "@MrYoshiji I understand that the id is missing How would i check if it&#39;s the edit path from another view? It seems kind of irrelevant to check like this if it only works inside certain scenarios."}, {"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 1, "creation_date": 1434568814, "post_id": 30898908, "comment_id": 49839921, "body": "the answer is in your response : &quot;it only works inside certain scenarios&quot;, then use a logical <code>if</code> statement defining these &quot;scenarios&quot; (something like @ArslanAli posted or a simple <code>if @product.persisted? &amp;&amp; current_page?([...])</code>)"}, {"owner": {"reputation": 447, "user_id": 4363086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HESLi.jpg?s=128&g=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/4363086/xavier"}, "reply_to_user": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1434578194, "post_id": 30898908, "comment_id": 49845044, "body": "@MrYoshiji thank you very much I actually used a combination for yours and Arshans answer.  It&#39;s always difficult when you start something new :)  Thanks for your support!"}], "answers": [{"comments": [{"owner": {"reputation": 447, "user_id": 4363086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HESLi.jpg?s=128&g=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/4363086/xavier"}, "edited": false, "score": 1, "creation_date": 1434578154, "post_id": 30899674, "comment_id": 49845025, "body": "Thanks Arslan, this answer helped me."}], "tags": [], "owner": {"reputation": 16234, "user_id": 2202702, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/lTGWe.jpg?s=128&g=1", "display_name": "Arslan Ali", "link": "https://stackoverflow.com/users/2202702/arslan-ali"}, "is_accepted": true, "score": 1, "last_activity_date": 1434566129, "creation_date": 1434566129, "answer_id": 30899674, "question_id": 30898908, "link": "https://stackoverflow.com/questions/30898908/current-page-in-a-partial-view-keeps-erroring/30899674#30899674", "title": "current_page? in a _partial view keeps erroring", "body": "<p><code>edit_product_path()</code> expects an <code>id</code> of the product you wish to edit, but in your case, somehow <code>@product</code> is <code>nil</code>, therefore, you are getting the error. And since, there is a possibility that it may again be <code>nil</code> in the future, you have to put a check:</p>\n\n<pre><code>&lt;% if @product %&gt;\n  &lt;% current_page?(edit_product_path(@product) %&gt;\n  &lt;%# Your other code %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 447, "user_id": 4363086, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/HESLi.jpg?s=128&g=1", "display_name": "Xavier", "link": "https://stackoverflow.com/users/4363086/xavier"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "accepted_answer_id": 30899674, "answer_count": 1, "score": 2, "last_activity_date": 1434566129, "creation_date": 1434563809, "question_id": 30898908, "link": "https://stackoverflow.com/questions/30898908/current-page-in-a-partial-view-keeps-erroring", "title": "current_page? in a _partial view keeps erroring", "body": "<p>I'm using a _form partial which contains my Create and Edit template for my model Products.</p>\n\n<p>I have the following code to check if it's the Edit View</p>\n\n<p><code>&lt;% current_page?(edit_product_path(@product)) %&gt;</code></p>\n\n<p>However when I enter the create view the site falls over with the following error</p>\n\n<blockquote>\n  <p>No route matches {:action=>\"edit\", :controller=>\"products\", :id=>nil}\n  missing required keys: [:id]</p>\n</blockquote>\n\n<p>I can't find what's wrong.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 4, "creation_date": 1434563813, "post_id": 30898860, "comment_id": 49836888, "body": "What do you mean by &quot;copy&quot;? Copy to what?"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1434564949, "post_id": 30898860, "comment_id": 49837581, "body": "You don&#39;t actually do anything with <code>f_in</code> and <code>test</code>,  and <code>text </code> appears out of nowhere."}, {"owner": {"reputation": 15, "user_id": 4979834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db4959c45c6cc978b494f831a068c6?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Buckley", "link": "https://stackoverflow.com/users/4979834/brandon-buckley"}, "edited": false, "score": 0, "creation_date": 1434566047, "post_id": 30898860, "comment_id": 49838185, "body": "Sorry, test and text should have been the same name, my mistake. Will fix.  I want to assign the word to a string or just have a way so I can output the word to another file."}, {"owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "edited": false, "score": 0, "creation_date": 1434567412, "post_id": 30898860, "comment_id": 49839060, "body": "<code>word buffer_u</code> Do you have any idea of the legal characters that would constitute a <code>word</code> ?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1434568778, "post_id": 30898860, "comment_id": 49839897, "body": "Is <code>&quot;_u&quot;</code> a word or should it be ignored?"}], "answers": [{"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1434564565, "last_edit_date": 1434564565, "creation_date": 1434564243, "answer_id": 30899045, "question_id": 30898860, "link": "https://stackoverflow.com/questions/30898860/ruby-how-to-copy-a-word-in-a-string-containing-a-specific-sequence-of-letters/30899045#30899045", "title": "Ruby: How to copy a word in a string containing a specific sequence of letters?", "body": "<p>You can try something like this:</p>\n\n<pre><code>words = []\nFile.open( h_file ) { |file| file.each_line { |line|\n  words &lt;&lt; line.split.find { |a| a =~ /_u/ }\n}}\n\nwords.compact!\n# =&gt; [[\"buffer_u\"]]\n\nputs words\n# buffer_u\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "edited": false, "score": 0, "creation_date": 1434567956, "post_id": 30899111, "comment_id": 49839399, "body": "Wow! +1 for regex101 tool :)"}], "tags": [], "owner": {"reputation": 1671, "user_id": 4020264, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0d2cce5f8c252f68fc908759af31fe62?s=128&d=identicon&r=PG&f=1", "display_name": "1010", "link": "https://stackoverflow.com/users/4020264/1010"}, "is_accepted": false, "score": 0, "last_activity_date": 1434566543, "last_edit_date": 1434566543, "creation_date": 1434564421, "answer_id": 30899111, "question_id": 30898860, "link": "https://stackoverflow.com/questions/30898860/ruby-how-to-copy-a-word-in-a-string-containing-a-specific-sequence-of-letters/30899111#30899111", "title": "Ruby: How to copy a word in a string containing a specific sequence of letters?", "body": "<p>This regex should catch a word ending with <code>_u</code></p>\n\n<pre><code>(\\w*_u)(?!\\w)\n</code></pre>\n\n<p>The matching group will match a word ending with _u not followed by letters digits or underscores.</p>\n\n<p>If you want _u to appear anywhere in a word use</p>\n\n<pre><code>(\\w*_u\\w*)\n</code></pre>\n\n<p>See <a href=\"https://regex101.com/r/eQ4cN6/1\" rel=\"nofollow\">DEMO here</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": -1, "last_activity_date": 1434601802, "last_edit_date": 1434601802, "creation_date": 1434567681, "answer_id": 30900185, "question_id": 30898860, "link": "https://stackoverflow.com/questions/30898860/ruby-how-to-copy-a-word-in-a-string-containing-a-specific-sequence-of-letters/30900185#30900185", "title": "Ruby: How to copy a word in a string containing a specific sequence of letters?", "body": "<p>This will return all such words in the file, even if there are two or more in a line:</p>\n\n<pre><code>r = /\n    \\w*           # match &gt;= 0 word characters\n    _u            # match string\n    \\w*           # match &gt;= 0 word characters \n    /x            # extended mode\n\nFile.read(fname).scan r\n</code></pre>\n\n<p>For example:</p>\n\n<pre><code>str = \"Cat_u has 9 lives, \\n!dog_u has none and \\n pig_u_o and cow_u, 3.\"\n\nfname = 'temp'\nFile.write(fname, str)\n  #=&gt; 63\n</code></pre>\n\n<p>Confirm the file contents:</p>\n\n<pre><code>File.read(fname)\n  #=&gt; \"Cat_u has 9 lives, \\n!dog_u has none and \\n pig_u_o and cow_u, 3.\"\n</code></pre>\n\n<p>Extract strings:</p>\n\n<pre><code>File.read(fname).scan r\n  #=&gt; [\"Cat_u\", \"dog_u\", \"pig_u_o\", \"cow_u\"] \n</code></pre>\n\n<p>It's not difficult to modify this code to return at most one string per line. Simply read the file into an array of lines (or read a line at a time) and execute <code>s = line[r]; arr &lt;&lt; s if s</code> for each line, where <code>r</code> is the above regex. </p>\n"}, {"comments": [{"owner": {"reputation": 15, "user_id": 4979834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db4959c45c6cc978b494f831a068c6?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Buckley", "link": "https://stackoverflow.com/users/4979834/brandon-buckley"}, "edited": false, "score": 0, "creation_date": 1434578436, "post_id": 30900624, "comment_id": 49845145, "body": "This works except 1 thing.  The array contains words in it like &quot;_unused&quot;. If I can only get rid of that, that would be perfect!  Thank you so much for your help, you really taught me a lot!"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "reply_to_user": {"reputation": 15, "user_id": 4979834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db4959c45c6cc978b494f831a068c6?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Buckley", "link": "https://stackoverflow.com/users/4979834/brandon-buckley"}, "edited": false, "score": 0, "creation_date": 1434582286, "post_id": 30900624, "comment_id": 49846518, "body": "There is nothing mentioning that in the question. It&#39;s a <i>little</i> important to give complete requirements before hand, not afterwards. Why doesn&#39;t that word match? It&#39;s easy to remove using a <code>reject</code> block or a minor adjustment to the <code>select</code> sub-string test."}], "tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": true, "score": 3, "last_activity_date": 1434570188, "last_edit_date": 1434570188, "creation_date": 1434569091, "answer_id": 30900624, "question_id": 30898860, "link": "https://stackoverflow.com/questions/30898860/ruby-how-to-copy-a-word-in-a-string-containing-a-specific-sequence-of-letters/30900624#30900624", "title": "Ruby: How to copy a word in a string containing a specific sequence of letters?", "body": "<p>Don't make it harder than it has to be. If you want to scan a body of text for words that match a criteria, do just that:</p>\n\n<pre><code>text = \"\nword_u1\nsomething\n_u1 foo\nbar _u2\nanother word_u2\ntypedef struct {\n    reg 1;\n    reg 2;\n} buffer_u;\n\"\n\ntext.scan(/\\w+/).select{ |w| w['_u'] }\n# =&gt; [\"word_u1\", \"_u1\", \"_u2\", \"word_u2\", \"buffer_u\"]\n</code></pre>\n\n<p>Regex are useful but the more complex (\"smarter\") they are, they slower they run unless you are very careful to anchor them, as anchors give them hints on where to look. Without those, the engine tries a number of things to determine exactly what you want, and that can really bog down the processing.</p>\n\n<p>I recommend instead simply grabbing the words in the text:</p>\n\n<pre><code>scan(/\\w+/)\n</code></pre>\n\n<p>Then filtering out the ones that match:</p>\n\n<pre><code>select{ |w| w['_u'] }\n</code></pre>\n\n<p>Using select with a simple sub-string search <code>w['_u']</code> is extremely fast.</p>\n\n<p>It could probably run faster using <code>split()</code> instead of <code>scan(/\\w+/)</code> but you'll have to deal with cleaning up non-word characters.</p>\n\n<p>Note: <code>\\w</code> means <code>[a-zA-Z0-9_]</code> so what we generally call a \"word\" character is actually a \"variable\" definition for most languages since words generally don't include digits or <code>_</code>.</p>\n\n<p>You can probably reduce your code to:</p>\n\n<pre><code>File.read( h_file ).scan(/\\w+/).select{ |w| w['_u'] }\n</code></pre>\n\n<p>That will return an array of matching words.</p>\n\n<p>Caveat: Using <code>read</code> has scalability issues. If you're concerned about the size of the file being read (which you always should be) then use <code>foreach</code> and iterate over the file line-by-line. You will probably see no change in processing speed.</p>\n"}], "owner": {"reputation": 15, "user_id": 4979834, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0db4959c45c6cc978b494f831a068c6?s=128&d=identicon&r=PG&f=1", "display_name": "Brandon Buckley", "link": "https://stackoverflow.com/users/4979834/brandon-buckley"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 30900624, "answer_count": 4, "score": 0, "last_activity_date": 1434601802, "creation_date": 1434563648, "last_edit_date": 1434563772, "question_id": 30898860, "link": "https://stackoverflow.com/questions/30898860/ruby-how-to-copy-a-word-in-a-string-containing-a-specific-sequence-of-letters", "title": "Ruby: How to copy a word in a string containing a specific sequence of letters?", "body": "<p>I am trying to read in a text file and iterate through every line. If the line contains \"_u\" then I want to copy that word in that line.</p>\n\n<p>For example:</p>\n\n<pre><code>typedef struct {\n    reg 1;\n    reg 2;\n} buffer_u;\n</code></pre>\n\n<p>I want to copy the word buffer_u.</p>\n\n<p>This is what I have so far (everything up to how to copy the word in the string):</p>\n\n<pre><code>f_in = File.open( h_file )\ntest = h_file.read  \ntext.each_line do |line|\n    if line.include? \"_u\"\n        # copy word\n        # add to output file\n    end\nend\n</code></pre>\n\n<p>Thanks in advance for your help!</p>\n"}, {"tags": ["ruby", "r"], "answers": [{"comments": [{"owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "edited": false, "score": 0, "creation_date": 1434630178, "post_id": 30901029, "comment_id": 49867569, "body": "I had the same feeling indeed, glad to see I could have been right :)"}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": true, "score": 0, "last_activity_date": 1434570457, "creation_date": 1434570457, "answer_id": 30901029, "question_id": 30898444, "link": "https://stackoverflow.com/questions/30898444/replacing-the-value-of-a-variable-in-rsruby/30901029#30901029", "title": "Replacing the value of a variable in RSRuby", "body": "<p>I got it to work by resetting the cache on the <code>r</code> object:</p>\n\n<pre><code>2.2.0 :026 &gt; r.e\n=&gt; 11\n2.2.0 :027 &gt; r.assign 'e', 22\n=&gt; 22\n2.2.0 :028 &gt; r.e\n=&gt; 11\n2.2.0 :029 &gt; r.reset_cache\n=&gt; #&lt;RObj:0x007fa269341508 @conversion=4, @wrap=0&gt;\n2.2.0 :030 &gt; r.e\n=&gt; 22\n</code></pre>\n\n<p>My hunch is that the rsruby interface keeps a cache of the variables, assigning really does send the new value to R but rsruby has the old value cached on the ruby side, then resetting the cache will cause rsruby to fetch the value from R.</p>\n"}], "owner": {"reputation": 2720, "user_id": 554491, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/4b99817e71264d9531f08de3c8f601f1?s=128&d=identicon&r=PG", "display_name": "Morpheu5", "link": "https://stackoverflow.com/users/554491/morpheu5"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 30, "favorite_count": 0, "accepted_answer_id": 30901029, "answer_count": 1, "score": 1, "last_activity_date": 1434570457, "creation_date": 1434562222, "question_id": 30898444, "link": "https://stackoverflow.com/questions/30898444/replacing-the-value-of-a-variable-in-rsruby", "title": "Replacing the value of a variable in RSRuby", "body": "<p>There I am, happily using RSRuby to do some maths, when I encounter this odd behaviour:</p>\n\n<pre><code>irb(main):010:0&gt; r = RSRuby.instance;\nirb(main):011:0* r.assign 'e', 10\n=&gt; 10\nirb(main):012:0&gt; r.e\n=&gt; 10\nirb(main):013:0&gt; r.assign 'e', 20\n=&gt; 20\nirb(main):014:0&gt; r.e\n=&gt; 10\n</code></pre>\n\n<p>Is there something I'm missing?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mongoid"], "comments": [{"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1434564781, "post_id": 30898396, "comment_id": 49837489, "body": "I have opened my MongoDB console by typing <code>mongo</code> command. Then I typed <code>use my_project_name</code>. Then I write your command and it does nothing."}], "answers": [{"comments": [{"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1434603062, "post_id": 30902911, "comment_id": 49851398, "body": "This site gives me 502 error. When I try to open it. I open it later"}, {"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1434689274, "post_id": 30902911, "comment_id": 49895970, "body": "I checked my encoding of string that will be queried in Mongoid. It says that my encoding is already UTF-8"}, {"owner": {"reputation": 51, "user_id": 4204067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e489b07d41a20c6333ee170310070ae?s=128&d=identicon&r=PG", "display_name": "Sergey Larin", "link": "https://stackoverflow.com/users/4204067/sergey-larin"}, "reply_to_user": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1434752544, "post_id": 30902911, "comment_id": 49930576, "body": "All right. I&#39;ll think about what else can be caused your problem. By the way here&#39;s a good <a href=\"http://two.mongoid.org/docs/documents/localized.html\" rel=\"nofollow noreferrer\">article</a> about internationalization using mongoid. Mongoid supports I18n  and requires minimal code writing for internationalization. Hopefully the article will be useful."}], "tags": [], "owner": {"reputation": 51, "user_id": 4204067, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9e489b07d41a20c6333ee170310070ae?s=128&d=identicon&r=PG", "display_name": "Sergey Larin", "link": "https://stackoverflow.com/users/4204067/sergey-larin"}, "is_accepted": false, "score": 0, "last_activity_date": 1434578150, "last_edit_date": 1434578150, "creation_date": 1434577358, "answer_id": 30902911, "question_id": 30898396, "link": "https://stackoverflow.com/questions/30898396/mongoid-can-not-query-non-latin-attributes/30902911#30902911", "title": "Mongoid can not query non-latin attributes", "body": "<p>Mongodb uses UTF-8. However, you may experience problems if the server is running on Windows because Windows uses CP1251.\nUse <a href=\"http://robomongo.org/\" rel=\"nofollow\">Robomongo</a> (cross-platform graphical client) for that would make sure that the data has been written to the database in the correct encoding.\nBSON can be encoded only in UTF-8. If the data is not displayed correctly, you probably are not converting your data to UTF-8 before uploading it to mongodb.</p>\n\n<p>Check encoding <code>encoding_name = str.encoding.name</code><br>\nConvert encoding <code>utf_str = Iconv.conv('windows-1251', 'utf-8', str)</code></p>\n"}], "owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434578150, "creation_date": 1434562072, "question_id": 30898396, "link": "https://stackoverflow.com/questions/30898396/mongoid-can-not-query-non-latin-attributes", "title": "Mongoid can not query non-latin attributes", "body": "<p>My Mongoid document has two attributes: <code>:en_name</code> and <code>ru_name</code>. I have created one model:</p>\n\n<pre><code>MyModel.create(en_name: 'sport', ru_name: '\u0441\u043f\u043e\u0440\u0442')\n</code></pre>\n\n<p>Then I query it:</p>\n\n<pre><code>MyModel.where(en_name: 'sport').first\n</code></pre>\n\n<p>It returns me my model.</p>\n\n<p>When I try to query this:</p>\n\n<pre><code>MyModel.where(ru_name: '\u0441\u043f\u043e\u0440\u0442').first\n</code></pre>\n\n<p>It returns me <code>nil</code></p>\n\n<p>How to make Mongoid able to query attributes which are non-latin?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "rspec", "helper"], "comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1434562130, "post_id": 30898203, "comment_id": 49835865, "body": "When you create the test campaign, how are you linking the program and subscribers?  Unless you have factory magic you aren&#39;t showing us, it doesn&#39;t look like that is happening."}, {"owner": {"reputation": 838, "user_id": 3904392, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/655c5717c3eaed5807ab199604a096ad?s=128&d=identicon&r=PG", "display_name": "shroy", "link": "https://stackoverflow.com/users/3904392/shroy"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1434562464, "post_id": 30898203, "comment_id": 49836054, "body": "@steveklein - A subscriber has a boolean field for each program opt-in/out status, so the <code>case</code> statement matches the name of the program with each subscriber&#39;s boolean field and if the boolean field is true, then the recipient count += 1."}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1434562562, "post_id": 30898203, "comment_id": 49836123, "body": "No I am asking about your test setup.  Where are you linking the campaign you are creating to a program and that program to subscribers?  Maybe you can show your factory in your OP."}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1434563245, "post_id": 30898203, "comment_id": 49836575, "body": "Thx - I see the factories.  Where are you defining the program or plan for the test campaign?  In your subject line, how are &quot;program&quot; and &quot;plan&quot; getting initialized?"}, {"owner": {"reputation": 838, "user_id": 3904392, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/655c5717c3eaed5807ab199604a096ad?s=128&d=identicon&r=PG", "display_name": "shroy", "link": "https://stackoverflow.com/users/3904392/shroy"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1434563262, "post_id": 30898203, "comment_id": 49836581, "body": "@steveklein - I updated the post with the factory file. As far as testing goes, I&#39;m not too sure how that&#39;s done so I added seed data to the test database for subscribers and named the plan based off an existing plan. Instead of <code>let(:plan) { create(:plan) }</code> I tried <code>let(:plan) { Plan.find(2) }</code> in order to grab an existing plan but received an error. I&#39;m very new and still wrapping my head around TDD and Factory Girl in general."}, {"owner": {"reputation": 838, "user_id": 3904392, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/655c5717c3eaed5807ab199604a096ad?s=128&d=identicon&r=PG", "display_name": "shroy", "link": "https://stackoverflow.com/users/3904392/shroy"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1434563417, "post_id": 30898203, "comment_id": 49836677, "body": "@steveklein - My understanding is that they are initialized when I call the <code>campaign</code> variable when the spec triggers it via <code>expect(helper.current_recipients(campaign)).to eq 3</code>"}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "reply_to_user": {"reputation": 838, "user_id": 3904392, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/655c5717c3eaed5807ab199604a096ad?s=128&d=identicon&r=PG", "display_name": "shroy", "link": "https://stackoverflow.com/users/3904392/shroy"}, "edited": false, "score": 0, "creation_date": 1434563610, "post_id": 30898203, "comment_id": 49836785, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/80814/discussion-between-steve-klein-and-shroy\">continue this discussion in chat</a>."}], "answers": [{"tags": [], "owner": {"reputation": 838, "user_id": 3904392, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/655c5717c3eaed5807ab199604a096ad?s=128&d=identicon&r=PG", "display_name": "shroy", "link": "https://stackoverflow.com/users/3904392/shroy"}, "is_accepted": true, "score": 1, "last_activity_date": 1434570614, "creation_date": 1434570614, "answer_id": 30901078, "question_id": 30898203, "link": "https://stackoverflow.com/questions/30898203/rails-4-helper-method-not-retrieving-associated-records/30901078#30901078", "title": "Rails 4: Helper method not retrieving associated records", "body": "<p>The issue ended up being in the <code>case</code> statement which wasn't throwing any obvious errors. It didn't respond well to the <code>&amp;&amp;</code> on the <code>when</code> conditions, so I placed them underneath and it seems to work fine now. Here is what the code looks like now..</p>\n\n<pre><code>module ApplicationHelper\n\n    def current_recipients(campaign)\n        @target_program = campaign.program.name\n        @recipients = 0\n\n        campaign.plan.subscribers.each do |s|\n            case @target_program\n                when \"Caspian Star\"\n                    s.star?\n                    @recipients += 1\n                when \"STIX\"\n                    s.stix?\n                    @recipients += 1\n                when \"PPCI\"\n                    s.ppci?\n                    @recipients += 1\n                else\n                    @recipients += 0\n                end\n        end\n        @recipients\n    end\nend\n</code></pre>\n\n<p>With a suggestion made by @steveklein during a chat session, I was able to get my test to pass by linking my objects associations together in this manner..</p>\n\n<pre><code>describe \"Counting campaign recipients\" do\n    it \"finds subscribers under chosen campaign plan and program\" do\n        campaign = create(:campaign)\n        plan = create(:plan)\n        campaign.plan = plan\n        campaign.program = create(:program)\n\n    3.times do\n        subscriber = create(:subscriber, star: true)\n        subscriber.plans &lt;&lt; plan\n    end\n\n        expect(helper.current_recipients(campaign)).to eq 3\n    end\nend\n</code></pre>\n"}], "owner": {"reputation": 838, "user_id": 3904392, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/655c5717c3eaed5807ab199604a096ad?s=128&d=identicon&r=PG", "display_name": "shroy", "link": "https://stackoverflow.com/users/3904392/shroy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 30901078, "answer_count": 1, "score": 0, "last_activity_date": 1434570614, "creation_date": 1434561445, "last_edit_date": 1434563011, "question_id": 30898203, "link": "https://stackoverflow.com/questions/30898203/rails-4-helper-method-not-retrieving-associated-records", "title": "Rails 4: Helper method not retrieving associated records", "body": "<p>I have a custom helper method who's sole purpose is to count data of associated records which will be displayed in the view. In the rails console I can add <code>Campaign.find(1).plan.subscribers</code> and retrieve the list of subscribers yet, I can't do that in my custom Helper Method. </p>\n\n<p>Here's the helper method.. <em>(Note: You can see where I tried printing out <code>campaign.plan.subscribers</code> to see if it was registering before the loop...it's not)</em></p>\n\n<p><strong>helpers/application_helper.rb</strong></p>\n\n<pre><code>module ApplicationHelper\n\n    def current_recipients(campaign)\n        @target_program = campaign.program.name\n        @recipients = 0\n\n        #p campaign.plan.subscribers\n\n        campaign.plan.subscribers.each do |s|\n            case @target_program\n                when \"Caspian Star\" &amp;&amp; s.star?\n                    @recipients += 1\n                when \"STIX\" &amp;&amp; s.stix?\n                    @recipients += 1\n                when \"PPCI\" &amp;&amp; s.ppci?\n                    @recipients += 1\n                else\n                    @recipients += 0\n                end\n        end\n        @recipients\n    end\nend\n</code></pre>\n\n<p>My spec..</p>\n\n<p><strong>spec/helpers.application_helper_spec.rb</strong></p>\n\n<pre><code>require \"rails_helper\"\n\nRSpec.describe ApplicationHelper, :type =&gt; :helper do\n\n    describe \"Counting campaign recipients\" do\n        subject(:campaign) { create(:campaign, plan: plan, program: program) }\n        let(:program) { create(:program) }\n        let(:plan) { create(:plan) }\n\n        it \"finds subscribers under campaign plan and program\" do\n            expect(helper.current_recipients(campaign)).to eq 3\n        end\n    end\nend\n</code></pre>\n\n<p><strong>Failure</strong></p>\n\n<pre><code>  1) ApplicationHelper Counting campaign recipients finds subscribers under campaign plan and program\n     Failure/Error: expect(helper.current_recipients(campaign)).to eq 3\n\n       expected: 3\n            got: 0\n\n       (compared using ==)\n</code></pre>\n\n<p>The relationships..</p>\n\n<p><strong>app/models/..</strong></p>\n\n<pre><code>Class Campaign &lt; ActiveRecord::Base\n    belongs_to :program\n    belongs_to :plan\nend\n\nClass Plan &lt; ActiveRecord::Base\n    has_many :campaigns\n    has_many :subscribers, through: :plannables\n    has_many :plannables\nend\n\nClass Program &lt; ActiveRecord::Base\n    has_many :campaigns\nend\n\nclass Subscriber &lt; ActiveRecord::Base\n    has_many :plans, through: :plannables\n    has_many :plannables\nend\n\nclass Plannable &lt; ActiveRecord::Base\n    belongs_to :plan\n    belongs_to :provider\nend\n</code></pre>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here's the add factories as requested.</p>\n\n<pre><code>FactoryGirl.define do\n\n    factory :campaign do |x|\n        x.sequence(:name) { |y| \"Q6 201#{y}\" }\n        x.sequence(:comment) { |y| \"JIRA OI-6#{y}\" }\n        channels [\"Folder\", \"Fax\"]\n    end\n\n    factory :program do\n        name \"Caspian Star\"\n    end\n\n    factory :plan do\n        name \"Third Storm Connect\"\n    end\nend\n</code></pre>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1434561798, "post_id": 30898277, "comment_id": 49835669, "body": "Which index should I add?"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1434561883, "post_id": 30898277, "comment_id": 49835724, "body": "There is <code>add_index</code> method. Which columns should I add for fasterize this query?"}], "tags": [], "owner": {"reputation": 109029, "user_id": 2767755, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/BkC8q.jpg?s=128&g=1", "display_name": "Arup Rakshit", "link": "https://stackoverflow.com/users/2767755/arup-rakshit"}, "is_accepted": true, "score": 1, "last_activity_date": 1434562577, "last_edit_date": 1434562577, "creation_date": 1434561673, "answer_id": 30898277, "question_id": 30898109, "link": "https://stackoverflow.com/questions/30898109/rails-has-many-at-least-one-children-has-the-value/30898277#30898277", "title": "rails has_many at least one children has the value", "body": "<p>You can use <code>joins</code> method.</p>\n\n<pre><code>Group.joins(:users).where(\"users.mood = ?\", User.moods[:good])\n</code></pre>\n\n<p>You can add this into your migration</p>\n\n<pre><code>add_index :users, :group_id\n</code></pre>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 95, "favorite_count": 0, "accepted_answer_id": 30898277, "answer_count": 1, "score": 2, "last_activity_date": 1434562577, "creation_date": 1434561102, "question_id": 30898109, "link": "https://stackoverflow.com/questions/30898109/rails-has-many-at-least-one-children-has-the-value", "title": "rails has_many at least one children has the value", "body": "<p>Let say I have a <code>Group</code> of <code>User</code>s and <code>User</code> has a enum, which described it's mood.</p>\n\n<pre><code>class Group &lt; AR::Base\n  has_many :users\n\nclass User &lt; AR::Base\n  belongs_to :group\n  enum mood: %i(good bad ugly)\n</code></pre>\n\n<p>How can I find all groups, where at least one <code>User</code> has the good mood?</p>\n\n<p>Which index should I add for optimizing this query?</p>\n"}, {"tags": ["ruby", "methods", "module", "adapter"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1434564628, "post_id": 30898089, "comment_id": 49837392, "body": "Readers: if you are unfamiliar with <code>extend self</code> within a module, here&#39;s an explanation. Since the receiver is <code>self</code> and <code>self #=&gt;Encryption</code>, the statement&#39;s equivalent to <code>Encryption extend Encryption</code>. That adds module methods to the instance methods, allowing the former to be called on the module. For example: <code>module M; extend self; def m; end; end; M.instance_methods(false) #=&gt; :m; M.methods.include? :m #=&gt; true; </code> It&#39;s similar to defining methods as module methods directly (e.g., <code>def self.some_method..</code>), but that does not permit classes to mixin instance methods."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 5020122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ja9v1qlCu3c/AAAAAAAAAAI/AAAAAAAA24Y/tHxUyjAfNtk/photo.jpg?sz=128", "display_name": "Ian Dikhtiar", "link": "https://stackoverflow.com/users/5020122/ian-dikhtiar"}, "edited": false, "score": 0, "creation_date": 1434561629, "post_id": 30898171, "comment_id": 49835568, "body": "now it&#39;s giving me this though  C:/Users/Ian/Desktop/Alpha/encryption/adapters/adapter.rb:13&zwnj;&#8203;:in <code>pascalize_string&#39;: undefined method </code>split&#39; for :caesar:Symbol (NoMethodError) \tfrom C:/Users/Ian/Desktop/Alpha/encryption/adapters/adapter.rb:24&zwnj;&#8203;:in <code>adapter=&#39; \tfrom C:&#47;Users&#47;Ian&#47;Desktop&#47;Alpha&#47;main.rb:32:in </code>&lt;top (required)&gt;&#39; \tfrom -e:1:in <code>load&#39; \tfrom -e:1:in </code>&lt;main&gt;&#39;"}, {"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "reply_to_user": {"reputation": 1, "user_id": 5020122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ja9v1qlCu3c/AAAAAAAAAAI/AAAAAAAA24Y/tHxUyjAfNtk/photo.jpg?sz=128", "display_name": "Ian Dikhtiar", "link": "https://stackoverflow.com/users/5020122/ian-dikhtiar"}, "edited": false, "score": 0, "creation_date": 1434561712, "post_id": 30898171, "comment_id": 49835618, "body": "As I said, <code>:@adapter</code> converts the adapter name to a <code>Symbol</code> but all your methods pretend it to be a <code>String</code>. I have no idea why you are doing that, therefore I did not change it."}, {"owner": {"reputation": 1, "user_id": 5020122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ja9v1qlCu3c/AAAAAAAAAAI/AAAAAAAA24Y/tHxUyjAfNtk/photo.jpg?sz=128", "display_name": "Ian Dikhtiar", "link": "https://stackoverflow.com/users/5020122/ian-dikhtiar"}, "edited": false, "score": 0, "creation_date": 1434562421, "post_id": 30898171, "comment_id": 49836018, "body": "To be honest with you - I have no idea ether. I was trying to attach an adapter to 2 classes. Spent too much time trying to understand how does pattern process works. Found one example, that was quite similar to what I need to do, but I still needed to change some code. Once again, new to ruby, so I know that my code looks way too dumb."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 2, "last_activity_date": 1434561338, "creation_date": 1434561338, "answer_id": 30898171, "question_id": 30898089, "link": "https://stackoverflow.com/questions/30898089/attach-a-method-to-a-module/30898171#30898171", "title": "Attach a method to a module", "body": "<p>Just define it inside the method.</p>\n\n<pre><code>module Encryption\n  extend self\n\n  def adapter\n    return @adapter if @adapter\n    self.adapter = :@adapter\n    @adapter\n  end\n\n  def pascalize_string(string)\n    return string if string !~ /_/ &amp;&amp; string =~ /[A-Z]+.*/\n    string.split('_').map { |part| part.capitalize }.join\n  end\n\n  def adapter=(adapter_name)\n    case adapter_name\n    when :@adapter\n      require_relative adapter_name\n      @adapter = Encryption::Adapters.const_get(pascalize_string(adapter_name))\n    else\n      raise \"Missing adapter #{pascalize_string(adapter_name)}\"\n    end\n  end\n\n  def new(key)\n    print key\n    adapter.new(key)\n  end\n\nend\n</code></pre>\n\n<p>It should be called with</p>\n\n<pre><code>pascalize_string(string)\n</code></pre>\n\n<p>not</p>\n\n<pre><code>string.pascalize_string\n</code></pre>\n\n<p>because you are defining it into the module, not in the <code>String</code> module.</p>\n\n<p>There are a few other strange things in your code, such as the use of <code>:@adapter</code>, but they are not relevant to the topic of this question hence I left them as they are.</p>\n"}], "owner": {"reputation": 1, "user_id": 5020122, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-ja9v1qlCu3c/AAAAAAAAAAI/AAAAAAAA24Y/tHxUyjAfNtk/photo.jpg?sz=128", "display_name": "Ian Dikhtiar", "link": "https://stackoverflow.com/users/5020122/ian-dikhtiar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 57, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1434565636, "creation_date": 1434561042, "last_edit_date": 1434565636, "question_id": 30898089, "link": "https://stackoverflow.com/questions/30898089/attach-a-method-to-a-module", "title": "Attach a method to a module", "body": "<p>I have this piece of code:</p>\n\n<pre><code>module Encryption\n  extend self\n\n  def adapter\n    return @adapter if @adapter\n    self.adapter = :@adapter\n    @adapter\n  end\n\n\n  def adapter=(adapter_name)\n    case adapter_name\n    when :@adapter\n    require_relative  \"#{adapter_name}\"\n   # @adapter = Encryption::Adapters.const_get(\"#{adapter_name.pascalize_string}\")\n\n    @adapter = Encryption::Adapters.const_get(\"#{adapter_name.pascalize_string}\")\n  else\n    raise \"Missing adapter #{adapter_name.pascalize_string}\"\n    end\n    end\n\n  def new(key)\n    print key\n    adapter.new(key)\n  end\n\nend\n</code></pre>\n\n<p>And I have a method:</p>\n\n<pre><code>def pascalize_string(string)\n    return string if string !~ /_/ &amp;&amp; string =~ /[A-Z]+.*/\n    string.split('_').map { |part| part.capitalize }.join\n  end\n</code></pre>\n\n<p>How should I attach it to the first code, so I can use <code>(@adapter = Encryption::Adapters.const_get(\"#{adapter_name**.pascalize_string**}\")</code>.</p>\n\n<p>I keep getting this error:</p>\n\n<blockquote>\n  <p>C:/Users/Ian/Desktop/Alpha/encryption/adapters/adapter.rb:23:in\n      `adapter=': undefined method `pascalize_string' for :caesar:Symbol\n      (NoMethodError)</p>\n</blockquote>\n"}, {"tags": ["ruby", "regex", "match"], "comments": [{"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1434561001, "post_id": 30897950, "comment_id": 49835206, "body": "With your regexp you get exactly the words stated with #. In &#39;in#line&#39; case it will capture #line. What is wrong here?"}, {"owner": {"reputation": 3522, "user_id": 2085143, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4b83a0aceed0aacc3ea861b12d86a32d?s=128&d=identicon&r=PG", "display_name": "user2085143", "link": "https://stackoverflow.com/users/2085143/user2085143"}, "reply_to_user": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1434561108, "post_id": 30897950, "comment_id": 49835272, "body": "The problem is in#line doesn&#39;t start with #, it starts with &#39;i&#39; so it should not be selected."}, {"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1434561265, "post_id": 30897950, "comment_id": 49835371, "body": "so it won&#39;t capture &#39;i&#39; and this is exactly how hashtags work. &#39;#one#two&#39; are 2 correct hashtags. You say, it should only capture &#39;#one&#39; or being captured as a single hashtag?"}, {"owner": {"reputation": 3522, "user_id": 2085143, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4b83a0aceed0aacc3ea861b12d86a32d?s=128&d=identicon&r=PG", "display_name": "user2085143", "link": "https://stackoverflow.com/users/2085143/user2085143"}, "reply_to_user": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1434561342, "post_id": 30897950, "comment_id": 49835420, "body": "if the sentence is &quot;in#line hello world #hashtag #twitter&quot; the words returned should be hashtag and twitter."}, {"owner": {"reputation": 5825, "user_id": 4512948, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/smfCE.png?s=128&g=1", "display_name": "matrixanomaly", "link": "https://stackoverflow.com/users/4512948/matrixanomaly"}, "edited": false, "score": 0, "creation_date": 1434561459, "post_id": 30897950, "comment_id": 49835476, "body": "you might want to try this out: <a href=\"http://rubular.com/\" rel=\"nofollow noreferrer\">rubular.com</a> for testing regexes!"}], "answers": [{"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 2, "last_activity_date": 1434562952, "creation_date": 1434562952, "answer_id": 30898678, "question_id": 30897950, "link": "https://stackoverflow.com/questions/30897950/ruby-regex-match-words-which-begin-with/30898678#30898678", "title": "Ruby Regex - Match words which begin with #", "body": "<p>I would use a whitespace boundary before the #  </p>\n\n<p><code>/(?&lt;!\\S)\\#(\\w+)/</code></p>\n"}], "owner": {"reputation": 3522, "user_id": 2085143, "user_type": "registered", "accept_rate": 49, "profile_image": "https://www.gravatar.com/avatar/4b83a0aceed0aacc3ea861b12d86a32d?s=128&d=identicon&r=PG", "display_name": "user2085143", "link": "https://stackoverflow.com/users/2085143/user2085143"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 364, "favorite_count": 0, "answer_count": 1, "score": -1, "last_activity_date": 1434590597, "creation_date": 1434560637, "question_id": 30897950, "link": "https://stackoverflow.com/questions/30897950/ruby-regex-match-words-which-begin-with", "title": "Ruby Regex - Match words which begin with #", "body": "<p>So far I have</p>\n\n<pre><code>def get_hashtags(post)\n  words = post.scan(/\\#(\\w+)/)\nend\n</code></pre>\n\n<p>Which works, however it also gets words like \"in#line\" whereas I only want words which are beginning with #.</p>\n\n<p>I have tried using \\b but I can't seem to get it right.</p>\n\n<p>Any help would be much appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "exit-code", "rakefile"], "answers": [{"tags": [], "owner": {"reputation": 257, "user_id": 5004513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e13a756468b0c7e579cd0accb80e0839?s=128&d=identicon&r=PG&f=1", "display_name": "Kei", "link": "https://stackoverflow.com/users/5004513/kei"}, "is_accepted": true, "score": 6, "last_activity_date": 1434561565, "creation_date": 1434561565, "answer_id": 30898238, "question_id": 30897941, "link": "https://stackoverflow.com/questions/30897941/ruby-return-nonzero-exit-status/30898238#30898238", "title": "Ruby: return nonzero exit status", "body": "<p>I realized my error right away, but in case anyone else ever needs this answer:</p>\n\n<p>your system command should be \"ruby blahblahblah.rb\" not \"irb blahblahblah.rb\". Both will run code but irb will return exit status 0 unless you abort.</p>\n"}], "owner": {"reputation": 257, "user_id": 5004513, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/e13a756468b0c7e579cd0accb80e0839?s=128&d=identicon&r=PG&f=1", "display_name": "Kei", "link": "https://stackoverflow.com/users/5004513/kei"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6868, "favorite_count": 1, "accepted_answer_id": 30898238, "answer_count": 1, "score": 3, "last_activity_date": 1434561565, "creation_date": 1434560619, "question_id": 30897941, "link": "https://stackoverflow.com/questions/30897941/ruby-return-nonzero-exit-status", "title": "Ruby: return nonzero exit status", "body": "<p>I would like my Ruby script to return any non-zero exit status upon a certain condition. The exit status itself does not matter as long as it is not zero. I tested out how it's done:</p>\n\n<p>test_exit.rb:</p>\n\n<pre><code>exit 4\n</code></pre>\n\n<p>test_exit_wrap.rb:</p>\n\n<pre><code>system(\"ruby test_exit.rb\")\nputs $?.exitstatus\n</code></pre>\n\n<p>cmd:</p>\n\n<pre><code>&gt; ruby test_exit_wrap.rb\n4\n</code></pre>\n\n<p>This is wonderful, because it's exactly what I want. Then I tried to replicate that in my project.</p>\n\n<p>pullrequest.rb:</p>\n\n<pre><code>results = [install_result.class, clicks_result.class, event_result.class, tuples_result.class, match_result.class]\n\nif results.include? NilClass \n    puts \"result included nil\"\n    exit 4\nend\n</code></pre>\n\n<p>rakefile.rb:</p>\n\n<pre><code>command = \"irb #{@script} #{@app_id} #{start_date} #{end_date} #{start_time} #{end_time} #{@timezone} #{@database}\"\nsystem(\"#{command}\")\nputs $?.exitstatus\n\nif $?.exitstatus != 0\n    puts \"!!!!!!!!!!!!!!!!!!!!!! FAILED JOB !!!!!!!!!!!!!!!!!!!!!!!!!!\"\n    @backjob_queue &lt;&lt; fail\nend\n</code></pre>\n\n<p>cmd:</p>\n\n<pre><code>  pullkochava.rb(main):032:1&gt;  \n  result included nil\n  =&gt; nil\n  pullrequest.rb(main):032:0&gt;\n  0\n</code></pre>\n\n<p>(Clipping these out, of course, hope it still makes sense; also @script is equal to pullrequest.rb, I've double checked) We can see that the if results.include? block is definitely executed, but the exit 4 seems to be lost. The 0 comes from the puts $?.exitstatus, and I can never get it to return anything but 0. I have tried raising errors, different exit codes, and abort. Abort does return a nonzero exit code; however it also aborts the rake. It will puts FAILED JOB but the rakefile doesn't get to save the @backjob_queue to my database.</p>\n\n<p>Am I missing something? How can I return a nonzero exit status that won't abort the rake?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "soap", "web", "savon"], "comments": [{"owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1434560291, "post_id": 30897786, "comment_id": 49834778, "body": "what do you have in items?"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1434560308, "post_id": 30897786, "comment_id": 49834787, "body": "Usually symbol-to-integer is a sign you&#39;re trying to use an Array like you would a Hash. Also note that Ruby strongly encourages people to use method names like <code>convert_data</code>."}, {"owner": {"reputation": 90, "user_id": 4694775, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155377317550215/picture?type=large", "display_name": "Mattamorphic", "link": "https://stackoverflow.com/users/4694775/mattamorphic"}, "reply_to_user": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "edited": false, "score": 0, "creation_date": 1434560368, "post_id": 30897786, "comment_id": 49834827, "body": "@RustamA.Gasanov I have literally the first structure stored in a variable that I&#39;m passing to convertData"}, {"owner": {"reputation": 90, "user_id": 4694775, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155377317550215/picture?type=large", "display_name": "Mattamorphic", "link": "https://stackoverflow.com/users/4694775/mattamorphic"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1434560403, "post_id": 30897786, "comment_id": 49834844, "body": "@tadman Thanks for the advice! Literally brand new to this as of this morning :p"}], "answers": [{"comments": [{"owner": {"reputation": 90, "user_id": 4694775, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155377317550215/picture?type=large", "display_name": "Mattamorphic", "link": "https://stackoverflow.com/users/4694775/mattamorphic"}, "edited": false, "score": 0, "creation_date": 1434562367, "post_id": 30898003, "comment_id": 49835987, "body": "That&#39;s perfect thank you - I&#39;m learning already I need to approach Ruby with a different method of thought than I&#39;m used to! Enjoying the challenge though."}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1434560780, "creation_date": 1434560780, "answer_id": 30898003, "question_id": 30897786, "link": "https://stackoverflow.com/questions/30897786/converting-a-ruby-structure-to-a-hash/30898003#30898003", "title": "Converting a ruby structure to a hash", "body": "<p>When trying to tackle problem like this in Ruby, it's useful to think of it in terms of <em>transformations</em> on your data. The Ruby <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html\" rel=\"nofollow\">Enumerable</a> library is full of methods that help you manipulate regular data structures like Array and Hash.</p>\n\n<p>A Ruby solution to this problem looks like:</p>\n\n<pre><code>def desavon(data)\n  case (data)\n  when Hash\n    if (data[:item])\n      data[:item].collect do |item|\n        { item[:key] =&gt; desavon(item[:value]) }\n      end\n    else\n      # raise error?\n    end\n  else\n    data\n  end\nend\n</code></pre>\n\n<p>Here's some sample input data and sample output:</p>\n\n<pre><code>input = {\n  item: [\n    {\n      key: \"result\",\n      value: \"success\"\n    },\n    {\n      key:  \"data\",\n      value: {\n        item: [\n          {\n            key: \"displayName\", \n            value: \"Matt\" \n          },\n          {\n            key: \"messages\",\n            value: { \n              item: [\n                {\n                  key: 'messageName',\n                  value: 'Test Message'\n                }\n              ]\n            }\n          }\n        ]\n      }\n    }\n  ]\n}\n\ndesavon(input)\n# =&gt; [{\"result\"=&gt;\"success\"}, {\"data\"=&gt;[{\"displayName\"=&gt;\"Matt\"}, {\"messages\"=&gt;[{\"messageName\"=&gt;\"Test Message\"}]}]}]\n</code></pre>\n\n<p>I think this version looks better, output-wise, but that's a call you'll have to make:</p>\n\n<pre><code>def desavon(data)\n  case (data)\n  when Hash\n    if (data[:item])\n      Hash[\n        data[:item].collect do |item|\n          [ item[:key], desavon(item[:value]) ]\n        end\n      ]\n    else\n      # raise error?\n    end\n  else\n    data\n  end\nend\n\ndesavon(input)\n# =&gt; {\"result\"=&gt;\"success\", \"data\"=&gt;{\"displayName\"=&gt;\"Matt\", \"messages\"=&gt;{\"messageName\"=&gt;\"Test Message\"}}}\n</code></pre>\n\n<p>Note that the <code>case</code> statement here is really the key, it allows you to quickly differentiate between different types of data you're converting, and the <code>Hash[]</code> method converts key-value pairs into the Hash structure you're looking for.</p>\n\n<p>This is similar to your attempt, but just passes through content it doesn't recognize as-is.</p>\n"}, {"comments": [{"owner": {"reputation": 90, "user_id": 4694775, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155377317550215/picture?type=large", "display_name": "Mattamorphic", "link": "https://stackoverflow.com/users/4694775/mattamorphic"}, "edited": false, "score": 0, "creation_date": 1434562453, "post_id": 30898204, "comment_id": 49836045, "body": "Thank you, the problem seemed to revolve more around the structure - I blame this WSDL i&#39;m having to use. I&#39;ll keep this in mind though next time I&#39;m using a SOAP API :)"}], "tags": [], "owner": {"reputation": 3271, "user_id": 387177, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ce58186c9663c82e5fef7fcca045fa57?s=128&d=identicon&r=PG", "display_name": "Steffen Roller", "link": "https://stackoverflow.com/users/387177/steffen-roller"}, "is_accepted": false, "score": 1, "last_activity_date": 1434561446, "creation_date": 1434561446, "answer_id": 30898204, "question_id": 30897786, "link": "https://stackoverflow.com/questions/30897786/converting-a-ruby-structure-to-a-hash/30898204#30898204", "title": "Converting a ruby structure to a hash", "body": "<p>Savon provides a <code>to_hash</code> method on the result.\nWhat I usually do is:</p>\n\n<p>...</p>\n\n<pre><code>response = @client.request :wsdl, :conversion_rate do\n  soap.body = {\n    \"FromCurrency\" =&gt; from_curr,\n    \"ToCurrency\" =&gt; to_curr\n  }\nend    \nresponse.to_hash[:conversion_rate_response][:conversion_rate_result];\n</code></pre>\n\n<p>...\nfull script here <a href=\"https://gist.github.com/sroller/3d04842ab763f52b6623\" rel=\"nofollow\">https://gist.github.com/sroller/3d04842ab763f52b6623</a></p>\n"}], "owner": {"reputation": 90, "user_id": 4694775, "user_type": "registered", "profile_image": "https://graph.facebook.com/10155377317550215/picture?type=large", "display_name": "Mattamorphic", "link": "https://stackoverflow.com/users/4694775/mattamorphic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 30898003, "answer_count": 2, "score": 1, "last_activity_date": 1434561446, "creation_date": 1434560089, "question_id": 30897786, "link": "https://stackoverflow.com/questions/30897786/converting-a-ruby-structure-to-a-hash", "title": "Converting a ruby structure to a hash", "body": "<p>I've got a bit of a headache here - I'm pretty new to Ruby...</p>\n\n<p>I've got a structure like so returned from Savon...</p>\n\n<pre><code>{\n  :item =&gt; [{\n              :key =&gt;  \"result\",\n              :value=&gt; \"success\"\n            },\n            {\n              :key =&gt;  \"data\",\n              :value=&gt; {\n                  :item =&gt; [{ :key =&gt; \"displayName\", \n                              :value =&gt; \"Matt\" \n                            },\n                            {\n                              :key =&gt; \"messages\",\n                              :value =&gt; { \n                                  :items =&gt; [{....}]\n                            }\n                       ]\n               }\n       }]\n}\n</code></pre>\n\n<p>And I need to get it to be like...</p>\n\n<pre><code>{\n  :result =&gt; success\n  :data =&gt; [{\n              :displayName =&gt; \"Matt\"\n           },\n           {\n              :messages =&gt; [{\n                              :messageName =&gt; \"Test Message\"\n                           }]\n           }]\n}\n</code></pre>\n\n<p>So I can easily manipulate and navigate the data structure\nI've tried a few methods including just passing the value of :item ...</p>\n\n<pre class=\"lang-ruby prettyprint-override\"><code>def convertData(data)\n  result = {}\n  if(data!=nil)\n    data.each do |item|\n      key = item[:key] \n      value = item[:value] \n      if(value.instance_of?(Hash))\n        result[key] = convertData(value[:item])\n      else\n        result[key] = value\n      end  \n    end\n  end\n  return result\nend\n</code></pre>\n\n<p>But this just gives me a tonne of Type errors for symbol to integer conversion (I assume that's the array index playing up). Any help much appreciated. </p>\n"}, {"tags": ["php", "ruby", "rubygems", "nokogiri"], "comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1434560145, "post_id": 30897530, "comment_id": 49834698, "body": "When PHP tries to run a script, it&#39;s very likely running with very reduced privileges and a limited env and PATH. Its path is different than yours, which you see in <i>your</i> shell. Check to see what the PHP session runs as, most likely the server&#39;s env, and whether the server knows about RVM, and can see the proper <code>gem env</code>. That would explain why the server sees <code>&#47;usr&#47;lib&#47;ruby&#47;site_ruby&#47;1.8&#47;</code> and you see the RVM hosted Ruby."}, {"owner": {"reputation": 11433, "user_id": 571648, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3c8aa5f38b7aee1d95b797718d38cf45?s=128&d=identicon&r=PG", "display_name": "erdomester", "link": "https://stackoverflow.com/users/571648/erdomester"}, "reply_to_user": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1434560939, "post_id": 30897530, "comment_id": 49835158, "body": "I understand what you mean but how do I do what you&#39;re suggesting?"}, {"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1434561276, "post_id": 30897530, "comment_id": 49835378, "body": "The answer to that would take at least a chapter in a book, but more likely chapters. You have to understand how sub-shells work, how the environment is created and passed, how the PATH is used to find executables, what Ruby is doing when it&#39;s installed to remember where its gems are, how RVM works and how to let it find its hosted Ruby(s). See my answer for a bit more."}], "answers": [{"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 0, "last_activity_date": 1434561076, "creation_date": 1434561076, "answer_id": 30898101, "question_id": 30897530, "link": "https://stackoverflow.com/questions/30897530/unable-to-run-ruby-script-from-php-due-to-gem-original-require-error/30898101#30898101", "title": "Unable to run ruby script from php due to gem_original_require error", "body": "<p>When PHP tries to run a script, it's very likely running with very reduced privileges and a limited env and PATH. Its path is different than yours, which you see in <em>your</em> shell. </p>\n\n<p>Check to see what the PHP session runs as. It is most likely the server's env. Also check to see whether the server knows about RVM, and can see the proper <code>gem env</code>. That would explain why the server sees <code>/usr/lib/ruby/site_ruby/1.8/</code> and you see the RVM hosted Ruby.</p>\n\n<p>Also, unless the path of the server is able to find the right Ruby, using </p>\n\n<pre><code>ruby /home/balint/test.rb\n</code></pre>\n\n<p>it is going to launch the first Ruby found in the PATH, which will probably be /usr/bin/ruby. Instead <em>ALWAYS</em> force the path to the Ruby you want. For the built-in Ruby that'd be:</p>\n\n<pre><code>/usr/bin/ruby /home/balint/test.rb\n</code></pre>\n\n<p>Throwing RVM into the mix complicates things a bit, but RVM provides a shim which will honor the <code>--default</code> Ruby you specified or Ruby with gem sets. Read more about working with automated/shelled-out tasks in the <a href=\"https://rvm.io/deployment/cron\" rel=\"nofollow\">RVM cron documentation</a>.</p>\n"}], "owner": {"reputation": 11433, "user_id": 571648, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/3c8aa5f38b7aee1d95b797718d38cf45?s=128&d=identicon&r=PG", "display_name": "erdomester", "link": "https://stackoverflow.com/users/571648/erdomester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 158, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434561076, "creation_date": 1434559246, "last_edit_date": 1434560051, "question_id": 30897530, "link": "https://stackoverflow.com/questions/30897530/unable-to-run-ruby-script-from-php-due-to-gem-original-require-error", "title": "Unable to run ruby script from php due to gem_original_require error", "body": "<p>I am trying to run a ruby script from php (browser) that requires some gems.\nVPS: CentOS, PHP5, ruby2.0.0, using RVM. I reach the server via PUTTY and I ran the php code from browser.</p>\n\n<p>So when I run this:</p>\n\n<pre><code>&lt;?php\n$descriptorspec = array(\n   0 =&gt; array(\"pipe\", \"r\"),\n   1 =&gt; array(\"pipe\", \"w\"),\n   2 =&gt; array(\"file\", \"./error-output.txt\", \"a\")\n);\n$process = proc_open('ruby /home/balint/test.rb', $descriptorspec, $pipes);\n\nif (is_resource($process)) {\n    fwrite($pipes[0], 'hello world');\n    fclose($pipes[0]);\n\n    echo stream_get_contents($pipes[1]);\n    fclose($pipes[1]);\n\n    $return_value = proc_close($process);\n\n    echo \"command returned $return_value\\n\";\n}\n?&gt;\n</code></pre>\n\n<p>And the test.rb script includes only puts \"xxx\" then I get the output on my screen as xxx.</p>\n\n<p>However, when I include some gems like require 'nokogiri' I get this in the error log:</p>\n\n<pre><code>/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `gem_original_require': no such file to load -- nokogiri (LoadError)\n    from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in `require'\n    from /home/balint/test.rb:5\n</code></pre>\n\n<p><strong>This is working fine directly from shell.</strong></p>\n\n<p><strong>ruby -v:</strong></p>\n\n<pre><code>ruby 2.0.0p643 (2015-02-25 revision 49749) [x86_64-linux]\n</code></pre>\n\n<p><strong>which ruby:</strong></p>\n\n<pre><code>/usr/bin/ruby\n</code></pre>\n\n<p><strong>gem env:</strong></p>\n\n<pre><code>RubyGems Environment:\n  - RUBYGEMS VERSION: 2.4.8\n  - RUBY VERSION: 2.0.0 (2015-02-25 patchlevel 643) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /home/balint/.rvm/gems/ruby-2.0.0-p643\n  - RUBY EXECUTABLE: /home/balint/.rvm/rubies/ruby-2.0.0-p643/bin/ruby\n  - EXECUTABLE DIRECTORY: /home/balint/.rvm/gems/ruby-2.0.0-p643/bin\n  - SPEC CACHE DIRECTORY: /home/balint/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /home/balint/.rvm/rubies/ruby-2.0.0-p643/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /home/balint/.rvm/gems/ruby-2.0.0-p643\n     - /home/balint/.rvm/gems/ruby-2.0.0-p643@global\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - :sources =&gt; [\"https://rubygems.org/\", \"http://rubygems.org\"]\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n     - http://rubygems.org\n  - SHELL PATH:\n     - /usr/local/jdk/bin\n     - /home/balint/.rvm/gems/ruby-2.0.0-p643/bin\n     - /home/balint/.rvm/gems/ruby-2.0.0-p643@global/bin\n     - /home/balint/.rvm/rubies/ruby-2.0.0-p643/bin\n     - /home/balint/perl5/bin\n     - /usr/local/bin\n     - /bin\n     - /usr/bin\n     - /usr/local/sbin\n     - /usr/sbin\n     - /sbin\n     - /home/balint/.rvm/bin\n     - /usr/local/bin\n     - /usr/X11R6/bin\n     - /home/balint/.rvm/bin\n     - /home/balint/bin\n</code></pre>\n\n<p><strong>echo $PATH</strong></p>\n\n<pre><code>/usr/local/jdk/bin:/home/balint/.rvm/gems/ruby-2.0.0-p643/bin:/home/balint/.rvm/gems/ruby-2.0.0-p643@global/bin:/home/balint/.rvm/rubies/ruby-2.0.0-p643/bin:/home/balint/perl5/bin:/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/home/balint/.rvm/bin:/usr/local/bin:/usr/X11R6/bin:/home/balint/.rvm/bin:/home/balint/bin\n</code></pre>\n\n<p>According to the log it's looking in the 1.8 folder. But there is no other folder in <code>usr/lib/ruby/site_ruby/</code> than 1.8. And I also don't understand why it's working in shell and why it's not from the browser.</p>\n\n<p>Can someone put me in the right direction here?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "hyperlink", "model", "controller"], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 0, "last_activity_date": 1434560937, "creation_date": 1434560937, "answer_id": 30898051, "question_id": 30897499, "link": "https://stackoverflow.com/questions/30897499/rails-category-or-filter-links-in-same-controller/30898051#30898051", "title": "Rails category (or filter) links in same controller?", "body": "<p><code>belongs_to</code> is defined in <code>ActiveRecord::Associations</code>, which is part of <code>ActiveRecord</code>. You are manually including <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Model.html\" rel=\"nofollow\"><code>ActiveModel::Model</code></a> which doesn't offer any association-related capabilities.</p>\n\n<blockquote>\n  <p>Includes the required interface for an object to interact with ActionPack, using different ActiveModel modules. It includes model name introspections, conversions, translations and validations. Besides that, it allows you to initialize the object with a hash of attributes, pretty much like ActiveRecord does.</p>\n</blockquote>\n\n<p>Assuming you don't need the whole <code>ActiveRecord</code> database persistence capabilities but you need the association style, then you'll need to deal with that manually.</p>\n\n<p>Therefore, you will have to define your own methods to append/remove associated records and keep track of them.</p>\n\n<p>The association feature of ActiveRecord is strictly tied with the database persistence.</p>\n"}], "owner": {"reputation": 29, "user_id": 3308440, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/a61fdb68eb3d7c130dca336155e0bc7a?s=128&d=identicon&r=PG&f=1", "display_name": "mr. greybox tester", "link": "https://stackoverflow.com/users/3308440/mr-greybox-tester"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 106, "favorite_count": 1, "accepted_answer_id": 30898051, "answer_count": 1, "score": 0, "last_activity_date": 1434560937, "creation_date": 1434559159, "question_id": 30897499, "link": "https://stackoverflow.com/questions/30897499/rails-category-or-filter-links-in-same-controller", "title": "Rails category (or filter) links in same controller?", "body": "<p>Having trouble understanding how using links_to filter content within the same controller in the rails view works. My code is below:</p>\n\n<p># index.html.erb (link nav area)</p>\n\n<pre><code>&lt;nav&gt;\n    &lt;%= link_to 'Daily Monitoring', root_path(:category =&gt; \"dailymonitoring\") %&gt;\n    &lt;%= link_to 'Smoke Tests', root_path(:category =&gt; \"smoketests\") %&gt; \n&lt;/nav&gt;\n</code></pre>\n\n<p># index.html.erb (cont.)</p>\n\n<pre><code>&lt;ul id=\"results\"&gt;\n    &lt;% if @reportlinks == \"dailymonitoring\" %&gt;\n         # dailymonitoring content\n    &lt;% elsif @reportlinks == \"smoketests\" %&gt;\n          # smoketests content\n    &lt;% end %&gt; &lt;!-- end conditional --&gt;\n&lt;/ul&gt;\n</code></pre>\n\n<p># reports_controller.rb</p>\n\n<pre><code>    if params[:category]\n        @reportlinks = Report.where(:category =&gt; params[:category])\n    else\n        @reportlinks = Report.all\n    end\n</code></pre>\n\n<p># model (report.rb)</p>\n\n<pre><code> class Report\n   include ActiveModel::Model\n   attr_accessor :reports, :smokereports\n   belongs_to :reports, :smokereports, :reportlinks\n end\n</code></pre>\n\n<p>The error I'm getting is <strong>undefined method `belongs_to' for Report:Class</strong> and a <strong>&lt; top (required) ></strong> error. There's no database involved. I'm just trying to make it known that I want to click on any of the links and that filters only the block of content within that if/else statement.</p>\n\n<p>Do I need to create a new controller for the if/else statement to work? Please let me know if more code is needed to get a better understanding. Thanks.</p>\n"}, {"tags": ["ruby", "postgresql", "activerecord", "heroku", "sinatra"], "answers": [{"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 0, "last_activity_date": 1434561826, "creation_date": 1434561826, "answer_id": 30898320, "question_id": 30897389, "link": "https://stackoverflow.com/questions/30897389/server-database-errors-when-using-sinatra-app-on-heroku/30898320#30898320", "title": "Server/database errors when using sinatra app on heroku", "body": "<p>The error is quite self-explanatory. It means the PG instance did not reply within 5 seconds.</p>\n\n<p>If it's a self-hosted PG instance, make sure the PG server is accessible. Otherwise, if it's at Heroku, you may want to check with them why it is not responding in a fashionable amount of time.</p>\n"}], "owner": {"reputation": 1, "user_id": 4262082, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5ee0af639cb84dc56e65d5242d480a88?s=128&d=identicon&r=PG&f=1", "display_name": "Scott Warner", "link": "https://stackoverflow.com/users/4262082/scott-warner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 34, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434561826, "creation_date": 1434558844, "last_edit_date": 1434561753, "question_id": 30897389, "link": "https://stackoverflow.com/questions/30897389/server-database-errors-when-using-sinatra-app-on-heroku", "title": "Server/database errors when using sinatra app on heroku", "body": "<p>I recently made a sample sinatra app with a Postgres database and deployed it to heroku. When using it, sometimes it work and sometimes I get an 'internal server error'. </p>\n\n<p>In the heroku logs, the error reads </p>\n\n<pre><code>ActiveRecord::ConnectionTimeoutError - could not obtain a database connection within 5.000 seconds.\n</code></pre>\n\n<p>Can anyone help me address my issue? The logs read:</p>\n\n<pre><code>2015-06-17T15:52:41.646352+00:00 app[web.1]: 38.88.254.234 - - [17/Jun/2015 15:52:41] \"GET /deck_select HTTP/1.1\" 500 30 5.0016\n2015-06-17T15:52:46.693209+00:00 heroku[router]: at=info method=GET path=\"/logout\" host=calm-plains-7529.herokuapp.com request_id=cfddc08d-1598-4ec9-b9b6-774c3fac8a46 fwd=\"38.88.254.234\" dyno=web.1 connect=1ms service=13ms status=302 bytes=549\n\n2015-06-17T15:52:46.764409+00:00 heroku[router]: at=info method=GET path=\"/\" host=calm-plains-7529.herokuapp.com request_id=e4103cd9-79ca-4184-9a2e-365eb6e0ba27 fwd=\"38.88.254.234\" dyno=web.1 connect=1ms service=11ms status=200 bytes=2283\n\n2015-06-17T15:52:46.689805+00:00 app[web.1]: 38.88.254.234 - - [17/Jun/2015 15:52:46] \"GET /logout HTTP/1.1\" 302 - 0.0012\n\n2015-06-17T15:52:46.762402+00:00 app[web.1]: 38.88.254.234 - - [17/Jun/2015 15:52:46] \"GET / HTTP/1.1\" 200 1492 0.0012\n\n2015-06-17T15:52:57.515297+00:00 heroku[router]: at=info method=POST path=\"/\" host=calm-plains-7529.herokuapp.com request_id=b1f9e1ff-68af-4057-9d49-add74b8f0abd fwd=\"38.88.254.234\" dyno=web.1 connect=1ms service=5010ms status=500 bytes=326\n\n2015-06-17T15:52:57.512712+00:00 app[web.1]: **ActiveRecord::ConnectionTimeoutError - could not obtain a database connection within 5.000 seconds (waited 5.003 seconds):**\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord", "associations"], "comments": [{"owner": {"reputation": 3736, "user_id": 1031061, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/8IZUV.jpg?s=128&g=1", "display_name": "Pardeep Dhingra", "link": "https://stackoverflow.com/users/1031061/pardeep-dhingra"}, "edited": false, "score": 0, "creation_date": 1434559410, "post_id": 30897288, "comment_id": 49834203, "body": "you need third model for the component on which you want to add bounty and you can create <code>through</code> relation using that third model"}], "answers": [{"comments": [{"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1434560412, "post_id": 30897599, "comment_id": 49834852, "body": "For the third association in the user model what is <code>volunteered_bounties</code> referring to? And for the bounty model what does the second association, <code>has_many :bounty_volunteers</code> represent? Do the two <code>have_many through</code> associations not take care of this ownership scenario?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1434615741, "post_id": 30897599, "comment_id": 49857768, "body": "<code>volunteered_bounties</code> is the join table/model between bounties and users who have volunteered for them.  It&#39;s a &quot;rich&quot; join in that it records whether they have been selected as well."}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1434644828, "post_id": 30897599, "comment_id": 49878652, "body": "I see. Now putting this together I ran into this error: <code>SQLite3::SQLException: no such column: bounties.owner_type: SELECT &quot;bounties&quot;.* FROM &quot;bounties&quot; WHERE &quot;bounties&quot;.&quot;owner_id&quot; = ? AND &quot;bounties&quot;.&quot;owner_type&quot; = ?</code>"}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1434645393, "post_id": 30897599, "comment_id": 49878943, "body": "The above error is returned when I enter something like this: <code>user.owned_bounties</code>"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "reply_to_user": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1434702453, "post_id": 30897599, "comment_id": 49902012, "body": "It looks like it thinks that the <code>bounty.owner</code> association is polymorphic, that&#39;s odd.  Try adding <code>:foreign_key =&gt; :owner_id</code> to the <code>belongs_to :owner</code> association."}, {"owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "edited": false, "score": 0, "creation_date": 1434723291, "post_id": 30897599, "comment_id": 49915627, "body": "I think I found what was wrong. In the user model it should be <code>has_many :owned_bounties, :class_name =&gt; &quot;Bounty&quot;, foreign_key: :owner_id</code>"}], "tags": [], "owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "is_accepted": false, "score": 3, "last_activity_date": 1434559471, "creation_date": 1434559471, "answer_id": 30897599, "question_id": 30897288, "link": "https://stackoverflow.com/questions/30897288/setting-up-an-association-between-users-and-bounties-in-rails/30897599#30897599", "title": "Setting up an association between Users and Bounties in Rails", "body": "<p>I would do something like this: this isn't tested so you might need to tweak the options.</p>\n\n<pre><code>User\n  has_many :owned_bounties, :class_name =&gt; \"Bounty\", :as =&gt; :owner\n  has_many :bounty_volunteers, :as =&gt; :volunteer\n  has_many :volunteered_bounties, :through =&gt; :bounty_volunteers\n\nBounty \n  #owner_id, status(can be \"open\", \"in_progress\" or \"complete\")\n  belongs_to :owner, :class_name =&gt; \"User\"\n  has_many :bounty_volunteers\n  has_many :volunteers, :through =&gt; :bounty_volunteers, :source =&gt; :volunteer\n  has_many :participants, :through =&gt; :bounty_volunteers, :source =&gt; :volunteer, :conditions =&gt; [\"bounty_volunteers.selected = ?\", true]\n\n#join table class\nBountyVolunteer\n  #bounty_id, volunteer_id, selected(bool)\n  belongs_to :bounty\n  belongs_to :volunteer, :class_name =&gt; \"User\"\n</code></pre>\n\n<p>So, when you add users as volunteers you are creating BountyVolunteer records.  If they get upgraded to participants you're editing the existing BountyVolunteer record.</p>\n"}], "owner": {"reputation": 11210, "user_id": 3046413, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/0c4b85a42ee3c491c13d36b9a5b8a789?s=128&d=identicon&r=PG&f=1", "display_name": "Carl Edwards", "link": "https://stackoverflow.com/users/3046413/carl-edwards"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 83, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1434559486, "creation_date": 1434558542, "last_edit_date": 1434559486, "question_id": 30897288, "link": "https://stackoverflow.com/questions/30897288/setting-up-an-association-between-users-and-bounties-in-rails", "title": "Setting up an association between Users and Bounties in Rails", "body": "<p>Similar to how things work here on Stackoverflow, I'm setting up an app where a user can post a bounty and other users can volunteer to complete it. </p>\n\n<p>The only difference is the user selects who performs the bounty. So for instance if a bounty is created and three people volunteer to complete it the creator can select 1/3, 2/3, or 3/3.</p>\n\n<p>When a bounty is created, it's considered <strong>open</strong>, when the user selects a in progress: <strong>in-progress</strong>, and when complete: <strong>complete</strong>.</p>\n\n<p>For starters how would I setup my associations where a user is the sole owner of a bounty but <strong>other</strong> users belong to the bounty but as <code>volunteers</code> and if selected become <code>participants</code>. Should this be done as a self-referential association? It seems like setting up two new models may/may not be redundant.</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :bounties\nend\n\nclass Bounty &lt; ActiveRecord::Base\n  belongs_to :user\nend\n</code></pre>\n\n<p>As far as the status of the bounty should I setup three different boolean based columns in the bounties table?</p>\n\n<p><code>:open, :in_progess, :complete</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "sequel"], "comments": [{"owner": {"reputation": 473, "user_id": 1888057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0ae28461488b97193e1957043fb995?s=128&d=identicon&r=PG", "display_name": "Rahul Roy", "link": "https://stackoverflow.com/users/1888057/rahul-roy"}, "edited": false, "score": 1, "creation_date": 1434559760, "post_id": 30896739, "comment_id": 49834428, "body": "have you tired sequel_enum gem? <a href=\"https://github.com/planas/sequel_enum\" rel=\"nofollow noreferrer\">github.com/planas/sequel_enum</a>"}, {"owner": {"reputation": 443, "user_id": 4073903, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6a9a84bc2a3fe19a22e668716449d678?s=128&d=identicon&r=PG&f=1", "display_name": "darkstalker_010", "link": "https://stackoverflow.com/users/4073903/darkstalker-010"}, "reply_to_user": {"reputation": 473, "user_id": 1888057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0ae28461488b97193e1957043fb995?s=128&d=identicon&r=PG", "display_name": "Rahul Roy", "link": "https://stackoverflow.com/users/1888057/rahul-roy"}, "edited": false, "score": 0, "creation_date": 1434559816, "post_id": 30896739, "comment_id": 49834463, "body": "thankyou so much @RahulRoy."}, {"owner": {"reputation": 473, "user_id": 1888057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0ae28461488b97193e1957043fb995?s=128&d=identicon&r=PG", "display_name": "Rahul Roy", "link": "https://stackoverflow.com/users/1888057/rahul-roy"}, "edited": false, "score": 0, "creation_date": 1434559906, "post_id": 30896739, "comment_id": 49834529, "body": "You&#39;re welcome. Should I add it as an answer, so that we can close this thread?"}, {"owner": {"reputation": 473, "user_id": 1888057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0ae28461488b97193e1957043fb995?s=128&d=identicon&r=PG", "display_name": "Rahul Roy", "link": "https://stackoverflow.com/users/1888057/rahul-roy"}, "edited": false, "score": 0, "creation_date": 1434560845, "post_id": 30896739, "comment_id": 49835100, "body": "Done! @darkstalker_010"}], "answers": [{"tags": [], "owner": {"reputation": 473, "user_id": 1888057, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0e0ae28461488b97193e1957043fb995?s=128&d=identicon&r=PG", "display_name": "Rahul Roy", "link": "https://stackoverflow.com/users/1888057/rahul-roy"}, "is_accepted": true, "score": 1, "last_activity_date": 1581289210, "last_edit_date": 1581289210, "creation_date": 1434560732, "answer_id": 30897983, "question_id": 30896739, "link": "https://stackoverflow.com/questions/30896739/how-to-use-enum-on-sequel-rails/30897983#30897983", "title": "How to use enum on Sequel Rails?", "body": "<p>The functionality you're looking for is provided by Sequel's enum gem. </p>\n\n<p>Checkout the <a href=\"https://github.com/planas/sequel_enum\" rel=\"nofollow noreferrer\">README</a> for implementation details.</p>\n"}], "owner": {"reputation": 443, "user_id": 4073903, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/6a9a84bc2a3fe19a22e668716449d678?s=128&d=identicon&r=PG&f=1", "display_name": "darkstalker_010", "link": "https://stackoverflow.com/users/4073903/darkstalker-010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1118, "favorite_count": 0, "accepted_answer_id": 30897983, "answer_count": 1, "score": 1, "last_activity_date": 1581289210, "creation_date": 1434556944, "last_edit_date": 1581289164, "question_id": 30896739, "link": "https://stackoverflow.com/questions/30896739/how-to-use-enum-on-sequel-rails", "title": "How to use enum on Sequel Rails?", "body": "<p>I am trying to use enum on my rails application that uses Sequel instead of Active Record.</p>\n\n<p>How do i use enum when using Sequel instead of AR?</p>\n"}, {"tags": ["ruby", "watir"], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5020368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-aOfswo5Kh0c/AAAAAAAAAAI/AAAAAAAAASU/JetYxEEybBY/photo.jpg?sz=128", "display_name": "Lorraine Botros", "link": "https://stackoverflow.com/users/5020368/lorraine-botros"}, "edited": false, "score": 0, "creation_date": 1434558926, "post_id": 30897130, "comment_id": 49833869, "body": "Thank you I had originally tried using placeholder and must of had a typo or formatted in incorrectly. Your solution works flawlessly."}, {"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "reply_to_user": {"reputation": 13, "user_id": 5020368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-aOfswo5Kh0c/AAAAAAAAAAI/AAAAAAAAASU/JetYxEEybBY/photo.jpg?sz=128", "display_name": "Lorraine Botros", "link": "https://stackoverflow.com/users/5020368/lorraine-botros"}, "edited": false, "score": 0, "creation_date": 1434565860, "post_id": 30897130, "comment_id": 49838062, "body": "@Lorraine Botros: please accept this answer if it solved your issue.  It will help SO clean and tidy."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": true, "score": 2, "last_activity_date": 1434558051, "creation_date": 1434558051, "answer_id": 30897130, "question_id": 30896573, "link": "https://stackoverflow.com/questions/30896573/how-to-find-a-field-using-placeholder-text-in-watir/30897130#30897130", "title": "How to find a field using placeholder text in Watir?", "body": "<p>It looks like the problem might simply be a typo in the code. Notice in the line:</p>\n\n<pre><code>@b.text_field{div(:class =&gt; \"col-sm-4 col-md-3\", :placeholder =&gt; \"Search...\")}.set \"Automation (Test)\"\n</code></pre>\n\n<p>That a block, seen by the <code>{}</code>, is being passed to the <code>text_field</code> method. The <code>text_field</code> method does not do anything with blocks, as a result the code is really just doing:</p>\n\n<pre><code>@b.text_field.set \"Automation (Test)\"\n</code></pre>\n\n<p>As there is no locator supplied to the text field, it will input the first text field on the page.</p>\n\n<p>To locate the text field based on the placeholder attribute (or any other locator), it needs to be passed as an argument instead of a block:</p>\n\n<pre><code>@b.text_field(:placeholder =&gt; \"Search...\").set \"Automation (Test)\"\n</code></pre>\n\n<p>You had included a div as well. Assuming that it is an ancestor element need to find the text field, it should be:</p>\n\n<pre><code>@b.div(:class =&gt; \"col-sm-4 col-md-3\").text_field(:placeholder =&gt; \"Search...\").set \"Automation (Test)\"\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 5020368, "user_type": "registered", "accept_rate": 75, "profile_image": "https://lh6.googleusercontent.com/-aOfswo5Kh0c/AAAAAAAAAAI/AAAAAAAAASU/JetYxEEybBY/photo.jpg?sz=128", "display_name": "Lorraine Botros", "link": "https://stackoverflow.com/users/5020368/lorraine-botros"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1105, "favorite_count": 0, "accepted_answer_id": 30897130, "answer_count": 1, "score": 0, "last_activity_date": 1434558051, "creation_date": 1434556474, "last_edit_date": 1434557165, "question_id": 30896573, "link": "https://stackoverflow.com/questions/30896573/how-to-find-a-field-using-placeholder-text-in-watir", "title": "How to find a field using placeholder text in Watir?", "body": "<p>I have two search fields and I want to find the second one to set some text.</p>\n\n<p>I have tried using div however it always finds the first search field.\nDoes anyone one have a suggestion on how to find the second object or use the unique placeholder text \"Search...\" ?</p>\n\n<p><strong>HTML:</strong></p>\n\n<pre><code>input type=\"text\" name=\"searchString\" id=\"searchString\" projects=\"\" for=\"\" placeholder=\"Search\" class=\"form-control\"\ninput type=\"text\" name=\"searchString\" id=\"searchString\" placeholder=\"Search...\" class=\"form-control\"\n</code></pre>\n\n<p><strong>Ruby - Watir:</strong></p>\n\n<pre><code>@b.link(:text =&gt; \"http://ml-test.mytest.com/Client/Profile/ab295b41-2c5e-4100-bdee-e757405238bb\").click\n@b.text_field{div(:class =&gt; \"col-sm-4 col-md-3\", :placeholder =&gt; \"Search...\")}.set \"Automation (Test)\"\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku", "migration"], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 4021293, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be50cb780c45f41f9fa40b6736d1ca44?s=128&d=identicon&r=PG&f=1", "display_name": "goda", "link": "https://stackoverflow.com/users/4021293/goda"}, "edited": false, "score": 0, "creation_date": 1434557842, "post_id": 30896909, "comment_id": 49833110, "body": "Can i simply modify the migration file I have already db:migrated?"}, {"owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "reply_to_user": {"reputation": 186, "user_id": 4021293, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be50cb780c45f41f9fa40b6736d1ca44?s=128&d=identicon&r=PG&f=1", "display_name": "goda", "link": "https://stackoverflow.com/users/4021293/goda"}, "edited": false, "score": 0, "creation_date": 1434561103, "post_id": 30896909, "comment_id": 49835265, "body": "Yes, sure. That would be the best way -- delete the second migration and correct the methods on the first."}, {"owner": {"reputation": 186, "user_id": 4021293, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be50cb780c45f41f9fa40b6736d1ca44?s=128&d=identicon&r=PG&f=1", "display_name": "goda", "link": "https://stackoverflow.com/users/4021293/goda"}, "edited": false, "score": 0, "creation_date": 1434569922, "post_id": 30896909, "comment_id": 49840615, "body": "Thanks, I thought migrations had to be dealt with properly in one of the rails generators. I just deleted the def change and it worked during db:rollback and db:migration."}], "tags": [], "owner": {"reputation": 48635, "user_id": 6742, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/xPawo.png?s=128&g=1", "display_name": "David Aldridge", "link": "https://stackoverflow.com/users/6742/david-aldridge"}, "is_accepted": true, "score": 0, "last_activity_date": 1434557394, "creation_date": 1434557394, "answer_id": 30896909, "question_id": 30896436, "link": "https://stackoverflow.com/questions/30896436/reversing-a-specific-rails-migration-cant-remove/30896909#30896909", "title": "Reversing a specific Rails Migration, can&#39;t remove", "body": "<p>You're using a change method rather than an up, which you should only do for the subset of migrations that rails can reverse automatically.</p>\n\n<p>You should change the change method to up, and add a down method that can reverse the effects of the up method.</p>\n"}], "owner": {"reputation": 186, "user_id": 4021293, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be50cb780c45f41f9fa40b6736d1ca44?s=128&d=identicon&r=PG&f=1", "display_name": "goda", "link": "https://stackoverflow.com/users/4021293/goda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 238, "favorite_count": 0, "accepted_answer_id": 30896909, "answer_count": 1, "score": 0, "last_activity_date": 1434558089, "creation_date": 1434556094, "last_edit_date": 1434558089, "question_id": 30896436, "link": "https://stackoverflow.com/questions/30896436/reversing-a-specific-rails-migration-cant-remove", "title": "Reversing a specific Rails Migration, can&#39;t remove", "body": "<pre><code>class UpdateIndexOnUsers &lt; ActiveRecord::Migration\n  def change\n    sql = 'DROP INDEX index_users_on_email'\n  sql &lt;&lt; ' ON users' if Rails.env == 'production' # Heroku pg\n  ActiveRecord::Base.connection.execute(sql)\n  end\nend\n</code></pre>\n\n<p>I have to undo this migration. When I revert it using <code>rake db:migrate VERSION=20150611173430</code>,I get this error. </p>\n\n<pre><code>StandardError: An error has occurred, this and all later migrations canceled:\n\nPG::SyntaxError: ERROR:  syntax error at end of input\nLINE 1: CREATE INDEX index_users_on_email\n                                         ^\n    : CREATE INDEX index_users_on_email/Users/goda/.rvm/gems/ruby-2.2.1/gems/activerecord-4.2.0/lib/active_record/connection_adapters/postgresql/database_statements.rb:155:in `async_exec'\n</code></pre>\n\n<p>Then I add a NEW migration file to try and reverse that.</p>\n\n<pre><code>class FixUpdateIndexOnUsers &lt; ActiveRecord::Migration\n  def change\n    sql = 'CREATE INDEX index_users_on_email'\n    sql &lt;&lt; ' ON users' if Rails.env == 'production' # Heroku pg\n    ActiveRecord::Base.connection.execute(sql)\n  end\nend\n</code></pre>\n\n<p>BUT on heroku, <code>heroku run rake db:migrate</code> fails. Because it runs into that syntax error on the first migration that I cannot remove. What should be done?</p>\n\n<p>EDIT: Fixed syntax, still throwing an error.</p>\n\n<pre><code>PG::SyntaxError: ERROR:  syntax error at or near \"ON\"\nLINE 1: DROP INDEX index_users_on_email ON users;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "if-statement", "flags"], "comments": [{"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 1, "creation_date": 1434555763, "post_id": 30896039, "comment_id": 49831608, "body": "You set flag to true before processing each post"}, {"owner": {"reputation": 1228, "user_id": 4918287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/r6vCG.jpg?s=128&g=1", "display_name": "Timur Mamedov", "link": "https://stackoverflow.com/users/4918287/timur-mamedov"}, "reply_to_user": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 0, "creation_date": 1434556161, "post_id": 30896039, "comment_id": 49831907, "body": "@Brennan thanks for your comment. Yes, I have just realized my horribly silly mistake."}, {"owner": {"reputation": 5130, "user_id": 1443478, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/4J9cr.jpg?s=128&g=1", "display_name": "Brennan", "link": "https://stackoverflow.com/users/1443478/brennan"}, "edited": false, "score": 1, "creation_date": 1434568685, "post_id": 30896039, "comment_id": 49839844, "body": "Happens to the best of us. Sometimes a second set of eyes is all it takes."}], "answers": [{"tags": [], "owner": {"reputation": 1023, "user_id": 1624032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe4490e788d1dff66dd5fbf48049849?s=128&d=identicon&r=PG", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1624032/pablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1434555746, "creation_date": 1434555746, "answer_id": 30896293, "question_id": 30896039, "link": "https://stackoverflow.com/questions/30896039/rails-keeps-ignoring-an-if-statement-inside-the-view/30896293#30896293", "title": "Rails keeps ignoring an IF statement inside the view", "body": "<p>It's not that the <code>if</code> is being ignored, but that on each post the flag is being set to <code>true</code> again.</p>\n\n<p>The first time you set the flag has to be outside of the iteration, like this:</p>\n\n<pre><code>&lt;% flag = true %&gt;\n\n&lt;% @posts.reverse.each do |post| %&gt;\n\n    &lt;% if post.date.day &lt; Time.now.day &amp;&amp; \n          post.date.day &gt;= (Time.now.day - 1.day) %&gt;\n\n        &lt;% if flag == true %&gt;\n            &lt;%= \"Today\" %&gt;\n            &lt;% flag = false %&gt;\n            &lt;br /&gt;\n        &lt;% end %&gt;\n\n        &lt;tr&gt;\n            &lt;td&gt;&lt;p&gt;IMAGINE THIS SENTENCE IS ONE POST&lt;/p&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 1228, "user_id": 4918287, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/r6vCG.jpg?s=128&g=1", "display_name": "Timur Mamedov", "link": "https://stackoverflow.com/users/4918287/timur-mamedov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 30896293, "answer_count": 1, "score": 1, "last_activity_date": 1434555746, "creation_date": 1434555105, "question_id": 30896039, "link": "https://stackoverflow.com/questions/30896039/rails-keeps-ignoring-an-if-statement-inside-the-view", "title": "Rails keeps ignoring an IF statement inside the view", "body": "<p>I am writing an application where I want to list blog posts according to date they were created on the main index page. So lets say if I have 10 blog posts that were created today I would want to have smth like this come on the index page of the app..</p>\n\n<p>Today:</p>\n\n<p>POST 1</p>\n\n<p>POST 2</p>\n\n<p>POST 3</p>\n\n<p>... so on </p>\n\n<p>However, I have this...</p>\n\n<p>Today:</p>\n\n<p>POST 1</p>\n\n<p>Today:</p>\n\n<p>POST 2</p>\n\n<p>Today:</p>\n\n<p>POST 3</p>\n\n<p>... so on</p>\n\n<p>The following is my code..</p>\n\n<p><strong>index.html.erb</strong></p>\n\n<pre><code>&lt;% @posts.reverse.each do |post| %&gt;\n\n    &lt;% flag = true %&gt;\n    &lt;% if post.date.day &lt; Time.now.day &amp;&amp; \n          post.date.day &gt;= (Time.now.day - 1.day) %&gt;\n\n        &lt;!-- This IF statement gets ignored --&gt;  \n        &lt;% if flag == true %&gt;\n            &lt;%= \"Today\" %&gt;\n            &lt;% flag = false %&gt;\n            &lt;br /&gt;\n        &lt;% end %&gt;\n\n        &lt;tr&gt;\n            &lt;td&gt;&lt;p&gt;IMAGINE THIS SENTENCE IS ONE POST&lt;/p&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The if statement that gets ignored inside the code acts as a flag, so that it should execute only once per group of posts with the same date. But, Rails seems to completely ignore it for some reason. If someone could help me correct this issue or nudge me in the right direction, your help would be greatly appreciated.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "comments": [{"owner": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1434556126, "post_id": 30895998, "comment_id": 49831876, "body": "What do you mean by &quot;insert&quot;? Do you mean add them as attributes to the <code>room_amenities</code> table that didn&#39;t previously have those attributes? Sounds like you need such a table and just include <code>price</code> and <code>hour</code> as attributes. Or if price and hour only depend upon amenities, then add them as <code>amenities</code> table attributes."}, {"owner": {"reputation": 127, "user_id": 4343492, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/2a83ede110258ecda61062307db5d219?s=128&d=identicon&r=PG", "display_name": "Pepeng Agimat", "link": "https://stackoverflow.com/users/4343492/pepeng-agimat"}, "reply_to_user": {"reputation": 52685, "user_id": 980550, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/8emhY.jpg?s=128&g=1", "display_name": "lurker", "link": "https://stackoverflow.com/users/980550/lurker"}, "edited": false, "score": 0, "creation_date": 1434556735, "post_id": 30895998, "comment_id": 49832324, "body": "Yes, I want to insert price and hour .. I already had a price and hour attributes in my room_amenities."}], "answers": [{"comments": [{"owner": {"reputation": 127, "user_id": 4343492, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/2a83ede110258ecda61062307db5d219?s=128&d=identicon&r=PG", "display_name": "Pepeng Agimat", "link": "https://stackoverflow.com/users/4343492/pepeng-agimat"}, "edited": false, "score": 0, "creation_date": 1434558364, "post_id": 30896640, "comment_id": 49833478, "body": "What if I have an array of object to insert? Should I do looping to make it like that?"}, {"owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "reply_to_user": {"reputation": 127, "user_id": 4343492, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/2a83ede110258ecda61062307db5d219?s=128&d=identicon&r=PG", "display_name": "Pepeng Agimat", "link": "https://stackoverflow.com/users/4343492/pepeng-agimat"}, "edited": false, "score": 0, "creation_date": 1434558579, "post_id": 30896640, "comment_id": 49833640, "body": "I would say yes,you need to loop. In the above example you wrote <code>Amenity.where(id: [1,2])</code>, it ultimately would lead to invoking two sql inserts because Active Record wont perform batch insert."}], "tags": [], "owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "is_accepted": false, "score": 0, "last_activity_date": 1434556659, "creation_date": 1434556659, "answer_id": 30896640, "question_id": 30895998, "link": "https://stackoverflow.com/questions/30895998/inserting-other-fields-in-has-many-through-associations-in-rails/30896640#30896640", "title": "Inserting other fields in has_many through associations in Rails", "body": "<p>You could simply do</p>\n\n<pre><code>room = Room.find(28).room_amenities.new(amenity: Amenity.find(1), price: 100, hour: 2)\nroom.save\n</code></pre>\n"}], "owner": {"reputation": 127, "user_id": 4343492, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/2a83ede110258ecda61062307db5d219?s=128&d=identicon&r=PG", "display_name": "Pepeng Agimat", "link": "https://stackoverflow.com/users/4343492/pepeng-agimat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 215, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1434556659, "creation_date": 1434554986, "last_edit_date": 1434555303, "question_id": 30895998, "link": "https://stackoverflow.com/questions/30895998/inserting-other-fields-in-has-many-through-associations-in-rails", "title": "Inserting other fields in has_many through associations in Rails", "body": "<p>I have 3 three models which is associated each others .. </p>\n\n<p>Room Model</p>\n\n<pre><code>has_many :room_amenities\nhas_many :amenities, through: :room_amenities\n</code></pre>\n\n<p>Amenity Model</p>\n\n<pre><code>has_many :room_amenities\nhas_many :rooms, through: :room_amenities\n</code></pre>\n\n<p>RoomAmenity Model</p>\n\n<pre><code>belongs_to :amenity\nbelongs_to :room\n</code></pre>\n\n<p>I tried to insert my new room_amenity choice:</p>\n\n<pre><code>room = Room.find(28)\namenity = Amenity.where(id: [1,2])\n\nrm_amenities = room.amenities = amenity\n</code></pre>\n\n<p>and it is successfully created but what if I want to insert other 2 fields like <code>Price</code> and <code>Hour</code> in room_amenities model</p>\n\n<p>How could I insert that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "windows", "nokogiri", "ruby-2.1"], "answers": [{"comments": [{"owner": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "edited": false, "score": 0, "creation_date": 1434663503, "post_id": 30896597, "comment_id": 49889185, "body": "If that worked it&#39;s possible that that version&#39;s fat binary was compiled before Ruby 2.1 was released."}], "tags": [], "owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "is_accepted": true, "score": 1, "last_activity_date": 1434556538, "creation_date": 1434556538, "answer_id": 30896597, "question_id": 30895880, "link": "https://stackoverflow.com/questions/30895880/nokogiri-on-windows-with-ruby-2-1/30896597#30896597", "title": "Nokogiri on Windows with Ruby 2.1", "body": "<p>I would propose upgrading to nokogiri 1.6.6.2, the latest version. It works just fine on windows using ruby 2.1.5.</p>\n"}], "owner": {"reputation": 11051, "user_id": 347165, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/4881e74d5b966aca3f5945a974e8d91b?s=128&d=identicon&r=PG", "display_name": "Xodarap", "link": "https://stackoverflow.com/users/347165/xodarap"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 465, "favorite_count": 0, "accepted_answer_id": 30896597, "answer_count": 1, "score": 0, "last_activity_date": 1434556538, "creation_date": 1434554685, "question_id": 30895880, "link": "https://stackoverflow.com/questions/30895880/nokogiri-on-windows-with-ruby-2-1", "title": "Nokogiri on Windows with Ruby 2.1", "body": "<p>When I try to run my application I get a nokogiri error (full trace below). I understand that nokogiri doesn't support Windows on ruby 2.2, but I'm using 2.1.5 so it seems like it shouldn't be a problem. The gem installs perfectly when I do <code>gem install -v 1.6</code> so I'm not sure what's happening.</p>\n\n<p>Full error trace:</p>\n\n<pre><code>PS C:\\Users\\Ben\\Documents\\RubymineProjects\\Hes&gt;  bundle exec rails server\nDL is deprecated, please use Fiddle\nC:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/nokogiri-1.6.0-x86-mingw32/lib/nokogiri/nokogiri.rb:1:in `require':\n cannot load such file -- nokogiri/2.1/nokogiri (LoadError)\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/nokogiri-1.6.0-x86-mingw32/lib/nokogiri/nokogiri.rb:1:\nin `&lt;top (required)&gt;'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/nokogiri-1.6.0-x86-mingw32/lib/nokogiri.rb:28:in `requ\nire'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/nokogiri-1.6.0-x86-mingw32/lib/nokogiri.rb:28:in `&lt;top\n (required)&gt;'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/bundler/gems/hqmf2js-71d9c742d65f/lib/hqmf2js.rb:11:in `req\nuire'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/bundler/gems/hqmf2js-71d9c742d65f/lib/hqmf2js.rb:11:in `&lt;to\np (required)&gt;'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/bundler-1.7.7/lib/bundler/runtime.rb:76:in `require'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/bundler-1.7.7/lib/bundler/runtime.rb:76:in `block (2 l\nevels) in require'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/bundler-1.7.7/lib/bundler/runtime.rb:72:in `each'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/bundler-1.7.7/lib/bundler/runtime.rb:72:in `block in r\nequire'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/bundler-1.7.7/lib/bundler/runtime.rb:61:in `each'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/bundler-1.7.7/lib/bundler/runtime.rb:61:in `require'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/bundler-1.7.7/lib/bundler.rb:133:in `require'\n        from C:/Users/Ben/Documents/RubymineProjects/Health-eFilings/config/application.rb:12:in `&lt;top (required)&gt;'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/railties-4.1.4/lib/rails/commands/commands_tasks.rb:79\n:in `require'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/railties-4.1.4/lib/rails/commands/commands_tasks.rb:79\n:in `block in server'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/railties-4.1.4/lib/rails/commands/commands_tasks.rb:76\n:in `tap'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/railties-4.1.4/lib/rails/commands/commands_tasks.rb:76\n:in `server'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/railties-4.1.4/lib/rails/commands/commands_tasks.rb:40\n:in `run_command!'\n        from C:/RailsInstaller/Ruby2.1.0/lib/ruby/gems/2.1.0/gems/railties-4.1.4/lib/rails/commands.rb:17:in `&lt;top (requ\nired)&gt;'\n        from script/rails:6:in `require'\n        from script/rails:6:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 673, "user_id": 3704250, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/1ZYH3.png?s=128&g=1", "display_name": "mikeymurph77", "link": "https://stackoverflow.com/users/3704250/mikeymurph77"}, "edited": false, "score": 0, "creation_date": 1434554410, "post_id": 30895739, "comment_id": 49830605, "body": "Awesome! That was it!... Such an easy fix."}], "tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": false, "score": 1, "last_activity_date": 1434554321, "creation_date": 1434554321, "answer_id": 30895739, "question_id": 30895682, "link": "https://stackoverflow.com/questions/30895682/take-and-a-array-of-names-and-values-and-create-a-dropdown-that-can-set-the-valu/30895739#30895739", "title": "Take and a array of names and values and create a dropdown that can set the values based on the objects attribute values", "body": "<p>try using <a href=\"http://apidock.com/rails/v4.2.1/ActionView/Helpers/FormOptionsHelper/options_for_select\" rel=\"nofollow\"><code>options_for_select</code></a> instead of <code>options_from_collection_for_select</code>.</p>\n\n<p><code>options_from_collection_for_select</code> expects you to pass it ruby objects, whereas <code>options_for_select</code> expects an array of douples, which appears to be what you have</p>\n"}], "owner": {"reputation": 673, "user_id": 3704250, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/1ZYH3.png?s=128&g=1", "display_name": "mikeymurph77", "link": "https://stackoverflow.com/users/3704250/mikeymurph77"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1434554321, "creation_date": 1434554155, "question_id": 30895682, "link": "https://stackoverflow.com/questions/30895682/take-and-a-array-of-names-and-values-and-create-a-dropdown-that-can-set-the-valu", "title": "Take and a array of names and values and create a dropdown that can set the values based on the objects attribute values", "body": "<p>I am trying to figure how to set a select dropdown to the correct value of an object when returning back to a form. Here is what I have so far. </p>\n\n<p>In my model I have an array that holds the name and value for a color select dropdown. </p>\n\n<pre><code>ROW_COLORS = [[\"Green\", \"greenTableRow\"], [\"Red\", \"redTableRow\"], [\"Orange\", \"orangeTableRow\"], [\"Yellow\", \"yellowTableRow\"]]\n</code></pre>\n\n<p>I then set the <code>ROW_COLORS</code> to a variable <code>@row_colors</code> in the controller. </p>\n\n<p>I am looping through an array of rule objects in my view...</p>\n\n<pre><code>&lt;% rule_formats.each do |rule| %&gt;\n</code></pre>\n\n<p>And every existing <code>rule</code> has an attribute called <code>color_class</code>.</p>\n\n<p>Then in my form, I am trying to create a dropdown list with the color names (ex. <code>green</code>) from the array with the value of each color (<code>greenTableRow</code>) being the <code>color_class</code>.</p>\n\n<pre><code>&lt;%= f.select(\"column_color\", options_from_collection_for_select(@row_options, rule.color_class),  {include_blank: \"-- Select Color --\", class: 'span7'}) %&gt;\n</code></pre>\n\n<p>This however errors out with a <code>wrong number of arguments (2 for 3..4)</code>. </p>\n\n<p>I know that if <code>@row_options</code> was an object I could then do something like <code>options_from_collection_for_select(@row_options, :color_class, :name, rule.color_class)</code> But since <code>@row_options</code> is just an array.. I'm not sure if I'm even using the correct helper_method.</p>\n\n<p>I cannot find how to set the color select to the correct value using <code>rule.color_class</code> when the user returns to a previously submitted form. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "associations"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1434553515, "post_id": 30895311, "comment_id": 49829991, "body": "What do you mean not working properly?"}, {"owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1434555832, "post_id": 30895311, "comment_id": 49831657, "body": "Not saving data into quantities table."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1434557220, "post_id": 30895311, "comment_id": 49832655, "body": "Please post your log."}, {"owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1434623152, "post_id": 30895311, "comment_id": 49862772, "body": "thanks, Now I&#39;ve error wrong number of arguments (1 for 2..3)"}], "answers": [{"tags": [], "owner": {"reputation": 1194, "user_id": 3587928, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/887b24ff23f9ae35db9da87f993c21c4?s=128&d=identicon&r=PG", "display_name": "Ojash", "link": "https://stackoverflow.com/users/3587928/ojash"}, "is_accepted": false, "score": 0, "last_activity_date": 1434554499, "creation_date": 1434554499, "answer_id": 30895805, "question_id": 30895311, "link": "https://stackoverflow.com/questions/30895311/how-to-create-form-for-many-to-many-association-in-rails-4-2/30895805#30895805", "title": "How to create form for many to many association in Rails 4.2", "body": "<p>From what I understood you just need to make a javascript methods to dynamically generate the fields, you could follw this rails cast <a href=\"http://railscasts.com/episodes/197-nested-model-form-part-2\" rel=\"nofollow\">http://railscasts.com/episodes/197-nested-model-form-part-2</a>. This is exactly what you need.</p>\n"}, {"tags": [], "owner": {"reputation": 492, "user_id": 4818776, "user_type": "registered", "profile_image": "https://graph.facebook.com/10202878012710235/picture?type=large", "display_name": "\u0421\u0435\u0440\u0433\u0456\u0439 \u041d\u0430\u0437\u0430\u0440\u0435\u0432\u0438\u0447", "link": "https://stackoverflow.com/users/4818776/%d0%a1%d0%b5%d1%80%d0%b3%d1%96%d0%b9-%d0%9d%d0%b0%d0%b7%d0%b0%d1%80%d0%b5%d0%b2%d0%b8%d1%87"}, "is_accepted": false, "score": 0, "last_activity_date": 1434975158, "creation_date": 1434975158, "answer_id": 30979724, "question_id": 30895311, "link": "https://stackoverflow.com/questions/30895311/how-to-create-form-for-many-to-many-association-in-rails-4-2/30979724#30979724", "title": "How to create form for many to many association in Rails 4.2", "body": "<p>In my opinion, You have problem with Model. In this task You should use the has_and_belongs_to_many (habtm) association. You could see <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow\">Active Record Associations</a></p>\n\n<p>You could make Model:</p>\n\n<pre><code>class Ingredient &lt; ActiveRecord::Base\n   has_and_belongs_to_many :recipes\n...\nend\n\nclass Recipe &lt; ActiveRecord::Base\n   has_and_belongs_to_many :ingredients\n...\nend \n</code></pre>\n\n<p>In migrations:</p>\n\n<pre><code>def self.up\n    create_table :ingradients, force: true do |t|\n      t.string :name    \n      t.references :recipe, index: true\n      t.timestamps null: false    \n    end\n    create_table :recipes, force: true do |t|\n      t.string :name    \n      t.references :ingradient, index: true\n      t.timestamps null: false    \n    end\n    create_table :ingradients_recipes, force: true, id: false do |t|\n      t.belongs_to :ingradient, index: true\n      t.belongs_to :recipe, index: true\n      t.integer    :quantity\n    end\n  end\n</code></pre>\n\n<p>I think the next steps will be simple...</p>\n"}], "owner": {"reputation": 335, "user_id": 1502296, "user_type": "registered", "accept_rate": 47, "profile_image": "https://www.gravatar.com/avatar/bffcdc9f77475839353cff6fbbcc1e20?s=128&d=identicon&r=PG", "display_name": "nikos83", "link": "https://stackoverflow.com/users/1502296/nikos83"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 172, "favorite_count": 0, "answer_count": 2, "score": -1, "last_activity_date": 1434975158, "creation_date": 1434553163, "question_id": 30895311, "link": "https://stackoverflow.com/questions/30895311/how-to-create-form-for-many-to-many-association-in-rails-4-2", "title": "How to create form for many to many association in Rails 4.2", "body": "<p>I'm trying to create Recipes app. In my app I have table Ingredients (name), table Recipes (type_of, code, description) join table Quantities (recipe_id, ingredient_id, quantity)</p>\n\n<p>I would like to be able to add Ingredients to my Recipe while creating. Recipe can have many ingredients.</p>\n\n<p>My models:</p>\n\n<pre><code>class Ingredient &lt; ActiveRecord::Base\n   has_many :quantities\n   has_many :recipes, through: :quantities\n   has_many :stock_of_ingredients\nend\n\nclass Quantity &lt; ActiveRecord::Base\n  belongs_to :recipe\n  belongs_to :ingredient\n\n  accepts_nested_attributes_for :ingredient,\n                                :reject_if =&gt; :all_blank\nend\n\nclass Recipe &lt; ActiveRecord::Base\n   has_many :quantities\n   has_many :ingredients, :through =&gt; :quantities\n    accepts_nested_attributes_for :quantities,\n           :reject_if =&gt; :all_blank,\n           :allow_destroy =&gt; true\n  accepts_nested_attributes_for :ingredients\n\nend   \n</code></pre>\n\n<p>My Recipe controller was created from scaffolding so is</p>\n\n<pre><code>def create\n    @recipe = Recipe.new(recipe_params)\n\n    respond_to do |format|\n      if @recipe.save\n        format.html { redirect_to @recipe, notice: 'Recipe was successfully created.' }\n        format.json { render :show, status: :created, location: @recipe }\n      else\n        format.html { render :new }\n        format.json { render json: @recipe.errors, status: :unprocessable_entity }\n      end\n    end   end\n</code></pre>\n\n<p>I have also added </p>\n\n<pre><code>  def recipe_params\n      params.require(:recipe).permit(:type_of_base, :code, :description, :quantities_attributes =&gt;[:quantity, :recipe_id, :ingredient_id, :ingredient_attributes])\n    end\n</code></pre>\n\n<p>I didn't know that I need quantity controller can that be created from base controller?</p>\n\n<p>Now my form looks like this</p>\n\n<pre><code>&lt;%= form_for(@recipe, html: { class: \"form-horizontal\", role: \"form\" }) do |f| %&gt;\n ...\n\n  &lt;div class=\"form-group\"&gt;\n   ...\n  &lt;/div&gt;\n&lt;div class=\"ingderdient-wraper\"&gt;\n  &lt;%= render \"quantites/quantity_fields\" %&gt;\n&lt;/div&gt;\n\n\n  &lt;div class=\"form-group\"&gt;\n    &lt;div class=\"col-sm-offset-2 col-sm-10\"&gt;\n      &lt;%= f.submit class: \"btn btn-primary\" %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>And my rendered file</p>\n\n<pre><code> &lt;%= text_field :quantity %&gt;\n  &lt;%= select :ingredient_ids, Ingredient.all.collect {|x| [x.name, x.id]}, {}, :multiple =&gt; true %&gt;\n</code></pre>\n\n<p>But that not working properly also I would like to have a possibility to add more ingredient that one. Need a button ADD MORE. </p>\n\n<p>If someone could explain to me how to get to the point. Regards </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-routing", "http-method"], "comments": [{"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 1, "creation_date": 1434553127, "post_id": 30895213, "comment_id": 49829672, "body": "are you sending anything to the server?  use post.  if you&#39;re only getting, use get."}], "answers": [{"tags": [], "owner": {"reputation": 10814, "user_id": 985241, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/802150025e2e8b524e4d5f01259738dc?s=128&d=identicon&r=PG", "display_name": "rmagnum2002", "link": "https://stackoverflow.com/users/985241/rmagnum2002"}, "is_accepted": false, "score": 0, "last_activity_date": 1434561319, "last_edit_date": 1434561319, "creation_date": 1434553918, "answer_id": 30895596, "question_id": 30895213, "link": "https://stackoverflow.com/questions/30895213/should-watching-unwatching-a-forum-use-get-or-post-http-method-in-rails/30895596#30895596", "title": "Should watching/unwatching a forum use get or post http method in rails", "body": "<p>It won't create any issues, but it's recommended to use methods <code>POST/PUT</code> for create/update, <code>GET</code> for getting info and <code>DELETE</code> for deleting a record. </p>\n\n<p>In your case I am thinking you have a relation between user and forum that handles the watching, unwatching a forum.. cause user can probably watch/unwatch multiple forums, in this case when he unwatches it you basically delete this relation between user and forum, so you'll need to do it via a <code>DELETE</code> method.</p>\n\n<p>If you don't have a relation between users and forums, instead you keep the forum id in users table, unwatching would mean to update that user record, in this case you'd want to use <code>PUT</code> method.</p>\n\n<p><a href=\"http://www.restapitutorial.com/lessons/httpmethods.html\" rel=\"nofollow\">http://www.restapitutorial.com/lessons/httpmethods.html</a></p>\n"}], "owner": {"reputation": 168, "user_id": 4555864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/93810012ed7e371c8de2f8e4017da91b?s=128&d=identicon&r=PG&f=1", "display_name": "Mangesh Tamhankar", "link": "https://stackoverflow.com/users/4555864/mangesh-tamhankar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 46, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434561319, "creation_date": 1434552926, "question_id": 30895213, "link": "https://stackoverflow.com/questions/30895213/should-watching-unwatching-a-forum-use-get-or-post-http-method-in-rails", "title": "Should watching/unwatching a forum use get or post http method in rails", "body": "<p>I understand, in general, the differences between GET and POST, and common use cases. This question is specific to actions that would toggle the state of something. For example, if users have the ability to \"watch\" (or \"unwatch\") a forum to be notified of changes, my inclination is to use a GET request to accomplish this, but is this something that is recommended to be a POST or a GET? Can using GET cause any issues in this case?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "hash", "find"], "comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1434553005, "post_id": 30895007, "comment_id": 49829559, "body": "You should be able to do this with <code>Arel</code>.  Looks like Order has_many Folders and Folder has_many Documents?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1434553709, "post_id": 30895007, "comment_id": 49830116, "body": "This question is marked as <code>ruby-on-rails</code> what means you are on Rails. You mentioned <code>tables</code>, hence there is a database behind. Hence you are likely using <code>ActiveRecord</code>. So, please show us what have you tried."}, {"owner": {"reputation": 18203, "user_id": 100731, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/056c32203f8017f075ac060069823b66?s=128&d=identicon&r=PG", "display_name": "phoet", "link": "https://stackoverflow.com/users/100731/phoet"}, "edited": false, "score": 0, "creation_date": 1434567923, "post_id": 30895007, "comment_id": 49839379, "body": "have a look into iterators like <code>map</code> or <code>each_with_object</code>"}], "owner": {"reputation": 71, "user_id": 4713829, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6d859beff6ad8c4f04cbdc3c249c48d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Manuel", "link": "https://stackoverflow.com/users/4713829/jose-manuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 132, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434564003, "creation_date": 1434552397, "last_edit_date": 1434564003, "question_id": 30895007, "link": "https://stackoverflow.com/questions/30895007/create-an-array-with-hash-ruby-on-rails-4", "title": "Create an array with hash Ruby on Rails 4", "body": "<p>I am new at Ruby and Rails and I'm trying to create an array like this:</p>\n\n<pre><code>@data =[\n        {\n          order =&gt; {key =&gt; value, key1 =&gt; value1}, \n          folder =&gt; { 0 =&gt; {key =&gt; value , key1 =&gt; value1}, 1 =&gt; {key =&gt; value, key1 =&gt; value}}, \n          document =&gt; { 0 =&gt; {key =&gt; value , key1 =&gt; value1}, 1 =&gt; {key =&gt; value, key1 =&gt; value}}\n        },\n\n        {\n          order =&gt; {key =&gt; value, key1 =&gt; value1}, \n          folder =&gt; { 0 =&gt; {key =&gt; value , key1 =&gt; value1}, 1 =&gt; {key =&gt; value, key1 =&gt; value}}, \n          document =&gt; { 0 =&gt; {key =&gt; value , key1 =&gt; value1}, 1 =&gt; {key =&gt; value, key1 =&gt; value}}\n        },\n       ]\n</code></pre>\n\n<p>I have 3 tables, Order, Folder and Document. I have to make a find in Order with certain condition and is going to retrieve some records.\nIf the find in Order retrieve 3(can be any number) records then I have to make 3 find in Folders and the condition is the Order.id.\nThen I have to make a find in Document and the condition is the last Folder.id, this can retrieve many records. </p>\n\n<p>So, I wanna make this so i can send @data to the view and make some foreach for show all the necessary information.</p>\n\n<p><strong>EDIT:</strong></p>\n\n<p>Mudasobwa this is what I try:</p>\n\n<pre><code>Order.where(conditions).find_each do |order|\n   logger.debug(order.id) #first log\n   Folder.where(condition order.id).find_each do |folder|\n     logger.debug(folder.id) #second log\n   end\n   Document.where(folder.id).find_each do |doc|\n     logger.debug(doc.id) #third log\n   end\nend\n</code></pre>\n\n<p>With this I am getting the info that I want. 1 order.id then all the folders related with that order.id and all the document related with the last folder.id but I dont know how to create the @data array with all this info, how to join everything.</p>\n"}, {"tags": ["ruby", "refactoring"], "comments": [{"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 1, "creation_date": 1434552659, "post_id": 30894979, "comment_id": 49829282, "body": "this is worth checking out: <a href=\"https://www.youtube.com/watch?v=J1jYlPtkrqQ\" rel=\"nofollow noreferrer\">refactoring ruby with monads</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1378, "user_id": 1079225, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b008a4a10da1412e3fcf64c4de6ab76f?s=128&d=identicon&r=PG&f=1", "display_name": "zuba", "link": "https://stackoverflow.com/users/1079225/zuba"}, "edited": false, "score": 0, "creation_date": 1434558951, "post_id": 30897283, "comment_id": 49833889, "body": "Ok, I see. Thank you."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 1, "last_activity_date": 1434558533, "creation_date": 1434558533, "answer_id": 30897283, "question_id": 30894979, "link": "https://stackoverflow.com/questions/30894979/clean-up-chain-of-dependent-calls/30897283#30897283", "title": "Clean up chain of dependent calls", "body": "<p>This is one way you could do it.</p>\n\n<p><strong>Code</strong></p>\n\n<pre><code>def some_public_method(private_methods, arg)\n  private_methods.reduce(arg) { |x,m| x &amp;&amp; send(m, x) }\nend\n\nprivate\n\ndef pm1(arg); arg+1; end\ndef pm2(arg); arg+2; end\ndef pm3(arg); arg+3; end\n</code></pre>\n\n<p><strong>Examples</strong></p>\n\n<pre><code>private_methods = [:pm1, :pm2, :pm3]\n\nsome_public_method(private_methods, 0) #=&gt; 6\n\ndef pm2(arg); nil; end\nsome_public_method(private_methods, 0) #=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 1378, "user_id": 1079225, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/b008a4a10da1412e3fcf64c4de6ab76f?s=128&d=identicon&r=PG&f=1", "display_name": "zuba", "link": "https://stackoverflow.com/users/1079225/zuba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 28, "favorite_count": 0, "accepted_answer_id": 30897283, "answer_count": 1, "score": 1, "last_activity_date": 1434558533, "creation_date": 1434552346, "last_edit_date": 1434552814, "question_id": 30894979, "link": "https://stackoverflow.com/questions/30894979/clean-up-chain-of-dependent-calls", "title": "Clean up chain of dependent calls", "body": "<p>How to make cleaner such code:</p>\n\n<pre><code>def some_public_method(arg)\n  var1 = private_method(arg)\n  var2 = private_method1(var1) if var1\n  var3 = private_method2(var2) if var2\n  var4 = private_method3(var3) if var3\n  private_method4(var4) if var4\nend\n</code></pre>\n\n<p>UPDATE: sorry, forgot to change method names</p>\n"}, {"tags": ["ruby", "json", "gmail-api"], "comments": [{"owner": {"reputation": 4420, "user_id": 6822, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/fe62dcab3879bc1adf557d4176d4326e?s=128&d=identicon&r=PG", "display_name": "Chris Barry", "link": "https://stackoverflow.com/users/6822/chris-barry"}, "edited": false, "score": 1, "creation_date": 1434556076, "post_id": 30894950, "comment_id": 49831848, "body": "I&#39;m seeing this as well."}, {"owner": {"reputation": 509, "user_id": 146000, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f74207cc03afb9c614f2ba5dbbe85836?s=128&d=identicon&r=PG", "display_name": "elaichi", "link": "https://stackoverflow.com/users/146000/elaichi"}, "edited": false, "score": 1, "creation_date": 1434561341, "post_id": 30894950, "comment_id": 49835419, "body": "Me too, this is frustrating."}, {"owner": {"reputation": 7838, "user_id": 13954, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/bb50b0084e0f9b4a1cf9374fcdcdc4e9?s=128&d=identicon&r=PG", "display_name": "madcolor", "link": "https://stackoverflow.com/users/13954/madcolor"}, "edited": false, "score": 0, "creation_date": 1434571526, "post_id": 30894950, "comment_id": 49841687, "body": "Same here. I&#39;ve tried Chrome and Firefox. Same result."}, {"owner": {"reputation": 460, "user_id": 770271, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1210e872f71974569d0f8d91bf0f646c?s=128&d=identicon&r=PG", "display_name": "Philip", "link": "https://stackoverflow.com/users/770271/philip"}, "edited": false, "score": 0, "creation_date": 1434582331, "post_id": 30894950, "comment_id": 49846530, "body": "Same for me. I submitted feedback via the button on the top of the page because this is apparently a widespread issue."}], "answers": [{"comments": [{"owner": {"reputation": 649, "user_id": 3938388, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6586e6513253b74a73a00fb4460101c?s=128&d=identicon&r=PG&f=1", "display_name": "ElioRubens", "link": "https://stackoverflow.com/users/3938388/eliorubens"}, "edited": false, "score": 0, "creation_date": 1434591419, "post_id": 30898991, "comment_id": 49848591, "body": "Yes client_ID and client_secret are available in browser view and can be manually inputted into the sample json provided. This worked, thanks!"}], "tags": [], "owner": {"reputation": 93, "user_id": 2546275, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ace117065455eb038700e8bcd93cdb3e?s=128&d=identicon&r=PG", "display_name": "Eric", "link": "https://stackoverflow.com/users/2546275/eric"}, "is_accepted": true, "score": 5, "last_activity_date": 1434564511, "last_edit_date": 1434564511, "creation_date": 1434564077, "answer_id": 30898991, "question_id": 30894950, "link": "https://stackoverflow.com/questions/30894950/client-secret-json-is-empty-upon-download-from-google-developer-site/30898991#30898991", "title": "client_secret.json is empty upon download from google developer site", "body": "<p>I assume this just pre-populates the json for you.   If you check out <a href=\"https://developers.google.com/api-client-library/ruby/guide/aaa_client_secrets\" rel=\"noreferrer\">API Client Library for Ruby (Alpha) - Client Secrets</a>, you should be able to manually create it with the information on the same page that offers the \"DOWNLOAD JSON\" button.  </p>\n\n<p>Although this says it is for Ruby, I don't think the json format would be any different for other languages.  </p>\n\n<p><strong>Here is a snippet of the example from the above Google Reference URL:</strong></p>\n\n<p><em>Here is an example client_secrets.json file for a <strong>web</strong> application:</em></p>\n\n<pre><code>{\n  \"web\": {\n    \"client_id\": \"asdfjasdljfasdkjf\",\n    \"client_secret\": \"1912308409123890\",\n    \"redirect_uris\": [\"https://www.example.com/oauth2callback\"],\n    \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n    \"token_uri\": \"https://accounts.google.com/o/oauth2/token\"\n  }\n}\n</code></pre>\n\n<p><em>Here is an example client_secrets.json file for an <strong>installed</strong> application:</em></p>\n\n<pre><code>{\n  \"installed\": {\n    \"client_id\": \"837647042410-75ifg...usercontent.com\",\n    \"client_secret\":\"asdlkfjaskd\",\n    \"redirect_uris\": [\"http://localhost\", \"urn:ietf:wg:oauth:2.0:oob\"],\n    \"auth_uri\": \"https://accounts.google.com/o/oauth2/auth\",\n    \"token_uri\": \"https://accounts.google.com/o/oauth2/token\"\n  }\n}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 608, "user_id": 4823789, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/16701fdace0347de7dbf1c356d295e76?s=128&d=identicon&r=PG&f=1", "display_name": "ND003", "link": "https://stackoverflow.com/users/4823789/nd003"}, "is_accepted": false, "score": 0, "last_activity_date": 1434814994, "creation_date": 1434814994, "answer_id": 30955857, "question_id": 30894950, "link": "https://stackoverflow.com/questions/30894950/client-secret-json-is-empty-upon-download-from-google-developer-site/30955857#30955857", "title": "client_secret.json is empty upon download from google developer site", "body": "<p>The issue seems to be resolved now, as I can download them properly.</p>\n"}], "owner": {"reputation": 649, "user_id": 3938388, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c6586e6513253b74a73a00fb4460101c?s=128&d=identicon&r=PG&f=1", "display_name": "ElioRubens", "link": "https://stackoverflow.com/users/3938388/eliorubens"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1787, "favorite_count": 1, "accepted_answer_id": 30898991, "answer_count": 2, "score": 7, "last_activity_date": 1434814994, "creation_date": 1434552277, "question_id": 30894950, "link": "https://stackoverflow.com/questions/30894950/client-secret-json-is-empty-upon-download-from-google-developer-site", "title": "client_secret.json is empty upon download from google developer site", "body": "<p>I am trying to download the client_secret.json from google API. I am following the steps listed in <a href=\"https://developers.google.com/gmail/api/quickstart/ruby\" rel=\"noreferrer\">https://developers.google.com/gmail/api/quickstart/ruby</a>. </p>\n\n<ul>\n<li>Use this wizard to create or select a project in the Google Developers Console and automatically enable the API.</li>\n<li>In the sidebar on the left, select Consent screen. Select an EMAIL ADDRESS and enter a PRODUCT NAME if not already set and click the Save button.</li>\n<li>In the sidebar on the left, select Credentials and click Create new Client ID.</li>\n<li>Select the application type Installed application, the installed application type Other, and click the Create Client ID button.</li>\n<li>Click the Download JSON button under your new client ID. Move this file to your working directory and rename it client_secret.json.</li>\n</ul>\n\n<p>The client_secret.json file does download but it is empty. The title of the file looks like it must be the client_id ending in apps.googleusercontent.com however there is no data stored inside the file. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "yaml"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 2070526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5990c33d897fd9b478bf47fd7ab7d188?s=128&d=identicon&r=PG&f=1", "display_name": "billpixby", "link": "https://stackoverflow.com/users/2070526/billpixby"}, "edited": false, "score": 0, "creation_date": 1434554522, "post_id": 30894729, "comment_id": 49830690, "body": "Unfortunately, that did not work. Inside the template is another set of code that display the data in non-alphabetical form. Maybe I need to declare some variables structured like this? <a href=\"http://pastebin.com/pi2y3Cw1\" rel=\"nofollow noreferrer\">pastebin.com/pi2y3Cw1</a>"}, {"owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "reply_to_user": {"reputation": 1, "user_id": 2070526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5990c33d897fd9b478bf47fd7ab7d188?s=128&d=identicon&r=PG&f=1", "display_name": "billpixby", "link": "https://stackoverflow.com/users/2070526/billpixby"}, "edited": false, "score": 0, "creation_date": 1434567130, "post_id": 30894729, "comment_id": 49838884, "body": "@billpixby, can you possibly provide some dummy yaml that I can look at to understand better? or whatever the <code>data</code> variable looks like"}], "tags": [], "owner": {"reputation": 3290, "user_id": 1214951, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/313ce4fdeb46839023cc31357b72710b?s=128&d=identicon&r=PG", "display_name": "chad_", "link": "https://stackoverflow.com/users/1214951/chad"}, "is_accepted": false, "score": 2, "last_activity_date": 1434551746, "creation_date": 1434551746, "answer_id": 30894729, "question_id": 30894649, "link": "https://stackoverflow.com/questions/30894649/sorting-in-html-erb/30894729#30894729", "title": "Sorting in html.erb", "body": "<p>Try:</p>\n\n<pre><code>&lt;ul class=\"app-list\"&gt;\n  &lt;% data.apps.reverse.each do |app| %&gt;\n    &lt;% if app[1][:categories][:featured] &amp;&amp; app[1][:categories][:script] %&gt;\n      &lt;li&gt;\n        &lt;%= partial 'partials/app', locals: { app: app[1] } %&gt;\n      &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 2070526, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5990c33d897fd9b478bf47fd7ab7d188?s=128&d=identicon&r=PG&f=1", "display_name": "billpixby", "link": "https://stackoverflow.com/users/2070526/billpixby"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 399, "favorite_count": 1, "answer_count": 1, "score": 0, "last_activity_date": 1434553771, "creation_date": 1434551541, "last_edit_date": 1434553771, "question_id": 30894649, "link": "https://stackoverflow.com/questions/30894649/sorting-in-html-erb", "title": "Sorting in html.erb", "body": "<p>This code grabs information from yaml files and outputs them in ascending order (I'm assuming by default). I can't figure out how to code this to reverse the order. Any suggestions? The site is using Middleman and ERB as templating language.</p>\n\n<p><strong>View:</strong></p>\n\n<pre><code>&lt;ul class=\"app-list\"&gt;\n  &lt;% data.apps.each do |app| %&gt;\n    &lt;% if app[1][:categories][:featured] &amp;&amp; app[1][:categories][:script] %&gt;\n      &lt;li&gt;\n        &lt;%= partial 'partials/app', locals: { app: app[1] } %&gt;\n      &lt;/li&gt;\n    &lt;% end %&gt;\n  &lt;% end %&gt;\n&lt;/ul&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "strong-parameters"], "comments": [{"owner": {"reputation": 14010, "user_id": 3109182, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/a4b305f0077055b4fdcf715067775d5a?s=128&d=identicon&r=PG", "display_name": "Anthony", "link": "https://stackoverflow.com/users/3109182/anthony"}, "edited": false, "score": 0, "creation_date": 1434550270, "post_id": 30894070, "comment_id": 49827387, "body": "just allowing the parent key should allow all child keys.  so simply allowing <code>supply</code> will be enough here."}, {"owner": {"reputation": 8871, "user_id": 4381282, "user_type": "registered", "accept_rate": 100, "profile_image": "https://lh4.googleusercontent.com/-rIutmC2tG4M/AAAAAAAAAAI/AAAAAAAAAE4/wicIrC8KhUs/photo.jpg?sz=128", "display_name": "Pawe\u0142 Dawczak", "link": "https://stackoverflow.com/users/4381282/pawe%c5%82-dawczak"}, "edited": false, "score": 0, "creation_date": 1434550272, "post_id": 30894070, "comment_id": 49827389, "body": "Wouldn&#39;t simply <code>params.fetch(:supply, {}).permit(:another_params, :items)</code> work in your case?"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1434552253, "post_id": 30894070, "comment_id": 49828896, "body": "Pawel, It seems no...."}, {"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 2, "creation_date": 1434554300, "post_id": 30894070, "comment_id": 49830542, "body": "@asiniy - did you see <a href=\"https://github.com/rails/rails/issues/9454\" rel=\"nofollow noreferrer\">this thread</a>?  Seems like it may address your use case."}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1435149199, "post_id": 30894070, "comment_id": 50077904, "body": "You are not using nested-attributes or <code>fields_for</code> ? This will aid in building a more railsy params-array (and allow more stringent permissions)."}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1435151298, "post_id": 30894070, "comment_id": 50079427, "body": "@nathanvda, not my case. These attributes goes to form object"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1435162982, "post_id": 30894070, "comment_id": 50088326, "body": "@steveklein you should it as an answer, so the OP can give you credit :)"}, {"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1435164063, "post_id": 30894070, "comment_id": 50089013, "body": "@asiny i think you mean the attributes come <i>from</i> the form object, and I am saying: maybe you should write your form differently so it posts in a way rails can automatically parse more correctly. But if you are happy with your solution, it is ok."}], "answers": [{"comments": [{"owner": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1435149298, "post_id": 31020856, "comment_id": 50077981, "body": "Why not give Steve Klein the real credit, and let him answer?"}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "reply_to_user": {"reputation": 48004, "user_id": 216513, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30a45c64b2ef288f7ec098c5fb353a22?s=128&d=identicon&r=PG", "display_name": "nathanvda", "link": "https://stackoverflow.com/users/216513/nathanvda"}, "edited": false, "score": 0, "creation_date": 1435151250, "post_id": 31020856, "comment_id": 50079392, "body": "I can do that, but I don&#39;t know how to do it."}], "tags": [], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "is_accepted": false, "score": 0, "last_activity_date": 1435132510, "creation_date": 1435132510, "answer_id": 31020856, "question_id": 30894070, "link": "https://stackoverflow.com/questions/30894070/rails-4-permit-any-keys-in-the-hash/31020856#31020856", "title": "Rails 4 permit any keys in the hash", "body": "<p>According to the @steve klein <a href=\"https://github.com/rails/rails/issues/9454\" rel=\"nofollow\">link to github issue</a>, this is considered as a good solution: </p>\n\n<pre><code>params.permit(:test).tap do |whitelisted|\n  whitelisted[:more] = params[:more]\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "reply_to_user": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1435172739, "post_id": 31033036, "comment_id": 50094205, "body": "Lol I had forgotten all about this and then saw the comments today from you and @nathandva so I wrote it up.  As long as you&#39;ve solved your problem, that is fine.  In the future, I&#39;ll try to write something up earlier so you can accept it."}, {"owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "edited": false, "score": 0, "creation_date": 1435203724, "post_id": 31033036, "comment_id": 50104945, "body": "And I forgot about that :)"}], "tags": [], "owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "is_accepted": true, "score": 1, "last_activity_date": 1435166417, "creation_date": 1435166417, "answer_id": 31033036, "question_id": 30894070, "link": "https://stackoverflow.com/questions/30894070/rails-4-permit-any-keys-in-the-hash/31033036#31033036", "title": "Rails 4 permit any keys in the hash", "body": "<p><a href=\"https://github.com/rails/rails/issues/9454\" rel=\"nofollow\">This thread</a> in github provides a solution:</p>\n\n<pre><code>def supply_params\n  params.require(:supply).permit(:another_params).tap do |whitelisted|\n    whitelisted[:items] = params[:supply][:items] if params[:supply][:items]\n  end\nend\n</code></pre>\n\n<p>The idea is to explicitly permit any known attributes which are needed and then tack on nested attributes.</p>\n"}], "owner": {"reputation": 11760, "user_id": 2926641, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/962e08aff17872bda3f89a9ee6849ab3?s=128&d=identicon&r=PG", "display_name": "asiniy", "link": "https://stackoverflow.com/users/2926641/asiniy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 31033036, "answer_count": 2, "score": 0, "last_activity_date": 1435166417, "creation_date": 1434550200, "question_id": 30894070, "link": "https://stackoverflow.com/questions/30894070/rails-4-permit-any-keys-in-the-hash", "title": "Rails 4 permit any keys in the hash", "body": "<p>I pass a params like this</p>\n\n<pre><code>{\n  \"utf8\" =&gt; true,\n  \"supply\" =&gt; {\n    \"items\" =&gt; { 111 =&gt; 112, 89 =&gt; 10},\n    \"another_params\" =&gt; \"something\"\n  }\n}\n</code></pre>\n\n<p>My <code>supply_params</code> are:</p>\n\n<pre><code>params.fetch(:supply, {}).permit(:another_params, items: {})\n</code></pre>\n\n<p>But I get an <code>unpermitted parameters 111 and 89</code>. How can I make <code>items</code> permit all kinds of keys?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch", "typeahead.js", "searchkick"], "owner": {"reputation": 803, "user_id": 656708, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/22687d7a0acdb90bf3ac3a38aaff8864?s=128&d=identicon&r=PG", "display_name": "frishi", "link": "https://stackoverflow.com/users/656708/frishi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 330, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1435161812, "creation_date": 1434547997, "last_edit_date": 1435161812, "question_id": 30893186, "link": "https://stackoverflow.com/questions/30893186/searchkick-typeahead-js-and-elasticsearch-issues", "title": "Searchkick, typeahead.js and Elasticsearch issues", "body": "<p>I am trying to implement an autocomplete search bar that searches posts in my Rails 4.2 app. I have elasticsearch installed, searchkick gem, and typeahead.js for autocomplete on the frontend.</p>\n\n<p>To that end, I followed a tutorial (<a href=\"https://shellycloud.com/blog/2013/10/adding-search-and-autocomplete-to-a-rails-app-with-elasticsearch\" rel=\"nofollow\">https://shellycloud.com/blog/2013/10/adding-search-and-autocomplete-to-a-rails-app-with-elasticsearch</a>) and have the following things set up:</p>\n\n<p>In my <code>routes.rb</code> I have set up the collection route like so:</p>\n\n<pre><code> resources :posts do\n   collection do\n     get :autocomplete\n   end\n   resources :attachments \n end\n</code></pre>\n\n<p>In my <code>Post.rb</code> model:</p>\n\n<pre><code>searchkick autocomplete: ['title', 'excerpt']\n</code></pre>\n\n<p>In my <code>posts_controller.rb</code></p>\n\n<pre><code>def index\n  if params[:query].present?\n    @posts = Post.search(params[:query])\n  end  \nend\n\ndef autocomplete\n   render json: Post.search(params[:query], autocomplete: true, limit: 10).map do |post|\n   {title:post.title, excerpt: post.excerpt}\n  end\nend\n</code></pre>\n\n<p>In my <code>posts.js</code></p>\n\n<pre><code>$(document).ready(function() {\n   var posts = new Bloodhound({\n       datumTokenizer: Bloodhound.tokenizers.obj.whitespace('title'),\n       queryTokenizer: Bloodhound.tokenizers.whitespace,\n       prefetch: \"/posts/autocomplete?query=%QUERY\",\n   remote: {\n       url: \"/posts/autocomplete?query=%QUERY\"\n   }\n });\n\n$('#query').typeahead({\n  name: 'posts',\n  display: 'title',\n  source: posts\n});\n})\n</code></pre>\n\n<p>Finally, in my view <code>index.html.haml</code> I have:</p>\n\n<pre><code>=form_tag(posts_path, method: :get) do\n  =text_field_tag(:query, params[:query], autocomplete: 'off', class: 'typeahead')\n  %input{:type=&gt;\"submit\", :value=&gt; t('search')}\n</code></pre>\n\n<p>When I type something in the search box, I get this:</p>\n\n<pre><code>GET XHR http://localhost/posts/autocomplete [HTTP/1.1 400 Bad Request 177ms]\n</code></pre>\n\n<p>I can't tell what is going on. For what its worth, I have tried hitting <code>http://localhost/posts/autocomplete.json?query=something</code> and it works in that it will return the matching result. I have also tried replacing <code>autocomplete</code> with <code>autocomplete.json</code> in the JS I posted above.</p>\n\n<p>Still, I get the same error in the console (with <code>autocomplete.json</code> in place of <code>autocomplete</code>) </p>\n\n<p>Can you help?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "ruby-on-rails-3", "devise"], "answers": [{"comments": [{"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 2, "creation_date": 1434548657, "post_id": 30893295, "comment_id": 49826094, "body": "you don&#39;t need the <code>1.times</code> just <code>@resource.jobs.build</code>"}, {"owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "reply_to_user": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 0, "creation_date": 1434619297, "post_id": 30893295, "comment_id": 49860133, "body": "True. Thanks @PiotrKruczek!"}], "tags": [], "owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "is_accepted": true, "score": 0, "last_activity_date": 1434548250, "creation_date": 1434548250, "answer_id": 30893295, "question_id": 30893069, "link": "https://stackoverflow.com/questions/30893069/devise-nested-attributes-form-field-not-showing/30893295#30893295", "title": "Devise nested attributes form field not showing", "body": "<p>Ahh going over the Rails Cast it looks like I need to <code>build</code> the :job_description. </p>\n\n<p>This fixed it <code>1.times { @resource.jobs.build }</code> in my Jobs controller. </p>\n\n<p><strong>Jobs Controller</strong></p>\n\n<pre><code>def new\n    @resource ||= User.new\n    1.times { @resource.jobs.build }\nend\n</code></pre>\n"}], "owner": {"reputation": 1603, "user_id": 1919319, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/u1f49.jpg?s=128&g=1", "display_name": "MikeHolford", "link": "https://stackoverflow.com/users/1919319/mikeholford"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 336, "favorite_count": 0, "accepted_answer_id": 30893295, "answer_count": 1, "score": 0, "last_activity_date": 1434548250, "creation_date": 1434547713, "last_edit_date": 1495541668, "question_id": 30893069, "link": "https://stackoverflow.com/questions/30893069/devise-nested-attributes-form-field-not-showing", "title": "Devise nested attributes form field not showing", "body": "<p>I am having trouble viewing the nested attributes field in my form. I am in the <code>jobs/new</code> view and I want have a User form that creates a job as well as a user. </p>\n\n<p>I have everything in this answer <a href=\"https://stackoverflow.com/questions/17767449/rails-4-0-with-devise-nested-attributes-unpermited-parameters\">Rails 4.0 with Devise. Nested attributes Unpermited parameters</a></p>\n\n<p>I have also checked out this <a href=\"https://stackoverflow.com/questions/10528582/nested-attributes-not-showing-up-in-simple-form\">Nested attributes not showing up in simple form</a></p>\n\n<p>But the latter answer already applies to my code and it is not showing up. My Code:</p>\n\n<p><strong>Job Model</strong> </p>\n\n<pre><code>belongs_to :user\n</code></pre>\n\n<p><strong>User Model</strong></p>\n\n<pre><code>has_many :jobs\naccepts_nested_attributes_for :jobs\n\ndevise :database_authenticatable, :registerable,\n     :recoverable, :rememberable, :trackable, :validatable, :confirmable\n</code></pre>\n\n<p><strong>Jobs/new view</strong></p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n\n  &lt;%= f.fields_for :jobs do |builder| %&gt;\n    &lt;%= render \"job_detail_fields\", :f =&gt; builder %&gt;\n  &lt;% end %&gt;\n\n  &lt;%= f.email_field :email, placeholder: \"Enter email\", class: \"full-width form-field\" %&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>_job_details_fields</strong></p>\n\n<pre><code>&lt;%= f.text_area :job_description, placeholder: \"Job description...\" %&gt;\n</code></pre>\n\n<p>The <code>:job_description</code> text_area is not showing. If I change the nested attributes form to something like <code>f.fields_for :job</code>, it will then show but on submission of the form I get <strong>unpermitted paramater job</strong> as an error. I am pretty sure <code>jobs</code> is correct but I don't know why it is not showing. Any ideas?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 83048, "user_id": 2255089, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZNAsT.jpg?s=128&g=1", "display_name": "Casimir et Hippolyte", "link": "https://stackoverflow.com/users/2255089/casimir-et-hippolyte"}, "is_accepted": false, "score": 0, "last_activity_date": 1434548278, "last_edit_date": 1434548278, "creation_date": 1434547839, "answer_id": 30893122, "question_id": 30893062, "link": "https://stackoverflow.com/questions/30893062/replace-double-slashes-with-single-one-except-for-the-first-match-in-ruby/30893122#30893122", "title": "Replace double slashes with single one, except for the first match in Ruby", "body": "<p>You can use this pattern that is not anchored to the substring <code>https://</code>:</p>\n\n<pre><code>\\/(?=\\/)(?&lt;!https:\\/)\n</code></pre>\n\n<p>or a version that do not depend of the scheme:</p>\n\n<pre><code>\\/(?=\\/)(?&lt;!:\\/)\n</code></pre>\n\n<p>And use an empty string as replacement.</p>\n\n<p><a href=\"http://rubular.com/r/ot0LmZyBag\" rel=\"nofollow\">demo</a></p>\n\n<p>Note: if you want to handle URIs like <code>file:///directory/...</code> you can add an alternation in the negative lookbehind:</p>\n\n<pre><code>\\/(?=\\/)(?&lt;!:\\/|:\\/\\/)\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 4484, "user_id": 445820, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9b75535144b3f9fc7acf970446252c9?s=128&d=identicon&r=PG&f=1", "display_name": "aborted", "link": "https://stackoverflow.com/users/445820/aborted"}, "edited": false, "score": 0, "creation_date": 1434556381, "post_id": 30893164, "comment_id": 49832053, "body": "How about when an URL starts with <code>&#47;&#47;</code> instead of <code>http:&#47;&#47;</code> or <code>https:&#47;&#47;</code>? I know I didn&#39;t mention this in the first post, but I would appreciate help on this one too."}, {"owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "reply_to_user": {"reputation": 4484, "user_id": 445820, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9b75535144b3f9fc7acf970446252c9?s=128&d=identicon&r=PG&f=1", "display_name": "aborted", "link": "https://stackoverflow.com/users/445820/aborted"}, "edited": false, "score": 0, "creation_date": 1434558054, "post_id": 30893164, "comment_id": 49833272, "body": "Well, if it&#39;s at the beginning of the string, I suppose <code>(?&lt;!^)(?&lt;!http:)(?&lt;!https:)&#47;&#47;</code>"}], "tags": [], "owner": {"reputation": 65435, "user_id": 2206004, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HCB1e.png?s=128&g=1", "display_name": "hwnd", "link": "https://stackoverflow.com/users/2206004/hwnd"}, "is_accepted": true, "score": 2, "last_activity_date": 1434548558, "last_edit_date": 1434548558, "creation_date": 1434547952, "answer_id": 30893164, "question_id": 30893062, "link": "https://stackoverflow.com/questions/30893062/replace-double-slashes-with-single-one-except-for-the-first-match-in-ruby/30893164#30893164", "title": "Replace double slashes with single one, except for the first match in Ruby", "body": "<p>You can use double look-behind assertions here:</p>\n\n<pre><code>(?&lt;!http:)(?&lt;!https:)//\n</code></pre>\n\n<p>Example:</p>\n\n<pre><code>s = 'https://mywebsite.com//hello/world//foo/bar'\ns.gsub(Regexp.new('(?&lt;!http:)(?&lt;!https:)//'), '/')\n# =&gt; \"https://mywebsite.com/hello/world/foo/bar\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": -1, "last_activity_date": 1434548021, "creation_date": 1434548021, "answer_id": 30893201, "question_id": 30893062, "link": "https://stackoverflow.com/questions/30893062/replace-double-slashes-with-single-one-except-for-the-first-match-in-ruby/30893201#30893201", "title": "Replace double slashes with single one, except for the first match in Ruby", "body": "<p>What about escaping the first double slash into something else, doing a simple <code>gsub</code>, and then unescaping? Assuming that your string never includes <code>\"ESCAPE\"</code> (if it does, you can choose something else):</p>\n\n<pre><code>\"https://mywebsite.com//hello/world//foo/bar\"\n.sub(\"//\", \"ESCAPE\")\n.gsub(\"//\", \"/\")\n.sub(\"ESCAPE\", \"//\")\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 0, "last_activity_date": 1434548127, "creation_date": 1434548127, "answer_id": 30893246, "question_id": 30893062, "link": "https://stackoverflow.com/questions/30893062/replace-double-slashes-with-single-one-except-for-the-first-match-in-ruby/30893246#30893246", "title": "Replace double slashes with single one, except for the first match in Ruby", "body": "<p>Another way:</p>\n\n<pre><code>require 'uri'\nurl = \"https://mywebsite.com//hello/world//foo/bar\"\ncomponents = URI.split(url).compact\ncomponents.last.gsub!(\"//\",\"/\")\ncomponents.first.to_s + \"://\" + components[1..-1].join\n# =&gt; \"https://mywebsite.com/hello/world/foo/bar\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 2, "last_activity_date": 1434549398, "creation_date": 1434549398, "answer_id": 30893763, "question_id": 30893062, "link": "https://stackoverflow.com/questions/30893062/replace-double-slashes-with-single-one-except-for-the-first-match-in-ruby/30893763#30893763", "title": "Replace double slashes with single one, except for the first match in Ruby", "body": "<p>Consider using <code>URI</code> for that, it's as simple as</p>\n\n<pre><code>require 'uri'\n\nu = URI.parse('https://mywebsite.com//hello/world//foo/bar')\nu.path.gsub!('//', '/')\nu.to_s #=&gt; \"https://mywebsite.com/hello/world/foo/bar\"\n</code></pre>\n\n<p>This way you can be sure to modify only the path of the url, nothing else.</p>\n\n<p>More info on <code>URI</code> can be found <a href=\"http://apidock.com/ruby/URI\" rel=\"nofollow\">here</a></p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1434559679, "last_edit_date": 1434559679, "creation_date": 1434554739, "answer_id": 30895897, "question_id": 30893062, "link": "https://stackoverflow.com/questions/30893062/replace-double-slashes-with-single-one-except-for-the-first-match-in-ruby/30895897#30895897", "title": "Replace double slashes with single one, except for the first match in Ruby", "body": "<p>If colon is a device delimiter<br>\nfind <code>(?&lt;!:)/+</code><br>\nreplace <code>/</code>  </p>\n\n<p>Input:  </p>\n\n<pre><code>https://mywebsite.com//hello/world//foo/bar\nhttps:///mywebsite.com////hello/world//foo/bar\n///////////mywebsite.com//hello/world//foo/bar\n/mywebsite.com/hello/world/foo/bar\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code>https://mywebsite.com/hello/world/foo/bar\nhttps://mywebsite.com/hello/world/foo/bar\n/mywebsite.com/hello/world/foo/bar\n/mywebsite.com/hello/world/foo/bar\n</code></pre>\n"}], "owner": {"reputation": 4484, "user_id": 445820, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f9b75535144b3f9fc7acf970446252c9?s=128&d=identicon&r=PG&f=1", "display_name": "aborted", "link": "https://stackoverflow.com/users/445820/aborted"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 696, "favorite_count": 0, "accepted_answer_id": 30893164, "answer_count": 6, "score": 0, "last_activity_date": 1558792953, "creation_date": 1434547693, "last_edit_date": 1558792953, "question_id": 30893062, "link": "https://stackoverflow.com/questions/30893062/replace-double-slashes-with-single-one-except-for-the-first-match-in-ruby", "title": "Replace double slashes with single one, except for the first match in Ruby", "body": "<p>Let's say we have an URL like:</p>\n\n<pre><code>https://mywebsite.com//hello/world//foo/bar\n</code></pre>\n\n<p>So I need a way in Ruby (regular expression) to make the URL look like this:</p>\n\n<pre><code>https://mywebsite.com/hello/world/foo/bar\n</code></pre>\n\n<p>(It could also be <code>http</code> or simply with <code>//</code>).</p>\n\n<p>I have tried forging such a regex, but I don't think it matches all double slashes, but works only for one match:</p>\n\n<pre><code>(?&lt;=https:\\/\\/)(.+)(\\/\\/)\n</code></pre>\n"}, {"tags": ["ruby", "regex", "validation"], "comments": [{"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 3, "creation_date": 1434546123, "post_id": 30892348, "comment_id": 49823947, "body": "Use one to five repeats of a group of exactly seven characters."}, {"owner": {"reputation": 153, "user_id": 4659414, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/138d424d0eec8db93cfcbeadb64ffe85?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Akhmetshin", "link": "https://stackoverflow.com/users/4659414/ed-akhmetshin"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1434546804, "post_id": 30892348, "comment_id": 49824543, "body": "@JonathanLeffler I didn&#39;t get it, could you write a code example?"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1434547115, "post_id": 30892348, "comment_id": 49824789, "body": "Like what @bro has just written as an answer.   I&#39;d rather not type regexes on an iPad keyboard; it is painful."}, {"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 2, "creation_date": 1434547287, "post_id": 30892348, "comment_id": 49824933, "body": "Is it mandatory to use a regex here? I would definitely use <code>String#scan</code> or <code>#split</code> if this is not an assignment"}, {"owner": {"reputation": 153, "user_id": 4659414, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/138d424d0eec8db93cfcbeadb64ffe85?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Akhmetshin", "link": "https://stackoverflow.com/users/4659414/ed-akhmetshin"}, "reply_to_user": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1434547306, "post_id": 30892348, "comment_id": 49824948, "body": "@JonathanLeffler Thank you!"}, {"owner": {"reputation": 153, "user_id": 4659414, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/138d424d0eec8db93cfcbeadb64ffe85?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Akhmetshin", "link": "https://stackoverflow.com/users/4659414/ed-akhmetshin"}, "reply_to_user": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1434547664, "post_id": 30892348, "comment_id": 49825260, "body": "@floum sorry for my stupid question, I am newbie, but these methods use regex, doesn&#39;t they?"}, {"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 0, "creation_date": 1434547772, "post_id": 30892348, "comment_id": 49825360, "body": "@Ed : Sorry, you&#39;re right, the result is just really easier to understand imho. See my answer below."}], "answers": [{"comments": [{"owner": {"reputation": 8450, "user_id": 3462319, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/89268869f7b0ba2846aecad61a51b458?s=128&d=identicon&r=PG&f=1", "display_name": "depperm", "link": "https://stackoverflow.com/users/3462319/depperm"}, "edited": false, "score": 0, "creation_date": 1434546853, "post_id": 30892678, "comment_id": 49824578, "body": "this doesn&#39;t seem to work with words of length 14, besides the first instance"}], "tags": [], "owner": {"reputation": 752, "user_id": 1863086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0489e31fdf0e6d14e57bf00ca1e843ee?s=128&d=identicon&r=PG", "display_name": "bro", "link": "https://stackoverflow.com/users/1863086/bro"}, "is_accepted": true, "score": 8, "last_activity_date": 1434546975, "last_edit_date": 1434546975, "creation_date": 1434546773, "answer_id": 30892678, "question_id": 30892348, "link": "https://stackoverflow.com/questions/30892348/find-a-string-of-multiplicy-length/30892678#30892678", "title": "Find a string of multiplicy length", "body": "<p>Something like this should do the trick</p>\n\n<pre><code>/\\b(?:[a-zA-Z0-9]{7}){1,5}\\b/\n</code></pre>\n\n<p>which matches strings of length 7,14,21,28,35</p>\n\n<p>Demo: <a href=\"https://regex101.com/r/eO4oG3/2\">https://regex101.com/r/eO4oG3/2</a></p>\n\n<p>EDIT: Another possibility would be using backreferences<br>\n<a href=\"http://www.regular-expressions.info/backref.html\">http://www.regular-expressions.info/backref.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 752, "user_id": 1863086, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0489e31fdf0e6d14e57bf00ca1e843ee?s=128&d=identicon&r=PG", "display_name": "bro", "link": "https://stackoverflow.com/users/1863086/bro"}, "edited": false, "score": 1, "creation_date": 1434548445, "post_id": 30893019, "comment_id": 49825925, "body": "\\w also contains underscore _  <a href=\"http://www.regular-expressions.info/posixbrackets.html\" rel=\"nofollow noreferrer\">regular-expressions.info/posixbrackets.html</a>"}, {"owner": {"reputation": 663663, "user_id": 15168, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/WtEI9.png?s=128&g=1", "display_name": "Jonathan Leffler", "link": "https://stackoverflow.com/users/15168/jonathan-leffler"}, "edited": false, "score": 0, "creation_date": 1434548989, "post_id": 30893019, "comment_id": 49826370, "body": "What is the benefit of the question mark?  Does it work the same if you omit it?"}, {"owner": {"reputation": 84, "user_id": 4950322, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mLVFTyzmBUU/AAAAAAAAAAI/AAAAAAAAAF0/WAA4x9mOzEk/photo.jpg?sz=128", "display_name": "nerdbeere", "link": "https://stackoverflow.com/users/4950322/nerdbeere"}, "edited": false, "score": 0, "creation_date": 1434631849, "post_id": 30893019, "comment_id": 49868801, "body": "yep, the ? is not needed here, my bad, I take it out. with the underscore, i did not know :/"}], "tags": [], "owner": {"reputation": 84, "user_id": 4950322, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-mLVFTyzmBUU/AAAAAAAAAAI/AAAAAAAAAF0/WAA4x9mOzEk/photo.jpg?sz=128", "display_name": "nerdbeere", "link": "https://stackoverflow.com/users/4950322/nerdbeere"}, "is_accepted": false, "score": 2, "last_activity_date": 1434632198, "last_edit_date": 1434632198, "creation_date": 1434547576, "answer_id": 30893019, "question_id": 30892348, "link": "https://stackoverflow.com/questions/30892348/find-a-string-of-multiplicy-length/30893019#30893019", "title": "Find a string of multiplicy length", "body": "<p>This one should work: </p>\n\n<pre><code>\\b([[:alnum:]]{7}){1,5}\\b\n</code></pre>\n\n<p>It matches every character of the class <code>[A-Za-z0-9]</code>, every sub-word of <code>length 7</code> and its product with <code>5</code>.</p>\n\n<p>e.g. </p>\n\n<pre><code>12345672234567\nabcdefghijklmn\n</code></pre>\n\n<p>but not <code>12345678</code></p>\n\n<p><strong>EDIT</strong>\nReplaced the \\w with [[:alnum]] as this POSIX class contains only letters and digits.</p>\n"}, {"tags": [], "owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "is_accepted": false, "score": 0, "last_activity_date": 1434547658, "creation_date": 1434547658, "answer_id": 30893044, "question_id": 30892348, "link": "https://stackoverflow.com/questions/30892348/find-a-string-of-multiplicy-length/30893044#30893044", "title": "Find a string of multiplicy length", "body": "<p>Assuming that you break words on non-word character (use <code>String#split</code> if breaking on spaces) :</p>\n\n<pre><code>text.scan(/\\w+/).select\u00a0{\u00a0|word| [7, 14, 21, 28].include?(word.size) }\n</code></pre>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user557597"}, "is_accepted": false, "score": 0, "last_activity_date": 1434556576, "creation_date": 1434556576, "answer_id": 30896612, "question_id": 30892348, "link": "https://stackoverflow.com/questions/30892348/find-a-string-of-multiplicy-length/30896612#30896612", "title": "Find a string of multiplicy length", "body": "<p>This is a better way, and the closest you can get using regex.  </p>\n\n<p><code>(?i)\\b(?=[a-z\\d]{1,34}\\b)(?:[a-z\\d]{7})+\\b</code></p>\n\n<p>Below:  <code>'34'</code> is max length variable, <code>'7'</code> is the multiple factor variable.<br>\nThey are independent of one another.<br>\nYou <em>can</em> construct this at runtime with any length and multiplicity variable values.</p>\n\n<pre><code> (?i)                         # No case\n \\b                           # Word boundary\n (?= [a-z\\d]{1,34} \\b )       # Max length = 34\n (?: [a-z\\d]{7} )+            # Multiple factor = 7\n \\b                           # Word boundary\n</code></pre>\n\n<p>Input:  </p>\n\n<pre><code>length=7  aaaaaaa   \nlength=14 bbbbbbbbbbbbbb\nlength=21 ccccccccccccccccccccc\nlength=28 dddddddddddddddddddddddddddd\nlength=35 eeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeeee\n</code></pre>\n\n<p>Output:  </p>\n\n<pre><code> **  Grp 0 -  ( pos 10 , len 7 ) \naaaaaaa  \n\n-------------\n\n **  Grp 0 -  ( pos 32 , len 14 ) \nbbbbbbbbbbbbbb  \n\n-------------\n\n **  Grp 0 -  ( pos 58 , len 21 ) \nccccccccccccccccccccc  \n\n-------------\n\n **  Grp 0 -  ( pos 91 , len 28 ) \ndddddddddddddddddddddddddddd  \n</code></pre>\n"}], "owner": {"reputation": 153, "user_id": 4659414, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/138d424d0eec8db93cfcbeadb64ffe85?s=128&d=identicon&r=PG&f=1", "display_name": "Ed Akhmetshin", "link": "https://stackoverflow.com/users/4659414/ed-akhmetshin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 30892678, "answer_count": 4, "score": 4, "last_activity_date": 1434632198, "creation_date": 1434545933, "last_edit_date": 1434547700, "question_id": 30892348, "link": "https://stackoverflow.com/questions/30892348/find-a-string-of-multiplicy-length", "title": "Find a string of multiplicy length", "body": "<p>I have to find every word whose length is a multiple of 7 and less than 35. I can use some pattern like </p>\n\n<pre><code>/\\b([a-zA-Z0-9]{7}|[a-zA-Z0-9]{14}|[a-zA-Z0-9]{21}|[a-zA-Z0-9]{28})\\b/\n</code></pre>\n\n<p>but I hope that there's some better solution like </p>\n\n<pre><code>[a-zA-Z0-9]{7|14|21|28} \n</code></pre>\n\n<p>or even like </p>\n\n<pre><code>[a-zA-Z0-9]{7*k}\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 157, "user_id": 3978875, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2deb988f0a74199102f2889d36472c61?s=128&d=identicon&r=PG&f=1", "display_name": "ajnabi", "link": "https://stackoverflow.com/users/3978875/ajnabi"}, "edited": false, "score": 0, "creation_date": 1434548384, "post_id": 30893248, "comment_id": 49825875, "body": "Ah... you know what... I did, but I see now I had a syntax error and assumed it was because the vendor directory was more than two dirs deep and I needed another way to address deeper directories.  Thanks"}], "tags": [], "owner": {"reputation": 714, "user_id": 2830332, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d5c3a1354b53442fe342b2189e76a7a?s=128&d=identicon&r=PG", "display_name": "jpalumickas", "link": "https://stackoverflow.com/users/2830332/jpalumickas"}, "is_accepted": true, "score": 0, "last_activity_date": 1434548136, "creation_date": 1434548136, "answer_id": 30893248, "question_id": 30892271, "link": "https://stackoverflow.com/questions/30892271/ruby-gem-build-how-do-i-include-vendor-directory-in-gem/30893248#30893248", "title": "ruby: gem build... how do i include vendor directory in gem?", "body": "<p>Did you tried like this ?</p>\n\n<pre><code>Dir['vendor/**/*']\n</code></pre>\n"}], "owner": {"reputation": 157, "user_id": 3978875, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/2deb988f0a74199102f2889d36472c61?s=128&d=identicon&r=PG&f=1", "display_name": "ajnabi", "link": "https://stackoverflow.com/users/3978875/ajnabi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "accepted_answer_id": 30893248, "answer_count": 1, "score": 0, "last_activity_date": 1434548210, "creation_date": 1434545722, "last_edit_date": 1434548210, "question_id": 30892271, "link": "https://stackoverflow.com/questions/30892271/ruby-gem-build-how-do-i-include-vendor-directory-in-gem", "title": "ruby: gem build... how do i include vendor directory in gem?", "body": "<p>I run <code>gem build mygem.gemspec</code> and the vendor dir is not included. How do I include it in my gem? I am assuming that I need the vendor dir included if I want to package all the dependencies with my gem. </p>\n\n<p>I think it has to do with <code>Dir['vendor/**']</code>... I know that is wrong. </p>\n\n<p>My gemspec file:</p>\n\n<pre><code>lib = File.expand_path('../lib', __FILE__)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\nrequire 'fpa/fix_filename/version'\n\nGem::Specification.new do |spec|\n  spec.name          = \"fpa-fix_filename\"\n  spec.version       = Fpa::FixFilename::VERSION\n  spec.authors       = [\"na\"]\n  spec.email         = [\"na\"]\n\n  spec.summary       = %q{A Class to fix bad file names -- includes a binary for command line use.}\n  spec.description   = %q{}\n  spec.license       = \"MIT\"\n\n  spec.files = Dir['lib/fpa/**/*'] + Dir['bin/*'] + Dir['vendor/**']\n\n  spec.bindir        = \"bin\"\n  spec.executables   = spec.files.grep(%r{^bin/}) { |f| File.basename(f) }\n\n  spec.require_paths = [\"lib\"]\n\n  spec.add_runtime_dependency \"micro-optparse\", \"~&gt; 1.2.0\"\n\n  spec.add_development_dependency \"bundler\", \"~&gt; 1.8\"\n  spec.add_development_dependency \"rake\", \"~&gt; 10.0\"\nend\n</code></pre>\n"}, {"tags": ["javascript", "jquery", "ruby-on-rails", "ruby", "amazon-s3"], "comments": [{"owner": {"reputation": 1317, "user_id": 3165718, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/97a0fd9376c9ef1f0f3fcd062a8d999c?s=128&d=identicon&r=PG&f=1", "display_name": "Kamesh", "link": "https://stackoverflow.com/users/3165718/kamesh"}, "edited": false, "score": 0, "creation_date": 1434546643, "post_id": 30892255, "comment_id": 49824403, "body": "Why can&#39;t you do that in your server?"}, {"owner": {"reputation": 1909, "user_id": 2225619, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/286a6578091bb7b170a254eb8b5c100d?s=128&d=identicon&r=PG", "display_name": "Capricorn", "link": "https://stackoverflow.com/users/2225619/capricorn"}, "edited": false, "score": 0, "creation_date": 1434547076, "post_id": 30892255, "comment_id": 49824758, "body": "The client side script just sends data to the server, including some filename &quot;suggestion&quot;. You need to perform the (re)naming in your server-side script and filter out problem-causing signs."}, {"owner": {"reputation": 2786, "user_id": 2417848, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5841bf559f51b262e1be72f3820ff339?s=128&d=identicon&r=PG", "display_name": "Ka&#235;ris", "link": "https://stackoverflow.com/users/2417848/ka%c3%abris"}, "edited": false, "score": 0, "creation_date": 1434550411, "post_id": 30892255, "comment_id": 49827496, "body": "I can&#39;t do that in my server because it&#39;s a &quot;direct upload&quot;, I followed this doc from heroku to perform the upload <a href=\"https://devcenter.heroku.com/articles/direct-to-s3-image-uploads-in-rails\" rel=\"nofollow noreferrer\">https://devcenter.heroku.com/articles/direct-to-s3-image-upl&zwnj;&#8203;oads-in-rails</a>"}, {"owner": {"reputation": 479, "user_id": 3816180, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bdbdcb1ab5fa93bafb68fbbc58e7f651?s=128&d=identicon&r=PG&f=1", "display_name": "Jonesy", "link": "https://stackoverflow.com/users/3816180/jonesy"}, "edited": false, "score": 3, "creation_date": 1459490666, "post_id": 30892255, "comment_id": 60319100, "body": "@Ka&#235;ris did you ever find a solution to this?"}], "answers": [{"tags": [], "owner": {"reputation": 71, "user_id": 1055468, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b36cd736c906455db541f7c8e2478145?s=128&d=identicon&r=PG", "display_name": "Diego Scataglini", "link": "https://stackoverflow.com/users/1055468/diego-scataglini"}, "is_accepted": true, "score": 0, "last_activity_date": 1470246719, "creation_date": 1470246719, "answer_id": 38750534, "question_id": 30892255, "link": "https://stackoverflow.com/questions/30892255/jquery-file-upload-rename-file-before-upload/38750534#38750534", "title": "jQuery-File-Upload rename file before upload", "body": "<p>In the add: callback change your s3 signature for the 'key' from '/somefolder/${filename}' to '/somefolder/your-new-name'</p>\n\n<pre><code>s3_signatures = { \n                  key: '/somefolder/${filename}',\n                  \u2026\n                }\n\n$('.fileupload').fileupload({\n  url: url,\n  type: 'POST',\n  formData: s3_signatures, // adding signature for S3\n  add: function(e, data){\n    s3_signatures['key'] = '/somefolder/your-new-name';\n    data.formData = s3_signatures;\n    data.submit();\n  } \u2026\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6902214, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/736c7de511c534413d66c66b76389efb?s=128&d=identicon&r=PG&f=1", "display_name": "Matt S", "link": "https://stackoverflow.com/users/6902214/matt-s"}, "is_accepted": false, "score": 2, "last_activity_date": 1491506794, "creation_date": 1491506794, "answer_id": 43264135, "question_id": 30892255, "link": "https://stackoverflow.com/questions/30892255/jquery-file-upload-rename-file-before-upload/43264135#43264135", "title": "jQuery-File-Upload rename file before upload", "body": "<p>I ran into a similar challenge after following the Heroku tutorial.  I wanted to remove spaces from the filename and add a folder prefix based on the current project.  In order to change the filename before uploading to S3, I added a <a href=\"https://github.com/blueimp/jQuery-File-Upload/wiki/Options#submit\" rel=\"nofollow noreferrer\">submit callback</a> where I modified the name on the client side.  </p>\n\n<pre><code>fileInput.fileupload({\n    ...\n    submit: function (e, data) {\n        // Get the original filename\n        var fileName = data.originalFiles[0].name\n        // Get the prefix from the form \n        var keyPrefix = form.data('key-start')\n        // Combine the prefix and the original filename with start/end whitespace removed\n        var fullFileName = keyPrefix + fileName.trim();\n        // Replace whitespaces with underscores\n        // At this step you could replace other special characters as well\n        var newFileName = fullFileName.replace(/\\s+/g, '_');\n        // Update the form data with the new key value\n        $(form.data('form-data')).attr(\"key\", newFileName);\n        // Set the form data\n        data.formData = form.data('form-data');\n    },\n    ...\n});\n</code></pre>\n\n<p>Since I changed the filename, I needed to ensure that S3 knows that as well.  The tutorial suggested <code>key</code> value in the controller <code>set_s3_direct_post</code> method is:</p>\n\n<pre><code>key: \"uploads/#{SecureRandom.uuid}/${filename}\"\n</code></pre>\n\n<p>The <code>key</code> method requires that the filename match what is provided when the post URL is created (which it wouldn't because I'm not using the dynamic <code>${filename}</code> value and I don't know the final filename when the direct post URL is created to specify it). I used the <code>key_starts_with</code> method so that I could specify the project folder prefix (with spaces removed) and S3 would just evaluate that for a match:</p>\n\n<pre><code>key_starts_with: \"#{(current_project.name).strip.split(' ').join('_')}/\"\n</code></pre>\n\n<p>My final <code>set_s3_direct_post</code> method was:</p>\n\n<pre><code>def set_s3_direct_post\n    @s3_direct_post = S3_BUCKET.presigned_post(key_starts_with: \"#{(current_project.name).strip.split(' ').join('_')}/\", success_action_status: '201', acl: 'public-read')\nend\n</code></pre>\n\n<p>More details on <code>key_starts_with</code> can be found in the <a href=\"http://docs.aws.amazon.com/sdkforruby/api/Aws/S3/PresignedPost.html#key_starts_with-instance_method\" rel=\"nofollow noreferrer\">AWS SDK for Ruby</a>.</p>\n\n<p>For reference, here is my form with the added <code>key-start</code> data value:</p>\n\n<pre><code>&lt;%= simple_form_for @asset, html: {class: 'directUpload new_asset', data: { 'form-data' =&gt; (@s3_direct_post.fields), 'key-start' =&gt; \"#{current_project.name}/#{SecureRandom.hex(4)}_\" , 'url' =&gt; @s3_direct_post.url, 'host' =&gt; URI.parse(@s3_direct_post.url).host  } } , :url =&gt; project_assets_path(current_project) do |f| %&gt;\n    &lt;%= f.input :name %&gt;\n    &lt;%= f.input :file, as: :file %&gt;\n    &lt;%= f.button :submit, \"Add File\", class: \"addFileButton\" %&gt;\n&lt;% end %&gt; \n</code></pre>\n\n<p>In my case, I was only using this for single file uploads and only wanted to ensure spaces were removed from the filename (I was one of two users of this upload form, so special characters or other issues with the filename weren't a concern).</p>\n"}], "owner": {"reputation": 2786, "user_id": 2417848, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/5841bf559f51b262e1be72f3820ff339?s=128&d=identicon&r=PG", "display_name": "Ka&#235;ris", "link": "https://stackoverflow.com/users/2417848/ka%c3%abris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 6188, "favorite_count": 1, "accepted_answer_id": 38750534, "answer_count": 2, "score": 5, "last_activity_date": 1491506794, "creation_date": 1434545697, "question_id": 30892255, "link": "https://stackoverflow.com/questions/30892255/jquery-file-upload-rename-file-before-upload", "title": "jQuery-File-Upload rename file before upload", "body": "<p>I'm using the lib <a href=\"https://github.com/blueimp/jQuery-File-Upload\" rel=\"noreferrer\">jQuery-File-Upload</a> to upload a file on my aws s3 bucket. \nMy problem is I would like to rename my file before the upload because if there is special characters on the filename, the url returned by aws is not correct and I can't open it in my controller rails.</p>\n\n<p>Is there a way to override a function in the lib to rename the file?</p>\n\n<p>Thanks,</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1023, "user_id": 1624032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe4490e788d1dff66dd5fbf48049849?s=128&d=identicon&r=PG", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1624032/pablo"}, "edited": false, "score": 0, "creation_date": 1434556724, "post_id": 30892090, "comment_id": 49832312, "body": "What does <code>@posts</code> contain? Can you execute it in a console and show us the generated SQL query?"}, {"owner": {"reputation": 73, "user_id": 2506973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ea415fbce61d21e1ab1d756cef54da8?s=128&d=identicon&r=PG&f=1", "display_name": "Artyom Gunkin", "link": "https://stackoverflow.com/users/2506973/artyom-gunkin"}, "reply_to_user": {"reputation": 1023, "user_id": 1624032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe4490e788d1dff66dd5fbf48049849?s=128&d=identicon&r=PG", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1624032/pablo"}, "edited": false, "score": 0, "creation_date": 1434627558, "post_id": 30892090, "comment_id": 49865761, "body": "@Pablo, I add query above"}, {"owner": {"reputation": 339, "user_id": 4515528, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-TfEIc2wwaJI/AAAAAAAAAAI/AAAAAAAAAsM/sQFC1KjoZtA/photo.jpg?sz=128", "display_name": "pauloancheta", "link": "https://stackoverflow.com/users/4515528/pauloancheta"}, "edited": false, "score": 0, "creation_date": 1435178063, "post_id": 30892090, "comment_id": 50097184, "body": "On your SQL query, it says <code>visible: false</code>. that might be the reason why you don&#39;t see anything? if not, could you post your errors?"}], "answers": [{"tags": [], "owner": {"reputation": 1, "user_id": 5610492, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206966518175437/picture?type=large", "display_name": "Mich Crisologo", "link": "https://stackoverflow.com/users/5610492/mich-crisologo"}, "is_accepted": false, "score": 0, "last_activity_date": 1448590252, "creation_date": 1448590252, "answer_id": 33949367, "question_id": 30892090, "link": "https://stackoverflow.com/questions/30892090/socialization-gem-getting-posts-from-users-i-follow-doesnt-works/33949367#33949367", "title": "Socialization gem, getting posts from users I follow doesn&#39;t works", "body": "<p>I think it should not be :\n@posts = Post.where(id: current_user.followers(User).map(&amp;:id));</p>\n\n<p>but\n@posts = Post.where(id: current_user.followees(User).map(&amp;:id));</p>\n\n<p>From the docs :\nWhat items are you following (given that an Item model is followed)?\nuser.followees(Item)</p>\n"}], "owner": {"reputation": 73, "user_id": 2506973, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/9ea415fbce61d21e1ab1d756cef54da8?s=128&d=identicon&r=PG&f=1", "display_name": "Artyom Gunkin", "link": "https://stackoverflow.com/users/2506973/artyom-gunkin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 128, "favorite_count": 1, "answer_count": 1, "score": 2, "last_activity_date": 1448590252, "creation_date": 1434545311, "last_edit_date": 1434627478, "question_id": 30892090, "link": "https://stackoverflow.com/questions/30892090/socialization-gem-getting-posts-from-users-i-follow-doesnt-works", "title": "Socialization gem, getting posts from users I follow doesn&#39;t works", "body": "<p>I want to get list of users's post, which I follow.\nIn conrtoller I write:</p>\n\n<pre><code>@posts = Post.where(id: current_user.followers(User).map(&amp;:id));\n</code></pre>\n\n<p>In view (I use haml):</p>\n\n<pre><code>- @posts.each do |post|\n  = render partial: 'users/post', locals: { post: post, user: @user}\n</code></pre>\n\n<p><code>_post.html.haml</code>:</p>\n\n<pre><code>.post-title\n  %img.img-rounded.post-image{:src =&gt; \"#{@user.avatar.url}\"}/\n  %h4.post-name\n    = @user.first_name + ' ' + @user.last_name\n  .post-date= post.created_at.strftime('%d %b - %k:%M')\n.post-content\n</code></pre>\n\n<p>I followed 2 users, which have posts, but I see nothing at all. And how to add current_user's posts to all post?</p>\n\n<p><strong>UPD</strong>\nActiveRecord generated SQL queries in the console</p>\n\n<pre><code>&lt;Post id: 1, title: \"First dream\", content: \"This dream about nothing\", visible: false, date: \"2015-06-18 09:37:00\", created_at: \"2015-06-18 09:38:17\", updated_at: \"2015-06-18 09:38:17\", user_id: 1&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "shuffle"], "answers": [{"tags": [], "owner": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "is_accepted": true, "score": 2, "last_activity_date": 1434545320, "creation_date": 1434545320, "answer_id": 30892096, "question_id": 30892047, "link": "https://stackoverflow.com/questions/30892047/ruby-koans-shuffle-what-is-happening/30892096#30892096", "title": "ruby koans shuffle what is happening", "body": "<p>There is no method named <code>to_a_shuffle</code>. You need to apply <code>to_a</code> to a range then <code>shuffle</code> that array.</p>\n\n<pre><code>@values = (1..number).to_a.shuffle\n</code></pre>\n"}], "owner": {"reputation": 15, "user_id": 4646739, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/64f5ccf0077b9bf0800076d57d31e0e5?s=128&d=identicon&r=PG&f=1", "display_name": "reivax7", "link": "https://stackoverflow.com/users/4646739/reivax7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 98, "favorite_count": 0, "accepted_answer_id": 30892096, "answer_count": 1, "score": 0, "last_activity_date": 1434572879, "creation_date": 1434545176, "last_edit_date": 1434572879, "question_id": 30892047, "link": "https://stackoverflow.com/questions/30892047/ruby-koans-shuffle-what-is-happening", "title": "ruby koans shuffle what is happening", "body": "<p>Can't figure out this one of the <a href=\"http://rubykoans.com/\" rel=\"nofollow\">ruby koans</a>. Maybe someone could help?<code>The answers you seek...\n  undefined method</code>to_a_shuffle' for 1..5:Range</p>\n\n<p>Please meditate on the following code:\n  /Users/nicholaskelly/koans/koans/about_dice_project.rb:12:in <code>roll'\n  /Users/nicholaskelly/koans/koans/about_dice_project.rb:24:in</code>test_rolling_the_dice_returns_a_set_of_integers_between_1_and_6'`</p>\n\n<p>and here is about_dice_project.rb12:</p>\n\n<pre><code>@values = (1..number).to_a_shuffle\n</code></pre>\n"}, {"tags": ["ruby", "local-variables"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1434542859, "post_id": 30890521, "comment_id": 49821367, "body": "This is most likely an XY-question."}, {"owner": {"reputation": 602, "user_id": 3480664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e63216cd04fe6ca24c1cec19e88e84?s=128&d=identicon&r=PG", "display_name": "Michel Antoine", "link": "https://stackoverflow.com/users/3480664/michel-antoine"}, "edited": false, "score": 0, "creation_date": 1434547850, "post_id": 30890521, "comment_id": 49825436, "body": "I don&#39;t think you can create a local variable in the scope of the each_with_index method that will persist when this scope has ended."}], "answers": [{"comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 1, "creation_date": 1434541953, "post_id": 30890705, "comment_id": 49820671, "body": "<code>instance_variable_set</code> sets an instance variable, not a local variable."}], "tags": [], "owner": {"reputation": 176, "user_id": 2625310, "user_type": "registered", "profile_image": "https://graph.facebook.com/100000669220514/picture?type=large", "display_name": "Bejan George", "link": "https://stackoverflow.com/users/2625310/bejan-george"}, "is_accepted": false, "score": 0, "last_activity_date": 1434541721, "creation_date": 1434541721, "answer_id": 30890705, "question_id": 30890521, "link": "https://stackoverflow.com/questions/30890521/assigning-a-local-variable-whose-name-is-given-as-a-string/30890705#30890705", "title": "Assigning a local variable whose name is given as a string", "body": "<p>Try using <a href=\"http://apidock.com/ruby/Object/instance_variable_set\" rel=\"nofollow\">instance_variable_set</a> </p>\n"}, {"comments": [{"owner": {"reputation": 627, "user_id": 4880148, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09c41b8c824b6e23d9a8c6eb9ab4cb91?s=128&d=identicon&r=PG&f=1", "display_name": "treeseal7", "link": "https://stackoverflow.com/users/4880148/treeseal7"}, "edited": false, "score": 0, "creation_date": 1434543304, "post_id": 30890769, "comment_id": 49821726, "body": "thanks, like i said the example was simplified, so this solution isn&#39;t completely suitable. However, whether it&#39;s the right way to do it or not, I&#39;m guessing that there isn&#39;t a way of doing what I&#39;m looking for? I&#39;m guessing it&#39;s not possible to use a string to define a variable name? I tried using eval but couldn&#39;t get it to work.. I can call a variable using eval but not define one..."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1434548260, "post_id": 30890769, "comment_id": 49825779, "body": "Defining a variable in <code>eval</code> <i>does</i> work. It is defined inside of the binding of the eval invocation. It is not defined outside of it. That&#39;s just how local variables work."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": false, "score": 0, "last_activity_date": 1434541887, "creation_date": 1434541887, "answer_id": 30890769, "question_id": 30890521, "link": "https://stackoverflow.com/questions/30890521/assigning-a-local-variable-whose-name-is-given-as-a-string/30890769#30890769", "title": "Assigning a local variable whose name is given as a string", "body": "<p>What you are trying to do (dynamically creating local variables) doesn't make a lot of sense to me. Why don't you just use an array.</p>\n\n<pre><code>a1=[1,2,3,4,5]\na2=[1,2,3,4,5]\n\na1.zip(a2).inject([]) { |b, (x1, x2)| b &lt;&lt; x1 + x2 }\n\n=&gt; [2, 4, 6, 8, 10]\n</code></pre>\n\n<p>You will achieve the same result. The item in position <code>b[0]</code> will be the sum of <code>a1[0] + a2[0]</code>.</p>\n\n<p>There is no easy way to dynamically define a local variable exactly because it does not make a lot of sense. In fact, you will have hard time trying to use those variables anywhere because your code will depend on runtime generated variables. </p>\n\n<p>In other words, how would you ever be able to use <code>b4</code>, if you don't even know if <code>b4</code> was ever generated. That's why an array is more convenient, you can know the size of the array and access all its items.</p>\n\n<p>You can generate a local variable using <code>eval</code>, but as I said, it's definitely not the best approach.</p>\n"}, {"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 0, "last_activity_date": 1434548732, "creation_date": 1434548732, "answer_id": 30893499, "question_id": 30890521, "link": "https://stackoverflow.com/questions/30890521/assigning-a-local-variable-whose-name-is-given-as-a-string/30893499#30893499", "title": "Assigning a local variable whose name is given as a string", "body": "<p>You can use <code>Binding#local_variable_set</code> to set <em>already existing</em> local variables. However, when you use it to set a <em>new</em> local variable (IOW to define one), the new local variable will be defined <em>inside</em> the <code>Binding</code> object but not the outside <code>Binding</code> you created it from.</p>\n\n<p>The same thing happens with <code>eval</code>. Up to Ruby 1.8, <code>eval</code> leaked local variables to the outside scope, but that leak was plugged with Ruby 1.9.</p>\n\n<p>In short, what you want is not possible.</p>\n"}, {"tags": [], "owner": {"reputation": 602, "user_id": 3480664, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b6e63216cd04fe6ca24c1cec19e88e84?s=128&d=identicon&r=PG", "display_name": "Michel Antoine", "link": "https://stackoverflow.com/users/3480664/michel-antoine"}, "is_accepted": false, "score": 0, "last_activity_date": 1434549233, "creation_date": 1434549233, "answer_id": 30893697, "question_id": 30890521, "link": "https://stackoverflow.com/questions/30890521/assigning-a-local-variable-whose-name-is-given-as-a-string/30893697#30893697", "title": "Assigning a local variable whose name is given as a string", "body": "<p>You have to use a <code>Binding</code> object.</p>\n\n<pre><code>a1=[1,2,3,4,5]\na2=[1,2,3,4,5]\nb = binding()\na1.each_with_index{ |a, i| eval(\"b#{i + 1} = #{a + a2[i]}\", b) }\n(1..5).each do |i|\n    eval(\"puts b#{i}\", b)   \nend\n</code></pre>\n\n<p>Now that the local variable is set you will be able to access it through that binding.</p>\n\n<p>You can see an example <a href=\"http://ideone.com/myY9m6\" rel=\"nofollow\">HERE</a></p>\n"}], "owner": {"reputation": 627, "user_id": 4880148, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/09c41b8c824b6e23d9a8c6eb9ab4cb91?s=128&d=identicon&r=PG&f=1", "display_name": "treeseal7", "link": "https://stackoverflow.com/users/4880148/treeseal7"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 65, "favorite_count": 0, "answer_count": 4, "score": -1, "last_activity_date": 1434549233, "creation_date": 1434541163, "last_edit_date": 1434542634, "question_id": 30890521, "link": "https://stackoverflow.com/questions/30890521/assigning-a-local-variable-whose-name-is-given-as-a-string", "title": "Assigning a local variable whose name is given as a string", "body": "<p>Within this itteration:</p>\n\n<pre><code>a1=[1,2,3,4,5]\na2=[1,2,3,4,5]\na1.each_with_index{|a, i| ... = a + a2[i]}\n</code></pre>\n\n<p>I want to assign to different local variables <code>b1</code>, <code>b2</code>, ..., <code>b5</code>, each per iteration to get:</p>\n\n<pre><code>b1 # =&gt; 2\nb2 # =&gt; 4\nb3 # =&gt; 6\nb4 # =&gt; 8\nb5 # =&gt; 10\n</code></pre>\n\n<p>I tried:</p>\n\n<pre><code>a1.each_with_index{|a, i| ('b' + i.to_s) = a + a2[i]}\n</code></pre>\n\n<p>but this doesn't work. Anyone got any ideas?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 8645, "user_id": 368167, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/c9596f533dcd61ecf75f150b0d9997b3?s=128&d=identicon&r=PG", "display_name": "Tamer Shlash", "link": "https://stackoverflow.com/users/368167/tamer-shlash"}, "edited": false, "score": 0, "creation_date": 1434539526, "post_id": 30889765, "comment_id": 49819000, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/5189161/changing-every-value-in-a-hash-in-ruby\">Changing every value in a hash in Ruby</a>"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1434544208, "post_id": 30889765, "comment_id": 49822501, "body": "You could write <code>hash.merge(hash) { |*_,v| v+1 }</code>."}], "answers": [{"comments": [{"owner": {"reputation": 6881, "user_id": 477047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Qh2bO.gif?s=128&g=1", "display_name": "David Unric", "link": "https://stackoverflow.com/users/477047/david-unric"}, "edited": false, "score": 0, "creation_date": 1434549912, "post_id": 30890397, "comment_id": 49827089, "body": "Why the explicit <code>self</code> ? Btw. here is another slightly faster solution: <code>def values_update  inject([]) {|ac,(k,v)| ac &lt;&lt; [k, yield(v)]  }.to_h   end</code>. Also processed only once, faster on my config CRuby 2.2.2 and JRuby 9.0.0.0pre2 on Linux x86_64."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 6881, "user_id": 477047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Qh2bO.gif?s=128&g=1", "display_name": "David Unric", "link": "https://stackoverflow.com/users/477047/david-unric"}, "edited": false, "score": 1, "creation_date": 1434552216, "post_id": 30890397, "comment_id": 49828863, "body": "@DavidUnric It\u2019s a matter of habit. I addicted to specify <code>self</code>with functions named in too wide fashion like <code>keys</code> and <code>values</code>. Silly addiction, though. Will remove them from an answer. I am surprised, that creating new <code>Array</code> instance is faster than <code>map</code>: it sounds like an implementation bug. BTW, your implementation should go even faster if it would create a hash in <code>inject</code>."}, {"owner": {"reputation": 6881, "user_id": 477047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Qh2bO.gif?s=128&g=1", "display_name": "David Unric", "link": "https://stackoverflow.com/users/477047/david-unric"}, "edited": false, "score": 0, "creation_date": 1434554454, "post_id": 30890397, "comment_id": 49830640, "body": "Good point, feeling silly now: <code>inject({}) {|ac,(k,v)| ac[k]=yield(v);ac }</code>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 3, "last_activity_date": 1434552226, "last_edit_date": 1434552226, "creation_date": 1434540880, "answer_id": 30890397, "question_id": 30889765, "link": "https://stackoverflow.com/questions/30889765/cleaner-way-of-mapping-a-hash-in-ruby/30890397#30890397", "title": "Cleaner way of mapping a hash in ruby", "body": "<p>AFAIK, this does not exist in the <code>Hash</code> out of Ruby box, but here is a simple monkeypatch to achieve what you want:</p>\n\n<pre><code>\u25b6 class Hash\n\u25b7   def hash_map &amp;cb\n\u25b7     keys.zip(values.map(&amp;cb)).to_h\n\u25b7   end  \n\u25b7 end\n</code></pre>\n\n<p>There are more readable ways to achieve the requested functionality, but this one uses the built-in <code>map</code> for values <em>once</em>, pretending to be the fastest implementation that comes into my mind.</p>\n\n<pre><code>\u25b6 h = {a: 1, b: 2}\n#\u21d2 { :a =&gt; 1, :b =&gt; 2 }\n\u25b6 h.hash_map do |v| v + 5 end\n#\u21d2 { :a =&gt; 6, :b =&gt; 7 }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1434541341, "post_id": 30890420, "comment_id": 49820226, "body": "<code>Array</code> is <a href=\"http://ruby-doc.org/core-2.2.2/Array.html#method-i-map\" rel=\"nofollow noreferrer\">reimplementing</a> <code>#map</code>, I don\u2019t see any problem in reimplementing <code>map</code> in <code>Hash</code>, besides that OP wants to add new behavioral feature, rather than to overload existing one. So, this is definitely about extending <code>Hash</code> class, not about overloading a default collection behavior."}, {"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1434541753, "post_id": 30890420, "comment_id": 49820498, "body": "Yes, there are a few overrides of the <code>Enumerable</code> methods, for performance reasons. However, they are honoring the contract of <code>Enumerable</code>. Adding something like <code>map_values</code> and <code>map_keys</code> is perfectly possible, all it requires is a feature request, and enough support by the community and the designers."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1434542133, "post_id": 30890420, "comment_id": 49820804, "body": "There is no way to add <code>map_{values,keys}</code> to <code>Enumerable</code>, since there is no notion of <code>keys</code> and <code>values</code> in <code>Enumerable</code>. That said, I would monkeypatch <code>Hash</code> class myself and use it on my own pleasure. Anyway, thanks for a great tour into collection contracts in different languages."}, {"owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "edited": false, "score": 0, "creation_date": 1434543268, "post_id": 30890420, "comment_id": 49821694, "body": "Thank you for showing how this works in detail, that&#39;s the explanation I&#39;ve been looking for."}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 4, "last_activity_date": 1434540941, "creation_date": 1434540941, "answer_id": 30890420, "question_id": 30889765, "link": "https://stackoverflow.com/questions/30889765/cleaner-way-of-mapping-a-hash-in-ruby/30890420#30890420", "title": "Cleaner way of mapping a hash in ruby", "body": "<p>That's just the way Ruby's collection framework works. There is <em>one</em> <code>map</code> method in <code>Enumerable</code> which doesn't know anything about hashes or arrays or lists or sets or trees or streams or whatever else you may come up with. All it knows is that there is a method named <code>each</code> which will <code>yield</code> <em>one</em> single element per iteration. That's it.</p>\n\n<p>Note that this is the same way the collections frameworks of Java and .NET work, too. All collections operations always return the same type: in .NET, that's <code>IEnumerable</code>, in Ruby, that's <code>Array</code>.</p>\n\n<p>Another design approach is that collections operations are type-preserving, i.e. mapping a set will produce a set, etc. That's the way it is done in Smalltalk, for example. However, in Smalltalk, but there it is achieved by copy&amp;pasting almost identical methods into each and every different collection. I.e. if you want to implement your own collection, in Ruby, you only have to implement <code>each</code>, and you get everything else for free, whereas in Smalltalk, you have to implement every single collection method separately. (In Ruby, that would be over 40 methods.)</p>\n\n<p>Scala is the first language that managed to provide a collections framework with type-preserving operations without code duplication, but it took until Scala 2.8 (released in 2010) to figure that out. (The key is the idea of collection builders.) Ruby's collections library was designed in 1993, 17 years before we had figured out how to do type-preserving collections operations without code duplication. Plus, Scala depends heavily on its sophisticated static type system and type-level metaprogramming to find the correct collection builder at compile time. This is not necessary for the scheme to work, but having to look up the builder for every operation at runtime may incur a hefty runtime cost.</p>\n\n<p>What you <em>could</em> do is add new methods that are not part of the standard <code>Enumerable</code> protocol, for example similar to Scala's <code>mapValues</code> and <code>mapKeys</code>.</p>\n"}], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 167, "favorite_count": 0, "accepted_answer_id": 30890420, "answer_count": 2, "score": 3, "last_activity_date": 1434552226, "creation_date": 1434539181, "last_edit_date": 1434544248, "question_id": 30889765, "link": "https://stackoverflow.com/questions/30889765/cleaner-way-of-mapping-a-hash-in-ruby", "title": "Cleaner way of mapping a hash in ruby", "body": "<p>Let's assume I need to do a trivial task on every element of a <code>Hash</code>, e.g. increment its value by <code>1</code>, or change value into an array containing that value. I've been doing it like this</p>\n\n<pre><code>hash.map{ |k, v| [k, v+1] }.to_h\n</code></pre>\n\n<p><code>v+1</code> is just an example, it can be anything.</p>\n\n<p>Is there any cleaner way to do this? I don't really like mapping a hash to an array of 2-sized arrays, then remembering to convert it to hash again.</p>\n\n<p>Example of what might be nicer:</p>\n\n<pre><code>hash.hash_map{ |v| v+1 }\n</code></pre>\n\n<p>This way some thing like string conversion (<code>to_s</code>) might be simplified to</p>\n\n<pre><code>hash.hash_map(&amp;:to_s)\n</code></pre>\n\n<p>Duplication clarification:\nI'm not looking for <code>Hash[...]</code> or <code>.to_h</code>, I'm asking if anyone knows a more compact and cleaner solution.</p>\n"}, {"tags": ["javascript", "css", "ruby", "xpath", "nokogiri"], "answers": [{"comments": [{"owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "edited": false, "score": 0, "creation_date": 1434757670, "post_id": 30890471, "comment_id": 49931821, "body": "Welcome to Stack Overflow. It&#39;s up to the OP to select the answer that best fits their needs. They have the option of changing their selection for a short while. Being first means nothing, being the better answer in the mind of the OP is what is important."}], "tags": [], "owner": {"reputation": 464, "user_id": 3597524, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93146aea7d2a3644cf11e4a2e51ff2e1?s=128&d=identicon&r=PG&f=1", "display_name": "Mourad", "link": "https://stackoverflow.com/users/3597524/mourad"}, "is_accepted": false, "score": 1, "last_activity_date": 1434541063, "creation_date": 1434541063, "answer_id": 30890471, "question_id": 30889512, "link": "https://stackoverflow.com/questions/30889512/how-to-reject-specify-html-tags-by-using-css-or-xpath-selector/30890471#30890471", "title": "How to reject specify HTML tags by using css or xpath selector", "body": "<p>Try these lines:</p>\n\n<pre><code>doc.search('.//style').remove\ndoc.search('.//script').remove\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 47898, "user_id": 966023, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/917fcb4327159076f752c0c3c3fddfbb?s=128&d=identicon&r=PG", "display_name": "pguardiario", "link": "https://stackoverflow.com/users/966023/pguardiario"}, "is_accepted": true, "score": 1, "last_activity_date": 1434590735, "creation_date": 1434590735, "answer_id": 30905063, "question_id": 30889512, "link": "https://stackoverflow.com/questions/30889512/how-to-reject-specify-html-tags-by-using-css-or-xpath-selector/30905063#30905063", "title": "How to reject specify HTML tags by using css or xpath selector", "body": "<p>Simpler is just:</p>\n\n<pre><code>doc.search('style,script').remove\n</code></pre>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 181, "favorite_count": 0, "accepted_answer_id": 30905063, "answer_count": 2, "score": 1, "last_activity_date": 1434590735, "creation_date": 1434538509, "question_id": 30889512, "link": "https://stackoverflow.com/questions/30889512/how-to-reject-specify-html-tags-by-using-css-or-xpath-selector", "title": "How to reject specify HTML tags by using css or xpath selector", "body": "<p>I want to remove <code>style</code> and <code>script</code> tags and the contents of them by using css or xpath selector.</p>\n\n<p>This is a example HTML:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;test&lt;/title&gt;\n    &lt;style&gt;\n      // style\n    &lt;/style&gt;\n    &lt;script&gt;\n      /* some script */\n    &lt;/script&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p&gt;text&lt;/p&gt;\n    &lt;script&gt;\n      /* some script */\n    &lt;/script&gt;\n    &lt;div&gt;foo&lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I want to get a HTML like this:</p>\n\n<pre><code>&lt;html&gt;\n  &lt;head&gt;\n    &lt;title&gt;test&lt;/title&gt;\n  &lt;/head&gt;\n  &lt;body&gt;\n    &lt;p&gt;text&lt;/p&gt;\n    &lt;div&gt;foo&lt;/div&gt;\n  &lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n\n<p>I thought I can get HTML that doesn't including <code>&lt;script&gt;</code> tags with this code, but somehow the code only duplicate the HTML.</p>\n\n<pre><code>doc = Nokogiri::HTML(open(\"foo.text\"))\ndoc.css(\":not(script)\").to_html\n</code></pre>\n\n<p>How can I enable the behavior I want?</p>\n"}, {"tags": ["css", "ruby", "fonts", "gem", "font-awesome"], "answers": [{"comments": [{"owner": {"reputation": 2624, "user_id": 989920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/01e16ed8a3bc3246278001359f7a0257?s=128&d=identicon&r=PG", "display_name": "evolutionxbox", "link": "https://stackoverflow.com/users/989920/evolutionxbox"}, "edited": false, "score": 0, "creation_date": 1434567453, "post_id": 30900103, "comment_id": 49839081, "body": "This is strange, because I followed the instructions. It&#39;s just a ruby gem."}, {"owner": {"reputation": 1, "user_id": 1554017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2Z8V.jpg?s=128&g=1", "display_name": "freite", "link": "https://stackoverflow.com/users/1554017/freite"}, "reply_to_user": {"reputation": 2624, "user_id": 989920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/01e16ed8a3bc3246278001359f7a0257?s=128&d=identicon&r=PG", "display_name": "evolutionxbox", "link": "https://stackoverflow.com/users/989920/evolutionxbox"}, "edited": false, "score": 0, "creation_date": 1434569230, "post_id": 30900103, "comment_id": 49840204, "body": "How exactly do you include font-awesome into the asset pipeline?"}, {"owner": {"reputation": 2624, "user_id": 989920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/01e16ed8a3bc3246278001359f7a0257?s=128&d=identicon&r=PG", "display_name": "evolutionxbox", "link": "https://stackoverflow.com/users/989920/evolutionxbox"}, "edited": false, "score": 0, "creation_date": 1434569364, "post_id": 30900103, "comment_id": 49840278, "body": "I followed the sass install (gem). Top of my main sass file I include them <code>@import &#39;font-awesome-sprockets&#39;; @import &#39;font-awesome&#39;;</code> and in my config.rb file <code>require &#39;font-awesome-sass&#39;</code>."}], "tags": [], "owner": {"reputation": 1, "user_id": 1554017, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/o2Z8V.jpg?s=128&g=1", "display_name": "freite", "link": "https://stackoverflow.com/users/1554017/freite"}, "is_accepted": false, "score": 0, "last_activity_date": 1434567379, "creation_date": 1434567379, "answer_id": 30900103, "question_id": 30888882, "link": "https://stackoverflow.com/questions/30888882/font-awesome-icons-not-showing-using-ruby-gem/30900103#30900103", "title": "Font Awesome icons not showing using Ruby Gem", "body": "<p>The problem isn't that the escaped chars are replaced with unescaped chars in the CSS.</p>\n\n<p>The problem is that the font file hasn't loaded and that is why you see black boxes instead of the correct glyphs.</p>\n\n<p>When looking at the CSS sent to the browser from your example site that you linked from Font-Awesomes github I can see invalid urls for the font.</p>\n\n<pre><code>font-family: 'FontAwesome';\nsrc: url(font-path(\"font-awesome/fontawesome-webfont.eot\"));\n</code></pre>\n\n<p>This means that the scss hasn't been properly parsed in your application.</p>\n"}], "owner": {"reputation": 2624, "user_id": 989920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/01e16ed8a3bc3246278001359f7a0257?s=128&d=identicon&r=PG", "display_name": "evolutionxbox", "link": "https://stackoverflow.com/users/989920/evolutionxbox"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 421, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434567379, "creation_date": 1434536845, "last_edit_date": 1434561632, "question_id": 30888882, "link": "https://stackoverflow.com/questions/30888882/font-awesome-icons-not-showing-using-ruby-gem", "title": "Font Awesome icons not showing using Ruby Gem", "body": "<p>I'm using Font-awesome via the ruby gem (ruby-2.2.2, font-awesome-sass-4.3.2) and the font icons look fine locally, but are broken when viewed remotely or when deployed on a server.</p>\n\n<p>I have followed the instructions <a href=\"https://github.com/FortAwesome/font-awesome-sass\" rel=\"nofollow\">laid out here</a> but when I look at my compiled CSS the expected unicode numbers have been replaced by boxes:</p>\n\n<pre><code>.fa-glass:before {\n  content: \"\uf000\";\n}\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>.fa-glass:before {\n  content: \"\\f000\";\n}\n</code></pre>\n\n<p>I have already tried including <code>@charset \"UTF-8\";</code> at the top of my SASS file which imports font-awesome.</p>\n\n<p>Ideas anyone?</p>\n\n<hr>\n\n<p><strong>Edit: 17/06/15</strong></p>\n\n<p><a href=\"https://github.com/FortAwesome/Font-Awesome/issues/6773#issuecomment-112882602\" rel=\"nofollow\">I've raised this issue with Font-awesome themselves.</a> Hopefully they'll shed some light on it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 4874, "user_id": 1201298, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0c3afd52b0c5f38b781eb3c729843cec?s=128&d=identicon&r=PG", "display_name": "htaidirt", "link": "https://stackoverflow.com/users/1201298/htaidirt"}, "edited": false, "score": 0, "creation_date": 1434537382, "post_id": 30888927, "comment_id": 49817575, "body": "Thanks for your reply (and question edits) Simone. You&#39;re right, I&#39;ll add the index constraint to the attribute."}], "tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 1, "last_activity_date": 1434536984, "creation_date": 1434536984, "answer_id": 30888927, "question_id": 30888734, "link": "https://stackoverflow.com/questions/30888734/does-securerandom-generates-a-unique-string-or-do-i-have-to-check/30888927#30888927", "title": "Does SecureRandom generates a unique string or do I have to check?", "body": "<p>Nothing is completely random in a computer generated string. Technically, there is a very low, remote possibility that two strings may be the same.</p>\n\n<p>This is even more true in a highly concurrent system. If that's not the case, what you can do is to simply add an unique constraint (aka an unique index) at the database level. In this way, in the remote event that two strings will be equal, the database will reject the second one.</p>\n\n<p>It's likely you will have an index on that field in any case if you need to use it for a query, therefore it should not add any unreasonable overhead.</p>\n\n<p>As a side note, <code>SecureRandom</code> is a <strong>Ruby</strong> library, not a Rails library.</p>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 1, "last_activity_date": 1434537373, "creation_date": 1434537373, "answer_id": 30889059, "question_id": 30888734, "link": "https://stackoverflow.com/questions/30888734/does-securerandom-generates-a-unique-string-or-do-i-have-to-check/30889059#30889059", "title": "Does SecureRandom generates a unique string or do I have to check?", "body": "<p>In order for it to be unique, it either has to (i) be following a rule that makes it never hit a previously generated output (such as by calling a one-to-one function on the time it was called, which only works under single thread), which makes it non-random, or (ii) keep a record of all previously generated outputs somewhere, which cannot be the case, and which also makes it non-random. In either case, you should be able to tell that is cannot be unique.</p>\n\n<p>However, mathematics and engineering are different. Even if it is not unique, you can regard it as de facto unique. That is what programmers do.</p>\n"}, {"comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1434543423, "post_id": 30891300, "comment_id": 49821831, "body": "The module you referenced in the Rails core still doesn&#39;t validate uniqueness of the token. It assumes the generated token is unique."}, {"owner": {"reputation": 343, "user_id": 2106676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ecd374c54808fb93d62586848d902a?s=128&d=identicon&r=PG", "display_name": "rxing", "link": "https://stackoverflow.com/users/2106676/rxing"}, "reply_to_user": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1434543815, "post_id": 30891300, "comment_id": 49822165, "body": "Yes, you are right. The new module in Rails cannot absolutely avoid  collision."}], "tags": [], "owner": {"reputation": 343, "user_id": 2106676, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/60ecd374c54808fb93d62586848d902a?s=128&d=identicon&r=PG", "display_name": "rxing", "link": "https://stackoverflow.com/users/2106676/rxing"}, "is_accepted": false, "score": 0, "last_activity_date": 1434543240, "last_edit_date": 1495540712, "creation_date": 1434543240, "answer_id": 30891300, "question_id": 30888734, "link": "https://stackoverflow.com/questions/30888734/does-securerandom-generates-a-unique-string-or-do-i-have-to-check/30891300#30891300", "title": "Does SecureRandom generates a unique string or do I have to check?", "body": "<p>Rails master branch includes one new module related to this.\n<a href=\"https://github.com/rails/rails/blob/master/activerecord/lib/active_record/secure_token.rb\" rel=\"nofollow noreferrer\">https://github.com/rails/rails/blob/master/activerecord/lib/active_record/secure_token.rb</a></p>\n\n<p>Another solution you can reference.</p>\n\n<p><a href=\"https://stackoverflow.com/questions/18554306/generating-unique-token-on-the-fly-with-rails\">Generating unique token on the fly with Rails</a></p>\n"}], "owner": {"reputation": 4874, "user_id": 1201298, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0c3afd52b0c5f38b781eb3c729843cec?s=128&d=identicon&r=PG", "display_name": "htaidirt", "link": "https://stackoverflow.com/users/1201298/htaidirt"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 1, "accepted_answer_id": 30888927, "answer_count": 3, "score": 0, "last_activity_date": 1434543240, "creation_date": 1434536410, "last_edit_date": 1434537063, "question_id": 30888734, "link": "https://stackoverflow.com/questions/30888734/does-securerandom-generates-a-unique-string-or-do-i-have-to-check", "title": "Does SecureRandom generates a unique string or do I have to check?", "body": "<p>I'm attributing a unique code to each created item, to use in the URL. I do this during the item creation in the model:</p>\n\n<pre><code>class Item &lt; ActiveRecord::Base\n  before_create { self.code = SecureRandom.urlsafe_base64 }\nend\n</code></pre>\n\n<p>But I don't know if the generated code is really unique. Do I have to check the uniqueness during the creation, but this can take unnecessary time and resources if the Items table grows:</p>\n\n<pre><code>before_create :generate_unique_code\n\ndef generate_unique_code\n  loop do\n    code = SecureRandom.urlsafe_base64\n    unless Item.where(:code =&gt; code).any?\n      self.code = code\n      break\n    end\n  end\nend\n</code></pre>\n\n<p>Can I trust the uniqueness of <code>SecureRandom.urlsafe_base64</code> and skip the check?</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 2, "creation_date": 1434536620, "post_id": 30888300, "comment_id": 49817122, "body": "<a href=\"http://stackoverflow.com/questions/2698460/strange-ruby-behavior-when-using-hash-new\" title=\"strange ruby behavior when using hash new\">stackoverflow.com/questions/2698460/&hellip;</a> explains this very well."}, {"owner": {"reputation": 7842, "user_id": 278044, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c691d68e084c74cc2c1f2abc1444692d?s=128&d=identicon&r=PG", "display_name": "Eldritch Conundrum", "link": "https://stackoverflow.com/users/278044/eldritch-conundrum"}, "edited": false, "score": 1, "creation_date": 1434536674, "post_id": 30888300, "comment_id": 49817157, "body": "Yes, this is how it works. <code>Hash.new {|h,k| h[k]=[]}</code> creates a new array when a key is not found, and <code>Hash.new([])</code> uses always the same array when any key is not found."}], "answers": [{"comments": [{"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 0, "creation_date": 1434536500, "post_id": 30888620, "comment_id": 49817051, "body": "that&#39;s true if I use <code>h[&#39;a&#39;] = 1243</code> but I want to push multiple strings into each key, so it needs to be an array."}], "tags": [], "owner": {"reputation": 3914, "user_id": 4057366, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/uZ3e5.jpg?s=128&g=1", "display_name": "Alex Holubenko", "link": "https://stackoverflow.com/users/4057366/alex-holubenko"}, "is_accepted": false, "score": -1, "last_activity_date": 1434536078, "creation_date": 1434536078, "answer_id": 30888620, "question_id": 30888300, "link": "https://stackoverflow.com/questions/30888300/whats-going-on-with-this-hash/30888620#30888620", "title": "What&#39;s going on with this hash?", "body": "<p>Cause, when you write <code>h = Hash.new([])</code> - you create new hash with <code>array</code> as default value for keys that doesn't exist, when you write <code>h['a'].push(1243)</code> - you just add a new element to this array and when you try to do someth like:</p>\n\n<pre><code>h['b'], h['c'], h['lol'] \n=&gt; [1243]\n</code></pre>\n\n<p>For create new <code>hash</code> you just need to:</p>\n\n<p><strong>1st example:</strong></p>\n\n<pre><code>h = {}\nh['a'] = 1243\n</code></pre>\n\n<p><strong>2nd example</strong></p>\n\n<pre><code>h = Hash.new\nh['a'] = 1243\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 1, "last_activity_date": 1434536093, "creation_date": 1434536093, "answer_id": 30888624, "question_id": 30888300, "link": "https://stackoverflow.com/questions/30888300/whats-going-on-with-this-hash/30888624#30888624", "title": "What&#39;s going on with this hash?", "body": "<p>Looks like the <code>&lt;&lt;</code> operator is appending to the default array itself, instead of working on a copy of it. </p>\n\n<pre><code> [65] pry(main)&gt; hash = Hash.new([])\n=&gt; {}\n[66] pry(main)&gt; hash[\"a\"] &lt;&lt; 0\n=&gt; [0]\n[67] pry(main)&gt; hash\n=&gt; {}\n[68] pry(main)&gt; hash[\"b\"]\n=&gt; [0]\n[69] pry(main)&gt; hash[\"c\"]\n=&gt; [0]\n</code></pre>\n\n<p>edit: It's not just the <code>&lt;&lt;</code> operator, <code>Array#push</code> also pushes to the default array.</p>\n"}, {"comments": [{"owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "edited": false, "score": 1, "creation_date": 1434536376, "post_id": 30888634, "comment_id": 49816976, "body": "What does arguments evaluated only once prior to method execution imply?"}, {"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 1, "creation_date": 1434536536, "post_id": 30888634, "comment_id": 49817067, "body": "okay, that makes sense...thanks sawa"}], "tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": true, "score": 4, "last_activity_date": 1434538655, "last_edit_date": 1434538655, "creation_date": 1434536140, "answer_id": 30888634, "question_id": 30888300, "link": "https://stackoverflow.com/questions/30888300/whats-going-on-with-this-hash/30888634#30888634", "title": "What&#39;s going on with this hash?", "body": "<p>Note that all arguments, unlike blocks, are evaluated only once and prior to the method call.</p>\n\n<ul>\n<li>In step 1, you are assigning a particular array as the default value. This array instance will be used for the default value of <code>h</code>. Notice that, since you have not set the default value using a block, calling a key-value pair will not assign that to the hash.</li>\n<li>In step 2, the array instance for the default value is called because <code>'a'</code> is not a key of the hash. You are modifying this array instance.</li>\n<li>Steps 3 and 5 are the same thing; since you have not assigned the default value of <code>h</code> with a block, a key-value pair that is called is not assigned to the hash.</li>\n<li>In step 4, you are just calling the default value.</li>\n</ul>\n\n<p>Compare your code with this:</p>\n\n<pre><code>h = Hash.new{|h, k| h[k] = []}\n</code></pre>\n\n<p>which will generate a new array each time a previously-uncalled key is called, and will assign that key-value pair to the hash.</p>\n"}, {"comments": [{"owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "edited": false, "score": 0, "creation_date": 1434544213, "post_id": 30890109, "comment_id": 49822509, "body": "that&#39;s a good way of looking at it, thank you"}], "tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": false, "score": 1, "last_activity_date": 1434540134, "creation_date": 1434540134, "answer_id": 30890109, "question_id": 30888300, "link": "https://stackoverflow.com/questions/30888300/whats-going-on-with-this-hash/30890109#30890109", "title": "What&#39;s going on with this hash?", "body": "<p>Let's look at this from a different angle. You are calling <code>push</code> on an array. Why would calling <code>push</code> on an array modify a hash? There is no relationship between arrays and hashes.</p>\n\n<p>What would you expect to happen here:</p>\n\n<pre><code>a = []\n\nh = Hash.new(a)\n\na.push(1234)\n</code></pre>\n\n<p>Would you expect <code>h</code> to change? Probably not. But this is <em>the exact same thing</em> your code does!</p>\n"}], "owner": {"reputation": 9993, "user_id": 2128691, "user_type": "registered", "accept_rate": 98, "profile_image": "https://i.stack.imgur.com/YV6xv.jpg?s=128&g=1", "display_name": "dax", "link": "https://stackoverflow.com/users/2128691/dax"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 77, "favorite_count": 1, "closed_date": 1434544186, "accepted_answer_id": 30888634, "answer_count": 4, "score": 4, "last_activity_date": 1434540134, "creation_date": 1434535232, "last_edit_date": 1434535861, "question_id": 30888300, "link": "https://stackoverflow.com/questions/30888300/whats-going-on-with-this-hash", "closed_reason": "Duplicate", "title": "What&#39;s going on with this hash?", "body": "<ol>\n<li><p>I make a new hash with a default value of an empty array.</p>\n\n<pre><code>h = Hash.new([])\n</code></pre></li>\n<li><p>I push a value into the hash where the key is <code>'a'</code>.</p>\n\n<pre><code>h['a'].push(1243)\n</code></pre></li>\n<li><p><code>h</code> is empty.</p>\n\n<pre><code>h # =&gt; {} \n</code></pre></li>\n<li><p><code>h['a']</code> returns the expected value.</p>\n\n<pre><code>h['a'] # =&gt; [1243] \n</code></pre></li>\n<li><p><code>h.keys</code> returns an empty array.</p>\n\n<pre><code>h.keys # =&gt; []\n</code></pre></li>\n</ol>\n\n<p>If I initialize the hash in step one with <code>Hash.new {|h,k| h[k]=[]}</code> then expected values are returned.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql"], "comments": [{"owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "edited": false, "score": 0, "creation_date": 1434534048, "post_id": 30887793, "comment_id": 49815337, "body": "have you gone through <a href=\"http://stackoverflow.com/questions/14419354/rails-app-error-premature-end-of-script-headers\" title=\"rails app error premature end of script headers\">stackoverflow.com/questions/14419354/&hellip;</a> link"}, {"owner": {"reputation": 13, "user_id": 2376861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef76ee36e0a28c7f428a37bdf34a563?s=128&d=identicon&r=PG", "display_name": "Joan Yvorra", "link": "https://stackoverflow.com/users/2376861/joan-yvorra"}, "reply_to_user": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "edited": false, "score": 0, "creation_date": 1434535297, "post_id": 30887793, "comment_id": 49816266, "body": "Yes, I read it. But my application works, is only sometimes that shows me this error."}, {"owner": {"reputation": 257364, "user_id": 398670, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/85f50c23bb5e9dfb061af5032bfe8e65?s=128&d=identicon&r=PG", "display_name": "Craig Ringer", "link": "https://stackoverflow.com/users/398670/craig-ringer"}, "edited": false, "score": 0, "creation_date": 1434538291, "post_id": 30887793, "comment_id": 49818204, "body": "Did you look at the PostgreSQL logs? If you enable more detailed logging in the application can you see anything in the app&#39;s logs?"}, {"owner": {"reputation": 13, "user_id": 2376861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef76ee36e0a28c7f428a37bdf34a563?s=128&d=identicon&r=PG", "display_name": "Joan Yvorra", "link": "https://stackoverflow.com/users/2376861/joan-yvorra"}, "edited": false, "score": 0, "creation_date": 1434540971, "post_id": 30887793, "comment_id": 49819990, "body": "There are any error in development.log. I&#39;m talking to hosting to see the postgresql.log."}, {"owner": {"reputation": 3543, "user_id": 2231236, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/ZyG2H.jpg?s=128&g=1", "display_name": "Nithin", "link": "https://stackoverflow.com/users/2231236/nithin"}, "edited": false, "score": 0, "creation_date": 1434542018, "post_id": 30887793, "comment_id": 49820717, "body": "space on hosting server ? I encountered similar issue yesterday, when the usage showed up 100%"}, {"owner": {"reputation": 13, "user_id": 2376861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef76ee36e0a28c7f428a37bdf34a563?s=128&d=identicon&r=PG", "display_name": "Joan Yvorra", "link": "https://stackoverflow.com/users/2376861/joan-yvorra"}, "edited": false, "score": 0, "creation_date": 1434542602, "post_id": 30887793, "comment_id": 49821127, "body": "The disk usage is 77%. :S"}], "owner": {"reputation": 13, "user_id": 2376861, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9ef76ee36e0a28c7f428a37bdf34a563?s=128&d=identicon&r=PG", "display_name": "Joan Yvorra", "link": "https://stackoverflow.com/users/2376861/joan-yvorra"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1434533868, "creation_date": 1434533868, "question_id": 30887793, "link": "https://stackoverflow.com/questions/30887793/ruby-on-rails-sometimes-premature-end-of-script-headers", "title": "Ruby on Rails sometimes Premature end of script headers", "body": "<p>I have and application in Ruby on Rails that connect with postgresql. The application is hosted in a shared hosting and the postgresql in a different shared server.</p>\n\n<p>The applications works fine, but sometimes (many times) throws blank page with this error:</p>\n\n<blockquote>\n  <p>Internal Server Error</p>\n  \n  <p>The server encountered an internal error or misconfiguration and was\n  unable to complete your request.</p>\n  \n  <p>Please contact the server administrator, webmaster@fedecatjudo.cat and\n  inform them of the time the error occurred, and anything you might\n  have done that may have caused the error.</p>\n  \n  <p>More information about this error may be available in the server error\n  log.</p>\n</blockquote>\n\n<p>In server apache_error:</p>\n\n<blockquote>\n  <p>[Wed Jun 17 10:13:30 2015] [error] [client XXX.XX.XX.XXX] Premature\n  end of script headers:</p>\n</blockquote>\n\n<p>I think that the problem is the conection with postgres. I have the feeling when the application make a big query throw more times the error.</p>\n\n<p>For these reason I put in config/database.rb timeout, but the error still appearing:</p>\n\n<pre><code>  adapter: postgresql \n  encoding: unicode\n  database: xxx\n  pool: 5\n  timeout: 35000\n  username: xxxx\n  password: xxx\n  host: xxx.xxx.com\n</code></pre>\n"}, {"tags": ["ruby", "newline"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 1, "last_activity_date": 1434533312, "last_edit_date": 1434533312, "creation_date": 1434532838, "answer_id": 30887354, "question_id": 30887174, "link": "https://stackoverflow.com/questions/30887174/why-doesnt-hello-r-chomp-remove-r/30887354#30887354", "title": "Why doesn&#39;t `&quot;hello\\r&quot;.chomp(&#39;&#39;)` remove `&quot;\\r&quot;`?", "body": "<blockquote>\n  <p>If $/ is an empty string, it will remove all trailing newlines from the string.</p>\n</blockquote>\n\n<p>Exactly. <code>\\r</code> AKA <code>CR</code> is not a newline character. It's a carriage return character (doesn't start a new line).</p>\n\n<p>As to why <code>chomp('')</code> removes CRLF, it's because CRLF is a Windows-style newline. Linux uses LF.</p>\n\n<p>Old Mac OSes (up to v9) were using CR, but recent ones (OS X) do not. So \"CR as a newline char\" does not exist as far as ruby is concerned.</p>\n"}, {"tags": [], "owner": {"reputation": 5720, "user_id": 2195474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a7296a5ff92d54ecfb7157b3e742d4c7?s=128&d=identicon&r=PG", "display_name": "jbr", "link": "https://stackoverflow.com/users/2195474/jbr"}, "is_accepted": false, "score": 1, "last_activity_date": 1434533203, "last_edit_date": 1434533203, "creation_date": 1434532853, "answer_id": 30887360, "question_id": 30887174, "link": "https://stackoverflow.com/questions/30887174/why-doesnt-hello-r-chomp-remove-r/30887360#30887360", "title": "Why doesn&#39;t `&quot;hello\\r&quot;.chomp(&#39;&#39;)` remove `&quot;\\r&quot;`?", "body": "<p>The short explanation is that <code>\\r</code> is not a newline, but a carriage return. So <code>chomp()</code> does exactly what the manual states.</p>\n\n<p>The long explanation can be found on the <a href=\"https://en.wikipedia.org/wiki/Control_character\" rel=\"nofollow\">Control_character</a> Wikipedia page.</p>\n"}], "owner": {"reputation": 3483, "user_id": 688608, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/0d5987ac3272a646bac5dc0e253cc8c4?s=128&d=identicon&r=PG", "display_name": "diveintohacking", "link": "https://stackoverflow.com/users/688608/diveintohacking"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 153, "favorite_count": 0, "accepted_answer_id": 30887354, "answer_count": 2, "score": 1, "last_activity_date": 1434533617, "creation_date": 1434532371, "last_edit_date": 1434533617, "question_id": 30887174, "link": "https://stackoverflow.com/questions/30887174/why-doesnt-hello-r-chomp-remove-r", "title": "Why doesn&#39;t `&quot;hello\\r&quot;.chomp(&#39;&#39;)` remove `&quot;\\r&quot;`?", "body": "<p>Although the <a href=\"http://ruby-doc.org/core-2.2.2/String.html#method-i-chomp\" rel=\"nofollow\">Ruby reference manual</a> describes:</p>\n\n<blockquote>\n  <p>If <code>$/</code> is an empty string, it will remove all trailing newlines from the string.</p>\n</blockquote>\n\n<p><code>\"hello\\r\".chomp('')</code> doesn't remove <code>\"\\r\"</code> as in the following.</p>\n\n<pre><code>\"hello\\r\\n\".chomp     # =&gt; \"hello\"\n\"hello\\r\".chomp       # =&gt; \"hello\"\n\"hello\\r\\n\".chomp('') # =&gt; \"hello\"\n\"hello\\r\".chomp('')   # =&gt; \"hello\\r\"\n</code></pre>\n\n<p>Why?</p>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 153402, "user_id": 1204143, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/5ca341b160687d99b1317859f91054ee?s=128&d=identicon&r=PG", "display_name": "nneonneo", "link": "https://stackoverflow.com/users/1204143/nneonneo"}, "is_accepted": false, "score": 1, "last_activity_date": 1434532367, "creation_date": 1434532367, "answer_id": 30887172, "question_id": 30887095, "link": "https://stackoverflow.com/questions/30887095/get-the-number-from-string-by-regex/30887172#30887172", "title": "get the number from string by regex", "body": "<p>You probably want something like this:</p>\n\n<pre><code>\\d+(\\.\\d+)?\n</code></pre>\n\n<p>which looks for an integer followed by an optional fractional part.</p>\n"}, {"tags": [], "owner": {"reputation": 658033, "user_id": 548225, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/dab08478b226280d4a30894c9a7ed719?s=128&d=identicon&r=PG", "display_name": "anubhava", "link": "https://stackoverflow.com/users/548225/anubhava"}, "is_accepted": false, "score": 0, "last_activity_date": 1434532369, "creation_date": 1434532369, "answer_id": 30887173, "question_id": 30887095, "link": "https://stackoverflow.com/questions/30887095/get-the-number-from-string-by-regex/30887173#30887173", "title": "get the number from string by regex", "body": "<p>You can use this regex in <code>scan</code>:</p>\n\n<pre><code>\\b\\d+(?:\\.\\d+)?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 57, "user_id": 4869835, "user_type": "registered", "accept_rate": 38, "profile_image": "https://www.gravatar.com/avatar/c1fb721f6cc51b3790fdf0d3b40e54a7?s=128&d=identicon&r=PG&f=1", "display_name": "user197324", "link": "https://stackoverflow.com/users/4869835/user197324"}, "is_accepted": false, "score": 0, "last_activity_date": 1434532417, "creation_date": 1434532417, "answer_id": 30887197, "question_id": 30887095, "link": "https://stackoverflow.com/questions/30887095/get-the-number-from-string-by-regex/30887197#30887197", "title": "get the number from string by regex", "body": "<p>You need to use end of the line anchor.</p>\n\n<pre><code>\\b\\d+(?:\\.\\d+)?$\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 14407, "user_id": 3035830, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/14809f2ad7f14e2867798697ab8f8006?s=128&d=identicon&r=PG", "display_name": "shivam", "link": "https://stackoverflow.com/users/3035830/shivam"}, "is_accepted": false, "score": 1, "last_activity_date": 1434532531, "creation_date": 1434532531, "answer_id": 30887226, "question_id": 30887095, "link": "https://stackoverflow.com/questions/30887095/get-the-number-from-string-by-regex/30887226#30887226", "title": "get the number from string by regex", "body": "<p>Something like this:</p>\n\n<pre><code>\"com.abcd.efghi.pay.0.99\".scan(/(\\d+[.]\\d+)/).flatten.first\n# =&gt; \"0.99\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": true, "score": 1, "last_activity_date": 1434533271, "creation_date": 1434533271, "answer_id": 30887525, "question_id": 30887095, "link": "https://stackoverflow.com/questions/30887095/get-the-number-from-string-by-regex/30887525#30887525", "title": "get the number from string by regex", "body": "<p>This is pretty simple, <a href=\"http://rubular.com/r/4XLiZNerOg\" rel=\"nofollow\">regexp</a> for numbers like <code>0.00</code> or <code>00.00</code>:</p>\n\n<pre><code>\\d{1,2}.{2,}\n</code></pre>\n\n<ul>\n<li><code>\\d</code> Any digit</li>\n<li><code>\\d{1,2}</code>    Between 1 and 2 of digit</li>\n<li><code>.</code> a dot</li>\n<li><code>\\d{2,}</code>     2 or more of digit</li>\n</ul>\n\n<p>Example:</p>\n\n<pre><code>&gt;&gt; \"com.abcd.efghi.pay.19.99\"[/\\d{1,2}.{2,}/, 0]\n=&gt; \"19.99\"\n&gt;&gt; \"com.abcd.efghi.pay.9.99\"[/\\d{1,2}.{2,}/, 0]\n=&gt; \"9.99\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "is_accepted": false, "score": 2, "last_activity_date": 1434534142, "creation_date": 1434534142, "answer_id": 30887918, "question_id": 30887095, "link": "https://stackoverflow.com/questions/30887095/get-the-number-from-string-by-regex/30887918#30887918", "title": "get the number from string by regex", "body": "<pre><code>\"com.abcd.efghi.pay.0.99\".split(/\\D+/, 2).last # =&gt; \"0.99\"\n\"com.abcd.efghi.pay.9.99\".split(/\\D+/, 2).last # =&gt; \"9.99\"\n\"com.abcd.efghi.pay.19.99\".split(/\\D+/, 2).last # =&gt; \"19.99\"\n</code></pre>\n\n<p>or</p>\n\n<pre><code>\"com.abcd.efghi.pay.0.99\".sub(/\\D+/, \"\") # =&gt; \"0.99\"\n\"com.abcd.efghi.pay.9.99\".sub(/\\D+/, \"\") # =&gt; \"9.99\"\n\"com.abcd.efghi.pay.19.99\".sub(/\\D+/, \"\") # =&gt; \"19.99\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 1, "last_activity_date": 1434541722, "last_edit_date": 1434541722, "creation_date": 1434534782, "answer_id": 30888137, "question_id": 30887095, "link": "https://stackoverflow.com/questions/30887095/get-the-number-from-string-by-regex/30888137#30888137", "title": "get the number from string by regex", "body": "<p>Without regex:</p>\n\n<pre><code>str = \"com.abcd.efghi.pay.0.99\"\n\nstr.split(\".\").last(2).join(\".\") # =&gt; \"0.99\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1434937048, "creation_date": 1434937048, "answer_id": 30971052, "question_id": 30887095, "link": "https://stackoverflow.com/questions/30887095/get-the-number-from-string-by-regex/30971052#30971052", "title": "get the number from string by regex", "body": "<p>Ah, so many ways. Here are a couple more:</p>\n\n<pre><code>str = \"com.abcd.efghi.pay.9.99\"\n\nstr[str.index(/\\d/)..-1] #=&gt; \"9.99\"\nstr.sub(/.*?(?=\\d)/,'')  #=&gt; \"9.99\"\n</code></pre>\n"}], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 85, "favorite_count": 0, "accepted_answer_id": 30887525, "answer_count": 8, "score": 0, "last_activity_date": 1434937048, "creation_date": 1434532162, "question_id": 30887095, "link": "https://stackoverflow.com/questions/30887095/get-the-number-from-string-by-regex", "title": "get the number from string by regex", "body": "<p>I have a string like this:</p>\n\n<pre><code>\"com.abcd.efghi.pay.0.99\"\n\"com.abcd.efghi.pay.9.99\"\n\"com.abcd.efghi.pay.19.99\"\n</code></pre>\n\n<p>I want get the number(0.99, 9.99, 19.99). I tried to do like this:</p>\n\n<pre><code>\"com.abcd.efghi.pay.0.99\".scan(/\\d/).join\n=&gt; \"099\"\n</code></pre>\n\n<p>Anyone can help me get the correct result. Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "has-and-belongs-to-many"], "comments": [{"owner": {"reputation": 1023, "user_id": 1624032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe4490e788d1dff66dd5fbf48049849?s=128&d=identicon&r=PG", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1624032/pablo"}, "edited": false, "score": 0, "creation_date": 1434556972, "post_id": 30886823, "comment_id": 49832471, "body": "In both your models you have the same <code>foreign_key</code> and <code>association_foreign_key</code>, maybe that is the problem?"}, {"owner": {"reputation": 11, "user_id": 3282331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b27f35a7a1efcae6c4173aa52bd000d?s=128&d=identicon&r=PG&f=1", "display_name": "user3282331", "link": "https://stackoverflow.com/users/3282331/user3282331"}, "reply_to_user": {"reputation": 1023, "user_id": 1624032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe4490e788d1dff66dd5fbf48049849?s=128&d=identicon&r=PG", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1624032/pablo"}, "edited": false, "score": 0, "creation_date": 1434789716, "post_id": 30886823, "comment_id": 49937510, "body": "@PabloGonz&#225;lezAlba Thank you for the help you made. I made the changes as per your advice but still the values are placed in wrong fields. say..                                                                                                          user_id is stored in option_value_id column and my option_value_id is getting stored in the place of user_id.                                                                                 TIA"}], "owner": {"reputation": 11, "user_id": 3282331, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6b27f35a7a1efcae6c4173aa52bd000d?s=128&d=identicon&r=PG&f=1", "display_name": "user3282331", "link": "https://stackoverflow.com/users/3282331/user3282331"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 72, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1434536052, "creation_date": 1434531391, "last_edit_date": 1434536052, "question_id": 30886823, "link": "https://stackoverflow.com/questions/30886823/rails-hasandbelongstomany-storing-join-table-ids-inversely", "title": "rails hasandbelongstomany storing join table ids inversely", "body": "<p>I want to connect two tables using <code>has-and-belongs-to-many</code>. they are working fine but saving ids of two columns inversely saving the data.</p>\n\n<p>i.e. in join table of option_values and user, user id is saving in option value column and vice-varsa . I mean if user id is 2 and option_values is 4, then in join table, at user column it storing 4 and 2 in option_valus table. Here is I have give brief description. I know its big one, please follow.</p>\n\n<pre><code>user_decorator.rb\nmodule Spree\n User.class_eval do\n   belongs_to :option_values\n   has_and_belongs_to_many :option_values, :uniq =&gt; true, :before_add =&gt; :validates_option_value,\n  join_table: :spree_option_values_users,\n  foreign_key: 'option_value_id',\n  association_foreign_key: :user_id\n   def validates_option_value(option_value)\n     raise ActiveRecord::Rollback if self.option_values.include? option_value\n   end\n  end\n end\n</code></pre>\n\n<p>option_decorator.rb</p>\n\n<pre><code>module Spree\n  OptionValue.class_eval do\n    belongs_to :user\n    has_and_belongs_to_many :users, :uniq =&gt; true, :before_add =&gt; :validates_user,\n  join_table: :spree_option_values_users,\n  class_name: Spree.user_class.to_s,\n  foreign_key: 'option_value_id',\n  association_foreign_key: :user_id\n    def validates_user(user)\n      raise ActiveRecord::Rollback if self.users.include? user\n    end\n  end\nend\n</code></pre>\n\n<p>migration file</p>\n\n<pre><code>class CreateJoinSpreeOptionValuesUsers &lt; ActiveRecord::Migration\n  def change\n    create_table :spree_option_values_users do |t|\n      t.integer :option_value_id\n      t.integer :user_id\n    end\n  end\nend\n</code></pre>\n\n<p>adding index</p>\n\n<pre><code>add_index :spree_option_values_users, [ :option_value_id, :user_id ], :name =&gt; 'index_option_value_and_user'\n</code></pre>\n\n<p>saving values</p>\n\n<pre><code>a = Spree::User.find(2)\nb = Spree::OptionValue.find(4)\na.option_values &lt;&lt; b\na.save\n</code></pre>\n\n<p>in mysql phpmyadmin</p>\n\n<p>only 2 users present.\nthere id is 1 and 2</p>\n\n<p>more option_values there.</p>\n\n<p>but in db in that join table of \"spree_option_values_users\". Stores the data as inverse</p>\n\n<pre><code>INSERT INTO `spree_option_values_users` (`option_value_id`, `user_id`) VALUES (?, ?)  [[\"option_value_id\", 2], [\"user_id\", 4]]\n</code></pre>\n\n<p>Actually user_id is 2 and option_value_id is 4.</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activeadmin"], "answers": [{"tags": [], "owner": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "is_accepted": false, "score": 0, "last_activity_date": 1434530636, "creation_date": 1434530636, "answer_id": 30886524, "question_id": 30886244, "link": "https://stackoverflow.com/questions/30886244/format-date-in-activeadmin-form/30886524#30886524", "title": "Format date in ActiveAdmin form", "body": "<p>Try this one,</p>\n\n<pre><code>f.input :start_date, :value =&gt; :start_date.try(:strftime,'%y-%m-%d %i:%m')\n</code></pre>\n\n<p>Where <code>try</code> will prevent you from getting exceptions, when date is nil.</p>\n"}], "owner": {"reputation": 11, "user_id": 4939410, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/058c7488b48ede08d26c41710456496c?s=128&d=identicon&r=PG&f=1", "display_name": "R&#233;mi Colnot", "link": "https://stackoverflow.com/users/4939410/r%c3%a9mi-colnot"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1023, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1434530636, "creation_date": 1434529884, "question_id": 30886244, "link": "https://stackoverflow.com/questions/30886244/format-date-in-activeadmin-form", "title": "Format date in ActiveAdmin form", "body": "<p>I got a list of trips which I display in ActiveAdmin, the index uses a formats.fr.yml and the date is displayed with the right format. \nHowever, when I modify a trip, in the form, ActiveAdmin doesn't use formats.fr.yml anymore. \nHere is the line in the form :</p>\n\n<pre><code>f.input :start_date, as: :date_time_picker\n</code></pre>\n\n<p>I tried something like this :</p>\n\n<pre><code>f.input :start_date, as: :date_time_picker, :value =&gt; :start_date.strftime('%d-%m-%Y %I:%M')\n</code></pre>\n\n<p>But it doesn't work.\nBy the way, when I change the date with the datepicker, it changes the date to the right format (but because of some js).</p>\n\n<p>Thanks for your help.</p>\n"}, {"tags": ["ruby", "regex", "string"], "comments": [{"owner": {"reputation": 2359, "user_id": 405454, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/IDzwW.png?s=128&g=1", "display_name": "mhutter", "link": "https://stackoverflow.com/users/405454/mhutter"}, "edited": false, "score": 1, "creation_date": 1434532188, "post_id": 30885797, "comment_id": 49813913, "body": "You can use Rubular.com to test out your Ruby Regexes! Love that Tool!"}], "answers": [{"tags": [], "owner": {"reputation": 1460, "user_id": 1493379, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf946b17cfc8c468c17451bd14a53830?s=128&d=identicon&r=PG", "display_name": "blueygh2", "link": "https://stackoverflow.com/users/1493379/blueygh2"}, "is_accepted": false, "score": 0, "last_activity_date": 1434528736, "creation_date": 1434528736, "answer_id": 30885854, "question_id": 30885797, "link": "https://stackoverflow.com/questions/30885797/how-can-i-get-token-and-login-values-from-string-via-regex/30885854#30885854", "title": "How can I get token and login values from string via regex?", "body": "<p>Because <code>login</code> contains (or can contain?) other characters than what is included in <code>\\w</code>, you can use a custom character class: <code>[\\w.]+</code></p>\n\n<p>Please note that the dot inside a character class matches itself, not <em>any</em> character.</p>\n"}, {"tags": [], "owner": {"reputation": 2314, "user_id": 2882921, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/ffb2397ff2a97e133bdaa6cb2b449b7e?s=128&d=identicon&r=PG&f=1", "display_name": "Piotr Kruczek", "link": "https://stackoverflow.com/users/2882921/piotr-kruczek"}, "is_accepted": false, "score": 0, "last_activity_date": 1434529134, "creation_date": 1434529134, "answer_id": 30885988, "question_id": 30885797, "link": "https://stackoverflow.com/questions/30885797/how-can-i-get-token-and-login-values-from-string-via-regex/30885988#30885988", "title": "How can I get token and login values from string via regex?", "body": "<p>You could try</p>\n\n<pre><code>/token=\\\"\\w+\\\"/.match(your_string)\n</code></pre>\n\n<p>but this would return <code>token=\"ZuS6HNdwXsCDo2Moq2nx\"</code>, but you can easily take the token out by <code>.split('\"')[1]</code> for example.</p>\n\n<p>This way makes sure the value you have returned is preceded by <code>token=</code> and surrounded by double quotes.</p>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1434531540, "post_id": 30886118, "comment_id": 49813493, "body": "The only thing we know about token and login values, is they are delimited by double quotes, that\u2019s why <code>&quot;[^&quot;]*&quot;</code> is likely safer for match."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1434532624, "post_id": 30886118, "comment_id": 49814215, "body": "@mudasobwa, I assumed the token and login had to be preceded by <code>&quot; token=&quot;</code> and <code>&quot; login=&quot;</code> for four reasons: the OP referred to them as &quot;token&quot;  and &quot;login&quot; values, the <code>=</code> signs, the possible difficulty in determining which is which and the possibility that the string contains unrelated quoted substrings. But it doesn&#39;t matter, as the OP now has answers for alternative interpretations."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1434537174, "post_id": 30886118, "comment_id": 49817441, "body": "Positive lookbehinds are great. I told about <i>values matching</i>."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1434531803, "last_edit_date": 1434531803, "creation_date": 1434529540, "answer_id": 30886118, "question_id": 30885797, "link": "https://stackoverflow.com/questions/30885797/how-can-i-get-token-and-login-values-from-string-via-regex/30886118#30886118", "title": "How can I get token and login values from string via regex?", "body": "<pre><code>str='Token token=\"ZuS6HNdwXsCDo2Moq2nx\", login=\"login.login\"'\n\nr = /\n    (?&lt;=\\stoken=) # match string in positive look behind\n    \\\"[a-z0-9]+\\\" # match &gt; 0 letters or numbers between double quotes\n    /ix           # case insensitive and extended mode      \nstr[r]\n  #=&gt; \"\\\"ZuS6HNdwXsCDo2Moq2nx\\\"\"\n\nstr[/(?&lt;=\\slogin=)\\\"[a-z0-9.]+\\\"/i]\n  #=&gt; \"\\\"login.login\\\"\"\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 1, "last_activity_date": 1434531117, "creation_date": 1434531117, "answer_id": 30886708, "question_id": 30885797, "link": "https://stackoverflow.com/questions/30885797/how-can-i-get-token-and-login-values-from-string-via-regex/30886708#30886708", "title": "How can I get token and login values from string via regex?", "body": "<pre><code>ts = 'Token token=\"ZuS6HNdwXsCDo2Moq2nx\", login=\"login.login\"'\nts.scan(/(\\w+)=\"([^\"]*)\"/).to_h\n#\u21d2 {\n#  \"login\" =&gt; \"login.login\",\n#  \"token\" =&gt; \"ZuS6HNdwXsCDo2Moq2nx\"\n#}\n</code></pre>\n"}], "owner": {"reputation": 458, "user_id": 2208606, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b0f3fe3a6f5afeb2a8955d8d78f5ede0?s=128&d=identicon&r=PG", "display_name": "Artyom Zankevich", "link": "https://stackoverflow.com/users/2208606/artyom-zankevich"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 30886708, "answer_count": 4, "score": 0, "last_activity_date": 1434531803, "creation_date": 1434528566, "last_edit_date": 1434529044, "question_id": 30885797, "link": "https://stackoverflow.com/questions/30885797/how-can-i-get-token-and-login-values-from-string-via-regex", "title": "How can I get token and login values from string via regex?", "body": "<p>I have a string: </p>\n\n<pre><code>\"Token token=\"ZuS6HNdwXsCDo2Moq2nx\", login=\"login.login\"\"\n</code></pre>\n\n<p>I want to get <code>ZuS6HNdwXsCDo2Moq2nx</code> and <code>login.login</code>.  </p>\n\n<p>How can I get token and login values using regexp?</p>\n\n<p>I use <code>/\"\\w+\"/</code> to get token value, but I can't get login value. Maybe the is another alternative to this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-web-services"], "comments": [{"owner": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "edited": false, "score": 0, "creation_date": 1434527793, "post_id": 30885527, "comment_id": 49811053, "body": "Will you please show what you are getting in <code>@instances</code> ?"}], "answers": [{"comments": [{"owner": {"reputation": 25, "user_id": 1221638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d3b0cc25753346847f65731c4264467?s=128&d=identicon&r=PG", "display_name": "Marcus Janietz", "link": "https://stackoverflow.com/users/1221638/marcus-janietz"}, "edited": false, "score": 0, "creation_date": 1434528624, "post_id": 30885675, "comment_id": 49811561, "body": "Perfect. Sorry, if this was a bit too easy. :)"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 2, "last_activity_date": 1434528148, "creation_date": 1434528148, "answer_id": 30885675, "question_id": 30885527, "link": "https://stackoverflow.com/questions/30885527/undefined-method-value-when-looping/30885675#30885675", "title": "&quot;undefined method &#39;value&#39;&quot; when looping", "body": "<p><code>i.tags.any?</code> returns <code>true</code> as soon as <code>tags.compact</code> array is not empty. So, you enter the endless loop and sooner or later <code>t</code> becomes greater than <code>tags.length</code>. Call to <code>tags[tags.length]</code> returns <code>nil</code>, and calling <code>value</code> on <code>nil</code> produces the error you got.</p>\n\n<p>The loop you likely wanted looks like:</p>\n\n<pre><code>i.tags.each do |tag|\n  puts tag.value\nend\n</code></pre>\n"}], "owner": {"reputation": 25, "user_id": 1221638, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/8d3b0cc25753346847f65731c4264467?s=128&d=identicon&r=PG", "display_name": "Marcus Janietz", "link": "https://stackoverflow.com/users/1221638/marcus-janietz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 555, "favorite_count": 1, "accepted_answer_id": 30885675, "answer_count": 1, "score": 0, "last_activity_date": 1434530221, "creation_date": 1434527698, "last_edit_date": 1434530221, "question_id": 30885527, "link": "https://stackoverflow.com/questions/30885527/undefined-method-value-when-looping", "title": "&quot;undefined method &#39;value&#39;&quot; when looping", "body": "<p>I am trying to loop through a list of tags returned from AWS API, but I'm getting \"undefined method 'value'. I can provide further information if needed. </p>\n\n<p>This is my simple loop:</p>\n\n<pre><code>@instances.each do |i| \n t = 0 \n   while i.tags.any? do \n     puts i.tags[t].value \n    t += 1 \n   end \nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "views", "dry"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1434528900, "post_id": 30885482, "comment_id": 49811728, "body": "May be you can add a <code>scope</code> to the respective model which queries the <code>status == &#39;ALLOTED&#39;</code> records and use that scope in this view."}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1434529742, "creation_date": 1434529742, "answer_id": 30886194, "question_id": 30885482, "link": "https://stackoverflow.com/questions/30885482/how-to-dry-code/30886194#30886194", "title": "How to dry code?", "body": "<pre><code>@alloted_emails = @inventories.flat_map(&amp;:employee_inventories).select do |i|\n  i[:status] == 'ALLOTED'\nend.map do |i|\n  i.employee.email\nend\n</code></pre>\n\n<p>Unless you want to create a scope as suggested by @Pavan, just introduce this var and use it.</p>\n"}, {"tags": [], "owner": {"reputation": 1036, "user_id": 4465049, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/92iYb.jpg?s=128&g=1", "display_name": "Chitra", "link": "https://stackoverflow.com/users/4465049/chitra"}, "is_accepted": false, "score": 0, "last_activity_date": 1434556917, "creation_date": 1434556917, "answer_id": 30896727, "question_id": 30885482, "link": "https://stackoverflow.com/questions/30885482/how-to-dry-code/30896727#30896727", "title": "How to dry code?", "body": "<p>If you are using the same code in different views then you can create a helper.</p>\n\n<p>Otherwise write down this code like- </p>\n\n<pre><code>&lt;% @inventories.each do |inventory| %&gt;\n  &lt;% inventory.employee_inventories.each do |e| %&gt;\n      &lt;%= e.employee.email if e[:status]== 'ALLOTED' %&gt;     \n  &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The main problem in your code is n+1 query problem. If you are using eager  loading then there is no issue otherwise use eager loading using includes keyword in your query.</p>\n"}], "owner": {"reputation": 81, "user_id": 4873463, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/20f19b320eabcd589be2cf8bd055f908?s=128&d=identicon&r=PG&f=1", "display_name": "Aniee", "link": "https://stackoverflow.com/users/4873463/aniee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 1, "answer_count": 2, "score": 0, "last_activity_date": 1434556917, "creation_date": 1434527574, "last_edit_date": 1434528437, "question_id": 30885482, "link": "https://stackoverflow.com/questions/30885482/how-to-dry-code", "title": "How to dry code?", "body": "<p>I am working with has many through association in Application.\nI access email from employee table in INDEX action of InventoryController like below code:</p>\n\n<pre><code>&lt;% @inventories.each do |inventory| %&gt;\n    &lt;% inventory.employee_inventories.each do |e| %&gt;\n            &lt;%if e[:status]== 'ALLOTED'%&gt;\n                  &lt;%= e.employee.email%&gt;\n             &lt;% end %&gt;\n    &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Please help me How to DRY this code in view? Thanks in advance</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "imagemagick", "paperclip", "paperclip-validation"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1434525153, "post_id": 30884554, "comment_id": 49809504, "body": "<code>@user.image.url(:small)</code> what it is return?"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1434525283, "post_id": 30884554, "comment_id": 49809578, "body": "you can try this <code>rake paperclip:refresh CLASS=User</code>"}], "answers": [{"comments": [{"owner": {"reputation": 11, "user_id": 4999343, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3c4cf90df93481e0dc64510afe78773?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Aranya", "link": "https://stackoverflow.com/users/4999343/ankit-aranya"}, "edited": false, "score": 0, "creation_date": 1434531721, "post_id": 30884784, "comment_id": 49813599, "body": "I try this but still I have issue with , I added console log as well"}], "tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": false, "score": 0, "last_activity_date": 1434531926, "last_edit_date": 1434531926, "creation_date": 1434525554, "answer_id": 30884784, "question_id": 30884554, "link": "https://stackoverflow.com/questions/30884554/store-thumb-image-to-specific-directory-in-paperclip-gem/30884784#30884784", "title": "Store thumb image to specific directory in paperclip gem", "body": "<p>Check that your image magick installed correctly or not as resizing is depends on image magick.</p>\n\n<p>to refresh all of your defined styles in one go (:thumb, :small, :medium from the above example)</p>\n\n<pre><code>rake paperclip:refresh CLASS=Modelname\n</code></pre>\n\n<p>and to refresh only missing styles:\na list of styles will be defined or updated in a file \u201c/public/system/paperclip_attachments.yml\u201d</p>\n\n<pre><code>rake paperclip:refresh:missing_styles\n</code></pre>\n\n<p>Additionally, if you want to only reprocess a single style you may do so like:</p>\n\n<pre><code>users_to_reprocess.each do |user|\n  user.image.reprocess! :small\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "is_accepted": false, "score": 0, "last_activity_date": 1434527215, "creation_date": 1434527215, "answer_id": 30885348, "question_id": 30884554, "link": "https://stackoverflow.com/questions/30884554/store-thumb-image-to-specific-directory-in-paperclip-gem/30885348#30885348", "title": "Store thumb image to specific directory in paperclip gem", "body": "<p>You can use <code>:styles</code> of <code>paperclip</code> gem in your model. Like,</p>\n\n<pre><code>has_attached_file :photo,\n  :styles =&gt; {\n    :thumb=&gt; \"100x100#\",\n    :small  =&gt; \"150x150&gt;\",\n    :medium =&gt; \"300x300&gt;\",\n    :large =&gt;   \"400x400&gt;\" }\n</code></pre>\n\n<p>And your photo url is going to be as follows : <code>/public/photos/(event#)/(size_name)/image_name</code></p>\n\n<p>And you have to install <code>ImageMagick</code> and <code>rb-magick</code> ports to get this going.</p>\n\n<p>For more details you can refer this links <a href=\"http://burm.net/2008/10/07/the-ruby-on-rails-paperclip-plugin-tutorial-easy-image-attachments/\" rel=\"nofollow\">Upload Image using Paperclip gem</a></p>\n"}], "owner": {"reputation": 11, "user_id": 4999343, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/f3c4cf90df93481e0dc64510afe78773?s=128&d=identicon&r=PG&f=1", "display_name": "Ankit Aranya", "link": "https://stackoverflow.com/users/4999343/ankit-aranya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 261, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1434531926, "creation_date": 1434524871, "last_edit_date": 1434531670, "question_id": 30884554, "link": "https://stackoverflow.com/questions/30884554/store-thumb-image-to-specific-directory-in-paperclip-gem", "title": "Store thumb image to specific directory in paperclip gem", "body": "<p>Here is the code </p>\n\n<pre><code>  has_attached_file :image,\n                        :path =&gt; \":rails_root/public/images/:id/:filename\",\n                        :url  =&gt; \"/images/:id/:filename\",\n                        :styles =&gt; { :small =&gt; \"300x168&gt;\", :large =&gt; \"1000x560&gt;\" }\n</code></pre>\n\n<p>Here is my console log</p>\n\n<pre><code>Command :: PATH=/opt/imagemagick-6.9/bin:$PATH; file -b --mime '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-1gg7ekt.png'\nCommand :: PATH=/opt/imagemagick-6.9/bin:$PATH; identify -format '%wx%h,%[exif:orientation]' '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm.png[0]' 2&gt;/dev/null\nCommand :: PATH=/opt/imagemagick-6.9/bin:$PATH; identify -format %m '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm.png[0]'\nCommand :: PATH=/opt/imagemagick-6.9/bin:$PATH; convert '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm.png[0]' -auto-orient -resize \"300x168&gt;\" '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm20150617-13080-8q41x9'\nCommand :: PATH=/opt/imagemagick-6.9/bin:$PATH; file -b --mime '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm20150617-13080-8q41x9'\nCommand :: PATH=/opt/imagemagick-6.9/bin:$PATH; identify -format '%wx%h,%[exif:orientation]' '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm.png[0]' 2&gt;/dev/null\nCommand :: PATH=/opt/imagemagick-6.9/bin:$PATH; identify -format %m '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm.png[0]'\nCommand :: PATH=/opt/imagemagick-6.9/bin:$PATH; convert '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm.png[0]' -auto-orient -resize \"1000x560&gt;\" '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm20150617-13080-q57vxf'\nCommand :: PATH=/opt/imagemagick-6.9/bin:$PATH; file -b --mime '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-197v1bm20150617-13080-q57vxf'\nCommand :: PATH=/opt/imagemagick-6.9/bin:$PATH; file -b --mime '/tmp/2251fc5821941d6bd28b2ee3cb25bf7620150617-13080-1o3we23.png'\n</code></pre>\n\n<p>I need to store small,large and original image to my project public directory but it store only the original </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "instagram-api"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1434523559, "post_id": 30883938, "comment_id": 49808621, "body": "You might want to take a look at the <a href=\"https://github.com/nfedyashev/retryable\" rel=\"nofollow noreferrer\">Retryable gem</a>."}, {"owner": {"reputation": 3365, "user_id": 2200277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a95ec105629f01fab28845338ab409?s=128&d=identicon&r=PG", "display_name": "Wally Altman", "link": "https://stackoverflow.com/users/2200277/wally-altman"}, "edited": false, "score": 0, "creation_date": 1434524386, "post_id": 30883938, "comment_id": 49809065, "body": "Ruby has a <code>retry</code> keyword that you can use when rescuing from an exception to go back to the <code>begin</code> (or the start of the method, if not using <code>begin</code>) and try again. See: <a href=\"http://blog.mirthlab.com/2012/05/25/cleanly-retrying-blocks-of-code-after-an-exception-in-ruby/\" rel=\"nofollow noreferrer\">blog.mirthlab.com/2012/05/25/&hellip;</a>"}, {"owner": {"reputation": 790, "user_id": 1014046, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5aefd41c56082b5a4a87fb0fe780c890?s=128&d=identicon&r=PG", "display_name": "kindofgreat", "link": "https://stackoverflow.com/users/1014046/kindofgreat"}, "edited": false, "score": 0, "creation_date": 1434560858, "post_id": 30883938, "comment_id": 49835108, "body": "Thanks to you both. That blog post was especially useful."}], "answers": [{"comments": [{"owner": {"reputation": 790, "user_id": 1014046, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5aefd41c56082b5a4a87fb0fe780c890?s=128&d=identicon&r=PG", "display_name": "kindofgreat", "link": "https://stackoverflow.com/users/1014046/kindofgreat"}, "edited": false, "score": 0, "creation_date": 1434560940, "post_id": 30884490, "comment_id": 49835159, "body": "Thanks! This is just what I needed... I really need to read up on (try/)rescuing as for some reason, I&#39;ve been avoiding as I&#39;ve learned to program. Your code really helped give me an idea of where the rescue goes and the syntax for rescuing particular errors."}], "tags": [], "owner": {"reputation": 3020, "user_id": 1276552, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/baa29da52b110cc638a327f75baaf80f?s=128&d=identicon&r=PG", "display_name": "twonegatives", "link": "https://stackoverflow.com/users/1276552/twonegatives"}, "is_accepted": true, "score": 2, "last_activity_date": 1434524698, "creation_date": 1434524698, "answer_id": 30884490, "question_id": 30883938, "link": "https://stackoverflow.com/questions/30883938/how-to-retry-a-rake-task-if-you-get-a-bad-gateway-error-response-from-a-web-sour/30884490#30884490", "title": "How to retry a rake task if you get a Bad Gateway error response from a web source", "body": "<p>Chad Pytel and Tammer Saleh call this \"Fire and forget\" antipattern in their <a href=\"https://rads.stackoverflow.com/amzn/click/com/0321604814\" rel=\"nofollow noreferrer\" rel=\"nofollow noreferrer\">Rails Antipatterns</a> book:</p>\n\n<blockquote>\n  <p>Assuming that the request always succeeds or simply not caring if it\n  fails may be valid in rare circumstances, but in most cases it's\n  unsufficient. On the other hand, rescuing all the exceptions would be\n  a bad practice aswell. The proper solution would be to understand the\n  actual exceptions that will be raised by external service and rescue\n  those only.</p>\n</blockquote>\n\n<p>So, what you should do is to wrap your code block into <code>begin/rescue</code> block with the appropriate set of errors raised by <code>Instagram</code> (list of those errors can be found <a href=\"https://github.com/Instagram/instagram-ruby-gem/blob/master/lib/instagram/error.rb\" rel=\"nofollow noreferrer\">here</a>). I'm not sure which particular line of your code snippet ends with <code>502</code> code, so just to give you and idea of what it could look like:</p>\n\n<pre><code>begin\n  dl = Instadownload.new\n  dl.instagram_url = ig.link\n  dl.image_url = ig.images.standard_resolution.url\n  dl.caption = ig.caption.text if ig.caption\n  dl.taken_at = Time.at(ig.created_time.to_i)\n  dl.save!\nrescue Instagram::BadGateway =&gt; e # list of acceptable errors can be expanded\n  retry  # restart from beginning\nend\n</code></pre>\n"}], "owner": {"reputation": 790, "user_id": 1014046, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/5aefd41c56082b5a4a87fb0fe780c890?s=128&d=identicon&r=PG", "display_name": "kindofgreat", "link": "https://stackoverflow.com/users/1014046/kindofgreat"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 740, "favorite_count": 0, "accepted_answer_id": 30884490, "answer_count": 1, "score": 1, "last_activity_date": 1434524698, "creation_date": 1434523054, "question_id": 30883938, "link": "https://stackoverflow.com/questions/30883938/how-to-retry-a-rake-task-if-you-get-a-bad-gateway-error-response-from-a-web-sour", "title": "How to retry a rake task if you get a Bad Gateway error response from a web source", "body": "<p>I am trying to run a rake task to get all the data with a specific tag from Instagram, and then input some of the data into my server. </p>\n\n<p>The task runs just fine, except sometimes I'll get an error response. It's sort of random, so I think it just happens sometimes, and since it's a fairly long running task, it'll happen eventually.</p>\n\n<p>This is the error on my console:\nInstagram::BadGateway: GET <a href=\"https://api.instagram.com/v1/tags/xxx/media/recent.json?access_token=xxxxx&amp;max_id=996890856542960826\" rel=\"nofollow\">https://api.instagram.com/v1/tags/xxx/media/recent.json?access_token=xxxxx&amp;max_id=996890856542960826</a>: 502: The server returned an invalid or incomplete response.</p>\n\n<p>When this happens, I don't know what else to do except run the task again starting from that max_id. However, it would be nice if I could get the whole thing to automate itself, and retry itself from that point when it gets that error. </p>\n\n<p>My task looks something like this:</p>\n\n<pre><code>task :download =&gt; :environment do\n  igs = Instagram.tag_recent_media(\"xxx\")\n  begin\n    sleep 0.2\n    igs.each do |ig|\n      dl = Instadownload.new\n      dl.instagram_url = ig.link\n      dl.image_url = ig.images.standard_resolution.url\n      dl.caption = ig.caption.text if ig.caption\n      dl.taken_at = Time.at(ig.created_time.to_i)\n      dl.save!\n    end\n    if igs.pagination.next_max_id?\n      igs = Instagram.tag_recent_media(\"xxx\", max_id: igs.pagination.next_max_id)\n      moreigs = true\n    else\n      moreigs = false\n    end\n  end while moreigs\nend\n</code></pre>\n"}, {"tags": ["jquery", "html", "css", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 670, "user_id": 4610973, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SdxFi.jpg?s=128&g=1", "display_name": "CryptoPiggy", "link": "https://stackoverflow.com/users/4610973/cryptopiggy"}, "edited": false, "score": 0, "creation_date": 1434521788, "post_id": 30883314, "comment_id": 49807783, "body": "Thank you, that works beautifully!  I was about to try using CSS3 nth-child pseudo selectors, but your way is much nicer. :)"}], "tags": [], "owner": {"reputation": 10770, "user_id": 381874, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/k7VRE.jpg?s=128&g=1", "display_name": "Sachin R", "link": "https://stackoverflow.com/users/381874/sachin-r"}, "is_accepted": true, "score": 0, "last_activity_date": 1434520653, "creation_date": 1434520653, "answer_id": 30883314, "question_id": 30883146, "link": "https://stackoverflow.com/questions/30883146/alternating-rails-image-uploader-rb-generated-div-class-one-other-in-apps/30883314#30883314", "title": "Alternating rails image_uploader.rb generated &lt;div class=&quot;one/other&quot;&gt; in app&#39;s .erb view?", "body": "<p>use <code>cycle</code> method </p>\n\n<p>Eg:</p>\n\n<pre><code>class=\"&lt;%= cycle(\"rotation\", \"rotation_alt\", name: \"row_class\") -%&gt;\"\n</code></pre>\n"}], "owner": {"reputation": 670, "user_id": 4610973, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SdxFi.jpg?s=128&g=1", "display_name": "CryptoPiggy", "link": "https://stackoverflow.com/users/4610973/cryptopiggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 27, "favorite_count": 0, "accepted_answer_id": 30883314, "answer_count": 1, "score": 0, "last_activity_date": 1434520653, "creation_date": 1434519972, "question_id": 30883146, "link": "https://stackoverflow.com/questions/30883146/alternating-rails-image-uploader-rb-generated-div-class-one-other-in-apps", "title": "Alternating rails image_uploader.rb generated &lt;div class=&quot;one/other&quot;&gt; in app&#39;s .erb view?", "body": "<p>I have an image uploader that adds sample cover pictures to a containing row <code>&lt;div class=\u201drow\u201d&gt;</code>.  The images render in their own  tags with class=\u201drotation\u201d like <code>&lt;div class=\u201drotation\u201d&gt;</code>.  I need to also alternate that class between <code>\u201crotation\u201d</code> and <code>\u201crotation-alt\u201d</code> in order to apply alternating rotations with CSS.  How can I alternate which tag is rendered with each upload in a rails .erb view?</p>\n\n<p>The .erb currently looks like this:</p>\n\n<pre><code>  &lt;%= link_to \"Upload New Photo\", new_cover_path, class: \"btn\" %&gt;\n\n  &lt;div class=\"row\"&gt;\n    &lt;% @covers.each do |cover| %&gt;\n\n    &lt;div class=\"rotation\"&gt;\n        &lt;%= link_to image_tag(cover.photo.url(:thumb), :class =&gt; 'img-responsive'), image_path(cover.photo.url), :class =&gt; 'thumbnail' if cover.photo? %&gt;\n    &lt;/div&gt;\n\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Thanks for any help.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "feedzirra", "feedjira"], "answers": [{"comments": [{"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1434530092, "post_id": 30885847, "comment_id": 49812495, "body": "Thank you for answer. Does categories have some kind of standartized names or each site will write categories differently?"}, {"owner": {"reputation": 1344, "user_id": 1608670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b2ed05ecccc3ba0780dd388ae719cd?s=128&d=identicon&r=PG", "display_name": "Ivan Chau", "link": "https://stackoverflow.com/users/1608670/ivan-chau"}, "reply_to_user": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1434530426, "post_id": 30885847, "comment_id": 49812707, "body": "@Mr.D I&#39;am afraid it is not the same. Keep in mind that <a href=\"http://www.rssboard.org/rss-specification\" rel=\"nofollow noreferrer\">RSS spec</a> only treated category as optional element. Even if RSS publisher provided the category information, it may be tags instead."}, {"owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1434532319, "post_id": 30885847, "comment_id": 49814006, "body": "It throws me <code>NoMethodError: undefined method </code>categories&#39; for #&lt;Feedjira::Parser::ITunesRSSItem:0x000000094237c8&gt;` error. But rss items in xml has category"}, {"owner": {"reputation": 1344, "user_id": 1608670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b2ed05ecccc3ba0780dd388ae719cd?s=128&d=identicon&r=PG", "display_name": "Ivan Chau", "link": "https://stackoverflow.com/users/1608670/ivan-chau"}, "reply_to_user": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1434533738, "post_id": 30885847, "comment_id": 49815108, "body": "@Mr.D Possible reason is that the feed is misclassified as ITunesRSSItem. You can try <a href=\"https://github.com/feedjira/feedjira/issues/176#issuecomment-29171760\" rel=\"nofollow noreferrer\">patching the code by comment out the ITunesRSSItem line</a>"}, {"owner": {"reputation": 1344, "user_id": 1608670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b2ed05ecccc3ba0780dd388ae719cd?s=128&d=identicon&r=PG", "display_name": "Ivan Chau", "link": "https://stackoverflow.com/users/1608670/ivan-chau"}, "reply_to_user": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "edited": false, "score": 0, "creation_date": 1434547622, "post_id": 30885847, "comment_id": 49825230, "body": "@Mr.D Just paste the code in your ruby file to override the default setting. Less recommended way is to modify the original library. Path is feedjira/lib/feedjira/feed.rb"}], "tags": [], "owner": {"reputation": 1344, "user_id": 1608670, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c9b2ed05ecccc3ba0780dd388ae719cd?s=128&d=identicon&r=PG", "display_name": "Ivan Chau", "link": "https://stackoverflow.com/users/1608670/ivan-chau"}, "is_accepted": true, "score": 0, "last_activity_date": 1434528725, "creation_date": 1434528725, "answer_id": 30885847, "question_id": 30882715, "link": "https://stackoverflow.com/questions/30882715/what-kind-of-entries-feedjira-has/30885847#30885847", "title": "What kind of entries Feedjira has?", "body": "<p>From the <a href=\"https://github.com/feedjira/feedjira/blob/master/lib/feedjira/parser/rss_entry.rb\" rel=\"nofollow\">source of feedjira</a>, category is defined as categories for RSS feed.</p>\n\n<blockquote>\n  <p><code>elements :category, :as =&gt; :categories</code></p>\n</blockquote>\n\n<p>The type of available elements depends on the source of the feed. (Atom/iTunes/FeedBurner)</p>\n\n<p>So you can use <code>author</code>, <code>content</code>, <code>updated</code>, and <code>image</code> for RSS feed.</p>\n"}], "owner": {"reputation": 5695, "user_id": 3003432, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/835081031b807fb7f1bc8eb683dd4626?s=128&d=identicon&r=PG&f=1", "display_name": "Mr.D", "link": "https://stackoverflow.com/users/3003432/mr-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 481, "favorite_count": 0, "accepted_answer_id": 30885847, "answer_count": 1, "score": 0, "last_activity_date": 1434528725, "creation_date": 1434517601, "last_edit_date": 1434520202, "question_id": 30882715, "link": "https://stackoverflow.com/questions/30882715/what-kind-of-entries-feedjira-has", "title": "What kind of entries Feedjira has?", "body": "<p>I started to use feedjira. I'm getting entries from url:</p>\n\n<pre><code>feed = Feedjira::Feed.fetch_and_parse(self.url)\n\nputs \"Fetching from #{self.url}\"\n\nfeed.entries.each do |entry|\n  unless Feed.exists? guid: entry.id\n    newFeed = Feed.create(name: entry.title,\n                          summary: entry.summary,\n                          url: entry.url,\n                          published_at: entry.published,\n                          guid: entry.id)\n\n    self.feeds &lt;&lt; newFeed\n  end\nend\n</code></pre>\n\n<p>I found these entries from tutorials. I haven't found entries from documentation. Are there any other entries that I can get from url like categories?</p>\n"}, {"tags": ["ruby", "algorithm", "math"], "comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1434519245, "post_id": 30882620, "comment_id": 49806618, "body": "I expect the downvotes and vote to close are because your haven&#39;t told readers what &quot;#6 for Project Euler&quot; is.  I suggest you edit and explain in words what the problem is. It would be helpful to also give a simple numerical example with the expected output.  Once the reader understands what you are trying to accomplish, it should be fairly straightforward to analyze the two methods you have presented."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1434522967, "post_id": 30882620, "comment_id": 49808319, "body": "You could also calculate as follows: <code>num = 5; sum, sum_sq = (1..num).reduce ([0,0]) { | (sum, sum_sq), n| [sum+n, sum_sq+n*n] }; sum*sum - sum_sq #=&gt; 170</code>."}], "answers": [{"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1434519598, "post_id": 30882989, "comment_id": 49806755, "body": "Good catch. The last lines differ as well, though that might be a typo."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1434519892, "post_id": 30882989, "comment_id": 49806863, "body": "@CarySwoveland I solved <a href=\"https://projecteuler.net/problem=6\" rel=\"nofollow noreferrer\">Project Euler #6</a> before :) The second method has <code>new_sum</code> with the same value as <code>new_sum**2</code> in the first method, that&#39;s why the OP is confusing, so the last line is probably not a typo."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1434523342, "post_id": 30882989, "comment_id": 49808501, "body": "@CarySwoveland The correct result of <code>square_difference(10)</code> is <code>2640</code> from the problem description. With OP&#39;s code, both methods seem to have the same correct result. The OP thinks the body of both methods should have the same instructions, except the return value. That&#39;s where the confusion comes from, why the second method gives the correct result while it doesn&#39;t return <code>new_sum**2 - sum</code> as the first one does? So I&#39;m tell the OP that the two methods don&#39;t have the same instructions because of the precedence of <code>&amp;&amp;</code>. Separating the statements is the way of showing how the code should work."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1434528777, "post_id": 30882989, "comment_id": 49811658, "body": "Sorry for the diversion. I didn&#39;t read the question carefully enough. (A bad habit of mine.) I was merely pointing out that, in addition to correcting the precedence problem, the OP needs to correct the last line of #2, but I guess that&#39;s obvious."}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 2, "last_activity_date": 1434519197, "creation_date": 1434519197, "answer_id": 30882989, "question_id": 30882620, "link": "https://stackoverflow.com/questions/30882620/project-euler-6-in-ruby-whats-the-difference/30882989#30882989", "title": "Project Euler #6 in Ruby (What&#39;s the difference?)", "body": "<p>The precedence of <code>&amp;&amp;</code> is higher than that of <code>+=</code>. So these expressions:</p>\n\n<pre><code>sum += num**2 &amp;&amp; new_sum += num\n\nnew_sum += num &amp;&amp; sum += num**2 \n</code></pre>\n\n<p>don't work as you expected. The first one just <em>happen</em> to provide the seemingly \"correct\" result.</p>\n\n<p>Divide them into separate lines and you'll see the difference. Or, at least use <code>and</code> instead of <code>&amp;&amp;</code>. <code>and</code> has a lower precedence than that of <code>+=</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 3630, "user_id": 4799659, "user_type": "registered", "profile_image": "https://graph.facebook.com/10153200714295120/picture?type=large", "display_name": "fylooi", "link": "https://stackoverflow.com/users/4799659/fylooi"}, "is_accepted": false, "score": 1, "last_activity_date": 1434521327, "last_edit_date": 1434521327, "creation_date": 1434520973, "answer_id": 30883389, "question_id": 30882620, "link": "https://stackoverflow.com/questions/30882620/project-euler-6-in-ruby-whats-the-difference/30883389#30883389", "title": "Project Euler #6 in Ruby (What&#39;s the difference?)", "body": "<p>Both formulas have the same subtle bug. I stepped through it a couple of times to understand what was going on. </p>\n\n<p>From the second one:</p>\n\n<pre><code>[30] pry(main)&gt; square_difference(4)\nnew_sum: 16, sum: 16, num: 3\nnew_sum: 41, sum: 25, num: 2\nnew_sum: 70, sum: 29, num: 1\nnew_sum: 100, sum: 30, num: 0\n=&gt; 70\n</code></pre>\n\n<p>We can see that <code>new_sum</code> does not seem to be behaving as intended.  </p>\n\n<p>What is actually happening is that <code>new_sum += num &amp;&amp; sum += num**2</code> is being evaluated to <code>new_sum += (num &amp;&amp; sum += num **2)</code>, which in turn evaluates to <code>new_sum += (sum += num **2)</code></p>\n\n<p>This is a result of the <code>&amp;&amp;</code> operator, which has higher precedence (as Yu Hao pointed out) and returns the first value which determines whether the AND condition is satisfied. </p>\n\n<pre><code>[31] pry(main)&gt; 2 &amp;&amp; 2\n=&gt; 2\n[32] pry(main)&gt; 2 &amp;&amp; 4\n=&gt; 4\n[33] pry(main)&gt; 4 &amp;&amp; 2\n=&gt; 2\n[34] pry(main)&gt; nil &amp;&amp; 2\n=&gt; nil\n[35] pry(main)&gt; 2 &amp;&amp; nil\n=&gt; nil\n</code></pre>\n"}], "owner": {"reputation": 227, "user_id": 5017954, "user_type": "registered", "accept_rate": 42, "profile_image": "https://graph.facebook.com/10204510626266349/picture?type=large", "display_name": "Jorge Lopez Jr", "link": "https://stackoverflow.com/users/5017954/jorge-lopez-jr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 76, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434521327, "creation_date": 1434517012, "last_edit_date": 1434517652, "question_id": 30882620, "link": "https://stackoverflow.com/questions/30882620/project-euler-6-in-ruby-whats-the-difference", "title": "Project Euler #6 in Ruby (What&#39;s the difference?)", "body": "<p>I solved #6 for Project Euler using two different methods, but the second one just happened to be coincidental. I don't really understand why I don't have to return the square of new_sum like I did for my first method. Does anyone know what's the major difference between the two?</p>\n\n<pre><code>def square_difference(num)\n  new_sum = 0\n  sum = 0\n  while num &gt;= 1\n    sum += num**2 &amp;&amp; new_sum += num\n    num -= 1\n  end\n  return new_sum**2 - sum\nend\n</code></pre>\n\n<p>AND</p>\n\n<pre><code>def square_difference(num)\n  new_sum = 0\n  sum = 0\n  while num &gt;= 1\n    new_sum += num &amp;&amp; sum += num**2  \n    num -= 1\n  end\n  return new_sum - sum\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "integration-testing"], "comments": [{"owner": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 1, "creation_date": 1434905856, "post_id": 30882575, "comment_id": 49965546, "body": "Which framework do you use? More code example maybe?"}, {"owner": {"reputation": 5407, "user_id": 482255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/48fd95a45ad39216322b1b577104b8e1?s=128&d=identicon&r=PG", "display_name": "Msencenb", "link": "https://stackoverflow.com/users/482255/msencenb"}, "reply_to_user": {"reputation": 9795, "user_id": 1566187, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/00cb2ecc49f0f05736dc7c14bbccfeaa?s=128&d=identicon&r=PG", "display_name": "Ely", "link": "https://stackoverflow.com/users/1566187/ely"}, "edited": false, "score": 0, "creation_date": 1435038794, "post_id": 30882575, "comment_id": 50018754, "body": "Added the full test I&#39;m trying to run"}], "answers": [{"comments": [{"owner": {"reputation": 5407, "user_id": 482255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/48fd95a45ad39216322b1b577104b8e1?s=128&d=identicon&r=PG", "display_name": "Msencenb", "link": "https://stackoverflow.com/users/482255/msencenb"}, "edited": false, "score": 1, "creation_date": 1435038824, "post_id": 30966997, "comment_id": 50018761, "body": "Thanks for the response, I&#39;ve added the full test method to the question. Note that changing it to .stub still has the same error being thrown. Part of the problem is that I don&#39;t want to use rspec, this is a standard out of the box rails integration test."}], "tags": [], "owner": {"reputation": 104, "user_id": 2734742, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ExkRs.jpg?s=128&g=1", "display_name": "stephhippo", "link": "https://stackoverflow.com/users/2734742/stephhippo"}, "is_accepted": false, "score": 1, "last_activity_date": 1434905407, "creation_date": 1434905407, "answer_id": 30966997, "question_id": 30882575, "link": "https://stackoverflow.com/questions/30882575/stubbing-method-in-actiondispatchintegrationtest/30966997#30966997", "title": "Stubbing method in ActionDispatch::IntegrationTest", "body": "<p>The only thing that looks incorrect to me here is .stubs when it should be <a href=\"https://www.relishapp.com/rspec/rspec-mocks/v/2-6/docs/method-stubs/stub-on-any-instance-of-a-class\" rel=\"nofollow\">.stub</a>.</p>\n"}, {"tags": [], "owner": {"reputation": 10091, "user_id": 4625365, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/l6v41.jpg?s=128&g=1", "display_name": "Matt Brictson", "link": "https://stackoverflow.com/users/4625365/matt-brictson"}, "is_accepted": false, "score": 1, "last_activity_date": 1435286655, "creation_date": 1435286655, "answer_id": 31064019, "question_id": 30882575, "link": "https://stackoverflow.com/questions/30882575/stubbing-method-in-actiondispatchintegrationtest/31064019#31064019", "title": "Stubbing method in ActionDispatch::IntegrationTest", "body": "<p>Since you aren't using RSpec, I would recommend installing the <a href=\"https://github.com/freerange/mocha\" rel=\"nofollow\">mocha gem</a> to get a full selection of mocking and stubbing tools. Here's a quickstart:</p>\n\n<pre><code># Gemfile\ngem \"mocha\", :group =&gt; :test\n\n# test/test_helper.rb\nrequire \"mocha/mini_test\"\n</code></pre>\n\n<p>Now you can stub like this:</p>\n\n<pre><code>Stripe::Charge.stubs(:retrieve =&gt; {:balance_transaction =&gt; 40})\n</code></pre>\n\n<p>Or, if you'd like to verify the method was actually called, you could set up an expectation instead:</p>\n\n<pre><code>Stripe::Charge.expects(:retrieve)\n  .with(:id =&gt; \"abc123\")\n  .returns({:balance_transaction =&gt; 40})\n</code></pre>\n"}], "owner": {"reputation": 5407, "user_id": 482255, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/48fd95a45ad39216322b1b577104b8e1?s=128&d=identicon&r=PG", "display_name": "Msencenb", "link": "https://stackoverflow.com/users/482255/msencenb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 965, "favorite_count": 0, "answer_count": 2, "score": 7, "last_activity_date": 1435286655, "creation_date": 1434516824, "last_edit_date": 1435038779, "question_id": 30882575, "link": "https://stackoverflow.com/questions/30882575/stubbing-method-in-actiondispatchintegrationtest", "title": "Stubbing method in ActionDispatch::IntegrationTest", "body": "<p>I'm doing some stripe integration tests and I would like to stub/mock a few endpoints. I'm attempting to do it like this:</p>\n\n<pre><code>Stripe::Charge.stubs(:retrieve).returns({:balance_transaction =&gt; 40})\n</code></pre>\n\n<p>but I'm getting the following:</p>\n\n<pre><code>NoMethodError: undefined method `stubs' for Stripe::Charge:Class\n</code></pre>\n\n<p>What's the correct syntax for stubbing this? Rails 4, Ruby 2.</p>\n\n<p>Edit: Here is my full test method. Essentially my payment_succeeded webhook hits stripe to retrieve a charge and it's associated balance transaction in order to log the transaction fee. I'm using stripe_mock to mock the webhook events, but I'd rather stub out the rest of them using standard stubbing techniques. Note that even when I change it to 'stub' it throws the same error above (with stub substituted for stubs). </p>\n\n<pre><code>require 'test_helper'\nrequire 'stripe_mock'\n\nclass WebhooksTest &lt; ActionDispatch::IntegrationTest\n  # called before every single test\n  def setup\n    StripeMock.start\n  end\n\n  # called after every single test\n  def teardown\n    StripeMock.stop\n  end\n\n  test 'invoice.payment_succeeded' do\n    Stripe::Charge.stubs(:retrieve).returns({:balance_transaction =&gt; 40})\n    event = StripeMock.mock_webhook_event('invoice.payment_succeeded', { :customer =&gt; \"stripe_customer1\", :id =&gt; \"abc123\" })\n    post '/stripe-events', id: event.id\n    assert_equal \"200\", response.code\n    assert_equal 1, StripeInvoicePayment.count\n    assert_equal 'abc123', event.data.object.id\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "overriding"], "answers": [{"comments": [{"owner": {"reputation": 175, "user_id": 1277218, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/D4r4w.jpg?s=128&g=1", "display_name": "MathCs", "link": "https://stackoverflow.com/users/1277218/mathcs"}, "edited": false, "score": 0, "creation_date": 1434521786, "post_id": 30882694, "comment_id": 49807779, "body": "but are all helpers available to any controller?"}, {"owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "reply_to_user": {"reputation": 175, "user_id": 1277218, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/D4r4w.jpg?s=128&g=1", "display_name": "MathCs", "link": "https://stackoverflow.com/users/1277218/mathcs"}, "edited": false, "score": 0, "creation_date": 1434521979, "post_id": 30882694, "comment_id": 49807886, "body": "No, but you can include any of them as shown in the example above."}], "tags": [], "owner": {"reputation": 3459, "user_id": 3185510, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/nlb4D.jpg?s=128&g=1", "display_name": "webster", "link": "https://stackoverflow.com/users/3185510/webster"}, "is_accepted": true, "score": 2, "last_activity_date": 1434517792, "last_edit_date": 1434517792, "creation_date": 1434517491, "answer_id": 30882694, "question_id": 30882361, "link": "https://stackoverflow.com/questions/30882361/order-of-including-helpers-in-viewcontrollers/30882694#30882694", "title": "Order of including Helpers in ViewControllers", "body": "<p>Any controller can have a corresponding helper. </p>\n\n<p>For example if you have a controller named Question (<code>questions_controller.rb</code>), it can have a helper named <code>questions_helper.rb</code>. The question helper is accesible only to the views corresponding to the question controller.</p>\n\n<p>Besides you will have an Application helper (<code>application_helper.rb</code>) which is accessible to all the views in the application.</p>\n\n<p>All helpers are not available to views by default. But you can include other helpers in a helper like this:</p>\n\n<pre><code>module MyHelper\n  include QuestionsHelper\nend\n</code></pre>\n\n<p>You can also use a helper inside a controller like:</p>\n\n<pre><code>class MyController &lt; ApplicationController\n  include MyHelper\n\n  def my_method\n    ...\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 175, "user_id": 1277218, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/D4r4w.jpg?s=128&g=1", "display_name": "MathCs", "link": "https://stackoverflow.com/users/1277218/mathcs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "accepted_answer_id": 30882694, "answer_count": 1, "score": 0, "last_activity_date": 1434538213, "creation_date": 1434515380, "last_edit_date": 1434538213, "question_id": 30882361, "link": "https://stackoverflow.com/questions/30882361/order-of-including-helpers-in-viewcontrollers", "title": "Order of including Helpers in ViewControllers", "body": "<p>In rails app, how are helpers included in viewcontrollers, and what's the order of includion(which helper is included first, second, so on)?</p>\n\n<p>Also, are all helpers available to views? If so, does the inclusion order same as the view's corresponding controller?</p>\n"}, {"tags": ["ruby", "floating-point", "biginteger"], "answers": [{"comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1434517822, "post_id": 30882609, "comment_id": 49806111, "body": "Perhaps you can make it more elegant by using <code>prepend</code> module."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1434518789, "post_id": 30882609, "comment_id": 49806414, "body": "@sawa I thought about that, but I finally decided there is no reason to encapsulate the functionality into a module, since it nevertheless is not a \u201cmixin,\u201d it is a <code>Float</code> class patch only."}, {"owner": {"reputation": 60, "user_id": 3988991, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5d6d7367e9c7351bf755ca152a38d5be?s=128&d=identicon&r=PG&f=1", "display_name": "Mehran", "link": "https://stackoverflow.com/users/3988991/mehran"}, "edited": false, "score": 0, "creation_date": 1434568777, "post_id": 30882609, "comment_id": 49839895, "body": "Thanks Mudasobwa! It worked, but now the computation time is much higher than when I define all variables in BigDecimal from the beginning. I guess that&#39;s because of the extra if-then-else (?:) in floating point operations."}, {"owner": {"reputation": 60, "user_id": 3988991, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5d6d7367e9c7351bf755ca152a38d5be?s=128&d=identicon&r=PG&f=1", "display_name": "Mehran", "link": "https://stackoverflow.com/users/3988991/mehran"}, "edited": false, "score": 0, "creation_date": 1434576269, "post_id": 30882609, "comment_id": 49844209, "body": "And the second problem is that for integers, var=2**62 belongs to Bignum class, but if we set var-=1, then var belongs to Fixnum. Should I overwrite these classes for Bignum as well?"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1434603312, "post_id": 30882609, "comment_id": 49851476, "body": "The <code>if</code> construct is nothing comparing to a time <code>BigDecimal</code> invocation is required. So, whether you have, say, ten constants, I would go with defining them as constants. <code>BigDecimal</code> is known to be slow, for evident reasons. And, yes, this patch affects instances of <code>Float</code>s only. Whether one wnats the same functionality on <code>Integer</code>s, <code>Integer</code> should be patched as well."}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 2, "last_activity_date": 1434516963, "creation_date": 1434516963, "answer_id": 30882609, "question_id": 30882200, "link": "https://stackoverflow.com/questions/30882200/automatically-moving-to-bigdecimal-when-float-is-out-of-range/30882609#30882609", "title": "Automatically moving to BigDecimal when float is out of range", "body": "<p>As one possibility I see to monkeypatch the <code>Float</code> class. Since the overflow is likely to appear on arithmetic operations only, you probably need to overwrite five methods <code>:+</code>,<code>:-</code>, <code>:/</code>, <code>:*</code>, <code>:**</code> like that:</p>\n\n<pre><code>require 'bigdecimal'\nclass Float\n  alias_method :__power, :** \n  def ** other\n    result = self.__power other\n    result.abs == Float::INFINITY ? BigDecimal(self, 0) ** other : result \n  end\nend\nputs 2.5 ** 1000\n#\u21d2 0.87.....E398\n</code></pre>\n\n<p>Not very elegant, but it does a trick.</p>\n"}], "owner": {"reputation": 60, "user_id": 3988991, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/5d6d7367e9c7351bf755ca152a38d5be?s=128&d=identicon&r=PG&f=1", "display_name": "Mehran", "link": "https://stackoverflow.com/users/3988991/mehran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 237, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434516963, "creation_date": 1434514279, "last_edit_date": 1434515938, "question_id": 30882200, "link": "https://stackoverflow.com/questions/30882200/automatically-moving-to-bigdecimal-when-float-is-out-of-range", "title": "Automatically moving to BigDecimal when float is out of range", "body": "<p>Huge <code>Float</code> numbers are not automatically converted to <code>BigDecimal</code> as with conversion from <code>Fixnum</code> to <code>Bignum</code>. For instance, <code>2.5**1000</code> generates <code>Infinity</code>. I can manually define a <code>BigDecimal</code> as <code>BigDecimal('2.5')**1000</code>, but this will slow down the computation when the numbers are not huge and <code>BigDecimal</code> is not required.</p>\n\n<p>Is there any way to make the transition from <code>Float</code> to <code>BigDecimal</code> automatic (similar to the transition from <code>Fixnum</code> to <code>Bignum</code>)? Or is there any other Ruby class which does this? I don't care about the precision of the floating point numbers.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 1023, "user_id": 1624032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3fe4490e788d1dff66dd5fbf48049849?s=128&d=identicon&r=PG", "display_name": "Pablo", "link": "https://stackoverflow.com/users/1624032/pablo"}, "is_accepted": true, "score": 1, "last_activity_date": 1434514751, "creation_date": 1434514751, "answer_id": 30882258, "question_id": 30881939, "link": "https://stackoverflow.com/questions/30881939/how-to-iterate-data-from-database-to-become-a-radio-button-in-template/30882258#30882258", "title": "How to iterate data from database to become a radio button in template?", "body": "<p>You can iterate all the Status records (*).</p>\n\n<p>In your controller, you can add:</p>\n\n<pre><code>@statuses = Status.all\n</code></pre>\n\n<p>And in your view:</p>\n\n<pre><code>&lt;%= form_for @api, :url =&gt; commons_path do |f| %&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;%= f.label :status, \"Status\",  class: \"col-sm-2 control-label\" %&gt;\n    &lt;div class=\"col-sm-8\"&gt;\n      &lt;% @statuses.each do |status| %&gt;\n        &lt;%= f.radio_button :status, status.status %&gt;\n        &lt;%= label_tag(:status, status.status) %&gt; \n      &lt;% end %&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>(*) Be careful if you have hundreds of statuses since this loads all in memory at once.</p>\n"}], "owner": {"reputation": 6882, "user_id": 2567859, "user_type": "registered", "accept_rate": 65, "profile_image": "https://i.stack.imgur.com/kJ7FA.jpg?s=128&g=1", "display_name": "Dreams", "link": "https://stackoverflow.com/users/2567859/dreams"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 80, "favorite_count": 1, "accepted_answer_id": 30882258, "answer_count": 1, "score": 0, "last_activity_date": 1434514751, "creation_date": 1434512399, "question_id": 30881939, "link": "https://stackoverflow.com/questions/30881939/how-to-iterate-data-from-database-to-become-a-radio-button-in-template", "title": "How to iterate data from database to become a radio button in template?", "body": "<p>I am using Rails 4.2 and Ruby 2.1.5</p>\n\n<p>Here is my radio button code of my new template:</p>\n\n<pre><code>&lt;%= form_for @api, :url =&gt; commons_path do |f| %&gt;\n  &lt;div class=\"form-group\"&gt;\n      &lt;%= f.label :status, \"Status\",  class: \"col-sm-2 control-label\" %&gt;\n        &lt;div class=\"col-sm-8\"&gt;\n          &lt;%= f.radio_button :status, 'success' %&gt;\n          &lt;%= label_tag(:status, \"Success\") %&gt; \n          &lt;%= f.radio_button :status, 'fail' %&gt;\n          &lt;%= label_tag(:status, \"Fail\") %&gt; \n          &lt;%= f.radio_button :status, 'exception' %&gt;\n          &lt;%= label_tag(:status, \"Exception\") %&gt; \n       &lt;/div&gt;\n      &lt;/div&gt;\n&lt;/end&gt;\n</code></pre>\n\n<p>Now , I would like to create a new table in database to store different status.</p>\n\n<pre><code>create_table \"statuses\", force: :cascade do |t|\n  t.string   \"status\"\n  t.datetime \"created_at\"\n  t.datetime \"updated_at\"\nend\n</code></pre>\n\n<p>How to iterate data from database to become a radio button automatically in template so I don't have to hardcode radio button in template every time.</p>\n"}, {"tags": ["ruby", "rubygems", "slim-lang"], "comments": [{"owner": {"reputation": 877, "user_id": 3464137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ae3423c61f79d777f6047b932333f?s=128&d=identicon&r=PG&f=1", "display_name": "egwspiti", "link": "https://stackoverflow.com/users/3464137/egwspiti"}, "edited": false, "score": 0, "creation_date": 1434720884, "post_id": 30881562, "comment_id": 49913775, "body": "you should provide more information, how did you run <code>slimrb</code> ? In what way did it not work?"}, {"owner": {"reputation": 49, "user_id": 3984305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca258db569901c83e1d4ce60955df2e?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3984305/tom"}, "reply_to_user": {"reputation": 877, "user_id": 3464137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ae3423c61f79d777f6047b932333f?s=128&d=identicon&r=PG&f=1", "display_name": "egwspiti", "link": "https://stackoverflow.com/users/3464137/egwspiti"}, "edited": false, "score": 0, "creation_date": 1434745626, "post_id": 30881562, "comment_id": 49928019, "body": "I used the <code>slimbr -c</code> command inside the directory of the file I want to compile. I expected that in that same directed a file called <code>index.html</code> would be created, but it did not happen. What happened, is that the slim code I typed into the command line would be converted afterwards within the command line. I want to transform <code>index.slim</code> into <code>index.html</code>. I consider my question as being pretty straightforward, though."}], "answers": [{"comments": [{"owner": {"reputation": 49, "user_id": 3984305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca258db569901c83e1d4ce60955df2e?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3984305/tom"}, "edited": false, "score": 0, "creation_date": 1434641103, "post_id": 30881685, "comment_id": 49876253, "body": "I don&#39;t see how that answers my question."}], "tags": [], "owner": {"reputation": 971, "user_id": 2597718, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/451afe490759d58b0f61b2dd5b47ff8a?s=128&d=identicon&r=PG", "display_name": "Shouichi", "link": "https://stackoverflow.com/users/2597718/shouichi"}, "is_accepted": false, "score": 4, "last_activity_date": 1434510603, "creation_date": 1434510603, "answer_id": 30881685, "question_id": 30881562, "link": "https://stackoverflow.com/questions/30881562/how-to-convert-slim-to-html/30881685#30881685", "title": "How to convert slim to html?", "body": "<p>I assume local variables are missing. In that case, give them with <code>-l</code> option. For example,</p>\n\n<pre><code>$ cat template.slim\ndiv\n  p= message\n$ slimrb template.slim -l '{\"message\": \"hello\"}'\n&lt;div&gt;&lt;p&gt;hello&lt;/p&gt;&lt;/div&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 877, "user_id": 3464137, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/107ae3423c61f79d777f6047b932333f?s=128&d=identicon&r=PG&f=1", "display_name": "egwspiti", "link": "https://stackoverflow.com/users/3464137/egwspiti"}, "is_accepted": false, "score": 2, "last_activity_date": 1434978404, "creation_date": 1434978404, "answer_id": 30980784, "question_id": 30881562, "link": "https://stackoverflow.com/questions/30881562/how-to-convert-slim-to-html/30980784#30980784", "title": "How to convert slim to html?", "body": "<p>Shouichi's answer is what you're looking for. </p>\n\n<p>However from your comment, I understand you also want to redirect the output to a file (the .html file). The way this can be done depends on the shell you're using. For example in (ba)sh you could do it like this:</p>\n\n<pre><code>slimrb template.slim -l '{\"message\": \"hello\"}' &gt; template.html\n</code></pre>\n"}], "owner": {"reputation": 49, "user_id": 3984305, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dca258db569901c83e1d4ce60955df2e?s=128&d=identicon&r=PG&f=1", "display_name": "tom", "link": "https://stackoverflow.com/users/3984305/tom"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4078, "favorite_count": 0, "answer_count": 2, "score": 4, "last_activity_date": 1434978404, "creation_date": 1434509864, "question_id": 30881562, "link": "https://stackoverflow.com/questions/30881562/how-to-convert-slim-to-html", "title": "How to convert slim to html?", "body": "<p>I am new to ruby gems and I have tried to find information about how to compile slim to html. There is a <code>slimrb</code> command, but it did not work. How do I convert a slim file to a html file?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "activeadmin"], "comments": [{"owner": {"reputation": 1784, "user_id": 435817, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/336ff924a5e2f7efe299b3d1210957e2?s=128&d=identicon&r=PG", "display_name": "patrickdavey", "link": "https://stackoverflow.com/users/435817/patrickdavey"}, "edited": false, "score": 1, "creation_date": 1434511198, "post_id": 30881332, "comment_id": 49804277, "body": "what is <code>meters</code> in your root_house method?  The error &quot;undefined method circuit for nil:NilClass` suggests that whatever <code>meters</code> is is nil."}, {"owner": {"reputation": 85, "user_id": 3408798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3219bff361b91d5bded6d3b03d97160e?s=128&d=identicon&r=PG", "display_name": "contact411", "link": "https://stackoverflow.com/users/3408798/contact411"}, "reply_to_user": {"reputation": 1784, "user_id": 435817, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/336ff924a5e2f7efe299b3d1210957e2?s=128&d=identicon&r=PG", "display_name": "patrickdavey", "link": "https://stackoverflow.com/users/435817/patrickdavey"}, "edited": false, "score": 0, "creation_date": 1434515350, "post_id": 30881332, "comment_id": 49805357, "body": "That is helpful.. Thanks. My train of thought was that circuits was returning nil.  Meters is another model that beacons point to."}], "answers": [{"comments": [{"owner": {"reputation": 85, "user_id": 3408798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3219bff361b91d5bded6d3b03d97160e?s=128&d=identicon&r=PG", "display_name": "contact411", "link": "https://stackoverflow.com/users/3408798/contact411"}, "edited": false, "score": 0, "creation_date": 1434515429, "post_id": 30882130, "comment_id": 49805379, "body": "That worked like a champ! I wish I have more than one upvote to give!  Really appreciate you pointing me in the &#39;delegate&#39; direction."}, {"owner": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "reply_to_user": {"reputation": 85, "user_id": 3408798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3219bff361b91d5bded6d3b03d97160e?s=128&d=identicon&r=PG", "display_name": "contact411", "link": "https://stackoverflow.com/users/3408798/contact411"}, "edited": false, "score": 1, "creation_date": 1434515676, "post_id": 30882130, "comment_id": 49805447, "body": "Glad I was able to help!"}], "tags": [], "owner": {"reputation": 3728, "user_id": 2612713, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/0a7f606f9e135589780620d1160d941e?s=128&d=identicon&r=PG&f=1", "display_name": "neo", "link": "https://stackoverflow.com/users/2612713/neo"}, "is_accepted": true, "score": 1, "last_activity_date": 1434513871, "creation_date": 1434513871, "answer_id": 30882130, "question_id": 30881332, "link": "https://stackoverflow.com/questions/30881332/formatting-issue-in-activeadmin-dashboard/30882130#30882130", "title": "Formatting issue in ActiveAdmin dashboard", "body": "<p>Here's a dirty fix for this, refactor as you wish:</p>\n\n<pre><code>  def root_house\n    if meters &amp;&amp; meters.pop &amp;&amp; meters.pop.circuit\n      meters.pop.circuit.root\n    else\n    'object is not present'\n    end\n  end\n</code></pre>\n\n<p>So I'm only going to call <code>meters.pop.circuit.root</code> if <code>meters</code> and <code>meters.pop</code> and <code>meters.pop.ciruit</code> is not nil. </p>\n\n<p>Google null object pattern and law of Demeter ruby for a cleaner solution, also you can use <code>delegate</code> method, <a href=\"https://github.com/anonyo/rails_anti_patterns/blob/master/law_of_demeter.rb\" rel=\"nofollow\">this</a> might be helpful. </p>\n"}], "owner": {"reputation": 85, "user_id": 3408798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/3219bff361b91d5bded6d3b03d97160e?s=128&d=identicon&r=PG", "display_name": "contact411", "link": "https://stackoverflow.com/users/3408798/contact411"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 42, "favorite_count": 0, "accepted_answer_id": 30882130, "answer_count": 1, "score": 0, "last_activity_date": 1434513871, "creation_date": 1434507991, "question_id": 30881332, "link": "https://stackoverflow.com/questions/30881332/formatting-issue-in-activeadmin-dashboard", "title": "Formatting issue in ActiveAdmin dashboard", "body": "<p>I'm having an issue pulling the correct information into a dashboard column using ActiveAdmin. If anyone could help me wrap my head around this issue it would be greatly appreciated.</p>\n\n<p>The issue I'm having is retaining the data from an associated class with the current record I'm displaying (line 6 below).</p>\n\n<p>Here is the column I've created:</p>\n\n<pre><code>  column do\n    panel \"Recent Beacons\" do\n      table_for Beacon.limit(20) do\n        column(\"Mac address\") { |b| link_to b.mac_address, admin_beacon_path(b) }\n        column \"Last seen\", :updated_at\n        column(\"House\") { |b| link_to b.root_house, admin_house_path(b.root_house.id) }\n        column(\"Status\") { |b| b.online? ? status_tag('Online', :green) : status_tag('Offline', :red) }\n      end\n    end\n  end\n</code></pre>\n\n<p>Using binding.pry I'm able to perform a <code>b.meters.pop.circuit.root</code> and return the correct value I'm looking for. However it ActiveAdmin doesn't like this and the page errors with the following <code>undefined method circuit for nil:NilClass</code>.  Trying to clean up the code a bit I wrote a <code>root_house</code> method.</p>\n\n<pre><code>  def root_house\n    meters.pop.circuit.root\n  end\n</code></pre>\n\n<p>ActiveAdmin has left me a bit confused and any help is greatly appreciated.</p>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "radio-button"], "comments": [{"owner": {"reputation": 4984, "user_id": 415038, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/19555464959dab287601521181e5cece?s=128&d=identicon&r=PG", "display_name": "Mr H", "link": "https://stackoverflow.com/users/415038/mr-h"}, "edited": false, "score": 1, "creation_date": 1434506382, "post_id": 30880986, "comment_id": 49803173, "body": "Can you please add your model relation to your question? Thanks"}, {"owner": {"reputation": 4984, "user_id": 415038, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/19555464959dab287601521181e5cece?s=128&d=identicon&r=PG", "display_name": "Mr H", "link": "https://stackoverflow.com/users/415038/mr-h"}, "edited": false, "score": 2, "creation_date": 1434506466, "post_id": 30880986, "comment_id": 49803193, "body": "Also your HTML is a bit funny. second batch of &lt;li&gt; is missing :)"}, {"owner": {"reputation": 11742, "user_id": 2790048, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/OZndo.png?s=128&g=1", "display_name": "Nick Volynkin", "link": "https://stackoverflow.com/users/2790048/nick-volynkin"}, "edited": false, "score": 0, "creation_date": 1434511448, "post_id": 30880986, "comment_id": 49804334, "body": "<a href=\"http://stackoverflow.com/help/mcve\">stackoverflow.com/help/mcve</a>"}, {"owner": {"reputation": 1131, "user_id": 3592117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/qIAYJ.jpg?s=128&g=1", "display_name": "Kimball", "link": "https://stackoverflow.com/users/3592117/kimball"}, "edited": false, "score": 0, "creation_date": 1434512577, "post_id": 30880986, "comment_id": 49804599, "body": "Your question isn&#39;t terribly clear, but for one group of radio buttons per question, name the radio buttons with something unique to the question. The radio button&#39;s name is the first argument of <code>radio_button_tag</code>. E.g. <code>&lt;%= radio_button_tag(&quot;answers_#{question.id}&quot;, answer.content) %&gt;</code>."}], "owner": {"reputation": 195, "user_id": 4496976, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/5bf93c10eb38fe82f36076031146ff21?s=128&d=identicon&r=PG&f=1", "display_name": "ruby_noobie", "link": "https://stackoverflow.com/users/4496976/ruby-noobie"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 35, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1434505386, "creation_date": 1434505386, "question_id": 30880986, "link": "https://stackoverflow.com/questions/30880986/separate-radio-button-for-each-group-of-possible-answers", "title": "Separate radio button for each group of possible answers", "body": "<p>I am iterating through a list of questions and answers. For each question, I need a separate radio button that the user can select from that group of answers. The code below supplies one radio button for ALL of the answers, not for each set of answers.</p>\n\n<pre><code>&lt;ol&gt;\n&lt;% for question in @survey.questions %&gt;\n&lt;li&gt;&lt;%= question.content %&gt;&lt;/li&gt;\n&lt;ul&gt;\n&lt;% question.answers.each do |answer| %&gt;\n\n&lt;%= radio_button_tag(:answer, answer.content ) %&gt;\n&lt;%= label_tag(:answer_tag, answer.content ) %&gt;\n&lt;% end %&gt;\n&lt;/ul&gt;\n&lt;% end %&gt;\n&lt;/ol&gt;\n</code></pre>\n\n<p>Is it possible to do what I want to do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1434499329, "post_id": 30880196, "comment_id": 49801362, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/26416065/which-gem-is-breaking-rails-application-css-scss-wrong-number-of-arguments-3-for\">Which gem is breaking Rails application.css.scss wrong number of arguments 3 for 2</a>"}, {"owner": {"reputation": 2501, "user_id": 1859956, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/rgRBJ.jpg?s=128&g=1", "display_name": "emi", "link": "https://stackoverflow.com/users/1859956/emi"}, "edited": false, "score": 0, "creation_date": 1434509020, "post_id": 30880196, "comment_id": 49803769, "body": "show your <code>&#47;app&#47;assets&#47;stylesheets&#47;bootstrap_and_overrides.css.scss</code>"}], "answers": [{"tags": [], "owner": {"reputation": 750, "user_id": 1801879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d8f2eec3417afa4692430fc0f19d201a?s=128&d=identicon&r=PG", "display_name": "user1801879", "link": "https://stackoverflow.com/users/1801879/user1801879"}, "is_accepted": false, "score": 0, "last_activity_date": 1434506405, "creation_date": 1434506405, "answer_id": 30881123, "question_id": 30880196, "link": "https://stackoverflow.com/questions/30880196/heroku-push-rejected-failed-to-compile-ruby-app/30881123#30881123", "title": "heroku push rejected failed to compile Ruby app", "body": "<p>put this line in your application.rb</p>\n\n<pre><code>config.assets.initialize_on_precompile = false\n</code></pre>\n"}], "owner": {"reputation": 69, "user_id": 4975863, "user_type": "registered", "accept_rate": 14, "profile_image": "https://www.gravatar.com/avatar/da4ac23fd65066d1aa64660bec26dfba?s=128&d=identicon&r=PG&f=1", "display_name": "nour", "link": "https://stackoverflow.com/users/4975863/nour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 931, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434506405, "creation_date": 1434499006, "question_id": 30880196, "link": "https://stackoverflow.com/questions/30880196/heroku-push-rejected-failed-to-compile-ruby-app", "title": "heroku push rejected failed to compile Ruby app", "body": "<p>heroku push rejected failed to compile Ruby app </p>\n\n<p>heres my code why its not working please help i spend the whole day on it</p>\n\n<p>gem file </p>\n\n<pre><code>    source 'https://rubygems.org'\n\ngem 'rails', '4.1.8'\n\ngem 'sass-rails', '~&gt; 4.0.3'\ngem 'uglifier', '&gt;= 1.3.0'\ngem 'coffee-rails', '~&gt; 4.0.0'\ngem 'jquery-rails'\ngem 'turbolinks'\ngem 'jbuilder', '~&gt; 2.0'\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\ngem 'spring',        group: :development\n\ngroup :development do\n  gem \"interactive_editor\"\n  gem \"hirb\"\n  gem \"awesome_print\"\n  gem 'byebug'\nend\n\ngem \"rails_12factor\"\ngem 'bootstrap-sass', '~&gt;3.2.0'\n\ngem 'compass-rails'\n\ngem \"animate-rails\"\ngem 'rails_log_stdout',           github: 'heroku/rails_log_stdout'\ngem 'rails3_serve_static_assets', github: 'heroku/rails3_serve_static_assets'\n\ngroup :production do\n  gem 'thin'  \nend\n\ngroup :test, :production do\n  gem 'pg'\nend\n\ngroup :development do\n  gem 'sqlite3'\nend\n</code></pre>\n\n<p>when i put git push heroku master</p>\n\n<pre><code>    Counting objects: 183, done.\nDelta compression using up to 4 threads.\nCompressing objects: 100% (167/167), done.\nWriting objects: 100% (183/183), 956.75 KiB | 0 bytes/s, done.\nTotal 183 (delta 54), reused 0 (delta 0)\nremote: Compressing source files... done.\nremote: Building source:\nremote: \nremote: -----&gt; Removing .DS_Store files\nremote: -----&gt; Ruby app detected\nremote: -----&gt; Compiling Ruby/Rails\nremote: -----&gt; Using Ruby version: ruby-2.0.0\nremote: -----&gt; Installing dependencies using 1.9.7\nremote:        Running: bundle install --without development:test --path vendor/bundle --binstubs vendor/bundle/bin -j4 --deployment\nremote:        Fetching gem metadata from https://rubygems.org/...........\nremote:        Fetching version metadata from https://rubygems.org/...\nremote:        Fetching dependency metadata from https://rubygems.org/..\nremote:        Fetching git://github.com/heroku/rails3_serve_static_assets.git\nremote:        Fetching git://github.com/heroku/rails_log_stdout.git\nremote:        Rubygems 2.0.14 is not threadsafe, so your gems must be installed one at a time. Upgrade to Rubygems 2.1.0 or higher to enable parallel gem installation.\nremote:        Installing rake 10.4.2\nremote:        Installing i18n 0.7.0\nremote:        Installing json 1.8.3\nremote:        Installing minitest 5.7.0\nremote:        Installing thread_safe 0.3.5\nremote:        Installing tzinfo 1.2.2\nremote:        Installing activesupport 4.1.8\nremote:        Installing builder 3.2.2\nremote:        Installing erubis 2.7.0\nremote:        Installing actionview 4.1.8\nremote:        Installing rack 1.5.4\nremote:        Installing rack-test 0.6.3\nremote:        Installing actionpack 4.1.8\nremote:        Installing mime-types 2.6.1\nremote:        Installing mail 2.6.3\nremote:        Installing actionmailer 4.1.8\nremote:        Installing activemodel 4.1.8\nremote:        Installing arel 5.0.1.20140414130214\nremote:        Installing activerecord 4.1.8\nremote:        Using bundler 1.9.7\nremote:        Installing thor 0.19.1\nremote:        Installing railties 4.1.8\nremote:        Installing hike 1.2.3\nremote:        Installing multi_json 1.11.1\nremote:        Installing tilt 1.4.1\nremote:        Installing sprockets 2.11.0\nremote:        Installing sprockets-rails 2.3.1\nremote:        Installing rails 4.1.8\nremote:        Installing animate-rails 1.0.8\nremote:        Installing sass 3.2.0\nremote:        Installing bootstrap-sass 3.2.0.2\nremote:        Installing chunky_png 1.3.4\nremote:        Installing coffee-script-source 1.9.1.1\nremote:        Installing execjs 2.5.2\nremote:        Installing coffee-script 2.4.1\nremote:        Installing coffee-rails 4.0.1\nremote:        Installing fssm 0.2.10\nremote:        Installing compass 0.12.2\nremote:        Installing compass-rails 2.0.0\nremote:        Installing daemons 1.2.2\nremote:        Installing eventmachine 1.0.7\nremote:        Installing jbuilder 2.3.0\nremote:        Installing jquery-rails 3.1.3\nremote:        Installing pg 0.18.2\nremote:        Using rails3_serve_static_assets 0.0.1 from git://github.com/heroku/rails3_serve_static_assets.git (at master)\nremote:        Installing rails_serve_static_assets 0.0.4\nremote:        Installing rails_stdout_logging 0.0.3\nremote:        Installing rails_12factor 0.0.3\nremote:        Using rails_log_stdout 0.0.1 from git://github.com/heroku/rails_log_stdout.git (at master)\nremote:        Installing rdoc 4.2.0\nremote:        Installing sass-rails 4.0.3\nremote:        Installing sdoc 0.4.1\nremote:        Installing thin 1.6.3\nremote:        Installing turbolinks 2.5.3\nremote:        Installing uglifier 2.7.1\nremote:        Bundle complete! 22 Gemfile dependencies, 55 gems now installed.\nremote:        Gems in the groups development and test were not installed.\nremote:        Bundled gems are installed into ./vendor/bundle.\nremote:        Post-install message from rdoc:\nremote:        Depending on your version of ruby, you may need to install ruby rdoc/ri data:\nremote:        &lt;= 1.8.6 : unsupported\nremote:        = 1.8.7 : gem install rdoc-data; rdoc-data --install\nremote:        = 1.9.1 : gem install rdoc-data; rdoc-data --install\nremote:        &gt;= 1.9.2 : nothing to do! Yay!\nremote:        Bundle completed (91.69s)\nremote:        Cleaning up the bundler cache.\nremote: -----&gt; Preparing app for Rails asset pipeline\nremote:        Running: rake assets:precompile\nremote:        I, [2015-06-16T23:45:18.654868 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/about-img-b9ffcdc5dbcaf14d02ba4da8a51e16de.jpg\nremote:        I, [2015-06-16T23:45:18.657482 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/client_logo1-f60fdf8601b400482240ba15987052f2.png\nremote:        I, [2015-06-16T23:45:18.659602 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/client_logo2-5d31c470fe3c5fc4375acd974ea017b3.png\nremote:        I, [2015-06-16T23:45:18.661911 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/client_logo3-71d18b824e166043f06220dc5b3869f3.png\nremote:        I, [2015-06-16T23:45:18.664169 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/client_logo4-e5a0a65672a466106706f4d3d3595c73.png\nremote:        I, [2015-06-16T23:45:18.666333 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/client_logo5-37553648e07af3d0d140efb9d747b215.png\nremote:        I, [2015-06-16T23:45:18.668445 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/logo-7028972b9819c7cb22b75852d8228127.png\nremote:        I, [2015-06-16T23:45:18.670928 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/main_device_image-d00f490caaa7897d4fa337a65049f24e.png\nremote:        I, [2015-06-16T23:45:18.673392 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/portfolio_pic1-1b116177a910bd2948fd867b00a7f680.jpg\nremote:        I, [2015-06-16T23:45:18.675587 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/portfolio_pic2-0a575a1420a6dea896ff9ec7ab465eac.jpg\nremote:        I, [2015-06-16T23:45:18.678345 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/portfolio_pic3-379efb3bae8baa74ffc35eccd22ab026.jpg\nremote:        I, [2015-06-16T23:45:18.680612 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/portfolio_pic4-5c73d9b8fc7bf24c980d1e96472dfa7b.jpg\nremote:        I, [2015-06-16T23:45:18.683032 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/portfolio_pic5-1a09b66d3a7688dfd1bbd2c2f58c0699.jpg\nremote:        I, [2015-06-16T23:45:18.685502 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/portfolio_pic6-738f93240d99deee8e6fd63e98468245.jpg\nremote:        I, [2015-06-16T23:45:18.687864 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/portfolio_pic7-0b8633bdf00db4d09a02fa0714e2230c.jpg\nremote:        I, [2015-06-16T23:45:18.690523 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/portfolio_pic8-75990f1d6efe11d862c3ec599cfbe664.jpg\nremote:        I, [2015-06-16T23:45:18.692731 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/team_pic1-8b292aa638afadc831c66895d6887158.jpg\nremote:        I, [2015-06-16T23:45:18.694899 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/team_pic2-a89aa048a515f2aef80f2f93265b86f4.jpg\nremote:        I, [2015-06-16T23:45:18.697225 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/team_pic3-b544d99fdc6b2c6bbcfefb810e3f36d3.jpg\nremote:        I, [2015-06-16T23:45:18.703280 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/twitter_bird-1e64e0bfe6393a56f76ac189e25e7b4f.png\nremote:        I, [2015-06-16T23:45:26.018610 #995]  INFO -- : Writing /tmp/build_f081972916d04442370a144719bac013/public/assets/application-1cac7178e74e0c5d1600dbfb79d4e8c9.js\nremote:        rake aborted!\nremote:        ArgumentError: wrong number of arguments (3 for 2)\nremote:        (in /tmp/build_f081972916d04442370a144719bac013/app/assets/stylesheets/bootstrap_and_overrides.css.scss)\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/importers/filesystem.rb:109:in `find_real_file'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-rails-4.0.3/lib/sass/rails/importer.rb:80:in `engine_from_path'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-rails-4.0.3/lib/sass/rails/importer.rb:27:in `find_relative'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/import_node.rb:45:in `import'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/import_node.rb:25:in `imported_file'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/import_node.rb:34:in `css_import?'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/perform.rb:214:in `visit_import'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/base.rb:37:in `visit'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/perform.rb:97:in `visit'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/base.rb:53:in `block in visit_children'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/base.rb:53:in `map'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/base.rb:53:in `visit_children'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/perform.rb:106:in `block in visit_children'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/perform.rb:118:in `with_environment'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/perform.rb:105:in `visit_children'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/base.rb:37:in `block in visit'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/perform.rb:125:in `visit_root'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/base.rb:37:in `visit'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/perform.rb:97:in `visit'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/visitors/perform.rb:7:in `visit'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/tree/root_node.rb:20:in `render'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/engine.rb:315:in `_render'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sass-3.2.0/lib/sass/engine.rb:262:in `render'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/compass-rails-2.0.0/lib/compass-rails/patches/sass_importer.rb:29:in `evaluate'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/tilt-1.4.1/lib/tilt/template.rb:103:in `render'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/context.rb:197:in `block in evaluate'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/context.rb:194:in `each'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/context.rb:194:in `evaluate'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/processed_asset.rb:12:in `initialize'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:374:in `new'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:374:in `block in build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:395:in `circular_call_protection'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:373:in `build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/index.rb:94:in `block in build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/caching.rb:58:in `cache_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/index.rb:93:in `build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:287:in `find_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/index.rb:61:in `find_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/processed_asset.rb:111:in `block in resolve_dependencies'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/processed_asset.rb:105:in `each'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/processed_asset.rb:105:in `resolve_dependencies'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/processed_asset.rb:97:in `build_required_assets'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/processed_asset.rb:16:in `initialize'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:374:in `new'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:374:in `block in build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:395:in `circular_call_protection'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:373:in `build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/index.rb:94:in `block in build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/caching.rb:58:in `cache_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/index.rb:93:in `build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:287:in `find_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/index.rb:61:in `find_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/bundled_asset.rb:16:in `initialize'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:377:in `new'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:377:in `build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/index.rb:94:in `block in build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/caching.rb:58:in `cache_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/index.rb:93:in `build_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/base.rb:287:in `find_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/index.rb:61:in `find_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/manifest.rb:211:in `block in find_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/manifest.rb:257:in `benchmark'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/manifest.rb:210:in `find_asset'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/manifest.rb:119:in `block in compile'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/manifest.rb:118:in `each'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/sprockets/manifest.rb:118:in `compile'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-rails-2.3.1/lib/sprockets/rails/task.rb:70:in `block (3 levels) in define\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-2.11.0/lib/rake/sprocketstask.rb:146:in `with_logger'\nremote:        /tmp/build_f081972916d04442370a144719bac013/vendor/bundle/ruby/2.0.0/gems/sprockets-rails-2.3.1/lib/sprockets/rails/task.rb:69:in `block (2 levels) in define\nremote:        Tasks: TOP =&gt; assets:precompile\nremote:        (See full trace by running task with --trace)\nremote:  !\nremote:  !     Precompiling assets failed.\nremote:  !\nremote: \nremote:  !     Push rejected, failed to compile Ruby app\nremote: \nremote: Verifying deploy....\nremote: \nremote: !   Push rejected to seamless-bridge-ltd.\nremote: \nTo https://git.heroku.com/seamless-bridge-ltd.git\n ! [remote rejected] master -&gt; master (pre-receive hook declined)\nerror: failed to push some refs to 'https://git.heroku.com/seamless-bridge-ltd.git'\n</code></pre>\n\n<p>what should i do , i tried many time to add and remove gems to work but its not</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 3365, "user_id": 2200277, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f0a95ec105629f01fab28845338ab409?s=128&d=identicon&r=PG", "display_name": "Wally Altman", "link": "https://stackoverflow.com/users/2200277/wally-altman"}, "is_accepted": true, "score": 0, "last_activity_date": 1434499092, "creation_date": 1434499092, "answer_id": 30880213, "question_id": 30880064, "link": "https://stackoverflow.com/questions/30880064/how-can-i-use-unicode-korean-characters-in-a-ruby-program/30880213#30880213", "title": "How can I use Unicode/Korean characters in a Ruby program?", "body": "<p>You can set the encoding when you read the file using the <code>encoding</code> option to <code>File.read</code>:</p>\n\n<pre><code>correctly_encoded_text = File.read(\"my_korean_text.txt\", encoding: \"UTF-8\")\n</code></pre>\n"}], "owner": {"reputation": 2162, "user_id": 3204212, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/fd870d2b3afe56cd9c59c28c0fc715bd?s=128&d=identicon&r=PG&f=1", "display_name": "GreenTriangle", "link": "https://stackoverflow.com/users/3204212/greentriangle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 164, "favorite_count": 0, "accepted_answer_id": 30880213, "answer_count": 1, "score": 0, "last_activity_date": 1434501491, "creation_date": 1434498189, "last_edit_date": 1434501491, "question_id": 30880064, "link": "https://stackoverflow.com/questions/30880064/how-can-i-use-unicode-korean-characters-in-a-ruby-program", "title": "How can I use Unicode/Korean characters in a Ruby program?", "body": "<p>I've been Googling this for the last two hours, and there are tons and tons of StackOverflow posts claiming to solve the problem, and not a single one of them has worked for me. I'm confused and terribly frustrated.</p>\n\n<p>I have a text file that contains Korean text. I simply want to read it into my Ruby 2.1 program and do some stuff with it. </p>\n\n<p>But whenever I read the file in, all the Unicode characters get replaced by <code>\\u2713</code> and the like.</p>\n\n<p>I've Googled this issue, and the suggestions are to:</p>\n\n<ul>\n<li>Put <code># encoding: UTF-8</code> as the first line of the program. This changed nothing.</li>\n<li>Call <code>encode('utf-8')</code> on the strings. This changed nothing.</li>\n<li>Call <code>force_encoding('utf-8')</code> on the strings. This changed nothing.</li>\n<li>Change <code>$KCODE</code> to 'UTF-8'. This changed nothing.</li>\n</ul>\n\n<p>What's especially frustrating is that I wrote the original text file using a Ruby program in the first place. I pulled text off a webpage and wrote it to a file, and the Korean characters were written just fine. I just can't read them back <em>out of</em> that file.</p>\n"}, {"tags": ["ruby", "hash"], "comments": [{"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 2, "creation_date": 1434499713, "post_id": 30879822, "comment_id": 49801460, "body": "A good start is to show what you have written that you are having specific problems on, this will allow us to answer specifically.  You may want to read the <a href=\"http://stackoverflow.com/help/how-to-ask\">How to ask</a> resource available.  Welcome to SO!"}, {"owner": {"reputation": 6881, "user_id": 477047, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/Qh2bO.gif?s=128&g=1", "display_name": "David Unric", "link": "https://stackoverflow.com/users/477047/david-unric"}, "reply_to_user": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 0, "creation_date": 1434503900, "post_id": 30879822, "comment_id": 49802549, "body": "You can read the standard input with <a href=\"http://ruby-doc.org/core-2.2.2/Kernel.html#method-i-gets\" rel=\"nofollow noreferrer\">gets</a> but as @vgoff already wrote, you&#39;d need to show specific part of your code you have issue with."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1434516004, "post_id": 30879822, "comment_id": 49805540, "body": "First read up on Ruby&#39;s <a href=\"http://ruby-doc.org/core-2.1.5/ARGF.html\" rel=\"nofollow noreferrer\">ARGF</a> class. Now do the following in IRB: <code>File.write(&#39;temp.rb&#39;,&#39;puts ARGV&#39;) #=&gt; 9</code>. 9 characters (<code>&quot;puts ARGV&quot;</code>) were written to the file <code>temp.rb</code>. You can confirm that with <code>File.read( &#39;temp.rb&#39;) #=&gt; &quot;puts ARGV&quot;</code>. Now exit IRB and enter the following from the command line (no quotes): <code>ruby temp.rb cat dog</code>. That should cause  <code>cat</code> and <code>dog</code> to be printed.  You have told Ruby to execute the code in the file <code>temp.rb</code>. (cont..)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1434516739, "post_id": 30879822, "comment_id": 49805777, "body": "(...cont.)   The code in the file <code>temp.rb</code> (the single line <code>&quot;puts ARGV&quot;</code>) has access to the array <code>ARGV</code> which equals <code>[&#39;temp.rb&#39;, &#39;cat&#39;, &#39;dog&#39;]</code>.  In your problem It seems the line entered at the command line will be something like <code>ruby temp.rb amino.rb</code>, where <code>amino.rb</code> is a file containing a string of amino acid abbreviations such as <code>&quot;ABC&quot;</code>. So, in <code>temp.rb</code> <code>ARGV[1]</code> will equal a string giving the name of the file you need to read from (<code>&quot;amino.rb&quot;&#39;). Let&#39;s say you read </code>&quot;ABC&quot;` from that file into a string called <code>abbrevs</code>. (cont..)"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1434517276, "post_id": 30879822, "comment_id": 49805926, "body": "(..cont.) Now you can execute (in <code>temp.rb</code>) <code>abbrevs.each_char { |c| &lt;some code&gt; }</code>, where <code>&lt;some code&gt;</code> converts the character <code>c</code> to the full name of the amino acid and then prints it. (I presume &quot;output the corresponding amino acid&quot; means to print it.) btw, <code>File</code> is a subclass of <code>IO</code>.  The class methods <code>File::write</code> and <code>File::read</code> are actually <a href=\"http://ruby-doc.org/core-2.2.0/IO.html#method-c-write\" rel=\"nofollow noreferrer\">IO#write</a> and <a href=\"http://ruby-doc.org/core-2.2.0/IO.html#method-c-read\" rel=\"nofollow noreferrer\">IO#read</a>.  Good luck!"}, {"owner": {"reputation": 45, "user_id": 4975162, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10207044630738276/picture?type=large", "display_name": "Rachael Hardison", "link": "https://stackoverflow.com/users/4975162/rachael-hardison"}, "edited": false, "score": 0, "creation_date": 1434631125, "post_id": 30879822, "comment_id": 49868281, "body": "Please see above, I edited in the code that I have so far... sorry!"}, {"owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "edited": false, "score": 0, "creation_date": 1434778297, "post_id": 30879822, "comment_id": 49934973, "body": "They key here is ARGF.  That is to read values from a file.  ARGV is to get those arguments you pass in the way you are passing ABC (unless ABC is a file).  The documentation for this is not the simplest to find... <a href=\"http://ruby-doc.org/core-2.2.2/doc/globals_rdoc.html\" rel=\"nofollow noreferrer\">ARGF documentation</a> specifically look for ARGF which will tell you to look at <code>$&lt;</code>.  It is not what you want to use, I think, and causing you some pain.  More info to come..."}], "answers": [{"tags": [], "owner": {"reputation": 9786, "user_id": 485864, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f34b46a9a4723bdbc6e1fdcf71b08517?s=128&d=identicon&r=PG", "display_name": "vgoff", "link": "https://stackoverflow.com/users/485864/vgoff"}, "is_accepted": false, "score": 0, "last_activity_date": 1434881584, "last_edit_date": 1434881584, "creation_date": 1434779166, "answer_id": 30950732, "question_id": 30879822, "link": "https://stackoverflow.com/questions/30879822/using-argf-and-hashes/30950732#30950732", "title": "Using ARGF and hashes?", "body": "<p>You are using <code>ARGF</code> when you are wanting to use <code>ARGV</code> based on your example code.</p>\n\n<p><a href=\"http://codereview.stackexchange.com\">code review</a> will give you other avenues for style, etc.  But I think this will get you going.</p>\n\n<pre><code>#!/usr/bin/env ruby\ndef convert(value)\n  aminos = { 'A' =&gt; 'alanine', 'B' =&gt; 'aspartate/asparagine', 'C' =&gt; 'cystine' }\n  aminos[value.upcase]\nend\n\nARGV.to_s.each_char do |string|\n  puts convert string\nend\n</code></pre>\n\n<p>You could, of course, put that statement inside your method, but really methods should do a very focused thing.  Passing it an argument, rather than it acting on ARGV directly gives it freedom to be used in different ways.  A method should do one thing, generally.  Keeps them easier to maintain.</p>\n"}], "owner": {"reputation": 45, "user_id": 4975162, "user_type": "registered", "accept_rate": 25, "profile_image": "https://graph.facebook.com/10207044630738276/picture?type=large", "display_name": "Rachael Hardison", "link": "https://stackoverflow.com/users/4975162/rachael-hardison"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 87, "favorite_count": 0, "answer_count": 1, "score": -3, "last_activity_date": 1434881584, "creation_date": 1434496540, "last_edit_date": 1434631095, "question_id": 30879822, "link": "https://stackoverflow.com/questions/30879822/using-argf-and-hashes", "title": "Using ARGF and hashes?", "body": "<p>I'm trying to write a ruby program that contains a method that will convert a single letter amino acid code into it's corresponding amino acid name after reading from ARGF. </p>\n\n<p>Here's the code that I have so far:</p>\n\n<pre><code>#!/usr/bin/ruby\n\ndef convert\naminos = Hash.new\naminos = {\"A\" =&gt; \"alanine\", \"B\" =&gt; \"aspartate/asparagine\", \"C\" =&gt; \"cystine\"}\noutput = aminos.values_at()\nputs \"#{output}\"\nend\n\nARGF.each_char do convert\nend\n</code></pre>\n\n<p>If I run this program, it does the following:</p>\n\n<pre><code>$ ruby amino_acid.rb ABC \n[]\n[]\n[]\n</code></pre>\n\n<p>When what I want it to do is this:</p>\n\n<pre><code>$ ruby amino_acid.rb ABC\nalanine\naspartate/asparagine\ncystine\n</code></pre>\n\n<p>I am not sure what to put in the parentheses after</p>\n\n<pre><code>aminos.values_at\n</code></pre>\n\n<p>or if I am even on the right track?</p>\n\n<p>I think I have to pass a parameter to this method, maybe something like</p>\n\n<pre><code>def convert {|k,v| puts \"#{v}}\n</code></pre>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1434496458, "post_id": 30879783, "comment_id": 49800591, "body": "Can you please post your <code>db&#47;seeds.rb</code> file?"}, {"owner": {"reputation": 19518, "user_id": 968969, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/0802303aaa5f03f4cec652171dffcbc7?s=128&d=identicon&r=PG", "display_name": "Tony Hopkinson", "link": "https://stackoverflow.com/users/968969/tony-hopkinson"}, "edited": false, "score": 0, "creation_date": 1434496578, "post_id": 30879783, "comment_id": 49800634, "body": "Well I&#39;d be looking to see if my new migration(s) / models matched up with the data I was seeding."}, {"owner": {"reputation": 9572, "user_id": 2305826, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xRwWw.png?s=128&g=1", "display_name": "MarsAtomic", "link": "https://stackoverflow.com/users/2305826/marsatomic"}, "edited": false, "score": 3, "creation_date": 1434496578, "post_id": 30879783, "comment_id": 49800635, "body": "You probably don&#39;t have to post the whole seeds.rb.  Find the line where the seeding fails. It&#39;s probably trying to create an object that depends on another object that you haven&#39;t yet created. Just change the order in which you seed your objects to fix the problem."}], "answers": [{"comments": [{"owner": {"reputation": 2088, "user_id": 3701433, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/wsvfr.jpg?s=128&g=1", "display_name": "Prudhvi", "link": "https://stackoverflow.com/users/3701433/prudhvi"}, "edited": false, "score": 0, "creation_date": 1446578261, "post_id": 33506962, "comment_id": 54797980, "body": "Try to avoid link-only answers and put the information in the link as answer here."}, {"owner": {"reputation": 1, "user_id": 1579343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1beda58e1d6758b14bbccd42add279?s=128&d=identicon&r=PG", "display_name": "Ricardo Pacheco", "link": "https://stackoverflow.com/users/1579343/ricardo-pacheco"}, "reply_to_user": {"reputation": 2088, "user_id": 3701433, "user_type": "registered", "accept_rate": 46, "profile_image": "https://i.stack.imgur.com/wsvfr.jpg?s=128&g=1", "display_name": "Prudhvi", "link": "https://stackoverflow.com/users/3701433/prudhvi"}, "edited": false, "score": 0, "creation_date": 1584038386, "post_id": 33506962, "comment_id": 107321433, "body": "@Prudhvi understood!"}], "tags": [], "owner": {"reputation": 1, "user_id": 1579343, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/bf1beda58e1d6758b14bbccd42add279?s=128&d=identicon&r=PG", "display_name": "Ricardo Pacheco", "link": "https://stackoverflow.com/users/1579343/ricardo-pacheco"}, "is_accepted": false, "score": 0, "last_activity_date": 1446577021, "creation_date": 1446577021, "answer_id": 33506962, "question_id": 30879783, "link": "https://stackoverflow.com/questions/30879783/rails-4-rake-dbseed-nomethoderror-undefined-method-name-for-nilnilclass/33506962#33506962", "title": "Rails 4 - rake db:seed NoMethodError: undefined method `name&#39; for nil:NilClass", "body": "<p>Following the issue: <a href=\"https://github.com/activescaffold/active_scaffold/issues/380\" rel=\"nofollow\">https://github.com/activescaffold/active_scaffold/issues/380</a></p>\n\n<p>Try update for rails 4.1.2 version</p>\n"}], "owner": {"reputation": 725, "user_id": 3996221, "user_type": "registered", "accept_rate": 45, "profile_image": "https://i.stack.imgur.com/s6t5T.jpg?s=128&g=1", "display_name": "Nigel Earle", "link": "https://stackoverflow.com/users/3996221/nigel-earle"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1294, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1446577021, "creation_date": 1434496286, "last_edit_date": 1434499911, "question_id": 30879783, "link": "https://stackoverflow.com/questions/30879783/rails-4-rake-dbseed-nomethoderror-undefined-method-name-for-nilnilclass", "title": "Rails 4 - rake db:seed NoMethodError: undefined method `name&#39; for nil:NilClass", "body": "<p>After successfully ran <code>rake db:migrate</code>, trying to run <code>rake db:seed --trace</code> but getting peculiar error <code>NoMethodError: undefined method 'name' for nil:NilClass</code>.</p>\n\n<p>Not exactly sure what the issue is. Any advice would be greatly appreciated. Thanks!!</p>\n\n<pre><code>/usr/local/bundle/gems/activerecord-4.1.1/lib/active_record/associations/has_many_association.rb:74: warning: circular argument reference - reflection\n/usr/local/bundle/gems/activerecord4.1.1/lib/active_record/associations/has_many_association.rb:78: warning: circular argument reference - reflection\n/usr/local/bundle/gems/activerecord4.1.1/lib/active_record/associations/has_many_association.rb:82: warning: circular argument reference - reflection\n/usr/local/bundle/gems/activerecord4.1.1/lib/active_record/associations/has_many_association.rb:101: warning: circular argument reference - reflection\nrake aborted!\n\nNoMethodError: undefined method `name' for nil:NilClass\n/usr/local/bundle/gems/activerecord-4.1.1/lib/active_record/associations/has_many_association.rb:79:in `cached_counter_attribute_name'\n/usr/local/bundle/gems/activerecord-4.1.1/lib/active_record/associations/has_many_association.rb:75:in `has_cached_counter?'\n/usr/local/bundle/gems/activerecord-4.1.1/lib/active_record/associations/has_many_association.rb:83:in `update_counter'\n/usr/local/bundle/gems/activerecord-4.1.1/lib/active_record/associations/has_many_through_association.rb:65:in `insert_record'\n/usr/local/bundle/gems/activerecord-4.1.1/lib/active_record/associations/collection_association.rb:522:in `block (2 levels) in concat_records'\n\n#db/seeds.rb\n\n APP_KEYWORDS = YAML.load_file(\"#{Rails.root}/db/app_keywords.yml\")\n User.create(email: 'name@name.com', password: 'passwrd', password_confirmation: 'passwrd')\n User.create(email: 'name@name.com', password: 'psswrd', password_confirmation: 'psswrd')\n User.create(email: 'name@name.com', password: 'password', password_confirmation: 'password')\n User.create(email: 'name@name.com', password: 'password', password_confirmation: 'password')\n\n APP_KEYWORDS[\"app\"].each do |key,value|\n   app = App.find_or_create_by(name:key.downcase)\n   value.each do |val|\n     app.app_keywords.find_or_create_by(keyword:val.downcase)\n   end\n end\n\n [\"admin\",\"moderator\",\"venue_editor\",\"user\"].each do |role|\n    Role.find_or_create_by(name:role)\n end\n\n user = User.first\n user.add_role :admin\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 750, "user_id": 1801879, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/d8f2eec3417afa4692430fc0f19d201a?s=128&d=identicon&r=PG", "display_name": "user1801879", "link": "https://stackoverflow.com/users/1801879/user1801879"}, "edited": false, "score": 0, "creation_date": 1434495978, "post_id": 30879150, "comment_id": 49800426, "body": "An order is not a person, so you can&#39;t really say order = person. A person belonging to an order is a person, so you have to say order.person = person"}, {"owner": {"reputation": 4397, "user_id": 1945948, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/5ecf1cdd8eed500e1e1df86d036b69a7?s=128&d=identicon&r=PG&f=1", "display_name": "atw", "link": "https://stackoverflow.com/users/1945948/atw"}, "edited": false, "score": 0, "creation_date": 1434553683, "post_id": 30879150, "comment_id": 49830097, "body": "<code>o.person = p # this is equivalent to: o.person_id = p.id, yes?</code> , No that is not the case. Order does not have a person attribute."}], "answers": [{"tags": [], "owner": {"reputation": 13534, "user_id": 644810, "user_type": "registered", "accept_rate": 83, "profile_image": "https://i.stack.imgur.com/ADwSQ.png?s=128&g=1", "display_name": "Rustam A. Gasanov", "link": "https://stackoverflow.com/users/644810/rustam-a-gasanov"}, "is_accepted": false, "score": 2, "last_activity_date": 1434493763, "creation_date": 1434493763, "answer_id": 30879352, "question_id": 30879150, "link": "https://stackoverflow.com/questions/30879150/basic-rails-association/30879352#30879352", "title": "Basic Rails Association", "body": "<blockquote>\n  <p>Question 1: Why do we have to say \"o.person instead of o\" in line 3?</p>\n</blockquote>\n\n<p><code>Order</code> belongs to a <code>Person</code>, so on that line you specify the exact person who owns that order <code>o</code> by typing <code>o.person = p</code>. <code>o = p</code> doesn't make any sense.</p>\n\n<blockquote>\n  <p>Question 2: And why are we saying \"p.orders\" in line 5?</p>\n</blockquote>\n\n<p>Because each <code>Person</code> has many orders, so you can get them by typing <code>p.orders</code></p>\n\n<blockquote>\n  <p>Question 3: Also, what does this \"o.person_id = p.id\" mean exactly? I'm assuming it's associating the tables with each other?</p>\n</blockquote>\n\n<p>Yes, this sets the owner of the order.</p>\n\n<p>Ah, I see additional question:</p>\n\n<blockquote>\n  <p>o.person = p (this is equivalent to: o.person_id = p.id, yes?)</p>\n</blockquote>\n\n<p>Not always, but in most cases. Say, for polymorphic associations it will not only set <code>id</code>, but also a <code>type</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": false, "score": 2, "last_activity_date": 1434553242, "last_edit_date": 1434553242, "creation_date": 1434494942, "answer_id": 30879570, "question_id": 30879150, "link": "https://stackoverflow.com/questions/30879150/basic-rails-association/30879570#30879570", "title": "Basic Rails Association", "body": "<blockquote>\n  <p>Question 1: Why do we have to say \"o.person instead of o\" in line 3?</p>\n</blockquote>\n\n<p>When you declared that an Order object <code>belongs_to :person</code>, rails created a column in the Orders table called <code>person_id</code>.  In the Orders table, the column names are the attributes of an Order object, and you refer to the attributes of an Order object using dot notation, e.g. <code>o.total</code>. </p>\n\n<p>As a convenience, rails lets you assign the whole Person object to an Order attribute named <code>person</code>, then rails extracts the Person id, and rails inserts the id into the <code>person_id</code> column in the Orders table. </p>\n\n<p>Your question is sort of like asking, why you have to write:</p>\n\n<pre><code>o.total = 10\n</code></pre>\n\n<p>instead of</p>\n\n<pre><code>o = 10\n</code></pre>\n\n<p>The last line does not tell rails what column in the Orders table that the value should go in.</p>\n\n<p>A table is just a grid of column names and values:</p>\n\n<pre><code>Orders:\n\nid     total    person_id   timestamp1   timestamp2\n\n1       10         1          1234567     4567890\n2       30         3          12342134    1324123423\n3       20         1          1341234324  12341342344\n</code></pre>\n\n<p>Then if you write:</p>\n\n<pre><code>o = Order.find(2)\n</code></pre>\n\n<p>Then o will be assigned an Order object whose values for total, person_id, timestamp1, and timestap2, will be the values in the row where the id is equal to 2.</p>\n\n<p>Next, if you write:</p>\n\n<pre><code>o = 10\n</code></pre>\n\n<p>What does that mean?  Does it mean that all columns for o's row should be set to the value 10?  Set the first column to 10?  Set the last column to 10?  Isn't it much clearer to write o.person = 10?</p>\n\n<blockquote>\n  <p>Question 2: And why are we saying \"p.orders\" in line 5?</p>\n</blockquote>\n\n<p>That retrieves all the orders associated with a Person object--remember you declared that a Person object <code>has_many</code> Orders.  Once again, that is a convenience provided by Rails--not declaring the associations would force you to write:</p>\n\n<pre><code>target_person_id = 1\n@orders = Order.where(person_id: target_person_id)\n</code></pre>\n\n<blockquote>\n  <p>Question 3: Also, what does this \"o.person_id = p.id\" mean exactly?\n  I'm assuming it's associating the tables with each other?</p>\n</blockquote>\n\n<p><code>p</code> is a Person object, e.g. one of these rows:</p>\n\n<pre><code>People:\n\nid    first      last   middle   order_id      timestamp1   timestamp2\n\n1      Tom       Thumb    T         1            4567890       1234456\n2      Wizard      Id     of        3           1324123423     123434\n3      Tom       Thumb    T         2            2134234       1234234\n</code></pre>\n\n<p>If p is a Person object created from the the last row of values, then p.id is equal to 3, which means that the line:</p>\n\n<pre><code>o.person_id = p.id\n</code></pre>\n\n<p>is equivalent to:</p>\n\n<pre><code>o.person_id = 3\n</code></pre>\n\n<p>Next, o is an Order object, and the Orders table has a column named <code>person_id</code> which was created when you declared: <code>belongs_to: person</code>, and the line:</p>\n\n<pre><code>o.person_id = 3\n</code></pre>\n\n<p>instructs rails to insert 3 for the value of o's <code>person_id</code> column. If o's id is 1, then you get this:</p>\n\n<pre><code>Orders:\n\n    id     total    person_id   timestamp1   timestamp2  \n\n=&gt;  1       10         3 &lt;=       1234567     4567890\n    2       30         3          12342134    1324123423\n    3       20         1          1341234324  12341342344\n</code></pre>\n"}], "owner": {"reputation": 1428, "user_id": 2730725, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/1a694df4d71660fc4d84ccbb92469e38?s=128&d=identicon&r=PG&f=1", "display_name": "user273072545345", "link": "https://stackoverflow.com/users/2730725/user273072545345"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1434553242, "creation_date": 1434492727, "last_edit_date": 1434517310, "question_id": 30879150, "link": "https://stackoverflow.com/questions/30879150/basic-rails-association", "title": "Basic Rails Association", "body": "<p>This is a totally a beginner question. I'm embarrassed to be asking it, but here goes.</p>\n\n<p>We have two models: <code>Person</code> and <code>Order</code>.</p>\n\n<p><code>Person</code> has attributes <code>:first_name, :last_name, :age</code>. <code>Order</code> has one attribute, <code>:total</code>.</p>\n\n<p><code>Person</code> <code>has_many :orders</code>, and <code>Order</code> <code>belongs_to :person</code>.</p>\n\n<p>Let's assume that some data has been entered for both models.</p>\n\n<p>Now, we play test this relationship in console:</p>\n\n<pre><code>p = Person.first \no = Order.new(total: 100)\no.person = p # this is equivalent to: o.person_id = p.id, yes?\no.save\np.orders\n</code></pre>\n\n<p>My questions stem from line 3 and line 5.</p>\n\n<ul>\n<li>Question 1: Why do we have to say <code>o.person</code> instead of <code>o</code> in line 3? </li>\n<li>Question 2: Why are we saying <code>p.orders</code> in line 5? </li>\n<li>Question 3: What does this, <code>o.person_id = p.id</code>, mean exactly? I'm assuming it's associating the tables with each other? </li>\n</ul>\n\n<p>Let me know if this question is unclear.</p>\n\n<p>Thank you for your help!</p>\n"}, {"tags": ["ruby", "gem", "homebrew"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1434493777, "post_id": 30878994, "comment_id": 49799583, "body": "The only significant difference I see in your  <code>gem env</code> output and mine is:   <code>-RUBY EXECUTABLE: &#47;Users&#47;7stud&#47;.rvm&#47;rubies&#47;ruby-2.2.1&#47;bin&#47;ruby</code>.  The ruby version is the version I have set as the default in rvm. Then, the last thing in my shell configuration file( .bash_profile) is: <code>export PATH=&quot;$PATH:$HOME&#47;.rvm&#47;bin&quot;</code> and   <code>[[ -s &quot;$HOME&#47;.rvm&#47;scripts&#47;rvm&quot; ]] &amp;&amp; source &quot;$HOME&#47;.rvm&#47;scripts&#47;rvm&quot;</code>"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1434493910, "post_id": 30878994, "comment_id": 49799636, "body": "You can also try the zsh tests proposed by rvm here: <a href=\"https://rvm.io/integration/zsh\" rel=\"nofollow noreferrer\">rvm.io/integration/zsh</a>"}, {"owner": {"reputation": 31, "user_id": 3893154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebe71cfdd214dfac51e483ae624f8dd?s=128&d=identicon&r=PG", "display_name": "Scott Zirkel", "link": "https://stackoverflow.com/users/3893154/scott-zirkel"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1434495974, "post_id": 30878994, "comment_id": 49800425, "body": "Updated my <code>RUBY EXECUTABLE</code> to point to the rvm path. Didn&#39;t help, but good catch nonetheless."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1434499138, "post_id": 30878994, "comment_id": 49801317, "body": "<i>Updated my RUBY EXECUTABLE to point to the rvm path. Didn&#39;t help</i> Yeah, I don&#39;t have that environment variable set, so I don&#39;t think rvm reads it.  What about the zsh tests?  By the way, I stopped using homebrew because of all the path issues.  I install everything from source.  homebrew was a bust for me."}, {"owner": {"reputation": 31, "user_id": 3893154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebe71cfdd214dfac51e483ae624f8dd?s=128&d=identicon&r=PG", "display_name": "Scott Zirkel", "link": "https://stackoverflow.com/users/3893154/scott-zirkel"}, "reply_to_user": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1434559150, "post_id": 30878994, "comment_id": 49834028, "body": "Same issue for the zsh tests, no change. I&#39;m not a ruby developer, so having issues with Ruby while trying to run a non-system apache are quite frustrating. I might have to ditch it as well."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1434568187, "post_id": 30878994, "comment_id": 49839547, "body": "I&#39;ve never used the system stuff for anything.  I install my own Apache and Ruby versions--although I still haven&#39;t gotten around to re-installing Apache for my new OSX 10.10.2.  And now I remember...rvm uses homebrew for setup.  I just don&#39;t have a separate homebrew install to use as a package manager for my Mac."}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1434568770, "post_id": 30878994, "comment_id": 49839892, "body": "Can you post the steps you took to install rvm?  Do you know why your RUBY_EXECUTABLE is pointing to <code>&#47;usr&#47;local</code>?"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1434569200, "post_id": 30878994, "comment_id": 49840182, "body": "Are you using oh-my-zsh?  If so, there is a trouble shooting tip at the bottom of this page: <a href=\"https://rvm.io/support/troubleshooting\" rel=\"nofollow noreferrer\">rvm.io/support/troubleshooting</a>"}, {"owner": {"reputation": 5518, "user_id": 892260, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4b21f13b2388dab1c90910e64b84e7a9?s=128&d=identicon&r=PG", "display_name": "Tim Smith", "link": "https://stackoverflow.com/users/892260/tim-smith"}, "edited": false, "score": 0, "creation_date": 1434596874, "post_id": 30878994, "comment_id": 49849853, "body": "What other commands do you see this with? How is Nokogiri involved? A <code>brew</code> invocation should not be doing that on its own."}, {"owner": {"reputation": 31, "user_id": 3893154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebe71cfdd214dfac51e483ae624f8dd?s=128&d=identicon&r=PG", "display_name": "Scott Zirkel", "link": "https://stackoverflow.com/users/3893154/scott-zirkel"}, "edited": false, "score": 0, "creation_date": 1434641932, "post_id": 30878994, "comment_id": 49876839, "body": "I don&#39;t even know what Nokogiri is, it&#39;s just in the error message I got when trying to run certain brew commands. I ended up just wiping homebrew and user installed ruby and starting over. If it pops up again I&#39;ll let you know."}, {"owner": {"reputation": 31, "user_id": 3893154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebe71cfdd214dfac51e483ae624f8dd?s=128&d=identicon&r=PG", "display_name": "Scott Zirkel", "link": "https://stackoverflow.com/users/3893154/scott-zirkel"}, "edited": false, "score": 0, "creation_date": 1434677997, "post_id": 30878994, "comment_id": 49893414, "body": "Reinstalled homebrew and uninstalled rvm. Added rbenv just to see if that changed anything. Still getting errors from the system gems."}], "answers": [{"comments": [{"owner": {"reputation": 31, "user_id": 3893154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebe71cfdd214dfac51e483ae624f8dd?s=128&d=identicon&r=PG", "display_name": "Scott Zirkel", "link": "https://stackoverflow.com/users/3893154/scott-zirkel"}, "edited": false, "score": 0, "creation_date": 1434495072, "post_id": 30879441, "comment_id": 49800067, "body": "Added my GEM_PATH to the original post.  If that&#39;s the culprit it looks like the only fix is to edit the Homebrew files, which I&#39;d rather not do."}], "tags": [], "owner": {"reputation": 9234, "user_id": 4629810, "user_type": "registered", "accept_rate": 88, "profile_image": "https://lh4.googleusercontent.com/-gcabh64Le4c/AAAAAAAAAAI/AAAAAAAAAQ8/GquVsg_lVoA/photo.jpg?sz=128", "display_name": "Mircea", "link": "https://stackoverflow.com/users/4629810/mircea"}, "is_accepted": false, "score": 0, "last_activity_date": 1434494206, "creation_date": 1434494206, "answer_id": 30879441, "question_id": 30878994, "link": "https://stackoverflow.com/questions/30878994/ruby-gems-path-issue-system-vs-brew/30879441#30879441", "title": "Ruby gems path issue (system vs brew)", "body": "<p>looking at brew:</p>\n\n<p><a href=\"https://github.com/Homebrew/homebrew/blob/master/bin/brew\" rel=\"nofollow\">https://github.com/Homebrew/homebrew/blob/master/bin/brew</a></p>\n\n<p><a href=\"https://github.com/Homebrew/homebrew/blob/master/bin/brew#L22\" rel=\"nofollow\">https://github.com/Homebrew/homebrew/blob/master/bin/brew#L22</a></p>\n\n<p>so brew is upsetting the GEM_PATH and doing its own thing.</p>\n"}, {"tags": [], "owner": {"reputation": 31, "user_id": 3893154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebe71cfdd214dfac51e483ae624f8dd?s=128&d=identicon&r=PG", "display_name": "Scott Zirkel", "link": "https://stackoverflow.com/users/3893154/scott-zirkel"}, "is_accepted": true, "score": 0, "last_activity_date": 1434726088, "creation_date": 1434726088, "answer_id": 30941374, "question_id": 30878994, "link": "https://stackoverflow.com/questions/30878994/ruby-gems-path-issue-system-vs-brew/30941374#30941374", "title": "Ruby gems path issue (system vs brew)", "body": "<p>Found the answer, the system rubygems.rb was referencing the wrong version of Ruby. More details here: <a href=\"https://github.com/Homebrew/homebrew/issues/31220\" rel=\"nofollow\">https://github.com/Homebrew/homebrew/issues/31220</a></p>\n"}], "owner": {"reputation": 31, "user_id": 3893154, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1ebe71cfdd214dfac51e483ae624f8dd?s=128&d=identicon&r=PG", "display_name": "Scott Zirkel", "link": "https://stackoverflow.com/users/3893154/scott-zirkel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1439, "favorite_count": 1, "accepted_answer_id": 30941374, "answer_count": 2, "score": 1, "last_activity_date": 1434726088, "creation_date": 1434491919, "last_edit_date": 1434494668, "question_id": 30878994, "link": "https://stackoverflow.com/questions/30878994/ruby-gems-path-issue-system-vs-brew", "title": "Ruby gems path issue (system vs brew)", "body": "<p>I'm having an issue with homebrew looking to the system gems when the system gems aren't in the $PATH.</p>\n\n<p>Here is my <code>gem env</code> to show that my gems are installed in my .rvm/gems directory:</p>\n\n<pre><code>    RubyGems Environment:\n  - RUBYGEMS VERSION: 2.4.5\n  - RUBY VERSION: 2.2.2 (2015-04-13 patchlevel 95) [x86_64-darwin14]\n  - INSTALLATION DIRECTORY: /Users/scott/.rvm/gems/ruby-2.2.2\n  - RUBY EXECUTABLE: /usr/local/opt/ruby/bin/ruby\n  - EXECUTABLE DIRECTORY: /Users/scott/.rvm/gems/ruby-2.2.2/bin\n  - SPEC CACHE DIRECTORY: /Users/scott/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /usr/local/Cellar/ruby/2.2.2/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-darwin-14\n  - GEM PATHS:\n     - /Users/scott/.rvm/gems/ruby-2.2.2\n     - /Users/scott/.rvm/gems/ruby-2.2.2@global\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - :sources =&gt; [\"http://gems.rubyforge.org/\", \"http://gems.github.com\"]\n     - :benchmark =&gt; false\n     - \"gem\" =&gt; \"--no-ri --no-rdoc\"\n  - REMOTE SOURCES:\n     - http://gems.rubyforge.org/\n     - http://gems.github.com\n  - SHELL PATH:\n     - /Users/scott/.rvm/gems/ruby-2.2.2/bin\n     - /Users/scott/.rvm/gems/ruby-2.2.2@global/bin\n     - /Users/scott/.rvm/rubies/ruby-2.2.2/bin\n     - /usr/local/bin\n     - /usr/bin\n     - /bin\n     - /usr/sbin\n     - /sbin\n     - /opt/X11/bin\n     - /Users/scott/.rvm/bin\n     - /Users/scott/.composer/vendor/bin\n     - /usr/local/sbin\n</code></pre>\n\n<p>Now here is the error message I keep getting on various commands (this in particular was from <code>brew services start httpd22</code>):</p>\n\n<pre><code>Error: ERROR: Failed to build gem native extension.\n\n    /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby extconf.rb\nExtracting libxml2-2.8.0.tar.gz into tmp/x86_64-apple-darwin14.3.0/ports/libxml2/2.8.0... OK\nRunning 'compile' for libxml2 2.8.0... ERROR, review 'tmp/x86_64-apple-darwin14.3.0/ports/libxml2/2.8.0/compile.log' to see what happened.\n/Library/Ruby/Gems/2.0.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:265:in `block in execute': Failed to complete compile task (RuntimeError)\n    from /Library/Ruby/Gems/2.0.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:257:in `chdir'\n    from /Library/Ruby/Gems/2.0.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:257:in `execute'\n    from /Library/Ruby/Gems/2.0.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:69:in `compile'\n    from /Library/Ruby/Gems/2.0.0/gems/mini_portile-0.5.2/lib/mini_portile.rb:109:in `cook'\n    from extconf.rb:101:in `block in &lt;main&gt;'\n    from extconf.rb:119:in `call'\n    from extconf.rb:119:in `block in &lt;main&gt;'\n    from extconf.rb:109:in `tap'\n    from extconf.rb:109:in `&lt;main&gt;'\n\nextconf failed, exit code 1\n\nGem files will remain installed in /Library/Ruby/Gems/2.0.0/gems/nokogiri-1.6.1 for inspection.\nResults logged to /Library/Ruby/Gems/2.0.0/extensions/universal-darwin-14/2.0.0/nokogiri-1.6.1/gem_make.out\n</code></pre>\n\n<p>See how it's looking to the system version of Ruby &amp; Gems? I have XCode installed and up to date.</p>\n\n<p><code>brew doctor</code> yields no results and <code>brew update</code> is ready to brew.</p>\n\n<p>I'm using OS 10.10.3. Anything I've left out, just ask.</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here is my .zshrc $PATH export:</p>\n\n<pre><code>export PATH=\"$PATH:$HOME/.composer/vendor/bin\"\nexport PATH=\"$PATH:/usr/local/sbin\"\nexport PATH=\"$PATH:$HOME/.rvm/bin\"\n</code></pre>\n\n<p><strong>EDIT 2</strong></p>\n\n<p><code>$GEM_HOME</code></p>\n\n<pre><code>/Users/scott/.rvm/gems/ruby-2.2.2\n</code></pre>\n\n<p><code>$GEM_PATH</code></p>\n\n<pre><code>/Users/scott/.rvm/gems/ruby-2.2.2:/Users/scott/.rvm/gems/ruby-2.2.2@global\n</code></pre>\n\n<p>Thoughts?</p>\n"}, {"tags": ["ruby", "angularjs", "selenium", "selenium-webdriver"], "answers": [{"tags": [], "owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "is_accepted": true, "score": 2, "last_activity_date": 1434493018, "creation_date": 1434493018, "answer_id": 30879215, "question_id": 30878981, "link": "https://stackoverflow.com/questions/30878981/selecting-elements-by-ng-model-attribute-with-selenium-webdriver/30879215#30879215", "title": "Selecting elements by ng-model attribute with selenium-webdriver", "body": "<p>Use <code>find_element()</code> with <code>:css</code>:</p>\n\n<pre><code>driver.find_element(:css, 'input[ng-model=\"MyModel\"]')\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 411841, "user_id": 771848, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/2DTBv.jpg?s=128&g=1", "display_name": "alecxe", "link": "https://stackoverflow.com/users/771848/alecxe"}, "edited": false, "score": 0, "creation_date": 1434506531, "post_id": 30880780, "comment_id": 49803221, "body": "I would not say it is easier - it is just a different location technique."}, {"owner": {"reputation": 826, "user_id": 5698202, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/HfozP.jpg?s=128&g=1", "display_name": "Abhirath Mahipal", "link": "https://stackoverflow.com/users/5698202/abhirath-mahipal"}, "edited": false, "score": 0, "creation_date": 1475729248, "post_id": 30880780, "comment_id": 67061784, "body": "I&#39;d say stay away from xpath. Small changes in UI and you&#39;ll have to rewrite chunks of your test again as the xpath would have changed."}], "tags": [], "owner": {"reputation": 2722, "user_id": 1395320, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/902133bccbe63d57c9208e19d7cc6f57?s=128&d=identicon&r=PG&f=1", "display_name": "Shan", "link": "https://stackoverflow.com/users/1395320/shan"}, "is_accepted": false, "score": 0, "last_activity_date": 1434503543, "creation_date": 1434503543, "answer_id": 30880780, "question_id": 30878981, "link": "https://stackoverflow.com/questions/30878981/selecting-elements-by-ng-model-attribute-with-selenium-webdriver/30880780#30880780", "title": "Selecting elements by ng-model attribute with selenium-webdriver", "body": "<p>You can use xPath which is a more easier way to detect Angular-JS Elements</p>\n"}], "owner": {"reputation": 575, "user_id": 1246109, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e18ca48f8075aa8b42b18f80c281621c?s=128&d=identicon&r=PG", "display_name": "Paige", "link": "https://stackoverflow.com/users/1246109/paige"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4674, "favorite_count": 1, "accepted_answer_id": 30879215, "answer_count": 2, "score": 1, "last_activity_date": 1434503543, "creation_date": 1434491850, "last_edit_date": 1495542590, "question_id": 30878981, "link": "https://stackoverflow.com/questions/30878981/selecting-elements-by-ng-model-attribute-with-selenium-webdriver", "title": "Selecting elements by ng-model attribute with selenium-webdriver", "body": "<p>I am using Ruby and the gem selenium-webdriver\nI am working with an angular form that I have no control over and would like to know how to find elements via their ng-model attributes. </p>\n\n<p>Here is an example select element:</p>\n\n<pre><code>&lt;select class=\"medium-3 small-12 columns ng-pristine ng-valid ng-touched\" ng-model=\"ctrl.type\" ng-options=\"type.name for type in ctrl.admissions\"&gt;\n</code></pre>\n\n<p>I have located some code in JavaScript, but I'm unsure how to translate it over for Ruby: </p>\n\n<pre><code>driver.findElement(By.cssSelector(\"input[ng-model=\"yourName\"]\"))\n</code></pre>\n\n<p>Here's a link to that thread: <a href=\"https://stackoverflow.com/questions/23029623/angularjs-and-selenium\">stackoverflow thread</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "minitest"], "answers": [{"comments": [{"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1434570597, "post_id": 30889641, "comment_id": 49841037, "body": "Hi Chris, #1 - Thank you for your response. I was unaware of fixtures because Im very new to testing. Going through <a href=\"https://www.railstutorial.org/book/static_pages#sec-getting_started_with_testing\" rel=\"nofollow noreferrer\">Hartl&#39;s - tutorial 3.3</a>, Hartl doesnt explain anything about fixtures. After receiving your response I continued to have errors. After doing some digging, I needed to include <code>setup do</code> w/ <code>@service = services(:one)</code> in the test. Then added the <code>@service = services(:one)</code> above the <code>get :index</code>. This returned no errors. :)"}, {"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1434570656, "post_id": 30889641, "comment_id": 49841079, "body": "Is there I reason why I cannot modify the <code>one:</code> say to something more meaningful for example <code>service_test</code> to reference in the <code>services.yml</code>? I would like to be able to do something like <code>@service = services(:service_test)</code> and <code>sign_in techs(:service_test)</code> but the test complains."}, {"owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "edited": false, "score": 0, "creation_date": 1434570816, "post_id": 30889641, "comment_id": 49841192, "body": "For #2 - I&#39;ve added what you posted - &#39; @car = cars(:one)&#39; and  ` get :show, id: @car.id` but am still receiving errors. . The errors are: ` ActionController::UrlGenerationError: No route matches {:action=&gt;&quot;create&quot;, :controller=&gt;&quot;cars&quot;}` and <code>NoMethodError: undefined method </code>tech&#39; for nil:NilClass<code>. I figured adding </code>setup do` - <code>@tech = techs(:one)</code> and <code>sign_in techs(:one)</code> above the <code>get :show, id: @car.id</code> but it&#39;s still producing errors. Please advise."}], "tags": [], "owner": {"reputation": 1029, "user_id": 655028, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3ca98e75ecd686304f9a4aae2b25ac09?s=128&d=identicon&r=PG", "display_name": "Chris Kottom", "link": "https://stackoverflow.com/users/655028/chris-kottom"}, "is_accepted": false, "score": 0, "last_activity_date": 1434538830, "creation_date": 1434538830, "answer_id": 30889641, "question_id": 30878893, "link": "https://stackoverflow.com/questions/30878893/rails-test-w-minitest-reporter-nomethoderror-undefined-method-actioncontro/30889641#30889641", "title": "Rails Test w/ Minitest Reporter - NoMethodError: undefined method + ActionController::UrlGenerationError: No route matches", "body": "<p><strong>First issue:</strong> Your feeling is correct.  Devise comes with <code>Devise::TestHelpers</code> which you've mixed into <code>ActionController::TestCase</code> in your test helper file.  One of the methods it provides is <code>sign_in</code> which lets you spoof a logged in user as part of your test.  Assuming you've got a model called <code>Tech</code> and you're following standard Rails conventions, you'll need to add something like:</p>\n\n<pre><code>sign_in techs(:some_tech)\n</code></pre>\n\n<p>to either your <code>setup</code> block or directly into your test body before the call to <code>get :index</code>.  That will ensure that <code>current_tech</code> returns something non-nil and remove the immediate NoMethodError.</p>\n\n<p><strong>Second issue:</strong> Your <code>:show</code> action expects to receive the ID of a known <code>Car</code> as part of the URL.  Replace your current invocation of the controller with:</p>\n\n<pre><code>require 'test_helper'\n\nclass CarControllerTest &lt; ActionController::TestCase\n  setup do\n    @car = cars(:some_car)\n  end\n\n  test \"should get show\" do\n    get :show, id: @car.id\n    assert_response :success\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 349, "user_id": 700467, "user_type": "registered", "accept_rate": 45, "profile_image": "https://www.gravatar.com/avatar/f0a454d0f5002eea5f0b7d98596b4ac1?s=128&d=identicon&r=PG&f=1", "display_name": "captain awesome", "link": "https://stackoverflow.com/users/700467/captain-awesome"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 900, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1434538830, "creation_date": 1434491479, "question_id": 30878893, "link": "https://stackoverflow.com/questions/30878893/rails-test-w-minitest-reporter-nomethoderror-undefined-method-actioncontro", "title": "Rails Test w/ Minitest Reporter - NoMethodError: undefined method + ActionController::UrlGenerationError: No route matches", "body": "<p>I am learning Rails and very new to testing but so far I've managed to build something with minimal errors. However, the issue I am running into is that my tests are complaining for methods that cannot be found and no route matching.</p>\n\n<p>To my understanding tests should be run frequently based <a href=\"https://www.railstutorial.org/book/static_pages#sec-getting_started_with_testing\" rel=\"nofollow\">Hartl's - Railstutorial 3.3</a>. Many StackO threads and online articles seem to pertain to utilizing test suites I don't use like RSpec, etc...so the test configurations are confusing. My testing suite is set up similiar to <a href=\"https://www.railstutorial.org/book/static_pages#sec-getting_started_with_testing\" rel=\"nofollow\">Hartl's - Railstutorial 3.3</a> and below are the gems loaded for testing.</p>\n\n<pre><code>gem 'better_errors', '~&gt; 2.1.1'\ngem 'binding_of_caller'\ngem 'minitest-reporters', '1.0.5'\ngem 'mini_backtrace',     '0.1.3'\ngem 'guard-minitest',     '2.3.1'\ngem 'ruby-prof'\n</code></pre>\n\n<hr>\n\n<blockquote>\n  <p><strong>NoMethodError: undefined method</strong></p>\n</blockquote>\n\n<pre><code>Error: (_I have two error similar errors to below_)\nServicesControllerTest#test_should_get_index:\nNoMethodError: undefined method 'services' for nil:NilClass\n    app/controllers/services_controller.rb:6:in 'index'\n    test/controllers/services_controller_test.rb:9:in 'block in &lt;class:ServicesControllerTest&gt;\"\n</code></pre>\n\n<p><strong>Services Controller</strong></p>\n\n<pre><code>def index\n  @services = current_tech.services\nend\n</code></pre>\n\n<p><strong>services_controller_test.rb</strong></p>\n\n<pre><code>require 'test_helper'\n\nclass ServicesControllerTest &lt; ActionController::TestCase\n  setup do\n    @service = services(:one)\n  end\n\n  test \"should get index\" do\n    get :index\n    assert_response :success\n    assert_not_nil assigns(:services)\n  end\nend\n</code></pre>\n\n<p>I believe the reason I am receiving this error is because of <code>Devise</code>.\nIf I were to setup the following index action below, the test will pass.</p>\n\n<pre><code>def index\n  @services = Tech.first.services\nend\n</code></pre>\n\n<p>How do I correct this so that this test passes?</p>\n\n<hr>\n\n<blockquote>\n  <p><strong>ActionController::UrlGenerationError: No route matches {:action=>\"show\", :controller=>\"tech\"}</strong></p>\n</blockquote>\n\n<pre><code>Error:\nCarsControllerTest#test_should_get_show:\nActionController::UrlGenerationError: No route matches {:action=&gt;\"show\", :controller=&gt;\"cars\"}\n    test/controllers/cars_controller_test.rb:5:in `block in &lt;class:CarsControllerTest&gt;\n</code></pre>\n\n<p><strong>Rake routes</strong> <em>pertaining to cars</em></p>\n\n<pre><code>tech_cars POST - /techs/:tech_id/cars(.:format) - cars#create\ncar GET - /cars/:id(.:format) - cars#show\n</code></pre>\n\n<p><strong>Routes</strong></p>\n\n<pre><code>Rails.application.routes.draw do  \n\n  devise_for :customers, controllers: { sessions: 'customers/sessions' }\n  devise_for :techs, controllers: { sessions: 'techs/sessions' } \n\n  resources :techs, :only =&gt; [:index, :show], shallow: true do\n    resources :cars, only: [:show, :create]\n  end\n\n  resources :services, :garages\n\n  root \"home#index\"\n\nend\n</code></pre>\n\n<p><strong><em>cars_controller.rb</em></strong></p>\n\n<pre><code>class CarsController &lt; ApplicationController\n  before_action :set_car\n\n  def show\n    @garage = Garage.find(params[:id])\n    @tech = @tech.service.car.id\n  end\n\n  def create\n    @garage = Garage.create(tech_first_name: @car.service.tech.first_name,\n                                  customer_id: current_customer.id,\n                                  customer_street_address: current_customer.street_address,\n                                  customer_city: current_customer.city,\n                                  customer_state: current_customer.state,\n                                  customer_zip_code: current_customer.zip_cod)\n\n    if @garage.save\n      redirect_to techs_path, notice:  \"Working\" \n    else\n      redirect_to techs_path, notice:  \"Uh oh, flat tire\" \n    end\n  end\n\n  private\n\n  def set_car\n    @car = Car.find(params[:id])\n  end\n\n  def car_params\n    params.permit(:service_name, :garage_photo)\n  end\nend\n</code></pre>\n\n<p><strong>cars_controller_test.rb</strong></p>\n\n<pre><code>require 'test_helper'\n\nclass CarControllerTest &lt; ActionController::TestCase\n  test \"should get show\" do\n    get :show\n    assert_response :success\n  end\nend\n</code></pre>\n\n<p><strong>cars.html.erb</strong> (only links on page)</p>\n\n<pre><code>&lt;%= button_to 'View Garage', tech_cars_path(tech_id: @car.service.tech.id, id: @car) %&gt;\n&lt;%= link_to 'Back to tech', tech_path(@car.service.tech.id) %&gt;\n</code></pre>\n\n<p>As you may gather, I am building a <code>Garage</code> not a <code>Car</code> object within the <code>Cars</code> controller. Would this be a problem for tests? My application functions fine as is. On a side note, I am also having difficulty trying to associate <code>car_params</code> strong params for instance variables but that's another StackO post.</p>\n\n<hr>\n\n<p><strong>*test/test_helper.rb</strong></p>\n\n<pre><code>ENV['RAILS_ENV'] ||= 'test'\nrequire File.expand_path('../../config/environment', __FILE__)\nrequire 'rails/test_help'\nrequire \"minitest/reporters\"\n\nMinitest::Reporters.use!\n\nclass ActiveSupport::TestCase\n  # Setup all fixtures in test/fixtures/*.yml for all tests in alphabetical order.\n  fixtures :all\n\n  # Add more helper methods to be used by all tests here...\nend\n\nclass ActionController::TestCase\n  include Devise::TestHelpers\nend\n</code></pre>\n\n<hr>\n\n<p>Is there something I am missing or haven't configured correctly?</p>\n\n<p>Please know my application appears to be working fine, it's just I would like to suppress these tests errors.</p>\n\n<p>Please advise on how to get these test errors to pass.</p>\n\n<p>Thanks</p>\n"}]