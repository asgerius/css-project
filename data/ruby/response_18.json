[{"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 0, "creation_date": 1431559269, "post_id": 30226748, "comment_id": 48557353, "body": "You can use <code>params</code> to access the GET or POST HTTP parameters given with the client&#39;s request. In your case: <code>where(book_id: params[:book_id])</code> (<code>params</code> acts like a Hash, available in Controller and Views)"}], "answers": [{"comments": [{"owner": {"reputation": 186, "user_id": 4021293, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be50cb780c45f41f9fa40b6736d1ca44?s=128&d=identicon&r=PG&f=1", "display_name": "goda", "link": "https://stackoverflow.com/users/4021293/goda"}, "edited": false, "score": 0, "creation_date": 1431565865, "post_id": 30226987, "comment_id": 48559092, "body": "I would like to find a Checkout with attribute Book_ID of 14, and search for a checkout through its attribute of Book_ID.                                                        Right now the call immediately searches for Checkout 14, not its matching attribute."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "reply_to_user": {"reputation": 186, "user_id": 4021293, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be50cb780c45f41f9fa40b6736d1ca44?s=128&d=identicon&r=PG&f=1", "display_name": "goda", "link": "https://stackoverflow.com/users/4021293/goda"}, "edited": false, "score": 0, "creation_date": 1431610465, "post_id": 30226987, "comment_id": 48578912, "body": "What does the route look like?"}], "tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 1, "last_activity_date": 1431613525, "last_edit_date": 1431613525, "creation_date": 1431560422, "answer_id": 30226987, "question_id": 30226748, "link": "https://stackoverflow.com/questions/30226748/passing-a-delete-method-with-params/30226987#30226987", "title": "Passing a delete method with params", "body": "<pre><code>@book_checkout = BookCheckout.find_by(book_id: params[:book_id])\n</code></pre>\n\n<p>Since the route only has one id, I think you can use</p>\n\n<pre><code>book_checkout_path(book.id)\n</code></pre>\n\n<p>However, it seems strange to use the Book id to find the BookCheckout. Is there any special reason you can't do:</p>\n\n<pre><code>book_checkout_path(book_checkout.id)\n</code></pre>\n\n<p>and</p>\n\n<pre><code>@book_checkout = BookCheckout.find_by(id: params[:id])\n</code></pre>\n\n<p>Also, is it possible that both the Book id and the Book Checkout id are the same (1)? This would make it appear to succeed when it shouldn't.</p>\n"}, {"tags": [], "owner": {"reputation": 186, "user_id": 4021293, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be50cb780c45f41f9fa40b6736d1ca44?s=128&d=identicon&r=PG&f=1", "display_name": "goda", "link": "https://stackoverflow.com/users/4021293/goda"}, "is_accepted": false, "score": 1, "last_activity_date": 1431568195, "creation_date": 1431568195, "answer_id": 30228016, "question_id": 30226748, "link": "https://stackoverflow.com/questions/30226748/passing-a-delete-method-with-params/30228016#30228016", "title": "Passing a delete method with params", "body": "<p>I had to fix my original code for a workaround, but it isn't the cleanest.</p>\n\n<pre><code>&lt;%= link_to \"delete checkout\", book_checkout_path(id: book.id, check: book.id), :confirm =&gt; 'Are you sure?', :class =&gt; \"button\", :method =&gt; :delete %&gt;\n</code></pre>\n\n<p>My original link_to NEEDS to pass id because my routes expect that, so I added a check which passes the attribute i will need.</p>\n\n<pre><code>@book_checkout = BookCheckout.find_by(book_id: params[:check])\n</code></pre>\n\n<p>In my checkout controller, I used the params[:check] instead of params[:id], because I cannot overwrite params[:id] with the book.id.</p>\n"}], "owner": {"reputation": 186, "user_id": 4021293, "user_type": "registered", "accept_rate": 58, "profile_image": "https://www.gravatar.com/avatar/be50cb780c45f41f9fa40b6736d1ca44?s=128&d=identicon&r=PG&f=1", "display_name": "goda", "link": "https://stackoverflow.com/users/4021293/goda"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5314, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1431613525, "creation_date": 1431559057, "last_edit_date": 1431612142, "question_id": 30226748, "link": "https://stackoverflow.com/questions/30226748/passing-a-delete-method-with-params", "title": "Passing a delete method with params", "body": "<pre><code>&lt;% @books.each do |book| %&gt;\n      &lt;% unless book.checkout_user_id == nil %&gt;\n        &lt;%= link_to \"delete checkout\", book_checkout_path(book_id: book.id), :confirm =&gt; 'Are you sure?', :class =&gt; \"button\", :method =&gt; :delete %&gt;\n      &lt;% end %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In the above code, I want to pass a parameter to my book_checkout controller. How can I make it so my destroy method will retrieve the :book_id passed in from book_checkout_path. </p>\n\n<p>Then create an instance to search for a checkout with the corresponding book_id attribute rather than search by ID.</p>\n\n<pre><code>  def destroy\n    @book_checkout = BookCheckout.where(book_id: book_id).first # this line is wrong\n    @book_checkout.destroy\n\n    redirect_to books_path\n  end\n</code></pre>\n\n<p>EDIT: Added routes.\nroutes: </p>\n\n<pre><code>   book_checkout GET    /book_checkouts/:id(.:format)      book_checkouts#show\n                 PATCH  /book_checkouts/:id(.:format)      book_checkouts#update\n                 PUT    /book_checkouts/:id(.:format)      book_checkouts#update\n                 DELETE /book_checkouts/:id(.:format)      book_checkouts#destroy\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "answers": [{"tags": [], "owner": {"reputation": 2569, "user_id": 514040, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/98bb1ee1a1f3d1297acf493776066086?s=128&d=identicon&r=PG", "display_name": "neuronaut", "link": "https://stackoverflow.com/users/514040/neuronaut"}, "is_accepted": false, "score": 7, "last_activity_date": 1431559093, "creation_date": 1431559093, "answer_id": 30226754, "question_id": 30226703, "link": "https://stackoverflow.com/questions/30226703/ruby-regex-not-matching-a-string-if-character-in-source/30226754#30226754", "title": "ruby regex not matching a string if &quot;+&quot; character in source", "body": "<p>You've got a double backslash, which is telling the regex parser to look for a literal backslash. Since it's also followed by a <code>+</code> the regex parser is then looking for 1 or more backslashes. Try just <code>\\+</code> (so the whole thing should be: <code>/(001144|004|0|\\+44)/</code></p>\n"}], "owner": {"reputation": 1200, "user_id": 536034, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/00c07fa4826fb4c86bf713a0de32c16f?s=128&d=identicon&r=PG", "display_name": "Ben", "link": "https://stackoverflow.com/users/536034/ben"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431559093, "creation_date": 1431558799, "question_id": 30226703, "link": "https://stackoverflow.com/questions/30226703/ruby-regex-not-matching-a-string-if-character-in-source", "title": "ruby regex not matching a string if &quot;+&quot; character in source", "body": "<p>i have a string that contains an international phone number e.g. +44 9383 33333 but bizzarely when I attempt to regex match (note the regex is correctly 'escaped') the regex match fails</p>\n\n<p>e.g. </p>\n\n<pre><code> \"001144 9383 33333\".match(/(001144|004|0|\\\\+44)/) # works\n\n \"+44 9383 33333\".match(/(001144|004|0|\\\\+44)/) # DOES NOT WORK\n</code></pre>\n\n<p>i've tried escaping the input string e.g. +, \\+ etc. etc but to no avail.</p>\n\n<p>i must be doing something really stupid here!?</p>\n"}, {"tags": ["ruby", "sorting", "enumerable"], "answers": [{"tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": false, "score": 0, "last_activity_date": 1431558754, "last_edit_date": 1431558754, "creation_date": 1431558434, "answer_id": 30226650, "question_id": 30226563, "link": "https://stackoverflow.com/questions/30226563/ruby-custom-sorting/30226650#30226650", "title": "Ruby Custom Sorting", "body": "<p>You shouldn't need to do any special grouping.</p>\n\n<pre><code>arr.sort {|a, b| (b[1].length &lt;=&gt; a[1].length) * 10 + (a[0] &lt;=&gt; b[0]) }\n</code></pre>\n\n<p>Results in:</p>\n\n<pre><code>[\n  [10.0, [\"mango\", \"Milk\", \"Cofee\"]],\n  [13.0, [\"mango\", \"banana\", \"jackfruit\"]],\n  [5.0, [\"mango\", \"banana\"]],\n  [6.0, [\"mango\", \"banana\"]],\n  [10.0, [\"banana\", \"jackfruit\"]],\n  [4.0, [\"mango\"]],\n  [5.0, [\"jackfruit\"]],\n  [5.0, [\"banana\"]]\n]\n</code></pre>\n\n<p><code>#sort</code> passes yields values to compare. <code>&lt;=&gt;</code> returns -1, 0, or 1, depending on how they compare, so since you want to prioritize length over price, each item can have a \"sort weight\" of (length comparison * 10) + (price comparison).</p>\n"}, {"tags": [], "owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "is_accepted": true, "score": 2, "last_activity_date": 1552764210, "last_edit_date": 1552764210, "creation_date": 1431561638, "answer_id": 30227160, "question_id": 30226563, "link": "https://stackoverflow.com/questions/30226563/ruby-custom-sorting/30227160#30227160", "title": "Ruby Custom Sorting", "body": "<p>There's no need for an overly clever comparator here, you're sorting by numbers so simple negation can reverse the sorting and <a href=\"https://ruby-doc.org/core/Enumerable.html#method-i-sort_by\" rel=\"nofollow noreferrer\"><code>sort_by</code></a> can take care of the rest. For example:</p>\n\n<pre><code>arr.sort_by { |e| [-e.last.length, e.first] }\n</code></pre>\n\n<p>or if you prefer numeric indexes:</p>\n\n<pre><code>arr.sort_by { |e| [-e[1].length, e[0]] }\n</code></pre>\n\n<p>will give you:</p>\n\n<pre><code>[\n  [10.0, [\"mango\", \"Milk\", \"Cofee\"]],\n  [13.0, [\"mango\", \"banana\", \"jackfruit\"]],\n  [ 5.0, [\"mango\", \"banana\"]],\n  [ 6.0, [\"mango\", \"banana\"]],\n  [10.0, [\"banana\", \"jackfruit\"]],\n  [ 4.0, [\"mango\"]],\n  [ 5.0, [\"jackfruit\"]],\n  [ 5.0, [\"banana\"]]\n]\n</code></pre>\n\n<p>as desired. <a href=\"https://ruby-doc.org/core/Array.html#method-i-3C-3D-3E\" rel=\"nofollow noreferrer\"><code>Array#&lt;=&gt;</code></a> compares element by element so <code>sort_by</code> with a block that yields an array is quite common.</p>\n\n<p>You might want to add more conditions to your comparisons though, what you have won't guarantee what order <code>[11.0, ['a', 'b', 'c']]</code> and <code>[11.0, ['x', 'y', 'z']]</code> will appear in.</p>\n"}], "owner": {"reputation": 3999, "user_id": 2678638, "user_type": "registered", "accept_rate": 59, "profile_image": "https://i.stack.imgur.com/lSbaA.jpg?s=128&g=1", "display_name": "Ajay", "link": "https://stackoverflow.com/users/2678638/ajay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 208, "favorite_count": 0, "accepted_answer_id": 30227160, "answer_count": 2, "score": 0, "last_activity_date": 1552764210, "creation_date": 1431557833, "last_edit_date": 1431561077, "question_id": 30226563, "link": "https://stackoverflow.com/questions/30226563/ruby-custom-sorting", "title": "Ruby Custom Sorting", "body": "<p>I have got following array in Ruby. </p>\n\n<pre><code>arr = [\n[13.0, [\"mango\", \"banana\", \"jackfruit\"]], \n[10.0, [\"mango\", \"Milk\", \"Cofee\"]], \n[4.0, [\"mango\"]]\n[5.0, [\"jackfruit\"]], \n[6.0, [\"mango\", \"banana\"]], \n[5.0, [\"mango\", \"banana\"]], \n[10.0, [\"banana\", \"jackfruit\"]], \n[5.0, [\"banana\"]], \n]\n</code></pre>\n\n<p>I want the result to be sorted by following rules:</p>\n\n<ol>\n<li>Sort by the Fruit arrays length first(Some how group by)</li>\n<li>Sort by their price in lower - Higher Order. </li>\n</ol>\n\n<p>Expected output: </p>\n\n<pre><code>[\n[10.0, [\"mango\", \"Milk\", \"Cofee\"]], \n[13.0, [\"mango\", \"banana\", \"jackfruit\"]], \n\n[5.0, [\"mango\", \"banana\"]], \n[6.0, [\"mango\", \"banana\"]], \n[10.0, [\"banana\", \"jackfruit\"]], \n\n[4.0, [\"mango\"]]\n[5.0, [\"jackfruit\"]], \n[5.0, [\"banana\"]], \n]\n</code></pre>\n\n<p>Explanation: First categories the the elements by the fruit arrays length then on each set perform sorting based upon their price(low-high).</p>\n\n<p>I tried following codes, but it's not giving desired result!</p>\n\n<pre><code>arr.group_by{|x| x[1].length }.sort_by{|x| x[0]}.map{|x| x[1]}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1431557514, "post_id": 30226504, "comment_id": 48556886, "body": "<code>note.user</code> is nil for on of the notes"}, {"owner": {"reputation": 534, "user_id": 3057462, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vwrs.jpg?s=128&g=1", "display_name": "hiveer", "link": "https://stackoverflow.com/users/3057462/hiveer"}, "edited": false, "score": 0, "creation_date": 1431574679, "post_id": 30226504, "comment_id": 48561124, "body": "Your code is a little wired. There should be a <code>show</code> action here to map with your <code>show.html.erb</code> file. In this file, you should use a variable named <code>note</code> instead of  <code>notes</code>."}], "answers": [{"comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 1, "creation_date": 1431564385, "post_id": 30227427, "comment_id": 48558759, "body": "It would be much better to figure out why this is happening and update the model and associations to prevent it in the future."}, {"owner": {"reputation": 481, "user_id": 4035867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df68fbefedfd1086ad0ff30701b8afc?s=128&d=identicon&r=PG&f=1", "display_name": "AOG", "link": "https://stackoverflow.com/users/4035867/aog"}, "reply_to_user": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1431582919, "post_id": 30227427, "comment_id": 48563578, "body": "Of course, but that would depend on project needs/requirements which would dictate whether the scenarios we are guarding against should be prevented from happening or are valid"}], "tags": [], "owner": {"reputation": 481, "user_id": 4035867, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9df68fbefedfd1086ad0ff30701b8afc?s=128&d=identicon&r=PG&f=1", "display_name": "AOG", "link": "https://stackoverflow.com/users/4035867/aog"}, "is_accepted": false, "score": 1, "last_activity_date": 1431563418, "creation_date": 1431563418, "answer_id": 30227427, "question_id": 30226504, "link": "https://stackoverflow.com/questions/30226504/nomethod-error-undefined-method-first-name-for-nilnilclass/30227427#30227427", "title": "NoMethod Error undefined method `first_name&#39; for nil:NilClass", "body": "<p>You have a note that does not have a user associated with it, or one of the note users does not have first_name or a last_name (we would had known if you had posted the error message you are getting). If you want to guard against this, you have to make sure the user, first_name and last_name are not nil before calling methods on them:</p>\n\n<p><strong>In model:</strong></p>\n\n<pre><code>def display_user_name\n  if user.nil?\n    \"No user\"\n  else\n    \"#{user.first_name.present? ? user.first_name : '&lt;missing&gt;'} \"\\\n    \"#{user.last_name.present? ? user.last_name.capitalize[0] : '&lt;missing&gt;'}\"\n  end\nend\n</code></pre>\n\n<p><strong>In template:</strong></p>\n\n<pre><code>&lt;%= note.display_user_name %&gt;\n</code></pre>\n\n<p>OR, you can use the great <code>andand</code> gem, then in your template you will have: </p>\n\n<pre><code>\"#{note.user.andand.first_name.andand.capitalize} #{note.user.andand.last_name.andand.capitalize[0]}\"\n</code></pre>\n\n<p>Just note that it will return \" \" (a string with a space in it) if the note has not user or has no first name and no last name.  </p>\n"}, {"tags": [], "owner": {"reputation": 14827, "user_id": 645886, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2abb0123e9484284a9cb2d36aa9854b3?s=128&d=identicon&r=PG&f=1", "display_name": "Surya", "link": "https://stackoverflow.com/users/645886/surya"}, "is_accepted": false, "score": 0, "last_activity_date": 1431583639, "creation_date": 1431583639, "answer_id": 30230430, "question_id": 30226504, "link": "https://stackoverflow.com/questions/30226504/nomethod-error-undefined-method-first-name-for-nilnilclass/30230430#30230430", "title": "NoMethod Error undefined method `first_name&#39; for nil:NilClass", "body": "<p>Try this:</p>\n\n<p>in <code>Note</code> class <em>app/models/note.rb</em>:</p>\n\n<pre><code>def user_name\n  @user_name ||= user.present? ? \"#{user.first_name.capitalize} #{user.last_name.capitalize[0]}\" : \"No user\" # or Anonymous(whichever suites your requirement)\nend\n</code></pre>\n\n<p>then in your show.html.erb:</p>\n\n<pre><code>&lt;%= note.user_name %&gt;\n</code></pre>\n\n<p>Here:</p>\n\n<ol>\n<li>You have one place to edit for any future references of user name in your application.</li>\n<li>You do not repeat yourself(DRY) when you need to show user name of a note.</li>\n<li>Easy to test.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 803, "user_id": 4739356, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2840861b630380bb691a2e7b793c22ca?s=128&d=identicon&r=PG&f=1", "display_name": "M.T Davis", "link": "https://stackoverflow.com/users/4739356/m-t-davis"}, "is_accepted": false, "score": 0, "last_activity_date": 1431615802, "creation_date": 1431615802, "answer_id": 30240679, "question_id": 30226504, "link": "https://stackoverflow.com/questions/30226504/nomethod-error-undefined-method-first-name-for-nilnilclass/30240679#30240679", "title": "NoMethod Error undefined method `first_name&#39; for nil:NilClass", "body": "<p>I figured out the issue. I had serveral \"notes\" that had a few \"null\" values in the database which which is why it couldn't associated with the current_user. </p>\n\n<p><img src=\"https://i.stack.imgur.com/a5pBn.png\" alt=\"enter image description here\"></p>\n\n<p>After deleting those notes with null values, the problem was corrected.</p>\n"}], "owner": {"reputation": 803, "user_id": 4739356, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2840861b630380bb691a2e7b793c22ca?s=128&d=identicon&r=PG&f=1", "display_name": "M.T Davis", "link": "https://stackoverflow.com/users/4739356/m-t-davis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 350, "favorite_count": 0, "answer_count": 3, "score": 0, "last_activity_date": 1431615802, "creation_date": 1431557461, "question_id": 30226504, "link": "https://stackoverflow.com/questions/30226504/nomethod-error-undefined-method-first-name-for-nilnilclass", "title": "NoMethod Error undefined method `first_name&#39; for nil:NilClass", "body": "<p>Running\nRails 4.1.8 | \nRuby 2.1.5p273</p>\n\n<p>I'm trying to display the current username for notes that are created from current user using:</p>\n\n<p><code>&lt;%= \"#{note.user.first_name.capitalize} #{note.user.last_name.capitalize[0]}\" %&gt;</code> in show.html.erb.</p>\n\n<pre><code>&lt;% @notes.each do |note| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;\n            &lt;h4&gt;\n             &lt;%= \"#{note.user.first_name.capitalize} #{note.user.last_name.capitalize[0]}\" %&gt;\n            &lt;/h4&gt;\n            &lt;p&gt;&lt;%= note.created_at.strftime(\"%-m/%-d/%y\") %&gt;&lt;/p&gt;\n          &lt;/td&gt;\n\n          &lt;td&gt;\n            &lt;p&gt;&lt;%= h(note.comment).gsub(/\\n/, '&lt;br/&gt;').html_safe %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>If I take <code>&lt;%= \"#{note.user.first_name.capitalize} #{note.user.last_name.capitalize[0]}\" %&gt;</code> the app works just fine.</p>\n\n<p>I also checked the NotesController for note as well and I can't seem to find the issue.</p>\n\n<pre><code>class NotesController &lt; ApplicationController\n  before_action :set_note, only: [:edit, :update, :destroy]\n  before_action :set_account\n  before_action :authenticate_user!\n  before_action :check_user, only: [:edit, :update, :destroy]\n\n  # GET /notes/new\n  def new\n    @note = Note.new\n  end\n\n  # GET /notes/1/edit\n  def edit\n  end\n\n  # POST /notes\n  # POST /notes.json\n  def create\n    @note = Note.new(note_params)\n    @note.user_id = current_user.id\n    @note.account_id = @account.id\n\n    respond_to do |format|\n      if @note.save\n        format.html { redirect_to @account, notice: 'note was successfully created.' }\n        format.json { render :show, status: :created, location: @note }\n      else\n        format.html { render :new }\n        format.json { render json: @note.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # PATCH/PUT /notes/1\n  # PATCH/PUT /notes/1.json\n  def update\n    respond_to do |format|\n      if @note.update(note_params)\n        format.html { redirect_to account_path(@account), notice: 'note was successfully updated.' }\n        format.json { render :show, status: :ok, location: @note }\n      else\n        format.html { render :edit }\n        format.json { render json: @note.errors, status: :unprocessable_entity }\n      end\n    end\n  end\n\n  # DELETE /notes/1\n  # DELETE /notes/1.json\n  def destroy\n    @note.destroy\n    respond_to do |format|\n      format.html { redirect_to account_path(@account), notice: 'note was successfully destroyed.' }\n      format.json { head :no_content }\n    end\n  end\n\n  private\n    # Use callbacks to share common setup or constraints between actions.\n    def set_note\n      @note = note.find(params[:id])\n    end\n\n    def set_account\n      @account = Account.find(params[:account_id])\n    end\n\n     def check_user\n      unless (@note.user == current_user) || (current_user.admin?)\n        redirect_to root_url, alert: \"Sorry, this note belongs to someone else\"\n      end\n    end\n\n    # Never trust parameters from the scary internet, only allow the white list through.\n    def note_params\n      params.require(:note).permit(:comment)\n    end\nend\n</code></pre>\n\n<p>I'm sure it's something small I'm missing, I just can't see it.</p>\n"}, {"tags": ["ruby", "macos", "bash", "heroku"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1431559635, "post_id": 30226296, "comment_id": 48557451, "body": "You have that reversed.  You have ruby-2.1.0 on the Mac and ruby-1.8.7 within Vagrant."}], "answers": [{"comments": [{"owner": {"reputation": 113, "user_id": 4655866, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-1d8tteGpZKc/AAAAAAAAAAI/AAAAAAAAAIs/uHJb5riHcuQ/photo.jpg?sz=128", "display_name": "Anthony D", "link": "https://stackoverflow.com/users/4655866/anthony-d"}, "edited": false, "score": 0, "creation_date": 1431569883, "post_id": 30226863, "comment_id": 48560056, "body": "Perfect, Thank you! I actually figured it out shortly after I posted this and it is just as you explain it. I had to install rvm in Vagrant, then update ruby in Vagrant. It was easy enough once I found the right information, but sometimes as your beginning these things can be confusing. Thanks again!"}, {"owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "reply_to_user": {"reputation": 113, "user_id": 4655866, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-1d8tteGpZKc/AAAAAAAAAAI/AAAAAAAAAIs/uHJb5riHcuQ/photo.jpg?sz=128", "display_name": "Anthony D", "link": "https://stackoverflow.com/users/4655866/anthony-d"}, "edited": false, "score": 0, "creation_date": 1431570479, "post_id": 30226863, "comment_id": 48560180, "body": "Glad that rvm worked for you - it&#39;s a useful tool. Don&#39;t forget to mark the question as &#39;accepted&#39; if you&#39;re happy with the answer. Thanks for joining stackoverflow!"}, {"owner": {"reputation": 113, "user_id": 4655866, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-1d8tteGpZKc/AAAAAAAAAAI/AAAAAAAAAIs/uHJb5riHcuQ/photo.jpg?sz=128", "display_name": "Anthony D", "link": "https://stackoverflow.com/users/4655866/anthony-d"}, "edited": false, "score": 0, "creation_date": 1431662503, "post_id": 30226863, "comment_id": 48603015, "body": "Thanks Rots, I didn&#39;t know about that."}], "tags": [], "owner": {"reputation": 5286, "user_id": 455770, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/mMHwz.jpg?s=128&g=1", "display_name": "Rots", "link": "https://stackoverflow.com/users/455770/rots"}, "is_accepted": true, "score": 1, "last_activity_date": 1431560931, "last_edit_date": 1495540691, "creation_date": 1431559820, "answer_id": 30226863, "question_id": 30226296, "link": "https://stackoverflow.com/questions/30226296/heroku-toolbelt-requires-ruby-1-9/30226863#30226863", "title": "Heroku Toolbelt requires Ruby 1.9+", "body": "<p>Vagrant is a virtual machine, which will host a completely different environment to your current machine.</p>\n\n<p>You need to log in to the Vagrant box, and upgrade <code>ruby</code> inside the Vagrant container.</p>\n\n<p>You can either do this <a href=\"https://stackoverflow.com/questions/1403278/how-to-update-ruby-on-linux-ubuntu\">manually</a>, with <a href=\"https://jibai31.wordpress.com/2013/09/01/upgrading-your-vagrant-box-to-ruby-20/\" rel=\"nofollow noreferrer\"><code>RVM</code></a> or with <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow noreferrer\"><code>rbenv</code></a>. As a first port of call try <code>sudo apt-get install ruby1.9.3</code> inside the Vagrant vm.</p>\n"}], "owner": {"reputation": 113, "user_id": 4655866, "user_type": "registered", "accept_rate": 76, "profile_image": "https://lh5.googleusercontent.com/-1d8tteGpZKc/AAAAAAAAAAI/AAAAAAAAAIs/uHJb5riHcuQ/photo.jpg?sz=128", "display_name": "Anthony D", "link": "https://stackoverflow.com/users/4655866/anthony-d"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "accepted_answer_id": 30226863, "answer_count": 1, "score": 1, "last_activity_date": 1431560931, "creation_date": 1431556259, "last_edit_date": 1431558422, "question_id": 30226296, "link": "https://stackoverflow.com/questions/30226296/heroku-toolbelt-requires-ruby-1-9", "title": "Heroku Toolbelt requires Ruby 1.9+", "body": "<p>During the Heroku login in the terminal I get the message:</p>\n\n<pre><code>Heroku Toolbelt requires Ruby 1.9+\n</code></pre>\n\n<p>I'm using Vagrant, while in Vagrant I ran <code>which ruby</code>  command and got: <code>/usr/bin/ruby</code>, and <code>ruby -v</code> gives me: </p>\n\n<pre><code>ruby 1.8.7 (2011-06-30 patchlevel 352) [i686-linux]\n</code></pre>\n\n<p>Running <code>which ruby</code> command in bash gives me: </p>\n\n<pre><code>/usr/local/rbenv/shims/ruby\n</code></pre>\n\n<p>and <code>ruby -v</code> gives me: </p>\n\n<pre><code>ruby 2.1.0p0 (2013-12-25 revision 44422) [x86_64-darwin14.0]\n</code></pre>\n\n<p>So it seems like I have to update the Mac OSX version to 1.9+, but I'm not sure how. Also, I don't believe I have <strong>rvm</strong> installed. I'm new to all this and any help would be greatly appreciated. Thanks everyone.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "sendgrid"], "answers": [{"comments": [{"owner": {"reputation": 2376, "user_id": 3311657, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/9d1d7b5444ea5fbb3b5e0ecb8303a88e?s=128&d=identicon&r=PG", "display_name": "steve klein", "link": "https://stackoverflow.com/users/3311657/steve-klein"}, "edited": false, "score": 0, "creation_date": 1431563489, "post_id": 30227214, "comment_id": 48558533, "body": "Great answer thanks @eddie.  I was starting to squirrel away some of these settings as commented lines in a <code>secrets.yml</code> file and then just manually setting in the shell with <code>export</code>.  Is there any reason at all to have a <code>secrets.yml</code> file or should I be merging all of this into <code>application.yml</code>?"}, {"owner": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 2, "creation_date": 1431564572, "post_id": 30227214, "comment_id": 48558803, "body": "The username and pass are not nil they show up as intended bud"}, {"owner": {"reputation": 886, "user_id": 959953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8f51e1aa14cdd87cffeaa26bb0ce13?s=128&d=identicon&r=PG", "display_name": "eddiezane", "link": "https://stackoverflow.com/users/959953/eddiezane"}, "edited": false, "score": 1, "creation_date": 1431567076, "post_id": 30227214, "comment_id": 48559405, "body": "<a href=\"https://github.com/eddiezane/rails-devise-sendgrid/commit/115f04f40078fbc22ab031c86f171a3aec4ce311\" rel=\"nofollow noreferrer\">Here&#39;s</a> a minimum working example. Happy to take a look at what you have if you toss it up on GitHub."}, {"owner": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 2, "creation_date": 1431641160, "post_id": 30227214, "comment_id": 48597277, "body": "@eddiezane ended up solving this by removing the sendgrid addon and unsetting user/pass variables then re adding the addon but instead this time using <code>heroku addons:create sendgrid:starter</code> rather than <code>heroku addons:add sendgrid:starter</code>"}, {"owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "reply_to_user": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "edited": false, "score": 0, "creation_date": 1598710716, "post_id": 30227214, "comment_id": 112550501, "body": "@JeffWilkey I just followed your suggestion and straight away see <code>An error was encountered when contacting the add-on partner to create sendgrid:starter: Error Provisioning User - User status - banned</code>. For context, this is my first time using sendgrid and the sendgrid + heroku combo. Not great UX for either really."}, {"owner": {"reputation": 14111, "user_id": 5783745, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/Z5VSF.jpg?s=128&g=1", "display_name": "stevec", "link": "https://stackoverflow.com/users/5783745/stevec"}, "edited": false, "score": 0, "creation_date": 1598713848, "post_id": 30227214, "comment_id": 112551481, "body": "If anyone else has this problem, best <a href=\"https://stackoverflow.com/a/55642112/5783745\">contact sendgrid</a>"}], "tags": [], "owner": {"reputation": 886, "user_id": 959953, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3f8f51e1aa14cdd87cffeaa26bb0ce13?s=128&d=identicon&r=PG", "display_name": "eddiezane", "link": "https://stackoverflow.com/users/959953/eddiezane"}, "is_accepted": true, "score": 10, "last_activity_date": 1431562000, "creation_date": 1431562000, "answer_id": 30227214, "question_id": 30226176, "link": "https://stackoverflow.com/questions/30226176/ruby-on-rails-bad-username-password-535-auth-failed/30227214#30227214", "title": "Ruby on Rails: bad username / password? (535 Auth failed)", "body": "<p>Congrats and welcome to the world of hacking on cool things.</p>\n\n<p>The error you are getting means that the SendGrid server received a bad username + password combo.</p>\n\n<p>Chances are your environment variables are empty and your <code>application.yml</code> file isn't being loaded properly with your SendGrid username + password.</p>\n\n<p>You can confirm this by printing them out somewhere in your code. In a controller works.</p>\n\n<pre><code>puts \"SENDGRID_USERNAME: #{ENV['SENDGRID_USERNAME']}\"\nputs \"SENDGRID_PASSWORD: #{ENV['SENDGRID_PASSWORD']}\"\n</code></pre>\n\n<p>I'd suspect that they are nil.</p>\n\n<p>I'd recommend reading <a href=\"https://quickleft.com/blog/simple-rails-app-configuration-settings/\">https://quickleft.com/blog/simple-rails-app-configuration-settings/</a> about how to get them sourced into your app.</p>\n\n<p>Please let me know if you need any more help!</p>\n"}, {"tags": [], "owner": {"reputation": 189, "user_id": 5269234, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/hPqoz.jpg?s=128&g=1", "display_name": "gdxn96", "link": "https://stackoverflow.com/users/5269234/gdxn96"}, "is_accepted": false, "score": 3, "last_activity_date": 1614809933, "creation_date": 1614809933, "answer_id": 66465786, "question_id": 30226176, "link": "https://stackoverflow.com/questions/30226176/ruby-on-rails-bad-username-password-535-auth-failed/66465786#66465786", "title": "Ruby on Rails: bad username / password? (535 Auth failed)", "body": "<blockquote>\n<p>Two-Factor Authentication is required as of Q4 2020, and all Twilio\nSendGrid API endpoints will reject new API requests and SMTP\nconfigurations made with a username and password via Basic\nAuthentication.</p>\n</blockquote>\n<p>I received a similar issue from an app I've been running for the last couple years. From now on, basic auth doesn't work, and you'll need to use an alternative auth mechanism. Heroku sendgrid auto-configuration on installation has not yet been updated to reflect this.</p>\n<p>Source: <a href=\"https://sendgrid.com/docs/for-developers/sending-email/upgrade-your-authentication-method-to-api-keys/\" rel=\"nofollow noreferrer\">https://sendgrid.com/docs/for-developers/sending-email/upgrade-your-authentication-method-to-api-keys/</a></p>\n"}], "owner": {"reputation": 351, "user_id": 4833558, "user_type": "registered", "accept_rate": 90, "profile_image": "https://lh3.googleusercontent.com/-RHuWp_g38mw/AAAAAAAAAAI/AAAAAAAAAI8/tMMx7_LT-r8/photo.jpg?sz=128", "display_name": "Jeff Wilkey", "link": "https://stackoverflow.com/users/4833558/jeff-wilkey"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10584, "favorite_count": 0, "accepted_answer_id": 30227214, "answer_count": 2, "score": 7, "last_activity_date": 1614809933, "creation_date": 1431555655, "last_edit_date": 1592644375, "question_id": 30226176, "link": "https://stackoverflow.com/questions/30226176/ruby-on-rails-bad-username-password-535-auth-failed", "title": "Ruby on Rails: bad username / password? (535 Auth failed)", "body": "<p>I just finished my ruby foundations coursework at Bloc and I'm starting to bury my head into rails development. Things were going smooth until I hit this snag with devise and confirmation emails. I tried googling and looking around at some other questions but couldn't really find any that gave me anything that I could pull from and apply to my situation.</p>\n<p>I'm receiving the following error when signing up for an account.</p>\n<h1>Net::SMTPAuthenticationError in Devise::RegistrationsController#create</h1>\n<h2>535 Authentication failed: Bad username / password</h2>\n<hr />\n<p>Error extracted from source around line #976</p>\n<pre><code>def check_auth_response(res)\n  unless res.success?\n    raise SMTPAuthenticationError, res.message\n  end\nend\n</code></pre>\n<hr />\n<p>From other posts I know you'll probably want to see that I have a config/initializers/setup_mail.rb file that looks like this:</p>\n<pre><code>if Rails.env.development?\n  ActionMailer::Base.delivery_method = :smtp\n  ActionMailer::Base.smtp_settings = {\n    address:        'smtp.sendgrid.net',\n    port:           '587',\n    authentication: :plain,\n    user_name:      ENV['SENDGRID_USERNAME'],\n    password:       ENV['SENDGRID_PASSWORD'],\n    domain:         'heroku.com',\n    enable_starttls_auto: true\n  }\nend\n</code></pre>\n<hr />\n<p>And here's an application.yml file EXAMPLE:</p>\n<pre><code>SENDGRID_PASSWORD: \nSENDGRID_USERNAME:\nSECRET_KEY_BASE:\n</code></pre>\n<hr />\n<p>also I have the following in my config/environments/development.rb before anybody suggests it:</p>\n<pre><code>config.action_mailer.default_url_options = { host: 'localhost:3000'}\nconfig.action_mailer.delivery_method = :smtp\nconfig.action_mailer.perform_deliveries = true\n# Override Action Mailer's 'silent errors' in development\nconfig.action_mailer.raise_delivery_errors = true\n</code></pre>\n<hr />\n<p>If there's any other files that you'd like to see let me know and I'll add them to this post.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 0, "creation_date": 1431555932, "post_id": 30226156, "comment_id": 48556381, "body": "You&#39;ve put the same code for both models, and your <code>has_many</code>s are very peculiar, so based on that and your question, I think you need to read the <a href=\"http://guides.rubyonrails.org/association_basics.html\" rel=\"nofollow noreferrer\">ActiveRecord Associations</a> guide, and maybe the other ActiveRecord guides too."}, {"owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "edited": false, "score": 0, "creation_date": 1431557343, "post_id": 30226156, "comment_id": 48556832, "body": "I believe that <a href=\"http://stackoverflow.com/q/25745498/631619\">stackoverflow.com/q/25745498/631619</a> will show you a way"}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1431560254, "post_id": 30226156, "comment_id": 48557627, "body": "Do you need to populate any attributes besides user_id when initially creating the UserAditionalDatum model?"}, {"owner": {"reputation": 9, "user_id": 4879368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/au7Gh.jpg?s=128&g=1", "display_name": "Cheshire", "link": "https://stackoverflow.com/users/4879368/cheshire"}, "reply_to_user": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1431612215, "post_id": 30226156, "comment_id": 48580139, "body": "@Infused I need just the user_id. Others atributes will be add in others transactions."}], "owner": {"reputation": 9, "user_id": 4879368, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/au7Gh.jpg?s=128&g=1", "display_name": "Cheshire", "link": "https://stackoverflow.com/users/4879368/cheshire"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 58, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431614251, "creation_date": 1431555546, "last_edit_date": 1431614251, "question_id": 30226156, "link": "https://stackoverflow.com/questions/30226156/how-to-inizialize-a-model-when-you-set-another-model-in-a-form-in-ruby-on-rails", "title": "How to inizialize a model when you set another model in a form in Ruby on Rails", "body": "<p>I have a model <code>User</code> and a model <code>UserAditionalDatum</code>. <code>UserAditionalDatum</code> has a <code>User_id</code> attribute. When I create a new <code>User</code>, I need to initialize the <code>UserAditionalDatum</code> just with the <code>User_id</code> number and anything else. It would be like a dependent between models but instead of destroy the data to create it.</p>\n\n<p>user.rb:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :UserAditionalDatum, dependent: :destroy\nend\n</code></pre>\n\n<p>user_aditional_datum.rb:</p>\n\n<pre><code>class LibrRelAmigo &lt; ActiveRecord::Base \n  belongs_to :libr_usuario\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 4166, "user_id": 498290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/62dffe11d88c2384c4f128d66e884d3f?s=128&d=identicon&r=PG", "display_name": "eeejay", "link": "https://stackoverflow.com/users/498290/eeejay"}, "edited": false, "score": 0, "creation_date": 1431708786, "post_id": 30226106, "comment_id": 48629663, "body": "Further explanation:  I need to capture the value of &quot;umpco&quot; in the first line, then use that value in the second and third line."}, {"owner": {"reputation": 325, "user_id": 290866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936f1eac8914214d76378e2f533a7678?s=128&d=identicon&r=PG", "display_name": "Sam Baker", "link": "https://stackoverflow.com/users/290866/sam-baker"}, "edited": false, "score": 1, "creation_date": 1431709551, "post_id": 30226106, "comment_id": 48630137, "body": "You can add a wildcard to a rewrite rule (<a href=\"http://serverfault.com/questions/259680/nginx-wild-card-alias-location-is-it-possible\" title=\"nginx wild card alias location is it possible\">serverfault.com/questions/259680/&hellip;</a>) but it won&#39;t be available to ruby. So to get what you want, you&#39;d need to iterate through all of the <code>@primary_config</code> objects using ruby in your erb file and generate a rewrite rule for the url in each one."}], "answers": [{"comments": [{"owner": {"reputation": 4166, "user_id": 498290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/62dffe11d88c2384c4f128d66e884d3f?s=128&d=identicon&r=PG", "display_name": "eeejay", "link": "https://stackoverflow.com/users/498290/eeejay"}, "edited": false, "score": 0, "creation_date": 1431707572, "post_id": 30226160, "comment_id": 48628989, "body": "Wouldn&#39;t the second reference also be {somevar} like:"}, {"owner": {"reputation": 4166, "user_id": 498290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/62dffe11d88c2384c4f128d66e884d3f?s=128&d=identicon&r=PG", "display_name": "eeejay", "link": "https://stackoverflow.com/users/498290/eeejay"}, "edited": false, "score": 0, "creation_date": 1431707741, "post_id": 30226160, "comment_id": 48629093, "body": "What is the # symbol for on the third line?  Thanks!"}, {"owner": {"reputation": 325, "user_id": 290866, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/936f1eac8914214d76378e2f533a7678?s=128&d=identicon&r=PG", "display_name": "Sam Baker", "link": "https://stackoverflow.com/users/290866/sam-baker"}, "edited": false, "score": 0, "creation_date": 1431708030, "post_id": 30226160, "comment_id": 48629230, "body": "The # is for string interpolation: <a href=\"https://rubymonk.com/learning/books/1-ruby-primer/chapters/5-strings/lessons/31-string-basics\" rel=\"nofollow noreferrer\">rubymonk.com/learning/books/1-ruby-primer/chapters/5-strings&zwnj;&#8203;/&hellip;</a>"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1431708257, "post_id": 30226160, "comment_id": 48629340, "body": "<code>#{...}</code> does string interpolation in Ruby. So if the variable <code>name</code> has the value <code>&quot;eeejay&quot;</code>, then <code>&quot;Hello, #{name}!&quot;</code> will evaluate to <code>&quot;Hello, eeejay!&quot;</code>"}, {"owner": {"reputation": 4166, "user_id": 498290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/62dffe11d88c2384c4f128d66e884d3f?s=128&d=identicon&r=PG", "display_name": "eeejay", "link": "https://stackoverflow.com/users/498290/eeejay"}, "edited": false, "score": 0, "creation_date": 1431708812, "post_id": 30226160, "comment_id": 48629680, "body": "Can you take a look at my question again, I added a further explanation of the problem.  Thanks so much."}], "tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1431555566, "creation_date": 1431555566, "answer_id": 30226160, "question_id": 30226106, "link": "https://stackoverflow.com/questions/30226106/how-add-parameters-to-a-location-redirect-in-ruby/30226160#30226160", "title": "How add parameters to a location redirect in Ruby", "body": "<p>You would do something like this:</p>\n\n<pre><code>location /primary/api/&lt;%= somevar %&gt;/airplay/ {\n    rewrite /primary/api/&lt;%= somevar %&gt;/airplay/(.*)\n    &lt;%= @primary_config[\"#{somevar}airplay\"][\"url\"] %&gt;/$1 permanent;\n}\n</code></pre>\n\n<p>If <code>somevar</code> is <code>\"umpco\"</code> the third line will be equivalent to this:</p>\n\n<pre><code>&lt;%= @primary_config[\"umpcoairplay\"][\"url\"] %&gt;/$1 permanent;\n</code></pre>\n\n<p>This assumes that the <code>@primary_config</code> hash has an <code>\"umpcoairplay\"</code> key.</p>\n"}], "owner": {"reputation": 4166, "user_id": 498290, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/62dffe11d88c2384c4f128d66e884d3f?s=128&d=identicon&r=PG", "display_name": "eeejay", "link": "https://stackoverflow.com/users/498290/eeejay"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 30, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431555566, "creation_date": 1431555277, "question_id": 30226106, "link": "https://stackoverflow.com/questions/30226106/how-add-parameters-to-a-location-redirect-in-ruby", "title": "How add parameters to a location redirect in Ruby", "body": "<p>We have a redirect in our conf.erb file that looks like:</p>\n\n<pre><code>location  /primary/api/umpco/airplay/ {\n    rewrite /primary/api/umpco/airplay/(.*)\n    &lt;%= @primary_config['umpcoairplay']['url'] %&gt;/$1 permanent;\n}\n</code></pre>\n\n<p>How would I modify this so that it would take a variable for \"umpco\".  Something along these lines but I am not certain of the syntax:</p>\n\n<pre><code>location  /primary/api/&lt;% somevar /&gt;/airplay/ {\n    rewrite /primary/api/&lt;% somevar /&gt;/airplay/(.*)\n    &lt;%= @primary_config['&lt;% somevar /&gt;airplay']['url'] %&gt;/$1 permanent;\n}\n</code></pre>\n"}, {"tags": ["ruby", "for-loop", "numbers"], "comments": [{"owner": {"reputation": 1600, "user_id": 2222931, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a95f05bd9b203919d7fd28a9457a9e6?s=128&d=identicon&r=PG", "display_name": "letz", "link": "https://stackoverflow.com/users/2222931/letz"}, "edited": false, "score": 0, "creation_date": 1431552906, "post_id": 30225524, "comment_id": 48555096, "body": "why do you need a for loop for that? Can you explain what you trying accomplish ?"}, {"owner": {"reputation": 787, "user_id": 4619105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP10Q.png?s=128&g=1", "display_name": "Yahs Hef", "link": "https://stackoverflow.com/users/4619105/yahs-hef"}, "reply_to_user": {"reputation": 1600, "user_id": 2222931, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a95f05bd9b203919d7fd28a9457a9e6?s=128&d=identicon&r=PG", "display_name": "letz", "link": "https://stackoverflow.com/users/2222931/letz"}, "edited": false, "score": 0, "creation_date": 1431553186, "post_id": 30225524, "comment_id": 48555208, "body": "For example.... first number is 3 second number is 5 the computer should add 3+4+5 = 12"}, {"owner": {"reputation": 787, "user_id": 4619105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP10Q.png?s=128&g=1", "display_name": "Yahs Hef", "link": "https://stackoverflow.com/users/4619105/yahs-hef"}, "reply_to_user": {"reputation": 1600, "user_id": 2222931, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/2a95f05bd9b203919d7fd28a9457a9e6?s=128&d=identicon&r=PG", "display_name": "letz", "link": "https://stackoverflow.com/users/2222931/letz"}, "edited": false, "score": 0, "creation_date": 1431553210, "post_id": 30225524, "comment_id": 48555220, "body": "i want to do it in a for-loop"}, {"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 1, "creation_date": 1431553311, "post_id": 30225524, "comment_id": 48555254, "body": "dont use a for loop. turn your range into an enumerable, and call inject. <a href=\"http://ruby-doc.org/core-2.2.2/Enumerable.html#method-i-inject\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.2/Enumerable.html#method-i-inject</a>"}], "answers": [{"comments": [{"owner": {"reputation": 787, "user_id": 4619105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP10Q.png?s=128&g=1", "display_name": "Yahs Hef", "link": "https://stackoverflow.com/users/4619105/yahs-hef"}, "edited": false, "score": 0, "creation_date": 1431553077, "post_id": 30225588, "comment_id": 48555163, "body": "This gives the total of the numbers added not the numbers between."}], "tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": true, "score": 2, "last_activity_date": 1431553106, "last_edit_date": 1431553106, "creation_date": 1431552958, "answer_id": 30225588, "question_id": 30225524, "link": "https://stackoverflow.com/questions/30225524/using-for-loop-to-add-numbers-together/30225588#30225588", "title": "Using for-loop to add numbers together", "body": "<p>Simple for loop across the range you defined:</p>\n\n<pre><code>puts \"Enter first number: \"\nfirst = gets.to_i\nputs \"Enter second number: \"\nsecond = gets.to_i\n\ntotal = 0\nfor i in (first..second) do\n  total += i\nend\n\nputs total\n</code></pre>\n\n<p>Note that if you don't enter a valid number, it will converted to 0. Also this assumes the second number is larger than the first.</p>\n"}, {"comments": [{"owner": {"reputation": 787, "user_id": 4619105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP10Q.png?s=128&g=1", "display_name": "Yahs Hef", "link": "https://stackoverflow.com/users/4619105/yahs-hef"}, "edited": false, "score": 0, "creation_date": 1431553338, "post_id": 30225652, "comment_id": 48555264, "body": "3 to 5 = 12 is just an example"}, {"owner": {"reputation": 787, "user_id": 4619105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP10Q.png?s=128&g=1", "display_name": "Yahs Hef", "link": "https://stackoverflow.com/users/4619105/yahs-hef"}, "edited": false, "score": 0, "creation_date": 1431553356, "post_id": 30225652, "comment_id": 48555272, "body": "i want to put two numbers randomly"}, {"owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "reply_to_user": {"reputation": 787, "user_id": 4619105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP10Q.png?s=128&g=1", "display_name": "Yahs Hef", "link": "https://stackoverflow.com/users/4619105/yahs-hef"}, "edited": false, "score": 0, "creation_date": 1431553452, "post_id": 30225652, "comment_id": 48555316, "body": "@YahsHef I&#39;ve updated it to make it clear that this works for any set of numbers."}, {"owner": {"reputation": 7810, "user_id": 2671317, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f13862b290e178f5a6c40b8d8dfc4f05?s=128&d=identicon&r=PG", "display_name": "ptierno", "link": "https://stackoverflow.com/users/2671317/ptierno"}, "edited": false, "score": 2, "creation_date": 1431553482, "post_id": 30225652, "comment_id": 48555333, "body": "fyi you can just inject <code>:+</code> eg. <code>3.upto(5).inject(&amp;:+)</code>"}], "tags": [], "owner": {"reputation": 18773, "user_id": 91830, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/2505b282d57c29be797dc35b245adb4c?s=128&d=identicon&r=PG", "display_name": "Philip Hallstrom", "link": "https://stackoverflow.com/users/91830/philip-hallstrom"}, "is_accepted": false, "score": 1, "last_activity_date": 1431555351, "last_edit_date": 1431555351, "creation_date": 1431553258, "answer_id": 30225652, "question_id": 30225524, "link": "https://stackoverflow.com/questions/30225524/using-for-loop-to-add-numbers-together/30225652#30225652", "title": "Using for-loop to add numbers together", "body": "<p>I know you said <code>for</code> loop, but why not use what Ruby gives you?</p>\n\n<pre><code>&gt; a = 3\n&gt; b = 5\n&gt; a.upto(b).inject(0) {|m,o| m += o}\n=&gt; 12\n</code></pre>\n\n<p>If you insist on a <code>for</code> loop...</p>\n\n<pre><code>&gt; m = 0\n=&gt; 0\n&gt; for i in 3..5\n*   m += i\n* end\n=&gt; 3..5\n&gt; m\n=&gt; 12\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 2, "creation_date": 1431553441, "post_id": 30225677, "comment_id": 48555308, "body": "Not without Active_Support"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 1, "creation_date": 1521047454, "post_id": 30225677, "comment_id": 85570393, "body": "The <code>sum</code>method has been promoted to plain Ruby, so my previous comment is no longer true."}], "tags": [], "owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "is_accepted": false, "score": 2, "last_activity_date": 1431553505, "last_edit_date": 1431553505, "creation_date": 1431553357, "answer_id": 30225677, "question_id": 30225524, "link": "https://stackoverflow.com/questions/30225524/using-for-loop-to-add-numbers-together/30225677#30225677", "title": "Using for-loop to add numbers together", "body": "<p>In Rails, or in plain-vanilla Ruby with ActiveSupport, you can do something even simpler than a for loop, or than what other people wrote.</p>\n\n<pre><code>(first_num..second_num).sum\n</code></pre>\n\n<p>This is shorthand for sum in Ruby:</p>\n\n<pre><code>sum = 0\n(first_num..second_num).each { |num| sum += num }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 0, "last_activity_date": 1431553383, "creation_date": 1431553383, "answer_id": 30225683, "question_id": 30225524, "link": "https://stackoverflow.com/questions/30225524/using-for-loop-to-add-numbers-together/30225683#30225683", "title": "Using for-loop to add numbers together", "body": "<p>In Ruby it's very rare to see a <code>for</code> loop. In this instance a more idiomatic method would be <a href=\"http://ruby-doc.org/core-2.2.0/Integer.html#method-i-upto\" rel=\"nofollow\"><code>upto</code></a>:</p>\n\n<pre><code>x = 3\ny = 5\ntotal = 0\n\nx.upto(y) do |n|\n  total += n\nend\n\nputs total\n# =&gt; 12\n</code></pre>\n\n<p>Another method would be to use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-reduce\" rel=\"nofollow\"><code>reduce</code></a>:</p>\n\n<pre><code>total = x.upto(y).reduce do |sum, n|\n  sum += n\nend\n</code></pre>\n\n<p>...which can be shortened to this:</p>\n\n<pre><code>total = x.upto(y).reduce(&amp;:+)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": false, "score": 2, "last_activity_date": 1431555299, "last_edit_date": 1431555299, "creation_date": 1431553602, "answer_id": 30225726, "question_id": 30225524, "link": "https://stackoverflow.com/questions/30225524/using-for-loop-to-add-numbers-together/30225726#30225726", "title": "Using for-loop to add numbers together", "body": "<pre><code>first, second = [3,5]\nfor x in (0..0) do\n  p (first + second)*(second - first + 1) / 2\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 150540, "user_id": 128421, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/71770d043c0f7e3c7bc5f74190015c26?s=128&d=identicon&r=PG", "display_name": "the Tin Man", "link": "https://stackoverflow.com/users/128421/the-tin-man"}, "is_accepted": false, "score": 3, "last_activity_date": 1431555484, "creation_date": 1431555484, "answer_id": 30226146, "question_id": 30225524, "link": "https://stackoverflow.com/questions/30225524/using-for-loop-to-add-numbers-together/30226146#30226146", "title": "Using for-loop to add numbers together", "body": "<p>In Ruby we <em>seldom</em> use a <code>for</code> loop because it leaves litter behind. Instead, you can very simply do what you want using <code>inject</code>:</p>\n\n<pre><code>(3..5).inject(:+) # =&gt; 12\n</code></pre>\n\n<p>This is using some of the deeper Ruby magic (<code>:+</code>), which is a symbol for the <code>+</code> method and is passed into <code>inject</code>. How it works is a different question and is something you'll need to learn later.</p>\n\n<p>Don't insist on doing something in a language using a particular construct you learned in another language. That will often force non-idiomatic code and will keep you from learning how to do it as other programmers in that language would do it. That creates maintenance issues and makes you less desirable in the workplace.</p>\n"}, {"tags": [], "owner": {"reputation": 3052, "user_id": 3009846, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/uyEL2.jpg?s=128&g=1", "display_name": "Peter Piper", "link": "https://stackoverflow.com/users/3009846/peter-piper"}, "is_accepted": false, "score": 1, "last_activity_date": 1521038410, "creation_date": 1521038410, "answer_id": 49280591, "question_id": 30225524, "link": "https://stackoverflow.com/questions/30225524/using-for-loop-to-add-numbers-together/49280591#49280591", "title": "Using for-loop to add numbers together", "body": "<p>Since Ruby 2.4 you directly call <code>sum</code> on an Enumerable. </p>\n\n<p>For Example <code>[1, 2, 3].sum   #=&gt; 6</code></p>\n"}], "owner": {"reputation": 787, "user_id": 4619105, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/FP10Q.png?s=128&g=1", "display_name": "Yahs Hef", "link": "https://stackoverflow.com/users/4619105/yahs-hef"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 4719, "favorite_count": 2, "accepted_answer_id": 30225588, "answer_count": 7, "score": 1, "last_activity_date": 1521038410, "creation_date": 1431552722, "last_edit_date": 1431553004, "question_id": 30225524, "link": "https://stackoverflow.com/questions/30225524/using-for-loop-to-add-numbers-together", "title": "Using for-loop to add numbers together", "body": "<p>If I randomly put in two numbers (first number is smaller), how do I use a for-loop to add all the numbers between and itself?</p>\n\n<p>ex:\nfirst number: 3</p>\n\n<p>second number: 5</p>\n\n<p>the computer should give an answer of '12'.</p>\n\n<p>How do I do that using a for-loop?</p>\n"}, {"tags": ["ruby", "uuid"], "answers": [{"comments": [{"owner": {"reputation": 4890, "user_id": 8117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc9cc6f59e0c0882b4f1bdb123b489?s=128&d=identicon&r=PG", "display_name": "Blumer", "link": "https://stackoverflow.com/users/8117/blumer"}, "edited": false, "score": 0, "creation_date": 1431553282, "post_id": 30225402, "comment_id": 48555246, "body": "Thanks for the response. I think endianness does have something to do with it as for some inputs (e.g., 1087192506523562918), I only get back 31 characters."}, {"owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "reply_to_user": {"reputation": 4890, "user_id": 8117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc9cc6f59e0c0882b4f1bdb123b489?s=128&d=identicon&r=PG", "display_name": "Blumer", "link": "https://stackoverflow.com/users/8117/blumer"}, "edited": false, "score": 0, "creation_date": 1431553371, "post_id": 30225402, "comment_id": 48555281, "body": "@Blumer: check the update to this answer by reloading the page, I included the proper padding needed."}, {"owner": {"reputation": 4890, "user_id": 8117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc9cc6f59e0c0882b4f1bdb123b489?s=128&d=identicon&r=PG", "display_name": "Blumer", "link": "https://stackoverflow.com/users/8117/blumer"}, "edited": false, "score": 0, "creation_date": 1431554306, "post_id": 30225402, "comment_id": 48555660, "body": "Yup, I think that did it. Thanks for your help!"}], "tags": [], "owner": {"reputation": 132392, "user_id": 244128, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/300502d6109af88a009074c42ff56c73?s=128&d=identicon&r=PG", "display_name": "maerics", "link": "https://stackoverflow.com/users/244128/maerics"}, "is_accepted": true, "score": 2, "last_activity_date": 1431553247, "last_edit_date": 1431553247, "creation_date": 1431552092, "answer_id": 30225402, "question_id": 30225317, "link": "https://stackoverflow.com/questions/30225317/convert-two-longs-to-a-hex-string/30225402#30225402", "title": "Convert Two Longs to a Hex String", "body": "<p>Try using the <a href=\"http://ruby-doc.org/core-2.2.0/String.html#method-i-25\" rel=\"nofollow\"><code>%</code> string format operator</a> like <code>\"%016x\"</code> (sixteen zero padded hex digits):</p>\n\n<pre><code>a = 0xCAFEBABECAFEBABE # =&gt; 14627333968358193854\nb = 0xDEADBEEFDEADBEEF # =&gt; 16045690984833335023\n'%016x%016x' % [a, b] # =&gt; \"cafebabecafebabedeadbeefdeadbeef\"\n</code></pre>\n\n<p>There are many ways to insert the dashes at the right places if you want to get a properly formatted UUID string; here's the first one that comes to mind:</p>\n\n<pre><code>def longs_to_uuid(a, b)\n  s = '%016x%016x' % [a, b]\n  s.scan(/(.{8})(.{4})(.{4})(.{4})(.{12})/).first.join('-')\nend\n\nlongs_to_uuid(1,2) # =&gt; \"00000000-0000-0001-0000-000000000002\"\n</code></pre>\n\n<p>Don't forget to consider endianness if that's a concern...</p>\n"}], "owner": {"reputation": 4890, "user_id": 8117, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/eafc9cc6f59e0c0882b4f1bdb123b489?s=128&d=identicon&r=PG", "display_name": "Blumer", "link": "https://stackoverflow.com/users/8117/blumer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 79, "favorite_count": 0, "accepted_answer_id": 30225402, "answer_count": 1, "score": 0, "last_activity_date": 1431553247, "creation_date": 1431551657, "question_id": 30225317, "link": "https://stackoverflow.com/questions/30225317/convert-two-longs-to-a-hex-string", "title": "Convert Two Longs to a Hex String", "body": "<p>I have two longs representing the most and least significant bytes of a UUID respectively. How can I use Ruby to convert these two longs into a 32-character hex representation?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 766, "user_id": 2671192, "user_type": "registered", "accept_rate": 52, "profile_image": "https://i.stack.imgur.com/Xkv5l.jpg?s=128&g=1", "display_name": "Haider Ali", "link": "https://stackoverflow.com/users/2671192/haider-ali"}, "edited": false, "score": 1, "creation_date": 1431548969, "post_id": 30224489, "comment_id": 48553055, "body": "only .deliver will deliver email ....."}], "answers": [{"tags": [], "owner": {"reputation": 5760, "user_id": 1863564, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/XU4XS.png?s=128&g=1", "display_name": "Fund Monica&#39;s Lawsuit", "link": "https://stackoverflow.com/users/1863564/fund-monicas-lawsuit"}, "is_accepted": false, "score": 1, "last_activity_date": 1431549462, "last_edit_date": 1431549462, "creation_date": 1431549064, "answer_id": 30224643, "question_id": 30224489, "link": "https://stackoverflow.com/questions/30224489/whats-the-difference-between-send-email-with-deliver-and-without-deliver/30224643#30224643", "title": "what&#39;s the difference between send email with &quot;deliver&quot; and without &quot;deliver&quot;?", "body": "<p>As far as I can tell... just the flat <code>mail</code> function will send the email. If you construct a <code>Mail::Message</code> object, you need to call <code>.deliver</code> on it to get it to send, but the <code>mail</code> function seems to do that for you.</p>\n\n<p>(At least, as far as I can tell. I have yet to test it, so I'm not sure)</p>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 2448623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca7118778cb36d1976c0ef5f412690?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2448623/alex"}, "is_accepted": false, "score": 2, "last_activity_date": 1431549933, "last_edit_date": 1431549933, "creation_date": 1431549549, "answer_id": 30224773, "question_id": 30224489, "link": "https://stackoverflow.com/questions/30224489/whats-the-difference-between-send-email-with-deliver-and-without-deliver/30224773#30224773", "title": "what&#39;s the difference between send email with &quot;deliver&quot; and without &quot;deliver&quot;?", "body": "<p><code>.deliver</code> actually send message, block without <code>.deliver</code> just create mail object but not send it. <code>.deliver</code> is operation for sending email like <code>.deliver_later</code> or custom created delivery method (example: you generate mail using method without <code>.deliver</code> and then your cron_job send this emails later).</p>\n\n<p>You can find more information here:\n<a href=\"http://guides.rubyonrails.org/action_mailer_basics.html#walkthrough-to-generating-a-mailer\" rel=\"nofollow\">http://guides.rubyonrails.org/action_mailer_basics.html#walkthrough-to-generating-a-mailer</a></p>\n\n<p>or</p>\n\n<p>good example working with emails:\n<a href=\"http://railscasts.com/episodes/61-sending-email-revised?view=asciicast\" rel=\"nofollow\">http://railscasts.com/episodes/61-sending-email-revised?view=asciicast</a></p>\n"}], "owner": {"reputation": 347, "user_id": 4808432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eaedc4c7b54dcaf025894792bd0a4f0b?s=128&d=identicon&r=PG&f=1", "display_name": "xin buxu1", "link": "https://stackoverflow.com/users/4808432/xin-buxu1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 120, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1431549933, "creation_date": 1431548486, "last_edit_date": 1431548867, "question_id": 30224489, "link": "https://stackoverflow.com/questions/30224489/whats-the-difference-between-send-email-with-deliver-and-without-deliver", "title": "what&#39;s the difference between send email with &quot;deliver&quot; and without &quot;deliver&quot;?", "body": "<p>What's the difference between following two email invoke approach? One with deliver while another not.</p>\n\n<pre><code>mail(:to =&gt; 'test@gmail.com', :subject =&gt; \"Test\") do |format|\n    format.html { render layout: false }\nend.deliver\n\nmail(:to =&gt; 'test@gmail.com', :subject =&gt; \"Test\") do |format|\n    format.html { render layout: false }\nend\n</code></pre>\n"}, {"tags": ["ruby", "google-email-settings-api"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1431547594, "post_id": 30224119, "comment_id": 48552376, "body": "In Advanced Settings in admin.google.com, you can get an admin-level OAuth token which ought to have access to everything."}, {"owner": {"reputation": 53, "user_id": 382754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85044ff434ccbe5356ebdaa18933593e?s=128&d=identicon&r=PG", "display_name": "Michael Baker", "link": "https://stackoverflow.com/users/382754/michael-baker"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1431623416, "post_id": 30224119, "comment_id": 48587522, "body": "When I go to the page with header &quot;Manage OAuth key and secret for this domain&quot; there is a section that says &quot;The key and secret above are able to access any user&#39;s data for all Google Data APIs. Learn more&quot;. When I click &quot;Learn more&quot; it takes me to a page about Oauth 1.0 and says that it&#39;s deprecated. Can you point me to an article about how to use the OAuth consumer key and OAuth consumer secret to access the emailsettings api using OAuth 2.0?"}, {"owner": {"reputation": 53, "user_id": 382754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85044ff434ccbe5356ebdaa18933593e?s=128&d=identicon&r=PG", "display_name": "Michael Baker", "link": "https://stackoverflow.com/users/382754/michael-baker"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1431624325, "post_id": 30224119, "comment_id": 48588071, "body": "I suppose I should also note that I&#39;ve gotten a token with the following: <a href=\"https://gist.github.com/MichaelBaker/d1ea2ccfde3417359a5c\" rel=\"nofollow noreferrer\">gist.github.com/MichaelBaker/d1ea2ccfde3417359a5c</a> But when I submit that token with the email settings request under the <code>access_token</code> query param, the response is a 401."}, {"owner": {"reputation": 53, "user_id": 382754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85044ff434ccbe5356ebdaa18933593e?s=128&d=identicon&r=PG", "display_name": "Michael Baker", "link": "https://stackoverflow.com/users/382754/michael-baker"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1431624827, "post_id": 30224119, "comment_id": 48588362, "body": "Also, the client gem only seems to accept the consumer secret and key for the OAuth 1 client, not the OAuth 2 client: <a href=\"https://code.google.com/p/oauth-signet/wiki/SignetOAuth1Client\" rel=\"nofollow noreferrer\">code.google.com/p/oauth-signet/wiki/SignetOAuth1Client</a>"}], "answers": [{"tags": [], "owner": {"reputation": 4220, "user_id": 5983596, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/Jy1rW.jpg?s=128&g=1", "display_name": "Morfinismo", "link": "https://stackoverflow.com/users/5983596/morfinismo"}, "is_accepted": false, "score": 1, "last_activity_date": 1477708756, "creation_date": 1477708756, "answer_id": 40315525, "question_id": 30224119, "link": "https://stackoverflow.com/questions/30224119/fetching-employee-signatures-using-oauth2-without-asking-the-user/40315525#40315525", "title": "Fetching employee signatures using Oauth2 without asking the user", "body": "<p>Michael,</p>\n\n<p>The Email Settings API will soon be deprecated hence I strongly suggest you to move to GMAIL API. There is a method that can help you retrieve the user signature and you can check the reference here <a href=\"https://developers.google.com/gmail/api/v1/reference/users/settings/sendAs/get\" rel=\"nofollow\">https://developers.google.com/gmail/api/v1/reference/users/settings/sendAs/get</a></p>\n\n<p>In regards to getting the user's signature without any interaction from your employees, you will need to use a service account to impersonate the user and get the information. You can refer to this document for information on how to proceed <a href=\"https://developers.google.com/api-client-library/ruby/auth/service-accounts\" rel=\"nofollow\">https://developers.google.com/api-client-library/ruby/auth/service-accounts</a>.</p>\n\n<p>Hope this helps!</p>\n"}], "owner": {"reputation": 53, "user_id": 382754, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/85044ff434ccbe5356ebdaa18933593e?s=128&d=identicon&r=PG", "display_name": "Michael Baker", "link": "https://stackoverflow.com/users/382754/michael-baker"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 166, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1477708756, "creation_date": 1431547117, "question_id": 30224119, "link": "https://stackoverflow.com/questions/30224119/fetching-employee-signatures-using-oauth2-without-asking-the-user", "title": "Fetching employee signatures using Oauth2 without asking the user", "body": "<p>I administer a Google Apps account. We need to retrieve the email signatures for the employees in our domain in order to display them in an application we're working on. We need to do this programmatically on our servers, without any interaction from our employees.</p>\n\n<p>Our codebase is in Ruby. I've gotten everything working by using ClientLogin (\"google.com/accounts/ClientLogin\") with our Google Apps administrator email address and password and then parsing out the token from that response and using it to make a call to \"<a href=\"https://apps-apis.google.com/a/feeds/emailsettings/2.0/#\" rel=\"nofollow\">https://apps-apis.google.com/a/feeds/emailsettings/2.0/#</a>{domain}/#{username}/signature\".</p>\n\n<p>However, we would like to do this the modern, non-deprecated way, which from what I read means using OAuth2. The problem I'm having is that I can't find a guide which clearly states how to do this. I've read the Python examples and code, but they all have a manual step where you enter a URL in your browser and click a button. Also, as we aren't using Python, it's not entirely straight forward to port these examples over in the first place because they all assume you're using other Python libraries.</p>\n\n<p>Is there a clear explanation somewhere of how to obtain an authentication token for a google apps administrator using the new authentication mechanism and then using that token to submit a request to \"<a href=\"https://apps-apis.google.com/a/feeds/emailsettings/2.0/#\" rel=\"nofollow\">https://apps-apis.google.com/a/feeds/emailsettings/2.0/#</a>{domain}/#{username}/signature\" to retrieve a user's signature?</p>\n\n<p>It would be most helpful if the explanation were language agnostic (using straight HTTP calls), but if I absolutely port all of the code from another language then I will do that.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1431547392, "post_id": 30223968, "comment_id": 48552273, "body": "you could use this <code>&#47;[^\\p{ASCII}]&#47;</code> which will match anything not in <code>&#47;[\\x00-\\x7F]&#47;</code> <a href=\"http://rubular.com/r/sXlJACAwdS\" rel=\"nofollow noreferrer\">Example</a>"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1431548551, "post_id": 30223968, "comment_id": 48552858, "body": "What is it you\u2019re trying to do? You could do this: <code>&quot;Caf&#233;&quot;.force_encoding(&#39;binary&#39;).match(&#47;[\\x80-\\xff]&#47;n)</code> \u2013 at least it doesn\u2019t raise any exceptions, but it doesn\u2019t really make much sense with a unicode string."}], "answers": [{"comments": [{"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1431550658, "post_id": 30224663, "comment_id": 48553898, "body": "what would be the difference between your example and say <code>&#47;[^[:ascii:]]&#47;</code> or <code>&#47;[^\\p{ASCII}]&#47;</code> just for edification purposes?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1431550779, "post_id": 30224663, "comment_id": 48553955, "body": "I asked that question myself. Because this way we can modify the range, use subrange, for instance. <code>[^\\p{ASCII}]</code> is a set shorthand class."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "edited": false, "score": 0, "creation_date": 1431550981, "post_id": 30224663, "comment_id": 48554066, "body": "Fair enough this would allow for range manipulation but in essence what you have currently is the same as it contains the full range of non-ascii characters. Due to the fact that your answer allows for more flexibility I am inclined to agree that this is the best answer to an ambiguous question."}, {"owner": {"reputation": 2030, "user_id": 258242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a22984846d3a60b15fd1a34a4e99d866?s=128&d=identicon&r=PG", "display_name": "benji", "link": "https://stackoverflow.com/users/258242/benji"}, "edited": false, "score": 0, "creation_date": 1431552129, "post_id": 30224663, "comment_id": 48554682, "body": "Is there a method that would work in both ruby 1.8 and ruby 1.9?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1431552339, "post_id": 30224663, "comment_id": 48554796, "body": "I think this one will work. If you plan to only match non-ASCII, you can use the already discussed <code>[^\\p{ASCII}]</code> class."}, {"owner": {"reputation": 2030, "user_id": 258242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a22984846d3a60b15fd1a34a4e99d866?s=128&d=identicon&r=PG", "display_name": "benji", "link": "https://stackoverflow.com/users/258242/benji"}, "edited": false, "score": 0, "creation_date": 1431552552, "post_id": 30224663, "comment_id": 48554911, "body": "somehow in 1.8 it matches &quot;a&quot;"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1431552706, "post_id": 30224663, "comment_id": 48554985, "body": "Did you add <code>u</code> to the regex: <code>.match(&#47;[\\u0080-\\uFFFF]&#47;u)</code>, and did you declare the UTF-8 encoding?"}, {"owner": {"reputation": 2030, "user_id": 258242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a22984846d3a60b15fd1a34a4e99d866?s=128&d=identicon&r=PG", "display_name": "benji", "link": "https://stackoverflow.com/users/258242/benji"}, "edited": false, "score": 0, "creation_date": 1431552856, "post_id": 30224663, "comment_id": 48555059, "body": "with 1.8:# encoding: utf-8 puts &quot;Caf&#233;&quot;.match(/[\\u0080-\\uFFFF]/)  =&gt; C puts &quot;Caf&#233;&quot;.match(/[\\x80-\\xff]/)      =&gt; nothing puts &quot;Caf&#233;&quot;.match(/[^\\p{ASCII}]/)     =&gt; a puts &quot;Caf&#233;&quot;.match(/[\\u0080-\\uFFFF]/u) =&gt; C"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1431553065, "post_id": 30224663, "comment_id": 48555160, "body": "Interesting. Have a look at <a href=\"http://stackoverflow.com/a/4585339/3832970\">this post</a>, I hope it can help."}, {"owner": {"reputation": 19244, "user_id": 1978251, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/73f7dd539ad8ec8372af0d06e4f76939?s=128&d=identicon&r=PG", "display_name": "engineersmnky", "link": "https://stackoverflow.com/users/1978251/engineersmnky"}, "reply_to_user": {"reputation": 2030, "user_id": 258242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a22984846d3a60b15fd1a34a4e99d866?s=128&d=identicon&r=PG", "display_name": "benji", "link": "https://stackoverflow.com/users/258242/benji"}, "edited": false, "score": 0, "creation_date": 1431605288, "post_id": 30224663, "comment_id": 48575570, "body": "@bananasplit the inverse of the answer works well across versions eg /[^\\u0000-\\u007F]/u will select &#233; in 1.8.7, 1.9.3, and 2.1.5"}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1431550099, "last_edit_date": 1431550099, "creation_date": 1431549145, "answer_id": 30224663, "question_id": 30223968, "link": "https://stackoverflow.com/questions/30223968/making-character-range-regexp-work-with-ruby-1-9/30224663#30224663", "title": "Making character-range Regexp work with Ruby 1.9", "body": "<p>If you plan to capture the range expressed with code points, you'll need to use <code>\\u</code> notation with the utf-8 encoding header:</p>\n\n<pre><code>#!/bin/env ruby\n# encoding: utf-8\n\nputs \"Caf\u00e9\".match(/[\\u0080-\\uFFFF]/)\n</code></pre>\n\n<p>The output of the <a href=\"http://ideone.com/0pEaBK\" rel=\"nofollow\">demo program</a> is <code>\u00e9</code>.</p>\n"}], "owner": {"reputation": 2030, "user_id": 258242, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a22984846d3a60b15fd1a34a4e99d866?s=128&d=identicon&r=PG", "display_name": "benji", "link": "https://stackoverflow.com/users/258242/benji"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 96, "favorite_count": 0, "accepted_answer_id": 30224663, "answer_count": 1, "score": 1, "last_activity_date": 1431551931, "creation_date": 1431546573, "last_edit_date": 1431551931, "question_id": 30223968, "link": "https://stackoverflow.com/questions/30223968/making-character-range-regexp-work-with-ruby-1-9", "title": "Making character-range Regexp work with Ruby 1.9", "body": "<p>These operations work in Ruby 1.8, but I can't make them work in Ruby 1.9:</p>\n\n<pre><code>irb(main):002:0&gt; \"Caf\u00e9\".match(/[\\x80-\\xff]/)\nSyntaxError: (irb):2: invalid multibyte escape: /[\\x80-\\xff]/\n\nirb(main):003:0&gt; \"Caf\u00e9\".match(Regexp.new('[\\x80-\\xff]', nil, 'n'))\nEncoding::CompatibilityError: incompatible encoding regexp match (ASCII-8BIT regexp with UTF-8 string)\n</code></pre>\n\n<p>How can I fix this?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 1603, "user_id": 1276952, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MemRe.jpg?s=128&g=1", "display_name": "akash", "link": "https://stackoverflow.com/users/1276952/akash"}, "edited": false, "score": 0, "creation_date": 1431546782, "post_id": 30223926, "comment_id": 48551922, "body": "where do u want to use map?"}, {"owner": {"reputation": 16775, "user_id": 442945, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/TovHM.png?s=128&g=1", "display_name": "Nathaniel Ford", "link": "https://stackoverflow.com/users/442945/nathaniel-ford"}, "edited": false, "score": 1, "creation_date": 1431547259, "post_id": 30223926, "comment_id": 48552195, "body": "Note that your question doesn&#39;t drill down to what you&#39;re trying to map and what problems you&#39;re running into. This is a good reference for improving your question: <a href=\"http://www.sscce.org/\" rel=\"nofollow noreferrer\">sscce.org</a>"}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4897252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d81d326ba3e7d76fc11680a6c703e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Jessie shou", "link": "https://stackoverflow.com/users/4897252/jessie-shou"}, "edited": false, "score": 0, "creation_date": 1432068557, "post_id": 30224239, "comment_id": 48766196, "body": "Thank you! Now I understand!"}], "tags": [], "owner": {"reputation": 11148, "user_id": 342859, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/6484adc258d87ac6b62dbd93898df65d?s=128&d=identicon&r=PG", "display_name": "Yossi", "link": "https://stackoverflow.com/users/342859/yossi"}, "is_accepted": false, "score": 2, "last_activity_date": 1431547555, "creation_date": 1431547555, "answer_id": 30224239, "question_id": 30223926, "link": "https://stackoverflow.com/questions/30223926/how-to-use-map-in-rails/30224239#30224239", "title": "How to use .map in Rails", "body": "<p><code>#map</code> function returns a new object which you are dismissing.\nTo save the result you should assign it back to <code>words</code> like this:</p>\n\n<pre><code>words = sentence.split(\" \")\nwords = words.map do |word| \n  translate_word(word)\nend\n</code></pre>\n\n<p>Or use <code>#map!</code> instead.</p>\n"}], "owner": {"reputation": 1, "user_id": 4897252, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4d81d326ba3e7d76fc11680a6c703e5b?s=128&d=identicon&r=PG&f=1", "display_name": "Jessie shou", "link": "https://stackoverflow.com/users/4897252/jessie-shou"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 861, "favorite_count": 0, "answer_count": 1, "score": -4, "last_activity_date": 1431582155, "creation_date": 1431546434, "last_edit_date": 1431582155, "question_id": 30223926, "link": "https://stackoverflow.com/questions/30223926/how-to-use-map-in-rails", "title": "How to use .map in Rails", "body": "<p>Pig Latin</p>\n\n<p>Rule 1: If a word begins with a vowel sound, add an \"ay\" sound to\nthe end of the word.</p>\n\n<p>Rule 2: If a word begins with a consonant sound, move it to the end\nof the word, and then add an \"ay\" sound to the end of the word.</p>\n\n<p>The following program works in ruby. But I'm confused on how to use the \"map\" function? Please see the code as follows:</p>\n\n<pre><code>def translate(sentence)\n  if sentence.include?(\" \")\n    words = sentence.split(\" \").map do |word|       \n      translate_word(word)                        \n    end\n    return  words.join(\" \")\n  else single_word = sentence\n    translate_word(single_word)\n  end\nend\n</code></pre>\n\n<p>The above sentences works! but if I use:</p>\n\n<pre><code>words = sentence.split(\" \")\nwords.map do |word|\n  translate_word(word)\nend\n</code></pre>\n\n<p>It DOESN'T work! Why? I thought they were the same...</p>\n\n<pre><code>def translate_word(w)\n  vowels = %w[a e i o u]\n  consonants = (\"a\"..\"z\").to_a - vowels \n\n  if vowels.include?(w[0])\n    w + \"ay\"\n    elsif consonants.include?(w[0]) &amp;&amp; vowels.include?(w[1]) &amp;&amp; w[1] != \"u\"\n      w[1..-1] + w[0] + \"ay\"\n    elsif (consonants.include?(w[0]) &amp;&amp; consonants.include?(w[1]) &amp;&amp; vowels.include?(w[2]) &amp;&amp; w[2] != \"u\") || (w[0] == \"q\" &amp;&amp; w[1] == \"u\")\n      w[2..-1] + w[0..1] + \"ay\"\n    elsif (consonants.include?(w[0]) &amp;&amp; consonants.include?(w[1]) &amp;&amp; consonants.include?(w[2]) &amp;&amp; vowels.include?(w[3])) \n      w[3..-1] + w[0..2] + \"ay\"\n    elsif consonants.include?(w[0]) &amp;&amp; w[1] == \"q\" &amp;&amp; w[2] == \"u\"\n      w[3..-1] + w[0..2] + \"ay\"\n    end\nend\n</code></pre>\n"}, {"tags": ["ruby", "regex", "pattern-matching", "gsub"], "answers": [{"comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1431545551, "post_id": 30223445, "comment_id": 48551294, "body": "I just noticed you are looking for the first group, but in the 1st example, it is the last group <code>\\e[40m</code> that is captured and my current regex will only use the last group match. Could you please precise? <a href=\"https://regex101.com/r/oI3aG7/1\" rel=\"nofollow noreferrer\">Here is my testing demo</a>, please see the groups highlighted."}, {"owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431545827, "post_id": 30223445, "comment_id": 48551435, "body": "My apologies. You are correct. I&#39;ll update that. To be consistent, I want the last match from that group to be used."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431546245, "post_id": 30223445, "comment_id": 48551647, "body": "Please check it again. <code>\\e[40m</code> is right before <code>Text</code> in <i>both</i> examples, and thus it is matched and used in the replacement. I also do not quite understand your <code>(\\e\\[[3,9][0-8]m)</code> subpattern: did you mean to capture <code>\\e[30]m</code> but not <code>\\e[21]m</code>? Right now, it matches <code>\\e[,0]m</code>. I have added it back to the regex."}, {"owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431546650, "post_id": 30223445, "comment_id": 48551862, "body": "Thank you so much! Worked like a charm."}, {"owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431546804, "post_id": 30223445, "comment_id": 48551936, "body": "The original intent of having (\\e&#91;[0-9]{1,2}m) and  (\\e&#91;[3,9][0-8]m) was that there could be a sequence of alternating patterns. But since one is a subset of another, it was useless. I will update my original intent once I&#39;ve verified it."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431546921, "post_id": 30223445, "comment_id": 48552000, "body": "It is almost a subset. It is not a subset if you really plan to match a literal <code>,</code>."}, {"owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431547119, "post_id": 30223445, "comment_id": 48552112, "body": "My goal was originally to have that first grouping be any single digit number or any 2 digit number not in the 30s or 90s. There may be a more efficient way to change it. I updated it to provide a glimpse of the functionality I wanted from that regex. I know I added more parentheses (unsure if they&#39;re needed for precedence), but your solution of using \\\\# will still be applicable for my goal."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431547541, "post_id": 30223445, "comment_id": 48552348, "body": "If you are still planning to restrict the numbers to the range between <code>0-29</code> and <code>90-99</code>, you&#39;d need to use <code>\\b(?:[129][0-9]|[0-9])\\b</code>. To match numbers between 30 and 90 you can use <code>\\b(?:[3-8][0-9]|90)\\b</code>."}, {"owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431547958, "post_id": 30223445, "comment_id": 48552552, "body": "For the first grouping, the numbers I want to match are any single digit numbers or any two digit number not in the 30s or 90s. So 1,2,3,4,5,6,7,8,9,10,11,...,29,40,41,...,89. The numbers I want to match in the second grouping are any numbers in 30-39 or 90-99."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431548254, "post_id": 30223445, "comment_id": 48552711, "body": ":) I do not see the point in splitting the numbers into groups unless you need to do anything specific to them. Even if you do, you can do it later in the code. I think you are safe with just <code>[0-9]{1,2}</code> to match 1- and 2-digit numbers."}, {"owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "edited": false, "score": 0, "creation_date": 1431548647, "post_id": 30223445, "comment_id": 48552900, "body": "Yeah, the reason I was splitting them into two groups was I wanted the first one to referenced by \\1 and the latter to be reference by \\2. So that if it&#39;s 30s or 90s, I do one thing, all other 1-2 digit numbers I do something else with them."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 1, "last_activity_date": 1431546503, "last_edit_date": 1431546503, "creation_date": 1431544495, "answer_id": 30223445, "question_id": 30223232, "link": "https://stackoverflow.com/questions/30223232/ruby-regex-group-replacement/30223445#30223445", "title": "Ruby Regex Group Replacement", "body": "<p>You can use the following regex with back-reference <code>\\\\1</code> in the replacement:</p>\n\n<pre><code>reg = /(\\\\e\\[(?:[0-9]{1,2}|[3,9][0-8])m)+Text/\nmystring = \"\\\\e[1mHello there\\\\e[34m\\\\e[40mText\\\\e[0m\\\\e[0m\\\\e[22m\"\nputs mystring.gsub(reg, '\\\\1New Text')\n\nmystring = \"\\\\e[1mHello there\\\\e[44m\\\\e[34m\\\\e[40mText\\\\e[0m\\\\e[0m\\\\e[22m\"\nputs mystring.gsub(reg, '\\\\1New Text')\n</code></pre>\n\n<p>Output of the <a href=\"http://ideone.com/x2TQeh\" rel=\"nofollow\">IDEONE demo</a>:</p>\n\n<pre><code>\\e[1mHello there\\e[40mNew Text\\e[0m\\e[0m\\e[22m\n\\e[1mHello there\\e[40mNew Text\\e[0m\\e[0m\\e[22m\n</code></pre>\n\n<p>Mind that your input has backslash <code>\\</code> that needs escaping in a regular string literal. To match it inside the regex, we use double slash, as we are looking for a literal backslash.</p>\n"}], "owner": {"reputation": 181, "user_id": 4105814, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/16b82751019d71cd07382d6873c87251?s=128&d=identicon&r=PG&f=1", "display_name": "fowlball1010", "link": "https://stackoverflow.com/users/4105814/fowlball1010"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 30223445, "answer_count": 1, "score": 3, "last_activity_date": 1431552115, "creation_date": 1431543750, "last_edit_date": 1431552115, "question_id": 30223232, "link": "https://stackoverflow.com/questions/30223232/ruby-regex-group-replacement", "title": "Ruby Regex Group Replacement", "body": "<p>I am trying to perform regular expression matching and replacement on the same line in Ruby. I have some libraries that manipulate strings in Ruby and add special formatting characters to it. The formatting can be applied in any order. However, if I would like to change the string formatting, I want to keep some of the original formatting. I'm using regex for that. I have the regular expression matching correctly what I need:</p>\n\n<pre><code>mystring.gsub(/[(\\e\\[([1-9]|[1,2,4,5,6,7,8]{2}m))|(\\e\\[[3,9][0-8]m)]*Text/, 'New Text')\n</code></pre>\n\n<p>However, what I really want is the matching from the first grouping found in:</p>\n\n<pre><code>(\\e\\[([1-9]|[1,2,4,5,6,7,8]{2}m))\n</code></pre>\n\n<p>to be appended to <code>New Text</code> and replaced as opposed to just <code>New Text</code>. I'm trying to reference the match in the form of</p>\n\n<pre><code>mystring.gsub(/[(\\e\\[([1-9]|[1,2,4,5,6,7,8]{2}m))|(\\e\\[[3,9][0-8]m)]*Text/, '\\1' + 'New Text')\n</code></pre>\n\n<p>but my understanding is that <code>\\1</code> only works when using <code>\\d</code> or <code>\\k</code>. Is there any way to reference that specific capturing group in my replacement string? Additionally, since I am using an asterik for the <code>[]</code>, I know that this grouping could occur more than once. Therefore, I would like to have the last matching occurrence yielded.</p>\n\n<p>My expected input/output with a sample is:</p>\n\n<pre><code>Input:  \"\\e[1mHello there\\e[34m\\e[40mText\\e[0m\\e[0m\\e[22m\"\nOutput: \"\\e[1mHello there\\e[40mNew Text\\e[0m\\e[0m\\e[22m\"\n\nInput:  \"\\e[1mHello there\\e[44m\\e[34m\\e[40mText\\e[0m\\e[0m\\e[22m\"\nOutput: \"\\e[1mHello there\\e[40mNew Text\\e[0m\\e[0m\\e[22m\"\n</code></pre>\n\n<p>So the last grouping is found and appended.</p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 5, "last_activity_date": 1431543711, "last_edit_date": 1431543711, "creation_date": 1431543087, "answer_id": 30223031, "question_id": 30222922, "link": "https://stackoverflow.com/questions/30222922/instantiating-objects-only-once-in-singletons-in-ruby/30223031#30223031", "title": "Instantiating objects only once in singletons in ruby", "body": "<p>You can do</p>\n\n<pre><code>def registered_object\n  @registered_object ||= {}\nend\n</code></pre>\n\n<p>Then call <code>registered_object</code> instead of <code>@registered_object</code>.</p>\n\n<p>This is a common Ruby idiom. It means:</p>\n\n<blockquote>\n  <p>If @registered_object is falsy, then set it to {}.</p>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 56502, "user_id": 271475, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9b00f41e5f2a69734051f2a78f4f3785?s=128&d=identicon&r=PG", "display_name": "Chris Heald", "link": "https://stackoverflow.com/users/271475/chris-heald"}, "is_accepted": true, "score": 0, "last_activity_date": 1431544226, "last_edit_date": 1431544226, "creation_date": 1431543789, "answer_id": 30223240, "question_id": 30222922, "link": "https://stackoverflow.com/questions/30222922/instantiating-objects-only-once-in-singletons-in-ruby/30223240#30223240", "title": "Instantiating objects only once in singletons in ruby", "body": "<p>If you want an actual singleton factory, then Ruby has the <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/singleton/rdoc/Singleton.html\" rel=\"nofollow\">Singleton module</a> which helps with that!</p>\n\n<p>You can define your class like this:</p>\n\n<pre><code>module AisisWriter\n  class ClassFactory\n    include Singleton\n    attr_accessor :registered_objects\n\n    def initialize\n      @registered_object = {}\n    end\n\n    def register(class_name, klass, params = nil)\n      raise ArgumentError, \"Class name already registered.\" if registered? class_name\n      @registered_object[class_name] = {:class_name =&gt; klass, :params =&gt; params}\n    end\n\n    def registered?(class_name)\n      @registered_object.key? class_name\n    end\n\n    def create(class_name, params = nil)\n      raise ArgumentError, \"Class does not exist in the registered classes.\" unless registered? class_name\n      klass = @registered_object[class_name]\n      klass[:class_name].new *Array(params || klass[:params])\n    end\n  end\nend\n</code></pre>\n\n<p>This provides an <code>#initialize</code> method where you can set up all your singleton state, but <code>::new</code> is uncallable as you'd expect. Instead, you use <code>::instance</code>.</p>\n\n<p>And then you'd use it like:</p>\n\n<pre><code>AisisWriter::ClassFactory.instance.register(...)\nAisisWriter::ClassFactory.instance.create(...)\n</code></pre>\n\n<p>The factory will be instantiated only once when <code>#instance</code> is called for the first time.</p>\n"}], "owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 389, "favorite_count": 0, "accepted_answer_id": 30223240, "answer_count": 2, "score": 1, "last_activity_date": 1431546340, "creation_date": 1431542741, "last_edit_date": 1431546340, "question_id": 30222922, "link": "https://stackoverflow.com/questions/30222922/instantiating-objects-only-once-in-singletons-in-ruby", "title": "Instantiating objects only once in singletons in ruby", "body": "<p>I have been for the last couple of days working on this Factory pattern based class where you can register classes, give them unique names, then use them to create objects on the fly. My class looks as such:</p>\n\n<pre><code>module AisisWriter\n  class ClassFactory\n    class &lt;&lt; self\n      undef_method :new\n      attr_accessor :registered_objects\n\n      def register(class_name, klass, params = nil)\n        if !params.nil? &amp;&amp; !params.is_a?(Array)\n          raise ArgumentError, \"Params must be an array.\"\n        end\n\n        if registered?(class_name)\n          raise ArgumentError, \"Class name already registered.\"\n        end\n\n        @registered_object[class_name] = {:class_name =&gt; klass, :params =&gt; !params.nil? ? params.flatten : nil}\n      end\n\n      def registered?(class_name)\n        if @registered_object.nil?\n          return false\n        end\n\n        @registered_object.include? class_name\n      end\n\n      def create(class_name, params = nil)\n        if !params.nil? &amp;&amp; !params.is_a?(Array)\n          raise ArgumentError, \"Params must be an array.\"\n        end\n\n        if !registered?(class_name)\n          raise ArgumentError, \"Class does not exist in the registered classes.\"\n        end\n\n        klass = @registered_object[class_name]\n\n        if !params.nil\n          klass[:class_name].new(params.flatten)\n        else\n          flass[:class_name].new(*klass[:params])\n        end\n      end\n\n    end\n  end\nend\n</code></pre>\n\n<p>But I have some questions, which arose as I was writing tests.</p>\n\n<ol>\n<li>in the <code>register(...)</code> function I do:</li>\n</ol>\n\n<p><code>@registered_object[class_name] = {:class_name =&gt; klass, :params =&gt; !params.nil? ? params.flatten : nil}\n</code>\nThis fails because <code>@registered_object</code> is nil. How do I initialize it only once? In php I would write a <code>getInstance()</code> method and say if the class instance is set, don't set it again, while we set the class instance also set other variables that only need to be set once. Would I have a <code>get_instance</code> method here?</p>\n\n<ol start=\"2\">\n<li>In relation to question one, can I chain methods in ruby. so if I needed to get an instance of this class, which just sets <code>@registered_object</code> to <code>{}</code> once, could I then do: <code>AisisWriter::ClassFactory.get_instance.register(...)</code> Does ruby support that?</li>\n</ol>\n\n<p>The basis here is to make sure that when this class is called upon, we check if <code>@register_object</code> is nil, and if so set it to a new instance of <code>{}</code></p>\n\n<p>If there is a easier solution I am all ears.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1431542359, "post_id": 30222686, "comment_id": 48549379, "body": "try  <code>&quot;#{body = line1 + &quot;\\n&quot; + line2}&quot;.html_safe</code>, but I&#39;m not sure it&#39;ll work"}], "answers": [{"comments": [{"owner": {"reputation": 347, "user_id": 4808432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eaedc4c7b54dcaf025894792bd0a4f0b?s=128&d=identicon&r=PG&f=1", "display_name": "xin buxu1", "link": "https://stackoverflow.com/users/4808432/xin-buxu1"}, "edited": false, "score": 0, "creation_date": 1431544847, "post_id": 30223056, "comment_id": 48550886, "body": "I guess I must render a html to make this happen."}, {"owner": {"reputation": 1824, "user_id": 112090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/864e3b2d181f2fabb13e172bf90db507?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/112090/mario"}, "edited": false, "score": 0, "creation_date": 1484246800, "post_id": 30223056, "comment_id": 70442722, "body": "Don&#39;t just throw html_safe around, it can be a security risk if you are dealing with rendering user input."}], "tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": false, "score": -2, "last_activity_date": 1431543152, "creation_date": 1431543152, "answer_id": 30223056, "question_id": 30222686, "link": "https://stackoverflow.com/questions/30222686/ruby-on-rails-sending-email-with-multi-line-body/30223056#30223056", "title": "ruby on rails sending email with multi-line body", "body": "<p>Try this -</p>\n\n<pre><code>  body = \"#{line1} &lt;br&gt; #{line2}\"\n  mail(to: ['myaddress@gmail.com'], subject: subject, body: body.html_safe).deliver\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 347, "user_id": 4808432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eaedc4c7b54dcaf025894792bd0a4f0b?s=128&d=identicon&r=PG&f=1", "display_name": "xin buxu1", "link": "https://stackoverflow.com/users/4808432/xin-buxu1"}, "edited": false, "score": 1, "creation_date": 1431551168, "post_id": 30224885, "comment_id": 48554183, "body": "I&#39;m using haml to create a template here."}, {"owner": {"reputation": 338, "user_id": 2448623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca7118778cb36d1976c0ef5f412690?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2448623/alex"}, "reply_to_user": {"reputation": 347, "user_id": 4808432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eaedc4c7b54dcaf025894792bd0a4f0b?s=128&d=identicon&r=PG&f=1", "display_name": "xin buxu1", "link": "https://stackoverflow.com/users/4808432/xin-buxu1"}, "edited": false, "score": 0, "creation_date": 1431551949, "post_id": 30224885, "comment_id": 48554586, "body": "Yes, but for actually email you need to use .html.erb template format"}, {"owner": {"reputation": 1824, "user_id": 112090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/864e3b2d181f2fabb13e172bf90db507?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/112090/mario"}, "edited": false, "score": 0, "creation_date": 1484250362, "post_id": 30224885, "comment_id": 70444691, "body": "You don&#39;t know where his line1 and line2 are coming from.  You should not be advising him to use html_safe on its own."}], "tags": [], "owner": {"reputation": 338, "user_id": 2448623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca7118778cb36d1976c0ef5f412690?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2448623/alex"}, "is_accepted": true, "score": 0, "last_activity_date": 1431551876, "last_edit_date": 1431551876, "creation_date": 1431549995, "answer_id": 30224885, "question_id": 30222686, "link": "https://stackoverflow.com/questions/30222686/ruby-on-rails-sending-email-with-multi-line-body/30224885#30224885", "title": "ruby on rails sending email with multi-line body", "body": "<p>Amit Suroliya answer is correct but for this operation you should use <code>.html.erb</code> template format for email and you definitely should use <code>.html_safe</code> for body. If you use <code>.text.erb</code> format for email it just show you plain text</p>\n"}, {"tags": [], "owner": {"reputation": 1824, "user_id": 112090, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/864e3b2d181f2fabb13e172bf90db507?s=128&d=identicon&r=PG", "display_name": "Mario", "link": "https://stackoverflow.com/users/112090/mario"}, "is_accepted": false, "score": 2, "last_activity_date": 1484250215, "creation_date": 1484250215, "answer_id": 41621639, "question_id": 30222686, "link": "https://stackoverflow.com/questions/30222686/ruby-on-rails-sending-email-with-multi-line-body/41621639#41621639", "title": "ruby on rails sending email with multi-line body", "body": "<p>Since you have not specified if you are sending as HTML or text, or both; I'll just assume both.</p>\n\n<p>Also, I'm not sure why you need to concatenate the lines before they reach your email template.</p>\n\n<p>Typically in your mailer you can just use instance variables and access them in your templates which automatically composes the body.</p>\n\n<p>Mailer:</p>\n\n<pre><code>@line1 = \"first line\"\n@line2 = \"second line\"\nmail(to: ['myaddress@gmail.com'], subject: subject).deliver\n</code></pre>\n\n<p>Mailer HTML ERB Template:</p>\n\n<pre><code>&lt;%= @line1 %&gt;\n&lt;br/&gt;\n&lt;%= @line2 %&gt;\n</code></pre>\n\n<p><strong>HTML Emails</strong></p>\n\n<p>To get new lines in HTML emails you need each line wrapped in a paragraph tag (&lt;p&gt;, &lt;/p&gt;) or by using line break(&lt;br/&gt;) tags between lines.</p>\n\n<p>Rails has a safe and convenient function (<a href=\"http://apidock.com/rails/ActionView/Helpers/TextHelper/simple_format\" rel=\"nofollow noreferrer\">simple_format</a>) to do this for you.</p>\n\n<p>HTML ERB Template:</p>\n\n<pre><code>&lt;%= simple_format(@some_multiline_text) %&gt;\n</code></pre>\n\n<p><strong>Text Emails</strong></p>\n\n<p>According to <a href=\"http://www.faqs.org/rfcs/rfc2822.html\" rel=\"nofollow noreferrer\">RFC 2282</a> line breaks in text emails are delimited by CRLF (Ruby's default is LF - \"\\n\").  You can simply find and replace LF with CRLF using gsub.</p>\n\n<p>Text ERB Template:</p>\n\n<pre><code>&lt;%= @some_multiline_text.gsub('\\n', '\\r\\n')\n&lt;%= \"\\r\\n\" %&gt;\nAbove is a line break.\n</code></pre>\n\n<p><strong>Sanitize brefore html_safe</strong></p>\n\n<p>To quote an <a href=\"https://www.sitepoint.com/common-rails-security-pitfalls-and-their-solutions/\" rel=\"nofollow noreferrer\">excellent article</a> on avoiding common rails security pitfalls: </p>\n\n<blockquote>\n  <p>Therefore, if you display user-generated content on a page, never\n  apply the html_safe method directly to it. First, use the sanitize\n  method and specify the list of permitted tags: usually the ones used\n  for formatting, like b or i:</p>\n</blockquote>\n\n<p>Based on your example.</p>\n\n<pre><code>subject = \"test\"\nline1 = \"first line\"\nline2 = \"second line\"\nbody = sanitize(line1 + \"\\n\" + line2, tags: %w(b strong em i)).html_safe\nmail(to: ['myaddress@gmail.com'], subject: subject, body: body).deliver\n</code></pre>\n\n\n"}], "owner": {"reputation": 347, "user_id": 4808432, "user_type": "registered", "accept_rate": 53, "profile_image": "https://www.gravatar.com/avatar/eaedc4c7b54dcaf025894792bd0a4f0b?s=128&d=identicon&r=PG&f=1", "display_name": "xin buxu1", "link": "https://stackoverflow.com/users/4808432/xin-buxu1"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1505, "favorite_count": 0, "accepted_answer_id": 30224885, "answer_count": 3, "score": 2, "last_activity_date": 1484250215, "creation_date": 1431541962, "question_id": 30222686, "link": "https://stackoverflow.com/questions/30222686/ruby-on-rails-sending-email-with-multi-line-body", "title": "ruby on rails sending email with multi-line body", "body": "<p>I'm sending email using Ruby on Rails </p>\n\n<pre><code>subject = \"test\"\nline1 = \"first line\"\nline2 = \"second line\"\nbody = line1 + \"\\n\" + line2\nmail(to: ['myaddress@gmail.com'], subject: subject, body: body).deliver\n</code></pre>\n\n<p>I want the email body be presented in multi-lines so I used \"\\n\". But I got only one line combining line1 and line2. Anyone know how to solve that?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rakefile"], "answers": [{"comments": [{"owner": {"reputation": 135, "user_id": 3288856, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/caf15ebff1e8f80ac9eda4f3b9c86fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lilspree", "link": "https://stackoverflow.com/users/3288856/lilspree"}, "edited": false, "score": 0, "creation_date": 1431544861, "post_id": 30222767, "comment_id": 48550896, "body": "Tried this first. The new error is  <code>Don&#39;t know how to load &#39;environment&#39;</code>"}, {"owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "reply_to_user": {"reputation": 135, "user_id": 3288856, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/caf15ebff1e8f80ac9eda4f3b9c86fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lilspree", "link": "https://stackoverflow.com/users/3288856/lilspree"}, "edited": false, "score": 0, "creation_date": 1431547836, "post_id": 30222767, "comment_id": 48552492, "body": "@Lilspree If environment is not available. Remove <code>environment</code> in task file for force task &gt;&gt;&gt;&gt;&gt;   task :fetch_games do"}, {"owner": {"reputation": 135, "user_id": 3288856, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/caf15ebff1e8f80ac9eda4f3b9c86fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lilspree", "link": "https://stackoverflow.com/users/3288856/lilspree"}, "edited": false, "score": 0, "creation_date": 1431561954, "post_id": 30222767, "comment_id": 48558094, "body": "I did this and I even tried loading the environment even though it should already be loaded. I don&#39;t get any errors when I run the above answer. I believe its running but just not displaying. Could it be because I am trying to display it from a <code>.html.erb</code> file?"}, {"owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "reply_to_user": {"reputation": 135, "user_id": 3288856, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/caf15ebff1e8f80ac9eda4f3b9c86fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lilspree", "link": "https://stackoverflow.com/users/3288856/lilspree"}, "edited": false, "score": 0, "creation_date": 1431580224, "post_id": 30222767, "comment_id": 48562643, "body": "Do <code>&lt;%= Article.run_rake(&quot;fetch_games&quot;) %&gt;</code> instead of <code>&lt;% Article.run_rake(&quot;fetch_games&quot;) %&gt;</code> for display in view file."}], "tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": false, "score": 2, "last_activity_date": 1431542579, "last_edit_date": 1431542579, "creation_date": 1431542221, "answer_id": 30222767, "question_id": 30222466, "link": "https://stackoverflow.com/questions/30222466/rails-dont-know-how-to-build-task/30222767#30222767", "title": "Rails don&#39;t know how to build task", "body": "<p>We need to load_tasks before you run that. You comment out that line -</p>\n\n<pre><code> load './lib/tasks/article_task.rake'\n</code></pre>\n\n<p>Do this -</p>\n\n<pre><code>  require 'rake'\n  require 'rubygems'\n  load './lib/tasks/article_task.rake'\n\n  class Article &lt; ActiveRecord::Base\n\n    def self.run_rake(fetch_games)\n      Rake::Task[\"fetch_games\"].invoke\n    end\n  end\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 135, "user_id": 3288856, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/caf15ebff1e8f80ac9eda4f3b9c86fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lilspree", "link": "https://stackoverflow.com/users/3288856/lilspree"}, "edited": false, "score": 1, "creation_date": 1431562212, "post_id": 30223458, "comment_id": 48558167, "body": "That loads every task, I just want to load a specific one with <code>load &#39;.&#47;lib&#47;tasks&#47;article_task.rake&#39;</code>"}], "tags": [], "owner": {"reputation": 1288, "user_id": 2344804, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JnZ76.jpg?s=128&g=1", "display_name": "d34n5", "link": "https://stackoverflow.com/users/2344804/d34n5"}, "is_accepted": false, "score": 0, "last_activity_date": 1431544564, "last_edit_date": 1495535215, "creation_date": 1431544564, "answer_id": 30223458, "question_id": 30222466, "link": "https://stackoverflow.com/questions/30222466/rails-dont-know-how-to-build-task/30223458#30223458", "title": "Rails don&#39;t know how to build task", "body": "<p>I think this thread can help: <a href=\"https://stackoverflow.com/questions/1170148/run-rake-task-in-controller\">Run rake task in controller</a></p>\n\n<p>Apparently, you have to call something like that before you call your task:</p>\n\n<pre><code>NameOfYourApp::Application.load_tasks\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 45754, "user_id": 17410, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1022b779bdc1ddef7cd9d29abd70ed15?s=128&d=identicon&r=PG", "display_name": "zetetic", "link": "https://stackoverflow.com/users/17410/zetetic"}, "is_accepted": false, "score": 1, "last_activity_date": 1431567352, "creation_date": 1431567352, "answer_id": 30227897, "question_id": 30222466, "link": "https://stackoverflow.com/questions/30222466/rails-dont-know-how-to-build-task/30227897#30227897", "title": "Rails don&#39;t know how to build task", "body": "<p>Rather than go through the contortions needed to load up an invoke a Rake task, you could move the code into a separate unit and load it in the model (and the Rake task, if you need it).</p>\n\n<pre><code>module GameFetcher\n  def fetch\n    ...\n  end\nend\n\nclass Article &lt; ActiveRecord::Base\n  extend GameFetcher\n  ...\nend\n\nArticle.fetch\n</code></pre>\n\n<p>This also makes it easier to write a unit test for the <code>fetch</code> logic.</p>\n"}, {"tags": [], "owner": {"reputation": 135, "user_id": 3288856, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/caf15ebff1e8f80ac9eda4f3b9c86fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lilspree", "link": "https://stackoverflow.com/users/3288856/lilspree"}, "is_accepted": true, "score": 1, "last_activity_date": 1431571997, "creation_date": 1431571997, "answer_id": 30228483, "question_id": 30222466, "link": "https://stackoverflow.com/questions/30222466/rails-dont-know-how-to-build-task/30228483#30228483", "title": "Rails don&#39;t know how to build task", "body": "<p>I went in another direction from the rake file. I defined it in articles controller and called it in <code>index.html.erb</code>. It now displays in the rails server.</p>\n\n<p>articles_controller.rb</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\n\ndef index\n    url = \"http://espn.go.com/nba/schedule\"\n    data = Nokogiri::HTML(open(url))\n    @games = data.css('.responsive-table-wrap')\nend\n</code></pre>\n\n<p>index.html.erb</p>\n\n<pre><code>&lt;% @games.each do |game| %&gt;\n        &lt;% if !game.at_css(\"caption\").nil? %&gt;\n          &lt;%= game.at_css(\"caption\").text %&gt;\n        &lt;% else %&gt;\n          &lt;%= 'No Games Sheduled' %&gt;\n          &lt;% end %&gt;\n        &lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 135, "user_id": 3288856, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/caf15ebff1e8f80ac9eda4f3b9c86fcb?s=128&d=identicon&r=PG&f=1", "display_name": "Lilspree", "link": "https://stackoverflow.com/users/3288856/lilspree"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3115, "favorite_count": 0, "accepted_answer_id": 30228483, "answer_count": 4, "score": 1, "last_activity_date": 1431571997, "creation_date": 1431541187, "last_edit_date": 1431562024, "question_id": 30222466, "link": "https://stackoverflow.com/questions/30222466/rails-dont-know-how-to-build-task", "title": "Rails don&#39;t know how to build task", "body": "<p>I am attempting to scrape data from a website. I am running rake from index.html.erb</p>\n\n<pre><code> &lt;% Article.run_rake(\"fetch_games\") %&gt;\n</code></pre>\n\n<p>I have it defined in a .rb file. Here is article.rb</p>\n\n<pre><code>require 'rake'\nrequire 'rubygems'\n#load './lib/tasks/article_task.rake'\n\nclass Article &lt; ActiveRecord::Base\n\n def self.run_rake(fetch_games)\n  Rails.root + \"lib/tasks/article_task.rake\"\n  Rake::Task[\"fetch_games\"].invoke\n end\nend\n</code></pre>\n\n<p>And here is the rakefile itself: article_task.rake</p>\n\n<pre><code>desc \"Fetch Games\"\ntask :fetch_games =&gt; :environment do \n\n require 'nokogiri'\n require 'open-uri'\n\n url = \"http://espn.go.com/nba/schedule\"\n data = Nokogiri::HTML(open(url))\n games = data.css('.responsive-table-wrap')\n\n games.each do |game|\n\n #check for a listing\n if !game.at_css(\"caption\").nil?\n    #Date\n    puts game.at_css(\"caption\").text\n else\n    puts \"No Listing\"   \n end\n\n #check for the team name\n if !game.at_css(\".team-name\").nil?\n    #Team name\n    puts game.at_css(\".team-name\").text\n else\n    puts \"No Games Scheduled\"\n end\n    #empty\n    puts \"\"\n end\nend\n</code></pre>\n\n<p>When I run this from the terminal it pulls what I need. But when I try to run it through rails server it gives me this error:</p>\n\n<p><img src=\"https://i.stack.imgur.com/Klvcl.png\" alt=\"Runtime Error\"></p>\n\n<p>What am I doing wrong? New to ruby/rails btw</p>\n"}, {"tags": ["ruby", "watir", "dijit.form"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1431544790, "post_id": 30222070, "comment_id": 48550853, "body": "<code>select_list</code> won&#39;t work because there&#39;s no <code>&lt;select&gt;</code> tag in the above code snippet.  Can you use the <code>id</code> attribute for the respective row as a locator?  For example: <code>b.tr(id: &quot;dijit_MenuItem_16&quot;).click</code> (or even <code>b.tr(title: &quot;Delete this wiki.&quot;).click</code>"}, {"owner": {"reputation": 1, "user_id": 4896927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e98377fca25b210f7732be61c5d44d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jing", "link": "https://stackoverflow.com/users/4896927/jing"}, "reply_to_user": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1431702011, "post_id": 30222070, "comment_id": 48625277, "body": "Thanks for the reply, Andrey. I fixed it. The id was changing..."}], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4896927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e98377fca25b210f7732be61c5d44d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jing", "link": "https://stackoverflow.com/users/4896927/jing"}, "edited": false, "score": 0, "creation_date": 1431701955, "post_id": 30224299, "comment_id": 48625251, "body": "Thanks for the suggestion. Actually I found the bug. The id was changing depends on the browser and I am able to use indexing to locate the element."}], "tags": [], "owner": {"reputation": 3480, "user_id": 4072371, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/112e615d8c60908294e30848d9556186?s=128&d=identicon&r=PG", "display_name": "titusfortner", "link": "https://stackoverflow.com/users/4072371/titusfortner"}, "is_accepted": false, "score": 0, "last_activity_date": 1431547770, "creation_date": 1431547770, "answer_id": 30224299, "question_id": 30222070, "link": "https://stackoverflow.com/questions/30222070/ruby-watir-dijit-unable-to-locate-table-tr-td-and-select-value-from-table/30224299#30224299", "title": "Ruby Watir,Dijit, unable to locate table/tr/td and select value from table", "body": "<p>Watir will only return the text of an element if the text is currently visible, regardless of whether the element exists. If you made the same call in your first example with .present? instead of .exists? it would return false.</p>\n\n<p>For non-select/option dropdown interactions, you usually need to click the dropdown element first, and then once the options are visible, click on the one you want.</p>\n"}], "owner": {"reputation": 1, "user_id": 4896927, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7e98377fca25b210f7732be61c5d44d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jing", "link": "https://stackoverflow.com/users/4896927/jing"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 393, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1433442255, "creation_date": 1431539723, "last_edit_date": 1431540493, "question_id": 30222070, "link": "https://stackoverflow.com/questions/30222070/ruby-watir-dijit-unable-to-locate-table-tr-td-and-select-value-from-table", "title": "Ruby Watir,Dijit, unable to locate table/tr/td and select value from table", "body": "<p>I am trying to select a value from the table of dropdown menu. But Watir always gave me the unlocate error when using table/tr/td.</p>\n\n<p>I can't locate the element using</p>\n\n<pre><code>@browser.div(:id, 'wikiActionMenuLink_dropdown').element(:tag_name, 'table').element(:tag_name, 'tbody').element(:tag_name =&gt; 'td').text\n</code></pre>\n\n<p>But the output of code below returns true.</p>\n\n<pre><code>@browser.div(:id, 'wikiActionMenuLink_dropdown').element(:tag_name, 'table').element(:tag_name, 'tbody').element(:tag_name =&gt; 'td').exists?\n</code></pre>\n\n<p>I also tried</p>\n\n<pre><code>@browser.select_list(:id, 'wikiActionMenuLink_dropdown').select_value('Delete Wiki')\n</code></pre>\n\n<p>but got error \"unable to locate element, using <code>{:id=&gt;\"wikiActionMenuLink_dropdown\", :tag_name=&gt;\"select\"}\"</code></p>\n\n<p>Below the html. Could someone give me some suggestions?</p>\n\n<pre><code>&lt;div id=\"wikiActionMenuLink_dropdown\" class=\"dijitPopup dijitMenuPopup\" style=\"visibility: visible; top: 123.75px; left: 1592px; right: auto; z-index: 1000; height: auto; overflow: visible; display: none;\" role=\"region\" aria-label=\"dijit_Menu_2\" dijitpopupparent=\"\"&gt;\n&lt;table id=\"dijit_Menu_2\" class=\"dijit dijitReset dijitMenuTab`enter code here`le lotusPlain dijitMenu dijitMenuPassive\" cellspacing=\"0\" tabindex=\"0\" role=\"menu\" widgetid=\"dijit_Menu_2\" style=\"top: 0px; visibility: visible;\"&gt;\n&lt;tbody class=\"dijitReset\" data-dojo-attach-point=\"containerNode\"&gt;\n&lt;tr id=\"dijit_MenuItem_15\" class=\"dijitReset dijitMenuItem\" tabindex=\"-1\" role=\"menuitem\" data-dojo-attach-point=\"focusNode\" style=\"-moz-user-select: none;\" aria-label=\"Edit Wiki \" title=\"Edit settings of this wiki.\" widgetid=\"dijit_MenuItem_15\"&gt;\n&lt;tr id=\"dijit_MenuItem_16\" class=\"dijitReset dijitMenuItem\" tabindex=\"-1\" role=\"menuitem\" data-dojo-attach-point=\"focusNode\" style=\"-moz-user-select: none;\" aria-label=\"Delete Wiki \" title=\"Delete this wiki.\" widgetid=\"dijit_MenuItem_16\"&gt;\n&lt;/tbody&gt;\n&lt;/table&gt;\n&lt;iframe class=\"dijitBackgroundIframe\" src=\"javascript:\"\"\" role=\"presentation\" style=\"opacity: 0.1; width: 100%; height: 100%;\" tabindex=\"-1\"&gt;\n&lt;html&gt;\n&lt;head&gt;&lt;/head&gt;\n&lt;body&gt;&lt;/body&gt;\n&lt;/html&gt;\n&lt;/iframe&gt;\n&lt;/div&gt;\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1431539953, "post_id": 30222054, "comment_id": 48548038, "body": "<a href=\"http://stackoverflow.com/a/24832287/438992\">stackoverflow.com/a/24832287/438992</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3533, "user_id": 1955990, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/5112f123adc37e54a218f4571b784f32?s=128&d=identicon&r=PG", "display_name": "aceofbassgreg", "link": "https://stackoverflow.com/users/1955990/aceofbassgreg"}, "edited": false, "score": 0, "creation_date": 1431541050, "post_id": 30222103, "comment_id": 48548629, "body": "Note that you must call <code>:demodulize</code> on the string, not the class. For instance:  <code>A::B::C.name.demodulize</code> (return string via <code>:name</code>, then call <code>:demodulize</code>)"}], "tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": false, "score": 1, "last_activity_date": 1431539830, "creation_date": 1431539830, "answer_id": 30222103, "question_id": 30222054, "link": "https://stackoverflow.com/questions/30222054/get-class-name-from-a-class-nested-in-a-module-in-ruby/30222103#30222103", "title": "Get class name from a class nested in a module in ruby", "body": "<p>If you have ActiveSupport included, try <code>demodulize</code> method</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveSupport/Inflector.html</a></p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431540392, "post_id": 30222114, "comment_id": 48548263, "body": "It&#39;s better to split on &quot;::&quot;. End result is the same, but reveals intention better."}, {"owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431540439, "post_id": 30222114, "comment_id": 48548287, "body": "why, if the single colon doesn&#39;t appear anywhere else in the name?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431540724, "post_id": 30222114, "comment_id": 48548452, "body": "Result of splitting on &quot;::&quot; can be used for a couple of other tasks. Result of splitting on &quot;:&quot; is useless (except for this case) because of the empty strings in it."}, {"owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431540825, "post_id": 30222114, "comment_id": 48548508, "body": "yes, but I&#39;m not initializing this array or using it for anything else."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431541055, "post_id": 30222114, "comment_id": 48548632, "body": "Anyhow, the separator here is &quot;::&quot;, not &quot;:&quot;. Benefit of not using full separator is unclear to me."}], "tags": [], "owner": {"reputation": 5151, "user_id": 2535242, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/a10b5101fc63f6d6d62de5784b75142e?s=128&d=identicon&r=PG", "display_name": "La-comadreja", "link": "https://stackoverflow.com/users/2535242/la-comadreja"}, "is_accepted": false, "score": 0, "last_activity_date": 1431539884, "creation_date": 1431539884, "answer_id": 30222114, "question_id": 30222054, "link": "https://stackoverflow.com/questions/30222054/get-class-name-from-a-class-nested-in-a-module-in-ruby/30222114#30222114", "title": "Get class name from a class nested in a module in ruby", "body": "<p>It's quite simple.</p>\n\n<pre><code>AisisWriter::Controllers::CommentsManagement::CommentsHandler.name.split(':').last\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5933, "user_id": 3501228, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/6ocDo.jpg?s=128&g=1", "display_name": "Noman Ur Rehman", "link": "https://stackoverflow.com/users/3501228/noman-ur-rehman"}, "is_accepted": true, "score": 5, "last_activity_date": 1431539977, "creation_date": 1431539977, "answer_id": 30222145, "question_id": 30222054, "link": "https://stackoverflow.com/questions/30222054/get-class-name-from-a-class-nested-in-a-module-in-ruby/30222145#30222145", "title": "Get class name from a class nested in a module in ruby", "body": "<p>You can do:</p>\n\n<pre><code>AisisWriter::Controllers::CommentsManagement::CommentsHandler.name.split('::').last || ''\n</code></pre>\n"}], "owner": {"reputation": 9945, "user_id": 1270259, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/f8493a9385dae9f438379050d76ac2bf?s=128&d=identicon&r=PG", "display_name": "TheWebs", "link": "https://stackoverflow.com/users/1270259/thewebs"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 971, "favorite_count": 0, "accepted_answer_id": 30222145, "answer_count": 3, "score": 1, "last_activity_date": 1431539977, "creation_date": 1431539679, "question_id": 30222054, "link": "https://stackoverflow.com/questions/30222054/get-class-name-from-a-class-nested-in-a-module-in-ruby", "title": "Get class name from a class nested in a module in ruby", "body": "<p>If I give you:</p>\n\n<pre><code>module Something\n  module SomethingElse\n    class Foo\n    end\n  end\nend\n</code></pre>\n\n<p>How do you get the class name of \"Foo\"? In the console, I have something similar to the example, but when I do <code>.name</code> on it it doesn't print out what I expect.</p>\n\n<p>This is whats in my console:</p>\n\n<pre><code>pry(main)&gt; AisisWriter::Controllers::CommentsManagement::CommentsHandler.name\n=&gt; \"AisisWriter::Controllers::CommentsManagement::CommentsHandler\"\n</code></pre>\n\n<p>What I expect is just \"CommentsHandler\"</p>\n"}, {"tags": ["ruby", "debugging", "rspec", "factory-bot"], "answers": [{"tags": [], "owner": {"reputation": 339, "user_id": 1029167, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a448a265edd19a83090bc00da0ccf0e8?s=128&d=identicon&r=PG", "display_name": "user1029167", "link": "https://stackoverflow.com/users/1029167/user1029167"}, "is_accepted": true, "score": 1, "last_activity_date": 1431544306, "creation_date": 1431544306, "answer_id": 30223388, "question_id": 30221925, "link": "https://stackoverflow.com/questions/30221925/baffling-error-where-factorygirl-object-has-incorrect-data-but-only-locally/30223388#30223388", "title": "Baffling error where FactoryGirl object has incorrect data, but only locally", "body": "<p>Finally figured out the error.</p>\n\n<p>So, the primary key of that table was not unique.</p>\n\n<p>After FG does the insert, it does <code>sel top 1 * from table</code> with the primary key that you specify.</p>\n\n<p>Since that key was not unique, there were other rows in the table with that value.</p>\n\n<p>One of those rows was returned, and it just happened to have a 2 in that column.</p>\n"}], "owner": {"reputation": 339, "user_id": 1029167, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a448a265edd19a83090bc00da0ccf0e8?s=128&d=identicon&r=PG", "display_name": "user1029167", "link": "https://stackoverflow.com/users/1029167/user1029167"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "accepted_answer_id": 30223388, "answer_count": 1, "score": 0, "last_activity_date": 1431544306, "creation_date": 1431539239, "question_id": 30221925, "link": "https://stackoverflow.com/questions/30221925/baffling-error-where-factorygirl-object-has-incorrect-data-but-only-locally", "title": "Baffling error where FactoryGirl object has incorrect data, but only locally", "body": "<p>This is baffling me and everyone else at the office.</p>\n\n<p>I have a factory girl insert like this:</p>\n\n<pre><code>@data = FactoryGirl.create(:'database/table',\n                                             :packagemember_tp =&gt; 3\n)\nputs 'kanga'\nputs @data.packagemember_tp\nputs 'kanga'\n</code></pre>\n\n<p>Looks fine, but the log that prints out is this:</p>\n\n<pre><code>kanga\n2\nkanga\n</code></pre>\n\n<p>No matter what value I tell it to insert, the value is always 2.</p>\n\n<p>You might think that if I opened the Factory there would be some weird default value or something, but this isn't the case:</p>\n\n<pre><code>FactoryGirl.define do\n  factory :'database/table' do\n  end\nend\n</code></pre>\n\n<p>Then you might think, maybe the table DDL is a weird data type, but this isn't the case:</p>\n\n<pre><code>PackageMember_Tp SMALLINT NOT NULL DEFAULT 0 ,\n</code></pre>\n\n<p>Then you think, let's put a breakpoint in there and examine the object and see what the real value is:</p>\n\n<pre><code>@values = Hash (17 element(s))\n...\npackagemember_tp =&gt; 2\n</code></pre>\n\n<p>Then finally you think, well let's check the log again for the actual SQL insert statement and see the number that's being inserted?</p>\n\n<pre><code>INSERT INTO database.table (PACKAGEMEMBER_TP) VALUES (3)\n</code></pre>\n\n<p>So what is going on?  </p>\n\n<p>Why are all values for this column being translated to 2's, but only in the local FactoryGirl object?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 9515, "user_id": 763096, "user_type": "registered", "accept_rate": 94, "profile_image": "https://www.gravatar.com/avatar/594c3414ee8cd0edcac36518228fe31b?s=128&d=identicon&r=PG", "display_name": "MrTheWalrus", "link": "https://stackoverflow.com/users/763096/mrthewalrus"}, "edited": false, "score": 0, "creation_date": 1431539192, "post_id": 30221883, "comment_id": 48547567, "body": "Why not just use <code>unless</code> instead of  <code>if</code>?"}], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1431540081, "post_id": 30221962, "comment_id": 48548115, "body": "@Ryan Asensio do you have <code>current_page</code> helper defined?"}, {"owner": {"reputation": 83, "user_id": 4882608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KjW8l.jpg?s=128&g=1", "display_name": "Ryan Asensio", "link": "https://stackoverflow.com/users/4882608/ryan-asensio"}, "edited": false, "score": 0, "creation_date": 1431540097, "post_id": 30221962, "comment_id": 48548123, "body": "I replaced it with ` &lt;% unless current_page?(root_path) %&gt;`  and it seems to work fine now. Those definitions are built it, but i guess calling it that way didn&#39;t let it recognize it.  Thanks Andrey"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 2, "last_activity_date": 1431540242, "last_edit_date": 1431540242, "creation_date": 1431539370, "answer_id": 30221962, "question_id": 30221883, "link": "https://stackoverflow.com/questions/30221883/rails-if-page-is-not-equal-to-current-page/30221962#30221962", "title": "Rails: If page is NOT equal to current_page", "body": "<blockquote>\n  <p>What is the style for adding the NOT EQUAL TO operator?</p>\n</blockquote>\n\n<p>not equal in Ruby is <code>!=</code>.</p>\n\n<p>If I get you right, you're looking for something like this:</p>\n\n<pre><code>&lt;% unless current_page?(root_path) %&gt;\n  &lt;%= # do_something %&gt;\n&lt;% end %&gt;\n</code></pre>\n"}], "owner": {"reputation": 83, "user_id": 4882608, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/KjW8l.jpg?s=128&g=1", "display_name": "Ryan Asensio", "link": "https://stackoverflow.com/users/4882608/ryan-asensio"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1106, "favorite_count": 0, "accepted_answer_id": 30221962, "answer_count": 1, "score": 0, "last_activity_date": 1431707200, "creation_date": 1431539104, "last_edit_date": 1431707200, "question_id": 30221883, "link": "https://stackoverflow.com/questions/30221883/rails-if-page-is-not-equal-to-current-page", "title": "Rails: If page is NOT equal to current_page", "body": "<p>I'm trying to set a header to show links if the current_page is not equal to <code>root_path</code>.</p>\n\n<p>I currently have the opposite, <code>&lt;% if current_page?(root_path) %&gt;</code>\nwhich works fine. What is the style for adding the NOT EQUAL TO operator?</p>\n\n<p>I have tried using <code>!=</code> ... but to no avail.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "comments": [{"owner": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "edited": false, "score": 1, "creation_date": 1431539388, "post_id": 30221810, "comment_id": 48547688, "body": "What determines the boolean value?"}, {"owner": {"reputation": 377, "user_id": 4889203, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/570411a6f466da4236eb2f2d97ff3e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/4889203/noah"}, "reply_to_user": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "edited": false, "score": 0, "creation_date": 1431540970, "post_id": 30221810, "comment_id": 48548583, "body": "I want to pass through true if it&#39;s called via the callback, and not pass through anything if called elsewhere.  I tried using Ruby&#39;s <code>caller</code> but it returns the same thing."}], "answers": [{"tags": [], "owner": {"reputation": 250, "user_id": 700915, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/037c6040bc765247d20e72d5764e5725?s=128&d=identicon&r=PG", "display_name": "mohanaki", "link": "https://stackoverflow.com/users/700915/mohanaki"}, "is_accepted": false, "score": -5, "last_activity_date": 1431539524, "last_edit_date": 1431539524, "creation_date": 1431539181, "answer_id": 30221909, "question_id": 30221810, "link": "https://stackoverflow.com/questions/30221810/rails-pass-params-arguments-to-activerecord-callback-function/30221909#30221909", "title": "Rails pass params/arguments to ActiveRecord callback function", "body": "<p>Short answer is No.You cannot pass any arguments.\nYou could use attr_accessor to create a virtual attribute and set that attribute.</p>\n"}, {"comments": [{"owner": {"reputation": 12011, "user_id": 600953, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/ee3d3a87e3451113e4d56067a22d4c41?s=128&d=identicon&r=PG", "display_name": "Dty", "link": "https://stackoverflow.com/users/600953/dty"}, "edited": false, "score": 2, "creation_date": 1486776255, "post_id": 30222518, "comment_id": 71507050, "body": "This answers the actual question which is what I was searching on google."}], "tags": [], "owner": {"reputation": 10364, "user_id": 877472, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/e73a159e3f7790ee019673c37da48a59?s=128&d=identicon&r=PG", "display_name": "Paul Richter", "link": "https://stackoverflow.com/users/877472/paul-richter"}, "is_accepted": false, "score": 6, "last_activity_date": 1431541367, "creation_date": 1431541367, "answer_id": 30222518, "question_id": 30221810, "link": "https://stackoverflow.com/questions/30221810/rails-pass-params-arguments-to-activerecord-callback-function/30222518#30222518", "title": "Rails pass params/arguments to ActiveRecord callback function", "body": "<p>Based on your clarification, you can achieve what you're looking for by using optional method parameters, like so:</p>\n\n<pre><code>def cache_bust(callback = true)\n    ... method body\nend\n</code></pre>\n\n<p>In the scenario where the method is called from the <code>after_update</code> callback, the parameter is not passed, but defaults to true. Otherwise, if the method is called from anywhere else \"manually\", you have the option of passing whatever value you wish to that method.</p>\n"}, {"comments": [{"owner": {"reputation": 377, "user_id": 4889203, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/570411a6f466da4236eb2f2d97ff3e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/4889203/noah"}, "edited": false, "score": 1, "creation_date": 1431546483, "post_id": 30222665, "comment_id": 48551768, "body": "Worked, switched my answer acceptance as this solves the problem and the other answer is an alternative."}], "tags": [], "owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "is_accepted": true, "score": 45, "last_activity_date": 1431541897, "creation_date": 1431541897, "answer_id": 30222665, "question_id": 30221810, "link": "https://stackoverflow.com/questions/30221810/rails-pass-params-arguments-to-activerecord-callback-function/30222665#30222665", "title": "Rails pass params/arguments to ActiveRecord callback function", "body": "<blockquote>\n  <p>There are four types of callbacks accepted by the callback macros: Method references (symbol), callback objects, inline methods (using a proc), and inline eval methods (using a string).</p>\n</blockquote>\n\n<p>Try this?</p>\n\n<pre><code>after_update -&gt; { cache_bust(true) }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 2770, "user_id": 1341825, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/83689df8baed7dbaebb1587fbbffb95a?s=128&d=identicon&r=PG", "display_name": "theUtherSide", "link": "https://stackoverflow.com/users/1341825/theutherside"}, "edited": false, "score": 0, "creation_date": 1507227019, "post_id": 45726632, "comment_id": 80137457, "body": "This did not work for me in Rails 5 when calling <code>create</code> outside of the controller."}], "tags": [], "owner": {"reputation": 1, "user_id": 3384264, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/nYmQ7.jpg?s=128&g=1", "display_name": "Ken", "link": "https://stackoverflow.com/users/3384264/ken"}, "is_accepted": false, "score": -2, "last_activity_date": 1502949268, "last_edit_date": 1502949268, "creation_date": 1502944393, "answer_id": 45726632, "question_id": 30221810, "link": "https://stackoverflow.com/questions/30221810/rails-pass-params-arguments-to-activerecord-callback-function/45726632#45726632", "title": "Rails pass params/arguments to ActiveRecord callback function", "body": "<p>Very easy to pass params from controller to callback, you can call name of params in model. Example:</p>\n\n<p>In controller: </p>\n\n<pre><code>Quiz.create(name: 'abc')\n</code></pre>\n\n<p>In model:</p>\n\n<pre><code>before_create :valid_name?\n\ndef valid_name?\n  puts name\nend\n</code></pre>\n"}], "owner": {"reputation": 377, "user_id": 4889203, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/570411a6f466da4236eb2f2d97ff3e3a?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/4889203/noah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 13164, "favorite_count": 5, "accepted_answer_id": 30222665, "answer_count": 4, "score": 22, "last_activity_date": 1502949268, "creation_date": 1431538874, "question_id": 30221810, "link": "https://stackoverflow.com/questions/30221810/rails-pass-params-arguments-to-activerecord-callback-function", "title": "Rails pass params/arguments to ActiveRecord callback function", "body": "<p>I have the snippet below in one of my AR models:</p>\n\n<pre><code>after_update :cache_bust\n</code></pre>\n\n<p>The <code>cache_bust</code> method in the model accepts a parameter (boolean) that sets the value of itself to <code>false</code> by default.</p>\n\n<p>How can I pass <code>true</code> to this method in the model from my ActiveRecord callback defined above it?</p>\n\n<p>Ex: <code>after_update :cache_bust(true)</code> does not work because it's a symbol, how can I pass <code>true</code> to the method's param?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "cookies"], "comments": [{"owner": {"reputation": 3299, "user_id": 1749638, "user_type": "registered", "accept_rate": 57, "profile_image": "https://i.stack.imgur.com/cERvr.jpg?s=128&g=1", "display_name": "coderhs", "link": "https://stackoverflow.com/users/1749638/coderhs"}, "edited": false, "score": 0, "creation_date": 1431538220, "post_id": 30221519, "comment_id": 48546959, "body": "Are you using any particular gem for authentication?"}, {"owner": {"reputation": 25, "user_id": 4896840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad2e05afe692b9648abbbdf6f5706977?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/4896840/dali"}, "edited": false, "score": 0, "creation_date": 1431538764, "post_id": 30221519, "comment_id": 48547328, "body": "No I am not using a gem.. I followed Michael Hartl&#39;s tutorial for authentication"}, {"owner": {"reputation": 152277, "user_id": 438992, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/QouOz.jpg?s=128&g=1", "display_name": "Dave Newton", "link": "https://stackoverflow.com/users/438992/dave-newton"}, "edited": false, "score": 0, "creation_date": 1431539153, "post_id": 30221519, "comment_id": 48547546, "body": "Different browsers have different cookies--they&#39;re different applications."}], "answers": [{"tags": [], "owner": {"reputation": 845, "user_id": 4592959, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/r03zx.png?s=128&g=1", "display_name": "Helsing", "link": "https://stackoverflow.com/users/4592959/helsing"}, "is_accepted": true, "score": 1, "last_activity_date": 1431540885, "last_edit_date": 1431540885, "creation_date": 1431539164, "answer_id": 30221905, "question_id": 30221519, "link": "https://stackoverflow.com/questions/30221519/cookies-in-ruby-on-rails-login-in-different-browsers/30221905#30221905", "title": "Cookies in ruby on rails - Login in different browsers", "body": "<p>That's kind of problematic. Here's why:</p>\n\n<ol>\n<li>Cookies are browser dependent, as you're already aware.</li>\n<li>Being able to recreate digests(by creating methods that do what you want) is insecure. It defeats the whole purpose of using remember digests.</li>\n</ol>\n\n<p>I can't say I recommend the following but:</p>\n\n<p>One simple way of doing it is having multiple remember digests in database. Imagine having remember_digest0 and remember_digest1. In this case, you could support 2 browsers at a time(before overriding). You can add as many as you want. </p>\n\n<p>-You'll need to update your authentication methods to check each digest saved in database and do stuff if any match.\n-You'll need to tweak the methods for saving digests. You'll need to check which one is null or oldest, then save your new digest into that null/oldest.</p>\n\n<p>Due to the nature of cookies and their security implications, this is probably the only safe way to do it. Even then I don't think it's worth it.</p>\n"}], "owner": {"reputation": 25, "user_id": 4896840, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad2e05afe692b9648abbbdf6f5706977?s=128&d=identicon&r=PG&f=1", "display_name": "Dali", "link": "https://stackoverflow.com/users/4896840/dali"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 216, "favorite_count": 0, "accepted_answer_id": 30221905, "answer_count": 1, "score": 1, "last_activity_date": 1431540885, "creation_date": 1431537884, "question_id": 30221519, "link": "https://stackoverflow.com/questions/30221519/cookies-in-ruby-on-rails-login-in-different-browsers", "title": "Cookies in ruby on rails - Login in different browsers", "body": "<p>I am new to web development.\nI am using rails 4.2.\nIf a user logs in from a browser (chrome for instance), its session is stored in cookie (with a remember_token variable). \nIf the same user logs in from a different browser (firefox), its remember_digest (a hash of remember_token variable using Bcrypt) in DB is overwritten and hence is invalid for the other browser.</p>\n\n<p>How can I solve this problem?\nIs it possible to keep the same remember_token and remember_digest for different browsers?\nThank you</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "chess"], "comments": [{"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1431537172, "post_id": 30221111, "comment_id": 48546394, "body": "Doing TDD on a game in Rails is a formidable task. This is not an answer to your question, but I suggest: 1. Start with a much simpler app. Such as Conway&#39;s game of life: <a href=\"http://en.wikipedia.org/wiki/Conway%27s_Game_of_Life\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Conway%27s_Game_of_Life</a>. 2. After that, choose a much simpler game, such as Tic Tac Toe. 3. I don&#39;t think it needs to be a Rails app. You can learn all about TDD and Ruby without the complexity of Rails. It can be a Ruby app that prints to the terminal. 4. Go through some tutorials on how to TDD a simple Ruby app."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1431537226, "post_id": 30221111, "comment_id": 48546420, "body": "FWIW, I think doing TDD is the best way to learn."}, {"owner": {"reputation": 122, "user_id": 3903587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d566c0db7b1dc8c13d921fb36d18545f?s=128&d=identicon&r=PG&f=1", "display_name": "j.sanghoon", "link": "https://stackoverflow.com/users/3903587/j-sanghoon"}, "reply_to_user": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1431537913, "post_id": 30221111, "comment_id": 48546784, "body": "@BSeven Thanks for the tip! Yeah, I am a beginner and this is a small group project we are working on... and, to say the least, I am very lost. I&#39;ll try to work on that before I tackle this again. thanks!"}], "owner": {"reputation": 122, "user_id": 3903587, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d566c0db7b1dc8c13d921fb36d18545f?s=128&d=identicon&r=PG&f=1", "display_name": "j.sanghoon", "link": "https://stackoverflow.com/users/3903587/j-sanghoon"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 586, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431537684, "creation_date": 1431536572, "last_edit_date": 1431537684, "question_id": 30221111, "link": "https://stackoverflow.com/questions/30221111/creating-move-logic-for-a-chess-game-cant-figure-out-how-to-prevent-pawn-from", "title": "Creating move logic for a chess game. Can&#39;t figure out how to prevent Pawn from moving back", "body": "<p>I wrote a test to prevent pawn from moving back. </p>\n\n<pre><code>test 'pawn back move is invalid' do\n  pawn = @game.pawns.first\n  pawn.moved = true\n  refute pawn.valid_move?(pawn.x_coord, (pawn.y_coord - 1))\n  pawn.moved = true\n  refute pawn.valid_move?(pawn.x_coord, (pawn.y_coord - 2))\nend\n</code></pre>\n\n<p>Here's what I have for my pawn model. </p>\n\n<pre><code>class Pawn &lt; Piece\n\n  def valid_move?(x_destination, y_destination)\n    x_dist = (x_coord - x_destination).abs\n    y_dist = (y_coord - y_destination).abs\n\n   # if self.moved\n   #    y_dist == 1 &amp;&amp; x_dist == 0\n   # else\n   #    (y_dist == 1 || y_dist == 2) &amp;&amp; x_dist == 0\n   # end\n\n   while Game.where(:color =&gt; 'white') do \n    if self.moved\n      y_dist == -1 &amp;&amp; x_dist == 0\n    else\n      (y_dist == -1 || y_dist == -2) &amp;&amp; x_dist == 0\n    end\n   end\n  end\nend\n</code></pre>\n\n<p>The reason why it's negative is because of the way board is set-up from x-coord (0..7) and y-coord(0..7)...</p>\n\n<p>So the one in hash will make the best go through and throw me a fail, but the new code I write completely throws things off. I have Game controller and Pieces controller. I am not too sure which one I should call.</p>\n\n<p>Here is the error message I get in my terminal. </p>\n\n<pre><code>  1) Error:\nPieceTest#test_pawn_back_move_is_invalid:\nNoMethodError: undefined method `where' for Pieces:Module\n    app/models/pieces/pawn.rb:14:in `valid_move?'\n    test/models/piece_test.rb:118:in `block in &lt;class:PieceTest&gt;'\n\n  2) Error:\nPieceTest#test_pawn_move_is_invalid:\nNoMethodError: undefined method `where' for Pieces:Module\n    app/models/pieces/pawn.rb:14:in `valid_move?'\n    test/models/piece_test.rb:110:in `block in &lt;class:PieceTest&gt;'\n\n  3) Error:\nPieceTest#test_pawn_move_is_valid:\nNoMethodError: undefined method `where' for Pieces:Module\n    app/models/pieces/pawn.rb:14:in `valid_move?'\n    test/models/piece_test.rb:103:in `block in &lt;class:PieceTest&gt;'\n\n  4) Error:\nPiecesControllerTest#test_should_move_piece:\nNoMethodError: undefined method `valid_move?' for nil:NilClass\n    app/controllers/pieces_controller.rb:13:in `update'\n    test/controllers/pieces_controller_test.rb:8:in `block in       &lt;class:PiecesControllerTest&gt;'\n\n  5) Error:\nPiecesControllerTest#test_should_not_move_piece:\nNoMethodError: undefined method `valid_move?' for nil:NilClass\n    app/controllers/pieces_controller.rb:13:in `update'\n    test/controllers/pieces_controller_test.rb:20:in `block in     &lt;class:PiecesControllerTest&gt;'\n\n40 tests, 70 assertions, 0 failures, 5 errors, 0 skips\nCoverage report generated for MiniTest to /vagrant/src/chess/coverage. 123 /       133     LOC (92.48%) covered.\n</code></pre>\n\n<p>I was initially calling my Pieces controller, because of the color. </p>\n\n<pre><code>class PiecesController &lt; ApplicationController\ndef create\nend\n\ndef destroy\nend\n\ndef update\n  @piece = Piece.where(:id =&gt; params[:id]).first\n  x_dest = params[:x_coord].to_i\n  y_dest = params[:y_coord].to_i\n\n  if @piece.valid_move?(x_dest, y_dest)\n    @piece.move_to(x_dest, y_dest)\n    render :json =&gt; :success\n  else\n    render :text =&gt; 'invalid', :status =&gt; :unprocessable_entity\n  end\nend\n\nprivate\n\ndef piece_params\n  params.require(:piece).permit(:color, :x_coord, :y_coord)\nend\n</code></pre>\n\n<p>end</p>\n\n<p>Here is the games controller. \n    class GamesController &lt; ApplicationController\n      before_action :authenticate_user!, :only => [:create, :update, :show]</p>\n\n<pre><code>  def index\n    @games = Game.all\n  end\n\n  def new\n    @game = Game.new\n  end\n\n  def show\n    @game = Game.where(:id =&gt; params[:id]).first\n    render :text =&gt; 'That game does not exist.', :status =&gt; :not_found if      @game.blank?\n  end\n\n  def create\n    @game = Game.create(:white_user_id =&gt; current_user.id)\n    redirect_to game_path(@game)\n  end\n\n  def update\n    @game = Game.find(params[:id])\n    if @game.white_user_id == current_user.id\n      flash[:alert] = \"You can't play against yourself!\"\n      redirect_to games_path\n    else\n      @game.update_attributes(:black_user_id =&gt; current_user.id)\n      redirect_to game_path(@game)\n    end\n  end\n\n  private\n\n  def games_params\n    params.require(:game).permit(:black_user_id, :white_user_id)\n  end\nend\n</code></pre>\n\n<p>But I switched over to game controller to test out... I am very lost and any help would be appreciated. :)</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "httparty"], "answers": [{"comments": [{"owner": {"reputation": 3582, "user_id": 926705, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e161376349956949f7943b0c540e809f?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/926705/leo"}, "edited": false, "score": 0, "creation_date": 1431535399, "post_id": 30220675, "comment_id": 48545353, "body": "Yep, this is actually copied from a subclass, so <code>base_uri</code> is set. I\u2019ll correct it. Thanks!"}, {"owner": {"reputation": 3582, "user_id": 926705, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e161376349956949f7943b0c540e809f?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/926705/leo"}, "edited": false, "score": 0, "creation_date": 1431535484, "post_id": 30220675, "comment_id": 48545402, "body": "Ah, I get it! I tried <code>res.last_uri</code> but got an error. I see now that including <code>.response</code> gets to the right object."}, {"owner": {"reputation": 25363, "user_id": 118228, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f2tOS.jpg?s=128&g=1", "display_name": "djangofan", "link": "https://stackoverflow.com/users/118228/djangofan"}, "edited": false, "score": 1, "creation_date": 1484788188, "post_id": 30220675, "comment_id": 70658554, "body": "Works but wont show the parameters passed to the URL."}], "tags": [], "owner": {"reputation": 12168, "user_id": 2772643, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/lg8P7.png?s=128&g=1", "display_name": "victorkt", "link": "https://stackoverflow.com/users/2772643/victorkt"}, "is_accepted": true, "score": 26, "last_activity_date": 1431535548, "last_edit_date": 1431535548, "creation_date": 1431535186, "answer_id": 30220675, "question_id": 30220532, "link": "https://stackoverflow.com/questions/30220532/how-do-i-inspect-the-full-url-generated-by-httparty/30220675#30220675", "title": "How do I inspect the full URL generated by HTTParty?", "body": "<p>You didn't pass the base URI in your example, so it wouldn't work.</p>\n\n<p>Correcting that, you can get the entire URL like this:</p>\n\n<pre><code>res = HTTParty.get('http://example.com/resource', query: { foo: 'bar' })\nres.request.last_uri.to_s\n# =&gt; \"http://example.com/resource?foo=bar\" \n</code></pre>\n\n<p>Using a class:</p>\n\n<pre><code>class Example\n  include HTTParty\n  base_uri 'example.com'\n\n  def resource\n    self.class.get(\"/resource\", query: { foo: 'bar' })\n  end\nend\n\nexample = Example.new\nres = example.resource\nres.request.last_uri.to_s\n# =&gt; \"http://example.com/resource?foo=bar\" \n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 3582, "user_id": 926705, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e161376349956949f7943b0c540e809f?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/926705/leo"}, "edited": false, "score": 0, "creation_date": 1431535550, "post_id": 30220692, "comment_id": 48545439, "body": "This is really useful. I\u2019m going to accept the answer @victorkohl provided because it\u2019s more directly applicable, but as a general approach to debugging this is great."}, {"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1431535666, "post_id": 30220692, "comment_id": 48545501, "body": "I get a <code>NoMethodError: undefined method &#39;debug_output&#39; for HTTParty:Module</code> error."}, {"owner": {"reputation": 476, "user_id": 2878821, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/BQ1jZ.jpg?s=128&g=1", "display_name": "hatenine", "link": "https://stackoverflow.com/users/2878821/hatenine"}, "edited": false, "score": 0, "creation_date": 1479201005, "post_id": 30220692, "comment_id": 68446415, "body": "<a href=\"https://ruby-doc.org/stdlib-2.3.1/libdoc/net/http/rdoc/Net/HTTP.html#method-i-set_debug_output\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-2.3.1/libdoc/net/http/rdoc/Net/&hellip;</a> what about that?"}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 9, "last_activity_date": 1431536234, "last_edit_date": 1431536234, "creation_date": 1431535231, "answer_id": 30220692, "question_id": 30220532, "link": "https://stackoverflow.com/questions/30220532/how-do-i-inspect-the-full-url-generated-by-httparty/30220692#30220692", "title": "How do I inspect the full URL generated by HTTParty?", "body": "<p>You can see all of the information of the requests HTTParty sends by first setting:</p>\n\n<pre><code>class Example\n  include HTTParty\n  debug_output STDOUT\nend\n</code></pre>\n\n<p>Then it will print the request info, including URL, to the console.</p>\n"}], "owner": {"reputation": 3582, "user_id": 926705, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/e161376349956949f7943b0c540e809f?s=128&d=identicon&r=PG", "display_name": "Leo", "link": "https://stackoverflow.com/users/926705/leo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 5749, "favorite_count": 2, "accepted_answer_id": 30220675, "answer_count": 2, "score": 17, "last_activity_date": 1431536234, "creation_date": 1431534679, "last_edit_date": 1431535648, "question_id": 30220532, "link": "https://stackoverflow.com/questions/30220532/how-do-i-inspect-the-full-url-generated-by-httparty", "title": "How do I inspect the full URL generated by HTTParty?", "body": "<p>I want to look at the full URL the HTTParty gem has constructed from my parameters, either before or after it is submitted, it doesn\u2019t matter.</p>\n\n<p>I would also be happy grabbing this from the response object, but I can\u2019t see a way to do that either.</p>\n\n<p><strong>(Bit of background)</strong></p>\n\n<p>I\u2019m building a wrapper for an API using the HTTParty gem. It\u2019s broadly working, but occasionally I get an unexpected response from the remote site, and I want to dig into why \u2013 is it something I\u2019ve sent incorrectly? If so, what? Have I somehow malformed the request? Looking at the raw URL would be good for troubleshooting but I can\u2019t see how.</p>\n\n<p>For example:</p>\n\n<pre><code>HTTParty.get('http://example.com/resource', query: { foo: 'bar' })\n</code></pre>\n\n<p>Presumably generates:</p>\n\n<pre><code>http://example.com/resource?foo=bar\n</code></pre>\n\n<p>But how can I check this?</p>\n\n<p>In one instance I did this:</p>\n\n<pre><code>HTTParty.get('http://example.com/resource', query: { id_numbers: [1, 2, 3] }\n</code></pre>\n\n<p>But it didn\u2019t work. Through experimenting I was able to produce this which worked:</p>\n\n<pre><code>HTTParty.get('http://example.com/resource', query: { id_numbers: [1, 2, 3].join(',') }\n</code></pre>\n\n<p>So clearly HTTParty\u2019s default approach to forming the query string didn\u2019t align with the API designers\u2019 preferred format. That\u2019s fine, but it was awkward to figure out exactly what was needed.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "activerecord"], "comments": [{"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "edited": false, "score": 0, "creation_date": 1431536382, "post_id": 30220233, "comment_id": 48545938, "body": "Don&#39;t take this personally, but I&#39;m voting to close this question because although it was a well asked question, the solution is very particular to your problem and won&#39;t be widely applicable for others."}], "answers": [{"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": false, "score": 1, "last_activity_date": 1431536295, "creation_date": 1431536295, "answer_id": 30221034, "question_id": 30220233, "link": "https://stackoverflow.com/questions/30220233/populating-rails-database-with-external-api-request-data/30221034#30221034", "title": "Populating rails database with external api request data", "body": "<p><code>if key[\"homeTeamName\"] = t.name</code> will always be <code>true</code> because you've used the assignment operator (<code>=</code>) instead of the boolean comparison operator (<code>==</code>), and so the <code>elsif</code> will never be attempted (but would also always be true for the same reason).</p>\n"}, {"comments": [{"owner": {"reputation": 41, "user_id": 4880606, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206033685828428/picture?type=large", "display_name": "Rafiki Assumani", "link": "https://stackoverflow.com/users/4880606/rafiki-assumani"}, "edited": false, "score": 0, "creation_date": 1431652220, "post_id": 30221126, "comment_id": 48600355, "body": "thanks for your answer. This is how it looks like just for one team but contains more:    &lt;ActiveRecord::Associations::CollectionProxy [#&lt;Team id: 2, name: &quot;Manchester United FC&quot;, code: &quot;MUFC&quot;, short_name: &quot;ManU&quot;, squad_market_value: &quot;425,000,000 \u20ac&quot;, logo: &quot;manchester-united.png&quot;, league_id: 5, created_at: &quot;2015-05-13 04:53:08&quot;, updated_at: &quot;2015-05-13 04:56:50&quot;, etc...&gt; so how do I assign values to homeTeam_id and awayTeam_id based on homeTeamName and awayTeamName from the API call? Please refer to my association. Thanks in advance"}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": false, "score": 1, "last_activity_date": 1431536616, "creation_date": 1431536616, "answer_id": 30221126, "question_id": 30220233, "link": "https://stackoverflow.com/questions/30220233/populating-rails-database-with-external-api-request-data/30221126#30221126", "title": "Populating rails database with external api request data", "body": "<p>You're using the wrong flow control logic to populate those fields, this part:</p>\n\n<pre><code>if key[\"homeTeamName\"] = t.name\n   homeTeam_id = t.id\nelsif key[\"awayTeamName\"] = t.name\n   awayTeam_id = t.id\nend\n</code></pre>\n\n<p>Is using the <code>=</code> assignment operator which will set the value of <code>t.name</code> to <code>key[\"homeTeamName\"]</code> and be truthy if <code>t.name</code> is not <code>nil</code> or <code>false</code> meaning only <code>homeTeam_id = t.id</code> will ever run. </p>\n\n<p>Beyond that, even if you changed the operator to the correct <code>==</code> equality operator, the <code>if...elsif</code> control flow will mean that only either <code>homeTeam_id</code> <em>or</em> <code>awayTeam_id</code> will get set, never both. </p>\n\n<p>What does each <code>@league.teams</code> object look like? Is the <code>t.id</code> the <code>homeTeam_id</code> or the <code>awayTeam_id</code>? Is there a <code>t.away_team_id</code>? Add a <code>puts t.inspect</code> right inside your <code>@league.teams.each</code> block and post the result, and I'll update my answer with more specific help.</p>\n"}], "owner": {"reputation": 41, "user_id": 4880606, "user_type": "registered", "profile_image": "https://graph.facebook.com/10206033685828428/picture?type=large", "display_name": "Rafiki Assumani", "link": "https://stackoverflow.com/users/4880606/rafiki-assumani"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1121, "favorite_count": 2, "answer_count": 2, "score": 2, "last_activity_date": 1431536616, "creation_date": 1431533707, "last_edit_date": 1431534368, "question_id": 30220233, "link": "https://stackoverflow.com/questions/30220233/populating-rails-database-with-external-api-request-data", "title": "Populating rails database with external api request data", "body": "<p>I'm trying to populate my database table with data from an api. I have three models involved and set up as shown below: </p>\n\n<pre><code>class Fixture &lt; ActiveRecord::Base\n\n belongs_to :homeTeam, class_name: \"Team\", foreign_key: \"homeTeam_id\"\n belongs_to :awayTeam, class_name: \"Team\", foreign_key: \"awayTeam_id\"\n belongs_to :league\n validates :matchday, presence: true\n validate :opposing_teams_must_be_different\n\n#validates :externalFixtureID, :date, :matchday, :awayTeam, :homeTeam ,   :goalsHomeTeam, :goalsAwayTeam, presence: true\n\n def teams   \n   [homeTeam, awayTeam]\n end \n\n  def opposing_teams_must_be_different\n     errors.add(:awayTeam, \"must be different from Home team\") if    awayTeam_id == homeTeam_id\n  end  \n\n class Team &lt; ActiveRecord::Base\n    belongs_to :league\n    has_many :fixtures\n  end \n\n   class League &lt; ActiveRecord::Base\n    has_many :teams\n    has_many :fixtures\n  end\n</code></pre>\n\n<p>To populate the database and making sure I get fixtures for the the league and teams, I used the following code in the Fixture model: </p>\n\n<pre><code>    def self.query_fixtures\n     uri = URI.parse(\"http://api.football-data.org\")\n     http = Net::HTTP.new(uri.host, uri.port)\n     request = Net::HTTP::Get.new(\"/alpha/soccerseasons/354/fixtures\")\n     response = http.request(request)\n     parsed_matches = JSON.parse(response.body)[\"fixtures\"]\n     parsed_matches.each do |key, val|\n\n     @league = League.find(5)\n     @teams = @league.teams.each do |t|\n         if key[\"homeTeamName\"] = t.name\n          homeTeam_id = t.id\n       elsif key[\"awayTeamName\"] = t.name\n          awayTeam_id = t.id\n       end\n        @fixture = @league.fixtures.create!(:gameDate =&gt; key[\"date\"], :matchday =&gt; key[\"matchday\"], :awayTeam_id =&gt; awayTeam_id,\n                                           :homeTeam_id =&gt; homeTeam_id, :goalsHomeTeam =&gt; key[\"result\"][\"goalsHomeTeam\"],\n                                           :goalsAwayTeam =&gt; key[\"result\"][\"goalsAwayTeam\"])\n         end\n\n      end\n\n    end\n</code></pre>\n\n<p>However, when I run the code in the rails console, the database gets populated but the awayTeam_id remains blank/null. How can I make sure I get both the awayTeam_id and homeTeam_id populated? The names of the teams and what I'm getting from the api are the same. I'm setting up the awayTeam_id and homeTeam_id based on homeTeamName = team.name and awayTeamName = team.name (Please see loop in query_fixtures method) Any help would be appreciated. </p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "delayed-job"], "answers": [{"comments": [{"owner": {"reputation": 879, "user_id": 3159178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/51ae1dceba9b6e78b352d2c1862f6053?s=128&d=identicon&r=PG&f=1", "display_name": "victor sosa", "link": "https://stackoverflow.com/users/3159178/victor-sosa"}, "edited": false, "score": 0, "creation_date": 1431538619, "post_id": 30220403, "comment_id": 48547216, "body": "Thanks for you answer, no more loadData(), sorry java world in my head yet. I fixed that already."}, {"owner": {"reputation": 879, "user_id": 3159178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/51ae1dceba9b6e78b352d2c1862f6053?s=128&d=identicon&r=PG&f=1", "display_name": "victor sosa", "link": "https://stackoverflow.com/users/3159178/victor-sosa"}, "edited": false, "score": 0, "creation_date": 1431538797, "post_id": 30220403, "comment_id": 48547358, "body": "I have made this changes I got another error:   TypeError - can&#39;t dump anonymous module: #&lt;Module:0x000000086f6078&gt;                                 now I call Delayed::Job.enqueue(CronJob.new(self), cron: &#39;0 &#39; &lt;&lt; sethour &lt;&lt; &#39; * * 1-5&#39;) and my cronjob class is like class                                   CronJob &lt; Struct.new(&quot;CronJob&quot;)   def initialize(admin) \t@admin = admin   end    def perform     @admin.load_data()   end end"}, {"owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "reply_to_user": {"reputation": 879, "user_id": 3159178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/51ae1dceba9b6e78b352d2c1862f6053?s=128&d=identicon&r=PG&f=1", "display_name": "victor sosa", "link": "https://stackoverflow.com/users/3159178/victor-sosa"}, "edited": false, "score": 0, "creation_date": 1431539493, "post_id": 30220403, "comment_id": 48547758, "body": "not 100% sure but try this  class CronJob &lt; Struct.new(&#39;CronJob&#39;, :controller)    def perform     controller.load_data   end end"}, {"owner": {"reputation": 879, "user_id": 3159178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/51ae1dceba9b6e78b352d2c1862f6053?s=128&d=identicon&r=PG&f=1", "display_name": "victor sosa", "link": "https://stackoverflow.com/users/3159178/victor-sosa"}, "edited": false, "score": 0, "creation_date": 1431541965, "post_id": 30220403, "comment_id": 48549170, "body": "I fixed the issue in a simple way, I moved the load_data() method to a new module load before the admincontroller and the cronjob class and it seen to be working, because it load the job in the database; now I am waiting to the job to run, Thank for you help it was nice to see someone checking my code in a semantic way too. I let you know if my change works fine in the job."}], "tags": [], "owner": {"reputation": 4103, "user_id": 4271125, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/VQnWR.jpg?s=128&g=1", "display_name": "djaszczurowski", "link": "https://stackoverflow.com/users/4271125/djaszczurowski"}, "is_accepted": true, "score": 1, "last_activity_date": 1431534282, "creation_date": 1431534282, "answer_id": 30220403, "question_id": 30220199, "link": "https://stackoverflow.com/questions/30220199/calling-instance-method-from-another-class-ruby/30220403#30220403", "title": "Calling instance method from another class ruby", "body": "<p>Do not create controller by yourself, if you really have to invoke some method of controller in lower part of your application, pass instance of current controller as variable.</p>\n\n<p>Example:</p>\n\n<pre><code>def index #method of controller AdminController\n  CronJob.new(self).perform #so now you are passing controller which inherits from ApplicationController, so loadData method can be invoked on it(if it is public)\nend\n</code></pre>\n\n<p>one more thing, in ruby we write <code>load_data</code> not <code>loadData</code> :)</p>\n\n<p>one more thing#2</p>\n\n<p>if your request is handled by let's say <code>FooController</code>, and you want to invoke method from <code>AdminController</code> it means you should encapsulate load_data method in some third object (<code>DataLoader</code>). Inheriting in <code>FooController</code> from <code>AdminContorller</code> is not a solution!</p>\n"}], "owner": {"reputation": 879, "user_id": 3159178, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/51ae1dceba9b6e78b352d2c1862f6053?s=128&d=identicon&r=PG&f=1", "display_name": "victor sosa", "link": "https://stackoverflow.com/users/3159178/victor-sosa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 510, "favorite_count": 0, "accepted_answer_id": 30220403, "answer_count": 1, "score": 1, "last_activity_date": 1431534282, "creation_date": 1431533606, "last_edit_date": 1431533841, "question_id": 30220199, "link": "https://stackoverflow.com/questions/30220199/calling-instance-method-from-another-class-ruby", "title": "Calling instance method from another class ruby", "body": "<p>I  am having this runtime error: </p>\n\n<pre><code>11843:E, [2015-05-13T11:00:00.467150 #9464] ERROR -- : 2015-05-13T11:00:00-0400: [Worker(delayed_job host:server pid:9464)] Job CronJob (id=5550d0f84d6f747bcb000000) FAILED with **NoMethodError: undefined method `loadData' for AdminController:Class**\n</code></pre>\n\n<p>How I can call the method loadData() from the cronJob class? I test the code using the console and it is working fine if I call from console: <strong>AdminController.new.loadData()</strong></p>\n\n<pre><code>    class AdminController &lt; ApplicationController\n\n    ...\n\n    def setLoadSchedule\n        logger.debug \"set hour #{params[:admin][:hour]}\"\n        sethour = params[:admin][:hour]\n\n        Delayed::Job.find(Perseus::Application.config.delayed_job_id).destroy if Perseus::Application.config.delayed_job_id != :nil\n    Perseus::Application.config.delayed_job_id = Delayed::Job.enqueue(CronJob.new, cron: '0 ' &lt;&lt; sethour &lt;&lt; ' * * 1-5')\n\n    hide_action :loadData\n\n    def loadData()\n     ...\n    end \n\n    private\n    def isAdmin\n        if !current_user.admin\n        redirect_to root_path\n        end\n    end\n\n    end\n\n  class CronJob &lt; Struct.new(\"CronJob\")\n\n    def perform\n      AdminController.new.loadData()\n    end\n  end   \n</code></pre>\n"}, {"tags": ["ruby", "hash", "fetch", "options"], "answers": [{"comments": [{"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "edited": false, "score": 0, "creation_date": 1431540749, "post_id": 30219597, "comment_id": 48548471, "body": "<code>p aspect_ratio</code> would be no problem."}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": false, "score": 3, "last_activity_date": 1431531855, "creation_date": 1431531855, "answer_id": 30219597, "question_id": 30219557, "link": "https://stackoverflow.com/questions/30219557/ruby-2-1-3-options-hash-cannot-be-assigned-with-fetch/30219597#30219597", "title": "Ruby 2.1.3 options hash cannot be assigned with fetch", "body": "<p>Remove this line from your method:</p>\n\n<pre><code>puts aspect_ratio\n</code></pre>\n\n<p>Your Ruby method is returning to the value of the final statement, i.e. the value of <code>puts</code>. </p>\n\n<p>When you remove that line, then your method will return <code>aspect_ratio</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 73, "user_id": 3067409, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e9c220d64866943da879ae4c96193e?s=128&d=identicon&r=PG&f=1", "display_name": "Wumbo", "link": "https://stackoverflow.com/users/3067409/wumbo"}, "edited": false, "score": 0, "creation_date": 1431532329, "post_id": 30219726, "comment_id": 48543366, "body": "I see. Thank you and the person above for your answers, you&#39;re right. But does that mean I can&#39;t use aspect_ratio within the method (obviously I was trying to simplify the problem).   How can I access aspect ratio within the method? I will modify my question above to illustrate."}, {"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "reply_to_user": {"reputation": 73, "user_id": 3067409, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e9c220d64866943da879ae4c96193e?s=128&d=identicon&r=PG&f=1", "display_name": "Wumbo", "link": "https://stackoverflow.com/users/3067409/wumbo"}, "edited": false, "score": 0, "creation_date": 1431532509, "post_id": 30219726, "comment_id": 48543499, "body": "you can add as many puts statements as you&#39;d like into the method (or continue to use aspect ratio throughout). the important takeaway, is that you ensure the last line in your method returns the value you want your method to return. since you wanted to return aspect_ratio, your last line cannot be put(aspect_ratio), since puts returns nil."}, {"owner": {"reputation": 73, "user_id": 3067409, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e9c220d64866943da879ae4c96193e?s=128&d=identicon&r=PG&f=1", "display_name": "Wumbo", "link": "https://stackoverflow.com/users/3067409/wumbo"}, "edited": false, "score": 0, "creation_date": 1431533122, "post_id": 30219726, "comment_id": 48543885, "body": "Yes. Sorry I made a false assumption. I was updating an existing working method to use options instead of a mandatory aspect ratio field. When it stopped working after I defined the variable by options instead, I assumed the problem was because of options. But actually it is probably just my module assets in rails being janky and not updating consistently."}, {"owner": {"reputation": 73, "user_id": 3067409, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e9c220d64866943da879ae4c96193e?s=128&d=identicon&r=PG&f=1", "display_name": "Wumbo", "link": "https://stackoverflow.com/users/3067409/wumbo"}, "edited": false, "score": 0, "creation_date": 1431533488, "post_id": 30219726, "comment_id": 48544125, "body": "Actually the real problem was that I forgot I had a different branch in another version of the repo open in the terminal, and was starting rails from the wrong repo. Shoestring workflow~ That&#39;s one good reason changes you&#39;re making don&#39;t seem to be happening."}], "tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": true, "score": 2, "last_activity_date": 1431532193, "creation_date": 1431532193, "answer_id": 30219726, "question_id": 30219557, "link": "https://stackoverflow.com/questions/30219557/ruby-2-1-3-options-hash-cannot-be-assigned-with-fetch/30219726#30219726", "title": "Ruby 2.1.3 options hash cannot be assigned with fetch", "body": "<p>You actually have the correct structure down, however the final puts in your method is causing the return value to be nil. Ruby utilizes an implicit return, so unless specified, it will return the last value of a method. remove the <code>puts aspect_ratio</code> from the method, or ensure the last line is <code>aspect_ratio</code> and the method will properly return your value</p>\n\n<pre><code>def resizeImage(event_file, resize_width, resize_height, options = {}) \n  puts options\n  aspect_ratio = options.fetch(:maintain_aspect_ratio, true)\n  puts aspect_ratio #remove this line\n  aspect_ratio\nend\n</code></pre>\n\n<p>this can end up being shortened to</p>\n\n<pre><code>def resizeImage(event_file, resize_width, resize_height, options = {}) \n  options.fetch(:maintain_aspect_ratio, true)\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 4602, "user_id": 1141264, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/4af75d466ec6c84e3a0a9f1de61233ae?s=128&d=identicon&r=PG", "display_name": "DickieBoy", "link": "https://stackoverflow.com/users/1141264/dickieboy"}, "is_accepted": false, "score": 0, "last_activity_date": 1431532229, "creation_date": 1431532229, "answer_id": 30219743, "question_id": 30219557, "link": "https://stackoverflow.com/questions/30219557/ruby-2-1-3-options-hash-cannot-be-assigned-with-fetch/30219743#30219743", "title": "Ruby 2.1.3 options hash cannot be assigned with fetch", "body": "<p>@joelparkerhendersons answer is correct</p>\n\n<p>Im going to explain whats happening.</p>\n\n<p>Everything in ruby returns something(apart from a tiny minority). It can be forced by using <code>return</code> but by default the last line of the method is returned.</p>\n\n<p>Your method <code>resizeImage</code> returns what <code>puts</code> returns. <code>puts</code> returns <code>nil</code></p>\n\n<p>Therefore as @joelparkerhendersons suggested remove the <code>puts</code></p>\n"}], "owner": {"reputation": 73, "user_id": 3067409, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/90e9c220d64866943da879ae4c96193e?s=128&d=identicon&r=PG&f=1", "display_name": "Wumbo", "link": "https://stackoverflow.com/users/3067409/wumbo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 30219726, "answer_count": 3, "score": 1, "last_activity_date": 1431532616, "creation_date": 1431531736, "last_edit_date": 1431532616, "question_id": 30219557, "link": "https://stackoverflow.com/questions/30219557/ruby-2-1-3-options-hash-cannot-be-assigned-with-fetch", "title": "Ruby 2.1.3 options hash cannot be assigned with fetch", "body": "<p>Please explain to me why this is happening:</p>\n\n<pre><code>def resizeImage(event_file, resize_width, resize_height, options = {})\n  puts options\n  aspect_ratio = options.fetch(:maintain_aspect_ratio, true)\n  puts aspect_ratio\n  \"return value\"\nend\n\n\nresizeImage('event_file', 'resize_width', 'resize_height', {maintain_aspect_ratio: false} )\n{:maintain_aspect_ratio=&gt;false}\nfalse\n =&gt; \"return value\" \n</code></pre>\n\n<p>I want to set a variable to = the fetch from the hash to make my code more readable. But for some reason it is nil when I call it. It almost looks like the fetch is asynchronous, but this ain't ajax.</p>\n\n<p>This is a pretty elementary problem I know, but so far as I can tell I am doing things just as they are described in more than one guide to using options in ruby methods.</p>\n\n<p>-- Update --</p>\n\n<p>so now I have it returning something else to try to separate the problem. I see that the puts statement for aspect_ratio doesn't actually return anything at all. What is happening?</p>\n\n<p>-- Update2 --</p>\n\n<p>Okay, I got confused. It is returning false. So there is something else wrong in my real method. Thank you for your time, I will accept the most detailed answer but I appreciate both.</p>\n"}, {"tags": ["ruby", "gem"], "comments": [{"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 1, "creation_date": 1431531201, "post_id": 30219169, "comment_id": 48542557, "body": "So, where is the problem??"}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 1, "creation_date": 1431531734, "post_id": 30219169, "comment_id": 48542930, "body": "Seems to work okay for me (well I get a load error, I think you need to add <code>commander</code> to your dependencies). What error do you get \u2013 is it some form of \u201ccommand not found\u201d from your shell? If so you might need to make sure you have Rubygems set up correctly so that the gem executables are on your path. Do other gems work ok?"}, {"owner": {"reputation": 406, "user_id": 2181217, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3ea8736e85ccd5fc64a5273a89a87af2?s=128&d=identicon&r=PG", "display_name": "Stephen Mariano Cabrera", "link": "https://stackoverflow.com/users/2181217/stephen-mariano-cabrera"}, "reply_to_user": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 0, "creation_date": 1431532252, "post_id": 30219169, "comment_id": 48543302, "body": "@maxd Ah sorry, the problem was that the last bit <code>gemname foo-arguments</code> doesn&#39;t work because it says there is no executable by that name. I&#39;ll edit the question."}, {"owner": {"reputation": 406, "user_id": 2181217, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3ea8736e85ccd5fc64a5273a89a87af2?s=128&d=identicon&r=PG", "display_name": "Stephen Mariano Cabrera", "link": "https://stackoverflow.com/users/2181217/stephen-mariano-cabrera"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1431532872, "post_id": 30219169, "comment_id": 48543730, "body": "@matt I edited the post to include the error I got. I also just noticed that I get this message: <code>rbenv: cannot rehash: &#47;home&#47;stephen&#47;.rbenv&#47;shims&#47;.rbenv-shim exists Successfully installed get_freaky-0.1.2.pre</code>"}], "answers": [{"tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": false, "score": 2, "last_activity_date": 1431532598, "creation_date": 1431532598, "answer_id": 30219871, "question_id": 30219169, "link": "https://stackoverflow.com/questions/30219169/building-gem-executable-not-found/30219871#30219871", "title": "Building gem, executable not found", "body": "<p>Your gemspec is trying to change the load path. I would suggest fixing that first, because what you're reporting seems to be consistent with a gem not being able to find its files.</p>\n\n<p>Look at your gemspec for this code:</p>\n\n<pre><code>lib = File.expand_path('../lib', __FILE__)\n$LOAD_PATH.unshift(lib) unless $LOAD_PATH.include?(lib)\n</code></pre>\n\n<p>Then see <a href=\"http://guides.rubygems.org/patterns/\" rel=\"nofollow\">http://guides.rubygems.org/patterns/</a> </p>\n\n<p>\"Gems should not change the $LOAD_PATH variable. RubyGems manages this for you. Code like this should not be necessary ...\"</p>\n\n<p>See <a href=\"http://guides.rubygems.org/patterns/\" rel=\"nofollow\">http://guides.rubygems.org/patterns/</a> for various solutions to load using the existing load path, and helpers such as <code>require_relative</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 11572, "user_id": 462015, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/e98ec4b9f3be7294da5328857b07de49?s=128&d=identicon&r=PG", "display_name": "Arturo Herrero", "link": "https://stackoverflow.com/users/462015/arturo-herrero"}, "is_accepted": true, "score": 5, "last_activity_date": 1431532997, "creation_date": 1431532997, "answer_id": 30220006, "question_id": 30219169, "link": "https://stackoverflow.com/questions/30219169/building-gem-executable-not-found/30220006#30220006", "title": "Building gem, executable not found", "body": "<p>You need to add all the files that need be included with the gem in <code>spec.files</code>. You missed to add the files that you have in the <code>bin</code> directory.</p>\n\n<p>For example, I have the following configuration from <a href=\"https://github.com/arturoherrero/yarr\" rel=\"noreferrer\">one of my gems</a>:</p>\n\n<pre><code>Gem::Specification.new do |spec|\n  spec.files         = Dir[\"{bin,lib}/**/*\", \"LICENSE\", \"README.md\"]\n  spec.test_files    = Dir[\"spec/**/*\"]\n  spec.require_paths = [\"lib\"]\n  spec.executables   = [\"yarr\"]\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7844, "user_id": 1520557, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/9KKRA.png?s=128&g=1", "display_name": "Drenmi", "link": "https://stackoverflow.com/users/1520557/drenmi"}, "is_accepted": false, "score": 0, "last_activity_date": 1523479158, "creation_date": 1523479158, "answer_id": 49784122, "question_id": 30219169, "link": "https://stackoverflow.com/questions/30219169/building-gem-executable-not-found/49784122#49784122", "title": "Building gem, executable not found", "body": "<p>In addition you need to ensure your executable is, well, executable.</p>\n\n<pre><code>$ chmod a+x bin/gemname\n</code></pre>\n\n<p>Otherwise the command won't be available after building the gem.</p>\n"}], "owner": {"reputation": 406, "user_id": 2181217, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/3ea8736e85ccd5fc64a5273a89a87af2?s=128&d=identicon&r=PG", "display_name": "Stephen Mariano Cabrera", "link": "https://stackoverflow.com/users/2181217/stephen-mariano-cabrera"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2771, "favorite_count": 1, "accepted_answer_id": 30220006, "answer_count": 3, "score": 4, "last_activity_date": 1523479158, "creation_date": 1431530642, "last_edit_date": 1431532431, "question_id": 30219169, "link": "https://stackoverflow.com/questions/30219169/building-gem-executable-not-found", "title": "Building gem, executable not found", "body": "<p>I'm in the process of writing my first ruby gem and I'm a little new at the whole structure of setting up gems. My understanding from reading <a href=\"http://guides.rubygems.org/make-your-own-gem/\" rel=\"nofollow\">this guide</a> is that in order to create an executable for my gem I need to do the following:</p>\n\n<ol>\n<li><p>Add a line to my gemspec specifiying the name of the executable like this:</p>\n\n<p><code>s.executables &lt;&lt; 'gemname'</code></p></li>\n<li><p>Build the gem with</p>\n\n<p><code>gem build gemname.gemspec</code></p></li>\n<li><p>Install the gem locally (if you try to install by pushing to rubygems each time you'll end up having to change versions constantly) with</p>\n\n<p><code>gem install gemname-0.0.1.pre.gem</code></p></li>\n<li><p>Then test it out with</p>\n\n<p><code>gemname foo-arguments, --bar-options</code></p></li>\n</ol>\n\n<p>If I go through all these steps then on #4 I get the following error:</p>\n\n<pre><code>$ gemname\nzsh: command not found: gemname\n</code></pre>\n\n<p>Assuming that the executable a file starting with a shebang and located at gemname/bin/gemname</p>\n\n<p>Everything works just fine if I navigate to the root of the gem folder and run bin/gemname to test out the executable. </p>\n\n<p><a href=\"https://gist.github.com/2670c55aef93c723a9b6\" rel=\"nofollow\">Here</a> is a gist of my current gemspec and the gem source is available on github <a href=\"https://www.github.com/smcabrera/get_freaky\" rel=\"nofollow\">here</a>.</p>\n"}, {"tags": ["ruby", "linux", "shell", "memory"], "comments": [{"owner": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 1, "creation_date": 1431531311, "post_id": 30219106, "comment_id": 48542635, "body": "So, what is your question??"}, {"owner": {"reputation": 699, "user_id": 242404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b935cdc584e2ef7accfdf0556ec8ba52?s=128&d=identicon&r=PG", "display_name": "Julien", "link": "https://stackoverflow.com/users/242404/julien"}, "reply_to_user": {"reputation": 8946, "user_id": 2398521, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/84bb49c56756a8c7cd54d4876d7a4467?s=128&d=identicon&r=PG", "display_name": "Maxim", "link": "https://stackoverflow.com/users/2398521/maxim"}, "edited": false, "score": 0, "creation_date": 1431532457, "post_id": 30219106, "comment_id": 48543463, "body": "@maxd I updated the post to clarify my question. Thanks."}], "answers": [{"comments": [{"owner": {"reputation": 699, "user_id": 242404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b935cdc584e2ef7accfdf0556ec8ba52?s=128&d=identicon&r=PG", "display_name": "Julien", "link": "https://stackoverflow.com/users/242404/julien"}, "edited": false, "score": 0, "creation_date": 1431533194, "post_id": 30219985, "comment_id": 48543937, "body": "At least now I understand the behaviour. And I will try posix-spawn. Thanks a lot!"}], "tags": [], "owner": {"reputation": 32543, "user_id": 528726, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/6307569a99dd77fff0463032051d7e39?s=128&d=identicon&r=PG", "display_name": "joelparkerhenderson", "link": "https://stackoverflow.com/users/528726/joelparkerhenderson"}, "is_accepted": true, "score": 3, "last_activity_date": 1431532934, "creation_date": 1431532934, "answer_id": 30219985, "question_id": 30219106, "link": "https://stackoverflow.com/questions/30219106/errnoenomem-when-process-shell-out-while-using-swap/30219985#30219985", "title": "Errno::ENOMEM when process shell out while using swap", "body": "<blockquote>\n  <p>Why do I get the Errno::ENOMEM error? </p>\n</blockquote>\n\n<p>Because Ruby can't allocate enough memory. </p>\n\n<p>Ruby's memory management is difficult (IMHO) with regard to shelling out when you're using the typical Ruby, a.k.a. KRI, MRI, YARV.</p>\n\n<p>Here's an article that may help you: </p>\n\n<p><a href=\"http://adamniedzielski.github.io/blog/2014/02/05/fighting-paperclip-errno-enomem-error/\" rel=\"nofollow\">http://adamniedzielski.github.io/blog/2014/02/05/fighting-paperclip-errno-enomem-error/</a></p>\n\n<p>The key idea in the article is: \"To create the child process, free memory must be greater than the memory taken by the parent process.\"</p>\n\n<p>The solution in the article is to switch to using the <code>posix-spawn</code> gem:</p>\n\n<p><a href=\"https://github.com/rtomayko/posix-spawn\" rel=\"nofollow\">https://github.com/rtomayko/posix-spawn</a></p>\n"}], "owner": {"reputation": 699, "user_id": 242404, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b935cdc584e2ef7accfdf0556ec8ba52?s=128&d=identicon&r=PG", "display_name": "Julien", "link": "https://stackoverflow.com/users/242404/julien"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 363, "favorite_count": 0, "accepted_answer_id": 30219985, "answer_count": 1, "score": 2, "last_activity_date": 1431532934, "creation_date": 1431530474, "last_edit_date": 1431532430, "question_id": 30219106, "link": "https://stackoverflow.com/questions/30219106/errnoenomem-when-process-shell-out-while-using-swap", "title": "Errno::ENOMEM when process shell out while using swap", "body": "<p>I have a ruby script that loads a lot of data in memory and then needs to shell out to perform a task on this data. But sometimes, the data is so big that the script is running in the swap, and in this case, shelling out gives me an <code>Errno::ENOMEM</code> error.</p>\n\n<p>Here is the script to reproduce the problem:</p>\n\n<pre><code>def current_process_ram\n  pid, size = `ps ax -o pid,rss | grep -E \"^[[:space:]]*#{$$}\"`.strip.split.map(&amp;:to_i)\n  size / 1000\nend\n\ndef display_current_process_ram\n  \"Current RAM: #{current_process_ram}\"\nend\n\nputs display_current_process_ram\n\narray = []\none_gig = 14_000_000\n0.upto(one_gig * 2.5) do\n  array &lt;&lt; '12345'\nend\nsleep 2\n`ls`\n\nputs display_current_process_ram\n</code></pre>\n\n<h1><code>htop</code> before running the script:</h1>\n\n<p><img src=\"https://i.stack.imgur.com/IZiDM.png\" alt=\"before running script\"></p>\n\n<h1><code>htop</code> when the script is running:</h1>\n\n<p><img src=\"https://i.stack.imgur.com/X7vMg.png\" alt=\"while script is running\"></p>\n\n<h1>Resulting error:</h1>\n\n<pre><code>deploy@vagrant-ubuntu-trusty-64:~/statusmachine$ ruby test.rb\nCurrent RAM: 7\ntest.rb:19:in ``': Cannot allocate memory - ls (Errno::ENOMEM)\n        from test.rb:19:in `&lt;main&gt;'\n</code></pre>\n\n<p>It runs on an Ubuntu server \"trusty tahr\" VM.</p>\n\n<h1>My question</h1>\n\n<p>Why do I get the <code>Errno::ENOMEM</code> error? I would expect the system call to work since I have enough swap to perform it.</p>\n\n<hr>\n\n<p>Edit: If I change the script to only use 1 gig, it doesn't explode when shelling out.</p>\n\n<p>Edit 2: When I shell out, there is still a lot of swap to perform the system call, so there shouldn't be an <code>Errno::ENOMEM</code> happening.</p>\n\n<p>Edit 3: Clarified my question.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "carrierwave"], "comments": [{"owner": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "edited": false, "score": 2, "creation_date": 1431530480, "post_id": 30219020, "comment_id": 48542028, "body": "You have a comment that is not connected to a user in your database and therefor <code>comment.user</code> is <code>nil</code>. And <code>nil</code> doesn&#39;t have a method called <code>avatar?</code>."}], "answers": [{"comments": [{"owner": {"reputation": 1366, "user_id": 133059, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1dce9f8ba8935e237da5890ffe6714a?s=128&d=identicon&r=PG", "display_name": "Jonathan Musso", "link": "https://stackoverflow.com/users/133059/jonathan-musso"}, "edited": false, "score": 0, "creation_date": 1431531163, "post_id": 30219129, "comment_id": 48542536, "body": "Would this be due to the fact that I have comments seeded into my database with the Faker gem?"}, {"owner": {"reputation": 226, "user_id": 4895480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQQfL.jpg?s=128&g=1", "display_name": "alexandrine_greenfelder", "link": "https://stackoverflow.com/users/4895480/alexandrine-greenfelder"}, "reply_to_user": {"reputation": 1366, "user_id": 133059, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1dce9f8ba8935e237da5890ffe6714a?s=128&d=identicon&r=PG", "display_name": "Jonathan Musso", "link": "https://stackoverflow.com/users/133059/jonathan-musso"}, "edited": false, "score": 0, "creation_date": 1431531414, "post_id": 30219129, "comment_id": 48542697, "body": "Yes, incorrect data is one of reason such problems."}, {"owner": {"reputation": 1366, "user_id": 133059, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1dce9f8ba8935e237da5890ffe6714a?s=128&d=identicon&r=PG", "display_name": "Jonathan Musso", "link": "https://stackoverflow.com/users/133059/jonathan-musso"}, "edited": false, "score": 0, "creation_date": 1431532326, "post_id": 30219129, "comment_id": 48543361, "body": "Ok I removed the comment seeding and reset the DB. Implemented your code suggestion and now it tells me &quot;NoMethodError for &#39;name&#39;&quot;. Heh. I reverted back to my original code and created a comment logged in as Admin to see if this would work but appears to throw the same error."}, {"owner": {"reputation": 41278, "user_id": 84631, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/181035f8aac1cb68d50dc58b67dc0349?s=128&d=identicon&r=PG", "display_name": "Mischa", "link": "https://stackoverflow.com/users/84631/mischa"}, "reply_to_user": {"reputation": 1366, "user_id": 133059, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1dce9f8ba8935e237da5890ffe6714a?s=128&d=identicon&r=PG", "display_name": "Jonathan Musso", "link": "https://stackoverflow.com/users/133059/jonathan-musso"}, "edited": false, "score": 0, "creation_date": 1431562848, "post_id": 30219129, "comment_id": 48558356, "body": "@JonathanMusso, so you still have a comment that doesn&#39;t have a user connected to it. Just do a query in your database to find those records and delete them (<code>DELETE FROM comments WHERE user_id IS NULL</code>) or add another check before displaying <code>comment.user.name</code>)."}, {"owner": {"reputation": 1366, "user_id": 133059, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1dce9f8ba8935e237da5890ffe6714a?s=128&d=identicon&r=PG", "display_name": "Jonathan Musso", "link": "https://stackoverflow.com/users/133059/jonathan-musso"}, "edited": false, "score": 0, "creation_date": 1431719837, "post_id": 30219129, "comment_id": 48635316, "body": "Turns out I needed to nest the HTML inside my loop."}], "tags": [], "owner": {"reputation": 226, "user_id": 4895480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQQfL.jpg?s=128&g=1", "display_name": "alexandrine_greenfelder", "link": "https://stackoverflow.com/users/4895480/alexandrine-greenfelder"}, "is_accepted": true, "score": 3, "last_activity_date": 1431530646, "last_edit_date": 1431530646, "creation_date": 1431530527, "answer_id": 30219129, "question_id": 30219020, "link": "https://stackoverflow.com/questions/30219020/deletion-assignment-undefined-method-avatar-for-nilnilclass/30219129#30219129", "title": "Deletion assignment, undefined method `avatar?&#39; for nil:NilClass", "body": "<p>This is error means that <code>comment.user</code> is <code>nil</code>. If you want to fix it you should investigate why this happens.</p>\n\n<p>If this is the correct case (for example this is an anonymous user) then you can handle it use something like:</p>\n\n<pre><code>... if comment.user.try(:avatar?)\n</code></pre>\n"}], "owner": {"reputation": 1366, "user_id": 133059, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/f1dce9f8ba8935e237da5890ffe6714a?s=128&d=identicon&r=PG", "display_name": "Jonathan Musso", "link": "https://stackoverflow.com/users/133059/jonathan-musso"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 495, "favorite_count": 0, "accepted_answer_id": 30219129, "answer_count": 1, "score": 1, "last_activity_date": 1431530646, "creation_date": 1431530255, "question_id": 30219020, "link": "https://stackoverflow.com/questions/30219020/deletion-assignment-undefined-method-avatar-for-nilnilclass", "title": "Deletion assignment, undefined method `avatar?&#39; for nil:NilClass", "body": "<p>I am a new student to Ruby on Rails and am currently working on the Deletion HTTP request for my project, a Reddit clone. So far I have implemented Destroy functionality on Topics and Posts successfully. Now that I am working on the deletion of Comments I have hit an error that I am not sure how to deal with.</p>\n\n<p>Here was the instruction.</p>\n\n<blockquote>\n  <p>Finally, we also have to modify the comment-listing view -- the app/views/comments/_comment.html.erb partial called in posts#show. Update the partial to look this:</p>\n</blockquote>\n\n<pre><code>&lt;div class=\"media\"&gt;\n  &lt;div class=\"media-left\"&gt;\n    &lt;%= image_tag(comment.user.avatar.small.url, class: \"media-object\") if comment.user.avatar? %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"media-body\"&gt;\n    &lt;small&gt;\n      &lt;%= comment.user.name %&gt; commented &lt;%= time_ago_in_words(comment.created_at) %&gt; ago\n      &lt;% if policy(comment).destroy? %&gt;\n        | &lt;%= link_to \"Delete\", [@topic, @post, comment], method: :delete %&gt;\n      &lt;% end %&gt;\n    &lt;/small&gt;\n    &lt;p&gt;&lt;%= comment.body %&gt;&lt;/p&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>My _comment.html.erb before the change:</strong></p>\n\n<pre><code>&lt;% @comments.each do |comment| %&gt;\n\n  &lt;p&gt;&lt;%= comment.body %&gt;&lt;/p&gt;\n  &lt;p&gt;&lt;i&gt;&lt;%= comment.user.name %&gt;&lt;/i&gt;&lt;/p&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>After modifying the code as instructed I receive this error:</p>\n\n<blockquote>\n  <p><strong>NoMethodError at /topics/4/posts/11 undefined method `avatar?' for\n  nil:NilClass</strong></p>\n</blockquote>\n\n<p>With this line highlighted:</p>\n\n<pre><code>&lt;%= image_tag(comment.user.avatar.small.url, class: \"media-object\") if comment.user.avatar? %&gt;\n</code></pre>\n\n<p>Here is my <strong>views/post/show.html.erb:</strong></p>\n\n<pre><code>&lt;h1&gt;&lt;%= markdown_to_html @post.title %&gt;&lt;/h1&gt;\n\n&lt;div class=\"row\"&gt;\n  &lt;div class=\"col-md-8\"&gt;\n    &lt;small&gt;\n      &lt;%= image_tag(@post.user.avatar.tiny.url) if @post.user.avatar? %&gt;\n      submitted &lt;%= time_ago_in_words(@post.created_at) %&gt; ago by\n      &lt;%= @post.user.name %&gt;\n    &lt;/small&gt;\n    &lt;p&gt;&lt;%= markdown_to_html @post.body %&gt;&lt;/p&gt;\n    &lt;p&gt;&lt;%= image_tag(@post.image.post.url) if @post.image? %&gt;\n\n    &lt;h1&gt;Comments&lt;/h1&gt;\n    &lt;!-- render the comments loop --&gt;\n    &lt;%= render partial: 'comments/comment', locals: { topic: @topic, post: @post, comment: @comment } %&gt;\n\n    &lt;!-- render the comments form if user is signed in --&gt;\n    &lt;% if policy(@comment).create? %&gt;\n      &lt;%= render partial: 'comments/form', locals: { topic: @topic, post: @post, comment: @comment } %&gt;\n    &lt;% end %&gt;\n\n  &lt;/div&gt;\n  &lt;div class=\"col-md-4\"&gt;\n    &lt;% if policy(@post).edit? %&gt;\n      &lt;%= link_to \"Edit\", edit_topic_post_path(@topic, @post), class: 'btn btn-success' %&gt;\n    &lt;% end %&gt;\n    &lt;% if policy(@post).destroy? %&gt;\n      &lt;%= link_to \"Delete Post\", [@topic, @post], method: :delete, class: 'btn btn-danger', data: { confirm: 'Are you sure you want to delete this post?' } %&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p><strong>comments controller</strong></p>\n\n<pre><code>class CommentsController &lt; ApplicationController\n  def create\n    # find topic by id\n    @topic = Topic.find(params[:topic_id])\n    # find post id through topic\n    @post = @topic.posts.find(params[:post_id])\n    # comments on post\n    @comments = @post.comments\n\n    @comment = current_user.comments.build(params.require(:comment).permit(:body, :post_id, :avatar))\n    @comment.post = @post\n\n\n    authorize @comment\n    if @comment.save\n      flash[:notice] = \"Comment was created.\"\n      redirect_to [@topic, @post]\n    else\n      flash[:error] = \"Error saving the comment. Please try again.\"\n      # must render the the page calling the form!!\n      render 'posts/show'\n    end\n  end\n\n  def new\n\n  end\n\n  def destroy\n    @topic = Topic.find(params[:topic_id])\n    @post = Post.posts.find(params[:post_id])\n    @comment = @post.comments.find(params[:id])\n\n    authorize @comment\n    if @comment.destroy\n      flash[:notice] = \"Comment was removed.\"\n      redirect_to [@topic, @post]\n    else\n      flash[:error] = \"Comment couldn't be deleted. Try again.\"\n      redirect_to [@topic, @post]\n    end\n  end\nend\n</code></pre>\n\n<p><strong>user model</strong></p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable, :confirmable\n  has_many :posts\n  has_many :comments\n\n  # CarrierWave method for attribute functionality\n  mount_uploader :avatar, AvatarUploader\n\n  # These methods check the role of a user in the database\n  def admin?\n    role == 'admin'\n  end\n\n  def moderator?\n    role == 'moderator'\n  end\nend\n</code></pre>\n\n<p>I have attempted to change my comment.user.avatar.small.url to @comment.user.avatar.small.url based off how the rest of my images were handled in the project. The error still persists.</p>\n\n<p>Best regards.</p>\n"}, {"tags": ["ruby", "authentication", "selenium", "webdriver", "cucumber"], "answers": [{"comments": [{"owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "edited": false, "score": 0, "creation_date": 1431532137, "post_id": 30218728, "comment_id": 48543221, "body": "this one looks like Java to me"}, {"owner": {"reputation": 25363, "user_id": 118228, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f2tOS.jpg?s=128&g=1", "display_name": "djangofan", "link": "https://stackoverflow.com/users/118228/djangofan"}, "reply_to_user": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "edited": false, "score": 0, "creation_date": 1431533947, "post_id": 30218728, "comment_id": 48544429, "body": "I believe a Ruby version of Selenium is available and appears to be up to date with the latest version of Selenium (not Watir) :  <a href=\"https://code.google.com/p/selenium/wiki/RubyBindings\" rel=\"nofollow noreferrer\">code.google.com/p/selenium/wiki/RubyBindings</a>  .   The code would be similar to the Java method."}], "tags": [], "owner": {"reputation": 25363, "user_id": 118228, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f2tOS.jpg?s=128&g=1", "display_name": "djangofan", "link": "https://stackoverflow.com/users/118228/djangofan"}, "is_accepted": false, "score": 4, "last_activity_date": 1580688405, "last_edit_date": 1580688405, "creation_date": 1431529445, "answer_id": 30218728, "question_id": 30218472, "link": "https://stackoverflow.com/questions/30218472/a-basic-authentication-popup-appears-several-times-using-selenium/30218728#30218728", "title": "A &quot;Basic Authentication&quot; popup appears several times using Selenium", "body": "<p>The <strong>authenticateUsing()</strong> method is still currently in beta but I think it will be part of Selenium 3.0, when its finally released. From <a href=\"https://stackoverflow.com/questions/24304752/how-to-handle-authentication-popup-with-selenium-webdriver\">Prashanth Sams's answer</a>:</p>\n\n<blockquote>\n  <p>The Alert Method, authenticateUsing() lets you skip the Http Basic\n  Authentication box.</p>\n\n<pre><code>WebDriverWait wait = new WebDriverWait(driver, 10);\nAlert alert = wait.until(ExpectedConditions.alertIsPresent());\nalert.authenticateUsing(new UserAndPassword(\"USERNAME\", \"PASSWORD\"));\n</code></pre>\n</blockquote>\n"}], "owner": {"reputation": 143, "user_id": 4896290, "user_type": "registered", "accept_rate": 11, "profile_image": "https://lh6.googleusercontent.com/-B0nCNK7qjUo/AAAAAAAAAAI/AAAAAAAABq0/Q8iAk3pf3hg/photo.jpg?sz=128", "display_name": "Vanatomas", "link": "https://stackoverflow.com/users/4896290/vanatomas"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 920, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1580688405, "creation_date": 1431528795, "last_edit_date": 1431529500, "question_id": 30218472, "link": "https://stackoverflow.com/questions/30218472/a-basic-authentication-popup-appears-several-times-using-selenium", "title": "A &quot;Basic Authentication&quot; popup appears several times using Selenium", "body": "<p>I am using Selenium with Ruby. I have to switch between pages that require authentication.\nInitially I push username and password with the url.</p>\n\n<pre><code>http://username:password@site.com/page\n</code></pre>\n\n<p>However, after couple steps, when I am redirected to another page, there is still authentication popup again.</p>\n\n<p>How would I pass username/password again? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "network-programming"], "answers": [{"comments": [{"owner": {"reputation": 221, "user_id": 3652940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8fdbc31da7c85cd3aa31a1105c70a678?s=128&d=identicon&r=PG&f=1", "display_name": "Muktadir", "link": "https://stackoverflow.com/users/3652940/muktadir"}, "edited": false, "score": 0, "creation_date": 1432291621, "post_id": 30218684, "comment_id": 48877018, "body": "Hi davidb, thanks for your answer. It solved my problem. Now one more thing. If I want to make a white list of IP addresses which I want to allow then what can i do?"}, {"owner": {"reputation": 8568, "user_id": 1001324, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/c2SD3.jpg?s=128&g=1", "display_name": "davidb", "link": "https://stackoverflow.com/users/1001324/davidb"}, "reply_to_user": {"reputation": 221, "user_id": 3652940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8fdbc31da7c85cd3aa31a1105c70a678?s=128&d=identicon&r=PG&f=1", "display_name": "Muktadir", "link": "https://stackoverflow.com/users/3652940/muktadir"}, "edited": false, "score": 0, "creation_date": 1432292143, "post_id": 30218684, "comment_id": 48877371, "body": "I added whitelisting to my code of cause you have to replace <code>[123.43.65.1, 123.43.65.77]</code> with your whitelist array."}, {"owner": {"reputation": 221, "user_id": 3652940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8fdbc31da7c85cd3aa31a1105c70a678?s=128&d=identicon&r=PG&f=1", "display_name": "Muktadir", "link": "https://stackoverflow.com/users/3652940/muktadir"}, "edited": false, "score": 0, "creation_date": 1432294698, "post_id": 30218684, "comment_id": 48879009, "body": "Thank you so much. :D I can store white listed IP in the database and check it in to the whitelisted?(ip) method. am I right?"}], "tags": [], "owner": {"reputation": 8568, "user_id": 1001324, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/c2SD3.jpg?s=128&g=1", "display_name": "davidb", "link": "https://stackoverflow.com/users/1001324/davidb"}, "is_accepted": true, "score": 2, "last_activity_date": 1432292113, "last_edit_date": 1432292113, "creation_date": 1431529348, "answer_id": 30218684, "question_id": 30218460, "link": "https://stackoverflow.com/questions/30218460/restricting-access-to-rails-app-based-on-ip-address/30218684#30218684", "title": "Restricting Access to Rails App based on IP-Address", "body": "<p>In your <code>ApplicationController</code> add this:</p>\n\n<pre><code>before_filter :block_foreign_hosts\n\ndef whitelisted?(ip)\n  return true if [123.43.65.1, 123.43.65.77].include?(ip)\n  false\nend\n\ndef block_foreign_hosts\n  return false if whitelisted?(request.remote_ip)\n  redirect_to \"https://www.google.com\" unless request.remote_ip.start_with?(\"123.456.789\")\nend\n</code></pre>\n\n<p>Of cause you have to replace the IP-Network I used in this example with the one you want to have access.</p>\n"}], "owner": {"reputation": 221, "user_id": 3652940, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/8fdbc31da7c85cd3aa31a1105c70a678?s=128&d=identicon&r=PG&f=1", "display_name": "Muktadir", "link": "https://stackoverflow.com/users/3652940/muktadir"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2393, "favorite_count": 0, "accepted_answer_id": 30218684, "answer_count": 1, "score": 1, "last_activity_date": 1432292113, "creation_date": 1431528764, "last_edit_date": 1431731583, "question_id": 30218460, "link": "https://stackoverflow.com/questions/30218460/restricting-access-to-rails-app-based-on-ip-address", "title": "Restricting Access to Rails App based on IP-Address", "body": "<p>I want to make an application that will be accessible only from a specific network connection. More clearly, it will be a attendance application. Users can only check in from a specific network connection. If they are connected with other network, they can not able to check in.\nHow can I do it in Ruby on Rails. Please give me some idea. Actually I need to know that how to detect a specific network connection? </p>\n\n<p>Thanks in advance.  </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "gem", "linkedin"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 1, "creation_date": 1431528822, "post_id": 30218404, "comment_id": 48540714, "body": "I don&#39;t see any method <code>company_search</code> documented in the gem"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1431529422, "post_id": 30218404, "comment_id": 48541235, "body": "If you want to use it for your own use <code>gem &#39;linkedin-oauth2&#39;, git: &#39;emorikawa&#47;linkedin-oauth2&#39;, branch: &#39;master&#39;</code> in your Gemfile then bundle install"}], "answers": [{"tags": [], "owner": {"reputation": 226, "user_id": 4895480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQQfL.jpg?s=128&g=1", "display_name": "alexandrine_greenfelder", "link": "https://stackoverflow.com/users/4895480/alexandrine-greenfelder"}, "is_accepted": false, "score": 2, "last_activity_date": 1431530271, "last_edit_date": 1431530271, "creation_date": 1431529087, "answer_id": 30218596, "question_id": 30218404, "link": "https://stackoverflow.com/questions/30218404/undefined-method-company-search-for-linkedin-api-with-linkedin-oauth2-gem/30218596#30218596", "title": "undefined method `company_search&#39; for LinkedIn API with linkedin-oauth2 gem", "body": "<p>Seems like you an using old version of this gem. This method was <a href=\"https://github.com/emorikawa/linkedin-oauth2/commit/96aefd5696b1c075197e99c88e629019435a4710\" rel=\"nofollow\">added</a> in March 2015 and this gem is not released yet.</p>\n\n<p>So, you should use latest version of gem from <code>master</code>:</p>\n\n<pre><code>gem 'linkedin-oauth2', github: 'emorikawa/linkedin-oauth2', branch: 'master' \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "is_accepted": true, "score": 3, "last_activity_date": 1431529659, "creation_date": 1431529659, "answer_id": 30218803, "question_id": 30218404, "link": "https://stackoverflow.com/questions/30218404/undefined-method-company-search-for-linkedin-api-with-linkedin-oauth2-gem/30218803#30218803", "title": "undefined method `company_search&#39; for LinkedIn API with linkedin-oauth2 gem", "body": "<p>If you want to use the method(<code>company_search</code>) for your own use </p>\n\n<pre><code>gem 'linkedin-oauth2', github: 'emorikawa/linkedin-oauth2', branch: 'master' \n</code></pre>\n\n<p>in your  <code>Gemfile</code> then <code>bundle install</code></p>\n\n<p>but use a stable version of the gem as recomended</p>\n"}], "owner": {"reputation": 647, "user_id": 660942, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/eEMKd.jpg?s=128&g=1", "display_name": "Adri&#224; Carro", "link": "https://stackoverflow.com/users/660942/adri%c3%a0-carro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 122, "favorite_count": 0, "accepted_answer_id": 30218803, "answer_count": 2, "score": 0, "last_activity_date": 1431530271, "creation_date": 1431528634, "question_id": 30218404, "link": "https://stackoverflow.com/questions/30218404/undefined-method-company-search-for-linkedin-api-with-linkedin-oauth2-gem", "title": "undefined method `company_search&#39; for LinkedIn API with linkedin-oauth2 gem", "body": "<p>I want to search companies with LinkedIn API in a Ruby on Rails project. </p>\n\n<p>I use linkedin-oauth2 gem to do this but when I try any company search, I have this error.</p>\n\n<pre><code>undefined method `company_search' for #&lt;LinkedIn::API:0x007f88aad68bb8&gt;\n</code></pre>\n\n<p>This is my code:</p>\n\n<pre><code>api = LinkedIn::API.new(access_token)\n@companies = api.company_search(\n    keyword: \"technologies\", \n    facets: \"location,industry\", \n    facet: [\"location,us\",\"industry,4\"], \n    start: 0, \n    count: 1000000\n)\n</code></pre>\n"}, {"tags": ["ruby", "macos"], "answers": [{"comments": [{"owner": {"reputation": 976, "user_id": 2059156, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/63cd1ed57348618c6514545a8f53ece2?s=128&d=identicon&r=PG", "display_name": "John Cowan", "link": "https://stackoverflow.com/users/2059156/john-cowan"}, "edited": false, "score": 0, "creation_date": 1431529988, "post_id": 30218487, "comment_id": 48541666, "body": "Thanks,  You are saying to run &gt;&gt; gem install  (?).  Do I need to do this generically or for each ruby version inside rvm?"}, {"owner": {"reputation": 226, "user_id": 4895480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQQfL.jpg?s=128&g=1", "display_name": "alexandrine_greenfelder", "link": "https://stackoverflow.com/users/4895480/alexandrine-greenfelder"}, "reply_to_user": {"reputation": 976, "user_id": 2059156, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/63cd1ed57348618c6514545a8f53ece2?s=128&d=identicon&r=PG", "display_name": "John Cowan", "link": "https://stackoverflow.com/users/2059156/john-cowan"}, "edited": false, "score": 0, "creation_date": 1431530205, "post_id": 30218487, "comment_id": 48541822, "body": "Just try to uninstall and install this gem. For any case you can do it for each ruby version but this is not required because RVM using different gemsets for different ruby versions. I think you problem can be related to shared gems i.e. installed to <code>vendor&#47;bundle</code> or in system gemset."}, {"owner": {"reputation": 976, "user_id": 2059156, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/63cd1ed57348618c6514545a8f53ece2?s=128&d=identicon&r=PG", "display_name": "John Cowan", "link": "https://stackoverflow.com/users/2059156/john-cowan"}, "edited": false, "score": 0, "creation_date": 1431562144, "post_id": 30218487, "comment_id": 48558151, "body": "curl -L get.rvm.io | bash -s stable rvm install ruby 2.0.0"}, {"owner": {"reputation": 976, "user_id": 2059156, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/63cd1ed57348618c6514545a8f53ece2?s=128&d=identicon&r=PG", "display_name": "John Cowan", "link": "https://stackoverflow.com/users/2059156/john-cowan"}, "edited": false, "score": 0, "creation_date": 1431562272, "post_id": 30218487, "comment_id": 48558188, "body": "The last comment is two commands the seems to have worked.  I updated my rvm and then did rvm install ruby 2.0.0.  Just trying to do a reinstall of 2.0.0 would not connect to the url for downloading the gem zip.  I guess updating rvm did the trick to allow it to work."}], "tags": [], "owner": {"reputation": 226, "user_id": 4895480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQQfL.jpg?s=128&g=1", "display_name": "alexandrine_greenfelder", "link": "https://stackoverflow.com/users/4895480/alexandrine-greenfelder"}, "is_accepted": true, "score": 1, "last_activity_date": 1431528823, "creation_date": 1431528823, "answer_id": 30218487, "question_id": 30218271, "link": "https://stackoverflow.com/questions/30218271/bug-in-ruby-interpretor/30218487#30218487", "title": "Bug In Ruby Interpretor", "body": "<p>You should re-install gem because it have native extension which usually related to correspond ruby version used during compilation of it. In some configurations (i.e. when you use <code>vendor/bundle</code> directory for store application gems) when you switching between ruby versions you can still use the gem installed with other ruby version.</p>\n"}], "owner": {"reputation": 976, "user_id": 2059156, "user_type": "registered", "accept_rate": 37, "profile_image": "https://www.gravatar.com/avatar/63cd1ed57348618c6514545a8f53ece2?s=128&d=identicon&r=PG", "display_name": "John Cowan", "link": "https://stackoverflow.com/users/2059156/john-cowan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 508, "favorite_count": 0, "accepted_answer_id": 30218487, "answer_count": 1, "score": 0, "last_activity_date": 1431528823, "creation_date": 1431528310, "question_id": 30218271, "link": "https://stackoverflow.com/questions/30218271/bug-in-ruby-interpretor", "title": "Bug In Ruby Interpretor", "body": "<p>I am having a problem on my macbook pro when I run certain terminal commands.  It seems to be tied to Ruby.  I am on Yosemite 10.10.3.  </p>\n\n<p>I am using RVM for my ruby/rails stuff. Today I tried to run a 'sass watch' while working on some Foundation learning stuff.  When I run the command and I get the following:</p>\n\n<pre><code>dhcp-uris-3626:foundation johndcowan$ sass --watch\nruby(3631,0x7fff7d721300) malloc: *** error for object 0x7faac2801808: incorrect checksum for freed object - object was probably modified after being freed.\n*** set a breakpoint in malloc_error_break to debug\nAbort trap: 6\n</code></pre>\n\n<p>When running the same sass --watch command on a subsequent time, I got a bit more info:</p>\n\n<pre><code>dhcp-uris-3626:foundation johndcowan$ sass --watch\n[BUG] Segmentation fault\nruby 1.9.2p318 (2012-02-14 revision 34678) [x86_64-darwin11.3.0]\n\n-- control frame ----------\nc:0001 p:---- s:0002 b:0002 l:000001 d:000001 TOP   \n---------------------------\n\n-- C level backtrace information -------------------------------------------\n\n[NOTE]\nYou may have encountered a bug in the Ruby interpreter or extension libraries.\nBug reports are welcome.\nFor details: http://www.ruby-lang.org/bugreport.html\n\nAbort trap: 6\n</code></pre>\n\n<p>I was using ruby-2.0.0-p247.  I tried switching to ruby-1.9.2-p318 and running >> gem install sass.  That also bombs when running sass --watch.  When I switched to using ruby-1.9.3-p125 and ran gem install sass, everything works fine.   Go figure.</p>\n\n<p>I tried updating RVM, to no help.</p>\n\n<p>I do not know how to fix the problem I am seeing and am hoping someone here can assist me.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "edited": false, "score": 0, "creation_date": 1431528140, "post_id": 30218111, "comment_id": 48540186, "body": "Okay, thanks @meager . It was worth asking :) I&#39;ll accept your answer when SO lets me."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 0, "last_activity_date": 1431527925, "creation_date": 1431527925, "answer_id": 30218111, "question_id": 30218055, "link": "https://stackoverflow.com/questions/30218055/ruby-reset-and-attribute-thats-not-associated-with-activerecord/30218111#30218111", "title": "Ruby - reset and attribute that&#39;s not associated with ActiveRecord", "body": "<p>No. You need to write the code. Ruby has no concept of \"resetting\" an attribute.</p>\n\n<p>What ever <code>#code</code> is, you can move it to a method and invoke that method in <code>initialize</code>, and then define a <code>reset</code> that does the same thing.</p>\n\n<pre><code>class MyClass\n\n  def initialize\n    reset\n  end\n\n  def reset\n    reset_name\n  end\n\n  private\n\n  def reset_name\n    @name = #code\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 30218111, "answer_count": 1, "score": 0, "last_activity_date": 1431527925, "creation_date": 1431527781, "question_id": 30218055, "link": "https://stackoverflow.com/questions/30218055/ruby-reset-and-attribute-thats-not-associated-with-activerecord", "title": "Ruby - reset and attribute that&#39;s not associated with ActiveRecord", "body": "<p>I have an attribute called <code>name</code>, complete with <code>attr_accessor</code> and I'm setting it's value in <code>initialize</code> :</p>\n\n<pre><code>def initialize\n  @name = #code\nend\n</code></pre>\n\n<p>I need to implement a reset method that resets the value of <code>@name</code>. The only way I can think of to do this is by using the exact same code I use in <code>initialize</code>. I've tried to look up a way of doing this but every method I've seen (eg <code>reload</code>) is only available for objects associated with ActiveRecord. Is there any way I can avoid the repetition of using the same code in two methods?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssl"], "answers": [{"comments": [{"owner": {"reputation": 1225, "user_id": 252543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6e5baaa4fc91b0b6e4b6b5c3db0531?s=128&d=identicon&r=PG", "display_name": "Nikolai", "link": "https://stackoverflow.com/users/252543/nikolai"}, "edited": false, "score": 0, "creation_date": 1431581505, "post_id": 30219145, "comment_id": 48563019, "body": "I&#39;ve seen the example, but I&#39;m not writing SSL client by myself. I&#39;m asking if there is a way to configure default key + cert for every SSL client in the Rails application."}], "tags": [], "owner": {"reputation": 3629, "user_id": 379639, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/4fa63505dd4dd4691b87d30508b1bfd3?s=128&d=identicon&r=PG", "display_name": "Xavier Shay", "link": "https://stackoverflow.com/users/379639/xavier-shay"}, "is_accepted": false, "score": 1, "last_activity_date": 1431530572, "creation_date": 1431530572, "answer_id": 30219145, "question_id": 30217688, "link": "https://stackoverflow.com/questions/30217688/how-to-configure-private-key-for-ssl-client-in-ruby-on-rails-application/30219145#30219145", "title": "How to configure private key for SSL client in Ruby on Rails application", "body": "<p>Use the <code>cert</code> and <code>key</code> options:</p>\n\n<pre><code>require \"net/https\"\nrequire \"uri\"\n\nuri = URI.parse(\"https://secure.com/\")\npem = File.read(\"/path/to/my.pem\")\nhttp = Net::HTTP.new(uri.host, uri.port)\nhttp.use_ssl = true\nhttp.cert = OpenSSL::X509::Certificate.new(pem)\nhttp.key = OpenSSL::PKey::RSA.new(pem)\nhttp.verify_mode = OpenSSL::SSL::VERIFY_PEER\n\nrequest = Net::HTTP::Get.new(uri.request_uri)\n</code></pre>\n\n<p>From <a href=\"http://www.rubyinside.com/nethttp-cheat-sheet-2940.html\" rel=\"nofollow\">http://www.rubyinside.com/nethttp-cheat-sheet-2940.html</a></p>\n"}], "owner": {"reputation": 1225, "user_id": 252543, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c6e5baaa4fc91b0b6e4b6b5c3db0531?s=128&d=identicon&r=PG", "display_name": "Nikolai", "link": "https://stackoverflow.com/users/252543/nikolai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 664, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431530572, "creation_date": 1431526919, "question_id": 30217688, "link": "https://stackoverflow.com/questions/30217688/how-to-configure-private-key-for-ssl-client-in-ruby-on-rails-application", "title": "How to configure private key for SSL client in Ruby on Rails application", "body": "<p>I need to debug OpenID authentication flow between Rails application and OpenID provider going over SSL. I want to configure Rails and wireshark with the same private key for SSL flow decryption.</p>\n\n<p>I need to know if there is configuration option in Rails to force use private key for the SSL client.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "boolean", "update-attributes", "simple-form-for"], "comments": [{"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1431526933, "post_id": 30217623, "comment_id": 48539166, "body": "is there an error occurring or is the attribute field just not saving?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1431527471, "post_id": 30217623, "comment_id": 48539586, "body": "No errors, though nothing that seems to show in console relating to this during the patch request.... nothing that I can see that indicates why this is getting lost."}, {"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1431527775, "post_id": 30217623, "comment_id": 48539872, "body": "and current_user is the same user as @user? is there a reason you&#39;re using @user and current_user instead of using one"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1431528374, "post_id": 30217623, "comment_id": 48540380, "body": "Yep, 100% the same. current_user went in as a debug - I&#39;ll swap it back for clarity&#39;s sake."}, {"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1431528930, "post_id": 30217623, "comment_id": 48540810, "body": "The only thing left i can think of is to check if user.valid? after the toggle or use current_user.update!(...) to make it show you an error if one is there."}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "reply_to_user": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "edited": false, "score": 0, "creation_date": 1431529503, "post_id": 30217623, "comment_id": 48541300, "body": "Well I&#39;ve got it working, though I&#39;m afraid it wasn&#39;t through changing the code. I&#39;ve restarted my comp, cleared my cookies and it&#39;s kicked into life. Thanks for all the help with this - shame to go without a clear explanation!!"}], "answers": [{"comments": [{"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1431527416, "post_id": 30217750, "comment_id": 48539539, "body": "Ah - good spot. Unfortunately just a typo in this question and not the solution to my woes. Thanks @PhilVarg"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1431528435, "post_id": 30217750, "comment_id": 48540426, "body": "Thanks for the suggestion, nothing has seemed to work though - setting this as you&#39;ve suggested in the edit, <code>update_attributes(questionnaire_complete: true)</code>, setting it in the view as a hack.... I&#39;ve added an edit above though - do you think the nested attributes could be an issue?"}, {"owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 0, "creation_date": 1431528509, "post_id": 30217750, "comment_id": 48540491, "body": "Oh and the page can&#39;t be visited once questionnaire_complete is true, so the validations aren&#39;t an issue here"}, {"owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "reply_to_user": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "edited": false, "score": 1, "creation_date": 1431528760, "post_id": 30217750, "comment_id": 48540662, "body": "I didnt mean to set update_attributes in the view or the edit route, i meant replacing toggle with update_attributes in the update route."}], "tags": [], "owner": {"reputation": 4543, "user_id": 3213605, "user_type": "registered", "accept_rate": 36, "profile_image": "https://i.stack.imgur.com/a2HS8.jpg?s=128&g=1", "display_name": "PhilVarg", "link": "https://stackoverflow.com/users/3213605/philvarg"}, "is_accepted": false, "score": 2, "last_activity_date": 1431528771, "last_edit_date": 1431528771, "creation_date": 1431527101, "answer_id": 30217750, "question_id": 30217623, "link": "https://stackoverflow.com/questions/30217623/rails-backend-boolean-toggle-not-working/30217750#30217750", "title": "Rails backend boolean toggle! not working", "body": "<p>It look like you just have a typo</p>\n\n<pre><code>current_user.toggle!(:questionnaire_submitted)\n</code></pre>\n\n<p>in your original post you say users have a <code>questionaire_submitted</code> field but in your controller youre calling it <code>questionnaire_complete</code></p>\n\n<p>EDIT:<br>\nIf it's continuing to give you a headache, you can just directly toggle the attribute yourself. </p>\n\n<pre><code>current_user.update(questionnaire_complete: !current_user.questionaire_complete)\n</code></pre>\n\n<p>In fact, I'd recommend this since it appears <a href=\"http://apidock.com/rails/ActiveRecord/Base/toggle!\" rel=\"nofollow\"><code>#toggle!</code></a> skips validations. although it's also noteworthy that since you're toggling this, if the user enters this route again (and <code>form_reached</code> is true), you'll be setting <code>questionnaire_complete</code> to false, which (without any additional information of what you're trying to accomplish) seems an odd thing to do (as opposed to just setting it to true).</p>\n"}], "owner": {"reputation": 8640, "user_id": 4055042, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/cd04c63d95d27033b53d4d83fea40c02?s=128&d=identicon&r=PG&f=1", "display_name": "SRack", "link": "https://stackoverflow.com/users/4055042/srack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 438, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431528771, "creation_date": 1431526760, "last_edit_date": 1431528342, "question_id": 30217623, "link": "https://stackoverflow.com/questions/30217623/rails-backend-boolean-toggle-not-working", "title": "Rails backend boolean toggle! not working", "body": "<p>I'm trying to update a boolean through an update action in Rails, though can't for the life of me get it working.</p>\n\n<p>My <code>Users</code> have a <code>questionnaire_complete</code> boolean field that defaults to false. When they update their questionnaire (to submit it - it's created elsewhere) I'm telling the controller to toggle this to true, to save them being able to resubmit elsewhere.</p>\n\n<pre><code>def update\n  if @user.form_reached # Another boolean used for path control - which works perfectly with the same toggle!\n    current_user.toggle!(:questionnaire_complete) # The failing line\n    SomeMailer.submission_confirmation(@user).deliver_now\n    redirect_to user_answer_path(@user), notice: \"Thank you for submitting your form\"\n  end\nend\n</code></pre>\n\n<p>I know most of this is being implemented as the Mailer sends and the redirect / notice work exactly as they should. The only thing missing is (crucially) the toggle.</p>\n\n<p>The form itself is a straightforward <code>simple_form_for @user</code> which updates the attributes exactly as it should.</p>\n\n<p>It's just the toggle. It's killing me. Any advice warmly received :)</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I've changed this to drop a hidden field into the form so I can inspect the params more closely. I've a feeling it might be as I'm also updating nested attributes in the form as the params look exactly as they should using this approach:</p>\n\n<p>Form:</p>\n\n<pre><code>&lt;%= simple_form_for @user do |user| %&gt;\n  &lt;%= user.input :questionnaire_complete, :as =&gt; :hidden, :input_html =&gt; { :value =&gt; true } %&gt;\n  &lt;%= user.simple_fields_for :user_answers do |user_answer| %&gt;\n     &lt;li&gt;\n      &lt;%= user_answer.text_field :answer %&gt;&lt;/br&gt;\n      &lt;/li&gt;\n  &lt;% end %&gt;\n  &lt;%= user.submit %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>Params:</p>\n\n<pre><code>\"user\"=&gt;{\"questionnaire_complete\"=&gt;\"true\", \"user_answers_attributes\"=&gt;{\"0\"=&gt;{\"answer\"=&gt;\"example\", \"id\"=&gt;\"194\"}...}\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 1, "creation_date": 1431525902, "post_id": 30217204, "comment_id": 48538268, "body": "Instead of <code>form_for :article, url: articles_path</code> you can do <code>form_for @article</code>"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431526267, "post_id": 30217204, "comment_id": 48538552, "body": "@SergioTulentsev The code is as-written in the Rails Guides, it&#39;s just copy-pasted."}, {"owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "edited": false, "score": 2, "creation_date": 1431526332, "post_id": 30217204, "comment_id": 48538605, "body": "It looks like that you have copy pasted the code in wrong place, I dont think there is an issue with guide. even right before this code it says &quot;Open the <code>app&#47;models&#47;article.rb</code> file and edit it:&quot;"}], "answers": [{"comments": [{"owner": {"reputation": 14140, "user_id": 1188035, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/da4b6c80f86359463b47f42cfe307356?s=128&d=identicon&r=PG", "display_name": "sjagr", "link": "https://stackoverflow.com/users/1188035/sjagr"}, "edited": false, "score": 1, "creation_date": 1431525995, "post_id": 30217278, "comment_id": 48538342, "body": "Beat me to it - I was staring at the model in disbelief and since I&#39;m so new at rails I wanted to check my own code before answering the same lol"}, {"owner": {"reputation": 3267, "user_id": 2504101, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75c9bcffb1d737334bafee0790b2b5ab?s=128&d=identicon&r=PG", "display_name": "olyv", "link": "https://stackoverflow.com/users/2504101/olyv"}, "edited": false, "score": 2, "creation_date": 1431526375, "post_id": 30217278, "comment_id": 48538644, "body": "What a silly mistake! I used model class instead of controller. Oh my gosh. Of course, I moved code to the right place and now it&#39;s just fine."}], "tags": [], "owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "is_accepted": true, "score": 7, "last_activity_date": 1431526172, "last_edit_date": 1431526172, "creation_date": 1431525910, "answer_id": 30217278, "question_id": 30217204, "link": "https://stackoverflow.com/questions/30217204/undefined-method-errors-for-nilnilclass-in-app-views-articles-new-html-erb/30217278#30217278", "title": "undefined method `errors&#39; for nil:NilClass in app/views/articles/new.html.erb", "body": "<p>Your model and controller are all meshed together into one class. That cannot work.</p>\n\n<p>You need <strong>two</strong> classes:</p>\n\n<ul>\n<li>A model called <code>Article</code> which inherits from <code>ActiveRecord::Base</code></li>\n<li>A controller called <code>ArticlesController</code> which inherits from <code>ApplicationController</code></li>\n</ul>\n\n<p>The code you've posted is the model, but the actions you've added (<code>new</code> and <code>create</code>) need to go in the <strong>controller</strong>.</p>\n\n<p>The guide you're following says (note the file names):</p>\n\n<blockquote>\n  <p>Rails includes methods to help you validate the data that you send to models. Open the <strong>app/models/article.rb</strong> file and edit it:</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n    validates :title, presence: true,\n             length: { minimum: 5 }\nend\n</code></pre>\n</blockquote>\n\n<p>And the below that,</p>\n\n<blockquote>\n  <p>... to do this, change the new and create actions inside <strong>app/controllers/articles_controller.rb</strong> to these:</p>\n\n<pre><code>def new\n  @article = Article.new\nend\n\ndef create\n  @article = Article.new(article_params)\n\n  # ...\n</code></pre>\n</blockquote>\n"}, {"tags": [], "owner": {"reputation": 1713, "user_id": 2545197, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/zIDXo.jpg?s=128&g=1", "display_name": "Abhinay", "link": "https://stackoverflow.com/users/2545197/abhinay"}, "is_accepted": false, "score": 0, "last_activity_date": 1431526045, "creation_date": 1431526045, "answer_id": 30217332, "question_id": 30217204, "link": "https://stackoverflow.com/questions/30217204/undefined-method-errors-for-nilnilclass-in-app-views-articles-new-html-erb/30217332#30217332", "title": "undefined method `errors&#39; for nil:NilClass in app/views/articles/new.html.erb", "body": "<p>validate part should reside in Modal which is Article &lt; ActiveRecord::Base. and rest of your code should be Article controller</p>\n"}, {"tags": [], "owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1431526185, "creation_date": 1431526185, "answer_id": 30217397, "question_id": 30217204, "link": "https://stackoverflow.com/questions/30217204/undefined-method-errors-for-nilnilclass-in-app-views-articles-new-html-erb/30217397#30217397", "title": "undefined method `errors&#39; for nil:NilClass in app/views/articles/new.html.erb", "body": "<p>You have to put your validation in your model as :</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n  validates :title, presence: true, length: { minimum: 5 }\nend\n</code></pre>\n\n<p>And your actions should be in controller as :</p>\n\n<pre><code>class ArticlesController &lt; ApplicationController\n\n  def new\n    @article = Article.new\n  end\n\n  def create\n    @article = Article.new(article_params)\n    if @article.save\n       redirect_to @article\n    else\n       render 'new'\n    end\n  end\n\n  private\n   def article_params\n     params.require(:article).permit(:title, :text)\n   end\n\n\nend\n</code></pre>\n\n<p>And at last change you form as: </p>\n\n<pre><code>&lt;%= form_for @article do |f| %&gt;\n</code></pre>\n"}], "owner": {"reputation": 3267, "user_id": 2504101, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/75c9bcffb1d737334bafee0790b2b5ab?s=128&d=identicon&r=PG", "display_name": "olyv", "link": "https://stackoverflow.com/users/2504101/olyv"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1648, "favorite_count": 0, "accepted_answer_id": 30217278, "answer_count": 3, "score": 1, "last_activity_date": 1431528016, "creation_date": 1431525737, "question_id": 30217204, "link": "https://stackoverflow.com/questions/30217204/undefined-method-errors-for-nilnilclass-in-app-views-articles-new-html-erb", "title": "undefined method `errors&#39; for nil:NilClass in app/views/articles/new.html.erb", "body": "<p>I am following <a href=\"http://guides.rubyonrails.org/getting_started.html\" rel=\"nofollow\">http://guides.rubyonrails.org/getting_started.html</a> and trying to add validation to text field. My class:</p>\n\n<pre><code>class Article &lt; ActiveRecord::Base\n\n    validates :title, presence: true, length: { minimum: 5 }\n\n    def new\n      @article = Article.new\n    end\n\n    def create\n    @article = Article.new(article_params)\n\n      if @article.save\n        redirect_to @article\n      else\n        render 'new'\n        end\n    end\n\n    private\n    def article_params\n        params.require(:article).permit(:title, :text)\n    end\n\nend\n</code></pre>\n\n<p>My new.html.erb file:</p>\n\n<pre><code>&lt;%= form_for :article, url: articles_path do |f| %&gt;\n\n  &lt;% if @article.errors.any? %&gt;\n    &lt;div id=\"error_explanation\"&gt;\n      &lt;h2&gt;\n        &lt;%= pluralize(@article.errors.count, \"error\") %&gt; prohibited\n        this article from being saved:\n      &lt;/h2&gt;\n      &lt;ul&gt;\n        &lt;% @article.errors.full_messages.each do |msg| %&gt;\n          &lt;li&gt;&lt;%= msg %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :title %&gt;&lt;br&gt;\n    &lt;%= f.text_field :title %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.label :text %&gt;&lt;br&gt;\n    &lt;%= f.text_area :text %&gt;\n  &lt;/p&gt;\n\n  &lt;p&gt;\n    &lt;%= f.submit %&gt;\n  &lt;/p&gt;\n\n&lt;% end %&gt;\n</code></pre>\n\n<p>And when I try to add new article I open <a href=\"http://localhost:3000/articles/new\" rel=\"nofollow\">http://localhost:3000/articles/new</a> but instead of the form I see error <code>undefined method errors' for nil:NilClass</code> because of the error in this line <code>&lt;% if @article.errors.any? %&gt;</code> </p>\n\n<p>What am I missing here. Looks like <code>@article</code> is being validated before created? How can I fix it?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1431526611, "post_id": 30217203, "comment_id": 48538860, "body": "have you tried using <code>.compact</code> ?"}, {"owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1431526777, "post_id": 30217203, "comment_id": 48539008, "body": "@cyzanfar Where? at model or in the view? I tried on both model and view, it says undefined_method &#39;compact&#39; for nil values."}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1431526838, "post_id": 30217203, "comment_id": 48539062, "body": "I would do it in the model"}, {"owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1431527411, "post_id": 30217203, "comment_id": 48539535, "body": "@cyzanfar I got undefined method &#39;compact&#39; for nil:NilClass :-("}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1431527466, "post_id": 30217203, "comment_id": 48539575, "body": "wha are you calling <code>.compact</code> on?"}, {"owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "reply_to_user": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1431527542, "post_id": 30217203, "comment_id": 48539645, "body": "@cyzanfar I did <code>old_age.compact</code>. Is it wrong?"}, {"owner": {"reputation": 6178, "user_id": 3307520, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/jWlYC.jpg?s=128&g=1", "display_name": "Cyzanfar", "link": "https://stackoverflow.com/users/3307520/cyzanfar"}, "edited": false, "score": 0, "creation_date": 1431527705, "post_id": 30217203, "comment_id": 48539803, "body": "Have you tried <code>age_values.old_age.compact</code>? Seems like old_age is <code>nil</code>"}], "answers": [{"comments": [{"owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "edited": false, "score": 0, "creation_date": 1431531908, "post_id": 30219331, "comment_id": 48543063, "body": "Thanks @smathy, But My code is bit complicated. Its already having some methods in it. Is it anywhere that we can get the results by changing the model not in the view?"}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "reply_to_user": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "edited": false, "score": 0, "creation_date": 1431532080, "post_id": 30219331, "comment_id": 48543184, "body": "My response is the update I&#39;ve just made to my answer. There&#39;s really nothing I can do to help this code."}, {"owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "edited": false, "score": 0, "creation_date": 1431532202, "post_id": 30219331, "comment_id": 48543271, "body": "Sorry for the typos. Everything I just write it up. My code is working fine. I dont want to copy and paste the real codes. That&#39;s why I wrote everything as an example and I made lot of typos. I just need to change in the model to make this work."}, {"owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "reply_to_user": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "edited": false, "score": 0, "creation_date": 1431532513, "post_id": 30219331, "comment_id": 48543504, "body": "That&#39;s a really bad way to ask a question here on SO, and makes it virtually impossible to help you (and extremely frustrating for people who try), please read <a href=\"http://stackoverflow.com/help/mcve\">How to create a Minimal, Complete, and Verifiable example</a> so you can ask great questions next time. For this time, I&#39;ve given you the answer to the question that you asked, my solution <b>is</b> how to skip null values in your <code>collection_select</code>."}], "tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": true, "score": 2, "last_activity_date": 1431629407, "last_edit_date": 1431629407, "creation_date": 1431531076, "answer_id": 30219331, "question_id": 30217203, "link": "https://stackoverflow.com/questions/30217203/rails-collection-select-skip-null-values/30219331#30219331", "title": "rails collection_select skip null values?", "body": "<p>First, make the method in your <code>AgeValue</code> model into a <code>scope</code> (basically a class method, so it can be called on the class itself):</p>\n\n<pre><code>class AgeValue &lt; ActiveRecord::Base\n  scope :old_ages, -&gt; { where.not old_age: nil }\n\n  # ... other model stuff\nend\n</code></pre>\n\n<p>And then use that in your view:</p>\n\n<pre><code>f.collection_select :age_value_id, AgeValue.old_ages, :id, :old_age\n</code></pre>\n\n<p>Done.</p>\n\n<h3>Update</h3>\n\n<p>Btw, there are many things wrong with your code that I didn't mention, but that will trip you up:</p>\n\n<ol>\n<li>Your <code>self.table_name</code> assignment doesn't close the single quote.</li>\n<li>Your <code>self.primary_key</code> assignment is the same.</li>\n<li>Neither of those are actually required, because both are the default values ActiveRecord would set anyway.</li>\n<li><code>&lt;% if some_condition = 1 %&gt;</code> will always be <code>true</code> because it's an assignment (using <code>=</code>) not a boolean test (using <code>==</code>)</li>\n<li><code>&lt;% age = to_s %&gt;</code> <code>to_s</code> here is being called on the implicit <code>self</code> which will be some weird view instance.</li>\n<li>Even if you called it on the model (eg. <code>@age_value.to_s</code>) it will return you the <strong>value</strong> of <code>kids_age</code> not the label <code>:kids_age</code> so when you use it in <code>f.collection_select</code> as you seem to be, then Rails won't be able to call that method anyway.</li>\n<li>That doesn't even matter because <code>collection_select</code> expects the name of the field it's assigning to first, then the collection, then the value method and then the text/display method, so four args - you seem to have missed an arg and so nothing will be called correctly anyway.</li>\n</ol>\n\n<p>So, in summary, this code is never going to work and has so many serious problems that I don't believe it's actually working as you've pasted it, but even with typos fixed it still has serious issues.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 10176032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/3eb47119b25b956d28b693eb673b5d1c?s=128&d=identicon&r=PG", "display_name": "Dimitri", "link": "https://stackoverflow.com/users/10176032/dimitri"}, "is_accepted": false, "score": 0, "last_activity_date": 1538055804, "last_edit_date": 1538055804, "creation_date": 1538055565, "answer_id": 52538401, "question_id": 30217203, "link": "https://stackoverflow.com/questions/30217203/rails-collection-select-skip-null-values/52538401#52538401", "title": "rails collection_select skip null values?", "body": "<p>If you need to be able to reset selection:</p>\n\n<blockquote>\n  <p>f.input :ptype, collection: PROC_TYPES, label: 'Service Type',\n  include_blank: 'None'</p>\n</blockquote>\n\n<p>Otherwise:</p>\n\n<blockquote>\n  <p>f.input :ptype, collection: PROC_TYPES, label: 'Service Type',\n  include_blank: false</p>\n</blockquote>\n"}], "owner": {"reputation": 4194, "user_id": 2071433, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/d0cb7ef38e8c77c87efe81c2d6e8df30?s=128&d=identicon&r=PG", "display_name": "Learner", "link": "https://stackoverflow.com/users/2071433/learner"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 534, "favorite_count": 0, "accepted_answer_id": 30219331, "answer_count": 2, "score": 0, "last_activity_date": 1538055804, "creation_date": 1431525731, "last_edit_date": 1431530808, "question_id": 30217203, "link": "https://stackoverflow.com/questions/30217203/rails-collection-select-skip-null-values", "title": "rails collection_select skip null values?", "body": "<h2>Table: <code>age_values</code></h2>\n\n<pre><code>id | kids_age | teen_age  | old_age\n\n1  | Age - 1  | Age - 16  | null\n\n2  | Age - 2  | Age - 17  | Age - 25\n\n3  | Age - 3  | Age - 18  | null\n\n4  | Age - 4  | Age - 19  | Age - 26\n\n5  | under 5  | Age - 20  | Age - 28\n</code></pre>\n\n<p>I have a table <code>age_values</code> and model for the table is</p>\n\n<pre><code>class AgeValue &lt; ActiveRecord::Base\n  self.table_name = 'age_values\n  self.primary_key = 'id\n\n  def to_s\n    kids_age\n  end\n\n  def to_s_teen\n    teen_age\n  end\n\n  def to_s_old\n    old_age\n  end\n\nend\n</code></pre>\n\n<p>in my view,</p>\n\n<pre><code># some_condition = 5\n\n&lt;% if some_condition = 1 %&gt;\n  &lt;% age = to_s %&gt;\n&lt;% elsif some_condition = 2 %&gt;\n  &lt;% age = to_s_teen %&gt;\n&lt;% else %&gt;\n  &lt;% age = to_s_old %&gt;\n&lt;% end %&gt;\n\n&lt;%= f.collection_select(age_value_for_question, :id, age, {include_blank: ((some_variable || 0) != 1) ? 'Please select an option' : false}, {name: some_name}) %&gt;\n</code></pre>\n\n<p>I want to display the option which is not null. Basically for old_age just want to display <code>{id: 2, old_age: Age - 25, id: 4, old_age: Age - 26, id: 5, old_age: Age - 28}</code> </p>\n\n<h2>What I have Tried:</h2>\n\n<p>I have changed and added another method in my model</p>\n\n<pre><code>def to_s_old\n  exclude_null_for_old_age\nend\n\ndef exclude_null_for_old_age\n  age = AgeValue.where(\"old_age IS NOT NULL\")\n  age.pluck(:old_age)\nend\n</code></pre>\n\n<p>I Want to exclude the null of value 1 and 3)</p>\n\n<h2>My current result:</h2>\n\n<pre><code>&lt;option value=1&gt;[\"Age - 25\", \"Age - 26\", \"Age - 28\"]&lt;/option&gt;\n&lt;option value=2&gt;[\"Age - 25\", \"Age - 26\", \"Age - 28\"]&lt;/option&gt;\n&lt;option value=3&gt;[\"Age - 25\", \"Age - 26\", \"Age - 28\"]&lt;/option&gt;\n&lt;option value=4&gt;[\"Age - 25\", \"Age - 26\", \"Age - 28\"]&lt;/option&gt;\n&lt;option value=1&gt;[\"Age - 25\", \"Age - 26\", \"Age - 28\"]&lt;/option&gt;\n</code></pre>\n\n<h2>My Expected result:</h2>\n\n<pre><code>&lt;option value=2&gt;Age - 25&lt;/option&gt;\n&lt;option value=4&gt;Age - 26&lt;/option&gt;\n&lt;option value=5&gt;Age - 28&lt;/option&gt;\n</code></pre>\n"}, {"tags": ["ruby", "apache", "passenger"], "answers": [{"tags": [], "owner": {"reputation": 329, "user_id": 4241265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4c01d9bf9d104d3d4c3f8aaefa37ee54?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/4241265/neo"}, "is_accepted": true, "score": 0, "last_activity_date": 1432131283, "creation_date": 1432131283, "answer_id": 30352281, "question_id": 30216640, "link": "https://stackoverflow.com/questions/30216640/phusion-messenger-virtual-host/30352281#30352281", "title": "Phusion Messenger virtual host", "body": "<p>Turned out there were two problems:</p>\n\n<ol>\n<li><code>&lt;VirtualHost *:3000&gt;</code> should have been <code>&lt;VirtualHost *:80&gt;</code></li>\n<li><code>&lt;Directory /var/www/redmine/public&gt;</code> should have been <code>&lt;Directory /var/www/redmine/public/&gt;</code>. Just one small slash, after public, it made the difference. </li>\n</ol>\n"}], "owner": {"reputation": 329, "user_id": 4241265, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/4c01d9bf9d104d3d4c3f8aaefa37ee54?s=128&d=identicon&r=PG&f=1", "display_name": "Neo", "link": "https://stackoverflow.com/users/4241265/neo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 30352281, "answer_count": 1, "score": 0, "last_activity_date": 1432131283, "creation_date": 1431524401, "question_id": 30216640, "link": "https://stackoverflow.com/questions/30216640/phusion-messenger-virtual-host", "title": "Phusion Messenger virtual host", "body": "<p>I am trying to run a ruby application server with phusion passenger. The problem is that the application is hosted on an apache server that hosts other websites too. So I tried to implement virtualhost. Now for some reason I can't reach my application. The DNS does redirect the queries, but its to another website being hosted on the server. The phusion passenger is running on port 3000, and the virtualhost file is as follows:</p>\n\n<pre><code>&lt;VirtualHost *:3000&gt;\nServerAdmin admin@something.com\nServerName something.com\nServerAlias www.something.com\n\n# !!! Be sure to point DocumentRoot to 'public'!\nDocumentRoot /var/www/redmine/public/    \nRailsEnv development \nIndexOptions SuppressHTMLPreamble\nRewriteEngine On\nRewriteOptions inherit\n\n&lt;Directory /var/www/redmine/public&gt;\n# This relaxes Apache security settings.\n\nAllowOverride all\nOrder allow,deny  \n#MultiViews must be turned off.\nOptions Indexes FollowSymLinks -MultiViews +ExecCGI \n# Uncomment this if you're on Apache &gt;= 2.4:\nRequire all granted\n&lt;/Directory&gt;\n</code></pre>\n\n<p></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "model", "callback"], "comments": [{"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1431524785, "post_id": 30216606, "comment_id": 48537349, "body": "<code>r.surveyor_ids.present?</code> why you need to check it? in <code>after_save</code> as it will create a persisted instance"}, {"owner": {"reputation": 933, "user_id": 1837427, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b389a2992d186fc7c51b10bbb37bb16?s=128&d=identicon&r=PG", "display_name": "gosseti", "link": "https://stackoverflow.com/users/1837427/gosseti"}, "reply_to_user": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1431524971, "post_id": 30216606, "comment_id": 48537509, "body": "Can you clarify what you mean by that?"}, {"owner": {"reputation": 12965, "user_id": 2463570, "user_type": "registered", "accept_rate": 55, "profile_image": "https://lh3.googleusercontent.com/-XdUIqdMkCWA/AAAAAAAAAAI/AAAAAAAAAAA/4252rscbv5M/photo.jpg?sz=128", "display_name": "Rajarshi Das", "link": "https://stackoverflow.com/users/2463570/rajarshi-das"}, "edited": false, "score": 0, "creation_date": 1431525290, "post_id": 30216606, "comment_id": 48537772, "body": "I mean you can use callback to your surveyor model using <code>after_update</code> and check it <code>changed?</code>"}], "answers": [{"tags": [], "owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1431539830, "creation_date": 1431539830, "answer_id": 30222102, "question_id": 30216606, "link": "https://stackoverflow.com/questions/30216606/rails-model-callback-when-has-and-belongs-to-many-association-has-changed/30222102#30222102", "title": "Rails model callback when has_and_belongs_to_many association has changed", "body": "<p><code>#changed?</code> will always be false after saving the model, but you can use <a href=\"http://api.rubyonrails.org/classes/ActiveModel/Dirty.html#method-i-previous_changes\" rel=\"nofollow\"><code>#previous_changes</code></a> to do the thing</p>\n"}], "owner": {"reputation": 933, "user_id": 1837427, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/0b389a2992d186fc7c51b10bbb37bb16?s=128&d=identicon&r=PG", "display_name": "gosseti", "link": "https://stackoverflow.com/users/1837427/gosseti"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 834, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431539830, "creation_date": 1431524343, "question_id": 30216606, "link": "https://stackoverflow.com/questions/30216606/rails-model-callback-when-has-and-belongs-to-many-association-has-changed", "title": "Rails model callback when has_and_belongs_to_many association has changed", "body": "<p>I\u2019m trying to fire an <code>after_save</code> callback on my <code>Job</code> model only when it has a <code>Surveyor</code> added or changed on it (given that one is also present too).</p>\n\n<pre><code># app/models/job.rb \nhas_and_belongs_to_many :surveyors\nafter_save :send_mail, if: -&gt;(r) { r.surveyor_ids_changed? and r.surveyor_ids.present? }\n\n# app/models/surveyor.rb\nhas_and_belongs_to_many :jobs\n\n# permitted parameters on job\n:job_name, :job_address, surveyor_ids: []\n</code></pre>\n\n<p>How might I change the model callback to get the <code>send_mail</code> method firing properly?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ajax", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1117, "user_id": 2066608, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/56771e8ae8494e15f2794bb152ac54f5?s=128&d=identicon&r=PG", "display_name": "ppascualv", "link": "https://stackoverflow.com/users/2066608/ppascualv"}, "edited": false, "score": 0, "creation_date": 1431524223, "post_id": 30216426, "comment_id": 48536848, "body": "you&#39;re not sending data in your Ajax request and do you expect data in params variable?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1431524405, "post_id": 30216426, "comment_id": 48537019, "body": "I&#39;m not sure about what you are trying to do. But the answer is probably because each request is handled by a different instance of the controller&#39;s class. Thus instance variables aren&#39;t shared between requests."}, {"owner": {"reputation": 11, "user_id": 4895955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94805a05d92b1f21c85875bcd60e5a4?s=128&d=identicon&r=PG&f=1", "display_name": "AlexB82", "link": "https://stackoverflow.com/users/4895955/alexb82"}, "edited": false, "score": 0, "creation_date": 1431524950, "post_id": 30216426, "comment_id": 48537489, "body": "@jphager2  I think u&#39;ve understood what i need correctly. OK, I&#39;ll ask in other way ) When a user attends my page first time - i get (iav get :)) set of params, next time - i should already use this params. How can i save them (of course pesonal for every user), without sessions?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1431526916, "post_id": 30216426, "comment_id": 48539148, "body": "Well, if you dont want to use sessions or cookies, you should save the data to a database.  Though, if you aren&#39;t going to use cookies, then you will have to think about how you will identify users (like ip or passing url parameters around). Why cant you use sessions?"}, {"owner": {"reputation": 11, "user_id": 4895955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94805a05d92b1f21c85875bcd60e5a4?s=128&d=identicon&r=PG&f=1", "display_name": "AlexB82", "link": "https://stackoverflow.com/users/4895955/alexb82"}, "edited": false, "score": 0, "creation_date": 1431532772, "post_id": 30216426, "comment_id": 48543662, "body": "@jphager2, I don&#39;t need sessions, cause its an app for social network with thier own seesion mechanism. I chose the other method - I gather this params on the client side and keep them in assosiated array in JS, and just send this params to my server every time. Thank you for your help!"}], "answers": [{"tags": [], "owner": {"reputation": 22836, "user_id": 152786, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/581hP.jpg?s=128&g=1", "display_name": "smathy", "link": "https://stackoverflow.com/users/152786/smathy"}, "is_accepted": false, "score": 0, "last_activity_date": 1431535593, "creation_date": 1431535593, "answer_id": 30220807, "question_id": 30216426, "link": "https://stackoverflow.com/questions/30216426/why-is-object-becomes-null-rails4/30220807#30220807", "title": "Why is object becomes null? (Rails4)", "body": "<p>Web requests, web servers, the web in general, is stateless. So when you set <code>@uid = params[:user_id]</code> in your <code>idx</code> method, it's valid for the life of that request/response, but the next request is handled by a new instance of your controller, and in that new instance <code>@uid</code> hasn't been set.</p>\n\n<p>The way we fake state in the web world is using cookies, a cookie is sent back to the browser on their first visit, and the browser automatically sends that cookie back to the web server with each request. We can put any information we want into that cookie in the first request and the browser will send that back to us with subsequent requests - so we're able to fake statefulness.</p>\n\n<p>Rails adds another security layer on top of cookies called sessions, which allows us to securely store information in the cookie, and then securely retrieve it in subsequent requests.</p>\n\n<p>So, change your <code>@uid=params[:user_id]</code> to <code>session[:uid] = @uid = params[:user_id]</code> in your <code>idx</code> method, and then in <code>app_init</code> make the first line: <code>@uid = session[:uid]</code> </p>\n"}], "owner": {"reputation": 11, "user_id": 4895955, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c94805a05d92b1f21c85875bcd60e5a4?s=128&d=identicon&r=PG&f=1", "display_name": "AlexB82", "link": "https://stackoverflow.com/users/4895955/alexb82"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1431535593, "creation_date": 1431523913, "question_id": 30216426, "link": "https://stackoverflow.com/questions/30216426/why-is-object-becomes-null-rails4", "title": "Why is object becomes null? (Rails4)", "body": "<p>Im a newby, so maybe its a very silly qustion ) \nI have a controller:</p>\n\n<pre><code> class MainPageController &lt; ApplicationController\n\n  def uid=(xid)\n   @uid=xid\n  end  \n\n  def idx\n  response.headers.delete('X-Frame-Options')\n  @uid=params[:user_id]\n  log=Logger.new(STDOUT)\n  log.debug(\"UID #{@uid}\")\n  log.debug(\"#{params[:access_token]}\")\n  app=VK::Application.new(app_id: 4914826, app_secret: 'ZjeOFuApRPVdvL234Tsu', version: '5.31', access_token: params[:access_token])\n\n  end\n\n  def queue_req\n\n  end\n\n  def app_init\n   #vkjson=app.friends.getOnline uid\n   response.headers.delete('X-Frame-Options')\n   log=Logger.new(STDOUT)\n   log.debug(\"UID FO JSON #{@uid}\")\n   render json: {'uid'=&gt;@uid}.to_json\n\n  end\nend\n</code></pre>\n\n<p>idx - called by the default route. The default view - after initializing some js - calls init using ajax. And i get an answer, that @uid is null. In logs - in idx - @uid - is coorect, and in init - already is null. Why?</p>\n\n<p>Here's the part of code of the page</p>\n\n<pre><code>    &lt;script type=\"text/javascript\"&gt;\nVK.init(function() {\n\n $.ajax({\n    url: 'http://localhost:3000/init', // JSON_URL is a global variable\n    dataType: 'json',\n    error: function(xhr_data) {\n      alert ('Error')\n\n    },\n    success: function(xhr_data) {\n      alert(xhr_data.uid)\n    },\n    contentType: 'application/json'\n  });\n\n});\n&lt;/script&gt;\n</code></pre>\n\n<p>What is wrong in the code?\nThank you!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "edited": false, "score": 0, "creation_date": 1431523899, "post_id": 30216266, "comment_id": 48536525, "body": "Have you tried this : <code>Category.select(&quot;lower(name) as c_name, count(*) as cc&quot;).group(&quot;lower(name)&quot;).order(&quot;cc desc&quot;).limit(3)</code>"}, {"owner": {"reputation": 1540, "user_id": 1245440, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a2a573a8585a0e04eecd822955e9fbe?s=128&d=identicon&r=PG", "display_name": "Pramod Shinde", "link": "https://stackoverflow.com/users/1245440/pramod-shinde"}, "reply_to_user": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "edited": false, "score": 0, "creation_date": 1431524007, "post_id": 30216266, "comment_id": 48536648, "body": "@AmitThawait Yes I tried, No luck"}, {"owner": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "edited": false, "score": 1, "creation_date": 1431524349, "post_id": 30216266, "comment_id": 48536971, "body": "I think you might be gettig the correct result but it is not showing in the result since c_name &amp; cc are the actual attributes and u have not selected id in the select clause. Try iterating the result set and check c_name and cc for each result."}], "answers": [{"tags": [], "owner": {"reputation": 3171, "user_id": 2610043, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/jIN0G.jpg?s=128&g=1", "display_name": "hedgesky", "link": "https://stackoverflow.com/users/2610043/hedgesky"}, "is_accepted": true, "score": 5, "last_activity_date": 1434618602, "last_edit_date": 1434618602, "creation_date": 1431524466, "answer_id": 30216666, "question_id": 30216266, "link": "https://stackoverflow.com/questions/30216266/select-lower-case-column-with-group-by-or-select-lowercolumn-in-rails-4/30216666#30216666", "title": "Select lower case column with group by or select lower(column) in Rails 4", "body": "<p>The result is correct, but Rails displays it wrong. Just access results manually:</p>\n\n<pre><code>results = Category.select(\"lower(name) as c_name, count(*) as cc\").group(\"c_name\").order(\"cc desc\").limit(3) \nresults.first['c_name']\n</code></pre>\n"}], "owner": {"reputation": 1540, "user_id": 1245440, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/8a2a573a8585a0e04eecd822955e9fbe?s=128&d=identicon&r=PG", "display_name": "Pramod Shinde", "link": "https://stackoverflow.com/users/1245440/pramod-shinde"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1289, "favorite_count": 0, "accepted_answer_id": 30216666, "answer_count": 1, "score": 2, "last_activity_date": 1453033157, "creation_date": 1431523587, "last_edit_date": 1453033157, "question_id": 30216266, "link": "https://stackoverflow.com/questions/30216266/select-lower-case-column-with-group-by-or-select-lowercolumn-in-rails-4", "title": "Select lower case column with group by or select lower(column) in Rails 4", "body": "<p>How to achieve following in rails 4? </p>\n\n<p>Here is my PostgreSQL query and works correctly </p>\n\n<pre><code>SELECT lower(name) as c_name, count(*) as cc FROM categories  GROUP BY c_name  ORDER BY cc desc LIMIT 3\n</code></pre>\n\n<p>Ii gives me following results </p>\n\n<pre><code> \"ecommerce solutions\";6\n \"vmware\";6\n \"big data analytics\";5\n</code></pre>\n\n<p>But when I write same query in Rails 4 as </p>\n\n<pre><code>Category.select(\"lower(name) as c_name, count(*) as cc\").group(\"c_name\").order(\"cc desc\").limit(3) \n</code></pre>\n\n<p>Above query generates following query which is same as above PostgreSQL query </p>\n\n<pre><code>SELECT lower(name) as c_name, count(*) as cc FROM \"categories\"  GROUP BY c_name  ORDER BY cc desc LIMIT 3\n</code></pre>\n\n<p>gives following results  </p>\n\n<pre><code>[#&lt;Category id: nil&gt;, #&lt;Category id: nil&gt;, #&lt;Category id: nil&gt;]\n</code></pre>\n\n<p>Why this is happening ? when I cut my query to </p>\n\n<pre><code> Category.select(\"lower(name)\").limit(3)\n</code></pre>\n\n<p>This also does not work, and results into </p>\n\n<pre><code> [#&lt;Category id: nil&gt;, #&lt;Category id: nil&gt;, #&lt;Category id: nil&gt;]\n</code></pre>\n\n<p>I want to do group on <code>lower(name)</code> with count as aggregation, I have many variances of <code>name</code> in <code>Category</code> model </p>\n\n<p>Ex. data set</p>\n\n<pre><code>\"Vmware\" and \"VMware\" and \"VMWARE\" and \"vmware\" \n</code></pre>\n\n<p>How can I group on lower(name) in Rails 4? </p>\n\n<p>In simple words, How to write equivalent query of following in Rails 4? </p>\n\n<pre><code>SELECT lower(name) as c_name, count(*) as cc FROM categories  GROUP BY c_name  ORDER BY cc desc LIMIT 3\n</code></pre>\n"}, {"tags": ["ruby", "regex"], "answers": [{"comments": [{"owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "edited": false, "score": 0, "creation_date": 1431522463, "post_id": 30215566, "comment_id": 48535396, "body": "Thanks for explaining, I guess I was a little confused. I did as you asked (going with the second option - the method called name) and the test is still failing with: <code>RobotTest#test_has_name [robot-name&#47;robot_name_test.rb:7]: Expected &#47;^[A-Z]{2}\\d{3}$&#47; to match &quot;15MAY140549&quot;.</code> - Would this have something to do with the two lines that are commented out in the test?"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "edited": false, "score": 0, "creation_date": 1431522659, "post_id": 30215566, "comment_id": 48535558, "body": "@SoSimple Testing DateTime objects is a tricky thing, and I am not sure that it is the best time for you to dive into mocks and stubs.. Try to 1) understand what is going on in my explanation; 2) Change the name to some static string, and then test against it"}, {"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1431522800, "post_id": 30215566, "comment_id": 48535667, "body": "The regex matches two upcase letters at the beginning followed by 3 digits. E.g. &quot;AA345&quot;"}, {"owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "edited": false, "score": 0, "creation_date": 1431522863, "post_id": 30215566, "comment_id": 48535712, "body": "@jphager2 Is that&#39;s what&#39;s happening? Okay, that was confusing the hell out of me. Thank you for clarifying."}, {"owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "edited": false, "score": 0, "creation_date": 1431522952, "post_id": 30215566, "comment_id": 48535768, "body": "@AndreyDeineko I&#39;ll definitely play around with some hardcoded strings and thank you so much for explaining. I can see now how I was misusing <code>attr_accessor</code> and <code>self</code>."}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1431522426, "last_edit_date": 1431522426, "creation_date": 1431522040, "answer_id": 30215566, "question_id": 30215364, "link": "https://stackoverflow.com/questions/30215364/test-to-check-if-attribute-is-assigned-fails/30215566#30215566", "title": "Test to check if attribute is assigned fails", "body": "<p>There is number of issues with your code.</p>\n\n<p>First, you define accessor <code>:name</code>, but you don't have <code>initialize</code> method.</p>\n\n<p>What you have defined, is a class method <code>name</code>, which would work if you call <code>Robot.name</code>.</p>\n\n<p>To make your class work, it should look like this:</p>\n\n<pre><code>class Robot\n\n  def initialize\n    @name = DateTime.now.strftime(\"%y%^b%k%M%S\")\n  end\n\nend\n\nRobot.new.name\n#=&gt; \"15MAY150035\"\n</code></pre>\n\n<p>Or You would do</p>\n\n<pre><code>class Robot\n\n  def name\n    DateTime.now.strftime(\"%y%^b%k%M%S\")\n  end\n\nend\n\nRobot.new.name\n#=&gt; \"15MAY150649\"\n</code></pre>\n\n<p>Also, in Ruby last line in method is already what would be <code>return</code>ed, so you don't have to write <code>@name</code> here:</p>\n\n<pre><code>  def self.name\n    @name = DateTime.now.strftime(\"%y%^b%k%M%S\")\n    @name # useless\n  end\n</code></pre>\n\n<p>Furthermore, variable <code>@name</code> is useless here, since method <code>name</code> either way will return <code>DateTime</code> object.</p>\n\n<p>You have to make sure you understand what is what in Ruby.</p>\n"}, {"comments": [{"owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "edited": false, "score": 0, "creation_date": 1431522075, "post_id": 30215567, "comment_id": 48535071, "body": "I can be more explicit if you want, or you can try to put what I&#39;ve suggested into practice yourself."}, {"owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "edited": false, "score": 0, "creation_date": 1431522633, "post_id": 30215567, "comment_id": 48535539, "body": "Thanks for explaining. I removed <code>self</code> and I&#39;ve refactored according to @AndreyDeineko &#39;s suggestions. As I explained to him, the test is still failing. Any ideas as to why?"}, {"owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "edited": false, "score": 0, "creation_date": 1431524915, "post_id": 30215567, "comment_id": 48537451, "body": "Also, I just remembered, I actually want a new name generated everytime <code>name</code> is called. That part was intentional. Just fyi, but thank you for pointing it out anyways :)"}], "tags": [], "owner": {"reputation": 42691, "user_id": 93884, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/f912a87ba919942acb4048838f6b2572?s=128&d=identicon&r=PG", "display_name": "Chowlett", "link": "https://stackoverflow.com/users/93884/chowlett"}, "is_accepted": false, "score": 1, "last_activity_date": 1431522042, "creation_date": 1431522042, "answer_id": 30215567, "question_id": 30215364, "link": "https://stackoverflow.com/questions/30215364/test-to-check-if-attribute-is-assigned-fails/30215567#30215567", "title": "Test to check if attribute is assigned fails", "body": "<p>Your code defines <code>name</code> to be a method on the <code>Robot</code> <em>class</em> (that's what the <code>self</code> indicates; and <code>@name</code> here will be setting a member variable on the class object). You need to provide a way for each <em>instance</em> to have a name.</p>\n\n<p>As a secondary concern, your method changes the name everytime <code>name</code> is called. You probably want to set it once (when the robot is <code>initialize</code>d, probably!), then return that each time.</p>\n"}, {"tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "is_accepted": false, "score": 1, "last_activity_date": 1431522921, "last_edit_date": 1431522921, "creation_date": 1431522429, "answer_id": 30215769, "question_id": 30215364, "link": "https://stackoverflow.com/questions/30215364/test-to-check-if-attribute-is-assigned-fails/30215769#30215769", "title": "Test to check if attribute is assigned fails", "body": "<p>Your method is a class method. Which means that <code>Robot.name</code> will give you the name, while <code>Robot.new.name</code> is <code>nil</code>.</p>\n\n<p>You want to use:</p>\n\n<pre><code>def name\n  #code\nend\n</code></pre>\n\n<p>Instead of <code>self.name</code>.  </p>\n\n<p>You can also set name in the <code>initialize</code> method:</p>\n\n<pre><code>def initialize \n  @name = 'RB123'\nend\n</code></pre>\n"}], "owner": {"reputation": 671, "user_id": 2733137, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/8ff8t.jpg?s=128&g=1", "display_name": "SoSimple", "link": "https://stackoverflow.com/users/2733137/sosimple"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 51, "favorite_count": 0, "accepted_answer_id": 30215566, "answer_count": 3, "score": 0, "last_activity_date": 1431522921, "creation_date": 1431521522, "question_id": 30215364, "link": "https://stackoverflow.com/questions/30215364/test-to-check-if-attribute-is-assigned-fails", "title": "Test to check if attribute is assigned fails", "body": "<p>I'm trying out some of the exercises over on <a href=\"http://exercism.io/\" rel=\"nofollow\">exercism</a>. Each exercise comes with a set of pre-written tests that we need to make pass. The problem I'm currently working on asks us to write a Robot class. Each robot should come with a method called name that sets a default name. I'm doing that like this:</p>\n\n<pre><code>class Robot\n  attr_accessor :name\n\n  def self.name\n    @name = DateTime.now.strftime(\"%y%^b%k%M%S\")\n    @name\n  end\nend\n</code></pre>\n\n<p>The problem is that the first test (I'm skipping over the rest for now) keeps failing. Here's the test:</p>\n\n<pre><code>  def test_has_name\n    # rubocop:disable Lint/AmbiguousRegexpLiteral\n    assert_match /^[A-Z]{2}\\d{3}$/, Robot.new.name\n    # rubocop:enable Lint/AmbiguousRegexpLiteral\n  end\n</code></pre>\n\n<p>I'm not using the rubocop gem so I've left the commented lines as is. The test fails with this error:</p>\n\n<pre><code>  1) Failure:\nRobotTest#test_has_name [robot-name/robot_name_test.rb:7]:\nExpected /^[A-Z]{2}\\d{3}$/ to match nil.\n</code></pre>\n\n<p>I suppose the biggest problem is that I don't really understand the error and I don't know if I need to install rubocop and uncomment those lines above or of my code is just plain wrong. Any help at all with this would be much appreciated. </p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 2, "creation_date": 1431520260, "post_id": 30214780, "comment_id": 48533668, "body": "I would add <code>.map(&amp;:flatten)</code> to meet required form from question."}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 2, "creation_date": 1431520263, "post_id": 30214780, "comment_id": 48533672, "body": "Almost the same, only <code>group_by(&amp;:class)</code>"}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1431521440, "post_id": 30214780, "comment_id": 48534585, "body": "@YevgeniyAnfilofyev Your solution follows OP&#39;s words, while mine follows the example in the question. I guess you are right, as that&#39;s what the accepted answer does. I&#39;ll keep it as it is for now though."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1431548518, "post_id": 30214780, "comment_id": 48552836, "body": "Yu, I think you need to go with @YevgeniyAnfilofyev&#39;s suggestion, as <code>[1, [1,2,3,4,5,6,7,8], 2].group_by(&amp;:size).values.map(&amp;:flatten)   #=&gt; [[1, 1, 2, 3, 4, 5, 6, 7, 8, 2]]</code> (because the array has 8 elements)."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1431579073, "post_id": 30214780, "comment_id": 48562317, "body": "@CarySwoveland Isn&#39;t the result <code>[[1, 2], [1, 2, 3, 4, 5, 6, 7, 8]]</code>?"}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1431579336, "post_id": 30214780, "comment_id": 48562389, "body": "<code>1.size #=&gt; 8; 2.size #=&gt; 8; [1,2,3,4,5,6,7,8].size #=&gt; 8</code>, so that&#39;s why I got the result I reported (after testing). <code>Fixnum.size</code> returns bytes; <code>Array#size</code> returns number of elements."}, {"owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1431579686, "post_id": 30214780, "comment_id": 48562497, "body": "@CarySwoveland Ah, I got it now, you are right. I didn&#39;t get it because I&#39;m working on a machine where <code>1.size</code> returns <code>4</code>."}], "tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": false, "score": 4, "last_activity_date": 1431580136, "last_edit_date": 1431580136, "creation_date": 1431520105, "answer_id": 30214780, "question_id": 30214683, "link": "https://stackoverflow.com/questions/30214683/how-to-extract-sub-arrays-and-rest-of-elements-as-array-from-an-array/30214780#30214780", "title": "How to extract sub arrays and rest of elements as Array from an Array?", "body": "<p><a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-group_by\" rel=\"nofollow\"><code>Enumerable#group_by</code></a> returns a <code>Hash</code>, whose values are what you want:</p>\n\n<pre><code>aoa.group_by(&amp;:size).values.map(&amp;:flatten)\n# =&gt; [[1, 2, 5, 9], [3, 4], [6, 7, 8]]\n</code></pre>\n\n<hr>\n\n<p>@Cary Swoveland pointed out that using <code>size</code> to group is a bad idea, because subarrays with the same size as <code>Fixnum#size</code> would cause unexpected result. <code>group_by(&amp;:class)</code> should be used instead.</p>\n"}, {"comments": [{"owner": {"reputation": 35276, "user_id": 182590, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/134ea397777886d6f0aa992672a50eaa?s=128&d=identicon&r=PG", "display_name": "Mark Thomas", "link": "https://stackoverflow.com/users/182590/mark-thomas"}, "edited": false, "score": 0, "creation_date": 1431520431, "post_id": 30214836, "comment_id": 48533799, "body": "I prefer this solution. It is more direct, as it doesn&#39;t rely on the side effects of grouping by size."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1431566782, "post_id": 30214836, "comment_id": 48559346, "body": "Regarding your edit, what if <code>aoa</code> contains elements other than integers and arrays? Better to write <code>!i.is_a?(Array)</code>. I think <code>partition</code> is the way to go here, and I think that&#39;s what readers liked about your answer. Your &quot;edit&quot; is a distraction. I&#39;d delete it and add the extra step to modify the array returned by <code>partition</code>."}, {"owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1431608304, "post_id": 30214836, "comment_id": 48577531, "body": "@CarySwoveland Agree, however I left the array check because the example in the question uses only integers. Thank you."}], "tags": [], "owner": {"reputation": 13376, "user_id": 3357295, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/3PzYS.jpg?s=128&g=1", "display_name": "Doguita", "link": "https://stackoverflow.com/users/3357295/doguita"}, "is_accepted": true, "score": 7, "last_activity_date": 1431608513, "last_edit_date": 1431608513, "creation_date": 1431520252, "answer_id": 30214836, "question_id": 30214683, "link": "https://stackoverflow.com/questions/30214683/how-to-extract-sub-arrays-and-rest-of-elements-as-array-from-an-array/30214836#30214836", "title": "How to extract sub arrays and rest of elements as Array from an Array?", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-1.9.3/Enumerable.html#method-i-partition\" rel=\"nofollow\">partition</a>  (and the <code>splat</code> operator, as pointed by @CarySwoveland)</p>\n\n<pre><code>a, i = aoa.partition{ |i| i.is_a? Array }\n# =&gt; [[[3, 4], [6, 7, 8]], [1, 2, 5, 9]] \n[*a, i]\n# =&gt; [[3, 4], [6, 7, 8], [1, 2, 5, 9]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3692, "user_id": 1065738, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/47ef9be34cf2f299fd5b092971a0d0f5?s=128&d=identicon&r=PG", "display_name": "Amit Thawait", "link": "https://stackoverflow.com/users/1065738/amit-thawait"}, "is_accepted": false, "score": 1, "last_activity_date": 1431521291, "last_edit_date": 1431521291, "creation_date": 1431521092, "answer_id": 30215194, "question_id": 30214683, "link": "https://stackoverflow.com/questions/30214683/how-to-extract-sub-arrays-and-rest-of-elements-as-array-from-an-array/30215194#30215194", "title": "How to extract sub arrays and rest of elements as Array from an Array?", "body": "<pre><code> &gt;   aoa.inject([[]]) {|temp, x| x.is_a?(Array) ? temp &lt;&lt; x : (temp.first &lt;&lt; x); temp }\n #=&gt; [[1, 2, 5, 9], [3, 4], [6, 7, 8]]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 1, "creation_date": 1431544176, "post_id": 30218858, "comment_id": 48550488, "body": "Interesting! You might consider <code>nested_a = aoa.each_with_object([[]]) { |e,arr|...</code>. Also, I suggest you remove <code>#</code> in your last (comment) line to remind readers that <code>nested_a</code> is needed there."}], "tags": [], "owner": {"reputation": 96, "user_id": 4864301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6c600d6b9584f8dcbf3609a6590dae?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar Mkaka Joel", "link": "https://stackoverflow.com/users/4864301/edgar-mkaka-joel"}, "is_accepted": false, "score": 2, "last_activity_date": 1431580377, "last_edit_date": 1431580377, "creation_date": 1431529803, "answer_id": 30218858, "question_id": 30214683, "link": "https://stackoverflow.com/questions/30214683/how-to-extract-sub-arrays-and-rest-of-elements-as-array-from-an-array/30218858#30218858", "title": "How to extract sub arrays and rest of elements as Array from an Array?", "body": "<pre><code>nested_a = [[]]\naoa.each {|e| e.is_a?(Array) ? nested_a &lt;&lt; e : nested_a[0] &lt;&lt; e  }\n#remove 1st nested array if empty(Occurs if there were no individual elements)\nnested_a.shift if nested_a[0].empty?\nnested_a # =&gt; [[1, 2, 5, 9], [3, 4], [6, 7, 8]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1431550904, "last_edit_date": 1431550904, "creation_date": 1431548786, "answer_id": 30224577, "question_id": 30214683, "link": "https://stackoverflow.com/questions/30214683/how-to-extract-sub-arrays-and-rest-of-elements-as-array-from-an-array/30224577#30224577", "title": "How to extract sub arrays and rest of elements as Array from an Array?", "body": "<p>Here are three other ways, for:</p>\n\n<pre><code>aoa = [1, 'cat', [3, 4], 5, [6, 7, 8], 9]\n</code></pre>\n\n<p><strong>1</strong></p>\n\n<pre><code>is_array = -&gt;(e) { Array===e } \n[aoa.reject(&amp;is_array)].concat(aoa.select(&amp;is_array))\n  #=&gt; [[1, \"cat\", 5, 9], [3, 4], [6, 7, 8]]\n</code></pre>\n\n<p><strong>2</strong></p>\n\n<p>Adding a step to @Doguita's use of <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-partition\" rel=\"nofollow\">Enumerable#partition</a>:</p>\n\n<pre><code>a, e = aoa.partition { |e| Array===e }\n[e,*a]\n  #=&gt; [[1, \"cat\", 5, 9], [3, 4], [6, 7, 8]]\n</code></pre>\n\n<p><strong>3</strong></p>\n\n<pre><code>sorted = aoa.sort_by { |e| (Array===e) ? 1 : 0 }\n[sorted.shift(aoa.count { |e| !(Array===e) })].concat(sorted)\n  #=&gt; [[1, \"cat\", 9, 5], [6, 7, 8], [3, 4]]\n</code></pre>\n\n<p><strong>What if <code>aoa</code> contains only arrays?</strong></p>\n\n<p>All of these methods will return an array containing an empty array if all the elements of <code>aoa</code> are arrays. If an empty array is not desired, tack <code>.reject(&amp;:empty?)</code> to the end. For example:</p>\n\n<pre><code>aoa = [[3, 4], [6, 7, 8]]\n[aoa.reject(&amp;is_array)].concat(aoa.select(&amp;is_array))\n  #=&gt; [[], [3, 4], [6, 7, 8]]\n[aoa.reject(&amp;is_array)].concat(aoa.select(&amp;is_array)).reject(&amp;:empty?)\n  #=&gt; [[3, 4], [6, 7, 8]] \n\naoa = [1, 'cat', 5, 9]\n[aoa.reject(&amp;is_array)].concat(aoa.select(&amp;is_array))\n  #=&gt; [[1, \"cat\", 5, 9]]\n[aoa.reject(&amp;is_array)].concat(aoa.select(&amp;is_array)).reject(&amp;:empty?)\n  #=&gt; [[1, \"cat\", 5, 9]]\n</code></pre>\n\n<p><strong>You can instead use <code>reject!</code>, but if you do, avoid the pitfall!</strong></p>\n\n<p>You can replace <code>reject(&amp;:empty?)</code> with <code>reject!(&amp;:empty?)</code>, which is a bit more efficient, but if you do, remember than <code>reject!</code> returns <code>nil</code> if no change is made, so you need to write:</p>\n\n<pre><code> aoa = [1, 'cat', 5, 9]\n arr = [aoa.reject(&amp;is_array)].concat(aoa.select(&amp;is_array))\n   #=&gt; [[1, \"cat\", 5, 9]]\n arr.reject!(&amp;:empty?)\n   #=&gt; nil\n arr\n   #=&gt; [[1, \"cat\", 5, 9]]\n</code></pre>\n"}], "owner": {"reputation": 9853, "user_id": 514438, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/05GN8.png?s=128&g=1", "display_name": "Bala", "link": "https://stackoverflow.com/users/514438/bala"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 278, "favorite_count": 0, "accepted_answer_id": 30214836, "answer_count": 5, "score": 3, "last_activity_date": 1431608513, "creation_date": 1431519883, "last_edit_date": 1431520174, "question_id": 30214683, "link": "https://stackoverflow.com/questions/30214683/how-to-extract-sub-arrays-and-rest-of-elements-as-array-from-an-array", "title": "How to extract sub arrays and rest of elements as Array from an Array?", "body": "<p>Let us say I have an array of arrays</p>\n\n<pre><code>aoa = [1, 2, [3, 4], 5, [6, 7, 8], 9]\n</code></pre>\n\n<p>I want to extract arrays and individual elements as array like below</p>\n\n<pre><code>[[1,2,5,9],[3,4],[6,7,8]] #=&gt;order is not important\n</code></pre>\n\n<p>I tried this but not sure how to deal with individual elements </p>\n\n<pre><code>aoa.map{|i|  i if i.kind_of?(Array)}.compact #=&gt; [[3, 4], [6, 7, 8]] \n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "activesupport-concern"], "comments": [{"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 1, "creation_date": 1431519467, "post_id": 30214421, "comment_id": 48533086, "body": "Why is <code>ModuleB</code> not using the block form of <code>included</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 1, "creation_date": 1431523659, "post_id": 30214421, "comment_id": 48536314, "body": "@MichaelKohl: The real question is, why <code>ModuleA</code> is using that form :)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431523793, "post_id": 30214421, "comment_id": 48536422, "body": "Short answer: remove the name clash (that is, rename one of the <code>hi</code> methods). As long as it&#39;s there, <i>something</i> will be broken (either ModuleA or ModuleB, depending on which you include first)"}, {"owner": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431523951, "post_id": 30214421, "comment_id": 48536588, "body": "@SergioTulentsev My humble attempt at <a href=\"http://www.wikiwand.com/en/Maieutics\" rel=\"nofollow noreferrer\">wikiwand.com/en/Maieutics</a> failed ;)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 63078, "user_id": 220147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b3881a28fe402dd2d1de44717486cae8?s=128&d=identicon&r=PG", "display_name": "Michael Kohl", "link": "https://stackoverflow.com/users/220147/michael-kohl"}, "edited": false, "score": 0, "creation_date": 1431524183, "post_id": 30214421, "comment_id": 48536808, "body": "@MichaelKohl: haha, it appears so :)"}], "answers": [{"comments": [{"owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "edited": false, "score": 0, "creation_date": 1431586717, "post_id": 30214586, "comment_id": 48565264, "body": "Frankly speaking I would go with @Sergio Tulentsev. That is renaming of clashing method names."}], "tags": [], "owner": {"reputation": 3612, "user_id": 1553787, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/lnACv.jpg?s=128&g=1", "display_name": "Vamsi Krishna", "link": "https://stackoverflow.com/users/1553787/vamsi-krishna"}, "is_accepted": false, "score": 3, "last_activity_date": 1431525212, "last_edit_date": 1431525212, "creation_date": 1431519606, "answer_id": 30214586, "question_id": 30214421, "link": "https://stackoverflow.com/questions/30214421/how-to-scope-a-method-call-within-a-module/30214586#30214586", "title": "How to scope a method call within a module", "body": "<p>The correct answer would be to remove included in both the Modules.\nInstance methods will happily be included without the included block. as suggested by @Sergio Tulentsev</p>\n\n<pre><code>class User\n  include ModuleA\n  include ModuleB\nend\n\nmodule ModuleA\n  extend ActiveSupport::Concern\n\n  def hi\n  end\nend\n\nmodule ModuleB\n  extend ActiveSupport::Concern\n\n  def hi(param)\n  end\n\n  def say_hi\n    hi(param)\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 17816, "user_id": 119790, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/13ebb34ff0ab93713739df64e923bd87?s=128&d=identicon&r=PG", "display_name": "Ian Vaughan", "link": "https://stackoverflow.com/users/119790/ian-vaughan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 182, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1431631975, "creation_date": 1431519124, "question_id": 30214421, "link": "https://stackoverflow.com/questions/30214421/how-to-scope-a-method-call-within-a-module", "title": "How to scope a method call within a module", "body": "<ul>\n<li>I want to define a method encapsulated module. </li>\n<li>It has the same name as a method in a different module. </li>\n<li>When calling the one I want it calls the other one that is mixed in first.</li>\n</ul>\n\n<p>Code :</p>\n\n<pre><code>class User\n  include ModuleA\n  include ModuleB\nend\n\nmodule ModuleA\n  extend ActiveSupport::Concern\n\n  included do\n    def hi\n    end\n  end\nend\n\nmodule ModuleB\n  extend ActiveSupport::Concern\n\n  def hi(param)\n  end\n\n  def say_hi\n    hi(param)\n  end  \nend\n</code></pre>\n\n<p>Errors with</p>\n\n<pre><code>ArgumentError: wrong number of arguments (1 for 0)\n# ./app/models/concerns/modulea.rb:16:in `hi'\n</code></pre>\n\n<p>Rails 4</p>\n"}, {"tags": ["ruby", "postgresql", "sinatra", "datamapper"], "comments": [{"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1431519829, "post_id": 30214343, "comment_id": 48533345, "body": "So try put <code>DataMapper.setup(:default, &#39;postgres:&#47;&#47;david:123456@localhost&#47;usersmareta&#39;)</code> string to <code>vip_client-spec.rb</code> into before section."}, {"owner": {"reputation": 307, "user_id": 4158586, "user_type": "registered", "accept_rate": 9, "profile_image": "https://graph.facebook.com/545099535/picture?type=large", "display_name": "David Dsr", "link": "https://stackoverflow.com/users/4158586/david-dsr"}, "reply_to_user": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 0, "creation_date": 1431527883, "post_id": 30214343, "comment_id": 48539962, "body": "Thank you&#161;&#161; That has worked fine. I thoug puting the setup inside app.rb was enough."}], "owner": {"reputation": 307, "user_id": 4158586, "user_type": "registered", "accept_rate": 9, "profile_image": "https://graph.facebook.com/545099535/picture?type=large", "display_name": "David Dsr", "link": "https://stackoverflow.com/users/4158586/david-dsr"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 797, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1431519216, "creation_date": 1431518895, "last_edit_date": 1431519216, "question_id": 30214343, "link": "https://stackoverflow.com/questions/30214343/adapter-not-set-default-did-you-forget-to-setup", "title": "Adapter not set: default. Did you forget to setup?", "body": "<p>I'm getting the same error when I execute my test in Rspec. DataMapper::RepositoryNotSetupError: Adapter not set: default. Did you forget to setup? I don't understand this error because I've set up Datamapper as it says in Datamapper webpage. I show you my code</p>\n\n<p>vip_client-spec.rb</p>\n\n<pre><code>require 'spec_helper'\nrequire 'data_mapper'\nrequire 'dm-postgres-adapter'\nrequire File.join(File.dirname(__FILE__), '..', '..', 'models', 'vip_client.rb')\n\ndescribe VipClient do\n  before {\n    DataMapper.finalize.auto_upgrade!\n  }\n  describe \"#insert_into_database\" do\n    it \"inserts clients into database from an array of hashes\" do\n      list_clients = [\n       {name: \"David\", birthday: \"13-12-1985\", email: \"daviddsrperiodismo@gmail.com\"},\n       {name: \"Javier\", birthday: \"05-05-1985\", email: \"javier@gmail.com\"}\n      ]\n      VipClient.insert_into_database(list_clients)\n      expect(VipClient.all.count).to eq(2)\n    end\n  end\nend\n</code></pre>\n\n<p>vip_client.rb</p>\n\n<pre><code>class VipClient\n  include ::DataMapper::Resource\n  property :id, Serial\n  property :name, Text\n  property :birthday, Date\n  property :email, Text  \n\n  def self.insert_into_database(list_clients)\n  end\n\nend\n</code></pre>\n\n<p>app.rb</p>\n\n<pre><code>require 'sinatra'\nrequire 'data_mapper'\nrequire 'roo'\nrequire 'pony'\n\n# HELPERS\nrequire './helpers/code'\nrequire './helpers/check_birthday_users'\nrequire './helpers/excel_parser'\n\n# MODELS\nrequire './models/vip_client.rb'\nrequire './models/invitations.rb'\n\ninclude Code\ninclude CheckUsers\n\nDataMapper.setup(:default, 'postgres://david:123456@localhost/usersmareta')\nDataMapper.finalize.auto_upgrade!\n</code></pre>\n\n<p>And my gemfile is this</p>\n\n<pre><code>source \"https://rubygems.org\"\n\ngem 'sinatra'\ngem 'pg'\ngem 'roo'\ngem 'data_mapper'\ngem 'dm-postgres-adapter'\ngem 'pony'\n\ngroup :development, :test do\n  gem 'rack-test'\n  gem 'rspec'\nend\n</code></pre>\n\n<p>As I've said. when I do rspec the console gives me this: </p>\n\n<pre><code>Failure/Error: DataMapper.finalize.auto_upgrade!\n     DataMapper::RepositoryNotSetupError:\n       Adapter not set: default. Did you forget to setup?\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "combinations"], "answers": [{"comments": [{"owner": {"reputation": 2904, "user_id": 2357380, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/d64384de6628ce31857b881d776e5c78?s=128&d=identicon&r=PG", "display_name": "Sri Harsha Kappala", "link": "https://stackoverflow.com/users/2357380/sri-harsha-kappala"}, "edited": false, "score": 0, "creation_date": 1431518452, "post_id": 30214112, "comment_id": 48532389, "body": "and I was about to post the same :)"}, {"owner": {"reputation": 191, "user_id": 1261284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69b612b537a6330385424b239aad71e1?s=128&d=identicon&r=PG&f=1", "display_name": "user1261284", "link": "https://stackoverflow.com/users/1261284/user1261284"}, "edited": false, "score": 0, "creation_date": 1431518553, "post_id": 30214112, "comment_id": 48532465, "body": "Thanks! May be you could give me a hint how to do <code>[[&quot;1a&quot;,&quot;1b&quot;],2,3,[&quot;4a&quot;,&quot;4b&quot;]]</code> as well?"}, {"owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "edited": false, "score": 0, "creation_date": 1431518926, "post_id": 30214112, "comment_id": 48532716, "body": "That&#39;s a bit harder, I think you&#39;d have to scan the top-level array and separate out all array elements from all non-array elements, and if order matters you&#39;d need to keep track of index as well. I don&#39;t know if there&#39;s a particularly clean solution though..."}, {"owner": {"reputation": 191, "user_id": 1261284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69b612b537a6330385424b239aad71e1?s=128&d=identicon&r=PG&f=1", "display_name": "user1261284", "link": "https://stackoverflow.com/users/1261284/user1261284"}, "edited": false, "score": 0, "creation_date": 1431519400, "post_id": 30214112, "comment_id": 48533032, "body": "Ok, this is what I was afraid of :) Do you know where I can find the <code>head, tail</code> in the ruby docs? I will update this question when I&#39;m done. You pushed me in the right direction. Thanks so far!"}, {"owner": {"reputation": 6267, "user_id": 1144104, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/c135bc644610fabc6e059b73fdd7f8ad?s=128&d=identicon&r=PG", "display_name": "jazzytomato", "link": "https://stackoverflow.com/users/1144104/jazzytomato"}, "edited": false, "score": 1, "creation_date": 1431519516, "post_id": 30214112, "comment_id": 48533123, "body": "<code>head</code> and <code>tail</code> are variables here, not methods"}, {"owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "edited": false, "score": 0, "creation_date": 1431519601, "post_id": 30214112, "comment_id": 48533176, "body": "On second thought, regarding &quot;no clean solution&quot;, I think if you recursively expanded each sub-array into multiple flat top-level arrays and then just call <code>combination</code> on those, that would work quite nicely..."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1431523311, "post_id": 30214112, "comment_id": 48536047, "body": "@user12341234 There is no need in recursion, everything might be done in <code>O(N)</code>, please see my answer below in case you are curious."}], "tags": [], "owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "is_accepted": false, "score": 2, "last_activity_date": 1431518225, "creation_date": 1431518225, "answer_id": 30214112, "question_id": 30213794, "link": "https://stackoverflow.com/questions/30213794/getting-combinations-of-multilevel-arrays-in-ruby/30214112#30214112", "title": "Getting combinations of multilevel arrays in ruby", "body": "<pre><code>a = [[\"1a\",\"1b\"],2,3,4]\n\nhead, tail = [a[0], a[1..-1]]\n\nres = head.flat_map{|h| ([h] + tail).combination(3).to_a}.uniq\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "edited": false, "score": 0, "creation_date": 1431524964, "post_id": 30215720, "comment_id": 48537503, "body": "Very nice! (5 more characters to go)"}, {"owner": {"reputation": 191, "user_id": 1261284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69b612b537a6330385424b239aad71e1?s=128&d=identicon&r=PG&f=1", "display_name": "user1261284", "link": "https://stackoverflow.com/users/1261284/user1261284"}, "edited": false, "score": 0, "creation_date": 1431526753, "post_id": 30215720, "comment_id": 48538988, "body": "Indeed! Thanks so much!"}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1431526967, "post_id": 30215720, "comment_id": 48539201, "body": "In fact, feel free to change a parameter, passed to <code>combination</code> from <code>2</code> upto initial array size: the code will still produce an expected result."}, {"owner": {"reputation": 191, "user_id": 1261284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69b612b537a6330385424b239aad71e1?s=128&d=identicon&r=PG&f=1", "display_name": "user1261284", "link": "https://stackoverflow.com/users/1261284/user1261284"}, "edited": false, "score": 0, "creation_date": 1431528383, "post_id": 30215720, "comment_id": 48540387, "body": "I did. I really learned a lot from this answer. Thanks again. Keep it up!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 3, "last_activity_date": 1431525476, "last_edit_date": 1431525476, "creation_date": 1431522353, "answer_id": 30215720, "question_id": 30213794, "link": "https://stackoverflow.com/questions/30213794/getting-combinations-of-multilevel-arrays-in-ruby/30215720#30215720", "title": "Getting combinations of multilevel arrays in ruby", "body": "<p>The solution below will flatten and product any combination of arrays and scalars:</p>\n\n<pre><code>a = [[\"1a\",\"1b\"],2,3,[\"4a\",\"4b\"]]\n\na.combination(a.size - 1).map do |e| \n  e.map { |scalar| [*scalar] } # convert scalars to arrays of size 1\nend.map do |arrays| \n  arrays.reduce &amp;:product      # reduce by vector/cartesian product\nend.flat_map do |deeps| \n  deeps.map &amp;:flatten          # flatten the result\nend\n\n#\u21d2 [\n#      [\"1a\", 2, 3], [\"1b\", 2, 3], [\"1a\", 2, \"4a\"], [\"1a\", 2, \"4b\"],\n#      [\"1b\", 2, \"4a\"], [\"1b\", 2, \"4b\"], [\"1a\", 3, \"4a\"], \n#      [\"1a\", 3, \"4b\"], [\"1b\", 3, \"4a\"], [\"1b\", 3, \"4b\"],\n#      [2, 3, \"4a\"], [2, 3, \"4b\"]\n#  ]\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 191, "user_id": 1261284, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/69b612b537a6330385424b239aad71e1?s=128&d=identicon&r=PG&f=1", "display_name": "user1261284", "link": "https://stackoverflow.com/users/1261284/user1261284"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 1, "accepted_answer_id": 30215720, "answer_count": 2, "score": 1, "last_activity_date": 1431525476, "creation_date": 1431517346, "question_id": 30213794, "link": "https://stackoverflow.com/questions/30213794/getting-combinations-of-multilevel-arrays-in-ruby", "title": "Getting combinations of multilevel arrays in ruby", "body": "<pre><code>a = [1,2,3,4].combination(3).to_a\n</code></pre>\n\n<p>returns</p>\n\n<pre><code>[[1, 2, 3], [1, 2, 4], [1, 3, 4], [2, 3, 4]]\n</code></pre>\n\n<p>What do I need to do to get the following combination of the array shown below</p>\n\n<pre><code>[[\"1a\",\"1b\"],2,3,4]\n</code></pre>\n\n<p>should be</p>\n\n<pre><code>=&gt; [[\"1a\", 2, 3], [\"1a\", 2, 4], [\"1a\", 3, 4],[\"1b\", 2, 3], [\"1b\", 2, 4], [\"1b\", 3, 4], [2, 3, 4]]\n</code></pre>\n\n<p>It is important that values from the second level <strong>aren't</strong> put in a combination together.</p>\n\n<p>The array could also be</p>\n\n<pre><code>[[\"1a\",\"1b\",\"1c\",...],2,3,4]\n</code></pre>\n\n<p>The values themselves are unique.</p>\n\n<p>Thanks in advance!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "passenger", "bundler", "capistrano3"], "comments": [{"owner": {"reputation": 6329, "user_id": 980524, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b22e5a796f12aa2d867670e29c81a7bb?s=128&d=identicon&r=PG", "display_name": "wpp", "link": "https://stackoverflow.com/users/980524/wpp"}, "edited": false, "score": 1, "creation_date": 1431517741, "post_id": 30213568, "comment_id": 48531829, "body": "Can you explain what you mean with &quot;I&#39;ve changed the RailsEnv to development only temporarily to view these logs.&quot; The problem is Rails reacts very differently (loads different gems etc) when you specify another environment. (That might also be the reason for the sqlite3 error)."}, {"owner": {"reputation": 670, "user_id": 4610973, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SdxFi.jpg?s=128&g=1", "display_name": "CryptoPiggy", "link": "https://stackoverflow.com/users/4610973/cryptopiggy"}, "reply_to_user": {"reputation": 6329, "user_id": 980524, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b22e5a796f12aa2d867670e29c81a7bb?s=128&d=identicon&r=PG", "display_name": "wpp", "link": "https://stackoverflow.com/users/980524/wpp"}, "edited": false, "score": 0, "creation_date": 1431534259, "post_id": 30213568, "comment_id": 48544622, "body": "Hi @wpp, I added &#39;RailsEnv development&#39; to /usr/local/apache/conf/userdata/std/2_2/rallyapp/**/rails.co&zwnj;&#8203;nf on my server to temporarily enable the site to show Passenger debugging info when loading the home page.  That showed the error starting with with &quot;Specified &#39;sqlite3&#39;...&quot;.  The other errors I posted above were from the terminal when running &#39;cap production deploy&#39; on the server while the environment was production."}, {"owner": {"reputation": 6329, "user_id": 980524, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b22e5a796f12aa2d867670e29c81a7bb?s=128&d=identicon&r=PG", "display_name": "wpp", "link": "https://stackoverflow.com/users/980524/wpp"}, "edited": false, "score": 0, "creation_date": 1431535557, "post_id": 30213568, "comment_id": 48545443, "body": "Ok so I&#39;d ignore the sqlite error. You could try running <code>cap deploy:cold  -d</code> to get more helpful output. But I&#39;m not great with capistrano, sry."}, {"owner": {"reputation": 670, "user_id": 4610973, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SdxFi.jpg?s=128&g=1", "display_name": "CryptoPiggy", "link": "https://stackoverflow.com/users/4610973/cryptopiggy"}, "reply_to_user": {"reputation": 6329, "user_id": 980524, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/b22e5a796f12aa2d867670e29c81a7bb?s=128&d=identicon&r=PG", "display_name": "wpp", "link": "https://stackoverflow.com/users/980524/wpp"}, "edited": false, "score": 0, "creation_date": 1431601625, "post_id": 30213568, "comment_id": 48573359, "body": "Thanks @wpp for the tip re. <b>cap deploy cold</b>.  I looked at <a href=\"http://capistranorb.com/documentation/getting-started/cold-start/\" rel=\"nofollow noreferrer\">capistranorb.com/documentation/getting-started/cold-start</a> and created and ran all the cap tasks on that page with no errors, so I must be getting close now. :)"}], "answers": [{"tags": [], "owner": {"reputation": 670, "user_id": 4610973, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SdxFi.jpg?s=128&g=1", "display_name": "CryptoPiggy", "link": "https://stackoverflow.com/users/4610973/cryptopiggy"}, "is_accepted": true, "score": 0, "last_activity_date": 1431601861, "creation_date": 1431601861, "answer_id": 30235872, "question_id": 30213568, "link": "https://stackoverflow.com/questions/30213568/cant-seem-to-get-bundler-to-run-properly-on-rails-app-server-using-capistrano-t/30235872#30235872", "title": "Can&#39;t seem to get Bundler to run properly on Rails App server using Capistrano to deploy", "body": "<p>I got past this problem by looking over my deploy.rb and uncommenting</p>\n\n<pre><code>set :linked_files, fetch(:linked_files, []).push('config/database.yml', 'config/secrets.yml')\n\nset :linked_dirs, fetch(:linked_dirs, []).push('log', 'tmp/pids', 'tmp/cache', 'tmp/sockets', 'vendor/bundle', 'public/system')\n</code></pre>\n\n<p>I think absence of the second line is was what caused the errors.  I also manually created the above two yaml files on my server.</p>\n\n<p>I'm now getting an error from rails about PostgreSQL, but that's progress as it's a higher level issue, so my question above is solved.  Thanks for pointers @wpp. </p>\n"}], "owner": {"reputation": 670, "user_id": 4610973, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/SdxFi.jpg?s=128&g=1", "display_name": "CryptoPiggy", "link": "https://stackoverflow.com/users/4610973/cryptopiggy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 329, "favorite_count": 0, "accepted_answer_id": 30235872, "answer_count": 1, "score": 1, "last_activity_date": 1431601861, "creation_date": 1431516767, "last_edit_date": 1431517625, "question_id": 30213568, "link": "https://stackoverflow.com/questions/30213568/cant-seem-to-get-bundler-to-run-properly-on-rails-app-server-using-capistrano-t", "title": "Can&#39;t seem to get Bundler to run properly on Rails App server using Capistrano to deploy", "body": "<p>I've been using Rails for a couple of months now and made a small app that I'm trying to deploy with Capistrano. The problem is that when I run </p>\n\n<pre><code>$ cap production deploy\n</code></pre>\n\n<p>the deployment appears to run correctly except for the following 3 errors: </p>\n\n<pre><code>DEBUG [764d7f01] Running /usr/bin/env [ -L /var/www/rally_app/releases/20150513103829/public/assets ] as deploy@255.255.255.255\nDEBUG [764d7f01] Command: [ -L /var/www/rally_app/releases/20150513103829/public/assets ]\nDEBUG [764d7f01] Finished in 3.347 seconds with exit status 1 (failed).\n\nDEBUG [929898d3] Running /usr/bin/env [ -d /var/www/rally_app/releases/20150513103829/public/assets ] as deploy@255.255.255.255\nDEBUG [929898d3] Command: [ -d /var/www/rally_app/releases/20150513103829/public/assets ]\nDEBUG [929898d3] Finished in 4.065 seconds with exit status 1 (failed).\n\n\nDEBUG [8917ed02] Running /usr/bin/env ls /var/www/rally_app/releases/20150513103829/public/assets/.sprockets-manifest* as deploy@255.255.255.255\nDEBUG [8917ed02] Command: cd /var/www/rally_app/releases/20150513103829 &amp;&amp; ( RBENV_ROOT=~/.rbenv RBENV_VERSION=2.2.1 /usr/bin/env ls /var/www/rally_app/releases/20150513103829/public/assets/.sprockets-manifest* )\nDEBUG [8917ed02]        ls: cannot access /var/www/rally_app/releases/20150513103829/public/assets/.sprockets-manifest*: No such file or directory\nDEBUG [8917ed02] Finished in 3.716 seconds with exit status 2 (failed).\n</code></pre>\n\n<p>Also, it appears Bundler doesn't run properly, because even though the App is supposed to use PostgreSQL in production, Passenger gives an error about sqlite3 stating:</p>\n\n<pre><code>Specified 'sqlite3' for database adapter, but the gem is not loaded. Add `gem 'sqlite3'` to your Gemfile (and ensure its version is at the minimum required by ActiveRecord). (Gem::LoadError)\n  /var/www/rally_app/shared/bundle/ruby/2.2.0/gems/activerecord\n</code></pre>\n\n<p>I've changed the RailsEnv to development only temporarily to view these logs.  If it will help to post more information from the Phusion Passenger logs, I am happy to post.  Please let me know.</p>\n\n<p>I'm Linux server admin savvy but I'm a complete Rails/Passenger/rbenv/Capistrano noob, so please consider this in your replies. :)</p>\n\n<p>Thanks in advance for any help.</p>\n\n<p>Alexis</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "json", "hash"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1431517391, "post_id": 30213536, "comment_id": 48531571, "body": "There is no valid json property <code>{v: 0}, {v: 3}, {v: 1}</code> unless these hashes are packed into an array, exactly as in your input data."}], "answers": [{"tags": [], "owner": {"reputation": 5207, "user_id": 3277393, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/a2967a01798ad7d675a6b39f41232a5b?s=128&d=identicon&r=PG&f=1", "display_name": "user12341234", "link": "https://stackoverflow.com/users/3277393/user12341234"}, "is_accepted": false, "score": 0, "last_activity_date": 1431518815, "creation_date": 1431518815, "answer_id": 30214318, "question_id": 30213536, "link": "https://stackoverflow.com/questions/30213536/separate-hashes-from-array/30214318#30214318", "title": "Separate hashes from array?", "body": "<p>Is this what you meant?</p>\n\n<pre><code>rows = {\n  rows: [\n        {c: [{v: \"Week 1\"}, [{v: 0}, {v: 3}, {v: 1}]]},\n        {c: [{v: 0}]},\n        {c: [{v: 0}]},\n        {c: [{v: 0}]}\n    ]\n}\n\nrows[:rows][0][:c].flatten!\n</code></pre>\n\n<p>which leaves <code>rows</code> with the value:</p>\n\n<pre><code>{\n  rows: [\n        {c: [{v: \"Week 1\"}, {v: 0}, {v: 3}, {v: 1}]},\n        {c: [{v: 0}]},\n        {c: [{v: 0}]},\n        {c: [{v: 0}]}\n    ]\n}\n</code></pre>\n"}], "owner": {"reputation": 1, "user_id": 4895372, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-yeuNk1P_OmM/AAAAAAAAAAI/AAAAAAAAAAw/2q7w88TF8Bs/photo.jpg?sz=128", "display_name": "jonathan Faulk", "link": "https://stackoverflow.com/users/4895372/jonathan-faulk"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 53, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1482949891, "creation_date": 1431516695, "last_edit_date": 1482949891, "question_id": 30213536, "link": "https://stackoverflow.com/questions/30213536/separate-hashes-from-array", "title": "Separate hashes from array?", "body": "<p>I am using google charts api with RoR 4.  I have this json data to populate my chart rows    </p>\n\n<pre><code>rows: [\n  {c: [{v: \"Week 1\"}, [{v: 0}, {v: 3}, {v: 1}]]}, \n  {c: [{v: 0}]}, \n  {c: [{v: 0}]}, \n  {c: [{v: 0}]}\n]\n</code></pre>\n\n<p>notice after the week 1 object another array of hashes(eg. <code>[{v: 0}, {v: 3}]</code>).</p>\n\n<p>Is there anyway to remove the containing array to format the json properly </p>\n\n<p><code>{v: 0}, {v: 3}, {v: 1}</code></p>\n\n<p>I have tried using numerous methods(inject,map,etc.) and have not been able to remove the containing array.</p>\n\n<pre><code> values = first_count.inject({}){|h,k| h[k] = 'v'; h}\n</code></pre>\n\n<p>I am formatting the data ruby and passing it to my chart via ajax.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1431517284, "post_id": 30213509, "comment_id": 48531489, "body": "As an aside: in Ruby 2.2 you can probably just use <a href=\"http://ruby-doc.org/core-2.2.2/String.html#method-i-scrub\" rel=\"nofollow noreferrer\"><code>String#scrub</code></a> to remove invalid bytes rather than encoding to UTF-16 and back."}, {"owner": {"reputation": 73, "user_id": 4751196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138b302ed67d4a19882f236ac6eb4995?s=128&d=identicon&r=PG&f=1", "display_name": "Toshihiro Yokota", "link": "https://stackoverflow.com/users/4751196/toshihiro-yokota"}, "reply_to_user": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 0, "creation_date": 1431587970, "post_id": 30213509, "comment_id": 48565903, "body": "@matt I&#39;ll try to use that. Thank you for the information."}], "answers": [{"comments": [{"owner": {"reputation": 73, "user_id": 4751196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138b302ed67d4a19882f236ac6eb4995?s=128&d=identicon&r=PG&f=1", "display_name": "Toshihiro Yokota", "link": "https://stackoverflow.com/users/4751196/toshihiro-yokota"}, "edited": false, "score": 0, "creation_date": 1431587869, "post_id": 30213557, "comment_id": 48565844, "body": "Thank you, @Marek Lipka. I&#39;m new to programming itself, so I often stack problems like this. Anyway, I appreciate to solve this."}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": true, "score": 2, "last_activity_date": 1431516735, "creation_date": 1431516735, "answer_id": 30213557, "question_id": 30213509, "link": "https://stackoverflow.com/questions/30213509/syntax-error-unexpected-expecting-or-or/30213557#30213557", "title": "Syntax error, unexpected &#39;}&#39;, expecting :: or &#39;[&#39; or &#39;.&#39;", "body": "<p>You forgot brackets (<code>[]</code>). It should be:</p>\n\n<pre><code>row = Hash[new_hash.map{ |k, v| [k, v.encode(\"UTF-16BE\", invalid: :replace, undef: :replace, replace: '?').encode(\"UTF-8\")] }]\n</code></pre>\n"}], "owner": {"reputation": 73, "user_id": 4751196, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/138b302ed67d4a19882f236ac6eb4995?s=128&d=identicon&r=PG&f=1", "display_name": "Toshihiro Yokota", "link": "https://stackoverflow.com/users/4751196/toshihiro-yokota"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 471, "favorite_count": 0, "accepted_answer_id": 30213557, "answer_count": 1, "score": 0, "last_activity_date": 1431525870, "creation_date": 1431516617, "last_edit_date": 1431525870, "question_id": 30213509, "link": "https://stackoverflow.com/questions/30213509/syntax-error-unexpected-expecting-or-or", "title": "Syntax error, unexpected &#39;}&#39;, expecting :: or &#39;[&#39; or &#39;.&#39;", "body": "<pre><code>row = Hash[new_hash.map { |k, v| k, v.encode(\"UTF-16BE\", invalid: :replace, undef: :replace, replace: '?').encode(\"UTF-8\") }]\n</code></pre>\n\n<p>This line in a controller causes an syntax error, but I can't find any mistakes. Can anyone figure out what's going wrong?</p>\n\n<p>This is a Rails application. <code>Ruby 2.2.0</code> and <code>Rails 4.2.0</code>.</p>\n"}, {"tags": ["ruby", "if-statement", "syntax"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 2, "creation_date": 1431516365, "post_id": 30213391, "comment_id": 48530840, "body": "Logical <i>and</i> takes precedence over logical <i>or</i> operators, so you need brackets. I would go with: <code>[3, 5, 7].include?(a) &amp;&amp; [2].include?(b) &amp;&amp; [5, 6].include?(c) &amp;&amp; [0, 8, 9].include?(d)</code> for the better readability."}, {"owner": {"reputation": 34664, "user_id": 390819, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ee2ef44de10f7791cca06df317246935?s=128&d=identicon&r=PG", "display_name": "Cristian Lupascu", "link": "https://stackoverflow.com/users/390819/cristian-lupascu"}, "edited": false, "score": 0, "creation_date": 1431516418, "post_id": 30213391, "comment_id": 48530879, "body": "also, you need two <code>end</code>s. One for the <code>def</code>, and one for the <code>if</code>."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431516425, "post_id": 30213391, "comment_id": 48530883, "body": "Certainly it&#39;s possible (what you are asking about). You just need to fix your condition. Remember (or learn) that <code>&amp;&amp;</code> is &quot;stronger&quot; than <code>||</code>, so <code>a || b &amp;&amp; c</code> is <code>a || (b &amp;&amp; c)</code>, not <code>(a || b) &amp;&amp; c</code>."}, {"owner": {"reputation": 771, "user_id": 4760308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be64f1f97717cf2dd2ef5786fa89385?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/4760308/phd"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431517544, "post_id": 30213391, "comment_id": 48531685, "body": "Thanks! Is it bad to make such long conditions? @SergioTulentsev"}], "answers": [{"tags": [], "owner": {"reputation": 2982, "user_id": 3176055, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c976138fc7bd60baa57b22e334816a44?s=128&d=identicon&r=PG&f=1", "display_name": "jon snow", "link": "https://stackoverflow.com/users/3176055/jon-snow"}, "is_accepted": false, "score": 0, "last_activity_date": 1431516385, "creation_date": 1431516385, "answer_id": 30213436, "question_id": 30213391, "link": "https://stackoverflow.com/questions/30213391/simple-ruby-syntax-if-statement-is-this-possible/30213436#30213436", "title": "Simple ruby syntax if statement. Is this possible?", "body": "<p>You should have to add bracket properly as per your logic. Like this,</p>\n\n<pre><code>((a == 3 || a == 5 || a == 7) &amp;&amp; (b == 2) &amp;&amp; (c == 5 || c == 6) &amp;&amp; (d == 8 || d == 9 || d == 0))\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 771, "user_id": 4760308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be64f1f97717cf2dd2ef5786fa89385?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/4760308/phd"}, "edited": false, "score": 0, "creation_date": 1431517652, "post_id": 30213669, "comment_id": 48531769, "body": "Thank you... Is it .include?d or .include?(d)"}], "tags": [], "owner": {"reputation": 2843, "user_id": 113644, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/LWJVp.png?s=128&g=1", "display_name": "G B", "link": "https://stackoverflow.com/users/113644/g-b"}, "is_accepted": true, "score": 3, "last_activity_date": 1431517019, "creation_date": 1431517019, "answer_id": 30213669, "question_id": 30213391, "link": "https://stackoverflow.com/questions/30213391/simple-ruby-syntax-if-statement-is-this-possible/30213669#30213669", "title": "Simple ruby syntax if statement. Is this possible?", "body": "<p>I would use <code>include?</code> to make it more readable:</p>\n\n<pre><code>if ([3,5,7].include?a and b == 2 and [5,6].include?c and [8,9,0].include?d)\n</code></pre>\n"}], "owner": {"reputation": 771, "user_id": 4760308, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1be64f1f97717cf2dd2ef5786fa89385?s=128&d=identicon&r=PG&f=1", "display_name": "phd", "link": "https://stackoverflow.com/users/4760308/phd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 54, "favorite_count": 0, "accepted_answer_id": 30213669, "answer_count": 2, "score": 0, "last_activity_date": 1431525974, "creation_date": 1431516233, "last_edit_date": 1431525974, "question_id": 30213391, "link": "https://stackoverflow.com/questions/30213391/simple-ruby-syntax-if-statement-is-this-possible", "title": "Simple ruby syntax if statement. Is this possible?", "body": "<p>I'm really new to programming and would like to know if this is possible: </p>\n\n<pre><code>def lock(a,b,c,d)\nif (a == 3 || a == 5 || a == 7 &amp;&amp; b == 2 &amp;&amp; c == 5 || c == 6 &amp;&amp; d == 8 || d == 9 || d == 0)\n  \"unlocked\"\nelse\n  \"locked\"\nend\n</code></pre>\n\n<p>If it isn't possible, why?</p>\n\n<p>So when I pass in: <code>lock(3,1,1,1)</code> it should be locked. </p>\n\n<p>Should I do this differently? Is there a better way? </p>\n"}, {"tags": ["ruby", "regex", "validation"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1431515491, "post_id": 30213085, "comment_id": 48530197, "body": "What language are you using?"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1431515838, "post_id": 30213085, "comment_id": 48530417, "body": "Check the answers of this question: <a href=\"http://stackoverflow.com/questions/3644266/how-can-we-match-an-bn-with-java-regex\" title=\"how can we match an bn with java regex\">stackoverflow.com/questions/3644266/&hellip;</a>"}, {"owner": {"reputation": 56328, "user_id": 4265352, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-lzAUc5pYb24/AAAAAAAAAAI/AAAAAAAAAGQ/q3h7bZUnqrs/photo.jpg?sz=128", "display_name": "axiac", "link": "https://stackoverflow.com/users/4265352/axiac"}, "edited": false, "score": 1, "creation_date": 1431516066, "post_id": 30213085, "comment_id": 48530604, "body": "Or check the string against <code>&#47;(0+)(1+)&#47;</code> then compare the lengths of the captured sub-expressions."}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1431552861, "post_id": 30213085, "comment_id": 48555062, "body": "Actually, the question mentioned does not have an example for Ruby."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1431554489, "post_id": 30213085, "comment_id": 48555753, "body": "@stribizhev Care to be more explicit about why those regexes won&#39;t work with Ruby&#39;s regex engine?"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1431554868, "post_id": 30213085, "comment_id": 48555926, "body": "@muistooshort: In Ruby, the subroutines have different syntax that is rather misleading since it looks like a back-reference."}], "answers": [{"comments": [{"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1431519025, "post_id": 30213522, "comment_id": 48532777, "body": "It can be done if you adapt <code>&#39;&#47; ^ (a (?1)? b) $ &#47;x&#39;</code> to Ruby: <a href=\"http://rubular.com/r/9JZfVgVosj\" rel=\"nofollow noreferrer\">rubular.com/r/9JZfVgVosj</a>"}, {"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "reply_to_user": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1431519340, "post_id": 30213522, "comment_id": 48532990, "body": "I have found out where I was wrong thanks to <a href=\"http://www.rexegg.com/regex-disambiguation.html\" rel=\"nofollow noreferrer\">rexegg.com</a> I was just unaware of the <code>\\g&lt;1&gt;</code> notation. Your suggestion - <code>^(?&lt;k&gt;a\\g&lt;k&gt;?b)$</code> - is also working well, as I see."}, {"owner": {"reputation": 52749, "user_id": 1400768, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/tM0N8.png?s=128&g=1", "display_name": "nhahtdh", "link": "https://stackoverflow.com/users/1400768/nhahtdh"}, "edited": false, "score": 0, "creation_date": 1431519422, "post_id": 30213522, "comment_id": 48533054, "body": "Oh, <code>\\g&lt;1&gt;</code> works. Rubular&#39;s error message is really misleading."}], "tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": false, "score": 0, "last_activity_date": 1431519281, "last_edit_date": 1431519281, "creation_date": 1431516650, "answer_id": 30213522, "question_id": 30213085, "link": "https://stackoverflow.com/questions/30213085/how-to-check-if-count-of-one-part-of-the-string-is-equal-to-another-part-with-re/30213522#30213522", "title": "How to check if count of one part of the string is equal to another part with regex?", "body": "<p>In Ruby, you can use subroutines:</p>\n\n<pre><code>m = /\\b(0(\\g&lt;1&gt;)?1)\\b/.match('000111');\nputs m;\n</code></pre>\n\n<p><a href=\"https://ideone.com/AdzDPs\" rel=\"nofollow\">Result of the demo</a>:</p>\n\n<pre><code>000111\n</code></pre>\n\n<p>Or, you can just use capturing groups to match adjacent <code>0</code>s and <code>1</code>s, and then check the captured group length:</p>\n\n<pre><code>m = /(0+)(1+)/.match('0011');\nputs m[1].length === m[2].length ? \"True\" : \"False\";\n\nm = /(0+)(1+)/.match('00111');\nputs m[1].length === m[2].length ? \"True\" : \"False\";\n</code></pre>\n\n<p>You may add <code>^</code> and <code>$</code> to only match a string consisting of leading zeros and trailing <code>1</code>s (<code>m = /^(0+)(1+)$/.match('00111');</code>).</p>\n\n<p>Output of the <a href=\"https://ideone.com/HUEKxR\" rel=\"nofollow\">demo program</a>:</p>\n\n<pre><code>True\nFalse\n</code></pre>\n"}], "owner": {"reputation": 9, "user_id": 4117154, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-wnokl0tC1-g/AAAAAAAAAAI/AAAAAAAAAFk/LCYI5ieB2bc/photo.jpg?sz=128", "display_name": "Nikita", "link": "https://stackoverflow.com/users/4117154/nikita"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 83, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1455696160, "creation_date": 1431515408, "last_edit_date": 1431552818, "question_id": 30213085, "link": "https://stackoverflow.com/questions/30213085/how-to-check-if-count-of-one-part-of-the-string-is-equal-to-another-part-with-re", "title": "How to check if count of one part of the string is equal to another part with regex?", "body": "<p>I have a strings like:</p>\n\n<pre><code>0011\n01\n000111\n000111\n</code></pre>\n\n<p>I need to validate them like this: count of \"0\" must be identical to the count of \"1\". So \"001\" - invalid, \"0011\" - valid.</p>\n\n<p>How can I do this with regex?</p>\n"}, {"tags": ["ruby", "windows"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1431513909, "post_id": 30211780, "comment_id": 48529075, "body": "I have no windows machine to check, that\u2019s why the suggestion only. Try to explicitly set the encoding on the input: <code>myString.force_encoding(&#39;UTF-8&#39;)....</code>."}, {"owner": {"reputation": 4557, "user_id": 1847280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4124a0c3fbe08db2e0021e3e09b76e7f?s=128&d=identicon&r=PG", "display_name": "Yevgeniy Anfilofyev", "link": "https://stackoverflow.com/users/1847280/yevgeniy-anfilofyev"}, "edited": false, "score": 1, "creation_date": 1431514029, "post_id": 30211780, "comment_id": 48529164, "body": "Actualy, it works, Windows 7, ruby 2.2.1"}, {"owner": {"reputation": 4288, "user_id": 527152, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6c784b2e1c3fb28d8bad8f50ca0282b4?s=128&d=identicon&r=PG", "display_name": "Azolo", "link": "https://stackoverflow.com/users/527152/azolo"}, "edited": false, "score": 1, "creation_date": 1431525480, "post_id": 30211780, "comment_id": 48537917, "body": "What code page are you running? Run <code>chcp</code> to figure out."}], "answers": [{"tags": [], "owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "is_accepted": true, "score": 2, "last_activity_date": 1431514526, "creation_date": 1431514526, "answer_id": 30212774, "question_id": 30211780, "link": "https://stackoverflow.com/questions/30211780/special-character-uppercase/30212774#30212774", "title": "Special character uppercase", "body": "<p>Unfortunately, it is impossible to correctly upcase/downcase a string without knowing the language and it in some cases even the contents of the string.</p>\n\n<p>For example, in English the uppercase variant of <code>i</code> is <code>I</code> and the lowercase variant of <code>I</code> is <code>i</code>, but in Turkish the uppercase variant of <code>i</code> is <code>\u0130</code> and the lowercase variant of <code>I</code> is <code>\u0131</code>. In German, the uppercase variant of <code>\u00df</code> is <code>SS</code>, but so is the uppercase variant of <code>ss</code>, so to downcase, you need to understand the text, because e.g. <code>MASSE</code> could be downcased to either <code>masse</code> (mass) or <code>ma\u00dfe</code> (measurements).</p>\n\n<p>Ruby takes the easy way out and simply only uppercases/downcases within the ASCII alphabet.</p>\n\n<p>However, that only explains why your workaround is <em>needed</em>, not why it sometimes works and sometimes doesn't. Provided that you use the same Ruby version and the same Ruby implementation and the same version of the implementation on all platforms, it <em>should</em> work. YARV doesn't use the underlying platform's string manipulation routines much (the same is true for most Ruby implementations, actually, even JRuby doesn't use Java's powerful string libraries but rolls its own for maximum compatibility), and it also doesn't use any third-party libraries (like e.g. ICU) except Onigmo, so it's unlikely that platform differences are to blame. Different versions of Ruby use different versions of the Unicode Character Database, though (e.g. I believe it was updated somewhere between 1.9 and 2.2 at least once), so if you have a version mismatch, that might explain it.</p>\n\n<p>Or, it might be a genuine bug in YARV on Windows. Maybe try JRuby? It tends to be more consistent between platforms, in fact, on Windows, it is more compatible with Ruby than Ruby (i.e. YARV) itself!</p>\n"}, {"tags": [], "owner": {"reputation": 352, "user_id": 3849241, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/X7Hpj.jpg?s=128&g=1", "display_name": "Yuri Karpovich", "link": "https://stackoverflow.com/users/3849241/yuri-karpovich"}, "is_accepted": false, "score": 4, "last_activity_date": 1431678596, "last_edit_date": 1431678596, "creation_date": 1431610744, "answer_id": 30238865, "question_id": 30211780, "link": "https://stackoverflow.com/questions/30211780/special-character-uppercase/30238865#30238865", "title": "Special character uppercase", "body": "<p>Try <code>mb_chars</code> method if you are using <strong>Rails >= 3</strong>. For example, </p>\n\n<pre><code> '\u00e6-\u00fd'.mb_chars.upcase\n\n =&gt; \"\u00c6-\u00dd\"\n</code></pre>\n\n<hr>\n\n<p>If you're <strong>not using Rails</strong> please try <a href=\"https://github.com/blackwinter/unicode\" rel=\"nofollow\">unicode</a> gem. </p>\n\n<pre><code> Unicode::upcase('\u00e6-\u00fd')\n</code></pre>\n\n<p>Or you can override <code>String</code> class methods as well:</p>\n\n<pre><code>require \"unicode\";\nclass String\n   def downcase\n     Unicode::downcase(self)\n   end\n   def downcase!\n     self.replace downcase\n   end\n   def upcase\n     Unicode::upcase(self)\n   end\n   def upcase!\n     self.replace upcase\n   end\n   def capitalize\n     Unicode::capitalize(self)\n   end\n   def capitalize!\n     self.replace capitalize\n   end\nend \n</code></pre>\n"}], "owner": {"reputation": 543, "user_id": 3879808, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/5dmkf.png?s=128&g=1", "display_name": "MiningSam", "link": "https://stackoverflow.com/users/3879808/miningsam"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1654, "favorite_count": 0, "accepted_answer_id": 30212774, "answer_count": 2, "score": 2, "last_activity_date": 1431678596, "creation_date": 1431511923, "question_id": 30211780, "link": "https://stackoverflow.com/questions/30211780/special-character-uppercase", "title": "Special character uppercase", "body": "<p>I have strings with a bunch of special characters. This works:</p>\n\n<pre><code>myString.upcase.tr('\u00e6-\u00fd','\u00c6-\u00dd')\n</code></pre>\n\n<p>However, it does not work really cross-platform. My Ruby implementation on Windows won't go with this (on my Mac and Linux machines, works like a charm). Any pointers / workarounds / solutions, really appreciated! </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "highcharts"], "answers": [{"tags": [], "owner": {"reputation": 1184, "user_id": 1269041, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/0f4555652545040e404bd072400c810c?s=128&d=identicon&r=PG", "display_name": "konart", "link": "https://stackoverflow.com/users/1269041/konart"}, "is_accepted": false, "score": 1, "last_activity_date": 1431515380, "last_edit_date": 1495541963, "creation_date": 1431514635, "answer_id": 30212827, "question_id": 30211338, "link": "https://stackoverflow.com/questions/30211338/loading-json-data-in-ruby-on-rails-to-use-highcharts/30212827#30212827", "title": "Loading JSON data in Ruby on rails to use HIGHCHARTS", "body": "<p>Haven't worked with RoR yet, but my best guess will be that either your json file should be in the <code>assets</code> folder. (or some other folder used for static files).</p>\n\n<p>The other way around (the right way, I believe) will be to have a separate controller, that will render you json file after you have requested it via js code. See this question: <a href=\"https://stackoverflow.com/questions/12274463/getting-data-using-jquery-getjson-in-ruby-on-rails\">getting data using jquery getJSON in ruby on rails</a></p>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user1883746"}, "edited": false, "score": 0, "creation_date": 1431676134, "post_id": 30214475, "comment_id": 48608542, "body": "Maybe it works, but I am trying to load a JSON file (30000 rows) instead of writing manually the data in the controller. The example from Highcharts &#39;Preprocess data using JSON&#39; is not working for me."}, {"owner": {"reputation": 1099, "user_id": 2024073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mETW6.jpg?s=128&g=1", "display_name": "Sarwan Kumar", "link": "https://stackoverflow.com/users/2024073/sarwan-kumar"}, "edited": false, "score": 0, "creation_date": 1431680358, "post_id": 30214475, "comment_id": 48610647, "body": "I have updated answer with both options, now It will help you."}, {"owner": {"user_type": "does_not_exist", "display_name": "user1883746"}, "edited": false, "score": 0, "creation_date": 1431683236, "post_id": 30214475, "comment_id": 48612518, "body": "it shows now the JSON file but no plot: [ [1,12], [2,5], [3,18], [4,13], [5,7], [6,4], [7,9], [8,10], [9,15], [10,22] ]."}, {"owner": {"reputation": 36819, "user_id": 2021935, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yDqq8.jpg?s=128&g=1", "display_name": "Sebastian Bochan", "link": "https://stackoverflow.com/users/2021935/sebastian-bochan"}, "edited": false, "score": 0, "creation_date": 1431941296, "post_id": 30214475, "comment_id": 48694901, "body": "In case when you have many points, try to set 0 for <a href=\"http://api.highcharts.com/highcharts#plotOptions.series.turboThreshold\" rel=\"nofollow noreferrer\">turbothreshold</a> parameter"}], "tags": [], "owner": {"reputation": 1099, "user_id": 2024073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mETW6.jpg?s=128&g=1", "display_name": "Sarwan Kumar", "link": "https://stackoverflow.com/users/2024073/sarwan-kumar"}, "is_accepted": true, "score": 1, "last_activity_date": 1431680327, "last_edit_date": 1431680327, "creation_date": 1431519275, "answer_id": 30214475, "question_id": 30211338, "link": "https://stackoverflow.com/questions/30211338/loading-json-data-in-ruby-on-rails-to-use-highcharts/30214475#30214475", "title": "Loading JSON data in Ruby on rails to use HIGHCHARTS", "body": "<p>You need to create a controller, let say ChartsController. and write following method in charts_controller.rb</p>\n\n<pre><code>def data\n  # this method is to send manually json data \n  #render json: {name: 'test',data: [2,0,9,23,2,123]}\n  # or read data from a data.json file, use your custom path\n  data = File.read(\"#{Rails.root}/app/views/charts/data.json\")\n  render json: data\nend\n</code></pre>\n\n<p>and, in your view write this code.  </p>\n\n<pre><code>&lt;script src=\"/assets/jquery.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://code.highcharts.com/stock/highstock.js\"&gt;&lt;/script&gt;\n&lt;script src=\"http://code.highcharts.com/stock/modules/exporting.js\"&gt;&lt;/script&gt;\n&lt;h1&gt;Start&lt;/h1&gt;\n&lt;div id=\"container\" style=\"width:100%;height:400px;\"&gt;&lt;/div&gt;\n&lt;script&gt;  \n\n$(document).ready(function() {\n    options = {\n        chart: {\n            renderTo: 'container',\n            type: 'spline'\n        },\n        series: [{}]\n    };\n    $.getJSON('data.json', function(data) {\n        options.series = data;\n        new Highcharts.Chart(options);\n    });\n\n});\n</code></pre>\n\n<p></p>\n\n<pre><code>&lt;h1&gt;End&lt;/h1&gt;\n</code></pre>\n\n<p>I have tried, it works at my side, hopefully it work successfully.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user1883746"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1771, "favorite_count": 1, "accepted_answer_id": 30214475, "answer_count": 2, "score": 2, "last_activity_date": 1431680327, "creation_date": 1431510799, "last_edit_date": 1431511143, "question_id": 30211338, "link": "https://stackoverflow.com/questions/30211338/loading-json-data-in-ruby-on-rails-to-use-highcharts", "title": "Loading JSON data in Ruby on rails to use HIGHCHARTS", "body": "<p>I want to load a JSON data in RoR 4 to graphic the data using Highcharts.\nI have in <code>index.html.erb</code></p>\n\n<pre><code>{&lt;h1 style=\"text-align:center\" &gt;HighCharts Test&lt;/h1&gt;\n&lt;h1&gt;Start&lt;/h1&gt;\n&lt;div id=\"container\" style=\"width:100%;height:400px;\"&gt;&lt;/div&gt;\n&lt;script&gt;\n   $(document).ready(function() {\n\n    var options = {\n        chart: {\n            renderTo: 'container',\n            type: 'spline'\n        },\n        series: [{}]\n    };\n\n    $.getJSON('data.json', function(data) {\n        options.series[0].data = data;\n        var chart = new Highcharts.Chart(options);\n    });\n\n});\n&lt;/script&gt;\n&lt;h1&gt;End&lt;/h1&gt;}\n</code></pre>\n\n<p>The <code>data.json</code> is in the same folder as <code>index.html.erb</code>. </p>\n\n<p>However, it is not plotting anything when i run the code. Im very new to RoR and Highcharts. Whats the error? Thank you.</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "edited": false, "score": 0, "creation_date": 1431515420, "post_id": 30210971, "comment_id": 48530151, "body": "if you comment this out the error disappears ?"}, {"owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "reply_to_user": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "edited": false, "score": 0, "creation_date": 1431517479, "post_id": 30210971, "comment_id": 48531633, "body": "I don&#39;t get you , which one I comment?"}, {"owner": {"reputation": 3397, "user_id": 2563282, "user_type": "registered", "accept_rate": 48, "profile_image": "https://i.stack.imgur.com/nCJrZ.jpg?s=128&g=1", "display_name": "G.B", "link": "https://stackoverflow.com/users/2563282/g-b"}, "edited": false, "score": 0, "creation_date": 1431590270, "post_id": 30210971, "comment_id": 48567022, "body": "actually stack level too deep error occurs when you calling method inside another and it goes on. so which of your line produces this i am not sure."}], "owner": {"reputation": 798, "user_id": 4091011, "user_type": "registered", "accept_rate": 61, "profile_image": "https://www.gravatar.com/avatar/f05f3852947f6076f3ad900ec0dac603?s=128&d=identicon&r=PG&f=1", "display_name": "RAJ", "link": "https://stackoverflow.com/users/4091011/raj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 195, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1431509861, "creation_date": 1431509861, "question_id": 30210971, "link": "https://stackoverflow.com/questions/30210971/stack-level-too-deep-systemstackerror-error-occurs-when-i-just-try-to-open-a-i", "title": "stack level too deep (SystemStackError) error occurs when I just try to open a IE browser", "body": "<p>I have written the following the code,</p>\n\n<pre><code>require 'rubygems'\nrequire 'watir'\nb=Watir::Browser.new\nb.goto 'www.google.com'\n</code></pre>\n\n<p>When I am executing the above code, It throws the following error,</p>\n\n<pre><code> C:/Ruby21/lib/ruby/2.1.0/monitor.rb:195: stack level too deep (SystemStackError)\n</code></pre>\n\n<p>I am using RUBY 2.1.5 and WATIR 4.0.2, Is there any solution for this error? </p>\n"}, {"tags": ["ruby", "io", "eof"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 1, "creation_date": 1431514503, "post_id": 30210790, "comment_id": 48529507, "body": "What do you use to read from a file? I experience no problem reading past that symbol under Linux: <code>p File.read my_file.path #\u21d2&quot;Content \\u001A Content 2&quot;</code>. BTW, I can\u2019t even guess why ruby won\u2019t read past it."}, {"owner": {"reputation": 61, "user_id": 2845700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84ea6b5bf6bc1d1102c8cc8fd2378145?s=128&d=identicon&r=PG&f=1", "display_name": "Chloiber", "link": "https://stackoverflow.com/users/2845700/chloiber"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1431520157, "post_id": 30210790, "comment_id": 48533600, "body": "@mudasobwa: Added a code snippet. Using windows as coding environment."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1431520438, "post_id": 30210790, "comment_id": 48533806, "body": "So what\u2019s the problem to read the whole file, do whatever you want and write it back as I shew above?"}, {"owner": {"reputation": 61, "user_id": 2845700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84ea6b5bf6bc1d1102c8cc8fd2378145?s=128&d=identicon&r=PG&f=1", "display_name": "Chloiber", "link": "https://stackoverflow.com/users/2845700/chloiber"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1431520687, "post_id": 30210790, "comment_id": 48533993, "body": "The file is 2-5GB in size, so I need to read line by line."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 1, "creation_date": 1431521983, "post_id": 30210790, "comment_id": 48534995, "body": "The second argument to <code>foreach</code> is the separator to use. I doubt you want to split the file on the letter <code>r</code>. Do you mean &quot;\\r&quot;, or do you want <code>:mode =&gt; &#39;r&#39;</code> (or something else)?"}, {"owner": {"reputation": 61, "user_id": 2845700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84ea6b5bf6bc1d1102c8cc8fd2378145?s=128&d=identicon&r=PG&f=1", "display_name": "Chloiber", "link": "https://stackoverflow.com/users/2845700/chloiber"}, "edited": false, "score": 0, "creation_date": 1431523348, "post_id": 30210790, "comment_id": 48536081, "body": "Whoops, I actually copied it incorrectly. I did not have any second argument. Edited accordingly."}, {"owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "edited": false, "score": 1, "creation_date": 1431523734, "post_id": 30210790, "comment_id": 48536371, "body": "Does reading in binary mode help (<code>:mode =&gt; &#39;rb&#39;</code>)?"}], "owner": {"reputation": 61, "user_id": 2845700, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/84ea6b5bf6bc1d1102c8cc8fd2378145?s=128&d=identicon&r=PG&f=1", "display_name": "Chloiber", "link": "https://stackoverflow.com/users/2845700/chloiber"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 723, "favorite_count": 0, "answer_count": 0, "score": 3, "last_activity_date": 1431523359, "creation_date": 1431509407, "last_edit_date": 1431523359, "question_id": 30210790, "link": "https://stackoverflow.com/questions/30210790/ruby-read-and-write-eof-character", "title": "Ruby - Read and Write &#39;EOF&#39; Character", "body": "<p>I have come across a document which I need to parse that contains an old MS-DOS EOF character (see <a href=\"http://en.wikipedia.org/wiki/Substitute_character\" rel=\"nofollow\">http://en.wikipedia.org/wiki/Substitute_character</a>). The issue is that Ruby does not read past this character. What I need to do, however, is read the line which contains this character and write it back unchanged.<br>\nI assume writing the character shouldn't be too difficult, as I know the ASCII code, the main issue is that Ruby simply stops reading the file after it encounters this character.<br>\nI use something like the following code:  </p>\n\n<pre><code>lineNumber = 0\nFile.foreach(sourcePath) do |li|\n     lineNumber = lineNumber + 1\nend\nputs lineNumber\n</code></pre>\n"}, {"tags": ["ruby", "rubygems", "redhat"], "comments": [{"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1431508615, "post_id": 30210395, "comment_id": 48525471, "body": "If you are in a hurry, any chance with RVM or rbenv? And YUM should give you information about the package versions. Note that Rails has got some constraints on the <a href=\"http://guides.rubyonrails.org/upgrading_ruby_on_rails.html\" rel=\"nofollow noreferrer\">Ruby version to run on</a>."}, {"owner": {"reputation": 1717, "user_id": 1158142, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/15OA1.jpg?s=128&g=1", "display_name": "ipohfly", "link": "https://stackoverflow.com/users/1158142/ipohfly"}, "reply_to_user": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1431510916, "post_id": 30210395, "comment_id": 48527124, "body": "the server doesn&#39;t have RVM or rbenv. i&#39;m a bit confused with the relationship; between Ruby and RVM or rbenv though. Those 2 can intall Ruby on the server right? But then they do not depends on Ruby itself?"}, {"owner": {"reputation": 8771, "user_id": 2050, "user_type": "registered", "accept_rate": 71, "profile_image": "https://www.gravatar.com/avatar/2d1e9a607c47a89730352dd7b9dacaab?s=128&d=identicon&r=PG", "display_name": "Eric Platon", "link": "https://stackoverflow.com/users/2050/eric-platon"}, "edited": false, "score": 0, "creation_date": 1431569996, "post_id": 30210395, "comment_id": 48560080, "body": "RVM and rbenv are Ruby installers. They do not rely on Ruby (e.g. RVM is a set of shell scripts). The point is that they allow you to choose the Ruby version you want to install. Please check the version you need for Rails at the aforementioned link. Recent version of Rails have dropped Ruby versions up to 1.9.3, etc."}], "answers": [{"tags": [], "owner": {"reputation": 1568, "user_id": 3957977, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/KVs29.jpg?s=128&g=1", "display_name": "Eugene Petrov", "link": "https://stackoverflow.com/users/3957977/eugene-petrov"}, "is_accepted": false, "score": 0, "last_activity_date": 1431536408, "creation_date": 1431536408, "answer_id": 30221063, "question_id": 30210395, "link": "https://stackoverflow.com/questions/30210395/trouble-running-rubygems-on-redhat-5-5/30221063#30221063", "title": "Trouble running RubyGems on Redhat 5.5", "body": "<p>Suspicious here is that yum installed ruby 1.8 which is pretty outdated version, it seems you have two versions of ruby on your system now and gem tries to use the old one.</p>\n\n<p>Check the version of the package installed recently and try to force rubygems to use the new version(by removing the old ruby or linking to the path returned by <code>which ruby</code>)</p>\n"}, {"tags": [], "owner": {"reputation": 45322, "user_id": 421705, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/581b1760881c962648f99d6040d41829?s=128&d=identicon&r=PG", "display_name": "Holger Just", "link": "https://stackoverflow.com/users/421705/holger-just"}, "is_accepted": true, "score": 1, "last_activity_date": 1431537701, "creation_date": 1431537701, "answer_id": 30221457, "question_id": 30210395, "link": "https://stackoverflow.com/questions/30210395/trouble-running-rubygems-on-redhat-5-5/30221457#30221457", "title": "Trouble running RubyGems on Redhat 5.5", "body": "<p>RedHat 5 ships with Ruby 1.8.5 and an equally old rubygems. Both, the rubygems and the ruby version is WAY too old to be supported by anything outside the base packages of the OS anymore. Even in the OS packages, they probably won't change anything on their own due to the age of their whole system.</p>\n\n<p>If you really want/have to use Ruby on Red Hat 5, you probably need to get another source for it that the RPMs provided by the OS, e.g. <a href=\"https://github.com/sstephenson/rbenv\" rel=\"nofollow\">rbenv</a> / <a href=\"https://github.com/sstephenson/ruby-build\" rel=\"nofollow\">ruby-build</a> or <a href=\"https://github.com/postmodern/ruby-install\" rel=\"nofollow\">ruby-install</a> or even <a href=\"https://rvm.io/\" rel=\"nofollow\">rvm</a>. You should use a newer Ruby version, i.e. a 2.1 or 2.2 version. All Ruby versions &lt; 2.0 are unsupported by the language developers by now.</p>\n\n<p>Alternatively, you should try to use a newer version of RedHat, i.e. RedHat 7 which doesn't need to support to 8 year old software...</p>\n"}], "owner": {"reputation": 1717, "user_id": 1158142, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/15OA1.jpg?s=128&g=1", "display_name": "ipohfly", "link": "https://stackoverflow.com/users/1158142/ipohfly"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 128, "favorite_count": 0, "accepted_answer_id": 30221457, "answer_count": 2, "score": 0, "last_activity_date": 1431537701, "creation_date": 1431508366, "last_edit_date": 1495541196, "question_id": 30210395, "link": "https://stackoverflow.com/questions/30210395/trouble-running-rubygems-on-redhat-5-5", "title": "Trouble running RubyGems on Redhat 5.5", "body": "<p>Am trying to install Ruby and RubyGems on a RedHat 5.5 machine. I'd got them by running the following two commands:</p>\n\n<pre><code>sudo yum install ruby\nsudo yum install rubygems\n</code></pre>\n\n<p>Got both installed. However when i try to run <code>gem</code>, i got the following error:</p>\n\n<blockquote>\n  <p>/usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:31:in\n  <code>require': undefined method</code>end_with?' for \"no such file to load --\n  Win32API\":String (NoMethodError)\n          from /usr/lib/ruby/site_ruby/1.8/rubygems/config_file.rb:55\n          from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in\n  <code>gem_original_require'\n          from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in</code>require'\n          from /usr/lib/ruby/site_ruby/1.8/rubygems/gem_runner.rb:8\n          from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in\n  <code>gem_original_require'\n          from /usr/lib/ruby/site_ruby/1.8/rubygems/custom_require.rb:29:in</code>require'\n          from /usr/bin/gem:9</p>\n</blockquote>\n\n<p>Doesn't matter what kind of command i run, it throws that. (I tried <code>gem -v</code>, <code>gem update</code>)</p>\n\n<p>The version of Ruby seems to be <em>1.8</em> but i have problem determining the RubyGems version. I'd <code>vi</code> into <code>rubygems.rb</code> and at the top it stats the version as <em>1.5</em>.</p>\n\n<p>Try to fix by running the downgrade command as proposed <a href=\"https://stackoverflow.com/questions/4959577/undefined-method-end-with-for-no-such-file-to-load-win32apistring-nome\">here</a>, but it throws the same error as well.</p>\n\n<p>Any help on fixing this issue? Just want to get this running so that i can run a RoR apps..</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "comparison"], "comments": [{"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1431508730, "post_id": 30210348, "comment_id": 48525565, "body": "is there always 2 numbers?"}, {"owner": {"reputation": 11562, "user_id": 1016536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sk0Hl.png?s=128&g=1", "display_name": "TheLegend", "link": "https://stackoverflow.com/users/1016536/thelegend"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1431508870, "post_id": 30210348, "comment_id": 48525690, "body": "there can be quite a few numbers. [1,2,99,901] example would be 99 then 901 then 2 then 1"}], "answers": [{"comments": [{"owner": {"reputation": 11562, "user_id": 1016536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sk0Hl.png?s=128&g=1", "display_name": "TheLegend", "link": "https://stackoverflow.com/users/1016536/thelegend"}, "edited": false, "score": 0, "creation_date": 1431509453, "post_id": 30210708, "comment_id": 48526141, "body": "That works, and is mind bending at the same time! its going to take me a while to see how that works"}, {"owner": {"reputation": 11562, "user_id": 1016536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sk0Hl.png?s=128&g=1", "display_name": "TheLegend", "link": "https://stackoverflow.com/users/1016536/thelegend"}, "edited": false, "score": 0, "creation_date": 1431509908, "post_id": 30210708, "comment_id": 48526446, "body": "ok so when a integer is converted to a string it then has an alphabetical reference. and the reference of 9 would in this case be lower than 1, and then we reverse it and alphabetically 99 would be higher than 901?"}, {"owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "reply_to_user": {"reputation": 11562, "user_id": 1016536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sk0Hl.png?s=128&g=1", "display_name": "TheLegend", "link": "https://stackoverflow.com/users/1016536/thelegend"}, "edited": false, "score": 1, "creation_date": 1431510541, "post_id": 30210708, "comment_id": 48526858, "body": "<code>map(&amp;:to_s)</code> creates an array of strings (<code>ar</code> stays what it is, an array of integers). These strings are sorted low to high, a to z, 0 to 9. The resulting array is reversed, so it is now 9 to 0."}], "tags": [], "owner": {"reputation": 73209, "user_id": 290394, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/d7908f05c89e965f6bc5308ad6f41256?s=128&d=identicon&r=PG", "display_name": "steenslag", "link": "https://stackoverflow.com/users/290394/steenslag"}, "is_accepted": true, "score": 2, "last_activity_date": 1431510232, "last_edit_date": 1431510232, "creation_date": 1431509157, "answer_id": 30210708, "question_id": 30210348, "link": "https://stackoverflow.com/questions/30210348/ruby-comparing-biggest-potential-number/30210708#30210708", "title": "Ruby comparing biggest potential number", "body": "<pre><code>ar = [1,2,99,901] \np ar.map(&amp;:to_s).sort.reverse.join.to_i   # =&gt; 9990121\n\np ar.sort_by(&amp;:to_s).reverse # =&gt; [99, 901, 2, 1]\n</code></pre>\n\n<p>This creates an array of strings,which are sorted alphabetically.This sorting is from low to high - the opposite is needed, so the sorted array is reversed.</p>\n"}], "owner": {"reputation": 11562, "user_id": 1016536, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/sk0Hl.png?s=128&g=1", "display_name": "TheLegend", "link": "https://stackoverflow.com/users/1016536/thelegend"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 41, "favorite_count": 0, "accepted_answer_id": 30210708, "answer_count": 1, "score": 0, "last_activity_date": 1431510232, "creation_date": 1431508237, "question_id": 30210348, "link": "https://stackoverflow.com/questions/30210348/ruby-comparing-biggest-potential-number", "title": "Ruby comparing biggest potential number", "body": "<p>Quick one. i have an array [92,901] i want to arrange these so that if they were compacted together they would generate the biggest potential number. in this case it would be 92 then 901 to make 92901. These numbers could be huge as well and there could be many integers in the array.</p>\n\n<p>I was going to split each number into an array and then compare each digit to the corresponding opposing array place. i feel that there would be a better ruby way of doing this.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 25845, "user_id": 1133932, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5oN3M.jpg?s=128&g=1", "display_name": "Manish Shrivastava", "link": "https://stackoverflow.com/users/1133932/manish-shrivastava"}, "edited": false, "score": 0, "creation_date": 1431509392, "post_id": 30210256, "comment_id": 48526097, "body": "why would you like to downgrade @richlewis"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "reply_to_user": {"reputation": 25845, "user_id": 1133932, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5oN3M.jpg?s=128&g=1", "display_name": "Manish Shrivastava", "link": "https://stackoverflow.com/users/1133932/manish-shrivastava"}, "edited": false, "score": 0, "creation_date": 1431509870, "post_id": 30210256, "comment_id": 48526419, "body": "well it might turn out to be the case that i dont now, but i am testing a theory out as thought there was a bug with asset_sync. Turns out it may not be the case"}], "answers": [{"tags": [], "owner": {"reputation": 25845, "user_id": 1133932, "user_type": "registered", "accept_rate": 79, "profile_image": "https://i.stack.imgur.com/5oN3M.jpg?s=128&g=1", "display_name": "Manish Shrivastava", "link": "https://stackoverflow.com/users/1133932/manish-shrivastava"}, "is_accepted": false, "score": 0, "last_activity_date": 1431510344, "creation_date": 1431510344, "answer_id": 30211171, "question_id": 30210256, "link": "https://stackoverflow.com/questions/30210256/downgrade-rails-4-2-1-to-rails-4-0-2/30211171#30211171", "title": "Downgrade Rails 4.2.1 to Rails 4.0.2", "body": "<p>I would like to suggest to use any ruby version manager i.e. <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow\">RVM</a> </p>\n\n<p>and use rvm</p>\n\n<pre><code>rvm use 2.1.2\n</code></pre>\n\n<p>and then install a new gemset </p>\n\n<pre><code> rails create gemset rails4.0\n</code></pre>\n\n<p>and use gemset by </p>\n\n<pre><code>rails use 2.1.2@rails4.0\n</code></pre>\n\n<p>and the change in your Gemfile and remove Gemfile.lock as per your need and then run fresh <code>bundle</code></p>\n\n<p>bundle</p>\n\n<p>Hope it will be a fresh and separate gems and It will work well. Give it a try.</p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 272, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1431511208, "creation_date": 1431507930, "last_edit_date": 1431509467, "question_id": 30210256, "link": "https://stackoverflow.com/questions/30210256/downgrade-rails-4-2-1-to-rails-4-0-2", "title": "Downgrade Rails 4.2.1 to Rails 4.0.2", "body": "<p>I was wondering what we be the best way to downgrade Rails from <code>4.2.1</code> to <code>4.0.2</code>. At the moment my plan is to delete my gemfile.lock and change</p>\n\n<pre><code>gem 'rails', 4.2.1' to gem 'rails', '4.0.2'\n</code></pre>\n\n<p>But I can see issues arising such as <code>Railties</code> and the way my <code>application.rb</code>, <code>development.rb</code> files are constructed</p>\n\n<p>Example</p>\n\n<p><code>Rails 4.2.1</code></p>\n\n<pre><code># Development.rb\nRails.application.configure do\n\nend\n</code></pre>\n\n<p><code>Rails 4.0.2</code></p>\n\n<pre><code># Development.rb\nMyApp::Application.configure do\n\nend\n</code></pre>\n\n<p><code>Rails 4.2.1</code></p>\n\n<pre><code># Application.rb\nrequire File.expand_path('../boot', __FILE__)\n\nrequire \"rails\"\n# Pick the frameworks you want:\nrequire \"active_model/railtie\"\nrequire \"active_job/railtie\"\nrequire \"active_record/railtie\"\nrequire \"action_controller/railtie\"\nrequire \"action_mailer/railtie\"\nrequire \"action_view/railtie\"\nrequire \"sprockets/railtie\"\n# require \"rails/test_unit/railtie\"\n\nBundler.require(*Rails.groups)\n</code></pre>\n\n<p><code>Rails 4.0.2</code></p>\n\n<pre><code># Application.rb\nrequire File.expand_path('../boot', __FILE__)\n\n# Pick the frameworks you want:\nrequire \"active_record/railtie\"\nrequire \"action_controller/railtie\"\nrequire \"action_mailer/railtie\"\nrequire \"sprockets/railtie\"\n# require \"rails/test_unit/railtie\"\n\nBundler.require(:default, Rails.env)\n</code></pre>\n\n<p>Is this to big of a jump or is there a safe way to do this?</p>\n\n<p>EDIT</p>\n\n<p>So after following the answer the first issue i get when trying to start my app is </p>\n\n<pre><code>`require': cannot load such file -- active_job/railtie (LoadError)\n</code></pre>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 1234, "user_id": 2803206, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ab0afcf33b3bdc11c8c5305d586fea6e?s=128&d=identicon&r=PG", "display_name": "jshthornton", "link": "https://stackoverflow.com/users/2803206/jshthornton"}, "edited": false, "score": 0, "creation_date": 1431507287, "post_id": 30209934, "comment_id": 48524570, "body": "Thanks that was a great explanation and really cleared things up. Before I award best answer, could you explain why the params are not comma separated?"}, {"owner": {"reputation": 13270, "user_id": 6678, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/777894ea5153122bfa6b83f5bbf23622?s=128&d=identicon&r=PG", "display_name": "Leonid Shevtsov", "link": "https://stackoverflow.com/users/6678/leonid-shevtsov"}, "reply_to_user": {"reputation": 1234, "user_id": 2803206, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ab0afcf33b3bdc11c8c5305d586fea6e?s=128&d=identicon&r=PG", "display_name": "jshthornton", "link": "https://stackoverflow.com/users/2803206/jshthornton"}, "edited": false, "score": 0, "creation_date": 1431507556, "post_id": 30209934, "comment_id": 48524761, "body": "If the last parameter in a method is a block, it can be written right after the method call. So if you had two arguments before the block, it would be <code>htpassword &quot;foo&quot;, &quot;bar&quot; do</code>, or with the optional parens - <code>htpassword(&quot;foo&quot;, &quot;bar&quot;) do</code>"}, {"owner": {"reputation": 1234, "user_id": 2803206, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ab0afcf33b3bdc11c8c5305d586fea6e?s=128&d=identicon&r=PG", "display_name": "jshthornton", "link": "https://stackoverflow.com/users/2803206/jshthornton"}, "edited": false, "score": 0, "creation_date": 1431508409, "post_id": 30209934, "comment_id": 48525348, "body": "Hmmm very interesting. Ruby is a whimsical beast. Enjoy the best answer :)"}], "tags": [], "owner": {"reputation": 13270, "user_id": 6678, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/777894ea5153122bfa6b83f5bbf23622?s=128&d=identicon&r=PG", "display_name": "Leonid Shevtsov", "link": "https://stackoverflow.com/users/6678/leonid-shevtsov"}, "is_accepted": true, "score": 1, "last_activity_date": 1431506935, "creation_date": 1431506935, "answer_id": 30209934, "question_id": 30209707, "link": "https://stackoverflow.com/questions/30209707/grasping-ruby-chef-block/30209934#30209934", "title": "Grasping Ruby chef block", "body": "<p>Here's a minimal implementation of the same syntax, pretty typical for Ruby configuration management.</p>\n\n<p>The key point here is that <code>htpassword</code> is a method that accepts two parameters - a string and a block. Blocks in Ruby capture the scope they are defined in (syntax scope), so you use <code>instance_eval</code> inside the configurator to run the block inside its scope instead, which has the <code>user</code> and <code>password</code> methods defined, which are trivial setters. Configurators can't use the more intuitive <code>user = \"foo\"</code> syntax because that would just declare a local variable inside the block.</p>\n\n<pre><code>class Configurator\n  def user(username)\n    @user=username\n  end\n\n  def htpassword(filename, &amp;block)\n    @filename=filename\n    instance_eval(&amp;block)\n  end\n\n  def run\n    puts \"User = #{@user}, filename = #{@filename}\"\n  end\nend\n\n\n\n\nc=Configurator.new\n\nc.htpassword \"thefilename\" do\n  user \"theuser\"\nend\n\nc.run\n#&gt;User = theuser, filename = thefilename\n</code></pre>\n"}], "owner": {"reputation": 1234, "user_id": 2803206, "user_type": "registered", "accept_rate": 30, "profile_image": "https://www.gravatar.com/avatar/ab0afcf33b3bdc11c8c5305d586fea6e?s=128&d=identicon&r=PG", "display_name": "jshthornton", "link": "https://stackoverflow.com/users/2803206/jshthornton"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 21, "favorite_count": 0, "accepted_answer_id": 30209934, "answer_count": 1, "score": 1, "last_activity_date": 1431506935, "creation_date": 1431506262, "question_id": 30209707, "link": "https://stackoverflow.com/questions/30209707/grasping-ruby-chef-block", "title": "Grasping Ruby chef block", "body": "<p>I am trying to figure out how this block works</p>\n\n<pre><code>htpasswd \"/etc/nginx/htpassword\" do\n  user \"foo\"\n  password \"bar\"\nend\n</code></pre>\n\n<p>I see this style of code a lot in Chef cookbooks.\nI am very new to ruby, like super new, but have a lot of experience in other languages.</p>\n\n<p>I think I have worked out that htpasswd is a proc? But what is stumping me is how the filename is being used, and how the assignment is working <code>user \"foo\"</code></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "net-http", "open-uri"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1431506043, "post_id": 30209512, "comment_id": 48523714, "body": "No idea, I am getting the body properly. (As an aside, you don&#39;t have to check whether <code>entry</code> contains spaces; <code>gsub</code> will happily change zero spaces into zero underscores. You shouldn&#39;t <code>gsub!</code> on a parameter unless it is the purpose of the method - unexpected consequences and all that. Don&#39;t require in <code>initialize</code>, top of the file is usually clearer unless you have particular reason to. )"}], "answers": [{"tags": [], "owner": {"reputation": 226, "user_id": 4895480, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/dQQfL.jpg?s=128&g=1", "display_name": "alexandrine_greenfelder", "link": "https://stackoverflow.com/users/4895480/alexandrine-greenfelder"}, "is_accepted": false, "score": 1, "last_activity_date": 1431516480, "last_edit_date": 1495541665, "creation_date": 1431516480, "answer_id": 30213465, "question_id": 30209512, "link": "https://stackoverflow.com/questions/30209512/if-open-uri-works-why-does-net-http-return-an-empty-string/30213465#30213465", "title": "If open-uri works, why does net/http return an empty string?", "body": "<p>Because your request return 301 <code>Redirect</code> (check <code>connection.code</code> value), you should follow redirect manually if you are using <code>net/http</code>. <a href=\"https://stackoverflow.com/questions/6934185/ruby-net-http-following-redirects\">Here</a> is more details.</p>\n"}], "owner": {"reputation": 63, "user_id": 2997065, "user_type": "registered", "accept_rate": 50, "profile_image": "https://graph.facebook.com/1286052112/picture?type=large", "display_name": "gcarbonell", "link": "https://stackoverflow.com/users/2997065/gcarbonell"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 445, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1431516480, "creation_date": 1431505624, "last_edit_date": 1431508501, "question_id": 30209512, "link": "https://stackoverflow.com/questions/30209512/if-open-uri-works-why-does-net-http-return-an-empty-string", "title": "If open-uri works, why does net/http return an empty string?", "body": "<p>I am attempting to download a page from Wikipedia. For such a task, I am using gems. When using <strong>net/http</strong>, all I get is an empty string. So I tried with <strong>open-uri</strong> and it works fine.</p>\n\n<p>Nevertheless, I prefer the first option because it gives me a much more explicit control; but why is it returning an empty string?\n</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>class Downloader\n    attr_accessor :entry, :url, :page\n\n    def initialize\n        # require 'net/http'\n        require 'open-uri'\n    end\n\n    def getEntry\n        print \"Article name? \"\n        @entry = gets.chomp\n    end\n\n    def getURL(entry)\n\n        if entry.include?(\" \")\n            @url = \"http://en.wikipedia.org/wiki/\" + entry.gsub!(/\\s/, \"_\")\n        else\n            @url = \"http://en.wikipedia.org/wiki/\" + entry\n        end\n        @url.downcase!\n    end\n\n    def getPage(url)\n\n=begin THIS FAULTY SOLUTION RETURNS AN EMPTY STRING ???\n        connector = URI.parse(url)\n        connection = Net::HTTP.start(connector.host, connector.port) do |http|\n            http.get(connector.path)\n        end\n        puts \"Body:\"\n        @page = connection.body\n=end\n\n        @page = open(url).read\n    end\n\nend\n\ntest = Downloader.new\ntest.getEntry\ntest.getURL(test.entry)\ntest.getPage(test.url)\nputs test.page\n</code></pre>\n\n<p>P.S.: I am an autodidact programmer so the code might not fit good practices. My apologies.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 1041, "user_id": 3276347, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/svVqH.jpg?s=128&g=1", "display_name": "Mahabub Islam Prio", "link": "https://stackoverflow.com/users/3276347/mahabub-islam-prio"}, "edited": false, "score": 0, "creation_date": 1431505811, "post_id": 30209501, "comment_id": 48523561, "body": "Are you using Windows as development OS  my friend ?"}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1431507689, "post_id": 30209501, "comment_id": 48524844, "body": "what does <code>which ruby</code> return ?"}, {"owner": {"reputation": 832, "user_id": 3974951, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2o9K0.jpg?s=128&g=1", "display_name": "Nikhil Thombare", "link": "https://stackoverflow.com/users/3974951/nikhil-thombare"}, "edited": false, "score": 0, "creation_date": 1431510562, "post_id": 30209501, "comment_id": 48526877, "body": "When i fire command <b>ruby -v</b> it will return same error"}], "answers": [{"comments": [{"owner": {"reputation": 832, "user_id": 3974951, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2o9K0.jpg?s=128&g=1", "display_name": "Nikhil Thombare", "link": "https://stackoverflow.com/users/3974951/nikhil-thombare"}, "edited": false, "score": 0, "creation_date": 1431506293, "post_id": 30209631, "comment_id": 48523889, "body": "Thanks i am able to uninstall rails and reinstall on pc. its work for me..thanks"}, {"owner": {"reputation": 832, "user_id": 3974951, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2o9K0.jpg?s=128&g=1", "display_name": "Nikhil Thombare", "link": "https://stackoverflow.com/users/3974951/nikhil-thombare"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1431510779, "post_id": 30209631, "comment_id": 48527039, "body": "Ok the solution is you need to check ruby version on your machine. If its returns error means rails is not install on your machine.The same issue with me so i am install rails on my machine and fix this issue. @Mohammad AbuShady"}, {"owner": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "reply_to_user": {"reputation": 832, "user_id": 3974951, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2o9K0.jpg?s=128&g=1", "display_name": "Nikhil Thombare", "link": "https://stackoverflow.com/users/3974951/nikhil-thombare"}, "edited": false, "score": 0, "creation_date": 1431510997, "post_id": 30209631, "comment_id": 48527200, "body": "@NikhiL what i meant is if this answer helped you solve your problem, then click the check mark on the left under the voting arrows."}, {"owner": {"reputation": 832, "user_id": 3974951, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2o9K0.jpg?s=128&g=1", "display_name": "Nikhil Thombare", "link": "https://stackoverflow.com/users/3974951/nikhil-thombare"}, "reply_to_user": {"reputation": 34818, "user_id": 2149092, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/34986a72d47c42ae5685b37ba32d1e22?s=128&d=identicon&r=PG", "display_name": "Mohammad AbuShady", "link": "https://stackoverflow.com/users/2149092/mohammad-abushady"}, "edited": false, "score": 0, "creation_date": 1431511397, "post_id": 30209631, "comment_id": 48527472, "body": "Thanks @Mohammad AbuShady"}], "tags": [], "owner": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "is_accepted": true, "score": 1, "last_activity_date": 1431505951, "creation_date": 1431505951, "answer_id": 30209631, "question_id": 30209501, "link": "https://stackoverflow.com/questions/30209501/rails-new-app-display-error/30209631#30209631", "title": "Rails new app display error", "body": "<p>One day i also faced same issue when i was trying to create new rails application. So followed these below steps and it was soled,</p>\n\n<ol>\n<li>Uninstall the rails</li>\n<li>Uninstall the ruby</li>\n<li>Again install the latest version of ruby using <code>rvm</code></li>\n<li>than install the rails using command <code>gem install rails</code></li>\n</ol>\n\n<p>After following these step, now i am able to create new app. May be this also help you to solve this error.</p>\n"}, {"comments": [{"owner": {"reputation": 832, "user_id": 3974951, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2o9K0.jpg?s=128&g=1", "display_name": "Nikhil Thombare", "link": "https://stackoverflow.com/users/3974951/nikhil-thombare"}, "edited": false, "score": 0, "creation_date": 1431511086, "post_id": 30209644, "comment_id": 48527268, "body": "This all solution for windows but i am using mac...thanks dude"}], "tags": [], "owner": {"reputation": 1041, "user_id": 3276347, "user_type": "registered", "accept_rate": 62, "profile_image": "https://i.stack.imgur.com/svVqH.jpg?s=128&g=1", "display_name": "Mahabub Islam Prio", "link": "https://stackoverflow.com/users/3276347/mahabub-islam-prio"}, "is_accepted": false, "score": 1, "last_activity_date": 1431505991, "last_edit_date": 1495535559, "creation_date": 1431505991, "answer_id": 30209644, "question_id": 30209501, "link": "https://stackoverflow.com/questions/30209501/rails-new-app-display-error/30209644#30209644", "title": "Rails new app display error", "body": "<p>If you are using windows OS as your development environment then please see this link : <a href=\"https://stackoverflow.com/questions/27380301/error-with-gem-installtion-in-windows-system\">&quot;certificate verify failed&quot; error when installing Ruby gems on Windows</a></p>\n\n<p>And I would recommend you to use : <a href=\"http://railsinstaller.org/en\" rel=\"nofollow noreferrer\">http://railsinstaller.org/en</a></p>\n\n<p>By the way , Brother , Rails would behave perfect with Linux based platform .</p>\n\n<p>And for mac os please take a look at : <a href=\"https://rvm.io/rvm/install\" rel=\"nofollow noreferrer\">https://rvm.io/rvm/install</a></p>\n\n<p>This will help you to have multiple ruby version and to switch between them ... to use full power of ruby and gems.</p>\n"}], "owner": {"reputation": 832, "user_id": 3974951, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/2o9K0.jpg?s=128&g=1", "display_name": "Nikhil Thombare", "link": "https://stackoverflow.com/users/3974951/nikhil-thombare"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 659, "favorite_count": 0, "accepted_answer_id": 30209631, "answer_count": 2, "score": 5, "last_activity_date": 1435754538, "creation_date": 1431505588, "last_edit_date": 1431505983, "question_id": 30209501, "link": "https://stackoverflow.com/questions/30209501/rails-new-app-display-error", "title": "Rails new app display error", "body": "<p>I am trying to create new project using rails but it display error. I am working on mac and its display error.\n<br/></p>\n\n<p><strong>$rails new EMS</strong></p>\n\n<pre><code>/Users/.rvm/gems/ruby-2.2.0/bin/rails:23:in `load': cannot load such file -- /Users/.rvm/gems/ruby-2.2.0/gems/rails-4.2.0/bin/rails (LoadError)\n    from /Users/.rvm/gems/ruby-2.2.0/bin/rails:23:in `&lt;main&gt;'\n    from /Users/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `eval'\n    from /Users/.rvm/gems/ruby-2.2.0/bin/ruby_executable_hooks:15:in `&lt;main&gt;'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 28830, "user_id": 221213, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bbfbca5273f9d020ef4ccfbadcecccba?s=128&d=identicon&r=PG", "display_name": "KARASZI Istv&#225;n", "link": "https://stackoverflow.com/users/221213/karaszi-istv%c3%a1n"}, "is_accepted": false, "score": 3, "last_activity_date": 1431505225, "creation_date": 1431505225, "answer_id": 30209373, "question_id": 30209349, "link": "https://stackoverflow.com/questions/30209349/ruby-on-rails-each-method-undefined-method-each-for-nilnilclass/30209373#30209373", "title": "Ruby on rails .each method undefined method `each&#39; for nil:NilClass", "body": "<p>You have a typo in your <code>#index</code> method, replace <code>@guest</code> with <code>@guests</code>.</p>\n\n<p>Like:</p>\n\n<pre><code>def index\n  @guests = Guest.all\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1615, "user_id": 2524123, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/gVqbX.jpg?s=128&g=1", "display_name": "rick", "link": "https://stackoverflow.com/users/2524123/rick"}, "is_accepted": false, "score": 0, "last_activity_date": 1431505232, "creation_date": 1431505232, "answer_id": 30209377, "question_id": 30209349, "link": "https://stackoverflow.com/questions/30209349/ruby-on-rails-each-method-undefined-method-each-for-nilnilclass/30209377#30209377", "title": "Ruby on rails .each method undefined method `each&#39; for nil:NilClass", "body": "<p>In your <code>index</code> method you are using <code>@guest = Guest.all</code> and in your view file, you have specified <code>&lt;% @guests.each do |guest| %&gt;</code>. So you should change <code>@guests</code> to <code>@guest</code> in your view file.</p>\n\n<p>Change this,</p>\n\n<pre><code>&lt;% @guest.each do |guest| %&gt;\n</code></pre>\n\n<p>in your view file</p>\n"}, {"tags": [], "owner": {"reputation": 5800, "user_id": 4287733, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/835e993afb1e20c1981dd6b8b59ded2d?s=128&d=identicon&r=PG", "display_name": "Nermin", "link": "https://stackoverflow.com/users/4287733/nermin"}, "is_accepted": false, "score": 0, "last_activity_date": 1431505244, "creation_date": 1431505244, "answer_id": 30209383, "question_id": 30209349, "link": "https://stackoverflow.com/questions/30209349/ruby-on-rails-each-method-undefined-method-each-for-nilnilclass/30209383#30209383", "title": "Ruby on rails .each method undefined method `each&#39; for nil:NilClass", "body": "<p>You nowhere have <code>@guests</code>, in all of your methods you have <code>@guest</code>. This is why <code>@guests</code> has nill value, you have not define it.</p>\n"}, {"comments": [{"owner": {"reputation": 29, "user_id": 4215529, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6C-7zajUdCw/AAAAAAAAAAI/AAAAAAAAAVQ/NXKbdGJCD80/photo.jpg?sz=128", "display_name": "Sean patrick Maiorca", "link": "https://stackoverflow.com/users/4215529/sean-patrick-maiorca"}, "edited": false, "score": 0, "creation_date": 1431587357, "post_id": 30209384, "comment_id": 48565561, "body": "Thanks  for spotting the tucking fypos."}], "tags": [], "owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1431505246, "creation_date": 1431505246, "answer_id": 30209384, "question_id": 30209349, "link": "https://stackoverflow.com/questions/30209349/ruby-on-rails-each-method-undefined-method-each-for-nilnilclass/30209384#30209384", "title": "Ruby on rails .each method undefined method `each&#39; for nil:NilClass", "body": "<p>change your code is like this:</p>\n\n<pre><code> def index\n  @guests = Guest.all\n end\n</code></pre>\n\n<p>You are using @guests at view but in controller it is @guest</p>\n"}, {"comments": [{"owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "reply_to_user": {"reputation": 29, "user_id": 4215529, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6C-7zajUdCw/AAAAAAAAAAI/AAAAAAAAAVQ/NXKbdGJCD80/photo.jpg?sz=128", "display_name": "Sean patrick Maiorca", "link": "https://stackoverflow.com/users/4215529/sean-patrick-maiorca"}, "edited": false, "score": 0, "creation_date": 1431506119, "post_id": 30209479, "comment_id": 48523775, "body": "@SeanpatrickMaiorca, it&#39;s good to do mistakes. We can only learn by doing mistakes and learning from them. :)"}], "tags": [], "owner": {"reputation": 6602, "user_id": 3425360, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-D0hYGNyMGPo/AAAAAAAAAAI/AAAAAAAAA1c/wVJzgXu5zZI/photo.jpg?sz=128", "display_name": "Sharvy Ahmed", "link": "https://stackoverflow.com/users/3425360/sharvy-ahmed"}, "is_accepted": false, "score": 0, "last_activity_date": 1431505750, "last_edit_date": 1431505750, "creation_date": 1431505529, "answer_id": 30209479, "question_id": 30209349, "link": "https://stackoverflow.com/questions/30209349/ruby-on-rails-each-method-undefined-method-each-for-nilnilclass/30209479#30209479", "title": "Ruby on rails .each method undefined method `each&#39; for nil:NilClass", "body": "<blockquote>\n  <p>undefined method `each' for nil:NilClass</p>\n</blockquote>\n\n<p>This is error stating that, you are trying to use the <code>each</code> method of a <code>nil</code> object, that is you do not have anything defined as <code>@guests</code> in your <code>index</code> action.</p>\n\n<p>You are actually trying to access the instance variable <code>@guest</code> of index action in your view.</p>\n\n<p>So you need to fix the typo:</p>\n\n<pre><code>&lt;% @guest.each do |guest| %&gt; # you wrote @guests\n</code></pre>\n\n<p><em>Suggestion: Since you are fetching all the guests, you should change your instance variable name from @guest to @guests to be more appropriate. In that case you do not have to change your view code. It will work as it is.</em></p>\n\n<pre><code>def index\n  @guests = Guest.all\nend\n</code></pre>\n"}], "owner": {"reputation": 29, "user_id": 4215529, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-6C-7zajUdCw/AAAAAAAAAAI/AAAAAAAAAVQ/NXKbdGJCD80/photo.jpg?sz=128", "display_name": "Sean patrick Maiorca", "link": "https://stackoverflow.com/users/4215529/sean-patrick-maiorca"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 702, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1431505759, "creation_date": 1431505143, "last_edit_date": 1431505759, "question_id": 30209349, "link": "https://stackoverflow.com/questions/30209349/ruby-on-rails-each-method-undefined-method-each-for-nilnilclass", "title": "Ruby on rails .each method undefined method `each&#39; for nil:NilClass", "body": "<p>I receive an undefined method error on `each' for nil:NilClass.</p>\n\n<p>The template:</p>\n\n<pre><code>&lt;th&gt;name&gt;&lt;/th&gt;\n&lt;th&gt;Comment&lt;/th&gt;\n&lt;% @guests.each do |guest| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= guest.name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= guest.comment %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>The controller:</p>\n\n<pre><code>class GuestsController &lt; ApplicationController\n  def index\n    @guest = Guest.all\n  end\n\n  def show\n    @guest = Guest.find(params[:id])\n  end\n\n  def new\n  end\n\n  def create\n    @guest = Guest.new(article_params)\n\n    @guest.save\n    redirect_to @guest\n  end\n\n  private\n\n  def article_params\n   params.require(:guest).permit(:name, :email, :doctor, :Captain, :comment )\n  end\nend \n</code></pre>\n"}, {"tags": ["css", "ruby-on-rails", "ruby", "ruby-on-rails-4", "amazon-s3"], "answers": [{"comments": [{"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1431509224, "post_id": 30210553, "comment_id": 48525954, "body": "Thanks for the answer, so to clarify in <code>development</code> when precompiling a timestamp is appended but in <code>production</code> a md5 checksum would be appended to the filename ?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1431509298, "post_id": 30210553, "comment_id": 48526020, "body": "Basically compress=false conflicts with the concept of precompiling - that&#39;s the root cause."}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1431509793, "post_id": 30210553, "comment_id": 48526366, "body": "so changing to compress=true would solve my issue? and thats set in the environment that i want?"}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "reply_to_user": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1431509915, "post_id": 30210553, "comment_id": 48526453, "body": "I&#39;d guess so - although as a said this seems like a weird thing to do"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1431510005, "post_id": 30210553, "comment_id": 48526499, "body": "ok so if i do this correctly then and <code>rake assets:precompile RAILS_ENV=production</code> and then to test that all generated ok add <code>config.action_controller.asset_host = &quot;https:&#47;&#47;#{ENV[&#39;FOG_DIRECTORY&#39;]}.s3.amazonaws.com&quot;</code> to my development.rb, this would be more in line with how my setup should be ? My aim here is just to test that all my assets are reachable from my s3 bucket"}, {"owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "edited": false, "score": 0, "creation_date": 1431515556, "post_id": 30210553, "comment_id": 48530232, "body": "Thank you for your answer, having looked into your points more (knowledge building for me) I have a much better understanding of whats going on..Ive put all this into production now and it all works"}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": true, "score": 1, "last_activity_date": 1431508764, "creation_date": 1431508764, "answer_id": 30210553, "question_id": 30209113, "link": "https://stackoverflow.com/questions/30209113/dealing-with-assets-and-s3-buckets-in-rails-4-2-1/30210553#30210553", "title": "Dealing with assets and s3 buckets in Rails 4.2.1", "body": "<p>In development (by default) things like javascripts and css are loaded individually rather than combined into a single file. For example, if application.js had</p>\n\n<pre><code>//= require jquery\n//= require something.js\n</code></pre>\n\n<p>then in development <code>javascript_tag :application</code> would insert separate <code>&lt;script&gt;</code> tags for both of those files, appending a timestamp rather than a md5 checksum, rather than a single request for the combined application.js file</p>\n\n<p>These individual files don't existing in S3, you're getting a 403 (it's a 403 instead of a 404 because if you don't have permission to list a bucket then by default requests for non existant objects result in 403 errors).</p>\n\n<p>Images aren't affected by this because there is no equivalent combining images together thing (unless perhaps you're using a gem to handle css sprites automatically)</p>\n\n<p>The setting that controls this is</p>\n\n<pre><code> config.assets.compress\n</code></pre>\n\n<p>However this seems like a very strange development setup where any changes to assets requires you to push them to s3.</p>\n"}], "owner": {"reputation": 13886, "user_id": 1150534, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/043af7a7ebf89595bebc3364f933d648?s=128&d=identicon&r=PG", "display_name": "Richlewis", "link": "https://stackoverflow.com/users/1150534/richlewis"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 264, "favorite_count": 0, "accepted_answer_id": 30210553, "answer_count": 1, "score": 1, "last_activity_date": 1611537118, "creation_date": 1431504457, "last_edit_date": 1611537118, "question_id": 30209113, "link": "https://stackoverflow.com/questions/30209113/dealing-with-assets-and-s3-buckets-in-rails-4-2-1", "title": "Dealing with assets and s3 buckets in Rails 4.2.1", "body": "<p>I am serving my assets (css, js and images) from an S3 bucket using asset_sync. I cannot get my CSS/JS to load (I get 403 forbidden errors) but images load fine. I think I have found the issue though (it doesn't look like its bucket or IAM permissions).</p>\n<p>When I upload my assets a file name is generated along the lines of</p>\n<pre><code>mybucket.s3.amazonaws.com/assets/application-123456789101112.css\n</code></pre>\n<p>However when my application then tries to call the css file the url it tries to get is like</p>\n<pre><code>mybucket.s3.amazonaws.com/assets/application.self-573489573934.css\n</code></pre>\n<p>The main differences are the inclusion of <code>self</code> and a completely different MD5 hash string, thus when trying to access this url it's forbidden.</p>\n<p>This is my asset_sync config</p>\n<pre><code>if defined?(AssetSync)\n  AssetSync.configure do |config|\n    config.fog_provider = 'AWS'\n    config.aws_access_key_id = ENV['AWS_ACCESS_KEY_ID']\n    config.aws_secret_access_key = ENV['AWS_SECRET_ACCESS_KEY']\n    config.fog_directory = ENV['FOG_DIRECTORY']\n    config.existing_remote_files = &quot;delete&quot;\n    config.gzip_compression = true\n    config.manifest = true\n    config.custom_headers = { '.*' =&gt; { cache_control: 'max-age=315576000', expires: 1.year.from_now.httpdate } }\n  end\nend\n</code></pre>\n<p>I also think the issue may lay in my environment settings. Have things changed in rails 4.2.1 compared to Rails 4 ?</p>\n<p>Would this have anything to do with it ? <a href=\"https://github.com/thoughtbot/paperclip/issues/1772\" rel=\"nofollow noreferrer\">https://github.com/thoughtbot/paperclip/issues/1772</a></p>\n<p>In my development.rb (as I'm just testing this locally for now) I have</p>\n<pre><code>config.assets.compile = true\nconfig.assets.digest = true\nconfig.serve_static_files = ENV['RAILS_SERVE_STATIC_FILES'].present? # Never seen this one before\n</code></pre>\n"}, {"tags": ["ruby", "sinatra"], "answers": [{"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431505622, "post_id": 30209467, "comment_id": 48523441, "body": "you don&#39;t need string interpolation for this."}, {"owner": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1431505893, "post_id": 30209467, "comment_id": 48523618, "body": "Yes, I am specifically asking how to render <i>within the module</i> rather than returning to the main app before rendering."}, {"owner": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1431508027, "post_id": 30209467, "comment_id": 48525075, "body": "I see you changed it a bit :) - this is indeed closer. I&#39;d rather use Sinatra&#39;s own &#39;erb&#39; (for compatibility); at the very least I&#39;ll need to figure out how to pass ERB.new parameters and a layout file (which is basically the main use-case for Sinatra&#39;s &#39;erb&#39;..)"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "reply_to_user": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1554688049, "post_id": 30209467, "comment_id": 97830060, "body": "@sellarafaeli  re the parameters, do you mean <code>ERB.new(&quot;#{params[&#39;aaa&#39;]}&quot;).result</code> ?"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "reply_to_user": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1554688786, "post_id": 30209467, "comment_id": 97830182, "body": "@sellarafaeli also, that ERB.new line is not sinatra&#39;s own ERB.  If you start irb, and type require &#39;erb&#39;, then you see the ERB.new line works. And there is even a command line erb. if I do which erb, I see a /usr/local/bin/erb"}, {"owner": {"reputation": 10027, "user_id": 385907, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/5e249e45a1849e387e324787d08ef738?s=128&d=identicon&r=PG", "display_name": "barlop", "link": "https://stackoverflow.com/users/385907/barlop"}, "reply_to_user": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1554691141, "post_id": 30209467, "comment_id": 97830521, "body": "@sellarafaeli and as for another way of passing to the erb, really passing to the erb, see asfer&#39;s answer  <a href=\"https://stackoverflow.com/questions/1338960/ruby-templates-how-to-pass-variables-into-inlined-erb\" title=\"ruby templates how to pass variables into inlined erb\">stackoverflow.com/questions/1338960/&hellip;</a>"}], "tags": [], "owner": {"reputation": 9853, "user_id": 514438, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/05GN8.png?s=128&g=1", "display_name": "Bala", "link": "https://stackoverflow.com/users/514438/bala"}, "is_accepted": false, "score": 2, "last_activity_date": 1431509938, "last_edit_date": 1431509938, "creation_date": 1431505495, "answer_id": 30209467, "question_id": 30208780, "link": "https://stackoverflow.com/questions/30208780/sinatra-render-erb-within-module/30209467#30209467", "title": "Sinatra - render &quot;erb&quot; within Module", "body": "<p>This may not be the answer you are looking for.  Here is my another version. Probably this is close to what you wanted to achieve.</p>\n\n<pre><code>module MyMod  \n  extend self\n\n  def foo\n    ERB.new(\"&lt;%= Time.now %&gt;\").result   \n  end\nend\n\nget '/' do\n   MyMod.foo\nend\n</code></pre>\n\n<p>or with helpers??</p>\n\n<pre><code>module Sinatra\n    module MyMod  \n        def foo\n            erb \"&lt;%= Time.now %&gt;\"\n        end\n    end\n    helpers MyMod\nend\n\nget '/' do\n    foo\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1431506706, "post_id": 30209780, "comment_id": 48524171, "body": "Yes, that&#39;s the rabbit hole I was going down into... I&#39;ll try your suggestion. But isn&#39;t there a way to use Sinatra&#39;s &#39;erb&#39; with regular Sinatra modules?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1431506748, "post_id": 30209780, "comment_id": 48524194, "body": "There&#39;s no such thing as &quot;regular sinatra module&quot; :)"}, {"owner": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1431506839, "post_id": 30209780, "comment_id": 48524255, "body": ":) I mean, a regular Ruby module."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1431506943, "post_id": 30209780, "comment_id": 48524337, "body": "<code>erb</code> would happily work if you satisfied all its dependencies (like the <code>settings</code> method here) and <b>all their dependencies</b>. The easiest way is to include said module in a real sinatra app class (then you don&#39;t need to include <code>Sinatra::Templates</code>, obviously.)"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1431507290, "post_id": 30209780, "comment_id": 48524571, "body": "Why do you even <i>use</i> a module here? I see no purpose."}, {"owner": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "edited": false, "score": 0, "creation_date": 1431507882, "post_id": 30209780, "comment_id": 48524971, "body": "To encapsulate behavior. I want an &#39;Emails&#39; module to render HTML emails. Other relevant solutions for this are also appreciated. :)  BTW, have been unsuccessful with using a Sinatra app class."}], "tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": false, "score": 3, "last_activity_date": 1431506483, "last_edit_date": 1592644375, "creation_date": 1431506483, "answer_id": 30209780, "question_id": 30208780, "link": "https://stackoverflow.com/questions/30208780/sinatra-render-erb-within-module/30209780#30209780", "title": "Sinatra - render &quot;erb&quot; within Module", "body": "<p>The <code>erb</code> method is defined in <code>Sinatra::Templates</code>. So one would think he'd be able to just use that</p>\n<pre><code>module MyMod\n  extend Sinatra::Templates\n  extend self\n\n  def foo\n    erb Time.now.to_s\n  end\nend\n</code></pre>\n<p>However, it's not that simple. Now <code>erb</code> method is found, but still doesn't work</p>\n<blockquote>\n<p>NameError at /no</p>\n<p>undefined local variable or method `settings' for MyMod:Module</p>\n</blockquote>\n<p>If you follow that rabbit hole, you'll need to make your module a full sinatra app (don't know if that's even possible).</p>\n<p>Why don't you use a modular sinatra app style (create a class which inherits from <code>Sinatra::Base</code>) and include your module into the app? This way I'm quite confident it'll &quot;just work&quot;.</p>\n"}, {"tags": [], "owner": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "is_accepted": false, "score": 0, "last_activity_date": 1431510869, "creation_date": 1431510869, "answer_id": 30211356, "question_id": 30208780, "link": "https://stackoverflow.com/questions/30208780/sinatra-render-erb-within-module/30211356#30211356", "title": "Sinatra - render &quot;erb&quot; within Module", "body": "<p>Solution - call <code>erb</code> on a Sinatra::Application instance, as below (two ways of calling it, second one is preferable).</p>\n\n<pre><code>require 'sinatra'\n\nget '/yes' do\n  erb \"&lt;%= Time.now %&gt;\" #works\nend\n\nget '/foo' do \n  MyMod.foo #works\nend\n\nget '/foo2' do\n  MyMod.foo2 #works \nend\n\nmodule MyMod \n  extend self\n\n  def foo\n    ObjectSpace.each_object(Sinatra::Application).first.erb \"&lt;%= Time.now %&gt;\"\n  end\n\n  def foo2\n    @app ||= Sinatra::Application.new.instance_variable_get :@instance\n    @app.erb \"&lt;%= Time.now %&gt;\"\n  end \nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3967, "user_id": 1751321, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/62f4ca296fd86fffa81987e5ace94b86?s=128&d=identicon&r=PG", "display_name": "Daniel Garmoshka", "link": "https://stackoverflow.com/users/1751321/daniel-garmoshka"}, "is_accepted": false, "score": 1, "last_activity_date": 1473363302, "creation_date": 1473363302, "answer_id": 39398887, "question_id": 30208780, "link": "https://stackoverflow.com/questions/30208780/sinatra-render-erb-within-module/39398887#39398887", "title": "Sinatra - render &quot;erb&quot; within Module", "body": "<p>Extending answer of @Sergio Tulentsev:\nTo imitate rendering behavior of Sinatra controller you can create module like this:</p>\n\n<pre><code>module ErbRender\n\n  include Sinatra::Templates\n  include Sinatra::Helpers\n  include Sinatra::ContentFor\n\n  def settings\n    @settings ||= begin\n      settings = Sinatra::Application.settings\n      settings.root = \"#{ROOT}/app\"\n      settings\n    end\n  end\n\n  def template_cache\n    @template_cache ||= Tilt::Cache.new\n  end\n\nend\n</code></pre>\n\n<p><em>Here you may need to tune <code>settings.root</code></em></p>\n\n<p>Usage example:</p>\n\n<pre><code>class ArticleIndexingPostBody\n\n  include ErbRender\n\n  def get_body\n    erb :'amp/articles/show', layout: :'amp/layout'\n  end\n\nend\n</code></pre>\n\n<p>This will properly render templates with layouts including <code>content_for</code></p>\n"}], "owner": {"reputation": 1118, "user_id": 954741, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/ba5f5048d530d66ae46bf78e1242313a?s=128&d=identicon&r=PG", "display_name": "sellarafaeli", "link": "https://stackoverflow.com/users/954741/sellarafaeli"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1098, "favorite_count": 0, "answer_count": 4, "score": 1, "last_activity_date": 1473363302, "creation_date": 1431503431, "question_id": 30208780, "link": "https://stackoverflow.com/questions/30208780/sinatra-render-erb-within-module", "title": "Sinatra - render &quot;erb&quot; within Module", "body": "<p>How can I use <code>erb</code> within a Module in Sinatra? Here is an example of a complete app, where <code>erb</code> fails within a Module.</p>\n\n<pre><code>require 'sinatra'\n\nget '/yes' do\n  erb \"&lt;%= Time.now %&gt;\" #works\nend\n\nget '/no' do \n  MyMod.foo #fails\nend\n\nmodule MyMod\n  extend self\n\n  def foo\n    erb \"&lt;%= Time.now %&gt;\" #fails: undefined method `erb' for MyMod:Module\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2536065"}, "edited": false, "score": 0, "creation_date": 1431502240, "post_id": 30208275, "comment_id": 48521385, "body": "Is <code>params[:id]</code> the id or the username? If its the id, you should use <code>#find</code> instead of <code>#find_by_username</code>"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1431502539, "post_id": 30208275, "comment_id": 48521583, "body": "Your if statement doesn&#39;t do what you think it does. Rails will call <code>render :show</code> anyway, as that is the default action. So even if the user wasn&#39;t found, you are still rendering the page. you need to use <code>redirect_to</code>."}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "reply_to_user": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "edited": false, "score": 0, "creation_date": 1431502794, "post_id": 30208275, "comment_id": 48521740, "body": "@Myst <code>redirect_to</code> show while being in show action?"}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1431512523, "post_id": 30208275, "comment_id": 48528177, "body": "@AndreyDeineko you will want to redirect to <code>index</code> or a different page. Otherwise you will end up in a redirect loop. But, if you don&#39;t redirect somewhere, the application will attempt to render <code>show</code> while <code>@user</code> is <code>nil</code>."}, {"owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1431525727, "post_id": 30208275, "comment_id": 48538129, "body": "Remember to vote up answers that helped you. I voted up  @AndreyDeineko&#39;s answer, I feel it&#39;s a good one. Why don&#39;t you  so as well?"}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 4557068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b0f1f77dd4be62a06b9f8dc520b9ae34?s=128&d=identicon&r=PG&f=1", "display_name": "Rohnin", "link": "https://stackoverflow.com/users/4557068/rohnin"}, "edited": false, "score": 0, "creation_date": 1431502265, "post_id": 30208340, "comment_id": 48521406, "body": "It help with undefined method but i get another error: ActiveRecord::RecordNotFound in ProfileController#show Couldn&#39;t find User without an ID"}], "tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": true, "score": 1, "last_activity_date": 1431502082, "creation_date": 1431502082, "answer_id": 30208340, "question_id": 30208275, "link": "https://stackoverflow.com/questions/30208275/undefined-method-firstname-for-nilnilclass-rails4/30208340#30208340", "title": "undefined method `firstname&#39; for nil:NilClass Rails4", "body": "<p>This part </p>\n\n<pre><code>@user = User.find_by_username(params[:id])\n</code></pre>\n\n<p>returns <code>nil</code>, because you pass <code>id</code> from params as a <code>username</code> to <code>find_by_username</code> finder. In can't find the <code>username</code> (string) which is <code>id</code> (integer).</p>\n\n<p>It should be</p>\n\n<pre><code>@user = User.find(params[:id])\n</code></pre>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html\" rel=\"nofollow\">Take a look at docs</a> on how finders work</p>\n"}, {"tags": [], "owner": {"reputation": 371, "user_id": 3462905, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/21750fc2523d2b9a6c7b900debd03c7e?s=128&d=identicon&r=PG&f=1", "display_name": "Antima Gupta", "link": "https://stackoverflow.com/users/3462905/antima-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1431502773, "creation_date": 1431502773, "answer_id": 30208555, "question_id": 30208275, "link": "https://stackoverflow.com/questions/30208275/undefined-method-firstname-for-nilnilclass-rails4/30208555#30208555", "title": "undefined method `firstname&#39; for nil:NilClass Rails4", "body": "<p>If you are using find_by_username then you should pass params[:username] instead of params[:id] .</p>\n"}, {"tags": [], "owner": {"reputation": 16402, "user_id": 4025095, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/blJ4L.jpg?s=128&g=1", "display_name": "Myst", "link": "https://stackoverflow.com/users/4025095/myst"}, "is_accepted": false, "score": 0, "last_activity_date": 1431503848, "creation_date": 1431503848, "answer_id": 30208908, "question_id": 30208275, "link": "https://stackoverflow.com/questions/30208275/undefined-method-firstname-for-nilnilclass-rails4/30208908#30208908", "title": "undefined method `firstname&#39; for nil:NilClass Rails4", "body": "<p>Also this part:</p>\n\n<pre><code>if @user\n  @reviews=@user.reviews.order(:created_at).reverse_order.limit(5)\n  render action: :show\nend\n</code></pre>\n\n<p>even if the if statement is <code>false</code>, <code>render action: :show</code> will still be called - it's the default.</p>\n\n<p>if you defined a method that said nothing:</p>\n\n<pre><code>def test\nend\n</code></pre>\n\n<p>rails would call: <code>render action: :name_of_method</code></p>\n\n<p>You need to use a redirect and <code>unless</code>:</p>\n\n<pre><code>redirect_to users_url, notice: 'user not found' unless @user\n</code></pre>\n\n<p>Good luck!</p>\n"}], "owner": {"reputation": 53, "user_id": 4557068, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/b0f1f77dd4be62a06b9f8dc520b9ae34?s=128&d=identicon&r=PG&f=1", "display_name": "Rohnin", "link": "https://stackoverflow.com/users/4557068/rohnin"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 284, "favorite_count": 0, "accepted_answer_id": 30208340, "answer_count": 3, "score": 1, "last_activity_date": 1431503848, "creation_date": 1431501863, "question_id": 30208275, "link": "https://stackoverflow.com/questions/30208275/undefined-method-firstname-for-nilnilclass-rails4", "title": "undefined method `firstname&#39; for nil:NilClass Rails4", "body": "<p>Can somebody help me with this error? I add profile controller by console without model. Database it's working fine. I am sure that i have lastname and firstname in seed.rb and i just did db:setup/migration.</p>\n\n<p>Here's the show.html</p>\n\n<pre><code>.page-header\n  .h1\n    =link_to @user.firstname + \" \" + @user.lastname, edit_user_registration_path\n</code></pre>\n\n<p>Database:</p>\n\n<pre><code> create_table \"users\", force: true do |t|\n    t.string   \"email\",                  default: \"\",    null: false\n    t.string   \"encrypted_password\",     default: \"\",    null: false\n    t.string   \"reset_password_token\"\n    t.datetime \"reset_password_sent_at\"\n    t.datetime \"remember_created_at\"\n    t.integer  \"sign_in_count\",          default: 0,     null: false\n    t.datetime \"current_sign_in_at\"\n    t.datetime \"last_sign_in_at\"\n    t.string   \"current_sign_in_ip\"\n    t.string   \"last_sign_in_ip\"\n    t.datetime \"created_at\"\n    t.datetime \"updated_at\"\n    t.string   \"firstname\"\n    t.string   \"lastname\"\n    t.string   \"username\"\n    t.boolean  \"admin\",                  default: false\n</code></pre>\n\n<p>user.rb</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  # Include default devise modules. Others available are:\n  # :confirmable, :lockable, :timeoutable and :omniauthable\n  devise :database_authenticatable, :registerable,\n         :recoverable, :rememberable, :trackable, :validatable\n\n  has_many :reviews\n  has_many :products\n\n  validates_presence_of :firstname, :lastname\nend\n</code></pre>\n\n<p>Profile controler:</p>\n\n<pre><code>class ProfileController &lt; ApplicationController\n  def show\n    @user = User.find_by_username(params[:id])\n    if @user\n      @reviews=@user.reviews.order(:created_at).reverse_order.limit(5)\n      render action: :show\n    end\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rake", "actionmailer"], "comments": [{"owner": {"reputation": 2180, "user_id": 809904, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aTkpH.png?s=128&g=1", "display_name": "nicohvi", "link": "https://stackoverflow.com/users/809904/nicohvi"}, "edited": false, "score": 0, "creation_date": 1431503153, "post_id": 30208106, "comment_id": 48521969, "body": "Which environment is this for? Have you ensured that the <code>raise_delivery_errors</code> and <code>perform_deliveries</code> flags have been enabled in your environment configuration?"}, {"owner": {"reputation": 4356, "user_id": 1164954, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67f0c44837a0f107b54f0a960943304c?s=128&d=identicon&r=PG", "display_name": "svz", "link": "https://stackoverflow.com/users/1164954/svz"}, "reply_to_user": {"reputation": 2180, "user_id": 809904, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aTkpH.png?s=128&g=1", "display_name": "nicohvi", "link": "https://stackoverflow.com/users/809904/nicohvi"}, "edited": false, "score": 0, "creation_date": 1431504065, "post_id": 30208106, "comment_id": 48522486, "body": "@nicohvi, I&#39;ve updated the queston with current mailer config. Nothing changed after I explicitly defined these params."}, {"owner": {"reputation": 2180, "user_id": 809904, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aTkpH.png?s=128&g=1", "display_name": "nicohvi", "link": "https://stackoverflow.com/users/809904/nicohvi"}, "edited": false, "score": 0, "creation_date": 1431514453, "post_id": 30208106, "comment_id": 48529465, "body": "Okay, thanks for the clarification. Can you see what the environment is during the rake task execution?"}, {"owner": {"reputation": 4356, "user_id": 1164954, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67f0c44837a0f107b54f0a960943304c?s=128&d=identicon&r=PG", "display_name": "svz", "link": "https://stackoverflow.com/users/1164954/svz"}, "reply_to_user": {"reputation": 2180, "user_id": 809904, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/aTkpH.png?s=128&g=1", "display_name": "nicohvi", "link": "https://stackoverflow.com/users/809904/nicohvi"}, "edited": false, "score": 0, "creation_date": 1431517434, "post_id": 30208106, "comment_id": 48531603, "body": "@nicohvi, I&#39;ve added <code>puts &quot;#{ENV[&#39;RAILS_ENV&#39;]}, #{ENV[&#39;RACK_ENV&#39;]}&quot;</code> in my rake task. RAILS_ENV shows development, and RACK_ENV is empty. Setting it to development as well doesn&#39;t help."}], "owner": {"reputation": 4356, "user_id": 1164954, "user_type": "registered", "accept_rate": 77, "profile_image": "https://www.gravatar.com/avatar/67f0c44837a0f107b54f0a960943304c?s=128&d=identicon&r=PG", "display_name": "svz", "link": "https://stackoverflow.com/users/1164954/svz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 877, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431503992, "creation_date": 1431501318, "last_edit_date": 1431503992, "question_id": 30208106, "link": "https://stackoverflow.com/questions/30208106/rails-mailer-wont-send-mail-from-a-rake-task", "title": "Rails: Mailer won&#39;t send mail from a rake task", "body": "<p>I've written a plugin that extends Redmine <code>Mailer</code> model, which in turn extends <code>ActionMailer</code>, and adds some custom messages to it.\nWhen I call these newly added <code>Mailer</code> methods from an <code>after_save</code> callback of a different model (like <code>Mailer.estimation_exceeded(msg_options).deliver</code>), I reveive the expected email. </p>\n\n<p>I have also written a <code>rake</code> task that triggers the same Mailer methods. The problem here is that though the method gets triggered and I see message info in the log, I don't receive actual emails. Any idea what might be the problem?</p>\n\n<p><strong>UPD:</strong>\nCurrent mailer configuration is the following:</p>\n\n<pre><code># default configuration options for all environments\ndefault:\n  # Outgoing emails configuration (see examples above)\n  email_delivery:\n    delivery_method: :async_smtp\n    async_smtp_settings:\n      address: mail.domain\n      port: 25\n      domain: mail.domain\n      authentication: :login\n      user_name: user@mail.domain\"\n      password: \"***\"\n      raise_delivery_errors: true\n      perform_deliveries: true\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 0, "creation_date": 1431501273, "post_id": 30207941, "comment_id": 48520748, "body": "using something like <code>guard</code> I guess"}, {"owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1431533512, "post_id": 30207941, "comment_id": 48544133, "body": "how the going with the issue?"}, {"owner": {"reputation": 10776, "user_id": 749477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6845c6b2318e02258cc1dc56fe620482?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/749477/derek"}, "reply_to_user": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "edited": false, "score": 0, "creation_date": 1431533801, "post_id": 30207941, "comment_id": 48544319, "body": "@AndreyDeineko Not solved yet.  I always thought that <code>rails</code> itself detects a change to the <code>routes.rb</code> file and runs something like <code>Rails.application.reload_routes!</code>.  I want to find the function that calls <code>reload_routes!</code> and extend it to also run my <code>rake</code> task.  No luck yet."}], "answers": [{"tags": [], "owner": {"reputation": 47232, "user_id": 1772830, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/Qtoqg.jpg?s=128&g=1", "display_name": "Andrey Deineko", "link": "https://stackoverflow.com/users/1772830/andrey-deineko"}, "is_accepted": false, "score": 1, "last_activity_date": 1431501289, "creation_date": 1431501289, "answer_id": 30208094, "question_id": 30207941, "link": "https://stackoverflow.com/questions/30207941/call-rake-task-on-routes-rb-update/30208094#30208094", "title": "Call rake task on routes.rb update?", "body": "<p>Take a look into <a href=\"https://github.com/thomasfl/filewatcher#ruby-api\" rel=\"nofollow\">filewatcher</a> gem.</p>\n\n<p>You can define actions to be taken depending on what changes are made to specified file (or directory):</p>\n\n<pre><code>require 'filewatcher'\n\nFileWatcher.new(\"config/routes.rb\").watch() do |filename, event|\n  if(event == :changed)\n    your_rake_task\n  end\n  if(event == :delete)\n    # ...\n  end\n  if(event == :new)\n    # ...\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 10776, "user_id": 749477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6845c6b2318e02258cc1dc56fe620482?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/749477/derek"}, "is_accepted": false, "score": 0, "last_activity_date": 1431534555, "last_edit_date": 1495539819, "creation_date": 1431534555, "answer_id": 30220489, "question_id": 30207941, "link": "https://stackoverflow.com/questions/30207941/call-rake-task-on-routes-rb-update/30220489#30220489", "title": "Call rake task on routes.rb update?", "body": "<p>In <code>rails 4.2.1</code></p>\n\n<pre><code># development.rb\nrequire 'rake'\nRails.application.configure do\n#...\n  Rails.application.load_tasks\n  # code executes on routes change\n  ActionDispatch::Reloader.to_prepare do\n    Rails.application.reload_routes!\n\n    if JsRoutes.assert_usable_configuration!\n      Rake::Task['js_routes:generate'].reenable\n      Rake::Task['js_routes:generate'].invoke\n    end\n  end\n#...\nend\n</code></pre>\n\n<p>Based off of <a href=\"https://stackoverflow.com/a/27046271/749477\">https://stackoverflow.com/a/27046271/749477</a></p>\n"}], "owner": {"reputation": 10776, "user_id": 749477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6845c6b2318e02258cc1dc56fe620482?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/749477/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 109, "favorite_count": 0, "answer_count": 2, "score": 1, "last_activity_date": 1431534555, "creation_date": 1431500888, "last_edit_date": 1431502119, "question_id": 30207941, "link": "https://stackoverflow.com/questions/30207941/call-rake-task-on-routes-rb-update", "title": "Call rake task on routes.rb update?", "body": "<p>Using <code>rails 4.2.1</code>.</p>\n\n<p>I want to call a <code>rake</code> task on every <code>config/routes.rb</code> file save.  How would I go about doing this?</p>\n\n<p>Note: the <code>rake</code> task does require the <code>rails</code> environment. i.e. it's of the <code>task :task_name =&gt; :environment do #...</code> nature.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "comments": [{"owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "edited": false, "score": 1, "creation_date": 1431500654, "post_id": 30207750, "comment_id": 48520355, "body": "<code>=</code> to display, <code>-</code> to have ruby code executed without being displayed"}], "answers": [{"tags": [], "owner": {"reputation": 1099, "user_id": 2024073, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mETW6.jpg?s=128&g=1", "display_name": "Sarwan Kumar", "link": "https://stackoverflow.com/users/2024073/sarwan-kumar"}, "is_accepted": false, "score": 1, "last_activity_date": 1431500720, "creation_date": 1431500720, "answer_id": 30207883, "question_id": 30207750, "link": "https://stackoverflow.com/questions/30207750/what-is-the-difference-between-and-in-haml-while-writing-ruby-code/30207883#30207883", "title": "What is the difference between = and - in haml while writing ruby code?", "body": "<p>In haml, <code>=</code> is used to write ruby code and displays the result as output, while <code>-</code> is just used to write ruby code.<br>\nYou can read more about haml from this\n<a href=\"http://haml.info/tutorial.html\" rel=\"nofollow\">http://haml.info/tutorial.html</a></p>\n"}, {"tags": [], "owner": {"reputation": 7251, "user_id": 2493089, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c34c815a19c6a2f6ed200cbd95503682?s=128&d=identicon&r=PG", "display_name": "SHS", "link": "https://stackoverflow.com/users/2493089/shs"}, "is_accepted": true, "score": 7, "last_activity_date": 1443444210, "last_edit_date": 1443444210, "creation_date": 1431500817, "answer_id": 30207925, "question_id": 30207750, "link": "https://stackoverflow.com/questions/30207750/what-is-the-difference-between-and-in-haml-while-writing-ruby-code/30207925#30207925", "title": "What is the difference between = and - in haml while writing ruby code?", "body": "<p>They are both indicators that what follows needs to be processed as Ruby code. But <code>-</code> doesn't output the result to view whereas <code>=</code> does.</p>\n\n<p>For example, consider the following helper:</p>\n\n<pre><code>def hlp\n  [1,2].each(&amp;:succ) # using example relevant to your code sample\nend\n</code></pre>\n\n<p><code>each</code> will return the enumerator that it is called upon. So the return value of that helper method will be <code>[1,2]</code>.</p>\n\n<p>The following in your HAML view will not display <code>[1,2]</code>:</p>\n\n<pre><code>- hlp\n</code></pre>\n\n<p>But the following will display it:</p>\n\n<pre><code>= hlp\n</code></pre>\n\n<p>Therefore in the sample code you have shared, you will use <code>-</code>, and not <code>=</code>, because you don't want to display all <code>@list.documents</code> once <code>each</code> is done with them.</p>\n"}], "owner": {"reputation": 248, "user_id": 4630569, "user_type": "registered", "accept_rate": 36, "profile_image": "https://lh4.googleusercontent.com/-jSHAMVH-qsA/AAAAAAAAAAI/AAAAAAAAAKY/4O1vm9p0fv8/photo.jpg?sz=128", "display_name": "Alex Jose", "link": "https://stackoverflow.com/users/4630569/alex-jose"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 912, "favorite_count": 0, "accepted_answer_id": 30207925, "answer_count": 2, "score": 7, "last_activity_date": 1443444210, "creation_date": 1431500300, "last_edit_date": 1431501250, "question_id": 30207750, "link": "https://stackoverflow.com/questions/30207750/what-is-the-difference-between-and-in-haml-while-writing-ruby-code", "title": "What is the difference between = and - in haml while writing ruby code?", "body": "<p>So I am a newbie at HAML.</p>\n\n<p>While going through the HAML tutorial the way to represent ruby code was mentioned as <code>=</code></p>\n\n<p>eg: <code>%strong= item.title</code></p>\n\n<p>but when I ran this code:</p>\n\n<pre><code>= @list.documents.each do |doc|\n  %tbody\n    %tr\n      %td= doc.display_name\n</code></pre>\n\n<p>along with all the list data which was displayed there was also alot of junk data displayed which was related to the actual list data which was displayed.\nThis is what I got:</p>\n\n<pre><code>val1 val2 val3 [#Document......@id : val1, @id:val2.....]\n</code></pre>\n\n<p>When i try the same code while replacing the <code>=</code> with a <code>-</code> the unwanted data is not received.</p>\n\n<pre><code>- @list.documents.each do |doc|\n      %tbody\n        %tr\n          %td= doc.display_name\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>val1 val2 val3\n</code></pre>\n\n<p>can someone explain the difference between  <code>-</code> and <code>=</code> while writing ruby code in haml?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "actioncontroller"], "answers": [{"tags": [], "owner": {"reputation": 110512, "user_id": 350087, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/808bec1c640143bd7091888d9edfb2f2?s=128&d=identicon&r=PG", "display_name": "apneadiving", "link": "https://stackoverflow.com/users/350087/apneadiving"}, "is_accepted": true, "score": 7, "last_activity_date": 1431500490, "creation_date": 1431500490, "answer_id": 30207804, "question_id": 30207671, "link": "https://stackoverflow.com/questions/30207671/rails-action-params-key-conflict/30207804#30207804", "title": "Rails &quot;action&quot; params key conflict", "body": "<p>Its awkward to use this, but if ever its required, you can get the info using:</p>\n\n<pre><code> request.POST\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 3620, "user_id": 639040, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/aea0cc0c34a4a21109da9e3d738e75f6?s=128&d=identicon&r=PG", "display_name": "Lane", "link": "https://stackoverflow.com/users/639040/lane"}, "is_accepted": false, "score": 1, "last_activity_date": 1575523250, "creation_date": 1575523250, "answer_id": 59188701, "question_id": 30207671, "link": "https://stackoverflow.com/questions/30207671/rails-action-params-key-conflict/59188701#59188701", "title": "Rails &quot;action&quot; params key conflict", "body": "<p>Yes, you can. According to <a href=\"https://stackoverflow.com/questions/6209848/how-to-not-use-rails-action-parameter-in-controller\">How to not use Rails action parameter in controller</a> , you can get it by:</p>\n\n<pre><code>if request.method == \"POST\"\n  action = request.request_parameters['action']\nelse\n  action = request.query_parameters['action']\nend\n</code></pre>\n"}], "owner": {"reputation": 2090, "user_id": 2150422, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/df001f7b3e8ae5f37976f16837671e01?s=128&d=identicon&r=PG", "display_name": "Jeremy Blalock", "link": "https://stackoverflow.com/users/2150422/jeremy-blalock"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 563, "favorite_count": 0, "accepted_answer_id": 30207804, "answer_count": 2, "score": 7, "last_activity_date": 1575523250, "creation_date": 1431500048, "question_id": 30207671, "link": "https://stackoverflow.com/questions/30207671/rails-action-params-key-conflict", "title": "Rails &quot;action&quot; params key conflict", "body": "<p>I am building a RESTful Rails service with various CRUD endpoints. On one of the Create endpoints, the data I am passing in includes:</p>\n\n<pre><code>...\naction: \"action_name\"\n...\n</code></pre>\n\n<p>The problem I am having is that <code>params[:action]</code> contains \"create\", not the actual value of the <code>action</code> parameter I'm passing in. This, I assume, is because <code>params[:action]</code> is being populated by Rails automatically.</p>\n\n<p>Is there another way to access this key I am passing in? Am I doing something blatantly stupid?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "reply_to_user": {"reputation": 140, "user_id": 3959987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LBcJ8.jpg?s=128&g=1", "display_name": "Balachandran", "link": "https://stackoverflow.com/users/3959987/balachandran"}, "edited": false, "score": 0, "creation_date": 1431503652, "post_id": 30207348, "comment_id": 48522240, "body": "Did you restart your server?"}], "tags": [], "owner": {"reputation": 48413, "user_id": 1279683, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/1veuT.jpg?s=128&g=1", "display_name": "Marek Lipka", "link": "https://stackoverflow.com/users/1279683/marek-lipka"}, "is_accepted": false, "score": 1, "last_activity_date": 1431499040, "creation_date": 1431499040, "answer_id": 30207348, "question_id": 30207207, "link": "https://stackoverflow.com/questions/30207207/strong-parameters-cant-mass-assign-protected-attributes/30207348#30207348", "title": "strong parameters Can&#39;t mass-assign protected attributes", "body": "<p>You have to turn off attributes protection in your <code>config/application.rb</code>:</p>\n\n<pre><code>config.active_record.whitelist_attributes = false\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "reply_to_user": {"reputation": 140, "user_id": 3959987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LBcJ8.jpg?s=128&g=1", "display_name": "Balachandran", "link": "https://stackoverflow.com/users/3959987/balachandran"}, "edited": false, "score": 0, "creation_date": 1431501694, "post_id": 30207377, "comment_id": 48521006, "body": "@Balachandran: I am sorry, you need to use <code>attr_accessible</code>, not <code>attr_protected</code>."}, {"owner": {"reputation": 140, "user_id": 3959987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LBcJ8.jpg?s=128&g=1", "display_name": "Balachandran", "link": "https://stackoverflow.com/users/3959987/balachandran"}, "edited": false, "score": 0, "creation_date": 1431502904, "post_id": 30207377, "comment_id": 48521805, "body": "I forget to say audited gem use in that model.I found that solution and solve my issue.Thanks"}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1431501643, "last_edit_date": 1431501643, "creation_date": 1431499134, "answer_id": 30207377, "question_id": 30207207, "link": "https://stackoverflow.com/questions/30207207/strong-parameters-cant-mass-assign-protected-attributes/30207377#30207377", "title": "strong parameters Can&#39;t mass-assign protected attributes", "body": "<p>Please check that all attributes that you want to updated are listed in the <code>attr_accessible</code> definition in your <code>Mandat</code> model:</p>\n\n<pre><code>attr_accessible :created_at, :description, :image, :dpe, :nature_bien_id, \n  :nature_transaction_id,:nbr_chambres, :nbr_pieces, :prix_net_acquereur, \n  :section_id, :surface_habitable,:surface_terrain, :titre, \n  :annonce_images_attributes, :user_id, :ville, :zip, :reference,\n  :available_time, :is_valid, :close, :reasonclosing, :annonce_support_ids, \n  :equipement_ids\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 140, "user_id": 3959987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LBcJ8.jpg?s=128&g=1", "display_name": "Balachandran", "link": "https://stackoverflow.com/users/3959987/balachandran"}, "is_accepted": true, "score": 0, "last_activity_date": 1431503592, "creation_date": 1431503592, "answer_id": 30208827, "question_id": 30207207, "link": "https://stackoverflow.com/questions/30207207/strong-parameters-cant-mass-assign-protected-attributes/30208827#30208827", "title": "strong parameters Can&#39;t mass-assign protected attributes", "body": "<p>In my rails project,I use audited Gem.Refer <a href=\"https://github.com/collectiveidea/audited#using-attr_protected-or-strong_parameters\" rel=\"nofollow\">Audited gem using strong Parameter</a>.So in my model</p>\n\n<p>Change </p>\n\n<pre><code>class Mandat &lt; ActiveRecord::Base\n    audited on: [:update]\n</code></pre>\n\n<p>to</p>\n\n<pre><code>class Mandat &lt; ActiveRecord::Base\n    audited :allow_mass_assignment =&gt; true,on: [:update]\n</code></pre>\n\n<p>then it will works perfectly.</p>\n"}], "owner": {"reputation": 140, "user_id": 3959987, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/LBcJ8.jpg?s=128&g=1", "display_name": "Balachandran", "link": "https://stackoverflow.com/users/3959987/balachandran"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 812, "favorite_count": 1, "accepted_answer_id": 30208827, "answer_count": 3, "score": 0, "last_activity_date": 1431503592, "creation_date": 1431498500, "last_edit_date": 1495540291, "question_id": 30207207, "link": "https://stackoverflow.com/questions/30207207/strong-parameters-cant-mass-assign-protected-attributes", "title": "strong parameters Can&#39;t mass-assign protected attributes", "body": "<p>I am using Rails 3.2.14, inherited_resource and strong_parameter gem.I just followed <a href=\"https://stackoverflow.com/questions/13852534/strong-parameters-in-rails-3-2-8\">Strong Parameters in Rails 3.2.8</a> steps but i am getting error like below, </p>\n\n<pre><code>Can't mass-assign protected attributes:content, title, nature_bien_id, nature_transaction_id, nbr_chambres, nbr_pieces, section_id, city, zip, surface_habitable, surface_terrain\n</code></pre>\n\n<p>My code in controller is like that</p>\n\n<pre><code>def create\n    @mandat = current_user.mandats.new(mandats_params)\nend\nprivate\ndef annonce_params\n  params.require(:annonce).permit(:created_at, :description, :image, :dpe, :nature_bien_id, :nature_transaction_id,:nbr_chambres, :nbr_pieces, :prix_net_acquereur, :section_id, :surface_habitable,:surface_terrain, :titre, :annonce_images_attributes, :user_id, :ville, :zip, :reference,:available_time, :is_valid, :close, :reasonclosing, :annonce_support_ids, :equipement_ids)\nend\n</code></pre>\n\n<p>Thanks for in advance</p>\n"}, {"tags": ["ruby", "twitter-bootstrap", "loops", "twitter", "rescue"], "comments": [{"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1431498594, "post_id": 30207174, "comment_id": 48519176, "body": "yes <code>next</code> will continue and retry the next item in a loop. <code>retry</code> will retry the loop with the same item"}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "reply_to_user": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "edited": false, "score": 0, "creation_date": 1431498714, "post_id": 30207174, "comment_id": 48519238, "body": "ah okie doke, thanks @TarynEast"}], "answers": [{"comments": [{"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1431499432, "post_id": 30207257, "comment_id": 48519597, "body": "I&#39;m getting an error still saying   &#39;twitter.rb:297: syntax error, unexpected keyword_rescue, expecting keyword_end     rescue Twitter::Error::NotFound =&gt; error           ^ twitter.rb:297: syntax error, unexpected =&gt;     rescue Twitter::Error::NotFound =&gt; error                                       ^&#39;"}, {"owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1431499555, "post_id": 30207257, "comment_id": 48519657, "body": "I edited my above code to look exactly how it looks in sublime"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "reply_to_user": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1431502803, "post_id": 30207257, "comment_id": 48521748, "body": "Neat, thanks - it also helps when you do that here so we can easily see the structure and tell if there&#39;s something missing.... :)"}, {"owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "reply_to_user": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "edited": false, "score": 0, "creation_date": 1431502833, "post_id": 30207257, "comment_id": 48521766, "body": "You&#39;ll probably need to put a begin/end block around the rescue then."}], "tags": [], "owner": {"reputation": 26120, "user_id": 219883, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/c35b5b0f9e7cce48864f4f1545ead995?s=128&d=identicon&r=PG", "display_name": "Taryn East", "link": "https://stackoverflow.com/users/219883/taryn-east"}, "is_accepted": true, "score": 0, "last_activity_date": 1431502932, "last_edit_date": 1431502932, "creation_date": 1431498716, "answer_id": 30207257, "question_id": 30207174, "link": "https://stackoverflow.com/questions/30207174/in-ruby-can-you-create-a-rescue-for-twitter-for-when-there-is-an-error-it-will/30207257#30207257", "title": "In Ruby, can you create a rescue for twitter for when there is an error it will continue the loop?", "body": "<p>yes <code>next</code> will continue and retry the next item in a loop.\n<code>retry</code> will retry the loop with the same item.</p>\n\n<p>Note: you don't have enough <code>end</code>s for all the <code>do</code> that are in that method. So I'd try:</p>\n\n<pre><code>begin\n  File.open(\"user_ids.txt\") do |file| \n    file.each do |id|\n      puts client.user(\"#{id}\").screen_name\n    rescue Twitter::Error::NotFound =&gt; error\n      sleep error.rate_limit.reset_in + 1\n      next # skip this item\n    end\n  end\nend\n</code></pre>\n\n<p>Note: see how proper indentation makes it clear when you're missing an <code>end</code> ?</p>\n\n<p>You may need to shift the begin/end block that is currently around the lot - to just be around the code that you want to rescue-from (or it'll default to the outside begin/end rather than your loop)</p>\n\n<pre><code>File.open(\"user_ids.txt\") do |file| \n  file.each do |id|\n    begin\n      puts client.user(\"#{id}\").screen_name\n    rescue Twitter::Error::NotFound =&gt; error\n      sleep error.rate_limit.reset_in + 1\n      next # skip this item\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 573, "user_id": 4566078, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/pWJYn.jpg?s=128&g=1", "display_name": "marriedjane875", "link": "https://stackoverflow.com/users/4566078/marriedjane875"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 72, "favorite_count": 0, "accepted_answer_id": 30207257, "answer_count": 1, "score": 0, "last_activity_date": 1431502932, "creation_date": 1431498354, "last_edit_date": 1431499523, "question_id": 30207174, "link": "https://stackoverflow.com/questions/30207174/in-ruby-can-you-create-a-rescue-for-twitter-for-when-there-is-an-error-it-will", "title": "In Ruby, can you create a rescue for twitter for when there is an error it will continue the loop?", "body": "<p>I'm trying to create a <code>rescue</code> that if and when there is an <code>Twitter::Error::NotFound</code> error (such as does not exist) it will just keep going through the loop. Please help, thanks.</p>\n\n<p>Below is the code,</p>\n\n<pre><code>begin\n  File.open(\"user_ids.txt\") do |file| \n    file.each do |id|\n      puts client.user(\"#{id}\").screen_name\n    rescue Twitter::Error::NotFound =&gt; error\n      next # skip this item\n    end\n  end\nend\n</code></pre>\n\n<p>Instead of the <code>retry</code> method is there a a method that can skip and keep moving on to the next item in the loop?\nI'm pretty sure the <code>error.rate_limit</code> does not apply (I copied this code from a different rescue call), is there another method to call? like <code>error.notfound.continue_with_loop</code></p>\n\n<p>I would like to create a rescue that if and when there is an error such as <code>does not exist</code> so it will just keep going through the loop. Please help, thanks.</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1431497185, "post_id": 30206575, "comment_id": 48518541, "body": "<a href=\"http://apidock.com/ruby/Enumerable/each_with_index\" rel=\"nofollow noreferrer\">each_with_index</a> will help you to fetch index of an array"}, {"owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "reply_to_user": {"reputation": 9602, "user_id": 3607136, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/NRFso.jpg?s=128&g=1", "display_name": "Gagan Gami", "link": "https://stackoverflow.com/users/3607136/gagan-gami"}, "edited": false, "score": 0, "creation_date": 1431559979, "post_id": 30206575, "comment_id": 48557539, "body": "Thank you -- I am trying to assess which solution to use....from those below."}], "answers": [{"tags": [], "owner": {"reputation": 1193, "user_id": 4687420, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1925494165bbab5d1872309328311d5f?s=128&d=identicon&r=PG", "display_name": "Kevin", "link": "https://stackoverflow.com/users/4687420/kevin"}, "is_accepted": false, "score": 1, "last_activity_date": 1431496547, "creation_date": 1431496547, "answer_id": 30206744, "question_id": 30206575, "link": "https://stackoverflow.com/questions/30206575/how-do-i-prepend-an-integer-in-an-array-of-strings-using-ruby/30206744#30206744", "title": "how do I prepend an integer in an array of strings using ruby?", "body": "<p>If you've got the following array with hashes:</p>\n\n<pre><code>[{ value: \"foo\" }, { value: \"bar\" }, { value: \"baz\" }]\n</code></pre>\n\n<p>And you would want the following output:</p>\n\n<pre><code>[{ value: \"0 - foo\" }, { value: \"1 - bar\" }, { value: \"2 - baz\" }]\n</code></pre>\n\n<p>You could do something like this:</p>\n\n<pre><code>def enumerate_array(array)\n  array.each_with_index do |hash, index|\n    hash[:value] = \"#{index} - #{hash[:value]}\"\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 7329, "user_id": 1232447, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001bb9923606697c5edf6b88955c73e8?s=128&d=identicon&r=PG&f=1", "display_name": "maximus \u30c4", "link": "https://stackoverflow.com/users/1232447/maximus-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1431497148, "post_id": 30206760, "comment_id": 48518521, "body": "Won&#39;t this cause array to hold only strings instead of hash?, this way array elements will be mapped to strings."}, {"owner": {"reputation": 2895, "user_id": 214759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a643cb8407049539331506124310d20?s=128&d=identicon&r=PG", "display_name": "Jimmy Baker", "link": "https://stackoverflow.com/users/214759/jimmy-baker"}, "reply_to_user": {"reputation": 7329, "user_id": 1232447, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/001bb9923606697c5edf6b88955c73e8?s=128&d=identicon&r=PG&f=1", "display_name": "maximus \u30c4", "link": "https://stackoverflow.com/users/1232447/maximus-%e3%83%84"}, "edited": false, "score": 0, "creation_date": 1431497403, "post_id": 30206760, "comment_id": 48518647, "body": "If you copied it exactly. Whatever is returned from the block is set in the array. Modify it to return what you need."}], "tags": [], "owner": {"reputation": 2895, "user_id": 214759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a643cb8407049539331506124310d20?s=128&d=identicon&r=PG", "display_name": "Jimmy Baker", "link": "https://stackoverflow.com/users/214759/jimmy-baker"}, "is_accepted": false, "score": -1, "last_activity_date": 1431496627, "creation_date": 1431496627, "answer_id": 30206760, "question_id": 30206575, "link": "https://stackoverflow.com/questions/30206575/how-do-i-prepend-an-integer-in-an-array-of-strings-using-ruby/30206760#30206760", "title": "how do I prepend an integer in an array of strings using ruby?", "body": "<p>If you're using ruby 2.x, you can chain map and with_index to make it a one-liner:</p>\n\n<pre><code>array = array.map.with_index { |item, index| \"#{index} - #{item}\" }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 91, "user_id": 3610290, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5fbfeaf9d9f446bec63b18f6e8312ee9?s=128&d=identicon&r=PG&f=1", "display_name": "Ryanzyy", "link": "https://stackoverflow.com/users/3610290/ryanzyy"}, "is_accepted": false, "score": 0, "last_activity_date": 1431497604, "creation_date": 1431497604, "answer_id": 30206992, "question_id": 30206575, "link": "https://stackoverflow.com/questions/30206575/how-do-i-prepend-an-integer-in-an-array-of-strings-using-ruby/30206992#30206992", "title": "how do I prepend an integer in an array of strings using ruby?", "body": "<p>Making copies of original hashes:</p>\n\n<pre><code>def enumerate_array(array)\n  array.map.with_index { |h, i| h.merge({value: \"#{i} - #{h[:value]}\"}) }\nend\n</code></pre>\n\n<p>Altering original hashes:</p>\n\n<pre><code>def enumerate_array!(array)\n  array.each_with_index { |h, i| h[:value] = \"#{i} - #{h[:value]}\" }\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1431498823, "creation_date": 1431498823, "answer_id": 30207287, "question_id": 30206575, "link": "https://stackoverflow.com/questions/30206575/how-do-i-prepend-an-integer-in-an-array-of-strings-using-ruby/30207287#30207287", "title": "how do I prepend an integer in an array of strings using ruby?", "body": "<pre><code>arr = [{ value: \"dog\" }, { value: \"cat\" }, { value: \"pig\" }]\n</code></pre>\n\n<p>If <code>arr</code> is to be mutated:</p>\n\n<pre><code>arr.each_index { |i| arr[i][:value] = \"#{i} - #{arr[i][:value] }\" }\n  #=&gt; [{:value=&gt;\"0 - dog\"}, {:value=&gt;\"1 - cat\"}, {:value=&gt;\"2 - pig\"}] \narr\n  #=&gt; [{:value=&gt;\"0 - dog\"}, {:value=&gt;\"1 - cat\"}, {:value=&gt;\"2 - pig\"}] \n</code></pre>\n\n<p>If <code>arr</code> is not to be mutated (after resetting <code>arr</code>):</p>\n\n<pre><code>arr.each_index.with_object([]) { |i,a| a &lt;&lt; { value: \"#{i} - #{arr[i][:value] }\" } }\n  #=&gt; [{:value=&gt;\"0 - dog\"}, {:value=&gt;\"1 - cat\"}, {:value=&gt;\"2 - pig\"}] \narr \n  #=&gt; [{:value=&gt;\"dog\"}, {:value=&gt;\"cat\"}, {:value=&gt;\"pig\"}] \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 96, "user_id": 4864301, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7b6c600d6b9584f8dcbf3609a6590dae?s=128&d=identicon&r=PG&f=1", "display_name": "Edgar Mkaka Joel", "link": "https://stackoverflow.com/users/4864301/edgar-mkaka-joel"}, "is_accepted": false, "score": 0, "last_activity_date": 1431532833, "creation_date": 1431532833, "answer_id": 30219948, "question_id": 30206575, "link": "https://stackoverflow.com/questions/30206575/how-do-i-prepend-an-integer-in-an-array-of-strings-using-ruby/30219948#30219948", "title": "how do I prepend an integer in an array of strings using ruby?", "body": "<pre><code>def enumerate_array(array)\n  array.each_with_index do |hash, index|\n      hash.each_pair { |key, value| hash[key] = \"#{index} - #{value}\" }\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 15386, "user_id": 92679, "user_type": "registered", "accept_rate": 73, "profile_image": "https://i.stack.imgur.com/oJLsX.jpg?s=128&g=1", "display_name": "Satchel", "link": "https://stackoverflow.com/users/92679/satchel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 196, "favorite_count": 0, "answer_count": 5, "score": 0, "last_activity_date": 1431532833, "creation_date": 1431495810, "question_id": 30206575, "link": "https://stackoverflow.com/questions/30206575/how-do-i-prepend-an-integer-in-an-array-of-strings-using-ruby", "title": "how do I prepend an integer in an array of strings using ruby?", "body": "<p>I have an array created by the following ruby code in a method:</p>\n\n<pre><code>array[i] = {:key =&gt; response.body['results'][i]['path']['key'],  \n              :value =&gt; response.body['results'][i]['value'],\n              :epoch_time =&gt; response.body['results'][i]['path']['reftime'] / 1000}\narray[i][:collection] = response.body['results'][i]['path']['collection']\n</code></pre>\n\n<p>I would like another method <code>.enumerate_array</code> or something which goes through an appends \"i -\" which i is the corresponding index value of the array.</p>\n\n<p>For example, for <code>array[0][:value] = \"this was the first answer\"</code>.</p>\n\n<p>Then:</p>\n\n<p><code>array = enumerate_array(array)</code> </p>\n\n<p><code>=&gt; array[0][:value] = \"0 - this was the first answer\"</code></p>\n\n<p>Thanks.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1431495690, "post_id": 30206490, "comment_id": 48517867, "body": "This is because some time you have your associate record blank, check before using &#39;take&#39;, record present or not  as: model.associated_models.present?, if it is true then your take will work"}, {"owner": {"reputation": 423, "user_id": 1938491, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f9f0daaf18d089a2a47a23b44cc43390?s=128&d=identicon&r=PG", "display_name": "ROR", "link": "https://stackoverflow.com/users/1938491/ror"}, "reply_to_user": {"reputation": 1133, "user_id": 4840615, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ObOwb.jpg?s=128&g=1", "display_name": "Gaurav Gupta", "link": "https://stackoverflow.com/users/4840615/gaurav-gupta"}, "edited": false, "score": 0, "creation_date": 1431496473, "post_id": 30206490, "comment_id": 48518208, "body": "@GauravGupta model.associated_models.present? is true then still I am getting same error. thanks"}], "answers": [{"comments": [{"owner": {"reputation": 423, "user_id": 1938491, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f9f0daaf18d089a2a47a23b44cc43390?s=128&d=identicon&r=PG", "display_name": "ROR", "link": "https://stackoverflow.com/users/1938491/ror"}, "edited": false, "score": 0, "creation_date": 1431496451, "post_id": 30206556, "comment_id": 48518200, "body": "model.associated_models.present? is true then still I am getting same error. thanks"}, {"owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "reply_to_user": {"reputation": 423, "user_id": 1938491, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f9f0daaf18d089a2a47a23b44cc43390?s=128&d=identicon&r=PG", "display_name": "ROR", "link": "https://stackoverflow.com/users/1938491/ror"}, "edited": false, "score": 0, "creation_date": 1431496848, "post_id": 30206556, "comment_id": 48518375, "body": "try model.present? &amp;&amp; model.associated_models.present?"}, {"owner": {"reputation": 423, "user_id": 1938491, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f9f0daaf18d089a2a47a23b44cc43390?s=128&d=identicon&r=PG", "display_name": "ROR", "link": "https://stackoverflow.com/users/1938491/ror"}, "edited": false, "score": 0, "creation_date": 1431499039, "post_id": 30206556, "comment_id": 48519403, "body": "please have a look answer above."}, {"owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "reply_to_user": {"reputation": 423, "user_id": 1938491, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f9f0daaf18d089a2a47a23b44cc43390?s=128&d=identicon&r=PG", "display_name": "ROR", "link": "https://stackoverflow.com/users/1938491/ror"}, "edited": false, "score": 0, "creation_date": 1431500216, "post_id": 30206556, "comment_id": 48520076, "body": "@ROR........Please update rails  version for this 4.1.10 and if you still face this problem try my logic."}], "tags": [], "owner": {"reputation": 1295, "user_id": 1602342, "user_type": "registered", "accept_rate": 60, "profile_image": "https://i.stack.imgur.com/VxzbS.jpg?s=128&g=1", "display_name": "Amit Suroliya", "link": "https://stackoverflow.com/users/1602342/amit-suroliya"}, "is_accepted": false, "score": 0, "last_activity_date": 1431495732, "creation_date": 1431495732, "answer_id": 30206556, "question_id": 30206490, "link": "https://stackoverflow.com/questions/30206490/take-is-not-working-proper-with-rails-4/30206556#30206556", "title": "take is not working proper with rails 4", "body": "<p>Try this -</p>\n\n<pre><code>  model.associated_models.take if model.associated_models.present?\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 2, "last_activity_date": 1431497359, "creation_date": 1431497359, "answer_id": 30206922, "question_id": 30206490, "link": "https://stackoverflow.com/questions/30206490/take-is-not-working-proper-with-rails-4/30206922#30206922", "title": "take is not working proper with rails 4", "body": "<p>This is an <a href=\"https://github.com/rails/rails/issues/19305\" rel=\"nofollow\">open issue</a> with activerecord versions 4.1.7 through 4.1.9.  </p>\n\n<p>The issue notes indicate that the problem is fixed in rails-4.1.10. If you can upgrade to 4.1.10 or above the error should go away. </p>\n\n<p>If upgrading is not an option, a monkey patch is mentioned in the issue.  Stick this in an intializer:</p>\n\n<pre><code>module ActiveRecord\n  module FinderMethods\n   def find_take\n      if loaded?\n        @records.first if @records\n      else\n        @take ||= limit(1).to_a.first\n      end\n    end\n  end\nend\n</code></pre>\n"}], "owner": {"reputation": 423, "user_id": 1938491, "user_type": "registered", "accept_rate": 17, "profile_image": "https://www.gravatar.com/avatar/f9f0daaf18d089a2a47a23b44cc43390?s=128&d=identicon&r=PG", "display_name": "ROR", "link": "https://stackoverflow.com/users/1938491/ror"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 37, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1431498997, "creation_date": 1431495451, "last_edit_date": 1431498997, "question_id": 30206490, "link": "https://stackoverflow.com/questions/30206490/take-is-not-working-proper-with-rails-4", "title": "take is not working proper with rails 4", "body": "<p>When i call <code>take</code> instead of <code>first</code></p>\n\n<pre><code>model.associated_models.take\n</code></pre>\n\n<p>I am getting below error</p>\n\n<pre><code>NoMethodError: undefined method first' for nil:NilClass`from /home/rails/.rvm/gems/ruby-2.0.0-p0@doland/gems/activerecord-`4.1.8/lib/active_record/relation/finder_methods.rb:458:in find_take'  \n</code></pre>\n\n<p>Sometime it works fine but sometime it does not work any reason behind it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1431492788, "post_id": 30205883, "comment_id": 48516820, "body": "Why do you want to do this? Why to you want to achieve? There might be a better solution than a hash if you tell us more about your use case."}, {"owner": {"reputation": 10776, "user_id": 749477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6845c6b2318e02258cc1dc56fe620482?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/749477/derek"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1431492980, "post_id": 30205883, "comment_id": 48516893, "body": "@spickermann I want to create a <code>json</code> object to use on the front end to look up url strings based on route names."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1431496212, "post_id": 30205883, "comment_id": 48518093, "body": "This is what I expected. There is a Gem for supports that. Please see my answer below."}], "answers": [{"tags": [], "owner": {"reputation": 2895, "user_id": 214759, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/0a643cb8407049539331506124310d20?s=128&d=identicon&r=PG", "display_name": "Jimmy Baker", "link": "https://stackoverflow.com/users/214759/jimmy-baker"}, "is_accepted": false, "score": 1, "last_activity_date": 1431493146, "creation_date": 1431493146, "answer_id": 30206032, "question_id": 30205883, "link": "https://stackoverflow.com/questions/30205883/creating-ruby-hash-object-from-rails-routes/30206032#30206032", "title": "Creating ruby hash object from Rails routes?", "body": "<p>If you really have to do this, you can:</p>\n\n<pre><code>ri = ActionDispatch::Routing::RoutesInspector.new([])\nresult = ri.send :collect_routes, Rails.application.routes.routes\n</code></pre>\n\n<p>The result will be an array of hashes which look like:</p>\n\n<pre><code>{:name=&gt;\"product\", :verb=&gt;\"GET\", :path=&gt;\"/products/:id(.:format)\", :reqs=&gt;\"products#show\", :regexp=&gt;\"^\\\\/products\\\\/([^\\\\/.?]+)(?:\\\\.([^\\\\/.?]+))?$\"}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 1, "last_activity_date": 1431494281, "creation_date": 1431494281, "answer_id": 30206253, "question_id": 30205883, "link": "https://stackoverflow.com/questions/30205883/creating-ruby-hash-object-from-rails-routes/30206253#30206253", "title": "Creating ruby hash object from Rails routes?", "body": "<p>This will give you a Hash where the keys are the route names and the values are the paths:</p>\n\n<pre><code>routes = Hash[Rails.application.routes.routes.map { |r| [r.name, r.path.spec.to_s] }]\n</code></pre>\n\n<p><code>routes</code> will now look like:</p>\n\n<pre><code>{\n  \"entities\" =&gt; \"/entities(.:format)\",\n  \"new_entity\" =&gt; \"/entities/new(.:format)\",\n  \"edit_entity\" =&gt; \"/entities/:id/edit(.:format)\",\n  \"entity\" =&gt; \"/entities/:id(.:format)\"\n}\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 10776, "user_id": 749477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6845c6b2318e02258cc1dc56fe620482?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/749477/derek"}, "edited": false, "score": 0, "creation_date": 1431506471, "post_id": 30206645, "comment_id": 48524021, "body": "+1 Going to have to pick another answer that answered the question more precisely, but this definitely helped me deal with my problem."}], "tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1431496135, "creation_date": 1431496135, "answer_id": 30206645, "question_id": 30205883, "link": "https://stackoverflow.com/questions/30205883/creating-ruby-hash-object-from-rails-routes/30206645#30206645", "title": "Creating ruby hash object from Rails routes?", "body": "<p>You may want to use the <a href=\"https://rubygems.org/gems/js-routes\" rel=\"nofollow\">JS-Routes</a> gem that generates a javascript file that defines all Rails named routes as javascript helpers.</p>\n\n<p>Setup (just add it to the asset pipeline):</p>\n\n<pre><code># add to your application.js\n/*\n= require js-routes\n*/\n</code></pre>\n\n<p>Usage your javascript code like this:</p>\n\n<pre><code>Routes.users_path()                   // =&gt; \"/users\"\nRoutes.user_path(1)                   // =&gt; \"/users/1\"\nRoutes.user_path(1, {format: 'json'}) // =&gt; \"/users/1.json\"\n</code></pre>\n\n<p>Find the documentation here: <a href=\"https://github.com/railsware/js-routes#usage\" rel=\"nofollow\">https://github.com/railsware/js-routes#usage</a></p>\n"}], "owner": {"reputation": 10776, "user_id": 749477, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/6845c6b2318e02258cc1dc56fe620482?s=128&d=identicon&r=PG", "display_name": "Derek", "link": "https://stackoverflow.com/users/749477/derek"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 197, "favorite_count": 0, "accepted_answer_id": 30206253, "answer_count": 3, "score": 0, "last_activity_date": 1431496135, "creation_date": 1431492339, "question_id": 30205883, "link": "https://stackoverflow.com/questions/30205883/creating-ruby-hash-object-from-rails-routes", "title": "Creating ruby hash object from Rails routes?", "body": "<p>Using <code>rails 4.2.1</code></p>\n\n<p>I want to store my <code>rails</code> declared routes from <code>config/routes.rb</code> into a <code>ruby</code> hash that I can access or render somewhere.</p>\n\n<p>The hash should be of the format</p>\n\n<pre><code>{\n  name: 'path',\n  # e.g.\n  login: '/login',\n  home: '/'\n}\n</code></pre>\n\n<p>How do I do this in <code>rails</code>? </p>\n\n<p>Note: I think you get the routes through <code>Rails.application.routes</code> and maybe the names from <code>Rails.application.routes.routes.named_routes.keys</code>, but what's next?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "browser"], "answers": [{"comments": [{"owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "reply_to_user": {"reputation": 71, "user_id": 4713829, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6d859beff6ad8c4f04cbdc3c249c48d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Manuel", "link": "https://stackoverflow.com/users/4713829/jose-manuel"}, "edited": false, "score": 0, "creation_date": 1431567180, "post_id": 30205712, "comment_id": 48559430, "body": "As pointed out below, you can use the other form of  <code>required: true</code> as well, either one should work."}], "tags": [], "owner": {"reputation": 5292, "user_id": 2727267, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/0e7c773908a4f6095f63cb9553bbc7af?s=128&d=identicon&r=PG", "display_name": "Beartech", "link": "https://stackoverflow.com/users/2727267/beartech"}, "is_accepted": true, "score": 6, "last_activity_date": 1431492347, "last_edit_date": 1431492347, "creation_date": 1431491334, "answer_id": 30205712, "question_id": 30205469, "link": "https://stackoverflow.com/questions/30205469/dont-allow-user-to-submit-a-form-with-empty-fields-in-ruby-on-rails/30205712#30205712", "title": "Don&#39;t allow user to submit a form with empty fields in ruby on rails", "body": "<p>When you use something like:</p>\n\n<pre><code>f.email_field\n</code></pre>\n\n<p>It is generating an HTML5 input element that tells the browser it has to be a valid email. HTML 5 also has a <code>required='required'</code> option that can be used to prevent blank fields. </p>\n\n<p>You can add it like this:</p>\n\n<pre><code>&lt;div class=\"field\"&gt;\n  &lt;%= f.email_field :email, autofocus: true, placeholder: \"Email\", :required =&gt; 'required' %&gt;\n&lt;/div&gt;\n</code></pre>\n\n<p>This will add <code>required='required'</code> to your form element. Note that in HTML5 you only need the word <code>required</code> in your form element, but the only way I know to add it in Rails is to use the option form I'm showing you here. </p>\n\n<p>This will prevent submitting the form without that field. This works for current versions of Firefox, Chrome, Opera, and IE11. Safari will prevent the submission but doesn't indicate why. It just does nothing. </p>\n\n<p>I would check this out: <a href=\"http://blueashes.com/2013/web-development/html5-form-validation-fallback/\" rel=\"noreferrer\">http://blueashes.com/2013/web-development/html5-form-validation-fallback/</a></p>\n"}, {"tags": [], "owner": {"reputation": 2467, "user_id": 3703048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/953952e7b8c1e4929c87cd7eec72bc51?s=128&d=identicon&r=PG", "display_name": "Shahzad Tariq", "link": "https://stackoverflow.com/users/3703048/shahzad-tariq"}, "is_accepted": false, "score": 0, "last_activity_date": 1431495086, "creation_date": 1431495086, "answer_id": 30206420, "question_id": 30205469, "link": "https://stackoverflow.com/questions/30205469/dont-allow-user-to-submit-a-form-with-empty-fields-in-ruby-on-rails/30206420#30206420", "title": "Don&#39;t allow user to submit a form with empty fields in ruby on rails", "body": "<p>HTML 5 has required=true option that can be used to prevent form submission with empty fields. In rails form helpers, you can use it like</p>\n\n<pre><code>&lt;%= f.text_field :first_name, required: true %&gt;\n\n&lt;%= f.email_field :email, required: true %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5385, "user_id": 1863692, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/047956b4fb1bf3839b4e651b2cdce88e?s=128&d=identicon&r=PG", "display_name": "Andrew Hendrie", "link": "https://stackoverflow.com/users/1863692/andrew-hendrie"}, "is_accepted": false, "score": 2, "last_activity_date": 1431495819, "last_edit_date": 1431495819, "creation_date": 1431495503, "answer_id": 30206497, "question_id": 30205469, "link": "https://stackoverflow.com/questions/30205469/dont-allow-user-to-submit-a-form-with-empty-fields-in-ruby-on-rails/30206497#30206497", "title": "Don&#39;t allow user to submit a form with empty fields in ruby on rails", "body": "<p>You can set the HTML <code>required</code> attribute to <code>true</code>. Just add <code>required: true</code> to each field.</p>\n\n<p>Here's what your new form will look like:</p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.text_field :name, required: true, autofocus: true, placeholder: \"Name\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.email_field :email, required: true, autofocus: true, placeholder: \"Email\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.number_field :age, required: true, autofocus: true, placeholder: \"Age\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Sign up\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1364, "user_id": 4883788, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/Z9NZQ.jpg?s=128&g=1", "display_name": "SkyWriter", "link": "https://stackoverflow.com/users/4883788/skywriter"}, "is_accepted": false, "score": 1, "last_activity_date": 1431498917, "creation_date": 1431498917, "answer_id": 30207314, "question_id": 30205469, "link": "https://stackoverflow.com/questions/30205469/dont-allow-user-to-submit-a-form-with-empty-fields-in-ruby-on-rails/30207314#30207314", "title": "Don&#39;t allow user to submit a form with empty fields in ruby on rails", "body": "<p>Your case is pretty custom, that's why it looks pretty easy, but what you're really trying to achieve here is called 'client-side validation'.</p>\n\n<p>To be really portable and user-friendly it has to be done in JavaScript. Basically this will be a script that validates the fields and outputs the corresponding error messages to the user, preventing form submission at the same time. This is almost the same that Rails does on the server side when you submit the form.</p>\n\n<p>Once the problem is defined, you can approach it in one of the following ways:</p>\n\n<ol>\n<li><p>Stay with Rails. Rails is initially designed to handle form validation on the server side. You can just accept the way it is, and it will yield the cleanest, shortest and the most semantic code possible. For it to be more seamless you can easily pull in some AJAX for it, which should be easy (<a href=\"http://guides.rubyonrails.org/working_with_javascript_in_rails.html\" rel=\"nofollow\">http://guides.rubyonrails.org/working_with_javascript_in_rails.html</a>). To user it'll look like nothing ever got submitted.</p></li>\n<li><p>Write some custom JS yourself to handle those validations. Either on your own, or with the aid of libraries like <a href=\"http://jqueryvalidation.org/\" rel=\"nofollow\">http://jqueryvalidation.org/</a>. This is going to be a mess, since you'll basically have to duplicate Rails server-side validation code on the client-side in a different language. And keep it in sync.</p></li>\n<li><p>Use one of the helper libraries for Rails. E.g. <a href=\"https://github.com/joecorcoran/judge\" rel=\"nofollow\">https://github.com/joecorcoran/judge</a> looks promising, but there are others to be Googled. These guys exercise the same idea: you've got server-side validations and they should be easily usable on the client-side. Certain libraries generate JavaScript automatically, others just send the form to be validated to the server behind the scenes.</p></li>\n</ol>\n\n<p>If I were you, I would choose the 1st way + AJAX. Other ways would make simple matters unnecessarily complex, and instead of writing useful stuff you'll most certainly have to dive into debugging obscure JS and cryptic meta-programmed Ruby/Rails libraries.</p>\n\n<p>Hope that helps!</p>\n"}], "owner": {"reputation": 71, "user_id": 4713829, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/6d859beff6ad8c4f04cbdc3c249c48d2?s=128&d=identicon&r=PG&f=1", "display_name": "Jose Manuel", "link": "https://stackoverflow.com/users/4713829/jose-manuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 8687, "favorite_count": 0, "accepted_answer_id": 30205712, "answer_count": 4, "score": 4, "last_activity_date": 1431498917, "creation_date": 1431489792, "last_edit_date": 1431490115, "question_id": 30205469, "link": "https://stackoverflow.com/questions/30205469/dont-allow-user-to-submit-a-form-with-empty-fields-in-ruby-on-rails", "title": "Don&#39;t allow user to submit a form with empty fields in ruby on rails", "body": "<p>I am starting use Ruby on Rails and I am having a little problem. I have a form with 3 fields, this is the code: </p>\n\n<pre><code>&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name)) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.text_field :name, autofocus: true, placeholder: \"Name\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.email_field :email, autofocus: true, placeholder: \"Email\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.number_field :age, autofocus: true, placeholder: \"Age\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Sign up\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>In the email field when you write something that is not an email and try to submit, the browser (chrome or firefox ) display an error saying that the field must content an @. The same happen with the age field, if a letter is entered the browser show an error saying that the field only accept numbers. </p>\n\n<p>I wanna know how to make that the browser show a message when any field is empty when you try to submit. I know how to do it in cakephp so I guess it can be done here in ruby too. I already validate the fields in the model, setting the presence in true but that only works for show a message after you submit and the page reload again.</p>\n"}, {"tags": ["ruby"], "answers": [{"comments": [{"owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "edited": false, "score": 0, "creation_date": 1431495835, "post_id": 30205544, "comment_id": 48517930, "body": "Very succinct. My understanding of instance variables in ruby is clearly lacking, that doesn&#39;t fit with how I understood they worked (mainly coming from a rails perspective). Thanks for the link, I&#39;m going to go through that until I understand where I&#39;ve gone wrong."}], "tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": true, "score": 5, "last_activity_date": 1431491015, "last_edit_date": 1495541192, "creation_date": 1431490252, "answer_id": 30205544, "question_id": 30205089, "link": "https://stackoverflow.com/questions/30205089/execute-code-in-included-module-in-class-on-load-not-on-initialize/30205544#30205544", "title": "Execute code in included module in class on load (not on initialize)", "body": "<p>Here's how I would do it.  Use a <a href=\"https://stackoverflow.com/questions/15773552/ruby-class-instance-variable-vs-class-variable\">class instance variable</a> instead of a class variable. Add an <a href=\"http://ruby-doc.org/core-2.2.2/Module.html#method-i-included\" rel=\"nofollow noreferrer\"><code>included</code></a> method, which is run as a callback when a module is included into the class:</p>\n\n<pre><code>class Poly\n  def self.tracking\n    @tracking ||= []\n  end\nend\n\nmodule MyModule\n  def self.included(base)\n    Poly.tracking &lt;&lt; base\n  end\nend\n\nclass MyClass1\n  include MyModule\nend\n\nclass MyClass2\n  include MyModule\nend\n\nputs Poly.tracking.inspect #=&gt; [MyClass1, MyClass2]\n</code></pre>\n"}], "owner": {"reputation": 3014, "user_id": 987074, "user_type": "registered", "accept_rate": 77, "profile_image": "https://i.stack.imgur.com/rWIWG.jpg?s=128&g=1", "display_name": "bdx", "link": "https://stackoverflow.com/users/987074/bdx"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1791, "favorite_count": 1, "accepted_answer_id": 30205544, "answer_count": 1, "score": 2, "last_activity_date": 1431491015, "creation_date": 1431487332, "last_edit_date": 1431487680, "question_id": 30205089, "link": "https://stackoverflow.com/questions/30205089/execute-code-in-included-module-in-class-on-load-not-on-initialize", "title": "Execute code in included module in class on load (not on initialize)", "body": "<p>I'm working on a project where multiple classes will include <code>MyModule</code>. Upon including the module, I would like the classes that include the module to push a handle to the class type to a specific class-level array.</p>\n\n<p>Psuedocode I've tried below that isn't having the effect I want:</p>\n\n<pre><code>class Poly\n  @@tracking = []\nend\n\nmodule MyModule\n  def initialize(klass)\n    Poly.tracking &lt;&lt; self # Where `self` is the class, e.g. `MyClass1`, not an instance of the class.\n  end\nend\n\nclass MyClass1\n  include MyModule\nend\n\nclass MyClass2\n  include MyModule\nend\n</code></pre>\n\n<p>When this is loaded, I'd like for <code>Poly.tracking</code> to equal <code>[MyClass1, MyClass2]</code>.</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "performance", "hash"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 2, "creation_date": 1431488681, "post_id": 30204980, "comment_id": 48515672, "body": "If your data is quite big then you should throw it in a database and index it. Even SQLite would probably eat up something like this."}, {"owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1431491974, "post_id": 30204980, "comment_id": 48516567, "body": "Is it safe to assume that the hashes in the array are sorted by date?"}, {"owner": {"reputation": 145, "user_id": 1565915, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1fb7466128e0dcebe678443df222c541?s=128&d=identicon&r=PG", "display_name": "Duong Bach", "link": "https://stackoverflow.com/users/1565915/duong-bach"}, "reply_to_user": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "edited": false, "score": 0, "creation_date": 1431497062, "post_id": 30204980, "comment_id": 48518474, "body": "@spickermann : no,it is random my friend"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431512798, "post_id": 30204980, "comment_id": 48528361, "body": "So you have three pieces of code and you want to know which is fastest. Why don&#39;t you <i>measure</i> the performance?"}, {"owner": {"reputation": 145, "user_id": 1565915, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1fb7466128e0dcebe678443df222c541?s=128&d=identicon&r=PG", "display_name": "Duong Bach", "link": "https://stackoverflow.com/users/1565915/duong-bach"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431567424, "post_id": 30204980, "comment_id": 48559489, "body": "@SergioTulentsev : im sorry,i dont know the proper way to do it so i add new 2 values start_time and end_time.and in the end of each code,i put out end_time - start_time ,but it didnt work out so well..."}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431583838, "post_id": 30204980, "comment_id": 48563954, "body": "Use this <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow noreferrer\">ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.ht&zwnj;&#8203;ml</a>"}], "answers": [{"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 1, "last_activity_date": 1431488117, "last_edit_date": 1431488117, "creation_date": 1431487142, "answer_id": 30205066, "question_id": 30204980, "link": "https://stackoverflow.com/questions/30204980/ruby-looking-array-of-hash-performance/30205066#30205066", "title": "Ruby Looking Array of hash Performance", "body": "<p>v3 is fastest: </p>\n\n<pre><code>def v1\n  @data.select {|h| h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"}\nend\n\ndef v2\n  @data.find{|h| h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"}\nend\n\ndef v3\n  @data.each do |t|\n    if (t[:start_date] &lt;= \"2015-01-04\" &amp;&amp; t[:end_date] &gt;= \"2015-01-04\")\n      return t\n      break\n    end\n  end\nend\n</code></pre>\n\n<p><code>select</code> will always be slowest because it has to iterate through the entire array. I'm not sure why <code>find</code> is slower than v3. It may have to do with overhead.</p>\n\n<p>However, <code>find</code> and v3 may be the same for your data. The results below are not necessarily valid for your data.</p>\n\n<pre><code>t = Time.now; 10000.times{ v1 }; Time.now - t\n=&gt; 0.014131\n\nt = Time.now; 10000.times{ v2 }; Time.now - t\n=&gt; 0.013138\n\nt = Time.now; 10000.times{ v3 }; Time.now - t\n=&gt; 0.008799\n</code></pre>\n\n<p>Running this on the sample data is not the same thing as running it on your real data.</p>\n\n<p>If the real data is too large, you can run it on a subset of the data to get a better answer.</p>\n\n<p>BTW, you can rewrite v3 as:</p>\n\n<pre><code>data.each do |t|\n  break t if (t[:start_date] &lt;= \"2015-01-04\" &amp;&amp; t[:end_date] &gt;= \"2015-01-04\")\nend\n</code></pre>\n\n<p>FWIW, operating on an array is going to be very unwieldy and slow. You may want to save it in a database and run a query. For a large dataset, that would probably be at least 2 orders of magnitude faster.</p>\n"}, {"comments": [{"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 145, "user_id": 1565915, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1fb7466128e0dcebe678443df222c541?s=128&d=identicon&r=PG", "display_name": "Duong Bach", "link": "https://stackoverflow.com/users/1565915/duong-bach"}, "edited": false, "score": 0, "creation_date": 1431512859, "post_id": 30205088, "comment_id": 48528409, "body": "@DuongBach: don&#39;t post &quot;thank you&quot; comments. Upvote is the best thanks (if you truly think it&#39;s helpful)"}, {"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431513155, "post_id": 30205088, "comment_id": 48528593, "body": "@Sergio Tulentsev, sorry, I found the mistake, i will correct"}, {"owner": {"reputation": 145, "user_id": 1565915, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1fb7466128e0dcebe678443df222c541?s=128&d=identicon&r=PG", "display_name": "Duong Bach", "link": "https://stackoverflow.com/users/1565915/duong-bach"}, "reply_to_user": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "edited": false, "score": 0, "creation_date": 1431513974, "post_id": 30205088, "comment_id": 48529131, "body": "@SergioTulentsev : ok :) ,"}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 2, "last_activity_date": 1431513919, "last_edit_date": 1431513919, "creation_date": 1431487331, "answer_id": 30205088, "question_id": 30204980, "link": "https://stackoverflow.com/questions/30204980/ruby-looking-array-of-hash-performance/30205088#30205088", "title": "Ruby Looking Array of hash Performance", "body": "<p>You can test by <a href=\"http://ruby-doc.org/stdlib-1.9.3/libdoc/benchmark/rdoc/Benchmark.html\" rel=\"nofollow\">benchmark</a></p>\n\n<p>For example:</p>\n\n<pre><code>require 'benchmark'\n\nn = 1000000\n\ndata = [\n  {:id =&gt; 1,:start_date =&gt; \"2015-01-02\",:end_date =&gt; \"2015-01-05\"},\n  {:id =&gt; 2,:start_date =&gt; \"2015-01-06\",:end_date =&gt; \"2015-01-07\"},\n  {:id =&gt; 3,:start_date =&gt; \"2015-01-10\",:end_date =&gt; \"2015-01-20\"}\n]\n\n\nBenchmark.bm do |x|\n\nx.report { n.times do\n   data.select {|h| h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"}\n   end\n}\n\nx.report { n.times do\n data.find{|h| h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"}\n  end\n\n }\n\nx.report {\nn.times do\n   finding_hash = {}\n   data.each do |t|\n     if (t[:start_date] &lt;= \"2015-01-04\" &amp;&amp; t[:end_date] &gt;= \"2015-01-04\")\n       finding_hash = t\n       break\n     end\n    end\nend\n}\n\nend\n</code></pre>\n\n<p>output:</p>\n\n<pre><code>       user     system      total        real\n   1.490000   0.020000   1.510000 (  1.533589)\n   1.070000   0.010000   1.080000 (  1.096578)\n   1.000000   0.010000   1.010000 (  1.011021)\n</code></pre>\n\n<p>Test results is related to the value of n and the data size.</p>\n"}, {"tags": [], "owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "is_accepted": false, "score": 2, "last_activity_date": 1431489431, "last_edit_date": 1431489431, "creation_date": 1431488806, "answer_id": 30205317, "question_id": 30204980, "link": "https://stackoverflow.com/questions/30204980/ruby-looking-array-of-hash-performance/30205317#30205317", "title": "Ruby Looking Array of hash Performance", "body": "<p>All the methods you've tried are <code>Enumerable</code> methods, but the native <code>Array</code> methods are faster. Try <a href=\"http://ruby-doc.org/core-2.2.2/Array.html#method-i-find_index\" rel=\"nofollow\"><code>find_index</code></a>.  Even after having to make a separate call to load the hash it's still about 20% faster than the next fastest:</p>\n\n<pre><code>index = data.find_index {|h| h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"}\nx = data[index]\n</code></pre>\n\n<p>My benchmarks:</p>\n\n<pre><code>n = 1_000_000\n\ndata = [\n  {:id =&gt; 1,:start_date =&gt; \"2015-01-02\",:end_date =&gt; \"2015-01-05\"},\n  {:id =&gt; 2,:start_date =&gt; \"2015-01-06\",:end_date =&gt; \"2015-01-07\"},\n  {:id =&gt; 3,:start_date =&gt; \"2015-01-10\",:end_date =&gt; \"2015-01-20\"}\n]\n\nBenchmark.bm do |x|\n  x.report 'Enumerable#select' do\n    n.times do\n      data.select do |h|\n        h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"\n      end\n    end\n  end\n\n  x.report 'Enumerable#detect' do\n    n.times do\n      data.detect do |h|\n        h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"\n      end\n    end\n  end\n\n  x.report 'Enumerable#each  ' do\n    n.times do\n      finding_hash = {}\n      data.each do |t|\n        if (t[:start_date] &lt;= \"2015-01-04\" &amp;&amp; t[:end_date] &gt;= \"2015-01-04\")\n          finding_hash = t\n          break t\n        end\n      end\n    end\n  end\n\n  x.report 'Array#find_index ' do\n    n.times do\n       index = data.find_index {|h| h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"}\n       x = data[index]\n    end\n  end\nend\n</code></pre>\n\n<p>Results are:</p>\n\n<pre><code>Enumerable#select  1.000000   0.010000   1.010000 (  1.002282)\nEnumerable#detect  0.790000   0.000000   0.790000 (  0.797319)\nEnumerable#each    0.620000   0.000000   0.620000 (  0.627272)\nArray#find_index   0.520000   0.000000   0.520000 (  0.515691)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1506, "user_id": 3414150, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/tASIO.jpg?s=128&g=1", "display_name": "lx00st", "link": "https://stackoverflow.com/users/3414150/lx00st"}, "is_accepted": false, "score": 1, "last_activity_date": 1431511486, "last_edit_date": 1431511486, "creation_date": 1431502028, "answer_id": 30208324, "question_id": 30204980, "link": "https://stackoverflow.com/questions/30204980/ruby-looking-array-of-hash-performance/30208324#30208324", "title": "Ruby Looking Array of hash Performance", "body": "<p>All those variants are O(n) complexity. \nIf your ranges are not overlapping you can use <code>bsearch</code> of array which is O(log n) complexity. You should sort your ranges at first.</p>\n\n<pre><code>sorted = data.sort_by { |x| x[:start_date] }\nsorted.bsearch { |x| ..check if range of `x` includes value.. }\n</code></pre>\n"}], "owner": {"reputation": 145, "user_id": 1565915, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1fb7466128e0dcebe678443df222c541?s=128&d=identicon&r=PG", "display_name": "Duong Bach", "link": "https://stackoverflow.com/users/1565915/duong-bach"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 168, "favorite_count": 0, "answer_count": 4, "score": 4, "last_activity_date": 1431513919, "creation_date": 1431486466, "question_id": 30204980, "link": "https://stackoverflow.com/questions/30204980/ruby-looking-array-of-hash-performance", "title": "Ruby Looking Array of hash Performance", "body": "<p>Currently I face this question \nFor example I have this array of hash </p>\n\n<pre><code>data = [\n  {:id =&gt; 1,:start_date =&gt; \"2015-01-02\",:end_date =&gt; \"2015-01-05\"},\n  {:id =&gt; 2,:start_date =&gt; \"2015-01-06\",:end_date =&gt; \"2015-01-07\"},\n  {:id =&gt; 3,:start_date =&gt; \"2015-01-10\",:end_date =&gt; \"2015-01-20\"}\n]\n</code></pre>\n\n<p>So I want to find the exact hash that have \"2015-01-04\" in range of above hashes's start_date and end_date</p>\n\n<p>Follow the document I find out there are 3 ways to do this</p>\n\n<p>1) Use select</p>\n\n<pre><code>finding_hash = data.select {|h| h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"}\n</code></pre>\n\n<p>finding_hash will return an array of needed hash\nBut as i do this,i assure that there will always only one hash match the condition do after do this SELECT\ni have to <code>finding_hash.first</code> to get the hash i want</p>\n\n<p>2)Use find</p>\n\n<pre><code>finding_hash = data.find{|h| h[:start_date] &lt;= \"2015-01-04\" &amp;&amp; h[:end_date] &gt;= \"2015-01-04\"}\n</code></pre>\n\n<p>This way of doing ,the finding_hash IS the result hash i need</p>\n\n<p>3)Traditional loop</p>\n\n<pre><code>data.each do |t|\n  if (t[:start_date] &lt;= \"2015-01-04\" &amp;&amp; t[:end_date] &gt;= \"2015-01-04\")\n    return t\n    break\n  end\nend\n</code></pre>\n\n<hr>\n\n<p>So which one is the fastest way to do this.I do need the performance because my data is quite big!</p>\n\n<p>Thank you and sorry for my bad english!</p>\n"}, {"tags": ["ruby", "csv"], "comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1431488931, "post_id": 30204656, "comment_id": 48515727, "body": "Do you have to use CSV for this? CSV is a variable record length format so altering a row generally means copying the file row by row and altering the desired row along the way. CSV is a fine format to use for data interchange but it makes a terrible database."}, {"owner": {"reputation": 23, "user_id": 4794654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2868add00f79d935e0b908bbe798fac?s=128&d=identicon&r=PG&f=1", "display_name": "NickJ987", "link": "https://stackoverflow.com/users/4794654/nickj987"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1431530621, "post_id": 30204656, "comment_id": 48542138, "body": "I suppose I do not have to.  I&#39;ve seen code along the lines of File.open, file.readlines.each, line.split(&#39;,&#39;)[1], etc.  Do you think something like that would work better?"}, {"owner": {"reputation": 23, "user_id": 4794654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2868add00f79d935e0b908bbe798fac?s=128&d=identicon&r=PG&f=1", "display_name": "NickJ987", "link": "https://stackoverflow.com/users/4794654/nickj987"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1431534009, "post_id": 30204656, "comment_id": 48544468, "body": "I just realized now that I should clarify that I do have to use a CSV or text file, but I do not necessarily have to use the CSV gem or whatever."}, {"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1431538189, "post_id": 30204656, "comment_id": 48546942, "body": "Doesn&#39;t matter if you use <code>File</code> or <code>CSV</code>, you&#39;ll still end up reading the file record by record, altering the records you need to change, and then writing them all out again. Or import your CSV into an SQLite database, do your work in SQLite, then dump the results out to CSV when you&#39;re done."}, {"owner": {"reputation": 23, "user_id": 4794654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2868add00f79d935e0b908bbe798fac?s=128&d=identicon&r=PG&f=1", "display_name": "NickJ987", "link": "https://stackoverflow.com/users/4794654/nickj987"}, "reply_to_user": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1431564334, "post_id": 30204656, "comment_id": 48558747, "body": "Thanks for the help mu.  I&#39;ll look into using SQLite"}], "answers": [{"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1462328052, "creation_date": 1462328052, "answer_id": 37017296, "question_id": 30204656, "link": "https://stackoverflow.com/questions/30204656/ruby-write-a-value-to-a-specific-location-in-csv-file/37017296#37017296", "title": "Ruby: Write a value to a specific location in CSV file", "body": "<p>The simple answer is that you can refer to the <code>:price</code> column in the CSV file, just like you refer to the <code>:url</code> column.  Try this code to set the price in the CSV object in memory:</p>\n\n<pre><code>row[:price] = new_price\n</code></pre>\n\n<p>After you've read through all of the records, you'll want to save the CSV file again.  You can save it to any filename, but we'll simply overwrite the previous file in this example:</p>\n\n<pre><code>CSV.open(\"mp_lookup.csv\", \"wb\") do |csv|\n  contents.each do |row|\n      csv &lt;&lt; row\n  end\nend\n</code></pre>\n\n<p>In a real production environment, you'd want to be more fault tolerant than this, and preserve the original file until the end of the process.  However, this shows how to update the values in the price column for each row, and then save the changes to a file.</p>\n"}], "owner": {"reputation": 23, "user_id": 4794654, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c2868add00f79d935e0b908bbe798fac?s=128&d=identicon&r=PG&f=1", "display_name": "NickJ987", "link": "https://stackoverflow.com/users/4794654/nickj987"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 728, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462328052, "creation_date": 1431484263, "question_id": 30204656, "link": "https://stackoverflow.com/questions/30204656/ruby-write-a-value-to-a-specific-location-in-csv-file", "title": "Ruby: Write a value to a specific location in CSV file", "body": "<p>I'm still fairly new to coding and I'm trying to learn about manipulating CSV files.  </p>\n\n<p>The code below opens a specified CSV file, goes to each url in the CSV file in column B (header = url), and finds the price on the webpage.</p>\n\n<p>Example data from CSV file:</p>\n\n<pre><code>Store,URL,Price\nWalmart,http://www.walmart.com/ip/HP-11.6-Stream-Laptop-PC-with-Intel-Celeron-Processor-2GB-Memory-32GB-Hard-Drive-Windows-8.1-and-Microsoft-Office-365-Personal-1-yr-subscription/39073484\nWalmart,http://www.walmart.com/ip/Nextbook-10.1-Intel-Quad-Core-2-In-1-Detachable-Windows-8.1-Tablet/39092206\nWalmart,http://www.walmart.com/ip/Nextbook-10.1-Intel-Quad-Core-2-In-1-Detachable-Windows-8.1-Tablet/39092206\n</code></pre>\n\n<p>I'm having trouble writing that price to the adjacent column C (header = price) in the same CSV.</p>\n\n<pre><code>require 'nokogiri'\nrequire 'open-uri'\nrequire 'csv'\n\ncontents = CSV.open \"mp_lookup.csv\", headers: true, header_converters: :symbol\ncontents.each do |row|\n  row_url = row[:url]\n  goto_url = Nokogiri::HTML(open(row_url))\n  new_price = goto_url.css('meta[itemprop=\"price\"]')[0]['content']\n\n#----\n#In this section, I'm looking to write the value of new_price to the 3rd column in the same CSV file\n\n#----\n\nend\n</code></pre>\n\n<p>In the past, I've been able to use:</p>\n\n<pre><code>in_file = open(\"mp_lookup.csv\", 'w')\nin_file.write(new_price)\n</code></pre>\n\n<p>But this doesn't seem to work in this situation.</p>\n\n<p>Any help is appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ssh", "capistrano", "rbenv"], "comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "edited": false, "score": 1, "creation_date": 1431483152, "post_id": 30204392, "comment_id": 48514179, "body": "you can run <code>ssh deploy@XXX.XXX.XXX.XXX</code> in terminal to ssh to remote server, if doesn&#39;t work,  please check your ssh key."}, {"owner": {"reputation": 339, "user_id": 677697, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7105d171ae139a35d4900187d3ee2345?s=128&d=identicon&r=PG", "display_name": "Flemming Funch", "link": "https://stackoverflow.com/users/677697/flemming-funch"}, "edited": false, "score": 1, "creation_date": 1431884371, "post_id": 30204392, "comment_id": 48676801, "body": "I&#39;m having possibly the very same problem. At rbenv:validate it suddenly needs a password, even though it already connected successfully to the server with a key a moment before. And it doesn&#39;t accept the correct password. Deployments have worked perfectly fine in the past."}], "answers": [{"tags": [], "owner": {"reputation": 9, "user_id": 5137417, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6703d52ec2b11e9b81b352a4bf600ac3?s=128&d=identicon&r=PG", "display_name": "wei dong", "link": "https://stackoverflow.com/users/5137417/wei-dong"}, "is_accepted": false, "score": 0, "last_activity_date": 1507622995, "last_edit_date": 1507622995, "creation_date": 1437451741, "answer_id": 31530213, "question_id": 30204392, "link": "https://stackoverflow.com/questions/30204392/capistrano-deploy-failure-connection-closed-by-remote-host-tasks-top-rbe/31530213#31530213", "title": "Capistrano Deploy Failure - Connection closed by remote host - Tasks: TOP =&gt; rbenv:validate", "body": "<p>I'm having the same problem. I resolve this problem with two steps:</p>\n\n<ol>\n<li>I just add one line to the server file <code>~/.ssh/authorized_keys</code>, the content is my local file <code>~/.ssh/id_rsa.pub</code>.</li>\n<li>Because of I have two same account name on my mac and <code>VirtualBox VM</code>, and I uncomment one of them in server file <code>~/.ssh/authorized_keys</code>, everything goes well.</li>\n</ol>\n\n<p>Good Luck!</p>\n"}, {"tags": [], "owner": {"reputation": 1220, "user_id": 4675524, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/f887259cdf5e3612d93631e7687da01d?s=128&d=identicon&r=PG&f=1", "display_name": "Swaps", "link": "https://stackoverflow.com/users/4675524/swaps"}, "is_accepted": false, "score": 0, "last_activity_date": 1507621461, "creation_date": 1507621461, "answer_id": 46661208, "question_id": 30204392, "link": "https://stackoverflow.com/questions/30204392/capistrano-deploy-failure-connection-closed-by-remote-host-tasks-top-rbe/46661208#46661208", "title": "Capistrano Deploy Failure - Connection closed by remote host - Tasks: TOP =&gt; rbenv:validate", "body": "<p>It might not be the proper solution, but for me starting deployment from new tab/terminal worked. I think the shell restart was required.</p>\n"}], "owner": {"reputation": 21, "user_id": 3811886, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b55b96737993059673d1752eade76c56?s=128&d=identicon&r=PG&f=1", "display_name": "user3811886", "link": "https://stackoverflow.com/users/3811886/user3811886"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1760, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1507622995, "creation_date": 1431482557, "question_id": 30204392, "link": "https://stackoverflow.com/questions/30204392/capistrano-deploy-failure-connection-closed-by-remote-host-tasks-top-rbe", "title": "Capistrano Deploy Failure - Connection closed by remote host - Tasks: TOP =&gt; rbenv:validate", "body": "<p>Capistrano is failing to deploy my Ruby on Rails app. I have not altered any configuration files (Capfile, deploy.rb etc.) since my previous successful deployment.</p>\n\n<pre><code>chris-iMac:untrackedlatest Chris$ cap production deploy --trace\n** Invoke production (first_time)\n** Execute production\n** Invoke load:defaults (first_time)\n** Execute load:defaults\n** Invoke bundler:map_bins (first_time)\n** Execute bundler:map_bins\n** Invoke deploy:set_rails_env (first_time)\n** Execute deploy:set_rails_env\n** Invoke deploy:set_rails_env \n** Invoke rbenv:validate (first_time)\n** Execute rbenv:validate\nDEBUG [eb8ce4ac] Running /usr/bin/env [ -d /usr/local/rbenv/versions/2.1.5 ] as deploy@XXX.XXX.XXX.XXX\nDEBUG [eb8ce4ac] Command: [ -d /usr/local/rbenv/versions/2.1.5 ]\nText will be echoed in the clear. Please install the HighLine or Termios libraries to suppress echoed text.\ndeploy@XXX.XXX.XXX.XXX's password:XXXX\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as deploy@XXX.XXX.XXX.XXX: connection closed by remote host\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/runners/parallel.rb:16:in `rescue in block (2 levels) in execute'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/runners/parallel.rb:12:in `block (2 levels) in execute'\nNet::SSH::Disconnect: connection closed by remote host\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/transport/packet_stream.rb:105:in `block in next_packet'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/transport/packet_stream.rb:95:in `loop'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/transport/packet_stream.rb:95:in `next_packet'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:183:in `block in poll_message'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:178:in `loop'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:178:in `poll_message'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/transport/session.rb:163:in `next_message'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/session.rb:95:in `block in next_message'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/session.rb:94:in `loop'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/session.rb:94:in `next_message'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/methods/password.rb:25:in `authenticate'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/session.rb:79:in `block in authenticate'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/session.rb:66:in `each'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh/authentication/session.rb:66:in `authenticate'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/net-ssh-2.9.2/lib/net/ssh.rb:211:in `start'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/connection_pool.rb:50:in `call'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/connection_pool.rb:50:in `create_new_entry'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/connection_pool.rb:22:in `checkout'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/netssh.rb:187:in `with_ssh'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/netssh.rb:137:in `block in _execute'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/netssh.rb:133:in `tap'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/netssh.rb:133:in `_execute'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/netssh.rb:62:in `test'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/capistrano-rbenv-2.0.3/lib/capistrano/tasks/rbenv.rake:10:in `block (3 levels) in &lt;top (required)&gt;'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/netssh.rb:54:in `instance_exec'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/backends/netssh.rb:54:in `run'\n/Users/Chris/.rbenv/versions/2.1.5/lib/ruby/gems/2.1.0/gems/sshkit-1.7.1/lib/sshkit/runners/parallel.rb:13:in `block (2 levels) in execute'\nTasks: TOP =&gt; rbenv:validate\n</code></pre>\n\n<p>Local ruby version:</p>\n\n<pre><code>chris-iMac:untrackedlatest Chris$ ruby -v\nruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-darwin14.0]\n</code></pre>\n\n<p>Remote ruby version:</p>\n\n<pre><code>untracked@untrackedprod:/srv/untracked/current$ ruby -v\nruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-linux]\n</code></pre>\n\n<p>I have not altered anything with regards to ClientAliveInterval / ServerAliveInterval since previous successful deploy.</p>\n\n<p>I am able to successfully SSH into the server.</p>\n\n<p>Capistrano gems:</p>\n\n<pre><code>Using capistrano 3.4.0\nUsing capistrano-bundler 1.1.4\nUsing capistrano-passenger 0.0.5\nUsing capistrano-rails 1.1.3\nUsing capistrano-rbenv 2.0.3\n</code></pre>\n\n<p>Server is running Ubuntu 14.04</p>\n\n<p>Any assistance would be much appreciated!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "csrf", "authenticity-token"], "answers": [{"comments": [{"owner": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "edited": false, "score": 0, "creation_date": 1431482895, "post_id": 30204429, "comment_id": 48514099, "body": "Thanks for your advice - I&#39;m actually doing a POST request to my Rails app via an iOS app.  I&#39;m wondering how an authentication token even becomes invalid?  I will try your suggestions and let you know if they work."}, {"owner": {"reputation": 338, "user_id": 2448623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca7118778cb36d1976c0ef5f412690?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2448623/alex"}, "reply_to_user": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "edited": false, "score": 1, "creation_date": 1431483249, "post_id": 30204429, "comment_id": 48514214, "body": "I have same problems 1 year ago when I try to post data from my Android app and from external services by API. After I added this 2 methods I have newer seen errors. Auth token has expired period, or it can be invalid after disconnect."}, {"owner": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "edited": false, "score": 0, "creation_date": 1431483295, "post_id": 30204429, "comment_id": 48514226, "body": "how do you set authentication tokens so they don&#39;t expire?"}, {"owner": {"reputation": 338, "user_id": 2448623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca7118778cb36d1976c0ef5f412690?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2448623/alex"}, "reply_to_user": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "edited": false, "score": 0, "creation_date": 1431483455, "post_id": 30204429, "comment_id": 48514270, "body": "I don&#39;t do this for real user, I just check if Token expired. It&#39;s not good practice to change default expired. For API authentication system I am using user login and password"}, {"owner": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "edited": false, "score": 0, "creation_date": 1431485299, "post_id": 30204429, "comment_id": 48514736, "body": "I spoke to soon - actually, this didn&#39;t resolve the issue for me.  My error messages are shorter now but I&#39;m still not able to process the POST request.  I&#39;ll update my question with the new error."}, {"owner": {"reputation": 338, "user_id": 2448623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca7118778cb36d1976c0ef5f412690?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2448623/alex"}, "reply_to_user": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "edited": false, "score": 0, "creation_date": 1431485881, "post_id": 30204429, "comment_id": 48514883, "body": "second code solve problem with InvalidAuthenticityToken error for people. Better way in API for apps use this code in every controller: skip_before_filter :verify_authenticity_token, :only =&gt; [:create, :update]. You use in your application controller protect_from_forgery with: :exception but For APIs, you may want to use :null_session instead."}], "tags": [], "owner": {"reputation": 338, "user_id": 2448623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca7118778cb36d1976c0ef5f412690?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2448623/alex"}, "is_accepted": false, "score": 6, "last_activity_date": 1431482992, "last_edit_date": 1431482992, "creation_date": 1431482782, "answer_id": 30204429, "question_id": 30204321, "link": "https://stackoverflow.com/questions/30204321/rails-cant-verify-csrf-token-authenticity/30204429#30204429", "title": "Rails: Can&#39;t verify CSRF token authenticity", "body": "<p>This often happens especially with the search bots or API calls from another applications or ping services (like pingdom).</p>\n\n<p>For allow cross domain request (if you have API on your website or some another service for external application) you can add this code to your application_controller.rb</p>\n\n<pre><code># API POST REGUEST ALLOW CROSS DOMAIN\n  before_filter :cor\n  def cor\n    headers[\"Access-Control-Allow-Origin\"]  = \"*\"\n    headers[\"Access-Control-Allow-Methods\"] = %w{GET POST PUT DELETE}.join(\",\")\n    headers[\"Access-Control-Allow-Headers\"] = %w{Origin Accept Content-Type X-Requested-With X-CSRF-Token}.join(\",\")\n    head(:ok) if request.request_method == \"OPTIONS\"\n  end\n</code></pre>\n\n<p>If you don't have API, this error may have simple problem with expired session, just add this code to your application_controller.rb</p>\n\n<pre><code># Resque form for invalid authentificitytoken\n  rescue_from ActionController::InvalidAuthenticityToken, :with =&gt; :bad_token\n  def bad_token\n    flash[:warning] = \"Session expired\"\n    redirect_to root_path\n  end\n</code></pre>\n\n<p><strong>In any cases better to add second code to check expired session and doesn't show rails error for user.</strong>\nShowing rails general error when ActionController::InvalidAuthenticityToken confusing people because it is not site error. </p>\n"}, {"tags": [], "owner": {"reputation": 2467, "user_id": 3703048, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/953952e7b8c1e4929c87cd7eec72bc51?s=128&d=identicon&r=PG", "display_name": "Shahzad Tariq", "link": "https://stackoverflow.com/users/3703048/shahzad-tariq"}, "is_accepted": false, "score": 2, "last_activity_date": 1431495695, "creation_date": 1431495695, "answer_id": 30206546, "question_id": 30204321, "link": "https://stackoverflow.com/questions/30204321/rails-cant-verify-csrf-token-authenticity/30206546#30206546", "title": "Rails: Can&#39;t verify CSRF token authenticity", "body": "<p>We experience same issue and ended up using rack cors gem. It provides lots flexibility.</p>\n\n<p>Simply add this line to Gemfile</p>\n\n<pre><code>gem 'rack-cors', :require =&gt; 'rack/cors'\n</code></pre>\n\n<p>and then run bundle install command. There are many configuration options available. For more details <a href=\"https://github.com/cyu/rack-cors\" rel=\"nofollow\">https://github.com/cyu/rack-cors</a></p>\n"}, {"comments": [{"owner": {"reputation": 118, "user_id": 3063083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mYVqv.png?s=128&g=1", "display_name": "vtamara", "link": "https://stackoverflow.com/users/3063083/vtamara"}, "edited": false, "score": 0, "creation_date": 1468832200, "post_id": 33090636, "comment_id": 64270505, "body": "I wonder why the downvote.  The situation I described solved the problem for me in the context explained."}, {"owner": {"reputation": 1145, "user_id": 2910, "user_type": "registered", "accept_rate": 67, "profile_image": "https://www.gravatar.com/avatar/f3bfbe6f862c6a104cc9196c1270fe10?s=128&d=identicon&r=PG", "display_name": "benc", "link": "https://stackoverflow.com/users/2910/benc"}, "edited": false, "score": 0, "creation_date": 1471661776, "post_id": 33090636, "comment_id": 65449553, "body": "I just upvoted, because it is what happened on a project I was working on. I haven&#39;t finished looking, but I think that cookies off might pass a null session id?"}], "tags": [], "owner": {"reputation": 118, "user_id": 3063083, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/mYVqv.png?s=128&g=1", "display_name": "vtamara", "link": "https://stackoverflow.com/users/3063083/vtamara"}, "is_accepted": false, "score": 0, "last_activity_date": 1444687172, "last_edit_date": 1444687172, "creation_date": 1444685871, "answer_id": 33090636, "question_id": 30204321, "link": "https://stackoverflow.com/questions/30204321/rails-cant-verify-csrf-token-authenticity/33090636#33090636", "title": "Rails: Can&#39;t verify CSRF token authenticity", "body": "<p>Enable cookies in your browser.</p>\n\n<p>I had the same issue by using <code>w3m</code> version 0.5.3 on the distribution adJ of OpenBSD 5.7.  The application worked again for me when I enabled cookies to w3m by using the option <code>-cookie</code>:</p>\n\n<pre><code>w3m --cookie http://127.0.0.1:3000\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 81, "user_id": 5415166, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/38fb5b3988cac42a775b461b750645f9?s=128&d=identicon&r=PG&f=1", "display_name": "jkwok", "link": "https://stackoverflow.com/users/5415166/jkwok"}, "is_accepted": false, "score": 1, "last_activity_date": 1506983779, "creation_date": 1506983779, "answer_id": 46534696, "question_id": 30204321, "link": "https://stackoverflow.com/questions/30204321/rails-cant-verify-csrf-token-authenticity/46534696#46534696", "title": "Rails: Can&#39;t verify CSRF token authenticity", "body": "<p>A little late to the party but if in case anyone else is looking for a solution.</p>\n\n<p>Are you making a POST request to <code>ProjectsController#create</code>? If so try adding </p>\n\n<pre><code>protect_from_forgery with: :null_session, only: [:create]\n</code></pre>\n\n<p>to the top of <code>ProjectsController</code>. Functionally it should be the same as <code>skip_before_action :verify_authenticity_token</code> but not sure if you are inheriting from <code>ApplicationController</code>. If you would like to add your Proc check, you can do</p>\n\n<pre><code>protect_from_forgery with: :null_session,\n    if: Proc.new { |c| c.request.format =~ %r{application/json} }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 11701996, "user_type": "registered", "profile_image": "https://graph.facebook.com/2516665325013240/picture?type=large", "display_name": "Asher Namanya", "link": "https://stackoverflow.com/users/11701996/asher-namanya"}, "is_accepted": false, "score": 0, "last_activity_date": 1591953317, "last_edit_date": 1591953317, "creation_date": 1591952891, "answer_id": 62341090, "question_id": 30204321, "link": "https://stackoverflow.com/questions/30204321/rails-cant-verify-csrf-token-authenticity/62341090#62341090", "title": "Rails: Can&#39;t verify CSRF token authenticity", "body": "<p>I have been working Chatrooms with action cable Rails 5.2 and face the same problem. It appears that this happened on the controller and then I used this:</p>\n\n<pre><code>protect_from_forgery with: :null_session,\n    if: Proc.new { |c| c.request.format =~ %r{application/json} }\n</code></pre>\n\n<p>in the application controller and it worked amazingly.</p>\n"}], "owner": {"reputation": 8159, "user_id": 1720985, "user_type": "registered", "accept_rate": 51, "profile_image": "https://www.gravatar.com/avatar/0c7a3d1f4d51d4fb5f776238714e6498?s=128&d=identicon&r=PG", "display_name": "scientiffic", "link": "https://stackoverflow.com/users/1720985/scientiffic"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 9494, "favorite_count": 0, "answer_count": 5, "score": 5, "last_activity_date": 1591953317, "creation_date": 1431482073, "last_edit_date": 1431485398, "question_id": 30204321, "link": "https://stackoverflow.com/questions/30204321/rails-cant-verify-csrf-token-authenticity", "title": "Rails: Can&#39;t verify CSRF token authenticity", "body": "<p>My Rails app suddenly started giving me the following error:</p>\n\n<pre><code>Can't verify CSRF token authenticity\nActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):\n</code></pre>\n\n<p>I haven't made any changes to the app, so I'm totally flummoxed as to what's causing this issue.  The full error log is below.  I took out the authenticity token but have confirmed that the token is valid for the current user (by checking in the console).</p>\n\n<pre><code>2015-05-13T01:44:49.038482+00:00 app[web.1]: I, [2015-05-13T01:44:49.038369 #9]  INFO -- : Started POST \"/projects?auth_token=xxx\u201d for 76.118.180.235 at 2015-05-13 01:44:49 +0000\n2015-05-13T01:44:49.044865+00:00 app[web.1]: I, [2015-05-13T01:44:49.044762 #9]  INFO -- : Completed 422 Unprocessable Entity in 1ms\n2015-05-13T01:44:49.119991+00:00 app[web.1]: I, [2015-05-13T01:44:49.119893 #9]  INFO -- : Processing by SpinsController#create as JSON\n2015-05-13T01:44:49.120060+00:00 app[web.1]: I, [2015-05-13T01:44:49.119998 #9]  INFO -- :   Parameters: {\"spin\"=&gt;{}, \"auth_token\"=&gt;\u201dxxx\u201d}\n2015-05-13T01:44:49.120537+00:00 app[web.1]: W, [2015-05-13T01:44:49.120469 #9]  WARN -- : Can't verify CSRF token authenticity\n2015-05-13T01:44:49.122935+00:00 app[web.1]: F, [2015-05-13T01:44:49.122841 #9] FATAL -- : \n2015-05-13T01:44:49.122938+00:00 app[web.1]: ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):\n2015-05-13T01:44:49.122940+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/request_forgery_protection.rb:181:in `handle_unverified_request'\n2015-05-13T01:44:49.122941+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/request_forgery_protection.rb:209:in `handle_unverified_request'\n2015-05-13T01:44:49.122943+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/devise-3.4.1/lib/devise/controllers/helpers.rb:251:in `handle_unverified_request'\n2015-05-13T01:44:49.122945+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/request_forgery_protection.rb:204:in `verify_authenticity_token'\n2015-05-13T01:44:49.122946+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:427:in `block in make_lambda'\n2015-05-13T01:44:49.122948+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:163:in `call'\n2015-05-13T01:44:49.122949+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:163:in `block in halting'\n2015-05-13T01:44:49.122951+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:92:in `call'\n2015-05-13T01:44:49.122952+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:92:in `_run_callbacks'\n2015-05-13T01:44:49.043562+00:00 app[web.1]: I, [2015-05-13T01:44:49.043425 #9]  INFO -- : Processing by ProjectsController#create as JSON\n2015-05-13T01:44:49.043630+00:00 app[web.1]: I, [2015-05-13T01:44:49.043582 #9]  INFO -- :   Parameters: {\"project\"=&gt;{\"name\"=&gt;\"New Set\"}, \"auth_token\"=&gt;\u201dxxx\u201d}\n2015-05-13T01:44:49.044251+00:00 app[web.1]: W, [2015-05-13T01:44:49.044184 #9]  WARN -- : Can't verify CSRF token authenticity\n2015-05-13T01:44:49.047524+00:00 app[web.1]: F, [2015-05-13T01:44:49.047435 #9] FATAL -- : \n2015-05-13T01:44:49.047527+00:00 app[web.1]: ActionController::InvalidAuthenticityToken (ActionController::InvalidAuthenticityToken):\n2015-05-13T01:44:49.047528+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/request_forgery_protection.rb:181:in `handle_unverified_request'\n2015-05-13T01:44:49.122954+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:734:in `_run_process_action_callbacks'\n2015-05-13T01:44:49.122955+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'\n2015-05-13T01:44:49.122957+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/abstract_controller/callbacks.rb:19:in `process_action'\n2015-05-13T01:44:49.122959+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'\n2015-05-13T01:44:49.122961+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\n2015-05-13T01:44:49.122962+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/notifications.rb:164:in `block in instrument'\n2015-05-13T01:44:49.122964+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n2015-05-13T01:44:49.047530+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/request_forgery_protection.rb:209:in `handle_unverified_request'\n2015-05-13T01:44:49.047532+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/devise-3.4.1/lib/devise/controllers/helpers.rb:251:in `handle_unverified_request'\n2015-05-13T01:44:49.047534+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/request_forgery_protection.rb:204:in `verify_authenticity_token'\n2015-05-13T01:44:49.047535+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:427:in `block in make_lambda'\n2015-05-13T01:44:49.122965+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/notifications.rb:164:in `instrument'\n2015-05-13T01:44:49.122968+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n2015-05-13T01:44:49.122969+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n2015-05-13T01:44:49.122971+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n2015-05-13T01:44:49.122973+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/abstract_controller/base.rb:137:in `process'\n2015-05-13T01:44:49.122975+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionview-4.2.0/lib/action_view/rendering.rb:30:in `process'\n2015-05-13T01:44:49.122977+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal.rb:195:in `dispatch'\n2015-05-13T01:44:49.122979+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n2015-05-13T01:44:49.122981+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal.rb:236:in `block in action'\n2015-05-13T01:44:49.123001+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/routing/route_set.rb:73:in `call'\n2015-05-13T01:44:49.123002+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'\n2015-05-13T01:44:49.047537+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:163:in `call'\n2015-05-13T01:44:49.047538+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:163:in `block in halting'\n2015-05-13T01:44:49.047540+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:92:in `call'\n2015-05-13T01:44:49.047541+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:92:in `_run_callbacks'\n2015-05-13T01:44:49.047543+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:734:in `_run_process_action_callbacks'\n2015-05-13T01:44:49.047544+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'\n2015-05-13T01:44:49.047546+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/abstract_controller/callbacks.rb:19:in `process_action'\n2015-05-13T01:44:49.123004+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/routing/route_set.rb:42:in `serve'\n2015-05-13T01:44:49.123005+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/journey/router.rb:43:in `block in serve'\n2015-05-13T01:44:49.123007+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/journey/router.rb:30:in `each'\n2015-05-13T01:44:49.123008+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/journey/router.rb:30:in `serve'\n2015-05-13T01:44:49.123009+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/routing/route_set.rb:802:in `call'\n2015-05-13T01:44:49.123011+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/strategy.rb:186:in `call!'\n2015-05-13T01:44:49.047547+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/rescue.rb:29:in `process_action'\n2015-05-13T01:44:49.047549+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/instrumentation.rb:31:in `block in process_action'\n2015-05-13T01:44:49.047550+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/notifications.rb:164:in `block in instrument'\n2015-05-13T01:44:49.047551+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/notifications/instrumenter.rb:20:in `instrument'\n2015-05-13T01:44:49.047553+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/notifications.rb:164:in `instrument'\n2015-05-13T01:44:49.047554+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/instrumentation.rb:30:in `process_action'\n2015-05-13T01:44:49.047555+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\n2015-05-13T01:44:49.123012+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/strategy.rb:164:in `call'\n2015-05-13T01:44:49.123013+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/strategy.rb:186:in `call!'\n2015-05-13T01:44:49.123015+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/strategy.rb:164:in `call'\n2015-05-13T01:44:49.123022+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/builder.rb:59:in `call'\n2015-05-13T01:44:49.123023+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/jquery-fileupload-rails-0.4.4/lib/jquery/fileupload/rails/middleware.rb:14:in `_call'\n2015-05-13T01:44:49.123025+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/jquery-fileupload-rails-0.4.4/lib/jquery/fileupload/rails/middleware.rb:10:in `call'\n2015-05-13T01:44:49.123026+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'\n2015-05-13T01:44:49.123027+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'\n2015-05-13T01:44:49.123029+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'\n2015-05-13T01:44:49.047556+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/railties/controller_runtime.rb:18:in `process_action'\n2015-05-13T01:44:49.047557+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/abstract_controller/base.rb:137:in `process'\n2015-05-13T01:44:49.047559+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionview-4.2.0/lib/action_view/rendering.rb:30:in `process'\n2015-05-13T01:44:49.047560+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal.rb:195:in `dispatch'\n2015-05-13T01:44:49.047561+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\n2015-05-13T01:44:49.047562+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_controller/metal.rb:236:in `block in action'\n2015-05-13T01:44:49.047564+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/routing/route_set.rb:73:in `call'\n2015-05-13T01:44:49.047588+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'\n2015-05-13T01:44:49.123030+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/etag.rb:24:in `call'\n2015-05-13T01:44:49.123031+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/conditionalget.rb:38:in `call'\n2015-05-13T01:44:49.123033+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/head.rb:13:in `call'\n2015-05-13T01:44:49.123034+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n2015-05-13T01:44:49.047589+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/routing/route_set.rb:42:in `serve'\n2015-05-13T01:44:49.047590+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/journey/router.rb:43:in `block in serve'\n2015-05-13T01:44:49.047592+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/journey/router.rb:30:in `each'\n2015-05-13T01:44:49.047593+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/journey/router.rb:30:in `serve'\n2015-05-13T01:44:49.047594+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/routing/route_set.rb:802:in `call'\n2015-05-13T01:44:49.047595+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/strategy.rb:186:in `call!'\n2015-05-13T01:44:49.047597+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/strategy.rb:164:in `call'\n2015-05-13T01:44:49.047598+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/strategy.rb:186:in `call!'\n2015-05-13T01:44:49.123035+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/flash.rb:260:in `call'\n2015-05-13T01:44:49.123037+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb:225:in `context'\n2015-05-13T01:44:49.047599+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/strategy.rb:164:in `call'\n2015-05-13T01:44:49.047610+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/omniauth-1.2.2/lib/omniauth/builder.rb:59:in `call'\n2015-05-13T01:44:49.047612+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/jquery-fileupload-rails-0.4.4/lib/jquery/fileupload/rails/middleware.rb:14:in `_call'\n2015-05-13T01:44:49.047613+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/jquery-fileupload-rails-0.4.4/lib/jquery/fileupload/rails/middleware.rb:10:in `call'\n2015-05-13T01:44:49.047614+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/warden-1.2.3/lib/warden/manager.rb:35:in `block in call'\n2015-05-13T01:44:49.047616+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/warden-1.2.3/lib/warden/manager.rb:34:in `catch'\n2015-05-13T01:44:49.047617+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/warden-1.2.3/lib/warden/manager.rb:34:in `call'\n2015-05-13T01:44:49.123038+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb:220:in `call'\n2015-05-13T01:44:49.123039+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/cookies.rb:560:in `call'\n2015-05-13T01:44:49.123041+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/query_cache.rb:36:in `call'\n2015-05-13T01:44:49.123042+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:647:in `call'\n2015-05-13T01:44:49.123044+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n2015-05-13T01:44:49.123045+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:88:in `call'\n2015-05-13T01:44:49.047618+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/etag.rb:24:in `call'\n2015-05-13T01:44:49.047620+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/conditionalget.rb:38:in `call'\n2015-05-13T01:44:49.047621+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/head.rb:13:in `call'\n2015-05-13T01:44:49.047623+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/params_parser.rb:27:in `call'\n2015-05-13T01:44:49.047624+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/flash.rb:260:in `call'\n2015-05-13T01:44:49.047625+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb:225:in `context'\n2015-05-13T01:44:49.047627+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/session/abstract/id.rb:220:in `call'\n2015-05-13T01:44:49.047628+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/cookies.rb:560:in `call'\n2015-05-13T01:44:49.123046+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:88:in `_run_callbacks'\n2015-05-13T01:44:49.123048+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:734:in `_run_call_callbacks'\n2015-05-13T01:44:49.123049+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'\n2015-05-13T01:44:49.123050+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n2015-05-13T01:44:49.047630+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/query_cache.rb:36:in `call'\n2015-05-13T01:44:49.123051+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n2015-05-13T01:44:49.123053+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n2015-05-13T01:44:49.123054+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n2015-05-13T01:44:49.123055+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.2.0/lib/rails/rack/logger.rb:38:in `call_app'\n2015-05-13T01:44:49.123056+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.2.0/lib/rails/rack/logger.rb:22:in `call'\n2015-05-13T01:44:49.047631+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activerecord-4.2.0/lib/active_record/connection_adapters/abstract/connection_pool.rb:647:in `call'\n2015-05-13T01:44:49.047632+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\n2015-05-13T01:44:49.047633+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:88:in `call'\n2015-05-13T01:44:49.047635+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:88:in `_run_callbacks'\n2015-05-13T01:44:49.047636+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:734:in `_run_call_callbacks'\n2015-05-13T01:44:49.047637+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/callbacks.rb:81:in `run_callbacks'\n2015-05-13T01:44:49.047638+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/callbacks.rb:27:in `call'\n2015-05-13T01:44:49.123058+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'\n2015-05-13T01:44:49.123059+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/methodoverride.rb:22:in `call'\n2015-05-13T01:44:49.123060+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/runtime.rb:18:in `call'\n2015-05-13T01:44:49.123062+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n2015-05-13T01:44:49.123063+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/sendfile.rb:113:in `call'\n2015-05-13T01:44:49.123064+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.2.0/lib/rails/engine.rb:518:in `call'\n2015-05-13T01:44:49.123065+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.2.0/lib/rails/application.rb:164:in `call'\n2015-05-13T01:44:49.047639+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\n2015-05-13T01:44:49.047641+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\n2015-05-13T01:44:49.047642+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\n2015-05-13T01:44:49.047643+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.2.0/lib/rails/rack/logger.rb:38:in `call_app'\n2015-05-13T01:44:49.047644+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.2.0/lib/rails/rack/logger.rb:22:in `call'\n2015-05-13T01:44:49.047645+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/actionpack-4.2.0/lib/action_dispatch/middleware/request_id.rb:21:in `call'\n2015-05-13T01:44:49.047646+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/methodoverride.rb:22:in `call'\n2015-05-13T01:44:49.123067+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:576:in `process_client'\n2015-05-13T01:44:49.123068+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:670:in `worker_loop'\n2015-05-13T01:44:49.123070+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:525:in `spawn_missing_workers'\n2015-05-13T01:44:49.123071+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:140:in `start'\n2015-05-13T01:44:49.123072+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/bin/unicorn:126:in `&lt;top (required)&gt;'\n2015-05-13T01:44:49.123074+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/bin/unicorn:23:in `load'\n2015-05-13T01:44:49.123076+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/bin/unicorn:23:in `&lt;main&gt;'\n2015-05-13T01:44:49.123078+00:00 app[web.1]: \n2015-05-13T01:44:49.047648+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/runtime.rb:18:in `call'\n2015-05-13T01:44:49.123079+00:00 app[web.1]: \n2015-05-13T01:44:49.047649+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/activesupport-4.2.0/lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\n2015-05-13T01:44:49.047650+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/rack-1.6.0/lib/rack/sendfile.rb:113:in `call'\n2015-05-13T01:44:49.047651+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.2.0/lib/rails/engine.rb:518:in `call'\n2015-05-13T01:44:49.047653+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/railties-4.2.0/lib/rails/application.rb:164:in `call'\n2015-05-13T01:44:49.047654+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:576:in `process_client'\n2015-05-13T01:44:49.047655+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:670:in `worker_loop'\n2015-05-13T01:44:49.047656+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:525:in `spawn_missing_workers'\n2015-05-13T01:44:49.047657+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/lib/unicorn/http_server.rb:140:in `start'\n2015-05-13T01:44:49.047658+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/gems/unicorn-4.8.3/bin/unicorn:126:in `&lt;top (required)&gt;'\n2015-05-13T01:44:49.047660+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/bin/unicorn:23:in `load'\n2015-05-13T01:44:49.047661+00:00 app[web.1]:   vendor/bundle/ruby/2.0.0/bin/unicorn:23:in `&lt;main&gt;'\n</code></pre>\n\n<p>As I'm sure the site was working 3 days ago, I reverted my code thinking that perhaps there was an update to a Gem I was using that may have caused the issue.  But it didn't seem to resolve the issue at all.</p>\n\n<p>Has anyone else run into a similar error, and if so, do you know how to fix it?  I have already tried multiple suggestions from various StackOverflow posts to no avail (for example, adding \"protect_from_forgery with: :null_session\" to my application_controller.rb)</p>\n\n<p>Currently, I have the following in my sessions controller:</p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  skip_before_filter :verify_authenticity_token,\n                     :if =&gt; Proc.new { |c| c.request.format == 'application/json' }\n</code></pre>\n\n<p>And I have the following line in my application.html.erb</p>\n\n<pre><code>  &lt;%= csrf_meta_tags %&gt;\n</code></pre>\n\n<p><strong>After some suggestions, I added the following to my application_controller.rb:</strong></p>\n\n<pre><code> before_filter :cor\n  rescue_from ActionController::InvalidAuthenticityToken, :with =&gt; :bad_token\n\n def bad_token\n    Rails.logger.debug(\"session expired!\")\n  end\n\n\n  private\n  def cor\n    headers[\"Access-Control-Allow-Origin\"]  = \"*\"\n    headers[\"Access-Control-Allow-Methods\"] = %w{GET POST PUT DELETE}.join(\",\")\n    headers[\"Access-Control-Allow-Headers\"] = %w{Origin Accept Content-Type X-Requested-With X-CSRF-Token}.join(\",\")\n    head(:ok) if request.request_method == \"OPTIONS\"\n  end\n</code></pre>\n\n<p>However, I'm still receive the same error, albeit shorter:</p>\n\n<pre><code>2015-05-13T02:45:26.893689+00:00 app[web.2]: I, [2015-05-13T02:45:26.893643 #6]  INFO -- :   Parameters: {\"spin\"=&gt;{}, \"auth_token\"=&gt;\"xxx\"}\n2015-05-13T02:45:26.895581+00:00 app[web.2]: W, [2015-05-13T02:45:26.893966 #6]  WARN -- : Can't verify CSRF token authenticity\n2015-05-13T02:45:26.895583+00:00 app[web.2]: I, [2015-05-13T02:45:26.894210 #6]  INFO -- : Completed 200 OK in 0ms (ActiveRecord: 0.0ms)\n2015-05-13T02:45:26.728920+00:00 app[web.2]: I, [2015-05-13T02:45:26.728852 #12]  INFO -- : Processing by ProjectsController#create as JSON\n2015-05-13T02:45:26.729261+00:00 app[web.2]: W, [2015-05-13T02:45:26.729155 #12]  WARN -- : Can't verify CSRF token authenticity\n2015-05-13T02:45:26.729430+00:00 app[web.2]: I, [2015-05-13T02:45:26.729380 #12]  INFO -- : Completed 200 OK in 0ms (ActiveRecord: 0.0ms)\n2015-05-13T02:45:26.890043+00:00 app[web.2]: I, [2015-05-13T02:45:26.889933 #6]  INFO -- : Started POST \"/spins?auth_token=ArpuyxbDyjtyn67r3JgF\" for 76.118.180.235 at 2015-05-13 02:45:26 +0000\n2015-05-13T02:45:26.888494+00:00 heroku[router]: at=info method=POST path=\"/spins?auth_token=ArpuyxbDyjtyn67r3JgF\" host=spin360-staging.herokuapp.com request_id=5edd715a-a01d-4558-9aa3-7f2c2c3dc927 fwd=\"76.118.180.235\" dyno=web.2 connect=1ms service=8ms status=200 bytes=324\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1431484962, "post_id": 30204278, "comment_id": 48514649, "body": "By the way, in most languages it&#39;s acceptable to write:  <code>class A ...end; class B...end</code>.  We won&#39;t get confused. :)"}, {"owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "edited": false, "score": 0, "creation_date": 1431486961, "post_id": 30204278, "comment_id": 48515190, "body": "I added another example that opens up some possibilities, which you may or may not be able to take advantage of."}], "answers": [{"tags": [], "owner": {"reputation": 41846, "user_id": 926143, "user_type": "registered", "accept_rate": 66, "profile_image": "https://www.gravatar.com/avatar/3396173c3d22988be1a0732d184902aa?s=128&d=identicon&r=PG", "display_name": "7stud", "link": "https://stackoverflow.com/users/926143/7stud"}, "is_accepted": true, "score": 2, "last_activity_date": 1431487082, "last_edit_date": 1431487082, "creation_date": 1431482396, "answer_id": 30204369, "question_id": 30204278, "link": "https://stackoverflow.com/questions/30204278/whats-the-technique-for-calling-back-methods-across-objects-using-send-in-rub/30204369#30204369", "title": "What&#39;s the technique for calling back methods across objects using &quot;send&quot; in Ruby?", "body": "<blockquote>\n  <p>The issue I have is the syntax of the callback to the instance</p>\n</blockquote>\n\n<p>You have to call an instance method with an instance.  And if you call a class method on a class, e.g.  <code>OBJB.send(...)</code>, the class method has to be defined.</p>\n\n<pre><code>class OBJA\n  def self.staticMethod(text, methName)\n    puts \"objA.staticMethod: #{text}\"\n    OBJB.send(methName, \"Call back from objA.staticMethod\")\n  end\n\n  def instanceMethod(text, methName)\n    puts \"objA.instanceMethod: #{text}\"\n    OBJB.new.send(methName, \"Call back from objA.instanceMethod\")\n  end\nend\n\n\nclass OBJB\n  def starterMethod\n    OBJA.staticMethod(\"foo\", :returnedCall)\n    OBJA.new.instanceMethod(\"bar\", :returnedCall)\n  end\n\n  def self.returnedCall(text)\n    puts text\n  end\n\n  def returnedCall(text)\n    puts text\n  end\nend\n\nb = OBJB.new\nb.starterMethod\n\n--output:--\nobjA.staticMethod: foo\nCall back from objA.staticMethod\nobjA.instanceMethod: bar\nCall back from objA.instanceMethod\n</code></pre>\n\n<p>You could also pass blocks to the OBJA methods:</p>\n\n<pre><code>class OBJA\n  def self.staticMethod(text, &amp;block)\n    puts \"objA.staticMethod: #{text}\"\n    block.call(\"Call back from objA.staticMethod\")\n  end\n\n  def instanceMethod(text, &amp;block)\n    puts \"objA.instanceMethod: #{text}\"\n    block.call(\"Call back from objA.instanceMethod\")\n  end\nend\n\n\nclass OBJB\n  def starterMethod\n    OBJA.staticMethod(\"foo\") {|str| puts str}\n    OBJA.new.instanceMethod(\"bar\") {|str| puts str}\n  end\nend\n\nb = OBJB.new\nb.starterMethod\n\n--output:--\nobjA.staticMethod: foo\nCall back from objA.staticMethod\nobjA.instanceMethod: bar\nCall back from objA.instanceMethod\n</code></pre>\n\n<p>Or, more illustrative of the closure:</p>\n\n<pre><code>class OBJA\n  def self.staticMethod(text, &amp;block)\n    puts \"objA.staticMethod: #{text}\"\n    block.call\n  end\n\n  def instanceMethod(text, &amp;block)\n    puts \"objA.instanceMethod: #{text}\"\n    block.call\n  end\nend\n\n\nclass OBJB\n\n  def initialize\n    @x = 1\n    @y = 2\n  end\n\n  def starterMethod\n    OBJA.staticMethod(\"foo\") {puts instance_variable_get(:@x)}\n    OBJA.new.instanceMethod(\"bar\") {puts instance_variable_get(:@y)}\n  end\nend\n\nb = OBJB.new\nb.starterMethod\n\n--output:--\nobjA.staticMethod: foo\n1\nobjA.instanceMethod: bar\n2\n</code></pre>\n\n<p>I don't know if this will help you or not, but this trick is used all over the Ruby frameworks.  Ruby being the Wild West of programming languages, it will actually allow you to ignore the closure.  That's useful when you want to accept a block from some code, but you don't want to execute the block in the context in which the block was defined--instead you want to execute the block in a context you create.</p>\n\n<pre><code>class OBJA\n    @x = 10  #Instance variables attach themselves to whatever object is\n    @y = 20  #self at the time they are created.  Inside a class, but outside\n             #any defs, self is equal to the class, so these statements\n             #create  what are known as 'class instance variables' (@@variables\n             #aren't used in ruby because they don't behave 'correctly').\n\n\n  def self.staticMethod(text, &amp;block)\n    puts \"objA.staticMethod: #{text}\"\n    instance_eval &amp;block  #See comment (1) below\n  end\n\n  def instanceMethod(text, &amp;block)\n    puts \"objA.instanceMethod: #{text}\"\n    block.call\n  end\nend\n\n\nclass OBJB\n\n  def initialize\n    @x = 1\n    @y = 2\n  end\n\n  def starterMethod\n    OBJA.staticMethod(\"foo\") {puts instance_variable_get(:@x)}\n    OBJA.new.instanceMethod(\"bar\") {puts instance_variable_get(:@y)}\n  end\nend\n\nb = OBJB.new\nb.starterMethod\n\n--output:--\nobjA.staticMethod: foo\n10  #&lt;--CHECK THIS OUT!!\nobjA.instanceMethod: bar\n2\n</code></pre>\n\n<p>(1) When you call a method without a receiver, ruby uses self to call the method.  Inside a class method, self is equal to the class, so the instance_eval() call is equivalent to:</p>\n\n<pre><code> OBJA.instance_eval &amp;block\n</code></pre>\n\n<p>instance_eval() is used to change the value of the self variable to the receiver.   But self was already equal to OBJA??  What instance_eval() succeeds in doing is changing the value of the self variable that it's block sees!  By converting the block variable to become instance_eval's block, you actually change the blocks context, i.e. the variables that the block's code sees. </p>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 1, "last_activity_date": 1431482569, "creation_date": 1431482569, "answer_id": 30204393, "question_id": 30204278, "link": "https://stackoverflow.com/questions/30204278/whats-the-technique-for-calling-back-methods-across-objects-using-send-in-rub/30204393#30204393", "title": "What&#39;s the technique for calling back methods across objects using &quot;send&quot; in Ruby?", "body": "<p>At the moment your callback <code>OBJB.send</code> is called on the class, but your <code>returnedCall</code> method is an instance method. There are two ways to fix this:</p>\n\n<p>Call the callback on an instance instead of on the class by changing lines <code>OBJB.send(...</code> to</p>\n\n<pre><code>OBJB.new.send(...\n</code></pre>\n\n<p>Or by making the callback method a class method by changing <code>def returnedCall(...</code> to</p>\n\n<pre><code>def self.returnedCall(text)\n</code></pre>\n"}], "owner": {"reputation": 6134, "user_id": 4322, "user_type": "registered", "accept_rate": 84, "profile_image": "https://i.stack.imgur.com/pwSSc.jpg?s=128&g=1", "display_name": "aronchick", "link": "https://stackoverflow.com/users/4322/aronchick"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 33, "favorite_count": 0, "accepted_answer_id": 30204369, "answer_count": 2, "score": 0, "last_activity_date": 1432044043, "creation_date": 1431481729, "last_edit_date": 1432044043, "question_id": 30204278, "link": "https://stackoverflow.com/questions/30204278/whats-the-technique-for-calling-back-methods-across-objects-using-send-in-rub", "title": "What&#39;s the technique for calling back methods across objects using &quot;send&quot; in Ruby?", "body": "<p>I'm doing some programming that involves asynchronous callbacks in Ruby, and need to pass the callback method to another object (which may or may not be statically called). The issue I have is the syntax of the callback to the instance - I know it's fairly complicated, but I'm not sure I can make it simpler. Here's what I have:</p>\n\n<pre><code>class OBJA\n  def self.staticMethod(text, returnCall)\n    puts \"objA.staticMethod: #{text}\"\n    OBJB.send(returnCall, \"Call back from objA.staticMethod\")\n  end\n\n  def instanceMethod(text, returnCall)\n    puts \"objA.instanceMethod: #{text}\"\n    OBJB.send(returnCall, \"Call back from objA.instanceMethod\")\n  end\nend\n\nclass OBJB\n  def starterMethod\n    OBJA.staticMethod(\"foo\", :returnedCall)\n    OBJA.new.instanceMethod(\"bar\", :returnedCall)\n  end\n\n  def returnedCall(text)\n    puts text\n  end\nend\n</code></pre>\n\n<p>You can execute it by doing the following:</p>\n\n<pre><code>b = OBJB.new\nb.starterMethod\n</code></pre>\n\n<p>Thanks!</p>\n"}, {"tags": ["ruby", "jekyll"], "answers": [{"comments": [{"owner": {"reputation": 33, "user_id": 3807981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9957ab8558ea2ac478c88d0958825721?s=128&d=identicon&r=PG&f=1", "display_name": "William Schaffer", "link": "https://stackoverflow.com/users/3807981/william-schaffer"}, "edited": false, "score": 0, "creation_date": 1431554641, "post_id": 30207875, "comment_id": 48555822, "body": "Thank-you, that worked and fixed the problem I was having! Thanks for answering what turned out to be a dumb question."}, {"owner": {"reputation": 21701, "user_id": 102401, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ec8e27851eef45968d23b9be06ba9eb5?s=128&d=identicon&r=PG", "display_name": "Alan W. Smith", "link": "https://stackoverflow.com/users/102401/alan-w-smith"}, "reply_to_user": {"reputation": 33, "user_id": 3807981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9957ab8558ea2ac478c88d0958825721?s=128&d=identicon&r=PG&f=1", "display_name": "William Schaffer", "link": "https://stackoverflow.com/users/3807981/william-schaffer"}, "edited": false, "score": 2, "creation_date": 1431561296, "post_id": 30207875, "comment_id": 48557923, "body": "Sure thing. And please don&#39;t think it&#39;s a dumb question. There&#39;s a ton of moving parts to these things. It&#39;s tough to juggle everything and keep it all in your head when you&#39;re early in the learning curve. Sometimes it just takes having another pair of eyes look it. Being okay with asking any question (even if it seems dumb) is key to getting better."}], "tags": [], "owner": {"reputation": 21701, "user_id": 102401, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/ec8e27851eef45968d23b9be06ba9eb5?s=128&d=identicon&r=PG", "display_name": "Alan W. Smith", "link": "https://stackoverflow.com/users/102401/alan-w-smith"}, "is_accepted": true, "score": 8, "last_activity_date": 1431500712, "creation_date": 1431500712, "answer_id": 30207875, "question_id": 30204243, "link": "https://stackoverflow.com/questions/30204243/jekyll-serve-command-error-file-to-import-not-found-or-unreadable-base-load/30207875#30207875", "title": "Jekyll &quot;serve&quot; command error: File to import not found or unreadable: base. Load paths: on line 46", "body": "<p>Welcome to Linux! You were close but need to make sure you're in the correct directory before running <code>jekyll serve</code>. </p>\n\n<p>When you run:</p>\n\n<pre><code>jekyll new kx8w\n</code></pre>\n\n<p>It creates the new site in the directory you're currently in. The output line tells you where it put it (i.e. \"/home/william/KX8W\"). You need to be in that directory to start jekyll. So, do:</p>\n\n<pre><code>cd /home/william/KX8W\n</code></pre>\n\n<p>Once you do that <code>jekyll serve</code> will work as expected.</p>\n\n<hr>\n\n<p><em>Note that for some reason jekyll built the site in the \"/home/william/KX8W\" directory instead of under the \"/home/william/CS/KX8W\" which is what I'd expect given your list of commands. That's probably related to the installs you did or maybe there was another change. Nothing to worry about, just something to watch out for. The biggest trick is just to make sure that after you run the <code>jekyll new cool_new_site</code> command you then change into that directory with <code>cd cool_new_site</code> before running <code>jekyll serve</code>.</em> </p>\n"}], "owner": {"reputation": 33, "user_id": 3807981, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9957ab8558ea2ac478c88d0958825721?s=128&d=identicon&r=PG&f=1", "display_name": "William Schaffer", "link": "https://stackoverflow.com/users/3807981/william-schaffer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1221, "favorite_count": 1, "accepted_answer_id": 30207875, "answer_count": 1, "score": 3, "last_activity_date": 1431500712, "creation_date": 1431481449, "question_id": 30204243, "link": "https://stackoverflow.com/questions/30204243/jekyll-serve-command-error-file-to-import-not-found-or-unreadable-base-load", "title": "Jekyll &quot;serve&quot; command error: File to import not found or unreadable: base. Load paths: on line 46", "body": "<p>First off, I have little Linux experience and no Ruby experience, however, I have googled and could not find an area like what I'm getting. Any help is appreciated. I apologize if this is not a good place to post this. I have installed Jekyll with the following, and only the following, commands on Ubuntu 15.04 64 bit:</p>\n\n<pre><code>sudo apt-get install ruby-full\ngem update --system\ngem install jekyll\ncd /home/william\nmkdir CS\ncd CS/\ngem install execjs\nsudo apt-get install nodejs\njekyll new kx8w\n\nNew jekyll site installed in /home/william/KX8W.\n\njekyll serve\n</code></pre>\n\n<p>The error returned by Jekyll is as follows:</p>\n\n<pre><code>Configuration file: none\n            Source: /home/william/CS\n       Destination: /home/william/CS/_site\n      Generating... \n     Build Warning: Layout 'post' requested in KX8W/_posts/2015-05-12-welcome-to-jekyll.markdown does not exist.\n     Build Warning: Layout 'page' requested in KX8W/about.md does not exist.\n     Build Warning: Layout 'default' requested in KX8W/index.html does not exist.\n  Conversion error: Jekyll::Converters::Scss encountered an error while converting 'KX8W/css/main.scss':\n                    File to import not found or unreadable: base. Load paths: on line 46\n    jekyll 2.5.3 | Error:  File to import not found or unreadable: base.\nLoad paths:\n   on line 46\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash", "chef-infra"], "answers": [{"tags": [], "owner": {"reputation": 355, "user_id": 4086943, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1c263cc17a0f21124e39984326af1ac4?s=128&d=identicon&r=PG&f=1", "display_name": "OscillatingMonkey", "link": "https://stackoverflow.com/users/4086943/oscillatingmonkey"}, "is_accepted": false, "score": 1, "last_activity_date": 1431480288, "creation_date": 1431480288, "answer_id": 30204070, "question_id": 30204051, "link": "https://stackoverflow.com/questions/30204051/rubychef-convert-hash-into-array/30204070#30204070", "title": "Ruby(Chef) - Convert hash into array", "body": "<p>You can iterate through the hash and turn it into an array like so.</p>\n\n<pre><code>ary = Array.New\nfoo.each do |key, value|\n  ary &lt;&lt; key + \"=\" + value\nend\n</code></pre>\n\n<p>This will create the array you are looking for.</p>\n"}, {"comments": [{"owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1431483304, "post_id": 30204113, "comment_id": 48514228, "body": "oh, you are right , doesn&#39;t need to use <code>to_a</code>, thanks for reminding me ."}], "tags": [], "owner": {"reputation": 7525, "user_id": 1805902, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/0W7rW.png?s=128&g=1", "display_name": "pangpang", "link": "https://stackoverflow.com/users/1805902/pangpang"}, "is_accepted": false, "score": 4, "last_activity_date": 1431483313, "last_edit_date": 1431483313, "creation_date": 1431480596, "answer_id": 30204113, "question_id": 30204051, "link": "https://stackoverflow.com/questions/30204051/rubychef-convert-hash-into-array/30204113#30204113", "title": "Ruby(Chef) - Convert hash into array", "body": "<pre><code>bar = foo.map{ |e| e.join(\"=\")}\n=&gt; [\"herp=42\", \"derp=84\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 442, "user_id": 812749, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/2UXgY.jpg?s=128&g=1", "display_name": "alebruck", "link": "https://stackoverflow.com/users/812749/alebruck"}, "is_accepted": false, "score": 1, "last_activity_date": 1431480617, "creation_date": 1431480617, "answer_id": 30204117, "question_id": 30204051, "link": "https://stackoverflow.com/questions/30204051/rubychef-convert-hash-into-array/30204117#30204117", "title": "Ruby(Chef) - Convert hash into array", "body": "<p>You can do it using <a href=\"http://apidock.com/ruby/Enumerable/map\" rel=\"nofollow\">map</a>:</p>\n\n<pre><code>foo.map { |key, value| key + \"=\" + value.to_s}\n=&gt; [\"herp=42\", \"derp=84\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 338, "user_id": 2448623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca7118778cb36d1976c0ef5f412690?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2448623/alex"}, "is_accepted": false, "score": 1, "last_activity_date": 1431480718, "creation_date": 1431480718, "answer_id": 30204135, "question_id": 30204051, "link": "https://stackoverflow.com/questions/30204051/rubychef-convert-hash-into-array/30204135#30204135", "title": "Ruby(Chef) - Convert hash into array", "body": "<p>OscillatingMonkey answer correct, but with few changes:\nFor topic starter, this code doing exactly what you need.</p>\n\n<pre><code>bar = Array.new([])\nfoo.each do |key, value|\n  bar &lt;&lt; key + \"=\" + value.to_s\nend\n=&gt; [\"herp=42\", \"derp=84\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 80852, "user_id": 2483313, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/rIBTG.jpg?s=128&g=1", "display_name": "spickermann", "link": "https://stackoverflow.com/users/2483313/spickermann"}, "is_accepted": false, "score": 0, "last_activity_date": 1431482763, "creation_date": 1431482763, "answer_id": 30204424, "question_id": 30204051, "link": "https://stackoverflow.com/questions/30204051/rubychef-convert-hash-into-array/30204424#30204424", "title": "Ruby(Chef) - Convert hash into array", "body": "<p>I would just use <code>map</code> with string interpolation:</p>\n\n<pre><code>foo.map { |k, v| \"#{k}=#{v}\" }\n#=&gt; [\"herp=42\", \"derp=84\"]\n</code></pre>\n"}], "owner": {"reputation": 13950, "user_id": 1626687, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/8d4317dca5804dd7e9b30515b9bf3020?s=128&d=identicon&r=PG", "display_name": "spuder", "link": "https://stackoverflow.com/users/1626687/spuder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1056, "favorite_count": 0, "answer_count": 5, "score": 1, "last_activity_date": 1431483313, "creation_date": 1431480105, "question_id": 30204051, "link": "https://stackoverflow.com/questions/30204051/rubychef-convert-hash-into-array", "title": "Ruby(Chef) - Convert hash into array", "body": "<p>I have a chef cookbook with a hash. </p>\n\n<pre><code>foo = { \n  'herp' =&gt; 42, \n  'derp' =&gt; 84 \n}\n</code></pre>\n\n<p>I have a LWRP resource (bar) that can only take arrays</p>\n\n<pre><code>iis_root 'some string' do\n  bar []\nend\n</code></pre>\n\n<p>How can I convert 'foo' into an array so it can be used in the resource 'bar'</p>\n\n<p>Looking for something like this:</p>\n\n<pre><code>[ \"herp=42\",\"derp=84\"]\n</code></pre>\n"}, {"tags": ["mysql", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 119, "user_id": 3504694, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437885805/picture?type=large", "display_name": "NonReformed Bayesianist", "link": "https://stackoverflow.com/users/3504694/nonreformed-bayesianist"}, "edited": false, "score": 0, "creation_date": 1431526543, "post_id": 30204225, "comment_id": 48538797, "body": "Still get an error after changing case-   /var/lib/gems/2.1.0/gems/dbi-0.4.5/lib/dbi.rb:300:in <code>block in load_driver&#39;: Unable to load driver &#39;Mysql&#39; (underlying error: uninitialized constant DBI::DBD::Mysql) (DBI::InterfaceError) \tfrom &#47;usr&#47;lib&#47;ruby&#47;2.1.0&#47;monitor.rb:211:in </code>mon_synchronize&#39; \tfrom /var/lib/gems/2.1.0/gems/dbi-0.4.5/lib/dbi.rb:242:in <code>load_driver&#39; \tfrom &#47;var&#47;lib&#47;gems&#47;2.1.0&#47;gems&#47;dbi-0.4.5&#47;lib&#47;dbi.rb:160:in </code>_get_full_driver&#39; \tfrom /var/lib/gems/2.1.0/gems/dbi-0.4.5/lib/dbi.rb:145:in `connect&#39;"}], "tags": [], "owner": {"reputation": 1722, "user_id": 1471077, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/041d43b6133854fe857ed86ca053ca19?s=128&d=identicon&r=PG", "display_name": "Trent Lloyd", "link": "https://stackoverflow.com/users/1471077/trent-lloyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1431481334, "creation_date": 1431481334, "answer_id": 30204225, "question_id": 30204019, "link": "https://stackoverflow.com/questions/30204019/ruby-gem-failure-to-load-unable-to-load-driver-mysql/30204225#30204225", "title": "Ruby gem failure to load - Unable to load driver &#39;MySQL&#39;", "body": "<p>Looks like there are some issues with case sensitive filesystems here trying this on my mac, but I was able to get a test working by changing the connection string from \"MySQL to \"Mysql\", example:</p>\n\n<pre><code>2.1.5@test_dbi ~$ cat test_dbi.rb \n#!/usr/bin/ruby\nrequire \"rubygems\"\nrequire 'dbi'\nDBI.connect(\"dbi:Mysql:database=matching;\" \"host=enus\", \"mott\", \"bM^7ezOqYyn\") \n2.1.5@test_dbi ~$ \n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 119, "user_id": 3504694, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437885805/picture?type=large", "display_name": "NonReformed Bayesianist", "link": "https://stackoverflow.com/users/3504694/nonreformed-bayesianist"}, "is_accepted": false, "score": 0, "last_activity_date": 1433980027, "last_edit_date": 1495535474, "creation_date": 1433980027, "answer_id": 30769226, "question_id": 30204019, "link": "https://stackoverflow.com/questions/30204019/ruby-gem-failure-to-load-unable-to-load-driver-mysql/30769226#30769226", "title": "Ruby gem failure to load - Unable to load driver &#39;MySQL&#39;", "body": "<p>Solved the problem. </p>\n\n<p>The core failure is bad code on Ruby 2.1.0 itself. \nSee here to fix Ruby itself. [<a href=\"https://stackoverflow.com/questions/27873121/dbi-row-delegate-behavior-between-ruby-1-8-7-and-2-1/30768606#30768606][1]\">DBI Row / delegate behavior between ruby 1.8.7 and 2.1</a></p>\n\n<p>Once I started getting an error, I changed the DBI call of Mysql to MySQL hoping to fix it, but that just caused another problem.</p>\n"}], "owner": {"reputation": 119, "user_id": 3504694, "user_type": "registered", "profile_image": "https://graph.facebook.com/1437885805/picture?type=large", "display_name": "NonReformed Bayesianist", "link": "https://stackoverflow.com/users/3504694/nonreformed-bayesianist"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2331, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1433980027, "creation_date": 1431479800, "question_id": 30204019, "link": "https://stackoverflow.com/questions/30204019/ruby-gem-failure-to-load-unable-to-load-driver-mysql", "title": "Ruby gem failure to load - Unable to load driver &#39;MySQL&#39;", "body": "<p>I have an app that has been running for years. We then migrated the server to Ubuntu 15.04 and installed Ruby. </p>\n\n<pre><code>sudo apt-get install curl\nsudo apt-get install ruby2.1\nsudo gem update --system\nsudo apt-get install rake\napt-get install ruby-dev\nsudo gem install amatch\nsudo apt-get install libmysqlclient-dev\nsudo gem install -r dbi\nsudo gem install -r mysql dbd-mysql\n</code></pre>\n\n<p>Then we ran the program and get this err..</p>\n\n<pre><code>/var/lib/gems/2.1.0/gems/dbi-0.4.5/lib/dbi.rb:300:in `block in load_driver': Unable to load driver 'MySQL' (underlying error: uninitialized constant DBI::DBD::MySQL) (DBI::InterfaceError)\n    from /usr/lib/ruby/2.1.0/monitor.rb:211:in `mon_synchronize'\n    from /var/lib/gems/2.1.0/gems/dbi-0.4.5/lib/dbi.rb:242:in `load_driver'\n    from /var/lib/gems/2.1.0/gems/dbi-0.4.5/lib/dbi.rb:160:in `_get_full_driver'\n    from /var/lib/gems/2.1.0/gems/dbi-0.4.5/lib/dbi.rb:145:in `connect'\n</code></pre>\n\n<p>The program itself (with user name and pw changed)</p>\n\n<pre><code>#!/usr/bin/ruby\nrequire \"rubygems\"\ngem 'mysql'\ngem 'dbi'\nrequire \"dbi\"\nrequire \"amatch\"\n\ninclude Amatch\n\nname_sub = {    \"unit\"          =&gt; \"un\",\n                \"unt\"           =&gt; \"un\",\n                \"tract\"         =&gt; \"tr\",\n                \"estate\"        =&gt; \"est\",\n                \"university\"    =&gt; \"univ\",\n                \"trust\"         =&gt; \"trst\"  }\n\nop_sub = {      \"partnership\"   =&gt; \"PS\",\n                \"partnershp\"    =&gt; \"PS\",\n                \"partner\"       =&gt; \"PS\",\n                \"prtnr\"         =&gt; \"PS\",\n                \"ptnr\"          =&gt; \"PS\",\n                \"ptnrsp\"        =&gt; \"PS\",\n                \"corporation\"   =&gt; \"C\",\n                \"corp\"          =&gt; \"C\",\n                \"company\"       =&gt; \"co\",\n                \"incorporation\" =&gt; \"I\",\n                \"inc\"           =&gt; \"I\",\n                \"oil\"           =&gt; \"O\",\n                \"gas\"           =&gt; \"G\",\n                \"exploration\"   =&gt; \"E\",\n                \"production\"    =&gt; \"P\",\n                \"operating\"     =&gt; \"oper\",\n                \"energy\"        =&gt; \"engy\",\n                \"management\"    =&gt; \"mgmt\",\n                \"resources\"     =&gt; \"res\",\n                \"minerals\"      =&gt; \"min\",\n                \"petroleum\"     =&gt; \"pet\"  }\n\n\ndef mangle(s, dictionary = {})\n  return \"\" unless s\n        # lowercase | special case        | alphanumerics only\n        s.downcase().gsub(/l.l.c./, 'llc').gsub(/\\W/, \" \").split(\" \").map do |word|\n    dictionary.fetch(word, word)\n  end.join(' ')\nend\n\nstop_attempts = -1\nPRODUCTION = false\n\nbegin\n        # now the actual code\n\n\n\n  # development database\n  DBI.connect(\"dbi:MySQL:database=matching;\" \"host=enus\", \"mott\", \"bM^7ezOqYyn\") do |outdb|\n  DBI.connect(\"dbi:MySQL:database=ownership;\" \"host=enus\", \"mott\", \"bM^7ezOqYyn\") do |lease_db|\n\n  # re-create phase3 table\n    outdb.do(\"drop table if exists phase3\")\n    sql = \"create table phase3 (\" +\n      \"id bigint not null auto_increment primary key, \" +\n      \"lod_id bigint, rrc_id bigint, district varchar(255), \" +\n      \"name_percent float, rrc_lease_no varchar(255),\" +\n      \"op_percent float, field_percent float, total float, \" +\n      \"key k1 (lod_id), key k2 (rrc_id), key k3 (district), \" +...\n</code></pre>\n\n<p>An exhaustive Google search found recommendations of installing dbd-mysql, and other suggestions but none worked.  </p>\n\n<p>So what is failing here? I'm not a Ruby guy, I'm a lowly IT guy trying to get this back up and running.</p>\n"}, {"tags": ["ruby", "function", "yaml", "file-writing"], "answers": [{"tags": [], "owner": {"reputation": 443227, "user_id": 341994, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/fbb4d027695dfdf76bf448b15d7e306a?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/341994/matt"}, "is_accepted": false, "score": 0, "last_activity_date": 1431481854, "creation_date": 1431481854, "answer_id": 30204293, "question_id": 30203938, "link": "https://stackoverflow.com/questions/30203938/how-can-i-specify-the-file-location-to-write-and-read-from-in-ruby/30204293#30204293", "title": "How can I specify the file location to write and read from in Ruby?", "body": "<p>You are supplying a partial pathname (a mere file <em>name</em>), so we read and write from the current directory. Thus you have two choices:</p>\n\n<ul>\n<li><p>Supply a full absolute pathname (personally, I like to use the Pathname class for this); or</p></li>\n<li><p>Change the current directory first (with <code>Dir.chdir</code>)</p></li>\n</ul>\n"}, {"comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user4826496"}, "edited": false, "score": 0, "creation_date": 1431517258, "post_id": 30204323, "comment_id": 48531467, "body": "so, if I wanted to write it into a folder that was in the folder containing the Ruby script, and the folder was called library, how would I put it there? and how would I read it from there?"}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "edited": false, "score": 0, "creation_date": 1431529145, "post_id": 30204323, "comment_id": 48540982, "body": "You would use the last example. Put that code into the file in your library folder, and it will write there."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4826496"}, "edited": false, "score": 0, "creation_date": 1431562871, "post_id": 30204323, "comment_id": 48558365, "body": "alright, in that last example, what is the (<b>FILE</b>) bit?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4826496"}, "edited": false, "score": 0, "creation_date": 1431604365, "post_id": 30204323, "comment_id": 48574992, "body": "okay. Does the location specified by file_path go in quotes or not?"}, {"owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "edited": false, "score": 0, "creation_date": 1431621021, "post_id": 30204323, "comment_id": 48586094, "body": "Not sure I understand. <code>file_path</code> is a string, so you don&#39;t need to quote it anymore."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4826496"}, "edited": false, "score": 0, "creation_date": 1431646283, "post_id": 30204323, "comment_id": 48598795, "body": "okay. I&#39;m sorry. I misread it. Where do I actually specify the location to save it to?"}], "tags": [], "owner": {"reputation": 50185, "user_id": 276949, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/52e96d535181560d2b46d4b513454ee5?s=128&d=identicon&r=PG", "display_name": "Martin Konecny", "link": "https://stackoverflow.com/users/276949/martin-konecny"}, "is_accepted": true, "score": 1, "last_activity_date": 1431482396, "last_edit_date": 1431482396, "creation_date": 1431482093, "answer_id": 30204323, "question_id": 30203938, "link": "https://stackoverflow.com/questions/30203938/how-can-i-specify-the-file-location-to-write-and-read-from-in-ruby/30204323#30204323", "title": "How can I specify the file location to write and read from in Ruby?", "body": "<p>Currently when you use <code>File.write</code> it takes your current working directory, and appends the file name to that location. Try:</p>\n\n<pre><code>puts Dir.pwd #  Will print the location you ran ruby script from.\n</code></pre>\n\n<p>You can specify the <em>absolute</em> path if you want to write it in a specific location everytime:</p>\n\n<pre><code>File.write(\"/home/chameleon/different_location/#{new_user[\"name\"]}.yaml\")\n</code></pre>\n\n<p>Or you can specify a <em>relative</em> path to your current working directory:</p>\n\n<pre><code># write one level above your current working directory\nFile.write(\"../#{new_user[\"name\"]}.yaml\", new_user.to_yaml)\n</code></pre>\n\n<p>You can also specify <em>relative</em> to your current executing ruby file:</p>\n\n<pre><code>file_path = File.expand_path(File.dirname(__FILE__))\nabsolute_path = File.join(file_path, file_name)\nFile.write(absolute_path, new_user.to_yaml)\n</code></pre>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4826496"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1350, "favorite_count": 0, "accepted_answer_id": 30204323, "answer_count": 2, "score": 0, "last_activity_date": 1431517083, "creation_date": 1431479135, "last_edit_date": 1431517083, "question_id": 30203938, "link": "https://stackoverflow.com/questions/30203938/how-can-i-specify-the-file-location-to-write-and-read-from-in-ruby", "title": "How can I specify the file location to write and read from in Ruby?", "body": "<p>So, I have a function that creates an object specifying user data. Then, using the Ruby YAML gem and some code, I put the object to a YAML file and save it. This saves the YAML file to the location where the Ruby script was run from. How can I tell it to save to a certain file directory? (A simplified version of) my code is this</p>\n\n<pre><code>print \"Please tell me your name:  \"\n$name=gets.chomp\n$name.capitalize!\nprint \"Please type in a four-digit PIN number:  \"\n$pin=gets.chomp\n</code></pre>\n\n<p>I also have a function that enforces that the pin be a four-digit integer, but that is not important.</p>\n\n<p>Then, I add this to an object</p>\n\n<pre><code>new_user=Hash.new (false)\nnew_user[\"name\"]=$name\nnew_user[\"pin\"]=$pin\n</code></pre>\n\n<p>and then add it to a YAML file and save it. If the YAML file doesn't exist, one is created. It creates it in the same file directory as the script is run in. Is there a way to change the save location? \nThe script fo save the object to a YAML file is this.</p>\n\n<pre><code>def put_to_yaml (new_user)\nFile.write(\"#{new_user[\"name\"]}.yaml\", new_user.to_yaml)\nend\nput_to_yaml(new_user)\n</code></pre>\n\n<p>Ultimately, the question is this: How can I change the save location of the file? And when I load it again, how can i tell it where to get the file from?</p>\n\n<p>Thanks for any help</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1431479962, "post_id": 30203971, "comment_id": 48513367, "body": "Thanks Zippo! That gives me <code>NameError in Activities#index defined local variable or method &#39;comment&#39; for</code> that line. It worked prior to implementing those two lines I mentioned in the comments.rb comments. I got <code>new_comment</code> from Joe&#39;s answer here: <a href=\"http://stackoverflow.com/questions/29806363/how-to-submit-polymorphic-comments-on-feed-error\" title=\"how to submit polymorphic comments on feed error\">stackoverflow.com/questions/29806363/&hellip;</a>"}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1431501680, "post_id": 30203971, "comment_id": 48521002, "body": "@AnthonyGalli.com please post your controller code also"}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1431574855, "post_id": 30203971, "comment_id": 48561173, "body": "@AnthonyGalli.com Try this: <code>&lt;%= form_for @comment, url: send(create_url, @comment.commentable) do |f| %&gt;</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "edited": false, "score": 0, "creation_date": 1431574971, "post_id": 30203971, "comment_id": 48561203, "body": "Nope @anusha that gave: <code>NoMethodError in Activities#index Showing &#47;comments&#47;_form.html.erb where line #1 raised: undefined method &#39;commentable&#39; for nil:NilClass</code>"}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1431575294, "post_id": 30203971, "comment_id": 48561283, "body": "@AnthonyGalli.com what about this <code>&lt;%= form_for @comment, url: send(create_url) do |f| %&gt;</code>"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "edited": false, "score": 0, "creation_date": 1431575366, "post_id": 30203971, "comment_id": 48561311, "body": "That gives @anusha: <code>ActionController::UrlGenerationError in Activities#index Showing &#47;comments&#47;_form.html.erb where line #1 raised: No route matches {:action=&gt;&quot;index&quot;, :controller=&gt;&quot;comments&quot;} missing required keys: [:activity_id]</code>"}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1431575842, "post_id": 30203971, "comment_id": 48561445, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/77769/discussion-between-anusha-and-anthonygalli-com\">continue this discussion in chat</a>."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "edited": false, "score": 0, "creation_date": 1431989068, "post_id": 30203971, "comment_id": 48723262, "body": "Hi @anusha I keep checking your profile to see when you are on, but I can never seem to catch you. When would work for you to continue our conversation? Thanks again :)"}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1432025515, "post_id": 30203971, "comment_id": 48736658, "body": "@AnthonyGalli.com Can we continue the discussion"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "edited": false, "score": 0, "creation_date": 1432330627, "post_id": 30203971, "comment_id": 48900116, "body": "Hey @anusha can you pick a time or two? I&#39;ll make myself flexible to whatever you need. My time zone is New York."}, {"owner": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "reply_to_user": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1432543488, "post_id": 30203971, "comment_id": 48952312, "body": "@AnthonyGalli.com I am available now till 4 to 5 hours. If it is possible for you then we will discuss"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 1971, "user_id": 3419341, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ameEV.jpg?s=128&g=1", "display_name": "anusha", "link": "https://stackoverflow.com/users/3419341/anusha"}, "edited": false, "score": 0, "creation_date": 1432615298, "post_id": 30203971, "comment_id": 48980694, "body": "@anusha can you chat now? <a href=\"http://chat.stackoverflow.com/rooms/77769/discussion-between-anusha-and-anthonygalli-com\">chat.stackoverflow.com/rooms/77769/&hellip;</a>"}], "tags": [], "owner": {"reputation": 706, "user_id": 4706028, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/0f9ab6c0881ff54e5053ea8c3e07bbc0?s=128&d=identicon&r=PG&f=1", "display_name": "Zippo9", "link": "https://stackoverflow.com/users/4706028/zippo9"}, "is_accepted": true, "score": 1, "last_activity_date": 1508091151, "last_edit_date": 1508091151, "creation_date": 1431479404, "answer_id": 30203971, "question_id": 30203934, "link": "https://stackoverflow.com/questions/30203934/undefined-local-variable-or-method-new-comment/30203971#30203971", "title": "undefined local variable or method `new_comment`", "body": "<p>It should be <code>&lt;%= form_for comment do |f| %&gt;</code> not new comment since comment is the element in your database</p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1058, "favorite_count": 0, "accepted_answer_id": 30203971, "answer_count": 1, "score": -1, "last_activity_date": 1508091151, "creation_date": 1431479098, "last_edit_date": 1495541654, "question_id": 30203934, "link": "https://stackoverflow.com/questions/30203934/undefined-local-variable-or-method-new-comment", "title": "undefined local variable or method `new_comment`", "body": "<blockquote>\n  <p>NameError in Comments#create</p>\n  \n  <p>Showing /<strong>comments/_form.html.erb</strong>\n  where line #1 raised:</p>\n  \n  <p>undefined local variable or method <code>new_comment</code> for #&lt;#:0x007fb9760eb640></p>\n</blockquote>\n\n<pre><code>&lt;%= form_for new_comment, url: send(create_url, new_comment.commentable) do |f| %&gt;\n</code></pre>\n\n<p><code>new_comment</code> is being called by:</p>\n\n<p><strong>activities/index.html.erb</strong></p>\n\n<p><code>&lt;%= render \"comments/form\", new_comment: Comment.new(commentable_id: activity.id, commentable_type: activity.class.model_name), create_url: :activity_comments_path %&gt;</code></p>\n\n<p><strong>comment.rb</strong></p>\n\n<pre><code>class Comment &lt; ActiveRecord::Base\n  after_save :create_notification #ERROR OCCURRED WHEN I INTRODUCED THIS LINE AND\n  validates :activity, presence: true #THIS LINE\n  validates :user, presence: true\n  has_many :notifications\n  belongs_to :commentable, polymorphic: true\n  belongs_to :user\n  belongs_to :activity\n\nprivate\n\n  def create_notification\n    Notification.create(\n      activity_id: self.activity_id, \n      user_id: self.user_id, \n      comment_id: self.id, \n      read: false\n      )\n  end\nend\n</code></pre>\n\n<p><strong>notification.rb</strong></p>\n\n<pre><code>class Notification &lt; ActiveRecord::Base\n  belongs_to :activity\n  belongs_to :comment\n  belongs_to :user\nend\n</code></pre>\n\n<p><strong>activity.rb</strong></p>\n\n<pre><code>class Activity &lt; ActiveRecord::Base\n  self.per_page = 20\n  has_many :notifications\n  belongs_to :user\n  has_many :comments, as: :commentable\n  belongs_to :trackable, polymorphic: true\n\n  def conceal\n    trackable.conceal\n  end\n\n  def page_number\n    (index / per_page.to_f).ceil\n  end\n\nprivate\n\n  def index\n    Activity.order(created_at: :desc).index self\n  end\nend\n</code></pre>\n\n<p><strong>routes.rb</strong></p>\n\n<pre><code>resources :activities do\n  resources :comments\n  resources :notifications\n  member do\n    post :like\n    post :notifications\n  end\nend\n</code></pre>\n\n<p>Any ideas on what maybe the cause? This error is coming off of the awesome answer here: <a href=\"https://stackoverflow.com/questions/30134662/how-to-make-a-path-to-a-paginated-url\">How to make a path to a paginated url?</a></p>\n\n<p><strong>Thank you!</strong></p>\n\n<h2>UPDATE</h2>\n\n<pre><code>class CommentsController &lt; ApplicationController\n    before_action :load_commentable\n  before_action :set_comment, only: [:show, :edit, :update, :destroy, :like]\n  before_action :logged_in_user, only: [:create, :destroy]\n\n    def index\n        @comments = @commentable.comments\n    end\n\n    def new\n        @comment = @commentable.comments.new\n    end\n\n    def create\n        @comment = @commentable.comments.new(comment_params)\n        if @comment.save\n            redirect_to @commentable, notice: \"comment created.\"\n        else\n            render :new\n        end\n    end\n\n    def edit\n        @comment = current_user.comments.find(params[:id])\n    end\n\n    def update\n        @comment = current_user.comments.find(params[:id])\n        if @comment.update_attributes(comment_params)\n            redirect_to @commentable, notice: \"Comment was updated.\"\n        else\n            render :edit\n        end\n    end\n\n    def destroy\n        @comment = current_user.comments.find(params[:id])\n        @comment.destroy\n        redirect_to @commentable, notice: \"comment destroyed.\"\n    end\n\n  def like\n    @comment = Comment.find(params[:id])\n    @comment_like = current_user.comment_likes.build(comment: @comment)\n    if @comment_like.save\n            @comment.increment!(:likes)\n        flash[:success] = 'Thanks for liking!'\n    else\n        flash[:error] = 'Two many likes'\n      end  \n        redirect_to(:back)\n  end\n\nprivate\n\n  def set_comment\n    @comment = Comment.find(params[:id])\n  end\n\n    def load_commentable\n        resource, id = request.path.split('/')[1, 2]\n        @commentable = resource.singularize.classify.constantize.find(id)\n    end\n\n    def comment_params\n        params[:comment][:user_id] = current_user.id\n        params.require(:comment).permit(:content, :commentable, :user_id, :like)\n    end\nend\n</code></pre>\n\n<p><strong>notifications_controller</strong></p>\n\n<pre><code>class NotificationsController &lt; ApplicationController\n    def index\n    @notifications = current_user.notifications\n    @notifications.each do |notification|\n        notification.update_attribute(:read, true)\n    end\n    end\n\n\n    def destroy\n      @notification = Notification.find(params[:id])\n      @notification.destroy\n      redirect_to :back\n    end\nend\n</code></pre>\n\n<p><strong>activities_controller</strong></p>\n\n<pre><code>class ActivitiesController &lt; ApplicationController\n    def index\n        @activities = Activity.order(\"created_at desc\").paginate(:page =&gt; params[:page])\n    end\n\n    def show\n          redirect_to(:back)\n    end\n\n  def like\n    @activity = Activity.find(params[:id])\n    @activity_like = current_user.activity_likes.build(activity: @activity)\n    if @activity_like.save\n      @activity.increment!(:likes)\n      flash[:success] = 'Thanks for liking!'\n    else\n      flash[:error] = 'Two many likes'\n    end  \n      redirect_to(:back)\n  end\nend\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 11404, "user_id": 599436, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/1b6fa83b64b8ad9dc7643a68bf5c214d?s=128&d=identicon&r=PG", "display_name": "Jon Egeland", "link": "https://stackoverflow.com/users/599436/jon-egeland"}, "edited": false, "score": 1, "creation_date": 1431478662, "post_id": 30203868, "comment_id": 48513033, "body": "Note that the second example modifies the array <code>arr</code>, while the first one doesn&#39;t."}], "answers": [{"comments": [{"owner": {"reputation": 534, "user_id": 3057462, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vwrs.jpg?s=128&g=1", "display_name": "hiveer", "link": "https://stackoverflow.com/users/3057462/hiveer"}, "edited": false, "score": 0, "creation_date": 1431480206, "post_id": 30203907, "comment_id": 48513417, "body": "Thanks for your answer. I guess the precedence should be what you said. But, I didn&#39;t find the theoretical basis in ruby. So, could please provide a link or something that show us the precedence definition. Thanks again."}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "reply_to_user": {"reputation": 534, "user_id": 3057462, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vwrs.jpg?s=128&g=1", "display_name": "hiveer", "link": "https://stackoverflow.com/users/3057462/hiveer"}, "edited": false, "score": 1, "creation_date": 1431480570, "post_id": 30203907, "comment_id": 48513498, "body": "As I said, it is not an operator, so it does not get traditional &quot;precedence&quot;: it is a part of Ruby grammar. Take a look <a href=\"http://ruby-doc.org/docs/ruby-doc-bundle/Manual/man-1.4/yacc.html\" rel=\"nofollow noreferrer\">here</a>, at rules <code>WHEN_ARGS</code>, <code>MLHS</code>, <code>MRHS</code>, <code>CALL_ARGS</code>, <code>ARGLIST</code> (your case is <code>CALL_ARGS</code>, as arguments to <code>attr_accessor</code>). The rules say a star can precede an argument, where argument is any kind of expression (such as <code>arr + [:three]</code>)."}], "tags": [], "owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "is_accepted": true, "score": 2, "last_activity_date": 1431478872, "creation_date": 1431478872, "answer_id": 30203907, "question_id": 30203868, "link": "https://stackoverflow.com/questions/30203868/how-to-use-ruby-splat-operator-can-we-do-some-operation-on-it/30203907#30203907", "title": "How to use ruby splat operator? Can we do some operation on it?", "body": "<p>No, you got the precedence wrong. <code>*arr + [:three]</code> is <code>*(arr + [:three])</code>, so it splats three arguments onto <code>attr_accessor</code>. The result of a splat is not a Ruby value, so no operations can be done on it. It is not an operator in the same sense that <code>+</code> is operator. Whereas <code>+</code> is a method, this usage of <code>*</code> is not.</p>\n\n<p>(There is no opinion here, only a fact on how Ruby works.)</p>\n"}], "owner": {"reputation": 534, "user_id": 3057462, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/0vwrs.jpg?s=128&g=1", "display_name": "hiveer", "link": "https://stackoverflow.com/users/3057462/hiveer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 279, "favorite_count": 2, "accepted_answer_id": 30203907, "answer_count": 1, "score": 0, "last_activity_date": 1431478872, "creation_date": 1431478480, "question_id": 30203868, "link": "https://stackoverflow.com/questions/30203868/how-to-use-ruby-splat-operator-can-we-do-some-operation-on-it", "title": "How to use ruby splat operator? Can we do some operation on it?", "body": "<p>The confusing case:</p>\n\n<pre><code>arr = [:one, :two]\nattr_accessor *arr + [:three]\n</code></pre>\n\n<p>In this case, it seems that we do a <code>+</code> operation on the splat <code>*arr</code>. But, generally we can't perform any operation on splat. So this make me confused.</p>\n\n<p>I prefer another case like this:</p>\n\n<pre><code>arr = [:one, :two]\nattr_accessor *(arr &lt;&lt; :three)\n</code></pre>\n\n<p>So, what's your opinion?</p>\n"}, {"tags": ["arrays", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1, "user_id": 4840267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163d0509e5445d22d5e08d3ab956d5d3?s=128&d=identicon&r=PG&f=1", "display_name": "ebfd", "link": "https://stackoverflow.com/users/4840267/ebfd"}, "edited": false, "score": 0, "creation_date": 1431648517, "post_id": 30203878, "comment_id": 48599408, "body": "I&#39;m a bit confused. I understand the explanation but when i run it throughout the emulator and change the values it always returns the final value. Not the value with the largest sum. Did we perhaps miss a step?"}, {"owner": {"reputation": 885, "user_id": 1169785, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/1cb88c0410d5380a5b590a2e993b053a?s=128&d=identicon&r=PG", "display_name": "G. Allen Morris III", "link": "https://stackoverflow.com/users/1169785/g-allen-morris-iii"}, "edited": false, "score": 0, "creation_date": 1431673344, "post_id": 30203878, "comment_id": 48606960, "body": "the if should have == not ="}, {"owner": {"reputation": 11698, "user_id": 309641, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YuQvL.jpg?s=128&g=1", "display_name": "David Zorychta", "link": "https://stackoverflow.com/users/309641/david-zorychta"}, "reply_to_user": {"reputation": 1, "user_id": 4840267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163d0509e5445d22d5e08d3ab956d5d3?s=128&d=identicon&r=PG&f=1", "display_name": "ebfd", "link": "https://stackoverflow.com/users/4840267/ebfd"}, "edited": false, "score": 0, "creation_date": 1431693827, "post_id": 30203878, "comment_id": 48619276, "body": "hey @ebfd there was a typo (= instead of ==)"}], "tags": [], "owner": {"reputation": 11698, "user_id": 309641, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/YuQvL.jpg?s=128&g=1", "display_name": "David Zorychta", "link": "https://stackoverflow.com/users/309641/david-zorychta"}, "is_accepted": false, "score": 2, "last_activity_date": 1431693778, "last_edit_date": 1431693778, "creation_date": 1431478586, "answer_id": 30203878, "question_id": 30203826, "link": "https://stackoverflow.com/questions/30203826/i-want-to-return-the-string-that-has-the-highest-sum-in-an-array-for-ruby/30203878#30203878", "title": "I want to return the string that has the highest sum in an array for Ruby", "body": "<pre><code>yourArray = [\"123\",\"324\",\"644\"]\nhighest = -1\npos = -1\nyourArray.each_with_index{ |str, i| \n  sum = str.split(\"\").map(&amp;:to_i).reduce(:+)\n  highest = [highest,sum].max\n  pos = i if highest == sum\n}\nputs \"highest value is \" + yourArray[pos]\n</code></pre>\n\n<p>lets look at each step, map lets us enumerate the array and returns a new array with whatever we return from map:</p>\n\n<pre><code>yourArray.map{ |str| ... }\n</code></pre>\n\n<p>Here we're taking our strings in the array and splitting them into arrays of [\"1\",\"2\",\"3\"] for example, then the <code>to_i</code> portion converts this to an array such as [1,2,3] then finally reduce gives us our sum:</p>\n\n<pre><code>sum = str.split(\"\").map(&amp;:to_i).reduce(:+)\n</code></pre>\n\n<p>Here we're keeping track throughout the loop of the highest sum we've seen so far:</p>\n\n<pre><code>highest = [highest,sum].max\n</code></pre>\n\n<p>If ever the current sum is the highest, store its position in the array</p>\n\n<pre><code>pos = i if highest = sum\n</code></pre>\n\n<p>finally, use the stored array position to print out whatever exists there in the original array (the positions line up):</p>\n\n<pre><code>puts \"highest value is \" + yourArray[pos]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1, "user_id": 4840267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163d0509e5445d22d5e08d3ab956d5d3?s=128&d=identicon&r=PG&f=1", "display_name": "ebfd", "link": "https://stackoverflow.com/users/4840267/ebfd"}, "edited": false, "score": 0, "creation_date": 1431649120, "post_id": 30204061, "comment_id": 48599569, "body": "This works like a charm, thank you! Could you perhaps give a brief explanation of what&#39;s going on in this function?"}, {"owner": {"reputation": 1, "user_id": 4840267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163d0509e5445d22d5e08d3ab956d5d3?s=128&d=identicon&r=PG&f=1", "display_name": "ebfd", "link": "https://stackoverflow.com/users/4840267/ebfd"}, "edited": false, "score": 0, "creation_date": 1431703020, "post_id": 30204061, "comment_id": 48625968, "body": "This is perfect. Great explanation, really helped me grasp it."}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 3, "last_activity_date": 1431672992, "last_edit_date": 1431672992, "creation_date": 1431480180, "answer_id": 30204061, "question_id": 30203826, "link": "https://stackoverflow.com/questions/30203826/i-want-to-return-the-string-that-has-the-highest-sum-in-an-array-for-ruby/30204061#30204061", "title": "I want to return the string that has the highest sum in an array for Ruby", "body": "<p>I suggest you use <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-max_by\" rel=\"nofollow\">Enumerable#max_by</a>:</p>\n\n<pre><code>arr = [\"123\",\"324\",\"644\"]\n\narr.max_by { |s| s.each_char.reduce(0) { |t,c| t+c.to_i } }\n  #=&gt; \"644\"\n</code></pre>\n\n<p>Let's see how this works.  <a href=\"http://ruby-doc.org/core-2.2.0/Enumerable.html#method-i-max_by\" rel=\"nofollow\">Enumerable#max_by</a> computes a value for each element of <code>arr</code> and returns the element of <code>arr</code> whose computed value is greatest. The calculation of the value for each element is done by <code>max_by</code>'s block.</p>\n\n<pre><code>enum0 = arr.max_by\n  #=&gt; #&lt;Enumerator: [\"123\", \"324\", \"644\"]:max_by&gt; \n</code></pre>\n\n<p>You can see the three elements of this enumerator. Sometimes it's not so obvious, but you can always see what they are by converting the enumerator to an array:</p>\n\n<pre><code>enum0.to_a\n  #=&gt; [\"123\", \"324\", \"644\"]\n</code></pre>\n\n<p>Elements of <code>enum0</code> are passed to the block by the method <a href=\"http://ruby-doc.org/core-2.1.5/Enumerator.html#method-i-each\" rel=\"nofollow\">Enumerator#each</a> (which in turn calls <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-each\" rel=\"nofollow\">Array#each</a>). You would find that:</p>\n\n<pre><code>enum0.each { |s| s.each_char.reduce(0) { |t,c| t+c.to_i } }\n</code></pre>\n\n<p>returns <code>\"644\"</code>.</p>\n\n<p>The first element of the enumerator (<code>\"123\"</code>) is passed to the block by <code>each</code> and assigned to the block variable <code>s</code>. We can simulate that with the method <a href=\"http://ruby-doc.org/core-2.1.5/Enumerator.html#method-i-next\" rel=\"nofollow\">Enumerator#next</a>:</p>\n\n<pre><code>s = enum0.next\n  #=&gt; \"123\"\n</code></pre>\n\n<p>Within the block we have another enumerator:</p>\n\n<pre><code>enum1 = s.each_char\n  #=&gt; #&lt;Enumerator: \"123\":each_char&gt; \nenum1.to_a\n  #=&gt; [\"1\", \"2\", \"3\"]\nenum1.reduce(0) { |t,c| t+c.to_i }\n  #=&gt; 6\n</code></pre>\n\n<p>This last statement is equivalent to:</p>\n\n<pre><code>0            #  initial value of t\n0 + \"1\".to_i #=&gt; 1 (new value of t)\n1 + \"2\".to_i #=&gt; 3 (new value of t)\n3 + \"3\".to_i #=&gt; 6 (new value of t)\n</code></pre>\n\n<p><code>6</code> is then returned by <code>reduce</code>.</p>\n\n<p>For the next element of <code>enum0</code>:</p>\n\n<pre><code>s = enum0.next\n  #=&gt; \"324\"\ns.each_char.reduce(0) { |t,c| t+c.to_i }\n  #=&gt; 9\n</code></pre>\n\n<p>and for the last element <code>enum0</code>:</p>\n\n<pre><code>s = enum0.next\n  #=&gt; \"644\"\ns.each_char.reduce(0) { |t,c| t+c.to_i }\n  #=&gt; 14\n</code></pre>\n\n<p>Since <code>14</code> is the largest integer in <code>[6, 9, 14]</code>, <code>max_by</code> returns the last element of <code>arr</code>, <code>\"644\"</code>.</p>\n"}], "owner": {"reputation": 1, "user_id": 4840267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/163d0509e5445d22d5e08d3ab956d5d3?s=128&d=identicon&r=PG&f=1", "display_name": "ebfd", "link": "https://stackoverflow.com/users/4840267/ebfd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 110, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1431693778, "creation_date": 1431478109, "question_id": 30203826, "link": "https://stackoverflow.com/questions/30203826/i-want-to-return-the-string-that-has-the-highest-sum-in-an-array-for-ruby", "title": "I want to return the string that has the highest sum in an array for Ruby", "body": "<p>So far I am able to return the sums of the strings:</p>\n\n<pre><code>puts \"Please enter strings of #'s to find the number that has the greatest sum.\"\nputs \"Use commas to separate #'s.\"\nuser_input = gets.chomp\narray = user_input.split(\",\")\narray.map do |num_string|\n  num_string.chars.map(&amp;:to_i).inject(:+)\nend\n</code></pre>\n\n<p>But I wish to return the string that adds up to the highest value. For instance: If I have array = [\"123\",\"324\",\"644\"] I need it to return the sums of each value so the result should be 6,9,and 14 respectively. Since 1+2+3=6 etc. I am this far but now I need to return \"644\" as the answer since it is the string that sums to the highest value.</p>\n"}, {"tags": ["ruby", "rubygems", "ruby-ffi"], "answers": [{"tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": false, "score": 0, "last_activity_date": 1432707448, "creation_date": 1432707448, "answer_id": 30474527, "question_id": 30203773, "link": "https://stackoverflow.com/questions/30203773/how-to-package-a-library-and-ffi-interface-as-gem-possible/30474527#30474527", "title": "How to package a library and ffi-interface as gem? Possible?", "body": "<p>This is what the <a href=\"https://github.com/ffi/ffi-compiler\" rel=\"nofollow\">ffi-compiler</a> gem does.</p>\n\n<p>You write a Rakefile that uses a mkmf like syntax to define how to build your project and then use the supplied helpers to load your library (since the built library isn't going to be in any of the standard search paths).</p>\n\n<p>I don't believe you can build straight from your Makefile, however it seems simple enough that it should be easy to translate - the only thing that doesn't seem to be documented is how to change flags passed to the compiler, but it looks like</p>\n\n<pre><code>FFI::Compiler::CompileTask.new('example') do |c|\n  c.cflags &lt;&lt; '-O2'\nend\n</code></pre>\n\n<p>should do it.</p>\n"}], "owner": {"reputation": 170, "user_id": 3113723, "user_type": "registered", "accept_rate": 29, "profile_image": "https://www.gravatar.com/avatar/2457be007eeee64db29675f30706f81a?s=128&d=identicon&r=PG&f=1", "display_name": "user3113723", "link": "https://stackoverflow.com/users/3113723/user3113723"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 59, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1432707448, "creation_date": 1431477674, "last_edit_date": 1432704437, "question_id": 30203773, "link": "https://stackoverflow.com/questions/30203773/how-to-package-a-library-and-ffi-interface-as-gem-possible", "title": "How to package a library and ffi-interface as gem? Possible?", "body": "<p>I created a library for a project I was working on. Essentially, it packages imgSeek as an alternative to pHash/phashion. See this link for background:</p>\n\n<p><a href=\"http://hackerlabs.org/blog/2012/07/30/organizing-photos-with-duplicate-and-similarity-checking/\" rel=\"nofollow\">http://hackerlabs.org/blog/2012/07/30/organizing-photos-with-duplicate-and-similarity-checking/</a></p>\n\n<p>The library consists of a C/C++ shared library (with makefile &amp; shit) and ruby-ffi bindings. I wanted to package this so other people could use it, but I don't really know how.</p>\n\n<p>The rubygems site documents packaging a gem with C extensions, but not what I want.</p>\n\n<p>I'm not sure if this is possible. Maybe what I'm supposed to do is publish the library as, say, a regular operating system package (e.g. .deb), and then publish the ffi bindings as a gem, and have the user install them separately. This sounds like a lot of work.</p>\n\n<p>Is it possible to package the ffi bindings and the library together such that installing the gem causes the library to be built? That's make it a lot easier for me, personally, to get this code out to anyone who might want to use it.</p>\n\n<p>The code is here:</p>\n\n<p><a href=\"https://bitbucket.org/dradetsky/ruby-seeklib\" rel=\"nofollow\">https://bitbucket.org/dradetsky/ruby-seeklib</a></p>\n\n<p><a href=\"https://bitbucket.org/dradetsky/seeklib\" rel=\"nofollow\">https://bitbucket.org/dradetsky/seeklib</a></p>\n\n<p><a href=\"https://github.com/dradetsky/ruby-seeklib\" rel=\"nofollow\">https://github.com/dradetsky/ruby-seeklib</a></p>\n\n<p><a href=\"https://github.com/dradetsky/seeklib\" rel=\"nofollow\">https://github.com/dradetsky/seeklib</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ubuntu"], "comments": [{"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1431477171, "post_id": 30203659, "comment_id": 48512678, "body": "First question is, what are you deploying to? Passenger, Puma,... Webrick...?"}, {"owner": {"reputation": 1668, "user_id": 964836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9bc42bfa445d412b61aa8ccd5bb17c6b?s=128&d=identicon&r=PG&f=1", "display_name": "raduken", "link": "https://stackoverflow.com/users/964836/raduken"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1431477282, "post_id": 30203659, "comment_id": 48512712, "body": "i am new on ror, but i am using Capistrano and unicorn"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1431478047, "post_id": 30203659, "comment_id": 48512905, "body": "Check the first line in <code>&#47;usr&#47;bin&#47;unicorn_rails</code> on your server. It should reference the Ruby executable it is using."}, {"owner": {"reputation": 1668, "user_id": 964836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9bc42bfa445d412b61aa8ccd5bb17c6b?s=128&d=identicon&r=PG&f=1", "display_name": "raduken", "link": "https://stackoverflow.com/users/964836/raduken"}, "reply_to_user": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 0, "creation_date": 1431479200, "post_id": 30203659, "comment_id": 48513182, "body": "i edit my post again can u read?i found in : /var/lib/gems 2 folders: 1.8 and 1.9.1 i dont know if is relation for that, in unicorn i opened: unicorn_rails_1 and inside i just have that line: olddoc_placeholder"}, {"owner": {"reputation": 167912, "user_id": 240443, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/495d675e3bc42ed1dee469e2ce701f1b?s=128&d=identicon&r=PG", "display_name": "Amadan", "link": "https://stackoverflow.com/users/240443/amadan"}, "edited": false, "score": 1, "creation_date": 1431480283, "post_id": 30203659, "comment_id": 48513434, "body": "I might be off in my path, but... <code>&#47;etc&#47;init.d&#47;unicorn</code> should reference a script should refer to something like <code>&#47;usr&#47;bin&#47;unicorn_rails</code> or <code>&#47;usr&#47;local&#47;bin&#47;unicorn</code> or something like that; that file in turn should have as its first line <code>#!&#47;path&#47;to&#47;ruby</code> or <code>#!&#47;usr&#47;bin&#47;env ruby</code>. If the former, you have found your rogue ruby. If the latter, execute <code>env ruby</code> to find it. (All of this on the server, not on your local.) Your output (&quot;RubyGems Environment&quot;) does not help, as you haven&#39;t specified where it comes from or what command you obtained it with. Same with &quot;in unicorn i opened&quot;... no path"}], "owner": {"reputation": 1668, "user_id": 964836, "user_type": "registered", "accept_rate": 72, "profile_image": "https://www.gravatar.com/avatar/9bc42bfa445d412b61aa8ccd5bb17c6b?s=128&d=identicon&r=PG&f=1", "display_name": "raduken", "link": "https://stackoverflow.com/users/964836/raduken"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 110, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1431479124, "creation_date": 1431476948, "last_edit_date": 1431479124, "question_id": 30203659, "link": "https://stackoverflow.com/questions/30203659/error-deploying-ruby-application", "title": "Error deploying ruby application", "body": "<p>i tried deploy my ruby app in my server, but keeps me showing i am using 1.9.3  but i am not, on my server and computer the only version  have is 2.2.1, i never mention 1.9.3 in my app or server, someone can give me a help?</p>\n\n<p>i found in : /var/lib/gems 2 folders: 1.8 and 1.9.1 i dont know if is relation for that.</p>\n\n<pre><code>DEBUG [f4634e5c]    Your Ruby version is 1.9.3, but your Gemfile specified 2.2.1\n(Backtrace restricted to imported tasks)\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as deploy@: bundle exit status: 18\nbundle stdout: Your Ruby version is 1.9.3, but your Gemfile specified 2.2.1\nbundle stderr: Nothing written\n\nSSHKit::Command::Failed: bundle exit status: 18\nbundle stdout: Your Ruby version is 1.9.3, but your Gemfile specified 2.2.1\nbundle stderr: Nothing written\n\nTasks: TOP =&gt; deploy:updated =&gt; bundler:install\n(See full trace by running task with --trace)\nThe deploy has failed with an error: Exception while executing as deploy@: bundle exit status: 18\nbundle stdout: Your Ruby version is 1.9.3, but your Gemfile specified 2.2.1\nbundle stderr: Nothing written\n\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.4.6\n  - RUBY VERSION: 2.2.1 (2015-02-26 patchlevel 85) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /usr/local/rvm/gems/ruby-2.2.1\n  - RUBY EXECUTABLE: /usr/local/rvm/rubies/ruby-2.2.1/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/local/rvm/gems/ruby-2.2.1/bin\n  - SPEC CACHE DIRECTORY: /root/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /usr/local/rvm/gems/ruby-2.2.1\n     - /usr/local/rvm/gems/ruby-2.2.1@global\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n  - REMOTE SOURCES:\n     - https://rubygems.org/\n  - SHELL PATH:\n     - /usr/local/rvm/gems/ruby-2.2.1/bin\n     - /usr/local/rvm/gems/ruby-2.2.1@global/bin\n     - /usr/local/rvm/rubies/ruby-2.2.1/bin\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/sbin\n     - /usr/bin\n     - /sbin\n     - /bin\n     - /usr/games\n     - /usr/local/games\n     - /usr/local/rvm/bin\n</code></pre>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 22303, "user_id": 2456433, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NiN8K.jpg?s=128&g=1", "display_name": "infused", "link": "https://stackoverflow.com/users/2456433/infused"}, "edited": false, "score": 0, "creation_date": 1431491490, "post_id": 30203600, "comment_id": 48516439, "body": "possible duplicate of <a href=\"http://stackoverflow.com/questions/279270/which-style-of-ruby-string-quoting-do-you-favour\">Which style of Ruby string quoting do you favour?</a>"}], "answers": [{"tags": [], "owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "is_accepted": false, "score": 3, "last_activity_date": 1431476707, "creation_date": 1431476707, "answer_id": 30203623, "question_id": 30203600, "link": "https://stackoverflow.com/questions/30203600/when-would-you-use-single-quote-strings-over-double-quote-strings-in-ruby/30203623#30203623", "title": "When would you use single-quote strings over double-quote strings in Ruby?", "body": "<p>Single quotes are used when you don't need interpolation:</p>\n\n<pre><code>name = 'joe'\n</code></pre>\n\n<p>Double is used when you do need interpolation:</p>\n\n<pre><code>name = 'joe'\nputs \"The name is #{name}\"\n</code></pre>\n\n<p>You can use double quotes in both cases. Many people find it simpler to use double quotes all the time.</p>\n\n<p>You are correct about escape sequences.</p>\n\n<pre><code>puts \"\\nThis is a new line.\"\n=&gt;\n=&gt; This is a new line.\n\nputs '\\nThis is a new line.'\n =&gt; '\\nThis is a new line.'\n</code></pre>\n\n<p>I prefer to use single quotes whenever possible, because double quotes are noisy.</p>\n"}, {"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 1, "creation_date": 1431480569, "post_id": 30203656, "comment_id": 48513497, "body": "There&#39;s always the <code>%q{...}</code> and <code>%Q{...}</code> forms if you need to deal with lots of internal quotes."}], "tags": [], "owner": {"reputation": 240688, "user_id": 14955, "user_type": "registered", "accept_rate": 55, "profile_image": "https://i.stack.imgur.com/5DblQ.png?s=128&g=1", "display_name": "Thilo", "link": "https://stackoverflow.com/users/14955/thilo"}, "is_accepted": false, "score": 3, "last_activity_date": 1431476942, "creation_date": 1431476942, "answer_id": 30203656, "question_id": 30203600, "link": "https://stackoverflow.com/questions/30203600/when-would-you-use-single-quote-strings-over-double-quote-strings-in-ruby/30203656#30203656", "title": "When would you use single-quote strings over double-quote strings in Ruby?", "body": "<p>In addition to the difference in interpolation, it is also nice to be able to include quotes in the string literal without clumsy escapes. Just choose the opposite surrounding quotes:</p>\n\n<pre><code>name = 'Phil \"the man\" Smith'\nname = \"Jack O'Conner\"\n</code></pre>\n"}], "owner": {"reputation": 500, "user_id": 1176878, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/2cfbd6ed473661bdad0ea841cf465820?s=128&d=identicon&r=PG", "display_name": "giwook", "link": "https://stackoverflow.com/users/1176878/giwook"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 40, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1431476942, "creation_date": 1431476578, "question_id": 30203600, "link": "https://stackoverflow.com/questions/30203600/when-would-you-use-single-quote-strings-over-double-quote-strings-in-ruby", "title": "When would you use single-quote strings over double-quote strings in Ruby?", "body": "<p>Ruby newbie here, and I understand that single-quote strings will not allow interpolation and will ignore most escape sequences. I'm just looking for some actual examples of when you might want to use single-quote strings as opposed to double-quote strings.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3"], "answers": [{"tags": [], "owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "is_accepted": true, "score": 4, "last_activity_date": 1431476502, "creation_date": 1431476502, "answer_id": 30203589, "question_id": 30203521, "link": "https://stackoverflow.com/questions/30203521/amazon-s3-invalid-date-when-using-expires-in-url-for/30203589#30203589", "title": "Amazon S3 invalid date when using expires in url_for", "body": "<p>The exception text may be coming from something deeper and ends up misleading, the docs and examples state:</p>\n\n<blockquote>\n  <p><strong>:expires</strong> (Object) \u2014 Sets the expiration time of the URL; after this time S3 will return an error if the URL is used. <strong>This can be an integer (to specify the number of seconds after the <em>current time</em>)</strong>, a string (which is parsed as a date using Time#parse), <strong>a Time, or a DateTime object</strong>. This option defaults to one hour after the current time.</p>\n</blockquote>\n\n<p>Based on that, I think you're doing too much work, try this:</p>\n\n<pre><code>expires: Time.utc(2019, 12, 3)\n</code></pre>\n"}], "owner": {"reputation": 4504, "user_id": 3681199, "user_type": "registered", "accept_rate": 31, "profile_image": "https://www.gravatar.com/avatar/70b2072de3d0d43e1af48fd2d416157f?s=128&d=identicon&r=PG&f=1", "display_name": "Nona", "link": "https://stackoverflow.com/users/3681199/nona"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1698, "favorite_count": 0, "accepted_answer_id": 30203589, "answer_count": 1, "score": 3, "last_activity_date": 1431476502, "creation_date": 1431476047, "question_id": 30203521, "link": "https://stackoverflow.com/questions/30203521/amazon-s3-invalid-date-when-using-expires-in-url-for", "title": "Amazon S3 invalid date when using expires in url_for", "body": "<p>I create a document in an Amazon s3 bucket.  I then try to create a signed url to that bucket that expires a few years from now as follows:</p>\n\n<pre><code>s3 = AWS::S3.new(:access_key_id =&gt; S3Config.access_key_id, :secret_access_key =&gt; S3Config.secret_access_key)\n    bucket = s3.buckets[S3Config.bucket]\n    bucket.objects[s3_key].url_for(:read, :expires =&gt; Time.at(Time.utc(2019,12,30)).to_i)\n</code></pre>\n\n<p>But when I navigate to the signed url I get the following error message:</p>\n\n<pre><code>Invalid date (should be seconds since epoch)\n</code></pre>\n\n<p>But according to the ruby docs for <a href=\"http://ruby-doc.org/core-2.1.5/Time.html#method-c-at\" rel=\"nofollow\">Time.at</a>, and my understanding of epoch time, this should work...what am I doing wrong?</p>\n"}, {"tags": ["ruby", "gem", "rbenv"], "answers": [{"tags": [], "owner": {"reputation": 3046, "user_id": 227403, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/3f149861a296511ce45656426643ce68?s=128&d=identicon&r=PG", "display_name": "Travis", "link": "https://stackoverflow.com/users/227403/travis"}, "is_accepted": false, "score": 0, "last_activity_date": 1447280416, "creation_date": 1447280416, "answer_id": 33660942, "question_id": 30203494, "link": "https://stackoverflow.com/questions/30203494/rbenv-cannot-run-gem-command/33660942#33660942", "title": "rbenv cannot run gem command", "body": "<p>I could not figure the problem out. I was using homebrew and uninstalled it. Reinstalled directly and it's working now. </p>\n"}], "owner": {"reputation": 1775, "user_id": 4893580, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/621d06faeb8ed8be874951e0f6b624e8?s=128&d=identicon&r=PG&f=1", "display_name": "Kris MP", "link": "https://stackoverflow.com/users/4893580/kris-mp"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 275, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1447280416, "creation_date": 1431475884, "question_id": 30203494, "link": "https://stackoverflow.com/questions/30203494/rbenv-cannot-run-gem-command", "title": "rbenv cannot run gem command", "body": "<p>Im using rbenv as my ruby versioning manager, I run these commands:</p>\n\n<pre><code>$ rbenv install 2.2.2\n$ rbenv global 2.2.2\n$ rbenv rehash\n$ ruby -v\n$ &gt; ruby 2.2.2p95 (2015-04-13 revision 50295) [x86_64-darwin11.0]\n</code></pre>\n\n<p>but when I run this command:</p>\n\n<pre><code>$ gem -v\n</code></pre>\n\n<p>it returns an error:</p>\n\n<pre><code>/usr/local/Cellar/rbenv/0.4.0/libexec/rbenv-exec:\n</code></pre>\n\n<p><code>/Users/username/.rbenv/versions/2.2.2/bin/gem:</code> <code>/Users/mac/.rbenv/versions/2.2.2/bin/ruby: bad interpreter: No such file or directory</code>\n    <code>/usr/local/Cellar/rbenv/0.4.0/libexec/rbenv-exec: line 43:</code> <code>/Users/username/.rbenv/versions/2.2.2/bin/gem: Undefined error: 0</code></p>\n\n<p>What do I miss? thanks in advance</p>\n"}, {"tags": ["ruby", "sinatra"], "comments": [{"owner": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1431506091, "post_id": 30203311, "comment_id": 48523760, "body": "What makes you think it&#39;s not a method? It&#39;s called exactly the same way as any other method, it looks exactly the same as any other method, it <i>is</i> in fact a method."}, {"owner": {"reputation": 376, "user_id": 2373403, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d57a7be5a202d44b71560544c7375f9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2373403/jack"}, "reply_to_user": {"reputation": 335867, "user_id": 2988, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ed181f8c80df53d2b67a4f4fff088ed4?s=128&d=identicon&r=PG", "display_name": "J&#246;rg W Mittag", "link": "https://stackoverflow.com/users/2988/j%c3%b6rg-w-mittag"}, "edited": false, "score": 0, "creation_date": 1431912045, "post_id": 30203311, "comment_id": 48684107, "body": "That it&#39;s inside of a class--in every other language I know, class bodies do not permit executable code, only member variables and method declarations. In what context, then, is all of that in-class code executed, and when?"}, {"owner": {"reputation": 10613, "user_id": 6062, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/1178609ba6835138fb8ae7f0a2eeffc2?s=128&d=identicon&r=PG", "display_name": "Nathan", "link": "https://stackoverflow.com/users/6062/nathan"}, "edited": false, "score": 0, "creation_date": 1432022200, "post_id": 30203311, "comment_id": 48734570, "body": "Ruby allows for &#39;executable&#39; code almost everywhere, including the class definition"}], "answers": [{"comments": [{"owner": {"reputation": 376, "user_id": 2373403, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d57a7be5a202d44b71560544c7375f9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2373403/jack"}, "edited": false, "score": 0, "creation_date": 1431474955, "post_id": 30203366, "comment_id": 48512086, "body": "That doesn&#39;t answer my question--I was wondering <i>how</i> Sinatra allows that syntax, not what it does."}, {"owner": {"reputation": 39282, "user_id": 336920, "user_type": "registered", "accept_rate": 76, "profile_image": "https://www.gravatar.com/avatar/6e2dbeb23d3fc6552a6e26800ed63289?s=128&d=identicon&r=PG", "display_name": "B Seven", "link": "https://stackoverflow.com/users/336920/b-seven"}, "edited": false, "score": 0, "creation_date": 1431475169, "post_id": 30203366, "comment_id": 48512153, "body": "You beat me to it. See <a href=\"https://github.com/sinatra/sinatra/blob/master/lib/sinatra/base.rb#L1366-L1374\" rel=\"nofollow noreferrer\">github.com/sinatra/sinatra/blob/master/lib/sinatra/&hellip;</a>"}], "tags": [], "owner": {"reputation": 3738, "user_id": 2530089, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a4973420ed95a43d4a63718685b9a94b?s=128&d=identicon&r=PG", "display_name": "Alex Pan", "link": "https://stackoverflow.com/users/2530089/alex-pan"}, "is_accepted": false, "score": 2, "last_activity_date": 1431475062, "last_edit_date": 1431475062, "creation_date": 1431474906, "answer_id": 30203366, "question_id": 30203311, "link": "https://stackoverflow.com/questions/30203311/how-does-sinatra-allow-its-syntax/30203366#30203366", "title": "How does Sinatra allow its syntax?", "body": "<p>The <code>get '/'</code> is specifying the GET endpoint for your application. If you were to start up the server and go to localhost:port/, then you would see 'Hello world!' on the page.</p>\n\n<pre><code>def get(path, opts = {}, &amp;block)\n  conditions = @conditions.dup\n  route('GET', path, opts, &amp;block)\n\n  @conditions = conditions\n  route('HEAD', path, opts, &amp;block)\nend\n</code></pre>\n\n<p>This is the get method in Sinatra's lib. The get method takes a path as an argument and will route you to that path. You can also pass in options (opts), but that isn't done in your example. The last argument is a block. This is the part between the do and end.</p>\n"}, {"tags": [], "owner": {"reputation": 21521, "user_id": 78613, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/0fa1dc97175c4cc1ea4ecf506119961c?s=128&d=identicon&r=PG", "display_name": "Nick Veys", "link": "https://stackoverflow.com/users/78613/nick-veys"}, "is_accepted": true, "score": 2, "last_activity_date": 1431475385, "creation_date": 1431475385, "answer_id": 30203428, "question_id": 30203311, "link": "https://stackoverflow.com/questions/30203311/how-does-sinatra-allow-its-syntax/30203428#30203428", "title": "How does Sinatra allow its syntax?", "body": "<p>This is called an <a href=\"https://robots.thoughtbot.com/writing-a-domain-specific-language-in-ruby\" rel=\"nofollow\">\"Internal Domain-Specific Language\"</a> in Ruby.  That <code>get</code> you are calling is actually a method, defined by Sinatra, that takes a block (which is your implementation of the get).</p>\n\n<p>When you find yourself calling odd-looking methods, but still able to execute what seems like normal Ruby code, you're likely using an Internal DSL.  Examples include Bundler's Gemfiles, Rake's Rakefiles, RSpec specifications...</p>\n"}], "owner": {"reputation": 376, "user_id": 2373403, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/d57a7be5a202d44b71560544c7375f9c?s=128&d=identicon&r=PG", "display_name": "Jack", "link": "https://stackoverflow.com/users/2373403/jack"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 99, "favorite_count": 0, "accepted_answer_id": 30203428, "answer_count": 2, "score": 2, "last_activity_date": 1431475385, "creation_date": 1431474514, "question_id": 30203311, "link": "https://stackoverflow.com/questions/30203311/how-does-sinatra-allow-its-syntax", "title": "How does Sinatra allow its syntax?", "body": "<p>One of Sinatra's examples is this:</p>\n\n<pre><code>require 'sinatra/base'\n\nclass MyApp &lt; Sinatra::Base\n  set :sessions, true\n  set :foo, 'bar'\n\n  get '/' do\n    'Hello world!'\n  end\nend\n</code></pre>\n\n<p>How does Sinatra allow the \" get '/' do\" syntax? It doesn't seem to be a method, and I'm not aware of any other syntax that allows that.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "activerecord"], "answers": [{"comments": [{"owner": {"reputation": 1235, "user_id": 1769999, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c8f72a2a665dd0db7533430f9d682408?s=128&d=identicon&r=PG&f=1", "display_name": "fortune", "link": "https://stackoverflow.com/users/1769999/fortune"}, "edited": false, "score": 0, "creation_date": 1431475566, "post_id": 30203385, "comment_id": 48512257, "body": "This won&#39;t execute until it&#39;s saved to the database, correct? I was kind of hoping to show this value to the user when they are creating the RMA. However I suppose that&#39;s not entirely necessary."}], "tags": [], "owner": {"reputation": 1834, "user_id": 474321, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/4831563e0aa52671a1a2e58eacac2bc4?s=128&d=identicon&r=PG", "display_name": "Pat&#233;", "link": "https://stackoverflow.com/users/474321/pat%c3%a9"}, "is_accepted": true, "score": 1, "last_activity_date": 1431475068, "creation_date": 1431475068, "answer_id": 30203385, "question_id": 30203297, "link": "https://stackoverflow.com/questions/30203297/rails-initialize-model-value-from-database/30203385#30203385", "title": "Rails initialize model value from database", "body": "<p>The infinite loop is caused by the RMA lookup that you're making in the generate_rma_number method.  </p>\n\n<pre><code>last_rma = Rma.select(:rma_number).order('id desc').first'\n</code></pre>\n\n<p>Because what you want is before_create not after_initialize. After initialize will trigger every time a model is initialized. Even if that models already exists in the db.</p>\n"}], "owner": {"reputation": 1235, "user_id": 1769999, "user_type": "registered", "accept_rate": 84, "profile_image": "https://www.gravatar.com/avatar/c8f72a2a665dd0db7533430f9d682408?s=128&d=identicon&r=PG&f=1", "display_name": "fortune", "link": "https://stackoverflow.com/users/1769999/fortune"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 66, "favorite_count": 0, "accepted_answer_id": 30203385, "answer_count": 1, "score": 0, "last_activity_date": 1431475068, "creation_date": 1431474446, "question_id": 30203297, "link": "https://stackoverflow.com/questions/30203297/rails-initialize-model-value-from-database", "title": "Rails initialize model value from database", "body": "<p>I'm fairly new to Rails and I'm running into an issue which I can't seem to find a resolution to. My model represents an RMA in the system. When you generate a new instance of the model I'd like to lookup the previous RMA number and generate a new one. The RMA # design looks like <code>RMA-{year}-NNN</code> => <code>RMA-2015-001</code>.</p>\n\n<p>My current implementation leverages <code>after_initialize</code> to accomplish this. However during my testing I noticed that making a call to the database during this method seems to causes an infinite loop. </p>\n\n<p><strong>This is what my code looks like:</strong></p>\n\n<pre><code>after_initialize :after_initialize\n\ndef after_initialize\n  self.rma_number ||= generate_rma_number()\nend\n\ndef generate_rma_number\n   new_rma_array = Array.new\n   new_rma_array.push(\"RMA\")\n   new_rma_array.push(Time.now.year)\n\n   # Get the last RMA\n   last_rma = Rma.select(:rma_number).order('id desc').first\n\n   # If there is no RMA\n   if(last_rma == nil)\n     new_rma_array.push(\"001\")\n     return new_rma_array.join('-')\n   end\n\n   # Split the string\n   current_rma_array = last_rma.rma_number.split('-')\n\n   # Increment the RMA\n   new_rma_array.push((current_rma_array[2].to_i + 1).to_s.rjust(3, '0'))\n   return new_rma_array.join('-')\n\n end\n</code></pre>\n"}, {"tags": ["android", "ruby-on-rails", "ruby", "sqlite", "heroku"], "answers": [{"tags": [], "owner": {"reputation": 338, "user_id": 2448623, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8bca7118778cb36d1976c0ef5f412690?s=128&d=identicon&r=PG", "display_name": "Alex", "link": "https://stackoverflow.com/users/2448623/alex"}, "is_accepted": true, "score": 1, "last_activity_date": 1431470891, "last_edit_date": 1495541671, "creation_date": 1431470891, "answer_id": 30202737, "question_id": 30202540, "link": "https://stackoverflow.com/questions/30202540/connect-rails-app-to-android-one/30202737#30202737", "title": "Connect rails app to android one", "body": "<p>You have just two option:</p>\n\n<ol>\n<li>Create your own API in your rails app:</li>\n</ol>\n\n<p>Manually:\n<a href=\"http://railscasts.com/episodes/350-rest-api-versioning\" rel=\"nofollow noreferrer\">http://railscasts.com/episodes/350-rest-api-versioning</a></p>\n\n<p>Using some gem:\n<a href=\"http://railscasts.com/episodes/348-the-rails-api-gem\" rel=\"nofollow noreferrer\">http://railscasts.com/episodes/348-the-rails-api-gem</a></p>\n\n<p>or </p>\n\n<ol start=\"2\">\n<li>create android app with Webview object for working with you app by internet like browser\n<a href=\"https://developer.chrome.com/multidevice/webview/gettingstarted\" rel=\"nofollow noreferrer\">https://developer.chrome.com/multidevice/webview/gettingstarted</a></li>\n</ol>\n\n<p>very similar question:\n<a href=\"https://stackoverflow.com/questions/30202019/from-ruby-on-rails-website-webapp-to-phonegap-android-app\">From ruby on rails website/webapp to Phonegap Android app?</a></p>\n"}], "owner": {"reputation": 297, "user_id": 4616973, "user_type": "registered", "accept_rate": 86, "profile_image": "https://i.stack.imgur.com/vkEXc.jpg?s=128&g=1", "display_name": "xeitor", "link": "https://stackoverflow.com/users/4616973/xeitor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 64, "favorite_count": 0, "accepted_answer_id": 30202737, "answer_count": 1, "score": 1, "last_activity_date": 1431470891, "creation_date": 1431469766, "question_id": 30202540, "link": "https://stackoverflow.com/questions/30202540/connect-rails-app-to-android-one", "title": "Connect rails app to android one", "body": "<p>I have recently finished a rails app and Its is currently hosted in heroku, It has a database setuped and every thing. In the app you can upload users edit them, etc. .Now, I want to create an android aplication that can do the same things.\nI have been reading about using rest but I am not shure that is the way. Any other options, thanks!</p>\n"}]