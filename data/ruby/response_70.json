[{"tags": ["ruby-on-rails", "ruby", "many-to-many"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463008621, "post_id": 37174745, "comment_id": 61884171, "body": "Can you post examples of row data and outputs?  It&#39;s difficult to tell what exactly you&#39;re trying to do."}, {"owner": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463028050, "post_id": 37174745, "comment_id": 61889007, "body": "I&#39;ve added more code and explained a little further. If you need something else, just tell me :) thanks"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463028296, "post_id": 37174745, "comment_id": 61889095, "body": "So that I understand what you&#39;re asking, you just want that line to show <code>Banana     123</code> and no other values?"}, {"owner": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463030489, "post_id": 37174745, "comment_id": 61889844, "body": "Exactly! This quantity is a param for the join table (igredient_id, meal_id and quant). So I want to display this quantity based on the ids it&#39;s related."}], "answers": [{"comments": [{"owner": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "edited": false, "score": 0, "creation_date": 1463028158, "post_id": 37174804, "comment_id": 61889049, "body": "you pluralized ingredients intentionally?  I didn&#39;t find out where this answear can be used. I edited my post so you can understand better my point. Thanks again"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "edited": false, "score": 0, "creation_date": 1463028622, "post_id": 37174804, "comment_id": 61889207, "body": "I have updated the answer with what I think you&#39;re asking for."}, {"owner": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "edited": false, "score": 0, "creation_date": 1463030214, "post_id": 37174804, "comment_id": 61889759, "body": "Yes but it&#39;s not always the first, imagine an Excel sheet where you make yourself a diet. The difference is I&#39;m using many to many relation because I want the user to use an ingredient that already exists, and I&#39;m dealing with the quantity as a join table."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "edited": false, "score": 0, "creation_date": 1463031068, "post_id": 37174804, "comment_id": 61890052, "body": "So how do you tell which quantity you want to use for the ingredient <i>banana</i>, if there are 2 quantities available in the recipe?  With your schema, that&#39;s completely possible.  Do you add them together and present one quantity for that ingredient, or do you display the first amount.  Based on your example, I displayed the first quantity, even though it appeared that there might be 2 quantities (123.0 and 1.0) for <i>banana</i>.  I can change it to add them together, if that&#39;s what you want.  That&#39;s ONLY adding quantities for the exact same ingredient - quantities for <i>salt</i> don&#39;t add to <i>banana</i>."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "edited": false, "score": 0, "creation_date": 1463031772, "post_id": 37174804, "comment_id": 61890356, "body": "if you look at how Rails describes the relationship, <code>ingredient</code> (singular) can have <code>quantities</code> (plural).  This means that one recipe can have one ingredient with multiple quantities.  When you read the code, you can see <code>ingredient.quantities</code>, which isn&#39;t obvious what needs to be done.  It requires you to tell me how to handle multiple quantities of the same ingredient."}, {"owner": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "edited": false, "score": 0, "creation_date": 1463060472, "post_id": 37174804, "comment_id": 61909972, "body": "That&#39;s plural because 1 ingredient id may have many quantities associated to different meals, right? I want to store a meal id, then store a ingredient id and display the only join table possible with the &#39;quant&#39; argument. The way I&#39;m doing to achieve that is wrong ?"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "edited": false, "score": 0, "creation_date": 1463085814, "post_id": 37174804, "comment_id": 61926533, "body": "What my answer says is that the first quantity of each ingredient for the meal is to be shown.  From everything that you&#39;ve shared, this looks correct, <b>unless</b> it&#39;s possible to have an ingredient included more than one time for a meal.  Is that possible in your application?  If not, this should be your answer."}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1463028578, "last_edit_date": 1463028578, "creation_date": 1463008797, "answer_id": 37174804, "question_id": 37174745, "link": "https://stackoverflow.com/questions/37174745/displaying-join-table-row-in-view-has-many-through-association/37174804#37174804", "title": "Displaying join table row in view (has_many through association)", "body": "<p>Could this be what you're looking for:</p>\n\n<pre><code>&lt;% meal.ingredients.each do |ingredient| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= ingredient.name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= ingredient.quantities.first.quant %&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>This will display the ingredient name and the first quantity for the ingredient.  It will not display any additional quantities for the ingredient, not the carb, protein, or fat amounts.</p>\n"}, {"comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463085360, "post_id": 37192091, "comment_id": 61926303, "body": "You should already be filtered by <code>meal</code> at that point.  3 lines above that shows <code>meal.ingredients.each</code>, which makes the query related only to the meal.  You shouldn&#39;t have to do a separate <code>find_by(meal_id)</code> within that, unless there&#39;s something really wrong with your relationships and/or your data."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 1, "creation_date": 1463085398, "post_id": 37192091, "comment_id": 61926322, "body": "Note that it&#39;s also very bad form to embed a database query in your view.  You want your queries in the controller, and only the display logic in your view."}], "tags": [], "owner": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "is_accepted": true, "score": 0, "last_activity_date": 1463068926, "creation_date": 1463068926, "answer_id": 37192091, "question_id": 37174745, "link": "https://stackoverflow.com/questions/37174745/displaying-join-table-row-in-view-has-many-through-association/37192091#37192091", "title": "Displaying join table row in view (has_many through association)", "body": "<p>GOT IT!</p>\n\n<pre><code>&lt;p id=\"notice\"&gt;&lt;%= notice %&gt;&lt;/p&gt;\n&lt;h1&gt;Listing Meals&lt;/h1&gt;\n&lt;% @meals.each do |meal| %&gt;\n  &lt;div class=\"x_panel\"&gt;\n    &lt;div class=\"x_title\"&gt;\n      &lt;h2&gt;&lt;%= meal.name %&gt;&lt;/h2&gt;\n      &lt;ul class=\"nav navbar-right panel_toolbox\"&gt;\n        &lt;li&gt;&lt;a class=\"collapse-link\"&gt;&lt;i class=\"fa fa-chevron-up\"&gt;&lt;/i&gt;&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"dropdown\"&gt;\n          &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-expanded=\"false\"&gt;&lt;i class=\"fa fa-wrench\"&gt;&lt;/i&gt;&lt;/a&gt;\n          &lt;ul class=\"dropdown-menu\" role=\"menu\"&gt;\n            &lt;li&gt;&lt;%= link_to 'Show', meal %&gt;\n            &lt;/li&gt;\n            &lt;li&gt;&lt;%= link_to 'Edit', edit_meal_path(meal) %&gt;\n            &lt;/li&gt;\n          &lt;/ul&gt;\n        &lt;/li&gt;\n        &lt;li&gt;&lt;%= link_to '', meal, method: :delete, data: { confirm: 'Are you sure?' }, class: \"fa fa-close\" %&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n      &lt;div class=\"clearfix\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"x_content\"&gt;\n\n      &lt;table class=\"table table-striped\"&gt;\n\n        &lt;tbody&gt;\n          &lt;% meal.ingredients.each do |ingredient| %&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;%= ingredient.name %&gt;&lt;/td&gt;\n&lt;!-- FILTERED INGREDIENT QUANTITY ACCORDING TO MEAL ID --&gt;\n              &lt;td&gt;&lt;%= ingredient.quantities.find_by(meal_id: meal.id).quant %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= ingredient.unit %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= ingredient.carb %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= ingredient.prot %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= ingredient.fat %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n          &lt;% end %&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;%= link_to 'New Meal', new_meal_path %&gt;\n</code></pre>\n\n<p>I just don't know if it's the best solution, but worked for me!</p>\n"}], "owner": {"reputation": 55, "user_id": 5636302, "user_type": "registered", "accept_rate": 57, "profile_image": "https://graph.facebook.com/10208208049062611/picture?type=large", "display_name": "Betinho Saad", "link": "https://stackoverflow.com/users/5636302/betinho-saad"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 417, "favorite_count": 0, "accepted_answer_id": 37192091, "answer_count": 2, "score": 0, "last_activity_date": 1463068926, "creation_date": 1463008334, "last_edit_date": 1463028017, "question_id": 37174745, "link": "https://stackoverflow.com/questions/37174745/displaying-join-table-row-in-view-has-many-through-association", "title": "Displaying join table row in view (has_many through association)", "body": "<p>The thing is: I'm doing a basic diet planner which has meals, ingredients and quantities.\nWhen a user make a meal, he select the ingredients and set the quantity of it.\nAll I want is to display in the meal index page rows with the ingredients and its quantities.</p>\n\n<pre><code>&lt;% meal.ingredients.each do |ingredient| %&gt;\n        &lt;tr&gt;\n          &lt;td&gt;&lt;%= ingredient.name %&gt;&lt;/td&gt;\n          &lt;% ingredient.quantities.each do |q| %&gt;\n            &lt;td&gt;&lt;%= q.quant %&gt;&lt;/td&gt;\n          &lt;% end %&gt;\n          &lt;td&gt;&lt;%= ingredient.unit %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= ingredient.carb %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= ingredient.prot %&gt;&lt;/td&gt;\n          &lt;td&gt;&lt;%= ingredient.fat %&gt;&lt;/td&gt;\n        &lt;/tr&gt;\n      &lt;% end %&gt;\n</code></pre>\n\n<p>This is showing all quantities associated with the selected ingredient. I'm not posting models because I think it's too obvious.\nThanks</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>db/schema.rb</p>\n\n<pre><code>  create_table \"ingredients\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"unit\"\n    t.float    \"carb\"\n    t.float    \"prot\"\n    t.float    \"fat\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"meals\", force: :cascade do |t|\n    t.string   \"name\"\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n\n  create_table \"quantities\", force: :cascade do |t|\n    t.float   \"quant\"\n    t.integer \"ingredient_id\"\n    t.integer \"meal_id\"\n  end\n</code></pre>\n\n<p>views/meals/index.html.erb</p>\n\n<pre><code>&lt;% @meals.each do |meal| %&gt;\n  &lt;div class=\"x_panel\"&gt;\n    &lt;div class=\"x_title\"&gt;\n      &lt;h2&gt;&lt;%= meal.name %&gt;&lt;/h2&gt;\n      &lt;ul class=\"nav navbar-right panel_toolbox\"&gt;\n        &lt;li&gt;&lt;a class=\"collapse-link\"&gt;&lt;i class=\"fa fa-chevron-up\"&gt;&lt;/i&gt;&lt;/a&gt;\n        &lt;/li&gt;\n        &lt;li class=\"dropdown\"&gt;\n          &lt;a href=\"#\" class=\"dropdown-toggle\" data-toggle=\"dropdown\" role=\"button\" aria-expanded=\"false\"&gt;&lt;i class=\"fa fa-wrench\"&gt;&lt;/i&gt;&lt;/a&gt;\n          &lt;ul class=\"dropdown-menu\" role=\"menu\"&gt;\n            &lt;li&gt;&lt;%= link_to 'Show', meal %&gt;\n            &lt;/li&gt;\n            &lt;li&gt;&lt;%= link_to 'Edit', edit_meal_path(meal) %&gt;\n            &lt;/li&gt;\n          &lt;/ul&gt;\n        &lt;/li&gt;\n        &lt;li&gt;&lt;%= link_to '', meal, method: :delete, data: { confirm: 'Are you sure?' }, class: \"fa fa-close\" %&gt;\n        &lt;/li&gt;\n      &lt;/ul&gt;\n      &lt;div class=\"clearfix\"&gt;&lt;/div&gt;\n    &lt;/div&gt;\n    &lt;div class=\"x_content\"&gt;\n\n      &lt;table class=\"table table-striped\"&gt;\n\n        &lt;tbody&gt;\n          &lt;% meal.ingredients.each do |ingredient| %&gt;\n            &lt;tr&gt;\n              &lt;td&gt;&lt;%= ingredient.name %&gt;&lt;/td&gt;\n              &lt;% ingredient.quantities.each do |q| %&gt;\n                &lt;td&gt;&lt;%= q.quant %&gt;&lt;/td&gt;\n              &lt;% end %&gt;\n              &lt;td&gt;&lt;%= ingredient.unit %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= ingredient.carb %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= ingredient.prot %&gt;&lt;/td&gt;\n              &lt;td&gt;&lt;%= ingredient.fat %&gt;&lt;/td&gt;\n            &lt;/tr&gt;\n          &lt;% end %&gt;\n        &lt;/tbody&gt;\n      &lt;/table&gt;\n\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;%= link_to 'New Meal', new_meal_path %&gt;\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/qmUDI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qmUDI.png\" alt=\"enter image description here\"></a>\nThe highlighted numbers are quantities from banana ingredient. \nHowever, for the meal it's associated I want only \"123\".\nI guess it's a problem of queries and I don't find out how to fix it.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3", "activerecord"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1463010133, "post_id": 37174510, "comment_id": 61884589, "body": "You might want to make two different but similar models to port data over, one for each database."}], "answers": [{"tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 2, "last_activity_date": 1463007628, "creation_date": 1463007628, "answer_id": 37174652, "question_id": 37174510, "link": "https://stackoverflow.com/questions/37174510/activerecord-is-resetting-all-my-previously-defined-variables/37174652#37174652", "title": "ActiveRecord is resetting all my previously defined variables", "body": "<p><code>oab_account.trials.includes(:parts)</code> doesn't store a value, it stores a reference to an <code>ActiveRecord::Relation</code> that is lazily evaluated. </p>\n\n<p>So it's not that <code>ActiveRecord</code> is resetting the value of the variable, rather, when you connect to your second database you're changing the reference to an empty collection.</p>\n"}, {"tags": [], "owner": {"reputation": 34077, "user_id": 1249, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/ed9686d6910478914966ec99bbcaa069?s=128&d=identicon&r=PG", "display_name": "Adam Lassek", "link": "https://stackoverflow.com/users/1249/adam-lassek"}, "is_accepted": true, "score": 2, "last_activity_date": 1463007856, "creation_date": 1463007856, "answer_id": 37174679, "question_id": 37174510, "link": "https://stackoverflow.com/questions/37174510/activerecord-is-resetting-all-my-previously-defined-variables/37174679#37174679", "title": "ActiveRecord is resetting all my previously defined variables", "body": "<p>The related collections that you are referencing are lazy-evaluated instances of <code>ActiveRecord::Relation</code>. Lazy-evaluation doesn't work if your database connection changes mid-stream.</p>\n\n<p>You need to eager load these relations into memory first, before switching connections. Call <code>.to_a</code> on the relations to force this.</p>\n\n<pre><code>oab_account      = User.find_by_username(args[:oab_user]).main_account\n\noab_trials       = oab_account.trials.includes(:parts).to_a\noab_schedules    = oab_account.schedules.to_a\noab_movements    = oab_account.movements.to_a\noab_annotations  = oab_account.annotations.to_a\noab_hearings     = oab_account.hearings.to_a\noab_publications = oab_account.publications.to_a\noab_tasks        = oab_account.tasks.to_a\noab_people       = oab_account.people.includes(:addresses, :internet_addresses, :phones).to_a\n</code></pre>\n"}], "owner": {"reputation": 456, "user_id": 3122311, "user_type": "registered", "accept_rate": 65, "profile_image": "https://www.gravatar.com/avatar/679c944afa134ee19cbf571de55aae15?s=128&d=identicon&r=PG", "display_name": "Pedro Vin&#237;cius", "link": "https://stackoverflow.com/users/3122311/pedro-vin%c3%adcius"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 29, "favorite_count": 0, "accepted_answer_id": 37174679, "answer_count": 2, "score": 2, "last_activity_date": 1463007856, "creation_date": 1463006879, "last_edit_date": 1463007216, "question_id": 37174510, "link": "https://stackoverflow.com/questions/37174510/activerecord-is-resetting-all-my-previously-defined-variables", "title": "ActiveRecord is resetting all my previously defined variables", "body": "<p>I'm building a rake task in order to migrate some data between two databases. The ones have exactly the same structure. My task is so:</p>\n\n<pre><code>namespace :oab_nexus_migration do\n  task :start, [:oab_user, :nexus_user] =&gt; :environment do |t, args|\n    oab_account      = User.find_by_username(args[:oab_user]).main_account\n\n    oab_trials       = oab_account.trials.includes(:parts)\n    oab_schedules    = oab_account.schedules\n    oab_movements    = oab_account.movements\n    oab_annotations  = oab_account.annotations\n    oab_hearings     = oab_account.hearings\n    oab_publications = oab_account.publications\n    oab_tasks        = oab_account.tasks\n    oab_people       = oab_account.people.includes(:addresses, :internet_addresses, :phones)\n\n    ActiveRecord::Base.establish_connection(:other_database)\n\n    ...\n    More code here\n  end\nend\n</code></pre>\n\n<p>The task is executed with:</p>\n\n<p><code>RAILS_ENV=production rake oab_nexus_migration:start[user_one, user_two]</code></p>\n\n<p>After retrieve all information I need from database one, I need to insert it into database two. But something really weird is happening. If I, for example, call <code>p oab_trials</code> (or any other variable) before <code>establish_connection</code>, all values are there, represented by a large array. But if I try to call it after <code>establish_connection</code>, the returned value is an empty array. Seems like ActiveRecord is resetting all my previously defined variables.</p>\n\n<p>What is happening here? </p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1463004092, "post_id": 37173872, "comment_id": 61882661, "body": "Are you setting GEM_HOME env to <b>/usr/local/bin</b> or to <b>/usr/bin/bundle</b>?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1463004189, "post_id": 37173872, "comment_id": 61882703, "body": "Are you using <b>rvm</b> or <b>rbenv</b>? This seems to me an issue related to permissions. If you use these two installers, they will do all operations in user space and then you won&#39;t have permission issues. Much easier this way."}], "owner": {"reputation": 25363, "user_id": 118228, "user_type": "registered", "accept_rate": 85, "profile_image": "https://i.stack.imgur.com/f2tOS.jpg?s=128&g=1", "display_name": "djangofan", "link": "https://stackoverflow.com/users/118228/djangofan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 43, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1463003398, "creation_date": 1463003398, "question_id": 37173872, "link": "https://stackoverflow.com/questions/37173872/on-macosx-why-do-i-need-to-specify-gem-home-with-n-arg-on-install-commands", "title": "On MacOSX, why do I need to specify GEM_HOME with &#39;-n&#39; arg on install commands?", "body": "<p>On MacOSX, why do I need to specify GEM_HOME with '-n' arg on install commands?  <strong>Can this be changed?  If so, how?</strong></p>\n\n<pre><code>sudo gem install bundler -n /usr/local/bin\n</code></pre>\n\n<p>When I don't use the '-n', I get:</p>\n\n<pre><code>ERROR:  While executing gem ... (Errno::EPERM)\nOperation not permitted - /usr/bin/bundle\n</code></pre>\n\n<p>Setting a GEM_HOME env does not seem to affect the behavior.</p>\n\n<p>Here is my env:</p>\n\n<pre><code>blah@machine /Library/Ruby $ sudo gem environment\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.6.4\n  - RUBY VERSION: 2.0.0 (2015-12-16 patchlevel 648) [universal.x86_64-darwin15]\n  - INSTALLATION DIRECTORY: /Library/Ruby/Gems/2.0.0\n  - USER INSTALLATION DIRECTORY: /Users/blah/.gem/ruby/2.0.0\n  - RUBY EXECUTABLE: /System/Library/Frameworks/Ruby.framework/Versions/2.0/usr/bin/ruby\n  - EXECUTABLE DIRECTORY: /usr/bin\n  - SPEC CACHE DIRECTORY: /Users/blah/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /Library/Ruby/Site\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 1, "creation_date": 1463003242, "post_id": 37173796, "comment_id": 61882319, "body": "Have you read <a href=\"http://guides.rubyonrails.org/active_record_migrations.html#creating-a-table\" rel=\"nofollow noreferrer\">guides.rubyonrails.org/&hellip;</a>? If so, maybe you can ask about things that aren&#39;t already covered there."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1463007711, "post_id": 37173796, "comment_id": 61883903, "body": "Please use English punctuation when you write in English."}, {"owner": {"reputation": 87, "user_id": 5092652, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-86b_TQb4apA/AAAAAAAAAAI/AAAAAAAAAIM/OCiH7IGOWB8/photo.jpg?sz=128", "display_name": "prappo prince", "link": "https://stackoverflow.com/users/5092652/prappo-prince"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1463026645, "post_id": 37173796, "comment_id": 61888618, "body": "@sawa i&#39;m sorry for my bad English"}, {"owner": {"reputation": 87, "user_id": 5092652, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-86b_TQb4apA/AAAAAAAAAAI/AAAAAAAAAIM/OCiH7IGOWB8/photo.jpg?sz=128", "display_name": "prappo prince", "link": "https://stackoverflow.com/users/5092652/prappo-prince"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1463040610, "post_id": 37173796, "comment_id": 61895270, "body": "@DaveSchweisguth I didn&#39;t ask what that code do , I just asked how that codes works or the structure of that code . I know that code for creating table in database and I have knowledge about migration , seeding etc"}], "answers": [{"comments": [{"owner": {"reputation": 20847, "user_id": 189431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8e39b3ca0226c3d71490ec6ccd4903?s=128&d=identicon&r=PG", "display_name": "Koen.", "link": "https://stackoverflow.com/users/189431/koen"}, "edited": false, "score": 0, "creation_date": 1463004417, "post_id": 37173952, "comment_id": 61882798, "body": "&quot;null: false, is a shortcut&quot; albeit a shortcut, it&#39;s not designed as one, it is simply the newer ruby 2.x syntax for hashes"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 20847, "user_id": 189431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8e39b3ca0226c3d71490ec6ccd4903?s=128&d=identicon&r=PG", "display_name": "Koen.", "link": "https://stackoverflow.com/users/189431/koen"}, "edited": false, "score": 0, "creation_date": 1463004998, "post_id": 37173952, "comment_id": 61883030, "body": "@Koen. Technically 1.9 and newer support that, so it&#39;s been around for a while. It takes some getting used to if you&#39;re still rocking the 1.8 style but it&#39;s a lot less fuss."}, {"owner": {"reputation": 1389, "user_id": 1038309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a1882b1ee3d56a02a08f95a7b833e38?s=128&d=identicon&r=PG", "display_name": "quarterdome", "link": "https://stackoverflow.com/users/1038309/quarterdome"}, "reply_to_user": {"reputation": 20847, "user_id": 189431, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2c8e39b3ca0226c3d71490ec6ccd4903?s=128&d=identicon&r=PG", "display_name": "Koen.", "link": "https://stackoverflow.com/users/189431/koen"}, "edited": false, "score": 1, "creation_date": 1463009478, "post_id": 37173952, "comment_id": 61884405, "body": "@Koen. not entirely. It is a shortcut syntax for hashes when the key is symbol. You can not make a hash where key is not a symbol (e.g. string, number, object with the &quot;newer&quot; syntax. So it is still a syntactic sugar."}, {"owner": {"reputation": 87, "user_id": 5092652, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-86b_TQb4apA/AAAAAAAAAAI/AAAAAAAAAIM/OCiH7IGOWB8/photo.jpg?sz=128", "display_name": "prappo prince", "link": "https://stackoverflow.com/users/5092652/prappo-prince"}, "edited": false, "score": 0, "creation_date": 1463040191, "post_id": 37173952, "comment_id": 61894990, "body": "Thanks @quarterdome for your explanation , It&#39;s now crystal clear :)"}], "tags": [], "owner": {"reputation": 1389, "user_id": 1038309, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9a1882b1ee3d56a02a08f95a7b833e38?s=128&d=identicon&r=PG", "display_name": "quarterdome", "link": "https://stackoverflow.com/users/1038309/quarterdome"}, "is_accepted": false, "score": 8, "last_activity_date": 1463703389, "last_edit_date": 1463703389, "creation_date": 1463003750, "answer_id": 37173952, "question_id": 37173796, "link": "https://stackoverflow.com/questions/37173796/how-does-rubys-block-syntax-work/37173952#37173952", "title": "How does Ruby&#39;s block syntax work?", "body": "<p>Brace for it :)</p>\n\n<ol>\n<li><p><code>create_table</code> is a method. <code>:posts</code> is a symbol that is passed as parameter. Parenthesis are optional, so it looks odd but it is a simple method call. </p></li>\n<li><p>Everything between <code>do</code> and <code>end</code> is a code block. It is one of the many ways how to pass code as an argument to a method. Code blocks are great for common case. Other similar (but different) ways to do it is to use <code>Proc</code> or <code>lambda</code> or <code>-&gt;</code>. </p></li>\n<li><p><code>|t|</code> is an argument passed into the code block by <code>create_table</code>. <code>create_table</code> will execute your code block, and will pass a table object as single argument to it. You chose to name that object <code>t</code>. </p></li>\n<li><p>Now inside your code block you are calling method <code>string</code> on object <code>t</code> and passing it symbol as an argument. You are doing it four times. Again parenthesis are optional. </p></li>\n<li><p>You are calling <code>timestamps</code> method on same object <code>t</code>. Here you are passing it one parameter, which is a Hash with the value <code>{ :null =&gt; false }</code>. </p>\n\n<ul>\n<li>Not only parenthesis are optional, but also curly braces are optional when passing hash as last or only parameter to a method. </li>\n<li><code>null: false</code>, is a shortcut syntax for <code>{ :null =&gt; false }</code>. </li>\n</ul></li>\n</ol>\n\n<p>So all of the above is equivalent to:</p>\n\n<pre><code>create_table(:posts) do |t|\n  t.string(:title)\n  t.string(:content)\n  t.string(:likes)\n  t.string(:comments)\n  t.timestamps({:null =&gt; false})\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 5730, "user_id": 667987, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8c00249587cb5aa0ceb5765dc811faa7?s=128&d=identicon&r=PG", "display_name": "seph", "link": "https://stackoverflow.com/users/667987/seph"}, "is_accepted": false, "score": 2, "last_activity_date": 1463154299, "last_edit_date": 1463154299, "creation_date": 1463006728, "answer_id": 37174485, "question_id": 37173796, "link": "https://stackoverflow.com/questions/37173796/how-does-rubys-block-syntax-work/37174485#37174485", "title": "How does Ruby&#39;s block syntax work?", "body": "<p>One of the struggles with learning Ruby is that, like smalltalk et al, you get to pass code around as well as data.\nOne way you can pass code to a method is with a code block.\nYou can then call the code block in the method definition with <code>yield</code> which says \"insert this block of code in place of <code>yield</code>\":</p>\n\n<pre><code>def do_it\n  yield\nend\n\ndo_it { 2 + 4 }\n=&gt; 6 \n</code></pre>\n\n<p>You also get to send parameters into the code block from the method definition.\nThat's where the |t| comes in:</p>\n\n<pre><code>def do_it_with_ten\n  yield 10\nend\n\ndo_it_with_ten { |t| (2 + 4) * t }\n=&gt; 60 \n</code></pre>\n\n<p>Note that the curly braces are equivalent to do..end.</p>\n\n<p>I'm guessing that this is the code you found with yield in it:</p>\n\n<pre><code>def create_table(name, options = {})\n  table_definition = TableDefinition.new(self)\n  table_definition.primary_key(options[:primary_key] || \"id\") unless options[:id] == false\n\n  yield table_definition\n\n  if options[:force]\n    drop_table(name) rescue nil\n  end\n\n  create_sql = \"CREATE#{' TEMPORARY' if options[:temporary]} TABLE \"\n  create_sql &lt;&lt; \"#{name} (\"\n  create_sql &lt;&lt; table_definition.to_sql\n  create_sql &lt;&lt; \") #{options[:options]}\"\n  execute create_sql\nend\n</code></pre>\n\n<p>This is exactly what you're looking for. This is the definition of the create_table method we are calling. You can see the yield with the parameter <code>table_definition</code>.</p>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1463039983, "post_id": 37175467, "comment_id": 61894861, "body": "You could use another variable name within the last block (for example <code>b</code>) to highlight that it is independent from the yielded variable name."}, {"owner": {"reputation": 87, "user_id": 5092652, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-86b_TQb4apA/AAAAAAAAAAI/AAAAAAAAAIM/OCiH7IGOWB8/photo.jpg?sz=128", "display_name": "prappo prince", "link": "https://stackoverflow.com/users/5092652/prappo-prince"}, "edited": false, "score": 0, "creation_date": 1463040122, "post_id": 37175467, "comment_id": 61894942, "body": "Thanks @Aetherus this is what i&#39;m looking for :)"}], "tags": [], "owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "is_accepted": true, "score": 4, "last_activity_date": 1463013833, "creation_date": 1463013833, "answer_id": 37175467, "question_id": 37173796, "link": "https://stackoverflow.com/questions/37173796/how-does-rubys-block-syntax-work/37175467#37175467", "title": "How does Ruby&#39;s block syntax work?", "body": "<p>Let's first forget about Active Record and focus on the code structure itself. Here is a super simple version of that structure.</p>\n\n<pre><code>class MyBuilder\n  def initialize\n    # keys are property names, values are options\n    @properties = {}\n  end\n\n  def property(name, options={})\n    @properties[name] = options\n  end\n\n  def build\n    # For simplicity, just return all properties\n    @properties\n  end\nend\n\ndef create_thing(name)\n  puts \"Begin creating #{name}\"\n\n  builder = MyBuilder.new\n\n  puts \"Let user use the builder to define properties\"\n  yield builder\n\n  puts \"Consume the builder\"\n  properties = builder.build\n\n  puts \"Persist changes to #{name}...\"\n  # For simplicity just print them out\n  p properties\n\n  puts 'done'\nend\n\ncreate_thing :bar do |builder|\n  builder.property :counter, color: 'brown'\n  builder.property :wine_storage, texture: 'wood'\nend\n</code></pre>\n\n<p>Please type the code above by hand to grab some feel.</p>\n\n<p>Although the code above has nothing to do with Active Record, it has the same structure as the migration. </p>\n\n<p>When ever <code>create_table</code> is called, it instantiates a builder (of type <code>TableDefinition</code>), and \"pushes\" that builder to the block (by <code>yield</code>ing it) in order to let user define the tables columns. The builder is consumed later by <code>create_table</code> when the user is done defining the columns.</p>\n"}], "owner": {"reputation": 87, "user_id": 5092652, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-86b_TQb4apA/AAAAAAAAAAI/AAAAAAAAAIM/OCiH7IGOWB8/photo.jpg?sz=128", "display_name": "prappo prince", "link": "https://stackoverflow.com/users/5092652/prappo-prince"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 174, "favorite_count": 1, "accepted_answer_id": 37175467, "answer_count": 3, "score": 6, "last_activity_date": 1463703389, "creation_date": 1463002990, "last_edit_date": 1463039596, "question_id": 37173796, "link": "https://stackoverflow.com/questions/37173796/how-does-rubys-block-syntax-work", "title": "How does Ruby&#39;s block syntax work?", "body": "<p>I'm new in Ruby and trying to understand this syntax:</p>\n\n<pre><code>create_table :posts do |t|\n  t.string :title\n  t.string :content\n  t.string :likes\n  t.string :comments\n\n  t.timestamps null: false\nend\n</code></pre>\n\n<p>I fully understand <em>what</em> this code is doing, but I don't understand <em>how</em> it works. More specifically, I understand that <code>create_table</code> is a method and <code>:posts</code> is a parameter, but I don't understand the rest of the code.</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 1, "creation_date": 1463019653, "post_id": 37173730, "comment_id": 61886923, "body": "You can alternatively use the <code>websocket-rails</code> gem with rails 4. There are more alternatives, too, such as <code>faye</code>. have fun."}], "answers": [{"comments": [{"owner": {"reputation": 1812, "user_id": 2569627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/837d744faa6e1401a1001a07e61589ae?s=128&d=identicon&r=PG", "display_name": "Rafi", "link": "https://stackoverflow.com/users/2569627/rafi"}, "edited": false, "score": 0, "creation_date": 1463085620, "post_id": 37174206, "comment_id": 61926429, "body": "Woops! Sorry! Mentioned <code>Action Script</code> twice was definitely a typo as I meant <code>Action Cable</code>. And thanks for the advice on <code>Faye</code>. I&#39;ll definitely look into that."}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": true, "score": 4, "last_activity_date": 1463005727, "last_edit_date": 1463005727, "creation_date": 1463005008, "answer_id": 37174206, "question_id": 37173730, "link": "https://stackoverflow.com/questions/37173730/rails-does-action-cable-require-rails-5/37174206#37174206", "title": "Rails - Does Action Cable Require Rails 5?", "body": "<p>In short, yes. At the very least it requires <code>ActiveSupport</code> 5, which comes with Rails 5. </p>\n\n<p>While there may be a very roundabout way to include ActionCable as a dependency for Rails 4, It wasn't intended to be used with Rails 4 and I would recommend against it for this reason. If you want to use ActionCable, you should upgrade to Rails 5. Otherwise, consider using Faye or another evented messaging framework for chat.</p>\n\n<p>And what do you mean by <code>Action Script</code>? Do you mean the Adobe Flash language/framework? If so, this has nothing to do with Rails.</p>\n"}], "owner": {"reputation": 1812, "user_id": 2569627, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/837d744faa6e1401a1001a07e61589ae?s=128&d=identicon&r=PG", "display_name": "Rafi", "link": "https://stackoverflow.com/users/2569627/rafi"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 246, "favorite_count": 0, "accepted_answer_id": 37174206, "answer_count": 1, "score": 1, "last_activity_date": 1463005727, "creation_date": 1463002730, "question_id": 37173730, "link": "https://stackoverflow.com/questions/37173730/rails-does-action-cable-require-rails-5", "title": "Rails - Does Action Cable Require Rails 5?", "body": "<p>I'm sort of new to <code>Ruby on Rails</code>. I'm trying to add a real-time chat feature to my school final project, and it seems that <code>Action Cable</code> would work well for this.</p>\n\n<p>However, whenever I search for tutorials about how to use <code>Action Script</code>, they're always Rails 5 applications. My group and I are using Rails 4.2.6. Does <code>Action Script</code> require Rails 5, or can I also use it with Rails 4?</p>\n\n<p>If I can't use it with Rails 4, are there any other gems or techniques that I can use to create a real-time chat feature in my app?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1463003331, "post_id": 37173827, "comment_id": 61882345, "body": "thanks, would the model method refer to @some_thing? or be self.each etc? could you provide an example based on the code I have given?"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1463003521, "post_id": 37173827, "comment_id": 61882428, "body": "It would just call methods on itself (and you wouldn&#39;t even need to say <code>self.</code> except for assignments.) I&#39;d add an example to my question, but I just noticed that you&#39;re calling <code>each</code> on <code>@some_thing</code>, which seems odd. You might want to clear that up by editing your question."}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1463004125, "post_id": 37173827, "comment_id": 61882677, "body": "I added an explanation, but lets say I had a company with lots of addresses, and  those addresses had many types of address (mailing, billing etc).  I have to loop through the instance variable and delete and address, modify it, and add it back to the instance var."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1463004843, "post_id": 37173827, "comment_id": 61882976, "body": "I changed your example code to look more like what you said. See what you think."}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1463005318, "post_id": 37173827, "comment_id": 61883142, "body": "Thanks, looks good. So if Addresses was a class too, and it was a nested attribute for SomeThing.  In the SomeThing class, would I write: self.addresses.each....."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1463005373, "post_id": 37173827, "comment_id": 61883167, "body": "I think I just answered that in my update to my answer; take a look."}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1463006008, "post_id": 37173827, "comment_id": 61883396, "body": "I did have a look first, and it says addresses.each do, so I assume you don&#39;t need self.."}, {"owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1463006268, "post_id": 37173827, "comment_id": 61883484, "body": "Thanks, but won&#39;t &#39;addresses&#39; be a variable which hasn&#39;t been defined anywhere?"}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "edited": false, "score": 0, "creation_date": 1463006758, "post_id": 37173827, "comment_id": 61883631, "body": "If <code>SomeThing</code> <code>has_many :addresses</code>, <code>addresses</code> would be the association method that returns the <code>SomeThing</code>&#39;s <code>Address</code>es."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 1, "last_activity_date": 1514830576, "last_edit_date": 1514830576, "creation_date": 1463003165, "answer_id": 37173827, "question_id": 37173619, "link": "https://stackoverflow.com/questions/37173619/does-this-method-that-changes-an-instance-variable-belong-in-my-rails-controller/37173827#37173827", "title": "Does this method that changes an instance variable belong in my Rails controller or model?", "body": "<p>Rails applications should have <a href=\"http://weblog.jamisbuck.org/2006/10/18/skinny-controller-fat-model\" rel=\"nofollow noreferrer\">\"thin controllers\" and \"fat models\"</a> for a couple of reasons:</p>\n\n<ul>\n<li><p>Each object should handle only its own responsibilities. A controller should just be about connecting the web, the the model and the view, which thanks to Rails doesn't take much code. If a controller method refers repeatedly to methods of the same model, it's incorrectly taking on model responsibilities; we say that it's not <a href=\"https://en.wikipedia.org/wiki/Cohesion_%28computer_science%29\" rel=\"nofollow noreferrer\">cohesive</a> or that it has <a href=\"http://c2.com/cgi/wiki?FeatureEnvySmell\" rel=\"nofollow noreferrer\">\"Feature Envy\"</a>. It is more likely that if the model changes the controller will have to change in parallel.</p></li>\n<li><p>It's easier to test models than to test controllers.</p></li>\n</ul>\n\n<p>Fix it by writing a method in the model that does the model-specific work and call it in the controller (your second option). (Eventually your model will get too fat and you'll have to break it up too, but that's another story.) For example:</p>\n\n<pre><code>class SomeThingsController\n  def new\n    @some_thing = SomeThing.new(:some_params)\n    @some_thing.do_something # method call\n    @some_thing.save\n  end\nend\n\nclass SomeThing\n  def do_something\n    addresses.each do |address|\n      # modify it in some  way\n    end\n  end\nend\n</code></pre>\n\n<p>Regarding instance variables.</p>\n\n<ul>\n<li><p>Define them only if necessary. Presumably the one in your example is needed for the view.</p></li>\n<li><p>Assuming an instance variable is justified at all, there's no reason not to refer to it in private methods of the class that contains it. That's what they're for. So your first option (referring directly to the instance variable) is a bit better than your third option (passing it in). But, as discussed above, extracting a model method is better than both of the other two options.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": false, "score": 1, "last_activity_date": 1463004526, "creation_date": 1463004526, "answer_id": 37174093, "question_id": 37173619, "link": "https://stackoverflow.com/questions/37173619/does-this-method-that-changes-an-instance-variable-belong-in-my-rails-controller/37174093#37174093", "title": "Does this method that changes an instance variable belong in my Rails controller or model?", "body": "<p>In my opinion Modifying <code>@instance_vars</code> from private method is okay if your controller is just 100 lines long. </p>\n\n<p>Imagine a scenario where there are 500 LOC in your controller and after a struggle of a couple of hours you found out that the <code>@intance_var</code> is being modified by some private method.</p>\n\n<hr>\n\n<p><strong>Helpful tips</strong>:  </p>\n\n<ul>\n<li>create small private methods with single responsibility</li>\n<li>put <code>!</code> at the end of <code>method_name!</code> indicating that it modifies something. Specially this is helpful when you see <code>my_private_method!</code>, <code>!</code> makes you realize that its modifying something.</li>\n<li>lets not put code in controller that do not belong here.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 3946, "user_id": 6231376, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/cea33b55396be93411ade85021f41b01?s=128&d=identicon&r=PG&f=1", "display_name": "TeWu", "link": "https://stackoverflow.com/users/6231376/tewu"}, "is_accepted": false, "score": 1, "last_activity_date": 1463007589, "last_edit_date": 1491982277, "creation_date": 1463005471, "answer_id": 37174283, "question_id": 37173619, "link": "https://stackoverflow.com/questions/37173619/does-this-method-that-changes-an-instance-variable-belong-in-my-rails-controller/37174283#37174283", "title": "Does this method that changes an instance variable belong in my Rails controller or model?", "body": "<p>There is one more option:</p>\n\n<p><strong>In Controller:</strong></p>\n\n<pre><code>def new\n  @some_thing = SomeThing.new(:some_params)\n  @some_thing_modified = @some_thing.modify_somehow(params)\n  @some_thing_modified.save\nend\n</code></pre>\n\n<p><strong>In <code>SomeThing</code> Model:</strong></p>\n\n<pre><code>def modify_somehow(params)\n  result = self.clone\n  # ... modify result ...\n  return result\nend\n</code></pre>\n\n<p>Because <code>modify_somehow</code> is now <a href=\"https://en.wikipedia.org/wiki/Pure_function\" rel=\"nofollow noreferrer\">pure function</a> (assuming you don't do anything in <code>... modify result ...</code> part, that makes it impure), what you gain here is <a href=\"https://softwareengineering.stackexchange.com/questions/254304/what-is-referential-transparency\">Referential transparency</a>. Main benefit of referential transparency is that you can determine what function/method invocation will do, only by looking at its arguments, and get result of its work only via return value, and not via <a href=\"https://softwareengineering.stackexchange.com/questions/40297/what-is-a-side-effect\">side effects</a>. This makes your code more predictable, which in turn makes it easier to understand and debug.</p>\n\n<p>There are of course disadvantages: Because you create new object this option can be less performant, it's also more verbose than its alternatives.</p>\n\n<p>Functional programming concepts, like referential transparency, are not very popular in Rails community (probably because of how OO-centric Ruby is). But referential transparency is there if you want it, with its pros and cons.</p>\n"}], "owner": {"reputation": 1849, "user_id": 3437721, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/3e6fac72d7b35f2177b6f56eab43db28?s=128&d=identicon&r=PG&f=1", "display_name": "user3437721", "link": "https://stackoverflow.com/users/3437721/user3437721"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 262, "favorite_count": 0, "accepted_answer_id": 37173827, "answer_count": 3, "score": 1, "last_activity_date": 1514830576, "creation_date": 1463002240, "last_edit_date": 1463005298, "question_id": 37173619, "link": "https://stackoverflow.com/questions/37173619/does-this-method-that-changes-an-instance-variable-belong-in-my-rails-controller", "title": "Does this method that changes an instance variable belong in my Rails controller or model?", "body": "<p>I have a basic \"best practice\" question about controllers and instance variables.</p>\n\n<p>Say you have an instance variable in anew or update action in a controller, is it ok to modify that instance variable via a private method in the controller?  Or should the method exist in the model?</p>\n\n<p>e.g. in this example below, I need to loop through the attributes of an instance variable, and add or remove something.  For example, if I am using nested attributes 3 layers deep and have to remove certain attributes, change them and then add them back in.  I know this may seem strange, but assume it is necessary. </p>\n\n<pre><code>def new\n  @some_thing = SomeThing.new(:some_params)\n  do_something_to_inst_var # method call\n  @some_thing.save\nend\n\nprivate\n\ndef do_something_to_inst_var\n  @some_thing.addresses.each do |address|\n    # modify it in some  way\n  end\nend\n</code></pre>\n\n<p>Or is this bad practice?  Should this be a method in the model and should be called like:</p>\n\n<pre><code>@some_thing.do_something_to_inst_var\n</code></pre>\n\n<p>OR</p>\n\n<p>should we explicitly pass the instance variable to the method like:</p>\n\n<pre><code>def new\n  @some_thing = SomeThing.new(:some_params)\n  do_something_to_inst_var(@some_thing) # method call\n  @some_thing.save\nend\n\nprivate\n\ndef do_something_to_inst_var(some_thing)\n  some_thing.addresses.each do |addresses|\n    # modify it in some way\n  end\nend\n</code></pre>\n\n<p>I'm looking for some clarity here, with an example if possible.  I'm still learning and trying to improve and I didn't find an answer by searching.</p>\n"}, {"tags": ["ruby", "google-drive-api", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 86, "user_id": 2377914, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7922374d05f1fefe5d6147e8eef4c638?s=128&d=identicon&r=PG", "display_name": "ryanH", "link": "https://stackoverflow.com/users/2377914/ryanh"}, "is_accepted": false, "score": 0, "last_activity_date": 1471610776, "creation_date": 1471610776, "answer_id": 39039423, "question_id": 37173599, "link": "https://stackoverflow.com/questions/37173599/google-drive-gem-crashing-on-oauth2-authentication/39039423#39039423", "title": "Google_drive gem crashing on oAuth2 authentication", "body": "<p>Not sure if you ever got past this, but I came across this question when having a similar issue. </p>\n\n<p>I kept trying <code>gem list</code> to verify I had the proper versions of oauth2 and jwt, and I did. </p>\n\n<p>The solution for me was that the script I was running was apparently access a different version of ruby through rvm, which had a different jwt gem version installed. 1.5.4</p>\n\n<p>Once I did <code>rvm use ruby-2.3.0</code> which had jwt-1.5.4 I was able to do <code>gem uninstall jwt -v 1.5.4</code>. Then back to <code>rvm use ruby-2.1.5</code> which is my default and I was able to run everything with no problems. </p>\n"}], "owner": {"reputation": 1, "user_id": 6322575, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d369f3b5b730ae7849fbafe834926dc2?s=128&d=identicon&r=PG&f=1", "display_name": "snotweb", "link": "https://stackoverflow.com/users/6322575/snotweb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 55, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1471610776, "creation_date": 1463002157, "last_edit_date": 1592644375, "question_id": 37173599, "link": "https://stackoverflow.com/questions/37173599/google-drive-gem-crashing-on-oauth2-authentication", "title": "Google_drive gem crashing on oAuth2 authentication", "body": "<p>On Google Drive gem I used to make the authentication using the config.json, like the <a href=\"https://github.com/gimite/google-drive-ruby\" rel=\"nofollow noreferrer\">gem readme suggests</a>:</p>\n<pre><code>{\n&quot;client_id&quot;: &quot;xxxxxxxxx.apps.googleusercontent.com&quot;,\n&quot;client_secret&quot;: &quot;xxxxxxxxx&quot;,\n&quot;scope&quot;: [\n   &quot;https://docs.google.com/feeds/&quot;,\n   &quot;https://www.googleapis.com/auth/drive&quot;,\n   &quot;https://spreadsheets.google.com/feeds/&quot;\n],\n&quot;refresh_token&quot;: &quot;1/xxxxxxxxxx&quot;\n}\n</code></pre>\n<p>But I'm getting an error on oAuth2 authentication:</p>\n<blockquote>\n<p>/usr/local/lib/site_ruby/1.9.1/rubygems/specification.rb:2283:in `raise_if_conflicts': Unable to activate oauth2-1.1.0, because jwt-1.5.4 conflicts with jwt (&lt; 1.5.2, ~&gt; 1.0) (Gem::ConflictError)</p>\n</blockquote>\n<p>Anyone can help me?</p>\n<p>Thanks!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capybara", "capybara-webkit"], "answers": [{"tags": [], "owner": {"reputation": 42014, "user_id": 2709090, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/238c2b7cde2c817fc9a5a2b8eaa2ffad?s=128&d=identicon&r=PG&f=1", "display_name": "Thomas Walpole", "link": "https://stackoverflow.com/users/2709090/thomas-walpole"}, "is_accepted": false, "score": 0, "last_activity_date": 1463004908, "last_edit_date": 1463004908, "creation_date": 1463002966, "answer_id": 37173790, "question_id": 37173157, "link": "https://stackoverflow.com/questions/37173157/how-to-get-url-while-navigating-to-other-site/37173790#37173790", "title": "How to get URL while navigating to other site", "body": "<p>Since Capybara is designed to emulate a users use of a browser it doesn't report on redirects so there is no way to get the intermediate url if the browser is being redirected to a different one.  You could verify the original URL that is going to be requested if it's in a links href attribute or a data attribute on whatever element represents the project, etc.</p>\n\n<p>On a side note comparing current_url with eq or includes is a recipe for flaky tests.  Instead you should use the <a href=\"http://www.rubydoc.info/gems/capybara/Capybara/SessionMatchers#assert_current_path-instance_method\" rel=\"nofollow\">assert_current_path</a> assertion which uses Capybaras waiting/retrying behavior - In your case it would be something like</p>\n\n<pre><code>assert_current_path(\"http://www.expected.com/expected_url\", url: true)\n</code></pre>\n"}], "owner": {"reputation": 45, "user_id": 4761362, "user_type": "registered", "profile_image": "https://graph.facebook.com/1036148259745849/picture?type=large", "display_name": "Chintan Vadgama", "link": "https://stackoverflow.com/users/4761362/chintan-vadgama"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 97, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463004908, "creation_date": 1463000261, "question_id": 37173157, "link": "https://stackoverflow.com/questions/37173157/how-to-get-url-while-navigating-to-other-site", "title": "How to get URL while navigating to other site", "body": "<p>I am developing a test where I need to validate the URL while its navigating to the retailer's site</p>\n\n<p>For instance, when I click the Product, it navigates to retailer's page. I need to capture the URL when it is navigating to the retailer's page but it should not be of the previous page &amp; even not of the retailer's page. </p>\n\n<p>Is there any method in Ruby or Capybara to get that URL? I have tried to implement this method but it's not giving the correct URL.</p>\n\n<pre><code>url = URI.parse(current_url)\ndef validate_url(url)\n  browser= Capybara.current_session.driver.browser\n  puts \"current URL = #{browser.current_url}\" if @verbose\n  assert_includes browser.current_url, url\nend\n#Actual Output url =http://www.shopstyleqa.com/browse/womens-clothes\n#Expected Output url=http://www.shopstyleqa.com/action/loadRetailerProductPage\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "xml"], "answers": [{"comments": [{"owner": {"reputation": 320, "user_id": 5818528, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7ae1d686a357ccf0bcb340dd50a5ac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/5818528/noah"}, "edited": false, "score": 0, "creation_date": 1463063168, "post_id": 37173736, "comment_id": 61912333, "body": "Thanks for the help.  When I try doing this, on the <code>document.at_css()</code> line I get back <code>undefined method </code>[]=&#39; for nil:NilClass`"}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 320, "user_id": 5818528, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7ae1d686a357ccf0bcb340dd50a5ac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/5818528/noah"}, "edited": false, "score": 0, "creation_date": 1463076547, "post_id": 37173736, "comment_id": 61921328, "body": "Hm, did you try looking at the XML output to make sure there is a  <code>&lt;Envelope&gt;</code> element?"}, {"owner": {"reputation": 320, "user_id": 5818528, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7ae1d686a357ccf0bcb340dd50a5ac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/5818528/noah"}, "edited": false, "score": 0, "creation_date": 1463086537, "post_id": 37173736, "comment_id": 61926891, "body": "Technically it&#39;s <code>soapenv:Envelope</code>, but yes I did, and it&#39;s there."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 320, "user_id": 5818528, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7ae1d686a357ccf0bcb340dd50a5ac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/5818528/noah"}, "edited": false, "score": 0, "creation_date": 1463138475, "post_id": 37173736, "comment_id": 61948330, "body": "If its namespaced then you need to use a different selector - anyways if you are doing SOAP then I would seriously consider using <a href=\"https://github.com/savonrb/savon\" rel=\"nofollow noreferrer\">Savon</a> rather than reinventing the wheel."}, {"owner": {"reputation": 320, "user_id": 5818528, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7ae1d686a357ccf0bcb340dd50a5ac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/5818528/noah"}, "edited": false, "score": 0, "creation_date": 1463150103, "post_id": 37173736, "comment_id": 61956868, "body": "Tried Savon to no avail -- the API we are sending requests to whitelists IP addresses, and we&#39;re on Heroku.  I tried using Proximo to send via a static IP address, but couldn&#39;t get it to work with Savon."}, {"owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "reply_to_user": {"reputation": 320, "user_id": 5818528, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7ae1d686a357ccf0bcb340dd50a5ac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/5818528/noah"}, "edited": false, "score": 0, "creation_date": 1463223798, "post_id": 37173736, "comment_id": 61981659, "body": "I&#39;m afraid I can&#39;t help you there - you might wan&#39;t to look at the Nokogiri docs for how to deal with XML namespaces or construct a xpath selector."}, {"owner": {"reputation": 5795, "user_id": 1169705, "user_type": "registered", "accept_rate": 29, "profile_image": "https://i.stack.imgur.com/ZWEMS.png?s=128&g=1", "display_name": "digitalextremist", "link": "https://stackoverflow.com/users/1169705/digitalextremist"}, "edited": false, "score": 0, "creation_date": 1514584938, "post_id": 37173736, "comment_id": 83027893, "body": "Worked great for me. Thanks @max"}], "tags": [], "owner": {"reputation": 75558, "user_id": 544825, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/UFdOO.png?s=128&g=1", "display_name": "max", "link": "https://stackoverflow.com/users/544825/max"}, "is_accepted": false, "score": 1, "last_activity_date": 1463002774, "creation_date": 1463002774, "answer_id": 37173736, "question_id": 37172946, "link": "https://stackoverflow.com/questions/37172946/rails-to-xml-add-options-to-root-node/37173736#37173736", "title": "Rails to_xml add options to root node", "body": "<p>Rails <code>Hash#to_xml</code> does yield to a block:</p>\n\n<pre><code>request.to_xml do |options, key|\n  # options[:builder] gives the builder for the node\nend\n</code></pre>\n\n<p>But I think you are beyond the simple use case that this utility method was designed for.</p>\n\n<p>While it is potentially possible to use this to add attributes it might be much simpler and more future proof to use a XML parser - Rails already includes <a href=\"http://www.nokogiri.org/tutorials/modifying_an_html_xml_document.html\" rel=\"nofollow\">Nokogiri</a>. </p>\n\n<pre><code>require 'nokogiri'\ndoc = Nokogiri::XML(request.to_xml(root: 'Envelope'))\ndoc.at_css('Envelope')['options'] = \"value\"\ndoc.to_xml\n</code></pre>\n"}], "owner": {"reputation": 320, "user_id": 5818528, "user_type": "registered", "accept_rate": 23, "profile_image": "https://www.gravatar.com/avatar/7ae1d686a357ccf0bcb340dd50a5ac7e?s=128&d=identicon&r=PG&f=1", "display_name": "Noah", "link": "https://stackoverflow.com/users/5818528/noah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1096, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1463002774, "creation_date": 1462999479, "question_id": 37172946, "link": "https://stackoverflow.com/questions/37172946/rails-to-xml-add-options-to-root-node", "title": "Rails to_xml add options to root node", "body": "<p>I have a Ruby hash in my code, that I'm converting to XML using <code>to_xml</code>.  Everything seems to be fine, except the API i'm sending requests to require options to be attached to the root node.  For example:</p>\n\n<pre><code>request = {\n  \"Header\" =&gt; \"\", \n  \"Body\" =&gt; {\n    \"GetOrders\" =&gt; {\n      \"workorderList\" =&gt; {\n        \"string\" =&gt; \"value\"\n      },\n      \"clientID\" =&gt; ENV['CLIENT_ID'], \n      \"clientPassword\" =&gt; ENV['CLIENT_PASSWORD']\n    }\n  }\n}\n</code></pre>\n\n<p>Calling <code>to_xml</code> on this Ruby hash converts the XML as I would expect.  I pass a root option when I call <code>to_xml</code>.  However, how can I add options to the root node, so that instead of the root node looking like this (from <code>.to_xml(root: 'Envelope')</code>): <code>&lt;Envelope&gt;</code> it would look like this <code>&lt;Envelope option=\"value\"&gt;</code>.</p>\n\n<p>I know there are other gems &amp; XML builders, but I only need to be able to simply add these options to the XML's root node.</p>\n\n<p>How can this be done quickly in Ruby &amp; Rails?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 137, "user_id": 5904789, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1021219957934862/picture?type=large", "display_name": "Guilherme Nazareth de Souza", "link": "https://stackoverflow.com/users/5904789/guilherme-nazareth-de-souza"}, "edited": false, "score": 0, "creation_date": 1463007093, "post_id": 37173922, "comment_id": 61883732, "body": "&quot;Couldn&#39;t find Type with &#39;id&#39;=&quot;"}], "tags": [], "owner": {"reputation": 183, "user_id": 4907078, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/M9vNX.jpg?s=128&g=1", "display_name": "chester", "link": "https://stackoverflow.com/users/4907078/chester"}, "is_accepted": false, "score": 0, "last_activity_date": 1463003590, "creation_date": 1463003590, "answer_id": 37173922, "question_id": 37172904, "link": "https://stackoverflow.com/questions/37172904/rails-how-to-use-form-tag-to-search-has-many-through-associations/37173922#37173922", "title": "Rails - How to use form_tag to search has_many_through associations?", "body": "<p>I think the error is coming from the join in restaurants_controller:</p>\n\n<pre><code>@restaurants = Restaurant.joins(restaurant_type: :type).where(\"cast(type_id as text) LIKE ?\", \"%#{params[:type]}%\")\n</code></pre>\n\n<p>You must use the exact same name as you specified in the model...in this case, 'restaurant_types' instead of 'restaurant_type'.</p>\n\n<p>However, you have already created the associations between your models in the model files, so you do not need to use a join. You can search this way:</p>\n\n<pre><code>@restaurants = Type.find(params[:restaurant_type_id]).restaurant.where('restaurant_name like ?', \"%#{params[:restaurant_name]}%\")\n</code></pre>\n\n<p>I would change the association in type.rb to:</p>\n\n<pre><code>has_many :restaurants, :through =&gt; :restaurant_types\n</code></pre>\n\n<p>Then the method to find restaurants from a type would be plural, and more intuitive.</p>\n"}, {"tags": [], "owner": {"reputation": 137, "user_id": 5904789, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1021219957934862/picture?type=large", "display_name": "Guilherme Nazareth de Souza", "link": "https://stackoverflow.com/users/5904789/guilherme-nazareth-de-souza"}, "is_accepted": true, "score": 0, "last_activity_date": 1463061732, "last_edit_date": 1495540361, "creation_date": 1463011697, "answer_id": 37175200, "question_id": 37172904, "link": "https://stackoverflow.com/questions/37172904/rails-how-to-use-form-tag-to-search-has-many-through-associations/37175200#37175200", "title": "Rails - How to use form_tag to search has_many_through associations?", "body": "<p>I decided to create an array with all the restaurants with the selected Type. The algorithm goes over each object (restaurant_type) with the selected type, pushes it into an array, and paginates the array on the index.</p>\n\n<p>It may take longer, but asymptotic analysis suggests T(n) is multiplied by a constant, which isn't that big a deal.</p>\n\n<p>And thank you to the dude who answered here about paginating arrays: <a href=\"https://stackoverflow.com/questions/13187076/paginating-an-array-in-ruby-with-will-paginate\">Paginating an Array in Ruby with Will_Paginate</a></p>\n\n<p><strong>restaurants_controller.rb</strong></p>\n\n<pre><code>def index\n\n    @types = RestaurantType.where(\"type_id LIKE ?\", \"%#{params[:type_id]}%\")\n    array = []\n    @types.each do |t|\n        @restaurant = Restaurant.find(t.restaurant_id)\n        array.push(@restaurant)\n    end\n    @restaurant = WillPaginate::Collection.create(1, 6, array.length) do |pager|\n      pager.replace array\n    end\nend\n</code></pre>\n\n<p><strong>restaurants/index.html.erb (part of the form_tag)</strong></p>\n\n<pre><code>&lt;%= select_tag :type_id, options_for_select(Type.all.map{ |t| [t.type_name, t.id] }) %&gt;\n</code></pre>\n\n<p>-</p>\n\n<h2><strong>ANOTHER EDIT -- WORKS BETTER AND TOGETHER WITH OTHER SEARCH PARAMETERS</strong></h2>\n\n<pre><code>if (params[:type_id].to_f &gt; 0)\n    array = []\n    RestaurantType.where(\"type_id = #{ params[:type_id] } \").each do |t|\n        array.push(t.school_id)\n    end\n    @restaurants = Restaurant.where(\"restaurant_name LIKE ? AND cast(city_id as text) LIKE ? AND id in (?)\", \"%#{ params[:restaurant_name] }%\", \n       \"%#{params[:city_id]}%\", array).paginate(:page =&gt; params[:page], :per_page =&gt; 6)\n\nelse\n    @restaurants = Restaurant.where(\"restaurant_name LIKE ? AND cast(city_id as text) LIKE ?\", \"%#{params[:restaurant_name]}%\", \n       \"%#{params[:city_id]}%\").paginate(:page =&gt; params[:page], :per_page =&gt; 6)\nend\n</code></pre>\n"}], "owner": {"reputation": 137, "user_id": 5904789, "user_type": "registered", "accept_rate": 59, "profile_image": "https://graph.facebook.com/1021219957934862/picture?type=large", "display_name": "Guilherme Nazareth de Souza", "link": "https://stackoverflow.com/users/5904789/guilherme-nazareth-de-souza"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 422, "favorite_count": 1, "accepted_answer_id": 37175200, "answer_count": 2, "score": 0, "last_activity_date": 1463061732, "creation_date": 1462999364, "last_edit_date": 1495540361, "question_id": 37172904, "link": "https://stackoverflow.com/questions/37172904/rails-how-to-use-form-tag-to-search-has-many-through-associations", "title": "Rails - How to use form_tag to search has_many_through associations?", "body": "<p>I am creating a search tab where users can search restaurants with a certain type. I have 3 models: Restaurant, Type, and RestaurantType. Since one restaurant can have multiple types, I created a RestaurantType relations table.</p>\n\n<p><strong>How can I create such search tab?</strong></p>\n\n<p>The StackOverflow question I found closest to this was the following: <a href=\"https://stackoverflow.com/questions/19175084/activerecord-query-through-multiple-joins\">ActiveRecord query through multiple joins</a>, but it does not cover all I need. That said, I am still very new to Rails and maybe just need a more guided answer.</p>\n\n<p><strong>restaurant.rb</strong></p>\n\n<pre><code>has_many :types, :through =&gt; :restaurant_types\n</code></pre>\n\n<p><strong>type.rb</strong></p>\n\n<pre><code>has_many :restaurants, :through =&gt; :restaurant_types\n</code></pre>\n\n<p><strong>restaurant_type.rb</strong></p>\n\n<pre><code>belongs_to :restaurant\nbelongs_to :type\n</code></pre>\n\n<p><strong>restaurants_controller.rb (index action)</strong> (I'm also implementing search by name, which is an attribute of Restaurant)</p>\n\n<pre><code>@restaurants = Restaurant.joins(restaurant_type: :type).where \n    (\"cast(type_id as text) LIKE ?\", \"%#{params[:type]}%\")\n@restaurants = @restaurants.where(\"restaurant_name LIKE ?\", \n    \"%#{params[:restaurant_name]}%\").paginate(:page =&gt; params[:page], \n    :per_page =&gt; 8)\n</code></pre>\n\n<p><strong>restaurants/index.html.erb</strong> (only the search part)</p>\n\n<pre><code>&lt;%= form_tag(restaurants_path, :method =&gt; 'get') do %&gt;\n    &lt;%= text_field_tag :restaurants_name, params[:restaurants_name], :placeholder =&gt; \"Name\" %&gt;\n    &lt;%= select_tag :restaurant_type_id, options_for_select(Type.all.map{ |t| [t.type_name, t.id] }) %&gt;\n    &lt;%= submit_tag \"Search\" %&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p><strong>Notes:</strong></p>\n\n<ol>\n<li>I added the \"has_many ... :through => ...\" associations manually after the migrations, and don't know if they count in this case.</li>\n<li>I am getting the following error when I reach the index: <strong>\"Association named 'restaurant_type' was not found on Restaurant\"</strong>, which refers to the third line in my index page.</li>\n</ol>\n\n<p>-</p>\n\n<h2><strong>LOOKS NASTY, BUT SOLVED IT</strong></h2>\n\n<p><strong>restaurants_controller.rb</strong></p>\n\n<pre><code>def index\n\n    @types = RestaurantType.where(\"type_id LIKE ?\", \"%#{params[:type_id]}%\")\n    array = []\n    @types.each do |t|\n        @restaurant = Restaurant.find(t.restaurant_id)\n        array.push(@restaurant)\n    end\n    @restaurant = WillPaginate::Collection.create(1, 6, array.length) do |pager|\n      pager.replace array\n    end\nend\n</code></pre>\n\n<p><strong>restaurants/index.html.erb (part of the form_tag)</strong></p>\n\n<pre><code>&lt;%= select_tag :type_id, options_for_select(Type.all.map{ |t| [t.type_name, t.id] }) %&gt;\n</code></pre>\n\n<p>-</p>\n\n<h2><strong>ANOTHER EDIT -- WORKS BETTER AND TOGETHER WITH OTHER SEARCH PARAMETERS</strong></h2>\n\n<pre><code>if (params[:type_id].to_f &gt; 0)\n    array = []\n    RestaurantType.where(\"type_id = #{ params[:type_id] } \").each do |t|\n        array.push(t.school_id)\n    end\n    @restaurants = Restaurant.where(\"restaurant_name LIKE ? AND cast(city_id as text) LIKE ? AND id in (?)\", \"%#{ params[:restaurant_name] }%\", \n       \"%#{params[:city_id]}%\", array).paginate(:page =&gt; params[:page], :per_page =&gt; 6)\n\nelse\n    @restaurants = Restaurant.where(\"restaurant_name LIKE ? AND cast(city_id as text) LIKE ?\", \"%#{params[:restaurant_name]}%\", \n       \"%#{params[:city_id]}%\").paginate(:page =&gt; params[:page], :per_page =&gt; 6)\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "inheritance"], "answers": [{"comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463009536, "post_id": 37173371, "comment_id": 61884425, "body": "I wish I could +2 this answer.  Awesomely clear explanation @FrederickCheung!"}, {"owner": {"reputation": 1962, "user_id": 1650668, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7hdzg.jpg?s=128&g=1", "display_name": "Shaun", "link": "https://stackoverflow.com/users/1650668/shaun"}, "edited": false, "score": 0, "creation_date": 1463056929, "post_id": 37173371, "comment_id": 61907116, "body": "That does make sense. Do you have any suggestions to work around this other than removing the <code>model</code> method that raises an error from the module? It&#39;s nice to have some kind of validation to make it clear when the module expects certain methods on the class that implements it."}, {"owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "edited": false, "score": 0, "creation_date": 1463057315, "post_id": 37173371, "comment_id": 61907429, "body": "You could use the self.included hook on the module to define the stub method only if that method doesn&#39;t already exist. A completely different take is to have some shared specs/tests (like ActiveModel::Lint) that validate that this class implements the interface it should."}], "tags": [], "owner": {"reputation": 79161, "user_id": 1064226, "user_type": "registered", "profile_image": "https://graph.facebook.com/36912842/picture?type=large", "display_name": "Frederick Cheung", "link": "https://stackoverflow.com/users/1064226/frederick-cheung"}, "is_accepted": false, "score": 3, "last_activity_date": 1463001084, "creation_date": 1463001084, "answer_id": 37173371, "question_id": 37172696, "link": "https://stackoverflow.com/questions/37172696/protected-method-not-inherited/37173371#37173371", "title": "Protected method not Inherited", "body": "<p>If you do</p>\n\n<pre><code>class Base\nend\n\nmodule Special\nend\n\nclass Derived &lt; Base\n  include Special\nend\n</code></pre>\n\n<p>Then <code>Derived.ancestors</code> is <code>[Derived, Special, Base, Object, Kernel, BasicObject]</code></p>\n\n<p>i.e. when looking for a method, ruby first looks in <code>Derived</code>, then the module <code>Special</code>, then <code>Base</code>. </p>\n\n<p>It's not that ruby can't find the <code>model</code> method in the parent controller class, it's that search order finds the version from the module first.</p>\n"}], "owner": {"reputation": 1962, "user_id": 1650668, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7hdzg.jpg?s=128&g=1", "display_name": "Shaun", "link": "https://stackoverflow.com/users/1650668/shaun"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 131, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463001084, "creation_date": 1462998562, "question_id": 37172696, "link": "https://stackoverflow.com/questions/37172696/protected-method-not-inherited", "title": "Protected method not Inherited", "body": "<p>I'm making a change to an API so the new version is being namespaced under an <code>Api::V2</code> module. The old API was just under the <code>API</code> namespace. I want to be able to inherit and overwrite some of the things from the old controller.</p>\n\n<p>It works fine if I do this:</p>\n\n<pre><code>module Api\n  module V2\n    class ResourcesController &lt; ::Api::ResourcesController \n      include Crud\n</code></pre>\n\n<p>The parent class, <code>::Api::ResourcesController</code> defines a <code>model</code> method, which is used here in the <code>options</code> method and also required by the <code>::Api::Crud</code> module.</p>\n\n<pre><code># app/controllers/resources_controller.rb\nprotected\n\n  def model\n    Resource\n  end\n\n# app/controllers/concerns/api/crud.rb\ndef model\n  raise \"Model must be defined\"\nend\n</code></pre>\n\n<p>However, the changes I need to make are in that <code>Crud</code> module, so I created a namespaced version of that module.</p>\n\n<pre><code># app/controllers/concerns/api/v2/crud.rb\nmodule Api\n  module V2\n    module Crud\n      include ::Api::Crud\n      include ::Api::V2::ReadOnly\n</code></pre>\n\n<p>So this new module is still using that <code>model</code> method that raises an error if it isn't defined, by including it from <code>::Api::Crud</code>. Now, when I try to use this new module in my controller:</p>\n\n<pre><code># app/controllers/api/vw/resources_controller.rb\nmodule Api\n  module V2\n    class ResourcesController &lt; ::Api::ResourcesController \n      include ::Api::Crud\n</code></pre>\n\n<p>I get the error, <code>Model must be defined</code>. Why is it not able to find the <code>model</code> method defined in my parent controller class?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "heroku"], "comments": [{"owner": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "edited": false, "score": 0, "creation_date": 1462998559, "post_id": 37172414, "comment_id": 61880008, "body": "Can you post the contents of your <code>bin&#47;rails</code> file and your <code>Procfile</code> (if you&#39;re using one)"}, {"owner": {"reputation": 21, "user_id": 4109996, "user_type": "registered", "profile_image": "https://graph.facebook.com/1236597237/picture?type=large", "display_name": "Soraya Siahpolo", "link": "https://stackoverflow.com/users/4109996/soraya-siahpolo"}, "reply_to_user": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "edited": false, "score": 0, "creation_date": 1462998889, "post_id": 37172414, "comment_id": 61880194, "body": "<code>#!&#47;usr&#47;bin&#47;env ruby.exe APP_PATH = File.expand_path(&#39;..&#47;..&#47;config&#47;application&#39;, __FILE__) require_relative &#39;..&#47;config&#47;boot&#39; require &#39;rails&#47;commands&#39;</code> @Josh that is my bin/rails Im not sure about Procfile"}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "edited": false, "score": 0, "creation_date": 1463008808, "post_id": 37172414, "comment_id": 61884217, "body": "can you give github link?"}], "answers": [{"tags": [], "owner": {"reputation": 7433, "user_id": 423384, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d00ee8458992eaf37c0562b306ff8ed7?s=128&d=identicon&r=PG", "display_name": "Josh", "link": "https://stackoverflow.com/users/423384/josh"}, "is_accepted": false, "score": 0, "last_activity_date": 1463012544, "creation_date": 1463012544, "answer_id": 37175299, "question_id": 37172414, "link": "https://stackoverflow.com/questions/37172414/heroku-error-process-exited-with-status-1/37175299#37175299", "title": "Heroku error Process exited with status 1", "body": "<p>If you don't have a <code>Procfile</code> then you should create one.  Here are instructions for Rails 4:\n<a href=\"https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server\" rel=\"nofollow\">https://devcenter.heroku.com/articles/deploying-rails-applications-with-the-puma-web-server</a></p>\n\n<p>As a quick fix, you could try changing <code>#!/usr/bin/env ruby.exe</code> to <code>#!/usr/bin/env ruby</code> in your <code>bin/rails</code> file.</p>\n"}], "owner": {"reputation": 21, "user_id": 4109996, "user_type": "registered", "profile_image": "https://graph.facebook.com/1236597237/picture?type=large", "display_name": "Soraya Siahpolo", "link": "https://stackoverflow.com/users/4109996/soraya-siahpolo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 3461, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463012544, "creation_date": 1462997535, "last_edit_date": 1462998083, "question_id": 37172414, "link": "https://stackoverflow.com/questions/37172414/heroku-error-process-exited-with-status-1", "title": "Heroku error Process exited with status 1", "body": "<p>I deployed a ruby on rails app on heroku and it crashes. Here is my log file:\nI've updated the gems file to include the Ruby version (2.2.4), on rails 4.</p>\n\n<pre><code>   11T19:31:46.127185+00:00 app[web.1]:     from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.962601+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:35:07.098308+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by [redacted]\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.962601+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:35:07.098308+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by [redacted]\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:07.098308+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by [redacted]\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.962601+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:35:07.098308+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by [redacted]\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.962601+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.962601+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:07.098308+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by [redacted]\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.962601+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:07.098308+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by [redacted]\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:35:07.098308+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by [redacted]\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.962601+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.962601+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127183+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:80:in `start'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.962601+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:07.098308+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by [redacted]\n2016-05-11T19:35:11.961290+00:00 heroku[run.8347]: Awaiting client\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:17.469662+00:00 heroku[run.8347]: Process exited with status 1\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:31:46.127185+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:39:in `run_command!'\n2016-05-11T19:31:46.127187+00:00 app[web.1]:    from bin/rails:4:in `require'\n2016-05-11T19:31:46.987348+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:35:07.098308+00:00 heroku[api]: Starting process with command `bundle exec rake db:migrate` by [redacted]\n2016-05-11T19:35:11.982176+00:00 heroku[run.8347]: Starting process with command `bundle exec rake db:migrate`\n2016-05-11T19:35:12.332274+00:00 heroku[run.8347]: State changed from starting to up\n2016-05-11T19:35:17.517913+00:00 heroku[run.8347]: State changed from up to complete\n2016-05-11T19:59:29.691880+00:00 heroku[web.1]: State changed from crashed to starting\n2016-05-11T19:59:34.073559+00:00 heroku[web.1]: Starting process with command `bin/rails server -p 32508 -e production`\n2016-05-11T19:59:41.057819+00:00 app[web.1]: =&gt; Booting WEBrick\n2016-05-11T19:59:41.057841+00:00 app[web.1]: =&gt; Rails 4.2.5.1 application starting in production on http://0.0.0.0:32508\n2016-05-11T19:59:41.057882+00:00 app[web.1]:    from /app/app/controllers/users/registrations_controller.rb:1:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057891+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in `require'\n2016-05-11T19:59:41.057895+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:233:in `require_dependency'\n2016-05-11T19:59:41.057896+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/engine.rb:471:in `each'\n2016-05-11T19:59:41.057903+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/engine.rb:471:in `block in eager_load!'\n2016-05-11T19:59:41.057904+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/engine.rb:469:in `each'\n2016-05-11T19:59:41.057905+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/engine.rb:469:in `eager_load!'\n2016-05-11T19:59:41.057906+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/application/finisher.rb:56:in `each'\n2016-05-11T19:59:41.057914+00:00 app[web.1]:    from /app/vendor/ruby-2.2.4/lib/ruby/2.2.0/tsort.rb:345:in `call'\n2016-05-11T19:59:41.057914+00:00 app[web.1]:    from /app/vendor/ruby-2.2.4/lib/ruby/2.2.0/tsort.rb:345:in `each_strongly_connected_component'\n2016-05-11T19:59:41.057915+00:00 app[web.1]:    from /app/vendor/ruby-2.2.4/lib/ruby/2.2.0/tsort.rb:224:in `tsort_each'\n2016-05-11T19:59:41.057919+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:240:in `load_dependency'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/config.ru:in `new'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:42.445254+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057940+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `server'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/config.ru:in `new'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:61:in `app'\n2016-05-11T19:59:41.057928+00:00 app[web.1]:    from /app/config.ru:3:in `block in &lt;main&gt;'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057940+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `server'\n2016-05-11T19:59:41.057939+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/config.ru:in `new'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:42.445254+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:61:in `app'\n2016-05-11T19:59:41.057940+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `server'\n2016-05-11T19:59:41.057939+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/config.ru:in `new'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:42.445254+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:61:in `app'\n2016-05-11T19:59:41.057928+00:00 app[web.1]:    from /app/config.ru:3:in `block in &lt;main&gt;'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/config.ru:in `new'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:61:in `app'\n2016-05-11T19:59:41.057928+00:00 app[web.1]:    from /app/config.ru:3:in `block in &lt;main&gt;'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057918+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in `require'\n2016-05-11T19:59:41.057939+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/config.ru:in `new'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:42.445254+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:61:in `app'\n2016-05-11T19:59:41.057928+00:00 app[web.1]:    from /app/config.ru:3:in `block in &lt;main&gt;'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057918+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in `require'\n2016-05-11T19:59:41.057939+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:61:in `app'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057940+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `server'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:42.445254+00:00 heroku[web.1]: State changed from starting to crashed\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:61:in `app'\n2016-05-11T19:59:41.057928+00:00 app[web.1]:    from /app/config.ru:3:in `block in &lt;main&gt;'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057918+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in `require'\n2016-05-11T19:59:41.057939+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/config.ru:in `new'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057939+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/config.ru:in `new'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/server.rb:61:in `app'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057939+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057918+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in `require'\n2016-05-11T19:59:41.057937+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/server.rb:336:in `wrapped_app'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:41.057928+00:00 app[web.1]:    from /app/config.ru:3:in `block in &lt;main&gt;'\n2016-05-11T19:59:41.057930+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/rack-1.6.4/lib/rack/builder.rb:55:in `initialize'\n2016-05-11T19:59:41.057918+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/activesupport-4.2.5.1/lib/active_support/dependencies.rb:274:in `require'\n2016-05-11T19:59:41.057939+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands/commands_tasks.rb:75:in `tap'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n2016-05-11T19:59:41.057941+00:00 app[web.1]:    from /app/vendor/bundle/ruby/2.2.0/gems/railties-4.2.5.1/lib/rails/commands.rb:17:in `&lt;top (required)&gt;'\n2016-05-11T19:59:42.428116+00:00 heroku[web.1]: Process exited with status 1\n</code></pre>\n\n<p>I think the problem is with some gems but I cant figure out which one. Thank you very much for your help</p>\n"}, {"tags": ["ruby", "activerecord", "encryption"], "comments": [{"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1462998547, "post_id": 37172333, "comment_id": 61880004, "body": "An aside: For user passwords used for authentication to your own system, you would not normally use encryption but secure hashing. You <i>might</i> use encryption if the password was a secret used for access to some other external resource. It is not clear what your use case is here?"}, {"owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1462998642, "post_id": 37172333, "comment_id": 61880052, "body": "Thanks for response Neil, this class is used for automation purposes, I need password in order to log into web application"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1462999486, "post_id": 37172333, "comment_id": 61880502, "body": "The <code>AES_DECRYPT(Pass, &#39;kkk&#39;)</code> is MySQL function documented here: <a href=\"http://dev.mysql.com/doc/refman/5.7/en/encryption-functions.html#function_aes-encrypt\" rel=\"nofollow noreferrer\">dev.mysql.com/doc/refman/5.7/en/&hellip;</a> ? If so, the answer appears to be to add some padding up to block size."}, {"owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "reply_to_user": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1462999537, "post_id": 37172333, "comment_id": 61880530, "body": "I know, is there any ways to decrypt unencrypted data retrieved from pass column?"}, {"owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "edited": false, "score": 0, "creation_date": 1462999734, "post_id": 37172333, "comment_id": 61880630, "body": "Yes I think there is, but it would take some experiments with correct padding and variant of AES to get it right. I don&#39;t have MySQL set up, so need to leave answer for someone else."}], "answers": [{"comments": [{"owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "edited": false, "score": 0, "creation_date": 1463007966, "post_id": 37174424, "comment_id": 61883986, "body": "Thank you! Great answer!"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 1, "last_activity_date": 1463006267, "creation_date": 1463006267, "answer_id": 37174424, "question_id": 37172333, "link": "https://stackoverflow.com/questions/37172333/aes-decryption-in-ruby-and-activerecord/37174424#37174424", "title": "AES Decryption in ruby and activerecord", "body": "<p>In a situation like this, you might be better off converting the field values entirely.  This could be done in a migration and once it's done, you never have to be concerned about how MySQL has stored the data.  It's also one step toward database independence.</p>\n\n<p>So, the migration would basically do 3 things:</p>\n\n<ul>\n<li>add a flag column to track which records have been converted</li>\n<li>iterate over each records, converting the encrypted value and setting the flag</li>\n<li>remove the flag column once all records have been processed</li>\n</ul>\n\n<p>The migration might look like this:</p>\n\n<pre><code>class ConvertMySqlEncryptedData &lt; ActiveRecord::Migration\n  # Local proxy class to prevent interaction issues with the real User class\n  class User &lt; ActiveRecord::Base\n  end\n\n  def up\n    # Check to see if the flag has already been created (indicates that migration may have failed midway through)\n    unless column_exists?(:users, :encrypted_field_converted)\n      # Add the flag field to the table\n      change_table :users do |t|\n        t.boolean :encrypted_field_converted, null: false, default: false\n      end\n    end\n\n    # Add an index to make the update step go much more quickly\n    add_index :users, :encrypted_field_converted, unique: false\n\n    # Make sure that ActiveRecord can see the new column\n    User.reset_column_information\n\n    # Setup for AES 256 bit cipher-block chaining symetric encryption\n    alg = \"AES-256-CBC\"\n    digest = Digest::SHA256.new\n    digest.update(\"symetric key\")\n    key = digest.digest\n    iv = OpenSSL::Cipher::Cipher.new(alg).random_iv\n    key64 = Base64.encode(key)\n\n    # Don't update timestamps\n    ActiveRecord::Base.record_timestamps = false\n    begin\n      # Cycle through the users that haven't yet been updated\n      User.where(encrypted_field_converted: false).pluck(\"CAST(AES_DECRYPT(Pass, 'kkk') AS CHAR(50)) Pass\").each do |user|\n        # Re-encode the password with OpenSSL AES, based on the setup above\n        new_pass = aes.update(user.pass).final\n\n        # Update the password on the row, and set the flag to indicate that conversion has occurred\n        user.update_attributes(pass: new_pass, encrypted_field_converted: true)\n      end\n    ensure\n      # Reset timestamp recording\n      ActiveRecord::Base.record_timestamps = true\n    end\n  end\n\n  def down\n    # To undo or not undo, that is the question...\n  end\nend\n</code></pre>\n\n<p>This was off the top of my head, so there may be issues with the encryption.  Structure-wise, it should be in good shape, and it takes into account a number of things:</p>\n\n<ul>\n<li>Provides incremental database processing by using a flag to indicate progress</li>\n<li>Uses an index on the flag field to improve query performance, particularly if multiple runs are required to complete processing</li>\n<li>Avoids updating the <code>updated_at</code> column to prevent overwriting prior values that may be useful to keep (this is not a material change, so <code>updated_at</code> doesn't require updating)</li>\n<li>Plucks only the <code>pass</code> field, so that transfer overhead is minimized</li>\n</ul>\n\n<p>Now, you can query <code>pass</code> and encrypt/decrypt as needed by the application.  You can document and support the field at the application level, rather than rely on the database implementation.</p>\n\n<p>I spent a few years consulting and doing database conversion, either from one database product to another, or as part of a significant version upgrade.  It also allows development to use lighter-weight databases (e.g. SQLite) or test viability with other products when upscaling is needed.  Avoiding database-specific features, like the MySQL encryption, will save you (or your employer) a LOT of money and hassle in the long run.  Database independence is your friend; embrace it and use what ActiveRecord provides to you.</p>\n"}], "owner": {"reputation": 1049, "user_id": 4635750, "user_type": "registered", "accept_rate": 49, "profile_image": "https://graph.facebook.com/847597188612174/picture?type=large", "display_name": "Nodir Nasirov", "link": "https://stackoverflow.com/users/4635750/nodir-nasirov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 434, "favorite_count": 0, "accepted_answer_id": 37174424, "answer_count": 1, "score": 2, "last_activity_date": 1463014054, "creation_date": 1462997251, "last_edit_date": 1463014054, "question_id": 37172333, "link": "https://stackoverflow.com/questions/37172333/aes-decryption-in-ruby-and-activerecord", "title": "AES Decryption in ruby and activerecord", "body": "<p>I have super ugly code that looks like this:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n   self.table_name = 'users'\n  def get_password\n    @test_password = User.find_by_sql \"SELECT CAST(AES_DECRYPT(Pass, 'kkk') AS CHAR(50)) Pass From prod.sys_users Where Owner = '\"+@owner+\"' AND User = '\"+@user+\"'\"\n    @test_password[0].Pass\n  end\nend\n</code></pre>\n\n<p>This code works, but it makes me sick, since it is not written according to Ruby Coding Style. So I decided to fix this code, and here what I have so far:</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  self.table_name = 'users'\n  def get_pass\n    User.where(Owner: @owner, User: @user).pluck(:Pass).first\n  end\nend\n</code></pre>\n\n<p>So, I am getting encrypted password, how can I decrypt it?\nI tired <code>OpenSSL</code>, but key <code>'kkk'</code> here is too short.\nHow can I resolve this issue? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "code-coverage", "simplecov"], "comments": [{"owner": {"reputation": 324, "user_id": 978414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d383b96e7b52fc6d0592d0d9baecda?s=128&d=identicon&r=PG", "display_name": "ivann", "link": "https://stackoverflow.com/users/978414/ivann"}, "edited": false, "score": 0, "creation_date": 1462996900, "post_id": 37172102, "comment_id": 61879129, "body": "You mean overhead during test right ?"}], "answers": [{"comments": [{"owner": {"reputation": 485, "user_id": 5221361, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1ed56bd4393f501d4b691424cc689a75?s=128&d=identicon&r=PG&f=1", "display_name": "Gakho", "link": "https://stackoverflow.com/users/5221361/gakho"}, "edited": false, "score": 0, "creation_date": 1462997260, "post_id": 37172311, "comment_id": 61879320, "body": "That&#39;s similar to what I get. Just wondering if someone had a negative experience"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": false, "score": 1, "last_activity_date": 1462997331, "last_edit_date": 1462997331, "creation_date": 1462997162, "answer_id": 37172311, "question_id": 37172102, "link": "https://stackoverflow.com/questions/37172102/simplecov-overhead-in-rails/37172311#37172311", "title": "SimpleCov overhead in Rails", "body": "<p>I've used simplecov on multiple projects and have never noticed a significant slowdown.</p>\n\n<p>The project in front of me uses Ruby 2.3.1 and simplecov 0.11.2. I'm on an old laptop with recent Mac OS X. The test suite has 1168 RSpec examples, 31 Cucumber scenarios and a handful of Jasmine tests (which simplecov doesn't see).</p>\n\n<p>Test suite runtime with simplecov:</p>\n\n<pre><code>&gt; time bin/rake RAILS_ENV=test\n41.456u 5.429s 1:07.83 69.0%    0+0k 55+259io 137pf+0w\n</code></pre>\n\n<p>Test suite runtime without simplecov (<code>require 'simplecov'</code> commented out):</p>\n\n<pre><code>39.833u 5.626s 1:18.22 58.1%    0+0k 104+88io 204pf+0w\n</code></pre>\n\n<p>About 1.5 seconds' difference. Well worth it given the value of coverage results.</p>\n"}], "owner": {"reputation": 485, "user_id": 5221361, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/1ed56bd4393f501d4b691424cc689a75?s=128&d=identicon&r=PG&f=1", "display_name": "Gakho", "link": "https://stackoverflow.com/users/5221361/gakho"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 75, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462997331, "creation_date": 1462996438, "last_edit_date": 1462997219, "question_id": 37172102, "link": "https://stackoverflow.com/questions/37172102/simplecov-overhead-in-rails", "title": "SimpleCov overhead in Rails", "body": "<p>I was wondering what the overhead for simplecov is on Rails. It doesn't seem too heavy. I'm wondering if other people have negative experiences.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "haml"], "answers": [{"comments": [{"owner": {"reputation": 3111, "user_id": 1356836, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dAzrF.png?s=128&g=1", "display_name": "Emil A.", "link": "https://stackoverflow.com/users/1356836/emil-a"}, "edited": false, "score": 0, "creation_date": 1462998205, "post_id": 37172513, "comment_id": 61879800, "body": "thanks, however I&#39;d like to place the :content_for(:sticky_footer) inside of the views where it is used, and their content is placed above the body tag, any other ideas?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 3111, "user_id": 1356836, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dAzrF.png?s=128&g=1", "display_name": "Emil A.", "link": "https://stackoverflow.com/users/1356836/emil-a"}, "edited": false, "score": 0, "creation_date": 1463002340, "post_id": 37172513, "comment_id": 61881927, "body": "Just to be clear, where it&#39;s used and where it&#39;s defined don&#39;t have to be the same place.  You can define above the body tag, you can use wherever you want (as long as it&#39;s before where defined).  And it has to be defined before you test <code>content_for?</code>"}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 0, "last_activity_date": 1462997882, "creation_date": 1462997882, "answer_id": 37172513, "question_id": 37172047, "link": "https://stackoverflow.com/questions/37172047/ruby-on-rails-add-class-to-body-only-if-content-forpartial-is-true/37172513#37172513", "title": "Ruby on Rails - add class to body only if content_for?(:partial) is true", "body": "<blockquote>\n  <p>However this seems to evaluate to false even if the content_for is\n  defined later in code.</p>\n</blockquote>\n\n<p>That's right.  At the time of the test <code>content_for?</code> it hasn't been defined, so the value is false.</p>\n\n<p>Do the definition first... before the body line</p>\n\n<pre><code>-content_for :sticky_footer do\n  # define the content here\n</code></pre>\n\n<p>Then insert the class for the body</p>\n\n<p>later in the code you can yield the content_for</p>\n\n<pre><code>=content_for :sticky_footer\n# or\n=yield :sticky_footer\n</code></pre>\n"}], "owner": {"reputation": 3111, "user_id": 1356836, "user_type": "registered", "accept_rate": 68, "profile_image": "https://i.stack.imgur.com/dAzrF.png?s=128&g=1", "display_name": "Emil A.", "link": "https://stackoverflow.com/users/1356836/emil-a"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 569, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462997882, "creation_date": 1462996215, "question_id": 37172047, "link": "https://stackoverflow.com/questions/37172047/ruby-on-rails-add-class-to-body-only-if-content-forpartial-is-true", "title": "Ruby on Rails - add class to body only if content_for?(:partial) is true", "body": "<p>I have a <code>:sticky_footer</code> region in my application.html.haml file:</p>\n\n<pre><code>= yield :sticky_footer\n</code></pre>\n\n<p>I'd like to add a <code>has-sticky-footer</code> class to the body node if the sticky_footer region has content inside.</p>\n\n<p>I tried doing:</p>\n\n<pre><code>body{class: content_for?(:sticky_footer) ? \"has-sticky-footer\" : \"no-sticky-footer\"}\n</code></pre>\n\n<p>However this seems to evaluate to false even if the content_for is defined later in code.</p>\n\n<p>What other options do I have?</p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462993564, "post_id": 37171235, "comment_id": 61877295, "body": "Note: Omit argument lists with nothing in them, so <code>def initialize</code> without <code>()</code>, and try to name things like <code>StoreData</code> instead of <code>Store_data</code>."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": false, "score": 3, "last_activity_date": 1462993530, "creation_date": 1462993530, "answer_id": 37171309, "question_id": 37171235, "link": "https://stackoverflow.com/questions/37171235/regarding-attr-accessor-and-def-initialize/37171309#37171309", "title": "Regarding attr_accessor and def initialize", "body": "<p>In this case you're initializing the <code>@school_name</code> with an empty array. If you don't do that it doesn't automatically create it, but it could. That pattern's called <em>lazy initialization</em>:</p>\n\n<pre><code>class StoreData\n  def school_name\n    @school_name ||= [ ]\n  end\nend\n\ns = StoreData.new\ns.school_name &lt;&lt; \"Name 1\"\ns.school_name &lt;&lt; \"Name 2\"\ns.school_name\n#=&gt; [ \"Name 1\", \"Name 2\" ]\n</code></pre>\n\n<p>You can't assign something to a <code>nil</code> value which is what instance variables are by default.</p>\n\n<p>This one creates an array if necessary using the <code>||=</code> operator.</p>\n"}, {"comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 0, "creation_date": 1463014382, "post_id": 37171610, "comment_id": 61885629, "body": "Regarding &quot;<code>attr_accessor</code> is just an attribute&quot;, isn&#39;t it a method?"}], "tags": [], "owner": {"reputation": 1886, "user_id": 1138557, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/c35c06fc5605d4d1e73e17dd8113426f?s=128&d=identicon&r=PG&f=1", "display_name": "Thorin", "link": "https://stackoverflow.com/users/1138557/thorin"}, "is_accepted": true, "score": 2, "last_activity_date": 1462997099, "last_edit_date": 1462997099, "creation_date": 1462994563, "answer_id": 37171610, "question_id": 37171235, "link": "https://stackoverflow.com/questions/37171235/regarding-attr-accessor-and-def-initialize/37171610#37171610", "title": "Regarding attr_accessor and def initialize", "body": "<p>attr_accessor is just an attribute and by default it is nil. You cannot assign any value to it. If you need it to an array then initialize it as an array before using it. </p>\n"}], "owner": {"reputation": 59, "user_id": 6253410, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/605c0c25c93c7d481ff52c3975ac088c?s=128&d=identicon&r=PG&f=1", "display_name": "new user20", "link": "https://stackoverflow.com/users/6253410/new-user20"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 351, "favorite_count": 1, "accepted_answer_id": 37171610, "answer_count": 2, "score": 1, "last_activity_date": 1463034072, "creation_date": 1462993290, "last_edit_date": 1463034072, "question_id": 37171235, "link": "https://stackoverflow.com/questions/37171235/regarding-attr-accessor-and-def-initialize", "title": "Regarding attr_accessor and def initialize", "body": "<p>I want to add school names to array using attr_accessor.</p>\n\n<p>My question is what 'def initialize()' is doing in this case</p>\n\n<p>so that I can store data by using</p>\n\n<p>v1.school_name[0] = \"myschoolname\"</p>\n\n<p>If I omit the  initialize() function I get the error</p>\n\n<pre><code>class StoreData\n\n   attr_accessor :school_name\n   def initialize\n      @school_name = []\n   end\nend\n\n\nv1 = Store_data.new \nv1.school_name[0] = \"myschoolname\"\nprint v1.school_name[0] \nv1.school_name[1] = \"myschoolnamehighschool\"\nprint v1.school_name\n</code></pre>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1462997656, "post_id": 37171207, "comment_id": 61879501, "body": "The first error is because your <code>.gemrc</code> isn&#39;t valid YAML (or doesn&#39;t contain a YAML hash), just like it says."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1463006362, "post_id": 37171207, "comment_id": 61883514, "body": "Please include all information in your question which will enable people to provide an answer. What is the contents of <code>&#47;users&#47;.gemrc</code>? What is the contents of <code>...&#47;pkg&#47;.gem</code>? What command(s) are you running when the error occurs? What is the contents of your <code>gemspec</code>? It&#39;s better to provide too much information than too little."}, {"owner": {"reputation": 65, "user_id": 6207477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JGdc6.png?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/6207477/aaron"}, "edited": false, "score": 0, "creation_date": 1463024409, "post_id": 37171207, "comment_id": 61888099, "body": "I was running the command rake release, but I just removed the .gemrc file and it worked. Not sure if that was a wise choice and I also update my ruby version to 2.2.3 as well."}], "answers": [{"tags": [], "owner": {"reputation": 2446, "user_id": 552320, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/5d3f7d8e534a892e3029a3f3b9761de5?s=128&d=identicon&r=PG", "display_name": "Joel AZEMAR", "link": "https://stackoverflow.com/users/552320/joel-azemar"}, "is_accepted": false, "score": 4, "last_activity_date": 1470929905, "creation_date": 1470929905, "answer_id": 38900749, "question_id": 37171207, "link": "https://stackoverflow.com/questions/37171207/too-many-gem-names/38900749#38900749", "title": "Too many gem names", "body": "<p>I've the same error without any <code>.gemrc</code> but I removed those lines from <code>&lt;my_gem&gt;.gemspec</code></p>\n\n<pre><code>  # Prevent pushing this gem to RubyGems.org. To allow pushes either set the 'allowed_push_host'\n  # to allow pushing to a single host or delete this section to allow pushing to any host.\n  if spec.respond_to?(:metadata)\n    spec.metadata['allowed_push_host'] = \"TODO: Set to 'http://mygemserver.com'\"\n  else\n    raise \"RubyGems 2.0 or newer is required to protect against public gem pushes.\"\n  end\n</code></pre>\n\n<p>And it's works </p>\n\n<p><a href=\"https://github.com/FinalCAD/overlap/commit/e7a8724d1126f96bfdd4675be781c1fbe86b0eda\" rel=\"nofollow\">see this commit</a></p>\n"}, {"tags": [], "owner": {"reputation": 131, "user_id": 9824599, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/LKxRx.jpg?s=128&g=1", "display_name": "boyd", "link": "https://stackoverflow.com/users/9824599/boyd"}, "is_accepted": false, "score": 1, "last_activity_date": 1531432963, "creation_date": 1531432963, "answer_id": 51315106, "question_id": 37171207, "link": "https://stackoverflow.com/questions/37171207/too-many-gem-names/51315106#51315106", "title": "Too many gem names", "body": "<p>I'm a bit late, but maybe this will help someone else. I had the same error and the following change in my <code>.gemspec</code> file worked for me. Just needed to specify the push host, since <code>rake release</code> is preparing our gem before pushing it (and that second part would be hard without a push location specified). </p>\n\n<pre><code>if spec.respond_to?(:metadata)\n  spec.metadata[\"allowed_push_host\"] = 'https://rubygems.org'\nelse\n  raise \"RubyGems 2.0 or newer is required to protect against public gem pushes.\"\nend\n</code></pre>\n"}], "owner": {"reputation": 65, "user_id": 6207477, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/JGdc6.png?s=128&g=1", "display_name": "Aaron", "link": "https://stackoverflow.com/users/6207477/aaron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 929, "favorite_count": 2, "answer_count": 2, "score": 4, "last_activity_date": 1531432963, "creation_date": 1462993198, "last_edit_date": 1592644375, "question_id": 37171207, "link": "https://stackoverflow.com/questions/37171207/too-many-gem-names", "title": "Too many gem names", "body": "<p>I'm trying to publish my gem. Looks like I'm having two errors.</p>\n<blockquote>\n<p>Failed to load /Users//.gemrc because it doesn't contain valid YAML hash</p>\n<p>ERROR:  While executing gem ... (Gem::CommandLineError)</p>\n<p>Too many gem names (/Users//Documents/Projects/Gems/Pirateme/pkg/.gem, Set, to, <a href=\"http://mygemserver.com\" rel=\"nofollow noreferrer\">http://mygemserver.com</a>); please specify only one</p>\n</blockquote>\n<p>Anyone can shine some light to it? Not sure, I restarted the gem a few times.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462992362, "post_id": 37170791, "comment_id": 61876598, "body": "It&#39;s unclear: are you having an issue with the condition logic of the uncommented <code>if</code> (and the commented <code>if</code> worked correctly) OR are you having a problem with exiting the loop?"}, {"owner": {"reputation": 2315, "user_id": 5129663, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8P0ivhj4wM/AAAAAAAAAAI/AAAAAAAAAAo/7JsXqgRUH8w/photo.jpg?sz=128", "display_name": "Amol Udage", "link": "https://stackoverflow.com/users/5129663/amol-udage"}, "edited": false, "score": 0, "creation_date": 1462992591, "post_id": 37170791, "comment_id": 61876733, "body": "you can write <code>return</code> statement in <code>if</code> condition, so it return from loop and gives you <code>@missing</code> as output."}, {"owner": {"reputation": 82, "user_id": 4592971, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16be2e4fae1717c5e4f5795bce4c4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Idriss", "link": "https://stackoverflow.com/users/4592971/idriss"}, "edited": false, "score": 0, "creation_date": 1462992882, "post_id": 37170791, "comment_id": 61876906, "body": "Sorry; the problem i am having is that this code is not getting executed <code>nih.match = true nih.save!</code>. if i use the commented if statement, everything works."}, {"owner": {"reputation": 82, "user_id": 4592971, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16be2e4fae1717c5e4f5795bce4c4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Idriss", "link": "https://stackoverflow.com/users/4592971/idriss"}, "edited": false, "score": 0, "creation_date": 1462993094, "post_id": 37170791, "comment_id": 61877035, "body": "Thank everyone, it finally worked after I changed the if statement to this:<code>if nih.pubyear == &quot;#{pubmed.publication_year}&quot; and  nih.pmid == &quot;#{pubmed.pubmed_id}&quot;            #if nih.pubyear == &quot;2003&quot; and  nih.pmid == &quot;12538806&quot;               nih.match = true               nih.save!             end</code>"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1462993205, "post_id": 37170791, "comment_id": 61877096, "body": "Sounds like you&#39;ll accept @ChrisPeters answer, then.  :D"}, {"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1462993466, "post_id": 37170791, "comment_id": 61877243, "body": "@Idriss Try this instead: <code>if nih.pubyear == pubmed.publication_year.to_s and nih.pmid == pubmed.pubmed_id.to_s</code>"}, {"owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "edited": false, "score": 0, "creation_date": 1462993609, "post_id": 37170791, "comment_id": 61877317, "body": "@Idriss Or ahh, I see you&#39;re using <code>to_i</code> instead based on your comment on my answer. Hopefully you&#39;re more aware of the awesomeness of <code>to_i</code> and <code>to_s</code> by playing around with this a little. :)"}, {"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1463008022, "post_id": 37170791, "comment_id": 61884001, "body": "by the way you dont need to call .all method after .where. <code>NihPublication.where(user: current_user)</code> would work just fine"}], "answers": [{"comments": [{"owner": {"reputation": 82, "user_id": 4592971, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16be2e4fae1717c5e4f5795bce4c4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Idriss", "link": "https://stackoverflow.com/users/4592971/idriss"}, "edited": false, "score": 0, "creation_date": 1462993514, "post_id": 37171080, "comment_id": 61877269, "body": "Thank you! Now i am using <code>.to_i</code> instead of <code>&quot;#{}&quot;</code>"}], "tags": [], "owner": {"reputation": 17065, "user_id": 175981, "user_type": "registered", "accept_rate": 95, "profile_image": "https://www.gravatar.com/avatar/b357ab54946a2be4d19c8a9aab2a09d6?s=128&d=identicon&r=PG", "display_name": "Chris Peters", "link": "https://stackoverflow.com/users/175981/chris-peters"}, "is_accepted": true, "score": 1, "last_activity_date": 1462993026, "last_edit_date": 1462993026, "creation_date": 1462992724, "answer_id": 37171080, "question_id": 37170791, "link": "https://stackoverflow.com/questions/37170791/rails-change-boolean-value-within-a-loop/37171080#37171080", "title": "rails change boolean value within a loop", "body": "<p>This is likely a data type issue. You can compare data types in your console like this:</p>\n\n<pre><code>def compare\n  nih_pub = NihPublication.where(user: current_user).all\n  pubmed_pub = Publication.where(user: current_user).all\n\n  nih_pub.each{ |nih|\n    pubmed_pub.each { |pubmed|\n      puts \"nih.pubyear #{nih.pubyear.class.name}\" \n      puts \"pubmed.publication_year #{pubmed.publication_year.class.name}\"\n      puts \"nih.pmid #{nih.pmid.class.name}\"\n      puts \"pubmed.pubmed_id #{pubmed.pubmed_id.class.name}\"\n\n      if nih.pubyear == pubmed.publication_year and nih.pmid == pubmed.pubmed_id\n      # if nih.pubyear == \"2003\" and  nih.pmid == \"12538806\"\n        nih.match = true\n        nih.save!\n      end\n    }\n  }\n\n  @missing = nih_pub.where(match: false)\nend\n</code></pre>\n\n<p>If you see something like this:</p>\n\n<pre><code>nih.pubyear Integer\npubmed.publication_year String\nnih.pmid Integer\npubmed.pubmed_id String\n</code></pre>\n\n<p>Then you know that you'll need to cast values when comparing them.</p>\n\n<p>I suspect that you'll need to change your code to something like this (though this is only a guess and is based on the debug output I have listed above):</p>\n\n<pre><code>def compare\n  nih_pub = NihPublication.where(user: current_user).all\n  pubmed_pub = Publication.where(user: current_user).all\n\n  nih_pub.each{ |nih|\n    pubmed_pub.each { |pubmed|\n      # Cast those strings to integers so you're comparing apples to apples.\n      if nih.pubyear == pubmed.publication_year.to_i and nih.pmid == pubmed.pubmed_id.to_i\n        nih.match = true\n        nih.save!\n      end\n    }\n  }\n\n  @missing = nih_pub.where(match: false)\nend\n</code></pre>\n"}], "owner": {"reputation": 82, "user_id": 4592971, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/c16be2e4fae1717c5e4f5795bce4c4ad?s=128&d=identicon&r=PG&f=1", "display_name": "Idriss", "link": "https://stackoverflow.com/users/4592971/idriss"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 243, "favorite_count": 0, "accepted_answer_id": 37171080, "answer_count": 1, "score": 0, "last_activity_date": 1462993026, "creation_date": 1462991757, "last_edit_date": 1462992388, "question_id": 37170791, "link": "https://stackoverflow.com/questions/37170791/rails-change-boolean-value-within-a-loop", "title": "rails change boolean value within a loop", "body": "<p>Hi everyone I need help with this method:\nI have a method that loops trough two models' data and compare them; if a match is found, I want to set the <strong>nih_pub</strong> match attribute to true then return all nih_pub that have match as false.\nit woks well if I use the commented if statement <code>if nih.pubyear == \"2003\" and  nih.pmid == \"12538806\"</code>, but it is not working with the looping.</p>\n\n<p>below is the method i am using:</p>\n\n<pre><code>def compare\n  nih_pub = NihPublication.where(user: current_user).all\n  pubmed_pub = Publication.where(user: current_user).all\n\n  nih_pub.each{ |nih|\n    pubmed_pub.each {|pubmed|\n      if nih.pubyear == pubmed.publication_year and  nih.pmid == pubmed.pubmed_id\n      # if nih.pubyear == \"2003\" and  nih.pmid == \"12538806\"\n        nih.match = true\n        nih.save!\n      end\n    }\n  }\n\n  @missing = nih_pub.where(match: false)\nend\n</code></pre>\n\n<p>Thank for your help</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "code-coverage", "coveralls"], "comments": [{"owner": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1462992326, "post_id": 37170770, "comment_id": 61876582, "body": "If you have classes that don&#39;t have specs, you aren&#39;t doing <a href=\"https://stackoverflow.com/questions/tagged/tdd\">tdd</a>."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1462992740, "post_id": 37170770, "comment_id": 61876819, "body": "Is your CI build parallelized?"}, {"owner": {"reputation": 1835, "user_id": 2432586, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702ff02114c19ee71758c0ba2cdc0e41?s=128&d=identicon&r=PG", "display_name": "Donovan Thomson", "link": "https://stackoverflow.com/users/2432586/donovan-thomson"}, "reply_to_user": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1463000671, "post_id": 37170770, "comment_id": 61881094, "body": "@DaveSchweisguth our tests are parallelized"}, {"owner": {"reputation": 1835, "user_id": 2432586, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702ff02114c19ee71758c0ba2cdc0e41?s=128&d=identicon&r=PG", "display_name": "Donovan Thomson", "link": "https://stackoverflow.com/users/2432586/donovan-thomson"}, "reply_to_user": {"reputation": 98400, "user_id": 3001761, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/feZwC.jpg?s=128&g=1", "display_name": "jonrsharpe", "link": "https://stackoverflow.com/users/3001761/jonrsharpe"}, "edited": false, "score": 0, "creation_date": 1463000934, "post_id": 37170770, "comment_id": 61881246, "body": "@jonrsharpe We are a start up. Things were bootstrapped initially, very few startups have the luxury of following TDD. I personally live by TDD but was not around in the very early days"}], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 2, "last_activity_date": 1463002712, "last_edit_date": 1495540361, "creation_date": 1463002712, "answer_id": 37173723, "question_id": 37170770, "link": "https://stackoverflow.com/questions/37170770/coveralls-code-coverage-in-rails-is-misleading/37173723#37173723", "title": "Coveralls code coverage in Rails is misleading", "body": "<p>I've seen two reasons why coverage statistics are unreliable in Coveralls (and the similar service Codecov):</p>\n\n<ul>\n<li><p>When last I used it, Coveralls had to be told that a test suite was parallelized. If given no warning, Coveralls would display partial results. To avoid this, you can tell Coveralls that your parallelized test suite has completed. See <a href=\"https://coveralls.zendesk.com/hc/en-us/articles/203484329-Parallel-Build-Webhook\" rel=\"nofollow noreferrer\">the docs</a> for details, but, briefly:</p>\n\n<ul>\n<li>set the environment variable <code>COVERALLS_PARALLEL=true</code> on your CI server</li>\n<li>POST <code>{ \"payload\": { \"build_num\": 1234, \"status\": \"done\" } }</code> to <code>https://coveralls.io/webhook?repo_token=(your repo token)</code> at the end of your build. (Some hosted CI services figure out the payload automatically.)</li>\n</ul></li>\n<li><p>If you run your test suite more than once to retry flaky tests, partial results from a retry run can overwrite almost-full results from the first run. The problem I saw was specific to a homemade retry setup, but, if you're doing something like that, think through whether it might confuse Coveralls.</p></li>\n</ul>\n\n<p>Regarding completely untested classes missing from your coverage report, that's not specific to Coveralls. If you want to be sure that all classes are loaded, <a href=\"https://stackoverflow.com/questions/22075516/simple-cov-gem-missing-untested-files/31743459\">load them eagerly before running your tests</a>. Untested classes and methods are often unused, so auditing your app with a dead code detector like <a href=\"https://github.com/seattlerb/debride\" rel=\"nofollow noreferrer\">debride</a> can also be a good step on the road to better coverage.</p>\n"}], "owner": {"reputation": 1835, "user_id": 2432586, "user_type": "registered", "accept_rate": 69, "profile_image": "https://www.gravatar.com/avatar/702ff02114c19ee71758c0ba2cdc0e41?s=128&d=identicon&r=PG", "display_name": "Donovan Thomson", "link": "https://stackoverflow.com/users/2432586/donovan-thomson"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 341, "favorite_count": 0, "accepted_answer_id": 37173723, "answer_count": 1, "score": 1, "last_activity_date": 1463002712, "creation_date": 1462991692, "last_edit_date": 1463002022, "question_id": 37170770, "link": "https://stackoverflow.com/questions/37170770/coveralls-code-coverage-in-rails-is-misleading", "title": "Coveralls code coverage in Rails is misleading", "body": "<p>We are currently using Coveralls for code coverage of our Rails projects. The coverage results it is giving us are really unreliable. I have on numerous occasions found classes which have not been spec'd, written specs for them and then watched coverage actually drop. This is because Coveralls only checks classes which are loaded up by your specs. So if there is no spec for a class it is excluded from coverage statistics. This is obviously not ideal. Is there a way to get around this behavior? I am trying to push for greater emphasis on testing in my team and it's pretty hard when this is creating a false sense of security.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "regex", "string", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 69261, "user_id": 557445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a0d4a722b2fae0bf159c9283fe1aff?s=128&d=identicon&r=PG", "display_name": "Rion Williams", "link": "https://stackoverflow.com/users/557445/rion-williams"}, "edited": false, "score": 1, "creation_date": 1462992170, "post_id": 37170738, "comment_id": 61876484, "body": "Could you provide an example of input and how you would imagine the output based on those?"}, {"owner": {"reputation": 191, "user_id": 5665142, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8169f3ad928be16311262c50315800d5?s=128&d=identicon&r=PG&f=1", "display_name": "learningruby347", "link": "https://stackoverflow.com/users/5665142/learningruby347"}, "reply_to_user": {"reputation": 69261, "user_id": 557445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a0d4a722b2fae0bf159c9283fe1aff?s=128&d=identicon&r=PG", "display_name": "Rion Williams", "link": "https://stackoverflow.com/users/557445/rion-williams"}, "edited": false, "score": 0, "creation_date": 1462992575, "post_id": 37170738, "comment_id": 61876718, "body": "@RionWilliams My input in both conditionals is basically a string. In the first one, I&#39;m checking if it contains the word &quot;link&quot; and then I will have stuff between a pair of parenthesis. A link and link_name will be stored in the parenthesis. E.g &quot;Please go to link( url link_name)&quot; And then I&#39;m doing some string manipulation to change that to an html link."}], "answers": [{"comments": [{"owner": {"reputation": 191, "user_id": 5665142, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8169f3ad928be16311262c50315800d5?s=128&d=identicon&r=PG&f=1", "display_name": "learningruby347", "link": "https://stackoverflow.com/users/5665142/learningruby347"}, "edited": false, "score": 0, "creation_date": 1462992687, "post_id": 37171037, "comment_id": 61876791, "body": "Sorry, how do I use that in Ruby?"}, {"owner": {"reputation": 69261, "user_id": 557445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a0d4a722b2fae0bf159c9283fe1aff?s=128&d=identicon&r=PG", "display_name": "Rion Williams", "link": "https://stackoverflow.com/users/557445/rion-williams"}, "reply_to_user": {"reputation": 191, "user_id": 5665142, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8169f3ad928be16311262c50315800d5?s=128&d=identicon&r=PG&f=1", "display_name": "learningruby347", "link": "https://stackoverflow.com/users/5665142/learningruby347"}, "edited": false, "score": 1, "creation_date": 1462993116, "post_id": 37171037, "comment_id": 61877048, "body": "I added some examples that <i>may</i> work although it&#39;s been quite some time since I&#39;ve written any Ruby."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1462998151, "post_id": 37171037, "comment_id": 61879781, "body": "You probably want to use <code>#{Regexp.escape(wordToFind)}</code> instead of <code>#{wordToFind}</code> in this case."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1463077201, "post_id": 37171037, "comment_id": 61921717, "body": "Just to jog your memory, this is snake-case Ruby. :-)"}], "tags": [], "owner": {"reputation": 69261, "user_id": 557445, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/93a0d4a722b2fae0bf159c9283fe1aff?s=128&d=identicon&r=PG", "display_name": "Rion Williams", "link": "https://stackoverflow.com/users/557445/rion-williams"}, "is_accepted": false, "score": 2, "last_activity_date": 1462995943, "last_edit_date": 1462995943, "creation_date": 1462992593, "answer_id": 37171037, "question_id": 37170738, "link": "https://stackoverflow.com/questions/37170738/how-to-combine-these-two-ruby-string-tests-in-one-regular-expression/37171037#37171037", "title": "How to combine these two Ruby string tests in one regular expression?", "body": "<p><strong>Checking If a Word Is Contained</strong></p>\n\n<p>If you want to find matches that contain a specific word somewhere in the string, you can accomplish this through a lookahead :</p>\n\n<pre><code># This will match any string that contains your string \"{your-string-here}\"\n(?=.*({your-string-here}).*).*\n</code></pre>\n\n<p>You could consider building a string version of your expression and passing the word you are looking for using a variable : </p>\n\n<pre><code>wordToFind = \"link\"\nif stringToTest =~ /(?=.*(#{wordToFind}).*).*/\n    # stringToTest contains \"link\"\nelse\n    # stringToTest does not contain \"link\"\nend\n</code></pre>\n\n<p><strong>Checking for a Word AND Parentheses</strong></p>\n\n<p>If you also wanted to ensure that somewhere in your string you had a set of parentheses with some content in them <em>and</em> your previous lookahead for a word, you could use :</p>\n\n<pre><code># This will match any strings that contain your word and contain a set of parentheses \n(?=.*({your-string-here}).*).*\\([^\\)]+\\).*\n</code></pre>\n\n<p>which might be used as :</p>\n\n<pre><code>wordToFind = \"link\"\nif stringToTest =~ /(?=.*(#{wordToFind}).*).*\\([^\\)]+\\).*/\n    # stringToTest contains \"link\" and some non-empty parentheses\nelse\n    # stringToTest does not contain \"link\" or non-empty parentheses\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1463073756, "post_id": 37171262, "comment_id": 61919645, "body": "If there is no match, you obtain <code>nil.captures</code>, which raises an exception. Also, your regex requires the &quot;certain word&quot; to precede the parenthetical expression, but the order is not part of the specification: <code>&quot;stuff (url link_name) link more stuff&quot;.match(&#47;link\\((\\S+?) (\\S+?)\\)&#47;) #=&gt; nil</code>."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "reply_to_user": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1463074926, "post_id": 37171262, "comment_id": 61920354, "body": "Exception avoided in one character. I deduced the specification from learningruby347&#39;s comment on their question and they seem to agree, but, learningruby347, if I misunderstood just say the word."}, {"owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "edited": false, "score": 0, "creation_date": 1463075668, "post_id": 37171262, "comment_id": 61920807, "body": "Nice fix (!), but you should explain <code>&amp;.</code> (at least a link) for newbies and those not on top of recent changes to Ruby. (I was going to suggest using <code>scan</code> instead of <code>match</code>, but then you&#39;d have to use <code>flatten</code>, resulting in the same problem when there&#39;s no match. &#175;\\_(\u30c4)_/&#175; )"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 3, "last_activity_date": 1463076327, "last_edit_date": 1495542326, "creation_date": 1462993365, "answer_id": 37171262, "question_id": 37170738, "link": "https://stackoverflow.com/questions/37170738/how-to-combine-these-two-ruby-string-tests-in-one-regular-expression/37171262#37171262", "title": "How to combine these two Ruby string tests in one regular expression?", "body": "<p>The most important improvement you can make is to also test that the word and the parentheseses have the correct relationship. If I understand correctly, <code>\"link(url link_name)\"</code> should be a match but <code>\"(url link_name)link\"</code> or <code>\"link stuff (url link_name)\"</code> should not. So match <code>\"link\"</code>, the parentheses, and their contents, and capture the contents, all at once:</p>\n\n<pre><code>\"stuff link(url link_name) more stuff\".match(/link\\((\\S+?) (\\S+?)\\)/)&amp;.captures\n=&gt; [\"url\", \"link_name\"]\n</code></pre>\n\n<p>(<a href=\"https://stackoverflow.com/questions/36812647/what-does-ampersand-dot-mean-in-ruby\"><code>&amp;.</code> is Ruby 2.3</a>; use Rails' <code>.try :captures</code> in older versions.)</p>\n\n<p>Side note: <code>string.scan(regex).present?</code> is more concisely written as <code>string =~ regex</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 1, "last_activity_date": 1490467507, "last_edit_date": 1490467507, "creation_date": 1462994465, "answer_id": 37171577, "question_id": 37170738, "link": "https://stackoverflow.com/questions/37170738/how-to-combine-these-two-ruby-string-tests-in-one-regular-expression/37171577#37171577", "title": "How to combine these two Ruby string tests in one regular expression?", "body": "<p>I would go with something like this regex:</p>\n\n<pre><code>/link\\s*\\(([^\\)\\s]+)\\s*([^\\)]+)?\\)/i\n</code></pre>\n\n<p>This will find any match starting with the word <code>link</code>, followed by any number of spaces, then a url followed by a link name, both in parentheses.  In this regex, the link name is optional, but the url is not.  The matching is case-insensitive, so it will match <code>link</code> and <code>LINK</code> exactly the same.</p>\n\n<p>You can use the <a href=\"https://ruby-doc.org/core-2.4.1/Regexp.html#method-i-match\" rel=\"nofollow noreferrer\">Regexp#match</a> method to compare the regex to a string, and check the result for matches and captures, like so:</p>\n\n<pre><code>m = /link\\s*\\(([^\\)\\s]+)\\s*([^\\)]+)?\\)/i.match(\"link (stackoverflow.com StackOverflow)\")\nif m  # the match array is not nil\n  puts \"Matched: #{m[0]}\"\n  puts \" -- url: {m[1]}\"\n  puts \" -- link-name: #{m[2] || 'none'}\"\nelse  # the match array is nil, so no match was found\n  puts \"No match found\"\nend\n</code></pre>\n\n<p>If you'd like to use different strings to identify the match, you can use a <em>non-capturing</em> group, where you change <code>link</code> to something like:</p>\n\n<pre><code>(?:link|site|website|url)\n</code></pre>\n\n<p>In this case, the <code>(?:</code> syntax says not to capture this part of the match.  If you want to capture which term matched, simply change that from <code>(?:</code> to <code>(</code>, and adjust the capture indexes by 1 to account for the new capture value.</p>\n\n<p>Here's a short Ruby test program:</p>\n\n<pre><code>data = [\n  [ true, \"link (http://google.com Google)\", \"http://google.com\", \"Google\" ],\n  [ true, \"LiNk(ftp://website.org)\", \"ftp://website.org\", nil ],\n  [ true, \"link   (https://facebook.com/realstanlee/ Stan Lee) linkety link\", \"https://facebook.com/realstanlee/\", \"Stan Lee\" ],\n  [ true, \"x  link (https://mail.yahoo.com Yahoo! Mail)\", \"https://mail.yahoo.com\", \"Yahoo! Mail\" ],\n  [ false, \"link lunk (http://www.com)\", nil, nil ]\n]\n\ndata.each do |test_case|\n  link = /link\\s*\\(([^\\)\\s]+)\\s*([^\\)]+)?\\)/i.match(test_case[1])\n  url = link ? link[1] : nil\n  link_name = link ? link[2] : nil\n  success = test_case[0] == !link.nil?  &amp;&amp; test_case[2] == url &amp;&amp; test_case[3] == link_name\n  puts \"#{success ? 'Pass' : 'Fail'}: '#{test_case[1]}' #{link ? 'found' : 'not found'}\"\n  if success &amp;&amp; link\n    puts \" -- url: '#{url}' link_name: '#{link_name || '(no link name)'}'\"\n  end\nend\n</code></pre>\n\n<p>This produces the following output:</p>\n\n<pre><code>Pass: 'link (http://google.com Google)' found\n -- url: 'http://google.com' link_name: 'Google'\nPass: 'LiNk(ftp://website.org)' found\n -- url: 'ftp://website.org' link_name: '(no link name)'\nPass: 'link   (https://facebook.com/realstanlee/ Stan Lee) linkety link' found\n -- url: 'https://facebook.com/realstanlee/' link_name: 'Stan Lee'\nPass: 'x  link (https://mail.yahoo.com Yahoo! Mail)' found\n -- url: 'https://mail.yahoo.com' link_name: 'Yahoo! Mail'\nPass: 'link lunk (http://www.com)' not found\n</code></pre>\n\n<p>If you want to allow anything other than spaces between the word 'link' and the first paren, simply change the <code>\\s*</code> to <code>[^\\(]*</code> and you should be good to go.</p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1462998655, "last_edit_date": 1462998655, "creation_date": 1462998343, "answer_id": 37172648, "question_id": 37170738, "link": "https://stackoverflow.com/questions/37170738/how-to-combine-these-two-ruby-string-tests-in-one-regular-expression/37172648#37172648", "title": "How to combine these two Ruby string tests in one regular expression?", "body": "<pre><code>def has_both?(str, word)\n  str.scan(/\\b#{word}\\b|(?&lt;=\\()[^\\(\\)]+(?=\\))/).size == 2\nend\n\nhas_both?(\"Wait for me, Wild Bill.\", \"Bill\")\n  #=&gt; false \nhas_both?(\"Wait (for me), Wild William.\", \"Bill\")\n  #=&gt; false \nhas_both?(\"Wait (for me), Wild Billy.\", \"Bill\")\n  #=&gt; false \nhas_both?(\"Wait (for me), Wild bill.\", \"Bill\")\n  #=&gt; false \nhas_both?(\"Wait (for me, Wild Bill.\", \"Bill\")\n  #=&gt; false \nhas_both?(\"Wait (for me), Wild Bill.\", \"Bill\")\n  #=&gt; true \nhas_both?(\"Wait ((for me), Wild Bill.\", \"Bill\")\n  #=&gt; true \nhas_both?(\"Wait ((for me)), Wild Bill.\", \"Bill\")\n  #=&gt; true \n</code></pre>\n\n<p>These are the calculations for</p>\n\n<pre><code>word = \"Bill\"\nstr = \"Wait (for me), Wild Bill.\"\n\nr = /\n    \\b#{word}\\b  # match the value of the variable 'word' with word breaks for and aft\n    |         # or\n    (?&lt;=\\()   # match a left paren in a positive lookbehind\n    [^\\(\\)]+  # match one or more characters other than parens\n    (?=\\))    # match a right paren in a positive lookahead\n    /x        # free-spacing regex definition mode\n  #=&gt; /\n      \\bBill\\b  # match the value of the variable 'word' with word breaks for and aft\n      |         # or\n      (?&lt;=\\()   # match a left paren in a positive lookbehind\n      [^\\(\\)]+  # match one or more characters other than parens\n      (?=\\))    # match a right paren in a positive lookahead\n      /x \n\narr = str.scan(r)\n  #=&gt; [\"for me\", \"Bill\"]\narr.size == 2\n  #=&gt; true\n</code></pre>\n"}], "owner": {"reputation": 191, "user_id": 5665142, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/8169f3ad928be16311262c50315800d5?s=128&d=identicon&r=PG&f=1", "display_name": "learningruby347", "link": "https://stackoverflow.com/users/5665142/learningruby347"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 256, "favorite_count": 0, "accepted_answer_id": 37171262, "answer_count": 4, "score": 2, "last_activity_date": 1490467507, "creation_date": 1462991572, "last_edit_date": 1490462227, "question_id": 37170738, "link": "https://stackoverflow.com/questions/37170738/how-to-combine-these-two-ruby-string-tests-in-one-regular-expression", "title": "How to combine these two Ruby string tests in one regular expression?", "body": "<p>I'm trying to write a regular expression in Ruby where I want to see if the string contains a certain word (e.g. \"string\"), followed by a url and link name in parenthesis.</p>\n\n<p>Right now I'm doing:</p>\n\n<pre><code>string.include?(\"string\") &amp;&amp; string.scan(/\\(([^\\)]+)\\)/).present?\n</code></pre>\n\n<p>My input in both conditionals is a string.  In the first one, I'm checking if it contains the word \"link\" and then I will have the link and link_name in parenthesis, like this:</p>\n\n<pre><code>\"Please go to link( url link_name)\"\n</code></pre>\n\n<p>After validating that, I extract the HTML link.</p>\n\n<p>Is there a way I can combine them using regular expressions?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "paperclip"], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6154320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1054f92666692a9ac9e6d73b9e4785b1?s=128&d=identicon&r=PG&f=1", "display_name": "indus", "link": "https://stackoverflow.com/users/6154320/indus"}, "edited": false, "score": 0, "creation_date": 1463064953, "post_id": 37176129, "comment_id": 61913850, "body": "Sorry about the few details i was a bit tired when I wrote that. The code you provided still allows a duplicate to be posted. When the post is being created paperclip creates a fingerprint <code>1a0809...</code>, and I want to check if that fingerprint matches any other in the post_file_fingerprint column as well as having the board_id of the current post."}, {"owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "reply_to_user": {"reputation": 103, "user_id": 6154320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1054f92666692a9ac9e6d73b9e4785b1?s=128&d=identicon&r=PG&f=1", "display_name": "indus", "link": "https://stackoverflow.com/users/6154320/indus"}, "edited": false, "score": 0, "creation_date": 1463107125, "post_id": 37176129, "comment_id": 61932905, "body": "@aidiah I improved my answer. Please have a look."}], "tags": [], "owner": {"reputation": 2278, "user_id": 2244501, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/231d8805a81cf94c09ff60cdba6e4029?s=128&d=identicon&r=PG", "display_name": "retgoat", "link": "https://stackoverflow.com/users/2244501/retgoat"}, "is_accepted": true, "score": 0, "last_activity_date": 1463107056, "last_edit_date": 1463107056, "creation_date": 1463019204, "answer_id": 37176129, "question_id": 37170506, "link": "https://stackoverflow.com/questions/37170506/how-to-check-if-duplicate-file-exists-with-paperclip-but-only-in-current-board/37176129#37176129", "title": "How to check if duplicate file exists with paperclip but only in current board", "body": "<p>I assume you trying to rise a flash in a model. There is no way to do that because <code>flash</code> is a method defined in <code>ActionController::Base</code>.</p>\n\n<p>If you'd like to validate your <code>Post</code> model you should implement custom validation.</p>\n\n<pre><code>before_save :check_exists\ndef check_exists\n  errors.add(:post_file_fingerprint, \"Duplicate\") if Post.exists?(post_file_fingerprint: [:fingerprint.to_s])\nend\n</code></pre>\n\n<p>I'm not sure your checking condition works properly because you provided too few details about it. Please be sure that works.</p>\n\n<p>And in your controller</p>\n\n<pre><code>def create\n  # some code\n  if @post.save\n    redirect_to @post\n  else\n    flash[:error] = @post.error.messages\n    render 'new'\n  end\nend\n</code></pre>\n\n<p>Works as follows:\nBefore saving a model AR callback will be initiated, and if <code>Post</code> isn't valid \u2014 model instance will be set to invalid with message you provided.</p>\n\n<p>AR will not save invalid model into the DB, and then you'll set <code>flash[:error]</code> with custom error message.</p>\n\n<p>More details <a href=\"http://guides.rubyonrails.org/getting_started.html#adding-some-validation\" rel=\"nofollow noreferrer\">here</a>.</p>\n\n<p>Hope that helps.</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>I tested code and made some improvements. The following example works:</p>\n\n<pre><code>def check_exists\n  errors.add(:post_file, \"Duplicate\") if Post.exists?(post_file_fingerprint: attributes['post_file_fingerprint'])\nend\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/gERHO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/gERHO.png\" alt=\"Validation works\"></a></p>\n"}], "owner": {"reputation": 103, "user_id": 6154320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1054f92666692a9ac9e6d73b9e4785b1?s=128&d=identicon&r=PG&f=1", "display_name": "indus", "link": "https://stackoverflow.com/users/6154320/indus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 310, "favorite_count": 0, "accepted_answer_id": 37176129, "answer_count": 1, "score": 0, "last_activity_date": 1463107056, "creation_date": 1462990814, "question_id": 37170506, "link": "https://stackoverflow.com/questions/37170506/how-to-check-if-duplicate-file-exists-with-paperclip-but-only-in-current-board", "title": "How to check if duplicate file exists with paperclip but only in current board", "body": "<p>I currently have paperclip saving the fingerprint with <code>:fingerprint =&gt; :post_file_fingerprint</code> and my routes are set up like this:</p>\n\n<pre><code>  resources :boards, :path =&gt; '' do\n    resources :posts, :path =&gt; 'thread' do\n      resources :replies\n</code></pre>\n\n<p>How can I check if <code>post_file_fingerprint</code> exists against the newly generated fingerprint, and if it does don't create the post.</p>\n\n<p>I currently I have in my <code>post.rb</code>:</p>\n\n<pre><code>before_save :check_exists\ndef check_exists\n        if Post.exists?(:post_file_fingerprint [:fingerprint.to_s])\n            flash.now[:error] = \"Duplicate\"\n            render @board\n        end\nend\n</code></pre>\n\n<p>However this code still allows posts to be saved, and has no checking based on board.</p>\n"}, {"tags": ["sql", "ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 51013, "user_id": 976775, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/30bd66ad1795804aebe249d8bcb14409?s=128&d=identicon&r=PG", "display_name": "MrYoshiji", "link": "https://stackoverflow.com/users/976775/mryoshiji"}, "edited": false, "score": 3, "creation_date": 1462991734, "post_id": 37170500, "comment_id": 61876242, "body": "This will do the trick: <code>Person.includes(pets: :breed).where(breeds: { name: &#39;Norwich Terrier&#39; })</code>"}, {"owner": {"reputation": 20590, "user_id": 504963, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xlYLo.jpg?s=128&g=1", "display_name": "Antarr Byrd", "link": "https://stackoverflow.com/users/504963/antarr-byrd"}, "edited": false, "score": 0, "creation_date": 1462991996, "post_id": 37170500, "comment_id": 61876380, "body": "<a href=\"https://thoughtbot.com/upcase/videos/advanced-querying-belongs-to\" rel=\"nofollow noreferrer\">thoughtbot.com/upcase/videos/advanced-querying-belongs-to</a>"}], "answers": [{"comments": [{"owner": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1463012522, "post_id": 37170895, "comment_id": 61885213, "body": "Doesnt it throw an error <code>ActiveRecord::ConfigurationError: Association named &#39;breeds&#39; was not found on Person</code> ? And as far as I know its better to use <a href=\"http://apidock.com/rails/ActiveRecord/QueryMethods/includes\" rel=\"nofollow noreferrer\">includes method</a> instead of joins. Correct me if Im wrong"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 1, "creation_date": 1463019486, "post_id": 37170895, "comment_id": 61886877, "body": "@MartinZinovsky the <code>joins</code> and <code>includes</code> methods will often do basically the same thing (minor differences in SQL generated), but they exist for entirely different purposes.  <code>joins</code> is used for explicitly joining tables and providing additional querying power for other query methods (e.g. <code>where).  </code>includes` is used for implicit joins intended specifically for eager loading associations.  I wouldn&#39;t use them interchangeably, because there could be undesirable side effects.  <code>includes</code> will often work in place of <code>joins</code>, but not always.  Great question! :D"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 3320, "user_id": 4950680, "user_type": "registered", "accept_rate": 58, "profile_image": "https://i.stack.imgur.com/C8cEh.jpg?s=128&g=1", "display_name": "Martin Zinovsky", "link": "https://stackoverflow.com/users/4950680/martin-zinovsky"}, "edited": false, "score": 0, "creation_date": 1463884129, "post_id": 37170895, "comment_id": 62252155, "body": "@DavidEnglish Did this answer your question? If so, please click the checkmark next to the answer to accept it. The checkmark will turn green. Upvotes are always welcome, too!"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 1, "last_activity_date": 1463019227, "last_edit_date": 1463019227, "creation_date": 1462992111, "answer_id": 37170895, "question_id": 37170500, "link": "https://stackoverflow.com/questions/37170500/how-to-complete-a-query-in-rails-with-a-deep-condition/37170895#37170895", "title": "How to complete a query in Rails with a deep condition?", "body": "<p>I formalized the model relationships with minor edit, and ended up with this:</p>\n\n<pre><code>class Person &lt; ActiveRecord::Base\n  has_many :pets\n  attr_accessor :primary_pet\nend\n\nclass Pet &lt; ActiveRecord::Base\n  belongs_to :person\n  belongs_to :breed\nend\n\nclass Breed &lt; ActiveRecord::Base\n  # no belonging relationship\n  attr_accessor :name\nend\n</code></pre>\n\n<p>The best query that I came up with (that actually worked) was this:</p>\n\n<pre><code>Person.joins(pets: :breed).where(breeds: { name: 'Norwich Terrier' }).where(\"people.primary_pet = pets.id\")\n</code></pre>\n\n<p>This says to join the relationship for <code>pets</code> and to <code>breeds</code>.  This allows using the <code>breeds</code> structure to filter for 'Norwich Terrier'.  And to finish it off, to additionally filter by primary_pet_id related to pets.id.</p>\n\n<p>That should get you what you asked for in the question.</p>\n\n<p>Here's how I tested it:</p>\n\n<pre><code>breed_names = [\"Beagle\", \"Collie\", \"Norwich Terrier\", \"German Shepard\", \"Dachshund\"]\npeople_names = [\"Barbara\", \"Connie\", \"Paula\", \"Gerald\", \"Dave\"]\n\n# Add breeds\nbreed_names.each {|name| Breed.create!(name: name) }\n# Add people\npeople_names.each {|name| Person.create!(name: name) }\n\n# Add some pets\npeople_names.each do |name|\n  person = Person.find_by(name: name)\n  breed_names.sample(3).each do |breed|\n    breed = Breed.find_by(name: breed_name)\n    Pet.create!(breed_id: breed.id, person_id: person.id)\n  end\nend\n\n# Assign the primary_pet for each person\nPerson.all.each {|person| pet = person.pets.first ; person.update!(primary_pet: pet) if pet }\n\n# List all people and their pets by breed\nPerson.all.each do |person|\n  puts \"#{person.name}: #{person.pets.map {|pet| pet.breed.name}}\"\nend\n\n# List all people and their primary pet breed\nPerson.all.each do |person|\n  puts \"#{person.name}: #{person.primary_pet ? person.primary_pet.breed.name : ''}\"\nend\n\n# Run the query\nPerson.joins(pets: :breed).where(breeds: { name: 'Norwich Terrier' }).where(\"people.primary_pet = pets.id\")\n</code></pre>\n"}], "owner": {"reputation": 63, "user_id": 2835777, "user_type": "registered", "accept_rate": 57, "profile_image": "https://www.gravatar.com/avatar/1c13eec602fe8c40b7df16bd3f447205?s=128&d=identicon&r=PG&f=1", "display_name": "David English", "link": "https://stackoverflow.com/users/2835777/david-english"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 207, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1463019227, "creation_date": 1462990768, "question_id": 37170500, "link": "https://stackoverflow.com/questions/37170500/how-to-complete-a-query-in-rails-with-a-deep-condition", "title": "How to complete a query in Rails with a deep condition?", "body": "<p>I am attempting to query a database based on a deep condition. As an example, I would like to find all of the people whose primary pet has a specific breed name:</p>\n\n<p>Person > Pet > Breed > Name</p>\n\n<p>The models might look like this.</p>\n\n<pre><code>class Person\n  has_many pets\n  attr_accessor :primary_pet\nend\n\nclass Pet\n  belongs_to Person\n  has_one Breed\nend\n\nclass Breed\n  # no belonging relationship\n  attr_accessor :name\nend\n</code></pre>\n\n<p>Now I could do:</p>\n\n<pre><code>Person.find_each do |person|\n  puts person if primary_pet.breed.name == 'Norwich Terrier'\nend\n</code></pre>\n\n<p>but I want to figure out the proper query syntax for doing this with a where method. The following does not work:</p>\n\n<pre><code>Person.where(primary_pet.breed.name: 'Norwich Terrier').find_each do |person|\n  puts person\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "solr"], "owner": {"reputation": 2097, "user_id": 1646823, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/8471ef6adbd84694d3c37e445768a75f?s=128&d=identicon&r=PG", "display_name": "jvans", "link": "https://stackoverflow.com/users/1646823/jvans"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 23, "favorite_count": 1, "answer_count": 0, "score": 1, "last_activity_date": 1462990187, "creation_date": 1462990187, "question_id": 37170331, "link": "https://stackoverflow.com/questions/37170331/intepreting-results-from-rails-render-times", "title": "Intepreting results from rails render times", "body": "<p>I am trying to understand the following line from my rails log:</p>\n\n<p><code>\nCompleted 200 OK in 70ms (Views: 5.0ms | ActiveRecord: 7.3ms | Solr: 56213.2ms)\n</code></p>\n\n<p>from <a href=\"https://stackoverflow.com/questions/687758/understanding-ruby-on-rails-render-times\">this post</a> it seems like the <code>Completed</code> Time represents the time for the entire request. In my case however, Solr took signficantly longer than the request as a whole. </p>\n\n<p>I'm wondering if either</p>\n\n<ol>\n<li><p>Solr is blocking and the total request time is actually much closer to 56000 ms</p></li>\n<li><p>Solr is not blocking the request and the request completes before solr?</p></li>\n</ol>\n\n<p>The latter seems less likely since pages would appear incorrectly if solr didn't complete before the render. Option 1 would mean that the benchmarking times are off. </p>\n"}, {"tags": ["ruby"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1462989805, "post_id": 37170169, "comment_id": 61875193, "body": "There must be something else going on here. What is <code>x</code>?"}, {"owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462989892, "post_id": 37170169, "comment_id": 61875250, "body": "x is an activerecord model.."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462989958, "post_id": 37170169, "comment_id": 61875299, "body": "What&#39;s the result of <code>x.collect { |_x| _x.txt }.uniq</code> equal?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 4, "creation_date": 1462990223, "post_id": 37170169, "comment_id": 61875472, "body": "What is the result of <code>x[1].txt.codepoints</code> / <code>x[0].txt.codepoints</code> and what does <code>x1.txt.method(:==)</code> return?"}, {"owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "edited": false, "score": 0, "creation_date": 1463055450, "post_id": 37170169, "comment_id": 61905919, "body": "check my update please"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463168039, "post_id": 37170169, "comment_id": 61967074, "body": "My answer is updated to reflect your update."}], "answers": [{"comments": [{"owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "edited": false, "score": 0, "creation_date": 1463054247, "post_id": 37170561, "comment_id": 61905048, "body": "It returns <code>NoMethodError: undefined method </code>encoding&#39; for &quot;Put your weight on to the shoulders and upper back.&quot;:String` its ruby 1.8.7"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1463168004, "last_edit_date": 1463168004, "creation_date": 1462991011, "answer_id": 37170561, "question_id": 37170169, "link": "https://stackoverflow.com/questions/37170169/ruby-comparing-two-identical-strings-returns-false/37170561#37170561", "title": "Ruby comparing two identical strings returns false", "body": "<p>The strings may be different encodings.  To find out the encoding for the strings, try this:</p>\n\n<pre><code>[x[1].txt.encoding,x[0].txt.encoding]\n</code></pre>\n\n<p>If it turns out to be the case, it could be an issue from an interface (e.g. a View, a REST API endpoint, or a file source), or it could be a storage/translation issue with the database.</p>\n\n<p>If your string encodings are mismatched, you can do the following:</p>\n\n<pre><code>x.map {|text| text.encode!(\"UTF-8\", invalid: :replace, undef: :replace).force_encoding(\"utf-8\") }\n</code></pre>\n\n<p>If your encodings are already matched, you can strip those non-ASCII characters from the strings with this <code>gsub</code> call:</p>\n\n<pre><code>x.map {|text| text.gsub!(/[^\\001-\\176]+/, \"\") }\n</code></pre>\n\n<p>Once you've done this, you get the following: </p>\n\n<pre><code>[\n  [0] \"Put your weight on to the shoulders and upper back.\", \n  [1] \"Put your weight on to the shoulders and upper back.\", \n  [2] \"Put your weight on to the shoulders and upper back.\"\n]\n</code></pre>\n\n<p>The regex will remove any characters that are between ASCII code 1 (octal 001) and ASCII code 126 (octal 176).  This effectively scrubs the string of any non-ASCII characters (and ASCII 0).</p>\n\n<p>If you require \"extended ASCII\" for use with an international character set, such as ISO-8859 character set or Windows 1252, or even specific Unicode characters, you can extend the range to include those characters by changing the digits to include those characters.</p>\n"}], "owner": {"reputation": 6268, "user_id": 503831, "user_type": "registered", "accept_rate": 59, "profile_image": "https://www.gravatar.com/avatar/992c174c48fa4dadacb03854dbf7ade8?s=128&d=identicon&r=PG", "display_name": "Arnold Roa", "link": "https://stackoverflow.com/users/503831/arnold-roa"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1189, "favorite_count": 1, "answer_count": 1, "score": 1, "last_activity_date": 1463168004, "creation_date": 1462989706, "last_edit_date": 1463055424, "question_id": 37170169, "link": "https://stackoverflow.com/questions/37170169/ruby-comparing-two-identical-strings-returns-false", "title": "Ruby comparing two identical strings returns false", "body": "<pre><code>&gt; [x[1].txt,x[0].txt]\n[\n    [0] \"Put your weight on to the shoulders and upper back.\",\n    [1] \"Put your weight on to the shoulders and upper back.\"\n]\n&gt; [x[1].txt,x[0].txt].map &amp;:class\n[\n    [0] String &lt; Object,\n    [1] String &lt; Object\n]\n&gt; x[1].txt == x[0].txt\nfalse\n</code></pre>\n\n<p>How can that be possible?</p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>After reading a bit i found out this:</p>\n\n<pre><code>y = x.map{|z| z.txt.toutf8 }\n[\n    [0] \"Put your weight on to the shoulders and upper back.\",\n    [1] \"\u7ab6\u30a3Put your weight on to the shoulders and upper back.\",\n    [2] \"\u7ab6\u30a3Put your weight on to the shoulders and upper back.\"\n]\n</code></pre>\n\n<p>So the strings are not the same, but without .toutf8 it looks exactly the same, what is the reason?</p>\n\n<p>and most important, how can I strip those chars?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "http", "webserver"], "answers": [{"comments": [{"owner": {"reputation": 5288, "user_id": 3012385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba6da9cb612283b21f74c407824bc5?s=128&d=identicon&r=PG", "display_name": "DaSourcerer", "link": "https://stackoverflow.com/users/3012385/dasourcerer"}, "edited": false, "score": 0, "creation_date": 1462994827, "post_id": 37170125, "comment_id": 61877965, "body": "Careful with the first paragraph: HTTP may <i>look</i> like it were text-based. But it really is a binary protocol: it operates on octets, not characters."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 5288, "user_id": 3012385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba6da9cb612283b21f74c407824bc5?s=128&d=identicon&r=PG", "display_name": "DaSourcerer", "link": "https://stackoverflow.com/users/3012385/dasourcerer"}, "edited": false, "score": 0, "creation_date": 1462996164, "post_id": 37170125, "comment_id": 61878703, "body": "@DaSourcerer I&#39;m not sure that&#39;s a distinction that&#39;s important for a protocol based on 7-bit ASCII or extensions to <a href=\"https://tools.ietf.org/html/rfc5987\" rel=\"nofollow noreferrer\">encode other formats</a>. Bytes and characters are the same here unless otherwise specified. The framing is plain-text. The payloads <i>may</i> be binary."}, {"owner": {"reputation": 5288, "user_id": 3012385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba6da9cb612283b21f74c407824bc5?s=128&d=identicon&r=PG", "display_name": "DaSourcerer", "link": "https://stackoverflow.com/users/3012385/dasourcerer"}, "edited": false, "score": 0, "creation_date": 1462997291, "post_id": 37170125, "comment_id": 61879334, "body": "Not going to start a fight over this, but yes, while bearly visible in practice, it is important. Codewords and delimiters fitting into 7bit ASCII is actually a way to prevent interoperability issues and allow the protocol to be read bytewise. Oh, and some headers introduced before RFC 5987 allow raw UTF8 payloads. <code>Cookie2</code> being one of them, I think."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "reply_to_user": {"reputation": 5288, "user_id": 3012385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba6da9cb612283b21f74c407824bc5?s=128&d=identicon&r=PG", "display_name": "DaSourcerer", "link": "https://stackoverflow.com/users/3012385/dasourcerer"}, "edited": false, "score": 0, "creation_date": 1462998518, "post_id": 37170125, "comment_id": 61879980, "body": "The line does get blurred when using some extensions, but at its core it&#39;s a CRLF text-based protocol that can be, if necessary, emulated by typing things in over <code>telnet</code>. That&#39;s not possible with a binary protocol. I understand what you&#39;re saying, but it&#39;s an academic distinction."}, {"owner": {"reputation": 5288, "user_id": 3012385, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dcba6da9cb612283b21f74c407824bc5?s=128&d=identicon&r=PG", "display_name": "DaSourcerer", "link": "https://stackoverflow.com/users/3012385/dasourcerer"}, "edited": false, "score": 1, "creation_date": 1462998752, "post_id": 37170125, "comment_id": 61880117, "body": "&quot;it&#39;s an academic distinction.&quot; In light of the rather subtle effects in practice, I think I can settle with that :)"}], "tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 6, "last_activity_date": 1462989572, "creation_date": 1462989572, "answer_id": 37170125, "question_id": 37170005, "link": "https://stackoverflow.com/questions/37170005/what-does-it-mean-to-run-a-local-web-server/37170125#37170125", "title": "What does it mean to run a local web server?", "body": "<p>You're pretty much right on your understanding there. HTTP is just a text-based protocol that, like many, operates over TCP/IP.</p>\n\n<p>The built-in WEBrick server isn't the best example of an HTTP server written in Ruby, but it's included for legacy reasons because it's often \"good enough\" to get you started. <a href=\"http://pow.cx\">Pow</a> is considerably better and despite being produced by the same company that produced Rails it's largely written in Node.</p>\n\n<p>The beauty of HTTP, like a lot of internet based protocols, is it doesn't matter what language you use so long as you comply with the standard.</p>\n\n<p>Rack is a layer that operates behind HTTP and provides a thin layer of abstraction on the request/response cycle.</p>\n"}, {"tags": [], "owner": {"reputation": 571, "user_id": 1913371, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/SIZQF.jpg?s=128&g=1", "display_name": "Beshoy Hanna", "link": "https://stackoverflow.com/users/1913371/beshoy-hanna"}, "is_accepted": false, "score": 2, "last_activity_date": 1462989858, "creation_date": 1462989858, "answer_id": 37170224, "question_id": 37170005, "link": "https://stackoverflow.com/questions/37170005/what-does-it-mean-to-run-a-local-web-server/37170224#37170224", "title": "What does it mean to run a local web server?", "body": "<p>A server is something that opens up a port (80, 443, 8080) for some sort of data transfer. Port 80 is the HTTP port and port 443 is the HTTPS port. 8080 is a commonly used port for development (as is 3000). <a href=\"https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers\" rel=\"nofollow\">https://en.wikipedia.org/wiki/List_of_TCP_and_UDP_port_numbers</a></p>\n\n<p>A local server by definition is a server running on your machine. </p>\n\n<p>Overall, you are definitely on the right track.</p>\n"}], "owner": {"reputation": 2564, "user_id": 4134881, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/797360342295a3f637a9c4d71d40d113?s=128&d=identicon&r=PG&f=1", "display_name": "evianpring", "link": "https://stackoverflow.com/users/4134881/evianpring"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1472, "favorite_count": 1, "accepted_answer_id": 37170125, "answer_count": 2, "score": 5, "last_activity_date": 1462989858, "creation_date": 1462989168, "question_id": 37170005, "link": "https://stackoverflow.com/questions/37170005/what-does-it-mean-to-run-a-local-web-server", "title": "What does it mean to run a local web server?", "body": "<p>I can program and develop in Ruby on Rails/JS/HTML/CSS to make a full stack app. However, there are holes in my understanding of the HTTP request/response cycle. Are the following points correct?</p>\n\n<ul>\n<li>If I make a Rails app, and on the command line type <code>rails server</code> I get a local server, which I can make requests to. If I open a browser, type <code>localhost:3000</code>, and press enter, I am making an HTTP request to the local server. </li>\n<li>Rails uses by default a web server called WEBrick, though there are others like Thin, Puma, and Unicorn. These are all pieces of software, and what makes them web servers is the fact that the software implements functionality to process HTTP requests.</li>\n<li>When I run a local web server, it means that my computer is running one of these pieces of software that listen for HTTP requests. </li>\n</ul>\n\n<p><strong>Is the above what it means \"to run a local web server\"?</strong></p>\n\n<ul>\n<li>I have seen other examples of ways to \"run a local web server\". One of the is to run <code>npm install -g http-server</code> in a project directory, and then navigate to <code>localhost:8080</code>. Is this also just software that starts running and accepts HTTP requests on port 8080?</li>\n<li>On a Ruby command line, install rack gem: <code>gem install rack</code>. Then in a new Ruby file we <code>require 'rack'</code>, start a web server:</li>\n</ul>\n\n<p><code>Rack::Server.start({ app: MySimpleApp, port: 3000 })</code></p>\n\n<p>We can then define a web application <code>MySimpleApp</code> that is rack-compliant (object that responds to <code>call</code> method):</p>\n\n<pre><code>class MySimpleApp\n  def self.call\n    (...)\n  end\nend\n</code></pre>\n\n<p>So now when we navigate in our browser to localhost:3000, MySimpleApp is executed. <strong>Is rack simply running it's default WEBrick server? Is what the above commands do simply run a local web server and define what to do when an HTTP request comes in (execute MySimpleApp)?</strong></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "roles"], "answers": [{"tags": [], "owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "is_accepted": false, "score": 0, "last_activity_date": 1462989086, "creation_date": 1462989086, "answer_id": 37169982, "question_id": 37169794, "link": "https://stackoverflow.com/questions/37169794/manage-roles-in-rails/37169982#37169982", "title": "manage roles in rails", "body": "<p>Add a boolean, <code>:admin</code> to your User model.  </p>\n\n<pre><code>class AddAdminToUsers &lt; ActiveRecord::Migration\n  def change\n    add_column :users, :admin, :boolean, deafult: false\n  end\nend\n</code></pre>\n\n<p>Create a method for a registered user to separate them from demo users, such as verifying their email, providing a home address and phone number, filling out a profile, etc. This is up to you though, first you need to decide how a registered and demo user should be different.</p>\n"}, {"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1462989380, "creation_date": 1462989380, "answer_id": 37170070, "question_id": 37169794, "link": "https://stackoverflow.com/questions/37169794/manage-roles-in-rails/37170070#37170070", "title": "manage roles in rails", "body": "<p>The <code>CanCan</code> gem adds <em>authorization</em> to your project, and is especially useful if you want to implement multiple roles with differing abilities.  When used with an <em>authentication</em> system like <code>devise</code>, you get a full suite of capability for your site.</p>\n\n<p>You're in full control of what roles you want to define and what abilities they have.  CanCan manages tracking, assignment, and querying of roles, and then gets out of your way to let you build what you need.</p>\n\n<p>You can find the CanCan gem in Github: <a href=\"https://github.com/ryanb/cancan\" rel=\"nofollow\">https://github.com/ryanb/cancan</a></p>\n\n<p>It's simple to use, and the documentation is straightforward and easy to follow.</p>\n"}, {"tags": [], "owner": {"reputation": 4416, "user_id": 2552259, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/e6d74162f339b5acd772d3f5dadaa8ea?s=128&d=identicon&r=PG", "display_name": "Jorge de los Santos", "link": "https://stackoverflow.com/users/2552259/jorge-de-los-santos"}, "is_accepted": false, "score": 2, "last_activity_date": 1462989722, "creation_date": 1462989722, "answer_id": 37170174, "question_id": 37169794, "link": "https://stackoverflow.com/questions/37169794/manage-roles-in-rails/37170174#37170174", "title": "manage roles in rails", "body": "<p>There are plenty of solutions available to you. </p>\n\n<p><em>Starting by gems:</em></p>\n\n<p><a href=\"https://github.com/RolifyCommunity/rolify\" rel=\"nofollow\">https://github.com/RolifyCommunity/rolify</a></p>\n\n<p><a href=\"https://github.com/martinrehfeld/role_model\" rel=\"nofollow\">https://github.com/martinrehfeld/role_model</a></p>\n\n<p><em>By using Devise architecture (in case you use it):</em></p>\n\n<p><a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Add-a-default-role-to-a-User\" rel=\"nofollow\">https://github.com/plataformatec/devise/wiki/How-To:-Add-a-default-role-to-a-User</a></p>\n\n<p><em>By using enums in rails 4:</em></p>\n\n<pre><code>class AddRolesToUser &lt; ActiveRecord::Migration\n  #add_column 'role', :integer, default: 0 to the users table\nend\n\nclass User &lt; ActiveRecord::Base\n  enum role: [:demo, :admin, :registered]\nend\n</code></pre>\n\n<p>That will enable role methods.</p>\n\n<pre><code>user = User.find(1)\nuser.role #:demo\nuser.admin? #false\nuser.registered? #false\n</code></pre>\n\n<p>And consequently:</p>\n\n<pre><code>if user.admin?\n  #somethig\nelsif user.registered?\n  #another something\nelse\n  #another another something.\n</code></pre>\n\n<p>And last but not least, what you are searching is not the manage roles solution, is the manage permissions solutions:</p>\n\n<p><a href=\"https://github.com/ryanb/cancan\" rel=\"nofollow\">https://github.com/ryanb/cancan</a></p>\n"}, {"tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": false, "score": 1, "last_activity_date": 1463033600, "last_edit_date": 1495535295, "creation_date": 1462990303, "answer_id": 37170368, "question_id": 37169794, "link": "https://stackoverflow.com/questions/37169794/manage-roles-in-rails/37170368#37170368", "title": "manage roles in rails", "body": "<p>Some gems that might be interesting for you :</p>\n\n<ul>\n<li><a href=\"https://github.com/RolifyCommunity/rolify\" rel=\"nofollow noreferrer\">rolify</a>  </li>\n<li><a href=\"https://github.com/martinrehfeld/role_model\" rel=\"nofollow noreferrer\">role_model</a></li>\n</ul>\n\n<p>If you decide to implement it yourself, then within some page you might want to change the content, for that you might want to do something like this : </p>\n\n<p>Add a role to the user model using a migration :</p>\n\n<pre><code>class AddRoleToUsers &lt; ActiveRecord::Migration\n  def change\n    add_column :users, :role, :string, default: :demo\n  end\nend\n</code></pre>\n\n<p>Then in your app you can use it as follows:</p>\n\n<pre><code>def index\n  case current_user.role\n    when :admin\n      @installations = Installation.all\n    when :registered\n      @installations = current_user.installations\n    else \n      @installations = current_user.installations.first\n  end\nend \n</code></pre>\n\n<p>You can also simply create a boolean <code>admin</code> for instance.</p>\n\n<p>What you might want to do also is create some methods in your model so that you can call <code>current_user.admin?</code> or <code>current_user.registered?</code> . You can do that by doing (if you chose to use a string to store the role):</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  def admin?\n    self.role == \"admin\"\n  end\n\n  def registered?\n    self.role == \"registered\"\n  end\nend\n</code></pre>\n\n<p>One advantage I see of having a role stored in a string is that if you have 5 roles for instance then you do not have 4 booleans (as when you store admin in a boolean) but only one string. On the long run you might want to store actually a <code>role_id</code> instead of a string and have a separate <code>role</code> model.</p>\n\n<p>An excellent alternative pointed out by Jorge de Los Santos (another answer) is to use enum :</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  enum role: [:demo, :admin, :registered]\nend\n</code></pre>\n\n<p>It is an excellent alternative because it will automagically add the methods described above such as <code>current_user.admin?</code> without hard coding them.</p>\n\n<p>With your roles, you might want to do some <em>authorization</em> (admins can have access to specific pages, demo users are restricted to only a subset of pages, etc.). For this, you can use the gem called <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow noreferrer\">cancancan</a>. You can look at <a href=\"http://railscasts.com/episodes/192-authorization-with-cancan\" rel=\"nofollow noreferrer\">this railscast</a> to learn more about it. Also, you can have some infos here : <a href=\"https://stackoverflow.com/questions/27357087/how-to-use-cancancan\">How to use cancancan?</a> .</p>\n"}], "owner": {"reputation": 1007, "user_id": 5351714, "user_type": "registered", "accept_rate": 41, "profile_image": "https://www.gravatar.com/avatar/ed8a93ea89809e3812bdfb926389ff96?s=128&d=identicon&r=PG&f=1", "display_name": "lolix", "link": "https://stackoverflow.com/users/5351714/lolix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2871, "favorite_count": 0, "answer_count": 4, "score": 0, "last_activity_date": 1463033600, "creation_date": 1462988449, "question_id": 37169794, "link": "https://stackoverflow.com/questions/37169794/manage-roles-in-rails", "title": "manage roles in rails", "body": "<p>I want create roles in my project. Each user can be: admin, registered or demo. Each role see different things.\nHow can I do that? What is the best gem to do roles?</p>\n\n<p>This is a example in 'bad programming\" of what I want:</p>\n\n<pre><code>  def index\n    if current_user.role[:name] == 'admin'\n      @installations = Installation.all\n    elsif current_user.role[:name] == 'registered'\n      @installations = current_user.installations\n    elsif current_user.role[:name] == 'demo'\n      @installations = current_user.installations.first\n    else\n    end\n  end\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "nginx"], "comments": [{"owner": {"reputation": 379, "user_id": 4454498, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b2b339daa2a73cb8c0ee537b3e6de80d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Condron", "link": "https://stackoverflow.com/users/4454498/ryan-condron"}, "edited": false, "score": 0, "creation_date": 1463089244, "post_id": 37168779, "comment_id": 61928162, "body": "I have rebuild the application manually using only system packages and still getting the same result. This may be a Rails Application Issue"}], "answers": [{"comments": [{"owner": {"reputation": 379, "user_id": 4454498, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b2b339daa2a73cb8c0ee537b3e6de80d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Condron", "link": "https://stackoverflow.com/users/4454498/ryan-condron"}, "edited": false, "score": 0, "creation_date": 1465245763, "post_id": 37485326, "comment_id": 62811362, "body": "Thanks for your input. I&#39;m just getting back to this issue. I will mark the answer correct once it works."}], "tags": [], "owner": {"reputation": 1163, "user_id": 243424, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/b052f4656430fdd1efca5d543b629905?s=128&d=identicon&r=PG", "display_name": "Alex Fortuna", "link": "https://stackoverflow.com/users/243424/alex-fortuna"}, "is_accepted": false, "score": 1, "last_activity_date": 1464419505, "last_edit_date": 1464419505, "creation_date": 1464357317, "answer_id": 37485326, "question_id": 37168779, "link": "https://stackoverflow.com/questions/37168779/puma-shows-al-requests-coming-from-127-0-0-1-when-behind-nginx/37485326#37485326", "title": "Puma shows al requests coming from 127.0.0.1 when behind nginx", "body": "<p>This worked for me (puma 3.4.0):</p>\n\n<pre><code># Serve static content if a corresponding file exists.\nlocation / {\n  try_files $uri @proxy;\n\n  # NOTE: Parameters below apply ONLY for static files that match.\n\n  expires max;\n  add_header Cache-Control \"public\";\n  add_header By-Nginx \"yes\";     # DEBUG\n}\n\n# Serve dynamic content from the backend.\nlocation @proxy {\n  proxy_pass http://backend_for_www.site.com;\n\n  proxy_pass_request_headers on;\n  proxy_set_header Host $host;\n  proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n}\n</code></pre>\n\n<p>After some exploration, I've found out that:</p>\n\n<ul>\n<li>Puma is trained to look at HTTP header <code>X-Forwarded-For</code> specifically.\nOnce it's passed correctly, Puma should hook it up.\nNo configuration on Puma end is necessary.</li>\n<li><code>request.headers[\"REMOTE_ADDR\"]</code> will stay <code>\"127.0.0.1\"</code>, this doesn't change no matter how hard you try.</li>\n<li>Passing header <code>X-Real-IP</code> <strong>does not</strong> affect the logging issue anyhow.\nBasically you can use <code>set_remote_address header: \"X-Real-IP\"</code> in Puma configuration file to set \"remote address of the connection\" from this header.\nBut Puma itself doesn't look in that direction I don't know any other software that does. Documented here: <a href=\"http://www.rubydoc.info/gems/puma/3.2.0/Puma%2FDSL%3Aset_remote_address\" rel=\"nofollow\">http://www.rubydoc.info/gems/puma/3.2.0/Puma%2FDSL%3Aset_remote_address</a>.</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 379, "user_id": 4454498, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b2b339daa2a73cb8c0ee537b3e6de80d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Condron", "link": "https://stackoverflow.com/users/4454498/ryan-condron"}, "is_accepted": true, "score": 1, "last_activity_date": 1468958083, "creation_date": 1468958083, "answer_id": 38467372, "question_id": 37168779, "link": "https://stackoverflow.com/questions/37168779/puma-shows-al-requests-coming-from-127-0-0-1-when-behind-nginx/38467372#38467372", "title": "Puma shows al requests coming from 127.0.0.1 when behind nginx", "body": "<p>This was my own fault I had all my proxy_set_headers before the try_files. I moved the proxy_set_header directives into the @ruby location block and removed the X-Real-IP header. Everything is working now thank you for all the input.</p>\n"}], "owner": {"reputation": 379, "user_id": 4454498, "user_type": "registered", "accept_rate": 42, "profile_image": "https://www.gravatar.com/avatar/b2b339daa2a73cb8c0ee537b3e6de80d?s=128&d=identicon&r=PG&f=1", "display_name": "Ryan Condron", "link": "https://stackoverflow.com/users/4454498/ryan-condron"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1247, "favorite_count": 0, "accepted_answer_id": 38467372, "answer_count": 2, "score": 3, "last_activity_date": 1468958083, "creation_date": 1462985302, "question_id": 37168779, "link": "https://stackoverflow.com/questions/37168779/puma-shows-al-requests-coming-from-127-0-0-1-when-behind-nginx", "title": "Puma shows al requests coming from 127.0.0.1 when behind nginx", "body": "<p>I am having a problem where the only IP Address that shows up in my rails log is 127.0.0.1, it appears that the remote ip is not getting proxy passed. I am unsure of what I a missing. Nginx is custom compiled within an omnibus package. and I have that build script below as well. If anyone can give me some insight that would be greatly appreciated.</p>\n\n<p>Nginx Build Recipe:</p>\n\n<pre><code>name \"nginx\"\ndefault_version \"1.9.10\"\n\ndependency \"pcre\"\ndependency \"openssl\"\n\nsource url: \"http://nginx.org/download/nginx-#{version}.tar.gz\",\n       md5: \"64cc970988356a5e0fc4fcd1ab84fe57\"\n\nrelative_path \"nginx-#{version}\"\n\nbuild do\n  command [\"./configure\",\n           \"--prefix=#{install_dir}/embedded\",\n           \"--with-http_ssl_module\",\n           \"--with-http_stub_status_module\",\n           \"--with-http_gzip_static_module\",\n           \"--with-http_v2_module\",\n           \"--with-http_realip_module\",\n           \"--with-ipv6\",\n           \"--with-debug\",\n           \"--with-ld-opt=-L#{install_dir}/embedded/lib\",\n           \"--with-cc-opt=\\\"-L#{install_dir}/embedded/lib -I#{install_dir}/embedded/include\\\"\"].join(\" \")\n  command \"make -j #{workers}\", :env =&gt; {\"LD_RUN_PATH\" =&gt; \"#{install_dir}/embedded/lib\"}\n  command \"make install\"\nend\n</code></pre>\n\n<p>Nginx Config:</p>\n\n<pre><code>user smart-mobile smart-mobile;\nworker_processes 1;\nerror_log stderr;\npid nginx.pid;\ndaemon off;\n\nevents {\n  worker_connections 10240;\n}\n\nhttp {\n  #log_format combined '$remote_addr - $remote_user [$time_local] '\n  #                    '\"$request\" $status $body_bytes_sent '\n  #                    '\"$http_referer\" \"$http_user_agent\"';\n  #\n  sendfile on;\n  tcp_nopush on;\n  tcp_nodelay on;\n  keepalive_timeout 65;\n\n  gzip on;\n  gzip_http_version 1.0;\n  gzip_comp_level 2;\n  gzip_proxied any;\n  gzip_types text/plain text/css application/x-javascript text/xml application/xml application/xml+rss text/javascript application/json;\n\n  proxy_cache_path proxy_cache keys_zone=smart-mobile:10m max_size=1g levels=1:2;\n  proxy_cache smart-mobile;\n\n  include /opt/smart-mobile/embedded/conf/mime.types;\n\n  include /var/opt/smart-mobile/nginx/conf/smart-mobile.conf;\n}\n</code></pre>\n\n<p>Nginx Site Config:</p>\n\n<pre><code>upstream smart_mobile {\n  server unix:/var/opt/smart-mobile/puma/puma.socket;\n}\n\n\n\n  server {\n    listen 80;\n    server_name 10.10.20.108;\n\n    access_log /var/log/smart-mobile/nginx/smart-mobile-http.access.log;\n    error_log /var/log/smart-mobile/nginx/smart-mobile-http.error.log;\n\n    root /opt/smart-mobile/embedded/smart-mobile-rails/public;\n    index index.html;\n\n    ## Real IP Module Config\n    ## http://nginx.org/en/docs/http/ngx_http_realip_module.html\n\n    location / {\n      if (-f /opt/smart-mobile/embedded/smart-mobile-rails/tmp/maintenance.enable) {\n        return 503;\n      }\n\n      proxy_http_version 1.1;\n      proxy_set_header X-Real-IP $remote_addr;\n      proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;\n      proxy_set_header Host $http_host;\n      proxy_redirect off;\n      try_files $uri $uri/index.html $uri.html @ruby;\n    }\n\n    location @ruby {\n      proxy_pass http://smart_mobile;\n    }\n\n    error_page 404 /404.html;\n    error_page 402 /402.html;\n    error_page 500 /500.html;\n    error_page 502 /502.html;\n    error_page 503 @maintenance;\n\n    location @maintenance {\n      if ($uri !~ ^/icos/) {\n        rewrite ^(.*)$ /503.html break;\n      }\n    }\n  }\n</code></pre>\n\n<p>Puma Config:</p>\n\n<pre><code>directory '/opt/smart-mobile/embedded/smart-mobile-rails'\nthreads 2,4\nbind 'unix:///var/opt/smart-mobile/puma/puma.socket'\npidfile '/var/opt/smart-mobile/puma/puma.pid'\npreload_app!\n\non_worker_boot do\n  ActiveSupport.on_load(:active_record) do\n    ActiveRecord::Base.establish_connection\n  end\nend\n\nbefore_fork do\n  ActiveRecord::Base.connection_pool.disconnect!\nend\n</code></pre>\n"}, {"tags": ["javascript", "c#", "asp.net", "ruby-on-rails", "ruby"], "answers": [{"tags": [], "owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "is_accepted": true, "score": 2, "last_activity_date": 1462985303, "creation_date": 1462985303, "answer_id": 37168780, "question_id": 37168643, "link": "https://stackoverflow.com/questions/37168643/best-practices-for-changing-rest-api-server/37168780#37168780", "title": "Best practices for changing REST API server", "body": "<p>In Ruby, there are methods which specifically accomplish this. </p>\n\n<p>They come from the <code>activesupport</code> gem.</p>\n\n<p>Install then, then <code>require active_support/all</code>.</p>\n\n<p>Then try the following methods:</p>\n\n<ol>\n<li><code>\"PascalCase\".underscore</code> will return pascal_case</li>\n<li><code>\"underline_case\".camelize</code> will return UnderlineCase</li>\n</ol>\n\n<p>This is included by default in Rails. </p>\n"}, {"tags": [], "owner": {"reputation": 248, "user_id": 4752251, "user_type": "registered", "accept_rate": 0, "profile_image": "https://lh5.googleusercontent.com/-0KhUUj2utxY/AAAAAAAAAAI/AAAAAAAAU6E/ShT3plWsG0o/photo.jpg?sz=128", "display_name": "Johnathan Kanarek", "link": "https://stackoverflow.com/users/4752251/johnathan-kanarek"}, "is_accepted": false, "score": 2, "last_activity_date": 1481729223, "creation_date": 1481729223, "answer_id": 41146261, "question_id": 37168643, "link": "https://stackoverflow.com/questions/37168643/best-practices-for-changing-rest-api-server/41146261#41146261", "title": "Best practices for changing REST API server", "body": "<p>In Kaltura we generate an XML descriptor of each API server, see example: <a href=\"http://www.kaltura.com/api_v3/api_schema.php\" rel=\"nofollow noreferrer\">http://www.kaltura.com/api_v3/api_schema.php</a></p>\n\n<p>We have different servers written in different coding languages so we had to deal with the same issue.</p>\n\n<p>We decided that internally different servers will implement according to their coding standard but the REST API offers a different path to each one of the controllers and actions and the objects and their properties are named externally according to common standard.</p>\n\n<p>To align with each client side language, we generate a different client library for each coding language according to its standard, see the generator: <a href=\"https://github.com/kaltura/clients-generator\" rel=\"nofollow noreferrer\">https://github.com/kaltura/clients-generator</a>, you can use it yourself.</p>\n\n<p>For more server guidelines, see my blog: <a href=\"http://restafar.com/create-new-rest-server/\" rel=\"nofollow noreferrer\">http://restafar.com/create-new-rest-server/</a></p>\n"}], "owner": {"reputation": 422, "user_id": 5001627, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/bXI77.jpg?s=128&g=1", "display_name": "andreshg112", "link": "https://stackoverflow.com/users/5001627/andreshg112"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 56, "favorite_count": 0, "accepted_answer_id": 37168780, "answer_count": 2, "score": 0, "last_activity_date": 1481729223, "creation_date": 1462984826, "question_id": 37168643, "link": "https://stackoverflow.com/questions/37168643/best-practices-for-changing-rest-api-server", "title": "Best practices for changing REST API server", "body": "<p>I have a dilemma: I had created a simple Javascript application that uses a Rails REST API. Variables in Ruby were declared according to their best practices: snake/underline case. In that way, the data received from the client-app, is in that format.\nNow, I want to use another framework for server, ASP.NET. The problem is that the best practices for variables in C# is PascalCase (upper cammelCase). I don't want to change too much code in the Javascript app, but I  wouldn't like to \"break\" the best practices.</p>\n\n<p>What should I do?\nWhat's the best practice or the best way?</p>\n\n<p>Is there a simple way to interprete underline_case, and parse it to PascalCase?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json", "ruby-on-rails-4", "rubygems"], "comments": [{"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1462988672, "post_id": 37168448, "comment_id": 61874490, "body": "The error says to try running <code>gem install json -v &#39;1.8.3&#39;</code>. You should SSH into the machine and run this command. This will show you more verbose errors. Sometimes installing gems requires debugging. You might need system dependencies or maybe there is a version conflict error, etc."}, {"owner": {"reputation": 165, "user_id": 5476387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc313bc8ee7b1a22b7c2584354982007?s=128&d=identicon&r=PG&f=1", "display_name": "vanhiro", "link": "https://stackoverflow.com/users/5476387/vanhiro"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1463019929, "post_id": 37168448, "comment_id": 61886996, "body": "I tried this, but it&#39;s not working."}, {"owner": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1463020587, "post_id": 37168448, "comment_id": 61887155, "body": "I didn&#39;t say it would work. It will show you more verbose (and different) errors. Include the output of running the command on SSH here if you still want help."}, {"owner": {"reputation": 165, "user_id": 5476387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc313bc8ee7b1a22b7c2584354982007?s=128&d=identicon&r=PG&f=1", "display_name": "vanhiro", "link": "https://stackoverflow.com/users/5476387/vanhiro"}, "reply_to_user": {"reputation": 23016, "user_id": 2981429, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/ZcCXx.jpg?s=128&g=1", "display_name": "max pleaner", "link": "https://stackoverflow.com/users/2981429/max-pleaner"}, "edited": false, "score": 0, "creation_date": 1463024180, "post_id": 37168448, "comment_id": 61888026, "body": "Thank you for your help. I tried &#39;gem install json -v &#39;1.8.3&#39;&#39; on Amazon linux with &quot;sudo gem install json -v &#39;1.8.3&#39;&quot; command. and it successfully installed.  However, when I try to deploy, I got same error."}, {"owner": {"reputation": 1099, "user_id": 2799029, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/eea432dc7b47d95cba6b39b0446feb5e?s=128&d=identicon&r=PG&f=1", "display_name": "floum", "link": "https://stackoverflow.com/users/2799029/floum"}, "edited": false, "score": 1, "creation_date": 1463057597, "post_id": 37168448, "comment_id": 61907668, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/37180874/an-error-occurred-while-installing-json-1-8-3-and-bundler-cannot-continue-err\">An error occurred while installing json (1.8.3), and Bundler cannot continue error when i tried to deploy</a>"}], "owner": {"reputation": 165, "user_id": 5476387, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/fc313bc8ee7b1a22b7c2584354982007?s=128&d=identicon&r=PG&f=1", "display_name": "vanhiro", "link": "https://stackoverflow.com/users/5476387/vanhiro"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 759, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462984232, "creation_date": 1462984232, "question_id": 37168448, "link": "https://stackoverflow.com/questions/37168448/an-error-occurred-while-installing-json-1-8-3-and-bundler-cannot-continue-on", "title": "An error occurred while installing json (1.8.3), and Bundler cannot continue. on Amazon Linux", "body": "<p>Hi I tried to deploy my rails application to Amazon Linux.</p>\n\n<p>I got an error</p>\n\n<pre><code> [e93b81e2] Command: cd /var/www/peace/releases/20160511161913 &amp;&amp; ( export RBENV_ROOT=\"$HOME/.rbenv\" RBENV_VERSION=\"2.1.7\" ; $HOME/.rbenv/bin/rbenv exec bundle install --path /var/www/peace/shared/bundle --without development test --deployment --quiet )\nDEBUG [e93b81e2]    An error occurred while installing json (1.8.3), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.3'` succeeds before bundling.\n(Backtrace restricted to imported tasks)\ncap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as ec2-user@52.193.101.5: bundle exit status: 5\nbundle stdout: An error occurred while installing json (1.8.3), and Bundler cannot continue.\nMake sure that `gem install json -v '1.8.3'` succeeds before bundling.\nbundle stderr: Nothing written\n</code></pre>\n\n<p>Please advice Thanks in advance.</p>\n"}, {"tags": ["arrays", "ruby", "csv", "split"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462983147, "post_id": 37168025, "comment_id": 61871202, "body": "You need a CSV reader and writer. Do you have both of those? If so, it&#39;s a case of writing multiple lines for each input line."}], "answers": [{"comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 1, "creation_date": 1462985650, "post_id": 37168757, "comment_id": 61872676, "body": "<code>split(&quot;; &quot;)</code> or <code>split(&#47;;\\s*&#47;)</code> would probably be better."}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1462986045, "post_id": 37168757, "comment_id": 61872911, "body": "@Jordan You&#39;re right! I think your second option is cleverer (to match multiple spaces) so I&#39;ll take that one."}, {"owner": {"reputation": 13, "user_id": 6321369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35dd1e87318eb563ab6f09fe239a76f8?s=128&d=identicon&r=PG&f=1", "display_name": "Rob V", "link": "https://stackoverflow.com/users/6321369/rob-v"}, "edited": false, "score": 0, "creation_date": 1462988334, "post_id": 37168757, "comment_id": 61874271, "body": "@ Jordan, that is perfect.  Thank you so much!"}], "tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": true, "score": 1, "last_activity_date": 1462987943, "last_edit_date": 1462987943, "creation_date": 1462985213, "answer_id": 37168757, "question_id": 37168025, "link": "https://stackoverflow.com/questions/37168025/ruby-split-concatenated-array-element-into-separate-array-row-and-export-to-csv/37168757#37168757", "title": "Ruby split concatenated array element into separate array row and export to CSV", "body": "<p>What about that ?</p>\n\n<pre><code>require 'csv'\n\ndesired_array = []\n\nCSV.foreach('myfile.csv', :headers =&gt; true) do |csv_obj|\n  csv_obj[\"Model\"].split(/;\\s*/).each do |model|\n    new_row = [csv_obj[\"Year\"], csv_obj[\"Make\"], model]\n    desired_array.push(new_row)\n  end\nend\n\np desired_array\n</code></pre>\n\n<p>Which gives the following array :</p>\n\n<pre><code>[\n  [\"1999\", \"Chevy\", \"Camaro\"], \n  [\"1999\", \"Chevy\", \"Corvette\"], \n  [\"1999\", \"Chevy\", \"Cruz\"], \n  [\"2001\", \"Ford\", \"Mustang\"], \n  [\"2001\", \"Ford\", \"Shelby\"], \n  [\"2001\", \"Ford\", \"SHO\"]\n]\n</code></pre>\n"}], "owner": {"reputation": 13, "user_id": 6321369, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/35dd1e87318eb563ab6f09fe239a76f8?s=128&d=identicon&r=PG&f=1", "display_name": "Rob V", "link": "https://stackoverflow.com/users/6321369/rob-v"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 104, "favorite_count": 0, "accepted_answer_id": 37168757, "answer_count": 1, "score": 1, "last_activity_date": 1462987943, "creation_date": 1462983033, "last_edit_date": 1462983098, "question_id": 37168025, "link": "https://stackoverflow.com/questions/37168025/ruby-split-concatenated-array-element-into-separate-array-row-and-export-to-csv", "title": "Ruby split concatenated array element into separate array row and export to CSV", "body": "<p>I am trying to split a concatenated field from a CSV and add it to a new row in Ruby.  Here is an example of the data and desired output.</p>\n\n<p>Sample Data</p>\n\n<pre><code>Year    Make    Model\n1999    Chevy   Camaro; Corvette; Cruz\n2001    Ford    Mustang; Shelby; SHO\n</code></pre>\n\n<p>Desired Output</p>\n\n<pre><code>Year    Make    Model\n1999    Chevy   Camaro\n1999    Chevy   Corvette\n1999    Chevy   Cruz\n2001    Ford    Mustang\n2001    Ford    Shelby\n2001    Ford    SHO\n</code></pre>\n\n<p>My main issue seems to come from the CSV.foreach method which turns each csv row of data into a separate array.  If I try to split the array I cannot seem to get it to create a new row as it reads the csv data line by line.  Any help would be greatly appreciated.   </p>\n"}, {"tags": ["ruby", "amazon-web-services", "amazon-s3", "amazon-elastic-beanstalk"], "answers": [{"comments": [{"owner": {"reputation": 137816, "user_id": 13070, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pio3A.jpg?s=128&g=1", "display_name": "Mark B", "link": "https://stackoverflow.com/users/13070/mark-b"}, "edited": false, "score": 1, "creation_date": 1462990607, "post_id": 37169790, "comment_id": 61875687, "body": "They don&#39;t run on Docker containers, but everything else you said is correct."}, {"owner": {"reputation": 4957, "user_id": 3833773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/554650175/picture?type=large", "display_name": "Yaron Idan", "link": "https://stackoverflow.com/users/3833773/yaron-idan"}, "reply_to_user": {"reputation": 137816, "user_id": 13070, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/pio3A.jpg?s=128&g=1", "display_name": "Mark B", "link": "https://stackoverflow.com/users/13070/mark-b"}, "edited": false, "score": 0, "creation_date": 1462991273, "post_id": 37169790, "comment_id": 61876022, "body": "True that, we ran docker containers in our environment and so I assumed it&#39;s part of the standard beanstalk configuration, but now I see there are other options too. I&#39;ve edited my answer, thanks for the tip."}, {"owner": {"reputation": 21, "user_id": 3972280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7eb22c5fc05332ae6de51bda0098f0e?s=128&d=identicon&r=PG&f=1", "display_name": "RSMEENA", "link": "https://stackoverflow.com/users/3972280/rsmeena"}, "edited": false, "score": 0, "creation_date": 1463028818, "post_id": 37169790, "comment_id": 61889285, "body": "I&#39;m just saving a model which has two strings you can visit my application (<a href=\"http://xyzurl.com\" rel=\"nofollow noreferrer\">xyzurl.com</a>) . But don&#39;t know how to save it outside the app like S3."}, {"owner": {"reputation": 4957, "user_id": 3833773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/554650175/picture?type=large", "display_name": "Yaron Idan", "link": "https://stackoverflow.com/users/3833773/yaron-idan"}, "edited": false, "score": 0, "creation_date": 1463031957, "post_id": 37169790, "comment_id": 61890436, "body": "Persisting your data is not rhat complicated but is outside the scope of this question, I suggest reading about ways to integrate your ruby app with S3 or RDS and then implementing the way you see fit into your app."}, {"owner": {"reputation": 4957, "user_id": 3833773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/554650175/picture?type=large", "display_name": "Yaron Idan", "link": "https://stackoverflow.com/users/3833773/yaron-idan"}, "edited": false, "score": 0, "creation_date": 1463035429, "post_id": 37169790, "comment_id": 61892042, "body": "Here is the documentation for the aws s3 sdk for ruby, you can use that to save your data in s3 - <a href=\"http://docs.aws.amazon.com/AWSRubySDK/latest/AWS/S3.html\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/AWSRubySDK/latest/AWS/S3.html</a>"}, {"owner": {"reputation": 21, "user_id": 3972280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7eb22c5fc05332ae6de51bda0098f0e?s=128&d=identicon&r=PG&f=1", "display_name": "RSMEENA", "link": "https://stackoverflow.com/users/3972280/rsmeena"}, "edited": false, "score": 1, "creation_date": 1463052044, "post_id": 37169790, "comment_id": 61903479, "body": "Thank for help , I just save the data outside in a RDS and it&#39;s working now."}], "tags": [], "owner": {"reputation": 4957, "user_id": 3833773, "user_type": "registered", "accept_rate": 95, "profile_image": "https://graph.facebook.com/554650175/picture?type=large", "display_name": "Yaron Idan", "link": "https://stackoverflow.com/users/3833773/yaron-idan"}, "is_accepted": true, "score": 0, "last_activity_date": 1462991133, "last_edit_date": 1462991133, "creation_date": 1462988442, "answer_id": 37169790, "question_id": 37167620, "link": "https://stackoverflow.com/questions/37167620/ruby-application-aws-data-loss-after-eb-deploy-in-ec2-instance/37169790#37169790", "title": "ruby application aws data loss after eb deploy in ec2 instance", "body": "<p>Your question does not make it clear how you are saving your data, but the first thing you need to understand is that Elastic Beanstalk applications run in an ephemeral state by nature. </p>\n\n<p>This means that whenever you use eb deploy the \"server\" running your application is completely destroyed and another one is brought up instead.</p>\n\n<p>The only way to keep your data persistent between different deploys is by using a source outside the app like S3 or a database, and have the app query the data from there.</p>\n"}], "owner": {"reputation": 21, "user_id": 3972280, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d7eb22c5fc05332ae6de51bda0098f0e?s=128&d=identicon&r=PG&f=1", "display_name": "RSMEENA", "link": "https://stackoverflow.com/users/3972280/rsmeena"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 200, "favorite_count": 0, "accepted_answer_id": 37169790, "answer_count": 1, "score": 0, "last_activity_date": 1462991133, "creation_date": 1462981830, "last_edit_date": 1462989198, "question_id": 37167620, "link": "https://stackoverflow.com/questions/37167620/ruby-application-aws-data-loss-after-eb-deploy-in-ec2-instance", "title": "ruby application aws data loss after eb deploy in ec2 instance", "body": "<p>I deployed my rails application on AWS Elastic Beanstalk following this tutorial (<a href=\"http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html\" rel=\"nofollow\">http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_Ruby_rails.html</a>).</p>\n\n<p>But now when I deploys new version (using command $ eb deploy) instead of updating the application it resets my all data. \nI don't know how to update minor changes, even in html file.\nI also tried DeleteOnTerminate = false, but not working.</p>\n\n<p>Is there any method so I can update my application without losing data? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "json"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462982132, "post_id": 37167481, "comment_id": 61870519, "body": "<code>require</code> is used to fetch a nested structure, raising an error if it is missing. It doesn&#39;t make much sense in this case."}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462982700, "post_id": 37167481, "comment_id": 61870908, "body": "Are you running the latest Rails version? That does seem to be <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html\" rel=\"nofollow noreferrer\">by the book</a>."}], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462982271, "post_id": 37167642, "comment_id": 61870619, "body": "Although this doesn&#39;t raise an error, it&#39;s not what the OP expects. <code>require(:id)</code> merely returns the <code>id</code> parameter, i.e. <code>&quot;500&quot;</code>"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462982770, "post_id": 37167642, "comment_id": 61870961, "body": "It&#39;s interesting that the definition of <code>require</code> contradicts the example given at the top of that page."}, {"owner": {"reputation": 846, "user_id": 6103260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qM0aLbWu1bQ/AAAAAAAAAAI/AAAAAAAAF0o/4cHX5Z6ikw8/photo.jpg?sz=128", "display_name": "Emiliano Della Casa", "link": "https://stackoverflow.com/users/6103260/emiliano-della-casa"}, "edited": false, "score": 0, "creation_date": 1462982800, "post_id": 37167642, "comment_id": 61870980, "body": "This is the way ActionController:Parameters behaves, I think it allows to have all checks in a single line"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462984363, "post_id": 37167642, "comment_id": 61871944, "body": "@EmilianoDellaCasa well, the OP wants to pass the result to <code>update_attributes</code> and <code>update_attributes(&quot;500&quot;)</code> doesn&#39;t make much sense."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462984686, "post_id": 37167642, "comment_id": 61872142, "body": "@tadman indeed, the description is misleading. <code>require</code> doesn&#39;t mark anything."}, {"owner": {"reputation": 846, "user_id": 6103260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qM0aLbWu1bQ/AAAAAAAAAAI/AAAAAAAAF0o/4cHX5Z6ikw8/photo.jpg?sz=128", "display_name": "Emiliano Della Casa", "link": "https://stackoverflow.com/users/6103260/emiliano-della-casa"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462984973, "post_id": 37167642, "comment_id": 61872298, "body": "@Stefan ok now I got what you mean, I will update my answer to avoid misunderstandings"}, {"owner": {"reputation": 405, "user_id": 2482941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e5117fc87c98025f64bc02e7fe1f04?s=128&d=identicon&r=PG", "display_name": "DevDude", "link": "https://stackoverflow.com/users/2482941/devdude"}, "edited": false, "score": 0, "creation_date": 1462985625, "post_id": 37167642, "comment_id": 61872658, "body": "The chaining order of require followed by permit is correct. The problem is with the param sent to require. It needs to be a hash of with the keys that could be filtered on in permit."}], "tags": [], "owner": {"reputation": 846, "user_id": 6103260, "user_type": "registered", "profile_image": "https://lh4.googleusercontent.com/-qM0aLbWu1bQ/AAAAAAAAAAI/AAAAAAAAF0o/4cHX5Z6ikw8/photo.jpg?sz=128", "display_name": "Emiliano Della Casa", "link": "https://stackoverflow.com/users/6103260/emiliano-della-casa"}, "is_accepted": false, "score": 0, "last_activity_date": 1463039807, "last_edit_date": 1463039807, "creation_date": 1462981873, "answer_id": 37167642, "question_id": 37167481, "link": "https://stackoverflow.com/questions/37167481/updating-objects-in-ror-with-api-call/37167642#37167642", "title": "Updating objects in RoR with API call", "body": "<p>You should change the order between require and permit, like that</p>\n\n<pre><code>params.permit(:email).require(:id)\n</code></pre>\n\n<p>because permit returns the entire hash, while require returns the specific parameter</p>\n\n<p>Reference <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-require\" rel=\"nofollow\">here</a></p>\n\n<p><strong>UPDATE</strong></p>\n\n<p>However, as others pointed out, you shouldn't use <em>require</em> with a single attribute, as it is most commonly used for hashes instead</p>\n"}, {"tags": [], "owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "is_accepted": true, "score": 4, "last_activity_date": 1462982978, "creation_date": 1462982978, "answer_id": 37168006, "question_id": 37167481, "link": "https://stackoverflow.com/questions/37167481/updating-objects-in-ror-with-api-call/37168006#37168006", "title": "Updating objects in RoR with API call", "body": "<p>I believe you are misunderstanding the purpose of <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-require\" rel=\"nofollow\"><code>require</code></a> and <a href=\"http://api.rubyonrails.org/classes/ActionController/Parameters.html#method-i-permit\" rel=\"nofollow\"><code>permit</code></a>.</p>\n\n<p><code>require</code> is generally used in combination with a <code>Hash</code> and a form, to make sure the controller receives an Hash that exists and contains some expected attributes. Note that <code>require</code> will either raise, or extract the value associated with the required key, and return that value.</p>\n\n<p><code>permit</code> works as a filter, it explicitly allows only certain fields. The returned value is the original params Hash, whitelisted.</p>\n\n<p>In your case, <code>require</code> does not make any sense at all, unless you pass a nested JSON like this one</p>\n\n<pre><code>{\"user\": {\"email\":\"newadres@live.com\", \"id\":500}}\n</code></pre>\n\n<p>but even in that case, it would be</p>\n\n<pre><code>params.require(:user).permit(:email)\n</code></pre>\n\n<p>In your current scenario, the correct code is</p>\n\n<pre><code>params.permit(:email)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 405, "user_id": 2482941, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/59e5117fc87c98025f64bc02e7fe1f04?s=128&d=identicon&r=PG", "display_name": "DevDude", "link": "https://stackoverflow.com/users/2482941/devdude"}, "is_accepted": false, "score": 0, "last_activity_date": 1462985212, "creation_date": 1462985212, "answer_id": 37168756, "question_id": 37167481, "link": "https://stackoverflow.com/questions/37167481/updating-objects-in-ror-with-api-call/37168756#37168756", "title": "Updating objects in RoR with API call", "body": "<p>One way to fix this, keeping with the spirit of the Rails docs: </p>\n\n<pre><code>def safe_params\n    params.require(:user).permit(:email)\nend\n</code></pre>\n\n<p>And update the json:</p>\n\n<pre><code>{\"user\": {\"email\":\"newadres@live.com\"}, \"id\": 500}\n</code></pre>\n"}], "owner": {"reputation": 2896, "user_id": 3361028, "user_type": "registered", "accept_rate": 88, "profile_image": "https://www.gravatar.com/avatar/b53a63319b061edb80dc910c10cfbfd1?s=128&d=identicon&r=PG&f=1", "display_name": "hY8vVpf3tyR57Xib", "link": "https://stackoverflow.com/users/3361028/hy8vvpf3tyr57xib"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 105, "favorite_count": 0, "accepted_answer_id": 37168006, "answer_count": 3, "score": 1, "last_activity_date": 1463039807, "creation_date": 1462981515, "question_id": 37167481, "link": "https://stackoverflow.com/questions/37167481/updating-objects-in-ror-with-api-call", "title": "Updating objects in RoR with API call", "body": "<p>I am trying to configure my ruby on rails application in such a manner that I can update values with http Patch calls from for example a Angular app. Currently I have the following method of which I expect it to work:</p>\n\n<p><strong>users_controller.rb</strong></p>\n\n<pre><code>  def safe_params\n    params.require(:id).permit(:email)\n  end\n\n  def update\n    user = User.find(params[:id])\n    user.update_attributes(safe_params)\n    render nothing: true, status: 204\n  end\n</code></pre>\n\n<p>However, I get the following error when I pass some simple JSON:</p>\n\n<blockquote>\n  <p>undefined method `permit' for \"500\":String</p>\n</blockquote>\n\n<p>Passed JSON:</p>\n\n<pre><code>{\"email\":\"newadres@live.com\", \"id\":500}\n</code></pre>\n\n<p>Do you guys know what I am doing wrong?</p>\n"}, {"tags": ["javascript", "ruby", "google-maps", "ruby-on-rails-4", "google-maps-api-3"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462982359, "post_id": 37167434, "comment_id": 61870679, "body": "Please show the Javascript code that calls initMap() for each of the showrooms, as well as the Ruby code that initializes the Javascript array of showrooms.  Whatever code is necessary to bind together the view and the dynamic behavior is needed."}, {"owner": {"reputation": 53, "user_id": 3520757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65381f591675fcfd88e9b18b437fd018?s=128&d=identicon&r=PG&f=1", "display_name": "skreebidedeep", "link": "https://stackoverflow.com/users/3520757/skreebidedeep"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462983026, "post_id": 37167434, "comment_id": 61871124, "body": "Michael, I have added the showroom.js and showroom_controller.rb.  Thank you for looking at this."}], "answers": [{"comments": [{"owner": {"reputation": 53, "user_id": 3520757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65381f591675fcfd88e9b18b437fd018?s=128&d=identicon&r=PG&f=1", "display_name": "skreebidedeep", "link": "https://stackoverflow.com/users/3520757/skreebidedeep"}, "edited": false, "score": 0, "creation_date": 1462986329, "post_id": 37168466, "comment_id": 61873053, "body": "Thanks!  I had to add <code>myLatLong</code>,<code>map</code>,<code>infowindow</code>, and <code>marker</code> as local variables.  Now it works like it should."}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 1, "last_activity_date": 1462984271, "creation_date": 1462984271, "answer_id": 37168466, "question_id": 37167434, "link": "https://stackoverflow.com/questions/37167434/if-multiple-google-maps-on-same-page-clicking-any-marker-highlights-bottom-most/37168466#37168466", "title": "If Multiple Google Maps on Same page, clicking any marker highlights bottom-most map marker", "body": "<p>It turns out to have been simple: map is a global variable, so will refer to the last map defined when the click event opens the info window.  If you make map local to the initMap function, it looks like it should work.</p>\n"}], "owner": {"reputation": 53, "user_id": 3520757, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/65381f591675fcfd88e9b18b437fd018?s=128&d=identicon&r=PG&f=1", "display_name": "skreebidedeep", "link": "https://stackoverflow.com/users/3520757/skreebidedeep"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 32, "favorite_count": 0, "accepted_answer_id": 37168466, "answer_count": 1, "score": 1, "last_activity_date": 1462984899, "creation_date": 1462981379, "last_edit_date": 1462984899, "question_id": 37167434, "link": "https://stackoverflow.com/questions/37167434/if-multiple-google-maps-on-same-page-clicking-any-marker-highlights-bottom-most", "title": "If Multiple Google Maps on Same page, clicking any marker highlights bottom-most map marker", "body": "<p>First off, I'm not having an issue getting the maps to display correctly, and the markers are where they need to be on the map.  My issue is when I have multiple maps shown for a state, if you click the marker to show the <code>infowindow</code> on any map, the <code>contentString</code> pops up for the bottom-most map.  </p>\n\n<p>Here is the code displaying the map(s) on the page:</p>\n\n<pre><code>&lt;% @showrooms_nearby.each do |showroom| %&gt;\n      &lt;% address_url = \"\" %&gt;\n      &lt;div class=\"row showroom-results\"&gt;\n        &lt;div class=\"col-md-8\"&gt;\n          &lt;div id=\"&lt;%= showroom.id %&gt;\" style=\"height:400px; width:100%; clear:both;\"&gt;&lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div class=\"col-md-4\"&gt;\n          &lt;div class=\"card\"&gt;\n            &lt;div class=\"card-block\"&gt;\n              &lt;h4 class=\"card-title\"&gt;&lt;%= showroom.name %&gt;&lt;/h4&gt;\n              &lt;div class=\"showroom-info showroom-address\"&gt;\n                &lt;% if showroom.design_center %&gt;\n                  &lt;% address_url = address_url + \" #{showroom.design_center}\" %&gt;\n                  &lt;%= showroom.design_center %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n                &lt;% if showroom.address1 %&gt;\n                  &lt;% address_url = address_url + \" #{showroom.address1}\" %&gt;\n                  &lt;%= showroom.address1 %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n                &lt;% if showroom.address2 %&gt;\n                  &lt;% address_url = address_url + \" #{showroom.address2}\" %&gt;\n                  &lt;%= showroom.address2 %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n                &lt;% if showroom.address3 %&gt;\n                  &lt;% address_url = address_url + \" #{showroom.address3}\" %&gt;\n                  &lt;%= showroom.address3 %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n                &lt;% if showroom.city %&gt;\n                  &lt;% address_url = address_url + \" #{showroom.city}\" %&gt;\n                  &lt;%= showroom.city %&gt;,&amp;nbsp;\n                &lt;% end %&gt;\n                &lt;% if showroom.state %&gt;\n                  &lt;% address_url = address_url + \" #{showroom.state}\" %&gt;\n                  &lt;%= showroom.state %&gt;&amp;nbsp;&amp;nbsp;\n                &lt;% end %&gt;\n                &lt;% if showroom.zip %&gt;\n                  &lt;% address_url = address_url + \" #{showroom.zip}\" %&gt;\n                  &lt;%= showroom.zip %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n                &lt;% if showroom.country != 'US' %&gt;\n                  &lt;% address_url = address_url + \" #{showroom.country}\" %&gt;\n                  &lt;% showroom.country %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n              &lt;/div&gt;\n              &lt;div class=\"showroom-info showroom-contact\"&gt;\n                &lt;% if showroom.phone %&gt;\n                  Phone: &lt;%= showroom.phone %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n                &lt;% if showroom.fax %&gt;\n                  Fax: &lt;%= showroom.fax %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n                &lt;% if showroom.email %&gt;\n                  &lt;%= mail_to showroom.email %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n                &lt;% if showroom.website %&gt;\n                  &lt;%= link_to showroom.website %&gt; &lt;br&gt;\n                &lt;% end %&gt;\n              &lt;/div&gt;\n              &lt;div class=\"showroom-info showroom-brands\"&gt;\n                &lt;% if showroom.brands %&gt;\n                  Brands:&lt;br&gt;\n                  &lt;% brand_sort(showroom.brands).each_with_index do |brand, index| %&gt;\n                    &lt;% if index == showroom.brands.size - 1 %&gt;\n                      &lt;%= brand_pretty(brand) %&gt;&amp;nbsp;\n                    &lt;% else %&gt;\n                      &lt;%= brand_pretty(brand) %&gt;,\n                    &lt;% end %&gt;\n                  &lt;% end %&gt;\n                &lt;% end %&gt;\n              &lt;/div&gt;\n              &lt;div class=\"showroom-info showroom-links\"&gt;\n                &lt;a href=\"https://maps.google.com?daddr=&lt;%= address_url.parameterize.gsub('-', '+') %&gt;\" target=\"_blank\"&gt;Get Directions&lt;/a&gt;\n              &lt;/div&gt;\n              &lt;script&gt;$(window).load(function() {initMap('&lt;%= showroom.id %&gt;', &lt;%= showroom.latitude %&gt;, &lt;%= showroom.longitude %&gt;);});&lt;/script&gt;\n            &lt;/div&gt;\n          &lt;/div&gt;\n        &lt;/div&gt;\n      &lt;/div&gt;\n      &lt;hr class=\"showroom-divider\"&gt;\n    &lt;% end %&gt;\n</code></pre>\n\n<p>Here is the maps.js.erb:</p>\n\n<pre><code>var map;\nfunction initMap(id, lat, lng) {\n  myLatLng = {lat: lat, lng: lng};\n\n  contentString = \"Brand Showroom\";\n\n  map = new google.maps.Map(document.getElementById(id), {\n    center: myLatLng,\n    zoom: 15\n  });\n\n  infowindow = new google.maps.InfoWindow({\n    content: contentString\n  });\n\n  marker = new google.maps.Marker({\n    position: myLatLng,\n    map: map\n  });\n\n  marker.addListener('click', function() {\n    infowindow.open(map, marker);\n  });\n}\n</code></pre>\n\n<p>showroom.js:</p>\n\n<pre><code>function displayShowrooms(country, state, stateName) {\n\n  var jShowroomHeader = $(\"span.showroom-location\");\n  var jShowroomWrapper = $(\"div.showroom-wrapper\");\n\n  if (jShowroomWrapper.length) {\n    if (country == 'US') {\n      var strURI_Showrooms = (\"/showrooms/\" + country + \"/\" + state);\n    } else {\n      var strURI_Showrooms = (\"/showrooms/\" + country);\n    }\n\n\n    $.ajax(strURI_Showrooms, {\n      method : \"GET\",\n      async  : true ,\n      cache  : false,\n      timeout: 5000 ,\n      headers: { \"X-CSRF-Token\": $(\"meta[name=csrf-token]\").prop(\"content\") }\n    }) // [ajax, get list of showrooms matching our selection]\n\n      .done(function (objData) {\n        jShowroomHeader.empty().append(\"Showrooms in \" + stateName);\n        jShowroomWrapper.empty();\n\n        if (objData.length) {\n          $.each(objData, function(index, showroom) {\n            jShowroomWrapper.append(\" \\\n              &lt;div class='row' id='showroom-result-\" + showroom.id + \"'&gt; \\\n                &lt;div class='col-md-8'&gt; \\\n                  &lt;div id='\"+ showroom.id +\"' style='height:400px; width:100%; clear:both;'&gt;&lt;/div&gt; \\\n                &lt;/div&gt; \\\n                &lt;div class='col-md-4'&gt; \\\n                  &lt;div class='card'&gt; \\\n                    &lt;div class='card-block'&gt; \\\n                      &lt;h4 class='card-title'&gt;\" + showroom.name +\"&lt;/h4&gt; \\\n                      &lt;a class='showroomAddressLink' target='_blank'&gt;  \\\n                      &lt;div class='showroom-info showroom-address'&gt; \\\n                      &lt;/div&gt; \\\n                      &lt;/a&gt; \\\n                      &lt;div class='showroom-info showroom-contact'&gt; \\\n                      &lt;/div&gt; \\\n                      &lt;div class='showroom-info showroom-brands'&gt; \\\n                        Brands:&lt;br&gt; \\\n                      &lt;/div&gt; \\\n                      &lt;div class='showroom-info showroom-links'&gt; \\\n                      &lt;/div&gt; \\\n                    &lt;/div&gt; \\\n                  &lt;/div&gt; \\\n                &lt;/div&gt; \\\n              &lt;/div&gt; \\\n              &lt;hr class='showroom-divider'&gt; \\\n              \");\n            var jShowroomResult = jShowroomWrapper.find('#showroom-result-'+showroom.id);\n            var address_url = showroom.name;\n            if (showroom.design_center != null) {\n              jShowroomResult.find('.showroom-address').append(showroom.design_center + \"&lt;br&gt;\");\n              address_url += \" \" + showroom.design_center;\n            }\n            if (showroom.address1 != null) {\n              jShowroomResult.find('.showroom-address').append(showroom.address1 + \"&lt;br&gt;\");\n              address_url += \" \" + showroom.address1;\n            }\n            if (showroom.address2 != null) {\n              jShowroomResult.find('.showroom-address').append(showroom.address2 + \"&lt;br&gt;\");\n              address_url += \" \" + showroom.address2;\n            }\n            if (showroom.address3 != null) {\n              jShowroomResult.find('.showroom-address').append(showroom.address3 + \"&lt;br&gt;\");\n              address_url += \" \" + showroom.address3;\n            }\n            if (showroom.city != null) {\n              jShowroomResult.find('.showroom-address').append(showroom.city + \",&amp;nbsp;\");\n              address_url += \" \" + showroom.city;\n            }\n            if (showroom.state != null) {\n              jShowroomResult.find('.showroom-address').append(showroom.state + \"&amp;nbsp;&amp;nbsp;\");\n              address_url += \" \" + showroom.state;\n            }\n            if (showroom.zip != null) {\n              jShowroomResult.find('.showroom-address').append(showroom.zip + \"&lt;br&gt;\");\n              address_url += \" \" + showroom.zip;\n            }\n            if (showroom.country != null &amp;&amp; showroom.country != 'US') {\n              jShowroomResult.find('.showroom-address').append(showroom.country + \"&lt;br&gt;\");\n              address_url += \" \" + showroom.country;\n            }\n            if (showroom.phone != null) {\n              jShowroomResult.find('.showroom-contact').append(\"Phone: \" + \"&lt;a href='tel:'\" + showroom.phone + \"&gt;\" + showroom.phone + \"&lt;/a&gt;\" + \"&lt;br&gt;\");\n            }\n            if (showroom.fax != null) {\n              jShowroomResult.find('.showroom-contact').append(\"Fax: \" + showroom.fax + \"&lt;br&gt;\");\n            }\n            if (showroom.email != null) {\n              jShowroomResult.find('.showroom-contact').append(\"&lt;a href='mailto:\" + showroom.email + \"'&gt;\" + showroom.email + \"&lt;br&gt;\");\n            }\n            if (showroom.website != null) {\n              jShowroomResult.find('.showroom-contact').append(\"&lt;a href='\" + showroom.website + \"' target='_blank'&gt;\" + showroom.website + \"&lt;br&gt;\");\n            }\n            if (showroom.brands != null) {\n              $.each(showroom.brands, function (i, brand) {\n                if (i == (showroom.brands.length - 1)) {\n                  jShowroomResult.find('.showroom-brands').append(brand);\n                } else {\n                  jShowroomResult.find('.showroom-brands').append(brand + \",&amp;nbsp;\")\n                }\n              });\n            }\n\n            jShowroomResult.find('.showroomAddressLink').attr(\"href\", \"https://maps.google.com/?q=\"+address_url.toLowerCase().replace(/[^a-z0-9]+/g,'+').replace(/(^-|-$)/g,''))\n\n            initMap(showroom.id, showroom.latitude, showroom.longitude);\n          }); // for [every showroom]\n        } // if [we have showrooms]\n        else {\n          jShowroomWrapper.append(\"&lt;div class='row showroom-results'&gt;&lt;div class='col-md-12 center'&gt;No showrooms are located in \" + stateName + \". Please search another location or call (555) 555-5555 for assistance.&lt;/div&gt;\")\n        }\n      })\n  } \n}\n</code></pre>\n\n<p>showroom_controller.rb:</p>\n\n<pre><code>class ShowroomsController &lt; ApplicationController\n  def landing\n    lat = location.latitude\n    lon = location.longitude\n    @distance = 50\n    @user_location = [lat, lon]\n    @showrooms = Showroom.all.where('? = ANY (brands)', brand(request)).order('id ASC')\n    @showrooms_nearby = @showrooms.near(@user_location, @distance)\n  end\n\n  def search\n    @showrooms = if params[:state]\n                   Showroom.where(country: params[:country].upcase, state: params[:state].upcase)\n                 else\n                   Showroom.where(country: params[:country].upcase)\n                 end\n\n    @showrooms.each do |showroom|\n      showroom.brands = brand_sort(showroom.brands)\n      showroom.brands.collect! { |brand|\n        (brand == 'brand1') ? 'Brand1' :\n        (brand == 'brand2') ? 'Brand2' :\n        (brand == 'brand3') ? 'Brand3' :\n        (brand == 'brand4') ? 'Brand4' :\n        (brand == 'brand5') ? 'Brand5' :\n        (brand == 'brand6') ? 'Brand6' : brand\n      }\n\n    end\n\n    render json: @showrooms\n  end\nend\n</code></pre>\n\n<p>Thank you for any and all help guys!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"tags": [], "owner": {"reputation": 867, "user_id": 4563235, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/M7Zcp.jpg?s=128&g=1", "display_name": "hypern", "link": "https://stackoverflow.com/users/4563235/hypern"}, "is_accepted": false, "score": 1, "last_activity_date": 1462983538, "last_edit_date": 1462983538, "creation_date": 1462983097, "answer_id": 37168050, "question_id": 37167079, "link": "https://stackoverflow.com/questions/37167079/unable-to-add-a-string-to-a-rails-generated-reference-number-rails-4/37168050#37168050", "title": "unable to add a string to a rails generated reference number - Rails 4", "body": "<p>You are not assigning the updated reference string to the reference attribute of the payment record before saving.</p>\n\n<pre><code>payment.reference = payment.generate_reference_number_main\n</code></pre>\n\n<p>Also, depending on how your code runs, you may have to watch out for this line</p>\n\n<pre><code>random_number = self.reference = SecureRandom.hex(5)\n</code></pre>\n\n<p>setting the reference value to a SecureRandom.hex(5) value before you save the record each time.</p>\n"}, {"tags": [], "owner": {"reputation": 1446, "user_id": 4005147, "user_type": "registered", "accept_rate": 100, "profile_image": "https://graph.facebook.com/100001011355894/picture?type=large", "display_name": "Padhu", "link": "https://stackoverflow.com/users/4005147/padhu"}, "is_accepted": true, "score": 2, "last_activity_date": 1462990539, "last_edit_date": 1462990539, "creation_date": 1462983601, "answer_id": 37168221, "question_id": 37167079, "link": "https://stackoverflow.com/questions/37167079/unable-to-add-a-string-to-a-rails-generated-reference-number-rails-4/37168221#37168221", "title": "unable to add a string to a rails generated reference number - Rails 4", "body": "<p>You can do like this.</p>\n\n<pre><code>def generate_reference_number_main \nself.reference = \"JC\"+ SecureRandom.hex(5) unless self.reference \nend\n</code></pre>\n"}], "owner": {"reputation": 1377, "user_id": 3734125, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/4c82fc440ab08376bc41a5e229c86e26?s=128&d=identicon&r=PG", "display_name": "ARTLoe", "link": "https://stackoverflow.com/users/3734125/artloe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 37168221, "answer_count": 2, "score": -1, "last_activity_date": 1462990539, "creation_date": 1462980382, "last_edit_date": 1462983191, "question_id": 37167079, "link": "https://stackoverflow.com/questions/37167079/unable-to-add-a-string-to-a-rails-generated-reference-number-rails-4", "title": "unable to add a string to a rails generated reference number - Rails 4", "body": "<p>i am unsure why my method is not saving my reference number - your help would be much appreciated.</p>\n\n<ul>\n<li>i have a method that automatically generates a reference number</li>\n<li>when a reference number is generated i would like to add the string \"JC\" at the beginning of the generated reference </li>\n<li>eg: generated reference number: a3a8a957c8 and would like to have JCa3a8a957c8</li>\n<li>my code works correctly in the console but it dose not save the added string to the generated reference number</li>\n<li>when i call up payment.reference the string is not saved alongside with the automatically generated reference</li>\n</ul>\n\n<blockquote>\n  <p>could one kindly advise me why the string \"JC\" is not added onto the\n  generated reference number</p>\n</blockquote>\n\n<p>-</p>\n\n<blockquote>\n  <p>model: payment.rb</p>\n</blockquote>\n\n<pre><code>class Payment &lt; ActiveRecord::Base\n  before_create :generate_reference_number_main\n\n  def generate_reference_number_main\n    begin\n      random_number = self.reference = SecureRandom.hex(5)\n    end while self.class.exists?(reference: reference)\n    ref_number = \"JC\" + random_number\n  end\nend \n</code></pre>\n\n<blockquote>\n  <p>terminal - console</p>\n</blockquote>\n\n<pre><code>payment = Payment.last\n#payment details displayed\n\npayment.generate_reference_number_main\n#JC2dcbbfdaa2\n\npayment.save\n#true\n\npayment.reference\n#2dcbbfdaa2\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "date"], "answers": [{"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462979715, "post_id": 37166782, "comment_id": 61868805, "body": "You can also use <code>Date.new(...)</code> (<code>civil</code> is an alias for <code>new</code>)"}, {"owner": {"reputation": 1298, "user_id": 3274024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c354a301d891e2464f2e2c89625a2c8?s=128&d=identicon&r=PG", "display_name": "jfornoff", "link": "https://stackoverflow.com/users/3274024/jfornoff"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462980218, "post_id": 37166782, "comment_id": 61869183, "body": "Good catch, didnt think of that when i wrote my example. I&#39;ll edit that in just in case!"}], "tags": [], "owner": {"reputation": 1298, "user_id": 3274024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c354a301d891e2464f2e2c89625a2c8?s=128&d=identicon&r=PG", "display_name": "jfornoff", "link": "https://stackoverflow.com/users/3274024/jfornoff"}, "is_accepted": true, "score": 6, "last_activity_date": 1462980232, "last_edit_date": 1462980232, "creation_date": 1462979541, "answer_id": 37166782, "question_id": 37166726, "link": "https://stackoverflow.com/questions/37166726/how-to-get-start-day-and-end-day-of-a-particular-month-and-year-in-ruby/37166782#37166782", "title": "How to get start day and end day of a particular month and year in ruby?", "body": "<p><code>Date.civil</code> sounds like what you need</p>\n\n<pre><code>start_date = Date.civil(2011, 1, 1)  #=&gt; Sat, 01 Jan 2011\nend_date = Date.civil(2011, 12, -1)   #=&gt; Sat, 31 Dec 2011\n</code></pre>\n\n<p>Docs: <a href=\"http://ruby-doc.org/stdlib-2.1.1/libdoc/date/rdoc/Date.html#method-c-civil\" rel=\"nofollow\">here</a></p>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": false, "score": 6, "last_activity_date": 1462981353, "last_edit_date": 1462981353, "creation_date": 1462980549, "answer_id": 37167139, "question_id": 37166726, "link": "https://stackoverflow.com/questions/37166726/how-to-get-start-day-and-end-day-of-a-particular-month-and-year-in-ruby/37167139#37167139", "title": "How to get start day and end day of a particular month and year in ruby?", "body": "<p>In addition to jfornoff's excellent answer, Rails' <em>Active Support</em> gem comes with a rich set of <a href=\"http://guides.rubyonrails.org/active_support_core_extensions.html#extensions-to-date\" rel=\"nofollow\">date and time methods</a>:</p>\n\n<pre><code>require 'active_support/core_ext/date' #to cherry pick just date helpers\n\nd = Date.new(2011, 4)  #=&gt; Fri, 01 Apr 2011\n\nd.beginning_of_month   #=&gt; Fri, 01 Apr 2011\nd.end_of_month         #=&gt; Sat, 30 Apr 2011\nd.all_month            #=&gt; Fri, 01 Apr 2011..Sat, 30 Apr 2011\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1462987952, "creation_date": 1462987952, "answer_id": 37169628, "question_id": 37166726, "link": "https://stackoverflow.com/questions/37166726/how-to-get-start-day-and-end-day-of-a-particular-month-and-year-in-ruby/37169628#37169628", "title": "How to get start day and end day of a particular month and year in ruby?", "body": "<pre><code>require 'date' \n\nstart_date = Date.new(2016, 2)\n  #=&gt; #&lt;Date: 2016-02-01 ((2457420j,0s,0n),+0s,2299161j)&gt; \nend_date = (start_date &gt;&gt; 1) - 1\n  #=&gt; #&lt;Date: 2016-02-29 ((2457448j,0s,0n),+0s,2299161j)&gt; \n</code></pre>\n"}], "owner": {"reputation": 1044, "user_id": 4929150, "user_type": "registered", "accept_rate": 26, "profile_image": "https://www.gravatar.com/avatar/1f9a6a13c0a52d12b585ab8a36e68acb?s=128&d=identicon&r=PG&f=1", "display_name": "John", "link": "https://stackoverflow.com/users/4929150/john"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 300, "favorite_count": 0, "accepted_answer_id": 37166782, "answer_count": 3, "score": -1, "last_activity_date": 1462987952, "creation_date": 1462979364, "question_id": 37166726, "link": "https://stackoverflow.com/questions/37166726/how-to-get-start-day-and-end-day-of-a-particular-month-and-year-in-ruby", "title": "How to get start day and end day of a particular month and year in ruby?", "body": "<p>Iam having the <code>month</code> value like <code>(1 to 12)</code> and <code>year</code> value like <code>2011 to 2012</code> by passing these parameters i want to get the <code>starting day</code> and <code>ending day</code> of the paticular <code>month</code> and <code>year</code>. how can i do this in ruby?</p>\n"}, {"tags": ["ruby", "rubocop"], "comments": [{"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1462981726, "post_id": 37166496, "comment_id": 61870213, "body": "Your question is unclear. Do you want the cop to always be a warning, or only a warning in certain files/classes/methods? Are you saying you want different behavior &quot;in commits&quot; (by which I&#39;m guessing you mean a git pre-commit hook?) than when invoking <code>rubocop</code> manually? Perhaps you could edit your question to state your goal more clearly."}, {"owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "edited": false, "score": 0, "creation_date": 1463061907, "post_id": 37166496, "comment_id": 61911221, "body": "I want that cop to still show up and I want it to be a warning instead of an error. I found my answer right in the documentation. I had missed it like 12x in a row but after a nights rest I found it right away. apologies. I&#39;ll put the answer up for the sake of posterity."}], "answers": [{"comments": [{"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 1, "creation_date": 1463062550, "post_id": 37189409, "comment_id": 61911774, "body": "New to me, glad I saw this. I just learned that <a href=\"https://github.com/bbatsov/rubocop#exit-codes\" rel=\"nofollow noreferrer\">the <code>--fail-level</code> flag</a> makes use of failure severity."}], "tags": [], "owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "is_accepted": false, "score": 6, "last_activity_date": 1463062043, "creation_date": 1463062043, "answer_id": 37189409, "question_id": 37166496, "link": "https://stackoverflow.com/questions/37166496/how-can-i-make-rubocop-treat-some-errors-as-warnings-instead-of-errors/37189409#37189409", "title": "How can I make Rubocop treat some errors as warnings instead of errors?", "body": "<p>The answer turned out to be fairly simple. you can specify the Severity of a cop:</p>\n\n<pre><code>Metrics/MethodLength:\n  Max: 100\n  Severity: warning\n</code></pre>\n\n<p>The question ends up being slightly silly because I found the answer right where I'd been looking for it--in the documentation.</p>\n"}], "owner": {"reputation": 12705, "user_id": 483040, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Ux8AH.jpg?s=128&g=1", "display_name": "jaydel", "link": "https://stackoverflow.com/users/483040/jaydel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 402, "favorite_count": 0, "answer_count": 1, "score": 3, "last_activity_date": 1463062262, "creation_date": 1462978873, "last_edit_date": 1463062262, "question_id": 37166496, "link": "https://stackoverflow.com/questions/37166496/how-can-i-make-rubocop-treat-some-errors-as-warnings-instead-of-errors", "title": "How can I make Rubocop treat some errors as warnings instead of errors?", "body": "<p>I want to find a way to change a cop from an error to a warning so that I can alter how I deal with the output. I still want the output so that I can examine those situations, but I don't want them to be errors. I can then change the offending code or wrap it in a specific exclusion as needed.</p>\n\n<p>I found the answer this morning and have marked it as such.</p>\n"}, {"tags": ["css", "ruby", "capybara"], "comments": [{"owner": {"reputation": 632, "user_id": 2372603, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/dd4c2cc684a3f83a206b9fdf53e57ea3?s=128&d=identicon&r=PG", "display_name": "stmllr", "link": "https://stackoverflow.com/users/2372603/stmllr"}, "edited": false, "score": 2, "creation_date": 1462978933, "post_id": 37166196, "comment_id": 61868206, "body": "How is that related to ruby?"}, {"owner": {"reputation": 2736, "user_id": 592229, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d23e0616c0b2862d2226ea0792c920cc?s=128&d=identicon&r=PG", "display_name": "ezuk", "link": "https://stackoverflow.com/users/592229/ezuk"}, "edited": false, "score": 1, "creation_date": 1462979003, "post_id": 37166196, "comment_id": 61868259, "body": "Using the same ID more than once is invalid... You gotta fix the markup there. And you might wanna specify we&#39;re talking Cucumber/Capybara here just for people who don&#39;t recognize the syntax offhand."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462979179, "post_id": 37166196, "comment_id": 61868373, "body": "Does your selector work somewhere else, e.g. in your browser?"}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "reply_to_user": {"reputation": 2736, "user_id": 592229, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/d23e0616c0b2862d2226ea0792c920cc?s=128&d=identicon&r=PG", "display_name": "ezuk", "link": "https://stackoverflow.com/users/592229/ezuk"}, "edited": false, "score": 1, "creation_date": 1462979228, "post_id": 37166196, "comment_id": 61868411, "body": "As @ezuk said, it is not valid to have the same id more than once. It should be fixed. Let&#39;s assume you cannot fix it (it&#39;s not your website, etc.) then you could simply iterate over all the occurences of the id (&quot;gia0&quot;) and add some unique value such as the iteration number, so the first time it is gia0_1, the second becomes gia0_2, etc. The id is now magically unique again, and should become &quot;legal&quot; (vs the &quot;illegal&quot; error you get now)."}], "answers": [{"tags": [], "owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "is_accepted": false, "score": 2, "last_activity_date": 1462982050, "creation_date": 1462982050, "answer_id": 37167694, "question_id": 37166196, "link": "https://stackoverflow.com/questions/37166196/how-to-click-on-link-inside-a-table-that-appears-at-three-places-with-same-name/37167694#37167694", "title": "How to click on link inside a table that appears at three places with same name and same ID", "body": "<p>I believe the \"invalid selector\" error is caused by this:</p>\n\n<pre><code>td:third-child\n</code></pre>\n\n<p><code>:third-child</code> is not a selector that exists in CSS. You probably want to use the <a href=\"https://developer.mozilla.org/en-US/docs/Web/CSS/:nth-child\" rel=\"nofollow\"><code>:nth-child(an+b)</code></a> selector instead, e.g.:</p>\n\n<pre><code>find('tr:first-child &gt; td:nth-child(3) [id^=\"gia0\"]').click\n</code></pre>\n\n<p>As others mentioned above, it's also a problem that your document has duplicate <code>id</code>s, but I'm not sure how or if that will manifest in Capybara.</p>\n"}], "owner": {"reputation": 47, "user_id": 5859086, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/a5f3afc00a67f13fbdab18db6d52d804?s=128&d=identicon&r=PG&f=1", "display_name": "RPD", "link": "https://stackoverflow.com/users/5859086/rpd"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 108, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462994210, "creation_date": 1462978157, "last_edit_date": 1462994210, "question_id": 37166196, "link": "https://stackoverflow.com/questions/37166196/how-to-click-on-link-inside-a-table-that-appears-at-three-places-with-same-name", "title": "How to click on link inside a table that appears at three places with same name and same ID", "body": "<p>I want to click on a link that is in table . There are three tabs and the values in the table change according to the choice of the tab.The link appears . So the link i want to click appears thrice(same link, same id). Now i want to click the link when i select the first tab. Since the Id is same at all places, it generates ambiguous error.</p>\n\n<p>So i used the below code to click the link </p>\n\n<pre><code>find('tr:first-child &gt; td:third-child [id^=\"gia0\"]').click\"\n</code></pre>\n\n<p>But i get the error \"invalid selector: An invalid or illegal selector was specified\". Please advice</p>\n"}, {"tags": ["ruby", "amazon-s3", "emc", "object-storage", "swisscomdev"], "comments": [{"owner": {"reputation": 106, "user_id": 2232185, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9fbf03b7a10772a4a499f7f4bb6b67cf?s=128&d=identicon&r=PG", "display_name": "jaroh", "link": "https://stackoverflow.com/users/2232185/jaroh"}, "edited": false, "score": 0, "creation_date": 1463559386, "post_id": 37166046, "comment_id": 62111323, "body": "According to the logs you are using http and not http<b>s</b>. Try to use http<b>s</b>."}, {"owner": {"reputation": 2271, "user_id": 1140727, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/VAyCK.jpg?s=128&g=1", "display_name": "Ivanov", "link": "https://stackoverflow.com/users/1140727/ivanov"}, "edited": false, "score": 0, "creation_date": 1463584468, "post_id": 37166046, "comment_id": 62129252, "body": "please try with a GUI S3 browser if everything works with your credentials. Please update the questions with results."}, {"owner": {"reputation": 177, "user_id": 1804103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b89172f2b73f6e99b99b67b7fb8e153?s=128&d=identicon&r=PG&f=1", "display_name": "Ignacy Moryc", "link": "https://stackoverflow.com/users/1804103/ignacy-moryc"}, "edited": false, "score": 0, "creation_date": 1463634797, "post_id": 37166046, "comment_id": 62149138, "body": "I used my credentials with <a href=\"https://github.com/swisscom/dynstrg-howto\" rel=\"nofollow noreferrer\">github.com/swisscom/dynstrg-howto</a> (the official Swisscom example for Dynamic Storage) and got the same problem.  I then used this app with AWS and later credentials for Exoscale&#39;s S3 compatible service, and they both worked out of the box.  That&#39;s why I&#39;m going with Exoscale for now. Swisscom&#39;s documentation/support was very poor/slow - I wouldn&#39;t want to stick with them for serious stuff."}], "owner": {"reputation": 177, "user_id": 1804103, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5b89172f2b73f6e99b99b67b7fb8e153?s=128&d=identicon&r=PG&f=1", "display_name": "Ignacy Moryc", "link": "https://stackoverflow.com/users/1804103/ignacy-moryc"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 403, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1463590694, "creation_date": 1462977818, "last_edit_date": 1463590694, "question_id": 37166046, "link": "https://stackoverflow.com/questions/37166046/s3-dynamic-storage-on-swisscom", "title": "S3 Dynamic Storage on Swisscom", "body": "<p>I'm trying to use S3 Dynamic Storage as a drop in replacement for AWS S3. I'm using it through Ruby with <a href=\"https://github.com/sorentwo/carrierwave-aws\" rel=\"nofollow\">carrierwave-aws</a>. </p>\n\n<p>The only change I made was to use different credentials (I got key &amp; secret from Swisscom Developer Console) and <a href=\"https://ds31s3.swisscom.com\" rel=\"nofollow\">https://ds31s3.swisscom.com</a> as the endoint.</p>\n\n<p>Now can't get over <code>Access Denied</code> error message from carrierwave, although I can see from logs what looks like a proper request:</p>\n\n<pre><code>[httplog] Connecting: documents.ds31s3.swisscom.com:443\n[httplog] Sending: PUT http://documents.ds31s3.swisscom.com:443/uploads/financial_information/document/3/17/erd.pdf\n[httplog] Header: content-type: application/pdf\n[httplog] Header: accept-encoding:\n[httplog] Header: user-agent: aws-sdk-ruby2/2.1.29 ruby/2.2.3 x86_64-darwin15 resources\n[httplog] Header: x-amz-acl: public-read\n[httplog] Header: expect: 100-continue\n[httplog] Header: content-md5: 3j2Km8Dc2/50bZyh4a1Qyw==\n[httplog] Header: date: Wed, 11 May 2016 14:21:56 GMT\n[httplog] Header: authorization: AWS _REDACTED_MY_SECRETS_\n[httplog] Header: content-length: 62556\n[httplog] Header: accept: */*\n[httplog] Status: 403\n[httplog] Benchmark: 1.3060949619975872 seconds\n[httplog] Header: date: Wed, 11 May 2016 14:21:57 GMT\n[httplog] Header: server: Apache\n[httplog] Header: content-length: 110\n[httplog] Header: content-type: application/xml\n[httplog] Response: (not available yet)\n</code></pre>\n\n<p>Anyone know what that's about?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "elasticsearch"], "comments": [{"owner": {"reputation": 48118, "user_id": 3498062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af3b7feaee84aac3a99e885ee2a97e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Stefan", "link": "https://stackoverflow.com/users/3498062/andrei-stefan"}, "edited": false, "score": 0, "creation_date": 1462980508, "post_id": 37165976, "comment_id": 61869389, "body": "I don&#39;t think you can do it like the programming way, but need to do this in the query itself."}, {"owner": {"reputation": 48118, "user_id": 3498062, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9af3b7feaee84aac3a99e885ee2a97e0?s=128&d=identicon&r=PG&f=1", "display_name": "Andrei Stefan", "link": "https://stackoverflow.com/users/3498062/andrei-stefan"}, "edited": false, "score": 0, "creation_date": 1462981539, "post_id": 37165976, "comment_id": 61870074, "body": "Oh, I misunderstood your question :-). This was only in your code..."}], "answers": [{"comments": [{"owner": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "edited": false, "score": 0, "creation_date": 1462981691, "post_id": 37167356, "comment_id": 61870196, "body": "Perfect answer ! Didn&#39;t know that I can use the syntax: <code>query[:query][:bool][:must]</code>Thanks !"}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 2, "last_activity_date": 1462981185, "creation_date": 1462981185, "answer_id": 37167356, "question_id": 37165976, "link": "https://stackoverflow.com/questions/37165976/elasticsearch-build-query-depending-a-condition/37167356#37167356", "title": "ElasticSearch build query depending a condition", "body": "<p>You'll want to create a query variable to build the query, and conditionally add the elements (terms) that you want.  Give this a try:</p>\n\n<pre><code># Start with a base search definition\nquery = { \n  query: {\n    bool: {\n      must: [\n        { term: { country_id: country_id }}\n      ]\n    }\n  }\n}\n\n# Conditionally add search terms\nif region_id is not nil\n  query[:query][:bool][:must] &lt;&lt; { term: { region_id: region_id }}\nend\n\n# Execute the search\nself.search(query)\n</code></pre>\n"}], "owner": {"reputation": 2504, "user_id": 1041509, "user_type": "registered", "accept_rate": 70, "profile_image": "https://i.stack.imgur.com/nC1WT.png?s=128&g=1", "display_name": "alex.bour", "link": "https://stackoverflow.com/users/1041509/alex-bour"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 73, "favorite_count": 0, "accepted_answer_id": 37167356, "answer_count": 1, "score": 1, "last_activity_date": 1531979554, "creation_date": 1462977592, "last_edit_date": 1531979554, "question_id": 37165976, "link": "https://stackoverflow.com/questions/37165976/elasticsearch-build-query-depending-a-condition", "title": "ElasticSearch build query depending a condition", "body": "<p>I want to know if it's possible to build a query depending some conditions in my code.</p>\n\n<pre><code>self.search(query: {\n                    bool: {\n                      must: [\n                        { term: { country_id: country_id }},\n                        { term: { region_id: region_id }} =&gt; if region_id is not nil\n]\n                    }\n                  }\n</code></pre>\n\n<p>In this example, I would like to add the line:</p>\n\n<pre><code>{ term: { region_id: region_id }}\n</code></pre>\n\n<p>ONLY if region_id is not nil/ present in my method.</p>\n\n<p>In SQL I can build a query with multilines and conditions.\nCan I do the same with ES ?</p>\n\n<p>Info: working in ruby here</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "git", "heroku", "railstutorial.org"], "comments": [{"owner": {"reputation": 163714, "user_id": 123527, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/99e0b39c091e10d9c7d4452a34ca52dc?s=128&d=identicon&r=PG", "display_name": "Simone Carletti", "link": "https://stackoverflow.com/users/123527/simone-carletti"}, "edited": false, "score": 0, "creation_date": 1462977700, "post_id": 37165770, "comment_id": 61867310, "body": "Did you add any route/controller/view besides the default generated app?"}, {"owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "edited": false, "score": 1, "creation_date": 1462978122, "post_id": 37165770, "comment_id": 61867640, "body": "Possible duplicate of <a href=\"http://stackoverflow.com/questions/22026492/heroku-rails-setup-the-page-you-were-looking-for-doesnt-exist\">Heroku Rails Setup &quot;The page you were looking for doesn&#39;t exist.&quot;</a>"}, {"owner": {"reputation": 6039, "user_id": 2137458, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/8cfca832ee746f3e3d9971148f52dc64?s=128&d=identicon&r=PG", "display_name": "NM Pennypacker", "link": "https://stackoverflow.com/users/2137458/nm-pennypacker"}, "edited": false, "score": 0, "creation_date": 1462979469, "post_id": 37165770, "comment_id": 61868600, "body": "If you run <code>heroku logs</code> do you see the 500 error?"}, {"owner": {"reputation": 1820, "user_id": 5830835, "user_type": "registered", "accept_rate": 97, "profile_image": "https://www.gravatar.com/avatar/29a99125813cee34a6ecfe0d0e432eb1?s=128&d=identicon&r=PG&f=1", "display_name": "Timmy Von Heiss ", "link": "https://stackoverflow.com/users/5830835/timmy-von-heiss"}, "edited": false, "score": 0, "creation_date": 1462980906, "post_id": 37165770, "comment_id": 61869662, "body": "I ran into many problems with tutorial but it was always my own mistakes. The tutorial works. Start that section from beginning again."}, {"owner": {"reputation": 1189, "user_id": 6030977, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6UMfc.jpg?s=128&g=1", "display_name": "Shyam Bhimani", "link": "https://stackoverflow.com/users/6030977/shyam-bhimani"}, "edited": false, "score": 0, "creation_date": 1463020309, "post_id": 37165770, "comment_id": 61887089, "body": "please include your route file and gemfile."}, {"owner": {"reputation": 21, "user_id": 6297373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178b2c45c01bd19ff323a655b9091c2f?s=128&d=identicon&r=PG&f=1", "display_name": "julienverheughe", "link": "https://stackoverflow.com/users/6297373/julienverheughe"}, "edited": false, "score": 0, "creation_date": 1463064072, "post_id": 37165770, "comment_id": 61913090, "body": "route file and gemfile have been included. (still figuring out how stackoverflow works )"}, {"owner": {"reputation": 1189, "user_id": 6030977, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6UMfc.jpg?s=128&g=1", "display_name": "Shyam Bhimani", "link": "https://stackoverflow.com/users/6030977/shyam-bhimani"}, "edited": false, "score": 0, "creation_date": 1463124056, "post_id": 37165770, "comment_id": 61938949, "body": "your routes.rb file does not match the tutorial&#39;s routes.rb I would suggest you to follow the chapter 2 from start to the end and you can follow my answer below at the last to deploy your app on heroku. <a href=\"https://github.com/shyambhimani/ShyamBhimani_RailsTutorial_CH2_Toy_App\" rel=\"nofollow noreferrer\">github.com/shyambhimani/ShyamBhimani_RailsTutorial_CH2_Toy_A&zwnj;&#8203;pp</a> for your reference"}, {"owner": {"reputation": 21, "user_id": 6297373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178b2c45c01bd19ff323a655b9091c2f?s=128&d=identicon&r=PG&f=1", "display_name": "julienverheughe", "link": "https://stackoverflow.com/users/6297373/julienverheughe"}, "edited": false, "score": 0, "creation_date": 1463133253, "post_id": 37165770, "comment_id": 61944965, "body": "I&#39;ve made the adjustments you told me to but when i try &#39;$ git heroku push master&#39; I receive this error &quot;Push rejected, failed to detect set buildpack Heroku/ruby&quot; (thanks for helping btw, it&#39;s a mess :/)"}, {"owner": {"reputation": 21, "user_id": 6297373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178b2c45c01bd19ff323a655b9091c2f?s=128&d=identicon&r=PG&f=1", "display_name": "julienverheughe", "link": "https://stackoverflow.com/users/6297373/julienverheughe"}, "edited": false, "score": 0, "creation_date": 1463138596, "post_id": 37165770, "comment_id": 61948424, "body": "EUREKA! i solved the issue. First of all thanks for all the answers, there were apperently a number of issues. But after i was sure that the gemfiel and route.be file were ok it still wouldn&#39;t push. Eventually i used the &#39;$ heroku git:remote &lt;app name&gt;&#39; command and after that everything went smoothly!"}], "answers": [{"tags": [], "owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "is_accepted": false, "score": -1, "last_activity_date": 1462980983, "last_edit_date": 1462980983, "creation_date": 1462977569, "answer_id": 37165962, "question_id": 37165770, "link": "https://stackoverflow.com/questions/37165770/cant-display-heroku-app-ruby-on-rails-tutorial-m-hartl/37165962#37165962", "title": "can&#39;t display heroku app -Ruby on Rails Tutorial -M Hartl", "body": "<pre><code>$heroku create\n$git add -A\n$git commit -m \"message\"\n$git push heroku master\n$heroku run rake db:migrate\n$heroku open\n</code></pre>\n\n<p>And make sure you have on <strong>routes.rb</strong> a route for <strong>root</strong>\nEnjoy</p>\n"}, {"tags": [], "owner": {"reputation": 70, "user_id": 4288632, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-FFgxes70um4/AAAAAAAAAAI/AAAAAAAAACo/E3gOEL77a6I/photo.jpg?sz=128", "display_name": "Drew Reynolds", "link": "https://stackoverflow.com/users/4288632/drew-reynolds"}, "is_accepted": false, "score": 0, "last_activity_date": 1462980640, "creation_date": 1462980640, "answer_id": 37167170, "question_id": 37165770, "link": "https://stackoverflow.com/questions/37165770/cant-display-heroku-app-ruby-on-rails-tutorial-m-hartl/37167170#37167170", "title": "can&#39;t display heroku app -Ruby on Rails Tutorial -M Hartl", "body": "<p>Things to double check:</p>\n\n<ul>\n<li>Make sure you have set a <strong>root</strong> in your <strong>routes.rb</strong> file</li>\n<li>Don't forget to <strong>migrate</strong> with <strong>heroku run rake db:migrate</strong></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1189, "user_id": 6030977, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/6UMfc.jpg?s=128&g=1", "display_name": "Shyam Bhimani", "link": "https://stackoverflow.com/users/6030977/shyam-bhimani"}, "is_accepted": false, "score": 0, "last_activity_date": 1463021078, "creation_date": 1463021078, "answer_id": 37176393, "question_id": 37165770, "link": "https://stackoverflow.com/questions/37165770/cant-display-heroku-app-ruby-on-rails-tutorial-m-hartl/37176393#37176393", "title": "can&#39;t display heroku app -Ruby on Rails Tutorial -M Hartl", "body": "<p>You can delete heroku app by following command </p>\n\n<pre><code>$heroku apps:destroy \u2013app appname\n</code></pre>\n\n<p><strong>Or</strong></p>\n\n<p>You can log in to <a href=\"https://id.heroku.com/login\" rel=\"nofollow\">heroku</a> and you will see all the app you created click on app you want to delete then click on settings then go at bottom of the page and you will see delete app option click on it and follow instruction. </p>\n\n<p>I would suggest you to delete existing app. Follow below command to make new heroku app. (you can deploy your rails app after you done with all the exercise in particular chapter.)</p>\n\n<pre><code>$ git init\n\n$ git add .\n\n$ heroku create\n\n$ git commit -am \"Initialize repository\" \n\n$ git push heroku master\n\n$ bundle exec rake db:migrate\n\n$ heroku run rake db:schema:load\n</code></pre>\n\n<p>This will work. good luck </p>\n"}, {"tags": [], "owner": {"reputation": 21, "user_id": 6297373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178b2c45c01bd19ff323a655b9091c2f?s=128&d=identicon&r=PG&f=1", "display_name": "julienverheughe", "link": "https://stackoverflow.com/users/6297373/julienverheughe"}, "is_accepted": false, "score": 0, "last_activity_date": 1463138646, "creation_date": 1463138646, "answer_id": 37208823, "question_id": 37165770, "link": "https://stackoverflow.com/questions/37165770/cant-display-heroku-app-ruby-on-rails-tutorial-m-hartl/37208823#37208823", "title": "can&#39;t display heroku app -Ruby on Rails Tutorial -M Hartl", "body": "<p>EUREKA! i solved the issue. First of all thanks for all the answers, there were apperently a number of issues. But after i was sure that the gemfiel and route.be file were ok it still wouldn't push. Eventually i used the '$ heroku git:remote ' command and after that everything went smoothly!</p>\n"}], "owner": {"reputation": 21, "user_id": 6297373, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/178b2c45c01bd19ff323a655b9091c2f?s=128&d=identicon&r=PG&f=1", "display_name": "julienverheughe", "link": "https://stackoverflow.com/users/6297373/julienverheughe"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 207, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1463138646, "creation_date": 1462977098, "last_edit_date": 1463063997, "question_id": 37165770, "link": "https://stackoverflow.com/questions/37165770/cant-display-heroku-app-ruby-on-rails-tutorial-m-hartl", "title": "can&#39;t display heroku app -Ruby on Rails Tutorial -M Hartl", "body": "<p>I've just started the Ruby on Rails tutorial written by M. Hartl. . I've followed every step from 2.1 to 2.1.1 .\nSo i've created the app and pushed all the changes I made to Heroku </p>\n\n<p>with $ heroku create \nand $ git push heroku master</p>\n\n<p>didn't get any errors or anything.\nbut when i tried to view the app by clicking on the address (<a href=\"https://pacific-woodland-39108.herokuapp.com\" rel=\"nofollow\">https://pacific-woodland-39108.herokuapp.com</a>) i could only see \"The page you were looking for doesn't exist. \". So something went wrong but i can't find what. I've been looking at similar problems for the past 3hours and tried numerous \"solutions\" but nothing worked. I even deleted the app and did every step that the tutorial states again. But it didn't help. </p>\n\n<p>Is there somebody that can help me out?</p>\n\n<p>EDIT:</p>\n\n<p>I've apparently played to much with the 'heroku create' command and now i have several apps. Maybe i should delete all of them (how?) and start from scratch?</p>\n\n<p>The route is is adjusted ( removed the' # ' in order to activate )</p>\n\n<p><a href=\"http://i.stack.imgur.com/tkbe7.png\" rel=\"nofollow\">commands i used that were mentioned in one of the answers. Still doesn't work though :/ </a></p>\n\n<pre><code>    source 'https://rubygems.org'\n\n\nsource 'https://rubygems.org'\n</code></pre>\n\n<p><strong>GEMFILE:</strong></p>\n\n<pre><code>  gem 'rails', '4.2.2'\n  gem 'sass-rails', '~&gt; 5.0'  \n  gem 'uglifier', '&gt;= 1.3.0'\n\n  gem 'coffee-rails', '~&gt; 4.1.0'\n  gem 'jquery-rails'\n  gem 'turbolinks'\n  gem 'jbuilder', '~&gt; 2.0'\n  gem 'sdoc', '~&gt; 0.4.0', group: :doc\n\n\n group :development, :test do\n    # Call 'byebug' anywhere in the code to stop execution and get a debugger console\n  gem 'byebug'\n\n  # Access an IRB console on exception pages or by using &lt;%= console %&gt; in views\n  gem 'web-console', '~&gt; 2.0'\n\n  # Spring speeds up development by keeping your application running in the background. Read more: https://github.com/rails/spring\n  gem 'spring'\n  gem 'sqlite3', '1.3.9'\nend\n\ngroup :production do\n gem 'pg', '0.17.1'\n gem 'rails_12factor', '0.0.2'\nend\n</code></pre>\n\n<p><strong>ROUTE file:</strong></p>\n\n<pre><code>Rails.application.routes.draw do\n# The priority is based upon order of creation: first created -&gt; highest priority.\n# See how all your routes lay out with \"rake routes\".\n\n# You can have the root of your site routed with \"root\"\nroot 'welcome#index'\n</code></pre>\n"}, {"tags": ["ruby", "chomp"], "comments": [{"owner": {"reputation": 7994, "user_id": 1625339, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/b8ba46f911517c8b2ccc39e0be9050c0?s=128&d=identicon&r=PG", "display_name": "Aetherus", "link": "https://stackoverflow.com/users/1625339/aetherus"}, "edited": false, "score": 1, "creation_date": 1462976680, "post_id": 37165470, "comment_id": 61866514, "body": "Just <code>p(op)</code> before <code>chomp</code> and see what the string really is."}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1462982397, "post_id": 37165470, "comment_id": 61870696, "body": "Every method you can call on a String is documented. You could have answered your own question by <a href=\"http://ruby-doc.org/core-2.3.1/String.html#method-i-chomp\" rel=\"nofollow noreferrer\">reading the documentation for <code>String#chomp</code></a> to find out what it does."}, {"owner": {"reputation": 89316, "user_id": 238886, "user_type": "registered", "accept_rate": 90, "profile_image": "https://www.gravatar.com/avatar/8ca29123b5669b26f9b6ca2c62d9d215?s=128&d=identicon&r=PG", "display_name": "Wayne Conrad", "link": "https://stackoverflow.com/users/238886/wayne-conrad"}, "reply_to_user": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1463141595, "post_id": 37165470, "comment_id": 61950604, "body": "@Jordan While it&#39;s true that the question could be answered by debugging plus reading the docs, that alone does not necessarily make it a bad question for SO.  I mention it because I&#39;m seeing this sort of comment pop up lately in a way that implies that anything answerable through documentation should not be asked here.  That&#39;s not true.  That said, this question does currently have other problems that need to be fixed before it is a good SO question."}], "answers": [{"comments": [{"owner": {"reputation": 41, "user_id": 6320877, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jiyJQXQf03c/AAAAAAAAAAI/AAAAAAAAAEc/Nz8fk6nFgro/photo.jpg?sz=128", "display_name": "Jesus", "link": "https://stackoverflow.com/users/6320877/jesus"}, "edited": false, "score": 0, "creation_date": 1463035784, "post_id": 37165633, "comment_id": 61892230, "body": "Thank you got it !"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "reply_to_user": {"reputation": 41, "user_id": 6320877, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jiyJQXQf03c/AAAAAAAAAAI/AAAAAAAAAEc/Nz8fk6nFgro/photo.jpg?sz=128", "display_name": "Jesus", "link": "https://stackoverflow.com/users/6320877/jesus"}, "edited": false, "score": 0, "creation_date": 1463037598, "post_id": 37165633, "comment_id": 61893380, "body": "@Jesus you&#39;re welcome! It&#39;s a common pitfall when using <code>gets</code> for the first time :-)"}], "tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 8, "last_activity_date": 1462976778, "creation_date": 1462976778, "answer_id": 37165633, "question_id": 37165470, "link": "https://stackoverflow.com/questions/37165470/my-code-does-not-work-without-that-specific-line-why/37165633#37165633", "title": "My code does not work without that specific line. Why?", "body": "<p>When entering the \"+\" operation, you hit two keys, <kbd>+</kbd> and <kbd>return</kbd>. Both produce a character, resulting in <code>\"+\\n\"</code>. (that <code>\\n</code> is a newline character)</p>\n\n<p><code>chomp</code> removes the newline character.</p>\n"}], "owner": {"reputation": 41, "user_id": 6320877, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-jiyJQXQf03c/AAAAAAAAAAI/AAAAAAAAAEc/Nz8fk6nFgro/photo.jpg?sz=128", "display_name": "Jesus", "link": "https://stackoverflow.com/users/6320877/jesus"}, "delete_vote_count": 1, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 50, "favorite_count": 0, "closed_date": 1462993327, "accepted_answer_id": 37165633, "answer_count": 1, "score": 1, "last_activity_date": 1462977217, "creation_date": 1462976420, "last_edit_date": 1462977217, "question_id": 37165470, "link": "https://stackoverflow.com/questions/37165470/my-code-does-not-work-without-that-specific-line-why", "closed_reason": "Needs details or clarity", "title": "My code does not work without that specific line. Why?", "body": "<pre><code>puts \"Enter the first number\"\nnum1 = Float(gets)\n\nputs \"Enter the second number\"\nnum2 = Float(gets)\n\nputs \"Enter the operation\"\nop = gets\nop = op.chomp # &lt;--- THIS LINE!\n\ncase op \nwhen \"+\" then puts num1 + num2\nwhen \"-\" then puts num1 - num2    \nwhen \"*\" then puts num1 * num2    \nwhen \"/\" then puts num1 / num2\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "rubygems", "ahoy"], "answers": [{"tags": [], "owner": {"reputation": 36, "user_id": 8372032, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/40d1b0801eddbf27f585fedd99bd925c?s=128&d=identicon&r=PG&f=1", "display_name": "ruby ninja", "link": "https://stackoverflow.com/users/8372032/ruby-ninja"}, "is_accepted": false, "score": 0, "last_activity_date": 1516299133, "creation_date": 1516299133, "answer_id": 48327783, "question_id": 37165454, "link": "https://stackoverflow.com/questions/37165454/how-does-ahoys-visit-work/48327783#48327783", "title": "How does Ahoy&#39;s visit work?", "body": "<p>you need user model that will have many visits</p>\n\n<p>putting the line below in the desired view will track visit for this view and create new Visit object record</p>\n\n<pre><code>ahoy.track(\"Viewed book\", {title: \"The World is Flat\"});\n</code></pre>\n\n<p>if you want to track event easily, just use ajax call to create event</p>\n\n<pre><code>function sendTracker(vars) {\n  $.ajax({\n    url: \"/ahoy/events\",\n    dataType: \"json\",\n    type: \"post\",\n    async:false,\n    data: {\n          name: vars[0],\n          properties: vars[1],\n          time: timeNow,\n          visit_id: &lt;%= current_visit.nil? ? 0 : current_visit.id %&gt;\n          },\n    success:function(){\n    }\n  });\n</code></pre>\n\n<p>this will create Ahoy::Event object with the parameters you choose</p>\n\n<p>Finally, I needed to track with Ahoy AND to track event for ab testing (vanity). In this case I used intermediate technic </p>\n\n<p>in the view </p>\n\n<pre><code>  &lt;%= link_to \"#{ab_test(:campaign_1_cta)}\",{:controller =&gt; :campaigns, :action =&gt; :rich_link, :url =&gt; \"http://url.to/redirect\", :name =&gt; \"cp1_cta\", :props =&gt; \"data\", :abtest =&gt; \":cp1_click\"} %&gt;\n</code></pre>\n\n<p>and my campaigns controller</p>\n\n<pre><code>  def rich_link\n    ahoy.track(params[:name], params[:props])\n    var = params[:abtest].parameterize.underscore.to_sym\n    Vanity.track!(var)\n    redirect_to params[:url]\n  end\n</code></pre>\n"}], "owner": {"reputation": 51, "user_id": 6143083, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/53f1ac127aa44b7d63ce15afcad6f7ce?s=128&d=identicon&r=PG&f=1", "display_name": "dalai", "link": "https://stackoverflow.com/users/6143083/dalai"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 923, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1516299133, "creation_date": 1462976390, "last_edit_date": 1462983752, "question_id": 37165454, "link": "https://stackoverflow.com/questions/37165454/how-does-ahoys-visit-work", "title": "How does Ahoy&#39;s visit work?", "body": "<p>I want to track the visit clicking my links.</p>\n\n<p>I need to know the percentage of browser, OS... of every link.</p>\n\n<p>Does it mean I should add that in <code>link.rb</code> ?</p>\n\n<pre><code>class Link &lt; ActiveRecord::Base\n    has_many :visits \nend\n</code></pre>\n\n<p>But after clicking links lots of times, the links' visits aren't generated.</p>\n\n<p>I really don't know how Ahoy's visit work, when to create a new visit.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "comments": [{"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1462975981, "post_id": 37165084, "comment_id": 61866009, "body": "Where are your <code>routes</code>?"}, {"owner": {"reputation": 381, "user_id": 4285237, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1476d62769406dc5ef791a838788641c?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/4285237/samuel"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1462976386, "post_id": 37165084, "comment_id": 61866306, "body": "Made a mistake. I&#39;ve edited so you can see the routes."}], "answers": [{"comments": [{"owner": {"reputation": 381, "user_id": 4285237, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1476d62769406dc5ef791a838788641c?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/4285237/samuel"}, "edited": false, "score": 0, "creation_date": 1462976837, "post_id": 37165541, "comment_id": 61866637, "body": "When I&#39;m doing that I get an error:  NoMethodError:        undefined method `category=&#39; for #&lt;Review:0x005578a9e87188&gt;"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "reply_to_user": {"reputation": 381, "user_id": 4285237, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1476d62769406dc5ef791a838788641c?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/4285237/samuel"}, "edited": false, "score": 0, "creation_date": 1462977394, "post_id": 37165541, "comment_id": 61867073, "body": "@Samuel What are your models like? Update the question with the model code."}, {"owner": {"reputation": 381, "user_id": 4285237, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1476d62769406dc5ef791a838788641c?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/4285237/samuel"}, "edited": false, "score": 0, "creation_date": 1462984251, "post_id": 37165541, "comment_id": 61871875, "body": "thanks for thinking along but I&#39;m not going to change the models because the test is failing. The site works fine. There has to another way to make the test."}], "tags": [], "owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "is_accepted": false, "score": 0, "last_activity_date": 1462978454, "last_edit_date": 1462978454, "creation_date": 1462976584, "answer_id": 37165541, "question_id": 37165084, "link": "https://stackoverflow.com/questions/37165084/error-rspec-actioncontrollerurlgenerationerror-with-rails/37165541#37165541", "title": "Error RSpec ActionController::UrlGenerationError with Rails", "body": "<blockquote>\n  <p>ActionController::UrlGenerationError:  No route matches\n  {:action=>\"index\", :category_id=>\"220\", :controller=>\"reviews\",\n  :id=>\"166\"}</p>\n</blockquote>\n\n<p>According to your routes, that particular <code>index</code> route expects <code>category_id</code> and <code>system_id</code> as keys. You need to change <code>:id</code> to <code>:system_id</code>. The below should work.</p>\n\n<pre><code>it \"only assigns reviews index in the current system\" do\n  get :index, {category_id: category.to_param, system_id: system.to_param}\n  expect(assigns(:reviews)).to eq reviews\nend\n</code></pre>\n\n<p><strong><em>Update</em></strong></p>\n\n<blockquote>\n  <p>NoMethodError: undefined method `category=' for\n  Review:0x005578a9e87188</p>\n</blockquote>\n\n<p>There is no association between a <code>review</code> and a <code>category</code>. Edit your models to set the association accordingly.</p>\n\n<pre><code>#category.rb\nclass Category &lt; ActiveRecord::Base\n  validates_presence_of :name\n  has_many :systems\n  has_many :reviews\nend\n\n#review.rb\nclass Review &lt; ActiveRecord::Base\n  belongs_to :system\n  belongs_to :category\n  validates_presence_of :content, :system\nend\n</code></pre>\n"}], "owner": {"reputation": 381, "user_id": 4285237, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/1476d62769406dc5ef791a838788641c?s=128&d=identicon&r=PG&f=1", "display_name": "Samuel", "link": "https://stackoverflow.com/users/4285237/samuel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1288, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462978454, "creation_date": 1462975520, "last_edit_date": 1462977852, "question_id": 37165084, "link": "https://stackoverflow.com/questions/37165084/error-rspec-actioncontrollerurlgenerationerror-with-rails", "title": "Error RSpec ActionController::UrlGenerationError with Rails", "body": "<p>I'm getting an error when trying to test a Rails Controller with RSpec. It's a double nested route and I'm trying to figure out the right syntax but hadn't had many luck yet. </p>\n\n<p>The error that I'm getting is\n    Failure/Error: get :index, {category_id: category.to_param, id: system.to_param}</p>\n\n<pre><code>ActionController::UrlGenerationError:\n No route matches {:action=&gt;\"index\", :category_id=&gt;\"220\", :controller=&gt;\"reviews\", :id=&gt;\"166\"}\n # ./spec/controllers/reviews_controller_spec.rb:11:in `block (3 levels) in &lt;top (required)&gt;'\n</code></pre>\n\n<p>I've made the same test for the system controller which works fine. The webpage works fine as well. No errors with that (just this error with testing).</p>\n\n<p>Here is what the RSpec test look like:</p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe ReviewsController, type: :controller do\n\n  let (:category) { create(:category) }\n  let (:system) { create(:system) }\n  let (:reviews) { create_list(:review, 3, category: category, system: system) }\n\n describe \"GET index\" do\n   it \"assigs all reviews to an instance var called @reviews\" do\n    get :index, {category_id: category.to_param, id: system.to_param}\n    expect(assigns(:reviews)).to eq reviews\n   end\n\n  it \"assigns all the reviews to an var called @system\" do\n   get :index, system_id: system.to_param\n   expect(assigns(:system)).to eq system\n  end\n end\n\n describe \"system scope\" do\n  before { create(:review) }\n\n  it \"only assigns reviews index in the current system\" do\n   get :index, {category_id: category.to_param, id: system.to_param}\n   expect(assigns(:reviews)).to eq reviews\n  end\n end\nend\n</code></pre>\n\n<p>This is the Controller that it's testing:</p>\n\n<pre><code>class ReviewsController &lt; ApplicationController\n\n  def index\n   @system = System.find(params[:system_id])\n   @reviews = @system.reviews\n\n  respond_to do |format|\n   format.html\n   format.json { render json: { system: @system, reviews: @reviews } }\n  end\n\n end\n\n def show\n  @system = System.find(params[:system_id])\n  @review = @system.reviews\n end\n\nend\n</code></pre>\n\n<p>And these are the routes:</p>\n\n<pre><code>Rails.application.routes.draw do\n\n  root \"categories#index\"\n\n  resources :categories do\n    resources :systems do\n      resources :reviews\n    end\n  end\nend\n</code></pre>\n\n<p>Here are the models:</p>\n\n<p>Category Model</p>\n\n<pre><code>class Category &lt; ActiveRecord::Base\n\n  validates_presence_of :name\n\n  has_many :systems\n\nend\n</code></pre>\n\n<p>System Model</p>\n\n<pre><code>class System &lt; ActiveRecord::Base\n\n  belongs_to :category\n  has_many :reviews\n\n  validates_presence_of :name, :category\n\nend\n</code></pre>\n\n<p>Review Model</p>\n\n<pre><code>class Review &lt; ActiveRecord::Base\n\n  belongs_to :system\n\n  validates_presence_of :content, :system\n\nend\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462975572, "post_id": 37164458, "comment_id": 61865680, "body": "<code>\\r</code> is <i>one</i> character, just like <code>\\n</code>, <code>\\t</code> and <code>\\\\</code>. It&#39;s <i>not</i> a backslash followed by another character."}, {"owner": {"reputation": 8149, "user_id": 616644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wVwGC.png?s=128&g=1", "display_name": "Rick Smith", "link": "https://stackoverflow.com/users/616644/rick-smith"}, "edited": false, "score": 0, "creation_date": 1462978887, "post_id": 37164458, "comment_id": 61868166, "body": "Your input seems suspicious to me because it is not following the convention of the rest of the string.  I would expect if you wanted \\\\ as an output you would only have \\ as an input.  My gut says you don&#39;t actually want to do what you are saying you want to do..."}, {"owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "reply_to_user": {"reputation": 8149, "user_id": 616644, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/wVwGC.png?s=128&g=1", "display_name": "Rick Smith", "link": "https://stackoverflow.com/users/616644/rick-smith"}, "edited": false, "score": 0, "creation_date": 1463055191, "post_id": 37164458, "comment_id": 61905729, "body": "@RickSmith, I agree with you. However, I m getting the input from an editor and somone added \\ already which escaped to \\\\, But the other chars are added by editor. So I have less control on that."}], "answers": [{"comments": [{"owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "edited": false, "score": 0, "creation_date": 1462975192, "post_id": 37164885, "comment_id": 61865369, "body": "Hey Thank you for the response. What if I get &#39;\\t&#39;, Isn&#39;t there any generic solution in ruby??"}], "tags": [], "owner": {"reputation": 631, "user_id": 134327, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NW2l2.png?s=128&g=1", "display_name": "Mario Carrion", "link": "https://stackoverflow.com/users/134327/mario-carrion"}, "is_accepted": true, "score": 1, "last_activity_date": 1462975011, "creation_date": 1462975011, "answer_id": 37164885, "question_id": 37164458, "link": "https://stackoverflow.com/questions/37164458/ecape-only-single-backslash-and-leave-double-backslashes/37164885#37164885", "title": "Ecape only single backslash and leave double backslashes", "body": "<p>Like this:</p>\n\n<pre><code>\"&lt;p&gt;&amp;nbsp; \\\\$%&amp;amp;;&amp;ntilde;&amp;aacute;&amp;lt; &amp;gt;&lt;/p&gt;\\r\\n\".gsub(\"\\r\",\"\\\\r\").gsub(\"\\n\",\"\\\\n\")\n</code></pre>\n"}], "owner": {"reputation": 2635, "user_id": 1177575, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/147cbbdcb918ccf00a5d662d9e3077ad?s=128&d=identicon&r=PG", "display_name": "Abibullah Rahamathulah", "link": "https://stackoverflow.com/users/1177575/abibullah-rahamathulah"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 230, "favorite_count": 0, "closed_date": 1462982282, "accepted_answer_id": 37164885, "answer_count": 1, "score": 0, "last_activity_date": 1462975543, "creation_date": 1462974011, "last_edit_date": 1462975543, "question_id": 37164458, "link": "https://stackoverflow.com/questions/37164458/ecape-only-single-backslash-and-leave-double-backslashes", "closed_reason": "Needs details or clarity", "title": "Ecape only single backslash and leave double backslashes", "body": "<p>I have scenario to escape single backslash in string, but it can also contain double backslashes too.</p>\n\n<pre><code>\"&lt;p&gt;&amp;nbsp; \\\\$%&amp;amp;;&amp;ntilde;&amp;aacute;&amp;lt; &amp;gt;&lt;/p&gt;\\r\\n\"\n</code></pre>\n\n<p>To </p>\n\n<pre><code> \"&lt;p&gt;&amp;nbsp; \\\\$%&amp;amp;;&amp;ntilde;&amp;aacute;&amp;lt; &amp;gt;&lt;/p&gt;\\\\r\\\\n\"\n</code></pre>\n\n<p>How do I do this in ruby. please note I m keeping the existing double '\\' intact.</p>\n\n<p>Thanks</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "capistrano", "sidekiq", "capistrano3"], "comments": [{"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462973697, "post_id": 37164181, "comment_id": 61863992, "body": "Following the &quot;convention over configuration&quot; principle, it would be better to just have the rails app in <code>...&#47;current</code> rather than <code>...&#47;current&#47;server</code>. Is this a practical solution?"}, {"owner": {"reputation": 143, "user_id": 3675980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41290633c4f74587e1e50a749083750b?s=128&d=identicon&r=PG&f=1", "display_name": "abhima9yu", "link": "https://stackoverflow.com/users/3675980/abhima9yu"}, "reply_to_user": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462973926, "post_id": 37164181, "comment_id": 61864177, "body": "I am using rails for apis and ember for frontend. So instead of separate repo I created one repo with a server folder for rails app and a client folder for ember app."}, {"owner": {"reputation": 22436, "user_id": 1954610, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/27d84db27dd0528916e8cd6954bdd328?s=128&d=identicon&r=PG", "display_name": "Tom Lord", "link": "https://stackoverflow.com/users/1954610/tom-lord"}, "edited": false, "score": 0, "creation_date": 1462973951, "post_id": 37164181, "comment_id": 61864202, "body": "A <i>possible</i> alternative would be to edit the <code>RAILS_ROOT</code> variable (in <code>config&#47;environments&#47;production</code>). But I&#39;m not sure what the full consequences of such a change would be, without trying for myself."}], "owner": {"reputation": 143, "user_id": 3675980, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/41290633c4f74587e1e50a749083750b?s=128&d=identicon&r=PG&f=1", "display_name": "abhima9yu", "link": "https://stackoverflow.com/users/3675980/abhima9yu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 434, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462973340, "creation_date": 1462973340, "question_id": 37164181, "link": "https://stackoverflow.com/questions/37164181/capistrano-sidekiq-task-not-working", "title": "Capistrano/Sidekiq task not working", "body": "<p>I am using rails 4.0 and ruby 2.3.</p>\n\n<p>I am using following gems for capscript.</p>\n\n<pre><code>capistrano (3.4.0)\ncapistrano-bundler (1.1.4)\ncapistrano-rails (1.1.5)\n</code></pre>\n\n<p>I am using capistrano/sidekiq module for running sidekiq related tasks.</p>\n\n<p>When I am running </p>\n\n<pre><code> cap staging sidekiq:start\n</code></pre>\n\n<p>I get the following error:</p>\n\n<pre><code>cap aborted!\nSSHKit::Runner::ExecuteError: Exception while executing as      deploy@10.50.11.190: sidekiq exit status: 1\nsidekiq stdout: Nothing written\nsidekiq stderr: Nothing written\n\nSSHKit::Command::Failed: sidekiq exit status: 1\nsidekiq stdout: Nothing written\nsidekiq stderr: Nothing written\n</code></pre>\n\n<p>Below is the command which failed on running the above task.</p>\n\n<pre><code>cd /opt/optimus_apps/merchant_tracking/current &amp;&amp; /usr/bin/env sidekiq --index 0 --pidfile     /opt/optimus_apps/merchant_tracking/shared/server/tmp/pids/sidekiq-0.pid -- environment staging --logfile /opt/optimus_apps/merchant_tracking/shared/server/log/sidekiq.log --config /opt/optimus_apps/merchant_tracking/shared/server/config/sidekiq.yml --daemon\n</code></pre>\n\n<p>I tried running the above command directly on the staging server with a small change and it worked. I ran the following command.</p>\n\n<pre><code> cd /opt/optimus_apps/merchant_tracking/current/server &amp;&amp; /usr/bin/env sidekiq --index 0 --pidfile  /opt/optimus_apps/merchant_tracking/shared/server/tmp/pids/sidekiq-0.pid --environment staging --logfile /opt/optimus_apps/merchant_tracking/shared/server/log/sidekiq.log --config /opt/optimus_apps/merchant_tracking/shared/server/config/sidekiq.yml --daemon\n</code></pre>\n\n<p>I changed the rails path from</p>\n\n<pre><code> /opt/optimus_apps/merchant_tracking/current --&gt; /opt/optimus_apps/merchant_tracking/current/server\n</code></pre>\n\n<p>The problem is my rails app lies inside current/server folder.</p>\n\n<p>So my question is how can I make sidekiq task to pick current/server folder rather than the current folder?</p>\n\n<p>Thanks in advance.</p>\n"}, {"tags": ["ruby", "apache2", "passenger", "rack"], "comments": [{"owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462975503, "post_id": 37163957, "comment_id": 61865622, "body": "I thought the public directory was /var/www/html. This is where my files are."}, {"owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462977136, "post_id": 37163957, "comment_id": 61866883, "body": "That worked, can you write it up as an answer please?"}], "answers": [{"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 1, "last_activity_date": 1462978360, "creation_date": 1462978360, "answer_id": 37166275, "question_id": 37163957, "link": "https://stackoverflow.com/questions/37163957/how-to-deploy-a-rack-based-ruby-application-with-apache-2-and-passenger/37166275#37166275", "title": "How to deploy a Rack-based Ruby application with Apache 2 and Passenger?", "body": "<p>Passenger expects that your app has a <code>public</code> and a <code>tmp</code> directory:</p>\n\n<ul>\n<li><p>The <code>public</code> directory has to be your <code>DocumentRoot</code>. It will be served by Apache if Passenger is disabled / not working, so nobody can see your application's source code.</p></li>\n<li><p>The <code>tmp</code> directory is used for Passenger's <code>restart.txt</code>.</p></li>\n</ul>\n\n<p>Your directory tree should look like this:</p>\n\n<pre><code>/var/www/html/\n\u251c\u2500\u2500 config.ru\n\u251c\u2500\u2500 uptime.rb\n\u251c\u2500\u2500 Gemfile\n\u251c\u2500\u2500 public/\n\u2514\u2500\u2500 tmp/\n</code></pre>\n\n<p>In your config:</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    DocumentRoot /var/www/html/public\n    # ...\n\n    &lt;Directory /var/www/html/public&gt;\n        # ...\n    &lt;/Directory&gt;\n\n    # ...\n&lt;/VirtualHost&gt;\n</code></pre>\n"}], "owner": {"reputation": 1176, "user_id": 951321, "user_type": "registered", "accept_rate": 78, "profile_image": "https://www.gravatar.com/avatar/9eb886c753c17c33ba7fd8061af43e3f?s=128&d=identicon&r=PG", "display_name": "markhorrocks", "link": "https://stackoverflow.com/users/951321/markhorrocks"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1006, "favorite_count": 0, "accepted_answer_id": 37166275, "answer_count": 1, "score": 1, "last_activity_date": 1462978721, "creation_date": 1462972819, "last_edit_date": 1462978721, "question_id": 37163957, "link": "https://stackoverflow.com/questions/37163957/how-to-deploy-a-rack-based-ruby-application-with-apache-2-and-passenger", "title": "How to deploy a Rack-based Ruby application with Apache 2 and Passenger?", "body": "<p>I have written a very simple \"hello world\" ruby script which I want to run under apache2 (2.4) and passenger on Ubuntu 14.04. This is not a rails app and I don't want to use the rails framework, this is just a single page application.</p>\n\n<p>So far, all I can get is a directory listing. Here are my files.</p>\n\n<p>uptime.rb</p>\n\n<pre><code>class Uptime\n  def call(env)\n     [200, {\"Content-Type\" =&gt; \"text/plain\"}, [\"Hello world!\"]]\n  end\nend\n</code></pre>\n\n<p>Gemfile</p>\n\n<pre><code>source 'https://rubygems.org'\ngem 'rack', '~&gt;1.5.1'\n</code></pre>\n\n<p>config.ru</p>\n\n<pre><code>require './uptime'\nrun Uptime.new\n</code></pre>\n\n<p>/etc/apache2/mods-available/passenger.load</p>\n\n<pre><code>LoadModule passenger_module /usr/lib/apache2/modules/mod_passenger.so\n</code></pre>\n\n<p>/etc/apache2/mods-available/passenger.conf</p>\n\n<pre><code>&lt;IfModule mod_passenger.c&gt;\n  PassengerRoot /usr/lib/ruby/vendor_ruby/phusion_passenger/locations.ini\n  PassengerDefaultRuby /home/mark/.rbenv/shims/ruby\n&lt;/IfModule&gt;\n</code></pre>\n\n<p>/etc/apache2/sites-available/000-default.conf</p>\n\n<pre><code>&lt;VirtualHost *:80&gt;\n    ServerAdmin webmaster@localhost\n    DocumentRoot /var/www/html\n\n    PassengerRuby /home/mark/.rbenv/versions/2.3.1/bin/ruby      \n\n    &lt;Directory /var/www/html&gt;\n      PassengerEnabled on\n      Allow from all\n      Options -MultiViews\n      Require all granted\n    &lt;/Directory&gt;\n\n    ErrorLog ${APACHE_LOG_DIR}/error.log\n    CustomLog ${APACHE_LOG_DIR}/access.log combined\n\n&lt;/VirtualHost&gt;\n</code></pre>\n"}, {"tags": ["ruby", "argv"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462971722, "post_id": 37163390, "comment_id": 61862378, "body": "This way you&#39;ll have a big list if the set of your options is really big. Besides, may be a bit complicated to maintain such code."}], "answers": [{"comments": [{"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "edited": false, "score": 0, "creation_date": 1462971783, "post_id": 37163480, "comment_id": 61862426, "body": "I know all about <code>optparser</code> but <code>due to me not being able to install external gems</code> it&#39;s not very helpful"}, {"owner": {"reputation": 324, "user_id": 978414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d383b96e7b52fc6d0592d0d9baecda?s=128&d=identicon&r=PG", "display_name": "ivann", "link": "https://stackoverflow.com/users/978414/ivann"}, "edited": false, "score": 3, "creation_date": 1462971918, "post_id": 37163480, "comment_id": 61862537, "body": "<code>optparser</code> is not a gem, it&#39;s in the standard ruby library. You only need to require it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462972073, "post_id": 37163480, "comment_id": 61862676, "body": "Does \u201cknowing <i>all</i> about\u201d include the knowledge that it is <i>not</i> a gem, but a standard library?"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 324, "user_id": 978414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d383b96e7b52fc6d0592d0d9baecda?s=128&d=identicon&r=PG", "display_name": "ivann", "link": "https://stackoverflow.com/users/978414/ivann"}, "edited": false, "score": 0, "creation_date": 1462972124, "post_id": 37163480, "comment_id": 61862717, "body": "@igwan I was unaware that it&#39;s standard library, I always thought it was a gem, that&#39;s awesome thank you!"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": true, "score": 5, "last_activity_date": 1462971864, "last_edit_date": 1462971864, "creation_date": 1462971610, "answer_id": 37163480, "question_id": 37163390, "link": "https://stackoverflow.com/questions/37163390/correct-way-to-parse-arguments-using-argv/37163480#37163480", "title": "Correct way to parse arguments using ARGV", "body": "<p><a href=\"http://ruby-doc.org/stdlib-2.3.1/libdoc/optparse/rdoc/OptionParser.html\" rel=\"nofollow\"><code>OptionParser</code></a> might be the right choice for possibly complicated parameters list.</p>\n\n<p>Regarding your code, I would rewrite it that way:</p>\n\n<pre><code>puts case ARGV[0]\n     when '-h' then \"Help page\"\n     when '--example' then \"Examples page\"\n     ...\n     end\n</code></pre>\n\n<p>Here is a DRY principle taken into account: one <code>puts</code>, since each branch does <code>puts</code>, <code>ARGV[0]</code> mentioned only once etc.</p>\n\n<p><a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-shift\" rel=\"nofollow\"><code>Array#shift</code></a> makes sense while you are looping through arguments array unless it is empty, since it removes the element from the array. In pseudocode that might look like:</p>\n\n<pre><code> while opt = ARGV.shift do\n   puts case opt\n        when '-h' then 'Help requested'\n        when '-f'\n          file = ARGV.shift # requires subsequent arg\n          # possible check for value is valid\n          do_smth_with_file file\n        ...\n        end\n end\n</code></pre>\n"}], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 627, "favorite_count": 0, "accepted_answer_id": 37163480, "answer_count": 1, "score": 0, "last_activity_date": 1462971864, "creation_date": 1462971407, "question_id": 37163390, "link": "https://stackoverflow.com/questions/37163390/correct-way-to-parse-arguments-using-argv", "title": "Correct way to parse arguments using ARGV", "body": "<p>I've written a program that uses <code>ARGV</code> as the arguments, due to me not being able to install external gems.</p>\n\n<p>What I'm doing so far is this:</p>\n\n<pre><code>if ARGV[0] == '-h'\n  puts \"Help page\"\nelsif ARGV[0] == '--example'\n  puts \"Examples page\"\nelsif ARGV[0] == '-t'\n  puts \"Gathering intel\"\nelsif ARGV[0] == '--version'\n  puts \"Version mode\"\nelsif ARGV[0] == '--dev-mode'\n  puts \"developer mode\"\nelse\n  puts \"Help page\"\nend\n</code></pre>\n\n<p>This doesn't seem idiomatic to me. So my question is, is there a correct way to parse <code>ARGV</code> arguments from a Ruby script? I've done some research and seen people using <code>ARGV.shift</code> and such, is this \"preferred\" in the Ruby world?</p>\n"}, {"tags": ["arrays", "ruby", "bubble-sort"], "answers": [{"comments": [{"owner": {"reputation": 317, "user_id": 6320358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/758898e352beb6f776306adf980b081b?s=128&d=identicon&r=PG&f=1", "display_name": "dedaumiersmith", "link": "https://stackoverflow.com/users/6320358/dedaumiersmith"}, "edited": false, "score": 0, "creation_date": 1462975932, "post_id": 37163331, "comment_id": 61865970, "body": "That works great (I didn&#39;t realise I could use i and j&#39;s numerical values this way). Thanks for your help!"}, {"owner": {"reputation": 997, "user_id": 4122792, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/PUWEO.jpg?s=128&g=1", "display_name": "Pablo", "link": "https://stackoverflow.com/users/4122792/pablo"}, "edited": false, "score": 0, "creation_date": 1598596348, "post_id": 37163331, "comment_id": 112515715, "body": "As it is, your algorithm just returns 4, not the original array sorted.  You need to return the array at the end of your method."}], "tags": [], "owner": {"reputation": 1741, "user_id": 4480140, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/4aa290172b3db3027fd086fcd7fa8e8a?s=128&d=identicon&r=PG&f=1", "display_name": "Pholochtairze", "link": "https://stackoverflow.com/users/4480140/pholochtairze"}, "is_accepted": true, "score": 4, "last_activity_date": 1462971271, "creation_date": 1462971271, "answer_id": 37163331, "question_id": 37163097, "link": "https://stackoverflow.com/questions/37163097/running-through-a-ruby-bubble-sort/37163331#37163331", "title": "Running Through a Ruby Bubble Sort", "body": "<p>What about adding a variable <code>j</code> in the outer loop and substracting j from <code>array.length - 1</code> ?</p>\n\n<p>It would look like that: </p>\n\n<pre><code>def bubble_sort(array)\n  (array.length - 1).times do |j|\n    (array.length - 1 - j).times do |i|\n      array[i], array[i+1] = array[i+1], array[i] if array[i] &gt; array[i+1]\n    end \n  end\nend\n\nbubble_sort([5,4,3,2,1])\n</code></pre>\n"}], "owner": {"reputation": 317, "user_id": 6320358, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/758898e352beb6f776306adf980b081b?s=128&d=identicon&r=PG&f=1", "display_name": "dedaumiersmith", "link": "https://stackoverflow.com/users/6320358/dedaumiersmith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 177, "favorite_count": 0, "accepted_answer_id": 37163331, "answer_count": 1, "score": 5, "last_activity_date": 1462974510, "creation_date": 1462970667, "last_edit_date": 1462974510, "question_id": 37163097, "link": "https://stackoverflow.com/questions/37163097/running-through-a-ruby-bubble-sort", "title": "Running Through a Ruby Bubble Sort", "body": "<p>I'm writing a bubble sort code as part of a beginner's class on Ruby. I know that  <code>(array.length - 1).times do |i|</code> is bad practice because I don't need to run to the end of an array each time. (In my example, [5,4,3,2,1] five is moved to the end during the first run through, the four is in its right place by the end of the second, etc., so there's no need to examine those numbers again): </p>\n\n<pre><code>def bubble_sort(array)\n  (array.length - 1).times do\n    (array.length - 1).times do |i|\n      array[i], array[i+1] = array[i+1], array[i] if array[i] &gt; array[i+1]\n    end \n  end\nend\n\nbubble_sort([5,4,3,2,1])\n</code></pre>\n\n<p>Is there a neat way to tell the method to examine one fewer element of the array each time? </p>\n"}, {"tags": ["javascript", "jquery", "sql", "ruby-on-rails", "ruby"], "answers": [{"comments": [{"owner": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1462981888, "post_id": 37167252, "comment_id": 61870336, "body": "Thanks for you reply, Yes I want to create more than two items, so Maybe I should modify only the last item from the same post_id to alleviate my code. what do you think ?"}, {"owner": {"reputation": 1298, "user_id": 3274024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c354a301d891e2464f2e2c89625a2c8?s=128&d=identicon&r=PG", "display_name": "jfornoff", "link": "https://stackoverflow.com/users/3274024/jfornoff"}, "reply_to_user": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1462982048, "post_id": 37167252, "comment_id": 61870456, "body": "I&#39;d propose you judge this, if you decide to just change one entry, you can <code>order_by</code> the created_at value and use <code>take</code> to just get one record. You can then call <code>update_attributes</code> instead of <code>update_all</code> to change only this record."}, {"owner": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1462983078, "post_id": 37167252, "comment_id": 61871165, "body": "I tried to follow your advice by changing the controller create the online function like in the last modification of my post, but it return :&quot;can&#39;t convert Hash into Integer&quot;. So I probably missed something"}, {"owner": {"reputation": 1298, "user_id": 3274024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c354a301d891e2464f2e2c89625a2c8?s=128&d=identicon&r=PG", "display_name": "jfornoff", "link": "https://stackoverflow.com/users/3274024/jfornoff"}, "reply_to_user": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1462983317, "post_id": 37167252, "comment_id": 61871311, "body": "<code>first()</code> does not accept arguments, use <code>where(...).take()</code>"}, {"owner": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1462983761, "post_id": 37167252, "comment_id": 61871562, "body": "I do not understand the condition that I have to invoke to say that if it is the first online with this Id, do not execute the next action. It is thus something like this? if @online = Online.where(post_id: params[:post_id]).take()"}, {"owner": {"reputation": 1298, "user_id": 3274024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c354a301d891e2464f2e2c89625a2c8?s=128&d=identicon&r=PG", "display_name": "jfornoff", "link": "https://stackoverflow.com/users/3274024/jfornoff"}, "reply_to_user": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1462983852, "post_id": 37167252, "comment_id": 61871621, "body": "you can write <code>unless Online.where(post_id: params[:post_id]).any?</code>, which looks into the database and returns if there are any records with the post_id already inserted."}, {"owner": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1462987098, "post_id": 37167252, "comment_id": 61873522, "body": "Well, after 217 tests, I fatally found my mistake, I did use the method in function create, then I should use it in new. I changed my code if you want to see the final result. I thank you very much for your advice, they made me a lot of time!"}, {"owner": {"reputation": 1298, "user_id": 3274024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c354a301d891e2464f2e2c89625a2c8?s=128&d=identicon&r=PG", "display_name": "jfornoff", "link": "https://stackoverflow.com/users/3274024/jfornoff"}, "reply_to_user": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "edited": false, "score": 0, "creation_date": 1462988396, "post_id": 37167252, "comment_id": 61874323, "body": "Good job! You can accept my answer using the check-sign next to the rating, if you choose to do so ;-)"}], "tags": [], "owner": {"reputation": 1298, "user_id": 3274024, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/9c354a301d891e2464f2e2c89625a2c8?s=128&d=identicon&r=PG", "display_name": "jfornoff", "link": "https://stackoverflow.com/users/3274024/jfornoff"}, "is_accepted": true, "score": 0, "last_activity_date": 1462980905, "creation_date": 1462980905, "answer_id": 37167252, "question_id": 37162870, "link": "https://stackoverflow.com/questions/37162870/d%c3%a9sactivate-the-oldest-post/37167252#37167252", "title": "D&#233;sactivate the oldest post", "body": "<p>You probably would put it into the controller action where you can use</p>\n\n<p><code>YourModel.where(post_id: params[:post_id]).update_all(push: false)</code> </p>\n\n<p>or something similar. It kind of depends what you want to do if you create more than 2 items with the same <code>post_id</code></p>\n"}], "owner": {"reputation": 151, "user_id": 6140921, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/d7f0e9fe14ff9fe126642d451ccc245e?s=128&d=identicon&r=PG&f=1", "display_name": "lili pupu", "link": "https://stackoverflow.com/users/6140921/lili-pupu"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 37167252, "answer_count": 1, "score": 0, "last_activity_date": 1462988987, "creation_date": 1462970070, "last_edit_date": 1462988987, "question_id": 37162870, "link": "https://stackoverflow.com/questions/37162870/d%c3%a9sactivate-the-oldest-post", "title": "D&#233;sactivate the oldest post", "body": "<p>I'm new in rails and I'm trying to build a web app, but I encounter the limits of my abilities. \nI have a classic app with user who have posts, and to put this post in public, I create a model and a controller Online. \nThat I'm trying to do now, It's to change the boolean :push(from Online) in false if a new Online is created with the same post_id as before.\nSo if I push again my post 2, the previews Online associated with the post 2 will update their :push in false.\nWell, if you have any ideas about that, let me know !\nThanks </p>\n\n<p>My code = </p>\n\n<p>Controllers:</p>\n\n<ul>\n<li>Onlines : </li>\n</ul>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class OnlinesController &lt; ApplicationController\r\n  before_action :authenticate_user!\r\n  before_action :set_post \r\n  before_action :owned_online, only: [:new, :edit, :update]\r\n  before_action :set_online\r\n\r\n  def new \r\n@online = current_user.onlines.build\r\n@online.post_id = @post.id\r\n@online.user_id = current_user.id\r\n  end \r\n\r\n  def create \r\n@online.user_id = current_user.id\r\n@online.post_id = @post.id \r\n  if Online.where(post_id: params[:post_id]).any?\r\n   @online = Online.where(post_id: params[:post_id]).last.update_attributes(push: false)\r\n  end\r\n @online = @post.onlines.create(online_params)\r\nif @online.save\r\n  if @online.portion &lt;= 0\r\n     @online.update(push: false)\r\n     flash[:success] = 'Veuillez indiquer le nombre de parts disponibles '\r\n     redirect_to root_path \r\n  else\r\n   @online.update(pushed_at: Time.zone.now)\r\n   @online.update(push: true)\r\n   flash[:success] = 'Votre post est en ligne !'\r\n   redirect_to root_path\r\n  end\r\nelse \r\n  render 'new'\r\nend \r\n  end \r\n\r\n  def show \r\n\r\n  end \r\n\r\ndef update  \r\n    if @onlines.update(online_params)\r\n      if @online.push == false\r\n        if @online.portion &lt;= 1\r\n          @online.update(push: false)\r\n          flash[:success] = 'Veuillez indiquer le nombre de parts disponibles '\r\n          redirect_to root_path \r\n        else\r\n         @online.update(push: true)\r\n      \r\n      flash[:success] = 'Votre post a bien \u00e9t\u00e9 push\u00e9 !'\r\n      redirect_to root_path      \r\n      end   \r\n    end\r\n    else\r\n      @user.errors.full_messages\r\n      flash[:error] = @user.errors.full_messages\r\n      render :edit\r\n    end\r\n  end\r\n\r\n\r\nprivate \r\n\r\ndef online_params\r\n  params.require(:online).permit(:user_id, :post_id, :prix, :portion, :push, :pushed_at)\r\n  end \r\n\r\n  def owned_online \r\n     @post = Post.find(params[:post_id])\r\n  unless current_user == @post.user\r\n    flash[:alert] = \"That post doesn't belong to you!\"\r\n    redirect_to :back\r\n  end\r\nend  \r\n\r\n  def set_post\r\n  @post = Post.find_by(params[:post_id]) \r\n  end \r\n\r\n\r\n  def set_online\r\n    @post = Post.find(params[:post_id])\r\n  @online = Online.find_by(params[:id]) \r\n  end \r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Posts : </p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class PostsController &lt; ApplicationController\r\n  before_action :authenticate_user!\r\n  before_action :set_post, only: [:show, :edit, :update, :destroy]\r\n  before_action :set_online\r\n  before_action :owned_post, only: [:edit, :update, :destroy]\r\n  \r\n\r\n  # GET /posts\r\n  # GET /posts.json\r\n  def index\r\n        @posts = Post.push_posts \r\n\r\nend  \r\n\r\n\r\n  # GET /posts/1\r\n  # GET /posts/1.json\r\n  def show\r\n\r\n  end\r\n\r\n  # GET /posts/new\r\n  def new\r\n    @post = current_user.posts.build\r\n  end\r\n\r\n  # GET /posts/1/edit\r\n  def edit\r\n  end\r\n\r\n  # POST /posts\r\n  # POST /posts.json\r\n  def create\r\n    @post = current_user.posts.build(post_params)\r\n    respond_to do |format|\r\n      if @post.save\r\n        format.html { redirect_to @post, notice: 'Post was successfully created.' }\r\n        format.json { render :show, status: :created, location: @post }\r\n      else\r\n        format.html { render :new }\r\n        format.json { render json: @post.errors, status: :unprocessable_entity }\r\n      end\r\n    end\r\n  end\r\n\r\n  # PATCH/PUT /posts/1\r\n  # PATCH/PUT /posts/1.json\r\n  def update\r\n    respond_to do |format|\r\n      if @post.update(post_params)\r\n        format.html { redirect_to @post, notice: 'Post was successfully updated.' }\r\n        format.json { render :show, status: :ok, location: @post }\r\n      else\r\n        format.html { render :edit }\r\n        format.json { render json: @post.errors, status: :unprocessable_entity }\r\n      end\r\n    end\r\n  end\r\n\r\n  # DELETE /posts/1\r\n  # DELETE /posts/1.json\r\n  def destroy\r\n    @post.destroy\r\n    respond_to do |format|\r\n      format.html { redirect_to posts_url, notice: 'Post was successfully destroyed.' }\r\n      format.json { head :no_content }\r\n    end\r\n  end\r\n\r\n  \r\n\r\n  private\r\n    # Use callbacks to share common setup or constraints between actions.\r\n    def set_post\r\n      @post = Post.find(params[:id])\r\n    end\r\n\r\n   \r\n    \r\n\r\n    # Never trust parameters from the scary internet, only allow the white list through.\r\n    def post_params\r\n      params.require(:post).permit(:user_id, :title, :description, :image, ingredients_attributes: [:id, :name, :_destroy])\r\n    end\r\n\r\n    def owned_post  \r\n  unless current_user == @post.user\r\n    flash[:alert] = \"That post doesn't belong to you!\"\r\n    redirect_to root_path\r\n  end\r\nend  \r\n\r\ndef set_online\r\n  @onlines = Online.find_by(params[:id]) \r\n  end \r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Models </p>\n\n<ul>\n<li>Online :</li>\n</ul>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>class Online &lt; ActiveRecord::Base\r\n  \r\n  belongs_to :post\r\n  belongs_to :user\r\n\r\n  \r\n  scope :push, -&gt;{ where(push: true).order(\"pushed_at DESC\") }\r\n  \r\n\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<ul>\n<li>Post :</li>\n</ul>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>  class Post &lt; ActiveRecord::Base\r\n\r\n  \r\n  belongs_to :user\r\n  has_many :onlines, dependent: :destroy\r\n\r\n  scope :push_posts, lambda { joins(:onlines).merge(Online.push) } \r\n\r\n  has_many :ingredients, dependent: :destroy\r\n  \r\n\r\n\r\n  accepts_nested_attributes_for :ingredients, reject_if: :all_blank, allow_destroy: true\r\n\r\n  has_many :comments\r\n  \r\n  validates :image, presence: true\r\n\r\n  has_attached_file :image, styles: { medium: \"300x300#\"}, default_url: \"/images/:style/missing.png\"\r\n  validates_attachment_content_type :image, content_type: /\\Aimage\\/.*\\Z/\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>&amp; finaly, the view to display the index of post :</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code> \r\n&lt;div class=\"row\"&gt;\r\n&lt;%- @posts.each do |post|%&gt;\r\n&lt;%- if post.onlines.last.push == true %&gt;\r\n&lt;div class=\"post\"&gt;\r\n  &lt;div class=\"form-group text-center\"&gt;\r\n    &lt;h3&gt; &lt;%=post.title%&gt;&lt;/h3&gt;\r\n  &lt;/div&gt;\r\n\r\n  \r\n &lt;p&gt; Posted by : &lt;%= link_to post.user.pseudo, profile_path(post.user.pseudo) %&gt;,  &lt;%= time_ago_in_words(post.onlines.last.pushed_at) %&gt; ago &lt;/p&gt;\r\n\r\n\r\n\r\n&lt;p&gt;&lt;%= post.onlines.last.prix %&gt;&lt;/p&gt;\r\n&lt;p&gt;&lt;%= post.onlines.last.portion %&gt;&lt;/p&gt;\r\n\r\n  &lt;div class=\"image text-center\"&gt;\r\n    &lt;div class=\"image-border\"&gt;\r\n     &lt;%= link_to (image_tag post.image.url(:medium), class: 'img-responsive'), post_path(post)%&gt;\r\n    &lt;/div&gt;\r\n  &lt;/div&gt;\r\n\r\n\r\n\r\n  &lt;/div&gt; \r\n  &lt;% end %&gt;\r\n  &lt;%end%&gt;\r\n  &lt;/div&gt;\r\n &lt;/div&gt;\r\n &lt;/div&gt;</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>Thanks for your times !!</p>\n"}, {"tags": ["ruby", "time"], "comments": [{"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1462970056, "post_id": 37162506, "comment_id": 61860910, "body": "Why are you comparing them as strings?"}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 0, "creation_date": 1462970121, "post_id": 37162506, "comment_id": 61860968, "body": "@sawa Whatever I did worked, so why not go with it?"}, {"owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 1, "creation_date": 1462970330, "post_id": 37162506, "comment_id": 61861124, "body": "And with the words &quot;Whatever I did worked, so why not go with it?&quot; we all started our journey to oblivion."}, {"owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "reply_to_user": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "edited": false, "score": 0, "creation_date": 1462970436, "post_id": 37162506, "comment_id": 61861220, "body": "@ReggieB If it works, it works, so what&#39;s wrong with accepting it until it&#39;s finished, and making it better when it&#39;s finally done..?"}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 2, "creation_date": 1462970693, "post_id": 37162506, "comment_id": 61861443, "body": "With leading zeros, the lexicographical order corresponds to the chronological order."}], "answers": [{"tags": [], "owner": {"reputation": 110733, "user_id": 1009479, "user_type": "registered", "accept_rate": 64, "profile_image": "https://i.stack.imgur.com/wlrC5.jpg?s=128&g=1", "display_name": "Yu Hao", "link": "https://stackoverflow.com/users/1009479/yu-hao"}, "is_accepted": true, "score": 4, "last_activity_date": 1462969645, "creation_date": 1462969645, "answer_id": 37162691, "question_id": 37162506, "link": "https://stackoverflow.com/questions/37162506/how-to-make-time-return-morning-or-afternoon/37162691#37162691", "title": "How to make time return morning or afternoon", "body": "<p>You don't need any string manipulation:</p>\n\n<pre><code>t = Time.now\n# =&gt; 2016-05-11 20:26:11 +0800\nt.hour\n# =&gt; 20\n</code></pre>\n\n<p>Just compare its <a href=\"http://ruby-doc.org/core-2.3.0/Time.html#method-i-hour\" rel=\"nofollow\"><code>hour</code></a> (an integer) with <code>12</code>.</p>\n"}, {"tags": [], "owner": {"reputation": 7638, "user_id": 1014251, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/1c4500c91af486c885af8bb84eefd063?s=128&d=identicon&r=PG", "display_name": "ReggieB", "link": "https://stackoverflow.com/users/1014251/reggieb"}, "is_accepted": false, "score": 3, "last_activity_date": 1462969824, "creation_date": 1462969824, "answer_id": 37162775, "question_id": 37162506, "link": "https://stackoverflow.com/questions/37162506/how-to-make-time-return-morning-or-afternoon/37162775#37162775", "title": "How to make time return morning or afternoon", "body": "<p>You are comparing strings - which won't give you the results you expect.</p>\n\n<p><code>Time.now.to_s</code> outputs a string like: \"2016-05-11 13:27:43 +0100\". When you compare it to \"12:00\" that is a comparison of the letters in the string, and not the time they represent.</p>\n\n<p>Try this instead:</p>\n\n<pre><code>t = Time.now\n\nif t.strftime('%P') == 'pm'\n  'Good afternoon'\nelse\n  'Good morning'\nend\n</code></pre>\n\n<p>Documentation for strftime: <a href=\"http://ruby-doc.org/core-2.3.1/Time.html#method-i-strftime\" rel=\"nofollow\">http://ruby-doc.org/core-2.3.1/Time.html#method-i-strftime</a></p>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 1, "last_activity_date": 1462989960, "creation_date": 1462989960, "answer_id": 37170253, "question_id": 37162506, "link": "https://stackoverflow.com/questions/37162506/how-to-make-time-return-morning-or-afternoon/37170253#37170253", "title": "How to make time return morning or afternoon", "body": "<pre><code>require 'time'\n\nt = Time.new\nputs \"Good %s\" % [(t.to_i/43199).even? ? \"morning\" : \"afternoon\"]\nGood morning\n\nt += 43199\nputs \"Good %s\" % [(t.to_i/43199).even? ? \"morning\" : \"afternoon\"]\nGood afternoon\n</code></pre>\n\n<p>Note: <code>43199 = 12*60*60/2 - 1</code></p>\n\n<p>Just sayin'.</p>\n"}], "owner": {"reputation": 1485, "user_id": 5388516, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/96fff619864c3ebb7654eb98bd945b43?s=128&d=identicon&r=PG&f=1", "display_name": "13aal", "link": "https://stackoverflow.com/users/5388516/13aal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 263, "favorite_count": 0, "accepted_answer_id": 37162691, "answer_count": 3, "score": 1, "last_activity_date": 1462989960, "creation_date": 1462969164, "last_edit_date": 1462970334, "question_id": 37162506, "link": "https://stackoverflow.com/questions/37162506/how-to-make-time-return-morning-or-afternoon", "title": "How to make time return morning or afternoon", "body": "<p>I've been attempting to output either <code>Morning</code> or <code>Afternoon</code> depending on the time of the day. I turned the time into a string, and tried to compare against it. Here's what I have:</p>\n\n<pre><code>t = Time.now\n# =&gt; 2016-05-11 07:18:10 -0500\nif t.to_s &gt;= '12:00'\n  'Good afternoon'\nelse\n  'Good morning'\nend\n# =&gt; \"Good afternoon\"\n</code></pre>\n\n<p>It defaults to <code>\"Good afternoon\"</code>. Why is this? Is it because Ruby sets up time in a 24 hour clock? Or is it something within the coding?</p>\n"}, {"tags": ["ruby", "watir"], "comments": [{"owner": {"reputation": 5134, "user_id": 1672197, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/i8HkV.png?s=128&g=1", "display_name": "orde", "link": "https://stackoverflow.com/users/1672197/orde"}, "edited": false, "score": 1, "creation_date": 1462983936, "post_id": 37162364, "comment_id": 61871673, "body": "Please add the appropriate but minimal amount of HTML (to reproduce the issue) to the original question.  Screenshots and code in comments make it more difficult to understand the issue."}], "answers": [{"comments": [{"owner": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1462979584, "post_id": 37162586, "comment_id": 61868691, "body": "thanks but truly said I do not know how can I use this for my example;( with link that u added. First option is impossible ;)"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1463143918, "post_id": 37162586, "comment_id": 61952178, "body": "@pav, out of curiosity, what did you end up doing to resolve the problem?"}], "tags": [], "owner": {"reputation": 58, "user_id": 4681470, "user_type": "registered", "accept_rate": 62, "profile_image": "https://www.gravatar.com/avatar/a00da3982033eb73a2b5f93d80bbf374?s=128&d=identicon&r=PG&f=1", "display_name": "Jason Koelewyn", "link": "https://stackoverflow.com/users/4681470/jason-koelewyn"}, "is_accepted": true, "score": 0, "last_activity_date": 1462969354, "last_edit_date": 1495541764, "creation_date": 1462969354, "answer_id": 37162586, "question_id": 37162364, "link": "https://stackoverflow.com/questions/37162364/i-can-not-locate-proper-element-click-on-link-ruby/37162586#37162586", "title": "I can not locate proper element - click on link Ruby", "body": "<p>There are two options.  One is get your developers to add better IDs.\nIf that is not possible, try this:\n<a href=\"https://stackoverflow.com/questions/17612497/how-does-ruby-webdriver-get-element-with-hyphen-in-name-value-pair\">how does ruby webdriver get element with hyphen in &lt;name, value&gt; pair</a>\nIt worked for me in several similar situations.</p>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1462979180, "post_id": 37163822, "comment_id": 61868375, "body": "hi thanks, but still the same;/ for this 3 examples and for another link works with button not link ;))"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1462980175, "post_id": 37163822, "comment_id": 61869153, "body": "Please provide the HTML that reproduces the problem."}, {"owner": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1462980623, "post_id": 37163822, "comment_id": 61869470, "body": "&lt;a data-bind=&quot;click: open.bind(null, $parent.redirectTo)&quot; data-initobject=&quot;{&amp;quot;title&amp;quot;:&amp;quot;Registrering&amp;quot;&zwnj;&#8203;,&amp;quot;salesConditio&zwnj;&#8203;nsTitle&amp;quot;:&amp;quot;&zwnj;&#8203;Salgsbetingelser&amp;quo&zwnj;&#8203;t;}&quot; data-viewmodel=&quot;PagesAsync/RegisterPrivate/RegisterPrivateVi&zwnj;&#8203;ewModel&quot; href=&quot;#&quot;&gt;For priva&lt;/a&gt;  and here screen with more code: <a href=\"http://imgur.com/mFvqQeV\" rel=\"nofollow noreferrer\">imgur.com/mFvqQeV</a>"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 1, "creation_date": 1462981590, "post_id": 37163822, "comment_id": 61870127, "body": "That HTML isn&#39;t sufficient to reproduce your problem. If you create a page with just that HTML, the last 2 examples work correctly. This means there is something more complicated with your problem. Without the HTML (and likely JavaScript/CSS), we cannot reproduce that issue. If you cannot create an example, then all I can suggest is that you work through the <a href=\"https://jkotests.wordpress.com/unable-to-locate-element/\" rel=\"nofollow noreferrer\">common reasons for seeing this exception</a>."}, {"owner": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1463052212, "post_id": 37163822, "comment_id": 61903607, "body": "I added @browseer.a(:xpath,&quot;//a[@data-viewmodel=&#39;PagesAsync/Register&zwnj;&#8203;Private/RegisterPriv&zwnj;&#8203;ateViewModel&#39;]&quot;).cli&zwnj;&#8203;ck but now another error occurs: oMethodError: undefined method `a&#39; for nil:NilClass"}, {"owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "reply_to_user": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1463057419, "post_id": 37163822, "comment_id": 61907509, "body": "What is <code>@browseer</code>? Is that actually your browser instance? Based on your original examples, it should be <code>@browser</code> (notice one &quot;e&quot; instead of 2) or <code>browser</code>."}], "tags": [], "owner": {"reputation": 44680, "user_id": 1200545, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/fbbfea5f6583c16f96fc11ef821cfeee?s=128&d=identicon&r=PG&f=1", "display_name": "Justin Ko", "link": "https://stackoverflow.com/users/1200545/justin-ko"}, "is_accepted": false, "score": 2, "last_activity_date": 1462972501, "creation_date": 1462972501, "answer_id": 37163822, "question_id": 37162364, "link": "https://stackoverflow.com/questions/37162364/i-can-not-locate-proper-element-click-on-link-ruby/37163822#37163822", "title": "I can not locate proper element - click on link Ruby", "body": "<p>The main problem is that you are telling Watir to look for a <code>button</code> when you actually want a <code>link</code>. While the UI may be styled to look like a button, you will notice that the HTML has a <code>a</code> tag instead.</p>\n\n<p>The first example, which also has the wrong locator type, should be:</p>\n\n<pre><code>@browser.link(:xpath =&gt; '//*[@class=\"login\"]//ul/li[0]/a').click\n</code></pre>\n\n<p>The second example should be:</p>\n\n<pre><code>browser.link(:xpath =&gt; \"//a[@data-viewmodel='PagesAsync/RegisterPrivate/RegisterPrivateViewModel']\").click\n</code></pre>\n\n<p>Note that the second example would be more Watir-like if you use the normal attribute locators:</p>\n\n<pre><code>browser.link(data_viewmodel: 'PagesAsync/RegisterPrivate/RegisterPrivateViewModel').click\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1463902403, "post_id": 37196417, "comment_id": 62255228, "body": "thanks! but still does not work..;:( unable to locate element, using {:class=&gt;&quot;login&quot;, :tag_name=&gt;&quot;div&quot;} (Watir::Exception::UnknownObjectException). I think that instead of first line (divs) should be div? than I got &quot;method_missing&#39;: undefined method `length&#39; for #&lt;Watir::Div:0x00000002c85800&gt; (NoMethodError)&quot;"}, {"owner": {"reputation": 52, "user_id": 2138592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a4f5b279b56041467e9065e65ce0b3?s=128&d=identicon&r=PG", "display_name": "marat75", "link": "https://stackoverflow.com/users/2138592/marat75"}, "reply_to_user": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1464050203, "post_id": 37196417, "comment_id": 62313552, "body": "Watir::Div does not have a length method, but Watir::DivCollection does. <a href=\"http://www.rubydoc.info/gems/watir-webdriver/Watir/ElementCollection#length-instance_method\" rel=\"nofollow noreferrer\">rubydoc.info/gems/watir-webdriver/Watir/&hellip;</a>     The error you get indicates that Watir cannot find the div container with class name &#39;login&#39;. Has the HTML stayed the same?"}, {"owner": {"reputation": 52, "user_id": 2138592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a4f5b279b56041467e9065e65ce0b3?s=128&d=identicon&r=PG", "display_name": "marat75", "link": "https://stackoverflow.com/users/2138592/marat75"}, "reply_to_user": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "edited": false, "score": 0, "creation_date": 1464052047, "post_id": 37196417, "comment_id": 62313933, "body": "Sorry, wrong link in the previous comment: <a href=\"http://rubydoc.info/gems/watir-webdriver/Watir/DivCollection\" rel=\"nofollow noreferrer\">rubydoc.info/gems/watir-webdriver/Watir/DivCollection</a> . What happens if you try @browser.div(:class =&gt; &#39;ubo-box scroll&#39;).div(:class =&gt; &#39;login&#39;).ul.lis[0].a.text and @browser.div(:class =&gt; &#39;ubo-box scroll&#39;).div(:class =&gt; &#39;login&#39;).ul.lis[0].a.present?"}], "tags": [], "owner": {"reputation": 52, "user_id": 2138592, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c8a4f5b279b56041467e9065e65ce0b3?s=128&d=identicon&r=PG", "display_name": "marat75", "link": "https://stackoverflow.com/users/2138592/marat75"}, "is_accepted": false, "score": 0, "last_activity_date": 1463084211, "last_edit_date": 1463084211, "creation_date": 1463083369, "answer_id": 37196417, "question_id": 37162364, "link": "https://stackoverflow.com/questions/37162364/i-can-not-locate-proper-element-click-on-link-ruby/37196417#37196417", "title": "I can not locate proper element - click on link Ruby", "body": "<p>I wonder how you can find a button by using an xpath to a link. It is also not clear whether you use browser or @browser. You would need to look into how the browser instance is defined, which likely is one of these:   </p>\n\n<pre><code>@browser = Watir::Browser.new :chrome\n###or###\nbrowser = Watir::Browser.start 'example.com', :firefox\n</code></pre>\n\n<p>and if you haven't create a browser instance, then you would need to do it before you can use Watir-Webdriver. ;)</p>\n\n<p>As for your question, you could try searching using the text if it is unique like this, though it may be a brittle test:</p>\n\n<pre><code>@browser.div(:class =&gt; 'login').link(:text =&gt; /For priva/).click\n</code></pre>\n\n<p>but I would recommend to double check the number of elements found using the div and link locators like this to make sure you got the right element:</p>\n\n<pre><code>@browser.divs(:class =&gt; 'login').length\n@browser.div(:class =&gt; 'login').links(:text =&gt; /For priva/).length\n</code></pre>\n"}], "owner": {"reputation": 5, "user_id": 6244722, "user_type": "registered", "accept_rate": 43, "profile_image": "https://www.gravatar.com/avatar/8a5dcd943b573d6ed15acb20075cc227?s=128&d=identicon&r=PG&f=1", "display_name": "pav", "link": "https://stackoverflow.com/users/6244722/pav"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 571, "favorite_count": 0, "accepted_answer_id": 37162586, "answer_count": 3, "score": -2, "last_activity_date": 1463084211, "creation_date": 1462968798, "last_edit_date": 1462974390, "question_id": 37162364, "link": "https://stackoverflow.com/questions/37162364/i-can-not-locate-proper-element-click-on-link-ruby", "title": "I can not locate proper element - click on link Ruby", "body": "<p>I tried to click on link (see screenshots)\n<a href=\"http://imgur.com/q66g7z6\" rel=\"nofollow\">http://imgur.com/q66g7z6</a>\n<a href=\"http://imgur.com/KNF1y7z\" rel=\"nofollow\">http://imgur.com/KNF1y7z</a></p>\n\n<p>I tried using few examples \ne.g</p>\n\n<pre><code>@browser.button(:class=&gt; '//*[@class=\"login\"]//ul/li[0]/a').click\n</code></pre>\n\n<p>and </p>\n\n<pre><code>browser.button(:xpath=&gt; \"//a[@data-viewmodel='PagesAsync/RegisterPrivate/RegisterPrivateViewModel']\").click\n</code></pre>\n\n<p>but is not correct\nI can see the message that unable to locate element\nCan somebody help?</p>\n"}, {"tags": ["ruby", "sass", "phpstorm", "webstorm"], "answers": [{"comments": [{"owner": {"reputation": 1486, "user_id": 2947812, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ia1v7.jpg?s=128&g=1", "display_name": "Mikhail Batcer", "link": "https://stackoverflow.com/users/2947812/mikhail-batcer"}, "edited": false, "score": 0, "creation_date": 1462981799, "post_id": 37166051, "comment_id": 61870264, "body": "That helped. There is also a verbose synonym to <code>-I</code>: <code>--load-path</code>."}, {"owner": {"reputation": 1486, "user_id": 2947812, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ia1v7.jpg?s=128&g=1", "display_name": "Mikhail Batcer", "link": "https://stackoverflow.com/users/2947812/mikhail-batcer"}, "edited": false, "score": 0, "creation_date": 1462981953, "post_id": 37166051, "comment_id": 61870381, "body": "By the way, some tips in this dialogue window would be helpful. Before reading several helps, I actually thought that Working directory setting was what sets load path..."}, {"owner": {"reputation": 72396, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "reply_to_user": {"reputation": 1486, "user_id": 2947812, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ia1v7.jpg?s=128&g=1", "display_name": "Mikhail Batcer", "link": "https://stackoverflow.com/users/2947812/mikhail-batcer"}, "edited": false, "score": 0, "creation_date": 1463050416, "post_id": 37166051, "comment_id": 61902364, "body": "the dialog window is the same for all file watchers (that is actually just a UI that allows setting up ANY tool as a watcher), there is no way to add specific tips there. Available options are different for different tools/versions"}], "tags": [], "owner": {"reputation": 72396, "user_id": 2274212, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f05f19aded7e6cfc60f184796e8e02a4?s=128&d=identicon&r=PG", "display_name": "lena", "link": "https://stackoverflow.com/users/2274212/lena"}, "is_accepted": true, "score": 1, "last_activity_date": 1462977842, "creation_date": 1462977842, "answer_id": 37166051, "question_id": 37162049, "link": "https://stackoverflow.com/questions/37162049/resolving-asset-location-issue-using-ruby-scss-transpiler-in-webstorm/37166051#37166051", "title": "Resolving asset location issue using Ruby SCSS transpiler in WebStorm", "body": "<p>You will get exactly the same issue when running scss.bat in command line:</p>\n\n<pre><code>C:\\Projects\\prj&gt;cd app\n\nC:\\Projects\\prj\\app&gt;C:/Ruby193/bin/scss.bat --no-cache --update sass/index.scss\nerror sass/index.scss (Line 1: File to import not found or unreadable: bower_components/_colors.)\n</code></pre>\n\n<p>See <a href=\"https://github.com/sass/sass/issues/652\" rel=\"nofollow noreferrer\">https://github.com/sass/sass/issues/652</a>: current working directory being automatically placed on the Sass load path is deprecated in 3.3. You need passing the load path explicitly with <code>-I</code> option to work with folders relative to the working directory. Like:</p>\n\n<p><a href=\"https://i.stack.imgur.com/48bv5.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/48bv5.png\" alt=\"enter image description here\"></a></p>\n"}], "owner": {"reputation": 1486, "user_id": 2947812, "user_type": "registered", "accept_rate": 63, "profile_image": "https://i.stack.imgur.com/Ia1v7.jpg?s=128&g=1", "display_name": "Mikhail Batcer", "link": "https://stackoverflow.com/users/2947812/mikhail-batcer"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 392, "favorite_count": 0, "accepted_answer_id": 37166051, "answer_count": 1, "score": 0, "last_activity_date": 1462977842, "creation_date": 1462968040, "question_id": 37162049, "link": "https://stackoverflow.com/questions/37162049/resolving-asset-location-issue-using-ruby-scss-transpiler-in-webstorm", "title": "Resolving asset location issue using Ruby SCSS transpiler in WebStorm", "body": "<p>I have this structure of SCSS:</p>\n\n<pre><code>app\n    styles.scss\n    bower_components\n        _colors.scss\n        _fonts.scss\n    sass\n        index.scss\n</code></pre>\n\n<p>styles.scss:</p>\n\n<pre><code>@import \"sass/index\";\n</code></pre>\n\n<p>index.scss:</p>\n\n<pre><code>@import \"bower_components/_colors\";\n@import \"bower_components/_fonts\";\n</code></pre>\n\n<p><code>app</code> folder is set as working directory in File Watcher settings and is marked as \"Resource Root\" in WebStorm. However, transpiling fails with error: \n<code>error sass/index.scss (Line 3: File to import not found or unreadable: bower_components/_colors.)</code></p>\n\n<p>I've read that <code>@import</code>s evaluated in SCSS</p>\n\n<ol>\n<li>relative to current file location </li>\n<li>relative to root location</li>\n</ol>\n\n<p>But in my case it is obvious that Ruby transpiler doesn't do attempt to find files relative to root location. Is it a bug? Or I am doing something wrong?</p>\n\n<p>I installed SCSS through Ruby and set up File Watcher according to <a href=\"https://www.jetbrains.com/help/webstorm/2016.1/transpiling-sass-less-and-scss-to-css.html\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/webstorm/2016.1/transpiling-sass-less-and-scss-to-css.html</a></p>\n\n<p>This is my File Watcher settings:</p>\n\n<p><a href=\"https://i.stack.imgur.com/C45pQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/C45pQ.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "comments", "userid"], "comments": [{"owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "edited": false, "score": 0, "creation_date": 1462968020, "post_id": 37161603, "comment_id": 61859336, "body": "From your code, it looks like the variable should be <code>comment</code>, not <code>@comment</code>"}, {"owner": {"reputation": 7, "user_id": 6267845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c571b08c61b523ffd24c30c320706ed0?s=128&d=identicon&r=PG&f=1", "display_name": "Sapsford11", "link": "https://stackoverflow.com/users/6267845/sapsford11"}, "edited": false, "score": 0, "creation_date": 1462969636, "post_id": 37161603, "comment_id": 61860574, "body": "Thanks a lot, this was the error. I knew it was something simple :)"}], "answers": [{"comments": [{"owner": {"reputation": 7, "user_id": 6267845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c571b08c61b523ffd24c30c320706ed0?s=128&d=identicon&r=PG&f=1", "display_name": "Sapsford11", "link": "https://stackoverflow.com/users/6267845/sapsford11"}, "edited": false, "score": 0, "creation_date": 1462969653, "post_id": 37162186, "comment_id": 61860585, "body": "Thanks, this has fixed it :)"}], "tags": [], "owner": {"reputation": 784, "user_id": 4800709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IG6C4.jpg?s=128&g=1", "display_name": "Navin", "link": "https://stackoverflow.com/users/4800709/navin"}, "is_accepted": false, "score": 0, "last_activity_date": 1462968386, "creation_date": 1462968386, "answer_id": 37162186, "question_id": 37161603, "link": "https://stackoverflow.com/questions/37161603/how-to-only-let-the-author-of-comments-edit-update-destroy-them/37162186#37162186", "title": "How to only let the author of comments edit, update &amp; destroy them?", "body": "<p>You are getting this nil:NilClass error because you get instance variable @comment nil, so that's why you didn't get user_id from @comment and getting this error.</p>\n\n<p>So change the <strong>@comment</strong> variable to <strong>comment</strong> and you will get the user_id.</p>\n"}, {"tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": true, "score": 0, "last_activity_date": 1462968399, "creation_date": 1462968399, "answer_id": 37162193, "question_id": 37161603, "link": "https://stackoverflow.com/questions/37161603/how-to-only-let-the-author-of-comments-edit-update-destroy-them/37162193#37162193", "title": "How to only let the author of comments edit, update &amp; destroy them?", "body": "<p>In _comment.html.haml, you are using <code>@comment</code>, which probably is not declared anywhere. Changing it to <code>comment</code> should fix the issue</p>\n\n<pre><code>- if comment.user_id == current_user.id\n</code></pre>\n"}], "owner": {"reputation": 7, "user_id": 6267845, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/c571b08c61b523ffd24c30c320706ed0?s=128&d=identicon&r=PG&f=1", "display_name": "Sapsford11", "link": "https://stackoverflow.com/users/6267845/sapsford11"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 342, "favorite_count": 0, "accepted_answer_id": 37162193, "answer_count": 2, "score": 0, "last_activity_date": 1462968399, "creation_date": 1462966948, "question_id": 37161603, "link": "https://stackoverflow.com/questions/37161603/how-to-only-let-the-author-of-comments-edit-update-destroy-them", "title": "How to only let the author of comments edit, update &amp; destroy them?", "body": "<p>I'm trying to prevent all users being able to edit, update and destroy comments made to posts in my forum. I managed to prevent all users editing the posts, but i can't work out what i need to do to prevent all users editing the comments.</p>\n\n<p>I solved the post issue with this before_action in the post controller:</p>\n\n<pre><code>before_action :post_owner, only: [:edit, :update, :destroy]\n</code></pre>\n\n<p>This is my show.html.haml:</p>\n\n<pre><code>#post_content\n\n%h1= @post.title\n%p= @post.content\n\n#comments\n    %h2\n        = @post.comments.count\n        Comments\n    = render @post.comments\n\n    - if user_signed_in?\n\n        %h3 Reply to thread\n        = render'comments/form'\n\n        %br/\n        %hr/\n        %br\n\n        - if @post.user_id == current_user.id\n            = link_to \"Edit\", edit_post_path(@post), class: \"button\"\n            = link_to \"Delete\", post_path(@post), method: :delete, data: { confirm: \"Are you sure you want to do this?\"}, class: \"button\"\n</code></pre>\n\n<p>I added a before_action for comments in the post_controller and tried this in the _comment.html.haml:</p>\n\n<pre><code>.comment.clearfix\n.content\n    %p.comment_content= comment.comment\n    %p.comment_author= comment.user.email\n\n%br/\n%br/\n%br/\n%br/\n\n- if @comment.user_id == current_user.id\n\n    = link_to \"Edit\", edit_post_comment_path(comment.post, comment), class: \"button\"\n\n    = link_to \"Delete\", [comment.post, comment], method: :delete, data: { confirm: \"Are you sure?\"}, class: \"button\"\n</code></pre>\n\n<p>However i receive the following error:</p>\n\n<pre><code>undefined method `user_id' for nil:NilClass\n</code></pre>\n\n<p>I think this is a simple solution but i'm not that experienced with ruby on rails just yet.</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver", "webdriver", "rack"], "comments": [{"owner": {"reputation": 4546, "user_id": 2781701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5745f276004f077454f27cde70858a1d?s=128&d=identicon&r=PG", "display_name": "Rafael Almeida", "link": "https://stackoverflow.com/users/2781701/rafael-almeida"}, "edited": false, "score": 1, "creation_date": 1462966764, "post_id": 37161385, "comment_id": 61858330, "body": "What language are you using?"}, {"owner": {"reputation": 4546, "user_id": 2781701, "user_type": "registered", "accept_rate": 80, "profile_image": "https://www.gravatar.com/avatar/5745f276004f077454f27cde70858a1d?s=128&d=identicon&r=PG", "display_name": "Rafael Almeida", "link": "https://stackoverflow.com/users/2781701/rafael-almeida"}, "edited": false, "score": 0, "creation_date": 1462966888, "post_id": 37161385, "comment_id": 61858430, "body": "Isn&#39;t the method called sendKeys? - edit ok it&#39;s not"}, {"owner": {"reputation": 785, "user_id": 47541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xr8Mp.jpg?s=128&g=1", "display_name": "karina", "link": "https://stackoverflow.com/users/47541/karina"}, "edited": false, "score": 0, "creation_date": 1462967044, "post_id": 37161385, "comment_id": 61858522, "body": "What object are you trying to send keys too? You are saying the selenium code was all working before?"}, {"owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "edited": false, "score": 0, "creation_date": 1462967249, "post_id": 37161385, "comment_id": 61858678, "body": "Added the send_keys method (btw not the same as the .net method)"}, {"owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "edited": false, "score": 0, "creation_date": 1462967591, "post_id": 37161385, "comment_id": 61858969, "body": "We&#39;re trying to enter a zip code in asn input field with <code>.set</code> but it isn&#39;t working so we&#39;re trying send_keys"}, {"owner": {"reputation": 785, "user_id": 47541, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/xr8Mp.jpg?s=128&g=1", "display_name": "karina", "link": "https://stackoverflow.com/users/47541/karina"}, "edited": false, "score": 0, "creation_date": 1462967788, "post_id": 37161385, "comment_id": 61859135, "body": "@MichaelDurrant What is the full error? And can you post a code snippet of the selenium code as well as the html"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1463039547, "post_id": 37161385, "comment_id": 61894597, "body": "When this kind of issue occurs for me, it&#39;s usually because the object on which it&#39;s calling the method is not of the class I expect, and is usually nil. Is it possible that the thing fetching the element is returning nil?"}], "answers": [{"tags": [], "owner": {"reputation": 201, "user_id": 3094135, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/aFaFo.jpg?s=128&g=1", "display_name": "Avinash Duggirala", "link": "https://stackoverflow.com/users/3094135/avinash-duggirala"}, "is_accepted": false, "score": 0, "last_activity_date": 1462972017, "creation_date": 1462972017, "answer_id": 37163640, "question_id": 37161385, "link": "https://stackoverflow.com/questions/37161385/how-to-get-around-undefined-method-send-keys/37163640#37163640", "title": "How to get around undefined method `send_keys&#39;", "body": "<p>If you are using capybara gem and if you are trying to fill the text field, then you have to use the below syntax.</p>\n\n<p>fill_in 'landing-zip-code', with: '123456'</p>\n\n<p>Find the reference <a href=\"http://www.rubydoc.info/github/jnicklas/capybara/Capybara%2FNode%2FActions%3Afill_in\" rel=\"nofollow\">here</a></p>\n"}], "owner": {"reputation": 84135, "user_id": 631619, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/b6f3159af5195eddff62a2dd4f9ad969?s=128&d=identicon&r=PG", "display_name": "Michael Durrant", "link": "https://stackoverflow.com/users/631619/michael-durrant"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 926, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1462972017, "creation_date": 1462966373, "last_edit_date": 1462968708, "question_id": 37161385, "link": "https://stackoverflow.com/questions/37161385/how-to-get-around-undefined-method-send-keys", "title": "How to get around undefined method `send_keys&#39;", "body": "<p>I'm getting <code>undefined method 'send_keys'</code> when running feature tests in our Ruby on Rails application we've been using over the past 3 years when trying to run our rspec-capybara tests</p>\n\n<p>We have the <code>gem 'selenium-webdriver', '~&gt; 2.47.1'</code> in our <code>Gemfile</code> and it shows in Gemfile.lock</p>\n\n<p>we suspect we're not using the right driver but given our <code>Gemfile</code>, not sure why not</p>\n\n<p>HTML we're targeting:</p>\n\n<pre><code>&lt;input class=\"zip-code-input\" id=\"landing-zip-code\" maxlength=\"5\" name=\"landing[zip_code]\"\npattern=\"[0-9]*\" placeholder=\"ZIP Code\" size=\"5\" tabindex=\"1\" title=\"Five-Digit ZIP Code\"  \nvalue=\"\" type=\"text\"&gt;\n</code></pre>\n\n<p>I see a lot of references to rack in the Gemfile.lock, i.e.</p>\n\n<pre><code>$ bundle | grep rack\nUsing rack 1.4.7\nUsing crack 0.3.2\nUsing rack-cache 1.5.1\nUsing rack-test 0.6.3\nUsing rack-ssl 1.3.4\nUsing rack-protection 1.5.3\nUsing rack_session_access 0.1.1\n</code></pre>\n\n<p>but I've been unable to find any way to change that</p>\n\n<p>send_keys is documented here:<br>\n<a href=\"https://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Element.html#send_keys-instance_method\" rel=\"nofollow\">https://selenium.googlecode.com/svn/trunk/docs/api/rb/Selenium/WebDriver/Element.html#send_keys-instance_method</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "comments": [{"owner": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "edited": false, "score": 0, "creation_date": 1462964474, "post_id": 37160603, "comment_id": 61856775, "body": "why dont u use has_many :companies_skill  ?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "reply_to_user": {"reputation": 952, "user_id": 6290370, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/NctP0.png?s=128&g=1", "display_name": "Boltz0r", "link": "https://stackoverflow.com/users/6290370/boltz0r"}, "edited": false, "score": 2, "creation_date": 1462964635, "post_id": 37160603, "comment_id": 61856890, "body": "I could, but linguistically it is nicer to see that a Company has_many:  company_skills, because it represents the skill<b>S</b> that <b>A</b> company has"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462964688, "post_id": 37160603, "comment_id": 61856924, "body": "Inflections is an option, indeed. Do you have any other &quot;skills&quot; model in your app, besides CompanySkill? Like EmployeeSkill, maybe?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 4, "creation_date": 1462964721, "post_id": 37160603, "comment_id": 61856945, "body": "inflections is probably the right solution, but I&#39;m surprised that it isn&#39;t using the expected inflection already.  If I create a AR class called <code>CompanySkill</code> and call <code>table_name</code> on it I get <code>&quot;company_skills&quot;</code>.  Where are you seeing the pluralisation?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1462964846, "post_id": 37160603, "comment_id": 61857031, "body": "It surprises me too, @MaxWilliams. This plural is not even a strange one."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462964856, "post_id": 37160603, "comment_id": 61857040, "body": "@EddeAlmeida yes, i have a StudentSkill model too, but that pluralized correctly, i don&#39;t know why I&#39;m having issues with this one."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "reply_to_user": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1462964915, "post_id": 37160603, "comment_id": 61857077, "body": "@MaxWilliams I&#39;m having the issue when generating the model through console, I edited the question to include it."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1462964920, "post_id": 37160603, "comment_id": 61857081, "body": "<i>&quot;When creating the model rails pluralizes it with companies_skill&quot;</i>. That is definitely not how Rails pluralizes &quot;company_skill&quot;. What do you mean &quot;when creating the model&quot;? From a generator?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 2, "creation_date": 1462965182, "post_id": 37160603, "comment_id": 61857260, "body": "What is your Rails Version? I just did <code>rails g model CompanySkill</code> and I got <code>company_skills</code>(which is correct)."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "edited": false, "score": 0, "creation_date": 1462965376, "post_id": 37160603, "comment_id": 61857365, "body": "My rails version is 4.2.4"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 1, "creation_date": 1462965510, "post_id": 37160603, "comment_id": 61857444, "body": "It might be a bug in 4.2.4. I&#39;m using 4.2.5 and I got the correct pluralization."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "reply_to_user": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1462965649, "post_id": 37160603, "comment_id": 61857529, "body": "@Pavan I&#39;m extremely new to ruby on rails and this is my high school thesis. Is changing rails version safe? Do I just change the number version in my gemfile?"}, {"owner": {"reputation": 30655, "user_id": 138557, "user_type": "registered", "accept_rate": 55, "profile_image": "https://www.gravatar.com/avatar/73c04e9ef9ca435c5b19a2e765ae6d20?s=128&d=identicon&r=PG", "display_name": "Max Williams", "link": "https://stackoverflow.com/users/138557/max-williams"}, "edited": false, "score": 0, "creation_date": 1462965984, "post_id": 37160603, "comment_id": 61857760, "body": "You could just skip the automatic model generation, and make the files manually, or let the automatic generation run and modify the files to refer to the desired name.  The generator is just there to save you a bit of time, it&#39;s not essential."}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 0, "creation_date": 1462966136, "post_id": 37160603, "comment_id": 61857869, "body": "If you are in the early stages of developing your app, then surely upgrading the rails version is beneficial(atleast you can avoid these strange bugs/behaviors)."}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 2, "creation_date": 1462966318, "post_id": 37160603, "comment_id": 61858012, "body": "@Fabio You showed us the output of <code>rails delete model ...</code>, where is your <code>rails generate model ...</code>?"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1462966575, "post_id": 37160603, "comment_id": 61858195, "body": "@meagar you&#39;re totally right, I&#39;m dumb, updated"}, {"owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "edited": false, "score": 0, "creation_date": 1462966651, "post_id": 37160603, "comment_id": 61858249, "body": "I think i solved the problem but i don&#39;t know if im doing it right. I posted an answer"}], "answers": [{"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1462964960, "post_id": 37160789, "comment_id": 61857108, "body": "This won&#39;t help, because Rails <i>already</i> inflects <code>company_skill</code> correctly. You&#39;re overriding the inflection with the <i>same inflection</i>."}, {"owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1462964997, "post_id": 37160789, "comment_id": 61857136, "body": "Hence my preferred solution of specifying the class name"}, {"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 0, "creation_date": 1462965051, "post_id": 37160789, "comment_id": 61857177, "body": "If Rails is already producing the correct pluralization, there is something else at play here. Neither specifying <code>class_name:</code> or adding a custom inflection is necessary <i>or correct</i>. They cannot fix the problem as the problem has been misrepresented."}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 1, "creation_date": 1462965063, "post_id": 37160789, "comment_id": 61857191, "body": "Besides, all these solutions do NOT explain why Rails is having such a strange behavior."}], "tags": [], "owner": {"reputation": 9735, "user_id": 625184, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d61e61fa593df732de1ccaad37ea4f59?s=128&d=identicon&r=PG", "display_name": "Jon", "link": "https://stackoverflow.com/users/625184/jon"}, "is_accepted": true, "score": 10, "last_activity_date": 1462965300, "last_edit_date": 1462965300, "creation_date": 1462964856, "answer_id": 37160789, "question_id": 37160603, "link": "https://stackoverflow.com/questions/37160603/wrong-rails-plural-when-creating-a-model/37160789#37160789", "title": "Wrong rails plural when creating a model", "body": "<p>You have two options.</p>\n\n<p>First of all you can override the inflector for this name. In <code>config/initializers/inflections.rb</code> add the following:</p>\n\n<pre><code>ActiveSupport::Inflector.inflections(:en) do |inflect|\n  inflect.irregular 'company_skill', 'company_skills'\nend\n</code></pre>\n\n<p>Alternatively, and probably the best solution, you can specify the class name on the association. In your model use something like this:</p>\n\n<pre><code>has_many :company_skills, class_name: 'CompanySkill'\n</code></pre>\n\n<p>Although, as other people have said, neither of these solutions should be required, since <code>company_skill</code> should be pluralised by Rails to <code>company_skills</code> by default.</p>\n"}, {"comments": [{"owner": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1462966840, "post_id": 37161425, "comment_id": 61858391, "body": "You are correctly working around the issue, but there is no reason you should have to. Rails does not behave the way you&#39;re claiming it does, there is some other undiagnosed problem here. Even if I install Rails 4.2.4, run <code>rails g model Company</code>, <code>rails g model Skill</code> and <code>rails g model CompanySkill</code>, Rails <i>still</i> does not produce the behavior you&#39;re experiencing."}, {"owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "reply_to_user": {"reputation": 208794, "user_id": 229044, "user_type": "moderator", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/591426cbbacd4025d920467bad356911?s=128&d=identicon&r=PG&f=1", "display_name": "meagar", "link": "https://stackoverflow.com/users/229044/meagar"}, "edited": false, "score": 1, "creation_date": 1462967359, "post_id": 37161425, "comment_id": 61858757, "body": "@meagar ........ i had an inflection <code>inflect.plural &quot;company&quot;, &quot;companies&quot;</code> .......... I&#39;m sorry, I don&#39;t know why. Should I remove the question?"}, {"owner": {"reputation": 32131, "user_id": 2346461, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/i3xAf.jpg?s=128&g=1", "display_name": "Pavan", "link": "https://stackoverflow.com/users/2346461/pavan"}, "edited": false, "score": 2, "creation_date": 1462967563, "post_id": 37161425, "comment_id": 61858952, "body": "@Fabio That explains the strange behavior!"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 1, "creation_date": 1463089251, "post_id": 37161425, "comment_id": 61928166, "body": "I almost raised this as an issue at rails/rails at GitHub! LOL It was something strange enough to be posted there."}], "tags": [], "owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "is_accepted": false, "score": 2, "last_activity_date": 1462966477, "creation_date": 1462966477, "answer_id": 37161425, "question_id": 37160603, "link": "https://stackoverflow.com/questions/37160603/wrong-rails-plural-when-creating-a-model/37161425#37161425", "title": "Wrong rails plural when creating a model", "body": "<p>Ok I think I fixed the problem.</p>\n\n<p>I first generated the model with:</p>\n\n<pre><code>rails generate model CompanySkill \n</code></pre>\n\n<p>which created the model wrongly pluralized.</p>\n\n<pre><code>      invoke  active_record\n      create    db/migrate/20160511111214_create_companies_skill.rb\n      create    app/models/company_skill.rb\n      invoke    test_unit\n      create      test/models/company_skill_test.rb\n      create      test/fixtures/companies_skill.yml\n</code></pre>\n\n<p>I then edited the migration changing the table name:</p>\n\n<pre><code>class CreateCompaniesSkill &lt; ActiveRecord::Migration\n  def change\n    create_table :company_skills do |t|  #was :companies_skill\n      t.integer :skill_id\n      t.integer :company_id\n      t.integer :level\n\n      t.timestamps null: false\n    end\n  end\nend\n</code></pre>\n\n<p>Then I finally used self.table_name in the model as suggested:</p>\n\n<pre><code>class CompanySkill &lt; ActiveRecord::Base\n  self.table_name = \"company_skills\"\n  belongs_to :company, inverse_of: :company_skills\n  belongs_to :skill\n  validates_presence_of :company\n  validates_presence_of :skill\nend\n</code></pre>\n\n<p>So now if from console i create a company_skill and then i do Company.first.skills I can get the skill</p>\n\n<pre><code>Company.first.skills\n  Company Load (0.1ms)  SELECT  \"companies\".* FROM \"companies\"  ORDER BY \"companies\".\"id\" ASC LIMIT 1\n  Skill Load (0.4ms)  SELECT \"skills\".* FROM \"skills\" INNER JOIN \"company_skills\" ON \"skills\".\"id\" = \"company_skills\".\"skill_id\" WHERE \"company_skills\".\"company_id\" = ?  [[\"company_id\", 1]]\n=&gt; #&lt;ActiveRecord::Associations::CollectionProxy [#&lt;Skill id: 1, name: \"Nihil dolorum maiores et ex temporibus est. Volupt...\", school_year: 2, created_at: \"02/05/2016 20:09:54\", updated_at: \"02/05/2016 20:09:54\"&gt;]&gt;\n</code></pre>\n\n<p>If I remove self.table_name, though, I get the error <code>ActiveRecord::StatementInvalid: Could not find table 'companies_skill'</code></p>\n\n<p>Am I doing this right?</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user4262528"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2775, "favorite_count": 1, "accepted_answer_id": 37160789, "answer_count": 2, "score": 4, "last_activity_date": 1481728927, "creation_date": 1462964351, "last_edit_date": 1462966553, "question_id": 37160603, "link": "https://stackoverflow.com/questions/37160603/wrong-rails-plural-when-creating-a-model", "title": "Wrong rails plural when creating a model", "body": "<p>I'm having problems with rails plurals.</p>\n\n<p>I have a model named <code>CompanySkill</code> (which represents the skills owned by a company). When creating the model rails pluralizes it with <code>companies_skill</code>  instead of <code>company_skills</code>, therefore when I need to set up the <code>has_many :company_skills</code> association rails doesn't use the model.</p>\n\n<p>What is the correct solution to this problem? What I thought about is to use inflections, but I don't know if it is the right solution and/or there are better solutions.</p>\n\n<p>I'm generating the model from the console:</p>\n\n<pre><code>rails generate model CompanySkill\n  invoke  active_record\n  create    db/migrate/20160511111048_create_companies_skill.rb\n  create    app/models/company_skill.rb\n  invoke    test_unit\n  create      test/models/company_skill_test.rb\n  create      test/fixtures/companies_skill.yml\n</code></pre>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 14684, "user_id": 446267, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7012ce54f5b02c8741ae73cec596b7fc?s=128&d=identicon&r=PG", "display_name": "\u041c\u0430\u043b\u044a \u0421\u043a\u0440\u044b\u043b\u0435\u0432\u044a", "link": "https://stackoverflow.com/users/446267/%d0%9c%d0%b0%d0%bb%d1%8a-%d0%a1%d0%ba%d1%80%d1%8b%d0%bb%d0%b5%d0%b2%d1%8a"}, "edited": false, "score": 1, "creation_date": 1462962781, "post_id": 37159970, "comment_id": 61855637, "body": "what is the question?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462963515, "post_id": 37159970, "comment_id": 61856096, "body": "What do you want to know? Could you be more specific?"}, {"owner": {"reputation": 2388, "user_id": 1752114, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/778377fd64568f1a23968400a7477306?s=128&d=identicon&r=PG", "display_name": "Arvind", "link": "https://stackoverflow.com/users/1752114/arvind"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462963734, "post_id": 37159970, "comment_id": 61856240, "body": "@EddeAlmeida deI was looking for a short approach to achieve same response."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462963822, "post_id": 37159970, "comment_id": 61856303, "body": "What&#39;s the purpose of <code>m</code>?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462964331, "post_id": 37159970, "comment_id": 61856680, "body": "I got it now. This answer from Santhoss is a very short approach."}], "answers": [{"tags": [], "owner": {"reputation": 24729, "user_id": 2564200, "user_type": "registered", "accept_rate": 83, "profile_image": "https://www.gravatar.com/avatar/a92dfcc9fcac72dabd4b1eefa0b5106e?s=128&d=identicon&r=PG&f=1", "display_name": "Santhosh", "link": "https://stackoverflow.com/users/2564200/santhosh"}, "is_accepted": true, "score": 6, "last_activity_date": 1462963663, "last_edit_date": 1462963663, "creation_date": 1462962853, "answer_id": 37160057, "question_id": 37159970, "link": "https://stackoverflow.com/questions/37159970/array-have-two-hashes-need-second-hash-key-value-pair/37160057#37160057", "title": "Array have two hashes need second hash key value pair", "body": "<p>Using <a href=\"http://ruby-doc.org/core-2.2.0/Array.html#method-i-map\" rel=\"nofollow\">Array#map</a></p>\n\n<pre><code>k.map {|h| h['child_category']}\n# =&gt; [{\"name\"=&gt;\"Acrylic Fiber\", \"id\"=&gt;3405}, {\"name\"=&gt;\"Aramid Fiber\", \"id\"=&gt;3406}]\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462963486, "post_id": 37160280, "comment_id": 61856074, "body": "Only if the hash contains no other values."}], "tags": [], "owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "is_accepted": false, "score": 3, "last_activity_date": 1462963511, "last_edit_date": 1462963511, "creation_date": 1462963425, "answer_id": 37160280, "question_id": 37159970, "link": "https://stackoverflow.com/questions/37159970/array-have-two-hashes-need-second-hash-key-value-pair/37160280#37160280", "title": "Array have two hashes need second hash key value pair", "body": "<p>You can use <a href=\"http://ruby-doc.org/core-2.2.3/Enumerable.html#method-i-flat_map\" rel=\"nofollow\"><code>Array#flat_map</code></a> and <a href=\"http://ruby-doc.org/core-2.1.5/Hash.html#method-i-values\" rel=\"nofollow\"><code>Hash#values</code></a>:</p>\n\n<pre><code>=&gt; hash = [{\"child_category\"=&gt;{\"name\"=&gt;\"Acrylic Fiber\", \"id\"=&gt;3405}}, {\"child_category\"=&gt;{\"name\"=&gt;\"Aramid Fiber\", \"id\"=&gt;3406}}] \n=&gt; hash.flat_map(&amp;:values)\n=&gt; [{\"name\"=&gt;\"Acrylic Fiber\", \"id\"=&gt;3405}, {\"name\"=&gt;\"Aramid Fiber\", \"id\"=&gt;3406}]\n</code></pre>\n"}], "owner": {"reputation": 2388, "user_id": 1752114, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/778377fd64568f1a23968400a7477306?s=128&d=identicon&r=PG", "display_name": "Arvind", "link": "https://stackoverflow.com/users/1752114/arvind"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 63, "favorite_count": 0, "accepted_answer_id": 37160057, "answer_count": 2, "score": -1, "last_activity_date": 1462963663, "creation_date": 1462962650, "last_edit_date": 1462963593, "question_id": 37159970, "link": "https://stackoverflow.com/questions/37159970/array-have-two-hashes-need-second-hash-key-value-pair", "title": "Array have two hashes need second hash key value pair", "body": "<p>I required short approach to finding same response which I am getting from this  </p>\n\n<pre><code>k = [\n  {\"child_category\"=&gt;{\"name\"=&gt;\"Acrylic Fiber\", \"id\"=&gt;3405}},\n  {\"child_category\"=&gt;{\"name\"=&gt;\"Aramid Fiber\", \"id\"=&gt;3406}}\n] \no = []\nm = k.select!{| i| o &lt;&lt; i[\"child_category\"]}\n\no\n#=&gt; [{\"name\"=&gt;\"Acrylic Fiber\", \"id\"=&gt;3405}, {\"name\"=&gt;\"Aramid Fiber\", \"id\"=&gt;3406}]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "forms", "devise", "updates"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 1, "creation_date": 1462964069, "post_id": 37159087, "comment_id": 61856489, "body": "You have a problem with a open single quote and I believe this is the issue. Notice that after the single quote in the word <b>don&#39;t</b> at the line of <b>:password</b> field the colors of the text change because from this point on everything is being taken as a string."}], "answers": [{"tags": [], "owner": {"reputation": 784, "user_id": 4800709, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/IG6C4.jpg?s=128&g=1", "display_name": "Navin", "link": "https://stackoverflow.com/users/4800709/navin"}, "is_accepted": true, "score": 2, "last_activity_date": 1462970526, "creation_date": 1462970526, "answer_id": 37163054, "question_id": 37159087, "link": "https://stackoverflow.com/questions/37159087/current-password-cant-be-blank-even-when-password-is-entered/37163054#37163054", "title": "Current password can&#39;t be blank even when password is entered", "body": "<p>I think current_password parameter is not permitted, please check your console logs. It will show unpermitted parameter.\nTry to permit it via devise registration controller or in your application controller in <strong>configure_permitted_parameters</strong> method. Hope it will work.</p>\n"}], "owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 760, "favorite_count": 0, "accepted_answer_id": 37163054, "answer_count": 1, "score": 0, "last_activity_date": 1462970526, "creation_date": 1462960603, "last_edit_date": 1462967206, "question_id": 37159087, "link": "https://stackoverflow.com/questions/37159087/current-password-cant-be-blank-even-when-password-is-entered", "title": "Current password can&#39;t be blank even when password is entered", "body": "<p>I'm trying to update user information, however, whenever I entered the current password and click update i got this message <code>Current password can't be blank</code>.</p>\n\n<p>I did an update to the devise edit form a bit, by adding the <code>&lt;nav&gt;</code> bar, but I don't think it is the issue. I haven't made any changes to the default devise controller.</p>\n\n<p>This is my edit form:</p>\n\n<pre><code>&lt;% if vendor_signed_in? %&gt;\n   &lt;nav class=\"navbar navbar-inverse\"&gt;\n   &lt;div class=\"container-fluid\"&gt;\n    &lt;!-- Brand and toggle get grouped for better mobile display --&gt;\n    &lt;div class=\"navbar-header\"&gt;\n      &lt;button type=\"button\" class=\"navbar-toggle collapsed\" data-toggle=\"collapse\" data-target=\"#bs-example-navbar-collapse-1\" aria-expanded=\"false\"&gt;\n        &lt;span class=\"sr-only\"&gt;Toggle navigation&lt;/span&gt;\n        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n        &lt;span class=\"icon-bar\"&gt;&lt;/span&gt;\n      &lt;/button&gt;\n      &lt;%= link_to \"Discount Now\", edit_vendor_registration_path, class: \"navbar-brand\", id: \"logo\" %&gt;\n    &lt;/div&gt;\n\n    &lt;!-- Collect the nav links, forms, and other content for toggling --&gt;\n    &lt;div class=\"collapse navbar-collapse\" id=\"bs-example-navbar-collapse-1\"&gt;\n      &lt;ul class=\"nav navbar-nav\"&gt;\n        &lt;li&gt; &lt;%= link_to \"Home\", edit_vendor_registration_path %&gt; &lt;/li&gt;\n      &lt;/ul&gt;\n\n      &lt;ul class=\"nav navbar-nav navbar-right\"&gt;\n      &lt;li&gt;Signed in as &lt;%= current_vendor.name %&gt;&lt;/li&gt;\n        &lt;li&gt;&lt;%= link_to \"log out\", destroy_vendor_session_path,:method =&gt; :delete, id: \"nav-login-button\", type: \"button\", class: \"btn btn-primary navbar-btn\"%&gt;&lt;/li&gt;\n      &lt;/ul&gt;\n    &lt;/div&gt;&lt;!-- /.navbar-collapse --&gt;\n  &lt;/div&gt;&lt;!-- /.container-fluid --&gt;\n&lt;/nav&gt;\n\n\n&lt;body&gt;\n&lt;h2&gt;Edit &lt;%= resource_name.to_s.humanize %&gt;&lt;/h2&gt;\n\n&lt;%= form_for(resource, as: resource_name, url: registration_path(resource_name), html: { method: :put }) do |f| %&gt;\n  &lt;%= devise_error_messages! %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :email %&gt;&lt;br /&gt;\n    &lt;%= f.email_field :email, autofocus: true %&gt;\n  &lt;/div&gt;\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :address %&gt;&lt;br /&gt;\n    &lt;%= f.text_field :address, autofocus: true %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :discount_information %&gt;&lt;br /&gt;\n    &lt;%= f.text_area :discount_info, autofocus: true %&gt;\n  &lt;/div&gt;\n  &lt;% if devise_mapping.confirmable? &amp;&amp; resource.pending_reconfirmation? %&gt;\n    &lt;div&gt;Currently waiting confirmation for: &lt;%= resource.unconfirmed_email %&gt;&lt;/div&gt;\n  &lt;% end %&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password %&gt; &lt;i&gt;(leave blank if you don't want to change it)&lt;/i&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :password_confirmation %&gt;&lt;br /&gt;\n    &lt;%= f.password_field :password_confirmation, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"field\"&gt;\n    &lt;%= f.label :current_password %&gt; &lt;i&gt;(we need your current password to confirm your changes)&lt;/i&gt;&lt;br /&gt;\n    &lt;%= f.password_field :current_password, autocomplete: \"off\" %&gt;\n  &lt;/div&gt;\n\n  &lt;div class=\"actions\"&gt;\n    &lt;%= f.submit \"Update\" %&gt;\n  &lt;/div&gt;\n&lt;% end %&gt;\n\n&lt;h3&gt;Cancel my account&lt;/h3&gt;\n\n&lt;p&gt;Unhappy? &lt;%= button_to \"Cancel my account\", registration_path(resource_name), data: { confirm: \"Are you sure?\" }, method: :delete %&gt;&lt;/p&gt;\n\n&lt;%= link_to \"Back\", :back %&gt;\n&lt;/body&gt;\n&lt;%else %&gt;\n &lt;% link_to \"sign up\", new_vendor_session_path%&gt;\n&lt;% end %&gt;\n</code></pre>\n"}, {"tags": ["ruby", "metaprogramming"], "answers": [{"tags": [], "owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "is_accepted": true, "score": 4, "last_activity_date": 1462963369, "last_edit_date": 1462963369, "creation_date": 1462960495, "answer_id": 37159043, "question_id": 37158874, "link": "https://stackoverflow.com/questions/37158874/dynamic-lazy-instance-variable-memoization/37159043#37159043", "title": "Dynamic lazy instance variable memoization", "body": "<blockquote>\n  <p>to lazy evaluate instance variables</p>\n</blockquote>\n\n<p>This is not \"lazy evaluation\", this is \"memoization\".</p>\n\n<blockquote>\n  <p>is there more elegant way to write this?</p>\n</blockquote>\n\n<p>This reads more like the original expression (and is actually equivalent to it in behaviour):</p>\n\n<pre><code>instance_variable_get(:@foo) || instance_variable_set(:@foo, 'bar')\n</code></pre>\n"}], "owner": {"reputation": 12629, "user_id": 4739257, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/MdhEs.jpg?s=128&g=1", "display_name": "Ilya", "link": "https://stackoverflow.com/users/4739257/ilya"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 530, "favorite_count": 0, "accepted_answer_id": 37159043, "answer_count": 1, "score": -1, "last_activity_date": 1462963369, "creation_date": 1462960060, "last_edit_date": 1462961503, "question_id": 37158874, "link": "https://stackoverflow.com/questions/37158874/dynamic-lazy-instance-variable-memoization", "title": "Dynamic lazy instance variable memoization", "body": "<p>In Ruby we have 2 methods to get/set instance variables - <code>instance_variable_get</code> and <code>instance_variable_set</code>. Also in some cases it is a good practice to memoize instance variables:</p>\n\n<pre><code>@foo ||= 'bar'\n</code></pre>\n\n<p>So, I attempt to unite this 2 features since I need dynamic instance variables names:</p>\n\n<pre><code>iv = :@foo\ninstance_variable_set(iv, 'bar') unless instance_variable_get(iv)\n</code></pre>\n\n<p>I am not sure, but is there more elegant way to write this?</p>\n"}, {"tags": ["ruby", "json", "api", "http", "response"], "comments": [{"owner": {"reputation": 38307, "user_id": 2057388, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ceef8c04f66cd0e2bd360ef6abc14a81?s=128&d=identicon&r=PG", "display_name": "\u0417\u0435\u043b\u0451\u043d\u044b\u0439", "link": "https://stackoverflow.com/users/2057388/%d0%97%d0%b5%d0%bb%d1%91%d0%bd%d1%8b%d0%b9"}, "edited": false, "score": 0, "creation_date": 1462960019, "post_id": 37158630, "comment_id": 61853629, "body": "This is the json response."}, {"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462960180, "post_id": 37158630, "comment_id": 61853752, "body": "That looks like a valid JSON string. To parse it, use <code>JSON.parse(...)</code>"}, {"owner": {"reputation": 3580, "user_id": 1680728, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/844cd73e8700d810d7cc207cba7da3bd?s=128&d=identicon&r=PG&f=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/1680728/felix"}, "reply_to_user": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462964059, "post_id": 37158630, "comment_id": 61856486, "body": "Then please &quot;close&quot; the question (write an answer and accept - and be nice to @Stefan)."}], "answers": [{"tags": [], "owner": {"reputation": 2315, "user_id": 5129663, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-z8P0ivhj4wM/AAAAAAAAAAI/AAAAAAAAAAo/7JsXqgRUH8w/photo.jpg?sz=128", "display_name": "Amol Udage", "link": "https://stackoverflow.com/users/5129663/amol-udage"}, "is_accepted": false, "score": 0, "last_activity_date": 1462964488, "creation_date": 1462964488, "answer_id": 37160659, "question_id": 37158630, "link": "https://stackoverflow.com/questions/37158630/how-to-get-json-response-using-ruby/37160659#37160659", "title": "How to get JSON response using ruby", "body": "<p>This response is looks like JSON you only need to parse that JSON using <code>JSON.parse(string_here)</code></p>\n\n<p>Thanks.</p>\n"}], "owner": {"reputation": 61, "user_id": 4673614, "user_type": "registered", "accept_rate": 0, "profile_image": "https://www.gravatar.com/avatar/2fe6465d421c7f3c762289b44551687d?s=128&d=identicon&r=PG&f=1", "display_name": "sakthivel", "link": "https://stackoverflow.com/users/4673614/sakthivel"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 739, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462964488, "creation_date": 1462959485, "last_edit_date": 1462962905, "question_id": 37158630, "link": "https://stackoverflow.com/questions/37158630/how-to-get-json-response-using-ruby", "title": "How to get JSON response using ruby", "body": "<p>I am trying to get a JSON response through API using http.\nhere is my code snipet</p>\n\n<pre><code>http = Net::HTTP.new(uri.host, uri.port)\n      http.open_timeout = 300\n      http.read_timeout = 300\n      if uri.scheme == 'https'\n        http.use_ssl = true\n        http.verify_mode = ::OpenSSL::SSL::VERIFY_NONE\n      end\nhttp.request(Net::HTTP::Get.new(uri.request_uri, initheader = {'header' =&gt; 'headervalue'})).body\n</code></pre>\n\n<p>But am getting response like </p>\n\n<pre><code>[{\\\"Id\\\":\\\"986\\\",\\\"DataContentType\\\":2,\\\"DataContent\\\":\\\"content type\\\",\\\"lang\\\":\\\"ENGLISH\\\",\\\"Name\\\":\\\"Name\\\"}]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "validation", "ruby-on-rails-4", "model-view-controller"], "comments": [{"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1462958995, "post_id": 37158325, "comment_id": 61852917, "body": "Can you show some error messages and leave out code that is not relevant to the question? (like controller show/index/edit/update/destroy).  About the authenticity token: is it present in the HTML when you submit the form. Is it submitted to the controller?"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1462961309, "post_id": 37158325, "comment_id": 61854581, "body": "How do I show the error codes on here? I&#39;ve fixed the error by deleting the event in the console but know it will happen again. The error about the authenticity token related to the create action in the events controller. I&#39;ll update my answer re your comments about relevant code."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1462961599, "post_id": 37158325, "comment_id": 61854793, "body": "The first error I get is this -"}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1462961693, "post_id": 37158325, "comment_id": 61854859, "body": "ArgumentError - in Events#create, wrong number of arguments (given 0, expected 2) and it highlights this line in my code for the form partial -     &lt;% @event.errors.full_message.each do |message| %&gt;"}], "answers": [{"comments": [{"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1463048123, "post_id": 37169379, "comment_id": 61900815, "body": "Many thanks - I spotted this also (see my comments above) but many thanks for the detailed answer which I&#39;ve marked correct. Feel free to answer any of my other questions in such detail, I&#39;m learning all the time:)"}, {"owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "reply_to_user": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1463068316, "post_id": 37169379, "comment_id": 61916269, "body": "@Mike.Whitehead I highly recommend posting each problem and questions in its own stackoverflow question. This makes it easier for us to answer and is overall better for the community should someone be searching for a solution to the same problem(s)."}, {"owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "edited": false, "score": 0, "creation_date": 1463139474, "post_id": 37169379, "comment_id": 61949081, "body": "That&#39;s what I&#39;ve done. is there a way on here to ask specific users the question your asking? There&#39;s a couple fo questions I&#39;ve put on here where I&#39;ve had no response and I&#39;m still trying to figure out the solution."}], "tags": [], "owner": {"reputation": 12542, "user_id": 156746, "user_type": "registered", "accept_rate": 50, "profile_image": "https://i.stack.imgur.com/8TsPx.jpg?s=128&g=1", "display_name": "DiegoSalazar", "link": "https://stackoverflow.com/users/156746/diegosalazar"}, "is_accepted": true, "score": 1, "last_activity_date": 1462987252, "creation_date": 1462987252, "answer_id": 37169379, "question_id": 37158325, "link": "https://stackoverflow.com/questions/37158325/rails-error-app-not-picking-up-validations-and-or-error-prevention-code-block/37169379#37169379", "title": "Rails error - app not picking up validations and/or error prevention code block", "body": "<p>Here in your view is your problem:</p>\n\n<pre><code>&lt;%= simple_form_for(@event) do |f| %&gt;\n&lt;% if @event.errors.any? %&gt;\n    &lt;h2&gt;&lt;%= pluralize(@event.errors.count, \"error\") %&gt; prevented this Event from saving:&lt;/h2&gt;\n    &lt;ul&gt;\n        &lt;% @event.errors.full_message.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n    &lt;/ul&gt;\n&lt;% end %&gt;\n</code></pre>\n\n<p>specifically, this part:</p>\n\n<pre><code>&lt;% @event.errors.full_message.each do |message| %&gt;\n</code></pre>\n\n<p>Zooming in:</p>\n\n<pre><code>@event.errors.full_message\n</code></pre>\n\n<p>You forgot an \"s\" at the end of the method name, it should be:</p>\n\n<pre><code>@event.errors.full_messages\n</code></pre>\n\n<p>The <code>full_message</code> method takes 2 arguments and is used to return a single full error message for a given attribute. This typo was giving you the error.</p>\n\n<p><a href=\"http://api.rubyonrails.org/classes/ActiveModel/Errors.html#method-i-full_message\" rel=\"nofollow\">http://api.rubyonrails.org/classes/ActiveModel/Errors.html#method-i-full_message</a></p>\n"}], "owner": {"reputation": 738, "user_id": 3521315, "user_type": "registered", "accept_rate": 42, "profile_image": "https://i.stack.imgur.com/w55jb.jpg?s=128&g=1", "display_name": "Mike.Whitehead", "link": "https://stackoverflow.com/users/3521315/mike-whitehead"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 46, "favorite_count": 0, "accepted_answer_id": 37169379, "answer_count": 1, "score": 0, "last_activity_date": 1462987252, "creation_date": 1462958725, "last_edit_date": 1462961410, "question_id": 37158325, "link": "https://stackoverflow.com/questions/37158325/rails-error-app-not-picking-up-validations-and-or-error-prevention-code-block", "title": "Rails error - app not picking up validations and/or error prevention code block", "body": "<p>I'm building an events app which uses simple form in views for the user to create an event. I'm trying to implement validations so that certain details must be present. When I've tested this - by deliberately missing out sections of the form - I've run into a whole host of issues/bugs/errors which get thrown up.The only way to reset back to normal is for me to delete the 'toxic' event via the console.</p>\n\n<p>It's as though the validations and the error code block in views are having no effect, the event is still being created and assigned an id and the code is just breaking, creating a bug, when I deliberately omit sections of the form.</p>\n\n<p>No idea why this would be happening. This is my relevant code -</p>\n\n<p>EventsController.rb</p>\n\n<pre><code>class EventsController &lt; ApplicationController\nbefore_action :find_event, only: [:show, :edit, :update, :destroy,]\n# the before_actions will take care of finding the correct event for us\n# this ties in with the private method below\nbefore_action :authenticate_user!, except: [:index, :show]\n# this ensures only users who are signed in can alter an event\n\n\n\ndef new\n    @event = current_user.events.build\n    # this now builds out from a user once devise gem is added\n    # after initially having an argument of Event.new\n    # this assigns events to users\nend\n\ndef create\n    @event = current_user.events.build(event_params)\n    # as above this now assigns events to users\n    # rather than Event.new\n\n    if @event.save\n        redirect_to @event, notice: \"Congratulations, you have successfully created a new event.\"\n    else\n        render 'new'\n    end\nend\n\nprivate\n\ndef event_params\n    params.require(:event).permit(:title, :location, :date, :time, :description, :number_of_spaces, :is_free, :price, :organised_by, :url, :image, :category_id)\n    # category_id added at the end to ensure this is assigned to each new event created\nend\n\ndef find_event\n    @event = Event.find(params[:id])\nend\n\n\n\n\n\n\n\nend\n</code></pre>\n\n<p>This is my form partial which has an error code block - this initially threw up an error stating that 0 arguments were being passed when expecting 2. </p>\n\n<p>_form.events.html.erb </p>\n\n<pre><code>&lt;%= simple_form_for(@event) do |f| %&gt;\n&lt;% if @event.errors.any? %&gt;\n    &lt;h2&gt;&lt;%= pluralize(@event.errors.count, \"error\") %&gt; prevented this Event from saving:&lt;/h2&gt;\n    &lt;ul&gt;\n        &lt;% @event.errors.full_message.each do |message| %&gt;\n        &lt;li&gt;&lt;%= message %&gt;&lt;/li&gt;\n        &lt;% end %&gt;\n    &lt;/ul&gt;\n&lt;% end %&gt;\n\n&lt;%= f.collection_select :category_id, Category.all, :id, :name, {prompt: \"Choose a category\"} %&gt;\n&lt;!-- The above code loop assigns a category_id to each event --&gt;\n\n&lt;%= f.input :image, as: :file, label: 'Image' %&gt;\n&lt;%= f.input :title, label: 'Event Title' %&gt;\n&lt;label&gt;Location&lt;/label&gt;&lt;%= f.text_field :location, id: 'geocomplete' %&gt;&lt;/br&gt;\n&lt;label&gt;Date&lt;/label&gt;&lt;%= f.text_field :date, label: 'Date', id: 'datepicker' %&gt;\n&lt;%= f.input :time, label: 'Time' %&gt;\n&lt;%= f.input :description, label: 'Description' %&gt;\n&lt;label&gt;Number of spaces available&lt;/label&gt;&lt;%= f.text_field :number_of_spaces, label: 'Number of spaces' %&gt;\n&lt;%= f.input :is_free, label: 'Tick box if Event is free of charge' %&gt;\n&lt;!--f.input :currency, :collection =&gt; [['\u00a3GBP - British Pounds',1],['$USD - US Dollars',2],['\u20acEUR - Euros',3]] --&gt;\n&lt;%= f.input :price, label: 'Cost per person (leave blank if free of charge)' %&gt;\n&lt;%= f.input :organised_by, label: 'Organised by' %&gt;\n&lt;%= f.input :url, label: \"Link to Organiser site\" %&gt;\n\n&lt;%= f.button :submit, label: 'Submit' %&gt;\n\n&lt;% end %&gt;   \n</code></pre>\n\n<p>Event model with validations. The errors occur whether validations are included or not (I've taken them out and tried with same results).</p>\n\n<p>Event.rb</p>\n\n<pre><code>class Event &lt; ActiveRecord::Base\n\nbelongs_to :category\nbelongs_to :user\nhas_many :bookings\nhas_many :comments\n\n\nhas_attached_file :image, styles: { medium: \"300x300&gt;\" }\nvalidates_attachment_content_type :image, :content_type =&gt; /\\Aimage\\/.*\\Z/\n\nvalidates_associated :category\nvalidates :title, :description, :location, :date, :time, :number_of_spaces, :price_pennies, presence: true\n\n\nmonetize :price_pennies\n# required for money-rails gem to function\n\nend\n</code></pre>\n\n<p>The error messages seem to bounce all over the place from 'ActionController::InvalidAuthenticityToken' to 'undefined method' on a line of code in my show page -</p>\n\n<pre><code>&lt;p&gt;&lt;%= @event.date.strftime('%A, %d %b %Y') %&gt;&lt;/p&gt;\n</code></pre>\n\n<p>when I attempt to leave the date field empty.</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "rubygems"], "answers": [{"comments": [{"owner": {"reputation": 51, "user_id": 6257847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad08fae4a5edd536fc73252143b916c2?s=128&d=identicon&r=PG&f=1", "display_name": "dmitriy_strukov", "link": "https://stackoverflow.com/users/6257847/dmitriy-strukov"}, "edited": false, "score": 0, "creation_date": 1462960921, "post_id": 37158885, "comment_id": 61854280, "body": "Ok i did it. It raise new error  /home/.rvm/gems/ruby-2.3.0/gems/puma-3.4.0/lib/puma/launcher&zwnj;&#8203;.rb:76:in `chdir&#39;: No such file or directory @ dir_chdir - /home/deployer/carespotter/current (Errno::ENOENT)"}, {"owner": {"reputation": 196, "user_id": 744117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyrM3.png?s=128&g=1", "display_name": "rgo", "link": "https://stackoverflow.com/users/744117/rgo"}, "reply_to_user": {"reputation": 51, "user_id": 6257847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad08fae4a5edd536fc73252143b916c2?s=128&d=identicon&r=PG&f=1", "display_name": "dmitriy_strukov", "link": "https://stackoverflow.com/users/6257847/dmitriy-strukov"}, "edited": false, "score": 0, "creation_date": 1462962650, "post_id": 37158885, "comment_id": 61855546, "body": "@dmitriy_strukov I guess you updated Puma too.  Seems to be a closed issue related to it <a href=\"https://github.com/puma/puma/issues/904\" rel=\"nofollow noreferrer\">github.com/puma/puma/issues/904</a>"}], "tags": [], "owner": {"reputation": 196, "user_id": 744117, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/ZyrM3.png?s=128&g=1", "display_name": "rgo", "link": "https://stackoverflow.com/users/744117/rgo"}, "is_accepted": true, "score": 0, "last_activity_date": 1462960094, "creation_date": 1462960094, "answer_id": 37158885, "question_id": 37158070, "link": "https://stackoverflow.com/questions/37158070/administrate-gem-raise-error/37158885#37158885", "title": "Administrate gem raise error", "body": "<p>Are you using administrate 0.1.5 for anything? Its github page recommend to install \"~> 0.2.0\"</p>\n\n<p>Maybe your version of sass gems deprecated something and it is not reflected in your administrate version dependencies.</p>\n\n<p>I recommend you to update to latest version as they say.</p>\n"}], "owner": {"reputation": 51, "user_id": 6257847, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/ad08fae4a5edd536fc73252143b916c2?s=128&d=identicon&r=PG&f=1", "display_name": "dmitriy_strukov", "link": "https://stackoverflow.com/users/6257847/dmitriy-strukov"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 133, "favorite_count": 0, "accepted_answer_id": 37158885, "answer_count": 1, "score": -1, "last_activity_date": 1462960094, "creation_date": 1462958076, "last_edit_date": 1462959674, "question_id": 37158070, "link": "https://stackoverflow.com/questions/37158070/administrate-gem-raise-error", "title": "Administrate gem raise error", "body": "<p>I installed administrate gem. Opened /admin and it raise this error:</p>\n\n<blockquote>\n  <p>Invalid CSS after \"  alert\": expected \")\", was \": $light-yellow,\" (in .rvm/gems/ruby-2.3.0/gems/administrate-0.1.5/app/assets/stylesheets/administrate/application.scss:45)</p>\n</blockquote>\n\n<pre><code>ruby '2.3.0'\ngem 'rails', '~&gt; 4.2.0'\n\ngem 'administrate', '= 0.1.5'\ngem 'sass-rails',   '~&gt; 5.0'\ngem 'sass'\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ember.js"], "comments": [{"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1462958693, "post_id": 37157602, "comment_id": 61852715, "body": "Do you have <code>uid</code> column in <code>Label model</code>. I&#39;m sure it would be id instead."}, {"owner": {"reputation": 1258, "user_id": 6208659, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/7qYMh.jpg?s=128&g=1", "display_name": "j-printemps", "link": "https://stackoverflow.com/users/6208659/j-printemps"}, "reply_to_user": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1462959479, "post_id": 37157602, "comment_id": 61853237, "body": "The thing is I&#39;m trying to filter by uid (user id) sent by my frontend. I don&#39;t have user table anymore. My users are in a different database."}, {"owner": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1462960072, "post_id": 37157602, "comment_id": 61853664, "body": "I believe you could not execute above query in rails console as well ..."}, {"owner": {"reputation": 1258, "user_id": 6208659, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/7qYMh.jpg?s=128&g=1", "display_name": "j-printemps", "link": "https://stackoverflow.com/users/6208659/j-printemps"}, "reply_to_user": {"reputation": 4875, "user_id": 3098330, "user_type": "registered", "accept_rate": 93, "profile_image": "https://i.stack.imgur.com/7GLfA.jpg?s=128&g=1", "display_name": "Gupta", "link": "https://stackoverflow.com/users/3098330/gupta"}, "edited": false, "score": 0, "creation_date": 1462961148, "post_id": 37157602, "comment_id": 61854455, "body": "Isn&#39;t it possible to select records by attributes values ?"}], "answers": [{"tags": [], "owner": {"reputation": 1258, "user_id": 6208659, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/7qYMh.jpg?s=128&g=1", "display_name": "j-printemps", "link": "https://stackoverflow.com/users/6208659/j-printemps"}, "is_accepted": true, "score": 0, "last_activity_date": 1462962281, "creation_date": 1462962281, "answer_id": 37159816, "question_id": 37157602, "link": "https://stackoverflow.com/questions/37157602/find-filtered-record-with-ember-js-and-rails/37159816#37159816", "title": "Find filtered record with Ember.js and Rails", "body": "<p>Can't explain why it didn't work, but here my solution :</p>\n\n<pre><code>  def index\n    @label = Label\n\n    if params[:filter].present?\n      @label = @label.where(\"uid = ?\", params[:filter][:uid])\n    end\n\n    @label = @label.all\n\n    render json: @label\n  end\n</code></pre>\n"}], "owner": {"reputation": 1258, "user_id": 6208659, "user_type": "registered", "accept_rate": 25, "profile_image": "https://i.stack.imgur.com/7qYMh.jpg?s=128&g=1", "display_name": "j-printemps", "link": "https://stackoverflow.com/users/6208659/j-printemps"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 47, "favorite_count": 0, "accepted_answer_id": 37159816, "answer_count": 1, "score": 0, "last_activity_date": 1462962281, "creation_date": 1462956897, "last_edit_date": 1462959335, "question_id": 37157602, "link": "https://stackoverflow.com/questions/37157602/find-filtered-record-with-ember-js-and-rails", "title": "Find filtered record with Ember.js and Rails", "body": "<p>I'm trying to add a \"where\" filter in my Rails backend doing so :</p>\n\n<pre><code>  def index\n    @label = Label\n    if params[:filter].present?\n      @label =  @label.where(uid: params[:filter])\n    end\n\n    @label = @label.all\n\n    render json: @label\n  end\n</code></pre>\n\n<p>The problem is that I get this SQL request:</p>\n\n<pre><code>  Label Load (1.0ms)  SELECT \"labels\".* FROM \"labels\" WHERE \"uid\".\"uid\" = 'VALUE'\n</code></pre>\n\n<p>And <strong>\"uid\".\"uid\"</strong> throws an error</p>\n\n<pre><code>ActiveRecord::StatementInvalid (SQLite3::SQLException: no such column: uid.uid: SELECT \"labels\".* FROM \"labels\" WHERE \"uid\".\"uid\" = 'VALUE'):\n</code></pre>\n\n<p>app/controllers/labels_controller.rb:13:in `index'</p>\n\n<p><strong>EDIT</strong></p>\n\n<p>Here my label schema:</p>\n\n<pre><code>  create_table \"labels\", force: :cascade do |t|\n    t.string   \"name\"\n    t.string   \"uid\",        null: false\n    t.datetime \"created_at\", null: false\n    t.datetime \"updated_at\", null: false\n  end\n</code></pre>\n\n<p>Do you know why it doens't use <strong>\"labels\".\"uid\"</strong> ?</p>\n"}, {"tags": ["ruby", "rubygems"], "comments": [{"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462956848, "post_id": 37157388, "comment_id": 61851427, "body": "Is there a <code>~&#47;.gemrc</code> file on your prod host?  If so, please post it."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462958842, "post_id": 37157388, "comment_id": 61852820, "body": "Or possibly it would be <code>&#47;etc&#47;gemrc</code>."}, {"owner": {"reputation": 539, "user_id": 1082991, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/765fd6b6e1888a93a6f80144652901f0?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1082991/ross"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462960076, "post_id": 37157388, "comment_id": 61853670, "body": "see addendum above re .gemrc"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462960147, "post_id": 37157388, "comment_id": 61853723, "body": "Are there any differences between the .gemrc in the 2 hosts, especially the <code>sources</code>?"}, {"owner": {"reputation": 539, "user_id": 1082991, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/765fd6b6e1888a93a6f80144652901f0?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1082991/ross"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462960535, "post_id": 37157388, "comment_id": 61854002, "body": "the differences are: sources on the dev system .gemrc has a trailing slash on the private gem server url and it does not have a &#39;--no-ri&#39; option"}, {"owner": {"reputation": 539, "user_id": 1082991, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/765fd6b6e1888a93a6f80144652901f0?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1082991/ross"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462961092, "post_id": 37157388, "comment_id": 61854411, "body": "I&#39;ve added a <code>gem env</code> output as <b>Addendum 2</b> above from both systems"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462961424, "post_id": 37157388, "comment_id": 61854667, "body": "The --no-ri option should make gem installing faster, so that&#39;s not a problem.  I don&#39;t think the trailing slash does anything but you could try removing it on the dev system just to test it.  But I think it&#39;s something else.  Is the CPU heavily loaded on the prod server?  Or is memory limited to the point that swapping is happening?"}, {"owner": {"reputation": 539, "user_id": 1082991, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/765fd6b6e1888a93a6f80144652901f0?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1082991/ross"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462963926, "post_id": 37157388, "comment_id": 61856388, "body": "See addendum 3 for more info"}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1462967318, "post_id": 37157388, "comment_id": 61858728, "body": "Is it just this Ruby process that&#39;s slow on that host?  I&#39;ve seen dramatic slowdowns on Linux hosts when ipv6 is enabled.  Is it a shared host, by any chance?  I&#39;ve been having abysmal performance lately on my Bluehost shared host."}, {"owner": {"reputation": 539, "user_id": 1082991, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/765fd6b6e1888a93a6f80144652901f0?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1082991/ross"}, "reply_to_user": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "edited": false, "score": 0, "creation_date": 1463023187, "post_id": 37157388, "comment_id": 61887773, "body": "Its on a DigitalOcean VPS (droplet) &amp; ipv6 is not enabled. It doesn&#39;t look like the issue extends to other ruby processes which are all rails based."}], "answers": [{"tags": [], "owner": {"reputation": 539, "user_id": 1082991, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/765fd6b6e1888a93a6f80144652901f0?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1082991/ross"}, "is_accepted": true, "score": 0, "last_activity_date": 1463339591, "last_edit_date": 1463339591, "creation_date": 1463190632, "answer_id": 37221628, "question_id": 37157388, "link": "https://stackoverflow.com/questions/37157388/gem-execution-is-inordinately-slow/37221628#37221628", "title": "gem execution is inordinately slow", "body": "<p>A solution was found by switching to another vps with increased memory from 4Gb to 16Gb (even though swap space was unused in both cases).\nBoth systems built with the same Ansible playbook (same versions of all components).\nPerformance issues evaporated and not entirely sure why. But that'll do.</p>\n"}], "owner": {"reputation": 539, "user_id": 1082991, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/765fd6b6e1888a93a6f80144652901f0?s=128&d=identicon&r=PG", "display_name": "Ross", "link": "https://stackoverflow.com/users/1082991/ross"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 69, "favorite_count": 0, "accepted_answer_id": 37221628, "answer_count": 1, "score": 0, "last_activity_date": 1463339591, "creation_date": 1462956350, "last_edit_date": 1463190385, "question_id": 37157388, "link": "https://stackoverflow.com/questions/37157388/gem-execution-is-inordinately-slow", "title": "gem execution is inordinately slow", "body": "<p>I have a custom CLI gem ('pm') built using thor which runs in acceptable time on the dev system but is extraordinarily slow on the production system and I don't understand why.</p>\n\n<p>The specs, results of time &amp; profiling on both systems are:</p>\n\n<pre><code>development system          production system\n------------------          -----------------\nreal    0m6.859s            real    0m53.405s\nuser    0m6.464s            user    0m52.334s\nsys     0m0.364s            sys     0m0.840s\n\nprod system: Linux grumples 3.13.0-37-generic #64-Ubuntu SMP Mon Sep 22 21:28:38 UTC 2014 x86_64 x86_64 x86_64 GNU/Linux\n\ndev system: Linux cb-8 4.2.0-36-generic #41-Ubuntu SMP Mon Apr 18 15:49:10 UTC 2016 x86_64 x86_64 x86_64 GNU/Linux\n\nMRI ruby 2.2.2\n\nProfiling produces:\n\ndev system\n\n   %   cumulative   self              self     total\n time   seconds   seconds    calls  ms/call  ms/call  name\n  9.82     0.55      0.55     1481     0.37    15.83  Kernel#require\n  4.46     0.80      0.25     5376     0.05     0.12  Erubis::TinyEruby#convert\n  4.11     1.03      0.23     8682     0.03     0.07  Neo4j::Shared::TypecastedAttributes#_attribute_typecaster\n  3.39     1.22      0.19     7831     0.02     0.02  Regexp#match\n  3.39     1.41      0.19    20519     0.01     0.03  Domainatrix::DomainParser#read_dat_file\n  3.04     1.58      0.17    15480     0.01     0.03  MIME::Type.simplify_matchdata\n  3.04     1.75      0.17     6386     0.03     0.24  Array#map\n  1.96     1.86      0.11     8682     0.01     0.11  Neo4j::Shared::TypecastedAttributes#attribute\n  1.96     1.97      0.11    14529     0.01     0.40  Array#each\n  1.96     2.08      0.11    78487     0.00     0.00  Hash#[]\n  1.79     2.18      0.10     9874     0.01     0.24  Neo4j::Shared::Attributes#attributes_map\n  1.79     2.28      0.10      154     0.65     1.30  Hash#each\n\n\nprodn system\n\n  %   cumulative   self              self     total\n time   seconds   seconds    calls  ms/call  ms/call  name\n 40.63     1.93      1.93    90324     0.02     0.08  Gem::Dependency#matching_specs\n 15.16     2.65      0.72     5122     0.14     4.15  Array#each\n  7.79     3.02      0.37     3252     0.11     0.20  Gem::Version#&lt;=&gt;\n  4.21     3.22      0.20    10590     0.02     0.04  Gem::Specification#runtime_dependencies\n  3.58     3.39      0.17    87738     0.00     0.00  String#===\n  2.53     3.51      0.12    87942     0.00     0.00  Gem::StubSpecification#name\n  2.53     3.63      0.12     3966     0.03     0.06  Gem::Version#bump\n  2.32     3.74      0.11     4304     0.03     0.03  Kernel#initialize_dup\n  1.68     3.82      0.08     1583     0.05     0.54  nil#\n  1.47     3.89      0.07     2610     0.03     0.07  Array#any?\n  1.26     3.95      0.06     3252     0.02     0.06  Gem::Version#version\n  1.05     4.00      0.05    17117     0.00     0.00  Module#===\n  1.05     4.05      0.05     2023     0.02     0.08  Gem::BasicSpecification#contains_requirable_file?\n</code></pre>\n\n<p>40% of its time in <code>Gem::Dependency#matching_specs</code> seems like a lot of something going on that must be optimisable.</p>\n\n<p>I would appreciate any guidance on how to further investigate the reason the production version is so slow.</p>\n\n<p>Regards</p>\n\n<p><strong>Addendum 1</strong></p>\n\n<p>The .gemrc file is identical on both prodn &amp; dev systems</p>\n\n<pre><code>~/.gemrc\n\n---\n:backtrace: false\n:bulk_threshold: 1000\n:sources:\n- https://rubygems.org\n- http://[private gem server]\n:update_sources: true\n:verbose: true\ngem: '--no-document --no-ri'\n</code></pre>\n\n<p>There is no /etc/gemrc on either system</p>\n\n<p><strong>Addendum 2</strong></p>\n\n<p>gem env's from both dev &amp; prodn systems</p>\n\n<p>production system</p>\n\n<pre><code>gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.4.5\n  - RUBY VERSION: 2.2.2 (2015-04-13 patchlevel 95) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /home/ql/.gem/ruby/2.2.2\n  - RUBY EXECUTABLE: /opt/rubies/ruby-2.2.2/bin/ruby\n  - EXECUTABLE DIRECTORY: /home/ql/.gem/ruby/2.2.2/bin\n  - SPEC CACHE DIRECTORY: /home/ql/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /opt/rubies/ruby-2.2.2/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /home/ql/.gem/ruby/2.2.2\n     - /opt/rubies/ruby-2.2.2/lib/ruby/gems/2.2.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - :sources =&gt; [\"https://rubygems.org\", \"http://[private gem server]\"]\n     - \"gem\" =&gt; \"--no-document --no-ri\"\n  - REMOTE SOURCES:\n     - https://rubygems.org\n     - http://[private gem server]\n  - SHELL PATH:\n     - /home/ql/.gem/ruby/2.2.2/bin\n     - /opt/rubies/ruby-2.2.2/lib/ruby/gems/2.2.0/bin\n     - /opt/rubies/ruby-2.2.2/bin\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/sbin\n     - /usr/bin\n     - /sbin\n     - /bin\n     - /usr/games\n     - /usr/local/games\n     - /usr/lib/jvm/java-8-oracle/bin\n     - /usr/lib/jvm/java-8-oracle/db/bin\n     - /usr/lib/jvm/java-8-oracle/jre/bin\n</code></pre>\n\n<p>development system</p>\n\n<pre><code>gem env\nRubyGems Environment:\n  - RUBYGEMS VERSION: 2.4.8\n  - RUBY VERSION: 2.2.2 (2015-04-13 patchlevel 95) [x86_64-linux]\n  - INSTALLATION DIRECTORY: /home/cb/.gem/ruby/2.2.2\n  - RUBY EXECUTABLE: /home/cb/.rubies/ruby-2.2.2/bin/ruby\n  - EXECUTABLE DIRECTORY: /home/cb/.gem/ruby/2.2.2/bin\n  - SPEC CACHE DIRECTORY: /home/cb/.gem/specs\n  - SYSTEM CONFIGURATION DIRECTORY: /home/cb/.rubies/ruby-2.2.2/etc\n  - RUBYGEMS PLATFORMS:\n    - ruby\n    - x86_64-linux\n  - GEM PATHS:\n     - /home/cb/.gem/ruby/2.2.2\n     - /home/cb/.rubies/ruby-2.2.2/lib/ruby/gems/2.2.0\n  - GEM CONFIGURATION:\n     - :update_sources =&gt; true\n     - :verbose =&gt; true\n     - :backtrace =&gt; false\n     - :bulk_threshold =&gt; 1000\n     - :sources =&gt; [\"https://rubygems.org\", \"http://[private gem server]/\"]\n     - \"gem\" =&gt; \"--no-document\"\n  - REMOTE SOURCES:\n     - https://rubygems.org\n     - http://[private gem server]/\n  - SHELL PATH:\n     - /home/cb/.gem/ruby/2.2.2/bin\n     - /home/cb/.rubies/ruby-2.2.2/lib/ruby/gems/2.2.0/bin\n     - /home/cb/.rubies/ruby-2.2.2/bin\n     - /usr/local/sbin\n     - /usr/local/bin\n     - /usr/sbin\n     - /usr/bin\n     - /sbin\n     - /bin\n     - /usr/games\n     - /usr/local/games\n     - .\n     - bin\n</code></pre>\n\n<p><strong>Addendum 3</strong>\n<code>top</code> summary for production server</p>\n\n<pre><code>top - 20:11:26 up 1 day,  1:18,  1 user,  load average: 0.02, 0.04, 0.05\nTasks:  94 total,   2 running,  92 sleeping,   0 stopped,   0 zombie\n%Cpu(s):  0.3 us,  0.2 sy,  0.0 ni, 99.3 id,  0.0 wa,  0.0 hi,  0.2 si,  0.0 st\nKiB Mem:   4048288 total,  2797220 used,  1251068 free,   369612 buffers\nKiB Swap:        0 total,        0 used,        0 free.   922420 cached Mem\n</code></pre>\n\n<p>Not much happening on production @ mo. Dev system is working much harder. System isn't incurring any swapping penalty @ mo either.</p>\n\n<p>Removing the trailing slash on the private gem server url has no impact on execution time.</p>\n\n<p><strong>Addendum 4</strong>\nTested private gem on a 16GB mem DO droplet and performance issues went away. Both servers built with the same Ansible playbook.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "nokogiri"], "comments": [{"owner": {"reputation": 3090, "user_id": 3804420, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7143c03b5b0e42cb070947af0d60ebd1?s=128&d=identicon&r=PG", "display_name": "gmuraleekrishna", "link": "https://stackoverflow.com/users/3804420/gmuraleekrishna"}, "edited": false, "score": 0, "creation_date": 1462955900, "post_id": 37157217, "comment_id": 61850829, "body": "Please share your <code>Gemfile</code> and the file against which shows error."}, {"owner": {"reputation": 155803, "user_id": 314166, "user_type": "registered", "accept_rate": 82, "profile_image": "https://i.stack.imgur.com/zL1re.jpg?s=128&g=1", "display_name": "sawa", "link": "https://stackoverflow.com/users/314166/sawa"}, "edited": false, "score": 2, "creation_date": 1462956171, "post_id": 37157217, "comment_id": 61850997, "body": "What is your question?"}, {"owner": {"reputation": 520, "user_id": 2151116, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e893d298ce2567e5a3fe8470e65f028c?s=128&d=identicon&r=PG", "display_name": "Grigor Aleksanyan", "link": "https://stackoverflow.com/users/2151116/grigor-aleksanyan"}, "edited": false, "score": 0, "creation_date": 1462956280, "post_id": 37157217, "comment_id": 61851062, "body": "I have an error. How to fix this?"}], "answers": [{"comments": [{"owner": {"reputation": 520, "user_id": 2151116, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e893d298ce2567e5a3fe8470e65f028c?s=128&d=identicon&r=PG", "display_name": "Grigor Aleksanyan", "link": "https://stackoverflow.com/users/2151116/grigor-aleksanyan"}, "edited": false, "score": 0, "creation_date": 1462956856, "post_id": 37157496, "comment_id": 61851437, "body": "Thanks Keith, I tried. but it not works. I get same error."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 520, "user_id": 2151116, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e893d298ce2567e5a3fe8470e65f028c?s=128&d=identicon&r=PG", "display_name": "Grigor Aleksanyan", "link": "https://stackoverflow.com/users/2151116/grigor-aleksanyan"}, "edited": false, "score": 0, "creation_date": 1462956944, "post_id": 37157496, "comment_id": 61851514, "body": "Is nokogiri specified in your Gemfile and Gemfile.lock files?  Maybe try manually <code>gem install nokogiri</code> and see if that helps."}, {"owner": {"reputation": 520, "user_id": 2151116, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e893d298ce2567e5a3fe8470e65f028c?s=128&d=identicon&r=PG", "display_name": "Grigor Aleksanyan", "link": "https://stackoverflow.com/users/2151116/grigor-aleksanyan"}, "edited": false, "score": 0, "creation_date": 1462957087, "post_id": 37157496, "comment_id": 61851629, "body": "I add nokogiri to my gemfile and already install globally, but, it not works."}, {"owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "reply_to_user": {"reputation": 520, "user_id": 2151116, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e893d298ce2567e5a3fe8470e65f028c?s=128&d=identicon&r=PG", "display_name": "Grigor Aleksanyan", "link": "https://stackoverflow.com/users/2151116/grigor-aleksanyan"}, "edited": false, "score": 0, "creation_date": 1462957174, "post_id": 37157496, "comment_id": 61851688, "body": "Maybe try running <code>gem env</code> and make sure the nokogiri gem is in one of the directory trees specified in the &quot;GEM PATHS&quot; section."}, {"owner": {"reputation": 520, "user_id": 2151116, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e893d298ce2567e5a3fe8470e65f028c?s=128&d=identicon&r=PG", "display_name": "Grigor Aleksanyan", "link": "https://stackoverflow.com/users/2151116/grigor-aleksanyan"}, "edited": false, "score": 0, "creation_date": 1462957646, "post_id": 37157496, "comment_id": 61852024, "body": "I check, they are in the same folder. I am going just remove nokogiri and find other solution. Thanks."}], "tags": [], "owner": {"reputation": 4272, "user_id": 501266, "user_type": "registered", "accept_rate": 40, "profile_image": "https://i.stack.imgur.com/iDtAx.jpg?s=128&g=1", "display_name": "Keith Bennett", "link": "https://stackoverflow.com/users/501266/keith-bennett"}, "is_accepted": false, "score": 0, "last_activity_date": 1462956586, "creation_date": 1462956586, "answer_id": 37157496, "question_id": 37157217, "link": "https://stackoverflow.com/questions/37157217/how-to-fix-require-cannot-load-such-file-nokogiri-2-1-nokogiri-loaderror/37157496#37157496", "title": "How to fix `require&#39;: cannot load such file -- nokogiri/2.1/nokogiri (LoadError)", "body": "<p>You need to run <code>bundle</code> (or <code>bundle install</code>, but <code>bundle</code> does the same thing), to install the gems that are necessary for the app to run.</p>\n"}], "owner": {"reputation": 520, "user_id": 2151116, "user_type": "registered", "accept_rate": 44, "profile_image": "https://www.gravatar.com/avatar/e893d298ce2567e5a3fe8470e65f028c?s=128&d=identicon&r=PG", "display_name": "Grigor Aleksanyan", "link": "https://stackoverflow.com/users/2151116/grigor-aleksanyan"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1658, "favorite_count": 0, "answer_count": 1, "score": -2, "last_activity_date": 1579805871, "creation_date": 1462955806, "last_edit_date": 1579805871, "question_id": 37157217, "link": "https://stackoverflow.com/questions/37157217/how-to-fix-require-cannot-load-such-file-nokogiri-2-1-nokogiri-loaderror", "title": "How to fix `require&#39;: cannot load such file -- nokogiri/2.1/nokogiri (LoadError)", "body": "<p>I see many answers for this error when ruby version is =>2.2, but in my computer installed ruby version is [ruby 2.1.8p440]\nI get this error when starting a server ( rails server ). </p>\n\n<p>Gemfile</p>\n\n<pre><code>    source 'http://rubygems.org'\n\n\n# Bundle edge Rails instead: gem 'rails', github: 'rails/rails'\ngem 'rails', '4.1.8'\n# Use sqlite3 as the database for Active Record\n#gem 'sqlite3'\ngem 'pg', '0.18.2'\n# Use SCSS for stylesheets\n#gem 'sass-rails', '~&gt; 4.0.3'\n\ngem 'rails_12factor', group: :production\n\n\n# Use Uglifier as compressor for JavaScript assets\ngem 'uglifier', '&gt;= 1.3.0'\n# Use CoffeeScript for .js.coffee assets and views\ngem 'coffee-rails', '~&gt; 4.0.0'\n# See https://github.com/sstephenson/execjs#readme for more supported runtimes\n# gem 'therubyracer',  platforms: :ruby\n\n# Use jquery as the JavaScript library\ngem 'jquery-rails'\n# Turbolinks makes following links in your web application faster. Read more: https://github.com/rails/turbolinks\ngem 'turbolinks'\n# Build JSON APIs with ease. Read more: https://github.com/rails/jbuilder\ngem 'jbuilder', '~&gt; 2.0'\n# bundle exec rake doc:rails generates the API under doc/api.\ngem 'sdoc', '~&gt; 0.4.0',          group: :doc\n\n# Use ActiveModel has_secure_password\ngem 'bcrypt', '~&gt; 3.1.7'\n\n# Use unicorn as the app server\n# gem 'unicorn'\n\n# Use Capistrano for deployment\n# gem 'capistrano-rails', group: :development\n\n# Use debugger\n# gem 'debugger', group: [:development, :test]\ngem 'sass-rails', '&gt;= 3.3.4'\ngem 'bootstrap-sass', '~&gt; 3.3.6'\n\ngem 'ckeditor', '4.1.6'\ngem 'carrierwave', '0.10.0'\ngem 'fog', '~&gt; 1.3.1'\ngem 'mini_magick', '4.5.1'\ngem 'will_paginate', '3.1.0'\ngem 'nokogiri', '&gt;= 1.5.0'\n\n\n# Windows does not include zoneinfo files, so bundle the tzinfo-data gem\ngem 'tzinfo-data', platforms: [:mingw, :mswin]\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/DYN8a.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DYN8a.png\" alt=\"Error when starting server\"></a></p>\n"}, {"tags": ["ruby"], "answers": [{"tags": [], "owner": {"reputation": 187800, "user_id": 320615, "user_type": "registered", "accept_rate": 89, "profile_image": "https://www.gravatar.com/avatar/65c80e12b6a33913538653f6d4ef1277?s=128&d=identicon&r=PG", "display_name": "Dogbert", "link": "https://stackoverflow.com/users/320615/dogbert"}, "is_accepted": false, "score": 5, "last_activity_date": 1462956631, "last_edit_date": 1462956631, "creation_date": 1462955130, "answer_id": 37156965, "question_id": 37156830, "link": "https://stackoverflow.com/questions/37156830/how-to-sum-up-values-in-a-nested-array/37156965#37156965", "title": "How to sum up values in a nested array", "body": "<p>Use <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-group_by\" rel=\"nofollow\"><code>group_by</code></a>, <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-map\" rel=\"nofollow\"><code>map</code></a> and <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-reduce\" rel=\"nofollow\"><code>reduce</code></a>:</p>\n\n<pre><code>arr.group_by(&amp;:first).map { |k, v| [k, v.map(&amp;:last).reduce(:+)] }\n#=&gt; [[\"OMAA002S16001006 1088\", 36],\n#    [\"OMRA001S16116037 1001\", 10],\n#    [\"OMRA001S16116037 0110\", 9],\n#    [\"OMAA002S16001014 0119\", 9],\n#    [\"OMAA002S16001002 0134\", 9]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "is_accepted": true, "score": 8, "last_activity_date": 1462955195, "creation_date": 1462955195, "answer_id": 37156985, "question_id": 37156830, "link": "https://stackoverflow.com/questions/37156830/how-to-sum-up-values-in-a-nested-array/37156985#37156985", "title": "How to sum up values in a nested array", "body": "<p>Using <a href=\"http://ruby-doc.org/core-2.3.1/Enumerable.html#method-i-each_with_object\"><code>Enumerable#each_with_object</code></a>:</p>\n\n<pre><code>arr.each_with_object(Hash.new(0)) { |(k, v), h| h[k] += v }\n#=&gt; {\"OMAA002S16001006 1088\"=&gt;36,\n#    \"OMRA001S16116037 1001\"=&gt;10,\n#    \"OMRA001S16116037 0110\"=&gt;9,\n#    \"OMAA002S16001014 0119\"=&gt;9,\n#    \"OMAA002S16001002 0134\"=&gt;9}\n</code></pre>\n\n<p>You can call <code>to_a</code> to convert it back to an array.</p>\n"}, {"tags": [], "owner": {"reputation": 8160, "user_id": 163640, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/d63f02794544d271573750a83842cf59?s=128&d=identicon&r=PG", "display_name": "eugen", "link": "https://stackoverflow.com/users/163640/eugen"}, "is_accepted": false, "score": 1, "last_activity_date": 1462956547, "last_edit_date": 1462956547, "creation_date": 1462955244, "answer_id": 37156998, "question_id": 37156830, "link": "https://stackoverflow.com/questions/37156830/how-to-sum-up-values-in-a-nested-array/37156998#37156998", "title": "How to sum up values in a nested array", "body": "<p>Something like this might help:</p>\n\n<pre><code>arr.map.with_object(Hash.new(0)) { |(k, v), o| o[k] += v}.to_a\n#=&gt; [[\"OMAA002S16001006 1088\", 36],\n#    [\"OMRA001S16116037 1001\", 10],\n#    [\"OMRA001S16116037 0110\", 9],\n#    [\"OMAA002S16001014 0119\", 9],\n#    [\"OMAA002S16001002 0134\", 9]]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 0, "last_activity_date": 1463038559, "creation_date": 1463038559, "answer_id": 37180239, "question_id": 37156830, "link": "https://stackoverflow.com/questions/37156830/how-to-sum-up-values-in-a-nested-array/37180239#37180239", "title": "How to sum up values in a nested array", "body": "<pre><code>arr.each_with_object({}) { |(s,v), h| h.update(s=&gt;v) { |_,o,n| o+n } }.to_a\n  #=&gt; [[\"OMAA002S16001006 1088\", 36],\n  #    [\"OMRA001S16116037 1001\", 10],\n  #    [\"OMRA001S16116037 0110\", 9],\n  #    [\"OMAA002S16001014 0119\", 9],\n  #    [\"OMAA002S16001002 0134\", 9]] \n</code></pre>\n\n<p>This uses the form of <a href=\"http://ruby-doc.org/core-2.2.0/Hash.html#method-i-update\" rel=\"nofollow\">Hash#update</a> (aka <code>merge!</code>) that uses a block (here <code>{ |_,o,n| o+n }</code>) to determine the values of keys that are present in both hashes being merged. See the doc for what <code>o</code> and <code>n</code> represent.</p>\n\n<p>Note that</p>\n\n<pre><code>arr.each_with_object({}) { |(s,v), h| h.update(s=&gt;v) { |_,o,n| o+n } }\n  #=&gt; {\"OMAA002S16001006 1088\"=&gt;36,\n  #    \"OMRA001S16116037 1001\"=&gt;10,\n  #    \"OMRA001S16116037 0110\"=&gt;9,\n  #    \"OMAA002S16001014 0119\"=&gt;9,\n  #    \"OMAA002S16001002 0134\"=&gt;9}\n</code></pre>\n\n<p><code>.to_a</code> then converts this hash to the desired array of arrays. </p>\n\n<p>I am not advocating this approach. My preference is for @Stefan's use of a counting hash.</p>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 4213233, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/Ds0vS.png?s=128&g=1", "display_name": "Edison.Hsu", "link": "https://stackoverflow.com/users/4213233/edison-hsu"}, "is_accepted": false, "score": 0, "last_activity_date": 1463059428, "creation_date": 1463059428, "answer_id": 37188281, "question_id": 37156830, "link": "https://stackoverflow.com/questions/37156830/how-to-sum-up-values-in-a-nested-array/37188281#37188281", "title": "How to sum up values in a nested array", "body": "<p>Just use <code>reduce</code> and <code>to_a</code>:</p>\n\n<pre><code>arr.reduce(Hash.new(0)) { |h, (k,v)| h[k] += v; h }.to_a\n#=&gt; [[\"OMAA002S16001006 1088\", 36],\n#    [\"OMRA001S16116037 1001\", 10],\n#    [\"OMRA001S16116037 0110\", 9],\n#    [\"OMAA002S16001014 0119\", 9],\n#    [\"OMAA002S16001002 0134\", 9]]\n</code></pre>\n"}], "owner": {"reputation": 1463, "user_id": 2448104, "user_type": "registered", "accept_rate": 88, "profile_image": "https://i.stack.imgur.com/QEF9u.jpg?s=128&g=1", "display_name": "John Smith", "link": "https://stackoverflow.com/users/2448104/john-smith"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 328, "favorite_count": 0, "accepted_answer_id": 37156985, "answer_count": 5, "score": 0, "last_activity_date": 1463059428, "creation_date": 1462954695, "last_edit_date": 1462955439, "question_id": 37156830, "link": "https://stackoverflow.com/questions/37156830/how-to-sum-up-values-in-a-nested-array", "title": "How to sum up values in a nested array", "body": "<p>I have an array in the following format:</p>\n\n<pre><code>arr = [\n [\"OMAA002S16001006 1088\", 13],\n [\"OMAA002S16001006 1088\", 13],\n [\"OMAA002S16001006 1088\", 10],\n [\"OMRA001S16116037 1001\", 10],\n [\"OMRA001S16116037 0110\", 9],\n [\"OMAA002S16001014 0119\", 9],\n [\"OMAA002S16001002 0134\", 9]\n]\n</code></pre>\n\n<p>The first entries are the same code but with different numbers. What's the best way to make the entries unique and sum up the values on the right? The result should be like this:</p>\n\n<pre><code>[\n [\"OMAA002S16001006 1088\", 36],\n [\"OMRA001S16116037 1001\", 10],\n [\"OMRA001S16116037 0110\", 9],\n [\"OMAA002S16001014 0119\", 9],\n [\"OMAA002S16001002 0134\", 9]\n]\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "amazon-s3", "ffmpeg"], "comments": [{"owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "edited": false, "score": 0, "creation_date": 1464981200, "post_id": 37156802, "comment_id": 62726237, "body": "Based on your error, it happens inside MultiJson <a href=\"https://github.com/intridea/multi_json/blob/master/lib/multi_json/adapter.rb#L19\" rel=\"nofollow noreferrer\">here</a> because of empty string passed to load method after calling by streamio-ffmpeg from <a href=\"https://github.com/streamio/streamio-ffmpeg/blob/master/lib/ffmpeg/movie.rb#L28\" rel=\"nofollow noreferrer\">here</a>. String is resulted std_output of the following statement (line #17): command = &quot;#{FFMPEG.ffprobe_binary} -i #{Shellwords.escape(path)} -print_format json -show_format -show_streams -show_error&quot; - can you run this command manually in console (terminal) and see what it outputs?"}, {"owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "edited": false, "score": 0, "creation_date": 1464981364, "post_id": 37156802, "comment_id": 62726309, "body": "For ffprobe_binary check <a href=\"https://github.com/streamio/streamio-ffmpeg/blob/32f68006222b293d8b9482616a7e79d63fe97829/lib/streamio-ffmpeg.rb\" rel=\"nofollow noreferrer\">here</a> - do you have it properly available?"}, {"owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "edited": false, "score": 0, "creation_date": 1464981740, "post_id": 37156802, "comment_id": 62726507, "body": "Unless you set it manually, the code is &quot;def self.ffprobe_binary;   @ ffprobe_binary || which(&#39;ffprobe&#39;);  end&quot;"}, {"owner": {"reputation": 873, "user_id": 1581718, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/evhC6.jpg?s=128&g=1", "display_name": "Pavel Bulanov", "link": "https://stackoverflow.com/users/1581718/pavel-bulanov"}, "edited": false, "score": 0, "creation_date": 1464982042, "post_id": 37156802, "comment_id": 62726674, "body": "Also, what would be self.file.path value that is passed to streamio-ffmpeg? By the way, it doesn&#39;t look like ffprobe_binary would work with URLs, so you definitely need a local file full path+filename (at least looking <a href=\"https://github.com/streamio/streamio-ffmpeg\" rel=\"nofollow noreferrer\">here</a> - movie = FFMPEG::Movie.new(&quot;path/to/movie.mov&quot;)"}], "answers": [{"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1463388357, "post_id": 37239467, "comment_id": 62027820, "body": "Is then a possibility to first watermark the movie and upload it afterwards?"}, {"owner": {"reputation": 124, "user_id": 2456589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OcEJL.jpg?s=128&g=1", "display_name": "kspector", "link": "https://stackoverflow.com/users/2456589/kspector"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1463426311, "post_id": 37239467, "comment_id": 62049816, "body": "I&#39;m not sure what library/tool you&#39;re using to watermark, but I would assume you could perform whatever task you need on the cached version of the file, meaning, perform some task synchronously <i>before</i> calling <code>@vid.save</code>.  Once you call <code>.save</code>, CarrierWave will perform an upload of whatever file you&#39;ve linked to the model via the <code>video</code> column."}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1463440449, "post_id": 37239467, "comment_id": 62056089, "body": "how can I do this: perform some task synchronously before calling @vid.save"}, {"owner": {"reputation": 124, "user_id": 2456589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OcEJL.jpg?s=128&g=1", "display_name": "kspector", "link": "https://stackoverflow.com/users/2456589/kspector"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1463494621, "post_id": 37239467, "comment_id": 62082821, "body": "Can you post the full uploadVideo action in movie_controller.rb?"}, {"owner": {"reputation": 124, "user_id": 2456589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OcEJL.jpg?s=128&g=1", "display_name": "kspector", "link": "https://stackoverflow.com/users/2456589/kspector"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1463667371, "post_id": 37239467, "comment_id": 62171052, "body": "Try this before calling <code>@vid.save</code>, as you did your initial post: <code>movie = FFMPEG::Movie.new(@vid.video.current_path)</code>  Your initial problem was likely caused by providing an incomplete path to the FFMPEG::Movie initializer.  Once you confirm that this works with <code>.current_path</code> instead of <code>.url</code>, you should be able to watermark, call <code>@vid.save</code>, and see the changes reflected in the file uploaded to S3."}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464344337, "post_id": 37239467, "comment_id": 62458595, "body": "tried it with your suggestion of current_path. I got an JSON::ParserError  I add the code above"}, {"owner": {"reputation": 124, "user_id": 2456589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OcEJL.jpg?s=128&g=1", "display_name": "kspector", "link": "https://stackoverflow.com/users/2456589/kspector"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464644182, "post_id": 37239467, "comment_id": 62558101, "body": "Can you post the full stack trace of that error from your server logs?  The above screenshot does not suggest whether this is a rails rendering error or a stremio-ffmpeg error.  Also, you may have a typo here: options = {watermark: &quot;mages/header.png&quot;,..."}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464790487, "post_id": 37239467, "comment_id": 62629807, "body": "No I have the full qualified path here with my website domain. I have added the full stack trace above."}, {"owner": {"reputation": 124, "user_id": 2456589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OcEJL.jpg?s=128&g=1", "display_name": "kspector", "link": "https://stackoverflow.com/users/2456589/kspector"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464793747, "post_id": 37239467, "comment_id": 62632308, "body": "Don&#39;t include your website domain here - specify an absolute path to where the watermark png is on your server."}, {"owner": {"reputation": 124, "user_id": 2456589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OcEJL.jpg?s=128&g=1", "display_name": "kspector", "link": "https://stackoverflow.com/users/2456589/kspector"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464794622, "post_id": 37239467, "comment_id": 62632956, "body": "if <code>self.file.inspect</code> is the string file path, what happens if you swap all references to <code>self.file.path</code> with <code>self.file.inspect</code>?"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464795854, "post_id": 37239467, "comment_id": 62633798, "body": "It returns this: \t returns this: &quot;/var/www/ji_bildungsplattform/public/uploads/tmp/1464791840&zwnj;&#8203;-5971-0003-5475/VID-&zwnj;&#8203;\u200c\u200b20160424-WA0013.mp&zwnj;&#8203;4&quot;"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464796285, "post_id": 37239467, "comment_id": 62634070, "body": "oh okay I got what you mean ... sorry I try it"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464796551, "post_id": 37239467, "comment_id": 62634241, "body": "Chaged to self.file.inspect? ... and changed the url to image to a path on the server ... publics/images ... But got same error as well"}], "tags": [], "owner": {"reputation": 124, "user_id": 2456589, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/OcEJL.jpg?s=128&g=1", "display_name": "kspector", "link": "https://stackoverflow.com/users/2456589/kspector"}, "is_accepted": false, "score": 3, "last_activity_date": 1463322561, "creation_date": 1463322561, "answer_id": 37239467, "question_id": 37156802, "link": "https://stackoverflow.com/questions/37156802/rails-using-stremio-ffmpeg-gem-to-watermark-a-movie-while-uploading/37239467#37239467", "title": "Rails using stremio-ffmpeg gem to watermark a movie while uploading", "body": "<p>From the CarrierWave docs:</p>\n\n<blockquote>\n  <p>CarrierWave gives you a store for permanent storage, and a cache for temporary storage. You can use different stores, including filesystem and cloud storage.</p>\n</blockquote>\n\n<p>and</p>\n\n<blockquote>\n  <p>...you can cache files by assigning to the attribute, they will automatically be stored when the record is saved.</p>\n</blockquote>\n\n<p>Assuming that you've mounted your uploader to the <code>video</code> column of your model, (e.g - <code>mount_uploader :video, VideoUploader</code>) calling <code>video.url</code> will return the cache path after you <em>assign</em> a value to <code>video</code> column.  After you save the model, the <code>url</code> method will look in the store path.</p>\n\n<p>In your case, calling <code>@vid.video.store_path</code> will tell ffmpeg to look at your S3 bucket - however, it's best to <a href=\"http://www.rubydoc.info/gems/carrierwave/frames#Getting_Started\" rel=\"nofollow\">familiarize yourself with the cache and store path</a>, because watermarking may be more performant on the local, cached version of the file.</p>\n\n<hr>\n"}, {"comments": [{"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464680511, "post_id": 37536514, "comment_id": 62568806, "body": "That looks great I gonna test this todays evening. Thanks"}, {"owner": {"reputation": 1038, "user_id": 1183655, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/FDr01.jpg?s=128&g=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/1183655/kyle"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464791023, "post_id": 37536514, "comment_id": 62630248, "body": "I mean it looks like a general JSON parse error. What is the value of self.file and self.file.path?"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464791602, "post_id": 37536514, "comment_id": 62630687, "body": "tried this:  puts self.file.path.inspect -- and got the same error"}, {"owner": {"reputation": 1038, "user_id": 1183655, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/FDr01.jpg?s=128&g=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/1183655/kyle"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464791913, "post_id": 37536514, "comment_id": 62630933, "body": "what about puts self.file.inspect ?"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464792110, "post_id": 37536514, "comment_id": 62631081, "body": "returns this:  &quot;/var/www/ji_bildungsplattform/public/uploads/tmp/1464791840&zwnj;&#8203;-5971-0003-5475/VID-&zwnj;&#8203;20160424-WA0013.mp4&quot;"}, {"owner": {"reputation": 1038, "user_id": 1183655, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/FDr01.jpg?s=128&g=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/1183655/kyle"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464792806, "post_id": 37536514, "comment_id": 62631605, "body": "Is carrierwave configured correctly? Do you have any carrierwave additional gem that may be causing an issue? It doesn&#39;t look like the streamio-ffmpeg gem. Or more importantly, is the data being uploaded causing invalid json?"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464793213, "post_id": 37536514, "comment_id": 62631896, "body": "it works perfectly unti I add the stremio-ffmpeg functions. I&#39;m using those gems for carrierwave:   include CarrierWave::MiniMagick   include CarrierWave::Video   include CarrierWave::Video::Thumbnailer   include CarrierWave::Backgrounder::Delay"}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464793377, "post_id": 37536514, "comment_id": 62632027, "body": "I&#39;ve added the uploader source above"}, {"owner": {"reputation": 1038, "user_id": 1183655, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/FDr01.jpg?s=128&g=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/1183655/kyle"}, "reply_to_user": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464797438, "post_id": 37536514, "comment_id": 62634768, "body": "Let us <a href=\"http://chat.stackoverflow.com/rooms/113552/discussion-between-kyle-and-felix\">continue this discussion in chat</a>."}, {"owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "edited": false, "score": 0, "creation_date": 1464903651, "post_id": 37536514, "comment_id": 62689888, "body": "Sorry I hade some courses at university today I&#39;m at home just now. do you have time for me?"}], "tags": [], "owner": {"reputation": 1038, "user_id": 1183655, "user_type": "registered", "accept_rate": 94, "profile_image": "https://i.stack.imgur.com/FDr01.jpg?s=128&g=1", "display_name": "Kyle", "link": "https://stackoverflow.com/users/1183655/kyle"}, "is_accepted": false, "score": 4, "last_activity_date": 1464666551, "creation_date": 1464666551, "answer_id": 37536514, "question_id": 37156802, "link": "https://stackoverflow.com/questions/37156802/rails-using-stremio-ffmpeg-gem-to-watermark-a-movie-while-uploading/37536514#37536514", "title": "Rails using stremio-ffmpeg gem to watermark a movie while uploading", "body": "<p>We do something similar in our application that deals with audio. Obviously, we do not use video or watermarking but we use streamio-ffmpeg to do some transcoding of sorts. </p>\n\n<p>Instead of doing code in the controller related to the watermark, why not instead move that functionality to the uploader. For example, our <code>convert_to_mp3</code> method could be your watermarking method. Seems like this would potentially solve your problem.</p>\n\n<pre><code># encoding: utf-8\nrequire 'streamio-ffmpeg'\n\nclass FileUploader &lt; CarrierWave::Uploader::Base\n\n  # Choose what kind of storage to use for this uploader:\n  storage :fog\n\n  before :store, :remember_cache_id\n  after :store, :delete_tmp_dir\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  # Process files as they are uploaded:\n  process :convert_to_mp3\n\n  def convert_to_mp3\n    if self.file.path\n      if self.file.extension == 'm4a' || self.file.extension == 'wav' || self.file.extension == 'aac'\n        self.model.file = FFMPEG::Movie.new(self.file.path).transcode(\"#{root}/#{cache_dir}/#{self.cache_id}/file.mp3\", options_string)\n      end\n    end\n  end\n\n  def options_string\n    if self.file.extension == 'm4a'\n      \"-acodec libmp3lame -write_xing 0\"\n    elsif self.file.extension == 'aac'\n      \"-acodec libmp3lame -write_xing 0\"\n    elsif self.file.extension == 'wav'\n      \"-acodec libmp3lame -write_xing 0\"\n    end\n  end\n\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n  def extension_white_list\n    %w(mp3 m4a wav)\n  end\n\n  def cache_id\n    @cache_id\n  end\n\n  def remember_cache_id(new_file)\n    @cache_id_was = cache_id\n  end\n\n  def delete_tmp_dir(new_file)\n    # make sure we don't delete other things accidentally by checking the name pattern\n    if @cache_id_was.present? &amp;&amp; @cache_id_was =~ /\\A[\\d]{8}\\-[\\d]{4}\\-[\\d]+\\-[\\d]{4}\\z/\n      FileUtils.rm_rf(File.join(root, cache_dir, @cache_id_was))\n    end\n  end\n\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1263, "user_id": 10221813, "user_type": "registered", "profile_image": "https://graph.facebook.com/10160530708235447/picture?type=large", "display_name": "uno", "link": "https://stackoverflow.com/users/10221813/uno"}, "edited": false, "score": 0, "creation_date": 1552626731, "post_id": 37629365, "comment_id": 97090369, "body": "so you need streamio-ffmpeg gem in order to watermark a carrierwave video?"}], "tags": [], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "is_accepted": true, "score": 1, "last_activity_date": 1466032542, "last_edit_date": 1466032542, "creation_date": 1465037906, "answer_id": 37629365, "question_id": 37156802, "link": "https://stackoverflow.com/questions/37156802/rails-using-stremio-ffmpeg-gem-to-watermark-a-movie-while-uploading/37629365#37629365", "title": "Rails using stremio-ffmpeg gem to watermark a movie while uploading", "body": "<p>With Kyle together we figured out that the following is required</p>\n\n<p>only version 1.0.0 works fine</p>\n\n<pre><code>gem 'streamio-ffmpeg', '1.0.0'\n</code></pre>\n\n<p>The function is now in the carrierwave uploader and looks like this:</p>\n\n<pre><code>  process :watermark_movie\n\n  def watermark_movie\n      options = {watermark: \"#{Rails.root}/public/images/logo_klein.png\", resolution: \"640x360\", watermark_filter: {position: \"RT\", padding_x: 10, padding_y: 10},custom: '-strict experimental'}\n      #debugger\n      tmp_path = File.join File.dirname(current_path), \"tmp_file.mp4\"\n      file = FFMPEG::Movie.new(self.file.path)\n      file.transcode tmp_path, options\n      File.rename tmp_path, current_path\n  end\n</code></pre>\n\n<p>At the Moment there are no more errors, problem is still that the watermark is not working.</p>\n\n<p>Update:</p>\n\n<p>A working solution is:</p>\n\n<pre><code>system \"ffmpeg -i #{self.file.path} -vf 'movie=#{watermarkimage} [watermark]; [in][watermark] overlay=main_w-overlay_w-10:10 [out]' -strict experimental #{tmp_path}\"\n</code></pre>\n"}], "owner": {"reputation": 4750, "user_id": 4367019, "user_type": "registered", "accept_rate": 99, "profile_image": "https://i.stack.imgur.com/CnP5z.jpg?s=128&g=1", "display_name": "Felix", "link": "https://stackoverflow.com/users/4367019/felix"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1428, "favorite_count": 1, "accepted_answer_id": 37629365, "answer_count": 3, "score": 10, "last_activity_date": 1466032542, "creation_date": 1462954598, "last_edit_date": 1464793360, "question_id": 37156802, "link": "https://stackoverflow.com/questions/37156802/rails-using-stremio-ffmpeg-gem-to-watermark-a-movie-while-uploading", "title": "Rails using stremio-ffmpeg gem to watermark a movie while uploading", "body": "<p>I am using carrierwave to upload a movie to amazon s3 that works perfect.</p>\n\n<p>Now I want to add a watermark to the movie while uploading or after uploading, I don't know, what's the best way?</p>\n\n<p>I tried this:</p>\n\n<p><code>movie_controller.rb</code> action uploadVideo</p>\n\n<pre><code>movie = FFMPEG::Movie.new(@vid.video.url)\n\nputs \"........................................\"\nputs movie.inspect\n\nif @vid.save\n</code></pre>\n\n<p>Just to find out if the video is catched from stremio.</p>\n\n<p>But then I got the error that the movie is not found, the problem is that it doesn't look in the amazon s3 bucket, it looks on my local server </p>\n\n<pre><code>No such file or directory - the file '/uploads/tmp/1462954331-3471-8766/VID-20160424-WA0013.mp4' does not exist\n</code></pre>\n\n<p>What could be the solution? or should I do this in carrierwave uploader?</p>\n\n<p><strong>UPDATE:</strong></p>\n\n<p>When I do this after the .save action it looks at amazon s3 bucket .. but also says that the movie isn't there. But if I call it directly in browser it's displayed.</p>\n\n<p><strong>UPDATE Code:</strong></p>\n\n<pre><code>#Laedt ein Video hoch\ndef uploadMovie\n  @user = User.find_by_id session[:user_id]\n  #Holt alle Channels f\u00fcr die er eine Berechtigung hat (Eingeloggter user)\n  @user = User.find_by_id session[:user_id]\n  @knowledgeproviderList = @user.knowledgeprovider\n  @channels = Channel.where(knowledgeprovider_id:     @knowledgeproviderList.pluck(:id))\n  @vid = Movie.new(movies_params)\n  @channel = Channel.find(params[:vid][:channel_id])\n  @vid.channel = @channel\n\n  #F\u00fcgt dem Movie einen Tag hinzu\n  createTag params\n  createCategory params\n\n\n\n  if @vid.save\n    flash[:notice] = t(\"flash.saved\")\n\n    #movie = FFMPEG::Movie.new(@vid.video.url)\n\n    #puts \"........................................\"\n    #puts movie.inspect\n\n    redirect_to :action =&gt; :add\n   else\n     redirect_to :action =&gt; :add\n  end\n end\n</code></pre>\n\n<p>Update error:</p>\n\n<pre><code>movie = FFMPEG::Movie.new(@vid.video.current_path)\n\noptions = {watermark: \"mages/header.png\", resolution: \"640x360\", watermark_filter: { position: \"RT\", padding_x: 10, padding_y: 10 } }\nmovie.transcode(\"movie.flv\", options)\n</code></pre>\n\n<p><a href=\"https://i.stack.imgur.com/wnRAd.png\" rel=\"noreferrer\"><img src=\"https://i.stack.imgur.com/wnRAd.png\" alt=\"enter image description here\"></a></p>\n\n<p><strong>Update:</strong>\nAdded the code in the uploader:</p>\n\n<pre><code>  process :watermark_movie\n\n     def watermark_movie\n       if self.file.path\n             options = {watermark: \"images/header.png\", resolution: \"640x360\", watermark_filter: { position: \"RT\", padding_x: 10, padding_y: 10 } }\n             self.model.file = FFMPEG::Movie.new(self.file.path).transcode(\"#{root}/#{cache_dir}/#{self.cache_id}/file.mp4\", options)\n        end\n      end\n</code></pre>\n\n<p>Error:</p>\n\n<pre><code>multi_json (1.12.0) lib/multi_json/adapter.rb:19:in `load'\nmulti_json (1.12.0) lib/multi_json.rb:122:in `load'\nstreamio-ffmpeg (2.0.0) lib/ffmpeg/movie.rb:28:in `initialize'\napp/uploaders/movie_uploader.rb:40:in `new'\napp/uploaders/movie_uploader.rb:40:in `watermark_movie'\ncarrierwave (0.11.2) lib/carrierwave/uploader/processing.rb:84:in `block in process!'\ncarrierwave (0.11.2) lib/carrierwave/uploader/processing.rb:76:in `each'\ncarrierwave (0.11.2) lib/carrierwave/uploader/processing.rb:76:in `process!'\ncarrierwave_backgrounder (0.4.2) lib/backgrounder/delay.rb:14:in `process!'\ncarrierwave (0.11.2) lib/carrierwave/uploader/callbacks.rb:18:in `block in with_callbacks'\ncarrierwave (0.11.2) lib/carrierwave/uploader/callbacks.rb:18:in `each'\ncarrierwave (0.11.2) lib/carrierwave/uploader/callbacks.rb:18:in `with_callbacks'\ncarrierwave (0.11.2) lib/carrierwave/uploader/cache.rb:134:in `cache!'\ncarrierwave (0.11.2) lib/carrierwave/mount.rb:329:in `cache'\ncarrierwave (0.11.2) lib/carrierwave/mount.rb:163:in `video='\ncarrierwave (0.11.2) lib/carrierwave/orm/activerecord.rb:39:in `video='\nactiverecord (4.2.1) lib/active_record/attribute_assignment.rb:54:in `public_send'\nactiverecord (4.2.1) lib/active_record/attribute_assignment.rb:54:in `_assign_attribute'\nactiverecord (4.2.1) lib/active_record/attribute_assignment.rb:41:in `block in assign_attributes'\nactionpack (4.2.1) lib/action_controller/metal/strong_parameters.rb:183:in `each_pair'\nactionpack (4.2.1) lib/action_controller/metal/strong_parameters.rb:183:in `each_pair'\nactiverecord (4.2.1) lib/active_record/attribute_assignment.rb:35:in `assign_attributes'\nactiverecord (4.2.1) lib/active_record/core.rb:559:in `init_attributes'\nactiverecord (4.2.1) lib/active_record/core.rb:281:in `initialize'\nactiverecord (4.2.1) lib/active_record/inheritance.rb:61:in `new'\nactiverecord (4.2.1) lib/active_record/inheritance.rb:61:in `new'\napp/controllers/movies_controller.rb:71:in `uploadMovie'\nactionpack (4.2.1) lib/action_controller/metal/implicit_render.rb:4:in `send_action'\nactionpack (4.2.1) lib/abstract_controller/base.rb:198:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/rendering.rb:10:in `process_action'\nactionpack (4.2.1) lib/abstract_controller/callbacks.rb:20:in `block in process_action'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:117:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:505:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:92:in `_run_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.1) lib/abstract_controller/callbacks.rb:19:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/rescue.rb:29:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'\nactivesupport (4.2.1) lib/active_support/notifications.rb:164:in `block in instrument'\nactivesupport (4.2.1) lib/active_support/notifications/instrumenter.rb:20:in `instrument'\nactivesupport (4.2.1) lib/active_support/notifications.rb:164:in `instrument'\nactionpack (4.2.1) lib/action_controller/metal/instrumentation.rb:30:in `process_action'\nactionpack (4.2.1) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'\nactiverecord (4.2.1) lib/active_record/railties/controller_runtime.rb:18:in `process_action'\nactionpack (4.2.1) lib/abstract_controller/base.rb:137:in `process'\nactionview (4.2.1) lib/action_view/rendering.rb:30:in `process'\nactionpack (4.2.1) lib/action_controller/metal.rb:196:in `dispatch'\nactionpack (4.2.1) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'\nactionpack (4.2.1) lib/action_controller/metal.rb:237:in `block in action'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `call'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:43:in `serve'\nactionpack (4.2.1) lib/action_dispatch/journey/router.rb:43:in `block in serve'\nactionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `each'\nactionpack (4.2.1) lib/action_dispatch/journey/router.rb:30:in `serve'\nactionpack (4.2.1) lib/action_dispatch/routing/route_set.rb:819:in `call'\nrack (1.6.4) lib/rack/etag.rb:24:in `call'\nrack (1.6.4) lib/rack/conditionalget.rb:38:in `call'\nrack (1.6.4) lib/rack/head.rb:13:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/params_parser.rb:27:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/flash.rb:260:in `call'\nrack (1.6.4) lib/rack/session/abstract/id.rb:225:in `context'\nrack (1.6.4) lib/rack/session/abstract/id.rb:220:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/cookies.rb:560:in `call'\nactiverecord (4.2.1) lib/active_record/query_cache.rb:36:in `call'\nactiverecord (4.2.1) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'\nactiverecord (4.2.1) lib/active_record/migration.rb:378:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:88:in `call'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:88:in `_run_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'\nactivesupport (4.2.1) lib/active_support/callbacks.rb:81:in `run_callbacks'\nactionpack (4.2.1) lib/action_dispatch/middleware/callbacks.rb:27:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/reloader.rb:73:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'\nweb-console (2.3.0) lib/web_console/middleware.rb:20:in `block in call'\nweb-console (2.3.0) lib/web_console/middleware.rb:18:in `catch'\nweb-console (2.3.0) lib/web_console/middleware.rb:18:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'\nrailties (4.2.1) lib/rails/rack/logger.rb:38:in `call_app'\nrailties (4.2.1) lib/rails/rack/logger.rb:20:in `block in call'\nactivesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `block in tagged'\nactivesupport (4.2.1) lib/active_support/tagged_logging.rb:26:in `tagged'\nactivesupport (4.2.1) lib/active_support/tagged_logging.rb:68:in `tagged'\nrailties (4.2.1) lib/rails/rack/logger.rb:20:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/request_id.rb:21:in `call'\nrack (1.6.4) lib/rack/methodoverride.rb:22:in `call'\nrack (1.6.4) lib/rack/runtime.rb:18:in `call'\nactivesupport (4.2.1) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nactionpack (4.2.1) lib/action_dispatch/middleware/static.rb:113:in `call'\nrack (1.6.4) lib/rack/sendfile.rb:113:in `call'\nrailties (4.2.1) lib/rails/engine.rb:518:in `call'\nrailties (4.2.1) lib/rails/application.rb:164:in `call'\nrack (1.6.4) lib/rack/lock.rb:17:in `call'\nrack (1.6.4) lib/rack/content_length.rb:15:in `call'\nrack (1.6.4) lib/rack/handler/webrick.rb:88:in `service'\n/home/felix/.rvm/rubies/ruby-2.0.0-p643/lib/ruby/2.0.0/webrick/httpserver.rb:138:in `service'\n/home/felix/.rvm/rubies/ruby-2.0.0-p643/lib/ruby/2.0.0/webrick/httpserver.rb:94:in `run'\n/home/felix/.rvm/rubies/ruby-2.0.0-p643/lib/ruby/2.0.0/webrick/server.rb:295:in `block in start_thread'\n</code></pre>\n\n<p><strong>UPDATE -- Movie Uploader</strong></p>\n\n<pre><code># encoding: utf-8\nclass MovieUploader &lt; CarrierWave::Uploader::Base\n\n  # Include RMagick or MiniMagick support:\n  # include CarrierWave::RMagick\n  include CarrierWave::MiniMagick\n  include CarrierWave::Video\n  include CarrierWave::Video::Thumbnailer\n  include CarrierWave::Backgrounder::Delay\n\n  require 'rubygems'\n  require 'streamio-ffmpeg'\n\n  # Choose what kind of storage to use for this uploader:\n  storage :fog\n\n  # Override the directory where uploaded files will be stored.\n  # This is a sensible default for uploaders that are meant to be mounted:\n  def store_dir\n    \"uploads/#{model.class.to_s.underscore}/#{mounted_as}/#{model.id}\"\n  end\n\n  process :watermark_movie\n\n  def watermark_movie\n    puts \"ssssssssssssssssssssssssssssssssss\"\n    puts self.file.inspect\n\n    if self.file.path\n      options = {watermark: \"http://felix-hohlwegler.de/holz-soft/include/designs/design13/images/header.png\", resolution: \"640x360\", watermark_filter: { position: \"RT\", padding_x: 10, padding_y: 10 } }\n      self.model.file = FFMPEG::Movie.new(self.file.path).transcode(\"#{root}/#{cache_dir}/#{self.cache_id}/file.mp4\", options)\n    end\n  end\n\n  version :thumb do\n    process thumbnail: [{format: 'png', quality: 10, size: 1200, strip: false, seek: 10, logger: Rails.logger}]\n    def full_filename for_file\n      png_name for_file, version_name\n    end\n  end\n\n  def png_name for_file, version_name\n    %Q{#{version_name}_#{for_file.chomp(File.extname(for_file))}.png}\n  end\n\n\n  # Add a white list of extensions which are allowed to be uploaded.\n  # For images you might use something like this:\n   def extension_white_list\n     %w(mov avi mkv mpeg mpeg2 mp4 3gp)\n   end\nend\n</code></pre>\n"}, {"tags": ["ruby", "openshift", "redhat"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "edited": false, "score": 0, "creation_date": 1462981512, "post_id": 37156575, "comment_id": 61870047, "body": "I have submitted a Pull Request on that repo which will fix the issues that you are having, and have also emailed the author to ask that it be merged."}, {"owner": {"user_type": "does_not_exist", "display_name": "user2879327"}, "edited": false, "score": 0, "creation_date": 1462982653, "post_id": 37156575, "comment_id": 61870869, "body": "The github repo has now been updated via a pull request and should be working."}, {"owner": {"reputation": 583, "user_id": 3634493, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4aa08e3beed0090211f6af378c0b600?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Taylor", "link": "https://stackoverflow.com/users/3634493/simon-taylor"}, "edited": false, "score": 0, "creation_date": 1462990704, "post_id": 37156575, "comment_id": 61875746, "body": "Repulled and get the errors above."}], "owner": {"reputation": 583, "user_id": 3634493, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/c4aa08e3beed0090211f6af378c0b600?s=128&d=identicon&r=PG&f=1", "display_name": "Simon Taylor", "link": "https://stackoverflow.com/users/3634493/simon-taylor"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 29, "favorite_count": 0, "answer_count": 0, "score": 0, "last_activity_date": 1462990542, "creation_date": 1462954001, "last_edit_date": 1462990542, "question_id": 37156575, "link": "https://stackoverflow.com/questions/37156575/openshift-brmsworkshop-not-serving-content", "title": "OpenShift brmsworkshop not serving content", "body": "<p>I am a new user on Openshift and trying to follow the steps to get the <a href=\"http://www.jboss.org/products/brms/get-started/#!project=brms\" rel=\"nofollow\">bmrsworkshop</a> up and running.\nCreated an Openshift account ok.\nClicked the <a href=\"https://github.com/eschabell/openshift-brms-workshop\" rel=\"nofollow\">\"Click to install into Openshift\"</a>.\nDoes not respond when i try to open the app url.\nConnecting to the back end of the app tells me it is trying to serve the directory.</p>\n\n<p>\"[Wed May 11 04:03:47 2016] [error] [client 127.3.121.129] Attempt to serve directory: /var/lib/openshift/5732e5037\n628e1867c00005f/app-root/runtime/repo/public/\"</p>\n\n<p>There is nothing in this directory.</p>\n\n<p>I also tried installing this from the rhc command line as</p>\n\n<p>** NOW USING **</p>\n\n<blockquote>\n  <p><strong>rhc app create brmsworkshop -t ruby-2.0 --from-code git://github.com/eschabell/openshift-brms-workshop.git</strong></p>\n</blockquote>\n\n<p>Now i get </p>\n\n<pre><code>[Wed May 11 14:05:17 2016] [error] [client 127.2.236.129] Attempt to serve  directory: /var/lib/openshift/573373e52d52713baf000053/app-root/runtime/\nrepo/public/\n[11/May/2016:14:05:17 -0400] \"HEAD / HTTP/1.1\" 404 - \"-\" \"-\"\n[Wed May 11 14:05:17 2016] [error] [client 127.2.236.129] Attempt to serve  directory: /var/lib/openshift/573373e52d52713baf000053/app-root/runtime/\nrepo/public/\n- - - [11/May/2016:14:05:17 -0400] \"HEAD / HTTP/1.1\" 404 - \"-\" \"-\"\n(98)Address already in use: make_sock: could not bind to address   127.2.236.129:8080\nno listening sockets available, shutting down\nUnable to open logs\n[Wed May 11 14:07:01 2016] [error] [client 127.2.236.129] Attempt to serve directory: /var/lib/openshift/573373e52d52713baf000053/app-root/runtime /repo/public/\n86.142.3.138 - - [11/May/2016:14:07:01 -0400] \"GET / HTTP/1.1\" 404 295 \"-\"  \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.11; rv:45.0) Gecko/20100101     Firefox/45.0\"\n</code></pre>\n"}, {"tags": ["ruby", "user-interface", "warnings", "gtk3", "glade"], "comments": [{"owner": {"reputation": 3724, "user_id": 2263652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eX05O.jpg?s=128&g=1", "display_name": "B8vrede", "link": "https://stackoverflow.com/users/2263652/b8vrede"}, "edited": false, "score": 0, "creation_date": 1462969778, "post_id": 37156228, "comment_id": 61860679, "body": "Could you post the part of the GtkBuilder XML where this button is created? It seems that it is try to use an old gtk3 function which is deprecated, so based on the XML we can propose a fix."}, {"owner": {"reputation": 11, "user_id": 6219488, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3sR-QJ5wjs/AAAAAAAAAAI/AAAAAAAAAeg/MCLqjV2ymYU/photo.jpg?sz=128", "display_name": "Ali H", "link": "https://stackoverflow.com/users/6219488/ali-h"}, "reply_to_user": {"reputation": 3724, "user_id": 2263652, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/eX05O.jpg?s=128&g=1", "display_name": "B8vrede", "link": "https://stackoverflow.com/users/2263652/b8vrede"}, "edited": false, "score": 0, "creation_date": 1462971998, "post_id": 37156228, "comment_id": 61862611, "body": "Her is the xml code for GtkButton:   <a href=\"http://i.stack.imgur.com/03sUT.jpg\" rel=\"nofollow noreferrer\">i.stack.imgur.com/03sUT.jpg</a>"}], "answers": [{"tags": [], "owner": {"reputation": 7536, "user_id": 771066, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6d207f95c530f2b59f763d7b699f6d81?s=128&d=identicon&r=PG", "display_name": "ebassi", "link": "https://stackoverflow.com/users/771066/ebassi"}, "is_accepted": false, "score": 2, "last_activity_date": 1463065827, "creation_date": 1463065827, "answer_id": 37190948, "question_id": 37156228, "link": "https://stackoverflow.com/questions/37156228/how-do-i-remove-gtk-warnings/37190948#37190948", "title": "How do I remove GTK warnings?", "body": "<p>You should modify the GtkBuilder XML to drop the deprecated <code>GtkButton:use-stock</code> property, and use a <code>GtkImage</code> child widget instead, e.g.:</p>\n\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;object class=\"GtkButton\" id=\"back_button\"&gt;\n  &lt;property name=\"width_request\"&gt;100&lt;/property&gt;\n  &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n  &lt;property name=\"can_focus\"&gt;True&lt;/property&gt;\n  &lt;property name=\"receives_default\"&gt;True&lt;/property&gt;\n  &lt;child&gt;\n    &lt;object class=\"GtkImage\" id=\"back_button_image\"&gt;\n      &lt;property name=\"visible\"&gt;True&lt;/property&gt;\n      &lt;property name=\"can_focus\"&gt;False&lt;/property&gt;\n      &lt;property name=\"icon_name\"&gt;go-previous&lt;/property&gt;\n    &lt;/object&gt;\n  &lt;/child&gt;\n  &lt;signal name=\"clicked\" handler=\"screen_change\" swapped=\"no\"/&gt;\n  &lt;style&gt;\n    &lt;class name=\"image-button\"/&gt;\n  &lt;/style&gt;\n&lt;/object&gt;\n</code></pre>\n"}], "owner": {"reputation": 11, "user_id": 6219488, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-N3sR-QJ5wjs/AAAAAAAAAAI/AAAAAAAAAeg/MCLqjV2ymYU/photo.jpg?sz=128", "display_name": "Ali H", "link": "https://stackoverflow.com/users/6219488/ali-h"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 973, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1463065827, "creation_date": 1462952813, "last_edit_date": 1462972190, "question_id": 37156228, "link": "https://stackoverflow.com/questions/37156228/how-do-i-remove-gtk-warnings", "title": "How do I remove GTK warnings?", "body": "<p>I'm trying to build a Ruby GUI by using GTK Glade3, but when I'm running my program I get some warnings.</p>\n\n<p>This is the warning:\nC:/Ruby/PATS/lib/ruby/gems/2.0.0/gems/gobject-introspection-3.0.7-x86-mingw32/lib/gobject-introspection/loader.rb: line 551\n   GLib-GObject-WARNING **:The property GtkButton:use-stock is deprecated and shouldn't be used anymore. It will be removed in a future version.</p>\n\n<p>I'm using Win-10.</p>\n\n<p>Anyone can help me how to remove those warnings?</p>\n\n<p><a href=\"http://i.stack.imgur.com/03sUT.jpg\" rel=\"nofollow\">XML code for GtkButton</a></p>\n"}, {"tags": ["ruby-on-rails", "ruby"], "comments": [{"owner": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "edited": false, "score": 1, "creation_date": 1462952861, "post_id": 37156226, "comment_id": 61848947, "body": "Did you try reloading your rails console?"}, {"owner": {"reputation": 4631, "user_id": 1080046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/trbrs.png?s=128&g=1", "display_name": "Eki Eqbal", "link": "https://stackoverflow.com/users/1080046/eki-eqbal"}, "reply_to_user": {"reputation": 2770, "user_id": 1042201, "user_type": "registered", "accept_rate": 33, "profile_image": "https://www.gravatar.com/avatar/ada99cff697111a404292dbeff3d4313?s=128&d=identicon&r=PG", "display_name": "Kumar", "link": "https://stackoverflow.com/users/1042201/kumar"}, "edited": false, "score": 0, "creation_date": 1462953986, "post_id": 37156226, "comment_id": 61849611, "body": "@KumarAbinash yes I did and still not working :("}], "answers": [{"comments": [{"owner": {"reputation": 4631, "user_id": 1080046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/trbrs.png?s=128&g=1", "display_name": "Eki Eqbal", "link": "https://stackoverflow.com/users/1080046/eki-eqbal"}, "edited": false, "score": 1, "creation_date": 1462955921, "post_id": 37157085, "comment_id": 61850850, "body": "This is a good point, however this wont solve my problem. The thing is that I want to specify that <code>Foo</code> is related to Services and <i>NOT</i> any Foo. Imagine we are talking about common class like <code>User</code>. I want to say that I&#39;m interested of <code>Service::User</code> but not <code>User</code> the model. Is there anyway of doing that?"}, {"owner": {"reputation": 772, "user_id": 1458227, "user_type": "registered", "accept_rate": 67, "profile_image": "https://i.stack.imgur.com/yxUI0.png?s=128&g=1", "display_name": "NamNamNam", "link": "https://stackoverflow.com/users/1458227/namnamnam"}, "edited": false, "score": 2, "creation_date": 1548577859, "post_id": 37157085, "comment_id": 95584950, "body": "Thanks, with &quot;proper file path&quot; and &quot;class defination&quot; it work now (I am using Rails 5.2). it <b>Doesn&#39;t work</b> if I just simply write  <code>config.autoload_paths += Dir[Rails.root.join(&#39;app&#39;, &#39;services&#39;)]</code> OR <code>config.eager_load_paths &lt;&lt; Rails.root.join(&#39;app&#39;, &#39;services&#39;)</code> OR comment out <code>#config.file_watcher = ActiveSupport::EventedFileUpdateChecker</code> OR<code>config.file_watcher = ActiveSupport::FileUpdateChecker</code>."}], "tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": true, "score": 9, "last_activity_date": 1462956270, "last_edit_date": 1462956270, "creation_date": 1462955465, "answer_id": 37157085, "question_id": 37156226, "link": "https://stackoverflow.com/questions/37156226/how-can-i-add-a-services-directory-to-the-load-path-in-rails/37157085#37157085", "title": "How can I add a services directory to the load path in Rails?", "body": "<p>First of all, the code under <code>app</code> folder will be loaded without any config.</p>\n\n<p>I think the problem was the folder structure doesn't match with your class definition.</p>\n\n<p>So this config will work:</p>\n\n<p><strong>app/services/foo/test.rb</strong></p>\n\n<pre><code>module Foo\n  class Test\n  end\nend\n</code></pre>\n\n<p>My clue is, for example we have <code>app/controllers/api/v1/users_controllers.rb</code> and the class constant will be <code>Api::V1::UsersController</code>, not <code>Controllers::Api::V1::UsersController</code></p>\n\n<p><strong>Update</strong></p>\n\n<p>Conventionally, we usually use <code>FooServices</code> instead of <code>Foo</code>, it is clearer, for example:</p>\n\n<p><strong>app/services/foo_services/bar_parser.rb</strong></p>\n\n<pre><code>module FooServices\n  class BarParser\n    # Do stuff\n  end\nend\n</code></pre>\n\n<p>So we understand that every class inside <code>foo_services</code> folder is a service which related to <code>Foo</code></p>\n"}, {"tags": [], "owner": {"reputation": 233, "user_id": 8230632, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/-l_4y0_JijaQ/AAAAAAAAAAI/AAAAAAAAJsQ/xi_0npJP8SA/photo.jpg?sz=128", "display_name": "Adam Ludian", "link": "https://stackoverflow.com/users/8230632/adam-ludian"}, "is_accepted": false, "score": 23, "last_activity_date": 1555241541, "creation_date": 1555241541, "answer_id": 55674786, "question_id": 37156226, "link": "https://stackoverflow.com/questions/37156226/how-can-i-add-a-services-directory-to-the-load-path-in-rails/55674786#55674786", "title": "How can I add a services directory to the load path in Rails?", "body": "<p>After add new dir, reload spring\n<code>spring stop</code></p>\n"}], "owner": {"reputation": 4631, "user_id": 1080046, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/trbrs.png?s=128&g=1", "display_name": "Eki Eqbal", "link": "https://stackoverflow.com/users/1080046/eki-eqbal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 10746, "favorite_count": 1, "accepted_answer_id": 37157085, "answer_count": 2, "score": 10, "last_activity_date": 1555241541, "creation_date": 1462952802, "question_id": 37156226, "link": "https://stackoverflow.com/questions/37156226/how-can-i-add-a-services-directory-to-the-load-path-in-rails", "title": "How can I add a services directory to the load path in Rails?", "body": "<p>In my Rails project, I want to add <code>services</code> directory in <code>app</code> folder and include some service objects. </p>\n\n<p>So let's say I want to add <code>app/services/foo/test.rb</code> which looks like: </p>\n\n<pre><code>module Services\n  module Foo\n    class Test\n\n    end\n  end\nend\n</code></pre>\n\n<p>In my <code>config/application.rb</code> I added: </p>\n\n<pre><code>config.paths.add File.join('app', 'services'), glob: File.join('**', '*.rb')\nconfig.autoload_paths += Dir[Rails.root.join('app', 'services', '*')]\n</code></pre>\n\n<p>However when I try to load the files in console it doesn't work:</p>\n\n<pre><code>\u21d2  rails c\nLoading development environment (Rails 4.1.4)\n[1] pry(main)&gt; Services::Foo::Test\nNameError: uninitialized constant Services\n</code></pre>\n\n<p>Any help how can I solve this issue? </p>\n"}, {"tags": ["ruby", "mechanize", "google-login"], "answers": [{"tags": [], "owner": {"reputation": 3260, "user_id": 1361768, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2cf5ccc5505d141e7b20f1b2cfc8ca38?s=128&d=identicon&r=PG", "display_name": "Majster", "link": "https://stackoverflow.com/users/1361768/majster"}, "is_accepted": true, "score": 1, "last_activity_date": 1463944717, "creation_date": 1463944717, "answer_id": 37378592, "question_id": 37155148, "link": "https://stackoverflow.com/questions/37155148/google-login-with-mechanize-on-ruby/37378592#37378592", "title": "Google login with mechanize on ruby", "body": "<p>I've been digging around a bit more and found out that it's not that simple and I could not login with mechanize in any way.</p>\n\n<p>So I ended up with using <a href=\"https://watir.com\" rel=\"nofollow\">watir</a> which was fairly simple and straightforward. Here's an example:</p>\n\n<pre><code>browser.goto LOGIN_URL\n\nbrowser.text_field(:id, 'Email').set @config.email\nbrowser.button(:id, 'next').click\n\nbrowser.text_field(:id, 'Passwd').wait_until_present\nbrowser.text_field(:id, 'Passwd').set @config.password\nbrowser.button(:id, 'signIn').click\n\n# Here I wait until an element on my target page is visible and then continue\nbrowser.link(:href, '#SOMETHING').wait_until_present\n</code></pre>\n\n<p>Hope it helps.</p>\n"}], "owner": {"reputation": 3260, "user_id": 1361768, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/2cf5ccc5505d141e7b20f1b2cfc8ca38?s=128&d=identicon&r=PG", "display_name": "Majster", "link": "https://stackoverflow.com/users/1361768/majster"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 516, "favorite_count": 0, "accepted_answer_id": 37378592, "answer_count": 1, "score": 1, "last_activity_date": 1463944717, "creation_date": 1462949601, "last_edit_date": 1462995397, "question_id": 37155148, "link": "https://stackoverflow.com/questions/37155148/google-login-with-mechanize-on-ruby", "title": "Google login with mechanize on ruby", "body": "<p>I'm trying to get to <a href=\"https://play.google.com/apps/publish/\" rel=\"nofollow\">google play developer console</a> using ruby. But first I have to login. I'm trying like this:</p>\n\n<pre><code>def try_post(url, body = {}, headers = {})\n  unless @agent #This just creates a new mechanize instance\n    setup\n  end\n\n  puts 'Logging in'\n\n  # Hardcoded for testing purposes\n  @agent.get 'https://accounts.google.com/ServiceLogin?service=androiddeveloper&amp;passive=1209600&amp;continue=https://play.google.com/apps/publish/%23&amp;followup=https://play.google.com/apps/publish/#identifier'\n\n  form = @agent.page.forms.find {|f| f.form_node['id'] == \"gaia_loginform\"}\n\n  unless form\n    raise 'No login form'\n  end\n\n  form.field_with(:id =&gt; \"Email\").value = @config.email\n\n  form.click_button\n  form = @agent.page.forms.find {|f| f.form_node['id'] == \"gaia_loginform\"}\n\n  unless form\n    raise 'No login form'\n  end\n\n  form.field_with(:name =&gt; \"Passwd\").value = @config.password\n\n  form.click_button\n\n  if @agent.page.uri.host != \"play.google.com\"\n    STDERR.puts \"login failed? : uri = \" + @agent.page.uri.to_s\n    raise 'Google login failed'\n  end\n\n  # @agent.post(url, body)\nend\n</code></pre>\n\n<p>However this fails spectacularly. I tried a few other ways (trying to populate <code>Passwd-hidden</code>, finding field by <code>id</code> and so on) but no luck. I think that the password does not get entered since when I try to <code>puts @agent.page.body</code> after the final <code>click_button</code> I see enter password text somewhere in HTML.</p>\n\n<p>What am I doing wrong and how can I fix it?</p>\n"}, {"tags": ["ruby", "dynamic", "metaprogramming"], "comments": [{"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462948999, "post_id": 37154774, "comment_id": 61846562, "body": "&quot;Is not working&quot; is not a good definition. What is the problem? What error messages you got?"}, {"owner": {"reputation": 10324, "user_id": 409617, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fQkEw.jpg?s=128&g=1", "display_name": "Mr. Black", "link": "https://stackoverflow.com/users/409617/mr-black"}, "reply_to_user": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "edited": false, "score": 0, "creation_date": 1462949412, "post_id": 37154774, "comment_id": 61846797, "body": "No errors. When I tried in the <code>irb</code> the command says, still the method is not closed with end.  Why ` is not a good definition` ?"}, {"owner": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 1, "creation_date": 1462949772, "post_id": 37154774, "comment_id": 61847014, "body": "Why is it not a good definition? Because you don&#39;t give any details about error message like a stacktrace or so.  Provide as many (relevant) details as possible so we can easily understand the problem.  Perhaps you can shed some light on WHY you want to implement something like that?"}, {"owner": {"reputation": 3273, "user_id": 5021963, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/t7Qsr.png?s=128&g=1", "display_name": "Ed de Almeida", "link": "https://stackoverflow.com/users/5021963/ed-de-almeida"}, "reply_to_user": {"reputation": 7224, "user_id": 448934, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/TXtux.jpg?s=128&g=1", "display_name": "Pascal", "link": "https://stackoverflow.com/users/448934/pascal"}, "edited": false, "score": 0, "creation_date": 1462949984, "post_id": 37154774, "comment_id": 61847133, "body": "@pascalbetz explained well why it is not a good definition."}, {"owner": {"reputation": 10324, "user_id": 409617, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fQkEw.jpg?s=128&g=1", "display_name": "Mr. Black", "link": "https://stackoverflow.com/users/409617/mr-black"}, "edited": false, "score": 0, "creation_date": 1462950318, "post_id": 37154774, "comment_id": 61847363, "body": "As I said, I haven&#39;t get any errors. I have updated the snap which I tried in <code>irb</code>"}], "answers": [{"comments": [{"owner": {"reputation": 10324, "user_id": 409617, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fQkEw.jpg?s=128&g=1", "display_name": "Mr. Black", "link": "https://stackoverflow.com/users/409617/mr-black"}, "edited": false, "score": 0, "creation_date": 1462951253, "post_id": 37155441, "comment_id": 61847994, "body": "Thanks. It&#39;s working. Can you tell me what is the use of <code>-</code>?"}, {"owner": {"reputation": 209014, "user_id": 125816, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/7f5aa40b1e7a95599c7a19451f88ff3a?s=128&d=identicon&r=PG", "display_name": "Sergio Tulentsev", "link": "https://stackoverflow.com/users/125816/sergio-tulentsev"}, "reply_to_user": {"reputation": 10324, "user_id": 409617, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fQkEw.jpg?s=128&g=1", "display_name": "Mr. Black", "link": "https://stackoverflow.com/users/409617/mr-black"}, "edited": false, "score": 0, "creation_date": 1462952815, "post_id": 37155441, "comment_id": 61848918, "body": "@Mr.Black: it allows some indentation for the closing identifier. <a href=\"http://ruby-doc.org/core-2.2.0/doc/syntax/literals_rdoc.html\" rel=\"nofollow noreferrer\">ruby-doc.org/core-2.2.0/doc/syntax/literals_rdoc.html</a>"}], "tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 4, "last_activity_date": 1462952935, "last_edit_date": 1462952935, "creation_date": 1462950445, "answer_id": 37155441, "question_id": 37154774, "link": "https://stackoverflow.com/questions/37154774/ruby-define-modules-dynamically/37155441#37155441", "title": "ruby- define modules dynamically", "body": "<p><strong><em>NB</em>: I would use the solution provided by Cary, since it\u2019s more idiomatic.</strong></p>\n\n<p>Now let\u2019s answer the question as it stated in OP.</p>\n\n<p>The problem is with <code>heredoc</code></p>\n\n<pre><code>Object.class_eval &lt;&lt;TES\n</code></pre>\n\n<p>is to be closed with <code>TES</code> <em>in the first position</em>. To close as you do, use:</p>\n\n<pre><code>#                   \u21d3 HERE\nObject.class_eval &lt;&lt;-TES\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": true, "score": 13, "last_activity_date": 1462952426, "creation_date": 1462952426, "answer_id": 37156102, "question_id": 37154774, "link": "https://stackoverflow.com/questions/37154774/ruby-define-modules-dynamically/37156102#37156102", "title": "ruby- define modules dynamically", "body": "<pre><code>m = Object.const_set(\"Example1\", Module.new)\n  #=&gt; Example1 \nm.define_singleton_method(\"ex_method\") { 'example1_with' }\n  #=&gt; :ex_method  \n</code></pre>\n\n<p>Let's see:</p>\n\n<pre><code>Example1.is_a? Module\n  #=&gt; true\nExample1.methods.include?(:ex_method)\n  #=&gt; true\nExample1.ex_method\n  #=&gt; \"example1_with\" \n</code></pre>\n"}], "owner": {"reputation": 10324, "user_id": 409617, "user_type": "registered", "accept_rate": 61, "profile_image": "https://i.stack.imgur.com/fQkEw.jpg?s=128&g=1", "display_name": "Mr. Black", "link": "https://stackoverflow.com/users/409617/mr-black"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2544, "favorite_count": 1, "accepted_answer_id": 37156102, "answer_count": 2, "score": 4, "last_activity_date": 1462952935, "creation_date": 1462948569, "last_edit_date": 1462950268, "question_id": 37154774, "link": "https://stackoverflow.com/questions/37154774/ruby-define-modules-dynamically", "title": "ruby- define modules dynamically", "body": "<p>Below the sample modules (n numbers) which I am using in my project with the same method name(s) with different return value (prefix with module name).</p>\n\n<pre><code>module Example1\n def self.ex_method\n   'example1_with_'\n end\nend\n\n\nmodule Example2\n def self.ex_method\n   'example2_with_'\n end\nend\n</code></pre>\n\n<p>I tried to accomplish this using metaprogramming way like #define_method. But, it's not working for me. Is there any way to do it?</p>\n\n<pre><code>array.each do |name|\n  Object.class_eval &lt;&lt;TES\n    module #{name}\n      def self.ex_method\n        \"#{name.downcase}_with_\"\n      end\n    end\n  TES\nend\n</code></pre>\n\n<p><strong>Error snap:</strong> You could see in the last line says that it's not completed. </p>\n\n<p><a href=\"https://i.stack.imgur.com/PkCZd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PkCZd.png\" alt=\"enter image description here\"></a></p>\n"}, {"tags": ["ruby-on-rails", "ruby", "charts", "stacked", "chartkick"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462947659, "post_id": 37154231, "comment_id": 61845834, "body": "What is your question?"}, {"owner": {"reputation": 63, "user_id": 4031333, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V0Wx05AobOw/AAAAAAAAAAI/AAAAAAAAAE0/GIIqvDc-GTI/photo.jpg?sz=128", "display_name": "Kriti Aggarwal", "link": "https://stackoverflow.com/users/4031333/kriti-aggarwal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1463028088, "post_id": 37154231, "comment_id": 61889019, "body": "@mudasobwa, I have changed the problem description."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1463028961, "post_id": 37154231, "comment_id": 61889331, "body": "What do you call data labels? What is written under the x-axis is the key for the value in the hash <code>column_chart</code> accepts as an input."}, {"owner": {"reputation": 63, "user_id": 4031333, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V0Wx05AobOw/AAAAAAAAAAI/AAAAAAAAAE0/GIIqvDc-GTI/photo.jpg?sz=128", "display_name": "Kriti Aggarwal", "link": "https://stackoverflow.com/users/4031333/kriti-aggarwal"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1463033787, "post_id": 37154231, "comment_id": 61891199, "body": "The stacklabels are the data appearing on the stacks. For eg. the numbers shown on the coloured columns in the image"}], "owner": {"reputation": 63, "user_id": 4031333, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-V0Wx05AobOw/AAAAAAAAAAI/AAAAAAAAAE0/GIIqvDc-GTI/photo.jpg?sz=128", "display_name": "Kriti Aggarwal", "link": "https://stackoverflow.com/users/4031333/kriti-aggarwal"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 269, "favorite_count": 1, "answer_count": 0, "score": 0, "last_activity_date": 1463033771, "creation_date": 1462946617, "last_edit_date": 1463033771, "question_id": 37154231, "link": "https://stackoverflow.com/questions/37154231/how-to-give-stacklabels-in-stacked-column-chart-in-rails-using-chartkick", "title": "How to give stacklabels in stacked column chart in rails using chartkick?", "body": "<p><a href=\"https://i.stack.imgur.com/81Akl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/81Akl.png\" alt=\"enter image description here\"></a>I am trying to give data labels to a column chart in rails using <a href=\"https://github.com/ankane/chartkick\" rel=\"nofollow noreferrer\">chartkick</a>. The stacklabels are the data appearing on the stacks. For eg. the numbers shown on the coloured columns</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rails-activerecord"], "answers": [{"comments": [{"owner": {"reputation": 394580, "user_id": 479863, "user_type": "registered", "accept_rate": 75, "profile_image": "https://i.stack.imgur.com/ArUCE.jpg?s=128&g=1", "display_name": "mu is too short", "link": "https://stackoverflow.com/users/479863/mu-is-too-short"}, "edited": false, "score": 0, "creation_date": 1462946198, "post_id": 37153887, "comment_id": 61845190, "body": "<code>find_by</code> return at most one record so the &quot;sort the Posts afterwards&quot; is just a complicated way of raising a NoMethodError. The <code>ORDER BY CASE...</code> approach OTOH should work and work with any RDBMS."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462946541, "post_id": 37153887, "comment_id": 61845327, "body": "<code>ORDER BY CASE</code> might quickly become unusable when there are 20+ dynamic titles. One should either build the <code>order</code> clause dynamically or use <code>Post.where(title: titles).sort_by</code>."}, {"owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "edited": false, "score": 1, "creation_date": 1462947779, "post_id": 37153887, "comment_id": 61845887, "body": "Thanks! I&#39;ll go with the way <code>ORDER BY CASE</code>. To simplify the conditional string I wrote like <code>titles.map.with_index{|title, i| &quot;when &#39;#{title}&#39; then #{i} &quot;}.join</code>."}, {"owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "edited": false, "score": 0, "creation_date": 1462977501, "post_id": 37153887, "comment_id": 61867162, "body": "Oops, didn&#39;t finish my thought on the in-memory option. Corrected."}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 1, "last_activity_date": 1462977447, "last_edit_date": 1462977447, "creation_date": 1462945105, "answer_id": 37153887, "question_id": 37153671, "link": "https://stackoverflow.com/questions/37153671/does-find-by-always-return-a-match-to-the-first-of-an-array-of-conditions-if-pos/37153887#37153887", "title": "Does find_by always return a match to the first of an array of conditions if possible?", "body": "<p>The order of alternatives doesn't matter. <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/FinderMethods.html#method-i-find_by\" rel=\"nofollow\">Per the documentation</a>, <code>find_by</code></p>\n\n<blockquote>\n  <p>Finds the first record matching the specified conditions. There is no implied ordering so if order matters, you should specify it yourself.</p>\n</blockquote>\n\n<p>If you want the posts in a particular order, you'll have to either</p>\n\n<ul>\n<li><p>add an <code>order</code> clause to the query, e.g.</p>\n\n<pre><code>Post.order(\"case title when 'foo' then 0 when 'bar' then 1 when 'foobar' then 2 end\").\nfind_by(title: %w(foo bar foobar))\n</code></pre>\n\n<p>Tested in MySQL; not sure about how widespread that syntax is but at least something similar should be available in any SQL database.</p>\n\n<p>You might need to build the <code>order</code> clause dynamically. From ironsand's solution in the comments:</p>\n\n<pre><code>titles = %w(foo bar foobar)\norder_sql = \"case #{titles.map.with_index { |title, i| \"when '#{title}' then #{i}\" }.join ' ' } end\"\nPost.order(order_sql).find_by(title: titles)\n</code></pre></li>\n<li><p>query all the posts and sort them afterwards</p>\n\n<pre><code>Post.all.sort_by { |post| %w(foo bar foobar).index post.title }.first\n</code></pre>\n\n<p>This will be slow for a large number of posts, so whether it's useful probably depends on whether you can start with something more specific than <code>Post.all</code>.</p></li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 782, "user_id": 2265937, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/6a62134961838eb9d27490b10cc11bd7?s=128&d=identicon&r=PG", "display_name": "Dias", "link": "https://stackoverflow.com/users/2265937/dias"}, "is_accepted": false, "score": 0, "last_activity_date": 1462945256, "creation_date": 1462945256, "answer_id": 37153915, "question_id": 37153671, "link": "https://stackoverflow.com/questions/37153671/does-find-by-always-return-a-match-to-the-first-of-an-array-of-conditions-if-pos/37153915#37153915", "title": "Does find_by always return a match to the first of an array of conditions if possible?", "body": "<p>For this</p>\n\n<pre><code>Post.find_by(title: %w(foo bar foobar))\n</code></pre>\n\n<p>the sql query run as </p>\n\n<pre><code>SELECT  \"posts\".* FROM \"posts\" WHERE \"posts\".\"title\" IN ('foo', 'bar', 'foobar') LIMIT 1\n</code></pre>\n\n<p>the query contains a limit constraint, so you will get only one record eventhough the condition satisfies.</p>\n\n<p>You should use where query to get all recors</p>\n\n<pre><code>Post.where(title: %w(foo bar foobar))\n</code></pre>\n"}], "owner": {"reputation": 11845, "user_id": 1536527, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/Sgr8O.png?s=128&g=1", "display_name": "ironsand", "link": "https://stackoverflow.com/users/1536527/ironsand"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 542, "favorite_count": 0, "accepted_answer_id": 37153887, "answer_count": 2, "score": 4, "last_activity_date": 1462977447, "creation_date": 1462944035, "last_edit_date": 1462945303, "question_id": 37153671, "link": "https://stackoverflow.com/questions/37153671/does-find-by-always-return-a-match-to-the-first-of-an-array-of-conditions-if-pos", "title": "Does find_by always return a match to the first of an array of conditions if possible?", "body": "<p>I want to find a <code>Post</code> model whose <code>title</code> is \"foo\", but, if the post doesn't exist, \"bar\" and then \"foobar\".</p>\n\n<p>For that I wrote this:</p>\n\n<pre><code>Post.find_by(title: %w(foo bar foobar))\n</code></pre>\n\n<p>It seems to be working fine now, but I'm not sure if the <code>find_by</code> method always finds the first value in the array of strings first.</p>\n\n<p>When there are posts whose titles are <code>\"foo\"</code> and <code>\"bar\"</code>, does the code above always return the post with the title <code>\"foo\"</code>?</p>\n"}, {"tags": ["ruby", "bundler", "gem-bundler"], "comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 3, "creation_date": 1462944731, "post_id": 37153218, "comment_id": 61844596, "body": "I wonder who had upvoted this question."}, {"owner": {"reputation": 6589, "user_id": 409820, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/b01ab32f3a9016b9e2ade35f3aeb4023?s=128&d=identicon&r=PG", "display_name": "Chuck van der Linden", "link": "https://stackoverflow.com/users/409820/chuck-van-der-linden"}, "edited": false, "score": 0, "creation_date": 1463165006, "post_id": 37153218, "comment_id": 61965522, "body": "you say &#39;trying to do bundle install&#39;   So please, how exactly are you trying to do that?"}], "answers": [{"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1462944694, "creation_date": 1462944694, "answer_id": 37153794, "question_id": 37153218, "link": "https://stackoverflow.com/questions/37153218/40232-execution-error-e1in-load-cannot-load-such-file-install-loade/37153794#37153794", "title": "40:232: execution error: -e:1:in `load&#39;: cannot load such file -- install (LoadError)", "body": "<p>It is nearly impossible to understand what you are trying to achieve, but the behaviour is clear:</p>\n\n<ol>\n<li>you call ruby script <code>load($0=ARGV.shift)</code> (setting globals makes no impact and omitted for clarity) inline;</li>\n<li>you pass a command line argument <code>install</code> to it;</li>\n<li><code>ARGV.shift</code> extracts the first command line argument (<code>install</code>) and passes it to <code>load</code>;</li>\n<li><code>load</code> fails giving you the error message.</li>\n</ol>\n\n<p>This issue:</p>\n\n<ol>\n<li>has nothing to do with cucumber;</li>\n<li>has nothing to do with RubyMine;</li>\n<li>has nothing to do with required gems.</li>\n</ol>\n"}, {"tags": [], "owner": {"reputation": 1, "user_id": 2961351, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/acc8d2dc1dd9c50ed1d8b3f6c2ff7b46?s=128&d=identicon&r=PG", "display_name": "raorn", "link": "https://stackoverflow.com/users/2961351/raorn"}, "is_accepted": false, "score": 0, "last_activity_date": 1475168559, "creation_date": 1475168559, "answer_id": 39776101, "question_id": 37153218, "link": "https://stackoverflow.com/questions/37153218/40232-execution-error-e1in-load-cannot-load-such-file-install-loade/39776101#39776101", "title": "40:232: execution error: -e:1:in `load&#39;: cannot load such file -- install (LoadError)", "body": "<p>Somewhere in your Gemfile or gemspec you have dependency on a bundler gem that can not be satisfied.  Like:</p>\n\n<pre><code>spec.add_development_dependency 'bundler', '~&gt; 1.10'\n</code></pre>\n\n<p>But you only have bundler 1.13.1 installed.  RubyMine can't handle this situation correctly and you get described error.</p>\n\n<p>Remove or update version specification in your Gemfile (or gemspec).</p>\n"}], "owner": {"reputation": 41, "user_id": 6318296, "user_type": "registered", "accept_rate": 25, "profile_image": "https://www.gravatar.com/avatar/f37956a647879a30981790b43ac2ed70?s=128&d=identicon&r=PG&f=1", "display_name": "Redmoomba", "link": "https://stackoverflow.com/users/6318296/redmoomba"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 256, "favorite_count": 0, "answer_count": 2, "score": 0, "last_activity_date": 1475168559, "creation_date": 1462941445, "last_edit_date": 1463165069, "question_id": 37153218, "link": "https://stackoverflow.com/questions/37153218/40232-execution-error-e1in-load-cannot-load-such-file-install-loade", "title": "40:232: execution error: -e:1:in `load&#39;: cannot load such file -- install (LoadError)", "body": "<p>Trying to setup Cucumber, Watir and RubyMine.</p>\n\n<p>Create a cucumber test and trying to do a bundle install and keep getting the error.</p>\n\n<pre><code>/usr/bin/ruby -e  $stdout.sync=true;$stderr.sync=true;load($0=ARGV.shift) install\n40:232: execution error: -e:1:in `load': cannot load such file -- install (LoadError)\n    from -e:1:in `&lt;main&gt;'\n (1)\n\nProcess finished with exit code 1\n</code></pre>\n\n<p>I do not even know where to look for this issues, is this a RubyMine issue or not required Gem issue?</p>\n\n<p>Ruby 2.3.0</p>\n\n<p>Any help is appreciated!!!</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "postgresql", "ruby-on-rails-4", "activerecord"], "comments": [{"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 2, "creation_date": 1462942549, "post_id": 37153176, "comment_id": 61843832, "body": "All identifiers that are not in double-quote are converted to lower case in PG there for your column name <code>Sku</code> get converted to <code>sku</code> so it gives this issue you can use as <code>UpcCode.where(&#39;&quot;Sku&quot; = ?&#39;,&#39;SKU123&#39;  )</code>"}, {"owner": {"reputation": 2430, "user_id": 1330328, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0AoZO.jpg?s=128&g=1", "display_name": "Olivier De Meulder", "link": "https://stackoverflow.com/users/1330328/olivier-de-meulder"}, "reply_to_user": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "edited": false, "score": 0, "creation_date": 1462942714, "post_id": 37153176, "comment_id": 61843873, "body": "@VishalJAIN That worked. Thank you."}], "answers": [{"tags": [], "owner": {"reputation": 7032, "user_id": 1743174, "user_type": "registered", "accept_rate": 73, "profile_image": "https://www.gravatar.com/avatar/9f871161f754442df697dce1cede77a5?s=128&d=identicon&r=PG&f=1", "display_name": "Dipak Gupta", "link": "https://stackoverflow.com/users/1743174/dipak-gupta"}, "is_accepted": false, "score": 0, "last_activity_date": 1462941410, "creation_date": 1462941410, "answer_id": 37153215, "question_id": 37153176, "link": "https://stackoverflow.com/questions/37153176/wheresku-sku123-vs-where-sku/37153215#37153215", "title": "where(:sku =&gt; &#39;sku123&#39;) vs where (&#39;sku =", "body": "<p>Try Like this :</p>\n\n<pre><code>UpcCode.where(\"'upc_codes'.'Sku' = 'SKU123'\").first\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 1165, "user_id": 143238, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa7d5a8a0a4333e1e741aa41e802fc1?s=128&d=identicon&r=PG", "display_name": "BM5k", "link": "https://stackoverflow.com/users/143238/bm5k"}, "edited": false, "score": 1, "creation_date": 1462945009, "post_id": 37153304, "comment_id": 61844685, "body": "Wish I could upvote this answer twice. Once for the sql injection warning &amp; once for the convention over configuration."}], "tags": [], "owner": {"reputation": 7898, "user_id": 3437900, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/blKgR.jpg?s=128&g=1", "display_name": "illusionist", "link": "https://stackoverflow.com/users/3437900/illusionist"}, "is_accepted": false, "score": 3, "last_activity_date": 1462943163, "last_edit_date": 1462943163, "creation_date": 1462942047, "answer_id": 37153304, "question_id": 37153176, "link": "https://stackoverflow.com/questions/37153176/wheresku-sku123-vs-where-sku/37153304#37153304", "title": "where(:sku =&gt; &#39;sku123&#39;) vs where (&#39;sku =", "body": "<p>Alternatively you can do like</p>\n\n<pre><code>the_sku = 'SKU123'\nUpcCode.where(\"Sku = ?\", the_sku).first\n</code></pre>\n\n<hr>\n\n<p><strong>Update</strong>:</p>\n\n<pre><code>the_sku = 'SKU123'\nUpcCode.where('\"Sku\" = ?', the_sku).first\n</code></pre>\n\n<p><code>PG</code> needs you to wrap case-sensitive column names with <code>double-quotation</code> marks.</p>\n\n<p>The benifit of using <code>?</code> is, it portects you from <code>SQL Injection</code></p>\n\n<p>See <a href=\"http://guides.rubyonrails.org/security.html#sql-injection\" rel=\"nofollow\">http://guides.rubyonrails.org/security.html#sql-injection</a></p>\n\n<hr>\n\n<p><strong>My Suggestion</strong>  </p>\n\n<p>You should follow convention of not having case-sensitive <code>column_names</code>. \nIn <code>Rails</code> we follow community convention because of the following reasons</p>\n\n<ul>\n<li>it makes your code more predictable to future collaborators</li>\n<li>You will get answers in community wiki and SO more quickly and easily; You dont have to wonder for long </li>\n<li><code>convention over configuration</code> is the strongest point we <code>Rails</code> community have.</li>\n<li>...</li>\n</ul>\n"}, {"tags": [], "owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "is_accepted": true, "score": 4, "last_activity_date": 1462942951, "creation_date": 1462942951, "answer_id": 37153474, "question_id": 37153176, "link": "https://stackoverflow.com/questions/37153176/wheresku-sku123-vs-where-sku/37153474#37153474", "title": "where(:sku =&gt; &#39;sku123&#39;) vs where (&#39;sku =", "body": "<p>All identifiers that are not in double-quote are converted to lower case in PG therefor your column name <code>Sku</code> get converted to <code>sku</code> so it gives this issue you can try this way: </p>\n\n<pre><code>UpcCode.where('\"Sku\" = ?','SKU123' )\n</code></pre>\n"}], "owner": {"reputation": 2430, "user_id": 1330328, "user_type": "registered", "accept_rate": 100, "profile_image": "https://i.stack.imgur.com/0AoZO.jpg?s=128&g=1", "display_name": "Olivier De Meulder", "link": "https://stackoverflow.com/users/1330328/olivier-de-meulder"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 225, "favorite_count": 0, "accepted_answer_id": 37153474, "answer_count": 3, "score": 1, "last_activity_date": 1462943163, "creation_date": 1462941145, "question_id": 37153176, "link": "https://stackoverflow.com/questions/37153176/wheresku-sku123-vs-where-sku", "title": "where(:sku =&gt; &#39;sku123&#39;) vs where (&#39;sku =", "body": "<p>I have a strange situation. Here is my model:</p>\n\n<pre><code>UpcCode\n</code></pre>\n\n<blockquote>\n  <p>=> UpcCode(id: integer, Upc: string, Sku: string, Active: boolean,\n  created_at: datetime, updated_at: datetime)</p>\n</blockquote>\n\n<p>As you can see, Sku is one of my columns.</p>\n\n<p>When I type in IRC:</p>\n\n<pre><code>UpcCode.where(:Sku =&gt; 'SKU123').first\n</code></pre>\n\n<p>I get expected result:</p>\n\n<blockquote>\n  <p>UpcCode Load (0.9ms)  SELECT  \"upc_codes\".* FROM \"upc_codes\" WHERE\n  \"upc_codes\".\"Sku\" = $1  ORDER BY \"upc_codes\".\"id\" ASC LIMIT 1 \n  [[\"Sku\", \"GC-115-42\"]]  => #<code>&lt;UpcCode id: 95, Upc: \"70163098XXXX\", Sku:\n  \"SKU123\", Active: true, created_at: \"2016-05-11 03:12:11\",\n  updated_at: \"2016-05-11 03:12:11\"&gt;</code></p>\n</blockquote>\n\n<p>But when I try this using the following syntax:</p>\n\n<pre><code>UpcCode.where(\"Sku = 'SKU123'\").first\n</code></pre>\n\n<p>or</p>\n\n<pre><code>UpcCode.where('Sku = \"GC-115-42\"').first\n</code></pre>\n\n<p>I am getting the following error as if the Sku column does not exist.</p>\n\n<blockquote>\n  <p>UpcCode Load (5.2ms)  SELECT  \"upc_codes\".* FROM \"upc_codes\" WHERE\n  (Sku = \"GC-115-42\")  ORDER BY \"upc_codes\".\"id\" ASC LIMIT 1\n  ActiveRecord::StatementInvalid: PG::UndefinedColumn: ERROR:  column\n  \"sku\" does not exist</p>\n</blockquote>\n\n<p>I need to be able to use the second syntax because I need to manipulate the results. i.e. case insensitive comparison.</p>\n"}, {"tags": ["arrays", "ruby", "hash"], "comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 0, "creation_date": 1462957109, "post_id": 37153150, "comment_id": 61851640, "body": "If you do this frequently, you could build a lookup table that maps (stripped) phone numbers to their respective entries."}], "answers": [{"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462945777, "post_id": 37153269, "comment_id": 61845015, "body": "This code throws an exception <code>NoMethodError: undefined method \u2018in?\u2019 for &quot;8005523209&quot;:String</code>."}], "tags": [], "owner": {"reputation": 5958, "user_id": 1789479, "user_type": "registered", "accept_rate": 87, "profile_image": "https://i.stack.imgur.com/WlgWK.jpg?s=128&g=1", "display_name": "Hieu Pham", "link": "https://stackoverflow.com/users/1789479/hieu-pham"}, "is_accepted": false, "score": 0, "last_activity_date": 1462948325, "last_edit_date": 1462948325, "creation_date": 1462941782, "answer_id": 37153269, "question_id": 37153150, "link": "https://stackoverflow.com/questions/37153150/searching-array-of-hashes-to-see-if-specific-elements-in-a-given-hash-match-any/37153269#37153269", "title": "Searching array of hashes to see if specific elements in a given hash match any string within another array in Ruby", "body": "<p>Let try this:</p>\n\n<pre><code>cons.select{ |con| pait_nums.include?(con['Phone1'].gsub(/\\D/, '')) || pait_nums.include?(con['Phone2'].gsub(/\\D/, '')) }\n</code></pre>\n\n<p>Or make it shorter</p>\n\n<pre><code>phone_keys = %w( Phone1 Phone2 )\ncons.select{ |con| con.slice(*phone_keys).values.any?{ |val| pait_nums.include?(val.gsub(/\\D/, '')) } }\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462945212, "post_id": 37153445, "comment_id": 61844775, "body": "There is no such method <code>Array#present?</code> in ruby."}, {"owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "reply_to_user": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462945301, "post_id": 37153445, "comment_id": 61844820, "body": "@mudasobwa have you check complete logic what i have done in that?? i have take intersection of both array and if any element found inside it then it means given value is present inside it."}, {"owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "edited": false, "score": 0, "creation_date": 1462945422, "post_id": 37153445, "comment_id": 61844878, "body": "I don\u2019t need to check any logic: you use methods from external libraries without any notice of that. Your code will just throw <code>NoMethodError: undefined method \u2018present?\u2019 for [...]:Array</code> exception."}], "tags": [], "owner": {"reputation": 1835, "user_id": 4985645, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/NMblv.png?s=128&g=1", "display_name": "Vishal JAIN", "link": "https://stackoverflow.com/users/4985645/vishal-jain"}, "is_accepted": false, "score": 0, "last_activity_date": 1462945539, "last_edit_date": 1462945539, "creation_date": 1462942777, "answer_id": 37153445, "question_id": 37153150, "link": "https://stackoverflow.com/questions/37153150/searching-array-of-hashes-to-see-if-specific-elements-in-a-given-hash-match-any/37153445#37153445", "title": "Searching array of hashes to see if specific elements in a given hash match any string within another array in Ruby", "body": "<p>If you are using rails then you can use <code>present</code>in ruby you can use <code>any?</code></p>\n\n<pre><code>cons.select{ |con| ([con['Phone1'].gsub(/\\D/, ''), con['Phone2'].gsub(/\\D/, '')] &amp; pait_nums).present?}\n</code></pre>\n\n<p>In ruby you can use <code>any?</code> as</p>\n\n<pre><code> cons.select{ |con| ([con['Phone1'].gsub(/\\D/, ''), con['Phone2'].gsub(/\\D/, '')] &amp; pait_nums).any?}\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 105308, "user_id": 2035262, "user_type": "registered", "accept_rate": 78, "profile_image": "https://i.stack.imgur.com/pPtKA.jpg?s=128&g=1", "display_name": "Aleksei Matiushkin", "link": "https://stackoverflow.com/users/2035262/aleksei-matiushkin"}, "is_accepted": false, "score": 0, "last_activity_date": 1462945603, "last_edit_date": 1462945603, "creation_date": 1462945040, "answer_id": 37153863, "question_id": 37153150, "link": "https://stackoverflow.com/questions/37153150/searching-array-of-hashes-to-see-if-specific-elements-in-a-given-hash-match-any/37153863#37153863", "title": "Searching array of hashes to see if specific elements in a given hash match any string within another array in Ruby", "body": "<pre><code>cons.select do |c|\n  c.select do |k, _|\n    k =~ /\\APhone\\d\\z/                     # select Phone* keys\n  end.values                               # get values\n     .any? do |p|\n       pait_nums.include? p.gsub(/\\D/, '') # get only matches\n     end\nend\n</code></pre>\n\n<p>or, for any arbitrary set of keys to check:</p>\n\n<pre><code>keys = %w|Phone1 Phone2|\ncons.select do |c|\n  c.select do |k, _|\n    keys.include? k                        # select Phone* keys\n  end.values.any? do |p|\n    pait_nums.include? p.gsub(/\\D/, '')    # get only matches\n  end\nend\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 95812, "user_id": 477037, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/dde78fe4cdc16eb855d68ff7a8cd017d?s=128&d=identicon&r=PG", "display_name": "Stefan", "link": "https://stackoverflow.com/users/477037/stefan"}, "edited": false, "score": 1, "creation_date": 1462958723, "post_id": 37154869, "comment_id": 61852733, "body": "Nice one! You could also use <code>any?</code> with a block, e.g. <code>cons.find { |h| h.values_at(*phones).any? { |s| pait_nums.include?(s.gsub(&#47;\\D&#47;, &#39;&#39;)) } }</code>"}], "tags": [], "owner": {"reputation": 93653, "user_id": 256970, "user_type": "registered", "accept_rate": 86, "profile_image": "https://www.gravatar.com/avatar/87b71ecb90417c88f7873a2f0f9492e9?s=128&d=identicon&r=PG", "display_name": "Cary Swoveland", "link": "https://stackoverflow.com/users/256970/cary-swoveland"}, "is_accepted": false, "score": 2, "last_activity_date": 1462949422, "last_edit_date": 1462949422, "creation_date": 1462948833, "answer_id": 37154869, "question_id": 37153150, "link": "https://stackoverflow.com/questions/37153150/searching-array-of-hashes-to-see-if-specific-elements-in-a-given-hash-match-any/37154869#37154869", "title": "Searching array of hashes to see if specific elements in a given hash match any string within another array in Ruby", "body": "<pre><code>phones = [\"Phone1\", \"Phone2\"]\ncons.find { |h| (h.values_at(*phones).map { |s| s.gsub(/\\D/,\"\") } &amp; pait_nums).any? }\n  #=&gt; {\"FirstName\"=&gt;\"Bill\",\n  #    \"LastName\"=&gt;\"Wingy\",\n  #    \"Phone1\"=&gt;\"(800) 552-3209\",\n  #    \"Phone2\"=&gt;\"828 283-1134\"}\n</code></pre>\n\n<p>The steps:</p>\n\n<p><code>find</code> initially passes the first value of <code>cons</code> to the block and sets the block variable <code>h</code> to that value:</p>\n\n<pre><code>h = { \"FirstName\" =&gt; \"Bill\",\n      \"LastName\" =&gt; \"Wingy\",\n      \"Phone1\" =&gt; \"(800) 552-3209\",\n      \"Phone2\" =&gt; \"828 283-1134\" }\n</code></pre>\n\n<p>The following block calculations are then performed:</p>\n\n<pre><code>a = h.values_at(*phones)\n  #=&gt; [\"(800) 552-3209\", \"828 283-1134\"]\nb = a.map { |s| s.gsub(/\\D/,\"\") }\n  #=&gt; [\"8005523209\", \"8282831134\"]\nc = b &amp; pait_nums\n  #=&gt; [\"8005523209\", \"8282831134\"] &amp; [\"8282831134\", \"8282831132344\"]\n  #=&gt; [\"8282831134\"]\nc.any?\n  #=&gt; true\n</code></pre>\n\n<p>As <code>c</code> is <code>true</code>, <code>find</code> returns <code>h</code>. Were <code>c</code> <code>false</code>, the second hash would be sent to the block.</p>\n"}], "owner": {"reputation": 117, "user_id": 5076606, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/b1cb011d17b73674144d10e5b7d2da0e?s=128&d=identicon&r=PG&f=1", "display_name": "JimboTwice", "link": "https://stackoverflow.com/users/5076606/jimbotwice"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 43, "favorite_count": 0, "answer_count": 4, "score": 2, "last_activity_date": 1462949422, "creation_date": 1462940964, "last_edit_date": 1462942860, "question_id": 37153150, "link": "https://stackoverflow.com/questions/37153150/searching-array-of-hashes-to-see-if-specific-elements-in-a-given-hash-match-any", "title": "Searching array of hashes to see if specific elements in a given hash match any string within another array in Ruby", "body": "<p>Given the following code: </p>\n\n<pre><code>cons = [\n  { \"FirstName\" =&gt; \"Bill\",\n    \"LastName\" =&gt; \"Wingy\",\n    \"Phone1\" =&gt; \"(800) 552-3209\",\n    \"Phone2\" =&gt; \"828 283-1134\" \n  },\n  { \"FirstName\" =&gt; \"Ted\",\n    \"LastName\" =&gt; \"Dimble\",\n    \"Phone1\" =&gt; \"(823) 813-2834\",\n    \"Phone2\" =&gt; \"8823 232-2342\"\n  }\n]\n\npait_nums = [ \"8282831134\", \"8282831132344\" ]\n</code></pre>\n\n<p>How do you search the <code>cons</code> array to return the hash where either <code>\"Phone1\".gsub(/\\D/, '')</code> or <code>\"Phone2\".gsub(/\\D/, '')</code>matches any string within the <code>pait_nums</code> array?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "dry", "link-to"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463168213, "post_id": 37152853, "comment_id": 61967152, "body": "Did you get the answer that worked for you?"}], "answers": [{"comments": [{"owner": {"reputation": 13, "user_id": 5645678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/214bda6c4cbf1643cb68dbc838bd3213?s=128&d=identicon&r=PG&f=1", "display_name": "bk_200", "link": "https://stackoverflow.com/users/5645678/bk-200"}, "edited": false, "score": 0, "creation_date": 1463323451, "post_id": 37152971, "comment_id": 62008271, "body": "Sorry for the delay getting back to you, and thanks for the answer. However, do you mean that the User class should be  defined with a <code>has_many...</code>, not <code>belongs_to</code>?  The Detail belongs to the User in my case.   Also, I did try to use this method, but it wasn&#39;t working for me.  And I suppose that I didn&#39;t share a complication about what I&#39;m looking to do, that might make this simplified code work.    The User class can have two different relationships to the details.  I&#39;ll try to improve my question to explain this more."}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "reply_to_user": {"reputation": 13, "user_id": 5645678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/214bda6c4cbf1643cb68dbc838bd3213?s=128&d=identicon&r=PG&f=1", "display_name": "bk_200", "link": "https://stackoverflow.com/users/5645678/bk-200"}, "edited": false, "score": 0, "creation_date": 1463344239, "post_id": 37152971, "comment_id": 62015592, "body": "Good catch.  Must have been sleep deprivation that caused that.  I&#39;ve updated my answer to describe more how the mechanism works, and demystify some of the magic in the relationships between models, Rails routes, route helpers, and how <code>link_to</code> brings them all together."}], "tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": true, "score": 2, "last_activity_date": 1489622061, "last_edit_date": 1489622061, "creation_date": 1462939833, "answer_id": 37152971, "question_id": 37152853, "link": "https://stackoverflow.com/questions/37152853/how-can-link-to-a-master-object-look-cleaner-in-the-view/37152971#37152971", "title": "How can link_to a master object look cleaner in the view?", "body": "<p>If your relationships are set up correctly, you should be able to do something like this:</p>\n\n<pre><code>%= link_to detail.user.name, detail.user %&gt;&lt;/td&gt;\n</code></pre>\n\n<p>You want to avoid doing any ActiveRecord queries in the view if you can possibly help it.  If you do have to do queries in the view, make sure that you're not duplicating them.  Queries in the view tend to cause the N+1 problem, and duplicating them can cause that to become 2*(N+1), or worse.</p>\n\n<p>Based on the new relationships shown in your question, you should be able to use this in place of your view code:</p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Name:&lt;/strong&gt;\n  &lt;%= @project.name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Owner:&lt;/strong&gt;\n  &lt;%= link_to @project.owner.name, @project.owner) %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Sponsor:&lt;/strong&gt;\n  &lt;%= link_to @project.sponsor.name, @project.sponsor) %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>Simply put, the Rails magic knows how to traverse the relationships to retrieve the name from each of the sponsor and owner model objects.  Likewise, <code>link_to</code> knows how to automagically retrieve the path information from the sponsor and owner (given as the second parameter to <code>link_to</code>) to create the right link for each object.  Note that this works when you use the model object (e.g. \"owner\"), instead of object_id (e.g. \"owner_id\").</p>\n\n<p>The <a href=\"http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to\" rel=\"nofollow noreferrer\">link_to API documentation</a> gives some deeper guidance on how to use <code>link_to</code> with your model data.  Example #2 demonstrates the exact technique that this answer uses; however, we choose to provide the link text directly from the ActiveRecord model (as the owner or sponsor name), rather than hardcoding it as is done in the example.</p>\n\n<p>You can also be more explicit in which route you want to link to, by using the route helpers to define the path that you want to use.  Let's make a similar view page that shows how to link to the edit pages for the owner and sponsors of the project:</p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Name:&lt;/strong&gt;\n  &lt;%= @project.name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Owner:&lt;/strong&gt;\n  &lt;%= link_to @project.owner.name, edit_owner_path(@project.owner) %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Sponsor:&lt;/strong&gt;\n  &lt;%= link_to @project.sponsor.name, edit_owner_path(@project.sponsor) %&gt;\n&lt;/p&gt;\n</code></pre>\n\n<p>You can use any of the route helpers that Rails creates for you to navigate to any of your models' actions.  To find out which route helpers are available for your project, you can run <code>rake routes</code> from the command line, and see results like this:</p>\n\n<pre><code>      Prefix Verb   URI Pattern                  Controller#Action\n    projects GET    /projects(.:format)          projects#index\n             POST   /projects(.:format)          projects#create\n new_project GET    /projects/new(.:format)      projects#new\nedit_project GET    /projects/:id/edit(.:format) projects#edit\n     project GET    /projects/:id(.:format)      projects#show\n             PATCH  /projects/:id(.:format)      projects#update\n             PUT    /projects/:id(.:format)      projects#update\n             DELETE /projects/:id(.:format)      projects#destroy\n       users GET    /users(.:format)             users#index\n             POST   /users(.:format)             users#create\n    new_user GET    /users/new(.:format)         users#new\n   edit_user GET    /users/:id/edit(.:format)    users#edit\n        user GET    /users/:id(.:format)         users#show\n             PATCH  /users/:id(.:format)         users#update\n             PUT    /users/:id(.:format)         users#update\n             DELETE /users/:id(.:format)         users#destroy\n</code></pre>\n\n<p>This is the standard set of routes defined by having these definitions in your <code>config/routes.rb</code>:</p>\n\n<pre><code>resources :project\nresources :user\n</code></pre>\n\n<p>In the output from <code>rake routes</code>, you see the route helpers shown in the \"Prefix\" column at the left.  These are the identifiers that you'll use to supply to <code>link_to</code> for explicit page links.  These are called \"prefix\", because they're used with either \"path\" or \"url\" to generate a relative path or absolute url, respectively.  Consider these uses:</p>\n\n<pre><code>user_path(@project.owner)      # ==&gt; \"/user/9\"\nuser_url(@project.sponsor)     # ==&gt; \"http://example.com/user/23\"\nnew_user_path                  # ==&gt; \"/user/new\"\nnew_user_url                   # ==&gt; \"http://example.com/user/new\"\n</code></pre>\n\n<p>Note that with some of these route helpers have to specify an argument, and some you don't.  You can read this from the <code>rake routes</code> output as arguments are supplied in the order of appearance of replacement parameters (e.g. :id), excluding the optional replacement parameters (e.g. (.:format)).  The standard set of routes for a resource give you these route helpers that you can use:</p>\n\n<pre><code>users_path                     # ==&gt; \"/user\"\nnew_user_path                  # ==&gt; \"/user/new\"\nuser_path(@user)               # ==&gt; \"/user/139\"\nedit_user_path(@user)          # ==&gt; \"/user/139/edit\"\n</code></pre>\n\n<p>The other default routes aren't typically used directly in your project, so you wouldn't refer to them directly.</p>\n\n<p>So, any time that you have a model object, you can create any of the links that you want to use, either using the implicit path approach:</p>\n\n<pre><code>&lt;%= link_to @user.name, @user %&gt;\n</code></pre>\n\n<p>or the path helpers approach:</p>\n\n<pre><code>&lt;%= link_to @user.name, user_path(@user) %&gt;\n</code></pre>\n\n<p>Both of these should produce identical links for user #69, \"Scott Tenorman\":</p>\n\n<pre><code>&lt;a href=\"/user/69\"&gt;Scott Tenorman&lt;/a&gt;\n</code></pre>\n\n<p>And that's all there is to the magic.  It's not really magic at all, but a series of smart, carefully crafted conventions that work together to make it easy to do easy things.  Once you know how they work.  Happy linking!</p>\n"}], "owner": {"reputation": 13, "user_id": 5645678, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/214bda6c4cbf1643cb68dbc838bd3213?s=128&d=identicon&r=PG&f=1", "display_name": "bk_200", "link": "https://stackoverflow.com/users/5645678/bk-200"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 84, "favorite_count": 0, "accepted_answer_id": 37152971, "answer_count": 1, "score": 1, "last_activity_date": 1489622061, "creation_date": 1462939076, "last_edit_date": 1495539991, "question_id": 37152853, "link": "https://stackoverflow.com/questions/37152853/how-can-link-to-a-master-object-look-cleaner-in-the-view", "title": "How can link_to a master object look cleaner in the view?", "body": "<p>I have User model, that has many Details.</p>\n\n<p>In the Detail list(index) page (./details) have a link_to back the master table, or the User that owns the details  (./user/1).</p>\n\n<p>Basically, I'm wondering if there is a way to make the syntax of the link_to method, look any cleaner with ruby or rails conventions that I'm not aware of.</p>\n\n<pre><code>&lt;% @details.each do |detail| %&gt;\n  &lt;tr&gt;\n    &lt;td&gt;&lt;%= detail.name %&gt;&lt;/td&gt;\n    &lt;td&gt;&lt;%= link_to User.find_by_id(detail.foreign_key_id).name, \\\n            User.find_by_id(detail.foreign_key_id) %&gt;&lt;/td&gt;\n    ...\n</code></pre>\n\n<p>This works fine, but I seem to recall seeing a cleaner syntax at some point.</p>\n\n<p>[EDIT]\nAlso in this case, I have two ways that the User can be associated to the Detail.   </p>\n\n<p>The data model I'm thinking of is similar to a <em>Project</em>, so I'll present the problem in that way.  So a user can be both an <strong>owner</strong> of the project, and/or, a <strong>sponsor</strong> of the project.  </p>\n\n<p>So, the User class would have the following....</p>\n\n<pre><code> class User &lt; ActiveRecord::Base\n   has_many :owned_projects, class_name: \"Project\", foreign_key: :owner_id\n   has_many :sponsored_projects, class_name: \"Project\", foreign_key: :sponsor_id\n end\n</code></pre>\n\n<p>Then the Project class would have this in it's definition</p>\n\n<pre><code>class Project &lt; ActiveRecord::Base\n  belongs_to :owner,    :foreign_key =&gt; :owner_id,    :class_name =&gt; \"User\"\n  belongs_to :sponsor,  :foreign_key =&gt; :sponsor_id,  :class_name =&gt; \"User\"\nend\n</code></pre>\n\n<p>The project table has both an <strong>owner_id</strong> field and a <strong>sponsor_id</strong> field, so the <em>User</em> class can be linked twice to a <em>Project</em> table.</p>\n\n<p>Given all of that, back to question at hand, I don't see how to use a cleaner syntax as described by <a href=\"https://stackoverflow.com/users/6263819/michael-gaskill\">@Michael Gaskill</a></p>\n\n<p>If it were to look like that, would it be like this?<code>%= link_to @project.sponsor.name, project.sponsor_id %&gt;&lt;/td&gt;</code></p>\n\n<p>Rails <em>magic</em> doesn't seem to be figuring that out, or I have it configured wrong.  </p>\n\n<p>I have tested following out, and this will work, as I mentioned before, but I am trying to make it sure there's no cleaner way.</p>\n\n<p>(the goal is to see  a page about the detail, or <em>Project</em> in this example, and see both category of <em>User</em> that is associated to it, and have their names be clickable links to their <em>show</em> page profiles)</p>\n\n<pre><code>&lt;p&gt;\n  &lt;strong&gt;Name:&lt;/strong&gt;\n  &lt;%= @project.name %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Owner:&lt;/strong&gt;\n  &lt;%= link_to User.find_by_id(@project.owner_id).name, User.find_by_id(@project.owner_id) %&gt;\n&lt;/p&gt;\n\n&lt;p&gt;\n  &lt;strong&gt;Sponsor:&lt;/strong&gt;\n  &lt;%= link_to User.find_by_id(@project.sponsor_id).name, User.find_by_id(@project.sponsor_id) %&gt;\n&lt;/p&gt;\n</code></pre>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 449, "user_id": 4382091, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8214a911be30c7c82da2eedd06095211?s=128&d=identicon&r=PG&f=1", "display_name": "YaphatS", "link": "https://stackoverflow.com/users/4382091/yaphats"}, "edited": false, "score": 1, "creation_date": 1462936455, "post_id": 37152467, "comment_id": 61842370, "body": "OMG I simply remove gem &#39;guard-minitest&#39; and it works"}, {"owner": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "edited": false, "score": 0, "creation_date": 1462936666, "post_id": 37152467, "comment_id": 61842406, "body": "@JoelBrewer so why does removing guard-spring works fine? I am following same tutorial, but did not face any such issue."}, {"owner": {"reputation": 1512, "user_id": 2920617, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7oqRC.jpg?s=128&g=1", "display_name": "Joel Brewer", "link": "https://stackoverflow.com/users/2920617/joel-brewer"}, "reply_to_user": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "edited": false, "score": 0, "creation_date": 1462936814, "post_id": 37152467, "comment_id": 61842445, "body": "@Nirupa &quot;guard-spring is not updated to work with newer versions of Guard, but it&#39;s not even necessary anymore, since guard-rspec supports spring.&quot;"}, {"owner": {"reputation": 449, "user_id": 4382091, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8214a911be30c7c82da2eedd06095211?s=128&d=identicon&r=PG&f=1", "display_name": "YaphatS", "link": "https://stackoverflow.com/users/4382091/yaphats"}, "reply_to_user": {"reputation": 767, "user_id": 6027959, "user_type": "registered", "accept_rate": 80, "profile_image": "https://i.stack.imgur.com/O87Wy.jpg?s=128&g=1", "display_name": "Nirupa", "link": "https://stackoverflow.com/users/6027959/nirupa"}, "edited": false, "score": 0, "creation_date": 1462974416, "post_id": 37152467, "comment_id": 61864645, "body": "@Nirupa you also follow that tutorial? Weird...why did I face such issue"}], "tags": [], "owner": {"reputation": 1512, "user_id": 2920617, "user_type": "registered", "accept_rate": 76, "profile_image": "https://i.stack.imgur.com/7oqRC.jpg?s=128&g=1", "display_name": "Joel Brewer", "link": "https://stackoverflow.com/users/2920617/joel-brewer"}, "is_accepted": false, "score": 1, "last_activity_date": 1462936228, "creation_date": 1462936228, "answer_id": 37152467, "question_id": 37152374, "link": "https://stackoverflow.com/questions/37152374/cannot-run-rake-test-rails/37152467#37152467", "title": "Cannot run rake test Rails", "body": "<p>Looks like this might work:</p>\n\n<blockquote>\n  <p>1) Just remove guard-spring from your Gemfile and Guardfile. </p>\n  \n  <p>2) Then upgrade guard-rspec (run bundle update guard-rspec) </p>\n  \n  <p>3) Setup\n  guard-rspec to use spring (see this:\n  <a href=\"https://github.com/guard/guard-rspec#options\" rel=\"nofollow\">https://github.com/guard/guard-rspec#options</a>)</p>\n</blockquote>\n\n<p>From: <a href=\"https://github.com/guard/guard/issues/734\" rel=\"nofollow\">https://github.com/guard/guard/issues/734</a></p>\n"}, {"tags": [], "owner": {"reputation": 26, "user_id": 6379461, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/EmZ8c.png?s=128&g=1", "display_name": "nlmiv", "link": "https://stackoverflow.com/users/6379461/nlmiv"}, "is_accepted": true, "score": 1, "last_activity_date": 1464155950, "creation_date": 1464155950, "answer_id": 37428884, "question_id": 37152374, "link": "https://stackoverflow.com/questions/37152374/cannot-run-rake-test-rails/37428884#37428884", "title": "Cannot run rake test Rails", "body": "<p><a href=\"https://github.com/guard/guard-minitest\" rel=\"nofollow\">https://github.com/guard/guard-minitest</a></p>\n\n<p>Add the guard gem to your gem file.<br>\ngem 'guard'</p>\n"}], "owner": {"reputation": 449, "user_id": 4382091, "user_type": "registered", "accept_rate": 79, "profile_image": "https://www.gravatar.com/avatar/8214a911be30c7c82da2eedd06095211?s=128&d=identicon&r=PG&f=1", "display_name": "YaphatS", "link": "https://stackoverflow.com/users/4382091/yaphats"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 367, "favorite_count": 0, "accepted_answer_id": 37428884, "answer_count": 2, "score": 3, "last_activity_date": 1464155950, "creation_date": 1462935620, "last_edit_date": 1462935969, "question_id": 37152374, "link": "https://stackoverflow.com/questions/37152374/cannot-run-rake-test-rails", "title": "Cannot run rake test Rails", "body": "<p>I'm following Rails Tutorials by Michael Hartl (<a href=\"https://www.railstutorial.org/book/static_pages\" rel=\"nofollow\">chapter 3</a>). However, when I edit the <strong>Gemfile</strong> like he did and then run rake test, rails suggested me to put this line : <code>config.web_console.development_only = false</code> \nin the <strong>application config</strong> file. I did that and run <code>bundle exec rake test</code> again, here's the error message:</p>\n\n<pre><code>/home/ys/workspace/sample_app/db/schema.rb doesn't exist yet. Run `rake db:migrate` to create it, then try again. If you do not intend to use a database, you should instead alter /home/ys/workspace/sample_app/config/application.rb to limit the frameworks that will be loaded.\n/home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require': cannot load such file -- guard (LoadError)\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `block in require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/guard-minitest-2.4.4/lib/minitest/guard_minitest_plugin.rb:4:in `&lt;top (required)&gt;'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `block in require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:91:in `block in load_plugins'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:85:in `each'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:85:in `load_plugins'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:114:in `run'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:56:in `block in autorun'\n</code></pre>\n\n<p>I then proceeded to <code>rake db:migrate</code>, then run rake test again:</p>\n\n<pre><code>Running via Spring preloader in process 15638\n/home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require': cannot load such file -- guard (LoadError)\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `block in require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/guard-minitest-2.4.4/lib/minitest/guard_minitest_plugin.rb:4:in `&lt;top (required)&gt;'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `block in require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:240:in `load_dependency'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/activesupport-4.2.6/lib/active_support/dependencies.rb:274:in `require'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:91:in `block in load_plugins'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:85:in `each'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:85:in `load_plugins'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:114:in `run'\n    from /home/ys/.rbenv/versions/2.3.1/lib/ruby/gems/2.3.0/gems/minitest-5.8.4/lib/minitest.rb:56:in `block in autorun'\n</code></pre>\n\n<p>All I can guess is that there is something wrong with Ruby because I upgraded from 2.3.0 to 2.3.1 the other day as rails console complained about buggy, old version when I run <code>bundle install</code>.\nSo, How to fix this?</p>\n"}, {"tags": ["ruby", "algorithm", "primes"], "comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1462935819, "post_id": 37152273, "comment_id": 61842216, "body": "Unfortunately, I cannot access that page without an account. What value is actually being tested in the two tests that fail? On a general note, using <code>abs</code> seems suspect (your program would say -3 is prime, but <a href=\"https://math.stackexchange.com/questions/1002459/do-we-have-negative-prime-numbers\">negative numbers are (probably) not prime</a>), your algorithm is horribly inefficient as it should only go up to sqrt(num), etc."}], "answers": [{"tags": [], "owner": {"reputation": 3090, "user_id": 3804420, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/7143c03b5b0e42cb070947af0d60ebd1?s=128&d=identicon&r=PG", "display_name": "gmuraleekrishna", "link": "https://stackoverflow.com/users/3804420/gmuraleekrishna"}, "is_accepted": false, "score": 0, "last_activity_date": 1462940141, "last_edit_date": 1495540790, "creation_date": 1462935692, "answer_id": 37152383, "question_id": 37152273, "link": "https://stackoverflow.com/questions/37152273/test-spec-failing-with-my-prime-number-checker/37152383#37152383", "title": "Test spec failing with my prime number checker", "body": "<p>There are 2 problems in your code </p>\n\n<ol>\n<li>Why are you taking the <code>num.abs</code>? If the tester provides negative numbers, it doesn't fail. By formal definition negative numbers aren't prime.</li>\n<li>The program can stop at <code>Math.sqrt(n)</code> <a href=\"https://stackoverflow.com/a/5811176/3804420\">https://stackoverflow.com/a/5811176/3804420</a></li>\n</ol>\n"}, {"comments": [{"owner": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1462936274, "post_id": 37152397, "comment_id": 61842334, "body": "Wouldn&#39;t calculating <code>sqrt(num)</code> once at the head be even more efficient? And stepping by two skipping even numbers (after adding a suitable even check at the head) will make things more efficient still."}, {"owner": {"reputation": 15441, "user_id": 248123, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea22838ed5987c80d1a77245f6acabe4?s=128&d=identicon&r=PG", "display_name": "andand", "link": "https://stackoverflow.com/users/248123/andand"}, "reply_to_user": {"reputation": 12557, "user_id": 1270789, "user_type": "registered", "accept_rate": 81, "profile_image": "https://i.stack.imgur.com/FXwoB.png?s=128&g=1", "display_name": "Ken Y-N", "link": "https://stackoverflow.com/users/1270789/ken-y-n"}, "edited": false, "score": 0, "creation_date": 1462936405, "post_id": 37152397, "comment_id": 61842358, "body": "Sure,,, work in progress; the really big problem in his logic is the <code>if</code> statement."}], "tags": [], "owner": {"reputation": 15441, "user_id": 248123, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/ea22838ed5987c80d1a77245f6acabe4?s=128&d=identicon&r=PG", "display_name": "andand", "link": "https://stackoverflow.com/users/248123/andand"}, "is_accepted": false, "score": 2, "last_activity_date": 1462936376, "last_edit_date": 1462936376, "creation_date": 1462935807, "answer_id": 37152397, "question_id": 37152273, "link": "https://stackoverflow.com/questions/37152273/test-spec-failing-with-my-prime-number-checker/37152397#37152397", "title": "Test spec failing with my prime number checker", "body": "<p>There are a number of issues here.  The biggest is with the <code>if</code> statement you have inside the loop.</p>\n\n<pre><code>if num.abs &lt;2   \n    return false     \nelsif num.abs % counter == 0 &amp;&amp; num.abs!=counter  \n    return false\nelse \n    return true \nend\n</code></pre>\n\n<p>There is no condition under which this <code>if</code> statement will not terminate the loop and return either <code>true</code> or <code>false</code> in the first iteration.  This will prevent <code>counter</code> from ever being incremented.</p>\n\n<p>The next issue is in your loop control.  You have</p>\n\n<pre><code>until counter&gt;999999999999999 do\n\n    ...\n\n    counter+=1\nend\n</code></pre>\n\n<p>In this case it would be better to stop at the <code>sqrt(num)</code> rather than some large number.  For better performance you probably should instead use as the loop control something like</p>\n\n<pre><code>until counter*counter &gt; num do\n</code></pre>\n\n<p>This will avoid multiple sqrt calculations.  You could precompute the sqrt instead, something like</p>\n\n<pre><code>sqrt_num = num.sqrt\nuntil counter &gt; sqrt_num do\n</code></pre>\n\n<p>(I don't know Ruby so I may have the syntax wrong, but I think you get the point).  If you do this, though, be sure <code>num</code> is not negative before hand.</p>\n\n<p>If you exit from the loop never having found a factor for <code>num</code> you know the number is prime.</p>\n"}], "owner": {"reputation": 111, "user_id": 6246328, "user_type": "registered", "accept_rate": 24, "profile_image": "https://www.gravatar.com/avatar/e05f278aae0408d3bfd1cdd4203576d4?s=128&d=identicon&r=PG&f=1", "display_name": "SinGar", "link": "https://stackoverflow.com/users/6246328/singar"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 291, "favorite_count": 0, "answer_count": 2, "score": 2, "last_activity_date": 1462940141, "creation_date": 1462934932, "last_edit_date": 1495541764, "question_id": 37152273, "link": "https://stackoverflow.com/questions/37152273/test-spec-failing-with-my-prime-number-checker", "title": "Test spec failing with my prime number checker", "body": "<p>I am doing some coding challenges at <a href=\"http://www.codewars.com/\" rel=\"nofollow noreferrer\">code wars</a> and ran into <a href=\"http://www.codewars.com/kata/5262119038c0985a5b00029f/train/ruby\" rel=\"nofollow noreferrer\">this one</a> asking me to make a method that takes a number and determines if it is a prime number or not. If it is prime the method should return \"true\" if the number is not prime it should return \"false\". </p>\n\n<p>The method passes every introductory test and each number I can think to throw at it but continually kicks back two tests as incorrect. At this point I'm curious if I am not understanding something about the testing process?</p>\n\n<p>This is my code:</p>\n\n<pre><code>def isPrime(num)  \n  counter=2 #is incremented with every time until loop loops\n  until counter&gt;999999999999999 do \n    if num.abs &lt;2   \n      return false     \n    elsif num.abs % counter == 0 &amp;&amp; num.abs!=counter  \n      return false\n    else \n      return true \n    end#if\n    counter+=1\n  end#\nend```\n</code></pre>\n\n<p>and this is the feed back that code wars is sending back to me</p>\n\n<pre><code>isPrime\nShould have isPrime defined.\nTest Passed\nShould return false for numbers less than 2.\n    Test Passed: Value == false\n    Test Passed: Value == false\n    Test Passed: Value == false\nShould return false for non-prime numbers.\n    Test Passed: Value == false\n    Test Passed: Value == false\n    Expected: false, instead got: true    # THESE ARE THE TESTS THAT FAIL\n    Expected: false, instead got: true    # THESE ARE THE TESTS THAT FAIL\nShould return true for prime numbers.\n    Test Passed: Value == true\n    Test Passed: Value == true\n    Test Passed: Value == true\n    Test Passed: Value == true\n    Test Passed: Value == true\n</code></pre>\n\n<p>Also I checked <a href=\"https://stackoverflow.com/questions/1801391/what-is-the-best-algorithm-for-checking-if-a-number-is-prime\">here</a> page for help on the algorithm. </p>\n\n<p>Any help is greatly appreciated.</p>\n"}, {"tags": ["ruby", "selenium", "selenium-webdriver"], "answers": [{"comments": [{"owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "edited": false, "score": 0, "creation_date": 1464399138, "post_id": 37152165, "comment_id": 62484832, "body": "am clearly not putting it in the right place in this mess of code I&#39;ve got:  getting uninitialized constant error for Selenium::Webdriver.   Will keep trying."}, {"owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "edited": false, "score": 0, "creation_date": 1464399186, "post_id": 37152165, "comment_id": 62484839, "body": "Aha!   Changed Webdriver to camel case: WebDriver and lo and behold!  it worked!"}], "tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 1, "last_activity_date": 1464408520, "last_edit_date": 1464408520, "creation_date": 1462934192, "answer_id": 37152165, "question_id": 37151607, "link": "https://stackoverflow.com/questions/37151607/how-can-one-get-the-running-version-of-selenium-selenium-server-or-selenium-we/37152165#37152165", "title": "How can one get the running version of selenium, selenium server, or selenium webdriver programmatically?", "body": "<p>You can get the version of a gem from the <code>source_location</code> of a method of one of its classes. For example:</p>\n\n<pre><code>Selenium::WebDriver.method(:for).source_location.first[/selenium-webdriver-\\d+(?:\\.\\d+)*/]\n=&gt; \"selenium-webdriver-2.53.0\"\n</code></pre>\n"}, {"comments": [{"owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "edited": false, "score": 0, "creation_date": 1464398441, "post_id": 37153485, "comment_id": 62484712, "body": "Here is what I get with the status command right after navigating to a url:  {&quot;os&quot;=&gt;{&quot;arch&quot;=&gt;&quot;x86&quot;, &quot;name&quot;=&gt;&quot;WINNT&quot;, &quot;version&quot;=&gt;&quot;unknown&quot;}, &quot;build&quot;=&gt;{&quot;revision&quot;=&gt;&quot;unknown&quot;, &quot;time&quot;=&gt;&quot;unknown&quot;, &quot;version&quot;=&gt;&quot;unknown&quot;}}"}, {"owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "edited": false, "score": 0, "creation_date": 1464399308, "post_id": 37153485, "comment_id": 62484863, "body": "using firefox for above"}, {"owner": {"reputation": 36788, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "reply_to_user": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "edited": false, "score": 0, "creation_date": 1464399492, "post_id": 37153485, "comment_id": 62484896, "body": "For Chrome and Firefox, the version of the driver is available in <code>driver.capabilities</code>."}, {"owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "edited": false, "score": 0, "creation_date": 1464400062, "post_id": 37153485, "comment_id": 62484977, "body": "with FF I get this out of [browser].driver.capabilities: <code>code</code>--- !ruby/object:Selenium::WebDriver::Remote::Capabilities capabilities:   :browser_name: firefox   :version: 38.8.0   :platform: :windows   :javascript_enabled: true   :css_selectors_enabled: true   :takes_screenshot: true   :native_events: false   :rotatable: false   :firefox_profile:    :proxy:    handlesAlerts: true   webStorageEnabled: true   applicationCacheEnabled: true   databaseEnabled: true   locationContextEnabled: true   acceptSslCerts: true <code>code</code> Nothing about the driver version"}, {"owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "edited": false, "score": 0, "creation_date": 1464400308, "post_id": 37153485, "comment_id": 62485013, "body": "Am talking about ChromeDriver, IEDriverServer, etc."}, {"owner": {"reputation": 36788, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "reply_to_user": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "edited": false, "score": 0, "creation_date": 1464402475, "post_id": 37153485, "comment_id": 62485284, "body": "My bad, the capabilities only gives the version of the driver for Chrome. Anyway, for Firefox, the version of the driver is the same as the version of the client or standalone server."}, {"owner": {"reputation": 36788, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "reply_to_user": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "edited": false, "score": 0, "creation_date": 1464402586, "post_id": 37153485, "comment_id": 62485301, "body": "It seems that there no simple single way to get the version of each driver. You can also get some info from the remote server with this url: <a href=\"http://127.0.0.1:4444/wd/hub/error\" rel=\"nofollow noreferrer\">127.0.0.1:4444/wd/hub/error</a>"}], "tags": [], "owner": {"reputation": 36788, "user_id": 2887618, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e643417e67e5a3bb9f659e4491ed26b0?s=128&d=identicon&r=PG&f=1", "display_name": "Florent B.", "link": "https://stackoverflow.com/users/2887618/florent-b"}, "is_accepted": false, "score": 0, "last_activity_date": 1462950604, "last_edit_date": 1462950604, "creation_date": 1462943015, "answer_id": 37153485, "question_id": 37151607, "link": "https://stackoverflow.com/questions/37151607/how-can-one-get-the-running-version-of-selenium-selenium-server-or-selenium-we/37153485#37153485", "title": "How can one get the running version of selenium, selenium server, or selenium webdriver programmatically?", "body": "<p>You could get the version of the driver by sending the <code>status</code> command to the driver:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>require \"selenium-webdriver\"\n\ndriver = Selenium::WebDriver.for :ie\ndriver.navigate.to \"http://stackoverflow.com/\"\n\nputs driver.send(:bridge).status\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "is_accepted": false, "score": 1, "last_activity_date": 1464713403, "creation_date": 1464713403, "answer_id": 37551457, "question_id": 37151607, "link": "https://stackoverflow.com/questions/37151607/how-can-one-get-the-running-version-of-selenium-selenium-server-or-selenium-we/37551457#37551457", "title": "How can one get the running version of selenium, selenium server, or selenium webdriver programmatically?", "body": "<p>A bit ugly but I finally got something that works for iedriverserver and chromedriver, the trick being to get the sysout and syserr as well as the pid so the process can be killed.</p>\n\n<pre><code>r, w = IO.pipe\npid1 = Process.spawn('iedriverserver', :out =&gt; w, :err =&gt; [:child, :out])\nputs \"#{__LINE__}: #{pid1}\"\nsleep(1)\nk = Process.kill('KILL', pid1)\nputs \"#{__LINE__}: #{k}\"\nw.close\npid2, status = Process.wait2\nputs \"#{__LINE__}: #{pid2}, #{status}\"\nout = r.read\nr.close\nputs out\n</code></pre>\n\n<p>(Finally figured out the code markup... ;) )</p>\n"}], "owner": {"reputation": 508, "user_id": 308016, "user_type": "registered", "accept_rate": 0, "profile_image": "https://i.stack.imgur.com/HW9lH.jpg?s=128&g=1", "display_name": "pmneve", "link": "https://stackoverflow.com/users/308016/pmneve"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 1692, "favorite_count": 0, "accepted_answer_id": 37152165, "answer_count": 3, "score": 2, "last_activity_date": 1464713403, "creation_date": 1462930171, "last_edit_date": 1462934251, "question_id": 37151607, "link": "https://stackoverflow.com/questions/37151607/how-can-one-get-the-running-version-of-selenium-selenium-server-or-selenium-we", "title": "How can one get the running version of selenium, selenium server, or selenium webdriver programmatically?", "body": "<p>I'm running automated tests in several environments and need to know what is actually being used at run time.  </p>\n\n<p>I'm seeing different issues with identical Ruby scripts and would like to be able to capture as many environmental parameters as possible during the runs so they can be included in the run reports to help narrow down possible causes for the differences.</p>\n\n<p>All environments are running Windows 7 64 SP1 and Ruby 2.0.0p451 (2014-02-24) [i386-mingw32].  Most serious issues are with IE (really??) and all environments are running the same IE version and build.</p>\n\n<p>Any suggestions are most welcome.</p>\n\n<p>pat </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "ruby-on-rails-3"], "answers": [{"tags": [], "owner": {"reputation": 6018, "user_id": 3073313, "user_type": "registered", "accept_rate": 81, "profile_image": "https://www.gravatar.com/avatar/d9a53be16eb996b521f1637d19005511?s=128&d=identicon&r=PG", "display_name": "Jay-Ar Polidario", "link": "https://stackoverflow.com/users/3073313/jay-ar-polidario"}, "is_accepted": false, "score": 1, "last_activity_date": 1462966913, "last_edit_date": 1462966913, "creation_date": 1462966391, "answer_id": 37161398, "question_id": 37151214, "link": "https://stackoverflow.com/questions/37151214/how-to-add-multiple-roles-using-rails-form-and-role-model-gem/37161398#37161398", "title": "How To Add Multiple Roles Using Rails Form and Role Model Gem", "body": "<p>Haven't used role_model gem, but looking at <a href=\"https://github.com/martinrehfeld/role_model\" rel=\"nofollow\">docs</a>, the following should work:</p>\n\n<pre><code>&lt;%= form_for @user, url: admin_user_path(@user) do |f| %&gt;\n  ...\n  &lt;div class='form-group'&gt;\n    &lt;% User.valid_roles.each do |valid_role| %&gt;\n      &lt;div&gt;\n        &lt;%= valid_role.humanize %&gt;\n        &lt;%= f.check_box :roles, multiple: true, valid_role %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n  &lt;/div&gt;\n  ...\n&lt;% end %&gt;\n</code></pre>\n\n<p>After submitting the form, your server should receive the following params (example when checked both 'admin' and 'client_contact'):</p>\n\n<pre><code>{\n  user: {\n    first_name: '...',\n    last_name: '...',\n    email: '...',\n    password: '...',\n    roles: [\n     'admin',\n     'client_contact'\n    ]\n  }\n}\n</code></pre>\n\n<p>Do not forget to include <code>roles: []</code> to strong params. Example below:</p>\n\n<p>users_controller.rb</p>\n\n<pre><code>def create\n  @user = User.new(user_params)\n  ...\nend\n\n...\n\nprivate\n\ndef user_params\n  params.require(:user).permit(:first_name, :last_name, :email, :password, roles: [])\nend\n</code></pre>\n"}], "owner": {"reputation": 1130, "user_id": 4574914, "user_type": "registered", "accept_rate": 56, "profile_image": "https://www.gravatar.com/avatar/c27823d944d6c2125057e337c8700b97?s=128&d=identicon&r=PG&f=1", "display_name": "joeyk16", "link": "https://stackoverflow.com/users/4574914/joeyk16"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 496, "favorite_count": 0, "answer_count": 1, "score": 2, "last_activity_date": 1462966913, "creation_date": 1462927278, "question_id": 37151214, "link": "https://stackoverflow.com/questions/37151214/how-to-add-multiple-roles-using-rails-form-and-role-model-gem", "title": "How To Add Multiple Roles Using Rails Form and Role Model Gem", "body": "<p>Hello i have a Roles app where a user can have multiple roles. I am using Roles Model Gem. As you can see below:</p>\n\n<pre><code>4.2.5@2.2.4 (main)&gt; User.valid_roles\n=&gt; [\n    [0] :admin,\n    [1] :report_writer,\n    [2] :candidate,\n    [3] :client_contact\n]\n</code></pre>\n\n<p>I would like a check box form that can select multiple roles for the user. I've been trying for an hour and can't figure it out. Can anyone help?</p>\n\n<p>Here is the form</p>\n\n<pre><code>%h1 Edit User\n\n= form_for @user, url: admin_user_path(@user) do |f|\n\n.form-group\n  = f.label :first_name\n  = f.text_field :first_name\n\n.form-group\n  = f.label :last_name\n  = f.text_field :last_name\n\n.form-group\n  = f.label :email\n  = f.text_field :email\n\n.form-group\n  = f.label :password\n  = f.password_field :password\n\n.form-actions\n  = link_to \"Cancel\", admin_users_path, class: \"btn btn-grey\"\n  = f.submit class: \"btn btn-primary pull-right\"\n</code></pre>\n"}, {"tags": ["javascript", "ruby-on-rails", "ruby", "polymorphic-associations", "hidden-field"], "comments": [{"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 1, "creation_date": 1462933751, "post_id": 37150968, "comment_id": 61841762, "body": "Please post the log for this action with the notes_date hidden field included, specifically including the parameters and the activity that occurs during the action."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462992298, "post_id": 37150968, "comment_id": 61876561, "body": "Updated question with logs @MichaelGaskill. Thanks so much for taking a look!"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462992945, "post_id": 37150968, "comment_id": 61876946, "body": "It&#39;s clear that the ranking is sent as &quot;&quot;.  The only thing that I see that could cause a problem is that the <code>value</code> for the &#39;notes_date&#39; hidden field is <code>date</code>.  This would mean that you&#39;d have to have a variable or method called <code>date</code> somewhere.  Do you know what it&#39;s value is?  Also, have you looked at the generated HTML to see if it looks right?  You might post that, as well, because it might show exactly what&#39;s happened."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462993276, "post_id": 37150968, "comment_id": 61877128, "body": "Yea. I added where date comes from above the logs. It is from an iteration @MichaelGaskill of <code>&lt;% @challenge.dates_challenged.first(@challenge.days_challenged + @challenge.missed_days).each_with_index do |date, i| %&gt;</code> and like sameera pointed out if I switch out images for text_field and then click save the :ranking will save. I don&#39;t know if you can tell the cause from that tidbit"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462993565, "post_id": 37150968, "comment_id": 61877296, "body": "I&#39;m thinking that the issue is how <code>date</code> is output into the HTML.  Try changing the <code>:date =&gt; date</code> in the partial to <code>:date =&gt; date.strftime(&quot;%Y-%m-%d&quot;)</code> and see if that makes a difference.  Date is an object, so no telling how it&#39;s output in this case, but the strftime converts it into a string, and that&#39;s a well-understood value for a hidden field."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462993584, "post_id": 37150968, "comment_id": 61877303, "body": "And I took out <code>value: 3</code> so it wouldn&#39;t conflict with <code>value: date</code>, but that made no difference @MichaelGaskill"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462993666, "post_id": 37150968, "comment_id": 61877345, "body": "Unfortunately @MichaelGaskill that didn&#39;t work :/"}, {"owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462993879, "post_id": 37150968, "comment_id": 61877455, "body": "It was worth a try.  Can you post a snippet of the HTML from the browser with the hidden field issue happening?  You just need to &#39;View as Source&#39; and find the right place, and copy the entire <code>&lt;form&gt;</code> section.  That way, we can see what&#39;s happening in the HTML itself."}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1462994443, "post_id": 37150968, "comment_id": 61877742, "body": "Posted HTML output of form @MichaelGaskill. Maybe you see something I don&#39;t :)"}, {"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "reply_to_user": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "edited": false, "score": 0, "creation_date": 1463181512, "post_id": 37150968, "comment_id": 61972161, "body": "@MichaelGaskill. I realize the behavior is if a note is created in consecutive order from the first note then the <code>:ranking</code> works, but if a user creates a note that is out of order then the <code>:ranking</code> doesn&#39;t save"}], "answers": [{"comments": [{"owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "edited": false, "score": 0, "creation_date": 1462992515, "post_id": 37151070, "comment_id": 61876682, "body": "Thanks Sameera. Just updated question with logs and what is being passed through to it. I tested the <code>text_field</code> and if I manually type in the number and then click save then the <code>:ranking</code> saves so thank you for helping me further narrow down the problem :)"}], "tags": [], "owner": {"reputation": 16077, "user_id": 319702, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/Rb5G2.jpg?s=128&g=1", "display_name": "sameera207", "link": "https://stackoverflow.com/users/319702/sameera207"}, "is_accepted": false, "score": 0, "last_activity_date": 1525704691, "last_edit_date": 1525704691, "creation_date": 1462926203, "answer_id": 37151070, "question_id": 37150968, "link": "https://stackoverflow.com/questions/37150968/multiple-hidden-field-in-one-form/37151070#37151070", "title": "Multiple hidden_field in one form?", "body": "<p>Rails doesn't have any exception as to allow only one hidden field for a form. You can have multiple. In my opinion, your problem lies somewhere else, maybe it's not setting the value to the hidden field as you expect. </p>\n\n<p>To test this, make the hidden field as a normal text field and see if the value changes. </p>\n\n<p>If that changes, then maybe do a break point in the controller and see what are you getting as params. </p>\n"}], "owner": {"reputation": 2578, "user_id": 4383667, "user_type": "registered", "accept_rate": 86, "profile_image": "https://lh3.googleusercontent.com/-0D7SldkahZc/AAAAAAAAAAI/AAAAAAAAAFk/V8nUZfLVtyk/photo.jpg?sz=128", "display_name": "AnthonyGalli.com", "link": "https://stackoverflow.com/users/4383667/anthonygalli-com"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 126, "favorite_count": 0, "answer_count": 1, "score": 1, "last_activity_date": 1525704691, "creation_date": 1462925443, "last_edit_date": 1462994417, "question_id": 37150968, "link": "https://stackoverflow.com/questions/37150968/multiple-hidden-field-in-one-form", "title": "Multiple hidden_field in one form?", "body": "<p>Does ruby not allow two <code>hidden_field</code> in one form? The ranking value keeps saving as <code>3</code> even if a user changes it for challenges that have <code>date_started.present?</code></p>\n\n<p>If I take out <code>&lt;%= f.hidden_field(:notes_date, value: date) %&gt;</code> then the value saves correctly based upon user's selection, but of course I can't just take out that line because I need it to set the date.</p>\n\n<p><strong>notes/form</strong></p>\n\n<pre><code>&lt;%= form_for [@notable, @note] do |f| %&gt;\n  &lt;%= f.text_area :notes_text, placeholder: 'Enter Note' %&gt;\n  &lt;%= f.hidden_field(:ranking, id: 'rank') %&gt; # Defaults ranking to 3, but if user changes it in the form it still gets saved as 3 for date_started.present? challenges\n\n  &lt;% if @challenge.date_started.present? %&gt;\n    &lt;%= f.hidden_field(:notes_date, value: date) %&gt;\n  &lt;% else %&gt;\n    &lt;%= f.date_select :notes_date, :order =&gt; [:month, :day] %&gt;\n  &lt;% end %&gt;\n\n  &lt;%= image_tag('1.png', data: { ranking: 1 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('2.png', data: { ranking: 2 }, class: 'image-clicker') %&gt;\n  &lt;%= image_tag('3.png', data: { ranking: 3 }, class: 'image-clicker clicked') %&gt;\n  &lt;%= image_tag('4.png', data: { ranking: 4 }, class: 'image-clicker') %&gt;\n\n  &lt;%= f.submit %&gt;\n&lt;% end %&gt;\n\n&lt;script&gt;\n  $('.image-clicker').click(function() {\n    $('#rank').val($(this).data('ranking'));\n    $('.clicked').removeClass('clicked')\n    $(this).addClass('clicked');\n  });\n&lt;/script&gt;\n</code></pre>\n\n<p><strong>Renders notes/form</strong></p>\n\n<pre><code>  &lt;% if @challenge.date_started %&gt;\n    &lt;% @challenge.dates_challenged.first(@challenge.days_challenged + @challenge.missed_days).each_with_index do |date, i| %&gt;\n      &lt;% if @notes.any? { |note| note.notes_date.strftime(\"%m/%d/%y\") == date.strftime(\"%m/%d/%y\") } %&gt;\n        &lt;% @notes.each do |note| %&gt;\n          &lt;% if note.notes_text.present? %&gt;\n            &lt;% if note.notes_date.strftime(\"%m/%d/%y\") == date.strftime(\"%m/%d/%y\") %&gt;\n              &lt;div class=\"notes-notes-background\"&gt;\n                &lt;% if note.ranking == 1 %&gt;\n                  &lt;%= image_tag '1.png', class: 'note-emoticon' %&gt;\n                &lt;% elsif note.ranking == 2 %&gt;\n                  &lt;%= image_tag '2.png', class: 'note-emoticon' %&gt;\n                &lt;% elsif note.ranking == 3 %&gt;\n                  &lt;%= image_tag '3.png', class: 'note-emoticon' %&gt;\n                &lt;% elsif note.ranking == 4 %&gt;\n                  &lt;%= image_tag '4.png', class: 'note-emoticon' %&gt;\n                &lt;% end %&gt;\n                &lt;div style=\"font-weight: bold; font-size: 18px;\"&gt;Day &lt;%= i + 1 %&gt;&lt;/div&gt;\n                &lt;b&gt;&lt;%= note.notes_date.strftime(\"%b %d, %Y\") %&gt;&lt;/b&gt;&lt;br&gt;&lt;br&gt;\n                &lt;%= link_to edit_note_path(note) do %&gt;\n                  &lt;%= simple_format note.notes_text %&gt;\n                &lt;% end %&gt;\n              &lt;/div&gt;\n            &lt;% end %&gt;\n          &lt;% else %&gt;\n          &lt;% end %&gt;\n        &lt;% end %&gt;\n      &lt;% else %&gt;\n        &lt;div class=\"notes-form-background\"&gt;\n          &lt;div style=\"margin-bottom: -23px; color: #a4a99f; font-weight: bold; font-size: 18px; color: #446CB3;\"&gt;Day &lt;%= i + 1 %&gt;&lt;/div&gt;&lt;br&gt;\n          &lt;div style=\"color: #a4a99f;\"&gt;&lt;%= date.strftime(\"%m/%d\") %&gt;&lt;/div&gt;\n          &lt;%= render 'notes/form', :date =&gt; date %&gt; # For date_started date is passed through to form\n        &lt;/div&gt;\n      &lt;% end %&gt;\n    &lt;% end %&gt;\n  &lt;% else %&gt;\n    &lt;% @notes.each do |note| %&gt;\n      &lt;div class=\"notes-notes-background\"&gt;\n        &lt;% if note.ranking == 1 %&gt;\n          &lt;%= image_tag '1.png', class: 'note-emoticon' %&gt;\n        &lt;% elsif note.ranking == 2 %&gt;\n          &lt;%= image_tag '2.png', class: 'note-emoticon' %&gt;\n        &lt;% elsif note.ranking == 3 %&gt;\n          &lt;%= image_tag '3.png', class: 'note-emoticon' %&gt;\n        &lt;% elsif note.ranking == 4 %&gt;\n          &lt;%= image_tag '4.png', class: 'note-emoticon' %&gt;\n        &lt;% end %&gt;\n        &lt;b&gt;&lt;%= note.notes_date.strftime(\"%b %d, %Y\") %&gt;&lt;/b&gt;&lt;br&gt;&lt;br&gt;\n        &lt;%= link_to edit_note_path(note) do %&gt;\n          &lt;%= simple_format note.notes_text %&gt;\n        &lt;% end %&gt;\n      &lt;/div&gt;\n    &lt;% end %&gt;\n    &lt;div class=\"notes-form-background\"&gt;\n      &lt;%= render \"notes/form\" %&gt; # For nil date_started date is not passed to form\n    &lt;/div&gt;\n  &lt;% end %&gt;\n</code></pre>\n\n<p><strong>Log</strong></p>\n\n<pre><code># NOTE FOR CHALLENGE WITHOUT DATE_STARTED (AKA GOAL CHALLENGE)\n# NOTE CORRECTLY SAVED RANKING\n\nStarted POST \"/challenges/175-take-a-picture/notes\" for 127.0.0.1 at 2016-05-11 14:34:39 -0400\nProcessing by NotesController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"YYad25L/yIqbgnnWgD6ufHRBuAgQzc5kQZZ6TqvzNbDu2wQMnZ4yI2F8SdHoRLVBD/IOueXh6cJCGJFSVFoY5w==\", \"note\"=&gt;{\"notes_text\"=&gt;\"adfasdfasdf\", \"notes_date\"=&gt;\"2016-05-08\", \"ranking\"=&gt;\"1\", \"conceal\"=&gt;\"0\"}, \"button\"=&gt;\"\", \"challenge_id\"=&gt;\"175-take-a-picture\"}\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT 1  [[\"id\", 78]]\n  Challenge Load (0.5ms)  SELECT  \"challenges\".* FROM \"challenges\" WHERE \"challenges\".\"id\" = $1 LIMIT 1  [[\"id\", 175]]\n   (0.3ms)  BEGIN\n  SQL (0.3ms)  INSERT INTO \"notes\" (\"notes_text\", \"ranking\", \"notes_date\", \"user_id\", \"challenge_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6, $7) RETURNING \"id\"  [[\"notes_text\", \"adfasdfasdf\"], [\"ranking\", 1], [\"notes_date\", \"2016-05-08 04:00:00.000000\"], [\"user_id\", 78], [\"challenge_id\", 175], [\"created_at\", \"2016-05-11 18:34:39.351527\"], [\"updated_at\", \"2016-05-11 18:34:39.351527\"]]\n   (0.6ms)  COMMIT\n   (0.1ms)  BEGIN\n  SQL (0.4ms)  INSERT INTO \"activities\" (\"action\", \"trackable_id\", \"trackable_type\", \"user_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"  [[\"action\", \"create\"], [\"trackable_id\", 146], [\"trackable_type\", \"Note\"], [\"user_id\", 78], [\"created_at\", \"2016-05-11 18:34:39.357991\"], [\"updated_at\", \"2016-05-11 18:34:39.357991\"]]\n   (0.6ms)  COMMIT\nRedirected to http://0.0.0.0:3000/challenges/175-take-a-picture\nCompleted 302 Found in 19ms (ActiveRecord: 3.2ms)\n\n# NOTE FOR CHALLENGE WITH DATE_STARTED (AKA HABIT CHALLENGE)\n# NOTE DID NOT SAVE RANKING\n\nStarted POST \"/challenges/175-take-a-picture/notes\" for 127.0.0.1 at 2016-05-11 14:38:05 -0400\nProcessing by NotesController#create as HTML\n  Parameters: {\"utf8\"=&gt;\"\u2713\", \"authenticity_token\"=&gt;\"AmISZHocVRAxMgg50oiQZm4GT8m04uGJ2AH1iCE6jSeNP4uzdX2vucvMOD668otbFbX5eEHOxi/bjx6U3pOgcA==\", \"note\"=&gt;{\"notes_text\"=&gt;\"super sad face with 1 ranking\", \"notes_date\"=&gt;\"2016-05-11\", \"ranking\"=&gt;\"\", \"conceal\"=&gt;\"0\"}, \"button\"=&gt;\"\", \"challenge_id\"=&gt;\"175-take-a-picture\"}\n  User Load (0.3ms)  SELECT  \"users\".* FROM \"users\" WHERE \"users\".\"id\" = $1 LIMIT 1  [[\"id\", 78]]\n  Challenge Load (1.8ms)  SELECT  \"challenges\".* FROM \"challenges\" WHERE \"challenges\".\"id\" = $1 LIMIT 1  [[\"id\", 175]]\n   (3.6ms)  BEGIN\n  SQL (0.3ms)  INSERT INTO \"notes\" (\"notes_text\", \"notes_date\", \"user_id\", \"challenge_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"  [[\"notes_text\", \"super sad face with 1 ranking\"], [\"notes_date\", \"2016-05-11 04:00:00.000000\"], [\"user_id\", 78], [\"challenge_id\", 175], [\"created_at\", \"2016-05-11 18:38:05.365702\"], [\"updated_at\", \"2016-05-11 18:38:05.365702\"]]\n   (15.8ms)  COMMIT\n   (0.2ms)  BEGIN\n  SQL (0.4ms)  INSERT INTO \"activities\" (\"action\", \"trackable_id\", \"trackable_type\", \"user_id\", \"created_at\", \"updated_at\") VALUES ($1, $2, $3, $4, $5, $6) RETURNING \"id\"  [[\"action\", \"create\"], [\"trackable_id\", 148], [\"trackable_type\", \"Note\"], [\"user_id\", 78], [\"created_at\", \"2016-05-11 18:38:05.388367\"], [\"updated_at\", \"2016-05-11 18:38:05.388367\"]]\n   (16.9ms)  COMMIT\nRedirected to http://0.0.0.0:3000/challenges/175-take-a-picture\nCompleted 302 Found in 61ms (ActiveRecord: 39.3ms)\n</code></pre>\n\n<p><strong>HTML Output</strong></p>\n\n<pre><code>        &lt;div class=\"notes-form-background\"&gt;\n          &lt;div style=\"margin-bottom: -23px; color: #a4a99f; font-weight: bold; font-size: 18px; color: #446CB3;\"&gt;Day 20&lt;/div&gt;&lt;br&gt;\n          &lt;div style=\"color: #a4a99f;\"&gt;05/30&lt;/div&gt;\n          &lt;form class=\"new_note\" id=\"new_note\" action=\"/challenges/176-meditate/notes\" accept-charset=\"UTF-8\" method=\"post\"&gt;&lt;input name=\"utf8\" type=\"hidden\" value=\"&amp;#x2713;\" /&gt;&lt;input type=\"hidden\" name=\"authenticity_token\" value=\"O1vx9h2yTuKmv6R/GyN8msppVp5iX+cMSIAbyWUsJKS0BmghEtO0S1xBlHhzWWensdrgL5dzwKpLDvDVmoUJ8w==\" /&gt;\n\n    &lt;button name=\"button\" type=\"submit\" class=\"remove-note\"&gt;\n      &lt;span class=\"glyphicon glyphicon-remove\"&gt;&lt;/span&gt;\n&lt;/button&gt;\n  &lt;div class=\"form-group\"&gt;\n    &lt;textarea rows=\"4\" class=\"form-control\" id=\"challenge-name\" placeholder=\"Enter Note\" name=\"note[notes_text]\"&gt;\n&lt;/textarea&gt;\n    &lt;div class=\"center\"&gt;\n          &lt;input value=\"05-30\" type=\"hidden\" name=\"note[notes_date]\" id=\"note_notes_date\" /&gt;\n    &lt;/div&gt;\n    &lt;div class=\"emoticons-align-center\"&gt;\n      &lt;span class=\"label label-primary\" style=\"vertical-align: text-top;\"&gt;How was it?&lt;/span&gt;\n      &lt;input id=\"rank\" type=\"hidden\" name=\"note[ranking]\" /&gt;\n      &lt;img data-ranking=\"1\" class=\"image-clicker\" src=\"/assets/1-d13146fa38dc5aa389b7136023e0a70d.png\" alt=\"1\" /&gt;\n      &lt;img data-ranking=\"2\" class=\"image-clicker\" src=\"/assets/2-e855957467934964a571061ed2f87edf.png\" alt=\"2\" /&gt;\n      &lt;img data-ranking=\"3\" class=\"image-clicker\" src=\"/assets/3-f39b8a225ddd8b1b9633c147ab4c605f.png\" alt=\"3\" /&gt;\n      &lt;img data-ranking=\"4\" class=\"image-clicker\" src=\"/assets/4-bc78072f299a492c5411b6e47cb85adf.png\" alt=\"4\" /&gt;\n    &lt;/div&gt;\n    &lt;div style=\"margin-top: 30px;\"&gt;\n      &lt;div style=\"float: left;\"&gt;\n        &lt;input name=\"note[conceal]\" type=\"hidden\" value=\"0\" /&gt;&lt;input data-size=\"small\" data-on-color=\"danger\" data-on-text=\"Secret\" data-off-text=\"Public\" class=\"someclass\" type=\"checkbox\" value=\"1\" name=\"note[conceal]\" id=\"note_conceal\" /&gt; \n        &lt;script&gt;\n          $(\"[class='someclass']\").bootstrapSwitch();\n        &lt;/script&gt;\n      &lt;/div&gt;\n      &lt;div style=\"float: right;\"&gt;\n        &lt;button name=\"button\" type=\"submit\" class=\"btn\"&gt;\n          Save\n&lt;/button&gt;      &lt;/div&gt;\n    &lt;/div&gt;\n  &lt;/div&gt;\n&lt;/form&gt;\n&lt;script&gt;\n  $('.image-clicker').click(function() {\n    $('#rank').val($(this).data('ranking'));\n    $('.clicked').removeClass('clicked')\n    $(this).addClass('clicked');\n  });\n&lt;/script&gt;\n</code></pre>\n"}, {"tags": ["ruby", "neo4j", "cypher"], "answers": [{"tags": [], "owner": {"reputation": 10388, "user_id": 632454, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/94593f750fbdbcfe459d7d16f45780e1?s=128&d=identicon&r=PG", "display_name": "Brian Underwood", "link": "https://stackoverflow.com/users/632454/brian-underwood"}, "is_accepted": true, "score": 1, "last_activity_date": 1462954496, "creation_date": 1462954496, "answer_id": 37156764, "question_id": 37150642, "link": "https://stackoverflow.com/questions/37150642/ruby-neo4j-core-mass-processing-data/37156764#37156764", "title": "Ruby neo4j-core mass processing data", "body": "<p>Ok!</p>\n\n<p>So you're absolutely right.  With <code>neo4j-core</code> you can only send one query at a time.  With transactions all you're really getting is the ability to rollback.  Neo4j does have a nice HTTP JSON API for transactions which allows you to send multiple Cypher requests in the same HTTP request, but <code>neo4j-core</code> doesn't currently support that (I'm working on a refactor for the next major version which will allow this).  So there are a number of options:</p>\n\n<ul>\n<li>You can submit your requests via raw HTTP JSON to the APIs.  If you still want to use the <code>Query</code> API you can use the <code>to_cypher</code> and <code>merge_params</code> methods to get the cypher and params for that (<code>merge_params</code> is a private method currently, so you'd need to <code>send(:merge_params)</code>)</li>\n<li>You can load via CSV as you said.  You can either\n\n<ul>\n<li>use the <code>neo4j-import</code> command which allows you to import <em>very</em> fast but requires you to put your CSV in a specific format, requires that you be creating a DB from scratch, and requires that you create indexes/constraints after the fact</li>\n<li>use the <code>LOAD CSV</code> command which isn't as fast, but is still pretty fast.</li>\n</ul></li>\n<li>You can use the <a href=\"https://github.com/neo4jrb/neo4apis\" rel=\"nofollow\"><code>neo4apis</code></a> gem to build a DSL to import your data.  The gem will create Cypher queries under the covers and will batch them for performance.  See examples of the gem in use via <a href=\"https://github.com/neo4jrb/neo4apis-twitter\" rel=\"nofollow\"><code>neo4apis-twitter</code></a> and <a href=\"https://github.com/neo4jrb/neo4apis-github\" rel=\"nofollow\"><code>neo4apis-github</code></a></li>\n<li>If you are a bit more adventurous, you can use the new Cypher API in <code>neo4j-core</code> via the <a href=\"https://github.com/neo4jrb/neo4j-core/tree/new_cypher_api\" rel=\"nofollow\"><code>new_cypher_api</code></a> branch on the GitHub repo.  The <code>README</code> in that branch has some documentation on the API, but also feel free to drop by our <a href=\"https://gitter.im/neo4jrb/neo4j\" rel=\"nofollow\">Gitter chat room</a> if you have questions on this or anything else.</li>\n</ul>\n\n<p>If you're implementing a solution which is going to make queries like above where you have multiple <code>MERGE</code> clauses, you'll probably want to profile your queries to make sure that you are <a href=\"http://www.markhneedham.com/blog/2014/10/23/neo4j-cypher-avoiding-the-eager/\" rel=\"nofollow\">avoiding the eager</a> (that post is a bit old and newer versions of Neo4j have alleviated some of the need for care, but you can still look for <code>Eager</code> in your <code>PROFILE</code>)</p>\n\n<p>Also worth a look: Max De Marzi's post on <a href=\"https://maxdemarzi.com/2016/02/18/scaling-cypher-writes/\" rel=\"nofollow\">Scaling Cypher Writes</a></p>\n"}], "owner": {"reputation": 11280, "user_id": 291059, "user_type": "registered", "accept_rate": 39, "profile_image": "https://www.gravatar.com/avatar/709eb4af113a7afad4311d4277a733c6?s=128&d=identicon&r=PG", "display_name": "wuntee", "link": "https://stackoverflow.com/users/291059/wuntee"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 102, "favorite_count": 0, "accepted_answer_id": 37156764, "answer_count": 1, "score": 1, "last_activity_date": 1462954496, "creation_date": 1462923358, "last_edit_date": 1462924007, "question_id": 37150642, "link": "https://stackoverflow.com/questions/37150642/ruby-neo4j-core-mass-processing-data", "title": "Ruby neo4j-core mass processing data", "body": "<p>Has anyone used Ruby <a href=\"https://github.com/neo4jrb/neo4j-core\" rel=\"nofollow\">neo4j-core</a> to mass process data? Specifically, I am looking at taking in about 500k lines from a relational database and insert them via something like:</p>\n\n<pre><code>Neo4j::Session.current.transaction.query\n             .merge(m: { Person: { token: person_token} })\n             .merge(i: { IpAddress: { address: ip, country: country,\n                                      city: city, state: state } })\n             .merge(a: { UserToken: { token: token } })\n             .merge(r: { Referrer: { url: referrer } })\n             .merge(c: { Country: { name: country } })\n             .break # This will make sure the query is not reordered\n             .create_unique(\"m-[:ACCESSED_FROM]-&gt;i\")\n             .create_unique(\"m-[:ACCESSED_FROM]-&gt;a\")\n             .create_unique(\"m-[:ACCESSED_FROM]-&gt;r\")\n             .create_unique(\"a-[:ACCESSED_FROM]-&gt;i\")\n             .create_unique(\"a-[:ACCESSED_FROM]-&gt;r\")\n             .create_unique(\"i-[:IN]-&gt;c\")\n             .exec\n</code></pre>\n\n<p>However doing this locally it takes hours on hundreds of thousands of events. So far, I have attempted the folloiwng:</p>\n\n<ul>\n<li>Wrapping Neo4j::Connection in a ConnectionPool and multi-threading it - I did not see much speed improvements here.</li>\n<li>Doing <code>tx = Neo4j::Transaction.new</code> and <code>tx.close</code> every 1000 events processed - looking at a TCP dump, I am not sure this actually does what I expected. It does the exact same requests, with the same frequency, but just has a different response. </li>\n</ul>\n\n<p>With Neo4j::Transaction I see a POST every time the <code>.query(...).exec</code> is called:</p>\n\n<ul>\n<li>Request: <code>{\"statements\":[{\"statement\":\"MERGE (m:</code>Person<code>{token: {m_Person_token}}) ...{\"m_Person_token\":\"AAA\"...,\"resultDataContents\":[\"row\",\"REST\"]}]}</code></li>\n<li>Response: <code>{\"commit\":\"http://localhost:7474/db/data/transaction/868/commit\",\"results\":[{\"columns\":[],\"data\":[]}],\"transaction\":{\"expires\":\"Tue, 10 May 2016 23:19:25 +0000\"},\"errors\":[]}</code></li>\n</ul>\n\n<p>With Non-Neo4j::Transactions I see the same POST frequency, but this data: </p>\n\n<ul>\n<li>Request: <code>{\"query\":\"MERGE (m:</code>Person<code>{token: {m_Person_token}}) ... {\"m_Person_token\":\"AAA\"...\"c_Country_name\":\"United States\"}}</code></li>\n<li>Response: <code>{\"columns\" : [ ], \"data\" : [ ]}</code></li>\n</ul>\n\n<p>(Not sure if that is intended behavior, but it looks like less data is transmitted via the Non-Neo4j::Transaction technique - highly possibly I am doing something incorrectly)</p>\n\n<p>Some other ideas I had:\n* Post process into a CSV, SCP up and then use the <code>neo4j-import</code> command line utility (although, that seems kinda hacky).\n* Combine both of the techniques I tried above.</p>\n\n<p>Has anyone else run into this / have other suggestions? </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "friendly-id"], "comments": [{"owner": {"reputation": 1165, "user_id": 143238, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa7d5a8a0a4333e1e741aa41e802fc1?s=128&d=identicon&r=PG", "display_name": "BM5k", "link": "https://stackoverflow.com/users/143238/bm5k"}, "edited": false, "score": 0, "creation_date": 1462945771, "post_id": 37150328, "comment_id": 61845013, "body": "Unrelated to your question: you can add <code>touch: true</code> to your <code>Post.belongs_to :board</code> association and save a line of code in your controller."}], "answers": [{"comments": [{"owner": {"reputation": 103, "user_id": 6154320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1054f92666692a9ac9e6d73b9e4785b1?s=128&d=identicon&r=PG&f=1", "display_name": "indus", "link": "https://stackoverflow.com/users/6154320/indus"}, "edited": false, "score": 1, "creation_date": 1462947413, "post_id": 37154051, "comment_id": 61845727, "body": "I get the error undefined method `posts&#39;, but it works with @board.posts."}, {"owner": {"reputation": 1165, "user_id": 143238, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa7d5a8a0a4333e1e741aa41e802fc1?s=128&d=identicon&r=PG", "display_name": "BM5k", "link": "https://stackoverflow.com/users/143238/bm5k"}, "reply_to_user": {"reputation": 103, "user_id": 6154320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1054f92666692a9ac9e6d73b9e4785b1?s=128&d=identicon&r=PG&f=1", "display_name": "indus", "link": "https://stackoverflow.com/users/6154320/indus"}, "edited": false, "score": 0, "creation_date": 1462947577, "post_id": 37154051, "comment_id": 61845796, "body": "Yeah, I got a little carried away. Fixed."}], "tags": [], "owner": {"reputation": 1165, "user_id": 143238, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa7d5a8a0a4333e1e741aa41e802fc1?s=128&d=identicon&r=PG", "display_name": "BM5k", "link": "https://stackoverflow.com/users/143238/bm5k"}, "is_accepted": true, "score": 1, "last_activity_date": 1462947559, "last_edit_date": 1462947559, "creation_date": 1462945854, "answer_id": 37154051, "question_id": 37150328, "link": "https://stackoverflow.com/questions/37150328/how-to-get-actual-post-id-while-using-friendly-id/37154051#37154051", "title": "How to get actual post.id while using friendly_id", "body": "<p>Try scoping your <code>Post.find</code> by the board:</p>\n\n<p><code>@post = @board.posts.friendly.find params[:post_id]</code></p>\n"}], "owner": {"reputation": 103, "user_id": 6154320, "user_type": "registered", "accept_rate": 92, "profile_image": "https://www.gravatar.com/avatar/1054f92666692a9ac9e6d73b9e4785b1?s=128&d=identicon&r=PG&f=1", "display_name": "indus", "link": "https://stackoverflow.com/users/6154320/indus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 250, "favorite_count": 0, "accepted_answer_id": 37154051, "answer_count": 1, "score": 0, "last_activity_date": 1462947559, "creation_date": 1462921447, "last_edit_date": 1462924394, "question_id": 37150328, "link": "https://stackoverflow.com/questions/37150328/how-to-get-actual-post-id-while-using-friendly-id", "title": "How to get actual post.id while using friendly_id", "body": "<p>I currently have my post model using friendly_id to replace <code>Post.id</code> with <code>Post.pid</code>: \n<code>friendly_id :pid, :use =&gt; :scoped, :scope =&gt; :id</code></p>\n\n<p>How can I get the actual id of a post instead of the slug so that when a reply saves it saves <code>Post.id</code> and not <code>Post.slug</code> to <code>Reply.post_id</code>.</p>\n\n<p>I need to do this because replies are appearing to posts created on other boards due to <code>post.pid</code> not being unique </p>\n\n<pre><code>class RepliesController &lt; ApplicationController\n  def create\n    @board = Board.friendly.find(params[:board_id])\n    @post = Post.friendly.find(params[:post_id])\n    @reply = @post.replies.create(reply_params)\n    @post.touch\n    redirect_to @board\n  end\n  private\n    def reply_params\n      params.require(:reply).permit(:name, :email, :subject, :comment, :reply_file)\n    end\nend\n</code></pre>\n"}, {"tags": ["html", "ruby", "xpath", "nokogiri"], "answers": [{"tags": [], "owner": {"reputation": 74087, "user_id": 214790, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/f878c8230342730990acd21f889301d4?s=128&d=identicon&r=PG", "display_name": "matt", "link": "https://stackoverflow.com/users/214790/matt"}, "is_accepted": true, "score": 3, "last_activity_date": 1462923653, "last_edit_date": 1462923653, "creation_date": 1462922975, "answer_id": 37150562, "question_id": 37150162, "link": "https://stackoverflow.com/questions/37150162/how-do-i-get-all-the-text-under-a-tag-with-nokogiri/37150562#37150562", "title": "How do I get all the text under a tag with Nokogiri?", "body": "<p>There are two changes you will need to make to get all the <code>text</code> nodes. First <code>at_xpath</code> will only ever return a single node, so to get multiple nodes you\u2019ll need to use <code>xpath</code>.</p>\n\n<p>Second, to get all descendant nodes, not just child nodes, use <code>//</code> instead of <code>/</code>.</p>\n\n<p>Combining these, the line of code would be:</p>\n\n<pre><code>row.xpath('td[1]//text()').to_s\n</code></pre>\n\n<p>This will concatenate all the text nodes together, giving the result:</p>\n\n<pre><code>[\"Single line of text\", \"Text hereFirst lineSecond line\"]\n</code></pre>\n\n<p>which may not be what you want. Rather than just call <code>to_s</code> on the resulting nodeset you will need to process to fit your needs.</p>\n"}, {"tags": [], "owner": {"reputation": 331, "user_id": 3146754, "user_type": "registered", "profile_image": "https://i.stack.imgur.com/CbDyp.jpg?s=128&g=1", "display_name": "peregrine42", "link": "https://stackoverflow.com/users/3146754/peregrine42"}, "is_accepted": false, "score": 0, "last_activity_date": 1462923788, "creation_date": 1462923788, "answer_id": 37150717, "question_id": 37150162, "link": "https://stackoverflow.com/questions/37150162/how-do-i-get-all-the-text-under-a-tag-with-nokogiri/37150717#37150717", "title": "How do I get all the text under a tag with Nokogiri?", "body": "<p>How about this?</p>\n\n<pre><code>pp doc.search(\"//tr[2]//td//text()\").map { |item| item.text }\n</code></pre>\n\n<p>As matt says, you can get all descendants using <code>//</code>.</p>\n\n<p>You can also index the second <code>tr</code> if you want that one specifically. Just leave out the indexing to get all the <code>tr</code>s.</p>\n\n<p>And you can filter the resulting text objects to get only those that have a <code>td</code> upstream.</p>\n\n<p>Finally, map over each Nokogiri object, plucking out the text into the final array, which looks like this:</p>\n\n<pre><code>[\"Text here\", \"First line\", \"Second line\"]\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 270444, "user_id": 405017, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/2024054e404233ed97b7d9287aff103d?s=128&d=identicon&r=PG", "display_name": "Phrogz", "link": "https://stackoverflow.com/users/405017/phrogz"}, "is_accepted": false, "score": 0, "last_activity_date": 1463513923, "creation_date": 1463513923, "answer_id": 37284899, "question_id": 37150162, "link": "https://stackoverflow.com/questions/37150162/how-do-i-get-all-the-text-under-a-tag-with-nokogiri/37284899#37284899", "title": "How do I get all the text under a tag with Nokogiri?", "body": "<p>You want the <code>text</code> method of <code>Nokogiri::XML::Node</code> if you want to get all the text for any element:</p>\n\n<pre><code>p doc.xpath('//table[1]/tbody/tr').map{ |tr| tr.text.strip }\n#=&gt; [\"Single line of text\", \"Text hereFirst lineSecond line\"]\n</code></pre>\n\n<p>(The <code>strip</code> method just gets rid of leading and trailing whitespace.)</p>\n"}], "owner": {"reputation": 50, "user_id": 1371278, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/95347e8e7f2363ead9834fcbd20ae1af?s=128&d=identicon&r=PG", "display_name": "Matt Spaulding", "link": "https://stackoverflow.com/users/1371278/matt-spaulding"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 748, "favorite_count": 0, "accepted_answer_id": 37150562, "answer_count": 3, "score": 0, "last_activity_date": 1463513923, "creation_date": 1462920376, "question_id": 37150162, "link": "https://stackoverflow.com/questions/37150162/how-do-i-get-all-the-text-under-a-tag-with-nokogiri", "title": "How do I get all the text under a tag with Nokogiri?", "body": "<p>In this example I am trying to get the text from within the <code>&lt;td&gt;</code> tag of a table.  First, the html code.</p>\n\n<pre><code>&lt;table&gt;\n  &lt;tbody&gt;\n  &lt;tr&gt;\n    &lt;td&gt;Single line of text&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;tr&gt;\n    &lt;td&gt;Text here&lt;p&gt;First line&lt;/p&gt;&lt;p&gt;Second line&lt;/p&gt;&lt;/td&gt;\n  &lt;/tr&gt;\n  &lt;/tbody&gt;\n&lt;/table&gt;\n</code></pre>\n\n<p>Then the ruby code here.</p>\n\n<pre><code>require 'nokogiri'\nrequire 'pp'\n\nhtml = File.open('test.html').read\ndoc = Nokogiri::HTML(html)\nrows = doc.xpath('//table[1]/tbody/tr')\n\ndata = rows.collect do |row|\n  row.at_xpath('td[1]/text()').to_s\nend\n\npp data\n</code></pre>\n\n<p>And the result that I get is.</p>\n\n<pre><code>[\"Single line of text\", \"Text here\"]\n</code></pre>\n\n<p>How can I get all of the text in the second <code>&lt;td&gt;</code> tag?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "devise", "ip-address", "acts-as-votable"], "comments": [{"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 1, "creation_date": 1462919104, "post_id": 37149910, "comment_id": 61837816, "body": "IP addresses cannot safely be used as identifier.  You need authentication."}, {"owner": {"reputation": 21, "user_id": 6317488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2316a329c057025dc31de6a3a040ba06?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Webb", "link": "https://stackoverflow.com/users/6317488/daniel-webb"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1462919370, "post_id": 37149910, "comment_id": 61837899, "body": "There is multiple websites that use this technique. So it&#39;s possible."}, {"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1462919550, "post_id": 37149910, "comment_id": 61837950, "body": "It&#39;s a horrible idea.  IPs are often shared by many people (sometimes entire cities or countries), and mobile devices can change IPs frequently."}, {"owner": {"reputation": 21, "user_id": 6317488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2316a329c057025dc31de6a3a040ba06?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Webb", "link": "https://stackoverflow.com/users/6317488/daniel-webb"}, "reply_to_user": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1462919845, "post_id": 37149910, "comment_id": 61838030, "body": "Okay, thanks for insight! Is there any other way to do it without having to login?"}, {"owner": {"reputation": 796419, "user_id": 34397, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/7deca8ec973c3c0875e9a36e1e3e2c44?s=128&d=identicon&r=PG", "display_name": "SLaks", "link": "https://stackoverflow.com/users/34397/slaks"}, "edited": false, "score": 0, "creation_date": 1462920458, "post_id": 37149910, "comment_id": 61838250, "body": "Depending on what you actually want, even logins won&#39;t help.  How will you prevent people from logging in with two different accounts?"}, {"owner": {"reputation": 2958, "user_id": 3597730, "user_type": "registered", "accept_rate": 48, "profile_image": "https://www.gravatar.com/avatar/d76b8f632aeb1d920d79d7dd5ab63097?s=128&d=identicon&r=PG", "display_name": "ruby_newbie", "link": "https://stackoverflow.com/users/3597730/ruby-newbie"}, "edited": false, "score": 0, "creation_date": 1462920477, "post_id": 37149910, "comment_id": 61838260, "body": "&quot;There is multiple websites that use this technique. So it&#39;s possible.&quot;  Name 6"}, {"owner": {"reputation": 324, "user_id": 978414, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/a3d383b96e7b52fc6d0592d0d9baecda?s=128&d=identicon&r=PG", "display_name": "ivann", "link": "https://stackoverflow.com/users/978414/ivann"}, "edited": false, "score": 0, "creation_date": 1462999086, "post_id": 37149910, "comment_id": 61880282, "body": "You can&#39;t really prevent people from voting multiple times, you can only make it harder, with authentication people will just create multiple accounts, with ip verification people will use multiple devices, proxies, vpn, tor or just reconnect for those who still have a dynamic ip. The thing is IP verification is not only inefficient against multivoters but it will block legitimate voters who have no choice but to share an ip."}], "owner": {"reputation": 21, "user_id": 6317488, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/2316a329c057025dc31de6a3a040ba06?s=128&d=identicon&r=PG&f=1", "display_name": "Daniel Webb", "link": "https://stackoverflow.com/users/6317488/daniel-webb"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 70, "favorite_count": 0, "answer_count": 0, "score": 2, "last_activity_date": 1462918854, "creation_date": 1462918854, "question_id": 37149910, "link": "https://stackoverflow.com/questions/37149910/vote-using-ip-address-and-acts-as-votable-gem", "title": "Vote using IP Address and Acts As Votable Gem", "body": "<p>I want to be able to vote on my links without having to login through something like devise or other authentication system. I have devised installed on my application and it's up and running and works fine. But I don't want the user to have to be logged in to vote. I was thinking doing it through the IP Address and would be thankful if someone can help me through this process.</p>\n\n<p>I want to clarify that I can vote without problem when I am logged in.</p>\n\n<p>This is how my links_controller#upvote looks like:</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>def upvote\r\n  @link = Link.find(find_link)\r\n  respond_to do |format|\r\n  unless current_user.voted_for? @link\r\n    format.html { redirect_to :back }\r\n    format.json { head :no_content }\r\n    format.js { render :layout =&gt; false }\r\n    @link.cached_votes_total = @link.cached_votes_total + 1\r\n    @link.save\r\n    @link.upvote_by current_user\r\n  else\r\n    flash[:danger] = 'You allready voted this entry'\r\n    format.html { redirect_to :back }\r\n    format.json { head :no_content }\r\n    format.js\r\n  end\r\n end\r\nend</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>link.rb</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>acts_as_votable</code></pre>\r\n</div>\r\n</div>\r\n</p>\n\n<p>user.rb (using devise)</p>\n\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-html lang-html prettyprint-override\"><code>acts_as_voter</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "syntax"], "comments": [{"owner": {"reputation": 5358, "user_id": 2399861, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5fbe887e0a643cd477ba3f14fa528f84?s=128&d=identicon&r=PG", "display_name": "Ruby Racer", "link": "https://stackoverflow.com/users/2399861/ruby-racer"}, "edited": false, "score": 0, "creation_date": 1462918077, "post_id": 37149680, "comment_id": 61837475, "body": "Activerecord scoping produces an abstract sub-class or collection. Subsequent methods apply to the latter collection. So,  basically, there is not much more you can do."}, {"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "reply_to_user": {"reputation": 5358, "user_id": 2399861, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5fbe887e0a643cd477ba3f14fa528f84?s=128&d=identicon&r=PG", "display_name": "Ruby Racer", "link": "https://stackoverflow.com/users/2399861/ruby-racer"}, "edited": false, "score": 0, "creation_date": 1462918429, "post_id": 37149680, "comment_id": 61837589, "body": "Thank you and you&#39;re absolutely right, this is what I am reading on atm."}], "answers": [{"comments": [{"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462918683, "post_id": 37149829, "comment_id": 61837684, "body": "I think you might be right, though it would of been sexy, it only really save one line."}], "tags": [], "owner": {"reputation": 10323, "user_id": 1220355, "user_type": "registered", "accept_rate": 75, "profile_image": "https://www.gravatar.com/avatar/cb2525ec6155e479bdefe9ed6c437d07?s=128&d=identicon&r=PG", "display_name": "Anthony E", "link": "https://stackoverflow.com/users/1220355/anthony-e"}, "is_accepted": false, "score": 1, "last_activity_date": 1462918282, "creation_date": 1462918282, "answer_id": 37149829, "question_id": 37149680, "link": "https://stackoverflow.com/questions/37149680/ruby-on-rails-association-build-and-assign-2-related-associations/37149829#37149829", "title": "Ruby on Rails Association build and assign 2 related associations", "body": "<p>In my opinion, I think the approach you propose is fine. It's one extra line of code, but doesn't really increase the complexity of  your controller.</p>\n\n<p>Another option is to merge the <code>user_id</code> and <code>building_id</code>, in your request params:</p>\n\n<pre><code>permitted_mr_params.merge(user_id: current_user.id, building_id: current_user.building_id)\n@maintenance_request = MaintenanceRequest.create(permitted_mr_params)\n</code></pre>\n\n<p>Or, if you're not concerned about mass-assignment, set <code>user_id</code> and <code>building_id</code> as a hidden field in your form. I don't see a tremendous benefit, however, as you'll have to whitelist the params.</p>\n"}, {"comments": [{"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462919303, "post_id": 37149907, "comment_id": 61837880, "body": "I totally agree, however... users can change buildings as these are residents and administrators. I do what you describe whenever I can, but I cannot find a way to persist the building, independently of the users &quot;current_building&quot;."}, {"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462920069, "post_id": 37149907, "comment_id": 61838118, "body": "I think this might be the most appropriate method as it sort of an unspoken business rule that a maintenance request building is the user&#39;s building at the time of creation! Very nice!"}], "tags": [], "owner": {"reputation": 5358, "user_id": 2399861, "user_type": "registered", "accept_rate": 85, "profile_image": "https://www.gravatar.com/avatar/5fbe887e0a643cd477ba3f14fa528f84?s=128&d=identicon&r=PG", "display_name": "Ruby Racer", "link": "https://stackoverflow.com/users/2399861/ruby-racer"}, "is_accepted": false, "score": 1, "last_activity_date": 1462919813, "last_edit_date": 1462919813, "creation_date": 1462918826, "answer_id": 37149907, "question_id": 37149680, "link": "https://stackoverflow.com/questions/37149680/ruby-on-rails-association-build-and-assign-2-related-associations/37149907#37149907", "title": "Ruby on Rails Association build and assign 2 related associations", "body": "<p>My approach would be to skip</p>\n\n<pre><code>maintenance_request belongs_to :building\n</code></pre>\n\n<p>since it already belongs to it through the user. Instead,  you can define a method</p>\n\n<pre><code>class MaintenanceRequest\n    belongs_to :user\n\n    def building\n        user.building\n    end\n\n    #more class stuff\nend\n</code></pre>\n\n<p>Also, in building class</p>\n\n<pre><code>class Building\n     has_many :users\n     has_many :maintenance_requests,  through: :users\n\n    #more stuff\nend\n</code></pre>\n\n<p>So you can completely omit explicit building association with maintenance_request</p>\n\n<p><strong>UPDATE</strong>\nSince users can move across buildings, you can set automatic behavior with a callback. The job will be done like you do it, but in a more Railsey way</p>\n\n<pre><code>class MaintenanceRequest\n     #stuff\n     before_create {\n         building=user.building\n     }\nend\n</code></pre>\n\n<p>So, when you create the <code>maintenance_request</code> for the user,  the building will be set accordingly</p>\n"}, {"comments": [{"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462979483, "post_id": 37154583, "comment_id": 61868607, "body": "Omg! Thank you, but I don&#39;t quite understand how this works? It looks to me like I&#39;m querying for specific building, but it assigns just as you said."}, {"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462981749, "post_id": 37154583, "comment_id": 61870232, "body": "In fact, I can now write <code>current_user.maintenance_requests.build</code> and the building will still be assigned."}, {"owner": {"reputation": 1165, "user_id": 143238, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa7d5a8a0a4333e1e741aa41e802fc1?s=128&d=identicon&r=PG", "display_name": "BM5k", "link": "https://stackoverflow.com/users/143238/bm5k"}, "reply_to_user": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462982015, "post_id": 37154583, "comment_id": 61870434, "body": "The scope modifies the association so that any maintenance requests accessed through a user have that scope applied. Rails knows how to apply the scope differently for find and for build/create."}, {"owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "edited": false, "score": 0, "creation_date": 1462985727, "post_id": 37154583, "comment_id": 61872721, "body": "Very nice! I&#39;ve tried it out and it also works with any plain scope! Ex: <code>current_user.mainteance_request.pending.build</code> returns a pending maintenance request with user_id, building_id and status assigned. So awesome, thank you so very much!"}], "tags": [], "owner": {"reputation": 1165, "user_id": 143238, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa7d5a8a0a4333e1e741aa41e802fc1?s=128&d=identicon&r=PG", "display_name": "BM5k", "link": "https://stackoverflow.com/users/143238/bm5k"}, "is_accepted": true, "score": 1, "last_activity_date": 1462947953, "creation_date": 1462947953, "answer_id": 37154583, "question_id": 37149680, "link": "https://stackoverflow.com/questions/37149680/ruby-on-rails-association-build-and-assign-2-related-associations/37154583#37154583", "title": "Ruby on Rails Association build and assign 2 related associations", "body": "<p>From the <a href=\"http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html#method-i-has_many-label-Scopes\" rel=\"nofollow\">has_many</a> doc</p>\n\n<blockquote>\n  <p>You can pass a second argument scope as a callable (i.e. proc or lambda) to retrieve a specific set of records or customize the generated query when you access the associated collection.</p>\n</blockquote>\n\n<p>I.e</p>\n\n<pre><code>class User &lt; ActiveRecord::Base\n  has_many :maintenance_requests, -&gt;(user){building: user.building}, through: :users\nend\n</code></pre>\n\n<p>Then your desired one line should \"just work\" <code>current_user.building.maintenance_requests.build(permitted_mr_params)</code></p>\n\n<p>Alternatively, if you are using <a href=\"https://github.com/CanCanCommunity/cancancan\" rel=\"nofollow\">cancancan</a> you can add hash conditions in your ability file</p>\n\n<p><code>can :create, MaintenanceRequest, user: @user.id, building: @user.building_id</code></p>\n"}], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 53, "favorite_count": 0, "accepted_answer_id": 37154583, "answer_count": 3, "score": 2, "last_activity_date": 1462947953, "creation_date": 1462917549, "question_id": 37149680, "link": "https://stackoverflow.com/questions/37149680/ruby-on-rails-association-build-and-assign-2-related-associations", "title": "Ruby on Rails Association build and assign 2 related associations", "body": "<p>So I've got a <code>User</code> model, a <code>Building</code> model, and a <code>MaintenanceRequest</code> model.</p>\n\n<p>A user <code>has_many :maintenance_requests</code>, but <code>belongs_to :building</code>.</p>\n\n<p>A maintenance requests <code>belongs_to :building</code>, and <code>belongs_to: user</code></p>\n\n<p>I'm trying to figure out how to send a new, then create a maintenance request.</p>\n\n<p>What I'd like to do is:</p>\n\n<pre><code>@maintenance_request = current_user.building.maintenance_requests.build(permitted_mr_params)\n=&gt; #&lt;MaintenanceRequest id: nil, user_id: 1, building_id: 1&gt; \n</code></pre>\n\n<p>And have a new maintenance request with the user and building set to it's parent associations.</p>\n\n<p>What I have to do:</p>\n\n<pre><code>@maintenance_request = current_user.maintenance_requests.build(permitted_mr_params)\n@maintenance_request.building = current_user.building\n</code></pre>\n\n<p>It would be nice if I could get the maintenance request to set its building based of the user's building.</p>\n\n<p>Obviously, I can work around this, but I'd really appreciate the syntactic sugar.</p>\n"}, {"tags": ["ruby", "rubygems"], "answers": [{"tags": [], "owner": {"reputation": 31711, "user_id": 634576, "user_type": "registered", "accept_rate": 91, "profile_image": "https://www.gravatar.com/avatar/48891dab622b535f3c2b4ec1c8765bed?s=128&d=identicon&r=PG", "display_name": "Dave Schweisguth", "link": "https://stackoverflow.com/users/634576/dave-schweisguth"}, "is_accepted": true, "score": 8, "last_activity_date": 1560198625, "last_edit_date": 1560198625, "creation_date": 1462918215, "answer_id": 37149817, "question_id": 37149483, "link": "https://stackoverflow.com/questions/37149483/difference-between-update-rubygems-and-gem-update-system/37149817#37149817", "title": "Difference between `update_rubygems` and `gem update --system`", "body": "<p><code>gem install rubygems-update; update_rubygems</code> was needed in some old versions of rubygems, but <code>gem update --system</code> is all that's needed for the foreseeable future.</p>\n\n<p>rubygems 1.1 and 1.2 had bugs that prevented <code>gem update --system</code> from working the first time, so you had to use those first two commands to upgrade at all. There would be no reason to run <code>gem update --system</code> immediately thereafter, because rubygems would already be updated, but doing so would demonstrate that you would be able to run that command in the future.</p>\n\n<p>Versions of rubygems before 1.5.2 did not accept a version argument following <code>gem update --system</code>, so you had to use the first two commands you give to install an arbitrary version of rubygems. You wouldn't want to run <code>gem update --system</code> immediately thereafter; it would undo what you'd just done.</p>\n\n<p>More here: <a href=\"https://github.com/rubygems/rubygems/blob/master/UPGRADING.md\" rel=\"nofollow noreferrer\">https://github.com/rubygems/rubygems/blob/master/UPGRADING.md</a></p>\n"}], "owner": {"reputation": 632, "user_id": 1369417, "user_type": "registered", "accept_rate": 40, "profile_image": "https://www.gravatar.com/avatar/3fe7b2076242c215b1fdee469ac7d9fe?s=128&d=identicon&r=PG", "display_name": "Joshua Spence", "link": "https://stackoverflow.com/users/1369417/joshua-spence"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 3267, "favorite_count": 3, "accepted_answer_id": 37149817, "answer_count": 1, "score": 7, "last_activity_date": 1560198625, "creation_date": 1462916615, "last_edit_date": 1495541340, "question_id": 37149483, "link": "https://stackoverflow.com/questions/37149483/difference-between-update-rubygems-and-gem-update-system", "title": "Difference between `update_rubygems` and `gem update --system`", "body": "<p>What is the difference between this command:</p>\n\n<pre><code>gem update --system\n</code></pre>\n\n<p>And these commands:</p>\n\n<pre><code>gem install rubygems-update\nupdate_rubygems\ngem update --system\n</code></pre>\n\n<p>I would've assumed that the former would be all that is required in order to update to the latest version of RubyGems, but I have found many references (including <a href=\"https://stackoverflow.com/a/13626200/1369417\">https://stackoverflow.com/a/13626200/1369417</a>) which recommend the latter.</p>\n"}, {"tags": ["ruby", "regex"], "comments": [{"owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1462916709, "post_id": 37149435, "comment_id": 61836972, "body": "Use lazy matching: <code>&#47;b\\((.*?)\\)&#47;</code>"}, {"owner": {"reputation": 39, "user_id": 5712120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f8ca8c32e118b15fefe6506685d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Daviz Castilla", "link": "https://stackoverflow.com/users/5712120/daviz-castilla"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1462916885, "post_id": 37149435, "comment_id": 61837047, "body": "Ok, one thing is solved, but I still have the problems with <b>the h group tags</b>"}, {"owner": {"reputation": 39, "user_id": 5712120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f8ca8c32e118b15fefe6506685d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Daviz Castilla", "link": "https://stackoverflow.com/users/5712120/daviz-castilla"}, "reply_to_user": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "edited": false, "score": 0, "creation_date": 1462917103, "post_id": 37149435, "comment_id": 61837135, "body": "<b>The problem is located in the values that are sets</b>"}], "answers": [{"comments": [{"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 39, "user_id": 5712120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f8ca8c32e118b15fefe6506685d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Daviz Castilla", "link": "https://stackoverflow.com/users/5712120/daviz-castilla"}, "edited": false, "score": 0, "creation_date": 1462919118, "post_id": 37149700, "comment_id": 61837819, "body": "You included the part where I wrote <code>+actualNode[2]</code>? You scrolled to see the whole line?"}, {"owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "reply_to_user": {"reputation": 39, "user_id": 5712120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f8ca8c32e118b15fefe6506685d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Daviz Castilla", "link": "https://stackoverflow.com/users/5712120/daviz-castilla"}, "edited": false, "score": 0, "creation_date": 1462919215, "post_id": 37149700, "comment_id": 61837852, "body": "I tested this in irb."}], "tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": false, "score": 1, "last_activity_date": 1462917647, "creation_date": 1462917647, "answer_id": 37149700, "question_id": 37149435, "link": "https://stackoverflow.com/questions/37149435/regex-chain-replacement-issue/37149700#37149700", "title": "Regex chain replacement issue", "body": "<p>Instead of the <code>gsub!</code> line try this...</p>\n\n<pre><code>strfile = actualNode[1]+actualNode[0].match(strfile)[1]+actualNode[2] if actualNode[0].match(strfile)\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 481662, "user_id": 3832970, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/64323e6cf08401474da3bf770ea13b58?s=128&d=identicon&r=PG&f=1", "display_name": "Wiktor Stribi\u017cew", "link": "https://stackoverflow.com/users/3832970/wiktor-stribi%c5%bcew"}, "is_accepted": true, "score": 2, "last_activity_date": 1462920914, "creation_date": 1462920914, "answer_id": 37150249, "question_id": 37149435, "link": "https://stackoverflow.com/questions/37149435/regex-chain-replacement-issue/37150249#37150249", "title": "Regex chain replacement issue", "body": "<p>You need to define the regexes in this order (and mind the lazy matching with strong, underline and bold tags and the word boundary <code>\\b</code> in front of each of those to make sure we do not match parts of words):</p>\n\n<pre><code>regExes = {\n\n    h3: [/^### (.*)$/, \"&lt;h3&gt;\", \"&lt;/h3&gt;\"],\n    h2: [/^## (.*)$/, \"&lt;h2&gt;\", \"&lt;/h2&gt;\"],\n    h1: [/^# (.*)$/, \"&lt;h1&gt;\", \"&lt;/h1&gt;\"],\n    b: [/\\bb\\((.*?)\\)/, \"&lt;strong&gt;\", \"&lt;/strong&gt;\"],\n    i: [/\\bi\\((.*?)\\)/, \"&lt;i&gt;\", \"&lt;/i&gt;\"],\n    u: [/\\bu\\((.*?)\\)/, \"&lt;u&gt;\", \"&lt;/u&gt;\"],\n}\n</code></pre>\n\n<p>and then use a non-destructive <code>gsub</code>:</p>\n\n<pre><code>input = input.gsub(actualNode[0], \"#{actualNode[1]}\\\\1#{actualNode[2]}\")\n</code></pre>\n\n<p>See this <a href=\"http://ideone.com/7Q3wZJ\" rel=\"nofollow\">IDEONE demo</a></p>\n"}], "owner": {"reputation": 39, "user_id": 5712120, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/e6f8ca8c32e118b15fefe6506685d9fb?s=128&d=identicon&r=PG&f=1", "display_name": "Daviz Castilla", "link": "https://stackoverflow.com/users/5712120/daviz-castilla"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 39, "favorite_count": 0, "accepted_answer_id": 37150249, "answer_count": 2, "score": 2, "last_activity_date": 1462921960, "creation_date": 1462916455, "last_edit_date": 1462921960, "question_id": 37149435, "link": "https://stackoverflow.com/questions/37149435/regex-chain-replacement-issue", "title": "Regex chain replacement issue", "body": "<p>I try to develop a <strong>super basic</strong> template language, and I have a problem with RegEx, I try to convert this:</p>\n\n<pre><code># Tilte\n## Subtitle\n### Subsubtitle\nLorem ipsum b(dolor) sit i(amet), consectetur u(adipisicing) elit\n</code></pre>\n\n<p>to this:</p>\n\n<pre><code>&lt;h1&gt;Title&lt;/h1&gt;\n&lt;h2&gt;Subtilte&lt;/h2&gt;\n&lt;h3&gt;Subsubtitle&lt;/h3&gt;\nLorem ipsum &lt;strong&gt;dolor&lt;/strong&gt; sit &lt;i&gt;amet&lt;/i&gt;, consectetur &lt;u&gt;adipisicing&lt;/u&gt; elit\n</code></pre>\n\n<p>But I get this:</p>\n\n<pre><code>&lt;h1&gt;&lt;/h1&gt;\n&lt;h2&gt;TEma 4&lt;/h2&gt;\n&lt;h3&gt;Subtitle&lt;/h3&gt;\nLorem ipsum &lt;strong&gt;Subsubtitle&lt;/strong&gt; sit i(amet), consectetur u(adipisicing) elit\n</code></pre>\n\n<p>Here is my code:</p>\n\n<pre><code>input = ARGV[0]\n\nregExes = {\n\n    h1: [/^# (.*)$/, \"&lt;h1&gt;\", \"&lt;/h1&gt;\"],\n    h2: [/^## (.*)$/, \"&lt;h2&gt;\", \"&lt;/h2&gt;\"],\n    h3: [/^### (.*)$/, \"&lt;h3&gt;\", \"&lt;/h3&gt;\"],\n    b: [/b\\((.*)\\)/, \"&lt;strong&gt;\", \"&lt;/strong&gt;\"],\n\n}\n\nstrFile = File.read input\n\nputs \"\\t\", strFile\n\nfor index, regEx  in regExes\n\n    actualNode = regExes[index]\n    print actualNode, \"\\n\"\n    strFile.gsub! actualNode[0], \"#{actualNode[1]}#{$1}#{actualNode[2]}\"\n\nend\n\nputs strFile\n</code></pre>\n\n<p>What should I do?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "routes"], "comments": [{"owner": {"reputation": 1165, "user_id": 143238, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa7d5a8a0a4333e1e741aa41e802fc1?s=128&d=identicon&r=PG", "display_name": "BM5k", "link": "https://stackoverflow.com/users/143238/bm5k"}, "edited": false, "score": 0, "creation_date": 1462946723, "post_id": 37149279, "comment_id": 61845415, "body": "Possible typo? Your code uses <code>subscribers</code> but you call the route <code>subscriptions</code>."}], "answers": [{"tags": [], "owner": {"reputation": 32451, "user_id": 2516474, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/7a2179a340c0e84edc285d432211145d?s=128&d=identicon&r=PG", "display_name": "SteveTurczyn", "link": "https://stackoverflow.com/users/2516474/steveturczyn"}, "is_accepted": true, "score": 3, "last_activity_date": 1462916244, "creation_date": 1462916244, "answer_id": 37149394, "question_id": 37149279, "link": "https://stackoverflow.com/questions/37149279/rails-routing-error-no-route-error/37149394#37149394", "title": "Rails routing error. no route error", "body": "<p>The expected way to add a collection custom method is this...</p>\n\n<pre><code>resources :subscribers, except: :show do\n  collection do\n    post 'validate'\n  end\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 838, "user_id": 4293498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-vL0LI3fnVaQ/AAAAAAAAAAI/AAAAAAAAAHk/XNooT0Gtww0/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4293498/chris"}, "is_accepted": false, "score": 2, "last_activity_date": 1462916531, "creation_date": 1462916531, "answer_id": 37149458, "question_id": 37149279, "link": "https://stackoverflow.com/questions/37149279/rails-routing-error-no-route-error/37149458#37149458", "title": "Rails routing error. no route error", "body": "<p>I'm a bit confused where exactly you issue your request but this could be due to one (or more) of the following mistakes:</p>\n\n<ul>\n<li>you wrote that you type in your browser /subscriptions/validate but your routes are configured as /subscribers/validate</li>\n<li>you set the route as a POST request. if you type the URI into your browser and press enter then this is a GET request and not a POST</li>\n</ul>\n"}], "owner": {"reputation": 6503, "user_id": 5650878, "user_type": "registered", "accept_rate": 89, "profile_image": "https://i.stack.imgur.com/xh7BI.png?s=128&g=1", "display_name": "Bitwise", "link": "https://stackoverflow.com/users/5650878/bitwise"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 49, "favorite_count": 0, "accepted_answer_id": 37149394, "answer_count": 2, "score": 1, "last_activity_date": 1462916531, "creation_date": 1462915721, "question_id": 37149279, "link": "https://stackoverflow.com/questions/37149279/rails-routing-error-no-route-error", "title": "Rails routing error. no route error", "body": "<p>I have a resources :subscribers definitions in my routes file but I also have a action named validate in my controller. I'm trying to render a view to validate but I keep getting in error that says routing error when I put the address in the URL. I'm wondering what I'm doing wrong? I'll post my code for clarity.</p>\n\n<p>CONTROLLER </p>\n\n<pre><code>class SubscribersController &lt; ApplicationController\ndef index\n@subscriber = Subscriber.all\nend\n\ndef new\n@subscriber = Subscriber.new\nend\n\ndef create\n@subscriber = Subscriber.create(subscriber_params)\nif @subscriber.save\n  flash[:success] = \"Subscriber Has Been successfully Created\"\n  redirect_to new_subscriber_path(:subscriber)\n else\n  render \"new\"\nend\nend\n\ndef edit\nend\n\ndef destroy\nend\n\ndef update\nend\n\ndef validate\n@subscriber = Subscriber.all\nend\n\ndef show\nend\n\nprivate\n\ndef subscriber_params\nparams.require(:subscriber).permit(:first_name, :last_name, :email, :phone_number)\nend\nend\n</code></pre>\n\n<p>View</p>\n\n<pre><code>   &lt;h1&gt;This is the form for phone number validation&lt;/h1&gt;\n\n&lt;%= form_for @subscribers do |form| %&gt;\n\n&lt;div class=\"form-group\"&gt;\n&lt;p&gt;\n&lt;%= form.label :phone_number %&gt;\n&lt;%= form.text_field :phone_number %&gt;\n&lt;/p&gt;\n&lt;/div&gt;  \n\n &lt;% end %&gt;\n</code></pre>\n\n<p>ROUTES file</p>\n\n<pre><code> Rails.application.routes.draw do\n devise_for :users\n resources :subscribers, except: :show\n\n root \"welcomes#index\"\n\n  post \"subscribers/validate\", to: \"subscribers#validate\"\n</code></pre>\n\n<p>That is my code, As you can see when I put /subscriptions/validate shouldn't it put up the posted view?</p>\n"}, {"tags": ["ruby-on-rails", "arrays", "ruby", "postgresql", "ruby-on-rails-4"], "answers": [{"comments": [{"owner": {"reputation": 4405, "user_id": 160604, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a579634c2cb8a4623e33bf7dd44a50d5?s=128&d=identicon&r=PG", "display_name": "iftheshoefritz", "link": "https://stackoverflow.com/users/160604/iftheshoefritz"}, "edited": false, "score": 0, "creation_date": 1462960156, "post_id": 37149510, "comment_id": 61853736, "body": "Is there a performance / memory cost of including the module every time the hours attribute is used?"}, {"owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "reply_to_user": {"reputation": 4405, "user_id": 160604, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a579634c2cb8a4623e33bf7dd44a50d5?s=128&d=identicon&r=PG", "display_name": "iftheshoefritz", "link": "https://stackoverflow.com/users/160604/iftheshoefritz"}, "edited": false, "score": 0, "creation_date": 1462977754, "post_id": 37149510, "comment_id": 61867356, "body": "Yes, It&#39;s about 15x slower. But negligible unless you call this method a LOT of times. Also notice that <code>include</code> didn&#39;t work.  What you actually want to do is to use <code>extend</code>. I&#39;ve edited my answer and added a benchmark"}], "tags": [], "owner": {"reputation": 15775, "user_id": 634513, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/328293e03f2d7b888ecf197ec1ffb7a7?s=128&d=identicon&r=PG", "display_name": "Ismael Abreu", "link": "https://stackoverflow.com/users/634513/ismael-abreu"}, "is_accepted": true, "score": 1, "last_activity_date": 1462978024, "last_edit_date": 1462978024, "creation_date": 1462916728, "answer_id": 37149510, "question_id": 37149277, "link": "https://stackoverflow.com/questions/37149277/override-postgres-array-type-shift-operator/37149510#37149510", "title": "override Postgres array type shift operator", "body": "<p>That method is defined in the Array class, so you can't do that in your model.</p>\n\n<p>One way you can achieve that is through a mixin </p>\n\n<pre><code>module WithShift\n  def &lt;&lt; arg\n    # do something \n  end\nend\n\n\ndef hours\n  read_attribute(\"hours\").extend(WithShift)\nend\n</code></pre>\n\n<p>This is slower. But it shouldn't be a show stopper. Here is some basic benchmark.</p>\n\n<pre><code>require 'benchmark/ips'\nmodule WithShift\n  def &lt;&lt; arg\n  end\nend\ndef with_extend; [1,2,3].extend(WithShift); end\n\ndef base; [1,2,3]; end\n\nBenchmark.ips do |x|\n  x.report(\"base\") { base }\n  x.report(\"with extend\") { with_extend }\n  x.compare!\nend\n\n\nCalculating -------------------------------------\n                base      5.506M (\u00b1 9.1%) i/s -     27.415M in   5.022561s\n         with extend    349.984k (\u00b1 7.6%) i/s -      1.769M in   5.081799s\n\nComparison:\n                base:  5505897.2 i/s\n         with extend:   349984.1 i/s - 15.73x slower\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 1165, "user_id": 143238, "user_type": "registered", "accept_rate": 60, "profile_image": "https://www.gravatar.com/avatar/faa7d5a8a0a4333e1e741aa41e802fc1?s=128&d=identicon&r=PG", "display_name": "BM5k", "link": "https://stackoverflow.com/users/143238/bm5k"}, "is_accepted": false, "score": 1, "last_activity_date": 1462947048, "creation_date": 1462947048, "answer_id": 37154339, "question_id": 37149277, "link": "https://stackoverflow.com/questions/37149277/override-postgres-array-type-shift-operator/37154339#37154339", "title": "override Postgres array type shift operator", "body": "<p>Building on @ismael's answer, in ruby <code>=</code> is part of the setter's method name.</p>\n\n<p>This code\n<code>\ndef hours= arr\nend\n</code>\ncreates a method named <code>hours=</code> whereas <code>&lt;&lt;</code> is an operator, and isn't allowed as part of a method name. It <em>is</em> possible to define custom operators, and @ismael includes an example of how to do that.</p>\n"}], "owner": {"reputation": 4405, "user_id": 160604, "user_type": "registered", "accept_rate": 74, "profile_image": "https://www.gravatar.com/avatar/a579634c2cb8a4623e33bf7dd44a50d5?s=128&d=identicon&r=PG", "display_name": "iftheshoefritz", "link": "https://stackoverflow.com/users/160604/iftheshoefritz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 70, "favorite_count": 0, "accepted_answer_id": 37149510, "answer_count": 2, "score": 0, "last_activity_date": 1462978024, "creation_date": 1462915714, "question_id": 37149277, "link": "https://stackoverflow.com/questions/37149277/override-postgres-array-type-shift-operator", "title": "override Postgres array type shift operator", "body": "<p>Is it possible to override the <code>&lt;&lt;</code> operator for a postgres array type attribute created by ActiveRecord?</p>\n\n<p>Column definition:</p>\n\n<pre><code>t.time \"hours\", default: [], array: true\n</code></pre>\n\n<p>This seems to work:</p>\n\n<pre><code>def hours=(arr)\n  super(arr.map {|h| # do some stuff with each element})\nend\n</code></pre>\n\n<p>This doesn't:</p>\n\n<pre><code>def hours&lt;&lt;(val)\n  super(# do some stuff before pushing)\nend\n</code></pre>\n\n<p>Note that this is not an association created by <code>has_many</code> where I can add a block to overload methods. </p>\n"}, {"tags": ["ruby-on-rails", "ruby", "model-view-controller", "devise", "before-filter"], "comments": [{"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1462915298, "post_id": 37149116, "comment_id": 61836385, "body": "This mean, the before_action method should not be affecting these two methods? but, Im getting redirect to wrong routes when using before action and the two methods in application controller"}], "answers": [{"comments": [{"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1462917853, "post_id": 37149562, "comment_id": 61837395, "body": "I know this, but it seems that before_action affect the redirecting of after_sign_in_path_for method, so how should I fix this?"}, {"owner": {"reputation": 838, "user_id": 4293498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-vL0LI3fnVaQ/AAAAAAAAAAI/AAAAAAAAAHk/XNooT0Gtww0/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4293498/chris"}, "reply_to_user": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1462919021, "post_id": 37149562, "comment_id": 61837784, "body": "please post some code otherwise it is really hard to help"}, {"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1462919226, "post_id": 37149562, "comment_id": 61837857, "body": "i posted the code along with the error message im getting"}, {"owner": {"reputation": 838, "user_id": 4293498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-vL0LI3fnVaQ/AAAAAAAAAAI/AAAAAAAAAHk/XNooT0Gtww0/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4293498/chris"}, "reply_to_user": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1462948754, "post_id": 37149562, "comment_id": 61846423, "body": "Do the <code>after_sign_in_paths</code> as stated in the tutorial. About the <code>authenticate!</code> method i&#39;m not sure cause I don&#39;t know what <code>current_customer</code> and <code>current_vendor</code> are calling. Where are these methods defined?"}, {"owner": {"reputation": 838, "user_id": 4293498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-vL0LI3fnVaQ/AAAAAAAAAAI/AAAAAAAAAHk/XNooT0Gtww0/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4293498/chris"}, "reply_to_user": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1462949600, "post_id": 37149562, "comment_id": 61846916, "body": "also i dont see the sense that a user is being redirected to dashboard/edit his account after signing in AND signing out."}, {"owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "edited": false, "score": 0, "creation_date": 1462950519, "post_id": 37149562, "comment_id": 61847495, "body": "oh, sorry I havent made an update on this question, I updated the code, the user is to be redirect to dashboard/edit upon sucessful log in and homepage upon sucessful log out"}], "tags": [], "owner": {"reputation": 838, "user_id": 4293498, "user_type": "registered", "accept_rate": 50, "profile_image": "https://lh4.googleusercontent.com/-vL0LI3fnVaQ/AAAAAAAAAAI/AAAAAAAAAHk/XNooT0Gtww0/photo.jpg?sz=128", "display_name": "Chris", "link": "https://stackoverflow.com/users/4293498/chris"}, "is_accepted": true, "score": 0, "last_activity_date": 1462916970, "creation_date": 1462916970, "answer_id": 37149562, "question_id": 37149116, "link": "https://stackoverflow.com/questions/37149116/how-to-use-before-action-with-after-sign-in-path-for-and-after-inactive-sign-up/37149562#37149562", "title": "how to use before_action with after_sign_in_path_for and after_inactive_sign_up_path_for methods?", "body": "<p>I think you are mixing up a few things.</p>\n\n<p><code>before_action :authenticate_user!</code> is used for each controller action where you want the user to be authenticated so he can continue his request.</p>\n\n<p>e.g. <code>after_sign_in_path_for</code> is a method of a devise controller which can be overriden like this: <a href=\"https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-up-%28registration%29\" rel=\"nofollow\">https://github.com/plataformatec/devise/wiki/How-To:-Redirect-to-a-specific-page-on-successful-sign-up-%28registration%29</a></p>\n"}], "owner": {"reputation": 366, "user_id": 1276591, "user_type": "registered", "accept_rate": 96, "profile_image": "https://www.gravatar.com/avatar/e811eccf4a68944bbddbfeb89911cd9c?s=128&d=identicon&r=PG", "display_name": "KhoaVo", "link": "https://stackoverflow.com/users/1276591/khoavo"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 864, "favorite_count": 0, "accepted_answer_id": 37149562, "answer_count": 1, "score": 0, "last_activity_date": 1462950453, "creation_date": 1462914956, "last_edit_date": 1462950453, "question_id": 37149116, "link": "https://stackoverflow.com/questions/37149116/how-to-use-before-action-with-after-sign-in-path-for-and-after-inactive-sign-up", "title": "how to use before_action with after_sign_in_path_for and after_inactive_sign_up_path_for methods?", "body": "<p>I want to use the  <code>after_sign_in_path_for</code> and <code>after_inactive_sign_up_path_for</code> methods to redirect user to some specific page, I would put these two methods and <code>before_action :authenticate_user!</code> all in the application controller, however, when the before_action method run it will be called on all actions, which will redirect my app to the wrong routes. Should I use <code>before_action :authenticate_user!, except: [:after_sign_in_path_for, :after_inactive_sign_up_path_for]</code> to skip authentication on these two methods?</p>\n\n<pre><code>class ApplicationController &lt; ActionController::Base\n  # Prevent CSRF attacks by raising an exception.\n  # For APIs, you may want to use :null_session instead.\n  protect_from_forgery with: :exception\n  before_action :authenticate!\n\n\n  def after_sign_in_path_for(user)\n      if user &amp;&amp; user.is_a?(Vendor)\n          return edit_vendor_registration_path\n          elsif user &amp;&amp; user.is_a?(Customer)\n          return dashboard_path\n      end\n  end\n\n  def after_sign_out_path_for(user)\n      if user &amp;&amp; user.is_a?(Vendor)\n          return root_path\n          elsif user &amp;&amp; user.is_a?(Customer)\n          return root_path\n      end\n  end\n\n\n  def authenticate!\n      if @current_user == current_customer\n          :authenticate_customer!\n          elsif @current_user == current_vendor\n          :authenticate_vendor!\n      end\n  end\nend\n</code></pre>\n\n<p>I ran into this error <code>Filter chain halted as :require_no_authentication rendered or redirected</code>, I believe the program somehow created an endless loop that keep redirecting to the dashboard_path.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "mailboxer"], "answers": [{"tags": [], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "is_accepted": true, "score": 0, "last_activity_date": 1463580214, "creation_date": 1463580214, "answer_id": 37301962, "question_id": 37148992, "link": "https://stackoverflow.com/questions/37148992/ror-mailboxer-monkey-patch-works-only-a-few-times/37301962#37301962", "title": "RoR Mailboxer Monkey Patch works only a few times", "body": "<p>First, I am still convinced that this is a development issue only. Whenever I have time to spare, I will test this out and post here.</p>\n\n<p>Second, to ensure this never happened again I copied the source for the Mailboxer's Conversation and added an inclusion <code>include MailboxerExt::Conversation</code>.</p>\n\n<p>I also structured my extension to not collide, reload Mailboxer's namespace.</p>\n\n<p>The final result has the folders <code>app/models/mailboxer</code>, <code>lib/mailboxer_ext</code>.</p>\n\n<p>The files are <code>app/models/mailboxer/conversation.rb</code>, <code>lib/mailboxer_ext.rb</code> and <code>lib/mailboxer_ext/conversation.rb</code>.</p>\n"}], "owner": {"reputation": 3206, "user_id": 4721554, "user_type": "registered", "accept_rate": 96, "profile_image": "https://i.stack.imgur.com/U4zQo.png?s=128&g=1", "display_name": "fbelanger", "link": "https://stackoverflow.com/users/4721554/fbelanger"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 58, "favorite_count": 0, "accepted_answer_id": 37301962, "answer_count": 1, "score": 2, "last_activity_date": 1463580214, "creation_date": 1462914396, "last_edit_date": 1462937018, "question_id": 37148992, "link": "https://stackoverflow.com/questions/37148992/ror-mailboxer-monkey-patch-works-only-a-few-times", "title": "RoR Mailboxer Monkey Patch works only a few times", "body": "<p>I am adding a method to <code>Mailboxer::Conversation</code> to retrieve a link using mailboxer's emails to reply (i.e. <code>reply_link</code>).</p>\n\n<p>I've decided to monkey patch mailboxer within my application. What I've done exactly is the following:</p>\n\n<ol>\n<li>Created the folder structure <code>lib/mailboxer/extensions</code>.</li>\n<li>Added files <code>lib/mailboxer/extensions/conversation.rb</code>, <code>lib/mailboxer/extensions.rb</code>, <code>lib/mailboxer.rb</code>.</li>\n</ol>\n\n<p>The following is the content of the files:</p>\n\n<pre><code># lib/mailboxer/extensions/conversation.rb\nmodule Mailboxer\n  module Extensions\n    module Conversation\n      def reply_link\n        \"/mail?notif_id=#{id}\"\n      end\n    end\n  end\nend\n\n# lib/mailboxer/extensions.rb\nrequire 'mailboxer/extensions/conversation'\n\n# lib/mailboxer.rb\nrequire 'mailboxer/extensions'\n</code></pre>\n\n<p>My <code>config/application.rb</code> has the following: </p>\n\n<p><code>config.autoload_paths += %W(#{config.root}/lib)</code></p>\n\n<p>Which gives me access to my lib folder.\nThen what I do is include <code>Mailboxer::Extensions::Conversation</code> to <code>Mailboxer::Conversation</code> within the mailboxer initializer file <code>initalizers/mailboxer.rb</code>:</p>\n\n<pre><code>Mailboxer.setup do |config|\n  # ...\nend\n\nMailboxer::Conversation.include Mailboxer::Extensions::Conversation\n</code></pre>\n\n<p>In my <code>rails console</code>, the code always works. However in the website, the <code>reply_link</code> method works at first, then becomes undefined randomly.</p>\n\n<p><a href=\"https://i.stack.imgur.com/Wvkqp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Wvkqp.png\" alt=\"enter image description here\"></a></p>\n\n<p>Couple of attempts later....</p>\n\n<p><a href=\"https://i.stack.imgur.com/777mO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/777mO.png\" alt=\"enter image description here\"></a></p>\n\n<p>and it stops working until I restart the server...</p>\n\n<p>Whenever I get an unrelated exception (i.e. typo, refactoring, etc.) the <code>reply_link</code> method becomes undefined. Could this be a development thing?</p>\n\n<p>I could fork mailboxer, make my changes then go on. But the method is so custom to my application that I'd rather just patch.</p>\n\n<p>If anyone has any suggestions, advice or questions I truly appreciate the advice.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "callback", "activesupport", "actioncontroller"], "answers": [{"tags": [], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "is_accepted": true, "score": 0, "last_activity_date": 1469175612, "creation_date": 1469175612, "answer_id": 38521549, "question_id": 37148442, "link": "https://stackoverflow.com/questions/37148442/register-a-different-type-of-callback-in-applicationcontroller/38521549#38521549", "title": "Register a different type of callback in ApplicationController", "body": "<p>I saw some upvotes so here is my current solution : </p>\n\n<p>With the example of a very lightweight Access control method, the original name of <code>my_callback</code> was <code>access_control</code></p>\n\n<pre><code># controllers/concerns/access_control.rb\n    module AccessControl\n      extend ActiveSupport::Concern\n      class_methods do\n        define_method :my_callback do |*names, &amp;blk|\n          _insert_callbacks(names, blk) do |name, options|\n            set_callback(:my_callback, :before, name, options)\n          end\n        end\n      end\n\n      included do\n\n        define_callbacks :my_callback\n\n        def perform_if_access_granted\n          run_callbacks :my_callback do\n            if @access_denied and not @access_authorized and not god_mode?\n              @request_authentication = true unless user_signed_in?\n              render(\n                file: File.join(Rails.root, 'app/views/errors/403.html'),\n                status: 403,\n                layout: 'error')\n            else\n              yield\n            end\n          end\n        end\n</code></pre>\n\n<p>Then in your other controllers that include the module (again with Access control example)</p>\n\n<pre><code># controllers/your_controller.rb\nclass YourController &lt; SeekerController\n  your_callback do\n    set_entity\n    allow_access_to_entity(@entity)\n  end\n</code></pre>\n"}], "owner": {"reputation": 10377, "user_id": 2832282, "user_type": "registered", "accept_rate": 71, "profile_image": "https://i.stack.imgur.com/ZJ4WG.jpg?s=128&g=1", "display_name": "Cyril Duchon-Doris", "link": "https://stackoverflow.com/users/2832282/cyril-duchon-doris"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 326, "favorite_count": 0, "accepted_answer_id": 38521549, "answer_count": 1, "score": 2, "last_activity_date": 1469175612, "creation_date": 1462912363, "question_id": 37148442, "link": "https://stackoverflow.com/questions/37148442/register-a-different-type-of-callback-in-applicationcontroller", "title": "Register a different type of callback in ApplicationController", "body": "<p>I need more fine grain control on the order of callbacks in my controllers. Currently Rails only let you use <code>append|prepend_before|after_action</code>, but this is just extremely bad if you want to add a module with its dedicated callbacks.</p>\n\n<p>I am trying to understand how AbstractController::Callbacks work, and I'm trying to register a new type of callback, that would be executed at a specific moment, taking advantage of Rail's controllers syntax for adding a callback (only/except + list of actions, etc.).</p>\n\n<p>You can think of it as a custom Access Control feature, but this question isn't about access control, please refrain answerbombing with gems like Cancan.</p>\n\n<pre><code>class ApplicationController\n  include xxx\n  include MyModuleWithCallbacks\n  include yyy\n  ...\nend\n\nclass MyController &lt; ApplicationController\n  prepend_before_action :something_before_my_callbacks\n  my_callback_list :custom_callback, only: [:index, :show]\n  before_action :something_after_my_callbacks\n  # Goal : the order of above callbacks should NOT matter, my_callback does not depend on ActionController process_action callback list\nend\n\nmodule MyModuleWithCallbacks\n  extend ActiveSupport::Concern\n  extend AbstractController::Callbacks\n\n  included do\n    around_action :perform_if_condition\n\n    def perform_if_condition\n      run_callbacks :my_callback_list do \n        if my_callbacks_went_good?\n          yield # And run the controller's before_callbacks\n        else\n          # log, render error page, etc.\n        end\n      end\n    end\n\n  # This is the hard part register the callback, I tried\n  class_methods do\n    define_method :my_callback_list do |*names, &amp;blk|\n      _insert_callbacks(names, blk) do |name, options|\n        set_callback(:my_callback_list, :before, name, options)\n      end\n    end\n  end\n</code></pre>\n\n<p>The current error is</p>\n\n<blockquote>\n  <p>undefined method `_my_callbacks_list_callbacks' for PublicController:Class</p>\n</blockquote>\n\n<p>I am taking my inspiration from the source code of<a href=\"https://github.com/rails/rails/blob/489a8f2a44dc9cea09154ee1ee2557d1f037c7d4/actionpack/lib/abstract_controller/callbacks.rb#L71\" rel=\"nofollow\"> AbstractController::Callbacks</a> but I'm not sure I understand what's going on there ^^\"</p>\n"}, {"tags": ["ruby", "ruby-on-rails-4", "grape-api"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462910852, "post_id": 37147623, "comment_id": 61833895, "body": "The trick is to read the documentation for both of them and match up calls. Do you have any external API tests that can verify your API is still working correctly?"}], "owner": {"reputation": 471, "user_id": 4515608, "user_type": "registered", "accept_rate": 82, "profile_image": "https://www.gravatar.com/avatar/a14962d882080869b622f66585c01945?s=128&d=identicon&r=PG&f=1", "display_name": "sump", "link": "https://stackoverflow.com/users/4515608/sump"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 88, "favorite_count": 0, "answer_count": 0, "score": 1, "last_activity_date": 1462909583, "creation_date": 1462909583, "question_id": 37147623, "link": "https://stackoverflow.com/questions/37147623/migrating-grape-api-to-standard-rails-api", "title": "Migrating Grape API to standard Rails API", "body": "<p>I'm looking to migrate from an API that was built in Grape to a straight Rails API.  I've been looking for some resources on the best practises to do so and have come up quite empty. I was wondering if anyone has any good resources/tips/tricks or anything else that may be of help to me in this process?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "curl", "omniauth"], "comments": [{"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 3, "creation_date": 1462906324, "post_id": 37146653, "comment_id": 61831351, "body": "Normally <code>request.env</code> pertains to requests being <i>received</i>, not being made."}, {"owner": {"reputation": 233, "user_id": 6072816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a56cea9a619365ec3ce27ef953cfdba?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Moroz", "link": "https://stackoverflow.com/users/6072816/andrey-moroz"}, "reply_to_user": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 0, "creation_date": 1462906581, "post_id": 37146653, "comment_id": 61831505, "body": "I want to make request with params and when my app receive it, request.env[&#39;omniauth.auth&#39;] should be equal to those params. My app check request params request.env[&#39;omniauth.auth&#39;], but I have no idea how to manage them"}, {"owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "edited": false, "score": 2, "creation_date": 1462906701, "post_id": 37146653, "comment_id": 61831575, "body": "I have no idea what you&#39;re doing. Can you include some code that demonstrates what you&#39;re attempting?"}, {"owner": {"reputation": 1002, "user_id": 5479988, "user_type": "registered", "profile_image": "https://lh6.googleusercontent.com/-Z_oUVK4Wkuo/AAAAAAAAAAI/AAAAAAAAABA/vn2BD49K67M/photo.jpg?sz=128", "display_name": "Jim Van Fleet", "link": "https://stackoverflow.com/users/5479988/jim-van-fleet"}, "edited": false, "score": 0, "creation_date": 1462912578, "post_id": 37146653, "comment_id": 61834839, "body": "Must you use something like curl that&#39;s outside Ruby, or can rack-test accomplish this? <a href=\"https://github.com/brynary/rack-test\" rel=\"nofollow noreferrer\">github.com/brynary/rack-test</a>"}, {"owner": {"reputation": 233, "user_id": 6072816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a56cea9a619365ec3ce27ef953cfdba?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Moroz", "link": "https://stackoverflow.com/users/6072816/andrey-moroz"}, "edited": false, "score": 0, "creation_date": 1462954448, "post_id": 37146653, "comment_id": 61849899, "body": "Okay, take a look at <a href=\"https://github.com/intridea/omniauth#integrating-omniauth-into-your-application\" rel=\"nofollow noreferrer\">github.com/intridea/&hellip;</a> def auth_hash     request.env[&#39;omniauth.auth&#39;]   end I don&#39;t know how to set this param when I do curl"}], "answers": [{"tags": [], "owner": {"reputation": 1217, "user_id": 5511520, "user_type": "registered", "accept_rate": 68, "profile_image": "https://www.gravatar.com/avatar/baaabef4e4f62eee165869427acd0472?s=128&d=identicon&r=PG&f=1", "display_name": "Mike Belyakov", "link": "https://stackoverflow.com/users/5511520/mike-belyakov"}, "is_accepted": false, "score": 0, "last_activity_date": 1462920169, "creation_date": 1462920169, "answer_id": 37150132, "question_id": 37146653, "link": "https://stackoverflow.com/questions/37146653/how-to-set-request-env-rails/37150132#37150132", "title": "How to set request.env Rails", "body": "<p>You really need stuff for manage ENV global vars. And use it like ENV['omniauth_facebook']</p>\n\n<p>Use <a href=\"https://github.com/bkeepers/dotenv\" rel=\"nofollow\">dotenv</a> gem, and it is good in production too.</p>\n"}], "owner": {"reputation": 233, "user_id": 6072816, "user_type": "registered", "accept_rate": 70, "profile_image": "https://www.gravatar.com/avatar/8a56cea9a619365ec3ce27ef953cfdba?s=128&d=identicon&r=PG&f=1", "display_name": "Andrey Moroz", "link": "https://stackoverflow.com/users/6072816/andrey-moroz"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": false, "view_count": 1660, "favorite_count": 0, "answer_count": 1, "score": 0, "last_activity_date": 1462954528, "creation_date": 1462906224, "last_edit_date": 1462954528, "question_id": 37146653, "link": "https://stackoverflow.com/questions/37146653/how-to-set-request-env-rails", "title": "How to set request.env Rails", "body": "<p>I want to make request through curl or other stuff <code>(Net::HTTP.get)</code>. How can I set <code>request.env['omniauth.auth']</code> when I make request? What is <code>request.env</code> in general? </p>\n\n<p>For example, take a look at <a href=\"https://github.com/intridea/omniauth#integrating-omniauth-into-your-application\" rel=\"nofollow\">https://github.com/intridea/omniauth#integrating-omniauth-into-your-application</a> </p>\n\n<pre><code>class SessionsController &lt; ApplicationController\n  def create\n    @user = User.find_or_create_from_auth_hash(auth_hash)\n    self.current_user = @user\n    redirect_to '/'\n  end\n\n  protected\n\n  def auth_hash\n    request.env['omniauth.auth']\n  end\nend\n</code></pre>\n\n<p>I don't know how to set request.env['omniauth.auth'] when I do curl</p>\n"}, {"tags": ["c", "arrays", "ruby", "ruby-c-extension"], "answers": [{"comments": [{"owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "edited": false, "score": 0, "creation_date": 1462907857, "post_id": 37146691, "comment_id": 61832280, "body": "Thanks for the additional information. I will stick with my approach for now as I have other priorities,  but I will definitely look back at your proposed alternative in the near future."}], "tags": [], "owner": {"reputation": 24966, "user_id": 2001031, "user_type": "registered", "accept_rate": 93, "profile_image": "https://www.gravatar.com/avatar/bd4f0d39f82be9c22f6f01c80d7ad800?s=128&d=identicon&r=PG", "display_name": "Neil Slater", "link": "https://stackoverflow.com/users/2001031/neil-slater"}, "is_accepted": true, "score": 3, "last_activity_date": 1462909572, "last_edit_date": 1462909572, "creation_date": 1462906328, "answer_id": 37146691, "question_id": 37146399, "link": "https://stackoverflow.com/questions/37146399/ruby-c-api-from-ruby-array-to-c-array/37146691#37146691", "title": "Ruby C API - From ruby array to C array", "body": "<p>No there is not a quicker way to convert Ruby <code>Array</code> to a C structure. That's because the Ruby <code>Array</code> could contain a mixture of any other kind of Ruby object, many of which could not be converted to a C <code>double</code></p>\n\n<p>There is another option though - <a href=\"https://rubygems.org/gems/narray\" rel=\"nofollow\">NArray</a>. This is a very efficient way of dealing with numerical multi-dimensional arrays in Ruby. There is a lot less procedure converting from an NArray to C, but it is entirely different way of doing things. </p>\n\n<p>Some of it is a little complex. In summary . . .</p>\n\n<h2>Load the narray.h library in extconf.rb</h2>\n\n<p>Original version of this was from fftw3 gem (I have simplified a little):</p>\n\n<pre><code>require \"mkmf\"\nrequire \"narray\"\n\nnarray_dir = File.dirname(Gem.find_files(\"narray.h\").first) rescue $sitearchdir\ndir_config('narray', narray_dir, narray_dir)\n\nif ( ! ( have_header(\"narray.h\") &amp;&amp; have_header(\"narray_config.h\") ) )\n   puts \"Header narray.h or narray_config.h is not found.\"\n   exit(-1)\nend\n\ncreate_makefile( 'my_lib_name/my_lib_name' )\n</code></pre>\n\n<h2>Cast input NArray objects to the data type you want to work with</h2>\n\n<p>Here's an example instance method that can access the NArray</p>\n\n<pre><code>VALUE example_narray_param( VALUE self, VALUE rv_narray ) {\n  // Cast the input to the data type you want - here 32-bit ints\n  volatile VALUE new_narray = na_cast_object(rv_narray, NA_LINT);\n\n  // NARRAY is the C struct interface to NArray data\n  struct NARRAY *na_items;\n\n  // This macro is NArray's equivalent of NUM2DBL, pointing na_items \n  // at the data\n  GetNArray( new_narray, na_items );\n\n  // row now points natively to the data\n  int * row = (int*) na_items-&gt;ptr;\n</code></pre>\n\n<p>For multi-dimensional arrays like your matrix, NArray uses a single pointer with multiplier offsets, similar to your <code>matA[i * colsA + j]</code> - going into full detail on this would be too long, but hopefully this is enough of a start to help you decide if this is the right solution for you.</p>\n\n<p>I actually use this approach a lot in some personal projects. They are MIT licensed, so feel free to look through them and copy or re-use anything. This <a href=\"https://github.com/neilslater/ru_ne_ne/blob/master/ext/ru_ne_ne/ruby_class_layer_ff.c\" rel=\"nofollow\">neural network layer class</a> might contain some useful reference code.</p>\n"}], "owner": {"reputation": 954, "user_id": 3259651, "user_type": "registered", "accept_rate": 56, "profile_image": "https://i.stack.imgur.com/xrrkE.jpg?s=128&g=1", "display_name": "Rojj", "link": "https://stackoverflow.com/users/3259651/rojj"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 565, "favorite_count": 0, "accepted_answer_id": 37146691, "answer_count": 1, "score": 2, "last_activity_date": 1462909572, "creation_date": 1462905409, "question_id": 37146399, "link": "https://stackoverflow.com/questions/37146399/ruby-c-api-from-ruby-array-to-c-array", "title": "Ruby C API - From ruby array to C array", "body": "<p>I am passing an array (matrix) from Ruby to a C function. At the moment I am using the following code</p>\n\n<pre><code>VALUE matmat_mul(VALUE self, VALUE matrixA, VALUE matrixB)\n{\n    int rowsA = RARRAY_LEN(matrixA);\n    VALUE firstElement = rb_ary_entry(matrixA, 0);\n    int colsA = RARRAY_LEN(firstElement);\n    int rowsB = RARRAY_LEN(matrixB);\n    firstElement = rb_ary_entry(matrixB, 0);\n    int colsB = RARRAY_LEN(firstElement);\n\n    int i,j;\n    double *matA = (double *)malloc(rowsA * colsA * sizeof(double));\n    double *matB = (double *)malloc(rowsB * colsB * sizeof(double));\n\n    VALUE rowA;\n    for (i=0; i&lt;rowsA; i++)\n    {\n        rowA = rb_ary_entry(matrixA, i);\n        for (j=0; j&lt;colsA; j++)\n        {\n            matA[i * colsA + j] = NUM2DBL(rb_ary_entry( rowA, j));\n        }\n    }\n\n    //  same for matrix B\n    ....\n    ....\n\n    // Perform operation C = A x B\n\n    VALUE matrixC = rb_ary_new2(rowsC);\n    VALUE rowC;\n     for (i=0; i&lt;rowsC; i++) {\n         rowC = rb_ary_new2(colsC);\n         for (j=0; j&lt;colsC; j++) {\n              rb_ary_store(rowC, j, DBL2NUM(matC[i * colsC + j]));\n         }\n         rb_ary_store(matrixC, i, rowC);\n     }\n\n\nreturn matrixC\n}\n</code></pre>\n\n<p>Is there a better/quicker way to convert a Ruby array to a C array and viceversa?</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "algolia"], "comments": [{"owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "edited": false, "score": 0, "creation_date": 1462963996, "post_id": 37146300, "comment_id": 61856438, "body": "No one has any answer?"}], "answers": [{"tags": [], "owner": {"reputation": 903, "user_id": 2095415, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/a52e4cd5b95b92225220b0256d3b904f?s=128&d=identicon&r=PG", "display_name": "aseure", "link": "https://stackoverflow.com/users/2095415/aseure"}, "is_accepted": true, "score": 7, "last_activity_date": 1463046942, "creation_date": 1463046942, "answer_id": 37183442, "question_id": 37146300, "link": "https://stackoverflow.com/questions/37146300/algolia-search-with-attribute-name/37183442#37183442", "title": "Algolia search with attribute name", "body": "<p>To do so, you'll first need to put the <code>Country</code> attribute in your <code>attributesForFaceting</code> list. You can do that using the REST API, your client of choice or from the Algolia Dashboard. Using the later one, go to the <code>Indices</code> page, select your index and click on the <code>Display</code> tab. Here, you could add your <code>Country</code> field to the <code>Attributes for faceting</code> list. After that, click on save and your index will be rebuild.</p>\n\n<p>Now, your index is ready to filter the search queries according to the country you want. To perform the search query, you can use (using the Ruby client):</p>\n\n<pre><code>Contact.search(\"Batch\", {\n    facets: [\"Country\"],\n    facetFilters: [\"Country:Germany\"]\n})\n</code></pre>\n\n<p>For more informations about faceting, here is a quick intro from the <a href=\"https://www.algolia.com/doc/faq/searching/what-is-faceting\">FAQ</a> and a more detailed guide in the <a href=\"https://www.algolia.com/doc/search/filtering-faceting\">documentation</a>.</p>\n"}], "owner": {"user_type": "does_not_exist", "display_name": "user6175355"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 382, "favorite_count": 3, "accepted_answer_id": 37183442, "answer_count": 1, "score": 6, "last_activity_date": 1463176151, "creation_date": 1462905036, "question_id": 37146300, "link": "https://stackoverflow.com/questions/37146300/algolia-search-with-attribute-name", "title": "Algolia search with attribute name", "body": "<p>Data on algolia is like this</p>\n\n<pre><code>objectID:3464542\nType:\"Accelerator\"\nCountry:\"Germany\"\nCity:null\nName:\"ProsiebenSat1 Accelerator Batch #8\"\n</code></pre>\n\n<p>I want to search any name which are in Germany. How I do that?</p>\n\n<p>When I do <code>Contact.raw_search(\"Batch\")</code>, I get all records even whose name include this even non-German. I want to get all those which are of specific country.</p>\n"}, {"tags": ["ruby-on-rails", "ruby", "rspec"], "answers": [{"tags": [], "owner": {"reputation": 491, "user_id": 2111438, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/4b388f4b04ec82111cfc64f34a92ff61?s=128&d=identicon&r=PG", "display_name": "JanDintel", "link": "https://stackoverflow.com/users/2111438/jandintel"}, "is_accepted": true, "score": 2, "last_activity_date": 1462915078, "creation_date": 1462915078, "answer_id": 37149143, "question_id": 37146282, "link": "https://stackoverflow.com/questions/37146282/how-to-mock-out-remote-ip-in-a-rspec-helper/37149143#37149143", "title": "How to mock out remote_ip in a Rspec helper?", "body": "<h2>Answer</h2>\n\n<p>You can set the <code>remote_ip</code> in the helper with <code>controller.request.remote_addr = '1.2.3.4'</code>. </p>\n\n<p><strong>Example</strong></p>\n\n<p><em>Helper file:</em></p>\n\n<pre><code>module ApplicationHelper\n  def ip\n    request.remote_ip\n  end\nend\n</code></pre>\n\n<p><em>Spec file:</em></p>\n\n<pre><code>require 'rails_helper'\n\nRSpec.describe ApplicationHelper, type: :helper do\n  describe '#ip' do\n    it 'returns the IP' do\n      controller.request.remote_addr = '1.2.3.4'\n\n      expect(helper.ip).to eql '1.2.3.4'\n    end\n  end\nend\n</code></pre>\n\n<h2>Explanation</h2>\n\n<p>Helper specs mix in <code>ActionView::TestCase::Behavior</code>. This provides a <code>helper</code> object which mixes in the helper module being spec'd, along with <code>ApplicationHelper</code>. (In this case the module being spec'd is the <code>ApplicationHelper</code>).</p>\n\n<p>When the helper spec is executed is sets the <code>controller</code> object to an <code>ActionView::TestCase::TestController</code>. The <code>request</code> object on this test controller is an <code>ActionController::TestRequest</code>.</p>\n\n<p>Using the <code>#remote_addr=</code> setter on the test request, sets the <code>\"REMOTE_ADDR\"</code> key in the <code>@env</code> instance variable. The <code>remote_ip</code> uses the same <code>\"REMOTE_ADDR\"</code> key in the <code>@env</code> instance variable to retrieve the IP.</p>\n"}, {"tags": [], "owner": {"reputation": 51, "user_id": 9093814, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/051c21b17777206671abdde0e5070e59?s=128&d=identicon&r=PG&f=1", "display_name": "Timofey Lavnik", "link": "https://stackoverflow.com/users/9093814/timofey-lavnik"}, "is_accepted": false, "score": 3, "last_activity_date": 1586965874, "creation_date": 1586965874, "answer_id": 61233022, "question_id": 37146282, "link": "https://stackoverflow.com/questions/37146282/how-to-mock-out-remote-ip-in-a-rspec-helper/61233022#61233022", "title": "How to mock out remote_ip in a Rspec helper?", "body": "<p>You can use env key for the method arguments that will contain <code>\"REMOTE_ADDR\"</code> key:</p>\n\n<pre class=\"lang-rb prettyprint-override\"><code>post path, params: params, env: { \"REMOTE_ADDR\": your_desired_ip }\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 41, "user_id": 14098262, "user_type": "registered", "profile_image": "https://lh3.googleusercontent.com/a-/AOh14Givrd7s2DZK52Y3Bopb9BeoTHvJq0xV3yxBiDQi=k-s128", "display_name": "Tamal Chakroborty", "link": "https://stackoverflow.com/users/14098262/tamal-chakroborty"}, "is_accepted": false, "score": 2, "last_activity_date": 1597310905, "last_edit_date": 1597310905, "creation_date": 1597308976, "answer_id": 63391584, "question_id": 37146282, "link": "https://stackoverflow.com/questions/37146282/how-to-mock-out-remote-ip-in-a-rspec-helper/63391584#63391584", "title": "How to mock out remote_ip in a Rspec helper?", "body": "<pre><code>before do\n  request.env['REMOTE_ADDR'] = '59.152.62.114'\nend\n</code></pre>\n<p>This will resolve your problem. However, if you have used the ip in a private method of your controller can check out <a href=\"https://medium.com/@tamal.chakraborty_20403/write-rspecs-to-test-request-remote-ip-in-private-method-of-a-controller-ruby-on-rails-274f2517601e\" rel=\"nofollow noreferrer\">this link:</a></p>\n"}], "owner": {"reputation": 9770, "user_id": 3011531, "user_type": "registered", "accept_rate": 64, "profile_image": "https://www.gravatar.com/avatar/31da892ff616d781b2d3396c9271e040?s=128&d=identicon&r=PG&f=1", "display_name": "Some Guy", "link": "https://stackoverflow.com/users/3011531/some-guy"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 2662, "favorite_count": 0, "accepted_answer_id": 37149143, "answer_count": 3, "score": 5, "last_activity_date": 1597310905, "creation_date": 1462904975, "question_id": 37146282, "link": "https://stackoverflow.com/questions/37146282/how-to-mock-out-remote-ip-in-a-rspec-helper", "title": "How to mock out remote_ip in a Rspec helper?", "body": "<p>I have a helper spec that says the following:\n<code>expect(request).to receive(:remote_ip).and_return('1.2.3.4')</code></p>\n\n<p>Running the tests, they pass, but with a warning:</p>\n\n<p>WARNING: An expectation of <code>:remote_ip</code> was set on <code>nil</code>. To allow expectations on <code>nil</code> and suppress this message, set <code>config.allow_expectations_on_nil</code> to <code>true</code>. To disallow expectations on <code>nil</code>, set <code>config.allow_expectations_on_nil</code> to <code>false</code>.</p>\n\n<p>I've tried using helper.request and controller.request, but then the tests fails: <code>undefined method remote_ip for nil:NilClass</code></p>\n\n<p>How do you mock out your ip address?</p>\n"}, {"tags": ["arrays", "ruby"], "comments": [{"owner": {"reputation": 7965, "user_id": 6242613, "user_type": "registered", "accept_rate": 90, "profile_image": "https://i.stack.imgur.com/X5cUu.jpg?s=128&g=1", "display_name": "V. Sambor", "link": "https://stackoverflow.com/users/6242613/v-sambor"}, "edited": false, "score": 0, "creation_date": 1462903936, "post_id": 37145929, "comment_id": 61829989, "body": "<i>grab = line.chomp(&quot; &quot; + &quot;/n&quot;).split</i> you put an array in grab 2 times, split returns an array... what do you expect to have?"}, {"owner": {"reputation": 16237, "user_id": 2166798, "user_type": "registered", "accept_rate": 50, "profile_image": "https://www.gravatar.com/avatar/417356917295f5176d2a3e7c21d8f9e8?s=128&d=identicon&r=PG", "display_name": "pjs", "link": "https://stackoverflow.com/users/2166798/pjs"}, "edited": false, "score": 0, "creation_date": 1462904308, "post_id": 37145929, "comment_id": 61830226, "body": "It&#39;s unclear whether you consider the file to contain a single array (vector) split across two lines, or a 2-d array (matrix).  Please clarify?"}, {"owner": {"reputation": 91121, "user_id": 179125, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/5594142dcc49a24b1902ec8059181f8d?s=128&d=identicon&r=PG&f=1", "display_name": "Jordan Running", "link": "https://stackoverflow.com/users/179125/jordan-running"}, "edited": false, "score": 0, "creation_date": 1462908439, "post_id": 37145929, "comment_id": 61832589, "body": "The problem is that you&#39;re not adding items to the array (as you might with <code>grab &lt;&lt; line...</code> or <code>grab.push(line...)</code>, you&#39;re replacing the array entirely."}], "answers": [{"tags": [], "owner": {"reputation": 193600, "user_id": 87189, "user_type": "registered", "accept_rate": 100, "profile_image": "https://www.gravatar.com/avatar/98e7d6edce863e7a1bf8199b082eb25e?s=128&d=identicon&r=PG", "display_name": "tadman", "link": "https://stackoverflow.com/users/87189/tadman"}, "is_accepted": true, "score": 1, "last_activity_date": 1462903974, "creation_date": 1462903974, "answer_id": 37146021, "question_id": 37145929, "link": "https://stackoverflow.com/questions/37145929/when-i-try-to-make-an-array-in-ruby-from-a-file-it-makes-multiple-arrays/37146021#37146021", "title": "When I try to make an array in Ruby from a file, it makes multiple arrays", "body": "<p>If you want to consolidate this into a singular array:</p>\n\n<pre><code>grab = [ ]\n\nIO.foreach(\"test.txt\") do |line|\n  grab.concat(line.chomp.split)\nend\n</code></pre>\n\n<p>Another way:</p>\n\n<pre><code>grab = IO.readlines(\"test.txt\").flat_map do |line|\n  line.chomp.split\nend\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7894, "user_id": 981616, "user_type": "registered", "accept_rate": 87, "profile_image": "https://www.gravatar.com/avatar/92513702d30405c7e2ca056bdc72aa9f?s=128&d=identicon&r=PG", "display_name": "uday", "link": "https://stackoverflow.com/users/981616/uday"}, "is_accepted": false, "score": 1, "last_activity_date": 1462903977, "creation_date": 1462903977, "answer_id": 37146024, "question_id": 37145929, "link": "https://stackoverflow.com/questions/37145929/when-i-try-to-make-an-array-in-ruby-from-a-file-it-makes-multiple-arrays/37146024#37146024", "title": "When I try to make an array in Ruby from a file, it makes multiple arrays", "body": "<p>You should do something like </p>\n\n<pre><code>grab &lt;&lt; line.chomp(\" \" + \"/n\").split\n</code></pre>\n"}, {"tags": [], "owner": {"reputation": 7557, "user_id": 2577852, "user_type": "registered", "profile_image": "https://www.gravatar.com/avatar/29383b0cb31502717af693fa45df0e62?s=128&d=identicon&r=PG", "display_name": "Michael Gaskill", "link": "https://stackoverflow.com/users/2577852/michael-gaskill"}, "is_accepted": false, "score": 0, "last_activity_date": 1463168449, "last_edit_date": 1463168449, "creation_date": 1462909523, "answer_id": 37147605, "question_id": 37145929, "link": "https://stackoverflow.com/questions/37145929/when-i-try-to-make-an-array-in-ruby-from-a-file-it-makes-multiple-arrays/37147605#37147605", "title": "When I try to make an array in Ruby from a file, it makes multiple arrays", "body": "<p>This gives you what you're looking for:</p>\n\n<pre><code>grab = IO.foreach(\"test2.txt\").map {|line| line.split(/\\D/) }.flatten\nputs \"#{grab}\"\n</code></pre>\n\n<p>This produces the single array output:</p>\n\n<pre><code>[\"3\", \"5\", \"10\", \"2\", \"7\", \"15\"]\n</code></pre>\n\n<p>It can all be wrapped up into a nice, tidy one-liner if you prefer it that way:</p>\n\n<pre><code>grab = IO.foreach(\"test2.txt\").map {|line| line.split(/\\D/) }.flatten\nputs \"#{grab}\"\n</code></pre>\n\n<p>If you want to do an integer conversion in the process, you can modify the <code>line.split</code> to this:</p>\n\n<pre><code>grab = line.split(/\\D/).map(&amp;:to_i)\n</code></pre>\n\n<p>That change will produce this output:</p>\n\n<pre><code>[3, 5, 10, 2, 7, 15]\n</code></pre>\n"}], "owner": {"reputation": 23, "user_id": 4493295, "user_type": "registered", "profile_image": "https://lh5.googleusercontent.com/-faoHWwPSNYQ/AAAAAAAAAAI/AAAAAAAAEI4/i9gsrjb6ZCQ/photo.jpg?sz=128", "display_name": "Dexus", "link": "https://stackoverflow.com/users/4493295/dexus"}, "delete_vote_count": 0, "reopen_vote_count": 0, "close_vote_count": 0, "is_answered": true, "view_count": 31, "favorite_count": 0, "accepted_answer_id": 37146021, "answer_count": 3, "score": 1, "last_activity_date": 1463168449, "creation_date": 1462903655, "question_id": 37145929, "link": "https://stackoverflow.com/questions/37145929/when-i-try-to-make-an-array-in-ruby-from-a-file-it-makes-multiple-arrays", "title": "When I try to make an array in Ruby from a file, it makes multiple arrays", "body": "<p>sorry if this is a simple solution, but I'm trying to grab all the numbers from a file into an array. The file I'm importing reads </p>\n\n<pre><code>3 5 10 \n2 7 15\n</code></pre>\n\n<p>This is my code</p>\n\n<pre><code>grab = Array.new\nIO.foreach(\"test.txt\") do |line|\n  grab = line.chomp(\" \" + \"/n\").split\nend\np grab\n</code></pre>\n\n<p>When I do this, it prints the last line of numbers, yet when I print it from the IO block, it prints 2 arrays. First and second line.</p>\n"}]